{"items":[{"tags":["java","sql","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689088171,"post_id":76663343,"comment_id":135162093,"body_markdown":"`TO_DATE` doesn&#39;t exist in H2. You&#39;ll need to use `CAST` or string literal in ISO date format","body":"<code>TO_DATE</code> doesn&#39;t exist in H2. You&#39;ll need to use <code>CAST</code> or string literal in ISO date format"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689088453,"post_id":76663343,"comment_id":135162163,"body_markdown":"`PARSEDATETIME(&#39;1-5-1981&#39;, &#39;dd-MM-yyyy&#39;)` can be tried too","body":"<code>PARSEDATETIME(&#39;1-5-1981&#39;, &#39;dd-MM-yyyy&#39;)</code> can be tried too"}],"answers":[{"tags":[],"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089290,"creation_date":1689089290,"answer_id":76663578,"question_id":76663343,"body_markdown":"`TO_DATE` is not supported by every database vendor and H2 is one of them. To insert date values in a database using H2 you can just pass a String literal formatted with ISO format `YYYY-MM-DD`. So the query should look like:\r\n\r\n```\r\nINSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, &#39;1981-11-17&#39;, 5000, null);\r\nINSERT INTO EMPLOYEE VALUES (7698, &#39;JOHN&#39;, &#39;BLAKE&#39;, &#39;MARIA&#39;, &#39;MANAGER&#39;, 7839, &#39;1981-05-01&#39;, 2850, 30);\r\n```\r\n\r\nIf you use the `toString()` method on a `LocalDate` object it will be outputted exatly as needed in this case. So when you build the SQL query just pass that String, instead of a LocalDate object.","title":"How to fix an error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39;? Function &quot;TO_DATE&quot; not found","body":"<p><code>TO_DATE</code> is not supported by every database vendor and H2 is one of them. To insert date values in a database using H2 you can just pass a String literal formatted with ISO format <code>YYYY-MM-DD</code>. So the query should look like:</p>\n<pre><code>INSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, '1981-11-17', 5000, null);\nINSERT INTO EMPLOYEE VALUES (7698, 'JOHN', 'BLAKE', 'MARIA', 'MANAGER', 7839, '1981-05-01', 2850, 30);\n</code></pre>\n<p>If you use the <code>toString()</code> method on a <code>LocalDate</code> object it will be outputted exatly as needed in this case. So when you build the SQL query just pass that String, instead of a LocalDate object.</p>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689089290,"creation_date":1689087711,"question_id":76663343,"body_markdown":"I have data.sql, but I may not change it.\r\n\r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null);\r\n    INSERT INTO EMPLOYEE VALUES (7698, &#39;JOHN&#39;, &#39;BLAKE&#39;, &#39;MARIA&#39;, &#39;MANAGER&#39;, 7839, TO_DATE(&#39;1-5-1981&#39;, &#39;DD-MM-YYYY&#39;), 2850, 30);\r\n and I have \r\n\r\n    @Entity\r\n    @Table(name =&quot;employee&quot;)\r\n    public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy =  GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;)\r\n        private Integer id;\r\n        @Column(name = &quot;hiredate&quot;)\r\n        private LocalDate hired;\r\n      // constructors, getters, setters\r\nwhen I run my MvcApplication I have an error:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with \r\n    name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource \r\n    [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]:\r\n    Invocation of init method failed; \r\n    nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException:\r\n    Failed to execute SQL script statement #5 of URL \r\n    [file:/Users/dh/IdeaProjectsE/employee-catalog/target/classes/data.sql]: \r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null); nested exception is org.h2.jdbc.JdbcSQLSyntaxErrorException: Function &quot;TO_DATE&quot; not found; SQL statement:\r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null) [90022-214]\r\nWhat am I doing wrong? How can I fix this?\r\n\r\nAlso I have application.properties\r\n\r\n    server.port=8080\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialectspring.jpa.generate-ddl=false\r\n    spring.jpa.hibernate.ddl-auto=\r\n    spring.jpa.show-sql=true","title":"How to fix an error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39;? Function &quot;TO_DATE&quot; not found","body":"<p>I have data.sql, but I may not change it.</p>\n<pre><code>INSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null);\nINSERT INTO EMPLOYEE VALUES (7698, 'JOHN', 'BLAKE', 'MARIA', 'MANAGER', 7839, TO_DATE('1-5-1981', 'DD-MM-YYYY'), 2850, 30);\n</code></pre>\n<p>and I have</p>\n<pre><code>@Entity\n@Table(name =&quot;employee&quot;)\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy =  GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Integer id;\n    @Column(name = &quot;hiredate&quot;)\n    private LocalDate hired;\n  // constructors, getters, setters\n</code></pre>\n<p>when I run my MvcApplication I have an error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with \nname 'dataSourceScriptDatabaseInitializer' defined in class path resource \n[org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]:\nInvocation of init method failed; \nnested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException:\nFailed to execute SQL script statement #5 of URL \n[file:/Users/dh/IdeaProjectsE/employee-catalog/target/classes/data.sql]: \nINSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null); nested exception is org.h2.jdbc.JdbcSQLSyntaxErrorException: Function &quot;TO_DATE&quot; not found; SQL statement:\nINSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null) [90022-214]\n</code></pre>\n<p>What am I doing wrong? How can I fix this?</p>\n<p>Also I have application.properties</p>\n<pre><code>server.port=8080\n\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\n\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialectspring.jpa.generate-ddl=false\nspring.jpa.hibernate.ddl-auto=\nspring.jpa.show-sql=true\n</code></pre>\n"},{"tags":["java","windows","jna"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1478879859,"post_id":40551661,"comment_id":68341663,"body_markdown":"You must use a 32-bit JRE to execute 32-bit code on 64-bit operating systems.","body":"You must use a 32-bit JRE to execute 32-bit code on 64-bit operating systems."},{"owner":{"account_id":3858478,"reputation":7458,"user_id":3196753,"display_name":"tresf"},"score":0,"creation_date":1569256535,"post_id":40551661,"comment_id":102529540,"body_markdown":"`Wow64DisableWow64FsRedirection` is for the other way around (when a 32-bit application is forced to talk to the 32-bit file system, such as `C:\\Program Files (x86)`, `C:\\System\\ SysWOW64`.  You&#39;re doing the exact opposite, which is as simple as starting the 32-bit process by it&#39;s absolute path.  The correct solution is @edwin-buck&#39;s below.   If you&#39;re not sure how to test if you&#39;re in a 64-bit environment, check `System.getenv(&quot;ProgramFiles(x86)&quot;);`","body":"<code>Wow64DisableWow64FsRedirection</code> is for the other way around (when a 32-bit application is forced to talk to the 32-bit file system, such as <code>C:\\Program Files (x86)</code>, <code>C:\\System\\ SysWOW64</code>.  You&#39;re doing the exact opposite, which is as simple as starting the 32-bit process by it&#39;s absolute path.  The correct solution is @edwin-buck&#39;s below.   If you&#39;re not sure how to test if you&#39;re in a 64-bit environment, check <code>System.getenv(&quot;ProgramFiles(x86)&quot;);</code>"}],"answers":[{"comments":[{"owner":{"display_name":"user6828073"},"score":0,"creation_date":1478881903,"post_id":40551794,"comment_id":68342865,"body_markdown":"your suggestion still is executing 64 bit version of &quot;notepad.exe&quot; :-(","body":"your suggestion still is executing 64 bit version of &quot;notepad.exe&quot; :-("},{"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"score":0,"creation_date":1478882396,"post_id":40551794,"comment_id":68343125,"body_markdown":"@Saulo Apparently the 32 bit executables are not stored in System32, but in SysWOW64.  That&#39;s a naming convention that only programmers in Redmond would love.","body":"@Saulo Apparently the 32 bit executables are not stored in System32, but in SysWOW64.  That&#39;s a naming convention that only programmers in Redmond would love."},{"owner":{"account_id":476140,"reputation":35789,"user_id":886887,"accept_rate":94,"display_name":"Harry Johnston"},"score":1,"creation_date":1478907431,"post_id":40551794,"comment_id":68353630,"body_markdown":"It makes sense from a purely technical perspective, for what little that&#39;s worth.  (Plus changing the name of the Windows NT system folder would probably have caused all sorts of backwards compatibility issues.)","body":"It makes sense from a purely technical perspective, for what little that&#39;s worth.  (Plus changing the name of the Windows NT system folder would probably have caused all sorts of backwards compatibility issues.)"}],"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478882339,"creation_date":1478880182,"answer_id":40551794,"question_id":40551661,"body_markdown":"--- Updated because Windows is well, Windows ---\r\n\r\n32 bit executables are in SysWOW64, while 64 bit executables are in System32.  Apparently this bizarre choice makes sense to the people up in Redmond.\r\n\r\n--- Rest of post follows, with updates ---\r\n\r\nYou are asking a 64 bit program to load and interface with 32 bit executables.  The &quot;compatibility&quot; for 32 bit executables doesn&#39;t extend to linking them to 64 bit programs.\r\n\r\nYou need to launch a 32 bit JVM so the JNI interface will match the desired environment.\r\n\r\nHowever, your example might not even need JNI.  If you are launching 32-bit standalone programs, then you do not need to use JNI.  Instead you could use ProcessBuilder and pass the command line arguments to the shell to effectively ensure you launch the 32 bit executable.\r\n\r\n    ProcessBuilder pb = new ProcessBuider(String.format(&quot;%s\\\\SysWOW64\\\\notepad.exe&quot;, System.getEnv(&quot;WINDIR&quot;));\r\n    Process process = pb.start();\r\n\r\nJNI is for when you need to link the JVM to native libraries, it is not the preferred way to launch native applications.  `ProcessBuilder` is what you prefer to launch native applications.","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>--- Updated because Windows is well, Windows ---</p>\n\n<p>32 bit executables are in SysWOW64, while 64 bit executables are in System32.  Apparently this bizarre choice makes sense to the people up in Redmond.</p>\n\n<p>--- Rest of post follows, with updates ---</p>\n\n<p>You are asking a 64 bit program to load and interface with 32 bit executables.  The \"compatibility\" for 32 bit executables doesn't extend to linking them to 64 bit programs.</p>\n\n<p>You need to launch a 32 bit JVM so the JNI interface will match the desired environment.</p>\n\n<p>However, your example might not even need JNI.  If you are launching 32-bit standalone programs, then you do not need to use JNI.  Instead you could use ProcessBuilder and pass the command line arguments to the shell to effectively ensure you launch the 32 bit executable.</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuider(String.format(\"%s\\\\SysWOW64\\\\notepad.exe\", System.getEnv(\"WINDIR\"));\nProcess process = pb.start();\n</code></pre>\n\n<p>JNI is for when you need to link the JVM to native libraries, it is not the preferred way to launch native applications.  <code>ProcessBuilder</code> is what you prefer to launch native applications.</p>\n"},{"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1478883574,"post_id":40552013,"comment_id":68343769,"body_markdown":"You could have un-installed the 64-bit version, and installed the 32-bit JRE version for similar results with an easier to support solution.","body":"You could have un-installed the 64-bit version, and installed the 32-bit JRE version for similar results with an easier to support solution."},{"owner":{"display_name":"user6828073"},"score":0,"creation_date":1478885309,"post_id":40552013,"comment_id":68344652,"body_markdown":"Now i want know, if today 32 bit version of JVM is present on great part of pcs ( with 32 or 64 bit system installed ). Or on  64 bit system usually is JVM 64 bit?","body":"Now i want know, if today 32 bit version of JVM is present on great part of pcs ( with 32 or 64 bit system installed ). Or on  64 bit system usually is JVM 64 bit?"},{"owner":{"account_id":1975576,"reputation":20799,"user_id":1773434,"accept_rate":100,"display_name":"Govind Parmar"},"score":1,"creation_date":1479246881,"post_id":40552013,"comment_id":68475002,"body_markdown":"@Saulo sorry for the late answer but you really shouldn&#39;t make decisions based on what you *expect* to find on someone&#39;s computer; you should find out what they have installed and then perform the appropriate actions for each use case","body":"@Saulo sorry for the late answer but you really shouldn&#39;t make decisions based on what you <i>expect</i> to find on someone&#39;s computer; you should find out what they have installed and then perform the appropriate actions for each use case"}],"tags":[],"owner":{"account_id":1975576,"reputation":20799,"user_id":1773434,"accept_rate":100,"display_name":"Govind Parmar"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089152,"creation_date":1478880879,"answer_id":40552013,"question_id":40551661,"body_markdown":"This may not be appropriate for your set-up depending on what your needs are, but at my company we had this problem when we moved to a 64-bit operating system for our terminal server and we had an in-house Java application that required the 32-bit version of Java to run properly.\r\n\r\nMy solution was to go into the 64-bit java directory, rename `java.exe` and `javaw.exe` to `java.exe.bak` and `javaw.exe.bak`, respectively, then replace those files with stubs that launched the 32-bit version of Java instead.  This was acceptable in our case since we only have one application that uses Java and we did not foresee ourselves writing any more applications in Java going forward:\r\n\r\n\t\r\n\t// Stub file that launches the 32-bit java.exe\r\n\t// Intended to replace the 64-bit java executable to ensure that (OUR APPLICATION) which only works with 32-bit java works correctly\r\n\t// Author: Govind Parmar\r\n\r\n\t#include &lt;Windows.h&gt;\r\n\t#include &lt;strsafe.h&gt;\r\n\r\n\tHRESULT cat_argv(int argc, WCHAR *argv[], WCHAR *argstr, int cchargstr)\r\n\t{\r\n\t\tint i;\r\n\t\tHRESULT hr;\r\n\t\tZeroMemory(argstr, sizeof(WCHAR) * cchargstr);\r\n\r\n\t\t// first arg is program name; start with i=1 instead of 0\r\n\t\tfor (i = 1; i &lt; argc; i++)\r\n\t\t{\r\n            // Space out arguments\r\n\t\t\thr = StringCchCatW(argstr, cchargstr, L&quot; &quot;);\r\n\t\t\tif (FAILED(hr)) break;\r\n\t\t\t\r\n\t\t\thr = StringCchCatW(argstr, cchargstr, argv[i]);\r\n\t\t\tif (FAILED(hr)) break;\r\n\r\n\t\t}\r\n\t\treturn hr;\r\n\t}\r\n\r\n\tint wmain(int argc, WCHAR *argv[])\r\n\t{\r\n\t\tSTARTUPINFO si;\r\n\t\tPROCESS_INFORMATION pi;\r\n\t\tWCHAR args[8192];\r\n\t\tDWORD dwExit;\r\n\t\tZeroMemory(&amp;si, sizeof(STARTUPINFO));\r\n\t\tZeroMemory(&amp;pi, sizeof(PROCESS_INFORMATION));\r\n\r\n\t\tsi.cb = sizeof(STARTUPINFO);\r\n\t\tif (FAILED(cat_argv(argc, argv, args, 8192)))\r\n\t\t{\r\n\t\t\t_putws(L&quot;Could not concatenate argument string!&quot;);\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tCreateProcess(L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\java.exe&quot;, args, NULL, NULL, FALSE, CREATE_UNICODE_ENVIRONMENT, NULL, L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\&quot;, &amp;si, &amp;pi);\r\n\r\n\t\tWaitForSingleObject(pi.hProcess, INFINITE);\r\n\t\tGetExitCodeProcess(pi.hProcess, &amp;dwExit);\r\n\t\tCloseHandle(pi.hProcess);\r\n\t\tCloseHandle(pi.hThread);\r\n\r\n\t\treturn dwExit;\r\n\t}","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>This may not be appropriate for your set-up depending on what your needs are, but at my company we had this problem when we moved to a 64-bit operating system for our terminal server and we had an in-house Java application that required the 32-bit version of Java to run properly.</p>\n<p>My solution was to go into the 64-bit java directory, rename <code>java.exe</code> and <code>javaw.exe</code> to <code>java.exe.bak</code> and <code>javaw.exe.bak</code>, respectively, then replace those files with stubs that launched the 32-bit version of Java instead.  This was acceptable in our case since we only have one application that uses Java and we did not foresee ourselves writing any more applications in Java going forward:</p>\n<pre><code>// Stub file that launches the 32-bit java.exe\n// Intended to replace the 64-bit java executable to ensure that (OUR APPLICATION) which only works with 32-bit java works correctly\n// Author: Govind Parmar\n\n#include &lt;Windows.h&gt;\n#include &lt;strsafe.h&gt;\n\nHRESULT cat_argv(int argc, WCHAR *argv[], WCHAR *argstr, int cchargstr)\n{\n    int i;\n    HRESULT hr;\n    ZeroMemory(argstr, sizeof(WCHAR) * cchargstr);\n\n    // first arg is program name; start with i=1 instead of 0\n    for (i = 1; i &lt; argc; i++)\n    {\n        // Space out arguments\n        hr = StringCchCatW(argstr, cchargstr, L&quot; &quot;);\n        if (FAILED(hr)) break;\n        \n        hr = StringCchCatW(argstr, cchargstr, argv[i]);\n        if (FAILED(hr)) break;\n\n    }\n    return hr;\n}\n\nint wmain(int argc, WCHAR *argv[])\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    WCHAR args[8192];\n    DWORD dwExit;\n    ZeroMemory(&amp;si, sizeof(STARTUPINFO));\n    ZeroMemory(&amp;pi, sizeof(PROCESS_INFORMATION));\n\n    si.cb = sizeof(STARTUPINFO);\n    if (FAILED(cat_argv(argc, argv, args, 8192)))\n    {\n        _putws(L&quot;Could not concatenate argument string!&quot;);\n        return 0;\n    }\n\n    CreateProcess(L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\java.exe&quot;, args, NULL, NULL, FALSE, CREATE_UNICODE_ENVIRONMENT, NULL, L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\&quot;, &amp;si, &amp;pi);\n\n    WaitForSingleObject(pi.hProcess, INFINITE);\n    GetExitCodeProcess(pi.hProcess, &amp;dwExit);\n    CloseHandle(pi.hProcess);\n    CloseHandle(pi.hThread);\n\n    return dwExit;\n}\n</code></pre>\n"}],"owner":{"display_name":"user6828073"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1275,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689089152,"creation_date":1478879795,"question_id":40551661,"body_markdown":"I have a application that uses `JNA` for execute any other application using `CreateProcess` api. This works very fine, but when i need execute a 32 bit version of a system native app, is executing 64 bit version ( present on SysWOW64 folder ), for example: notepad.exe 64 bit.\r\n\r\nSo, exist some way for solve this troube? \r\n\r\nI had tried use `Wow64DisableWow64FsRedirection` but seem don&#39;t is working.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nMy code:\r\n\r\n***Execute class:***\r\n\r\n    import com.sun.jna.Native;\r\n    import com.sun.jna.Pointer;\r\n    import com.sun.jna.Structure;\r\n    import com.sun.jna.WString;\r\n    import static com.sun.jna.platform.win32.WinBase.STARTF_USESHOWWINDOW;\r\n    import static com.sun.jna.platform.win32.WinUser.SW_HIDE;\r\n    import com.sun.jna.win32.StdCallLibrary;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class Execute {\r\n        \r\n        public interface Kernel32 extends StdCallLibrary {\r\n        Kernel32 INSTANCE = (Kernel32) Native.loadLibrary(&quot;kernel32&quot;, Kernel32.class);\r\n    \r\n        boolean CreateProcessA(\r\n                 String lpApplicationName\r\n                , String lpCommandLine\r\n                , Structure lpProcessAttributes\r\n                , Structure lpThreadAttributes\r\n                , boolean bInheritHandles\r\n                , int dwCreationFlags\r\n                , Structure lpEnvironment\r\n                , String lpCurrentDirectory\r\n                , Structure lpStartupInfo\r\n                , Structure lpProcessInformation);\r\n    }\r\n        \r\n    public static class ProcessInformation extends Structure {\r\n        public Pointer hProcess;\r\n        public Pointer hThread;\r\n        public int dwProcessId;\r\n        public int dwThreadId;\r\n    \r\n          @Override\r\n          protected List getFieldOrder() {\r\n          return Arrays.asList(new String[] { &quot;hProcess&quot;, &quot;hThread&quot;, &quot;dwProcessId&quot;, &quot;dwThreadId&quot; });\r\n      }\r\n        }\r\n    \r\n    public static class StartupInfoA extends Structure {\r\n        public int cb;\r\n        public WString lpReserved;\r\n        public WString lpDesktop;\r\n        public WString lpTitle;\r\n        public int dwX;\r\n        public int dwY;\r\n        public int dwXSize;\r\n        public int dwYSize;\r\n        public int dwXCountChars;\r\n        public int dwYCountChars;\r\n        public int dwFillAttribute;\r\n        public int dwFlags;\r\n        public short wShowWindow;\r\n        public short cbReserved2;\r\n        public Pointer lpReserved2;\r\n        public Pointer hStdInput;\r\n        public Pointer hStdOutput;\r\n        public Pointer hStdError;\r\n    \r\n            @Override\r\n            protected List getFieldOrder() {\r\n            return Arrays.asList(new String[] { &quot;cb&quot;, &quot;lpReserved&quot;, &quot;lpDesktop&quot;, &quot;lpTitle&quot;, &quot;dwX&quot;, &quot;dwY&quot;, &quot;dwXSize&quot;, &quot;dwYSize&quot;, &quot;dwXCountChars&quot;, &quot;dwYCountChars&quot;, &quot;dwFillAttribute&quot;, &quot;dwFlags&quot;, &quot;wShowWindow&quot;, &quot;cbReserved2&quot;, &quot;lpReserved2&quot;, &quot;hStdInput&quot;, &quot;hStdOutput&quot;, &quot;hStdError&quot; });\r\n      }\r\n        }\r\n    \r\n    public static void ExecuteProc(String software){\r\n        \r\n            ProcessInformation processInformation = new ProcessInformation();\r\n            StartupInfoA startupInfo = new StartupInfoA(); \r\n            startupInfo.dwFlags = STARTF_USESHOWWINDOW;\r\n            startupInfo.wShowWindow = SW_HIDE;\r\n    \r\n            Kernel32.INSTANCE.CreateProcessA(software, null\r\n                    , null\r\n                    , null\r\n                    , true\r\n                    , 0\r\n                    , null\r\n                    , &quot;C:\\\\Windows\\\\System32\\\\&quot;\r\n                    , startupInfo\r\n                    , processInformation);\r\n        }\r\n        \r\n    }\r\n\r\n***Main:***\r\n\r\n    public static native boolean Wow64DisableWow64FsRedirection(PointerByReference OldValue);\r\n    \r\n    public static void Exec() {\r\n            \r\n           PointerByReference lpBuffer = new PointerByReference();\r\n            \r\n           Wow64DisableWow64FsRedirection(lpBuffer); // fails here\r\n    \r\n           String sysdir = System.getenv(&quot;WINDIR&quot;) + &quot;\\\\System32\\\\&quot;;\r\n           ExecuteProc(sysdir + &quot;notepad.exe&quot;);\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eXsD1.jpg","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>I have a application that uses <code>JNA</code> for execute any other application using <code>CreateProcess</code> api. This works very fine, but when i need execute a 32 bit version of a system native app, is executing 64 bit version ( present on SysWOW64 folder ), for example: notepad.exe 64 bit.</p>\n\n<p>So, exist some way for solve this troube? </p>\n\n<p>I had tried use <code>Wow64DisableWow64FsRedirection</code> but seem don't is working.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eXsD1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eXsD1.jpg\" alt=\"enter image description here\"></a> </p>\n\n<p>My code:</p>\n\n<p><strong><em>Execute class:</em></strong></p>\n\n<pre><code>import com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Structure;\nimport com.sun.jna.WString;\nimport static com.sun.jna.platform.win32.WinBase.STARTF_USESHOWWINDOW;\nimport static com.sun.jna.platform.win32.WinUser.SW_HIDE;\nimport com.sun.jna.win32.StdCallLibrary;\nimport java.util.Arrays;\nimport java.util.List;\n\n\npublic class Execute {\n\n    public interface Kernel32 extends StdCallLibrary {\n    Kernel32 INSTANCE = (Kernel32) Native.loadLibrary(\"kernel32\", Kernel32.class);\n\n    boolean CreateProcessA(\n             String lpApplicationName\n            , String lpCommandLine\n            , Structure lpProcessAttributes\n            , Structure lpThreadAttributes\n            , boolean bInheritHandles\n            , int dwCreationFlags\n            , Structure lpEnvironment\n            , String lpCurrentDirectory\n            , Structure lpStartupInfo\n            , Structure lpProcessInformation);\n}\n\npublic static class ProcessInformation extends Structure {\n    public Pointer hProcess;\n    public Pointer hThread;\n    public int dwProcessId;\n    public int dwThreadId;\n\n      @Override\n      protected List getFieldOrder() {\n      return Arrays.asList(new String[] { \"hProcess\", \"hThread\", \"dwProcessId\", \"dwThreadId\" });\n  }\n    }\n\npublic static class StartupInfoA extends Structure {\n    public int cb;\n    public WString lpReserved;\n    public WString lpDesktop;\n    public WString lpTitle;\n    public int dwX;\n    public int dwY;\n    public int dwXSize;\n    public int dwYSize;\n    public int dwXCountChars;\n    public int dwYCountChars;\n    public int dwFillAttribute;\n    public int dwFlags;\n    public short wShowWindow;\n    public short cbReserved2;\n    public Pointer lpReserved2;\n    public Pointer hStdInput;\n    public Pointer hStdOutput;\n    public Pointer hStdError;\n\n        @Override\n        protected List getFieldOrder() {\n        return Arrays.asList(new String[] { \"cb\", \"lpReserved\", \"lpDesktop\", \"lpTitle\", \"dwX\", \"dwY\", \"dwXSize\", \"dwYSize\", \"dwXCountChars\", \"dwYCountChars\", \"dwFillAttribute\", \"dwFlags\", \"wShowWindow\", \"cbReserved2\", \"lpReserved2\", \"hStdInput\", \"hStdOutput\", \"hStdError\" });\n  }\n    }\n\npublic static void ExecuteProc(String software){\n\n        ProcessInformation processInformation = new ProcessInformation();\n        StartupInfoA startupInfo = new StartupInfoA(); \n        startupInfo.dwFlags = STARTF_USESHOWWINDOW;\n        startupInfo.wShowWindow = SW_HIDE;\n\n        Kernel32.INSTANCE.CreateProcessA(software, null\n                , null\n                , null\n                , true\n                , 0\n                , null\n                , \"C:\\\\Windows\\\\System32\\\\\"\n                , startupInfo\n                , processInformation);\n    }\n\n}\n</code></pre>\n\n<p><strong><em>Main:</em></strong></p>\n\n<pre><code>public static native boolean Wow64DisableWow64FsRedirection(PointerByReference OldValue);\n\npublic static void Exec() {\n\n       PointerByReference lpBuffer = new PointerByReference();\n\n       Wow64DisableWow64FsRedirection(lpBuffer); // fails here\n\n       String sysdir = System.getenv(\"WINDIR\") + \"\\\\System32\\\\\";\n       ExecuteProc(sysdir + \"notepad.exe\");\n\n}\n</code></pre>\n"},{"tags":["java","file","upload","mime-types","content-type"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1557215225,"post_id":56017774,"comment_id":98679544,"body_markdown":"Have a look at Apache Tika : http://tika.apache.org/","body":"Have a look at Apache Tika : <a href=\"http://tika.apache.org/\" rel=\"nofollow noreferrer\">tika.apache.org</a>"},{"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"score":0,"creation_date":1557215254,"post_id":56017774,"comment_id":98679566,"body_markdown":"apache tika not works with multipart file","body":"apache tika not works with multipart file"}],"answers":[{"tags":[],"owner":{"account_id":19566903,"reputation":90,"user_id":14318842,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666685137,"creation_date":1666685137,"answer_id":74190884,"question_id":56017774,"body_markdown":"it can be used to obtain file extension.\r\n//It will return extension like these png,jpp,jpeg, etc.\r\nString fileExtension = FilenameUtils.getExtension(multipartFile.getOriginalFilename());","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>it can be used to obtain file extension.\n//It will return extension like these png,jpp,jpeg, etc.\nString fileExtension = FilenameUtils.getExtension(multipartFile.getOriginalFilename());</p>\n"},{"tags":[],"owner":{"account_id":15511867,"reputation":111,"user_id":11190435,"display_name":"Cihat &#214;zdenoğlu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689088573,"creation_date":1689088573,"answer_id":76663463,"question_id":56017774,"body_markdown":"Yes, both solution you shared not worked for me too. (getContentType..)\r\nIn my search I found this [this][1] sharing.\r\n\r\nThis solution is using Apache tika in validation and works with MultipartFile!\r\n\r\nUtils method;\r\n\r\n    public class FileUtils {\r\n        public static String getRealMimeType(MultipartFile file) {\r\n            AutoDetectParser parser = new AutoDetectParser();\r\n            Detector detector = parser.getDetector();\r\n            try {\r\n                Metadata metadata = new Metadata();\r\n                TikaInputStream stream = TikaInputStream.get(file.getInputStream());\r\n                MediaType mediaType = detector.detect(stream, metadata);\r\n                return mediaType.toString();\r\n            } catch (IOException e) {\r\n                return MimeTypes.OCTET_STREAM;\r\n            }\r\n        }\r\n    }\r\n\r\nController method;\r\n\r\n    @PostMapping(path = &quot;/check-real-type&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public ResponseEntity&lt;Response&gt; checkRealType(@RequestPart MultipartFile file) {\r\n        String mimeType = FileUtils.getRealMimeType(file);\r\n        return ResponseEntity.ok(new Response(mimeType));\r\n    }\r\n\r\nDependency in pom.xml;\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tika-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://chidokun.github.io/2021/10/mime-type-and-upload-file-problem/en/","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>Yes, both solution you shared not worked for me too. (getContentType..)\nIn my search I found this <a href=\"https://chidokun.github.io/2021/10/mime-type-and-upload-file-problem/en/\" rel=\"nofollow noreferrer\">this</a> sharing.</p>\n<p>This solution is using Apache tika in validation and works with MultipartFile!</p>\n<p>Utils method;</p>\n<pre><code>public class FileUtils {\n    public static String getRealMimeType(MultipartFile file) {\n        AutoDetectParser parser = new AutoDetectParser();\n        Detector detector = parser.getDetector();\n        try {\n            Metadata metadata = new Metadata();\n            TikaInputStream stream = TikaInputStream.get(file.getInputStream());\n            MediaType mediaType = detector.detect(stream, metadata);\n            return mediaType.toString();\n        } catch (IOException e) {\n            return MimeTypes.OCTET_STREAM;\n        }\n    }\n}\n</code></pre>\n<p>Controller method;</p>\n<pre><code>@PostMapping(path = &quot;/check-real-type&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;Response&gt; checkRealType(@RequestPart MultipartFile file) {\n    String mimeType = FileUtils.getRealMimeType(file);\n    return ResponseEntity.ok(new Response(mimeType));\n}\n</code></pre>\n<p>Dependency in pom.xml;</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n    &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\n    &lt;version&gt;2.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4001,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689088573,"creation_date":1557214907,"question_id":56017774,"body_markdown":"Java file upload\r\n getcontentType\r\n  mimetype\r\n\r\n always gives extension based on the extension passed\r\n How to check if some one passing javascript file with extension changed as pdf.\r\n \r\n\r\n  \r\n\r\n    1.  MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\r\n                doc.setMimeType(mimeTypesMap.getContentType(file.getOriginalFilename()));\r\n    \r\n    2. file.getContentType()\r\n\r\n// works based on extension\r\n\r\n\r\n\r\n","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>Java file upload\n getcontentType\n  mimetype</p>\n\n<p>always gives extension based on the extension passed\n How to check if some one passing javascript file with extension changed as pdf.</p>\n\n<pre><code>1.  MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\n            doc.setMimeType(mimeTypesMap.getContentType(file.getOriginalFilename()));\n\n2. file.getContentType()\n</code></pre>\n\n<p>// works based on extension</p>\n"},{"tags":["java","spring","spring-boot","scheduled-tasks","scheduler"],"comments":[{"owner":{"account_id":4790390,"reputation":1022,"user_id":3869736,"display_name":"Akhil S Kamath"},"score":0,"creation_date":1538633354,"post_id":52637910,"comment_id":92212493,"body_markdown":"can you try using repeatable annotations in java 8, hit this link for docs https://docs.oracle.com/javase/tutorial/java/annotations/repeating.html","body":"can you try using repeatable annotations in java 8, hit this link for docs <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/annotations/repeating.h&zwnj;&#8203;tml</a>"}],"answers":[{"comments":[{"owner":{"account_id":2882635,"reputation":71,"user_id":2473147,"display_name":"rrc"},"score":0,"creation_date":1538618667,"post_id":52637942,"comment_id":92208818,"body_markdown":"Using this, I can run a task at 2AM in CET. But I want to run at 2AM in all timezones. Like 2AM EST, 2AM CST, 2AM MST and 2AM PST.","body":"Using this, I can run a task at 2AM in CET. But I want to run at 2AM in all timezones. Like 2AM EST, 2AM CST, 2AM MST and 2AM PST."}],"tags":[],"owner":{"account_id":8873402,"reputation":1052,"user_id":6626461,"display_name":"heyitsvajid"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1538618444,"creation_date":1538618444,"answer_id":52637942,"question_id":52637910,"body_markdown":"Use zone property with annotation @Scheduled, (version 4.0 addition)\r\nSee Example below\r\n\r\n    @Scheduled(cron = &quot;0 10 19 * * FRI&quot;, zone = &quot;CET&quot;) ","title":"Spring @Scheduled task in multiple timezones","body":"<p>Use zone property with annotation @Scheduled, (version 4.0 addition)\nSee Example below</p>\n\n<pre><code>@Scheduled(cron = \"0 10 19 * * FRI\", zone = \"CET\") \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4790390,"reputation":1022,"user_id":3869736,"display_name":"Akhil S Kamath"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1538634934,"creation_date":1538634594,"answer_id":52640406,"question_id":52637910,"body_markdown":"Can you try this approach ?\r\nAs per java 8 [repeatable annotations][1] docs it should work,@Repeatable is already included in @Scheduled, so no need to declare @scheduled again with @Repeatable annotation\r\n \r\n\r\n&gt; org.springframework.scheduling.annotation.Scheduled\r\n&gt; \r\n&gt; @Repeatable(value=Schedules.class)\r\n @Target(value={ANNOTATION_TYPE,\r\n&gt; METHOD}) \r\n@Retention(value=RUNTIME) @Documented\r\n\r\n \r\n\r\n       @Scheduled(cron = &quot;0 1 1,13 * * ?&quot;, zone = &quot;CST&quot;)\r\n        @Scheduled(cron = &quot;0 1 1,15 * * ?&quot;, zone = &quot;SGT&quot;)\r\n        public void doScheduledWork() {\r\n            //complete scheduled work\r\n        }\r\n    .\r\n    .\r\n    .\r\n\r\nrelated docs/links : https://stackoverflow.com/questions/35951519/java-8-repeatable-custom-annotations\r\nhttps://www.javatpoint.com/java-8-type-annotations-and-repeating-annotations\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/annotations/repeating.html","title":"Spring @Scheduled task in multiple timezones","body":"<p>Can you try this approach ?\nAs per java 8 <a href=\"http://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\" rel=\"nofollow noreferrer\">repeatable annotations</a> docs it should work,@Repeatable is already included in @Scheduled, so no need to declare @scheduled again with @Repeatable annotation</p>\n\n<blockquote>\n  <p>org.springframework.scheduling.annotation.Scheduled</p>\n  \n  <p>@Repeatable(value=Schedules.class)\n   @Target(value={ANNOTATION_TYPE,\n  METHOD}) \n  @Retention(value=RUNTIME) @Documented</p>\n</blockquote>\n\n<pre><code>   @Scheduled(cron = \"0 1 1,13 * * ?\", zone = \"CST\")\n    @Scheduled(cron = \"0 1 1,15 * * ?\", zone = \"SGT\")\n    public void doScheduledWork() {\n        //complete scheduled work\n    }\n.\n.\n.\n</code></pre>\n\n<p>related docs/links : <a href=\"https://stackoverflow.com/questions/35951519/java-8-repeatable-custom-annotations\">java-8 repeatable custom annotations</a>\n<a href=\"https://www.javatpoint.com/java-8-type-annotations-and-repeating-annotations\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/java-8-type-annotations-and-repeating-annotations</a></p>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538647058,"creation_date":1538647058,"answer_id":52643884,"question_id":52637910,"body_markdown":"This should do it for you.\r\n\r\n    @Slf4j\r\n    @Configuration\r\n    public class TestBean implements SmartInitializingSingleton {\r\n    \r\n      @Inject\r\n      TaskScheduler scheduler;\r\n    \r\n      @Bean\r\n      public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler te = new ThreadPoolTaskScheduler();\r\n        te.setPoolSize(4);\r\n        return te;\r\n      }\r\n    \r\n      @Override\r\n      public void afterSingletonsInstantiated() {\r\n    \r\n        Arrays.stream(new String[] {&quot;PST&quot;, &quot;MST&quot;, &quot;CST&quot;, &quot;EST&quot;})\r\n            .forEach(zone -&gt; {\r\n              scheduler.schedule(() -&gt; {\r\n                log.info(&quot;Zone trigged: {}&quot;, zone);\r\n              }, new CronTrigger(&quot;0 0 2 * * *&quot;, TimeZone.getTimeZone(zone)));\r\n            });\r\n      }\r\n    }\r\n\r\nYou may want to separate out the different concerns of creating the scheduler bean and the task execution. Also, take care to choose a suitable scheduler that has the parallelism you need in the event that a job runs over into the trigger time of the next job.","title":"Spring @Scheduled task in multiple timezones","body":"<p>This should do it for you.</p>\n\n<pre><code>@Slf4j\n@Configuration\npublic class TestBean implements SmartInitializingSingleton {\n\n  @Inject\n  TaskScheduler scheduler;\n\n  @Bean\n  public TaskScheduler taskScheduler() {\n    ThreadPoolTaskScheduler te = new ThreadPoolTaskScheduler();\n    te.setPoolSize(4);\n    return te;\n  }\n\n  @Override\n  public void afterSingletonsInstantiated() {\n\n    Arrays.stream(new String[] {\"PST\", \"MST\", \"CST\", \"EST\"})\n        .forEach(zone -&gt; {\n          scheduler.schedule(() -&gt; {\n            log.info(\"Zone trigged: {}\", zone);\n          }, new CronTrigger(\"0 0 2 * * *\", TimeZone.getTimeZone(zone)));\n        });\n  }\n}\n</code></pre>\n\n<p>You may want to separate out the different concerns of creating the scheduler bean and the task execution. Also, take care to choose a suitable scheduler that has the parallelism you need in the event that a job runs over into the trigger time of the next job.</p>\n"},{"tags":[],"owner":{"account_id":7751772,"reputation":41,"user_id":5867461,"display_name":"atlas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633401729,"creation_date":1633401729,"answer_id":69444350,"question_id":52637910,"body_markdown":"a stupid but work solution would be put the content of the logic in another function\r\nand call the schedule in 2 different function with different schedule setting\r\n\r\n```\r\n@Scheduled(cron = &quot;0 10 19 * * FRI&quot;, zone = &quot;CET&quot;) \r\npublic void scheduleCetTask() {\r\n    // code to get parameters\r\n    commonTask(parameters);\r\n}\r\n\r\n@Scheduled(cron = &quot;0 10 19 * * FRI&quot;, zone = &quot;ABC&quot;) \r\npublic void scheduleAbcTask() {\r\n    // code to get parameters\r\n    commonTask(parameters);\r\n}\r\n\r\npublic void commonTask(parameters) {\r\n}\r\n```","title":"Spring @Scheduled task in multiple timezones","body":"<p>a stupid but work solution would be put the content of the logic in another function\nand call the schedule in 2 different function with different schedule setting</p>\n<pre><code>@Scheduled(cron = &quot;0 10 19 * * FRI&quot;, zone = &quot;CET&quot;) \npublic void scheduleCetTask() {\n    // code to get parameters\n    commonTask(parameters);\n}\n\n@Scheduled(cron = &quot;0 10 19 * * FRI&quot;, zone = &quot;ABC&quot;) \npublic void scheduleAbcTask() {\n    // code to get parameters\n    commonTask(parameters);\n}\n\npublic void commonTask(parameters) {\n}\n</code></pre>\n"}],"owner":{"account_id":2882635,"reputation":71,"user_id":2473147,"display_name":"rrc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6500,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1689087785,"creation_date":1538618085,"question_id":52637910,"body_markdown":"I have a client that operates across the US (in all time zones). I need to run a task at 2AM in each time zone. This task needs time zone as input to fetch records only related that zone.\r\n\r\n@Scheduled annotation has `timezone` value, that works of one&#160;timezone at a time. \r\n\r\nI do not want to duplicate the code by having 4 separate tasks for each zone.\r\n\r\n","title":"Spring @Scheduled task in multiple timezones","body":"<p>I have a client that operates across the US (in all time zones). I need to run a task at 2AM in each time zone. This task needs time zone as input to fetch records only related that zone.</p>\n\n<p>@Scheduled annotation has <code>timezone</code> value, that works of one timezone at a time. </p>\n\n<p>I do not want to duplicate the code by having 4 separate tasks for each zone.</p>\n"},{"tags":["java","sorting","filter","java-stream"],"answers":[{"tags":[],"owner":{"account_id":136796,"reputation":14752,"user_id":340556,"accept_rate":88,"display_name":"Cephalopod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656567772,"creation_date":1561370133,"answer_id":56734083,"question_id":56734010,"body_markdown":"*If your predicates are stateless* and do not modify the objects they test, then they are [selections in terms of relational algebra](https://en.wikipedia.org/wiki/Selection_(relational_algebra)). As such, their ordering does not matter for the end result.\r\n\r\nHowever, there might be differences in performance. It is generally advisable to apply fast and highly selective predicates first. Sorting will also be faster after filtering.\r\n\r\nOn the other hand, depending on what you are doing these benefits might be negligible. In such cases you should go for the order that makes you code the easiest to understand and maintain.","title":"Does the order of applying comparators and predicates matter?","body":"<p><em>If your predicates are stateless</em> and do not modify the objects they test, then they are <a href=\"https://en.wikipedia.org/wiki/Selection_(relational_algebra)\" rel=\"nofollow noreferrer\">selections in terms of relational algebra</a>. As such, their ordering does not matter for the end result.</p>\n<p>However, there might be differences in performance. It is generally advisable to apply fast and highly selective predicates first. Sorting will also be faster after filtering.</p>\n<p>On the other hand, depending on what you are doing these benefits might be negligible. In such cases you should go for the order that makes you code the easiest to understand and maintain.</p>\n"},{"tags":[],"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561370593,"creation_date":1561370261,"answer_id":56734126,"question_id":56734010,"body_markdown":"1. Filtering goes before sorting.\r\n2. The order of comparators matters. Look at `Comparator#thenComparing` to compound comparators in the order specified by the user.\r\n3. The order of predicates doesn&#39;t matter (unless they are stateful or dependent on others, which has to be avoided). Look at `Predicate#and` to compound predicates in any order.","title":"Does the order of applying comparators and predicates matter?","body":"<ol>\n<li>Filtering goes before sorting.</li>\n<li>The order of comparators matters. Look at <code>Comparator#thenComparing</code> to compound comparators in the order specified by the user.</li>\n<li>The order of predicates doesn't matter (unless they are stateful or dependent on others, which has to be avoided). Look at <code>Predicate#and</code> to compound predicates in any order.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":7560690,"reputation":158,"user_id":5738409,"display_name":"kozeljko"},"score":0,"creation_date":1689238172,"post_id":76663351,"comment_id":135185930,"body_markdown":"Maybe I misunderstood your comment, but order of sort and filter operations doesn&#39;t matter in your example.","body":"Maybe I misunderstood your comment, but order of sort and filter operations doesn&#39;t matter in your example."},{"owner":{"account_id":7772811,"reputation":1533,"user_id":5881773,"accept_rate":0,"display_name":"Vipul Pandey"},"score":0,"creation_date":1689245956,"post_id":76663351,"comment_id":135187587,"body_markdown":"@kozeljko it matters in case of no MALE person above will throw exception,","body":"@kozeljko it matters in case of no MALE person above will throw exception,"}],"tags":[],"owner":{"account_id":7772811,"reputation":1533,"user_id":5881773,"accept_rate":0,"display_name":"Vipul Pandey"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689087777,"creation_date":1689087777,"answer_id":76663351,"question_id":56734010,"body_markdown":"The ordering Really matters , in case your filter executed and removed all values then we can get errors as well\r\neg\r\n\r\n    class User{\r\n      int age;\r\n      Genger gender;[MALE,FEMALE]\r\n    }\r\n\r\n    users.stream\r\n     .sorted(Comparator.comparingInt(User::getAge).reversed())\r\n     .filter(cover -&gt; MALE==(cover.getGender()))\r\n     .collect(Collectors.toList());\r\n\r\nover here though we applied sort first then filter but eventually filter will be applied then sort.","title":"Does the order of applying comparators and predicates matter?","body":"<p>The ordering Really matters , in case your filter executed and removed all values then we can get errors as well\neg</p>\n<pre><code>class User{\n  int age;\n  Genger gender;[MALE,FEMALE]\n}\n\nusers.stream\n .sorted(Comparator.comparingInt(User::getAge).reversed())\n .filter(cover -&gt; MALE==(cover.getGender()))\n .collect(Collectors.toList());\n</code></pre>\n<p>over here though we applied sort first then filter but eventually filter will be applied then sort.</p>\n"}],"owner":{"account_id":7560690,"reputation":158,"user_id":5738409,"display_name":"kozeljko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56734083,"answer_count":3,"score":3,"last_activity_date":1689087777,"creation_date":1561369831,"question_id":56734010,"body_markdown":"We have a web page, where the user can select an arbitrary number of rules for filtering and sorting a group of items. With each rule, he sets a priority for it, with which the user defines the order of how the rules should be applied.\r\n\r\nFrom this group of rules I extract Comparator (if the rule was sorting) and/or Predicates (if the user wants to filter the items) objects. I would like to use these with a stream of items, in order to filter and sort them.\r\n\r\nMy question is, does the order of applying the Comparator and Predicate objects matter? I know that the order of Comparator objects is important, but does it matter if a Predicate appears at the start or at the end?\r\n\r\nFor example:\r\n\r\n```\r\nWe have Comparator objects: comparator1, comparator2\r\nWe have Predicate objects: predicate1, predicate2\r\n\r\nIs there a difference between applying them in the following orders:\r\n\r\n- comparator1, comparator2, predicate1, predicate2\r\n- predicate1, predicate2, comparator1, comparator2\r\n- predicate1, comparator1, predicate2, comparator2\r\n- predicate2, comparator1, comparator2, predicate1\r\n\r\nNote: comparator1 always appears before comparator2. I am aware that changing their order could result in different results in terms of sorting.\r\n\r\n```\r\n\r\nNow, I think that all the above situations would result in the same output (in terms of sorting and items). This would allow me to apply all filters first and then take care of sorting. But I am not sure, so I had to ask here. ","title":"Does the order of applying comparators and predicates matter?","body":"<p>We have a web page, where the user can select an arbitrary number of rules for filtering and sorting a group of items. With each rule, he sets a priority for it, with which the user defines the order of how the rules should be applied.</p>\n\n<p>From this group of rules I extract Comparator (if the rule was sorting) and/or Predicates (if the user wants to filter the items) objects. I would like to use these with a stream of items, in order to filter and sort them.</p>\n\n<p>My question is, does the order of applying the Comparator and Predicate objects matter? I know that the order of Comparator objects is important, but does it matter if a Predicate appears at the start or at the end?</p>\n\n<p>For example:</p>\n\n<pre><code>We have Comparator objects: comparator1, comparator2\nWe have Predicate objects: predicate1, predicate2\n\nIs there a difference between applying them in the following orders:\n\n- comparator1, comparator2, predicate1, predicate2\n- predicate1, predicate2, comparator1, comparator2\n- predicate1, comparator1, predicate2, comparator2\n- predicate2, comparator1, comparator2, predicate1\n\nNote: comparator1 always appears before comparator2. I am aware that changing their order could result in different results in terms of sorting.\n\n</code></pre>\n\n<p>Now, I think that all the above situations would result in the same output (in terms of sorting and items). This would allow me to apply all filters first and then take care of sorting. But I am not sure, so I had to ask here. </p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":2213841,"reputation":51,"user_id":1955002,"display_name":"Ashish"},"score":0,"creation_date":1398325367,"post_id":23261495,"comment_id":35599276,"body_markdown":"You can switch by frame index. Identify the number of frames and provide the frame index. like driver.switchTo().frame(0)\n\nRefer [link](http://stackoverflow.com/questions/20069737/how-to-identify-and-switch-to-the-frame-in-selenium-webdriver-when-frame-does-no)","body":"You can switch by frame index. Identify the number of frames and provide the frame index. like driver.switchTo().frame(0)  Refer <a href=\"http://stackoverflow.com/questions/20069737/how-to-identify-and-switch-to-the-frame-in-selenium-webdriver-when-frame-does-no\">link</a>"}],"answers":[{"comments":[{"owner":{"account_id":4374025,"reputation":11,"user_id":3567499,"display_name":"user3567499"},"score":0,"creation_date":1398333517,"post_id":23264403,"comment_id":35604367,"body_markdown":"but when i log out and log in the id would change to some other number","body":"but when i log out and log in the id would change to some other number"},{"owner":{"account_id":4374025,"reputation":11,"user_id":3567499,"display_name":"user3567499"},"score":0,"creation_date":1398333753,"post_id":23264403,"comment_id":35604559,"body_markdown":"Zach is this how u mean to do driver.switchTo().frame(driver.findElement(By.xpath(&quot;iframe[contains(@id=pngNewCase1143241142570_IFrame,&#39;frame&#39;)]&quot;)));","body":"Zach is this how u mean to do driver.switchTo().frame(driver.findElement(By.xpath(&quot;iframe[&zwnj;&#8203;contains(@id=pngNewC&zwnj;&#8203;ase1143241142570_IFr&zwnj;&#8203;ame,&#39;frame&#39;)]&quot;)));"},{"owner":{"account_id":2091953,"reputation":986,"user_id":1861571,"display_name":"Zach"},"score":0,"creation_date":1398338924,"post_id":23264403,"comment_id":35607902,"body_markdown":"It all depends on how many iframes you are dealing with, ideally if its one that has dynamic id i&#39;d use\n  driver.switchTo().frame(driver.findElement(By.xpath(&quot;//iframe[contains(@id,&#39;IFrame&#39;)]&quot;)));\nLook for a keyword that always exist even when ID is changed i can see IFrame/frame post fixed","body":"It all depends on how many iframes you are dealing with, ideally if its one that has dynamic id i&#39;d use   driver.switchTo().frame(driver.findElement(By.xpath(&quot;//ifram&zwnj;&#8203;e[contains(@id,&#39;IFra&zwnj;&#8203;me&#39;)]&quot;))); Look for a keyword that always exist even when ID is changed i can see IFrame/frame post fixed"},{"owner":{"account_id":4374025,"reputation":11,"user_id":3567499,"display_name":"user3567499"},"score":0,"creation_date":1398346562,"post_id":23264403,"comment_id":35613663,"body_markdown":"Thank You Zach...... Zach my drop down in iframe is not working i tried many different methods but couldn&#39;t make it work but when i use the same code for my demo project it is working and my demo project is only in html","body":"Thank You Zach...... Zach my drop down in iframe is not working i tried many different methods but couldn&#39;t make it work but when i use the same code for my demo project it is working and my demo project is only in html"},{"owner":{"account_id":2091953,"reputation":986,"user_id":1861571,"display_name":"Zach"},"score":0,"creation_date":1398346998,"post_id":23264403,"comment_id":35613993,"body_markdown":"Can you provide the Markup of where is not working and how you are doing it?\nI&#39;d advice to debug step by step and see what is actually going wrong, i.e what elements are coming back negative","body":"Can you provide the Markup of where is not working and how you are doing it? I&#39;d advice to debug step by step and see what is actually going wrong, i.e what elements are coming back negative"}],"tags":[],"owner":{"account_id":2091953,"reputation":986,"user_id":1861571,"display_name":"Zach"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398330167,"creation_date":1398330167,"answer_id":23264403,"question_id":23261495,"body_markdown":"You Should Consider using Xpath with ID Contains \r\n  &quot;//iframe[contains(@id,&#39;frame&#39;)]&quot;","title":"how to handle dynamically changing iframe id using selenium webdriver","body":"<p>You Should Consider using Xpath with ID Contains \n  \"//iframe[contains(@id,'frame')]\"</p>\n"},{"tags":[],"owner":{"account_id":4650596,"reputation":31,"user_id":3767607,"display_name":"Param"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1403530818,"creation_date":1403529763,"answer_id":24367095,"question_id":23261495,"body_markdown":"If your iframe has a src attribute try to mention it in ur xpath declaration. Its working for me. Try like below \r\n\r\n    WebElement frame=driver.findElement(By.xpath(&quot;//iframe[@src=&#39;showNewClaimForm.action&#39;]&quot;);\r\n    driver.switchTo().frame(frame);","title":"how to handle dynamically changing iframe id using selenium webdriver","body":"<p>If your iframe has a src attribute try to mention it in ur xpath declaration. Its working for me. Try like below </p>\n\n<pre><code>WebElement frame=driver.findElement(By.xpath(\"//iframe[@src='showNewClaimForm.action']\");\ndriver.switchTo().frame(frame);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17795897,"reputation":11,"user_id":12923742,"display_name":"i-am-naveen-m-j"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664297676,"creation_date":1664297676,"answer_id":73871232,"question_id":23261495,"body_markdown":"\t\tint size = driver.findElements(By.tagName(&quot;iframe&quot;)).size();\r\n\t\tSystem.out.print(&quot;Total Frames --&quot;+size);\r\n\r\n\t\t\r\n\t\tfor(int i=0; i&lt;=size; i++){\r\n\t\t\tdriver.switchTo().frame(i);\r\n\t\t\tint total=driver.findElements(By.xpath(&quot;//*/th[1]/div/span/a[@id=&#39;pui_colmenu&#39;]&quot;)).size();\r\n\t\t\tSystem.out.println(total);\r\n\t\t\tdriver.switchTo().defaultContent();}","title":"how to handle dynamically changing iframe id using selenium webdriver","body":"<pre><code>    int size = driver.findElements(By.tagName(&quot;iframe&quot;)).size();\n    System.out.print(&quot;Total Frames --&quot;+size);\n\n    \n    for(int i=0; i&lt;=size; i++){\n        driver.switchTo().frame(i);\n        int total=driver.findElements(By.xpath(&quot;//*/th[1]/div/span/a[@id='pui_colmenu']&quot;)).size();\n        System.out.println(total);\n        driver.switchTo().defaultContent();}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13096471,"reputation":89,"user_id":9462260,"display_name":"Rajeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689087184,"creation_date":1689087184,"answer_id":76663265,"question_id":23261495,"body_markdown":"Fetch the dynamic iframe id into a string and then use the same id to locate the dynamic iframe. Below is for reference:\r\n\r\nString iframeId = driver.findElement(By.xpath(&quot;*//div[contains(@class,&#39;classname&quot;)).getAttribute(&quot;id&quot;);\r\n\t\t\t\r\n\t\t\tWebElement dynamicIframeId = driver.findElement(By.id(iframeId));\r\n\t\t\t\r\n\t\t\tdriver.switchTo().frame(dynamicIframeId); ","title":"how to handle dynamically changing iframe id using selenium webdriver","body":"<p>Fetch the dynamic iframe id into a string and then use the same id to locate the dynamic iframe. Below is for reference:</p>\n<p>String iframeId = driver.findElement(By.xpath(&quot;*//div[contains(@class,'classname&quot;)).getAttribute(&quot;id&quot;);</p>\n<pre><code>        WebElement dynamicIframeId = driver.findElement(By.id(iframeId));\n        \n        driver.switchTo().frame(dynamicIframeId); \n</code></pre>\n"}],"owner":{"account_id":4374025,"reputation":11,"user_id":3567499,"display_name":"user3567499"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13671,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1689087184,"creation_date":1398321233,"question_id":23261495,"body_markdown":"`iframe id=pngNewCase1143241142570_IFrame`., this id changes dynamically every time how can i handle this in **selenium webdriver java**\r\nI tried using \r\n\r\n    driver.switchTo().frame(driver.findElement(By.xpath(&quot;Xpath of Iframe which changes dynamically&quot;)));\r\n    driver.switchTo().defaultContent();\r\n\r\nbut didn&#39;t work for me\r\n\r\nalso tried \r\n\r\n    driver.switchTo().frame(driver.findElement(By.Id(&quot;pngNewCase1143241142570_IFrame&quot;)));\r\n    driver.switchTo().defaultContent();\r\n\r\ncan anyone help me please","title":"how to handle dynamically changing iframe id using selenium webdriver","body":"<p><code>iframe id=pngNewCase1143241142570_IFrame</code>., this id changes dynamically every time how can i handle this in <strong>selenium webdriver java</strong>\nI tried using </p>\n\n<pre><code>driver.switchTo().frame(driver.findElement(By.xpath(\"Xpath of Iframe which changes dynamically\")));\ndriver.switchTo().defaultContent();\n</code></pre>\n\n<p>but didn't work for me</p>\n\n<p>also tried </p>\n\n<pre><code>driver.switchTo().frame(driver.findElement(By.Id(\"pngNewCase1143241142570_IFrame\")));\ndriver.switchTo().defaultContent();\n</code></pre>\n\n<p>can anyone help me please</p>\n"},{"tags":["java","spring-boot","jpa","h2","autocreate"],"answers":[{"comments":[{"owner":{"account_id":28995318,"reputation":3,"user_id":22210125,"display_name":"Franz S"},"score":0,"creation_date":1689092431,"post_id":76663165,"comment_id":135163061,"body_markdown":"Jakarta fixed the problem, also i had to add to all columns i made that they are instertable=&quot;false&quot;, updateable=&quot;false&quot; in case anyone also has this problem, thank you very much for your answer!","body":"Jakarta fixed the problem, also i had to add to all columns i made that they are instertable=&quot;false&quot;, updateable=&quot;false&quot; in case anyone also has this problem, thank you very much for your answer!"}],"tags":[],"owner":{"account_id":19935722,"reputation":214,"user_id":14608443,"display_name":"IveGotCodeButImNotACoder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689086617,"creation_date":1689086617,"answer_id":76663165,"question_id":76662996,"body_markdown":"Think this is similar to this question here - https://stackoverflow.com/questions/76660593/how-to-fix-unsatisfieddependencyexception-error-creating-bean-with-name-employ\r\n\r\nTry using `Jakarta` instead. ","title":"Spring Boot and JPA with a H2 Database, Not a managed type Error for my entity","body":"<p>Think this is similar to this question here - <a href=\"https://stackoverflow.com/questions/76660593/how-to-fix-unsatisfieddependencyexception-error-creating-bean-with-name-employ\">How to fix UnsatisfiedDependencyException: Error creating bean with name &#39;employeeController&#39;?</a></p>\n<p>Try using <code>Jakarta</code> instead.</p>\n"}],"owner":{"account_id":28995318,"reputation":3,"user_id":22210125,"display_name":"Franz S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76663165,"answer_count":1,"score":0,"last_activity_date":1689086617,"creation_date":1689085489,"question_id":76662996,"body_markdown":"im struggling since 3 days with the following problem. Im about to do a project for my class in university using Spring Boot, JPA and the h2 database for an event-website.\r\n\r\nThe only problem now is that i cant seem to get rid of this error to be able to autocreate my tables...\r\n\r\nhere an overview of my files:\r\n\r\nNewEvent.java (its the entity)\r\n\r\n```\r\npackage com.projekt.projekt;\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n@Entity\r\n@Table(name = &quot;Event&quot;, schema=&quot;EVENT&quot;)\r\npublic class NewEvent {\r\n\r\nu/Id\r\nu/GeneratedValue(strategy = GenerationType.IDENTITY)\r\npublic Long eventID;\r\nu/Column(name = &quot;id&quot;)\r\nprivate String cid;\r\nu/Column(name = &quot;title&quot;)\r\nprivate String ctitle;\r\nu/Column(name = &quot;location&quot;)\r\nprivate String clocation;\r\nu/Column(name = &quot;email&quot;)\r\nprivate String cemail;\r\nu/Column(name = &quot;phone&quot;)\r\nprivate String cphone;\r\nu/Column(name = &quot;date&quot;)\r\nprivate String cdate;\r\nu/Column(name = &quot;time&quot;)\r\nprivate String ctime;\r\nu/Column(name = &quot;description&quot;)\r\nprivate String cdescription;\r\nu/Column(name = &quot;test&quot;)\r\nprivate String test;\r\n\r\nprivate String title;\r\nprivate String location;\r\nprivate String email;\r\nprivate String phone;\r\nprivate java.sql.Date date;\r\nprivate java.sql.Time time;\r\nprivate String description;\r\n\r\npublic Long getEventID() {\r\nreturn eventID;\r\n}\r\npublic String getTitle() {\r\nreturn title;\r\n}\r\npublic void setTitle(String title) {\r\nthis.title = title;\r\n}\r\npublic String getLocation() {\r\nreturn location;\r\n}\r\npublic void setLocation(String location) {\r\nthis.location = location;\r\n}\r\npublic String getEmail() {\r\nreturn email;\r\n}\r\npublic void setEmail(String email) {\r\nthis.email = email;\r\n}\r\npublic String getPhone() {\r\nreturn phone;\r\n}\r\npublic void setPhone(String phone) {\r\nthis.phone = phone;\r\n}\r\npublic java.sql.Date getDate() {\r\nreturn date;\r\n}\r\npublic void setDate(java.sql.Date date) {\r\nthis.date = date;\r\n}\r\npublic java.sql.Time getTime() {\r\nreturn time;\r\n}\r\npublic void setTime(java.sql.Time time) {\r\nthis.time = time;\r\n}\r\npublic String getDescription() {\r\nreturn description;\r\n}\r\npublic void setDescription(String description) {\r\nthis.description = description;\r\n}\r\n\r\n}\r\n```\r\n\r\nNewEventRepository.java (my repository):\r\n\r\n```\r\npackage com.projekt.projekt;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nu/Repository\r\npublic interface NewEventRepository extends JpaRepository&lt;NewEvent, Long&gt; {\r\n// Add custom query methods if needed\r\n}\r\n\r\nProjektApplication.java(Application File):\r\n\r\npackage com.projekt.projekt;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\r\nu/SpringBootApplication\r\nu/EnableJpaRepositories(&quot;com.projekt.*&quot;)\r\nu/ComponentScan(basePackageClasses=controller.class)\r\nu/EntityScan(&quot;com.projekt.*&quot;)\r\nu/EnableAutoConfiguration\r\nu/EnableConfigurationProperties\r\npublic class ProjektApplication {\r\npublic static void main(String[] args) {\r\nSpringApplication.run(ProjektApplication.class, args);\r\n}\r\n}\r\n```\r\n\r\nMy dependencies(pom.xml):\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n&lt;parent&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n&lt;version&gt;3.1.1&lt;/version&gt;\r\n&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;\r\n&lt;groupId&gt;com.projekt&lt;/groupId&gt;\r\n&lt;artifactId&gt;projekt&lt;/artifactId&gt;\r\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;name&gt;projekt&lt;/name&gt;\r\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n&lt;properties&gt;\r\n&lt;java.version&gt;17&lt;/java.version&gt;\r\n&lt;/properties&gt;\r\n&lt;dependencies&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n&lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- &lt;dependency&gt;\r\n&lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n&lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n&lt;version&gt;2.2.3&lt;/version&gt;\r\n&lt;/dependency&gt; --&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n&lt;version&gt;2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;build&gt;\r\n&lt;plugins&gt;\r\n&lt;plugin&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n&lt;/plugin&gt;\r\n&lt;/plugins&gt;\r\n&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd my application properties:\r\n\r\n```\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.defer-datasource-initialization=true\r\nspring.h2.console.enabled=true\r\nspring.datasource.url=jdbc:h2:file:/data/demo\r\nspring.h2.console.path=/h2-console\r\nspring.h2.console.settings.trace=false\r\nspring.h2.console.settings.web-allow-others=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.tool.hbm2ddl=DEBUG\r\nspring.jpa.properties.hibernate.show_sql=true\r\nspring.jpa.properties.hibernate.use_sql_comments=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\nnow here is my file structure:\r\n\r\n[Filestructure](https://i.stack.imgur.com/g868B.png)\r\n\r\nSpring Boot JPA not a managed type error keeps me from going on in my project\r\nyou can basically ignore the php for now since its not gonna be used and wasnt deleted since my group made it.\r\n\r\ni would be very happy if anyone could help me getting rid of this error &quot;not managed type&quot; somehow, i feel like if tried almost every tutorial and ressources i have found..\r\ni would be very happy if anyone could help me getting rid of this error &quot;not managed type&quot; somehow, i feel like if tried almost every tutorial and ressources i have found..\r\n\r\nI was trying refractoring, changing imports, setting it all up new from scratch, following tutorials, giving it new names, triple checking packages.\r\nHere is an example error message i get now:\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.projekt.projekt.NewEvent\r\n```\r\n\r\ni didnt want to put my whole message in since my complete filestructure is in there","title":"Spring Boot and JPA with a H2 Database, Not a managed type Error for my entity","body":"<p>im struggling since 3 days with the following problem. Im about to do a project for my class in university using Spring Boot, JPA and the h2 database for an event-website.</p>\n<p>The only problem now is that i cant seem to get rid of this error to be able to autocreate my tables...</p>\n<p>here an overview of my files:</p>\n<p>NewEvent.java (its the entity)</p>\n<pre><code>package com.projekt.projekt;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n@Entity\n@Table(name = &quot;Event&quot;, schema=&quot;EVENT&quot;)\npublic class NewEvent {\n\nu/Id\nu/GeneratedValue(strategy = GenerationType.IDENTITY)\npublic Long eventID;\nu/Column(name = &quot;id&quot;)\nprivate String cid;\nu/Column(name = &quot;title&quot;)\nprivate String ctitle;\nu/Column(name = &quot;location&quot;)\nprivate String clocation;\nu/Column(name = &quot;email&quot;)\nprivate String cemail;\nu/Column(name = &quot;phone&quot;)\nprivate String cphone;\nu/Column(name = &quot;date&quot;)\nprivate String cdate;\nu/Column(name = &quot;time&quot;)\nprivate String ctime;\nu/Column(name = &quot;description&quot;)\nprivate String cdescription;\nu/Column(name = &quot;test&quot;)\nprivate String test;\n\nprivate String title;\nprivate String location;\nprivate String email;\nprivate String phone;\nprivate java.sql.Date date;\nprivate java.sql.Time time;\nprivate String description;\n\npublic Long getEventID() {\nreturn eventID;\n}\npublic String getTitle() {\nreturn title;\n}\npublic void setTitle(String title) {\nthis.title = title;\n}\npublic String getLocation() {\nreturn location;\n}\npublic void setLocation(String location) {\nthis.location = location;\n}\npublic String getEmail() {\nreturn email;\n}\npublic void setEmail(String email) {\nthis.email = email;\n}\npublic String getPhone() {\nreturn phone;\n}\npublic void setPhone(String phone) {\nthis.phone = phone;\n}\npublic java.sql.Date getDate() {\nreturn date;\n}\npublic void setDate(java.sql.Date date) {\nthis.date = date;\n}\npublic java.sql.Time getTime() {\nreturn time;\n}\npublic void setTime(java.sql.Time time) {\nthis.time = time;\n}\npublic String getDescription() {\nreturn description;\n}\npublic void setDescription(String description) {\nthis.description = description;\n}\n\n}\n</code></pre>\n<p>NewEventRepository.java (my repository):</p>\n<pre><code>package com.projekt.projekt;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nu/Repository\npublic interface NewEventRepository extends JpaRepository&lt;NewEvent, Long&gt; {\n// Add custom query methods if needed\n}\n\nProjektApplication.java(Application File):\n\npackage com.projekt.projekt;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nu/SpringBootApplication\nu/EnableJpaRepositories(&quot;com.projekt.*&quot;)\nu/ComponentScan(basePackageClasses=controller.class)\nu/EntityScan(&quot;com.projekt.*&quot;)\nu/EnableAutoConfiguration\nu/EnableConfigurationProperties\npublic class ProjektApplication {\npublic static void main(String[] args) {\nSpringApplication.run(ProjektApplication.class, args);\n}\n}\n</code></pre>\n<p>My dependencies(pom.xml):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;3.1.1&lt;/version&gt;\n&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.projekt&lt;/groupId&gt;\n&lt;artifactId&gt;projekt&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;projekt&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n&lt;java.version&gt;17&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;com.h2database&lt;/groupId&gt;\n&lt;artifactId&gt;h2&lt;/artifactId&gt;\n&lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;!-- &lt;dependency&gt;\n&lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n&lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n&lt;version&gt;2.2.3&lt;/version&gt;\n&lt;/dependency&gt; --&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n&lt;plugins&gt;\n&lt;plugin&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n&lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And my application properties:</p>\n<pre><code>spring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.defer-datasource-initialization=true\nspring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:file:/data/demo\nspring.h2.console.path=/h2-console\nspring.h2.console.settings.trace=false\nspring.h2.console.settings.web-allow-others=true\nspring.jpa.hibernate.ddl-auto=update\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.tool.hbm2ddl=DEBUG\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.use_sql_comments=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>now here is my file structure:</p>\n<p><a href=\"https://i.stack.imgur.com/g868B.png\" rel=\"nofollow noreferrer\">Filestructure</a></p>\n<p>Spring Boot JPA not a managed type error keeps me from going on in my project\nyou can basically ignore the php for now since its not gonna be used and wasnt deleted since my group made it.</p>\n<p>i would be very happy if anyone could help me getting rid of this error &quot;not managed type&quot; somehow, i feel like if tried almost every tutorial and ressources i have found..\ni would be very happy if anyone could help me getting rid of this error &quot;not managed type&quot; somehow, i feel like if tried almost every tutorial and ressources i have found..</p>\n<p>I was trying refractoring, changing imports, setting it all up new from scratch, following tutorials, giving it new names, triple checking packages.\nHere is an example error message i get now:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.projekt.projekt.NewEvent\n</code></pre>\n<p>i didnt want to put my whole message in since my complete filestructure is in there</p>\n"},{"tags":["java","spring","spring-boot","datasource","spring-el"],"comments":[{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1504884123,"post_id":46118782,"comment_id":79202086,"body_markdown":"`@ConditionalOnProperty` already has a `matchIfMissing` parameter to control what happens when the property is not present. Are you trying to say that the empty string value is a synonym for not-present in your code?","body":"<code>@ConditionalOnProperty</code> already has a <code>matchIfMissing</code> parameter to control what happens when the property is not present. Are you trying to say that the empty string value is a synonym for not-present in your code?"}],"answers":[{"tags":[],"owner":{"account_id":312929,"reputation":1478,"user_id":627297,"accept_rate":50,"display_name":"alex.b"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504883344,"creation_date":1504883344,"answer_id":46119535,"question_id":46118782,"body_markdown":"You can try more generic purpose annotation which is standard for the Spring Core:\r\n```org.springframework.context.annotation.Conditional```. \r\n\r\nIn the context objects for your callback you can get all the information you need: ```org.springframework.context.annotation.Condition```\r\n\r\nAlso you can consider using Profiles.","title":"SpEL @ConditionalOnProperty string property empty or nulll","body":"<p>You can try more generic purpose annotation which is standard for the Spring Core:\n<code>org.springframework.context.annotation.Conditional</code>. </p>\n\n<p>In the context objects for your callback you can get all the information you need: <code>org.springframework.context.annotation.Condition</code></p>\n\n<p>Also you can consider using Profiles.</p>\n"},{"tags":[],"owner":{"account_id":1218217,"reputation":1308,"user_id":1185394,"accept_rate":57,"display_name":"andrii"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1659111985,"creation_date":1523475008,"answer_id":49783092,"question_id":46118782,"body_markdown":"I&#39;m having the same issue. As I undestood, you&#39;r looking for &quot;property exists and not empty&quot; condition. This condition doesn&#39;t come out of the box, therefore some coding required. Solution using `org.springframework.context.annotation.Conditional` works for me:\r\n\r\n1. Create `ConditionalOnPropertyNotEmpty` annotation and accompanied `OnPropertyNotEmptyCondition` class as follows:\r\n\r\n        // ConditionalOnPropertyNotEmpty.java\r\n\r\n        import org.springframework.context.annotation.Condition;\r\n        import org.springframework.context.annotation.ConditionContext;\r\n        import org.springframework.context.annotation.Conditional;\r\n        import org.springframework.core.type.AnnotatedTypeMetadata;\r\n        import java.lang.annotation.ElementType;\r\n        import java.lang.annotation.Retention;\r\n        import java.lang.annotation.RetentionPolicy;\r\n        import java.lang.annotation.Target;\r\n        import java.util.Map;\r\n\r\n        @Target({ ElementType.TYPE, ElementType.METHOD })\r\n        @Retention(RetentionPolicy.RUNTIME)\r\n        @Conditional(ConditionalOnPropertyNotEmpty.OnPropertyNotEmptyCondition.class)\r\n        public @interface ConditionalOnPropertyNotEmpty {\r\n            String value();\r\n\r\n            class OnPropertyNotEmptyCondition implements Condition {\r\n\r\n                @Override\r\n                public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n                    Map&lt;String, Object&gt; attrs = metadata.getAnnotationAttributes(ConditionalOnPropertyNotEmpty.class.getName());\r\n                    if (attrs == null) {\r\n                        return false;\r\n                    }\r\n                    String propertyName = (String) attrs.get(&quot;value&quot;);\r\n                    String val = context.getEnvironment().getProperty(propertyName);\r\n                    return val != null &amp;&amp; !val.trim().isEmpty();\r\n                }\r\n            }\r\n        }\r\n2. Annotate your bean with `ConditionalOnPropertyNotEmpty`, like:\r\n\r\n        @ConditionalOnPropertyNotEmpty(&quot;database.url&quot;)\r\n        @Bean\r\n        public DataSource dataSource() { ... }\r\n\r\n--\r\n\r\nAlternatively, you can either set detabase.url to false explicitly (e.g. `detabase.url: false`) or do not define `detabase.url` at all in your config. Then, `@ConditionalOnProperty(value = &quot;database.url&quot;)` will work for you as expected.","title":"SpEL @ConditionalOnProperty string property empty or nulll","body":"<p>I'm having the same issue. As I undestood, you'r looking for &quot;property exists and not empty&quot; condition. This condition doesn't come out of the box, therefore some coding required. Solution using <code>org.springframework.context.annotation.Conditional</code> works for me:</p>\n<ol>\n<li><p>Create <code>ConditionalOnPropertyNotEmpty</code> annotation and accompanied <code>OnPropertyNotEmptyCondition</code> class as follows:</p>\n<pre><code> // ConditionalOnPropertyNotEmpty.java\n\n import org.springframework.context.annotation.Condition;\n import org.springframework.context.annotation.ConditionContext;\n import org.springframework.context.annotation.Conditional;\n import org.springframework.core.type.AnnotatedTypeMetadata;\n import java.lang.annotation.ElementType;\n import java.lang.annotation.Retention;\n import java.lang.annotation.RetentionPolicy;\n import java.lang.annotation.Target;\n import java.util.Map;\n\n @Target({ ElementType.TYPE, ElementType.METHOD })\n @Retention(RetentionPolicy.RUNTIME)\n @Conditional(ConditionalOnPropertyNotEmpty.OnPropertyNotEmptyCondition.class)\n public @interface ConditionalOnPropertyNotEmpty {\n     String value();\n\n     class OnPropertyNotEmptyCondition implements Condition {\n\n         @Override\n         public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n             Map&lt;String, Object&gt; attrs = metadata.getAnnotationAttributes(ConditionalOnPropertyNotEmpty.class.getName());\n             if (attrs == null) {\n                 return false;\n             }\n             String propertyName = (String) attrs.get(&quot;value&quot;);\n             String val = context.getEnvironment().getProperty(propertyName);\n             return val != null &amp;&amp; !val.trim().isEmpty();\n         }\n     }\n }\n</code></pre>\n</li>\n<li><p>Annotate your bean with <code>ConditionalOnPropertyNotEmpty</code>, like:</p>\n<pre><code> @ConditionalOnPropertyNotEmpty(&quot;database.url&quot;)\n @Bean\n public DataSource dataSource() { ... }\n</code></pre>\n</li>\n</ol>\n<p>--</p>\n<p>Alternatively, you can either set detabase.url to false explicitly (e.g. <code>detabase.url: false</code>) or do not define <code>detabase.url</code> at all in your config. Then, <code>@ConditionalOnProperty(value = &quot;database.url&quot;)</code> will work for you as expected.</p>\n"},{"comments":[{"owner":{"account_id":2318254,"reputation":91,"user_id":2034754,"display_name":"Hong"},"score":0,"creation_date":1640920700,"post_id":56775226,"comment_id":124691730,"body_markdown":"May I know why we need generic type over there?\nT(org.springframework.util.StringUtils)","body":"May I know why we need generic type over there? T(org.springframework.util.StringUtils)"},{"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"score":2,"creation_date":1641832553,"post_id":56775226,"comment_id":124904232,"body_markdown":"@Hong the `T(..)` is to reference types and has nothing to do with generics. I assume you were thinking of `&lt;T&gt;`. Here&#39;s the SpEL reference: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions-types","body":"@Hong the <code>T(..)</code> is to reference types and has nothing to do with generics. I assume you were thinking of <code>&lt;T&gt;</code>. Here&#39;s the SpEL reference: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions-types\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>"}],"tags":[],"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1561559486,"creation_date":1561559486,"answer_id":56775226,"question_id":46118782,"body_markdown":"You could use `@ConditionalOnExpression` with a [Spring Expression Language (SpEL)][1] expression as value:\r\n\r\n```\r\n@ConditionalOnExpression(&quot;!T(org.springframework.util.StringUtils).isEmpty(&#39;${database.url:}&#39;)&quot;)\r\n@Bean\r\npublic DataSource dataSource() {\r\n    // snip\r\n}\r\n```\r\n\r\nFor better readability and reusability you could turn this into an annotation:\r\n\r\n```\r\n@Target({ ElementType.TYPE, ElementType.METHOD })\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@ConditionalOnExpression(&quot;!T(org.springframework.util.StringUtils).isEmpty(&#39;${database.url:}&#39;)&quot;)\r\npublic @interface ConditionalOnDatabaseUrl {\r\n}\r\n\r\n@ConditionalOnDatabaseUrl\r\n@Bean\r\npublic DataSource dataSource() {\r\n    // snip\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions","title":"SpEL @ConditionalOnProperty string property empty or nulll","body":"<p>You could use <code>@ConditionalOnExpression</code> with a <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions\" rel=\"noreferrer\">Spring Expression Language (SpEL)</a> expression as value:</p>\n\n<pre><code>@ConditionalOnExpression(\"!T(org.springframework.util.StringUtils).isEmpty('${database.url:}')\")\n@Bean\npublic DataSource dataSource() {\n    // snip\n}\n</code></pre>\n\n<p>For better readability and reusability you could turn this into an annotation:</p>\n\n<pre><code>@Target({ ElementType.TYPE, ElementType.METHOD })\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@ConditionalOnExpression(\"!T(org.springframework.util.StringUtils).isEmpty('${database.url:}')\")\npublic @interface ConditionalOnDatabaseUrl {\n}\n\n@ConditionalOnDatabaseUrl\n@Bean\npublic DataSource dataSource() {\n    // snip\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":181196,"reputation":4788,"user_id":415032,"accept_rate":0,"display_name":"E Ciotti"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689085896,"creation_date":1689085896,"answer_id":76663054,"question_id":46118782,"body_markdown":"The main answer above is correct, but since the `isEmpty` is deprecated, if you (likely) have [apache commons][1] loaded, you can use the `isNotEmpty` and simplify the condition\r\n\r\n\r\n\r\n    @ConditionalOnExpression(\r\n        &quot;T(org.apache.commons.lang3.StringUtils).isNotEmpty(&#39;${database.url:}&#39;)&quot;\r\n    )\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.commons/commons-lang3","title":"SpEL @ConditionalOnProperty string property empty or nulll","body":"<p>The main answer above is correct, but since the <code>isEmpty</code> is deprecated, if you (likely) have <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\">apache commons</a> loaded, you can use the <code>isNotEmpty</code> and simplify the condition</p>\n<pre><code>@ConditionalOnExpression(\n    &quot;T(org.apache.commons.lang3.StringUtils).isNotEmpty('${database.url:}')&quot;\n)\n</code></pre>\n"}],"owner":{"account_id":4573027,"reputation":183,"user_id":3712237,"accept_rate":20,"display_name":"user3712237"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28989,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":4,"score":17,"last_activity_date":1689085896,"creation_date":1504880864,"question_id":46118782,"body_markdown":"I am currently having trouble with my dataSource bean creation on condition of String property from my applications.yaml file.\r\n\r\nIdeally, I would only like to create the dataSource bean only if the url is set in my application.yaml file. Shouldn&#39;t create the bean if its not present (empty or null). I know this condition checks on boolean but is there anyway to check if the string property is empty or null?\r\n\r\nDatabaseConfig.java\r\n\r\n    @Configuration\r\n    public class DatabaseConfig {\r\n        @Value(&quot;${database.url:}&quot;)\r\n        private String databaseUrl;\r\n\r\n        @Value(&quot;${database.username:}&quot;)\r\n        private String databaseUsername;\r\n\r\n        @Value(&quot;${database.password:}&quot;)\r\n        private String databasePassword;\r\n\r\n        protected static final String DRIVER_CLASS_NAME = &quot;com.sybase.jdbc4.jdbc.SybDriver&quot;;\r\n\r\n\r\n        /**\r\n         * Configures and returns a datasource. Optional\r\n         *\r\n         * @return A datasource.\r\n         */\r\n        @ConditionalOnProperty(value = &quot;database.url&quot;)\r\n        @Bean\r\n        public DataSource dataSource() {\r\n            return DataSourceBuilder.create()\r\n                .url(testDatabaseUrl)\r\n                .username(testDatabaseUsername)\r\n                .password(testDatabasePassword)\r\n                .build();\r\n        }\r\n    }\r\n\r\n\r\napplication.yml (This field will be optional)\r\n\r\n    database:\r\n      url: http://localhost:9000","title":"SpEL @ConditionalOnProperty string property empty or nulll","body":"<p>I am currently having trouble with my dataSource bean creation on condition of String property from my applications.yaml file.</p>\n\n<p>Ideally, I would only like to create the dataSource bean only if the url is set in my application.yaml file. Shouldn't create the bean if its not present (empty or null). I know this condition checks on boolean but is there anyway to check if the string property is empty or null?</p>\n\n<p>DatabaseConfig.java</p>\n\n<pre><code>@Configuration\npublic class DatabaseConfig {\n    @Value(\"${database.url:}\")\n    private String databaseUrl;\n\n    @Value(\"${database.username:}\")\n    private String databaseUsername;\n\n    @Value(\"${database.password:}\")\n    private String databasePassword;\n\n    protected static final String DRIVER_CLASS_NAME = \"com.sybase.jdbc4.jdbc.SybDriver\";\n\n\n    /**\n     * Configures and returns a datasource. Optional\n     *\n     * @return A datasource.\n     */\n    @ConditionalOnProperty(value = \"database.url\")\n    @Bean\n    public DataSource dataSource() {\n        return DataSourceBuilder.create()\n            .url(testDatabaseUrl)\n            .username(testDatabaseUsername)\n            .password(testDatabasePassword)\n            .build();\n    }\n}\n</code></pre>\n\n<p>application.yml (This field will be optional)</p>\n\n<pre><code>database:\n  url: http://localhost:9000\n</code></pre>\n"},{"tags":["java","excel","spring","spring-boot","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1689137913,"post_id":76662993,"comment_id":135168874,"body_markdown":"What are the results of your debugging? I guess `int check` is never greater than `0`? It is obvious to me that the logic `for (int i = firstRowIdx; i &lt; lastRowIdx; i++) { XSSFCell currentCell = row.getCell(i); ...` is wrong. In this loop `i` is a row index but `row.getCell(i)` thakes it as a cell index always in the same row. Thus `currentCell` always is a cell in this same row but would need to be a cell in same `colIdx` from rows having  index `firstRowIdx` to `lastRowIdx`.","body":"What are the results of your debugging? I guess <code>int check</code> is never greater than <code>0</code>? It is obvious to me that the logic <code>for (int i = firstRowIdx; i &lt; lastRowIdx; i++) { XSSFCell currentCell = row.getCell(i); ...</code> is wrong. In this loop <code>i</code> is a row index but <code>row.getCell(i)</code> thakes it as a cell index always in the same row. Thus <code>currentCell</code> always is a cell in this same row but would need to be a cell in same <code>colIdx</code> from rows having  index <code>firstRowIdx</code> to <code>lastRowIdx</code>."}],"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689085477,"creation_date":1689085477,"question_id":76662993,"body_markdown":"In my code i need to avoid to use the formula when the values where i&#39;m applying the formula are all 0 or null\r\n\r\nthis is my code:\r\n\r\n     public void sumTotalOnColumn(int firstRowIdx, int lastRowIdx, int colIdx, XSSFCellStyle cellStyleCurrency,\r\n                                     XSSFRow row) {\r\n        XSSFCell cell;\r\n        cell = row.createCell(colIdx);\r\n        CellReference firstRef = new CellReference(firstRowIdx, colIdx);\r\n        CellReference lastRef = new CellReference(lastRowIdx - 1, colIdx);\r\n        // Check if all rows have a value of 0 before performing the sum operation\r\n        int check = 0;\r\n        for (int i = firstRowIdx; i &lt; lastRowIdx; i++) {\r\n            XSSFCell currentCell = row.getCell(i);\r\n            if (currentCell != null &amp;&amp; currentCell.getCellType() == CellType.NUMERIC &amp;&amp; currentCell.getNumericCellValue() != 0) {\r\n                check = check + 1;\r\n            }\r\n        } if(check!=0) {\r\n            cell.setCellFormula(&quot;SUM(&quot; + firstRef.formatAsString() + &quot;:&quot; + lastRef.formatAsString() + &quot;)&quot;);\r\n            cell.setCellStyle(cellStyleCurrency);\r\n        }else{\r\n            cell.setCellValue(0);\r\n            cell.setCellStyle(cellStyleCurrency);\r\n        }\r\n    }\r\n\r\n\r\nI tried to add the check but everytime it set 0 even when i got the values inside the other cell, any other way to do it, or to get the sum among the table i want in java so if is 0 i avoid the formula\r\n","title":"Handle formula on java with Apache POI","body":"<p>In my code i need to avoid to use the formula when the values where i'm applying the formula are all 0 or null</p>\n<p>this is my code:</p>\n<pre><code> public void sumTotalOnColumn(int firstRowIdx, int lastRowIdx, int colIdx, XSSFCellStyle cellStyleCurrency,\n                                 XSSFRow row) {\n    XSSFCell cell;\n    cell = row.createCell(colIdx);\n    CellReference firstRef = new CellReference(firstRowIdx, colIdx);\n    CellReference lastRef = new CellReference(lastRowIdx - 1, colIdx);\n    // Check if all rows have a value of 0 before performing the sum operation\n    int check = 0;\n    for (int i = firstRowIdx; i &lt; lastRowIdx; i++) {\n        XSSFCell currentCell = row.getCell(i);\n        if (currentCell != null &amp;&amp; currentCell.getCellType() == CellType.NUMERIC &amp;&amp; currentCell.getNumericCellValue() != 0) {\n            check = check + 1;\n        }\n    } if(check!=0) {\n        cell.setCellFormula(&quot;SUM(&quot; + firstRef.formatAsString() + &quot;:&quot; + lastRef.formatAsString() + &quot;)&quot;);\n        cell.setCellStyle(cellStyleCurrency);\n    }else{\n        cell.setCellValue(0);\n        cell.setCellStyle(cellStyleCurrency);\n    }\n}\n</code></pre>\n<p>I tried to add the check but everytime it set 0 even when i got the values inside the other cell, any other way to do it, or to get the sum among the table i want in java so if is 0 i avoid the formula</p>\n"},{"tags":["java","interface","functional-programming"],"comments":[{"owner":{"account_id":234840,"reputation":160679,"user_id":501250,"accept_rate":75,"display_name":"cdhowie"},"score":0,"creation_date":1649264390,"post_id":71770782,"comment_id":126833946,"body_markdown":"Java interfaces don&#39;t have an equivalent to Rust&#39;s `Self` type, so any implementation of this type of concept in Java would be unlikely to be anywhere near as useful.","body":"Java interfaces don&#39;t have an equivalent to Rust&#39;s <code>Self</code> type, so any implementation of this type of concept in Java would be unlikely to be anywhere near as useful."},{"owner":{"account_id":24529372,"reputation":320,"user_id":18441431,"display_name":"Rob"},"score":0,"creation_date":1649266649,"post_id":71770782,"comment_id":126834793,"body_markdown":"Can you give an example of what you need this method for?","body":"Can you give an example of what you need this method for?"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689212423,"post_id":76662976,"comment_id":135182575,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76662976/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":3928654,"reputation":11,"user_id":3248095,"display_name":"NikosPG"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689085351,"creation_date":1689085351,"answer_id":76662976,"question_id":71770782,"body_markdown":"Java does not have an equivalent for Rust’s extension traits. However, it is possible to implement an equivalent of the From trait with Java functional interfaces. You can use a functional interface with a single abstract method (SAM) as a replacement for Rust’s From trait2\r\n\r\nI hope this helps!","title":"How to implement a Java equivalent of Rust&#39;s From trait?","body":"<p>Java does not have an equivalent for Rust’s extension traits. However, it is possible to implement an equivalent of the From trait with Java functional interfaces. You can use a functional interface with a single abstract method (SAM) as a replacement for Rust’s From trait2</p>\n<p>I hope this helps!</p>\n"}],"owner":{"account_id":24850350,"reputation":21,"user_id":18727368,"display_name":"marcodeono"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689085351,"creation_date":1649264062,"question_id":71770782,"body_markdown":"Rust has a convenient method to facilitate conversion between different types: the trait [`From`][1] (and [`Into`][2]) which defines an &quot;interface&quot; to convert an element to an other.\r\n\r\n```rust\r\npub trait From&lt;T&gt; {\r\n    fn from(T) -&gt; Self;\r\n}\r\n```\r\n\r\nIs it possible to implement an equivalent of the `From` trait with Java functional interfaces?\r\n\r\n\r\n\r\n\r\n  [1]: https://doc.rust-lang.org/std/convert/trait.From.html\r\n  [2]: https://doc.rust-lang.org/std/convert/trait.Into.html","title":"How to implement a Java equivalent of Rust&#39;s From trait?","body":"<p>Rust has a convenient method to facilitate conversion between different types: the trait <a href=\"https://doc.rust-lang.org/std/convert/trait.From.html\" rel=\"nofollow noreferrer\"><code>From</code></a> (and <a href=\"https://doc.rust-lang.org/std/convert/trait.Into.html\" rel=\"nofollow noreferrer\"><code>Into</code></a>) which defines an &quot;interface&quot; to convert an element to an other.</p>\n<pre class=\"lang-rust prettyprint-override\"><code>pub trait From&lt;T&gt; {\n    fn from(T) -&gt; Self;\n}\n</code></pre>\n<p>Is it possible to implement an equivalent of the <code>From</code> trait with Java functional interfaces?</p>\n"},{"tags":["java","while-loop","infinite-loop"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":4,"creation_date":1689084280,"post_id":76662803,"comment_id":135161089,"body_markdown":"`&amp;&amp; nTries &lt; nMaxTries`","body":"<code>&amp;&amp; nTries &lt; nMaxTries</code>"},{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":3,"creation_date":1689084313,"post_id":76662803,"comment_id":135161096,"body_markdown":"it means `!success || nTries &gt;= nMaxTries` is never satisfied. w can see that success is set to true, so there is a problem with `|| nTries &gt;= nMaxTries`","body":"it means <code>!success || nTries &gt;= nMaxTries</code> is never satisfied. w can see that success is set to true, so there is a problem with <code>|| nTries &gt;= nMaxTries</code>"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":2,"creation_date":1689084462,"post_id":76662803,"comment_id":135161146,"body_markdown":"This would be a great time to learn how to use a debugger.","body":"This would be a great time to learn how to use a debugger."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689273592,"post_id":76662885,"comment_id":135194058,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76662885/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":15530034,"reputation":45,"user_id":11203818,"display_name":"NeebletWorm"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689084590,"creation_date":1689084590,"answer_id":76662885,"question_id":76662803,"body_markdown":"The error is in your while loop.\r\n\r\nYou have two conditions.\r\n\r\nThe first one being &quot;continue while success is &quot;false&quot; &quot;\r\nAnd the second being &quot;continue while nTries is equal or supperior to nMaxTries&quot;\r\n\r\nNow, if either the first or second second is a correct ( you used ||), the code inside your while instruction will be executed.\r\n\r\nWhat I suspect is that the email failed to be sent 5 times in a unknow period of time (therefore incrementing the variable nTries to 5) and leading to the loop since the second condition is always true. (nTries &gt;= nMaxTries).\r\n\r\nIn order to correct the issue, you want to do the following test :\r\n\r\n    !success &amp;&amp; nTries &lt; nMaxTries","title":"Java unknown cause for infinite loop","body":"<p>The error is in your while loop.</p>\n<p>You have two conditions.</p>\n<p>The first one being &quot;continue while success is &quot;false&quot; &quot;\nAnd the second being &quot;continue while nTries is equal or supperior to nMaxTries&quot;</p>\n<p>Now, if either the first or second second is a correct ( you used ||), the code inside your while instruction will be executed.</p>\n<p>What I suspect is that the email failed to be sent 5 times in a unknow period of time (therefore incrementing the variable nTries to 5) and leading to the loop since the second condition is always true. (nTries &gt;= nMaxTries).</p>\n<p>In order to correct the issue, you want to do the following test :</p>\n<pre><code>!success &amp;&amp; nTries &lt; nMaxTries\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689084761,"creation_date":1689084761,"answer_id":76662900,"question_id":76662803,"body_markdown":"The `while` loop is wrong. It should be like this:\r\n```\r\nwhile (!success &amp;&amp; nTries &lt; nMaxTries)\r\n```\r\nOtherwise both `nTries` and `nMaxTries` start at 0 and the `&gt;=` condition is always true no matter how many times you increment `nTries` and if the mail is sent correctly the `||` operator will still have in account the comparison between `nTries` and `nMaxTries` being true even though `!success` is false.","title":"Java unknown cause for infinite loop","body":"<p>The <code>while</code> loop is wrong. It should be like this:</p>\n<pre><code>while (!success &amp;&amp; nTries &lt; nMaxTries)\n</code></pre>\n<p>Otherwise both <code>nTries</code> and <code>nMaxTries</code> start at 0 and the <code>&gt;=</code> condition is always true no matter how many times you increment <code>nTries</code> and if the mail is sent correctly the <code>||</code> operator will still have in account the comparison between <code>nTries</code> and <code>nMaxTries</code> being true even though <code>!success</code> is false.</p>\n"},{"tags":[],"owner":{"account_id":11719774,"reputation":44,"user_id":8579083,"display_name":"Aditya Ajmera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689084818,"creation_date":1689084818,"answer_id":76662909,"question_id":76662803,"body_markdown":"Lets take a scenario, where for first 5 times, the send message failed (exception occurred), so your variable ```nTries``` is now equal to ```nMaxTries``` and now you have successfully sent the message, so ```success=true```, but you have used OR condition, so it will check for second condition ```nTries &gt;= nMaxTries``` which is true. So over all expression ```!success || nTries &gt;= nMaxTries``` becomes true. Since this condition never changes, while loop is now stuck and has become infinite loop. ","title":"Java unknown cause for infinite loop","body":"<p>Lets take a scenario, where for first 5 times, the send message failed (exception occurred), so your variable <code>nTries</code> is now equal to <code>nMaxTries</code> and now you have successfully sent the message, so <code>success=true</code>, but you have used OR condition, so it will check for second condition <code>nTries &gt;= nMaxTries</code> which is true. So over all expression <code>!success || nTries &gt;= nMaxTries</code> becomes true. Since this condition never changes, while loop is now stuck and has become infinite loop.</p>\n"},{"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689087511,"post_id":76662967,"comment_id":135161947,"body_markdown":"Also, is the `Date()` class required here?  No imports were noticed, but `java.util.Date` is outdated and using classes from the [java.time](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html) package is recommended unless backward compatibility is required.","body":"Also, is the <code>Date()</code> class required here?  No imports were noticed, but <code>java.util.Date</code> is outdated and using classes from the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> package is recommended unless backward compatibility is required."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689085308,"creation_date":1689085308,"answer_id":76662967,"question_id":76662803,"body_markdown":"As was stated, use\r\n```\r\n!success &amp;&amp; nTries &lt; nMaxTries\r\n```\r\nBut forget about testing the success boolean and just break out of the loop when the email is sent.\r\n```\r\nwhile (nTries &lt; nMaxTries) {\r\n    try {\r\n        MimeMessage msg = new MimeMessage(session);\r\n        //set message headers\r\n        msg.addHeader(&quot;Content-type&quot;, &quot;text/HTML; charset=UTF-8&quot;);\r\n        msg.addHeader(&quot;format&quot;, &quot;flowed&quot;);\r\n        msg.addHeader(&quot;Content-Transfer-Encoding&quot;, &quot;8bit&quot;);\r\n\r\n        msg.setFrom(new InternetAddress(fromEmail, from));\r\n        msg.setSubject(subject, &quot;UTF-8&quot;);\r\n        msg.setContent(body, &quot;text/html&quot;);\r\n        msg.setSentDate(new Date());\r\n        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toEmail, false));\r\n\r\n        System.out.println(&quot;Message is ready&quot;);\r\n        Transport.send(msg);\r\n\r\n        System.out.println(&quot;EMail Sent Successfully!!&quot;);\r\n        success = true;    // keep for final status\r\n        break;             // terminate the loop here.\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        nTries++;\r\n    }\r\n}","title":"Java unknown cause for infinite loop","body":"<p>As was stated, use</p>\n<pre><code>!success &amp;&amp; nTries &lt; nMaxTries\n</code></pre>\n<p>But forget about testing the success boolean and just break out of the loop when the email is sent.</p>\n<pre><code>while (nTries &lt; nMaxTries) {\n    try {\n        MimeMessage msg = new MimeMessage(session);\n        //set message headers\n        msg.addHeader(&quot;Content-type&quot;, &quot;text/HTML; charset=UTF-8&quot;);\n        msg.addHeader(&quot;format&quot;, &quot;flowed&quot;);\n        msg.addHeader(&quot;Content-Transfer-Encoding&quot;, &quot;8bit&quot;);\n\n        msg.setFrom(new InternetAddress(fromEmail, from));\n        msg.setSubject(subject, &quot;UTF-8&quot;);\n        msg.setContent(body, &quot;text/html&quot;);\n        msg.setSentDate(new Date());\n        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toEmail, false));\n\n        System.out.println(&quot;Message is ready&quot;);\n        Transport.send(msg);\n\n        System.out.println(&quot;EMail Sent Successfully!!&quot;);\n        success = true;    // keep for final status\n        break;             // terminate the loop here.\n    } catch (Exception e) {\n        e.printStackTrace();\n        nTries++;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":944901,"reputation":127,"user_id":972322,"display_name":"jllangston"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76662967,"answer_count":4,"score":-2,"last_activity_date":1689085308,"creation_date":1689084079,"question_id":76662803,"body_markdown":"I have a code result that I cannot explain in Java 11 code that sends an email.\r\n\r\nI am using the javax mail package:\r\n```\r\nimport javax.mail.Message;\r\nimport javax.mail.Session;\r\nimport javax.mail.Transport;\r\nimport javax.mail.internet.InternetAddress;\r\nimport javax.mail.internet.MimeMessage;\r\n```\r\n\r\nHere is the code:\r\n\r\n```\r\nProperties props = System.getProperties();\r\nprops.put(&quot;mail.smtp.host&quot;, smtpHost);\r\nSession session = Session.getInstance(props);\r\n\r\nint nMaxTries = 5;\r\nint nTries = 0;\r\nboolean success = false;\r\n\r\nwhile (!success || nTries &gt;= nMaxTries) {\r\n    try {\r\n        MimeMessage msg = new MimeMessage(session);\r\n        //set message headers\r\n        msg.addHeader(&quot;Content-type&quot;, &quot;text/HTML; charset=UTF-8&quot;);\r\n        msg.addHeader(&quot;format&quot;, &quot;flowed&quot;);\r\n        msg.addHeader(&quot;Content-Transfer-Encoding&quot;, &quot;8bit&quot;);\r\n\r\n        msg.setFrom(new InternetAddress(fromEmail, from));\r\n        msg.setSubject(subject, &quot;UTF-8&quot;);\r\n        msg.setContent(body, &quot;text/html&quot;);\r\n        msg.setSentDate(new Date());\r\n        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toEmail, false));\r\n\r\n        System.out.println(&quot;Message is ready&quot;);\r\n        Transport.send(msg);\r\n\r\n        System.out.println(&quot;EMail Sent Successfully!!&quot;);\r\n        success = true;\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        nTries++;\r\n    }\r\n}\r\n```\r\n\r\nI noticed that sometimes the email would fail, hence the retry. This runs using a cron process that pipes output to the logs. This has been working fine for several weeks. This morning, I received nearly 400,000 emails. I see this over and over in the logs:\r\n\r\n```\r\nMessage is ready\r\nEMail Sent Successfully!!\r\nMessage is ready\r\nEMail Sent Successfully!!\r\nMessage is ready\r\nEMail Sent Successfully!!\r\nMessage is ready\r\nEMail Sent Successfully!!\r\nMessage is ready\r\n```\r\n\r\nThis is a single threaded process. Looking at this I realize I can increment the counter in the loop vs just the catch statement so these infinite loops will stop. Can anyone explain the logic as far as how the while loop would fail to complete?\r\n\r\nThanks! ","title":"Java unknown cause for infinite loop","body":"<p>I have a code result that I cannot explain in Java 11 code that sends an email.</p>\n<p>I am using the javax mail package:</p>\n<pre><code>import javax.mail.Message;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n</code></pre>\n<p>Here is the code:</p>\n<pre><code>Properties props = System.getProperties();\nprops.put(&quot;mail.smtp.host&quot;, smtpHost);\nSession session = Session.getInstance(props);\n\nint nMaxTries = 5;\nint nTries = 0;\nboolean success = false;\n\nwhile (!success || nTries &gt;= nMaxTries) {\n    try {\n        MimeMessage msg = new MimeMessage(session);\n        //set message headers\n        msg.addHeader(&quot;Content-type&quot;, &quot;text/HTML; charset=UTF-8&quot;);\n        msg.addHeader(&quot;format&quot;, &quot;flowed&quot;);\n        msg.addHeader(&quot;Content-Transfer-Encoding&quot;, &quot;8bit&quot;);\n\n        msg.setFrom(new InternetAddress(fromEmail, from));\n        msg.setSubject(subject, &quot;UTF-8&quot;);\n        msg.setContent(body, &quot;text/html&quot;);\n        msg.setSentDate(new Date());\n        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toEmail, false));\n\n        System.out.println(&quot;Message is ready&quot;);\n        Transport.send(msg);\n\n        System.out.println(&quot;EMail Sent Successfully!!&quot;);\n        success = true;\n    } catch (Exception e) {\n        e.printStackTrace();\n        nTries++;\n    }\n}\n</code></pre>\n<p>I noticed that sometimes the email would fail, hence the retry. This runs using a cron process that pipes output to the logs. This has been working fine for several weeks. This morning, I received nearly 400,000 emails. I see this over and over in the logs:</p>\n<pre><code>Message is ready\nEMail Sent Successfully!!\nMessage is ready\nEMail Sent Successfully!!\nMessage is ready\nEMail Sent Successfully!!\nMessage is ready\nEMail Sent Successfully!!\nMessage is ready\n</code></pre>\n<p>This is a single threaded process. Looking at this I realize I can increment the counter in the loop vs just the catch statement so these infinite loops will stop. Can anyone explain the logic as far as how the while loop would fail to complete?</p>\n<p>Thanks!</p>\n"},{"tags":["java","groovy"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1689081973,"post_id":76662431,"comment_id":135160460,"body_markdown":"Groovy accesses the field directly (internally by using reflection). That&#39;s actually one of the pitfalls of Groovy that made me switch away from it: it&#39;s way too easy to accidentally access an objects internals even when you didn&#39;t mean to.","body":"Groovy accesses the field directly (internally by using reflection). That&#39;s actually one of the pitfalls of Groovy that made me switch away from it: it&#39;s way too easy to accidentally access an objects internals even when you didn&#39;t mean to."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689089618,"post_id":76662431,"comment_id":135162453,"body_markdown":"I wonder how this holds up when you use a JVM with the module system enabled. Those tend to not like reflective access to privates.","body":"I wonder how this holds up when you use a JVM with the module system enabled. Those tend to not like reflective access to privates."},{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689091221,"post_id":76662431,"comment_id":135162807,"body_markdown":"@Jorn Interesting point, it would be nice to know how it works in this case.","body":"@Jorn Interesting point, it would be nice to know how it works in this case."}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689085263,"creation_date":1689085263,"answer_id":76662958,"question_id":76662431,"body_markdown":"Groovy uses [Reflection API][1] to access fields, so there is not real &quot;privacy&quot; here. Check this [question][2], people discuss it more in details. Also check this [article][3].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/reflect/\r\n  [2]: https://stackoverflow.com/questions/40929264/how-is-groovy-able-to-access-private-methods-of-a-java-class\r\n  [3]: https://touk.pl/blog/2012/07/12/private-fields-and-methods-are-not-private-in-groovy/","title":"Groovy script and Java class without getter and setter with private fields, how does it access the fields?","body":"<p>Groovy uses <a href=\"https://docs.oracle.com/javase/tutorial/reflect/\" rel=\"nofollow noreferrer\">Reflection API</a> to access fields, so there is not real &quot;privacy&quot; here. Check this <a href=\"https://stackoverflow.com/questions/40929264/how-is-groovy-able-to-access-private-methods-of-a-java-class\">question</a>, people discuss it more in details. Also check this <a href=\"https://touk.pl/blog/2012/07/12/private-fields-and-methods-are-not-private-in-groovy/\" rel=\"nofollow noreferrer\">article</a>.</p>\n"}],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76662958,"answer_count":1,"score":1,"last_activity_date":1689085263,"creation_date":1689081735,"question_id":76662431,"body_markdown":"I have java class like\r\n\r\n```\r\nclass Test {\r\n\r\n   private String field1;\r\n}\r\n```\r\n\r\nno other methods or getter and setter.\r\n\r\nin a groovy script I have:\r\n\r\n```\r\ndef test = new Test()\r\n\r\ntest.field1 = &quot;foobar&quot;\r\n```\r\n\r\nand this works even if the field is private and no getter/setter are defined. How does it works?\r\n\r\nThe project is a java project and the groovy script is executed via `GroovyShell` so the `Test` class is compiled by java (no methods added by groovy).\r\n\r\nThanks for the help.","title":"Groovy script and Java class without getter and setter with private fields, how does it access the fields?","body":"<p>I have java class like</p>\n<pre><code>class Test {\n\n   private String field1;\n}\n</code></pre>\n<p>no other methods or getter and setter.</p>\n<p>in a groovy script I have:</p>\n<pre><code>def test = new Test()\n\ntest.field1 = &quot;foobar&quot;\n</code></pre>\n<p>and this works even if the field is private and no getter/setter are defined. How does it works?</p>\n<p>The project is a java project and the groovy script is executed via <code>GroovyShell</code> so the <code>Test</code> class is compiled by java (no methods added by groovy).</p>\n<p>Thanks for the help.</p>\n"},{"tags":["java","xml","spring","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1688994508,"post_id":76653818,"comment_id":135146000,"body_markdown":"Specify the type of the constructor. Currently it will use a `String` add `type=&quot;java.lang.Class&quot;` that way it will call `Mockito.mock(Class)` intead of `Mockito.mock(String, varargs)`.","body":"Specify the type of the constructor. Currently it will use a <code>String</code> add <code>type=&quot;java.lang.Class&quot;</code> that way it will call <code>Mockito.mock(Class)</code> intead of <code>Mockito.mock(String, varargs)</code>."}],"owner":{"account_id":12563215,"reputation":73,"user_id":9140111,"display_name":"hmmnrst"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":631,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689085153,"creation_date":1688992666,"question_id":76653818,"body_markdown":"I want to update Mockito in my Spring project, but I get some errors with Mockito 5.1.0 or later.\r\n\r\nIt seems that Mockito have added new factory methods with varargs and my XML-based configuration does not select an old method.\r\n\r\nI have two questions.\r\n\r\n1. In this case (see below for details), why does Spring select another method?\r\n2. How do I tell Spring to call the expected method which is overloaded?\r\n\r\n---\r\n\r\nHere is a sample code and config. (Full: https://github.com/hmmnrst/spring-experiments/tree/mockito-bean )\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(locations = &quot;classpath:testApplicationContext.xml&quot;)\r\npublic class MainTest {\r\n\r\n\t@Autowired\r\n\tApiClient apiClient;\r\n\r\n\t@Test\r\n\tpublic void test() {\r\n\t\tassertThat(apiClient).isNotNull();\r\n\t\tSystem.out.println(apiClient);\r\n\t}\r\n}\r\n```\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n\r\n\t&lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\r\n\t\t&lt;constructor-arg value=&quot;org.example.ApiClient&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nWhen I use Mockito 5.0.0, this test passes.\r\nWhen I use Mockito 5.1.0, this test fails with following exceptions.\r\n\r\n```txt\r\nJul 10, 2023 9:02:27 PM org.springframework.context.support.AbstractApplicationContext refresh\r\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;apiClient&#39; defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\nJul 10, 2023 9:02:27 PM org.springframework.test.context.TestContextManager prepareTestInstance\r\nSEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2de23121] to prepare test instance [org.example.MainTest@1d207fad]\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;apiClient&#39; defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:276)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:244)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\r\n\t... 73 more\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n\t... 91 more\r\nCaused by: java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.mockito.Mockito.mock(Mockito.java:1986)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1940)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 92 more\r\n```\r\n","title":"XML-based bean configuration with mockito 5.1","body":"<p>I want to update Mockito in my Spring project, but I get some errors with Mockito 5.1.0 or later.</p>\n<p>It seems that Mockito have added new factory methods with varargs and my XML-based configuration does not select an old method.</p>\n<p>I have two questions.</p>\n<ol>\n<li>In this case (see below for details), why does Spring select another method?</li>\n<li>How do I tell Spring to call the expected method which is overloaded?</li>\n</ol>\n<hr />\n<p>Here is a sample code and config. (Full: <a href=\"https://github.com/hmmnrst/spring-experiments/tree/mockito-bean\" rel=\"nofollow noreferrer\">https://github.com/hmmnrst/spring-experiments/tree/mockito-bean</a> )</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(locations = &quot;classpath:testApplicationContext.xml&quot;)\npublic class MainTest {\n\n    @Autowired\n    ApiClient apiClient;\n\n    @Test\n    public void test() {\n        assertThat(apiClient).isNotNull();\n        System.out.println(apiClient);\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n    &lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\n        &lt;constructor-arg value=&quot;org.example.ApiClient&quot; /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>When I use Mockito 5.0.0, this test passes.\nWhen I use Mockito 5.1.0, this test fails with following exceptions.</p>\n<pre><code>Jul 10, 2023 9:02:27 PM org.springframework.context.support.AbstractApplicationContext refresh\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'apiClient' defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\nJul 10, 2023 9:02:27 PM org.springframework.test.context.TestContextManager prepareTestInstance\nSEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2de23121] to prepare test instance [org.example.MainTest@1d207fad]\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\n    at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'apiClient' defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:276)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:244)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\n    ... 73 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 91 more\nCaused by: java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.mockito.Mockito.mock(Mockito.java:1986)\n    at org.mockito.Mockito.mock(Mockito.java:1940)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 92 more\n</code></pre>\n"},{"tags":["java","maven","gwt","dev-mode"],"answers":[{"comments":[{"owner":{"account_id":9282629,"reputation":33,"user_id":6893426,"display_name":"Vit Vyaz"},"score":0,"creation_date":1475068006,"post_id":39748169,"comment_id":66792940,"body_markdown":"mvn gwt:run don&#39;t work:\n[ERROR] Could not find goal &#39;run&#39; in plugin net.ltgt.gwt.maven:gwt-maven-plugin:1.0-rc-6 among available goals add-super-sources, add-test-super-sou\ns, codeserver, compile, devmode, enforce-encoding, generate-module, generate-module-metadata, help, import-sources, import-test-sources, package-app\nest -&gt; [Help 1]","body":"mvn gwt:run don&#39;t work: [ERROR] Could not find goal &#39;run&#39; in plugin net.ltgt.gwt.maven:gwt-maven-plugin:1.0-rc-6 among available goals add-super-sources, add-test-super-sou s, codeserver, compile, devmode, enforce-encoding, generate-module, generate-module-metadata, help, import-sources, import-test-sources, package-app est -&gt; [Help 1]"},{"owner":{"account_id":4468601,"reputation":7637,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1475068122,"post_id":39748169,"comment_id":66793029,"body_markdown":"@VitVyaz Yes you are right, it seems they have an error in their site. I am looking at it and I will update my answer if I find a solution. Sorry for the inconvenience.","body":"@VitVyaz Yes you are right, it seems they have an error in their site. I am looking at it and I will update my answer if I find a solution. Sorry for the inconvenience."},{"owner":{"account_id":4468601,"reputation":7637,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1475068706,"post_id":39748169,"comment_id":66793485,"body_markdown":"@VitVyaz I think I found it, please check my updated answer","body":"@VitVyaz I think I found it, please check my updated answer"}],"tags":[],"owner":{"account_id":4468601,"reputation":7637,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1475068676,"creation_date":1475067242,"answer_id":39748169,"question_id":39747975,"body_markdown":"from the GWT Documentation [page][1] you should run `mvn gwt:run` to bring up the new application in superDevMode.\r\n\r\n**UPDATE**\r\n\r\nYou have to build your project prior running it. In other words try:\r\n\r\n`mvn clean package gwt:devmode`\r\n\r\nIt should work now.\r\n\r\n\r\n  [1]: http://www.gwtproject.org/doc/latest/RefCommandLineTools.html","title":"GWT Maven project made with WebAppCreator don&#39;t work in devmode","body":"<p>from the GWT Documentation <a href=\"http://www.gwtproject.org/doc/latest/RefCommandLineTools.html\" rel=\"nofollow\">page</a> you should run <code>mvn gwt:run</code> to bring up the new application in superDevMode.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>You have to build your project prior running it. In other words try:</p>\n\n<p><code>mvn clean package gwt:devmode</code></p>\n\n<p>It should work now.</p>\n"},{"comments":[{"owner":{"account_id":482018,"reputation":2241,"user_id":896145,"display_name":"dainichi"},"score":0,"creation_date":1601797257,"post_id":39750766,"comment_id":113512650,"body_markdown":"My understanding is that with an ant gwt setup, you edit the html/css etc directly in the war folder, so refreshing in the browser will reflect changes immediately. So while this might be the state of things, it doesn&#39;t feel quite satisfactory. I feel like there should be some way to set the jetty launcher up so it prioritizes the stuff in src/main/webapp/.","body":"My understanding is that with an ant gwt setup, you edit the html/css etc directly in the war folder, so refreshing in the browser will reflect changes immediately. So while this might be the state of things, it doesn&#39;t feel quite satisfactory. I feel like there should be some way to set the jetty launcher up so it prioritizes the stuff in src/main/webapp/."},{"owner":{"account_id":40213,"reputation":64391,"user_id":116472,"display_name":"Thomas Broyer"},"score":0,"creation_date":1601813177,"post_id":39750766,"comment_id":113516313,"body_markdown":"What if you have configuration in Maven to filter the files (replace `${…}` placeholders), exclude some of them, add new web resource directories, etc. If you change something in `src/main/webapp`, rerun `mvn war:exploded`.","body":"What if you have configuration in Maven to filter the files (replace <code>${…}</code> placeholders), exclude some of them, add new web resource directories, etc. If you change something in <code>src&#47;main&#47;webapp</code>, rerun <code>mvn war:exploded</code>."}],"tags":[],"owner":{"account_id":40213,"reputation":64391,"user_id":116472,"display_name":"Thomas Broyer"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1689084722,"creation_date":1475073802,"answer_id":39750766,"question_id":39747975,"body_markdown":"From the `README.txt` that webAppCreator generated:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    -- Option D: Using Maven --\r\n\r\n    If you have generated your project with the option &#39;-maven&#39;, you have a &#39;pom.xml&#39;\r\n    file ready to use. Assuming you have Maven installed in your system, &#39;mvn&#39; is \r\n    in your path, and you have access to maven repositories, you should be able to run:\r\n\r\n    mvn clean         # delete temporary stuff\r\n    mvn test          # run all the tests (gwt and junit)\r\n    mvn gwt:devmode   # run development mode (needs &quot;mvn package&quot; to be run before)\r\n    mvn package       # generate a .war package ready to deploy\r\n\r\n    For more information about other available goals, read Maven and gwt-maven-plugin \r\n    documentation (http://maven.apache.org, https://tbroyer.github.io/gwt-maven-plugin/)\r\n\r\nso first run `mvn package`, then `mvn gwt:devmode`.\r\n\r\nThe website still documents GWT 2.7, not 2.8 (as of September 2016).","title":"GWT Maven project made with WebAppCreator don&#39;t work in devmode","body":"<p>From the <code>README.txt</code> that webAppCreator generated:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-- Option D: Using Maven --\n\nIf you have generated your project with the option '-maven', you have a 'pom.xml'\nfile ready to use. Assuming you have Maven installed in your system, 'mvn' is \nin your path, and you have access to maven repositories, you should be able to run:\n\nmvn clean         # delete temporary stuff\nmvn test          # run all the tests (gwt and junit)\nmvn gwt:devmode   # run development mode (needs &quot;mvn package&quot; to be run before)\nmvn package       # generate a .war package ready to deploy\n\nFor more information about other available goals, read Maven and gwt-maven-plugin \ndocumentation (http://maven.apache.org, https://tbroyer.github.io/gwt-maven-plugin/)\n</code></pre>\n<p>so first run <code>mvn package</code>, then <code>mvn gwt:devmode</code>.</p>\n<p>The website still documents GWT 2.7, not 2.8 (as of September 2016).</p>\n"}],"owner":{"account_id":9282629,"reputation":33,"user_id":6893426,"display_name":"Vit Vyaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1211,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39748169,"answer_count":2,"score":3,"last_activity_date":1689084722,"creation_date":1475066733,"question_id":39747975,"body_markdown":"I have created a GWT project with maven configuration on this way :\r\n\r\n    webAppCreator -out HelloWorldGWT -templates sample,maven,readme ua.vitvyaz.hellowordgwt.HelloWorldGWT\r\n\r\nI tried to run project on devmode :\r\n\r\n    mvn gwt:devmode\r\n\r\nBut in the browser i got :\r\n\r\n    &quot;HTTP ERROR 404 \r\n    \r\n    Problem accessing /HelloWorldGWT.html.\r\n    \r\n    Reason: Not Found&quot;\r\n\r\nI looked, the directory WEB-INF was empty.\r\n\r\nWhat is wrong in `pom.xml`? \r\n\r\n**pom.xml:**\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n      &lt;!-- POM file generated with GWT webAppCreator --&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;ua.vitvyaz.hellowordgwt&lt;/groupId&gt;\r\n      &lt;artifactId&gt;HelloWorldGWT&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;ua.vitvyaz.hellowordgwt.HelloWorldGWT&lt;/name&gt;\r\n\r\n      &lt;properties&gt;\r\n\r\n        &lt;!-- Setting maven.compiler.source to something different to 1.8\r\n             needs that you configure the sourceLevel in gwt-maven-plugin since\r\n             GWT compiler 2.8 requires 1.8 (see gwt-maven-plugin block below) --&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\n        &lt;!-- Don&#39;t let your Mac use a crazy non-standard encoding --&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n      &lt;/properties&gt;\r\n\r\n      &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;!-- ensure all GWT deps use the same version (unless overridden) --&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gwt&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.0-rc1&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/dependencyManagement&gt;\r\n\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n          &lt;artifactId&gt;gwt-servlet&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n          &lt;artifactId&gt;gwt-user&lt;/artifactId&gt;\r\n          &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n          &lt;artifactId&gt;gwt-dev&lt;/artifactId&gt;\r\n          &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.11&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n\r\n      &lt;build&gt;\r\n        &lt;!-- Output classes directly into the webapp, so that IDEs and &quot;mvn process-classes&quot; update them in DevMode --&gt;\r\n        &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/classes&lt;/outputDirectory&gt;\r\n\r\n        &lt;plugins&gt;\r\n\r\n          &lt;!-- GWT Maven Plugin--&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;net.ltgt.gwt.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-rc-6&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;import-sources&lt;/goal&gt;\r\n                  &lt;goal&gt;compile&lt;/goal&gt;\r\n                  &lt;goal&gt;import-test-sources&lt;/goal&gt;\r\n                  &lt;goal&gt;test&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;configuration&gt;\r\n              &lt;moduleName&gt;ua.vitvyaz.hellowordgwt.HelloWorldGWT&lt;/moduleName&gt;\r\n              &lt;moduleShortName&gt;HelloWorldGWT&lt;/moduleShortName&gt;\r\n              &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n              &lt;!-- GWT compiler 2.8 requires 1.8, hence define sourceLevel here if you use\r\n                   a different source language for java compilation --&gt;\r\n              &lt;sourceLevel&gt;1.8&lt;/sourceLevel&gt;\r\n              &lt;!-- Compiler configuration --&gt;\r\n              &lt;compilerArgs&gt;\r\n                &lt;!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) --&gt;\r\n                &lt;arg&gt;-compileReport&lt;/arg&gt;\r\n                &lt;arg&gt;-XcompilerMetrics&lt;/arg&gt;\r\n              &lt;/compilerArgs&gt;\r\n              &lt;!-- DevMode configuration --&gt;\r\n              &lt;warDir&gt;${project.build.directory}/${project.build.finalName}&lt;/warDir&gt;\r\n              &lt;classpathScope&gt;compile+runtime&lt;/classpathScope&gt;\r\n              &lt;!-- URL(s) that should be opened by DevMode (gwt:devmode). --&gt;\r\n              &lt;startupUrls&gt;\r\n                &lt;startupUrl&gt;HelloWorldGWT.html&lt;/startupUrl&gt;\r\n              &lt;/startupUrls&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n\r\n          &lt;!-- Skip normal test execution, we use gwt:test instead --&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;skip&gt;true&lt;/skip&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"GWT Maven project made with WebAppCreator don&#39;t work in devmode","body":"<p>I have created a GWT project with maven configuration on this way :</p>\n\n<pre><code>webAppCreator -out HelloWorldGWT -templates sample,maven,readme ua.vitvyaz.hellowordgwt.HelloWorldGWT\n</code></pre>\n\n<p>I tried to run project on devmode :</p>\n\n<pre><code>mvn gwt:devmode\n</code></pre>\n\n<p>But in the browser i got :</p>\n\n<pre><code>\"HTTP ERROR 404 \n\nProblem accessing /HelloWorldGWT.html.\n\nReason: Not Found\"\n</code></pre>\n\n<p>I looked, the directory WEB-INF was empty.</p>\n\n<p>What is wrong in <code>pom.xml</code>? </p>\n\n<p><strong>pom.xml:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\r\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\r\n\r\n  &lt;!-- POM file generated with GWT webAppCreator --&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;ua.vitvyaz.hellowordgwt&lt;/groupId&gt;\r\n  &lt;artifactId&gt;HelloWorldGWT&lt;/artifactId&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;ua.vitvyaz.hellowordgwt.HelloWorldGWT&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n\r\n    &lt;!-- Setting maven.compiler.source to something different to 1.8\r\n         needs that you configure the sourceLevel in gwt-maven-plugin since\r\n         GWT compiler 2.8 requires 1.8 (see gwt-maven-plugin block below) --&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\n    &lt;!-- Don't let your Mac use a crazy non-standard encoding --&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;!-- ensure all GWT deps use the same version (unless overridden) --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gwt&lt;/artifactId&gt;\r\n        &lt;version&gt;2.8.0-rc1&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/dependencyManagement&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gwt-servlet&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gwt-user&lt;/artifactId&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gwt-dev&lt;/artifactId&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;!-- Output classes directly into the webapp, so that IDEs and \"mvn process-classes\" update them in DevMode --&gt;\r\n    &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/classes&lt;/outputDirectory&gt;\r\n\r\n    &lt;plugins&gt;\r\n\r\n      &lt;!-- GWT Maven Plugin--&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;net.ltgt.gwt.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-rc-6&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;import-sources&lt;/goal&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n              &lt;goal&gt;import-test-sources&lt;/goal&gt;\r\n              &lt;goal&gt;test&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n          &lt;moduleName&gt;ua.vitvyaz.hellowordgwt.HelloWorldGWT&lt;/moduleName&gt;\r\n          &lt;moduleShortName&gt;HelloWorldGWT&lt;/moduleShortName&gt;\r\n          &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n          &lt;!-- GWT compiler 2.8 requires 1.8, hence define sourceLevel here if you use\r\n               a different source language for java compilation --&gt;\r\n          &lt;sourceLevel&gt;1.8&lt;/sourceLevel&gt;\r\n          &lt;!-- Compiler configuration --&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) --&gt;\r\n            &lt;arg&gt;-compileReport&lt;/arg&gt;\r\n            &lt;arg&gt;-XcompilerMetrics&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n          &lt;!-- DevMode configuration --&gt;\r\n          &lt;warDir&gt;${project.build.directory}/${project.build.finalName}&lt;/warDir&gt;\r\n          &lt;classpathScope&gt;compile+runtime&lt;/classpathScope&gt;\r\n          &lt;!-- URL(s) that should be opened by DevMode (gwt:devmode). --&gt;\r\n          &lt;startupUrls&gt;\r\n            &lt;startupUrl&gt;HelloWorldGWT.html&lt;/startupUrl&gt;\r\n          &lt;/startupUrls&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n      &lt;!-- Skip normal test execution, we use gwt:test instead --&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.17&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;skip&gt;true&lt;/skip&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","sqlite","mapbox","latitude-longitude","mbtiles"],"answers":[{"tags":[],"owner":{"account_id":121626,"reputation":8142,"user_id":314862,"accept_rate":76,"display_name":"Dimitri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689084075,"creation_date":1689084075,"answer_id":76662802,"question_id":76660867,"body_markdown":"Based on this answer https://gis.stackexchange.com/questions/437481/convert-maplibrejs-url-coordinates-to-mbtiles-tile-coumn-and-tile-row, \r\n  \r\nI had to flip the tileY coordinate because MBtiles files are TMS : \r\n\r\n    tileY = (1 &lt;&lt; zoom) - 1 - tileY;\r\n\r\nSo I was able to find the tile in the file.","title":"Check if coordinates Lat/Long is included in mbtiles","body":"<p>Based on this answer <a href=\"https://gis.stackexchange.com/questions/437481/convert-maplibrejs-url-coordinates-to-mbtiles-tile-coumn-and-tile-row\">https://gis.stackexchange.com/questions/437481/convert-maplibrejs-url-coordinates-to-mbtiles-tile-coumn-and-tile-row</a>,</p>\n<p>I had to flip the tileY coordinate because MBtiles files are TMS :</p>\n<pre><code>tileY = (1 &lt;&lt; zoom) - 1 - tileY;\n</code></pre>\n<p>So I was able to find the tile in the file.</p>\n"}],"owner":{"account_id":121626,"reputation":8142,"user_id":314862,"accept_rate":76,"display_name":"Dimitri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689084075,"creation_date":1689070233,"question_id":76660867,"body_markdown":"I have written a small java program to check whether a lat/long coordinates is included in a generated vector mbtiles. \r\n\r\nFor instance, if I want to check if Paris is &quot;present&quot; in the mbtiles, this is what I do : \r\n\r\n        public class TilesUtils {\r\n      \r\n    \r\n             public static int longitudeToTileX(double longitude, int zoom) {\r\n               double tileX = (longitude + 180) / 360 * (1 &lt;&lt; zoom);\r\n               return (int) Math.floor(tileX);\r\n      }\r\n    \r\n             public static int latitudeToTileY(double latitude, int zoom) {\r\n               double sinLatitude = Math.sin(Math.toRadians(latitude));\r\n               double tileY = (0.5 - Math.log((1 + sinLatitude) / (1 - sinLatitude)) / (4 * Math.PI)) * (1 &lt;&lt; zoom);\r\n               return (int) Math.floor(tileY);\r\n      }\r\n\r\n\r\nAnd the unit test : \r\n\r\n      @Test\r\n      void should_check_if_Paris_is_included_in_mbtiles(){\r\n        int zoom = 12;\r\n    \r\n        double latitude = 48.8669846;\r\n        double longitude = 2.3470999;\r\n    \r\n        int tileX = TilesUtils.longitudeToTileX(longitude, zoom);\r\n        int tileY = TilesUtils.latitudeToTileY(latitude, zoom);\r\n    \r\n        Assertions.assertTrue(checkTilesIsIncluded(tileX, tileY, zoom, &quot;/path/to/mbtiles&quot;));\r\n}\r\n\r\n    private boolean checkTilesIsIncluded(int tileX, int tileY, int zoom, String mbTilesFilePath) {\r\n        try(var connection = DriverManager.getConnection(&quot;jdbc:sqlite:&quot; + mbTilesFilePath)){\r\n            System.out.printf(&quot;Requesting tile x = %d, y = %d, zoom = %d%n&quot;, tileX, tileY, zoom);\r\n            PreparedStatement preparedStatement = connection.prepareStatement(&quot;SELECT tile_data FROM tiles WHERE zoom_level = ? AND tile_column = ? AND tile_row = ?&quot;);\r\n            preparedStatement.setInt(1, zoom);\r\n            preparedStatement.setInt(2, tileX);\r\n            preparedStatement.setInt(3, tileY);\r\n            ResultSet resultSet = preparedStatement.executeQuery();\r\n          return resultSet.next();\r\n        } catch (SQLException e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n      }\r\n\r\n\r\n\r\nThe test always returns false. \r\n\r\nJust to add that my file is an extract from France. I don&#39;t know if this will affect the generation of the x, y coordinates of the tiles. \r\n","title":"Check if coordinates Lat/Long is included in mbtiles","body":"<p>I have written a small java program to check whether a lat/long coordinates is included in a generated vector mbtiles.</p>\n<p>For instance, if I want to check if Paris is &quot;present&quot; in the mbtiles, this is what I do :</p>\n<pre><code>    public class TilesUtils {\n  \n\n         public static int longitudeToTileX(double longitude, int zoom) {\n           double tileX = (longitude + 180) / 360 * (1 &lt;&lt; zoom);\n           return (int) Math.floor(tileX);\n  }\n\n         public static int latitudeToTileY(double latitude, int zoom) {\n           double sinLatitude = Math.sin(Math.toRadians(latitude));\n           double tileY = (0.5 - Math.log((1 + sinLatitude) / (1 - sinLatitude)) / (4 * Math.PI)) * (1 &lt;&lt; zoom);\n           return (int) Math.floor(tileY);\n  }\n</code></pre>\n<p>And the unit test :</p>\n<pre><code>  @Test\n  void should_check_if_Paris_is_included_in_mbtiles(){\n    int zoom = 12;\n\n    double latitude = 48.8669846;\n    double longitude = 2.3470999;\n\n    int tileX = TilesUtils.longitudeToTileX(longitude, zoom);\n    int tileY = TilesUtils.latitudeToTileY(latitude, zoom);\n\n    Assertions.assertTrue(checkTilesIsIncluded(tileX, tileY, zoom, &quot;/path/to/mbtiles&quot;));\n</code></pre>\n<p>}</p>\n<pre><code>private boolean checkTilesIsIncluded(int tileX, int tileY, int zoom, String mbTilesFilePath) {\n    try(var connection = DriverManager.getConnection(&quot;jdbc:sqlite:&quot; + mbTilesFilePath)){\n        System.out.printf(&quot;Requesting tile x = %d, y = %d, zoom = %d%n&quot;, tileX, tileY, zoom);\n        PreparedStatement preparedStatement = connection.prepareStatement(&quot;SELECT tile_data FROM tiles WHERE zoom_level = ? AND tile_column = ? AND tile_row = ?&quot;);\n        preparedStatement.setInt(1, zoom);\n        preparedStatement.setInt(2, tileX);\n        preparedStatement.setInt(3, tileY);\n        ResultSet resultSet = preparedStatement.executeQuery();\n      return resultSet.next();\n    } catch (SQLException e) {\n      throw new RuntimeException(e);\n    }\n  }\n</code></pre>\n<p>The test always returns false.</p>\n<p>Just to add that my file is an extract from France. I don't know if this will affect the generation of the x, y coordinates of the tiles.</p>\n"},{"tags":["java","xml","xsd","jaxb"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689077619,"post_id":76661531,"comment_id":135159306,"body_markdown":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need. \nAs it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the \n[How to Ask page](https://stackoverflow.com/help/how-to-ask) for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to \nreproduce the issue. See also [How to create a Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve).","body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need.  As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the  <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to  reproduce the issue. See also <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."},{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":0,"creation_date":1689077648,"post_id":76661531,"comment_id":135159316,"body_markdown":"XSD are schemas which is just used to validate.  XSD are xml format but does not contain the actual data values.  It does not make any sense to convert XSD to java.","body":"XSD are schemas which is just used to validate.  XSD are xml format but does not contain the actual data values.  It does not make any sense to convert XSD to java."},{"owner":{"account_id":27219885,"reputation":13,"user_id":20749343,"display_name":"enanas"},"score":0,"creation_date":1689079220,"post_id":76661531,"comment_id":135159709,"body_markdown":"@aled I thought that I did by adding the last sentence. I will add the code of the validation process, command line commands for Trang and JAXB, thanks.","body":"@aled I thought that I did by adding the last sentence. I will add the code of the validation process, command line commands for Trang and JAXB, thanks."},{"owner":{"account_id":27219885,"reputation":13,"user_id":20749343,"display_name":"enanas"},"score":0,"creation_date":1689079503,"post_id":76661531,"comment_id":135159791,"body_markdown":"@jdwen I have only the XML files ready initially and I want to generate Java classes from them automatically. So I only have the XML as an example of what my class should look like. Thats why I want to first transform them into XSD and then convert it into java classes. So the data inside is mostly irrelavant (except specifying data types) as I will use the created classes to parse other data coming from response.","body":"@jdwen I have only the XML files ready initially and I want to generate Java classes from them automatically. So I only have the XML as an example of what my class should look like. Thats why I want to first transform them into XSD and then convert it into java classes. So the data inside is mostly irrelavant (except specifying data types) as I will use the created classes to parse other data coming from response."},{"owner":{"account_id":3032247,"reputation":11129,"user_id":2571021,"accept_rate":100,"display_name":"Dijkgraaf"},"score":0,"creation_date":1689132649,"post_id":76661531,"comment_id":135168340,"body_markdown":"There probably is no way to automate this, as the XML does not contain data types, correct re-occurrence or validation rules that you can have in a XSD.  It is usually required to manually update the XSD that you have generated from a XML file","body":"There probably is no way to automate this, as the XML does not contain data types, correct re-occurrence or validation rules that you can have in a XSD.  It is usually required to manually update the XSD that you have generated from a XML file"},{"owner":{"account_id":27219885,"reputation":13,"user_id":20749343,"display_name":"enanas"},"score":0,"creation_date":1689141964,"post_id":76661531,"comment_id":135169286,"body_markdown":"@Dijkgraaf I am currently transforming XML files using [this](https://www.liquid-technologies.com/online-xml-to-xsd-converter) website and then using xjc but I am not touching the XSD files to fix them. Does that mean Trang is not checking XSD validity?","body":"@Dijkgraaf I am currently transforming XML files using <a href=\"https://www.liquid-technologies.com/online-xml-to-xsd-converter\" rel=\"nofollow noreferrer\">this</a> website and then using xjc but I am not touching the XSD files to fix them. Does that mean Trang is not checking XSD validity?"},{"owner":{"account_id":3032247,"reputation":11129,"user_id":2571021,"accept_rate":100,"display_name":"Dijkgraaf"},"score":0,"creation_date":1689150291,"post_id":76661531,"comment_id":135170973,"body_markdown":"The XSD would probably validate that specific XML file instance, but might fail on other XML files that are variations that a properly created XSD file would validate correctly.","body":"The XSD would probably validate that specific XML file instance, but might fail on other XML files that are variations that a properly created XSD file would validate correctly."},{"owner":{"account_id":27219885,"reputation":13,"user_id":20749343,"display_name":"enanas"},"score":0,"creation_date":1689171836,"post_id":76661531,"comment_id":135176138,"body_markdown":"What you are saying makes sense to me but whenever I am doing this conversion manually I don&#39;t encounter problems with parsing other XML files and thousands of responses get parsed in our server this way so I still think it is possible.","body":"What you are saying makes sense to me but whenever I am doing this conversion manually I don&#39;t encounter problems with parsing other XML files and thousands of responses get parsed in our server this way so I still think it is possible."}],"owner":{"account_id":27219885,"reputation":13,"user_id":20749343,"display_name":"enanas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689083842,"creation_date":1689075079,"question_id":76661531,"body_markdown":"I am developing a desktop application using Java 1.8 and I want this application to be able to first validate a given XML file, then convert it into XSD files and finally convert these XSD files into Java classes. After this conversion I will create other Java classes automatically that use these previously said Java classes. Currently I am doing these conversions manually using online XSD generators and I want to stop doing it manually so using online generators for XSD files are not an option. The conversion of said XML files will be the SOAP response of a server.\r\n\r\nUp until now I can validate the given XML file using SAX Parser as it checks well-formedness. I used [this](https://stackoverflow.com/questions/6362926/xml-syntax-validation-in-java) link and [this](http://www.edankert.com/validate.html) link for reference. I can also create XSD files using [Trang](https://github.com/relaxng/jing-trang/tree/master) referencing [this](https://stackoverflow.com/questions/31403920/how-to-create-an-xsd-file-using-xml-data-in-java) post. When I try to convert these XSD files using JAXB-xjc.exe inside JDK 1.8, it creates errors like &quot;Two declarations cause a collision in the ObjectFactory class.&quot; and &quot;Attribute &quot;xmlns:xsd&quot; was already specified for element &quot;xsd:schema&quot;.&quot; in some of my files.\r\n\r\nI tried explicitly specifying that the input is XML and output is XSD inside Trang but the errors still occured when converting XSD files into Java files. I also tried another tool called XsdGen but for a reason I can&#39;t recall now, it didn&#39;t offer the same functionality I wanted. When I manually convert into XSD and from XSD I am having no problems so I assume the problem is caused by some form of compatibility between Trang and JAXB.\r\n\r\nHere is the code of validation, command line commands for Trang and xjc.exe usage:\r\n\r\n    public class Validate {\r\n\t\r\n\t    private static SAXParserFactory factory;\r\n\t    private static SAXParser parser;\r\n\t    private static XMLReader reader;\r\n\t\r\n\t    static {\r\n\t\t    factory = SAXParserFactory.newInstance();\r\n\t\t    factory.setValidating(false);\r\n\t\t    factory.setNamespaceAware(true);\r\n\t\t    try {\r\n\t\t\t    parser = factory.newSAXParser();\r\n\t\t\t    reader = parser.getXMLReader();\r\n\t\t\t    reader.setErrorHandler(new SimpleErrorHandler());\r\n\t\t    } catch (ParserConfigurationException | SAXException e) {\r\n\t\t    }\r\n\t    }\r\n\t\r\n\t    public static boolean validateXMLFromSource(String source) {\r\n\r\n\t\t    try {\r\n\t\t\t    reader.parse(new InputSource(source));\r\n\t\t\t    return true;\r\n\t\t    } catch (IOException | SAXException e) {\r\n\t\t\t    return false;\r\n\t\t    }\r\n\t    }\r\n\t\r\n\t    public static boolean validateXMLFromString(String xml) {\r\n\t\t\r\n\t\t    try {\r\n\t\t\t    InputStream stream = new ByteArrayInputStream(xml.getBytes(&quot;UTF-8&quot;));\r\n\t\t\t    reader.parse(new InputSource(stream));\r\n\t\t\t    return true;\r\n\t\t    } catch (IOException | SAXException e) {\r\n\t\t\t    return false;\r\n\t\t    }\r\n\t\t\r\n\t    }\r\n    }\r\n\r\n\r\nThe command line commands look like this for Trang:\r\n\r\n    java -jar C:\\path\\to\\trang.jar -I xml -O xsd C:\\path\\to\\xml\\my_xml_file.xml C:\\path\\to\\output\\xsd\\test.xsd\r\n\r\nThis command produces the XSD files from a XML file.\r\n\r\nFollowing command tries to transform said XSD files into Java classes:\r\n\r\n    &quot;C:\\path\\of\\JDK\\Java\\jdk1.8.0_172\\bin\\xjc&quot; -p Test *.xsd\r\n\r\nI will run both of these commands inside my Java code but for initial testing I am using command line now. I am also using the command above while I am inside the folder with XSD files. I also ran the xjc.exe and trang.jar without being in the same directory so that is not the problem. Deleting the part that creates the package sometimes solve the problem of some XMLs.\r\n\r\nWhat I want to ask is that what is the source of these two (potentially more) problems and how to overcome them? Is there a better solution for the automatic conversion of XML-&gt;XSD-&gt;Java Classes than what I am doing now? Thanks.","title":"Converting XML files into XSD and then converting said XSD files into Java classes - Java","body":"<p>I am developing a desktop application using Java 1.8 and I want this application to be able to first validate a given XML file, then convert it into XSD files and finally convert these XSD files into Java classes. After this conversion I will create other Java classes automatically that use these previously said Java classes. Currently I am doing these conversions manually using online XSD generators and I want to stop doing it manually so using online generators for XSD files are not an option. The conversion of said XML files will be the SOAP response of a server.</p>\n<p>Up until now I can validate the given XML file using SAX Parser as it checks well-formedness. I used <a href=\"https://stackoverflow.com/questions/6362926/xml-syntax-validation-in-java\">this</a> link and <a href=\"http://www.edankert.com/validate.html\" rel=\"nofollow noreferrer\">this</a> link for reference. I can also create XSD files using <a href=\"https://github.com/relaxng/jing-trang/tree/master\" rel=\"nofollow noreferrer\">Trang</a> referencing <a href=\"https://stackoverflow.com/questions/31403920/how-to-create-an-xsd-file-using-xml-data-in-java\">this</a> post. When I try to convert these XSD files using JAXB-xjc.exe inside JDK 1.8, it creates errors like &quot;Two declarations cause a collision in the ObjectFactory class.&quot; and &quot;Attribute &quot;xmlns:xsd&quot; was already specified for element &quot;xsd:schema&quot;.&quot; in some of my files.</p>\n<p>I tried explicitly specifying that the input is XML and output is XSD inside Trang but the errors still occured when converting XSD files into Java files. I also tried another tool called XsdGen but for a reason I can't recall now, it didn't offer the same functionality I wanted. When I manually convert into XSD and from XSD I am having no problems so I assume the problem is caused by some form of compatibility between Trang and JAXB.</p>\n<p>Here is the code of validation, command line commands for Trang and xjc.exe usage:</p>\n<pre><code>public class Validate {\n\n    private static SAXParserFactory factory;\n    private static SAXParser parser;\n    private static XMLReader reader;\n\n    static {\n        factory = SAXParserFactory.newInstance();\n        factory.setValidating(false);\n        factory.setNamespaceAware(true);\n        try {\n            parser = factory.newSAXParser();\n            reader = parser.getXMLReader();\n            reader.setErrorHandler(new SimpleErrorHandler());\n        } catch (ParserConfigurationException | SAXException e) {\n        }\n    }\n\n    public static boolean validateXMLFromSource(String source) {\n\n        try {\n            reader.parse(new InputSource(source));\n            return true;\n        } catch (IOException | SAXException e) {\n            return false;\n        }\n    }\n\n    public static boolean validateXMLFromString(String xml) {\n    \n        try {\n            InputStream stream = new ByteArrayInputStream(xml.getBytes(&quot;UTF-8&quot;));\n            reader.parse(new InputSource(stream));\n            return true;\n        } catch (IOException | SAXException e) {\n            return false;\n        }\n    \n    }\n}\n</code></pre>\n<p>The command line commands look like this for Trang:</p>\n<pre><code>java -jar C:\\path\\to\\trang.jar -I xml -O xsd C:\\path\\to\\xml\\my_xml_file.xml C:\\path\\to\\output\\xsd\\test.xsd\n</code></pre>\n<p>This command produces the XSD files from a XML file.</p>\n<p>Following command tries to transform said XSD files into Java classes:</p>\n<pre><code>&quot;C:\\path\\of\\JDK\\Java\\jdk1.8.0_172\\bin\\xjc&quot; -p Test *.xsd\n</code></pre>\n<p>I will run both of these commands inside my Java code but for initial testing I am using command line now. I am also using the command above while I am inside the folder with XSD files. I also ran the xjc.exe and trang.jar without being in the same directory so that is not the problem. Deleting the part that creates the package sometimes solve the problem of some XMLs.</p>\n<p>What I want to ask is that what is the source of these two (potentially more) problems and how to overcome them? Is there a better solution for the automatic conversion of XML-&gt;XSD-&gt;Java Classes than what I am doing now? Thanks.</p>\n"},{"tags":["java","multipart"],"answers":[{"comments":[{"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"score":0,"creation_date":1689152239,"post_id":76662760,"comment_id":135171464,"body_markdown":"Hi Ironluca,\nThanks for your answer.\n\nIn my case I control only the client side.\nSo my question is if there is a limit, if my implementation is with Java using the &#39;OutputStream&#39; Object when uploading big files (&gt;250MB~).","body":"Hi Ironluca, Thanks for your answer.  In my case I control only the client side. So my question is if there is a limit, if my implementation is with Java using the &#39;OutputStream&#39; Object when uploading big files (&gt;250MB~)."},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1689161133,"post_id":76662760,"comment_id":135173411,"body_markdown":"The limiting is happening on server side not in OutputStream","body":"The limiting is happening on server side not in OutputStream"},{"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"score":0,"creation_date":1689233974,"post_id":76662760,"comment_id":135185086,"body_markdown":"OK, thanks!\n(I guess it also depends on the OS it runs on, I got the &#39;java.lang.OutOfMemoryError: Java heap space&#39; Exception on a VM with poor resources_","body":"OK, thanks! (I guess it also depends on the OS it runs on, I got the &#39;java.lang.OutOfMemoryError: Java heap space&#39; Exception on a VM with poor resources_"},{"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"score":0,"creation_date":1689658561,"post_id":76662760,"comment_id":135240763,"body_markdown":"Hey,\nOne more thing,\nIf I want the body data to be uploaded to the server in chunks.\nI can add data to the OutputStream, flush and then add more data and flush, right?\nI can do it several times and the server will get it as a whole? but in chunks?\nI want to reduce the memory use in the client side.\nThanks!","body":"Hey, One more thing, If I want the body data to be uploaded to the server in chunks. I can add data to the OutputStream, flush and then add more data and flush, right? I can do it several times and the server will get it as a whole? but in chunks? I want to reduce the memory use in the client side. Thanks!"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1689667726,"post_id":76662760,"comment_id":135242365,"body_markdown":"You can flush intermittently and the server will get it all right, it is however not chunking, for chunking transfer encoding needs to be done, it is mostly done by servers. In your case, you don&#39;t need to use that. Refer: https://www.oracle.com/technical-resources/articles/javame/chunking.html","body":"You can flush intermittently and the server will get it all right, it is however not chunking, for chunking transfer encoding needs to be done, it is mostly done by servers. In your case, you don&#39;t need to use that. Refer: <a href=\"https://www.oracle.com/technical-resources/articles/javame/chunking.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/javame/chunking.html</a>"},{"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"score":0,"creation_date":1691948139,"post_id":76662760,"comment_id":135556641,"body_markdown":"BTW,\nI ended up using apache httpclient instead of the old &#39;HTTPURLConnection&#39;.\nThe &#39;MultipartEntityBuilder&#39; does everything for me.\nThanks!","body":"BTW, I ended up using apache httpclient instead of the old &#39;HTTPURLConnection&#39;. The &#39;MultipartEntityBuilder&#39; does everything for me. Thanks!"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1692002221,"post_id":76662760,"comment_id":135561819,"body_markdown":"Yes, Apache HTTP Component client is a good library","body":"Yes, Apache HTTP Component client is a good library"}],"tags":[],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689083782,"creation_date":1689083782,"answer_id":76662760,"question_id":76660906,"body_markdown":"In general the max size of a request (e.g. POST) can either be controlled by the container/server (e.g. Tomcat) or the application. The default behavior for containers vary, refer [default for Tomcat][1]. In addition, applications may also impose a size limit. Limiting size for uploads is in general a common feature to limit security related incidents.\r\n\r\nIf you have access to the servers and the applications you could check their configurations.\r\n\r\n  [1]: https://stackoverflow.com/questions/2947683/httprequest-maximum-allowable-size-in-tomcat","title":"Is there a limit for the file size when sending MultiPart Rest call with Java (not with Spring)?","body":"<p>In general the max size of a request (e.g. POST) can either be controlled by the container/server (e.g. Tomcat) or the application. The default behavior for containers vary, refer <a href=\"https://stackoverflow.com/questions/2947683/httprequest-maximum-allowable-size-in-tomcat\">default for Tomcat</a>. In addition, applications may also impose a size limit. Limiting size for uploads is in general a common feature to limit security related incidents.</p>\n<p>If you have access to the servers and the applications you could check their configurations.</p>\n"}],"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76662760,"answer_count":1,"score":0,"last_activity_date":1689083782,"creation_date":1689070464,"question_id":76660906,"body_markdown":"Is there a limit for the file size when sending MultiPart Rest call with Java (not with Spring)?\r\n\r\nWe have a code, similar to this one: (same implementation, using &#39;HttpURLConnection&#39; and &#39;OutputStream&#39;)\r\n[`https://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically`](https://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically)\r\n\r\nMaybe the limitation is the &#39;OutputStream&#39; size limit?\r\n\r\n would appreciate your help, thanks!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve tried to upload big files, but I couldn&#39;t find a server that will get more than 10MB.\r\nAlso tried to understand which Java Object is my bottleneck and got confused . . .","title":"Is there a limit for the file size when sending MultiPart Rest call with Java (not with Spring)?","body":"<p>Is there a limit for the file size when sending MultiPart Rest call with Java (not with Spring)?</p>\n<p>We have a code, similar to this one: (same implementation, using 'HttpURLConnection' and 'OutputStream')\n<a href=\"https://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically\" rel=\"nofollow noreferrer\"><code>https://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically</code></a></p>\n<p>Maybe the limitation is the 'OutputStream' size limit?</p>\n<p>would appreciate your help, thanks!</p>\n<p>I've tried to upload big files, but I couldn't find a server that will get more than 10MB.\nAlso tried to understand which Java Object is my bottleneck and got confused . . .</p>\n"},{"tags":["java","spring-data-jpa","timestamp","h2"],"comments":[{"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"score":1,"creation_date":1593768178,"post_id":62712093,"comment_id":110900494,"body_markdown":"H2 can store nanoseconds, but you need `TIMESTAMP(9)` column for that purpose. The `TIMESTAMP` data type without parameter holds only microseconds as required by the SQL Standard.","body":"H2 can store nanoseconds, but you need <code>TIMESTAMP(9)</code> column for that purpose. The <code>TIMESTAMP</code> data type without parameter holds only microseconds as required by the SQL Standard."},{"owner":{"account_id":12987478,"reputation":157,"user_id":11854106,"display_name":"Erik Goepfert"},"score":0,"creation_date":1662064355,"post_id":62712093,"comment_id":129926372,"body_markdown":"I&#39;m having the same problem and adding `@Column(columnDefinition = &quot;TIMESTAMP(6)&quot;)` didn&#39;t resolve it. Did you ever find a solution?","body":"I&#39;m having the same problem and adding <code>@Column(columnDefinition = &quot;TIMESTAMP(6)&quot;)</code> didn&#39;t resolve it. Did you ever find a solution?"}],"answers":[{"comments":[{"owner":{"account_id":3015538,"reputation":4229,"user_id":2557818,"accept_rate":82,"display_name":"Raja Anbazhagan"},"score":0,"creation_date":1688154685,"post_id":75694813,"comment_id":135041094,"body_markdown":"Is there a consistent way to do this with precision parameters of @Column annotation?","body":"Is there a consistent way to do this with precision parameters of @Column annotation?"}],"tags":[],"owner":{"account_id":300068,"reputation":2069,"user_id":1211920,"accept_rate":56,"display_name":"Igor"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1678443279,"creation_date":1678443279,"answer_id":75694813,"question_id":62712093,"body_markdown":"This boils down to nanoseconds resolution. Java has greater nanoseconds resolution (6 digits) than H2 (9 digits). \r\n\r\nFor me `TIMESTAMP(9)` did the trick:\r\n\r\n```kotlin\r\n@Column(name = &quot;creationDate&quot;, nullable = false, columnDefinition = &quot;TIMESTAMP(9)&quot;)\r\n    val creationDate: LocalDateTime,\r\n```","title":"Spring test H2 truncates nanoseconds during consequente queries","body":"<p>This boils down to nanoseconds resolution. Java has greater nanoseconds resolution (6 digits) than H2 (9 digits).</p>\n<p>For me <code>TIMESTAMP(9)</code> did the trick:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Column(name = &quot;creationDate&quot;, nullable = false, columnDefinition = &quot;TIMESTAMP(9)&quot;)\n    val creationDate: LocalDateTime,\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28995185,"reputation":11,"user_id":22210023,"display_name":"Rol"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689083659,"creation_date":1689083659,"answer_id":76662738,"question_id":62712093,"body_markdown":"I have a solution to avoid the truncation of nanosaconds, when LocalDateTime would be persisted into the H2 database. I used Hibernate 5.x and H2 database 2.1.214.&lt;br/&gt;\r\nFirstly, an inherited class would be extended from org.hibernate.dialect.H2Dialect like below.\r\n\r\n    package com.example;\r\n        \r\n    import org.hibernate.dialect.H2Dialect;\r\n\r\n    import java.sql.Types;\r\n        \r\n    public class ExtendedH2Dialect extends H2Dialect {\r\n        public ExtendedH2Dialect() {\r\n            registerColumnType(Types.TIMESTAMP, &quot;timestamp(9)&quot;);\r\n        }\r\n    }\r\nThen, the above class would be set as hibernate dialect property.\r\n\r\n    hibernate.dialect=com.example.ExtendedH2Dialect\r\n\r\nIn this case, the production code is untouched.\r\n\r\nI hope it help.\r\nBest Regards.","title":"Spring test H2 truncates nanoseconds during consequente queries","body":"<p>I have a solution to avoid the truncation of nanosaconds, when LocalDateTime would be persisted into the H2 database. I used Hibernate 5.x and H2 database 2.1.214.<br/>\nFirstly, an inherited class would be extended from org.hibernate.dialect.H2Dialect like below.</p>\n<pre><code>package com.example;\n    \nimport org.hibernate.dialect.H2Dialect;\n\nimport java.sql.Types;\n    \npublic class ExtendedH2Dialect extends H2Dialect {\n    public ExtendedH2Dialect() {\n        registerColumnType(Types.TIMESTAMP, &quot;timestamp(9)&quot;);\n    }\n}\n</code></pre>\n<p>Then, the above class would be set as hibernate dialect property.</p>\n<pre><code>hibernate.dialect=com.example.ExtendedH2Dialect\n</code></pre>\n<p>In this case, the production code is untouched.</p>\n<p>I hope it help.\nBest Regards.</p>\n"}],"owner":{"account_id":14135644,"reputation":81,"user_id":10216000,"display_name":"Tomasz Bieniek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1107,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1689083659,"creation_date":1593767158,"question_id":62712093,"body_markdown":"I am using H2 in-memory database in Spring integration test. \r\n\r\nI have following column on my entity\r\n\r\n```java\r\n    @Column(nullable = false)\r\n    private LocalDateTime lastUpdateDateTime;\r\n```\r\n\r\nHowever I noticed some problems in H2, sometimes it truncates nanoseconds part eg:\r\n\r\nSaved datetime: 2020-07-02T13:36:40.459145400\r\n\r\nAfter few moments 2020-07-02T13:36:40.459145\r\n\r\nIt seems that H2 is not able to store nanoseconds and just round up nanoseconds part.\r\n\r\nMy integration tests cannot pass because of this inconsistency. Could You please help ?\r\n\r\n\r\n\r\n","title":"Spring test H2 truncates nanoseconds during consequente queries","body":"<p>I am using H2 in-memory database in Spring integration test.</p>\n<p>I have following column on my entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Column(nullable = false)\n    private LocalDateTime lastUpdateDateTime;\n</code></pre>\n<p>However I noticed some problems in H2, sometimes it truncates nanoseconds part eg:</p>\n<p>Saved datetime: 2020-07-02T13:36:40.459145400</p>\n<p>After few moments 2020-07-02T13:36:40.459145</p>\n<p>It seems that H2 is not able to store nanoseconds and just round up nanoseconds part.</p>\n<p>My integration tests cannot pass because of this inconsistency. Could You please help ?</p>\n"},{"tags":["java","arrays","generics"],"owner":{"account_id":20218413,"reputation":56,"user_id":16429229,"display_name":"user446495"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689082971,"answer_count":0,"score":0,"last_activity_date":1689083236,"creation_date":1689082760,"question_id":76662603,"body_markdown":"I write a method mergeSort. This is my code below:\r\n```\r\nimport java.util.Arrays;\r\n\r\npublic class Search {\r\n   public static &lt;T extends Comparable&lt;T&gt;&gt; T[] mergeSort(T[] arr1, T[] arr2) {\r\n      int length = arr1.length + arr2.length;\r\n      @SuppressWarnings(&quot;unchecked&quot;)\r\n      T[] result = (T[]) new Comparable[length];\r\n      int p = 0;\r\n      int q = 0;\r\n      int i = 0;\r\n      for (i = 0; i &lt; result.length &amp;&amp; p &lt; arr1.length &amp;&amp; q &lt; arr2.length; i++) {\r\n         if (arr1[p].compareTo(arr2[q]) &lt;= 0) {\r\n            result[i] = (T) arr1[p];\r\n            p++;\r\n         } else if (arr1[p].compareTo(arr2[q]) &gt; 0) {\r\n            result[i] = (T) arr2[q];\r\n            q++;\r\n         }\r\n      }\r\n      if (p &gt;= arr1.length) {\r\n         for (int j = q; j &lt; arr2.length; j++) {\r\n            result[i++] = (T) arr2[j];\r\n         }\r\n      } else if (q &gt;= arr2.length) {\r\n         for (int j = p; j &lt; arr1.length; j++) {\r\n            result[i++] = (T) arr1[j];\r\n         }\r\n      }\r\n      System.out.println(Arrays.toString(result));\r\n      return result;\r\n   }\r\n\r\n   public static void main(String[] args) {\r\n      Integer[] arr1 = { 2, 3, 6, 10, 11 };\r\n      Integer[] arr2 = { 4, 5, 7, 8 };\r\n      Integer[] result = mergeSort(arr1, arr2);\r\n      System.out.println(Arrays.toString(result));\r\n\r\n   }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nIt gives me [2, 3, 4, 5, 6, 7, 8, 10, 11]\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Comparable; cannot be cast to class [Ljava.lang.Integer; ([Ljava.lang.Comparable; and [Ljava.lang.Integer; are in module java.base of loader &#39;bootstrap&#39;)\r\n            at Search.main(Search.java:72)\r\n\r\nI don&#39;t know why, could someone help me? Thank You.","title":"java why give me ClassCastException","body":"<p>I write a method mergeSort. This is my code below:</p>\n<pre><code>import java.util.Arrays;\n\npublic class Search {\n   public static &lt;T extends Comparable&lt;T&gt;&gt; T[] mergeSort(T[] arr1, T[] arr2) {\n      int length = arr1.length + arr2.length;\n      @SuppressWarnings(&quot;unchecked&quot;)\n      T[] result = (T[]) new Comparable[length];\n      int p = 0;\n      int q = 0;\n      int i = 0;\n      for (i = 0; i &lt; result.length &amp;&amp; p &lt; arr1.length &amp;&amp; q &lt; arr2.length; i++) {\n         if (arr1[p].compareTo(arr2[q]) &lt;= 0) {\n            result[i] = (T) arr1[p];\n            p++;\n         } else if (arr1[p].compareTo(arr2[q]) &gt; 0) {\n            result[i] = (T) arr2[q];\n            q++;\n         }\n      }\n      if (p &gt;= arr1.length) {\n         for (int j = q; j &lt; arr2.length; j++) {\n            result[i++] = (T) arr2[j];\n         }\n      } else if (q &gt;= arr2.length) {\n         for (int j = p; j &lt; arr1.length; j++) {\n            result[i++] = (T) arr1[j];\n         }\n      }\n      System.out.println(Arrays.toString(result));\n      return result;\n   }\n\n   public static void main(String[] args) {\n      Integer[] arr1 = { 2, 3, 6, 10, 11 };\n      Integer[] arr2 = { 4, 5, 7, 8 };\n      Integer[] result = mergeSort(arr1, arr2);\n      System.out.println(Arrays.toString(result));\n\n   }\n}\n\n</code></pre>\n<p>It gives me [2, 3, 4, 5, 6, 7, 8, 10, 11]</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Comparable; cannot be cast to class [Ljava.lang.Integer; ([Ljava.lang.Comparable; and [Ljava.lang.Integer; are in module java.base of loader 'bootstrap')\n        at Search.main(Search.java:72)\n</code></pre>\n<p>I don't know why, could someone help me? Thank You.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","cors"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689068682,"post_id":76660549,"comment_id":135157465,"body_markdown":"Always copy-paste code snippets as formatted text. It helps to copy-paste code and test. Images don&#39;t help much.","body":"Always copy-paste code snippets as formatted text. It helps to copy-paste code and test. Images don&#39;t help much."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689068852,"post_id":76660549,"comment_id":135157502,"body_markdown":"You should also copy-paste all the request/response headers &amp; error details that you get in the dev tools network for the AJAX call that&#39;s rejected.","body":"You should also copy-paste all the request/response headers &amp; error details that you get in the dev tools network for the AJAX call that&#39;s rejected."},{"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"score":0,"creation_date":1689069007,"post_id":76660549,"comment_id":135157530,"body_markdown":"I have edited the question with the pasted code and an image of the error, sorry","body":"I have edited the question with the pasted code and an image of the error, sorry"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689069089,"post_id":76660549,"comment_id":135157550,"body_markdown":"Hmm..  So, despite the configuration, it seems it is not effective.  The error still says it did not find the ```Access-Control-Allow-Origin``` header.","body":"Hmm..  So, despite the configuration, it seems it is not effective.  The error still says it did not find the <code>Access-Control-Allow-Origin</code> header."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689069297,"post_id":76660549,"comment_id":135157592,"body_markdown":"In your CorsConfig, can you try adding `@EnableWebMvc` annotation?","body":"In your CorsConfig, can you try adding <code>@EnableWebMvc</code> annotation?"},{"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"score":0,"creation_date":1689071057,"post_id":76660549,"comment_id":135157975,"body_markdown":"I tried this and it works, but I still get the error, although in the header response it returns the login token, which is correct. Attached image.","body":"I tried this and it works, but I still get the error, although in the header response it returns the login token, which is correct. Attached image."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689071230,"post_id":76660549,"comment_id":135158005,"body_markdown":"That error must be something else, at least the API works, JWT token is returned, and it is a 200 OK response.  The error must be related to something else.  Adding it as an answer.","body":"That error must be something else, at least the API works, JWT token is returned, and it is a 200 OK response.  The error must be related to something else.  Adding it as an answer."},{"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"score":0,"creation_date":1689071304,"post_id":76660549,"comment_id":135158024,"body_markdown":"But the response body is not returned by the backend, only the header","body":"But the response body is not returned by the backend, only the header"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689072049,"post_id":76660549,"comment_id":135158182,"body_markdown":"I believe, 200 OK and the JWT token themselves are sufficient. Not sure what is missing to add response too.  If you want to redirect to some other page, you may try adding `.formLogin(form -&gt; form.defaultSuccessUrl(URL)....)` in your `HttpSecurity http` object&#39;s configuration to redirect to success page upon success. Add `failureUrl(URL)` to redirect to failure. But since you are using AJAX, you can just do whatever you want to do upon success callback.","body":"I believe, 200 OK and the JWT token themselves are sufficient. Not sure what is missing to add response too.  If you want to redirect to some other page, you may try adding <code>.formLogin(form -&gt; form.defaultSuccessUrl(URL)....)</code> in your <code>HttpSecurity http</code> object&#39;s configuration to redirect to success page upon success. Add <code>failureUrl(URL)</code> to redirect to failure. But since you are using AJAX, you can just do whatever you want to do upon success callback."},{"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"score":0,"creation_date":1689080211,"post_id":76660549,"comment_id":135159970,"body_markdown":"Con ajax aunque me devuelve error, me devuelve tambien el token, asi que eso esta bien, pero lo intento con axios dentro de una web en react, y me sigue dando error sin devolverme el token. adjunto la llamada axios que estoy intentando.","body":"Con ajax aunque me devuelve error, me devuelve tambien el token, asi que eso esta bien, pero lo intento con axios dentro de una web en react, y me sigue dando error sin devolverme el token. adjunto la llamada axios que estoy intentando."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689081314,"post_id":76660549,"comment_id":135160269,"body_markdown":"What is the exact error?  `console.log` everything. Log `response`, if `response.ok` is false, not just raise a new error &#39;Error in Request&#39;. If it throws an error, what is logged by catch?  Probably `response.json()` might be resulting in an error, as there is no json string in the response to parse. And what response are you expecting? What have you done in your code to give that response?","body":"What is the exact error?  <code>console.log</code> everything. Log <code>response</code>, if <code>response.ok</code> is false, not just raise a new error &#39;Error in Request&#39;. If it throws an error, what is logged by catch?  Probably <code>response.json()</code> might be resulting in an error, as there is no json string in the response to parse. And what response are you expecting? What have you done in your code to give that response?"}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689071290,"creation_date":1689071290,"answer_id":76661026,"question_id":76660549,"body_markdown":"In your `CorsConfig.java`, try adding `@EnableWebMvc` annotation.\r\nThis annotation will actually make it process all the registry operations.","title":"I can&#39;t make calls from ajax to my backend in springboot","body":"<p>In your <code>CorsConfig.java</code>, try adding <code>@EnableWebMvc</code> annotation.\nThis annotation will actually make it process all the registry operations.</p>\n"},{"tags":[],"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689073463,"creation_date":1689072962,"answer_id":76661267,"question_id":76660549,"body_markdown":"Here is a quote from [MDN][1].\r\n\r\n&gt; Note: When responding to a credentialed request, the server must specify an origin in the value of the `Access-Control-Allow-Origin` header, instead of specifying the &quot;*&quot; wildcard.\r\n\r\nIf you are trying to login with basic authentication, it won&#39;t work.\r\n\r\n**Edit**: Oh, and if it is cookie-based ajax login, it still requires explicit domain name in header even if it&#39;s not basic auth. That article is really helpful, check it out.\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS","title":"I can&#39;t make calls from ajax to my backend in springboot","body":"<p>Here is a quote from <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"nofollow noreferrer\">MDN</a>.</p>\n<blockquote>\n<p>Note: When responding to a credentialed request, the server must specify an origin in the value of the <code>Access-Control-Allow-Origin</code> header, instead of specifying the &quot;*&quot; wildcard.</p>\n</blockquote>\n<p>If you are trying to login with basic authentication, it won't work.</p>\n<p><strong>Edit</strong>: Oh, and if it is cookie-based ajax login, it still requires explicit domain name in header even if it's not basic auth. That article is really helpful, check it out.</p>\n"}],"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76661026,"answer_count":2,"score":1,"last_activity_date":1689082923,"creation_date":1689067882,"question_id":76660549,"body_markdown":"I have my backend done in `spring boot 3.1` with `spring security 6.1`\r\n\r\nI have configured the login using `spring security` and then various controllers. When i make calls to my backend from Postman, I don&#39;t have any problem, but when I make them through `ajax`, I get the cors error in the browser console. I&#39;ve tried to make the configuration of `CORS` and it didn&#39;t work for me, nor did putting the default of `spring` either. Any ideas? I put images of my classes in case they could be helpful.\r\n\r\n&gt; Class CorsConfig\r\n\r\n\r\n    package com.pms.pmsBack.config;\r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.CorsRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    public class CorsConfig implements WebMvcConfigurer {\r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;*&quot;)\r\n                    .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\r\n                    .allowedHeaders(&quot;*&quot;)\r\n                    .allowCredentials(true)\r\n                    .maxAge(3600);\r\n        }\r\n    }\r\n\r\n\r\n&gt; Class SpringSecurityConfig\r\n\r\n    @Bean\r\n        SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n             http\r\n                     .csrf(csrf -&gt; csrf.disable())\r\n                     .sessionManagement(management -&gt; management.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                     .addFilter(new JwtAuthenticationFilter(authenticationConfiguration.getAuthenticationManager()))\r\n                     .addFilter(new JwtValidationFilter(authenticationConfiguration.getAuthenticationManager()))\r\n                     .authorizeHttpRequests((authorizeHttpRequests) -&gt; authorizeHttpRequests.requestMatchers(HttpMethod.POST, &quot;/login&quot;)\r\n                             .permitAll()\r\n                             .anyRequest()\r\n                             .authenticated()\r\n                     );\r\n    \r\n             return http.build();\r\n        }\r\n\r\n\r\n\r\nThe CORS error:\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\nIf this is not enough, I will be attentive to the answers to add more information. Thank you so much\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xpe1F.png\r\n  [2]: https://i.stack.imgur.com/iajVq.png\r\n\r\n\r\nAxios example : \r\n\r\n    const respuesta = await fetch(&#39;http://localhost:8080/login&#39;, data)\r\n                    .then(function(response) {\r\n                      if (response.ok) {\r\n                        return response.json();\r\n                      }\r\n                      throw new Error(&#39;Error in Request&#39;);\r\n                    })\r\n                    .then(function(data) {\r\n                      console.log(data);\r\n                    })\r\n                    .catch(function(error) {\r\n                      console.log(error);\r\n                    });","title":"I can&#39;t make calls from ajax to my backend in springboot","body":"<p>I have my backend done in <code>spring boot 3.1</code> with <code>spring security 6.1</code></p>\n<p>I have configured the login using <code>spring security</code> and then various controllers. When i make calls to my backend from Postman, I don't have any problem, but when I make them through <code>ajax</code>, I get the cors error in the browser console. I've tried to make the configuration of <code>CORS</code> and it didn't work for me, nor did putting the default of <code>spring</code> either. Any ideas? I put images of my classes in case they could be helpful.</p>\n<blockquote>\n<p>Class CorsConfig</p>\n</blockquote>\n<pre><code>package com.pms.pmsBack.config;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\n                .allowedHeaders(&quot;*&quot;)\n                .allowCredentials(true)\n                .maxAge(3600);\n    }\n}\n</code></pre>\n<blockquote>\n<p>Class SpringSecurityConfig</p>\n</blockquote>\n<pre><code>@Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n         http\n                 .csrf(csrf -&gt; csrf.disable())\n                 .sessionManagement(management -&gt; management.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                 .addFilter(new JwtAuthenticationFilter(authenticationConfiguration.getAuthenticationManager()))\n                 .addFilter(new JwtValidationFilter(authenticationConfiguration.getAuthenticationManager()))\n                 .authorizeHttpRequests((authorizeHttpRequests) -&gt; authorizeHttpRequests.requestMatchers(HttpMethod.POST, &quot;/login&quot;)\n                         .permitAll()\n                         .anyRequest()\n                         .authenticated()\n                 );\n\n         return http.build();\n    }\n</code></pre>\n<p>The CORS error:\n<a href=\"https://i.stack.imgur.com/xpe1F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xpe1F.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/iajVq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iajVq.png\" alt=\"enter image description here\" /></a>\nIf this is not enough, I will be attentive to the answers to add more information. Thank you so much</p>\n<p>Axios example :</p>\n<pre><code>const respuesta = await fetch('http://localhost:8080/login', data)\n                .then(function(response) {\n                  if (response.ok) {\n                    return response.json();\n                  }\n                  throw new Error('Error in Request');\n                })\n                .then(function(data) {\n                  console.log(data);\n                })\n                .catch(function(error) {\n                  console.log(error);\n                });\n</code></pre>\n"},{"tags":["java","spring","jaxb"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688709253,"post_id":76629591,"comment_id":135112739,"body_markdown":"If it isn&#39;t in the XSD you cannot read it. The XSD is the contract of all possible elements and attributes. So either don&#39;t use an XSD and do whatever you want parsing it with a pull parser yourself, or use a proper XSD and let JAXB do the mapping.","body":"If it isn&#39;t in the XSD you cannot read it. The XSD is the contract of all possible elements and attributes. So either don&#39;t use an XSD and do whatever you want parsing it with a pull parser yourself, or use a proper XSD and let JAXB do the mapping."}],"answers":[{"tags":[],"owner":{"account_id":1324418,"reputation":1345,"user_id":1269572,"accept_rate":76,"display_name":"Viktor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689082642,"creation_date":1689082642,"answer_id":76662585,"question_id":76629591,"body_markdown":"I might have found an answer but it is not too elegant so generally I wouldn&#39;t recommend to use it but someone might find it useful:\r\n\r\n\t@EnableWs\r\n\t@Configuration\r\n\tpublic class WebServiceConfig extends CommonWsConfigurerAdapter {\r\n\r\n\t\t...\r\n\r\n\t\t@Override\r\n\t\tpublic void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\r\n\t\t\tinterceptors.add(new CustomEndpointInterceptor());\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t@Component\r\n\tclass CustomEndpointInterceptor implements EndpointInterceptor {\r\n\r\n\t\t...\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic boolean handleResponse(MessageContext messageContext, Object endpoint) throws Exception {\r\n\t\t\tString responseXmlString = toString(messageContext.getResponse());\r\n\t\t\tDocument doc = convertStringToDocument(responseXmlString);\r\n\r\n\t\t\t// manipulting the response\r\n\t\t\t...\r\n\r\n\t\t\t// SaajSoapMessageFactory is thread safe so make sure the message factory is initialized only once\r\n\t\t\tSaajSoapMessageFactory saajSoapMessageFactory = new SaajSoapMessageFactory();\r\n\t\t\tsaajSoapMessageFactory.afterPropertiesSet();\r\n\t\t\t\r\n\t\t\tSaajSoapMessage saajSoapMessage = saajSoapMessageFactory.createWebServiceMessage();\r\n\t\t\tsaajSoapMessage.setDocument(doc);\r\n\t\t\t\r\n\t\t\tmessageContext.clearResponse();\r\n\t\t\tmessageContext.setResponse(saajSoapMessage);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t...\r\n\r\n\t\tprivate String toString(WebServiceMessage msg) throws IOException {\r\n\t\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n\t\t\tmsg.writeTo(out);\r\n\t\t\treturn new String(out.toByteArray());\r\n\t\t}\r\n\r\n\t\tprivate Document convertStringToDocument(String xmlStr) throws Exception {\r\n            // also the DocumentBuilderFactory is supposed to be thread-safe\r\n\t\t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\t\t\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\t\t\tDocument doc = builder.parse( new InputSource( new StringReader( xmlStr ) ) );\r\n\t\t\treturn doc;\r\n\t\t}\r\n\r\n\t}","title":"JAXB - getting attributes from XML that not specified in XSD","body":"<p>I might have found an answer but it is not too elegant so generally I wouldn't recommend to use it but someone might find it useful:</p>\n<pre><code>@EnableWs\n@Configuration\npublic class WebServiceConfig extends CommonWsConfigurerAdapter {\n\n    ...\n\n    @Override\n    public void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\n        interceptors.add(new CustomEndpointInterceptor());\n    }\n}\n\n\n@Component\nclass CustomEndpointInterceptor implements EndpointInterceptor {\n\n    ...\n    \n    @Override\n    public boolean handleResponse(MessageContext messageContext, Object endpoint) throws Exception {\n        String responseXmlString = toString(messageContext.getResponse());\n        Document doc = convertStringToDocument(responseXmlString);\n\n        // manipulting the response\n        ...\n\n        // SaajSoapMessageFactory is thread safe so make sure the message factory is initialized only once\n        SaajSoapMessageFactory saajSoapMessageFactory = new SaajSoapMessageFactory();\n        saajSoapMessageFactory.afterPropertiesSet();\n        \n        SaajSoapMessage saajSoapMessage = saajSoapMessageFactory.createWebServiceMessage();\n        saajSoapMessage.setDocument(doc);\n        \n        messageContext.clearResponse();\n        messageContext.setResponse(saajSoapMessage);\n        return true;\n    }\n\n    ...\n\n    private String toString(WebServiceMessage msg) throws IOException {\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        msg.writeTo(out);\n        return new String(out.toByteArray());\n    }\n\n    private Document convertStringToDocument(String xmlStr) throws Exception {\n        // also the DocumentBuilderFactory is supposed to be thread-safe\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n        DocumentBuilder builder = factory.newDocumentBuilder();\n        Document doc = builder.parse( new InputSource( new StringReader( xmlStr ) ) );\n        return doc;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1324418,"reputation":1345,"user_id":1269572,"accept_rate":76,"display_name":"Viktor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76662585,"answer_count":1,"score":0,"last_activity_date":1689082642,"creation_date":1688651605,"question_id":76629591,"body_markdown":"Good afternoon,\r\n\r\nIn my service I have to call a downstream service whose SOAP response contains lots of attributes like\r\n\r\n\t&lt;section name=&quot;AA1&quot;&gt;\r\n\t\t&lt;grp name=&quot;...&quot; AB1001=&quot;1.5&quot; AB1002=&quot;...&quot; .../&gt;\r\n\t\t&lt;grp name=&quot;...&quot; CD1001=&quot;1.5&quot; CD1F002=&quot;...&quot; .../&gt;\r\n\t\t...\r\n\t&lt;/section&gt;\r\n\t&lt;section name=&quot;AB1&quot;&gt;\r\n\t\t&lt;grp name=&quot;...&quot; AB1001=&quot;1.5&quot; AB1002=&quot;...&quot; .../&gt;\r\n\t\t&lt;grp name=&quot;...&quot; CD1001=&quot;1.5&quot; CD1F002=&quot;...&quot; .../&gt;\r\n\t\t...\r\n\t&lt;/section&gt;\r\n\t&lt;section name=&quot;AB2&quot;&gt;\r\n\t\t...\r\n\t&lt;/section&gt;\r\n\t...\r\n\r\nIn my service&#39;s response I have to retrieve this same structure.    \r\nHowever as the number of the attributes are enormous so I thought I won&#39;t add all these attributes to my service&#39;s XSD but I&#39;ll go through the attributes in the response of the downstream service and whatever I&#39;ll find there will add them to my service&#39;s SOAP response.\r\n\r\nThe difficulty is that I use JAXB so Java XML beans are generated from the XSD. As the XML attributes are not in my service&#39;s XSD so somehow I should add them &#39;manually&#39; (after the JAXB beans marshalled to XML (SOAP response)).\r\n\r\nIs there a way of doing that please?\r\n\r\nI use Spring &amp; Spring Integration.\r\n\r\nThe outbound gateway is specified like\r\n\r\n\t@Configuration\r\n\tpublic class MppWebServiceGatewayConfig {\r\n\r\n\t\t...\r\n\t\t\r\n\t\t@Bean(name=&quot;serviceOutboundGateway&quot;)\r\n\t\tpublic MessageHandler serviceOutboundGateway() {\r\n\t\t\tfinal MarshallingWebServiceOutboundGateway gateway = new ExceptionHandlingMarshallingWebServiceOutboundGateway(url, mppMarshaller(), mppUnMarshaller());\r\n\t\t\tgateway.setMessageSender(httpPoolingWebServiceMessageSender);\r\n\t\t\treturn gateway;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic Marshaller mppMarshaller() {\r\n\t\t\tfinal Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\r\n\t\t\tmarshaller.setContextPath(CONTEXTPATH);\r\n\t\t\treturn  marshaller;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic Unmarshaller mppUnMarshaller() {\r\n\t\t\tfinal Jaxb2Marshaller unmarshaller = new Jaxb2Marshaller();\r\n\t\t\tunmarshaller.setContextPath(CONTEXTPATH);\r\n\t\t\treturn  unmarshaller;\r\n\t\t}\r\n\r\n\t\t...\r\n\t}\r\n\r\nThanks!","title":"JAXB - getting attributes from XML that not specified in XSD","body":"<p>Good afternoon,</p>\n<p>In my service I have to call a downstream service whose SOAP response contains lots of attributes like</p>\n<pre><code>&lt;section name=&quot;AA1&quot;&gt;\n    &lt;grp name=&quot;...&quot; AB1001=&quot;1.5&quot; AB1002=&quot;...&quot; .../&gt;\n    &lt;grp name=&quot;...&quot; CD1001=&quot;1.5&quot; CD1F002=&quot;...&quot; .../&gt;\n    ...\n&lt;/section&gt;\n&lt;section name=&quot;AB1&quot;&gt;\n    &lt;grp name=&quot;...&quot; AB1001=&quot;1.5&quot; AB1002=&quot;...&quot; .../&gt;\n    &lt;grp name=&quot;...&quot; CD1001=&quot;1.5&quot; CD1F002=&quot;...&quot; .../&gt;\n    ...\n&lt;/section&gt;\n&lt;section name=&quot;AB2&quot;&gt;\n    ...\n&lt;/section&gt;\n...\n</code></pre>\n<p>In my service's response I have to retrieve this same structure.<br />\nHowever as the number of the attributes are enormous so I thought I won't add all these attributes to my service's XSD but I'll go through the attributes in the response of the downstream service and whatever I'll find there will add them to my service's SOAP response.</p>\n<p>The difficulty is that I use JAXB so Java XML beans are generated from the XSD. As the XML attributes are not in my service's XSD so somehow I should add them 'manually' (after the JAXB beans marshalled to XML (SOAP response)).</p>\n<p>Is there a way of doing that please?</p>\n<p>I use Spring &amp; Spring Integration.</p>\n<p>The outbound gateway is specified like</p>\n<pre><code>@Configuration\npublic class MppWebServiceGatewayConfig {\n\n    ...\n    \n    @Bean(name=&quot;serviceOutboundGateway&quot;)\n    public MessageHandler serviceOutboundGateway() {\n        final MarshallingWebServiceOutboundGateway gateway = new ExceptionHandlingMarshallingWebServiceOutboundGateway(url, mppMarshaller(), mppUnMarshaller());\n        gateway.setMessageSender(httpPoolingWebServiceMessageSender);\n        return gateway;\n    }\n\n    @Bean\n    public Marshaller mppMarshaller() {\n        final Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\n        marshaller.setContextPath(CONTEXTPATH);\n        return  marshaller;\n    }\n\n    @Bean\n    public Unmarshaller mppUnMarshaller() {\n        final Jaxb2Marshaller unmarshaller = new Jaxb2Marshaller();\n        unmarshaller.setContextPath(CONTEXTPATH);\n        return  unmarshaller;\n    }\n\n    ...\n}\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","string","whitespace"],"comments":[{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":3,"creation_date":1279120838,"post_id":3247067,"comment_id":3355485,"body_markdown":"Be aware that there are many different definitions of whitespace: http://spreadsheets.google.com/pub?key=pd8dAQyHbdewRsnE5x5GzKQ\n\nWhich do you want?  Or then you say &quot;has an alphanumeric character&quot;, which is a completely different thing. Please clarify.","body":"Be aware that there are many different definitions of whitespace: <a href=\"http://spreadsheets.google.com/pub?key=pd8dAQyHbdewRsnE5x5GzKQ\" rel=\"nofollow noreferrer\">spreadsheets.google.com/pub?key=pd8dAQyHbdewRsnE5x5GzKQ</a>  Which do you want?  Or then you say &quot;has an alphanumeric character&quot;, which is a completely different thing. Please clarify."},{"owner":{"account_id":26725,"reputation":50482,"user_id":69803,"accept_rate":65,"display_name":"Ankur"},"score":0,"creation_date":1279121234,"post_id":3247067,"comment_id":3355578,"body_markdown":"Apologies for the confusion ... not all whitespaces is the key- basically if it has all whitespace characters I want to exclude it, because it has no content.","body":"Apologies for the confusion ... not all whitespaces is the key- basically if it has all whitespace characters I want to exclude it, because it has no content."},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":2,"creation_date":1527793264,"post_id":3247067,"comment_id":88272152,"body_markdown":"With JDK/11 you can [make use of the `String.isBlank`](https://stackoverflow.com/a/50631090/1746118) API for the same.","body":"With JDK/11 you can <a href=\"https://stackoverflow.com/a/50631090/1746118\">make use of the <code>String.isBlank</code></a> API for the same."}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":10,"creation_date":1279117741,"post_id":3247081,"comment_id":3354826,"body_markdown":"FWIW: I would expect the first solution to be considerably faster.","body":"FWIW: I would expect the first solution to be considerably faster."},{"owner":{"account_id":57484,"reputation":66737,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"score":2,"creation_date":1279117867,"post_id":3247081,"comment_id":3354855,"body_markdown":"@Stephen C: Absolutely! But as @Uri pointed out, I&#39;m having to solve two different problems thanks to the ambiguity of the question :) Also, I rarely use `matches()`: for performance, I usually store the `Pattern` in a `final static`. Pays off if the same code runs frequently.","body":"@Stephen C: Absolutely! But as @Uri pointed out, I&#39;m having to solve two different problems thanks to the ambiguity of the question :) Also, I rarely use <code>matches()</code>: for performance, I usually store the <code>Pattern</code> in a <code>final static</code>. Pays off if the same code runs frequently."},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1279119108,"post_id":3247081,"comment_id":3355110,"body_markdown":"@Carl - look out, there&#39;s one `string == null` coming! - Ouch - NPE - that hurts ;-))","body":"@Carl - look out, there&#39;s one <code>string == null</code> coming! - Ouch - NPE - that hurts ;-))"},{"owner":{"account_id":57484,"reputation":66737,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"score":3,"creation_date":1279119694,"post_id":3247081,"comment_id":3355246,"body_markdown":"@Andreas_D: Heh, I got my orders! The OP said he wanted to check a string or char array, he never said anything about nulls! :) \\*checks the fine print in the contract\\* &quot;`null` is not a string!&quot;","body":"@Andreas_D: Heh, I got my orders! The OP said he wanted to check a string or char array, he never said anything about nulls! :) *checks the fine print in the contract* &quot;<code>null</code> is not a string!&quot;"},{"owner":{"account_id":388422,"reputation":17108,"user_id":747355,"display_name":"Rob Raisch"},"score":0,"creation_date":1306596608,"post_id":3247081,"comment_id":7160674,"body_markdown":"&quot;.*\\\\w.*&quot; can be simplified to simply &quot;\\\\w&quot; to achieve the same result.","body":"&quot;.*\\\\w.*&quot; can be simplified to simply &quot;\\\\w&quot; to achieve the same result."},{"owner":{"account_id":388422,"reputation":17108,"user_id":747355,"display_name":"Rob Raisch"},"score":1,"creation_date":1306596659,"post_id":3247081,"comment_id":7160681,"body_markdown":"Also, &quot;\\\\w&quot; only matches a limited subset of non-whitespace characters rather than all non-whitespace since it refers to &quot;word characters&quot; defined as A-Z, a-z, 0-9, and underscore.","body":"Also, &quot;\\\\w&quot; only matches a limited subset of non-whitespace characters rather than all non-whitespace since it refers to &quot;word characters&quot; defined as A-Z, a-z, 0-9, and underscore."},{"owner":{"account_id":57484,"reputation":66737,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"score":1,"creation_date":1322999490,"post_id":3247081,"comment_id":10335126,"body_markdown":"@Rob Raisch, I must object to both of your comments. Second comment first: I explicitly gave &quot;\\w&quot; as an example checking for a particular character class, not to solve the original simpler problem. First comment: No, &quot;\\\\w&quot; will not match a series of word characters preceded, surrounded or followed by other characters, e.g. whitespace. String.matches() matches the entire string, not a subset.","body":"@Rob Raisch, I must object to both of your comments. Second comment first: I explicitly gave &quot;\\w&quot; as an example checking for a particular character class, not to solve the original simpler problem. First comment: No, &quot;\\\\w&quot; will not match a series of word characters preceded, surrounded or followed by other characters, e.g. whitespace. String.matches() matches the entire string, not a subset."},{"owner":{"account_id":3281388,"reputation":738,"user_id":2761923,"display_name":"Neri"},"score":2,"creation_date":1531047909,"post_id":3247081,"comment_id":89441819,"body_markdown":"I used your_string.trim().isEmpty() and did the job for me","body":"I used your_string.trim().isEmpty() and did the job for me"}],"tags":[],"owner":{"account_id":57484,"reputation":66737,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"comment_count":8,"down_vote_count":1,"up_vote_count":245,"is_accepted":true,"score":244,"last_activity_date":1457199887,"creation_date":1279117483,"answer_id":3247081,"question_id":3247067,"body_markdown":"Shortest solution I can think of:\r\n\r\n    if (string.trim().length() &gt; 0) ...\r\n\r\nThis only checks for (non) white space. If you want to check for particular character classes, you need to use the mighty `match()` with a regexp such as:\r\n\r\n    if (string.matches(&quot;.*\\\\w.*&quot;)) ...\r\n\r\n...which checks for at least one (ASCII) alphanumeric character.\r\n\r\n","title":"How do I check that a Java String is not all whitespaces?","body":"<p>Shortest solution I can think of:</p>\n\n<pre><code>if (string.trim().length() &gt; 0) ...\n</code></pre>\n\n<p>This only checks for (non) white space. If you want to check for particular character classes, you need to use the mighty <code>match()</code> with a regexp such as:</p>\n\n<pre><code>if (string.matches(\".*\\\\w.*\")) ...\n</code></pre>\n\n<p>...which checks for at least one (ASCII) alphanumeric character.</p>\n"},{"comments":[{"owner":{"account_id":311307,"reputation":11224,"user_id":624814,"accept_rate":79,"display_name":"SMBiggs"},"score":2,"creation_date":1547760169,"post_id":3247096,"comment_id":95313479,"body_markdown":"Hmm, my compiler doesn&#39;t recognize this method in StringUtils.","body":"Hmm, my compiler doesn&#39;t recognize this method in StringUtils."}],"tags":[],"owner":{"account_id":69403,"reputation":4609,"user_id":201928,"display_name":"darelf"},"comment_count":1,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1517034877,"creation_date":1279117584,"answer_id":3247096,"question_id":3247067,"body_markdown":"    StringUtils.isBlank(CharSequence)\r\n\r\nhttps://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-","title":"How do I check that a Java String is not all whitespaces?","body":"<pre><code>StringUtils.isBlank(CharSequence)\n</code></pre>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-</a></p>\n"},{"comments":[{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1517034949,"post_id":3247105,"comment_id":83940207,"body_markdown":"Link in answer is dead - *404 | We&#39;re sorry, the page does not exist or is no longer available*.","body":"Link in answer is dead - <i>404 | We&#39;re sorry, the page does not exist or is no longer available</i>."}],"tags":[],"owner":{"account_id":53674,"reputation":24169,"user_id":160527,"accept_rate":62,"display_name":"Corey Ogburn"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1279117620,"creation_date":1279117620,"answer_id":3247105,"question_id":3247067,"body_markdown":"The trim method should work great for you.\r\n\r\nhttp://download.oracle.com/docs/cd/E17476_01/javase/1.4.2/docs/api/java/lang/String.html#trim()\r\n\r\n&gt; Returns a copy of the string, with\r\n&gt; leading and trailing whitespace\r\n&gt; omitted. If this String object\r\n&gt; represents an empty character\r\n&gt; sequence, or the first and last\r\n&gt; characters of character sequence\r\n&gt; represented by this String object both\r\n&gt; have codes greater than &#39;\\u0020&#39; (the\r\n&gt; space character), then a reference to\r\n&gt; this String object is returned.\r\n&gt; \r\n&gt; Otherwise, if there is no character\r\n&gt; with a code greater than &#39;\\u0020&#39; in\r\n&gt; the string, then a new String object\r\n&gt; representing an empty string is\r\n&gt; created and returned.\r\n&gt; \r\n&gt; Otherwise, let k be the index of the\r\n&gt; first character in the string whose\r\n&gt; code is greater than &#39;\\u0020&#39;, and let\r\n&gt; m be the index of the last character\r\n&gt; in the string whose code is greater\r\n&gt; than &#39;\\u0020&#39;. A new String object is\r\n&gt; created, representing the substring of\r\n&gt; this string that begins with the\r\n&gt; character at index k and ends with the\r\n&gt; character at index m-that is, the\r\n&gt; result of this.substring(k, m+1).\r\n&gt; \r\n&gt; This method may be used to trim\r\n&gt; whitespace from the beginning and end\r\n&gt; of a string; in fact, it trims all\r\n&gt; ASCII control characters as well.\r\n&gt; \r\n&gt; Returns: A copy of this string with\r\n&gt; leading and trailing white space\r\n&gt; removed, or this string if it has no\r\n&gt; leading or trailing white space.leading or trailing white space.\r\n\r\nYou could trim and then compare to an empty string or possibly check the length for 0.","title":"How do I check that a Java String is not all whitespaces?","body":"<p>The trim method should work great for you.</p>\n\n<p><a href=\"http://download.oracle.com/docs/cd/E17476_01/javase/1.4.2/docs/api/java/lang/String.html#trim()\" rel=\"nofollow noreferrer\">http://download.oracle.com/docs/cd/E17476_01/javase/1.4.2/docs/api/java/lang/String.html#trim()</a></p>\n\n<blockquote>\n  <p>Returns a copy of the string, with\n  leading and trailing whitespace\n  omitted. If this String object\n  represents an empty character\n  sequence, or the first and last\n  characters of character sequence\n  represented by this String object both\n  have codes greater than '\\u0020' (the\n  space character), then a reference to\n  this String object is returned.</p>\n  \n  <p>Otherwise, if there is no character\n  with a code greater than '\\u0020' in\n  the string, then a new String object\n  representing an empty string is\n  created and returned.</p>\n  \n  <p>Otherwise, let k be the index of the\n  first character in the string whose\n  code is greater than '\\u0020', and let\n  m be the index of the last character\n  in the string whose code is greater\n  than '\\u0020'. A new String object is\n  created, representing the substring of\n  this string that begins with the\n  character at index k and ends with the\n  character at index m-that is, the\n  result of this.substring(k, m+1).</p>\n  \n  <p>This method may be used to trim\n  whitespace from the beginning and end\n  of a string; in fact, it trims all\n  ASCII control characters as well.</p>\n  \n  <p>Returns: A copy of this string with\n  leading and trailing white space\n  removed, or this string if it has no\n  leading or trailing white space.leading or trailing white space.</p>\n</blockquote>\n\n<p>You could trim and then compare to an empty string or possibly check the length for 0.</p>\n"},{"comments":[{"owner":{"account_id":9137,"reputation":10022,"user_id":16759,"accept_rate":70,"display_name":"Richard"},"score":12,"creation_date":1279126621,"post_id":3247111,"comment_id":3356563,"body_markdown":"I prefer this solution compared to using the chosen answer. This will also check for string == null","body":"I prefer this solution compared to using the chosen answer. This will also check for string == null"},{"owner":{"account_id":5263530,"reputation":2040,"user_id":4204322,"accept_rate":91,"display_name":"James Spence"},"score":0,"creation_date":1496175938,"post_id":3247111,"comment_id":75550615,"body_markdown":"This is now incorrect. `StringUtils.isEmpty` will now return false if you pass in &quot; &quot;.","body":"This is now incorrect. <code>StringUtils.isEmpty</code> will now return false if you pass in &quot; &quot;."}],"tags":[],"owner":{"account_id":55159,"reputation":9174,"user_id":165119,"accept_rate":100,"display_name":"Chris J"},"comment_count":2,"down_vote_count":0,"up_vote_count":66,"is_accepted":false,"score":66,"last_activity_date":1517035091,"creation_date":1279117687,"answer_id":3247111,"question_id":3247067,"body_markdown":"I would use the Apache Commons Lang library. It has a class called StringUtils that is useful for all sorts of String operations. For checking if a String is not all whitespaces, you can use the following:\r\n\r\n    StringUtils.isBlank(&lt;your string&gt;)\r\n\r\nHere is the reference: [StringUtils.isBlank][1]\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-","title":"How do I check that a Java String is not all whitespaces?","body":"<p>I would use the Apache Commons Lang library. It has a class called StringUtils that is useful for all sorts of String operations. For checking if a String is not all whitespaces, you can use the following:</p>\n\n<pre><code>StringUtils.isBlank(&lt;your string&gt;)\n</code></pre>\n\n<p>Here is the reference: <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-\" rel=\"noreferrer\">StringUtils.isBlank</a></p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1279125520,"creation_date":1279118960,"answer_id":3247347,"question_id":3247067,"body_markdown":"This answer focusses more on the sidenote &quot;*i.e. has at least one alphanumeric character*&quot;. Besides that, it doesn&#39;t add too much to the other (earlier) solution, except that it doesn&#39;t hurt you with NPE in case the String is `null`. \r\n\r\nWe want `false` if (1) s is `null` or (2) s is empty or (3) s only contains whitechars.\r\n\r\n    public static boolean containsNonWhitespaceChar(String s) {\r\n      return !((s == null) || &quot;&quot;.equals(s.trim()));\r\n    }","title":"How do I check that a Java String is not all whitespaces?","body":"<p>This answer focusses more on the sidenote \"<em>i.e. has at least one alphanumeric character</em>\". Besides that, it doesn't add too much to the other (earlier) solution, except that it doesn't hurt you with NPE in case the String is <code>null</code>. </p>\n\n<p>We want <code>false</code> if (1) s is <code>null</code> or (2) s is empty or (3) s only contains whitechars.</p>\n\n<pre><code>public static boolean containsNonWhitespaceChar(String s) {\n  return !((s == null) || \"\".equals(s.trim()));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":388422,"reputation":17108,"user_id":747355,"display_name":"Rob Raisch"},"score":1,"creation_date":1306534286,"post_id":3248499,"comment_id":7154485,"body_markdown":"\\\\s* will match all strings with or without whitespaces. Perhaps you mean \\\\s+ ?","body":"\\\\s* will match all strings with or without whitespaces. Perhaps you mean \\\\s+ ?"}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1306563247,"creation_date":1279126214,"answer_id":3248499,"question_id":3247067,"body_markdown":"Alternative: \r\n\r\n    boolean isWhiteSpaces( String s ) {\r\n        return s != null &amp;&amp; s.matches(&quot;\\\\s+&quot;);\r\n     }","title":"How do I check that a Java String is not all whitespaces?","body":"<p>Alternative: </p>\n\n<pre><code>boolean isWhiteSpaces( String s ) {\n    return s != null &amp;&amp; s.matches(\"\\\\s+\");\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":57484,"reputation":66737,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"score":11,"creation_date":1322999694,"post_id":5584293,"comment_id":10335156,"body_markdown":"You young whippersnappers and your newfangled post-Java-1.6 trickery! Seriously, at least one project in my company still runs on Java 1.4 (sigh).","body":"You young whippersnappers and your newfangled post-Java-1.6 trickery! Seriously, at least one project in my company still runs on Java 1.4 (sigh)."},{"owner":{"account_id":1864303,"reputation":1455,"user_id":1688206,"display_name":"Michel"},"score":0,"creation_date":1394624044,"post_id":5584293,"comment_id":33969783,"body_markdown":"Shorter? Yes. Personally, I like the more verbose coding style","body":"Shorter? Yes. Personally, I like the more verbose coding style"}],"tags":[],"owner":{"account_id":343405,"reputation":589,"user_id":675085,"display_name":"redslime"},"comment_count":2,"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1302193254,"creation_date":1302193254,"answer_id":5584293,"question_id":3247067,"body_markdown":"Slightly shorter than what was mentioned by Carl Smotricz:\r\n\r\n    !string.trim().isEmpty();\r\n\r\n","title":"How do I check that a Java String is not all whitespaces?","body":"<p>Slightly shorter than what was mentioned by Carl Smotricz:</p>\n\n<pre><code>!string.trim().isEmpty();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1551262,"reputation":3378,"user_id":2594699,"accept_rate":60,"display_name":"Nhat Dinh"},"score":2,"creation_date":1432090750,"post_id":6158170,"comment_id":48772793,"body_markdown":"Let try: \n`String year=&quot;1995&quot;; year.matches(&quot;\\\\S&quot;); will return false`\nSo this is not correct solution. :|","body":"Let try:  <code>String year=&quot;1995&quot;; year.matches(&quot;\\\\S&quot;); will return false</code> So this is not correct solution. :|"},{"owner":{"account_id":388422,"reputation":17108,"user_id":747355,"display_name":"Rob Raisch"},"score":6,"creation_date":1432655179,"post_id":6158170,"comment_id":49006804,"body_markdown":"Nhat, you are correct though I&#39;m at a loss to explain why. According to the Java docs, String.matches checks to see if a given string matches a regex. A little experimentation shows that this is not entirely accurate, as this function appears to match ONLY if the provided regex matches the ENTIRE string! So, changing the regex above (&quot;\\\\S&quot;) to &quot;^.*\\\\S.*$&quot; will work as expected, though this behavior isn&#39;t correctly documented and appears to diverge substantially from every other implementation of string matching using Regular Expressions.","body":"Nhat, you are correct though I&#39;m at a loss to explain why. According to the Java docs, String.matches checks to see if a given string matches a regex. A little experimentation shows that this is not entirely accurate, as this function appears to match ONLY if the provided regex matches the ENTIRE string! So, changing the regex above (&quot;\\\\S&quot;) to &quot;^.*\\\\S.*$&quot; will work as expected, though this behavior isn&#39;t correctly documented and appears to diverge substantially from every other implementation of string matching using Regular Expressions."}],"tags":[],"owner":{"account_id":388422,"reputation":17108,"user_id":747355,"display_name":"Rob Raisch"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1306534136,"creation_date":1306534136,"answer_id":6158170,"question_id":3247067,"body_markdown":"    if(target.matches(&quot;\\\\S&quot;)) \r\n        // then string contains at least one non-whitespace character\r\n\r\nNote use of back-slash cap-S, meaning &quot;non-whitespace char&quot;\r\n\r\nI&#39;d wager this is the simplest (and perhaps the fastest?) solution.","title":"How do I check that a Java String is not all whitespaces?","body":"<pre><code>if(target.matches(\"\\\\S\")) \n    // then string contains at least one non-whitespace character\n</code></pre>\n\n<p>Note use of back-slash cap-S, meaning \"non-whitespace char\"</p>\n\n<p>I'd wager this is the simplest (and perhaps the fastest?) solution.</p>\n"},{"comments":[{"owner":{"account_id":2200117,"reputation":151,"user_id":1944711,"accept_rate":60,"display_name":"Sachidananda Naik"},"score":0,"creation_date":1579201421,"post_id":39400213,"comment_id":105696511,"body_markdown":"isBlank(String) is recommended since it handles null validation as well!","body":"isBlank(String) is recommended since it handles null validation as well!"}],"tags":[],"owner":{"account_id":5206151,"reputation":2312,"user_id":4164025,"accept_rate":92,"display_name":"Arun"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1473453645,"creation_date":1473368794,"answer_id":39400213,"question_id":3247067,"body_markdown":"If you are only checking for whitespace and don&#39;t care about null then you can use org.apache.commons.lang.StringUtils.isWhitespace(String str),  \r\n\r\n`StringUtils.isWhitespace(String str);`\r\n\r\n(Checks if the String contains only whitespace.)\r\n\r\nIf you also want to check for null(including whitespace) then\r\n \r\n\r\n    StringUtils.isBlank(String str);","title":"How do I check that a Java String is not all whitespaces?","body":"<p>If you are only checking for whitespace and don't care about null then you can use org.apache.commons.lang.StringUtils.isWhitespace(String str),  </p>\n\n<p><code>StringUtils.isWhitespace(String str);</code></p>\n\n<p>(Checks if the String contains only whitespace.)</p>\n\n<p>If you also want to check for null(including whitespace) then</p>\n\n<pre><code>StringUtils.isBlank(String str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2557291,"reputation":945,"user_id":2218992,"accept_rate":100,"display_name":"andreyro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507031185,"creation_date":1507030757,"answer_id":46543719,"question_id":3247067,"body_markdown":"trim() and other mentioned regular expression do not work for all types of whitespaces\r\n\r\ni.e: Unicode Character &#39;LINE SEPARATOR&#39;  http://www.fileformat.info/info/unicode/char/2028/index.htm\r\n\r\nJava functions Character.isWhitespace() covers all situations.\r\n\r\nThat is why already mentioned solution\r\n**StringUtils.isWhitespace( String )** **/or StringUtils.isBlank(String)**\r\nshould be used.","title":"How do I check that a Java String is not all whitespaces?","body":"<p>trim() and other mentioned regular expression do not work for all types of whitespaces</p>\n\n<p>i.e: Unicode Character 'LINE SEPARATOR'  <a href=\"http://www.fileformat.info/info/unicode/char/2028/index.htm\" rel=\"nofollow noreferrer\">http://www.fileformat.info/info/unicode/char/2028/index.htm</a></p>\n\n<p>Java functions Character.isWhitespace() covers all situations.</p>\n\n<p>That is why already mentioned solution\n<strong>StringUtils.isWhitespace( String )</strong> <strong>/or StringUtils.isBlank(String)</strong>\nshould be used.</p>\n"},{"tags":[],"owner":{"account_id":4318345,"reputation":6373,"user_id":3527464,"accept_rate":100,"display_name":"Pyves"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1623675661,"creation_date":1525515929,"answer_id":50188398,"question_id":3247067,"body_markdown":"If you are using **Java 11** or more recent, the new `isBlank` string method will come in handy:\r\n\r\n    !s.isBlank();\r\n\r\nIf you are using **Java 8, 9 or 10**, you could build a simple stream to check that a string is not whitespace only:\r\n\r\n    !s.chars().allMatch(Character::isWhitespace));\r\n\r\nIn addition to not requiring any third-party libraries such as Apache Commons Lang, these solutions have the advantage of handling any white space character, and not just plain `&#39; &#39;` spaces as would a `trim`-based solution suggested in many other answers. You can refer to the [Javadocs][1] for an exhaustive list of all supported white space types. Note that empty strings are also covered in both cases.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#isWhitespace-int-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#allMatch-java.util.function.IntPredicate-","title":"How do I check that a Java String is not all whitespaces?","body":"<p>If you are using <strong>Java 11</strong> or more recent, the new <code>isBlank</code> string method will come in handy:</p>\n<pre><code>!s.isBlank();\n</code></pre>\n<p>If you are using <strong>Java 8, 9 or 10</strong>, you could build a simple stream to check that a string is not whitespace only:</p>\n<pre><code>!s.chars().allMatch(Character::isWhitespace));\n</code></pre>\n<p>In addition to not requiring any third-party libraries such as Apache Commons Lang, these solutions have the advantage of handling any white space character, and not just plain <code>' '</code> spaces as would a <code>trim</code>-based solution suggested in many other answers. You can refer to the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#isWhitespace-int-\" rel=\"nofollow noreferrer\">Javadocs</a> for an exhaustive list of all supported white space types. Note that empty strings are also covered in both cases.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1586586590,"creation_date":1527793210,"answer_id":50631090,"question_id":3247067,"body_markdown":"With Java-11+, you can make use of the **`String.isBlank`** API to check if the given string is not all made up of whitespace - \r\n\r\n    String str1 = &quot;    &quot;;\r\n    System.out.println(str1.isBlank()); // made up of all whitespaces, prints true\r\n\r\n    String str2 = &quot;    a&quot;;\r\n    System.out.println(str2.isBlank()); // prints false\r\n\r\nThe javadoc for the same is :\r\n\r\n    /**\r\n     * Returns {@code true} if the string is empty or contains only\r\n     * {@link Character#isWhitespace(int) white space} codepoints,\r\n     * otherwise {@code false}.\r\n     *\r\n     * @return {@code true} if the string is empty or contains only\r\n     *         {@link Character#isWhitespace(int) white space} codepoints,\r\n     *         otherwise {@code false}\r\n     *\r\n     * @since 11\r\n     */\r\n    public boolean isBlank()","title":"How do I check that a Java String is not all whitespaces?","body":"<p>With Java-11+, you can make use of the <strong><code>String.isBlank</code></strong> API to check if the given string is not all made up of whitespace - </p>\n\n<pre><code>String str1 = \"    \";\nSystem.out.println(str1.isBlank()); // made up of all whitespaces, prints true\n\nString str2 = \"    a\";\nSystem.out.println(str2.isBlank()); // prints false\n</code></pre>\n\n<p>The javadoc for the same is :</p>\n\n<pre><code>/**\n * Returns {@code true} if the string is empty or contains only\n * {@link Character#isWhitespace(int) white space} codepoints,\n * otherwise {@code false}.\n *\n * @return {@code true} if the string is empty or contains only\n *         {@link Character#isWhitespace(int) white space} codepoints,\n *         otherwise {@code false}\n *\n * @since 11\n */\npublic boolean isBlank()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1545638367,"post_id":53910166,"comment_id":94665490,"body_markdown":"Is this from a library? Link to the project. Or built into Java? Indicate the package.","body":"Is this from a library? Link to the project. Or built into Java? Indicate the package."},{"owner":{"account_id":8530266,"reputation":112,"user_id":6394220,"display_name":"ahmet_y"},"score":0,"creation_date":1545643890,"post_id":53910166,"comment_id":94667064,"body_markdown":"@BasilBourque i think this is com.mysql.jdbc.StringUtils.isEmptyOrWhitespaceOnly","body":"@BasilBourque i think this is com.mysql.jdbc.StringUtils.isEmptyOrWhitespaceOnly"}],"tags":[],"owner":{"account_id":8432846,"reputation":61,"user_id":6327952,"display_name":"akakargul"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545644263,"creation_date":1545634563,"answer_id":53910166,"question_id":3247067,"body_markdown":"    StringUtils.isEmptyOrWhitespaceOnly(&lt;your string&gt;)\r\n\r\nwill check :\r\n - is it null\r\n - is it only space\r\n - is it empty string &quot;&quot;\r\n\r\nhttps://www.programcreek.com/java-api-examples/?class=com.mysql.jdbc.StringUtils&amp;method=isEmptyOrWhitespaceOnly","title":"How do I check that a Java String is not all whitespaces?","body":"<pre><code>StringUtils.isEmptyOrWhitespaceOnly(&lt;your string&gt;)\n</code></pre>\n\n<p>will check :\n - is it null\n - is it only space\n - is it empty string \"\"</p>\n\n<p><a href=\"https://www.programcreek.com/java-api-examples/?class=com.mysql.jdbc.StringUtils&amp;method=isEmptyOrWhitespaceOnly\" rel=\"nofollow noreferrer\">https://www.programcreek.com/java-api-examples/?class=com.mysql.jdbc.StringUtils&amp;method=isEmptyOrWhitespaceOnly</a></p>\n"},{"tags":[],"owner":{"account_id":4691848,"reputation":158,"user_id":3797793,"display_name":"martlin"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1589374632,"creation_date":1589374206,"answer_id":61775129,"question_id":3247067,"body_markdown":"Just an performance comparement on openjdk 13, Windows 10. For each of theese texts:\r\n\r\n    &quot;abcd&quot;\r\n\t&quot;    &quot;\r\n\t&quot; \\r\\n\\t&quot;\r\n\t&quot; ab &quot;\r\n\t&quot; \\n\\n\\r\\t   \\n\\r\\t\\t\\t   \\r\\n\\r\\n\\r\\t \\t\\t\\t\\r\\n\\n&quot;\r\n\t&quot;lorem ipsum dolor sit amet  consectetur adipisici elit&quot;\r\n\t&quot;1234657891234567891324569871234567891326987132654798&quot;\r\n\r\nexecuted one of following tests:\r\n\r\n    // trim + empty\r\n    input.trim().isEmpty()\r\n    \r\n    // simple match\r\n    input.matches(&quot;\\\\S&quot;)\r\n    \r\n    // match with precompiled pattern\r\n    final Pattern PATTERN = Pattern.compile(&quot;\\\\S&quot;);\r\n    PATTERN.matcher(input).matches()\r\n    \r\n    // java 11&#39;s isBlank\r\n    input.isBlank()\r\n\r\neach 10.000.000 times.\r\n\r\nThe results:\r\n\r\n    METHOD    min   max   note\r\n    trim:      18   313   much slower if text not trimmed\r\n    match:   1799  2010   \r\n    pattern:  571   662   \r\n    isBlank:   60   338   faster the earlier hits the first non-whitespace character\r\n\r\n\r\nQuite surprisingly the trim+empty is the fastest. Even if it needs to construct the trimmed text. Still faster then simple for-loop looking for one single non-whitespaced character...\r\n\r\n**EDIT:**\r\nThe longer text, the more numbers differs. Trim of long text takes longer time than just simple loop. However, the regexs are still the slowest solution.","title":"How do I check that a Java String is not all whitespaces?","body":"<p>Just an performance comparement on openjdk 13, Windows 10. For each of theese texts:</p>\n\n<pre><code>\"abcd\"\n\"    \"\n\" \\r\\n\\t\"\n\" ab \"\n\" \\n\\n\\r\\t   \\n\\r\\t\\t\\t   \\r\\n\\r\\n\\r\\t \\t\\t\\t\\r\\n\\n\"\n\"lorem ipsum dolor sit amet  consectetur adipisici elit\"\n\"1234657891234567891324569871234567891326987132654798\"\n</code></pre>\n\n<p>executed one of following tests:</p>\n\n<pre><code>// trim + empty\ninput.trim().isEmpty()\n\n// simple match\ninput.matches(\"\\\\S\")\n\n// match with precompiled pattern\nfinal Pattern PATTERN = Pattern.compile(\"\\\\S\");\nPATTERN.matcher(input).matches()\n\n// java 11's isBlank\ninput.isBlank()\n</code></pre>\n\n<p>each 10.000.000 times.</p>\n\n<p>The results:</p>\n\n<pre><code>METHOD    min   max   note\ntrim:      18   313   much slower if text not trimmed\nmatch:   1799  2010   \npattern:  571   662   \nisBlank:   60   338   faster the earlier hits the first non-whitespace character\n</code></pre>\n\n<p>Quite surprisingly the trim+empty is the fastest. Even if it needs to construct the trimmed text. Still faster then simple for-loop looking for one single non-whitespaced character...</p>\n\n<p><strong>EDIT:</strong>\nThe longer text, the more numbers differs. Trim of long text takes longer time than just simple loop. However, the regexs are still the slowest solution.</p>\n"},{"tags":[],"owner":{"account_id":7072149,"reputation":91,"user_id":5413405,"display_name":"fozzybear"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594213515,"creation_date":1594213515,"answer_id":62795496,"question_id":3247067,"body_markdown":"While personally I would be preferring `!str.isBlank()`, as others already suggested (or `str -&gt; !str.isBlank()` as a Predicate), a more modern and efficient version of the `str.trim()` approach mentioned above, would be using `str.strip()` - considering **nulls** as &quot;whitespace&quot;:\r\n```\r\nif (str != null &amp;&amp; str.strip().length() &gt; 0) {...}\r\n```\r\nFor example as Predicate, for use with streams, e. g. in a unit test:\r\n```\r\n@Test\r\npublic void anyNonEmptyStrippedTest() {\r\n    String[] strings = null;\r\n    Predicate&lt;String&gt; isNonEmptyStripped = str -&gt; str != null &amp;&amp; str.strip().length() &gt; 0;\r\n    assertTrue(Optional.ofNullable(strings).map(arr -&gt; Stream.of(arr).noneMatch(isNonEmptyStripped)).orElse(true));\r\n    strings = new String[] { null, &quot;&quot;, &quot; &quot;, &quot;\\\\n&quot;, &quot;\\\\t&quot;, &quot;\\\\r&quot; };\r\n    assertTrue(Optional.ofNullable(strings).map(arr -&gt; Stream.of(arr).anyMatch(isNonEmptyStripped)).orElse(true));\r\n    strings = new String[] { null, &quot;&quot;, &quot; &quot;, &quot;\\\\n&quot;, &quot;\\\\t&quot;, &quot;\\\\r&quot;, &quot;test&quot; };\r\n}\r\n```","title":"How do I check that a Java String is not all whitespaces?","body":"<p>While personally I would be preferring <code>!str.isBlank()</code>, as others already suggested (or <code>str -&gt; !str.isBlank()</code> as a Predicate), a more modern and efficient version of the <code>str.trim()</code> approach mentioned above, would be using <code>str.strip()</code> - considering <strong>nulls</strong> as &quot;whitespace&quot;:</p>\n<pre><code>if (str != null &amp;&amp; str.strip().length() &gt; 0) {...}\n</code></pre>\n<p>For example as Predicate, for use with streams, e. g. in a unit test:</p>\n<pre><code>@Test\npublic void anyNonEmptyStrippedTest() {\n    String[] strings = null;\n    Predicate&lt;String&gt; isNonEmptyStripped = str -&gt; str != null &amp;&amp; str.strip().length() &gt; 0;\n    assertTrue(Optional.ofNullable(strings).map(arr -&gt; Stream.of(arr).noneMatch(isNonEmptyStripped)).orElse(true));\n    strings = new String[] { null, &quot;&quot;, &quot; &quot;, &quot;\\\\n&quot;, &quot;\\\\t&quot;, &quot;\\\\r&quot; };\n    assertTrue(Optional.ofNullable(strings).map(arr -&gt; Stream.of(arr).anyMatch(isNonEmptyStripped)).orElse(true));\n    strings = new String[] { null, &quot;&quot;, &quot; &quot;, &quot;\\\\n&quot;, &quot;\\\\t&quot;, &quot;\\\\r&quot;, &quot;test&quot; };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4930150,"reputation":1059,"user_id":3970199,"display_name":"Muhammad Zahab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614076695,"creation_date":1614076695,"answer_id":66331509,"question_id":3247067,"body_markdown":"    public static boolean isStringBlank(final CharSequence cs) {\r\n            int strLen;\r\n            if (cs == null || (strLen = cs.length()) == 0) {\r\n                return true;\r\n            }\r\n            for (int i = 0; i &lt; strLen; i++) {\r\n                if (!Character.isWhitespace(cs.charAt(i))) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }","title":"How do I check that a Java String is not all whitespaces?","body":"<pre><code>public static boolean isStringBlank(final CharSequence cs) {\n        int strLen;\n        if (cs == null || (strLen = cs.length()) == 0) {\n            return true;\n        }\n        for (int i = 0; i &lt; strLen; i++) {\n            if (!Character.isWhitespace(cs.charAt(i))) {\n                return false;\n            }\n        }\n        return true;\n    }\n</code></pre>\n"}],"owner":{"account_id":26725,"reputation":50482,"user_id":69803,"accept_rate":65,"display_name":"Ankur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209023,"favorite_count":0,"down_vote_count":0,"up_vote_count":155,"accepted_answer_id":3247081,"answer_count":16,"score":155,"last_activity_date":1689082118,"creation_date":1279117401,"question_id":3247067,"body_markdown":"I want to check that Java String or character array is not just made up of whitespaces, using Java?\r\n\r\nThis is a very similar question except it&#39;s Javascript: &lt;br&gt;\r\n&lt;a href=&quot;https://stackoverflow.com/questions/2031085/check-if-string-contains-characters-whitespaces-not-only-whitespaces&quot;&gt;https://stackoverflow.com/questions/2031085/check-if-string-contains-characters-whitespaces-not-only-whitespaces&lt;/a&gt;\r\n\r\n***EDIT***: I removed the bit about alphanumeric characters, so it makes more sense.","title":"How do I check that a Java String is not all whitespaces?","body":"<p>I want to check that Java String or character array is not just made up of whitespaces, using Java?</p>\n\n<p>This is a very similar question except it's Javascript: <br>\n<a href=\"https://stackoverflow.com/questions/2031085/check-if-string-contains-characters-whitespaces-not-only-whitespaces\"><a href=\"https://stackoverflow.com/questions/2031085/check-if-string-contains-characters-whitespaces-not-only-whitespaces\">How can I check if string contains characters &amp; whitespace, not just whitespace?</a></a></p>\n\n<p><strong><em>EDIT</em></strong>: I removed the bit about alphanumeric characters, so it makes more sense.</p>\n"},{"tags":["java","android","android-studio","gradle","android-gradle-plugin"],"owner":{"account_id":24107405,"reputation":161,"user_id":18078409,"display_name":"Kalindu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689081378,"creation_date":1689081378,"question_id":76662386,"body_markdown":"I cannot see any modules for my android app in the runtime configurations of Android studio. I am not sure if this a gradle error either. This is my build.gradle file:\r\n\r\n    // Top-level build file where you can add configuration options common to all sub- \r\n    projects/modules.\r\n    buildscript {\r\n       repositories {\r\n          google()\r\n    }\r\n    dependencies {\r\n        def nav_version = &quot;2.5.1&quot;\r\n        classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;\r\n     }\r\n\r\n    }\r\n\r\n\r\n    plugins {\r\n       id &#39;com.android.application&#39; version &#39;7.2.2&#39; apply false\r\n       id &#39;com.android.library&#39; version &#39;7.2.2&#39; apply false\r\n    }\r\n\r\n    task clean(type: Delete) {\r\n       delete rootProject.buildDir\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ys2Z1.png\r\n\r\nAlso, the java files icons are red too. How can I fix this? Please help, many thanks!","title":"Android studio Android app runtime configuration module not shown","body":"<p>I cannot see any modules for my android app in the runtime configurations of Android studio. I am not sure if this a gradle error either. This is my build.gradle file:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub- \nprojects/modules.\nbuildscript {\n   repositories {\n      google()\n}\ndependencies {\n    def nav_version = &quot;2.5.1&quot;\n    classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;\n }\n\n}\n\n\nplugins {\n   id 'com.android.application' version '7.2.2' apply false\n   id 'com.android.library' version '7.2.2' apply false\n}\n\ntask clean(type: Delete) {\n   delete rootProject.buildDir\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Ys2Z1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ys2Z1.png\" alt=\"enter image description here\" /></a></p>\n<p>Also, the java files icons are red too. How can I fix this? Please help, many thanks!</p>\n"},{"tags":["java","forms","struts-1"],"owner":{"account_id":26018656,"reputation":1,"user_id":19726714,"display_name":"Sander T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689081202,"creation_date":1689080587,"question_id":76662278,"body_markdown":"I want to populate a list of DTO&#39;s inside a list of DTO&#39;s with struts 1.\r\n\r\nFor some reason the children of the parents get lost when the form is returned to the backend.\r\n\r\nI&#39;ve struggled with Struts 1, &lt;html:options, &lt;html:optionsCollection and even &lt;nested: tags but no avail (yet).\r\n\r\nCan anyone help me out?\r\n\r\nThe options in the c:forEach get rendered properly but as soon as the form is submitted the parents don&#39;t have children anymore.\r\n\r\n\r\n\t&lt;logic:iterate id=&quot;parent&quot; property=&quot;listOfParents&quot;\r\n\t\t\t\t   name=&quot;myForm&quot; indexId=&quot;index&quot;\r\n\t\t\t\t   type=&quot;my.package.SomeDTO&quot;&gt;\r\n\r\n...\r\n\r\n\t&lt;html:select name=&quot;myForm&quot;\r\n\t\t\t\t property=&quot;selected[${index}]&quot;\r\n\t\t\t\t styleClass=&quot;form-control&quot;&gt;\r\n\t\t&lt;html:option value=&quot;null&quot; key=&quot;label.select&quot;/&gt;\r\n\t\t&lt;c:forEach var=&quot;item&quot; items=&quot;${parent.children}&quot;&gt;\r\n\t\t\t&lt;html:option\r\n\t\t\t\t\tvalue=&quot;${item.id}&quot;&gt;${item.label}&lt;/html:option&gt;\r\n\t\t&lt;/c:forEach&gt;\r\n\t&lt;/html:select&gt;\r\n\r\n...\r\n\r\n\t&lt;/logic:iterate&gt;\r\n\r\n(This happens in this code:)\r\n\r\n    public ActionForward someBusinessLogic(final ActionMapping mapping, final ActionForm form, final HttpServletRequest request,\r\n                                               final HttpServletResponse response) {\r\n\r\n        final MyForm myForm  = (MyForm) form; // --&gt; here the children are gone :(\r\n","title":"Form not returning data after reload in Struts 1","body":"<p>I want to populate a list of DTO's inside a list of DTO's with struts 1.</p>\n<p>For some reason the children of the parents get lost when the form is returned to the backend.</p>\n<p>I've struggled with Struts 1, &lt;html:options, &lt;html:optionsCollection and even &lt;nested: tags but no avail (yet).</p>\n<p>Can anyone help me out?</p>\n<p>The options in the c:forEach get rendered properly but as soon as the form is submitted the parents don't have children anymore.</p>\n<pre><code>&lt;logic:iterate id=&quot;parent&quot; property=&quot;listOfParents&quot;\n               name=&quot;myForm&quot; indexId=&quot;index&quot;\n               type=&quot;my.package.SomeDTO&quot;&gt;\n</code></pre>\n<p>...</p>\n<pre><code>&lt;html:select name=&quot;myForm&quot;\n             property=&quot;selected[${index}]&quot;\n             styleClass=&quot;form-control&quot;&gt;\n    &lt;html:option value=&quot;null&quot; key=&quot;label.select&quot;/&gt;\n    &lt;c:forEach var=&quot;item&quot; items=&quot;${parent.children}&quot;&gt;\n        &lt;html:option\n                value=&quot;${item.id}&quot;&gt;${item.label}&lt;/html:option&gt;\n    &lt;/c:forEach&gt;\n&lt;/html:select&gt;\n</code></pre>\n<p>...</p>\n<pre><code>&lt;/logic:iterate&gt;\n</code></pre>\n<p>(This happens in this code:)</p>\n<pre><code>public ActionForward someBusinessLogic(final ActionMapping mapping, final ActionForm form, final HttpServletRequest request,\n                                           final HttpServletResponse response) {\n\n    final MyForm myForm  = (MyForm) form; // --&gt; here the children are gone :(\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1508536,"reputation":7183,"user_id":1411277,"display_name":"HeatfanJohn"},"score":0,"creation_date":1367593354,"post_id":16361939,"comment_id":23442951,"body_markdown":"Please post your layout so we can give you specific guidance","body":"Please post your layout so we can give you specific guidance"},{"owner":{"account_id":2590710,"reputation":404,"user_id":2245482,"accept_rate":25,"display_name":"Basheer"},"score":0,"creation_date":1367596349,"post_id":16361939,"comment_id":23444715,"body_markdown":"thank you for replay. Update my layout and shape xml.","body":"thank you for replay. Update my layout and shape xml."},{"owner":{"account_id":1508536,"reputation":7183,"user_id":1411277,"display_name":"HeatfanJohn"},"score":0,"creation_date":1367597575,"post_id":16361939,"comment_id":23445325,"body_markdown":"What are you using for the camera, a SurfaceView?  My testing shows that the border doesn&#39;t get applied to the SurfaceView.","body":"What are you using for the camera, a SurfaceView?  My testing shows that the border doesn&#39;t get applied to the SurfaceView."}],"answers":[{"comments":[{"owner":{"account_id":2590710,"reputation":404,"user_id":2245482,"accept_rate":25,"display_name":"Basheer"},"score":0,"creation_date":1367594085,"post_id":16362038,"comment_id":23443424,"body_markdown":"Thank you for replay Already i have try this.but camera recorded area show in rectangle","body":"Thank you for replay Already i have try this.but camera recorded area show in rectangle"},{"owner":{"account_id":1508536,"reputation":7183,"user_id":1411277,"display_name":"HeatfanJohn"},"score":0,"creation_date":1367594144,"post_id":16362038,"comment_id":23443458,"body_markdown":"Again, please post part or all of your layout so we can try to replicate your problem.","body":"Again, please post part or all of your layout so we can try to replicate your problem."}],"tags":[],"owner":{"account_id":1508536,"reputation":7183,"user_id":1411277,"display_name":"HeatfanJohn"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1367606402,"creation_date":1367593447,"answer_id":16362038,"question_id":16361939,"body_markdown":"Check out this tutorial on how to create an Android shape and apply that shape to your layout: \r\nhttp://www.vogella.com/blog/2011/07/19/android-shapes/\r\n\r\nSpecifically you use the `&lt;corners&gt;` attribute of the `&lt;shape&gt;` to create rounded corners, see example below from the above referenced tutorial:\r\n\r\n    &lt;corners \r\n        android:bottomRightRadius=&quot;7dp&quot;\r\n        android:bottomLeftRadius=&quot;7dp&quot; \r\n        android:topLeftRadius=&quot;7dp&quot; \r\n        android:topRightRadius=&quot;7dp&quot;\r\n    /&gt;\r\n    \r\n&lt;br&gt;    \r\n**UPDATE 2 - This worked for me:**\r\n\r\n**drawable-hdpi/rounded.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:shape=&quot;rectangle&quot;&gt; \r\n\r\n        &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#FFFFFFFF&quot; /&gt;\r\n \r\n        &lt;corners \r\n            android:bottomRightRadius=&quot;7dp&quot; \r\n            android:bottomLeftRadius=&quot;7dp&quot; \r\n            android:topLeftRadius=&quot;7dp&quot; \r\n            android:topRightRadius=&quot;7dp&quot;/&gt; \r\n     \t\r\n        &lt;solid android:color=&quot;#00000000&quot; /&gt;\r\n    \r\n    &lt;/shape&gt;\r\n\r\n**drawable-hdpi/solid.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:shape=&quot;rectangle&quot;&gt; \r\n    \r\n        &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#FFFFFFFF&quot; /&gt;\r\n         \t\r\n        &lt;solid android:color=&quot;#00000000&quot; /&gt;\r\n       \r\n    &lt;/shape&gt;\r\n\r\n**drawable-hdpi/rounded_inside_corners.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\r\n        \r\n    \t&lt;item android:drawable=&quot;@drawable/rounded&quot; /&gt;\r\n    \t&lt;item android:drawable=&quot;@drawable/solid&quot; /&gt; \r\n    \r\n    &lt;/layer-list&gt;\r\n\r\n&lt;br&gt;\r\nThen in my activity layout:\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot;\r\n        android:background=&quot;@drawable/my_shape&quot;\r\n        tools:context=&quot;.CameraActivity&quot; &gt;\r\n     \r\n        &lt;SurfaceView\r\n            android:id=&quot;@+id/surfaceView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:background=&quot;@drawable/rounded_inside_corners&quot;\r\n            android:layout_above=&quot;@+id/linearLayout1&quot; /&gt;\r\n    \r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/linearLayout1&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_alignParentLeft=&quot;true&quot;\r\n            android:orientation=&quot;horizontal&quot; &gt;\r\n  \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonTakePicture&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;50dp&quot;\r\n                android:layout_gravity=&quot;center_horizontal&quot;\r\n                android:background=&quot;@drawable/camera_click_256&quot;\r\n                android:gravity=&quot;center_horizontal&quot; /&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n    \r\n&lt;br&gt;\r\nWhich results in:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/LFPLn.png","title":"How to set the surface view camera background with corner","body":"<p>Check out this tutorial on how to create an Android shape and apply that shape to your layout: \n<a href=\"http://www.vogella.com/blog/2011/07/19/android-shapes/\" rel=\"nofollow noreferrer\">http://www.vogella.com/blog/2011/07/19/android-shapes/</a></p>\n\n<p>Specifically you use the <code>&lt;corners&gt;</code> attribute of the <code>&lt;shape&gt;</code> to create rounded corners, see example below from the above referenced tutorial:</p>\n\n<pre><code>&lt;corners \n    android:bottomRightRadius=\"7dp\"\n    android:bottomLeftRadius=\"7dp\" \n    android:topLeftRadius=\"7dp\" \n    android:topRightRadius=\"7dp\"\n/&gt;\n</code></pre>\n\n<p><br><br>\n<strong>UPDATE 2 - This worked for me:</strong></p>\n\n<p><strong>drawable-hdpi/rounded.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"rectangle\"&gt; \n\n    &lt;stroke android:width=\"2dp\" android:color=\"#FFFFFFFF\" /&gt;\n\n    &lt;corners \n        android:bottomRightRadius=\"7dp\" \n        android:bottomLeftRadius=\"7dp\" \n        android:topLeftRadius=\"7dp\" \n        android:topRightRadius=\"7dp\"/&gt; \n\n    &lt;solid android:color=\"#00000000\" /&gt;\n\n&lt;/shape&gt;\n</code></pre>\n\n<p><strong>drawable-hdpi/solid.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"rectangle\"&gt; \n\n    &lt;stroke android:width=\"2dp\" android:color=\"#FFFFFFFF\" /&gt;\n\n    &lt;solid android:color=\"#00000000\" /&gt;\n\n&lt;/shape&gt;\n</code></pre>\n\n<p><strong>drawable-hdpi/rounded_inside_corners.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" &gt;\n\n    &lt;item android:drawable=\"@drawable/rounded\" /&gt;\n    &lt;item android:drawable=\"@drawable/solid\" /&gt; \n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p><br>\nThen in my activity layout:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"fill_parent\"\n    android:background=\"@drawable/my_shape\"\n    tools:context=\".CameraActivity\" &gt;\n\n    &lt;SurfaceView\n        android:id=\"@+id/surfaceView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@drawable/rounded_inside_corners\"\n        android:layout_above=\"@+id/linearLayout1\" /&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/linearLayout1\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:layout_alignParentLeft=\"true\"\n        android:orientation=\"horizontal\" &gt;\n\n        &lt;Button\n            android:id=\"@+id/buttonTakePicture\"\n            android:layout_width=\"50dp\"\n            android:layout_height=\"50dp\"\n            android:layout_gravity=\"center_horizontal\"\n            android:background=\"@drawable/camera_click_256\"\n            android:gravity=\"center_horizontal\" /&gt;\n    &lt;/FrameLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><br>\nWhich results in:</p>\n\n<p><img src=\"https://i.stack.imgur.com/LFPLn.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":961018,"reputation":4610,"user_id":985369,"accept_rate":25,"display_name":"itsrajesh4uguys"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367594279,"creation_date":1367594279,"answer_id":16362308,"question_id":16361939,"body_markdown":"Hi have a look at this code. \r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;corners android:radius=&quot;15dip&quot; /&gt;\r\n                &lt;solid android:color=&quot;#404f64&quot; /&gt;\r\n                &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#bebfc1&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\nset this as like below in your surface view.\r\n\r\n    android:background=&quot;@layout/rounded&quot;","title":"How to set the surface view camera background with corner","body":"<p>Hi have a look at this code. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;corners android:radius=\"15dip\" /&gt;\n            &lt;solid android:color=\"#404f64\" /&gt;\n            &lt;stroke android:width=\"2dp\" android:color=\"#bebfc1\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>set this as like below in your surface view.</p>\n\n<pre><code>android:background=\"@layout/rounded\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1680800359,"post_id":57839948,"comment_id":133962652,"body_markdown":"how to round only one corner, I tried `ShapeAppearanceOverlay_card_custom_corners` as style for `MaterialView` but it doesn&#39;t work","body":"how to round only one corner, I tried <code>ShapeAppearanceOverlay_card_custom_corners</code> as style for <code>MaterialView</code> but it doesn&#39;t work"}],"tags":[],"owner":{"account_id":11499040,"reputation":158,"user_id":11130032,"display_name":"Alireza Haji gholamreza"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567927614,"creation_date":1567927614,"answer_id":57839948,"question_id":16361939,"body_markdown":"After more search i try to write code with cardView it worked for me .\r\n\r\nAdd dependencies :\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.0.0&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n\r\nAdd code to xml : \r\n\r\n     &lt;androidx.cardview.widget.CardView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;270dp&quot;\r\n                app:cardCornerRadius=&quot;10dp&quot;\r\n                app:cardPreventCornerOverlap=&quot;false&quot;&gt;\r\n\r\n                &lt;SurfaceView\r\n                    android:id=&quot;@+id/camera_view&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot; /&gt;\r\n            &lt;/androidx.cardview.widget.CardView&gt;","title":"How to set the surface view camera background with corner","body":"<p>After more search i try to write code with cardView it worked for me .</p>\n\n<p>Add dependencies :</p>\n\n<pre><code>implementation 'androidx.appcompat:appcompat:1.0.0'\nimplementation 'androidx.cardview:cardview:1.0.0'\n</code></pre>\n\n<p>Add code to xml : </p>\n\n<pre><code> &lt;androidx.cardview.widget.CardView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"270dp\"\n            app:cardCornerRadius=\"10dp\"\n            app:cardPreventCornerOverlap=\"false\"&gt;\n\n            &lt;SurfaceView\n                android:id=\"@+id/camera_view\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\" /&gt;\n        &lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689267616,"post_id":76662347,"comment_id":135192916,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76662347/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27318247,"reputation":1,"user_id":20832418,"display_name":"Mohith_karthikeya"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689081089,"creation_date":1689081089,"answer_id":76662347,"question_id":16361939,"body_markdown":"Do this in your layout xml file and it worked for me \r\n\r\n    &lt;androidx.cardview.widget.CardView\r\n        android:id=&quot;@+id/cameraborder&quot;\r\n        android:layout_width=&quot;350dp&quot;\r\n        android:layout_height=&quot;480dp&quot;\r\n        app:cardCornerRadius=&quot;50dp&quot;\r\n        app:cardBackgroundColor=&quot;@android:color/transparent&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.4&quot;\r\n        tools:ignore=&quot;MissingConstraints&quot; &gt;\r\n\r\n        &lt;androidx.camera.view.PreviewView\r\n            android:id=&quot;@+id/viewFinder&quot;\r\n            style=&quot;@style/Rounded&quot;\r\n            android:layout_width=&quot;350dp&quot;\r\n            android:layout_height=&quot;480dp&quot;\r\n            tools:ignore=&quot;MissingConstraints,UnknownId,VisualLintBounds&quot;&gt;\r\n\r\n        &lt;/androidx.camera.view.PreviewView&gt;\r\n    &lt;/androidx.cardview.widget.CardView&gt;","title":"How to set the surface view camera background with corner","body":"<p>Do this in your layout xml file and it worked for me</p>\n<pre><code>&lt;androidx.cardview.widget.CardView\n    android:id=&quot;@+id/cameraborder&quot;\n    android:layout_width=&quot;350dp&quot;\n    android:layout_height=&quot;480dp&quot;\n    app:cardCornerRadius=&quot;50dp&quot;\n    app:cardBackgroundColor=&quot;@android:color/transparent&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.4&quot;\n    tools:ignore=&quot;MissingConstraints&quot; &gt;\n\n    &lt;androidx.camera.view.PreviewView\n        android:id=&quot;@+id/viewFinder&quot;\n        style=&quot;@style/Rounded&quot;\n        android:layout_width=&quot;350dp&quot;\n        android:layout_height=&quot;480dp&quot;\n        tools:ignore=&quot;MissingConstraints,UnknownId,VisualLintBounds&quot;&gt;\n\n    &lt;/androidx.camera.view.PreviewView&gt;\n&lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n"}],"owner":{"account_id":2590710,"reputation":404,"user_id":2245482,"accept_rate":25,"display_name":"Basheer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7167,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1689081089,"creation_date":1367593166,"question_id":16361939,"body_markdown":"My app uses a camera surface view layout with a size of 150 X 150.  I need to show the surface corner is arc type. how to set the corner in camera.\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/recordView&quot;\r\n        android:layout_width=&quot;100dp&quot;\r\n        android:layout_height=&quot;150dp&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_alignParentRight=&quot;true&quot;\r\n        android:layout_marginBottom=&quot;50dp&quot;\r\n        android:layout_marginRight=&quot;25dp&quot; \r\n        android:background=&quot;@drawable/customshape&quot;&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\ncustomshape:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; \r\n     android:shape=&quot;rectangle&quot;&gt; \r\n     &lt;gradient android:startColor=&quot;#FFFFFF&quot; android:endColor=&quot;#FFFFFF&quot;         android:angle=&quot;270&quot;/&gt; \r\n\r\n    &lt;corners android:bottomRightRadius=&quot;50dp&quot; android:bottomLeftRadius=&quot;50dp&quot; \r\n     android:topLeftRadius=&quot;50dp&quot; android:topRightRadius=&quot;50dp&quot;/&gt; \r\n&lt;/shape&gt; \r\n\r\nthis layout add the camera activity but record start show the rectangle view","title":"How to set the surface view camera background with corner","body":"<p>My app uses a camera surface view layout with a size of 150 X 150.  I need to show the surface corner is arc type. how to set the corner in camera.</p>\n\n<pre><code>&lt;LinearLayout\n    android:id=\"@+id/recordView\"\n    android:layout_width=\"100dp\"\n    android:layout_height=\"150dp\"\n    android:layout_alignParentBottom=\"true\"\n    android:layout_alignParentRight=\"true\"\n    android:layout_marginBottom=\"50dp\"\n    android:layout_marginRight=\"25dp\" \n    android:background=\"@drawable/customshape\"&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>customshape:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\" \n android:shape=\"rectangle\"&gt; \n &lt;gradient android:startColor=\"#FFFFFF\" android:endColor=\"#FFFFFF\"         android:angle=\"270\"/&gt; \n\n&lt;corners android:bottomRightRadius=\"50dp\" android:bottomLeftRadius=\"50dp\" \n android:topLeftRadius=\"50dp\" android:topRightRadius=\"50dp\"/&gt; \n</code></pre>\n\n<p> </p>\n\n<p>this layout add the camera activity but record start show the rectangle view</p>\n"},{"tags":["java","spring-boot","service","controller"],"owner":{"account_id":25412681,"reputation":11,"user_id":19220200,"display_name":"AYuan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689080865,"creation_date":1689080865,"question_id":76662318,"body_markdown":"I am a newer in Java and SpringBoot. I&#39;m currently developing a simple Spring Boot project， and I used the controller-service-dao as my backend logic. So, what is the recommended way to pass values from controller to service? And the elegant to get service return value?\r\n\r\none of my controller method below :\r\n```\r\n@GetMapping(&quot;/getAllFunctionTables&quot;)\r\npublic Result&lt;Object&gt; getAllFunctionTables(@RequestParam String projectKey) {\r\n        try {\r\n            int projectId = CommonUtils.extractNumber(projectKey);\r\n            List&lt;Map&lt;String, String&gt;&gt; results = functionService.getAllFunctionTables(projectId);\r\n            return Result.ok(results, &quot;Get Functon Table&quot;);\r\n        } catch (Exception exception) {\r\n            exception.printStackTrace();\r\n        }\r\n        return Result.fail(&quot;Error, No Function Table&quot;);\r\n    }\r\n```\r\nand the service is:\r\n(use mybatis-plus to manipulate databases)\r\n\r\n```\r\npublic List&lt;Map&lt;String, String&gt;&gt; getAllFunctionTables(Integer projectId) {\r\n        QueryWrapper&lt;FunctionTable&gt; queryWrapper = new QueryWrapper&lt;&gt;();\r\n        queryWrapper.eq(&quot;project_id&quot;, projectId);\r\n        // get function tables \r\n        List&lt;FunctionTable&gt; functionTables = functionTableMapper.selectList(queryWrapper);\r\n        List&lt;Map&lt;String, String&gt;&gt; results = new ArrayList&lt;&gt;();\r\n\r\n        functionTables.forEach(functionTable -&gt; {\r\n            Map&lt;String, String&gt; temp = new HashMap&lt;&gt;();\r\n            temp.put(&quot;tableKey&quot;, String.valueOf(functionTable.getId()));\r\n            temp.put(&quot;name&quot;, functionTable.getName());\r\n            results.add(temp);\r\n        });\r\n\r\n        return results;\r\n    }\r\n```\r\nI don&#39;t think this is a good way to maintain and extend code, but I don&#39;t know how to optimise that. Any recommendations are good. Thanks!\r\n\r\n","title":"how to elegant pass value from controller to service and get value from service in springboot","body":"<p>I am a newer in Java and SpringBoot. I'm currently developing a simple Spring Boot project， and I used the controller-service-dao as my backend logic. So, what is the recommended way to pass values from controller to service? And the elegant to get service return value?</p>\n<p>one of my controller method below :</p>\n<pre><code>@GetMapping(&quot;/getAllFunctionTables&quot;)\npublic Result&lt;Object&gt; getAllFunctionTables(@RequestParam String projectKey) {\n        try {\n            int projectId = CommonUtils.extractNumber(projectKey);\n            List&lt;Map&lt;String, String&gt;&gt; results = functionService.getAllFunctionTables(projectId);\n            return Result.ok(results, &quot;Get Functon Table&quot;);\n        } catch (Exception exception) {\n            exception.printStackTrace();\n        }\n        return Result.fail(&quot;Error, No Function Table&quot;);\n    }\n</code></pre>\n<p>and the service is:\n(use mybatis-plus to manipulate databases)</p>\n<pre><code>public List&lt;Map&lt;String, String&gt;&gt; getAllFunctionTables(Integer projectId) {\n        QueryWrapper&lt;FunctionTable&gt; queryWrapper = new QueryWrapper&lt;&gt;();\n        queryWrapper.eq(&quot;project_id&quot;, projectId);\n        // get function tables \n        List&lt;FunctionTable&gt; functionTables = functionTableMapper.selectList(queryWrapper);\n        List&lt;Map&lt;String, String&gt;&gt; results = new ArrayList&lt;&gt;();\n\n        functionTables.forEach(functionTable -&gt; {\n            Map&lt;String, String&gt; temp = new HashMap&lt;&gt;();\n            temp.put(&quot;tableKey&quot;, String.valueOf(functionTable.getId()));\n            temp.put(&quot;name&quot;, functionTable.getName());\n            results.add(temp);\n        });\n\n        return results;\n    }\n</code></pre>\n<p>I don't think this is a good way to maintain and extend code, but I don't know how to optimise that. Any recommendations are good. Thanks!</p>\n"},{"tags":["java","json","code-generation"],"comments":[{"owner":{"account_id":3484263,"reputation":855,"user_id":2915615,"display_name":"T. Nielsen"},"score":3,"creation_date":1689170425,"post_id":76662312,"comment_id":135175772,"body_markdown":"did you try something?","body":"did you try something?"}],"owner":{"account_id":12148339,"reputation":23,"user_id":8869678,"display_name":"sali weizman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689080806,"creation_date":1689080806,"question_id":76662312,"body_markdown":"I am trying to write a json code generator (to java) which can force min and max numbers with annotation ( like DecimalMin and DecimalMax in jakarta validation).\r\nthere is some code for that ? any package ?\r\n","title":"how can i add min and max annotation for double numbers in Json generator?","body":"<p>I am trying to write a json code generator (to java) which can force min and max numbers with annotation ( like DecimalMin and DecimalMax in jakarta validation).\nthere is some code for that ? any package ?</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":4388837,"reputation":345,"user_id":3577994,"accept_rate":29,"display_name":"Crysis85"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689080493,"creation_date":1689080493,"question_id":76662266,"body_markdown":"I&#39;m working on an application with a caching mechanism implemented.\r\nA CacheManager bean is implemented like this:\r\n\r\n    @Bean (name = &quot;applicationCacheManager&quot;)\r\n        public CacheManager applicationCacheManager() throws URISyntaxException {\r\n            EhcacheCachingProvider provider = (EhcacheCachingProvider) Caching.getCachingProvider();\r\n            javax.cache.CacheManager cacheManager = provider.getCacheManager(\r\n                    getClass().getResource(&quot;/ehcache.xml&quot;).toURI(),\r\n                    Thread.currentThread().getContextClassLoader());\r\n            return new JCacheCacheManager(cacheManager);\r\n        }\r\n\r\nwith it&#39;s ehcache.xml and application.properties properly configured the cached is used on a method like this:\r\n\r\n    @Cacheable(cacheManager = &quot;applicationCacheManager&quot;, value = &quot;mCache&quot;, key = &quot;#mKey&quot;)\r\n    \tpublic String getKey(String mKey) {\r\n    \t\treturn getResponse();\r\n    \t}\r\n\r\nThis implementation worked so far without issues (there is also a custom logger defined in a separate class that log all interaction with the cache)\r\nNow I had to import another custom library as a dependancy and it&#39;s here that the troubles with the cache started.\r\nAt application start i have an error like:\r\n\r\n    \r\n\r\n&gt; org.springframework.beans.factory.NoUniqueBeanDefinitionException: No\r\n&gt; qualifying bean of type &#39;org.springframework.cache.CacheManager&#39;\r\n&gt; available: expected single matching bean but found 2:\r\n&gt; applicationCacheManager,libraryCache\r\n\r\nGreat, nothing i can do with the library but i manage to figure out a way to handle both CacheManagers by defining a Primary CacheManager like this:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.cache.Cache;\r\n    import org.springframework.cache.CacheManager;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    \r\n    @Component\r\n    public class DelegatingCacheManager implements CacheManager {\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;applicationCacheManager&quot;)\r\n        private CacheManager applicationCacheManager;\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;libraryCache&quot;)\r\n        private CacheManager libraryCache;\r\n    \r\n        @Override\r\n        public Cache getCache(String name) {\r\n            if (&quot;secondCache&quot;.equals(name)) {\r\n                return applicationCacheManager.getCache(name);\r\n            } else if(&quot;mCache&quot;.equals(name)) {\r\n                return applicationCacheManager.getCache(name);\r\n            } else {\r\n                return libraryCache.getCache(name);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Collection&lt;String&gt; getCacheNames() {\r\n            List&lt;String&gt; cacheNames = new ArrayList&lt;&gt;();\r\n            cacheNames.addAll(applicationCacheManager.getCacheNames());\r\n            cacheNames.addAll(libraryCache.getCacheNames());\r\n            return cacheNames;\r\n        }\r\n    }\r\n\r\n(mCache and secondChace are labels used in my application to cache different variables)\r\nand as beans these:\r\n\r\n    @Bean\r\n    public CacheManager applicationCacheManager() throws URISyntaxException {\r\n        EhcacheCachingProvider provider = (EhcacheCachingProvider) Caching.getCachingProvider();\r\n        javax.cache.CacheManager cacheManager = provider.getCacheManager(\r\n                getClass().getResource(&quot;/ehcache.xml&quot;).toURI(),\r\n                Thread.currentThread().getContextClassLoader());\r\n        return new JCacheCacheManager(cacheManager);\r\n    }\r\n    \r\n    @Bean\r\n    @Primary\r\n    public CacheManager cacheManager(DelegatingCacheManager delegatingCacheManager) {\r\n        return delegatingCacheManager;\r\n    }\r\n\r\nWith this implementation my cache mechanism started working again but I&#39;ve no idea if the library&#39;s own cache will be working (id doesn&#39;t log cache activities as far as i know)\r\nThe question is: Is this solution sufficient robust or there is a better way for making these two CacheManager beans coexist?\r\nThank you, I hope this question meets the standard of the platform.","title":"Application CacheManager conflicting with dependency&#39;s own cache","body":"<p>I'm working on an application with a caching mechanism implemented.\nA CacheManager bean is implemented like this:</p>\n<pre><code>@Bean (name = &quot;applicationCacheManager&quot;)\n    public CacheManager applicationCacheManager() throws URISyntaxException {\n        EhcacheCachingProvider provider = (EhcacheCachingProvider) Caching.getCachingProvider();\n        javax.cache.CacheManager cacheManager = provider.getCacheManager(\n                getClass().getResource(&quot;/ehcache.xml&quot;).toURI(),\n                Thread.currentThread().getContextClassLoader());\n        return new JCacheCacheManager(cacheManager);\n    }\n</code></pre>\n<p>with it's ehcache.xml and application.properties properly configured the cached is used on a method like this:</p>\n<pre><code>@Cacheable(cacheManager = &quot;applicationCacheManager&quot;, value = &quot;mCache&quot;, key = &quot;#mKey&quot;)\n    public String getKey(String mKey) {\n        return getResponse();\n    }\n</code></pre>\n<p>This implementation worked so far without issues (there is also a custom logger defined in a separate class that log all interaction with the cache)\nNow I had to import another custom library as a dependancy and it's here that the troubles with the cache started.\nAt application start i have an error like:</p>\n<blockquote>\n<p>org.springframework.beans.factory.NoUniqueBeanDefinitionException: No\nqualifying bean of type 'org.springframework.cache.CacheManager'\navailable: expected single matching bean but found 2:\napplicationCacheManager,libraryCache</p>\n</blockquote>\n<p>Great, nothing i can do with the library but i manage to figure out a way to handle both CacheManagers by defining a Primary CacheManager like this:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.cache.Cache;\nimport org.springframework.cache.CacheManager;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Component\npublic class DelegatingCacheManager implements CacheManager {\n\n    @Autowired\n    @Qualifier(&quot;applicationCacheManager&quot;)\n    private CacheManager applicationCacheManager;\n\n    @Autowired\n    @Qualifier(&quot;libraryCache&quot;)\n    private CacheManager libraryCache;\n\n    @Override\n    public Cache getCache(String name) {\n        if (&quot;secondCache&quot;.equals(name)) {\n            return applicationCacheManager.getCache(name);\n        } else if(&quot;mCache&quot;.equals(name)) {\n            return applicationCacheManager.getCache(name);\n        } else {\n            return libraryCache.getCache(name);\n        }\n    }\n\n    @Override\n    public Collection&lt;String&gt; getCacheNames() {\n        List&lt;String&gt; cacheNames = new ArrayList&lt;&gt;();\n        cacheNames.addAll(applicationCacheManager.getCacheNames());\n        cacheNames.addAll(libraryCache.getCacheNames());\n        return cacheNames;\n    }\n}\n</code></pre>\n<p>(mCache and secondChace are labels used in my application to cache different variables)\nand as beans these:</p>\n<pre><code>@Bean\npublic CacheManager applicationCacheManager() throws URISyntaxException {\n    EhcacheCachingProvider provider = (EhcacheCachingProvider) Caching.getCachingProvider();\n    javax.cache.CacheManager cacheManager = provider.getCacheManager(\n            getClass().getResource(&quot;/ehcache.xml&quot;).toURI(),\n            Thread.currentThread().getContextClassLoader());\n    return new JCacheCacheManager(cacheManager);\n}\n\n@Bean\n@Primary\npublic CacheManager cacheManager(DelegatingCacheManager delegatingCacheManager) {\n    return delegatingCacheManager;\n}\n</code></pre>\n<p>With this implementation my cache mechanism started working again but I've no idea if the library's own cache will be working (id doesn't log cache activities as far as i know)\nThe question is: Is this solution sufficient robust or there is a better way for making these two CacheManager beans coexist?\nThank you, I hope this question meets the standard of the platform.</p>\n"},{"tags":["java","spring-boot","intellij-idea","pom.xml","spring-initializr"],"comments":[{"owner":{"account_id":12953224,"reputation":523,"user_id":9364868,"display_name":"Kedar"},"score":0,"creation_date":1689080767,"post_id":76662250,"comment_id":135160122,"body_markdown":"You can replace this with version and check.  `&lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;version&gt;${project.parent.version}&lt;/version&gt;&lt;/plugin&gt;`","body":"You can replace this with version and check.  <code>&lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;&#47;groupId&gt;&lt;artifactId&gt;sprin&zwnj;&#8203;g-boot-maven-plugin&lt;&zwnj;&#8203;&#47;artifactId&gt;&lt;version&zwnj;&#8203;&gt;${project.parent.ve&zwnj;&#8203;rsion}&lt;&#47;version&gt;&lt;&#47;pl&zwnj;&#8203;ugin&gt;</code>"},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1689080853,"post_id":76662250,"comment_id":135160144,"body_markdown":"Try `mvn -U clean verify`","body":"Try <code>mvn -U clean verify</code>"},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1689081137,"post_id":76662250,"comment_id":135160221,"body_markdown":"Your pom works fine for me and builds fine with `mvn -U clean verify`.","body":"Your pom works fine for me and builds fine with <code>mvn -U clean verify</code>."}],"owner":{"account_id":28974834,"reputation":3,"user_id":22194194,"display_name":"Mr Student"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689080361,"creation_date":1689080361,"question_id":76662250,"body_markdown":"I downloaded a spring project from start.spring.io with following characteristics: Maven, Java, 2.7.13, Jar, version 8. Dependencies postgresql, and postgresql. Here is my pom.xml file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.13&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; //Error here//\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.project-lombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\ntype here\r\n```\r\nError type is Plugin &#39;org.springframework.boot:spring-boot-maven-plugin:&#39; not found. I can&#39;t fix it.\r\n\r\n\r\nI tried updating Maven but id did not help.","title":"Downloaded spring project contains an error","body":"<p>I downloaded a spring project from start.spring.io with following characteristics: Maven, Java, 2.7.13, Jar, version 8. Dependencies postgresql, and postgresql. Here is my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.13&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; //Error here//\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.project-lombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\ntype here\n</code></pre>\n<p>Error type is Plugin 'org.springframework.boot:spring-boot-maven-plugin:' not found. I can't fix it.</p>\n<p>I tried updating Maven but id did not help.</p>\n"},{"tags":["java","quarkus","quarkus-rest-client"],"comments":[{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":0,"creation_date":1689078807,"post_id":76661881,"comment_id":135159595,"body_markdown":"The source code looks correct, but the error mentions `Unsatisfied dependency for type com.abc.xyz.zoho.ZohoRestClient and qualifiers [@Default]`, so for some reason, the `@RestClient` qualifier is lost. Do you perhaps have some extension that does annotation transformations, or something like that?","body":"The source code looks correct, but the error mentions <code>Unsatisfied dependency for type com.abc.xyz.zoho.ZohoRestClient and qualifiers [@Default]</code>, so for some reason, the <code>@RestClient</code> qualifier is lost. Do you perhaps have some extension that does annotation transformations, or something like that?"},{"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"score":0,"creation_date":1689079773,"post_id":76661881,"comment_id":135159854,"body_markdown":"Hi @Ladicek Thanks for the response. No, I do not have any other config for hitting the external API.","body":"Hi @Ladicek Thanks for the response. No, I do not have any other config for hitting the external API."},{"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"score":0,"creation_date":1689080305,"post_id":76661881,"comment_id":135159994,"body_markdown":"@Ladicek If I do comment Inject for ZohoRestClient and only keep RestClient annotation then I am able to start the application but when I do hit the API I am getting the\n\nZohoRestClient.generateAccessToken(String, String, String, String)&quot; because &quot;this.zohoRestClient&quot; is null","body":"@Ladicek If I do comment Inject for ZohoRestClient and only keep RestClient annotation then I am able to start the application but when I do hit the API I am getting the  ZohoRestClient.generateAccessToken(String, String, String, String)&quot; because &quot;this.zohoRestClient&quot; is null"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1689081337,"post_id":76661881,"comment_id":135160274,"body_markdown":"did you try with a more recent version of branch 2.x just to exclude a problem of `2.15.3.Final`? or downgrade to java-11 just for test?","body":"did you try with a more recent version of branch 2.x just to exclude a problem of <code>2.15.3.Final</code>? or downgrade to java-11 just for test?"},{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":0,"creation_date":1689090479,"post_id":76661881,"comment_id":135162647,"body_markdown":"Yeah, this just proves that `@RestClient` is not treated as a qualifier, which is _weird_. Do you have a reproducer somewhere? Also verify that you have a dependency on the RestClient Quarkus extension (`quarkus-rest-client-reactive` if you&#39;re using RESTEasy Reactive, or `quarkus-rest-client` if you&#39;re using classic RESTEasy).","body":"Yeah, this just proves that <code>@RestClient</code> is not treated as a qualifier, which is <i>weird</i>. Do you have a reproducer somewhere? Also verify that you have a dependency on the RestClient Quarkus extension (<code>quarkus-rest-client-reactive</code> if you&#39;re using RESTEasy Reactive, or <code>quarkus-rest-client</code> if you&#39;re using classic RESTEasy)."}],"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689080279,"creation_date":1689077701,"question_id":76661881,"body_markdown":"I have a Quarkus application v2.15.3.Final using Java 17. The application does have one API endpoint which fetches the data using the third-party API and processes them. To hit the third-party API I am using the RestClient. However when I start the application using `quarkus dev` application failed to start and result in the below error\r\n\r\n    Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type com.abc.xyz.zoho.ZohoRestClient and qualifiers [@Default]\r\n    \t- java member: com.abc.xyz.zoho.client.ClientServiceImpl#zohoRestClient\r\n    \t- declared on CLASS bean [types=[com.abc.xyz.zoho.client.ClientServiceImpl, java.lang.Object, com.abc.xyz.zoho.client.ClientService], qualifiers=[@Default, @Any], target=com.abc.xyz.zoho.client.ClientServiceImpl]\r\n\r\n**ClientServiceImpl.java**\r\n\r\n    import java.util.List;\r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import javax.inject.Inject;\r\n    import lombok.extern.jbosslog.JBossLog;\r\n    import org.eclipse.microprofile.config.inject.ConfigProperty;\r\n    import org.eclipse.microprofile.rest.client.inject.RestClient;\r\n    \r\n    /**\r\n     * Manages methods for zoho clients.\r\n     */\r\n    @ApplicationScoped\r\n    @JBossLog\r\n    public class ClientServiceImpl implements ClientService {\r\n    \r\n      @ConfigProperty(name = &quot;zoho.refresh-token&quot;)\r\n      private String refreshToken;\r\n    \r\n      @ConfigProperty(name = &quot;zoho.client-id&quot;)\r\n      private String clientId;\r\n    \r\n      @ConfigProperty(name = &quot;zoho.client-secret&quot;)\r\n      private String clientSecret;\r\n    \r\n      @Inject\r\n      @RestClient\r\n      ZohoRestClient zohoRestClient;\r\n    \r\n      @Inject\r\n      ClientRepository clientRepository;\r\n    \r\n    \r\n      @Override\r\n      public void processClients(String token) {\r\n         ...\r\n         zohoRestClient.generateAccessToken(refreshToken, clientId, clientSecret,\r\n                Constant.ZOHO_GRANT_TYPE);\r\n         ...\r\n      }\r\n    \r\n    \r\n    }\r\n\r\n\r\n**ZohoRestClient.java**\r\n\r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import javax.ws.rs.POST;\r\n    import javax.ws.rs.Path;\r\n    import javax.ws.rs.Produces;\r\n    import javax.ws.rs.QueryParam;\r\n    import javax.ws.rs.core.MediaType;\r\n    import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\r\n    \r\n    @RegisterRestClient(baseUri = &quot;https://accounts.zoho.in&quot;, configKey = &quot;zoho-api&quot;)\r\n    @ApplicationScoped\r\n    public interface ZohoRestClient {\r\n    \r\n      @POST\r\n      @Path(&quot;/oauth/v2/token&quot;)\r\n      @Produces(MediaType.APPLICATION_JSON)\r\n      AccessToken generateAccessToken(\r\n          @QueryParam(&quot;refresh_token&quot;) String refreshToken,\r\n          @QueryParam(&quot;client_id&quot;) String clientId,\r\n          @QueryParam(&quot;client_secret&quot;) String clientSecret,\r\n          @QueryParam(&quot;grant_type&quot;) String grantType\r\n      );\r\n    \r\n    }\r\n\r\nI do not have any config for hitting the third-party API in the application.properties file. \r\n\r\nIf I do comment @Inject for ZohoRestClient and only keep @RestClient annotation then I am able to start the application but when I do hit the API I am getting the \r\n\r\n**ZohoRestClient.generateAccessToken(String, String, String, String)&quot; because &quot;this.zohoRestClient&quot; is null**","title":"javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type RestClient","body":"<p>I have a Quarkus application v2.15.3.Final using Java 17. The application does have one API endpoint which fetches the data using the third-party API and processes them. To hit the third-party API I am using the RestClient. However when I start the application using <code>quarkus dev</code> application failed to start and result in the below error</p>\n<pre><code>Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type com.abc.xyz.zoho.ZohoRestClient and qualifiers [@Default]\n    - java member: com.abc.xyz.zoho.client.ClientServiceImpl#zohoRestClient\n    - declared on CLASS bean [types=[com.abc.xyz.zoho.client.ClientServiceImpl, java.lang.Object, com.abc.xyz.zoho.client.ClientService], qualifiers=[@Default, @Any], target=com.abc.xyz.zoho.client.ClientServiceImpl]\n</code></pre>\n<p><strong>ClientServiceImpl.java</strong></p>\n<pre><code>import java.util.List;\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport lombok.extern.jbosslog.JBossLog;\nimport org.eclipse.microprofile.config.inject.ConfigProperty;\nimport org.eclipse.microprofile.rest.client.inject.RestClient;\n\n/**\n * Manages methods for zoho clients.\n */\n@ApplicationScoped\n@JBossLog\npublic class ClientServiceImpl implements ClientService {\n\n  @ConfigProperty(name = &quot;zoho.refresh-token&quot;)\n  private String refreshToken;\n\n  @ConfigProperty(name = &quot;zoho.client-id&quot;)\n  private String clientId;\n\n  @ConfigProperty(name = &quot;zoho.client-secret&quot;)\n  private String clientSecret;\n\n  @Inject\n  @RestClient\n  ZohoRestClient zohoRestClient;\n\n  @Inject\n  ClientRepository clientRepository;\n\n\n  @Override\n  public void processClients(String token) {\n     ...\n     zohoRestClient.generateAccessToken(refreshToken, clientId, clientSecret,\n            Constant.ZOHO_GRANT_TYPE);\n     ...\n  }\n\n\n}\n</code></pre>\n<p><strong>ZohoRestClient.java</strong></p>\n<pre><code>import javax.enterprise.context.ApplicationScoped;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.QueryParam;\nimport javax.ws.rs.core.MediaType;\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\n\n@RegisterRestClient(baseUri = &quot;https://accounts.zoho.in&quot;, configKey = &quot;zoho-api&quot;)\n@ApplicationScoped\npublic interface ZohoRestClient {\n\n  @POST\n  @Path(&quot;/oauth/v2/token&quot;)\n  @Produces(MediaType.APPLICATION_JSON)\n  AccessToken generateAccessToken(\n      @QueryParam(&quot;refresh_token&quot;) String refreshToken,\n      @QueryParam(&quot;client_id&quot;) String clientId,\n      @QueryParam(&quot;client_secret&quot;) String clientSecret,\n      @QueryParam(&quot;grant_type&quot;) String grantType\n  );\n\n}\n</code></pre>\n<p>I do not have any config for hitting the third-party API in the application.properties file.</p>\n<p>If I do comment @Inject for ZohoRestClient and only keep @RestClient annotation then I am able to start the application but when I do hit the API I am getting the</p>\n<p><strong>ZohoRestClient.generateAccessToken(String, String, String, String)&quot; because &quot;this.zohoRestClient&quot; is null</strong></p>\n"},{"tags":["java","android","kotlin","authentication"],"answers":[{"comments":[{"owner":{"account_id":28994592,"reputation":3,"user_id":22209533,"display_name":"Kaviyarasan M"},"score":0,"creation_date":1689093151,"post_id":76662231,"comment_id":135163212,"body_markdown":"thanks for the info. From the above logic based on user selection only we can retrieve the number but i need programmatically fetch the number without user action","body":"thanks for the info. From the above logic based on user selection only we can retrieve the number but i need programmatically fetch the number without user action"},{"owner":{"account_id":28989250,"reputation":41,"user_id":22205410,"display_name":"pilotJack"},"score":0,"creation_date":1689166349,"post_id":76662231,"comment_id":135174606,"body_markdown":"Well technically once the user knowingly shares their telephone number (preferably at first launch), you could store the password in SharedPreferences so you don&#39;t have to ask again.  I don&#39;t know if that&#39;s an ethics issue.  Also, you technically don&#39;t NEED a third party for SMS, but boooyy do you need a very large technical AND business base (especially for security).  The service the documentation points to seems like it&#39;s a good and trustworthy authentication API.  I&#39;d start there as a startup, certainly.","body":"Well technically once the user knowingly shares their telephone number (preferably at first launch), you could store the password in SharedPreferences so you don&#39;t have to ask again.  I don&#39;t know if that&#39;s an ethics issue.  Also, you technically don&#39;t NEED a third party for SMS, but boooyy do you need a very large technical AND business base (especially for security).  The service the documentation points to seems like it&#39;s a good and trustworthy authentication API.  I&#39;d start there as a startup, certainly."}],"tags":[],"owner":{"account_id":28989250,"reputation":41,"user_id":22205410,"display_name":"pilotJack"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689080221,"creation_date":1689080221,"answer_id":76662231,"question_id":76662095,"body_markdown":"This will get you the phone number:\r\n\r\n&gt; https://developers.google.com/identity/phone-number-hint/android\r\n\r\n\r\n    GetPhoneNumberHintIntentRequest request = GetPhoneNumberHintIntentRequest.builder().build();\r\n    \tIdentity.getSignInClient(VerificationActivity.this)\r\n    \t\t.getPhoneNumberHintIntent(request)\r\n    \t\t.addOnSuccessListener(new OnSuccessListener&lt;PendingIntent&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onSuccess(PendingIntent pendingIntent) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tIntentSenderRequest intentSenderRequest = new IntentSenderRequest.Builder(pendingIntent).build();\r\n    \t\t\t\t\tphoneNumberHintLauncher.launch(intentSenderRequest);\r\n    \t\t\t\t} catch(Exception e) {\r\n    \t\t\t\t\tLog.e(TAG, &quot;Launching the PendingIntent failed&quot;, e);\r\n    \t\t\t\t\tthrow new RuntimeException(e);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t})\r\n    \t\t.addOnFailureListener(e -&gt; {\r\n    \t\t\tLog.e(TAG, &quot;Phone Number Hint failed&quot;, e);\r\n    \t\t});\r\n\r\nHere&#39;s the launcher:\r\n\r\n    private final ActivityResultLauncher&lt;IntentSenderRequest&gt; phoneNumberHintLauncher = registerForActivityResult(\r\n    \t\tnew ActivityResultContracts.StartIntentSenderForResult(),\r\n    \t\tresult -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\tString phoneNumber = Identity.getSignInClient(VerificationActivity.this).getPhoneNumberFromIntent(result.getData());\r\n    \t\t\t\t\r\n    \t\t\t\t/// do stuff\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t} catch (ApiException e) {\r\n    \t\t\t\tLog.e(TAG, e);\r\n    \t\t\t}\r\n    \t\t});\r\n\r\nTo send an SMS, you need to implement a host of things including a 3rd party paid subscription.\r\n\r\nhttps://developers.google.com/identity/sms-retriever/request\r\n\r\nGood luck!","title":"Android app Sim card based authentication","body":"<p>This will get you the phone number:</p>\n<blockquote>\n<p><a href=\"https://developers.google.com/identity/phone-number-hint/android\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/phone-number-hint/android</a></p>\n</blockquote>\n<pre><code>GetPhoneNumberHintIntentRequest request = GetPhoneNumberHintIntentRequest.builder().build();\n    Identity.getSignInClient(VerificationActivity.this)\n        .getPhoneNumberHintIntent(request)\n        .addOnSuccessListener(new OnSuccessListener&lt;PendingIntent&gt;() {\n            @Override\n            public void onSuccess(PendingIntent pendingIntent) {\n                try {\n                    IntentSenderRequest intentSenderRequest = new IntentSenderRequest.Builder(pendingIntent).build();\n                    phoneNumberHintLauncher.launch(intentSenderRequest);\n                } catch(Exception e) {\n                    Log.e(TAG, &quot;Launching the PendingIntent failed&quot;, e);\n                    throw new RuntimeException(e);\n                }\n            }\n        })\n        .addOnFailureListener(e -&gt; {\n            Log.e(TAG, &quot;Phone Number Hint failed&quot;, e);\n        });\n</code></pre>\n<p>Here's the launcher:</p>\n<pre><code>private final ActivityResultLauncher&lt;IntentSenderRequest&gt; phoneNumberHintLauncher = registerForActivityResult(\n        new ActivityResultContracts.StartIntentSenderForResult(),\n        result -&gt; {\n            try {\n                String phoneNumber = Identity.getSignInClient(VerificationActivity.this).getPhoneNumberFromIntent(result.getData());\n                \n                /// do stuff\n                \n                \n            } catch (ApiException e) {\n                Log.e(TAG, e);\n            }\n        });\n</code></pre>\n<p>To send an SMS, you need to implement a host of things including a 3rd party paid subscription.</p>\n<p><a href=\"https://developers.google.com/identity/sms-retriever/request\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sms-retriever/request</a></p>\n<p>Good luck!</p>\n"}],"owner":{"account_id":28994592,"reputation":3,"user_id":22209533,"display_name":"Kaviyarasan M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76662231,"answer_count":1,"score":0,"last_activity_date":1689080221,"creation_date":1689079138,"question_id":76662095,"body_markdown":"I have created android app, for authentication purpose I want to send SMS to self number based on SIM card inserted without entering the phone number. Please suggest me solution for that.\r\n\r\nI have tried using SubscriptionManager and TelephonyManager to fetch the phonenumber in background but it wont work in some devices.","title":"Android app Sim card based authentication","body":"<p>I have created android app, for authentication purpose I want to send SMS to self number based on SIM card inserted without entering the phone number. Please suggest me solution for that.</p>\n<p>I have tried using SubscriptionManager and TelephonyManager to fetch the phonenumber in background but it wont work in some devices.</p>\n"},{"tags":["java","fragment","android-alertdialog","android-arrayadapter","builder"],"owner":{"account_id":27657833,"reputation":3,"user_id":21111318,"display_name":"Nisanur Turan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689079853,"creation_date":1689079853,"question_id":76662191,"body_markdown":"Here are my codes:\r\n\r\n``` java\r\nMyAdapter adapter = new MyAdapter(this, n,s,t,image);\r\n        list_view.setAdapter(adapter); //my other problem\r\n\r\nArrayAdapter arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, arrayList); //my other problem\r\n\r\n        list_view.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int pozition, long l) {\r\n\r\n                AlertDialog.Builder dialogOlusturucu = new AlertDialog.Builder(FragmentTakvim.this); //the problem is here\r\n\r\n                long veriid = arrayAdapter.getItemId(pozition);\r\n                String listeid = String.valueOf(veriid);\r\n\r\n                dialogOlusturucu.setMessage(&quot;Tarih ve Aktivite Silinsin Mi?&quot;)\r\n                        .setCancelable(false)\r\n                        .setPositiveButton(&quot;Evet&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                Verisil(listeid);\r\n                            }\r\n                        }).setNegativeButton(&quot;Hayır&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                dialogInterface.dismiss();\r\n                            }\r\n                        });\r\n                dialogOlusturucu.create().show();\r\n            }\r\n        });\r\n\r\n    return v;} ```\r\n\r\nhere are my problem:\r\n```java\r\nBuilder(android.content.Context)&#39; in &#39;androidx.appcompat.app.AlertDialog.Builder&#39; cannot be applied to &#39;(com.nisanurturan.lastapp.FragmentTakvim)&#39;\r\n```\r\n\r\nI&#39;ve tried:\r\n```java\r\nAlertDialog.Builder alertBuilder = new AlertDialog.Builder(v.getContext());\r\n\r\nAlertDialog alertDialog = new AlertDialog.Builder(getActivity()).create();\r\n\r\nAlertDialog alertDialog = new AlertDialog.Builder(getActivity(), R.style.Theme_AppCompat_Dialog_Alert).create();\r\n\r\n```\r\n\r\nbut also it didn&#39;t work\r\n\r\nalso I&#39;ve other problems too but i don&#39;t think the other problems according to this problem but I&#39;ve mark if you think other problems are important too.","title":"MyAdapter and ArrayAdapter issues in Fragment","body":"<p>Here are my codes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyAdapter adapter = new MyAdapter(this, n,s,t,image);\n        list_view.setAdapter(adapter); //my other problem\n\nArrayAdapter arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, arrayList); //my other problem\n\n        list_view.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int pozition, long l) {\n\n                AlertDialog.Builder dialogOlusturucu = new AlertDialog.Builder(FragmentTakvim.this); //the problem is here\n\n                long veriid = arrayAdapter.getItemId(pozition);\n                String listeid = String.valueOf(veriid);\n\n                dialogOlusturucu.setMessage(&quot;Tarih ve Aktivite Silinsin Mi?&quot;)\n                        .setCancelable(false)\n                        .setPositiveButton(&quot;Evet&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n                                Verisil(listeid);\n                            }\n                        }).setNegativeButton(&quot;Hayır&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n                                dialogInterface.dismiss();\n                            }\n                        });\n                dialogOlusturucu.create().show();\n            }\n        });\n\n    return v;} ```\n\nhere are my problem:\n```java\nBuilder(android.content.Context)' in 'androidx.appcompat.app.AlertDialog.Builder' cannot be applied to '(com.nisanurturan.lastapp.FragmentTakvim)'\n</code></pre>\n<p>I've tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AlertDialog.Builder alertBuilder = new AlertDialog.Builder(v.getContext());\n\nAlertDialog alertDialog = new AlertDialog.Builder(getActivity()).create();\n\nAlertDialog alertDialog = new AlertDialog.Builder(getActivity(), R.style.Theme_AppCompat_Dialog_Alert).create();\n\n</code></pre>\n<p>but also it didn't work</p>\n<p>also I've other problems too but i don't think the other problems according to this problem but I've mark if you think other problems are important too.</p>\n"},{"tags":["java","elasticsearch","lucene","elasticsearch-rest-client"],"owner":{"account_id":26775043,"reputation":1,"user_id":20370823,"display_name":"Akshay Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689079744,"creation_date":1687373488,"question_id":76526297,"body_markdown":"I have configured a self-managed Elasticsearch cluster with three nodes on Google Cloud VMs. The cluster consists of four primary shards and four replica shards. \r\n\r\nHowever, when I deployed Elasticsearch on the production environment, I noticed the following observations:\r\n\r\n1. When throughput is high (100 RPM), the p99 is under 30 ms.\r\n2. When throughput is low (2-3 RPM) , the p99 is around 1500 ms.\r\n\r\nA noticeable trend is that the response time is initially high for the first few requests, but as the number of requests increases, the response time improves.\r\n\r\nBelow is my elasticsearch client implementation,\r\n```\r\npublic ElasticSearchClusterConnectionFactory(List&lt;String&gt; hosts, int port) {\r\n        HttpHost[] httpHosts = hosts.stream()\r\n                .map(host -&gt; new HttpHost(host, port))\r\n                .toArray(HttpHost[]::new);\r\n\r\n        RestClientBuilder.HttpClientConfigCallback httpClientConfigCallback = httpClientBuilder -&gt;\r\n                httpClientBuilder\r\n                        .setDefaultHeaders(List.of(\r\n                                new org.apache.http.message.BasicHeader(HttpHeaders.CONTENT_TYPE, ContentType.APPLICATION_JSON.toString()),\r\n                                new BasicHeader(HttpHeaders.CONNECTION, &quot;keep-alive&quot;)\r\n                        ))\r\n                        .addInterceptorLast((HttpResponseInterceptor) (response, context) -&gt; response.addHeader(&quot;X-Elastic-Product&quot;, &quot;Elasticsearch&quot;))\r\n                        .setMaxConnTotal(400)\r\n                        .setMaxConnPerRoute(200)\r\n                        .setConnectionReuseStrategy((response, context) -&gt; true)\r\n                        .setKeepAliveStrategy((response, context) -&gt; Duration.ofMinutes(10).toMillis());\r\n\r\n        RestClient restClient = RestClient.builder(httpHosts)\r\n                .setHttpClientConfigCallback(httpClientConfigCallback)\r\n                .setRequestConfigCallback(requestConfigBuilder -&gt; requestConfigBuilder\r\n                    .setConnectionRequestTimeout(0)\r\n                    .setConnectTimeout(1000)\r\n                    .setSocketTimeout(200))\r\n            .build();\r\n\r\n        ElasticsearchTransport transport = new RestClientTransport(\r\n                restClient, new JacksonJsonpMapper());\r\n\r\n        // Creating the API client\r\n        this.client = new ElasticsearchClient(transport);\r\n    }\r\n```\r\n\r\n\r\nMy finding is at very throughput (2-3 RPM), its not reusing the connection and creating a new one but when the throughput(100 RPM) is high, it uses the connection from the pool and requests are served within a very small milliseconds. I have attempted to address the issue by setting the ConnectionReuseStrategy and KeepAliveStrategy to optimize connection reuse. However, these changes did not yield significant improvements in performance, particularly at low throughput.\r\n\r\nTo enhance performance under low throughput conditions, I would appreciate guidance on additional steps or optimizations that can be undertaken.","title":"Elasticsearch gives a high response time under very low throughput and vice versa","body":"<p>I have configured a self-managed Elasticsearch cluster with three nodes on Google Cloud VMs. The cluster consists of four primary shards and four replica shards.</p>\n<p>However, when I deployed Elasticsearch on the production environment, I noticed the following observations:</p>\n<ol>\n<li>When throughput is high (100 RPM), the p99 is under 30 ms.</li>\n<li>When throughput is low (2-3 RPM) , the p99 is around 1500 ms.</li>\n</ol>\n<p>A noticeable trend is that the response time is initially high for the first few requests, but as the number of requests increases, the response time improves.</p>\n<p>Below is my elasticsearch client implementation,</p>\n<pre><code>public ElasticSearchClusterConnectionFactory(List&lt;String&gt; hosts, int port) {\n        HttpHost[] httpHosts = hosts.stream()\n                .map(host -&gt; new HttpHost(host, port))\n                .toArray(HttpHost[]::new);\n\n        RestClientBuilder.HttpClientConfigCallback httpClientConfigCallback = httpClientBuilder -&gt;\n                httpClientBuilder\n                        .setDefaultHeaders(List.of(\n                                new org.apache.http.message.BasicHeader(HttpHeaders.CONTENT_TYPE, ContentType.APPLICATION_JSON.toString()),\n                                new BasicHeader(HttpHeaders.CONNECTION, &quot;keep-alive&quot;)\n                        ))\n                        .addInterceptorLast((HttpResponseInterceptor) (response, context) -&gt; response.addHeader(&quot;X-Elastic-Product&quot;, &quot;Elasticsearch&quot;))\n                        .setMaxConnTotal(400)\n                        .setMaxConnPerRoute(200)\n                        .setConnectionReuseStrategy((response, context) -&gt; true)\n                        .setKeepAliveStrategy((response, context) -&gt; Duration.ofMinutes(10).toMillis());\n\n        RestClient restClient = RestClient.builder(httpHosts)\n                .setHttpClientConfigCallback(httpClientConfigCallback)\n                .setRequestConfigCallback(requestConfigBuilder -&gt; requestConfigBuilder\n                    .setConnectionRequestTimeout(0)\n                    .setConnectTimeout(1000)\n                    .setSocketTimeout(200))\n            .build();\n\n        ElasticsearchTransport transport = new RestClientTransport(\n                restClient, new JacksonJsonpMapper());\n\n        // Creating the API client\n        this.client = new ElasticsearchClient(transport);\n    }\n</code></pre>\n<p>My finding is at very throughput (2-3 RPM), its not reusing the connection and creating a new one but when the throughput(100 RPM) is high, it uses the connection from the pool and requests are served within a very small milliseconds. I have attempted to address the issue by setting the ConnectionReuseStrategy and KeepAliveStrategy to optimize connection reuse. However, these changes did not yield significant improvements in performance, particularly at low throughput.</p>\n<p>To enhance performance under low throughput conditions, I would appreciate guidance on additional steps or optimizations that can be undertaken.</p>\n"},{"tags":["java","swing","jsch"],"comments":[{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":1,"creation_date":1689059857,"post_id":76659368,"comment_id":135155649,"body_markdown":"In eccesnse, unless you use a worker thread, if you are doing something (SFTP transfer) in your swing application thread nothing will happen until it&#39;s done with what you asked it to do.","body":"In eccesnse, unless you use a worker thread, if you are doing something (SFTP transfer) in your swing application thread nothing will happen until it&#39;s done with what you asked it to do."},{"owner":{"account_id":24449442,"reputation":93,"user_id":18371893,"display_name":"Alessandro"},"score":0,"creation_date":1689062471,"post_id":76659368,"comment_id":135156139,"body_markdown":"@BernardV thank you for your kind answer, but I still have some doubts: If everything is on a single thread and if I see that the execution hits &quot;count()&quot; for each chunk of data transferred, then why doesn&#39;t the UI get updated? The execution here is sequential","body":"@BernardV thank you for your kind answer, but I still have some doubts: If everything is on a single thread and if I see that the execution hits &quot;count()&quot; for each chunk of data transferred, then why doesn&#39;t the UI get updated? The execution here is sequential"},{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":0,"creation_date":1689062717,"post_id":76659368,"comment_id":135156201,"body_markdown":"Perhaps have a look here: https://stackoverflow.com/a/13520062/3324415 and here: https://stackoverflow.com/a/7158505/3324415","body":"Perhaps have a look here: <a href=\"https://stackoverflow.com/a/13520062/3324415\">stackoverflow.com/a/13520062/3324415</a> and here: <a href=\"https://stackoverflow.com/a/7158505/3324415\">stackoverflow.com/a/7158505/3324415</a>"},{"owner":{"account_id":24449442,"reputation":93,"user_id":18371893,"display_name":"Alessandro"},"score":0,"creation_date":1689066212,"post_id":76659368,"comment_id":135156978,"body_markdown":"@BernardV thank you so much again. They say &quot;Swing components and models should be created, modified, and queried only from the event-dispatching thread&quot;. The thing is that I am on the EDT. In fact, if I call SwingUtilities.isEventDispatchThread(), it returns true. According to this, it should be able to edit UI components. What am I missing? Again thank you.","body":"@BernardV thank you so much again. They say &quot;Swing components and models should be created, modified, and queried only from the event-dispatching thread&quot;. The thing is that I am on the EDT. In fact, if I call SwingUtilities.isEventDispatchThread(), it returns true. According to this, it should be able to edit UI components. What am I missing? Again thank you."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1689069041,"post_id":76659368,"comment_id":135157537,"body_markdown":"A single thread can only execute a single set of instructions.  If you&#39;re doing non-GUI work on the EDT, the GUI **cannot update**.  Period.  That&#39;s why the EDT is reserved for Swing components and only Swing components.","body":"A single thread can only execute a single set of instructions.  If you&#39;re doing non-GUI work on the EDT, the GUI <b>cannot update</b>.  Period.  That&#39;s why the EDT is reserved for Swing components and only Swing components."}],"answers":[{"tags":[],"owner":{"account_id":24449442,"reputation":93,"user_id":18371893,"display_name":"Alessandro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689078716,"creation_date":1689073154,"answer_id":76661291,"question_id":76659368,"body_markdown":"For whoever might be interested, this appears to be the main reason on why the UI seems to be frozen even if the UI changes are performed on the Event Dispatch Thread:\r\n\r\n 1. When calling `table.setValueAt(percentage, 0, 1);` the underlying table&#39;s structure gets modified as expected and generates a repaint request;\r\n 2. The repaint request gets handled by the repaint manager which is responsable for the repaint process and it is executed on the EDT after the EDT becomes idle, and serves the rapaint requests in the order they were scheduled.\r\n\r\nThis means that if the EDT is not idle, the UI will not be repainted. The EDT is not idle because it&#39;s processing a SFTP transfer. Easy :-)","title":"Cannot change Java Swing UI from Jsch&#39;s SftpProgressMonitor","body":"<p>For whoever might be interested, this appears to be the main reason on why the UI seems to be frozen even if the UI changes are performed on the Event Dispatch Thread:</p>\n<ol>\n<li>When calling <code>table.setValueAt(percentage, 0, 1);</code> the underlying table's structure gets modified as expected and generates a repaint request;</li>\n<li>The repaint request gets handled by the repaint manager which is responsable for the repaint process and it is executed on the EDT after the EDT becomes idle, and serves the rapaint requests in the order they were scheduled.</li>\n</ol>\n<p>This means that if the EDT is not idle, the UI will not be repainted. The EDT is not idle because it's processing a SFTP transfer. Easy :-)</p>\n"}],"owner":{"account_id":24449442,"reputation":93,"user_id":18371893,"display_name":"Alessandro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76661291,"answer_count":1,"score":-1,"last_activity_date":1689078716,"creation_date":1689058517,"question_id":76659368,"body_markdown":"I&#39;d like to use `SftpProgressMonitor`&#39;s `count()` method to update the percentage of completion of a SFTP operation. I know it is better to use Worker threads in order not to block the UI, but I am curious on why this code does not update the table until the SFTP operation has completed:\r\n\r\n    public class MySftpProgressMonitor implements SftpProgressMonitor {\r\n    \r\n    \tJTable table = getTableReference();\r\n    \tDefaultTableModel tableModel = getTableModelReference();\r\n    \t\r\n    \t@Override\r\n    \tpublic boolean count(long bytes) {\r\n    \t\t\r\n    \t\tint percentage = computePercentage(bytes);\r\n    \t\ttable.setValueAt(percentage, 0, 1);\r\n    \t\t\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void end() {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void init(int op, String src, String dest, long maxBytes) {\r\n    \t\tObject[] rowData = {src, 0};\r\n            tableModel.addRow(rowData);\r\n    \t}\r\n    \r\n    }\r\n\r\nI don&#39;t see anything happening on the UI until the file transfer is completed (I see an entry whose percentage is 100%) and I wonder why. Since I am not using any additional threads, this code gets executed on the EDT, so it should be able to update UI components. I am also trying to explicitly call `repaint()` , `table.repaint()` and `revalidate()` but nothing happens.\r\n\r\nI am reading TFM but can&#39;t figure out what is the error here. Thank you.","title":"Cannot change Java Swing UI from Jsch&#39;s SftpProgressMonitor","body":"<p>I'd like to use <code>SftpProgressMonitor</code>'s <code>count()</code> method to update the percentage of completion of a SFTP operation. I know it is better to use Worker threads in order not to block the UI, but I am curious on why this code does not update the table until the SFTP operation has completed:</p>\n<pre><code>public class MySftpProgressMonitor implements SftpProgressMonitor {\n\n    JTable table = getTableReference();\n    DefaultTableModel tableModel = getTableModelReference();\n    \n    @Override\n    public boolean count(long bytes) {\n        \n        int percentage = computePercentage(bytes);\n        table.setValueAt(percentage, 0, 1);\n        \n        return true;\n    }\n\n    @Override\n    public void end() {\n    }\n\n    @Override\n    public void init(int op, String src, String dest, long maxBytes) {\n        Object[] rowData = {src, 0};\n        tableModel.addRow(rowData);\n    }\n\n}\n</code></pre>\n<p>I don't see anything happening on the UI until the file transfer is completed (I see an entry whose percentage is 100%) and I wonder why. Since I am not using any additional threads, this code gets executed on the EDT, so it should be able to update UI components. I am also trying to explicitly call <code>repaint()</code> , <code>table.repaint()</code> and <code>revalidate()</code> but nothing happens.</p>\n<p>I am reading TFM but can't figure out what is the error here. Thank you.</p>\n"},{"tags":["java","git","intellij-idea","gitlab","version-control"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":4,"creation_date":1689054185,"post_id":76658853,"comment_id":135154757,"body_markdown":"The path to the git executable is just that -- the path to the `git` program on your computer. It is not the location of the remote repository. You can type `which git` to find the location.","body":"The path to the git executable is just that -- the path to the <code>git</code> program on your computer. It is not the location of the remote repository. You can type <code>which git</code> to find the location."}],"answers":[{"tags":[],"owner":{"account_id":28492010,"reputation":179,"user_id":21804501,"display_name":"Dino Letic"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689078457,"creation_date":1689078457,"answer_id":76661990,"question_id":76658853,"body_markdown":"1. The place where you pasted URL is for git executable, not for the git repository.\r\n2. If you want to clone - please proceed with &quot;Get from version control&quot;\r\n3. Otherwise, if you have a project created and repository created in GitLab - please add remote under Git | Manage remotes","title":"Not able to connect Gitlab Repositry with Intellij IDEA","body":"<ol>\n<li>The place where you pasted URL is for git executable, not for the git repository.</li>\n<li>If you want to clone - please proceed with &quot;Get from version control&quot;</li>\n<li>Otherwise, if you have a project created and repository created in GitLab - please add remote under Git | Manage remotes</li>\n</ol>\n"}],"owner":{"account_id":28872167,"reputation":21,"user_id":22113475,"display_name":"Shraboni Sinha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":1,"score":-1,"last_activity_date":1689078457,"creation_date":1689052036,"question_id":76658853,"body_markdown":"I am not able to fetch my Gitlab repository with my Intellij Idea. Due to this, I&#39;m not able to push my code into my repository. Git is installed on my laptop. Can anyone please help me to fix my problem?\r\n\r\n[enter image description here](https://i.stack.imgur.com/qcpR5.jpg)\r\n\r\nI am trying to connect my Gitlab repositry with my Intellij IDEA but the connection is not building. ","title":"Not able to connect Gitlab Repositry with Intellij IDEA","body":"<p>I am not able to fetch my Gitlab repository with my Intellij Idea. Due to this, I'm not able to push my code into my repository. Git is installed on my laptop. Can anyone please help me to fix my problem?</p>\n<p><a href=\"https://i.stack.imgur.com/qcpR5.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I am trying to connect my Gitlab repositry with my Intellij IDEA but the connection is not building.</p>\n"},{"tags":["java","module","java-platform-module-system","open-liberty"],"comments":[{"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":0,"creation_date":1689773854,"post_id":76661972,"comment_id":135260960,"body_markdown":"The &quot;Source compilation had errors&quot; message sounds like something you&#39;d see from the Liberty Maven or Gradle plugins&#39; &quot;dev mode&quot;.   I wonder if something could be happening along the lines of dev mode not being able to compile certain files, but they are already compiled or packaged elsewhere, so you are running OK?    Is there a sample project or recreate you might be able to point to?  What version of Java are you using?","body":"The &quot;Source compilation had errors&quot; message sounds like something you&#39;d see from the Liberty Maven or Gradle plugins&#39; &quot;dev mode&quot;.   I wonder if something could be happening along the lines of dev mode not being able to compile certain files, but they are already compiled or packaged elsewhere, so you are running OK?    Is there a sample project or recreate you might be able to point to?  What version of Java are you using?"}],"owner":{"account_id":8737131,"reputation":433,"user_id":6535384,"display_name":"r-uu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689078367,"creation_date":1689078367,"question_id":76661972,"body_markdown":"Does anybody else experience strange ```Source compilation had errors``` info messages when running an application with JPMS modules on openliberty. These are info messages I also see in my project:\r\n```\r\n...\\src\\main\\java\\module-info.java:5: Fehler: Modul nicht gefunden: lombok\r\n        requires lombok;\r\n                 ^\r\n...\\src\\main\\java\\module-info.java:6: Fehler: Modul nicht gefunden: jakarta.jakartaee.web.api\r\n        requires jakarta.jakartaee.web.api;\r\n                                      ^\r\n...\\src\\main\\java\\module-info.java:7: Fehler: Modul nicht gefunden: slf4j.api\r\n        requires slf4j.api;\r\n```\r\nMaven compilation and compilation within IDEs work fine (no module not found messages). The ```module-info.java``` contains the following lines:\r\n```\r\nmodule ...api\r\n{\r\n\texports ...api;\r\n\r\n\trequires lombok;\r\n\trequires jakarta.jakartaee.web.api;\r\n\trequires slf4j.api;\r\n}\r\n```\r\nAny idea why openliberty does not find the modules? The complete application consists of multiple maven modules that do not show these messages. However the application seems to run without problems. Is it safe to ignore those messages","title":"source compilation errors for openliberty and JPMS","body":"<p>Does anybody else experience strange <code>Source compilation had errors</code> info messages when running an application with JPMS modules on openliberty. These are info messages I also see in my project:</p>\n<pre><code>...\\src\\main\\java\\module-info.java:5: Fehler: Modul nicht gefunden: lombok\n        requires lombok;\n                 ^\n...\\src\\main\\java\\module-info.java:6: Fehler: Modul nicht gefunden: jakarta.jakartaee.web.api\n        requires jakarta.jakartaee.web.api;\n                                      ^\n...\\src\\main\\java\\module-info.java:7: Fehler: Modul nicht gefunden: slf4j.api\n        requires slf4j.api;\n</code></pre>\n<p>Maven compilation and compilation within IDEs work fine (no module not found messages). The <code>module-info.java</code> contains the following lines:</p>\n<pre><code>module ...api\n{\n    exports ...api;\n\n    requires lombok;\n    requires jakarta.jakartaee.web.api;\n    requires slf4j.api;\n}\n</code></pre>\n<p>Any idea why openliberty does not find the modules? The complete application consists of multiple maven modules that do not show these messages. However the application seems to run without problems. Is it safe to ignore those messages</p>\n"},{"tags":["java","json","jsonpath"],"comments":[{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1534957454,"post_id":51971642,"comment_id":90894223,"body_markdown":"https://stackoverflow.com/questions/38449267/optional-jsonpath-using-jayway may be of use.","body":"<a href=\"https://stackoverflow.com/questions/38449267/optional-jsonpath-using-jayway\" title=\"optional jsonpath using jayway\">stackoverflow.com/questions/38449267/&hellip;</a> may be of use."},{"owner":{"account_id":7893835,"reputation":187,"user_id":5963168,"accept_rate":40,"display_name":"Uni"},"score":0,"creation_date":1535008344,"post_id":51971642,"comment_id":90909995,"body_markdown":"This just skips lacking path or node but my json gets no changes","body":"This just skips lacking path or node but my json gets no changes"}],"answers":[{"comments":[{"owner":{"account_id":7893835,"reputation":187,"user_id":5963168,"accept_rate":40,"display_name":"Uni"},"score":0,"creation_date":1535007369,"post_id":51971790,"comment_id":90909517,"body_markdown":"I&#39;m supposing that the beginning json is empty like this {}\n\nI still get this error\nclass com.jayway.jsonpath.PathNotFoundException : Missing property in path $[&#39;user&#39;]","body":"I&#39;m supposing that the beginning json is empty like this {}  I still get this error class com.jayway.jsonpath.PathNotFoundException : Missing property in path $[&#39;user&#39;]"},{"owner":{"account_id":13886999,"reputation":1120,"user_id":10025913,"display_name":"NumeroUno"},"score":0,"creation_date":1535035024,"post_id":51971790,"comment_id":90926187,"body_markdown":"Can you try with following:  \tprivate static Configuration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL).addOptions(Option.SUPPRESS_EXCEPTIONS);  JsonPath.using(conf).parse(...","body":"Can you try with following:  \tprivate static Configuration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAU&zwnj;&#8203;LT_PATH_LEAF_TO_NULL&zwnj;&#8203;).addOptions(Option.&zwnj;&#8203;SUPPRESS_EXCEPTIONS)&zwnj;&#8203;;  JsonPath.using(conf).parse(..."},{"owner":{"account_id":7893835,"reputation":187,"user_id":5963168,"accept_rate":40,"display_name":"Uni"},"score":0,"creation_date":1535084845,"post_id":51971790,"comment_id":90944137,"body_markdown":"var jsonString = &quot;{}&quot;\n\n        val conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL).addOptions(Option.SUPPRESS_EXCEPTIONS)\n\n        JsonPath.using(conf).parse(jsonString).set(JsonPath.compile(&quot;$.user.name&quot;), &quot;John&quot;)\n\n        Log.d(&quot;TAG&quot;, &quot;new json = $jsonString&quot;)\n\nI tried your solution but jsonString doesn&#39;t change. Could you please help? I&#39;m using Kotlin language. Thank you","body":"var jsonString = &quot;{}&quot;          val conf = Configuration.defaultConfiguration().addOptions(Option.DEFAU&zwnj;&#8203;LT_PATH_LEAF_TO_NULL&zwnj;&#8203;).addOptions(Option.&zwnj;&#8203;SUPPRESS_EXCEPTIONS)          JsonPath.using(conf).parse(jsonString).set(JsonPath.compile(&zwnj;&#8203;&quot;$.user.name&quot;), &quot;John&quot;)          Log.d(&quot;TAG&quot;, &quot;new json = $jsonString&quot;)  I tried your solution but jsonString doesn&#39;t change. Could you please help? I&#39;m using Kotlin language. Thank you"},{"owner":{"account_id":7893835,"reputation":187,"user_id":5963168,"accept_rate":40,"display_name":"Uni"},"score":0,"creation_date":1535774979,"post_id":51971790,"comment_id":91200541,"body_markdown":"It seems that it didn&#39;t work. Could you plz help? Thank you","body":"It seems that it didn&#39;t work. Could you plz help? Thank you"},{"owner":{"account_id":6297822,"reputation":135,"user_id":4893415,"display_name":"Leon Proskurov"},"score":0,"creation_date":1591531404,"post_id":51971790,"comment_id":110085425,"body_markdown":"This looks as a good solution when includes the Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL).addOptions(Option.SUPPRESS_EXCEPTIONS), but what if i want to add nodes to an array?","body":"This looks as a good solution when includes the Configuration.defaultConfiguration().addOptions(Option.DEFAU&zwnj;&#8203;LT_PATH_LEAF_TO_NULL&zwnj;&#8203;).addOptions(Option.&zwnj;&#8203;SUPPRESS_EXCEPTIONS)&zwnj;&#8203;, but what if i want to add nodes to an array?"},{"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"score":1,"creation_date":1603456308,"post_id":51971790,"comment_id":114050435,"body_markdown":"@NumeroUno Even with configuration, this works for a single key, but not for nested path; i.e. `&lt;&quot;{}&quot;, &quot;$.key&quot;, &quot;value&quot;&gt;` works, but `&lt;&quot;{}&quot;, &quot;$.nested.key&quot;, &quot;value&quot;&gt;` doesn&#39;t.","body":"@NumeroUno Even with configuration, this works for a single key, but not for nested path; i.e. <code>&lt;&quot;{}&quot;, &quot;$.key&quot;, &quot;value&quot;&gt;</code> works, but <code>&lt;&quot;{}&quot;, &quot;$.nested.key&quot;, &quot;value&quot;&gt;</code> doesn&#39;t."}],"tags":[],"owner":{"account_id":13886999,"reputation":1120,"user_id":10025913,"display_name":"NumeroUno"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534957136,"creation_date":1534957136,"answer_id":51971790,"question_id":51971642,"body_markdown":"You can do it as follows:\r\n\r\n    JsonPath.parse(jsonString).set(JsonPath.compile(&quot;$.user.name&quot;), &quot;John&quot;);","title":"How to add new node to Json using JsonPath?","body":"<p>You can do it as follows:</p>\n\n<pre><code>JsonPath.parse(jsonString).set(JsonPath.compile(\"$.user.name\"), \"John\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1604214,"reputation":4524,"user_id":1484621,"accept_rate":70,"display_name":"Yu Jiaao"},"score":5,"creation_date":1624604501,"post_id":53529755,"comment_id":120408552,"body_markdown":"setJsonPointerValue(node, parentPointer, parentNode); // recursively reconstruct hierarchy","body":"setJsonPointerValue(node, parentPointer, parentNode); // recursively reconstruct hierarchy"}],"tags":[],"owner":{"account_id":14843736,"reputation":131,"user_id":10719668,"display_name":"Yauhen"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1543540629,"creation_date":1543448387,"answer_id":53529755,"question_id":51971642,"body_markdown":"I tried three different JSON libraries with support of JsonPath/JsonPointer (Jackson, JsonPath and JSON-P) and none of them is able to reconstruct JSON object hierarchy in case of missing parent nodes. So I came up with my own solution for adding new values to JSON object using Jackson/JsonPointer as it allows to navigate through JsonPointer parts.\r\n\r\n    private static final ObjectMapper mapper = new ObjectMapper();\r\n\r\n    public void setJsonPointerValue(ObjectNode node, JsonPointer pointer, JsonNode value) {\r\n        JsonPointer parentPointer = pointer.head();\r\n        JsonNode parentNode = node.at(parentPointer);\r\n        String fieldName = pointer.last().toString().substring(1);\r\n\r\n        if (parentNode.isMissingNode() || parentNode.isNull()) {\r\n            parentNode = StringUtils.isNumeric(fieldName) ? mapper.createArrayNode() : mapper.createObjectNode();\r\n            setJsonPointerValue(parentPointer, parentNode); // recursively reconstruct hierarchy\r\n        }\r\n\r\n        if (parentNode.isArray()) {\r\n            ArrayNode arrayNode = (ArrayNode) parentNode;\r\n            int index = Integer.valueOf(fieldName);\r\n            // expand array in case index is greater than array size (like JavaScript does)\r\n            for (int i = arrayNode.size(); i &lt;= index; i++) {\r\n                arrayNode.addNull();\r\n            }\r\n            arrayNode.set(index, value);\r\n        } else if (parentNode.isObject()) {\r\n            ((ObjectNode) parentNode).set(fieldName, value);\r\n        } else {\r\n            throw new IllegalArgumentException(&quot;`&quot; + fieldName + &quot;` can&#39;t be set for parent node `&quot;\r\n                    + parentPointer + &quot;` because parent is not a container but &quot; + parentNode.getNodeType().name());\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    ObjectNode rootNode = mapper.createObjectNode();\r\n\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/root/array/0/name&quot;), new TextNode(&quot;John&quot;));\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/root/array/0/age&quot;), new IntNode(17));\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/root/array/4&quot;), new IntNode(12));\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/root/object/num&quot;), new IntNode(81));\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/root/object/str&quot;), new TextNode(&quot;text&quot;));\r\n    setJsonPointerValue(rootNode, JsonPointer.compile(&quot;/descr&quot;), new TextNode(&quot;description&quot;));\r\n\r\n    System.out.println(mapper.writerWithDefaultPrettyPrinter().writeValueAsString(rootNode));\r\n\r\nThis generates and prints the following JSON object:\r\n\r\n    {\r\n      &quot;root&quot; : {\r\n        &quot;array&quot; : [ {\r\n          &quot;name&quot; : &quot;John&quot;,\r\n          &quot;age&quot; : 17\r\n        }, null, null, null, 12 ],\r\n        &quot;object&quot; : {\r\n          &quot;num&quot; : 81,\r\n          &quot;str&quot; : &quot;text&quot;\r\n        }\r\n      },\r\n      &quot;descr&quot; : &quot;description&quot;\r\n    }\r\n\r\nFor sure, this doesn&#39;t cover all corner cases but works in most of the cases. Hope this helps someone else.","title":"How to add new node to Json using JsonPath?","body":"<p>I tried three different JSON libraries with support of JsonPath/JsonPointer (Jackson, JsonPath and JSON-P) and none of them is able to reconstruct JSON object hierarchy in case of missing parent nodes. So I came up with my own solution for adding new values to JSON object using Jackson/JsonPointer as it allows to navigate through JsonPointer parts.</p>\n\n<pre><code>private static final ObjectMapper mapper = new ObjectMapper();\n\npublic void setJsonPointerValue(ObjectNode node, JsonPointer pointer, JsonNode value) {\n    JsonPointer parentPointer = pointer.head();\n    JsonNode parentNode = node.at(parentPointer);\n    String fieldName = pointer.last().toString().substring(1);\n\n    if (parentNode.isMissingNode() || parentNode.isNull()) {\n        parentNode = StringUtils.isNumeric(fieldName) ? mapper.createArrayNode() : mapper.createObjectNode();\n        setJsonPointerValue(parentPointer, parentNode); // recursively reconstruct hierarchy\n    }\n\n    if (parentNode.isArray()) {\n        ArrayNode arrayNode = (ArrayNode) parentNode;\n        int index = Integer.valueOf(fieldName);\n        // expand array in case index is greater than array size (like JavaScript does)\n        for (int i = arrayNode.size(); i &lt;= index; i++) {\n            arrayNode.addNull();\n        }\n        arrayNode.set(index, value);\n    } else if (parentNode.isObject()) {\n        ((ObjectNode) parentNode).set(fieldName, value);\n    } else {\n        throw new IllegalArgumentException(\"`\" + fieldName + \"` can't be set for parent node `\"\n                + parentPointer + \"` because parent is not a container but \" + parentNode.getNodeType().name());\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>ObjectNode rootNode = mapper.createObjectNode();\n\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/root/array/0/name\"), new TextNode(\"John\"));\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/root/array/0/age\"), new IntNode(17));\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/root/array/4\"), new IntNode(12));\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/root/object/num\"), new IntNode(81));\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/root/object/str\"), new TextNode(\"text\"));\nsetJsonPointerValue(rootNode, JsonPointer.compile(\"/descr\"), new TextNode(\"description\"));\n\nSystem.out.println(mapper.writerWithDefaultPrettyPrinter().writeValueAsString(rootNode));\n</code></pre>\n\n<p>This generates and prints the following JSON object:</p>\n\n<pre><code>{\n  \"root\" : {\n    \"array\" : [ {\n      \"name\" : \"John\",\n      \"age\" : 17\n    }, null, null, null, 12 ],\n    \"object\" : {\n      \"num\" : 81,\n      \"str\" : \"text\"\n    }\n  },\n  \"descr\" : \"description\"\n}\n</code></pre>\n\n<p>For sure, this doesn't cover all corner cases but works in most of the cases. Hope this helps someone else.</p>\n"},{"tags":[],"owner":{"account_id":294648,"reputation":452,"user_id":598656,"display_name":"user598656"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584700063,"creation_date":1584700063,"answer_id":60772370,"question_id":51971642,"body_markdown":"To create a new node try put(path, key, object) on the WriteContext interface implemented by the result of JsonPath.parse(jsonString).","title":"How to add new node to Json using JsonPath?","body":"<p>To create a new node try put(path, key, object) on the WriteContext interface implemented by the result of JsonPath.parse(jsonString).</p>\n"}],"owner":{"account_id":7893835,"reputation":187,"user_id":5963168,"accept_rate":40,"display_name":"Uni"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17803,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1689078004,"creation_date":1534956553,"question_id":51971642,"body_markdown":"I&#39;m working with JSON and facing some problems.\r\n\r\nI want to insert/update a path in a JSON object. In the case that the path doesn&#39;t exist, it will be created then I insert a new value. In case that it exits, it will be updated by a new value\r\n\r\nFor example, I want to add new path like this:\r\n\r\n    val doc = JsonPath.parse(jsonString)\r\n    doc.add(&quot;$.user.name&quot;, &quot;John&quot;)\r\n\r\nbut I always get this error, because the path doesn&#39;t exist:\r\n\r\n&gt; class com.jayway.jsonpath.PathNotFoundException : Missing property in path $[&#39;user&#39;]\r\n\r\nTherefore I want to create a new path if it does not exist.\r\n\r\nThis is my code, but `jsonString` doesn&#39;t change:\r\n\r\n    var jsonString = &quot;{}&quot; val conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL).addOptions(Option.SUPPRESS_EXCEPTIONS)\r\n    JsonPath.using(conf).parse(jsonString).set(JsonPath.compile(&quot;$.user.name&quot;), &quot;John&quot;) \r\n    Log.d(&quot;TAG&quot;, &quot;new json = $jsonString&quot;) \r\n\r\n\r\nPlease give me your advice. Thank you very much!!\r\n","title":"How to add new node to Json using JsonPath?","body":"<p>I'm working with JSON and facing some problems.</p>\n\n<p>I want to insert/update a path in a JSON object. In the case that the path doesn't exist, it will be created then I insert a new value. In case that it exits, it will be updated by a new value</p>\n\n<p>For example, I want to add new path like this:</p>\n\n<pre><code>val doc = JsonPath.parse(jsonString)\ndoc.add(\"$.user.name\", \"John\")\n</code></pre>\n\n<p>but I always get this error, because the path doesn't exist:</p>\n\n<blockquote>\n  <p>class com.jayway.jsonpath.PathNotFoundException : Missing property in path $['user']</p>\n</blockquote>\n\n<p>Therefore I want to create a new path if it does not exist.</p>\n\n<p>This is my code, but <code>jsonString</code> doesn't change:</p>\n\n<pre><code>var jsonString = \"{}\" val conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL).addOptions(Option.SUPPRESS_EXCEPTIONS)\nJsonPath.using(conf).parse(jsonString).set(JsonPath.compile(\"$.user.name\"), \"John\") \nLog.d(\"TAG\", \"new json = $jsonString\") \n</code></pre>\n\n<p>Please give me your advice. Thank you very much!!</p>\n"},{"tags":["java","units-of-measurement"],"comments":[{"owner":{"account_id":241248,"reputation":1807,"user_id":511940,"display_name":"Manu Clementz"},"score":0,"creation_date":1332458951,"post_id":9832021,"comment_id":12528044,"body_markdown":"Couldn&#39;t you have classes that map the units of measure in the database, and use them directly ?","body":"Couldn&#39;t you have classes that map the units of measure in the database, and use them directly ?"},{"owner":{"account_id":71001,"reputation":24097,"user_id":205426,"accept_rate":60,"display_name":"Woot4Moo"},"score":0,"creation_date":1332459039,"post_id":9832021,"comment_id":12528061,"body_markdown":"@ManuLetroll is it really worth the database hit?","body":"@ManuLetroll is it really worth the database hit?"},{"owner":{"account_id":241248,"reputation":1807,"user_id":511940,"display_name":"Manu Clementz"},"score":0,"creation_date":1332459137,"post_id":9832021,"comment_id":12528089,"body_markdown":"Well maybe not, but it&#39;s the most logical thing IMO.","body":"Well maybe not, but it&#39;s the most logical thing IMO."},{"owner":{"account_id":122311,"reputation":7485,"user_id":316041,"accept_rate":75,"display_name":"bancer"},"score":1,"creation_date":1332459582,"post_id":9832021,"comment_id":12528164,"body_markdown":"Take a look at this article http://www.step-10.com/SoftwareDesign/General/QuanitiesAndUnitsOfMeasure.html. Martin Fowler has solved your problem already :)","body":"Take a look at this article <a href=\"http://www.step-10.com/SoftwareDesign/General/QuanitiesAndUnitsOfMeasure.html\" rel=\"nofollow noreferrer\">step-10.com/SoftwareDesign/General/&hellip;</a>. Martin Fowler has solved your problem already :)"}],"answers":[{"comments":[{"owner":{"account_id":131162,"reputation":823,"user_id":330973,"accept_rate":91,"display_name":"user330973"},"score":0,"creation_date":1332460545,"post_id":9832067,"comment_id":12528390,"body_markdown":"I would certainly consider JScience for conversion etc, However, I would also need to map every UOM value that I have stored in the database to JScience class. I&#39;m wondering if its worth bringing in a new library or I can solve the problem with a home grown solution","body":"I would certainly consider JScience for conversion etc, However, I would also need to map every UOM value that I have stored in the database to JScience class. I&#39;m wondering if its worth bringing in a new library or I can solve the problem with a home grown solution"},{"owner":{"account_id":114118,"reputation":4732,"user_id":300236,"accept_rate":67,"display_name":"Brill Pappin"},"score":0,"creation_date":1494350496,"post_id":9832067,"comment_id":74787202,"body_markdown":"I&#39;ve been looking at the various JSRs and unit libraries all day. None of them are great for serialization, which is really where the library is needed.\nI don&#39;t know what possessed the creation of all these code not using enums for the units, butt thats exactly what happened.","body":"I&#39;ve been looking at the various JSRs and unit libraries all day. None of them are great for serialization, which is really where the library is needed. I don&#39;t know what possessed the creation of all these code not using enums for the units, butt thats exactly what happened."}],"tags":[],"owner":{"account_id":71001,"reputation":24097,"user_id":205426,"accept_rate":60,"display_name":"Woot4Moo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332458875,"creation_date":1332458875,"answer_id":9832067,"question_id":9832021,"body_markdown":"I would recommend the [JScience library][1] which is an implementation of [JSR 275][2].  \r\n\r\nAccording to [this post][3]  it can do things such as:\r\n\r\n    UnitConverter toKilometers = MILE.getConverterTo(KILOMETER);\r\n    double km = toKilometers.convert(Measure.valueOf(100, MILE).doubleValue(MILE));\r\n\r\n\r\n\r\nIf you do not want to add the new library there is nothing inherently wrong with using `String` objects within a class.  If you are never going to perform calculations on them there is even less to worry about.  However, you will most likely need to use `Double`s as that will be the way to get &quot;correct&quot; translations to and from the metric system.\r\n\r\n  [1]: http://jscience.org/api/javax/measure/unit/package-summary.html\r\n  [2]: http://www.jcp.org/en/jsr/detail?id=275\r\n  [3]: https://stackoverflow.com/a/1193830/205426","title":"Storing and Managing unit of measurements","body":"<p>I would recommend the <a href=\"http://jscience.org/api/javax/measure/unit/package-summary.html\" rel=\"nofollow noreferrer\">JScience library</a> which is an implementation of <a href=\"http://www.jcp.org/en/jsr/detail?id=275\" rel=\"nofollow noreferrer\">JSR 275</a>.  </p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/1193830/205426\">this post</a>  it can do things such as:</p>\n\n<pre><code>UnitConverter toKilometers = MILE.getConverterTo(KILOMETER);\ndouble km = toKilometers.convert(Measure.valueOf(100, MILE).doubleValue(MILE));\n</code></pre>\n\n<p>If you do not want to add the new library there is nothing inherently wrong with using <code>String</code> objects within a class.  If you are never going to perform calculations on them there is even less to worry about.  However, you will most likely need to use <code>Double</code>s as that will be the way to get \"correct\" translations to and from the metric system.</p>\n"},{"comments":[{"owner":{"account_id":220145,"reputation":3091,"user_id":477399,"accept_rate":53,"display_name":"PlexQ"},"score":0,"creation_date":1332459383,"post_id":9832070,"comment_id":12528130,"body_markdown":"This doesn&#39;t solve how to keep the system consistent at the database level.  It is also probably unnecessary abstraction.  More abstraction means more complexity, and more complexity means more trouble and more bugs.  Unless there is a compelling case where it is important to know if it&#39;s an American unit or a British unit or a French unit, it&#39;s likely more trouble than it&#39;s worth.","body":"This doesn&#39;t solve how to keep the system consistent at the database level.  It is also probably unnecessary abstraction.  More abstraction means more complexity, and more complexity means more trouble and more bugs.  Unless there is a compelling case where it is important to know if it&#39;s an American unit or a British unit or a French unit, it&#39;s likely more trouble than it&#39;s worth."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1332459823,"post_id":9832070,"comment_id":12528221,"body_markdown":"I disagree.  Better abstraction is not an unnecessary trouble.  And how is your Units enum an improvement?  There aren&#39;t French and American units, as any scientist would know, but there are metric and British (e.g. kg versus lbm).  Will you have pressure, time, and every other type of unit there is in your enum?  That seems a worse idea to me.  The OP explicitly asked about conversions.  Your enum doesn&#39;t help at all.","body":"I disagree.  Better abstraction is not an unnecessary trouble.  And how is your Units enum an improvement?  There aren&#39;t French and American units, as any scientist would know, but there are metric and British (e.g. kg versus lbm).  Will you have pressure, time, and every other type of unit there is in your enum?  That seems a worse idea to me.  The OP explicitly asked about conversions.  Your enum doesn&#39;t help at all."},{"owner":{"account_id":220145,"reputation":3091,"user_id":477399,"accept_rate":53,"display_name":"PlexQ"},"score":0,"creation_date":1332654070,"post_id":9832070,"comment_id":12567076,"body_markdown":"Sorry, but you are incorrect.  An American Gallon and a British gallon are not the same.  Metric units are held by a set of standard units held in Paris, so French seems an appropriate moniker as any.","body":"Sorry, but you are incorrect.  An American Gallon and a British gallon are not the same.  Metric units are held by a set of standard units held in Paris, so French seems an appropriate moniker as any."},{"owner":{"account_id":220145,"reputation":3091,"user_id":477399,"accept_rate":53,"display_name":"PlexQ"},"score":0,"creation_date":1332654641,"post_id":9832070,"comment_id":12567113,"body_markdown":"I&#39;m also missing where the question asked about conversion.  &quot;Better&quot; is a relative thing, and too much abstract will always end up causing trouble.  It disobeys basic good practice, which states that a codebase should only contain as much code as is in use.  Providing for a situation that hasn&#39;t arisen is writing code that may never be used.  Simple is better, at least in most eyes, and having a new class and therefore a new table is not more simple, it&#39;s less.","body":"I&#39;m also missing where the question asked about conversion.  &quot;Better&quot; is a relative thing, and too much abstract will always end up causing trouble.  It disobeys basic good practice, which states that a codebase should only contain as much code as is in use.  Providing for a situation that hasn&#39;t arisen is writing code that may never be used.  Simple is better, at least in most eyes, and having a new class and therefore a new table is not more simple, it&#39;s less."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1332675220,"post_id":9832070,"comment_id":12569496,"body_markdown":"The question might not have explicitly talked about conversions, but if you know how these things go you&#39;ll realize that it&#39;ll be necessary at some point along the way.  I agree, an abstraction that goes beyond understanding is worthless, but we aren&#39;t there with what I&#39;m suggesting.  We&#39;ll disagree here.","body":"The question might not have explicitly talked about conversions, but if you know how these things go you&#39;ll realize that it&#39;ll be necessary at some point along the way.  I agree, an abstraction that goes beyond understanding is worthless, but we aren&#39;t there with what I&#39;m suggesting.  We&#39;ll disagree here."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1332675333,"post_id":9832070,"comment_id":12569518,"body_markdown":"You&#39;ve got me with the American and British gallons.  But international != French, even if they keep the standards in Paris.  It used to be a meter stick, but now length is defined in terms of the wavelength of light emitted by krypton-86.  That&#39;s true everywhere, even outside Paris.","body":"You&#39;ve got me with the American and British gallons.  But international != French, even if they keep the standards in Paris.  It used to be a meter stick, but now length is defined in terms of the wavelength of light emitted by krypton-86.  That&#39;s true everywhere, even outside Paris."},{"owner":{"account_id":140434,"reputation":11503,"user_id":346741,"accept_rate":84,"display_name":"Rob"},"score":0,"creation_date":1369002902,"post_id":9832070,"comment_id":23931710,"body_markdown":"Enum is the right way to do this. The problem is that you can&#39;t extend Enums, because it would be nice to have Unit as a base and then WeightUnits, TimeUnits, etc.","body":"Enum is the right way to do this. The problem is that you can&#39;t extend Enums, because it would be nice to have Unit as a base and then WeightUnits, TimeUnits, etc."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1332458889,"creation_date":1332458889,"answer_id":9832070,"question_id":9832021,"body_markdown":"I think you should have a better abstraction than a String; it&#39;s little more than a primitive.\r\n\r\nI&#39;d write a Units class that would parse and store those Strings from the database and allow you to compare them easily.\r\n\r\n    public class Units {\r\n        private final String name;\r\n        \r\n        // constructors, equals, hashCode, toString and other operations here\r\n    }\r\n\r\nIt might also be useful to have categories of Units.  (You can measure pressure a lot of ways.)  British and international units can describe the same thing.  \r\n\r\nYou might also have categories based on physical quantities (e.g. force, mass, charge, time, etc.)\r\n","title":"Storing and Managing unit of measurements","body":"<p>I think you should have a better abstraction than a String; it's little more than a primitive.</p>\n\n<p>I'd write a Units class that would parse and store those Strings from the database and allow you to compare them easily.</p>\n\n<pre><code>public class Units {\n    private final String name;\n\n    // constructors, equals, hashCode, toString and other operations here\n}\n</code></pre>\n\n<p>It might also be useful to have categories of Units.  (You can measure pressure a lot of ways.)  British and international units can describe the same thing.  </p>\n\n<p>You might also have categories based on physical quantities (e.g. force, mass, charge, time, etc.)</p>\n"},{"comments":[{"owner":{"account_id":131162,"reputation":823,"user_id":330973,"accept_rate":91,"display_name":"user330973"},"score":0,"creation_date":1332460030,"post_id":9832109,"comment_id":12528269,"body_markdown":"My first choice was enums as well, but I was concerned about integrity issues when we need to add more units in the future.","body":"My first choice was enums as well, but I was concerned about integrity issues when we need to add more units in the future."},{"owner":{"account_id":220145,"reputation":3091,"user_id":477399,"accept_rate":53,"display_name":"PlexQ"},"score":0,"creation_date":1332654617,"post_id":9832109,"comment_id":12567111,"body_markdown":"Well, the other solution doesn&#39;t provide any improvement to integrity either.  A new random unit could have been inserted into that table as much as an invalid string could have been inserted as a row in the main one.  You&#39;ll still need a check constraint to ensure consistency in either case.","body":"Well, the other solution doesn&#39;t provide any improvement to integrity either.  A new random unit could have been inserted into that table as much as an invalid string could have been inserted as a row in the main one.  You&#39;ll still need a check constraint to ensure consistency in either case."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1332675396,"post_id":9832109,"comment_id":12569528,"body_markdown":"Integrity of the database is the concern of the schema designer.  And no schema will prevent you from entering incorrect units.","body":"Integrity of the database is the concern of the schema designer.  And no schema will prevent you from entering incorrect units."}],"tags":[],"owner":{"account_id":220145,"reputation":3091,"user_id":477399,"accept_rate":53,"display_name":"PlexQ"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1332459204,"creation_date":1332459204,"answer_id":9832109,"question_id":9832021,"body_markdown":"Conversion issues aside, enums are a fair way to solve this:\r\n\r\n    enum Units {\r\n      Kilograms,Pounds,Stone\r\n    }\r\n\r\n    class Foo {\r\n      double amount;\r\n      Units units;\r\n    }\r\n\r\nMost ORMs will convert the enum to a String.  Your Java is type safe, and you can make the database consistent by using a simple check constraint.  Pretty much all RDBMSes support them.\r\n\r\nIf you need to get more sophisticated, there are ways, but often more complicated just means more trouble not necessarily more better.","title":"Storing and Managing unit of measurements","body":"<p>Conversion issues aside, enums are a fair way to solve this:</p>\n\n<pre><code>enum Units {\n  Kilograms,Pounds,Stone\n}\n\nclass Foo {\n  double amount;\n  Units units;\n}\n</code></pre>\n\n<p>Most ORMs will convert the enum to a String.  Your Java is type safe, and you can make the database consistent by using a simple check constraint.  Pretty much all RDBMSes support them.</p>\n\n<p>If you need to get more sophisticated, there are ways, but often more complicated just means more trouble not necessarily more better.</p>\n"}],"owner":{"account_id":131162,"reputation":823,"user_id":330973,"accept_rate":91,"display_name":"user330973"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3746,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":9832070,"answer_count":3,"score":1,"last_activity_date":1689077733,"creation_date":1332458589,"question_id":9832021,"body_markdown":"I am dealing with a clinical application that uses both base and derived units of measure. \r\n\r\nCurrently, we store them as a text field in a separate column in each table that requires units. However, I am planning to redesign the database so that we have all the units of measurement in one table and use foreign keys in the table that require UOMs. \r\n\r\nThis kind of solves the problem at the database level. However, in the Java code, we use String to store the units like so:\r\n```java\r\nclass Foo {\r\n    double amount;\r\n    String unit;\r\n}\r\n```\r\nI imagine using String to store units could become a nightmare going forward. I need suggestions on a clean way to manage units of measure so that I can, say, compare two Foos or add two Foos by making sure they have the same units, etc.","title":"Storing and Managing unit of measurements","body":"<p>I am dealing with a clinical application that uses both base and derived units of measure.</p>\n<p>Currently, we store them as a text field in a separate column in each table that requires units. However, I am planning to redesign the database so that we have all the units of measurement in one table and use foreign keys in the table that require UOMs.</p>\n<p>This kind of solves the problem at the database level. However, in the Java code, we use String to store the units like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n    double amount;\n    String unit;\n}\n</code></pre>\n<p>I imagine using String to store units could become a nightmare going forward. I need suggestions on a clean way to manage units of measure so that I can, say, compare two Foos or add two Foos by making sure they have the same units, etc.</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1689077076,"post_id":76661733,"comment_id":135159184,"body_markdown":"Don&#39;t post code as images, those are unreadable. Add code as code (just as your stack trace).","body":"Don&#39;t post code as images, those are unreadable. Add code as code (just as your stack trace)."},{"owner":{"account_id":5213275,"reputation":77,"user_id":4168995,"display_name":"erhanck"},"score":1,"creation_date":1689077399,"post_id":76661733,"comment_id":135159246,"body_markdown":"sorry, i just added code as code","body":"sorry, i just added code as code"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689077558,"post_id":76661733,"comment_id":135159287,"body_markdown":"Your property is named `subCategories` not `SubProduceCategory`. Rename the method accordingly. `findAllBySubCategoriesId` should do the trick. Assuming `id`  is the correct property. Unrelated but unnecessary are the `@Repository` and the `findById` method.","body":"Your property is named <code>subCategories</code> not <code>SubProduceCategory</code>. Rename the method accordingly. <code>findAllBySubCategoriesId</code> should do the trick. Assuming <code>id</code>  is the correct property. Unrelated but unnecessary are the <code>@Repository</code> and the <code>findById</code> method."},{"owner":{"account_id":5213275,"reputation":77,"user_id":4168995,"display_name":"erhanck"},"score":0,"creation_date":1689077893,"post_id":76661733,"comment_id":135159369,"body_markdown":"i will delete @Repository annotation and findById method, i also tried findAllBySubCategoriesId, it works ! thanks for your help.","body":"i will delete @Repository annotation and findById method, i also tried findAllBySubCategoriesId, it works ! thanks for your help."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689112066,"post_id":76661733,"comment_id":135166624,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":5213275,"reputation":77,"user_id":4168995,"display_name":"erhanck"},"score":0,"creation_date":1689687237,"post_id":76661733,"comment_id":135246716,"body_markdown":"@M.Deinum i want ask you another question, when i insert new data it inserting double way, how to i get one way records ?  for example records by produceCategoryId not include subProduceCategoryId, i did not handle it..","body":"@M.Deinum i want ask you another question, when i insert new data it inserting double way, how to i get one way records ?  for example records by produceCategoryId not include subProduceCategoryId, i did not handle it.."}],"owner":{"account_id":5213275,"reputation":77,"user_id":4168995,"display_name":"erhanck"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689077363,"creation_date":1689076646,"question_id":76661733,"body_markdown":"in my spring boot project with mysql i have this model(ProduceCategoryModel), im using nested same object(ProduceCategoryModel) in a model for subCategories;\r\n\r\n\r\n```\r\npackage com.eck.data.api.contract.model.produce;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport javax.persistence.CascadeType;\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.FetchType;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.JoinColumn;\r\nimport javax.persistence.JoinTable;\r\nimport javax.persistence.ManyToMany;\r\nimport javax.persistence.ManyToOne;\r\nimport javax.persistence.OneToMany;\r\nimport javax.persistence.Table;\r\nimport javax.persistence.UniqueConstraint;\r\n\r\nimport com.eck.data.api.contract.model.site.SiteModel;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\n@Entity\r\n@Table(name = &quot;produceCategory&quot;, uniqueConstraints = {\r\n\t@UniqueConstraint(name = &quot;UniqueProduceCategoryModelName&quot;, columnNames = { &quot;name&quot; }) })\r\npublic class ProduceCategoryModel implements Serializable {\r\n\r\n    private static final long serialVersionUID = 6532245350339799470L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private int id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;creationDate&quot;)\r\n    private Date creationDate;\r\n\r\n    @Column(name = &quot;lastModification&quot;)\r\n    private Date lastModification;\r\n\r\n    @Column(name = &quot;active&quot;, columnDefinition = &quot;boolean default false&quot;)\r\n    private boolean active;\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;produceCategory&quot;)\r\n    private List&lt;ProduceCategoryDescriptionModel&gt; descriptions;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL }, mappedBy = &quot;produceCategories&quot;)\r\n    private List&lt;ProduceModel&gt; produces;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })\r\n    @JoinTable(name = &quot;subProduceCategories&quot;, joinColumns = {\r\n\t    @JoinColumn(name = &quot;produceCategoryId&quot;) }, inverseJoinColumns = {\r\n\t\t    @JoinColumn(name = &quot;subProduceCategoryId&quot;) }, uniqueConstraints = @UniqueConstraint(name = &quot;UniqueSubProduceCategoryId&quot;, columnNames = {\r\n\t\t\t    &quot;produceCategoryId&quot;, &quot;subProduceCategoryId&quot; }))\r\n    private List&lt;ProduceCategoryModel&gt; subCategories;\r\n\r\n    @JsonIgnore\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;siteId&quot;, nullable = false)\r\n    private SiteModel site;\r\n\r\n    public int getId() {\r\n\treturn id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n\tthis.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n\treturn name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    public Date getCreationDate() {\r\n\treturn creationDate;\r\n    }\r\n\r\n    public void setCreationDate(Date creationDate) {\r\n\tthis.creationDate = creationDate;\r\n    }\r\n\r\n    public Date getLastModification() {\r\n\treturn lastModification;\r\n    }\r\n\r\n    public void setLastModification(Date lastModification) {\r\n\tthis.lastModification = lastModification;\r\n    }\r\n\r\n    public boolean isActive() {\r\n\treturn active;\r\n    }\r\n\r\n    public void setActive(boolean active) {\r\n\tthis.active = active;\r\n    }\r\n\r\n    public List&lt;ProduceCategoryDescriptionModel&gt; getDescriptions() {\r\n\treturn descriptions;\r\n    }\r\n\r\n    public void setDescriptions(List&lt;ProduceCategoryDescriptionModel&gt; descriptions) {\r\n\tthis.descriptions = descriptions;\r\n    }\r\n\r\n    public List&lt;ProduceModel&gt; getProduces() {\r\n\treturn produces;\r\n    }\r\n\r\n    public void setProduces(List&lt;ProduceModel&gt; produces) {\r\n\tthis.produces = produces;\r\n    }\r\n\r\n    public List&lt;ProduceCategoryModel&gt; getSubCategories() {\r\n\treturn subCategories;\r\n    }\r\n\r\n    public void setSubCategories(List&lt;ProduceCategoryModel&gt; subCategories) {\r\n\tthis.subCategories = subCategories;\r\n    }\r\n\r\n    public SiteModel getSite() {\r\n\treturn site;\r\n    }\r\n\r\n    public void setSite(SiteModel site) {\r\n\tthis.site = site;\r\n    }\r\n\r\n    public void addSubCategory(ProduceCategoryModel category) {\r\n\tthis.subCategories.add(category);\r\n\tcategory.getSubCategories().add(this);\r\n    }\r\n\r\n    public void removeSubCategory(int categoryId) {\r\n\tProduceCategoryModel category = this.subCategories.stream().filter(t -&gt; t.getId() == categoryId).findFirst()\r\n\t\t.orElse(null);\r\n\tif (category != null) {\r\n\t    this.subCategories.remove(category);\r\n\t    category.getSubCategories().remove(this);\r\n\t}\r\n    }\r\n\r\n    public void addProduce(ProduceModel produce) {\r\n\tthis.produces.add(produce);\r\n\tproduce.getProduceCategories().add(this);\r\n    }\r\n\r\n    public void removeProduce(int produceId) {\r\n\tProduceModel produce = this.produces.stream().filter(t -&gt; t.getId() == produceId).findFirst().orElse(null);\r\n\tif (produce != null) {\r\n\t    this.produces.remove(produce);\r\n\t    produce.getProduceCategories().remove(this);\r\n\t}\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nyou can see table details here;\r\n\r\n[![enter image description here](https://i.stack.imgur.com/dD5Ay.png)](https://i.stack.imgur.com/dD5Ay.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/a85o5.png)](https://i.stack.imgur.com/a85o5.png)\r\n\r\nhere is my JpaRepository service details\r\n```\r\npackage com.eck.data.api.controller.produce.service;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.eck.data.api.contract.model.produce.ProduceCategoryModel;\r\n\r\n@Repository\r\npublic interface IProduceCategoryService extends JpaRepository&lt;ProduceCategoryModel, Long&gt; {\r\n\r\n    ProduceCategoryModel findById(int id);\r\n\r\n    List&lt;ProduceCategoryModel&gt; findAllBySiteId(int siteId);\r\n\r\n    List&lt;ProduceCategoryModel&gt; findAllBySubProduceCategoryId(int subProduceCategoryId);\r\n\r\n}\r\n\r\n```\r\n\r\n\r\ni know No property &#39;subProduceCategoryId&#39; found for type &#39;ProduceCategoryModel&#39; , \r\nmy question is how can i get subCategories data list with JpaRepository service without not create new model on project ?\r\n\r\nhappy coding!\r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n[2m2023-07-11 14:51:43.221[0;39m [31mERROR[0;39m [35m2329[0;39m [2m---[0;39m [2m[           main][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;produceCategoryController&#39;: Unsatisfied dependency expressed through field &#39;produceCategoryService&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;IProduceCategoryService&#39; defined in com.eck.data.api.controller.produce.service.IProduceCategoryService defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int); Reason: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property &#39;subProduceCategoryId&#39; found for type &#39;ProduceCategoryModel&#39;; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property &#39;subProduceCategoryId&#39; found for type &#39;ProduceCategoryModel&#39;\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat com.eck.data.api.Application.main(Application.java:10) ~[classes/:na]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;IProduceCategoryService&#39; defined in com.eck.data.api.controller.produce.service.IProduceCategoryService defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int); Reason: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property &#39;subProduceCategoryId&#39; found for type &#39;ProduceCategoryModel&#39;; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property &#39;subProduceCategoryId&#39; found for type &#39;ProduceCategoryModel&#39;\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\t... 20 common frames omitted\r\n```\r\n\r\n\r\nim expecting how can i solve with right way.","title":"Spring Nested Object How Can I Get With JpaRepository","body":"<p>in my spring boot project with mysql i have this model(ProduceCategoryModel), im using nested same object(ProduceCategoryModel) in a model for subCategories;</p>\n<pre><code>package com.eck.data.api.contract.model.produce;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.List;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.OneToMany;\nimport javax.persistence.Table;\nimport javax.persistence.UniqueConstraint;\n\nimport com.eck.data.api.contract.model.site.SiteModel;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\n@Entity\n@Table(name = &quot;produceCategory&quot;, uniqueConstraints = {\n    @UniqueConstraint(name = &quot;UniqueProduceCategoryModelName&quot;, columnNames = { &quot;name&quot; }) })\npublic class ProduceCategoryModel implements Serializable {\n\n    private static final long serialVersionUID = 6532245350339799470L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;creationDate&quot;)\n    private Date creationDate;\n\n    @Column(name = &quot;lastModification&quot;)\n    private Date lastModification;\n\n    @Column(name = &quot;active&quot;, columnDefinition = &quot;boolean default false&quot;)\n    private boolean active;\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;produceCategory&quot;)\n    private List&lt;ProduceCategoryDescriptionModel&gt; descriptions;\n\n    @JsonIgnore\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL }, mappedBy = &quot;produceCategories&quot;)\n    private List&lt;ProduceModel&gt; produces;\n\n    @JsonIgnore\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })\n    @JoinTable(name = &quot;subProduceCategories&quot;, joinColumns = {\n        @JoinColumn(name = &quot;produceCategoryId&quot;) }, inverseJoinColumns = {\n            @JoinColumn(name = &quot;subProduceCategoryId&quot;) }, uniqueConstraints = @UniqueConstraint(name = &quot;UniqueSubProduceCategoryId&quot;, columnNames = {\n                &quot;produceCategoryId&quot;, &quot;subProduceCategoryId&quot; }))\n    private List&lt;ProduceCategoryModel&gt; subCategories;\n\n    @JsonIgnore\n    @ManyToOne\n    @JoinColumn(name = &quot;siteId&quot;, nullable = false)\n    private SiteModel site;\n\n    public int getId() {\n    return id;\n    }\n\n    public void setId(int id) {\n    this.id = id;\n    }\n\n    public String getName() {\n    return name;\n    }\n\n    public void setName(String name) {\n    this.name = name;\n    }\n\n    public Date getCreationDate() {\n    return creationDate;\n    }\n\n    public void setCreationDate(Date creationDate) {\n    this.creationDate = creationDate;\n    }\n\n    public Date getLastModification() {\n    return lastModification;\n    }\n\n    public void setLastModification(Date lastModification) {\n    this.lastModification = lastModification;\n    }\n\n    public boolean isActive() {\n    return active;\n    }\n\n    public void setActive(boolean active) {\n    this.active = active;\n    }\n\n    public List&lt;ProduceCategoryDescriptionModel&gt; getDescriptions() {\n    return descriptions;\n    }\n\n    public void setDescriptions(List&lt;ProduceCategoryDescriptionModel&gt; descriptions) {\n    this.descriptions = descriptions;\n    }\n\n    public List&lt;ProduceModel&gt; getProduces() {\n    return produces;\n    }\n\n    public void setProduces(List&lt;ProduceModel&gt; produces) {\n    this.produces = produces;\n    }\n\n    public List&lt;ProduceCategoryModel&gt; getSubCategories() {\n    return subCategories;\n    }\n\n    public void setSubCategories(List&lt;ProduceCategoryModel&gt; subCategories) {\n    this.subCategories = subCategories;\n    }\n\n    public SiteModel getSite() {\n    return site;\n    }\n\n    public void setSite(SiteModel site) {\n    this.site = site;\n    }\n\n    public void addSubCategory(ProduceCategoryModel category) {\n    this.subCategories.add(category);\n    category.getSubCategories().add(this);\n    }\n\n    public void removeSubCategory(int categoryId) {\n    ProduceCategoryModel category = this.subCategories.stream().filter(t -&gt; t.getId() == categoryId).findFirst()\n        .orElse(null);\n    if (category != null) {\n        this.subCategories.remove(category);\n        category.getSubCategories().remove(this);\n    }\n    }\n\n    public void addProduce(ProduceModel produce) {\n    this.produces.add(produce);\n    produce.getProduceCategories().add(this);\n    }\n\n    public void removeProduce(int produceId) {\n    ProduceModel produce = this.produces.stream().filter(t -&gt; t.getId() == produceId).findFirst().orElse(null);\n    if (produce != null) {\n        this.produces.remove(produce);\n        produce.getProduceCategories().remove(this);\n    }\n    }\n}\n</code></pre>\n<p>you can see table details here;</p>\n<p><a href=\"https://i.stack.imgur.com/dD5Ay.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dD5Ay.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/a85o5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a85o5.png\" alt=\"enter image description here\" /></a></p>\n<p>here is my JpaRepository service details</p>\n<pre><code>package com.eck.data.api.controller.produce.service;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.eck.data.api.contract.model.produce.ProduceCategoryModel;\n\n@Repository\npublic interface IProduceCategoryService extends JpaRepository&lt;ProduceCategoryModel, Long&gt; {\n\n    ProduceCategoryModel findById(int id);\n\n    List&lt;ProduceCategoryModel&gt; findAllBySiteId(int siteId);\n\n    List&lt;ProduceCategoryModel&gt; findAllBySubProduceCategoryId(int subProduceCategoryId);\n\n}\n\n</code></pre>\n<p>i know No property 'subProduceCategoryId' found for type 'ProduceCategoryModel' ,\nmy question is how can i get subCategories data list with JpaRepository service without not create new model on project ?</p>\n<p>happy coding!</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n[2m2023-07-11 14:51:43.221[0;39m [31mERROR[0;39m [35m2329[0;39m [2m---[0;39m [2m[           main][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'produceCategoryController': Unsatisfied dependency expressed through field 'produceCategoryService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'IProduceCategoryService' defined in com.eck.data.api.controller.produce.service.IProduceCategoryService defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int); Reason: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property 'subProduceCategoryId' found for type 'ProduceCategoryModel'; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property 'subProduceCategoryId' found for type 'ProduceCategoryModel'\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\n    at com.eck.data.api.Application.main(Application.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'IProduceCategoryService' defined in com.eck.data.api.controller.produce.service.IProduceCategoryService defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int); Reason: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property 'subProduceCategoryId' found for type 'ProduceCategoryModel'; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.eck.data.api.controller.produce.service.IProduceCategoryService.findAllBySubProduceCategoryId(int)! No property 'subProduceCategoryId' found for type 'ProduceCategoryModel'\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.21.jar:5.3.21]\n    ... 20 common frames omitted\n</code></pre>\n<p>im expecting how can i solve with right way.</p>\n"},{"tags":["java","rest-assured"],"comments":[{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":0,"creation_date":1689075571,"post_id":76661554,"comment_id":135158910,"body_markdown":"Maybe because you are getting the &quot;actual timestamp&quot; in previous of later statement therefore you are getting this difference.","body":"Maybe because you are getting the &quot;actual timestamp&quot; in previous of later statement therefore you are getting this difference."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1689075931,"post_id":76661554,"comment_id":135158981,"body_markdown":"Basically, stop depending on &quot;the current instant in time&quot; as an untestable, always-changing thing. Change to use java.time, and pass in a Clock as a dependency.","body":"Basically, stop depending on &quot;the current instant in time&quot; as an untestable, always-changing thing. Change to use java.time, and pass in a Clock as a dependency."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1689076072,"post_id":76661554,"comment_id":135159005,"body_markdown":"If you want to allow offsets of one or two seconds, you can compute a `Duration` between actual and expected time and let it pass your test if the duration in seconds is 1 or less, for example.","body":"If you want to allow offsets of one or two seconds, you can compute a <code>Duration</code> between actual and expected time and let it pass your test if the duration in seconds is 1 or less, for example."}],"answers":[{"tags":[],"owner":{"account_id":6732610,"reputation":21,"user_id":5188393,"display_name":"Vinayak Bansal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689077218,"creation_date":1689077218,"answer_id":76661808,"question_id":76661554,"body_markdown":"When comparing timestamps in tests, it&#39;s common for there to be a slight variation due to the execution time of the code. To handle this situation, you can introduce a tolerance or buffer when comparing timestamps. Here&#39;s an example of how you can handle it in Java:-\r\n\r\n&gt; import java.time.Instant;\r\n&gt; import java.time.temporal.ChronoUnit;\r\n&gt; \r\n&gt; Instant expectedTimestamp = Instant.parse(&quot;2023-07-11T16:51:41Z&quot;);\r\n&gt; Instant actualTimestamp = Instant.parse(&quot;2023-07-11T16:51:42Z&quot;); long\r\n&gt; toleranceSeconds = 1; // Define your tolerance in seconds\r\n&gt; \r\n&gt; boolean timestampsMatch =\r\n&gt; Math.abs(ChronoUnit.SECONDS.between(expectedTimestamp,\r\n&gt; actualTimestamp)) &lt;= toleranceSeconds;\r\n&gt; \r\n&gt; System.out.println(&quot;Timestamps match: &quot; + timestampsMatch);\r\n\r\nIn the above example, a tolerance of 1 second is defined **(toleranceSeconds = 1)**. The Math.abs() function is used to calculate the absolute difference in seconds between the expected and actual timestamps. If the absolute difference is less than or equal to the defined tolerance, then the timestamps are considered to match.\r\n\r\nYou can adjust the value of toleranceSeconds according to your specific needs and requirements. Keep in mind that a larger tolerance may result in a higher chance of false positives or incorrect matches.\r\n\r\n***By introducing a tolerance, you account for slight variations in execution time and ensure that the test passes even if the timestamps differ by a small amount.***","title":"while validating timeStamp actual and expected is varying by one second that probably is execution time . how to handle it","body":"<p>When comparing timestamps in tests, it's common for there to be a slight variation due to the execution time of the code. To handle this situation, you can introduce a tolerance or buffer when comparing timestamps. Here's an example of how you can handle it in Java:-</p>\n<blockquote>\n<p>import java.time.Instant;\nimport java.time.temporal.ChronoUnit;</p>\n<p>Instant expectedTimestamp = Instant.parse(&quot;2023-07-11T16:51:41Z&quot;);\nInstant actualTimestamp = Instant.parse(&quot;2023-07-11T16:51:42Z&quot;); long\ntoleranceSeconds = 1; // Define your tolerance in seconds</p>\n<p>boolean timestampsMatch =\nMath.abs(ChronoUnit.SECONDS.between(expectedTimestamp,\nactualTimestamp)) &lt;= toleranceSeconds;</p>\n<p>System.out.println(&quot;Timestamps match: &quot; + timestampsMatch);</p>\n</blockquote>\n<p>In the above example, a tolerance of 1 second is defined <strong>(toleranceSeconds = 1)</strong>. The Math.abs() function is used to calculate the absolute difference in seconds between the expected and actual timestamps. If the absolute difference is less than or equal to the defined tolerance, then the timestamps are considered to match.</p>\n<p>You can adjust the value of toleranceSeconds according to your specific needs and requirements. Keep in mind that a larger tolerance may result in a higher chance of false positives or incorrect matches.</p>\n<p><em><strong>By introducing a tolerance, you account for slight variations in execution time and ensure that the test passes even if the timestamps differ by a small amount.</strong></em></p>\n"}],"owner":{"account_id":28994167,"reputation":1,"user_id":22209214,"display_name":"Ritu Verma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689077329,"creation_date":1689075218,"question_id":76661554,"body_markdown":"```Java\r\nString timeStamp = new SimpleDateFormat(&quot;yyyy-mm-dd’T’HH:mm:ss’Z’&quot;)\r\n                                .format(Calendar.getInstant().getTime());\r\n```\r\nExpected : `&quot;2023-07-11T16:51:41Z&quot;`  \r\nActual : `&quot;2023-07-11T16:51:42Z&quot;`\r\n\r\nHere the only difference is in the seconds of actual time and expected time\r\n","title":"while validating timeStamp actual and expected is varying by one second that probably is execution time . how to handle it","body":"<pre><code>String timeStamp = new SimpleDateFormat(&quot;yyyy-mm-dd’T’HH:mm:ss’Z’&quot;)\n                                .format(Calendar.getInstant().getTime());\n</code></pre>\n<p>Expected : <code>&quot;2023-07-11T16:51:41Z&quot;</code><br />\nActual : <code>&quot;2023-07-11T16:51:42Z&quot;</code></p>\n<p>Here the only difference is in the seconds of actual time and expected time</p>\n"},{"tags":["java","xml","jaxb"],"answers":[{"tags":[],"owner":{"account_id":2183308,"reputation":19305,"user_id":1932311,"display_name":"Yitzhak Khabinsky"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663364622,"creation_date":1663364622,"answer_id":73750558,"question_id":73750425,"body_markdown":"XSLT transformation to the rescue.\r\n\r\nIt is possible to control almost any XML aspect via `&lt;xsl:output .../&gt;` clause attributes.\r\n\r\nOne of them is **standalone** = &#39;yes&#39; or &#39;no&#39;\r\n\r\n**XSLT**\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n       &lt;xsl:output method=&quot;xml&quot; standalone=&quot;no&quot; omit-xml-declaration=&quot;no&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot; /&gt;\r\n       &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\r\n    \r\n       &lt;xsl:template match=&quot;@*|node()&quot;&gt;\r\n          &lt;xsl:copy&gt;\r\n             &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\r\n          &lt;/xsl:copy&gt;\r\n       &lt;/xsl:template&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\n","title":"JAXB2 Removing standalone=&quot;yes&quot; on XML","body":"<p>XSLT transformation to the rescue.</p>\n<p>It is possible to control almost any XML aspect via <code>&lt;xsl:output .../&gt;</code> clause attributes.</p>\n<p>One of them is <strong>standalone</strong> = 'yes' or 'no'</p>\n<p><strong>XSLT</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n   &lt;xsl:output method=&quot;xml&quot; standalone=&quot;no&quot; omit-xml-declaration=&quot;no&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot; /&gt;\n   &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\n\n   &lt;xsl:template match=&quot;@*|node()&quot;&gt;\n      &lt;xsl:copy&gt;\n         &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\n      &lt;/xsl:copy&gt;\n   &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28994385,"reputation":11,"user_id":22209382,"display_name":"TheMonad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689076911,"creation_date":1689076911,"answer_id":76661764,"question_id":73750425,"body_markdown":"My advice is not to use this JAXB.Fragment true. It can result into nullpointers on sax level if your document is not actually a fragment. For example a case whereby you have multiple fragments in your object. \r\n\r\nFirst lets do some marshalling, you can choose multiple objecttypes to marshall to. But in general you can marshall to a DomResult this allows us to edit it later using a transformer.\r\n\r\n\r\n----------------------------------\r\n\r\nMarshall\r\n====\r\n```\r\n\r\n        final StringWriter writer = new StringWriter();\r\n        DOMResult destinationXml = new DOMResult();\r\n        marshaller.marshall(objectToMarshall, destinationXmlResult);\r\n\r\n```\r\nTransform\r\n======\r\n\r\n```\r\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n        // make sure you disable the external access, for security reasons..\r\n        Transformer transformer = transformerFactory.newTransformer();\r\n        transformer.setOutputProperty(OutputKeys.STANDALONE, &quot;no&quot;);\r\n        transformer.transform(new DOMSource(xmlResult.getNode()), new StreamResult(writer));\r\n        return writer.toString();\r\n\r\n\r\n```\r\nIf Transform is to much, replace will do also\r\n\r\nReplace \r\n======\r\n\r\n```\r\nfinal StringWriter writer = new StringWriter();\r\nmarshaller.marshall(object, new StreamResult(writer));\r\nreturn writer.replaceAll(&quot;standalone=\\&quot;yes\\&quot;&quot;, &quot;&quot;)\r\n\r\n```\r\n\r\n\r\n\r\nHope this helps.\r\n\r\n\r\n\r\nSee also: https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/stream/StreamResult.html\r\n\r\nand\r\nhttps://jakarta.ee/specifications/xml-binding/3.0/apidocs/jakarta.xml.bind/jakarta/xml/bind/marshaller\r\n\r\nSee: [OutputKeys](https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/OutputKeys.html)\r\n","title":"JAXB2 Removing standalone=&quot;yes&quot; on XML","body":"<p>My advice is not to use this JAXB.Fragment true. It can result into nullpointers on sax level if your document is not actually a fragment. For example a case whereby you have multiple fragments in your object.</p>\n<p>First lets do some marshalling, you can choose multiple objecttypes to marshall to. But in general you can marshall to a DomResult this allows us to edit it later using a transformer.</p>\n<hr />\n<h1>Marshall</h1>\n<pre><code>\n        final StringWriter writer = new StringWriter();\n        DOMResult destinationXml = new DOMResult();\n        marshaller.marshall(objectToMarshall, destinationXmlResult);\n\n</code></pre>\n<h1>Transform</h1>\n<pre><code>        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        // make sure you disable the external access, for security reasons..\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.STANDALONE, &quot;no&quot;);\n        transformer.transform(new DOMSource(xmlResult.getNode()), new StreamResult(writer));\n        return writer.toString();\n\n\n</code></pre>\n<p>If Transform is to much, replace will do also</p>\n<h1>Replace</h1>\n<pre><code>final StringWriter writer = new StringWriter();\nmarshaller.marshall(object, new StreamResult(writer));\nreturn writer.replaceAll(&quot;standalone=\\&quot;yes\\&quot;&quot;, &quot;&quot;)\n\n</code></pre>\n<p>Hope this helps.</p>\n<p>See also: <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/stream/StreamResult.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/stream/StreamResult.html</a></p>\n<p>and\n<a href=\"https://jakarta.ee/specifications/xml-binding/3.0/apidocs/jakarta.xml.bind/jakarta/xml/bind/marshaller\" rel=\"nofollow noreferrer\">https://jakarta.ee/specifications/xml-binding/3.0/apidocs/jakarta.xml.bind/jakarta/xml/bind/marshaller</a></p>\n<p>See: <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/OutputKeys.html\" rel=\"nofollow noreferrer\">OutputKeys</a></p>\n"}],"owner":{"account_id":15645491,"reputation":1,"user_id":11287733,"display_name":"RedFlower"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689076911,"creation_date":1663363394,"question_id":73750425,"body_markdown":"I need to remove the standalone=&quot;yes&quot; on my XML. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n\r\nI tried with this code:\r\n\r\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);      \t\t\r\n    marshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot;);\r\n\r\nThe result on XML - Duplicate information:\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&gt;\r\n\r\nDoes anyone know how to remove standalone=&quot;yes&quot;?\r\n\r\nMarshall code:\r\n\r\n    \t\ttry {\r\n\r\n\t\t\tJAXBContext context = JAXBContext.newInstance(DataToXML.class);\r\n\r\n\t\t\tMarshaller marshaller = context.createMarshaller();\r\n\r\n\t\t\tmarshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);\r\n\t\t\tmarshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot;);\r\n\r\n\t\t\tmarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n\r\n\t\t\tStringWriter writer = new StringWriter();\r\n\t\t\tmarshaller.marshal(xml, writer);\r\n\r\n\t\t\tSystem.out.println(writer.toString());\r\n\t\t\t\r\n\t\t\tmarshaller.marshal(xml, new File(&quot;test.xml&quot;));\r\n\r\n\t\t} catch (JAXBException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n","title":"JAXB2 Removing standalone=&quot;yes&quot; on XML","body":"<p>I need to remove the standalone=&quot;yes&quot; on my XML.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n</code></pre>\n<p>I tried with this code:</p>\n<pre><code>    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);            \nmarshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot;);\n</code></pre>\n<p>The result on XML - Duplicate information:</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&gt;\n</code></pre>\n<p>Does anyone know how to remove standalone=&quot;yes&quot;?</p>\n<p>Marshall code:</p>\n<pre><code>        try {\n\n        JAXBContext context = JAXBContext.newInstance(DataToXML.class);\n\n        Marshaller marshaller = context.createMarshaller();\n\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);\n        marshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot;);\n\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n\n        StringWriter writer = new StringWriter();\n        marshaller.marshal(xml, writer);\n\n        System.out.println(writer.toString());\n        \n        marshaller.marshal(xml, new File(&quot;test.xml&quot;));\n\n    } catch (JAXBException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","exception"],"answers":[{"comments":[{"owner":{"account_id":205758,"reputation":16759,"user_id":454671,"accept_rate":83,"display_name":"Victor"},"score":3,"creation_date":1336671019,"post_id":7076502,"comment_id":13635117,"body_markdown":"@yossi: So how did you solve it? Recompile the soruce and put it in your classpath? Just curious if you decompiled the original class and saaw what was in it.","body":"@yossi: So how did you solve it? Recompile the soruce and put it in your classpath? Just curious if you decompiled the original class and saaw what was in it."},{"owner":{"account_id":347392,"reputation":8392,"user_id":681479,"accept_rate":62,"display_name":"Brian White"},"score":0,"creation_date":1387415693,"post_id":7076502,"comment_id":30953253,"body_markdown":"When I had this, I had saved the file with a private function made public and so the editor saw everything as okay in the .jsp file but I hadn&#39;t re-launched the main program so it hadn&#39;t actually compiled the new version.","body":"When I had this, I had saved the file with a private function made public and so the editor saw everything as okay in the .jsp file but I hadn&#39;t re-launched the main program so it hadn&#39;t actually compiled the new version."},{"owner":{"account_id":3063524,"reputation":1389,"user_id":2595727,"accept_rate":54,"display_name":"softwareplay"},"score":0,"creation_date":1415272670,"post_id":7076502,"comment_id":42134185,"body_markdown":"I&#39;m getting this error from a maven package just installed. I&#39;ve updated the project and cleaned it but anything seems to change..","body":"I&#39;m getting this error from a maven package just installed. I&#39;ve updated the project and cleaned it but anything seems to change.."}],"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"comment_count":3,"down_vote_count":0,"up_vote_count":92,"is_accepted":true,"score":92,"last_activity_date":1313490557,"creation_date":1313488948,"answer_id":7076502,"question_id":7076414,"body_markdown":"You are almost certainly using a different version of the class at runtime to the one you expect.  In particular, the runtime class would be different to the one you&#39;ve compiled against (else this would have caused a compile-time error) - has that method *ever* been `private`?  Do you have old versions of the classes/jars on your system anywhere?\r\n\r\nAs the javadocs for `IllegalAccessError` state,\r\n\r\n&gt; Normally, this error is caught by the compiler; this error can only occur at run time if the definition of a class has incompatibly changed.\r\n\r\nI&#39;d definitely look at your classpath and check whether it holds any surprises.","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>You are almost certainly using a different version of the class at runtime to the one you expect.  In particular, the runtime class would be different to the one you've compiled against (else this would have caused a compile-time error) - has that method <em>ever</em> been <code>private</code>?  Do you have old versions of the classes/jars on your system anywhere?</p>\n\n<p>As the javadocs for <code>IllegalAccessError</code> state,</p>\n\n<blockquote>\n  <p>Normally, this error is caught by the compiler; this error can only occur at run time if the definition of a class has incompatibly changed.</p>\n</blockquote>\n\n<p>I'd definitely look at your classpath and check whether it holds any surprises.</p>\n"},{"comments":[{"owner":{"account_id":1386556,"reputation":7199,"user_id":1318479,"accept_rate":88,"display_name":"cb4"},"score":1,"creation_date":1660261369,"post_id":7076538,"comment_id":129497300,"body_markdown":"A low quality answer by SO standards and the link is broken.","body":"A low quality answer by SO standards and the link is broken."}],"tags":[],"owner":{"account_id":471849,"reputation":6191,"user_id":879899,"display_name":"Shadow"},"comment_count":1,"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1492470366,"creation_date":1313489130,"answer_id":7076538,"question_id":7076414,"body_markdown":"If `getData` is protected then try making it public. The problem could exist in JAVA 1.6 and be absent in 1.5x  \r\n\r\nI got this for your problem. &lt;a href=&quot;http://jira.codehaus.org/browse/GROOVY-2493&quot;&gt;Illegal access error&lt;/a&gt;","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>If <code>getData</code> is protected then try making it public. The problem could exist in JAVA 1.6 and be absent in 1.5x  </p>\n\n<p>I got this for your problem. <a href=\"http://jira.codehaus.org/browse/GROOVY-2493\" rel=\"nofollow noreferrer\">Illegal access error</a></p>\n"},{"comments":[{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":1,"creation_date":1369816356,"post_id":10538366,"comment_id":24228126,"body_markdown":"I&#39;ve got this issue on `commons-collections-3.2.1.jar` under JBoss EAP 5.3 with Struts 1.1 because this JAR is already in the JBoss libraries but was also packaged in my applications. I removed the JAR from my application which solved the problem.","body":"I&#39;ve got this issue on <code>commons-collections-3.2.1.jar</code> under JBoss EAP 5.3 with Struts 1.1 because this JAR is already in the JBoss libraries but was also packaged in my applications. I removed the JAR from my application which solved the problem."},{"owner":{"account_id":67886,"reputation":2022,"user_id":198397,"accept_rate":83,"display_name":"msteiger"},"score":3,"creation_date":1428565921,"post_id":10538366,"comment_id":47218691,"body_markdown":"You just saved me A LOT of time and nerve. Very nice!","body":"You just saved me A LOT of time and nerve. Very nice!"},{"owner":{"account_id":1064443,"reputation":1462,"user_id":1065366,"accept_rate":56,"display_name":"Markus"},"score":0,"creation_date":1458208020,"post_id":10538366,"comment_id":59760611,"body_markdown":"Im getting this error for a public static method that now takes a 2nd argument. The old jar file no longer exists since I replaced it. Any ideas?","body":"Im getting this error for a public static method that now takes a 2nd argument. The old jar file no longer exists since I replaced it. Any ideas?"},{"owner":{"account_id":4008783,"reputation":782,"user_id":3302776,"accept_rate":40,"display_name":"fabriziocucci"},"score":0,"creation_date":1458322154,"post_id":10538366,"comment_id":59825704,"body_markdown":"I had an abstract class with package-private modifier and another class (extending the former) with public modifier in the same package. Both were in a simple jar. I was using a method of the abstract class from a web app. The weird thing is that I was able to deploy my app in Tomcat from within Eclipse but not on Tomcat on a remote machine. I changed the access modifier of the abstract class to public and everything worked.","body":"I had an abstract class with package-private modifier and another class (extending the former) with public modifier in the same package. Both were in a simple jar. I was using a method of the abstract class from a web app. The weird thing is that I was able to deploy my app in Tomcat from within Eclipse but not on Tomcat on a remote machine. I changed the access modifier of the abstract class to public and everything worked."},{"owner":{"account_id":5942070,"reputation":826,"user_id":4672928,"display_name":"flaz14"},"score":0,"creation_date":1466160835,"post_id":10538366,"comment_id":63214430,"body_markdown":"I my case downgrading Firefox driver from `2.53.0` to `2.44.0` helped (I used Grails 2.3.11 which is an old release).","body":"I my case downgrading Firefox driver from <code>2.53.0</code> to <code>2.44.0</code> helped (I used Grails 2.3.11 which is an old release)."},{"owner":{"account_id":4010822,"reputation":3327,"user_id":3304238,"display_name":"Frelling"},"score":0,"creation_date":1482450905,"post_id":10538366,"comment_id":69789440,"body_markdown":"+1 - tyvm. I knew it had to be something not so obvious. I&#39;ve used package-scoped wrappers many times to access restricted methods. It never occurred to me that the protected class was loaded by a different class loader - sneaky developer. Thankfully, I saw your answer before I delved into a detailed debugging session. An old dog learned a new trick today :)","body":"+1 - tyvm. I knew it had to be something not so obvious. I&#39;ve used package-scoped wrappers many times to access restricted methods. It never occurred to me that the protected class was loaded by a different class loader - sneaky developer. Thankfully, I saw your answer before I delved into a detailed debugging session. An old dog learned a new trick today :)"},{"owner":{"account_id":4536689,"reputation":998,"user_id":3685705,"accept_rate":75,"display_name":"somename"},"score":0,"creation_date":1508797682,"post_id":10538366,"comment_id":80746107,"body_markdown":"More here link is broken.","body":"More here link is broken."}],"tags":[],"owner":{"account_id":11063,"reputation":2526,"user_id":21176,"accept_rate":71,"display_name":"s_t_e_v_e"},"comment_count":7,"down_vote_count":0,"up_vote_count":124,"is_accepted":false,"score":124,"last_activity_date":1623258182,"creation_date":1336667239,"answer_id":10538366,"question_id":7076414,"body_markdown":"This happens when accessing a package scoped method of a class that is in the same package but is in a different jar and classloader.  \r\n\r\n[This][1] was my source, but the link is now broken. Following is full text from google cache:\r\n\r\n&gt;Packages (as in package access) are scoped per ClassLoader.\r\n\r\n&gt;You state that the parent ClassLoader loads the interface and the child \r\nClassLoader loads the implementation. This won&#39;t work because of the \r\nClassLoader-specific nature of package scoping. The interface isn&#39;t visible to \r\nthe implementation class because, even though it&#39;s the same package name, \r\nthey&#39;re in different ClassLoaders.\r\n\r\n&gt;I only skimmed the posts in this thread, but I think you&#39;ve already discovered \r\nthat this will work if you declare the interface to be public. It would also \r\nwork to have both interface and implementation loaded by the same ClassLoader.\r\n\r\n&gt;Really, if you expect arbitrary folks to implement the interface (which you \r\napparently do if the implementation is being loaded by a different \r\nClassLoader), then you should make the interface public.\r\n\r\n&gt;The ClassLoader-scoping of package scope (which applies to accessing package \r\nmethods, variables, etc.) is similar to the general ClassLoader-scoping of \r\nclass names. For example, I can define two classes, both named com.foo.Bar, \r\nwith entirely different implementation code if I define them in separate \r\nClassLoaders.\r\n\r\n&gt;Joel\r\n\r\n  [1]: https://narkive.com/g2a8bly0.16","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>This happens when accessing a package scoped method of a class that is in the same package but is in a different jar and classloader.</p>\n<p><a href=\"https://narkive.com/g2a8bly0.16\" rel=\"noreferrer\">This</a> was my source, but the link is now broken. Following is full text from google cache:</p>\n<blockquote>\n<p>Packages (as in package access) are scoped per ClassLoader.</p>\n</blockquote>\n<blockquote>\n<p>You state that the parent ClassLoader loads the interface and the child\nClassLoader loads the implementation. This won't work because of the\nClassLoader-specific nature of package scoping. The interface isn't visible to\nthe implementation class because, even though it's the same package name,\nthey're in different ClassLoaders.</p>\n</blockquote>\n<blockquote>\n<p>I only skimmed the posts in this thread, but I think you've already discovered\nthat this will work if you declare the interface to be public. It would also\nwork to have both interface and implementation loaded by the same ClassLoader.</p>\n</blockquote>\n<blockquote>\n<p>Really, if you expect arbitrary folks to implement the interface (which you\napparently do if the implementation is being loaded by a different\nClassLoader), then you should make the interface public.</p>\n</blockquote>\n<blockquote>\n<p>The ClassLoader-scoping of package scope (which applies to accessing package\nmethods, variables, etc.) is similar to the general ClassLoader-scoping of\nclass names. For example, I can define two classes, both named com.foo.Bar,\nwith entirely different implementation code if I define them in separate\nClassLoaders.</p>\n</blockquote>\n<blockquote>\n<p>Joel</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1215292,"reputation":1099,"user_id":1183016,"accept_rate":81,"display_name":"Alan Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1467122063,"creation_date":1467122063,"answer_id":38078195,"question_id":7076414,"body_markdown":"This happened to me when I had a class in one jar trying to access a private method in a class from another jar.  I simply changed the private method to public, recompiled and deployed, and it worked ok afterwards.","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>This happened to me when I had a class in one jar trying to access a private method in a class from another jar.  I simply changed the private method to public, recompiled and deployed, and it worked ok afterwards.</p>\n"},{"tags":[],"owner":{"account_id":3311346,"reputation":570,"user_id":2784785,"display_name":"Maurice"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467899479,"creation_date":1467881233,"answer_id":38241116,"question_id":7076414,"body_markdown":"**From Android perspective:**\r\n**Method not available in api version**\r\n\r\nI was getting this Issue primarily because i was using some thing that is not available/deprecated in that Android version\r\n\r\nWrong way:\r\n\r\n    Notification.Builder nBuilder = new Notification.Builder(mContext);\r\n    nBuilder.addAction(new Notification.Action(android.R.drawable.ic_menu_view,&quot;PAUSE&quot;,pendingIntent));\r\n\r\nRight way:\r\n\r\n    Notification.Builder nBuilder = new Notification.Builder(mContext);\r\n    nBuilder.addAction(android.R.drawable.ic_media_pause,&quot;PAUSE&quot;,pendingIntent);\r\n\r\nhere Notification.Action is not available prior to *API 20* and my min version was *API 16*","title":"java.lang.IllegalAccessError: tried to access method","body":"<p><strong>From Android perspective:</strong>\n<strong>Method not available in api version</strong></p>\n\n<p>I was getting this Issue primarily because i was using some thing that is not available/deprecated in that Android version</p>\n\n<p>Wrong way:</p>\n\n<pre><code>Notification.Builder nBuilder = new Notification.Builder(mContext);\nnBuilder.addAction(new Notification.Action(android.R.drawable.ic_menu_view,\"PAUSE\",pendingIntent));\n</code></pre>\n\n<p>Right way:</p>\n\n<pre><code>Notification.Builder nBuilder = new Notification.Builder(mContext);\nnBuilder.addAction(android.R.drawable.ic_media_pause,\"PAUSE\",pendingIntent);\n</code></pre>\n\n<p>here Notification.Action is not available prior to <em>API 20</em> and my min version was <em>API 16</em></p>\n"},{"tags":[],"owner":{"account_id":4861925,"reputation":4310,"user_id":3921295,"accept_rate":79,"display_name":"Ali Bdeir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468606081,"creation_date":1468606081,"answer_id":38402612,"question_id":7076414,"body_markdown":"Just an addition to the solved answer:\r\n\r\n**This COULD** be a problem with Android Studio&#39;s Instant Run feature, for example, if you realized you forgot to add the line of code: `finish()` to your activity after opening another one, and you already re-opened the activity you shouldn&#39;t have reopened (which the `finish()` solved), then you add `finish()` and Instant Run occurs, then the app will crash since the logic has been broken. \r\n\r\n\r\n----------\r\n**TL:DR;**\r\n\r\nThis is not necessarily a code problem, just an Instant Run problem","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>Just an addition to the solved answer:</p>\n\n<p><strong>This COULD</strong> be a problem with Android Studio's Instant Run feature, for example, if you realized you forgot to add the line of code: <code>finish()</code> to your activity after opening another one, and you already re-opened the activity you shouldn't have reopened (which the <code>finish()</code> solved), then you add <code>finish()</code> and Instant Run occurs, then the app will crash since the logic has been broken. </p>\n\n<hr>\n\n<p><strong>TL:DR;</strong></p>\n\n<p>This is not necessarily a code problem, just an Instant Run problem</p>\n"},{"comments":[{"owner":{"account_id":65930,"reputation":4225,"user_id":193705,"accept_rate":81,"display_name":"Peter Wippermann"},"score":0,"creation_date":1566825530,"post_id":43718928,"comment_id":101766849,"body_markdown":"You should also _consider to remove Spring Boot&#39;s Dev Tools from your classpath_ - maybe only temporarily. In my case the `IllegalAccessError` was not reasonable at all. But when I removed the Maven dependency to Dev Tools and added it again shortly after, everything was working as it should.","body":"You should also <i>consider to remove Spring Boot&#39;s Dev Tools from your classpath</i> - maybe only temporarily. In my case the <code>IllegalAccessError</code> was not reasonable at all. But when I removed the Maven dependency to Dev Tools and added it again shortly after, everything was working as it should."},{"owner":{"account_id":9773964,"reputation":1324,"user_id":7244716,"accept_rate":88,"display_name":"valijon"},"score":0,"creation_date":1584355262,"post_id":43718928,"comment_id":107402456,"body_markdown":"Thank you so much! You&#39;ve saved the day.","body":"Thank you so much! You&#39;ve saved the day."}],"tags":[],"owner":{"account_id":300481,"reputation":24692,"user_id":607637,"accept_rate":78,"display_name":"gtiwari333"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1493640744,"creation_date":1493640744,"answer_id":43718928,"question_id":7076414,"body_markdown":"I was getting this error on a Spring Boot application where a `@RestController ApplicationInfoResource` had a nested class `ApplicationInfo`. \r\n\r\nIt seems the `Spring Boot Dev Tools` was using a different class loader.\r\n\r\n**The exception I was getting** \r\n&gt; 2017-05-01 17:47:39.588  WARN 1516 --- [nio-8080-exec-9]\r\n&gt; .m.m.a.ExceptionHandlerExceptionResolver : Resolved exception caused\r\n&gt; by Handler execution:\r\n&gt; org.springframework.web.util.NestedServletException: Handler dispatch\r\n&gt; failed; nested exception is java.lang.IllegalAccessError: tried to\r\n&gt; access class com.gt.web.rest.ApplicationInfo from class\r\n&gt; com.gt.web.rest.ApplicationInfoResource$$EnhancerBySpringCGLIB$$59ce500c\r\n\r\n**Solution**\r\n\r\nI moved the nested class `ApplicationInfo` to a separate .java file and got rid of the problem.","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>I was getting this error on a Spring Boot application where a <code>@RestController ApplicationInfoResource</code> had a nested class <code>ApplicationInfo</code>. </p>\n\n<p>It seems the <code>Spring Boot Dev Tools</code> was using a different class loader.</p>\n\n<p><strong>The exception I was getting</strong> </p>\n\n<blockquote>\n  <p>2017-05-01 17:47:39.588  WARN 1516 --- [nio-8080-exec-9]\n  .m.m.a.ExceptionHandlerExceptionResolver : Resolved exception caused\n  by Handler execution:\n  org.springframework.web.util.NestedServletException: Handler dispatch\n  failed; nested exception is java.lang.IllegalAccessError: tried to\n  access class com.gt.web.rest.ApplicationInfo from class\n  com.gt.web.rest.ApplicationInfoResource$$EnhancerBySpringCGLIB$$59ce500c</p>\n</blockquote>\n\n<p><strong>Solution</strong></p>\n\n<p>I moved the nested class <code>ApplicationInfo</code> to a separate .java file and got rid of the problem.</p>\n"},{"tags":[],"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521599400,"creation_date":1521599400,"answer_id":49397176,"question_id":7076414,"body_markdown":"In my case the problem was that a method was defined in some Interface `A` as `default`, while its sub-class overrode it as private. Then when the method was called, the java Runtime realized it was calling a private method.\r\n\r\nI am still puzzled as to why the compiler didn&#39;t complain about the private override..\r\n\r\n    public interface A {\r\n         default void doStuff() {\r\n             // doing stuff\r\n         }\r\n    }\r\n\r\n    public class B {\r\n         private void doStuff() {\r\n             // do other stuff instead\r\n         }\r\n    }\r\n\r\n    public static final main(String... args) {\r\n        A someB = new B();\r\n        someB.doStuff();\r\n    }","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>In my case the problem was that a method was defined in some Interface <code>A</code> as <code>default</code>, while its sub-class overrode it as private. Then when the method was called, the java Runtime realized it was calling a private method.</p>\n\n<p>I am still puzzled as to why the compiler didn't complain about the private override..</p>\n\n<pre><code>public interface A {\n     default void doStuff() {\n         // doing stuff\n     }\n}\n\npublic class B {\n     private void doStuff() {\n         // do other stuff instead\n     }\n}\n\npublic static final main(String... args) {\n    A someB = new B();\n    someB.doStuff();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1865629,"reputation":933,"user_id":1689284,"accept_rate":55,"display_name":"daniel sp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568962425,"creation_date":1568962425,"answer_id":58023198,"question_id":7076414,"body_markdown":"In my case I was getting this error running my app in wildfly with the .ear deployed from eclipse. Because it was deployed from eclipse, the deployment folder did not contain an .ear file, but a folder representing it, and inside of it all the jars that would have been contained in the .ear file; like if the ear was unzipped.\r\n\r\nSo I had in on jar: \r\n\r\n    class MySuperClass {\r\n      protected void mySuperMethod {}\r\n    }\r\n\r\nAnd in another jar:\r\n\r\n    class MyExtendingClass extends MySuperClass {\r\n    \r\n      class MyChildrenClass {\r\n        public void doSomething{\r\n          mySuperMethod();\r\n        }\r\n      }\r\n    }\r\n\r\nThe solution for this was adding a new method to MyExtendingClass:\r\n\r\n    class MyExtendingClass extends MySuperClass {\r\n    \r\n      class MyChildrenClass {\r\n        public void doSomething{\r\n          mySuperMethod();\r\n        }\r\n      }\r\n      \r\n      @Override\r\n      protected void mySuperMethod() {\r\n        super.mySuperMethod();\r\n      }\r\n    }\r\n","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>In my case I was getting this error running my app in wildfly with the .ear deployed from eclipse. Because it was deployed from eclipse, the deployment folder did not contain an .ear file, but a folder representing it, and inside of it all the jars that would have been contained in the .ear file; like if the ear was unzipped.</p>\n\n<p>So I had in on jar: </p>\n\n<pre><code>class MySuperClass {\n  protected void mySuperMethod {}\n}\n</code></pre>\n\n<p>And in another jar:</p>\n\n<pre><code>class MyExtendingClass extends MySuperClass {\n\n  class MyChildrenClass {\n    public void doSomething{\n      mySuperMethod();\n    }\n  }\n}\n</code></pre>\n\n<p>The solution for this was adding a new method to MyExtendingClass:</p>\n\n<pre><code>class MyExtendingClass extends MySuperClass {\n\n  class MyChildrenClass {\n    public void doSomething{\n      mySuperMethod();\n    }\n  }\n\n  @Override\n  protected void mySuperMethod() {\n    super.mySuperMethod();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3668880,"reputation":1609,"user_id":3056514,"accept_rate":42,"display_name":"Vinayak Dornala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576702979,"creation_date":1576702979,"answer_id":59399936,"question_id":7076414,"body_markdown":"I was getting same error because of configuration issue in intellij.\r\nAs shown in screenshot.\r\nMain and test module was pointing to two different JDK. (Press F12 on the intellij project to open module settings)\r\n\r\nAlso all my dto&#39;s were using @lombok.Builder which I changed it to @Data.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/95J3l.png\r\n  [2]: https://i.stack.imgur.com/fE3Z1.png","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>I was getting same error because of configuration issue in intellij.\nAs shown in screenshot.\nMain and test module was pointing to two different JDK. (Press F12 on the intellij project to open module settings)</p>\n\n<p>Also all my dto's were using @lombok.Builder which I changed it to @Data.</p>\n\n<p><a href=\"https://i.stack.imgur.com/95J3l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/95J3l.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/fE3Z1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fE3Z1.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8225641,"reputation":31,"user_id":6188038,"display_name":"riteshk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593166829,"creation_date":1593166829,"answer_id":62592677,"question_id":7076414,"body_markdown":"I was getting similar exception but at class level \r\n\r\ne.g. Caused by: java.lang.IllegalAccessError: tried to access class ....\r\n\r\nI fixed this by making my class public.","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>I was getting similar exception but at class level</p>\n<p>e.g. Caused by: java.lang.IllegalAccessError: tried to access class ....</p>\n<p>I fixed this by making my class public.</p>\n"},{"tags":[],"owner":{"account_id":27291355,"reputation":1,"user_id":20809704,"display_name":"Leelavathi Sherikar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689076666,"creation_date":1689076666,"answer_id":76661736,"question_id":7076414,"body_markdown":"I was getting similar exception for running junit test cases in gitlab\r\n to solve this i had to do the following changes.\r\n\r\nChange  in gitlab.yml\r\nto\r\nimage: gradle:jdk8\r\n\r\nfrom  \r\nimage: gradle:jdk8","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>I was getting similar exception for running junit test cases in gitlab\nto solve this i had to do the following changes.</p>\n<p>Change  in gitlab.yml\nto\nimage: gradle:jdk8</p>\n<p>from<br />\nimage: gradle:jdk8</p>\n"}],"owner":{"account_id":225625,"reputation":13045,"user_id":486209,"accept_rate":91,"display_name":"yossi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249980,"favorite_count":0,"down_vote_count":0,"up_vote_count":90,"accepted_answer_id":7076502,"answer_count":12,"score":90,"last_activity_date":1689076666,"creation_date":1313488513,"question_id":7076414,"body_markdown":"I am getting an exception and I can&#39;t find the reason of it.\r\n\r\nThe exception I get is :\r\n\r\n&gt; java.lang.IllegalAccessError: tried to access method Connected.getData(Ljava/lang/String;)Ljava/sql/ResultSet; from class B\r\n\r\nThe method is public.\r\n\r\n    public class B\r\n    {\r\n      public void myMethod()\r\n      {\r\n       Connected conn = new Connected();  // create a connected class in order to connect to The DB \r\n       ResultSet rs = null;  // create a result set to get the query result\r\n       rs = conn.getData(sql); // do sql query\r\n      }\r\n    }\r\n\r\n    public class Connected \r\n    {\r\n     public ResultSet getData(String sql) \r\n\t{\r\n\t  ResultSet rs = null;\r\n\t  try \r\n\t  {\r\n\t     prepareConnection();\r\n\t     stmt = conn.createStatement();\r\n\t     stmt.execute(sql);\r\n\t     rs = stmt.getResultSet();\r\n\t  }\r\n\t  catch (SQLException E) \r\n          {\r\n\t    System.out.println(&quot;Content.getData Error&quot;);\r\n   \t    E.printStackTrace();\r\n           }\r\n\treturn rs;\r\n\t}\r\n\r\ni am using apache tomcat 5.5.12\r\nand JAVA 1.6\r\n","title":"java.lang.IllegalAccessError: tried to access method","body":"<p>I am getting an exception and I can't find the reason of it.</p>\n\n<p>The exception I get is :</p>\n\n<blockquote>\n  <p>java.lang.IllegalAccessError: tried to access method Connected.getData(Ljava/lang/String;)Ljava/sql/ResultSet; from class B</p>\n</blockquote>\n\n<p>The method is public.</p>\n\n<pre><code>public class B\n{\n  public void myMethod()\n  {\n   Connected conn = new Connected();  // create a connected class in order to connect to The DB \n   ResultSet rs = null;  // create a result set to get the query result\n   rs = conn.getData(sql); // do sql query\n  }\n}\n\npublic class Connected \n{\n public ResultSet getData(String sql) \n{\n  ResultSet rs = null;\n  try \n  {\n     prepareConnection();\n     stmt = conn.createStatement();\n     stmt.execute(sql);\n     rs = stmt.getResultSet();\n  }\n  catch (SQLException E) \n      {\n    System.out.println(\"Content.getData Error\");\n    E.printStackTrace();\n       }\nreturn rs;\n}\n</code></pre>\n\n<p>i am using apache tomcat 5.5.12\nand JAVA 1.6</p>\n"},{"tags":["java","android","flask","android-volley"],"owner":{"account_id":19848765,"reputation":91,"user_id":16288309,"display_name":"Mathpdegeek497"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689076640,"creation_date":1689076084,"question_id":76661667,"body_markdown":"I am building an Android application using `Volley` library (with `MultipartRequest`) to send image data to a very simple `flask-based` API. The issue is the `requests.data()` and `requests.form()` in the API yields blank/NULL values. I have verified a lot, and not able to find why the thing is not working. \r\n**MainActivity.java** (only the code where bitmap is uploaded via volley)\r\n\r\n    public byte[] getFileDataFromDrawable(Bitmap bitmap) {\r\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n        bitmap.compress(Bitmap.CompressFormat.PNG, 80, byteArrayOutputStream);\r\n        byte[] b = byteArrayOutputStream.toByteArray();\r\n        Log.d(&quot;KAKA&quot;, b.toString()); //Here I verified the string being shared\r\n        return b;\r\n    }\r\n\r\n    private void uploadBitmap(final Bitmap bitmap) {\r\n\r\n        VolleyMultipartRequest volleyMultipartRequest = new VolleyMultipartRequest(Request.Method.POST, ROOT_URL,\r\n                new Response.Listener&lt;NetworkResponse&gt;() {\r\n                    @Override\r\n                    public void onResponse(NetworkResponse response) {\r\n                        try {\r\n                            JSONObject obj = new JSONObject(new String(response.data));\r\n                            Log.d(&quot;KAKA&quot;, obj.toString());\r\n                            Toast.makeText(getApplicationContext(), obj.getString(&quot;message&quot;), Toast.LENGTH_SHORT).show();\r\n                        } catch (JSONException e) {\r\n                            Log.d(&quot;KAKA&quot;, &quot;&quot;+e.toString());\r\n                        }\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\r\n                        Log.d(&quot;KAKA&quot;,&quot;&quot;+error.getMessage());\r\n                    }\r\n                }) {\r\n\r\n\r\n            @Override\r\n            protected Map&lt;String, DataPart&gt; getByteData() {\r\n                Map&lt;String, DataPart&gt; params = new HashMap&lt;&gt;();\r\n                long imagename = System.currentTimeMillis();\r\n                params.put(&quot;file1&quot;, new DataPart(imagename + &quot;.png&quot;, getFileDataFromDrawable(bitmap)));\r\n                return params;\r\n            }\r\n        };\r\n\r\n        //adding the request to volley\r\n        volleyMultipartRequest.setRetryPolicy(new DefaultRetryPolicy(\r\n                100000,\r\n                DefaultRetryPolicy.DEFAULT_MAX_RETRIES,\r\n                DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));\r\n        Volley.newRequestQueue(this).add(volleyMultipartRequest);\r\n    }\r\n\r\n**My Flask API** (The error is possibly here??)\r\n```\r\n@app.route(&quot;/match&quot;, methods=[&#39;POST&#39;])\r\ndef match():\r\n    print(&quot;I am here&quot;) #THIS IS PRINTED MEANS API IS INTERCEPTED EVERYTIME THE REQUEST IS SENT\r\n    data1 = requests.data()\r\n    print(data1) #is an empty string WHY DATA IS EMPTY?\r\n    return jsonify({&quot;dist&quot;:str(data1)})\r\n```\r\n**VolleyMultipartRequest.java** (Taken from Internet/ I dont think anything is wrong here)\r\n```\r\npackage com.shloknemani.imageuploadapplication;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.NetworkResponse;\r\nimport com.android.volley.ParseError;\r\nimport com.android.volley.Request;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.HttpHeaderParser;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.DataOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.util.Map;\r\n\r\npublic class VolleyMultipartRequest extends Request&lt;NetworkResponse&gt; {\r\n\r\n\r\n    private final String twoHyphens = &quot;--&quot;;\r\n    private final String lineEnd = &quot;\\r\\n&quot;;\r\n    private final String boundary = &quot;apiclient-&quot; + System.currentTimeMillis();\r\n\r\n    private Response.Listener&lt;NetworkResponse&gt; mListener;\r\n    private Response.ErrorListener mErrorListener;\r\n    private Map&lt;String, String&gt; mHeaders;\r\n\r\n\r\n    public VolleyMultipartRequest(int method, String url,\r\n                                  Response.Listener&lt;NetworkResponse&gt; listener,\r\n                                  Response.ErrorListener errorListener) {\r\n        super(method, url, errorListener);\r\n        this.mListener = listener;\r\n        this.mErrorListener = errorListener;\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n        return (mHeaders != null) ? mHeaders : super.getHeaders();\r\n    }\r\n\r\n    @Override\r\n    public String getBodyContentType() {\r\n        return &quot;multipart/form-data;boundary=&quot; + boundary;\r\n    }\r\n\r\n    @Override\r\n    public byte[] getBody() throws AuthFailureError {\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        DataOutputStream dos = new DataOutputStream(bos);\r\n\r\n        try {\r\n            // populate text payload\r\n            Map&lt;String, String&gt; params = getParams();\r\n            if (params != null &amp;&amp; params.size() &gt; 0) {\r\n                textParse(dos, params, getParamsEncoding());\r\n            }\r\n\r\n            // populate data byte payload\r\n            Map&lt;String, DataPart&gt; data = getByteData();\r\n            if (data != null &amp;&amp; data.size() &gt; 0) {\r\n                dataParse(dos, data);\r\n            }\r\n\r\n            // close multipart form data after text and file data\r\n            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);\r\n\r\n            return bos.toByteArray();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Custom method handle data payload.\r\n     *\r\n     * @return Map data part label with data byte\r\n     * @throws AuthFailureError\r\n     */\r\n    protected Map&lt;String, DataPart&gt; getByteData() throws AuthFailureError {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    protected Response&lt;NetworkResponse&gt; parseNetworkResponse(NetworkResponse response) {\r\n        try {\r\n            return Response.success(\r\n                    response,\r\n                    HttpHeaderParser.parseCacheHeaders(response));\r\n        } catch (Exception e) {\r\n            return Response.error(new ParseError(e));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void deliverResponse(NetworkResponse response) {\r\n        mListener.onResponse(response);\r\n    }\r\n\r\n    @Override\r\n    public void deliverError(VolleyError error) {\r\n        mErrorListener.onErrorResponse(error);\r\n    }\r\n\r\n    /**\r\n     * Parse string map into data output stream by key and value.\r\n     *\r\n     * @param dataOutputStream data output stream handle string parsing\r\n     * @param params           string inputs collection\r\n     * @param encoding         encode the inputs, default UTF-8\r\n     * @throws IOException\r\n     */\r\n    private void textParse(DataOutputStream dataOutputStream, Map&lt;String, String&gt; params, String encoding) throws IOException {\r\n        try {\r\n            for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\r\n                buildTextPart(dataOutputStream, entry.getKey(), entry.getValue());\r\n            }\r\n        } catch (UnsupportedEncodingException uee) {\r\n            throw new RuntimeException(&quot;Encoding not supported: &quot; + encoding, uee);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse data into data output stream.\r\n     *\r\n     * @param dataOutputStream data output stream handle file attachment\r\n     * @param data             loop through data\r\n     * @throws IOException\r\n     */\r\n    private void dataParse(DataOutputStream dataOutputStream, Map&lt;String, DataPart&gt; data) throws IOException {\r\n        for (Map.Entry&lt;String, DataPart&gt; entry : data.entrySet()) {\r\n            buildDataPart(dataOutputStream, entry.getValue(), entry.getKey());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Write string data into header and data output stream.\r\n     *\r\n     * @param dataOutputStream data output stream handle string parsing\r\n     * @param parameterName    name of input\r\n     * @param parameterValue   value of input\r\n     * @throws IOException\r\n     */\r\n    private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\r\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\r\n        dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot; + parameterName + &quot;\\&quot;&quot; + lineEnd);\r\n        dataOutputStream.writeBytes(lineEnd);\r\n        dataOutputStream.writeBytes(parameterValue + lineEnd);\r\n    }\r\n\r\n    /**\r\n     * Write data file into header and data output stream.\r\n     *\r\n     * @param dataOutputStream data output stream handle data parsing\r\n     * @param dataFile         data byte as DataPart from collection\r\n     * @param inputName        name of data input\r\n     * @throws IOException\r\n     */\r\n    private void buildDataPart(DataOutputStream dataOutputStream, DataPart dataFile, String inputName) throws IOException {\r\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\r\n        dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot; +\r\n                inputName + &quot;\\&quot;; filename=\\&quot;&quot; + dataFile.getFileName() + &quot;\\&quot;&quot; + lineEnd);\r\n        if (dataFile.getType() != null &amp;&amp; !dataFile.getType().trim().isEmpty()) {\r\n            dataOutputStream.writeBytes(&quot;Content-Type: &quot; + dataFile.getType() + lineEnd);\r\n        }\r\n        dataOutputStream.writeBytes(lineEnd);\r\n\r\n        ByteArrayInputStream fileInputStream = new ByteArrayInputStream(dataFile.getContent());\r\n        int bytesAvailable = fileInputStream.available();\r\n\r\n        int maxBufferSize = 1024 * 1024;\r\n        int bufferSize = Math.min(bytesAvailable, maxBufferSize);\r\n        byte[] buffer = new byte[bufferSize];\r\n\r\n        int bytesRead = fileInputStream.read(buffer, 0, bufferSize);\r\n\r\n        while (bytesRead &gt; 0) {\r\n            dataOutputStream.write(buffer, 0, bufferSize);\r\n            bytesAvailable = fileInputStream.available();\r\n            bufferSize = Math.min(bytesAvailable, maxBufferSize);\r\n            bytesRead = fileInputStream.read(buffer, 0, bufferSize);\r\n        }\r\n\r\n        dataOutputStream.writeBytes(lineEnd);\r\n    }\r\n\r\n    class DataPart {\r\n        private String fileName;\r\n        private byte[] content;\r\n        private String type;\r\n\r\n        public DataPart() {\r\n        }\r\n\r\n        DataPart(String name, byte[] data) {\r\n            fileName = name;\r\n            content = data;\r\n        }\r\n\r\n        String getFileName() {\r\n            return fileName;\r\n        }\r\n\r\n        byte[] getContent() {\r\n            return content;\r\n        }\r\n\r\n        String getType() {\r\n            return type;\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n","title":"Flask API error to intercept Volley Multipart Images","body":"<p>I am building an Android application using <code>Volley</code> library (with <code>MultipartRequest</code>) to send image data to a very simple <code>flask-based</code> API. The issue is the <code>requests.data()</code> and <code>requests.form()</code> in the API yields blank/NULL values. I have verified a lot, and not able to find why the thing is not working.\n<strong>MainActivity.java</strong> (only the code where bitmap is uploaded via volley)</p>\n<pre><code>public byte[] getFileDataFromDrawable(Bitmap bitmap) {\n    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n    bitmap.compress(Bitmap.CompressFormat.PNG, 80, byteArrayOutputStream);\n    byte[] b = byteArrayOutputStream.toByteArray();\n    Log.d(&quot;KAKA&quot;, b.toString()); //Here I verified the string being shared\n    return b;\n}\n\nprivate void uploadBitmap(final Bitmap bitmap) {\n\n    VolleyMultipartRequest volleyMultipartRequest = new VolleyMultipartRequest(Request.Method.POST, ROOT_URL,\n            new Response.Listener&lt;NetworkResponse&gt;() {\n                @Override\n                public void onResponse(NetworkResponse response) {\n                    try {\n                        JSONObject obj = new JSONObject(new String(response.data));\n                        Log.d(&quot;KAKA&quot;, obj.toString());\n                        Toast.makeText(getApplicationContext(), obj.getString(&quot;message&quot;), Toast.LENGTH_SHORT).show();\n                    } catch (JSONException e) {\n                        Log.d(&quot;KAKA&quot;, &quot;&quot;+e.toString());\n                    }\n                }\n            },\n            new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError error) {\n                    Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\n                    Log.d(&quot;KAKA&quot;,&quot;&quot;+error.getMessage());\n                }\n            }) {\n\n\n        @Override\n        protected Map&lt;String, DataPart&gt; getByteData() {\n            Map&lt;String, DataPart&gt; params = new HashMap&lt;&gt;();\n            long imagename = System.currentTimeMillis();\n            params.put(&quot;file1&quot;, new DataPart(imagename + &quot;.png&quot;, getFileDataFromDrawable(bitmap)));\n            return params;\n        }\n    };\n\n    //adding the request to volley\n    volleyMultipartRequest.setRetryPolicy(new DefaultRetryPolicy(\n            100000,\n            DefaultRetryPolicy.DEFAULT_MAX_RETRIES,\n            DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));\n    Volley.newRequestQueue(this).add(volleyMultipartRequest);\n}\n</code></pre>\n<p><strong>My Flask API</strong> (The error is possibly here??)</p>\n<pre><code>@app.route(&quot;/match&quot;, methods=['POST'])\ndef match():\n    print(&quot;I am here&quot;) #THIS IS PRINTED MEANS API IS INTERCEPTED EVERYTIME THE REQUEST IS SENT\n    data1 = requests.data()\n    print(data1) #is an empty string WHY DATA IS EMPTY?\n    return jsonify({&quot;dist&quot;:str(data1)})\n</code></pre>\n<p><strong>VolleyMultipartRequest.java</strong> (Taken from Internet/ I dont think anything is wrong here)</p>\n<pre><code>package com.shloknemani.imageuploadapplication;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.NetworkResponse;\nimport com.android.volley.ParseError;\nimport com.android.volley.Request;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.HttpHeaderParser;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.util.Map;\n\npublic class VolleyMultipartRequest extends Request&lt;NetworkResponse&gt; {\n\n\n    private final String twoHyphens = &quot;--&quot;;\n    private final String lineEnd = &quot;\\r\\n&quot;;\n    private final String boundary = &quot;apiclient-&quot; + System.currentTimeMillis();\n\n    private Response.Listener&lt;NetworkResponse&gt; mListener;\n    private Response.ErrorListener mErrorListener;\n    private Map&lt;String, String&gt; mHeaders;\n\n\n    public VolleyMultipartRequest(int method, String url,\n                                  Response.Listener&lt;NetworkResponse&gt; listener,\n                                  Response.ErrorListener errorListener) {\n        super(method, url, errorListener);\n        this.mListener = listener;\n        this.mErrorListener = errorListener;\n    }\n\n    @Override\n    public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n        return (mHeaders != null) ? mHeaders : super.getHeaders();\n    }\n\n    @Override\n    public String getBodyContentType() {\n        return &quot;multipart/form-data;boundary=&quot; + boundary;\n    }\n\n    @Override\n    public byte[] getBody() throws AuthFailureError {\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        DataOutputStream dos = new DataOutputStream(bos);\n\n        try {\n            // populate text payload\n            Map&lt;String, String&gt; params = getParams();\n            if (params != null &amp;&amp; params.size() &gt; 0) {\n                textParse(dos, params, getParamsEncoding());\n            }\n\n            // populate data byte payload\n            Map&lt;String, DataPart&gt; data = getByteData();\n            if (data != null &amp;&amp; data.size() &gt; 0) {\n                dataParse(dos, data);\n            }\n\n            // close multipart form data after text and file data\n            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);\n\n            return bos.toByteArray();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    /**\n     * Custom method handle data payload.\n     *\n     * @return Map data part label with data byte\n     * @throws AuthFailureError\n     */\n    protected Map&lt;String, DataPart&gt; getByteData() throws AuthFailureError {\n        return null;\n    }\n\n    @Override\n    protected Response&lt;NetworkResponse&gt; parseNetworkResponse(NetworkResponse response) {\n        try {\n            return Response.success(\n                    response,\n                    HttpHeaderParser.parseCacheHeaders(response));\n        } catch (Exception e) {\n            return Response.error(new ParseError(e));\n        }\n    }\n\n    @Override\n    protected void deliverResponse(NetworkResponse response) {\n        mListener.onResponse(response);\n    }\n\n    @Override\n    public void deliverError(VolleyError error) {\n        mErrorListener.onErrorResponse(error);\n    }\n\n    /**\n     * Parse string map into data output stream by key and value.\n     *\n     * @param dataOutputStream data output stream handle string parsing\n     * @param params           string inputs collection\n     * @param encoding         encode the inputs, default UTF-8\n     * @throws IOException\n     */\n    private void textParse(DataOutputStream dataOutputStream, Map&lt;String, String&gt; params, String encoding) throws IOException {\n        try {\n            for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\n                buildTextPart(dataOutputStream, entry.getKey(), entry.getValue());\n            }\n        } catch (UnsupportedEncodingException uee) {\n            throw new RuntimeException(&quot;Encoding not supported: &quot; + encoding, uee);\n        }\n    }\n\n    /**\n     * Parse data into data output stream.\n     *\n     * @param dataOutputStream data output stream handle file attachment\n     * @param data             loop through data\n     * @throws IOException\n     */\n    private void dataParse(DataOutputStream dataOutputStream, Map&lt;String, DataPart&gt; data) throws IOException {\n        for (Map.Entry&lt;String, DataPart&gt; entry : data.entrySet()) {\n            buildDataPart(dataOutputStream, entry.getValue(), entry.getKey());\n        }\n    }\n\n    /**\n     * Write string data into header and data output stream.\n     *\n     * @param dataOutputStream data output stream handle string parsing\n     * @param parameterName    name of input\n     * @param parameterValue   value of input\n     * @throws IOException\n     */\n    private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\n        dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot; + parameterName + &quot;\\&quot;&quot; + lineEnd);\n        dataOutputStream.writeBytes(lineEnd);\n        dataOutputStream.writeBytes(parameterValue + lineEnd);\n    }\n\n    /**\n     * Write data file into header and data output stream.\n     *\n     * @param dataOutputStream data output stream handle data parsing\n     * @param dataFile         data byte as DataPart from collection\n     * @param inputName        name of data input\n     * @throws IOException\n     */\n    private void buildDataPart(DataOutputStream dataOutputStream, DataPart dataFile, String inputName) throws IOException {\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\n        dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot; +\n                inputName + &quot;\\&quot;; filename=\\&quot;&quot; + dataFile.getFileName() + &quot;\\&quot;&quot; + lineEnd);\n        if (dataFile.getType() != null &amp;&amp; !dataFile.getType().trim().isEmpty()) {\n            dataOutputStream.writeBytes(&quot;Content-Type: &quot; + dataFile.getType() + lineEnd);\n        }\n        dataOutputStream.writeBytes(lineEnd);\n\n        ByteArrayInputStream fileInputStream = new ByteArrayInputStream(dataFile.getContent());\n        int bytesAvailable = fileInputStream.available();\n\n        int maxBufferSize = 1024 * 1024;\n        int bufferSize = Math.min(bytesAvailable, maxBufferSize);\n        byte[] buffer = new byte[bufferSize];\n\n        int bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n\n        while (bytesRead &gt; 0) {\n            dataOutputStream.write(buffer, 0, bufferSize);\n            bytesAvailable = fileInputStream.available();\n            bufferSize = Math.min(bytesAvailable, maxBufferSize);\n            bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n        }\n\n        dataOutputStream.writeBytes(lineEnd);\n    }\n\n    class DataPart {\n        private String fileName;\n        private byte[] content;\n        private String type;\n\n        public DataPart() {\n        }\n\n        DataPart(String name, byte[] data) {\n            fileName = name;\n            content = data;\n        }\n\n        String getFileName() {\n            return fileName;\n        }\n\n        byte[] getContent() {\n            return content;\n        }\n\n        String getType() {\n            return type;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","toolbar"],"answers":[{"tags":[],"owner":{"account_id":28981741,"reputation":1,"user_id":22199473,"display_name":"Fourier Mourier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689076426,"creation_date":1688919283,"answer_id":76648390,"question_id":76202484,"body_markdown":"It seems you have to use \r\n\r\n```\r\n    setSupportActionBar(binding.toolbar.getRoot());\r\n```\r\n\r\ninstead of \r\n```\r\n    setSupportActionBar(binding.toolbar) \r\n```\r\nsince `getRoot()` will actually return `View` declared in `res/layout/toolbar-like.xml` file rather than its reference in `activity.xml`:\r\n\r\nhttps://developer.android.com/reference/android/databinding/ViewDataBinding#getroot","title":"Error in setSupportActionBar(binding.toolbar) in mainActivity java","body":"<p>It seems you have to use</p>\n<pre><code>    setSupportActionBar(binding.toolbar.getRoot());\n</code></pre>\n<p>instead of</p>\n<pre><code>    setSupportActionBar(binding.toolbar) \n</code></pre>\n<p>since <code>getRoot()</code> will actually return <code>View</code> declared in <code>res/layout/toolbar-like.xml</code> file rather than its reference in <code>activity.xml</code>:</p>\n<p><a href=\"https://developer.android.com/reference/android/databinding/ViewDataBinding#getroot\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/databinding/ViewDataBinding#getroot</a></p>\n"}],"owner":{"display_name":"user18253054"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689076426,"creation_date":1683563321,"question_id":76202484,"body_markdown":"There is an error while working in android studio in main activity java. \r\nThe error is saying can&#39;t resolve the symbol in &quot;setSupportActionBar(binding.toolbar)&quot; and It is built in code. I tried importing implementations but the issue still occurs. And there is no quick fixes for this error showing. What should I do to solve the error. \r\n\r\n\r\n```\r\n\r\npackage com.example.learn1;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.google.android.material.snackbar.Snackbar;\r\nimport androidx.appcompat.widget.Toolbar;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.util.*;\r\n\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.ui.AppBarConfiguration;\r\nimport androidx.navigation.ui.NavigationUI;\r\n\r\nimport com.example.learn1.databinding.ActivityMainBinding;\r\n\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.widget.EditText;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    public void login(View view)\r\n    {\r\n        EditText usernameEditText = (EditText)findViewById(R.id.usernameEditText);\r\n        EditText passwordEditText = (EditText) findViewById(R.id.passwordEditText);\r\n        Log.i(&quot;Info&quot;, &quot;Button Pressed&quot;);\r\n\r\n    }\r\n    public void clickFunction(View view)\r\n    {\r\n        EditText usernameEditText= (EditText) findViewById(R.id.usernameEditText);\r\n\r\n\r\n        Log.i(&quot;Values&quot; ,usernameEditText.getText().toString());\r\n        Log.i(&quot;info&quot;,&quot;Button pressed&quot;);\r\n    }\r\n    private AppBarConfiguration appBarConfiguration;\r\n    private ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n\r\n       setSupportActionBar(binding.toolbar);\r\n\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\r\n        appBarConfiguration = new AppBarConfiguration.Builder(navController.getGraph()).build();\r\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\r\n\r\n        binding.fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Snackbar.make(view, &quot;Replace with your own action&quot;, Snackbar.LENGTH_LONG)\r\n                        .setAction(&quot;Action&quot;, null).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.menu_main, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        // Handle action bar item clicks here. The action bar will\r\n        // automatically handle clicks on the Home/Up button, so long\r\n        // as you specify a parent activity in AndroidManifest.xml.\r\n        int id = item.getItemId();\r\n\r\n        //noinspection SimplifiableIfStatement\r\n        if (id == R.id.action_settings) {\r\n            return true;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\r\n        return NavigationUI.navigateUp(navController, appBarConfiguration)\r\n                || super.onSupportNavigateUp();\r\n    }\r\n}\r\n```\r\n\r\n","title":"Error in setSupportActionBar(binding.toolbar) in mainActivity java","body":"<p>There is an error while working in android studio in main activity java.\nThe error is saying can't resolve the symbol in &quot;setSupportActionBar(binding.toolbar)&quot; and It is built in code. I tried importing implementations but the issue still occurs. And there is no quick fixes for this error showing. What should I do to solve the error.</p>\n<pre><code>\npackage com.example.learn1;\n\nimport android.os.Bundle;\n\nimport com.google.android.material.snackbar.Snackbar;\nimport androidx.appcompat.widget.Toolbar;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.util.Log;\nimport android.view.View;\nimport android.util.*;\n\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.AppBarConfiguration;\nimport androidx.navigation.ui.NavigationUI;\n\nimport com.example.learn1.databinding.ActivityMainBinding;\n\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.widget.EditText;\n\npublic class MainActivity extends AppCompatActivity {\n\n    public void login(View view)\n    {\n        EditText usernameEditText = (EditText)findViewById(R.id.usernameEditText);\n        EditText passwordEditText = (EditText) findViewById(R.id.passwordEditText);\n        Log.i(&quot;Info&quot;, &quot;Button Pressed&quot;);\n\n    }\n    public void clickFunction(View view)\n    {\n        EditText usernameEditText= (EditText) findViewById(R.id.usernameEditText);\n\n\n        Log.i(&quot;Values&quot; ,usernameEditText.getText().toString());\n        Log.i(&quot;info&quot;,&quot;Button pressed&quot;);\n    }\n    private AppBarConfiguration appBarConfiguration;\n    private ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n\n       setSupportActionBar(binding.toolbar);\n\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\n        appBarConfiguration = new AppBarConfiguration.Builder(navController.getGraph()).build();\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\n\n        binding.fab.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Snackbar.make(view, &quot;Replace with your own action&quot;, Snackbar.LENGTH_LONG)\n                        .setAction(&quot;Action&quot;, null).show();\n            }\n        });\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.menu_main, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        // Handle action bar item clicks here. The action bar will\n        // automatically handle clicks on the Home/Up button, so long\n        // as you specify a parent activity in AndroidManifest.xml.\n        int id = item.getItemId();\n\n        //noinspection SimplifiableIfStatement\n        if (id == R.id.action_settings) {\n            return true;\n        }\n\n        return super.onOptionsItemSelected(item);\n    }\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\n        return NavigationUI.navigateUp(navController, appBarConfiguration)\n                || super.onSupportNavigateUp();\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","arraylist"],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689076026,"creation_date":1689076026,"answer_id":76661660,"question_id":76658463,"body_markdown":"Rather than using a collection of `JLabel`s, I suggest using two [JList][1]s, each in its own, separate [JScrollPane][2] and put those two `JScrollPane`s in a `JPanel` with [GridLayout][3].\r\n\r\nHere is a complete example.  \r\n(Note that I simply hard-coded two lists.)\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.EventQueue;\r\nimport java.awt.GridLayout;\r\nimport java.util.List;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JList;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\n\r\npublic class TwoLists {\r\n\r\n    private void createAndDisplayGui() {\r\n        JFrame frame = new JFrame();\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.add(createLists(), BorderLayout.CENTER);\r\n        frame.pack();\r\n        frame.setLocationByPlatform(true);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private JScrollPane createList(List&lt;String&gt; elems) {\r\n        String[] arr = elems.toArray(new String[]{});\r\n        JList&lt;String&gt; list = new JList&lt;String&gt;(arr);\r\n        JScrollPane scrollPane = new JScrollPane(list);\r\n        return scrollPane;\r\n    }\r\n\r\n    private JPanel createLists() {\r\n        JPanel panel = new JPanel(new GridLayout(0, 2));\r\n        panel.add(createList(getOldList()));\r\n        panel.add(createList(getNewList()));\r\n        return panel;\r\n    }\r\n\r\n    private List&lt;String&gt; getNewList() {\r\n        return List.of(&quot;new 0&quot;, &quot;new 1&quot;, &quot;new 2&quot;, &quot;new 3&quot;, &quot;new 4&quot;);\r\n    }\r\n\r\n    private List&lt;String&gt; getOldList() {\r\n        return List.of(&quot;old 0&quot;, &quot;old 1&quot;, &quot;old 2&quot;, &quot;old 3&quot;, &quot;old 4&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(() -&gt; new TwoLists().createAndDisplayGui());\r\n    }\r\n}\r\n```\r\nHere is a screen capture:\r\n\r\n[![screen capture][4]][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/components/list.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\r\n  [4]: https://i.stack.imgur.com/Dgzo5.png","title":"I&#39;m trying to use GridbagLayout to display 2 columns of JLabels inside of a ScrollPane. What part of my code is stopping the intended results?","body":"<p>Rather than using a collection of <code>JLabel</code>s, I suggest using two <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/list.html\" rel=\"nofollow noreferrer\">JList</a>s, each in its own, separate <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">JScrollPane</a> and put those two <code>JScrollPane</code>s in a <code>JPanel</code> with <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\" rel=\"nofollow noreferrer\">GridLayout</a>.</p>\n<p>Here is a complete example.<br />\n(Note that I simply hard-coded two lists.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport java.util.List;\n\nimport javax.swing.JFrame;\nimport javax.swing.JList;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\n\npublic class TwoLists {\n\n    private void createAndDisplayGui() {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(createLists(), BorderLayout.CENTER);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JScrollPane createList(List&lt;String&gt; elems) {\n        String[] arr = elems.toArray(new String[]{});\n        JList&lt;String&gt; list = new JList&lt;String&gt;(arr);\n        JScrollPane scrollPane = new JScrollPane(list);\n        return scrollPane;\n    }\n\n    private JPanel createLists() {\n        JPanel panel = new JPanel(new GridLayout(0, 2));\n        panel.add(createList(getOldList()));\n        panel.add(createList(getNewList()));\n        return panel;\n    }\n\n    private List&lt;String&gt; getNewList() {\n        return List.of(&quot;new 0&quot;, &quot;new 1&quot;, &quot;new 2&quot;, &quot;new 3&quot;, &quot;new 4&quot;);\n    }\n\n    private List&lt;String&gt; getOldList() {\n        return List.of(&quot;old 0&quot;, &quot;old 1&quot;, &quot;old 2&quot;, &quot;old 3&quot;, &quot;old 4&quot;);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; new TwoLists().createAndDisplayGui());\n    }\n}\n</code></pre>\n<p>Here is a screen capture:</p>\n<p><a href=\"https://i.stack.imgur.com/Dgzo5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dgzo5.png\" alt=\"screen capture\" /></a></p>\n"}],"owner":{"account_id":18259582,"reputation":11,"user_id":13292676,"display_name":"Jacob Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689076413,"creation_date":1689044484,"question_id":76658463,"body_markdown":"I&#39;m working on a program that deals with lists of jobs with a list of contractor names for each job. This part of the program will take two lists, one with an old set of contractor names and one with an updated list of names and display them next to each other. The setup for it is a `JFrame` with a `JScrollPane` inside and a `JPanel` inside the viewport. The `JPanel` uses a `GridBagLayout` to display the two lists with the old list in column 0 and the new list in column 1. When the program runs, the two lists are in the same column. I cannot tell what makes it do this.\r\n```java\r\nprivate void displayUpdateInfoFrame(ParseFullDoc updatedDoc) {\r\n\r\n    // set up the frame\r\n    JFrame updateInfoFrame = new JFrame() {\r\n        {\r\n            setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            setTitle(&quot;Update Information&quot;);\r\n            getContentPane().setLayout(new GridBagLayout());\r\n            setSize(1250, 600);\r\n        }\r\n    };\r\n    ArrayList&lt;Job&gt; oldJobs = parseFullDoc.getJobList();\r\n    ArrayList&lt;Job&gt; newJobs = filterUpdatedJobs(updatedDoc);\r\n\r\n    final ArrayList&lt;JLabel&gt; jobLabels = new ArrayList&lt;JLabel&gt;();\r\n    final ArrayList&lt;Status&gt; jobLabelStatus = new ArrayList&lt;Status&gt;();\r\n\r\n    GridBagConstraints infoConstraints = new GridBagConstraints();\r\n\r\n    ArrayList&lt;JLabel&gt; newJobLabels = getInfoLabels(JOBSET.NEW, oldJobs, newJobs, jobLabels, jobLabelStatus);\r\n    ArrayList&lt;JLabel&gt; oldJobLabels = getInfoLabels(JOBSET.OLD, oldJobs, newJobs, jobLabels, jobLabelStatus);\r\n\r\n    JScrollPane infoScrollPane = new JScrollPane();\r\n    JPanel infoPanel = new JPanel(new GridBagLayout());\r\n\r\n    for (int oldIndex = 0; oldIndex &lt; oldJobLabels.size(); oldIndex++) {\r\n        infoConstraints.gridx = 0;\r\n        infoConstraints.gridy = oldIndex;\r\n        infoPanel.add(oldJobLabels.get(oldIndex), infoConstraints);\r\n    }\r\n    for (int newIndex = 0; newIndex &lt; newJobLabels.size(); newIndex++) {\r\n        infoConstraints = new GridBagConstraints();\r\n        infoConstraints.gridx = 1;\r\n        infoConstraints.gridy = newIndex;\r\n        infoPanel.add(newJobLabels.get(newIndex), infoConstraints);\r\n    }\r\n    GridBagConstraints infoFrameConstraints = new GridBagConstraints();\r\n    infoFrameConstraints.gridx = 0;\r\n    infoFrameConstraints.gridy = 0;\r\n    infoFrameConstraints.fill = GridBagConstraints.BOTH; // Fill both horizontally and vertically\r\n    infoFrameConstraints.weightx = 1.0; // Expand horizontally\r\n    infoFrameConstraints.weighty = 1.0; // Expand vertically\r\n\r\n    infoScrollPane.setViewportView(infoPanel);\r\n    updateInfoFrame.add(infoScrollPane, infoFrameConstraints);\r\n    updateInfoFrame.setVisible(true);\r\n}\r\n```\r\nI first tried two scroll panes next to each other, but only one showed on the frame. I&#39;ve tried to exclude the scroll pane, with only the `JPanel` inside the frame, but it still shows the two lists in the same column. I&#39;ve tried to add a column in between the two lists, but it still doesn&#39;t show properly.\r\n","title":"I&#39;m trying to use GridbagLayout to display 2 columns of JLabels inside of a ScrollPane. What part of my code is stopping the intended results?","body":"<p>I'm working on a program that deals with lists of jobs with a list of contractor names for each job. This part of the program will take two lists, one with an old set of contractor names and one with an updated list of names and display them next to each other. The setup for it is a <code>JFrame</code> with a <code>JScrollPane</code> inside and a <code>JPanel</code> inside the viewport. The <code>JPanel</code> uses a <code>GridBagLayout</code> to display the two lists with the old list in column 0 and the new list in column 1. When the program runs, the two lists are in the same column. I cannot tell what makes it do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void displayUpdateInfoFrame(ParseFullDoc updatedDoc) {\n\n    // set up the frame\n    JFrame updateInfoFrame = new JFrame() {\n        {\n            setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n            setTitle(&quot;Update Information&quot;);\n            getContentPane().setLayout(new GridBagLayout());\n            setSize(1250, 600);\n        }\n    };\n    ArrayList&lt;Job&gt; oldJobs = parseFullDoc.getJobList();\n    ArrayList&lt;Job&gt; newJobs = filterUpdatedJobs(updatedDoc);\n\n    final ArrayList&lt;JLabel&gt; jobLabels = new ArrayList&lt;JLabel&gt;();\n    final ArrayList&lt;Status&gt; jobLabelStatus = new ArrayList&lt;Status&gt;();\n\n    GridBagConstraints infoConstraints = new GridBagConstraints();\n\n    ArrayList&lt;JLabel&gt; newJobLabels = getInfoLabels(JOBSET.NEW, oldJobs, newJobs, jobLabels, jobLabelStatus);\n    ArrayList&lt;JLabel&gt; oldJobLabels = getInfoLabels(JOBSET.OLD, oldJobs, newJobs, jobLabels, jobLabelStatus);\n\n    JScrollPane infoScrollPane = new JScrollPane();\n    JPanel infoPanel = new JPanel(new GridBagLayout());\n\n    for (int oldIndex = 0; oldIndex &lt; oldJobLabels.size(); oldIndex++) {\n        infoConstraints.gridx = 0;\n        infoConstraints.gridy = oldIndex;\n        infoPanel.add(oldJobLabels.get(oldIndex), infoConstraints);\n    }\n    for (int newIndex = 0; newIndex &lt; newJobLabels.size(); newIndex++) {\n        infoConstraints = new GridBagConstraints();\n        infoConstraints.gridx = 1;\n        infoConstraints.gridy = newIndex;\n        infoPanel.add(newJobLabels.get(newIndex), infoConstraints);\n    }\n    GridBagConstraints infoFrameConstraints = new GridBagConstraints();\n    infoFrameConstraints.gridx = 0;\n    infoFrameConstraints.gridy = 0;\n    infoFrameConstraints.fill = GridBagConstraints.BOTH; // Fill both horizontally and vertically\n    infoFrameConstraints.weightx = 1.0; // Expand horizontally\n    infoFrameConstraints.weighty = 1.0; // Expand vertically\n\n    infoScrollPane.setViewportView(infoPanel);\n    updateInfoFrame.add(infoScrollPane, infoFrameConstraints);\n    updateInfoFrame.setVisible(true);\n}\n</code></pre>\n<p>I first tried two scroll panes next to each other, but only one showed on the frame. I've tried to exclude the scroll pane, with only the <code>JPanel</code> inside the frame, but it still shows the two lists in the same column. I've tried to add a column in between the two lists, but it still doesn't show properly.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":7840259,"reputation":2347,"user_id":5927073,"accept_rate":100,"display_name":"beastlyCoder"},"score":0,"creation_date":1598066648,"post_id":63532247,"comment_id":112344473,"body_markdown":"yeah i&#39;m aware of that, i was kind of looking to see if I can get it with streams based practice","body":"yeah i&#39;m aware of that, i was kind of looking to see if I can get it with streams based practice"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1598066924,"post_id":63532247,"comment_id":112344524,"body_markdown":"what exactly is the question? the order isn&#39;t correct or that the expected output is not what you think it should be? what is it from streams that you are looking for?","body":"what exactly is the question? the order isn&#39;t correct or that the expected output is not what you think it should be? what is it from streams that you are looking for?"},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":0,"creation_date":1598070531,"post_id":63532247,"comment_id":112344969,"body_markdown":"What is the order in 2nd example  output?","body":"What is the order in 2nd example  output?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1598265483,"post_id":63532332,"comment_id":112392132,"body_markdown":"With the current version of the reference implementation, `.sorted().distinct()` is more efficient than `.distinct().sorted()`, because the subsequent distinct op will utilize the sorted nature of the data.","body":"With the current version of the reference implementation, <code>.sorted().distinct()</code> is more efficient than <code>.distinct().sorted()</code>, because the subsequent distinct op will utilize the sorted nature of the data."}],"tags":[],"owner":{"account_id":6929274,"reputation":5258,"user_id":5319267,"display_name":"Mario Ishac"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1598266494,"creation_date":1598067464,"answer_id":63532332,"question_id":63532247,"body_markdown":"As I had pointed out in the comments using a `LinkedHashSet` would be best here, but for the `Stream`s practice you could do this:\r\n\r\n```\r\npublic static String removeDuplicateLetters(String s) {\r\n    return s.chars().sorted().distinct().collect(\r\n        StringBuilder::new,\r\n        StringBuilder::appendCodePoint,\r\n        StringBuilder::append\r\n    ).toString();\r\n}\r\n```\r\n\r\nNote: `distinct()` comes after `sorted()` in order to optimize the stream, see Holger&#39;s explanation in the comments as well as [this answer][1].\r\n\r\nLot of different things here so I&#39;ll number them:\r\n\r\n1) You can stream the characters of a `String` using `String#chars()` instead of making a `List` where you add all the characters.\r\n\r\n2) To ensure that the resulting string is smallest in lexographical order, we can sort the `IntStream`.\r\n\r\n3) We can convert the `IntStream` back to a `String` by performing a [mutable reduction][2] with a `StringBuilder`. We then convert this `StringBuilder` to our desired string.\r\n\r\nA mutable reduction is the `Stream` way of doing the equivalent of something like:\r\n\r\n```\r\nfor (char ch : newVal) {\r\n    newStr += ch;\r\n}\r\n```\r\n\r\nHowever, this has the added benefit of using a `StringBuilder` for concatenation instead of a `String`. See [this answer][3] as to why this is more performant.\r\n\r\nFor the actual question you have about the conflict of expected vs. observed output: I believe `abcd` is the right answer for the second output, since it is the smallest in lexographical order.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43807329/5319267\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\r\n  [3]: https://stackoverflow.com/a/1532483/5319267","title":"Java 8 Streams Remove Duplicate Letter","body":"<p>As I had pointed out in the comments using a <code>LinkedHashSet</code> would be best here, but for the <code>Stream</code>s practice you could do this:</p>\n<pre><code>public static String removeDuplicateLetters(String s) {\n    return s.chars().sorted().distinct().collect(\n        StringBuilder::new,\n        StringBuilder::appendCodePoint,\n        StringBuilder::append\n    ).toString();\n}\n</code></pre>\n<p>Note: <code>distinct()</code> comes after <code>sorted()</code> in order to optimize the stream, see Holger's explanation in the comments as well as <a href=\"https://stackoverflow.com/a/43807329/5319267\">this answer</a>.</p>\n<p>Lot of different things here so I'll number them:</p>\n<ol>\n<li><p>You can stream the characters of a <code>String</code> using <code>String#chars()</code> instead of making a <code>List</code> where you add all the characters.</p>\n</li>\n<li><p>To ensure that the resulting string is smallest in lexographical order, we can sort the <code>IntStream</code>.</p>\n</li>\n<li><p>We can convert the <code>IntStream</code> back to a <code>String</code> by performing a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\">mutable reduction</a> with a <code>StringBuilder</code>. We then convert this <code>StringBuilder</code> to our desired string.</p>\n</li>\n</ol>\n<p>A mutable reduction is the <code>Stream</code> way of doing the equivalent of something like:</p>\n<pre><code>for (char ch : newVal) {\n    newStr += ch;\n}\n</code></pre>\n<p>However, this has the added benefit of using a <code>StringBuilder</code> for concatenation instead of a <code>String</code>. See <a href=\"https://stackoverflow.com/a/1532483/5319267\">this answer</a> as to why this is more performant.</p>\n<p>For the actual question you have about the conflict of expected vs. observed output: I believe <code>abcd</code> is the right answer for the second output, since it is the smallest in lexographical order.</p>\n"},{"tags":[],"owner":{"account_id":9861972,"reputation":41,"user_id":7304620,"display_name":"JunChen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598086946,"creation_date":1598086946,"answer_id":63534414,"question_id":63532247,"body_markdown":"    public static void main(String[] args) {\r\n        String string = &quot;cbacdcbc&quot;;\r\n        string.chars()\r\n                .mapToObj(item -&gt; (char) item)\r\n                .collect(Collectors.toSet()).forEach(System.out::print);\r\n\r\n    }\r\nthe output：abcd，hope help you!","title":"Java 8 Streams Remove Duplicate Letter","body":"<pre><code>public static void main(String[] args) {\n    String string = &quot;cbacdcbc&quot;;\n    string.chars()\n            .mapToObj(item -&gt; (char) item)\n            .collect(Collectors.toSet()).forEach(System.out::print);\n\n}\n</code></pre>\n<p>the output：abcd，hope help you!</p>\n"},{"tags":[],"owner":{"account_id":18843013,"reputation":9,"user_id":13744016,"display_name":"Ajay Pant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681381959,"creation_date":1681381959,"answer_id":76004410,"question_id":63532247,"body_markdown":"//1st Approach\r\n\r\n    String input = &quot;aabscs&quot;;\r\n    Arrays.stream(input.split(&quot;&quot;))\r\n          .collect(Collectors.toSet()).forEach(System.out::print);\r\n\r\n\r\n//2nd Approach\r\n\r\n    input.chars()\r\n                .mapToObj(item -&gt; (char) item)\r\n                .collect(Collectors.toSet()).forEach(System.out::print);\r\n\r\n//Output: absc\r\n\r\n\r\n/**\r\nIt can be done in multiple ways, we can also use Map, but I think this is a simple one.\r\n\r\nHope it will help you\r\n*/\r\n    ","title":"Java 8 Streams Remove Duplicate Letter","body":"<p>//1st Approach</p>\n<pre><code>String input = &quot;aabscs&quot;;\nArrays.stream(input.split(&quot;&quot;))\n      .collect(Collectors.toSet()).forEach(System.out::print);\n</code></pre>\n<p>//2nd Approach</p>\n<pre><code>input.chars()\n            .mapToObj(item -&gt; (char) item)\n            .collect(Collectors.toSet()).forEach(System.out::print);\n</code></pre>\n<p>//Output: absc</p>\n<p>/**\nIt can be done in multiple ways, we can also use Map, but I think this is a simple one.</p>\n<p>Hope it will help you\n*/</p>\n"},{"comments":[{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":2,"creation_date":1689070958,"post_id":76644063,"comment_id":135157961,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76644063/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28977176,"reputation":1,"user_id":22195999,"display_name":"siva"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689076236,"creation_date":1688835873,"answer_id":76644063,"question_id":63532247,"body_markdown":"```java\r\nList&lt;String&gt; c = Arrays\r\n  .asList(&quot;helloword&quot;.split(&quot;&quot;))\r\n  .stream()\r\n  .distinct()\r\n  .toList();\r\n```","title":"Java 8 Streams Remove Duplicate Letter","body":"<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; c = Arrays\n  .asList(&quot;helloword&quot;.split(&quot;&quot;))\n  .stream()\n  .distinct()\n  .toList();\n</code></pre>\n"}],"owner":{"account_id":7840259,"reputation":2347,"user_id":5927073,"accept_rate":100,"display_name":"beastlyCoder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3790,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":63532332,"answer_count":4,"score":5,"last_activity_date":1689076236,"creation_date":1598066293,"question_id":63532247,"body_markdown":"I&#39;m trying to apply my knowledge of streams to some leetcode algorithm questions. Here is a general summary of the question: \r\n\r\n&gt; Given a string which contains only lowercase letters, remove duplicate\r\n&gt; letters so that every letter appears once and only once. You must make\r\n&gt; sure your result is the smallest in lexicographical order among all\r\n&gt; possible results.\r\n\r\nExample: \r\n\r\n    Input: &quot;bcabc&quot;\r\n    Output: &quot;abc&quot;\r\n\r\nAnother example: \r\n\r\n    Input: &quot;cbacdcbc&quot;\r\n    Output: &quot;acdb&quot;\r\n\r\nThis seemed like a simple problem, just stream the values into a new list from the string, sort the values, find the distinct values, and then throw it back into a list, and append the list&#39;s value to a string. Here is what I came up with: \r\n\r\n    public String removeDuplicateLetters(String s)\r\n    {\r\n        char[] c = s.toCharArray();\r\n        List&lt;Character&gt; list = new ArrayList&lt;&gt;();\r\n        for(char ch : c) \r\n        {\r\n            list.add(ch);\r\n        }\r\n        \r\n        List&lt;Character&gt; newVal = list.stream().distinct().collect(Collectors.toList()); \r\n        String newStr = &quot;&quot;;\r\n        for(char ch : newVal) \r\n        {\r\n            newStr += ch;\r\n        }\r\n        \r\n        return newStr;\r\n    }\r\n\r\nThe first example is working perfectly, but instead of &quot;acdb&quot; for the second output, I&#39;m getting &quot;abcd&quot;. Why would abcd not be the least lexicographical order? Thanks!","title":"Java 8 Streams Remove Duplicate Letter","body":"<p>I'm trying to apply my knowledge of streams to some leetcode algorithm questions. Here is a general summary of the question:</p>\n<blockquote>\n<p>Given a string which contains only lowercase letters, remove duplicate\nletters so that every letter appears once and only once. You must make\nsure your result is the smallest in lexicographical order among all\npossible results.</p>\n</blockquote>\n<p>Example:</p>\n<pre><code>Input: &quot;bcabc&quot;\nOutput: &quot;abc&quot;\n</code></pre>\n<p>Another example:</p>\n<pre><code>Input: &quot;cbacdcbc&quot;\nOutput: &quot;acdb&quot;\n</code></pre>\n<p>This seemed like a simple problem, just stream the values into a new list from the string, sort the values, find the distinct values, and then throw it back into a list, and append the list's value to a string. Here is what I came up with:</p>\n<pre><code>public String removeDuplicateLetters(String s)\n{\n    char[] c = s.toCharArray();\n    List&lt;Character&gt; list = new ArrayList&lt;&gt;();\n    for(char ch : c) \n    {\n        list.add(ch);\n    }\n    \n    List&lt;Character&gt; newVal = list.stream().distinct().collect(Collectors.toList()); \n    String newStr = &quot;&quot;;\n    for(char ch : newVal) \n    {\n        newStr += ch;\n    }\n    \n    return newStr;\n}\n</code></pre>\n<p>The first example is working perfectly, but instead of &quot;acdb&quot; for the second output, I'm getting &quot;abcd&quot;. Why would abcd not be the least lexicographical order? Thanks!</p>\n"},{"tags":["java","apache-kafka","avro","classcastexception","confluent-schema-registry"],"answers":[{"comments":[{"owner":{"account_id":2035715,"reputation":115,"user_id":1818113,"display_name":"Dany Wehbe"},"score":1,"creation_date":1653310248,"post_id":70919905,"comment_id":127813154,"body_markdown":"thanks for the hint, it helped me significantly. You have to set the mentioned config in your Spring Boot application as follows:\nspring:\n  kafka:\n    producer:\n      value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\n    consumer:\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n      properties:\n        specific:\n          avro:\n            reader: true","body":"thanks for the hint, it helped me significantly. You have to set the mentioned config in your Spring Boot application as follows: spring:   kafka:     producer:       value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer       key-serializer: org.apache.kafka.common.serialization.StringSerializer     consumer:       key-deserializer: org.apache.kafka.common.serialization.StringDeserializer       value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer       properties:         specific:           avro:             reader: true"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":3,"creation_date":1653310449,"post_id":70919905,"comment_id":127813232,"body_markdown":"@Dany Consumer deserializer properties shouldn&#39;t be broken apart. `specific.avro.reader: true`  should be on one line","body":"@Dany Consumer deserializer properties shouldn&#39;t be broken apart. <code>specific.avro.reader: true</code>  should be on one line"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1664232771,"creation_date":1643585677,"answer_id":70919905,"question_id":70919159,"body_markdown":"By default, only generic records are returned. You&#39;ll need to set\r\n\r\n    value.deserializer.specific.avro.reader=true \r\n\r\nOr, use the constant in your consumer configs\r\n\r\n`KafkaAvroDeserializerConfig.SPECIFIC_AVRO_READER_CONFIG` = true","title":"Kafka : ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class","body":"<p>By default, only generic records are returned. You'll need to set</p>\n<pre><code>value.deserializer.specific.avro.reader=true \n</code></pre>\n<p>Or, use the constant in your consumer configs</p>\n<p><code>KafkaAvroDeserializerConfig.SPECIFIC_AVRO_READER_CONFIG</code> = true</p>\n"},{"tags":[],"owner":{"account_id":7966271,"reputation":11,"user_id":6012415,"display_name":"Adriano V."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689076109,"creation_date":1689076109,"answer_id":76661670,"question_id":70919159,"body_markdown":"We got the same error by deserializing Kafka records with AVRO in Apache Flink. The cause was that we had renamed the namespaces of the POJO objects generated by the AVRO tools. So the namespace of the schema and the POJO object differed.","title":"Kafka : ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class","body":"<p>We got the same error by deserializing Kafka records with AVRO in Apache Flink. The cause was that we had renamed the namespaces of the POJO objects generated by the AVRO tools. So the namespace of the schema and the POJO object differed.</p>\n"}],"owner":{"account_id":9076374,"reputation":177,"user_id":6757814,"display_name":"Rodjf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9568,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":70919905,"answer_count":2,"score":8,"last_activity_date":1689076109,"creation_date":1643578700,"question_id":70919159,"body_markdown":"I have this exception in the consumer when trying to cast the record.value() into java object :\r\n\r\n    ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast  to class [...].PublicActivityRecord (org.apache.avro.generic.GenericData$Record and [...].PublicActivityRecord are in unnamed module of loader &#39;app&#39;)\r\n\r\nThe **producer** sends the java object, which is a user defined type named `PublicActivityRecord`, like this :\r\n\r\n```java\r\nKafkaProducer&lt;String, PublicActivityRecord&gt; producer = new KafkaProducer&lt;&gt;(createKafkaProperties());\r\n\r\n[...]\r\n\r\n    this.producer.send(new ProducerRecord&lt;String, PublicActivityRecord&gt;(myTopic, activityRecord));\r\n    this.producer.flush();\r\n```\r\nAt this point I can see in debug mode that the value of the `ProducerRecord` is indeed of type `PublicActivityRecord`.\r\n\r\nOn the registry server I can see in the log the POST request of the producer sending the schema :\r\n```\r\nRegistering new schema: subject DEV-INF_9325_activityRecord_01-value, version null, id null, type null, schema size 7294 (io.confluent.kafka.schemaregistry.rest.resources.SubjectVersionsResource:262)\r\n[2022-01-28 07:01:35,575] INFO 192.168.36.30 - - [28/janv./2022:06:01:34 +0000] &quot;POST /subjects/DEV-INF_9325_activityRecord_01-value/versions HTTP/1.1&quot; 200 8 &quot;-&quot; &quot;Java/11.0.2&quot; POSTsT (io.confluent.rest-utils.requests:62)\r\n```\r\n\r\nOn the **consumer** side : \r\n\r\n```java\r\nprotected KafkaConsumer&lt;String, PublicActivityRecord&gt; consumer;\r\n\r\n[...]\r\n\r\nconsumer = new KafkaConsumer&lt;&gt;(consumerProperties);\r\nconsumer.subscribe(Stream.of(kafkaConfig.getTopicActivityRecord()).collect(Collectors.toList()));\r\nfinal ConsumerRecords&lt;String, PublicActivityRecord&gt; records = consumer.poll(duration);\r\nrecords.forEach(record -&gt; {\r\n\r\n    [...]\r\n\r\n    PublicActivityRecord activityRecord = record.value();\r\n\r\n```\r\nHere the ClassCastException occurs.\r\n\r\nIn debug mode, I can see that the `record.value` is indeed of type `GenericData$Record`. And it can not be cast to PublicActivityRecord.\r\n\r\nThe serializer/deserilizer keys and values are the same : \r\n```\r\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nvalue.deserializer=io.confluent.kafka.serializers.KafkaAvroDeserializer\r\n```\r\n\r\nAnd in the schema-registry log, I can see the GET request of the consumer :\r\n```\r\n&quot;GET /schemas/ids/3?fetchMaxId=false HTTP/1.1&quot; 200 8447 &quot;-&quot; &quot;Java/11.0.7&quot; GETsT (io.confluent.rest-utils.requests:62)\r\n```\r\n\r\nSo I have checked that :\r\n\r\n 1. the producer sends a message with my own type `PublicActivityRecord`\r\n 2. the message is received in the kafka broker\r\n 3. the producer posts the schema to the schema registry\r\n 4. the message is taken by the consumer \r\n 5. the schema is GET by the consumer from the schema registry\r\n 6. the value of the message is of the unexpected `GenericData$Record`\r\n\r\nThis leads me to the result that what is wrong is in my consumer.\r\n\r\nSo the question is : Why do the consumer get a `GenericData` record instead of the expected `PublicActivityRecord` ?\r\n\r\nAny clue would be much appreciated !","title":"Kafka : ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class","body":"<p>I have this exception in the consumer when trying to cast the record.value() into java object :</p>\n<pre><code>ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast  to class [...].PublicActivityRecord (org.apache.avro.generic.GenericData$Record and [...].PublicActivityRecord are in unnamed module of loader 'app')\n</code></pre>\n<p>The <strong>producer</strong> sends the java object, which is a user defined type named <code>PublicActivityRecord</code>, like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>KafkaProducer&lt;String, PublicActivityRecord&gt; producer = new KafkaProducer&lt;&gt;(createKafkaProperties());\n\n[...]\n\n    this.producer.send(new ProducerRecord&lt;String, PublicActivityRecord&gt;(myTopic, activityRecord));\n    this.producer.flush();\n</code></pre>\n<p>At this point I can see in debug mode that the value of the <code>ProducerRecord</code> is indeed of type <code>PublicActivityRecord</code>.</p>\n<p>On the registry server I can see in the log the POST request of the producer sending the schema :</p>\n<pre><code>Registering new schema: subject DEV-INF_9325_activityRecord_01-value, version null, id null, type null, schema size 7294 (io.confluent.kafka.schemaregistry.rest.resources.SubjectVersionsResource:262)\n[2022-01-28 07:01:35,575] INFO 192.168.36.30 - - [28/janv./2022:06:01:34 +0000] &quot;POST /subjects/DEV-INF_9325_activityRecord_01-value/versions HTTP/1.1&quot; 200 8 &quot;-&quot; &quot;Java/11.0.2&quot; POSTsT (io.confluent.rest-utils.requests:62)\n</code></pre>\n<p>On the <strong>consumer</strong> side :</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected KafkaConsumer&lt;String, PublicActivityRecord&gt; consumer;\n\n[...]\n\nconsumer = new KafkaConsumer&lt;&gt;(consumerProperties);\nconsumer.subscribe(Stream.of(kafkaConfig.getTopicActivityRecord()).collect(Collectors.toList()));\nfinal ConsumerRecords&lt;String, PublicActivityRecord&gt; records = consumer.poll(duration);\nrecords.forEach(record -&gt; {\n\n    [...]\n\n    PublicActivityRecord activityRecord = record.value();\n\n</code></pre>\n<p>Here the ClassCastException occurs.</p>\n<p>In debug mode, I can see that the <code>record.value</code> is indeed of type <code>GenericData$Record</code>. And it can not be cast to PublicActivityRecord.</p>\n<p>The serializer/deserilizer keys and values are the same :</p>\n<pre><code>key.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nvalue.deserializer=io.confluent.kafka.serializers.KafkaAvroDeserializer\n</code></pre>\n<p>And in the schema-registry log, I can see the GET request of the consumer :</p>\n<pre><code>&quot;GET /schemas/ids/3?fetchMaxId=false HTTP/1.1&quot; 200 8447 &quot;-&quot; &quot;Java/11.0.7&quot; GETsT (io.confluent.rest-utils.requests:62)\n</code></pre>\n<p>So I have checked that :</p>\n<ol>\n<li>the producer sends a message with my own type <code>PublicActivityRecord</code></li>\n<li>the message is received in the kafka broker</li>\n<li>the producer posts the schema to the schema registry</li>\n<li>the message is taken by the consumer</li>\n<li>the schema is GET by the consumer from the schema registry</li>\n<li>the value of the message is of the unexpected <code>GenericData$Record</code></li>\n</ol>\n<p>This leads me to the result that what is wrong is in my consumer.</p>\n<p>So the question is : Why do the consumer get a <code>GenericData</code> record instead of the expected <code>PublicActivityRecord</code> ?</p>\n<p>Any clue would be much appreciated !</p>\n"},{"tags":["java","spring-boot","kotlin","gradle","jira-rest-java-api"],"comments":[{"owner":{"account_id":27123034,"reputation":1993,"user_id":20666497,"display_name":"Albina"},"score":1,"creation_date":1682597533,"post_id":76119446,"comment_id":134242872,"body_markdown":"Should not the artifact name for Spring Boot 3+ be &#39;jakarta.ws.rs:jakarta.ws.rs-api&#39; and not &#39;javax.ws.rs:javax.ws.rs-api&#39;?","body":"Should not the artifact name for Spring Boot 3+ be &#39;jakarta.ws.rs:jakarta.ws.rs-api&#39; and not &#39;javax.ws.rs:javax.ws.rs-api&#39;?"},{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":0,"creation_date":1682598279,"post_id":76119446,"comment_id":134243076,"body_markdown":"This JAR doesn&#39;t contain `javax.ws.rs.core.UriBuilder`, it contains `jakarta.ws.rs.core.UriBuilder` - therefor the dependency is not fulfilled.","body":"This JAR doesn&#39;t contain <code>javax.ws.rs.core.UriBuilder</code>, it contains <code>jakarta.ws.rs.core.UriBuilder</code> - therefor the dependency is not fulfilled."},{"owner":{"account_id":27123034,"reputation":1993,"user_id":20666497,"display_name":"Albina"},"score":0,"creation_date":1682599002,"post_id":76119446,"comment_id":134243297,"body_markdown":"Not necessarily, for version 2.1.x the package name is javax.ws.rs.core, even though the artifact name starts with &#39;jakarta&#39;. Please check https://mvnrepository.com/artifact/jakarta.ws.rs/jakarta.ws.rs-api/2.1.4\nTherefore it might be suitable for the requirement from JiraRestClient.","body":"Not necessarily, for version 2.1.x the package name is javax.ws.rs.core, even though the artifact name starts with &#39;jakarta&#39;. Please check <a href=\"https://mvnrepository.com/artifact/jakarta.ws.rs/jakarta.ws.rs-api/2.1.4\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/jakarta.ws.rs/jakarta.ws.rs-api/&hellip;</a> Therefore it might be suitable for the requirement from JiraRestClient."},{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":0,"creation_date":1682601049,"post_id":76119446,"comment_id":134243868,"body_markdown":"@Albina I imported `jakarta.ws.rs:jakarta.ws.rs-api` and looked into it, there is no `javax.ws.rs.core.UriBuilder`, there is only a `jakarta.ws.rs.core.UriBuilder`","body":"@Albina I imported <code>jakarta.ws.rs:jakarta.ws.rs-api</code> and looked into it, there is no <code>javax.ws.rs.core.UriBuilder</code>, there is only a <code>jakarta.ws.rs.core.UriBuilder</code>"},{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":0,"creation_date":1682601214,"post_id":76119446,"comment_id":134243925,"body_markdown":"But maybe is your first comment the answer: I am not able to update to Spring Boot 3.x until JiraRestClient upgraded to `jakarta.ws.rs.core.UriBuilder`","body":"But maybe is your first comment the answer: I am not able to update to Spring Boot 3.x until JiraRestClient upgraded to <code>jakarta.ws.rs.core.UriBuilder</code>"}],"answers":[{"comments":[{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":1,"creation_date":1682602597,"post_id":76119926,"comment_id":134244274,"body_markdown":"Understood, thanks a lot. This means I have to stick to 2.x until JiraRestClient upgraded to `jakarta.ws.rs.core.UriBuilder`","body":"Understood, thanks a lot. This means I have to stick to 2.x until JiraRestClient upgraded to <code>jakarta.ws.rs.core.UriBuilder</code>"},{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":1,"creation_date":1682602982,"post_id":76119926,"comment_id":134244366,"body_markdown":"The corresponding issue is https://ecosystem.atlassian.net/browse/JRJC-262","body":"The corresponding issue is <a href=\"https://ecosystem.atlassian.net/browse/JRJC-262\" rel=\"nofollow noreferrer\">ecosystem.atlassian.net/browse/JRJC-262</a>"},{"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"score":0,"creation_date":1682603058,"post_id":76119926,"comment_id":134244390,"body_markdown":"Yes, either you need to either adjust your Spring Boot version or use the compatible  Jakarta WS RS or jakarta.ws.rs dependency type against the Spring Boot version to make the UriBuilder available in your classpath :)","body":"Yes, either you need to either adjust your Spring Boot version or use the compatible  Jakarta WS RS or jakarta.ws.rs dependency type against the Spring Boot version to make the UriBuilder available in your classpath :)"}],"tags":[],"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682601612,"creation_date":1682595434,"answer_id":76119926,"question_id":76119446,"body_markdown":"The reason is I think according to the Spring-Boot Release Notes (https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes), it is clearly mentioned it has been migrated from Java EE to Jakarta EE APIs (in this case javax.ws.rs and your Spring-Boot version is Spring Boot 3.0.6). \r\n\r\n&gt; Spring Boot 3.0 has migrated from Java EE to Jakarta EE APIs for all dependencies. Wherever possible, Jakarta EE 10 compatible dependencies have been chosen, including:\r\n\r\nIt has further included the compatible version to use is `Jakarta WS RS 3.1`\r\n\r\n\r\n\r\n\r\n\r\n","title":"Strange Issues with javax.ws.rs.core.UriBuilder","body":"<p>The reason is I think according to the Spring-Boot Release Notes (<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes</a>), it is clearly mentioned it has been migrated from Java EE to Jakarta EE APIs (in this case javax.ws.rs and your Spring-Boot version is Spring Boot 3.0.6).</p>\n<blockquote>\n<p>Spring Boot 3.0 has migrated from Java EE to Jakarta EE APIs for all dependencies. Wherever possible, Jakarta EE 10 compatible dependencies have been chosen, including:</p>\n</blockquote>\n<p>It has further included the compatible version to use is <code>Jakarta WS RS 3.1</code></p>\n"},{"tags":[],"owner":{"account_id":2749661,"reputation":51,"user_id":2369326,"accept_rate":100,"display_name":"Remon Sinnema"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686814787,"creation_date":1686814787,"answer_id":76480158,"question_id":76119446,"body_markdown":"If you can live with it, you can set the `jersey.version` property in your `build.gradle` or `pom.xml` to `2.35`.\r\n","title":"Strange Issues with javax.ws.rs.core.UriBuilder","body":"<p>If you can live with it, you can set the <code>jersey.version</code> property in your <code>build.gradle</code> or <code>pom.xml</code> to <code>2.35</code>.</p>\n"},{"comments":[{"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"score":1,"creation_date":1689164608,"post_id":76661651,"comment_id":135174181,"body_markdown":"If you follow https://ecosystem.atlassian.net/browse/JRJC-262, you will see my solution. But of course, your solution is much better, for me the way to go.","body":"If you follow <a href=\"https://ecosystem.atlassian.net/browse/JRJC-262\" rel=\"nofollow noreferrer\">ecosystem.atlassian.net/browse/JRJC-262</a>, you will see my solution. But of course, your solution is much better, for me the way to go."}],"tags":[],"owner":{"account_id":14642144,"reputation":61,"user_id":10574499,"display_name":"suno3"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689075954,"creation_date":1689075954,"answer_id":76661651,"question_id":76119446,"body_markdown":"I tested it In Spring boot 3.0.6\r\n\r\nbuild.gradle\r\n```\r\ndependencies {\r\n    implementation(&quot;com.atlassian.jira:jira-rest-java-client-core:5.2.5&quot;) {\r\n        exclude(group = &quot;org.glassfish.jersey.core&quot;, module = &quot;jersey-common&quot;)\r\n    }\r\n    implementation(&quot;org.glassfish.jersey.core:jersey-common:2.27&quot;)\r\n    compileOnly(&quot;io.atlassian.fugue:fugue:5.0.0&quot;)\r\n}\r\n```\r\nFirst, exclude `org.glassfish.jersey.core:jersey-common` from `jira-rest-java-client-core` \r\n\r\nThen, make version of `org.glassfish.jersey.core:jersey-common` down to 2.27 which has `javax.ws.rs:javax.ws.rs-api`\r\n\r\nJira api doesn&#39;t update javax to jakarta yet, so we can solve like above.","title":"Strange Issues with javax.ws.rs.core.UriBuilder","body":"<p>I tested it In Spring boot 3.0.6</p>\n<p>build.gradle</p>\n<pre><code>dependencies {\n    implementation(&quot;com.atlassian.jira:jira-rest-java-client-core:5.2.5&quot;) {\n        exclude(group = &quot;org.glassfish.jersey.core&quot;, module = &quot;jersey-common&quot;)\n    }\n    implementation(&quot;org.glassfish.jersey.core:jersey-common:2.27&quot;)\n    compileOnly(&quot;io.atlassian.fugue:fugue:5.0.0&quot;)\n}\n</code></pre>\n<p>First, exclude <code>org.glassfish.jersey.core:jersey-common</code> from <code>jira-rest-java-client-core</code></p>\n<p>Then, make version of <code>org.glassfish.jersey.core:jersey-common</code> down to 2.27 which has <code>javax.ws.rs:javax.ws.rs-api</code></p>\n<p>Jira api doesn't update javax to jakarta yet, so we can solve like above.</p>\n"}],"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2218,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76119926,"answer_count":3,"score":3,"last_activity_date":1689075954,"creation_date":1682591877,"question_id":76119446,"body_markdown":"Today I updated a command line application to Spring Boot 3.0.6\r\n\r\nI receive a `BeanCreationException` exception when starting the application. Reason is\r\n\r\n    Caused by: java.lang.ClassNotFoundException: javax.ws.rs.core.UriBuilder\r\n\r\nwhich is needed internaly by `com.atlassian.jira.rest.client.api.JiraRestClient`. In IDEA, when I search for `javax.ws.rs.core.UriBuilder` I do not find any class.\r\n\r\nSo I included \r\n\r\n\timplementation &#39;javax.ws.rs:javax.ws.rs-api:2.1.1&#39;\r\n\r\nin my Gradle build. Now I receive a\r\n\r\n```\r\nCaused by: java.lang.LinkageError: ClassCastException: attempting to cast\r\njar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class to\r\njar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class\r\n```\r\n\r\nboth lines/files are identically.\r\n\r\nThings I tried so far:\r\n\r\n- Checking for different versions of `javax.ws.rs` with `gradlew dependencies`\r\n- Clean build\r\n\r\nHas anyone an idea how to solve this and why is UriBuilder gone at all?","title":"Strange Issues with javax.ws.rs.core.UriBuilder","body":"<p>Today I updated a command line application to Spring Boot 3.0.6</p>\n<p>I receive a <code>BeanCreationException</code> exception when starting the application. Reason is</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: javax.ws.rs.core.UriBuilder\n</code></pre>\n<p>which is needed internaly by <code>com.atlassian.jira.rest.client.api.JiraRestClient</code>. In IDEA, when I search for <code>javax.ws.rs.core.UriBuilder</code> I do not find any class.</p>\n<p>So I included</p>\n<pre><code>implementation 'javax.ws.rs:javax.ws.rs-api:2.1.1'\n</code></pre>\n<p>in my Gradle build. Now I receive a</p>\n<pre><code>Caused by: java.lang.LinkageError: ClassCastException: attempting to cast\njar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class to\njar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class\n</code></pre>\n<p>both lines/files are identically.</p>\n<p>Things I tried so far:</p>\n<ul>\n<li>Checking for different versions of <code>javax.ws.rs</code> with <code>gradlew dependencies</code></li>\n<li>Clean build</li>\n</ul>\n<p>Has anyone an idea how to solve this and why is UriBuilder gone at all?</p>\n"},{"tags":["java","big-o","average","cost-management"],"comments":[{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":0,"creation_date":1689075282,"post_id":76661533,"comment_id":135158847,"body_markdown":"Average n/2, worse n, best 1; n being the length of the array. So it&#39;s O(n).","body":"Average n/2, worse n, best 1; n being the length of the array. So it&#39;s O(n)."},{"owner":{"account_id":10759610,"reputation":12648,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1689078705,"post_id":76661533,"comment_id":135159565,"body_markdown":"@Tarik that &quot;average&quot; is somewhat comparable to the 50% chance of being capable to fly by waving your hands.","body":"@Tarik that &quot;average&quot; is somewhat comparable to the 50% chance of being capable to fly by waving your hands."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1689088409,"post_id":76661533,"comment_id":135162145,"body_markdown":"It&#39;s not possible for the formula `2 + 3(j+1)` to yield a value of 15 assuming the *zeitliche kosten* column is one of expected results of the formula.","body":"It&#39;s not possible for the formula <code>2 + 3(j+1)</code> to yield a value of 15 assuming the <i>zeitliche kosten</i> column is one of expected results of the formula."}],"answers":[{"tags":[],"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689075604,"creation_date":1689075604,"answer_id":76661604,"question_id":76661533,"body_markdown":"T avg(n) = sum[p(x) * T(x)]\r\n\r\n= 1/n + 2/n +...+ (n-1)/n + n\r\n\r\n= 1/n (1+2+...n)\r\n\r\n= n(n+1)/2n = (n+1) / 2","title":"How many operations are required to find &quot;c&quot;?","body":"<p>T avg(n) = sum[p(x) * T(x)]</p>\n<p>= 1/n + 2/n +...+ (n-1)/n + n</p>\n<p>= 1/n (1+2+...n)</p>\n<p>= n(n+1)/2n = (n+1) / 2</p>\n"}],"owner":{"account_id":28493109,"reputation":11,"user_id":21805447,"display_name":"Brogrammer31"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76661604,"answer_count":1,"score":-1,"last_activity_date":1689075604,"creation_date":1689075095,"question_id":76661533,"body_markdown":"[![Please ignore the comments from line 2 - 5!](https://i.stack.imgur.com/gy7We.png)](https://i.stack.imgur.com/gy7We.png)\r\n\r\nHello, in the image you see a very simple algorithm of a contains function, which should just switch from boolean false to boolean true, if c is in the array[] a.\r\n\r\nNow i want to calculate the average case of this algorithm. \r\nBest case and worst case are easy to look through, but i am quite unsure how to get to the average one.\r\n\r\nThe array[] a hat n elements and c should be at index i. \r\n\r\n\r\nSo far, i know:\r\nT avg(n) = sum[p(x) * T(x)], where p(x) stands for the probability, to get input x.\r\n\r\n# *First of all i have to count the elementary operations, to find c. *\r\nTbh, i struggle there and can&#39;t get behind it. \r\nAs far as i know, from colleagues and my prof, the amount of elementary operations to find c is:\r\n**T n,j = 2 + 3(j + 1)**.\r\n\r\nIt would be much appreciated, if anyone could be explain to me why it&#39;s 2 + 3(j + 1).\r\n\r\nMy guess is that **2** comes from \r\n1. boolean res = false; (line 6) \r\n2. int i = 0; (line 7) \r\n\r\nIf that&#39;s correct (what i don&#39;t consider it to be) where does the **3** come from?\r\nI don&#39;t have to go through the array 3 times, because n is 4 (or do i?).\r\n\r\nAny help is much appreciated, because i really can&#39;t get behind that 2 + 3(j + 1).\r\nThank you!\r\n","title":"How many operations are required to find &quot;c&quot;?","body":"<p><a href=\"https://i.stack.imgur.com/gy7We.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gy7We.png\" alt=\"Please ignore the comments from line 2 - 5!\" /></a></p>\n<p>Hello, in the image you see a very simple algorithm of a contains function, which should just switch from boolean false to boolean true, if c is in the array[] a.</p>\n<p>Now i want to calculate the average case of this algorithm.\nBest case and worst case are easy to look through, but i am quite unsure how to get to the average one.</p>\n<p>The array[] a hat n elements and c should be at index i.</p>\n<p>So far, i know:\nT avg(n) = sum[p(x) * T(x)], where p(x) stands for the probability, to get input x.</p>\n<h1>*First of all i have to count the elementary operations, to find c. *</h1>\n<p>Tbh, i struggle there and can't get behind it.\nAs far as i know, from colleagues and my prof, the amount of elementary operations to find c is:\n<strong>T n,j = 2 + 3(j + 1)</strong>.</p>\n<p>It would be much appreciated, if anyone could be explain to me why it's 2 + 3(j + 1).</p>\n<p>My guess is that <strong>2</strong> comes from</p>\n<ol>\n<li>boolean res = false; (line 6)</li>\n<li>int i = 0; (line 7)</li>\n</ol>\n<p>If that's correct (what i don't consider it to be) where does the <strong>3</strong> come from?\nI don't have to go through the array 3 times, because n is 4 (or do i?).</p>\n<p>Any help is much appreciated, because i really can't get behind that 2 + 3(j + 1).\nThank you!</p>\n"},{"tags":["java","flyway"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1585560421,"post_id":44032229,"comment_id":107792662,"body_markdown":"When using `classpath` remove `src/main/java` as that is the classpath.","body":"When using <code>classpath</code> remove <code>src&#47;main&#47;java</code> as that is the classpath."}],"answers":[{"comments":[{"owner":{"account_id":9761986,"reputation":679,"user_id":7236804,"accept_rate":71,"display_name":"newOne"},"score":0,"creation_date":1495456562,"post_id":44072933,"comment_id":75245360,"body_markdown":"I try this and I wrote that isnt working. There is no need to declare key word &quot;classpath&quot;, because when you put only path, without any keyword(classpath,filesystem) in default flyway treats its like classpath. Follow by documentation: &quot;Unprefixed locations or locations starting with classpath&quot;. https://flywaydb.org/documentation/api/javadoc/org/flywaydb/core/Flyway.html#setLocations-java.lang.String...-","body":"I try this and I wrote that isnt working. There is no need to declare key word &quot;classpath&quot;, because when you put only path, without any keyword(classpath,filesystem) in default flyway treats its like classpath. Follow by documentation: &quot;Unprefixed locations or locations starting with classpath&quot;. <a href=\"https://flywaydb.org/documentation/api/javadoc/org/flywaydb/core/Flyway.html#setLocations-java.lang.String...-\" rel=\"nofollow noreferrer\">flywaydb.org/documentation/api/javadoc/org/flywaydb/core/&hellip;</a>"}],"tags":[],"owner":{"account_id":2568475,"reputation":422,"user_id":2227869,"display_name":"Florian E."},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1495204945,"creation_date":1495204945,"answer_id":44072933,"question_id":44032229,"body_markdown":"&#39;classpath&#39; means really classpath and you can not extend your classpath with a path.\r\n\r\nWhen I see your classpath declaration than I think your migration will be packaged in a jar with the path &#39;&lt;code&gt;com/some1/some2/some3/database/migration&lt;/code&gt;&#39;\r\n\r\n=&gt; so your classpath configuration must be look like: \r\n&lt;pre&gt;classpath:com/some1/some2/some3/database/migration&lt;/pre&gt;\r\n\r\nIf you use SQL file based migration I have better experience with &lt;code&gt;src/main/resources&lt;/code&gt; as base location.   ","title":"FlyWayDB - Unable to resolve location classpath","body":"<p>'classpath' means really classpath and you can not extend your classpath with a path.</p>\n\n<p>When I see your classpath declaration than I think your migration will be packaged in a jar with the path '<code>com/some1/some2/some3/database/migration</code>'</p>\n\n<p>=> so your classpath configuration must be look like: </p>\n\n<pre>classpath:com/some1/some2/some3/database/migration</pre>\n\n<p>If you use SQL file based migration I have better experience with <code>src/main/resources</code> as base location.   </p>\n"},{"tags":[],"owner":{"account_id":14263500,"reputation":1,"user_id":10303464,"display_name":"Sharath Dharmala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535805593,"creation_date":1535801628,"answer_id":52127705,"question_id":44032229,"body_markdown":"Instead of creation complete package for DB migrate scripts, suggested to create a folder at java build path`Project -&gt; Properties -&gt; SourceTab -&gt; AddFolder` it takes the scripts to classpath with the desired folder name and keeps that name into your JavaClass \r\n\r\n*&quot;classpath:foldername&quot;*","title":"FlyWayDB - Unable to resolve location classpath","body":"<p>Instead of creation complete package for DB migrate scripts, suggested to create a folder at java build path<code>Project -&gt; Properties -&gt; SourceTab -&gt; AddFolder</code> it takes the scripts to classpath with the desired folder name and keeps that name into your JavaClass </p>\n\n<p><em>\"classpath:foldername\"</em></p>\n"},{"tags":[],"owner":{"account_id":2454231,"reputation":1496,"user_id":2139804,"accept_rate":70,"display_name":"Tinki"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585559999,"creation_date":1585559999,"answer_id":60927427,"question_id":44032229,"body_markdown":"I struggled with the same problem for a couple of days. What finally helped me was to modify `pom.xml`, so that`&lt;build&gt;` node lists all locations with property files:\r\n\r\n    &lt;project...&gt;\r\n      ...\r\n      &lt;build&gt;\r\n         &lt;resources&gt;\r\n            ...\r\n            &lt;resource&gt;\r\n               &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n               &lt;includes&gt;\r\n                 &lt;include&gt;*.*&lt;/include&gt;\r\n                 &lt;include&gt;sql/migration/*&lt;/include&gt;\r\n               &lt;/includes&gt;\r\n            &lt;/resource&gt;\r\n         &lt;/resources&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;","title":"FlyWayDB - Unable to resolve location classpath","body":"<p>I struggled with the same problem for a couple of days. What finally helped me was to modify <code>pom.xml</code>, so that<code>&lt;build&gt;</code> node lists all locations with property files:</p>\n\n<pre><code>&lt;project...&gt;\n  ...\n  &lt;build&gt;\n     &lt;resources&gt;\n        ...\n        &lt;resource&gt;\n           &lt;directory&gt;src/main/resources&lt;/directory&gt;\n           &lt;includes&gt;\n             &lt;include&gt;*.*&lt;/include&gt;\n             &lt;include&gt;sql/migration/*&lt;/include&gt;\n           &lt;/includes&gt;\n        &lt;/resource&gt;\n     &lt;/resources&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14984953,"reputation":19,"user_id":10817791,"display_name":"sayedali musavi Khoeini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689075592,"creation_date":1689075592,"answer_id":76661600,"question_id":44032229,"body_markdown":"Verify the classpath. In place of **db/migration**, I made **db.migration**","title":"FlyWayDB - Unable to resolve location classpath","body":"<p>Verify the classpath. In place of <strong>db/migration</strong>, I made <strong>db.migration</strong></p>\n"}],"owner":{"account_id":9761986,"reputation":679,"user_id":7236804,"accept_rate":71,"display_name":"newOne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19144,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":4,"score":10,"last_activity_date":1689075592,"creation_date":1495045315,"question_id":44032229,"body_markdown":"i have problem to setting location with the classpath in FLyway, when I use with the filesystem its working properly. \r\n\r\nExample:\r\n\r\nThis working:\r\n`this.setLocations(&quot;filesystem:C:\\\\Projects\\\\ProjectName\\\\src\\\\main\\\\java\\\\com\\\\some1\\\\some2\\\\some3\\\\database\\\\migration&quot;);`\r\n\r\n This NOT working(I try delimiters: &quot;\\\\&quot;, &quot;.&quot;, &quot;/&quot;):       `this.setLocations(&quot;classpath:ProjectName/src/main/java/com/some1/some2/some3/database/migration&quot;);`\r\n\r\nWhen not working, its throwing error: \r\n\r\n&gt; [WARNING] [] [org.flywaydb.core.internal.util.scanner.classpath.ClassPathScanner] [tid: _ThreadID=19 _ThreadName=RunLevelControllerThread-xx] [timeMillis: 1495044249009] [levelValue: 900] [[ Unable to resolve location classpath: ProjectName/src/main/java/com/some1/some2/some3/database/migration]]\r\n\r\nI try some delimiters as above, without key word &quot;classpath&quot;, and always when I want to use classpath its throwing &quot;Unable to resolve location ...&quot;. \r\n\r\nI use flyway ver 4.1.2 and by JavaAPI(https://flywaydb.org/getstarted/firststeps/api)\r\n\r\nedit./\r\nWhen I change location of migrating sql files and name of directory on default for Flyway, and not setting location, its working fine. So, conclusion is that I wrong wrote the classpath, but what i do wrong? \r\n\r\nDefault configuration:\r\n1. main/resources/**db**/**migration** &lt; default folder for sql files to migrate\r\n2. not setting location\r\n\r\nSome suggestion?\r\n","title":"FlyWayDB - Unable to resolve location classpath","body":"<p>i have problem to setting location with the classpath in FLyway, when I use with the filesystem its working properly. </p>\n\n<p>Example:</p>\n\n<p>This working:\n<code>this.setLocations(\"filesystem:C:\\\\Projects\\\\ProjectName\\\\src\\\\main\\\\java\\\\com\\\\some1\\\\some2\\\\some3\\\\database\\\\migration\");</code></p>\n\n<p>This NOT working(I try delimiters: \"\\\", \".\", \"/\"):       <code>this.setLocations(\"classpath:ProjectName/src/main/java/com/some1/some2/some3/database/migration\");</code></p>\n\n<p>When not working, its throwing error: </p>\n\n<blockquote>\n  <p>[WARNING] [] [org.flywaydb.core.internal.util.scanner.classpath.ClassPathScanner] [tid: _ThreadID=19 _ThreadName=RunLevelControllerThread-xx] [timeMillis: 1495044249009] [levelValue: 900] [[ Unable to resolve location classpath: ProjectName/src/main/java/com/some1/some2/some3/database/migration]]</p>\n</blockquote>\n\n<p>I try some delimiters as above, without key word \"classpath\", and always when I want to use classpath its throwing \"Unable to resolve location ...\". </p>\n\n<p>I use flyway ver 4.1.2 and by JavaAPI(<a href=\"https://flywaydb.org/getstarted/firststeps/api\" rel=\"noreferrer\">https://flywaydb.org/getstarted/firststeps/api</a>)</p>\n\n<p>edit./\nWhen I change location of migrating sql files and name of directory on default for Flyway, and not setting location, its working fine. So, conclusion is that I wrong wrote the classpath, but what i do wrong? </p>\n\n<p>Default configuration:\n1. main/resources/<strong>db</strong>/<strong>migration</strong> &lt; default folder for sql files to migrate\n2. not setting location</p>\n\n<p>Some suggestion?</p>\n"},{"tags":["java","email","bcc","greenmail"],"answers":[{"comments":[{"owner":{"account_id":3759576,"reputation":1060,"user_id":3125006,"accept_rate":0,"display_name":"Codev"},"score":0,"creation_date":1581064006,"post_id":46943352,"comment_id":106311911,"body_markdown":"With this method I retrieve the mail as BCC recipient, but the BCC field of the receiver is still null. But maybe it has to be like that? Because the BCC receiver is so secret?","body":"With this method I retrieve the mail as BCC recipient, but the BCC field of the receiver is still null. But maybe it has to be like that? Because the BCC receiver is so secret?"}],"tags":[],"owner":{"account_id":2111849,"reputation":1037,"user_id":1876980,"accept_rate":86,"display_name":"Stephen M -on strike-"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1508972755,"creation_date":1508972755,"answer_id":46943352,"question_id":46940674,"body_markdown":"I found the answer on this blog:\r\n\r\nhttps://developer.vz.net/2011/11/08/unit-testing-java-mail-code/\r\n\r\nThe short version is to use a user and get the message from his inbox instead of getting the message from the server as a whole.  Then you know it came to that email address.\r\n\r\n    GreenMailUser user = mailServer.setUser(&quot;junk@somewhere.com&quot;, &quot;&quot;);\r\n    MailFolder inbox = mailServer.getManagers().getImapHostManager().getInbox(user);\r\n    for(StoredMessage message : inbox.getMessages()) {\r\n       // Verify the messages\r\n    }","title":"GreenMail not returning BCC recipient addresses","body":"<p>I found the answer on this blog:</p>\n\n<p><a href=\"https://developer.vz.net/2011/11/08/unit-testing-java-mail-code/\" rel=\"nofollow noreferrer\">https://developer.vz.net/2011/11/08/unit-testing-java-mail-code/</a></p>\n\n<p>The short version is to use a user and get the message from his inbox instead of getting the message from the server as a whole.  Then you know it came to that email address.</p>\n\n<pre><code>GreenMailUser user = mailServer.setUser(\"junk@somewhere.com\", \"\");\nMailFolder inbox = mailServer.getManagers().getImapHostManager().getInbox(user);\nfor(StoredMessage message : inbox.getMessages()) {\n   // Verify the messages\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1780708,"reputation":1054,"user_id":1623538,"accept_rate":50,"display_name":"Nos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689075463,"creation_date":1689075463,"answer_id":76661583,"question_id":46940674,"body_markdown":"Because Greenmail won&#39;t tell us who got Bcc&#39;d, we have to determine it ourselves by the process of elimination.\r\n   \r\nFor the given email\r\n\r\n - Find out the email addresses that have received the email (based on\r\n   message id).\r\n- Remove the toRecipients from this list.\r\n- Remove the ccRecipients from this list.\r\n\r\n```\r\nimport com.icegreen.greenmail.spring.GreenMailBean;\r\nimport com.icegreen.greenmail.store.FolderException;\r\nimport com.icegreen.greenmail.store.MailFolder;\r\nimport com.icegreen.greenmail.store.StoredMessage;\r\nimport com.icegreen.greenmail.user.GreenMailUser;\r\nimport jakarta.mail.BodyPart;\r\nimport jakarta.mail.MessagingException;\r\nimport jakarta.mail.internet.MimeMessage;\r\nimport jakarta.mail.internet.MimeMultipart;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Optional;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class MailExtractor {\r\n\r\n  private final GreenMailBean greenMailBean;\r\n\r\n  public MailExtractor(GreenMailBean greenMailBean) {\r\n    this.greenMailBean = greenMailBean;\r\n  }\r\n\r\n  public Email getEmailForFirstSentMessage() {\r\n    MimeMessage mimeMessage = greenMailBean.getReceivedMessages()[0];\r\n    Email email = MailExtractor.extractEmail(mimeMessage, getUserMailFolderList());\r\n    System.out.printf(&quot;From %s%n&quot;, email.from());\r\n    System.out.printf(&quot;To %s%n&quot;, email.toRecipients());\r\n    System.out.printf(&quot;Cc %s%n&quot;, email.ccRecipients());\r\n    System.out.printf(&quot;Bcc %s%n&quot;, email.bccRecipients());\r\n    System.out.printf(&quot;Body %s%n&quot;, email.body());\r\n    System.out.printf(&quot;Message ID %s%n&quot;, email.messageId());\r\n    return email;\r\n  }\r\n\r\n  private Map&lt;GreenMailUser, MailFolder&gt; getUserMailFolderList() {\r\n    Collection&lt;GreenMailUser&gt; greenMailUsers = greenMailBean.getGreenMail().getUserManager().listUser();\r\n    Map&lt;GreenMailUser, MailFolder&gt; userMailFolder = new HashMap&lt;&gt;();\r\n    for (GreenMailUser greenMailUser : greenMailUsers) {\r\n      try {\r\n        userMailFolder.put(greenMailUser, greenMailBean.getGreenMail().getManagers().getImapHostManager().getInbox(greenMailUser));\r\n      } catch (FolderException e) {\r\n        throw new RuntimeException(e);\r\n      }\r\n    }\r\n    return userMailFolder;\r\n  }\r\n\r\n  private static Email extractEmail(MimeMessage mimeMessage, Map&lt;GreenMailUser, MailFolder&gt; userMailFolderList) {\r\n    return new Email(extractFrom(mimeMessage),\r\n                     extractTo(mimeMessage),\r\n                     extractCc(mimeMessage),\r\n                     extractBcc(mimeMessage, userMailFolderList),\r\n                     extractSubject(mimeMessage),\r\n                     extractBody(mimeMessage),\r\n                     extractMessageId(mimeMessage));\r\n  }\r\n\r\n  private static String extractFrom(MimeMessage mimeMessage) {\r\n    return getValueForField(mimeMessage, &quot;From&quot;);\r\n  }\r\n\r\n  private static List&lt;String&gt; extractTo(MimeMessage mimeMessage) {\r\n    return getValuesForField(mimeMessage, &quot;To&quot;);\r\n  }\r\n\r\n  private static List&lt;String&gt; extractCc(MimeMessage mimeMessage) {\r\n    return getValuesForField(mimeMessage, &quot;Cc&quot;);\r\n  }\r\n\r\n  /* Because Greenmail won&#39;t tell us who got Bcc&#39;d, we have to determine it ourselves by the process of elimination.\r\n   *\r\n   * For the given email\r\n   * -&gt; Find out the email addresses that have received the email (based on message id)\r\n   * -&gt; Remove the toRecipients from this list\r\n   * -&gt; Remove the ccRecipients from this list\r\n   */\r\n  private static List&lt;String&gt; extractBcc(MimeMessage mimeMessage, Map&lt;GreenMailUser, MailFolder&gt; userMailFolder) {\r\n    List&lt;String&gt; bccList = new ArrayList&lt;&gt;();\r\n    for (Entry&lt;GreenMailUser, MailFolder&gt; mailFolder : userMailFolder.entrySet()) {\r\n      mailFolder.getValue().getMessages().stream()\r\n                .filter(storedMessage -&gt; messageIdsMatch(storedMessage, extractMessageId(mimeMessage)))\r\n                .findFirst()\r\n                .map(it -&gt; bccList.add(mailFolder.getKey().getEmail()));\r\n    }\r\n\r\n    bccList.removeAll(extractTo(mimeMessage));\r\n    bccList.removeAll(extractCc(mimeMessage));\r\n    return bccList;\r\n  }\r\n\r\n  private static boolean messageIdsMatch(StoredMessage storedMessage, String messageId) {\r\n    try {\r\n      return storedMessage.getMimeMessage().getMessageID().equals(messageId);\r\n    } catch (MessagingException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  private static String extractSubject(MimeMessage mimeMessage) {\r\n    return getValueForField(mimeMessage, &quot;Subject&quot;);\r\n  }\r\n\r\n  private static String extractMessageId(MimeMessage mimeMessage) {\r\n    return getValueForField(mimeMessage, &quot;Message-ID&quot;);\r\n  }\r\n\r\n  private static String extractBody(MimeMessage mimeMessage) {\r\n    try {\r\n      if (mimeMessage.getContent() instanceof MimeMultipart mimeMultipart) {\r\n        return findHtmlBody(mimeMultipart).orElseThrow(() -&gt; new IllegalStateException(&quot;Could not find html-body&quot;));\r\n      }\r\n      throw new IllegalArgumentException(&quot;Unexpected e-mail content of type &quot; + mimeMessage.getContent().getClass());\r\n    } catch (IOException | MessagingException e) {\r\n      throw new IllegalArgumentException(e);\r\n    }\r\n  }\r\n\r\n  private static Optional&lt;String&gt; findHtmlBody(MimeMultipart multipart) {\r\n    try {\r\n      for (int i = 0; i &lt; multipart.getCount(); i++) {\r\n        BodyPart bodyPart = multipart.getBodyPart(i);\r\n        if (&quot;text/html;charset=UTF-8&quot;.equals(bodyPart.getContentType())) {\r\n          return Optional.of(((String) bodyPart.getContent()).replace(&quot;\\r&quot;, &quot;&quot;));\r\n        }\r\n        if (bodyPart.getContent() instanceof MimeMultipart subMultipart) {\r\n          return findHtmlBody(subMultipart);\r\n        }\r\n      }\r\n    } catch (MessagingException | IOException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n    return Optional.empty();\r\n  }\r\n\r\n  private static List&lt;String&gt; getValuesForField(MimeMessage mimeMessage, String headerName) {\r\n    String value = getValueForField(mimeMessage, headerName);\r\n    return value != null ? Arrays.stream(value.split(&quot;, &quot;)).toList() : List.of();\r\n  }\r\n\r\n  private static String getValueForField(MimeMessage mimeMessage, String headerName) {\r\n    try {\r\n      return Optional.ofNullable(mimeMessage.getHeader(headerName)).map(content -&gt; content[0]).orElse(null);\r\n    } catch (MessagingException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  private record Email(String from,\r\n                       Collection&lt;String&gt; toRecipients,\r\n                       Collection&lt;String&gt; ccRecipients,\r\n                       Collection&lt;String&gt; bccRecipients,\r\n                       String subject,\r\n                       String body,\r\n                       String messageId\r\n  ) {}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n","title":"GreenMail not returning BCC recipient addresses","body":"<p>Because Greenmail won't tell us who got Bcc'd, we have to determine it ourselves by the process of elimination.</p>\n<p>For the given email</p>\n<ul>\n<li>Find out the email addresses that have received the email (based on\nmessage id).</li>\n<li>Remove the toRecipients from this list.</li>\n<li>Remove the ccRecipients from this list.</li>\n</ul>\n<pre><code>import com.icegreen.greenmail.spring.GreenMailBean;\nimport com.icegreen.greenmail.store.FolderException;\nimport com.icegreen.greenmail.store.MailFolder;\nimport com.icegreen.greenmail.store.StoredMessage;\nimport com.icegreen.greenmail.user.GreenMailUser;\nimport jakarta.mail.BodyPart;\nimport jakarta.mail.MessagingException;\nimport jakarta.mail.internet.MimeMessage;\nimport jakarta.mail.internet.MimeMultipart;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Optional;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class MailExtractor {\n\n  private final GreenMailBean greenMailBean;\n\n  public MailExtractor(GreenMailBean greenMailBean) {\n    this.greenMailBean = greenMailBean;\n  }\n\n  public Email getEmailForFirstSentMessage() {\n    MimeMessage mimeMessage = greenMailBean.getReceivedMessages()[0];\n    Email email = MailExtractor.extractEmail(mimeMessage, getUserMailFolderList());\n    System.out.printf(&quot;From %s%n&quot;, email.from());\n    System.out.printf(&quot;To %s%n&quot;, email.toRecipients());\n    System.out.printf(&quot;Cc %s%n&quot;, email.ccRecipients());\n    System.out.printf(&quot;Bcc %s%n&quot;, email.bccRecipients());\n    System.out.printf(&quot;Body %s%n&quot;, email.body());\n    System.out.printf(&quot;Message ID %s%n&quot;, email.messageId());\n    return email;\n  }\n\n  private Map&lt;GreenMailUser, MailFolder&gt; getUserMailFolderList() {\n    Collection&lt;GreenMailUser&gt; greenMailUsers = greenMailBean.getGreenMail().getUserManager().listUser();\n    Map&lt;GreenMailUser, MailFolder&gt; userMailFolder = new HashMap&lt;&gt;();\n    for (GreenMailUser greenMailUser : greenMailUsers) {\n      try {\n        userMailFolder.put(greenMailUser, greenMailBean.getGreenMail().getManagers().getImapHostManager().getInbox(greenMailUser));\n      } catch (FolderException e) {\n        throw new RuntimeException(e);\n      }\n    }\n    return userMailFolder;\n  }\n\n  private static Email extractEmail(MimeMessage mimeMessage, Map&lt;GreenMailUser, MailFolder&gt; userMailFolderList) {\n    return new Email(extractFrom(mimeMessage),\n                     extractTo(mimeMessage),\n                     extractCc(mimeMessage),\n                     extractBcc(mimeMessage, userMailFolderList),\n                     extractSubject(mimeMessage),\n                     extractBody(mimeMessage),\n                     extractMessageId(mimeMessage));\n  }\n\n  private static String extractFrom(MimeMessage mimeMessage) {\n    return getValueForField(mimeMessage, &quot;From&quot;);\n  }\n\n  private static List&lt;String&gt; extractTo(MimeMessage mimeMessage) {\n    return getValuesForField(mimeMessage, &quot;To&quot;);\n  }\n\n  private static List&lt;String&gt; extractCc(MimeMessage mimeMessage) {\n    return getValuesForField(mimeMessage, &quot;Cc&quot;);\n  }\n\n  /* Because Greenmail won't tell us who got Bcc'd, we have to determine it ourselves by the process of elimination.\n   *\n   * For the given email\n   * -&gt; Find out the email addresses that have received the email (based on message id)\n   * -&gt; Remove the toRecipients from this list\n   * -&gt; Remove the ccRecipients from this list\n   */\n  private static List&lt;String&gt; extractBcc(MimeMessage mimeMessage, Map&lt;GreenMailUser, MailFolder&gt; userMailFolder) {\n    List&lt;String&gt; bccList = new ArrayList&lt;&gt;();\n    for (Entry&lt;GreenMailUser, MailFolder&gt; mailFolder : userMailFolder.entrySet()) {\n      mailFolder.getValue().getMessages().stream()\n                .filter(storedMessage -&gt; messageIdsMatch(storedMessage, extractMessageId(mimeMessage)))\n                .findFirst()\n                .map(it -&gt; bccList.add(mailFolder.getKey().getEmail()));\n    }\n\n    bccList.removeAll(extractTo(mimeMessage));\n    bccList.removeAll(extractCc(mimeMessage));\n    return bccList;\n  }\n\n  private static boolean messageIdsMatch(StoredMessage storedMessage, String messageId) {\n    try {\n      return storedMessage.getMimeMessage().getMessageID().equals(messageId);\n    } catch (MessagingException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  private static String extractSubject(MimeMessage mimeMessage) {\n    return getValueForField(mimeMessage, &quot;Subject&quot;);\n  }\n\n  private static String extractMessageId(MimeMessage mimeMessage) {\n    return getValueForField(mimeMessage, &quot;Message-ID&quot;);\n  }\n\n  private static String extractBody(MimeMessage mimeMessage) {\n    try {\n      if (mimeMessage.getContent() instanceof MimeMultipart mimeMultipart) {\n        return findHtmlBody(mimeMultipart).orElseThrow(() -&gt; new IllegalStateException(&quot;Could not find html-body&quot;));\n      }\n      throw new IllegalArgumentException(&quot;Unexpected e-mail content of type &quot; + mimeMessage.getContent().getClass());\n    } catch (IOException | MessagingException e) {\n      throw new IllegalArgumentException(e);\n    }\n  }\n\n  private static Optional&lt;String&gt; findHtmlBody(MimeMultipart multipart) {\n    try {\n      for (int i = 0; i &lt; multipart.getCount(); i++) {\n        BodyPart bodyPart = multipart.getBodyPart(i);\n        if (&quot;text/html;charset=UTF-8&quot;.equals(bodyPart.getContentType())) {\n          return Optional.of(((String) bodyPart.getContent()).replace(&quot;\\r&quot;, &quot;&quot;));\n        }\n        if (bodyPart.getContent() instanceof MimeMultipart subMultipart) {\n          return findHtmlBody(subMultipart);\n        }\n      }\n    } catch (MessagingException | IOException e) {\n      throw new RuntimeException(e);\n    }\n    return Optional.empty();\n  }\n\n  private static List&lt;String&gt; getValuesForField(MimeMessage mimeMessage, String headerName) {\n    String value = getValueForField(mimeMessage, headerName);\n    return value != null ? Arrays.stream(value.split(&quot;, &quot;)).toList() : List.of();\n  }\n\n  private static String getValueForField(MimeMessage mimeMessage, String headerName) {\n    try {\n      return Optional.ofNullable(mimeMessage.getHeader(headerName)).map(content -&gt; content[0]).orElse(null);\n    } catch (MessagingException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  private record Email(String from,\n                       Collection&lt;String&gt; toRecipients,\n                       Collection&lt;String&gt; ccRecipients,\n                       Collection&lt;String&gt; bccRecipients,\n                       String subject,\n                       String body,\n                       String messageId\n  ) {}\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":2111849,"reputation":1037,"user_id":1876980,"accept_rate":86,"display_name":"Stephen M -on strike-"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":956,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":46943352,"answer_count":2,"score":3,"last_activity_date":1689075463,"creation_date":1508959867,"question_id":46940674,"body_markdown":"I&#39;m using GreenMail in a test to verify that our application is sending email correctly.\r\n\r\nI start GreenMail with:\r\n\r\n    GreenMail greenMailServer = new GreenMail(new ServerSetup(port, &quot;localhost&quot;, ServerSetup.PROTOCOL_SMTP));\r\n    greenMailServer.start();\r\n\r\nI have a separate process that sends the email to the GreenMail SMTP server (this is part of an integration test), so my test code waits for the email with:\r\n\r\n    long endTime = System.currentTimeMillis() + timeout;\r\n    // Get the fake mail server and listen for messages\r\n    GreenMail mailServer = ITester.getFakeEMail();\r\n    while(System.currentTimeMillis() &lt; endTime)  {\r\n         boolean timedOut = !mailServer.waitForIncomingEmail(endTime - System.currentTimeMillis(), 1);\r\n         if(timedOut) {\r\n              throw new TestFailure(lineNumber, &quot;Timed out waiting for email To: &#39;&quot;+to+&quot;&#39; Subject: &#39;&quot;+subject+&quot;&#39; Body: &#39;&quot;+body+&quot;&#39; .&quot;);\r\n         }\r\n         for(MimeMessage message : mailServer.getReceivedMessages()) {\r\n              try {\r\n                  StringBuilder errors = new StringBuilder();\r\n                  // Check who the message is going to\r\n                  //Address[] allRecipients = message.getRecipients(Message.RecipientType.BCC);\r\n                  Address[] allRecipients = message.getAllRecipients();\r\n\r\nI&#39;ve tried both the commented out request for Recipients and the getAllRecipients, but I always receive null.  I&#39;ve verified that my application is sending the email to one address in the BCC field.\r\n\r\nAny idea why I&#39;m not seeing the recipient email address?","title":"GreenMail not returning BCC recipient addresses","body":"<p>I'm using GreenMail in a test to verify that our application is sending email correctly.</p>\n\n<p>I start GreenMail with:</p>\n\n<pre><code>GreenMail greenMailServer = new GreenMail(new ServerSetup(port, \"localhost\", ServerSetup.PROTOCOL_SMTP));\ngreenMailServer.start();\n</code></pre>\n\n<p>I have a separate process that sends the email to the GreenMail SMTP server (this is part of an integration test), so my test code waits for the email with:</p>\n\n<pre><code>long endTime = System.currentTimeMillis() + timeout;\n// Get the fake mail server and listen for messages\nGreenMail mailServer = ITester.getFakeEMail();\nwhile(System.currentTimeMillis() &lt; endTime)  {\n     boolean timedOut = !mailServer.waitForIncomingEmail(endTime - System.currentTimeMillis(), 1);\n     if(timedOut) {\n          throw new TestFailure(lineNumber, \"Timed out waiting for email To: '\"+to+\"' Subject: '\"+subject+\"' Body: '\"+body+\"' .\");\n     }\n     for(MimeMessage message : mailServer.getReceivedMessages()) {\n          try {\n              StringBuilder errors = new StringBuilder();\n              // Check who the message is going to\n              //Address[] allRecipients = message.getRecipients(Message.RecipientType.BCC);\n              Address[] allRecipients = message.getAllRecipients();\n</code></pre>\n\n<p>I've tried both the commented out request for Recipients and the getAllRecipients, but I always receive null.  I've verified that my application is sending the email to one address in the BCC field.</p>\n\n<p>Any idea why I'm not seeing the recipient email address?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1689147006,"post_id":76661537,"comment_id":135170235,"body_markdown":"https://discourse.hibernate.org/t/query-parser-removes-whitespaces-from-hql-after-upgrade-to-6-1-x/7080 - I guess it is an issue with `ip.isSystemDefault is true`. You can try to use `ip.isSystemDefault = 1`","body":"<a href=\"https://discourse.hibernate.org/t/query-parser-removes-whitespaces-from-hql-after-upgrade-to-6-1-x/7080\" rel=\"nofollow noreferrer\">discourse.hibernate.org/t/&hellip;</a> - I guess it is an issue with <code>ip.isSystemDefault is true</code>. You can try to use <code>ip.isSystemDefault = 1</code>"},{"owner":{"account_id":18231990,"reputation":117,"user_id":13270751,"display_name":"Ali Azlan"},"score":0,"creation_date":1689147636,"post_id":76661537,"comment_id":135170345,"body_markdown":"@XtremeBaumer the linked article says that earlier versions of hibernate allowed using of &quot;true&quot; as parameter so &quot;:true&quot;(param) won&#39;t work now because it might be reserved and new param names should be used, I have already read that article and tried using your proposed solution too, plus tried changing  my param names too, but nothing worked.","body":"@XtremeBaumer the linked article says that earlier versions of hibernate allowed using of &quot;true&quot; as parameter so &quot;:true&quot;(param) won&#39;t work now because it might be reserved and new param names should be used, I have already read that article and tried using your proposed solution too, plus tried changing  my param names too, but nothing worked."}],"owner":{"account_id":18231990,"reputation":117,"user_id":13270751,"display_name":"Ali Azlan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":945,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689075123,"creation_date":1689075123,"question_id":76661537,"body_markdown":"Below is my custom defined JPA query, it was working fine on Hibernate 5.x but I have to upgrade Spring and it&#39;s related packages to LTS, so after migrating to Hibernate 6.x the below query is throwing the error of &quot;No viable alternative at input&quot;. \r\n\r\nThe query being parsed with no whitespaces so the final query becomes &quot;selectipfromInsurancePlanipleftouterjoinFacilityLocationflonip.facilityLocation.id=fl.idwhereip.name=:fesdfesand(fl.id=:safasf3r1orip.isSystemDefaultistrue&quot; which is erroneous, look at the detailed error at the end.\r\n\r\n\r\n    @Query(&quot;select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id &quot; +\r\n            &quot;where ip.name = :name and (fl.id = :facilityLocationId or ip.isSystemDefault is true)&quot;)\r\n    Optional&lt;InsurancePlan&gt; doesInsurancePlanWithNameExistInDefaultOrCustomPlans(@Param(value = &quot;name&quot;) String name,\r\n                                                                                 @Param(value = &quot;facilityLocationId&quot;) Integer facilityLocationId);\r\n\r\n    \r\nError Details:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: A query exception occurred [select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id where ip.name = :fesdfes and (fl.id = :safasf3r1 or ip.isSystemDefault is true)]\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\r\n    \tat jdk.proxy2/jdk.proxy2.$Proxy159.createQuery(Unknown Source)\r\n    \tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94)\r\n    \t... 62 common frames omitted\r\n    Caused by: org.hibernate.query.SemanticException: A query exception occurred [select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id where ip.name = :fesdfes and (fl.id = :safasf3r1 or ip.isSystemDefault is true)]\r\n    \tat org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:130)\r\n    \tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\r\n    \tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\r\n    \tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786)\r\n    \t... 71 common frames omitted\r\n    Caused by: org.hibernate.query.sqm.ParsingException: line 1:174 no viable alternative at input &#39;selectipfromInsurancePlanipleftouterjoinFacilityLocationflonip.facilityLocation.id=fl.idwhereip.name=:fesdfesand(fl.id=:safasf3r1orip.isSystemDefaultistrue&#39;\r\n    \tat org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46)","title":"&quot;No viable alternative at input&quot; on custom JPQL queries error after migrating from Hibernate JPA 2.2.4 to 3.1.1","body":"<p>Below is my custom defined JPA query, it was working fine on Hibernate 5.x but I have to upgrade Spring and it's related packages to LTS, so after migrating to Hibernate 6.x the below query is throwing the error of &quot;No viable alternative at input&quot;.</p>\n<p>The query being parsed with no whitespaces so the final query becomes &quot;selectipfromInsurancePlanipleftouterjoinFacilityLocationflonip.facilityLocation.id=fl.idwhereip.name=:fesdfesand(fl.id=:safasf3r1orip.isSystemDefaultistrue&quot; which is erroneous, look at the detailed error at the end.</p>\n<pre><code>@Query(&quot;select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id &quot; +\n        &quot;where ip.name = :name and (fl.id = :facilityLocationId or ip.isSystemDefault is true)&quot;)\nOptional&lt;InsurancePlan&gt; doesInsurancePlanWithNameExistInDefaultOrCustomPlans(@Param(value = &quot;name&quot;) String name,\n                                                                             @Param(value = &quot;facilityLocationId&quot;) Integer facilityLocationId);\n</code></pre>\n<p>Error Details:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: A query exception occurred [select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id where ip.name = :fesdfes and (fl.id = :safasf3r1 or ip.isSystemDefault is true)]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\n    at jdk.proxy2/jdk.proxy2.$Proxy159.createQuery(Unknown Source)\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94)\n    ... 62 common frames omitted\nCaused by: org.hibernate.query.SemanticException: A query exception occurred [select ip from InsurancePlan ip left outer join FacilityLocation fl on ip.facilityLocation.id=fl.id where ip.name = :fesdfes and (fl.id = :safasf3r1 or ip.isSystemDefault is true)]\n    at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:130)\n    at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:77)\n    at org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\n    at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786)\n    ... 71 common frames omitted\nCaused by: org.hibernate.query.sqm.ParsingException: line 1:174 no viable alternative at input 'selectipfromInsurancePlanipleftouterjoinFacilityLocationflonip.facilityLocation.id=fl.idwhereip.name=:fesdfesand(fl.id=:safasf3r1orip.isSystemDefaultistrue'\n    at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:46)\n</code></pre>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":22282426,"reputation":1,"user_id":16510633,"display_name":"NoName0x22"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688479978,"creation_date":1688294151,"answer_id":76598481,"question_id":76598058,"body_markdown":"You don&#39;t want to use extra properties from JSON. The best option for that is to create DTO object only with properties that you want to use called for example `FilmDTO` with `@JsonIgnoreProperties(ignoreUnknown=true)` class annotation.\r\n\r\nI would also recommend not to put all the logic inside of Controller Class, try to create for example `FilmService` which will encapsulate whole business logic inside:\r\n\r\n\r\nController: \r\n```\r\n@RestController\r\npublic class FilmController {\r\n\r\n    private final FilmService filmService;\r\n\r\n    public FilmController(FilmService filmService) {\r\n        this.filmService = filmService;\r\n    }\r\n\r\n    @PutMapping(&quot;/films&quot;)\r\n    public Film create(@RequestBody @Validated FilmDTO filmDTO ){\r\n        return filmService.addFilm(filmDTO);\r\n    }\r\n}\r\n```\r\nFilm\r\n```\r\npublic class Film {\r\n    private final Integer id;\r\n    private final String name;\r\n    private final String description;\r\n    private final LocalDate releaseDate;\r\n    private final int duration;\r\n\r\n    public Film(Integer id, String name, String description, LocalDate releaseDate, int duration) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.releaseDate = releaseDate;\r\n        this.duration = duration;\r\n    }\r\n\r\n    public static Film fromDto(FilmDTO filmDto) {\r\n        return new Film(filmDto.getId(), filmDto.getName(), filmDto.getDescription(), filmDto.getReleaseDate(), filmDto.getDuration());\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public LocalDate getReleaseDate() {\r\n        return releaseDate;\r\n    }\r\n\r\n    public int getDuration() {\r\n        return duration;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n        Film film = (Film) o;\r\n        return duration == film.duration &amp;&amp; Objects.equals(id, film.id) &amp;&amp; Objects.equals(name, film.name) &amp;&amp; Objects.equals(description, film.description) &amp;&amp; Objects.equals(releaseDate, film.releaseDate);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(id, name, description, releaseDate, duration);\r\n    }\r\n}\r\n\r\n```\r\nFilmDto\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class FilmDTO {\r\n    private final Integer id;\r\n    @NotEmpty\r\n    private final String name;\r\n    @Size(max = 200)\r\n    private final String description;\r\n    private final LocalDate releaseDate;\r\n    @Min(value = 1)\r\n    private final int duration;\r\n\r\n    public FilmDTO(Integer id, String name, String description, LocalDate releaseDate, int duration) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.releaseDate = releaseDate;\r\n        this.duration = duration;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public LocalDate getReleaseDate() {\r\n        return releaseDate;\r\n    }\r\n\r\n    public int getDuration() {\r\n        return duration;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n        FilmDTO filmDTO = (FilmDTO) o;\r\n        return duration == filmDTO.duration &amp;&amp; Objects.equals(id, filmDTO.id) &amp;&amp; Objects.equals(name, filmDTO.name) &amp;&amp; Objects.equals(description, filmDTO.description) &amp;&amp; Objects.equals(releaseDate, filmDTO.releaseDate);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(id, name, description, releaseDate, duration);\r\n    }\r\n}\r\n```\r\nFilmService\r\n``` \r\n@Service\r\npublic class FilmService {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(FilmService.class);\r\n    // Change that hashmap with some sort of repository.\r\n    private final Map&lt;Integer, Film&gt; films = new HashMap&lt;&gt;();\r\n\r\n    public Film addFilm(FilmDTO filmDTO) {\r\n        if (filmDTO.getReleaseDate().isBefore(FILM_DATE)) {\r\n            logger.error(&quot;Validation exception&quot;);\r\n            throw new ValidationException(&quot;Incorrect data&quot;);\r\n        }\r\n        Film addedFilm = Film.fromDto(filmDTO);\r\n        logger.info(&quot;&#39;{}&#39; movie was added to a library, the identifier is &#39;{}&#39;&quot;, addedFilm.getName(), addedFilm.getId());\r\n        films.put(addedFilm.getId(), addedFilm);\r\n        return addedFilm;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Checking PUT request from server for extra fields as JSON","body":"<p>You don't want to use extra properties from JSON. The best option for that is to create DTO object only with properties that you want to use called for example <code>FilmDTO</code> with <code>@JsonIgnoreProperties(ignoreUnknown=true)</code> class annotation.</p>\n<p>I would also recommend not to put all the logic inside of Controller Class, try to create for example <code>FilmService</code> which will encapsulate whole business logic inside:</p>\n<p>Controller:</p>\n<pre><code>@RestController\npublic class FilmController {\n\n    private final FilmService filmService;\n\n    public FilmController(FilmService filmService) {\n        this.filmService = filmService;\n    }\n\n    @PutMapping(&quot;/films&quot;)\n    public Film create(@RequestBody @Validated FilmDTO filmDTO ){\n        return filmService.addFilm(filmDTO);\n    }\n}\n</code></pre>\n<p>Film</p>\n<pre><code>public class Film {\n    private final Integer id;\n    private final String name;\n    private final String description;\n    private final LocalDate releaseDate;\n    private final int duration;\n\n    public Film(Integer id, String name, String description, LocalDate releaseDate, int duration) {\n        this.id = id;\n        this.name = name;\n        this.description = description;\n        this.releaseDate = releaseDate;\n        this.duration = duration;\n    }\n\n    public static Film fromDto(FilmDTO filmDto) {\n        return new Film(filmDto.getId(), filmDto.getName(), filmDto.getDescription(), filmDto.getReleaseDate(), filmDto.getDuration());\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public LocalDate getReleaseDate() {\n        return releaseDate;\n    }\n\n    public int getDuration() {\n        return duration;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Film film = (Film) o;\n        return duration == film.duration &amp;&amp; Objects.equals(id, film.id) &amp;&amp; Objects.equals(name, film.name) &amp;&amp; Objects.equals(description, film.description) &amp;&amp; Objects.equals(releaseDate, film.releaseDate);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, name, description, releaseDate, duration);\n    }\n}\n\n</code></pre>\n<p>FilmDto</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class FilmDTO {\n    private final Integer id;\n    @NotEmpty\n    private final String name;\n    @Size(max = 200)\n    private final String description;\n    private final LocalDate releaseDate;\n    @Min(value = 1)\n    private final int duration;\n\n    public FilmDTO(Integer id, String name, String description, LocalDate releaseDate, int duration) {\n        this.id = id;\n        this.name = name;\n        this.description = description;\n        this.releaseDate = releaseDate;\n        this.duration = duration;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public LocalDate getReleaseDate() {\n        return releaseDate;\n    }\n\n    public int getDuration() {\n        return duration;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        FilmDTO filmDTO = (FilmDTO) o;\n        return duration == filmDTO.duration &amp;&amp; Objects.equals(id, filmDTO.id) &amp;&amp; Objects.equals(name, filmDTO.name) &amp;&amp; Objects.equals(description, filmDTO.description) &amp;&amp; Objects.equals(releaseDate, filmDTO.releaseDate);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, name, description, releaseDate, duration);\n    }\n}\n</code></pre>\n<p>FilmService</p>\n<pre><code>@Service\npublic class FilmService {\n\n    private static final Logger logger = LoggerFactory.getLogger(FilmService.class);\n    // Change that hashmap with some sort of repository.\n    private final Map&lt;Integer, Film&gt; films = new HashMap&lt;&gt;();\n\n    public Film addFilm(FilmDTO filmDTO) {\n        if (filmDTO.getReleaseDate().isBefore(FILM_DATE)) {\n            logger.error(&quot;Validation exception&quot;);\n            throw new ValidationException(&quot;Incorrect data&quot;);\n        }\n        Film addedFilm = Film.fromDto(filmDTO);\n        logger.info(&quot;'{}' movie was added to a library, the identifier is '{}'&quot;, addedFilm.getName(), addedFilm.getId());\n        films.put(addedFilm.getId(), addedFilm);\n        return addedFilm;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16027245,"reputation":41,"user_id":11567183,"display_name":"Chiamaka Etchie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688296965,"creation_date":1688296900,"answer_id":76598637,"question_id":76598058,"body_markdown":"This will throw an exception that you can gracefully handle. However, you might want to move the processFilm method to a service class.\r\n\r\n\r\n  \r\n    @RestController\r\n    @Slf4j\r\n    @RequestMapping()\r\n    public class EmployeeController {\r\n        private static final LocalDate FILM_DATE = LocalDate.now();\r\n    \r\n        private ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @PostMapping(value = &quot;/films&quot;)\r\n        public Film create(@RequestBody String requestBody) {\r\n            Map&lt;Integer, Film&gt; films = new HashMap&lt;&gt;();\r\n    \r\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\r\n            objectMapper.registerModule(new JavaTimeModule());\r\n    \r\n            Film film;\r\n            try {\r\n               film = objectMapper.readValue(requestBody, Film.class);\r\n                processFilm(films, film);\r\n                return film;\r\n            } catch (JsonMappingException e) {\r\n                throw new ResponseStatusException(\r\n                        HttpStatus.BAD_REQUEST, &quot;Invalid request body&quot;, e);\r\n            } catch (JsonProcessingException e) {\r\n                throw new ResponseStatusException(\r\n                        HttpStatus.INTERNAL_SERVER_ERROR, &quot;Unable to convert request body&quot;, e);\r\n            }\r\n        }\r\n    \r\n        private static void processFilm(Map&lt;Integer, Film&gt; films, Film film) {\r\n            if (film.getDuration() &lt;= 0\r\n                    || film.getReleaseDate().isAfter(FILM_DATE)\r\n                    || film.getDescription().length() &gt; 200 || film.getName().isEmpty()) {\r\n                throw new RuntimeException(&quot;Incorrect data&quot;);\r\n            } else {\r\n                if (film.getId() == 0) {\r\n                    film.setId(1);\r\n                }\r\n                log.info(&quot;&#39;{}&#39; movie was added to a library, the identifier is &#39;{}&#39;&quot;, film.getName(), film.getId());\r\n                films.put(film.getId(), film);\r\n            }\r\n        }\r\n    \r\n    \r\n    }","title":"Checking PUT request from server for extra fields as JSON","body":"<p>This will throw an exception that you can gracefully handle. However, you might want to move the processFilm method to a service class.</p>\n<pre><code>@RestController\n@Slf4j\n@RequestMapping()\npublic class EmployeeController {\n    private static final LocalDate FILM_DATE = LocalDate.now();\n\n    private ObjectMapper objectMapper = new ObjectMapper();\n\n    @PostMapping(value = &quot;/films&quot;)\n    public Film create(@RequestBody String requestBody) {\n        Map&lt;Integer, Film&gt; films = new HashMap&lt;&gt;();\n\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\n        objectMapper.registerModule(new JavaTimeModule());\n\n        Film film;\n        try {\n           film = objectMapper.readValue(requestBody, Film.class);\n            processFilm(films, film);\n            return film;\n        } catch (JsonMappingException e) {\n            throw new ResponseStatusException(\n                    HttpStatus.BAD_REQUEST, &quot;Invalid request body&quot;, e);\n        } catch (JsonProcessingException e) {\n            throw new ResponseStatusException(\n                    HttpStatus.INTERNAL_SERVER_ERROR, &quot;Unable to convert request body&quot;, e);\n        }\n    }\n\n    private static void processFilm(Map&lt;Integer, Film&gt; films, Film film) {\n        if (film.getDuration() &lt;= 0\n                || film.getReleaseDate().isAfter(FILM_DATE)\n                || film.getDescription().length() &gt; 200 || film.getName().isEmpty()) {\n            throw new RuntimeException(&quot;Incorrect data&quot;);\n        } else {\n            if (film.getId() == 0) {\n                film.setId(1);\n            }\n            log.info(&quot;'{}' movie was added to a library, the identifier is '{}'&quot;, film.getName(), film.getId());\n            films.put(film.getId(), film);\n        }\n    }\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":27462033,"reputation":27,"user_id":20952449,"display_name":"Chernosmaga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689075001,"creation_date":1688286761,"question_id":76598058,"body_markdown":"I&#39;m trying to send PUT request and I want to check if there&#39;re some extra fields. Is there any chance to check these extra fields, so I can throw an exception?\r\nFor example, I&#39;ve got this JSON file and this one is okay to add\r\n```\r\n    &quot;id&quot;: 9999,\r\n    &quot;name&quot;: &quot;Film Updated&quot;,\r\n    &quot;description&quot;: &quot;New film update decription&quot;,\r\n    &quot;releaseDate&quot;: &quot;1989-04-17&quot;,\r\n    &quot;duration&quot;: 190\r\n```\r\nAs you can see, in the following file, there&#39;s an extra field ```rate```\r\n```\r\n  &quot;id&quot;: 9999,\r\n  &quot;name&quot;: &quot;Film Updated&quot;,\r\n  &quot;releaseDate&quot;: &quot;1989-04-17&quot;,\r\n  &quot;description&quot;: &quot;New film update decription&quot;,\r\n  &quot;duration&quot;: 190,\r\n  &quot;rate&quot;: 4\r\n````\r\nSo I want to check if PUT request contains any extra fields to prevent from putting this information into HashMap. The following method is putting information into HashMap\r\n```\r\n    @PostMapping(value = &quot;/films&quot;)\r\n    public Film create(@Valid @RequestBody Film film) {\r\n        if (film.getDuration() &lt;= 0\r\n                || film.getReleaseDate().isBefore(FILM_DATE)\r\n                || film.getDescription().length() &gt; 200 || film.getName().isEmpty()) {\r\n            throw new ValidationException(&quot;Incorrect data&quot;);\r\n        } else {\r\n            if (film.getId() == 0) {\r\n                film.setId(1);\r\n            }\r\n            log.info(&quot;&#39;{}&#39; movie was added to a library, the identifier is &#39;{}&#39;&quot;, film.getName(), film.getId());\r\n            films.put(film.getId(), film);\r\n        }\r\n        return film;\r\n    }\r\n```\r\nBut I have no idea how to check extra fields. Any ideas?","title":"Checking PUT request from server for extra fields as JSON","body":"<p>I'm trying to send PUT request and I want to check if there're some extra fields. Is there any chance to check these extra fields, so I can throw an exception?\nFor example, I've got this JSON file and this one is okay to add</p>\n<pre><code>    &quot;id&quot;: 9999,\n    &quot;name&quot;: &quot;Film Updated&quot;,\n    &quot;description&quot;: &quot;New film update decription&quot;,\n    &quot;releaseDate&quot;: &quot;1989-04-17&quot;,\n    &quot;duration&quot;: 190\n</code></pre>\n<p>As you can see, in the following file, there's an extra field <code>rate</code></p>\n<pre><code>  &quot;id&quot;: 9999,\n  &quot;name&quot;: &quot;Film Updated&quot;,\n  &quot;releaseDate&quot;: &quot;1989-04-17&quot;,\n  &quot;description&quot;: &quot;New film update decription&quot;,\n  &quot;duration&quot;: 190,\n  &quot;rate&quot;: 4\n</code></pre>\n<p>So I want to check if PUT request contains any extra fields to prevent from putting this information into HashMap. The following method is putting information into HashMap</p>\n<pre><code>    @PostMapping(value = &quot;/films&quot;)\n    public Film create(@Valid @RequestBody Film film) {\n        if (film.getDuration() &lt;= 0\n                || film.getReleaseDate().isBefore(FILM_DATE)\n                || film.getDescription().length() &gt; 200 || film.getName().isEmpty()) {\n            throw new ValidationException(&quot;Incorrect data&quot;);\n        } else {\n            if (film.getId() == 0) {\n                film.setId(1);\n            }\n            log.info(&quot;'{}' movie was added to a library, the identifier is '{}'&quot;, film.getName(), film.getId());\n            films.put(film.getId(), film);\n        }\n        return film;\n    }\n</code></pre>\n<p>But I have no idea how to check extra fields. Any ideas?</p>\n"},{"tags":["java","eclipse","opengl","lwjgl"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1617921233,"post_id":67012665,"comment_id":118452901,"body_markdown":"This is almost always caused by using an incompatible or incorrect version of LWJGL or the LWJGL library is not in your library folder or on the class path. Check which version is compatible with your other libraries or java version. Also see https://stackoverflow.com/questions/16261193/lwjgl-noclassdeffounderror","body":"This is almost always caused by using an incompatible or incorrect version of LWJGL or the LWJGL library is not in your library folder or on the class path. Check which version is compatible with your other libraries or java version. Also see <a href=\"https://stackoverflow.com/questions/16261193/lwjgl-noclassdeffounderror\" title=\"lwjgl noclassdeffounderror\">stackoverflow.com/questions/16261193/lwjgl-noclassdeffounder&zwnj;&#8203;ror</a>"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1617921419,"post_id":67012665,"comment_id":118452938,"body_markdown":"How are you running the application? `NoClassDefFoundError` suggests that you don&#39;t have the right LWJGL jar files included in the classpath when you run the application.","body":"How are you running the application? <code>NoClassDefFoundError</code> suggests that you don&#39;t have the right LWJGL jar files included in the classpath when you run the application."},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1617921468,"post_id":67012665,"comment_id":118452947,"body_markdown":"Note that LWJGL uses both a jar and several dll files etc and they all need to be available and compatible, see here: https://stackoverflow.com/questions/10063530/java-library-path-error","body":"Note that LWJGL uses both a jar and several dll files etc and they all need to be available and compatible, see here: <a href=\"https://stackoverflow.com/questions/10063530/java-library-path-error\" title=\"java library path error\">stackoverflow.com/questions/10063530/java-library-path-error</a>"},{"owner":{"account_id":17982537,"reputation":75,"user_id":13068502,"display_name":"Oni Barolli"},"score":0,"creation_date":1617921822,"post_id":67012665,"comment_id":118453029,"body_markdown":"@Jesper That&#39;s a good point. I&#39;m gonna be honest, I&#39;m really new to Java and I was using VSCode for the last 2 weeks, so this is my first time setting up a project in Eclipse. I added all the jar files to the ModulePath but not to the ClassPath. Can you explain what the difference is? Thanks!","body":"@Jesper That&#39;s a good point. I&#39;m gonna be honest, I&#39;m really new to Java and I was using VSCode for the last 2 weeks, so this is my first time setting up a project in Eclipse. I added all the jar files to the ModulePath but not to the ClassPath. Can you explain what the difference is? Thanks!"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1617921985,"post_id":67012665,"comment_id":118453074,"body_markdown":"I don know because I have not used Eclipse for 10 years... The module path is probably for Java&#39;s module system, which is not used by many applications, so you should probably add the jar files to the classpath.","body":"I don know because I have not used Eclipse for 10 years... The module path is probably for Java&#39;s module system, which is not used by many applications, so you should probably add the jar files to the classpath."},{"owner":{"account_id":15091436,"reputation":427,"user_id":10891226,"display_name":"RIVERMAN2010"},"score":0,"creation_date":1617926735,"post_id":67012665,"comment_id":118454027,"body_markdown":"did you link the files to module path or class path? they need to be linked through classpath, also you said you linked the natives, are they addded to build path? or are they added as natives to the JAR files.         this looks just like thinmatrix&#39;s tutorials, I have a modern LWJGL 3 version of this class if you want it, works fine with the rest of the series as far as I can tell.","body":"did you link the files to module path or class path? they need to be linked through classpath, also you said you linked the natives, are they addded to build path? or are they added as natives to the JAR files.         this looks just like thinmatrix&#39;s tutorials, I have a modern LWJGL 3 version of this class if you want it, works fine with the rest of the series as far as I can tell."},{"owner":{"account_id":17982537,"reputation":75,"user_id":13068502,"display_name":"Oni Barolli"},"score":0,"creation_date":1617930341,"post_id":67012665,"comment_id":118454688,"body_markdown":"@RIVERMAN2010 I&#39;m alright for now, thanks though! You&#39;re also correct; I had added the jar files to the module path instead of the class path. Do you know what the difference is? I&#39;ve been learning Java for the last two weeks and never come across the idea of modules. Are they an Eclipse specific thing? Also, what do you think of thinkmatrix&#39;s tutorial? Is it worth a watch? I just started it and I wanna make sure I&#39;m not wasting my time. I just really want to learn opengl","body":"@RIVERMAN2010 I&#39;m alright for now, thanks though! You&#39;re also correct; I had added the jar files to the module path instead of the class path. Do you know what the difference is? I&#39;ve been learning Java for the last two weeks and never come across the idea of modules. Are they an Eclipse specific thing? Also, what do you think of thinkmatrix&#39;s tutorial? Is it worth a watch? I just started it and I wanna make sure I&#39;m not wasting my time. I just really want to learn opengl"},{"owner":{"account_id":15091436,"reputation":427,"user_id":10891226,"display_name":"RIVERMAN2010"},"score":0,"creation_date":1617970516,"post_id":67012665,"comment_id":118466505,"body_markdown":"@OniBarolli I think that modules were implemented as a way to add dependencies  easier, and with the dependencies being checked at compile time.  ThinkMatrix&#39;s tutorials were the best java OpenGL tutorials I could find, they are great for learning lwjgl, but they can be a little difficult sometimes. I would highly recommend GamesWithGabe&#39;s tutorials as well, they are both great. \nGamesWithGabe&#39;s tutorial -&gt; https://www.youtube.com/watch?v=VyKE7vz65rY&amp;list=PLtrSb4XxIVbp8AKuEAlwNXDxr99e3woGE&amp;ab_channel=GamesWithGabe","body":"@OniBarolli I think that modules were implemented as a way to add dependencies  easier, and with the dependencies being checked at compile time.  ThinkMatrix&#39;s tutorials were the best java OpenGL tutorials I could find, they are great for learning lwjgl, but they can be a little difficult sometimes. I would highly recommend GamesWithGabe&#39;s tutorials as well, they are both great.  GamesWithGabe&#39;s tutorial -&gt; <a href=\"https://www.youtube.com/watch?v=VyKE7vz65rY&amp;list=PLtrSb4XxIVbp8AKuEAlwNXDxr99e3woGE&amp;ab_channel=GamesWithGabe\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1647016704,"post_id":71432701,"comment_id":126274853,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71432701/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23739547,"reputation":1,"user_id":17757769,"display_name":"Zyfo"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646996220,"creation_date":1646962423,"answer_id":71432701,"question_id":67012665,"body_markdown":"All you have to do is go to the Build Path of your project and change the .jar files from under the Modulepath to be under the Classpath.","title":"LWJGLException not found?","body":"<p>All you have to do is go to the Build Path of your project and change the .jar files from under the Modulepath to be under the Classpath.</p>\n"},{"tags":[],"owner":{"account_id":24647523,"reputation":1,"user_id":18545219,"display_name":"TheTimeSte"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689074887,"creation_date":1689074887,"answer_id":76661507,"question_id":67012665,"body_markdown":"the solution from Zyfo worked for me.\r\n\r\nright click the project -&gt; build path -&gt; configure build path -&gt; import and move your lwjgl jar files under the classpath menu\r\n\r\n[Screenshot of the setup][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WMUe2.png","title":"LWJGLException not found?","body":"<p>the solution from Zyfo worked for me.</p>\n<p>right click the project -&gt; build path -&gt; configure build path -&gt; import and move your lwjgl jar files under the classpath menu</p>\n<p><a href=\"https://i.stack.imgur.com/WMUe2.png\" rel=\"nofollow noreferrer\">Screenshot of the setup</a></p>\n"}],"owner":{"account_id":17982537,"reputation":75,"user_id":13068502,"display_name":"Oni Barolli"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1066,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689074887,"creation_date":1617920743,"question_id":67012665,"body_markdown":"I am using LWJGL version 2.9.1. I set up my Eclipse project with the following referenced libraries: lwjgl_util.jar, lwjgl.jar, and slick-util.jar. I also linked all of the necessary native .dll files for Windows. The file that is causing the error contains the following code:\r\n```\r\npackage render;\r\n\r\nimport org.lwjgl.LWJGLException;\r\nimport org.lwjgl.opengl.ContextAttribs;\r\nimport org.lwjgl.opengl.Display;\r\nimport org.lwjgl.opengl.DisplayMode;\r\nimport org.lwjgl.opengl.GL11;\r\nimport org.lwjgl.opengl.PixelFormat;\r\n\r\npublic class DisplayManager {\r\n\t\r\n\tprivate static final int WIDTH = 1280;\t\r\n\tprivate static final int HEIGHT = 720;\r\n\tprivate static final int FPS_CAP = 120;\r\n\t\r\n\tpublic static void createDisplay() {\r\n\t\t\r\n\t\tContextAttribs attribs = new ContextAttribs(3, 2);\r\n\t\tattribs.withForwardCompatible(true);\r\n\t\tattribs.withProfileCore(true);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tDisplay.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));\r\n\t\t\tDisplay.create(new PixelFormat(), attribs);\r\n\t\t} catch (LWJGLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\t// tell opengl where to render game (use whole display)\r\n\t\tGL11.glViewport(0, 0, WIDTH, HEIGHT); \r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static void updateDisplay() {\r\n\t\t\r\n\t\tDisplay.sync(FPS_CAP); // ensures buttery smooth fps\r\n\t\tDisplay.update();\r\n\t}\r\n\t\r\n\tpublic static void closeDisplay() {\r\n\t\tDisplay.destroy();\r\n\t}\r\n}\r\n```\r\n I am using this class in the following:\r\n```\r\npackage engineTester;\r\n\r\nimport org.lwjgl.opengl.Display;\r\n\r\nimport render.DisplayManager;\r\n\r\npublic class MainGameLoop {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tDisplayManager.createDisplay();\r\n\t\t\r\n\t\t// enter game loop until someone clicks the top right x button\r\n\t\twhile (!Display.isCloseRequested()) {\r\n\t\t\t// game logic and rendering\r\n\t\t\tDisplayManager.updateDisplay();\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tDisplayManager.closeDisplay();\r\n\t}\r\n}\r\n```\r\nWhen I try to run the above file, I get the following exception:\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/lwjgl/LWJGLException\r\n\tat engineTester.MainGameLoop.main(MainGameLoop.java:12)\r\nCaused by: java.lang.ClassNotFoundException: org.lwjgl.LWJGLException\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519)\r\n\t... 1 more\r\n```\r\nCan someone explain what I&#39;m doing wrong?","title":"LWJGLException not found?","body":"<p>I am using LWJGL version 2.9.1. I set up my Eclipse project with the following referenced libraries: lwjgl_util.jar, lwjgl.jar, and slick-util.jar. I also linked all of the necessary native .dll files for Windows. The file that is causing the error contains the following code:</p>\n<pre><code>package render;\n\nimport org.lwjgl.LWJGLException;\nimport org.lwjgl.opengl.ContextAttribs;\nimport org.lwjgl.opengl.Display;\nimport org.lwjgl.opengl.DisplayMode;\nimport org.lwjgl.opengl.GL11;\nimport org.lwjgl.opengl.PixelFormat;\n\npublic class DisplayManager {\n    \n    private static final int WIDTH = 1280;  \n    private static final int HEIGHT = 720;\n    private static final int FPS_CAP = 120;\n    \n    public static void createDisplay() {\n        \n        ContextAttribs attribs = new ContextAttribs(3, 2);\n        attribs.withForwardCompatible(true);\n        attribs.withProfileCore(true);\n        \n        try {\n            Display.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));\n            Display.create(new PixelFormat(), attribs);\n        } catch (LWJGLException e) {\n            e.printStackTrace();\n        }\n        \n        // tell opengl where to render game (use whole display)\n        GL11.glViewport(0, 0, WIDTH, HEIGHT); \n        \n    }\n    \n    public static void updateDisplay() {\n        \n        Display.sync(FPS_CAP); // ensures buttery smooth fps\n        Display.update();\n    }\n    \n    public static void closeDisplay() {\n        Display.destroy();\n    }\n}\n</code></pre>\n<p>I am using this class in the following:</p>\n<pre><code>package engineTester;\n\nimport org.lwjgl.opengl.Display;\n\nimport render.DisplayManager;\n\npublic class MainGameLoop {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        DisplayManager.createDisplay();\n        \n        // enter game loop until someone clicks the top right x button\n        while (!Display.isCloseRequested()) {\n            // game logic and rendering\n            DisplayManager.updateDisplay();\n            \n        }\n        \n        DisplayManager.closeDisplay();\n    }\n}\n</code></pre>\n<p>When I try to run the above file, I get the following exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/lwjgl/LWJGLException\n    at engineTester.MainGameLoop.main(MainGameLoop.java:12)\nCaused by: java.lang.ClassNotFoundException: org.lwjgl.LWJGLException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519)\n    ... 1 more\n</code></pre>\n<p>Can someone explain what I'm doing wrong?</p>\n"},{"tags":["java","unit-testing","intellij-idea","mockito","junit4"],"comments":[{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":0,"creation_date":1689776287,"post_id":76659183,"comment_id":135261676,"body_markdown":"looks similar to https://stackoverflow.com/questions/72153070/cannot-invoke-because-is-null-mockito-junit\nalso, check https://github.com/mockito/mockito-kotlin/issues/255","body":"looks similar to <a href=\"https://stackoverflow.com/questions/72153070/cannot-invoke-because-is-null-mockito-junit\" title=\"cannot invoke because is null mockito junit\">stackoverflow.com/questions/72153070/&hellip;</a> also, check <a href=\"https://github.com/mockito/mockito-kotlin/issues/255\" rel=\"nofollow noreferrer\">github.com/mockito/mockito-kotlin/issues/255</a>"}],"owner":{"account_id":27610618,"reputation":9,"user_id":21073827,"display_name":"Rishab Sud"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689074841,"creation_date":1689056493,"question_id":76659183,"body_markdown":"When I am trying to run a unit test from any extension in my SAP hybris project, I am getting an initialization error in the IDE which is not letting the test cases to execute.\r\n\r\n    &quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\jbr\\bin\\java.exe&quot; -ea -Dplatformhome=C:/Heineken_2205_NEW/Hybris_2205_7/hybris/bin/platform -Didea.test.cyclic.buffer.size=1048576 &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\lib\\idea_rt.jar=65062:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\bin&quot; -Dfile.encoding=UTF-8 @C:\\Users\\rishab.sud\\AppData\\Local\\Temp\\idea_arg_file810978677 com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.heinekenint.etrade.b2b.core.commerceservices.order.hook.impl.EtradeCommerceRedisCartCalculationMethodHookTest\r\n\r\n---------------\r\n```none\r\njava.lang.ExceptionInInitializerError\r\n\tat org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.&lt;init&gt;(ConditionalStackTraceFilter.java:17)\r\n\tat org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:30)\r\n\tat org.mockito.exceptions.base.MockitoException.&lt;init&gt;(MockitoException.java:19)\r\n\tat org.mockito.exceptions.misusing.MockitoConfigurationException.&lt;init&gt;(MockitoConfigurationException.java:18)\r\n\tat org.mockito.internal.configuration.ClassPathLoader.loadImplementations(ClassPathLoader.java:145)\r\n\tat org.mockito.internal.configuration.ClassPathLoader.findPluginImplementation(ClassPathLoader.java:110)\r\n\tat org.mockito.internal.configuration.ClassPathLoader.findPlatformMockMaker(ClassPathLoader.java:106)\r\n\tat org.mockito.internal.configuration.ClassPathLoader.&lt;clinit&gt;(ClassPathLoader.java:59)\r\n\tat org.mockito.internal.util.MockUtil.&lt;clinit&gt;(MockUtil.java:21)\r\n\tat org.mockito.internal.MockitoCore.&lt;init&gt;(MockitoCore.java:40)\r\n\tat org.mockito.internal.stubbing.defaultanswers.ReturnsMocks.&lt;init&gt;(ReturnsMocks.java:18)\r\n\tat org.mockito.Answers.&lt;clinit&gt;(Answers.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/java.lang.Class.getEnumConstantsShared(Class.java:3837)\r\n\tat java.base/java.lang.Class.enumConstantDirectory(Class.java:3859)\r\n\tat java.base/java.lang.Enum.valueOf(Enum.java:267)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseEnumValue(AnnotationParser.java:479)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:344)\r\n\tat java.base/java.lang.reflect.Method.getDefaultValue(Method.java:717)\r\n\tat java.base/sun.reflect.annotation.AnnotationType.&lt;init&gt;(AnnotationType.java:133)\r\n\tat java.base/sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:85)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:262)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\r\n\tat java.base/java.lang.reflect.Field.declaredAnnotations(Field.java:1211)\r\n\tat java.base/java.lang.reflect.Field.declaredAnnotations(Field.java:1209)\r\n\tat java.base/java.lang.reflect.Field.getDeclaredAnnotations(Field.java:1197)\r\n\tat java.base/java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:549)\r\n\tat org.junit.runners.model.FrameworkField.getAnnotations(FrameworkField.java:45)\r\n\tat org.junit.runners.model.TestClass.addToAnnotationLists(TestClass.java:84)\r\n\tat org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:71)\r\n\tat org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\r\n\tat org.junit.runners.JUnit4.&lt;init&gt;(JUnit4.java:23)\r\n\tat org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:10)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\r\n\tat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:37)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\r\n\tat org.junit.internal.requests.ClassRequest.createRunner(ClassRequest.java:28)\r\n\tat org.junit.internal.requests.MemoizingRequest.getRunner(MemoizingRequest.java:19)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:50)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;org.mockito.plugins.StackTraceCleanerProvider.getStackTraceCleaner(org.mockito.exceptions.stacktrace.StackTraceCleaner)&quot; because the return value of &quot;org.mockito.internal.configuration.ClassPathLoader.getStackTraceCleanerProvider()&quot; is null\r\n\tat org.mockito.internal.exceptions.stacktrace.StackTraceFilter.&lt;clinit&gt;(StackTraceFilter.java:21)\r\n\t... 48 more\r\n```\r\n\r\nProcess finished with exit code -1\r\n\r\n\r\nI want my test cases to run.\r\n\r\nDetails: **IntelliJ version is 2022.3.3, Junit version is 4**","title":"InitializationError on running unit tests in intelliJ idea","body":"<p>When I am trying to run a unit test from any extension in my SAP hybris project, I am getting an initialization error in the IDE which is not letting the test cases to execute.</p>\n<pre><code>&quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\jbr\\bin\\java.exe&quot; -ea -Dplatformhome=C:/Heineken_2205_NEW/Hybris_2205_7/hybris/bin/platform -Didea.test.cyclic.buffer.size=1048576 &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\lib\\idea_rt.jar=65062:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2022.3.3\\bin&quot; -Dfile.encoding=UTF-8 @C:\\Users\\rishab.sud\\AppData\\Local\\Temp\\idea_arg_file810978677 com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.heinekenint.etrade.b2b.core.commerceservices.order.hook.impl.EtradeCommerceRedisCartCalculationMethodHookTest\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.ExceptionInInitializerError\n    at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.&lt;init&gt;(ConditionalStackTraceFilter.java:17)\n    at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:30)\n    at org.mockito.exceptions.base.MockitoException.&lt;init&gt;(MockitoException.java:19)\n    at org.mockito.exceptions.misusing.MockitoConfigurationException.&lt;init&gt;(MockitoConfigurationException.java:18)\n    at org.mockito.internal.configuration.ClassPathLoader.loadImplementations(ClassPathLoader.java:145)\n    at org.mockito.internal.configuration.ClassPathLoader.findPluginImplementation(ClassPathLoader.java:110)\n    at org.mockito.internal.configuration.ClassPathLoader.findPlatformMockMaker(ClassPathLoader.java:106)\n    at org.mockito.internal.configuration.ClassPathLoader.&lt;clinit&gt;(ClassPathLoader.java:59)\n    at org.mockito.internal.util.MockUtil.&lt;clinit&gt;(MockUtil.java:21)\n    at org.mockito.internal.MockitoCore.&lt;init&gt;(MockitoCore.java:40)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsMocks.&lt;init&gt;(ReturnsMocks.java:18)\n    at org.mockito.Answers.&lt;clinit&gt;(Answers.java:52)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/java.lang.Class.getEnumConstantsShared(Class.java:3837)\n    at java.base/java.lang.Class.enumConstantDirectory(Class.java:3859)\n    at java.base/java.lang.Enum.valueOf(Enum.java:267)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseEnumValue(AnnotationParser.java:479)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:344)\n    at java.base/java.lang.reflect.Method.getDefaultValue(Method.java:717)\n    at java.base/sun.reflect.annotation.AnnotationType.&lt;init&gt;(AnnotationType.java:133)\n    at java.base/sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:85)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:262)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\n    at java.base/java.lang.reflect.Field.declaredAnnotations(Field.java:1211)\n    at java.base/java.lang.reflect.Field.declaredAnnotations(Field.java:1209)\n    at java.base/java.lang.reflect.Field.getDeclaredAnnotations(Field.java:1197)\n    at java.base/java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:549)\n    at org.junit.runners.model.FrameworkField.getAnnotations(FrameworkField.java:45)\n    at org.junit.runners.model.TestClass.addToAnnotationLists(TestClass.java:84)\n    at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:71)\n    at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\n    at org.junit.runners.JUnit4.&lt;init&gt;(JUnit4.java:23)\n    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:10)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\n    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:37)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\n    at org.junit.internal.requests.ClassRequest.createRunner(ClassRequest.java:28)\n    at org.junit.internal.requests.MemoizingRequest.getRunner(MemoizingRequest.java:19)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:50)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;org.mockito.plugins.StackTraceCleanerProvider.getStackTraceCleaner(org.mockito.exceptions.stacktrace.StackTraceCleaner)&quot; because the return value of &quot;org.mockito.internal.configuration.ClassPathLoader.getStackTraceCleanerProvider()&quot; is null\n    at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.&lt;clinit&gt;(StackTraceFilter.java:21)\n    ... 48 more\n</code></pre>\n<p>Process finished with exit code -1</p>\n<p>I want my test cases to run.</p>\n<p>Details: <strong>IntelliJ version is 2022.3.3, Junit version is 4</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5907283,"reputation":1489,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":2,"creation_date":1689074347,"post_id":76661412,"comment_id":135158651,"body_markdown":"*&quot;during a power loss&quot;* - tbh, any **unflushed** data will be gone. you should invest on backup power, UPS or something.","body":"<i>&quot;during a power loss&quot;</i> - tbh, any <b>unflushed</b> data will be gone. you should invest on backup power, UPS or something."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1689074449,"post_id":76661412,"comment_id":135158671,"body_markdown":"As Bagus Tesa said any unflushed data will be gone. What happens to the rest really depends on the exact OS, filesystem and settings you are using. Some filesystems are built for reliability as the primary goal and will ensure that only consistent views are possible, others might reorder writes and have &quot;nonsense&quot; results (such as some blocks of data missing/zeroed and further blocks being written correctly).","body":"As Bagus Tesa said any unflushed data will be gone. What happens to the rest really depends on the exact OS, filesystem and settings you are using. Some filesystems are built for reliability as the primary goal and will ensure that only consistent views are possible, others might reorder writes and have &quot;nonsense&quot; results (such as some blocks of data missing/zeroed and further blocks being written correctly)."},{"owner":{"account_id":5907283,"reputation":1489,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1689074613,"post_id":76661412,"comment_id":135158707,"body_markdown":"maybe we should attack the problem from different angle. like, *&quot;can we detect the shutdown signal?&quot;* if yes, we should shutdown the device properly (if possible). then, to prevent total power loss we should make it have some batteries or something. to be considered is to have the data not on the edge device (raspberry pi) itself but rather send them somewhere with better fault protection.","body":"maybe we should attack the problem from different angle. like, <i>&quot;can we detect the shutdown signal?&quot;</i> if yes, we should shutdown the device properly (if possible). then, to prevent total power loss we should make it have some batteries or something. to be considered is to have the data not on the edge device (raspberry pi) itself but rather send them somewhere with better fault protection."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689075451,"post_id":76661412,"comment_id":135158883,"body_markdown":"Data &quot;corruption&quot; would be dependent on the type of data.  Possibly set up a writing process that will append the data in buffered segments; as to provide some sort of mechanism for retrieving incomplete data, during a corruption.","body":"Data &quot;corruption&quot; would be dependent on the type of data.  Possibly set up a writing process that will append the data in buffered segments; as to provide some sort of mechanism for retrieving incomplete data, during a corruption."}],"answers":[{"tags":[],"owner":{"account_id":14794402,"reputation":1,"user_id":10684385,"display_name":"Soheil Babadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689074597,"creation_date":1689074597,"answer_id":76661459,"question_id":76661412,"body_markdown":"When the power goes out or JVM crashes during write process, there is a risk of data corruption. The behavior depends on various factors, such as the underlying operating system and file system.\r\n\r\nIn general, when you use `Files.write` with the `CREATE` and `APPEND` options, it will create a new file if it doesn&#39;t exist and append the provided data to the file if it already exists. If the write process gets interrupted due to a power outage or JVM crash, the file might be left in an inconsistent state.","title":"Appending data to a file during a power loss","body":"<p>When the power goes out or JVM crashes during write process, there is a risk of data corruption. The behavior depends on various factors, such as the underlying operating system and file system.</p>\n<p>In general, when you use <code>Files.write</code> with the <code>CREATE</code> and <code>APPEND</code> options, it will create a new file if it doesn't exist and append the provided data to the file if it already exists. If the write process gets interrupted due to a power outage or JVM crash, the file might be left in an inconsistent state.</p>\n"},{"tags":[],"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1689074702,"creation_date":1689074702,"answer_id":76661475,"question_id":76661412,"body_markdown":"If the power goes out or the JVM crashes during a write operation, it&#39;s possible that the data being written will be corrupted.\r\n\r\nTypical scenarios are:\r\n1. Partial Write: If the power goes out during a write operation, it&#39;s possible that only a portion of the bytes in your byte array got written to the disk. This means that the file may contain some new data, but not all of the new data.\r\n\r\n2. Corruption: In some cases, a sudden power loss or system crash can result in the corruption of the file. This can happen if the system was in the middle of updating file metadata (like location of data blocks, file size, etc.) when the power loss occurred. However, such cases are quite rare with modern file systems.\r\n\r\nFor your use-case, you might want to consider the following:\r\n1. Use a Database: If you&#39;re dealing with a lot of data, consider using a database system that is designed to handle power failures and crashes. SQLite could be a good choice for a Raspberry Pi system as it is a very lightweight database.\r\n```java\r\ntry {\r\n    // Connect to the SQLite database\r\n    Connection connection = DriverManager.getConnection(&quot;jdbc:sqlite:database_path&quot;);\r\n\r\n    // Create a binary blob and write data to it\r\n    String sql = &quot;INSERT INTO your_table (blob_column) VALUES (?)&quot;;\r\n    PreparedStatement pstmt = connection.prepareStatement(sql);\r\n\r\n    pstmt.setBytes(1, bytes);\r\n    pstmt.executeUpdate();\r\n\r\n} catch (SQLException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\n2. Flush and Sync: To make sure your write operations are immediately reflected in the file, you can flush the output stream and then sync the changes to the disk. This minimizes the amount of data that can be lost in the event of a power outage. However, keep in mind that this can impact your application&#39;s performance due to more frequent disk I/O operations.\r\n```java\r\ntry (FileOutputStream out = new FileOutputStream(&quot;file_path&quot;)) {\r\n    out.write(bytes);\r\n    out.getFD().sync();  // This forces the output bytes to be written to disk\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\n3. Write to a Temporary File First: Another approach is to first write the data to a temporary file. Once the write operation is complete, you can then rename the temporary file to the final file. This ensures that you always have a complete version of the data from before the write operation started. If a power loss happens during the write, you might lose the new data but you&#39;ll still have the old data.\r\n```java\r\ntry {\r\n    // Write data to a temporary file\r\n    Path tempPath = Paths.get(&quot;temp_file_path&quot;);\r\n    Files.write(tempPath, bytes, StandardOpenOption.CREATE);\r\n\r\n    // Rename the temporary file to the final file\r\n    Path finalPath = Paths.get(&quot;final_file_path&quot;);\r\n    Files.move(tempPath, finalPath, StandardCopyOption.REPLACE_EXISTING);\r\n\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```","title":"Appending data to a file during a power loss","body":"<p>If the power goes out or the JVM crashes during a write operation, it's possible that the data being written will be corrupted.</p>\n<p>Typical scenarios are:</p>\n<ol>\n<li><p>Partial Write: If the power goes out during a write operation, it's possible that only a portion of the bytes in your byte array got written to the disk. This means that the file may contain some new data, but not all of the new data.</p>\n</li>\n<li><p>Corruption: In some cases, a sudden power loss or system crash can result in the corruption of the file. This can happen if the system was in the middle of updating file metadata (like location of data blocks, file size, etc.) when the power loss occurred. However, such cases are quite rare with modern file systems.</p>\n</li>\n</ol>\n<p>For your use-case, you might want to consider the following:</p>\n<ol>\n<li>Use a Database: If you're dealing with a lot of data, consider using a database system that is designed to handle power failures and crashes. SQLite could be a good choice for a Raspberry Pi system as it is a very lightweight database.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // Connect to the SQLite database\n    Connection connection = DriverManager.getConnection(&quot;jdbc:sqlite:database_path&quot;);\n\n    // Create a binary blob and write data to it\n    String sql = &quot;INSERT INTO your_table (blob_column) VALUES (?)&quot;;\n    PreparedStatement pstmt = connection.prepareStatement(sql);\n\n    pstmt.setBytes(1, bytes);\n    pstmt.executeUpdate();\n\n} catch (SQLException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<ol start=\"2\">\n<li>Flush and Sync: To make sure your write operations are immediately reflected in the file, you can flush the output stream and then sync the changes to the disk. This minimizes the amount of data that can be lost in the event of a power outage. However, keep in mind that this can impact your application's performance due to more frequent disk I/O operations.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>try (FileOutputStream out = new FileOutputStream(&quot;file_path&quot;)) {\n    out.write(bytes);\n    out.getFD().sync();  // This forces the output bytes to be written to disk\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<ol start=\"3\">\n<li>Write to a Temporary File First: Another approach is to first write the data to a temporary file. Once the write operation is complete, you can then rename the temporary file to the final file. This ensures that you always have a complete version of the data from before the write operation started. If a power loss happens during the write, you might lose the new data but you'll still have the old data.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // Write data to a temporary file\n    Path tempPath = Paths.get(&quot;temp_file_path&quot;);\n    Files.write(tempPath, bytes, StandardOpenOption.CREATE);\n\n    // Rename the temporary file to the final file\n    Path finalPath = Paths.get(&quot;final_file_path&quot;);\n    Files.move(tempPath, finalPath, StandardCopyOption.REPLACE_EXISTING);\n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":19401148,"reputation":33,"user_id":14187683,"display_name":"Palm"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76661475,"answer_count":2,"score":0,"last_activity_date":1689074702,"creation_date":1689074163,"question_id":76661412,"body_markdown":"I am writing a `byte[]` to a file using `Files.write(filePath, data, StandardOpenOption.CREATE, StandardOpenOption.APPEND);`\r\n\r\nWhat happens to the file when the power goes out or the JVM crashes during the write process? Does it corrupt the data that is currently written to the file, or even the file entirely?\r\n\r\nBackground: I am running a data recording application on a Raspberry Pi and the method to turn it off is unplugging it.\r\n\r\nWhat do you think or do you have any suggestions?","title":"Appending data to a file during a power loss","body":"<p>I am writing a <code>byte[]</code> to a file using <code>Files.write(filePath, data, StandardOpenOption.CREATE, StandardOpenOption.APPEND);</code></p>\n<p>What happens to the file when the power goes out or the JVM crashes during the write process? Does it corrupt the data that is currently written to the file, or even the file entirely?</p>\n<p>Background: I am running a data recording application on a Raspberry Pi and the method to turn it off is unplugging it.</p>\n<p>What do you think or do you have any suggestions?</p>\n"},{"tags":["java","android","kotlin","augmented-reality","arcore"],"comments":[{"owner":{"account_id":1446933,"reputation":1888,"user_id":1365061,"accept_rate":78,"display_name":"Alex"},"score":0,"creation_date":1596116898,"post_id":63173426,"comment_id":111713319,"body_markdown":"What is the &quot;always same&quot; result? Share more information.","body":"What is the &quot;always same&quot; result? Share more information."}],"answers":[{"tags":[],"owner":{"account_id":8297053,"reputation":727,"user_id":6236959,"display_name":"Shubham Kumar Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689074176,"creation_date":1688543375,"answer_id":76618168,"question_id":63173426,"body_markdown":"try this\r\n\r\n \r\n\r\n    model?.thenAccept {\r\n                                            val badge = Node()\r\n                                            val localPosition = Vector3()\r\n                                            localPosition.set(0.0f, -0.25f, 0.0f)\r\n                                            badge.localScale = Vector3(-0.12f, 0.12f, 0.12f)\r\n    //                                    badge.localRotation = Quaternion.axisAngle(Vector3(0.0f, 1.0f, 0.0f), 180f)\r\n                                            badge.localPosition = localPosition\r\n                                            badge.setParent(faceNode)\r\n                                            badge.renderable = it\r\n                                        \r\n                                    }\r\n\r\nIt&#39;s part of some code I wrote [here](https://gptshubham595.medium.com/unveiling-the-world-of-ar-with-arcore-my-journey-of-exploration-practical-guide-86ac7f54b34).","title":"How to change 3D Object Node Position Change in ARCore?","body":"<p>try this</p>\n<pre><code>model?.thenAccept {\n                                        val badge = Node()\n                                        val localPosition = Vector3()\n                                        localPosition.set(0.0f, -0.25f, 0.0f)\n                                        badge.localScale = Vector3(-0.12f, 0.12f, 0.12f)\n//                                    badge.localRotation = Quaternion.axisAngle(Vector3(0.0f, 1.0f, 0.0f), 180f)\n                                        badge.localPosition = localPosition\n                                        badge.setParent(faceNode)\n                                        badge.renderable = it\n                                    \n                                }\n</code></pre>\n<p>It's part of some code I wrote <a href=\"https://gptshubham595.medium.com/unveiling-the-world-of-ar-with-arcore-my-journey-of-exploration-practical-guide-86ac7f54b34\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":7714031,"reputation":161,"user_id":5842422,"display_name":"Keshav Gangwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689074176,"creation_date":1596112983,"question_id":63173426,"body_markdown":"I am trying to set Node Position (one here as example):                      \r\n\r\n    faceNode.setLocalPosition(new Vector3(faceNode.getLocalPosition().x, (float) (faceNode.getLocalPosition().y+22.2), (float) (faceNode.getLocalPosition().z-50)));\r\n\r\nBut the results always same.\r\n","title":"How to change 3D Object Node Position Change in ARCore?","body":"<p>I am trying to set Node Position (one here as example):</p>\n<pre><code>faceNode.setLocalPosition(new Vector3(faceNode.getLocalPosition().x, (float) (faceNode.getLocalPosition().y+22.2), (float) (faceNode.getLocalPosition().z-50)));\n</code></pre>\n<p>But the results always same.</p>\n"},{"tags":["java","arrays","unsafe"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689068930,"post_id":76660675,"comment_id":135157516,"body_markdown":"Maybe https://bugs.java.com/bugdatabase/ is the better place to ask","body":"Maybe <a href=\"https://bugs.java.com/bugdatabase/\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase</a> is the better place to ask"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1689070184,"post_id":76660675,"comment_id":135157784,"body_markdown":"Read the documentation of `getAddress`. It does not do what you try to do. You&#39;re trying to dereference the *value* of that array cell (which will be 0), which causes a segmentation fault (the native equivalent of a NPE).","body":"Read the documentation of <code>getAddress</code>. It does not do what you try to do. You&#39;re trying to dereference the <i>value</i> of that array cell (which will be 0), which causes a segmentation fault (the native equivalent of a NPE)."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689071035,"post_id":76660675,"comment_id":135157970,"body_markdown":"seems like the `Unsafe` class is unsafe to use; from the [javadoc](https://github.com/openjdk/jdk/blob/4b1403d06b99b91ddd89ad6e54669b0595f1f8e5/src/java.base/share/classes/jdk/internal/misc/Unsafe.java#L257): &quot;*Fetches a native pointer from a given memory address. If the address is zero, or ... , the results are undefined.*&quot;","body":"seems like the <code>Unsafe</code> class is unsafe to use; from the <a href=\"https://github.com/openjdk/jdk/blob/4b1403d06b99b91ddd89ad6e54669b0595f1f8e5/src/java.base/share/classes/jdk/internal/misc/Unsafe.java#L257\" rel=\"nofollow noreferrer\">javadoc</a>: &quot;<i>Fetches a native pointer from a given memory address. If the address is zero, or ... , the results are undefined.</i>&quot;"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1689091452,"post_id":76660675,"comment_id":135162862,"body_markdown":"*`I still want to know the exact memory address of each array element`* Why would you need the actual address?   What is the use case for this? This has the indications of an XY problem.","body":"<i><code>I still want to know the exact memory address of each array element</code></i> Why would you need the actual address?   What is the use case for this? This has the indications of an XY problem."}],"owner":{"account_id":21561112,"reputation":11,"user_id":15895665,"display_name":"littlestone"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1689070416,"answer_count":0,"score":0,"last_activity_date":1689073926,"creation_date":1689068805,"question_id":76660675,"body_markdown":"When I try to get memory adress of each element in array.I tried to run code as below\r\n\r\n```\r\nimport sun.misc.Unsafe;\r\n\r\nimport java.lang.reflect.Field;\r\nimport static sun.misc.Unsafe.getUnsafe;\r\n\r\npublic class test_arr {\r\n    public static void main(String args[]) throws NoSuchFieldException, IllegalAccessException {\r\n        Field theUnsafeField = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n        theUnsafeField.setAccessible(true);\r\n        Unsafe u = (Unsafe) theUnsafeField.get(null);\r\n        int[][] arr = new int[3][4];\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            for (int j = 0; j &lt; arr[i].length; j++) {\r\n                System.out.println(u.getAddress(arr[i][j]));\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\nBut i meet this error.\r\n[A fatal error has been detected by the Java Runtime Environment](https://i.stack.imgur.com/T6xX7.png)\r\n\r\nI have looked the [https://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/](https://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/) But i can&#39;t fix this error.\r\nif someone konws how to fix it,please tell me,thanks!\r\n\r\nAs suggested by the comments I changed the code.\r\n\r\n    public class test_arr {\r\n    private static long normalize(int value) {\r\n        if (value &gt;= 0) return value;\r\n        return (~0L &gt;&gt;&gt; 32) &amp; value;\r\n    }\r\n\r\n    static long toAddress(Object obj) throws NoSuchFieldException, IllegalAccessException {\r\n        Object[] array = new Object[]{obj};\r\n        Field theUnsafeField = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n        theUnsafeField.setAccessible(true);\r\n        Unsafe u = (Unsafe) theUnsafeField.get(null);\r\n        long baseOffset = u.arrayBaseOffset(Object[].class);\r\n        return normalize(u.getInt(array, baseOffset));\r\n    }\r\n\r\n\r\n    public static void main(String args[]) throws NoSuchFieldException, IllegalAccessException {\r\n        int[][] arr = new int[3][4];\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            for (int j = 0; j &lt; arr[i].length; j++) {\r\n                double random = Math.random();\r\n                arr[i][j] = (int) (random);\r\n            }\r\n        }\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            for (int j = 0; j &lt; arr[i].length; j++) {\r\n                long address = toAddress(arr[i]);\r\n                System.out.println((Long.toHexString(address)));\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nThe output looks like you can infer the addresses of the array elements.But it&#39;s still not possible to know the exact position of each element.\r\n```\r\nd57431a7\r\nd57431a7\r\nd57431a7\r\nd57431a7\r\nd57431ab\r\nd57431ab\r\nd57431ab\r\nd57431ab\r\nd57431af\r\nd57431af\r\nd57431af\r\nd57431af\r\n```\r\nI still want to know the exact memory address of each array element, how should I do that, thanks!\r\n","title":"how to get memory address of each array&#39;s element in java?","body":"<p>When I try to get memory adress of each element in array.I tried to run code as below</p>\n<pre><code>import sun.misc.Unsafe;\n\nimport java.lang.reflect.Field;\nimport static sun.misc.Unsafe.getUnsafe;\n\npublic class test_arr {\n    public static void main(String args[]) throws NoSuchFieldException, IllegalAccessException {\n        Field theUnsafeField = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n        theUnsafeField.setAccessible(true);\n        Unsafe u = (Unsafe) theUnsafeField.get(null);\n        int[][] arr = new int[3][4];\n        for (int i = 0; i &lt; arr.length; i++) {\n            for (int j = 0; j &lt; arr[i].length; j++) {\n                System.out.println(u.getAddress(arr[i][j]));\n            }\n        }\n    }\n\n}\n\n</code></pre>\n<p>But i meet this error.\n<a href=\"https://i.stack.imgur.com/T6xX7.png\" rel=\"nofollow noreferrer\">A fatal error has been detected by the Java Runtime Environment</a></p>\n<p>I have looked the <a href=\"https://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/\" rel=\"nofollow noreferrer\">https://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/</a> But i can't fix this error.\nif someone konws how to fix it,please tell me,thanks!</p>\n<p>As suggested by the comments I changed the code.</p>\n<pre><code>public class test_arr {\nprivate static long normalize(int value) {\n    if (value &gt;= 0) return value;\n    return (~0L &gt;&gt;&gt; 32) &amp; value;\n}\n\nstatic long toAddress(Object obj) throws NoSuchFieldException, IllegalAccessException {\n    Object[] array = new Object[]{obj};\n    Field theUnsafeField = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n    theUnsafeField.setAccessible(true);\n    Unsafe u = (Unsafe) theUnsafeField.get(null);\n    long baseOffset = u.arrayBaseOffset(Object[].class);\n    return normalize(u.getInt(array, baseOffset));\n}\n\n\npublic static void main(String args[]) throws NoSuchFieldException, IllegalAccessException {\n    int[][] arr = new int[3][4];\n    for (int i = 0; i &lt; arr.length; i++) {\n        for (int j = 0; j &lt; arr[i].length; j++) {\n            double random = Math.random();\n            arr[i][j] = (int) (random);\n        }\n    }\n    for (int i = 0; i &lt; arr.length; i++) {\n        for (int j = 0; j &lt; arr[i].length; j++) {\n            long address = toAddress(arr[i]);\n            System.out.println((Long.toHexString(address)));\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>The output looks like you can infer the addresses of the array elements.But it's still not possible to know the exact position of each element.</p>\n<pre><code>d57431a7\nd57431a7\nd57431a7\nd57431a7\nd57431ab\nd57431ab\nd57431ab\nd57431ab\nd57431af\nd57431af\nd57431af\nd57431af\n</code></pre>\n<p>I still want to know the exact memory address of each array element, how should I do that, thanks!</p>\n"},{"tags":["java","spring-boot","spring-3"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689076034,"post_id":76661387,"comment_id":135159000,"body_markdown":"Does this answer your question? [Modify default JSON error response from Spring Boot Rest Controller](https://stackoverflow.com/questions/29106637/modify-default-json-error-response-from-spring-boot-rest-controller)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29106637/modify-default-json-error-response-from-spring-boot-rest-controller\">Modify default JSON error response from Spring Boot Rest Controller</a>"}],"owner":{"account_id":26669791,"reputation":41,"user_id":20281373,"display_name":"Reid2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689073895,"creation_date":1689073895,"question_id":76661387,"body_markdown":"I&#39;m throwing the following response status exception in my Spring Boot 3.0 application. \r\n\r\n```\r\nthrow new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;No ids have been provided&quot;);\r\n```\r\n\r\nThis returns the following json error message. But, I don&#39;t need the `type` and `properties` attributes in this response. Is there away to remove them from the returned json object? \r\n\r\n```\r\n{\r\n\t&quot;type&quot;: &quot;about:blank&quot;,\r\n\t&quot;title&quot;: &quot;Bad Request&quot;,\r\n\t&quot;status&quot;: 400,\r\n\t&quot;detail&quot;: &quot;No ids have been provided&quot;,\r\n\t&quot;instance&quot;: &quot;/api/&quot;,\r\n\t&quot;properties&quot;: null\r\n}\r\n```\r\n\r\n","title":"Remove type and properties from ResponseStatusException","body":"<p>I'm throwing the following response status exception in my Spring Boot 3.0 application.</p>\n<pre><code>throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;No ids have been provided&quot;);\n</code></pre>\n<p>This returns the following json error message. But, I don't need the <code>type</code> and <code>properties</code> attributes in this response. Is there away to remove them from the returned json object?</p>\n<pre><code>{\n    &quot;type&quot;: &quot;about:blank&quot;,\n    &quot;title&quot;: &quot;Bad Request&quot;,\n    &quot;status&quot;: 400,\n    &quot;detail&quot;: &quot;No ids have been provided&quot;,\n    &quot;instance&quot;: &quot;/api/&quot;,\n    &quot;properties&quot;: null\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3131387,"reputation":1799,"user_id":2649079,"display_name":"Nadir"},"score":0,"creation_date":1461134086,"post_id":36735543,"comment_id":61054022,"body_markdown":"Instead of use other classes variables in other classes, make a copy of the variable locally in the class you are going to use it.","body":"Instead of use other classes variables in other classes, make a copy of the variable locally in the class you are going to use it."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1461134241,"post_id":36735543,"comment_id":61054100,"body_markdown":"Welcome to StackOverflow! It&#39;s somewhat difficult to understand what you are asking. Maybe adding a simple code example would help. There is nothing wrong with using a public static variable other than it isn&#39;t encapsulated, which is somewhat against the concept of object oriented programming","body":"Welcome to StackOverflow! It&#39;s somewhat difficult to understand what you are asking. Maybe adding a simple code example would help. There is nothing wrong with using a public static variable other than it isn&#39;t encapsulated, which is somewhat against the concept of object oriented programming"},{"owner":{"account_id":4271589,"reputation":4111,"user_id":3493289,"accept_rate":83,"display_name":"MS Srikkanth"},"score":1,"creation_date":1461134274,"post_id":36735543,"comment_id":61054116,"body_markdown":"Though you can do it, it is not a good idea unless the variable is final. Like for example PI or E in class Math are defined as public final static double. Think why you need to do so before doing it.","body":"Though you can do it, it is not a good idea unless the variable is final. Like for example PI or E in class Math are defined as public final static double. Think why you need to do so before doing it."}],"answers":[{"tags":[],"owner":{"account_id":8164709,"reputation":6730,"user_id":6147506,"accept_rate":79,"display_name":"nhouser9"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461134127,"creation_date":1461134127,"answer_id":36735624,"question_id":36735543,"body_markdown":"Yes, you can use a `public static` method to access variables of another class in Java. Something like:\r\n\r\n    public static int variable;\r\n\r\nAnd then from another class:\r\n\r\n    ExternalClass.variable;\r\n\r\nPlease keep in mind that making a variable static means that it is not tied to any specific instance of your class. If you have a class `Example`, and you do:\r\n\r\n    Example e = new Example();\r\n\r\na static variable of class Example belongs to the class (`Example.variable`) not the instance (`e.variable`).","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>Yes, you can use a <code>public static</code> method to access variables of another class in Java. Something like:</p>\n\n<pre><code>public static int variable;\n</code></pre>\n\n<p>And then from another class:</p>\n\n<pre><code>ExternalClass.variable;\n</code></pre>\n\n<p>Please keep in mind that making a variable static means that it is not tied to any specific instance of your class. If you have a class <code>Example</code>, and you do:</p>\n\n<pre><code>Example e = new Example();\n</code></pre>\n\n<p>a static variable of class Example belongs to the class (<code>Example.variable</code>) not the instance (<code>e.variable</code>).</p>\n"},{"tags":[],"owner":{"account_id":2009930,"reputation":705,"user_id":1798649,"display_name":"Faisal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461134145,"creation_date":1461134145,"answer_id":36735631,"question_id":36735543,"body_markdown":"Yes you can use static variables to use values in other class. because static variables resides in memory throughout the application life cycle. ","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>Yes you can use static variables to use values in other class. because static variables resides in memory throughout the application life cycle. </p>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640757952,"creation_date":1461134775,"answer_id":36735840,"question_id":36735543,"body_markdown":"The quick answer is no. In general terms, you should be careful about exposing VARIABLES; even more if they are static fields. This approach changes with regards to CONSTANTS. I would use static modifier to expose constants because there is no risk of accidentally modifying its value.\r\n\r\nRemember, changes in value of a static field affects to ALL instances of that class; because it is a property of the class itself and not the individual instances.","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>The quick answer is no. In general terms, you should be careful about exposing VARIABLES; even more if they are static fields. This approach changes with regards to CONSTANTS. I would use static modifier to expose constants because there is no risk of accidentally modifying its value.</p>\n<p>Remember, changes in value of a static field affects to ALL instances of that class; because it is a property of the class itself and not the individual instances.</p>\n"},{"tags":[],"owner":{"account_id":8072869,"reputation":129,"user_id":6085012,"accept_rate":80,"display_name":"Aaronward"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461145829,"creation_date":1461145829,"answer_id":36740016,"question_id":36735543,"body_markdown":"You could use setters and getters to create a new variable in another class of that value. This is called instance variables. \r\n\r\nHeres and example.\r\n     \r\n    public class Car\r\n    {\r\n\r\n     private int milage = 100;\r\n\r\n      //........\r\n\r\n      \r\n     public int getMilage()\r\n     {\r\n        return this.milage;\r\n     }\r\n\r\n\r\n\r\nThen in the other class create an instance of that class.\r\n    \r\n\r\n\r\n     public class ExampleClass\r\n    {\r\n      public static void main(String [] args)\r\n      { \r\n        Car c = new Car();\r\n        \r\n        int newMilageVariable = c.getMilage();\r\n\r\n        System.out.println(newMilageVariable);\r\n      }\r\n    }\r\n\r\n*************\r\n\r\nAdditionally, you can use a static variable that can be accessed trough out other classes. The following code example should suffice.\r\n    \r\n     public static int milage;\r\n     \r\n\r\n     //********************\r\n    public class ExampleClass\r\n    {\r\n    \r\n      //..............\r\n\r\n      Car c = new Car();   // new car object\r\n      int milage = c.milage;  //access the static variable\r\n    }\r\n\r\n","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>You could use setters and getters to create a new variable in another class of that value. This is called instance variables. </p>\n\n<p>Heres and example.</p>\n\n<pre><code>public class Car\n{\n\n private int milage = 100;\n\n  //........\n\n\n public int getMilage()\n {\n    return this.milage;\n }\n</code></pre>\n\n<p>Then in the other class create an instance of that class.</p>\n\n<pre><code> public class ExampleClass\n{\n  public static void main(String [] args)\n  { \n    Car c = new Car();\n\n    int newMilageVariable = c.getMilage();\n\n    System.out.println(newMilageVariable);\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Additionally, you can use a static variable that can be accessed trough out other classes. The following code example should suffice.</p>\n\n<pre><code> public static int milage;\n\n\n //********************\npublic class ExampleClass\n{\n\n  //..............\n\n  Car c = new Car();   // new car object\n  int milage = c.milage;  //access the static variable\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28612253,"reputation":3,"user_id":21906993,"display_name":"Numaira Nawaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689073520,"creation_date":1689073520,"answer_id":76661344,"question_id":36735543,"body_markdown":"Yes, Static variable and static methods can use in any other class by the class reference.\r\n\r\n    MyClass.staticvariablename;\r\n    MyClass.anyStaticMethod();\r\n\r\nMyClass is having static variable and method that we can use in any other class with the reference class that have the respective method/Variable.\r\n\r\n\r\n","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>Yes, Static variable and static methods can use in any other class by the class reference.</p>\n<pre><code>MyClass.staticvariablename;\nMyClass.anyStaticMethod();\n</code></pre>\n<p>MyClass is having static variable and method that we can use in any other class with the reference class that have the respective method/Variable.</p>\n"}],"owner":{"account_id":7391049,"reputation":31,"user_id":5624411,"accept_rate":0,"display_name":"sachin.g"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1689073520,"creation_date":1461133850,"question_id":36735543,"body_markdown":"Can we use `public static` variable, to use variable of one class in other class  in Java? Some people said it should not be used beacuse when class unloaded the variables will assigned to `null`.\r\n\r\nIs this correct if it is correct we should not use `public static` variable, to use variable of one class in other class  in Java. So what is the easy method.\r\n\r\n1. creating object and use the variable \r\n2. create interface class.\r\n\r\nWhich is the standard method is being used for Java to use the variable of one class in other class?\r\n\r\n**Update:**\r\n\r\n    public class BluetoothLePlugin extends CordovaPlugin\r\n    {\r\n    public static CallbackContext callBack;\r\n    public boolean execute(final String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\r\n    \r\n    callBack=callbackContext;\r\n    \r\n    \r\n    }\r\n    \r\n    \r\n    }\r\n\r\nHere I am getting Callbackcontext i want to use this callback context in other classes like \r\n\r\n    public class mainClass{\r\n    \r\n      public void onCreate() {\r\n    \r\n    \r\n            BluetoothUtils mBluetoothUtils = new BluetoothUtils(mActivity);\r\n            BluetoothAdapter.LeScanCallback  mLeScanCallback =null;\r\n            mLeScanCallback = new BluetoothAdapter.LeScanCallback() {\r\n                @Override\r\n                public void onLeScan(final BluetoothDevice device, final int rssi, final byte[] scanRecord) {\r\n    \r\n    \r\n                    Log.d(&quot;BluetoothLeDevice&quot;, &quot; &quot; + device + &quot; &quot; + device.getName() + &quot;      &quot; + rssi + &quot;    &quot; + scanRecord + &quot;  &quot; + device.getAddress());\r\n                    mDeviceAdress = &quot;80:98:00:98:00:5A&quot;;\r\n    \r\n                    jsonobdevice = new JSONObject();\r\n                    if (device.getName() != null &amp;&amp; device.getName().trim().length() &gt; 0) {\r\n    \r\n                        try {\r\n    \r\n                            if (!jsonobdevice.has(&quot;uuid)&quot;) ){\r\n                                jsonobdevice.put(&quot;name&quot;, device.getName());\r\n                                jsonobdevice.put(&quot;uuid&quot;, device.getAddress());\r\n                                jsonobdevice.put(&quot;state&quot;, &quot;&quot;);\r\n                                jsonarraydevice.put(jsonobdevice);\r\n                                Log.d(&quot;&quot;, &quot; &quot; + jsonarraydevice);\r\n                                PluginResult result = new PluginResult(PluginResult.Status.OK, jsonarraydevice);\r\n                   result.setKeepCallback(true);\r\n    \r\n                                BluetoothLePlugin.callBack.sendPluginResult(result);//Here I am using callback context like this\r\n                            }\r\n    \r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                  //  Callbackpublic.webView.loadUrl(&quot;javascript:&quot;);\r\n    \r\n    \r\n                }\r\n            };\r\n    \r\n            BluetoothLeScanner mScanner = new BluetoothLeScanner(mLeScanCallback, mBluetoothUtils);\r\n            boolean mIsBluetoothOn = mBluetoothUtils.isBluetoothOn();\r\n            boolean mIsBluetoothLePresent = mBluetoothUtils.isBluetoothLeSupported();\r\n    \r\n            mBluetoothUtils.askUserToEnableBluetoothIfNeeded();\r\n            if (mIsBluetoothOn &amp;&amp; mIsBluetoothLePresent) {\r\n                mScanner.scanLeDevice(-1, true);\r\n    \r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nI am using like this in the above class\r\n\r\n    BluetoothLePlugin.callBack.sendPluginResult(result);\r\n\r\n\r\nIs what I am doing. Is correct my seniors told dont use public static. So I am Asking question.If it is wrong, what is the solution.\r\n\r\n","title":"Can we use public static variable ,to use vaiable of one class in other class in java","body":"<p>Can we use <code>public static</code> variable, to use variable of one class in other class  in Java? Some people said it should not be used beacuse when class unloaded the variables will assigned to <code>null</code>.</p>\n\n<p>Is this correct if it is correct we should not use <code>public static</code> variable, to use variable of one class in other class  in Java. So what is the easy method.</p>\n\n<ol>\n<li>creating object and use the variable </li>\n<li>create interface class.</li>\n</ol>\n\n<p>Which is the standard method is being used for Java to use the variable of one class in other class?</p>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>public class BluetoothLePlugin extends CordovaPlugin\n{\npublic static CallbackContext callBack;\npublic boolean execute(final String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\n\ncallBack=callbackContext;\n\n\n}\n\n\n}\n</code></pre>\n\n<p>Here I am getting Callbackcontext i want to use this callback context in other classes like </p>\n\n<pre><code>public class mainClass{\n\n  public void onCreate() {\n\n\n        BluetoothUtils mBluetoothUtils = new BluetoothUtils(mActivity);\n        BluetoothAdapter.LeScanCallback  mLeScanCallback =null;\n        mLeScanCallback = new BluetoothAdapter.LeScanCallback() {\n            @Override\n            public void onLeScan(final BluetoothDevice device, final int rssi, final byte[] scanRecord) {\n\n\n                Log.d(\"BluetoothLeDevice\", \" \" + device + \" \" + device.getName() + \"      \" + rssi + \"    \" + scanRecord + \"  \" + device.getAddress());\n                mDeviceAdress = \"80:98:00:98:00:5A\";\n\n                jsonobdevice = new JSONObject();\n                if (device.getName() != null &amp;&amp; device.getName().trim().length() &gt; 0) {\n\n                    try {\n\n                        if (!jsonobdevice.has(\"uuid)\") ){\n                            jsonobdevice.put(\"name\", device.getName());\n                            jsonobdevice.put(\"uuid\", device.getAddress());\n                            jsonobdevice.put(\"state\", \"\");\n                            jsonarraydevice.put(jsonobdevice);\n                            Log.d(\"\", \" \" + jsonarraydevice);\n                            PluginResult result = new PluginResult(PluginResult.Status.OK, jsonarraydevice);\n               result.setKeepCallback(true);\n\n                            BluetoothLePlugin.callBack.sendPluginResult(result);//Here I am using callback context like this\n                        }\n\n                    } catch (JSONException e) {\n                        e.printStackTrace();\n                    }\n                }\n              //  Callbackpublic.webView.loadUrl(\"javascript:\");\n\n\n            }\n        };\n\n        BluetoothLeScanner mScanner = new BluetoothLeScanner(mLeScanCallback, mBluetoothUtils);\n        boolean mIsBluetoothOn = mBluetoothUtils.isBluetoothOn();\n        boolean mIsBluetoothLePresent = mBluetoothUtils.isBluetoothLeSupported();\n\n        mBluetoothUtils.askUserToEnableBluetoothIfNeeded();\n        if (mIsBluetoothOn &amp;&amp; mIsBluetoothLePresent) {\n            mScanner.scanLeDevice(-1, true);\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>I am using like this in the above class</p>\n\n<pre><code>BluetoothLePlugin.callBack.sendPluginResult(result);\n</code></pre>\n\n<p>Is what I am doing. Is correct my seniors told dont use public static. So I am Asking question.If it is wrong, what is the solution.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":20042355,"reputation":146,"user_id":14692830,"display_name":"Brandon"},"score":0,"creation_date":1689071860,"post_id":76660902,"comment_id":135158140,"body_markdown":"is the value of URL null?","body":"is the value of URL null?"}],"answers":[{"tags":[],"owner":{"account_id":28020964,"reputation":1207,"user_id":21401783,"display_name":"Dinux"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689072844,"creation_date":1689072844,"answer_id":76661248,"question_id":76660902,"body_markdown":"You can make a public static variable in your ShowURL class which contains the value of the EditText. Example code:\r\n~~~\r\npublic class ShowURL extends AppCompatActivity {\r\n    public static String edittext_value; //Create a variable \r\n    private LogsManager mLogsManager;\r\n    private PreferencesManager mPreferencesManager;\r\n    private Log mLog;\r\n    EditText MyURL;\r\n    public static String IP;\r\n\r\n    protected void onCreate(Bundle savedInstanceState){\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.url);\r\n        MyURL = findViewById(R.id.editTextText);\r\n        //Assign the variable \r\n        edittext_value = MyUrl.getText().toString();\r\n    }\r\n\r\n     …\r\n\r\n~~~\r\n\r\nThen you can access the variable in your Recorder class like below:\r\n~~~\r\nString example_var = ShowURL.edittext_value;\r\n~~~","title":"How to reference an Edit Text value from Activity class to Non-Activity class","body":"<p>You can make a public static variable in your ShowURL class which contains the value of the EditText. Example code:</p>\n<pre><code>public class ShowURL extends AppCompatActivity {\n    public static String edittext_value; //Create a variable \n    private LogsManager mLogsManager;\n    private PreferencesManager mPreferencesManager;\n    private Log mLog;\n    EditText MyURL;\n    public static String IP;\n\n    protected void onCreate(Bundle savedInstanceState){\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.url);\n        MyURL = findViewById(R.id.editTextText);\n        //Assign the variable \n        edittext_value = MyUrl.getText().toString();\n    }\n\n     …\n\n</code></pre>\n<p>Then you can access the variable in your Recorder class like below:</p>\n<pre><code>String example_var = ShowURL.edittext_value;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11864229,"reputation":391,"user_id":8682142,"display_name":"Waseem Abbas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689073423,"creation_date":1689073423,"answer_id":76661330,"question_id":76660902,"body_markdown":"The problem is with your getter and setter for `mIP`. The following code is causing the value always be null. \r\n```Java\r\n//incorrect way\r\nprivate String mIP = getIp();\r\n\r\npublic String getIp() {\r\n    return mIP;\r\n}\r\npublic String setIp(String ip) {\r\n    mIP = ip;\r\n    return mIP;\r\n}\r\n```\r\nThis should be changed like this:\r\n```Java\r\n//The correct method\r\nprivate String mIP;\r\n\r\npublic String getIp() {\r\n    return mIP;\r\n}\r\npublic void setIp(String ip) {\r\n    mIP = ip;\r\n}\r\n```\r\nThen use the `mIP` variable within the `Recorder` class or `getIp()` method to read the IP value outside the `Recorder` class.\r\n\r\nHere is your final `Recorder` class \r\n```Java\r\npublic class Recorder {\r\n\r\n    public final static int NOTIFICATION_ID = 1;\r\n\r\n    private final Context mContext;\r\n\r\n    private static final String TAG = &quot;DeviceID&quot;;\r\n    private final LogsManager mLogsManager;\r\n    private final PreferencesManager mPreferencesManager;\r\n\r\n    private RecorderWriter mRecorderWriter;\r\n\r\n    private SensorManager mSensorManager;\r\n    private Log mLog;\r\n\r\n    private Map&lt;Sensor, Sensor.Settings&gt; mSensorsAndSettings;\r\n    private LinkedList&lt;PositionReference&gt; mReferences;\r\n\r\n\r\n    private boolean isRecording = false;\r\n    private boolean isInitialized = false;\r\n\r\n    private Float f, f2 = null;\r\n    private  Float initialAltitude = null;\r\n    private Bundle mExtraData; // Declare mExtraData variable\r\n\r\n    private String mIP;\r\n\r\n    public String getIp() {\r\n        return mIP;\r\n    }\r\n    public void setIp(String ip) {\r\n        mIP = ip;\r\n    }\r\n\r\n    public Recorder(Context context, LogsManager logsManager,\r\n                    PreferencesManager preferencesManager) {\r\n        mContext = context;\r\n        mLogsManager = logsManager;\r\n        mPreferencesManager = preferencesManager;\r\n        mReferences = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public boolean isRecording() {\r\n        return isRecording;\r\n    }\r\n\r\n    public boolean isRecording(Sensor sensor) {\r\n        return mSensorsAndSettings.containsKey(sensor);\r\n    }\r\n\r\n    private void init(@NonNull Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings,\r\n                      @Nullable CalibrationLog.Type calibration)\r\n            throws FileNotFoundException {\r\n\r\n        // Store sensors and their settings\r\n        mSensorsAndSettings = sensorsAndSettings;\r\n\r\n        mLog = calibration != null ?\r\n                CalibrationLog.create(calibration, mSensorsAndSettings.keySet()) :\r\n                new Log(mSensorsAndSettings.keySet());\r\n\r\n        mLog.init(mContext);\r\n        mReferences.clear();\r\n\r\n        // We need to create a new instance because writer is used during zip creation task\r\n        mRecorderWriter = new RecorderWriter(mContext);\r\n        mRecorderWriter.init(mLog);\r\n    }\r\n\r\n    public void play() throws FileNotFoundException {\r\n        play(mPreferencesManager.getSelectedSensors(), null);\r\n    }\r\n\r\n    public void play(Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings, CalibrationLog.Type calibration)\r\n            throws FileNotFoundException {\r\n\r\n        if (isRecording) return;\r\n\r\n\r\n        // Need to init some properties for the first play\r\n        if (!isInitialized) {\r\n            init(sensorsAndSettings, calibration);\r\n            isInitialized = true;\r\n        }\r\n\r\n\r\n        // Start and listen sensors\r\n        for (final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting : mSensorsAndSettings.entrySet()) {\r\n\r\n            final Sensor sensor = sensorAndSetting.getKey();\r\n            final Sensor.Settings settings = sensorAndSetting.getValue();\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; sensor instanceof CameraRecorder) {\r\n                mRecorderWriter.updateVideoPath();\r\n            }\r\n\r\n            if (sensor instanceof FieldsWritableObject) {\r\n                sensor.setListener(new Sensor.Listener() {\r\n                    @Override\r\n                    public void onNewValues(double diffTimeSystem, double diffTimeSensor, Object[] objects) {\r\n\r\n                        OkHttpClient client = new OkHttpClient();\r\n                        Map&lt;String, Object&gt; data = getMapValue(sensor.getType(), objects);\r\n\r\n                        // Define the request body\r\n                        MediaType mediaType = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\r\n                        String json = new Gson().toJson(data); // JSON payload\r\n                        RequestBody requestBody = RequestBody.create(mediaType, json);\r\n                        String IP = mIP;\r\n                        android.util.Log.d(&quot;CEK ISI&quot;, &quot;Isi mIP: &quot; + IP);\r\n                        Request request = new Request.Builder()\r\n                                .url(&quot;http://theAddress&quot;)\r\n                                .post(requestBody)\r\n                                .build();\r\n\r\n                        // Send the request asynchronously\r\n                        client.newCall(request).enqueue(new okhttp3.Callback() {\r\n                            @Override\r\n                            public void onResponse(okhttp3.Call call, Response response) throws IOException {\r\n                                // Handle the response\r\n                                if (response.isSuccessful()) {\r\n                                    // Request successful\r\n                                    final String responseBody = response.body().string();\r\n\r\n                                } else {\r\n                                    // Request unsuccessful\r\n                                    // Handle error case\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onFailure(okhttp3.Call call, IOException e) {\r\n                                // Handle network failure\r\n                            }\r\n                        });\r\n\r\n                        String Tag = new String();\r\n                        String Data = new String();\r\n                        String ID = new String();\r\n                        long timestamp = System.currentTimeMillis();\r\n                        android.util.Log.d(Data, &quot;Value :&quot; + new Gson().toJson(objects));\r\n                        android.util.Log.d(&quot;VALUE SENSOR TIPE&quot;, String.valueOf(sensor.getType()));\r\n                        android.util.Log.d(&quot;VALUE SENSOR&quot;, String.valueOf(objects));\r\n                        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\r\n                        android.util.Log.d(Tag, &quot;Device ID: &quot; + androidId);\r\n                        Date date = new Date(timestamp);\r\n                        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                        sdf.format(date);\r\n                        // Convert timestamp to a human-readable date and time format\r\n                        String formattedTime = String.valueOf(date);\r\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Current timestamp: &quot; + timestamp);\r\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Formatted time: &quot; + formattedTime);\r\n                        mRecorderWriter.asycWrite(sensor, diffTimeSystem, diffTimeSensor, objects);\r\n                        android.util.Log.d(&quot;Time Sys: &quot;,&quot;Time System: &quot; + diffTimeSystem);\r\n                        android.util.Log.d(&quot;Time Sen: &quot;,&quot;Time Sensor: &quot; + diffTimeSensor);\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Some sensors take a long time to start but have to be run on UI thread\r\n            if (sensor.mustRunOnUiThread()) {\r\n                sensor.start(mContext, settings, mLog.getRecordTimes());\r\n            } else {\r\n                new Thread(() -&gt; sensor.start(mContext, settings, mLog.getRecordTimes())).start();\r\n            }\r\n        }\r\n\r\n        createNotification();\r\n        startTimer();\r\n        isRecording = true;\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; getMapValue(int type, Object[] objects) {\r\n        Map&lt;String, Object&gt; value = new HashMap&lt;&gt;();\r\n        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\r\n        long timestamp = System.currentTimeMillis();\r\n        Date date = new Date(timestamp);\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        sdf.format(date);\r\n        // Convert timestamp to a human-readable date and time format\r\n        String formattedTime = String.valueOf(date);\r\n\r\n//        final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting = null;\r\n//        final Sensor sensor = sensorAndSetting.getKey();\r\n//        final Sensor.Settings settings = sensorAndSetting.getValue();\r\n\r\n//        String CT = toString();\r\n//        String FT = new String();\r\n\r\n\r\n        switch (type) {\r\n            case 1:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;accel x&quot;, objects[0]);\r\n                value.put(&quot;accel y&quot;, objects[1]);\r\n                value.put(&quot;accel z&quot;, objects[2]);\r\n                break;\r\n            case 35:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n//                value.put(&quot;Time Sensor&quot;, CT);\r\n//                value.put(&quot;Time System&quot;, FT);\r\n                value.put(&quot;uncal accel x&quot;, objects[0]);\r\n                value.put(&quot;uncal accel y&quot;, objects[1]);\r\n                value.put(&quot;uncal accel z&quot;, objects[2]);\r\n                break;\r\n            case 2:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;magneto x&quot;, objects[0]);\r\n                value.put(&quot;magneto y&quot;, objects[1]);\r\n                value.put(&quot;magneto z&quot;, objects[2]);\r\n                break;\r\n            case 14:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;uncal magneto x&quot;, objects[0]);\r\n                value.put(&quot;uncal magneto y&quot;, objects[1]);\r\n                value.put(&quot;uncal magneto z&quot;, objects[2]);\r\n                break;\r\n            case 4:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;gyro x&quot;, objects[0]);\r\n                value.put(&quot;gyro y&quot;, objects[1]);\r\n                value.put(&quot;gyro z&quot;, objects[2]);\r\n                break;\r\n            case 16:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;uncal gyro x&quot;, objects[0]);\r\n                value.put(&quot;uncal gyro y&quot;, objects[1]);\r\n                value.put(&quot;uncal gyro z&quot;, objects[2]);\r\n                break;\r\n            case 9:\r\n            case 10:\r\n            case 11:\r\n                float[] fArr = new float[4];\r\n                float[] fArr2 = new float[9];\r\n                float[] fArr3 = new float[3];\r\n                SensorManager.getQuaternionFromVector(fArr, (float[]) objects[0]);\r\n                SensorManager.getRotationMatrixFromVector(fArr2, (float[]) objects[0]);\r\n                SensorManager.getOrientation(fArr2, fArr3);\r\n                value.put(&quot;yaw&quot;, fArr3[0]);\r\n                value.put(&quot;pitch&quot;, fArr3[1]);\r\n                value.put(&quot;roll&quot;, fArr3[2]);\r\n                value.put(&quot;qw&quot;, fArr[0]);\r\n                value.put(&quot;qx&quot;, fArr[1]);\r\n                value.put(&quot;qy&quot;, fArr[2]);\r\n                value.put(&quot;qz&quot;, fArr[3]);\r\n                break;\r\n            case 5:\r\n                value.put(&quot;lux&quot;, objects[0]);\r\n                break;\r\n            case 768:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;GPS Latitude&quot;, objects[0]);\r\n                value.put(&quot;GPS Longitude&quot;, objects[1]);\r\n                value.put(&quot;GPS Altitude&quot;, objects[2]);\r\n                value.put(&quot;GPS Bearing&quot;, objects[3]);\r\n                value.put(&quot;GPS Accuracy&quot;, objects[4]);\r\n                value.put(&quot;GPS Speed&quot;, objects[5]);\r\n                break;\r\n            case 6:\r\n                float altitude = SensorManager.getAltitude(1013.25f, (Float) objects[0]);\r\n                if (f == null) {\r\n                    initialAltitude = Float.valueOf(altitude);\r\n                }\r\n                f2 = initialAltitude;\r\n                float floatValue = f2 == null ? altitude : f2.floatValue();\r\n                value.put(&quot;pressure&quot;, objects[0]);\r\n                value.put(&quot;relativeAltitude&quot;, altitude - floatValue);\r\n                break;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    public void pause() {\r\n\r\n        if (!isRecording) return;\r\n\r\n        stopTimer();\r\n        removeNotification();\r\n\r\n        for (final Sensor sensor : mSensorsAndSettings.keySet()) {\r\n\r\n            sensor.setListener(null);\r\n\r\n            if (sensor.mustRunOnUiThread()) {\r\n                sensor.stop(mContext);\r\n            } else {\r\n                new Thread(() -&gt; sensor.stop(mContext)).start();\r\n            }\r\n        }\r\n\r\n        mLog.getRecordTimes().endTime = System.currentTimeMillis() / 1e3d;\r\n        isRecording = false;\r\n    }\r\n\r\n\r\n    public void cancel() throws IOException {\r\n\r\n        if (isRecording) {\r\n            pause();\r\n        }\r\n        resetTimer();\r\n        mRecorderWriter.finish();\r\n        mRecorderWriter.removeFiles();\r\n        isInitialized = false;\r\n        isRecording = false;\r\n    }\r\n\r\n\r\n    public Log save(String title) throws IOException {\r\n        return save(title, null, null, null);\r\n    }\r\n\r\n    public Log save(String title, String user, String positionOrientation, String comment) throws IOException {\r\n\r\n        mRecorderWriter.writeReferences(mReferences);\r\n        mRecorderWriter.finish();\r\n\r\n        resetTimer();\r\n\r\n        // Set title to unknown if null and replace non word characters by underscore\r\n        if (title == null || title.isEmpty()) {\r\n            title = mContext.getString(R.string.record_finished_empty_filename);\r\n        }\r\n        String filename = title.replaceAll(&quot;\\\\W+&quot;, &quot;_&quot;);\r\n\r\n        mLog.setName(title);\r\n        mLog.setUser(user);\r\n        mLog.setComment(comment);\r\n        mLog.setPositionOrientation(positionOrientation);\r\n        mLog.setUncompressedSize(mRecorderWriter.getDataSize());\r\n\r\n\r\n        // Create Zip File\r\n        final Pair&lt;File, ZipCreationTask&gt; zipCreationPair = mRecorderWriter.createZipFile(filename, mLog);\r\n        final File zipFile = zipCreationPair.first;\r\n        final ZipCreationTask zipTask = zipCreationPair.second;\r\n\r\n        mLog.setZipCreationTask(zipTask);\r\n\r\n        zipTask.addListener(new ZipCreationTask.ZipCreationListener() {\r\n            @Override\r\n            public void onProgress(File currentFile, float ratio) {\r\n            }\r\n\r\n            @Override\r\n            public void onTaskFinished(File outputFile, long fileSize) {\r\n                // Remove files when recorder finished\r\n                mRecorderWriter.removeFiles();\r\n                zipTask.removeListener(this);\r\n            }\r\n        });\r\n\r\n        mLog.setZipFile(zipFile);\r\n\r\n        mLogsManager.addLog(mLog);\r\n\r\n        isInitialized = false;\r\n\r\n        return mLog;\r\n    }\r\n\r\n\r\n    public Log.RecordTimes getRecordTimes() {\r\n        return mLog.getRecordTimes();\r\n    }\r\n\r\n\r\n    public void addReference(double latitude, double longitude, Float level) {\r\n        double elapsedTime = System.currentTimeMillis() / 1e3d - mLog.getRecordTimes().startTime;\r\n        mReferences.add(new PositionReference(elapsedTime, latitude, longitude, level));\r\n    }\r\n\r\n    public void removeLastReference() {\r\n        mReferences.pollLast();\r\n    }\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;DataSize&quot;&gt;\r\n    public long getDataSize() {\r\n        return mRecorderWriter.getDataSize();\r\n    }\r\n    //&lt;/editor-fold&gt;\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;Timer&quot;&gt;\r\n    private long firstTime;\r\n    private long computeTime;\r\n\r\n    public long getCurrentTime() {\r\n        return computeTime + System.currentTimeMillis() - firstTime;\r\n    }\r\n\r\n    private void startTimer() {\r\n        firstTime = System.currentTimeMillis();\r\n    }\r\n\r\n    private void stopTimer() {\r\n        computeTime += System.currentTimeMillis() - firstTime;\r\n    }\r\n\r\n    private void resetTimer() {\r\n        computeTime = 0;\r\n    }\r\n    //&lt;/editor-fold&gt;\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;Notification&quot;&gt;\r\n\r\n    private void createNotification() {\r\n        mContext.bindService(new Intent(mContext, KillNotificationsService.class),\r\n                mNotificationConnection, Context.BIND_AUTO_CREATE);\r\n    }\r\n\r\n    private void removeNotification() {\r\n        mContext.unbindService(mNotificationConnection);\r\n\r\n        NotificationManager mNotificationManager =\r\n                (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        mNotificationManager.cancel(NOTIFICATION_ID);\r\n    }\r\n\r\n\r\n    // http://stackoverflow.com/questions/12997800/cancel-notification-on-remove-application-from-multitask-panel\r\n    private ServiceConnection mNotificationConnection = new ServiceConnection() {\r\n        public void onServiceConnected(ComponentName className,\r\n                                       IBinder binder) {\r\n            ((KillNotificationsService.KillBinder) binder).service.startService(\r\n                    new Intent(mContext, KillNotificationsService.class));\r\n\r\n            Intent intent = new Intent(mContext, RecordActivity.class);\r\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n            PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n            NotificationCompat.Builder builder =\r\n                    new NotificationCompat.Builder(mContext)\r\n                            .setSmallIcon(R.drawable.ic_notification)\r\n                            .setContentTitle(mContext.getString(R.string.app_name))\r\n                            .setContentText(mContext.getString(R.string.record_notification))\r\n                            .setContentIntent(pendingIntent);\r\n\r\n            Notification notification = builder.build();\r\n            notification.flags = Notification.FLAG_ONGOING_EVENT;\r\n\r\n            NotificationManager mNotificationManager =\r\n                    (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\r\n            mNotificationManager.notify(NOTIFICATION_ID, notification);\r\n        }\r\n\r\n        public void onServiceDisconnected(ComponentName className) {\r\n        }\r\n\r\n    };\r\n    //&lt;/editor-fold&gt;\r\n\r\n}\r\n```\r\n\r\n","title":"How to reference an Edit Text value from Activity class to Non-Activity class","body":"<p>The problem is with your getter and setter for <code>mIP</code>. The following code is causing the value always be null.</p>\n<pre><code>//incorrect way\nprivate String mIP = getIp();\n\npublic String getIp() {\n    return mIP;\n}\npublic String setIp(String ip) {\n    mIP = ip;\n    return mIP;\n}\n</code></pre>\n<p>This should be changed like this:</p>\n<pre><code>//The correct method\nprivate String mIP;\n\npublic String getIp() {\n    return mIP;\n}\npublic void setIp(String ip) {\n    mIP = ip;\n}\n</code></pre>\n<p>Then use the <code>mIP</code> variable within the <code>Recorder</code> class or <code>getIp()</code> method to read the IP value outside the <code>Recorder</code> class.</p>\n<p>Here is your final <code>Recorder</code> class</p>\n<pre><code>public class Recorder {\n\n    public final static int NOTIFICATION_ID = 1;\n\n    private final Context mContext;\n\n    private static final String TAG = &quot;DeviceID&quot;;\n    private final LogsManager mLogsManager;\n    private final PreferencesManager mPreferencesManager;\n\n    private RecorderWriter mRecorderWriter;\n\n    private SensorManager mSensorManager;\n    private Log mLog;\n\n    private Map&lt;Sensor, Sensor.Settings&gt; mSensorsAndSettings;\n    private LinkedList&lt;PositionReference&gt; mReferences;\n\n\n    private boolean isRecording = false;\n    private boolean isInitialized = false;\n\n    private Float f, f2 = null;\n    private  Float initialAltitude = null;\n    private Bundle mExtraData; // Declare mExtraData variable\n\n    private String mIP;\n\n    public String getIp() {\n        return mIP;\n    }\n    public void setIp(String ip) {\n        mIP = ip;\n    }\n\n    public Recorder(Context context, LogsManager logsManager,\n                    PreferencesManager preferencesManager) {\n        mContext = context;\n        mLogsManager = logsManager;\n        mPreferencesManager = preferencesManager;\n        mReferences = new LinkedList&lt;&gt;();\n    }\n\n    public boolean isRecording() {\n        return isRecording;\n    }\n\n    public boolean isRecording(Sensor sensor) {\n        return mSensorsAndSettings.containsKey(sensor);\n    }\n\n    private void init(@NonNull Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings,\n                      @Nullable CalibrationLog.Type calibration)\n            throws FileNotFoundException {\n\n        // Store sensors and their settings\n        mSensorsAndSettings = sensorsAndSettings;\n\n        mLog = calibration != null ?\n                CalibrationLog.create(calibration, mSensorsAndSettings.keySet()) :\n                new Log(mSensorsAndSettings.keySet());\n\n        mLog.init(mContext);\n        mReferences.clear();\n\n        // We need to create a new instance because writer is used during zip creation task\n        mRecorderWriter = new RecorderWriter(mContext);\n        mRecorderWriter.init(mLog);\n    }\n\n    public void play() throws FileNotFoundException {\n        play(mPreferencesManager.getSelectedSensors(), null);\n    }\n\n    public void play(Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings, CalibrationLog.Type calibration)\n            throws FileNotFoundException {\n\n        if (isRecording) return;\n\n\n        // Need to init some properties for the first play\n        if (!isInitialized) {\n            init(sensorsAndSettings, calibration);\n            isInitialized = true;\n        }\n\n\n        // Start and listen sensors\n        for (final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting : mSensorsAndSettings.entrySet()) {\n\n            final Sensor sensor = sensorAndSetting.getKey();\n            final Sensor.Settings settings = sensorAndSetting.getValue();\n\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; sensor instanceof CameraRecorder) {\n                mRecorderWriter.updateVideoPath();\n            }\n\n            if (sensor instanceof FieldsWritableObject) {\n                sensor.setListener(new Sensor.Listener() {\n                    @Override\n                    public void onNewValues(double diffTimeSystem, double diffTimeSensor, Object[] objects) {\n\n                        OkHttpClient client = new OkHttpClient();\n                        Map&lt;String, Object&gt; data = getMapValue(sensor.getType(), objects);\n\n                        // Define the request body\n                        MediaType mediaType = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\n                        String json = new Gson().toJson(data); // JSON payload\n                        RequestBody requestBody = RequestBody.create(mediaType, json);\n                        String IP = mIP;\n                        android.util.Log.d(&quot;CEK ISI&quot;, &quot;Isi mIP: &quot; + IP);\n                        Request request = new Request.Builder()\n                                .url(&quot;http://theAddress&quot;)\n                                .post(requestBody)\n                                .build();\n\n                        // Send the request asynchronously\n                        client.newCall(request).enqueue(new okhttp3.Callback() {\n                            @Override\n                            public void onResponse(okhttp3.Call call, Response response) throws IOException {\n                                // Handle the response\n                                if (response.isSuccessful()) {\n                                    // Request successful\n                                    final String responseBody = response.body().string();\n\n                                } else {\n                                    // Request unsuccessful\n                                    // Handle error case\n                                }\n                            }\n\n                            @Override\n                            public void onFailure(okhttp3.Call call, IOException e) {\n                                // Handle network failure\n                            }\n                        });\n\n                        String Tag = new String();\n                        String Data = new String();\n                        String ID = new String();\n                        long timestamp = System.currentTimeMillis();\n                        android.util.Log.d(Data, &quot;Value :&quot; + new Gson().toJson(objects));\n                        android.util.Log.d(&quot;VALUE SENSOR TIPE&quot;, String.valueOf(sensor.getType()));\n                        android.util.Log.d(&quot;VALUE SENSOR&quot;, String.valueOf(objects));\n                        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\n                        android.util.Log.d(Tag, &quot;Device ID: &quot; + androidId);\n                        Date date = new Date(timestamp);\n                        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n                        sdf.format(date);\n                        // Convert timestamp to a human-readable date and time format\n                        String formattedTime = String.valueOf(date);\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Current timestamp: &quot; + timestamp);\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Formatted time: &quot; + formattedTime);\n                        mRecorderWriter.asycWrite(sensor, diffTimeSystem, diffTimeSensor, objects);\n                        android.util.Log.d(&quot;Time Sys: &quot;,&quot;Time System: &quot; + diffTimeSystem);\n                        android.util.Log.d(&quot;Time Sen: &quot;,&quot;Time Sensor: &quot; + diffTimeSensor);\n\n                    }\n                });\n            }\n\n            // Some sensors take a long time to start but have to be run on UI thread\n            if (sensor.mustRunOnUiThread()) {\n                sensor.start(mContext, settings, mLog.getRecordTimes());\n            } else {\n                new Thread(() -&gt; sensor.start(mContext, settings, mLog.getRecordTimes())).start();\n            }\n        }\n\n        createNotification();\n        startTimer();\n        isRecording = true;\n    }\n\n    private Map&lt;String, Object&gt; getMapValue(int type, Object[] objects) {\n        Map&lt;String, Object&gt; value = new HashMap&lt;&gt;();\n        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\n        long timestamp = System.currentTimeMillis();\n        Date date = new Date(timestamp);\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        sdf.format(date);\n        // Convert timestamp to a human-readable date and time format\n        String formattedTime = String.valueOf(date);\n\n//        final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting = null;\n//        final Sensor sensor = sensorAndSetting.getKey();\n//        final Sensor.Settings settings = sensorAndSetting.getValue();\n\n//        String CT = toString();\n//        String FT = new String();\n\n\n        switch (type) {\n            case 1:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;accel x&quot;, objects[0]);\n                value.put(&quot;accel y&quot;, objects[1]);\n                value.put(&quot;accel z&quot;, objects[2]);\n                break;\n            case 35:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n//                value.put(&quot;Time Sensor&quot;, CT);\n//                value.put(&quot;Time System&quot;, FT);\n                value.put(&quot;uncal accel x&quot;, objects[0]);\n                value.put(&quot;uncal accel y&quot;, objects[1]);\n                value.put(&quot;uncal accel z&quot;, objects[2]);\n                break;\n            case 2:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;magneto x&quot;, objects[0]);\n                value.put(&quot;magneto y&quot;, objects[1]);\n                value.put(&quot;magneto z&quot;, objects[2]);\n                break;\n            case 14:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;uncal magneto x&quot;, objects[0]);\n                value.put(&quot;uncal magneto y&quot;, objects[1]);\n                value.put(&quot;uncal magneto z&quot;, objects[2]);\n                break;\n            case 4:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;gyro x&quot;, objects[0]);\n                value.put(&quot;gyro y&quot;, objects[1]);\n                value.put(&quot;gyro z&quot;, objects[2]);\n                break;\n            case 16:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;uncal gyro x&quot;, objects[0]);\n                value.put(&quot;uncal gyro y&quot;, objects[1]);\n                value.put(&quot;uncal gyro z&quot;, objects[2]);\n                break;\n            case 9:\n            case 10:\n            case 11:\n                float[] fArr = new float[4];\n                float[] fArr2 = new float[9];\n                float[] fArr3 = new float[3];\n                SensorManager.getQuaternionFromVector(fArr, (float[]) objects[0]);\n                SensorManager.getRotationMatrixFromVector(fArr2, (float[]) objects[0]);\n                SensorManager.getOrientation(fArr2, fArr3);\n                value.put(&quot;yaw&quot;, fArr3[0]);\n                value.put(&quot;pitch&quot;, fArr3[1]);\n                value.put(&quot;roll&quot;, fArr3[2]);\n                value.put(&quot;qw&quot;, fArr[0]);\n                value.put(&quot;qx&quot;, fArr[1]);\n                value.put(&quot;qy&quot;, fArr[2]);\n                value.put(&quot;qz&quot;, fArr[3]);\n                break;\n            case 5:\n                value.put(&quot;lux&quot;, objects[0]);\n                break;\n            case 768:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;GPS Latitude&quot;, objects[0]);\n                value.put(&quot;GPS Longitude&quot;, objects[1]);\n                value.put(&quot;GPS Altitude&quot;, objects[2]);\n                value.put(&quot;GPS Bearing&quot;, objects[3]);\n                value.put(&quot;GPS Accuracy&quot;, objects[4]);\n                value.put(&quot;GPS Speed&quot;, objects[5]);\n                break;\n            case 6:\n                float altitude = SensorManager.getAltitude(1013.25f, (Float) objects[0]);\n                if (f == null) {\n                    initialAltitude = Float.valueOf(altitude);\n                }\n                f2 = initialAltitude;\n                float floatValue = f2 == null ? altitude : f2.floatValue();\n                value.put(&quot;pressure&quot;, objects[0]);\n                value.put(&quot;relativeAltitude&quot;, altitude - floatValue);\n                break;\n        }\n\n        return value;\n    }\n\n    public void pause() {\n\n        if (!isRecording) return;\n\n        stopTimer();\n        removeNotification();\n\n        for (final Sensor sensor : mSensorsAndSettings.keySet()) {\n\n            sensor.setListener(null);\n\n            if (sensor.mustRunOnUiThread()) {\n                sensor.stop(mContext);\n            } else {\n                new Thread(() -&gt; sensor.stop(mContext)).start();\n            }\n        }\n\n        mLog.getRecordTimes().endTime = System.currentTimeMillis() / 1e3d;\n        isRecording = false;\n    }\n\n\n    public void cancel() throws IOException {\n\n        if (isRecording) {\n            pause();\n        }\n        resetTimer();\n        mRecorderWriter.finish();\n        mRecorderWriter.removeFiles();\n        isInitialized = false;\n        isRecording = false;\n    }\n\n\n    public Log save(String title) throws IOException {\n        return save(title, null, null, null);\n    }\n\n    public Log save(String title, String user, String positionOrientation, String comment) throws IOException {\n\n        mRecorderWriter.writeReferences(mReferences);\n        mRecorderWriter.finish();\n\n        resetTimer();\n\n        // Set title to unknown if null and replace non word characters by underscore\n        if (title == null || title.isEmpty()) {\n            title = mContext.getString(R.string.record_finished_empty_filename);\n        }\n        String filename = title.replaceAll(&quot;\\\\W+&quot;, &quot;_&quot;);\n\n        mLog.setName(title);\n        mLog.setUser(user);\n        mLog.setComment(comment);\n        mLog.setPositionOrientation(positionOrientation);\n        mLog.setUncompressedSize(mRecorderWriter.getDataSize());\n\n\n        // Create Zip File\n        final Pair&lt;File, ZipCreationTask&gt; zipCreationPair = mRecorderWriter.createZipFile(filename, mLog);\n        final File zipFile = zipCreationPair.first;\n        final ZipCreationTask zipTask = zipCreationPair.second;\n\n        mLog.setZipCreationTask(zipTask);\n\n        zipTask.addListener(new ZipCreationTask.ZipCreationListener() {\n            @Override\n            public void onProgress(File currentFile, float ratio) {\n            }\n\n            @Override\n            public void onTaskFinished(File outputFile, long fileSize) {\n                // Remove files when recorder finished\n                mRecorderWriter.removeFiles();\n                zipTask.removeListener(this);\n            }\n        });\n\n        mLog.setZipFile(zipFile);\n\n        mLogsManager.addLog(mLog);\n\n        isInitialized = false;\n\n        return mLog;\n    }\n\n\n    public Log.RecordTimes getRecordTimes() {\n        return mLog.getRecordTimes();\n    }\n\n\n    public void addReference(double latitude, double longitude, Float level) {\n        double elapsedTime = System.currentTimeMillis() / 1e3d - mLog.getRecordTimes().startTime;\n        mReferences.add(new PositionReference(elapsedTime, latitude, longitude, level));\n    }\n\n    public void removeLastReference() {\n        mReferences.pollLast();\n    }\n\n\n    //&lt;editor-fold desc=&quot;DataSize&quot;&gt;\n    public long getDataSize() {\n        return mRecorderWriter.getDataSize();\n    }\n    //&lt;/editor-fold&gt;\n\n\n    //&lt;editor-fold desc=&quot;Timer&quot;&gt;\n    private long firstTime;\n    private long computeTime;\n\n    public long getCurrentTime() {\n        return computeTime + System.currentTimeMillis() - firstTime;\n    }\n\n    private void startTimer() {\n        firstTime = System.currentTimeMillis();\n    }\n\n    private void stopTimer() {\n        computeTime += System.currentTimeMillis() - firstTime;\n    }\n\n    private void resetTimer() {\n        computeTime = 0;\n    }\n    //&lt;/editor-fold&gt;\n\n\n    //&lt;editor-fold desc=&quot;Notification&quot;&gt;\n\n    private void createNotification() {\n        mContext.bindService(new Intent(mContext, KillNotificationsService.class),\n                mNotificationConnection, Context.BIND_AUTO_CREATE);\n    }\n\n    private void removeNotification() {\n        mContext.unbindService(mNotificationConnection);\n\n        NotificationManager mNotificationManager =\n                (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\n        mNotificationManager.cancel(NOTIFICATION_ID);\n    }\n\n\n    // http://stackoverflow.com/questions/12997800/cancel-notification-on-remove-application-from-multitask-panel\n    private ServiceConnection mNotificationConnection = new ServiceConnection() {\n        public void onServiceConnected(ComponentName className,\n                                       IBinder binder) {\n            ((KillNotificationsService.KillBinder) binder).service.startService(\n                    new Intent(mContext, KillNotificationsService.class));\n\n            Intent intent = new Intent(mContext, RecordActivity.class);\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\n            PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n            NotificationCompat.Builder builder =\n                    new NotificationCompat.Builder(mContext)\n                            .setSmallIcon(R.drawable.ic_notification)\n                            .setContentTitle(mContext.getString(R.string.app_name))\n                            .setContentText(mContext.getString(R.string.record_notification))\n                            .setContentIntent(pendingIntent);\n\n            Notification notification = builder.build();\n            notification.flags = Notification.FLAG_ONGOING_EVENT;\n\n            NotificationManager mNotificationManager =\n                    (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\n            mNotificationManager.notify(NOTIFICATION_ID, notification);\n        }\n\n        public void onServiceDisconnected(ComponentName className) {\n        }\n\n    };\n    //&lt;/editor-fold&gt;\n\n}\n</code></pre>\n"}],"owner":{"account_id":28993518,"reputation":1,"user_id":22208701,"display_name":"AHF"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689073423,"creation_date":1689070456,"question_id":76660902,"body_markdown":"i need to get the value in editTextText from ShowURL class to use in Recorder class to set the IP address for okHttp request\r\n\r\nthe ShowURL class is like this:\r\n\r\n```\r\npackage fr.inria.tyrex.senslogs.ui;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport org.w3c.dom.Text;\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Map;\r\n\r\nimport fr.inria.tyrex.senslogs.R;\r\nimport fr.inria.tyrex.senslogs.control.LogsManager;\r\nimport fr.inria.tyrex.senslogs.control.PreferencesManager;\r\nimport fr.inria.tyrex.senslogs.control.Recorder;\r\nimport fr.inria.tyrex.senslogs.control.SensorsManager;\r\nimport fr.inria.tyrex.senslogs.model.log.CalibrationLog;\r\nimport fr.inria.tyrex.senslogs.model.log.Log;\r\nimport fr.inria.tyrex.senslogs.model.sensors.Sensor;\r\n\r\npublic class ShowURL extends AppCompatActivity {\r\n\r\n    private LogsManager mLogsManager;\r\n    private PreferencesManager mPreferencesManager;\r\n    private Log mLog;\r\n    EditText MyURL;\r\n    public static String IP;\r\n\r\n    protected void onCreate(Bundle savedInstanceState){\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.url);\r\n        MyURL = findViewById(R.id.editTextText);\r\n\r\n    }\r\n\r\n    public void Click (View view) throws FileNotFoundException {\r\n        String URL = MyURL.getText().toString();\r\n\r\n        Recorder yourObject = new Recorder(this, mLogsManager, mPreferencesManager);\r\n        yourObject.setIp(URL);\r\n        yourObject.getIp();\r\n        android.util.Log.d(&quot;IP Value&quot;, &quot;IP: &quot; + yourObject.getIp());\r\n    }\r\n}\r\n\r\n```\r\n\r\nand the targeted class to get the value of EditText is:\r\n\r\n```\r\npackage fr.inria.tyrex.senslogs.control;\r\n\r\n\r\nimport static android.hardware.usb.UsbDevice.getDeviceId;\r\nimport static androidx.core.content.ContextCompat.getSystemService;\r\n\r\nimport android.app.Notification;\r\nimport android.app.NotificationManager;\r\nimport android.app.PendingIntent;\r\nimport android.content.ComponentName;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.ServiceConnection;\r\nimport android.hardware.SensorManager;\r\nimport android.hardware.SensorPrivacyManager;\r\nimport android.nfc.Tag;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.IBinder;\r\nimport android.os.AsyncTask;\r\nimport android.app.Activity;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.NotificationCompat;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.provider.Settings;\r\nimport android.telephony.TelephonyManager;\r\nimport android.util.Pair;\r\n\r\nimport com.google.gson.Gson;\r\n\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport java.io.OutputStream;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.LinkedList;\r\nimport java.util.Map;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\nimport fr.inria.tyrex.senslogs.model.sensors.AndroidSensor;\r\nimport fr.inria.tyrex.senslogs.ui.LogsActivity;\r\nimport fr.inria.tyrex.senslogs.ui.MainActivity;\r\nimport fr.inria.tyrex.senslogs.ui.ShowURL;\r\nimport okhttp3.MediaType;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\nimport fr.inria.tyrex.senslogs.Application;\r\nimport fr.inria.tyrex.senslogs.R;\r\nimport fr.inria.tyrex.senslogs.model.FieldsWritableObject;\r\nimport fr.inria.tyrex.senslogs.model.PositionReference;\r\nimport fr.inria.tyrex.senslogs.model.log.CalibrationLog;\r\nimport fr.inria.tyrex.senslogs.model.log.Log;\r\nimport fr.inria.tyrex.senslogs.model.sensors.CameraRecorder;\r\nimport fr.inria.tyrex.senslogs.model.sensors.Sensor;\r\nimport fr.inria.tyrex.senslogs.ui.RecordActivity;\r\nimport fr.inria.tyrex.senslogs.ui.utils.KillNotificationsService;\r\n\r\n/**\r\n * Handle timers and record sensors data\r\n */\r\npublic class Recorder {\r\n\r\n    public final static int NOTIFICATION_ID = 1;\r\n\r\n    private final Context mContext;\r\n\r\n    private static final String TAG = &quot;DeviceID&quot;;\r\n    private final LogsManager mLogsManager;\r\n    private final PreferencesManager mPreferencesManager;\r\n\r\n    private RecorderWriter mRecorderWriter;\r\n\r\n    private SensorManager mSensorManager;\r\n    private Log mLog;\r\n\r\n    private Map&lt;Sensor, Sensor.Settings&gt; mSensorsAndSettings;\r\n    private LinkedList&lt;PositionReference&gt; mReferences;\r\n\r\n\r\n    private boolean isRecording = false;\r\n    private boolean isInitialized = false;\r\n\r\n    private Float f, f2 = null;\r\n    private  Float initialAltitude = null;\r\n    private Bundle mExtraData; // Declare mExtraData variable\r\n\r\n    private String mIP = getIp();\r\n\r\n    public String getIp() {\r\n        return mIP;\r\n    }\r\n    public String setIp(String ip) {\r\n        mIP = ip;\r\n        return mIP;\r\n    }\r\n\r\n    public Recorder(Context context, LogsManager logsManager,\r\n                    PreferencesManager preferencesManager) {\r\n        mContext = context;\r\n        mLogsManager = logsManager;\r\n        mPreferencesManager = preferencesManager;\r\n        mReferences = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public boolean isRecording() {\r\n        return isRecording;\r\n    }\r\n\r\n    public boolean isRecording(Sensor sensor) {\r\n        return mSensorsAndSettings.containsKey(sensor);\r\n    }\r\n\r\n    private void init(@NonNull Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings,\r\n                      @Nullable CalibrationLog.Type calibration)\r\n            throws FileNotFoundException {\r\n\r\n        // Store sensors and their settings\r\n        mSensorsAndSettings = sensorsAndSettings;\r\n\r\n        mLog = calibration != null ?\r\n                CalibrationLog.create(calibration, mSensorsAndSettings.keySet()) :\r\n                new Log(mSensorsAndSettings.keySet());\r\n\r\n        mLog.init(mContext);\r\n        mReferences.clear();\r\n\r\n        // We need to create a new instance because writer is used during zip creation task\r\n        mRecorderWriter = new RecorderWriter(mContext);\r\n        mRecorderWriter.init(mLog);\r\n    }\r\n\r\n    public void play() throws FileNotFoundException {\r\n        play(mPreferencesManager.getSelectedSensors(), null);\r\n    }\r\n\r\n    public void play(Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings, CalibrationLog.Type calibration)\r\n            throws FileNotFoundException {\r\n\r\n        if (isRecording) return;\r\n\r\n\r\n        // Need to init some properties for the first play\r\n        if (!isInitialized) {\r\n            init(sensorsAndSettings, calibration);\r\n            isInitialized = true;\r\n        }\r\n\r\n\r\n        // Start and listen sensors\r\n        for (final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting : mSensorsAndSettings.entrySet()) {\r\n\r\n            final Sensor sensor = sensorAndSetting.getKey();\r\n            final Sensor.Settings settings = sensorAndSetting.getValue();\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; sensor instanceof CameraRecorder) {\r\n                mRecorderWriter.updateVideoPath();\r\n            }\r\n\r\n            if (sensor instanceof FieldsWritableObject) {\r\n                sensor.setListener(new Sensor.Listener() {\r\n                    @Override\r\n                    public void onNewValues(double diffTimeSystem, double diffTimeSensor, Object[] objects) {\r\n\r\n                        OkHttpClient client = new OkHttpClient();\r\n                        Map&lt;String, Object&gt; data = getMapValue(sensor.getType(), objects);\r\n\r\n                        // Define the request body\r\n                        MediaType mediaType = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\r\n                        String json = new Gson().toJson(data); // JSON payload\r\n                        RequestBody requestBody = RequestBody.create(mediaType, json);\r\n                        String IP = setIp(mIP);\r\n                        android.util.Log.d(&quot;CEK ISI&quot;, &quot;Isi mIP: &quot; + IP);\r\n                        Request request = new Request.Builder()\r\n                                .url(&quot;http://theAddress&quot;)\r\n                                .post(requestBody)\r\n                                .build();\r\n\r\n                        // Send the request asynchronously\r\n                        client.newCall(request).enqueue(new okhttp3.Callback() {\r\n                            @Override\r\n                            public void onResponse(okhttp3.Call call, Response response) throws IOException {\r\n                                // Handle the response\r\n                                if (response.isSuccessful()) {\r\n                                    // Request successful\r\n                                    final String responseBody = response.body().string();\r\n\r\n                                } else {\r\n                                    // Request unsuccessful\r\n                                    // Handle error case\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onFailure(okhttp3.Call call, IOException e) {\r\n                                // Handle network failure\r\n                            }\r\n                        });\r\n\r\n                        String Tag = new String();\r\n                        String Data = new String();\r\n                        String ID = new String();\r\n                        long timestamp = System.currentTimeMillis();\r\n                        android.util.Log.d(Data, &quot;Value :&quot; + new Gson().toJson(objects));\r\n                        android.util.Log.d(&quot;VALUE SENSOR TIPE&quot;, String.valueOf(sensor.getType()));\r\n                        android.util.Log.d(&quot;VALUE SENSOR&quot;, String.valueOf(objects));\r\n                        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\r\n                        android.util.Log.d(Tag, &quot;Device ID: &quot; + androidId);\r\n                        Date date = new Date(timestamp);\r\n                        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                        sdf.format(date);\r\n                        // Convert timestamp to a human-readable date and time format\r\n                        String formattedTime = String.valueOf(date);\r\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Current timestamp: &quot; + timestamp);\r\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Formatted time: &quot; + formattedTime);\r\n                        mRecorderWriter.asycWrite(sensor, diffTimeSystem, diffTimeSensor, objects);\r\n                        android.util.Log.d(&quot;Time Sys: &quot;,&quot;Time System: &quot; + diffTimeSystem);\r\n                        android.util.Log.d(&quot;Time Sen: &quot;,&quot;Time Sensor: &quot; + diffTimeSensor);\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Some sensors take a long time to start but have to be run on UI thread\r\n            if (sensor.mustRunOnUiThread()) {\r\n                sensor.start(mContext, settings, mLog.getRecordTimes());\r\n            } else {\r\n                new Thread(() -&gt; sensor.start(mContext, settings, mLog.getRecordTimes())).start();\r\n            }\r\n        }\r\n\r\n        createNotification();\r\n        startTimer();\r\n        isRecording = true;\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; getMapValue(int type, Object[] objects) {\r\n        Map&lt;String, Object&gt; value = new HashMap&lt;&gt;();\r\n        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\r\n        long timestamp = System.currentTimeMillis();\r\n        Date date = new Date(timestamp);\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        sdf.format(date);\r\n        // Convert timestamp to a human-readable date and time format\r\n        String formattedTime = String.valueOf(date);\r\n\r\n//        final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting = null;\r\n//        final Sensor sensor = sensorAndSetting.getKey();\r\n//        final Sensor.Settings settings = sensorAndSetting.getValue();\r\n\r\n//        String CT = toString();\r\n//        String FT = new String();\r\n\r\n\r\n        switch (type) {\r\n            case 1:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;accel x&quot;, objects[0]);\r\n                value.put(&quot;accel y&quot;, objects[1]);\r\n                value.put(&quot;accel z&quot;, objects[2]);\r\n                break;\r\n            case 35:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n//                value.put(&quot;Time Sensor&quot;, CT);\r\n//                value.put(&quot;Time System&quot;, FT);\r\n                value.put(&quot;uncal accel x&quot;, objects[0]);\r\n                value.put(&quot;uncal accel y&quot;, objects[1]);\r\n                value.put(&quot;uncal accel z&quot;, objects[2]);\r\n                break;\r\n            case 2:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;magneto x&quot;, objects[0]);\r\n                value.put(&quot;magneto y&quot;, objects[1]);\r\n                value.put(&quot;magneto z&quot;, objects[2]);\r\n                break;\r\n            case 14:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;uncal magneto x&quot;, objects[0]);\r\n                value.put(&quot;uncal magneto y&quot;, objects[1]);\r\n                value.put(&quot;uncal magneto z&quot;, objects[2]);\r\n                break;\r\n            case 4:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;gyro x&quot;, objects[0]);\r\n                value.put(&quot;gyro y&quot;, objects[1]);\r\n                value.put(&quot;gyro z&quot;, objects[2]);\r\n                break;\r\n            case 16:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;uncal gyro x&quot;, objects[0]);\r\n                value.put(&quot;uncal gyro y&quot;, objects[1]);\r\n                value.put(&quot;uncal gyro z&quot;, objects[2]);\r\n                break;\r\n            case 9:\r\n            case 10:\r\n            case 11:\r\n                float[] fArr = new float[4];\r\n                float[] fArr2 = new float[9];\r\n                float[] fArr3 = new float[3];\r\n                SensorManager.getQuaternionFromVector(fArr, (float[]) objects[0]);\r\n                SensorManager.getRotationMatrixFromVector(fArr2, (float[]) objects[0]);\r\n                SensorManager.getOrientation(fArr2, fArr3);\r\n                value.put(&quot;yaw&quot;, fArr3[0]);\r\n                value.put(&quot;pitch&quot;, fArr3[1]);\r\n                value.put(&quot;roll&quot;, fArr3[2]);\r\n                value.put(&quot;qw&quot;, fArr[0]);\r\n                value.put(&quot;qx&quot;, fArr[1]);\r\n                value.put(&quot;qy&quot;, fArr[2]);\r\n                value.put(&quot;qz&quot;, fArr[3]);\r\n                break;\r\n            case 5:\r\n                value.put(&quot;lux&quot;, objects[0]);\r\n                break;\r\n            case 768:\r\n                value.put(&quot;Device ID&quot;, androidId);\r\n                value.put(&quot;Current Timestamp&quot;, timestamp);\r\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\r\n                value.put(&quot;GPS Latitude&quot;, objects[0]);\r\n                value.put(&quot;GPS Longitude&quot;, objects[1]);\r\n                value.put(&quot;GPS Altitude&quot;, objects[2]);\r\n                value.put(&quot;GPS Bearing&quot;, objects[3]);\r\n                value.put(&quot;GPS Accuracy&quot;, objects[4]);\r\n                value.put(&quot;GPS Speed&quot;, objects[5]);\r\n                break;\r\n            case 6:\r\n                float altitude = SensorManager.getAltitude(1013.25f, (Float) objects[0]);\r\n                if (f == null) {\r\n                    initialAltitude = Float.valueOf(altitude);\r\n                }\r\n                f2 = initialAltitude;\r\n                float floatValue = f2 == null ? altitude : f2.floatValue();\r\n                value.put(&quot;pressure&quot;, objects[0]);\r\n                value.put(&quot;relativeAltitude&quot;, altitude - floatValue);\r\n                break;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    public void pause() {\r\n\r\n        if (!isRecording) return;\r\n\r\n        stopTimer();\r\n        removeNotification();\r\n\r\n        for (final Sensor sensor : mSensorsAndSettings.keySet()) {\r\n\r\n            sensor.setListener(null);\r\n\r\n            if (sensor.mustRunOnUiThread()) {\r\n                sensor.stop(mContext);\r\n            } else {\r\n                new Thread(() -&gt; sensor.stop(mContext)).start();\r\n            }\r\n        }\r\n\r\n        mLog.getRecordTimes().endTime = System.currentTimeMillis() / 1e3d;\r\n        isRecording = false;\r\n    }\r\n\r\n\r\n    public void cancel() throws IOException {\r\n\r\n        if (isRecording) {\r\n            pause();\r\n        }\r\n        resetTimer();\r\n        mRecorderWriter.finish();\r\n        mRecorderWriter.removeFiles();\r\n        isInitialized = false;\r\n        isRecording = false;\r\n    }\r\n\r\n\r\n    public Log save(String title) throws IOException {\r\n        return save(title, null, null, null);\r\n    }\r\n\r\n    public Log save(String title, String user, String positionOrientation, String comment) throws IOException {\r\n\r\n        mRecorderWriter.writeReferences(mReferences);\r\n        mRecorderWriter.finish();\r\n\r\n        resetTimer();\r\n\r\n        // Set title to unknown if null and replace non word characters by underscore\r\n        if (title == null || title.isEmpty()) {\r\n            title = mContext.getString(R.string.record_finished_empty_filename);\r\n        }\r\n        String filename = title.replaceAll(&quot;\\\\W+&quot;, &quot;_&quot;);\r\n\r\n        mLog.setName(title);\r\n        mLog.setUser(user);\r\n        mLog.setComment(comment);\r\n        mLog.setPositionOrientation(positionOrientation);\r\n        mLog.setUncompressedSize(mRecorderWriter.getDataSize());\r\n\r\n\r\n        // Create Zip File\r\n        final Pair&lt;File, ZipCreationTask&gt; zipCreationPair = mRecorderWriter.createZipFile(filename, mLog);\r\n        final File zipFile = zipCreationPair.first;\r\n        final ZipCreationTask zipTask = zipCreationPair.second;\r\n\r\n        mLog.setZipCreationTask(zipTask);\r\n\r\n        zipTask.addListener(new ZipCreationTask.ZipCreationListener() {\r\n            @Override\r\n            public void onProgress(File currentFile, float ratio) {\r\n            }\r\n\r\n            @Override\r\n            public void onTaskFinished(File outputFile, long fileSize) {\r\n                // Remove files when recorder finished\r\n                mRecorderWriter.removeFiles();\r\n                zipTask.removeListener(this);\r\n            }\r\n        });\r\n\r\n        mLog.setZipFile(zipFile);\r\n\r\n        mLogsManager.addLog(mLog);\r\n\r\n        isInitialized = false;\r\n\r\n        return mLog;\r\n    }\r\n\r\n\r\n    public Log.RecordTimes getRecordTimes() {\r\n        return mLog.getRecordTimes();\r\n    }\r\n\r\n\r\n    public void addReference(double latitude, double longitude, Float level) {\r\n        double elapsedTime = System.currentTimeMillis() / 1e3d - mLog.getRecordTimes().startTime;\r\n        mReferences.add(new PositionReference(elapsedTime, latitude, longitude, level));\r\n    }\r\n\r\n    public void removeLastReference() {\r\n        mReferences.pollLast();\r\n    }\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;DataSize&quot;&gt;\r\n    public long getDataSize() {\r\n        return mRecorderWriter.getDataSize();\r\n    }\r\n    //&lt;/editor-fold&gt;\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;Timer&quot;&gt;\r\n    private long firstTime;\r\n    private long computeTime;\r\n\r\n    public long getCurrentTime() {\r\n        return computeTime + System.currentTimeMillis() - firstTime;\r\n    }\r\n\r\n    private void startTimer() {\r\n        firstTime = System.currentTimeMillis();\r\n    }\r\n\r\n    private void stopTimer() {\r\n        computeTime += System.currentTimeMillis() - firstTime;\r\n    }\r\n\r\n    private void resetTimer() {\r\n        computeTime = 0;\r\n    }\r\n    //&lt;/editor-fold&gt;\r\n\r\n\r\n    //&lt;editor-fold desc=&quot;Notification&quot;&gt;\r\n\r\n    private void createNotification() {\r\n        mContext.bindService(new Intent(mContext, KillNotificationsService.class),\r\n                mNotificationConnection, Context.BIND_AUTO_CREATE);\r\n    }\r\n\r\n    private void removeNotification() {\r\n        mContext.unbindService(mNotificationConnection);\r\n\r\n        NotificationManager mNotificationManager =\r\n                (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        mNotificationManager.cancel(NOTIFICATION_ID);\r\n    }\r\n\r\n\r\n    // http://stackoverflow.com/questions/12997800/cancel-notification-on-remove-application-from-multitask-panel\r\n    private ServiceConnection mNotificationConnection = new ServiceConnection() {\r\n        public void onServiceConnected(ComponentName className,\r\n                                       IBinder binder) {\r\n            ((KillNotificationsService.KillBinder) binder).service.startService(\r\n                    new Intent(mContext, KillNotificationsService.class));\r\n\r\n            Intent intent = new Intent(mContext, RecordActivity.class);\r\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n            PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n            NotificationCompat.Builder builder =\r\n                    new NotificationCompat.Builder(mContext)\r\n                            .setSmallIcon(R.drawable.ic_notification)\r\n                            .setContentTitle(mContext.getString(R.string.app_name))\r\n                            .setContentText(mContext.getString(R.string.record_notification))\r\n                            .setContentIntent(pendingIntent);\r\n\r\n            Notification notification = builder.build();\r\n            notification.flags = Notification.FLAG_ONGOING_EVENT;\r\n\r\n            NotificationManager mNotificationManager =\r\n                    (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\r\n            mNotificationManager.notify(NOTIFICATION_ID, notification);\r\n        }\r\n\r\n        public void onServiceDisconnected(ComponentName className) {\r\n        }\r\n\r\n    };\r\n    //&lt;/editor-fold&gt;\r\n\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\ni need to use the editTextText value to set the IP address in the Recorder class to proceed okHttp request, the code above show no error but when i check logcat to see the value of mIP it show that is null","title":"How to reference an Edit Text value from Activity class to Non-Activity class","body":"<p>i need to get the value in editTextText from ShowURL class to use in Recorder class to set the IP address for okHttp request</p>\n<p>the ShowURL class is like this:</p>\n<pre><code>package fr.inria.tyrex.senslogs.ui;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport org.w3c.dom.Text;\n\nimport java.io.FileNotFoundException;\nimport java.util.Map;\n\nimport fr.inria.tyrex.senslogs.R;\nimport fr.inria.tyrex.senslogs.control.LogsManager;\nimport fr.inria.tyrex.senslogs.control.PreferencesManager;\nimport fr.inria.tyrex.senslogs.control.Recorder;\nimport fr.inria.tyrex.senslogs.control.SensorsManager;\nimport fr.inria.tyrex.senslogs.model.log.CalibrationLog;\nimport fr.inria.tyrex.senslogs.model.log.Log;\nimport fr.inria.tyrex.senslogs.model.sensors.Sensor;\n\npublic class ShowURL extends AppCompatActivity {\n\n    private LogsManager mLogsManager;\n    private PreferencesManager mPreferencesManager;\n    private Log mLog;\n    EditText MyURL;\n    public static String IP;\n\n    protected void onCreate(Bundle savedInstanceState){\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.url);\n        MyURL = findViewById(R.id.editTextText);\n\n    }\n\n    public void Click (View view) throws FileNotFoundException {\n        String URL = MyURL.getText().toString();\n\n        Recorder yourObject = new Recorder(this, mLogsManager, mPreferencesManager);\n        yourObject.setIp(URL);\n        yourObject.getIp();\n        android.util.Log.d(&quot;IP Value&quot;, &quot;IP: &quot; + yourObject.getIp());\n    }\n}\n\n</code></pre>\n<p>and the targeted class to get the value of EditText is:</p>\n<pre><code>package fr.inria.tyrex.senslogs.control;\n\n\nimport static android.hardware.usb.UsbDevice.getDeviceId;\nimport static androidx.core.content.ContextCompat.getSystemService;\n\nimport android.app.Notification;\nimport android.app.NotificationManager;\nimport android.app.PendingIntent;\nimport android.content.ComponentName;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.ServiceConnection;\nimport android.hardware.SensorManager;\nimport android.hardware.SensorPrivacyManager;\nimport android.nfc.Tag;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.IBinder;\nimport android.os.AsyncTask;\nimport android.app.Activity;\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.core.app.NotificationCompat;\nimport androidx.fragment.app.Fragment;\n\nimport android.provider.Settings;\nimport android.telephony.TelephonyManager;\nimport android.util.Pair;\n\nimport com.google.gson.Gson;\n\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.LinkedList;\nimport java.util.Map;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\nimport fr.inria.tyrex.senslogs.model.sensors.AndroidSensor;\nimport fr.inria.tyrex.senslogs.ui.LogsActivity;\nimport fr.inria.tyrex.senslogs.ui.MainActivity;\nimport fr.inria.tyrex.senslogs.ui.ShowURL;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport fr.inria.tyrex.senslogs.Application;\nimport fr.inria.tyrex.senslogs.R;\nimport fr.inria.tyrex.senslogs.model.FieldsWritableObject;\nimport fr.inria.tyrex.senslogs.model.PositionReference;\nimport fr.inria.tyrex.senslogs.model.log.CalibrationLog;\nimport fr.inria.tyrex.senslogs.model.log.Log;\nimport fr.inria.tyrex.senslogs.model.sensors.CameraRecorder;\nimport fr.inria.tyrex.senslogs.model.sensors.Sensor;\nimport fr.inria.tyrex.senslogs.ui.RecordActivity;\nimport fr.inria.tyrex.senslogs.ui.utils.KillNotificationsService;\n\n/**\n * Handle timers and record sensors data\n */\npublic class Recorder {\n\n    public final static int NOTIFICATION_ID = 1;\n\n    private final Context mContext;\n\n    private static final String TAG = &quot;DeviceID&quot;;\n    private final LogsManager mLogsManager;\n    private final PreferencesManager mPreferencesManager;\n\n    private RecorderWriter mRecorderWriter;\n\n    private SensorManager mSensorManager;\n    private Log mLog;\n\n    private Map&lt;Sensor, Sensor.Settings&gt; mSensorsAndSettings;\n    private LinkedList&lt;PositionReference&gt; mReferences;\n\n\n    private boolean isRecording = false;\n    private boolean isInitialized = false;\n\n    private Float f, f2 = null;\n    private  Float initialAltitude = null;\n    private Bundle mExtraData; // Declare mExtraData variable\n\n    private String mIP = getIp();\n\n    public String getIp() {\n        return mIP;\n    }\n    public String setIp(String ip) {\n        mIP = ip;\n        return mIP;\n    }\n\n    public Recorder(Context context, LogsManager logsManager,\n                    PreferencesManager preferencesManager) {\n        mContext = context;\n        mLogsManager = logsManager;\n        mPreferencesManager = preferencesManager;\n        mReferences = new LinkedList&lt;&gt;();\n    }\n\n    public boolean isRecording() {\n        return isRecording;\n    }\n\n    public boolean isRecording(Sensor sensor) {\n        return mSensorsAndSettings.containsKey(sensor);\n    }\n\n    private void init(@NonNull Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings,\n                      @Nullable CalibrationLog.Type calibration)\n            throws FileNotFoundException {\n\n        // Store sensors and their settings\n        mSensorsAndSettings = sensorsAndSettings;\n\n        mLog = calibration != null ?\n                CalibrationLog.create(calibration, mSensorsAndSettings.keySet()) :\n                new Log(mSensorsAndSettings.keySet());\n\n        mLog.init(mContext);\n        mReferences.clear();\n\n        // We need to create a new instance because writer is used during zip creation task\n        mRecorderWriter = new RecorderWriter(mContext);\n        mRecorderWriter.init(mLog);\n    }\n\n    public void play() throws FileNotFoundException {\n        play(mPreferencesManager.getSelectedSensors(), null);\n    }\n\n    public void play(Map&lt;Sensor, Sensor.Settings&gt; sensorsAndSettings, CalibrationLog.Type calibration)\n            throws FileNotFoundException {\n\n        if (isRecording) return;\n\n\n        // Need to init some properties for the first play\n        if (!isInitialized) {\n            init(sensorsAndSettings, calibration);\n            isInitialized = true;\n        }\n\n\n        // Start and listen sensors\n        for (final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting : mSensorsAndSettings.entrySet()) {\n\n            final Sensor sensor = sensorAndSetting.getKey();\n            final Sensor.Settings settings = sensorAndSetting.getValue();\n\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; sensor instanceof CameraRecorder) {\n                mRecorderWriter.updateVideoPath();\n            }\n\n            if (sensor instanceof FieldsWritableObject) {\n                sensor.setListener(new Sensor.Listener() {\n                    @Override\n                    public void onNewValues(double diffTimeSystem, double diffTimeSensor, Object[] objects) {\n\n                        OkHttpClient client = new OkHttpClient();\n                        Map&lt;String, Object&gt; data = getMapValue(sensor.getType(), objects);\n\n                        // Define the request body\n                        MediaType mediaType = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\n                        String json = new Gson().toJson(data); // JSON payload\n                        RequestBody requestBody = RequestBody.create(mediaType, json);\n                        String IP = setIp(mIP);\n                        android.util.Log.d(&quot;CEK ISI&quot;, &quot;Isi mIP: &quot; + IP);\n                        Request request = new Request.Builder()\n                                .url(&quot;http://theAddress&quot;)\n                                .post(requestBody)\n                                .build();\n\n                        // Send the request asynchronously\n                        client.newCall(request).enqueue(new okhttp3.Callback() {\n                            @Override\n                            public void onResponse(okhttp3.Call call, Response response) throws IOException {\n                                // Handle the response\n                                if (response.isSuccessful()) {\n                                    // Request successful\n                                    final String responseBody = response.body().string();\n\n                                } else {\n                                    // Request unsuccessful\n                                    // Handle error case\n                                }\n                            }\n\n                            @Override\n                            public void onFailure(okhttp3.Call call, IOException e) {\n                                // Handle network failure\n                            }\n                        });\n\n                        String Tag = new String();\n                        String Data = new String();\n                        String ID = new String();\n                        long timestamp = System.currentTimeMillis();\n                        android.util.Log.d(Data, &quot;Value :&quot; + new Gson().toJson(objects));\n                        android.util.Log.d(&quot;VALUE SENSOR TIPE&quot;, String.valueOf(sensor.getType()));\n                        android.util.Log.d(&quot;VALUE SENSOR&quot;, String.valueOf(objects));\n                        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\n                        android.util.Log.d(Tag, &quot;Device ID: &quot; + androidId);\n                        Date date = new Date(timestamp);\n                        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n                        sdf.format(date);\n                        // Convert timestamp to a human-readable date and time format\n                        String formattedTime = String.valueOf(date);\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Current timestamp: &quot; + timestamp);\n                        android.util.Log.d(&quot;Timestamp&quot;, &quot;Formatted time: &quot; + formattedTime);\n                        mRecorderWriter.asycWrite(sensor, diffTimeSystem, diffTimeSensor, objects);\n                        android.util.Log.d(&quot;Time Sys: &quot;,&quot;Time System: &quot; + diffTimeSystem);\n                        android.util.Log.d(&quot;Time Sen: &quot;,&quot;Time Sensor: &quot; + diffTimeSensor);\n\n                    }\n                });\n            }\n\n            // Some sensors take a long time to start but have to be run on UI thread\n            if (sensor.mustRunOnUiThread()) {\n                sensor.start(mContext, settings, mLog.getRecordTimes());\n            } else {\n                new Thread(() -&gt; sensor.start(mContext, settings, mLog.getRecordTimes())).start();\n            }\n        }\n\n        createNotification();\n        startTimer();\n        isRecording = true;\n    }\n\n    private Map&lt;String, Object&gt; getMapValue(int type, Object[] objects) {\n        Map&lt;String, Object&gt; value = new HashMap&lt;&gt;();\n        String androidId = Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);\n        long timestamp = System.currentTimeMillis();\n        Date date = new Date(timestamp);\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        sdf.format(date);\n        // Convert timestamp to a human-readable date and time format\n        String formattedTime = String.valueOf(date);\n\n//        final Map.Entry&lt;Sensor, Sensor.Settings&gt; sensorAndSetting = null;\n//        final Sensor sensor = sensorAndSetting.getKey();\n//        final Sensor.Settings settings = sensorAndSetting.getValue();\n\n//        String CT = toString();\n//        String FT = new String();\n\n\n        switch (type) {\n            case 1:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;accel x&quot;, objects[0]);\n                value.put(&quot;accel y&quot;, objects[1]);\n                value.put(&quot;accel z&quot;, objects[2]);\n                break;\n            case 35:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n//                value.put(&quot;Time Sensor&quot;, CT);\n//                value.put(&quot;Time System&quot;, FT);\n                value.put(&quot;uncal accel x&quot;, objects[0]);\n                value.put(&quot;uncal accel y&quot;, objects[1]);\n                value.put(&quot;uncal accel z&quot;, objects[2]);\n                break;\n            case 2:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;magneto x&quot;, objects[0]);\n                value.put(&quot;magneto y&quot;, objects[1]);\n                value.put(&quot;magneto z&quot;, objects[2]);\n                break;\n            case 14:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;uncal magneto x&quot;, objects[0]);\n                value.put(&quot;uncal magneto y&quot;, objects[1]);\n                value.put(&quot;uncal magneto z&quot;, objects[2]);\n                break;\n            case 4:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;gyro x&quot;, objects[0]);\n                value.put(&quot;gyro y&quot;, objects[1]);\n                value.put(&quot;gyro z&quot;, objects[2]);\n                break;\n            case 16:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;uncal gyro x&quot;, objects[0]);\n                value.put(&quot;uncal gyro y&quot;, objects[1]);\n                value.put(&quot;uncal gyro z&quot;, objects[2]);\n                break;\n            case 9:\n            case 10:\n            case 11:\n                float[] fArr = new float[4];\n                float[] fArr2 = new float[9];\n                float[] fArr3 = new float[3];\n                SensorManager.getQuaternionFromVector(fArr, (float[]) objects[0]);\n                SensorManager.getRotationMatrixFromVector(fArr2, (float[]) objects[0]);\n                SensorManager.getOrientation(fArr2, fArr3);\n                value.put(&quot;yaw&quot;, fArr3[0]);\n                value.put(&quot;pitch&quot;, fArr3[1]);\n                value.put(&quot;roll&quot;, fArr3[2]);\n                value.put(&quot;qw&quot;, fArr[0]);\n                value.put(&quot;qx&quot;, fArr[1]);\n                value.put(&quot;qy&quot;, fArr[2]);\n                value.put(&quot;qz&quot;, fArr[3]);\n                break;\n            case 5:\n                value.put(&quot;lux&quot;, objects[0]);\n                break;\n            case 768:\n                value.put(&quot;Device ID&quot;, androidId);\n                value.put(&quot;Current Timestamp&quot;, timestamp);\n                value.put(&quot;Formatted Timestamp&quot;, formattedTime);\n                value.put(&quot;GPS Latitude&quot;, objects[0]);\n                value.put(&quot;GPS Longitude&quot;, objects[1]);\n                value.put(&quot;GPS Altitude&quot;, objects[2]);\n                value.put(&quot;GPS Bearing&quot;, objects[3]);\n                value.put(&quot;GPS Accuracy&quot;, objects[4]);\n                value.put(&quot;GPS Speed&quot;, objects[5]);\n                break;\n            case 6:\n                float altitude = SensorManager.getAltitude(1013.25f, (Float) objects[0]);\n                if (f == null) {\n                    initialAltitude = Float.valueOf(altitude);\n                }\n                f2 = initialAltitude;\n                float floatValue = f2 == null ? altitude : f2.floatValue();\n                value.put(&quot;pressure&quot;, objects[0]);\n                value.put(&quot;relativeAltitude&quot;, altitude - floatValue);\n                break;\n        }\n\n        return value;\n    }\n\n    public void pause() {\n\n        if (!isRecording) return;\n\n        stopTimer();\n        removeNotification();\n\n        for (final Sensor sensor : mSensorsAndSettings.keySet()) {\n\n            sensor.setListener(null);\n\n            if (sensor.mustRunOnUiThread()) {\n                sensor.stop(mContext);\n            } else {\n                new Thread(() -&gt; sensor.stop(mContext)).start();\n            }\n        }\n\n        mLog.getRecordTimes().endTime = System.currentTimeMillis() / 1e3d;\n        isRecording = false;\n    }\n\n\n    public void cancel() throws IOException {\n\n        if (isRecording) {\n            pause();\n        }\n        resetTimer();\n        mRecorderWriter.finish();\n        mRecorderWriter.removeFiles();\n        isInitialized = false;\n        isRecording = false;\n    }\n\n\n    public Log save(String title) throws IOException {\n        return save(title, null, null, null);\n    }\n\n    public Log save(String title, String user, String positionOrientation, String comment) throws IOException {\n\n        mRecorderWriter.writeReferences(mReferences);\n        mRecorderWriter.finish();\n\n        resetTimer();\n\n        // Set title to unknown if null and replace non word characters by underscore\n        if (title == null || title.isEmpty()) {\n            title = mContext.getString(R.string.record_finished_empty_filename);\n        }\n        String filename = title.replaceAll(&quot;\\\\W+&quot;, &quot;_&quot;);\n\n        mLog.setName(title);\n        mLog.setUser(user);\n        mLog.setComment(comment);\n        mLog.setPositionOrientation(positionOrientation);\n        mLog.setUncompressedSize(mRecorderWriter.getDataSize());\n\n\n        // Create Zip File\n        final Pair&lt;File, ZipCreationTask&gt; zipCreationPair = mRecorderWriter.createZipFile(filename, mLog);\n        final File zipFile = zipCreationPair.first;\n        final ZipCreationTask zipTask = zipCreationPair.second;\n\n        mLog.setZipCreationTask(zipTask);\n\n        zipTask.addListener(new ZipCreationTask.ZipCreationListener() {\n            @Override\n            public void onProgress(File currentFile, float ratio) {\n            }\n\n            @Override\n            public void onTaskFinished(File outputFile, long fileSize) {\n                // Remove files when recorder finished\n                mRecorderWriter.removeFiles();\n                zipTask.removeListener(this);\n            }\n        });\n\n        mLog.setZipFile(zipFile);\n\n        mLogsManager.addLog(mLog);\n\n        isInitialized = false;\n\n        return mLog;\n    }\n\n\n    public Log.RecordTimes getRecordTimes() {\n        return mLog.getRecordTimes();\n    }\n\n\n    public void addReference(double latitude, double longitude, Float level) {\n        double elapsedTime = System.currentTimeMillis() / 1e3d - mLog.getRecordTimes().startTime;\n        mReferences.add(new PositionReference(elapsedTime, latitude, longitude, level));\n    }\n\n    public void removeLastReference() {\n        mReferences.pollLast();\n    }\n\n\n    //&lt;editor-fold desc=&quot;DataSize&quot;&gt;\n    public long getDataSize() {\n        return mRecorderWriter.getDataSize();\n    }\n    //&lt;/editor-fold&gt;\n\n\n    //&lt;editor-fold desc=&quot;Timer&quot;&gt;\n    private long firstTime;\n    private long computeTime;\n\n    public long getCurrentTime() {\n        return computeTime + System.currentTimeMillis() - firstTime;\n    }\n\n    private void startTimer() {\n        firstTime = System.currentTimeMillis();\n    }\n\n    private void stopTimer() {\n        computeTime += System.currentTimeMillis() - firstTime;\n    }\n\n    private void resetTimer() {\n        computeTime = 0;\n    }\n    //&lt;/editor-fold&gt;\n\n\n    //&lt;editor-fold desc=&quot;Notification&quot;&gt;\n\n    private void createNotification() {\n        mContext.bindService(new Intent(mContext, KillNotificationsService.class),\n                mNotificationConnection, Context.BIND_AUTO_CREATE);\n    }\n\n    private void removeNotification() {\n        mContext.unbindService(mNotificationConnection);\n\n        NotificationManager mNotificationManager =\n                (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\n        mNotificationManager.cancel(NOTIFICATION_ID);\n    }\n\n\n    // http://stackoverflow.com/questions/12997800/cancel-notification-on-remove-application-from-multitask-panel\n    private ServiceConnection mNotificationConnection = new ServiceConnection() {\n        public void onServiceConnected(ComponentName className,\n                                       IBinder binder) {\n            ((KillNotificationsService.KillBinder) binder).service.startService(\n                    new Intent(mContext, KillNotificationsService.class));\n\n            Intent intent = new Intent(mContext, RecordActivity.class);\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\n            PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n            NotificationCompat.Builder builder =\n                    new NotificationCompat.Builder(mContext)\n                            .setSmallIcon(R.drawable.ic_notification)\n                            .setContentTitle(mContext.getString(R.string.app_name))\n                            .setContentText(mContext.getString(R.string.record_notification))\n                            .setContentIntent(pendingIntent);\n\n            Notification notification = builder.build();\n            notification.flags = Notification.FLAG_ONGOING_EVENT;\n\n            NotificationManager mNotificationManager =\n                    (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);\n            mNotificationManager.notify(NOTIFICATION_ID, notification);\n        }\n\n        public void onServiceDisconnected(ComponentName className) {\n        }\n\n    };\n    //&lt;/editor-fold&gt;\n\n\n}\n\n\n</code></pre>\n<p>i need to use the editTextText value to set the IP address in the Recorder class to proceed okHttp request, the code above show no error but when i check logcat to see the value of mIP it show that is null</p>\n"},{"tags":["java","spring","postgresql","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15049628,"reputation":78,"user_id":10861666,"display_name":"David"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1568278247,"creation_date":1568278152,"answer_id":57903053,"question_id":57900944,"body_markdown":"Try it:\r\n\r\nService class:\r\n\r\n    Long currentTime = new Date().getTime();\r\n\r\nRepository:\r\n\r\n    @Query(&quot;SELECT lt FROM LiveTokens lt WHERE lt.token.expireTime &lt;= :currentTime&quot;)\r\n\r\n    List&lt;LiveTokens&gt; findExpiredLiveTokens(@Param(&quot;currentTime&quot;) long currentTime)\r\n\r\n","title":"How to query with Spring JPA on jsonb columns?","body":"<p>Try it:</p>\n\n<p>Service class:</p>\n\n<pre><code>Long currentTime = new Date().getTime();\n</code></pre>\n\n<p>Repository:</p>\n\n<pre><code>@Query(\"SELECT lt FROM LiveTokens lt WHERE lt.token.expireTime &lt;= :currentTime\")\n\nList&lt;LiveTokens&gt; findExpiredLiveTokens(@Param(\"currentTime\") long currentTime)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1610284422,"creation_date":1568438698,"answer_id":57932699,"question_id":57900944,"body_markdown":"SQL JSON functions\r\n------------------\r\n\r\nIf you want to call a SQL function that processes the JSON column, then you just need to make sure you [register the function](https://vladmihalcea.com/hibernate-sql-function-jpql-criteria-api-query/) with Hibernate prior to using it. \r\n\r\nJSON operators\r\n--------------\r\n\r\nFor JSON operators, like the PostgreSQL ones (e.g., `-&gt;&gt;`), the only option you have is to use a native SQL query. JPQL or HQL don&#39;t support database-specific JSON operators.","title":"How to query with Spring JPA on jsonb columns?","body":"<h2>SQL JSON functions</h2>\n<p>If you want to call a SQL function that processes the JSON column, then you just need to make sure you <a href=\"https://vladmihalcea.com/hibernate-sql-function-jpql-criteria-api-query/\" rel=\"noreferrer\">register the function</a> with Hibernate prior to using it.</p>\n<h2>JSON operators</h2>\n<p>For JSON operators, like the PostgreSQL ones (e.g., <code>-&gt;&gt;</code>), the only option you have is to use a native SQL query. JPQL or HQL don't support database-specific JSON operators.</p>\n"},{"comments":[{"owner":{"account_id":4794280,"reputation":1654,"user_id":3872648,"accept_rate":47,"display_name":"Morteza Malvandi"},"score":0,"creation_date":1568520165,"post_id":57934102,"comment_id":102297060,"body_markdown":"this error `Could not resolve requested type for CAST : int8[select lt from ...]`","body":"this error <code>Could not resolve requested type for CAST : int8[select lt from ...]</code>"},{"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"score":0,"creation_date":1568713999,"post_id":57934102,"comment_id":102353486,"body_markdown":"The error you get is about the `INT8` type the `CAST` uses. You may replace the INT8 with a different type. You may also try LongType or Long.","body":"The error you get is about the <code>INT8</code> type the <code>CAST</code> uses. You may replace the INT8 with a different type. You may also try LongType or Long."}],"tags":[],"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568713656,"creation_date":1568452733,"answer_id":57934102,"question_id":57900944,"body_markdown":"Using EclipseLink and spring data jpa, if your data in db is something like: {&quot;expireTime&quot;:102020230201, &quot;accessToken&quot;:&quot;SOMETHING&quot; }, my first question is why to use long numbers for your dates instead of timestamps (ex &#39;2019-09-14 12:05:00&#39;). If you use timestamps there are also options to manage timezones (either from postgresql or from you source code).  \r\nRegarding your issue you may use the [FUNC JPQL keyword of EclipseLink](https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_func.htm) (Hibernate may have something similar) in order to run a database specific function. In the example below I use `FUNC(&#39;jsonb_extract_path_text&#39;, lt.token, &#39;expireTime&#39;)` to get the values of the json for token.expireTime.  \r\nPostgreSql method `jsonb_extract_path_text` returns text, thus you cannot do a less that condition, so I cast the output of the function using [JPQL CAST keyword](https://stackoverflow.com/questions/46188918/casting-integer-to-string-in-jpql) with `(CAST -data- TO -type-)`.\r\n  \r\n\r\n    @Repository\r\n    public interface MyRepository extends JpaRepository&lt;LiveTokens, Integer&gt; {\r\n    \r\n        @Query(value = &quot;SELECT lt FROM LiveTokens lt WHERE CAST(FUNC(&#39;jsonb_extract_path_text&#39;, lt.token, &#39;expireTime&#39;) AS LongType) &lt; :expirirationThreshold&quot;)\r\n        List&lt;LiveTokens&gt; findByExpireTime(@Param(&quot;expirirationThreshold&quot;) Long expirirationThreshold);\r\n    }\r\n  \r\nAgain, this is not tested.","title":"How to query with Spring JPA on jsonb columns?","body":"<p>Using EclipseLink and spring data jpa, if your data in db is something like: {\"expireTime\":102020230201, \"accessToken\":\"SOMETHING\" }, my first question is why to use long numbers for your dates instead of timestamps (ex '2019-09-14 12:05:00'). If you use timestamps there are also options to manage timezones (either from postgresql or from you source code).<br>\nRegarding your issue you may use the <a href=\"https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_func.htm\" rel=\"nofollow noreferrer\">FUNC JPQL keyword of EclipseLink</a> (Hibernate may have something similar) in order to run a database specific function. In the example below I use <code>FUNC('jsonb_extract_path_text', lt.token, 'expireTime')</code> to get the values of the json for token.expireTime.<br>\nPostgreSql method <code>jsonb_extract_path_text</code> returns text, thus you cannot do a less that condition, so I cast the output of the function using <a href=\"https://stackoverflow.com/questions/46188918/casting-integer-to-string-in-jpql\">JPQL CAST keyword</a> with <code>(CAST -data- TO -type-)</code>.</p>\n\n<pre><code>@Repository\npublic interface MyRepository extends JpaRepository&lt;LiveTokens, Integer&gt; {\n\n    @Query(value = \"SELECT lt FROM LiveTokens lt WHERE CAST(FUNC('jsonb_extract_path_text', lt.token, 'expireTime') AS LongType) &lt; :expirirationThreshold\")\n    List&lt;LiveTokens&gt; findByExpireTime(@Param(\"expirirationThreshold\") Long expirirationThreshold);\n}\n</code></pre>\n\n<p>Again, this is not tested.</p>\n"},{"tags":[],"owner":{"account_id":183892,"reputation":1036,"user_id":419581,"accept_rate":100,"display_name":"r&#233;my"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689073223,"creation_date":1615801762,"answer_id":66635663,"question_id":57900944,"body_markdown":"This is how a native query using Postgres JSON query operators would look like, incorporating your example:\r\n\r\n    @Query(value=&quot;SELECT t.* FROM LiveTokens t WHERE CAST(t.token -&gt;&gt; &#39;expireTime&#39; AS LONG) &lt; now()&quot;, native=true)\r\n\r\nAssuming your **real** table name is `LiveTokens`, native queries no longer use the JPA translations, and the table name has to match the one in the DB. (You may also need to specify its schema.)","title":"How to query with Spring JPA on jsonb columns?","body":"<p>This is how a native query using Postgres JSON query operators would look like, incorporating your example:</p>\n<pre><code>@Query(value=&quot;SELECT t.* FROM LiveTokens t WHERE CAST(t.token -&gt;&gt; 'expireTime' AS LONG) &lt; now()&quot;, native=true)\n</code></pre>\n<p>Assuming your <strong>real</strong> table name is <code>LiveTokens</code>, native queries no longer use the JPA translations, and the table name has to match the one in the DB. (You may also need to specify its schema.)</p>\n"}],"owner":{"account_id":4794280,"reputation":1654,"user_id":3872648,"accept_rate":47,"display_name":"Morteza Malvandi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22695,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1689073223,"creation_date":1568269986,"question_id":57900944,"body_markdown":"I&#39;m using spring JPA with PostgreSQL database. I have an Entity as follow:\r\n\r\n    @Entity\r\n    @TypeDef(name=&quot;json_binary&quot;, typeClass = com.vladmihalcea.hibernate.type.json.JsonBinaryType.class)\r\n    public class LiveTokens {\r\n    \r\n       @Id\r\n       @GeneratedValue()\r\n       private Long id;\r\n\r\n       private String username;\r\n    \r\n       @Type(type=&quot;json_binary&quot;)\r\n       @Column(columnDefinition = &quot;jsonb&quot;)\r\n       private Token token\r\n    }\r\n\r\nand `Token`:\r\n\r\n    public class Token {\r\n       private Long expireTime;\r\n       private String accessToken;\r\n    }\r\n\r\nFor saving object to column with Hibernate, I use [Hibernate Types][1] project.\r\nNow I want to get All `LiveToken`s that expired. I can&#39;t do it with Spring JPA. How do I query to posgresql jsonb column with Spring data JPA?\r\n\r\n\r\n  [1]: https://github.com/vladmihalcea/hibernate-types","title":"How to query with Spring JPA on jsonb columns?","body":"<p>I'm using spring JPA with PostgreSQL database. I have an Entity as follow:</p>\n<pre><code>@Entity\n@TypeDef(name=&quot;json_binary&quot;, typeClass = com.vladmihalcea.hibernate.type.json.JsonBinaryType.class)\npublic class LiveTokens {\n\n   @Id\n   @GeneratedValue()\n   private Long id;\n\n   private String username;\n\n   @Type(type=&quot;json_binary&quot;)\n   @Column(columnDefinition = &quot;jsonb&quot;)\n   private Token token\n}\n</code></pre>\n<p>and <code>Token</code>:</p>\n<pre><code>public class Token {\n   private Long expireTime;\n   private String accessToken;\n}\n</code></pre>\n<p>For saving object to column with Hibernate, I use <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">Hibernate Types</a> project.\nNow I want to get All <code>LiveToken</code>s that expired. I can't do it with Spring JPA. How do I query to posgresql jsonb column with Spring data JPA?</p>\n"},{"tags":["java","android","android-camerax"],"answers":[{"comments":[{"owner":{"account_id":7026392,"reputation":564,"user_id":5383620,"accept_rate":73,"display_name":"zeroflaw"},"score":1,"creation_date":1611554791,"post_id":65832458,"comment_id":116479275,"body_markdown":"took me a while to convert it to java... but yes, you have pointed out the crucial point. thanks.","body":"took me a while to convert it to java... but yes, you have pointed out the crucial point. thanks."},{"owner":{"account_id":3966320,"reputation":5312,"user_id":3694459,"accept_rate":82,"display_name":"Balasubramanian"},"score":0,"creation_date":1625640677,"post_id":65832458,"comment_id":120676880,"body_markdown":"@zeroflaw am also facing a similar issue and looking in Java. Could you plz share the java converter code? This would help a lot and solve issues of redmi variants.","body":"@zeroflaw am also facing a similar issue and looking in Java. Could you plz share the java converter code? This would help a lot and solve issues of redmi variants."},{"owner":{"account_id":7026392,"reputation":564,"user_id":5383620,"accept_rate":73,"display_name":"zeroflaw"},"score":0,"creation_date":1626422930,"post_id":65832458,"comment_id":120893707,"body_markdown":"@Balasubramanian i remembered it is done through Android Studio itself. Do you know a way to upload file here?","body":"@Balasubramanian i remembered it is done through Android Studio itself. Do you know a way to upload file here?"},{"owner":{"account_id":3966320,"reputation":5312,"user_id":3694459,"accept_rate":82,"display_name":"Balasubramanian"},"score":1,"creation_date":1626428777,"post_id":65832458,"comment_id":120895890,"body_markdown":"I used the kotlin language directly by applying the kotlin plugin in root gradle. It worked!","body":"I used the kotlin language directly by applying the kotlin plugin in root gradle. It worked!"},{"owner":{"account_id":3966320,"reputation":5312,"user_id":3694459,"accept_rate":82,"display_name":"Balasubramanian"},"score":0,"creation_date":1626428991,"post_id":65832458,"comment_id":120895974,"body_markdown":"@Husayn Hakeem - I have doubt in rgb value. After started using this bitmap conversion, getting Blue value in the range of 0-0.9 in all oneplus variants. Its almost flatline. Is it solvable or do we have to do calibration?","body":"@Husayn Hakeem - I have doubt in rgb value. After started using this bitmap conversion, getting Blue value in the range of 0-0.9 in all oneplus variants. Its almost flatline. Is it solvable or do we have to do calibration?"}],"tags":[],"owner":{"account_id":6006515,"reputation":4320,"user_id":4718283,"accept_rate":74,"display_name":"Husayn Hakeem"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1611249279,"creation_date":1611249279,"answer_id":65832458,"question_id":65822326,"body_markdown":"The issue might be with your conversion method `toBitmpa()`, it assumes the image&#39;s format is NV21, but unfortunately not every YUV_888_420 buffer is NV21 format. it can also be NV12, YU12 or YV12 format.\r\n\r\nThe official CameraX documentation already provides a way to convert YUV images to RGB bitmaps which you should use, it&#39;s at the bottom of [this section](https://developer.android.com/training/camerax/take-photo#implementation) from the documentation.\r\n\r\n&gt; For sample code that shows how to convert a Media.Image object from\r\n&gt; YUV_420_888 format to an RGB Bitmap object, see [YuvToRgbConverter.kt](https://github.com/android/camera-samples/blob/3730442b49189f76a1083a98f3acf3f5f09222a3/CameraUtils/lib/src/main/java/com/example/android/camera/utils/YuvToRgbConverter.kt).","title":"Why CameraX image distorted when saved in Android phone Redmi 9T?","body":"<p>The issue might be with your conversion method <code>toBitmpa()</code>, it assumes the image's format is NV21, but unfortunately not every YUV_888_420 buffer is NV21 format. it can also be NV12, YU12 or YV12 format.</p>\n<p>The official CameraX documentation already provides a way to convert YUV images to RGB bitmaps which you should use, it's at the bottom of <a href=\"https://developer.android.com/training/camerax/take-photo#implementation\" rel=\"nofollow noreferrer\">this section</a> from the documentation.</p>\n<blockquote>\n<p>For sample code that shows how to convert a Media.Image object from\nYUV_420_888 format to an RGB Bitmap object, see <a href=\"https://github.com/android/camera-samples/blob/3730442b49189f76a1083a98f3acf3f5f09222a3/CameraUtils/lib/src/main/java/com/example/android/camera/utils/YuvToRgbConverter.kt\" rel=\"nofollow noreferrer\">YuvToRgbConverter.kt</a>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13110602,"reputation":21,"user_id":9471756,"display_name":"Daniel L&#243;pez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689073181,"creation_date":1689073181,"answer_id":76661298,"question_id":65822326,"body_markdown":"I fixed it using YuvToRgbConverter.kt like this:\r\n\r\n    class PhotoAnalyzer(\r\n        private val converter: YuvToRgbConverter\r\n    ) : ImageAnalysis.Analyzer {\r\n    \r\n         @SuppressLint(&quot;UnsafeOptInUsageError&quot;)\r\n        override fun analyze(imageProxy: ImageProxy) {\r\n            val bitmapBuffer = Bitmap.createBitmap(imageProxy.width, imageProxy.height, Bitmap.Config.ARGB_8888)\r\n    \r\n      imageProxy.image?.let { converter.yuvToRgb(it, bitmapBuffer) }\r\n    .\r\n    .\r\n    .\r\n\r\n","title":"Why CameraX image distorted when saved in Android phone Redmi 9T?","body":"<p>I fixed it using YuvToRgbConverter.kt like this:</p>\n<pre><code>class PhotoAnalyzer(\n    private val converter: YuvToRgbConverter\n) : ImageAnalysis.Analyzer {\n\n     @SuppressLint(&quot;UnsafeOptInUsageError&quot;)\n    override fun analyze(imageProxy: ImageProxy) {\n        val bitmapBuffer = Bitmap.createBitmap(imageProxy.width, imageProxy.height, Bitmap.Config.ARGB_8888)\n\n  imageProxy.image?.let { converter.yuvToRgb(it, bitmapBuffer) }\n.\n.\n.\n</code></pre>\n"}],"owner":{"account_id":7026392,"reputation":564,"user_id":5383620,"accept_rate":73,"display_name":"zeroflaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65832458,"answer_count":2,"score":1,"last_activity_date":1689073181,"creation_date":1611211507,"question_id":65822326,"body_markdown":"I am using the new device Redmi 9T.\r\nFollowing the basic setup from [this post][1], i manage to up and run an app using CameraX. Everything works fine until i want to save the frame to the local, in the `setAnalyzer` function\r\n\r\n    private void bindImageAnalysis(@NonNull ProcessCameraProvider cameraProvider) {\r\n        ImageAnalysis imageAnalysis =\r\n                new ImageAnalysis.Builder().setTargetResolution(new Size(720, 1280))\r\n                        .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST).build();\r\n\r\n        imageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), new ImageAnalysis.Analyzer() {\r\n            @Override\r\n            public void analyze(@NonNull ImageProxy imageProxy) {\r\n                @SuppressLint(&quot;UnsafeExperimentalUsageError&quot;) Image image = imageProxy.getImage();\r\n                Bitmap finalBitmap = getFinalScaledRotatedBitmap(image,270); //rotate it properly (portrait)\r\n                saveBitmap(finalBitmap, &quot;test&quot;); //save with a dummy name\r\n                imageProxy.close();\r\n            }\r\n        });\r\n        OrientationEventListener orientationEventListener = new OrientationEventListener(this) {\r\n            @Override\r\n            public void onOrientationChanged(int orientation) {\r\n                textView.setText(Integer.toString(orientation));\r\n            }\r\n        };\r\n        orientationEventListener.enable();\r\n        Preview preview = new Preview.Builder().build();\r\n        CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                .requireLensFacing(CameraSelector.LENS_FACING_FRONT).build();\r\n        preview.setSurfaceProvider(previewView.createSurfaceProvider());\r\n        cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector,\r\n                imageAnalysis, preview);\r\n    }\r\n\r\n     /*\r\n     *  Rotate the image with a rotation degree\r\n     */\r\n     private Bitmap getFinalScaledRotatedBitmap(Image imageData, int viewRotation){\r\n        Bitmap originalBitmap = toBitmap(imageData);\r\n        Matrix matrix = new Matrix();\r\n        matrix.postRotate(viewRotation);\r\n        matrix.postScale(-1.0f, 1.0f);\r\n        Bitmap scaledBitmap = Bitmap.createScaledBitmap(originalBitmap, originalBitmap.getWidth(), originalBitmap.getHeight(), true);\r\n        Bitmap finalRotatedBitmap = Bitmap.createBitmap(scaledBitmap, 0, 0, scaledBitmap.getWidth(), scaledBitmap.getHeight(), matrix, true);\r\n        return finalRotatedBitmap;\r\n    }\r\n\r\n    /*\r\n    *  Convert Image format to Bitmap\r\n    */\r\n    private Bitmap toBitmap(Image image) {\r\n        Image.Plane[] planes = image.getPlanes();\r\n        ByteBuffer yBuffer = planes[0].getBuffer();\r\n        ByteBuffer uBuffer = planes[1].getBuffer();\r\n        ByteBuffer vBuffer = planes[2].getBuffer();\r\n\r\n        int ySize = yBuffer.remaining();\r\n        int uSize = uBuffer.remaining();\r\n        int vSize = vBuffer.remaining();\r\n\r\n        byte[] nv21 = new byte[ySize + uSize + vSize];\r\n        //U and V are swapped\r\n        yBuffer.get(nv21, 0, ySize);\r\n        vBuffer.get(nv21, ySize, vSize);\r\n        uBuffer.get(nv21, ySize + vSize, uSize);\r\n\r\n        YuvImage yuvImage = new YuvImage(nv21, ImageFormat.NV21, image.getWidth(), image.getHeight(), null);\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        yuvImage.compressToJpeg(new Rect(0, 0, yuvImage.getWidth(), yuvImage.getHeight()), 100, out);\r\n\r\n        byte[] imageBytes = out.toByteArray();\r\n        return BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);\r\n    }\r\n\r\n    /*\r\n    *  Save Bitmap to local\r\n    */\r\n    public void saveBitmap(Bitmap bitmap, String personName) {\r\n        String ROOT =\r\n                Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + &quot;cameraX&quot;;\r\n\r\n        File myDir = new File(ROOT + File.separator + personName);\r\n        if (!myDir.mkdirs()) {\r\n            Log.e(&quot;FileUtil&quot;, &quot;save dir fails&quot;);\r\n        }\r\n\r\n        String fileName = (new SimpleDateFormat(&quot;yyyyMMdd_HHmmss_SSS&quot;)).format(Calendar.getInstance().getTime()) + &quot;.jpeg&quot;;\r\n        File file = new File(myDir, fileName);\r\n        if (file.exists()) {\r\n            file.delete();\r\n        }\r\n\r\n        try {\r\n            FileOutputStream out = new FileOutputStream(file);\r\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);\r\n\r\n            out.flush();\r\n            out.close();\r\n        } catch (Exception var6) {\r\n            Log.e(&quot;fileUtil&quot;, var6.getMessage());\r\n        }\r\n\r\n    }\r\n\r\n Output? (regardless of Lens front or back)\r\n\r\n[![distorted image][2]][2]\r\n\r\nThe thing is, it works fine in other device like honor 8x, or realme.\r\nSo, what could possibly go wrong?\r\n\r\n\r\n  [1]: https://medium.com/swlh/introduction-to-androids-camerax-with-java-ca384c522c5\r\n  [2]: https://i.stack.imgur.com/pZOoRl.jpg","title":"Why CameraX image distorted when saved in Android phone Redmi 9T?","body":"<p>I am using the new device Redmi 9T.\nFollowing the basic setup from <a href=\"https://medium.com/swlh/introduction-to-androids-camerax-with-java-ca384c522c5\" rel=\"nofollow noreferrer\">this post</a>, i manage to up and run an app using CameraX. Everything works fine until i want to save the frame to the local, in the <code>setAnalyzer</code> function</p>\n<pre><code>private void bindImageAnalysis(@NonNull ProcessCameraProvider cameraProvider) {\n    ImageAnalysis imageAnalysis =\n            new ImageAnalysis.Builder().setTargetResolution(new Size(720, 1280))\n                    .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST).build();\n\n    imageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), new ImageAnalysis.Analyzer() {\n        @Override\n        public void analyze(@NonNull ImageProxy imageProxy) {\n            @SuppressLint(&quot;UnsafeExperimentalUsageError&quot;) Image image = imageProxy.getImage();\n            Bitmap finalBitmap = getFinalScaledRotatedBitmap(image,270); //rotate it properly (portrait)\n            saveBitmap(finalBitmap, &quot;test&quot;); //save with a dummy name\n            imageProxy.close();\n        }\n    });\n    OrientationEventListener orientationEventListener = new OrientationEventListener(this) {\n        @Override\n        public void onOrientationChanged(int orientation) {\n            textView.setText(Integer.toString(orientation));\n        }\n    };\n    orientationEventListener.enable();\n    Preview preview = new Preview.Builder().build();\n    CameraSelector cameraSelector = new CameraSelector.Builder()\n            .requireLensFacing(CameraSelector.LENS_FACING_FRONT).build();\n    preview.setSurfaceProvider(previewView.createSurfaceProvider());\n    cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector,\n            imageAnalysis, preview);\n}\n\n /*\n *  Rotate the image with a rotation degree\n */\n private Bitmap getFinalScaledRotatedBitmap(Image imageData, int viewRotation){\n    Bitmap originalBitmap = toBitmap(imageData);\n    Matrix matrix = new Matrix();\n    matrix.postRotate(viewRotation);\n    matrix.postScale(-1.0f, 1.0f);\n    Bitmap scaledBitmap = Bitmap.createScaledBitmap(originalBitmap, originalBitmap.getWidth(), originalBitmap.getHeight(), true);\n    Bitmap finalRotatedBitmap = Bitmap.createBitmap(scaledBitmap, 0, 0, scaledBitmap.getWidth(), scaledBitmap.getHeight(), matrix, true);\n    return finalRotatedBitmap;\n}\n\n/*\n*  Convert Image format to Bitmap\n*/\nprivate Bitmap toBitmap(Image image) {\n    Image.Plane[] planes = image.getPlanes();\n    ByteBuffer yBuffer = planes[0].getBuffer();\n    ByteBuffer uBuffer = planes[1].getBuffer();\n    ByteBuffer vBuffer = planes[2].getBuffer();\n\n    int ySize = yBuffer.remaining();\n    int uSize = uBuffer.remaining();\n    int vSize = vBuffer.remaining();\n\n    byte[] nv21 = new byte[ySize + uSize + vSize];\n    //U and V are swapped\n    yBuffer.get(nv21, 0, ySize);\n    vBuffer.get(nv21, ySize, vSize);\n    uBuffer.get(nv21, ySize + vSize, uSize);\n\n    YuvImage yuvImage = new YuvImage(nv21, ImageFormat.NV21, image.getWidth(), image.getHeight(), null);\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\n    yuvImage.compressToJpeg(new Rect(0, 0, yuvImage.getWidth(), yuvImage.getHeight()), 100, out);\n\n    byte[] imageBytes = out.toByteArray();\n    return BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);\n}\n\n/*\n*  Save Bitmap to local\n*/\npublic void saveBitmap(Bitmap bitmap, String personName) {\n    String ROOT =\n            Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + &quot;cameraX&quot;;\n\n    File myDir = new File(ROOT + File.separator + personName);\n    if (!myDir.mkdirs()) {\n        Log.e(&quot;FileUtil&quot;, &quot;save dir fails&quot;);\n    }\n\n    String fileName = (new SimpleDateFormat(&quot;yyyyMMdd_HHmmss_SSS&quot;)).format(Calendar.getInstance().getTime()) + &quot;.jpeg&quot;;\n    File file = new File(myDir, fileName);\n    if (file.exists()) {\n        file.delete();\n    }\n\n    try {\n        FileOutputStream out = new FileOutputStream(file);\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);\n\n        out.flush();\n        out.close();\n    } catch (Exception var6) {\n        Log.e(&quot;fileUtil&quot;, var6.getMessage());\n    }\n\n}\n</code></pre>\n<p>Output? (regardless of Lens front or back)</p>\n<p><a href=\"https://i.stack.imgur.com/pZOoRl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pZOoRl.jpg\" alt=\"distorted image\" /></a></p>\n<p>The thing is, it works fine in other device like honor 8x, or realme.\nSo, what could possibly go wrong?</p>\n"},{"tags":["java","spring-boot","microservices","load-balancing","multiple-instances"],"comments":[{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":0,"creation_date":1688817212,"post_id":76634285,"comment_id":135126619,"body_markdown":"are you talking about two instances of the same microservice? If so you should just use the same mechanism you use to access to those services i.e. api gateway, load balancer etc. If you would like to secure data consistency because of parallel or repeated execution etc. the only way to do it is having a lock on the data layer","body":"are you talking about two instances of the same microservice? If so you should just use the same mechanism you use to access to those services i.e. api gateway, load balancer etc. If you would like to secure data consistency because of parallel or repeated execution etc. the only way to do it is having a lock on the data layer"},{"owner":{"account_id":28967763,"reputation":1,"user_id":22188752,"display_name":"divers"},"score":0,"creation_date":1689068465,"post_id":76634285,"comment_id":135157417,"body_markdown":"yes two instances of same service and I cannot use the data lock. My first thought was using lock.","body":"yes two instances of same service and I cannot use the data lock. My first thought was using lock."}],"answers":[{"comments":[{"owner":{"account_id":28967763,"reputation":1,"user_id":22188752,"display_name":"divers"},"score":0,"creation_date":1689068649,"post_id":76635640,"comment_id":135157455,"body_markdown":"to make the decision both instances should be aware that only one has to make call, how to achieve that without lock.","body":"to make the decision both instances should be aware that only one has to make call, how to achieve that without lock."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1689069225,"post_id":76635640,"comment_id":135157577,"body_markdown":"As described in my answer. For example knowing that your instances have port numbers between 8080 and 8089 you can read the port number and make the call only if it is 8080.","body":"As described in my answer. For example knowing that your instances have port numbers between 8080 and 8089 you can read the port number and make the call only if it is 8080."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688721928,"creation_date":1688721928,"answer_id":76635640,"question_id":76634285,"body_markdown":"The instances of a Spring Boot application started by the load balancer will have either different host names (ip addresses) or at least different port numbers. You can read this values and make a decision about calling the particular rest call.\r\n\r\nTo read the current port number you can use this code:\r\n```\r\n@Service\r\npublic class ServerPortService {\r\n    private int port;\r\n\r\n    public int getPort() {\r\n        return port;\r\n    }\r\n\r\n    @EventListener\r\n    public void onApplicationEvent(final ServletWebServerInitializedEvent event) {\r\n        port = event.getWebServer().getPort();\r\n    }\r\n}\r\n```\r\nBased on [https://www.baeldung.com/spring-boot-running-port][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-running-port","title":"How to enable only one instance of spring boot microservice to make a particular rest call?","body":"<p>The instances of a Spring Boot application started by the load balancer will have either different host names (ip addresses) or at least different port numbers. You can read this values and make a decision about calling the particular rest call.</p>\n<p>To read the current port number you can use this code:</p>\n<pre><code>@Service\npublic class ServerPortService {\n    private int port;\n\n    public int getPort() {\n        return port;\n    }\n\n    @EventListener\n    public void onApplicationEvent(final ServletWebServerInitializedEvent event) {\n        port = event.getWebServer().getPort();\n    }\n}\n</code></pre>\n<p>Based on <a href=\"https://www.baeldung.com/spring-boot-running-port\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-running-port</a></p>\n"},{"tags":[],"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689073027,"creation_date":1689073027,"answer_id":76661278,"question_id":76634285,"body_markdown":"Your only option is using a lock in an external system. Though I don&#39;t think it is a good idea, you can use an external redis instance to manage the lock which would be a lot faster than using a relational db. But you can&#39;t fix the issue you described inside the application directly.   ","title":"How to enable only one instance of spring boot microservice to make a particular rest call?","body":"<p>Your only option is using a lock in an external system. Though I don't think it is a good idea, you can use an external redis instance to manage the lock which would be a lot faster than using a relational db. But you can't fix the issue you described inside the application directly.</p>\n"}],"owner":{"account_id":28967763,"reputation":1,"user_id":22188752,"display_name":"divers"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1689073027,"creation_date":1688709637,"question_id":76634285,"body_markdown":"I&#39;ve two instances of spring boot microservice and I want only one of them to make a particular rest call.\r\n\r\nMy first thought was to create a table and put lock which only one of the service can acquire but that is not wanted.\r\n\r\nIs there any other way to achieve it , I cant add zookeeper or any new cache mechanism.\r\n\r\nMy first thought was to create a table and put lock which only one of the service can acquire but that is not wanted.","title":"How to enable only one instance of spring boot microservice to make a particular rest call?","body":"<p>I've two instances of spring boot microservice and I want only one of them to make a particular rest call.</p>\n<p>My first thought was to create a table and put lock which only one of the service can acquire but that is not wanted.</p>\n<p>Is there any other way to achieve it , I cant add zookeeper or any new cache mechanism.</p>\n<p>My first thought was to create a table and put lock which only one of the service can acquire but that is not wanted.</p>\n"},{"tags":["java","assembly","x86-64","jit","auto-vectorization"],"comments":[{"owner":{"account_id":262829,"reputation":57135,"user_id":547981,"display_name":"Jester"},"score":1,"creation_date":1688839794,"post_id":76644132,"comment_id":135129085,"body_markdown":"That&#39;s quite a lot of code, but it looks like the usual 1. do scalar/unaligned beginning 2. do the vector part 3. finish the loop","body":"That&#39;s quite a lot of code, but it looks like the usual 1. do scalar/unaligned beginning 2. do the vector part 3. finish the loop"},{"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"score":0,"creation_date":1688840994,"post_id":76644132,"comment_id":135129222,"body_markdown":"Thats what I thought too, but why is there 4 parts in this case? I&#39;d expect 3.\nCan you explain a bit more on the alignment? What exactly is unaligned and what does it need to be aligned to?","body":"Thats what I thought too, but why is there 4 parts in this case? I&#39;d expect 3. Can you explain a bit more on the alignment? What exactly is unaligned and what does it need to be aligned to?"}],"answers":[{"comments":[{"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"score":0,"creation_date":1688999748,"post_id":76654044,"comment_id":135147338,"body_markdown":"Thank you!\nMy thought exactly regarding the usage of SIMD registers in L0000 and L0005.\nThey also are reusing the same SIMD registers in the main loop which hinders instruction level parallelism.\nSo I guess in the example above L0005 has 0 iterations probably? And its produces simply because the JIT does some optimizations based on the arraySize but still produces code that is correct for every array size and thats why we have L0000 and L0005?","body":"Thank you! My thought exactly regarding the usage of SIMD registers in L0000 and L0005. They also are reusing the same SIMD registers in the main loop which hinders instruction level parallelism. So I guess in the example above L0005 has 0 iterations probably? And its produces simply because the JIT does some optimizations based on the arraySize but still produces code that is correct for every array size and thats why we have L0000 and L0005?"},{"owner":{"account_id":23050385,"reputation":10403,"user_id":17167312,"display_name":"Homer512"},"score":0,"creation_date":1689005110,"post_id":76654044,"comment_id":135148683,"body_markdown":"@DevD CPUs have register renaming. Reusing registers does not hinder parallelism. `L0003` and `L0005` would be active if `L0000` does any iterations. I&#39;m not aware of Java guaranteeing 32 byte alignment for its arrays so that&#39;s somewhat likely. I don&#39;t see any optimization based on array size in that code. In fact you can see it loading the `arraySize` variable from memory in `0x000000010c4c55cf: mov 0xc(%rsi),%ebp` and then check whether it is zero in the next line.","body":"@DevD CPUs have register renaming. Reusing registers does not hinder parallelism. <code>L0003</code> and <code>L0005</code> would be active if <code>L0000</code> does any iterations. I&#39;m not aware of Java guaranteeing 32 byte alignment for its arrays so that&#39;s somewhat likely. I don&#39;t see any optimization based on array size in that code. In fact you can see it loading the <code>arraySize</code> variable from memory in <code>0x000000010c4c55cf: mov 0xc(%rsi),%ebp</code> and then check whether it is zero in the next line."},{"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"score":0,"creation_date":1689028264,"post_id":76654044,"comment_id":135152573,"body_markdown":"OK so something still doesnt add up.\nLets run a scenario, L0000 does a multiple of 8 = 8 elements, lets say 8 iterations, then L0002 does 1 iterations (32 elements, 40 so far) and sees it cant do another, then L0003 starts doing iterations of 8 elements (48, then 56, then 64) then done, so how would L0005 come into play? Did I miss something in my scenario?","body":"OK so something still doesnt add up. Lets run a scenario, L0000 does a multiple of 8 = 8 elements, lets say 8 iterations, then L0002 does 1 iterations (32 elements, 40 so far) and sees it cant do another, then L0003 starts doing iterations of 8 elements (48, then 56, then 64) then done, so how would L0005 come into play? Did I miss something in my scenario?"},{"owner":{"account_id":23050385,"reputation":10403,"user_id":17167312,"display_name":"Homer512"},"score":0,"creation_date":1689058391,"post_id":76654044,"comment_id":135155401,"body_markdown":"@DevD L0000 never does 8 elements. It loops until the address of the output array is at a multiple of 32 byte. On any language that uses malloc (so, not Java) I would assume it to run 4 times since allocations are 16 byte aligned. Then L0002 goes 1 iteration (38), L0003 3 iterations (62), and finally L0005 2 iterations","body":"@DevD L0000 never does 8 elements. It loops until the address of the output array is at a multiple of 32 byte. On any language that uses malloc (so, not Java) I would assume it to run 4 times since allocations are 16 byte aligned. Then L0002 goes 1 iteration (38), L0003 3 iterations (62), and finally L0005 2 iterations"},{"owner":{"account_id":23050385,"reputation":10403,"user_id":17167312,"display_name":"Homer512"},"score":0,"creation_date":1689065139,"post_id":76654044,"comment_id":135156747,"body_markdown":"@DevD correction: The L0000 always loops 1-8 times. I&#39;ve edited the answer (twice). The code is good but confusing","body":"@DevD correction: The L0000 always loops 1-8 times. I&#39;ve edited the answer (twice). The code is good but confusing"},{"owner":{"account_id":23050385,"reputation":10403,"user_id":17167312,"display_name":"Homer512"},"score":0,"creation_date":1689071935,"post_id":76654044,"comment_id":135158156,"body_markdown":"@DevD I&#39;ve extended the answer to cover your question","body":"@DevD I&#39;ve extended the answer to cover your question"},{"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"score":0,"creation_date":1689073756,"post_id":76654044,"comment_id":135158539,"body_markdown":"I commented accidentally and deleted, ignore it please.","body":"I commented accidentally and deleted, ignore it please."},{"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"score":0,"creation_date":1689073821,"post_id":76654044,"comment_id":135158553,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254433/discussion-between-devd-and-homer512).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254433/discussion-between-devd-and-homer512\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":23050385,"reputation":10403,"user_id":17167312,"display_name":"Homer512"},"comment_count":8,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1689072874,"creation_date":1688994285,"answer_id":76654044,"question_id":76644132,"body_markdown":"Just discussing the main loops as indicated by their jump labels.\r\n\r\n`L0000` loop: Align to a multiple of 8 elements (32 byte). The `and $0x7` is a dead giveaway. Vector alignment is discussed pretty much everywhere when it comes to vector instructions. I don&#39;t have one golden bullet reference link that explains the topic but you will find plenty of resources on SO and elsewhere on it. The [Intel&#174; 64 and IA-32 Architectures Optimization Reference Manual](https://www.intel.com/content/www/us/en/content-details/671488/intel-64-and-ia-32-architectures-optimization-reference-manual.html) should also cover it.\r\n\r\nEven without, it should be pretty self-evident that the most efficient memory access is one where the data is not split across cache lines or worse, memory pages. Aligning to the natural vector size ensures that.\r\n\r\nAVX and AVX2 hardware generally handles misalignment gracefully but [older SSE](https://stackoverflow.com/questions/12491578/whats-the-actual-effect-of-successful-unaligned-accesses-on-x86) and [newer AVX512 hardware](https://stackoverflow.com/questions/74785348/is-there-any-performance-difference-between-avx-512-mm512-load-epi64-and-mm) require alignment for optimal performance. I assume the code generator just handles all those cases the same.\r\n\r\nSince we have two inputs and one output, we can only really align to one of those and then hope that the others are equally aligned. If I read the code correctly, the alignment is performed on the output, not the input, but I could be reading it wrong.\r\n\r\n`L0002` loop: Main loop unrolled 4 times for 4 x 8 = 32 elements per iteration.\r\n\r\n`L0003` loop: Same as the main loop but not unrolled to handle the last 0-3 full vectors.\r\n\r\n`L0005` loop: Handle last 0-7 elements as scalars. Interestingly 4 iterations could be saved by making one iteration using 16 byte XMM registers but the compiler chose not to do so. I guess they decided it&#39;s not worth it. The same could be done in the `L0000` loop.\r\n\r\nThe compiler knows that the output does not overlap with the input. Otherwise you would expect another separate loop to handle the case where both overlap so closely that vectorization is impossible. That might just be a separate conditional jump to the `L0005` loop.\r\n\r\nAlignment loop counter\r\n----------------------\r\n\r\nLet&#39;s try to untangle the alignment loop `L0000`. It&#39;s loop counter is `%r11d` (set to 0 immediately before the loop) with `%r9d` as its loop limit. So let&#39;s trace `%r9d` back.\r\n\r\n```\r\n0x000000010c4c5670: cmp %ebp,%r9d\r\n0x000000010c4c5673: cmovg %ebp,%r9d\r\n```\r\nWe previously established that `%ebp` holds `arraySize`, so this is basically `r9d = min(r9d, arraySize)`. Makes sense. In a small, misaligned array, the `L0000` loop handles the full content.\r\n\r\nBefore that:\r\n\r\n```\r\n0x000000010c4c5649: lea (%r12,%r8,8),%rdx\r\n0x000000010c4c5651: mov %edx,%r11d\r\n0x000000010c4c5658: shr $0x2,%r11d\r\n0x000000010c4c565c: and $0x7,%r11d\r\n0x000000010c4c5660: mov $0x3,%r9d\r\n0x000000010c4c5666: sub %r11d,%r9d\r\n0x000000010c4c5669: and $0x7,%r9d\r\n0x000000010c4c566d: inc %r9d\r\n```\r\n\r\n`r12` is never initialized in that code snippet. [This question](https://stackoverflow.com/questions/71202955/use-of-r12-register-in-code-produced-by-hotspot-c2-jit-compiler) suggests that it holds the heap base. Further up we find the line `0x000000010c4c5629: mov 0x18(%rsi),%r8d  ;*getfield result`. So let&#39;s just assume that `lea (%r12,%r8,8),%rdx` gives us the start address of the result array.\r\n\r\nHowever, it doesn&#39;t seem like that address is the start of the data content. Later in the loop you find that all memory accesses follow the pattern `vmovss %xmm0,0x10(%rdx,%r11,4)`. Notice the additional offset `0x10 = 16`. We can guess that the first 16 byte of the array hold metadata such as its size. This offset is folded into every following computation. Ugh.\r\n\r\nThe `shr $0x2` divides by 4, going from bytes to float indices. `and $0x7` gives the offset from the last multiple of 8. In C code, this would be\r\n\r\n```c\r\nstruct Array {\r\n   int64_t meta1, meta2;\r\n   float content[];\r\n};\r\nArray* result = heap_base + offset_of_result;\r\nunsigned r11d = (unsigned) result / sizeof(float) % 8;\r\n```\r\n\r\nThen we compute `%r9d`:\r\n\r\n```c\r\nunsigned r9d = (3 - r11d) % 8 + 1;\r\n```\r\nWe&#39;ve established that `%r11d` is between 0 and 7 so we can just look at the numbers.\r\n\r\n```\r\n| r11d |  r9d |\r\n|   0  |   4  |\r\n|   1  |   3  |\r\n|   2  |   2  |\r\n|   3  |   1  |\r\n|   4  |   8  |\r\n|   5  |   7  |\r\n|   6  |   6  |\r\n|   7  |   5  |\r\n```\r\n\r\nThis only makes sense when we keep in mind that all our memory accesses are offset by 4 additional floats. Let&#39;s say `%r11d` is 1, meaning the array header starts 1 float = 4 byte after the last 32 byte alignment. The array content then starts 1 + 4 = 5 float = 20 byte after alignment. Then we do 3 scalar iterations to get to the next 32 byte alignment.\r\n\r\nThe one issue that I have with this code is that for `r11d = 4`, we should not do any scalar iterations. We can go straight to vectorized code. An additional `and $0x7,r9d` would fix that. But on the other hand this saves a conditional branch instruction since the loop is always executed at least once.\r\n\r\nFollow-up questions\r\n-------------------\r\n\r\n&gt; so the &quot;loop alignment&quot; is not so alignment of the &quot;i&quot; used for loop control, its alignment to cache line size?\r\n\r\nNot cache line size, natural vector size. This code uses AVX vectors (YMM registers). Their size is 32 byte, so we try to get 32 byte alignment. Cache line would be 64 byte. But notice how a 32 byte-aligned access of 32 byte vectors never crosses a cache line boundary. That&#39;s the main goal.\r\n\r\n&gt; If so, do you know the pseudo algorithm to determine that number of iterations? I would assume just (address % 8) but it seems the only &quot;lea&quot; in the code before L0000 do not find their way into r9d or r11d, which are used for the loop control\r\n\r\nI think I&#39;ve made it clear above. However, in general, and written in C, you could write:\r\n\r\n```c\r\nfloat* array = ...;\r\nsize_t array_size = ...;\r\nconst size_t vector_in_bytes = 32;\r\nsize_t start_in_bytes = (size_t) array;\r\nsize_t offset_from_alignment = start_in_bytes % vector_in_bytes;\r\nsize_t bytes_to_alignment = vector_in_bytes - offset_from_alignment;\r\n// if offset_from_alignment is 0, make bytes_to_alignment 0 instead of 32\r\nbytes_to_alignment %= vector_in_bytes;\r\nsize_t elements_to_alignment = min(array_size, bytes_to_alignment / sizeof(float));\r\nsize_t i; // loop counter will be carried through all 3 loops\r\nfor(i = 0; i &lt; elements_to_alignment; ++i) {\r\n    // scalar loop for alignment\r\n}\r\nsize_t elements_per_vector = vector_in_bytes / sizeof(float);\r\nfor(; i + elements_per_vector &lt;= array_size; i += elements_per_vector) {\r\n    // vectorized loop\r\n}\r\nfor(;  i &lt; array_size; ++i) {\r\n    // scalar loop for last few elements\r\n}\r\n```\r\n\r\nThere are shorter versions of writing this but this should be the easiest to understand. The key point to note is that we have to reinterpret the array pointer as an integer for this to work, which is why I used C and not Java.\r\n\r\nA shorter, more elegant version could be\r\n\r\n```c\r\nfloat* array = ...;\r\nsize_t array_size = ...;\r\nconst size_t vector_in_bytes = 32;\r\nsize_t start_in_bytes = (size_t) array;\r\nsize_t next_aligned = (start_in_bytes + vector_in_bytes - 1) &amp; -vector_in_bytes;\r\nsize_t elements_to_alignment = min(array_size,\r\n      (next_aligned - start_in_bytes) / sizeof(float));\r\nsize_t i;\r\nfor(i = 0; i &lt; elements_to_alignment; ++i) {\r\n   ...\r\n}\r\n```","title":"Understanding JIT&#39;s rewrite of a for loop","body":"<p>Just discussing the main loops as indicated by their jump labels.</p>\n<p><code>L0000</code> loop: Align to a multiple of 8 elements (32 byte). The <code>and $0x7</code> is a dead giveaway. Vector alignment is discussed pretty much everywhere when it comes to vector instructions. I don't have one golden bullet reference link that explains the topic but you will find plenty of resources on SO and elsewhere on it. The <a href=\"https://www.intel.com/content/www/us/en/content-details/671488/intel-64-and-ia-32-architectures-optimization-reference-manual.html\" rel=\"nofollow noreferrer\">Intel® 64 and IA-32 Architectures Optimization Reference Manual</a> should also cover it.</p>\n<p>Even without, it should be pretty self-evident that the most efficient memory access is one where the data is not split across cache lines or worse, memory pages. Aligning to the natural vector size ensures that.</p>\n<p>AVX and AVX2 hardware generally handles misalignment gracefully but <a href=\"https://stackoverflow.com/questions/12491578/whats-the-actual-effect-of-successful-unaligned-accesses-on-x86\">older SSE</a> and <a href=\"https://stackoverflow.com/questions/74785348/is-there-any-performance-difference-between-avx-512-mm512-load-epi64-and-mm\">newer AVX512 hardware</a> require alignment for optimal performance. I assume the code generator just handles all those cases the same.</p>\n<p>Since we have two inputs and one output, we can only really align to one of those and then hope that the others are equally aligned. If I read the code correctly, the alignment is performed on the output, not the input, but I could be reading it wrong.</p>\n<p><code>L0002</code> loop: Main loop unrolled 4 times for 4 x 8 = 32 elements per iteration.</p>\n<p><code>L0003</code> loop: Same as the main loop but not unrolled to handle the last 0-3 full vectors.</p>\n<p><code>L0005</code> loop: Handle last 0-7 elements as scalars. Interestingly 4 iterations could be saved by making one iteration using 16 byte XMM registers but the compiler chose not to do so. I guess they decided it's not worth it. The same could be done in the <code>L0000</code> loop.</p>\n<p>The compiler knows that the output does not overlap with the input. Otherwise you would expect another separate loop to handle the case where both overlap so closely that vectorization is impossible. That might just be a separate conditional jump to the <code>L0005</code> loop.</p>\n<h2>Alignment loop counter</h2>\n<p>Let's try to untangle the alignment loop <code>L0000</code>. It's loop counter is <code>%r11d</code> (set to 0 immediately before the loop) with <code>%r9d</code> as its loop limit. So let's trace <code>%r9d</code> back.</p>\n<pre><code>0x000000010c4c5670: cmp %ebp,%r9d\n0x000000010c4c5673: cmovg %ebp,%r9d\n</code></pre>\n<p>We previously established that <code>%ebp</code> holds <code>arraySize</code>, so this is basically <code>r9d = min(r9d, arraySize)</code>. Makes sense. In a small, misaligned array, the <code>L0000</code> loop handles the full content.</p>\n<p>Before that:</p>\n<pre><code>0x000000010c4c5649: lea (%r12,%r8,8),%rdx\n0x000000010c4c5651: mov %edx,%r11d\n0x000000010c4c5658: shr $0x2,%r11d\n0x000000010c4c565c: and $0x7,%r11d\n0x000000010c4c5660: mov $0x3,%r9d\n0x000000010c4c5666: sub %r11d,%r9d\n0x000000010c4c5669: and $0x7,%r9d\n0x000000010c4c566d: inc %r9d\n</code></pre>\n<p><code>r12</code> is never initialized in that code snippet. <a href=\"https://stackoverflow.com/questions/71202955/use-of-r12-register-in-code-produced-by-hotspot-c2-jit-compiler\">This question</a> suggests that it holds the heap base. Further up we find the line <code>0x000000010c4c5629: mov 0x18(%rsi),%r8d  ;*getfield result</code>. So let's just assume that <code>lea (%r12,%r8,8),%rdx</code> gives us the start address of the result array.</p>\n<p>However, it doesn't seem like that address is the start of the data content. Later in the loop you find that all memory accesses follow the pattern <code>vmovss %xmm0,0x10(%rdx,%r11,4)</code>. Notice the additional offset <code>0x10 = 16</code>. We can guess that the first 16 byte of the array hold metadata such as its size. This offset is folded into every following computation. Ugh.</p>\n<p>The <code>shr $0x2</code> divides by 4, going from bytes to float indices. <code>and $0x7</code> gives the offset from the last multiple of 8. In C code, this would be</p>\n<pre class=\"lang-c prettyprint-override\"><code>struct Array {\n   int64_t meta1, meta2;\n   float content[];\n};\nArray* result = heap_base + offset_of_result;\nunsigned r11d = (unsigned) result / sizeof(float) % 8;\n</code></pre>\n<p>Then we compute <code>%r9d</code>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>unsigned r9d = (3 - r11d) % 8 + 1;\n</code></pre>\n<p>We've established that <code>%r11d</code> is between 0 and 7 so we can just look at the numbers.</p>\n<pre><code>| r11d |  r9d |\n|   0  |   4  |\n|   1  |   3  |\n|   2  |   2  |\n|   3  |   1  |\n|   4  |   8  |\n|   5  |   7  |\n|   6  |   6  |\n|   7  |   5  |\n</code></pre>\n<p>This only makes sense when we keep in mind that all our memory accesses are offset by 4 additional floats. Let's say <code>%r11d</code> is 1, meaning the array header starts 1 float = 4 byte after the last 32 byte alignment. The array content then starts 1 + 4 = 5 float = 20 byte after alignment. Then we do 3 scalar iterations to get to the next 32 byte alignment.</p>\n<p>The one issue that I have with this code is that for <code>r11d = 4</code>, we should not do any scalar iterations. We can go straight to vectorized code. An additional <code>and $0x7,r9d</code> would fix that. But on the other hand this saves a conditional branch instruction since the loop is always executed at least once.</p>\n<h2>Follow-up questions</h2>\n<blockquote>\n<p>so the &quot;loop alignment&quot; is not so alignment of the &quot;i&quot; used for loop control, its alignment to cache line size?</p>\n</blockquote>\n<p>Not cache line size, natural vector size. This code uses AVX vectors (YMM registers). Their size is 32 byte, so we try to get 32 byte alignment. Cache line would be 64 byte. But notice how a 32 byte-aligned access of 32 byte vectors never crosses a cache line boundary. That's the main goal.</p>\n<blockquote>\n<p>If so, do you know the pseudo algorithm to determine that number of iterations? I would assume just (address % 8) but it seems the only &quot;lea&quot; in the code before L0000 do not find their way into r9d or r11d, which are used for the loop control</p>\n</blockquote>\n<p>I think I've made it clear above. However, in general, and written in C, you could write:</p>\n<pre class=\"lang-c prettyprint-override\"><code>float* array = ...;\nsize_t array_size = ...;\nconst size_t vector_in_bytes = 32;\nsize_t start_in_bytes = (size_t) array;\nsize_t offset_from_alignment = start_in_bytes % vector_in_bytes;\nsize_t bytes_to_alignment = vector_in_bytes - offset_from_alignment;\n// if offset_from_alignment is 0, make bytes_to_alignment 0 instead of 32\nbytes_to_alignment %= vector_in_bytes;\nsize_t elements_to_alignment = min(array_size, bytes_to_alignment / sizeof(float));\nsize_t i; // loop counter will be carried through all 3 loops\nfor(i = 0; i &lt; elements_to_alignment; ++i) {\n    // scalar loop for alignment\n}\nsize_t elements_per_vector = vector_in_bytes / sizeof(float);\nfor(; i + elements_per_vector &lt;= array_size; i += elements_per_vector) {\n    // vectorized loop\n}\nfor(;  i &lt; array_size; ++i) {\n    // scalar loop for last few elements\n}\n</code></pre>\n<p>There are shorter versions of writing this but this should be the easiest to understand. The key point to note is that we have to reinterpret the array pointer as an integer for this to work, which is why I used C and not Java.</p>\n<p>A shorter, more elegant version could be</p>\n<pre class=\"lang-c prettyprint-override\"><code>float* array = ...;\nsize_t array_size = ...;\nconst size_t vector_in_bytes = 32;\nsize_t start_in_bytes = (size_t) array;\nsize_t next_aligned = (start_in_bytes + vector_in_bytes - 1) &amp; -vector_in_bytes;\nsize_t elements_to_alignment = min(array_size,\n      (next_aligned - start_in_bytes) / sizeof(float));\nsize_t i;\nfor(i = 0; i &lt; elements_to_alignment; ++i) {\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":21146537,"reputation":23,"user_id":15547738,"display_name":"DevD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76654044,"answer_count":1,"score":1,"last_activity_date":1689072874,"creation_date":1688836765,"question_id":76644132,"body_markdown":"I have the following Java code (all arrays are initialized before we call &quot;arrays&quot; and all are of size &quot;arraySize&quot;)\r\n\r\n    int arraySize = 64;\r\n\r\n    float[] a;\r\n    float[] b;\r\n    float[] result;\r\n    \r\n    public void arrays() {\r\n        for (int i = 0; i &lt; arraySize; i++) {\r\n            result[i] = ((a[i] * b[i] + b[i] - b[i]) / b[i]) +\r\n                         a[i] + a[i] + a[i] + a[i];\r\n        }\r\n    }\r\n\r\nThe JIT&#39;s output for it is:\r\n\r\n    # {method} {0x00000001034751a8} &#39;arrays&#39; &#39;()V&#39; in &#39;main/ComplexExpression&#39;\r\n    #           [sp+0x30]  (sp of caller)\r\n    [Entry Point]\r\n    0x000000010c4c55a0: mov 0x8(%rsi),%r10d\r\n    0x000000010c4c55a4: movabs $0x800000000,%r11\r\n    0x000000010c4c55ae: add %r11,%r10\r\n    0x000000010c4c55b1: cmp %r10,%rax\r\n    0x000000010c4c55b4: jne 0x000000010c44b780  ;   {runtime_call ic_miss_stub}\r\n    0x000000010c4c55ba: xchg %ax,%ax\r\n    0x000000010c4c55bc: nopl 0x0(%rax)\r\n    [Verified Entry Point]\r\n    0x000000010c4c55c0: mov %eax,-0x14000(%rsp)\r\n    0x000000010c4c55c7: push %rbp\r\n    0x000000010c4c55c8: sub $0x20,%rsp  ;*synchronization entry\r\n                                        ; - main.ComplexExpression::arrays@-1 (line 51)\r\n    0x000000010c4c55cc: mov %rsi,%rcx\r\n    0x000000010c4c55cf: mov 0xc(%rsi),%ebp  ;*getfield arraySize {reexecute=0 rethrow=0 return_oop=0}\r\n                                            ; - main.ComplexExpression::arrays@4 (line 51)\r\n    0x000000010c4c55d2: test %ebp,%ebp\r\n    0x000000010c4c55d4: jle L0006  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\r\n                                   ; - main.ComplexExpression::arrays@7 (line 51)\r\n    0x000000010c4c55da: mov 0x10(%rsi),%r11d  ;*getfield a {reexecute=0 rethrow=0 return_oop=0}\r\n                                              ; - main.ComplexExpression::arrays@16 (line 52)\r\n    0x000000010c4c55de: xchg %ax,%ax\r\n    0x000000010c4c55e0: mov 0xc(%r12,%r11,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\r\n                                                    ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                    ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c55e5: test %r10d,%r10d\r\n    0x000000010c4c55e8: jbe L0007\r\n    0x000000010c4c55ee: movslq %ebp,%r9\r\n    0x000000010c4c55f1: movslq %r10d,%r10\r\n    0x000000010c4c55f4: dec %r9\r\n    0x000000010c4c55f7: cmp %r10,%r9\r\n    0x000000010c4c55fa: nopw 0x0(%rax,%rax,1)\r\n    0x000000010c4c5600: jae L0007\r\n    0x000000010c4c5606: mov 0x14(%rsi),%ebx  ;*getfield b {reexecute=0 rethrow=0 return_oop=0}\r\n                                             ; - main.ComplexExpression::arrays@22 (line 52)\r\n    0x000000010c4c5609: mov 0xc(%r12,%rbx,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\r\n                                                    ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                    ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c560e: test %r10d,%r10d\r\n    0x000000010c4c5611: jbe L0007\r\n    0x000000010c4c5617: movslq %r10d,%r10\r\n    0x000000010c4c561a: nopw 0x0(%rax,%rax,1)\r\n    0x000000010c4c5620: cmp %r10,%r9\r\n    0x000000010c4c5623: jae L0007\r\n    0x000000010c4c5629: mov 0x18(%rsi),%r8d  ;*getfield result {reexecute=0 rethrow=0 return_oop=0}\r\n                                             ; - main.ComplexExpression::arrays@11 (line 52)\r\n    0x000000010c4c562d: mov 0xc(%r12,%r8,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\r\n                                                   ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                   ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c5632: test %r10d,%r10d\r\n    0x000000010c4c5635: jbe L0007\r\n    0x000000010c4c563b: movslq %r10d,%r10\r\n    0x000000010c4c563e: xchg %ax,%ax\r\n    0x000000010c4c5640: cmp %r10,%r9\r\n    0x000000010c4c5643: jae L0007\r\n    0x000000010c4c5649: lea (%r12,%r8,8),%rdx\r\n    0x000000010c4c564d: lea (%r12,%r11,8),%rdi\r\n    0x000000010c4c5651: mov %edx,%r11d\r\n    0x000000010c4c5654: lea (%r12,%rbx,8),%rax\r\n    0x000000010c4c5658: shr $0x2,%r11d\r\n    0x000000010c4c565c: and $0x7,%r11d\r\n    0x000000010c4c5660: mov $0x3,%r9d\r\n    0x000000010c4c5666: sub %r11d,%r9d\r\n    0x000000010c4c5669: and $0x7,%r9d\r\n    0x000000010c4c566d: inc %r9d\r\n    0x000000010c4c5670: cmp %ebp,%r9d\r\n    0x000000010c4c5673: cmovg %ebp,%r9d\r\n    0x000000010c4c5677: xor %r10d,%r10d\r\n    0x000000010c4c567a: xor %r11d,%r11d  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\r\n                                         ; - main.ComplexExpression::arrays@10 (line 52)\r\n                 L0000: vmovss 0x10(%rax,%r11,4),%xmm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5684: vmovss 0x10(%rdi,%r11,4),%xmm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c568b: vmulss %xmm1,%xmm0,%xmm3\r\n    0x000000010c4c568f: vaddss %xmm1,%xmm3,%xmm2\r\n    0x000000010c4c5693: vsubss %xmm1,%xmm2,%xmm3\r\n    0x000000010c4c5697: vdivss %xmm1,%xmm3,%xmm1\r\n    0x000000010c4c569b: vaddss %xmm0,%xmm1,%xmm2\r\n    0x000000010c4c569f: vaddss %xmm0,%xmm2,%xmm1\r\n    0x000000010c4c56a3: vaddss %xmm0,%xmm1,%xmm2\r\n    0x000000010c4c56a7: vaddss %xmm0,%xmm2,%xmm0\r\n    0x000000010c4c56ab: vmovss %xmm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c56b2: inc %r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\r\n                                   ; - main.ComplexExpression::arrays@78 (line 51)\r\n    0x000000010c4c56b5: cmp %r9d,%r11d\r\n    0x000000010c4c56b8: jl L0000  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\r\n                                  ; - main.ComplexExpression::arrays@7 (line 51)\r\n    0x000000010c4c56ba: mov %ebp,%r9d\r\n    0x000000010c4c56bd: add $0xffffffe1,%r9d\r\n    0x000000010c4c56c1: mov $0x80000000,%r8d\r\n    0x000000010c4c56c7: cmp %r9d,%ebp\r\n    0x000000010c4c56ca: cmovl %r8d,%r9d\r\n    0x000000010c4c56ce: cmp %r9d,%r11d\r\n    0x000000010c4c56d1: jge L0004\r\n    0x000000010c4c56d7: mov $0x7d00,%ebx\r\n                 L0001: mov %r9d,%esi\r\n    0x000000010c4c56df: sub %r11d,%esi\r\n    0x000000010c4c56e2: cmp %r11d,%r9d\r\n    0x000000010c4c56e5: cmovl %r10d,%esi\r\n    0x000000010c4c56e9: cmp $0x7d00,%esi\r\n    0x000000010c4c56ef: cmova %ebx,%esi\r\n    0x000000010c4c56f2: add %r11d,%esi\r\n    0x000000010c4c56f5: data16 data16 nopw 0x0(%rax,%rax,1)  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\r\n                                                             ; - main.ComplexExpression::arrays@10 (line 52)\r\n                 L0002: vmovdqu 0x10(%rax,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5707: vmovdqu 0x10(%rdi,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c570e: vmulps %ymm0,%ymm1,%ymm2\r\n    0x000000010c4c5712: vaddps %ymm0,%ymm2,%ymm2\r\n    0x000000010c4c5716: vsubps %ymm0,%ymm2,%ymm2\r\n    0x000000010c4c571a: vdivps %ymm0,%ymm2,%ymm0\r\n    0x000000010c4c571e: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c5722: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c5726: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c572a: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c572e: vmovdqu %ymm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c5735: vmovdqu 0x30(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c573c: vmovdqu 0x30(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5743: vmulps %ymm1,%ymm0,%ymm2\r\n    0x000000010c4c5747: vaddps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c574b: vsubps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c574f: vdivps %ymm1,%ymm2,%ymm1\r\n    0x000000010c4c5753: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c5757: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c575b: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c575f: vaddps %ymm0,%ymm1,%ymm0\r\n    0x000000010c4c5763: vmovdqu %ymm0,0x30(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c576a: vmovdqu 0x50(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c5771: vmovdqu 0x50(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5778: vmulps %ymm1,%ymm0,%ymm2\r\n    0x000000010c4c577c: vaddps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c5780: vsubps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c5784: vdivps %ymm1,%ymm2,%ymm1\r\n    0x000000010c4c5788: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c578c: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c5790: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c5794: vaddps %ymm0,%ymm1,%ymm0\r\n    0x000000010c4c5798: vmovdqu %ymm0,0x50(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c579f: vmovdqu 0x70(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c57a6: vmovdqu 0x70(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c57ad: vmulps %ymm1,%ymm0,%ymm2\r\n    0x000000010c4c57b1: vaddps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c57b5: vsubps %ymm1,%ymm2,%ymm2\r\n    0x000000010c4c57b9: vdivps %ymm1,%ymm2,%ymm1\r\n    0x000000010c4c57bd: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c57c1: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c57c5: vaddps %ymm0,%ymm1,%ymm1\r\n    0x000000010c4c57c9: vaddps %ymm0,%ymm1,%ymm0\r\n    0x000000010c4c57cd: vmovdqu %ymm0,0x70(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c57d4: add $0x20,%r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\r\n                                         ; - main.ComplexExpression::arrays@78 (line 51)\r\n    0x000000010c4c57d8: cmp %esi,%r11d\r\n    0x000000010c4c57db: nopl 0x0(%rax,%rax,1)\r\n    0x000000010c4c57e0: jl L0002  ;*goto {reexecute=0 rethrow=0 return_oop=0}\r\n                                  ; - main.ComplexExpression::arrays@81 (line 51)\r\n    0x000000010c4c57e6: mov 0x348(%r15),%rsi  ; ImmutableOopMap {rcx=Oop rdi=Oop rdx=Oop rax=Oop }\r\n                                              ;*goto {reexecute=1 rethrow=0 return_oop=0}\r\n                                              ; - (reexecute) main.ComplexExpression::arrays@81 (line 51)\r\n    0x000000010c4c57ed: test %eax,(%rsi)  ;*goto {reexecute=0 rethrow=0 return_oop=0}\r\n                                          ; - main.ComplexExpression::arrays@81 (line 51)\r\n                                          ;   {poll} *** SAFEPOINT POLL ***\r\n    0x000000010c4c57ef: cmp %r9d,%r11d\r\n    0x000000010c4c57f2: jl L0001\r\n    0x000000010c4c57f8: mov %ebp,%r10d\r\n    0x000000010c4c57fb: add $0xfffffff9,%r10d\r\n    0x000000010c4c57ff: cmp %r10d,%ebp\r\n    0x000000010c4c5802: cmovl %r8d,%r10d\r\n    0x000000010c4c5806: cmp %r10d,%r11d\r\n    0x000000010c4c5809: jge L0004\r\n    0x000000010c4c580b: nop  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\r\n                             ; - main.ComplexExpression::arrays@10 (line 52)\r\n                 L0003: vmovdqu 0x10(%rax,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5813: vmovdqu 0x10(%rdi,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c581a: vmulps %ymm0,%ymm1,%ymm2\r\n    0x000000010c4c581e: vaddps %ymm0,%ymm2,%ymm2\r\n    0x000000010c4c5822: vsubps %ymm0,%ymm2,%ymm2\r\n    0x000000010c4c5826: vdivps %ymm0,%ymm2,%ymm0\r\n    0x000000010c4c582a: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c582e: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c5832: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c5836: vaddps %ymm1,%ymm0,%ymm0\r\n    0x000000010c4c583a: vmovdqu %ymm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                         ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c5841: add $0x8,%r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\r\n                                        ; - main.ComplexExpression::arrays@78 (line 51)\r\n    0x000000010c4c5845: cmp %r10d,%r11d\r\n    0x000000010c4c5848: jl L0003  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\r\n                                  ; - main.ComplexExpression::arrays@7 (line 51)\r\n                 L0004: cmp %ebp,%r11d\r\n    0x000000010c4c584d: jge L0006\r\n    0x000000010c4c584f: nop  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\r\n                             ; - main.ComplexExpression::arrays@10 (line 52)\r\n                 L0005: vmovss 0x10(%rax,%r11,4),%xmm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@26 (line 52)\r\n    0x000000010c4c5857: vmovss 0x10(%rdi,%r11,4),%xmm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@20 (line 52)\r\n    0x000000010c4c585e: vmulss %xmm1,%xmm0,%xmm3\r\n    0x000000010c4c5862: vaddss %xmm1,%xmm3,%xmm2\r\n    0x000000010c4c5866: vsubss %xmm1,%xmm2,%xmm3\r\n    0x000000010c4c586a: vdivss %xmm1,%xmm3,%xmm1\r\n    0x000000010c4c586e: vaddss %xmm0,%xmm1,%xmm2\r\n    0x000000010c4c5872: vaddss %xmm0,%xmm2,%xmm1\r\n    0x000000010c4c5876: vaddss %xmm0,%xmm1,%xmm2\r\n    0x000000010c4c587a: vaddss %xmm0,%xmm2,%xmm0\r\n    0x000000010c4c587e: vmovss %xmm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                        ; - main.ComplexExpression::arrays@77 (line 52)\r\n    0x000000010c4c5885: inc %r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\r\n                                   ; - main.ComplexExpression::arrays@78 (line 51)\r\n    0x000000010c4c5888: cmp %ebp,%r11d\r\n    0x000000010c4c588b: jl L0005\r\n                 L0006: vzeroupper\r\n    0x000000010c4c5890: add $0x20,%rsp\r\n    0x000000010c4c5894: pop %rbp\r\n    0x000000010c4c5895: cmp 0x340(%r15),%rsp  ;   {poll_return} *** SAFEPOINT POLL ***\r\n    0x000000010c4c589c: ja L0008\r\n    0x000000010c4c58a2: ret  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\r\n                             ; - main.ComplexExpression::arrays@7 (line 51)\r\n                 L0007: mov $0xffffff76,%esi\r\n    0x000000010c4c58a8: mov %rcx,(%rsp)\r\n    0x000000010c4c58ac: vzeroupper\r\n    0x000000010c4c58af: call 0x000000010c451000  ; ImmutableOopMap {[0]=Oop }\r\n                                                 ;*if_icmpge {reexecute=1 rethrow=0 return_oop=0}\r\n                                                 ; - (reexecute) main.ComplexExpression::arrays@7 (line 51)\r\n                                                 ;   {runtime_call UncommonTrapBlob}\r\n                 L0008: movabs $0x10c4c5895,%r10  ;   {internal_word}\r\n    0x000000010c4c58be: mov %r10,0x358(%r15)\r\n    0x000000010c4c58c5: jmp 0x000000010c452100  ;   {runtime_call SafepointBlob}\r\n    0x000000010c4c58ca: hlt\r\n    0x000000010c4c58cb: hlt\r\n    0x000000010c4c58cc: hlt\r\n    0x000000010c4c58cd: hlt\r\n    0x000000010c4c58ce: hlt\r\n    0x000000010c4c58cf: hlt\r\n    0x000000010c4c58d0: hlt\r\n    0x000000010c4c58d1: hlt\r\n    0x000000010c4c58d2: hlt\r\n    0x000000010c4c58d3: hlt\r\n    0x000000010c4c58d4: hlt\r\n    0x000000010c4c58d5: hlt\r\n    0x000000010c4c58d6: hlt\r\n    0x000000010c4c58d7: hlt\r\n    0x000000010c4c58d8: hlt\r\n    0x000000010c4c58d9: hlt\r\n    0x000000010c4c58da: hlt\r\n    0x000000010c4c58db: hlt\r\n    0x000000010c4c58dc: hlt\r\n    0x000000010c4c58dd: hlt\r\n    0x000000010c4c58de: hlt\r\n    0x000000010c4c58df: hlt\r\n    [Exception Handler]\r\n    0x000000010c4c58e0: jmp 0x000000010c464a00  ;   {no_reloc}\r\n    [Deopt Handler Code]\r\n    0x000000010c4c58e5: call 0x000000010c4c58ea\r\n    0x000000010c4c58ea: subq $0x5,(%rsp)\r\n    0x000000010c4c58ef: jmp 0x000000010c4513a0  ;   {runtime_call DeoptimizationBlob}\r\n    0x000000010c4c58f4: hlt\r\n    0x000000010c4c58f5: hlt\r\n    0x000000010c4c58f6: hlt\r\n    0x000000010c4c58f7: hlt\r\n\r\nIt seems like the for loop was translated to multiple &quot;assembly loops&quot;.\r\nThe main part is in L0002 I guess, where you can see the loop unrolling, but there is also L0000, L0003 and L0005 which also seem to be part of the for loop but Im having a hard time understanding how they fit in.\r\n\r\nCan someone explain how do all the parts in all the labels compose the actual loop?\r\nI imagine its some &quot;known&quot; pattern in the JIT that I just dont know.","title":"Understanding JIT&#39;s rewrite of a for loop","body":"<p>I have the following Java code (all arrays are initialized before we call &quot;arrays&quot; and all are of size &quot;arraySize&quot;)</p>\n<pre><code>int arraySize = 64;\n\nfloat[] a;\nfloat[] b;\nfloat[] result;\n\npublic void arrays() {\n    for (int i = 0; i &lt; arraySize; i++) {\n        result[i] = ((a[i] * b[i] + b[i] - b[i]) / b[i]) +\n                     a[i] + a[i] + a[i] + a[i];\n    }\n}\n</code></pre>\n<p>The JIT's output for it is:</p>\n<pre><code># {method} {0x00000001034751a8} 'arrays' '()V' in 'main/ComplexExpression'\n#           [sp+0x30]  (sp of caller)\n[Entry Point]\n0x000000010c4c55a0: mov 0x8(%rsi),%r10d\n0x000000010c4c55a4: movabs $0x800000000,%r11\n0x000000010c4c55ae: add %r11,%r10\n0x000000010c4c55b1: cmp %r10,%rax\n0x000000010c4c55b4: jne 0x000000010c44b780  ;   {runtime_call ic_miss_stub}\n0x000000010c4c55ba: xchg %ax,%ax\n0x000000010c4c55bc: nopl 0x0(%rax)\n[Verified Entry Point]\n0x000000010c4c55c0: mov %eax,-0x14000(%rsp)\n0x000000010c4c55c7: push %rbp\n0x000000010c4c55c8: sub $0x20,%rsp  ;*synchronization entry\n                                    ; - main.ComplexExpression::arrays@-1 (line 51)\n0x000000010c4c55cc: mov %rsi,%rcx\n0x000000010c4c55cf: mov 0xc(%rsi),%ebp  ;*getfield arraySize {reexecute=0 rethrow=0 return_oop=0}\n                                        ; - main.ComplexExpression::arrays@4 (line 51)\n0x000000010c4c55d2: test %ebp,%ebp\n0x000000010c4c55d4: jle L0006  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\n                               ; - main.ComplexExpression::arrays@7 (line 51)\n0x000000010c4c55da: mov 0x10(%rsi),%r11d  ;*getfield a {reexecute=0 rethrow=0 return_oop=0}\n                                          ; - main.ComplexExpression::arrays@16 (line 52)\n0x000000010c4c55de: xchg %ax,%ax\n0x000000010c4c55e0: mov 0xc(%r12,%r11,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\n                                                ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c55e5: test %r10d,%r10d\n0x000000010c4c55e8: jbe L0007\n0x000000010c4c55ee: movslq %ebp,%r9\n0x000000010c4c55f1: movslq %r10d,%r10\n0x000000010c4c55f4: dec %r9\n0x000000010c4c55f7: cmp %r10,%r9\n0x000000010c4c55fa: nopw 0x0(%rax,%rax,1)\n0x000000010c4c5600: jae L0007\n0x000000010c4c5606: mov 0x14(%rsi),%ebx  ;*getfield b {reexecute=0 rethrow=0 return_oop=0}\n                                         ; - main.ComplexExpression::arrays@22 (line 52)\n0x000000010c4c5609: mov 0xc(%r12,%rbx,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\n                                                ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c560e: test %r10d,%r10d\n0x000000010c4c5611: jbe L0007\n0x000000010c4c5617: movslq %r10d,%r10\n0x000000010c4c561a: nopw 0x0(%rax,%rax,1)\n0x000000010c4c5620: cmp %r10,%r9\n0x000000010c4c5623: jae L0007\n0x000000010c4c5629: mov 0x18(%rsi),%r8d  ;*getfield result {reexecute=0 rethrow=0 return_oop=0}\n                                         ; - main.ComplexExpression::arrays@11 (line 52)\n0x000000010c4c562d: mov 0xc(%r12,%r8,8),%r10d  ; implicit exception: dispatches to 0x000000010c4c58a3\n                                               ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                               ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c5632: test %r10d,%r10d\n0x000000010c4c5635: jbe L0007\n0x000000010c4c563b: movslq %r10d,%r10\n0x000000010c4c563e: xchg %ax,%ax\n0x000000010c4c5640: cmp %r10,%r9\n0x000000010c4c5643: jae L0007\n0x000000010c4c5649: lea (%r12,%r8,8),%rdx\n0x000000010c4c564d: lea (%r12,%r11,8),%rdi\n0x000000010c4c5651: mov %edx,%r11d\n0x000000010c4c5654: lea (%r12,%rbx,8),%rax\n0x000000010c4c5658: shr $0x2,%r11d\n0x000000010c4c565c: and $0x7,%r11d\n0x000000010c4c5660: mov $0x3,%r9d\n0x000000010c4c5666: sub %r11d,%r9d\n0x000000010c4c5669: and $0x7,%r9d\n0x000000010c4c566d: inc %r9d\n0x000000010c4c5670: cmp %ebp,%r9d\n0x000000010c4c5673: cmovg %ebp,%r9d\n0x000000010c4c5677: xor %r10d,%r10d\n0x000000010c4c567a: xor %r11d,%r11d  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\n                                     ; - main.ComplexExpression::arrays@10 (line 52)\n             L0000: vmovss 0x10(%rax,%r11,4),%xmm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5684: vmovss 0x10(%rdi,%r11,4),%xmm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c568b: vmulss %xmm1,%xmm0,%xmm3\n0x000000010c4c568f: vaddss %xmm1,%xmm3,%xmm2\n0x000000010c4c5693: vsubss %xmm1,%xmm2,%xmm3\n0x000000010c4c5697: vdivss %xmm1,%xmm3,%xmm1\n0x000000010c4c569b: vaddss %xmm0,%xmm1,%xmm2\n0x000000010c4c569f: vaddss %xmm0,%xmm2,%xmm1\n0x000000010c4c56a3: vaddss %xmm0,%xmm1,%xmm2\n0x000000010c4c56a7: vaddss %xmm0,%xmm2,%xmm0\n0x000000010c4c56ab: vmovss %xmm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c56b2: inc %r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\n                               ; - main.ComplexExpression::arrays@78 (line 51)\n0x000000010c4c56b5: cmp %r9d,%r11d\n0x000000010c4c56b8: jl L0000  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\n                              ; - main.ComplexExpression::arrays@7 (line 51)\n0x000000010c4c56ba: mov %ebp,%r9d\n0x000000010c4c56bd: add $0xffffffe1,%r9d\n0x000000010c4c56c1: mov $0x80000000,%r8d\n0x000000010c4c56c7: cmp %r9d,%ebp\n0x000000010c4c56ca: cmovl %r8d,%r9d\n0x000000010c4c56ce: cmp %r9d,%r11d\n0x000000010c4c56d1: jge L0004\n0x000000010c4c56d7: mov $0x7d00,%ebx\n             L0001: mov %r9d,%esi\n0x000000010c4c56df: sub %r11d,%esi\n0x000000010c4c56e2: cmp %r11d,%r9d\n0x000000010c4c56e5: cmovl %r10d,%esi\n0x000000010c4c56e9: cmp $0x7d00,%esi\n0x000000010c4c56ef: cmova %ebx,%esi\n0x000000010c4c56f2: add %r11d,%esi\n0x000000010c4c56f5: data16 data16 nopw 0x0(%rax,%rax,1)  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\n                                                         ; - main.ComplexExpression::arrays@10 (line 52)\n             L0002: vmovdqu 0x10(%rax,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5707: vmovdqu 0x10(%rdi,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c570e: vmulps %ymm0,%ymm1,%ymm2\n0x000000010c4c5712: vaddps %ymm0,%ymm2,%ymm2\n0x000000010c4c5716: vsubps %ymm0,%ymm2,%ymm2\n0x000000010c4c571a: vdivps %ymm0,%ymm2,%ymm0\n0x000000010c4c571e: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c5722: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c5726: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c572a: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c572e: vmovdqu %ymm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c5735: vmovdqu 0x30(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c573c: vmovdqu 0x30(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5743: vmulps %ymm1,%ymm0,%ymm2\n0x000000010c4c5747: vaddps %ymm1,%ymm2,%ymm2\n0x000000010c4c574b: vsubps %ymm1,%ymm2,%ymm2\n0x000000010c4c574f: vdivps %ymm1,%ymm2,%ymm1\n0x000000010c4c5753: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c5757: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c575b: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c575f: vaddps %ymm0,%ymm1,%ymm0\n0x000000010c4c5763: vmovdqu %ymm0,0x30(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c576a: vmovdqu 0x50(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c5771: vmovdqu 0x50(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5778: vmulps %ymm1,%ymm0,%ymm2\n0x000000010c4c577c: vaddps %ymm1,%ymm2,%ymm2\n0x000000010c4c5780: vsubps %ymm1,%ymm2,%ymm2\n0x000000010c4c5784: vdivps %ymm1,%ymm2,%ymm1\n0x000000010c4c5788: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c578c: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c5790: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c5794: vaddps %ymm0,%ymm1,%ymm0\n0x000000010c4c5798: vmovdqu %ymm0,0x50(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c579f: vmovdqu 0x70(%rdi,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c57a6: vmovdqu 0x70(%rax,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c57ad: vmulps %ymm1,%ymm0,%ymm2\n0x000000010c4c57b1: vaddps %ymm1,%ymm2,%ymm2\n0x000000010c4c57b5: vsubps %ymm1,%ymm2,%ymm2\n0x000000010c4c57b9: vdivps %ymm1,%ymm2,%ymm1\n0x000000010c4c57bd: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c57c1: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c57c5: vaddps %ymm0,%ymm1,%ymm1\n0x000000010c4c57c9: vaddps %ymm0,%ymm1,%ymm0\n0x000000010c4c57cd: vmovdqu %ymm0,0x70(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c57d4: add $0x20,%r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\n                                     ; - main.ComplexExpression::arrays@78 (line 51)\n0x000000010c4c57d8: cmp %esi,%r11d\n0x000000010c4c57db: nopl 0x0(%rax,%rax,1)\n0x000000010c4c57e0: jl L0002  ;*goto {reexecute=0 rethrow=0 return_oop=0}\n                              ; - main.ComplexExpression::arrays@81 (line 51)\n0x000000010c4c57e6: mov 0x348(%r15),%rsi  ; ImmutableOopMap {rcx=Oop rdi=Oop rdx=Oop rax=Oop }\n                                          ;*goto {reexecute=1 rethrow=0 return_oop=0}\n                                          ; - (reexecute) main.ComplexExpression::arrays@81 (line 51)\n0x000000010c4c57ed: test %eax,(%rsi)  ;*goto {reexecute=0 rethrow=0 return_oop=0}\n                                      ; - main.ComplexExpression::arrays@81 (line 51)\n                                      ;   {poll} *** SAFEPOINT POLL ***\n0x000000010c4c57ef: cmp %r9d,%r11d\n0x000000010c4c57f2: jl L0001\n0x000000010c4c57f8: mov %ebp,%r10d\n0x000000010c4c57fb: add $0xfffffff9,%r10d\n0x000000010c4c57ff: cmp %r10d,%ebp\n0x000000010c4c5802: cmovl %r8d,%r10d\n0x000000010c4c5806: cmp %r10d,%r11d\n0x000000010c4c5809: jge L0004\n0x000000010c4c580b: nop  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\n                         ; - main.ComplexExpression::arrays@10 (line 52)\n             L0003: vmovdqu 0x10(%rax,%r11,4),%ymm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5813: vmovdqu 0x10(%rdi,%r11,4),%ymm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c581a: vmulps %ymm0,%ymm1,%ymm2\n0x000000010c4c581e: vaddps %ymm0,%ymm2,%ymm2\n0x000000010c4c5822: vsubps %ymm0,%ymm2,%ymm2\n0x000000010c4c5826: vdivps %ymm0,%ymm2,%ymm0\n0x000000010c4c582a: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c582e: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c5832: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c5836: vaddps %ymm1,%ymm0,%ymm0\n0x000000010c4c583a: vmovdqu %ymm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                     ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c5841: add $0x8,%r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\n                                    ; - main.ComplexExpression::arrays@78 (line 51)\n0x000000010c4c5845: cmp %r10d,%r11d\n0x000000010c4c5848: jl L0003  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\n                              ; - main.ComplexExpression::arrays@7 (line 51)\n             L0004: cmp %ebp,%r11d\n0x000000010c4c584d: jge L0006\n0x000000010c4c584f: nop  ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}\n                         ; - main.ComplexExpression::arrays@10 (line 52)\n             L0005: vmovss 0x10(%rax,%r11,4),%xmm1  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@26 (line 52)\n0x000000010c4c5857: vmovss 0x10(%rdi,%r11,4),%xmm0  ;*faload {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@20 (line 52)\n0x000000010c4c585e: vmulss %xmm1,%xmm0,%xmm3\n0x000000010c4c5862: vaddss %xmm1,%xmm3,%xmm2\n0x000000010c4c5866: vsubss %xmm1,%xmm2,%xmm3\n0x000000010c4c586a: vdivss %xmm1,%xmm3,%xmm1\n0x000000010c4c586e: vaddss %xmm0,%xmm1,%xmm2\n0x000000010c4c5872: vaddss %xmm0,%xmm2,%xmm1\n0x000000010c4c5876: vaddss %xmm0,%xmm1,%xmm2\n0x000000010c4c587a: vaddss %xmm0,%xmm2,%xmm0\n0x000000010c4c587e: vmovss %xmm0,0x10(%rdx,%r11,4)  ;*fastore {reexecute=0 rethrow=0 return_oop=0}\n                                                    ; - main.ComplexExpression::arrays@77 (line 52)\n0x000000010c4c5885: inc %r11d  ;*iinc {reexecute=0 rethrow=0 return_oop=0}\n                               ; - main.ComplexExpression::arrays@78 (line 51)\n0x000000010c4c5888: cmp %ebp,%r11d\n0x000000010c4c588b: jl L0005\n             L0006: vzeroupper\n0x000000010c4c5890: add $0x20,%rsp\n0x000000010c4c5894: pop %rbp\n0x000000010c4c5895: cmp 0x340(%r15),%rsp  ;   {poll_return} *** SAFEPOINT POLL ***\n0x000000010c4c589c: ja L0008\n0x000000010c4c58a2: ret  ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\n                         ; - main.ComplexExpression::arrays@7 (line 51)\n             L0007: mov $0xffffff76,%esi\n0x000000010c4c58a8: mov %rcx,(%rsp)\n0x000000010c4c58ac: vzeroupper\n0x000000010c4c58af: call 0x000000010c451000  ; ImmutableOopMap {[0]=Oop }\n                                             ;*if_icmpge {reexecute=1 rethrow=0 return_oop=0}\n                                             ; - (reexecute) main.ComplexExpression::arrays@7 (line 51)\n                                             ;   {runtime_call UncommonTrapBlob}\n             L0008: movabs $0x10c4c5895,%r10  ;   {internal_word}\n0x000000010c4c58be: mov %r10,0x358(%r15)\n0x000000010c4c58c5: jmp 0x000000010c452100  ;   {runtime_call SafepointBlob}\n0x000000010c4c58ca: hlt\n0x000000010c4c58cb: hlt\n0x000000010c4c58cc: hlt\n0x000000010c4c58cd: hlt\n0x000000010c4c58ce: hlt\n0x000000010c4c58cf: hlt\n0x000000010c4c58d0: hlt\n0x000000010c4c58d1: hlt\n0x000000010c4c58d2: hlt\n0x000000010c4c58d3: hlt\n0x000000010c4c58d4: hlt\n0x000000010c4c58d5: hlt\n0x000000010c4c58d6: hlt\n0x000000010c4c58d7: hlt\n0x000000010c4c58d8: hlt\n0x000000010c4c58d9: hlt\n0x000000010c4c58da: hlt\n0x000000010c4c58db: hlt\n0x000000010c4c58dc: hlt\n0x000000010c4c58dd: hlt\n0x000000010c4c58de: hlt\n0x000000010c4c58df: hlt\n[Exception Handler]\n0x000000010c4c58e0: jmp 0x000000010c464a00  ;   {no_reloc}\n[Deopt Handler Code]\n0x000000010c4c58e5: call 0x000000010c4c58ea\n0x000000010c4c58ea: subq $0x5,(%rsp)\n0x000000010c4c58ef: jmp 0x000000010c4513a0  ;   {runtime_call DeoptimizationBlob}\n0x000000010c4c58f4: hlt\n0x000000010c4c58f5: hlt\n0x000000010c4c58f6: hlt\n0x000000010c4c58f7: hlt\n</code></pre>\n<p>It seems like the for loop was translated to multiple &quot;assembly loops&quot;.\nThe main part is in L0002 I guess, where you can see the loop unrolling, but there is also L0000, L0003 and L0005 which also seem to be part of the for loop but Im having a hard time understanding how they fit in.</p>\n<p>Can someone explain how do all the parts in all the labels compose the actual loop?\nI imagine its some &quot;known&quot; pattern in the JIT that I just dont know.</p>\n"},{"tags":["java","generics","reflection","abstract-class"],"comments":[{"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"score":0,"creation_date":1689032301,"post_id":76657477,"comment_id":135152970,"body_markdown":"How do you address the fact that o is unknown at runtime, which lead me to incorporate Reflection in the first place?","body":"How do you address the fact that o is unknown at runtime, which lead me to incorporate Reflection in the first place?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689035459,"post_id":76657477,"comment_id":135153248,"body_markdown":"I&#39;ve posted an answer that addresses using reflection for this. Hope that helps.","body":"I&#39;ve posted an answer that addresses using reflection for this. Hope that helps."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1689035614,"post_id":76657477,"comment_id":135153262,"body_markdown":"it might help if you included some examples of the classes that you are trying to sort","body":"it might help if you included some examples of the classes that you are trying to sort"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1689098268,"post_id":76657477,"comment_id":135164096,"body_markdown":"You can simplify the first approach to `Comparator&lt;Class1&gt; comparatorDescending = Comparator.comparing(Class1::getDate).reversed();` And now think about it: even if you repeat this line a dozen times for a dozen different classes, it’s simpler than what you are trying to do with Reflection. Not to speak of more readable, more robust, type safe, and more efficient.","body":"You can simplify the first approach to <code>Comparator&lt;Class1&gt; comparatorDescending = Comparator.comparing(Class1::getDate).reversed();</code> And now think about it: even if you repeat this line a dozen times for a dozen different classes, it’s simpler than what you are trying to do with Reflection. Not to speak of more readable, more robust, type safe, and more efficient."},{"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"score":0,"creation_date":1689151375,"post_id":76657477,"comment_id":135171248,"body_markdown":"@Holger You are not wrong. Actually, the only reason I considered Reflection was not because it would be cool to do, it was so that I could avoid sharing state between my subclass and superclass. Using reflection enabled me to do the sorting in the parent class and write getter/setter methods in the subclass to access state where and when needed. Using the prior, simpler approach would have forced me to share access to state and didn&#39;t fit in the spirit of how my subclasses and superclass relate to one another.","body":"@Holger You are not wrong. Actually, the only reason I considered Reflection was not because it would be cool to do, it was so that I could avoid sharing state between my subclass and superclass. Using reflection enabled me to do the sorting in the parent class and write getter/setter methods in the subclass to access state where and when needed. Using the prior, simpler approach would have forced me to share access to state and didn&#39;t fit in the spirit of how my subclasses and superclass relate to one another."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689156300,"post_id":76657477,"comment_id":135172357,"body_markdown":"The usual approach would be to make the method generic, i.e. add a type parameter `&lt;T extends Class1&gt;` and add a parameter like a `Function&lt;T,…&gt;` to access a property or a `Comparator&lt;T&gt;` to determine the required order. Unless you’re assuming that every subclass has a `getDate` method (which would be weird, as you could simply declare an abstract method then), the name of the method would have to be a parameter anyway, so using a `Function` instead is still decoupling superclass and subclass, but in a typesafe way.","body":"The usual approach would be to make the method generic, i.e. add a type parameter <code>&lt;T extends Class1&gt;</code> and add a parameter like a <code>Function&lt;T,…&gt;</code> to access a property or a <code>Comparator&lt;T&gt;</code> to determine the required order. Unless you’re assuming that every subclass has a <code>getDate</code> method (which would be weird, as you could simply declare an abstract method then), the name of the method would have to be a parameter anyway, so using a <code>Function</code> instead is still decoupling superclass and subclass, but in a typesafe way."},{"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"score":0,"creation_date":1689181109,"post_id":76657477,"comment_id":135178244,"body_markdown":"@Holger Not quite. I think what I will do is edit the original post and show the basic structure to illustrate more clearly what the problem was. Stay tuned.","body":"@Holger Not quite. I think what I will do is edit the original post and show the basic structure to illustrate more clearly what the problem was. Stay tuned."}],"answers":[{"comments":[{"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"score":0,"creation_date":1689043723,"post_id":76658054,"comment_id":135153913,"body_markdown":"That worked for me. I had to add `.reversed()` to the Comparator to get it to sort in the order that I needed, and I changed the `(Comparable)` cast to have it be what I needed as well, In this case `(LocalDate)`. Thank you.","body":"That worked for me. I had to add <code>.reversed()</code> to the Comparator to get it to sort in the order that I needed, and I changed the <code>(Comparable)</code> cast to have it be what I needed as well, In this case <code>(LocalDate)</code>. Thank you."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689043957,"post_id":76658054,"comment_id":135153928,"body_markdown":"@J_code Happy to help.","body":"@J_code Happy to help."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689044075,"creation_date":1689035416,"answer_id":76658054,"question_id":76657477,"body_markdown":"You can cast the return value of the method to `Comparable` (you will have to make sure the return value of `getDate` matches this). The comparator can also be simplified using `Comparator.comparing`.\r\n\r\n```java\r\ntry {\r\n\tMethod m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\r\n\tthis.classlist2sort.sort(Comparator.comparing(o -&gt; {\r\n\t\ttry {\r\n\t\t\treturn (Comparable) m.invoke(o);\r\n\t\t} catch (IllegalAccessException | InvocationTargetException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}).reversed());\r\n} catch (NoSuchMethodException e) {\r\n\tthrow new RuntimeException(e); // or other handling\r\n}\r\n```","title":"Lambda sort using Reflection","body":"<p>You can cast the return value of the method to <code>Comparable</code> (you will have to make sure the return value of <code>getDate</code> matches this). The comparator can also be simplified using <code>Comparator.comparing</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    Method m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\n    this.classlist2sort.sort(Comparator.comparing(o -&gt; {\n        try {\n            return (Comparable) m.invoke(o);\n        } catch (IllegalAccessException | InvocationTargetException e) {\n            throw new RuntimeException(e);\n        }\n    }).reversed());\n} catch (NoSuchMethodException e) {\n    throw new RuntimeException(e); // or other handling\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689072543,"creation_date":1689072543,"answer_id":76661212,"question_id":76657477,"body_markdown":"If you have access to the source code of `Class1`, `Class2`, etc. you can define an interface to be used for the comparator and avoid reflection altogether. Let&#39;s say:\r\n```\r\npublic interface HasDate {\r\n\r\n  LocalDate getDate();\r\n}\r\n```\r\nI know the name is bad, but it will do for an example. Define the comparator to work with `HasDate`, and you can sort lists, whose elements implement the interface.\r\n```\r\npublic class RandomStuff {\r\n\r\n  public static void main(String[] args) {\r\n    Comparator&lt;HasDate&gt; dateComparator = (o1, o2) -&gt; o2.getDate().compareTo(o1.getDate());\r\n\r\n    List&lt;Class1&gt; list1 = new ArrayList&lt;&gt;();\r\n    list1.add(new Class1(LocalDate.now()));\r\n    list1.add(new Class1(LocalDate.now().plusDays(1)));\r\n    list1.add(new Class1(LocalDate.now().minusDays(1)));\r\n    list1.sort(dateComparator);\r\n    System.out.println(list1);\r\n\r\n    List&lt;Class2&gt; list2 = new ArrayList&lt;&gt;();\r\n    list2.add(new Class2(LocalDate.now()));\r\n    list2.add(new Class2(LocalDate.now().plusDays(1)));\r\n    list2.add(new Class2(LocalDate.now().minusDays(1)));\r\n    list2.sort(dateComparator);\r\n    System.out.println(list2);\r\n  }\r\n}\r\n```","title":"Lambda sort using Reflection","body":"<p>If you have access to the source code of <code>Class1</code>, <code>Class2</code>, etc. you can define an interface to be used for the comparator and avoid reflection altogether. Let's say:</p>\n<pre><code>public interface HasDate {\n\n  LocalDate getDate();\n}\n</code></pre>\n<p>I know the name is bad, but it will do for an example. Define the comparator to work with <code>HasDate</code>, and you can sort lists, whose elements implement the interface.</p>\n<pre><code>public class RandomStuff {\n\n  public static void main(String[] args) {\n    Comparator&lt;HasDate&gt; dateComparator = (o1, o2) -&gt; o2.getDate().compareTo(o1.getDate());\n\n    List&lt;Class1&gt; list1 = new ArrayList&lt;&gt;();\n    list1.add(new Class1(LocalDate.now()));\n    list1.add(new Class1(LocalDate.now().plusDays(1)));\n    list1.add(new Class1(LocalDate.now().minusDays(1)));\n    list1.sort(dateComparator);\n    System.out.println(list1);\n\n    List&lt;Class2&gt; list2 = new ArrayList&lt;&gt;();\n    list2.add(new Class2(LocalDate.now()));\n    list2.add(new Class2(LocalDate.now().plusDays(1)));\n    list2.add(new Class2(LocalDate.now().minusDays(1)));\n    list2.sort(dateComparator);\n    System.out.println(list2);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76658054,"answer_count":2,"score":0,"last_activity_date":1689072543,"creation_date":1689024861,"question_id":76657477,"body_markdown":"I&#39;m working on a project that requires the use of sorted Class lists, and I have a lambda expression that worked according to the type of class I needed to be sorted. The sorting occurs on a date field of the class itself:\r\n\r\n```\r\nComparator&lt;Class1&gt; comparatorDescending = (exp1, exp2) -&gt; exp2.getDate().compareTo(exp1.getDate());\r\n        this.classlist2sort.sort(comparatorDescending);\r\n\r\n```\r\n\r\nHowever I have two, maybe more classes that need to be sorted in this way and I decided to move the lambda expression above to the parent class and make it a generic. This required a bit of work however in that I now need to pass into the parent class the type of class I&#39;m dealing with (Class1.class), condition on that, then sort with generic. I tried the following using Reflection:\r\n\r\n```\r\nMethod m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\r\n\r\nComparator&lt;T&gt; comparatorDescending = (exp1, exp2) -&gt;\r\n                m.invoke(exp2).compareTo(m.invoke(exp1));\r\nthis.classlist2sort((Comparator&lt;? super T&gt;) comparatorDescending);\r\n```\r\nDoing so gave me an error message: `Unhandled exceptions: java.lang.IllegalAccessException, java.lang.reflect.InvocationTargetException` to which I followed the suggested workaround of surrounding the expression with a try catch in the following manner:\r\n\r\n```\r\nMethod[] input = this.typeParameterClass.getDeclaredMethods();\r\nMethod m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\r\n\r\nComparator&lt;T&gt; comparatorDescending = (exp1, exp2) -&gt; {\r\n            try {\r\n                return m.invoke(exp2).compareTo(m.invoke(exp1));\r\n            } catch (IllegalAccessException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (InvocationTargetException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\nthis.classlist2sort((Comparator&lt;? super T&gt;) comparatorDescending);\r\n```\r\nUnfortunately, doin this resulted in a `Cannot resolve method &#39;compareTo&#39; in &#39;Object&#39;` error. I am wondering now if what I&#39;m trying to do is possible. Any help is appreciated","title":"Lambda sort using Reflection","body":"<p>I'm working on a project that requires the use of sorted Class lists, and I have a lambda expression that worked according to the type of class I needed to be sorted. The sorting occurs on a date field of the class itself:</p>\n<pre><code>Comparator&lt;Class1&gt; comparatorDescending = (exp1, exp2) -&gt; exp2.getDate().compareTo(exp1.getDate());\n        this.classlist2sort.sort(comparatorDescending);\n\n</code></pre>\n<p>However I have two, maybe more classes that need to be sorted in this way and I decided to move the lambda expression above to the parent class and make it a generic. This required a bit of work however in that I now need to pass into the parent class the type of class I'm dealing with (Class1.class), condition on that, then sort with generic. I tried the following using Reflection:</p>\n<pre><code>Method m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\n\nComparator&lt;T&gt; comparatorDescending = (exp1, exp2) -&gt;\n                m.invoke(exp2).compareTo(m.invoke(exp1));\nthis.classlist2sort((Comparator&lt;? super T&gt;) comparatorDescending);\n</code></pre>\n<p>Doing so gave me an error message: <code>Unhandled exceptions: java.lang.IllegalAccessException, java.lang.reflect.InvocationTargetException</code> to which I followed the suggested workaround of surrounding the expression with a try catch in the following manner:</p>\n<pre><code>Method[] input = this.typeParameterClass.getDeclaredMethods();\nMethod m = this.typeParameterClass.getDeclaredMethod(&quot;getDate&quot;);\n\nComparator&lt;T&gt; comparatorDescending = (exp1, exp2) -&gt; {\n            try {\n                return m.invoke(exp2).compareTo(m.invoke(exp1));\n            } catch (IllegalAccessException e) {\n                throw new RuntimeException(e);\n            } catch (InvocationTargetException e) {\n                throw new RuntimeException(e);\n            }\nthis.classlist2sort((Comparator&lt;? super T&gt;) comparatorDescending);\n</code></pre>\n<p>Unfortunately, doin this resulted in a <code>Cannot resolve method 'compareTo' in 'Object'</code> error. I am wondering now if what I'm trying to do is possible. Any help is appreciated</p>\n"},{"tags":["java","react-native","kotlin","gradle","npm-scripts"],"comments":[{"owner":{"account_id":28993752,"reputation":1,"user_id":22208884,"display_name":"akpatil "},"score":0,"creation_date":1689072420,"post_id":76661173,"comment_id":135158255,"body_markdown":"https://github.com/react-native-video/react-native-video/issues/3171#issue-1798615585","body":"<a href=\"https://github.com/react-native-video/react-native-video/issues/3171#issue-1798615585\" rel=\"nofollow noreferrer\">github.com/react-native-video/react-native-video/issues/&hellip;</a>"}],"owner":{"account_id":28993752,"reputation":1,"user_id":22208884,"display_name":"akpatil "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":718,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689072332,"creation_date":1689072332,"question_id":76661173,"body_markdown":"#Bug\r\n**Could not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Could not resolve all task dependencies for configuration &#39;:app:debugCompileClasspath&#39;.\r\n   &gt; Could not resolve project :react-native-video.\r\n     Required by:\r\n         project :app\r\n      &gt; No matching configuration of project :react-native-video was found. The consumer was configured to find a component for use during compile-time, preferably optimized for Android, as well as attribute**\r\n      #platform\r\n       #Android\r\n       **package.json**\r\n      \r\n```\r\n` {\r\n  &quot;name&quot;: &quot;newapp&quot;,\r\n  &quot;version&quot;: &quot;0.0.1&quot;,\r\n  &quot;private&quot;: true,\r\n  &quot;scripts&quot;: {\r\n    &quot;android&quot;: &quot;react-native run-android&quot;,\r\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\r\n    &quot;lint&quot;: &quot;eslint .&quot;,\r\n    &quot;start&quot;: &quot;react-native start&quot;,\r\n    &quot;test&quot;: &quot;jest&quot;,\r\n    &quot;postinstall&quot;: &quot;patch-package&quot;\r\n  },\r\n  &quot;dependencies&quot;: {\r\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.19.0&quot;,\r\n    &quot;@react-native-community/masked-view&quot;: &quot;^0.1.11&quot;,\r\n    &quot;@react-native-firebase/app&quot;: &quot;^18.1.0&quot;,\r\n    &quot;@react-native-firebase/auth&quot;: &quot;^18.1.0&quot;,\r\n    &quot;@react-native-firebase/functions&quot;: &quot;^18.1.0&quot;,\r\n    &quot;@react-native-firebase/in-app-messaging&quot;: &quot;^18.1.0&quot;,\r\n    &quot;@react-native-firebase/messaging&quot;: &quot;^18.1.0&quot;,\r\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.5.8&quot;,\r\n    &quot;@react-navigation/drawer&quot;: &quot;^6.1.8&quot;,\r\n    &quot;@react-navigation/elements&quot;: &quot;^1.3.18&quot;,\r\n    &quot;@react-navigation/material-bottom-tabs&quot;: &quot;^6.2.16&quot;,\r\n    &quot;@react-navigation/material-top-tabs&quot;: &quot;^6.6.3&quot;,\r\n    &quot;@react-navigation/native&quot;: &quot;^6.0.6&quot;,\r\n    &quot;@react-navigation/native-stack&quot;: &quot;^6.9.13&quot;,\r\n    &quot;@react-navigation/stack&quot;: &quot;^6.0.11&quot;,\r\n    &quot;deprecated-react-native-prop-types&quot;: &quot;^4.1.0&quot;,\r\n    &quot;doctor&quot;: &quot;^0.3.0&quot;,\r\n    &quot;patch-package&quot;: &quot;^7.0.0&quot;,\r\n    &quot;react&quot;: &quot;18.2.0&quot;,\r\n    &quot;react-native&quot;: &quot;^0.72.1&quot;,\r\n    &quot;react-native-gesture-handler&quot;: &quot;^2.12.0&quot;,\r\n    &quot;react-native-reanimated&quot;: &quot;^3.3.0&quot;,\r\n    &quot;react-native-safe-area-context&quot;: &quot;^4.6.3&quot;,\r\n    &quot;react-native-screens&quot;: &quot;^3.22.0&quot;,\r\n    &quot;react-native-tab-view&quot;: &quot;^3.5.2&quot;,\r\n    &quot;react-native-vector-icons&quot;: &quot;^9.2.0&quot;,\r\n    &quot;react-native-video&quot;: &quot;^2.3.1&quot;,\r\n    &quot;react-native-video-controls&quot;: &quot;^2.8.1&quot;,\r\n    &quot;react-native-video-player&quot;: &quot;^0.14.0&quot;\r\n  },\r\n  &quot;devDependencies&quot;: {\r\n    &quot;@babel/core&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@babel/preset-env&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@babel/runtime&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@react-native/eslint-config&quot;: &quot;^0.72.2&quot;,\r\n    &quot;@react-native/metro-config&quot;: &quot;^0.72.7&quot;,\r\n    &quot;babel-jest&quot;: &quot;^29.2.1&quot;,\r\n    &quot;eslint&quot;: &quot;^8.19.0&quot;,\r\n    &quot;jest&quot;: &quot;^29.2.1&quot;,\r\n    &quot;metro-react-native-babel-preset&quot;: &quot;0.76.5&quot;,\r\n    &quot;prettier&quot;: &quot;^2.4.1&quot;,\r\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;\r\n  },\r\n  &quot;engines&quot;: {\r\n    &quot;node&quot;: &quot;&gt;=16&quot;\r\n  }\r\n}`\r\n```\r\n\r\n**settings.gradle**\r\n```\r\nrootProject.name = &#39;newapp&#39;\r\n// apply from: file(&quot;../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesSettingsGradle(settings)\r\n// include &#39;:app&#39;\r\n// includeBuild(&#39;../node_modules/@react-native/gradle-plugin&#39;)\r\n// include &#39;:react-native-video&#39;\r\n// project(&#39;:react-native-video&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-video/android-exoplayer&#39;)\r\n\r\n\r\ninclude &#39;:app&#39;\r\ninclude &#39;:react-native-video&#39;\r\nproject(&#39;:react-native-video&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-video/android-exoplayer&#39;)\r\nincludeBuild(&#39;../node_modules/@react-native/gradle-plugin&#39;)\r\napply from: file(&quot;../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesSettingsGradle(settings)\r\n```\r\n\r\n**android/app/build.gradle**\r\n```\r\napply plugin: &quot;com.android.application&quot;\r\napply plugin: &quot;com.facebook.react&quot;\r\napply from: &quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;\r\n//apply plugin:&quot;com.google.gms.google-services&quot;\r\n\r\n\r\n/**\r\n * This is the configuration block to customize your React Native Android app.\r\n * By default you don&#39;t need to apply any configuration, just uncomment the lines you need.\r\n */\r\nreact {\r\n    /* Folders */\r\n    //   The root of your project, i.e. where &quot;package.json&quot; lives. Default is &#39;..&#39;\r\n    // root = file(&quot;../&quot;)\r\n    //   The folder where the react-native NPM package is. Default is ../node_modules/react-native\r\n    // reactNativeDir = file(&quot;../node_modules/react-native&quot;)\r\n    //   The folder where the react-native Codegen package is. Default is ../node_modules/@react-native/codegen\r\n    // codegenDir = file(&quot;../node_modules/@react-native/codegen&quot;)\r\n    //   The cli.js file which is the React Native CLI entrypoint. Default is ../node_modules/react-native/cli.js\r\n    // cliFile = file(&quot;../node_modules/react-native/cli.js&quot;)\r\n\r\n    /* Variants */\r\n    //   The list of variants to that are debuggable. For those we&#39;re going to\r\n    //   skip the bundling of the JS bundle and the assets. By default is just &#39;debug&#39;.\r\n    //   If you add flavors like lite, prod, etc. you&#39;ll have to list your debuggableVariants.\r\n    // debuggableVariants = [&quot;liteDebug&quot;, &quot;prodDebug&quot;]\r\n\r\n    /* Bundling */\r\n    //   A list containing the node command and its flags. Default is just &#39;node&#39;.\r\n    // nodeExecutableAndArgs = [&quot;node&quot;]\r\n    //\r\n    //   The command to run when bundling. By default is &#39;bundle&#39;\r\n    // bundleCommand = &quot;ram-bundle&quot;\r\n    //\r\n    //   The path to the CLI configuration file. Default is empty.\r\n    // bundleConfig = file(../rn-cli.config.js)\r\n    //\r\n    //   The name of the generated asset file containing your JS bundle\r\n    // bundleAssetName = &quot;MyApplication.android.bundle&quot;\r\n    //\r\n    //   The entry file for bundle generation. Default is &#39;index.android.js&#39; or &#39;index.js&#39;\r\n    // entryFile = file(&quot;../js/MyApplication.android.js&quot;)\r\n    //\r\n    //   A list of extra flags to pass to the &#39;bundle&#39; commands.\r\n    //   See https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle\r\n    // extraPackagerArgs = []\r\n\r\n    /* Hermes Commands */\r\n    //   The hermes compiler command to run. By default it is &#39;hermesc&#39;\r\n    // hermesCommand = &quot;$rootDir/my-custom-hermesc/bin/hermesc&quot;\r\n    //\r\n    //   The list of flags to pass to the Hermes compiler. By default is &quot;-O&quot;, &quot;-output-source-map&quot;\r\n    // hermesFlags = [&quot;-O&quot;, &quot;-output-source-map&quot;]\r\n}\r\n\r\n/**\r\n * Set this to true to Run Proguard on Release builds to minify the Java bytecode.\r\n */\r\ndef enableProguardInReleaseBuilds = false\r\n\r\n/**\r\n * The preferred build flavor of JavaScriptCore (JSC)\r\n *\r\n * For example, to use the international variant, you can use:\r\n * `def jscFlavor = &#39;org.webkit:android-jsc-intl:+&#39;`\r\n *\r\n * The international variant includes ICU i18n library and necessary data\r\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\r\n * give correct results when using with locales other than en-US. Note that\r\n * this variant is about 6MiB larger per architecture than default.\r\n */\r\ndef jscFlavor = &#39;org.webkit:android-jsc:+&#39;\r\n\r\nandroid {\r\n    ndkVersion rootProject.ext.ndkVersion\r\n\r\n    compileSdkVersion rootProject.ext.compileSdkVersion\r\n\r\n    namespace &quot;com.newapp&quot;\r\n    defaultConfig {\r\n        applicationId &quot;com.newapp&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n    }\r\n    signingConfigs {\r\n        debug {\r\n            storeFile file(&#39;debug.keystore&#39;)\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n    }\r\n    buildTypes {\r\n        debug {\r\n            signingConfig signingConfigs.debug\r\n        }\r\n        release {\r\n            // Caution! In production, you need to generate your own keystore file.\r\n            // see https://reactnative.dev/docs/signed-apk-android.\r\n            signingConfig signingConfigs.debug\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    // The version of react-native is set by the React Native Gradle Plugin\r\n    implementation(&quot;com.facebook.react:react-android&quot;)\r\n    implementation project(&#39;:react-native-video&#39;)\r\n\r\n//    implementation(platform(&quot;com.google.firebase:firebase-bom:32.1.1&quot;))\r\n//    implementation(&quot;com.google.firebase:firebase-analytics-ktx&quot;)\r\n      implementation(&#39;:react-native-video&#39;)\r\n      implementation &quot;androidx.appcompat:appcompat:1.0.0&quot;\r\n       implementation(platform(&quot;org.jetbrains.kotlin:kotlin-bom:1.8.0&quot;))\r\n    debugImplementation(&quot;com.facebook.flipper:flipper:${FLIPPER_VERSION}&quot;)\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:${FLIPPER_VERSION}&quot;) {\r\n        exclude group:&#39;com.squareup.okhttp3&#39;, module:&#39;okhttp&#39;\r\n    }\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:${FLIPPER_VERSION}&quot;)\r\n    if (hermesEnabled.toBoolean()) {\r\n        implementation(&quot;com.facebook.react:hermes-android&quot;)\r\n    } else {\r\n        implementation jscFlavor\r\n    }\r\n}\r\n\r\nproject.ext.react = [\r\n        enableHermes: true,\r\n        bundleInDebug: true\r\n]\r\n\r\n// also add this to force rebuild reanimated:\r\nproject.ext.reanimated = [\r\n        buildFromSource: true\r\n]\r\n// project.ext.video=[\r\n//     buildFromSource: true\r\n// ]\r\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\r\n\r\n```\r\n**android/build.gradle**\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext {\r\n        buildToolsVersion = &quot;33.0.0&quot;\r\n        minSdkVersion = 21\r\n        compileSdkVersion = 33\r\n        targetSdkVersion = 33\r\n\r\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\r\n        ndkVersion = &quot;23.1.7779620&quot;\r\n    }\r\n   repositories {\r\n    google()\r\n    mavenCentral()\r\n    \r\n    //jcenter()\r\n    // maven { url &quot;https://maven.google.com&quot; }\r\n    //  mavenLocal()\r\n        jcenter() {\r\n            content {\r\n                includeModule(&quot;com.yqritc&quot;, &quot;android-scalablevideoview&quot;)\r\n            }\r\n        }\r\n        maven {\r\n            url &#39;https://maven.google.com&#39;\r\n        }\r\n    //     maven {\r\n    //         // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n    //         url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n    //     }\r\n    //      maven { url &quot;https://google.bintray.com/exoplayer&quot; }\r\n}\r\n\r\n    dependencies {\r\n        classpath(&quot;com.android.tools.build:gradle&quot;)\r\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n         //    classpath (&quot;com.google.gms:google-services:4.3.15&quot;)\r\n    }\r\n    allprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n}\r\n```\r\n**nodemodules/react-native-video/android-exoplayer/build.gradle**\r\n```\r\napply plugin: &#39;com.android.library&#39;\r\n\r\nandroid {\r\n    compileSdkVersion = 33\r\n    buildToolsVersion = &quot;33.0.0&quot;\r\n\r\n    defaultConfig {\r\n        minSdkVersion = 21\r\n        targetSdkVersion = 33\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation&#39;com.facebook.react:react-native:+&#39;\r\n    implementation &#39;com.google.android.exoplayer:exoplayer:2.7.3&#39;\r\n    implementation(&#39;com.google.android.exoplayer:extension-okhttp:2.7.3&#39;) {\r\n        exclude group: &#39;com.squareup.okhttp3&#39;, module: &#39;okhttp&#39;\r\n    }\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.9.1&#39;\r\n    }\r\n```\r\n\r\n\r\nI tried all available solution please let me kow what else I can do I have tried cleaning gradle it is getting cleaned bud when I go for **npm run android** it&#39;s giving above error.Whilw I&#39;m expecting that video should be running","title":"Could not resolve project :react-native-video. Required by: project :app &gt; No matching configuration of project :react-native-video was found","body":"<p>#Bug\n**Could not determine the dependencies of task ':app:compileDebugJavaWithJavac'.</p>\n<blockquote>\n<p>Could not resolve all task dependencies for configuration ':app:debugCompileClasspath'.\nCould not resolve project :react-native-video.\nRequired by:\nproject :app\n&gt; No matching configuration of project :react-native-video was found. The consumer was configured to find a component for use during compile-time, preferably optimized for Android, as well as attribute**\n#platform\n#Android\n<strong>package.json</strong></p>\n</blockquote>\n<pre><code>` {\n  &quot;name&quot;: &quot;newapp&quot;,\n  &quot;version&quot;: &quot;0.0.1&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;android&quot;: &quot;react-native run-android&quot;,\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\n    &quot;lint&quot;: &quot;eslint .&quot;,\n    &quot;start&quot;: &quot;react-native start&quot;,\n    &quot;test&quot;: &quot;jest&quot;,\n    &quot;postinstall&quot;: &quot;patch-package&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.19.0&quot;,\n    &quot;@react-native-community/masked-view&quot;: &quot;^0.1.11&quot;,\n    &quot;@react-native-firebase/app&quot;: &quot;^18.1.0&quot;,\n    &quot;@react-native-firebase/auth&quot;: &quot;^18.1.0&quot;,\n    &quot;@react-native-firebase/functions&quot;: &quot;^18.1.0&quot;,\n    &quot;@react-native-firebase/in-app-messaging&quot;: &quot;^18.1.0&quot;,\n    &quot;@react-native-firebase/messaging&quot;: &quot;^18.1.0&quot;,\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.5.8&quot;,\n    &quot;@react-navigation/drawer&quot;: &quot;^6.1.8&quot;,\n    &quot;@react-navigation/elements&quot;: &quot;^1.3.18&quot;,\n    &quot;@react-navigation/material-bottom-tabs&quot;: &quot;^6.2.16&quot;,\n    &quot;@react-navigation/material-top-tabs&quot;: &quot;^6.6.3&quot;,\n    &quot;@react-navigation/native&quot;: &quot;^6.0.6&quot;,\n    &quot;@react-navigation/native-stack&quot;: &quot;^6.9.13&quot;,\n    &quot;@react-navigation/stack&quot;: &quot;^6.0.11&quot;,\n    &quot;deprecated-react-native-prop-types&quot;: &quot;^4.1.0&quot;,\n    &quot;doctor&quot;: &quot;^0.3.0&quot;,\n    &quot;patch-package&quot;: &quot;^7.0.0&quot;,\n    &quot;react&quot;: &quot;18.2.0&quot;,\n    &quot;react-native&quot;: &quot;^0.72.1&quot;,\n    &quot;react-native-gesture-handler&quot;: &quot;^2.12.0&quot;,\n    &quot;react-native-reanimated&quot;: &quot;^3.3.0&quot;,\n    &quot;react-native-safe-area-context&quot;: &quot;^4.6.3&quot;,\n    &quot;react-native-screens&quot;: &quot;^3.22.0&quot;,\n    &quot;react-native-tab-view&quot;: &quot;^3.5.2&quot;,\n    &quot;react-native-vector-icons&quot;: &quot;^9.2.0&quot;,\n    &quot;react-native-video&quot;: &quot;^2.3.1&quot;,\n    &quot;react-native-video-controls&quot;: &quot;^2.8.1&quot;,\n    &quot;react-native-video-player&quot;: &quot;^0.14.0&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;@babel/core&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/preset-env&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/runtime&quot;: &quot;^7.20.0&quot;,\n    &quot;@react-native/eslint-config&quot;: &quot;^0.72.2&quot;,\n    &quot;@react-native/metro-config&quot;: &quot;^0.72.7&quot;,\n    &quot;babel-jest&quot;: &quot;^29.2.1&quot;,\n    &quot;eslint&quot;: &quot;^8.19.0&quot;,\n    &quot;jest&quot;: &quot;^29.2.1&quot;,\n    &quot;metro-react-native-babel-preset&quot;: &quot;0.76.5&quot;,\n    &quot;prettier&quot;: &quot;^2.4.1&quot;,\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;\n  },\n  &quot;engines&quot;: {\n    &quot;node&quot;: &quot;&gt;=16&quot;\n  }\n}`\n</code></pre>\n<p><strong>settings.gradle</strong></p>\n<pre><code>rootProject.name = 'newapp'\n// apply from: file(&quot;../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesSettingsGradle(settings)\n// include ':app'\n// includeBuild('../node_modules/@react-native/gradle-plugin')\n// include ':react-native-video'\n// project(':react-native-video').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-video/android-exoplayer')\n\n\ninclude ':app'\ninclude ':react-native-video'\nproject(':react-native-video').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-video/android-exoplayer')\nincludeBuild('../node_modules/@react-native/gradle-plugin')\napply from: file(&quot;../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesSettingsGradle(settings)\n</code></pre>\n<p><strong>android/app/build.gradle</strong></p>\n<pre><code>apply plugin: &quot;com.android.application&quot;\napply plugin: &quot;com.facebook.react&quot;\napply from: &quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;\n//apply plugin:&quot;com.google.gms.google-services&quot;\n\n\n/**\n * This is the configuration block to customize your React Native Android app.\n * By default you don't need to apply any configuration, just uncomment the lines you need.\n */\nreact {\n    /* Folders */\n    //   The root of your project, i.e. where &quot;package.json&quot; lives. Default is '..'\n    // root = file(&quot;../&quot;)\n    //   The folder where the react-native NPM package is. Default is ../node_modules/react-native\n    // reactNativeDir = file(&quot;../node_modules/react-native&quot;)\n    //   The folder where the react-native Codegen package is. Default is ../node_modules/@react-native/codegen\n    // codegenDir = file(&quot;../node_modules/@react-native/codegen&quot;)\n    //   The cli.js file which is the React Native CLI entrypoint. Default is ../node_modules/react-native/cli.js\n    // cliFile = file(&quot;../node_modules/react-native/cli.js&quot;)\n\n    /* Variants */\n    //   The list of variants to that are debuggable. For those we're going to\n    //   skip the bundling of the JS bundle and the assets. By default is just 'debug'.\n    //   If you add flavors like lite, prod, etc. you'll have to list your debuggableVariants.\n    // debuggableVariants = [&quot;liteDebug&quot;, &quot;prodDebug&quot;]\n\n    /* Bundling */\n    //   A list containing the node command and its flags. Default is just 'node'.\n    // nodeExecutableAndArgs = [&quot;node&quot;]\n    //\n    //   The command to run when bundling. By default is 'bundle'\n    // bundleCommand = &quot;ram-bundle&quot;\n    //\n    //   The path to the CLI configuration file. Default is empty.\n    // bundleConfig = file(../rn-cli.config.js)\n    //\n    //   The name of the generated asset file containing your JS bundle\n    // bundleAssetName = &quot;MyApplication.android.bundle&quot;\n    //\n    //   The entry file for bundle generation. Default is 'index.android.js' or 'index.js'\n    // entryFile = file(&quot;../js/MyApplication.android.js&quot;)\n    //\n    //   A list of extra flags to pass to the 'bundle' commands.\n    //   See https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle\n    // extraPackagerArgs = []\n\n    /* Hermes Commands */\n    //   The hermes compiler command to run. By default it is 'hermesc'\n    // hermesCommand = &quot;$rootDir/my-custom-hermesc/bin/hermesc&quot;\n    //\n    //   The list of flags to pass to the Hermes compiler. By default is &quot;-O&quot;, &quot;-output-source-map&quot;\n    // hermesFlags = [&quot;-O&quot;, &quot;-output-source-map&quot;]\n}\n\n/**\n * Set this to true to Run Proguard on Release builds to minify the Java bytecode.\n */\ndef enableProguardInReleaseBuilds = false\n\n/**\n * The preferred build flavor of JavaScriptCore (JSC)\n *\n * For example, to use the international variant, you can use:\n * `def jscFlavor = 'org.webkit:android-jsc-intl:+'`\n *\n * The international variant includes ICU i18n library and necessary data\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\n * give correct results when using with locales other than en-US. Note that\n * this variant is about 6MiB larger per architecture than default.\n */\ndef jscFlavor = 'org.webkit:android-jsc:+'\n\nandroid {\n    ndkVersion rootProject.ext.ndkVersion\n\n    compileSdkVersion rootProject.ext.compileSdkVersion\n\n    namespace &quot;com.newapp&quot;\n    defaultConfig {\n        applicationId &quot;com.newapp&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 1\n        versionName &quot;1.0&quot;\n    }\n    signingConfigs {\n        debug {\n            storeFile file('debug.keystore')\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n    }\n    buildTypes {\n        debug {\n            signingConfig signingConfigs.debug\n        }\n        release {\n            // Caution! In production, you need to generate your own keystore file.\n            // see https://reactnative.dev/docs/signed-apk-android.\n            signingConfig signingConfigs.debug\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n        }\n    }\n}\n\ndependencies {\n    // The version of react-native is set by the React Native Gradle Plugin\n    implementation(&quot;com.facebook.react:react-android&quot;)\n    implementation project(':react-native-video')\n\n//    implementation(platform(&quot;com.google.firebase:firebase-bom:32.1.1&quot;))\n//    implementation(&quot;com.google.firebase:firebase-analytics-ktx&quot;)\n      implementation(':react-native-video')\n      implementation &quot;androidx.appcompat:appcompat:1.0.0&quot;\n       implementation(platform(&quot;org.jetbrains.kotlin:kotlin-bom:1.8.0&quot;))\n    debugImplementation(&quot;com.facebook.flipper:flipper:${FLIPPER_VERSION}&quot;)\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:${FLIPPER_VERSION}&quot;) {\n        exclude group:'com.squareup.okhttp3', module:'okhttp'\n    }\n\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:${FLIPPER_VERSION}&quot;)\n    if (hermesEnabled.toBoolean()) {\n        implementation(&quot;com.facebook.react:hermes-android&quot;)\n    } else {\n        implementation jscFlavor\n    }\n}\n\nproject.ext.react = [\n        enableHermes: true,\n        bundleInDebug: true\n]\n\n// also add this to force rebuild reanimated:\nproject.ext.reanimated = [\n        buildFromSource: true\n]\n// project.ext.video=[\n//     buildFromSource: true\n// ]\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\n\n</code></pre>\n<p><strong>android/build.gradle</strong></p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext {\n        buildToolsVersion = &quot;33.0.0&quot;\n        minSdkVersion = 21\n        compileSdkVersion = 33\n        targetSdkVersion = 33\n\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\n        ndkVersion = &quot;23.1.7779620&quot;\n    }\n   repositories {\n    google()\n    mavenCentral()\n    \n    //jcenter()\n    // maven { url &quot;https://maven.google.com&quot; }\n    //  mavenLocal()\n        jcenter() {\n            content {\n                includeModule(&quot;com.yqritc&quot;, &quot;android-scalablevideoview&quot;)\n            }\n        }\n        maven {\n            url 'https://maven.google.com'\n        }\n    //     maven {\n    //         // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n    //         url &quot;$rootDir/../node_modules/react-native/android&quot;\n    //     }\n    //      maven { url &quot;https://google.bintray.com/exoplayer&quot; }\n}\n\n    dependencies {\n        classpath(&quot;com.android.tools.build:gradle&quot;)\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n         //    classpath (&quot;com.google.gms:google-services:4.3.15&quot;)\n    }\n    allprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n}\n</code></pre>\n<p><strong>nodemodules/react-native-video/android-exoplayer/build.gradle</strong></p>\n<pre><code>apply plugin: 'com.android.library'\n\nandroid {\n    compileSdkVersion = 33\n    buildToolsVersion = &quot;33.0.0&quot;\n\n    defaultConfig {\n        minSdkVersion = 21\n        targetSdkVersion = 33\n    }\n}\n\ndependencies {\n    implementation'com.facebook.react:react-native:+'\n    implementation 'com.google.android.exoplayer:exoplayer:2.7.3'\n    implementation('com.google.android.exoplayer:extension-okhttp:2.7.3') {\n        exclude group: 'com.squareup.okhttp3', module: 'okhttp'\n    }\n    implementation 'com.squareup.okhttp3:okhttp:3.9.1'\n    }\n</code></pre>\n<p>I tried all available solution please let me kow what else I can do I have tried cleaning gradle it is getting cleaned bud when I go for <strong>npm run android</strong> it's giving above error.Whilw I'm expecting that video should be running</p>\n"},{"tags":["java","hibernate","jakarta-migration"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1689062670,"post_id":76659485,"comment_id":135156186,"body_markdown":"Ditch `hibernate-entitymanager` as that isn&#39;t needed anyumore. All the `org.hibernate.orm` versions in use should match. You are mixing different versions. I would also suggest to do things one by one. First java upgrade, next maven (or vice-versa) then start to upgrade to tomcat 10 (only change servlet stuff and keep old hibernate), then lastly upgrade hibernate. Finally you seem to have some custom code for Hibernate which needs to be migrated as well, classes in hibernate have been removed/replaced so fix your custom code as well. It isn&#39;t a drop in replacement.","body":"Ditch <code>hibernate-entitymanager</code> as that isn&#39;t needed anyumore. All the <code>org.hibernate.orm</code> versions in use should match. You are mixing different versions. I would also suggest to do things one by one. First java upgrade, next maven (or vice-versa) then start to upgrade to tomcat 10 (only change servlet stuff and keep old hibernate), then lastly upgrade hibernate. Finally you seem to have some custom code for Hibernate which needs to be migrated as well, classes in hibernate have been removed/replaced so fix your custom code as well. It isn&#39;t a drop in replacement."},{"owner":{"account_id":9121213,"reputation":101,"user_id":6786559,"display_name":"Saran"},"score":0,"creation_date":1689063807,"post_id":76659485,"comment_id":135156457,"body_markdown":"Thanks for the comments. Yes i have been doing step by step. Finally after trying to upgrade hibernate got stuck in it. So yes i will try to replace with all the org.hibernate.orm versions. and some of the functions are missing/removed in the hibernate library. Not sure how to replace the existing. Any  reference on how to use hibernate for latest stack? Thanks.","body":"Thanks for the comments. Yes i have been doing step by step. Finally after trying to upgrade hibernate got stuck in it. So yes i will try to replace with all the org.hibernate.orm versions. and some of the functions are missing/removed in the hibernate library. Not sure how to replace the existing. Any  reference on how to use hibernate for latest stack? Thanks."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689064024,"post_id":76659485,"comment_id":135156506,"body_markdown":"I would strongly suggest to chck the Hibernate release notes, those tell you generally what to modify.","body":"I would strongly suggest to chck the Hibernate release notes, those tell you generally what to modify."}],"owner":{"account_id":9121213,"reputation":101,"user_id":6786559,"display_name":"Saran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689072124,"creation_date":1689059694,"question_id":76659485,"body_markdown":"While Migrating java hybrid Application from java 8 to java 17 with latest maven version. Here are the following version changes during migration.\r\n\r\n\\-\\&gt; Jdk8 to jdk17\r\n\r\n\r\n\\-\\&gt; Maven 3.1 to maven 3.8.6\r\n\r\n\r\n\\-\\&gt; Tomcat 7 to Tomcat 10.\r\n\r\n\\-\\&gt; Migrate javax to jakarta servlet.\r\n\r\nHere are the following parent pom details as per new stack version:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;10.0.0&lt;/version&gt;\r\n\t&lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;6.1.7.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;6.0.0.Alpha7&lt;/version&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-envers-jakarta&lt;/artifactId&gt;\r\n\t&lt;version&gt;6.0.0.Alpha9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n      \r\n\r\n&gt; Following errors which i face during build project:\r\n```\r\ncannot find symbol \r\n[ERROR]   symbol:   class LogicalAuditExpression\r\n[ERROR]   location: package org.hibernate.envers.query.criteria cannot find symbol \r\n[ERROR]   symbol:   class JavaTypeDescriptor\r\n[ERROR]   location: package org.hibernate.type.descriptor.java cannot find symbol \r\n[ERROR]   symbol:   class BasicBinder \r\n[ERROR]   location: package org.hibernate.type.descriptor.sql cannot find symbol \r\n[ERROR]   symbol:   class SqlTypeDescriptor \r\n[ERROR]   location: class com.xxx.framework.base.jdbc.postgresql.PostgreSQLDialect cannot find symbol \r\n[ERROR]   symbol:   class YesNoType \r\n[ERROR]   location: package org.hibernate.type package org.hibernate.service.jdbc.dialect.internal does not exist\r\n```\r\n\r\nI tried changing hibernate core library version, still the error persists. Can you help to resolve or share any example related to hibernate with java 17? and also i cannot find hibernate.jpa library related to jakarta.\r\n\r\nI tried changing versions and library based on java 17. I want to build with latest stack version.","title":"How to rectify/resolve the compilation errors during migrating to Hibernate 6?","body":"<p>While Migrating java hybrid Application from java 8 to java 17 with latest maven version. Here are the following version changes during migration.</p>\n<p>-&gt; Jdk8 to jdk17</p>\n<p>-&gt; Maven 3.1 to maven 3.8.6</p>\n<p>-&gt; Tomcat 7 to Tomcat 10.</p>\n<p>-&gt; Migrate javax to jakarta servlet.</p>\n<p>Here are the following parent pom details as per new stack version:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n    &lt;version&gt;10.0.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;6.1.7.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n    &lt;version&gt;6.0.0.Alpha7&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-envers-jakarta&lt;/artifactId&gt;\n    &lt;version&gt;6.0.0.Alpha9&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;8.0.0.Final&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<blockquote>\n<p>Following errors which i face during build project:</p>\n</blockquote>\n<pre><code>cannot find symbol \n[ERROR]   symbol:   class LogicalAuditExpression\n[ERROR]   location: package org.hibernate.envers.query.criteria cannot find symbol \n[ERROR]   symbol:   class JavaTypeDescriptor\n[ERROR]   location: package org.hibernate.type.descriptor.java cannot find symbol \n[ERROR]   symbol:   class BasicBinder \n[ERROR]   location: package org.hibernate.type.descriptor.sql cannot find symbol \n[ERROR]   symbol:   class SqlTypeDescriptor \n[ERROR]   location: class com.xxx.framework.base.jdbc.postgresql.PostgreSQLDialect cannot find symbol \n[ERROR]   symbol:   class YesNoType \n[ERROR]   location: package org.hibernate.type package org.hibernate.service.jdbc.dialect.internal does not exist\n</code></pre>\n<p>I tried changing hibernate core library version, still the error persists. Can you help to resolve or share any example related to hibernate with java 17? and also i cannot find hibernate.jpa library related to jakarta.</p>\n<p>I tried changing versions and library based on java 17. I want to build with latest stack version.</p>\n"},{"tags":["java","asynchronous","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689072118,"creation_date":1689072118,"answer_id":76661134,"question_id":76657931,"body_markdown":"You can do it as follows:\r\n\r\n        serviceA.getRequestParams()\r\n                .flatMapMany(result -&gt; Flux.just(buildRequest1(), buildRequest2())\r\n                .flatMap(request -&gt; serviceB.doSomething(request))\r\n\r\nyou will get a `Flux` of responses","title":"Java Project Reactor - compose the same mono twice with different arguments","body":"<p>You can do it as follows:</p>\n<pre><code>    serviceA.getRequestParams()\n            .flatMapMany(result -&gt; Flux.just(buildRequest1(), buildRequest2())\n            .flatMap(request -&gt; serviceB.doSomething(request))\n</code></pre>\n<p>you will get a <code>Flux</code> of responses</p>\n"}],"owner":{"account_id":3415088,"reputation":193,"user_id":2864236,"display_name":"Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689072118,"creation_date":1689032542,"question_id":76657931,"body_markdown":"Suppose I have a function ```java Mono&lt;Response&gt; doSomething(Request request)``` in service B which accepts an argument and returns a parameter.\r\nWhat would be the best way to compose this function twice using different arguments with some reactive operator, so that each call occurs asynchronously, and the result can be processed?\r\nIf I were to use zip, I would essentially be looking for something like the following:\r\n```java\r\nreturn\r\nserviceA.getRequestParams()\r\n.map(result -&gt; buildRequest1(), buildReqest2() )\r\n.zip( request1 -&gt; serviceB.doSomething(request1), request2 -&gt; serviceB.doSomething(request2)\r\n.flatMap( response -&gt; {\r\n  response1 = response.getT1();\r\n  response2 = response.getT2():\r\n...\r\n});\r\n```\r\nI haven&#39;t found a way to do this with zip ( passing in an argument) so I&#39;m sure there&#39;s a better operator I can use.\r\nWhat would be the best option to achieve something like this?","title":"Java Project Reactor - compose the same mono twice with different arguments","body":"<p>Suppose I have a function <code>java Mono&lt;Response&gt; doSomething(Request request)</code> in service B which accepts an argument and returns a parameter.\nWhat would be the best way to compose this function twice using different arguments with some reactive operator, so that each call occurs asynchronously, and the result can be processed?\nIf I were to use zip, I would essentially be looking for something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return\nserviceA.getRequestParams()\n.map(result -&gt; buildRequest1(), buildReqest2() )\n.zip( request1 -&gt; serviceB.doSomething(request1), request2 -&gt; serviceB.doSomething(request2)\n.flatMap( response -&gt; {\n  response1 = response.getT1();\n  response2 = response.getT2():\n...\n});\n</code></pre>\n<p>I haven't found a way to do this with zip ( passing in an argument) so I'm sure there's a better operator I can use.\nWhat would be the best option to achieve something like this?</p>\n"},{"tags":["java","security","jenkins","continuous-integration","rest-assured"],"owner":{"account_id":9243671,"reputation":1,"user_id":6866242,"display_name":"Ravi Prakash Jakkamputi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689071785,"creation_date":1689071382,"question_id":76661036,"body_markdown":"From Rest Assured I sent a get request to obtain jenkins crumb without authentication details (user and user token), I could get the crumb and used it along with project api token to trigger build for the project using post request. I have not provided the authentication details for the post request also. \r\n\r\nMy expectation is that crumb should be accessed only by valid user and only that specific user should be able to use the crumb to trigger the job.\r\nWhat kind of security configuration should I do in Jenkins?\r\n\r\nInstalled Jenkins 2.401.2 in local machine as windows service.\r\nIn security configuration,\r\nchanged Authorization as &quot;Logged-in user can do anything&quot; and\r\nchecked the checkbox &quot;Allow anonymous read access&quot;.\r\nCSRF Protection setting is changed as &quot;strict crumb issuer&quot; and unchecked &quot;check session id&quot;.\r\nGenerated api token for a project as &quot;supersecret&quot;.\r\n\r\nFrom Rest assured used following code to get the crumb\r\n```\r\nResponse r = given().baseUri(&quot;http://localhost:8081&quot;)\r\n\t\t\t\t.contentType(ContentType.JSON)\r\n\t\t\t\t.log().all()\r\n\t\t\t\t.get(&quot;crumbIssuer/api/json&quot;);\r\n```\r\nI have extracted the crumb from the response to variable s and triggered build for the project with api token using following code\r\n```\r\ngiven().baseUri(&quot;http://localhost:8081&quot;).contentType(ContentType.JSON)\r\n\t\t\t\t.basePath(&quot;/job/ExampleJenkins&quot;)\r\n\t\t\t\t.contentType(ContentType.JSON)\r\n\t\t\t\t.header(&quot;Jenkins-Crumb&quot;, s)\r\n                                .post(&quot;/build?token=supersecret&quot;);\r\n```\r\nBuild got triggered for the job &quot;ExampleJenkins&quot;. \r\nIs it possible change security setting so that only any authenticated user using code\r\n.auth().basic(&quot;jenkinsuser&quot;,&quot;usertoken&quot;) \r\nshould be able to get the crumb and trigger the build\r\n\r\nI tried by changing the Authorization setting to not allow Anonymous read access, then I am not able to do the job with valid user credentials also. So, please suggest correct configuration setting for my problem","title":"Unauthenticated client is able to get jenkins crumb and trigger project build using the crumb","body":"<p>From Rest Assured I sent a get request to obtain jenkins crumb without authentication details (user and user token), I could get the crumb and used it along with project api token to trigger build for the project using post request. I have not provided the authentication details for the post request also.</p>\n<p>My expectation is that crumb should be accessed only by valid user and only that specific user should be able to use the crumb to trigger the job.\nWhat kind of security configuration should I do in Jenkins?</p>\n<p>Installed Jenkins 2.401.2 in local machine as windows service.\nIn security configuration,\nchanged Authorization as &quot;Logged-in user can do anything&quot; and\nchecked the checkbox &quot;Allow anonymous read access&quot;.\nCSRF Protection setting is changed as &quot;strict crumb issuer&quot; and unchecked &quot;check session id&quot;.\nGenerated api token for a project as &quot;supersecret&quot;.</p>\n<p>From Rest assured used following code to get the crumb</p>\n<pre><code>Response r = given().baseUri(&quot;http://localhost:8081&quot;)\n                .contentType(ContentType.JSON)\n                .log().all()\n                .get(&quot;crumbIssuer/api/json&quot;);\n</code></pre>\n<p>I have extracted the crumb from the response to variable s and triggered build for the project with api token using following code</p>\n<pre><code>given().baseUri(&quot;http://localhost:8081&quot;).contentType(ContentType.JSON)\n                .basePath(&quot;/job/ExampleJenkins&quot;)\n                .contentType(ContentType.JSON)\n                .header(&quot;Jenkins-Crumb&quot;, s)\n                                .post(&quot;/build?token=supersecret&quot;);\n</code></pre>\n<p>Build got triggered for the job &quot;ExampleJenkins&quot;.\nIs it possible change security setting so that only any authenticated user using code\n.auth().basic(&quot;jenkinsuser&quot;,&quot;usertoken&quot;)\nshould be able to get the crumb and trigger the build</p>\n<p>I tried by changing the Authorization setting to not allow Anonymous read access, then I am not able to do the job with valid user credentials also. So, please suggest correct configuration setting for my problem</p>\n"},{"tags":["java","gradle","gradle-plugin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689101795,"post_id":76657343,"comment_id":135164806,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28989980,"reputation":1,"user_id":22205981,"display_name":"Aleksey Fomichev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689071568,"creation_date":1689023185,"question_id":76657343,"body_markdown":"My plugin repository requires user and password credentials, I tried to use credentials plugin, but it&#39;s not possible to access credentials plugin in pluginManagement section in settings.gradle and there is no sence to use it only for build sections because I have to use unecrypted userName and password in pluginManagement section.\r\n\r\nI tried to use credentials plugin in pluginManagenent section","title":"Is there any way to use encrypted password in pluginManagement section gradle","body":"<p>My plugin repository requires user and password credentials, I tried to use credentials plugin, but it's not possible to access credentials plugin in pluginManagement section in settings.gradle and there is no sence to use it only for build sections because I have to use unecrypted userName and password in pluginManagement section.</p>\n<p>I tried to use credentials plugin in pluginManagenent section</p>\n"},{"tags":["java","logging","log4j","amazon-ses","smtpappender"],"answers":[{"tags":[],"owner":{"account_id":4330484,"reputation":571,"user_id":3536157,"display_name":"Hiren"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1628500301,"creation_date":1628500301,"answer_id":68709545,"question_id":68592665,"body_markdown":"Solution: I have used 1.6.4 version for mailapi and smtp jars.","title":"java mail aws smtp: javax.mail.AuthenticationFailedException: 220 Ready to start TLS","body":"<p>Solution: I have used 1.6.4 version for mailapi and smtp jars.</p>\n"},{"tags":[],"owner":{"account_id":3940837,"reputation":2674,"user_id":4443351,"accept_rate":71,"display_name":"Bizon4ik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637157183,"creation_date":1637157183,"answer_id":70005643,"question_id":68592665,"body_markdown":"Replace\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\non \r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"java mail aws smtp: javax.mail.AuthenticationFailedException: 220 Ready to start TLS","body":"<p>Replace</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\n        &lt;version&gt;1.6.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>on</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\n    &lt;version&gt;1.6.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5822379,"reputation":91,"user_id":4590004,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689071423,"creation_date":1689071423,"answer_id":76661042,"question_id":68592665,"body_markdown":"I managed to pass through this error simply by adding the following JVM properties : \r\n\r\n&gt; -Djdk.tls.client.protocols=TLSv1.2  \r\n&gt; -Dhttps.protocols=SSLv3,TLSv1,TLSv1.1,TLSv1.2  \r\n&gt; -Dmail.smtp.ssl.protocols=TLSv1.2\r\n","title":"java mail aws smtp: javax.mail.AuthenticationFailedException: 220 Ready to start TLS","body":"<p>I managed to pass through this error simply by adding the following JVM properties :</p>\n<blockquote>\n<p>-Djdk.tls.client.protocols=TLSv1.2<br />\n-Dhttps.protocols=SSLv3,TLSv1,TLSv1.1,TLSv1.2<br />\n-Dmail.smtp.ssl.protocols=TLSv1.2</p>\n</blockquote>\n"}],"owner":{"account_id":4330484,"reputation":571,"user_id":3536157,"display_name":"Hiren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1887,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68709545,"answer_count":3,"score":2,"last_activity_date":1689071423,"creation_date":1627655314,"question_id":68592665,"body_markdown":"I have configured the below properties for smtp appender. the same configuration works fine in local but getting error on AWS\r\n\r\n    log4j.appender.email=org.apache.log4j.net.SMTPAppender\r\n    log4j.appender.email.BufferSize=20\r\n    log4j.appender.email.SMTPHost=email-smtp.us-east-1.amazonaws.com\r\n    log4j.appender.email.SMTPUsername=&lt;username&gt;\r\n    log4j.appender.email.SMTPPassword=&lt;password&gt;\r\n    log4j.appender.email.SMTPPort=587\r\n    log4j.appender.email.From=&lt;from@email&gt;\r\n    log4j.appender.email.To=&lt;to@email&gt;\r\n    log4j.appender.email.Subject=&lt;Subjec&gt;\r\n    log4j.appender.email.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.email.layout.ConversionPattern=%d %-5p [%t] (%c{1}:%L) - %m%n\r\n    log4j.appender.email.SMTPDebug=true\r\n    log4j.appender.email.EnableSsl=true\r\n    log4j.appender.email.smtp.starttls.enable=true\r\n    log4j.appender.email.smtp.auth=true\r\n    log4j.appender.email.TLS=true","title":"java mail aws smtp: javax.mail.AuthenticationFailedException: 220 Ready to start TLS","body":"<p>I have configured the below properties for smtp appender. the same configuration works fine in local but getting error on AWS</p>\n<pre><code>log4j.appender.email=org.apache.log4j.net.SMTPAppender\nlog4j.appender.email.BufferSize=20\nlog4j.appender.email.SMTPHost=email-smtp.us-east-1.amazonaws.com\nlog4j.appender.email.SMTPUsername=&lt;username&gt;\nlog4j.appender.email.SMTPPassword=&lt;password&gt;\nlog4j.appender.email.SMTPPort=587\nlog4j.appender.email.From=&lt;from@email&gt;\nlog4j.appender.email.To=&lt;to@email&gt;\nlog4j.appender.email.Subject=&lt;Subjec&gt;\nlog4j.appender.email.layout=org.apache.log4j.PatternLayout\nlog4j.appender.email.layout.ConversionPattern=%d %-5p [%t] (%c{1}:%L) - %m%n\nlog4j.appender.email.SMTPDebug=true\nlog4j.appender.email.EnableSsl=true\nlog4j.appender.email.smtp.starttls.enable=true\nlog4j.appender.email.smtp.auth=true\nlog4j.appender.email.TLS=true\n</code></pre>\n"},{"tags":["java","firebase","google-cloud-platform","google-cloud-firestore"],"answers":[{"comments":[{"owner":{"account_id":7115068,"reputation":109,"user_id":5441668,"accept_rate":100,"display_name":"Asenjo"},"score":0,"creation_date":1689071469,"post_id":76659045,"comment_id":135158060,"body_markdown":"hi Alex, I dont understand the sub-collection approach. Should I create a new collection called items and reference it inside orders.items?","body":"hi Alex, I dont understand the sub-collection approach. Should I create a new collection called items and reference it inside orders.items?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1689072912,"post_id":76659045,"comment_id":135158364,"body_markdown":"By sub-collection I mean, instead of adding those items separately inside the array, get the array out of the document and add the exact item as a separate document in a sub-collection that belongs to the document. Is it clear now?","body":"By sub-collection I mean, instead of adding those items separately inside the array, get the array out of the document and add the exact item as a separate document in a sub-collection that belongs to the document. Is it clear now?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689055067,"creation_date":1689055067,"answer_id":76659045,"question_id":76655731,"body_markdown":"&gt; And I want to query it from Java to get all orders where any item status would be equal to TEST. Is it possible?\r\n\r\nThat&#39;s currently not possible. You cannot query a collection based on a value that exists within objects that exist in an array field. You could however query using an entire object and call [Query#whereArrayContains()][1]. So instead of trying to query based only on the value of `status` you have queried based on an object that contains all three fields. Besides that, the following query would have worked:\r\n\r\n    Query query = ordersRef.whereEqualTo(&quot;client.items.status&quot;, &quot;TEST&quot;);\r\n\r\nIf that data would have been added as a map (object) and not as an array.\r\n\r\nHowever, to solve such a problem you should consider creating a sub-collection called `items` inside each document. In this way, a query like this should do the trick:\r\n\r\n```\r\nQuery queryByStatus = dbFirestore.collectionGroup(&quot;orders&quot;).whereEqualTo(&quot;status&quot;, &quot;TEST&quot;);\r\n```\r\n\r\nWhen using such a query, please also don&#39;t forget to create an [index][2].\r\n\r\nWhy would you use this solution? Simply because there are no limitations. When you store lots of objects inside an array, you might hit the [maximum limit of  1 Mib][3] per document.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#whereArrayContains(java.lang.String,java.lang.Object)\r\n  [2]: https://stackoverflow.com/questions/50305328/firestore-whereequalto-orderby-and-limit1-not-working\r\n  [3]: https://firebase.google.com/docs/firestore/quotas#limits","title":"Firestore - Query by field in array with java","body":"<blockquote>\n<p>And I want to query it from Java to get all orders where any item status would be equal to TEST. Is it possible?</p>\n</blockquote>\n<p>That's currently not possible. You cannot query a collection based on a value that exists within objects that exist in an array field. You could however query using an entire object and call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#whereArrayContains(java.lang.String,java.lang.Object)\" rel=\"nofollow noreferrer\">Query#whereArrayContains()</a>. So instead of trying to query based only on the value of <code>status</code> you have queried based on an object that contains all three fields. Besides that, the following query would have worked:</p>\n<pre><code>Query query = ordersRef.whereEqualTo(&quot;client.items.status&quot;, &quot;TEST&quot;);\n</code></pre>\n<p>If that data would have been added as a map (object) and not as an array.</p>\n<p>However, to solve such a problem you should consider creating a sub-collection called <code>items</code> inside each document. In this way, a query like this should do the trick:</p>\n<pre><code>Query queryByStatus = dbFirestore.collectionGroup(&quot;orders&quot;).whereEqualTo(&quot;status&quot;, &quot;TEST&quot;);\n</code></pre>\n<p>When using such a query, please also don't forget to create an <a href=\"https://stackoverflow.com/questions/50305328/firestore-whereequalto-orderby-and-limit1-not-working\">index</a>.</p>\n<p>Why would you use this solution? Simply because there are no limitations. When you store lots of objects inside an array, you might hit the <a href=\"https://firebase.google.com/docs/firestore/quotas#limits\" rel=\"nofollow noreferrer\">maximum limit of  1 Mib</a> per document.</p>\n"}],"owner":{"account_id":7115068,"reputation":109,"user_id":5441668,"accept_rate":100,"display_name":"Asenjo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76659045,"answer_count":1,"score":0,"last_activity_date":1689071335,"creation_date":1689007201,"question_id":76655731,"body_markdown":"I have data in Firestore like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd I want to query it **from Java** to *get all orders where any item status would be equal to TEST*. Is it possible?\r\n\r\nIt works fine when I get all orders from client like:\r\n\r\n    CollectionReference ordersRef = dbFirestore.collection(&quot;orders&quot;);    \r\n    Query query = ordersRef.whereEqualTo(&quot;client&quot;, &quot;client1&quot;);\r\n\r\n\r\nBut I couldn&#39;t do it as I need. I try this\r\n\r\n    CollectionReference ordersRef = dbFirestore.collection(&quot;orders&quot;);    \r\n    Query query = ordersRef.whereEqualTo(&quot;items.status&quot;, &quot;TEST&quot;);\r\n\r\nbut it returns an empty array\r\n\r\n\r\n*****\r\n**UPDATE AFTER [ALEX&#39;S ANSWER][2]**\r\n****\r\n\r\nIf I convert items in a Map like:\r\n[![][3]][3]\r\nthen this query works fine\r\n\r\n    Query query = ordersRef.whereEqualTo(&quot;orders.items.status&quot;, &quot;TEST&quot;);\r\n\r\nbut this doesn&#180;t resolve the problem because the items Map need to have several objects like\r\n[![enter image description here][4]][4]\r\n\r\n--\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gbkew.png\r\n  [2]: https://stackoverflow.com/a/76659045/5441668\r\n  [3]: https://i.stack.imgur.com/xUHBZ.png\r\n  [4]: https://i.stack.imgur.com/PNWqf.png","title":"Firestore - Query by field in array with java","body":"<p>I have data in Firestore like this:</p>\n<p><a href=\"https://i.stack.imgur.com/gbkew.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gbkew.png\" alt=\"enter image description here\" /></a></p>\n<p>And I want to query it <strong>from Java</strong> to <em>get all orders where any item status would be equal to TEST</em>. Is it possible?</p>\n<p>It works fine when I get all orders from client like:</p>\n<pre><code>CollectionReference ordersRef = dbFirestore.collection(&quot;orders&quot;);    \nQuery query = ordersRef.whereEqualTo(&quot;client&quot;, &quot;client1&quot;);\n</code></pre>\n<p>But I couldn't do it as I need. I try this</p>\n<pre><code>CollectionReference ordersRef = dbFirestore.collection(&quot;orders&quot;);    \nQuery query = ordersRef.whereEqualTo(&quot;items.status&quot;, &quot;TEST&quot;);\n</code></pre>\n<p>but it returns an empty array</p>\n<hr />\n<p><strong>UPDATE AFTER <a href=\"https://stackoverflow.com/a/76659045/5441668\">ALEX'S ANSWER</a></strong></p>\n<hr />\n<p>If I convert items in a Map like:\n<a href=\"https://i.stack.imgur.com/xUHBZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xUHBZ.png\" alt=\"\" /></a>\nthen this query works fine</p>\n<pre><code>Query query = ordersRef.whereEqualTo(&quot;orders.items.status&quot;, &quot;TEST&quot;);\n</code></pre>\n<p>but this doesn´t resolve the problem because the items Map need to have several objects like\n<a href=\"https://i.stack.imgur.com/PNWqf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PNWqf.png\" alt=\"enter image description here\" /></a></p>\n<p>--</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1622135564,"post_id":67726910,"comment_id":119710967,"body_markdown":"You cannot pass a query to a repository method unless you are willing to write a custom repository fragment. Could you please explain why the query needs to be passed as an argument in the first place?","body":"You cannot pass a query to a repository method unless you are willing to write a custom repository fragment. Could you please explain why the query needs to be passed as an argument in the first place?"},{"owner":{"account_id":15234450,"reputation":29,"user_id":10992571,"display_name":"Aman Singh"},"score":0,"creation_date":1622136168,"post_id":67726910,"comment_id":119711215,"body_markdown":"actually , I need a dynamic query in which no of columns can be differ, so i prepared a query based on logic and passed as argument .  And in native query to access argument value we use &quot;:argument_variable &quot;.  So whole query will be replaced by my passed query.  I also tried  custom repository  fragment but it doesn&#39;t work.","body":"actually , I need a dynamic query in which no of columns can be differ, so i prepared a query based on logic and passed as argument .  And in native query to access argument value we use &quot;:argument_variable &quot;.  So whole query will be replaced by my passed query.  I also tried  custom repository  fragment but it doesn&#39;t work."},{"owner":{"account_id":343791,"reputation":4101,"user_id":675723,"accept_rate":77,"display_name":"BadZen"},"score":1,"creation_date":1624234584,"post_id":67726910,"comment_id":120294838,"body_markdown":"If you just want to execute arbitrary queries, JPA repositories are not the correct facility to use.","body":"If you just want to execute arbitrary queries, JPA repositories are not the correct facility to use."}],"answers":[{"comments":[{"owner":{"account_id":15234450,"reputation":29,"user_id":10992571,"display_name":"Aman Singh"},"score":0,"creation_date":1622176588,"post_id":67727207,"comment_id":119721841,"body_markdown":"can you provide any link  or code snippets that suits to my requirement.","body":"can you provide any link  or code snippets that suits to my requirement."}],"tags":[],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622136701,"creation_date":1622136701,"answer_id":67727207,"question_id":67726910,"body_markdown":"You cannot replace arbitrary fragments of the query using a query parameter. Only very specific sections of the query allow parameters. \r\n\r\nIf you need dynamic queries, Specifications or QueryDSL is what you want. ","title":"How to pass complete query as String in repository method as argument and use with the @Query Annotation?","body":"<p>You cannot replace arbitrary fragments of the query using a query parameter. Only very specific sections of the query allow parameters.</p>\n<p>If you need dynamic queries, Specifications or QueryDSL is what you want.</p>\n"},{"comments":[{"owner":{"account_id":4613206,"reputation":2022,"user_id":4019117,"accept_rate":8,"display_name":"Irfan Nasim"},"score":0,"creation_date":1677736034,"post_id":73243272,"comment_id":133397621,"body_markdown":"not working, exception from jpa at parameter level.","body":"not working, exception from jpa at parameter level."}],"tags":[],"owner":{"account_id":8903518,"reputation":488,"user_id":8383744,"accept_rate":75,"display_name":"Beez"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659656716,"creation_date":1659656716,"answer_id":73243272,"question_id":67726910,"body_markdown":"I believe you need to add `@Param(&quot;query&quot;)` into your argument in the repository.\r\n\r\n`List&lt;Object[]&gt; presentDaySummarySmscWise(@Param(&quot;query&quot;) String query);`\r\n","title":"How to pass complete query as String in repository method as argument and use with the @Query Annotation?","body":"<p>I believe you need to add <code>@Param(&quot;query&quot;)</code> into your argument in the repository.</p>\n<p><code>List&lt;Object[]&gt; presentDaySummarySmscWise(@Param(&quot;query&quot;) String query);</code></p>\n"},{"comments":[{"owner":{"account_id":18740842,"reputation":3833,"user_id":13664137,"display_name":"moken"},"score":0,"creation_date":1689489538,"post_id":76660985,"comment_id":135218812,"body_markdown":"Answer needs supporting information\nYour answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](https://stackoverflow.com/help/how-to-answer).","body":"Answer needs supporting information Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76660985/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"https://stackoverflow.com/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":14762278,"reputation":40,"user_id":10661250,"display_name":"prguptadev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689070959,"creation_date":1689070959,"answer_id":76660985,"question_id":67726910,"body_markdown":"     @Query(&quot;#{[0]}&quot;)\r\n     @WithConsistency(QueryScanConsistency.REQUEST_PLUS)\r\n     List&lt;Employee&gt; findByDateAllQuery(String query);","title":"How to pass complete query as String in repository method as argument and use with the @Query Annotation?","body":"<pre><code> @Query(&quot;#{[0]}&quot;)\n @WithConsistency(QueryScanConsistency.REQUEST_PLUS)\n List&lt;Employee&gt; findByDateAllQuery(String query);\n</code></pre>\n"}],"owner":{"account_id":15234450,"reputation":29,"user_id":10992571,"display_name":"Aman Singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2364,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1689070959,"creation_date":1622135374,"question_id":67726910,"body_markdown":"I prepared a query in serviceImplementation ,After that I passed this query  as method argument  of \r\n presentDaySummarySmscWise(String finalQuery)   Repository method.\r\nIn Repository Interface ,I passed this query  with @Query Annotaion like shown in code.\r\n\r\n**strong text**\r\n//ServiceImplementation class\r\n\r\n\r\n@Service\r\n\r\npublic class ErrorCodeServiceImpl implements ErrorCodeService {\r\n\t\r\n  @Autowired\r\n\r\n\tErrorCodeRepository errorCodeRepo;\r\n   \r\n   @Override\r\n\r\n\tpublic List&lt;Object[]&gt; errorCodeDefaultSummary() {\r\n   \r\n    String finalQuery=&quot;select smsc,vf_reason_code from reason_code_report where \r\n    log_date=&#39;2021-05-27&#39;&quot;;\r\n\r\n    List&lt;Object[]&gt; result =   errorCodeRepo.presentDaySummarySmscWise(finalQuery);\r\n    \r\n    return result;\r\n\r\n   }\r\n**`strong text`**\r\n//Repository\r\n\r\n @Repository\r\n\r\npublic interface ErrorCodeRepository extends JpaRepository&lt;ErrorCodeReportEntity, ErrorCodeReportKeys&gt;{\r\n\r\n@Query(value=&quot;:query&quot;,nativeQuery=true) \r\n\r\nList&lt;Object[]&gt; presentDaySummarySmscWise(String query);\r\n\r\n}\r\n\r\n\r\n\r\n  ","title":"How to pass complete query as String in repository method as argument and use with the @Query Annotation?","body":"<p>I prepared a query in serviceImplementation ,After that I passed this query  as method argument  of\npresentDaySummarySmscWise(String finalQuery)   Repository method.\nIn Repository Interface ,I passed this query  with @Query Annotaion like shown in code.</p>\n<p><strong>strong text</strong>\n//ServiceImplementation class</p>\n<p>@Service</p>\n<p>public class ErrorCodeServiceImpl implements ErrorCodeService {</p>\n<p>@Autowired</p>\n<pre><code>ErrorCodeRepository errorCodeRepo;\n</code></pre>\n<p>@Override</p>\n<pre><code>public List&lt;Object[]&gt; errorCodeDefaultSummary() {\n\nString finalQuery=&quot;select smsc,vf_reason_code from reason_code_report where \nlog_date='2021-05-27'&quot;;\n\nList&lt;Object[]&gt; result =   errorCodeRepo.presentDaySummarySmscWise(finalQuery);\n\nreturn result;\n</code></pre>\n<p>}\n<strong><code>strong text</code></strong>\n//Repository</p>\n<p>@Repository</p>\n<p>public interface ErrorCodeRepository extends JpaRepository&lt;ErrorCodeReportEntity, ErrorCodeReportKeys&gt;{</p>\n<p>@Query(value=&quot;:query&quot;,nativeQuery=true)</p>\n<p>List&lt;Object[]&gt; presentDaySummarySmscWise(String query);</p>\n<p>}</p>\n"},{"tags":["java","spring","ibm-mq","message-queue"],"comments":[{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":0,"creation_date":1689064587,"post_id":76659862,"comment_id":135156624,"body_markdown":"It looks like you want to have a request/response style which is total opposite of the idea of using queue. Why do you need to write your code as you described? I don&#39;t think that would be a good idea for so many reasons","body":"It looks like you want to have a request/response style which is total opposite of the idea of using queue. Why do you need to write your code as you described? I don&#39;t think that would be a good idea for so many reasons"},{"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"score":0,"creation_date":1689065178,"post_id":76659862,"comment_id":135156756,"body_markdown":"this is how the customer&#39;s backend operates. This is what we have and we need to operate at the client side.","body":"this is how the customer&#39;s backend operates. This is what we have and we need to operate at the client side."},{"owner":{"account_id":320241,"reputation":2134,"user_id":638413,"accept_rate":100,"display_name":"Daniel Steinmann"},"score":0,"creation_date":1689066042,"post_id":76659862,"comment_id":135156939,"body_markdown":"Have you looked at the [sendAndReceive](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/core/JmsTemplate.html#sendAndReceive(java.lang.String,org.springframework.jms.core.MessageCreator)) style of methods of the `JmsTemplate`?","body":"Have you looked at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/core/JmsTemplate.html#sendAndReceive(java.lang.String,org.springframework.jms.core.MessageCreator)\" rel=\"nofollow noreferrer\">sendAndReceive</a> style of methods of the <code>JmsTemplate</code>?"},{"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"score":0,"creation_date":1689067088,"post_id":76659862,"comment_id":135157151,"body_markdown":"@DanielSteinmann that might close to the case. But sendAndReceive sends to temporary queue? Is this correct?","body":"@DanielSteinmann that might close to the case. But sendAndReceive sends to temporary queue? Is this correct?"},{"owner":{"account_id":320241,"reputation":2134,"user_id":638413,"accept_rate":100,"display_name":"Daniel Steinmann"},"score":0,"creation_date":1689108701,"post_id":76659862,"comment_id":135166069,"body_markdown":"Yes, it sends by default to a temporary queue. I assumed you are also in charge of the server code and therefore can easily use a temporary queue.","body":"Yes, it sends by default to a temporary queue. I assumed you are also in charge of the server code and therefore can easily use a temporary queue."}],"answers":[{"comments":[{"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"score":0,"creation_date":1689072842,"post_id":76660957,"comment_id":135158343,"body_markdown":"Surprisingly enough I was looking exactly the same file, same method. However I never reach the  &quot;logger.info(&quot;Reply received&quot;);&quot; line. Moreover I added a comment line before the try and also the code did not reach there. Have you ever tried to execute a similar scenario?","body":"Surprisingly enough I was looking exactly the same file, same method. However I never reach the  &quot;logger.info(&quot;Reply received&quot;);&quot; line. Moreover I added a comment line before the try and also the code did not reach there. Have you ever tried to execute a similar scenario?"},{"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"score":0,"creation_date":1689074267,"post_id":76660957,"comment_id":135158634,"body_markdown":"In that case the issue will most likely be in the replier code. Check out pattern 108, which is the corresponding reply code. https://github.com/ibm-messaging/mq-dev-patterns/blob/master/Spring-JMS/src/main/java/com/ibm/mq/samples/jms/spring/level108/MessageConsumer108.java","body":"In that case the issue will most likely be in the replier code. Check out pattern 108, which is the corresponding reply code. <a href=\"https://github.com/ibm-messaging/mq-dev-patterns/blob/master/Spring-JMS/src/main/java/com/ibm/mq/samples/jms/spring/level108/MessageConsumer108.java\" rel=\"nofollow noreferrer\">github.com/ibm-messaging/mq-dev-patterns/blob/master/Spring-&zwnj;&#8203;JMS/&hellip;</a>"},{"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"score":0,"creation_date":1689148282,"post_id":76660957,"comment_id":135170498,"body_markdown":"Did not completely resolved my issue, however helped to move. Thanks!","body":"Did not completely resolved my issue, however helped to move. Thanks!"}],"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689070796,"creation_date":1689070796,"answer_id":76660957,"question_id":76659862,"body_markdown":"Take a look at pattern 107 at https://github.com/ibm-messaging/mq-dev-patterns/tree/master/Spring-JMS\r\n\r\n&gt; The Level 107 sample sends two message requests. For one there is an\r\n&gt; asynchronous listener. For the other there is a blocking synchronous\r\n&gt; wait.\r\n\r\nThe code you need to add to `sendSyncReply` is \r\n\r\n````\r\njmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\r\n````\r\n\r\n`SendMessageService107.java`\r\n\r\n```Java\r\n\r\n\r\npackage com.ibm.mq.samples.jms.spring.level107;\r\n\r\nimport com.ibm.jakarta.jms.JMSTextMessage;\r\nimport com.ibm.mq.samples.jms.spring.globals.Constants;\r\nimport com.ibm.mq.samples.jms.spring.globals.data.OurData;\r\nimport com.ibm.mq.samples.jms.spring.globals.data.ReplyData;\r\nimport com.ibm.mq.samples.jms.spring.globals.handlers.OurMessageConverter;\r\nimport org.apache.commons.logging.Log;\r\nimport org.apache.commons.logging.LogFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.jms.core.JmsTemplate;\r\nimport org.springframework.jms.core.MessageCreator;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport jakarta.jms.DeliveryMode;\r\nimport jakarta.jms.JMSException;\r\nimport jakarta.jms.Message;\r\nimport jakarta.jms.Session;\r\nimport java.util.UUID;\r\n\r\n\r\n@Service\r\npublic class SendMessageService107 {\r\n    protected final Log logger = LogFactory.getLog(getClass());\r\n\r\n    @Value(&quot;${app.l107.queue.name1}&quot;)\r\n    public String sendQueue;\r\n\r\n    @Value(&quot;${app.l107.queue.name2}&quot;)\r\n    public String replyQueue;\r\n\r\n    final private JmsTemplate myNonJmsTemplate107;\r\n\r\n    final private OurMessageConverter ourConverter = new OurMessageConverter();\r\n\r\n    SendMessageService107(JmsTemplate myNonJmsTemplate107) {\r\n        this.myNonJmsTemplate107 = myNonJmsTemplate107;\r\n    }\r\n\r\n    public void sendAsyncReply(OurData msg) {\r\n        logger.info(&quot;Sending Message with Async Reply&quot;);\r\n        myNonJmsTemplate107.send(sendQueue, new MessageCreator() {\r\n            @Override\r\n            public Message createMessage(Session session) throws JMSException {\r\n                Message jmsmsg = ourConverter.toMessage(msg, session);\r\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\r\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\r\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\r\n                jmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\r\n                return jmsmsg;\r\n            }\r\n        });\r\n    }\r\n\r\n    public void sendSyncReply(OurData msg) {\r\n        logger.info(&quot;Sending Message with Sync Reply&quot;);\r\n        Object reply = myNonJmsTemplate107.sendAndReceive(sendQueue, new MessageCreator() {\r\n            @Override\r\n            public Message createMessage(Session session) throws JMSException {\r\n                Message jmsmsg = ourConverter.toMessage(msg, session);\r\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\r\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\r\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\r\n                return jmsmsg;\r\n            }\r\n        });\r\n        try {\r\n            logger.info(&quot;Reply received&quot;);\r\n\r\n            if (null == reply) {\r\n                logger.info(&quot;Reply is null&quot;);\r\n            } else if (reply instanceof JMSTextMessage) {\r\n                logger.info(&quot;Reply is a text message, attempting to extract data&quot;);\r\n                JMSTextMessage txtReply = (JMSTextMessage) reply;\r\n                logger.info(txtReply.getText());\r\n                ReplyData rr = ourConverter.replyFromMessage(txtReply);\r\n                if (null != rr) {\r\n                    logger.info(&quot;Have converted reply&quot;);\r\n                    rr.logResult();\r\n                } else {\r\n                    logger.warn(&quot;Reply wasn&#39;t what was expected&quot;);\r\n                }\r\n\r\n            } else {\r\n                logger.info(&quot;reply is not null, but of unexpected type&quot;);\r\n                logger.info(&quot;reply is of type : &quot; + reply.getClass());\r\n            }\r\n        } catch (JMSException e) {\r\n            logger.warn(&quot;JMSException processing reply&quot;);\r\n            logger.warn(e.getMessage());\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n```","title":"IBM MQ, Send message to first queue and wait for an answer at a confirmation queue","body":"<p>Take a look at pattern 107 at <a href=\"https://github.com/ibm-messaging/mq-dev-patterns/tree/master/Spring-JMS\" rel=\"nofollow noreferrer\">https://github.com/ibm-messaging/mq-dev-patterns/tree/master/Spring-JMS</a></p>\n<blockquote>\n<p>The Level 107 sample sends two message requests. For one there is an\nasynchronous listener. For the other there is a blocking synchronous\nwait.</p>\n</blockquote>\n<p>The code you need to add to <code>sendSyncReply</code> is</p>\n<pre><code>jmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\n</code></pre>\n<p><code>SendMessageService107.java</code></p>\n<pre><code>\n\npackage com.ibm.mq.samples.jms.spring.level107;\n\nimport com.ibm.jakarta.jms.JMSTextMessage;\nimport com.ibm.mq.samples.jms.spring.globals.Constants;\nimport com.ibm.mq.samples.jms.spring.globals.data.OurData;\nimport com.ibm.mq.samples.jms.spring.globals.data.ReplyData;\nimport com.ibm.mq.samples.jms.spring.globals.handlers.OurMessageConverter;\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.jms.core.JmsTemplate;\nimport org.springframework.jms.core.MessageCreator;\nimport org.springframework.stereotype.Service;\n\nimport jakarta.jms.DeliveryMode;\nimport jakarta.jms.JMSException;\nimport jakarta.jms.Message;\nimport jakarta.jms.Session;\nimport java.util.UUID;\n\n\n@Service\npublic class SendMessageService107 {\n    protected final Log logger = LogFactory.getLog(getClass());\n\n    @Value(&quot;${app.l107.queue.name1}&quot;)\n    public String sendQueue;\n\n    @Value(&quot;${app.l107.queue.name2}&quot;)\n    public String replyQueue;\n\n    final private JmsTemplate myNonJmsTemplate107;\n\n    final private OurMessageConverter ourConverter = new OurMessageConverter();\n\n    SendMessageService107(JmsTemplate myNonJmsTemplate107) {\n        this.myNonJmsTemplate107 = myNonJmsTemplate107;\n    }\n\n    public void sendAsyncReply(OurData msg) {\n        logger.info(&quot;Sending Message with Async Reply&quot;);\n        myNonJmsTemplate107.send(sendQueue, new MessageCreator() {\n            @Override\n            public Message createMessage(Session session) throws JMSException {\n                Message jmsmsg = ourConverter.toMessage(msg, session);\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\n                jmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\n                return jmsmsg;\n            }\n        });\n    }\n\n    public void sendSyncReply(OurData msg) {\n        logger.info(&quot;Sending Message with Sync Reply&quot;);\n        Object reply = myNonJmsTemplate107.sendAndReceive(sendQueue, new MessageCreator() {\n            @Override\n            public Message createMessage(Session session) throws JMSException {\n                Message jmsmsg = ourConverter.toMessage(msg, session);\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\n                return jmsmsg;\n            }\n        });\n        try {\n            logger.info(&quot;Reply received&quot;);\n\n            if (null == reply) {\n                logger.info(&quot;Reply is null&quot;);\n            } else if (reply instanceof JMSTextMessage) {\n                logger.info(&quot;Reply is a text message, attempting to extract data&quot;);\n                JMSTextMessage txtReply = (JMSTextMessage) reply;\n                logger.info(txtReply.getText());\n                ReplyData rr = ourConverter.replyFromMessage(txtReply);\n                if (null != rr) {\n                    logger.info(&quot;Have converted reply&quot;);\n                    rr.logResult();\n                } else {\n                    logger.warn(&quot;Reply wasn't what was expected&quot;);\n                }\n\n            } else {\n                logger.info(&quot;reply is not null, but of unexpected type&quot;);\n                logger.info(&quot;reply is of type : &quot; + reply.getClass());\n            }\n        } catch (JMSException e) {\n            logger.warn(&quot;JMSException processing reply&quot;);\n            logger.warn(e.getMessage());\n        }\n    }\n\n}\n\n\n\n</code></pre>\n"}],"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76660957,"answer_count":1,"score":0,"last_activity_date":1689070796,"creation_date":1689062847,"question_id":76659862,"body_markdown":"In my setup we want to place an &quot;Order&quot; at order_queue and wait at the same thread until the backends sends a reply at the shipment_queue. The code is in Java. \r\n```\r\n\r\nprivate Shipment placeOrder(Order order) {\r\n\r\n  public String sendQueue = &quot;order_queue&quot;;\r\n  public String replyQueue = &quot;shipment_queue&quot;;\r\n\r\n  final private JmsTemplate template;\r\n  \r\n  template.send(sendQueue, new MessageCreator() {\r\n            @Override\r\n            public Message createMessage(Session session) throws JMSException {\r\n                Message jmsmsg = ourConverter.toMessage(msg, session);\r\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\r\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\r\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\r\n                jmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\r\n                return jmsmsg;\r\n            }\r\n        });\r\n\r\n\r\n  //AT THIS POINT I WANT TO WAIT AND GET THE MESSAGE\r\n  New code\r\n}  \r\n```\r\n\r\nCurrently I have another class that captures the response with a listener\r\n```\r\n\r\n @JmsListener(destination = &quot;shipment_queue&quot;)\r\n    public void receiveOther(Message message) {\r\n        logger.info(&quot;&quot;);\r\n        logger.info( this.getClass().getSimpleName());\r\n        logger.info(&quot;Received message of type: &quot; + message.getClass().getSimpleName());\r\n        ReplyData reply = converter.replyFromMessage(message);\r\n        if (null != reply) {\r\n            logger.info(&quot;Message was JSON Compliant&quot;);\r\n            reply.logResult();\r\n        } else {\r\n            logger.warn(&quot;Message string was not JSON&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nMy goal is to have a clean function that has the responsibility to send, wait and return the result.\r\n\r\nI would like the code to be like this:\r\n\r\n```\r\nprivate Shipment placeOrder(Order order) {\r\n  send to first queue\r\n  wait for the reply at the second queue\r\n  return the reply\r\n}\r\n```\r\n\r\nHow can I do this?\r\n\r\n","title":"IBM MQ, Send message to first queue and wait for an answer at a confirmation queue","body":"<p>In my setup we want to place an &quot;Order&quot; at order_queue and wait at the same thread until the backends sends a reply at the shipment_queue. The code is in Java.</p>\n<pre><code>\nprivate Shipment placeOrder(Order order) {\n\n  public String sendQueue = &quot;order_queue&quot;;\n  public String replyQueue = &quot;shipment_queue&quot;;\n\n  final private JmsTemplate template;\n  \n  template.send(sendQueue, new MessageCreator() {\n            @Override\n            public Message createMessage(Session session) throws JMSException {\n                Message jmsmsg = ourConverter.toMessage(msg, session);\n                jmsmsg.setJMSCorrelationID(UUID.randomUUID().toString());\n                jmsmsg.setJMSExpiration(5 * Constants.MINUTE);\n                jmsmsg.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);\n                jmsmsg.setJMSReplyTo(session.createQueue(replyQueue));\n                return jmsmsg;\n            }\n        });\n\n\n  //AT THIS POINT I WANT TO WAIT AND GET THE MESSAGE\n  New code\n}  \n</code></pre>\n<p>Currently I have another class that captures the response with a listener</p>\n<pre><code>\n @JmsListener(destination = &quot;shipment_queue&quot;)\n    public void receiveOther(Message message) {\n        logger.info(&quot;&quot;);\n        logger.info( this.getClass().getSimpleName());\n        logger.info(&quot;Received message of type: &quot; + message.getClass().getSimpleName());\n        ReplyData reply = converter.replyFromMessage(message);\n        if (null != reply) {\n            logger.info(&quot;Message was JSON Compliant&quot;);\n            reply.logResult();\n        } else {\n            logger.warn(&quot;Message string was not JSON&quot;);\n        }\n    }\n</code></pre>\n<p>My goal is to have a clean function that has the responsibility to send, wait and return the result.</p>\n<p>I would like the code to be like this:</p>\n<pre><code>private Shipment placeOrder(Order order) {\n  send to first queue\n  wait for the reply at the second queue\n  return the reply\n}\n</code></pre>\n<p>How can I do this?</p>\n"},{"tags":["java","quarkus","testcontainers"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1689058448,"post_id":76658971,"comment_id":135155409,"body_markdown":"Your best bet by far is to see the examples in the Quarkus source code itself","body":"Your best bet by far is to see the examples in the Quarkus source code itself"}],"answers":[{"comments":[{"owner":{"account_id":10057394,"reputation":376,"user_id":7435186,"display_name":"Jakob Graf"},"score":1,"creation_date":1689084681,"post_id":76660956,"comment_id":135161205,"body_markdown":"Thanks for your answer, it pushed me in the right direction.","body":"Thanks for your answer, it pushed me in the right direction."}],"tags":[],"owner":{"account_id":1115215,"reputation":10877,"user_id":1104727,"display_name":"Holly Cummins"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689070794,"creation_date":1689070794,"answer_id":76660956,"question_id":76658971,"body_markdown":"For this, you&#39;d need to write an extension for the other web service. Quarkus  have a few resources about writing extensions:\r\n\r\n* [My first extension](https://quarkus.io/guides/building-my-first-extension)\r\n* [Deeper guide](https://quarkus.io/guides/writing-extensions)\r\n* [A walkthough of writing a logging extension](https://quarkus.io/blog/quarkus-aws-cloudwatch_extension/)\r\n\r\nTo scaffold an extension, you&#39;d run something like \r\n\r\n```\r\nmvn io.quarkus.platform:quarkus-maven-plugin:3.2.0.Final:create-extension -N \\\r\n    -DgroupId=org.acme \\ \r\n    -DextensionId=other-web-service\r\n```\r\n\r\nOnce you have your skeleton extension, the code to add a dev service is pretty compact. In the processor, you need to add a build step producing a build item of type &#39;dev services&#39;. The [build items](https://quarkus.io/guides/all-builditems) are a bit like the API for extensions, and you can achieve most things you want just by constructing and returning a build item of the right kind.\r\n\r\n\r\n```\r\n    @BuildStep(onlyIfNot = IsNormal.class, onlyIf = GlobalDevServicesConfig.Enabled.class)\r\n    public DevServicesResultBuildItem createContainer(LaunchModeBuildItem launchMode) {\r\n\r\n        DockerImageName dockerImageName = DockerImageName.parse(&quot;namespace/other-web-service&quot;);\r\n        \r\n        // You might want to use Quarkus config here to customise the container\r\n        OtherWebServiceContainer container = new OtherWebServiceContainer()\r\n                .withEnv(&quot;whatever&quot;, &quot;true&quot;)\r\n                .withEnv(&quot;otherenv&quot;, &quot;something&quot;)\r\n                \r\n        container.start();\r\n\r\n        Map&lt;String, String&gt; props = Map.of(&quot;mynew.url&quot;,\r\n                &quot;https://&quot; + container.getHost() + &quot;:&quot; + container.getPort());\r\n        return new DevServicesResultBuildItem.RunningDevService(FEATURE, container.getContainerId(),\r\n                container::close, props)\r\n                .toBuildItem();\r\n    }\r\n\r\n    private static class OtherWebServiceContainer extends GenericContainer&lt;OtherWebServiceContainer&gt; {\r\n        static final int PORT = 25565;\r\n\r\n        public OtherWebServiceContainer(DockerImageName image) {\r\n            super(image);\r\n        }\r\n\r\n        @Override\r\n        protected void configure() {\r\n            withNetwork(Network.SHARED);\r\n            addExposedPorts(PORT);\r\n            // Tell the dev service how to know the container is ready\r\n            waitingFor(Wait.forLogMessage(&quot;.*Listening on http://0.0.0.0:9292.*&quot;, 1)); \r\n        }\r\n\r\n        public Integer getPort() {\r\n            return this.getMappedPort(PORT);\r\n        }\r\n    }\r\n```\r\n\r\nIf you get stuck, looking through the [Quarkus codebase](https://github.com/quarkusio/quarkus) for examples of how dev services are created should give you ideas.","title":"Custom dev-Service for Quarkus","body":"<p>For this, you'd need to write an extension for the other web service. Quarkus  have a few resources about writing extensions:</p>\n<ul>\n<li><a href=\"https://quarkus.io/guides/building-my-first-extension\" rel=\"nofollow noreferrer\">My first extension</a></li>\n<li><a href=\"https://quarkus.io/guides/writing-extensions\" rel=\"nofollow noreferrer\">Deeper guide</a></li>\n<li><a href=\"https://quarkus.io/blog/quarkus-aws-cloudwatch_extension/\" rel=\"nofollow noreferrer\">A walkthough of writing a logging extension</a></li>\n</ul>\n<p>To scaffold an extension, you'd run something like</p>\n<pre><code>mvn io.quarkus.platform:quarkus-maven-plugin:3.2.0.Final:create-extension -N \\\n    -DgroupId=org.acme \\ \n    -DextensionId=other-web-service\n</code></pre>\n<p>Once you have your skeleton extension, the code to add a dev service is pretty compact. In the processor, you need to add a build step producing a build item of type 'dev services'. The <a href=\"https://quarkus.io/guides/all-builditems\" rel=\"nofollow noreferrer\">build items</a> are a bit like the API for extensions, and you can achieve most things you want just by constructing and returning a build item of the right kind.</p>\n<pre><code>    @BuildStep(onlyIfNot = IsNormal.class, onlyIf = GlobalDevServicesConfig.Enabled.class)\n    public DevServicesResultBuildItem createContainer(LaunchModeBuildItem launchMode) {\n\n        DockerImageName dockerImageName = DockerImageName.parse(&quot;namespace/other-web-service&quot;);\n        \n        // You might want to use Quarkus config here to customise the container\n        OtherWebServiceContainer container = new OtherWebServiceContainer()\n                .withEnv(&quot;whatever&quot;, &quot;true&quot;)\n                .withEnv(&quot;otherenv&quot;, &quot;something&quot;)\n                \n        container.start();\n\n        Map&lt;String, String&gt; props = Map.of(&quot;mynew.url&quot;,\n                &quot;https://&quot; + container.getHost() + &quot;:&quot; + container.getPort());\n        return new DevServicesResultBuildItem.RunningDevService(FEATURE, container.getContainerId(),\n                container::close, props)\n                .toBuildItem();\n    }\n\n    private static class OtherWebServiceContainer extends GenericContainer&lt;OtherWebServiceContainer&gt; {\n        static final int PORT = 25565;\n\n        public OtherWebServiceContainer(DockerImageName image) {\n            super(image);\n        }\n\n        @Override\n        protected void configure() {\n            withNetwork(Network.SHARED);\n            addExposedPorts(PORT);\n            // Tell the dev service how to know the container is ready\n            waitingFor(Wait.forLogMessage(&quot;.*Listening on http://0.0.0.0:9292.*&quot;, 1)); \n        }\n\n        public Integer getPort() {\n            return this.getMappedPort(PORT);\n        }\n    }\n</code></pre>\n<p>If you get stuck, looking through the <a href=\"https://github.com/quarkusio/quarkus\" rel=\"nofollow noreferrer\">Quarkus codebase</a> for examples of how dev services are created should give you ideas.</p>\n"}],"owner":{"account_id":10057394,"reputation":376,"user_id":7435186,"display_name":"Jakob Graf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689070794,"creation_date":1689054299,"question_id":76658971,"body_markdown":"I am creating a web service using Quarkus as framework, which uses another web service. I thought it would be nice to use the same dev service mechanism, which quarkus uses for databasesm, etc. to start up a container containing this other service (or a mock service of it).\r\n\r\nI was able to achieve this for JUnit testing with implementing a class of `QuarkusTestResourceLifecycleManager`:\r\n\r\n```\r\n        // Create the Image\r\n        ImageFromDockerfile image = new ImageFromDockerfile()...\r\n        // Create the Container\r\n        GenericContainer&lt;?&gt; container = new GenericContainer&lt;&gt;(image)...\r\n        // Start the Container\r\n        container.start();\r\n```\r\n\r\nNow I would like to use the same container in dev mode. Ideally as dev service, which is also shown in the devUI.\r\n\r\nWhat is the best practice for that? Is there any documentation on the API, which I did not find?\r\n\r\n\r\n","title":"Custom dev-Service for Quarkus","body":"<p>I am creating a web service using Quarkus as framework, which uses another web service. I thought it would be nice to use the same dev service mechanism, which quarkus uses for databasesm, etc. to start up a container containing this other service (or a mock service of it).</p>\n<p>I was able to achieve this for JUnit testing with implementing a class of <code>QuarkusTestResourceLifecycleManager</code>:</p>\n<pre><code>        // Create the Image\n        ImageFromDockerfile image = new ImageFromDockerfile()...\n        // Create the Container\n        GenericContainer&lt;?&gt; container = new GenericContainer&lt;&gt;(image)...\n        // Start the Container\n        container.start();\n</code></pre>\n<p>Now I would like to use the same container in dev mode. Ideally as dev service, which is also shown in the devUI.</p>\n<p>What is the best practice for that? Is there any documentation on the API, which I did not find?</p>\n"},{"tags":["java","spring-boot","gradle","build.gradle","pitest"],"answers":[{"tags":[],"owner":{"account_id":6622609,"reputation":95,"user_id":5113758,"accept_rate":33,"display_name":"KVL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689070258,"creation_date":1689070258,"answer_id":76660869,"question_id":76659581,"body_markdown":"Need to convert the string value to a directoy type  before assigning it.\r\n\r\n    reportDir = file(&quot;${buildDir}/reports/pit/${project.version}&quot; )","title":"Pitest failing after spring/springboot/gradle upgrade","body":"<p>Need to convert the string value to a directoy type  before assigning it.</p>\n<pre><code>reportDir = file(&quot;${buildDir}/reports/pit/${project.version}&quot; )\n</code></pre>\n"}],"owner":{"account_id":6622609,"reputation":95,"user_id":5113758,"accept_rate":33,"display_name":"KVL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689070258,"creation_date":1689060509,"question_id":76659581,"body_markdown":"Facing the below build error while upgrading project to springboot 2.7.7 / spring 5.4/junit 5/gradle 7.2 and pitest vesion from 1.4.0 to 1.9.0.\r\n\r\n\r\n&gt; Cannot set the value of a property of type org.gradle.api.file.Directory using an instance of type org.codehaus.groovy.runtime.GStringImpl.\r\n\r\nthe below is entry in build.gradle.\r\n\r\n    pitest {\r\n        targetClasses = [&#39;com.eew.wrew.werew.*&#39;]\r\n        enableDefaultIncrementalAnalysis = true\r\n        reportDir = &quot;${buildDir}/reports/pit/${project.version}&quot;\r\n        outputFormats = [&#39;HTML&#39;]\r\n        pitestVersion = &#39;1.9.0&#39;\r\n        timeoutConstInMillis = 100000\r\n        mutationThreshold = 80\r\n        timestampedReports=false\r\n    }","title":"Pitest failing after spring/springboot/gradle upgrade","body":"<p>Facing the below build error while upgrading project to springboot 2.7.7 / spring 5.4/junit 5/gradle 7.2 and pitest vesion from 1.4.0 to 1.9.0.</p>\n<blockquote>\n<p>Cannot set the value of a property of type org.gradle.api.file.Directory using an instance of type org.codehaus.groovy.runtime.GStringImpl.</p>\n</blockquote>\n<p>the below is entry in build.gradle.</p>\n<pre><code>pitest {\n    targetClasses = ['com.eew.wrew.werew.*']\n    enableDefaultIncrementalAnalysis = true\n    reportDir = &quot;${buildDir}/reports/pit/${project.version}&quot;\n    outputFormats = ['HTML']\n    pitestVersion = '1.9.0'\n    timeoutConstInMillis = 100000\n    mutationThreshold = 80\n    timestampedReports=false\n}\n</code></pre>\n"},{"tags":["java","android","swiperefreshlayout"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1689066681,"post_id":76659963,"comment_id":135157078,"body_markdown":"Do you see refresh icon when you pull down for refreshing or nothing at all? Besides, do you left `getFiles` implementation empty intentionally? You shoul consider adding its implementation as well as of the xml where you implement swipe and refresh control.","body":"Do you see refresh icon when you pull down for refreshing or nothing at all? Besides, do you left <code>getFiles</code> implementation empty intentionally? You shoul consider adding its implementation as well as of the xml where you implement swipe and refresh control."},{"owner":{"account_id":19186823,"reputation":107,"user_id":14017441,"display_name":"Ritesh Nayak"},"score":0,"creation_date":1689070084,"post_id":76659963,"comment_id":135157763,"body_markdown":"No, the refresh Icon doesn&#39;t shows up.  `getFiles()`  is Implemented. It&#39;s a open source project and I have added the link in my Question.","body":"No, the refresh Icon doesn&#39;t shows up.  <code>getFiles()</code>  is Implemented. It&#39;s a open source project and I have added the link in my Question."},{"owner":{"account_id":19186823,"reputation":107,"user_id":14017441,"display_name":"Ritesh Nayak"},"score":0,"creation_date":1689070131,"post_id":76659963,"comment_id":135157775,"body_markdown":"Let me edit the question and add the getFiles() code too","body":"Let me edit the question and add the getFiles() code too"},{"owner":{"account_id":19186823,"reputation":107,"user_id":14017441,"display_name":"Ritesh Nayak"},"score":0,"creation_date":1689081665,"post_id":76659963,"comment_id":135160361,"body_markdown":"I tried recreating the same fragment and transfered code little bit at a time. I found that `recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), Common.GRID_COUNT));` adding this line causes the Issue. Can you explain how this causing the issue.","body":"I tried recreating the same fragment and transfered code little bit at a time. I found that <code>recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), Common.GRID_COUNT));</code> adding this line causes the Issue. Can you explain how this causing the issue."}],"owner":{"account_id":19186823,"reputation":107,"user_id":14017441,"display_name":"Ritesh Nayak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689070171,"creation_date":1689063674,"question_id":76659963,"body_markdown":"Swipe gesture doesn&#39;t work at first. This happens when there is no item in the recyvlerview. Once a item is added and the fragement&#39;s onViewCreated Function is again called. SwipeRefreshLayout works fine even of the recyclerview is empty. The problems reappears on restart of the activity. \r\n\r\nThis issue is there on SavedFilesFragment ([LInk](https://github.com/GauthamAsir/WhatsApp_Status_Saver/blob/master/app/src/main/java/a/gautham/statusdownloader/Fragments/SavedFilesFragment.java))\r\n\r\nHere is code\r\n\r\n\r\n```\r\npublic class SavedFilesFragment extends Fragment {\r\n\r\n    private RecyclerView recyclerView;\r\n    private ProgressBar progressBar;\r\n    private final List&lt;Status&gt; savedFilesList = new ArrayList&lt;&gt;();\r\n    private final Handler handler = new Handler();\r\n    private FilesAdapter filesAdapter;\r\n    private SwipeRefreshLayout swipeRefreshLayout;\r\n    private TextView no_files_found;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        return inflater.inflate(R.layout.fragment_saved_files, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        recyclerView = view.findViewById(R.id.recyclerViewFiles);\r\n        swipeRefreshLayout = view.findViewById(R.id.swipeRefreshLayoutFiles);\r\n        progressBar = view.findViewById(R.id.progressBar);\r\n        no_files_found = view.findViewById(R.id.no_files_found);\r\n\r\n        StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();\r\n        StrictMode.setVmPolicy(builder.build());\r\n\r\n        swipeRefreshLayout.setColorSchemeColors(ContextCompat.getColor(requireActivity(), android.R.color.holo_orange_dark)\r\n                , ContextCompat.getColor(requireActivity(), android.R.color.holo_green_dark),\r\n                ContextCompat.getColor(requireActivity(), R.color.colorPrimary),\r\n                ContextCompat.getColor(requireActivity(), android.R.color.holo_blue_dark));\r\n\r\n        swipeRefreshLayout.setOnRefreshListener(this::getFiles);\r\n\r\n        recyclerView.setHasFixedSize(true);\r\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), Common.GRID_COUNT));\r\n\r\n        getFiles();\r\n\r\n    }\r\n\r\n    private void getFiles()\r\n\r\n        final File app_dir = new File(Common.APP_DIR);\r\n\r\n        if (app_dir.exists() ||\r\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n\r\n            no_files_found.setVisibility(View.GONE);\r\n\r\n            new Thread(() -&gt; {\r\n                File[] savedFiles;\r\n\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    File f = new File(Environment.getExternalStoragePublicDirectory(\r\n                            Environment.DIRECTORY_DCIM\r\n                    ) + File.separator + &quot;status_saver&quot;);\r\n                    savedFiles = f.listFiles();\r\n                } else {\r\n                    savedFiles = app_dir.listFiles();\r\n                }\r\n                savedFilesList.clear();\r\n\r\n                if (savedFiles != null &amp;&amp; savedFiles.length &gt; 0) {\r\n\r\n                    Arrays.sort(savedFiles);\r\n                    for (File file : savedFiles) {\r\n                        Status status = new Status(file, file.getName(), file.getAbsolutePath());\r\n\r\n                        savedFilesList.add(status);\r\n                    }\r\n\r\n                    handler.post(() -&gt; {\r\n\r\n                        filesAdapter = new FilesAdapter(savedFilesList);\r\n                        recyclerView.setAdapter(filesAdapter);\r\n                        filesAdapter.notifyDataSetChanged();\r\n                        progressBar.setVisibility(View.GONE);\r\n                    });\r\n\r\n                } else {\r\n\r\n                    handler.post(() -&gt; {\r\n                        progressBar.setVisibility(View.GONE);\r\n                        no_files_found.setVisibility(View.VISIBLE);\r\n//                                Toast.makeText(getActivity(), &quot;Dir doest not exists&quot;, Toast.LENGTH_SHORT).show();\r\n                    });\r\n\r\n                }\r\n                swipeRefreshLayout.setRefreshing(false);\r\n            }).start();\r\n\r\n        } else {\r\n            no_files_found.setVisibility(View.VISIBLE);\r\n            progressBar.setVisibility(View.GONE);\r\n        }\r\n\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nI tried creating a Button to call the same function `getFiles()` but the Button too doesn&#39;t work the same way","title":"SwipeRefreshLayout Swipe gesture Initially not working in Fragment","body":"<p>Swipe gesture doesn't work at first. This happens when there is no item in the recyvlerview. Once a item is added and the fragement's onViewCreated Function is again called. SwipeRefreshLayout works fine even of the recyclerview is empty. The problems reappears on restart of the activity.</p>\n<p>This issue is there on SavedFilesFragment (<a href=\"https://github.com/GauthamAsir/WhatsApp_Status_Saver/blob/master/app/src/main/java/a/gautham/statusdownloader/Fragments/SavedFilesFragment.java\" rel=\"nofollow noreferrer\">LInk</a>)</p>\n<p>Here is code</p>\n<pre><code>public class SavedFilesFragment extends Fragment {\n\n    private RecyclerView recyclerView;\n    private ProgressBar progressBar;\n    private final List&lt;Status&gt; savedFilesList = new ArrayList&lt;&gt;();\n    private final Handler handler = new Handler();\n    private FilesAdapter filesAdapter;\n    private SwipeRefreshLayout swipeRefreshLayout;\n    private TextView no_files_found;\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_saved_files, container, false);\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        recyclerView = view.findViewById(R.id.recyclerViewFiles);\n        swipeRefreshLayout = view.findViewById(R.id.swipeRefreshLayoutFiles);\n        progressBar = view.findViewById(R.id.progressBar);\n        no_files_found = view.findViewById(R.id.no_files_found);\n\n        StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();\n        StrictMode.setVmPolicy(builder.build());\n\n        swipeRefreshLayout.setColorSchemeColors(ContextCompat.getColor(requireActivity(), android.R.color.holo_orange_dark)\n                , ContextCompat.getColor(requireActivity(), android.R.color.holo_green_dark),\n                ContextCompat.getColor(requireActivity(), R.color.colorPrimary),\n                ContextCompat.getColor(requireActivity(), android.R.color.holo_blue_dark));\n\n        swipeRefreshLayout.setOnRefreshListener(this::getFiles);\n\n        recyclerView.setHasFixedSize(true);\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), Common.GRID_COUNT));\n\n        getFiles();\n\n    }\n\n    private void getFiles()\n\n        final File app_dir = new File(Common.APP_DIR);\n\n        if (app_dir.exists() ||\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n\n            no_files_found.setVisibility(View.GONE);\n\n            new Thread(() -&gt; {\n                File[] savedFiles;\n\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                    File f = new File(Environment.getExternalStoragePublicDirectory(\n                            Environment.DIRECTORY_DCIM\n                    ) + File.separator + &quot;status_saver&quot;);\n                    savedFiles = f.listFiles();\n                } else {\n                    savedFiles = app_dir.listFiles();\n                }\n                savedFilesList.clear();\n\n                if (savedFiles != null &amp;&amp; savedFiles.length &gt; 0) {\n\n                    Arrays.sort(savedFiles);\n                    for (File file : savedFiles) {\n                        Status status = new Status(file, file.getName(), file.getAbsolutePath());\n\n                        savedFilesList.add(status);\n                    }\n\n                    handler.post(() -&gt; {\n\n                        filesAdapter = new FilesAdapter(savedFilesList);\n                        recyclerView.setAdapter(filesAdapter);\n                        filesAdapter.notifyDataSetChanged();\n                        progressBar.setVisibility(View.GONE);\n                    });\n\n                } else {\n\n                    handler.post(() -&gt; {\n                        progressBar.setVisibility(View.GONE);\n                        no_files_found.setVisibility(View.VISIBLE);\n//                                Toast.makeText(getActivity(), &quot;Dir doest not exists&quot;, Toast.LENGTH_SHORT).show();\n                    });\n\n                }\n                swipeRefreshLayout.setRefreshing(false);\n            }).start();\n\n        } else {\n            no_files_found.setVisibility(View.VISIBLE);\n            progressBar.setVisibility(View.GONE);\n        }\n\n    }\n\n</code></pre>\n<p>I tried creating a Button to call the same function <code>getFiles()</code> but the Button too doesn't work the same way</p>\n"},{"tags":["java","android","android-wifi","android-13","android-connectivitymanager"],"answers":[{"tags":[],"owner":{"account_id":13762909,"reputation":1124,"user_id":9932194,"display_name":"K M Rejowan Ahmmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689068835,"creation_date":1689068835,"answer_id":76660678,"question_id":76660349,"body_markdown":"The method `capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)` checks if the current network supports transport over WiFi, not whether WiFi is currently active and connected.\r\n\r\nInstead, you should use `capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)` and `capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)` together to check if there is an active WiFi connection with the internet.\r\n\r\n    public static boolean checkIfAppIsConnectedToWIFI(Context context) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        if (connectivityManager != null) {\r\n            NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(connectivityManager.getActiveNetwork());\r\n            if (capabilities != null) {\r\n                if (capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET) &amp;&amp;\r\n                    capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    \r\n        return false;\r\n    }\r\n\r\n","title":"(Java) Check if Android app is connected to WIFI with Android 13 and API 33","body":"<p>The method <code>capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)</code> checks if the current network supports transport over WiFi, not whether WiFi is currently active and connected.</p>\n<p>Instead, you should use <code>capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)</code> and <code>capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)</code> together to check if there is an active WiFi connection with the internet.</p>\n<pre><code>public static boolean checkIfAppIsConnectedToWIFI(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    if (connectivityManager != null) {\n        NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(connectivityManager.getActiveNetwork());\n        if (capabilities != null) {\n            if (capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET) &amp;&amp;\n                capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11864229,"reputation":391,"user_id":8682142,"display_name":"Waseem Abbas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689069888,"creation_date":1689069888,"answer_id":76660817,"question_id":76660349,"body_markdown":"Try this method:\r\n```Java\r\npublic class DetectInternetConnection {\r\n\r\n    public static boolean checkIfAppIsConnectedToWIFI(Context context) {\r\n        ConnectivityManager connectivityManager = context.getSystemService(ConnectivityManager.class);\r\n        if (connectivityManager == null) return false;\r\n\r\n        Network currentNetwork = connectivityManager.getActiveNetwork();\r\n        if (currentNetwork == null) return false;\r\n\r\n        NetworkCapabilities caps = connectivityManager.getNetworkCapabilities(currentNetwork);\r\n        if (caps == null) return false;\r\n\r\n        return caps.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET) &amp;&amp; caps.hasTransport(NetworkCapabilities.TRANSPORT_WIFI);\r\n    }\r\n}\r\n```","title":"(Java) Check if Android app is connected to WIFI with Android 13 and API 33","body":"<p>Try this method:</p>\n<pre><code>public class DetectInternetConnection {\n\n    public static boolean checkIfAppIsConnectedToWIFI(Context context) {\n        ConnectivityManager connectivityManager = context.getSystemService(ConnectivityManager.class);\n        if (connectivityManager == null) return false;\n\n        Network currentNetwork = connectivityManager.getActiveNetwork();\n        if (currentNetwork == null) return false;\n\n        NetworkCapabilities caps = connectivityManager.getNetworkCapabilities(currentNetwork);\n        if (caps == null) return false;\n\n        return caps.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET) &amp;&amp; caps.hasTransport(NetworkCapabilities.TRANSPORT_WIFI);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2392224,"reputation":4001,"user_id":2091861,"accept_rate":68,"display_name":"odd_duck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76660678,"answer_count":2,"score":-1,"last_activity_date":1689069888,"creation_date":1689066552,"question_id":76660349,"body_markdown":"I have an Android app built with Java, running on Android 13 and API version 33.\r\n\r\nThe app serves a webView, though I want to be able to serve up a local asset if WIFI is not connected (I do not need to worry about Cellular connections - only WIFI) as soon as the app launches.\r\n\r\nMy current setup is like so:\r\n\r\nPermissions within:\r\n\r\n**AndroidManifest.xml:**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n\r\n**MainActivity.java:**\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        private WebView myWebView;\r\n        private Context context;\r\n\r\n        @Override\r\n        @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            myWebView = findViewById(R.id.activity_main_webview);\r\n\r\n            WebSettings webSettings = myWebView.getSettings();\r\n            webSettings.setJavaScriptEnabled(true);\r\n            webSettings.setGeolocationEnabled(true);\r\n\r\n            myWebView.setWebViewClient(new MyWebViewClient());\r\n\r\n            if (DetectInternetConnection.checkIfAppIsConnectedToWIFI(this)) {\r\n              myWebView.loadUrl(&quot;https://remote-web-address&quot;);\r\n            } else {\r\n              myWebView.loadUrl(&quot;file:///android_asset/local-html-page.html&quot;);\r\n            }\r\n\r\n            // and so on...\r\n\r\n**DetectInternetConnection.java:**\r\n\r\n    package com.mycompany.app;\r\n\r\n    import android.content.Context;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkCapabilities;\r\n\r\n    class DetectInternetConnection {\r\n\r\n      public static boolean checkIfAppIsConnectedToWIFI(Context context) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        if (connectivityManager != null) {\r\n            NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(connectivityManager.getActiveNetwork());\r\n            if (capabilities != null) {\r\n                if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n      }\r\n    }\r\n\r\nHowever my app always loads the remote webview content.\r\nAs the `checkIfAppIsConnectedToWIFI` method always returns true.\r\n\r\nEven if I turn off WIFI on the machine which the emulator is running on, or the device itself.\r\n\r\n\r\n","title":"(Java) Check if Android app is connected to WIFI with Android 13 and API 33","body":"<p>I have an Android app built with Java, running on Android 13 and API version 33.</p>\n<p>The app serves a webView, though I want to be able to serve up a local asset if WIFI is not connected (I do not need to worry about Cellular connections - only WIFI) as soon as the app launches.</p>\n<p>My current setup is like so:</p>\n<p>Permissions within:</p>\n<p><strong>AndroidManifest.xml:</strong></p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n</code></pre>\n<p><strong>MainActivity.java:</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private WebView myWebView;\n    private Context context;\n\n    @Override\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        myWebView = findViewById(R.id.activity_main_webview);\n\n        WebSettings webSettings = myWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        webSettings.setGeolocationEnabled(true);\n\n        myWebView.setWebViewClient(new MyWebViewClient());\n\n        if (DetectInternetConnection.checkIfAppIsConnectedToWIFI(this)) {\n          myWebView.loadUrl(&quot;https://remote-web-address&quot;);\n        } else {\n          myWebView.loadUrl(&quot;file:///android_asset/local-html-page.html&quot;);\n        }\n\n        // and so on...\n</code></pre>\n<p><strong>DetectInternetConnection.java:</strong></p>\n<pre><code>package com.mycompany.app;\n\nimport android.content.Context;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkCapabilities;\n\nclass DetectInternetConnection {\n\n  public static boolean checkIfAppIsConnectedToWIFI(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    if (connectivityManager != null) {\n        NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(connectivityManager.getActiveNetwork());\n        if (capabilities != null) {\n            if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n  }\n}\n</code></pre>\n<p>However my app always loads the remote webview content.\nAs the <code>checkIfAppIsConnectedToWIFI</code> method always returns true.</p>\n<p>Even if I turn off WIFI on the machine which the emulator is running on, or the device itself.</p>\n"},{"tags":["java","android","android-viewpager2"],"owner":{"account_id":18274896,"reputation":25,"user_id":13304918,"display_name":"xeniosth19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689069837,"creation_date":1689069837,"question_id":76660808,"body_markdown":"I would like to have a horizontal scrolling carousel that will display news. Those news I would like to be like an infinite loop of cards. When I am on first cards I would have the ability to go back to the last and when I am on the last to be able to go back to the first card. \r\n\r\nAt the first run of the app where no scrolls have been taken place, when I scroll from the first to the second card, it appears the last card next to the first card but it scrolls to the second.\r\n\r\nWhen I try to scroll from the first to the last card, the last card appears also but it never scrolls like the first scenario. So I have to scroll two times to go from the first to the last. One time to appear the last card and another one to scroll from first to the last card.\r\n\r\nI would like to scroll immediately if it is possible.\r\n\r\n\r\nHere is my code:\r\n\r\n        newsAdapter = new NewsAdapter(newsList);\r\n        newsViewPager.setAdapter(newsAdapter);\r\n        newsViewPager.setClipToPadding(false);\r\n        newsViewPager.setClipChildren(false);\r\n        newsViewPager.setOffscreenPageLimit(3);\r\n        newsViewPager.getChildAt(0).setOverScrollMode(RecyclerView.OVER_SCROLL_NEVER);\r\n\r\n        CompositePageTransformer newsTransformer = new CompositePageTransformer();\r\n        newsTransformer.addTransformer(new MarginPageTransformer(40));\r\n        newsTransformer.addTransformer(new ViewPager2.PageTransformer() {\r\n            @Override\r\n            public void transformPage(@NonNull View page, float position) {\r\n                float r = 1 - Math.abs(position);\r\n                page.setScaleY(0.85f + r * 0.15f);\r\n            }\r\n        });\r\n\r\n        newsViewPager.setPageTransformer(newsTransformer);\r\n\r\n\r\nHere is my OnPageChangeCallback:\r\n        \r\n     private ViewPager2.OnPageChangeCallback onPageChangeCallback = new ViewPager2.OnPageChangeCallback() {\r\n        @Override\r\n        public void onPageSelected(int position) {\r\n            \r\n        }\r\n\r\n        @Override\r\n        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\r\n            super.onPageScrolled(position, positionOffset, positionOffsetPixels);\r\n            \r\n        }\r\n\r\n        @Override\r\n        public void onPageScrollStateChanged(int state) {\r\n            super.onPageScrollStateChanged(state);\r\n            if (state == ViewPager.SCROLL_STATE_IDLE) {\r\n                int currentEventItem = eventsViewPager.getCurrentItem();\r\n                int lastRealEventItem = eventsViewPager.getAdapter().getItemCount() - 2;\r\n                if (currentEventItem == 0) {\r\n                    eventsViewPager.setCurrentItem(lastRealEventItem, false);\r\n                } else if (currentEventItem &gt; lastRealEventItem) {\r\n                    eventsViewPager.setCurrentItem(1, false);\r\n                }\r\n\r\n                int currentNewItem = newsViewPager.getCurrentItem();\r\n                int lastRealNewItem = newsViewPager.getAdapter().getItemCount() - 2;\r\n\r\n                if (currentNewItem == 0) {\r\n                    newsViewPager.setCurrentItem(lastRealNewItem, false);\r\n                } else if (currentNewItem &gt; lastRealNewItem) {\r\n                    newsViewPager.setCurrentItem(1, false);\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\nHere is my newsAdapter:\r\n\r\n       public NewsAdapter(List&lt;New&gt; allNewsList) {\r\n        this.allNewsList = allNewsList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.new_cardview, parent,false);\r\n        v.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));\r\n        return new ViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        int itemCount = getItemCount() - 2;\r\n        int adjustedPosition = (position  + itemCount) % itemCount;\r\n\r\n        holder.newTitle.setText(allNewsList.get(adjustedPosition).getTitle());\r\n\r\n        if (allNewsList.get(adjustedPosition).getImage().isEmpty()) {\r\n            Picasso.get().cancelRequest(holder.newImage);\r\n            holder.newImage.setImageDrawable(null);\r\n        } else{\r\n            Picasso.get().load(allNewsList.get(adjustedPosition).getImage()).into(holder.newImage);\r\n        }\r\n\r\n\r\n\r\n        holder.view.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                Bundle bundle= new Bundle();\r\n                AppCompatActivity activity = (AppCompatActivity) holder.view.getContext();\r\n\r\n                bundle.putSerializable(&quot;newsList&quot;, (Serializable) allNewsList);\r\n                activity.getIntent().putExtra(&quot;title&quot;, allNewsList.get(adjustedPosition).getTitle());\r\n                activity.getIntent().putExtra(&quot;content&quot;, allNewsList.get(adjustedPosition).getContent());\r\n                activity.getIntent().putExtra(&quot;date&quot;, allNewsList.get(adjustedPosition).getDate());\r\n                activity.getIntent().putExtra(&quot;image&quot;, allNewsList.get(adjustedPosition).getImage());\r\n\r\n\r\n                NavController navController = Navigation.findNavController((Activity) view.getContext(), R.id.nav_host_fragment);\r\n                navController.navigate(R.id.action_homeFragment_to_newDetailsFragment);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        int limit = 3;\r\n        return Math.min(allNewsList.size(), limit  + 2);\r\n    }","title":"How to make an infinite ViewPager2 with horizontal sroll?","body":"<p>I would like to have a horizontal scrolling carousel that will display news. Those news I would like to be like an infinite loop of cards. When I am on first cards I would have the ability to go back to the last and when I am on the last to be able to go back to the first card.</p>\n<p>At the first run of the app where no scrolls have been taken place, when I scroll from the first to the second card, it appears the last card next to the first card but it scrolls to the second.</p>\n<p>When I try to scroll from the first to the last card, the last card appears also but it never scrolls like the first scenario. So I have to scroll two times to go from the first to the last. One time to appear the last card and another one to scroll from first to the last card.</p>\n<p>I would like to scroll immediately if it is possible.</p>\n<p>Here is my code:</p>\n<pre><code>    newsAdapter = new NewsAdapter(newsList);\n    newsViewPager.setAdapter(newsAdapter);\n    newsViewPager.setClipToPadding(false);\n    newsViewPager.setClipChildren(false);\n    newsViewPager.setOffscreenPageLimit(3);\n    newsViewPager.getChildAt(0).setOverScrollMode(RecyclerView.OVER_SCROLL_NEVER);\n\n    CompositePageTransformer newsTransformer = new CompositePageTransformer();\n    newsTransformer.addTransformer(new MarginPageTransformer(40));\n    newsTransformer.addTransformer(new ViewPager2.PageTransformer() {\n        @Override\n        public void transformPage(@NonNull View page, float position) {\n            float r = 1 - Math.abs(position);\n            page.setScaleY(0.85f + r * 0.15f);\n        }\n    });\n\n    newsViewPager.setPageTransformer(newsTransformer);\n</code></pre>\n<p>Here is my OnPageChangeCallback:</p>\n<pre><code> private ViewPager2.OnPageChangeCallback onPageChangeCallback = new ViewPager2.OnPageChangeCallback() {\n    @Override\n    public void onPageSelected(int position) {\n        \n    }\n\n    @Override\n    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n        super.onPageScrolled(position, positionOffset, positionOffsetPixels);\n        \n    }\n\n    @Override\n    public void onPageScrollStateChanged(int state) {\n        super.onPageScrollStateChanged(state);\n        if (state == ViewPager.SCROLL_STATE_IDLE) {\n            int currentEventItem = eventsViewPager.getCurrentItem();\n            int lastRealEventItem = eventsViewPager.getAdapter().getItemCount() - 2;\n            if (currentEventItem == 0) {\n                eventsViewPager.setCurrentItem(lastRealEventItem, false);\n            } else if (currentEventItem &gt; lastRealEventItem) {\n                eventsViewPager.setCurrentItem(1, false);\n            }\n\n            int currentNewItem = newsViewPager.getCurrentItem();\n            int lastRealNewItem = newsViewPager.getAdapter().getItemCount() - 2;\n\n            if (currentNewItem == 0) {\n                newsViewPager.setCurrentItem(lastRealNewItem, false);\n            } else if (currentNewItem &gt; lastRealNewItem) {\n                newsViewPager.setCurrentItem(1, false);\n            }\n\n        }\n    }\n};\n</code></pre>\n<p>Here is my newsAdapter:</p>\n<pre><code>   public NewsAdapter(List&lt;New&gt; allNewsList) {\n    this.allNewsList = allNewsList;\n}\n\n@NonNull\n@Override\npublic ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.new_cardview, parent,false);\n    v.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));\n    return new ViewHolder(v);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n    int itemCount = getItemCount() - 2;\n    int adjustedPosition = (position  + itemCount) % itemCount;\n\n    holder.newTitle.setText(allNewsList.get(adjustedPosition).getTitle());\n\n    if (allNewsList.get(adjustedPosition).getImage().isEmpty()) {\n        Picasso.get().cancelRequest(holder.newImage);\n        holder.newImage.setImageDrawable(null);\n    } else{\n        Picasso.get().load(allNewsList.get(adjustedPosition).getImage()).into(holder.newImage);\n    }\n\n\n\n    holder.view.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n\n            Bundle bundle= new Bundle();\n            AppCompatActivity activity = (AppCompatActivity) holder.view.getContext();\n\n            bundle.putSerializable(&quot;newsList&quot;, (Serializable) allNewsList);\n            activity.getIntent().putExtra(&quot;title&quot;, allNewsList.get(adjustedPosition).getTitle());\n            activity.getIntent().putExtra(&quot;content&quot;, allNewsList.get(adjustedPosition).getContent());\n            activity.getIntent().putExtra(&quot;date&quot;, allNewsList.get(adjustedPosition).getDate());\n            activity.getIntent().putExtra(&quot;image&quot;, allNewsList.get(adjustedPosition).getImage());\n\n\n            NavController navController = Navigation.findNavController((Activity) view.getContext(), R.id.nav_host_fragment);\n            navController.navigate(R.id.action_homeFragment_to_newDetailsFragment);\n        }\n    });\n\n}\n\n\n@Override\npublic int getItemCount() {\n    int limit = 3;\n    return Math.min(allNewsList.size(), limit  + 2);\n}\n</code></pre>\n"},{"tags":["java","url-shortener","amazon-product-advertising-api"],"answers":[{"comments":[{"owner":{"account_id":5919781,"reputation":29352,"user_id":4657412,"display_name":"DavidW"},"score":0,"creation_date":1689144481,"post_id":76660707,"comment_id":135169766,"body_markdown":"This answer looks like ChatGPT","body":"This answer looks like ChatGPT"},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":0,"creation_date":1689184776,"post_id":76660707,"comment_id":135178989,"body_markdown":"**Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.** If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly. The moderation team can use your help to identify quality issues.","body":"<b>Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.</b> If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly. The moderation team can use your help to identify quality issues."},{"owner":{"account_id":28993245,"reputation":1,"user_id":22208493,"display_name":"Francesco"},"score":0,"creation_date":1689320914,"post_id":76660707,"comment_id":135199661,"body_markdown":"It seems strange that the Product Advertising APIs in Java do not generate a short URL. It is possible to get it from the GUI.","body":"It seems strange that the Product Advertising APIs in Java do not generate a short URL. It is possible to get it from the GUI."}],"tags":[],"owner":{"account_id":25085368,"reputation":5,"user_id":18937650,"display_name":"active user"},"comment_count":3,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1689069046,"creation_date":1689069046,"answer_id":76660707,"question_id":76660439,"body_markdown":"The Amazon Product Advertising API does not provide a direct method for generating shortened URLs. Therefore, you&#39;ll need to use a separate URL shortening service, such as Bitly or TinyURL, to accomplish this.\r\n\r\nHere&#39;s an example of how you can achieve this using the Bitly API:\r\n\r\n**1.** Sign up for a Bitly account and obtain an API key. You can refer to the Bitly API documentation for more details on how to acquire the API key.\r\n\r\n**2.** Add the necessary dependencies to your Java project. You&#39;ll need an HTTP client library, such as Apache HttpClient or OkHttp, to make API requests. You can include the required libraries by adding the appropriate dependencies to your build configuration (e.g., Maven or Gradle).\r\n\r\n**3.** Use the following Java method to generate a shortened URL using the Bitly API:\r\n\r\n\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.client.methods.HttpPost;\r\n    import org.apache.http.entity.StringEntity;\r\n    import org.apache.http.impl.client.HttpClientBuilder;\r\n    import org.apache.http.util.EntityUtils;\r\n    import org.json.JSONObject;\r\n    \r\n    import java.io.IOException;\r\n\r\n    public class AmazonURLShortener {\r\n      private static final String BITLY_API_URL = &quot;https://api-ssl.bitly.com/v4/shorten&quot;;\r\n      private static final String BITLY_ACCESS_TOKEN = &quot;YOUR_BITLY_ACCESS_TOKEN&quot;;\r\n\r\n      public static String shortenAmazonURL(String amazonProductURL) throws IOException {\r\n        HttpClient httpClient = HttpClientBuilder.create().build();\r\n        HttpPost request = new HttpPost(BITLY_API_URL);\r\n\r\n        // Set the request headers\r\n        request.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        request.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + BITLY_ACCESS_TOKEN);\r\n\r\n        // Prepare the request body\r\n        JSONObject requestBody = new JSONObject();\r\n        requestBody.put(&quot;long_url&quot;, amazonProductURL);\r\n        StringEntity params = new StringEntity(requestBody.toString());\r\n        request.setEntity(params);\r\n\r\n        // Send the API request\r\n        HttpResponse response = httpClient.execute(request);\r\n        HttpEntity responseEntity = response.getEntity();\r\n\r\n        // Parse the response\r\n        if (responseEntity != null) {\r\n            String responseJson = EntityUtils.toString(responseEntity);\r\n            JSONObject jsonResponse = new JSONObject(responseJson);\r\n            return jsonResponse.getString(&quot;link&quot;);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            String amazonProductURL = &quot;YOUR_AMAZON_PRODUCT_URL&quot;;\r\n            String shortenedURL = shortenAmazonURL(amazonProductURL);\r\n            System.out.println(&quot;Shortened URL: &quot; + shortenedURL);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\nMake sure to replace &quot;YOUR_BITLY_ACCESS_TOKEN&quot; with your actual Bitly API access token and provide the Amazon product URL as &quot;YOUR_AMAZON_PRODUCT_URL&quot;. Additionally, ensure that you&#39;ve added the necessary dependencies for the HTTP client library you choose to use.\r\n\r\nNote that this example uses the Bitly API, but you can adapt it to work with other URL shortening services by modifying the API endpoint and request parameters accordingly.","title":"Generating Shortened Amazon URLs using Product Advertising API in Java","body":"<p>The Amazon Product Advertising API does not provide a direct method for generating shortened URLs. Therefore, you'll need to use a separate URL shortening service, such as Bitly or TinyURL, to accomplish this.</p>\n<p>Here's an example of how you can achieve this using the Bitly API:</p>\n<p><strong>1.</strong> Sign up for a Bitly account and obtain an API key. You can refer to the Bitly API documentation for more details on how to acquire the API key.</p>\n<p><strong>2.</strong> Add the necessary dependencies to your Java project. You'll need an HTTP client library, such as Apache HttpClient or OkHttp, to make API requests. You can include the required libraries by adding the appropriate dependencies to your build configuration (e.g., Maven or Gradle).</p>\n<p><strong>3.</strong> Use the following Java method to generate a shortened URL using the Bitly API:</p>\n<pre><code>import org.apache.http.HttpEntity;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.http.util.EntityUtils;\nimport org.json.JSONObject;\n\nimport java.io.IOException;\n\npublic class AmazonURLShortener {\n  private static final String BITLY_API_URL = &quot;https://api-ssl.bitly.com/v4/shorten&quot;;\n  private static final String BITLY_ACCESS_TOKEN = &quot;YOUR_BITLY_ACCESS_TOKEN&quot;;\n\n  public static String shortenAmazonURL(String amazonProductURL) throws IOException {\n    HttpClient httpClient = HttpClientBuilder.create().build();\n    HttpPost request = new HttpPost(BITLY_API_URL);\n\n    // Set the request headers\n    request.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\n    request.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + BITLY_ACCESS_TOKEN);\n\n    // Prepare the request body\n    JSONObject requestBody = new JSONObject();\n    requestBody.put(&quot;long_url&quot;, amazonProductURL);\n    StringEntity params = new StringEntity(requestBody.toString());\n    request.setEntity(params);\n\n    // Send the API request\n    HttpResponse response = httpClient.execute(request);\n    HttpEntity responseEntity = response.getEntity();\n\n    // Parse the response\n    if (responseEntity != null) {\n        String responseJson = EntityUtils.toString(responseEntity);\n        JSONObject jsonResponse = new JSONObject(responseJson);\n        return jsonResponse.getString(&quot;link&quot;);\n    }\n\n    return null;\n}\n\npublic static void main(String[] args) {\n    try {\n        String amazonProductURL = &quot;YOUR_AMAZON_PRODUCT_URL&quot;;\n        String shortenedURL = shortenAmazonURL(amazonProductURL);\n        System.out.println(&quot;Shortened URL: &quot; + shortenedURL);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n<p>Make sure to replace &quot;YOUR_BITLY_ACCESS_TOKEN&quot; with your actual Bitly API access token and provide the Amazon product URL as &quot;YOUR_AMAZON_PRODUCT_URL&quot;. Additionally, ensure that you've added the necessary dependencies for the HTTP client library you choose to use.</p>\n<p>Note that this example uses the Bitly API, but you can adapt it to work with other URL shortening services by modifying the API endpoint and request parameters accordingly.</p>\n"}],"owner":{"account_id":28993245,"reputation":1,"user_id":22208493,"display_name":"Francesco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689069046,"creation_date":1689067198,"question_id":76660439,"body_markdown":"I would like to create a Java method that utilizes the Amazon Product Advertising API to generate a shortened URL in the format https://amzn.to/XXXX from an Amazon product URL.\r\n\r\nI am looking for guidance on how to achieve this functionality using the Product Advertising API in Java.\r\n\r\nAny code examples, relevant documentation references, or step-by-step instructions would be greatly appreciated. Thank you!\r\n\r\nBy reading the documentation, I couldn&#39;t find anything related to it.","title":"Generating Shortened Amazon URLs using Product Advertising API in Java","body":"<p>I would like to create a Java method that utilizes the Amazon Product Advertising API to generate a shortened URL in the format <a href=\"https://amzn.to/XXXX\" rel=\"nofollow noreferrer\">https://amzn.to/XXXX</a> from an Amazon product URL.</p>\n<p>I am looking for guidance on how to achieve this functionality using the Product Advertising API in Java.</p>\n<p>Any code examples, relevant documentation references, or step-by-step instructions would be greatly appreciated. Thank you!</p>\n<p>By reading the documentation, I couldn't find anything related to it.</p>\n"},{"tags":["java","search"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1421503119,"post_id":28000193,"comment_id":44389607,"body_markdown":"Can you expand on your requirements, specifically, what type of output are you desiring and how your current code does not meet your needs?","body":"Can you expand on your requirements, specifically, what type of output are you desiring and how your current code does not meet your needs?"}],"answers":[{"comments":[{"owner":{"account_id":5493767,"reputation":3,"user_id":4365607,"display_name":"Nathan"},"score":0,"creation_date":1421545036,"post_id":28000254,"comment_id":44400982,"body_markdown":"I feel really silly for not working that one out. Thank you very much for the help! I needed it to print the line. I managed to get it working in a while statement. Thanks again!","body":"I feel really silly for not working that one out. Thank you very much for the help! I needed it to print the line. I managed to get it working in a while statement. Thanks again!"},{"owner":{"account_id":5612515,"reputation":6596,"user_id":4464570,"accept_rate":71,"display_name":"Byte Commander"},"score":0,"creation_date":1421552910,"post_id":28000254,"comment_id":44402133,"body_markdown":"So if I could help you would you mind accepting the answer? It improves both our reputation score and shows the community that your question is answered. Thank you!","body":"So if I could help you would you mind accepting the answer? It improves both our reputation score and shows the community that your question is answered. Thank you!"}],"tags":[],"owner":{"account_id":5612515,"reputation":6596,"user_id":4464570,"accept_rate":71,"display_name":"Byte Commander"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1421503468,"creation_date":1421503468,"answer_id":28000254,"question_id":28000193,"body_markdown":"Currently when you found something, you call  \r\n`System.out.println(line.contains(userSearch));`  \r\nwhich as far as I know would print either &quot;true&quot; or &quot;false&quot; as String.contains(String) should return a boolean value.  \r\nTo print the whole line just use `System.out.println(line);`  \r\nOr what would you like to see instead?\r\n\r\nAnd I do not know what your `val` variable is for, but if it just says &quot;result found&quot; or &quot;not found&quot; you could use boolean. If you want to count the results, write `var++;` when it found something and nothing if the line does not contain the result. It&#39;s not about your question, but maybe useful too.","title":"Search, and display results from a text document in java","body":"<p>Currently when you found something, you call<br>\n<code>System.out.println(line.contains(userSearch));</code><br>\nwhich as far as I know would print either \"true\" or \"false\" as String.contains(String) should return a boolean value.<br>\nTo print the whole line just use <code>System.out.println(line);</code><br>\nOr what would you like to see instead?</p>\n\n<p>And I do not know what your <code>val</code> variable is for, but if it just says \"result found\" or \"not found\" you could use boolean. If you want to count the results, write <code>var++;</code> when it found something and nothing if the line does not contain the result. It's not about your question, but maybe useful too.</p>\n"},{"comments":[{"owner":{"account_id":8015275,"reputation":18609,"user_id":6045800,"display_name":"Tomerikoo"},"score":0,"creation_date":1675869375,"post_id":75383253,"comment_id":133021142,"body_markdown":"How is that even remotely related to the question?","body":"How is that even remotely related to the question?"}],"tags":[],"owner":{"account_id":27732972,"reputation":1,"user_id":21171123,"display_name":"Pawanthi Madushani"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689068968,"creation_date":1675846139,"answer_id":75383253,"question_id":28000193,"body_markdown":"class person`private int age ; private person`age =24;`\r\n\r\nPublic clasa Test`public static void main(string[]args`person p = new person();System.out.println(p.age);\r\n","title":"Search, and display results from a text document in java","body":"<p>class person<code>private int age ; private person</code>age =24;`</p>\n<p>Public clasa Test<code>public static void main(string[]args</code>person p = new person();System.out.println(p.age);</p>\n"}],"owner":{"account_id":5493767,"reputation":3,"user_id":4365607,"display_name":"Nathan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":806,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28000254,"answer_count":2,"score":0,"last_activity_date":1689068968,"creation_date":1421503036,"question_id":28000193,"body_markdown":"I&#39;m trying to search a text document in Java for a user defined input, below is my current code. All this code is doing is telling me that whatever I search is in the document but I&#39;m puzzled on how to display the actual results. Any help will be much appreciated.\r\n\r\n\r\n    String userSearch = &quot;&quot;; int val = 0;\r\n    while(!userSearch.matches(&quot;quit&quot;))\r\n    {\r\n        System.out.println(&quot;Enter the word to be searched for&quot;);\r\n        Scanner input = new Scanner(System.in);\r\n        Scanner file = new Scanner(new File(&quot;file.txt&quot;));\r\n        userSearch = input.next();\r\n\r\n        while(file.hasNextLine())           \r\n        {\r\n            String line = file.nextLine();\r\n            if(line.contains(userSearch))\r\n            {\r\n                System.out.println(line.contains(userSearch));\r\n                val = 1;\r\n                break;\r\n            }\r\n            else\r\n            {\r\n                val = 0;\r\n                continue;\r\n            }\r\n    }\r\n\r\n","title":"Search, and display results from a text document in java","body":"<p>I'm trying to search a text document in Java for a user defined input, below is my current code. All this code is doing is telling me that whatever I search is in the document but I'm puzzled on how to display the actual results. Any help will be much appreciated.</p>\n\n<pre><code>String userSearch = \"\"; int val = 0;\nwhile(!userSearch.matches(\"quit\"))\n{\n    System.out.println(\"Enter the word to be searched for\");\n    Scanner input = new Scanner(System.in);\n    Scanner file = new Scanner(new File(\"file.txt\"));\n    userSearch = input.next();\n\n    while(file.hasNextLine())           \n    {\n        String line = file.nextLine();\n        if(line.contains(userSearch))\n        {\n            System.out.println(line.contains(userSearch));\n            val = 1;\n            break;\n        }\n        else\n        {\n            val = 0;\n            continue;\n        }\n}\n</code></pre>\n"},{"tags":["java","rest","authentication","https"],"comments":[{"owner":{"account_id":8254918,"reputation":446,"user_id":6208386,"display_name":"Rolson Quadras"},"score":2,"creation_date":1462448914,"post_id":37049783,"comment_id":61647077,"body_markdown":"The error message says  &quot;The request body did not contain valid JSON&quot;. Check the post body (json) - Particularly -  post.setEntity(new UrlEncodedFormEntity(nameValuePairs));","body":"The error message says  &quot;The request body did not contain valid JSON&quot;. Check the post body (json) - Particularly -  post.setEntity(new UrlEncodedFormEntity(nameValuePairs));"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1462449591,"post_id":37049783,"comment_id":61647490,"body_markdown":"UrlEncodedForm is not JSON. And why would the credentials go into both POST body and Auth header?","body":"UrlEncodedForm is not JSON. And why would the credentials go into both POST body and Auth header?"},{"owner":{"account_id":256418,"reputation":807,"user_id":537126,"accept_rate":100,"display_name":"ironmantis7x"},"score":0,"creation_date":1462449694,"post_id":37049783,"comment_id":61647543,"body_markdown":"how do I make the UrlEncodedForm json??","body":"how do I make the UrlEncodedForm json??"}],"owner":{"account_id":256418,"reputation":807,"user_id":537126,"accept_rate":100,"display_name":"ironmantis7x"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689068544,"creation_date":1462448779,"question_id":37049783,"body_markdown":"I am trying to write a Java class file that authenticates to a system using a HTTP Rest call )post in this case).\r\n\r\nI have tried the following code, but I get an error stating: \r\n\r\n    {&quot;errors&quot;:[{&quot;message&quot;:&quot;The request could not be understood&quot;,&quot;developerMessage&quot;:&quot;The request body did not contain valid JSON&quot;}]}\r\n\r\nhere is my code:\r\n\r\n    public class simplePost {\r\n    \r\n        private final String USER_AGENT = &quot;Mozilla/5.0&quot;;\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            HttpClient client = new DefaultHttpClient();\r\n            HttpPost post = new HttpPost(&quot;https://xxxxxx/xxxxx/token&quot;);\r\n    \r\n            CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n            credentialsProvider.setCredentials(AuthScope.ANY,\r\n                    new UsernamePasswordCredentials(&quot;username&quot;, &quot;password&quot;));\r\n    \r\n            List nameValuePairs = new ArrayList(1);\r\n            nameValuePairs.add(new BasicNameValuePair(&quot;username&quot;, &quot;xxxxxxxxxx&quot;)); \r\n            nameValuePairs.add(new BasicNameValuePair(&quot;password&quot;, &quot;xxxxxx&quot;));\r\n    \r\n            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\r\n            HttpResponse response = client.execute(post);\r\n            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n            String line;\r\n            while ((line = rd.readLine()) != null) {\r\n                System.out.println(line);\r\n            }\r\n        }\r\n    }\r\n\r\nI am not sure why I am getting this error. When I put in the URI and login information in Postman or AdvanceRestClient, I get the proper response.\r\n","title":"How to make a valid REST call with authentication in Java","body":"<p>I am trying to write a Java class file that authenticates to a system using a HTTP Rest call )post in this case).</p>\n<p>I have tried the following code, but I get an error stating:</p>\n<pre><code>{&quot;errors&quot;:[{&quot;message&quot;:&quot;The request could not be understood&quot;,&quot;developerMessage&quot;:&quot;The request body did not contain valid JSON&quot;}]}\n</code></pre>\n<p>here is my code:</p>\n<pre><code>public class simplePost {\n\n    private final String USER_AGENT = &quot;Mozilla/5.0&quot;;\n\n    public static void main(String[] args) throws IOException {\n        HttpClient client = new DefaultHttpClient();\n        HttpPost post = new HttpPost(&quot;https://xxxxxx/xxxxx/token&quot;);\n\n        CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n        credentialsProvider.setCredentials(AuthScope.ANY,\n                new UsernamePasswordCredentials(&quot;username&quot;, &quot;password&quot;));\n\n        List nameValuePairs = new ArrayList(1);\n        nameValuePairs.add(new BasicNameValuePair(&quot;username&quot;, &quot;xxxxxxxxxx&quot;)); \n        nameValuePairs.add(new BasicNameValuePair(&quot;password&quot;, &quot;xxxxxx&quot;));\n\n        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n        HttpResponse response = client.execute(post);\n        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n        String line;\n        while ((line = rd.readLine()) != null) {\n            System.out.println(line);\n        }\n    }\n}\n</code></pre>\n<p>I am not sure why I am getting this error. When I put in the URI and login information in Postman or AdvanceRestClient, I get the proper response.</p>\n"},{"tags":["java","lambda","function-composition"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1689022918,"post_id":76657128,"comment_id":135151890,"body_markdown":"I would be shocked if this actually resulted in any performance improvement in the end.  I would expect the JIT to fully optimize this away in actual code.","body":"I would be shocked if this actually resulted in any performance improvement in the end.  I would expect the JIT to fully optimize this away in actual code."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1689025627,"post_id":76657128,"comment_id":135152231,"body_markdown":"&quot;I would expect the JIT to fully optimize this away in actual code.&quot; @LouisWasserman I guess that is what this question comes down to: is there any remnant of `Function.identity()` in the bytecode (or I suppose more importantly at runtime after the JRE kicks in) after a call to `andThen()`. If something remains of `Function.identity()` that isn&#39;t 100% optimized away, it seems useful to me to improve the code, even if it doesn&#39;t result in any significant performance improvement. Maybe I&#39;ve been reading too much about Rust and all the free lunches it provides at the compiler level. &#128518;","body":"&quot;I would expect the JIT to fully optimize this away in actual code.&quot; @LouisWasserman I guess that is what this question comes down to: is there any remnant of <code>Function.identity()</code> in the bytecode (or I suppose more importantly at runtime after the JRE kicks in) after a call to <code>andThen()</code>. If something remains of <code>Function.identity()</code> that isn&#39;t 100% optimized away, it seems useful to me to improve the code, even if it doesn&#39;t result in any significant performance improvement. Maybe I&#39;ve been reading too much about Rust and all the free lunches it provides at the compiler level. 😆"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689031973,"post_id":76657128,"comment_id":135152942,"body_markdown":"&quot;This is equivalent to the following: ... `String foo = Function.identity().apply(&quot;foo&quot;).andThen(String::toUpperCase);`&quot;: no it isn&#39;t. `apply()` returns a `String` in this case, and `String` has no `andThen()` function. You are correct that you don&#39;t need the initial `Function.identity()` call in your example ... so why did you write it?","body":"&quot;This is equivalent to the following: ... <code>String foo = Function.identity().apply(&quot;foo&quot;).andThen(String::toUpperCase&zwnj;&#8203;);</code>&quot;: no it isn&#39;t. <code>apply()</code> returns a <code>String</code> in this case, and <code>String</code> has no <code>andThen()</code> function. You are correct that you don&#39;t need the initial <code>Function.identity()</code> call in your example ... so why did you write it?"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1689035754,"post_id":76657128,"comment_id":135153275,"body_markdown":"(sigh) @user207421 you are missing the point. By &quot;equivalent&quot; here I merely meant that there remains an invocation to the `Function.identity()` in the chain; it is equivalent to two separate operations, not one as in my modified `andThen()`. And I already explained that I&#39;m creating a chain of composed functions. I can start with a &quot;seed&quot; of `null` or a &quot;seed&quot; of `Function.identity()`. The later will prevent a `null` check for the first &quot;link&quot; in the chain if I use `andThen()`; hence this question.","body":"(sigh) @user207421 you are missing the point. By &quot;equivalent&quot; here I merely meant that there remains an invocation to the <code>Function.identity()</code> in the chain; it is equivalent to two separate operations, not one as in my modified <code>andThen()</code>. And I already explained that I&#39;m creating a chain of composed functions. I can start with a &quot;seed&quot; of <code>null</code> or a &quot;seed&quot; of <code>Function.identity()</code>. The later will prevent a <code>null</code> check for the first &quot;link&quot; in the chain if I use <code>andThen()</code>; hence this question."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1689041715,"post_id":76657128,"comment_id":135153802,"body_markdown":"It is highly unlikely it will be optimized away at the bytecode level.  After JIT compilation?  Maybe.  It is liable to be version dependent.  But you can get the JVM to show you the JIT-compiled native code and check for yourself.","body":"It is highly unlikely it will be optimized away at the bytecode level.  After JIT compilation?  Maybe.  It is liable to be version dependent.  But you can get the JVM to show you the JIT-compiled native code and check for yourself."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689068737,"post_id":76657128,"comment_id":135157475,"body_markdown":"You haven&#39;t answered my objection or my question. My objection: the equivalence you stated is false. My question: if you don&#39;t want `Function.identity()`, why did you write it?","body":"You haven&#39;t answered my objection or my question. My objection: the equivalence you stated is false. My question: if you don&#39;t want <code>Function.identity()</code>, why did you write it?"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1689096591,"post_id":76657128,"comment_id":135163799,"body_markdown":"@StephenC that&#39;s pretty much what I thought. At the end of the day I think I&#39;ll need to take a few hours and decompile what `javac` puts out and see what winds up in the bytecode. I just was curious if someone had done that before and already knew the answer. Looks like that is not the case, and I&#39;ll just have to dig into this myself. I&#39;ll report back my findings if I get the time to do that. I can also file a JDK ticket.","body":"@StephenC that&#39;s pretty much what I thought. At the end of the day I think I&#39;ll need to take a few hours and decompile what <code>javac</code> puts out and see what winds up in the bytecode. I just was curious if someone had done that before and already knew the answer. Looks like that is not the case, and I&#39;ll just have to dig into this myself. I&#39;ll report back my findings if I get the time to do that. I can also file a JDK ticket."}],"answers":[{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1689025827,"post_id":76657397,"comment_id":135152254,"body_markdown":"This is not about `Optional`, and it&#39;s not about `item -&gt; item`. The question is whether (embellishing code from your example) in `persons.stream().collect(Collectors.toMap(Person::getName, Function.identity().andThen(String::toUpperCase)))` the `Function.identity()` is 100% optimized away to `persons.stream().collect(Collectors.toMap(Person::getName, String::toUppercase))` or not. Do you know the answer to that question?","body":"This is not about <code>Optional</code>, and it&#39;s not about <code>item -&gt; item</code>. The question is whether (embellishing code from your example) in <code>persons.stream().collect(Collectors.toMap(Person::getName, Function.identity().andThen(String::toUpperCase)))</code> the <code>Function.identity()</code> is 100% optimized away to <code>persons.stream().collect(Collectors.toMap(Person::getName, String::toUppercase))</code> or not. Do you know the answer to that question?"},{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1689068488,"post_id":76657397,"comment_id":135157421,"body_markdown":"@GarretWilson I&#39;ve edited my answer","body":"@GarretWilson I&#39;ve edited my answer"}],"tags":[],"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689068442,"creation_date":1689023763,"answer_id":76657397,"question_id":76657128,"body_markdown":"Function.identity() is usefull when some method expect to receive mapper Function object but transformation in **your use case** is not needed.\r\n\r\n    public class Person {\r\n        private String name;\r\n    \r\n        public Person(String name) {\r\n          this.name = name;\r\n        }\r\n    \r\n        public String getName() {\r\n          return name;\r\n        }\r\n      }\r\n      \r\n      ....\r\n      \r\n      public Map&lt;String, Person&gt; getPersonsMap() {\r\n        List&lt;Person&gt; persons = repo.findAll();\r\n        \r\n        return persons.stream()\r\n            .collect(Collectors.toMap(Person::getName, Function.identity()));\r\n      }\r\n\r\n Due to nature of lambda functions in Java, each occurance of `item -&gt; item` will lead to creating implementation class, whereas `Function.identity()` will not. See more [here][1]\r\n\r\nTransformations on optional objects available throught Optional class which has methods pretty close to Stream API: \r\n\r\n    Optional.ofNullable(person.getName())\r\n             .map(name -&gt; name.toUpperCase())\r\n             .orElseThrow(() -&gt; new RuntimeException(&quot;Name is null!&quot;));\r\n\r\n**EDIT:**\r\nJLS doesn&#39;t gurantee any kind of optimization work to be made.\r\nInteresting mentions: \r\n\r\n[8.4.3.2][2] - An instance method is always invoked with respect to an object, which becomes the current object to which the keywords this and super refer during execution of the method body. (andThen is non-static)\r\n\r\n[8.4.3.3][2] - exception checks before optimizing code should be performed. (andThen can throw NullPointerException)\r\n\r\n[13.4.22][3] - final method modifier don&#39;t prove it can be optimized at runtime\r\n\r\nSo, it&#39;s seems that JIT will try to optimize `Function.identity().andThen(String::toUpperCase)` to be executed like `String::toUpperCase` but it is not not &quot;**optimized away**&quot; regarding  ticks of CPU, since lambdas method look up still should be perfomerd together with additional checks of its body.\r\n\r\n  [1]: https://stackoverflow.com/questions/23983832/is-method-reference-caching-a-good-idea-in-java-8/23991339#23991339\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.3.2\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-13.html#jls-13.4.22","title":"Making Java identify function composition more efficient","body":"<p>Function.identity() is usefull when some method expect to receive mapper Function object but transformation in <strong>your use case</strong> is not needed.</p>\n<pre><code>public class Person {\n    private String name;\n\n    public Person(String name) {\n      this.name = name;\n    }\n\n    public String getName() {\n      return name;\n    }\n  }\n  \n  ....\n  \n  public Map&lt;String, Person&gt; getPersonsMap() {\n    List&lt;Person&gt; persons = repo.findAll();\n    \n    return persons.stream()\n        .collect(Collectors.toMap(Person::getName, Function.identity()));\n  }\n</code></pre>\n<p>Due to nature of lambda functions in Java, each occurance of <code>item -&gt; item</code> will lead to creating implementation class, whereas <code>Function.identity()</code> will not. See more <a href=\"https://stackoverflow.com/questions/23983832/is-method-reference-caching-a-good-idea-in-java-8/23991339#23991339\">here</a></p>\n<p>Transformations on optional objects available throught Optional class which has methods pretty close to Stream API:</p>\n<pre><code>Optional.ofNullable(person.getName())\n         .map(name -&gt; name.toUpperCase())\n         .orElseThrow(() -&gt; new RuntimeException(&quot;Name is null!&quot;));\n</code></pre>\n<p><strong>EDIT:</strong>\nJLS doesn't gurantee any kind of optimization work to be made.\nInteresting mentions:</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.3.2\" rel=\"nofollow noreferrer\">8.4.3.2</a> - An instance method is always invoked with respect to an object, which becomes the current object to which the keywords this and super refer during execution of the method body. (andThen is non-static)</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.3.2\" rel=\"nofollow noreferrer\">8.4.3.3</a> - exception checks before optimizing code should be performed. (andThen can throw NullPointerException)</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-13.html#jls-13.4.22\" rel=\"nofollow noreferrer\">13.4.22</a> - final method modifier don't prove it can be optimized at runtime</p>\n<p>So, it's seems that JIT will try to optimize <code>Function.identity().andThen(String::toUpperCase)</code> to be executed like <code>String::toUpperCase</code> but it is not not &quot;<strong>optimized away</strong>&quot; regarding  ticks of CPU, since lambdas method look up still should be perfomerd together with additional checks of its body.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689068442,"creation_date":1689020856,"question_id":76657128,"body_markdown":"Java has `java.util.function.Function.identity(T)` which return a function equivalent to the lambda expression `t -&gt; t` (and in fact that is the precise implementation on OpenJDK 17, which I&#39;m looking at that the moment). This means that the returned function is guaranteed to do _nothing at all_ to the input, and merely pass it back, as if there was no function to begin with.\r\n\r\nSo let&#39;s say I compose that function with another one using `Function.andThen()`:\r\n\r\n```java\r\nFunction&lt;String, String&gt; fn = Function.identity();\r\nFunction&lt;String, String&gt; composedFn = fn.andThen(String::toUpperCase);\r\nString foo = composedFn(&quot;foo&quot;);  //yields &quot;FOO&quot;\r\n```\r\n\r\nThis is equivalent to the following, and I would assume (which gets me in trouble sometimes, which is why I&#39;m asking this question) that all of the following would occur in the bytecode—the compiler would not optimize any of the lambda invocations away. (I don&#39;t know what the JRE would do at runtime after compiling, though—could it eliminate the `Function.identity()` altogether?)\r\n\r\n```java\r\nString foo = Function.identity().apply(&quot;foo&quot;).andThen(String::toUpperCase);\r\n```\r\n\r\nOr the equivalent procedural code:\r\n\r\n```java\r\nString foo = Function.identity().apply(&quot;foo&quot;).toUpperCase();\r\n```\r\n\r\nWhat I don&#39;t understand is why we need `Function.identity()` at all after composition. In other words, what if `Function.identity()` were implemented like this (somewhat pseudocode, ignoring irrelevant syntax details):\r\n\r\n```\r\nstatic &lt;T&gt; Function&lt;T, T&gt; identity() {\r\n  return new Function() {\r\n\r\n    @Override\r\n    T apply(T t) {\r\n      return t;\r\n    }\r\n\r\n    @Override\r\n    &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) {\r\n      return after;\r\n    }\r\n\r\n  }\r\n}\r\n```\r\n\r\nThe point is that if the identity function is guaranteed to act _as if it did not exist in the chain_), can&#39;t function composition `andThen()` simply _return the `after` function itself_, taking the identify function out of the composition chain altogether?\r\n\r\nThe original code would then be equivalent to the following (pseudocode):\r\n\r\n```java\r\nString foo = ((Function&lt;&gt;)(String::toUpperCase)).apply&quot;foo&quot;);\r\n```\r\n\r\nOr the equivalent procedural code:\r\n\r\n```java\r\nString foo = &quot;foo&quot;.toUpperCase();\r\n```\r\n\r\nWouldn&#39;t this be more efficient? Perhaps the gained efficiency would be miniscule, but if it would provide an efficiency gain with no downsides, couldn&#39;t we improve `Function.identity()` in this way?\r\n\r\nPlease let me know if I&#39;m missing some reason why this won&#39;t work, or if the `Function.identity()` would be 100% optimized away somehow. Otherwise it seems like something I should submit a ticket for to improve the JDK.\r\n\r\nHere is why this is useful: there are many situations in which I may want to have optional tranformations be configured to something. By default I could simply set the transformation to `null`, and then do `null` checking to see if I wanted to add a transformation. But I&#39;d prefer to avoid `null`s altogether. It would be better to default to `Function.identity()` and allow transformations to be added using `andThen()` without needing to check for `null`. If the identity function were improved as I suggest, it seems that I would lose zero efficiency by defaulting to `Function.identity()` rather than defaulting to `null` and checking for `null` every time I add a function composition. Without this improvement, it seems I would be stuck with `t -&gt; t` in the chain. It&#39;s not clear to me whether this is optimized away 100%.","title":"Making Java identify function composition more efficient","body":"<p>Java has <code>java.util.function.Function.identity(T)</code> which return a function equivalent to the lambda expression <code>t -&gt; t</code> (and in fact that is the precise implementation on OpenJDK 17, which I'm looking at that the moment). This means that the returned function is guaranteed to do <em>nothing at all</em> to the input, and merely pass it back, as if there was no function to begin with.</p>\n<p>So let's say I compose that function with another one using <code>Function.andThen()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Function&lt;String, String&gt; fn = Function.identity();\nFunction&lt;String, String&gt; composedFn = fn.andThen(String::toUpperCase);\nString foo = composedFn(&quot;foo&quot;);  //yields &quot;FOO&quot;\n</code></pre>\n<p>This is equivalent to the following, and I would assume (which gets me in trouble sometimes, which is why I'm asking this question) that all of the following would occur in the bytecode—the compiler would not optimize any of the lambda invocations away. (I don't know what the JRE would do at runtime after compiling, though—could it eliminate the <code>Function.identity()</code> altogether?)</p>\n<pre class=\"lang-java prettyprint-override\"><code>String foo = Function.identity().apply(&quot;foo&quot;).andThen(String::toUpperCase);\n</code></pre>\n<p>Or the equivalent procedural code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String foo = Function.identity().apply(&quot;foo&quot;).toUpperCase();\n</code></pre>\n<p>What I don't understand is why we need <code>Function.identity()</code> at all after composition. In other words, what if <code>Function.identity()</code> were implemented like this (somewhat pseudocode, ignoring irrelevant syntax details):</p>\n<pre><code>static &lt;T&gt; Function&lt;T, T&gt; identity() {\n  return new Function() {\n\n    @Override\n    T apply(T t) {\n      return t;\n    }\n\n    @Override\n    &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) {\n      return after;\n    }\n\n  }\n}\n</code></pre>\n<p>The point is that if the identity function is guaranteed to act <em>as if it did not exist in the chain</em>), can't function composition <code>andThen()</code> simply <em>return the <code>after</code> function itself</em>, taking the identify function out of the composition chain altogether?</p>\n<p>The original code would then be equivalent to the following (pseudocode):</p>\n<pre class=\"lang-java prettyprint-override\"><code>String foo = ((Function&lt;&gt;)(String::toUpperCase)).apply&quot;foo&quot;);\n</code></pre>\n<p>Or the equivalent procedural code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String foo = &quot;foo&quot;.toUpperCase();\n</code></pre>\n<p>Wouldn't this be more efficient? Perhaps the gained efficiency would be miniscule, but if it would provide an efficiency gain with no downsides, couldn't we improve <code>Function.identity()</code> in this way?</p>\n<p>Please let me know if I'm missing some reason why this won't work, or if the <code>Function.identity()</code> would be 100% optimized away somehow. Otherwise it seems like something I should submit a ticket for to improve the JDK.</p>\n<p>Here is why this is useful: there are many situations in which I may want to have optional tranformations be configured to something. By default I could simply set the transformation to <code>null</code>, and then do <code>null</code> checking to see if I wanted to add a transformation. But I'd prefer to avoid <code>null</code>s altogether. It would be better to default to <code>Function.identity()</code> and allow transformations to be added using <code>andThen()</code> without needing to check for <code>null</code>. If the identity function were improved as I suggest, it seems that I would lose zero efficiency by defaulting to <code>Function.identity()</code> rather than defaulting to <code>null</code> and checking for <code>null</code> every time I add a function composition. Without this improvement, it seems I would be stuck with <code>t -&gt; t</code> in the chain. It's not clear to me whether this is optimized away 100%.</p>\n"},{"tags":["java","soap","jax-rs"],"comments":[{"owner":{"account_id":20837216,"reputation":11,"user_id":19849947,"display_name":"Mahajan"},"score":0,"creation_date":1688726386,"post_id":76629729,"comment_id":135115726,"body_markdown":"Is there any issue with jar file, any help would be appreciated","body":"Is there any issue with jar file, any help would be appreciated"}],"owner":{"account_id":20837216,"reputation":11,"user_id":19849947,"display_name":"Mahajan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689068429,"creation_date":1688652670,"question_id":76629729,"body_markdown":"We are migrating from Java 8 to Java 11, using SOAP web service so required javax libraries.\r\n\r\nSo we have include below list of jar file as we don&#39;t want to change the package with higher version.\r\n\r\n - jakarta.jws-api-2.1.0.jar \r\n - jakarta.xml.bind-api-2.3.3.jar\r\n - javax.xml.soap-api-1.4.0.jar \r\n - javax.activation-1.2.0.jar\r\n - jaxws-api-2.1.13.jar\r\n\r\nupdated to higher version\r\njaxb-xjc-2.1.13.jar = jaxb-xjc-2.3.3.jar\r\njaxb-impl-2.1.13.jar = jaxb-impl-2.3.3.jar\r\n\r\n\r\nApplication is working fine except below one scenario\r\n\r\n1. POST Operation\r\n2. EX: Request XML\r\n\r\nFor enumeration attributes in schema definition are throwing exception when it request is given with &quot; IN&quot; space.\r\n\r\nIf Space is not given then it works fine.\r\n \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;root&gt;\r\n           &lt;EmployeeUpdate&gt;\r\n              &lt;Name&gt;Test&lt;/Name&gt;\r\n              &lt;Country&gt; IN&lt;/Country&gt;\r\n           &lt;/EmployeeUpdate&gt;\r\n        &lt;/root&gt;\r\n\r\n**\r\nCountry is enum in XSD \r\n\r\n     &lt;xs:restriction base=&#39;EnumeratedToken&#39;&gt;\r\n          &lt;xs:enumeration value=&#39;IN&#39;/&gt;\r\n          &lt;xs:enumeration value=&#39;US&#39;/&gt;\r\n      &lt;/xs:restriction&gt;\r\n\r\n\r\nIs there any issue with jar added for Java 11 handling compared to Java8.","title":"Migration from Java 8 to Java 11 - for SOAP web service","body":"<p>We are migrating from Java 8 to Java 11, using SOAP web service so required javax libraries.</p>\n<p>So we have include below list of jar file as we don't want to change the package with higher version.</p>\n<ul>\n<li>jakarta.jws-api-2.1.0.jar</li>\n<li>jakarta.xml.bind-api-2.3.3.jar</li>\n<li>javax.xml.soap-api-1.4.0.jar</li>\n<li>javax.activation-1.2.0.jar</li>\n<li>jaxws-api-2.1.13.jar</li>\n</ul>\n<p>updated to higher version\njaxb-xjc-2.1.13.jar = jaxb-xjc-2.3.3.jar\njaxb-impl-2.1.13.jar = jaxb-impl-2.3.3.jar</p>\n<p>Application is working fine except below one scenario</p>\n<ol>\n<li>POST Operation</li>\n<li>EX: Request XML</li>\n</ol>\n<p>For enumeration attributes in schema definition are throwing exception when it request is given with &quot; IN&quot; space.</p>\n<p>If Space is not given then it works fine.</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;root&gt;\n       &lt;EmployeeUpdate&gt;\n          &lt;Name&gt;Test&lt;/Name&gt;\n          &lt;Country&gt; IN&lt;/Country&gt;\n       &lt;/EmployeeUpdate&gt;\n    &lt;/root&gt;\n</code></pre>\n<p>**\nCountry is enum in XSD</p>\n<pre><code> &lt;xs:restriction base='EnumeratedToken'&gt;\n      &lt;xs:enumeration value='IN'/&gt;\n      &lt;xs:enumeration value='US'/&gt;\n  &lt;/xs:restriction&gt;\n</code></pre>\n<p>Is there any issue with jar added for Java 11 handling compared to Java8.</p>\n"},{"tags":["java","string","null","heap-memory"],"comments":[{"owner":{"account_id":349810,"reputation":6292,"user_id":685314,"accept_rate":93,"display_name":"Joetjah"},"score":0,"creation_date":1420548606,"post_id":27798986,"comment_id":44006485,"body_markdown":"Actually, you&#39;ve allocated a value to `str`, being `&quot;&quot;`. http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string","body":"Actually, you&#39;ve allocated a value to <code>str</code>, being <code>&quot;&quot;</code>. <a href=\"http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string\" title=\"difference between null and java string\">stackoverflow.com/questions/4802015/&hellip;</a>"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1420548710,"post_id":27798986,"comment_id":44006547,"body_markdown":"`str&#39;s value is null, or empty String` I hope you know that both doesn&#39;t mean the same ...","body":"<code>str&#39;s value is null, or empty String</code> I hope you know that both doesn&#39;t mean the same ..."}],"answers":[{"comments":[{"owner":{"account_id":1626752,"reputation":9002,"user_id":1502148,"accept_rate":25,"display_name":"G&#225;bor Bakos"},"score":0,"creation_date":1420548661,"post_id":27799039,"comment_id":44006518,"body_markdown":"Though in case of `&quot;&quot;` it might already get allocated (interned) and just a reference is there.","body":"Though in case of <code>&quot;&quot;</code> it might already get allocated (interned) and just a reference is there."},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420548756,"post_id":27799039,"comment_id":44006574,"body_markdown":"and for String str = null; there is no memory allocation, keep in mind that you need to store somewhere this value...","body":"and for String str = null; there is no memory allocation, keep in mind that you need to store somewhere this value..."}],"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":2,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1420548597,"creation_date":1420548597,"answer_id":27799039,"question_id":27798986,"body_markdown":"    String nullObj = null;\r\n    String emptyStr= &quot;&quot;\r\n\r\nBoth are completely different.\r\n\r\nIn case of `null`, it refers to nothing. But still memory allocates. `null` takes 4 bytes if it is 32-bit systems and 8 bytes if it is 64-bit system.\r\n\r\nFor empty string (`&quot;&quot;`), that&#39;s 100% a String object and memory allocates.","title":"String with value null and memory allocation","body":"<pre><code>String nullObj = null;\nString emptyStr= \"\"\n</code></pre>\n\n<p>Both are completely different.</p>\n\n<p>In case of <code>null</code>, it refers to nothing. But still memory allocates. <code>null</code> takes 4 bytes if it is 32-bit systems and 8 bytes if it is 64-bit system.</p>\n\n<p>For empty string (<code>\"\"</code>), that's 100% a String object and memory allocates.</p>\n"},{"comments":[{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420549164,"post_id":27799094,"comment_id":44006789,"body_markdown":"so then the reference points to null, how this is stored? because the reference is practically storing an address","body":"so then the reference points to null, how this is stored? because the reference is practically storing an address"},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":1,"creation_date":1420549616,"post_id":27799094,"comment_id":44007052,"body_markdown":"@aurelius - In JVM, the references which point to null are handled differently. So, if you have `String s = null`, the underlying byte code instruction would be `aconst_null` followed by `astore_1`(store null reference in variable `s`). This means `null` values are handled in a different way using a different opcode.","body":"@aurelius - In JVM, the references which point to null are handled differently. So, if you have <code>String s = null</code>, the underlying byte code instruction would be <code>aconst_null</code> followed by <code>astore_1</code>(store null reference in variable <code>s</code>). This means <code>null</code> values are handled in a different way using a different opcode."},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420550402,"post_id":27799094,"comment_id":44007466,"body_markdown":"so practically, if the JVM generates some code, specific for this null values, then there is some memory allocated...","body":"so practically, if the JVM generates some code, specific for this null values, then there is some memory allocated..."},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":1,"creation_date":1420550649,"post_id":27799094,"comment_id":44007601,"body_markdown":"@aurelius - 1. Here,the *compiler* generates code which will be *run* by the JVM :). Next, don&#39;t get confused between *instructions* and *objects*. `aconst_null` is an *instruction*. There is no object called `null` which occupies memory. Only the field (`s`) in which this null reference  is loaded will occupy 4 bytes / 8 bytes depending on whether the system is 32 bits or 64 bits.","body":"@aurelius - 1. Here,the <i>compiler</i> generates code which will be <i>run</i> by the JVM :). Next, don&#39;t get confused between <i>instructions</i> and <i>objects</i>. <code>aconst_null</code> is an <i>instruction</i>. There is no object called <code>null</code> which occupies memory. Only the field (<code>s</code>) in which this null reference  is loaded will occupy 4 bytes / 8 bytes depending on whether the system is 32 bits or 64 bits."},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420550884,"post_id":27799094,"comment_id":44007740,"body_markdown":"so if you do String s = null; then the s reference (address) will be null? --- i am a bit confused now...","body":"so if you do String s = null; then the s reference (address) will be null? --- i am a bit confused now..."},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1420551760,"post_id":27799094,"comment_id":44008241,"body_markdown":"@aurelius -  No. The reference will not be null. The value to which the reference `s` points will be `null`. Reference is like a *sign board*, it always points to something. It can either point to `Sydney` or point `upwards towards nothing in particular` :P","body":"@aurelius -  No. The reference will not be null. The value to which the reference <code>s</code> points will be <code>null</code>. Reference is like a <i>sign board</i>, it always points to something. It can either point to <code>Sydney</code> or point <code>upwards towards nothing in particular</code> :P"},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420559260,"post_id":27799094,"comment_id":44013041,"body_markdown":"so then, from &quot;The value to which the reference s points will be null&quot; null is a value located somewhere in memory...?","body":"so then, from &quot;The value to which the reference s points will be null&quot; null is a value located somewhere in memory...?"},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1420614726,"post_id":27799094,"comment_id":44035159,"body_markdown":"@aurelius - No. `aconst_null` is an instruction. It pushes a *null reference* on to the stack. So, `a null reference itself is different from normal references`.","body":"@aurelius - No. <code>aconst_null</code> is an instruction. It pushes a <i>null reference</i> on to the stack. So, <code>a null reference itself is different from normal references</code>."},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420615305,"post_id":27799094,"comment_id":44035371,"body_markdown":"ok, i think i get it now... the &quot;s&quot; reference which points to null, is a reference that is pushed in a &quot;null&quot; references location from stack, and that&#39;s how the JVM threats it different, and knows that the value to which the reference points too is null? Is this how it goes?","body":"ok, i think i get it now... the &quot;s&quot; reference which points to null, is a reference that is pushed in a &quot;null&quot; references location from stack, and that&#39;s how the JVM threats it different, and knows that the value to which the reference points too is null? Is this how it goes?"},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":1,"creation_date":1420618256,"post_id":27799094,"comment_id":44036390,"body_markdown":"@aurelius - The `null` constant reference is pushed *into the variable s*.","body":"@aurelius - The <code>null</code> constant reference is pushed <i>into the variable s</i>."},{"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"score":0,"creation_date":1420632017,"post_id":27799094,"comment_id":44043756,"body_markdown":"ok, got it, thank you so much, all the best!","body":"ok, got it, thank you so much, all the best!"}],"tags":[],"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"comment_count":11,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689068231,"creation_date":1420548824,"answer_id":27799094,"question_id":27798986,"body_markdown":"**Case -1 :**\r\n\r\n    String s = null;\r\n\r\nhere, memory is allocated only for the reference s. `null` is not an object. So no memory is allocared for that.\r\n\r\n**Case -2  :**\r\n\r\n    String s = &quot;&quot;; // empty string \r\n\r\nHere, memory is allocated to both String reference `s` as well as the actual String value `&quot;&quot;` (Yes, `&quot;&quot;` is different from `null`)","title":"String with value null and memory allocation","body":"<p><strong>Case -1 :</strong></p>\n<pre><code>String s = null;\n</code></pre>\n<p>here, memory is allocated only for the reference s. <code>null</code> is not an object. So no memory is allocared for that.</p>\n<p><strong>Case -2  :</strong></p>\n<pre><code>String s = &quot;&quot;; // empty string \n</code></pre>\n<p>Here, memory is allocated to both String reference <code>s</code> as well as the actual String value <code>&quot;&quot;</code> (Yes, <code>&quot;&quot;</code> is different from <code>null</code>)</p>\n"}],"owner":{"account_id":5156422,"reputation":3976,"user_id":4129551,"accept_rate":82,"display_name":"aurelius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2143,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1420561389,"accepted_answer_id":27799094,"answer_count":2,"score":1,"last_activity_date":1689068231,"creation_date":1420548375,"question_id":27798986,"body_markdown":"If a String Object references to a null value, is there any memory allocated for this value?\r\n\r\ne.g. `String str = &quot;&quot;; String str = null;`\r\n\r\nstr&#39;s value is null, or empty String, is this allocated somewhere?\r\n\r\n**TEXT ADDED**  what happens when a String reference points to null (how do you specify this null and still not allocating memory for this &quot;specification&quot;?), how is this information stored? because the reference is practically storing an address.","title":"String with value null and memory allocation","body":"<p>If a String Object references to a null value, is there any memory allocated for this value?</p>\n\n<p>e.g. <code>String str = \"\"; String str = null;</code></p>\n\n<p>str's value is null, or empty String, is this allocated somewhere?</p>\n\n<p><strong>TEXT ADDED</strong>  what happens when a String reference points to null (how do you specify this null and still not allocating memory for this \"specification\"?), how is this information stored? because the reference is practically storing an address.</p>\n"},{"tags":["java","android","google-play","google-play-console"],"comments":[{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":1,"creation_date":1688706115,"post_id":76580388,"comment_id":135112434,"body_markdown":"What is the signature used? `keytool -list -v -keystore foo.keystore -alias foo -storepass &lt;your_keystore_password&gt; | grep &quot;Signature algorithm name&quot;`","body":"What is the signature used? <code>keytool -list -v -keystore foo.keystore -alias foo -storepass &lt;your_keystore_password&gt; | grep &quot;Signature algorithm name&quot;</code>"}],"answers":[{"comments":[{"owner":{"account_id":372049,"reputation":3614,"user_id":720893,"accept_rate":83,"display_name":"Michal"},"score":0,"creation_date":1697214751,"post_id":76660518,"comment_id":136256441,"body_markdown":"I tryed but get this error message on play console &quot;The private key was not properly encrypted, or is not a type of key we support&quot;","body":"I tryed but get this error message on play console &quot;The private key was not properly encrypted, or is not a type of key we support&quot;"}],"tags":[],"owner":{"account_id":6839079,"reputation":2140,"user_id":5260051,"display_name":"nitinkumarp"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689067692,"creation_date":1689067692,"answer_id":76660518,"question_id":76580388,"body_markdown":"You can use Android Studio App Bundle Signing Tool and create your private_key.pepk from there.\r\n\r\n[![App Bundle Signing][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qxexw.png\r\n\r\nGet your private key from the path you have added at the last Text Input area.","title":"The private key was not properly encrypted, or is not a type of key we support while generating app signing key","body":"<p>You can use Android Studio App Bundle Signing Tool and create your private_key.pepk from there.</p>\n<p><a href=\"https://i.stack.imgur.com/qxexw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qxexw.png\" alt=\"App Bundle Signing\" /></a></p>\n<p>Get your private key from the path you have added at the last Text Input area.</p>\n"}],"owner":{"account_id":11181020,"reputation":4038,"user_id":8205099,"accept_rate":62,"display_name":"Wahdat Jan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1034,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1689067692,"creation_date":1688036180,"question_id":76580388,"body_markdown":"The private key was not properly encrypted, or is not a type of key we support .\r\nI generated the play signing key on play console\r\n\r\n\r\n    $ java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=encrypted_private_key_path --rsa-aes-encryption --encryption-key-path=/path/to/encryption_public_key.pem\r\n  \r\nI used above command to generate the key after generating it gives me error \r\n\r\n    The private key was not properly encrypted, or is not a type of key we support while generating app signing key\r\n\r\n\r\n[![Image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UIEX7.png","title":"The private key was not properly encrypted, or is not a type of key we support while generating app signing key","body":"<p>The private key was not properly encrypted, or is not a type of key we support .\nI generated the play signing key on play console</p>\n<pre><code>$ java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=encrypted_private_key_path --rsa-aes-encryption --encryption-key-path=/path/to/encryption_public_key.pem\n</code></pre>\n<p>I used above command to generate the key after generating it gives me error</p>\n<pre><code>The private key was not properly encrypted, or is not a type of key we support while generating app signing key\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UIEX7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/UIEX7.png\" alt=\"Image\" /></a></p>\n"},{"tags":["java","multithreading","concurrency","monitor"],"answers":[{"comments":[{"owner":{"account_id":25344,"reputation":20890,"user_id":65120,"accept_rate":56,"display_name":"xdevel2000"},"score":1,"creation_date":1280406554,"post_id":3362323,"comment_id":3492113,"body_markdown":"so can we say that when we create a synchronized method we are defining a lock (monitor) on that object&#39;s method?","body":"so can we say that when we create a synchronized method we are defining a lock (monitor) on that object&#39;s method?"},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":0,"creation_date":1280406851,"post_id":3362323,"comment_id":3492158,"body_markdown":"Exactly. When you hace a synchronized method (which I didn&#39;t put in my answer) you are creating a monitor on that method.","body":"Exactly. When you hace a synchronized method (which I didn&#39;t put in my answer) you are creating a monitor on that method."},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":35,"creation_date":1280406856,"post_id":3362323,"comment_id":3492159,"body_markdown":"Erm, not exactly.  Each object automatically has a monitor (mutex) associated with it, regardless of anything else. When you declare a method synchronized, you&#39;re declaring that the runtime must obtain the lock on the object&#39;s monitor before execution of that method begins (and must release the lock before control returns to the calling code).","body":"Erm, not exactly.  Each object automatically has a monitor (mutex) associated with it, regardless of anything else. When you declare a method synchronized, you&#39;re declaring that the runtime must obtain the lock on the object&#39;s monitor before execution of that method begins (and must release the lock before control returns to the calling code)."},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":41,"creation_date":1280407015,"post_id":3362323,"comment_id":3492183,"body_markdown":"And @Pablo - there&#39;s no such thing as a monitor for a method; monitors only exist for objects, which would be the enclosing instance for most methods, or the corresponding `Class` object for static methods.  If you already have a synchronized method1() and you declare method2() synchronized, no new monitors are created and in fact invoking either method (on the same object) will attempt to lock the same monitor.  This often catches out newcomers.","body":"And @Pablo - there&#39;s no such thing as a monitor for a method; monitors only exist for objects, which would be the enclosing instance for most methods, or the corresponding <code>Class</code> object for static methods.  If you already have a synchronized method1() and you declare method2() synchronized, no new monitors are created and in fact invoking either method (on the same object) will attempt to lock the same monitor.  This often catches out newcomers."},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":0,"creation_date":1280407456,"post_id":3362323,"comment_id":3492259,"body_markdown":"@Andrzej: I see... OK. Will fix that in the answer. Thanks!","body":"@Andrzej: I see... OK. Will fix that in the answer. Thanks!"},{"owner":{"account_id":25344,"reputation":20890,"user_id":65120,"accept_rate":56,"display_name":"xdevel2000"},"score":1,"creation_date":1280409488,"post_id":3362323,"comment_id":3492613,"body_markdown":"@Andrzej: so, every object has ONE monitor associated with it. Then I can have many synchronized methods. After whenever of that methods a thread call it obtain that monitor that do the sync stuff.","body":"@Andrzej: so, every object has ONE monitor associated with it. Then I can have many synchronized methods. After whenever of that methods a thread call it obtain that monitor that do the sync stuff."}],"tags":[],"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"comment_count":6,"down_vote_count":1,"up_vote_count":112,"is_accepted":true,"score":111,"last_activity_date":1280407475,"creation_date":1280405860,"answer_id":3362323,"question_id":3362303,"body_markdown":"A monitor is mechanism to control concurrent access to an object.\r\n\r\nThis allows you to do:\r\n\r\nThread 1:\r\n\r\n    public void a()\r\n    {\r\n        synchronized(someObject) {\r\n            // do something (1)\r\n        }\r\n    }\r\n\r\nThread 2:\r\n\r\n    public void b()\r\n    {\r\n        synchronized(someObject) {\r\n            // do something else (2)\r\n        }\r\n    }\r\n\r\nThis prevents Threads 1 and 2 accessing the monitored (synchronized) section at the same time. One will start, and monitor will prevent the other from accessing the region before the first one finishes.\r\n\r\nIt&#39;s not a special object. It&#39;s synchronization mechanism placed at class hierarchy root: `java.lang.Object`.\r\n\r\nThere are also `wait` and `notify` methods that will also use object&#39;s monitor to communication among different threads.\r\n","title":"What&#39;s a monitor in Java?","body":"<p>A monitor is mechanism to control concurrent access to an object.</p>\n\n<p>This allows you to do:</p>\n\n<p>Thread 1:</p>\n\n<pre><code>public void a()\n{\n    synchronized(someObject) {\n        // do something (1)\n    }\n}\n</code></pre>\n\n<p>Thread 2:</p>\n\n<pre><code>public void b()\n{\n    synchronized(someObject) {\n        // do something else (2)\n    }\n}\n</code></pre>\n\n<p>This prevents Threads 1 and 2 accessing the monitored (synchronized) section at the same time. One will start, and monitor will prevent the other from accessing the region before the first one finishes.</p>\n\n<p>It's not a special object. It's synchronization mechanism placed at class hierarchy root: <code>java.lang.Object</code>.</p>\n\n<p>There are also <code>wait</code> and <code>notify</code> methods that will also use object's monitor to communication among different threads.</p>\n"},{"tags":[],"owner":{"account_id":117006,"reputation":24352,"user_id":306602,"display_name":"naikus"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1280408874,"creation_date":1280406013,"answer_id":3362345,"question_id":3362303,"body_markdown":"[http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#33308][1] \r\n\r\nA **mechanism** to control access to objects one at a time\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#3330","title":"What&#39;s a monitor in Java?","body":"<p><a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#3330\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#33308</a> </p>\n\n<p>A <strong>mechanism</strong> to control access to objects one at a time</p>\n"},{"comments":[{"owner":{"account_id":3860808,"reputation":5608,"user_id":3198603,"accept_rate":70,"display_name":"user3198603"},"score":1,"creation_date":1502697515,"post_id":3362473,"comment_id":78297073,"body_markdown":"As you said &quot;A monitor is an entity ..&quot;, does it mean monitor is an internal object/state  which possesses/tracks the lock and waitset?  If not Can you please elaborate Entity here ? Basically when we java doc says `Wakes up all threads that are waiting on this object&#39;s monitor.`  about notifyall(), what i get is object is maintaining(with the help of internal entity/object) what all threads are waiting for lock , that internal entity/object is called monitor ?","body":"As you said &quot;A monitor is an entity ..&quot;, does it mean monitor is an internal object/state  which possesses/tracks the lock and waitset?  If not Can you please elaborate Entity here ? Basically when we java doc says <code>Wakes up all threads that are waiting on this object&#39;s monitor.</code>  about notifyall(), what i get is object is maintaining(with the help of internal entity/object) what all threads are waiting for lock , that internal entity/object is called monitor ?"},{"owner":{"account_id":1801936,"reputation":9373,"user_id":1640038,"accept_rate":98,"display_name":"gravetii"},"score":0,"creation_date":1527270942,"post_id":3362473,"comment_id":88081105,"body_markdown":"Most useful answer. Thanks @JRL.","body":"Most useful answer. Thanks @JRL."},{"owner":{"account_id":456891,"reputation":160,"user_id":855893,"display_name":"opncow"},"score":0,"creation_date":1549297592,"post_id":3362473,"comment_id":95843408,"body_markdown":"For me it says: &quot;No preview available for this page.&quot;","body":"For me it says: &quot;No preview available for this page.&quot;"}],"tags":[],"owner":{"account_id":16366,"reputation":77097,"user_id":35501,"accept_rate":83,"display_name":"JRL"},"comment_count":3,"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1280406914,"creation_date":1280406914,"answer_id":3362473,"question_id":3362303,"body_markdown":"A monitor is an entity that possesses both a **lock** and a **wait set**. In Java, any `Object` can serve as a monitor.\r\n\r\nFor a detailed explanation of how monitors work in Java, I recommend reading the ***Monitor Mechanics*** section of [Concurrent Programming in Java][1] (the preceding link displays the preview in Google books, and that section is available for reading).\r\n\r\n\r\n  [1]: http://books.google.com/books?id=-x1S4neCSOYC&amp;printsec=frontcover&amp;dq=java+concurrent&amp;hl=en&amp;ei=pHJRTL3YNIuInQe0oI3eAw&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=1&amp;ved=0CCUQ6AEwAA#v=onepage&amp;q=monitor&amp;f=false","title":"What&#39;s a monitor in Java?","body":"<p>A monitor is an entity that possesses both a <strong>lock</strong> and a <strong>wait set</strong>. In Java, any <code>Object</code> can serve as a monitor.</p>\n\n<p>For a detailed explanation of how monitors work in Java, I recommend reading the <strong><em>Monitor Mechanics</em></strong> section of <a href=\"http://books.google.com/books?id=-x1S4neCSOYC&amp;printsec=frontcover&amp;dq=java+concurrent&amp;hl=en&amp;ei=pHJRTL3YNIuInQe0oI3eAw&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=1&amp;ved=0CCUQ6AEwAA#v=onepage&amp;q=monitor&amp;f=false\" rel=\"noreferrer\">Concurrent Programming in Java</a> (the preceding link displays the preview in Google books, and that section is available for reading).</p>\n"},{"tags":[],"owner":{"account_id":2255525,"reputation":187,"user_id":1986796,"display_name":"mgibson"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1358420968,"creation_date":1358419349,"answer_id":14377224,"question_id":3362303,"body_markdown":"1. A monitor is a concept/mechanism that&#39;s not limited to the Java Language;\r\n2. &quot;In concurrent programming, a monitor is an object or module intended to be used safely by more than one thread&quot;;\r\n3. As every reader knows, every object in Java is a sub-class of java.lang.Object. The java folks made java.lang.Object in such a way that it has features and characteristics that enables Java programmers to use any object as a monitor. For example, every object has a wait queue,a re-entrance queue and wait and notify methods making it a monitor;\r\n4. read about monitors [here](http://en.wikipedia.org/wiki/Monitor_(synchronization)).\r\n\r\n","title":"What&#39;s a monitor in Java?","body":"<ol>\n<li>A monitor is a concept/mechanism that's not limited to the Java Language;</li>\n<li>\"In concurrent programming, a monitor is an object or module intended to be used safely by more than one thread\";</li>\n<li>As every reader knows, every object in Java is a sub-class of java.lang.Object. The java folks made java.lang.Object in such a way that it has features and characteristics that enables Java programmers to use any object as a monitor. For example, every object has a wait queue,a re-entrance queue and wait and notify methods making it a monitor;</li>\n<li>read about monitors <a href=\"http://en.wikipedia.org/wiki/Monitor_%28synchronization%29\" rel=\"noreferrer\">here</a>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8201327,"reputation":289,"user_id":6172595,"display_name":"Amit Rai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689067657,"creation_date":1518248431,"answer_id":48718435,"question_id":3362303,"body_markdown":"monitor is associate with object or data member, which is acquire when a data member or object is enter is synchronization block(critical section) and release when is exit. ","title":"What&#39;s a monitor in Java?","body":"<p>monitor is associate with object or data member, which is acquire when a data member or object is enter is synchronization block(critical section) and release when is exit.</p>\n"},{"tags":[],"owner":{"account_id":15591403,"reputation":5743,"user_id":12894468,"display_name":"Sivaram Rasathurai"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1601371631,"creation_date":1601371631,"answer_id":64116702,"question_id":3362303,"body_markdown":"In concurrent programming, we need to focus on two things \r\n 1. Mutual exclusion  \r\n\r\n&gt; When a process/thread is executing its critical section no other processes are allowed to execute their critical section. (Each process has a code segment called &quot;Critical section&quot; in which shared data is accessed.)\r\n\r\n\r\n\r\n 2. Synchronisation\r\n\r\n&gt; When threads are trying to achieve a common goal via working together, these threads need cooperation between them. They need to synchronize when they focus on a common goal.\r\n\r\n***Monitors are used to achieve mutual exclusion and synchronization.***\r\n\r\n\r\n----------\r\n\r\n&lt;h1&gt;How to understand Monitor easily?&lt;/h1&gt;\r\n\r\n\r\n\r\n[![High level view of Monitor][1]][1] \r\n\r\n*Don&#39;t confuse this critical area with the critical section since here, the Critical area mentioned in the object-level, not for the thread level.* The shared data is considered as a critical area.\r\n\r\n\r\nEach object and its class are associated with a monitor. Instance variables of objects that need to be protected from concurrent access included a critical area for a monitor that is associated with the object and Instance variables of classes /static variables of a class that needs to be protected from concurrent access included in the critical area for the monitor which is associated with the class.\r\n\r\n  - *This critical area is protected with a lock and this lock ensures mutual exclusion.*\r\n\r\n  - *A Wait set is also associated with a monitor that is used to provide coordination between threads.*  \r\n\r\n  - *An entry set is used to hold the threads who are already requested for the lock and the lock is not acquired by them yet.*\r\n\r\n\r\n&lt;h2&gt;How is mutual exclusion achieved on Monitor?&lt;/h2&gt;\r\n\r\n----------\r\n\r\nEach object is associated with a monitor and this monitor has a ***lock*** where each thread can lock or unlock the object using this ***lock*** when it accesses the shared variables. Explicitly, it means only one thread at a time may hold a ***lock*** on a monitor. Any other threads attempting to lock that ***lock*** are blocked until they can obtain the ***lock***. when a new thread tries to acquire the lock and if already a thread owns the lock then that thread will be waiting on the entry set to acquire the lock. when the thread which is acquired the lock completes its critical section, it will release the lock. So next thread will acquire the lock but this next thread is taken from the entry set and will be determined by JVM based on some criteria like FIFO.\r\n\r\n\r\nHere, what we achieved is mutual exclusion since we give exclusive access to a thread to the object and we do not allow any other threads to enter their critical section.\r\n\r\n***Example java code to achive mutual exclussion using monitor***\r\n\r\n```java\r\n  class Counter\r\n      {\r\n            private int count = 0;\r\n            public void synchronized Increment() {\r\n                int n = count;\r\n                count = n+1;\r\n            } //Here synchronized is used to indicate those things should be done sequentially.\r\n      }\r\n\r\n```\r\n\r\n----------\r\n\r\n\r\n&lt;h2&gt;How is coordination/synchronization achieved via Monitor?&lt;/h2&gt;\r\n\r\n\r\n***Synchronization is achieved using the wait set which is associated with the monitor and &quot;wait and notify&quot; or &quot;signal and continue&quot; mechanism.***  Synchronization is important when one thread needs some data to be in a particular state and another thread is responsible for getting the data into that state e.g. producer/consumer problem\r\n\r\nWhen a thread calls the wait() method respect to object then the thread suspended and added to the wait set to wait until some other thread invokes notify() or notifyAll() on the same object.\r\n\r\nThe notify() method is used for waking up threads that are in the wait set of the monitor of a particular object. There are two ways of notifying waiting threads. \r\n  - notify() --&gt; For all threads waiting on wait set the method notify() notifies anyone of them to wake up arbitrarily. The choice of exactly which thread to wake is non-deterministic and depends upon the JVM.\r\n  - notifyAll() --&gt; This method simply wakes all threads that are waiting on the wait set. The awakened threads will not be able to proceed until the current thread releases the lock on this object. The awakened threads will compete in the usual manner with any other threads that might be actively competing to synchronize.\r\n\r\n***Example java code to achive synchronization using monitor in producer consumer problem***\r\n\r\n\r\n```java\r\nclass Buffer {\r\n            private char [] buffer;\r\n            private int count = 0, in = 0, out = 0;\r\n\r\n            Buffer(int size)\r\n            {\r\n                 buffer = new char[size];\r\n            }\r\n \r\n            public synchronized void Put(char c) {\r\n                 while(count == buffer.length) \r\n                 {\r\n                      try { wait(); }\r\n                      catch (InterruptedException e) { } \r\n                      finally { } \r\n                 } \r\n                 System.out.println(&quot;Producing &quot; + c + &quot; ...&quot;);\r\n                 buffer[in] = c; \r\n                 in = (in + 1) % buffer.length; \r\n                 count++; \r\n                 notify(); \r\n            }\r\n    \r\n            public synchronized char Get() {\r\n                 while (count == 0) \r\n                 {\r\n                      try { wait(); }\r\n                      catch (InterruptedException e) { } \r\n                      finally { } \r\n                 } \r\n                 char c = buffer[out]; \r\n                 out = (out + 1) % buffer.length;\r\n                 count--;\r\n                 System.out.println(&quot;Consuming &quot; + c + &quot; ...&quot;); \r\n                 notify(); \r\n                 return c;\r\n            }\r\n      }\r\n```\r\n\r\nRefer below links \r\nhttp://www.csc.villanova.edu/~mdamian/threads/javamonitors.html#:~:text=Java%20associates%20a%20monitor%20with,the%20monitor%20for%20that%20object\r\nhttps://howtodoinjava.com/java/multi-threading/how-to-use-locks-in-java-java-util-concurrent-locks-lock-tutorial-and-example/\r\n\r\n  [1]: https://i.stack.imgur.com/sZyN9.png","title":"What&#39;s a monitor in Java?","body":"<p>In concurrent programming, we need to focus on two things</p>\n<ol>\n<li>Mutual exclusion</li>\n</ol>\n<blockquote>\n<p>When a process/thread is executing its critical section no other processes are allowed to execute their critical section. (Each process has a code segment called &quot;Critical section&quot; in which shared data is accessed.)</p>\n</blockquote>\n<ol start=\"2\">\n<li>Synchronisation</li>\n</ol>\n<blockquote>\n<p>When threads are trying to achieve a common goal via working together, these threads need cooperation between them. They need to synchronize when they focus on a common goal.</p>\n</blockquote>\n<p><em><strong>Monitors are used to achieve mutual exclusion and synchronization.</strong></em></p>\n<hr />\n<h1>How to understand Monitor easily?</h1>\n<p><a href=\"https://i.stack.imgur.com/sZyN9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sZyN9.png\" alt=\"High level view of Monitor\" /></a></p>\n<p><em>Don't confuse this critical area with the critical section since here, the Critical area mentioned in the object-level, not for the thread level.</em> The shared data is considered as a critical area.</p>\n<p>Each object and its class are associated with a monitor. Instance variables of objects that need to be protected from concurrent access included a critical area for a monitor that is associated with the object and Instance variables of classes /static variables of a class that needs to be protected from concurrent access included in the critical area for the monitor which is associated with the class.</p>\n<ul>\n<li><p><em>This critical area is protected with a lock and this lock ensures mutual exclusion.</em></p>\n</li>\n<li><p><em>A Wait set is also associated with a monitor that is used to provide coordination between threads.</em></p>\n</li>\n<li><p><em>An entry set is used to hold the threads who are already requested for the lock and the lock is not acquired by them yet.</em></p>\n</li>\n</ul>\n<h2>How is mutual exclusion achieved on Monitor?</h2>\n<hr />\n<p>Each object is associated with a monitor and this monitor has a <em><strong>lock</strong></em> where each thread can lock or unlock the object using this <em><strong>lock</strong></em> when it accesses the shared variables. Explicitly, it means only one thread at a time may hold a <em><strong>lock</strong></em> on a monitor. Any other threads attempting to lock that <em><strong>lock</strong></em> are blocked until they can obtain the <em><strong>lock</strong></em>. when a new thread tries to acquire the lock and if already a thread owns the lock then that thread will be waiting on the entry set to acquire the lock. when the thread which is acquired the lock completes its critical section, it will release the lock. So next thread will acquire the lock but this next thread is taken from the entry set and will be determined by JVM based on some criteria like FIFO.</p>\n<p>Here, what we achieved is mutual exclusion since we give exclusive access to a thread to the object and we do not allow any other threads to enter their critical section.</p>\n<p><em><strong>Example java code to achive mutual exclussion using monitor</strong></em></p>\n<pre class=\"lang-java prettyprint-override\"><code>  class Counter\n      {\n            private int count = 0;\n            public void synchronized Increment() {\n                int n = count;\n                count = n+1;\n            } //Here synchronized is used to indicate those things should be done sequentially.\n      }\n\n</code></pre>\n<hr />\n<h2>How is coordination/synchronization achieved via Monitor?</h2>\n<p><em><strong>Synchronization is achieved using the wait set which is associated with the monitor and &quot;wait and notify&quot; or &quot;signal and continue&quot; mechanism.</strong></em>  Synchronization is important when one thread needs some data to be in a particular state and another thread is responsible for getting the data into that state e.g. producer/consumer problem</p>\n<p>When a thread calls the wait() method respect to object then the thread suspended and added to the wait set to wait until some other thread invokes notify() or notifyAll() on the same object.</p>\n<p>The notify() method is used for waking up threads that are in the wait set of the monitor of a particular object. There are two ways of notifying waiting threads.</p>\n<ul>\n<li>notify() --&gt; For all threads waiting on wait set the method notify() notifies anyone of them to wake up arbitrarily. The choice of exactly which thread to wake is non-deterministic and depends upon the JVM.</li>\n<li>notifyAll() --&gt; This method simply wakes all threads that are waiting on the wait set. The awakened threads will not be able to proceed until the current thread releases the lock on this object. The awakened threads will compete in the usual manner with any other threads that might be actively competing to synchronize.</li>\n</ul>\n<p><em><strong>Example java code to achive synchronization using monitor in producer consumer problem</strong></em></p>\n<pre class=\"lang-java prettyprint-override\"><code>class Buffer {\n            private char [] buffer;\n            private int count = 0, in = 0, out = 0;\n\n            Buffer(int size)\n            {\n                 buffer = new char[size];\n            }\n \n            public synchronized void Put(char c) {\n                 while(count == buffer.length) \n                 {\n                      try { wait(); }\n                      catch (InterruptedException e) { } \n                      finally { } \n                 } \n                 System.out.println(&quot;Producing &quot; + c + &quot; ...&quot;);\n                 buffer[in] = c; \n                 in = (in + 1) % buffer.length; \n                 count++; \n                 notify(); \n            }\n    \n            public synchronized char Get() {\n                 while (count == 0) \n                 {\n                      try { wait(); }\n                      catch (InterruptedException e) { } \n                      finally { } \n                 } \n                 char c = buffer[out]; \n                 out = (out + 1) % buffer.length;\n                 count--;\n                 System.out.println(&quot;Consuming &quot; + c + &quot; ...&quot;); \n                 notify(); \n                 return c;\n            }\n      }\n</code></pre>\n<p>Refer below links\n<a href=\"http://www.csc.villanova.edu/%7Emdamian/threads/javamonitors.html#:%7E:text=Java%20associates%20a%20monitor%20with,the%20monitor%20for%20that%20object\" rel=\"noreferrer\">http://www.csc.villanova.edu/~mdamian/threads/javamonitors.html#:~:text=Java%20associates%20a%20monitor%20with,the%20monitor%20for%20that%20object</a>\n<a href=\"https://howtodoinjava.com/java/multi-threading/how-to-use-locks-in-java-java-util-concurrent-locks-lock-tutorial-and-example/\" rel=\"noreferrer\">https://howtodoinjava.com/java/multi-threading/how-to-use-locks-in-java-java-util-concurrent-locks-lock-tutorial-and-example/</a></p>\n"}],"owner":{"account_id":25344,"reputation":20890,"user_id":65120,"accept_rate":56,"display_name":"xdevel2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119902,"favorite_count":0,"down_vote_count":1,"up_vote_count":160,"accepted_answer_id":3362323,"answer_count":6,"score":159,"last_activity_date":1689067657,"creation_date":1280405696,"question_id":3362303,"body_markdown":"What&#39;s a monitor referred to in concurrent programming in Java?\r\n\r\nWhen I read that &quot;every object has associated a monitor&quot; what does it meaning?\r\n\r\nIs it a special object?","title":"What&#39;s a monitor in Java?","body":"<p>What's a monitor referred to in concurrent programming in Java?</p>\n\n<p>When I read that \"every object has associated a monitor\" what does it meaning?</p>\n\n<p>Is it a special object?</p>\n"},{"tags":["java","jax-rs","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1672834093,"post_id":75004765,"comment_id":132360981,"body_markdown":"This might be a bug. Can you open an issue on Github please so we can look into it further?","body":"This might be a bug. Can you open an issue on Github please so we can look into it further?"},{"owner":{"account_id":333116,"reputation":1720,"user_id":658801,"display_name":"zolv"},"score":0,"creation_date":1672879455,"post_id":75004765,"comment_id":132375017,"body_markdown":"@PaulSamsotha It works (I&#39;ve checked it) but the interface has to lay in the same project as implementation. When I move it outside to a jar - it cannot recognize it.","body":"@PaulSamsotha It works (I&#39;ve checked it) but the interface has to lay in the same project as implementation. When I move it outside to a jar - it cannot recognize it."},{"owner":{"account_id":333116,"reputation":1720,"user_id":658801,"display_name":"zolv"},"score":0,"creation_date":1672879524,"post_id":75004765,"comment_id":132375024,"body_markdown":"@geoand I&#39;ve done some investigations with a minimal single-module project and it works just fine. But when an interface is packed in an esternal jar it doesn&#39;t work. Is it expected?","body":"@geoand I&#39;ve done some investigations with a minimal single-module project and it works just fine. But when an interface is packed in an esternal jar it doesn&#39;t work. Is it expected?"},{"owner":{"account_id":333116,"reputation":1720,"user_id":658801,"display_name":"zolv"},"score":0,"creation_date":1672879562,"post_id":75004765,"comment_id":132375030,"body_markdown":"I&#39;ve updated the question explaining the scenario. I will try to share the full multimodule project","body":"I&#39;ve updated the question explaining the scenario. I will try to share the full multimodule project"}],"answers":[{"comments":[{"owner":{"account_id":333116,"reputation":1720,"user_id":658801,"display_name":"zolv"},"score":0,"creation_date":1673364360,"post_id":75046455,"comment_id":132479167,"body_markdown":"Thank you. It looks like this was the problem","body":"Thank you. It looks like this was the problem"},{"owner":{"account_id":9259591,"reputation":248,"user_id":6877157,"display_name":"nkmuturi"},"score":0,"creation_date":1681977947,"post_id":75046455,"comment_id":134144269,"body_markdown":"Not quite the solution (in my case, at least). In my case the REST interface is generated by openapi tools, with error &quot;Unable to find matching target resource method&quot; thrown by similar paths. The issue is discussed [here without resolve by Quarkus engineers](https://github.com/quarkusio/quarkus/issues/19299). My (painful) solution was to uniquify clashing paths one by one.","body":"Not quite the solution (in my case, at least). In my case the REST interface is generated by openapi tools, with error &quot;Unable to find matching target resource method&quot; thrown by similar paths. The issue is discussed <a href=\"https://github.com/quarkusio/quarkus/issues/19299\" rel=\"nofollow noreferrer\">here without resolve by Quarkus engineers</a>. My (painful) solution was to uniquify clashing paths one by one."}],"tags":[],"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689067644,"creation_date":1673167123,"answer_id":75046455,"question_id":75004765,"body_markdown":"You need to add an empty beans.xml in your external project in `src/main/resources/META-INF`, so that Quarkus scans your external jar file.\r\n\r\nQuarkus documentation also lists other ways to make beans discoverable:\r\n - dependencies that contain a `beans.xml` descriptor (content is ignored)\r\n - dependencies that contain a Jandex index - `META-INF/jandex.idx`\r\n - dependencies referenced by `quarkus.index-dependency` in `application.properties`\r\n - Quarkus integration code.\r\n\r\nhttps://quarkus.io/guides/cdi-reference#bean_discovery ","title":"Quarkus does not use JaxRs @Path when declared in interface in an external jar","body":"<p>You need to add an empty beans.xml in your external project in <code>src/main/resources/META-INF</code>, so that Quarkus scans your external jar file.</p>\n<p>Quarkus documentation also lists other ways to make beans discoverable:</p>\n<ul>\n<li>dependencies that contain a <code>beans.xml</code> descriptor (content is ignored)</li>\n<li>dependencies that contain a Jandex index - <code>META-INF/jandex.idx</code></li>\n<li>dependencies referenced by <code>quarkus.index-dependency</code> in <code>application.properties</code></li>\n<li>Quarkus integration code.</li>\n</ul>\n<p><a href=\"https://quarkus.io/guides/cdi-reference#bean_discovery\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/cdi-reference#bean_discovery</a></p>\n"}],"owner":{"account_id":333116,"reputation":1720,"user_id":658801,"display_name":"zolv"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":421,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75046455,"answer_count":1,"score":2,"last_activity_date":1689067644,"creation_date":1672831788,"question_id":75004765,"body_markdown":"I have a Java interface which declares all things related to JaxRs like this:\r\n\r\n```\r\n@Path(&quot;/notes-service&quot;)\r\npublic interface NotesApi {\r\n\r\n  @POST\r\n  @Path(&quot;/notes&quot;)\r\n  @Consumes({ &quot;application/json&quot; })\r\n  @Produces({ &quot;application/json&quot; })\r\n  Response createNote(\r\n    @HeaderParam(&quot;Accept-Language&quot;) @DefaultValue(&quot;en&quot;) String acceptLanguage,\r\n    @Valid CreateNoteDTO createNoteDTO);\r\n\r\n}\r\n```\r\nThe interface is shipped as an external dependency as a jar.\r\n\r\nAnd an implementation in my service:\r\n```\r\n@ApplicationScoped\r\n@Transactional\r\npublic class NotesService implements NotesApi {\r\n\r\n  @Override\r\n  public Response createNote(String range, CreateNoteDTO createNoteDTO) {\r\n    // ...\r\n  }\r\n}\r\n```\r\nSuch a setup like above doesn&#39;t work. It returnes 404 for an endpoint `/notes-service/notes`\r\n\r\nHowever when I copy the `@Path` part into the implenentation, everything works just fine:\r\n\r\n```\r\n@ApplicationScoped\r\n@Transactional\r\n@Path(&quot;/notes-service&quot;)\r\npublic class NotesService implements NotesApi {\r\n\r\n  @Override\r\n  public Response createNote(String range, CreateNoteDTO createNoteDTO) {\r\n    // ...\r\n  }\r\n}\r\n```\r\nAlso another workaaround: When I copy-paste the interface into my service then it also works without `@Path` declaration in an implementation.\r\n\r\nThis means that `@Path` annotation on interface level works just fine (I have checked it with a minimal service). But it doesn&#39;t work when the interface comes as a dependency.\r\n\r\nIs it a bug in Quarkus or an expected behavior?","title":"Quarkus does not use JaxRs @Path when declared in interface in an external jar","body":"<p>I have a Java interface which declares all things related to JaxRs like this:</p>\n<pre><code>@Path(&quot;/notes-service&quot;)\npublic interface NotesApi {\n\n  @POST\n  @Path(&quot;/notes&quot;)\n  @Consumes({ &quot;application/json&quot; })\n  @Produces({ &quot;application/json&quot; })\n  Response createNote(\n    @HeaderParam(&quot;Accept-Language&quot;) @DefaultValue(&quot;en&quot;) String acceptLanguage,\n    @Valid CreateNoteDTO createNoteDTO);\n\n}\n</code></pre>\n<p>The interface is shipped as an external dependency as a jar.</p>\n<p>And an implementation in my service:</p>\n<pre><code>@ApplicationScoped\n@Transactional\npublic class NotesService implements NotesApi {\n\n  @Override\n  public Response createNote(String range, CreateNoteDTO createNoteDTO) {\n    // ...\n  }\n}\n</code></pre>\n<p>Such a setup like above doesn't work. It returnes 404 for an endpoint <code>/notes-service/notes</code></p>\n<p>However when I copy the <code>@Path</code> part into the implenentation, everything works just fine:</p>\n<pre><code>@ApplicationScoped\n@Transactional\n@Path(&quot;/notes-service&quot;)\npublic class NotesService implements NotesApi {\n\n  @Override\n  public Response createNote(String range, CreateNoteDTO createNoteDTO) {\n    // ...\n  }\n}\n</code></pre>\n<p>Also another workaaround: When I copy-paste the interface into my service then it also works without <code>@Path</code> declaration in an implementation.</p>\n<p>This means that <code>@Path</code> annotation on interface level works just fine (I have checked it with a minimal service). But it doesn't work when the interface comes as a dependency.</p>\n<p>Is it a bug in Quarkus or an expected behavior?</p>\n"},{"tags":["java","android","android-drawable"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689061435,"post_id":76651012,"comment_id":135155929,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28984506,"reputation":1,"user_id":22201590,"display_name":"Spidy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689067593,"creation_date":1688969027,"question_id":76651012,"body_markdown":"Can someone help? How can I create the outline given below in Android?\r\n\r\n[![corner stroke line][1]][1]\r\n\r\nI have tried but can&#39;t able to implement this background drawable. I have tried using `&lt;layer-list&gt;` and inside 4 `&lt;item&gt;` tags with the use of padding of the rectangle shape.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1XvCY.png","title":"Not able to create corner stroke line in android drawable file","body":"<p>Can someone help? How can I create the outline given below in Android?</p>\n<p><a href=\"https://i.stack.imgur.com/1XvCY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1XvCY.png\" alt=\"corner stroke line\" /></a></p>\n<p>I have tried but can't able to implement this background drawable. I have tried using <code>&lt;layer-list&gt;</code> and inside 4 <code>&lt;item&gt;</code> tags with the use of padding of the rectangle shape.</p>\n"},{"tags":["java","maven","guava","asterisk"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1688630913,"post_id":76626716,"comment_id":135100257,"body_markdown":"Looks like you should add all your dependencies to the classpath.","body":"Looks like you should add all your dependencies to the classpath."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1688634802,"post_id":76626716,"comment_id":135101144,"body_markdown":"Exactly. Make sure that you either build a single jar with all dependencies included, or that you add all relevant dependency/library jars to the classpath when running your application.","body":"Exactly. Make sure that you either build a single jar with all dependencies included, or that you add all relevant dependency/library jars to the classpath when running your application."},{"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"score":0,"creation_date":1689061443,"post_id":76626716,"comment_id":135155930,"body_markdown":"So, even if asterisk-java should work out of the box, I have to download additional software and ad it to java cp ?","body":"So, even if asterisk-java should work out of the box, I have to download additional software and ad it to java cp ?"},{"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"score":0,"creation_date":1689067295,"post_id":76626716,"comment_id":135157185,"body_markdown":"Ok you were right my bad, I had to download guava jre and add it. Thanks a lot.","body":"Ok you were right my bad, I had to download guava jre and add it. Thanks a lot."}],"answers":[{"tags":[],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1689067562,"creation_date":1689067562,"answer_id":76660498,"question_id":76626716,"body_markdown":"SOLVED: Indeed, to fix this issues, I had to download the guava .jar (jre) (here: https://github.com/google/guava/releases) and add it in the cp by running this command : `java -cp asterisk-java.jar:guava-32.1.1-jre.jar org.asteriskjava.fastagi.DefaultAgiServer`\r\n\r\nAnd it worked perfeclty. Thanks to helpers.","title":"Guava issue when starting Asterisk-Java","body":"<p>SOLVED: Indeed, to fix this issues, I had to download the guava .jar (jre) (here: <a href=\"https://github.com/google/guava/releases\" rel=\"nofollow noreferrer\">https://github.com/google/guava/releases</a>) and add it in the cp by running this command : <code>java -cp asterisk-java.jar:guava-32.1.1-jre.jar org.asteriskjava.fastagi.DefaultAgiServer</code></p>\n<p>And it worked perfeclty. Thanks to helpers.</p>\n"}],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76660498,"answer_count":1,"score":-1,"last_activity_date":1689067562,"creation_date":1688630605,"question_id":76626716,"body_markdown":"I&#39;m trying to compile a project and it uses guava. The project is Asterisk-Java (https://github.com/asterisk-java/asterisk-java) and when I&#39;m trying to run the .jar with the command `java -cp asterisk-java.jar org.asteriskjava.fastagi.DefaultAgiServer`, the following error appear :\r\n\r\n\r\n`\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/util/concurrent/RateLimiter at org.asteriskjava.lock.Lockable.&lt;init&gt;(Lockable.java:23) at org.asteriskjava.fastagi.AbstractMappingStrategy.&lt;init&gt;(AbstractMappingStrategy.java:38) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:93) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:67) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:57) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:158) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:136) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:76) at org.asteriskjava.fastagi.DefaultAgiServer.main(DefaultAgiServer.java:394) Caused by: java.lang.ClassNotFoundException: com.google.common.util.concurrent.RateLimiter at java.net.URLClassLoader.findClass(URLClassLoader.java:387) at java.lang.ClassLoader.loadClass(ClassLoader.java:418) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ... 9 more \r\n`\r\n\r\nHere&#39;s the dependencies used that make crash:\r\n`\r\n&lt;dependency&gt; &lt;groupId&gt;com.google.guava&lt;/groupId&gt; &lt;artifactId&gt;guava&lt;/artifactId&gt; &lt;version&gt;32.0.1-jre&lt;/version&gt; &lt;/dependency&gt;`\r\n\r\nI tryied to change the guava version in pom.xml but it still not working :/\r\n\r\nI tryied to change guava version to make the rate limiter work but nothing changed.","title":"Guava issue when starting Asterisk-Java","body":"<p>I'm trying to compile a project and it uses guava. The project is Asterisk-Java (<a href=\"https://github.com/asterisk-java/asterisk-java\" rel=\"nofollow noreferrer\">https://github.com/asterisk-java/asterisk-java</a>) and when I'm trying to run the .jar with the command <code>java -cp asterisk-java.jar org.asteriskjava.fastagi.DefaultAgiServer</code>, the following error appear :</p>\n<p><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/util/concurrent/RateLimiter at org.asteriskjava.lock.Lockable.&lt;init&gt;(Lockable.java:23) at org.asteriskjava.fastagi.AbstractMappingStrategy.&lt;init&gt;(AbstractMappingStrategy.java:38) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:93) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:67) at org.asteriskjava.fastagi.ResourceBundleMappingStrategy.&lt;init&gt;(ResourceBundleMappingStrategy.java:57) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:158) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:136) at org.asteriskjava.fastagi.DefaultAgiServer.&lt;init&gt;(DefaultAgiServer.java:76) at org.asteriskjava.fastagi.DefaultAgiServer.main(DefaultAgiServer.java:394) Caused by: java.lang.ClassNotFoundException: com.google.common.util.concurrent.RateLimiter at java.net.URLClassLoader.findClass(URLClassLoader.java:387) at java.lang.ClassLoader.loadClass(ClassLoader.java:418) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ... 9 more </code></p>\n<p>Here's the dependencies used that make crash:\n<code> &lt;dependency&gt; &lt;groupId&gt;com.google.guava&lt;/groupId&gt; &lt;artifactId&gt;guava&lt;/artifactId&gt; &lt;version&gt;32.0.1-jre&lt;/version&gt; &lt;/dependency&gt;</code></p>\n<p>I tryied to change the guava version in pom.xml but it still not working :/</p>\n<p>I tryied to change guava version to make the rate limiter work but nothing changed.</p>\n"},{"tags":["java","zip"],"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1476103667,"post_id":39958486,"comment_id":67196772,"body_markdown":"Please include a [MCVE](http://stackoverflow.com/help/mcve) in your post","body":"Please include a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> in your post"},{"owner":{"account_id":277685,"reputation":813,"user_id":571816,"accept_rate":92,"display_name":"JIV"},"score":0,"creation_date":1476103881,"post_id":39958486,"comment_id":67196928,"body_markdown":"I do not think its possible with current Oracle JVM implementation. Why you need to do this?","body":"I do not think its possible with current Oracle JVM implementation. Why you need to do this?"},{"owner":{"account_id":6023664,"reputation":361,"user_id":4730051,"accept_rate":62,"display_name":"Ivan"},"score":0,"creation_date":1476104308,"post_id":39958486,"comment_id":67197224,"body_markdown":"@Vampire, added","body":"@Vampire, added"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1476104376,"post_id":39958486,"comment_id":67197275,"body_markdown":"You know that it&#39;s possible but you&#39;ve just proven that it isn&#39;t possible. Make up your mind.","body":"You know that it&#39;s possible but you&#39;ve just proven that it isn&#39;t possible. Make up your mind."},{"owner":{"account_id":6023664,"reputation":361,"user_id":4730051,"accept_rate":62,"display_name":"Ivan"},"score":1,"creation_date":1476104409,"post_id":39958486,"comment_id":67197298,"body_markdown":"@JIV, to bypass a signature restriction (signature checker verifies the first entity, but installed installs the last)","body":"@JIV, to bypass a signature restriction (signature checker verifies the first entity, but installed installs the last)"},{"owner":{"account_id":6023664,"reputation":361,"user_id":4730051,"accept_rate":62,"display_name":"Ivan"},"score":0,"creation_date":1476104563,"post_id":39958486,"comment_id":67197403,"body_markdown":"@EJP, a library does not allow duplicates. You may check sources http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/zip/ZipOutputStream.java line 214: `if (! names.add(e.name)) {` but you may check where `names` object is used and suddenly only to disallow duplicates. So it&#39;s possible but not with that library","body":"@EJP, a library does not allow duplicates. You may check sources <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/zip/ZipOutputStream.java\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/shar&zwnj;&#8203;e/&hellip;</a> line 214: <code>if (! names.add(e.name)) {</code> but you may check where <code>names</code> object is used and suddenly only to disallow duplicates. So it&#39;s possible but not with that library"}],"answers":[{"comments":[{"owner":{"account_id":109571,"reputation":4085,"user_id":290254,"display_name":"Julius Musseau"},"score":3,"creation_date":1608761137,"post_id":39959251,"comment_id":115680198,"body_markdown":"You must have *really* wanted to get those duplicate entries saved to figure out this technique!  (p.s. thanks!  very handy!)","body":"You must have <i>really</i> wanted to get those duplicate entries saved to figure out this technique!  (p.s. thanks!  very handy!)"},{"owner":{"account_id":18835,"reputation":82201,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"score":0,"creation_date":1673269598,"post_id":39959251,"comment_id":132453537,"body_markdown":"Yes, this is very handy if you want to prepare a JAR file for a test with e.g. multiple entries for ServiceLoader.","body":"Yes, this is very handy if you want to prepare a JAR file for a test with e.g. multiple entries for ServiceLoader."},{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":0,"creation_date":1689067161,"post_id":39959251,"comment_id":135157160,"body_markdown":"@Julius Musseau Yepp, pkzip once used to maintain a folder structure and store file names, only instead of tons of redundant info.","body":"@Julius Musseau Yepp, pkzip once used to maintain a folder structure and store file names, only instead of tons of redundant info."}],"tags":[],"owner":{"account_id":6023664,"reputation":361,"user_id":4730051,"accept_rate":62,"display_name":"Ivan"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1673268820,"creation_date":1476105473,"answer_id":39959251,"question_id":39958486,"body_markdown":"I was able to bypass restriction thru reflection api:\r\n\r\n    Field namesField = ZipOutputStream.class.getDeclaredField(&quot;names&quot;);\r\n    namesField.setAccessible(true);\r\n    HashSet&lt;String&gt; names = (HashSet&lt;String&gt;) namesField.get(out);\r\n\r\nAnd clearing `names` after each `putNextEntry` call","title":"Java - Create a ZIP file with duplicate entries","body":"<p>I was able to bypass restriction thru reflection api:</p>\n<pre><code>Field namesField = ZipOutputStream.class.getDeclaredField(&quot;names&quot;);\nnamesField.setAccessible(true);\nHashSet&lt;String&gt; names = (HashSet&lt;String&gt;) namesField.get(out);\n</code></pre>\n<p>And clearing <code>names</code> after each <code>putNextEntry</code> call</p>\n"},{"tags":[],"owner":{"account_id":10532673,"reputation":789,"user_id":7761544,"display_name":"Dinesh Falwadiya"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578563428,"creation_date":1578563428,"answer_id":59661249,"question_id":39958486,"body_markdown":"    try (FileOutputStream fos = new FileOutputStream(zipFile);\r\n\t\t\t\tZipOutputStream zos = new ZipOutputStream(fos)) {\r\n\r\n\t\t\tHashSet&lt;String&gt; names = new HashSet&lt;String&gt;();\r\n\t\t\tfor (String filePath : fileList) {\r\n\t\t\t\tif(names.add(filePath))\r\n\t\t\t\t{\r\n\t\t\t\tString name = filePath.substring(directory.getAbsolutePath()\r\n\t\t\t\t\t\t.length() + 1, filePath.length());\r\n\t\t\t\tZipEntry zipEntry = new ZipEntry(name);\r\n\t\t\t\r\n\t\t\t\tzos.putNextEntry(zipEntry);\r\n\t\t\t\ttry (FileInputStream fis = new FileInputStream(filePath)) {\r\n\t\t\t\t\tbyte[] buffer = new byte[1024];\r\n\t\t\t\t\tint length;\r\n\t\t\t\t\twhile ((length = fis.read(buffer)) &gt;= 0) {\r\n\t\t\t\t\t\tzos.write(buffer, 0, length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\tthrow new Exception();\r\n\t\t\t\t}\r\n\t\t\t\tzos.closeEntry();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tnames.clear();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new Exception();\r\n\t\t}\r\n\r\nBy using HashSet solved my issue of zip duplicate entry","title":"Java - Create a ZIP file with duplicate entries","body":"<pre><code>try (FileOutputStream fos = new FileOutputStream(zipFile);\n            ZipOutputStream zos = new ZipOutputStream(fos)) {\n\n        HashSet&lt;String&gt; names = new HashSet&lt;String&gt;();\n        for (String filePath : fileList) {\n            if(names.add(filePath))\n            {\n            String name = filePath.substring(directory.getAbsolutePath()\n                    .length() + 1, filePath.length());\n            ZipEntry zipEntry = new ZipEntry(name);\n\n            zos.putNextEntry(zipEntry);\n            try (FileInputStream fis = new FileInputStream(filePath)) {\n                byte[] buffer = new byte[1024];\n                int length;\n                while ((length = fis.read(buffer)) &gt;= 0) {\n                    zos.write(buffer, 0, length);\n                }\n\n            } catch (Exception e) {\n                e.printStackTrace();\n                throw new Exception();\n            }\n            zos.closeEntry();\n            }\n\n        }\n        names.clear();\n    } catch (IOException e) {\n        e.printStackTrace();\n        throw new Exception();\n    }\n</code></pre>\n\n<p>By using HashSet solved my issue of zip duplicate entry</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637321577,"post_id":70033967,"comment_id":123801266,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70033967/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11081934,"reputation":1,"user_id":8136865,"display_name":"Bree Bree"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637321450,"creation_date":1637320457,"answer_id":70033967,"question_id":39958486,"body_markdown":"This is my solution: adding postfixes for duplicate names:\r\n\r\n    String SPLIT_FILENAME_EXTENSION_REGEX = &quot;\\\\.(?=[^\\\\.]+$)&quot;;\r\n    Map&lt;String, Integer&gt; namesPostfixes = new HashMap&lt;&gt;();\r\n\r\n\r\n\tprivate void addZipPart(String fullName, InputStream attachmentStream, ZipOutputStream zos,\r\n\t\t\tMap&lt;String, Integer&gt; namesPostfixes)\r\n\t\t\tthrows IOException, MessagingException {\r\n\t\tString generatedName;\r\n\t\tif (namesPostfixes.containsKey(fullName)) {\r\n\t\t\tString namePart;\r\n\t\t\tString extensionPart;\r\n\t\t\tif (fullName.contains(&quot;.&quot;)) {\r\n\t\t\t\tString[] splittedName = fullName.split(SPLIT_FILENAME_EXTENSION_REGEX);\r\n\t\t\t\tnamePart = splittedName[0];\r\n\t\t\t\textensionPart = &quot;.&quot; + splittedName[1];\r\n\t\t\t} else {\r\n\t\t\t\tnamePart = fullName;\r\n\t\t\t\textensionPart = &quot;&quot;;\r\n\t\t\t}\r\n\t\t\tInteger counter = namesPostfixes.get(fullName);\r\n\t\t\tgeneratedName = namePart + &quot;_&quot; + ++counter + extensionPart;\r\n\t\t\tnamesPostfixes.put(fullName, counter);\r\n\t\t} else {\r\n\t\t\tgeneratedName = fullName;\r\n\t\t\tnamesPostfixes.put(fullName, 0);\r\n\t\t}\r\n\t\tzos.putNextEntry(\r\n\t\t\t\tnew ZipEntry(generatedName));\r\n\t\tIOUtils.copy(attachmentStream, zos);\r\n\t\tzos.closeEntry();\r\n\t}","title":"Java - Create a ZIP file with duplicate entries","body":"<p>This is my solution: adding postfixes for duplicate names:</p>\n<pre><code>String SPLIT_FILENAME_EXTENSION_REGEX = &quot;\\\\.(?=[^\\\\.]+$)&quot;;\nMap&lt;String, Integer&gt; namesPostfixes = new HashMap&lt;&gt;();\n\n\nprivate void addZipPart(String fullName, InputStream attachmentStream, ZipOutputStream zos,\n        Map&lt;String, Integer&gt; namesPostfixes)\n        throws IOException, MessagingException {\n    String generatedName;\n    if (namesPostfixes.containsKey(fullName)) {\n        String namePart;\n        String extensionPart;\n        if (fullName.contains(&quot;.&quot;)) {\n            String[] splittedName = fullName.split(SPLIT_FILENAME_EXTENSION_REGEX);\n            namePart = splittedName[0];\n            extensionPart = &quot;.&quot; + splittedName[1];\n        } else {\n            namePart = fullName;\n            extensionPart = &quot;&quot;;\n        }\n        Integer counter = namesPostfixes.get(fullName);\n        generatedName = namePart + &quot;_&quot; + ++counter + extensionPart;\n        namesPostfixes.put(fullName, counter);\n    } else {\n        generatedName = fullName;\n        namesPostfixes.put(fullName, 0);\n    }\n    zos.putNextEntry(\n            new ZipEntry(generatedName));\n    IOUtils.copy(attachmentStream, zos);\n    zos.closeEntry();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689067509,"creation_date":1689067509,"answer_id":76660489,"question_id":39958486,"body_markdown":"Putting Ivans answer in something performant.\r\n\r\n\tstatic final Field zipNamesField = getZipNameField();\r\n\r\n\tprivate static Field getZipNameField()\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tField res = ZipOutputStream.class.getDeclaredField(&quot;names&quot;);\r\n\t\t\tres.setAccessible(true);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\tcatch (NoSuchFieldException | SecurityException e)\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n    ...\r\n    \r\n    // Loop\r\n    ((HashSet&lt;String&gt;) zipNamesField.get(out)).clear();\r\n    entry = new ZipEntry(...);\r\n\tout.putNextEntry(entry);\r\n    \r\n    ...\r\n","title":"Java - Create a ZIP file with duplicate entries","body":"<p>Putting Ivans answer in something performant.</p>\n<pre><code>static final Field zipNamesField = getZipNameField();\n\nprivate static Field getZipNameField()\n{\n    try\n    {\n        Field res = ZipOutputStream.class.getDeclaredField(&quot;names&quot;);\n        res.setAccessible(true);\n        return res;\n    }\n    catch (NoSuchFieldException | SecurityException e)\n    {\n        e.printStackTrace();\n        return null;\n    }\n}\n\n...\n\n// Loop\n((HashSet&lt;String&gt;) zipNamesField.get(out)).clear();\nentry = new ZipEntry(...);\nout.putNextEntry(entry);\n\n...\n</code></pre>\n"}],"owner":{"account_id":6023664,"reputation":361,"user_id":4730051,"accept_rate":62,"display_name":"Ivan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8759,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1689067509,"creation_date":1476103077,"question_id":39958486,"body_markdown":"I&#39;d like to create a zip which stores two different files with the same name, but I&#39;m unable (using `java.util.zip.ZipOutputStream`) due to \r\n\r\n&gt; java.util.zip.ZipException: duplicate entry:\r\n\r\n\r\nexception. I know that it&#39;s possible, but I need an advise which library I can use for that purposes. Thanks!\r\n\r\nUPD the code I&#39;m using:\r\n\r\n    File zipFile = new File(&quot;C:\\\\Users\\\\user\\\\Desktop\\\\old.zip&quot;);\r\n    File outFile = new File(&quot;C:\\\\Users\\\\user\\\\Desktop\\\\new.zip&quot;);\r\n    if(!outFile.exists()) {\r\n    \toutFile.getParentFile().mkdirs();\r\n    \toutFile.createNewFile();\r\n    }\r\n    \r\n    byte[] buf = new byte[1024];\r\n    ZipInputStream zin = new ZipInputStream(new FileInputStream(zipFile));\r\n    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(outFile));\r\n    \r\n    ZipEntry entry = zin.getNextEntry();\r\n    while (entry != null) {\r\n    \tString name = entry.getName();\r\n    \tout.putNextEntry(new ZipEntry(name));\r\n    \tint len;\r\n    \twhile ((len = zin.read(buf)) &gt; 0) {\r\n    \t\tout.write(buf, 0, len);\r\n    \t}\r\n    \tentry = zin.getNextEntry();\r\n    \t\r\n    \tif(&quot;file&quot;.equals(name)) {\r\n    \t\tFile fakeFile = new File(&quot;C:\\\\Users\\\\user\\\\Desktop\\\\file&quot;);\r\n    \t\tInputStream in = new FileInputStream(fakeFile);\r\n    \t\tout.putNextEntry(new ZipEntry(&quot;file&quot;));\r\n    \t\twhile ((len = in.read(buf)) &gt; 0) {\r\n    \t\t\tout.write(buf, 0, len);\r\n    \t\t}\r\n    \t\tout.closeEntry();\r\n    \t\tin.close();\r\n    \t}\r\n    } \r\n    zin.close();\r\n    out.close();\r\n\r\n","title":"Java - Create a ZIP file with duplicate entries","body":"<p>I'd like to create a zip which stores two different files with the same name, but I'm unable (using <code>java.util.zip.ZipOutputStream</code>) due to </p>\n\n<blockquote>\n  <p>java.util.zip.ZipException: duplicate entry:</p>\n</blockquote>\n\n<p>exception. I know that it's possible, but I need an advise which library I can use for that purposes. Thanks!</p>\n\n<p>UPD the code I'm using:</p>\n\n<pre><code>File zipFile = new File(\"C:\\\\Users\\\\user\\\\Desktop\\\\old.zip\");\nFile outFile = new File(\"C:\\\\Users\\\\user\\\\Desktop\\\\new.zip\");\nif(!outFile.exists()) {\n    outFile.getParentFile().mkdirs();\n    outFile.createNewFile();\n}\n\nbyte[] buf = new byte[1024];\nZipInputStream zin = new ZipInputStream(new FileInputStream(zipFile));\nZipOutputStream out = new ZipOutputStream(new FileOutputStream(outFile));\n\nZipEntry entry = zin.getNextEntry();\nwhile (entry != null) {\n    String name = entry.getName();\n    out.putNextEntry(new ZipEntry(name));\n    int len;\n    while ((len = zin.read(buf)) &gt; 0) {\n        out.write(buf, 0, len);\n    }\n    entry = zin.getNextEntry();\n\n    if(\"file\".equals(name)) {\n        File fakeFile = new File(\"C:\\\\Users\\\\user\\\\Desktop\\\\file\");\n        InputStream in = new FileInputStream(fakeFile);\n        out.putNextEntry(new ZipEntry(\"file\"));\n        while ((len = in.read(buf)) &gt; 0) {\n            out.write(buf, 0, len);\n        }\n        out.closeEntry();\n        in.close();\n    }\n} \nzin.close();\nout.close();\n</code></pre>\n"},{"tags":["java","android-studio","game-development","tic-tac-toe","flush"],"comments":[{"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"score":0,"creation_date":1688658068,"post_id":76629393,"comment_id":135106446,"body_markdown":"_&quot;when player presses on button&quot;_ You&#39;ll need an `OnClickListener` on each button then: [https://developer.android.com/develop/ui/views/components/button](https://developer.android.com/develop/ui/views/components/button)","body":"<i>&quot;when player presses on button&quot;</i> You&#39;ll need an <code>OnClickListener</code> on each button then: <a href=\"https://developer.android.com/develop/ui/views/components/button\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/components/bu&zwnj;&#8203;tton</a>"}],"owner":{"account_id":20740823,"reputation":11,"user_id":15230528,"display_name":"Ahmed Salman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689067286,"creation_date":1688650293,"question_id":76629393,"body_markdown":"I am making a simple tic tac toe game and I want to immediately print the X&#39;s and O&#39;s when a player presses a button.\r\nJust like how you could flush a print statement and immediately have the buffer empty itself without having to go through the whole program.\r\n\r\n```java\r\n    // method to print X&#39;s and O&#39;s on buttons\r\n    private void setText(Button btn) {\r\n\r\n        if (btn.getText().toString().equals(&quot;&quot;)) { // if button NOT toggled yet\r\n            if (state == 0) { // print 0 on button\r\n                btn.setText(&quot;0&quot;);\r\n                moves++;\r\n                state = 1;\r\n            } else { // print X on button\r\n                btn.setText(&quot;X&quot;);\r\n                moves++;\r\n                state = 0;\r\n            }\r\n        }\r\n    }\r\n```","title":"How to flush print statement to Button in Android Studio?","body":"<p>I am making a simple tic tac toe game and I want to immediately print the X's and O's when a player presses a button.\nJust like how you could flush a print statement and immediately have the buffer empty itself without having to go through the whole program.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // method to print X's and O's on buttons\n    private void setText(Button btn) {\n\n        if (btn.getText().toString().equals(&quot;&quot;)) { // if button NOT toggled yet\n            if (state == 0) { // print 0 on button\n                btn.setText(&quot;0&quot;);\n                moves++;\n                state = 1;\n            } else { // print X on button\n                btn.setText(&quot;X&quot;);\n                moves++;\n                state = 0;\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","websocket"],"comments":[{"owner":{"account_id":21650945,"reputation":71,"user_id":17772697,"display_name":"WoistdasNiveau"},"score":0,"creation_date":1689072077,"post_id":76660435,"comment_id":135158189,"body_markdown":"I changed the URL to ws://localhost:8080/ws now i get a http 400 but i still do not know what is wrong with the requests.","body":"I changed the URL to ws://localhost:8080/ws now i get a http 400 but i still do not know what is wrong with the requests."}],"owner":{"account_id":21650945,"reputation":71,"user_id":17772697,"display_name":"WoistdasNiveau"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689067190,"creation_date":1689067190,"question_id":76660435,"body_markdown":"I am highly confused with spring boot websockets. I have followed this tutorial https://www.youtube.com/watch?v=TywlS9iAZCM&amp;t=2367s to create the Websocket backend. I wanted to test it with the Websocket capabilities of Postman and also created a console Application in C# to test and play around with the Websockets, however, i always get 404 back. This is really confusing for me since when i look into the logs of the spring boot application it looks like the Websocket request is always treated as a normal GET request, which also does not make a lot of sense to me. I already looked at this question https://stackoverflow.com/questions/53647987/spring-boot-websocket-api-404-not-found and this one https://stackoverflow.com/questions/28000900/spring-websocket-getting-404-not-found but in all tutorials i have watched so far nobody is using the Websocketconfig which implements WebSocketConfigurer and adding the @Controller annotation to my config did not change anything at all. What am i missing and what am i doing wrong?\r\n\r\nThe logs:\r\n```\r\n2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;stompWebSocketHandlerMapping&#39;\r\n2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;webSocketHandlerMapping&#39;\r\n2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;resourceHandlerMapping&#39;\r\n2023-07-11T11:11:23.892+02:00  INFO 19376 --- [           main] c.e.w.WebSocketTriesBackendApplication   : Started WebSocketTriesBackendApplication in 1.72 seconds (process running for 2.274)\r\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;springApplicationAdminRegistrar&#39;\r\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;springApplicationAdminRegistrar&#39;\r\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;applicationAvailability&#39;\r\n2023-07-11T11:11:23.893+02:00 DEBUG 19376 --- [           main] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\r\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;springApplicationAdminRegistrar&#39;\r\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;springApplicationAdminRegistrar&#39;\r\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;applicationAvailability&#39;\r\n2023-07-11T11:11:23.894+02:00 DEBUG 19376 --- [           main] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\r\n2023-07-11T11:12:23.659+02:00  INFO 19376 --- [MessageBroker-1] o.s.w.s.c.WebSocketMessageBrokerStats    : WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]\r\n2023-07-11T11:16:01.904+02:00  INFO 19376 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-07-11T11:16:01.904+02:00  INFO 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;multipartResolver&#39;\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.multipart.support.StandardServletMultipartResolver@6e4d781\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;localeResolver&#39;\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver@503209a1\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;themeResolver&#39;\r\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.theme.FixedThemeResolver@614fac67\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;stompWebSocketHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;webSocketHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;welcomePageHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;welcomePageNotAcceptableHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;requestMappingHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;viewControllerHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;beanNameHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;routerFunctionMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;resourceHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;defaultServletHandlerMapping&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;requestMappingHandlerAdapter&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;handlerFunctionAdapter&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;httpRequestHandlerAdapter&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;simpleControllerHandlerAdapter&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;errorAttributes&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;handlerExceptionResolver&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;viewNameTranslator&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected DefaultRequestToViewNameTranslator\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;beanNameViewResolver&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;mvcViewResolver&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;defaultViewResolver&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;viewResolver&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;flashMapManager&#39;\r\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected SessionFlashMapManager\r\n2023-07-11T11:16:01.905+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails=&#39;false&#39;: request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\r\n2023-07-11T11:16:01.905+02:00  INFO 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2023-07-11T11:16:01.908+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.w.s.f.OrderedRequestContextFilter  : Bound request context to thread: org.apache.catalina.connector.RequestFacade@4379a6f\r\n2023-07-11T11:16:01.910+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/ws/app/topic/public&quot;, parameters={}, headers={masked} in DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-07-11T11:16:01.917+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.w.s.s.s.WebSocketHandlerMapping      : Mapped to HandlerExecutionChain with [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@78a0ff63] and 1 interceptors\r\n2023-07-11T11:16:01.925+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.w.s.s.t.h.DefaultSockJsService       : Processing transport request: GET http://localhost:8080/ws/app/topic/public\r\n2023-07-11T11:16:01.925+02:00  WARN 19376 --- [nio-8080-exec-1] o.s.w.s.s.t.h.DefaultSockJsService       : &quot;Unknown transport type for http://localhost:8080/ws/app/topic/public&quot;\r\n2023-07-11T11:16:01.926+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\r\n2023-07-11T11:16:01.926+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND, headers={masked}\r\n2023-07-11T11:16:01.927+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean &#39;springApplicationAdminRegistrar&#39;\r\n2023-07-11T11:16:01.927+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.w.s.f.OrderedRequestContextFilter  : Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@4379a6f\r\n\r\n```\r\n\r\nThe WebsocketConfig:\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer\r\n{\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry registry)\r\n    {\r\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry)\r\n    {\r\n        registry.addEndpoint(&quot;/ws&quot;).withSockJS();\r\n    }\r\n}\r\n```\r\n\r\nEventlistener:\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class WebSocketEventListener\r\n{\r\n    private final SimpMessageSendingOperations messageTemplate;\r\n\r\n    @EventListener\r\n    public void HandleWebSocketDisconnectListener(SessionDisconnectEvent event)\r\n    {\r\n        StompHeaderAccessor headerAccessor = StompHeaderAccessor.wrap(event.getMessage());\r\n        String username = (String) headerAccessor.getSessionAttributes().get(&quot;username&quot;);\r\n\r\n        if(username != null)\r\n        {\r\n            log.info(&quot;User disconncted: &quot; + username);\r\n            var message = ChatMessage.builder()\r\n                    .type(MessageType.LEAVE)\r\n                    .sender(username)\r\n                    .build();\r\n\r\n            messageTemplate.convertAndSend(&quot;/topic/public&quot;, message);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nController:\r\n```\r\n@Controller\r\npublic class ChatController\r\n{\r\n    @MessageMapping(&quot;/chat.SendMessage&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage SendMessage(@Payload ChatMessage message)\r\n    {\r\n        return message;\r\n    }\r\n\r\n    @MessageMapping(&quot;/chat.AddUser&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage AddUser(@Payload ChatMessage message, SimpMessageHeaderAccessor headerAccessor)\r\n    {\r\n        headerAccessor.getSessionAttributes().put(&quot;username&quot;, message.getSender());\r\n        return message;\r\n    }\r\n}\r\n```\r\nThe method with which i am trying to access the WebSocket:\r\n```\r\nlass Program\r\n{\r\n    static async Task Main()\r\n    {\r\n        var endpointUrl = &quot;ws://localhost:8080/ws/app/topic/public&quot;; // WebSocket endpoint URL\r\n\r\n        using (var client = new ClientWebSocket())\r\n        {\r\n            await client.ConnectAsync(new Uri(endpointUrl), CancellationToken.None); // Connect to the WebSocket endpoint\r\n\r\n            // Start a separate task to listen for incoming messages\r\n            _ = ReceiveMessages(client);\r\n            ChatMessage message = new ChatMessage()\r\n            {\r\n                Content = &quot;test&quot;,\r\n                Sender = &quot;test&quot;,\r\n                Type = MessageType.JOIN\r\n            };\r\n            \r\n            string jsonString = JsonSerializer.Serialize(message);\r\n            // Send a message to the server\r\n            await SendMessage(client, jsonString);\r\n            // Keep the console application running until interrupted\r\n            Console.ReadLine();\r\n\r\n            await client.CloseOutputAsync(WebSocketCloseStatus.NormalClosure, &quot;Console application closed&quot;, CancellationToken.None);\r\n        }\r\n    }\r\n\r\n    static async Task ReceiveMessages(ClientWebSocket client)\r\n    {\r\n        var buffer = new byte[1024];\r\n\r\n        while (client.State == WebSocketState.Open)\r\n        {\r\n            var result = await client.ReceiveAsync(new ArraySegment&lt;byte&gt;(buffer), CancellationToken.None);\r\n\r\n            if (result.MessageType == WebSocketMessageType.Text)\r\n            {\r\n                var messageBytes = new ArraySegment&lt;byte&gt;(buffer, 0, result.Count);\r\n                var message = Encoding.UTF8.GetString(messageBytes.ToArray());\r\n                Console.WriteLine(&quot;Received message: &quot; + message);\r\n            }\r\n        }\r\n    }\r\n\r\n    static async Task SendMessage(ClientWebSocket client, string message)\r\n    {\r\n        var messageBytes = Encoding.UTF8.GetBytes(message);\r\n        var buffer = new ArraySegment&lt;byte&gt;(messageBytes);\r\n\r\n        await client.SendAsync(buffer, WebSocketMessageType.Text, true, CancellationToken.None);\r\n    }\r\n}\r\n```","title":"Spring boot Websocket always returns 404","body":"<p>I am highly confused with spring boot websockets. I have followed this tutorial <a href=\"https://www.youtube.com/watch?v=TywlS9iAZCM&amp;t=2367s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=TywlS9iAZCM&amp;t=2367s</a> to create the Websocket backend. I wanted to test it with the Websocket capabilities of Postman and also created a console Application in C# to test and play around with the Websockets, however, i always get 404 back. This is really confusing for me since when i look into the logs of the spring boot application it looks like the Websocket request is always treated as a normal GET request, which also does not make a lot of sense to me. I already looked at this question <a href=\"https://stackoverflow.com/questions/53647987/spring-boot-websocket-api-404-not-found\">spring boot websocket api 404 not found</a> and this one <a href=\"https://stackoverflow.com/questions/28000900/spring-websocket-getting-404-not-found\">Spring websocket getting 404 not found</a> but in all tutorials i have watched so far nobody is using the Websocketconfig which implements WebSocketConfigurer and adding the @Controller annotation to my config did not change anything at all. What am i missing and what am i doing wrong?</p>\n<p>The logs:</p>\n<pre><code>2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'stompWebSocketHandlerMapping'\n2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'webSocketHandlerMapping'\n2023-07-11T11:11:23.890+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'resourceHandlerMapping'\n2023-07-11T11:11:23.892+02:00  INFO 19376 --- [           main] c.e.w.WebSocketTriesBackendApplication   : Started WebSocketTriesBackendApplication in 1.72 seconds (process running for 2.274)\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'springApplicationAdminRegistrar'\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'springApplicationAdminRegistrar'\n2023-07-11T11:11:23.893+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'applicationAvailability'\n2023-07-11T11:11:23.893+02:00 DEBUG 19376 --- [           main] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'springApplicationAdminRegistrar'\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'springApplicationAdminRegistrar'\n2023-07-11T11:11:23.894+02:00 TRACE 19376 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'applicationAvailability'\n2023-07-11T11:11:23.894+02:00 DEBUG 19376 --- [           main] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\n2023-07-11T11:12:23.659+02:00  INFO 19376 --- [MessageBroker-1] o.s.w.s.c.WebSocketMessageBrokerStats    : WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]\n2023-07-11T11:16:01.904+02:00  INFO 19376 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-07-11T11:16:01.904+02:00  INFO 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'multipartResolver'\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.multipart.support.StandardServletMultipartResolver@6e4d781\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'localeResolver'\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver@503209a1\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'themeResolver'\n2023-07-11T11:16:01.904+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.theme.FixedThemeResolver@614fac67\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'stompWebSocketHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'webSocketHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'welcomePageHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'welcomePageNotAcceptableHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'requestMappingHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'viewControllerHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'beanNameHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'routerFunctionMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'resourceHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'defaultServletHandlerMapping'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'requestMappingHandlerAdapter'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'handlerFunctionAdapter'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'httpRequestHandlerAdapter'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'simpleControllerHandlerAdapter'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'errorAttributes'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'handlerExceptionResolver'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'viewNameTranslator'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected DefaultRequestToViewNameTranslator\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'beanNameViewResolver'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'mvcViewResolver'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'defaultViewResolver'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'viewResolver'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'flashMapManager'\n2023-07-11T11:16:01.905+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected SessionFlashMapManager\n2023-07-11T11:16:01.905+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\n2023-07-11T11:16:01.905+02:00  INFO 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-07-11T11:16:01.908+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.w.s.f.OrderedRequestContextFilter  : Bound request context to thread: org.apache.catalina.connector.RequestFacade@4379a6f\n2023-07-11T11:16:01.910+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/ws/app/topic/public&quot;, parameters={}, headers={masked} in DispatcherServlet 'dispatcherServlet'\n2023-07-11T11:16:01.917+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.w.s.s.s.WebSocketHandlerMapping      : Mapped to HandlerExecutionChain with [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@78a0ff63] and 1 interceptors\n2023-07-11T11:16:01.925+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.w.s.s.t.h.DefaultSockJsService       : Processing transport request: GET http://localhost:8080/ws/app/topic/public\n2023-07-11T11:16:01.925+02:00  WARN 19376 --- [nio-8080-exec-1] o.s.w.s.s.t.h.DefaultSockJsService       : &quot;Unknown transport type for http://localhost:8080/ws/app/topic/public&quot;\n2023-07-11T11:16:01.926+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\n2023-07-11T11:16:01.926+02:00 DEBUG 19376 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND, headers={masked}\n2023-07-11T11:16:01.927+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'springApplicationAdminRegistrar'\n2023-07-11T11:16:01.927+02:00 TRACE 19376 --- [nio-8080-exec-1] o.s.b.w.s.f.OrderedRequestContextFilter  : Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@4379a6f\n\n</code></pre>\n<p>The WebsocketConfig:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer\n{\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry)\n    {\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry)\n    {\n        registry.addEndpoint(&quot;/ws&quot;).withSockJS();\n    }\n}\n</code></pre>\n<p>Eventlistener:</p>\n<pre><code>@Component\n@RequiredArgsConstructor\n@Slf4j\npublic class WebSocketEventListener\n{\n    private final SimpMessageSendingOperations messageTemplate;\n\n    @EventListener\n    public void HandleWebSocketDisconnectListener(SessionDisconnectEvent event)\n    {\n        StompHeaderAccessor headerAccessor = StompHeaderAccessor.wrap(event.getMessage());\n        String username = (String) headerAccessor.getSessionAttributes().get(&quot;username&quot;);\n\n        if(username != null)\n        {\n            log.info(&quot;User disconncted: &quot; + username);\n            var message = ChatMessage.builder()\n                    .type(MessageType.LEAVE)\n                    .sender(username)\n                    .build();\n\n            messageTemplate.convertAndSend(&quot;/topic/public&quot;, message);\n        }\n    }\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@Controller\npublic class ChatController\n{\n    @MessageMapping(&quot;/chat.SendMessage&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage SendMessage(@Payload ChatMessage message)\n    {\n        return message;\n    }\n\n    @MessageMapping(&quot;/chat.AddUser&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage AddUser(@Payload ChatMessage message, SimpMessageHeaderAccessor headerAccessor)\n    {\n        headerAccessor.getSessionAttributes().put(&quot;username&quot;, message.getSender());\n        return message;\n    }\n}\n</code></pre>\n<p>The method with which i am trying to access the WebSocket:</p>\n<pre><code>lass Program\n{\n    static async Task Main()\n    {\n        var endpointUrl = &quot;ws://localhost:8080/ws/app/topic/public&quot;; // WebSocket endpoint URL\n\n        using (var client = new ClientWebSocket())\n        {\n            await client.ConnectAsync(new Uri(endpointUrl), CancellationToken.None); // Connect to the WebSocket endpoint\n\n            // Start a separate task to listen for incoming messages\n            _ = ReceiveMessages(client);\n            ChatMessage message = new ChatMessage()\n            {\n                Content = &quot;test&quot;,\n                Sender = &quot;test&quot;,\n                Type = MessageType.JOIN\n            };\n            \n            string jsonString = JsonSerializer.Serialize(message);\n            // Send a message to the server\n            await SendMessage(client, jsonString);\n            // Keep the console application running until interrupted\n            Console.ReadLine();\n\n            await client.CloseOutputAsync(WebSocketCloseStatus.NormalClosure, &quot;Console application closed&quot;, CancellationToken.None);\n        }\n    }\n\n    static async Task ReceiveMessages(ClientWebSocket client)\n    {\n        var buffer = new byte[1024];\n\n        while (client.State == WebSocketState.Open)\n        {\n            var result = await client.ReceiveAsync(new ArraySegment&lt;byte&gt;(buffer), CancellationToken.None);\n\n            if (result.MessageType == WebSocketMessageType.Text)\n            {\n                var messageBytes = new ArraySegment&lt;byte&gt;(buffer, 0, result.Count);\n                var message = Encoding.UTF8.GetString(messageBytes.ToArray());\n                Console.WriteLine(&quot;Received message: &quot; + message);\n            }\n        }\n    }\n\n    static async Task SendMessage(ClientWebSocket client, string message)\n    {\n        var messageBytes = Encoding.UTF8.GetBytes(message);\n        var buffer = new ArraySegment&lt;byte&gt;(messageBytes);\n\n        await client.SendAsync(buffer, WebSocketMessageType.Text, true, CancellationToken.None);\n    }\n}\n</code></pre>\n"},{"tags":["java","static","constants","final","class-variables"],"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":10,"creation_date":1321010553,"post_id":8093230,"comment_id":9920788,"body_markdown":"Why would you want more than one instance to have its own copy of `FII`?","body":"Why would you want more than one instance to have its own copy of <code>FII</code>?"},{"owner":{"account_id":453984,"reputation":142640,"user_id":851273,"display_name":"Jon Lin"},"score":1,"creation_date":1321010684,"post_id":8093230,"comment_id":9920821,"body_markdown":"I can declare `final int FII = 2;` just fine.","body":"I can declare <code>final int FII = 2;</code> just fine."},{"owner":{"account_id":1634731,"reputation":3637,"user_id":1508529,"accept_rate":82,"display_name":"Mathias Bader"},"score":1,"creation_date":1438503742,"post_id":8093230,"comment_id":51471045,"body_markdown":"@JonLin: You can, but you shouldn&#39;t since it doesn&#39;t add value but only increases memory usage. Exception would be initialization of the constant in the constructor call - then each instance could have it&#39;s own constant value (constant after the constructor run) and could have a value like &#39;constructionTime&#39; or similar.","body":"@JonLin: You can, but you shouldn&#39;t since it doesn&#39;t add value but only increases memory usage. Exception would be initialization of the constant in the constructor call - then each instance could have it&#39;s own constant value (constant after the constructor run) and could have a value like &#39;constructionTime&#39; or similar."}],"answers":[{"tags":[],"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1321010524,"creation_date":1321010524,"answer_id":8093244,"question_id":8093230,"body_markdown":"It is simply so that you can access them without an instance of that class.\r\n\r\nRequiring that an instance be created just to access constant fields is a bit of a waste of resources.","title":"why are java constants declared static?","body":"<p>It is simply so that you can access them without an instance of that class.</p>\n\n<p>Requiring that an instance be created just to access constant fields is a bit of a waste of resources.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":1,"up_vote_count":46,"is_accepted":true,"score":45,"last_activity_date":1321010550,"creation_date":1321010550,"answer_id":8093252,"question_id":8093230,"body_markdown":"If it could vary by the instance of a class, then it&#39;s clearly not a *constant*. What would it mean to get a different value of pi for each instance of `Math` (not that `Math` even allows instances to be constructed)? Or a different case insensitive ordering for each instance of `String`?","title":"why are java constants declared static?","body":"<p>If it could vary by the instance of a class, then it's clearly not a <em>constant</em>. What would it mean to get a different value of pi for each instance of <code>Math</code> (not that <code>Math</code> even allows instances to be constructed)? Or a different case insensitive ordering for each instance of <code>String</code>?</p>\n"},{"comments":[{"owner":{"account_id":6742219,"reputation":3296,"user_id":5922757,"accept_rate":100,"display_name":"Jezor"},"score":1,"creation_date":1580468235,"post_id":8093375,"comment_id":106115824,"body_markdown":"&quot;If the constant might have different value for each object&quot; then by definition it is not a constant.","body":"&quot;If the constant might have different value for each object&quot; then by definition it is not a constant."},{"owner":{"account_id":7947305,"reputation":3476,"user_id":5999372,"accept_rate":89,"display_name":"Rain"},"score":2,"creation_date":1585201005,"post_id":8093375,"comment_id":107680330,"body_markdown":"@Jezor No, it&#39;s a constant. It&#39;s ok for objects of the same class to have the same constant with different values. &quot; for example the creation time of the object&quot;.","body":"@Jezor No, it&#39;s a constant. It&#39;s ok for objects of the same class to have the same constant with different values. &quot; for example the creation time of the object&quot;."},{"owner":{"account_id":6742219,"reputation":3296,"user_id":5922757,"accept_rate":100,"display_name":"Jezor"},"score":0,"creation_date":1585834757,"post_id":8093375,"comment_id":107906829,"body_markdown":"I see. Calling it a &quot;constant&quot; might be _technically correct_ but sounds rather strange. With this, every immutable object declared `final` is a constant, no matter the scope.","body":"I see. Calling it a &quot;constant&quot; might be <i>technically correct</i> but sounds rather strange. With this, every immutable object declared <code>final</code> is a constant, no matter the scope."},{"owner":{"account_id":8635634,"reputation":618,"user_id":6465925,"accept_rate":75,"display_name":"sss"},"score":0,"creation_date":1587712566,"post_id":8093375,"comment_id":108622677,"body_markdown":"@Rain Actually, as per java specs, A variable of primitive type or type String, that is final and initialized with a compile-time constant expression (&#167;15.28), is called a constant variable. Constants during creation of the objects beat the purpose of Compile time","body":"@Rain Actually, as per java specs, A variable of primitive type or type String, that is final and initialized with a compile-time constant expression (&#167;15.28), is called a constant variable. Constants during creation of the objects beat the purpose of Compile time"},{"owner":{"account_id":7947305,"reputation":3476,"user_id":5999372,"accept_rate":89,"display_name":"Rain"},"score":0,"creation_date":1587715142,"post_id":8093375,"comment_id":108623775,"body_markdown":"@SameerSinha It doesn&#39;t matter if a constant value was defined at compile time or run time, that doesn&#39;t change the fact that it&#39;s a constant(a value that cannot be changed after it&#39;s been initialized). For example, in PHP language we have `const` and we have `define` one will be evaluated at compile time and the other at run time but most importantly they both create a constant.","body":"@SameerSinha It doesn&#39;t matter if a constant value was defined at compile time or run time, that doesn&#39;t change the fact that it&#39;s a constant(a value that cannot be changed after it&#39;s been initialized). For example, in PHP language we have <code>const</code> and we have <code>define</code> one will be evaluated at compile time and the other at run time but most importantly they both create a constant."},{"owner":{"account_id":109994,"reputation":15573,"user_id":291240,"accept_rate":70,"display_name":"William Hu"},"score":0,"creation_date":1670982999,"post_id":8093375,"comment_id":131997445,"body_markdown":"If so then when the object was released then the constant property value still in memory, right?","body":"If so then when the object was released then the constant property value still in memory, right?"},{"owner":{"account_id":2120368,"reputation":425,"user_id":5097395,"accept_rate":39,"display_name":"karlihnos"},"score":0,"creation_date":1701162245,"post_id":8093375,"comment_id":136738036,"body_markdown":"@Jezor is right. If the constant might have any other value is clearly NOT a constant. In other words, immutable!","body":"@Jezor is right. If the constant might have any other value is clearly NOT a constant. In other words, immutable!"}],"tags":[],"owner":{"account_id":321035,"reputation":12292,"user_id":639616,"accept_rate":67,"display_name":"wannik"},"comment_count":7,"down_vote_count":2,"up_vote_count":117,"is_accepted":false,"score":115,"last_activity_date":1321011144,"creation_date":1321011144,"answer_id":8093375,"question_id":8093230,"body_markdown":"If a constant is not static, Java will allocate a memory for that constant in every object of the class (i.e., one copy of the constant per object).\r\n\r\nIf a constant is static, there will be only one copy of the constant for that class (i.e., one copy per class).\r\n\r\nTherefore, if the constant has only one value, it should declared static.\r\n\r\nIf the constant might have different value for each object, for example the creation time of the object, it should not be declared static.","title":"why are java constants declared static?","body":"<p>If a constant is not static, Java will allocate a memory for that constant in every object of the class (i.e., one copy of the constant per object).</p>\n\n<p>If a constant is static, there will be only one copy of the constant for that class (i.e., one copy per class).</p>\n\n<p>Therefore, if the constant has only one value, it should declared static.</p>\n\n<p>If the constant might have different value for each object, for example the creation time of the object, it should not be declared static.</p>\n"},{"tags":[],"owner":{"account_id":3424990,"reputation":111,"user_id":2870975,"display_name":"Dopefish"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593957052,"creation_date":1593790945,"answer_id":62718699,"question_id":8093230,"body_markdown":"&gt; Why are java constants declared static ?\r\n\r\n*Technically* they aren&#39;t, JLS defines constants as final constant expression (which are referred to but not formally in java as `compile time constant expression`). meaning a variable declared final which is initialized with a constant expression, meaning without static - https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4\r\n\r\n&gt; A constant variable is a final variable of primitive type or type String that is initialized with a constant expression.\r\n\r\nBut the specification does not address anything regarding **Constant Types** which java is all about, Classes and Objects - so Jon Skeet answer regarding Math example is missing one part, Math class is considered constant because you cannot instantiate it by making its constructor private.\r\n\r\nhttp://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java -\r\n\r\n\r\n    public final class Math {\r\n    \r\n    \r\n        /**\r\n    \r\n         * Don&#39;t let anyone instantiate this class.\r\n    \r\n         */\r\n    \r\n        private Math() {}\r\n    \r\n        public static final double PI = 3.14159265358979323846;\r\n\r\n    }\r\n\r\nTo support the Type itself being constant you need to make sure its state is also constant, but only for its members who are mutable and are exposed to changes from outside the type.\r\n\r\nFor example the literal PI is made public so it&#39;s available from outside the type. So to make sure it wont be changed from the outside it is made final, and also static so it will be part of the [Class Class&amp;lt;Math&amp;gt;][1] instance and could be exposed for use outside Math without the class being (explicitly) instantiated.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html","title":"why are java constants declared static?","body":"<blockquote>\n<p>Why are java constants declared static ?</p>\n</blockquote>\n<p><em>Technically</em> they aren't, JLS defines constants as final constant expression (which are referred to but not formally in java as <code>compile time constant expression</code>). meaning a variable declared final which is initialized with a constant expression, meaning without static - <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4</a></p>\n<blockquote>\n<p>A constant variable is a final variable of primitive type or type String that is initialized with a constant expression.</p>\n</blockquote>\n<p>But the specification does not address anything regarding <strong>Constant Types</strong> which java is all about, Classes and Objects - so Jon Skeet answer regarding Math example is missing one part, Math class is considered constant because you cannot instantiate it by making its constructor private.</p>\n<p><a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java\" rel=\"nofollow noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java</a> -</p>\n<pre><code>public final class Math {\n\n\n    /**\n\n     * Don't let anyone instantiate this class.\n\n     */\n\n    private Math() {}\n\n    public static final double PI = 3.14159265358979323846;\n\n}\n</code></pre>\n<p>To support the Type itself being constant you need to make sure its state is also constant, but only for its members who are mutable and are exposed to changes from outside the type.</p>\n<p>For example the literal PI is made public so it's available from outside the type. So to make sure it wont be changed from the outside it is made final, and also static so it will be part of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\" rel=\"nofollow noreferrer\">Class Class&lt;Math&gt;</a> instance and could be exposed for use outside Math without the class being (explicitly) instantiated.</p>\n"}],"owner":{"account_id":213282,"reputation":545,"user_id":466591,"accept_rate":33,"display_name":"Vaibhav"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45185,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":8093252,"answer_count":4,"score":40,"last_activity_date":1689067115,"creation_date":1321010466,"question_id":8093230,"body_markdown":"Why are Java constants declared `static`?\r\n\r\n    class Foo {\r\n        static final int FII = 2 ;\r\n    }\r\n\r\nIn this example I understand the use of `final`, But why does it have to be static? Why should it be a class variable and not an instance variable?","title":"why are java constants declared static?","body":"<p>Why are Java constants declared <code>static</code>?</p>\n<pre><code>class Foo {\n    static final int FII = 2 ;\n}\n</code></pre>\n<p>In this example I understand the use of <code>final</code>, But why does it have to be static? Why should it be a class variable and not an instance variable?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":17582942,"reputation":108,"user_id":12756335,"display_name":"Rigsto"},"score":0,"creation_date":1688962079,"post_id":76650610,"comment_id":135139953,"body_markdown":"Can you share what your `complaintService` looks like?","body":"Can you share what your <code>complaintService</code> looks like?"},{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1688963461,"post_id":76650610,"comment_id":135140070,"body_markdown":"Service code added.","body":"Service code added."}],"answers":[{"comments":[{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1688971324,"post_id":76650673,"comment_id":135141014,"body_markdown":"So as my understanding if I use &quot;fetch = FetchType.LAZY&quot; and call JPA: &quot;typeRepository.findAll();&quot; -&gt; It will return only Type List. But I am getting Type with Nature data List.","body":"So as my understanding if I use &quot;fetch = FetchType.LAZY&quot; and call JPA: &quot;typeRepository.findAll();&quot; -&gt; It will return only Type List. But I am getting Type with Nature data List."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1688972467,"post_id":76650673,"comment_id":135141193,"body_markdown":"You shouldn&#39;t get Type populated with Nature, when fetch type is set to lazy in your entity. How are you checking this? Within an upright transaction you may lazyload the natures unintentionally. Also, when you set a breakpoint and check by looking into the list, the data gets loaded automatically.","body":"You shouldn&#39;t get Type populated with Nature, when fetch type is set to lazy in your entity. How are you checking this? Within an upright transaction you may lazyload the natures unintentionally. Also, when you set a breakpoint and check by looking into the list, the data gets loaded automatically."}],"tags":[],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688963754,"creation_date":1688962996,"answer_id":76650673,"question_id":76650610,"body_markdown":"It is by default bad practice to fetch eagerly. Switch to fetch type lazy and implement two service methods, one to fetch all (standard via JPA), and one with Nature, done like this in JPA repository:\r\n\r\n```java\r\n    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH, attributePaths = &quot;natures&quot;)\r\n    @Query(&quot;&quot;&quot;\r\n            SELECT type\r\n            FROM Type type\r\n            &quot;&quot;&quot;)\r\n    List&lt;Type&gt; findAllWithNature();\r\n```\r\n\r\nThe `EntityGraph` annotation will tell Hibernate to fetch the natures as well and then populates the entities with the natures. All this will be done automagically without any further ado.\r\n\r\nAnd into your service goes this:\r\n\r\n```java\r\npublic List&lt;Type&gt; getAllComplaintTypesWithNatures() {\r\n    List&lt;Type&gt; typeListWithNature = typeRepository.findAllWithNature();\r\n    return typeListWithNature;\r\n}\r\n```\r\n\r\nAlso you may consider to use another keyword other than `type`, since this can lead to confusion or problems cause type is reserved in many languages.","title":"How do I skip relational data in Spring data JPA?","body":"<p>It is by default bad practice to fetch eagerly. Switch to fetch type lazy and implement two service methods, one to fetch all (standard via JPA), and one with Nature, done like this in JPA repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH, attributePaths = &quot;natures&quot;)\n    @Query(&quot;&quot;&quot;\n            SELECT type\n            FROM Type type\n            &quot;&quot;&quot;)\n    List&lt;Type&gt; findAllWithNature();\n</code></pre>\n<p>The <code>EntityGraph</code> annotation will tell Hibernate to fetch the natures as well and then populates the entities with the natures. All this will be done automagically without any further ado.</p>\n<p>And into your service goes this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;Type&gt; getAllComplaintTypesWithNatures() {\n    List&lt;Type&gt; typeListWithNature = typeRepository.findAllWithNature();\n    return typeListWithNature;\n}\n</code></pre>\n<p>Also you may consider to use another keyword other than <code>type</code>, since this can lead to confusion or problems cause type is reserved in many languages.</p>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688981136,"creation_date":1688981136,"answer_id":76652404,"question_id":76650610,"body_markdown":"As @Slevin said, it&#39;s a bad practice to use eager fetch type on entities, instead use `@EntityGraph` to fetch data eagerly when needed.\r\n\r\nAdditionally, to fetch only needed data I suggest you use projections. Projection can be class-based and interface-based. What&#39;s the difference? Class-based projections don&#39;t support nested data, whereas interface-based projections fetch all fields from the database and map the data programmatically in case of nested projections. \r\n\r\nFor example, when you need types without natures, you can define the following projection:\r\n```java\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\npublic class TypeDto {\r\n\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n}\r\n```\r\nThen, add the method below to the repository:\r\n```java\r\n   List&lt;TypeDto&gt; findAllTypeDtosBy();\r\n```\r\n\r\nFor more details about projections refer to [the blog post][1].\r\n\r\n\r\n  [1]: https://thorben-janssen.com/spring-data-jpa-query-projections/","title":"How do I skip relational data in Spring data JPA?","body":"<p>As @Slevin said, it's a bad practice to use eager fetch type on entities, instead use <code>@EntityGraph</code> to fetch data eagerly when needed.</p>\n<p>Additionally, to fetch only needed data I suggest you use projections. Projection can be class-based and interface-based. What's the difference? Class-based projections don't support nested data, whereas interface-based projections fetch all fields from the database and map the data programmatically in case of nested projections.</p>\n<p>For example, when you need types without natures, you can define the following projection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@AllArgsConstructor\npublic class TypeDto {\n\n    private Long id;\n\n    private String name;\n\n}\n</code></pre>\n<p>Then, add the method below to the repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   List&lt;TypeDto&gt; findAllTypeDtosBy();\n</code></pre>\n<p>For more details about projections refer to <a href=\"https://thorben-janssen.com/spring-data-jpa-query-projections/\" rel=\"nofollow noreferrer\">the blog post</a>.</p>\n"}],"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689067054,"creation_date":1688961551,"question_id":76650610,"body_markdown":"I have two Entities **Type** and **Nature** given below.\r\n\r\n\r\n**Type:**\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@Table(name = &quot;types&quot;)\r\npublic class Type {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;type_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private List&lt;Nature&gt; natures;\r\n}\r\n```\r\n\r\n**Nature:**\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@Table(name = &quot;natures&quot;)\r\npublic class Nature {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    private String description;\r\n}\r\n```\r\n\r\nFor some cases, I need to get **Type** data with **Nature** data.\r\nSo my `Controller`, `Service` looks like below.\r\n\r\n**Controller:**\r\n```java\r\n@GetMapping(&quot;/v1/complaints/types&quot;)\r\npublic ResponseEntity&lt;List&lt;Type&gt;&gt; getAllType() {\r\n    List&lt;Type&gt; typesList = complaintService.getAllComplaintTypes();\r\n    return new ResponseEntity&lt;&gt;(typesList, HttpStatus.OK);\r\n}\r\n```\r\n\r\n**Service:**\r\n```java\r\npublic List&lt;Type&gt; getAllComplaintTypes() {\r\n    List&lt;Type&gt; typeList = typeRepository.findAll();\r\n    return typeList;\r\n}\r\n```\r\n\r\nThat gives me data like this:\r\n```\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;name&quot;: &quot;demo type name&quot;,\r\n        &quot;natures&quot;: [\r\n            {\r\n                &quot;id&quot;: 12,\r\n                &quot;name&quot;: &quot;nature name 1&quot;,\r\n                &quot;description&quot;: &quot;nature description 1&quot;\r\n            },\r\n            {\r\n                &quot;id&quot;: 14,\r\n                &quot;name&quot;: &quot;nature name 2&quot;,\r\n                &quot;description&quot;: &quot;nature name 2&quot;\r\n            }\r\n        ]\r\n    }\r\n```\r\n\r\nBut in some other cases I need only **Type** data without **Nature** data.\r\nHow can I avoid the Nature data?","title":"How do I skip relational data in Spring data JPA?","body":"<p>I have two Entities <strong>Type</strong> and <strong>Nature</strong> given below.</p>\n<p><strong>Type:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;types&quot;)\npublic class Type {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;type_id&quot;, referencedColumnName = &quot;id&quot;)\n    private List&lt;Nature&gt; natures;\n}\n</code></pre>\n<p><strong>Nature:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;natures&quot;)\npublic class Nature {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    private String description;\n}\n</code></pre>\n<p>For some cases, I need to get <strong>Type</strong> data with <strong>Nature</strong> data.\nSo my <code>Controller</code>, <code>Service</code> looks like below.</p>\n<p><strong>Controller:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/v1/complaints/types&quot;)\npublic ResponseEntity&lt;List&lt;Type&gt;&gt; getAllType() {\n    List&lt;Type&gt; typesList = complaintService.getAllComplaintTypes();\n    return new ResponseEntity&lt;&gt;(typesList, HttpStatus.OK);\n}\n</code></pre>\n<p><strong>Service:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;Type&gt; getAllComplaintTypes() {\n    List&lt;Type&gt; typeList = typeRepository.findAll();\n    return typeList;\n}\n</code></pre>\n<p>That gives me data like this:</p>\n<pre><code>    {\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;demo type name&quot;,\n        &quot;natures&quot;: [\n            {\n                &quot;id&quot;: 12,\n                &quot;name&quot;: &quot;nature name 1&quot;,\n                &quot;description&quot;: &quot;nature description 1&quot;\n            },\n            {\n                &quot;id&quot;: 14,\n                &quot;name&quot;: &quot;nature name 2&quot;,\n                &quot;description&quot;: &quot;nature name 2&quot;\n            }\n        ]\n    }\n</code></pre>\n<p>But in some other cases I need only <strong>Type</strong> data without <strong>Nature</strong> data.\nHow can I avoid the Nature data?</p>\n"},{"tags":["java","arrays","json","performance","maintainability"],"comments":[{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":2,"creation_date":1437114817,"post_id":31469441,"comment_id":50905076,"body_markdown":"How are you comparing both this approach. In JSON based you are putting values as id and in array based you are putting it as array. What is your requirement?","body":"How are you comparing both this approach. In JSON based you are putting values as id and in array based you are putting it as array. What is your requirement?"},{"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"score":1,"creation_date":1437115121,"post_id":31469441,"comment_id":50905214,"body_markdown":"In Javascript I can get the object using the `id`(for JSON), but in case of array I have to loop through the whole list and match the `id` property of each object, which can be a bottleneck in case of large data sets. So JSON works fine for me in browser but I am not sure is creating the same structure by Java will have any performance issues.","body":"In Javascript I can get the object using the <code>id</code>(for JSON), but in case of array I have to loop through the whole list and match the <code>id</code> property of each object, which can be a bottleneck in case of large data sets. So JSON works fine for me in browser but I am not sure is creating the same structure by Java will have any performance issues."},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":1,"creation_date":1437115213,"post_id":31469441,"comment_id":50905259,"body_markdown":"How will your JSON approach support multiple user entries?","body":"How will your JSON approach support multiple user entries?"},{"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"score":1,"creation_date":1437116254,"post_id":31469441,"comment_id":50905757,"body_markdown":"@NamanGala: Please take a look at the updated JSON sample.","body":"@NamanGala: Please take a look at the updated JSON sample."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1437117273,"post_id":31469441,"comment_id":50906214,"body_markdown":"In the backend, you just need a `Map&lt;Long, User&gt;`. But I would simply use an array (in JSON) and a List (on the backend): usually, the order matters. And a Map won&#39;t give you any order. If you&#39;re so worried about performance, transform the array into a map in JavaScript.","body":"In the backend, you just need a <code>Map&lt;Long, User&gt;</code>. But I would simply use an array (in JSON) and a List (on the backend): usually, the order matters. And a Map won&#39;t give you any order. If you&#39;re so worried about performance, transform the array into a map in JavaScript."},{"owner":{"account_id":1521886,"reputation":17478,"user_id":2224996,"accept_rate":87,"display_name":"maja"},"score":2,"creation_date":1437118487,"post_id":31469441,"comment_id":50906834,"body_markdown":"Note that JSON always has one root element, which can either be an object `{}` or an array `[]`. So the terminology `Json based` vs `Array based` should actually be `(Json)-Object based` vs. `(Json)-Array based`","body":"Note that JSON always has one root element, which can either be an object <code>{}</code> or an array <code>[]</code>. So the terminology <code>Json based</code> vs <code>Array based</code> should actually be <code>(Json)-Object based</code> vs. <code>(Json)-Array based</code>"},{"owner":{"account_id":1188298,"reputation":13219,"user_id":1267663,"accept_rate":85,"display_name":"Whymarrh"},"score":0,"creation_date":1437527855,"post_id":31469441,"comment_id":51062710,"body_markdown":"If performance is of concern, consider also: [JSON Compression: Transpose &amp; Binary](http://mainroach.blogspot.ca/2013/08/json-compression-transpose-binary.html)","body":"If performance is of concern, consider also: <a href=\"http://mainroach.blogspot.ca/2013/08/json-compression-transpose-binary.html\" rel=\"nofollow noreferrer\">JSON Compression: Transpose &amp; Binary</a>"}],"answers":[{"comments":[{"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"score":0,"creation_date":1437117713,"post_id":31470302,"comment_id":50906407,"body_markdown":"These are nice pints but I am more concerned about what happens at the server.","body":"These are nice pints but I am more concerned about what happens at the server."},{"owner":{"account_id":1521886,"reputation":17478,"user_id":2224996,"accept_rate":87,"display_name":"maja"},"score":2,"creation_date":1437117870,"post_id":31470302,"comment_id":50906486,"body_markdown":"The hard-code part is not really a problem. You can also iterate an object `for(key in obj)` and you can make the key values configurable. But I doubt that this would even be neccessary.","body":"The hard-code part is not really a problem. You can also iterate an object <code>for(key in obj)</code> and you can make the key values configurable. But I doubt that this would even be neccessary."},{"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"score":0,"creation_date":1437117990,"post_id":31470302,"comment_id":50906551,"body_markdown":"@maja: Actually I don&#39;t have to iterate over the key of objects. I already have the keys(which are not hard coded).","body":"@maja: Actually I don&#39;t have to iterate over the key of objects. I already have the keys(which are not hard coded)."},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1437118130,"post_id":31470302,"comment_id":50906630,"body_markdown":"As pointed out by @JBNizet, If order is important then array based approach is required.","body":"As pointed out by @JBNizet, If order is important then array based approach is required."},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1437118235,"post_id":31470302,"comment_id":50906693,"body_markdown":"@maja, in that case, both the approach are same, you are iterating in both the cases.","body":"@maja, in that case, both the approach are same, you are iterating in both the cases."},{"owner":{"account_id":1521886,"reputation":17478,"user_id":2224996,"accept_rate":87,"display_name":"maja"},"score":0,"creation_date":1437118626,"post_id":31470302,"comment_id":50906893,"body_markdown":"@NamanGala Yes. If the client doesn&#39;t know which users it will receive (which is usually the case), it has to iterate in both cases. Since Arrays are actually special Objects in JavaScript, there won&#39;t be any significant performance overhead on the client side though.","body":"@NamanGala Yes. If the client doesn&#39;t know which users it will receive (which is usually the case), it has to iterate in both cases. Since Arrays are actually special Objects in JavaScript, there won&#39;t be any significant performance overhead on the client side though."},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1437118755,"post_id":31470302,"comment_id":50906975,"body_markdown":"@maja, you are right, and we should not worry about client side performance either.","body":"@maja, you are right, and we should not worry about client side performance either."},{"owner":{"account_id":1521886,"reputation":17478,"user_id":2224996,"accept_rate":87,"display_name":"maja"},"score":0,"creation_date":1437119016,"post_id":31470302,"comment_id":50907119,"body_markdown":"@NamanGala That&#39;s why I posted it as a comment, not an answer^^. For the client side it&#39;s completly irrelevant how the data is presented. Only the network overhead is slightly bigger in case of objects, especially if the id&#39;s are very long. What really matters are the semantics.","body":"@NamanGala That&#39;s why I posted it as a comment, not an answer^^. For the client side it&#39;s completly irrelevant how the data is presented. Only the network overhead is slightly bigger in case of objects, especially if the id&#39;s are very long. What really matters are the semantics."}],"tags":[],"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"comment_count":8,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1674760747,"creation_date":1437117309,"answer_id":31470302,"question_id":31469441,"body_markdown":"This is a totally subjective question. There might be many other points, but let me point out a few below:\r\n\r\n**JSON based approach:**\r\nIf I am not wrong then this will be implemented using `Map` on server side.\r\n\r\n**Advantage:** In JavaScript you can directly use `users.id1`, `users.id2`, i.e. no need of iteration\r\n\r\n**Disadvantage:** On the client side, somehow you will need the ids to be  present in your JSON, i.e. either hard coding them or using some dynamic approach which will tell you which id is present in your JSON.\r\n\r\n----------\r\n\r\n**Array Based approach:** If I am not wrong then this will be implemented using `Array`/`List` on server side.\r\n\r\n**Advantage:**\r\n\r\n 1. On client side, you can directly iterate through array, without\r\n    worrying in advance about which id is present inside it i.e. no hard\r\n    coding.\r\n 2. As pointed out by **@JBNizet**, the array based approach will maintain the order.\r\n\r\n**Disadvantage:** If you want to fetch single id then you will need to iterate through the array.\r\n\r\nGenerally we don&#39;t send much information on the client side, so array based approach will not create any problem. And **transforming an array into a map is possible on both sides (server and client)** if you want an id based approach.","title":"Array of objects vs Object of Objects","body":"<p>This is a totally subjective question. There might be many other points, but let me point out a few below:</p>\n<p><strong>JSON based approach:</strong>\nIf I am not wrong then this will be implemented using <code>Map</code> on server side.</p>\n<p><strong>Advantage:</strong> In JavaScript you can directly use <code>users.id1</code>, <code>users.id2</code>, i.e. no need of iteration</p>\n<p><strong>Disadvantage:</strong> On the client side, somehow you will need the ids to be  present in your JSON, i.e. either hard coding them or using some dynamic approach which will tell you which id is present in your JSON.</p>\n<hr />\n<p><strong>Array Based approach:</strong> If I am not wrong then this will be implemented using <code>Array</code>/<code>List</code> on server side.</p>\n<p><strong>Advantage:</strong></p>\n<ol>\n<li>On client side, you can directly iterate through array, without\nworrying in advance about which id is present inside it i.e. no hard\ncoding.</li>\n<li>As pointed out by <strong>@JBNizet</strong>, the array based approach will maintain the order.</li>\n</ol>\n<p><strong>Disadvantage:</strong> If you want to fetch single id then you will need to iterate through the array.</p>\n<p>Generally we don't send much information on the client side, so array based approach will not create any problem. And <strong>transforming an array into a map is possible on both sides (server and client)</strong> if you want an id based approach.</p>\n"},{"tags":[],"owner":{"account_id":1521886,"reputation":17478,"user_id":2224996,"accept_rate":87,"display_name":"maja"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1674760812,"creation_date":1437118123,"answer_id":31470532,"question_id":31469441,"body_markdown":"On the server side, Arrays are stored as simple Lists: `ArrayList&lt;Content&gt;`, while Objects are either stored as maps: `HashMap&lt;String, Content&gt;` or, mostly, as Java Objects.\r\n\r\nIn order to convert Java Entities to and from JSON, you can take a look at the [Jackson][1] project which does all that for you.\r\n\r\nI wouldn&#39;t worry about any performance differences between those two variants. It&#39;s more important to have an understandable, semantic API, so you should base your decision on the business case rather than performance.\r\n\r\n\r\nLooking at your example, I think an `Array` is the better approach, since you want to return a list of users which are all equal. Sending the id twice makes no sense imho and increases the amount of data that has to be transmitted.\r\n\r\n\r\nFurthermore, since `Arrays` are much simpler to store and to iterate in Java, they should also provide better performance than Objects.\r\n\r\n**Some general differences:**\r\n\r\n - Arrays preserve the order\r\n - Arrays can contain duplicate entries\r\n - Objects often have a bigger storage/network overhead\r\n - Arrays are faster to iterate (on the server side)\r\n\r\n  [1]: https://github.com/FasterXML/jackson","title":"Array of objects vs Object of Objects","body":"<p>On the server side, Arrays are stored as simple Lists: <code>ArrayList&lt;Content&gt;</code>, while Objects are either stored as maps: <code>HashMap&lt;String, Content&gt;</code> or, mostly, as Java Objects.</p>\n<p>In order to convert Java Entities to and from JSON, you can take a look at the <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a> project which does all that for you.</p>\n<p>I wouldn't worry about any performance differences between those two variants. It's more important to have an understandable, semantic API, so you should base your decision on the business case rather than performance.</p>\n<p>Looking at your example, I think an <code>Array</code> is the better approach, since you want to return a list of users which are all equal. Sending the id twice makes no sense imho and increases the amount of data that has to be transmitted.</p>\n<p>Furthermore, since <code>Arrays</code> are much simpler to store and to iterate in Java, they should also provide better performance than Objects.</p>\n<p><strong>Some general differences:</strong></p>\n<ul>\n<li>Arrays preserve the order</li>\n<li>Arrays can contain duplicate entries</li>\n<li>Objects often have a bigger storage/network overhead</li>\n<li>Arrays are faster to iterate (on the server side)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3273973,"reputation":5801,"user_id":2756574,"accept_rate":89,"display_name":"Sebastian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437371052,"creation_date":1437371052,"answer_id":31509502,"question_id":31469441,"body_markdown":"One big disadvantage of your first &quot;JSON based&quot; notation that comes to mind is that some frameworks will have problems with (de)serialization of this. For example the DataContractSerializer (C# .NET) will expect the fields `id1` and `id2` to be defined (hardcoded) in the class of your objects `users`. I&#39;m not sure if this applies to some Java frameworks, too. Maybe the framework will you use can deserialze it as a HashMap instead.\r\n\r\nAltogether I&#39;d find the array notation much more intuitive to work with when it comes to iteration etc.","title":"Array of objects vs Object of Objects","body":"<p>One big disadvantage of your first \"JSON based\" notation that comes to mind is that some frameworks will have problems with (de)serialization of this. For example the DataContractSerializer (C# .NET) will expect the fields <code>id1</code> and <code>id2</code> to be defined (hardcoded) in the class of your objects <code>users</code>. I'm not sure if this applies to some Java frameworks, too. Maybe the framework will you use can deserialze it as a HashMap instead.</p>\n\n<p>Altogether I'd find the array notation much more intuitive to work with when it comes to iteration etc.</p>\n"},{"tags":[],"owner":{"account_id":6669671,"reputation":53,"user_id":5146137,"display_name":"Foxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437775619,"creation_date":1437775297,"answer_id":31620462,"question_id":31469441,"body_markdown":"You can use `object[property]` [notation][1] to access or set properties in an object in JavaScript.\r\n\r\nGo with *array based* approach at the backend, and convert the array to a map (*JSON based* as you refer to it) in the front end.\r\n\r\n    var list = [{id: &quot;id1&quot;, value: &quot;One&quot;}, {id: &quot;id2&quot;, value: &quot;Two&quot;}]\r\n    var map = {};\r\n    list.forEach(function (item) { map[item.id] = item });\r\n    map.get(&quot;id1&quot;)\r\n\r\nIf your list changes, you can get the new list from backend and update your map in UI.\r\n\r\nThis way your backend is faster to respond as it does not have to convert list to a map. Your front end will do a O(n) iteration *once* over the list to convert it to a map. But that is a small price compared to O(n) you will pay every time you search on a list.\r\n\r\nIf you will be doing get by id predominantly on your data at the back end go with *JSON Based* at the backend itself (you can use `LinkedHashMap` to preserve order).\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects","title":"Array of objects vs Object of Objects","body":"<p>You can use <code>object[property]</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects\" rel=\"nofollow\">notation</a> to access or set properties in an object in JavaScript.</p>\n\n<p>Go with <em>array based</em> approach at the backend, and convert the array to a map (<em>JSON based</em> as you refer to it) in the front end.</p>\n\n<pre><code>var list = [{id: \"id1\", value: \"One\"}, {id: \"id2\", value: \"Two\"}]\nvar map = {};\nlist.forEach(function (item) { map[item.id] = item });\nmap.get(\"id1\")\n</code></pre>\n\n<p>If your list changes, you can get the new list from backend and update your map in UI.</p>\n\n<p>This way your backend is faster to respond as it does not have to convert list to a map. Your front end will do a O(n) iteration <em>once</em> over the list to convert it to a map. But that is a small price compared to O(n) you will pay every time you search on a list.</p>\n\n<p>If you will be doing get by id predominantly on your data at the back end go with <em>JSON Based</em> at the backend itself (you can use <code>LinkedHashMap</code> to preserve order).</p>\n"},{"tags":[],"owner":{"account_id":3412746,"reputation":2578,"user_id":2862341,"display_name":"Ravindra HV"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437848847,"creation_date":1437848847,"answer_id":31629757,"question_id":31469441,"body_markdown":"Both approaches have their pros and cons and depends on what is it that you are looking at.\r\n\r\nThe array approach is easy to serialize and is more &#39;framework&#39; friendly (you can add beans to a list and serialize the list and you are done). This allows, for example, a web-container to return the response without requiring any customization. This is likely to be supported out-of-the-box by most frameworks.\r\n\r\nOn the other hand, the object based approach is more difficult to generate (in relative terms) but its easier to lookup given the key is known.\r\n\r\nSo for ease of implementation (by producer), go for the array based approach. For ease of use (consumed by clients) go for object based approach.","title":"Array of objects vs Object of Objects","body":"<p>Both approaches have their pros and cons and depends on what is it that you are looking at.</p>\n\n<p>The array approach is easy to serialize and is more 'framework' friendly (you can add beans to a list and serialize the list and you are done). This allows, for example, a web-container to return the response without requiring any customization. This is likely to be supported out-of-the-box by most frameworks.</p>\n\n<p>On the other hand, the object based approach is more difficult to generate (in relative terms) but its easier to lookup given the key is known.</p>\n\n<p>So for ease of implementation (by producer), go for the array based approach. For ease of use (consumed by clients) go for object based approach.</p>\n"},{"comments":[{"owner":{"account_id":3665189,"reputation":2509,"user_id":3053838,"accept_rate":50,"display_name":"wallop"},"score":2,"creation_date":1542145974,"post_id":53216882,"comment_id":93461878,"body_markdown":"Can I know why the negative voting? I think stackoverflow should make it compulsory to comment for negative voting so that people are aware what their mistake it.","body":"Can I know why the negative voting? I think stackoverflow should make it compulsory to comment for negative voting so that people are aware what their mistake it."}],"tags":[],"owner":{"account_id":3665189,"reputation":2509,"user_id":3053838,"accept_rate":50,"display_name":"wallop"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1689066986,"creation_date":1541714901,"answer_id":53216882,"question_id":31469441,"body_markdown":"Along with all the above technical differences, I think there is a fundamental difference in the purpose and meaning of an `Object` and an `Array`. \r\n\r\n1. The properties of an object **DESCRIBE/DEFINE** the object whereas \r\n2. The elements of an array do **NOT DESCRIBE/DEFINE** the array, on the contrary, the array defines what its contents are.\r\nDo note - I am not talking about technical aspects. You can have any combinations technically but semantically each has its own purpose.\r\n\r\n* For example a card holder. Each card does **NOT DESCRIBE/DEFINE** the cardholder. But the cardholder does define its purpose - that it holds only cards.\r\n\r\n* An Object is used to represent an entity and its properties **DESCRIBE/DEFINE** the entity. Take the same example of a Card. A card has properties like color, number which **DESCRIBE/DEFINE** what the card is. \r\n\r\nFor your above example:\r\n\r\n1. Each object which represents a person **is defined by the properties** `id`, `firstName`, and `lastName`.\r\n\r\n2. A list of these persons cannot be an object of objects because **each id does not describe the object of objects**. So\r\n\r\n```js\r\n&quot;users&quot;:[\r\n    {\r\n        &quot;id&quot;: &quot;id&quot;,\r\n        &quot;key2&quot;: &quot;value2&quot;,\r\n        &quot;key3&quot;: &quot;value3&quot;\r\n    },\r\n    {\r\n        &quot;id&quot;: &quot;id&quot;,\r\n        &quot;key2&quot;: &quot;value2&quot;,\r\n        &quot;key3&quot;: &quot;value3&quot;\r\n    }\r\n]\r\n```\r\n\r\nis a better representation than\r\n\r\n```js\r\n&quot;users&quot;: {\r\n    &quot;id1&quot;: {\r\n        &quot;id&quot;: &quot;id1&quot;,\r\n        &quot;firstname&quot;: &quot;firstname1&quot;,\r\n        &quot;lastname&quot;: &quot;lastname1&quot;\r\n    },\r\n    &quot;id2&quot;: {\r\n        &quot;id&quot;: &quot;id2&quot;,\r\n        &quot;firstaame&quot;: &quot;firstname2&quot;,\r\n        &quot;lastname&quot;: &quot;lastname2&quot;\r\n    }\r\n}\r\n```\r\neven though technically you can use either.\r\nI hope I was able to convey (put into words) my thinking in the proper manner.\r\n\r\n","title":"Array of objects vs Object of Objects","body":"<p>Along with all the above technical differences, I think there is a fundamental difference in the purpose and meaning of an <code>Object</code> and an <code>Array</code>.</p>\n<ol>\n<li>The properties of an object <strong>DESCRIBE/DEFINE</strong> the object whereas</li>\n<li>The elements of an array do <strong>NOT DESCRIBE/DEFINE</strong> the array, on the contrary, the array defines what its contents are.\nDo note - I am not talking about technical aspects. You can have any combinations technically but semantically each has its own purpose.</li>\n</ol>\n<ul>\n<li><p>For example a card holder. Each card does <strong>NOT DESCRIBE/DEFINE</strong> the cardholder. But the cardholder does define its purpose - that it holds only cards.</p>\n</li>\n<li><p>An Object is used to represent an entity and its properties <strong>DESCRIBE/DEFINE</strong> the entity. Take the same example of a Card. A card has properties like color, number which <strong>DESCRIBE/DEFINE</strong> what the card is.</p>\n</li>\n</ul>\n<p>For your above example:</p>\n<ol>\n<li><p>Each object which represents a person <strong>is defined by the properties</strong> <code>id</code>, <code>firstName</code>, and <code>lastName</code>.</p>\n</li>\n<li><p>A list of these persons cannot be an object of objects because <strong>each id does not describe the object of objects</strong>. So</p>\n</li>\n</ol>\n<pre class=\"lang-js prettyprint-override\"><code>&quot;users&quot;:[\n    {\n        &quot;id&quot;: &quot;id&quot;,\n        &quot;key2&quot;: &quot;value2&quot;,\n        &quot;key3&quot;: &quot;value3&quot;\n    },\n    {\n        &quot;id&quot;: &quot;id&quot;,\n        &quot;key2&quot;: &quot;value2&quot;,\n        &quot;key3&quot;: &quot;value3&quot;\n    }\n]\n</code></pre>\n<p>is a better representation than</p>\n<pre class=\"lang-js prettyprint-override\"><code>&quot;users&quot;: {\n    &quot;id1&quot;: {\n        &quot;id&quot;: &quot;id1&quot;,\n        &quot;firstname&quot;: &quot;firstname1&quot;,\n        &quot;lastname&quot;: &quot;lastname1&quot;\n    },\n    &quot;id2&quot;: {\n        &quot;id&quot;: &quot;id2&quot;,\n        &quot;firstaame&quot;: &quot;firstname2&quot;,\n        &quot;lastname&quot;: &quot;lastname2&quot;\n    }\n}\n</code></pre>\n<p>even though technically you can use either.\nI hope I was able to convey (put into words) my thinking in the proper manner.</p>\n"}],"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24268,"favorite_count":0,"down_vote_count":0,"up_vote_count":69,"accepted_answer_id":31470302,"answer_count":6,"score":69,"last_activity_date":1689066986,"creation_date":1437113820,"question_id":31469441,"body_markdown":"The issue is to decide the trade offs between the following notations:\r\n\r\n**JSON based**:\r\n\r\n    &quot;users&quot;: {\r\n        &quot;id1&quot;: {\r\n            &quot;id&quot;: &quot;id1&quot;,\r\n            &quot;firstname&quot;: &quot;firstname1&quot;,\r\n            &quot;lastname&quot;: &quot;lastname1&quot;\r\n        },\r\n        &quot;id2&quot;: {\r\n            &quot;id&quot;: &quot;id2&quot;,\r\n            &quot;firstaame&quot;: &quot;firstname2&quot;,\r\n            &quot;lastname&quot;: &quot;lastname2&quot;\r\n        }\r\n    }\r\n\r\n**Array Based**:\r\n\r\n    users: [\r\n        {\r\n            &quot;id&quot;: &quot;id&quot;,\r\n            &quot;key2&quot;: &quot;value2&quot;,\r\n            &quot;key3&quot;: &quot;value3&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: &quot;id&quot;,\r\n            &quot;key2&quot;: &quot;value2&quot;,\r\n            &quot;key3&quot;: &quot;value3&quot;\r\n        }\r\n    ]\r\n\r\nRelating to [this][1] post on the same issue, I have decided (on front end) to use the JSON object notation instead of an array of objects as it suits my requirements, provides better performance, and results in less code in the browser.\r\n\r\nBut the problem is that the list itself is not static. By this I mean the list is being generated i.e. fetched/stored from DB (NoSQL) and created for new entries through a Java API on the server. I am not able to decide on which notation I should use at the back end (which eventually will also affect the UI too). \r\n\r\nAny thoughts/suggestions about performance, maintainability or scalability is appreciated.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/24882985/array-of-objects-vs-nested-object","title":"Array of objects vs Object of Objects","body":"<p>The issue is to decide the trade offs between the following notations:</p>\n<p><strong>JSON based</strong>:</p>\n<pre><code>&quot;users&quot;: {\n    &quot;id1&quot;: {\n        &quot;id&quot;: &quot;id1&quot;,\n        &quot;firstname&quot;: &quot;firstname1&quot;,\n        &quot;lastname&quot;: &quot;lastname1&quot;\n    },\n    &quot;id2&quot;: {\n        &quot;id&quot;: &quot;id2&quot;,\n        &quot;firstaame&quot;: &quot;firstname2&quot;,\n        &quot;lastname&quot;: &quot;lastname2&quot;\n    }\n}\n</code></pre>\n<p><strong>Array Based</strong>:</p>\n<pre><code>users: [\n    {\n        &quot;id&quot;: &quot;id&quot;,\n        &quot;key2&quot;: &quot;value2&quot;,\n        &quot;key3&quot;: &quot;value3&quot;\n    },\n    {\n        &quot;id&quot;: &quot;id&quot;,\n        &quot;key2&quot;: &quot;value2&quot;,\n        &quot;key3&quot;: &quot;value3&quot;\n    }\n]\n</code></pre>\n<p>Relating to <a href=\"https://stackoverflow.com/questions/24882985/array-of-objects-vs-nested-object\">this</a> post on the same issue, I have decided (on front end) to use the JSON object notation instead of an array of objects as it suits my requirements, provides better performance, and results in less code in the browser.</p>\n<p>But the problem is that the list itself is not static. By this I mean the list is being generated i.e. fetched/stored from DB (NoSQL) and created for new entries through a Java API on the server. I am not able to decide on which notation I should use at the back end (which eventually will also affect the UI too).</p>\n<p>Any thoughts/suggestions about performance, maintainability or scalability is appreciated.</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"score":0,"creation_date":1687341582,"post_id":76521923,"comment_id":134922240,"body_markdown":"Have you tried to explicitly set up the some service at @BeforeEach injecting the mocks manually? Does this make any difference?","body":"Have you tried to explicitly set up the some service at @BeforeEach injecting the mocks manually? Does this make any difference?"},{"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"score":1,"creation_date":1687342003,"post_id":76521923,"comment_id":134922312,"body_markdown":"Yes, I&#39;ve tried to instantiate service manually it works correctly. I just simply don&#39;t understand why @inectMocks doesn&#39;t inject mocks as it should.","body":"Yes, I&#39;ve tried to instantiate service manually it works correctly. I just simply don&#39;t understand why @inectMocks doesn&#39;t inject mocks as it should."},{"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"score":1,"creation_date":1687345362,"post_id":76521923,"comment_id":134922933,"body_markdown":"IMHO I think that this is a problem between your `@SpringBootTest` annotation and `@InjectMocks` - when u use `@SpringBootTest` you need to use `@Autowired` and `@MockBean` instead of `@InjectMocks` and `@Mock`","body":"IMHO I think that this is a problem between your <code>@SpringBootTest</code> annotation and <code>@InjectMocks</code> - when u use <code>@SpringBootTest</code> you need to use <code>@Autowired</code> and <code>@MockBean</code> instead of <code>@InjectMocks</code> and <code>@Mock</code>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1687350089,"post_id":76521923,"comment_id":134923961,"body_markdown":"`@SpringBootTest` and `MockitoExtension` are incompatible. Either you want to autowire your components from your application context (`@SpringBootTest` with `@Autowired` and `@MockBean`) or you don&#39;t want to use the application context and manually inject your (mocked) collaborators (`MockitoExtension` with `@Mock` and `@InjectMocks`)","body":"<code>@SpringBootTest</code> and <code>MockitoExtension</code> are incompatible. Either you want to autowire your components from your application context (<code>@SpringBootTest</code> with <code>@Autowired</code> and <code>@MockBean</code>) or you don&#39;t want to use the application context and manually inject your (mocked) collaborators (<code>MockitoExtension</code> with <code>@Mock</code> and <code>@InjectMocks</code>)"}],"answers":[{"tags":[],"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689066945,"creation_date":1689066945,"answer_id":76660396,"question_id":76521923,"body_markdown":"Thanks [knittl](https://stackoverflow.com/users/112968/knittl) for the [solution](https://stackoverflow.com/questions/76521923/injectmocks-injects-new-instance-instead-of-using-defined-mock#comment134923961_76521923). \r\n\r\nIn my case I had to manually inject all mocks beacuse ``@SpringBootTest`` and ``MockitoExtention`` are incompatible. \r\n\r\nThis code worked for me: \r\n\r\n```java\r\n@SpringBootTest(classes = {SomeMapperImpl .class})\r\nclass SomeServiceTest {\r\n    @Mock\r\n    private SomeRepository someRepository;\r\n    @Spy\r\n    private SomeMapperImpl someMapper;\r\n\r\n    private SomeService someService;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        this.someService= new SomeServiceImpl (someRepository, someMapper);\r\n    }\r\n    @Test\r\n    void testGetVorgangById_ValidId() {\r\n        when(this.someRepository.findById(1L)).thenReturn(Optional.of(someObject));\r\n        SomeDto someById = this.someService.getById(1L);\r\n        ....\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/112968/knittl","title":"@InjectMocks injects new Instance instead of using defined Mock","body":"<p>Thanks <a href=\"https://stackoverflow.com/users/112968/knittl\">knittl</a> for the <a href=\"https://stackoverflow.com/questions/76521923/injectmocks-injects-new-instance-instead-of-using-defined-mock#comment134923961_76521923\">solution</a>.</p>\n<p>In my case I had to manually inject all mocks beacuse <code>@SpringBootTest</code> and <code>MockitoExtention</code> are incompatible.</p>\n<p>This code worked for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = {SomeMapperImpl .class})\nclass SomeServiceTest {\n    @Mock\n    private SomeRepository someRepository;\n    @Spy\n    private SomeMapperImpl someMapper;\n\n    private SomeService someService;\n\n    @BeforeEach\n    void setUp() {\n        this.someService= new SomeServiceImpl (someRepository, someMapper);\n    }\n    @Test\n    void testGetVorgangById_ValidId() {\n        when(this.someRepository.findById(1L)).thenReturn(Optional.of(someObject));\n        SomeDto someById = this.someService.getById(1L);\n        ....\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76660396,"answer_count":1,"score":0,"last_activity_date":1689066945,"creation_date":1687340482,"question_id":76521923,"body_markdown":"I have a test where a repository mock should be inserted via DI in service and somehow Mockito makes new instance and injects wrong mock into service. \r\nMy Repository class looks as followed: \r\n```java\r\n@Repository \r\npublic interface SomeRepository extends JpaRepository&lt;Vorgang, Long&gt; {\r\n   Optional&lt;SomeClass&gt; findById(Long id);\r\n}\r\n```\r\nService class: \r\n```java\r\n@RequiredArgsConstructor\r\n@Service\r\npublic class SomeServiceImpl implements SomeService {\r\n   \r\n\r\n    private final SomeRepository someRepository;\r\n    private final SomeMapper someMapper; \r\n    public SomeDTO getById(Long id) {\r\n        return this. someRepository //\r\n                .findById(id) //\r\n                .map(this. someMapper::mapToDto) //s\r\n                .orElseThrow(() -&gt; new RequestException(&quot;Entity not found Id&quot;);\r\n    }\r\n```\r\nAnd unit test is: \r\n```java\r\n@SpringBootTest(classes = {SomeMapperImpl.class, OtherMapperImpl.class})\r\n@ExtendWith({SpringExtension.class, MockitoExtension.class})\r\nclass SomeServiceTest {\r\n    @Mock\r\n    private SomeRepository someRepository;\r\n    @Spy\r\n    private SomeMapperImpl someMapper;\r\n\r\n    @InjectMocks\r\n    private SomeServiceImpl someService;\r\n\r\n   @Test\r\n    void testGetVorgangById_ValidId() {\r\n        when(this.someRepository.findById(1L)).thenReturn(Optional.of(someObject));\r\n        SomeDto someById = this.someService.getById(1L);\r\n        ....\r\n    }\r\n}\r\n```\r\nI&#39;m getting the exception because my repository mock doesn&#39;t return an object I want. I&#39;ve tried to debug and compare objects using repository mock and mapper before calling service method and it works as it should. In a debugger I see that only the injected repository instance is not the one which should be injected, mapper instance is correct. Somehow Mockito inserts a new instance of my repository.\r\n\r\n\r\n***EDIT***: Manual injection works correctly, \r\n```java\r\n@BeforeEach\r\nvoid setUp() {\r\n  this.someService = new SomeService(someRepository, someMapper);\r\n  ...\r\n}\r\n```\r\nbut @InjectMocks doesn&#39;t inject mocks as it should. What could be the problem? ","title":"@InjectMocks injects new Instance instead of using defined Mock","body":"<p>I have a test where a repository mock should be inserted via DI in service and somehow Mockito makes new instance and injects wrong mock into service.\nMy Repository class looks as followed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository \npublic interface SomeRepository extends JpaRepository&lt;Vorgang, Long&gt; {\n   Optional&lt;SomeClass&gt; findById(Long id);\n}\n</code></pre>\n<p>Service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\n@Service\npublic class SomeServiceImpl implements SomeService {\n   \n\n    private final SomeRepository someRepository;\n    private final SomeMapper someMapper; \n    public SomeDTO getById(Long id) {\n        return this. someRepository //\n                .findById(id) //\n                .map(this. someMapper::mapToDto) //s\n                .orElseThrow(() -&gt; new RequestException(&quot;Entity not found Id&quot;);\n    }\n</code></pre>\n<p>And unit test is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = {SomeMapperImpl.class, OtherMapperImpl.class})\n@ExtendWith({SpringExtension.class, MockitoExtension.class})\nclass SomeServiceTest {\n    @Mock\n    private SomeRepository someRepository;\n    @Spy\n    private SomeMapperImpl someMapper;\n\n    @InjectMocks\n    private SomeServiceImpl someService;\n\n   @Test\n    void testGetVorgangById_ValidId() {\n        when(this.someRepository.findById(1L)).thenReturn(Optional.of(someObject));\n        SomeDto someById = this.someService.getById(1L);\n        ....\n    }\n}\n</code></pre>\n<p>I'm getting the exception because my repository mock doesn't return an object I want. I've tried to debug and compare objects using repository mock and mapper before calling service method and it works as it should. In a debugger I see that only the injected repository instance is not the one which should be injected, mapper instance is correct. Somehow Mockito inserts a new instance of my repository.</p>\n<p><em><strong>EDIT</strong></em>: Manual injection works correctly,</p>\n<pre class=\"lang-java prettyprint-override\"><code>@BeforeEach\nvoid setUp() {\n  this.someService = new SomeService(someRepository, someMapper);\n  ...\n}\n</code></pre>\n<p>but @InjectMocks doesn't inject mocks as it should. What could be the problem?</p>\n"},{"tags":["java","spring","mariadb","jdbctemplate","mariadb-connector"],"answers":[{"comments":[{"owner":{"account_id":28985798,"reputation":1,"user_id":22202650,"display_name":"Seta1609"},"score":0,"creation_date":1688992015,"post_id":76653734,"comment_id":135145327,"body_markdown":"you need also too add the dependencies","body":"you need also too add the dependencies"},{"owner":{"account_id":129401,"reputation":2460,"user_id":327961,"accept_rate":50,"display_name":"user327961"},"score":0,"creation_date":1688992197,"post_id":76653734,"comment_id":135145377,"body_markdown":"Yeah, this was done already, I edited the question to add this information.","body":"Yeah, this was done already, I edited the question to add this information."}],"tags":[],"owner":{"account_id":28985798,"reputation":1,"user_id":22202650,"display_name":"Seta1609"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688991978,"creation_date":1688991978,"answer_id":76653734,"question_id":76653657,"body_markdown":"I&#180;m not 100% sure here but you need to change the spring properties/.yml file and tell spring wich sql driver and db will use. like this(just change postgre or mysql for mariaDB.):\r\n\r\n    spring:\r\n     datasource:\r\n     username: myuser\r\n     password: secret\r\n     url: jdbc://postgresql://localhost:5432/mydatabase\r\n     driver-class-name: org.postgresql.Driver","title":"Using Spring JDBCTemplate with MariaDB Connector","body":"<p>I´m not 100% sure here but you need to change the spring properties/.yml file and tell spring wich sql driver and db will use. like this(just change postgre or mysql for mariaDB.):</p>\n<pre><code>spring:\n datasource:\n username: myuser\n password: secret\n url: jdbc://postgresql://localhost:5432/mydatabase\n driver-class-name: org.postgresql.Driver\n</code></pre>\n"},{"comments":[{"owner":{"account_id":129401,"reputation":2460,"user_id":327961,"accept_rate":50,"display_name":"user327961"},"score":0,"creation_date":1689074915,"post_id":76660351,"comment_id":135158763,"body_markdown":"Yes, that seems to be the problem. We had nullDatabaseMeansCurrent in our connection String. I tested the old version without this property and I get a similar bug. I didn&#39;t find a workaround though.","body":"Yes, that seems to be the problem. We had nullDatabaseMeansCurrent in our connection String. I tested the old version without this property and I get a similar bug. I didn&#39;t find a workaround though."},{"owner":{"account_id":2517962,"reputation":12778,"user_id":10195153,"display_name":"danblack"},"score":0,"creation_date":1689127882,"post_id":76660351,"comment_id":135167977,"body_markdown":"@user327961 it really a bug if there is a feature you expect to be there isn&#39;t implemented and it [hasn&#39;t even been requested](https://jira.mariadb.org/projects/CONJ/issues)? Since you are a proficient java programmer you could [contribute it](https://github.com/mariaDB-corporation/mariadb-connector-j).","body":"@user327961 it really a bug if there is a feature you expect to be there isn&#39;t implemented and it <a href=\"https://jira.mariadb.org/projects/CONJ/issues\" rel=\"nofollow noreferrer\">hasn&#39;t even been requested</a>? Since you are a proficient java programmer you could <a href=\"https://github.com/mariaDB-corporation/mariadb-connector-j\" rel=\"nofollow noreferrer\">contribute it</a>."}],"tags":[],"owner":{"account_id":1735202,"reputation":1191,"user_id":1587934,"display_name":"Diego Dupin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689066580,"creation_date":1689066580,"answer_id":76660351,"question_id":76653657,"body_markdown":"When using metadata, connector request metadata depending on parameters. For example [DatabaseMetaData.html#getColumns][1] when setting not catalog and table name will search all tables corresponding in all catalogs, schema setting will be ignored. \r\n\r\nmysql connector has 2 options that mariadb connector don&#39;t have : `nullDatabaseMeansCurrent` in order to search for current database even when no database is set, and `databaseTerm` that indicate that use setting catalog or schema. \r\n\r\nI imagine that you use either one of these option, either schema is set with `nullDatabaseMeansCurrent` or using setting `databaseTerm` and connector then use schema parameter. \r\n\r\nThis second part will be implemented in https://jira.mariadb.org/projects/CONJ/issues/CONJ-1088. It might be the time to create an issue on jira to have `nullDatabaseMeansCurrent` support as well\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)","title":"Using Spring JDBCTemplate with MariaDB Connector","body":"<p>When using metadata, connector request metadata depending on parameters. For example <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">DatabaseMetaData.html#getColumns</a> when setting not catalog and table name will search all tables corresponding in all catalogs, schema setting will be ignored.</p>\n<p>mysql connector has 2 options that mariadb connector don't have : <code>nullDatabaseMeansCurrent</code> in order to search for current database even when no database is set, and <code>databaseTerm</code> that indicate that use setting catalog or schema.</p>\n<p>I imagine that you use either one of these option, either schema is set with <code>nullDatabaseMeansCurrent</code> or using setting <code>databaseTerm</code> and connector then use schema parameter.</p>\n<p>This second part will be implemented in <a href=\"https://jira.mariadb.org/projects/CONJ/issues/CONJ-1088\" rel=\"nofollow noreferrer\">https://jira.mariadb.org/projects/CONJ/issues/CONJ-1088</a>. It might be the time to create an issue on jira to have <code>nullDatabaseMeansCurrent</code> support as well</p>\n"}],"owner":{"account_id":129401,"reputation":2460,"user_id":327961,"accept_rate":50,"display_name":"user327961"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76660351,"answer_count":2,"score":0,"last_activity_date":1689066580,"creation_date":1688991408,"question_id":76653657,"body_markdown":"Java web application using Spring.\r\n\r\nWe are currently using MySQL and wish to migrate to MariaDB. So we also planned to migrate from MySQL Connector to MariaDB Client.\r\n\r\nOur software uses multiple databases on a same server, and some tables can have the same names, but on two different databases. On MySQL Connector, that was not a problem. We simply used a datasource that was already connected to the right database, and JDBCTemple knows that it has to search for the table in the current schema.\r\n\r\nMariaDB Client, on the other hand, doesn&#39;t use schema to differentiate databases, it uses catalog. Spring does not seems to be aware of that. So when we test our software after the migration, JDBCTemplate finds multiple tables with the same name, since the schema is always null, and seems the just use the last one on the list to get the table&#39;s metadatas. Which obviously leads to unexpected errors everywhere.\r\n\r\nWe manage to correct this behavior by adding withCatalogName the the JDBCTemplace calls (see code below), but doing so at large would not be very elegant solution.\r\n\r\n```\r\n    SimpleJdbcInsert insertStatement = new SimpleJdbcInsert(getJdbcTemplate());\r\n    [...] // business code\r\n    insertStatement.executeBatch(sqlParameterSource); // fails\r\n    insertStatement.withCatalogName(&quot;dbName&quot;).executeBatch(sqlParameterSource); // succeeds\r\n```\r\n\r\nSo my question is, is there a way to tell Spring that we are using the MariaDB Client, and that it should always use the catalog and not the schema to get metadatas ?\r\n\r\nWe did set up the URL connection with the `jdbc:mariadb` prefix already, so Spring is aware that we are using MariaDB and not MySQL.\r\n\r\nWe can&#39;t realisticly modify our software so everything is in the same database. Even just changing table names to unique names accross the serveur would cost a lot more than what we planned for the MariaDB migration.\r\n\r\nEdit : we also already set `org.mariadb.jdbc.Driver` as the new driver in the connection properties.\r\n\r\nEdit 2: found the problem, we used nullDatabaseMeansCurrent in the connection properties so that Spring can access the table metadata without fuss, but this property is not supported by MariaDB connector. Don&#39;t know yet if there is a workaround.","title":"Using Spring JDBCTemplate with MariaDB Connector","body":"<p>Java web application using Spring.</p>\n<p>We are currently using MySQL and wish to migrate to MariaDB. So we also planned to migrate from MySQL Connector to MariaDB Client.</p>\n<p>Our software uses multiple databases on a same server, and some tables can have the same names, but on two different databases. On MySQL Connector, that was not a problem. We simply used a datasource that was already connected to the right database, and JDBCTemple knows that it has to search for the table in the current schema.</p>\n<p>MariaDB Client, on the other hand, doesn't use schema to differentiate databases, it uses catalog. Spring does not seems to be aware of that. So when we test our software after the migration, JDBCTemplate finds multiple tables with the same name, since the schema is always null, and seems the just use the last one on the list to get the table's metadatas. Which obviously leads to unexpected errors everywhere.</p>\n<p>We manage to correct this behavior by adding withCatalogName the the JDBCTemplace calls (see code below), but doing so at large would not be very elegant solution.</p>\n<pre><code>    SimpleJdbcInsert insertStatement = new SimpleJdbcInsert(getJdbcTemplate());\n    [...] // business code\n    insertStatement.executeBatch(sqlParameterSource); // fails\n    insertStatement.withCatalogName(&quot;dbName&quot;).executeBatch(sqlParameterSource); // succeeds\n</code></pre>\n<p>So my question is, is there a way to tell Spring that we are using the MariaDB Client, and that it should always use the catalog and not the schema to get metadatas ?</p>\n<p>We did set up the URL connection with the <code>jdbc:mariadb</code> prefix already, so Spring is aware that we are using MariaDB and not MySQL.</p>\n<p>We can't realisticly modify our software so everything is in the same database. Even just changing table names to unique names accross the serveur would cost a lot more than what we planned for the MariaDB migration.</p>\n<p>Edit : we also already set <code>org.mariadb.jdbc.Driver</code> as the new driver in the connection properties.</p>\n<p>Edit 2: found the problem, we used nullDatabaseMeansCurrent in the connection properties so that Spring can access the table metadata without fuss, but this property is not supported by MariaDB connector. Don't know yet if there is a workaround.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":6,"creation_date":1689020157,"post_id":76657038,"comment_id":135151503,"body_markdown":"Exceptions are to handle errors. Don&#39;t use them for flow control and/or handling your business logic routing.","body":"Exceptions are to handle errors. Don&#39;t use them for flow control and/or handling your business logic routing."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":6,"creation_date":1689020158,"post_id":76657038,"comment_id":135151504,"body_markdown":"Why would you implement this using exceptions?","body":"Why would you implement this using exceptions?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":3,"creation_date":1689020159,"post_id":76657038,"comment_id":135151505,"body_markdown":"You should not be using Exceptions in this manner. I think you need an `if-statement`.","body":"You should not be using Exceptions in this manner. I think you need an <code>if-statement</code>."},{"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"score":1,"creation_date":1689020162,"post_id":76657038,"comment_id":135151506,"body_markdown":"You shouldn&#39;t use catch blocks for your normal logic, exceptions are _exceptional_, hence the name. Just implement your methods properly, let them return something and work with that.","body":"You shouldn&#39;t use catch blocks for your normal logic, exceptions are <i>exceptional</i>, hence the name. Just implement your methods properly, let them return something and work with that."},{"owner":{"account_id":3227749,"reputation":1860,"user_id":2723677,"accept_rate":61,"display_name":"mmar"},"score":0,"creation_date":1689020360,"post_id":76657038,"comment_id":135151531,"body_markdown":"Because, this is one single case for me, based on same user login. When i login with this user, this screen behaves dynamically based on some business logic and i would not know when this will occur. So i need to do identify the logged in state dynamically. If this is not the right approach, please suggest a best way to identify it?","body":"Because, this is one single case for me, based on same user login. When i login with this user, this screen behaves dynamically based on some business logic and i would not know when this will occur. So i need to do identify the logged in state dynamically. If this is not the right approach, please suggest a best way to identify it?"},{"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"score":0,"creation_date":1689020506,"post_id":76657038,"comment_id":135151546,"body_markdown":"Well, you need to parse the page and identify it, how you do that, is up to you, I&#39;m afraid. But for your states, you&#39;d probably use an enum (at least I would do that) - the thing is: There are so many ways to implement it and you chose the least fitting one in my opinion. Exceptions are for handling errors, not for your common business logic :/","body":"Well, you need to parse the page and identify it, how you do that, is up to you, I&#39;m afraid. But for your states, you&#39;d probably use an enum (at least I would do that) - the thing is: There are so many ways to implement it and you chose the least fitting one in my opinion. Exceptions are for handling errors, not for your common business logic :/"},{"owner":{"account_id":3227749,"reputation":1860,"user_id":2723677,"accept_rate":61,"display_name":"mmar"},"score":0,"creation_date":1689020774,"post_id":76657038,"comment_id":135151585,"body_markdown":"I understand that try/catch is not a solution, that is why i posted my question here to get some help.","body":"I understand that try/catch is not a solution, that is why i posted my question here to get some help."},{"owner":{"account_id":182955,"reputation":2403,"user_id":418031,"accept_rate":89,"display_name":"Zavael"},"score":1,"creation_date":1689021002,"post_id":76657038,"comment_id":135151617,"body_markdown":"you should describe the conditions of each case better, so anybody can provide a specific answer.. if it is based on database state, you need to make some selects to determine what should be displayed on page. If it depends on other systems, maybe you need to make some rest or soap or other requests to that system. If you can evaluate the conditions in your app, if-else statements should be enough.","body":"you should describe the conditions of each case better, so anybody can provide a specific answer.. if it is based on database state, you need to make some selects to determine what should be displayed on page. If it depends on other systems, maybe you need to make some rest or soap or other requests to that system. If you can evaluate the conditions in your app, if-else statements should be enough."},{"owner":{"account_id":3227749,"reputation":1860,"user_id":2723677,"accept_rate":61,"display_name":"mmar"},"score":0,"creation_date":1689021269,"post_id":76657038,"comment_id":135151662,"body_markdown":"Yes, i get it. This is based on a condition that only 5 users can be add/linked, once reached 5, no more can be linked or added. So i guess i need to do a check with API call and count the associated users. Based on the count i can decide. So thanks for the help, atleast it points me a path to proceed.","body":"Yes, i get it. This is based on a condition that only 5 users can be add/linked, once reached 5, no more can be linked or added. So i guess i need to do a check with API call and count the associated users. Based on the count i can decide. So thanks for the help, atleast it points me a path to proceed."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1689026201,"post_id":76657038,"comment_id":135152304,"body_markdown":"You can use findElements to check for your conditions... you&#39;ll need to first use a webdriverwait to check that the login has occurred.  (If this is done via JS... if a standard page-load happens, you won&#39;t need it.)  findElements will return an array whose count will be zero if the element is not found.   You can use an XPATH to target each of the conditions and set a variable you can case/switch on accordingly.  (though you may need to check disabled state for 1st two) This would avoid having a complicated try/catch where the order of thrown exceptions can sometimes be odd.","body":"You can use findElements to check for your conditions... you&#39;ll need to first use a webdriverwait to check that the login has occurred.  (If this is done via JS... if a standard page-load happens, you won&#39;t need it.)  findElements will return an array whose count will be zero if the element is not found.   You can use an XPATH to target each of the conditions and set a variable you can case/switch on accordingly.  (though you may need to check disabled state for 1st two) This would avoid having a complicated try/catch where the order of thrown exceptions can sometimes be odd."}],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689066338,"creation_date":1689066338,"answer_id":76660312,"question_id":76657038,"body_markdown":"Checking actions by handling exceptions is anti-pattern. Exceptions are used to handle errors, and is this case different system behaviour is expected behaviour.\r\n\r\nI suggest to implement your logic, using if else, like\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    List&lt;WebElement&gt; addButtons = driver.findElements(new By.ByCssSelector(selector);\r\n    boolean buttonIsEnabled = !addButtons.isEmpty() &amp;&amp; addButtons.get(0).isEnabled(); // this code can be different in your case, based on element implementation\r\n\r\n    if(!addButtons.isEmpty() &amp;&amp; buttonIsEnabled) {\r\n    // It displays &#39;Add&#39; Link - So i can click on it and do some add logic\r\n    } else if (!addButtons.isEmpty()) {\r\n    // It Disables &#39;Add&#39; button and says no user can be added more - If so, then i need to check some message is displayed.\r\n    } else {\r\n    // It displays &#39;Link New&#39; button - So i can click on it and do some linking new user logic.\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nSo in this case you would achieve all your logic in one case without catching anything and by checking elements proper states.","title":"How to do multiple actions in java try catch?","body":"<p>Checking actions by handling exceptions is anti-pattern. Exceptions are used to handle errors, and is this case different system behaviour is expected behaviour.</p>\n<p>I suggest to implement your logic, using if else, like</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>List&lt;WebElement&gt; addButtons = driver.findElements(new By.ByCssSelector(selector);\nboolean buttonIsEnabled = !addButtons.isEmpty() &amp;&amp; addButtons.get(0).isEnabled(); // this code can be different in your case, based on element implementation\n\nif(!addButtons.isEmpty() &amp;&amp; buttonIsEnabled) {\n// It displays 'Add' Link - So i can click on it and do some add logic\n} else if (!addButtons.isEmpty()) {\n// It Disables 'Add' button and says no user can be added more - If so, then i need to check some message is displayed.\n} else {\n// It displays 'Link New' button - So i can click on it and do some linking new user logic.\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So in this case you would achieve all your logic in one case without catching anything and by checking elements proper states.</p>\n"}],"owner":{"account_id":3227749,"reputation":1860,"user_id":2723677,"accept_rate":61,"display_name":"mmar"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689066338,"creation_date":1689019973,"question_id":76657038,"body_markdown":"I have a page once user login, based on the business logic, it displays either of three actions dynamically.\r\n1. It displays &#39;Add&#39; Link - So i can click on it and do some add logic.\r\n(OR)\r\n2. It Disables &#39;Add&#39; button and says no user can be added more - If so, then i need to check some message is displayed.\r\n(OR)\r\n3. It displays &#39;Link New&#39; button - So i can click on it and do some linking new user logic.\r\n\r\nInstead of writing each case separately, how can i achieve in one base logic something in try catch like below \r\n\r\n    try {\r\n        // do the &#39;Add&#39; link logic\r\n    } catch (Exception e) {\r\n        // (OR) do verify the &#39;Add&#39; link is disabled and check the error message is displayed\r\n    } catch (Exception e) {\r\n        // (OR) do the &#39;Link New&#39; button logic\r\n    }\r\n\r\nany help is appreciated.  \r\n","title":"How to do multiple actions in java try catch?","body":"<p>I have a page once user login, based on the business logic, it displays either of three actions dynamically.</p>\n<ol>\n<li>It displays 'Add' Link - So i can click on it and do some add logic.\n(OR)</li>\n<li>It Disables 'Add' button and says no user can be added more - If so, then i need to check some message is displayed.\n(OR)</li>\n<li>It displays 'Link New' button - So i can click on it and do some linking new user logic.</li>\n</ol>\n<p>Instead of writing each case separately, how can i achieve in one base logic something in try catch like below</p>\n<pre><code>try {\n    // do the 'Add' link logic\n} catch (Exception e) {\n    // (OR) do verify the 'Add' link is disabled and check the error message is displayed\n} catch (Exception e) {\n    // (OR) do the 'Link New' button logic\n}\n</code></pre>\n<p>any help is appreciated.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7851,"page":317,"page_size":100}
