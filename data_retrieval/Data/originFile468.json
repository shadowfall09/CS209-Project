{"items":[{"tags":["java","spring","thread-safety"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1369753918,"post_id":16795303,"comment_id":24204494,"body_markdown":"Regarding the edit. Spring will call the same method on the same `@Controller` class instance for a request with the same format required by `@RequestMapping`.","body":"Regarding the edit. Spring will call the same method on the same <code>@Controller</code> class instance for a request with the same format required by <code>@RequestMapping</code>."}],"answers":[{"comments":[{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":7,"creation_date":1369753680,"post_id":16795362,"comment_id":24204333,"body_markdown":"&quot;of course&quot;: I don&#39;t think that is so obvious to a beginner. Care to expand a little?","body":"&quot;of course&quot;: I don&#39;t think that is so obvious to a beginner. Care to expand a little?"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1369753720,"post_id":16795362,"comment_id":24204370,"body_markdown":"@Raedwalk Spring only creates one instance (by default) of your `@Component` classes, so all of their instance fields will be shared for each request.","body":"@Raedwalk Spring only creates one instance (by default) of your <code>@Component</code> classes, so all of their instance fields will be shared for each request."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1369753767,"post_id":16795362,"comment_id":24204396,"body_markdown":"Few days ago, I saw opposite response from one of the experienced SO contributor. Response was, &quot;each request will have its own instance of these components&quot; (Different from HTTPServlet architecture). I agree &quot;It&#39;s best if those are stateless, which makes them thread safe by default&quot;, but it would be great if there is any official documentation on &quot;one instance of component&quot;.","body":"Few days ago, I saw opposite response from one of the experienced SO contributor. Response was, &quot;each request will have its own instance of these components&quot; (Different from HTTPServlet architecture). I agree &quot;It&#39;s best if those are stateless, which makes them thread safe by default&quot;, but it would be great if there is any official documentation on &quot;one instance of component&quot;."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1369754474,"post_id":16795362,"comment_id":24204825,"body_markdown":"Spring makes beans singletons by default, but there are other scopes as well: prototype, per request, per session.  Other experienced developers might have made a different choice.  I prefer stateless singletons because I think they scale better.","body":"Spring makes beans singletons by default, but there are other scopes as well: prototype, per request, per session.  Other experienced developers might have made a different choice.  I prefer stateless singletons because I think they scale better."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1369754721,"post_id":16795362,"comment_id":24204973,"body_markdown":"&quot;If there&#39;s no shared, mutable state&quot; almost all interesting web-applications have shared, mutable data. In most cases, the shared data is in a data-base, so the work of ensuring thread-safety is done in Hibernate/ the JPA.","body":"&quot;If there&#39;s no shared, mutable state&quot; almost all interesting web-applications have shared, mutable data. In most cases, the shared data is in a data-base, so the work of ensuring thread-safety is done in Hibernate/ the JPA."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1369755061,"post_id":16795362,"comment_id":24205161,"body_markdown":"@Raedwald You&#39;ll have shared Service or Repository classes like DAOs to do database operations, but anything done in their methods will either be ThreadLocal or will use local instances within methods, so you won&#39;t have that problem.","body":"@Raedwald You&#39;ll have shared Service or Repository classes like DAOs to do database operations, but anything done in their methods will either be ThreadLocal or will use local instances within methods, so you won&#39;t have that problem."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1369755291,"post_id":16795362,"comment_id":24205298,"body_markdown":"Most interesting web applications don&#39;t have shared state.  They keep session specific information safe in session, where only a particular user can see it.  I don&#39;t think you understand what thread safety means.","body":"Most interesting web applications don&#39;t have shared state.  They keep session specific information safe in session, where only a particular user can see it.  I don&#39;t think you understand what thread safety means."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":7,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1369753414,"creation_date":1369753414,"answer_id":16795362,"question_id":16795303,"body_markdown":"Yes, of course.\r\n\r\nIt&#39;s best if those are stateless, which makes them thread safe by default.  If there&#39;s no shared, mutable state there&#39;s no problem.","title":"Must Spring component classes be thread-safe","body":"<p>Yes, of course.</p>\n\n<p>It's best if those are stateless, which makes them thread safe by default.  If there's no shared, mutable state there's no problem.</p>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1475531394,"creation_date":1369754024,"answer_id":16795572,"question_id":16795303,"body_markdown":"Given\r\n\r\n    @Controller\r\n    public class MyController {\r\n        @RequestMapping(value = &quot;/index&quot;)\r\n        public String respond() {\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n\r\nSpring will create an instance of `MyController`. This is because Spring parses your configuration, `&lt;mvc:annotation-driven&gt;`, sees `@Controller` (which is like `@Component`) and instantiates the annotated class. Because it sees `@RequestMapping` as well, it generates a `HandlerMapping` for it, see the [docs here][1].  \r\n\r\nAny HTTP requests the `DispatcherServlet` receives will be dispatched to this controller instance through the `HandlerMapping` registered before, calling `respond()` through java reflection on that instance. \r\n\r\nIf you have instance fields like\r\n\r\n    @Controller\r\n    public class MyController {\r\n        private int count = 0;\r\n        @RequestMapping(value = &quot;/index&quot;)\r\n        public String respond() {\r\n            count++;\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n\r\n`count` would be a hazard, because it might be modified by many threads and changes to it might be lost.\r\n\r\nYou need to understand how Servlet containers work. The container instantiates one instance of your Spring MVC `DispatcherServlet`. The container also manages a pool of Threads which it uses to respond to connections, ie. HTTP requests. When such a request arrives, the container picks a Thread from the pool and, within that Thread, executes the `service()` method on the `DispatcherServlet` which dispatches to the correct `@Controller` instance that Spring registered for you (from your configuration).\r\n\r\nSo YES, Spring MVC classes must be thread safe. You can do this by playing with different scopes for your class instance fields or just having local variables instead. Failing that, you&#39;ll need to add appropriate synchronization around critical sections in your code.\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-handlermapping","title":"Must Spring component classes be thread-safe","body":"<p>Given</p>\n\n<pre><code>@Controller\npublic class MyController {\n    @RequestMapping(value = \"/index\")\n    public String respond() {\n        return \"index\";\n    }\n}\n</code></pre>\n\n<p>Spring will create an instance of <code>MyController</code>. This is because Spring parses your configuration, <code>&lt;mvc:annotation-driven&gt;</code>, sees <code>@Controller</code> (which is like <code>@Component</code>) and instantiates the annotated class. Because it sees <code>@RequestMapping</code> as well, it generates a <code>HandlerMapping</code> for it, see the <a href=\"http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-handlermapping\">docs here</a>.  </p>\n\n<p>Any HTTP requests the <code>DispatcherServlet</code> receives will be dispatched to this controller instance through the <code>HandlerMapping</code> registered before, calling <code>respond()</code> through java reflection on that instance. </p>\n\n<p>If you have instance fields like</p>\n\n<pre><code>@Controller\npublic class MyController {\n    private int count = 0;\n    @RequestMapping(value = \"/index\")\n    public String respond() {\n        count++;\n        return \"index\";\n    }\n}\n</code></pre>\n\n<p><code>count</code> would be a hazard, because it might be modified by many threads and changes to it might be lost.</p>\n\n<p>You need to understand how Servlet containers work. The container instantiates one instance of your Spring MVC <code>DispatcherServlet</code>. The container also manages a pool of Threads which it uses to respond to connections, ie. HTTP requests. When such a request arrives, the container picks a Thread from the pool and, within that Thread, executes the <code>service()</code> method on the <code>DispatcherServlet</code> which dispatches to the correct <code>@Controller</code> instance that Spring registered for you (from your configuration).</p>\n\n<p>So YES, Spring MVC classes must be thread safe. You can do this by playing with different scopes for your class instance fields or just having local variables instead. Failing that, you'll need to add appropriate synchronization around critical sections in your code.</p>\n"},{"comments":[{"owner":{"account_id":7105431,"reputation":2516,"user_id":5435216,"display_name":"Tahir Hussain Mir"},"score":0,"creation_date":1482570223,"post_id":23082211,"comment_id":69826911,"body_markdown":"Hello. I came here and found this useful. But can You tell me, if there are lot of users say some hundreds or thousand. Does that mean we will have that many number of controllers? please help! @codo","body":"Hello. I came here and found this useful. But can You tell me, if there are lot of users say some hundreds or thousand. Does that mean we will have that many number of controllers? please help! @codo"},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1482671167,"post_id":23082211,"comment_id":69846354,"body_markdown":"I guess so. Otherwise it wouldn&#39;t work. If you need session data, you&#39;ll inevitably end up with data structures per user in memory.","body":"I guess so. Otherwise it wouldn&#39;t work. If you need session data, you&#39;ll inevitably end up with data structures per user in memory."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1656423787,"post_id":23082211,"comment_id":128565054,"body_markdown":"Session-scoped beans should still be thread-safe (as required) as it is possible to have multiple requests at once being processed within a single session.","body":"Session-scoped beans should still be thread-safe (as required) as it is possible to have multiple requests at once being processed within a single session."}],"tags":[],"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1397560940,"creation_date":1397560940,"answer_id":23082211,"question_id":16795303,"body_markdown":"By default, controllers are singletons and thus must be thread-safe. However, you can configure the controllers to be request or session scoped, i.e.:\r\n\r\n    @Controller\r\n    @Scope(&quot;session&quot;)\r\n    public class MyController {\r\n    \r\n        ...\r\n    }\r\n\r\nControllers with *session scope* can be helpful for managing session state. A good description of different patterns can be found in [Using Sessions in Spring-MVC (including &quot;scoped-proxies&quot;)](http://richardchesterwood.blogspot.in/2011/03/using-sessions-in-spring-mvc-including.html) and in [How to get Session Object In Spring MVC](http://www.javaroots.com/2013/08/how-to-get-session-object-in-spring-mvc.html). Some of the presented patterns require *request scope*.\r\n\r\nThe request scope is useful as well if you have data that you cannot afford to calculate more than one per request.\r\n","title":"Must Spring component classes be thread-safe","body":"<p>By default, controllers are singletons and thus must be thread-safe. However, you can configure the controllers to be request or session scoped, i.e.:</p>\n\n<pre><code>@Controller\n@Scope(\"session\")\npublic class MyController {\n\n    ...\n}\n</code></pre>\n\n<p>Controllers with <em>session scope</em> can be helpful for managing session state. A good description of different patterns can be found in <a href=\"http://richardchesterwood.blogspot.in/2011/03/using-sessions-in-spring-mvc-including.html\" rel=\"nofollow\">Using Sessions in Spring-MVC (including \"scoped-proxies\")</a> and in <a href=\"http://www.javaroots.com/2013/08/how-to-get-session-object-in-spring-mvc.html\" rel=\"nofollow\">How to get Session Object In Spring MVC</a>. Some of the presented patterns require <em>request scope</em>.</p>\n\n<p>The request scope is useful as well if you have data that you cannot afford to calculate more than one per request.</p>\n"},{"tags":[],"owner":{"account_id":2401014,"reputation":130,"user_id":2098669,"display_name":"Simon"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1682779945,"creation_date":1518613734,"answer_id":48788044,"question_id":16795303,"body_markdown":"A Spring component, as well as another class, must be thread-safe if it can be used concurrently by a number of threads.  A Spring component is a singleton by default and can be called from different threads. From this point of view, its STATE should be thread-safe.\r\n From another hand, singleton Spring beans, normally serve requests in a call stack of a thread from a pool of thread. Normally a Spring component has fields, which values are injected interfaces or properties. The only need to take care of safety is the case when state objects are kept in a bean. Usually, it is not used due to servers are load-balanced and a state is kept in a cache or in a database.\r\n Singleton bean, thus, should be used as a set of functions, which transfers data as arguments of a related method, and its fields should not keep business data, but just injected beans, which serve call progress.\r\n Spring&#39;s controller is an example. Its methods are called by a Tomcat&#39;s threads, way of controllers methods mapping, and all the calls stack is done in one thread. Controller&#39;s method calls DAO methods and returns results in the same thread. \r\n A Session normally is persisted from session to session and this is handled by Spring.\r\nSo, except for rare cases, there is no need to take care of thread safety.\r\n\r\n\r\n","title":"Must Spring component classes be thread-safe","body":"<p>A Spring component, as well as another class, must be thread-safe if it can be used concurrently by a number of threads.  A Spring component is a singleton by default and can be called from different threads. From this point of view, its STATE should be thread-safe.\nFrom another hand, singleton Spring beans, normally serve requests in a call stack of a thread from a pool of thread. Normally a Spring component has fields, which values are injected interfaces or properties. The only need to take care of safety is the case when state objects are kept in a bean. Usually, it is not used due to servers are load-balanced and a state is kept in a cache or in a database.\nSingleton bean, thus, should be used as a set of functions, which transfers data as arguments of a related method, and its fields should not keep business data, but just injected beans, which serve call progress.\nSpring's controller is an example. Its methods are called by a Tomcat's threads, way of controllers methods mapping, and all the calls stack is done in one thread. Controller's method calls DAO methods and returns results in the same thread.\nA Session normally is persisted from session to session and this is handled by Spring.\nSo, except for rare cases, there is no need to take care of thread safety.</p>\n"}],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33041,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":16795572,"answer_count":4,"score":39,"last_activity_date":1682779945,"creation_date":1369753166,"question_id":16795303,"body_markdown":"If you use Spring, must your component classes (`@Controller`, `@Service`, `@Repository`) be thread safe? Or does Spring use them in a thread-safe manner so you don&#39;t have to worry about thread safety?\r\n\r\n\r\nThat is, if I have a `@RequestMapping` method in my `@Controller`, could that method be called simultaneously for the same controller object by more than one thread?\r\n\r\n(This has [sort-of been asked before][1], but not answered as such).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12121519/spring-controllers-thread-safety-and-storing-resources","title":"Must Spring component classes be thread-safe","body":"<p>If you use Spring, must your component classes (<code>@Controller</code>, <code>@Service</code>, <code>@Repository</code>) be thread safe? Or does Spring use them in a thread-safe manner so you don't have to worry about thread safety?</p>\n<p>That is, if I have a <code>@RequestMapping</code> method in my <code>@Controller</code>, could that method be called simultaneously for the same controller object by more than one thread?</p>\n<p>(This has <a href=\"https://stackoverflow.com/questions/12121519/spring-controllers-thread-safety-and-storing-resources\">sort-of been asked before</a>, but not answered as such).</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682779844,"post_id":76136812,"comment_id":134270661,"body_markdown":"You do `myInt++` followed by `myInt.notify()`. Think about what `myInt++` does. You end up with a _different object_. So, you&#39;re calling `notify()` on an object which you did not synchronize on, thus the error. But that&#39;s a symptom of a larger problem. Why are you synchronizing on `myInt`, a non-final field that is explicitly being reassigned, in the first place? Especially given you have that `lock` object (which should be `final`, by the way).","body":"You do <code>myInt++</code> followed by <code>myInt.notify()</code>. Think about what <code>myInt++</code> does. You end up with a <i>different object</i>. So, you&#39;re calling <code>notify()</code> on an object which you did not synchronize on, thus the error. But that&#39;s a symptom of a larger problem. Why are you synchronizing on <code>myInt</code>, a non-final field that is explicitly being reassigned, in the first place? Especially given you have that <code>lock</code> object (which should be <code>final</code>, by the way)."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1682781846,"post_id":76136812,"comment_id":134270943,"body_markdown":"Why are you using wait and notify at all instead of proper Locks and Conditions, on an Integer object no less?","body":"Why are you using wait and notify at all instead of proper Locks and Conditions, on an Integer object no less?"}],"owner":{"account_id":28455536,"reputation":1,"user_id":21772980,"display_name":"ywy144"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682780052,"answer_count":0,"score":0,"last_activity_date":1682779535,"creation_date":1682779515,"question_id":76136812,"body_markdown":"I wonder why the following code throws `java.lang.IllegalMonitorStateException` when I lock `myInt`.\r\n```java\r\npackage Thread;\r\n\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class MultiThreadingTest1 {\r\n\r\n    public Integer myInt = 0;\r\n    public Object lock = new Object();\r\n\r\n    public void alternativePrinting() throws InterruptedException {\r\n        Thread thread1 = new Thread(() -&gt; {\r\n            while(myInt &lt;= 100)\r\n                synchronized (myInt){\r\n                    if(myInt % 2 == 0) {\r\n                        System.out.println(Thread.currentThread().getName() + &quot; prints &quot; + myInt);\r\n                        myInt++;\r\n                        myInt.notify();\r\n                    }\r\n                    else\r\n                        try {\r\n                            myInt.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                }\r\n        });\r\n        Thread thread2 = new Thread(() -&gt; {\r\n            while(myInt &lt;= 100)\r\n                synchronized (myInt){\r\n                    if(myInt % 2 == 1) {\r\n                        System.out.println(Thread.currentThread().getName() + &quot; prints &quot; + myInt);\r\n                        myInt++;\r\n                        myInt.notify();\r\n                    }\r\n                    else\r\n                        try {\r\n                            myInt.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                }\r\n        });\r\n//        ExecutorService threadPool = Executors.newFixedThreadPool(2);\r\n//        threadPool.submit(thread1);\r\n//        threadPool.submit(thread2);\r\n//        threadPool.shutdown();\r\n        thread1.start();;\r\n        thread2.start();\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        MultiThreadingTest1 multiThreadingTest1 = new MultiThreadingTest1();\r\n        multiThreadingTest1.alternativePrinting();\r\n    }\r\n}\r\n\r\n```\r\nExeceptions:\r\n```\r\nException in thread &quot;Thread-0&quot; java.lang.IllegalMonitorStateException\r\n\tat java.base/java.lang.Object.notify(Native Method)\r\n\tat Thread.MultiThreadingTest1.lambda$alternativePrinting$0(MultiThreadingTest1.java:18)\r\n\tat java.base/java.lang.Thread.run(Thread.java:835)\r\nException in thread &quot;Thread-1&quot; java.lang.IllegalMonitorStateException\r\n\tat java.base/java.lang.Object.notify(Native Method)\r\n\tat Thread.MultiThreadingTest1.lambda$alternativePrinting$1(MultiThreadingTest1.java:34)\r\n\tat java.base/java.lang.Thread.run(Thread.java:835)\r\n```\r\n\r\nI know lock `lock` will be OK. \r\nBut I wonder why the following code throws `java.lang.IllegalMonitorStateException` when I lock `myInt`","title":"Why does my code throw java.lang.IllegalMonitorStateException","body":"<p>I wonder why the following code throws <code>java.lang.IllegalMonitorStateException</code> when I lock <code>myInt</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Thread;\n\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class MultiThreadingTest1 {\n\n    public Integer myInt = 0;\n    public Object lock = new Object();\n\n    public void alternativePrinting() throws InterruptedException {\n        Thread thread1 = new Thread(() -&gt; {\n            while(myInt &lt;= 100)\n                synchronized (myInt){\n                    if(myInt % 2 == 0) {\n                        System.out.println(Thread.currentThread().getName() + &quot; prints &quot; + myInt);\n                        myInt++;\n                        myInt.notify();\n                    }\n                    else\n                        try {\n                            myInt.wait();\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                }\n        });\n        Thread thread2 = new Thread(() -&gt; {\n            while(myInt &lt;= 100)\n                synchronized (myInt){\n                    if(myInt % 2 == 1) {\n                        System.out.println(Thread.currentThread().getName() + &quot; prints &quot; + myInt);\n                        myInt++;\n                        myInt.notify();\n                    }\n                    else\n                        try {\n                            myInt.wait();\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                }\n        });\n//        ExecutorService threadPool = Executors.newFixedThreadPool(2);\n//        threadPool.submit(thread1);\n//        threadPool.submit(thread2);\n//        threadPool.shutdown();\n        thread1.start();;\n        thread2.start();\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MultiThreadingTest1 multiThreadingTest1 = new MultiThreadingTest1();\n        multiThreadingTest1.alternativePrinting();\n    }\n}\n\n</code></pre>\n<p>Execeptions:</p>\n<pre><code>Exception in thread &quot;Thread-0&quot; java.lang.IllegalMonitorStateException\n    at java.base/java.lang.Object.notify(Native Method)\n    at Thread.MultiThreadingTest1.lambda$alternativePrinting$0(MultiThreadingTest1.java:18)\n    at java.base/java.lang.Thread.run(Thread.java:835)\nException in thread &quot;Thread-1&quot; java.lang.IllegalMonitorStateException\n    at java.base/java.lang.Object.notify(Native Method)\n    at Thread.MultiThreadingTest1.lambda$alternativePrinting$1(MultiThreadingTest1.java:34)\n    at java.base/java.lang.Thread.run(Thread.java:835)\n</code></pre>\n<p>I know lock <code>lock</code> will be OK.\nBut I wonder why the following code throws <code>java.lang.IllegalMonitorStateException</code> when I lock <code>myInt</code></p>\n"},{"tags":["java","multithreading","synchronization"],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682779179,"creation_date":1682778094,"answer_id":76136721,"question_id":76136649,"body_markdown":"The entire body of your `run` method is a `synchronized` block. That practically _always_ is a mistake. What is it that you don&#39;t want any other thread to be able to do until the thread is completely finished and the `run` method has returned?\r\n\r\nAlso, `synchronized(currentCapacity)` looks like a mistake because your program assigns different objects to `currentCapacity`. What does it mean when one thread is synchronized on `Integer(5)` and another thread is synchronized on `Integer(4)`? You can avoid ever making that mistake if you never write `synchronized(foo)` unless `foo` is a `final` variable.\r\n\r\n--------------\r\n\r\nAlso of note: Your main thread _spins_ (i.e., it burns CPU time) while awaiting the next token. That&#39;s not _always_ a bad thing, but it usually _is_ a bad thing if the host on which you are running does not have a CPU reserved for the exclusive use of that thread and there are other threads that are ready-to-run and waiting their turn to use a CPU.\r\n\r\n---------------\r\n\r\nP.S., Have you considered using a [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html) as the &quot;bucket?&quot; Your rate limiter could call `semaphore.availablePermits()` to find out how many tokens are in the bucket, and call `...release()` to add another token to the bucket. And, your main thread can call `semaphore.acquire()` to _wait_ for the next token.","title":"Synchronization java issue","body":"<p>The entire body of your <code>run</code> method is a <code>synchronized</code> block. That practically <em>always</em> is a mistake. What is it that you don't want any other thread to be able to do until the thread is completely finished and the <code>run</code> method has returned?</p>\n<p>Also, <code>synchronized(currentCapacity)</code> looks like a mistake because your program assigns different objects to <code>currentCapacity</code>. What does it mean when one thread is synchronized on <code>Integer(5)</code> and another thread is synchronized on <code>Integer(4)</code>? You can avoid ever making that mistake if you never write <code>synchronized(foo)</code> unless <code>foo</code> is a <code>final</code> variable.</p>\n<hr />\n<p>Also of note: Your main thread <em>spins</em> (i.e., it burns CPU time) while awaiting the next token. That's not <em>always</em> a bad thing, but it usually <em>is</em> a bad thing if the host on which you are running does not have a CPU reserved for the exclusive use of that thread and there are other threads that are ready-to-run and waiting their turn to use a CPU.</p>\n<hr />\n<p>P.S., Have you considered using a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> as the &quot;bucket?&quot; Your rate limiter could call <code>semaphore.availablePermits()</code> to find out how many tokens are in the bucket, and call <code>...release()</code> to add another token to the bucket. And, your main thread can call <code>semaphore.acquire()</code> to <em>wait</em> for the next token.</p>\n"}],"owner":{"account_id":7873204,"reputation":119,"user_id":5949783,"display_name":"Sourabh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682779179,"creation_date":1682777277,"question_id":76136649,"body_markdown":"I am trying to implement the Token bucket rate limiter. Below is the basic code I have written but not getting the expected result. It seems like I am missing something or I am not yet fully understood how to thread function in java. Can some one help me to look in the right direction?\r\n\r\n```lang-java\r\npublic class RateLimiterTokenBucket implements RateLimiter, Runnable{\r\n\r\n    Integer capacity;\r\n    Integer frequencyInMilliseconds;\r\n    Integer currentCapacity;\r\n\r\n    public RateLimiterTokenBucket(Integer frequencyInMilliseconds,Integer capacity) {\r\n        this.frequencyInMilliseconds = frequencyInMilliseconds;\r\n        this.capacity = capacity;\r\n        this.currentCapacity = capacity;\r\n    }\r\n\r\n    @Override\r\n    public boolean consume() {\r\n        synchronized (currentCapacity) {\r\n            if(currentCapacity &lt;= 0) return false;\r\n            --currentCapacity;\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        synchronized (currentCapacity) {\r\n            OffsetDateTime t = OffsetDateTime.now();\r\n            while(true) {\r\n                if(OffsetDateTime.now().isAfter(t.plus(frequencyInMilliseconds, ChronoUnit.MILLIS))){\r\n                    if(currentCapacity&lt;capacity){\r\n                        System.out.println(&quot;token added&quot;);\r\n                        ++currentCapacity;\r\n                    }\r\n                    t=OffsetDateTime.now();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nmain class\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        RateLimiter rl = new RateLimiterTokenBucket(10,5);\r\n        Thread t = new Thread((Runnable) rl);\r\n        t.start();\r\n        while(true){\r\n            if(rl.consume()) {\r\n                System.out.println(OffsetDateTime.now()+&quot; ---&gt; true&quot;);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\njust getting \r\n```lang-text\r\n2023-04-29T19:30:54.685553+05:30 ---&gt; true\r\ntoken added\r\n```\r\nas output\r\nwith both threads main and t1 still running \r\n","title":"Synchronization java issue","body":"<p>I am trying to implement the Token bucket rate limiter. Below is the basic code I have written but not getting the expected result. It seems like I am missing something or I am not yet fully understood how to thread function in java. Can some one help me to look in the right direction?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RateLimiterTokenBucket implements RateLimiter, Runnable{\n\n    Integer capacity;\n    Integer frequencyInMilliseconds;\n    Integer currentCapacity;\n\n    public RateLimiterTokenBucket(Integer frequencyInMilliseconds,Integer capacity) {\n        this.frequencyInMilliseconds = frequencyInMilliseconds;\n        this.capacity = capacity;\n        this.currentCapacity = capacity;\n    }\n\n    @Override\n    public boolean consume() {\n        synchronized (currentCapacity) {\n            if(currentCapacity &lt;= 0) return false;\n            --currentCapacity;\n            return true;\n        }\n    }\n\n    @Override\n    public void run() {\n        synchronized (currentCapacity) {\n            OffsetDateTime t = OffsetDateTime.now();\n            while(true) {\n                if(OffsetDateTime.now().isAfter(t.plus(frequencyInMilliseconds, ChronoUnit.MILLIS))){\n                    if(currentCapacity&lt;capacity){\n                        System.out.println(&quot;token added&quot;);\n                        ++currentCapacity;\n                    }\n                    t=OffsetDateTime.now();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>main class</p>\n<pre><code>public static void main(String[] args) {\n        RateLimiter rl = new RateLimiterTokenBucket(10,5);\n        Thread t = new Thread((Runnable) rl);\n        t.start();\n        while(true){\n            if(rl.consume()) {\n                System.out.println(OffsetDateTime.now()+&quot; ---&gt; true&quot;);\n            }\n        }\n    }\n</code></pre>\n<p>just getting</p>\n<pre class=\"lang-text prettyprint-override\"><code>2023-04-29T19:30:54.685553+05:30 ---&gt; true\ntoken added\n</code></pre>\n<p>as output\nwith both threads main and t1 still running</p>\n"},{"tags":["java","multithreading","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680954034,"creation_date":1680951335,"answer_id":75964795,"question_id":75964659,"body_markdown":"Keeping `CloseableHttpClient` static will not confirm only one copy of `CloseableHttpClient` to reuse that. Here for every object creation of `ExternalServiceHelper`, you are creating `CloseableHttpClient`. To create a single client for every `ExternalServiceHelper`, you need to use [Singleton Design Pattern][1].\r\n\r\nYou should use a [circuit breaker][2] to reduce calls to down services.\r\n\r\nAt your current code base, no, there is no such case to get a response to another request.\r\n\r\nBut if you change your code to my suggested one, then you will need synchronization on the `closeableHttpClient` reference as then the single reference will be used by many threads. \r\n\r\nAnd as you will use a single instance of `CloseableHttpClient`, you can use a single instance of `ExternalServiceHelper` as well. So implement Singleton Design Pattern for `ExternalServiceHelper` too.\r\n\r\nHope, it helps.\r\n\r\n  [1]: https://www.geeksforgeeks.org/singleton-design-pattern/\r\n  [2]: https://dzone.com/articles/circuit-breaker-pattern","title":"Http Client that allows 50 threads to call a host concurrently","body":"<p>Keeping <code>CloseableHttpClient</code> static will not confirm only one copy of <code>CloseableHttpClient</code> to reuse that. Here for every object creation of <code>ExternalServiceHelper</code>, you are creating <code>CloseableHttpClient</code>. To create a single client for every <code>ExternalServiceHelper</code>, you need to use <a href=\"https://www.geeksforgeeks.org/singleton-design-pattern/\" rel=\"nofollow noreferrer\">Singleton Design Pattern</a>.</p>\n<p>You should use a <a href=\"https://dzone.com/articles/circuit-breaker-pattern\" rel=\"nofollow noreferrer\">circuit breaker</a> to reduce calls to down services.</p>\n<p>At your current code base, no, there is no such case to get a response to another request.</p>\n<p>But if you change your code to my suggested one, then you will need synchronization on the <code>closeableHttpClient</code> reference as then the single reference will be used by many threads.</p>\n<p>And as you will use a single instance of <code>CloseableHttpClient</code>, you can use a single instance of <code>ExternalServiceHelper</code> as well. So implement Singleton Design Pattern for <code>ExternalServiceHelper</code> too.</p>\n<p>Hope, it helps.</p>\n"},{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681339423,"creation_date":1681338582,"answer_id":76000298,"question_id":75964659,"body_markdown":"\r\n[CloseableHttpClient][1] is declared with [ThreadingBehavior SAFE][2]\r\n\r\n&gt; Instances of classes with the given contract are expected to be fully thread-safe.\r\n\r\n    @Contract(threading=SAFE)\r\n    public abstract class CloseableHttpClient\r\n    extends Object\r\n    implements HttpClient, Closeable\r\n\r\nAlso, `client.execute(request)` has been [deprecated](https://hc.apache.org/httpcomponents-client-5.2.x/current/httpclient5/apidocs/org/apache/hc/client5/http/impl/classic/CloseableHttpClient.html#execute-org.apache.hc.core5.http.ClassicHttpRequest-).\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/CloseableHttpClient.html\r\n  [2]: https://hc.apache.org/httpcomponents-core-4.4.x/current/httpcore/apidocs/org/apache/http/annotation/ThreadingBehavior.html#SAFE\r\n","title":"Http Client that allows 50 threads to call a host concurrently","body":"<p><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/CloseableHttpClient.html\" rel=\"nofollow noreferrer\">CloseableHttpClient</a> is declared with <a href=\"https://hc.apache.org/httpcomponents-core-4.4.x/current/httpcore/apidocs/org/apache/http/annotation/ThreadingBehavior.html#SAFE\" rel=\"nofollow noreferrer\">ThreadingBehavior SAFE</a></p>\n<blockquote>\n<p>Instances of classes with the given contract are expected to be fully thread-safe.</p>\n</blockquote>\n<pre><code>@Contract(threading=SAFE)\npublic abstract class CloseableHttpClient\nextends Object\nimplements HttpClient, Closeable\n</code></pre>\n<p>Also, <code>client.execute(request)</code> has been <a href=\"https://hc.apache.org/httpcomponents-client-5.2.x/current/httpclient5/apidocs/org/apache/hc/client5/http/impl/classic/CloseableHttpClient.html#execute-org.apache.hc.core5.http.ClassicHttpRequest-\" rel=\"nofollow noreferrer\">deprecated</a>.</p>\n"},{"tags":[],"owner":{"account_id":20817370,"reputation":1,"user_id":15289869,"display_name":"Aleks B."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682778932,"creation_date":1682778889,"answer_id":76136771,"question_id":75964659,"body_markdown":"For multithreading use cases there is no need to make CloseableHttpClient singleton, that client usually has configured a HttpConnectionManager, for example an instance of PoolingHttpClientConnectionManager, which controls creating, leasing/reusing and termination of HTTP connections and is perfectly suited to serve many HTTP requests coming from concurrent threads.","title":"Http Client that allows 50 threads to call a host concurrently","body":"<p>For multithreading use cases there is no need to make CloseableHttpClient singleton, that client usually has configured a HttpConnectionManager, for example an instance of PoolingHttpClientConnectionManager, which controls creating, leasing/reusing and termination of HTTP connections and is perfectly suited to serve many HTTP requests coming from concurrent threads.</p>\n"}],"owner":{"account_id":3760281,"reputation":55,"user_id":3125503,"accept_rate":100,"display_name":"normalindon1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1682778932,"creation_date":1680949438,"question_id":75964659,"body_markdown":"Based on a requirement to call an external service which could be accessed by 50 threads concurrently I have designed a simple POC below \r\n\r\n    public class ExternalServiceHelper {\r\n        private static RequestConfig requestConfig = RequestConfig.custom()\r\n                .setConnectTimeout(60 * 1000)\r\n                .setConnectionRequestTimeout(60 * 1000)\r\n                .setSocketTimeout(60 * 1000).build();\r\n\r\n        private static CloseableHttpClient closeableHttpClient = HttpClients.custom().\r\n            setDefaultRequestConfig(requestConfig).\r\n            useSystemProperties().\r\n            setMaxConnTotal(50).\r\n            setMaxConnPerRoute(30).\r\n            build();\r\n\r\n        public  String sendToExternalService(HttpPost httppost) throws IOException {\r\n            CloseableHttpResponse response =null;\r\n            response=closeableHttpClient.execute(httppost);\r\n            String reponse = EntityUtils.toString(response.getEntity());\r\n            System.out.println(reponse);\r\n            httppost.releaseConnection();\r\n            response.close();\r\n            closeableHttpClient.close();\r\n            return response;\r\n        }\r\n    }\r\n\r\nThe method sendToExternalService might be called upto 50 concurrent threads from a Rest Api Service Layer. i.e\r\n\r\n/api - 50 users might be calling the api concurrently and from the service layer I need to make a call to the external service using sendToExternalService. I create a new Instance of ExternalServiceHelper from the service layer and then call the sendToExternalService with different HttpPost request. \r\n\r\nHere I have kept the CloseableHttpClient static so there is only One copy and resuing the CloseableHttpClient from the pool as I have set MaxConnPerRoute and MaxConnTotal using the builder.\r\n\r\nWill this have any synchronization issues, like thread 1 getting a response of a different thread? ","title":"Http Client that allows 50 threads to call a host concurrently","body":"<p>Based on a requirement to call an external service which could be accessed by 50 threads concurrently I have designed a simple POC below</p>\n<pre><code>public class ExternalServiceHelper {\n    private static RequestConfig requestConfig = RequestConfig.custom()\n            .setConnectTimeout(60 * 1000)\n            .setConnectionRequestTimeout(60 * 1000)\n            .setSocketTimeout(60 * 1000).build();\n\n    private static CloseableHttpClient closeableHttpClient = HttpClients.custom().\n        setDefaultRequestConfig(requestConfig).\n        useSystemProperties().\n        setMaxConnTotal(50).\n        setMaxConnPerRoute(30).\n        build();\n\n    public  String sendToExternalService(HttpPost httppost) throws IOException {\n        CloseableHttpResponse response =null;\n        response=closeableHttpClient.execute(httppost);\n        String reponse = EntityUtils.toString(response.getEntity());\n        System.out.println(reponse);\n        httppost.releaseConnection();\n        response.close();\n        closeableHttpClient.close();\n        return response;\n    }\n}\n</code></pre>\n<p>The method sendToExternalService might be called upto 50 concurrent threads from a Rest Api Service Layer. i.e</p>\n<p>/api - 50 users might be calling the api concurrently and from the service layer I need to make a call to the external service using sendToExternalService. I create a new Instance of ExternalServiceHelper from the service layer and then call the sendToExternalService with different HttpPost request.</p>\n<p>Here I have kept the CloseableHttpClient static so there is only One copy and resuing the CloseableHttpClient from the pool as I have set MaxConnPerRoute and MaxConnTotal using the builder.</p>\n<p>Will this have any synchronization issues, like thread 1 getting a response of a different thread?</p>\n"},{"tags":["java","android","android-studio","android-gradle-plugin","build.gradle"],"answers":[{"tags":[],"owner":{"account_id":1308536,"reputation":2467,"user_id":2123586,"accept_rate":67,"display_name":"Zsolt Boldizsar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682237818,"creation_date":1682237818,"answer_id":76083783,"question_id":76083589,"body_markdown":"As described in their [release notes for 1.10.0-alpha01][1], you need to use `android-UpsideDownCake` as `compileSdkVersion` in your app level `build.gradle` file.\r\n\r\n```\r\nandroid {\r\n    compileSdkVersion &quot;android-UpsideDownCake&quot;\r\n    ...\r\n}\r\n```\r\n\r\nHowever if you don&#39;t really need to be on the alpha version, use the latest stable version instead: \r\n\r\n```\r\nimplementation(&quot;com.google.android.material:material:1.8.0&quot;)\r\n```\r\n\r\n  [1]: https://github.com/material-components/material-components-android/releases/tag/1.10.0-alpha01","title":"Android Studio build failed : An issue was found when checking AAR metadata","body":"<p>As described in their <a href=\"https://github.com/material-components/material-components-android/releases/tag/1.10.0-alpha01\" rel=\"nofollow noreferrer\">release notes for 1.10.0-alpha01</a>, you need to use <code>android-UpsideDownCake</code> as <code>compileSdkVersion</code> in your app level <code>build.gradle</code> file.</p>\n<pre><code>android {\n    compileSdkVersion &quot;android-UpsideDownCake&quot;\n    ...\n}\n</code></pre>\n<p>However if you don't really need to be on the alpha version, use the latest stable version instead:</p>\n<pre><code>implementation(&quot;com.google.android.material:material:1.8.0&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682777731,"creation_date":1682777731,"answer_id":76136692,"question_id":76083589,"body_markdown":"It works fine in this version:\r\n\r\n`implementation &#39;com.google.android.material:material:1.8.0-alpha01&#39;`\r\n\r\nWhen I upgraded to the recommended new version, I was getting an error. After reviewing the log, I realized that I needed to upgrade `compileSdkPreview` for the new version to work correctly.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf you are going to use the new version, you should add the following.\r\n\r\n`implementation &#39;com.google.android.material:material:1.10.0-alpha01&#39;`\r\n\r\nMake sure you download the SDK.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n`build.gradle(:app)` you should update the value in the file as below:\r\n\r\n`compileSdkVersion &quot;android-UpsideDownCake&quot;`\r\n\r\nFor detailed information, you can check: https://developer.android.com/about/versions/14/setup-sdk#kts\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qU5i0.png\r\n  [2]: https://i.stack.imgur.com/Y0KUu.png","title":"Android Studio build failed : An issue was found when checking AAR metadata","body":"<p>It works fine in this version:</p>\n<p><code>implementation 'com.google.android.material:material:1.8.0-alpha01'</code></p>\n<p>When I upgraded to the recommended new version, I was getting an error. After reviewing the log, I realized that I needed to upgrade <code>compileSdkPreview</code> for the new version to work correctly.</p>\n<p><a href=\"https://i.stack.imgur.com/qU5i0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qU5i0.png\" alt=\"enter image description here\" /></a></p>\n<p>If you are going to use the new version, you should add the following.</p>\n<p><code>implementation 'com.google.android.material:material:1.10.0-alpha01'</code></p>\n<p>Make sure you download the SDK.</p>\n<p><a href=\"https://i.stack.imgur.com/Y0KUu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y0KUu.png\" alt=\"enter image description here\" /></a></p>\n<p><code>build.gradle(:app)</code> you should update the value in the file as below:</p>\n<p><code>compileSdkVersion &quot;android-UpsideDownCake&quot;</code></p>\n<p>For detailed information, you can check: <a href=\"https://developer.android.com/about/versions/14/setup-sdk#kts\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/14/setup-sdk#kts</a></p>\n"}],"owner":{"account_id":15428039,"reputation":145,"user_id":11130231,"display_name":"Deejay Super"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76083783,"answer_count":2,"score":1,"last_activity_date":1682777731,"creation_date":1682234446,"question_id":76083589,"body_markdown":"So i have been trying to run my project but i am encountering issues with com.google.android.material:material:1.10.0-alpha01 due to the &quot;UpsideDownCake&quot; API requirement.\r\n\r\nThis is the error message : \r\n\r\n&gt;  Dependency &#39;com.google.android.material:material:1.10.0-alpha01&#39; requires libraries and applications that\r\n      depend on it to compile against codename &quot;UpsideDownCake&quot; of the\r\n      Android APIs.\r\n      :app is currently compiled against android-33.\r\n      Recommended action: Use a different version of dependency &#39;com.google.android.material:material:1.10.0-alpha01&#39;,\r\n      or set compileSdkPreview to &quot;UpsideDownCake&quot; in your build.gradle\r\n      file if you intend to experiment with that preview SDK.\r\n\r\n\r\nAny help would be much appreciated. ","title":"Android Studio build failed : An issue was found when checking AAR metadata","body":"<p>So i have been trying to run my project but i am encountering issues with com.google.android.material:material:1.10.0-alpha01 due to the &quot;UpsideDownCake&quot; API requirement.</p>\n<p>This is the error message :</p>\n<blockquote>\n<p>Dependency 'com.google.android.material:material:1.10.0-alpha01' requires libraries and applications that\ndepend on it to compile against codename &quot;UpsideDownCake&quot; of the\nAndroid APIs.\n:app is currently compiled against android-33.\nRecommended action: Use a different version of dependency 'com.google.android.material:material:1.10.0-alpha01',\nor set compileSdkPreview to &quot;UpsideDownCake&quot; in your build.gradle\nfile if you intend to experiment with that preview SDK.</p>\n</blockquote>\n<p>Any help would be much appreciated.</p>\n"},{"tags":["java","postgresql","docker","kubernetes","docker-compose"],"answers":[{"comments":[{"owner":{"account_id":28137655,"reputation":23,"user_id":21501169,"display_name":"Artem"},"score":0,"creation_date":1682775548,"post_id":76136201,"comment_id":134270165,"body_markdown":"Unfortunately it doesn&#39;t work anyway. After deployment applying I see lc_collate = en_US.utf8, but i want to see lc_collate = C, because i set it in deployment. Wnen I do it by docker-compose, everything is ok and i see lc_collate = C.","body":"Unfortunately it doesn&#39;t work anyway. After deployment applying I see lc_collate = en_US.utf8, but i want to see lc_collate = C, because i set it in deployment. Wnen I do it by docker-compose, everything is ok and i see lc_collate = C."},{"owner":{"account_id":28137655,"reputation":23,"user_id":21501169,"display_name":"Artem"},"score":0,"creation_date":1682776122,"post_id":76136201,"comment_id":134270216,"body_markdown":"also i tried to apply everything with postgres:latest - i&#39;ve got the same problem. Docker-compose script works fine, but by applying kubernetes deployment script lc_collate is ignored","body":"also i tried to apply everything with postgres:latest - i&#39;ve got the same problem. Docker-compose script works fine, but by applying kubernetes deployment script lc_collate is ignored"},{"owner":{"account_id":28137655,"reputation":23,"user_id":21501169,"display_name":"Artem"},"score":0,"creation_date":1682777052,"post_id":76136201,"comment_id":134270314,"body_markdown":"I have already tried everything - I set lc_collate with undescore and lc-collate with dash","body":"I have already tried everything - I set lc_collate with undescore and lc-collate with dash"}],"tags":[],"owner":{"account_id":6422613,"reputation":1101,"user_id":4978880,"display_name":"Taimoor Mirza"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682777620,"creation_date":1682770999,"answer_id":76136201,"question_id":76135751,"body_markdown":"Your file looks OK. I&#39;ve applied your manifest on 1 of my GKE clusters and it seems to working fine. \r\n\r\nHowever, In your docker compose, your postgres version is `13.3` whereas in k8s manifest, its `latest` (version when not mentioned means latest). Try setting 13.3 in manifest too and check if it works.","title":"When creating postgres container, environment POSTGRES_INITDB_ARGS is ignored in Kubernetes","body":"<p>Your file looks OK. I've applied your manifest on 1 of my GKE clusters and it seems to working fine.</p>\n<p>However, In your docker compose, your postgres version is <code>13.3</code> whereas in k8s manifest, its <code>latest</code> (version when not mentioned means latest). Try setting 13.3 in manifest too and check if it works.</p>\n"}],"owner":{"account_id":28137655,"reputation":23,"user_id":21501169,"display_name":"Artem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682777620,"creation_date":1682764980,"question_id":76135751,"body_markdown":"I&#39;m trying to set **lc-collate** parameter for postgres container, using env POSTGRES_INITDB_ARGS. But this env is ignored and after deployment applying I get default value of **lc_collate** \r\n\r\nhere is my deployment\r\n\r\n```\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: example-postgres-1\r\n  labels:\r\n    app: example-app\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: example-app\r\n      tier: postgres\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: example-app\r\n        tier: postgres\r\n    spec:\r\n      containers:\r\n        - image: postgres\r\n          name: postgres\r\n          env:\r\n            - name: POSTGRES_INITDB_ARGS\r\n              value: --lc-collate=C\r\n            - name: POSTGRES_DB\r\n              value: postgres\r\n            - name: POSTGRES_USER\r\n              value: user\r\n            - name: POSTGRES_PASSWORD\r\n              value: user\r\n            - name: PGDATA\r\n              value: /var/lib/postgresql/data/pgdata\r\n          ports:\r\n            - containerPort: 5432\r\n              name: postgres\r\n          volumeMounts:\r\n            - name: example-postgres\r\n              mountPath: /var/lib/postgresql/data\r\n          args: [&quot;-c&quot;, &quot;max_connections=200&quot;]\r\n      volumes:\r\n        - name: example-postgres\r\n          persistentVolumeClaim:\r\n            claimName: example-postgres\r\n```\r\n \r\nAt the same time I&#39;m trying to set **POSTGRES_INITDB_ARGS: &quot;--lc-collate=C&quot;** by using docker-compose:\r\n\r\n```\r\nversion: &quot;3.9&quot;\r\nservices:\r\n  postgres:\r\n    image: postgres:13.3\r\n    environment:\r\n      POSTGRES_DB: &quot;postgresTest&quot;\r\n      POSTGRES_USER: &quot;user&quot;\r\n      POSTGRES_PASSWORD: &quot;user&quot;\r\n      POSTGRES_INITDB_ARGS: &quot;--lc-collate=C&quot;\r\n    ports:\r\n      - &quot;3432:5432&quot;\r\n```\r\n\r\nand it works for me\r\n\r\nWhat am i doing wrong in kuberntes deployment by setting **POSTGRES_INITDB_ARGS** ? If it is wrong, how to set **lc_collate** by creating container creting?\r\n\r\nI&#39;m trying to set **lc-collate** parameter for postgres container, using env POSTGRES_INITDB_ARGS. But this env is ignored and after applying I get default value of **lc_collate** ","title":"When creating postgres container, environment POSTGRES_INITDB_ARGS is ignored in Kubernetes","body":"<p>I'm trying to set <strong>lc-collate</strong> parameter for postgres container, using env POSTGRES_INITDB_ARGS. But this env is ignored and after deployment applying I get default value of <strong>lc_collate</strong></p>\n<p>here is my deployment</p>\n<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: example-postgres-1\n  labels:\n    app: example-app\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: example-app\n      tier: postgres\n  template:\n    metadata:\n      labels:\n        app: example-app\n        tier: postgres\n    spec:\n      containers:\n        - image: postgres\n          name: postgres\n          env:\n            - name: POSTGRES_INITDB_ARGS\n              value: --lc-collate=C\n            - name: POSTGRES_DB\n              value: postgres\n            - name: POSTGRES_USER\n              value: user\n            - name: POSTGRES_PASSWORD\n              value: user\n            - name: PGDATA\n              value: /var/lib/postgresql/data/pgdata\n          ports:\n            - containerPort: 5432\n              name: postgres\n          volumeMounts:\n            - name: example-postgres\n              mountPath: /var/lib/postgresql/data\n          args: [&quot;-c&quot;, &quot;max_connections=200&quot;]\n      volumes:\n        - name: example-postgres\n          persistentVolumeClaim:\n            claimName: example-postgres\n</code></pre>\n<p>At the same time I'm trying to set <strong>POSTGRES_INITDB_ARGS: &quot;--lc-collate=C&quot;</strong> by using docker-compose:</p>\n<pre><code>version: &quot;3.9&quot;\nservices:\n  postgres:\n    image: postgres:13.3\n    environment:\n      POSTGRES_DB: &quot;postgresTest&quot;\n      POSTGRES_USER: &quot;user&quot;\n      POSTGRES_PASSWORD: &quot;user&quot;\n      POSTGRES_INITDB_ARGS: &quot;--lc-collate=C&quot;\n    ports:\n      - &quot;3432:5432&quot;\n</code></pre>\n<p>and it works for me</p>\n<p>What am i doing wrong in kuberntes deployment by setting <strong>POSTGRES_INITDB_ARGS</strong> ? If it is wrong, how to set <strong>lc_collate</strong> by creating container creting?</p>\n<p>I'm trying to set <strong>lc-collate</strong> parameter for postgres container, using env POSTGRES_INITDB_ARGS. But this env is ignored and after applying I get default value of <strong>lc_collate</strong></p>\n"},{"tags":["java","android","android-studio","gradle","gradle-plugin"],"comments":[{"owner":{"account_id":5918917,"reputation":518,"user_id":4656782,"display_name":"Shawlaw"},"score":0,"creation_date":1682920662,"post_id":73099487,"comment_id":134284500,"body_markdown":"Does this answer your question? [Bumblebee Android studio Plugin \\[id: &#39;com.android.application&#39;, version: &#39;7.1.0&#39;, apply: false\\] was not found in any of the following sources:](https://stackoverflow.com/questions/70947176/bumblebee-android-studio-plugin-id-com-android-application-version-7-1-0)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70947176/bumblebee-android-studio-plugin-id-com-android-application-version-7-1-0\">Bumblebee Android studio Plugin &#91;id: &#39;com.android.application&#39;, version: &#39;7.1.0&#39;, apply: false&#93; was not found in any of the following sources:</a>"}],"answers":[{"comments":[{"owner":{"account_id":19054370,"reputation":31,"user_id":13911877,"display_name":"Nic"},"score":4,"creation_date":1658689195,"post_id":73099602,"comment_id":129107825,"body_markdown":"Thanks but unfortunately the issue still persists after this.","body":"Thanks but unfortunately the issue still persists after this."}],"tags":[],"owner":{"account_id":14879349,"reputation":525,"user_id":10744522,"display_name":"Shobhith"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658675701,"creation_date":1658675701,"answer_id":73099602,"question_id":73099487,"body_markdown":"Try to change the versions from 7.2.0 to 7.2.1 in project level `build.gradle`\r\n\r\n    id &#39;com.android.application&#39; version &#39;7.2.1&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.2.1&#39; apply false","title":"Plugin [id: &#39;com.android.application&#39;, version: &#39;7.2.0&#39;, apply: false] was not found in any of the following sources","body":"<p>Try to change the versions from 7.2.0 to 7.2.1 in project level <code>build.gradle</code></p>\n<pre><code>id 'com.android.application' version '7.2.1' apply false\nid 'com.android.library' version '7.2.1' apply false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20433475,"reputation":37,"user_id":16446710,"display_name":"Vsevolod Rostovskiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671279996,"creation_date":1671279996,"answer_id":74834063,"question_id":73099487,"body_markdown":"I ran into the same issue. What I tried:\r\n\r\n- changed the gradle version, changed the gradle plugin version\r\n- changed repositories where packages are searched\r\n- set proxy settings in gradle.properties file\r\n- set proxy settings in Windows 10 network settings\r\n\r\nNone of this helped me, and I installed a proxy program that can wrap the traffic of individual applications on the computer, and it worked! It was a Proxyfire program - it has a 30-day free version. The problem of accessing Google services in my case is related to local restrictions.","title":"Plugin [id: &#39;com.android.application&#39;, version: &#39;7.2.0&#39;, apply: false] was not found in any of the following sources","body":"<p>I ran into the same issue. What I tried:</p>\n<ul>\n<li>changed the gradle version, changed the gradle plugin version</li>\n<li>changed repositories where packages are searched</li>\n<li>set proxy settings in gradle.properties file</li>\n<li>set proxy settings in Windows 10 network settings</li>\n</ul>\n<p>None of this helped me, and I installed a proxy program that can wrap the traffic of individual applications on the computer, and it worked! It was a Proxyfire program - it has a 30-day free version. The problem of accessing Google services in my case is related to local restrictions.</p>\n"}],"owner":{"account_id":19054370,"reputation":31,"user_id":13911877,"display_name":"Nic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8007,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1682777380,"creation_date":1658674724,"question_id":73099487,"body_markdown":"Please assist, I am new to android studio none of the solutions provided in the previously asked questions has worked for me. I keep receiving the error:\r\n\r\n\r\nGradle sync failed: Plugin [id: &#39;com.android.application&#39;, version: &#39;7.2.0&#39;, apply: false] was not found in any of the following sources:\r\n- Gradle Core Plugins (plugin is not in &#39;org.gradle&#39; namespace)\r\n- Plugin Repositories (could not resolve plugin artifact &#39;com.android.application:com.android.application.gradle.plugin:7.2.0&#39;)\r\nSearched in the following repositories:\r\nGradle Central Plugin Repository\r\nGoogle\r\nMavenRepo\r\n\r\nThis is my gradle-wrapper.properties:\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip\r\n    distributionPath=wrapper/dists\r\n    zipStorePath=wrapper/dists\r\n    zipStoreBase=GRADLE_USER_HOME\r\n\r\nsettings.gradle\r\n\r\n    pluginManagement {\r\n        repositories {\r\n            //maven { url &quot;https://plugins.gradle.org/m2/&quot; }\r\n            gradlePluginPortal()\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n    \r\n    dependencyResolutionManagement {\r\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n    rootProject.name = &quot;projectname&quot;\r\n    include &#39;:app&#39;\r\n\r\nProject build.gradle\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.2.0&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.2.0&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.5.31&#39; apply false\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\nbuild.gradle\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;org.jetbrains.kotlin.android&#39;\r\n        id &#39;org.jetbrains.kotlin.android.extensions&#39;\r\n    }\r\n    \r\n    android {\r\n        compileSdk 31\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.tdsoft.limabot&quot;\r\n            minSdk 21\r\n            targetSdk 31\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n        kotlinOptions {\r\n            jvmTarget = &#39;1.8&#39;\r\n        }\r\n    }\r\n    dependencies\r\n    {\r\n    }\r\n\r\nI have added java(JDK-18.0.0.1) to the path in environmental variables and my grade in android studio Gradle JDK is set to Embedded JDK version 11.0.12.\r\nI would greatly appreciate any form of assistance.\r\n\r\nEdit: Unfortunately, changing the project build version has not solved the issue.","title":"Plugin [id: &#39;com.android.application&#39;, version: &#39;7.2.0&#39;, apply: false] was not found in any of the following sources","body":"<p>Please assist, I am new to android studio none of the solutions provided in the previously asked questions has worked for me. I keep receiving the error:</p>\n<p>Gradle sync failed: Plugin [id: 'com.android.application', version: '7.2.0', apply: false] was not found in any of the following sources:</p>\n<ul>\n<li>Gradle Core Plugins (plugin is not in 'org.gradle' namespace)</li>\n<li>Plugin Repositories (could not resolve plugin artifact 'com.android.application:com.android.application.gradle.plugin:7.2.0')\nSearched in the following repositories:\nGradle Central Plugin Repository\nGoogle\nMavenRepo</li>\n</ul>\n<p>This is my gradle-wrapper.properties:</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip\ndistributionPath=wrapper/dists\nzipStorePath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\n</code></pre>\n<p>settings.gradle</p>\n<pre><code>pluginManagement {\n    repositories {\n        //maven { url &quot;https://plugins.gradle.org/m2/&quot; }\n        gradlePluginPortal()\n        google()\n        mavenCentral()\n    }\n}\n\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\nrootProject.name = &quot;projectname&quot;\ninclude ':app'\n</code></pre>\n<p>Project build.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application' version '7.2.0' apply false\n    id 'com.android.library' version '7.2.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.5.31' apply false\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n    id 'org.jetbrains.kotlin.android.extensions'\n}\n\nandroid {\n    compileSdk 31\n\n    defaultConfig {\n        applicationId &quot;com.tdsoft.limabot&quot;\n        minSdk 21\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n}\ndependencies\n{\n}\n</code></pre>\n<p>I have added java(JDK-18.0.0.1) to the path in environmental variables and my grade in android studio Gradle JDK is set to Embedded JDK version 11.0.12.\nI would greatly appreciate any form of assistance.</p>\n<p>Edit: Unfortunately, changing the project build version has not solved the issue.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682714177,"post_id":76131942,"comment_id":134264688,"body_markdown":"Can you please be a bit more precise and provide more details here? Which environment(s) are you talking of exactly? How comes there are several java runtimes installed on &quot;a server&quot;? I really cannot figure out what you exactly want to achieve.","body":"Can you please be a bit more precise and provide more details here? Which environment(s) are you talking of exactly? How comes there are several java runtimes installed on &quot;a server&quot;? I really cannot figure out what you exactly want to achieve."},{"owner":{"account_id":3541474,"reputation":167,"user_id":2958456,"display_name":"user2958456"},"score":0,"creation_date":1682716194,"post_id":76131942,"comment_id":134265025,"body_markdown":"@cyberbrain there is no need for precision. \n\nThis is a very straightforward question. It could be any linux environment but lets say rhel8 for now.  \n\nWhy are there several java runtimes on a server? Because it runs apps on different versions.","body":"@cyberbrain there is no need for precision.   This is a very straightforward question. It could be any linux environment but lets say rhel8 for now.    Why are there several java runtimes on a server? Because it runs apps on different versions."},{"owner":{"account_id":3541474,"reputation":167,"user_id":2958456,"display_name":"user2958456"},"score":0,"creation_date":1682716684,"post_id":76131942,"comment_id":134265095,"body_markdown":"java stores its root CA in $JAVA_HOME/lib/security/cacerts. The OS typically stores its certificates elsewhere. Ubuntu uses /etc/ssl/certs. RHEL uses /etc/pki/ca-trust/.","body":"java stores its root CA in $JAVA_HOME/lib/security/cacerts. The OS typically stores its certificates elsewhere. Ubuntu uses /etc/ssl/certs. RHEL uses /etc/pki/ca-trust/."},{"owner":{"account_id":3541474,"reputation":167,"user_id":2958456,"display_name":"user2958456"},"score":0,"creation_date":1682716743,"post_id":76131942,"comment_id":134265110,"body_markdown":"Obviously this is pretty annoying since if you need to integrate an internal CA, you have to update every java runtime on every server. I want to know if It can be unified","body":"Obviously this is pretty annoying since if you need to integrate an internal CA, you have to update every java runtime on every server. I want to know if It can be unified"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1682717781,"post_id":76131942,"comment_id":134265252,"body_markdown":"**IF you use the RHEL package(s)** for OpenJDK (or other RH family such as CentOS or Scientific) then $JAVA_HOME/lib/security/cacerts is a symlink to the data maintained by the `ca-certificates` package in `/etc/pki`. Similarly for Debian family such as Ubuntu. If you use other Java builds/packages it depends on the builder or packager. But there are other OSes besides Linux, and some of them don&#39;t have a truststore in a file Java can use, or even at all.","body":"<b>IF you use the RHEL package(s)</b> for OpenJDK (or other RH family such as CentOS or Scientific) then $JAVA_HOME/lib/security/cacerts is a symlink to the data maintained by the <code>ca-certificates</code> package in <code>&#47;etc&#47;pki</code>. Similarly for Debian family such as Ubuntu. If you use other Java builds/packages it depends on the builder or packager. But there are other OSes besides Linux, and some of them don&#39;t have a truststore in a file Java can use, or even at all."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682761183,"post_id":76131942,"comment_id":134268684,"body_markdown":"The short answer is No.  There isn&#39;t a way that you can enforce this for all Java runtimes installed on a server.  And since &quot;best practice&quot; is really just opinion dressed up with a fancy hat ... you are actually asking for opinions, which is off-topic.","body":"The short answer is No.  There isn&#39;t a way that you can enforce this for all Java runtimes installed on a server.  And since &quot;best practice&quot; is really just opinion dressed up with a fancy hat ... you are actually asking for opinions, which is off-topic."}],"owner":{"account_id":3541474,"reputation":167,"user_id":2958456,"display_name":"user2958456"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682777315,"creation_date":1682702954,"question_id":76131942,"body_markdown":"For instance, usually I manage certchain on RHEL with `yum update ca-certificates`. How do I ensure that Java always includes these certchains into its runtime keystore? Is there any way to enforce this across all Java runtimes on a server\r\n\r\nAn example for clarity\r\n\r\nJava stores its root CA in $JAVA_HOME/lib/security/cacerts. The OS typically stores its certificates elsewhere. Ubuntu uses /etc/ssl/certs. RHEL uses /etc/pki/ca-trust/.  \r\n \r\nObviously this is pretty annoying since if you need to integrate an internal CA, you have to update every Java runtime on every server. I want to know if there is a simple way to make Java use both its own cacerts and the OS cacerts.","title":"How to make the Java runtime use OS CA certchain?","body":"<p>For instance, usually I manage certchain on RHEL with <code>yum update ca-certificates</code>. How do I ensure that Java always includes these certchains into its runtime keystore? Is there any way to enforce this across all Java runtimes on a server</p>\n<p>An example for clarity</p>\n<p>Java stores its root CA in $JAVA_HOME/lib/security/cacerts. The OS typically stores its certificates elsewhere. Ubuntu uses /etc/ssl/certs. RHEL uses /etc/pki/ca-trust/.</p>\n<p>Obviously this is pretty annoying since if you need to integrate an internal CA, you have to update every Java runtime on every server. I want to know if there is a simple way to make Java use both its own cacerts and the OS cacerts.</p>\n"},{"tags":["java","kotlin","exception"],"answers":[{"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682176400,"post_id":76080280,"comment_id":134175793,"body_markdown":"Here is the same link - but for a [more recent version](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/class-use/IOException.html) of Java. Java 7 has not been updated [since 2015](https://www.java.com/en/download/help/java_7.html).","body":"Here is the same link - but for a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/class-use/IOException.html\" rel=\"nofollow noreferrer\">more recent version</a> of Java. Java 7 has not been updated <a href=\"https://www.java.com/en/download/help/java_7.html\" rel=\"nofollow noreferrer\">since 2015</a>."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682176454,"post_id":76080280,"comment_id":134175802,"body_markdown":"Bear in mind, also, that `IOException` has [subclasses](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/IOException.html) - and those may also have their own subclasses. I would suggest that this list of subclasses gives you a better sense of what various IO-related exceptions can be caused by, in core Java - such as `FileNotFoundException`.","body":"Bear in mind, also, that <code>IOException</code> has <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/IOException.html\" rel=\"nofollow noreferrer\">subclasses</a> - and those may also have their own subclasses. I would suggest that this list of subclasses gives you a better sense of what various IO-related exceptions can be caused by, in core Java - such as <code>FileNotFoundException</code>."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1682178859,"post_id":76080280,"comment_id":134176082,"body_markdown":"It&#39;s not only limited to java-defined classes, as I&#39;m sure you (Panibo) know. But to be explicit: any code you call, directly or indirectly, can have its own reasons for throwing an IOException, a java-defined subclass of IOException, or any implementor-defined subclass of any of those.  All you can hope is that the implementors of code you choose to use have chosen rationally.","body":"It&#39;s not only limited to java-defined classes, as I&#39;m sure you (Panibo) know. But to be explicit: any code you call, directly or indirectly, can have its own reasons for throwing an IOException, a java-defined subclass of IOException, or any implementor-defined subclass of any of those.  All you can hope is that the implementors of code you choose to use have chosen rationally."},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1682192287,"post_id":76080280,"comment_id":134177760,"body_markdown":"Generally though, when an exception is thrown it&#39;s a good idea to provide a value for `message` so the person debugging can see the reason why it happened. If you really want to provide the user with this information, you could display that message. But that&#39;s usually not very useful - the user doesn&#39;t need to see that technical information about why the program crashed, because it&#39;s not usually their fault (i.e. the app should prevent the crash). Any scenarios that *could be* their fault should be caught and handled explicitly, and then you can give them specific info about that specific case","body":"Generally though, when an exception is thrown it&#39;s a good idea to provide a value for <code>message</code> so the person debugging can see the reason why it happened. If you really want to provide the user with this information, you could display that message. But that&#39;s usually not very useful - the user doesn&#39;t need to see that technical information about why the program crashed, because it&#39;s not usually their fault (i.e. the app should prevent the crash). Any scenarios that <i>could be</i> their fault should be caught and handled explicitly, and then you can give them specific info about that specific case"}],"tags":[],"owner":{"account_id":23845626,"reputation":56,"user_id":17850148,"display_name":"Panibo"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682175465,"creation_date":1682175465,"answer_id":76080280,"question_id":76080214,"body_markdown":"Not sure if what you&#39;re trying to accomplish is even possible since any class can throw the exception for whatever specific reason. Meaning there&#39;s no clear answer to what throws them. You can of course check every single package and class in Java and what the reason is that it throws IOException, but this is a monumental task.\r\n\r\nThis site contains every use case for IOException. You need to navigate to each package and check where specifically the IOException happens and then unederstand what the reason behind the throw is.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/io/class-use/IOException.html","title":"All reasons that can throw IOException","body":"<p>Not sure if what you're trying to accomplish is even possible since any class can throw the exception for whatever specific reason. Meaning there's no clear answer to what throws them. You can of course check every single package and class in Java and what the reason is that it throws IOException, but this is a monumental task.</p>\n<p>This site contains every use case for IOException. You need to navigate to each package and check where specifically the IOException happens and then unederstand what the reason behind the throw is.</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/class-use/IOException.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/io/class-use/IOException.html</a></p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682777066,"creation_date":1682180934,"answer_id":76080714,"question_id":76080214,"body_markdown":"[@Panibo&#39;s answer][1] and the comments on it point out that is impractical (and maybe impossible) to enumerate all of the possible reasons that an `IOException` can occur.\r\n\r\nBut there are other ways to provide helpful diagnostic information to the user:\r\n\r\n  - List the *most likely* reasons to the user, based on what the I/O that the application does.  (For example, a program that doesn&#39;t do network I/O shouldn&#39;t get a networking related `IOException`.)\r\n  - Discriminate the likely subtype exceptions and report accordingly.\r\n  - Show the actual exception message to the user.\r\n  - Catch the `IOException` further up the stack.  Then:\r\n      - rethrow it as *different* custom exceptions that provide more contextual information for generating the user error message later, or\r\n      - report the error and terminate application immediately.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76080280/139985","title":"All reasons that can throw IOException","body":"<p><a href=\"https://stackoverflow.com/a/76080280/139985\">@Panibo's answer</a> and the comments on it point out that is impractical (and maybe impossible) to enumerate all of the possible reasons that an <code>IOException</code> can occur.</p>\n<p>But there are other ways to provide helpful diagnostic information to the user:</p>\n<ul>\n<li>List the <em>most likely</em> reasons to the user, based on what the I/O that the application does.  (For example, a program that doesn't do network I/O shouldn't get a networking related <code>IOException</code>.)</li>\n<li>Discriminate the likely subtype exceptions and report accordingly.</li>\n<li>Show the actual exception message to the user.</li>\n<li>Catch the <code>IOException</code> further up the stack.  Then:\n<ul>\n<li>rethrow it as <em>different</em> custom exceptions that provide more contextual information for generating the user error message later, or</li>\n<li>report the error and terminate application immediately.</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":17583350,"reputation":446,"user_id":13122058,"display_name":"AdisAlagic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682678476,"accepted_answer_id":76080280,"answer_count":2,"score":0,"last_activity_date":1682777066,"creation_date":1682174571,"question_id":76080214,"body_markdown":"I want to create detailed feedback for user and I want to specify all reasons/causes of `IOException`. Where can I find a list of all or at least a hint for most cases?","title":"All reasons that can throw IOException","body":"<p>I want to create detailed feedback for user and I want to specify all reasons/causes of <code>IOException</code>. Where can I find a list of all or at least a hint for most cases?</p>\n"},{"tags":["java","intellij-idea","javafx","fxml"],"answers":[{"tags":[],"owner":{"account_id":8057875,"reputation":550,"user_id":6077371,"display_name":"BenjaVR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1462535624,"creation_date":1462535624,"answer_id":37071721,"question_id":36934339,"body_markdown":"Seems like the `@style.css` does not work, instead I used the relative folder path, starting from the root (`src`): `/css/style.css`.","title":"Javafx WARNING: Resource &quot;style.css&quot; not found intellij","body":"<p>Seems like the <code>@style.css</code> does not work, instead I used the relative folder path, starting from the root (<code>src</code>): <code>/css/style.css</code>.</p>\n"},{"tags":[],"owner":{"account_id":26729543,"reputation":29,"user_id":20332134,"display_name":"AD5XJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682775881,"creation_date":1682601912,"answer_id":76120964,"question_id":36934339,"body_markdown":"I had to do it a bit differently. The problem was that I create the CSS dynamically based on stored settings (e.g. font family, font size, etc. with selection by the user). I called it dynamic.css.\r\n\r\nSo, what worked for me in my Main Window Controller was this:\r\n\r\n\tString csspath = &quot;&quot;;\r\n\ttry\r\n\t{\r\n\t\tcsspath = MainController.class.getResource(&quot;/CSS/dynamic.css&quot;).toExternalForm();\r\n\t\tmainscene.getStylesheets().add(csspath);\r\n\t}\r\n\tcatch ( Exception e )\r\n\t{\r\n\t\tString msg = &quot;\\nERROR MainController::loadStylesheet 2040: err=&quot;;\r\n\t\tmsg += e.getMessage();\r\n\t\tmsg += &quot;\\nURL:&quot;;\r\n\t\tmsg += csspath;\r\n\t\tmsg += &quot;\\n\\n&quot;;\r\n\t\tSystem.out.println(msg);\r\n\t\tmainscene.setCursor(Cursor.DEFAULT);\r\n\t}\r\n\r\n","title":"Javafx WARNING: Resource &quot;style.css&quot; not found intellij","body":"<p>I had to do it a bit differently. The problem was that I create the CSS dynamically based on stored settings (e.g. font family, font size, etc. with selection by the user). I called it dynamic.css.</p>\n<p>So, what worked for me in my Main Window Controller was this:</p>\n<pre><code>String csspath = &quot;&quot;;\ntry\n{\n    csspath = MainController.class.getResource(&quot;/CSS/dynamic.css&quot;).toExternalForm();\n    mainscene.getStylesheets().add(csspath);\n}\ncatch ( Exception e )\n{\n    String msg = &quot;\\nERROR MainController::loadStylesheet 2040: err=&quot;;\n    msg += e.getMessage();\n    msg += &quot;\\nURL:&quot;;\n    msg += csspath;\n    msg += &quot;\\n\\n&quot;;\n    System.out.println(msg);\n    mainscene.setCursor(Cursor.DEFAULT);\n}\n</code></pre>\n"}],"owner":{"account_id":8057875,"reputation":550,"user_id":6077371,"display_name":"BenjaVR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4611,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37071721,"answer_count":2,"score":1,"last_activity_date":1682775881,"creation_date":1461921329,"question_id":36934339,"body_markdown":"I am making a simple Javafx application with FXML.\r\nMy files are all in the same package:\r\n\r\n* MainApp.java\r\n* MainAppController.java\r\n* style.css\r\n* MainApp.fxml\r\n\r\nMy root tag from the `.fxml` file contains:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;GridPane fx:id=&quot;myRootPanel&quot;\r\n              alignment=&quot;CENTER&quot;\r\n              maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot;\r\n              minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; \r\n              stylesheets=&quot;@style.css&quot;\r\n              xmlns=&quot;http://javafx.com/javafx/8.0.65&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\r\n              fx:controller=&quot;sample.MainAppController&quot;&gt;\r\n\r\nas you see there is a `stylesheets=&quot;@style.css&quot;`, which was even autocompleted by Intellij.\r\n\r\nWhen I open this `.fxml` file in Scenebuilder, the css is applied correctly, but when I run the project, I get following console messages:\r\n\r\n`null/style.css` and `WARNING: Resource &quot;style.css&quot; not found.`\r\n\r\nI have added `*.css` to my Resource patterns, did a clean build, invalidated cache, but none of these resolve my problem.\r\n\r\nI tried to make a simple application in NetBeans, and when I run that project there, the CSS is applied correctly. Because of this, I think there might be a problem/setting in the Intellij IDE to solve this... Does anyone know what to do?\r\n\r\nThanks in advance.&lt;br/&gt;\r\nB.","title":"Javafx WARNING: Resource &quot;style.css&quot; not found intellij","body":"<p>I am making a simple Javafx application with FXML.\nMy files are all in the same package:</p>\n\n<ul>\n<li>MainApp.java</li>\n<li>MainAppController.java</li>\n<li>style.css</li>\n<li>MainApp.fxml</li>\n</ul>\n\n<p>My root tag from the <code>.fxml</code> file contains:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;GridPane fx:id=\"myRootPanel\"\n          alignment=\"CENTER\"\n          maxHeight=\"-Infinity\" maxWidth=\"-Infinity\"\n          minHeight=\"-Infinity\" minWidth=\"-Infinity\" \n          stylesheets=\"@style.css\"\n          xmlns=\"http://javafx.com/javafx/8.0.65\" xmlns:fx=\"http://javafx.com/fxml/1\"\n          fx:controller=\"sample.MainAppController\"&gt;\n</code></pre>\n\n<p>as you see there is a <code>stylesheets=\"@style.css\"</code>, which was even autocompleted by Intellij.</p>\n\n<p>When I open this <code>.fxml</code> file in Scenebuilder, the css is applied correctly, but when I run the project, I get following console messages:</p>\n\n<p><code>null/style.css</code> and <code>WARNING: Resource \"style.css\" not found.</code></p>\n\n<p>I have added <code>*.css</code> to my Resource patterns, did a clean build, invalidated cache, but none of these resolve my problem.</p>\n\n<p>I tried to make a simple application in NetBeans, and when I run that project there, the CSS is applied correctly. Because of this, I think there might be a problem/setting in the Intellij IDE to solve this... Does anyone know what to do?</p>\n\n<p>Thanks in advance.<br/>\nB.</p>\n"},{"tags":["java","json","graphql"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1679557639,"post_id":75820288,"comment_id":133743716,"body_markdown":"Maybe show how you are passing this JSON String from Java to GraphQL?","body":"Maybe show how you are passing this JSON String from Java to GraphQL?"},{"owner":{"account_id":13545735,"reputation":102,"user_id":9772107,"display_name":"Mojtaba jalambadani"},"score":0,"creation_date":1679557935,"post_id":75820288,"comment_id":133743793,"body_markdown":"To fix this issue, you can use a JSON parser to convert the JSON string into a JSON object before returning it as part of the GraphQL response. Then, the GraphQL serialization process will take care of serializing the JSON object into a string without adding any additional escape characters.\nBy using JSON.parse() to convert the JSON string into a JSON object before returning it as part of the GraphQL response, the serialization process will correctly serialize the JSON object into a string without adding any unwanted escape characters.","body":"To fix this issue, you can use a JSON parser to convert the JSON string into a JSON object before returning it as part of the GraphQL response. Then, the GraphQL serialization process will take care of serializing the JSON object into a string without adding any additional escape characters. By using JSON.parse() to convert the JSON string into a JSON object before returning it as part of the GraphQL response, the serialization process will correctly serialize the JSON object into a string without adding any unwanted escape characters."},{"owner":{"account_id":20489392,"reputation":51,"user_id":15035801,"display_name":"strz3lmno"},"score":0,"creation_date":1679560388,"post_id":75820288,"comment_id":133744317,"body_markdown":"@Mojtabajalambadani I tried this.. no luck though, still getting the characters.","body":"@Mojtabajalambadani I tried this.. no luck though, still getting the characters."}],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682775832,"creation_date":1682775832,"answer_id":76136545,"question_id":75820288,"body_markdown":"As the `payload` field is declared as a `String` in the schema, as `payload:String`, and is being set with a string value in the java code, it is a JSON blob in the response, instead of a JSON object. If the type of the payload field is changed to a custom object in the schema and in the java code, it will be a JSON object in the response. The new schema could be something like below:\r\n\r\n```graphql\r\ntype Query {\r\n  getValue: StringApiResponse\r\n}\r\n\r\ntype StringApiResponse {\r\n  statusCode: String!\r\n  message: String!\r\n  timestamp: String!\r\n  payload: Payload\r\n}\r\n\r\ntype Payload {\r\n  logo: String!\r\n  name: LanguageSpecificContent!\r\n  copyrightText: LanguageSpecificContent!\r\n  help: String!\r\n  termsAndCondition: String!\r\n}\r\n\r\ntype LanguageSpecificContent {\r\n  en: String!\r\n  ja: String!\r\n}\r\n```\r\n\r\nWith the above schema, we can use a query like below:\r\n\r\n```graphql\r\n{\r\n  getValue {\r\n    payload {\r\n        logo,\r\n        name {\r\n            en,\r\n            ja\r\n        },\r\n        copyrightText {\r\n            en,\r\n            ja\r\n        },\r\n        help,\r\n        termsAndCondition\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe above query returns the below response, with payload as a JSON object instead of a JSON string:\r\n\r\n```json\r\n{\r\n    &quot;data&quot;: {\r\n        &quot;getValue&quot;: {\r\n            &quot;payload&quot;: {\r\n                &quot;logo&quot;: &quot;http://logo&quot;,\r\n                &quot;name&quot;: {\r\n                    &quot;en&quot;: &quot;AAA&quot;,\r\n                    &quot;ja&quot;: &quot;aaa&quot;\r\n                },\r\n                &quot;copyrightText&quot;: {\r\n                    &quot;en&quot;: &quot;AAA&quot;,\r\n                    &quot;ja&quot;: &quot;aaa&quot;\r\n                },\r\n                &quot;help&quot;: &quot;http://help&quot;,\r\n                &quot;termsAndCondition&quot;: &quot;http://terms&quot;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe complete test application can be found on [github](https://github.com/devatherock/spring-boot-demo/tree/graphql-101)","title":"GraphQL response has unwanted escape characters","body":"<p>As the <code>payload</code> field is declared as a <code>String</code> in the schema, as <code>payload:String</code>, and is being set with a string value in the java code, it is a JSON blob in the response, instead of a JSON object. If the type of the payload field is changed to a custom object in the schema and in the java code, it will be a JSON object in the response. The new schema could be something like below:</p>\n<pre><code>type Query {\n  getValue: StringApiResponse\n}\n\ntype StringApiResponse {\n  statusCode: String!\n  message: String!\n  timestamp: String!\n  payload: Payload\n}\n\ntype Payload {\n  logo: String!\n  name: LanguageSpecificContent!\n  copyrightText: LanguageSpecificContent!\n  help: String!\n  termsAndCondition: String!\n}\n\ntype LanguageSpecificContent {\n  en: String!\n  ja: String!\n}\n</code></pre>\n<p>With the above schema, we can use a query like below:</p>\n<pre><code>{\n  getValue {\n    payload {\n        logo,\n        name {\n            en,\n            ja\n        },\n        copyrightText {\n            en,\n            ja\n        },\n        help,\n        termsAndCondition\n    }\n  }\n}\n</code></pre>\n<p>The above query returns the below response, with payload as a JSON object instead of a JSON string:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;data&quot;: {\n        &quot;getValue&quot;: {\n            &quot;payload&quot;: {\n                &quot;logo&quot;: &quot;http://logo&quot;,\n                &quot;name&quot;: {\n                    &quot;en&quot;: &quot;AAA&quot;,\n                    &quot;ja&quot;: &quot;aaa&quot;\n                },\n                &quot;copyrightText&quot;: {\n                    &quot;en&quot;: &quot;AAA&quot;,\n                    &quot;ja&quot;: &quot;aaa&quot;\n                },\n                &quot;help&quot;: &quot;http://help&quot;,\n                &quot;termsAndCondition&quot;: &quot;http://terms&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<p>The complete test application can be found on <a href=\"https://github.com/devatherock/spring-boot-demo/tree/graphql-101\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":20489392,"reputation":51,"user_id":15035801,"display_name":"strz3lmno"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682775832,"creation_date":1679557226,"question_id":75820288,"body_markdown":"My Java code receives a JSON string like this which is basically a JSON object without the structure.\r\n\r\n```\r\n{  &quot;logo&quot;: &quot;http://logo&quot;,  &quot;name&quot;: {    &quot;en&quot;: &quot;AAA&quot;,    &quot;ja&quot;: &quot;aaa&quot;  },  &quot;copyrightText&quot;: {    &quot;en&quot;: &quot;AAA&quot;,    &quot;ja&quot;: &quot;aaa&quot;  },  &quot;help&quot;: &quot;http://help&quot;,  &quot;termsAndCondition&quot;: &quot;http://terms&quot;}\r\n```\r\nI have a GraphQL endpoint that wants to retrieve this string, and I want the output response to contain exactly that. But what I&#39;m getting right now is:\r\n\r\n```\r\n&quot;{  \\&quot;logo\\&quot;: \\&quot;http://logo\\&quot;,  \\&quot;name\\&quot;: {    \\&quot;en\\&quot;: \\&quot;AAA\\&quot;,    \\&quot;ja\\&quot;: \\&quot;aaa\\&quot;  },  \\&quot;copyrightText\\&quot;: {    \\&quot;en\\&quot;: \\&quot;AAA\\&quot;,    \\&quot;ja\\&quot;: \\&quot;aaa\\&quot;  },  \\&quot;help\\&quot;: \\&quot;http://help\\&quot;,  \\&quot;termsAndCondition\\&quot;: \\&quot;http://terms\\&quot;}&quot;\r\n```\r\nWhere are these escape characters coming from? How to I get rid of them?\r\n\r\nMy GraphQL schema is as follows:\r\n\r\n```\r\ntype Query{\r\n    getValue: StringApiResponse\r\n}\r\n\r\ntype StringApiResponse{\r\n    statusCode:String!\r\n    message:String!\r\n    timestamp:String!\r\n    payload:String\r\n}\r\n```\r\nThis is how I&#39;m passing the string to the GraphQL from the Java code:\r\n```\r\n@QueryMapping(name = &quot;getValue&quot;)\r\n    public ApiResponse getValue(){\r\n        try {\r\n            String value = ValueService.getValue();\r\n            return ApiResponse.forStatus(StatusCode.S0000)\r\n                    .withMessage(StatusCode.S0000.getMessage())\r\n                    .withPayload(value);\r\n}\r\n```\r\n\r\nUpdate: It seems that the escape characters are being added by Java as it saves this variable to a String. \r\nI couldn&#39;t find a way to get rid of them, so I&#39;m parsing the String to JSON from the frontend using `JSON.parse`.","title":"GraphQL response has unwanted escape characters","body":"<p>My Java code receives a JSON string like this which is basically a JSON object without the structure.</p>\n<pre><code>{  &quot;logo&quot;: &quot;http://logo&quot;,  &quot;name&quot;: {    &quot;en&quot;: &quot;AAA&quot;,    &quot;ja&quot;: &quot;aaa&quot;  },  &quot;copyrightText&quot;: {    &quot;en&quot;: &quot;AAA&quot;,    &quot;ja&quot;: &quot;aaa&quot;  },  &quot;help&quot;: &quot;http://help&quot;,  &quot;termsAndCondition&quot;: &quot;http://terms&quot;}\n</code></pre>\n<p>I have a GraphQL endpoint that wants to retrieve this string, and I want the output response to contain exactly that. But what I'm getting right now is:</p>\n<pre><code>&quot;{  \\&quot;logo\\&quot;: \\&quot;http://logo\\&quot;,  \\&quot;name\\&quot;: {    \\&quot;en\\&quot;: \\&quot;AAA\\&quot;,    \\&quot;ja\\&quot;: \\&quot;aaa\\&quot;  },  \\&quot;copyrightText\\&quot;: {    \\&quot;en\\&quot;: \\&quot;AAA\\&quot;,    \\&quot;ja\\&quot;: \\&quot;aaa\\&quot;  },  \\&quot;help\\&quot;: \\&quot;http://help\\&quot;,  \\&quot;termsAndCondition\\&quot;: \\&quot;http://terms\\&quot;}&quot;\n</code></pre>\n<p>Where are these escape characters coming from? How to I get rid of them?</p>\n<p>My GraphQL schema is as follows:</p>\n<pre><code>type Query{\n    getValue: StringApiResponse\n}\n\ntype StringApiResponse{\n    statusCode:String!\n    message:String!\n    timestamp:String!\n    payload:String\n}\n</code></pre>\n<p>This is how I'm passing the string to the GraphQL from the Java code:</p>\n<pre><code>@QueryMapping(name = &quot;getValue&quot;)\n    public ApiResponse getValue(){\n        try {\n            String value = ValueService.getValue();\n            return ApiResponse.forStatus(StatusCode.S0000)\n                    .withMessage(StatusCode.S0000.getMessage())\n                    .withPayload(value);\n}\n</code></pre>\n<p>Update: It seems that the escape characters are being added by Java as it saves this variable to a String.\nI couldn't find a way to get rid of them, so I'm parsing the String to JSON from the frontend using <code>JSON.parse</code>.</p>\n"},{"tags":["java","oop","access-modifiers"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1682774045,"post_id":76136390,"comment_id":134269996,"body_markdown":"&quot;Because the spec says so&quot;. If your question is specifically about &#39;okay, which part of the spec&#39; - that doesn&#39;t feel like a stack overflow question (the JLS is right there, just go look it up, this is a developer help site, not &#39;how do I search the web for basic things&#39;). If the question is &#39;why did the java spec authors decide to do this&#39;, that also isn&#39;t a question this site is for.","body":"&quot;Because the spec says so&quot;. If your question is specifically about &#39;okay, which part of the spec&#39; - that doesn&#39;t feel like a stack overflow question (the JLS is right there, just go look it up, this is a developer help site, not &#39;how do I search the web for basic things&#39;). If the question is &#39;why did the java spec authors decide to do this&#39;, that also isn&#39;t a question this site is for."}],"owner":{"account_id":28454764,"reputation":11,"user_id":21772333,"display_name":"jihongkim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682774808,"answer_count":0,"score":0,"last_activity_date":1682774894,"creation_date":1682773551,"question_id":76136390,"body_markdown":"this is code.\r\n\r\n```java\r\nclass Node {\r\nprivate int number;\r\nint lotto = 3;\r\n\r\n    public Node(int number) {\r\n        this.number = number;\r\n    }\r\n    \r\n    public void setNumber(Node node) {\r\n        this.number = node.number; // why? \r\n    }\r\n\r\n}\r\n```\r\n\r\nwhy OOP allowed this situation?\r\nI&#39;m curious about your opinions.","title":"Why did oop allow other instances of the same class to ignore access modifier?","body":"<p>this is code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Node {\nprivate int number;\nint lotto = 3;\n\n    public Node(int number) {\n        this.number = number;\n    }\n    \n    public void setNumber(Node node) {\n        this.number = node.number; // why? \n    }\n\n}\n</code></pre>\n<p>why OOP allowed this situation?\nI'm curious about your opinions.</p>\n"},{"tags":["java","sleep"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682728017,"post_id":76133959,"comment_id":134266298,"body_markdown":"Because seing is single threaded (and not thread safe), you can’t block the event dispatching thread, otherwise ui can’t be updated. Use a swing Timer instead","body":"Because seing is single threaded (and not thread safe), you can’t block the event dispatching thread, otherwise ui can’t be updated. Use a swing Timer instead"}],"answers":[{"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682756489,"post_id":76134000,"comment_id":134268278,"body_markdown":"*&quot;The solution is instead to create a new thread which waits 400 milliseconds, and which then injects the code to remove&quot;* - Except Swing is not thread safe either, and you shouldn&#39;t modify the state the UI relies on from outside the context of the Event Dispatching Thread. While you&#39;ve mentioned a Swing `Timer`, &quot;suggesting&quot; the use of a `Thread` could lead to misunderstandings - I&#39;m just staying","body":"<i>&quot;The solution is instead to create a new thread which waits 400 milliseconds, and which then injects the code to remove&quot;</i> - Except Swing is not thread safe either, and you shouldn&#39;t modify the state the UI relies on from outside the context of the Event Dispatching Thread. While you&#39;ve mentioned a Swing <code>Timer</code>, &quot;suggesting&quot; the use of a <code>Thread</code> could lead to misunderstandings - I&#39;m just staying"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1682758514,"post_id":76134000,"comment_id":134268444,"body_markdown":"For actual background processing, I prefer `SwingWorker` over `Timer`. `Timer` still runs on the EDT, whereas most of `SwingWorker` runs in a different thread. Only the `process` and `done` methods run on the EDT.","body":"For actual background processing, I prefer <code>SwingWorker</code> over <code>Timer</code>. <code>Timer</code> still runs on the EDT, whereas most of <code>SwingWorker</code> runs in a different thread. Only the <code>process</code> and <code>done</code> methods run on the EDT."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1682798554,"post_id":76134000,"comment_id":134272981,"body_markdown":"@MadProgrammer You really need to read sentences until you hit a full stop before writing a comment. That very line you quote explicitly spells out you have to inject the UI-changing code __into the EDT__. You want me to write it in bold or something?","body":"@MadProgrammer You really need to read sentences until you hit a full stop before writing a comment. That very line you quote explicitly spells out you have to inject the UI-changing code <b>into the EDT</b>. You want me to write it in bold or something?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682806766,"post_id":76134000,"comment_id":134273916,"body_markdown":"@rzwitserloot I did read it, several times, until I understood you intent, which is why it&#39;s a comment and not a downvote. You should read my comment in full, as I was trying to say that it would be easily mis-understood by a novice developer, I&#39;m just saying - remember, the meaning of communication is determined by the receiver. If you prefer, I&#39;ll just drop a downvote next time and walk away","body":"@rzwitserloot I did read it, several times, until I understood you intent, which is why it&#39;s a comment and not a downvote. You should read my comment in full, as I was trying to say that it would be easily mis-understood by a novice developer, I&#39;m just saying - remember, the meaning of communication is determined by the receiver. If you prefer, I&#39;ll just drop a downvote next time and walk away"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1682728138,"creation_date":1682728138,"answer_id":76134000,"question_id":76133959,"body_markdown":"Almost all UI systems, and swing (which is what you are using here) is one of them, has this concept called the Event Dispatcher Thread, or EDT.\r\n\r\nThe EDT has a bunch of properties:\r\n\r\n* There is only one such thread.\r\n* Any interaction with the UI (as in, `jLabel.setText(&quot;Hello&quot;)`, removing or adding widgets, changing the colour of something, and so on) __must__ be done from the EDT. If you do it from any other thread, weird things will happen.\r\n* All event handlers (so, your on mouse click code and such) runs inside the EDT.\r\n* __You must never block the EDT__. The EDT is the thread that is taking caring of ensuring your program repaints itself if the user drags another window across your app&#39;s window (the OS doesn&#39;t remember those pixels! The OS just asks the app to redraw itself; sometimes the mouse pointer isn&#39;t a hardware sprite and leaves a &#39;trail&#39; in its wake). The EDT is also the thread that is taking care of e.g. if the user presses a button but doesn&#39;t let go, that the button is re-painted in a &#39;it is now pressed down&#39; look.\r\n\r\nEver seen a napp crash such that even pressing buttons doesn&#39;t do anything, or the thing just becomes a dull grey colour once you hide it and re-show it and even drag any window across it?\r\n\r\nThat&#39;d be an app that violated that rule.\r\n\r\nHere you are sleeping in the EDT. __This is forbidden__.\r\n\r\nBlocking acts:\r\n\r\n* Talking to a DB\r\n* Opening a file\r\n* Interacting with anything on the network\r\n* Waiting for a thread.\r\n* A `synchronized` anything.\r\n* `Thread.sleep`\r\n* and much, much more. Anything that would cause the thread to sleep as it cannot continue until some event occurs (disk ready with bytes, some time passes, a lock becomes free, and so on).\r\n\r\nThe solution is not to sleep 400 millisec and then act. The solution is instead to create a new thread which waits 400 milliseconds, and which then injects the code to remove, revalidate, and repaint back into the EDT (after all, that thread is not the EDT, so you can wait 400 millis in it, but you cannot act on the UI, because you must only do that from the EDT).\r\n\r\nThis is annoying, but somewhat common, so swing has a thing for it: [`SwingTimer`](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html).","title":"Why isn&#39;t my Thread.sleep() working as intended?","body":"<p>Almost all UI systems, and swing (which is what you are using here) is one of them, has this concept called the Event Dispatcher Thread, or EDT.</p>\n<p>The EDT has a bunch of properties:</p>\n<ul>\n<li>There is only one such thread.</li>\n<li>Any interaction with the UI (as in, <code>jLabel.setText(&quot;Hello&quot;)</code>, removing or adding widgets, changing the colour of something, and so on) <strong>must</strong> be done from the EDT. If you do it from any other thread, weird things will happen.</li>\n<li>All event handlers (so, your on mouse click code and such) runs inside the EDT.</li>\n<li><strong>You must never block the EDT</strong>. The EDT is the thread that is taking caring of ensuring your program repaints itself if the user drags another window across your app's window (the OS doesn't remember those pixels! The OS just asks the app to redraw itself; sometimes the mouse pointer isn't a hardware sprite and leaves a 'trail' in its wake). The EDT is also the thread that is taking care of e.g. if the user presses a button but doesn't let go, that the button is re-painted in a 'it is now pressed down' look.</li>\n</ul>\n<p>Ever seen a napp crash such that even pressing buttons doesn't do anything, or the thing just becomes a dull grey colour once you hide it and re-show it and even drag any window across it?</p>\n<p>That'd be an app that violated that rule.</p>\n<p>Here you are sleeping in the EDT. <strong>This is forbidden</strong>.</p>\n<p>Blocking acts:</p>\n<ul>\n<li>Talking to a DB</li>\n<li>Opening a file</li>\n<li>Interacting with anything on the network</li>\n<li>Waiting for a thread.</li>\n<li>A <code>synchronized</code> anything.</li>\n<li><code>Thread.sleep</code></li>\n<li>and much, much more. Anything that would cause the thread to sleep as it cannot continue until some event occurs (disk ready with bytes, some time passes, a lock becomes free, and so on).</li>\n</ul>\n<p>The solution is not to sleep 400 millisec and then act. The solution is instead to create a new thread which waits 400 milliseconds, and which then injects the code to remove, revalidate, and repaint back into the EDT (after all, that thread is not the EDT, so you can wait 400 millis in it, but you cannot act on the UI, because you must only do that from the EDT).</p>\n<p>This is annoying, but somewhat common, so swing has a thing for it: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"noreferrer\"><code>SwingTimer</code></a>.</p>\n"}],"owner":{"account_id":28450471,"reputation":23,"user_id":21768610,"display_name":"OwerTheBlobfish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76134000,"answer_count":1,"score":2,"last_activity_date":1682773677,"creation_date":1682727241,"question_id":76133959,"body_markdown":"My code currently looks like this, and I want to delay the process AFTER the release code takes place, but before the game starting, but currently it looks as if the release code doesn&#39;t occur at all. It looks as if after the delay, the start happens immediately after, which I don&#39;t want. If anyone can help, thanks. \r\n            \r\n\r\nThis is my code. \r\n\r\n```java\r\nstartButton.addMouseListener(new MouseListener() {\r\n    @Override\r\n    public void mouseClicked(MouseEvent e) {\r\n    }\r\n\r\n    @Override\r\n    public void mousePressed(MouseEvent e) {\r\n        // Press\r\n        startButton.setPreferredSize(new Dimension(240, 240));\r\n        startButton.setIcon(startButtonHover);\r\n        FRAME.pack();\r\n    }\r\n\r\n    @Override\r\n    public void mouseReleased(MouseEvent e) {\r\n        // Release\r\n        // NOT TRIGGERING AT ALL\r\n        startButton.setPreferredSize(new Dimension(256, 256));\r\n        startButton.setIcon(startButtonImage);\r\n        FRAME.pack();\r\n\r\n        try {\r\n            Thread.sleep(400);\r\n        } catch (InterruptedException e1) {\r\n            Thread.currentThread().interrupt();\r\n        }\r\n\r\n        // Game Start\r\n        FRAME.remove(menuPanel);\r\n        FRAME.revalidate();\r\n        FRAME.repaint();\r\n\r\n    }\r\n\r\n});\r\n```\r\n","title":"Why isn&#39;t my Thread.sleep() working as intended?","body":"<p>My code currently looks like this, and I want to delay the process AFTER the release code takes place, but before the game starting, but currently it looks as if the release code doesn't occur at all. It looks as if after the delay, the start happens immediately after, which I don't want. If anyone can help, thanks.</p>\n<p>This is my code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>startButton.addMouseListener(new MouseListener() {\n    @Override\n    public void mouseClicked(MouseEvent e) {\n    }\n\n    @Override\n    public void mousePressed(MouseEvent e) {\n        // Press\n        startButton.setPreferredSize(new Dimension(240, 240));\n        startButton.setIcon(startButtonHover);\n        FRAME.pack();\n    }\n\n    @Override\n    public void mouseReleased(MouseEvent e) {\n        // Release\n        // NOT TRIGGERING AT ALL\n        startButton.setPreferredSize(new Dimension(256, 256));\n        startButton.setIcon(startButtonImage);\n        FRAME.pack();\n\n        try {\n            Thread.sleep(400);\n        } catch (InterruptedException e1) {\n            Thread.currentThread().interrupt();\n        }\n\n        // Game Start\n        FRAME.remove(menuPanel);\n        FRAME.revalidate();\n        FRAME.repaint();\n\n    }\n\n});\n</code></pre>\n"},{"tags":["java","jackson"],"answers":[{"comments":[{"owner":{"account_id":1792694,"reputation":2334,"user_id":1632752,"accept_rate":60,"display_name":"gervais.b"},"score":0,"creation_date":1684238466,"post_id":76136363,"comment_id":134485648,"body_markdown":"Thanks. That&#39;s already a good entry point. However, I would like to limit the annotations to `@MyAnnotation` but can configure the mapper as much as needed.","body":"Thanks. That&#39;s already a good entry point. However, I would like to limit the annotations to <code>@MyAnnotation</code> but can configure the mapper as much as needed."}],"tags":[],"owner":{"account_id":9147861,"reputation":159,"user_id":6803365,"display_name":"Hans FooBar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682773585,"creation_date":1682773193,"answer_id":76136363,"question_id":76120278,"body_markdown":"I&#39;m working on a similar feature at the moment. Here is the example. I have renamed and shortened the classes. I hope that I have understood what you are looking for and that it helps you.\r\n\r\n**MyDto**\r\n\r\n```java\r\npublic class MyDto {\r\n    @MyAnnotation(value = &quot;FooBar&quot;)\r\n    @JsonSerialize(using = SpecialSerializer.class)\r\n    @JsonDeserialize(using = SpecialDeserializer.class)\r\n    private String special;\r\n}\r\n````\r\n**MyAnnotation**\r\n\r\n```java\r\n// Annotation\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\n@Documented\r\npublic @interface MyAnnotation {\r\n    String value() default &quot;&quot;;\r\n}\r\n````\r\n**SpecialSerializer**\r\n\r\n```java\r\npublic class SpecialSerializer extends JsonSerializer&lt;String&gt; implements ContextualSerializer {\r\n\r\n    private final String annotationValue;\r\n\r\n    public SalutationSerializer() {\r\n        this(null);\r\n    }\r\n\r\n    public SalutationSerializer(String annotationValue) {\r\n        this.annotationValue = annotationValue;\r\n    }\r\n\r\n    @Override\r\n    public void serialize(String popertyValue, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n        // this.annotationValue --&gt; &quot;FooBar&quot;\r\n        jsonGenerator.writeString(popertyValue + &quot;_manipulated&quot;);\r\n    }\r\n\r\n    @Override\r\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, BeanProperty property) {\r\n        return new SpecialSerializer(\r\n                new MyAnnotationReader().getValue(property)\r\n        );\r\n    }\r\n}\r\n````\r\n\r\n**SpecialDeserializer**\r\n\r\n```java\r\n// SpecialDeserializer\r\npublic class SpecialDeserializer extends JsonDeserializer&lt;String&gt; implements ContextualDeserializer {\r\n\r\n    private final String annotationValue;\r\n\r\n    public SpecialDeserializer() {\r\n        this(null, null);\r\n    }\r\n\r\n    public SpecialDeserializer(String annotationValue) {\r\n        this.annotationValue = annotationValue;\r\n    }\r\n\r\n    @Override\r\n    public String deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n        String popertyValue = jsonParser.getText();\r\n        // this.annotationValue --&gt; &quot;FooBar&quot;\r\n        return popertyValue + &quot;_manipulated&quot;;\r\n    }\r\n\r\n    @Override\r\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\r\n        return new SpecialDeserializer(\r\n            new MyAnnotationReader().getValue(property)\r\n        );\r\n    }\r\n}\r\n\r\n```\r\n\r\n**MyAnnotationReader**\r\n\r\n```java\r\npublic class MyAnnotationReader {\r\n\r\n    public String getMap(BeanProperty property) {\r\n        MyAnnotation annotation = property.getAnnotation(MyAnnotation.class);\r\n        return annotation.value();\r\n    }\r\n}\r\n```","title":"Jackson, custom &quot;writer&quot; for annotation","body":"<p>I'm working on a similar feature at the moment. Here is the example. I have renamed and shortened the classes. I hope that I have understood what you are looking for and that it helps you.</p>\n<p><strong>MyDto</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyDto {\n    @MyAnnotation(value = &quot;FooBar&quot;)\n    @JsonSerialize(using = SpecialSerializer.class)\n    @JsonDeserialize(using = SpecialDeserializer.class)\n    private String special;\n}\n</code></pre>\n<p><strong>MyAnnotation</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// Annotation\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\n@Documented\npublic @interface MyAnnotation {\n    String value() default &quot;&quot;;\n}\n</code></pre>\n<p><strong>SpecialSerializer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SpecialSerializer extends JsonSerializer&lt;String&gt; implements ContextualSerializer {\n\n    private final String annotationValue;\n\n    public SalutationSerializer() {\n        this(null);\n    }\n\n    public SalutationSerializer(String annotationValue) {\n        this.annotationValue = annotationValue;\n    }\n\n    @Override\n    public void serialize(String popertyValue, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        // this.annotationValue --&gt; &quot;FooBar&quot;\n        jsonGenerator.writeString(popertyValue + &quot;_manipulated&quot;);\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, BeanProperty property) {\n        return new SpecialSerializer(\n                new MyAnnotationReader().getValue(property)\n        );\n    }\n}\n</code></pre>\n<p><strong>SpecialDeserializer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// SpecialDeserializer\npublic class SpecialDeserializer extends JsonDeserializer&lt;String&gt; implements ContextualDeserializer {\n\n    private final String annotationValue;\n\n    public SpecialDeserializer() {\n        this(null, null);\n    }\n\n    public SpecialDeserializer(String annotationValue) {\n        this.annotationValue = annotationValue;\n    }\n\n    @Override\n    public String deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        String popertyValue = jsonParser.getText();\n        // this.annotationValue --&gt; &quot;FooBar&quot;\n        return popertyValue + &quot;_manipulated&quot;;\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\n        return new SpecialDeserializer(\n            new MyAnnotationReader().getValue(property)\n        );\n    }\n}\n\n</code></pre>\n<p><strong>MyAnnotationReader</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyAnnotationReader {\n\n    public String getMap(BeanProperty property) {\n        MyAnnotation annotation = property.getAnnotation(MyAnnotation.class);\n        return annotation.value();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1792694,"reputation":2334,"user_id":1632752,"accept_rate":60,"display_name":"gervais.b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682773585,"creation_date":1682597574,"question_id":76120278,"body_markdown":"I would like to provide a specific writer and reader for one custom annotation. \r\n\r\nI do have some classes that need a specific format for fields. The ideal solution would be to create a custom annotation and provide my own classes to read and write fields annotated with it.\r\n\r\n```\r\nclass SampleWithSpecificFormat {\r\n\r\n  @MyAnnotation\r\n  private String special; // Written and read via a custom class\r\n}\r\n```\r\n\r\nDo you have any resources explaining how to do that?\r\n","title":"Jackson, custom &quot;writer&quot; for annotation","body":"<p>I would like to provide a specific writer and reader for one custom annotation.</p>\n<p>I do have some classes that need a specific format for fields. The ideal solution would be to create a custom annotation and provide my own classes to read and write fields annotated with it.</p>\n<pre><code>class SampleWithSpecificFormat {\n\n  @MyAnnotation\n  private String special; // Written and read via a custom class\n}\n</code></pre>\n<p>Do you have any resources explaining how to do that?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":4751155,"reputation":4879,"user_id":3841161,"display_name":"coladict"},"score":0,"creation_date":1628078286,"post_id":68644206,"comment_id":121324353,"body_markdown":"This really isn&#39;t done by Hibernate, it&#39;s entirely a Spring feature. Specifically it&#39;s done by [spring-data-jpa](https://github.com/spring-projects/spring-data-jpa)","body":"This really isn&#39;t done by Hibernate, it&#39;s entirely a Spring feature. Specifically it&#39;s done by <a href=\"https://github.com/spring-projects/spring-data-jpa\" rel=\"nofollow noreferrer\">spring-data-jpa</a>"}],"answers":[{"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1628039420,"post_id":68644259,"comment_id":121313620,"body_markdown":"Specifically, OP is looking for `JpaRepositoryFactory`.","body":"Specifically, OP is looking for <code>JpaRepositoryFactory</code>."}],"tags":[],"owner":{"account_id":1365317,"reputation":909,"user_id":1301881,"accept_rate":100,"display_name":"James Gawron"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628038922,"creation_date":1628038922,"answer_id":68644259,"question_id":68644206,"body_markdown":"If you check the import statement for your JpaRepository\r\n   \r\n    extends JpaRepository&lt;Team, Long&gt; {\r\n\r\nI think you&#39;ll find that you are using Spring Data ... If this is the case this is what is providing the Repository implementation you are looking for.","title":"How does the JPA repository implementation get created","body":"<p>If you check the import statement for your JpaRepository</p>\n<pre><code>extends JpaRepository&lt;Team, Long&gt; {\n</code></pre>\n<p>I think you'll find that you are using Spring Data ... If this is the case this is what is providing the Repository implementation you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":15888858,"reputation":1,"user_id":11464569,"display_name":"HARSH SHET"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682773363,"creation_date":1682583386,"answer_id":76118217,"question_id":68644206,"body_markdown":"The class `org.springframework.data.jpa.repository.support.SimpleJPARepository` contains the implementation for `JPARepository`","title":"How does the JPA repository implementation get created","body":"<p>The class <code>org.springframework.data.jpa.repository.support.SimpleJPARepository</code> contains the implementation for <code>JPARepository</code></p>\n"}],"owner":{"account_id":22374457,"reputation":1,"user_id":16588962,"display_name":"aBitConfused"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682773363,"creation_date":1628038254,"question_id":68644206,"body_markdown":"Im trying to understand what happens in a JPA repository and not treat it like a black box.\r\nLets assume that I&#39;ve got an interface that&#39;s extending JPA repository. \r\n\r\n```java\r\n@Repository\r\npublic interface TeamRepository extends JpaRepository&lt;Team, Long&gt; {\r\n}\r\n```\r\nAs far as I understand JPA is just a specification and what we do is chose a provider which is compliant with it, I normally use Hibernate.\r\nFrom my understanding hibernate actually supplies an implementation of the JpaRepository. 1. I tried looking at the hibernate source code, by grepping the &quot;findAll&quot; method of in order to find an implementing class, but it has been used only in the unit tests trough SessionFactory. And while all of this helped me get some kind of a grasp on the inner workings, I still haven&#39;t found a concrete implementation and I&#39;m starting to think that I&#39;m missing something. \r\n2. I tried looking at the target folder, but there are no generated sources. &lt;br&gt;\r\n\r\nHow does the implementation get created, is there a concrete implementation in Hibernate, I have the feeling that I&#39;ve simplified the concept and it&#39;s much more complex. &lt;br&gt;\r\nIf that&#39;s the case can I find it&#39;s implementation in non-byte code form in an application that&#39;s using JPA repositories?\r\n\r\n","title":"How does the JPA repository implementation get created","body":"<p>Im trying to understand what happens in a JPA repository and not treat it like a black box.\nLets assume that I've got an interface that's extending JPA repository.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface TeamRepository extends JpaRepository&lt;Team, Long&gt; {\n}\n</code></pre>\n<p>As far as I understand JPA is just a specification and what we do is chose a provider which is compliant with it, I normally use Hibernate.\nFrom my understanding hibernate actually supplies an implementation of the JpaRepository. 1. I tried looking at the hibernate source code, by grepping the &quot;findAll&quot; method of in order to find an implementing class, but it has been used only in the unit tests trough SessionFactory. And while all of this helped me get some kind of a grasp on the inner workings, I still haven't found a concrete implementation and I'm starting to think that I'm missing something.\n2. I tried looking at the target folder, but there are no generated sources. <br></p>\n<p>How does the implementation get created, is there a concrete implementation in Hibernate, I have the feeling that I've simplified the concept and it's much more complex. <br>\nIf that's the case can I find it's implementation in non-byte code form in an application that's using JPA repositories?</p>\n"},{"tags":["java","jsp","servlets","weblogic","java-ee-6"],"comments":[{"owner":{"account_id":16328672,"reputation":463,"user_id":11792620,"display_name":"Viktor Mukhachev"},"score":0,"creation_date":1688051895,"post_id":76134054,"comment_id":135024830,"body_markdown":"this AgentInjectingResponseWrapper is here when Dynatrace OneAgent software is installed, can it affect?","body":"this AgentInjectingResponseWrapper is here when Dynatrace OneAgent software is installed, can it affect?"},{"owner":{"account_id":21179898,"reputation":233,"user_id":15574511,"display_name":"Yash Falke"},"score":0,"creation_date":1695973751,"post_id":76134054,"comment_id":136097249,"body_markdown":"I am also facing same issue is this issue solved?","body":"I am also facing same issue is this issue solved?"}],"owner":{"account_id":18727158,"reputation":11,"user_id":13653500,"display_name":"Sudheer HS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682773313,"creation_date":1682729412,"question_id":76134054,"body_markdown":"I am facing peculiar issue on weblogic the execption says:\r\n\r\n```\r\nweblogic 12.4.X Servlet failed with an Exception java.lang.IllegalStateException: Can&#39;t reset\r\n```\r\n\r\nStackTrace is as below:\r\n\r\n```\r\n&lt;[ServletContext@501586899[app:XXX module:XXX  path:null spec-version:3.1]] Servlet failed with an Exception\r\njava.lang.IllegalStateException: Can&#39;t reset\r\nat com.github.ziplet.filter.compression.ThresholdOutputStream.reset(ThresholdOutputStream.java:140)\r\nat com.github.ziplet.filter.compression.CompressingServletOutputStream.reset(CompressingServletOutputStream.java:109)\r\nat com.github.ziplet.filter.compression.CompressingHttpServletResponse.resetBuffer(CompressingHttpServletResponse.java:287)\r\nat com.dynatrace.agent.introspection.uem.impl.BaseUemResponseHook.resetBuffer(BaseUemResponseHook.java:120)\r\nat com.dynatrace.agent.introspection.uem.impl.AgentInjectingUemResponseHook.resetBuffer(AgentInjectingUemResponseHook.java:305)\r\nat com.dynatrace.agent.introspection.uem.impl.AgentInjectingResponseWrapper.resetBuffer(AgentInjectingResponseWrapper.java:80)\r\nat weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:131)\r\nat com.XXXXX.YYYServlet.doPost(LoginServlet.java:228) \r\n```\r\n\r\nBelow is the code:\r\n\r\nThe same is working in another weblogic managed server, having same version of java.\r\n\r\nSimple redirect to a new JSP page.\r\n\r\nJSP page is directly accessible, only from the servlet its give this exception in on of the managed servers,\r\nbut works on the managed server.\r\n\r\n```\r\nif (stringX != null &amp;&amp; &quot;Y&quot;.equals(stringX )) {\r\nrd = request.getRequestDispatcher(&quot;/MyJSP1.jsp&quot;);\r\n} else {\r\nrd = request.getRequestDispatcher(&quot;/MyJSP2.jsp&quot;);\r\n}\r\nrd.forward(request, response);//LINE 228\r\n```\r\n\r\n","title":"weblogic 12.4.X Servlet failed with an Exception java.lang.IllegalStateException: Can&#39;t reset","body":"<p>I am facing peculiar issue on weblogic the execption says:</p>\n<pre><code>weblogic 12.4.X Servlet failed with an Exception java.lang.IllegalStateException: Can't reset\n</code></pre>\n<p>StackTrace is as below:</p>\n<pre><code>&lt;[ServletContext@501586899[app:XXX module:XXX  path:null spec-version:3.1]] Servlet failed with an Exception\njava.lang.IllegalStateException: Can't reset\nat com.github.ziplet.filter.compression.ThresholdOutputStream.reset(ThresholdOutputStream.java:140)\nat com.github.ziplet.filter.compression.CompressingServletOutputStream.reset(CompressingServletOutputStream.java:109)\nat com.github.ziplet.filter.compression.CompressingHttpServletResponse.resetBuffer(CompressingHttpServletResponse.java:287)\nat com.dynatrace.agent.introspection.uem.impl.BaseUemResponseHook.resetBuffer(BaseUemResponseHook.java:120)\nat com.dynatrace.agent.introspection.uem.impl.AgentInjectingUemResponseHook.resetBuffer(AgentInjectingUemResponseHook.java:305)\nat com.dynatrace.agent.introspection.uem.impl.AgentInjectingResponseWrapper.resetBuffer(AgentInjectingResponseWrapper.java:80)\nat weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:131)\nat com.XXXXX.YYYServlet.doPost(LoginServlet.java:228) \n</code></pre>\n<p>Below is the code:</p>\n<p>The same is working in another weblogic managed server, having same version of java.</p>\n<p>Simple redirect to a new JSP page.</p>\n<p>JSP page is directly accessible, only from the servlet its give this exception in on of the managed servers,\nbut works on the managed server.</p>\n<pre><code>if (stringX != null &amp;&amp; &quot;Y&quot;.equals(stringX )) {\nrd = request.getRequestDispatcher(&quot;/MyJSP1.jsp&quot;);\n} else {\nrd = request.getRequestDispatcher(&quot;/MyJSP2.jsp&quot;);\n}\nrd.forward(request, response);//LINE 228\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"owner":{"account_id":39763,"reputation":11414,"user_id":114865,"accept_rate":92,"display_name":"bear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682773301,"creation_date":1682772147,"question_id":76136287,"body_markdown":"I am importing / scanning `@RestController` classes from an external bundle through the OSGi framework. \r\n\r\nSo far, to enable handling of controllers from external bundles, I&#39;ve had to write a custom `HandlerAdapter` which supports it:\r\n\r\n```\r\nprivate final Set&lt;Class&lt;? extends Annotation&gt;&gt; acceptedAnnotation = Set.of(Controller.class, RestController.class);\r\n\r\n@Override\r\n    public boolean supports(Object handler) {\r\n        return handler.getClass().getClassLoader() instanceof BundleReference &amp;&amp;\r\n            acceptedAnnotation.stream().anyMatch(a -&gt; handler.getClass().isAnnotationPresent(a));\r\n    }\r\n```\r\n\r\nA sample controller from a bundle looks like:\r\n\r\n```\r\n@RestController\r\npublic class TestController {\r\n\r\n    @GetMapping()\r\n    public Map&lt;String, String&gt; getWelcomeMessage() {\r\n        return Map.of(&quot;all&quot;, &quot;ok&quot;);\r\n    }\r\n}\r\n```\r\n\r\nIf I omit the custom `HandlerAdapter`, then Spring doesn&#39;t have a `HandlerAdapter` to handle the controllers - I suspect the line below is required:\r\n\r\n```\r\nhandler.getClass().getClassLoader() instanceof BundleReference\r\n```\r\n\r\n```\r\njava.lang.ClassCastException: class net.shamil.dxc.sample.controller.TestController cannot be cast to class org.springframework.web.method.HandlerMethod (net.shamil.dxc.sample.controller.TestController is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @6136998b; org.springframework.web.method.HandlerMethod is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @402f32ff)\r\n```\r\n\r\nIs there a way I can get Spring to automatically map response types such that I don&#39;t need to have a custom `HandlerAdapter` and can use the `@RestController` and `@GetMapping` Request Mapping automatically?\r\n\r\nTrying to use `RequestMappingHandlerAdapter` internally brings exceptions `ClassCastException` as the Controller class is in a different bundle. ","title":"Adding Spring controllers from different bundles","body":"<p>I am importing / scanning <code>@RestController</code> classes from an external bundle through the OSGi framework.</p>\n<p>So far, to enable handling of controllers from external bundles, I've had to write a custom <code>HandlerAdapter</code> which supports it:</p>\n<pre><code>private final Set&lt;Class&lt;? extends Annotation&gt;&gt; acceptedAnnotation = Set.of(Controller.class, RestController.class);\n\n@Override\n    public boolean supports(Object handler) {\n        return handler.getClass().getClassLoader() instanceof BundleReference &amp;&amp;\n            acceptedAnnotation.stream().anyMatch(a -&gt; handler.getClass().isAnnotationPresent(a));\n    }\n</code></pre>\n<p>A sample controller from a bundle looks like:</p>\n<pre><code>@RestController\npublic class TestController {\n\n    @GetMapping()\n    public Map&lt;String, String&gt; getWelcomeMessage() {\n        return Map.of(&quot;all&quot;, &quot;ok&quot;);\n    }\n}\n</code></pre>\n<p>If I omit the custom <code>HandlerAdapter</code>, then Spring doesn't have a <code>HandlerAdapter</code> to handle the controllers - I suspect the line below is required:</p>\n<pre><code>handler.getClass().getClassLoader() instanceof BundleReference\n</code></pre>\n<pre><code>java.lang.ClassCastException: class net.shamil.dxc.sample.controller.TestController cannot be cast to class org.springframework.web.method.HandlerMethod (net.shamil.dxc.sample.controller.TestController is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @6136998b; org.springframework.web.method.HandlerMethod is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @402f32ff)\n</code></pre>\n<p>Is there a way I can get Spring to automatically map response types such that I don't need to have a custom <code>HandlerAdapter</code> and can use the <code>@RestController</code> and <code>@GetMapping</code> Request Mapping automatically?</p>\n<p>Trying to use <code>RequestMappingHandlerAdapter</code> internally brings exceptions <code>ClassCastException</code> as the Controller class is in a different bundle.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":2,"creation_date":1502892217,"post_id":45715064,"comment_id":78389388,"body_markdown":"It seems like your are only interested in a completely mathematical max/min only solution. In that case you should **clearly state so** in your question. You can see at the current answers that most try to help you by showing you some neat functions of the Java API instead of posting a pure mathematical expression like @nagendra547 did, because you did not clearly express what you want.","body":"It seems like your are only interested in a completely mathematical max/min only solution. In that case you should <b>clearly state so</b> in your question. You can see at the current answers that most try to help you by showing you some neat functions of the Java API instead of posting a pure mathematical expression like @nagendra547 did, because you did not clearly express what you want."},{"owner":{"account_id":11561701,"reputation":11,"user_id":8471210,"display_name":"abhishek dutta"},"score":0,"creation_date":1502900122,"post_id":45715064,"comment_id":78395092,"body_markdown":"yeah sorry for it","body":"yeah sorry for it"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1506267841,"post_id":45715064,"comment_id":79740887,"body_markdown":"If an user answered your question please also accept his answer ([Accepting Answers: How does it work?](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much.","body":"If an user answered your question please also accept his answer (<a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">Accepting Answers: How does it work?</a>). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much."}],"answers":[{"comments":[{"owner":{"account_id":5277236,"reputation":8320,"user_id":4213662,"accept_rate":80,"display_name":"Persixty"},"score":2,"creation_date":1502892269,"post_id":45715318,"comment_id":78389425,"body_markdown":"@Zabuza Because a+b+c is the sum. The first term max of max is the max of all three. the second term is min of min which is the min of all three. So sum of all three minus the max and the min must equal the middle value!","body":"@Zabuza Because a+b+c is the sum. The first term max of max is the max of all three. the second term is min of min which is the min of all three. So sum of all three minus the max and the min must equal the middle value!"},{"owner":{"account_id":10063010,"reputation":5822,"user_id":7438973,"accept_rate":44,"display_name":"nagendra547"},"score":0,"creation_date":1502940179,"post_id":45715318,"comment_id":78409672,"body_markdown":"@abhishekdutta If you think, my reply answered your question, you can accept it. To mark an answer as accepted, click on the check mark beside the answer to toggle it from greyed out to filled in. :)","body":"@abhishekdutta If you think, my reply answered your question, you can accept it. To mark an answer as accepted, click on the check mark beside the answer to toggle it from greyed out to filled in. :)"}],"tags":[],"owner":{"account_id":10063010,"reputation":5822,"user_id":7438973,"accept_rate":44,"display_name":"nagendra547"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1502892492,"creation_date":1502891104,"answer_id":45715318,"question_id":45715064,"body_markdown":"Simple solution to get 2nd max.\r\n\r\n    a+b+c - Math.max(Math.max(a,b),c)- Math.min(Math.min(a,b),c)\r\n\r\n----------\r\n\r\nWe want to find the element in the middle. Therefore we find the maximum and minimum of all three values:\r\n\r\n    int maximum = Math.max(Math.max(a,b),c)\r\n    int minimum = Math.min(Math.min(a,b),c)\r\n\r\nWe can now get the element in the middle, the missing element, by finding the difference between all elements and the minimum and maximum.\r\n\r\n    int allElements = a + b + c;\r\n    int minAndMax = maximum + minimum;\r\n    int difference = allElements - minAndMax\r\n\r\nThe `difference` is now the element in the middle, the second maximum.","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>Simple solution to get 2nd max.</p>\n\n<pre><code>a+b+c - Math.max(Math.max(a,b),c)- Math.min(Math.min(a,b),c)\n</code></pre>\n\n<hr>\n\n<p>We want to find the element in the middle. Therefore we find the maximum and minimum of all three values:</p>\n\n<pre><code>int maximum = Math.max(Math.max(a,b),c)\nint minimum = Math.min(Math.min(a,b),c)\n</code></pre>\n\n<p>We can now get the element in the middle, the missing element, by finding the difference between all elements and the minimum and maximum.</p>\n\n<pre><code>int allElements = a + b + c;\nint minAndMax = maximum + minimum;\nint difference = allElements - minAndMax\n</code></pre>\n\n<p>The <code>difference</code> is now the element in the middle, the second maximum.</p>\n"},{"tags":[],"owner":{"account_id":234401,"reputation":2133,"user_id":500514,"accept_rate":91,"display_name":"panagdu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1502891127,"creation_date":1502891127,"answer_id":45715326,"question_id":45715064,"body_markdown":"Add the elements in an array and then sort the array. In your case something like: \r\n\r\n    Integer[] array = {a,b,c};\r\n    Arrays.sort(array);\r\n    return array[array.length-2];","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>Add the elements in an array and then sort the array. In your case something like: </p>\n\n<pre><code>Integer[] array = {a,b,c};\nArrays.sort(array);\nreturn array[array.length-2];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502891145,"creation_date":1502891145,"answer_id":45715336,"question_id":45715064,"body_markdown":"You could identify in a first stream processing the max value and in a second stream processing the second max value by filtering the first one :\r\n\r\n    void cal(int a,int b,int c){\r\n\r\n      final int[] values = new int[]{a, b,c};\r\n    \r\n       int max = Arrays.stream(values)\r\n    \t.max().getAsInt();\r\n    \r\n       int secondMax = Arrays.stream(values)\r\n        \t.filter(i -&gt; i &lt; max).max().getAsInt();    \t \r\n    }","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>You could identify in a first stream processing the max value and in a second stream processing the second max value by filtering the first one :</p>\n\n<pre><code>void cal(int a,int b,int c){\n\n  final int[] values = new int[]{a, b,c};\n\n   int max = Arrays.stream(values)\n    .max().getAsInt();\n\n   int secondMax = Arrays.stream(values)\n        .filter(i -&gt; i &lt; max).max().getAsInt();      \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11561701,"reputation":11,"user_id":8471210,"display_name":"abhishek dutta"},"score":0,"creation_date":1502891597,"post_id":45715351,"comment_id":78388958,"body_markdown":"no array no loop no if else nothing only max and min function","body":"no array no loop no if else nothing only max and min function"}],"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1502892684,"creation_date":1502891179,"answer_id":45715351,"question_id":45715064,"body_markdown":"You can find the maximum, remove it and then find it again. This approach has the advantage that it also works for arbitrary many inputs.\r\n\r\n    void cal(int a, int b, int c) {\r\n        ArrayList&lt;Integer&gt; values = new ArrayList&lt;&gt;(3);\r\n        values.add(a);\r\n        values.add(b);\r\n        values.add(c);\r\n\r\n        Integer maxValue = Collections.max(values);\r\n        // Remove object, not index\r\n        values.remove(maxValue);\r\n\r\n        int secondMax = Collections.max(values);\r\n        System.out.print(&quot;2nd max&quot; + secondMax)\r\n    }\r\n\r\n----------\r\n\r\nOr in the case for **just 3 elements** you could simply **sort it** (like @panagdu suggests). It does **not add an overhead** because after finding the second maximum number you already know the **complete order** for 3 elements.\r\n\r\n    void cal(int a, int b, int c) {\r\n        int[] values = new int[] {a, b, c};\r\n\r\n        // Sorts in-place using efficient sorting algorithms\r\n        Arrays.sort(values);\r\n\r\n        // The first element is now the smallest, the last the biggest,\r\n        // we take the element in the middle\r\n        System.out.print(&quot;2nd max&quot; + values[1]);\r\n    }\r\n\r\n----------\r\n\r\nWith Java 8 you can also use `Stream`, they have the advantage that they can easily be executed in parallel. But I doubt that this would help for sorting 3 elements... anyway, here is a snippet:\r\n\r\n    void cal(int a, int b, int c) {\r\n        int value = IntStream.of(a, b, c).sorted().toArray()[1];\r\n\r\n        System.out.print(&quot;2nd max&quot; + value);\r\n    }","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>You can find the maximum, remove it and then find it again. This approach has the advantage that it also works for arbitrary many inputs.</p>\n\n<pre><code>void cal(int a, int b, int c) {\n    ArrayList&lt;Integer&gt; values = new ArrayList&lt;&gt;(3);\n    values.add(a);\n    values.add(b);\n    values.add(c);\n\n    Integer maxValue = Collections.max(values);\n    // Remove object, not index\n    values.remove(maxValue);\n\n    int secondMax = Collections.max(values);\n    System.out.print(\"2nd max\" + secondMax)\n}\n</code></pre>\n\n<hr>\n\n<p>Or in the case for <strong>just 3 elements</strong> you could simply <strong>sort it</strong> (like @panagdu suggests). It does <strong>not add an overhead</strong> because after finding the second maximum number you already know the <strong>complete order</strong> for 3 elements.</p>\n\n<pre><code>void cal(int a, int b, int c) {\n    int[] values = new int[] {a, b, c};\n\n    // Sorts in-place using efficient sorting algorithms\n    Arrays.sort(values);\n\n    // The first element is now the smallest, the last the biggest,\n    // we take the element in the middle\n    System.out.print(\"2nd max\" + values[1]);\n}\n</code></pre>\n\n<hr>\n\n<p>With Java 8 you can also use <code>Stream</code>, they have the advantage that they can easily be executed in parallel. But I doubt that this would help for sorting 3 elements... anyway, here is a snippet:</p>\n\n<pre><code>void cal(int a, int b, int c) {\n    int value = IntStream.of(a, b, c).sorted().toArray()[1];\n\n    System.out.print(\"2nd max\" + value);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502891878,"creation_date":1502891878,"answer_id":45715596,"question_id":45715064,"body_markdown":"First of all, you should note that Java API `Math.max` the method also uses `if` check to find the max value.\r\n\r\nYou can stream the three `int` values to sort and find the 2nd max value as shown below:\r\n\r\n    void cal(int a, int b, int c) {\r\n        int secondMax = Arrays.asList(a, b, c).stream().\r\n                          sorted().mapToInt(num -&gt; num).toArray()[1];\r\n        System.out.println(secondMax);\r\n    }","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>First of all, you should note that Java API <code>Math.max</code> the method also uses <code>if</code> check to find the max value.</p>\n\n<p>You can stream the three <code>int</code> values to sort and find the 2nd max value as shown below:</p>\n\n<pre><code>void cal(int a, int b, int c) {\n    int secondMax = Arrays.asList(a, b, c).stream().\n                      sorted().mapToInt(num -&gt; num).toArray()[1];\n    System.out.println(secondMax);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502892328,"creation_date":1502892328,"answer_id":45715761,"question_id":45715064,"body_markdown":"Add to `List` and remove the max and min values.\r\n\r\n    static int secondGreatestNumber(int a, int b, int c)\r\n    {\r\n        List&lt;Integer&gt; numbers = new ArrayList();\r\n        numbers.add(a);\r\n        numbers.add(b);\r\n        numbers.add(c);\r\n        \r\n        \r\n        numbers.remove(new Integer(Math.max(a, Math.max(b, c))));//remove max value\r\n        numbers.remove(new Integer(Math.min(a, Math.min(b, c))));//remove min value\r\n        \r\n        return numbers.get(0);\r\n    }","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<p>Add to <code>List</code> and remove the max and min values.</p>\n\n<pre><code>static int secondGreatestNumber(int a, int b, int c)\n{\n    List&lt;Integer&gt; numbers = new ArrayList();\n    numbers.add(a);\n    numbers.add(b);\n    numbers.add(c);\n\n\n    numbers.remove(new Integer(Math.max(a, Math.max(b, c))));//remove max value\n    numbers.remove(new Integer(Math.min(a, Math.min(b, c))));//remove min value\n\n    return numbers.get(0);\n}\n</code></pre>\n"}],"owner":{"account_id":11561701,"reputation":11,"user_id":8471210,"display_name":"abhishek dutta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3758,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1682772587,"creation_date":1502890435,"question_id":45715064,"body_markdown":"    void cal(int a,int b,int c)\r\n     {\r\n            int x=Math.max(a,b);\r\n            int y=Math.max(b,c);\r\n            int z=Math.max(a,c);\r\n            int z1=Math.max(x,y);\r\n            int z2=Math.max(z1,z);\r\n            System.out.print(&quot;2nd max&quot;+z2)\r\n      }\r\n\r\n\r\nabove code is used to find second max number among 3 numbers using max and min function. is there any shortcut code to find that without if else or ternary operator only by using max and min function.","title":"second maximum number among three numbers without using if else or ternary operator. using max and min function","body":"<pre><code>void cal(int a,int b,int c)\n {\n        int x=Math.max(a,b);\n        int y=Math.max(b,c);\n        int z=Math.max(a,c);\n        int z1=Math.max(x,y);\n        int z2=Math.max(z1,z);\n        System.out.print(\"2nd max\"+z2)\n  }\n</code></pre>\n\n<p>above code is used to find second max number among 3 numbers using max and min function. is there any shortcut code to find that without if else or ternary operator only by using max and min function.</p>\n"},{"tags":["java","json","prometheus","jq","metrics"],"comments":[{"owner":{"account_id":27803721,"reputation":201,"user_id":21227665,"display_name":"hrystynaKb"},"score":1,"creation_date":1678184901,"post_id":75660722,"comment_id":133480304,"body_markdown":"Looks like here is the answer: https://stackoverflow.com/questions/57844617/prometheus-json-metrics","body":"Looks like here is the answer: <a href=\"https://stackoverflow.com/questions/57844617/prometheus-json-metrics\" title=\"prometheus json metrics\">stackoverflow.com/questions/57844617/prometheus-json-metrics</a>"}],"answers":[{"tags":[],"owner":{"account_id":10094874,"reputation":447,"user_id":7460613,"display_name":"nntrn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682772048,"creation_date":1682772048,"answer_id":76136278,"question_id":75660722,"body_markdown":"Maybe something like this?\r\n\r\n```jq\r\npaths(scalars) as $p \r\n| &quot;\\($p|join(&quot;_&quot;)|gsub(&quot;[^\\\\w_.-]&quot;;&quot;&quot;))=\\(getpath($p)|@sh)&quot;\r\n```\r\n\r\n```shell-session\r\n$ jq -r &#39;paths(scalars) as $p | &quot;\\($p|join(&quot;_&quot;)|gsub(&quot;[^\\\\w_.-]&quot;;&quot;&quot;))=\\(getpath($p)|@sh)&quot;&#39; file.json \r\n\r\nversion=&#39;3.0.0&#39;\r\ngauges_gc.G1-Old-Generation.count_value=0\r\ngauges_gc.G1-Old-Generation.time_value=0\r\ngauges_gc.G1-Young-Generation.count_value=30\r\ngauges_gc.G1-Young-Generation.time_value=427\r\ngauges_jvm.name_value=&#39;7@hubstorage&#39;\r\ngauges_jvm.uptime_value=44799\r\ngauges_jvm.vendor_value=&#39;Azul Systems, Inc. OpenJDK 64-Bit Server VM 11.0.8+10-LTS (11)&#39;\r\ngauges_memory.heap.committed_value=208666624\r\ngauges_memory.heap.init_value=65011712\r\ngauges_memory.heap.max_value=1035993088\r\ngauges_memory.heap.usage_value=0.11967882164094129\r\ngauges_memory.heap.used_value=123986432\r\ngauges_memory.non-heap.committed_value=114434048\r\ngauges_memory.non-heap.init_value=7667712\r\ngauges_memory.non-heap.max_value=-1\r\ngauges_memory.non-heap.usage_value=-108223704\r\ngauges_memory.non-heap.used_value=108223704\r\ngauges_memory.pools.CodeHeap-non-nmethods.committed_value=2555904\r\ngauges_memory.pools.CodeHeap-non-nmethods.init_value=2555904\r\ngauges_memory.pools.CodeHeap-non-nmethods.max_value=5832704\r\ngauges_memory.pools.CodeHeap-non-nmethods.usage_value=0.23114905196629212\r\ngauges_memory.pools.CodeHeap-non-nmethods.used_value=1348224\r\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.committed_value=3670016\r\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.init_value=2555904\r\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.max_value=122912768\r\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.usage_value=0.029816007398027193\r\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.used_value=3664768\r\ngauges_memory.pools.CodeHeap-profiled-nmethods.committed_value=12517376\r\ngauges_memory.pools.CodeHeap-profiled-nmethods.init_value=2555904\r\ngauges_memory.pools.CodeHeap-profiled-nmethods.max_value=122912768\r\ngauges_memory.pools.CodeHeap-profiled-nmethods.usage_value=0.10141253998933618\r\ngauges_memory.pools.CodeHeap-profiled-nmethods.used_value=12464896\r\ngauges_memory.pools.Compressed-Class-Space.committed_value=12267520\r\ngauges_memory.pools.Compressed-Class-Space.init_value=0\r\ngauges_memory.pools.Compressed-Class-Space.max_value=1073741824\r\ngauges_memory.pools.Compressed-Class-Space.usage_value=0.010960675776004791\r\ngauges_memory.pools.Compressed-Class-Space.used_value=11768936\r\ngauges_memory.pools.G1-Eden-Space.committed_value=118489088\r\ngauges_memory.pools.G1-Eden-Space.init_value=15728640\r\ngauges_memory.pools.G1-Eden-Space.max_value=-1\r\ngauges_memory.pools.G1-Eden-Space.usage_value=0.6548672566371682\r\ngauges_memory.pools.G1-Eden-Space.used_value=77594624\r\ngauges_memory.pools.G1-Old-Gen.committed_value=82837504\r\ngauges_memory.pools.G1-Old-Gen.init_value=49283072\r\ngauges_memory.pools.G1-Old-Gen.max_value=1035993088\r\ngauges_memory.pools.G1-Old-Gen.usage_value=0.0376950159729251\r\ngauges_memory.pools.G1-Old-Gen.used_value=39051776\r\ngauges_memory.pools.G1-Survivor-Space.committed_value=7340032\r\ngauges_memory.pools.G1-Survivor-Space.init_value=0\r\ngauges_memory.pools.G1-Survivor-Space.max_value=-1\r\ngauges_memory.pools.G1-Survivor-Space.usage_value=1\r\ngauges_memory.pools.G1-Survivor-Space.used_value=7340032\r\ngauges_memory.pools.Metaspace.committed_value=83423232\r\ngauges_memory.pools.Metaspace.init_value=0\r\ngauges_memory.pools.Metaspace.max_value=-1\r\ngauges_memory.pools.Metaspace.usage_value=0.9467012738130309\r\ngauges_memory.pools.Metaspace.used_value=78976880\r\ngauges_memory.total.committed_value=323100672\r\ngauges_memory.total.init_value=72679424\r\ngauges_memory.total.max_value=1035993087\r\ngauges_memory.total.used_value=232210136\r\ngauges_threads.blocked.count_value=0\r\ngauges_threads.count_value=34\r\ngauges_threads.daemon.count_value=14\r\ngauges_threads.deadlock.count_value=0\r\ngauges_threads.new.count_value=0\r\ngauges_threads.runnable.count_value=11\r\ngauges_threads.terminated.count_value=0\r\ngauges_threads.timed_waiting.count_value=17\r\ngauges_threads.waiting.count_value=6\r\ncounters_counter_count=1\r\nhistograms_histogram_count=3\r\nhistograms_histogram_max=100\r\nhistograms_histogram_mean=41.66666666666666\r\nhistograms_histogram_min=5\r\nhistograms_histogram_p50=20\r\nhistograms_histogram_p75=100\r\nhistograms_histogram_p95=100\r\nhistograms_histogram_p98=100\r\nhistograms_histogram_p99=100\r\nhistograms_histogram_p999=100\r\nhistograms_histogram_stddev=41.69998667732268\r\nmeters_meter_count=201\r\nmeters_meter_m15_rate=38.666674566183616\r\nmeters_meter_m1_rate=22.433012859955905\r\nmeters_meter_m5_rate=35.77324719371856\r\nmeters_meter_mean_rate=4.944024762580441\r\nmeters_meter_units=&#39;events/second&#39;\r\n\r\n```","title":"Convert JSON to prometheus readable format","body":"<p>Maybe something like this?</p>\n<pre><code>paths(scalars) as $p \n| &quot;\\($p|join(&quot;_&quot;)|gsub(&quot;[^\\\\w_.-]&quot;;&quot;&quot;))=\\(getpath($p)|@sh)&quot;\n</code></pre>\n<pre><code>$ jq -r 'paths(scalars) as $p | &quot;\\($p|join(&quot;_&quot;)|gsub(&quot;[^\\\\w_.-]&quot;;&quot;&quot;))=\\(getpath($p)|@sh)&quot;' file.json \n\nversion='3.0.0'\ngauges_gc.G1-Old-Generation.count_value=0\ngauges_gc.G1-Old-Generation.time_value=0\ngauges_gc.G1-Young-Generation.count_value=30\ngauges_gc.G1-Young-Generation.time_value=427\ngauges_jvm.name_value='7@hubstorage'\ngauges_jvm.uptime_value=44799\ngauges_jvm.vendor_value='Azul Systems, Inc. OpenJDK 64-Bit Server VM 11.0.8+10-LTS (11)'\ngauges_memory.heap.committed_value=208666624\ngauges_memory.heap.init_value=65011712\ngauges_memory.heap.max_value=1035993088\ngauges_memory.heap.usage_value=0.11967882164094129\ngauges_memory.heap.used_value=123986432\ngauges_memory.non-heap.committed_value=114434048\ngauges_memory.non-heap.init_value=7667712\ngauges_memory.non-heap.max_value=-1\ngauges_memory.non-heap.usage_value=-108223704\ngauges_memory.non-heap.used_value=108223704\ngauges_memory.pools.CodeHeap-non-nmethods.committed_value=2555904\ngauges_memory.pools.CodeHeap-non-nmethods.init_value=2555904\ngauges_memory.pools.CodeHeap-non-nmethods.max_value=5832704\ngauges_memory.pools.CodeHeap-non-nmethods.usage_value=0.23114905196629212\ngauges_memory.pools.CodeHeap-non-nmethods.used_value=1348224\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.committed_value=3670016\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.init_value=2555904\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.max_value=122912768\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.usage_value=0.029816007398027193\ngauges_memory.pools.CodeHeap-non-profiled-nmethods.used_value=3664768\ngauges_memory.pools.CodeHeap-profiled-nmethods.committed_value=12517376\ngauges_memory.pools.CodeHeap-profiled-nmethods.init_value=2555904\ngauges_memory.pools.CodeHeap-profiled-nmethods.max_value=122912768\ngauges_memory.pools.CodeHeap-profiled-nmethods.usage_value=0.10141253998933618\ngauges_memory.pools.CodeHeap-profiled-nmethods.used_value=12464896\ngauges_memory.pools.Compressed-Class-Space.committed_value=12267520\ngauges_memory.pools.Compressed-Class-Space.init_value=0\ngauges_memory.pools.Compressed-Class-Space.max_value=1073741824\ngauges_memory.pools.Compressed-Class-Space.usage_value=0.010960675776004791\ngauges_memory.pools.Compressed-Class-Space.used_value=11768936\ngauges_memory.pools.G1-Eden-Space.committed_value=118489088\ngauges_memory.pools.G1-Eden-Space.init_value=15728640\ngauges_memory.pools.G1-Eden-Space.max_value=-1\ngauges_memory.pools.G1-Eden-Space.usage_value=0.6548672566371682\ngauges_memory.pools.G1-Eden-Space.used_value=77594624\ngauges_memory.pools.G1-Old-Gen.committed_value=82837504\ngauges_memory.pools.G1-Old-Gen.init_value=49283072\ngauges_memory.pools.G1-Old-Gen.max_value=1035993088\ngauges_memory.pools.G1-Old-Gen.usage_value=0.0376950159729251\ngauges_memory.pools.G1-Old-Gen.used_value=39051776\ngauges_memory.pools.G1-Survivor-Space.committed_value=7340032\ngauges_memory.pools.G1-Survivor-Space.init_value=0\ngauges_memory.pools.G1-Survivor-Space.max_value=-1\ngauges_memory.pools.G1-Survivor-Space.usage_value=1\ngauges_memory.pools.G1-Survivor-Space.used_value=7340032\ngauges_memory.pools.Metaspace.committed_value=83423232\ngauges_memory.pools.Metaspace.init_value=0\ngauges_memory.pools.Metaspace.max_value=-1\ngauges_memory.pools.Metaspace.usage_value=0.9467012738130309\ngauges_memory.pools.Metaspace.used_value=78976880\ngauges_memory.total.committed_value=323100672\ngauges_memory.total.init_value=72679424\ngauges_memory.total.max_value=1035993087\ngauges_memory.total.used_value=232210136\ngauges_threads.blocked.count_value=0\ngauges_threads.count_value=34\ngauges_threads.daemon.count_value=14\ngauges_threads.deadlock.count_value=0\ngauges_threads.new.count_value=0\ngauges_threads.runnable.count_value=11\ngauges_threads.terminated.count_value=0\ngauges_threads.timed_waiting.count_value=17\ngauges_threads.waiting.count_value=6\ncounters_counter_count=1\nhistograms_histogram_count=3\nhistograms_histogram_max=100\nhistograms_histogram_mean=41.66666666666666\nhistograms_histogram_min=5\nhistograms_histogram_p50=20\nhistograms_histogram_p75=100\nhistograms_histogram_p95=100\nhistograms_histogram_p98=100\nhistograms_histogram_p99=100\nhistograms_histogram_p999=100\nhistograms_histogram_stddev=41.69998667732268\nmeters_meter_count=201\nmeters_meter_m15_rate=38.666674566183616\nmeters_meter_m1_rate=22.433012859955905\nmeters_meter_m5_rate=35.77324719371856\nmeters_meter_mean_rate=4.944024762580441\nmeters_meter_units='events/second'\n\n</code></pre>\n"}],"owner":{"account_id":2410596,"reputation":111,"user_id":2105747,"accept_rate":0,"display_name":"shaheer01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682772048,"creation_date":1678184673,"question_id":75660722,"body_markdown":"This is my API response in JSON format. Not able to convert it to Prometheus format using jq or any other better approach to capture the metrics on Prometheus UI.\r\n```json\r\n{\r\n  &quot;version&quot;: &quot;3.0.0&quot;,\r\n  &quot;gauges&quot;: {\r\n    &quot;gc.G1-Old-Generation.count&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;gc.G1-Old-Generation.time&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;gc.G1-Young-Generation.count&quot;: {\r\n      &quot;value&quot;: 30\r\n    },\r\n    &quot;gc.G1-Young-Generation.time&quot;: {\r\n      &quot;value&quot;: 427\r\n    },\r\n    &quot;jvm.name&quot;: {\r\n      &quot;value&quot;: &quot;7@hubstorage&quot;\r\n    },\r\n    &quot;jvm.uptime&quot;: {\r\n      &quot;value&quot;: 44799\r\n    },\r\n    &quot;jvm.vendor&quot;: {\r\n      &quot;value&quot;: &quot;Azul Systems, Inc. OpenJDK 64-Bit Server VM 11.0.8+10-LTS (11)&quot;\r\n    },\r\n    &quot;memory.heap.committed&quot;: {\r\n      &quot;value&quot;: 208666624\r\n    },\r\n    &quot;memory.heap.init&quot;: {\r\n      &quot;value&quot;: 65011712\r\n    },\r\n    &quot;memory.heap.max&quot;: {\r\n      &quot;value&quot;: 1035993088\r\n    },\r\n    &quot;memory.heap.usage&quot;: {\r\n      &quot;value&quot;: 0.11967882164094129\r\n    },\r\n    &quot;memory.heap.used&quot;: {\r\n      &quot;value&quot;: 123986432\r\n    },\r\n    &quot;memory.non-heap.committed&quot;: {\r\n      &quot;value&quot;: 114434048\r\n    },\r\n    &quot;memory.non-heap.init&quot;: {\r\n      &quot;value&quot;: 7667712\r\n    },\r\n    &quot;memory.non-heap.max&quot;: {\r\n      &quot;value&quot;: -1\r\n    },\r\n    &quot;memory.non-heap.usage&quot;: {\r\n      &quot;value&quot;: -108223704\r\n    },\r\n    &quot;memory.non-heap.used&quot;: {\r\n      &quot;value&quot;: 108223704\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-nmethods&#39;.committed&quot;: {\r\n      &quot;value&quot;: 2555904\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-nmethods&#39;.init&quot;: {\r\n      &quot;value&quot;: 2555904\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-nmethods&#39;.max&quot;: {\r\n      &quot;value&quot;: 5832704\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-nmethods&#39;.usage&quot;: {\r\n      &quot;value&quot;: 0.23114905196629212\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-nmethods&#39;.used&quot;: {\r\n      &quot;value&quot;: 1348224\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-profiled-nmethods&#39;.committed&quot;: {\r\n      &quot;value&quot;: 3670016\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-profiled-nmethods&#39;.init&quot;: {\r\n      &quot;value&quot;: 2555904\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-profiled-nmethods&#39;.max&quot;: {\r\n      &quot;value&quot;: 122912768\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-profiled-nmethods&#39;.usage&quot;: {\r\n      &quot;value&quot;: 0.029816007398027193\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;non-profiled-nmethods&#39;.used&quot;: {\r\n      &quot;value&quot;: 3664768\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;profiled-nmethods&#39;.committed&quot;: {\r\n      &quot;value&quot;: 12517376\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;profiled-nmethods&#39;.init&quot;: {\r\n      &quot;value&quot;: 2555904\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;profiled-nmethods&#39;.max&quot;: {\r\n      &quot;value&quot;: 122912768\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;profiled-nmethods&#39;.usage&quot;: {\r\n      &quot;value&quot;: 0.10141253998933618\r\n    },\r\n    &quot;memory.pools.CodeHeap-&#39;profiled-nmethods&#39;.used&quot;: {\r\n      &quot;value&quot;: 12464896\r\n    },\r\n    &quot;memory.pools.Compressed-Class-Space.committed&quot;: {\r\n      &quot;value&quot;: 12267520\r\n    },\r\n    &quot;memory.pools.Compressed-Class-Space.init&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;memory.pools.Compressed-Class-Space.max&quot;: {\r\n      &quot;value&quot;: 1073741824\r\n    },\r\n    &quot;memory.pools.Compressed-Class-Space.usage&quot;: {\r\n      &quot;value&quot;: 0.010960675776004791\r\n    },\r\n    &quot;memory.pools.Compressed-Class-Space.used&quot;: {\r\n      &quot;value&quot;: 11768936\r\n    },\r\n    &quot;memory.pools.G1-Eden-Space.committed&quot;: {\r\n      &quot;value&quot;: 118489088\r\n    },\r\n    &quot;memory.pools.G1-Eden-Space.init&quot;: {\r\n      &quot;value&quot;: 15728640\r\n    },\r\n    &quot;memory.pools.G1-Eden-Space.max&quot;: {\r\n      &quot;value&quot;: -1\r\n    },\r\n    &quot;memory.pools.G1-Eden-Space.usage&quot;: {\r\n      &quot;value&quot;: 0.6548672566371682\r\n    },\r\n    &quot;memory.pools.G1-Eden-Space.used&quot;: {\r\n      &quot;value&quot;: 77594624\r\n    },\r\n    &quot;memory.pools.G1-Old-Gen.committed&quot;: {\r\n      &quot;value&quot;: 82837504\r\n    },\r\n    &quot;memory.pools.G1-Old-Gen.init&quot;: {\r\n      &quot;value&quot;: 49283072\r\n    },\r\n    &quot;memory.pools.G1-Old-Gen.max&quot;: {\r\n      &quot;value&quot;: 1035993088\r\n    },\r\n    &quot;memory.pools.G1-Old-Gen.usage&quot;: {\r\n      &quot;value&quot;: 0.0376950159729251\r\n    },\r\n    &quot;memory.pools.G1-Old-Gen.used&quot;: {\r\n      &quot;value&quot;: 39051776\r\n    },\r\n    &quot;memory.pools.G1-Survivor-Space.committed&quot;: {\r\n      &quot;value&quot;: 7340032\r\n    },\r\n    &quot;memory.pools.G1-Survivor-Space.init&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;memory.pools.G1-Survivor-Space.max&quot;: {\r\n      &quot;value&quot;: -1\r\n    },\r\n    &quot;memory.pools.G1-Survivor-Space.usage&quot;: {\r\n      &quot;value&quot;: 1\r\n    },\r\n    &quot;memory.pools.G1-Survivor-Space.used&quot;: {\r\n      &quot;value&quot;: 7340032\r\n    },\r\n    &quot;memory.pools.Metaspace.committed&quot;: {\r\n      &quot;value&quot;: 83423232\r\n    },\r\n    &quot;memory.pools.Metaspace.init&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;memory.pools.Metaspace.max&quot;: {\r\n      &quot;value&quot;: -1\r\n    },\r\n    &quot;memory.pools.Metaspace.usage&quot;: {\r\n      &quot;value&quot;: 0.9467012738130309\r\n    },\r\n    &quot;memory.pools.Metaspace.used&quot;: {\r\n      &quot;value&quot;: 78976880\r\n    },\r\n    &quot;memory.total.committed&quot;: {\r\n      &quot;value&quot;: 323100672\r\n    },\r\n    &quot;memory.total.init&quot;: {\r\n      &quot;value&quot;: 72679424\r\n    },\r\n    &quot;memory.total.max&quot;: {\r\n      &quot;value&quot;: 1035993087\r\n    },\r\n    &quot;memory.total.used&quot;: {\r\n      &quot;value&quot;: 232210136\r\n    },\r\n    &quot;threads.blocked.count&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;threads.count&quot;: {\r\n      &quot;value&quot;: 34\r\n    },\r\n    &quot;threads.daemon.count&quot;: {\r\n      &quot;value&quot;: 14\r\n    },\r\n    &quot;threads.deadlock.count&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;threads.deadlocks&quot;: {\r\n      &quot;value&quot;: []\r\n    },\r\n    &quot;threads.new.count&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;threads.runnable.count&quot;: {\r\n      &quot;value&quot;: 11\r\n    },\r\n    &quot;threads.terminated.count&quot;: {\r\n      &quot;value&quot;: 0\r\n    },\r\n    &quot;threads.timed_waiting.count&quot;: {\r\n      &quot;value&quot;: 17\r\n    },\r\n    &quot;threads.waiting.count&quot;: {\r\n      &quot;value&quot;: 6\r\n    }\r\n  },\r\n  &quot;counters&quot;: {\r\n    &quot;counter&quot;: {\r\n      &quot;count&quot;: 1\r\n    }\r\n  },\r\n  &quot;histograms&quot;: {\r\n    &quot;histogram&quot;: {\r\n      &quot;count&quot;: 3,\r\n      &quot;max&quot;: 100,\r\n      &quot;mean&quot;: 41.66666666666666,\r\n      &quot;min&quot;: 5,\r\n      &quot;p50&quot;: 20,\r\n      &quot;p75&quot;: 100,\r\n      &quot;p95&quot;: 100,\r\n      &quot;p98&quot;: 100,\r\n      &quot;p99&quot;: 100,\r\n      &quot;p999&quot;: 100,\r\n      &quot;stddev&quot;: 41.69998667732268\r\n    }\r\n  },\r\n  &quot;meters&quot;: {\r\n    &quot;meter&quot;: {\r\n      &quot;count&quot;: 201,\r\n      &quot;m15_rate&quot;: 38.666674566183616,\r\n      &quot;m1_rate&quot;: 22.433012859955905,\r\n      &quot;m5_rate&quot;: 35.77324719371856,\r\n      &quot;mean_rate&quot;: 4.944024762580441,\r\n      &quot;units&quot;: &quot;events/second&quot;\r\n    }\r\n  },\r\n  &quot;timers&quot;: {}\r\n}\r\n```\r\nGetting the following error on Prometheus:\r\n&quot;INVALID&quot; is not a valid start token\r\n","title":"Convert JSON to prometheus readable format","body":"<p>This is my API response in JSON format. Not able to convert it to Prometheus format using jq or any other better approach to capture the metrics on Prometheus UI.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;version&quot;: &quot;3.0.0&quot;,\n  &quot;gauges&quot;: {\n    &quot;gc.G1-Old-Generation.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;gc.G1-Old-Generation.time&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;gc.G1-Young-Generation.count&quot;: {\n      &quot;value&quot;: 30\n    },\n    &quot;gc.G1-Young-Generation.time&quot;: {\n      &quot;value&quot;: 427\n    },\n    &quot;jvm.name&quot;: {\n      &quot;value&quot;: &quot;7@hubstorage&quot;\n    },\n    &quot;jvm.uptime&quot;: {\n      &quot;value&quot;: 44799\n    },\n    &quot;jvm.vendor&quot;: {\n      &quot;value&quot;: &quot;Azul Systems, Inc. OpenJDK 64-Bit Server VM 11.0.8+10-LTS (11)&quot;\n    },\n    &quot;memory.heap.committed&quot;: {\n      &quot;value&quot;: 208666624\n    },\n    &quot;memory.heap.init&quot;: {\n      &quot;value&quot;: 65011712\n    },\n    &quot;memory.heap.max&quot;: {\n      &quot;value&quot;: 1035993088\n    },\n    &quot;memory.heap.usage&quot;: {\n      &quot;value&quot;: 0.11967882164094129\n    },\n    &quot;memory.heap.used&quot;: {\n      &quot;value&quot;: 123986432\n    },\n    &quot;memory.non-heap.committed&quot;: {\n      &quot;value&quot;: 114434048\n    },\n    &quot;memory.non-heap.init&quot;: {\n      &quot;value&quot;: 7667712\n    },\n    &quot;memory.non-heap.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;memory.non-heap.usage&quot;: {\n      &quot;value&quot;: -108223704\n    },\n    &quot;memory.non-heap.used&quot;: {\n      &quot;value&quot;: 108223704\n    },\n    &quot;memory.pools.CodeHeap-'non-nmethods'.committed&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;memory.pools.CodeHeap-'non-nmethods'.init&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;memory.pools.CodeHeap-'non-nmethods'.max&quot;: {\n      &quot;value&quot;: 5832704\n    },\n    &quot;memory.pools.CodeHeap-'non-nmethods'.usage&quot;: {\n      &quot;value&quot;: 0.23114905196629212\n    },\n    &quot;memory.pools.CodeHeap-'non-nmethods'.used&quot;: {\n      &quot;value&quot;: 1348224\n    },\n    &quot;memory.pools.CodeHeap-'non-profiled-nmethods'.committed&quot;: {\n      &quot;value&quot;: 3670016\n    },\n    &quot;memory.pools.CodeHeap-'non-profiled-nmethods'.init&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;memory.pools.CodeHeap-'non-profiled-nmethods'.max&quot;: {\n      &quot;value&quot;: 122912768\n    },\n    &quot;memory.pools.CodeHeap-'non-profiled-nmethods'.usage&quot;: {\n      &quot;value&quot;: 0.029816007398027193\n    },\n    &quot;memory.pools.CodeHeap-'non-profiled-nmethods'.used&quot;: {\n      &quot;value&quot;: 3664768\n    },\n    &quot;memory.pools.CodeHeap-'profiled-nmethods'.committed&quot;: {\n      &quot;value&quot;: 12517376\n    },\n    &quot;memory.pools.CodeHeap-'profiled-nmethods'.init&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;memory.pools.CodeHeap-'profiled-nmethods'.max&quot;: {\n      &quot;value&quot;: 122912768\n    },\n    &quot;memory.pools.CodeHeap-'profiled-nmethods'.usage&quot;: {\n      &quot;value&quot;: 0.10141253998933618\n    },\n    &quot;memory.pools.CodeHeap-'profiled-nmethods'.used&quot;: {\n      &quot;value&quot;: 12464896\n    },\n    &quot;memory.pools.Compressed-Class-Space.committed&quot;: {\n      &quot;value&quot;: 12267520\n    },\n    &quot;memory.pools.Compressed-Class-Space.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;memory.pools.Compressed-Class-Space.max&quot;: {\n      &quot;value&quot;: 1073741824\n    },\n    &quot;memory.pools.Compressed-Class-Space.usage&quot;: {\n      &quot;value&quot;: 0.010960675776004791\n    },\n    &quot;memory.pools.Compressed-Class-Space.used&quot;: {\n      &quot;value&quot;: 11768936\n    },\n    &quot;memory.pools.G1-Eden-Space.committed&quot;: {\n      &quot;value&quot;: 118489088\n    },\n    &quot;memory.pools.G1-Eden-Space.init&quot;: {\n      &quot;value&quot;: 15728640\n    },\n    &quot;memory.pools.G1-Eden-Space.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;memory.pools.G1-Eden-Space.usage&quot;: {\n      &quot;value&quot;: 0.6548672566371682\n    },\n    &quot;memory.pools.G1-Eden-Space.used&quot;: {\n      &quot;value&quot;: 77594624\n    },\n    &quot;memory.pools.G1-Old-Gen.committed&quot;: {\n      &quot;value&quot;: 82837504\n    },\n    &quot;memory.pools.G1-Old-Gen.init&quot;: {\n      &quot;value&quot;: 49283072\n    },\n    &quot;memory.pools.G1-Old-Gen.max&quot;: {\n      &quot;value&quot;: 1035993088\n    },\n    &quot;memory.pools.G1-Old-Gen.usage&quot;: {\n      &quot;value&quot;: 0.0376950159729251\n    },\n    &quot;memory.pools.G1-Old-Gen.used&quot;: {\n      &quot;value&quot;: 39051776\n    },\n    &quot;memory.pools.G1-Survivor-Space.committed&quot;: {\n      &quot;value&quot;: 7340032\n    },\n    &quot;memory.pools.G1-Survivor-Space.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;memory.pools.G1-Survivor-Space.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;memory.pools.G1-Survivor-Space.usage&quot;: {\n      &quot;value&quot;: 1\n    },\n    &quot;memory.pools.G1-Survivor-Space.used&quot;: {\n      &quot;value&quot;: 7340032\n    },\n    &quot;memory.pools.Metaspace.committed&quot;: {\n      &quot;value&quot;: 83423232\n    },\n    &quot;memory.pools.Metaspace.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;memory.pools.Metaspace.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;memory.pools.Metaspace.usage&quot;: {\n      &quot;value&quot;: 0.9467012738130309\n    },\n    &quot;memory.pools.Metaspace.used&quot;: {\n      &quot;value&quot;: 78976880\n    },\n    &quot;memory.total.committed&quot;: {\n      &quot;value&quot;: 323100672\n    },\n    &quot;memory.total.init&quot;: {\n      &quot;value&quot;: 72679424\n    },\n    &quot;memory.total.max&quot;: {\n      &quot;value&quot;: 1035993087\n    },\n    &quot;memory.total.used&quot;: {\n      &quot;value&quot;: 232210136\n    },\n    &quot;threads.blocked.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;threads.count&quot;: {\n      &quot;value&quot;: 34\n    },\n    &quot;threads.daemon.count&quot;: {\n      &quot;value&quot;: 14\n    },\n    &quot;threads.deadlock.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;threads.deadlocks&quot;: {\n      &quot;value&quot;: []\n    },\n    &quot;threads.new.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;threads.runnable.count&quot;: {\n      &quot;value&quot;: 11\n    },\n    &quot;threads.terminated.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;threads.timed_waiting.count&quot;: {\n      &quot;value&quot;: 17\n    },\n    &quot;threads.waiting.count&quot;: {\n      &quot;value&quot;: 6\n    }\n  },\n  &quot;counters&quot;: {\n    &quot;counter&quot;: {\n      &quot;count&quot;: 1\n    }\n  },\n  &quot;histograms&quot;: {\n    &quot;histogram&quot;: {\n      &quot;count&quot;: 3,\n      &quot;max&quot;: 100,\n      &quot;mean&quot;: 41.66666666666666,\n      &quot;min&quot;: 5,\n      &quot;p50&quot;: 20,\n      &quot;p75&quot;: 100,\n      &quot;p95&quot;: 100,\n      &quot;p98&quot;: 100,\n      &quot;p99&quot;: 100,\n      &quot;p999&quot;: 100,\n      &quot;stddev&quot;: 41.69998667732268\n    }\n  },\n  &quot;meters&quot;: {\n    &quot;meter&quot;: {\n      &quot;count&quot;: 201,\n      &quot;m15_rate&quot;: 38.666674566183616,\n      &quot;m1_rate&quot;: 22.433012859955905,\n      &quot;m5_rate&quot;: 35.77324719371856,\n      &quot;mean_rate&quot;: 4.944024762580441,\n      &quot;units&quot;: &quot;events/second&quot;\n    }\n  },\n  &quot;timers&quot;: {}\n}\n</code></pre>\n<p>Getting the following error on Prometheus:\n&quot;INVALID&quot; is not a valid start token</p>\n"},{"tags":["java","spring-security","keycloak","spring-webflux","role-based-access-control"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1682605151,"post_id":76121006,"comment_id":134244944,"body_markdown":"if you wish to map a specific claim to a collection of `GrantedAuthorities` you should be using a `JwtGrantedAuthoritiesConverter` here is the docs for it https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction also, you need to enable spring security DEBUG logs and show us them because it says there the exact reason for the 403","body":"if you wish to map a specific claim to a collection of <code>GrantedAuthorities</code> you should be using a <code>JwtGrantedAuthoritiesConverter</code> here is the docs for it <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a> also, you need to enable spring security DEBUG logs and show us them because it says there the exact reason for the 403"},{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682607205,"post_id":76121006,"comment_id":134245536,"body_markdown":"The link you shared is for the Servlet stack. I&#39;m using the Reactive stack (WebFlux). However, the mapping works fine. I was able to get the Authorization working when the OAuth2 Client and OAuth2 Resource Server ran as separate applications.","body":"The link you shared is for the Servlet stack. I&#39;m using the Reactive stack (WebFlux). However, the mapping works fine. I was able to get the Authorization working when the OAuth2 Client and OAuth2 Resource Server ran as separate applications."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1682607276,"post_id":76121006,"comment_id":134245557,"body_markdown":"the interface is used for both as it is stack independent otherwise i wouldn&#39;t have linked it. Just because it is documented in the servlet side of the documentation doesnt mean it isnt usable for reactive.","body":"the interface is used for both as it is stack independent otherwise i wouldn&#39;t have linked it. Just because it is documented in the servlet side of the documentation doesnt mean it isnt usable for reactive."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1682619119,"post_id":76121006,"comment_id":134248464,"body_markdown":"No, the interfaces are not the same: servlet JWT configurer expects `Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt;` when the reactive one expects a `Converter&lt;Jwt, ? extends Mono&lt;? extends AbstractAuthenticationToken&gt;&gt;`. Plus the issue here is because of `oauth2Login`, the exchange is secured with sessions (not JWTs) and authorities would be mapped with a `GrantedAuthoritiesMapper` or a `ReactiveOAuth2UserService`","body":"No, the interfaces are not the same: servlet JWT configurer expects <code>Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt;</code> when the reactive one expects a <code>Converter&lt;Jwt, ? extends Mono&lt;? extends AbstractAuthenticationToken&gt;&gt;</code>. Plus the issue here is because of <code>oauth2Login</code>, the exchange is secured with sessions (not JWTs) and authorities would be mapped with a <code>GrantedAuthoritiesMapper</code> or a <code>ReactiveOAuth2UserService</code>"}],"answers":[{"comments":[{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682624945,"post_id":76123407,"comment_id":134249572,"body_markdown":"I&#39;ve done exactly the same , combining oauth2login with oauth2ResourceServer similar to the post. But for servlet based spring application. It is working as expected including converter. I can login with  OAuth2 and JWT.","body":"I&#39;ve done exactly the same , combining oauth2login with oauth2ResourceServer similar to the post. But for servlet based spring application. It is working as expected including converter. I can login with  OAuth2 and JWT."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1682629536,"post_id":76123407,"comment_id":134250382,"body_markdown":"What do you mean exactly? That when you login with `oauth2Login` with your browser, following requests are auto-magically decorated with a JWT access token and the JWT authentication converter called? I&#39;d be curious to see this working.","body":"What do you mean exactly? That when you login with <code>oauth2Login</code> with your browser, following requests are auto-magically decorated with a JWT access token and the JWT authentication converter called? I&#39;d be curious to see this working."},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682638224,"post_id":76123407,"comment_id":134251455,"body_markdown":"it looks like this : http.oauth2Login().oauth2ResourceServer().jwt().jwtAuthenticationConverter(JwtAuthenticationConverter); browser get oauth2Login (to azure ad) and api use JWT in authentication header request to login into the same system.","body":"it looks like this : http.oauth2Login().oauth2ResourceServer().jwt().jwtAuthentic&zwnj;&#8203;ationConverter(JwtAu&zwnj;&#8203;thenticationConverte&zwnj;&#8203;r); browser get oauth2Login (to azure ad) and api use JWT in authentication header request to login into the same system."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1682639758,"post_id":76123407,"comment_id":134251613,"body_markdown":"I can bet beer that, in your application, requests from browsers using Spring `oauth2Login` are secured with sessions (not JWTs) and that this requests don&#39;t hit your `jwtAuthenticationConverter`. Just inspect your browser headers (no Authorization header with a JWT) and set a break-point in your authentication converter, it won&#39;t be hit when your server receives a request from a browser using `oauth2Login` (it is hit only for requests by an OAuth2 client, which have their  own mechanism to get access tokens).","body":"I can bet beer that, in your application, requests from browsers using Spring <code>oauth2Login</code> are secured with sessions (not JWTs) and that this requests don&#39;t hit your <code>jwtAuthenticationConverter</code>. Just inspect your browser headers (no Authorization header with a JWT) and set a break-point in your authentication converter, it won&#39;t be hit when your server receives a request from a browser using <code>oauth2Login</code> (it is hit only for requests by an OAuth2 client, which have their  own mechanism to get access tokens)."},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682640341,"post_id":76123407,"comment_id":134251669,"body_markdown":"I am arguing against your statement that &quot; You are facing the usual issues when trying to mix OAuth2 client and OAuth2 resource server configuration in the same security filter-chain:&quot;  you can combine both on the same filter-chain.","body":"I am arguing against your statement that &quot; You are facing the usual issues when trying to mix OAuth2 client and OAuth2 resource server configuration in the same security filter-chain:&quot;  you can combine both on the same filter-chain."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1682641918,"post_id":76123407,"comment_id":134251826,"body_markdown":"The issue reported here is that the configured authentication converter is not called (and Keycloak roles mapped to Spring authorities) after oauth2Login. Your configuration does not solve that at all.","body":"The issue reported here is that the configured authentication converter is not called (and Keycloak roles mapped to Spring authorities) after oauth2Login. Your configuration does not solve that at all."},{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682661544,"post_id":76123407,"comment_id":134253679,"body_markdown":"Thank you for pointing out the issue. I am currently going through your tutorials repo. The reason behind merging the OAuth2 Client and the OAuth2 Resource Server was to have a single application in which I can add a WebSocket server. My frontend will have a WebSocket client that will connect to my Spring Boot backend. I started with a REST API poc and encountered the above problem. Do you think I can have the OAuth2 Client and the OAuth2 Resource Server as separate applications when securing a WebSocket endpoint? Could you please shed some light on this.","body":"Thank you for pointing out the issue. I am currently going through your tutorials repo. The reason behind merging the OAuth2 Client and the OAuth2 Resource Server was to have a single application in which I can add a WebSocket server. My frontend will have a WebSocket client that will connect to my Spring Boot backend. I started with a REST API poc and encountered the above problem. Do you think I can have the OAuth2 Client and the OAuth2 Resource Server as separate applications when securing a WebSocket endpoint? Could you please shed some light on this."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682619668,"creation_date":1682618553,"answer_id":76123407,"question_id":76121006,"body_markdown":"You are facing the usual issues when trying to mix OAuth2 client and OAuth2 resource server configuration in the same security filter-chain: `oauth2Login` is a client matter and it requires sessions. Because you are using it, your filter-chain is a &quot;client&quot; filter-chain and **the security is based on sessions, not on access tokens**. This is the reason why the authentication converter you configured with your JWT resource server is not called.\r\n\r\nTwo options:\r\n- if your Spring application is just a REST API, then it should not have the responsibility of login which, again, is client business (Postman, mobile app, a BFF like spring-cloud-gateway, JS application configured as OAuth2 public client, ...). Remove `oauth2login`,  disable sessions (`STATELESS` session management), and probably disable CSRF protection too (CSRF is an attack using sessions).\r\n- if your application is both a REST API and the client consuming it (with Thymeleaf templates or alike) then define 2 distinct security filter-chains (with `@Order` and a `securityMatcher` on the first in order to limit which endpoints it applies to and give a chance to second to serve as fallback for all other endpoints): \r\n  * a &quot;client&quot; one with sessions, login, logout and [a `GrantedAuthoritiesMapper` or a `ReactiveOAuth2UserService`][1] for endpoints serving UI\r\n  * a &quot;resource server&quot; one without sessions, login or logout but with an authentication converter as you defined for endpoints serving REST API\r\n\r\nYou&#39;ll find more theory and implementation details in [my tutorials][2] (do not skip OAuth2 essentials)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/reactive/oauth2/login/advanced.html#webflux-oauth2-login-advanced-map-authorities\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"JwtAuthenticationConverter not invoked post authentication [Spring WebFlux + Spring Security + Keycloak]","body":"<p>You are facing the usual issues when trying to mix OAuth2 client and OAuth2 resource server configuration in the same security filter-chain: <code>oauth2Login</code> is a client matter and it requires sessions. Because you are using it, your filter-chain is a &quot;client&quot; filter-chain and <strong>the security is based on sessions, not on access tokens</strong>. This is the reason why the authentication converter you configured with your JWT resource server is not called.</p>\n<p>Two options:</p>\n<ul>\n<li>if your Spring application is just a REST API, then it should not have the responsibility of login which, again, is client business (Postman, mobile app, a BFF like spring-cloud-gateway, JS application configured as OAuth2 public client, ...). Remove <code>oauth2login</code>,  disable sessions (<code>STATELESS</code> session management), and probably disable CSRF protection too (CSRF is an attack using sessions).</li>\n<li>if your application is both a REST API and the client consuming it (with Thymeleaf templates or alike) then define 2 distinct security filter-chains (with <code>@Order</code> and a <code>securityMatcher</code> on the first in order to limit which endpoints it applies to and give a chance to second to serve as fallback for all other endpoints):\n<ul>\n<li>a &quot;client&quot; one with sessions, login, logout and <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/login/advanced.html#webflux-oauth2-login-advanced-map-authorities\" rel=\"nofollow noreferrer\">a <code>GrantedAuthoritiesMapper</code> or a <code>ReactiveOAuth2UserService</code></a> for endpoints serving UI</li>\n<li>a &quot;resource server&quot; one without sessions, login or logout but with an authentication converter as you defined for endpoints serving REST API</li>\n</ul>\n</li>\n</ul>\n<p>You'll find more theory and implementation details in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">my tutorials</a> (do not skip OAuth2 essentials)</p>\n"},{"comments":[{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682737165,"post_id":76132594,"comment_id":134266903,"body_markdown":"Thank you so much. You&#39;re a savior. Using `hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)` got the authorization working. However, the JwtAuthenticationConverter still doesn&#39;t get called. So, how are the roles getting mapped in this case?","body":"Thank you so much. You&#39;re a savior. Using <code>hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)</code> got the authorization working. However, the JwtAuthenticationConverter still doesn&#39;t get called. So, how are the roles getting mapped in this case?"},{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682737472,"post_id":76132594,"comment_id":134266913,"body_markdown":"So, is this session based now? \n`Found SecurityContext &#39;SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [Clark Kent], Granted Authorities: [[ROLE_USER, SCOPE_email, SCOPE_library_admin, SCOPE_openid, SCOPE_profile]], User Attributes: [...], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, SCOPE_email, SCOPE_library_admin, SCOPE_openid, SCOPE_profile]]]&#39; in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7f2cc6d5&#39;`","body":"So, is this session based now?  <code>Found SecurityContext &#39;SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [Clark Kent], Granted Authorities: [[ROLE_USER, SCOPE_email, SCOPE_library_admin, SCOPE_openid, SCOPE_profile]], User Attributes: [...], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, SCOPE_email, SCOPE_library_admin, SCOPE_openid, SCOPE_profile]]]&#39; in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionSt&zwnj;&#8203;ore$InMemoryWebSessi&zwnj;&#8203;on@7f2cc6d5&#39;</code>"},{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682737841,"post_id":76132594,"comment_id":134266929,"body_markdown":"I commented out the `LibraryUserJwtAuthenticationConverter` bean and removed it from the SecurityConfiguration and the authorization was still working when I used `hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)`","body":"I commented out the <code>LibraryUserJwtAuthenticationConverter</code> bean and removed it from the SecurityConfiguration and the authorization was still working when I used <code>hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)</code>"},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682740664,"post_id":76132594,"comment_id":134267116,"body_markdown":"@Saketh How do you access your application? by browser or httpclient? JWT filter expect request with Bearer Authorization token (not present in browser request).\n\nhasRole(Role.LIBRARY_ADMIN.name())  would match &quot;ROLE_&quot; + Role.LIBRARY_ADMIN.name() against what you see in Granted Authorities:[] list.\nhasAnyAuthority(authorities ) matched authorities  verbatim, therefore  I have &quot;SCOPE_library_admin&quot; - for browser (Oauth2Login) and &quot;ROLE_library_admin&quot; for JWT with converter.","body":"@Saketh How do you access your application? by browser or httpclient? JWT filter expect request with Bearer Authorization token (not present in browser request).  hasRole(Role.LIBRARY_ADMIN.name())  would match &quot;ROLE_&quot; + Role.LIBRARY_ADMIN.name() against what you see in Granted Authorities:[] list. hasAnyAuthority(authorities ) matched authorities  verbatim, therefore  I have &quot;SCOPE_library_admin&quot; - for browser (Oauth2Login) and &quot;ROLE_library_admin&quot; for JWT with converter."},{"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"score":0,"creation_date":1682763549,"post_id":76132594,"comment_id":134268901,"body_markdown":"Okay, thank you for the explanation. I&#39;m accessing the application through the browser. My next step would be to add an Angular frontend and communicate with the backend.","body":"Okay, thank you for the explanation. I&#39;m accessing the application through the browser. My next step would be to add an Angular frontend and communicate with the backend."}],"tags":[],"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682708957,"creation_date":1682708957,"answer_id":76132594,"question_id":76121006,"body_markdown":"To hit JWT converter on your &quot;merge-oauth2-client-resource-server&quot; branch, you shall use some kind of http client. IntelliJ HttpClient tool use the following just change Keycloack URL:port and password:\r\n\r\n&gt; POST http://localhost:8080/realms/workshop/protocol/openid-connect/token\r\n&gt;\r\n&gt; Accept: application/x-www-form-urlencoded\r\n&gt; \r\n&gt; grant_type=password&amp;username=ckent&amp;password=xxxxx&amp;client_id=library-client&amp;client_secret=9584640c-3804-4dcd-997b-93593cfb9ea7\r\n\r\nyou should get back something similar to:\r\n\r\n    { &quot;access_token&quot;:&quot;eyJhbGciOiJSUzI ....XXX&quot;,\r\n      &quot;expires_in&quot;: 300,\r\n      &quot;refresh_expires_in&quot;: 1800,\r\n      &quot;refresh_token&quot;:&quot;eyJhbGciOiJIUzI1NiI.....DlaezRxzyuNxfhve8StULE&quot;,\r\n      &quot;token_type&quot;: &quot;Bearer&quot;,\r\n      &quot;not-before-policy&quot;: 1571836504,\r\n      &quot;session_state&quot;: &quot;1169f9c3-5f90-41f6-a89c-23abe78491c4&quot;,\r\n      &quot;scope&quot;: &quot;library_admin email profile&quot;\r\n    }\r\n\r\nGrab the access_token and use it as Berarer authorization token\r\n\r\n    GET http://localhost:9090/users\r\n    Accept: application/json\r\n    Authorization: Bearer eyJhbGciOiJSUzI ....XXX\r\n\r\nyou shall get a response from your rest controller &quot;Only the admin should be able to see this&quot;\r\n\r\nIf you wish to use browser to test oauth2Login change SecurityConfiguration\r\n\r\n**.hasRole(Role.LIBRARY_ADMIN.name())** to **.hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)**\r\n\r\nNow JWT  and browser login (http://localhost:9090/users) shall work at the same time.\r\n\r\n","title":"JwtAuthenticationConverter not invoked post authentication [Spring WebFlux + Spring Security + Keycloak]","body":"<p>To hit JWT converter on your &quot;merge-oauth2-client-resource-server&quot; branch, you shall use some kind of http client. IntelliJ HttpClient tool use the following just change Keycloack URL:port and password:</p>\n<blockquote>\n<p>POST http://localhost:8080/realms/workshop/protocol/openid-connect/token</p>\n<p>Accept: application/x-www-form-urlencoded</p>\n<p>grant_type=password&amp;username=ckent&amp;password=xxxxx&amp;client_id=library-client&amp;client_secret=9584640c-3804-4dcd-997b-93593cfb9ea7</p>\n</blockquote>\n<p>you should get back something similar to:</p>\n<pre><code>{ &quot;access_token&quot;:&quot;eyJhbGciOiJSUzI ....XXX&quot;,\n  &quot;expires_in&quot;: 300,\n  &quot;refresh_expires_in&quot;: 1800,\n  &quot;refresh_token&quot;:&quot;eyJhbGciOiJIUzI1NiI.....DlaezRxzyuNxfhve8StULE&quot;,\n  &quot;token_type&quot;: &quot;Bearer&quot;,\n  &quot;not-before-policy&quot;: 1571836504,\n  &quot;session_state&quot;: &quot;1169f9c3-5f90-41f6-a89c-23abe78491c4&quot;,\n  &quot;scope&quot;: &quot;library_admin email profile&quot;\n}\n</code></pre>\n<p>Grab the access_token and use it as Berarer authorization token</p>\n<pre><code>GET http://localhost:9090/users\nAccept: application/json\nAuthorization: Bearer eyJhbGciOiJSUzI ....XXX\n</code></pre>\n<p>you shall get a response from your rest controller &quot;Only the admin should be able to see this&quot;</p>\n<p>If you wish to use browser to test oauth2Login change SecurityConfiguration</p>\n<p><strong>.hasRole(Role.LIBRARY_ADMIN.name())</strong> to <strong>.hasAnyAuthority(&quot;SCOPE_library_admin&quot;,&quot;ROLE_library_admin&quot;)</strong></p>\n<p>Now JWT  and browser login (http://localhost:9090/users) shall work at the same time.</p>\n"}],"owner":{"account_id":6793545,"reputation":45,"user_id":5229745,"display_name":"Saketh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2292,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76132594,"answer_count":2,"score":1,"last_activity_date":1682771955,"creation_date":1682602186,"question_id":76121006,"body_markdown":"My JwtAuthenticationConverter is not invoked and I get a 403 Error post login.\r\n\r\n```\r\n2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : &#39;/users&#39;; against &#39;/users/**&#39;\r\n2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched\r\n2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on &#39;/users&#39; using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@4e0f321f\r\n2023-04-27 20:59:15.785 DEBUG 11448 --- [     parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@1e8ad729&#39;\r\n2023-04-27 20:59:15.785 DEBUG 11448 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied\r\n\r\n```\r\n\r\n1. LibraryUserJwtAuthenticationConverter\r\n\r\n```\r\npackage com.example.oidc.client.config;\r\n\r\nimport org.springframework.core.convert.converter.Converter;\r\nimport org.springframework.security.authentication.AbstractAuthenticationToken;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.oauth2.jwt.Jwt;\r\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationToken;\r\nimport org.springframework.security.oauth2.server.resource.authentication.JwtGrantedAuthoritiesConverter;\r\nimport reactor.core.publisher.Mono;\r\n\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.Optional;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static java.util.Collections.emptySet;\r\n\r\n/**\r\n * JWT converter that takes the roles from &#39;groups&#39; claim of JWT token.\r\n */\r\npublic class LibraryUserJwtAuthenticationConverter\r\n        implements Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; {\r\n    private static final String GROUPS_CLAIM = &quot;groups&quot;;\r\n    private static final String ROLE_PREFIX = &quot;ROLE_&quot;;\r\n    private static final String USERNAME_CLAIM = &quot;preferred_username&quot;;\r\n\r\n    private final Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; defaultAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n\r\n    @Override\r\n    public Mono&lt;AbstractAuthenticationToken&gt; convert(Jwt jwt) {\r\n        return Mono.just(extractAuthorities(jwt))\r\n                .map((authorities) -&gt; new JwtAuthenticationToken(jwt, authorities, extractUsername(jwt)));\r\n\r\n    }\r\n\r\n    private Collection&lt;GrantedAuthority&gt; extractAuthorities(Jwt jwt) {\r\n        Collection&lt;GrantedAuthority&gt; authorities = this.getScopes(jwt).stream()\r\n                .map(authority -&gt; ROLE_PREFIX + authority.toUpperCase())\r\n                .map(SimpleGrantedAuthority::new)\r\n                .collect(Collectors.toSet());\r\n\r\n        authorities.addAll(defaultGrantedAuthorities(jwt));\r\n\r\n        return authorities;\r\n    }\r\n\r\n    private Collection&lt;GrantedAuthority&gt; defaultGrantedAuthorities(Jwt jwt) {\r\n        return Optional.ofNullable(defaultAuthoritiesConverter.convert(jwt))\r\n                .orElse(emptySet());\r\n    }\r\n\r\n    private String extractUsername(Jwt jwt) {\r\n        return jwt.hasClaim(USERNAME_CLAIM) ? jwt.getClaimAsString(USERNAME_CLAIM) : jwt.getSubject();\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private Collection&lt;String&gt; getScopes(Jwt jwt) {\r\n        Object scopes = jwt.getClaims().get(GROUPS_CLAIM);\r\n        if (scopes instanceof Collection) {\r\n            return (Collection&lt;String&gt;) scopes;\r\n        }\r\n\r\n        return Collections.emptyList();\r\n    }\r\n}\r\n\r\n```\r\n\r\n2. SecurityConfiguration\r\n\r\n\r\n```\r\npackage com.example.oidc.client.config;\r\n\r\nimport com.example.oidc.client.common.Role;\r\nimport org.springframework.boot.actuate.autoconfigure.security.reactive.EndpointRequest;\r\nimport org.springframework.boot.autoconfigure.security.reactive.PathRequest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableReactiveMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\r\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\r\nimport org.springframework.security.web.server.SecurityWebFilterChain;\r\n\r\n@EnableWebFluxSecurity\r\n@EnableReactiveMethodSecurity\r\n@Configuration\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    SecurityWebFilterChain configure(ServerHttpSecurity http) {\r\n        http\r\n                .csrf()\r\n                .disable()\r\n                .authorizeExchange()\r\n                .matchers(PathRequest.toStaticResources().atCommonLocations())\r\n                .permitAll()\r\n                .matchers(EndpointRequest.to(&quot;health&quot;))\r\n                .permitAll()\r\n                .matchers(EndpointRequest.to(&quot;info&quot;))\r\n                .permitAll()\r\n                .pathMatchers(&quot;/users/**&quot;)\r\n                .hasRole(Role.LIBRARY_ADMIN.name())\r\n                .anyExchange()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2Login()\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(libraryUserJwtAuthenticationConverter());\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public LibraryUserJwtAuthenticationConverter libraryUserJwtAuthenticationConverter() {\r\n        return new LibraryUserJwtAuthenticationConverter();\r\n    }\r\n}\r\n\r\n```\r\n\r\n3. Application Settings\r\n\r\n\r\n```\r\nserver:\r\n  port: 9090\r\n  error:\r\n    include-stacktrace: never\r\n\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://localhost:8081/auth/realms/workshop\r\n      client:\r\n        registration:\r\n          keycloak:\r\n            client-id: &#39;library-client&#39;\r\n            client-secret: &#39;XXXX640c-XXXX-4dcd-997b-XXXXcfb9ea7&#39;\r\n            authorization-grant-type: authorization_code\r\n            redirect-uri: &#39;http://localhost:9090/login/oauth2/code/keycloak&#39;\r\n            scope: &#39;openid&#39;\r\n        provider:\r\n          keycloak:\r\n            issuer-uri: http://localhost:8081/auth/realms/workshop\r\n            user-name-attribute: name\r\n\r\n```\r\n4. UserRestController\r\n\r\n\r\n```\r\n@RestController\r\npublic class UserRestController {\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String users() {\r\n        return &quot;Only the admin should be able to see this&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\n5. Role\r\n\r\n\r\n```\r\npackage com.example.oidc.client.common;\r\n\r\npublic enum Role {\r\n  LIBRARY_USER,\r\n\r\n  LIBRARY_CURATOR,\r\n\r\n  LIBRARY_ADMIN\r\n}\r\n\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/yeg0G.jpg)](https://i.stack.imgur.com/yeg0G.jpg)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/d8Kmv.jpg)](https://i.stack.imgur.com/d8Kmv.jpg)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/JgchF.jpg)](https://i.stack.imgur.com/JgchF.jpg)\r\n\r\nI tried an example where the OAuth2 Client and the OAuth2 Resource Server are separate projects. The OAuth2 Client makes a request using a configured WebClient to the protected resource on the OAuth2 Resource Server. In this case the JwtAuthenticationConverter is invoked and authorization works as expected.\r\n\r\nHere&#39;s a link to the example with OAuth2 Client and OAuth2 Resource as separate projects: https://github.com/sakethsusarla/webflux-keycloak-struggle\r\n\r\nHowever, when I merged the OAuth2 Client and the OAuth2 Resource Server into one application, the JwtAuthenticationConverter doesn&#39;t get invoked at all and access to a protected resource results in a 403. Above are all the files from a simple example I&#39;ve written. Could someone please tell me if something&#39;s missing here?\r\n\r\nI&#39;ve gone through multiple GitHub repositories to verify my configuration but haven&#39;t been able to find the missing piece. There&#39;s very limited documentation regarding configuring Keycloak with Spring Security for Reactive applications.\r\n\r\nThe Keycloak realm json file is present here: https://github.com/sakethsusarla/webflux-keycloak-struggle/blob/main/keycloak_realm_workshop.json\r\n\r\nI&#39;m using the same client, user and roles for this example. No changes there.","title":"JwtAuthenticationConverter not invoked post authentication [Spring WebFlux + Spring Security + Keycloak]","body":"<p>My JwtAuthenticationConverter is not invoked and I get a 403 Error post login.</p>\n<pre><code>2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/users'; against '/users/**'\n2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched\n2023-04-27 20:59:15.780 DEBUG 11448 --- [     parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/users' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@4e0f321f\n2023-04-27 20:59:15.785 DEBUG 11448 --- [     parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@1e8ad729'\n2023-04-27 20:59:15.785 DEBUG 11448 --- [     parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied\n\n</code></pre>\n<ol>\n<li>LibraryUserJwtAuthenticationConverter</li>\n</ol>\n<pre><code>package com.example.oidc.client.config;\n\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.security.authentication.AbstractAuthenticationToken;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.oauth2.jwt.Jwt;\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationToken;\nimport org.springframework.security.oauth2.server.resource.authentication.JwtGrantedAuthoritiesConverter;\nimport reactor.core.publisher.Mono;\n\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Optional;\nimport java.util.stream.Collectors;\n\nimport static java.util.Collections.emptySet;\n\n/**\n * JWT converter that takes the roles from 'groups' claim of JWT token.\n */\npublic class LibraryUserJwtAuthenticationConverter\n        implements Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; {\n    private static final String GROUPS_CLAIM = &quot;groups&quot;;\n    private static final String ROLE_PREFIX = &quot;ROLE_&quot;;\n    private static final String USERNAME_CLAIM = &quot;preferred_username&quot;;\n\n    private final Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; defaultAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n\n    @Override\n    public Mono&lt;AbstractAuthenticationToken&gt; convert(Jwt jwt) {\n        return Mono.just(extractAuthorities(jwt))\n                .map((authorities) -&gt; new JwtAuthenticationToken(jwt, authorities, extractUsername(jwt)));\n\n    }\n\n    private Collection&lt;GrantedAuthority&gt; extractAuthorities(Jwt jwt) {\n        Collection&lt;GrantedAuthority&gt; authorities = this.getScopes(jwt).stream()\n                .map(authority -&gt; ROLE_PREFIX + authority.toUpperCase())\n                .map(SimpleGrantedAuthority::new)\n                .collect(Collectors.toSet());\n\n        authorities.addAll(defaultGrantedAuthorities(jwt));\n\n        return authorities;\n    }\n\n    private Collection&lt;GrantedAuthority&gt; defaultGrantedAuthorities(Jwt jwt) {\n        return Optional.ofNullable(defaultAuthoritiesConverter.convert(jwt))\n                .orElse(emptySet());\n    }\n\n    private String extractUsername(Jwt jwt) {\n        return jwt.hasClaim(USERNAME_CLAIM) ? jwt.getClaimAsString(USERNAME_CLAIM) : jwt.getSubject();\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    private Collection&lt;String&gt; getScopes(Jwt jwt) {\n        Object scopes = jwt.getClaims().get(GROUPS_CLAIM);\n        if (scopes instanceof Collection) {\n            return (Collection&lt;String&gt;) scopes;\n        }\n\n        return Collections.emptyList();\n    }\n}\n\n</code></pre>\n<ol start=\"2\">\n<li>SecurityConfiguration</li>\n</ol>\n<pre><code>package com.example.oidc.client.config;\n\nimport com.example.oidc.client.common.Role;\nimport org.springframework.boot.actuate.autoconfigure.security.reactive.EndpointRequest;\nimport org.springframework.boot.autoconfigure.security.reactive.PathRequest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.method.configuration.EnableReactiveMethodSecurity;\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\nimport org.springframework.security.web.server.SecurityWebFilterChain;\n\n@EnableWebFluxSecurity\n@EnableReactiveMethodSecurity\n@Configuration\npublic class SecurityConfiguration {\n\n    @Bean\n    SecurityWebFilterChain configure(ServerHttpSecurity http) {\n        http\n                .csrf()\n                .disable()\n                .authorizeExchange()\n                .matchers(PathRequest.toStaticResources().atCommonLocations())\n                .permitAll()\n                .matchers(EndpointRequest.to(&quot;health&quot;))\n                .permitAll()\n                .matchers(EndpointRequest.to(&quot;info&quot;))\n                .permitAll()\n                .pathMatchers(&quot;/users/**&quot;)\n                .hasRole(Role.LIBRARY_ADMIN.name())\n                .anyExchange()\n                .authenticated()\n                .and()\n                .oauth2Login()\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(libraryUserJwtAuthenticationConverter());\n\n        return http.build();\n    }\n\n    @Bean\n    public LibraryUserJwtAuthenticationConverter libraryUserJwtAuthenticationConverter() {\n        return new LibraryUserJwtAuthenticationConverter();\n    }\n}\n\n</code></pre>\n<ol start=\"3\">\n<li>Application Settings</li>\n</ol>\n<pre><code>server:\n  port: 9090\n  error:\n    include-stacktrace: never\n\nspring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://localhost:8081/auth/realms/workshop\n      client:\n        registration:\n          keycloak:\n            client-id: 'library-client'\n            client-secret: 'XXXX640c-XXXX-4dcd-997b-XXXXcfb9ea7'\n            authorization-grant-type: authorization_code\n            redirect-uri: 'http://localhost:9090/login/oauth2/code/keycloak'\n            scope: 'openid'\n        provider:\n          keycloak:\n            issuer-uri: http://localhost:8081/auth/realms/workshop\n            user-name-attribute: name\n\n</code></pre>\n<ol start=\"4\">\n<li>UserRestController</li>\n</ol>\n<pre><code>@RestController\npublic class UserRestController {\n\n    @GetMapping(&quot;/users&quot;)\n    public String users() {\n        return &quot;Only the admin should be able to see this&quot;;\n    }\n}\n\n</code></pre>\n<ol start=\"5\">\n<li>Role</li>\n</ol>\n<pre><code>package com.example.oidc.client.common;\n\npublic enum Role {\n  LIBRARY_USER,\n\n  LIBRARY_CURATOR,\n\n  LIBRARY_ADMIN\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/yeg0G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yeg0G.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/d8Kmv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d8Kmv.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/JgchF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JgchF.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I tried an example where the OAuth2 Client and the OAuth2 Resource Server are separate projects. The OAuth2 Client makes a request using a configured WebClient to the protected resource on the OAuth2 Resource Server. In this case the JwtAuthenticationConverter is invoked and authorization works as expected.</p>\n<p>Here's a link to the example with OAuth2 Client and OAuth2 Resource as separate projects: <a href=\"https://github.com/sakethsusarla/webflux-keycloak-struggle\" rel=\"nofollow noreferrer\">https://github.com/sakethsusarla/webflux-keycloak-struggle</a></p>\n<p>However, when I merged the OAuth2 Client and the OAuth2 Resource Server into one application, the JwtAuthenticationConverter doesn't get invoked at all and access to a protected resource results in a 403. Above are all the files from a simple example I've written. Could someone please tell me if something's missing here?</p>\n<p>I've gone through multiple GitHub repositories to verify my configuration but haven't been able to find the missing piece. There's very limited documentation regarding configuring Keycloak with Spring Security for Reactive applications.</p>\n<p>The Keycloak realm json file is present here: <a href=\"https://github.com/sakethsusarla/webflux-keycloak-struggle/blob/main/keycloak_realm_workshop.json\" rel=\"nofollow noreferrer\">https://github.com/sakethsusarla/webflux-keycloak-struggle/blob/main/keycloak_realm_workshop.json</a></p>\n<p>I'm using the same client, user and roles for this example. No changes there.</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682760896,"post_id":76134906,"comment_id":134268660,"body_markdown":"Could you please share with Repository interface, wanna write the same code on me, thanks, if can you tell, you use simple save method from JPARepository?","body":"Could you please share with Repository interface, wanna write the same code on me, thanks, if can you tell, you use simple save method from JPARepository?"},{"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"score":0,"creation_date":1682761484,"post_id":76134906,"comment_id":134268701,"body_markdown":"What is the log printed in the console ? Update the error log.","body":"What is the log printed in the console ? Update the error log."},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682762166,"post_id":76134906,"comment_id":134268767,"body_markdown":"The same code totally works on me. Little difference is, I removed @Lob and columnDefinition = &quot;LONGBLOB&quot; from Entity Class and I use import javax.persistence.*; not jakarta","body":"The same code totally works on me. Little difference is, I removed @Lob and columnDefinition = &quot;LONGBLOB&quot; from Entity Class and I use import javax.persistence.*; not jakarta"},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682763027,"post_id":76134906,"comment_id":134268854,"body_markdown":"Check your version of Spring boot -&gt; https://stackoverflow.com/questions/68765889/spring-boot-2-5-x-required-request-part-file-is-not-present","body":"Check your version of Spring boot -&gt; <a href=\"https://stackoverflow.com/questions/68765889/spring-boot-2-5-x-required-request-part-file-is-not-present\" title=\"spring boot 2 5 x required request part file is not present\">stackoverflow.com/questions/68765889/&hellip;</a>"},{"owner":{"account_id":27325554,"reputation":11,"user_id":20838588,"display_name":"gavi"},"score":1,"creation_date":1682770815,"post_id":76134906,"comment_id":134269602,"body_markdown":"Thank you for the responses guys, figured out the error. Our company actually has a base template, which every project has to start from, and it was recently updated, so, it was their issue, i had to scour to hundreds of thousands of lines of code, and then found this stupid mistake.","body":"Thank you for the responses guys, figured out the error. Our company actually has a base template, which every project has to start from, and it was recently updated, so, it was their issue, i had to scour to hundreds of thousands of lines of code, and then found this stupid mistake."}],"answers":[{"tags":[],"owner":{"account_id":27325554,"reputation":11,"user_id":20838588,"display_name":"gavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682770910,"creation_date":1682770910,"answer_id":76136192,"question_id":76134906,"body_markdown":"Custom request filter, tempered with the curl response which caused the error.","title":"Spring boot form data uploading file not working","body":"<p>Custom request filter, tempered with the curl response which caused the error.</p>\n"}],"owner":{"account_id":27325554,"reputation":11,"user_id":20838588,"display_name":"gavi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":398,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76136192,"answer_count":1,"score":1,"last_activity_date":1682770910,"creation_date":1682751043,"question_id":76134906,"body_markdown":"for context, i&#39;m creating a file upload/download restful service, and was testing in postman, i&#39;m getting an error that i&#39;m not supposed to.\r\n\r\nThis is my *Document Entity*\r\n```\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\n\r\n@Entity\r\n@Setter\r\n@Getter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@Table(name = &quot;t_document&quot;)\r\npublic class Document extends BaseEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @Lob\r\n    @Column(name = &quot;data&quot;, columnDefinition = &quot;LONGBLOB&quot;)\r\n    private byte[] data;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;file_type&quot;)\r\n    private String fileType;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;application_id&quot;)\r\n    private ApplicationEntity applicationEntity;\r\n}\r\n```\r\n\r\n```BaseEntity``` just implements serializable and nothing more.\r\n\r\nThese are my Service and ServiceImpl classes\r\n```\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\npublic interface DocumentService {\r\n\r\n    Document saveDoc(MultipartFile file, String title) throws Exception;\r\n\r\n    Document getDoc(int id);\r\n}\r\n```\r\n\r\n```\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.StringUtils;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\n@Service\r\npublic class DocumentServiceImpl implements DocumentService{\r\n\r\n    @Autowired\r\n    private DocumentRepository documentRepository;\r\n\r\n    @Override\r\n    public Document saveDoc(MultipartFile file, String title) throws Exception {\r\n        String fileName = StringUtils.cleanPath(file.getOriginalFilename());\r\n        try{\r\n            if(fileName.contains(&quot;..&quot;)){\r\n                throw new Exception(&quot;Filename contains invalid path sequence &quot;+fileName);\r\n            }\r\n            Document fileEntity = Document.builder()\r\n                                    .title(title)\r\n                                    .name(fileName)\r\n                                    .fileType(file.getContentType())\r\n                                    .data(file.getBytes())\r\n                                    .build();\r\n            return documentRepository.save(fileEntity);\r\n        }catch (Exception e){\r\n            throw new Exception(&quot;Could not save File:&quot; +fileName);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Document getDoc(int id) {\r\n        return documentRepository.findById(id).orElse(null);\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my controller class\r\n\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\r\n\r\n@Slf4j\r\n@RestController\r\n@RequestMapping(&quot;/recruiter&quot;)\r\npublic class RecruiterLandingPage {\r\n\r\n    @Autowired\r\n    private DocumentService documentService;\r\n\r\n    @GetMapping(&quot;/hello&quot;)\r\n    public ResponseEntity&lt;ApiResponse&lt;String&gt;&gt; Hello(){\r\n        return ResponseEntity.ok().body(ApiResponse.of(&quot;Recruiter&#39;s landing page&quot;));\r\n    }\r\n\r\n    @PostMapping(&quot;/candidate/uploadDocument&quot;)\r\n    public DocumentResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) throws Exception{\r\n        Document document = null;\r\n        document = documentService.saveDoc(file, &quot;title&quot;);\r\n\r\n        String downloadUrl = ServletUriComponentsBuilder\r\n                                    .fromCurrentContextPath()\r\n                                    .path(&quot;/download/&quot;)\r\n                                    .path(Integer.toString(document.getId()))\r\n                                    .toUriString();\r\n\r\n        return new DocumentResponse(\r\n                document.getName(),\r\n                downloadUrl,\r\n                file.getSize()\r\n        );\r\n\r\n    }\r\n    @PostMapping(&quot;/candidate/name&quot;)\r\n    public String returnName(@RequestParam(&quot;name&quot;) String name) throws Exception {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\nAnd when i run it on postman i get this\r\n[Error Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zhHQK.png\r\n\r\n```\r\n{\r\n    &quot;type&quot;: &quot;about:blank&quot;,\r\n    &quot;title&quot;: &quot;Bad Request&quot;,\r\n    &quot;status&quot;: 400,\r\n    &quot;detail&quot;: &quot;Required part &#39;file&#39; is not present.&quot;,\r\n    &quot;instance&quot;: &quot;/user-service/recruiter/candidate/uploadDocument&quot;\r\n}\r\n```\r\n\r\neven though i&#39;m passing the file in the form data option in postman.\r\ncurl from postman\r\n```\r\ncurl --location --request POST &#39;localhost:8080/user-service/recruiter/candidate/uploadDocument&#39; \\\r\n--form &#39;file=@&quot;/C:/Users/user/Downloads/Doc - Wireframe.docx&quot;&#39;\r\n\r\n```\r\n\r\n------------------------------------------------------\r\n\r\nAny and all help is appreciated","title":"Spring boot form data uploading file not working","body":"<p>for context, i'm creating a file upload/download restful service, and was testing in postman, i'm getting an error that i'm not supposed to.</p>\n<p>This is my <em>Document Entity</em></p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.*;\n\n@Entity\n@Setter\n@Getter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Table(name = &quot;t_document&quot;)\npublic class Document extends BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Lob\n    @Column(name = &quot;data&quot;, columnDefinition = &quot;LONGBLOB&quot;)\n    private byte[] data;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;file_type&quot;)\n    private String fileType;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;application_id&quot;)\n    private ApplicationEntity applicationEntity;\n}\n</code></pre>\n<p><code>BaseEntity</code> just implements serializable and nothing more.</p>\n<p>These are my Service and ServiceImpl classes</p>\n<pre><code>import org.springframework.web.multipart.MultipartFile;\n\npublic interface DocumentService {\n\n    Document saveDoc(MultipartFile file, String title) throws Exception;\n\n    Document getDoc(int id);\n}\n</code></pre>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.multipart.MultipartFile;\n\n@Service\npublic class DocumentServiceImpl implements DocumentService{\n\n    @Autowired\n    private DocumentRepository documentRepository;\n\n    @Override\n    public Document saveDoc(MultipartFile file, String title) throws Exception {\n        String fileName = StringUtils.cleanPath(file.getOriginalFilename());\n        try{\n            if(fileName.contains(&quot;..&quot;)){\n                throw new Exception(&quot;Filename contains invalid path sequence &quot;+fileName);\n            }\n            Document fileEntity = Document.builder()\n                                    .title(title)\n                                    .name(fileName)\n                                    .fileType(file.getContentType())\n                                    .data(file.getBytes())\n                                    .build();\n            return documentRepository.save(fileEntity);\n        }catch (Exception e){\n            throw new Exception(&quot;Could not save File:&quot; +fileName);\n        }\n    }\n\n    @Override\n    public Document getDoc(int id) {\n        return documentRepository.findById(id).orElse(null);\n    }\n}\n</code></pre>\n<p>And this is my controller class</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n\n@Slf4j\n@RestController\n@RequestMapping(&quot;/recruiter&quot;)\npublic class RecruiterLandingPage {\n\n    @Autowired\n    private DocumentService documentService;\n\n    @GetMapping(&quot;/hello&quot;)\n    public ResponseEntity&lt;ApiResponse&lt;String&gt;&gt; Hello(){\n        return ResponseEntity.ok().body(ApiResponse.of(&quot;Recruiter's landing page&quot;));\n    }\n\n    @PostMapping(&quot;/candidate/uploadDocument&quot;)\n    public DocumentResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) throws Exception{\n        Document document = null;\n        document = documentService.saveDoc(file, &quot;title&quot;);\n\n        String downloadUrl = ServletUriComponentsBuilder\n                                    .fromCurrentContextPath()\n                                    .path(&quot;/download/&quot;)\n                                    .path(Integer.toString(document.getId()))\n                                    .toUriString();\n\n        return new DocumentResponse(\n                document.getName(),\n                downloadUrl,\n                file.getSize()\n        );\n\n    }\n    @PostMapping(&quot;/candidate/name&quot;)\n    public String returnName(@RequestParam(&quot;name&quot;) String name) throws Exception {\n        return name;\n    }\n}\n</code></pre>\n<p>And when i run it on postman i get this\n<a href=\"https://i.stack.imgur.com/zhHQK.png\" rel=\"nofollow noreferrer\">Error Image</a></p>\n<pre><code>{\n    &quot;type&quot;: &quot;about:blank&quot;,\n    &quot;title&quot;: &quot;Bad Request&quot;,\n    &quot;status&quot;: 400,\n    &quot;detail&quot;: &quot;Required part 'file' is not present.&quot;,\n    &quot;instance&quot;: &quot;/user-service/recruiter/candidate/uploadDocument&quot;\n}\n</code></pre>\n<p>even though i'm passing the file in the form data option in postman.\ncurl from postman</p>\n<pre><code>curl --location --request POST 'localhost:8080/user-service/recruiter/candidate/uploadDocument' \\\n--form 'file=@&quot;/C:/Users/user/Downloads/Doc - Wireframe.docx&quot;'\n\n</code></pre>\n<hr />\n<p>Any and all help is appreciated</p>\n"},{"tags":["java","android","uniqueidentifier","mac-address","imei"],"comments":[{"owner":{"account_id":5815079,"reputation":765,"user_id":7801965,"display_name":"Kartoos"},"score":0,"creation_date":1682759541,"post_id":76135228,"comment_id":134268539,"body_markdown":"Is your issue specific to android R? Are you able to extract unique ID for other android versions?","body":"Is your issue specific to android R? Are you able to extract unique ID for other android versions?"},{"owner":{"account_id":5815079,"reputation":765,"user_id":7801965,"display_name":"Kartoos"},"score":0,"creation_date":1682759735,"post_id":76135228,"comment_id":134268556,"body_markdown":"Does this answer your question? [Best possible way to get device Id in Android](https://stackoverflow.com/questions/60503568/best-possible-way-to-get-device-id-in-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/60503568/best-possible-way-to-get-device-id-in-android\">Best possible way to get device Id in Android</a>"},{"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"score":0,"creation_date":1682760247,"post_id":76135228,"comment_id":134268599,"body_markdown":"@Kartoos I successfully retrieved unique ID from Android 7 before. However, that particular code is not suitable to use for Android 11.","body":"@Kartoos I successfully retrieved unique ID from Android 7 before. However, that particular code is not suitable to use for Android 11."},{"owner":{"account_id":5815079,"reputation":765,"user_id":7801965,"display_name":"Kartoos"},"score":0,"creation_date":1682760419,"post_id":76135228,"comment_id":134268618,"body_markdown":"When you say code is not suitable, what is the issue? Are you getting errors? Or some other problem?","body":"When you say code is not suitable, what is the issue? Are you getting errors? Or some other problem?"},{"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"score":0,"creation_date":1682763677,"post_id":76135228,"comment_id":134268919,"body_markdown":"@Kartoos Yes, keep getting error as it always retrieves null","body":"@Kartoos Yes, keep getting error as it always retrieves null"},{"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"score":0,"creation_date":1682764634,"post_id":76135228,"comment_id":134269003,"body_markdown":"I&#39;ll add my code and the error message.","body":"I&#39;ll add my code and the error message."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1682768571,"post_id":76135228,"comment_id":134269385,"body_markdown":"`Context context = null;` You are just setting the `context` to null prior to first use. Does this make sense?","body":"<code>Context context = null;</code> You are just setting the <code>context</code> to null prior to first use. Does this make sense?"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1682768769,"post_id":76135228,"comment_id":134269405,"body_markdown":"If you use this method within an `Activity` derived class just use `getSystemService()` method without `context` in the beginning. Or in a fragment derived class use `reqiureContext().getSystemService()` method.","body":"If you use this method within an <code>Activity</code> derived class just use <code>getSystemService()</code> method without <code>context</code> in the beginning. Or in a fragment derived class use <code>reqiureContext().getSystemService()</code> method."}],"answers":[{"tags":[],"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682769381,"creation_date":1682769381,"answer_id":76136094,"question_id":76135228,"body_markdown":"As of the API 29, Google introduced new security policies to the [`TelephonyManager.getImei`](https://developer.android.com/reference/android/telephony/TelephonyManager#getImei(int)) API. So it won&#39;t be available for 3rd party apps for security reasons.  \r\nLook at what is mentioned in the API&#39;s description:\r\n&gt; Starting with API level 29, persistent device identifiers are guarded behind additional restrictions, and apps are recommended to use resettable identifiers (see [Best practices for unique identifiers](https://developer.android.com/training/articles/user-data-ids)). This method can be invoked if one of the following requirements is met:\r\n&gt; - If the calling app has been granted the READ_PRIVILEGED_PHONE_STATE permission; this is a privileged permission that can only be granted to apps preloaded on the device.\r\n&gt; - If the calling app is the device owner of a fully-managed device, a profile owner of an organization-owned device, or their delegates (see [DevicePolicyManager.getEnrollmentSpecificId()](https://developer.android.com/reference/android/app/admin/DevicePolicyManager#getEnrollmentSpecificId())).\r\n&gt; - If the calling app has carrier privileges (see [hasCarrierPrivileges()](https://developer.android.com/reference/android/telephony/TelephonyManager#hasCarrierPrivileges())) on any active subscription.\r\n&gt; - If the calling app is the default SMS role holder (see [RoleManager.isRoleHeld(java.lang.String)](https://developer.android.com/reference/android/telephony/TelephonyManager#hasCarrierPrivileges())).\r\n&gt; - If the calling app has been granted the [Manifest.permission#USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER](https://developer.android.com/reference/android/Manifest.permission#USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER) permission.\r\n","title":"how to retrieve unique identifiers from android 11 r (API 30) device?","body":"<p>As of the API 29, Google introduced new security policies to the <a href=\"https://developer.android.com/reference/android/telephony/TelephonyManager#getImei(int)\" rel=\"nofollow noreferrer\"><code>TelephonyManager.getImei</code></a> API. So it won't be available for 3rd party apps for security reasons.<br />\nLook at what is mentioned in the API's description:</p>\n<blockquote>\n<p>Starting with API level 29, persistent device identifiers are guarded behind additional restrictions, and apps are recommended to use resettable identifiers (see <a href=\"https://developer.android.com/training/articles/user-data-ids\" rel=\"nofollow noreferrer\">Best practices for unique identifiers</a>). This method can be invoked if one of the following requirements is met:</p>\n<ul>\n<li>If the calling app has been granted the READ_PRIVILEGED_PHONE_STATE permission; this is a privileged permission that can only be granted to apps preloaded on the device.</li>\n<li>If the calling app is the device owner of a fully-managed device, a profile owner of an organization-owned device, or their delegates (see <a href=\"https://developer.android.com/reference/android/app/admin/DevicePolicyManager#getEnrollmentSpecificId()\" rel=\"nofollow noreferrer\">DevicePolicyManager.getEnrollmentSpecificId()</a>).</li>\n<li>If the calling app has carrier privileges (see <a href=\"https://developer.android.com/reference/android/telephony/TelephonyManager#hasCarrierPrivileges()\" rel=\"nofollow noreferrer\">hasCarrierPrivileges()</a>) on any active subscription.</li>\n<li>If the calling app is the default SMS role holder (see <a href=\"https://developer.android.com/reference/android/telephony/TelephonyManager#hasCarrierPrivileges()\" rel=\"nofollow noreferrer\">RoleManager.isRoleHeld(java.lang.String)</a>).</li>\n<li>If the calling app has been granted the <a href=\"https://developer.android.com/reference/android/Manifest.permission#USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER\" rel=\"nofollow noreferrer\">Manifest.permission#USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER</a> permission.</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1682790116,"answer_count":1,"score":1,"last_activity_date":1682769381,"creation_date":1682756661,"question_id":76135228,"body_markdown":"I want to get unique identifiers like Android Device ID, IMEI, or MAC address from an Android phone with Android version 11 using Java.   \r\nCan someone help? I need just either one unique identifier.  \r\nThis is the code that I use to get IMEI:  \r\n\r\n    public String getIMEI() {\r\n            Context context = null;\r\n            TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n            Log.i(&quot;Testing: &quot;, telephonyManager.getImei());\r\n            return telephonyManager.getImei();\r\n    }\r\n\r\nAnd this is the error message that I got:  \r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Object android.content.Context.getSystemService(java.lang.String)&#39; on a null object reference","title":"how to retrieve unique identifiers from android 11 r (API 30) device?","body":"<p>I want to get unique identifiers like Android Device ID, IMEI, or MAC address from an Android phone with Android version 11 using Java.<br />\nCan someone help? I need just either one unique identifier.<br />\nThis is the code that I use to get IMEI:</p>\n<pre><code>public String getIMEI() {\n        Context context = null;\n        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\n        Log.i(&quot;Testing: &quot;, telephonyManager.getImei());\n        return telephonyManager.getImei();\n}\n</code></pre>\n<p>And this is the error message that I got:</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object android.content.Context.getSystemService(java.lang.String)' on a null object reference\n</code></pre>\n"},{"tags":["java","bapi","jco"],"comments":[{"owner":{"account_id":20725,"reputation":4287,"user_id":49804,"display_name":"PATRY Guillaume"},"score":0,"creation_date":1271161453,"post_id":2627546,"comment_id":2642458,"body_markdown":"is that a specific BAPI, or a standard one ? could it be that the bapi use a gui-specific function module / class, such as L_GUI_FRONTEND_SERVICES ?","body":"is that a specific BAPI, or a standard one ? could it be that the bapi use a gui-specific function module / class, such as L_GUI_FRONTEND_SERVICES ?"}],"answers":[{"tags":[],"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1271181478,"creation_date":1271181478,"answer_id":2631921,"question_id":2627546,"body_markdown":"This error in itself does not tell you more than &quot;the ABAP program (function module) raised an exception named NOT_SUPPORTED_BY_GUI&quot;. What this really means is probably that the function module tried to access some GUI-related function - which is illegal for BAPIs, so either this is a custom-made RFC function module or you have found a programming error in the SAP standard coding and should open a SAPnet support ticket.","title":"&quot;NOT_SUPPORTED_BY_GUI&quot; Exception in JCo","body":"<p>This error in itself does not tell you more than \"the ABAP program (function module) raised an exception named NOT_SUPPORTED_BY_GUI\". What this really means is probably that the function module tried to access some GUI-related function - which is illegal for BAPIs, so either this is a custom-made RFC function module or you have found a programming error in the SAP standard coding and should open a SAPnet support ticket.</p>\n"},{"tags":[],"owner":{"account_id":82096,"reputation":306,"user_id":231100,"display_name":"franblay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1271761014,"creation_date":1271761014,"answer_id":2674441,"question_id":2627546,"body_markdown":"You can&#39;t use GUI services in non-gui operations, as RFC or background JOBs. In general avoid use of class cl_gui_frontend_services and functions GUI_*. Alternatively use OPEN_DATASET &lt;file&gt; FOR INPUT/OUTPUT isntruction in your RFC enabled function.\r\n\r\nRegards","title":"&quot;NOT_SUPPORTED_BY_GUI&quot; Exception in JCo","body":"<p>You can't use GUI services in non-gui operations, as RFC or background JOBs. In general avoid use of class cl_gui_frontend_services and functions GUI_*. Alternatively use OPEN_DATASET  FOR INPUT/OUTPUT isntruction in your RFC enabled function.</p>\n\n<p>Regards</p>\n"}],"owner":{"account_id":52759,"reputation":21589,"user_id":157705,"accept_rate":74,"display_name":"jai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682769195,"creation_date":1271141446,"question_id":2627546,"body_markdown":"We are having a BAPI that uploads the specified document to SAP software.\r\n\r\nThe BAPI accepts three parameters: `ID`, `FILE_LOC`, `FOLDER_NAME`.\r\n\r\nAnd I&#39;m setting the values as follows in the JCo code:\r\n\r\n    JCO.ParameterList paramList = function.getImportParameterList();\r\n    paramList.setValue(&quot;101XS1&quot;, &quot;EXTERNAL_ID&quot;);\r\n    paramList.setValue(&quot;tmp&quot;, &quot;FOLDER_NAME&quot;);\r\n    paramList.setValue(&quot;D:/upload/foo.txt&quot;, &quot;FILE_LOCATION&quot;);\r\n\r\nBut when I&#39;m trying to execute the BAPI, am getting the following exception:\r\n   ```\r\n   com.sap.mw.jco.JCO$Exception: (104) RFC_ERROR_SYSTEM_FAILURE: Exception condition &quot;NOT_SUPPORTED_BY_GUI&quot; raised.\r\n    \tat com.sap.mw.jco.rfc.MiddlewareRFC$Client.nativeExecute(Native Method)\r\n    \tat com.sap.mw.jco.rfc.MiddlewareRFC$Client.execute(MiddlewareRFC.java:1242)\r\n    \tat com.sap.mw.jco.JCO$Client.execute(JCO.java:3816)\r\n    \tat com.sap.mw.jco.JCO$Client.execute(JCO.java:3261)\r\n   ```\r\n\r\nThe same BAPI is working fine if I execute through thick client (SAP Logon). But through JCo, it&#39;s giving this error.","title":"&quot;NOT_SUPPORTED_BY_GUI&quot; Exception in JCo","body":"<p>We are having a BAPI that uploads the specified document to SAP software.</p>\n<p>The BAPI accepts three parameters: <code>ID</code>, <code>FILE_LOC</code>, <code>FOLDER_NAME</code>.</p>\n<p>And I'm setting the values as follows in the JCo code:</p>\n<pre><code>JCO.ParameterList paramList = function.getImportParameterList();\nparamList.setValue(&quot;101XS1&quot;, &quot;EXTERNAL_ID&quot;);\nparamList.setValue(&quot;tmp&quot;, &quot;FOLDER_NAME&quot;);\nparamList.setValue(&quot;D:/upload/foo.txt&quot;, &quot;FILE_LOCATION&quot;);\n</code></pre>\n<p>But when I'm trying to execute the BAPI, am getting the following exception:</p>\n<pre><code>com.sap.mw.jco.JCO$Exception: (104) RFC_ERROR_SYSTEM_FAILURE: Exception condition &quot;NOT_SUPPORTED_BY_GUI&quot; raised.\n     at com.sap.mw.jco.rfc.MiddlewareRFC$Client.nativeExecute(Native Method)\n     at com.sap.mw.jco.rfc.MiddlewareRFC$Client.execute(MiddlewareRFC.java:1242)\n     at com.sap.mw.jco.JCO$Client.execute(JCO.java:3816)\n     at com.sap.mw.jco.JCO$Client.execute(JCO.java:3261)\n</code></pre>\n<p>The same BAPI is working fine if I execute through thick client (SAP Logon). But through JCo, it's giving this error.</p>\n"},{"tags":["java","multithreading","cucumber","testng"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1682668734,"post_id":76122481,"comment_id":134255104,"body_markdown":"Can you print out the names of the threads with each print systemen? Also put the same print statements in the `@BeforeTest` method.","body":"Can you print out the names of the threads with each print systemen? Also put the same print statements in the <code>@BeforeTest</code> method."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1682714584,"post_id":76122481,"comment_id":134264752,"body_markdown":"@M.P.Korstanje Good point! I had updated the answer. I will be grateful if you help.","body":"@M.P.Korstanje Good point! I had updated the answer. I will be grateful if you help."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1682717264,"post_id":76122481,"comment_id":134265197,"body_markdown":"Mmh. Bit hard to type it all out right now. Perhaps you can  override the run method in the runner class and . use the parameter annotation on that. I usually use the conditional hooks in Cucumber in combination with multiple executions in CI. One for each browser.","body":"Mmh. Bit hard to type it all out right now. Perhaps you can  override the run method in the runner class and . use the parameter annotation on that. I usually use the conditional hooks in Cucumber in combination with multiple executions in CI. One for each browser."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1682718963,"post_id":76122481,"comment_id":134265417,"body_markdown":"@M.P.Korstanje Good to know I may ask someone about cucumber. This framework is crack all my imaging of automation project architecture. All that I know about TestNG - is useless now :)","body":"@M.P.Korstanje Good to know I may ask someone about cucumber. This framework is crack all my imaging of automation project architecture. All that I know about TestNG - is useless now :)"},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1682719837,"post_id":76122481,"comment_id":134265517,"body_markdown":"@M.P.Korstanje First of all I understood - that parallel execution isn&#39;t possible in the cucumber from the TestNG.xml. And it seems it does not a good idea to execute parallel tests in cucumber with different parameters. I seems the single-type tests with the same environment (the same browser, same cookies, settings, etc..) are possible, not more.  I had tried @BeforAll hook - also not working totally: I even receive NullPointerException for `threadPool` field. At least not so weird! - now one thread doesn&#39;t initialize the same instance for both thread :)","body":"@M.P.Korstanje First of all I understood - that parallel execution isn&#39;t possible in the cucumber from the TestNG.xml. And it seems it does not a good idea to execute parallel tests in cucumber with different parameters. I seems the single-type tests with the same environment (the same browser, same cookies, settings, etc..) are possible, not more.  I had tried @BeforAll hook - also not working totally: I even receive NullPointerException for <code>threadPool</code> field. At least not so weird! - now one thread doesn&#39;t initialize the same instance for both thread :)"}],"answers":[{"comments":[{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1682711054,"post_id":76127412,"comment_id":134264130,"body_markdown":"Thanks, unfortunately, this isn&#39;t the reason for the behavior. But I&#39;ll consider your point and update initializing to the threadsafe way.","body":"Thanks, unfortunately, this isn&#39;t the reason for the behavior. But I&#39;ll consider your point and update initializing to the threadsafe way."}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682668534,"creation_date":1682668534,"answer_id":76127412,"question_id":76122481,"body_markdown":"Just a guess:\r\n\r\nThe check `threadPool == null` is prone to race conditions. Both threads may see that `threadPool` is `null` and overwrite it.\r\n\r\nYou can initialize it when you define the field.\r\n\r\n\r\n    private static ThreadLocal&lt;String&gt; threadPool = new ThreadLocal&lt;&gt;();\r\n\r\nYou should also change the name of the variable, thread pools and thread locals are very different things.","title":"How to customize Cucumber TestNG for the different threads?","body":"<p>Just a guess:</p>\n<p>The check <code>threadPool == null</code> is prone to race conditions. Both threads may see that <code>threadPool</code> is <code>null</code> and overwrite it.</p>\n<p>You can initialize it when you define the field.</p>\n<pre><code>private static ThreadLocal&lt;String&gt; threadPool = new ThreadLocal&lt;&gt;();\n</code></pre>\n<p>You should also change the name of the variable, thread pools and thread locals are very different things.</p>\n"},{"comments":[{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1683007163,"post_id":76136072,"comment_id":134296837,"body_markdown":"Thanks, it works. But now the problem is that the threads don&#39;t execute in parallel mode - yes, we have two different threads, but they running one after the other.","body":"Thanks, it works. But now the problem is that the threads don&#39;t execute in parallel mode - yes, we have two different threads, but they running one after the other."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1683010163,"post_id":76136072,"comment_id":134297321,"body_markdown":"Which ones? For the classes or the scenarios from the ` @DataProvider(parallel = true)` method. You&#39;ll have to configure the `dataproviderthreadcount` somewhere.","body":"Which ones? For the classes or the scenarios from the ` @DataProvider(parallel = true)` method. You&#39;ll have to configure the <code>dataproviderthreadcount</code> somewhere."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1683033305,"post_id":76136072,"comment_id":134301957,"body_markdown":"Sorry, I had mistaken - I had experimented with an XML file and forgot to add paralleling there. It seems now all works fine.","body":"Sorry, I had mistaken - I had experimented with an XML file and forgot to add paralleling there. It seems now all works fine."}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682769040,"creation_date":1682769040,"answer_id":76136072,"question_id":76122481,"body_markdown":"Because TestNG runs the tests from the `@DataProvider` method on a different thread then the `@BeforeClass` method, you have to pass the parameter around a bit differently. Instead of setting the value on a thread local during the before class step, it has to be set just before the scenario is executed.\r\n\r\nYou can do this by inlining the `AbstractTestNGCucumberTests` class. \r\n\r\n\r\n```java\r\nimport io.cucumber.testng.CucumberPropertiesProvider;\r\nimport io.cucumber.testng.FeatureWrapper;\r\nimport io.cucumber.testng.PickleWrapper;\r\nimport io.cucumber.testng.TestNGCucumberRunner;\r\nimport org.testng.ITestContext;\r\nimport org.testng.annotations.AfterClass;\r\nimport org.testng.annotations.BeforeClass;\r\nimport org.testng.annotations.DataProvider;\r\nimport org.testng.annotations.Test;\r\nimport org.testng.xml.XmlTest;\r\n\r\n@CucumberOptions(plugin = { &quot;html:target/results.html&quot;, &quot;message:target/results.ndjson&quot; }) // Not really needed you can run entirely through the XML, just for example.\r\npublic abstract class CustomTestNGCucumberTests {\r\n\r\n    private TestNGCucumberRunner testNGCucumberRunner;\r\n    private final ThreadLocal&lt;String&gt; browser = new ThreadLocal&lt;&gt;();\r\n    private XmlTest currentXmlTest;\r\n\r\n    @BeforeClass(alwaysRun = true)\r\n    public void setUpClass(ITestContext context) {\r\n        // Here we put the current context in the test class. \r\n        // This context is distinct for each class so classes can\r\n        // run in parallel.\r\n        currentXmlTest = context.getCurrentXmlTest();\r\n\r\n        CucumberPropertiesProvider properties = currentXmlTest::getParameter;\r\n        testNGCucumberRunner = new TestNGCucumberRunner(this.getClass(), properties);\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @Test(groups = &quot;cucumber&quot;, description = &quot;Runs Cucumber Scenarios&quot;, dataProvider = &quot;scenarios&quot;)\r\n    public void runScenario(PickleWrapper pickleWrapper, FeatureWrapper featureWrapper) {\r\n        // Then here we make the value of browser parameter available\r\n        // to the tests on the same thread. Because we are picking this value\r\n        // from the class, it should work when multiple classes run in parallel.\r\n        browser.set(currentXmlTest.getParameter(&quot;browser&quot;));\r\n        testNGCucumberRunner.runScenario(pickleWrapper.getPickle());\r\n    }\r\n\r\n    @DataProvider(parallel = true) // This make Cucumber run scenarios in parallel\r\n    public Object[][] scenarios() {\r\n        if (testNGCucumberRunner == null) {\r\n            return new Object[0][0];\r\n        }\r\n        return testNGCucumberRunner.provideScenarios();\r\n    }\r\n\r\n    @AfterClass(alwaysRun = true)\r\n    public void tearDownClass() {\r\n        if (testNGCucumberRunner == null) {\r\n            return;\r\n        }\r\n        testNGCucumberRunner.finish();\r\n    }\r\n\r\n}\r\n```\r\n\r\nNote: I didn&#39;t test this. ","title":"How to customize Cucumber TestNG for the different threads?","body":"<p>Because TestNG runs the tests from the <code>@DataProvider</code> method on a different thread then the <code>@BeforeClass</code> method, you have to pass the parameter around a bit differently. Instead of setting the value on a thread local during the before class step, it has to be set just before the scenario is executed.</p>\n<p>You can do this by inlining the <code>AbstractTestNGCucumberTests</code> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.cucumber.testng.CucumberPropertiesProvider;\nimport io.cucumber.testng.FeatureWrapper;\nimport io.cucumber.testng.PickleWrapper;\nimport io.cucumber.testng.TestNGCucumberRunner;\nimport org.testng.ITestContext;\nimport org.testng.annotations.AfterClass;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\nimport org.testng.xml.XmlTest;\n\n@CucumberOptions(plugin = { &quot;html:target/results.html&quot;, &quot;message:target/results.ndjson&quot; }) // Not really needed you can run entirely through the XML, just for example.\npublic abstract class CustomTestNGCucumberTests {\n\n    private TestNGCucumberRunner testNGCucumberRunner;\n    private final ThreadLocal&lt;String&gt; browser = new ThreadLocal&lt;&gt;();\n    private XmlTest currentXmlTest;\n\n    @BeforeClass(alwaysRun = true)\n    public void setUpClass(ITestContext context) {\n        // Here we put the current context in the test class. \n        // This context is distinct for each class so classes can\n        // run in parallel.\n        currentXmlTest = context.getCurrentXmlTest();\n\n        CucumberPropertiesProvider properties = currentXmlTest::getParameter;\n        testNGCucumberRunner = new TestNGCucumberRunner(this.getClass(), properties);\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    @Test(groups = &quot;cucumber&quot;, description = &quot;Runs Cucumber Scenarios&quot;, dataProvider = &quot;scenarios&quot;)\n    public void runScenario(PickleWrapper pickleWrapper, FeatureWrapper featureWrapper) {\n        // Then here we make the value of browser parameter available\n        // to the tests on the same thread. Because we are picking this value\n        // from the class, it should work when multiple classes run in parallel.\n        browser.set(currentXmlTest.getParameter(&quot;browser&quot;));\n        testNGCucumberRunner.runScenario(pickleWrapper.getPickle());\n    }\n\n    @DataProvider(parallel = true) // This make Cucumber run scenarios in parallel\n    public Object[][] scenarios() {\n        if (testNGCucumberRunner == null) {\n            return new Object[0][0];\n        }\n        return testNGCucumberRunner.provideScenarios();\n    }\n\n    @AfterClass(alwaysRun = true)\n    public void tearDownClass() {\n        if (testNGCucumberRunner == null) {\n            return;\n        }\n        testNGCucumberRunner.finish();\n    }\n\n}\n</code></pre>\n<p>Note: I didn't test this.</p>\n"}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76136072,"answer_count":2,"score":0,"last_activity_date":1682769040,"creation_date":1682611413,"question_id":76122481,"body_markdown":"I need to implement parallel execution of cucumber features and, obviously, set up them for the different threads.\r\n\r\nSo, I created two features, classes, and one `TestNgRuner` for the .XML execution.\r\nThere is a project structure:\r\n\r\n```\r\nsrc/\r\n└── test/\r\n    └── java/\r\n        └── com/\r\n            └── projectname/\r\n                └── tests/\r\n                    ├── TestRunner.java\r\n                    ├── suites/\r\n                    │   ├── first/\r\n                    │   │   └── FirstSteps.java\r\n                    │   └── second/\r\n                    │       └── SecondSteps.java\r\n                    └── resources/\r\n                        └── suites/\r\n                            └── smoke.xml\r\n```\r\n\r\nParallel execution ensured by `smoke.xml`:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;Test Debug&quot; parallel=&quot;tests&quot;&gt;\r\n    &lt;test name=&quot;Test 1&quot;&gt;\r\n        &lt;parameter name=&quot;browser&quot; value=&quot;firefox&quot;/&gt;\r\n        &lt;parameter name=&quot;cucumber.features&quot; value=&quot;classpath:features/first&quot;/&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.projectname.tests.TestRunner&quot;/&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    &lt;test name=&quot;Test 2&quot;&gt;\r\n        &lt;parameter name=&quot;browser&quot; value=&quot;firefox&quot;/&gt;\r\n        &lt;parameter name=&quot;cucumber.features&quot; value=&quot;classpath:features/second&quot;/&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.projectname.tests.TestRunner&quot;/&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n\r\n```\r\n\r\nSo, you can guess, I need to establish WebDriver according to the `browser` parameter, and this establishment has to be executed for each `test`. So, as I understand, I have to use testing `@BeforeTest` annotation in the `TestRunner` class, since exactly this class managed and execute `@Test` methods (through `AbstractTestNGCucumberTests` extension):\r\n\r\n - TestRunner:\r\n\r\n```java\r\npublic class TestRunner extends AbstractTestNGCucumberTests {\r\n\r\n    private static volatile ThreadLocal&lt;String&gt; threadLocal;\r\n    private static String debug;\r\n\r\n    @Override\r\n    @DataProvider(parallel = true)\r\n    public Object[][] scenarios() {\r\n        return super.scenarios();\r\n    }\r\n\r\n    @BeforeClass\r\n    @Parameters(&quot;browser&quot;)\r\n    public void init(@Optional(&quot;chrome&quot;) String browser) {\r\n        System.out.println(&quot;BrowserName: &quot; + browser);\r\n        printThread(browser);\r\n        if (threadLocal == null) {\r\n            synchronized (TestRunner.class) {\r\n                if (threadLocal == null) {\r\n                    threadLocal = new ThreadLocal&lt;&gt;();\r\n                }\r\n            }\r\n        }\r\n        threadPool.set(browser);\r\n        debug = browser;\r\n    }\r\n\r\n    public static String getBrowserName(){\r\n        return threadPool.get(); ------------- &gt; line 2\r\n    }\r\n\r\n    public static String getDebugString(){\r\n        return debug;// ---------------------- &gt; line 3\r\n    }\r\n}\r\n```\r\n\r\nI was sure, with this solution, I will receive different threads for each `test` and `static` fields will be common for them, but it has occurred that **line 1** executed 2 times. Ok, for this case I can establish browser for each thread without `ThreadLocal` using I thought...but the `debug` parameter initialized also 2 times, and in the both cases, when I called `getDebugString` (**line 3**) I receive the last value that was initialized. In this point I need to say I call `getDebugString()` in the `FirstSteps.class` and `SecondSteps.class`:\r\n\r\n- `FirsSteps`:\r\n\r\n```java\r\n\r\npublic class FirstSteps  {\r\n\r\n    @When(&quot;First Step&quot;)\r\n    public void firstStep() throws InterruptedException {\r\n        TestRunner.printThread();\r\n        System.out.println(&quot;FirstSteps::firstStep&quot;);\r\n        System.out.println(&quot;FirstSteps thread parameter: &quot; + TestRunner.getBrowserName()); // ------------ line 1\r\n        System.out.println(&quot;FirstSteps Debug parameter: &quot; + TestRunner.getDebugParameter()); // ---------- line 2\r\n        Thread.sleep(3000);\r\n    }\r\n\r\n    @Then(&quot;Second Step&quot;)\r\n    public void secondStep() {\r\n        System.out.println(&quot;FirstSteps::secondStep&quot;);\r\n    }\r\n}\r\n```\r\n\r\nIn the **line 1** I receive `null` value.\r\nIn the **line 2** I receive **the same value for both cases** - the value that was initialized in the first queue (if the first test was with parameter **browser=chrome** - it will be **chrome** for both the `FirstSteps` and `SecondSteps`, otherwise - **firefox**\r\n\r\n - `SecondSteps`:\r\n\r\n```java\r\npublic class SecondSteps extends BaseApi {\r\n    @When(&quot;First Function&quot;)\r\n    public void firstFunction() throws InterruptedException {\r\n        TestRunner.printThread();\r\n        Thread.sleep(1000);\r\n        System.out.println(&quot;SecondSteps::firstFunction&quot;);\r\n        System.out.println(&quot;SecondSteps thread parameter: &quot; + TestRunner.getBrowserName());\r\n        System.out.println(&quot;SecondSteps debug parameter: &quot; + TestRunner.getDebugParameter());\r\n    }\r\n\r\n    @Then(&quot;Second Function&quot;)\r\n    public void secondFunction() {\r\n        System.out.println(&quot;SecondSteps::secondFunction&quot;);\r\n    }\r\n}\r\n```\r\n\r\nSo, it seems the `static` field is common for both threads! But why is the `ThreadLocal` not working in this case??\r\n\r\n----------------\r\n\r\nConsole output:\r\n```\r\nFirstSteps::firstStep\r\nFirstSteps thread parameter: null\r\nFirstSteps Debug parameter: chrome\r\nSecondSteps::firstFunction\r\nSecondSteps thread parameter: null\r\nSecondSteps debug parameter: chrome\r\nSecondSteps::secondFunction\r\nFirstSteps::secondStep\r\n```\r\n\r\n - **Update**\r\n\r\nAfter I added `printThread();` function that print *{$THREAD_NAME}-{$THREAD_ID} {$ADDITION_INFO}* I received following console log:\r\n```\r\nBrowserName: chrome\r\nBrowserName: firefox\r\ncom.projectname.tests.TestRunner::init - TestNG-tests-2-18 for firefox\r\ncom.projectname.tests.TestRunner::init - TestNG-tests-1-17 for chrome\r\nFirstSteps::secondStep\r\nFirstSteps::firstStep\r\ncom.projectname.tests.suites.second.SecondSteps::firstFunction - TestNG-PoolService-0-20\r\nFirstSteps thread parameter: null\r\nFirstSteps Debug parameter: chrome\r\ncom.projectname.tests.suites.first.FirstSteps::firstStep - TestNG-PoolService-0-21\r\nSecondSteps::firstFunction\r\nSecondSteps thread parameter: null\r\nSecondSteps debug parameter: chrome\r\nSecondSteps::secondFunction\r\n```\r\n\r\nSo, as I understand - the `AbstractTestNGCucumberTests` executes tests in a separate threads (some `PoolService` threads). I&#39;ll research this behavior, but anyway, I left this answer here, until I haven&#39;t solution.\r\n\r\nPS. Still is so weird the fact that TestNG creates two new threads with the FIRST instance of the class (I mean instance with &#39;chrome&#39; browser for `debug` field). And so weird, that cucumber works so ugly...","title":"How to customize Cucumber TestNG for the different threads?","body":"<p>I need to implement parallel execution of cucumber features and, obviously, set up them for the different threads.</p>\n<p>So, I created two features, classes, and one <code>TestNgRuner</code> for the .XML execution.\nThere is a project structure:</p>\n<pre><code>src/\n└── test/\n    └── java/\n        └── com/\n            └── projectname/\n                └── tests/\n                    ├── TestRunner.java\n                    ├── suites/\n                    │   ├── first/\n                    │   │   └── FirstSteps.java\n                    │   └── second/\n                    │       └── SecondSteps.java\n                    └── resources/\n                        └── suites/\n                            └── smoke.xml\n</code></pre>\n<p>Parallel execution ensured by <code>smoke.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;Test Debug&quot; parallel=&quot;tests&quot;&gt;\n    &lt;test name=&quot;Test 1&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;firefox&quot;/&gt;\n        &lt;parameter name=&quot;cucumber.features&quot; value=&quot;classpath:features/first&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;com.projectname.tests.TestRunner&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;Test 2&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;firefox&quot;/&gt;\n        &lt;parameter name=&quot;cucumber.features&quot; value=&quot;classpath:features/second&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;com.projectname.tests.TestRunner&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n\n</code></pre>\n<p>So, you can guess, I need to establish WebDriver according to the <code>browser</code> parameter, and this establishment has to be executed for each <code>test</code>. So, as I understand, I have to use testing <code>@BeforeTest</code> annotation in the <code>TestRunner</code> class, since exactly this class managed and execute <code>@Test</code> methods (through <code>AbstractTestNGCucumberTests</code> extension):</p>\n<ul>\n<li>TestRunner:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestRunner extends AbstractTestNGCucumberTests {\n\n    private static volatile ThreadLocal&lt;String&gt; threadLocal;\n    private static String debug;\n\n    @Override\n    @DataProvider(parallel = true)\n    public Object[][] scenarios() {\n        return super.scenarios();\n    }\n\n    @BeforeClass\n    @Parameters(&quot;browser&quot;)\n    public void init(@Optional(&quot;chrome&quot;) String browser) {\n        System.out.println(&quot;BrowserName: &quot; + browser);\n        printThread(browser);\n        if (threadLocal == null) {\n            synchronized (TestRunner.class) {\n                if (threadLocal == null) {\n                    threadLocal = new ThreadLocal&lt;&gt;();\n                }\n            }\n        }\n        threadPool.set(browser);\n        debug = browser;\n    }\n\n    public static String getBrowserName(){\n        return threadPool.get(); ------------- &gt; line 2\n    }\n\n    public static String getDebugString(){\n        return debug;// ---------------------- &gt; line 3\n    }\n}\n</code></pre>\n<p>I was sure, with this solution, I will receive different threads for each <code>test</code> and <code>static</code> fields will be common for them, but it has occurred that <strong>line 1</strong> executed 2 times. Ok, for this case I can establish browser for each thread without <code>ThreadLocal</code> using I thought...but the <code>debug</code> parameter initialized also 2 times, and in the both cases, when I called <code>getDebugString</code> (<strong>line 3</strong>) I receive the last value that was initialized. In this point I need to say I call <code>getDebugString()</code> in the <code>FirstSteps.class</code> and <code>SecondSteps.class</code>:</p>\n<ul>\n<li><code>FirsSteps</code>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class FirstSteps  {\n\n    @When(&quot;First Step&quot;)\n    public void firstStep() throws InterruptedException {\n        TestRunner.printThread();\n        System.out.println(&quot;FirstSteps::firstStep&quot;);\n        System.out.println(&quot;FirstSteps thread parameter: &quot; + TestRunner.getBrowserName()); // ------------ line 1\n        System.out.println(&quot;FirstSteps Debug parameter: &quot; + TestRunner.getDebugParameter()); // ---------- line 2\n        Thread.sleep(3000);\n    }\n\n    @Then(&quot;Second Step&quot;)\n    public void secondStep() {\n        System.out.println(&quot;FirstSteps::secondStep&quot;);\n    }\n}\n</code></pre>\n<p>In the <strong>line 1</strong> I receive <code>null</code> value.\nIn the <strong>line 2</strong> I receive <strong>the same value for both cases</strong> - the value that was initialized in the first queue (if the first test was with parameter <strong>browser=chrome</strong> - it will be <strong>chrome</strong> for both the <code>FirstSteps</code> and <code>SecondSteps</code>, otherwise - <strong>firefox</strong></p>\n<ul>\n<li><code>SecondSteps</code>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public class SecondSteps extends BaseApi {\n    @When(&quot;First Function&quot;)\n    public void firstFunction() throws InterruptedException {\n        TestRunner.printThread();\n        Thread.sleep(1000);\n        System.out.println(&quot;SecondSteps::firstFunction&quot;);\n        System.out.println(&quot;SecondSteps thread parameter: &quot; + TestRunner.getBrowserName());\n        System.out.println(&quot;SecondSteps debug parameter: &quot; + TestRunner.getDebugParameter());\n    }\n\n    @Then(&quot;Second Function&quot;)\n    public void secondFunction() {\n        System.out.println(&quot;SecondSteps::secondFunction&quot;);\n    }\n}\n</code></pre>\n<p>So, it seems the <code>static</code> field is common for both threads! But why is the <code>ThreadLocal</code> not working in this case??</p>\n<hr />\n<p>Console output:</p>\n<pre><code>FirstSteps::firstStep\nFirstSteps thread parameter: null\nFirstSteps Debug parameter: chrome\nSecondSteps::firstFunction\nSecondSteps thread parameter: null\nSecondSteps debug parameter: chrome\nSecondSteps::secondFunction\nFirstSteps::secondStep\n</code></pre>\n<ul>\n<li><strong>Update</strong></li>\n</ul>\n<p>After I added <code>printThread();</code> function that print <em>{$THREAD_NAME}-{$THREAD_ID} {$ADDITION_INFO}</em> I received following console log:</p>\n<pre><code>BrowserName: chrome\nBrowserName: firefox\ncom.projectname.tests.TestRunner::init - TestNG-tests-2-18 for firefox\ncom.projectname.tests.TestRunner::init - TestNG-tests-1-17 for chrome\nFirstSteps::secondStep\nFirstSteps::firstStep\ncom.projectname.tests.suites.second.SecondSteps::firstFunction - TestNG-PoolService-0-20\nFirstSteps thread parameter: null\nFirstSteps Debug parameter: chrome\ncom.projectname.tests.suites.first.FirstSteps::firstStep - TestNG-PoolService-0-21\nSecondSteps::firstFunction\nSecondSteps thread parameter: null\nSecondSteps debug parameter: chrome\nSecondSteps::secondFunction\n</code></pre>\n<p>So, as I understand - the <code>AbstractTestNGCucumberTests</code> executes tests in a separate threads (some <code>PoolService</code> threads). I'll research this behavior, but anyway, I left this answer here, until I haven't solution.</p>\n<p>PS. Still is so weird the fact that TestNG creates two new threads with the FIRST instance of the class (I mean instance with 'chrome' browser for <code>debug</code> field). And so weird, that cucumber works so ugly...</p>\n"},{"tags":["java","saprfc","bapi","jco","idoc"],"comments":[{"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"score":0,"creation_date":1291929079,"post_id":4374593,"comment_id":4800862,"body_markdown":"For instance some coverage of transactional aspects of the processing (http://stackoverflow.com/questions/4367386/how-to-control-transaction-commit-rollback-when-reading-an-idoc). Such integration is not as easy as simple example. Javadoc describes the API, but doesn&#39;t make it a tutorial.","body":"For instance some coverage of transactional aspects of the processing (<a href=\"http://stackoverflow.com/questions/4367386/how-to-control-transaction-commit-rollback-when-reading-an-idoc\" title=\"how to control transaction commit rollback when reading an idoc\">stackoverflow.com/questions/4367386/&hellip;</a>). Such integration is not as easy as simple example. Javadoc describes the API, but doesn&#39;t make it a tutorial."}],"answers":[{"tags":[],"owner":{"account_id":41596,"reputation":1102,"user_id":120959,"display_name":"lenkite"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1297322686,"creation_date":1297322686,"answer_id":4954444,"question_id":4374593,"body_markdown":"Go to http://service.sap.com/connectors (You&#39;ll need an SAP service market place account),  click on &quot;SAP Java Connector&quot; &gt; Tools and Services in the left hand navigation tree. You can download the JCO release 3.0.x from there and also download the SAP JCO 3.0 documentation as a PDF file.","title":"Tutorials, manuals, documentation for using SAP JCo 3.x","body":"<p>Go to <a href=\"http://service.sap.com/connectors\" rel=\"noreferrer\">http://service.sap.com/connectors</a> (You'll need an SAP service market place account),  click on \"SAP Java Connector\" > Tools and Services in the left hand navigation tree. You can download the JCO release 3.0.x from there and also download the SAP JCO 3.0 documentation as a PDF file.</p>\n"},{"tags":[],"owner":{"account_id":2716238,"reputation":106,"user_id":2343546,"display_name":"Syam K S The SEO Expert"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642666242,"creation_date":1642666242,"answer_id":70782690,"question_id":4374593,"body_markdown":"My suggestion is to refer [https://sapbrainsonline.com/basis-tutorial/sap-jco-tutorial-pdf-training-guides.html][1] . It contains introduction &amp; Several PDF training materials about SAP JCo .\r\n\r\n\r\n  [1]: https://sapbrainsonline.com/basis-tutorial/sap-jco-tutorial-pdf-training-guides.html","title":"Tutorials, manuals, documentation for using SAP JCo 3.x","body":"<p>My suggestion is to refer <a href=\"https://sapbrainsonline.com/basis-tutorial/sap-jco-tutorial-pdf-training-guides.html\" rel=\"nofollow noreferrer\">https://sapbrainsonline.com/basis-tutorial/sap-jco-tutorial-pdf-training-guides.html</a> . It contains introduction &amp; Several PDF training materials about SAP JCo .</p>\n"}],"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17966,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":4954444,"answer_count":2,"score":8,"last_activity_date":1682768831,"creation_date":1291709865,"question_id":4374593,"body_markdown":"Do you know any decent documentation source for using JCo 3.x?\r\n\r\nMost of the materials I could find are pretty outdated and refer to previous versions (JCo 2.x).\r\nIn case, anyone wondered, the things I found are:\r\n\r\n- &lt;a href=&quot;http://w-infobase.de/lehre%5Clv_materialien.nsf/intern01/FB09D79A41930E34C125709F0046180C/$FILE/Tips&amp;Tricks_JCo_Programming.pdf&quot;&gt;Tips&amp;Tricks JCo programming&lt;/a&gt;\r\n- ftp://ftp.sap.com/pub/sapjco/sapjco2xDocs.zip\r\n- The JCo distribution contains Javadoc documentation and a few examples.\r\n\r\nThis one is for JCo 3, but covers only the basics:\r\n\r\n- http://www.vogella.de/articles/SAPJCo/article.html\r\n","title":"Tutorials, manuals, documentation for using SAP JCo 3.x","body":"<p>Do you know any decent documentation source for using JCo 3.x?</p>\n\n<p>Most of the materials I could find are pretty outdated and refer to previous versions (JCo 2.x).\nIn case, anyone wondered, the things I found are:</p>\n\n<ul>\n<li>Tips&amp;Tricks JCo programming</li>\n<li><a href=\"ftp://ftp.sap.com/pub/sapjco/sapjco2xDocs.zip\">ftp://ftp.sap.com/pub/sapjco/sapjco2xDocs.zip</a></li>\n<li>The JCo distribution contains Javadoc documentation and a few examples.</li>\n</ul>\n\n<p>This one is for JCo 3, but covers only the basics:</p>\n\n<ul>\n<li><a href=\"http://www.vogella.de/articles/SAPJCo/article.html\">http://www.vogella.de/articles/SAPJCo/article.html</a></li>\n</ul>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"score":0,"creation_date":1484927404,"post_id":41767496,"comment_id":70726451,"body_markdown":"This is contradicting. If you specify `any()`, you mean any, but at the same time you don&#39;t?!? Just use the appropriate matchers.","body":"This is contradicting. If you specify <code>any()</code>, you mean any, but at the same time you don&#39;t?!? Just use the appropriate matchers."},{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":1,"creation_date":1484928533,"post_id":41767496,"comment_id":70727121,"body_markdown":"please recommend me some way. i cant create object for one of the parameter, that&#39;s why i use any() but defiantly i wouldn&#39;t work. I meant to say that i want to do something same.","body":"please recommend me some way. i cant create object for one of the parameter, that&#39;s why i use any() but defiantly i wouldn&#39;t work. I meant to say that i want to do something same."},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1672698422,"post_id":41767496,"comment_id":132330715,"body_markdown":"Something that might have been overlooked: You cannot mix matchers and plain arguments when stubbing a mock. So `when(service.foo(any(), new ARequest(1, &quot;A&quot;))` should cause an error from the framework because `any()` is a matcher and `new ARequest...` is not","body":"Something that might have been overlooked: You cannot mix matchers and plain arguments when stubbing a mock. So <code>when(service.foo(any(), new ARequest(1, &quot;A&quot;))</code> should cause an error from the framework because <code>any()</code> is a matcher and <code>new ARequest...</code> is not"}],"answers":[{"comments":[{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":0,"creation_date":1484927723,"post_id":41767547,"comment_id":70726639,"body_markdown":"I also want to use `any()` marcher as well inside. Is it possible?","body":"I also want to use <code>any()</code> marcher as well inside. Is it possible?"},{"owner":{"account_id":10068717,"reputation":176,"user_id":7443041,"display_name":"Tom Bulgur"},"score":0,"creation_date":1485958208,"post_id":41767547,"comment_id":71141339,"body_markdown":"Sorry, what do you mean with &quot;inside&quot;?","body":"Sorry, what do you mean with &quot;inside&quot;?"}],"tags":[],"owner":{"account_id":10068717,"reputation":176,"user_id":7443041,"display_name":"Tom Bulgur"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1484927417,"creation_date":1484927417,"answer_id":41767547,"question_id":41767496,"body_markdown":"I think: the &quot;recommended&quot; way would be the one that WORKS for you; and that comes with the least amount of coding efforts.\r\n\r\nYou have to have provide THOSE specifications that are necessary to make your test do what it has to do. There is no way around that.\r\n\r\nIf you really care about the arguments used, then you have to specify them accordingly. If you don&#39;t care; use `any()`. ","title":"Mock same method with different parameters","body":"<p>I think: the \"recommended\" way would be the one that WORKS for you; and that comes with the least amount of coding efforts.</p>\n\n<p>You have to have provide THOSE specifications that are necessary to make your test do what it has to do. There is no way around that.</p>\n\n<p>If you really care about the arguments used, then you have to specify them accordingly. If you don't care; use <code>any()</code>. </p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1484927735,"creation_date":1484927735,"answer_id":41767640,"question_id":41767496,"body_markdown":"The proper way would be to match the arguments using `eq()`, but if you don&#39;t want to do that, you can just record multiple return values.\r\n\r\n    when(someService.doSomething(any(SomeParam.class))).thenReturn(\r\n      firstReturnValue, secondReturnValue, thirdReturnValue\r\n    );\r\n\r\nNow the first call will return `firstValue`, the second `secondValue` and all following `thirdValue`.","title":"Mock same method with different parameters","body":"<p>The proper way would be to match the arguments using <code>eq()</code>, but if you don't want to do that, you can just record multiple return values.</p>\n\n<pre><code>when(someService.doSomething(any(SomeParam.class))).thenReturn(\n  firstReturnValue, secondReturnValue, thirdReturnValue\n);\n</code></pre>\n\n<p>Now the first call will return <code>firstValue</code>, the second <code>secondValue</code> and all following <code>thirdValue</code>.</p>\n"},{"comments":[{"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1484928968,"post_id":41767698,"comment_id":70727386,"body_markdown":"@ZeeshanBilal why? do you want to get failures if the arguments are not equal?","body":"@ZeeshanBilal why? do you want to get failures if the arguments are not equal?"},{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":0,"creation_date":1484929308,"post_id":41767698,"comment_id":70727617,"body_markdown":"because in my service implementation, there are possibility of number of different combination of parameters. but i want to proceed only with specific arguments. I think its the way to make sure the internal steps executed properly.","body":"because in my service implementation, there are possibility of number of different combination of parameters. but i want to proceed only with specific arguments. I think its the way to make sure the internal steps executed properly."},{"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1484929358,"post_id":41767698,"comment_id":70727641,"body_markdown":"if so I don&#39;t believe that you can do better than what you currently do","body":"if so I don&#39;t believe that you can do better than what you currently do"},{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":0,"creation_date":1484929620,"post_id":41767698,"comment_id":70727823,"body_markdown":"can i use custom Matcher, is it add some value or simplify my problem?","body":"can i use custom Matcher, is it add some value or simplify my problem?"},{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":0,"creation_date":1484981282,"post_id":41767698,"comment_id":70744023,"body_markdown":"It seems interesting, can you help me to solve it by customizing Matcher. is it a possible to solve it using custom matcher or not?","body":"It seems interesting, can you help me to solve it by customizing Matcher. is it a possible to solve it using custom matcher or not?"},{"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1484986206,"post_id":41767698,"comment_id":70745098,"body_markdown":"what kind of matcher ? argument matcher ?","body":"what kind of matcher ? argument matcher ?"},{"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"score":0,"creation_date":1484992418,"post_id":41767698,"comment_id":70746516,"body_markdown":"Yes, custom argument matcher.","body":"Yes, custom argument matcher."},{"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1484997881,"post_id":41767698,"comment_id":70748007,"body_markdown":"an argument matcher would only allow to validate that the argument provided is equal to one the expect Request instances, it won&#39;t allow you to explicitly associate a Response to a given Request, you will only be able to provide responses corresponding to nth call to the method like I proposed in the first part of the answer, is it good enough?","body":"an argument matcher would only allow to validate that the argument provided is equal to one the expect Request instances, it won&#39;t allow you to explicitly associate a Response to a given Request, you will only be able to provide responses corresponding to nth call to the method like I proposed in the first part of the answer, is it good enough?"},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1698748904,"post_id":41767698,"comment_id":136441945,"body_markdown":"The third one does not work for me, complaining NPE when junit sees 2nd stubbing; I guess it needs to go in one line/one statement, at least I find it impossible to mock 3 results with different args. `thenReturn(value1, value2, value3)` works for me.","body":"The third one does not work for me, complaining NPE when junit sees 2nd stubbing; I guess it needs to go in one line/one statement, at least I find it impossible to mock 3 results with different args. <code>thenReturn(value1, value2, value3)</code> works for me."}],"tags":[],"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"comment_count":9,"down_vote_count":1,"up_vote_count":78,"is_accepted":true,"score":77,"last_activity_date":1637775772,"creation_date":1484927917,"answer_id":41767698,"question_id":41767496,"body_markdown":"One way could be to avoid being too restrictive on your arguments in order to provide all the expected results with only one `thenReturn` call.\r\n\r\nFor example let&#39;s say that I want to mock this method:\r\n\r\n    public String foo(String firstArgument, Object obj) {\r\n        return &quot;Something&quot;;\r\n    }\r\n\r\nYou could then mock it by providing as many results as you want like below:\r\n\r\n    // Mock the call of foo of any String to provide 3 results\r\n    when(mock.foo(anyString(), anyObject())).thenReturn(&quot;val1&quot;, &quot;val2&quot;, &quot;val3&quot;);\r\n\r\nCalls to `foo` with any parameters will provide respectively &quot;`val1`&quot;, &quot;`val2`&quot;, then any subsequent calls will provide &quot;`val3`&quot;.\r\n\r\n---\r\n\r\nIn case you do care about passed values but don&#39;t want to depend on call sequence you can use `thenAnswer` to provide an answer that matches with the second argument like you currently do but with 3 different `thenReturn`. \r\nAssuming that you have overridden the method `equals(Object o)`.\r\n\r\n    when(mock.foo(anyString(), anyObject())).thenAnswer(\r\n        invocation -&gt; {\r\n            Object argument = invocation.getArguments()[1];\r\n            if (argument.equals(new ARequest(1, &quot;A&quot;))) {\r\n                return new AResponse(1, &quot;passed&quot;);\r\n            } else if (argument.equals(new ARequest(2, &quot;2A&quot;))) {\r\n                return new AResponse(2, &quot;passed&quot;);\r\n            } else if (argument.equals(new BRequest(1, &quot;B&quot;))) {\r\n                return new BResponse(112, &quot;passed&quot;);\r\n            }\r\n            throw new InvalidUseOfMatchersException(\r\n                String.format(&quot;Argument %s does not match&quot;, argument)\r\n            );\r\n        }\r\n    );\r\n\r\nOr simply, using the methods `anyString` and `eq` as argument marchers.\r\nAssuming that you have overridden the method `equals(Object o)`.\r\n\r\n    when(service.foo(anyString(), eq(new ARequest(1, &quot;A&quot;))))\r\n        .thenReturn(new AResponse(1, &quot;passed&quot;));\r\n    when(service.foo(anyString(), eq(new ARequest(2, &quot;2A&quot;))))\r\n        .thenReturn(new AResponse(2, &quot;passed&quot;));\r\n    when(service.foo(anyString(), eq(new BRequest(1, &quot;B&quot;))))\r\n        .thenReturn(new BResponse(112, &quot;passed&quot;));\r\n\r\n","title":"Mock same method with different parameters","body":"<p>One way could be to avoid being too restrictive on your arguments in order to provide all the expected results with only one <code>thenReturn</code> call.</p>\n<p>For example let's say that I want to mock this method:</p>\n<pre><code>public String foo(String firstArgument, Object obj) {\n    return &quot;Something&quot;;\n}\n</code></pre>\n<p>You could then mock it by providing as many results as you want like below:</p>\n<pre><code>// Mock the call of foo of any String to provide 3 results\nwhen(mock.foo(anyString(), anyObject())).thenReturn(&quot;val1&quot;, &quot;val2&quot;, &quot;val3&quot;);\n</code></pre>\n<p>Calls to <code>foo</code> with any parameters will provide respectively &quot;<code>val1</code>&quot;, &quot;<code>val2</code>&quot;, then any subsequent calls will provide &quot;<code>val3</code>&quot;.</p>\n<hr />\n<p>In case you do care about passed values but don't want to depend on call sequence you can use <code>thenAnswer</code> to provide an answer that matches with the second argument like you currently do but with 3 different <code>thenReturn</code>.\nAssuming that you have overridden the method <code>equals(Object o)</code>.</p>\n<pre><code>when(mock.foo(anyString(), anyObject())).thenAnswer(\n    invocation -&gt; {\n        Object argument = invocation.getArguments()[1];\n        if (argument.equals(new ARequest(1, &quot;A&quot;))) {\n            return new AResponse(1, &quot;passed&quot;);\n        } else if (argument.equals(new ARequest(2, &quot;2A&quot;))) {\n            return new AResponse(2, &quot;passed&quot;);\n        } else if (argument.equals(new BRequest(1, &quot;B&quot;))) {\n            return new BResponse(112, &quot;passed&quot;);\n        }\n        throw new InvalidUseOfMatchersException(\n            String.format(&quot;Argument %s does not match&quot;, argument)\n        );\n    }\n);\n</code></pre>\n<p>Or simply, using the methods <code>anyString</code> and <code>eq</code> as argument marchers.\nAssuming that you have overridden the method <code>equals(Object o)</code>.</p>\n<pre><code>when(service.foo(anyString(), eq(new ARequest(1, &quot;A&quot;))))\n    .thenReturn(new AResponse(1, &quot;passed&quot;));\nwhen(service.foo(anyString(), eq(new ARequest(2, &quot;2A&quot;))))\n    .thenReturn(new AResponse(2, &quot;passed&quot;));\nwhen(service.foo(anyString(), eq(new BRequest(1, &quot;B&quot;))))\n    .thenReturn(new BResponse(112, &quot;passed&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4108979,"reputation":317,"user_id":3372071,"display_name":"piritocle"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578336488,"creation_date":1578336488,"answer_id":59617386,"question_id":41767496,"body_markdown":"If you are mocking the method just want to verify that the correct arguments are being passed in, you can use any() and verify with ArgumentCaptor following the mocked method call.","title":"Mock same method with different parameters","body":"<p>If you are mocking the method just want to verify that the correct arguments are being passed in, you can use any() and verify with ArgumentCaptor following the mocked method call.</p>\n"},{"tags":[],"owner":{"account_id":5000237,"reputation":19,"user_id":4019497,"display_name":"dpassyann"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682768081,"creation_date":1682768081,"answer_id":76136010,"question_id":41767496,"body_markdown":"the simple solution is to make Mockito silent about this kind of error\r\n```java\r\n    @ExtendWith(MockitoExtension.class)\r\n    @MockitoSettings(strictness = Strictness.LENIENT)\r\n```","title":"Mock same method with different parameters","body":"<p>the simple solution is to make Mockito silent about this kind of error</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ExtendWith(MockitoExtension.class)\n    @MockitoSettings(strictness = Strictness.LENIENT)\n</code></pre>\n"}],"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73989,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":41767698,"answer_count":5,"score":59,"last_activity_date":1682768081,"creation_date":1484927235,"question_id":41767496,"body_markdown":"I am using mockito to test my business service, and it uses a utility that i want to mock. there are at least 2-3 calls in each service method for utility with different arguments. \r\n\r\nIs there any recommended way to use multiple `when(...).thenReturn(...)` for same method but different arguments?\r\n\r\nI also want to use `any()` marcher as well inside. Is it possible?\r\n\r\nUpdate: sample code.\r\n\r\n    @Test\r\n    public void myTest() {\r\n      when(service.foo(any(), new ARequest(1, &quot;A&quot;))).thenReturn(new AResponse(1, &quot;passed&quot;));\r\n      when(service.foo(any(), new ARequest(2, &quot;2A&quot;))).thenReturn(new AResponse(2, &quot;passed&quot;));\r\n      when(service.foo(any(), new BRequest(1, &quot;B&quot;))).thenReturn(new BResponse(112, &quot;passed&quot;));\r\n  \r\n      c.execute();\r\n    }\r\n  \r\n    public class ClassUnderTest {\r\n      Service service = new Service();\r\n      public void execute() {\r\n        AResponse ar = (AResponse) service.foo(&quot;A1&quot;, new ARequest(1, &quot;A&quot;));\r\n        AResponse ar2 = (AResponse) service.foo(&quot;A2&quot;, new ARequest(2, &quot;2A&quot;));\r\n        BResponse br = (BResponse) service.foo(&quot;B1&quot;, new BRequest(1, &quot;B&quot;));\r\n      }\r\n    }\r\n  \r\n    public class Service {\r\n      public Object foo(String firstArgument, Object obj) {\r\n        return null; //return something\r\n      }\r\n    }","title":"Mock same method with different parameters","body":"<p>I am using mockito to test my business service, and it uses a utility that i want to mock. there are at least 2-3 calls in each service method for utility with different arguments. </p>\n\n<p>Is there any recommended way to use multiple <code>when(...).thenReturn(...)</code> for same method but different arguments?</p>\n\n<p>I also want to use <code>any()</code> marcher as well inside. Is it possible?</p>\n\n<p>Update: sample code.</p>\n\n<pre><code>@Test\npublic void myTest() {\n  when(service.foo(any(), new ARequest(1, \"A\"))).thenReturn(new AResponse(1, \"passed\"));\n  when(service.foo(any(), new ARequest(2, \"2A\"))).thenReturn(new AResponse(2, \"passed\"));\n  when(service.foo(any(), new BRequest(1, \"B\"))).thenReturn(new BResponse(112, \"passed\"));\n\n  c.execute();\n}\n\npublic class ClassUnderTest {\n  Service service = new Service();\n  public void execute() {\n    AResponse ar = (AResponse) service.foo(\"A1\", new ARequest(1, \"A\"));\n    AResponse ar2 = (AResponse) service.foo(\"A2\", new ARequest(2, \"2A\"));\n    BResponse br = (BResponse) service.foo(\"B1\", new BRequest(1, \"B\"));\n  }\n}\n\npublic class Service {\n  public Object foo(String firstArgument, Object obj) {\n    return null; //return something\n  }\n}\n</code></pre>\n"},{"tags":["java","jsp","servlets","weblogic","containers"],"comments":[{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":4,"creation_date":1310837215,"post_id":6719004,"comment_id":7957068,"body_markdown":"This question a good answer by @BalusC on this [server fault link](http://serverfault.com/questions/106154/what-is-a-servlet-container-and-how-to-install-one).","body":"This question a good answer by @BalusC on this <a href=\"http://serverfault.com/questions/106154/what-is-a-servlet-container-and-how-to-install-one\">server fault link</a>."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1310837072,"creation_date":1310837072,"answer_id":6719017,"question_id":6719004,"body_markdown":"WebLogic, JBOSS, and other Java EE app servers *have* servlet containers, plus more: EJBs, naming and directory service, JMS, etc.\r\n\r\nServlets are HTTP listeners that run inside a servlet container.  The servlet can be mapped to response to HTTP GET and POST requests to a given URL of your choice.  The container manages the lifecycle and pooling of the servlets.\r\n\r\n","title":"Understanding servlet container","body":"<p>WebLogic, JBOSS, and other Java EE app servers <em>have</em> servlet containers, plus more: EJBs, naming and directory service, JMS, etc.</p>\n\n<p>Servlets are HTTP listeners that run inside a servlet container.  The servlet can be mapped to response to HTTP GET and POST requests to a given URL of your choice.  The container manages the lifecycle and pooling of the servlets.</p>\n"},{"tags":[],"owner":{"account_id":1742,"reputation":42756,"user_id":2362,"accept_rate":79,"display_name":"brabster"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1534664895,"creation_date":1310837084,"answer_id":6719019,"question_id":6719004,"body_markdown":"A servlet container is an application server that implements some version of the [Java Servlet Specification.][1]\r\n\r\nIn a nutshell, the servlet spec defines a programming model that allows a developer to write components, for example servlets, that process requests (almost always HTTP requests). Those components can then be declared to the container and it handles many of the tedious tasks involved with wiring up and managing those components such that they can process those requests.\r\n\r\n\r\n  [1]: https://javaee.github.io/servlet-spec/","title":"Understanding servlet container","body":"<p>A servlet container is an application server that implements some version of the <a href=\"https://javaee.github.io/servlet-spec/\" rel=\"noreferrer\">Java Servlet Specification.</a></p>\n\n<p>In a nutshell, the servlet spec defines a programming model that allows a developer to write components, for example servlets, that process requests (almost always HTTP requests). Those components can then be declared to the container and it handles many of the tedious tasks involved with wiring up and managing those components such that they can process those requests.</p>\n"},{"comments":[{"owner":{"account_id":7264117,"reputation":111,"user_id":5539587,"accept_rate":56,"display_name":"Josh"},"score":2,"creation_date":1531250907,"post_id":6719055,"comment_id":89523514,"body_markdown":"outstanding answer","body":"outstanding answer"}],"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"comment_count":1,"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1329117653,"creation_date":1310837497,"answer_id":6719055,"question_id":6719004,"body_markdown":"A servlet is a class that you will use to receive HTTP requests as methods and reply back with stuff (usually HTML).\r\n\r\nA servlet container is a server program which provides everything else; the opening of the socket, the transformation framework to turn HTTP into Java API calls, and a number of interfaces which allow you to plug in your servlet code.\r\n\r\nIf it were an electrical outlet, the servlet container would be the socket in the wall, and the servlet would be the plug and cord that attaches to the socket; but, Java used a &#39;container&#39; analogy.  The servlet container is the &quot;bucket&quot; you put your servlet stuff into.","title":"Understanding servlet container","body":"<p>A servlet is a class that you will use to receive HTTP requests as methods and reply back with stuff (usually HTML).</p>\n\n<p>A servlet container is a server program which provides everything else; the opening of the socket, the transformation framework to turn HTTP into Java API calls, and a number of interfaces which allow you to plug in your servlet code.</p>\n\n<p>If it were an electrical outlet, the servlet container would be the socket in the wall, and the servlet would be the plug and cord that attaches to the socket; but, Java used a 'container' analogy.  The servlet container is the \"bucket\" you put your servlet stuff into.</p>\n"},{"tags":[],"owner":{"account_id":30304,"reputation":27134,"user_id":82559,"display_name":"alphazero"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365800499,"creation_date":1310837811,"answer_id":6719079,"question_id":6719004,"body_markdown":"The Java EE architecture is *a component oriented system* with an articulated container, component model, and a managed life-cycle and mediated inter-component communication. \r\n\r\nThe Java EE web-container defines the components of this tier (e.g. {Servlet, Filter}), and the contractual interface between the components and the web-container (e.g. ServletContext).\r\n\r\n(If coming from .NET, this is effectively the [same conceptual paradigm as the] Component, Container and ISite is the Java EE XML declarative mappings.)  [edit]","title":"Understanding servlet container","body":"<p>The Java EE architecture is <em>a component oriented system</em> with an articulated container, component model, and a managed life-cycle and mediated inter-component communication. </p>\n\n<p>The Java EE web-container defines the components of this tier (e.g. {Servlet, Filter}), and the contractual interface between the components and the web-container (e.g. ServletContext).</p>\n\n<p>(If coming from .NET, this is effectively the [same conceptual paradigm as the] Component, Container and ISite is the Java EE XML declarative mappings.)  [edit]</p>\n"},{"tags":[],"owner":{"account_id":12444145,"reputation":1,"user_id":9060933,"display_name":"Ashwin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640325155,"creation_date":1640325155,"answer_id":70469934,"question_id":6719004,"body_markdown":"Servlet containers are programs that have pre-defined rules and intelligence to manage requests and responses. These programs validate the requests and responses to ensure they meet the Java servlet specifications.\r\nThe application server is not just about servlet containers, it also contains EJB containers.\r\n","title":"Understanding servlet container","body":"<p>Servlet containers are programs that have pre-defined rules and intelligence to manage requests and responses. These programs validate the requests and responses to ensure they meet the Java servlet specifications.\nThe application server is not just about servlet containers, it also contains EJB containers.</p>\n"},{"tags":[],"owner":{"account_id":24646887,"reputation":1,"user_id":18544438,"display_name":"Amit Suthar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682767934,"creation_date":1682592425,"answer_id":76119495,"question_id":6719004,"body_markdown":"The servlet container is part of a Web server or application server that provides the network services over which requests and responses are sent. A servlet container also contains and manages servlets through their lifecycle. A web container is a big assistant to the programmer. It reduces the complexity of programming by managing the total life cycle of the servlet.\r\n","title":"Understanding servlet container","body":"<p>The servlet container is part of a Web server or application server that provides the network services over which requests and responses are sent. A servlet container also contains and manages servlets through their lifecycle. A web container is a big assistant to the programmer. It reduces the complexity of programming by managing the total life cycle of the servlet.</p>\n"},{"tags":[],"owner":{"account_id":7509666,"reputation":1286,"user_id":5705066,"display_name":"hkanjih"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682729075,"creation_date":1682729075,"answer_id":76134042,"question_id":6719004,"body_markdown":"A servlet container is a software program that runs on a web server and provides the runtime environment for Java servlets. A servlet is a Java class that can be used to extend the functionality of a web server. Servlets can be used to process HTTP requests, generate dynamic content, and manage sessions.\r\n\r\n**Weblogic** and **JBoss** are both examples of servlet containers. They are both full-featured application servers that provide a wide range of features beyond just servlet support. However, they can also be used as standalone servlet containers.\r\n\r\nIn simple terms, a servlet container is a software program that helps you to develop and deploy Java servlets. It provides the runtime environment for servlets, including things like security, session management, and database access.\r\n\r\n","title":"Understanding servlet container","body":"<p>A servlet container is a software program that runs on a web server and provides the runtime environment for Java servlets. A servlet is a Java class that can be used to extend the functionality of a web server. Servlets can be used to process HTTP requests, generate dynamic content, and manage sessions.</p>\n<p><strong>Weblogic</strong> and <strong>JBoss</strong> are both examples of servlet containers. They are both full-featured application servers that provide a wide range of features beyond just servlet support. However, they can also be used as standalone servlet containers.</p>\n<p>In simple terms, a servlet container is a software program that helps you to develop and deploy Java servlets. It provides the runtime environment for servlets, including things like security, session management, and database access.</p>\n"}],"owner":{"account_id":225326,"reputation":49638,"user_id":485743,"accept_rate":60,"display_name":"copenndthagen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32515,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":6719019,"answer_count":7,"score":36,"last_activity_date":1682767934,"creation_date":1310836917,"question_id":6719004,"body_markdown":"As a UI devloper and someone with very limited Java knowledge, how do I understand what exactly is servlet container in simple terms ?\r\n\r\nI have heard Weblogic, JBoss, etc are servlet containers, but not sure what that means exactly. Does it mean any middleware technology ?\r\n\r\nCould you please help me.","title":"Understanding servlet container","body":"<p>As a UI devloper and someone with very limited Java knowledge, how do I understand what exactly is servlet container in simple terms ?</p>\n\n<p>I have heard Weblogic, JBoss, etc are servlet containers, but not sure what that means exactly. Does it mean any middleware technology ?</p>\n\n<p>Could you please help me.</p>\n"},{"tags":["java","xml","maven","pom.xml","mainclass"],"answers":[{"comments":[{"owner":{"account_id":7497896,"reputation":894,"user_id":5697418,"accept_rate":71,"display_name":"alhelal"},"score":1,"creation_date":1507943021,"post_id":29920526,"comment_id":80426402,"body_markdown":"@MartinBaumgarter with adding in my `pom.xml` I get a error. view my pom.xml [image](https://imgur.com/a/euvAv) with project snapshot.","body":"@MartinBaumgarter with adding in my <code>pom.xml</code> I get a error. view my pom.xml <a href=\"https://imgur.com/a/euvAv\" rel=\"nofollow noreferrer\">image</a> with project snapshot."},{"owner":{"account_id":2526321,"reputation":3554,"user_id":2195638,"accept_rate":20,"display_name":"Martin Baumgartner"},"score":7,"creation_date":1511272947,"post_id":29920526,"comment_id":81783431,"body_markdown":"I guess you should remove the 3 dots which are just a placeholder.","body":"I guess you should remove the 3 dots which are just a placeholder."},{"owner":{"account_id":5254406,"reputation":1108,"user_id":4197679,"accept_rate":79,"display_name":"Ashok kumar Ganesan"},"score":0,"creation_date":1674082350,"post_id":29920526,"comment_id":132642062,"body_markdown":"What changes is required to run the main class from src/test/java","body":"What changes is required to run the main class from src/test/java"}],"tags":[],"owner":{"account_id":2526321,"reputation":3554,"user_id":2195638,"accept_rate":20,"display_name":"Martin Baumgartner"},"comment_count":3,"down_vote_count":0,"up_vote_count":119,"is_accepted":true,"score":119,"last_activity_date":1682767675,"creation_date":1430226669,"answer_id":29920526,"question_id":29920434,"body_markdown":"First, your main class doesn&#39;t include `src/main/java`. Look at the package declaration in that Java file. For example, `package org.jis;`, then add the main class to that. In other words, it&#39;s only `org.jis.Main`. \r\n\r\nYou need to configure the **maven-jar-plugin** instead the of the maven-compiler-plugin. The jar-plugin is the one which is responsible for packaging and creating the manifest.MF. \r\n\r\nFrom http://maven.apache.org/shared/maven-archiver/examples/classpath.html \r\n\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;!-- Here come other details\r\n            ...\r\n            --&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                  &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;!-- Here come other details\r\n            ...\r\n            --&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\n","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>First, your main class doesn't include <code>src/main/java</code>. Look at the package declaration in that Java file. For example, <code>package org.jis;</code>, then add the main class to that. In other words, it's only <code>org.jis.Main</code>.</p>\n<p>You need to configure the <strong>maven-jar-plugin</strong> instead the of the maven-compiler-plugin. The jar-plugin is the one which is responsible for packaging and creating the manifest.MF.</p>\n<p>From <a href=\"http://maven.apache.org/shared/maven-archiver/examples/classpath.html\" rel=\"noreferrer\">http://maven.apache.org/shared/maven-archiver/examples/classpath.html</a></p>\n<pre><code>  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;!-- Here come other details\n        ...\n        --&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n        &lt;!-- Here come other details\n        ...\n        --&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":7,"creation_date":1512052228,"post_id":29920533,"comment_id":82108487,"body_markdown":"While correct, it needs to be in the proper Maven plugin for it to work","body":"While correct, it needs to be in the proper Maven plugin for it to work"}],"tags":[],"owner":{"account_id":5972231,"reputation":574,"user_id":4694245,"display_name":"Dagriel"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430226685,"creation_date":1430226685,"answer_id":29920533,"question_id":29920434,"body_markdown":"You have to use the fully qualified name of your main class:\r\n\r\n    &lt;mainClass&gt;org.jis.Main&lt;/mainClass&gt;","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>You have to use the fully qualified name of your main class:</p>\n\n<pre><code>&lt;mainClass&gt;org.jis.Main&lt;/mainClass&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4276718,"reputation":341,"user_id":3497153,"accept_rate":50,"display_name":"tinku"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1460483086,"creation_date":1460483086,"answer_id":36580491,"question_id":29920434,"body_markdown":"Basically Maven is a framework which have a collection of maven-plugin for each and every action performed to build a project.\r\n\r\nEach Build Phase is performed by corresponding maven-plugin using project&#39;s description **Project Object Model(POM)** \r\n\r\nSo maven-compiler plugin is just responsible to compile the project and it won&#39;t create the manifest file.\r\n\r\nmaven-jar-plugin is responsible for creating the manifest file of the project.\r\n\r\n","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>Basically Maven is a framework which have a collection of maven-plugin for each and every action performed to build a project.</p>\n\n<p>Each Build Phase is performed by corresponding maven-plugin using project's description <strong>Project Object Model(POM)</strong> </p>\n\n<p>So maven-compiler plugin is just responsible to compile the project and it won't create the manifest file.</p>\n\n<p>maven-jar-plugin is responsible for creating the manifest file of the project.</p>\n"},{"tags":[],"owner":{"account_id":7023762,"reputation":399,"user_id":5382028,"display_name":"Piyush Verma"},"comment_count":0,"down_vote_count":8,"up_vote_count":0,"is_accepted":false,"score":-8,"last_activity_date":1505201448,"creation_date":1505201448,"answer_id":46170468,"question_id":29920434,"body_markdown":"In case, You are using Spring Boot Application. Add the below in pom.xml\r\n\r\n             &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nThis will add the Main-Class entry in MANIFEST.MF file.","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>In case, You are using Spring Boot Application. Add the below in pom.xml</p>\n\n<pre><code>         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>This will add the Main-Class entry in MANIFEST.MF file.</p>\n"},{"tags":[],"owner":{"account_id":12119886,"reputation":366,"user_id":8851882,"display_name":"Vinto"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1560328940,"creation_date":1559890824,"answer_id":56489418,"question_id":29920434,"body_markdown":"You may mention as below if it&#39;s a spring boot application.\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.test.MainClass&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;                   \r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>You may mention as below if it's a spring boot application.</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;com.test.MainClass&lt;/mainClass&gt;\n            &lt;/configuration&gt;                   \n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11086384,"reputation":1,"user_id":8139924,"display_name":"Rog&#233;rio do Carmo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612367191,"creation_date":1612367191,"answer_id":66030909,"question_id":29920434,"body_markdown":"It seems that some time has passed since the question but I&#39;ll share the solution I&#39;ve reached for future readings.\r\n\r\nI&#39;m using a Maven Project in the IntellJ IDE. Even using the full path copied from the operation system like: C:\\Users\\Rogerio\\Desktop\\Script\\src\\main\\java\\Controller\\MainClass.java, with or without .java or even trying the com.src... approach the main class was not found while creating the jar file for my application.\r\n\r\n **The solution was putting the CDATA tag inside the mainClass tag of the maven-jar plugin, as follows:**\r\n\r\nMy file structures:\r\n\r\n[A directory imagem structure on IntelliJ][1]\r\n  [1]: https://i.stack.imgur.com/LHCWc.jpg\r\n\r\nInside my maven-jar plugin on pom.xml:\r\n\r\n    `&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;mainClass&gt;&lt;![CDATA[Controller.MainClass]]&gt;&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n&lt;/plugin&gt;`\r\n\r\n\r\n","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>It seems that some time has passed since the question but I'll share the solution I've reached for future readings.</p>\n<p>I'm using a Maven Project in the IntellJ IDE. Even using the full path copied from the operation system like: C:\\Users\\Rogerio\\Desktop\\Script\\src\\main\\java\\Controller\\MainClass.java, with or without .java or even trying the com.src... approach the main class was not found while creating the jar file for my application.</p>\n<p><strong>The solution was putting the CDATA tag inside the mainClass tag of the maven-jar plugin, as follows:</strong></p>\n<p>My file structures:</p>\n<p>[A directory imagem structure on IntelliJ][1]\n[1]: https://i.stack.imgur.com/LHCWc.jpg</p>\n<p>Inside my maven-jar plugin on pom.xml:</p>\n<pre><code>`&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;mainClass&gt;&lt;![CDATA[Controller.MainClass]]&gt;&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n</code></pre>\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":7708270,"reputation":129,"user_id":5838541,"display_name":"djg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613080029,"creation_date":1613080029,"answer_id":66163407,"question_id":29920434,"body_markdown":"Just leaving this here for individuals who were as frustrated as I was trying to get an incredibly simple example to work.\r\n\r\nThe issue I was having is that the maven jar archiver had some bad information cached, so if you are giving it the proper main class (or in my case you don&#39;t actually need to do that with the proper maven version and settings).\r\n\r\nTry blowing away the &quot;target&quot; directory if you are using IntelliJ and have one. The &quot;target&quot; directory being the one maven default places the jar for instance.","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>Just leaving this here for individuals who were as frustrated as I was trying to get an incredibly simple example to work.</p>\n<p>The issue I was having is that the maven jar archiver had some bad information cached, so if you are giving it the proper main class (or in my case you don't actually need to do that with the proper maven version and settings).</p>\n<p>Try blowing away the &quot;target&quot; directory if you are using IntelliJ and have one. The &quot;target&quot; directory being the one maven default places the jar for instance.</p>\n"}],"owner":{"account_id":4841041,"reputation":967,"user_id":3906077,"accept_rate":71,"display_name":"NhatNienne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198556,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":29920526,"answer_count":7,"score":74,"last_activity_date":1682767675,"creation_date":1430226459,"question_id":29920434,"body_markdown":"I want to get a working jar file with my maven project.\r\n\r\nThe build part is:\r\n\r\n    &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.14&lt;/version&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;6.4.1&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\r\n\t\t\t\t\t&lt;configLocation&gt;${basedir}/src/test/resources/checkstyle_swt1.xml&lt;/configLocation&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;descriptor&gt;src/assembly/src.xml&lt;/descriptor&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;source&gt;1.7&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;target&gt;1.7&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n                                &lt;addDefaultSpecificationEntries&gt;true&lt;/addDefaultSpecificationEntries&gt;\r\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                &lt;mainClass&gt;org.jis.Main&lt;/mainClass&gt;                                \r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\nSo my problem right now is that I don&#39;T know how to implement the mainclass properly into my pom.xml and later into my jar file.\r\nThe Folder Structure is: src/main/java/org/jis/Main.java\r\nbut if I add the following line\r\n\r\n    &lt;mainClass&gt;src.main.java.org.jis.Main&lt;/mainClass&gt;\r\n\r\nIt doesn&#39;t work.","title":"Maven adding mainClass in pom.xml with the right folder path","body":"<p>I want to get a working jar file with my maven project.</p>\n<p>The build part is:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.14&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\n                    &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\n                    &lt;version&gt;6.4.1&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\n                &lt;configLocation&gt;${basedir}/src/test/resources/checkstyle_swt1.xml&lt;/configLocation&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;descriptor&gt;src/assembly/src.xml&lt;/descriptor&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                            &lt;addDefaultSpecificationEntries&gt;true&lt;/addDefaultSpecificationEntries&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;org.jis.Main&lt;/mainClass&gt;                                \n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n<p>So my problem right now is that I don'T know how to implement the mainclass properly into my pom.xml and later into my jar file.\nThe Folder Structure is: src/main/java/org/jis/Main.java\nbut if I add the following line</p>\n<pre><code>&lt;mainClass&gt;src.main.java.org.jis.Main&lt;/mainClass&gt;\n</code></pre>\n<p>It doesn't work.</p>\n"},{"tags":["java","html","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":13446567,"reputation":834,"user_id":9702353,"display_name":"Aritra Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573005335,"creation_date":1573005335,"answer_id":58722006,"question_id":58720584,"body_markdown":"\r\n\r\nAccording to the official thymeleaf documentation\r\n\r\nhttp://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#fixed-value-boolean-attributes\r\n\r\n`th:checked is considered as a fixed-value Boolean attribute. So try like bellow. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; th:checked=&quot;${schedule.morning}&quot; \r\n    th:id=&quot;|morning-${schedule.day}|&quot; /&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to change boolean value if checked with checkbox in thymeleaf?","body":"<p>According to the official thymeleaf documentation</p>\n\n<p><a href=\"http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#fixed-value-boolean-attributes\" rel=\"nofollow noreferrer\">http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#fixed-value-boolean-attributes</a></p>\n\n<p>`th:checked is considered as a fixed-value Boolean attribute. So try like bellow. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"checkbox\" class=\"custom-control-input\" th:checked=\"${schedule.morning}\" \r\nth:id=\"|morning-${schedule.day}|\" /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":20198820,"reputation":21,"user_id":14815106,"display_name":"Lachezar Kolev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682765705,"creation_date":1682765705,"answer_id":76135801,"question_id":58720584,"body_markdown":"To set a boolean variable&#39;s value to true / false if a checkbox is checked you have to use:\r\n\r\n    &lt;input type=&quot;checkbox&quot; th:field=&quot;*{booleanVariableName}&quot; /&gt;\r\n\r\nwhere `booleanVariableName` has its setter and getter method named like :\r\n`getBooleanVariableName` and `setBooleanVariableName`. If the name of the \r\ngetter and setter methods is different thymeleaf won&#39;t be able to update the boolean&#39;s value\r\n\r\n\r\n    th:checked=&quot;*{booleanVariableName}&quot;\r\n\r\nworks the other way around displaying the value the boolean&#39;s variable is set to. It won&#39;t update the variable&#39;s value if the checkbox changes its state","title":"How to change boolean value if checked with checkbox in thymeleaf?","body":"<p>To set a boolean variable's value to true / false if a checkbox is checked you have to use:</p>\n<pre><code>&lt;input type=&quot;checkbox&quot; th:field=&quot;*{booleanVariableName}&quot; /&gt;\n</code></pre>\n<p>where <code>booleanVariableName</code> has its setter and getter method named like :\n<code>getBooleanVariableName</code> and <code>setBooleanVariableName</code>. If the name of the\ngetter and setter methods is different thymeleaf won't be able to update the boolean's value</p>\n<pre><code>th:checked=&quot;*{booleanVariableName}&quot;\n</code></pre>\n<p>works the other way around displaying the value the boolean's variable is set to. It won't update the variable's value if the checkbox changes its state</p>\n"}],"owner":{"account_id":13196209,"reputation":41,"user_id":9530939,"display_name":"Russ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5234,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1682765705,"creation_date":1572993811,"question_id":58720584,"body_markdown":"I&#39;m building weekly availability when a new user is registering. I&#39;m using checkboxes to see what part of the day the user is available. For example if user is available on Monday until evening then user checks morning and evening under Monday. \r\n\r\nth:field=&quot;${schedule.morning}&quot; gives me and error.\r\nth:name=&quot;${schedule.morning}&quot; doesn&#39;t change the boolean value.\r\n\r\nSchedule model\r\n```java\r\n    @NotNull\r\n    @NotEmpty(message = &quot;Day of the availability is required.&quot;)\r\n    private String day;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private boolean morning;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private boolean afternoon;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private boolean evening;\r\n```\r\n\r\nController\r\n```java\r\n@GetMapping(&quot;/new-agent&quot;)\r\n    public String register(Model model) {\r\n        ScheduleHelper availability = new ScheduleHelper();\r\n        model.addAttribute(&quot;user&quot;, new User());\r\n        model.addAttribute(&quot;profile&quot;, new Profile());\r\n        model.addAttribute(&quot;schedules&quot;, availability);\r\n        model.addAttribute(&quot;languages&quot;, languages);\r\n        return &quot;profile_reg&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/new-agent&quot;)\r\n    public String registerNewUser(@Valid User user, BindingResult bindingResultUser,\r\n                                  @Valid Profile profile, BindingResult bindingResult,\r\n                                  ScheduleHelper schedules, BindingResult bindingResultSchedule,\r\n                                  Model model, RedirectAttributes redirectAttributes) {\r\n        if(bindingResult.hasErrors() || bindingResultUser.hasErrors() || bindingResultSchedule.hasErrors()) {\r\n            // Show validation errors.\r\n            logger.info(&quot;Errors registering a new user.&quot;);\r\n            model.addAttribute(&quot;validationErrors&quot;, bindingResult.getAllErrors());\r\n            model.addAttribute(&quot;validationErrorsUser&quot;, bindingResultUser.getAllErrors());\r\n            model.addAttribute(&quot;validationErrorsSchedule&quot;, bindingResultSchedule.getAllErrors());\r\n            model.addAttribute(&quot;user&quot;, user);\r\n            model.addAttribute(&quot;profile&quot;, profile);\r\n            model.addAttribute(&quot;schedules&quot;, schedules);\r\n            model.addAttribute(&quot;languages&quot;, languages);\r\n            return &quot;profile_reg&quot;;\r\n        } else {\r\n            schedules.print();\r\n            // Register new user.\r\n            User newUser = userService.register(user);\r\n            profile.setUser(newUser);\r\n            Profile newProfile = profileService.register(profile);\r\n            for(int i = 0; i &lt; 7; i++) {\r\n                Schedule newSchedule = schedules.getSchedule(i);\r\n                newSchedule.setProfile(newProfile);\r\n                scheduleService.register(newSchedule);\r\n            }\r\n            redirectAttributes\r\n                    .addFlashAttribute(&quot;id&quot;, newUser.getId())\r\n                    .addFlashAttribute(&quot;success&quot;, true);\r\n            return &quot;redirect:/new-agent&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nHelper Class to pass the list when submitting\r\n``` \r\n@Getter\r\n@Setter\r\npublic class ScheduleHelper {\r\n    private List&lt;Schedule&gt; schedules;\r\n    ScheduleHelper(){\r\n        schedules = new ArrayList&lt;&gt;();\r\n        String[] week = {&quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;};\r\n        for(int i = 0; i &lt; 7; i++) {\r\n            schedules.add(new Schedule(week[i]));\r\n        }\r\n    }\r\n    void print(){\r\n        Schedule schedule = schedules.get(1);\r\n        System.out.println(schedule.isMorning() + &quot; &quot; + schedule.isAfternoon() + &quot; &quot; + schedule.isEvening() + &quot; &quot; + schedule.getTest());\r\n    }\r\n\r\n    void addDay(String day){\r\n        schedules.add(new Schedule(day));\r\n    }\r\n\r\n```\r\n\r\n```html\r\n&lt;h4 class=&quot;text-uppercase d-flex justify-content-center&quot; style=&quot;color: #4267b2; margin-top: 10vh; margin-bottom: 3vh;&quot;&gt;availability&lt;br /&gt;&lt;/h4&gt;\r\n            &lt;th:block th:each=&quot;schedule : ${schedules.getSchedules()}&quot;&gt;\r\n              &lt;h1 class=&quot;display-4 text-center day-heading&quot; th:text=&quot;${schedule.day}&quot;&gt;Tuesday&lt;/h1&gt;\r\n              &lt;div class=&quot;form-group d-flex justify-content-center&quot; style=&quot;margin-bottom: 20px;&quot;&gt;\r\n                &lt;div class=&quot;custom-control custom-checkbox&quot; style=&quot;margin-right: 10px;&quot;&gt;\r\n                  &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot;\r\n                         th:field=&quot;${schedule.morning}&quot; value=&quot;1&quot;\r\n                         th:id=&quot;|morning-${schedule.day}|&quot; /&gt;\r\n                  &lt;label class=&quot;custom-control-label&quot; th:for=&quot;|morning-${schedule.day}|&quot;&gt;Morning&lt;/label&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;custom-control custom-checkbox&quot; style=&quot;margin-right: 10px;&quot;&gt;\r\n                  &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot;\r\n                         th:field=&quot;${schedule.afternoon}&quot; value=&quot;1&quot;\r\n                         th:id=&quot;|afternoon-${schedule.day}|&quot; /&gt;\r\n                  &lt;label class=&quot;custom-control-label&quot; th:for=&quot;|afternoon-${schedule.day}|&quot;&gt;Afternoon&lt;/label&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;custom-control custom-checkbox&quot; style=&quot;margin-right: 10px;&quot;&gt;\r\n                  &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot;\r\n                         th:field=&quot;${schedule.evening}&quot; value=&quot;1&quot;\r\n                         th:id=&quot;|evening-${schedule.day}|&quot; /&gt;\r\n                  &lt;label class=&quot;custom-control-label&quot; th:for=&quot;|evening-${schedule.day}|&quot;&gt;Evening&lt;/label&gt;\r\n                &lt;/div&gt;\r\n              &lt;/div&gt;\r\n            &lt;/th:block&gt;\r\n```\r\n\r\nHere&#39;s the error log when I try to request /new-agent page:\r\n```\r\n    An error happened during template parsing (template: &quot;class path resource [templates/profile_reg.html]&quot;)\r\norg.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/profile_reg.html]&quot;)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:362)\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:189)\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:150)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1589)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: org.attoparser.ParseException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputCheckboxFieldTagProcessor&#39; (template: &quot;profile_reg&quot; - line 239, col 26)\r\n\tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\r\n\tat org.attoparser.MarkupParser.parse(MarkupParser.java:257)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\r\n\t... 95 more\r\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputCheckboxFieldTagProcessor&#39; (template: &quot;profile_reg&quot; - line 239, col 26)\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117)\r\n\tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)\r\n\tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918)\r\n\tat org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228)\r\n\tat org.thymeleaf.engine.Model.process(Model.java:282)\r\n\tat org.thymeleaf.engine.Model.process(Model.java:290)\r\n\tat org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:367)\r\n\tat org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:221)\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)\r\n\tat org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleCloseElementEnd(TemplateHandlerAdapterMarkupHandler.java:388)\r\n\tat org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:322)\r\n\tat org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleCloseElementEnd(OutputExpressionInlinePreProcessorHandler.java:220)\r\n\tat org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:164)\r\n\tat org.attoparser.HtmlElement.handleCloseElementEnd(HtmlElement.java:169)\r\n\tat org.attoparser.HtmlMarkupHandler.handleCloseElementEnd(HtmlMarkupHandler.java:412)\r\n\tat org.attoparser.MarkupEventProcessorHandler.handleCloseElementEnd(MarkupEventProcessorHandler.java:473)\r\n\tat org.attoparser.ParsingElementMarkupUtil.parseCloseElement(ParsingElementMarkupUtil.java:201)\r\n\tat org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:725)\r\n\tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)\r\n\t... 97 more\r\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;schedule&#39; available as request attribute\r\n\tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153)\r\n\tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:904)\r\n\tat org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227)\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306)\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253)\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227)\r\n\tat org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174)\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)\r\n\t... 116 more\r\n```\r\n\r\nI want the program to change the boolean value from false to true when checkbox is checked.","title":"How to change boolean value if checked with checkbox in thymeleaf?","body":"<p>I'm building weekly availability when a new user is registering. I'm using checkboxes to see what part of the day the user is available. For example if user is available on Monday until evening then user checks morning and evening under Monday. </p>\n\n<p>th:field=\"${schedule.morning}\" gives me and error.\nth:name=\"${schedule.morning}\" doesn't change the boolean value.</p>\n\n<p>Schedule model</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @NotNull\n    @NotEmpty(message = \"Day of the availability is required.\")\n    private String day;\n\n    @NonNull\n    @Column(nullable = false)\n    private boolean morning;\n\n    @NonNull\n    @Column(nullable = false)\n    private boolean afternoon;\n\n    @NonNull\n    @Column(nullable = false)\n    private boolean evening;\n</code></pre>\n\n<p>Controller</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(\"/new-agent\")\n    public String register(Model model) {\n        ScheduleHelper availability = new ScheduleHelper();\n        model.addAttribute(\"user\", new User());\n        model.addAttribute(\"profile\", new Profile());\n        model.addAttribute(\"schedules\", availability);\n        model.addAttribute(\"languages\", languages);\n        return \"profile_reg\";\n    }\n\n    @PostMapping(\"/new-agent\")\n    public String registerNewUser(@Valid User user, BindingResult bindingResultUser,\n                                  @Valid Profile profile, BindingResult bindingResult,\n                                  ScheduleHelper schedules, BindingResult bindingResultSchedule,\n                                  Model model, RedirectAttributes redirectAttributes) {\n        if(bindingResult.hasErrors() || bindingResultUser.hasErrors() || bindingResultSchedule.hasErrors()) {\n            // Show validation errors.\n            logger.info(\"Errors registering a new user.\");\n            model.addAttribute(\"validationErrors\", bindingResult.getAllErrors());\n            model.addAttribute(\"validationErrorsUser\", bindingResultUser.getAllErrors());\n            model.addAttribute(\"validationErrorsSchedule\", bindingResultSchedule.getAllErrors());\n            model.addAttribute(\"user\", user);\n            model.addAttribute(\"profile\", profile);\n            model.addAttribute(\"schedules\", schedules);\n            model.addAttribute(\"languages\", languages);\n            return \"profile_reg\";\n        } else {\n            schedules.print();\n            // Register new user.\n            User newUser = userService.register(user);\n            profile.setUser(newUser);\n            Profile newProfile = profileService.register(profile);\n            for(int i = 0; i &lt; 7; i++) {\n                Schedule newSchedule = schedules.getSchedule(i);\n                newSchedule.setProfile(newProfile);\n                scheduleService.register(newSchedule);\n            }\n            redirectAttributes\n                    .addFlashAttribute(\"id\", newUser.getId())\n                    .addFlashAttribute(\"success\", true);\n            return \"redirect:/new-agent\";\n        }\n    }\n</code></pre>\n\n<p>Helper Class to pass the list when submitting</p>\n\n<pre><code>@Getter\n@Setter\npublic class ScheduleHelper {\n    private List&lt;Schedule&gt; schedules;\n    ScheduleHelper(){\n        schedules = new ArrayList&lt;&gt;();\n        String[] week = {\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"};\n        for(int i = 0; i &lt; 7; i++) {\n            schedules.add(new Schedule(week[i]));\n        }\n    }\n    void print(){\n        Schedule schedule = schedules.get(1);\n        System.out.println(schedule.isMorning() + \" \" + schedule.isAfternoon() + \" \" + schedule.isEvening() + \" \" + schedule.getTest());\n    }\n\n    void addDay(String day){\n        schedules.add(new Schedule(day));\n    }\n\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h4 class=\"text-uppercase d-flex justify-content-center\" style=\"color: #4267b2; margin-top: 10vh; margin-bottom: 3vh;\"&gt;availability&lt;br /&gt;&lt;/h4&gt;\n            &lt;th:block th:each=\"schedule : ${schedules.getSchedules()}\"&gt;\n              &lt;h1 class=\"display-4 text-center day-heading\" th:text=\"${schedule.day}\"&gt;Tuesday&lt;/h1&gt;\n              &lt;div class=\"form-group d-flex justify-content-center\" style=\"margin-bottom: 20px;\"&gt;\n                &lt;div class=\"custom-control custom-checkbox\" style=\"margin-right: 10px;\"&gt;\n                  &lt;input type=\"checkbox\" class=\"custom-control-input\"\n                         th:field=\"${schedule.morning}\" value=\"1\"\n                         th:id=\"|morning-${schedule.day}|\" /&gt;\n                  &lt;label class=\"custom-control-label\" th:for=\"|morning-${schedule.day}|\"&gt;Morning&lt;/label&gt;\n                &lt;/div&gt;\n                &lt;div class=\"custom-control custom-checkbox\" style=\"margin-right: 10px;\"&gt;\n                  &lt;input type=\"checkbox\" class=\"custom-control-input\"\n                         th:field=\"${schedule.afternoon}\" value=\"1\"\n                         th:id=\"|afternoon-${schedule.day}|\" /&gt;\n                  &lt;label class=\"custom-control-label\" th:for=\"|afternoon-${schedule.day}|\"&gt;Afternoon&lt;/label&gt;\n                &lt;/div&gt;\n                &lt;div class=\"custom-control custom-checkbox\" style=\"margin-right: 10px;\"&gt;\n                  &lt;input type=\"checkbox\" class=\"custom-control-input\"\n                         th:field=\"${schedule.evening}\" value=\"1\"\n                         th:id=\"|evening-${schedule.day}|\" /&gt;\n                  &lt;label class=\"custom-control-label\" th:for=\"|evening-${schedule.day}|\"&gt;Evening&lt;/label&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/th:block&gt;\n</code></pre>\n\n<p>Here's the error log when I try to request /new-agent page:</p>\n\n<pre><code>    An error happened during template parsing (template: \"class path resource [templates/profile_reg.html]\")\norg.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: \"class path resource [templates/profile_reg.html]\")\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:362)\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:189)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1372)\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:150)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1589)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: org.attoparser.ParseException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputCheckboxFieldTagProcessor' (template: \"profile_reg\" - line 239, col 26)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\n    ... 95 more\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputCheckboxFieldTagProcessor' (template: \"profile_reg\" - line 239, col 26)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117)\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918)\n    at org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228)\n    at org.thymeleaf.engine.Model.process(Model.java:282)\n    at org.thymeleaf.engine.Model.process(Model.java:290)\n    at org.thymeleaf.engine.IteratedGatheringModelProcessable.processIterationModel(IteratedGatheringModelProcessable.java:367)\n    at org.thymeleaf.engine.IteratedGatheringModelProcessable.process(IteratedGatheringModelProcessable.java:221)\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640)\n    at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleCloseElementEnd(TemplateHandlerAdapterMarkupHandler.java:388)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:322)\n    at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleCloseElementEnd(OutputExpressionInlinePreProcessorHandler.java:220)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:164)\n    at org.attoparser.HtmlElement.handleCloseElementEnd(HtmlElement.java:169)\n    at org.attoparser.HtmlMarkupHandler.handleCloseElementEnd(HtmlMarkupHandler.java:412)\n    at org.attoparser.MarkupEventProcessorHandler.handleCloseElementEnd(MarkupEventProcessorHandler.java:473)\n    at org.attoparser.ParsingElementMarkupUtil.parseCloseElement(ParsingElementMarkupUtil.java:201)\n    at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:725)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)\n    ... 97 more\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'schedule' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153)\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:904)\n    at org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227)\n    at org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)\n    ... 116 more\n</code></pre>\n\n<p>I want the program to change the boolean value from false to true when checkbox is checked.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1682760433,"post_id":76135427,"comment_id":134268622,"body_markdown":"Why do you need it? Also you should post a relevant code to your problem. Just posting a error message doesn&#39;t help.","body":"Why do you need it? Also you should post a relevant code to your problem. Just posting a error message doesn&#39;t help."},{"owner":{"account_id":14322830,"reputation":39,"user_id":10345705,"display_name":"Grand Skunk"},"score":0,"creation_date":1682760734,"post_id":76135427,"comment_id":134268647,"body_markdown":"I want the user to be able to access the page via a token they are given. I have already given the code where I am having the problem","body":"I want the user to be able to access the page via a token they are given. I have already given the code where I am having the problem"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1682762068,"post_id":76135427,"comment_id":134268756,"body_markdown":"Check your question text. Apparently you are calling &#39;update-form&#39; but the mapping you have defined is for &#39;update-password&#39;.","body":"Check your question text. Apparently you are calling &#39;update-form&#39; but the mapping you have defined is for &#39;update-password&#39;."},{"owner":{"account_id":14322830,"reputation":39,"user_id":10345705,"display_name":"Grand Skunk"},"score":0,"creation_date":1682762245,"post_id":76135427,"comment_id":134268774,"body_markdown":"Sorry I have updated this now.","body":"Sorry I have updated this now."}],"answers":[{"comments":[{"owner":{"account_id":14322830,"reputation":39,"user_id":10345705,"display_name":"Grand Skunk"},"score":0,"creation_date":1682766716,"post_id":76135784,"comment_id":134269203,"body_markdown":"Fixed but it actually was from another problem, thanks for the help","body":"Fixed but it actually was from another problem, thanks for the help"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1682841151,"post_id":76135784,"comment_id":134276320,"body_markdown":"@GrandSkunk Glad it is resolved.","body":"@GrandSkunk Glad it is resolved."}],"tags":[],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682765448,"creation_date":1682765448,"answer_id":76135784,"question_id":76135427,"body_markdown":"Did you try to map the path variable explicitly? Might help. \r\n\r\nCan you try changing this:\r\n```\r\n@GetMapping(&quot;/update-password/{id}&quot;)\r\npublic String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request)\r\n```\r\n\r\nto:\r\n```\r\n@GetMapping(&quot;/update-password/{id}&quot;)\r\npublic String updatePasswordForm(@PathVariable(&quot;id&quot;) String id, Model model, HttpServletRequest request)\r\n```\r\nor\r\n```\r\n@GetMapping(&quot;/update-password/id/{id}&quot;)\r\npublic String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request)\r\n```","title":"Spring @PathVariable annotation not working","body":"<p>Did you try to map the path variable explicitly? Might help.</p>\n<p>Can you try changing this:</p>\n<pre><code>@GetMapping(&quot;/update-password/{id}&quot;)\npublic String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request)\n</code></pre>\n<p>to:</p>\n<pre><code>@GetMapping(&quot;/update-password/{id}&quot;)\npublic String updatePasswordForm(@PathVariable(&quot;id&quot;) String id, Model model, HttpServletRequest request)\n</code></pre>\n<p>or</p>\n<pre><code>@GetMapping(&quot;/update-password/id/{id}&quot;)\npublic String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request)\n</code></pre>\n"}],"owner":{"account_id":14322830,"reputation":39,"user_id":10345705,"display_name":"Grand Skunk"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76135784,"answer_count":1,"score":-1,"last_activity_date":1682765448,"creation_date":1682759826,"question_id":76135427,"body_markdown":" \r\nI have tried adding the @PathVariable annotation to my getmapping so that instead of going to the ../update-passwordpage, they have to go through /update-password/{id}. I just tried testing this by adding the @PathVariable in but when I try go ../update-password/test for example, it just doesn&#39;t load the page. \r\n\r\nIs there something else I need to add, do I need to add this in the @PostMapping as well?\r\n\r\n\r\n\r\n    @Controller\r\n    public class UpdatePasswordController {\r\n        Logger logger = LoggerFactory.getLogger(UpdatePasswordController.class);\r\n    \r\n        @Autowired\r\n        UserService userService;\r\n    \r\n        Optional&lt;User&gt; testUser;\r\n        User currentUser;\r\n    \r\n  \r\n    \r\n        /**\r\n         * Gets update password form to be displayed\r\n         * @param model\r\n         * @return\r\n         */\r\n        @GetMapping(&quot;/update-password/{id}&quot;)\r\n        public String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request) {\r\n            model.addAttribute(&quot;updatePasswordForm&quot;, new UpdatePasswordForm());\r\n            model.addAttribute(&quot;httpServletRequest&quot;,request);\r\n            logger.info(&quot;this is id&quot;);\r\n            logger.info(id);\r\n            return &quot;updatePassword&quot;;\r\n        }\r\n    \r\n        @PostMapping(&quot;/update-password&quot;)\r\n        public String submitEmail(\r\n                @RequestParam(&quot;password&quot;) String password,\r\n                @Validated UpdatePasswordForm updatePasswordForm,\r\n                BindingResult bindingResult,\r\n                Model model,\r\n                HttpServletResponse httpServletResponse,\r\n                HttpServletRequest request) {\r\n    \r\n          \r\n          \r\n            model.addAttribute(&quot;httpServletRequest&quot;,request);\r\n    \r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                httpServletResponse.setStatus(HttpServletResponse.SC_BAD_REQUEST);\r\n                model.addAttribute(&quot;submitted_form&quot;, null);\r\n                return &quot;updatePassword&quot;;\r\n            }\r\n    \r\n    \r\n            currentUser.setPassword(password);\r\n            userService.updateOrAddUser(currentUser);\r\n    \r\n    \r\n            return &quot;login&quot;;\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n\r\nIt also gives me this message in the logs sometimes, not sure if it is related: `Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;GET&#39; is not supported]`\r\n","title":"Spring @PathVariable annotation not working","body":"<p>I have tried adding the @PathVariable annotation to my getmapping so that instead of going to the ../update-passwordpage, they have to go through /update-password/{id}. I just tried testing this by adding the @PathVariable in but when I try go ../update-password/test for example, it just doesn't load the page.</p>\n<p>Is there something else I need to add, do I need to add this in the @PostMapping as well?</p>\n<pre><code>@Controller\npublic class UpdatePasswordController {\n    Logger logger = LoggerFactory.getLogger(UpdatePasswordController.class);\n\n    @Autowired\n    UserService userService;\n\n    Optional&lt;User&gt; testUser;\n    User currentUser;\n\n\n\n    /**\n     * Gets update password form to be displayed\n     * @param model\n     * @return\n     */\n    @GetMapping(&quot;/update-password/{id}&quot;)\n    public String updatePasswordForm(@PathVariable String id, Model model, HttpServletRequest request) {\n        model.addAttribute(&quot;updatePasswordForm&quot;, new UpdatePasswordForm());\n        model.addAttribute(&quot;httpServletRequest&quot;,request);\n        logger.info(&quot;this is id&quot;);\n        logger.info(id);\n        return &quot;updatePassword&quot;;\n    }\n\n    @PostMapping(&quot;/update-password&quot;)\n    public String submitEmail(\n            @RequestParam(&quot;password&quot;) String password,\n            @Validated UpdatePasswordForm updatePasswordForm,\n            BindingResult bindingResult,\n            Model model,\n            HttpServletResponse httpServletResponse,\n            HttpServletRequest request) {\n\n      \n      \n        model.addAttribute(&quot;httpServletRequest&quot;,request);\n\n\n        if (bindingResult.hasErrors()) {\n            httpServletResponse.setStatus(HttpServletResponse.SC_BAD_REQUEST);\n            model.addAttribute(&quot;submitted_form&quot;, null);\n            return &quot;updatePassword&quot;;\n        }\n\n\n        currentUser.setPassword(password);\n        userService.updateOrAddUser(currentUser);\n\n\n        return &quot;login&quot;;\n    }\n\n\n\n}\n</code></pre>\n<p>It also gives me this message in the logs sometimes, not sure if it is related: <code>Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]</code></p>\n"},{"tags":["java","eclipse","spring","hibernate","maven"],"answers":[{"tags":[],"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1414557147,"creation_date":1414557147,"answer_id":26622825,"question_id":26622228,"body_markdown":"You&#39;re having a problem because you&#39;re using relatively old frameworks. They are dependent upon a version of JTA that could not be made available in a public repository due to licensing restrictions. In that era there were a number of artifacts like this that we had to download from Sun (after agreeing to the licence) and install in our own local repository.\r\n\r\nThankfully, in your case you just need to add:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jta&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto your pom.xml and that should override the older version.\r\n\r\nThis is a newer version but it only contains API classes (not implementations) and I believe that it is backward compatible.\r\n","title":"Failure to find javax.transaction:jta: in maven","body":"<p>You're having a problem because you're using relatively old frameworks. They are dependent upon a version of JTA that could not be made available in a public repository due to licensing restrictions. In that era there were a number of artifacts like this that we had to download from Sun (after agreeing to the licence) and install in our own local repository.</p>\n\n<p>Thankfully, in your case you just need to add:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n    &lt;artifactId&gt;jta&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>to your pom.xml and that should override the older version.</p>\n\n<p>This is a newer version but it only contains API classes (not implementations) and I believe that it is backward compatible.</p>\n"}],"owner":{"account_id":2304775,"reputation":89,"user_id":2024255,"display_name":"Rajendra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4701,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1682764841,"creation_date":1414552693,"question_id":26622228,"body_markdown":"I just created web application using maven -3.2.3 and there after i just some dependencies in pom.xml next just right click on my pom.xml--&gt;RunAs--&gt;maven install.All jars are downloaded.Then while trying to build(like my pom.xml--&gt;RunAs--&gt;maven build) i got one pop up to set goal. i just typed goal field as a &quot;package&quot; --&gt;run.\r\n i am facing below issue\r\n\r\n    Downloaded: http://repo.maven.apache.org/maven2/org/springframework/spring/2.5.6/spring-2.5.6.jar (2881 KB at 3.3 KB/sec)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 15:26.448s\r\n    [INFO] Finished at: Wed Oct 29 08:33:31 IST 2014\r\n    [INFO] Final Memory: 4M/15M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal on project SpringMVCMaven: Could not resolve dependencies for project com.rajendra.spring:SpringMVCMaven:war:1.0: Failure to find javax.transaction:jta:jar:1.0.1B in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n\r\nand for reference below is the pom.xml\r\n\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.rajendra.spring&lt;/groupId&gt;\r\n      &lt;artifactId&gt;SpringMVCMaven&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n      &lt;name&gt;SpringMVCMaven Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;2.5.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n        \t        &lt;groupId&gt;cglib&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;cglib&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n    \t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.3.ga&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n     \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;antlr&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;antlr&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.7&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;SpringMVCMaven&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nCould you suggest me where exactly things are getting wrong. Appreciating your help here\r\n","title":"Failure to find javax.transaction:jta: in maven","body":"<p>I just created web application using maven -3.2.3 and there after i just some dependencies in pom.xml next just right click on my pom.xml-->RunAs-->maven install.All jars are downloaded.Then while trying to build(like my pom.xml-->RunAs-->maven build) i got one pop up to set goal. i just typed goal field as a \"package\" -->run.\n i am facing below issue</p>\n\n<pre><code>Downloaded: http://repo.maven.apache.org/maven2/org/springframework/spring/2.5.6/spring-2.5.6.jar (2881 KB at 3.3 KB/sec)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 15:26.448s\n[INFO] Finished at: Wed Oct 29 08:33:31 IST 2014\n[INFO] Final Memory: 4M/15M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project SpringMVCMaven: Could not resolve dependencies for project com.rajendra.spring:SpringMVCMaven:war:1.0: Failure to find javax.transaction:jta:jar:1.0.1B in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre>\n\n<p>and for reference below is the pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.rajendra.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;SpringMVCMaven&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;name&gt;SpringMVCMaven Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n                &lt;groupId&gt;cglib&lt;/groupId&gt;\n        &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate&lt;/artifactId&gt;\n    &lt;version&gt;3.2.3.ga&lt;/version&gt;\n&lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;antlr&lt;/groupId&gt;\n        &lt;artifactId&gt;antlr&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;SpringMVCMaven&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Could you suggest me where exactly things are getting wrong. Appreciating your help here</p>\n"},{"tags":["java","tomcat8"],"comments":[{"owner":{"account_id":6175645,"reputation":1443,"user_id":4812613,"display_name":"Scott Sosna"},"score":0,"creation_date":1456969929,"post_id":35761657,"comment_id":59196447,"body_markdown":"does it matter what browser you use?  Chrome v. Firefox v. IE v. Safari?","body":"does it matter what browser you use?  Chrome v. Firefox v. IE v. Safari?"},{"owner":{"account_id":307579,"reputation":1692,"user_id":618951,"accept_rate":94,"display_name":"RisingSun"},"score":1,"creation_date":1456970416,"post_id":35761657,"comment_id":59196595,"body_markdown":"what exactly do you mean by navigate away? close the page? switch a tab? go to a different page on the same site? a broken pipe means the connection between the server and the client has been severed before the page finished loading. btw, 2mb image on a site is too bit even if it is the only thing there.","body":"what exactly do you mean by navigate away? close the page? switch a tab? go to a different page on the same site? a broken pipe means the connection between the server and the client has been severed before the page finished loading. btw, 2mb image on a site is too bit even if it is the only thing there."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1456973376,"post_id":35761657,"comment_id":59197360,"body_markdown":"This exception has been *caught.* That means it hasn&#39;t even killed the thread it was thrown in, let alone the entire Tomcat. I suggest that problem lies elsewhere.","body":"This exception has been <i>caught.</i> That means it hasn&#39;t even killed the thread it was thrown in, let alone the entire Tomcat. I suggest that problem lies elsewhere."},{"owner":{"account_id":5489189,"reputation":89,"user_id":4363061,"display_name":"Steve Swett"},"score":0,"creation_date":1457083085,"post_id":35761657,"comment_id":59254182,"body_markdown":"Khuderm, by navigate away I mean click a link that goes elsewhere -- like a link on the browser Bookmarks Bar that goes to a different site.  Since the original post, I used https://tinypng.com/ to reduce my splash background image size to 539 KB.","body":"Khuderm, by navigate away I mean click a link that goes elsewhere -- like a link on the browser Bookmarks Bar that goes to a different site.  Since the original post, I used <a href=\"https://tinypng.com/\" rel=\"nofollow noreferrer\">tinypng.com</a> to reduce my splash background image size to 539 KB."},{"owner":{"account_id":5489189,"reputation":89,"user_id":4363061,"display_name":"Steve Swett"},"score":0,"creation_date":1457083630,"post_id":35761657,"comment_id":59254564,"body_markdown":"EJP, yes, the exception is caught.  Technically, it probably hasn&#39;t killed Tomcat, but my web app stops responding to requests, and the Tomcat Manager web app no longer works.  I have to restart the Tomcat service to recover.","body":"EJP, yes, the exception is caught.  Technically, it probably hasn&#39;t killed Tomcat, but my web app stops responding to requests, and the Tomcat Manager web app no longer works.  I have to restart the Tomcat service to recover."},{"owner":{"account_id":5489189,"reputation":89,"user_id":4363061,"display_name":"Steve Swett"},"score":0,"creation_date":1457083906,"post_id":35761657,"comment_id":59254756,"body_markdown":"So far, with the reduction in image file size, I haven&#39;t been able to reproduce the problem in production myself, but my Internet download speed (47 Mbps) might be too high to catch it .  Over the next few days, I&#39;ll see if other users/circumstances cause it to break.  Will keep you posted.","body":"So far, with the reduction in image file size, I haven&#39;t been able to reproduce the problem in production myself, but my Internet download speed (47 Mbps) might be too high to catch it .  Over the next few days, I&#39;ll see if other users/circumstances cause it to break.  Will keep you posted."},{"owner":{"account_id":73701,"reputation":17468,"user_id":212107,"accept_rate":100,"display_name":"Gerald Schneider"},"score":0,"creation_date":1457084724,"post_id":35761657,"comment_id":59255271,"body_markdown":"Another option: If you use apache, nginx or a similar webserver as a reverse proxy you can offload static resources to be loaded directly from the webserver, thus reducing load from your tomcat.","body":"Another option: If you use apache, nginx or a similar webserver as a reverse proxy you can offload static resources to be loaded directly from the webserver, thus reducing load from your tomcat."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1512982491,"post_id":35761657,"comment_id":82458566,"body_markdown":"@SteveSwett So if the exception has been caught, your claim that it has &#39;brought down the Tomcat site&#39; is incorrect. If you have *another* problem, post it.","body":"@SteveSwett So if the exception has been caught, your claim that it has &#39;brought down the Tomcat site&#39; is incorrect. If you have <i>another</i> problem, post it."}],"answers":[{"tags":[],"owner":{"account_id":5489189,"reputation":89,"user_id":4363061,"display_name":"Steve Swett"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1457521176,"creation_date":1457521176,"answer_id":35889674,"question_id":35761657,"body_markdown":"After making a couple changes, the problem hasn&#39;t occurred in production.  The most impactful change was to reduce the size of my background/splash image.  The other change was that I increased the Tomcat Connector connectionTimeout attribute setting 6-fold.","title":"How do I prevent &quot;Broken pipe&quot; from taking down my tomcat web site?","body":"<p>After making a couple changes, the problem hasn't occurred in production.  The most impactful change was to reduce the size of my background/splash image.  The other change was that I increased the Tomcat Connector connectionTimeout attribute setting 6-fold.</p>\n"}],"owner":{"account_id":5489189,"reputation":89,"user_id":4363061,"display_name":"Steve Swett"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18581,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":1,"score":6,"last_activity_date":1682764258,"creation_date":1456969817,"question_id":35761657,"body_markdown":"I have a Tomcat 8 web application that uses a 2 MB png image as a &quot;splash/landing page&quot; background.  The image is referenced in an external stylesheet.\r\n\r\nIf I clear my browser cache, directly request the URL of the image, but navigate away from the image before it has loaded, it will completely kill my web application.  It fails to provide any more responses for any requests.\r\n\r\nI get this error:\r\n\r\n    org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe\r\n            at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:396)\r\n            at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:344)\r\n            at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:421)\r\n            at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:409)\r\n            at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\r\n            at org.apache.catalina.servlets.DefaultServlet.copy(DefaultServlet.java:1795)\r\n            at org.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:919)\r\n            at org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:400)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n            at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n            at other.JsCssImgResponseHeaderFilter.doFilter(JsCssImgResponseHeaderFilter.java:36)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n            at other.CatchAnyExceptionFilter.doFilter(CatchAnyExceptionFilter.java:39)\r\n\r\n\r\nI&#39;m trying to catch that exception (or any exception for that matter) and show a friendly ErrorPage.jsp, but I can&#39;t redirect to the ErrorPage because the response has already been committed.\r\n\r\nI am unable to duplicate this in a test environment, but I can make it break at will in production.\r\n\r\nDoes anyone know what my options are for solving this kind of problem?  Thanks in advance.\r\n\r\nBTW, here is what my Filter class&#39;s doFilter method looks like:\r\n\r\n        public void doFilter(ServletRequest req,\r\n                         ServletResponse res,\r\n                         FilterChain fc) throws IOException, ServletException\r\n    {\r\n        HttpServletRequest request = (HttpServletRequest) req;\r\n        HttpServletResponse response = (HttpServletResponse) res;\r\n\t    HttpSession session = request.getSession();\r\n\t        \r\n        try\r\n        {\r\n            fc.doFilter(req, res);\r\n            \r\n            // Have learned that response headers should not be set until we have determined there won&#39;t be an exception.\r\n            // Can&#39;t easily redirect or forward (to an error page, for example) if headers have already been committed.\r\n            \r\n            if (SessionHelper.hasNeedsJsCssImgResponseHeaderFlag(request))\r\n            {\r\n                Calendar cal = Calendar.getInstance();\r\n                cal.add(Calendar.SECOND, JsCssImgResponseHeaderFilter.SECONDS_TO_CACHE);\r\n                response.setHeader(&quot;Cache-Control&quot;, &quot;PUBLIC, max-age=&quot; + JsCssImgResponseHeaderFilter.SECONDS_TO_CACHE + &quot;, must-revalidate&quot;);\r\n                response.setHeader(&quot;Expires&quot;, DateUtils.getDateInExpiresHeaderFormat(cal.getTime()));\r\n            }\r\n            else if (SessionHelper.hasNeedsDynamicPageResponseHeaderFlag(request))\r\n            {\r\n                response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\r\n                response.setHeader(&quot;Expires&quot;, &quot;Mon, 25 Nov 2013 00:00:01 GMT&quot;);   // in the past\r\n            }\r\n            else if (SessionHelper.hasNeedsRestServicesResponseHeaderFlag(request))\r\n            {\r\n                // CORS - Cross Origin Resource Sharing: allow service requests from other domains -- \r\n                // such as local development domains hosting AngularJS projects.\r\n                \r\n        \t\tresponse.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost.domain.com:8080&quot;);\r\n        \t\t\r\n        \t\tresponse.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, OPTIONS, PUT, DELETE&quot;);\r\n        \t\t// response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;*&quot;);\r\n        \t\t\r\n        \t\tresponse.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, X-Requested-With&quot;);\r\n            }\r\n        }\r\n        catch (Exception e)\r\n        {\r\n        \tSessionHelper.setErrorPageException(req, session, e);\r\n    \t\tfinal String uri = request.getRequestURI();\r\n    \t\tfinal String playerName = SessionHelper.getLoggedInPlayerName(session);\r\n    \t\t\r\n    \t\tString outerLogEntryText = &quot;Player = &quot; + playerName + &quot; - IP = &quot; + request.getRemoteAddr() + \r\n    \t\t\t\t&quot; - Mobile = &quot; + SessionHelper.isMobileBrowser(request) +\r\n    \t\t\t\t&quot; - URI = &quot; + uri + &quot; - Exception MSG = &quot; + e.getMessage();\r\n    \t\t\r\n    \t\tLogUtils.writeLogEntry(outerLogEntryText, true, e);\r\n    \t\tSessionHelper.setRedirectPage(session, SessionHelper.ERROR_PAGE_PATH);\r\n        }\r\n        finally\r\n        {\r\n        \tString redirectPage = SessionHelper.getRedirectPage(session);\r\n        \tSessionHelper.clearRedirectPage(session);\r\n        \t\r\n        \tif (redirectPage != null)\r\n        \t{\r\n        \t\tif (response.isCommitted())\r\n        \t\t{\r\n        \t\t\t// Article: http://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed\r\n        \t\t\tSystem.out.println(&quot;Response has been committed.  Cannot redirect to: &quot; + redirectPage);\r\n        \t\t}\r\n        \t\telse\r\n        \t\t{\r\n            \t\tresponse.sendRedirect(redirectPage);\r\n        \t\t}\r\n        \t}\r\n        }\r\n    }\r\n\r\nWhen the problem occurs, my &quot;Response has been committed...&quot; output statement is indeed written, therefore it is not redirecting to my error page.  That&#39;s my challenge: how to redirect somewhere when this happens -- or take some better/harmless action.","title":"How do I prevent &quot;Broken pipe&quot; from taking down my tomcat web site?","body":"<p>I have a Tomcat 8 web application that uses a 2 MB png image as a \"splash/landing page\" background.  The image is referenced in an external stylesheet.</p>\n\n<p>If I clear my browser cache, directly request the URL of the image, but navigate away from the image before it has loaded, it will completely kill my web application.  It fails to provide any more responses for any requests.</p>\n\n<p>I get this error:</p>\n\n<pre><code>org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe\n        at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:396)\n        at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:344)\n        at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:421)\n        at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:409)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\n        at org.apache.catalina.servlets.DefaultServlet.copy(DefaultServlet.java:1795)\n        at org.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:919)\n        at org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:400)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at other.JsCssImgResponseHeaderFilter.doFilter(JsCssImgResponseHeaderFilter.java:36)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at other.CatchAnyExceptionFilter.doFilter(CatchAnyExceptionFilter.java:39)\n</code></pre>\n\n<p>I'm trying to catch that exception (or any exception for that matter) and show a friendly ErrorPage.jsp, but I can't redirect to the ErrorPage because the response has already been committed.</p>\n\n<p>I am unable to duplicate this in a test environment, but I can make it break at will in production.</p>\n\n<p>Does anyone know what my options are for solving this kind of problem?  Thanks in advance.</p>\n\n<p>BTW, here is what my Filter class's doFilter method looks like:</p>\n\n<pre><code>    public void doFilter(ServletRequest req,\n                     ServletResponse res,\n                     FilterChain fc) throws IOException, ServletException\n{\n    HttpServletRequest request = (HttpServletRequest) req;\n    HttpServletResponse response = (HttpServletResponse) res;\n    HttpSession session = request.getSession();\n\n    try\n    {\n        fc.doFilter(req, res);\n\n        // Have learned that response headers should not be set until we have determined there won't be an exception.\n        // Can't easily redirect or forward (to an error page, for example) if headers have already been committed.\n\n        if (SessionHelper.hasNeedsJsCssImgResponseHeaderFlag(request))\n        {\n            Calendar cal = Calendar.getInstance();\n            cal.add(Calendar.SECOND, JsCssImgResponseHeaderFilter.SECONDS_TO_CACHE);\n            response.setHeader(\"Cache-Control\", \"PUBLIC, max-age=\" + JsCssImgResponseHeaderFilter.SECONDS_TO_CACHE + \", must-revalidate\");\n            response.setHeader(\"Expires\", DateUtils.getDateInExpiresHeaderFormat(cal.getTime()));\n        }\n        else if (SessionHelper.hasNeedsDynamicPageResponseHeaderFlag(request))\n        {\n            response.setHeader(\"Cache-Control\", \"no-cache\");\n            response.setHeader(\"Expires\", \"Mon, 25 Nov 2013 00:00:01 GMT\");   // in the past\n        }\n        else if (SessionHelper.hasNeedsRestServicesResponseHeaderFlag(request))\n        {\n            // CORS - Cross Origin Resource Sharing: allow service requests from other domains -- \n            // such as local development domains hosting AngularJS projects.\n\n            response.setHeader(\"Access-Control-Allow-Origin\", \"http://localhost.domain.com:8080\");\n\n            response.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS, PUT, DELETE\");\n            // response.setHeader(\"Access-Control-Allow-Methods\", \"*\");\n\n            response.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, X-Requested-With\");\n        }\n    }\n    catch (Exception e)\n    {\n        SessionHelper.setErrorPageException(req, session, e);\n        final String uri = request.getRequestURI();\n        final String playerName = SessionHelper.getLoggedInPlayerName(session);\n\n        String outerLogEntryText = \"Player = \" + playerName + \" - IP = \" + request.getRemoteAddr() + \n                \" - Mobile = \" + SessionHelper.isMobileBrowser(request) +\n                \" - URI = \" + uri + \" - Exception MSG = \" + e.getMessage();\n\n        LogUtils.writeLogEntry(outerLogEntryText, true, e);\n        SessionHelper.setRedirectPage(session, SessionHelper.ERROR_PAGE_PATH);\n    }\n    finally\n    {\n        String redirectPage = SessionHelper.getRedirectPage(session);\n        SessionHelper.clearRedirectPage(session);\n\n        if (redirectPage != null)\n        {\n            if (response.isCommitted())\n            {\n                // Article: http://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed\n                System.out.println(\"Response has been committed.  Cannot redirect to: \" + redirectPage);\n            }\n            else\n            {\n                response.sendRedirect(redirectPage);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When the problem occurs, my \"Response has been committed...\" output statement is indeed written, therefore it is not redirecting to my error page.  That's my challenge: how to redirect somewhere when this happens -- or take some better/harmless action.</p>\n"},{"tags":["java","kotlin","static-methods","static-block"],"comments":[{"owner":{"account_id":3539723,"reputation":3951,"user_id":2957169,"display_name":"charles-allen"},"score":3,"creation_date":1560082941,"post_id":56514503,"comment_id":99614992,"body_markdown":"If you describe your objective we can recommend more idiomatic Kotlin.","body":"If you describe your objective we can recommend more idiomatic Kotlin."},{"owner":{"account_id":5876047,"reputation":27265,"user_id":4626831,"accept_rate":79,"display_name":"N J"},"score":2,"creation_date":1560087790,"post_id":56514503,"comment_id":99615947,"body_markdown":"Possible duplicate of [Kotlin static methods and variables](https://stackoverflow.com/questions/43857824/kotlin-static-methods-and-variables)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/43857824/kotlin-static-methods-and-variables\">Kotlin static methods and variables</a>"}],"answers":[{"tags":[],"owner":{"account_id":5353609,"reputation":5314,"user_id":4267015,"display_name":"Naor Tedgi"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1560087740,"creation_date":1560082718,"answer_id":56514529,"question_id":56514503,"body_markdown":"    public class Common {\r\n        companion object {\r\n            val currentModelPengguna: ModelPengguna = ModelPengguna()  \r\n        }\r\n    }\r\n\r\nor if the object is static and you want it as Singleton\r\nyou can use \r\n\r\n    object Common {\r\n            val currentModelPengguna: ModelPengguna = ModelPengguna()\r\n    }\r\n\r\na static property in kotlin is introduced by the `companion object` further reading:\r\n\r\nhttps://kotlinlang.org/docs/reference/object-declarations.html#companion-objects","title":"Declare static property in Kotlin?","body":"<pre><code>public class Common {\n    companion object {\n        val currentModelPengguna: ModelPengguna = ModelPengguna()  \n    }\n}\n</code></pre>\n\n<p>or if the object is static and you want it as Singleton\nyou can use </p>\n\n<pre><code>object Common {\n        val currentModelPengguna: ModelPengguna = ModelPengguna()\n}\n</code></pre>\n\n<p>a static property in kotlin is introduced by the <code>companion object</code> further reading:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects</a></p>\n"},{"tags":[],"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682762838,"creation_date":1682713364,"answer_id":76133046,"question_id":56514503,"body_markdown":"Java uses the same `static` keyword for many features, like:\r\n* Global variable/ property.\r\n* Constant, like: `private static final String TAG = ...`\r\n* Class&#39;s on-load initializer - which Java names Static-block.\r\n\r\nWhile Kotlin separates these.\r\n\r\n## Example\r\n\r\n**If we have a Java file, like:**\r\n```java\r\npublic class MyClass {\r\n    private static final String TAG = &quot;my-tag&quot;;\r\n\r\n    @NonNull\r\n    public static MyType myVariable = new MyType();\r\n\r\n    @Nullable\r\n    public static MyType myNullableVariable = null;\r\n\r\n    static {\r\n        Log.d(TAG, &quot;Got this far!&quot;);\r\n    }\r\n\r\n    public void onSomething() {\r\n        onSomething(false);\r\n    }\r\n\r\n    public void onSomething(optionalArg: Boolean) {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\n**Then the Kotlin version may look something like:**\r\n```kotlin\r\nopen class MyClass {\r\n    companion object {\r\n        private const val TAG = &quot;my-tag&quot;\r\n\r\n        @JvmStatic\r\n        var myVariable: MyType = MyType()\r\n\r\n        @JvmStatic\r\n        var myNullableVariable: MyType? = null\r\n\r\n        init {\r\n            Log.d(TAG, &quot;Got this far!&quot;)\r\n        }\r\n    }\r\n\r\n    @JvmOverloads\r\n    open fun onSomething(optionalArg: Boolean = false) {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nWhere:\r\n\r\n* Kotlin&#39;s `open class` is like Java&#39;s `public class`.\r\n\r\n* The &quot;`@JvmStatic`&quot; part allows Java to use Kotlin&#39;s `myVariable`, as if it were Java&#39;s `static` memeber.\r\n\r\n* The &quot;`@JvmOverloads`&quot; part allows Java to call Kotlin&#39;s `onSomething` without need to pass all parameters.\r\n\r\n&gt; **Note** that &quot;`: MyType`&quot; part can be omitted, because both Kotlin and Android-studio IDE do auto-detect the type based on initializer (e.g. based on the &quot;` = MyType()`&quot; part).\r\n&gt;\r\n&gt; Also, `@JvmStatic` and `@JvmOverloads` do NOT need any  import (as they&#39;re built-in features of Kotlin).\r\n","title":"Declare static property in Kotlin?","body":"<p>Java uses the same <code>static</code> keyword for many features, like:</p>\n<ul>\n<li>Global variable/ property.</li>\n<li>Constant, like: <code>private static final String TAG = ...</code></li>\n<li>Class's on-load initializer - which Java names Static-block.</li>\n</ul>\n<p>While Kotlin separates these.</p>\n<h2>Example</h2>\n<p><strong>If we have a Java file, like:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass {\n    private static final String TAG = &quot;my-tag&quot;;\n\n    @NonNull\n    public static MyType myVariable = new MyType();\n\n    @Nullable\n    public static MyType myNullableVariable = null;\n\n    static {\n        Log.d(TAG, &quot;Got this far!&quot;);\n    }\n\n    public void onSomething() {\n        onSomething(false);\n    }\n\n    public void onSomething(optionalArg: Boolean) {\n        // ...\n    }\n}\n</code></pre>\n<p><strong>Then the Kotlin version may look something like:</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>open class MyClass {\n    companion object {\n        private const val TAG = &quot;my-tag&quot;\n\n        @JvmStatic\n        var myVariable: MyType = MyType()\n\n        @JvmStatic\n        var myNullableVariable: MyType? = null\n\n        init {\n            Log.d(TAG, &quot;Got this far!&quot;)\n        }\n    }\n\n    @JvmOverloads\n    open fun onSomething(optionalArg: Boolean = false) {\n        // ...\n    }\n}\n</code></pre>\n<p>Where:</p>\n<ul>\n<li><p>Kotlin's <code>open class</code> is like Java's <code>public class</code>.</p>\n</li>\n<li><p>The &quot;<code>@JvmStatic</code>&quot; part allows Java to use Kotlin's <code>myVariable</code>, as if it were Java's <code>static</code> memeber.</p>\n</li>\n<li><p>The &quot;<code>@JvmOverloads</code>&quot; part allows Java to call Kotlin's <code>onSomething</code> without need to pass all parameters.</p>\n</li>\n</ul>\n<blockquote>\n<p><strong>Note</strong> that &quot;<code>: MyType</code>&quot; part can be omitted, because both Kotlin and Android-studio IDE do auto-detect the type based on initializer (e.g. based on the &quot;<code> = MyType()</code>&quot; part).</p>\n<p>Also, <code>@JvmStatic</code> and <code>@JvmOverloads</code> do NOT need any  import (as they're built-in features of Kotlin).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":26280709,"reputation":93,"user_id":19949241,"display_name":"Awais ul Hassan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682752627,"creation_date":1682752627,"answer_id":76134985,"question_id":56514503,"body_markdown":"Static variables declare and initialize in to companion object for example:\r\n\r\n \r\n\r\n     public class MyClass {\r\n\r\n        companion object{\r\n            const val TAG: String = &quot;my-tag&quot;\r\n            const val myVariable: MyType = MyType()\r\n            var myNullableVariable: MyType? = null\r\n        }\r\n    }","title":"Declare static property in Kotlin?","body":"<p>Static variables declare and initialize in to companion object for example:</p>\n<pre><code> public class MyClass {\n\n    companion object{\n        const val TAG: String = &quot;my-tag&quot;\n        const val myVariable: MyType = MyType()\n        var myNullableVariable: MyType? = null\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11253742,"reputation":119,"user_id":8254172,"display_name":"Kang sigit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5345,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":3,"score":11,"last_activity_date":1682762838,"creation_date":1560082503,"question_id":56514503,"body_markdown":"My `Java` code:\r\n\r\n```java\r\npublic class Common {\r\n    public static ModelPengguna currentModelPengguna;\r\n}\r\n```\r\n","title":"Declare static property in Kotlin?","body":"<p>My <code>Java</code> code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Common {\n    public static ModelPengguna currentModelPengguna;\n}\n</code></pre>\n"},{"tags":["java","spring","oracle","jdbc"],"comments":[{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682592582,"post_id":76119487,"comment_id":134241787,"body_markdown":"I think your Entity model trying to connect to different database. Can you share with application.properties? And database connection","body":"I think your Entity model trying to connect to different database. Can you share with application.properties? And database connection"},{"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"score":0,"creation_date":1682592778,"post_id":76119487,"comment_id":134241828,"body_markdown":"@Yeras_QazaQ I update Customer Class I define in Project to Post.","body":"@Yeras_QazaQ I update Customer Class I define in Project to Post."},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682595051,"post_id":76119487,"comment_id":134242312,"body_markdown":"Thank you! What about your package scan? Which part of your project makes scan for finding entiry? Also what do you for using request, JPARepository or CrudRepository?","body":"Thank you! What about your package scan? Which part of your project makes scan for finding entiry? Also what do you for using request, JPARepository or CrudRepository?"}],"answers":[{"comments":[{"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"score":0,"creation_date":1682593823,"post_id":76119600,"comment_id":134242028,"body_markdown":"I connect DB with DataGrip success, table is exists in DB!","body":"I connect DB with DataGrip success, table is exists in DB!"},{"owner":{"account_id":3517130,"reputation":5214,"user_id":2940265,"accept_rate":91,"display_name":"Menuka Ishan"},"score":0,"creation_date":1682593899,"post_id":76119600,"comment_id":134242040,"body_markdown":"@trannguyenhan Did you check the schema?","body":"@trannguyenhan Did you check the schema?"},{"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"score":0,"creation_date":1682594136,"post_id":76119600,"comment_id":134242100,"body_markdown":"I config in my code:\n```java\nspring:\n  datasource:\n    driver-class-name: oracle.jdbc.OracleDriver\n    url: jdbc:oracle:thin:@${DMS_DB_URL}\n    username: #${DMS_DB_USERNAME}\n    password: #${DMS_DB_PASSWORD}\n```\n\nNo config schema in my code, Where can I set it in my project?","body":"I config in my code: <code>java spring:   datasource:     driver-class-name: oracle.jdbc.OracleDriver     url: jdbc:oracle:thin:@${DMS_DB_URL}     username: #${DMS_DB_USERNAME}     password: #${DMS_DB_PASSWORD} </code>  No config schema in my code, Where can I set it in my project?"},{"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"score":0,"creation_date":1682594167,"post_id":76119600,"comment_id":134242104,"body_markdown":"I trying add schema: ${SCHEMA}, so it error!","body":"I trying add schema: ${SCHEMA}, so it error!"}],"tags":[],"owner":{"account_id":3517130,"reputation":5214,"user_id":2940265,"accept_rate":91,"display_name":"Menuka Ishan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682593191,"creation_date":1682593191,"answer_id":76119600,"question_id":76119487,"body_markdown":"First of all did you try to connect database with user credentials in the code to check whether the table is actually exist or not using Database client like Oracle SQL Developer?\r\n\r\nThis error happens due to one of below reasons.\r\n\r\n - User you used to connect to the Database does not have access to the schema which table reside\r\n - The table simply does not created yet\r\n - There is a something wrong in connecting entity to Database, possible small name error or something.\r\n\r\nPlease check whether one of these conditions apply to your code.\r\n\r\n\r\n ","title":"Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist ORACLE","body":"<p>First of all did you try to connect database with user credentials in the code to check whether the table is actually exist or not using Database client like Oracle SQL Developer?</p>\n<p>This error happens due to one of below reasons.</p>\n<ul>\n<li>User you used to connect to the Database does not have access to the schema which table reside</li>\n<li>The table simply does not created yet</li>\n<li>There is a something wrong in connecting entity to Database, possible small name error or something.</li>\n</ul>\n<p>Please check whether one of these conditions apply to your code.</p>\n"},{"comments":[{"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"score":0,"creation_date":1682594187,"post_id":76119714,"comment_id":134242112,"body_markdown":"Yes, table already exists","body":"Yes, table already exists"}],"tags":[],"owner":{"account_id":15794864,"reputation":11,"user_id":11407809,"display_name":"Daniel Christofolli"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682761892,"creation_date":1682593999,"answer_id":76119714,"question_id":76119487,"body_markdown":"You could verify if you have access to this table and/or if the table `CUSTOMER` exists by trying this SQL command:\r\n```\r\nselect owner as schema_name,\r\n       table_name\r\nfrom sys.all_tables\r\nwhere table_name like &#39;CUSTOMER&#39;;\r\n```\r\n\r\nMore information can be found in the following link: https://dataedo.com/kb/query/oracle/find-tables-which-names-start-with-specific-prefix","title":"Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist ORACLE","body":"<p>You could verify if you have access to this table and/or if the table <code>CUSTOMER</code> exists by trying this SQL command:</p>\n<pre><code>select owner as schema_name,\n       table_name\nfrom sys.all_tables\nwhere table_name like 'CUSTOMER';\n</code></pre>\n<p>More information can be found in the following link: <a href=\"https://dataedo.com/kb/query/oracle/find-tables-which-names-start-with-specific-prefix\" rel=\"nofollow noreferrer\">https://dataedo.com/kb/query/oracle/find-tables-which-names-start-with-specific-prefix</a></p>\n"}],"owner":{"account_id":19154699,"reputation":144,"user_id":13991786,"display_name":"trannguyenhan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682761892,"creation_date":1682592307,"question_id":76119487,"body_markdown":"I try to connect to Oracle SQL, and everything is normal, Console notification connect success, no error in console:\r\n\r\n```bash\r\n2023-04-27 17:28:50 INFO  [main           ] m.service.promotion.PromotionApplication : No active profile set, falling back to default profiles: default\r\n2023-04-27 17:28:50 INFO  [main           ] y.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-04-27 17:28:50 INFO  [main           ] y.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 31ms. Found 0 JPA repository interfaces.\r\n2023-04-27 17:28:50 INFO  [main           ] amework.cloud.context.scope.GenericScope : BeanFactory id=d5b7dc3c-7593-38a4-b712-ceb098e944ec\r\n2023-04-27 17:28:50 INFO  [main           ] boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9004 (http)\r\n2023-04-27 17:28:50 INFO  [main           ] org.apache.catalina.core.StandardService : Starting service [Tomcat]\r\n2023-04-27 17:28:50 INFO  [main           ] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.46]\r\n2023-04-27 17:28:51 INFO  [main           ] e.ContainerBase.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext\r\n2023-04-27 17:28:51 INFO  [main           ] ntext.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 938 ms\r\n2023-04-27 17:28:51 INFO  [main           ] rg.hibernate.jpa.internal.util.LogHelper : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.32.Final\r\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.annotations.common.Version : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2023-04-27 17:28:51 INFO  [main           ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-04-27 17:28:51 INFO  [main           ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.Oracle12cDialect\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\r\n2023-04-27 17:29:34 INFO  [main           ] a.platform.internal.JtaPlatformInitiator : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2023-04-27 17:29:34 INFO  [main           ] a.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-04-27 17:29:34 WARN  [main           ] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-04-27 17:29:34 INFO  [main           ] duling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n```\r\n\r\nBut when I run API using a code, this code get Entity Customer from Database: \r\n\r\n```java\r\nCustomer customer = commonMgr.getEntityById(Customer.class, customerId);\r\n```\r\n\r\nI have an error: \r\n\r\n```bash\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1054) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:623) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:252) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:612) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:226) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:59) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:747) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:904) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1082) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3780) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1343) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3822) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1165) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.5.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.5.jar:na]\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\r\n```\r\n\r\nThis is a Customer Class:\r\n\r\n\r\n```java\r\npackage com.service.promotion.domain;\r\n\r\nimport java.io.Serializable;\r\nimport java.math.BigDecimal;\r\nimport java.util.Date;\r\n\r\nimport javax.persistence.Basic;\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.JoinColumn;\r\nimport javax.persistence.ManyToOne;\r\nimport javax.persistence.SequenceGenerator;\r\nimport javax.persistence.Table;\r\nimport javax.persistence.Temporal;\r\nimport javax.persistence.TemporalType;\r\nimport javax.persistence.Transient;\r\n\r\nimport com.service.promotion.enumtype.ActiveType;\r\nimport com.service.promotion.enumtype.IsAttribute;\r\nimport org.hibernate.annotations.Cache;\r\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\r\nimport org.hibernate.annotations.Parameter;\r\nimport org.hibernate.annotations.Type;\r\n\r\n@Entity\r\n@Table(name = &quot;CUSTOMER&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\n@SequenceGenerator(name = &quot;SEQ_STORE&quot;, sequenceName = &quot;CUSTOMER_SEQ&quot;, allocationSize = 1)\r\npublic class Customer implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SEQ_STORE&quot;)\r\n\t@Column(name = &quot;CUSTOMER_ID&quot;)\r\n\tprivate Long id;\r\n\t\r\n}\r\n```\r\n\r\nI think My App was connected with Oracle database, but I was error below. Help me solve it! Thank you!","title":"Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist ORACLE","body":"<p>I try to connect to Oracle SQL, and everything is normal, Console notification connect success, no error in console:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>2023-04-27 17:28:50 INFO  [main           ] m.service.promotion.PromotionApplication : No active profile set, falling back to default profiles: default\n2023-04-27 17:28:50 INFO  [main           ] y.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-04-27 17:28:50 INFO  [main           ] y.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 31ms. Found 0 JPA repository interfaces.\n2023-04-27 17:28:50 INFO  [main           ] amework.cloud.context.scope.GenericScope : BeanFactory id=d5b7dc3c-7593-38a4-b712-ceb098e944ec\n2023-04-27 17:28:50 INFO  [main           ] boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9004 (http)\n2023-04-27 17:28:50 INFO  [main           ] org.apache.catalina.core.StandardService : Starting service [Tomcat]\n2023-04-27 17:28:50 INFO  [main           ] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.46]\n2023-04-27 17:28:51 INFO  [main           ] e.ContainerBase.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext\n2023-04-27 17:28:51 INFO  [main           ] ntext.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 938 ms\n2023-04-27 17:28:51 INFO  [main           ] rg.hibernate.jpa.internal.util.LogHelper : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.32.Final\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.annotations.common.Version : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2023-04-27 17:28:51 INFO  [main           ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-04-27 17:28:51 INFO  [main           ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-04-27 17:28:51 INFO  [main           ] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.Oracle12cDialect\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:32 WARN  [main           ] t.internal.InFlightMetadataCollectorImpl : HHH000069: Duplicate generator name SEQ_STORE\n2023-04-27 17:29:34 INFO  [main           ] a.platform.internal.JtaPlatformInitiator : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-04-27 17:29:34 INFO  [main           ] a.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-04-27 17:29:34 WARN  [main           ] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-04-27 17:29:34 INFO  [main           ] duling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'\n</code></pre>\n<p>But when I run API using a code, this code get Entity Customer from Database:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Customer customer = commonMgr.getEntityById(Customer.class, customerId);\n</code></pre>\n<p>I have an error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1054) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:623) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:252) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:612) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:226) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:59) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:747) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:904) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1082) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3780) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1343) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3822) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1165) ~[ojdbc8-12.2.0.1.jar:12.2.0.1.0]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.5.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.5.jar:na]\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n\n</code></pre>\n<p>This is a Customer Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.service.promotion.domain;\n\nimport java.io.Serializable;\nimport java.math.BigDecimal;\nimport java.util.Date;\n\nimport javax.persistence.Basic;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.SequenceGenerator;\nimport javax.persistence.Table;\nimport javax.persistence.Temporal;\nimport javax.persistence.TemporalType;\nimport javax.persistence.Transient;\n\nimport com.service.promotion.enumtype.ActiveType;\nimport com.service.promotion.enumtype.IsAttribute;\nimport org.hibernate.annotations.Cache;\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\nimport org.hibernate.annotations.Parameter;\nimport org.hibernate.annotations.Type;\n\n@Entity\n@Table(name = &quot;CUSTOMER&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\n@SequenceGenerator(name = &quot;SEQ_STORE&quot;, sequenceName = &quot;CUSTOMER_SEQ&quot;, allocationSize = 1)\npublic class Customer implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SEQ_STORE&quot;)\n    @Column(name = &quot;CUSTOMER_ID&quot;)\n    private Long id;\n    \n}\n</code></pre>\n<p>I think My App was connected with Oracle database, but I was error below. Help me solve it! Thank you!</p>\n"},{"tags":["java","gradle","incompatibility"],"comments":[{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1682694065,"post_id":76130392,"comment_id":134260810,"body_markdown":"I took a look into readme.md from your lib and found following text: &quot;Java version\nThis library was built for Java 17, the latest LTS. Remember to enable preview features as they are required. If you don&#39;t know how, there are many tutorials available online. Please don&#39;t open any issue because of this.&quot; May be you need jdk 17 instead of jdk19 or you have to compile your code into language level of java 17.","body":"I took a look into readme.md from your lib and found following text: &quot;Java version This library was built for Java 17, the latest LTS. Remember to enable preview features as they are required. If you don&#39;t know how, there are many tutorials available online. Please don&#39;t open any issue because of this.&quot; May be you need jdk 17 instead of jdk19 or you have to compile your code into language level of java 17."},{"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"score":0,"creation_date":1682695692,"post_id":76130392,"comment_id":134261170,"body_markdown":"@Reporter I tried enabling preview features with adding\n```tasks.withType(JavaCompile) {\n    options.compilerArgs += &#39;--enable-preview&#39;\n}\ntasks.withType(Test) {\n    jvmArgs += &quot;--enable-preview&quot;\n}\n```\nto my build.gradle file but the error still persists:(\nShouldn&#39;t java be anyway backwards compatible?","body":"@Reporter I tried enabling preview features with adding <code>tasks.withType(JavaCompile) {     options.compilerArgs += &#39;--enable-preview&#39; } tasks.withType(Test) {     jvmArgs += &quot;--enable-preview&quot; } </code> to my build.gradle file but the error still persists:( Shouldn&#39;t java be anyway backwards compatible?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1682701455,"post_id":76130392,"comment_id":134262391,"body_markdown":"from documentation about [Preview Features](https://docs.oracle.com/en/java/javase/19/language/preview-language-and-vm-features.html#GUID-5A82FE0E-0CA4-4F1F-B075-564874FE2823__GUID-54A1B35D-0818-46F5-8CEE-5E8D79A87866): &quot;***Note:** Code that uses preview features from an older release of the Java SE Platform will not necessarily compile or run on a newer release.*&quot;","body":"from documentation about <a href=\"https://docs.oracle.com/en/java/javase/19/language/preview-language-and-vm-features.html#GUID-5A82FE0E-0CA4-4F1F-B075-564874FE2823__GUID-54A1B35D-0818-46F5-8CEE-5E8D79A87866\" rel=\"nofollow noreferrer\">Preview Features</a>: &quot;<b><i>Note:</b> Code that uses preview features from an older release of the Java SE Platform will not necessarily compile or run on a newer release.</i>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682761342,"creation_date":1682761342,"answer_id":76135527,"question_id":76130392,"body_markdown":"I managed to compile the project. Apparently are preview features not back compatible within Java. Thanks to [@user16320675](https://stackoverflow.com/users/16320675/user16320675)&#39;s help I found this on [Gradle Docs](https://docs.gradle.org/current/userguide/building_java_projects.html#sec:feature_preview):\r\n```\r\ntasks.withType(JavaCompile).configureEach {\r\n    options.compilerArgs += &quot;--enable-preview&quot;\r\n}\r\n\r\ntasks.withType(Test).configureEach {\r\n    jvmArgs += &quot;--enable-preview&quot;\r\n}\r\n\r\ntasks.withType(JavaExec).configureEach {\r\n    jvmArgs += &quot;--enable-preview&quot;\r\n}\r\n```\r\n\r\nI added the snipped to my build.gradle file and had to change my projects jdk from 19 to 17, because only with version 17 the preview features I needed were available.","title":"Class file for XYZ uses preview features of Java SE 17 Error","body":"<p>I managed to compile the project. Apparently are preview features not back compatible within Java. Thanks to <a href=\"https://stackoverflow.com/users/16320675/user16320675\">@user16320675</a>'s help I found this on <a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html#sec:feature_preview\" rel=\"nofollow noreferrer\">Gradle Docs</a>:</p>\n<pre><code>tasks.withType(JavaCompile).configureEach {\n    options.compilerArgs += &quot;--enable-preview&quot;\n}\n\ntasks.withType(Test).configureEach {\n    jvmArgs += &quot;--enable-preview&quot;\n}\n\ntasks.withType(JavaExec).configureEach {\n    jvmArgs += &quot;--enable-preview&quot;\n}\n</code></pre>\n<p>I added the snipped to my build.gradle file and had to change my projects jdk from 19 to 17, because only with version 17 the preview features I needed were available.</p>\n"}],"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76135527,"answer_count":1,"score":0,"last_activity_date":1682761342,"creation_date":1682690681,"question_id":76130392,"body_markdown":"I&#39;m trying to make a scheduled Whatsapp sender and thought of using Auties00 WhatsApp4J library.\r\nAfter creating a new project and adding the code to create a connection, following error occures:\r\n\r\n```\r\nerror: class file for .gradle/caches/modules-2/files-2.1/com.github.auties00/whatsappweb4j/3.3.1/d8c9b37af703062b20b137100d8dc11abe8a27f7/whatsappweb4j-3.3.1.jar(/it/auties/whatsapp/api/Whatsapp.class) uses preview features of Java SE 17.\r\n  (use --enable-preview to allow loading of class files which contain preview features)\r\n1 error\r\n\r\n```\r\n\r\nI&#39;m currently using JDK 19 with Gradle 7.6.1 so I&#39;m confused why it&#39;s throwing the afore mentioned error.\r\n\r\nI tried to upgrade from the TLS JDK 17 to JDK19 but the error persists.\r\nAdding the --enable-preview flag didn&#39;t work either.\r\n[This](https://github.com/Auties00/Whatsapp4j) is Auties00 WhatsApp4J library\r\n\r\nMy build.gradle looks like this:\r\n```lang-xml\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.6&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;19&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;com.github.auties00:whatsappweb4j:3.3.1&#39;\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nAnd my main class like this:\r\n```lang-java\r\npackage com.example.demo;\r\n\r\nimport it.auties.whatsapp.api.Whatsapp;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication implements CommandLineRunner {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoApplication.class, args);\r\n    }\r\n\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        Whatsapp.webBuilder()\r\n                .newConnection()\r\n                .build()\r\n                .addLoggedInListener(() -&gt; System.out.println(&quot;Connected&quot;))\r\n                .addDisconnectedListener(reason -&gt; System.out.printf(&quot;Disconnected: %s%n&quot;, reason))\r\n                .connect()\r\n                .join();\r\n    }\r\n}\r\n\r\n```","title":"Class file for XYZ uses preview features of Java SE 17 Error","body":"<p>I'm trying to make a scheduled Whatsapp sender and thought of using Auties00 WhatsApp4J library.\nAfter creating a new project and adding the code to create a connection, following error occures:</p>\n<pre><code>error: class file for .gradle/caches/modules-2/files-2.1/com.github.auties00/whatsappweb4j/3.3.1/d8c9b37af703062b20b137100d8dc11abe8a27f7/whatsappweb4j-3.3.1.jar(/it/auties/whatsapp/api/Whatsapp.class) uses preview features of Java SE 17.\n  (use --enable-preview to allow loading of class files which contain preview features)\n1 error\n\n</code></pre>\n<p>I'm currently using JDK 19 with Gradle 7.6.1 so I'm confused why it's throwing the afore mentioned error.</p>\n<p>I tried to upgrade from the TLS JDK 17 to JDK19 but the error persists.\nAdding the --enable-preview flag didn't work either.\n<a href=\"https://github.com/Auties00/Whatsapp4j\" rel=\"nofollow noreferrer\">This</a> is Auties00 WhatsApp4J library</p>\n<p>My build.gradle looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.0.6'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '19'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'com.github.auties00:whatsappweb4j:3.3.1'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>And my main class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport it.auties.whatsapp.api.Whatsapp;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication implements CommandLineRunner {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        Whatsapp.webBuilder()\n                .newConnection()\n                .build()\n                .addLoggedInListener(() -&gt; System.out.println(&quot;Connected&quot;))\n                .addDisconnectedListener(reason -&gt; System.out.printf(&quot;Disconnected: %s%n&quot;, reason))\n                .connect()\n                .join();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","opensearch"],"answers":[{"tags":[],"owner":{"account_id":2620643,"reputation":1,"user_id":2268735,"display_name":"user9973"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680828615,"creation_date":1680828615,"answer_id":75954735,"question_id":75130106,"body_markdown":"The CreateIndexRequest builder does provide a `mappings` method which takes in a `TypeMapping` argument. \r\n\r\nYou should be able to construct a `TypeMapping` object and then pass it into the builder: \r\n```\r\nTypeMapping mapping = ...;\r\nCreateIndexRequest createIndexRequest = new CreateIndexRequest.Builder()\r\n         .index(index)\r\n         .mappings(mapping)\r\n         .build();\r\n```","title":"Creating Index with OpenSearch Java Client","body":"<p>The CreateIndexRequest builder does provide a <code>mappings</code> method which takes in a <code>TypeMapping</code> argument.</p>\n<p>You should be able to construct a <code>TypeMapping</code> object and then pass it into the builder:</p>\n<pre><code>TypeMapping mapping = ...;\nCreateIndexRequest createIndexRequest = new CreateIndexRequest.Builder()\n         .index(index)\n         .mappings(mapping)\n         .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6403427,"reputation":2065,"user_id":5471235,"accept_rate":90,"display_name":"makson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682760826,"creation_date":1682760826,"answer_id":76135494,"question_id":75130106,"body_markdown":"I used the last version of \r\n\r\n    dependencies {\r\n      implementation &#39;org.opensearch.client:opensearch-rest-client: 2.6.0&#39;\r\n      implementation &#39;org.opensearch.client:opensearch-java:2.4.0&#39;\r\n    }\r\n\r\nIt creates an index with optional settings and mappings.\r\n\r\nSo you can use it \r\n\r\nfor checking:\r\n\r\n     var existsIndexRequest = new ExistsRequest.Builder()\r\n                .index(index)\r\n                .build();\r\n     var response = client.indices().exists(existsIndexRequest);\r\n\r\nfor creating:\r\n\r\n    \r\n\r\n    var createIndexRequest = new CreateIndexRequest.Builder()\r\n                .index(index)\r\n                .build();\r\n    var createIndexResponse = client.indices().create(createIndexRequest);","title":"Creating Index with OpenSearch Java Client","body":"<p>I used the last version of</p>\n<pre><code>dependencies {\n  implementation 'org.opensearch.client:opensearch-rest-client: 2.6.0'\n  implementation 'org.opensearch.client:opensearch-java:2.4.0'\n}\n</code></pre>\n<p>It creates an index with optional settings and mappings.</p>\n<p>So you can use it</p>\n<p>for checking:</p>\n<pre><code> var existsIndexRequest = new ExistsRequest.Builder()\n            .index(index)\n            .build();\n var response = client.indices().exists(existsIndexRequest);\n</code></pre>\n<p>for creating:</p>\n<pre><code>var createIndexRequest = new CreateIndexRequest.Builder()\n            .index(index)\n            .build();\nvar createIndexResponse = client.indices().create(createIndexRequest);\n</code></pre>\n"}],"owner":{"account_id":88318,"reputation":8934,"user_id":244360,"accept_rate":78,"display_name":"Kong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1592,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1682760826,"creation_date":1673841289,"question_id":75130106,"body_markdown":"The OpenSearch Java Client GitHub repo states that the Java Client is the replacement for the High Level Java Client.\r\n\r\nhttps://github.com/opensearch-project/opensearch-java\r\n\r\nI&#39;m trying to create an index with this client, but can&#39;t find any way to actually set the mappings, and there are no examples.\r\n\r\n    RestClient restClient = RestClient\r\n            .builder(new HttpHost(host, port, scheme))\r\n            .build();\r\n    Transport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\r\n    OpenSearchClient client = new OpenSearchClient(transport);\r\n\r\n    CreateIndexRequest createIndexRequest = new CreateIndexRequest.Builder()\r\n             .index(index)\r\n             // What do I do here?\r\n             .build();\r\n\r\n    CreateIndexResponse response = client.indices().create(createIndexRequest);\r\n\r\nThis is using the OpenSearch Java Client, not the High Level Client.\r\n\r\n","title":"Creating Index with OpenSearch Java Client","body":"<p>The OpenSearch Java Client GitHub repo states that the Java Client is the replacement for the High Level Java Client.</p>\n<p><a href=\"https://github.com/opensearch-project/opensearch-java\" rel=\"nofollow noreferrer\">https://github.com/opensearch-project/opensearch-java</a></p>\n<p>I'm trying to create an index with this client, but can't find any way to actually set the mappings, and there are no examples.</p>\n<pre><code>RestClient restClient = RestClient\n        .builder(new HttpHost(host, port, scheme))\n        .build();\nTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\nOpenSearchClient client = new OpenSearchClient(transport);\n\nCreateIndexRequest createIndexRequest = new CreateIndexRequest.Builder()\n         .index(index)\n         // What do I do here?\n         .build();\n\nCreateIndexResponse response = client.indices().create(createIndexRequest);\n</code></pre>\n<p>This is using the OpenSearch Java Client, not the High Level Client.</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":24199277,"reputation":723,"user_id":18157326,"display_name":"spark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682760602,"creation_date":1682760602,"question_id":76135479,"body_markdown":"I am using strip [Apollo][1] as the configuration center, now I want to use the env to process different logic this is the local `/opt/settings/server.properites` config:\r\n\r\n\r\n    &gt; cat /opt/settings/server.properties\r\n      apollo.meta=http://localhost:8080\r\n      env=DEV\r\n\r\n\r\nthen I use this java client code to get the env:\r\n\r\n\r\n\r\n    Config config = ConfigService.getAppConfig();\r\n    String env = config.getProperty(&quot;env&quot;,&quot;default&quot;);\r\n\r\n\r\n\r\nthis code always get default value, what I expect value is DEV. is it possible to get the env value?\r\n\r\n\r\n  [1]: https://github.com/apolloconfig/apollo","title":"is it possible to get the env from strip Apollo","body":"<p>I am using strip <a href=\"https://github.com/apolloconfig/apollo\" rel=\"nofollow noreferrer\">Apollo</a> as the configuration center, now I want to use the env to process different logic this is the local <code>/opt/settings/server.properites</code> config:</p>\n<pre><code>&gt; cat /opt/settings/server.properties\n  apollo.meta=http://localhost:8080\n  env=DEV\n</code></pre>\n<p>then I use this java client code to get the env:</p>\n<pre><code>Config config = ConfigService.getAppConfig();\nString env = config.getProperty(&quot;env&quot;,&quot;default&quot;);\n</code></pre>\n<p>this code always get default value, what I expect value is DEV. is it possible to get the env value?</p>\n"},{"tags":["java","javafx","java-8"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1645106456,"post_id":71159375,"comment_id":125786605,"body_markdown":"Find (or write) a java implementation of [Bresenham&#39;s line algorithm](https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#:~:text=From%20Wikipedia%2C%20the%20free%20encyclopedia%20Bresenham%27s%20line%20algorithm,approximation%20to%20a%20straight%20line%20between%20two%20points.)","body":"Find (or write) a java implementation of <a href=\"https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#:~:text=From%20Wikipedia%2C%20the%20free%20encyclopedia%20Bresenham%27s%20line%20algorithm,approximation%20to%20a%20straight%20line%20between%20two%20points.\" rel=\"nofollow noreferrer\">Bresenham&#39;s line algorithm</a>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1645140803,"post_id":71159375,"comment_id":125799086,"body_markdown":"For a straight line, use the [point–slope form](https://en.wikipedia.org/wiki/Linear_equation#Point–slope_form_or_Point-gradient_form) to interpolate, for [example](https://stackoverflow.com/a/61398612/230513).","body":"For a straight line, use the <a href=\"https://en.wikipedia.org/wiki/Linear_equation#Point%E2%80%93slope_form_or_Point-gradient_form\" rel=\"nofollow noreferrer\">point–slope form</a> to interpolate, for <a href=\"https://stackoverflow.com/a/61398612/230513\">example</a>."}],"owner":{"account_id":13439558,"reputation":1,"user_id":9697097,"display_name":"Coder D."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682760453,"creation_date":1645105773,"question_id":71159375,"body_markdown":"I have JavaFX project and I need coordinates of each dot in the orange line from image bellow.\r\n\r\n https://i.stack.imgur.com/A7zVa.png\r\n\r\nI spent a lot of hours googling but I can not find a solution.\r\n\r\nIt is a simple application. I need those coordinates beacuse I need to make G CODE for CNC machine.\r\n\r\n\r\n\r\n\r\nMy Code is:\r\n\r\n```\r\n\r\npublic class KS2 extends Application {\r\n\r\n    private LineChart&lt;Number, Number&gt; chart;\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        final NumberAxis xAxis = new NumberAxis(0.0, 150.0, 2);\r\n        final NumberAxis yAxis = new NumberAxis(0.0, 100.0, 2);\r\n\r\n        // Flip the axis\r\n        // yAxis.setScaleY(-1);\r\n        Rectangle r = new Rectangle(0, 0, 80, 50);\r\n\r\n        r.setFill(Color.TRANSPARENT);\r\n        r.setStrokeWidth(0.5);\r\n        r.setStroke(Color.BLACK);\r\n\r\n        this.chart = new LineChart&lt;Number, Number&gt;(xAxis, yAxis) {\r\n            @Override\r\n            public void layoutPlotChildren() {\r\n                super.layoutPlotChildren();\r\n                r.getTransforms().setAll(chartDisplayTransform(xAxis, yAxis));\r\n                // note nodes don&#39;t get removed from the plot children, and this method may be\r\n                // called often:\r\n                if (!getPlotChildren().contains(r)) {\r\n                    getPlotChildren().add(r);\r\n                }\r\n            }\r\n        };\r\n        this.chart.setAnimated(false);\r\n\r\n        XYChart.Series series = new XYChart.Series();\r\n        series.getData().add(new XYChart.Data(54, 50));\r\n        series.getData().add(new XYChart.Data(80, 0));\r\n        //series.setName(&quot;My portfolio&quot;);\r\n        this.chart.getData().add(series);\r\n        \r\n        VBox vbox = new VBox(this.chart);\r\n\r\n        Scene scene = new Scene(vbox, 400, 200);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.setHeight(600);\r\n        primaryStage.setWidth(400);\r\n        primaryStage.show();\r\n    }\r\n\r\n    private Transform chartDisplayTransform(NumberAxis xAxis, NumberAxis yAxis) {\r\n        return new Affine(xAxis.getScale(), 0, xAxis.getDisplayPosition(0), 0, yAxis.getScale(),\r\n                yAxis.getDisplayPosition(0));\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Application.launch(args);\r\n    }\r\n} \r\n\r\n```","title":"How to get coordinates of all dots in line JavaFX","body":"<p>I have JavaFX project and I need coordinates of each dot in the orange line from image bellow.</p>\n<p><a href=\"https://i.stack.imgur.com/A7zVa.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/A7zVa.png</a></p>\n<p>I spent a lot of hours googling but I can not find a solution.</p>\n<p>It is a simple application. I need those coordinates beacuse I need to make G CODE for CNC machine.</p>\n<p>My Code is:</p>\n<pre><code>\npublic class KS2 extends Application {\n\n    private LineChart&lt;Number, Number&gt; chart;\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        final NumberAxis xAxis = new NumberAxis(0.0, 150.0, 2);\n        final NumberAxis yAxis = new NumberAxis(0.0, 100.0, 2);\n\n        // Flip the axis\n        // yAxis.setScaleY(-1);\n        Rectangle r = new Rectangle(0, 0, 80, 50);\n\n        r.setFill(Color.TRANSPARENT);\n        r.setStrokeWidth(0.5);\n        r.setStroke(Color.BLACK);\n\n        this.chart = new LineChart&lt;Number, Number&gt;(xAxis, yAxis) {\n            @Override\n            public void layoutPlotChildren() {\n                super.layoutPlotChildren();\n                r.getTransforms().setAll(chartDisplayTransform(xAxis, yAxis));\n                // note nodes don't get removed from the plot children, and this method may be\n                // called often:\n                if (!getPlotChildren().contains(r)) {\n                    getPlotChildren().add(r);\n                }\n            }\n        };\n        this.chart.setAnimated(false);\n\n        XYChart.Series series = new XYChart.Series();\n        series.getData().add(new XYChart.Data(54, 50));\n        series.getData().add(new XYChart.Data(80, 0));\n        //series.setName(&quot;My portfolio&quot;);\n        this.chart.getData().add(series);\n        \n        VBox vbox = new VBox(this.chart);\n\n        Scene scene = new Scene(vbox, 400, 200);\n        primaryStage.setScene(scene);\n        primaryStage.setHeight(600);\n        primaryStage.setWidth(400);\n        primaryStage.show();\n    }\n\n    private Transform chartDisplayTransform(NumberAxis xAxis, NumberAxis yAxis) {\n        return new Affine(xAxis.getScale(), 0, xAxis.getDisplayPosition(0), 0, yAxis.getScale(),\n                yAxis.getDisplayPosition(0));\n    }\n\n    public static void main(String[] args) {\n        Application.launch(args);\n    }\n} \n\n</code></pre>\n"},{"tags":["java","android","android-room"],"answers":[{"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1499523129,"post_id":44986667,"comment_id":76948331,"body_markdown":"@TusharGogna: Relationships are covered in [the Room documentation](https://developer.android.com/topic/libraries/architecture/room.html#entities-relationships), and the &quot;entities do not refer directly to other entities&quot; bit is also covered in [the Room documentation](https://developer.android.com/topic/libraries/architecture/room.html#no-object-references).","body":"@TusharGogna: Relationships are covered in <a href=\"https://developer.android.com/topic/libraries/architecture/room.html#entities-relationships\" rel=\"nofollow noreferrer\">the Room documentation</a>, and the &quot;entities do not refer directly to other entities&quot; bit is also covered in <a href=\"https://developer.android.com/topic/libraries/architecture/room.html#no-object-references\" rel=\"nofollow noreferrer\">the Room documentation</a>."},{"owner":{"account_id":1756055,"reputation":601,"user_id":1604079,"accept_rate":48,"display_name":"FeleMed"},"score":0,"creation_date":1506708052,"post_id":44986667,"comment_id":79943536,"body_markdown":"@CommonsWare is `Relation` an option #3 for this case? [Relation documentation](https://developer.android.com/reference/android/arch/persistence/room/Relation.html)","body":"@CommonsWare is <code>Relation</code> an option #3 for this case? <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Relation.html\" rel=\"nofollow noreferrer\">Relation documentation</a>"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1506709979,"post_id":44986667,"comment_id":79944400,"body_markdown":"@FeleMed: Not really. `@Relation` is only for getting things out of the database. It has nothing to do with putting things into the database.","body":"@FeleMed: Not really. <code>@Relation</code> is only for getting things out of the database. It has nothing to do with putting things into the database."},{"owner":{"account_id":364990,"reputation":6913,"user_id":709671,"accept_rate":88,"display_name":"reixa"},"score":1,"creation_date":1541499285,"post_id":44986667,"comment_id":93229331,"body_markdown":"Just as a note. If you&#39;re going to persist a list of Int for example, then you need to serialize it as string for option 2. This makes queries more complex. I would rather go for option 1 since is less &quot;type&quot; dependant.","body":"Just as a note. If you&#39;re going to persist a list of Int for example, then you need to serialize it as string for option 2. This makes queries more complex. I would rather go for option 1 since is less &quot;type&quot; dependant."},{"owner":{"account_id":5971585,"reputation":1195,"user_id":4693765,"display_name":"Jose Pose S"},"score":0,"creation_date":1551533464,"post_id":44986667,"comment_id":96679485,"body_markdown":"You can read alternatives: https://android.jlelse.eu/android-architecture-components-room-relationships-bf473510c14a","body":"You can read alternatives: <a href=\"https://android.jlelse.eu/android-architecture-components-room-relationships-bf473510c14a\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>"},{"owner":{"account_id":9933732,"reputation":2018,"user_id":7352723,"display_name":"Jeffrey"},"score":7,"creation_date":1552227639,"post_id":44986667,"comment_id":96922007,"body_markdown":"Sometime in the future you may need to query your Items so I&#39;ll usually go with option#1","body":"Sometime in the future you may need to query your Items so I&#39;ll usually go with option#1"}],"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":6,"down_vote_count":1,"up_vote_count":104,"is_accepted":true,"score":103,"last_activity_date":1499519923,"creation_date":1499519923,"answer_id":44986667,"question_id":44986626,"body_markdown":"Option #1: Have `MyListItems` be an `@Entity`, as `MainActivityData` is. `MyListItems` would set up a `@ForeignKey` back to `MainActivityData`. In this case, though, `MainActivityData` cannot have `private ArrayList&lt;MyListItems&gt; myListItems`, as in Room, entities do not refer to other entities. A view model or similar POJO construct could have a `MainActivityData` and its associated `ArrayList&lt;MyListItems&gt;`, though.\r\n\r\nOption #2: Set up a pair of `@TypeConverter` methods to convert `ArrayList&lt;MyListItems&gt;` to and from some basic type (e.g., a `String`, such as by using JSON as a storage format). Now, `MainActivityData` can have its `ArrayList&lt;MyListItems&gt;` directly. However, there will be no separate table for `MyListItems`, and so you cannot query on `MyListItems` very well.\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Option #1: Have <code>MyListItems</code> be an <code>@Entity</code>, as <code>MainActivityData</code> is. <code>MyListItems</code> would set up a <code>@ForeignKey</code> back to <code>MainActivityData</code>. In this case, though, <code>MainActivityData</code> cannot have <code>private ArrayList&lt;MyListItems&gt; myListItems</code>, as in Room, entities do not refer to other entities. A view model or similar POJO construct could have a <code>MainActivityData</code> and its associated <code>ArrayList&lt;MyListItems&gt;</code>, though.</p>\n\n<p>Option #2: Set up a pair of <code>@TypeConverter</code> methods to convert <code>ArrayList&lt;MyListItems&gt;</code> to and from some basic type (e.g., a <code>String</code>, such as by using JSON as a storage format). Now, <code>MainActivityData</code> can have its <code>ArrayList&lt;MyListItems&gt;</code> directly. However, there will be no separate table for <code>MyListItems</code>, and so you cannot query on <code>MyListItems</code> very well.</p>\n"},{"comments":[{"owner":{"account_id":905932,"reputation":126,"user_id":940841,"display_name":"Ozeetee"},"score":2,"creation_date":1521578553,"post_id":45071364,"comment_id":85789206,"body_markdown":"Can anyone help me doing the same in Kotlin with List. In Java it was working fine. But when I converted it in Kolin its not working","body":"Can anyone help me doing the same in Kotlin with List. In Java it was working fine. But when I converted it in Kolin its not working"},{"owner":{"account_id":4160258,"reputation":417,"user_id":7813244,"display_name":"Sanjog Shrestha"},"score":3,"creation_date":1526489005,"post_id":45071364,"comment_id":87768377,"body_markdown":"How do you query from that arraylist?","body":"How do you query from that arraylist?"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1526541603,"post_id":45071364,"comment_id":87786672,"body_markdown":"@SanjogShrestha I don&#39;t understand  what do you mean. You just retrieve the arraylist and query using get method","body":"@SanjogShrestha I don&#39;t understand  what do you mean. You just retrieve the arraylist and query using get method"},{"owner":{"account_id":4160258,"reputation":417,"user_id":7813244,"display_name":"Sanjog Shrestha"},"score":0,"creation_date":1526542141,"post_id":45071364,"comment_id":87786978,"body_markdown":"@AmitBhandari Lets take the above scenario as an example. I want to search the table(MainActivityData) where myListItems contains (eg. a, b, c ) and userId is abc. Now how do we write query for such case?","body":"@AmitBhandari Lets take the above scenario as an example. I want to search the table(MainActivityData) where myListItems contains (eg. a, b, c ) and userId is abc. Now how do we write query for such case?"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1526547407,"post_id":45071364,"comment_id":87790073,"body_markdown":"@SanjogShrestha Query will remain same. Kind of like this, @Query(&quot;SELECT * FROM User&quot;)\n    List&lt;User&gt; getUsers();","body":"@SanjogShrestha Query will remain same. Kind of like this, @Query(&quot;SELECT * FROM User&quot;)     List&lt;User&gt; getUsers();"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1526547441,"post_id":45071364,"comment_id":87790094,"body_markdown":"@SanjogShrestha You can put where clause as per your need. You can refer to link given in answer for more.","body":"@SanjogShrestha You can put where clause as per your need. You can refer to link given in answer for more."},{"owner":{"account_id":929289,"reputation":1192,"user_id":959470,"accept_rate":38,"display_name":"desgraci"},"score":0,"creation_date":1534776944,"post_id":45071364,"comment_id":90816851,"body_markdown":"how this can be achieved using moshi?","body":"how this can be achieved using moshi?"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1534936227,"post_id":45071364,"comment_id":90880834,"body_markdown":"How can we use these converters? What to write in code?","body":"How can we use these converters? What to write in code?"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1535007505,"post_id":45071364,"comment_id":90909582,"body_markdown":"@CoolMind refer article provided in answer as a link for detailed use of this converter","body":"@CoolMind refer article provided in answer as a link for detailed use of this converter"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1535007520,"post_id":45071364,"comment_id":90909588,"body_markdown":"@desgraci sorry, never used moshi","body":"@desgraci sorry, never used moshi"},{"owner":{"account_id":10219506,"reputation":404,"user_id":7544080,"display_name":"Ashik Azeez"},"score":0,"creation_date":1551466045,"post_id":45071364,"comment_id":96663937,"body_markdown":"What the limit (max char) of my_list_array it also string field!!","body":"What the limit (max char) of my_list_array it also string field!!"},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":0,"creation_date":1551507119,"post_id":45071364,"comment_id":96673691,"body_markdown":"@AshikAzeez Sorry, I have no idea, never looked into it.","body":"@AshikAzeez Sorry, I have no idea, never looked into it."},{"owner":{"account_id":436363,"reputation":1434,"user_id":823483,"accept_rate":67,"display_name":"bompf"},"score":0,"creation_date":1596127576,"post_id":45071364,"comment_id":111718871,"body_markdown":"Gson is an expensive object to recreate, so reuse your Gson instance as much as possible. Otherwise this is going to be very inefficient for large data sets.","body":"Gson is an expensive object to recreate, so reuse your Gson instance as much as possible. Otherwise this is going to be very inefficient for large data sets."},{"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"score":1,"creation_date":1596465526,"post_id":45071364,"comment_id":111812226,"body_markdown":"@bompf thanks for the suggestion. Although this example here is just illustration. Generally we always keep one gson instance at application level.","body":"@bompf thanks for the suggestion. Although this example here is just illustration. Generally we always keep one gson instance at application level."},{"owner":{"account_id":484608,"reputation":5021,"user_id":900394,"accept_rate":63,"display_name":"Alaa M."},"score":0,"creation_date":1596897668,"post_id":45071364,"comment_id":111961374,"body_markdown":"How would you write a query to **add** an item to the list?","body":"How would you write a query to <b>add</b> an item to the list?"},{"owner":{"account_id":3838237,"reputation":1540,"user_id":3182079,"display_name":"Pietrek"},"score":0,"creation_date":1613117594,"post_id":45071364,"comment_id":116982183,"body_markdown":"This should be selected as correct answer as it does not require to create another entity for simple list.","body":"This should be selected as correct answer as it does not require to create another entity for simple list."},{"owner":{"account_id":7946170,"reputation":174,"user_id":5998634,"display_name":"User9211"},"score":0,"creation_date":1613710021,"post_id":45071364,"comment_id":117165387,"body_markdown":"@AmitBhandari Link is not working anymore. Can you please either update the link or answer.","body":"@AmitBhandari Link is not working anymore. Can you please either update the link or answer."},{"owner":{"account_id":4365428,"reputation":44,"user_id":4205927,"accept_rate":100,"display_name":"MML"},"score":0,"creation_date":1633178879,"post_id":45071364,"comment_id":122694273,"body_markdown":"which class is &quot;Type&quot; can you provide the full import please?","body":"which class is &quot;Type&quot; can you provide the full import please?"},{"owner":{"account_id":18759194,"reputation":1122,"user_id":13678514,"display_name":"Emmanuel Njorodongo"},"score":0,"creation_date":1641330204,"post_id":45071364,"comment_id":124776537,"body_markdown":"Can you assist me with a type converter of List&lt;HashMap&lt;String, Object&gt;&gt; list;","body":"Can you assist me with a type converter of List&lt;HashMap&lt;String, Object&gt;&gt; list;"}],"tags":[],"owner":{"account_id":7097845,"reputation":3064,"user_id":5430666,"accept_rate":69,"display_name":"Amit Bhandari"},"comment_count":19,"down_vote_count":4,"up_vote_count":173,"is_accepted":false,"score":169,"last_activity_date":1597586735,"creation_date":1499919842,"answer_id":45071364,"question_id":44986626,"body_markdown":"[Type Converter][1] are made specifically for that. In your case, you can use code snippet given below to store data in DB.\r\n\r\n    public class Converters {\r\n        @TypeConverter\r\n        public static ArrayList&lt;String&gt; fromString(String value) {\r\n            Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() {}.getType();\r\n            return new Gson().fromJson(value, listType);\r\n        }\r\n \r\n        @TypeConverter\r\n        public static String fromArrayList(ArrayList&lt;String&gt; list) {\r\n            Gson gson = new Gson();\r\n            String json = gson.toJson(list);\r\n            return json;\r\n        }\r\n    }\r\n\r\nAnd mention this class in your Room DB like this\r\n\r\n    @Database (entities = {MainActivityData.class},version = 1)\r\n    @TypeConverters({Converters.class})\r\n\r\nMore info [here][2]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/TypeConverter.html\r\n  [2]: http://thetechguru.in/storing-java-objects-primitive-types-room-database/","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p><a href=\"https://developer.android.com/reference/android/arch/persistence/room/TypeConverter.html\" rel=\"noreferrer\">Type Converter</a> are made specifically for that. In your case, you can use code snippet given below to store data in DB.</p>\n<pre><code>public class Converters {\n    @TypeConverter\n    public static ArrayList&lt;String&gt; fromString(String value) {\n        Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() {}.getType();\n        return new Gson().fromJson(value, listType);\n    }\n\n    @TypeConverter\n    public static String fromArrayList(ArrayList&lt;String&gt; list) {\n        Gson gson = new Gson();\n        String json = gson.toJson(list);\n        return json;\n    }\n}\n</code></pre>\n<p>And mention this class in your Room DB like this</p>\n<pre><code>@Database (entities = {MainActivityData.class},version = 1)\n@TypeConverters({Converters.class})\n</code></pre>\n<p>More info <a href=\"http://thetechguru.in/storing-java-objects-primitive-types-room-database/\" rel=\"noreferrer\">here</a></p>\n"},{"comments":[{"owner":{"account_id":4806580,"reputation":1001,"user_id":3881432,"accept_rate":33,"display_name":"zulkarnain shah"},"score":1,"creation_date":1539859571,"post_id":48981227,"comment_id":92658038,"body_markdown":"I tried adding  @TypeConverters above the Query annotation, but i am still getting the same error","body":"I tried adding  @TypeConverters above the Query annotation, but i am still getting the same error"}],"tags":[],"owner":{"account_id":194169,"reputation":49728,"user_id":436341,"accept_rate":67,"display_name":"live-love"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1519617381,"creation_date":1519617381,"answer_id":48981227,"question_id":44986626,"body_markdown":"Had the same error message as described above.\r\nI would like to add: if you get this error message in a @Query, you should add @TypeConverters above the @Query annotation. \r\n\r\nExample:\r\n\r\n    @TypeConverters(DateConverter.class)\r\n    @Query(&quot;update myTable set myDate=:myDate  where id = :myId&quot;)\r\n    void updateStats(int myId, Date myDate);\r\n\r\n....\r\n\r\n    public class DateConverter {\r\n    \r\n        @TypeConverter\r\n        public static Date toDate(Long timestamp) {\r\n            return timestamp == null ? null : new Date(timestamp);\r\n        }\r\n    \r\n        @TypeConverter\r\n        public static Long toTimestamp(Date date) {\r\n            return date == null ? null : date.getTime();\r\n        }\r\n    }","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Had the same error message as described above.\nI would like to add: if you get this error message in a @Query, you should add @TypeConverters above the @Query annotation. </p>\n\n<p>Example:</p>\n\n<pre><code>@TypeConverters(DateConverter.class)\n@Query(\"update myTable set myDate=:myDate  where id = :myId\")\nvoid updateStats(int myId, Date myDate);\n</code></pre>\n\n<p>....</p>\n\n<pre><code>public class DateConverter {\n\n    @TypeConverter\n    public static Date toDate(Long timestamp) {\n        return timestamp == null ? null : new Date(timestamp);\n    }\n\n    @TypeConverter\n    public static Long toTimestamp(Date date) {\n        return date == null ? null : date.getTime();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1428472,"reputation":657,"user_id":1351433,"accept_rate":80,"display_name":"Sohayb Hassoun"},"score":3,"creation_date":1535792243,"post_id":51083865,"comment_id":91203747,"body_markdown":"I think rather than deserializing to an array and then convert to List, it&#39;s better to use a List type like this: val listType = object : TypeToken&lt;List&lt;JobWorkHistory&gt;&gt;() {}.type like Amit mentioned in the answer below.","body":"I think rather than deserializing to an array and then convert to List, it&#39;s better to use a List type like this: val listType = object : TypeToken&lt;List&lt;JobWorkHistory&gt;&gt;() {}.type like Amit mentioned in the answer below."},{"owner":{"account_id":5802883,"reputation":136,"user_id":4576521,"accept_rate":0,"display_name":"Apsaliya"},"score":3,"creation_date":1566379124,"post_id":51083865,"comment_id":101634084,"body_markdown":"Also, You might want to fetch cached `Gson` instance from somewhere in your app. Initialising new `Gson` instance on every call can be expensive.","body":"Also, You might want to fetch cached <code>Gson</code> instance from somewhere in your app. Initialising new <code>Gson</code> instance on every call can be expensive."}],"tags":[],"owner":{"account_id":8652943,"reputation":22456,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"comment_count":2,"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1583692509,"creation_date":1530191650,"answer_id":51083865,"question_id":44986626,"body_markdown":"**Kotlin** version for type converter:\r\n\r\n     class Converters {\r\n\r\n        @TypeConverter\r\n        fun listToJson(value: List&lt;JobWorkHistory&gt;?) = Gson().toJson(value)\r\n\r\n        @TypeConverter\r\n        fun jsonToList(value: String) = Gson().fromJson(value, Array&lt;JobWorkHistory&gt;::class.java).toList()\r\n    }\r\n\r\nI Used `JobWorkHistory` object for my purpose, use the object of your own\r\n\r\n\r\n    @Database(entities = arrayOf(JobDetailFile::class, JobResponse::class), version = 1)\r\n    @TypeConverters(Converters::class)\r\n    abstract class MyRoomDataBase : RoomDatabase() {\r\n         abstract fun attachmentsDao(): AttachmentsDao\r\n    }\r\n\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p><strong>Kotlin</strong> version for type converter:</p>\n\n<pre><code> class Converters {\n\n    @TypeConverter\n    fun listToJson(value: List&lt;JobWorkHistory&gt;?) = Gson().toJson(value)\n\n    @TypeConverter\n    fun jsonToList(value: String) = Gson().fromJson(value, Array&lt;JobWorkHistory&gt;::class.java).toList()\n}\n</code></pre>\n\n<p>I Used <code>JobWorkHistory</code> object for my purpose, use the object of your own</p>\n\n<pre><code>@Database(entities = arrayOf(JobDetailFile::class, JobResponse::class), version = 1)\n@TypeConverters(Converters::class)\nabstract class MyRoomDataBase : RoomDatabase() {\n     abstract fun attachmentsDao(): AttachmentsDao\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":0,"creation_date":1537516863,"post_id":51635540,"comment_id":91821211,"body_markdown":"I use this solution for simple types (e.g. List&lt;Integer&gt;, List&lt;Long&gt;) because it is lighter than the gson-based solutions.","body":"I use this solution for simple types (e.g. List&lt;Integer&gt;, List&lt;Long&gt;) because it is lighter than the gson-based solutions."},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":3,"creation_date":1537516918,"post_id":51635540,"comment_id":91821229,"body_markdown":"This solution miss the unhappy flow (e.g. null and empty String, null List).","body":"This solution miss the unhappy flow (e.g. null and empty String, null List)."},{"owner":{"account_id":2098025,"reputation":19076,"user_id":1866373,"accept_rate":55,"display_name":"Daniel Wilson"},"score":0,"creation_date":1556724457,"post_id":51635540,"comment_id":98530252,"body_markdown":"Yeah I made the mistake of copy pasting this and lost at least an hour to single element lists creating elements with single commas. I have submitted and answer with a fix for that (in Kotlin)","body":"Yeah I made the mistake of copy pasting this and lost at least an hour to single element lists creating elements with single commas. I have submitted and answer with a fix for that (in Kotlin)"}],"tags":[],"owner":{"account_id":6580315,"reputation":151,"user_id":5084782,"display_name":"Derrick Njeru"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1566491205,"creation_date":1533132785,"answer_id":51635540,"question_id":44986626,"body_markdown":"This is how i handle List conversion\r\n\r\n    public class GenreConverter {\r\n    @TypeConverter\r\n    public List&lt;Integer&gt; gettingListFromString(String genreIds) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\r\n        String[] array = genreIds.split(&quot;,&quot;);\r\n\r\n        for (String s : array) {\r\n           if (!s.isEmpty()) {\r\n               list.add(Integer.parseInt(s));\r\n           }\r\n        }\r\n        return list;\r\n    }\r\n\r\n    @TypeConverter\r\n    public String writingStringFromList(List&lt;Integer&gt; list) {\r\n        String genreIds = &quot;&quot;;\r\n        for (int i : list) {\r\n            genreIds += &quot;,&quot; + i;\r\n        }\r\n        return genreIds;\r\n    }}\r\nAnd then on the database i do as shown below\r\n\r\n    @Database(entities = {MovieEntry.class}, version = 1)\r\n    @TypeConverters(GenreConverter.class)\r\n\r\nAnd below is a kotlin implementation of the same;\r\n\r\n    class GenreConverter {\r\n    @TypeConverter\r\n    fun gettingListFromString(genreIds: String): List&lt;Int&gt; {\r\n        val list = mutableListOf&lt;Int&gt;()\r\n\r\n        val array = genreIds.split(&quot;,&quot;.toRegex()).dropLastWhile {\r\n            it.isEmpty()\r\n        }.toTypedArray()\r\n\r\n        for (s in array) {\r\n            if (s.isNotEmpty()) {\r\n                list.add(s.toInt())\r\n            }\r\n        }\r\n        return list\r\n    }\r\n\r\n    @TypeConverter\r\n    fun writingStringFromList(list: List&lt;Int&gt;): String {\r\n        var genreIds=&quot;&quot;\r\n        for (i in list) genreIds += &quot;,$i&quot;\r\n        return genreIds\r\n    }}\r\n\r\n\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>This is how i handle List conversion</p>\n\n<pre><code>public class GenreConverter {\n@TypeConverter\npublic List&lt;Integer&gt; gettingListFromString(String genreIds) {\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n    String[] array = genreIds.split(\",\");\n\n    for (String s : array) {\n       if (!s.isEmpty()) {\n           list.add(Integer.parseInt(s));\n       }\n    }\n    return list;\n}\n\n@TypeConverter\npublic String writingStringFromList(List&lt;Integer&gt; list) {\n    String genreIds = \"\";\n    for (int i : list) {\n        genreIds += \",\" + i;\n    }\n    return genreIds;\n}}\n</code></pre>\n\n<p>And then on the database i do as shown below</p>\n\n<pre><code>@Database(entities = {MovieEntry.class}, version = 1)\n@TypeConverters(GenreConverter.class)\n</code></pre>\n\n<p>And below is a kotlin implementation of the same;</p>\n\n<pre><code>class GenreConverter {\n@TypeConverter\nfun gettingListFromString(genreIds: String): List&lt;Int&gt; {\n    val list = mutableListOf&lt;Int&gt;()\n\n    val array = genreIds.split(\",\".toRegex()).dropLastWhile {\n        it.isEmpty()\n    }.toTypedArray()\n\n    for (s in array) {\n        if (s.isNotEmpty()) {\n            list.add(s.toInt())\n        }\n    }\n    return list\n}\n\n@TypeConverter\nfun writingStringFromList(list: List&lt;Int&gt;): String {\n    var genreIds=\"\"\n    for (i in list) genreIds += \",$i\"\n    return genreIds\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11690366,"reputation":408,"user_id":8558850,"display_name":"Fidan Bacaj"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1545313049,"creation_date":1545313049,"answer_id":53869810,"question_id":44986626,"body_markdown":"Use official solution from room, @Embedded annotation :\r\n\r\n    @Embedded(prefix = &quot;mylist_array&quot;) private ArrayList&lt;MyListItems&gt; myListItems\r\n\r\n ","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Use official solution from room, @Embedded annotation :</p>\n\n<pre><code>@Embedded(prefix = \"mylist_array\") private ArrayList&lt;MyListItems&gt; myListItems\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4160650,"reputation":632,"user_id":3410835,"display_name":"K Pradeep Kumar Reddy"},"score":1,"creation_date":1573626619,"post_id":55845492,"comment_id":103938284,"body_markdown":"can you elaborate your answer ??","body":"can you elaborate your answer ??"}],"tags":[],"owner":{"account_id":4055813,"reputation":1480,"user_id":3333878,"accept_rate":38,"display_name":"abitcode"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556182760,"creation_date":1556182760,"answer_id":55845492,"question_id":44986626,"body_markdown":"Adding `@TypeConverters` with the converter class as params\r\n\r\nto Database &amp; to the Dao class, made my queries work","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Adding <code>@TypeConverters</code> with the converter class as params</p>\n\n<p>to Database &amp; to the Dao class, made my queries work</p>\n"},{"tags":[],"owner":{"account_id":2098025,"reputation":19076,"user_id":1866373,"accept_rate":55,"display_name":"Daniel Wilson"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1556724593,"creation_date":1556724593,"answer_id":55938703,"question_id":44986626,"body_markdown":"This answer uses Kotin to split by comma and construct the comma delineated string. The comma needs to go at the end of all but the last element, so this will handle single element lists as well.        \r\n\r\n    object StringListConverter {\r\n            @TypeConverter\r\n            @JvmStatic\r\n            fun toList(strings: String): List&lt;String&gt; {\r\n                val list = mutableListOf&lt;String&gt;()\r\n                val array = strings.split(&quot;,&quot;)\r\n                for (s in array) {\r\n                    list.add(s)\r\n                }\r\n                return list\r\n            }\r\n        \r\n            @TypeConverter\r\n            @JvmStatic\r\n            fun toString(strings: List&lt;String&gt;): String {\r\n                var result = &quot;&quot;\r\n                strings.forEachIndexed { index, element -&gt;\r\n                    result += element\r\n                    if(index != (strings.size-1)){\r\n                        result += &quot;,&quot;\r\n                    }\r\n                }\r\n                return result\r\n            }\r\n        }\r\n\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>This answer uses Kotin to split by comma and construct the comma delineated string. The comma needs to go at the end of all but the last element, so this will handle single element lists as well.        </p>\n\n<pre><code>object StringListConverter {\n        @TypeConverter\n        @JvmStatic\n        fun toList(strings: String): List&lt;String&gt; {\n            val list = mutableListOf&lt;String&gt;()\n            val array = strings.split(\",\")\n            for (s in array) {\n                list.add(s)\n            }\n            return list\n        }\n\n        @TypeConverter\n        @JvmStatic\n        fun toString(strings: List&lt;String&gt;): String {\n            var result = \"\"\n            strings.forEachIndexed { index, element -&gt;\n                result += element\n                if(index != (strings.size-1)){\n                    result += \",\"\n                }\n            }\n            return result\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1691935537,"post_id":56354845,"comment_id":135555296,"body_markdown":"You assume the strings don&#39;t include &quot;,&quot;","body":"You assume the strings don&#39;t include &quot;,&quot;"}],"tags":[],"owner":{"account_id":6378178,"reputation":148,"user_id":4948489,"accept_rate":50,"display_name":"Dokuzov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559113584,"creation_date":1559113584,"answer_id":56354845,"question_id":44986626,"body_markdown":"Json conversions don&#39;t scale well in terms of memory allocation.I&#39;d rather go for something similar to responses above with some nullability.\r\n\r\n\r\n    class Converters {\r\n        @TypeConverter\r\n        fun stringAsStringList(strings: String?): List&lt;String&gt; {\r\n            val list = mutableListOf&lt;String&gt;()\r\n            strings\r\n                ?.split(&quot;,&quot;)\r\n                ?.forEach {\r\n                    list.add(it)\r\n                }\r\n    \r\n            return list\r\n        }\r\n    \r\n        @TypeConverter\r\n        fun stringListAsString(strings: List&lt;String&gt;?): String {\r\n            var result = &quot;&quot;\r\n            strings?.forEach { element -&gt;\r\n                result += &quot;$element,&quot;\r\n            }\r\n            return result.removeSuffix(&quot;,&quot;)\r\n        }\r\n    }\r\n\r\nFor simple data types the above can be used, otherwise for complex datatypes Room provides [Embedded][1]\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/Embedded","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Json conversions don't scale well in terms of memory allocation.I'd rather go for something similar to responses above with some nullability.</p>\n\n<pre><code>class Converters {\n    @TypeConverter\n    fun stringAsStringList(strings: String?): List&lt;String&gt; {\n        val list = mutableListOf&lt;String&gt;()\n        strings\n            ?.split(\",\")\n            ?.forEach {\n                list.add(it)\n            }\n\n        return list\n    }\n\n    @TypeConverter\n    fun stringListAsString(strings: List&lt;String&gt;?): String {\n        var result = \"\"\n        strings?.forEach { element -&gt;\n            result += \"$element,\"\n        }\n        return result.removeSuffix(\",\")\n    }\n}\n</code></pre>\n\n<p>For simple data types the above can be used, otherwise for complex datatypes Room provides <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Embedded\" rel=\"nofollow noreferrer\">Embedded</a></p>\n"},{"comments":[{"owner":{"account_id":52067,"reputation":328,"user_id":1011810,"accept_rate":80,"display_name":"emarshah"},"score":26,"creation_date":1575735714,"post_id":57424101,"comment_id":104669401,"body_markdown":"Be ware of using &quot;,&quot; as separator as sometimes your string may have the same character and it can be a mess.","body":"Be ware of using &quot;,&quot; as separator as sometimes your string may have the same character and it can be a mess."}],"tags":[],"owner":{"account_id":1677664,"reputation":4472,"user_id":1542796,"accept_rate":75,"display_name":"Nitin Misra"},"comment_count":1,"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1565329811,"creation_date":1565329811,"answer_id":57424101,"question_id":44986626,"body_markdown":"Better version of `List&lt;String&gt;` converter \r\n\r\n```\r\nclass StringListConverter {\r\n    @TypeConverter\r\n    fun fromString(stringListString: String): List&lt;String&gt; {\r\n        return stringListString.split(&quot;,&quot;).map { it }\r\n    }\r\n\r\n    @TypeConverter\r\n    fun toString(stringList: List&lt;String&gt;): String {\r\n        return stringList.joinToString(separator = &quot;,&quot;)\r\n    }\r\n}","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Better version of <code>List&lt;String&gt;</code> converter </p>\n\n<pre><code>class StringListConverter {\n    @TypeConverter\n    fun fromString(stringListString: String): List&lt;String&gt; {\n        return stringListString.split(\",\").map { it }\n    }\n\n    @TypeConverter\n    fun toString(stringList: List&lt;String&gt;): String {\n        return stringList.joinToString(separator = \",\")\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10416738,"reputation":75,"user_id":7680587,"display_name":"user7680587"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574096741,"creation_date":1572331376,"answer_id":58602500,"question_id":44986626,"body_markdown":"Here is the example for adding the customObject types to Room DB table.\r\nhttps://mobikul.com/insert-custom-list-and-get-that-list-in-room-database-using-typeconverter/ \r\n\r\nAdding a type converter was easy, I just needed a method that could turn the list of objects into a string, and a method that could do the reverse. I used gson for this.\r\n\r\n    public class Converters {\r\n    \r\n        @TypeConverter\r\n        public static String MyListItemListToString(List&lt;MyListitem&gt; list) {\r\n            Gson gson = new Gson();\r\n            return gson.toJson(list);\r\n        }\r\n    \r\n        @TypeConverter\r\n        public static List&lt;Integer&gt; stringToMyListItemList(@Nullable String data) {\r\n            if (data == null) {\r\n                return Collections.emptyList();\r\n            }\r\n    \r\n            Type listType = new TypeToken&lt;List&lt;MyListItem&gt;&gt;() {}.getType();\r\n    \r\n            Gson gson = new Gson();\r\n            return gson.fromJson(data, listType);\r\n        }\r\n    }\r\n\r\nI then added an annotation to the field in the Entity:\r\n\r\n    @TypeConverters(Converters.class)\r\n    \r\n    public final ArrayList&lt;MyListItem&gt; myListItems;","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>Here is the example for adding the customObject types to Room DB table.\n<a href=\"https://mobikul.com/insert-custom-list-and-get-that-list-in-room-database-using-typeconverter/\" rel=\"nofollow noreferrer\">https://mobikul.com/insert-custom-list-and-get-that-list-in-room-database-using-typeconverter/</a> </p>\n\n<p>Adding a type converter was easy, I just needed a method that could turn the list of objects into a string, and a method that could do the reverse. I used gson for this.</p>\n\n<pre><code>public class Converters {\n\n    @TypeConverter\n    public static String MyListItemListToString(List&lt;MyListitem&gt; list) {\n        Gson gson = new Gson();\n        return gson.toJson(list);\n    }\n\n    @TypeConverter\n    public static List&lt;Integer&gt; stringToMyListItemList(@Nullable String data) {\n        if (data == null) {\n            return Collections.emptyList();\n        }\n\n        Type listType = new TypeToken&lt;List&lt;MyListItem&gt;&gt;() {}.getType();\n\n        Gson gson = new Gson();\n        return gson.fromJson(data, listType);\n    }\n}\n</code></pre>\n\n<p>I then added an annotation to the field in the Entity:</p>\n\n<pre><code>@TypeConverters(Converters.class)\n\npublic final ArrayList&lt;MyListItem&gt; myListItems;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6232593,"reputation":91,"user_id":4848827,"display_name":"Benja"},"score":0,"creation_date":1664451154,"post_id":59226545,"comment_id":130477428,"body_markdown":"This cant work because return type of {Gson().fromJson(arg1, arg2) } needs to return an arraylist of Strings not of Integers,.. {fromJson(arg1, arg2)} requires strings or typetokens","body":"This cant work because return type of {Gson().fromJson(arg1, arg2) } needs to return an arraylist of Strings not of Integers,.. {fromJson(arg1, arg2)} requires strings or typetokens"}],"tags":[],"owner":{"account_id":4523377,"reputation":2744,"user_id":3675925,"display_name":"Hamid Zandi"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1575725897,"creation_date":1575725897,"answer_id":59226545,"question_id":44986626,"body_markdown":"in my case problem was generic type\r\nbase on this answer\r\n\r\n[https://stackoverflow.com/a/48480257/3675925][1]\r\n  [1]: https://stackoverflow.com/a/48480257/3675925\r\n\r\nuse List&lt;Int&gt; instead of ArrayList&lt;Int&gt;\r\n\r\n     import androidx.room.TypeConverter\r\n     import com.google.gson.Gson \r\n     import com.google.gson.reflect.TypeToken\r\n     class IntArrayListConverter {\r\n         @TypeConverter\r\n         fun fromString(value: String): List&lt;Int&gt; {\r\n             val type = object: TypeToken&lt;List&lt;Int&gt;&gt;() {}.type\r\n             return Gson().fromJson(value, type)\r\n         }\r\n\r\n         @TypeConverter\r\n         fun fromArrayList(list: List&lt;Int&gt;): String {\r\n             val type = object: TypeToken&lt;List&lt;Int&gt;&gt;() {}.type\r\n             return Gson().toJson(list, type)\r\n         } \r\n    }\r\n\r\n\r\nit doesn&#39;t need add @TypeConverters(IntArrayListConverter::class) to query in dao class nor fields in Entity class\r\nand just add @TypeConverters(IntArrayListConverter::class) to database class\r\n\r\n    @Database(entities = [MyEntity::class], version = 1, exportSchema = false)\r\n    @TypeConverters(IntArrayListConverter::class)\r\n    abstract class MyDatabase : RoomDatabase() {","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>in my case problem was generic type\nbase on this answer</p>\n\n<p><a href=\"https://stackoverflow.com/a/48480257/3675925\">https://stackoverflow.com/a/48480257/3675925</a>\nuse List instead of ArrayList</p>\n\n<pre><code> import androidx.room.TypeConverter\n import com.google.gson.Gson \n import com.google.gson.reflect.TypeToken\n class IntArrayListConverter {\n     @TypeConverter\n     fun fromString(value: String): List&lt;Int&gt; {\n         val type = object: TypeToken&lt;List&lt;Int&gt;&gt;() {}.type\n         return Gson().fromJson(value, type)\n     }\n\n     @TypeConverter\n     fun fromArrayList(list: List&lt;Int&gt;): String {\n         val type = object: TypeToken&lt;List&lt;Int&gt;&gt;() {}.type\n         return Gson().toJson(list, type)\n     } \n}\n</code></pre>\n\n<p>it doesn't need add @TypeConverters(IntArrayListConverter::class) to query in dao class nor fields in Entity class\nand just add @TypeConverters(IntArrayListConverter::class) to database class</p>\n\n<pre><code>@Database(entities = [MyEntity::class], version = 1, exportSchema = false)\n@TypeConverters(IntArrayListConverter::class)\nabstract class MyDatabase : RoomDatabase() {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14346707,"reputation":561,"user_id":10363408,"display_name":"jagadishlakkurcom jagadishlakk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668117109,"creation_date":1584619239,"answer_id":60756804,"question_id":44986626,"body_markdown":"When we are using TypeConverters then datatype should be return type of TypeConverter method.\r\n\r\nFor example: TypeConverter method returns a string, then adding table column should be of type string.\r\n  \r\n    private static final Migration MIGRATION_1_2 = new Migration(1, 2) {\r\n        @Override\r\n        public void migrate(@NonNull SupportSQLiteDatabase database) {\r\n            // Since we didn&#39;t alter the table, there&#39;s nothing else to do here.\r\n            database.execSQL(&quot;ALTER TABLE &quot;+  Collection.TABLE_STATUS  + &quot; ADD COLUMN deviceType TEXT;&quot;);\r\n            database.execSQL(&quot;ALTER TABLE &quot;+  Collection.TABLE_STATUS  + &quot; ADD COLUMN inboxType TEXT;&quot;);\r\n        }\r\n    };","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>When we are using TypeConverters then datatype should be return type of TypeConverter method.</p>\n<p>For example: TypeConverter method returns a string, then adding table column should be of type string.</p>\n<pre><code>private static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(@NonNull SupportSQLiteDatabase database) {\n        // Since we didn't alter the table, there's nothing else to do here.\n        database.execSQL(&quot;ALTER TABLE &quot;+  Collection.TABLE_STATUS  + &quot; ADD COLUMN deviceType TEXT;&quot;);\n        database.execSQL(&quot;ALTER TABLE &quot;+  Collection.TABLE_STATUS  + &quot; ADD COLUMN inboxType TEXT;&quot;);\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16023845,"reputation":36,"user_id":11564656,"display_name":"Awscoolboy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593473577,"creation_date":1593473577,"answer_id":62648177,"question_id":44986626,"body_markdown":"     @Query(&quot;SELECT * FROM business_table&quot;)\r\n     abstract List&lt;DatabaseModels.Business&gt; getBusinessInternal();\r\n\r\n\r\n     @Transaction @Query(&quot;SELECT * FROM business_table&quot;)\r\n     public ArrayList&lt;DatabaseModels.Business&gt; getBusiness(){\r\n            return new ArrayList&lt;&gt;(getBusinessInternal());\r\n     }\r\n\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<pre><code> @Query(&quot;SELECT * FROM business_table&quot;)\n abstract List&lt;DatabaseModels.Business&gt; getBusinessInternal();\n\n\n @Transaction @Query(&quot;SELECT * FROM business_table&quot;)\n public ArrayList&lt;DatabaseModels.Business&gt; getBusiness(){\n        return new ArrayList&lt;&gt;(getBusinessInternal());\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18228916,"reputation":2352,"user_id":13268194,"display_name":"Tarun Anchala"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1617729017,"creation_date":1593676208,"answer_id":62691523,"question_id":44986626,"body_markdown":"All above answers are for list of strings. But below helps you to write converter for list of objects.\r\n    \r\nJust in place of &quot;**YourClassName**&quot;, add your Object class.\r\n\r\n\r\n   \r\n\r\n     @TypeConverter\r\n            public String fromValuesToList(ArrayList&lt;**YourClassName**&gt; value) {\r\n                if (value== null) {\r\n                    return (null);\r\n                }\r\n                Gson gson = new Gson();\r\n                Type type = new TypeToken&lt;ArrayList&lt;**YourClassName**&gt;&gt;() {}.getType();\r\n                return gson.toJson(value, type);\r\n            }\r\n        \r\n            @TypeConverter\r\n            public ArrayList&lt;**YourClassName**&gt; toOptionValuesList(String value) {\r\n                if (value== null) {\r\n                    return (null);\r\n                }\r\n                Gson gson = new Gson();\r\n                Type type = new TypeToken&lt;List&lt;**YourClassName**&gt;&gt;() {\r\n                }.getType();\r\n                return gson.fromJson(value, type);\r\n            }","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>All above answers are for list of strings. But below helps you to write converter for list of objects.</p>\n<p>Just in place of &quot;<strong>YourClassName</strong>&quot;, add your Object class.</p>\n<pre><code> @TypeConverter\n        public String fromValuesToList(ArrayList&lt;**YourClassName**&gt; value) {\n            if (value== null) {\n                return (null);\n            }\n            Gson gson = new Gson();\n            Type type = new TypeToken&lt;ArrayList&lt;**YourClassName**&gt;&gt;() {}.getType();\n            return gson.toJson(value, type);\n        }\n    \n        @TypeConverter\n        public ArrayList&lt;**YourClassName**&gt; toOptionValuesList(String value) {\n            if (value== null) {\n                return (null);\n            }\n            Gson gson = new Gson();\n            Type type = new TypeToken&lt;List&lt;**YourClassName**&gt;&gt;() {\n            }.getType();\n            return gson.fromJson(value, type);\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3260232,"reputation":2090,"user_id":2745944,"accept_rate":84,"display_name":"martinseal1987"},"score":0,"creation_date":1598892444,"post_id":62716343,"comment_id":112598103,"body_markdown":"dont make assumptions if yopu were storing a list of IDs that was available in the first api call but not in the next, then by all means store those ids somewhere and then use them to query the api store it into a table with a junction table, this uses both solutions, i do agree with you that this could be seen as an easy way out and isnt great for a lot of reasons","body":"dont make assumptions if yopu were storing a list of IDs that was available in the first api call but not in the next, then by all means store those ids somewhere and then use them to query the api store it into a table with a junction table, this uses both solutions, i do agree with you that this could be seen as an easy way out and isnt great for a lot of reasons"}],"tags":[],"owner":{"account_id":3693926,"reputation":2058,"user_id":3075856,"accept_rate":50,"display_name":"w201"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593782485,"creation_date":1593782485,"answer_id":62716343,"question_id":44986626,"body_markdown":"All answers above correct. Yes, if you REALLY need store array of something into one SQLite field TypeConverter is a solution.\r\n\r\nAnd I used the accepted answer in my projects. \r\n\r\nBut don&#39;t do it!!!\r\n\r\nIf you need store array in Entity in 90% cases you need to create one-to-many or many-to-many relationships. \r\n\r\nOtherwise, your next SQL query for select something with key inside this array will be absolutely hell...\r\n\r\nExample: \r\n\r\nObject foo comes as json: [{id: 1, name: &quot;abs&quot;},  {id:2, name: &quot;cde&quot;}\r\n\r\nObject bar: [{id, 1, foos: [1, 2], {...}]\r\n\r\nSo don&#39;t make entity like:\r\n\r\n    @Entity....\r\n    data class bar(\r\n    ...\r\n    val foos: ArrayList&lt;Int&gt;)\r\n\r\nMake like next:\r\n\r\n    @Entity(tablename=&quot;bar_foo&quot;, primaryKeys=[&quot;fooId&quot;, &quot;barId&quot;])\r\n    data class barFoo(val barId: Int, val fooId: Int)\r\n\r\nAnd sore your foos:[] as records in this table.","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>All answers above correct. Yes, if you REALLY need store array of something into one SQLite field TypeConverter is a solution.</p>\n<p>And I used the accepted answer in my projects.</p>\n<p>But don't do it!!!</p>\n<p>If you need store array in Entity in 90% cases you need to create one-to-many or many-to-many relationships.</p>\n<p>Otherwise, your next SQL query for select something with key inside this array will be absolutely hell...</p>\n<p>Example:</p>\n<p>Object foo comes as json: [{id: 1, name: &quot;abs&quot;},  {id:2, name: &quot;cde&quot;}</p>\n<p>Object bar: [{id, 1, foos: [1, 2], {...}]</p>\n<p>So don't make entity like:</p>\n<pre><code>@Entity....\ndata class bar(\n...\nval foos: ArrayList&lt;Int&gt;)\n</code></pre>\n<p>Make like next:</p>\n<pre><code>@Entity(tablename=&quot;bar_foo&quot;, primaryKeys=[&quot;fooId&quot;, &quot;barId&quot;])\ndata class barFoo(val barId: Int, val fooId: Int)\n</code></pre>\n<p>And sore your foos:[] as records in this table.</p>\n"},{"comments":[{"owner":{"account_id":5192826,"reputation":3493,"user_id":6007104,"accept_rate":25,"display_name":"Luke Needham"},"score":2,"creation_date":1610386865,"post_id":64242694,"comment_id":116111207,"body_markdown":"The only sane answer here! Don&#39;t violate First Normal Form!","body":"The only sane answer here! Don&#39;t violate First Normal Form!"},{"owner":{"account_id":14485458,"reputation":351,"user_id":10463552,"display_name":"Emmanuel Murairi"},"score":0,"creation_date":1619952323,"post_id":64242694,"comment_id":119053495,"body_markdown":"I like this solution of using a 1 to N relationship. One question though, if you have a JSON file with some data and you want to store it in your DB, unlike the ArrayList approach which using Gson you can easily create instances of your object holding your data, how do you do it with this data structure?","body":"I like this solution of using a 1 to N relationship. One question though, if you have a JSON file with some data and you want to store it in your DB, unlike the ArrayList approach which using Gson you can easily create instances of your object holding your data, how do you do it with this data structure?"},{"owner":{"account_id":17230864,"reputation":281,"user_id":12492043,"display_name":"Albert Gom&#224;"},"score":1,"creation_date":1620125055,"post_id":64242694,"comment_id":119102268,"body_markdown":"@EmmanuelMurairi I&#39;m afraid you can&#39;t. In order to instantiate arbitrary objects at runtime Gson uses [reflection](https://stackoverflow.com/a/10470279/12492043) -which you can use as well- but, as Room works on top of a relational database (SQLite), it structures the data into tables with predefined columns, so you need to know how the data is structured and declare the Entity classes in advance. When you use Gson you are just dumping a huge String into a single column and parsing it at runtime every time you read it. It&#39;s a nice workaround, but I try to avoid it as much as I can.","body":"@EmmanuelMurairi I&#39;m afraid you can&#39;t. In order to instantiate arbitrary objects at runtime Gson uses <a href=\"https://stackoverflow.com/a/10470279/12492043\">reflection</a> -which you can use as well- but, as Room works on top of a relational database (SQLite), it structures the data into tables with predefined columns, so you need to know how the data is structured and declare the Entity classes in advance. When you use Gson you are just dumping a huge String into a single column and parsing it at runtime every time you read it. It&#39;s a nice workaround, but I try to avoid it as much as I can."},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1635458102,"post_id":64242694,"comment_id":123311440,"body_markdown":"Sometimes you should, sometimes you shouldn&#39;t, depends on whether you need to manipulate it + use it in queries or not","body":"Sometimes you should, sometimes you shouldn&#39;t, depends on whether you need to manipulate it + use it in queries or not"},{"owner":{"account_id":17230864,"reputation":281,"user_id":12492043,"display_name":"Albert Gom&#224;"},"score":1,"creation_date":1635587569,"post_id":64242694,"comment_id":123342100,"body_markdown":"@EpicPandaForce Of course, de-normalization some times can lead to a much better performance and many distributed systems take advantage of it. However, one should keep in mind that App requirements may change with newer versions (re-normalizing a de-normalized schema can be a real pain) and that type conversion is a manipulation on its own, which can drain resources (and battery) when not strictly necessary. Only de-normalize when you know what you&#39;re doing.","body":"@EpicPandaForce Of course, de-normalization some times can lead to a much better performance and many distributed systems take advantage of it. However, one should keep in mind that App requirements may change with newer versions (re-normalizing a de-normalized schema can be a real pain) and that type conversion is a manipulation on its own, which can drain resources (and battery) when not strictly necessary. Only de-normalize when you know what you&#39;re doing."}],"tags":[],"owner":{"account_id":17230864,"reputation":281,"user_id":12492043,"display_name":"Albert Gom&#224;"},"comment_count":5,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1602068528,"creation_date":1602068528,"answer_id":64242694,"question_id":44986626,"body_markdown":"I would personally advise against `@TypeConverters`/serializations, since they break the database&#39;s normal forms compliance.\r\n\r\nFor this particular case it might be worth [defining a relationship][1] using the [@Relation][2] annotation, which allows to query nested entities into a single object without the added complexity of declaring a `@ForeignKey` and writing all the SQL queries manually:\r\n\r\n```java-lang\r\n@Entity\r\npublic class MainActivityData {\r\n    @PrimaryKey\r\n    private String userId;\r\n    private String itemOneId;\r\n    private String itemTwoId;\r\n}\r\n\r\n@Entity\r\npublic class MyListItem {\r\n    @PrimaryKey\r\n    public int id;\r\n    public String ownerUserId;\r\n    public String text;\r\n}\r\n\r\n/* This is the class we use to define our relationship,\r\n   which will also be used to return our query results.\r\n   Note that it is not defined as an @Entity */\r\npublic class DataWithItems {\r\n    @Embedded public MainActivityData data;\r\n    @Relation(\r\n        parentColumn = &quot;userId&quot;\r\n        entityColumn = &quot;ownerUserId&quot;\r\n    )\r\n    public List&lt;MyListItem&gt; myListItems;\r\n}\r\n\r\n/* This is the DAO interface where we define the queries.\r\n   Even though it looks like a single SELECT, Room performs\r\n   two, therefore the @Transaction annotation is required */\r\n@Dao\r\npublic interface ListItemsDao {\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM MainActivityData&quot;)\r\n    public List&lt;DataWithItems&gt; getAllData();\r\n}\r\n```\r\n\r\n\r\nAside from this 1-N example, it is possible to define 1-1 and N-M relationships as well.\r\n\r\n\r\n  [1]: https://developer.android.com/training/data-storage/room/relationships\r\n  [2]: https://developer.android.com/reference/androidx/room/Relation","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>I would personally advise against <code>@TypeConverters</code>/serializations, since they break the database's normal forms compliance.</p>\n<p>For this particular case it might be worth <a href=\"https://developer.android.com/training/data-storage/room/relationships\" rel=\"noreferrer\">defining a relationship</a> using the <a href=\"https://developer.android.com/reference/androidx/room/Relation\" rel=\"noreferrer\">@Relation</a> annotation, which allows to query nested entities into a single object without the added complexity of declaring a <code>@ForeignKey</code> and writing all the SQL queries manually:</p>\n<pre><code>@Entity\npublic class MainActivityData {\n    @PrimaryKey\n    private String userId;\n    private String itemOneId;\n    private String itemTwoId;\n}\n\n@Entity\npublic class MyListItem {\n    @PrimaryKey\n    public int id;\n    public String ownerUserId;\n    public String text;\n}\n\n/* This is the class we use to define our relationship,\n   which will also be used to return our query results.\n   Note that it is not defined as an @Entity */\npublic class DataWithItems {\n    @Embedded public MainActivityData data;\n    @Relation(\n        parentColumn = &quot;userId&quot;\n        entityColumn = &quot;ownerUserId&quot;\n    )\n    public List&lt;MyListItem&gt; myListItems;\n}\n\n/* This is the DAO interface where we define the queries.\n   Even though it looks like a single SELECT, Room performs\n   two, therefore the @Transaction annotation is required */\n@Dao\npublic interface ListItemsDao {\n    @Transaction\n    @Query(&quot;SELECT * FROM MainActivityData&quot;)\n    public List&lt;DataWithItems&gt; getAllData();\n}\n</code></pre>\n<p>Aside from this 1-N example, it is possible to define 1-1 and N-M relationships as well.</p>\n"},{"comments":[{"owner":{"account_id":5826102,"reputation":2248,"user_id":4592448,"accept_rate":100,"display_name":"Fortran"},"score":2,"creation_date":1618842595,"post_id":64775101,"comment_id":118718340,"body_markdown":"if auto import not work add:\n\nimport kotlinx.serialization.json.Json\n\nimport kotlinx.serialization.decodeFromString\n\nimport kotlinx.serialization.encodeToString","body":"if auto import not work add:  import kotlinx.serialization.json.Json  import kotlinx.serialization.decodeFromString  import kotlinx.serialization.encodeToString"},{"owner":{"account_id":7959085,"reputation":807,"user_id":6007418,"display_name":"Lennoard Silva"},"score":6,"creation_date":1620248330,"post_id":64775101,"comment_id":119148284,"body_markdown":"You&#39;ll probably need `classpath(&quot;org.jetbrains.kotlin:kotlin-serialization:$kotlinVersion&quot;)` as well","body":"You&#39;ll probably need <code>classpath(&quot;org.jetbrains.kotlin:kotlin-serialization:$kotlin&zwnj;&#8203;Version&quot;)</code> as well"}],"tags":[],"owner":{"account_id":7533819,"reputation":875,"user_id":5720931,"display_name":"Patrick"},"comment_count":2,"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1611083232,"creation_date":1605034826,"answer_id":64775101,"question_id":44986626,"body_markdown":"**Native Kotlin version** using Kotlin&#39;s serialization component – *kotlinx.serialization*. \r\n\r\n1) Add the Kotlin serialization Gradle plugin and dependency to your `build.gradle`:\r\n\r\n```\r\napply plugin: &#39;kotlinx-serialization&#39;\r\n\r\ndependencies {\r\n   ...\r\n   implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.0.1&quot;\r\n}\r\n```\r\n2) Add the Type converters to your Converter class;\r\n```\r\nclass Converters {\r\n   @TypeConverter\r\n   fun fromList(value : List&lt;String&gt;) = Json.encodeToString(value)\r\n\r\n   @TypeConverter\r\n   fun toList(value: String) = Json.decodeFromString&lt;List&lt;String&gt;&gt;(value)\r\n}\r\n```\r\n\r\n3) Add your Converter class to your database class:\r\n```\r\n@TypeConverters(Converters::class)\r\nabstract class YourDatabase: RoomDatabase() {...}\r\n```\r\n\r\nAnd you&#39;re done!\r\n\r\nExtra resources:\r\n\r\n - [Type Converters][1]\r\n - [Kotlin Serialization][2]\r\n\r\n  [1]: https://developer.android.com/training/data-storage/room/referencing-data#type-converters\r\n[2]: https://kotlinlang.org/docs/reference/serialization.html","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p><strong>Native Kotlin version</strong> using Kotlin's serialization component – <em>kotlinx.serialization</em>.</p>\n<ol>\n<li>Add the Kotlin serialization Gradle plugin and dependency to your <code>build.gradle</code>:</li>\n</ol>\n<pre><code>apply plugin: 'kotlinx-serialization'\n\ndependencies {\n   ...\n   implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.0.1&quot;\n}\n</code></pre>\n<ol start=\"2\">\n<li>Add the Type converters to your Converter class;</li>\n</ol>\n<pre><code>class Converters {\n   @TypeConverter\n   fun fromList(value : List&lt;String&gt;) = Json.encodeToString(value)\n\n   @TypeConverter\n   fun toList(value: String) = Json.decodeFromString&lt;List&lt;String&gt;&gt;(value)\n}\n</code></pre>\n<ol start=\"3\">\n<li>Add your Converter class to your database class:</li>\n</ol>\n<pre><code>@TypeConverters(Converters::class)\nabstract class YourDatabase: RoomDatabase() {...}\n</code></pre>\n<p>And you're done!</p>\n<p>Extra resources:</p>\n<ul>\n<li><a href=\"https://developer.android.com/training/data-storage/room/referencing-data#type-converters\" rel=\"noreferrer\">Type Converters</a></li>\n<li><a href=\"https://kotlinlang.org/docs/reference/serialization.html\" rel=\"noreferrer\">Kotlin Serialization</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":373519,"reputation":7626,"user_id":2127950,"accept_rate":84,"display_name":"portfoliobuilder"},"score":1,"creation_date":1637256763,"post_id":68025457,"comment_id":123784015,"body_markdown":"This worked for me. Thanks @Caner","body":"This worked for me. Thanks @Caner"}],"tags":[],"owner":{"account_id":11562480,"reputation":6622,"user_id":8471798,"display_name":"canerkaseler"},"comment_count":1,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1623957939,"creation_date":1623957939,"answer_id":68025457,"question_id":44986626,"body_markdown":"**Kotlin Answer**\r\n\r\nYou need to do 3 things:\r\n\r\n1. Create Converters class.\r\n2. Add Converters class on Database.\r\n3. Just define what you want to use in Entity class.\r\n\r\n**Usage example step by step:**\r\n\r\nStep 1 :\r\n\r\n     class Converters {\r\n\r\n        @TypeConverter\r\n        fun listToJsonString(value: List&lt;YourModel&gt;?): String = Gson().toJson(value)\r\n\r\n        @TypeConverter\r\n        fun jsonStringToList(value: String) = Gson().fromJson(value, Array&lt;YourModel&gt;::class.java).toList()\r\n    }\r\n\r\nStep 2 :\r\n\r\n\r\n    @Database(entities = [YourEntity::class], version = 1)\r\n    @TypeConverters(Converters::class)\r\n    abstract class YourDatabase : RoomDatabase() {\r\n         abstract fun yourDao(): YourDao\r\n    }\r\n\r\n\r\nStep 3 :\r\n\r\n&gt; Note: You do **not** need to call functions of Converter which are ***listToJsonString()*** and ***jsonStringToList()***. They are using in background by *Room*. \r\n\r\n    @Entity(tableName = &quot;example_database_table&quot;) \r\n    data class YourEntity(\r\n      @PrimaryKey(autoGenerate = true) val id: Long = 0,\r\n      @ColumnInfo(name = &quot;your_model_list&quot;) var yourModelList: List&lt;YourModel&gt;,\r\n    )","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p><strong>Kotlin Answer</strong></p>\n<p>You need to do 3 things:</p>\n<ol>\n<li>Create Converters class.</li>\n<li>Add Converters class on Database.</li>\n<li>Just define what you want to use in Entity class.</li>\n</ol>\n<p><strong>Usage example step by step:</strong></p>\n<p>Step 1 :</p>\n<pre><code> class Converters {\n\n    @TypeConverter\n    fun listToJsonString(value: List&lt;YourModel&gt;?): String = Gson().toJson(value)\n\n    @TypeConverter\n    fun jsonStringToList(value: String) = Gson().fromJson(value, Array&lt;YourModel&gt;::class.java).toList()\n}\n</code></pre>\n<p>Step 2 :</p>\n<pre><code>@Database(entities = [YourEntity::class], version = 1)\n@TypeConverters(Converters::class)\nabstract class YourDatabase : RoomDatabase() {\n     abstract fun yourDao(): YourDao\n}\n</code></pre>\n<p>Step 3 :</p>\n<blockquote>\n<p>Note: You do <strong>not</strong> need to call functions of Converter which are <em><strong>listToJsonString()</strong></em> and <em><strong>jsonStringToList()</strong></em>. They are using in background by <em>Room</em>.</p>\n</blockquote>\n<pre><code>@Entity(tableName = &quot;example_database_table&quot;) \ndata class YourEntity(\n  @PrimaryKey(autoGenerate = true) val id: Long = 0,\n  @ColumnInfo(name = &quot;your_model_list&quot;) var yourModelList: List&lt;YourModel&gt;,\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23151047,"reputation":1,"user_id":17253062,"display_name":"M&#233;lanie Marliacy"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666084467,"creation_date":1666084467,"answer_id":74108480,"question_id":44986626,"body_markdown":"I wanted to store a List&lt;String&gt; containing photos URI in ROOM database . Because of special characters I was getting this error localized in my converter class, TypeConverters.class:\r\n\r\n    com.google.gson.stream.MalformedJsonException: Unterminated array at line 1 column 8 path $[1] \r\n\r\nThere was a problem in my simple converter for arrayList of String, in fact it was :\r\n\r\n    public static List&lt;String&gt; fromString(String value) {\r\n        Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() {\r\n        }.getType();\r\n        return new Gson().fromJson(value, listType);\r\n    }\r\n    \r\n    @TypeConverter\r\n    public static String fromArrayList(List&lt;String&gt; list) {\r\n        Gson gson = new Gson();\r\n        return gson.toJson(list);\r\n    }\r\n\r\nBy taking @Derrick Njeru comment back, I changed it for that it could take in consideration a String as &quot;https://images.app.goo.gl/jwhkhzhZVWrceQV67&quot; like this :\r\n\r\n        @TypeConverter\r\n    public List&lt;String&gt; gettingListFromString(String genreIds) {\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\r\n        String[] array = genreIds.split(&quot;,&quot;);\r\n        \r\n        for (String s : array) {\r\n            if (!s.isEmpty()) {\r\n                list.add(s);\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n\r\n    @TypeConverter\r\n    public String writingStringFromList(List&lt;String&gt; list) {\r\n        String genreIds = &quot;&quot;;\r\n        for (String i : list) {\r\n            genreIds += &quot;,&quot; + i;\r\n        }\r\n        return genreIds;\r\n    }\r\n\r\n","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>I wanted to store a List containing photos URI in ROOM database . Because of special characters I was getting this error localized in my converter class, TypeConverters.class:</p>\n<pre><code>com.google.gson.stream.MalformedJsonException: Unterminated array at line 1 column 8 path $[1] \n</code></pre>\n<p>There was a problem in my simple converter for arrayList of String, in fact it was :</p>\n<pre><code>public static List&lt;String&gt; fromString(String value) {\n    Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() {\n    }.getType();\n    return new Gson().fromJson(value, listType);\n}\n\n@TypeConverter\npublic static String fromArrayList(List&lt;String&gt; list) {\n    Gson gson = new Gson();\n    return gson.toJson(list);\n}\n</code></pre>\n<p>By taking @Derrick Njeru comment back, I changed it for that it could take in consideration a String as &quot;https://images.app.goo.gl/jwhkhzhZVWrceQV67&quot; like this :</p>\n<pre><code>    @TypeConverter\npublic List&lt;String&gt; gettingListFromString(String genreIds) {\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\n    String[] array = genreIds.split(&quot;,&quot;);\n    \n    for (String s : array) {\n        if (!s.isEmpty()) {\n            list.add(s);\n        }\n    }\n    return list;\n}\n\n@TypeConverter\npublic String writingStringFromList(List&lt;String&gt; list) {\n    String genreIds = &quot;&quot;;\n    for (String i : list) {\n        genreIds += &quot;,&quot; + i;\n    }\n    return genreIds;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":1,"creation_date":1691935556,"post_id":76135440,"comment_id":135555303,"body_markdown":"You assume the strings don&#39;t include your STRING_SEPARATOR.","body":"You assume the strings don&#39;t include your STRING_SEPARATOR."}],"tags":[],"owner":{"account_id":28299942,"reputation":43,"user_id":21638763,"display_name":"Anna M"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682759961,"creation_date":1682759961,"answer_id":76135440,"question_id":44986626,"body_markdown":"If you only want to save and retrieve `String` list, then I think there is no need for JSON serialization. \r\n\r\nUsing built-in functions are much simpler and **you can avoid reflection too.**\r\n\r\nKotlin code:\r\n\r\n    class Converter {\r\n\r\n        @TypeConverter\r\n        fun List&lt;String&gt;.toStringData() = this.joinToString(STRING_SEPARATOR)\r\n\r\n        @TypeConverter\r\n        fun String.toList() = this.split(STRING_SEPARATOR)\r\n    }\r\n\r\nJava code:\r\n\r\n    public class Converter {\r\n    \r\n        @TypeConverter\r\n        public static String[] toArray(String data) {\r\n            return data.split(STRING_SEPARATOR);\r\n        }\r\n    \r\n        @TypeConverter\r\n        public static String toString(String[] data) {\r\n            return String.join(STRING_SEPARATOR, data);\r\n        }\r\n    }","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>If you only want to save and retrieve <code>String</code> list, then I think there is no need for JSON serialization.</p>\n<p>Using built-in functions are much simpler and <strong>you can avoid reflection too.</strong></p>\n<p>Kotlin code:</p>\n<pre><code>class Converter {\n\n    @TypeConverter\n    fun List&lt;String&gt;.toStringData() = this.joinToString(STRING_SEPARATOR)\n\n    @TypeConverter\n    fun String.toList() = this.split(STRING_SEPARATOR)\n}\n</code></pre>\n<p>Java code:</p>\n<pre><code>public class Converter {\n\n    @TypeConverter\n    public static String[] toArray(String data) {\n        return data.split(STRING_SEPARATOR);\n    }\n\n    @TypeConverter\n    public static String toString(String[] data) {\n        return String.join(STRING_SEPARATOR, data);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4324594,"reputation":4993,"user_id":3531756,"accept_rate":91,"display_name":"Tushar Gogna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149947,"favorite_count":0,"down_vote_count":0,"up_vote_count":144,"accepted_answer_id":44986667,"answer_count":21,"score":144,"last_activity_date":1682759961,"creation_date":1499519687,"question_id":44986626,"body_markdown":"I just implemented Room for offline data saving. But in an Entity class, I am getting the following error:\r\n\r\n    Error:(27, 30) error: Cannot figure out how to save this field into database. You can consider adding a type converter for it.\r\n\r\nAnd the class is as following:\r\n    \r\n    @Entity(tableName = &quot;firstPageData&quot;)\r\n    public class MainActivityData {\r\n\r\n        @PrimaryKey\r\n        private String userId;\r\n\r\n        @ColumnInfo(name = &quot;item1_id&quot;)\r\n        private String itemOneId;\r\n\r\n        @ColumnInfo(name = &quot;item2_id&quot;)\r\n        private String itemTwoId;\r\n\r\n        // THIS IS CAUSING THE ERROR... BASICALLY IT ISN&#39;T READING ARRAYS\r\n        @ColumnInfo(name = &quot;mylist_array&quot;)\r\n        private ArrayList&lt;MyListItems&gt; myListItems;\r\n\r\n        public String getUserId() {\r\n            return userId;\r\n        }\r\n\r\n        public void setUserId(String userId) {\r\n            this.userId = userId;\r\n        }\r\n\r\n        public ArrayList&lt;MyListItems&gt; getMyListItems() {\r\n            return myListItems;\r\n        }\r\n\r\n        public void setCheckListItems(ArrayList&lt;MyListItems&gt; myListItems) {\r\n            this.myListItems = myListItems;\r\n        }\r\n\r\n    }\r\n\r\nSo basically I want to save the ArrayList in the database but I was not able to find anything relevant to it. Can you guide me regarding how to save an Array using Room?\r\n\r\nNOTE: MyListItems Pojo class contains 2 Strings (as of now)","title":"Android Room Database: How to handle Arraylist in an Entity?","body":"<p>I just implemented Room for offline data saving. But in an Entity class, I am getting the following error:</p>\n<pre><code>Error:(27, 30) error: Cannot figure out how to save this field into database. You can consider adding a type converter for it.\n</code></pre>\n<p>And the class is as following:</p>\n<pre><code>@Entity(tableName = &quot;firstPageData&quot;)\npublic class MainActivityData {\n\n    @PrimaryKey\n    private String userId;\n\n    @ColumnInfo(name = &quot;item1_id&quot;)\n    private String itemOneId;\n\n    @ColumnInfo(name = &quot;item2_id&quot;)\n    private String itemTwoId;\n\n    // THIS IS CAUSING THE ERROR... BASICALLY IT ISN'T READING ARRAYS\n    @ColumnInfo(name = &quot;mylist_array&quot;)\n    private ArrayList&lt;MyListItems&gt; myListItems;\n\n    public String getUserId() {\n        return userId;\n    }\n\n    public void setUserId(String userId) {\n        this.userId = userId;\n    }\n\n    public ArrayList&lt;MyListItems&gt; getMyListItems() {\n        return myListItems;\n    }\n\n    public void setCheckListItems(ArrayList&lt;MyListItems&gt; myListItems) {\n        this.myListItems = myListItems;\n    }\n\n}\n</code></pre>\n<p>So basically I want to save the ArrayList in the database but I was not able to find anything relevant to it. Can you guide me regarding how to save an Array using Room?</p>\n<p>NOTE: MyListItems Pojo class contains 2 Strings (as of now)</p>\n"},{"tags":["java","jsp","jakarta-ee","jsp-tags"],"comments":[{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1656634050,"post_id":72818682,"comment_id":128626845,"body_markdown":"can&#39;t you use expression language page=&quot;pages/${element.convertToLowercase()}&gt;.jsp&quot;?","body":"can&#39;t you use expression language page=&quot;pages/${element.convertToLowercase()}&gt;.jsp&quot;?"},{"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"score":0,"creation_date":1656639296,"post_id":72818682,"comment_id":128627557,"body_markdown":"Please try using &lt;% String elementPage = &quot;pages/&quot; + element.convertToLowercase() + &quot;.jsp&quot;;%&gt;\n&lt;jsp:include page=&quot;&lt;%=elementPage%&gt;&quot;&gt;&lt;/jsp:include&gt;","body":"Please try using &lt;% String elementPage = &quot;pages/&quot; + element.convertToLowercase() + &quot;.jsp&quot;;%&gt; &lt;jsp:include page=&quot;&lt;%=elementPage%&gt;&quot;&gt;&lt;/jsp:include&gt;"},{"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"score":0,"creation_date":1656674609,"post_id":72818682,"comment_id":128635660,"body_markdown":"@Kaneda I can&#39;t. The expression language is being ignored. The output string is `pages/.jsp`","body":"@Kaneda I can&#39;t. The expression language is being ignored. The output string is <code>pages&#47;.jsp</code>"},{"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"score":0,"creation_date":1656674763,"post_id":72818682,"comment_id":128635707,"body_markdown":"@rickz Thanks, this is similar to my workaround using a function that returns the entire string, but shouldn&#39;t be the actual goal.","body":"@rickz Thanks, this is similar to my workaround using a function that returns the entire string, but shouldn&#39;t be the actual goal."}],"answers":[{"tags":[],"owner":{"account_id":15673277,"reputation":59,"user_id":11309143,"display_name":"Shawn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759817,"creation_date":1682759817,"answer_id":76135426,"question_id":72818682,"body_markdown":"Your suspicion is right. You can simply build the url in a scriptlet tag before the include action. ","title":"Use jsp include tag with &quot;&lt;%= ...&quot; expression","body":"<p>Your suspicion is right. You can simply build the url in a scriptlet tag before the include action.</p>\n"}],"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682759817,"creation_date":1656604225,"question_id":72818682,"body_markdown":"Why is it not possible to combine a jsp include tag with an `&lt;%= ... %&gt;` expression?\r\n\r\n    &lt;jsp:include page=&quot;pages/&lt;%= element.convertToLowercase() %&gt;.jsp&quot;&gt;&lt;/jsp:include&gt;\r\nThe `element.convertToLowercase()` returns the page that should be displayed.\r\n\r\nInstead I&#39;m getting the error `Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits`.\r\n\r\nMy suspicion is that the `&lt;%=` expression is being red as part of the URL and not as an jsp expression.\r\n\r\nHow can this be implemented instead?\r\n\r\nFull stacktrace:\r\n\r\n&gt; java.lang.IllegalArgumentException: Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits\r\n\tat org.apache.tomcat.util.buf.UDecoder.URLDecode(UDecoder.java:431)\r\n\tat org.apache.catalina.core.ApplicationContext.getRequestDispatcher(ApplicationContext.java:429)\r\n\tat org.apache.catalina.core.ApplicationContextFacade.getRequestDispatcher(ApplicationContextFacade.java:227)\r\n\tat org.apache.catalina.connector.Request.getRequestDispatcher(Request.java:1417)\r\n\tat org.apache.catalina.connector.RequestFacade.getRequestDispatcher(RequestFacade.java:614)\r\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:952)\r\n\tat org.apache.jsp.index_jsp._jspService(index_jsp.java:285)\r\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:467)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:378)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:326)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:832)","title":"Use jsp include tag with &quot;&lt;%= ...&quot; expression","body":"<p>Why is it not possible to combine a jsp include tag with an <code>&lt;%= ... %&gt;</code> expression?</p>\n<pre><code>&lt;jsp:include page=&quot;pages/&lt;%= element.convertToLowercase() %&gt;.jsp&quot;&gt;&lt;/jsp:include&gt;\n</code></pre>\n<p>The <code>element.convertToLowercase()</code> returns the page that should be displayed.</p>\n<p>Instead I'm getting the error <code>Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits</code>.</p>\n<p>My suspicion is that the <code>&lt;%=</code> expression is being red as part of the URL and not as an jsp expression.</p>\n<p>How can this be implemented instead?</p>\n<p>Full stacktrace:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits\nat org.apache.tomcat.util.buf.UDecoder.URLDecode(UDecoder.java:431)\nat org.apache.catalina.core.ApplicationContext.getRequestDispatcher(ApplicationContext.java:429)\nat org.apache.catalina.core.ApplicationContextFacade.getRequestDispatcher(ApplicationContextFacade.java:227)\nat org.apache.catalina.connector.Request.getRequestDispatcher(Request.java:1417)\nat org.apache.catalina.connector.RequestFacade.getRequestDispatcher(RequestFacade.java:614)\nat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:952)\nat org.apache.jsp.index_jsp._jspService(index_jsp.java:285)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:467)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:378)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:326)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:832)</p>\n</blockquote>\n"},{"tags":["java","iterator","concurrentmodification"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1682607002,"post_id":76121770,"comment_id":134245467,"body_markdown":"`for (Integer x : ls)` is iterating over the list (using a second `Iterator`.) Inside the loop, the list is being modified by the first `Iterator`, that is, not by the second, so the second one is invalidated (used in the `for`)","body":"<code>for (Integer x : ls)</code> is iterating over the list (using a second <code>Iterator</code>.) Inside the loop, the list is being modified by the first <code>Iterator</code>, that is, not by the second, so the second one is invalidated (used in the <code>for</code>)"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1682607015,"post_id":76121770,"comment_id":134245471,"body_markdown":"You can&#39;t remove from a list while iterating over it, which is what you&#39;re doing.","body":"You can&#39;t remove from a list while iterating over it, which is what you&#39;re doing."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682607760,"post_id":76121770,"comment_id":134245686,"body_markdown":"[documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html) of `ArrayList`, I am assuming `ls` is one: &quot;*The iterators returned by this class&#39;s iterator and listIterator methods are fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator&#39;s own remove or add methods, the iterator will throw a ConcurrentModificationException.*&quot;","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\">documentation</a> of <code>ArrayList</code>, I am assuming <code>ls</code> is one: &quot;<i>The iterators returned by this class&#39;s iterator and listIterator methods are fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator&#39;s own remove or add methods, the iterator will throw a ConcurrentModificationException.</i>&quot;"},{"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"score":0,"creation_date":1682754493,"post_id":76121770,"comment_id":134268086,"body_markdown":"this is not in-place though. \n\n@Andy Turner has provided in-place purge algo below.","body":"this is not in-place though.   @Andy Turner has provided in-place purge algo below."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682607448,"creation_date":1682607144,"answer_id":76121810,"question_id":76121770,"body_markdown":"You have two iterators over `ls` here:\r\n\r\n* The one created explicitly via `ls.iterator()`;\r\n* The one created implicitly via `for (Integer x : ls)`.\r\n\r\nIf you call `remove()` on the first iterator, it invalidates the second iterator, meaning any invocations of `next()` on the second iterator cause (or are prone to causing) a `ConcurrentModificationException` to be thrown.\r\n\r\n---\r\n\r\nA possible way to do an in-place deduplication might be like this:\r\n\r\n```\r\nint dst = 0;\r\nfor (Integer x : ls) {\r\n  if (!ls.subList(0, dst).contains(x)) {\r\n    ls.set(dst++, x);\r\n  }\r\n}\r\nls.subList(dst, ls.size()).clear();\r\n```\r\n\r\nThis shifts elements that haven&#39;t been seen before to the left in the array; and then removes all other elements from the array afterwards.\r\n\r\nChanging the list in the loop doesn&#39;t result in a `ConcurrentModificationException` because there is no structural modification to the list.","title":"Iterator remove throws ConcurrentException","body":"<p>You have two iterators over <code>ls</code> here:</p>\n<ul>\n<li>The one created explicitly via <code>ls.iterator()</code>;</li>\n<li>The one created implicitly via <code>for (Integer x : ls)</code>.</li>\n</ul>\n<p>If you call <code>remove()</code> on the first iterator, it invalidates the second iterator, meaning any invocations of <code>next()</code> on the second iterator cause (or are prone to causing) a <code>ConcurrentModificationException</code> to be thrown.</p>\n<hr />\n<p>A possible way to do an in-place deduplication might be like this:</p>\n<pre><code>int dst = 0;\nfor (Integer x : ls) {\n  if (!ls.subList(0, dst).contains(x)) {\n    ls.set(dst++, x);\n  }\n}\nls.subList(dst, ls.size()).clear();\n</code></pre>\n<p>This shifts elements that haven't been seen before to the left in the array; and then removes all other elements from the array afterwards.</p>\n<p>Changing the list in the loop doesn't result in a <code>ConcurrentModificationException</code> because there is no structural modification to the list.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682609102,"creation_date":1682608588,"answer_id":76122044,"question_id":76121770,"body_markdown":"Here is another possibility that avoids a concurrent mod exception. To remove duplicates use a set.\r\n```\r\n List&lt;String&gt; list = new ArrayList&lt;&gt;(List.of(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;E&quot;));\r\n Set&lt;String&gt; set = new LinkedHashSet&lt;&gt;();\r\n set.addAll(list);\r\n System.out.println(set);\r\n```\r\nprints\r\n```\r\n[A, B, C, D, E]\r\n```\r\nNote: Any set could be used.  A linked hash set preserves insertion order.\r\n\r\n","title":"Iterator remove throws ConcurrentException","body":"<p>Here is another possibility that avoids a concurrent mod exception. To remove duplicates use a set.</p>\n<pre><code> List&lt;String&gt; list = new ArrayList&lt;&gt;(List.of(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;E&quot;));\n Set&lt;String&gt; set = new LinkedHashSet&lt;&gt;();\n set.addAll(list);\n System.out.println(set);\n</code></pre>\n<p>prints</p>\n<pre><code>[A, B, C, D, E]\n</code></pre>\n<p>Note: Any set could be used.  A linked hash set preserves insertion order.</p>\n"},{"tags":[],"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682611306,"creation_date":1682611306,"answer_id":76122463,"question_id":76121770,"body_markdown":"In order to look in to this problem we need to study how the `Java enhanced for loop` works internally. \r\n\r\nJava enhanced for loop is internally using a `Fail Fast Iterator` which uses an internal flag named `modCount` (This updats each time when ever the collection is modified) to track the structure of collection manipulated or not. If there is any change then it&#39;s throwing `ConcurrentModificationException`.\r\n\r\nPlease see the following synonym code for the enhanced for loop.\r\n\r\n   \r\n\r\n     List&lt;Integer&gt; ls = Arrays.asList(1,2,3);\r\n\r\n     for (Integer x : ls) {\r\n    \r\n     }\r\n\r\nSynonymous code with internal code structure\r\n \r\n\r\n    for (Iterator&lt;Integer&gt; itr = ls.iterator(); itr.hasNext();) {\r\n       Integer x = itr.next(); \r\n    }\r\n\r\nBecause of the above code structure, the enhanced for loop is not allowing to remove elements while iterating. \r\n\r\nEven though there is no explicit reference to the for iterator to call the remove() method, if remove() method is called on List then ConcurrentModificationException is firing.\r\n\r\nFinally, the reason for `ConcurrentModificationException` should be you are calling remove() method on the iterator `itr`, which works on the same list `ls` while invoking enhanced for loop related to same list `ls`. \r\n","title":"Iterator remove throws ConcurrentException","body":"<p>In order to look in to this problem we need to study how the <code>Java enhanced for loop</code> works internally.</p>\n<p>Java enhanced for loop is internally using a <code>Fail Fast Iterator</code> which uses an internal flag named <code>modCount</code> (This updats each time when ever the collection is modified) to track the structure of collection manipulated or not. If there is any change then it's throwing <code>ConcurrentModificationException</code>.</p>\n<p>Please see the following synonym code for the enhanced for loop.</p>\n<pre><code> List&lt;Integer&gt; ls = Arrays.asList(1,2,3);\n\n for (Integer x : ls) {\n\n }\n</code></pre>\n<p>Synonymous code with internal code structure</p>\n<pre><code>for (Iterator&lt;Integer&gt; itr = ls.iterator(); itr.hasNext();) {\n   Integer x = itr.next(); \n}\n</code></pre>\n<p>Because of the above code structure, the enhanced for loop is not allowing to remove elements while iterating.</p>\n<p>Even though there is no explicit reference to the for iterator to call the remove() method, if remove() method is called on List then ConcurrentModificationException is firing.</p>\n<p>Finally, the reason for <code>ConcurrentModificationException</code> should be you are calling remove() method on the iterator <code>itr</code>, which works on the same list <code>ls</code> while invoking enhanced for loop related to same list <code>ls</code>.</p>\n"},{"comments":[{"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"score":0,"creation_date":1682759499,"post_id":76135409,"comment_id":134268535,"body_markdown":"* implementing algo suggested by Andy Turner below.","body":"* implementing algo suggested by Andy Turner below."}],"tags":[],"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759449,"creation_date":1682759449,"answer_id":76135409,"question_id":76121770,"body_markdown":"There is one hiccup I ran into implementing this algo\r\n\r\npurgeInplace(Arrays.asList(1, 2, 3, 1)) \r\n\r\nthrows \r\n```\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n        at java.base/java.util.AbstractList.remove(AbstractList.java:169)\r\n        at java.base/java.util.AbstractList$Itr.remove(AbstractList.java:389)\r\n        at java.base/java.util.AbstractList.removeRange(AbstractList.java:600)\r\n        at java.base/java.util.AbstractList$SubList.removeRange(AbstractList.java:813)     \r\n        at java.base/java.util.AbstractList.clear(AbstractList.java:245)\r\n        at PurgeUtil.purgeInplace(PurgeUtil.java:25)\r\n        at PurgeUtil.main(PurgeUtil.java:15)\r\n```\r\n\r\nHowever, \r\n purgeInplace(new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 1)));\r\n\r\nworks fine. \r\n\r\nps. Couldn&#39;t put this under a comment because of word limit. ","title":"Iterator remove throws ConcurrentException","body":"<p>There is one hiccup I ran into implementing this algo</p>\n<p>purgeInplace(Arrays.asList(1, 2, 3, 1))</p>\n<p>throws</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\n        at java.base/java.util.AbstractList.remove(AbstractList.java:169)\n        at java.base/java.util.AbstractList$Itr.remove(AbstractList.java:389)\n        at java.base/java.util.AbstractList.removeRange(AbstractList.java:600)\n        at java.base/java.util.AbstractList$SubList.removeRange(AbstractList.java:813)     \n        at java.base/java.util.AbstractList.clear(AbstractList.java:245)\n        at PurgeUtil.purgeInplace(PurgeUtil.java:25)\n        at PurgeUtil.main(PurgeUtil.java:15)\n</code></pre>\n<p>However,\npurgeInplace(new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 1)));</p>\n<p>works fine.</p>\n<p>ps. Couldn't put this under a comment because of word limit.</p>\n"}],"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76121810,"answer_count":4,"score":1,"last_activity_date":1682759449,"creation_date":1682606908,"question_id":76121770,"body_markdown":"Was trying to implement in-place purge on a list.\r\n\r\n\r\n```\r\n        Iterator&lt;Integer&gt; itr = ls.iterator();\r\n        for (Integer x : ls) {\r\n            int count = 0;\r\n            while(itr.hasNext()){\r\n                if (itr.next().equals(x)) {\r\n                    count++;\r\n                    if (count &gt; 1) {\r\n                        itr.remove();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\nException in thread &quot;main&quot; java.util.ConcurrentModificationException \r\n\r\n\r\n\r\n```\r\n        Iterator&lt;Integer&gt; iterator = numbers.iterator();\r\n        while (iterator.hasNext()) {\r\n            if (iterator.next() == 1) {\r\n                iterator.remove(); // Doesn&#39;t throw exception\r\n            }\r\n        }\r\n```\r\n\r\nHowever, with just one loop thought it doesn&#39;t. Why ? \r\n\r\n\r\nwhat is the reasoning for this behavior","title":"Iterator remove throws ConcurrentException","body":"<p>Was trying to implement in-place purge on a list.</p>\n<pre><code>        Iterator&lt;Integer&gt; itr = ls.iterator();\n        for (Integer x : ls) {\n            int count = 0;\n            while(itr.hasNext()){\n                if (itr.next().equals(x)) {\n                    count++;\n                    if (count &gt; 1) {\n                        itr.remove();\n                    }\n                }\n            }\n        }\n</code></pre>\n<p>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException</p>\n<pre><code>        Iterator&lt;Integer&gt; iterator = numbers.iterator();\n        while (iterator.hasNext()) {\n            if (iterator.next() == 1) {\n                iterator.remove(); // Doesn't throw exception\n            }\n        }\n</code></pre>\n<p>However, with just one loop thought it doesn't. Why ?</p>\n<p>what is the reasoning for this behavior</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1682740422,"post_id":76133094,"comment_id":134267098,"body_markdown":"This is tantamount to asking &#39;can someone write me a tutorial about generics&#39; which is.. perhaps something along the lines of at least 100 pages. Well beyond what Stack Overflow is meant for.","body":"This is tantamount to asking &#39;can someone write me a tutorial about generics&#39; which is.. perhaps something along the lines of at least 100 pages. Well beyond what Stack Overflow is meant for."}],"answers":[{"comments":[{"owner":{"account_id":26359204,"reputation":65,"user_id":20015709,"display_name":"BinaryBee"},"score":0,"creation_date":1682949561,"post_id":76135374,"comment_id":134288579,"body_markdown":"Thanks for the detailed comment. You are correct and I should take more time in learning java generics and how it actually works.","body":"Thanks for the detailed comment. You are correct and I should take more time in learning java generics and how it actually works."}],"tags":[],"owner":{"account_id":4185076,"reputation":2839,"user_id":3429015,"display_name":"Danon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682759175,"creation_date":1682759175,"answer_id":76135374,"question_id":76133094,"body_markdown":"To answer the first part of your question, you should try and always used declared type `T` as it provides more secure types, and only use `?` as the last resort (or, when you exactly know what you&#39;re doing).\r\n\r\nTo answer the second part of your question, let me use your example:\r\n```java\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n```\r\n\r\nWhen declaring a class with generics, you can only declare generic types right between `&lt;&gt;` brackets of *that* class. So for `Base`, you can declare `T` right in `Base&lt;&gt;`. But for your second example, you can correctly declare `T` in `BaseMapper&lt;T&gt;`, but the second generic type (the one you tried to declare `S`) is no longer in the brackets of `BaseMapper`, it&#39;s in bracket of another class (a class, that&#39;s not being declared right now). In Java, there&#39;s a difference between declaring a class and using the class as a type. In your example, `Base&lt;? extends EntityInfo&gt;` is a class that&#39;s being *used* in declaration (similarly to how class `Integer` has to already exist when declaring `List&lt;Integer&gt;`). You might very well declare `BaseMapper` and use `Base&lt;&gt;` as its generic type, but that used `BaseMapper` will need to have the generic type specified. You tried to specify type `S`, but that type wasn&#39;t declared anywhere in the declaraton of `BaseMapper`.\r\n\r\nFor it to work, you would need:\r\n - Declare type `S` that extends `EntityInfo`\r\n - Declare type `S` that extends `EntityInfo&lt;S&gt;`\r\n\r\nSomething similar to this:\r\n\r\n```java\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\r\n```\r\n\r\nYour problem really reflects the lack of knowledge on how Java generics work.","title":"Question on Java generics type T vs WildCard","body":"<p>To answer the first part of your question, you should try and always used declared type <code>T</code> as it provides more secure types, and only use <code>?</code> as the last resort (or, when you exactly know what you're doing).</p>\n<p>To answer the second part of your question, let me use your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>When declaring a class with generics, you can only declare generic types right between <code>&lt;&gt;</code> brackets of <em>that</em> class. So for <code>Base</code>, you can declare <code>T</code> right in <code>Base&lt;&gt;</code>. But for your second example, you can correctly declare <code>T</code> in <code>BaseMapper&lt;T&gt;</code>, but the second generic type (the one you tried to declare <code>S</code>) is no longer in the brackets of <code>BaseMapper</code>, it's in bracket of another class (a class, that's not being declared right now). In Java, there's a difference between declaring a class and using the class as a type. In your example, <code>Base&lt;? extends EntityInfo&gt;</code> is a class that's being <em>used</em> in declaration (similarly to how class <code>Integer</code> has to already exist when declaring <code>List&lt;Integer&gt;</code>). You might very well declare <code>BaseMapper</code> and use <code>Base&lt;&gt;</code> as its generic type, but that used <code>BaseMapper</code> will need to have the generic type specified. You tried to specify type <code>S</code>, but that type wasn't declared anywhere in the declaraton of <code>BaseMapper</code>.</p>\n<p>For it to work, you would need:</p>\n<ul>\n<li>Declare type <code>S</code> that extends <code>EntityInfo</code></li>\n<li>Declare type <code>S</code> that extends <code>EntityInfo&lt;S&gt;</code></li>\n</ul>\n<p>Something similar to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\n</code></pre>\n<p>Your problem really reflects the lack of knowledge on how Java generics work.</p>\n"},{"tags":[],"owner":{"account_id":8433338,"reputation":20078,"user_id":6328256,"display_name":"Sash Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682759392,"creation_date":1682759392,"answer_id":76135403,"question_id":76133094,"body_markdown":"The key difference between using a wildcard and a specific type parameter is how Java handles generics during compilation.\r\n\r\nWhen you use the wildcard `?`, it represents an unknown type that extends the given bound. It allows any subtype of the given bound to be used, but the specific type information is lost. This is useful when you want to allow a wide range of types without specifying the exact type.\r\n\r\nHowever, when you use a specific type parameter, such as `S extends EntityInfo`, it signifies that you want to have a concrete type that extends `EntityInfo`. This allows you to use that type information within the class definition.\r\n\r\nIn the context of the code you provided:\r\n\r\n - The code compiles fine when you use `? extends EntityInfo` in the \r\n  `BaseMapper` class:\r\n\r\n    ```\r\n    public abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n    ```\r\n\r\n    This works because the type parameter `T extends Base` with an unknown \r\n    subtype of `EntityInfo`. So, when you create the `ImpMapper` class:\r\n\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n    ```  \r\n\r\n    `Imp` is a valid type, as it extends `Base&lt;Individual&gt;`, and `Individual` implements `EntityInfo`.\r\n - The code does not compile when you replace the wildcard with a specific type parameter:\r\n    ```\r\n    public abstract class BaseMapper&lt;T extends Base&lt;S extends EntityInfo&gt;&gt;{}\r\n    ```\r\n    This is because you are trying to declare a type parameter `S` within the bounds of another type parameter `T`. This is not valid syntax in Java. Instead, you should declare the type parameter separately:\r\n    ```\r\n    public abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\r\n    ```\r\n    Now, when you try to create the `ImpMapper` class:\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n    ```\r\n    You will still encounter a compilation error because `BaseMapper` expects two type parameters, but you only provided one (`Imp`). To fix this, provide both type parameters:\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Individual, Imp&gt;{}\r\n    ```\r\n    This will compile successfully since `Imp extends Base&lt;Individual&gt;`, and `Individual` implements `EntityInfo`.\r\n","title":"Question on Java generics type T vs WildCard","body":"<p>The key difference between using a wildcard and a specific type parameter is how Java handles generics during compilation.</p>\n<p>When you use the wildcard <code>?</code>, it represents an unknown type that extends the given bound. It allows any subtype of the given bound to be used, but the specific type information is lost. This is useful when you want to allow a wide range of types without specifying the exact type.</p>\n<p>However, when you use a specific type parameter, such as <code>S extends EntityInfo</code>, it signifies that you want to have a concrete type that extends <code>EntityInfo</code>. This allows you to use that type information within the class definition.</p>\n<p>In the context of the code you provided:</p>\n<ul>\n<li><p>The code compiles fine when you use <code>? extends EntityInfo</code> in the\n<code>BaseMapper</code> class:</p>\n<pre><code>public abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>This works because the type parameter <code>T extends Base</code> with an unknown\nsubtype of <code>EntityInfo</code>. So, when you create the <code>ImpMapper</code> class:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p><code>Imp</code> is a valid type, as it extends <code>Base&lt;Individual&gt;</code>, and <code>Individual</code> implements <code>EntityInfo</code>.</p>\n</li>\n<li><p>The code does not compile when you replace the wildcard with a specific type parameter:</p>\n<pre><code>public abstract class BaseMapper&lt;T extends Base&lt;S extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>This is because you are trying to declare a type parameter <code>S</code> within the bounds of another type parameter <code>T</code>. This is not valid syntax in Java. Instead, you should declare the type parameter separately:</p>\n<pre><code>public abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\n</code></pre>\n<p>Now, when you try to create the <code>ImpMapper</code> class:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p>You will still encounter a compilation error because <code>BaseMapper</code> expects two type parameters, but you only provided one (<code>Imp</code>). To fix this, provide both type parameters:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Individual, Imp&gt;{}\n</code></pre>\n<p>This will compile successfully since <code>Imp extends Base&lt;Individual&gt;</code>, and <code>Individual</code> implements <code>EntityInfo</code>.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":26359204,"reputation":65,"user_id":20015709,"display_name":"BinaryBee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76135403,"answer_count":2,"score":4,"last_activity_date":1682759392,"creation_date":1682713926,"question_id":76133094,"body_markdown":"I am a bit confused on how generic works, specially on when we should be using type `T` vs wildcard `?`.\r\n\r\nI have the following:\r\n\r\n```java\r\npublic interface EntityInfo {}\r\n\r\npublic class Individual implements EntityInfo {}\r\n\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic class Imp extends Base&lt;Individual&gt;{}\r\n\r\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n\r\npublic class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n```\r\n\r\nThis compiles fine. But if I change `BaseMapper`: from `? extends EntityInfo` to `S extends EntityInfo`, the compiler will complain:\r\n\r\n1. On BaseMapper: `Unexpected bound`\r\n2. On ImpMapper: `Type parameter &#39;Imp&#39; is not within its bound; should extend &#39;Base&lt;S&gt;&#39;`\r\n\r\nI am unsure how this works, why does wildcard work here and specific type will cause the compilation error?\r\n\r\nCould anyone help me understand/explain the above?","title":"Question on Java generics type T vs WildCard","body":"<p>I am a bit confused on how generic works, specially on when we should be using type <code>T</code> vs wildcard <code>?</code>.</p>\n<p>I have the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface EntityInfo {}\n\npublic class Individual implements EntityInfo {}\n\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic class Imp extends Base&lt;Individual&gt;{}\n\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n\npublic class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p>This compiles fine. But if I change <code>BaseMapper</code>: from <code>? extends EntityInfo</code> to <code>S extends EntityInfo</code>, the compiler will complain:</p>\n<ol>\n<li>On BaseMapper: <code>Unexpected bound</code></li>\n<li>On ImpMapper: <code>Type parameter 'Imp' is not within its bound; should extend 'Base&lt;S&gt;'</code></li>\n</ol>\n<p>I am unsure how this works, why does wildcard work here and specific type will cause the compilation error?</p>\n<p>Could anyone help me understand/explain the above?</p>\n"},{"tags":["java","jdi"],"answers":[{"tags":[],"owner":{"account_id":9080824,"reputation":319,"user_id":7397926,"display_name":"Linuxea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759157,"creation_date":1682759157,"answer_id":76135372,"question_id":76135113,"body_markdown":"Thanks god!I google and find a resolution from [https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/][1]\r\n\r\n\r\n  [1]: https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/","title":"A java program to debug another java program using JDI but receive nothing useful event","body":"<p>Thanks god!I google and find a resolution from <a href=\"https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/\" rel=\"nofollow noreferrer\">https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/</a></p>\n"}],"owner":{"account_id":9080824,"reputation":319,"user_id":7397926,"display_name":"Linuxea"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682759157,"creation_date":1682754709,"question_id":76135113,"body_markdown":"I have two class. One is debuggee and another one is debugger.\r\nI use debugger to debug debuggee.\r\nHere&#39;s my code:\r\n\r\nJDIExampleDebuggee\r\n```java\r\npackage com.linuxea;\r\n\r\npublic class JDIExampleDebuggee {\r\n\r\n  public static void main(String[] args) {\r\n    String jpda = &quot;Java Platform Debugger Architecture&quot;;\r\n    System.out.println(&quot;Hi Everyone, Welcome to &quot; + jpda); // add a break point here\r\n\r\n    String jdi = &quot;Java Debug Interface&quot;; // add a break point here and also stepping in here\r\n    String text = &quot;Today, we&#39;ll dive into &quot; + jdi;\r\n    System.out.println(text);\r\n  }\r\n}\r\n```\r\n\r\nJDIExampleDebugger\r\n```java\r\npackage com.linuxea;\r\n\r\nimport com.sun.jdi.AbsentInformationException;\r\nimport com.sun.jdi.Bootstrap;\r\nimport com.sun.jdi.ClassType;\r\nimport com.sun.jdi.IncompatibleThreadStateException;\r\nimport com.sun.jdi.LocalVariable;\r\nimport com.sun.jdi.Location;\r\nimport com.sun.jdi.StackFrame;\r\nimport com.sun.jdi.VMDisconnectedException;\r\nimport com.sun.jdi.Value;\r\nimport com.sun.jdi.VirtualMachine;\r\nimport com.sun.jdi.connect.Connector.Argument;\r\nimport com.sun.jdi.connect.LaunchingConnector;\r\nimport com.sun.jdi.event.BreakpointEvent;\r\nimport com.sun.jdi.event.ClassPrepareEvent;\r\nimport com.sun.jdi.event.Event;\r\nimport com.sun.jdi.event.EventSet;\r\nimport com.sun.jdi.event.LocatableEvent;\r\nimport com.sun.jdi.event.StepEvent;\r\nimport com.sun.jdi.request.BreakpointRequest;\r\nimport com.sun.jdi.request.ClassPrepareRequest;\r\nimport com.sun.jdi.request.StepRequest;\r\nimport java.util.Map;\r\n\r\npublic class JDIExampleDebugger&lt;T&gt; {\r\n\r\n  private Class&lt;T&gt; debugClass;\r\n  private int[] breakPointLines;\r\n\r\n  public static void main(String[] args) {\r\n\r\n    JDIExampleDebugger&lt;JDIExampleDebuggee&gt; debuggerInstance = new JDIExampleDebugger&lt;&gt;();\r\n    debuggerInstance.debugClass = JDIExampleDebuggee.class;\r\n    debuggerInstance.breakPointLines = new int[]{6};\r\n    VirtualMachine vm;\r\n    try {\r\n      vm = debuggerInstance.connectAndLaunchVM();\r\n      debuggerInstance.enableClassPrepareRequest(vm);\r\n      EventSet eventSet;\r\n      while ((eventSet = vm.eventQueue().remove()) != null) {\r\n        for (Event event : eventSet) {\r\n          System.out.println(event.getClass().getName());\r\n\r\n          if (event instanceof ClassPrepareEvent) {\r\n            debuggerInstance.setBreakPoints(vm, (ClassPrepareEvent) event);\r\n          }\r\n          if (event instanceof BreakpointEvent) {\r\n            debuggerInstance.displayVariables((BreakpointEvent) event);\r\n          }\r\n\r\n          if (event instanceof BreakpointEvent) {\r\n            debuggerInstance.enableStepRequest(vm, (BreakpointEvent) event);\r\n          }\r\n\r\n          if (event instanceof StepEvent) {\r\n            debuggerInstance.displayVariables((StepEvent) event);\r\n          }\r\n          vm.resume();\r\n        }\r\n      }\r\n    } catch (VMDisconnectedException e) {\r\n      System.out.println(&quot;Virtual Machine is disconnected.&quot;);\r\n      throw new RuntimeException(e);\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n\r\n  public void enableStepRequest(VirtualMachine vm, BreakpointEvent event) {\r\n    // enable step request for last break point\r\n    if (event.location().toString().\r\n        contains(debugClass.getName() + &quot;:&quot; + breakPointLines[breakPointLines.length - 1])) {\r\n      StepRequest stepRequest = vm.eventRequestManager()\r\n          .createStepRequest(event.thread(), StepRequest.STEP_LINE, StepRequest.STEP_OVER);\r\n      stepRequest.enable();\r\n    }\r\n  }\r\n\r\n  public VirtualMachine connectAndLaunchVM() throws Exception {\r\n\r\n    LaunchingConnector launchingConnector = Bootstrap.virtualMachineManager()\r\n        .defaultConnector();\r\n    Map&lt;String, Argument&gt; arguments = launchingConnector.defaultArguments();\r\n    arguments.get(&quot;main&quot;).setValue(debugClass.getName());\r\n    return launchingConnector.launch(arguments);\r\n  }\r\n\r\n  public void enableClassPrepareRequest(VirtualMachine vm) {\r\n    ClassPrepareRequest classPrepareRequest = vm.eventRequestManager().createClassPrepareRequest();\r\n    classPrepareRequest.addClassFilter(debugClass.getName());\r\n    classPrepareRequest.enable();\r\n  }\r\n\r\n  public void setBreakPoints(VirtualMachine vm, ClassPrepareEvent event)\r\n      throws AbsentInformationException {\r\n    ClassType classType = (ClassType) event.referenceType();\r\n    for (int lineNumber : breakPointLines) {\r\n      Location location = classType.locationsOfLine(lineNumber).get(0);\r\n      BreakpointRequest bpReq = vm.eventRequestManager().createBreakpointRequest(location);\r\n      bpReq.enable();\r\n    }\r\n  }\r\n\r\n  public void displayVariables(LocatableEvent event) throws IncompatibleThreadStateException,\r\n      AbsentInformationException {\r\n    StackFrame stackFrame = event.thread().frame(0);\r\n    if (stackFrame.location().toString().contains(debugClass.getName())) {\r\n      Map&lt;LocalVariable, Value&gt; visibleVariables = stackFrame\r\n          .getValues(stackFrame.visibleVariables());\r\n      System.out.println(&quot;Variables at &quot; + stackFrame.location().toString() + &quot; &gt; &quot;);\r\n      for (Map.Entry&lt;LocalVariable, Value&gt; entry : visibleVariables.entrySet()) {\r\n        System.out.println(entry.getKey().name() + &quot; = &quot; + entry.getValue());\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nThis is output:\r\n```bash\r\ncom.sun.tools.jdi.EventSetImpl$VMStartEventImpl\r\ncom.sun.tools.jdi.EventSetImpl$VMDeathEventImpl\r\ncom.sun.tools.jdi.EventSetImpl$VMDisconnectEventImpl\r\nVirtual Machine is disconnected.\r\nException in thread &quot;main&quot; java.lang.RuntimeException: com.sun.jdi.VMDisconnectedException\r\n\tat com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:64)\r\nCaused by: com.sun.jdi.VMDisconnectedException\r\n\tat com.sun.tools.jdi.EventQueueImpl.removeUnfiltered(EventQueueImpl.java:199)\r\n\tat com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:96)\r\n\tat com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:82)\r\n\tat com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:41)\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\n\r\n\r\nAs you can see there is nothing useful event. The target VM is start but stop immediately.\r\n\r\n\r\n\r\nI want to learn JDI using this tutorial.\r\nThe code is learn from [java-debug-interface](https://www.baeldung.com/java-debug-interface).\r\n\r\nI try many times but could not find out anything wrong.\r\n\r\nThe tutorial looks simple.","title":"A java program to debug another java program using JDI but receive nothing useful event","body":"<p>I have two class. One is debuggee and another one is debugger.\nI use debugger to debug debuggee.\nHere's my code:</p>\n<p>JDIExampleDebuggee</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.linuxea;\n\npublic class JDIExampleDebuggee {\n\n  public static void main(String[] args) {\n    String jpda = &quot;Java Platform Debugger Architecture&quot;;\n    System.out.println(&quot;Hi Everyone, Welcome to &quot; + jpda); // add a break point here\n\n    String jdi = &quot;Java Debug Interface&quot;; // add a break point here and also stepping in here\n    String text = &quot;Today, we'll dive into &quot; + jdi;\n    System.out.println(text);\n  }\n}\n</code></pre>\n<p>JDIExampleDebugger</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.linuxea;\n\nimport com.sun.jdi.AbsentInformationException;\nimport com.sun.jdi.Bootstrap;\nimport com.sun.jdi.ClassType;\nimport com.sun.jdi.IncompatibleThreadStateException;\nimport com.sun.jdi.LocalVariable;\nimport com.sun.jdi.Location;\nimport com.sun.jdi.StackFrame;\nimport com.sun.jdi.VMDisconnectedException;\nimport com.sun.jdi.Value;\nimport com.sun.jdi.VirtualMachine;\nimport com.sun.jdi.connect.Connector.Argument;\nimport com.sun.jdi.connect.LaunchingConnector;\nimport com.sun.jdi.event.BreakpointEvent;\nimport com.sun.jdi.event.ClassPrepareEvent;\nimport com.sun.jdi.event.Event;\nimport com.sun.jdi.event.EventSet;\nimport com.sun.jdi.event.LocatableEvent;\nimport com.sun.jdi.event.StepEvent;\nimport com.sun.jdi.request.BreakpointRequest;\nimport com.sun.jdi.request.ClassPrepareRequest;\nimport com.sun.jdi.request.StepRequest;\nimport java.util.Map;\n\npublic class JDIExampleDebugger&lt;T&gt; {\n\n  private Class&lt;T&gt; debugClass;\n  private int[] breakPointLines;\n\n  public static void main(String[] args) {\n\n    JDIExampleDebugger&lt;JDIExampleDebuggee&gt; debuggerInstance = new JDIExampleDebugger&lt;&gt;();\n    debuggerInstance.debugClass = JDIExampleDebuggee.class;\n    debuggerInstance.breakPointLines = new int[]{6};\n    VirtualMachine vm;\n    try {\n      vm = debuggerInstance.connectAndLaunchVM();\n      debuggerInstance.enableClassPrepareRequest(vm);\n      EventSet eventSet;\n      while ((eventSet = vm.eventQueue().remove()) != null) {\n        for (Event event : eventSet) {\n          System.out.println(event.getClass().getName());\n\n          if (event instanceof ClassPrepareEvent) {\n            debuggerInstance.setBreakPoints(vm, (ClassPrepareEvent) event);\n          }\n          if (event instanceof BreakpointEvent) {\n            debuggerInstance.displayVariables((BreakpointEvent) event);\n          }\n\n          if (event instanceof BreakpointEvent) {\n            debuggerInstance.enableStepRequest(vm, (BreakpointEvent) event);\n          }\n\n          if (event instanceof StepEvent) {\n            debuggerInstance.displayVariables((StepEvent) event);\n          }\n          vm.resume();\n        }\n      }\n    } catch (VMDisconnectedException e) {\n      System.out.println(&quot;Virtual Machine is disconnected.&quot;);\n      throw new RuntimeException(e);\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n\n  public void enableStepRequest(VirtualMachine vm, BreakpointEvent event) {\n    // enable step request for last break point\n    if (event.location().toString().\n        contains(debugClass.getName() + &quot;:&quot; + breakPointLines[breakPointLines.length - 1])) {\n      StepRequest stepRequest = vm.eventRequestManager()\n          .createStepRequest(event.thread(), StepRequest.STEP_LINE, StepRequest.STEP_OVER);\n      stepRequest.enable();\n    }\n  }\n\n  public VirtualMachine connectAndLaunchVM() throws Exception {\n\n    LaunchingConnector launchingConnector = Bootstrap.virtualMachineManager()\n        .defaultConnector();\n    Map&lt;String, Argument&gt; arguments = launchingConnector.defaultArguments();\n    arguments.get(&quot;main&quot;).setValue(debugClass.getName());\n    return launchingConnector.launch(arguments);\n  }\n\n  public void enableClassPrepareRequest(VirtualMachine vm) {\n    ClassPrepareRequest classPrepareRequest = vm.eventRequestManager().createClassPrepareRequest();\n    classPrepareRequest.addClassFilter(debugClass.getName());\n    classPrepareRequest.enable();\n  }\n\n  public void setBreakPoints(VirtualMachine vm, ClassPrepareEvent event)\n      throws AbsentInformationException {\n    ClassType classType = (ClassType) event.referenceType();\n    for (int lineNumber : breakPointLines) {\n      Location location = classType.locationsOfLine(lineNumber).get(0);\n      BreakpointRequest bpReq = vm.eventRequestManager().createBreakpointRequest(location);\n      bpReq.enable();\n    }\n  }\n\n  public void displayVariables(LocatableEvent event) throws IncompatibleThreadStateException,\n      AbsentInformationException {\n    StackFrame stackFrame = event.thread().frame(0);\n    if (stackFrame.location().toString().contains(debugClass.getName())) {\n      Map&lt;LocalVariable, Value&gt; visibleVariables = stackFrame\n          .getValues(stackFrame.visibleVariables());\n      System.out.println(&quot;Variables at &quot; + stackFrame.location().toString() + &quot; &gt; &quot;);\n      for (Map.Entry&lt;LocalVariable, Value&gt; entry : visibleVariables.entrySet()) {\n        System.out.println(entry.getKey().name() + &quot; = &quot; + entry.getValue());\n      }\n    }\n  }\n\n}\n</code></pre>\n<p>This is output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>com.sun.tools.jdi.EventSetImpl$VMStartEventImpl\ncom.sun.tools.jdi.EventSetImpl$VMDeathEventImpl\ncom.sun.tools.jdi.EventSetImpl$VMDisconnectEventImpl\nVirtual Machine is disconnected.\nException in thread &quot;main&quot; java.lang.RuntimeException: com.sun.jdi.VMDisconnectedException\n    at com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:64)\nCaused by: com.sun.jdi.VMDisconnectedException\n    at com.sun.tools.jdi.EventQueueImpl.removeUnfiltered(EventQueueImpl.java:199)\n    at com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:96)\n    at com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:82)\n    at com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:41)\n\nProcess finished with exit code 1\n\n</code></pre>\n<p>As you can see there is nothing useful event. The target VM is start but stop immediately.</p>\n<p>I want to learn JDI using this tutorial.\nThe code is learn from <a href=\"https://www.baeldung.com/java-debug-interface\" rel=\"nofollow noreferrer\">java-debug-interface</a>.</p>\n<p>I try many times but could not find out anything wrong.</p>\n<p>The tutorial looks simple.</p>\n"},{"tags":["java","multithreading","executorservice","countdownlatch","forkjoinpool"],"answers":[{"comments":[{"owner":{"account_id":146646,"reputation":2083,"user_id":357213,"accept_rate":20,"display_name":"yadab"},"score":0,"creation_date":1438782047,"post_id":31801147,"comment_id":51590331,"body_markdown":"awesome! Just a note, each of those models suits some different use cases that can be realized using the highlighted Java util classes judiciously.","body":"awesome! Just a note, each of those models suits some different use cases that can be realized using the highlighted Java util classes judiciously."}],"tags":[],"owner":{"account_id":6719,"reputation":8306,"user_id":11427,"display_name":"Aleksi Yrttiaho"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1438665176,"creation_date":1438665176,"answer_id":31801147,"question_id":31627441,"body_markdown":"An excellent question to which the answer might not be quite as satisfying. The concurrency models listed show some of the ways you might want to go about implementing an concurrent system. The API provides tools used to implementing any of these models. \r\n\r\nLets start with ExecutorService. It allows you to submit tasks to be executed in a non-blocking way. The ThreadPoolExecutor implementation then limits the maximum number of threads available. The ExecutorService does not require the task to perform the complete process as you might expect of a parallel worker. The task may be limited to specific part of the process and send a message upon completion that starts the next step in an assembly line. \r\n\r\nThe CountDownLatch and the ExecutorService provide a means to block until all workers have completed that may come in handy if a certain process has been divided to different concurrent sub-tasks. \r\n\r\nThe point of JMS is to provide a means for messaging between components. It does not enforce a specific model for concurrency. Queues and topics denote how a message is sent from a publisher to a subscriber. When you use queues the message is sent to exactly one subscriber. Topics on the other hand broadcast the message to all subscribers of the topic. \r\n\r\nSimilar behavior could be achieved within a single component by for example using the observer pattern. \r\n\r\nForkJoinPool is actually one implementation of ExecutorService (which might highlight the difficulty of matching a model and an implementation detail). It just happens to be optimized for working with large amount of small tasks. \r\n\r\nSummary: There are multiple ways to implement a certain concurrency model in the Java environment. The interfaces, classes and frameworks used in implementing a program may vary regardless of the concurrency model chosen. ","title":"Java support for three different concurrency models","body":"<p>An excellent question to which the answer might not be quite as satisfying. The concurrency models listed show some of the ways you might want to go about implementing an concurrent system. The API provides tools used to implementing any of these models. </p>\n\n<p>Lets start with ExecutorService. It allows you to submit tasks to be executed in a non-blocking way. The ThreadPoolExecutor implementation then limits the maximum number of threads available. The ExecutorService does not require the task to perform the complete process as you might expect of a parallel worker. The task may be limited to specific part of the process and send a message upon completion that starts the next step in an assembly line. </p>\n\n<p>The CountDownLatch and the ExecutorService provide a means to block until all workers have completed that may come in handy if a certain process has been divided to different concurrent sub-tasks. </p>\n\n<p>The point of JMS is to provide a means for messaging between components. It does not enforce a specific model for concurrency. Queues and topics denote how a message is sent from a publisher to a subscriber. When you use queues the message is sent to exactly one subscriber. Topics on the other hand broadcast the message to all subscribers of the topic. </p>\n\n<p>Similar behavior could be achieved within a single component by for example using the observer pattern. </p>\n\n<p>ForkJoinPool is actually one implementation of ExecutorService (which might highlight the difficulty of matching a model and an implementation detail). It just happens to be optimized for working with large amount of small tasks. </p>\n\n<p>Summary: There are multiple ways to implement a certain concurrency model in the Java environment. The interfaces, classes and frameworks used in implementing a program may vary regardless of the concurrency model chosen. </p>\n"},{"comments":[{"owner":{"account_id":3151238,"reputation":3086,"user_id":2664649,"accept_rate":60,"display_name":"Amey Jadiye"},"score":0,"creation_date":1444979275,"post_id":31806962,"comment_id":54137515,"body_markdown":"For functional parallelism, please check http://akka.io , best actor model based  framework built  for jvm.","body":"For functional parallelism, please check <a href=\"http://akka.io\" rel=\"nofollow noreferrer\">akka.io</a> , best actor model based  framework built  for jvm."},{"owner":{"account_id":3673238,"reputation":5567,"user_id":3059893,"accept_rate":45,"display_name":"JavaHopper"},"score":0,"creation_date":1470071216,"post_id":31806962,"comment_id":64786467,"body_markdown":"At the end of his tutorial, the author says &quot;Java EE just doesn&#39;t have the edge anymore, I feel&quot;. Is it really the case? Haven&#39;t these techniques been incorporated in Java EE yet? or Don&#39;t they have any plans to add in future?","body":"At the end of his tutorial, the author says &quot;Java EE just doesn&#39;t have the edge anymore, I feel&quot;. Is it really the case? Haven&#39;t these techniques been incorporated in Java EE yet? or Don&#39;t they have any plans to add in future?"}],"tags":[],"owner":{"account_id":668476,"reputation":18892,"user_id":504956,"accept_rate":69,"display_name":"V G"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1438761416,"creation_date":1438684419,"answer_id":31806962,"question_id":31627441,"body_markdown":"Each of those models says how the work is done/splitted from a general point of view, but when it comes to implementation, it really depends on your exact problem. Generally I see it like this:  \r\n\r\n1. **Parallel Workers**: a producer creates new jobs somewhere (e.g in a `BlockingQueue`) and many threads (via an `ExecutorService`) process those jobs in parallel. Of course, you could also use a `CountDownLatch`, but that means you want to trigger an action after exactly `N` subproblems have been processed (e.g you know your big problem may be split in `N` smaller problems, check [the second example here][1]).\r\n2. **Assembly Line**: for every intermediate step, you have a `BlockingQueue` and one `Thread` or an `ExecutorService`. On each step the jobs are taken from one `BlickingQueue` and put in the next one, to be processed further. To your idea with JMS: JMS is there to connect distributed components and is part of the Java EE and was not thought to be used in a high concurrent context (messages are kept usually on the hard disk, before being processed).\r\n3. **Functional Parallelism**: `ForkJoinPool` is a good example on how you could implement this.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html","title":"Java support for three different concurrency models","body":"<p>Each of those models says how the work is done/splitted from a general point of view, but when it comes to implementation, it really depends on your exact problem. Generally I see it like this:  </p>\n\n<ol>\n<li><strong>Parallel Workers</strong>: a producer creates new jobs somewhere (e.g in a <code>BlockingQueue</code>) and many threads (via an <code>ExecutorService</code>) process those jobs in parallel. Of course, you could also use a <code>CountDownLatch</code>, but that means you want to trigger an action after exactly <code>N</code> subproblems have been processed (e.g you know your big problem may be split in <code>N</code> smaller problems, check <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">the second example here</a>).</li>\n<li><strong>Assembly Line</strong>: for every intermediate step, you have a <code>BlockingQueue</code> and one <code>Thread</code> or an <code>ExecutorService</code>. On each step the jobs are taken from one <code>BlickingQueue</code> and put in the next one, to be processed further. To your idea with JMS: JMS is there to connect distributed components and is part of the Java EE and was not thought to be used in a high concurrent context (messages are kept usually on the hard disk, before being processed).</li>\n<li><strong>Functional Parallelism</strong>: <code>ForkJoinPool</code> is a good example on how you could implement this.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17543100,"reputation":129,"user_id":12724927,"display_name":"Mohan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663598832,"creation_date":1663598832,"answer_id":73775280,"question_id":31627441,"body_markdown":"Actor model is another example for an Assembly line. Ex: akka","title":"Java support for three different concurrency models","body":"<p>Actor model is another example for an Assembly line. Ex: akka</p>\n"}],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4066,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":31806962,"answer_count":3,"score":28,"last_activity_date":1682758354,"creation_date":1437834268,"question_id":31627441,"body_markdown":"I am going through different concurrency model in multi-threading environment (http://tutorials.jenkov.com/java-concurrency/concurrency-models.html)\r\n\r\n*The article highlights about **three concurrency** models*:\r\n\r\n&gt; 1. **Parallel Workers**\r\n&gt; \r\n&gt;  The first concurrency model is what I call the parallel worker model.\r\n&gt; Incoming jobs are assigned to different **workers**.\r\n&gt; \r\n&gt; 2. **Assembly Line**\r\n&gt; \r\n&gt;  The workers are organized like **workers** at an assembly line in a\r\n&gt; factory. Each worker only performs a part of the full job. When that\r\n&gt; part is finished the worker forwards the job to the next worker.\r\n&gt; \r\n&gt;  Each worker is running in its own thread, and shares no state with\r\n&gt; other workers. This is also sometimes referred to as a shared nothing\r\n&gt; concurrency model.\r\n&gt; \r\n&gt; 3. **Functional Parallelism**\r\n&gt; \r\n&gt;  The basic idea of functional parallelism is that you implement your\r\n&gt; program using function calls. Functions can be seen as &quot;**agents**&quot; or\r\n&gt; &quot;**actors**&quot; that send messages to each other, just like in the\r\n&gt; assembly line concurrency model (AKA reactive or event driven\r\n&gt; systems). When one function calls another, that is similar to sending\r\n&gt; a message.\r\n\r\nNow I want to map java API support for these three concepts\r\n\r\n1. **Parallel Workers** : Is it [ExecutorService][1],[ThreadPoolExecutor][2], [CountDownLatch][3] API?\r\n\r\n2. **Assembly Line** : Sending an event to messaging system like **JMS** &amp; using messaging concepts of **Queues &amp; Topics**. \r\n\r\n3. **Functional Parallelism**: [ForkJoinPool][4] to some extent &amp; java 8 streams. ForkJoin pool is easy to understand compared to streams. \r\n\r\nAm I correct in mapping these concurrency models? If not please correct me.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\r\n  [2]: http://ps://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html","title":"Java support for three different concurrency models","body":"<p>I am going through different concurrency model in multi-threading environment (<a href=\"http://tutorials.jenkov.com/java-concurrency/concurrency-models.html\" rel=\"nofollow noreferrer\">http://tutorials.jenkov.com/java-concurrency/concurrency-models.html</a>)</p>\n<p><em>The article highlights about <strong>three concurrency</strong> models</em>:</p>\n<blockquote>\n<ol>\n<li><strong>Parallel Workers</strong></li>\n</ol>\n<p>The first concurrency model is what I call the parallel worker model.\nIncoming jobs are assigned to different <strong>workers</strong>.</p>\n<ol start=\"2\">\n<li><strong>Assembly Line</strong></li>\n</ol>\n<p>The workers are organized like <strong>workers</strong> at an assembly line in a\nfactory. Each worker only performs a part of the full job. When that\npart is finished the worker forwards the job to the next worker.</p>\n<p>Each worker is running in its own thread, and shares no state with\nother workers. This is also sometimes referred to as a shared nothing\nconcurrency model.</p>\n<ol start=\"3\">\n<li><strong>Functional Parallelism</strong></li>\n</ol>\n<p>The basic idea of functional parallelism is that you implement your\nprogram using function calls. Functions can be seen as &quot;<strong>agents</strong>&quot; or\n&quot;<strong>actors</strong>&quot; that send messages to each other, just like in the\nassembly line concurrency model (AKA reactive or event driven\nsystems). When one function calls another, that is similar to sending\na message.</p>\n</blockquote>\n<p>Now I want to map java API support for these three concepts</p>\n<ol>\n<li><p><strong>Parallel Workers</strong> : Is it <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a>,<a href=\"http://ps://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a> API?</p>\n</li>\n<li><p><strong>Assembly Line</strong> : Sending an event to messaging system like <strong>JMS</strong> &amp; using messaging concepts of <strong>Queues &amp; Topics</strong>.</p>\n</li>\n<li><p><strong>Functional Parallelism</strong>: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">ForkJoinPool</a> to some extent &amp; java 8 streams. ForkJoin pool is easy to understand compared to streams.</p>\n</li>\n</ol>\n<p>Am I correct in mapping these concurrency models? If not please correct me.</p>\n"},{"tags":["java","apache-spark","gson"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1682584021,"post_id":76118146,"comment_id":134239872,"body_markdown":"What I would try to do is to parse data directly from the request stream using one of the available JSON streaming APIs and transforming it into the desired format on the fly; if you could stream the result too that would be even better for the memory footprint of the application. For reading JSON in a streaming way see e.g. [this (Jackson)](https://www.baeldung.com/jackson-streaming-api) and [this (JSONP)](https://javaee.github.io/tutorial/jsonp004.html).","body":"What I would try to do is to parse data directly from the request stream using one of the available JSON streaming APIs and transforming it into the desired format on the fly; if you could stream the result too that would be even better for the memory footprint of the application. For reading JSON in a streaming way see e.g. <a href=\"https://www.baeldung.com/jackson-streaming-api\" rel=\"nofollow noreferrer\">this (Jackson)</a> and <a href=\"https://javaee.github.io/tutorial/jsonp004.html\" rel=\"nofollow noreferrer\">this (JSONP)</a>."},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1682584660,"post_id":76118146,"comment_id":134240006,"body_markdown":"This piece is going to fetch json files that are typically less than 1.5Kb of data a couple times a month, so I am not too concerned with memory footprint or performance. I can indeed get the `data` field from the stream directly, I will modify my code for this. Still not sure about the conversion to spark though","body":"This piece is going to fetch json files that are typically less than 1.5Kb of data a couple times a month, so I am not too concerned with memory footprint or performance. I can indeed get the <code>data</code> field from the stream directly, I will modify my code for this. Still not sure about the conversion to spark though"}],"answers":[{"comments":[{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1682698949,"post_id":76122362,"comment_id":134261852,"body_markdown":"Thanks for the super clear explanation. I will try this as soon as I come back from holidays and keep you posted","body":"Thanks for the super clear explanation. I will try this as soon as I come back from holidays and keep you posted"}],"tags":[],"owner":{"account_id":24158120,"reputation":120,"user_id":18122075,"display_name":"Shah"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682758157,"creation_date":1682610600,"answer_id":76122362,"question_id":76118146,"body_markdown":"So i am trying to solve(scala language) by just by load json data like\r\n\r\n    val df = spark.read.format(&quot;json&quot;).option(&quot;multiline&quot;,&quot;True&quot;).load(&quot;path&quot;)\r\n    \r\n    df.show()\r\n\r\n    +--------------------+----+----------+-------+\r\n    |                data|name|uploadDate|version|\r\n    +--------------------+----+----------+-------+\r\n    |[[123, 4, ], [456...| foo|2023-04-17|      1|\r\n    +--------------------+----+----------+-------+\r\n\r\n    df.printSchema()\r\n    root\r\n     |-- data: array (nullable = true)\r\n     |    |-- element: struct (containsNull = true)\r\n     |    |    |-- abc: string (nullable = true)\r\n     |    |    |-- alpha: string (nullable = true)\r\n     |    |    |-- xyz: string (nullable = true)\r\n     |-- name: string (nullable = true)\r\n     |-- uploadDate: string (nullable = true)\r\n     |-- version: long (nullable = true)\r\n\r\nthat data will be show as dataset\r\nbut you can explode the data in familiar. so\r\n   \r\n\r\n     val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;,&quot;name&quot;,&quot;version&quot;,&quot;uploadDate) \r\n        df1.show()\r\n\r\nOutput will be look like this \r\n\r\n    +---+-----+---+----+----------+-------+\r\n    |abc|alpha|xyz|name|uploadDate|version|\r\n    +---+-----+---+----+----------+-------+\r\n    |123|    4|   | foo|2023-04-17|      1|\r\n    |456|    1|   | foo|2023-04-17|      1|\r\n    |679|    2|   | foo|2023-04-17|      1|\r\n    |890|    5|   | foo|2023-04-17|      1|\r\n    +---+-----+---+----+----------+-------+\r\nif you dont want to add extra column so you can modify the code like\r\n\r\n    val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;) \r\n        df1.show()\r\n\r\nOutput will be as you want\r\n\r\n    +---+-----+---+\r\n    |abc|alpha|xyz|\r\n    +---+-----+---+\r\n    |123|    4|   |\r\n    |456|    1|   |\r\n    |679|    2|   |\r\n    |890|    5|   |\r\n    +---+-----+---+\r\n\r\nin java language through\r\n\r\n    import static org.apache.spark.sql.functions.*;\r\n    \r\n    // Assuming the input DataFrame is named &quot;df&quot;\r\n    DataFrame df1 = df.withColumn(&quot;data&quot;, explode(col(&quot;data&quot;)))\r\n                      .select(&quot;data.*&quot;);\r\n    df1.show();\r\n\r\n","title":"Convert JsonArray into Spark Dataset&lt;Row&gt; without an intermediate pojo","body":"<p>So i am trying to solve(scala language) by just by load json data like</p>\n<pre><code>val df = spark.read.format(&quot;json&quot;).option(&quot;multiline&quot;,&quot;True&quot;).load(&quot;path&quot;)\n\ndf.show()\n\n+--------------------+----+----------+-------+\n|                data|name|uploadDate|version|\n+--------------------+----+----------+-------+\n|[[123, 4, ], [456...| foo|2023-04-17|      1|\n+--------------------+----+----------+-------+\n\ndf.printSchema()\nroot\n |-- data: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- abc: string (nullable = true)\n |    |    |-- alpha: string (nullable = true)\n |    |    |-- xyz: string (nullable = true)\n |-- name: string (nullable = true)\n |-- uploadDate: string (nullable = true)\n |-- version: long (nullable = true)\n</code></pre>\n<p>that data will be show as dataset\nbut you can explode the data in familiar. so</p>\n<pre><code> val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;,&quot;name&quot;,&quot;version&quot;,&quot;uploadDate) \n    df1.show()\n</code></pre>\n<p>Output will be look like this</p>\n<pre><code>+---+-----+---+----+----------+-------+\n|abc|alpha|xyz|name|uploadDate|version|\n+---+-----+---+----+----------+-------+\n|123|    4|   | foo|2023-04-17|      1|\n|456|    1|   | foo|2023-04-17|      1|\n|679|    2|   | foo|2023-04-17|      1|\n|890|    5|   | foo|2023-04-17|      1|\n+---+-----+---+----+----------+-------+\n</code></pre>\n<p>if you dont want to add extra column so you can modify the code like</p>\n<pre><code>val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;) \n    df1.show()\n</code></pre>\n<p>Output will be as you want</p>\n<pre><code>+---+-----+---+\n|abc|alpha|xyz|\n+---+-----+---+\n|123|    4|   |\n|456|    1|   |\n|679|    2|   |\n|890|    5|   |\n+---+-----+---+\n</code></pre>\n<p>in java language through</p>\n<pre><code>import static org.apache.spark.sql.functions.*;\n\n// Assuming the input DataFrame is named &quot;df&quot;\nDataFrame df1 = df.withColumn(&quot;data&quot;, explode(col(&quot;data&quot;)))\n                  .select(&quot;data.*&quot;);\ndf1.show();\n</code></pre>\n"}],"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76122362,"answer_count":1,"score":1,"last_activity_date":1682758157,"creation_date":1682582891,"question_id":76118146,"body_markdown":"From a http call I receive a Json with the following format \r\n\r\n    {\r\n      &quot;name&quot;: &quot;foo&quot;,\r\n      &quot;version&quot;: 1,\r\n      &quot;uploadDate&quot;: &quot;2023-04-17&quot;,\r\n      &quot;data&quot;: [\r\n        {\r\n          &quot;abc&quot;: &quot;123&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;4&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;456&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;1&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;679&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;2&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;890&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;5&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n\r\nI would like to extract the `data` element, turn it into a `Dataset&lt;Row&gt;` and persist it to a parquet format file.\r\n\r\nIf I call this json String `responseBody`, I&#39;m extracting the `data` element with \r\n\r\n```\r\n  JsonObject responseBodyObject = new JsonParser().parse(responseBody).getAsJsonObject();\r\n  String dataString = new Gson().toJson(responseBodyObject.get(&quot;data&quot;));\r\n```\r\n\r\nIt already seems a bit wasteful to me to get the string to object to string again. I&#39;m doing this because I will feed it to `spark.read().json(string)`.\r\n\r\nMy end goal is to convert `data` into a Spark `Dataset&lt;Row&gt;` with the following structure :\r\n\r\n    | abc | xyz | alpha |\r\n    ---------------------\r\n    | 123 |     | 4     |\r\n    | 456 |     | 1     |\r\n    | 679 |     | 2     |\r\n    | 890 |     | 5     |\r\n\r\n\r\nIs it possible to do it without creating a POJO object that match the objects in the json list ? Can I just work with a JsonElement or JsonArray ? I would rather avoid making a new type for each http endpoint (don&#39;t want to change that code everytime the endpoint change the structure, as the paint isn&#39;t quite dry yet on that side), and I&#39;m going to immediately write that Dataset to a parquet file anyway, I&#39;m not going to do any manipulation of those data. So I felt like a vague type like Row was good enough.\r\n\r\nI am not very familiar with spark, how would you go about this ?\r\n\r\nEdit : grammar + a bit of extra info about why I don&#39;t want a POJO","title":"Convert JsonArray into Spark Dataset&lt;Row&gt; without an intermediate pojo","body":"<p>From a http call I receive a Json with the following format</p>\n<pre><code>{\n  &quot;name&quot;: &quot;foo&quot;,\n  &quot;version&quot;: 1,\n  &quot;uploadDate&quot;: &quot;2023-04-17&quot;,\n  &quot;data&quot;: [\n    {\n      &quot;abc&quot;: &quot;123&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;4&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;456&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;1&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;679&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;2&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;890&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;5&quot;\n    }\n  ]\n}\n</code></pre>\n<p>I would like to extract the <code>data</code> element, turn it into a <code>Dataset&lt;Row&gt;</code> and persist it to a parquet format file.</p>\n<p>If I call this json String <code>responseBody</code>, I'm extracting the <code>data</code> element with</p>\n<pre><code>  JsonObject responseBodyObject = new JsonParser().parse(responseBody).getAsJsonObject();\n  String dataString = new Gson().toJson(responseBodyObject.get(&quot;data&quot;));\n</code></pre>\n<p>It already seems a bit wasteful to me to get the string to object to string again. I'm doing this because I will feed it to <code>spark.read().json(string)</code>.</p>\n<p>My end goal is to convert <code>data</code> into a Spark <code>Dataset&lt;Row&gt;</code> with the following structure :</p>\n<pre><code>| abc | xyz | alpha |\n---------------------\n| 123 |     | 4     |\n| 456 |     | 1     |\n| 679 |     | 2     |\n| 890 |     | 5     |\n</code></pre>\n<p>Is it possible to do it without creating a POJO object that match the objects in the json list ? Can I just work with a JsonElement or JsonArray ? I would rather avoid making a new type for each http endpoint (don't want to change that code everytime the endpoint change the structure, as the paint isn't quite dry yet on that side), and I'm going to immediately write that Dataset to a parquet file anyway, I'm not going to do any manipulation of those data. So I felt like a vague type like Row was good enough.</p>\n<p>I am not very familiar with spark, how would you go about this ?</p>\n<p>Edit : grammar + a bit of extra info about why I don't want a POJO</p>\n"},{"tags":["java","android","automation","appium-android"],"comments":[{"owner":{"account_id":21375708,"reputation":51,"user_id":15742475,"display_name":"hhhameem"},"score":1,"creation_date":1681025936,"post_id":75968871,"comment_id":133990700,"body_markdown":"can you attach some screenshots of the error this code generates?","body":"can you attach some screenshots of the error this code generates?"},{"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"score":0,"creation_date":1681114988,"post_id":75968871,"comment_id":134000350,"body_markdown":"Here is the screenshort take a look https://imgur.com/9K4cYgN","body":"Here is the screenshort take a look <a href=\"https://imgur.com/9K4cYgN\" rel=\"nofollow noreferrer\">imgur.com/9K4cYgN</a>"}],"answers":[{"comments":[{"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"score":0,"creation_date":1681394309,"post_id":76002704,"comment_id":134051844,"body_markdown":"This Capabilities also showing same error","body":"This Capabilities also showing same error"}],"tags":[],"owner":{"account_id":20459749,"reputation":33,"user_id":15012652,"display_name":"Arun"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681370645,"creation_date":1681370645,"answer_id":76002704,"question_id":75968871,"body_markdown":"Try these capabilities:\r\n\r\n    DesiredCapabilities capabilities = new DesiredCapabilities();\r\n    capabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;9.0&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;OPPO A31&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.AUTOMATION_NAME, &quot;UIAutomator2&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.BROWSER_NAME, &quot;Chrome&quot;)\r\n\r\n","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>Try these capabilities:</p>\n<pre><code>DesiredCapabilities capabilities = new DesiredCapabilities();\ncapabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\ncapabilities.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;9.0&quot;);\ncapabilities.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;OPPO A31&quot;);\ncapabilities.setCapability(MobileCapabilityType.AUTOMATION_NAME, &quot;UIAutomator2&quot;);\ncapabilities.setCapability(MobileCapabilityType.BROWSER_NAME, &quot;Chrome&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682757532,"creation_date":1682757532,"answer_id":76135279,"question_id":75968871,"body_markdown":"The Capabilities cap.setCapability(&quot;noReset&quot;, true); it should be as noreset\r\nthe only the it will skip that and move to automation \r\n\r\n\r\npublic static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\r\n\r\n\tDesiredCapabilities cap = new DesiredCapabilities();\r\n\r\n\tcap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\tcap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\r\n\tcap.setCapability(&quot;noReset&quot;, true);\r\n\tcap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\r\n\tcap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\r\n\tcap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\r\n\tcap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\r\n\tcap.setCapability(&quot;unicodeKeyboard&quot;, true);\r\n\tcap.setCapability(&quot;resetKeyboard&quot;, true);\r\n\r\n\tURL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\r\n\tdriver = new AndroidDriver(url, cap);\r\n\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\r\n\tsrcbar.sendKeys(&quot;Flipkart &quot;);\r\n\tActions action = new Actions(driver);\r\n\taction.sendKeys(Keys.ENTER).perform();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tWebElement flpsrc = driver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\r\n\tflpsrc.sendKeys(&quot;IPhone&quot;);\r\n\tThread.sleep(3000);\r\n\tActions a = new Actions(driver);\r\n\ta.sendKeys(Keys.ENTER).perform();\r\n}","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>The Capabilities cap.setCapability(&quot;noReset&quot;, true); it should be as noreset\nthe only the it will skip that and move to automation</p>\n<p>public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {</p>\n<pre><code>DesiredCapabilities cap = new DesiredCapabilities();\n\ncap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\ncap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\ncap.setCapability(&quot;noReset&quot;, true);\ncap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\ncap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\ncap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\ncap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\ncap.setCapability(&quot;unicodeKeyboard&quot;, true);\ncap.setCapability(&quot;resetKeyboard&quot;, true);\n\nURL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\ndriver = new AndroidDriver(url, cap);\n\ndriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\nThread.sleep(3000);\ndriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\nThread.sleep(3000);\nWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\nsrcbar.sendKeys(&quot;Flipkart &quot;);\nActions action = new Actions(driver);\naction.sendKeys(Keys.ENTER).perform();\nThread.sleep(3000);\ndriver.findElement(By.xpath(\n        &quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\n        .click();\nThread.sleep(6000);\ndriver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\n        .click();\nThread.sleep(6000);\nWebElement flpsrc = driver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\nflpsrc.sendKeys(&quot;IPhone&quot;);\nThread.sleep(3000);\nActions a = new Actions(driver);\na.sendKeys(Keys.ENTER).perform();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682757532,"creation_date":1681017056,"question_id":75968871,"body_markdown":"Here is the Code is there any method to run this code:\r\n\r\n    public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\r\n\r\n    \tDesiredCapabilities cap = new DesiredCapabilities();\r\n\r\n\t    cap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\t    cap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\r\n\t    cap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\r\n\t    cap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\r\n\t    cap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\r\n\t    cap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\r\n\t    cap.setCapability(&quot;unicodeKeyboard&quot;, true);\r\n\t    cap.setCapability(&quot;resetKeyboard&quot;, true);\r\n\r\n\t    URL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\r\n\t    driver = new AndroidDriver(url, cap);\r\n\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\r\n\t    Thread.sleep(3000);\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\r\n\tsrcbar.sendKeys(&quot;Flipkart &quot;);\r\n\tActions action = new Actions(driver);\r\n\taction.sendKeys(Keys.ENTER).perform();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tWebElement flpsrc = driver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\r\n\tflpsrc.sendKeys(&quot;IPhone&quot;);\r\n\tThread.sleep(3000);\r\n\tActions a = new Actions(driver);\r\n\ta.sendKeys(Keys.ENTER).perform();\r\n    }\r\n\r\nThe DesiredCapabilities are given correctly but the code is not working.","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>Here is the Code is there any method to run this code:</p>\n<pre><code>public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\n\n    DesiredCapabilities cap = new DesiredCapabilities();\n\n    cap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n    cap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\n    cap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\n    cap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\n    cap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\n    cap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\n    cap.setCapability(&quot;unicodeKeyboard&quot;, true);\n    cap.setCapability(&quot;resetKeyboard&quot;, true);\n\n    URL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\n    driver = new AndroidDriver(url, cap);\n\ndriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\n    Thread.sleep(3000);\ndriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\nThread.sleep(3000);\nWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\nsrcbar.sendKeys(&quot;Flipkart &quot;);\nActions action = new Actions(driver);\naction.sendKeys(Keys.ENTER).perform();\nThread.sleep(3000);\ndriver.findElement(By.xpath(\n        &quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\n        .click();\nThread.sleep(6000);\ndriver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\n        .click();\nThread.sleep(6000);\nWebElement flpsrc = driver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\nflpsrc.sendKeys(&quot;IPhone&quot;);\nThread.sleep(3000);\nActions a = new Actions(driver);\na.sendKeys(Keys.ENTER).perform();\n}\n</code></pre>\n<p>The DesiredCapabilities are given correctly but the code is not working.</p>\n"},{"tags":["java","spring-boot","stomp","spring-websocket"],"answers":[{"comments":[{"owner":{"account_id":1193165,"reputation":6176,"user_id":1165493,"accept_rate":55,"display_name":"Sandah Aung"},"score":0,"creation_date":1682908119,"post_id":76135276,"comment_id":134283641,"body_markdown":"Let me try that out.","body":"Let me try that out."}],"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682757516,"creation_date":1682757516,"answer_id":76135276,"question_id":76134623,"body_markdown":"First you need to define `userDestinationPrefix`:\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    \r\n      @Override\r\n      public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\r\n        config.setUserDestinationPrefix(&quot;/user&quot;); // DEFINE HERE\r\n        //topic added again to handle SubscribeMapping\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;, &quot;/topic&quot;);\r\n      }\r\n    \r\n      @Override\r\n      public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry\r\n            .addEndpoint(&quot;/ws&quot;)\r\n            .setAllowedOriginPatterns(&quot;*&quot;)\r\n            .setHandshakeHandler(new CustomHandshakeHandler())\r\n            .withSockJS();\r\n      }\r\n    }\r\n\r\nCustomHandshakeHandler:\r\n\r\n    public class CustomHandshakeHandler extends DefaultHandshakeHandler {\r\n      // Custom class for storing principal\r\n      @Override\r\n      protected Principal determineUser(\r\n          ServerHttpRequest request,\r\n          WebSocketHandler wsHandler,\r\n          Map&lt;String, Object&gt; attributes\r\n      ) {\r\n        // Generate principal with UUID as name\r\n        return new StompPrincipal(UUID.randomUUID().toString());\r\n      }\r\n    }\r\n\r\n\r\nFinally to send messages to specific user:\r\n\r\n     messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\r\n\r\nFull example of sending message:\r\n\r\n     @MessageMapping(&quot;/game/{room}&quot;)\r\n      public void handleGameUpdates(\r\n          @DestinationVariable String room,\r\n          @Payload GameObjectState gameObjectState,\r\n          Principal principal) {\r\n    \r\n        // Get all the users in the application\r\n        Collection&lt;SimpUser&gt; users = simpUserRegistry.getUsers();\r\n    \r\n        for (SimpUser user : users) {\r\n          for (SimpSession session : user.getSessions()) {\r\n            if (session.getSubscriptions().stream()\r\n                .anyMatch(subscription -&gt; subscription.getDestination().endsWith(room))) {\r\n              // If the user is subscribed to the room, add their userId to the list\r\n              if (!user.getName().equals(principal.getName())) {\r\n                if (gameObjectState.getType().equals(GameObjectType.PLAYER)) {\r\n                  messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\r\n                } else {\r\n                  messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/bullet&quot;, new BulletState(gameObjectState));\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\nif you need more check the repo: https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java","title":"Can&#39;t send direct message to user using Spring Boot Websocket Stomp","body":"<p>First you need to define <code>userDestinationPrefix</code>:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void configureMessageBroker(MessageBrokerRegistry config) {\n    config.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\n    config.setUserDestinationPrefix(&quot;/user&quot;); // DEFINE HERE\n    //topic added again to handle SubscribeMapping\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;, &quot;/topic&quot;);\n  }\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n    registry\n        .addEndpoint(&quot;/ws&quot;)\n        .setAllowedOriginPatterns(&quot;*&quot;)\n        .setHandshakeHandler(new CustomHandshakeHandler())\n        .withSockJS();\n  }\n}\n</code></pre>\n<p>CustomHandshakeHandler:</p>\n<pre><code>public class CustomHandshakeHandler extends DefaultHandshakeHandler {\n  // Custom class for storing principal\n  @Override\n  protected Principal determineUser(\n      ServerHttpRequest request,\n      WebSocketHandler wsHandler,\n      Map&lt;String, Object&gt; attributes\n  ) {\n    // Generate principal with UUID as name\n    return new StompPrincipal(UUID.randomUUID().toString());\n  }\n}\n</code></pre>\n<p>Finally to send messages to specific user:</p>\n<pre><code> messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n</code></pre>\n<p>Full example of sending message:</p>\n<pre><code> @MessageMapping(&quot;/game/{room}&quot;)\n  public void handleGameUpdates(\n      @DestinationVariable String room,\n      @Payload GameObjectState gameObjectState,\n      Principal principal) {\n\n    // Get all the users in the application\n    Collection&lt;SimpUser&gt; users = simpUserRegistry.getUsers();\n\n    for (SimpUser user : users) {\n      for (SimpSession session : user.getSessions()) {\n        if (session.getSubscriptions().stream()\n            .anyMatch(subscription -&gt; subscription.getDestination().endsWith(room))) {\n          // If the user is subscribed to the room, add their userId to the list\n          if (!user.getName().equals(principal.getName())) {\n            if (gameObjectState.getType().equals(GameObjectType.PLAYER)) {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n            } else {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/bullet&quot;, new BulletState(gameObjectState));\n            }\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n<p>if you need more check the repo: <a href=\"https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java\" rel=\"nofollow noreferrer\">https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java</a></p>\n"}],"owner":{"account_id":1193165,"reputation":6176,"user_id":1165493,"accept_rate":55,"display_name":"Sandah Aung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682757516,"creation_date":1682745292,"question_id":76134623,"body_markdown":"I have a client server application implemented in Spring Boot 3. It uses web socket with stomp to communicate with each other. Currently both the server and client are implemented using different versions of Spring and Spring Boot.\r\n\r\nI was successful with sending messages using a common topic to each other. The messages are encrypted so only the intended client can decrypt it and view it.\r\n\r\nThe application is intended for more complicated purposes but for my purpose let me present it to you as a chat application.\r\n\r\nThis is part of the code which tests the functionality:\r\n\t@Autowired\r\n\tprivate SimpMessagingTemplate simpMessagingTemplate;\r\n\t\r\n\t@Autowired\r\n\tprivate ActiveUserStore activeUserStore;\r\n\t\r\n\t@MessageMapping(&quot;/send&quot;)\r\n\t@SendToUser(&quot;/queue/chat&quot;)\r\n\tpublic void sendToUser(@Payload WsIncomingMessage wsIncomingMessage, Principal user, @Header(&quot;simpSessionId&quot;) String sessionId) {\r\n\t\tlog.info(&quot; /queue/chat &gt; incoming msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\r\n\t\tWsOutgoingMessage wsOutgoingMessage = new WsOutgoingMessage();\r\n\t\twsOutgoingMessage.setMessage(wsIncomingMessage.getMessage());\r\n\t\twsOutgoingMessage.setMessageType(wsIncomingMessage.getMessageType());\r\n\t\twsOutgoingMessage.setSentDatetime(wsIncomingMessage.getSentDatetime());\r\n\t\twsOutgoingMessage.setSource(wsIncomingMessage.getSource());\r\n\t\twsOutgoingMessage.setDestination(wsIncomingMessage.getDestination());\r\n\t\twsIncomingMessage.setAdId(wsIncomingMessage.getAdId());\r\n\t\tlog.info(&quot; /queue/chat &gt; outgoing msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\r\n\t\t\r\n\t\tsimpMessagingTemplate.convertAndSendToUser(activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal(), &quot;/queue/chat&quot;, wsOutgoingMessage);\r\n\t}\r\n\r\nCalling `activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal()` returns a phone number which identifies the user. We think the phone number in full path uniquely identifies the user.\r\n\r\nMy handshaker:\r\n\r\n    @Slf4j\r\n    public class CustomHandshakeHandler extends DefaultHandshakeHandler { \r\n    \r\n    \t\r\n    \t@Override\r\n    \tprotected Principal determineUser(ServerHttpRequest request, WebSocketHandler wsHandler,\r\n    \t\t\tMap&lt;String, Object&gt; attributes) {\r\n    \t\tString uuid = UUID.randomUUID().toString();\r\n    \t\tPrincipal pinciplal = request.getPrincipal();\r\n    \r\n    \t\tif (pinciplal instanceof UsernamePasswordAuthenticationToken) {\r\n    \t\t\tUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = (UsernamePasswordAuthenticationToken) pinciplal;\r\n    \t\t\tObject principalObj = usernamePasswordAuthenticationToken.getPrincipal();\r\n    \t\t\tif (principalObj instanceof JwtUserDetails) {\r\n    \t\t\t\tJwtUserDetails connectingUser = (JwtUserDetails) principalObj;\r\n    \t\t\t\tconnectingUser.setSessionUuid(uuid);\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tlog.info(&quot;principal in CustomHandshakeHandler: {}&quot;, pinciplal);\r\n    \t\treturn pinciplal;\r\n    \t}\r\n    }\r\n\r\nThe string representation of the principal: `UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]]`\r\n\r\n\r\nThe Spring Boot Server is receiving stomp messages. I think it is also returning messages but I don&#39;t know how to log the returned messages:\r\n\r\n\r\n    [boundChannel-13]\u001B[0;39m \u001B[36mc.l.c.f.k.c.controller.ChatController   \u001B[0;39m \u001B[2m:\u001B[0;39m  /queue/chat &gt; incoming msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\r\n    \r\n    [boundChannel-13]\u001B[0;39m \u001B[36mc.l.c.f.k.c.controller.ChatController   \u001B[0;39m \u001B[2m:\u001B[0;39m  /queue/chat &gt; outgoing msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\r\n\r\nThe server is registering subscribe events:\r\n\r\n    event: SessionSubscribeEvent[GenericMessage [payload=byte[0], headers={simpMessageType=SUBSCRIBE, stompCommand=SUBSCRIBE, nativeHeaders={destination=[/user/queue/chat], id=[0]}, simpSessionAttributes={}, simpHeartbeat=[J@197209d9, simpSubscriptionId=0, simpUser=UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], simpSessionId=36d934da-79d7-f00b-6459-331f1cef60ca, simpDestination=/user/queue/chat}]]\r\n\r\nThe client can also see the success of subscription:\r\n\r\n    StompSession.Subscription messageSubscriberSubscription = sessionStomp.get().subscribe(&quot;/user/queue/chat&quot;, messageSubscriber);\r\n    log.info(&quot;messageSubscriberSubscription: {}&quot;, messageSubscriberSubscription);\r\n\r\n    10:39:43.244 [Grizzly(2)] INFO com.lomatechnology.cambodia.fintech.kke.chat.web.ServerCommunication -- messageSubscriberSubscription: Subscription [id=0, destination=&#39;/user/queue/chat&#39;, receiptId=&#39;null&#39;, handler=com.lomatechnology.cambodia.fintech.kke.chat.web.MessageSubscriber@39fe1782]\r\n    10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.util.DatetimeUtil -- Returned date string: 2023-04-29T10:39:49+07:00\r\n    10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.ui.ChatGui -- About to send: WsOutgoingMessage(message=Hi, messageType=text/plain, destination=4, sourceImage=null, sentDatetime=2023-04-29T10:39:49+07:00, source=3, adId=no-ad)\r\n\r\nThe only problem is that the intended client is never receiving messages. Is it the wrong use of principle in `simpMessagingTemplate.convertAndSendToUser` or hace I missed anything?","title":"Can&#39;t send direct message to user using Spring Boot Websocket Stomp","body":"<p>I have a client server application implemented in Spring Boot 3. It uses web socket with stomp to communicate with each other. Currently both the server and client are implemented using different versions of Spring and Spring Boot.</p>\n<p>I was successful with sending messages using a common topic to each other. The messages are encrypted so only the intended client can decrypt it and view it.</p>\n<p>The application is intended for more complicated purposes but for my purpose let me present it to you as a chat application.</p>\n<p>This is part of the code which tests the functionality:\n@Autowired\nprivate SimpMessagingTemplate simpMessagingTemplate;</p>\n<pre><code>@Autowired\nprivate ActiveUserStore activeUserStore;\n\n@MessageMapping(&quot;/send&quot;)\n@SendToUser(&quot;/queue/chat&quot;)\npublic void sendToUser(@Payload WsIncomingMessage wsIncomingMessage, Principal user, @Header(&quot;simpSessionId&quot;) String sessionId) {\n    log.info(&quot; /queue/chat &gt; incoming msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    WsOutgoingMessage wsOutgoingMessage = new WsOutgoingMessage();\n    wsOutgoingMessage.setMessage(wsIncomingMessage.getMessage());\n    wsOutgoingMessage.setMessageType(wsIncomingMessage.getMessageType());\n    wsOutgoingMessage.setSentDatetime(wsIncomingMessage.getSentDatetime());\n    wsOutgoingMessage.setSource(wsIncomingMessage.getSource());\n    wsOutgoingMessage.setDestination(wsIncomingMessage.getDestination());\n    wsIncomingMessage.setAdId(wsIncomingMessage.getAdId());\n    log.info(&quot; /queue/chat &gt; outgoing msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    \n    simpMessagingTemplate.convertAndSendToUser(activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal(), &quot;/queue/chat&quot;, wsOutgoingMessage);\n}\n</code></pre>\n<p>Calling <code>activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal()</code> returns a phone number which identifies the user. We think the phone number in full path uniquely identifies the user.</p>\n<p>My handshaker:</p>\n<pre><code>@Slf4j\npublic class CustomHandshakeHandler extends DefaultHandshakeHandler { \n\n    \n    @Override\n    protected Principal determineUser(ServerHttpRequest request, WebSocketHandler wsHandler,\n            Map&lt;String, Object&gt; attributes) {\n        String uuid = UUID.randomUUID().toString();\n        Principal pinciplal = request.getPrincipal();\n\n        if (pinciplal instanceof UsernamePasswordAuthenticationToken) {\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = (UsernamePasswordAuthenticationToken) pinciplal;\n            Object principalObj = usernamePasswordAuthenticationToken.getPrincipal();\n            if (principalObj instanceof JwtUserDetails) {\n                JwtUserDetails connectingUser = (JwtUserDetails) principalObj;\n                connectingUser.setSessionUuid(uuid);\n                \n            }\n        }\n        log.info(&quot;principal in CustomHandshakeHandler: {}&quot;, pinciplal);\n        return pinciplal;\n    }\n}\n</code></pre>\n<p>The string representation of the principal: <code>UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]]</code></p>\n<p>The Spring Boot Server is receiving stomp messages. I think it is also returning messages but I don't know how to log the returned messages:</p>\n<pre><code>[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; incoming msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n\n[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; outgoing msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n</code></pre>\n<p>The server is registering subscribe events:</p>\n<pre><code>event: SessionSubscribeEvent[GenericMessage [payload=byte[0], headers={simpMessageType=SUBSCRIBE, stompCommand=SUBSCRIBE, nativeHeaders={destination=[/user/queue/chat], id=[0]}, simpSessionAttributes={}, simpHeartbeat=[J@197209d9, simpSubscriptionId=0, simpUser=UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], simpSessionId=36d934da-79d7-f00b-6459-331f1cef60ca, simpDestination=/user/queue/chat}]]\n</code></pre>\n<p>The client can also see the success of subscription:</p>\n<pre><code>StompSession.Subscription messageSubscriberSubscription = sessionStomp.get().subscribe(&quot;/user/queue/chat&quot;, messageSubscriber);\nlog.info(&quot;messageSubscriberSubscription: {}&quot;, messageSubscriberSubscription);\n\n10:39:43.244 [Grizzly(2)] INFO com.lomatechnology.cambodia.fintech.kke.chat.web.ServerCommunication -- messageSubscriberSubscription: Subscription [id=0, destination='/user/queue/chat', receiptId='null', handler=com.lomatechnology.cambodia.fintech.kke.chat.web.MessageSubscriber@39fe1782]\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.util.DatetimeUtil -- Returned date string: 2023-04-29T10:39:49+07:00\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.ui.ChatGui -- About to send: WsOutgoingMessage(message=Hi, messageType=text/plain, destination=4, sourceImage=null, sentDatetime=2023-04-29T10:39:49+07:00, source=3, adId=no-ad)\n</code></pre>\n<p>The only problem is that the intended client is never receiving messages. Is it the wrong use of principle in <code>simpMessagingTemplate.convertAndSendToUser</code> or hace I missed anything?</p>\n"},{"tags":["java","static-methods"],"comments":[{"owner":{"account_id":3851476,"reputation":15138,"user_id":3191557,"accept_rate":100,"display_name":"dhke"},"score":5,"creation_date":1465989382,"post_id":37833827,"comment_id":63128858,"body_markdown":"*Since a static method is executed first when a program is run* &lt;= No, static methods are not magically executed when a program is run and that makes the rest of the question irrelevant. Did you mean static fields? Always try to provide example code with a question like this. Otherwise it leads to guesswork answers.","body":"<i>Since a static method is executed first when a program is run</i> &lt;= No, static methods are not magically executed when a program is run and that makes the rest of the question irrelevant. Did you mean static fields? Always try to provide example code with a question like this. Otherwise it leads to guesswork answers."},{"owner":{"account_id":1506611,"reputation":2200,"user_id":1409849,"accept_rate":83,"display_name":"Bhargav Kumar R"},"score":0,"creation_date":1465991874,"post_id":37833827,"comment_id":63130746,"body_markdown":"Are you speaking about static methods or static blocks?","body":"Are you speaking about static methods or static blocks?"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1465989320,"creation_date":1465989320,"answer_id":37833885,"question_id":37833827,"body_markdown":"The `main` method will be executed first, unless you explicitly execute one of the other static methods in a static initializer block or in the initialization of a static variable.\r\n\r\nFor example, here&#39;s a scenario in which static methods (`method1` and `method2`) are executed before the `main` method :\r\n\r\n    public class SomeClass\r\n    {\r\n        static int v = method2 ();\r\n\r\n        static {\r\n            method1 ();\r\n        }\r\n\r\n        public static void main (String[] args)\r\n        {\r\n\r\n        }\r\n\r\n        public static void method1 ()\r\n        {\r\n\r\n        }\r\n\r\n        public static int method2 ()\r\n        {\r\n            return 5;\r\n        }\r\n\r\n    }","title":"Multiple Static methods","body":"<p>The <code>main</code> method will be executed first, unless you explicitly execute one of the other static methods in a static initializer block or in the initialization of a static variable.</p>\n\n<p>For example, here's a scenario in which static methods (<code>method1</code> and <code>method2</code>) are executed before the <code>main</code> method :</p>\n\n<pre><code>public class SomeClass\n{\n    static int v = method2 ();\n\n    static {\n        method1 ();\n    }\n\n    public static void main (String[] args)\n    {\n\n    }\n\n    public static void method1 ()\n    {\n\n    }\n\n    public static int method2 ()\n    {\n        return 5;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3463355,"reputation":126,"user_id":2899712,"display_name":"Milan Novkovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465991722,"creation_date":1465991722,"answer_id":37834763,"question_id":37833827,"body_markdown":"Methods you write are, in general, not executed without being called.\r\n\r\nMain you call by executing your program.","title":"Multiple Static methods","body":"<p>Methods you write are, in general, not executed without being called.</p>\n\n<p>Main you call by executing your program.</p>\n"},{"tags":[],"owner":{"account_id":28453134,"reputation":1,"user_id":21770917,"display_name":"user21770917"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682757208,"creation_date":1682757159,"answer_id":76135255,"question_id":37833827,"body_markdown":"It will be always static when it comes to execution \r\nthen it will go for Main method \r\nReason behind is static method it store in memory","title":"Multiple Static methods","body":"<p>It will be always static when it comes to execution\nthen it will go for Main method\nReason behind is static method it store in memory</p>\n"}],"owner":{"display_name":"user5860349"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1779,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"accepted_answer_id":37833885,"answer_count":3,"score":-2,"last_activity_date":1682757208,"creation_date":1465989203,"question_id":37833827,"body_markdown":"I have declared three static methods in my java program, apart from the main()\r\n\r\nmethod. Since a static method is executed first when a program is run, which\r\n\r\nmethod will be executed first? Will it be one of the static methods that I have\r\n\r\ndeclared, or will it be the main method?","title":"Multiple Static methods","body":"<p>I have declared three static methods in my java program, apart from the main()</p>\n\n<p>method. Since a static method is executed first when a program is run, which</p>\n\n<p>method will be executed first? Will it be one of the static methods that I have</p>\n\n<p>declared, or will it be the main method?</p>\n"},{"tags":["java","android","calendarview"],"answers":[{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682757159,"creation_date":1682757159,"answer_id":76135256,"question_id":76134503,"body_markdown":"In order to store something so that you can retrieve later, you can consider using [```SharedPreferences```](https://www.geeksforgeeks.org/shared-preferences-in-android-with-examples/).\r\n\r\nFirst, you can have a simple SharedPreferencesUtil class as follow:\r\n```java\r\npublic class SharedPreferencesUtil {\r\n    // You can define a key here\r\n    public static final String KEY_DATE = &quot;KEY_DATE&quot;;\r\n\r\n    public static boolean setLocalDate(Context context, String key, LocalDate value) {\r\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\r\n        Editor editor = sp.edit();\r\n        // You can convert your LocalDate to Long and store into SharedPreferences\r\n        return editor.putLong(key, value.toEpochDay()).commit();\r\n    }\r\n\r\n    public static LocalDate getLocalDate(Context context, String key) {\r\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\r\n        Long numberOfDays = sp.getLong(key, -1);\r\n        if (numberOfDays == -1)\r\n            return null;\r\n        return LocalDate.ofEpochDay(numberOfDays);\r\n    }\r\n}\r\n```\r\n\r\nThen you can easily update and retrieve the value in your Activity like this:\r\n```java\r\n// Store the LocalDate for later retrieval\r\nSharedPreferencesUtil.setLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE, LocalDate that you want to store);\r\n\r\n// Retrieve the previous stored LocalDate\r\nLocalDate storedDate = SharedPreferencesUtil.getLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE);\r\nif (storedDate == null) {\r\n    // You have not saved LocalDate yet\r\n} else {\r\n    // You should be able to retrieve the previous stored LocalDate\r\n}\r\n```","title":"Retaining selection for CalendarView","body":"<p>In order to store something so that you can retrieve later, you can consider using <a href=\"https://www.geeksforgeeks.org/shared-preferences-in-android-with-examples/\" rel=\"nofollow noreferrer\"><code>SharedPreferences</code></a>.</p>\n<p>First, you can have a simple SharedPreferencesUtil class as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SharedPreferencesUtil {\n    // You can define a key here\n    public static final String KEY_DATE = &quot;KEY_DATE&quot;;\n\n    public static boolean setLocalDate(Context context, String key, LocalDate value) {\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\n        Editor editor = sp.edit();\n        // You can convert your LocalDate to Long and store into SharedPreferences\n        return editor.putLong(key, value.toEpochDay()).commit();\n    }\n\n    public static LocalDate getLocalDate(Context context, String key) {\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\n        Long numberOfDays = sp.getLong(key, -1);\n        if (numberOfDays == -1)\n            return null;\n        return LocalDate.ofEpochDay(numberOfDays);\n    }\n}\n</code></pre>\n<p>Then you can easily update and retrieve the value in your Activity like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Store the LocalDate for later retrieval\nSharedPreferencesUtil.setLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE, LocalDate that you want to store);\n\n// Retrieve the previous stored LocalDate\nLocalDate storedDate = SharedPreferencesUtil.getLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE);\nif (storedDate == null) {\n    // You have not saved LocalDate yet\n} else {\n    // You should be able to retrieve the previous stored LocalDate\n}\n</code></pre>\n"}],"owner":{"account_id":5222764,"reputation":49,"user_id":4175703,"display_name":"Jeremy Vidaurri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76135256,"answer_count":1,"score":1,"last_activity_date":1682757159,"creation_date":1682741899,"question_id":76134503,"body_markdown":"I am utilizing [this library](https://github.com/kizitonwose/Calendar/blob/main/docs/View.md) to set up a custom calendar but it appears that on each date click, currentSelection gets set to null. I have the following daybinder set.\r\n```java\r\ncalendarView.setDayBinder(new MonthDayBinder&lt;DayViewContainer&gt;() {\r\n            // Called only when a new container is needed.\r\n            @NonNull\r\n            @Override\r\n            public DayViewContainer create(@NonNull View view) {\r\n                return new DayViewContainer(view);\r\n            }\r\n\r\n            // Called every time we need to reuse a container.\r\n            @RequiresApi(api = Build.VERSION_CODES.O)\r\n            @Override\r\n            public void bind(@NonNull DayViewContainer container, CalendarDay data) {\r\n                container.day = data;\r\n                CalendarDay day = data;\r\n                selectedDate = container.selectedDate;\r\n                container.calendarView = calendarView;\r\n                Log.d(TAG, &quot;bind: &quot;+ container.day);\r\n                TextView textView = container.textView;\r\n                textView.setText(String.valueOf(data.getDate().getDayOfMonth()));\r\n\r\n                if (day.getPosition() == DayPosition.MonthDate) {\r\n\r\n                    textView.setVisibility(View.VISIBLE);\r\n                    LocalDate date = day.getDate();\r\n                    // If user selects same date, clear highlight\r\n                    if (date.equals(selectedDate)) {\r\n                        // New date was selected.\r\n                        textView.setTextColor(Color.WHITE);\r\n                        textView.setBackgroundColor(Color.rgb(98,0,238));\r\n                    } else {\r\n                        textView.setVisibility(View.VISIBLE);\r\n                        textView.setTextColor(Color.BLACK);\r\n                        textView.setBackgroundColor(Color.TRANSPARENT);\r\n\r\n                    }\r\n                } else {\r\n                    textView.setVisibility(View.INVISIBLE);\r\n                }\r\n            }\r\n        });\r\n\r\n        calendarView.setMonthHeaderBinder(new MonthHeaderFooterBinder&lt;MonthViewContainer&gt;() {\r\n            @NonNull\r\n            @Override\r\n            public MonthViewContainer create(@NonNull View view) {\r\n                return new MonthViewContainer(view);\r\n            }\r\n\r\n            @Override\r\n            public void bind(@NonNull MonthViewContainer container, @NonNull CalendarMonth data) {\r\n                if (container.getTitlesContainer().getTag() == null) {\r\n                    container.getTitlesContainer().setTag(data.getYearMonth());\r\n\r\n                    TextView textView = container.getTitlesContainer();\r\n                    String title = String.valueOf(data.getYearMonth());\r\n                    textView.setText(title);\r\n                }\r\n            }\r\n            });\r\n```\r\n \r\nand the related DayViewContainer class:\r\n```java\r\npublic class DayViewContainer extends ViewContainer {\r\n\r\n    public TextView textView;\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n    public CalendarDay day;\r\n    public LocalDate selectedDate;\r\n    public LocalDate currentSelection;\r\n    public CalendarView calendarView;\r\n\r\n    public DayViewContainer(View view) {\r\n\r\n        super(view);\r\n        textView = view.findViewById(R.id.calendarDayText);\r\n        // With ViewBinding\r\n        CalendarDayLayoutBinding binding = CalendarDayLayoutBinding.bind(view);\r\n        textView = binding.calendarDayText;\r\n\r\n\r\n        textView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if (day.getPosition() == DayPosition.MonthDate) {\r\n                    currentSelection = selectedDate;\r\n                    Log.d(TAG, &quot;onClick: Clicked inDate&quot;);\r\n                    // If user selects same date, clear eventContainer\r\n                    if (currentSelection != null &amp;&amp; currentSelection.equals(day.getDate())) {\r\n                        selectedDate = null;\r\n                        textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\r\n                        Log.d(TAG, &quot;onClick: Clicked the same date that was selected&quot;);\r\n                    } else {\r\n\r\n                        selectedDate = day.getDate();\r\n\r\n                        if (currentSelection != null){\r\n                            textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\r\n                            Log.d(TAG, &quot;onClick: Updating old date&quot;);\r\n                        }\r\n                        textView.post(() -&gt; calendarView.notifyDateChanged(selectedDate));\r\n                        Log.d(TAG, &quot;onClick: Updating new date&quot;);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nIf I&#39;m understanding correctly, each date has its own dayviewcontainer which has selectedDate. I believe storing it in my activity would probably resolve this issue but I am unsure how to do so.\r\n","title":"Retaining selection for CalendarView","body":"<p>I am utilizing <a href=\"https://github.com/kizitonwose/Calendar/blob/main/docs/View.md\" rel=\"nofollow noreferrer\">this library</a> to set up a custom calendar but it appears that on each date click, currentSelection gets set to null. I have the following daybinder set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>calendarView.setDayBinder(new MonthDayBinder&lt;DayViewContainer&gt;() {\n            // Called only when a new container is needed.\n            @NonNull\n            @Override\n            public DayViewContainer create(@NonNull View view) {\n                return new DayViewContainer(view);\n            }\n\n            // Called every time we need to reuse a container.\n            @RequiresApi(api = Build.VERSION_CODES.O)\n            @Override\n            public void bind(@NonNull DayViewContainer container, CalendarDay data) {\n                container.day = data;\n                CalendarDay day = data;\n                selectedDate = container.selectedDate;\n                container.calendarView = calendarView;\n                Log.d(TAG, &quot;bind: &quot;+ container.day);\n                TextView textView = container.textView;\n                textView.setText(String.valueOf(data.getDate().getDayOfMonth()));\n\n                if (day.getPosition() == DayPosition.MonthDate) {\n\n                    textView.setVisibility(View.VISIBLE);\n                    LocalDate date = day.getDate();\n                    // If user selects same date, clear highlight\n                    if (date.equals(selectedDate)) {\n                        // New date was selected.\n                        textView.setTextColor(Color.WHITE);\n                        textView.setBackgroundColor(Color.rgb(98,0,238));\n                    } else {\n                        textView.setVisibility(View.VISIBLE);\n                        textView.setTextColor(Color.BLACK);\n                        textView.setBackgroundColor(Color.TRANSPARENT);\n\n                    }\n                } else {\n                    textView.setVisibility(View.INVISIBLE);\n                }\n            }\n        });\n\n        calendarView.setMonthHeaderBinder(new MonthHeaderFooterBinder&lt;MonthViewContainer&gt;() {\n            @NonNull\n            @Override\n            public MonthViewContainer create(@NonNull View view) {\n                return new MonthViewContainer(view);\n            }\n\n            @Override\n            public void bind(@NonNull MonthViewContainer container, @NonNull CalendarMonth data) {\n                if (container.getTitlesContainer().getTag() == null) {\n                    container.getTitlesContainer().setTag(data.getYearMonth());\n\n                    TextView textView = container.getTitlesContainer();\n                    String title = String.valueOf(data.getYearMonth());\n                    textView.setText(title);\n                }\n            }\n            });\n</code></pre>\n<p>and the related DayViewContainer class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DayViewContainer extends ViewContainer {\n\n    public TextView textView;\n    @SuppressLint(&quot;NewApi&quot;)\n    public CalendarDay day;\n    public LocalDate selectedDate;\n    public LocalDate currentSelection;\n    public CalendarView calendarView;\n\n    public DayViewContainer(View view) {\n\n        super(view);\n        textView = view.findViewById(R.id.calendarDayText);\n        // With ViewBinding\n        CalendarDayLayoutBinding binding = CalendarDayLayoutBinding.bind(view);\n        textView = binding.calendarDayText;\n\n\n        textView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (day.getPosition() == DayPosition.MonthDate) {\n                    currentSelection = selectedDate;\n                    Log.d(TAG, &quot;onClick: Clicked inDate&quot;);\n                    // If user selects same date, clear eventContainer\n                    if (currentSelection != null &amp;&amp; currentSelection.equals(day.getDate())) {\n                        selectedDate = null;\n                        textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\n                        Log.d(TAG, &quot;onClick: Clicked the same date that was selected&quot;);\n                    } else {\n\n                        selectedDate = day.getDate();\n\n                        if (currentSelection != null){\n                            textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\n                            Log.d(TAG, &quot;onClick: Updating old date&quot;);\n                        }\n                        textView.post(() -&gt; calendarView.notifyDateChanged(selectedDate));\n                        Log.d(TAG, &quot;onClick: Updating new date&quot;);\n                    }\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>If I'm understanding correctly, each date has its own dayviewcontainer which has selectedDate. I believe storing it in my activity would probably resolve this issue but I am unsure how to do so.</p>\n"},{"tags":["java","reactjs","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682756982,"creation_date":1682756982,"answer_id":76135246,"question_id":76134313,"body_markdown":"You have to make cors configuration in backend side:\r\n\r\n    @Configuration\r\n    public class WebConfig{\r\n         @Bean\r\n          public WebMvcConfigurer corsConfigurer() {\r\n            return new WebMvcConfigurer() {\r\n              @Override\r\n              public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;*&quot;);\r\n              }\r\n            };\r\n          }\r\n    }","title":"No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. (ReactJS + Spring Boot App)","body":"<p>You have to make cors configuration in backend side:</p>\n<pre><code>@Configuration\npublic class WebConfig{\n     @Bean\n      public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n          @Override\n          public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;*&quot;);\n          }\n        };\n      }\n}\n</code></pre>\n"}],"owner":{"account_id":13970331,"reputation":11,"user_id":10089101,"display_name":"adesh landge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682756982,"creation_date":1682736564,"question_id":76134313,"body_markdown":"I&#39;m using ReactJS for the front end and Spring boot for the backend. \r\nWhenever, I invoke this API: \r\n`http://localhost:8080/api/v1/admin/member/checkIn?gymId=1&amp;email=xyz@gmail.com`, I am getting: **No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.**\r\n\r\nHere&#39;s my ReactJS code that makes the API call:\r\n\r\n```js\r\nexport const checkInMembers = (gymId, email) =&gt; {\r\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\r\n    \r\n    return axios.post(&#39;http://localhost:8080/api/v1/admin/member/checkIn&#39;, { gymId, email }, {\r\n        headers: {\r\n            &#39;Authorization&#39;: `Bearer ${adminData.token}`,\r\n        },\r\n    });\r\n}\r\n```\r\n\r\nHere&#39;s my Spring Boot code:\r\n\r\n```java\r\npackage com.CMPE202.healthclub.controller;\r\n\r\nimport com.CMPE202.healthclub.entity.user.User;\r\nimport com.CMPE202.healthclub.entity.user.UserGymVisit;\r\nimport com.CMPE202.healthclub.exceptions.BadServerException;\r\nimport com.CMPE202.healthclub.exceptions.InvalidOperationException;\r\nimport com.CMPE202.healthclub.exceptions.RecordNotFoundException;\r\nimport com.CMPE202.healthclub.model.UserDetailsResponse;\r\nimport com.CMPE202.healthclub.service.AdminService;\r\nimport jakarta.annotation.security.RolesAllowed;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/admin&quot;)\r\n@RequiredArgsConstructor\r\n@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\r\n@RolesAllowed(&quot;STAFF&quot;)\r\n@Validated\r\npublic class AdminController {\r\n    private final AdminService adminService;\r\n    @GetMapping({&quot;/member&quot;})\r\n    public UserDetailsResponse getUserDetailsFromEmail(@RequestParam String email) throws RecordNotFoundException {\r\n        return adminService.getUserDetailsFromEmail(email);\r\n    }\r\n    @PostMapping({&quot;/member/checkIn&quot;})\r\n    public UserGymVisit checkInUserToGym(@RequestParam(required = true) Long gymId,\r\n                                         @RequestParam(required = true) String email) throws RecordNotFoundException, InvalidOperationException, BadServerException {\r\n        return adminService.checkInUsers(gymId, email);\r\n    }\r\n    @PutMapping({&quot;/member/checkOut&quot;})\r\n    public UserGymVisit checkOutUserToGym(@RequestParam(required = true) Long userGymVisitId) throws InvalidOperationException {\r\n        return adminService.checkOutUsers(userGymVisitId);\r\n    }\r\n    @GetMapping({&quot;/member/currentCheckedInList&quot;})\r\n    public List&lt;UserDetailsResponse&gt; getAllCurrentCheckedInUsers(@RequestParam(required = true) Long gymId){\r\n        return adminService.getAllCurrentCheckedInUsers(gymId);\r\n    }\r\n}\r\n```\r\n\r\nI even tried doing this. Still doesn&#39;t work!\r\n\r\n```js\r\nexport const checkInMembers = (gymId, email) =&gt; {\r\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\r\n    const corsOptions = {\r\n        origin: &#39;http://localhost:8080&#39;, // specify the URL of your server\r\n    };\r\n\r\n    const axiosInstance = axios.create();\r\n    axiosInstance.interceptors.request.use(cors(corsOptions));\r\n    return axiosInstance.post(&#39;http://localhost:8080/api/v1/admin/member/checkIn&#39;, { gymId, email }, {\r\n        headers: {\r\n            &#39;Authorization&#39;: `Bearer ${adminData.token}`,\r\n            &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,\r\n            &#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;\r\n        },\r\n        mode: &#39;cors&#39;,\r\n        credentials: &#39;include&#39;\r\n    });\r\n}\r\n```","title":"No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. (ReactJS + Spring Boot App)","body":"<p>I'm using ReactJS for the front end and Spring boot for the backend.\nWhenever, I invoke this API:\n<code>http://localhost:8080/api/v1/admin/member/checkIn?gymId=1&amp;email=xyz@gmail.com</code>, I am getting: <strong>No 'Access-Control-Allow-Origin' header is present on the requested resource.</strong></p>\n<p>Here's my ReactJS code that makes the API call:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const checkInMembers = (gymId, email) =&gt; {\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\n    \n    return axios.post('http://localhost:8080/api/v1/admin/member/checkIn', { gymId, email }, {\n        headers: {\n            'Authorization': `Bearer ${adminData.token}`,\n        },\n    });\n}\n</code></pre>\n<p>Here's my Spring Boot code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.CMPE202.healthclub.controller;\n\nimport com.CMPE202.healthclub.entity.user.User;\nimport com.CMPE202.healthclub.entity.user.UserGymVisit;\nimport com.CMPE202.healthclub.exceptions.BadServerException;\nimport com.CMPE202.healthclub.exceptions.InvalidOperationException;\nimport com.CMPE202.healthclub.exceptions.RecordNotFoundException;\nimport com.CMPE202.healthclub.model.UserDetailsResponse;\nimport com.CMPE202.healthclub.service.AdminService;\nimport jakarta.annotation.security.RolesAllowed;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(&quot;/api/v1/admin&quot;)\n@RequiredArgsConstructor\n@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\n@RolesAllowed(&quot;STAFF&quot;)\n@Validated\npublic class AdminController {\n    private final AdminService adminService;\n    @GetMapping({&quot;/member&quot;})\n    public UserDetailsResponse getUserDetailsFromEmail(@RequestParam String email) throws RecordNotFoundException {\n        return adminService.getUserDetailsFromEmail(email);\n    }\n    @PostMapping({&quot;/member/checkIn&quot;})\n    public UserGymVisit checkInUserToGym(@RequestParam(required = true) Long gymId,\n                                         @RequestParam(required = true) String email) throws RecordNotFoundException, InvalidOperationException, BadServerException {\n        return adminService.checkInUsers(gymId, email);\n    }\n    @PutMapping({&quot;/member/checkOut&quot;})\n    public UserGymVisit checkOutUserToGym(@RequestParam(required = true) Long userGymVisitId) throws InvalidOperationException {\n        return adminService.checkOutUsers(userGymVisitId);\n    }\n    @GetMapping({&quot;/member/currentCheckedInList&quot;})\n    public List&lt;UserDetailsResponse&gt; getAllCurrentCheckedInUsers(@RequestParam(required = true) Long gymId){\n        return adminService.getAllCurrentCheckedInUsers(gymId);\n    }\n}\n</code></pre>\n<p>I even tried doing this. Still doesn't work!</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const checkInMembers = (gymId, email) =&gt; {\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\n    const corsOptions = {\n        origin: 'http://localhost:8080', // specify the URL of your server\n    };\n\n    const axiosInstance = axios.create();\n    axiosInstance.interceptors.request.use(cors(corsOptions));\n    return axiosInstance.post('http://localhost:8080/api/v1/admin/member/checkIn', { gymId, email }, {\n        headers: {\n            'Authorization': `Bearer ${adminData.token}`,\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': '*'\n        },\n        mode: 'cors',\n        credentials: 'include'\n    });\n}\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1682732079,"post_id":76134135,"comment_id":134266607,"body_markdown":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration.  You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.  You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - some problems and issues","body":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration.  You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.  You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - some problems and issues"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1682732889,"post_id":76134135,"comment_id":134266660,"body_markdown":"Is cross-platform compatibility necessary for your project?","body":"Is cross-platform compatibility necessary for your project?"},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1682733115,"post_id":76134135,"comment_id":134266679,"body_markdown":"Cross-platform compatibility is important, yes.","body":"Cross-platform compatibility is important, yes."},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1682735261,"post_id":76134135,"comment_id":134266802,"body_markdown":"@MadProgrammer Would you mind copying your above comment as an answer to get the well earned reputation points?","body":"@MadProgrammer Would you mind copying your above comment as an answer to get the well earned reputation points?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682747118,"post_id":76134135,"comment_id":134267526,"body_markdown":"(BTW you can set Swing to ignore that button: [`setDefaultCloseOperation()`](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)))","body":"(BTW you can set Swing to ignore that button: <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)\" rel=\"nofollow noreferrer\"><code>setDefaultCloseOperation()</code></a>)"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682756182,"creation_date":1682736247,"answer_id":76134307,"question_id":76134135,"body_markdown":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration. \r\n\r\nYou &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance. \r\n\r\nYou could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - same problems and issues \r\n\r\nTake a look at [Customizing the Title bar of an Application Window](https://medium.com/swlh/customizing-the-title-bar-of-an-application-window-50a4ac3ed27e) for some &quot;inspiration&quot;.\r\n\r\nThis also suggestions making use of JNI/JNA, which further complicates the issues.\r\n\r\nYou might also like to have a look at [this example](https://stackoverflow.com/questions/16869877/how-to-remove-window-box-from-any-java-gui/16869893#16869893), it demonstrates how you can move an undecorated window, resizing is simular, but a adds and additional level of complexity.","title":"How to remove the close button of a JFrame decoration in Java Swing?","body":"<p>In Java/Swing - you can't ... or not from a &quot;natively generated&quot; window decoration.</p>\n<p>You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.</p>\n<p>You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it's much in the same as crafting your own look and feel delegate - same problems and issues</p>\n<p>Take a look at <a href=\"https://medium.com/swlh/customizing-the-title-bar-of-an-application-window-50a4ac3ed27e\" rel=\"nofollow noreferrer\">Customizing the Title bar of an Application Window</a> for some &quot;inspiration&quot;.</p>\n<p>This also suggestions making use of JNI/JNA, which further complicates the issues.</p>\n<p>You might also like to have a look at <a href=\"https://stackoverflow.com/questions/16869877/how-to-remove-window-box-from-any-java-gui/16869893#16869893\">this example</a>, it demonstrates how you can move an undecorated window, resizing is simular, but a adds and additional level of complexity.</p>\n"}],"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76134307,"answer_count":1,"score":1,"last_activity_date":1682756182,"creation_date":1682731830,"question_id":76134135,"body_markdown":"How can I remove the close button of a JFrame in Swing while the min/max buttons and the rest of the frame decoration shall still be available? TYVMIA","title":"How to remove the close button of a JFrame decoration in Java Swing?","body":"<p>How can I remove the close button of a JFrame in Swing while the min/max buttons and the rest of the frame decoration shall still be available? TYVMIA</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1509127127,"post_id":46980899,"comment_id":80909303,"body_markdown":"When you say &quot;authenticated&quot;, what does that mean exactly? Spring Security doesn&#39;t know about your user, so it&#39;s not authenticated *to it*. Perhaps you are looking for either SAML or OAuth with tokens granted by a centralized company server.","body":"When you say &quot;authenticated&quot;, what does that mean exactly? Spring Security doesn&#39;t know about your user, so it&#39;s not authenticated <i>to it</i>. Perhaps you are looking for either SAML or OAuth with tokens granted by a centralized company server."},{"owner":{"account_id":6755124,"reputation":587,"user_id":5203849,"accept_rate":73,"display_name":"ds390s"},"score":0,"creation_date":1509128721,"post_id":46980899,"comment_id":80910044,"body_markdown":"When I say that the user is &quot;authenticated,&quot; I mean that my filter will be able to tell, based on an item in the request, whether the user has gone to the central authentication system and had their credentials validated. I can&#39;t talk about it more specifically, for security reasons. I want Spring Security to perform only authorization, and not authentication.","body":"When I say that the user is &quot;authenticated,&quot; I mean that my filter will be able to tell, based on an item in the request, whether the user has gone to the central authentication system and had their credentials validated. I can&#39;t talk about it more specifically, for security reasons. I want Spring Security to perform only authorization, and not authentication."},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1509133539,"post_id":46980899,"comment_id":80912167,"body_markdown":"You *have* to authenticate to Spring Security. That authentication can take the form of an assertion from your SSO system, but it has to be passed over somehow. It looks like SAML is probably the best approach.","body":"You <i>have</i> to authenticate to Spring Security. That authentication can take the form of an assertion from your SSO system, but it has to be passed over somehow. It looks like SAML is probably the best approach."}],"owner":{"account_id":6755124,"reputation":587,"user_id":5203849,"accept_rate":73,"display_name":"ds390s"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":648,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682755724,"creation_date":1509126871,"question_id":46980899,"body_markdown":"I would like to use Spring Security&#39;s `@PreAuthorize(&quot;hasAnyRole(&#39;ADMIN&#39;)&quot;)` annotations to secure my API, however, I must use my company&#39;s centralized authentication system, instead of having the user log in through Spring-Security.\r\n\r\nTo be very clear on what that means:\r\n\r\n - My app may not ask the user for a password\r\n - The user will already be authenticated before getting anywhere near my app. If they aren&#39;t, I am just redirecting back to the central authentication server.\r\n\r\nWhat I do have access to is a mapping of users to roles, so I&#39;ve implemented a custom `UserDetailsService` based on [this tutorial][1].\r\n\r\n    @Service\r\n    public class CustomUserDetailsService implements UserDetailsService {\r\n    \r\n        @Autowired\r\n        private UsersRepository usersRepository;\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(final String username) throws UsernameNotFoundException {\r\n            Optional&lt;Users&gt; optionalUsers = usersRepository.findByUserId(username);\r\n    \r\n            optionalUsers\r\n                    .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found&quot;));\r\n            return optionalUsers\r\n                    .map(CustomUserDetails::new).get();\r\n        }\r\n    }\r\n\r\nAnd inject it into Spring Security in a configuration file:\r\n\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @EnableWebSecurity\r\n    @EnableJpaRepositories(basePackageClasses = UsersRepository.class)\r\n    @Configuration\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate CustomUserDetailsService userDetailsService;\r\n    \r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \r\n    \t\tauth.userDetailsService(userDetailsService);\r\n    \r\n            http.addFilterAt(\r\n                new TrivialFilter(), BasicAuthenticationFilter.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \r\n    \t\thttp.authorizeRequests().antMatchers(&quot;**/secured/**&quot;).authenticated().anyRequest().permitAll().and().formLogin()\r\n    \t\t\t\t.permitAll();\r\n    \t}\r\n    \r\n    }\r\n\r\nThis works very well. It is successfully evaluating the user roles and allowing/denying access based on the `@PreAuthorize` annotation. I&#39;ve even added a filter to the Servlet filter chain which I can eventually use to verify authentication myself. (Right now it just logs and calls `chain.doFilter(req, res)`.)\r\n\r\nSo how do I stop Spring-Security from asking for a password, while keeping this other good stuff intact?\r\n\r\nIt seems, if I remove any part of the `HttpSecurity.authorizeRequests()` method chain, that, while it might disable the login screen, it will, for any method with the `@PreAuthorize` annotation, just assume an unauthorized user. The request doesn&#39;t access the `CustomUserDetailsService` class. (Though it does still pass through the `TrivialFilter` class.) It just responds with a 403 code. \r\n\r\nI can have my filter extract the username from the request and and validate it. I just need to know how to completely replace the basic username/password system, with my filter.\r\n\r\n  [1]: https://github.com/TechPrimers/spring-security-db-example","title":"Spring Security Role Based Authorization with Independent Authentication System","body":"<p>I would like to use Spring Security's <code>@PreAuthorize(&quot;hasAnyRole('ADMIN')&quot;)</code> annotations to secure my API, however, I must use my company's centralized authentication system, instead of having the user log in through Spring-Security.</p>\n<p>To be very clear on what that means:</p>\n<ul>\n<li>My app may not ask the user for a password</li>\n<li>The user will already be authenticated before getting anywhere near my app. If they aren't, I am just redirecting back to the central authentication server.</li>\n</ul>\n<p>What I do have access to is a mapping of users to roles, so I've implemented a custom <code>UserDetailsService</code> based on <a href=\"https://github.com/TechPrimers/spring-security-db-example\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<pre><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    @Autowired\n    private UsersRepository usersRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(final String username) throws UsernameNotFoundException {\n        Optional&lt;Users&gt; optionalUsers = usersRepository.findByUserId(username);\n\n        optionalUsers\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found&quot;));\n        return optionalUsers\n                .map(CustomUserDetails::new).get();\n    }\n}\n</code></pre>\n<p>And inject it into Spring Security in a configuration file:</p>\n<pre><code>@EnableGlobalMethodSecurity(prePostEnabled = true)\n@EnableWebSecurity\n@EnableJpaRepositories(basePackageClasses = UsersRepository.class)\n@Configuration\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private CustomUserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n\n        auth.userDetailsService(userDetailsService);\n\n        http.addFilterAt(\n            new TrivialFilter(), BasicAuthenticationFilter.class);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.authorizeRequests().antMatchers(&quot;**/secured/**&quot;).authenticated().anyRequest().permitAll().and().formLogin()\n                .permitAll();\n    }\n\n}\n</code></pre>\n<p>This works very well. It is successfully evaluating the user roles and allowing/denying access based on the <code>@PreAuthorize</code> annotation. I've even added a filter to the Servlet filter chain which I can eventually use to verify authentication myself. (Right now it just logs and calls <code>chain.doFilter(req, res)</code>.)</p>\n<p>So how do I stop Spring-Security from asking for a password, while keeping this other good stuff intact?</p>\n<p>It seems, if I remove any part of the <code>HttpSecurity.authorizeRequests()</code> method chain, that, while it might disable the login screen, it will, for any method with the <code>@PreAuthorize</code> annotation, just assume an unauthorized user. The request doesn't access the <code>CustomUserDetailsService</code> class. (Though it does still pass through the <code>TrivialFilter</code> class.) It just responds with a 403 code.</p>\n<p>I can have my filter extract the username from the request and and validate it. I just need to know how to completely replace the basic username/password system, with my filter.</p>\n"},{"tags":["java","android","html",".net","xml"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681830141,"post_id":76046115,"comment_id":134118184,"body_markdown":"It is pretty unclear what you want. You can use Socket.connect(). And then the rest. What is the problem?","body":"It is pretty unclear what you want. You can use Socket.connect(). And then the rest. What is the problem?"},{"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"score":0,"creation_date":1681838887,"post_id":76046115,"comment_id":134120362,"body_markdown":"@blackapps, thank you sir for the reply. I know all about the Socket parameters and how to define them including connect.  What I really want to know is how to link or interface the Socket class file to the app and make the app use it like an attached module or sort - how do i combine them e.g Socket + web browser or Facebook etc?  What is the standard procedure?","body":"@blackapps, thank you sir for the reply. I know all about the Socket parameters and how to define them including connect.  What I really want to know is how to link or interface the Socket class file to the app and make the app use it like an attached module or sort - how do i combine them e.g Socket + web browser or Facebook etc?  What is the standard procedure?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681849931,"post_id":76046115,"comment_id":134122731,"body_markdown":"Si you want a browser like Chrome let use your socket stuff?","body":"Si you want a browser like Chrome let use your socket stuff?"},{"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"score":0,"creation_date":1682116747,"post_id":76046115,"comment_id":134170572,"body_markdown":"@blackapps. yes sir","body":"@blackapps. yes sir"}],"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682755663,"creation_date":1681829772,"question_id":76046115,"body_markdown":"I developed a custom Socket class from a separate package in the core java package library using eclipse IDE, it contains Socket and SocketImpl classes. I want networking apps to default to them for internet.\r\n\r\nI do have some experience in coding and unpacking and packing android apps.\r\n\r\nso, how do i do it?\r\n\r\nafter searching online, i tried opening up some android browsers, facebook, whatsapp, gmail, etc looking for  main activity java sources to see if i need to import my classes but it was so difficult, i couldnt tell which class was right for importing or even if i&#39;m using the correct procedure. i thought this would be straightforward but its complicated.","title":"how does an android application (e.g web browser, facebook, whatsapp, gmail, video player url streaming e.tc) access a java.net.socket for internet?","body":"<p>I developed a custom Socket class from a separate package in the core java package library using eclipse IDE, it contains Socket and SocketImpl classes. I want networking apps to default to them for internet.</p>\n<p>I do have some experience in coding and unpacking and packing android apps.</p>\n<p>so, how do i do it?</p>\n<p>after searching online, i tried opening up some android browsers, facebook, whatsapp, gmail, etc looking for  main activity java sources to see if i need to import my classes but it was so difficult, i couldnt tell which class was right for importing or even if i'm using the correct procedure. i thought this would be straightforward but its complicated.</p>\n"},{"tags":["java","ubuntu","automation","apt"],"comments":[{"owner":{"account_id":1546181,"reputation":10588,"user_id":1439688,"display_name":"zakinster"},"score":0,"creation_date":1381410140,"post_id":19275856,"comment_id":28574647,"body_markdown":"Since you&#39;re asking about the usage of the *Ubuntu/Debian* package manager, your question would better fit on [*Ask Ubuntu*](http://askubuntu.com/about) or [*Unix &amp; Linux Stack Exchange*](http://unix.stackexchange.com/).","body":"Since you&#39;re asking about the usage of the <i>Ubuntu/Debian</i> package manager, your question would better fit on <a href=\"http://askubuntu.com/about\"><i>Ask Ubuntu</i></a> or <a href=\"http://unix.stackexchange.com/\"><i>Unix &amp; Linux Stack Exchange</i></a>."},{"owner":{"account_id":481416,"reputation":355404,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1422223541,"post_id":19275856,"comment_id":44655757,"body_markdown":"On askubuntu: http://askubuntu.com/questions/190582/installing-java-automatically-with-silent-option","body":"On askubuntu: <a href=\"http://askubuntu.com/questions/190582/installing-java-automatically-with-silent-option\" title=\"installing java automatically with silent option\">askubuntu.com/questions/190582/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":99792,"reputation":11836,"user_id":269377,"accept_rate":86,"display_name":"Maxym"},"score":0,"creation_date":1382295866,"post_id":19391042,"comment_id":28893425,"body_markdown":"@KJTanaka: you are welcome! please consider to accept it as a solution then ;) or ask more details if it does not solve your entire problem. thanks","body":"@KJTanaka: you are welcome! please consider to accept it as a solution then ;) or ask more details if it does not solve your entire problem. thanks"},{"owner":{"account_id":2985579,"reputation":3499,"user_id":2534513,"accept_rate":64,"display_name":"Ashesh"},"score":0,"creation_date":1432972935,"post_id":19391042,"comment_id":49160371,"body_markdown":"Part of it is documented online at Ubuntu&#39;s [add-apt-repository](http://manpages.ubuntu.com/manpages/trusty/man1/add-apt-repository.1.html), [apt-get](http://manpages.ubuntu.com/manpages/lucid/man8/apt-get.8.html) and [debconf](http://manpages.ubuntu.com/manpages/hardy/man7/debconf-devel.7.html) manuals. You can also use the command line to get the details.","body":"Part of it is documented online at Ubuntu&#39;s <a href=\"http://manpages.ubuntu.com/manpages/trusty/man1/add-apt-repository.1.html\" rel=\"nofollow noreferrer\">add-apt-repository</a>, <a href=\"http://manpages.ubuntu.com/manpages/lucid/man8/apt-get.8.html\" rel=\"nofollow noreferrer\">apt-get</a> and <a href=\"http://manpages.ubuntu.com/manpages/hardy/man7/debconf-devel.7.html\" rel=\"nofollow noreferrer\">debconf</a> manuals. You can also use the command line to get the details."},{"owner":{"account_id":347033,"reputation":67162,"user_id":680920,"accept_rate":85,"display_name":"quickshiftin"},"score":0,"creation_date":1659651084,"post_id":19391042,"comment_id":129351419,"body_markdown":"A small note, the license number changes over time, I had to adjust to `v1-3`, surely it could increment again in the future.","body":"A small note, the license number changes over time, I had to adjust to <code>v1-3</code>, surely it could increment again in the future."}],"tags":[],"owner":{"account_id":99792,"reputation":11836,"user_id":269377,"accept_rate":86,"display_name":"Maxym"},"comment_count":3,"down_vote_count":0,"up_vote_count":111,"is_accepted":true,"score":111,"last_activity_date":1381871073,"creation_date":1381871073,"answer_id":19391042,"question_id":19275856,"body_markdown":"try this out:\r\n\r\n    sudo add-apt-repository -y ppa:webupd8team/java\r\n    sudo apt-get update\r\n    echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections\r\n    echo debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections\r\n    sudo apt-get -y install oracle-java7-installer \r\n\r\nrunning 3rd and 4th command on my debian 7.1 helps, so I think the same can help on ubuntu as well","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>try this out:</p>\n\n<pre><code>sudo add-apt-repository -y ppa:webupd8team/java\nsudo apt-get update\necho debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections\necho debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections\nsudo apt-get -y install oracle-java7-installer \n</code></pre>\n\n<p>running 3rd and 4th command on my debian 7.1 helps, so I think the same can help on ubuntu as well</p>\n"},{"comments":[{"owner":{"account_id":277026,"reputation":802,"user_id":570752,"accept_rate":38,"display_name":"DoRivard"},"score":3,"creation_date":1436368963,"post_id":26591300,"comment_id":50584653,"body_markdown":"it also works with oracle-java8-installer using ```- name: accept oracle license\n  debconf: name=&#39;oracle-java8-installer&#39; question=&#39;shared/accepted-oracle-license-v1-1&#39; value=&#39;true&#39; vtype=&#39;select&#39;```","body":"it also works with oracle-java8-installer using <code>- name: accept oracle license   debconf: name=&#39;oracle-java8-installer&#39; question=&#39;shared&#47;accepted-oracle-license-v1-1&#39; value=&#39;true&#39; vtype=&#39;select&#39;</code>"},{"owner":{"account_id":7432044,"reputation":330,"user_id":5888928,"display_name":"Roy Wood"},"score":5,"creation_date":1496243337,"post_id":26591300,"comment_id":75583581,"body_markdown":"Note that it&#39;s critical to use quotes on the debconf value!  If you use just &quot;value: true&quot; in your playbook, then the value in the debconf database gets set to &quot;True&quot; and the silent installation will fail with the usual warning of &quot;oracle-license-v1-1 license could not be presented&quot;.  You have to specify &quot;value: &#39;true&#39; &quot; in the playbook to ensure that the debconf setting is set to &#39;true&#39;, which is the exact string the Oracle installer looks for!","body":"Note that it&#39;s critical to use quotes on the debconf value!  If you use just &quot;value: true&quot; in your playbook, then the value in the debconf database gets set to &quot;True&quot; and the silent installation will fail with the usual warning of &quot;oracle-license-v1-1 license could not be presented&quot;.  You have to specify &quot;value: &#39;true&#39; &quot; in the playbook to ensure that the debconf setting is set to &#39;true&#39;, which is the exact string the Oracle installer looks for!"},{"owner":{"account_id":964312,"reputation":9211,"user_id":6995808,"display_name":"jonatan"},"score":0,"creation_date":1498030549,"post_id":26591300,"comment_id":76323792,"body_markdown":"I wish more system configuration questions were answered with Ansible syntax :D","body":"I wish more system configuration questions were answered with Ansible syntax :D"}],"tags":[],"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"comment_count":3,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1498124686,"creation_date":1414424458,"answer_id":26591300,"question_id":19275856,"body_markdown":"If you are using Ansible for automation you may want to put this into your playbook:\r\n\r\n    tasks:\r\n\r\n      - name: add java PPA\r\n        apt_repository:\r\n          repo: &quot;ppa:webupd8team/java&quot;\r\n\r\n      - name: accept oracle license\r\n        debconf:\r\n          name: &quot;oracle-java7-installer&quot;\r\n          question: &quot;shared/accepted-oracle-license-v1-1&quot;\r\n          value: &quot;true&quot;\r\n          vtype: &quot;select&quot;\r\n\r\n      - name: install jdk\r\n        apt:\r\n          name: &quot;oracle-java7-installer&quot;\r\n\r\n**Note:** The `value` argument in `debconf` must be set to `&quot;true&quot;`, including the quotes, as per [comment][1] by [Roy Wood][2].\r\n\r\n[1]: https://stackoverflow.com/questions/19275856/auto-yes-to-the-license-agreement-on-sudo-apt-get-y-install-oracle-java7-instal#comment75583581_26591300\r\n[2]: https://stackoverflow.com/users/5888928/roy-wood\r\n","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>If you are using Ansible for automation you may want to put this into your playbook:</p>\n\n<pre><code>tasks:\n\n  - name: add java PPA\n    apt_repository:\n      repo: \"ppa:webupd8team/java\"\n\n  - name: accept oracle license\n    debconf:\n      name: \"oracle-java7-installer\"\n      question: \"shared/accepted-oracle-license-v1-1\"\n      value: \"true\"\n      vtype: \"select\"\n\n  - name: install jdk\n    apt:\n      name: \"oracle-java7-installer\"\n</code></pre>\n\n<p><strong>Note:</strong> The <code>value</code> argument in <code>debconf</code> must be set to <code>\"true\"</code>, including the quotes, as per <a href=\"https://stackoverflow.com/questions/19275856/auto-yes-to-the-license-agreement-on-sudo-apt-get-y-install-oracle-java7-instal#comment75583581_26591300\">comment</a> by <a href=\"https://stackoverflow.com/users/5888928/roy-wood\">Roy Wood</a>.</p>\n"},{"comments":[{"owner":{"account_id":3317456,"reputation":1056,"user_id":2789467,"display_name":"Paul"},"score":2,"creation_date":1558551876,"post_id":54499612,"comment_id":99143145,"body_markdown":"I can confirm this answer also works for java 12. Note the license name is different than the accepted answer: v1-2, not v1-1.","body":"I can confirm this answer also works for java 12. Note the license name is different than the accepted answer: v1-2, not v1-1."},{"owner":{"account_id":2368034,"reputation":1260,"user_id":2073339,"display_name":"Khaled AbuShqear"},"score":0,"creation_date":1593829395,"post_id":54499612,"comment_id":110921923,"body_markdown":"Now it says `&#39;oracle-java11-installer&#39; has no installation candidate`","body":"Now it says <code>&#39;oracle-java11-installer&#39; has no installation candidate</code>"},{"owner":{"account_id":2368034,"reputation":1260,"user_id":2073339,"display_name":"Khaled AbuShqear"},"score":0,"creation_date":1593829487,"post_id":54499612,"comment_id":110921928,"body_markdown":"And adding ppa `linuxuprising/java` didn&#39;t work with me, I used this fix:\n`echo &quot;deb http://ppa.launchpad.net/linuxuprising/java/ubuntu bionic main&quot; | sudo tee /etc/apt/sources.list.d/linuxuprising-java.list &amp;&amp; apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 73C3DB2A`","body":"And adding ppa <code>linuxuprising&#47;java</code> didn&#39;t work with me, I used this fix: <code>echo &quot;deb http:&#47;&#47;ppa.launchpad.net&#47;linuxuprising&#47;java&#47;ubuntu bionic main&quot; | sudo tee &#47;etc&#47;apt&#47;sources.list.d&#47;linuxuprising-java.list &amp;&amp; apt-key adv --keyserver hkp:&#47;&#47;keyserver.ubuntu.com:80 --recv-keys 73C3DB2A</code>"}],"tags":[],"owner":{"account_id":446439,"reputation":2037,"user_id":2956829,"accept_rate":93,"display_name":"el n00b"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1549163157,"creation_date":1549163157,"answer_id":54499612,"question_id":19275856,"body_markdown":"**ppa:linuxuprising/java &amp;&amp; oracle-java11-installer**\r\n\r\nFor anyone using the Linux Uprising Java 11 installer that stumble across this, see these:\r\n\r\n 1. https://launchpad.net/~linuxuprising/+archive/ubuntu/java\r\n 2. https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html\r\n\r\nInstead of the commands in the answer (as listed on their site), you want this:\r\n\r\n    echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | \\\r\n    sudo /usr/bin/debconf-set-selections\r\n\r\nHere&#39;s my Docker setup for an Ubuntu 18.04-based container:\r\n\r\n    RUN apt-get update &amp;&amp; apt-install -y software-properties-common &amp;&amp; \\\r\n        add-apt-repository -y ppa:linuxuprising/java &amp;&amp; \\\r\n        apt-get update &amp;&amp; \\\r\n        echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | sudo /usr/bin/debconf-set-selections &amp;&amp; \\\r\n        apt-get install -y oracle-java11-installer &amp;&amp; \\\r\n        apt install oracle-java11-set-default","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p><strong>ppa:linuxuprising/java &amp;&amp; oracle-java11-installer</strong></p>\n\n<p>For anyone using the Linux Uprising Java 11 installer that stumble across this, see these:</p>\n\n<ol>\n<li><a href=\"https://launchpad.net/~linuxuprising/+archive/ubuntu/java\" rel=\"noreferrer\">https://launchpad.net/~linuxuprising/+archive/ubuntu/java</a></li>\n<li><a href=\"https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html\" rel=\"noreferrer\">https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html</a></li>\n</ol>\n\n<p>Instead of the commands in the answer (as listed on their site), you want this:</p>\n\n<pre><code>echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | \\\nsudo /usr/bin/debconf-set-selections\n</code></pre>\n\n<p>Here's my Docker setup for an Ubuntu 18.04-based container:</p>\n\n<pre><code>RUN apt-get update &amp;&amp; apt-install -y software-properties-common &amp;&amp; \\\n    add-apt-repository -y ppa:linuxuprising/java &amp;&amp; \\\n    apt-get update &amp;&amp; \\\n    echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | sudo /usr/bin/debconf-set-selections &amp;&amp; \\\n    apt-get install -y oracle-java11-installer &amp;&amp; \\\n    apt install oracle-java11-set-default\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6417120,"reputation":31,"user_id":4974955,"display_name":"KireByte"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1556046241,"creation_date":1556045871,"answer_id":55817745,"question_id":19275856,"body_markdown":"For Java 11 you can use this:\r\n\r\n    add-apt-repository ppa:linuxuprising/java\r\n    echo debconf shared/accepted-oracle-license-v1-2 select true | debconf-set-selections\r\n    echo debconf shared/accepted-oracle-license-v1-2 seen true | debconf-set-selections\r\n    apt-get update &amp;&amp; apt-get install -y oracle-java11-installer\r\n\r\nThis works perfectly in a docker container.","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>For Java 11 you can use this:</p>\n\n<pre><code>add-apt-repository ppa:linuxuprising/java\necho debconf shared/accepted-oracle-license-v1-2 select true | debconf-set-selections\necho debconf shared/accepted-oracle-license-v1-2 seen true | debconf-set-selections\napt-get update &amp;&amp; apt-get install -y oracle-java11-installer\n</code></pre>\n\n<p>This works perfectly in a docker container.</p>\n"},{"tags":[],"owner":{"account_id":1587080,"reputation":3848,"user_id":2600196,"accept_rate":100,"display_name":"kakabali"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682755593,"creation_date":1682755593,"answer_id":76135166,"question_id":19275856,"body_markdown":"Just like other answers, following works for the JDK 17\r\n\r\n**accepted-oracle-license-v1-3** - in specific\r\n\r\n    echo oracle-java17-installer shared/accepted-oracle-license-v1-3 select true | sudo /usr/bin/debconf-set-selections","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>Just like other answers, following works for the JDK 17</p>\n<p><strong>accepted-oracle-license-v1-3</strong> - in specific</p>\n<pre><code>echo oracle-java17-installer shared/accepted-oracle-license-v1-3 select true | sudo /usr/bin/debconf-set-selections\n</code></pre>\n"}],"owner":{"account_id":1245688,"reputation":872,"user_id":1207202,"accept_rate":75,"display_name":"kojiwell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29994,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"closed_date":1682853107,"accepted_answer_id":19391042,"answer_count":5,"score":53,"last_activity_date":1682755614,"creation_date":1381331341,"question_id":19275856,"body_markdown":"The Oracle Java package for Ubuntu interactively asks about the License Agreement. So I have to say &#39;OK&#39; and then &#39;yes&#39; every time, but I&#39;d like to automate it. What I do is this:\r\n\r\n    sudo add-apt-repository -y ppa:webupd8team/java\r\n    sudo apt-get update\r\n    sudo apt-get -y install oracle-java7-installer \r\n\r\nIs there a simple way to automate the agreement process without using expect?","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>The Oracle Java package for Ubuntu interactively asks about the License Agreement. So I have to say 'OK' and then 'yes' every time, but I'd like to automate it. What I do is this:</p>\n\n<pre><code>sudo add-apt-repository -y ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get -y install oracle-java7-installer \n</code></pre>\n\n<p>Is there a simple way to automate the agreement process without using expect?</p>\n"},{"tags":["java","debugging"],"comments":[{"owner":{"account_id":1697551,"reputation":770,"user_id":1558609,"accept_rate":83,"display_name":"chris.tian"},"score":1,"creation_date":1392145414,"post_id":21710655,"comment_id":32828191,"body_markdown":"@ceving: This is no duplicate of the posted question. Here he can still start the application in debug mode.","body":"@ceving: This is no duplicate of the posted question. Here he can still start the application in debug mode."},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":0,"creation_date":1392145535,"post_id":21710655,"comment_id":32828262,"body_markdown":"@chris.tian But the answers explain how to attach to a running process which is the problem in this question.","body":"@chris.tian But the answers explain how to attach to a running process which is the problem in this question."},{"owner":{"account_id":164442,"reputation":10993,"user_id":387184,"accept_rate":97,"display_name":"user387184"},"score":0,"creation_date":1392145977,"post_id":21710655,"comment_id":32828511,"body_markdown":"I can&#39;t start it in debug mode? how? I can just start the PC application like any other one. Or what do you mean?","body":"I can&#39;t start it in debug mode? how? I can just start the PC application like any other one. Or what do you mean?"}],"answers":[{"comments":[{"owner":{"account_id":164442,"reputation":10993,"user_id":387184,"accept_rate":97,"display_name":"user387184"},"score":0,"creation_date":1392145867,"post_id":21710728,"comment_id":32828447,"body_markdown":"thanks but I cant compile it anymore since I do not have all the libraries.. - it is a very big app! and I just have fortunately somehow kept the most important jars, - not all","body":"thanks but I cant compile it anymore since I do not have all the libraries.. - it is a very big app! and I just have fortunately somehow kept the most important jars, - not all"},{"owner":{"account_id":1697551,"reputation":770,"user_id":1558609,"accept_rate":83,"display_name":"chris.tian"},"score":0,"creation_date":1392148168,"post_id":21710728,"comment_id":32829850,"body_markdown":"Since I do not know anything about your application, I can only recommend an iterative approach: Compile your application stepwise and for every ClassNotFoundException you can check findjar.com to identify the required library.","body":"Since I do not know anything about your application, I can only recommend an iterative approach: Compile your application stepwise and for every ClassNotFoundException you can check findjar.com to identify the required library."}],"tags":[],"owner":{"account_id":1697551,"reputation":770,"user_id":1558609,"accept_rate":83,"display_name":"chris.tian"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1392145254,"creation_date":1392145254,"answer_id":21710728,"question_id":21710655,"body_markdown":"You could decompile the jar files with JAD (http://varaneckas.com/jad/), import the project into Eclipse and debug from there (see http://www.vogella.com/tutorials/EclipseDebugging/article.html). Is this what you are looking for?","title":"How to attach to a running jar and debug it?","body":"<p>You could decompile the jar files with JAD (<a href=\"http://varaneckas.com/jad/\" rel=\"nofollow\">http://varaneckas.com/jad/</a>), import the project into Eclipse and debug from there (see <a href=\"http://www.vogella.com/tutorials/EclipseDebugging/article.html\" rel=\"nofollow\">http://www.vogella.com/tutorials/EclipseDebugging/article.html</a>). Is this what you are looking for?</p>\n"}],"owner":{"account_id":164442,"reputation":10993,"user_id":387184,"accept_rate":97,"display_name":"user387184"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1987,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1392176375,"accepted_answer_id":21710728,"answer_count":1,"score":1,"last_activity_date":1682755415,"creation_date":1392145011,"question_id":21710655,"body_markdown":"I have written an old app long time ago on another computer. This one does not exist any more - and with it all the source is gone - but I still have the app in form of jar files.\r\n\r\nNow I need to check my old code what I have done in a particular place in code. I know I can create a Java from it - but I need to check it while it&#39;s running...\r\n\r\nI have tried javasnoop - but it can not attach. It keeps trying but forever - other apps I can attach to and debug.\r\n\r\nis there any other way/tool that can attach to a running jar and debug it?\r\n\r\nIf that makes a difference: the application is being started with an EXE file and then uses the jar libs...\r\n","title":"How to attach to a running jar and debug it?","body":"<p>I have written an old app long time ago on another computer. This one does not exist any more - and with it all the source is gone - but I still have the app in form of jar files.</p>\n<p>Now I need to check my old code what I have done in a particular place in code. I know I can create a Java from it - but I need to check it while it's running...</p>\n<p>I have tried javasnoop - but it can not attach. It keeps trying but forever - other apps I can attach to and debug.</p>\n<p>is there any other way/tool that can attach to a running jar and debug it?</p>\n<p>If that makes a difference: the application is being started with an EXE file and then uses the jar libs...</p>\n"},{"tags":["java","hibernate","spring-boot","gradle","liquibase"],"answers":[{"comments":[{"owner":{"account_id":14624655,"reputation":640,"user_id":10562333,"display_name":"Christian Dr&#228;ger"},"score":2,"creation_date":1654693305,"post_id":52538298,"comment_id":128151507,"body_markdown":"for those who are looking for gradle kotlin DSL syntax it is: `liquibaseRuntime(sourceSets.getByName(&quot;main&quot;).output)`","body":"for those who are looking for gradle kotlin DSL syntax it is: <code>liquibaseRuntime(sourceSets.getByName(&quot;main&quot;).output)</code>"},{"owner":{"account_id":10085235,"reputation":441,"user_id":7454104,"display_name":"Flavio Oliva"},"score":1,"creation_date":1662480565,"post_id":52538298,"comment_id":130013146,"body_markdown":"What would be this liquibaseRuntime in maven?","body":"What would be this liquibaseRuntime in maven?"}],"tags":[],"owner":{"account_id":1262727,"reputation":10432,"user_id":1220627,"accept_rate":76,"display_name":"Sn&#230;bj&#248;rn"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1538055240,"creation_date":1538055240,"answer_id":52538298,"question_id":52517215,"body_markdown":"Turns out I needed to add some undocumented magic sauce.\r\n\r\n    diff.dependsOn compileJava\r\n    diffChangeLog.dependsOn compileJava\r\n    generateChangelog.dependsOn compileJava\r\n    \r\n    dependencies {\r\n       // as before\r\n       liquibaseRuntime sourceSets.main.output // replaces liquibaseRuntime files(&#39;src/main&#39;)\r\n    }","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>Turns out I needed to add some undocumented magic sauce.</p>\n\n<pre><code>diff.dependsOn compileJava\ndiffChangeLog.dependsOn compileJava\ngenerateChangelog.dependsOn compileJava\n\ndependencies {\n   // as before\n   liquibaseRuntime sourceSets.main.output // replaces liquibaseRuntime files('src/main')\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12525083,"reputation":143,"user_id":9115193,"display_name":"Steve Saliman"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1582467968,"creation_date":1582467968,"answer_id":60363182,"question_id":52517215,"body_markdown":"I know this is an old thread, but I wanted to add some clarification for those who find this answer later...\r\n\r\nThe `liquibaseRuntime` configuration does not inherit from any other configuration.  This is because in most cases, Liquibase only needs to be able to parse the change logs and connect to the database.  To use something like the Hibernate module, or to generate change logs from your code, you need to add extra things to the liquibaseRuntime, such as Hibernate or Spring Data, and you&#39;d need `srcSets.main.output` to be able to find your project files themselves.\r\n\r\nThe comment that said &quot;All of your normal project dependencies would be here in addition to...&quot; referred to the fact that you would have a bunch of other dependencies in the block to build and run your project, not that they would be part of the `liquibaseRuntime` configuration.  If you do want all of the libraries from your project to also be part of the `liquibaseRuntime`, you can add `configurations.liquibaseRuntime.extendsFrom configurations.runtime` you your build.gradle, or if you already have a `configurations` block, you can add `liquibaseRuntime.extendsFrom runtime` to that block.  This should add all the project dependencies, and the project files themselves, to your liquibaseRuntime.\r\n\r\nI hope this helps.","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>I know this is an old thread, but I wanted to add some clarification for those who find this answer later...</p>\n\n<p>The <code>liquibaseRuntime</code> configuration does not inherit from any other configuration.  This is because in most cases, Liquibase only needs to be able to parse the change logs and connect to the database.  To use something like the Hibernate module, or to generate change logs from your code, you need to add extra things to the liquibaseRuntime, such as Hibernate or Spring Data, and you'd need <code>srcSets.main.output</code> to be able to find your project files themselves.</p>\n\n<p>The comment that said \"All of your normal project dependencies would be here in addition to...\" referred to the fact that you would have a bunch of other dependencies in the block to build and run your project, not that they would be part of the <code>liquibaseRuntime</code> configuration.  If you do want all of the libraries from your project to also be part of the <code>liquibaseRuntime</code>, you can add <code>configurations.liquibaseRuntime.extendsFrom configurations.runtime</code> you your build.gradle, or if you already have a <code>configurations</code> block, you can add <code>liquibaseRuntime.extendsFrom runtime</code> to that block.  This should add all the project dependencies, and the project files themselves, to your liquibaseRuntime.</p>\n\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634131970,"creation_date":1634131970,"answer_id":69556518,"question_id":52517215,"body_markdown":"This is how it worked for me with Gradle 6.3.0:\r\n\r\n    configurations {\r\n        liquibaseRuntime.extendsFrom runtimeClasspath\r\n    }\r\n    dependencies {\r\n        liquibaseRuntime sourceSets.main.output\r\n    }","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>This is how it worked for me with Gradle 6.3.0:</p>\n<pre><code>configurations {\n    liquibaseRuntime.extendsFrom runtimeClasspath\n}\ndependencies {\n    liquibaseRuntime sourceSets.main.output\n}\n</code></pre>\n"}],"owner":{"account_id":1262727,"reputation":10432,"user_id":1220627,"accept_rate":76,"display_name":"Sn&#230;bj&#248;rn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16085,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":52538298,"answer_count":3,"score":10,"last_activity_date":1682755089,"creation_date":1537963041,"question_id":52517215,"body_markdown":"I&#39;m having a hard time setting up LiquiBase in my Spring Boot project. I tried looking through the docs and finding some guides - but they seem contradict each other.\r\n\r\nI wish to use LiquiBase via Gradle and I want it to generate the changelogs from Hibernate and end up with a SQL script I can run on the server to update the schema to the appropriate version.\r\n\r\nTo get it to run via Gradle I&#39;m using this plugin  https://github.com/liquibase/liquibase-gradle-plugin using the recommended setup shown in their README.\r\n\r\nTo get the Hibernate diff to work I&#39;m using https://github.com/liquibase/liquibase-hibernate\r\n\r\nHere&#39;s my **build.gradle** file:\r\n\r\n    buildscript {\r\n    \text {\r\n    \t\tspringBootVersion = &#39;2.0.5.RELEASE&#39;\r\n    \t}\r\n    \trepositories {\r\n    \t\tmavenCentral()\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n    \t}\r\n    }\r\n    \r\n    plugins {\r\n    \tid &#39;java&#39;\r\n    \tid &#39;net.ltgt.apt&#39; version &#39;0.10&#39; // https://projectlombok.org/setup/gradle\r\n    \tid &#39;org.liquibase.gradle&#39; version &#39;2.0.1&#39; // https://github.com/liquibase/liquibase-gradle-plugin\r\n    }\r\n    \r\n    apply plugin: &#39;eclipse-wtp&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n    apply plugin: &#39;war&#39;\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = 1.8\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    \r\n        maven {\r\n            credentials {\r\n                username = oracleUser\r\n                password = oraclePass\r\n            }\r\n            url &#39;https://www.oracle.com/content/secure/maven/content&#39;\r\n        }\r\n    }\r\n    \r\n    liquibase {\r\n      activities {\r\n        main {\r\n          changeLogFile &#39;main.groovy&#39;\r\n          url &#39;jdbc:oracle:thin:@localhost:1521:XE&#39;\r\n          referenceUrl &#39;hibernate:spring:com.example?dialect=org.hibernate.dialect.Oracle10gDialect&#39;\r\n          username &#39;user&#39;\r\n          password &#39;pass&#39;\r\n        }\r\n      }\r\n    }\r\n    \r\n    configurations {\r\n    \tprovidedRuntime\r\n    }\r\n    \r\n    dependencies {\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-data-rest&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-hateoas&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-jooq&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-mail&#39;)\r\n    \tcompile(&#39;com.github.waffle:waffle-spring-boot-starter:1.9.0&#39;)\r\n    \tcompile(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;)\r\n    \truntime(&#39;org.springframework.boot:spring-boot-devtools&#39;)\r\n    \tcompileOnly(&#39;org.projectlombok:lombok&#39;)\r\n    \tapt(&#39;org.projectlombok:lombok:1.18.2&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase:liquibase-core:3.6.2&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase.ext:liquibase-hibernate5:3.6&#39;)\r\n    \tliquibaseRuntime(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;) // duplicate...\r\n    \tprovidedRuntime(&#39;org.springframework.boot:spring-boot-starter-tomcat&#39;)\r\n    \ttestCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    \ttestCompile(&#39;org.springframework.restdocs:spring-restdocs-mockmvc&#39;)\r\n    }\r\n\r\nRunning it via\r\n\r\n    &gt; .\\gradlew diffChangeLog -PrunList=main\r\n\r\nBut fails with\r\n\r\n&gt; Task :diffChangeLog liquibase-plugin: Running the &#39;main&#39; activity... Starting Liquibase at Wed, 26 Sep 2018 13:36:24 CEST (version 3.6.2\r\n&gt; built at 2018-07-03 11:28:09) Exception in thread &quot;main&quot;\r\n&gt; java.lang.NoClassDefFoundError:\r\n&gt; org/springframework/core/io/ClassPathResource\r\n&gt;         at liquibase.ext.hibernate.database.HibernateSpringPackageDatabase.isXmlFile(HibernateSpringPackageDatabase.java:54)\r\n\r\nIt looks like it cannot find Spring Boot. So I then tried removing the `liquibaseRuntime` but then the LiquiBase Gradle plugin complains that `liquibaseRuntime` is missing.\r\n\r\nSeems I&#39;m stuck in a loop. What is a sane way of setting this up?\r\nI really don&#39;t want to repeat every dependency inside the `liquibaseRuntime`. Also the doc literally says:\r\n\r\n&gt;     dependencies {\r\n&gt;       // All of your normal project dependencies would be here in addition to...\r\n&gt;       liquibaseRuntime &#39;org.liquibase:liquibase-core:3.6.1&#39;\r\n&gt;       liquibaseRuntime &#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;\r\n&gt;       liquibaseRuntime &#39;mysql:mysql-connector-java:5.1.34&#39;\r\n&gt;     }\r\n\r\nNote the \r\n\r\n&gt; // All of your normal project dependencies would be here in addition to...\r\n\r\nWhy is this happening?\r\n\r\n\r\nAlso, I noticed that you have to write database config twice. Why is that needed when it&#39;s already set in spring boot config?\r\n\r\n----------\r\n\r\nProgress\r\n---\r\n\r\nSo changing `liquibaseRuntime` to\r\n\r\n    liquibaseRuntime(&#39;org.liquibase:liquibase-core:3.6.2&#39;)\r\n    liquibaseRuntime(&#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;)\r\n    liquibaseRuntime(&#39;org.liquibase.ext:liquibase-hibernate5:3.6&#39;)\r\n    liquibaseRuntime(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;)\r\n    liquibaseRuntime(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    liquibaseRuntime files(&#39;src/main&#39;)\r\n\r\nMakes the errors go away. But it still doesn&#39;t work.\r\n\r\nRunning this command:\r\n\r\n    .\\gradlew diff\r\n\r\nGives me this output:\r\n\r\n    &gt; Task :diff\r\n    liquibase-plugin: Running the &#39;main&#39; activity...\r\n    Starting Liquibase at Wed, 26 Sep 2018 16:47:19 CEST (version 3.6.2 built at 2018-07-03 11:28:09)\r\n    \r\n    Diff Results:\r\n    Reference Database: null @ hibernate:spring:com.example.model?dialect=org.hibernate.dialect.Oracle10gDialect (Default Schema: HIBERNATE)\r\n    Comparison Database: SYSTEM @ jdbc:oracle:thin:@localhost:1521:XE (Default Schema: SYSTEM)\r\n    Compared Schemas: HIBERNATE -&gt; SYSTEM\r\n    Product Name:\r\n         Reference:   &#39;Hibernate&#39;\r\n         Target: &#39;Oracle&#39;\r\n    Product Version:\r\n         Reference:   &#39;5.2.17.Final&#39;\r\n         Target: &#39;Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production&#39;\r\n    Missing Catalog(s):\r\n         HIBERNATE\r\n    Unexpected Catalog(s): NONE\r\n    Changed Catalog(s): NONE\r\n    Missing Column(s): NONE\r\n    Unexpected Column(s): NONE\r\n    Changed Column(s): NONE\r\n    Missing Foreign Key(s): NONE\r\n    Unexpected Foreign Key(s): NONE\r\n    Changed Foreign Key(s): NONE\r\n    Missing Index(s): NONE\r\n    Unexpected Index(s): NONE\r\n    Changed Index(s): NONE\r\n    Missing Primary Key(s): NONE\r\n    Unexpected Primary Key(s): NONE\r\n    Changed Primary Key(s): NONE\r\n    Missing Sequence(s): NONE\r\n    Unexpected Sequence(s): NONE\r\n    Changed Sequence(s): NONE\r\n    Missing Stored Procedure(s): NONE\r\n    Unexpected Stored Procedure(s): NONE\r\n    Changed Stored Procedure(s): NONE\r\n    Missing Table(s): NONE\r\n    Unexpected Table(s): NONE\r\n    Changed Table(s): NONE\r\n    Missing Unique Constraint(s): NONE\r\n    Unexpected Unique Constraint(s): NONE\r\n    Changed Unique Constraint(s): NONE\r\n    Missing View(s): NONE\r\n    Unexpected View(s): NONE\r\n    Changed View(s): NONE\r\n    Liquibase command &#39;diff&#39; was executed successfully.\r\n    \r\n    \r\n    BUILD SUCCESSFUL in 7s\r\n    1 actionable task: 1 executed\r\n\r\nWhen running against an empty database.\r\n","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>I'm having a hard time setting up LiquiBase in my Spring Boot project. I tried looking through the docs and finding some guides - but they seem contradict each other.</p>\n<p>I wish to use LiquiBase via Gradle and I want it to generate the changelogs from Hibernate and end up with a SQL script I can run on the server to update the schema to the appropriate version.</p>\n<p>To get it to run via Gradle I'm using this plugin  <a href=\"https://github.com/liquibase/liquibase-gradle-plugin\" rel=\"nofollow noreferrer\">https://github.com/liquibase/liquibase-gradle-plugin</a> using the recommended setup shown in their README.</p>\n<p>To get the Hibernate diff to work I'm using <a href=\"https://github.com/liquibase/liquibase-hibernate\" rel=\"nofollow noreferrer\">https://github.com/liquibase/liquibase-hibernate</a></p>\n<p>Here's my <strong>build.gradle</strong> file:</p>\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.0.5.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n    }\n}\n\nplugins {\n    id 'java'\n    id 'net.ltgt.apt' version '0.10' // https://projectlombok.org/setup/gradle\n    id 'org.liquibase.gradle' version '2.0.1' // https://github.com/liquibase/liquibase-gradle-plugin\n}\n\napply plugin: 'eclipse-wtp'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\napply plugin: 'war'\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n\n    maven {\n        credentials {\n            username = oracleUser\n            password = oraclePass\n        }\n        url 'https://www.oracle.com/content/secure/maven/content'\n    }\n}\n\nliquibase {\n  activities {\n    main {\n      changeLogFile 'main.groovy'\n      url 'jdbc:oracle:thin:@localhost:1521:XE'\n      referenceUrl 'hibernate:spring:com.example?dialect=org.hibernate.dialect.Oracle10gDialect'\n      username 'user'\n      password 'pass'\n    }\n  }\n}\n\nconfigurations {\n    providedRuntime\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-data-jpa')\n    compile('org.springframework.boot:spring-boot-starter-data-rest')\n    compile('org.springframework.boot:spring-boot-starter-hateoas')\n    compile('org.springframework.boot:spring-boot-starter-jooq')\n    compile('org.springframework.boot:spring-boot-starter-web')\n    compile('org.springframework.boot:spring-boot-starter-mail')\n    compile('com.github.waffle:waffle-spring-boot-starter:1.9.0')\n    compile('com.oracle.jdbc:ojdbc8:12.2.0.1')\n    runtime('org.springframework.boot:spring-boot-devtools')\n    compileOnly('org.projectlombok:lombok')\n    apt('org.projectlombok:lombok:1.18.2')\n    liquibaseRuntime('org.liquibase:liquibase-core:3.6.2')\n    liquibaseRuntime('org.liquibase:liquibase-groovy-dsl:2.0.1')\n    liquibaseRuntime('org.liquibase.ext:liquibase-hibernate5:3.6')\n    liquibaseRuntime('com.oracle.jdbc:ojdbc8:12.2.0.1') // duplicate...\n    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n    testCompile('org.springframework.restdocs:spring-restdocs-mockmvc')\n}\n</code></pre>\n<p>Running it via</p>\n<pre><code>&gt; .\\gradlew diffChangeLog -PrunList=main\n</code></pre>\n<p>But fails with</p>\n<blockquote>\n<p>Task :diffChangeLog liquibase-plugin: Running the 'main' activity... Starting Liquibase at Wed, 26 Sep 2018 13:36:24 CEST (version 3.6.2\nbuilt at 2018-07-03 11:28:09) Exception in thread &quot;main&quot;\njava.lang.NoClassDefFoundError:\norg/springframework/core/io/ClassPathResource\nat liquibase.ext.hibernate.database.HibernateSpringPackageDatabase.isXmlFile(HibernateSpringPackageDatabase.java:54)</p>\n</blockquote>\n<p>It looks like it cannot find Spring Boot. So I then tried removing the <code>liquibaseRuntime</code> but then the LiquiBase Gradle plugin complains that <code>liquibaseRuntime</code> is missing.</p>\n<p>Seems I'm stuck in a loop. What is a sane way of setting this up?\nI really don't want to repeat every dependency inside the <code>liquibaseRuntime</code>. Also the doc literally says:</p>\n<blockquote>\n<pre><code>dependencies {\n  // All of your normal project dependencies would be here in addition to...\n  liquibaseRuntime 'org.liquibase:liquibase-core:3.6.1'\n  liquibaseRuntime 'org.liquibase:liquibase-groovy-dsl:2.0.1'\n  liquibaseRuntime 'mysql:mysql-connector-java:5.1.34'\n}\n</code></pre>\n</blockquote>\n<p>Note the</p>\n<blockquote>\n<p>// All of your normal project dependencies would be here in addition to...</p>\n</blockquote>\n<p>Why is this happening?</p>\n<p>Also, I noticed that you have to write database config twice. Why is that needed when it's already set in spring boot config?</p>\n<hr />\n<h2>Progress</h2>\n<p>So changing <code>liquibaseRuntime</code> to</p>\n<pre><code>liquibaseRuntime('org.liquibase:liquibase-core:3.6.2')\nliquibaseRuntime('org.liquibase:liquibase-groovy-dsl:2.0.1')\nliquibaseRuntime('org.liquibase.ext:liquibase-hibernate5:3.6')\nliquibaseRuntime('com.oracle.jdbc:ojdbc8:12.2.0.1')\nliquibaseRuntime('org.springframework.boot:spring-boot-starter-data-jpa')\nliquibaseRuntime files('src/main')\n</code></pre>\n<p>Makes the errors go away. But it still doesn't work.</p>\n<p>Running this command:</p>\n<pre><code>.\\gradlew diff\n</code></pre>\n<p>Gives me this output:</p>\n<pre><code>&gt; Task :diff\nliquibase-plugin: Running the 'main' activity...\nStarting Liquibase at Wed, 26 Sep 2018 16:47:19 CEST (version 3.6.2 built at 2018-07-03 11:28:09)\n\nDiff Results:\nReference Database: null @ hibernate:spring:com.example.model?dialect=org.hibernate.dialect.Oracle10gDialect (Default Schema: HIBERNATE)\nComparison Database: SYSTEM @ jdbc:oracle:thin:@localhost:1521:XE (Default Schema: SYSTEM)\nCompared Schemas: HIBERNATE -&gt; SYSTEM\nProduct Name:\n     Reference:   'Hibernate'\n     Target: 'Oracle'\nProduct Version:\n     Reference:   '5.2.17.Final'\n     Target: 'Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production'\nMissing Catalog(s):\n     HIBERNATE\nUnexpected Catalog(s): NONE\nChanged Catalog(s): NONE\nMissing Column(s): NONE\nUnexpected Column(s): NONE\nChanged Column(s): NONE\nMissing Foreign Key(s): NONE\nUnexpected Foreign Key(s): NONE\nChanged Foreign Key(s): NONE\nMissing Index(s): NONE\nUnexpected Index(s): NONE\nChanged Index(s): NONE\nMissing Primary Key(s): NONE\nUnexpected Primary Key(s): NONE\nChanged Primary Key(s): NONE\nMissing Sequence(s): NONE\nUnexpected Sequence(s): NONE\nChanged Sequence(s): NONE\nMissing Stored Procedure(s): NONE\nUnexpected Stored Procedure(s): NONE\nChanged Stored Procedure(s): NONE\nMissing Table(s): NONE\nUnexpected Table(s): NONE\nChanged Table(s): NONE\nMissing Unique Constraint(s): NONE\nUnexpected Unique Constraint(s): NONE\nChanged Unique Constraint(s): NONE\nMissing View(s): NONE\nUnexpected View(s): NONE\nChanged View(s): NONE\nLiquibase command 'diff' was executed successfully.\n\n\nBUILD SUCCESSFUL in 7s\n1 actionable task: 1 executed\n</code></pre>\n<p>When running against an empty database.</p>\n"},{"tags":["java","spring-boot","aop","spring-aop","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":3222171,"reputation":1361,"user_id":3192775,"accept_rate":33,"display_name":"Tim"},"score":0,"creation_date":1647613978,"post_id":71528557,"comment_id":126421687,"body_markdown":"Is this spring boot or MVC? Spring boot has starter dependency already..&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;","body":"Is this spring boot or MVC? Spring boot has starter dependency already..&lt;dependencies&gt;     &lt;dependency&gt;         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;         &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;     &lt;/dependency&gt; &lt;/dependencies&gt;"},{"owner":{"account_id":3222171,"reputation":1361,"user_id":3192775,"accept_rate":33,"display_name":"Tim"},"score":0,"creation_date":1647614266,"post_id":71528557,"comment_id":126421788,"body_markdown":"Also can you try wrapping the @Around like `@Around(&quot;execution(* package (..)&quot;)..` .","body":"Also can you try wrapping the @Around like <code>@Around(&quot;execution(* package (..)&quot;)..</code> ."},{"owner":{"account_id":10149091,"reputation":372,"user_id":7496320,"accept_rate":0,"display_name":"Aks 1316"},"score":0,"creation_date":1647621260,"post_id":71528557,"comment_id":126424768,"body_markdown":"Can you just add details about how do you call AOP? Are you calling any method of class inside package? @Around is an advice type, which ensures that an advice can run before and after the method execution.","body":"Can you just add details about how do you call AOP? Are you calling any method of class inside package? @Around is an advice type, which ensures that an advice can run before and after the method execution."},{"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"score":0,"creation_date":1647638359,"post_id":71528557,"comment_id":126429848,"body_markdown":"@Tim Updated the question with proper code snippets and more details. Any help is appreciated.","body":"@Tim Updated the question with proper code snippets and more details. Any help is appreciated."},{"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"score":0,"creation_date":1647638447,"post_id":71528557,"comment_id":126429872,"body_markdown":"@Aks1316, Updated the question with more details. AOP is working finr if I have a class inside the same project defining the AOP aspects.. Once i move the AOP code to a different project and add the second project as a dependency on the first one, it stops working.","body":"@Aks1316, Updated the question with more details. AOP is working finr if I have a class inside the same project defining the AOP aspects.. Once i move the AOP code to a different project and add the second project as a dependency on the first one, it stops working."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1647662443,"post_id":71528557,"comment_id":126433046,"body_markdown":"Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.","body":"Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications."},{"owner":{"account_id":10149091,"reputation":372,"user_id":7496320,"accept_rate":0,"display_name":"Aks 1316"},"score":0,"creation_date":1647676027,"post_id":71528557,"comment_id":126434603,"body_markdown":"@LockeLamora, I think answer given by kriegaex will resolve your issue. He already mentioned 2 points that you need to take care. package scanning and issue with your aspect.","body":"@LockeLamora, I think answer given by kriegaex will resolve your issue. He already mentioned 2 points that you need to take care. package scanning and issue with your aspect."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682752006,"creation_date":1647665430,"answer_id":71535462,"question_id":71528557,"body_markdown":"Like I said in my comment:\r\n\r\n&gt; Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.\r\n\r\nBut if we ignore this for a moment, there should not be any problem for your aspect to be applied. Maybe your main class in project B is `com.akpanda.springmain.SpringmainApplication`, but your aspect is in another base package, say `com.akpanda.aop.LogAspect`. In that case, it will not be picked up by component scan. That is easy enough to fix by adding this to your application class:\r\n\r\n```java\r\n@ComponentScan(basePackages = { &quot;com.akpanda.aop&quot;, &quot;com.akpanda.springmain&quot; })\r\n```\r\n\r\nThen the aspect will work immediately. But looking at your advice method, there are problems with it:\r\n  1. You are using an `@Around` advice which returns `void`, i.e. it only makes sense to apply it to methods which also return `void`. Your target method however returns `Fees`. In order to accommodate any return type in an around-advice, change the return type to `Object`.\r\n  2. The around-advice does not return anything and it also does not `proceed()` to the original target method, returning its result.\r\n\r\nYou can fix it like this:\r\n```java\r\n  @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n  public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\r\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n      signature.getDeclaringTypeName(), signature.getName(),\r\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n    return joinPoint.proceed();\r\n  }\r\n```\r\n\r\nOr alternatively, if your advice only logs and does not modify and method parameters or return values and also does not do any exception handling, simply use a `@Before` advice instead, then you are back to a `void` method there is no need to `proceed()` or declare `Throwable`:\r\n\r\n```java\r\n  @Before(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n  public void logBefore(JoinPoint joinPoint) {\r\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\r\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n      signature.getDeclaringTypeName(), signature.getName(),\r\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n  }\r\n```\r\n\r\nBTW, you could also write your pointcut a little simpler using `@within` instead of `within`:\r\n\r\n```java\r\n  @Pointcut(\r\n    &quot;@within(org.springframework.stereotype.Repository)&quot; +\r\n    &quot; || @within(org.springframework.stereotype.Service)&quot; +\r\n    &quot; || @within(org.springframework.web.bind.annotation.RestController)&quot;\r\n  )\r\n  public void springBeanPointcut() {}\r\n```\r\n","title":"Integrate Spring AOP as a maven dependency in a spring boot application","body":"<p>Like I said in my comment:</p>\n<blockquote>\n<p>Why do you have the dependencies for a whole Spring application in your aspect module? Isn't that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.</p>\n</blockquote>\n<p>But if we ignore this for a moment, there should not be any problem for your aspect to be applied. Maybe your main class in project B is <code>com.akpanda.springmain.SpringmainApplication</code>, but your aspect is in another base package, say <code>com.akpanda.aop.LogAspect</code>. In that case, it will not be picked up by component scan. That is easy enough to fix by adding this to your application class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ComponentScan(basePackages = { &quot;com.akpanda.aop&quot;, &quot;com.akpanda.springmain&quot; })\n</code></pre>\n<p>Then the aspect will work immediately. But looking at your advice method, there are problems with it:</p>\n<ol>\n<li>You are using an <code>@Around</code> advice which returns <code>void</code>, i.e. it only makes sense to apply it to methods which also return <code>void</code>. Your target method however returns <code>Fees</code>. In order to accommodate any return type in an around-advice, change the return type to <code>Object</code>.</li>\n<li>The around-advice does not return anything and it also does not <code>proceed()</code> to the original target method, returning its result.</li>\n</ol>\n<p>You can fix it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n  public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n      signature.getDeclaringTypeName(), signature.getName(),\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n    return joinPoint.proceed();\n  }\n</code></pre>\n<p>Or alternatively, if your advice only logs and does not modify and method parameters or return values and also does not do any exception handling, simply use a <code>@Before</code> advice instead, then you are back to a <code>void</code> method there is no need to <code>proceed()</code> or declare <code>Throwable</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Before(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n  public void logBefore(JoinPoint joinPoint) {\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n      signature.getDeclaringTypeName(), signature.getName(),\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n  }\n</code></pre>\n<p>BTW, you could also write your pointcut a little simpler using <code>@within</code> instead of <code>within</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Pointcut(\n    &quot;@within(org.springframework.stereotype.Repository)&quot; +\n    &quot; || @within(org.springframework.stereotype.Service)&quot; +\n    &quot; || @within(org.springframework.web.bind.annotation.RestController)&quot;\n  )\n  public void springBeanPointcut() {}\n</code></pre>\n"}],"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1280,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682752006,"creation_date":1647613656,"question_id":71528557,"body_markdown":"Application 1 : (Contains AOP code. A Spring boot application)\r\n\r\nLogAspect.Java\r\n\r\n&lt;!-- language: java --&gt;\r\n       \r\n    @Aspect\r\n    @Component\r\n    public class LogAspect {\r\n        private final Logger log = LoggerFactory.getLogger(this.getClass());\r\n    \r\n        @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot;\r\n                + &quot; || within(@org.springframework.stereotype.Service *)&quot;\r\n                + &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\r\n        public void springBeanPointcut() {}\r\n    \r\n        @Pointcut(&quot;within(com.akpanda.springmain..*)&quot;)\r\n        public void applicationPackagePointcut() {}\r\n    \r\n        @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n        public void logAround(ProceedingJoinPoint joinPoint) throws Throwable {\r\n            CodeSignature c = (CodeSignature) joinPoint.getSignature();\r\n            log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n                    joinPoint.getSignature().getDeclaringTypeName(), joinPoint.getSignature().getName(),\r\n                    Arrays.toString(c.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n        }\r\n    }\r\n    \r\npom.xml (Application 1)\r\n    \r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;groupId&gt;com.akpanda&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aop&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;aop&lt;/name&gt;\r\n      &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n      &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n      &lt;/dependencies&gt;\r\n\r\nApplication 2 : (Another spring boot application)\r\nIt has a dependency to the above Application 1, added as a maven dependency\r\n\r\npom.xml (Application 2)\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.akpanda&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;aop&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMain class of Application 2\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @SpringBootApplication\r\n    @EnableAspectJAutoProxy(proxyTargetClass = true)\r\n    public class SpringmainApplication {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringmainApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nController class of Application 2\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @RestController\r\n    public class FeesController {\r\n        @Autowired\r\n        private FeesCalculator feesCalculator;\r\n    \r\n        @RequestMapping(value = &quot;/fees/caclulate&quot;, method = RequestMethod.GET)\r\n        public Fees calculateFees() {\r\n            return feesCalculator.calculateFees();\r\n        }\r\n    }\r\n\r\nNow when i run Application 2 and hit endpoint \r\n\r\n&gt; /fees/caclulate\r\n\r\n, I expect the aop dependency added in maven to kick in.\r\n and the method logAround() to be called whenever any method of Application 2 is called.\r\n\r\nIf i do not add application 1 as a dependency but simply create class in application 2 containing aspects and advices it works. But in that case I have 10 different projects for which this needs to be duplicated.\r\nI want to separate the AOP code as a module (another spring boot application) and use it in many different spring boot projects as a maven dependency.\r\n","title":"Integrate Spring AOP as a maven dependency in a spring boot application","body":"<p>Application 1 : (Contains AOP code. A Spring boot application)</p>\n<p>LogAspect.Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class LogAspect {\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot;\n            + &quot; || within(@org.springframework.stereotype.Service *)&quot;\n            + &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\n    public void springBeanPointcut() {}\n\n    @Pointcut(&quot;within(com.akpanda.springmain..*)&quot;)\n    public void applicationPackagePointcut() {}\n\n    @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n    public void logAround(ProceedingJoinPoint joinPoint) throws Throwable {\n        CodeSignature c = (CodeSignature) joinPoint.getSignature();\n        log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n                joinPoint.getSignature().getDeclaringTypeName(), joinPoint.getSignature().getName(),\n                Arrays.toString(c.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n    }\n}\n</code></pre>\n<p>pom.xml (Application 1)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;com.akpanda&lt;/groupId&gt;\n  &lt;artifactId&gt;aop&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;aop&lt;/name&gt;\n  &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n</code></pre>\n<p>Application 2 : (Another spring boot application)\nIt has a dependency to the above Application 1, added as a maven dependency</p>\n<p>pom.xml (Application 2)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.akpanda&lt;/groupId&gt;\n    &lt;artifactId&gt;aop&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Main class of Application 2</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAspectJAutoProxy(proxyTargetClass = true)\npublic class SpringmainApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringmainApplication.class, args);\n    }\n}\n</code></pre>\n<p>Controller class of Application 2</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class FeesController {\n    @Autowired\n    private FeesCalculator feesCalculator;\n\n    @RequestMapping(value = &quot;/fees/caclulate&quot;, method = RequestMethod.GET)\n    public Fees calculateFees() {\n        return feesCalculator.calculateFees();\n    }\n}\n</code></pre>\n<p>Now when i run Application 2 and hit endpoint</p>\n<blockquote>\n<p>/fees/caclulate</p>\n</blockquote>\n<p>, I expect the aop dependency added in maven to kick in.\nand the method logAround() to be called whenever any method of Application 2 is called.</p>\n<p>If i do not add application 1 as a dependency but simply create class in application 2 containing aspects and advices it works. But in that case I have 10 different projects for which this needs to be duplicated.\nI want to separate the AOP code as a module (another spring boot application) and use it in many different spring boot projects as a maven dependency.</p>\n"},{"tags":["java","spring","spring-webflux","spring-aop","aspect"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682317520,"post_id":76087213,"comment_id":134190061,"body_markdown":"I cannot answer this question straight away, as I do not have any experience with reactive programming. But maybe I can figure it out, if you post a minimal reproducer on GitHub and post a link here. I need something reproducible.","body":"I cannot answer this question straight away, as I do not have any experience with reactive programming. But maybe I can figure it out, if you post a minimal reproducer on GitHub and post a link here. I need something reproducible."},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1682363175,"post_id":76087213,"comment_id":134200333,"body_markdown":"i modified some online code, this should be enough i presume https://github.com/crazycatMyopic/issue-","body":"i modified some online code, this should be enough i presume <a href=\"https://github.com/crazycatMyopic/issue-\" rel=\"nofollow noreferrer\">github.com/crazycatMyopic/issue-</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1682431358,"post_id":76087213,"comment_id":134212101,"body_markdown":"You did yourself the biggest favour by providing an [MCVE](https://stackoverflow.com/help/mcve). Please keep up this practice. It helps community members to reproduce your problems and yield better answers faster. &#128578;","body":"You did yourself the biggest favour by providing an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Please keep up this practice. It helps community members to reproduce your problems and yield better answers faster. 🙂"}],"answers":[{"comments":[{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1682449073,"post_id":76102036,"comment_id":134216739,"body_markdown":"this worked like a charm, Thank you, but I still wonder why did it happed, why was `@Order` required? there is only one advice (from my AOP) which other would be running?","body":"this worked like a charm, Thank you, but I still wonder why did it happed, why was <code>@Order</code> required? there is only one advice (from my AOP) which other would be running?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1682493608,"post_id":76102036,"comment_id":134222954,"body_markdown":"Please note my update.","body":"Please note my update."},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1682536240,"post_id":76102036,"comment_id":134233433,"body_markdown":"thank you for considering my follow up question as well, this was really helpful. \t&#128512;","body":"thank you for considering my follow up question as well, this was really helpful. \t😀"}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682751993,"creation_date":1682431289,"answer_id":76102036,"question_id":76087213,"body_markdown":"Let us read the error message again:\r\n\r\n```none\r\njava.lang.IllegalStateException: No MethodInvocation found:\r\n\r\nCheck that an AOP invocation is in progress and that the\r\nExposeInvocationInterceptor is upfront in the interceptor chain.\r\n\r\nSpecifically, note that advices with order HIGHEST_PRECEDENCE will execute\r\nbefore ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor\r\nand ExposeInvocationInterceptor.currentInvocation() must be invoked from the\r\nsame thread.\r\n```\r\n\r\nSo let us try by adding an `@Order` annotation to our aspect. But first, some research. You can check the Javadocs, I simply checked the source code:\r\n\r\n```java\r\npublic @interface Order {\r\n  int value() default Ordered.LOWEST_PRECEDENCE;\r\n}\r\n```\r\n\r\n```java\r\npublic interface Ordered {\r\n  int HIGHEST_PRECEDENCE = Integer.MIN_VALUE;\r\n  int LOWEST_PRECEDENCE = Integer.MAX_VALUE;\r\n\r\n  int getOrder();\r\n}\r\n```\r\n\r\nConclusion: The default order is `LOWEST_PRECEDENCE`, i.e. `Integer.MAX_VALUE`. Therefore, let us just assign a higher precedence, i.e. something smaller than `Integer.MAX_VALUE`. For your simple example on GitHub, any of the following will do: `@Order(Integer.MAX_VALUE - 1)`, `@Order(0)` or whatever you determine to be appropriate in your situation. Having added that to your aspect class, the caller will see this on the console:\r\n\r\n```none\r\n$ curl -L &quot;http://localhost:8080/login&quot; -H &quot;Authorization: Bearer ghfjhgf&quot;\r\nHI\r\n```\r\n\r\nThe Spring server log will say:\r\n\r\n```none\r\n[  restartedMain] c.a.s.SpringBootWebfluxJjwtApplication   : Started SpringBootWebfluxJjwtApplication in 1.646 seconds (JVM running for 2.156)\r\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\r\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\r\n...\r\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Entering function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login() in location org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint$SourceLocationImpl@641fcca3\r\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Exiting function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login()\r\n```\r\n\r\n---\r\n\r\n**Update**, responding to this follow-up question:\r\n\r\n&gt; I still wonder why did it happen, why was `@Order` required? There is only one advice (from my AOP) which other would be running?\r\n\r\nIf you remove `@PreAuthorize` from your login method that returns a `Mono`, it works without the `@Order` annotation on the aspect. That gives you a clue: Spring Security also seems to use AOP or at least some kind of method interceptor. Let us look at the actual error in more detail:\r\n\r\n```none\r\njava.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\r\n  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\r\n  Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\nError has been observed at the following site(s):\r\n  |_ checkpoint ⇢ Handler com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST#login() [DispatcherHandler]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n  |_ checkpoint ⇢ HTTP GET &quot;/login&quot; [ExceptionHandlingWebHandler]\r\nStack trace:\r\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.getJoinPointMatch(AbstractAspectJAdvice.java:658) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:44) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.proceed(PrePostAdviceReactiveMethodInterceptor.java:156) ~[spring-security-core-5.5.0.jar:5.5.0]\r\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.lambda$invoke$4(PrePostAdviceReactiveMethodInterceptor.java:116) ~[spring-security-core-5.5.0.jar:5.5.0]\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125) ~[reactor-core-3.4.6.jar:3.4.6]\r\n(...)\r\n```\r\n\r\nPlease note `org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor` in the stacktrace. Obviously, in Spring Security there is a special method interceptor for reactive methods. As described in the error message you and I posted before, this interceptor seems to require a special ordering of the interceptor/advice chain. I guess, it is some kind of bootstrapping problem, which users who wish to combine Spring AOP, Spring Security and WebFlux need to accommodate to.","title":"Spring AOP with Spring Webflux after authentication","body":"<p>Let us read the error message again:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: No MethodInvocation found:\n\nCheck that an AOP invocation is in progress and that the\nExposeInvocationInterceptor is upfront in the interceptor chain.\n\nSpecifically, note that advices with order HIGHEST_PRECEDENCE will execute\nbefore ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor\nand ExposeInvocationInterceptor.currentInvocation() must be invoked from the\nsame thread.\n</code></pre>\n<p>So let us try by adding an <code>@Order</code> annotation to our aspect. But first, some research. You can check the Javadocs, I simply checked the source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public @interface Order {\n  int value() default Ordered.LOWEST_PRECEDENCE;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Ordered {\n  int HIGHEST_PRECEDENCE = Integer.MIN_VALUE;\n  int LOWEST_PRECEDENCE = Integer.MAX_VALUE;\n\n  int getOrder();\n}\n</code></pre>\n<p>Conclusion: The default order is <code>LOWEST_PRECEDENCE</code>, i.e. <code>Integer.MAX_VALUE</code>. Therefore, let us just assign a higher precedence, i.e. something smaller than <code>Integer.MAX_VALUE</code>. For your simple example on GitHub, any of the following will do: <code>@Order(Integer.MAX_VALUE - 1)</code>, <code>@Order(0)</code> or whatever you determine to be appropriate in your situation. Having added that to your aspect class, the caller will see this on the console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ curl -L &quot;http://localhost:8080/login&quot; -H &quot;Authorization: Bearer ghfjhgf&quot;\nHI\n</code></pre>\n<p>The Spring server log will say:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[  restartedMain] c.a.s.SpringBootWebfluxJjwtApplication   : Started SpringBootWebfluxJjwtApplication in 1.646 seconds (JVM running for 2.156)\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\n...\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Entering function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login() in location org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint$SourceLocationImpl@641fcca3\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Exiting function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login()\n</code></pre>\n<hr />\n<p><strong>Update</strong>, responding to this follow-up question:</p>\n<blockquote>\n<p>I still wonder why did it happen, why was <code>@Order</code> required? There is only one advice (from my AOP) which other would be running?</p>\n</blockquote>\n<p>If you remove <code>@PreAuthorize</code> from your login method that returns a <code>Mono</code>, it works without the <code>@Order</code> annotation on the aspect. That gives you a clue: Spring Security also seems to use AOP or at least some kind of method interceptor. Let us look at the actual error in more detail:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\n  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\n  Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n  |_ checkpoint ⇢ Handler com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST#login() [DispatcherHandler]\n  |_ checkpoint ⇢ org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n  |_ checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n  |_ checkpoint ⇢ HTTP GET &quot;/login&quot; [ExceptionHandlingWebHandler]\nStack trace:\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.getJoinPointMatch(AbstractAspectJAdvice.java:658) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:44) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.proceed(PrePostAdviceReactiveMethodInterceptor.java:156) ~[spring-security-core-5.5.0.jar:5.5.0]\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.lambda$invoke$4(PrePostAdviceReactiveMethodInterceptor.java:116) ~[spring-security-core-5.5.0.jar:5.5.0]\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125) ~[reactor-core-3.4.6.jar:3.4.6]\n(...)\n</code></pre>\n<p>Please note <code>org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor</code> in the stacktrace. Obviously, in Spring Security there is a special method interceptor for reactive methods. As described in the error message you and I posted before, this interceptor seems to require a special ordering of the interceptor/advice chain. I guess, it is some kind of bootstrapping problem, which users who wish to combine Spring AOP, Spring Security and WebFlux need to accommodate to.</p>\n"}],"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76102036,"answer_count":1,"score":0,"last_activity_date":1682751993,"creation_date":1682283079,"question_id":76087213,"body_markdown":"I have a Enabled Spring AOP for my logging purpose and use webflux for the API entrypoint,\r\nthings work fine if the api does not go through `ReactiveAuthenticationManager` like my `login` api but the moment It has to go through `ReactiveAuthenticationManager` it throws the bellow exception\r\n\r\n```\r\njava.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint ⇢ Handler com.ums.api.contoller.Controller#getAllUser() [DispatcherHandler]\r\n```\r\n\r\nmy AOP class\r\n```java\r\npublic class LoggerAspect {\r\n\r\n    @Pointcut(&quot;within(com.ums..*)&quot;)\r\n    public void logEveryFunction() {\r\n    }\r\n\r\n    @Before(value = &quot;logEveryFunction()&quot;)\r\n    public void log(JoinPoint joinPoint) {\r\n        log.info(&quot;Entering function {} in location {}&quot;, joinPoint.getSignature(), joinPoint.getSourceLocation());\r\n    }\r\n\r\n    @After(value = &quot;logEveryFunction()&quot;)\r\n    public void logEnd(JoinPoint joinPoint) {\r\n        log.info(&quot;Exiting function {}&quot;, joinPoint.getSignature());\r\n    }\r\n}\r\n```\r\n\r\nauthentication function\r\n```java\r\n    public Mono&lt;Authentication&gt; authenticate(Authentication authentication) {\r\n        return Mono.justOrEmpty(authentication.getCredentials().toString())\r\n                .map(value -&gt; {\r\n                    return new UsernamePasswordAuthenticationToken(\r\n                            authentication.getName(),\r\n                            null,\r\n                          Arrays.asList(new SimpleGrantedAuthority(&quot;VIEW&quot;))\r\n                });\r\n    }\r\n```\r\n\r\nhow can I make my AOP work with webflux and how can I fix the issue?","title":"Spring AOP with Spring Webflux after authentication","body":"<p>I have a Enabled Spring AOP for my logging purpose and use webflux for the API entrypoint,\nthings work fine if the api does not go through <code>ReactiveAuthenticationManager</code> like my <code>login</code> api but the moment It has to go through <code>ReactiveAuthenticationManager</code> it throws the bellow exception</p>\n<pre><code>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.23.jar:5.3.23]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ Handler com.ums.api.contoller.Controller#getAllUser() [DispatcherHandler]\n</code></pre>\n<p>my AOP class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LoggerAspect {\n\n    @Pointcut(&quot;within(com.ums..*)&quot;)\n    public void logEveryFunction() {\n    }\n\n    @Before(value = &quot;logEveryFunction()&quot;)\n    public void log(JoinPoint joinPoint) {\n        log.info(&quot;Entering function {} in location {}&quot;, joinPoint.getSignature(), joinPoint.getSourceLocation());\n    }\n\n    @After(value = &quot;logEveryFunction()&quot;)\n    public void logEnd(JoinPoint joinPoint) {\n        log.info(&quot;Exiting function {}&quot;, joinPoint.getSignature());\n    }\n}\n</code></pre>\n<p>authentication function</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Mono&lt;Authentication&gt; authenticate(Authentication authentication) {\n        return Mono.justOrEmpty(authentication.getCredentials().toString())\n                .map(value -&gt; {\n                    return new UsernamePasswordAuthenticationToken(\n                            authentication.getName(),\n                            null,\n                          Arrays.asList(new SimpleGrantedAuthority(&quot;VIEW&quot;))\n                });\n    }\n</code></pre>\n<p>how can I make my AOP work with webflux and how can I fix the issue?</p>\n"},{"tags":["java","apache-spark","stream"],"answers":[{"tags":[],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682750360,"creation_date":1682600615,"answer_id":76120764,"question_id":76117091,"body_markdown":"As a start of a solution, I&#39;ve wrote this method that splits a `Dataset&lt;Row&gt;` to a `List&lt;Dataset&lt;Row&gt;&gt;` given a number of records per page wished.\r\n\r\n```java\r\n/**\r\n * Paginer un dataset en renvoyant plusieurs datasets d&#39;un nombre maximal d&#39;enregistrements.\r\n * @param session Session Spark.\r\n * @param dataset Dataset &#224; diviser.\r\n * @param nombreObjetsParPage Nombre d&#39;objets maximal par dataset cr&#233;&#233;.\r\n * @return Liste des datasets cr&#233;&#233;s.\r\n */\r\npublic static List&lt;Dataset&lt;Row&gt;&gt; paginer(SparkSession session, Dataset&lt;Row&gt; dataset, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination ne peut pas valoir null.&quot;);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; sousDatasets = new ArrayList&lt;&gt;();\r\n\r\n   // Si le nombre d&#39;enregistrements demand&#233;s par page est sup&#233;rieur ou &#233;gal au nombre qu&#39;en a le dataset re&#231;u en param&#232;tre,\r\n   // le renvoyer comme unique &#233;l&#233;ment de la liste.\r\n   long count = dataset.count();\r\n\r\n   if (nombreObjetsParPage &gt;= count) {\r\n      sousDatasets.add(dataset);\r\n      return sousDatasets;\r\n   }\r\n\r\n   // Attribuer un num&#233;ro d&#39;index, allant de z&#233;ro &#224; (count - 1), en regard du dataset.\r\n   JavaPairRDD&lt;Row, Long&gt; rdd = dataset.toJavaRDD().zipWithIndex();\r\n\r\n   long start = 0;\r\n   long end = nombreObjetsParPage;\r\n\r\n   // Alimenter une liste de datasets, chacun prenant &#224; son tour les indexs dans [start, end[\r\n   do {\r\n      final long a = start;\r\n      final long b = end;\r\n\r\n      JavaPairRDD&lt;Row, Long&gt; rddSousEnsemble = rdd.filter(f -&gt; f._2() &gt;= a &amp;&amp; f._2() &lt; b);\r\n      sousDatasets.add(session.createDataFrame(rddSousEnsemble.keys(), dataset.schema()));\r\n\r\n      start += nombreObjetsParPage;\r\n      end += nombreObjetsParPage;\r\n   }\r\n   while(start &lt; count);\r\n\r\n   return sousDatasets;\r\n}\r\n```\r\n\r\nThat complies to this test (provided you change the `Dataset&lt;Row&gt; catalogue` to one you have):\r\n\r\n```java\r\n/**\r\n * Obtention des Dataset de row, pagin&#233;s.\r\n */\r\n@Test\r\n@DisplayName(&quot;Dataset catalogue (row, pagin&#233;s) : jeux de donn&#233;es.&quot;)\r\nvoid rowCatalogueDatasetsPagines() {\r\n   LOGGER.info(&quot;Lecture du catalogue datagouv en Row, pagin&#233;s...&quot;);\r\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session).limit(70);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; pagines = AbstractSparkDataset.paginer(this.session, catalogue, 20);\r\n   assertEquals(4, pagines.size(), &quot;Le nombre de sous-datasets n&#39;est pas celui attendu&quot;);\r\n\r\n   for(int i=0; i &lt; 3; i ++) {\r\n      pagines.get(i).show(1000, false);\r\n      assertEquals(20, pagines.get(i).count(), MessageFormat.format(&quot;Le nombre d&#39;&#39;enregistrements du sous-datasets d&#39;&#39;index {0}, {1}, n&#39;&#39;est pas celui attendu&quot;, i, pagines.get(i).count()));\r\n   }\r\n\r\n   pagines.get(3).show(1000, false);\r\n   assertEquals(10, pagines.get(3).count(), MessageFormat.format(&quot;Le dernier sous-dataset n&#39;&#39;a pas le bon nombre d&#39;&#39;enregitrements, mais {0}&quot;, pagines.get(3).count()));\r\n}\r\n```\r\n\r\nTo be more complete, this next method will return the sub datasets as `List&lt;Dataset&lt;JeuDeDonnees&gt;&gt;` or the object you&#39;re willing to have, given the mapper from a `Datatset&lt;Row&gt;` to a `Dataset&lt;target object&gt;` you can provide:\r\n\r\n```java\r\n/**\r\n  * Paginer un dataset en renvoyant plusieurs datasets d&#39;un nombre maximal d&#39;objets m&#233;tiers.\r\n  * @param session Session Spark.\r\n  * @param dataset Dataset d&#39;enregistrements &#224; diviser.\r\n  * @param encoder Fonction d&#39;encodage en dataset d&#39;objets m&#233;tiers d&#39;un Dataset&lt;Row&gt;.\r\n  * @param nombreObjetsParPage Nombre d&#39;objets maximal par dataset cr&#233;&#233;.\r\n  * @param &lt;T&gt; Type de l&#39;objet m&#233;tier cible que l&#39;on veut obtenir.\r\n  * @return Liste des datasets d&#39;objet m&#233;tier cr&#233;&#233;s.\r\n  */\r\npublic static &lt;T&gt; List&lt;Dataset&lt;T&gt;&gt; paginer(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination en objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(encoder, &quot;La fonction d&#39;encodage, du type Dataset&lt;Row&gt; vers le type d&#39;objet m&#233;tier d&#233;sir&#233; pour la pagination en objets d&#39;un dataset, ne peut pas valoir null.&quot;);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; blocsEnregistrements = paginer(session, dataset.toDF(), nombreObjetsParPage);\r\n   return blocsEnregistrements.stream().map(encoder).toList();\r\n}\r\n```\r\n\r\nEventually, to get all of this, smoothly, as a `Stream&lt;JeuDeDonnees&gt;`, I had to create a dedicated iterator:\r\n\r\n```java\r\n/**\r\n * Un iterateur sur les datasets qui n&#39;extrait leur contenu que si c&#39;est n&#233;cessaire.\r\n * @param &lt;T&gt; Les &#233;l&#233;ments enfants transport&#233;s par les Dataset it&#233;r&#233;s (Dataset&lt;T&gt;).\r\n */\r\npublic class DatasetsItemIterator&lt;T&gt; implements Iterator&lt;T&gt; {\r\n   /** Logger. */\r\n   private static final Logger LOGGER = LoggerFactory.getLogger(DatasetsItemIterator.class);\r\n\r\n   /** It&#233;rateur sur les datasets. */\r\n   private final Iterator&lt;Dataset&lt;T&gt;&gt; datasetIterator;\r\n\r\n   /** Dataset actuellement parcouru. */\r\n   private Dataset&lt;T&gt; currentDataset;\r\n\r\n   /** Flux sur les objets m&#233;tiers du dataset */\r\n   private Iterator&lt;T&gt; elementsIterator = null;\r\n\r\n   /** Page actuelle */\r\n   private long currentPage = 0;\r\n\r\n   /** Page maximale */\r\n   private final long maxPage;\r\n\r\n   /**\r\n    * Construire un it&#233;rateur sur un ou plusieurs datasets.\r\n    * @param datasets Datasets.\r\n    */\r\n   @SafeVarargs\r\n   public DatasetsItemIterator(Dataset&lt;T&gt;... datasets) {\r\n      this(Arrays.asList(datasets));\r\n   }\r\n\r\n   /**\r\n    * Construire un it&#233;rateur sur une liste de datasets.\r\n    * @param datasets Datasets.\r\n    */\r\n   public DatasetsItemIterator(List&lt;Dataset&lt;T&gt;&gt; datasets) {\r\n      this.datasetIterator = datasets.iterator();\r\n      this.maxPage = datasets.size();\r\n   }\r\n\r\n   @Override\r\n   public boolean hasNext() {\r\n      // Si aucun dataset n&#39;a &#233;t&#233; encore observ&#233;, prendre le premier, s&#39;il y en a un.\r\n      if (this.currentDataset == null &amp;&amp; nextDataset() == false) {\r\n         return false;\r\n      }\r\n\r\n      // Si un it&#233;rateur existe sur des &#233;l&#233;ments et qu&#39;il en a encore &#224; donner, r&#233;pondre Oui.\r\n      if (this.elementsIterator.hasNext()) {\r\n         return true;\r\n      }\r\n\r\n      // Sinon, tenter de parcourir un nouveau dataset.\r\n      return nextDataset();\r\n   }\r\n\r\n   @Override\r\n   public T next() {\r\n      if (hasNext()) {\r\n         return this.elementsIterator.next();\r\n      }\r\n\r\n      throw new NoSuchElementException(&quot;La famille de datasets n&#39;a plus d&#39;&#233;l&#233;ments &#224; fournir.&quot;);\r\n   }\r\n\r\n   /**\r\n    * Pr&#233;parer l&#39;it&#233;ration du dataset suivant.\r\n    * @return true s&#39;il en existe un, et qu&#39;il a des &#233;l&#233;ments disponibles.\r\n    */\r\n   private boolean nextDataset() {\r\n      if (this.datasetIterator.hasNext() == false) {\r\n         return false;\r\n      }\r\n\r\n      this.currentPage ++;\r\n      LOGGER.info(&quot;Chargement de la page {}/{} du dataset pagin&#233;.&quot;, this.currentPage, this.maxPage);\r\n\r\n      this.currentDataset = this.datasetIterator.next();\r\n      this.elementsIterator = this.currentDataset.collectAsList().iterator();\r\n\r\n      return this.elementsIterator.hasNext();\r\n   }\r\n}\r\n```\r\n\r\nAnd create this method:\r\n\r\n```java\r\n/**\r\n * Paginer en stream.\r\n * @param session Session Spark.\r\n * @param dataset Dataset &#224; diviser.\r\n * @param encoder Fonction d&#39;encodage.\r\n * @param nombreObjetsParPage Nombre d&#39;objets par page.\r\n * @return Flux d&#39;objets m&#233;tiers.\r\n * @param &lt;T&gt; Classe des objets m&#233;tiers renvoy&#233;s par le stream.\r\n */\r\npublic static &lt;T&gt; Stream&lt;T&gt; paginerEnStream(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en stream d&#39;objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination en stream d&#39;objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(encoder, &quot;La fonction d&#39;encodage, du type Dataset&lt;Row&gt; vers le type d&#39;objet m&#233;tier d&#233;sir&#233; pour la pagination en stream d&#39;objets d&#39;un dataset, ne peut pas valoir null.&quot;);\r\n\r\n   DatasetsItemIterator&lt;T&gt; objetsMetiersIterator = new DatasetsItemIterator&lt;&gt;(paginer(session, dataset, encoder, nombreObjetsParPage));\r\n   return StreamSupport.stream(Spliterators.spliteratorUnknownSize(objetsMetiersIterator, Spliterator.ORDERED), false);\r\n}\r\n```\r\n\r\nMy solution works:\r\n\r\n```java\r\n/**\r\n * Obtention des Dataset d&#39;objets m&#233;tiers pagin&#233;s, sous forme de stream.\r\n */\r\n@Test\r\n@DisplayName(&quot;Dataset catalogue (objets m&#233;tiers, pagin&#233;s et stream&#233;s) : jeux de donn&#233;es.&quot;)\r\nvoid catalogueDatasetsObjetsMetiersPaginesStreames() {\r\n   LOGGER.info(&quot;Lecture du catalogue datagouv en objets m&#233;tiers, pagin&#233;s et stream&#233;s...&quot;);\r\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session,(AbstractSparkDataset.Verification[]) null).limit(70);\r\n\r\n   assertDoesNotThrow(() -&gt; {\r\n      Stream&lt;JeuDeDonnees&gt; jeuxDeDonnees = AbstractSparkDataset.paginerEnStream(this.session, catalogue, p -&gt; this.catalogueDataset.catalogueDataset(p), 20);\r\n\r\n      List&lt;JeuDeDonnees&gt; extrait = jeuxDeDonnees.limit(22).collect(Collectors.toList());\r\n      assertEquals(22, extrait.size(), &quot;Le flux n&#39;a pas apport&#233; le nombre de jeux de donn&#233;es attendu&quot;);\r\n      LOGGER.info(ReflectionToStringBuilder.toString(extrait));\r\n   });\r\n}\r\n```\r\n\r\nAnd I&#39;m happy to see in my logs that only the page 1 and 2 are consumed in my test.\r\n\r\n```log\r\n2023-04-29 08:10:08.375  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 1/4 du dataset pagin&#233;.\r\n2023-04-29 08:10:09.677  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 2/4 du dataset pagin&#233;.\r\n```\r\n\r\nBut it&#39;s drawback is: being slow. Because it does plenty of `filter`.\r\n\r\nAnd I haven&#39;t checked (yet) deeply if my list of methods are tuned enough to ensure that when the page 2 is being served for object streaming, the page 1 can be garbage collected (if Java feels that need).\r\n\r\nBecause, if it&#39;s for that, at the end, the full whole Dataset (that was splitted in pages at the beginning) is just here in memory with its millions of objects, it wouldn&#39;t be perfect.","title":"I created a Dataset&lt;Row&gt; from a csv file, and then a Dataset&lt;JeuDeDonnees&gt; from it. How may I read JeuDeDonnees objects, one by one, like in a stream?","body":"<p>As a start of a solution, I've wrote this method that splits a <code>Dataset&lt;Row&gt;</code> to a <code>List&lt;Dataset&lt;Row&gt;&gt;</code> given a number of records per page wished.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Paginer un dataset en renvoyant plusieurs datasets d'un nombre maximal d'enregistrements.\n * @param session Session Spark.\n * @param dataset Dataset à diviser.\n * @param nombreObjetsParPage Nombre d'objets maximal par dataset créé.\n * @return Liste des datasets créés.\n */\npublic static List&lt;Dataset&lt;Row&gt;&gt; paginer(SparkSession session, Dataset&lt;Row&gt; dataset, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset à diviser pour sa pagination ne peut pas valoir null.&quot;);\n\n   List&lt;Dataset&lt;Row&gt;&gt; sousDatasets = new ArrayList&lt;&gt;();\n\n   // Si le nombre d'enregistrements demandés par page est supérieur ou égal au nombre qu'en a le dataset reçu en paramètre,\n   // le renvoyer comme unique élément de la liste.\n   long count = dataset.count();\n\n   if (nombreObjetsParPage &gt;= count) {\n      sousDatasets.add(dataset);\n      return sousDatasets;\n   }\n\n   // Attribuer un numéro d'index, allant de zéro à (count - 1), en regard du dataset.\n   JavaPairRDD&lt;Row, Long&gt; rdd = dataset.toJavaRDD().zipWithIndex();\n\n   long start = 0;\n   long end = nombreObjetsParPage;\n\n   // Alimenter une liste de datasets, chacun prenant à son tour les indexs dans [start, end[\n   do {\n      final long a = start;\n      final long b = end;\n\n      JavaPairRDD&lt;Row, Long&gt; rddSousEnsemble = rdd.filter(f -&gt; f._2() &gt;= a &amp;&amp; f._2() &lt; b);\n      sousDatasets.add(session.createDataFrame(rddSousEnsemble.keys(), dataset.schema()));\n\n      start += nombreObjetsParPage;\n      end += nombreObjetsParPage;\n   }\n   while(start &lt; count);\n\n   return sousDatasets;\n}\n</code></pre>\n<p>That complies to this test (provided you change the <code>Dataset&lt;Row&gt; catalogue</code> to one you have):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Obtention des Dataset de row, paginés.\n */\n@Test\n@DisplayName(&quot;Dataset catalogue (row, paginés) : jeux de données.&quot;)\nvoid rowCatalogueDatasetsPagines() {\n   LOGGER.info(&quot;Lecture du catalogue datagouv en Row, paginés...&quot;);\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session).limit(70);\n\n   List&lt;Dataset&lt;Row&gt;&gt; pagines = AbstractSparkDataset.paginer(this.session, catalogue, 20);\n   assertEquals(4, pagines.size(), &quot;Le nombre de sous-datasets n'est pas celui attendu&quot;);\n\n   for(int i=0; i &lt; 3; i ++) {\n      pagines.get(i).show(1000, false);\n      assertEquals(20, pagines.get(i).count(), MessageFormat.format(&quot;Le nombre d''enregistrements du sous-datasets d''index {0}, {1}, n''est pas celui attendu&quot;, i, pagines.get(i).count()));\n   }\n\n   pagines.get(3).show(1000, false);\n   assertEquals(10, pagines.get(3).count(), MessageFormat.format(&quot;Le dernier sous-dataset n''a pas le bon nombre d''enregitrements, mais {0}&quot;, pagines.get(3).count()));\n}\n</code></pre>\n<p>To be more complete, this next method will return the sub datasets as <code>List&lt;Dataset&lt;JeuDeDonnees&gt;&gt;</code> or the object you're willing to have, given the mapper from a <code>Datatset&lt;Row&gt;</code> to a <code>Dataset&lt;target object&gt;</code> you can provide:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n  * Paginer un dataset en renvoyant plusieurs datasets d'un nombre maximal d'objets métiers.\n  * @param session Session Spark.\n  * @param dataset Dataset d'enregistrements à diviser.\n  * @param encoder Fonction d'encodage en dataset d'objets métiers d'un Dataset&lt;Row&gt;.\n  * @param nombreObjetsParPage Nombre d'objets maximal par dataset créé.\n  * @param &lt;T&gt; Type de l'objet métier cible que l'on veut obtenir.\n  * @return Liste des datasets d'objet métier créés.\n  */\npublic static &lt;T&gt; List&lt;Dataset&lt;T&gt;&gt; paginer(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset à diviser pour sa pagination en objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(encoder, &quot;La fonction d'encodage, du type Dataset&lt;Row&gt; vers le type d'objet métier désiré pour la pagination en objets d'un dataset, ne peut pas valoir null.&quot;);\n\n   List&lt;Dataset&lt;Row&gt;&gt; blocsEnregistrements = paginer(session, dataset.toDF(), nombreObjetsParPage);\n   return blocsEnregistrements.stream().map(encoder).toList();\n}\n</code></pre>\n<p>Eventually, to get all of this, smoothly, as a <code>Stream&lt;JeuDeDonnees&gt;</code>, I had to create a dedicated iterator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Un iterateur sur les datasets qui n'extrait leur contenu que si c'est nécessaire.\n * @param &lt;T&gt; Les éléments enfants transportés par les Dataset itérés (Dataset&lt;T&gt;).\n */\npublic class DatasetsItemIterator&lt;T&gt; implements Iterator&lt;T&gt; {\n   /** Logger. */\n   private static final Logger LOGGER = LoggerFactory.getLogger(DatasetsItemIterator.class);\n\n   /** Itérateur sur les datasets. */\n   private final Iterator&lt;Dataset&lt;T&gt;&gt; datasetIterator;\n\n   /** Dataset actuellement parcouru. */\n   private Dataset&lt;T&gt; currentDataset;\n\n   /** Flux sur les objets métiers du dataset */\n   private Iterator&lt;T&gt; elementsIterator = null;\n\n   /** Page actuelle */\n   private long currentPage = 0;\n\n   /** Page maximale */\n   private final long maxPage;\n\n   /**\n    * Construire un itérateur sur un ou plusieurs datasets.\n    * @param datasets Datasets.\n    */\n   @SafeVarargs\n   public DatasetsItemIterator(Dataset&lt;T&gt;... datasets) {\n      this(Arrays.asList(datasets));\n   }\n\n   /**\n    * Construire un itérateur sur une liste de datasets.\n    * @param datasets Datasets.\n    */\n   public DatasetsItemIterator(List&lt;Dataset&lt;T&gt;&gt; datasets) {\n      this.datasetIterator = datasets.iterator();\n      this.maxPage = datasets.size();\n   }\n\n   @Override\n   public boolean hasNext() {\n      // Si aucun dataset n'a été encore observé, prendre le premier, s'il y en a un.\n      if (this.currentDataset == null &amp;&amp; nextDataset() == false) {\n         return false;\n      }\n\n      // Si un itérateur existe sur des éléments et qu'il en a encore à donner, répondre Oui.\n      if (this.elementsIterator.hasNext()) {\n         return true;\n      }\n\n      // Sinon, tenter de parcourir un nouveau dataset.\n      return nextDataset();\n   }\n\n   @Override\n   public T next() {\n      if (hasNext()) {\n         return this.elementsIterator.next();\n      }\n\n      throw new NoSuchElementException(&quot;La famille de datasets n'a plus d'éléments à fournir.&quot;);\n   }\n\n   /**\n    * Préparer l'itération du dataset suivant.\n    * @return true s'il en existe un, et qu'il a des éléments disponibles.\n    */\n   private boolean nextDataset() {\n      if (this.datasetIterator.hasNext() == false) {\n         return false;\n      }\n\n      this.currentPage ++;\n      LOGGER.info(&quot;Chargement de la page {}/{} du dataset paginé.&quot;, this.currentPage, this.maxPage);\n\n      this.currentDataset = this.datasetIterator.next();\n      this.elementsIterator = this.currentDataset.collectAsList().iterator();\n\n      return this.elementsIterator.hasNext();\n   }\n}\n</code></pre>\n<p>And create this method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Paginer en stream.\n * @param session Session Spark.\n * @param dataset Dataset à diviser.\n * @param encoder Fonction d'encodage.\n * @param nombreObjetsParPage Nombre d'objets par page.\n * @return Flux d'objets métiers.\n * @param &lt;T&gt; Classe des objets métiers renvoyés par le stream.\n */\npublic static &lt;T&gt; Stream&lt;T&gt; paginerEnStream(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en stream d'objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset à diviser pour sa pagination en stream d'objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(encoder, &quot;La fonction d'encodage, du type Dataset&lt;Row&gt; vers le type d'objet métier désiré pour la pagination en stream d'objets d'un dataset, ne peut pas valoir null.&quot;);\n\n   DatasetsItemIterator&lt;T&gt; objetsMetiersIterator = new DatasetsItemIterator&lt;&gt;(paginer(session, dataset, encoder, nombreObjetsParPage));\n   return StreamSupport.stream(Spliterators.spliteratorUnknownSize(objetsMetiersIterator, Spliterator.ORDERED), false);\n}\n</code></pre>\n<p>My solution works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Obtention des Dataset d'objets métiers paginés, sous forme de stream.\n */\n@Test\n@DisplayName(&quot;Dataset catalogue (objets métiers, paginés et streamés) : jeux de données.&quot;)\nvoid catalogueDatasetsObjetsMetiersPaginesStreames() {\n   LOGGER.info(&quot;Lecture du catalogue datagouv en objets métiers, paginés et streamés...&quot;);\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session,(AbstractSparkDataset.Verification[]) null).limit(70);\n\n   assertDoesNotThrow(() -&gt; {\n      Stream&lt;JeuDeDonnees&gt; jeuxDeDonnees = AbstractSparkDataset.paginerEnStream(this.session, catalogue, p -&gt; this.catalogueDataset.catalogueDataset(p), 20);\n\n      List&lt;JeuDeDonnees&gt; extrait = jeuxDeDonnees.limit(22).collect(Collectors.toList());\n      assertEquals(22, extrait.size(), &quot;Le flux n'a pas apporté le nombre de jeux de données attendu&quot;);\n      LOGGER.info(ReflectionToStringBuilder.toString(extrait));\n   });\n}\n</code></pre>\n<p>And I'm happy to see in my logs that only the page 1 and 2 are consumed in my test.</p>\n<pre><code>2023-04-29 08:10:08.375  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 1/4 du dataset paginé.\n2023-04-29 08:10:09.677  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 2/4 du dataset paginé.\n</code></pre>\n<p>But it's drawback is: being slow. Because it does plenty of <code>filter</code>.</p>\n<p>And I haven't checked (yet) deeply if my list of methods are tuned enough to ensure that when the page 2 is being served for object streaming, the page 1 can be garbage collected (if Java feels that need).</p>\n<p>Because, if it's for that, at the end, the full whole Dataset (that was splitted in pages at the beginning) is just here in memory with its millions of objects, it wouldn't be perfect.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682750360,"creation_date":1682574275,"question_id":76117091,"body_markdown":"I have created a:\r\n\r\n```java\r\n// &#39;datasets&#39; is the name the provider gave for that source\r\nDataset&lt;Row&gt; datasets = session.read().schema(schema).format(&quot;csv&quot;).load(&quot;datasets.csv&quot;);\r\n```\r\n\r\nThen a:\r\n\r\n```\r\nDataset&lt;JeuDeDonnees&gt; jeuxDeDonnees = datasets.map((MapFunction&lt;Row, JeuDeDonnees&gt;)row -&gt; \r\n   { /* [...mappings...] */ return new JeuDeDonnees(...); }, Encoders.bean(JeuDeDonnees.class));\r\n}\r\n```\r\n\r\nThat is for the data management part of my application.\r\n\r\nI am willing to offer an access to this whole data to my services (for the end user).  \r\nI can&#39;t return to the full `List&lt;JeuDeDonnees&gt;` _Spark_ extracted, of course: it would overflow everything.\r\n\r\nI would like:\r\n\r\n1. either returning `JeuDeDonnees` objects one by one, with a `Stream` \r\n\r\n   `Stream&lt;JeuDeDonnees&gt; getNext()`, if possible ?  \r\n   But then, how may I link it to its underlying `jeuxDeDonnees` _Spark_ dataset, a way that _Spark_ stays rather smooth when returning data?\r\n\r\n2. either returning `List&lt;JeuDeDonnees&gt; getNext(50)`  \r\n   but then, the mechanism would be more complicated to put in place, I think. As I should avoid something telling _Spark_ &quot;_start at offset x this time_&quot; (for 50 `jeuxDeDonnees`), because doing so would cost a lot, for each offset move, (if it would even be possible, what I am unsure).  \r\n....another way to ask this question is: a `Dataset::take(int n)` method exists that returns the _n_ first objects of a `Dataset`. Does another method exist that return the _n_ next objects coming after?\r\n\r\nWhat the proper way to solve my problem?","title":"I created a Dataset&lt;Row&gt; from a csv file, and then a Dataset&lt;JeuDeDonnees&gt; from it. How may I read JeuDeDonnees objects, one by one, like in a stream?","body":"<p>I have created a:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// 'datasets' is the name the provider gave for that source\nDataset&lt;Row&gt; datasets = session.read().schema(schema).format(&quot;csv&quot;).load(&quot;datasets.csv&quot;);\n</code></pre>\n<p>Then a:</p>\n<pre><code>Dataset&lt;JeuDeDonnees&gt; jeuxDeDonnees = datasets.map((MapFunction&lt;Row, JeuDeDonnees&gt;)row -&gt; \n   { /* [...mappings...] */ return new JeuDeDonnees(...); }, Encoders.bean(JeuDeDonnees.class));\n}\n</code></pre>\n<p>That is for the data management part of my application.</p>\n<p>I am willing to offer an access to this whole data to my services (for the end user).<br />\nI can't return to the full <code>List&lt;JeuDeDonnees&gt;</code> <em>Spark</em> extracted, of course: it would overflow everything.</p>\n<p>I would like:</p>\n<ol>\n<li><p>either returning <code>JeuDeDonnees</code> objects one by one, with a <code>Stream</code></p>\n<p><code>Stream&lt;JeuDeDonnees&gt; getNext()</code>, if possible ?<br />\nBut then, how may I link it to its underlying <code>jeuxDeDonnees</code> <em>Spark</em> dataset, a way that <em>Spark</em> stays rather smooth when returning data?</p>\n</li>\n<li><p>either returning <code>List&lt;JeuDeDonnees&gt; getNext(50)</code><br />\nbut then, the mechanism would be more complicated to put in place, I think. As I should avoid something telling <em>Spark</em> &quot;<em>start at offset x this time</em>&quot; (for 50 <code>jeuxDeDonnees</code>), because doing so would cost a lot, for each offset move, (if it would even be possible, what I am unsure).<br />\n....another way to ask this question is: a <code>Dataset::take(int n)</code> method exists that returns the <em>n</em> first objects of a <code>Dataset</code>. Does another method exist that return the <em>n</em> next objects coming after?</p>\n</li>\n</ol>\n<p>What the proper way to solve my problem?</p>\n"},{"tags":["java","nacos"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682699253,"post_id":76131349,"comment_id":134261930,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682714754,"post_id":76131349,"comment_id":134264776,"body_markdown":"Are you sure that a solution that requires the change of _exactly this_ property is a very maintainable one? This property is provided by Spring automatically on purpose and while it might be possible to change it at runtime, it probably will do more harm than good to your application when it starts to fiddle with such internal stuff.","body":"Are you sure that a solution that requires the change of <i>exactly this</i> property is a very maintainable one? This property is provided by Spring automatically on purpose and while it might be possible to change it at runtime, it probably will do more harm than good to your application when it starts to fiddle with such internal stuff."},{"owner":{"account_id":26175647,"reputation":1,"user_id":19859848,"display_name":"wenjun"},"score":0,"creation_date":1682749832,"post_id":76131349,"comment_id":134267711,"body_markdown":"No, not exactly this property. Actually any property is fine, as long as the solution create the sharding of the service automatically. In cloud environment, every indexer will register under the name &quot;indexer&quot;, and probably the easier solutiuon now is to let the register center to do the job. I currently use Nacos, and are seeking a solution regarding Nacos. I&#39;v edited the original question.","body":"No, not exactly this property. Actually any property is fine, as long as the solution create the sharding of the service automatically. In cloud environment, every indexer will register under the name &quot;indexer&quot;, and probably the easier solutiuon now is to let the register center to do the job. I currently use Nacos, and are seeking a solution regarding Nacos. I&#39;v edited the original question."}],"owner":{"account_id":26175647,"reputation":1,"user_id":19859848,"display_name":"wenjun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682750183,"creation_date":1682697735,"question_id":76131349,"body_markdown":"I&#39;m implementing a distributed text search engine. A document need to be sent to a corresponding indexer appliction based on the key. So there will be indexer-1, indexer-2...indexer-n spring applications. We cannot decide how many indexer there will be at the begining, but all indexer will register itself on Nacos(any register center).\r\n\r\nNow I want Nacos create the sharding of the service automatically. Say there are 10 indexer in the cluster, then 3 of them will be indexer-1, 3 indexer-2 and 4 indexer-3.\r\n\r\n\r\n(I know the existence of ElasticSearch, and need to implement my own) \r\n\r\nNow I am just sitting there trying to wrap my head around.","title":"How to let Nacos create a sharding of the service?","body":"<p>I'm implementing a distributed text search engine. A document need to be sent to a corresponding indexer appliction based on the key. So there will be indexer-1, indexer-2...indexer-n spring applications. We cannot decide how many indexer there will be at the begining, but all indexer will register itself on Nacos(any register center).</p>\n<p>Now I want Nacos create the sharding of the service automatically. Say there are 10 indexer in the cluster, then 3 of them will be indexer-1, 3 indexer-2 and 4 indexer-3.</p>\n<p>(I know the existence of ElasticSearch, and need to implement my own)</p>\n<p>Now I am just sitting there trying to wrap my head around.</p>\n"},{"tags":["java","string","performance","optimization"],"comments":[{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1288379192,"post_id":4052840,"comment_id":4355171,"body_markdown":"The best way would be to change your requirements if possible.  Accept a StringBuilder instead of a String and you can modify it directly.","body":"The best way would be to change your requirements if possible.  Accept a StringBuilder instead of a String and you can modify it directly."},{"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"score":0,"creation_date":1288382048,"post_id":4052840,"comment_id":4355644,"body_markdown":"Well this is not an answer because it&#39;s outside of Java, and relies on ASCII encoding and on knowing that the character is already alphabetic. It&#39;s an old-timer&#39;s hack: `c[0] |= &#39; &#39;;`","body":"Well this is not an answer because it&#39;s outside of Java, and relies on ASCII encoding and on knowing that the character is already alphabetic. It&#39;s an old-timer&#39;s hack: <code>c[0] |= &#39; &#39;;</code>"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1393678821,"post_id":4052840,"comment_id":33548619,"body_markdown":"possible duplicate of [Converting to upper and lower case in Java](http://stackoverflow.com/questions/2375649/converting-to-upper-and-lower-case-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2375649/converting-to-upper-and-lower-case-in-java\">Converting to upper and lower case in Java</a>"},{"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"score":1,"creation_date":1394687257,"post_id":4052840,"comment_id":34003880,"body_markdown":"that&#39;s a different question","body":"that&#39;s a different question"}],"answers":[{"comments":[{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":1,"creation_date":1346967122,"post_id":4052858,"comment_id":16515976,"body_markdown":"Actually, the first way creates a temporary String (for substring), which is more expensive than the character array.","body":"Actually, the first way creates a temporary String (for substring), which is more expensive than the character array."},{"owner":{"account_id":1041776,"reputation":2850,"user_id":1047667,"accept_rate":100,"display_name":"Nitsan Wakart"},"score":1,"creation_date":1438593130,"post_id":4052858,"comment_id":51496116,"body_markdown":"Unhelpful without supporting data","body":"Unhelpful without supporting data"}],"tags":[],"owner":{"account_id":21485,"reputation":24909,"user_id":52233,"display_name":"Alan Geleynse"},"comment_count":2,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1288363115,"creation_date":1288363115,"answer_id":4052858,"question_id":4052840,"body_markdown":"Strings in Java are immutable, so either way a new string will be created.\r\n\r\nYour first example will probably be slightly more efficient because it only needs to create a new string and not a temporary character array.","title":"Most efficient way to make the first character of a String lower case?","body":"<p>Strings in Java are immutable, so either way a new string will be created.</p>\n\n<p>Your first example will probably be slightly more efficient because it only needs to create a new string and not a temporary character array.</p>\n"},{"comments":[{"owner":{"account_id":63541,"reputation":743,"user_id":188037,"display_name":"hexium"},"score":9,"creation_date":1288364189,"post_id":4052914,"comment_id":4352499,"body_markdown":"More specifically, the method uncapitalize(java.lang.String) Using StringUtils has the added advantage of not having to worry about NullPointerExceptions in your code.","body":"More specifically, the method uncapitalize(java.lang.String) Using StringUtils has the added advantage of not having to worry about NullPointerExceptions in your code."},{"owner":{"account_id":102809,"reputation":27813,"user_id":275737,"display_name":"David Gelhar"},"score":3,"creation_date":1288364568,"post_id":4052914,"comment_id":4352566,"body_markdown":"Not necessarily the most efficient, but perhaps the clearest, which counts for a lot.","body":"Not necessarily the most efficient, but perhaps the clearest, which counts for a lot."},{"owner":{"account_id":13908,"reputation":7947,"user_id":28190,"accept_rate":67,"display_name":"Dan Gravell"},"score":2,"creation_date":1490027580,"post_id":4052914,"comment_id":72917418,"body_markdown":"Depends what resource you are making more efficient - CPU or programmer time :)","body":"Depends what resource you are making more efficient - CPU or programmer time :)"}],"tags":[],"owner":{"account_id":51695,"reputation":4428,"user_id":154494,"accept_rate":50,"display_name":"Carlos Tasada"},"comment_count":3,"down_vote_count":3,"up_vote_count":28,"is_accepted":false,"score":25,"last_activity_date":1438432324,"creation_date":1288363439,"answer_id":4052914,"question_id":4052840,"body_markdown":"When it comes to string manipulation take a look to Jakarta Commons Lang [StringUtils][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String)","title":"Most efficient way to make the first character of a String lower case?","body":"<p>When it comes to string manipulation take a look to Jakarta Commons Lang <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String)\" rel=\"noreferrer\">StringUtils</a>.</p>\n"},{"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1288380249,"creation_date":1288374650,"answer_id":4054513,"question_id":4052840,"body_markdown":"Despite a char oriented approach I would suggest a String oriented solution.\n[String.toLowerCase][1] is Locale specific, so I would take this issue into account. `String.toLowerCase` is to prefer for lower-caseing according to [Character.toLowerCase][2].\nAlso a char oriented solution is not full unicode compatible, because [Character.toLowerCase][2]  cannot handle supplementary characters.\n\n    public static final String uncapitalize(final String originalStr,\n                final Locale locale) {\n            final int splitIndex = 1;\n            final String result;\n            if (originalStr.isEmpty()) {\n            result = originalStr;\n            } else {\n            final String first = originalStr.substring(0, splitIndex).toLowerCase(\n                    locale);\n            final String rest = originalStr.substring(splitIndex);\n            final StringBuilder uncapStr = new StringBuilder(first).append(rest);\n            result = uncapStr.toString();\n            }\n            return result;\n        }\n\n**UPDATE:**\nAs an example how important the locale setting is let us lowercase `I` in turkish and german:\n\n \n\n    System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;TR&quot;,&quot;tr&quot;)));\n    System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;DE&quot;,&quot;de&quot;)));\n\nwill output two different results:\n\n&gt; ı\n&gt;\n&gt; i\n\n\n\n\n\n\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toLowerCase(java.util.Locale)\n  [2]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29","title":"Most efficient way to make the first character of a String lower case?","body":"<p>Despite a char oriented approach I would suggest a String oriented solution.\n<a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toLowerCase(java.util.Locale)\" rel=\"noreferrer\">String.toLowerCase</a> is Locale specific, so I would take this issue into account. <code>String.toLowerCase</code> is to prefer for lower-caseing according to <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29\" rel=\"noreferrer\">Character.toLowerCase</a>.\nAlso a char oriented solution is not full unicode compatible, because <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29\" rel=\"noreferrer\">Character.toLowerCase</a>  cannot handle supplementary characters.</p>\n<pre><code>public static final String uncapitalize(final String originalStr,\n            final Locale locale) {\n        final int splitIndex = 1;\n        final String result;\n        if (originalStr.isEmpty()) {\n        result = originalStr;\n        } else {\n        final String first = originalStr.substring(0, splitIndex).toLowerCase(\n                locale);\n        final String rest = originalStr.substring(splitIndex);\n        final StringBuilder uncapStr = new StringBuilder(first).append(rest);\n        result = uncapStr.toString();\n        }\n        return result;\n    }\n</code></pre>\n<p><strong>UPDATE:</strong>\nAs an example how important the locale setting is let us lowercase <code>I</code> in turkish and german:</p>\n<pre><code>System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;TR&quot;,&quot;tr&quot;)));\nSystem.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;DE&quot;,&quot;de&quot;)));\n</code></pre>\n<p>will output two different results:</p>\n<blockquote>\n<p>ı</p>\n<p>i</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"score":19,"creation_date":1370313904,"post_id":12308665,"comment_id":24404871,"body_markdown":"From the doc for this method: &quot;This normally means converting the first character from upper case to lower case, but in the (unusual) special case when there is more than one character and both the first and second characters are upper case, we leave it alone.&quot;","body":"From the doc for this method: &quot;This normally means converting the first character from upper case to lower case, but in the (unusual) special case when there is more than one character and both the first and second characters are upper case, we leave it alone.&quot;"},{"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"score":1,"creation_date":1370314014,"post_id":12308665,"comment_id":24404891,"body_markdown":"Also, looking at the source, once this method handles the special case I described in the previous comment, it merely uses the char array as I had mentioned in my question.","body":"Also, looking at the source, once this method handles the special case I described in the previous comment, it merely uses the char array as I had mentioned in my question."},{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":4,"creation_date":1564566479,"post_id":12308665,"comment_id":101070459,"body_markdown":"Exactly what I needed. Introspector.decapitalize(&quot;ABC&quot;) will still be ABC.  WordUtils.uncapitalize(&quot;ABC&quot;) produces &quot;aBC&quot;.  Just sharing that the former is how spring does its autonaming of beans, so if you need to retrieve by bean name the ABCService, it&#39;s not aBCService, but ABCService still.","body":"Exactly what I needed. Introspector.decapitalize(&quot;ABC&quot;) will still be ABC.  WordUtils.uncapitalize(&quot;ABC&quot;) produces &quot;aBC&quot;.  Just sharing that the former is how spring does its autonaming of beans, so if you need to retrieve by bean name the ABCService, it&#39;s not aBCService, but ABCService still."}],"tags":[],"owner":{"account_id":1818645,"reputation":1408,"user_id":1653210,"display_name":"Daniel Pacak"},"comment_count":3,"down_vote_count":0,"up_vote_count":104,"is_accepted":false,"score":104,"last_activity_date":1346966874,"creation_date":1346966874,"answer_id":12308665,"question_id":4052840,"body_markdown":"I came across a nice alternative if you don&#39;t want to use a third-party library:\r\n\r\n    import java.beans.Introspector;\r\n\r\n    Assert.assertEquals(&quot;someInputString&quot;, Introspector.decapitalize(&quot;SomeInputString&quot;));\r\n","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I came across a nice alternative if you don't want to use a third-party library:</p>\n\n<pre><code>import java.beans.Introspector;\n\nAssert.assertEquals(\"someInputString\", Introspector.decapitalize(\"SomeInputString\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1170783,"reputation":8281,"user_id":1148030,"accept_rate":90,"display_name":"Peter Lamberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394268037,"creation_date":1394268037,"answer_id":22267095,"question_id":4052840,"body_markdown":"If what you need is very simple (eg. java class names, no locales), you can also use the [CaseFormat][1] class in the [Google Guava][2] library.\r\n\r\n    String converted = CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_CAMEL, &quot;FooBar&quot;);\r\n    assertEquals(&quot;fooBar&quot;, converted);\r\n\r\nOr you can prepare and reuse a converter object, which could be more efficient.\r\n\r\n    Converter&lt;String, String&gt; converter=\r\n        CaseFormat.UPPER_CAMEL.converterTo(CaseFormat.LOWER_CAMEL);\r\n    \r\n    assertEquals(&quot;fooBar&quot;, converter.convert(&quot;FooBar&quot;));\r\n\r\nTo better understand philosophy of the Google Guava string manipulation, check out [this wiki page][3].\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CaseFormat.html\r\n  [2]: https://code.google.com/p/guava-libraries/\r\n  [3]: https://code.google.com/p/guava-libraries/wiki/StringsExplained","title":"Most efficient way to make the first character of a String lower case?","body":"<p>If what you need is very simple (eg. java class names, no locales), you can also use the <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CaseFormat.html\" rel=\"nofollow\">CaseFormat</a> class in the <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Google Guava</a> library.</p>\n\n<pre><code>String converted = CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_CAMEL, \"FooBar\");\nassertEquals(\"fooBar\", converted);\n</code></pre>\n\n<p>Or you can prepare and reuse a converter object, which could be more efficient.</p>\n\n<pre><code>Converter&lt;String, String&gt; converter=\n    CaseFormat.UPPER_CAMEL.converterTo(CaseFormat.LOWER_CAMEL);\n\nassertEquals(\"fooBar\", converter.convert(\"FooBar\"));\n</code></pre>\n\n<p>To better understand philosophy of the Google Guava string manipulation, check out <a href=\"https://code.google.com/p/guava-libraries/wiki/StringsExplained\" rel=\"nofollow\">this wiki page</a>.</p>\n"},{"comments":[{"owner":{"account_id":7494789,"reputation":698,"user_id":5695421,"accept_rate":25,"display_name":"dk7"},"score":3,"creation_date":1516974297,"post_id":24460478,"comment_id":83917905,"body_markdown":"It&#39;s nice and clean solution, but this is deprecated now, we should use commons-text&#39;s: `compile group: &#39;org.apache.commons&#39;, name: &#39;commons-text&#39;, version: &#39;1.2&#39;`","body":"It&#39;s nice and clean solution, but this is deprecated now, we should use commons-text&#39;s: <code>compile group: &#39;org.apache.commons&#39;, name: &#39;commons-text&#39;, version: &#39;1.2&#39;</code>"}],"tags":[],"owner":{"account_id":4300217,"reputation":878,"user_id":3514082,"display_name":"Sebastian"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1403901760,"creation_date":1403901760,"answer_id":24460478,"question_id":4052840,"body_markdown":"If you want to use Apache Commons you can do the following:\r\n\r\n    import org.apache.commons.lang3.text.WordUtils;\r\n    [...] \r\n    String s = &quot;SomeString&quot;; \r\n    String firstLower = WordUtils.uncapitalize(s);\r\n\r\nResult: someString","title":"Most efficient way to make the first character of a String lower case?","body":"<p>If you want to use Apache Commons you can do the following:</p>\n\n<pre><code>import org.apache.commons.lang3.text.WordUtils;\n[...] \nString s = \"SomeString\"; \nString firstLower = WordUtils.uncapitalize(s);\n</code></pre>\n\n<p>Result: someString</p>\n"},{"tags":[],"owner":{"account_id":3176704,"reputation":1508,"user_id":2684390,"display_name":"Bae Cheol Shin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414604502,"creation_date":1414604502,"answer_id":26637204,"question_id":4052840,"body_markdown":"    String testString = &quot;SomeInputString&quot;;\r\n    String firstLetter = testString.substring(0,1).toLowerCase();\r\n    String restLetters = testString.substring(1);\r\n    String resultString = firstLetter + restLetters;","title":"Most efficient way to make the first character of a String lower case?","body":"<pre><code>String testString = \"SomeInputString\";\nString firstLetter = testString.substring(0,1).toLowerCase();\nString restLetters = testString.substring(1);\nString resultString = firstLetter + restLetters;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4283000,"reputation":63,"user_id":3501758,"accept_rate":100,"display_name":"user3501758"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424352803,"creation_date":1424351396,"answer_id":28607286,"question_id":4052840,"body_markdown":"I have come accross this only today.  Tried to do it myself in the most pedestrian way.  That took one line, tho longish. Here goes\r\n\r\n    String str = &quot;TaxoRank&quot;; \r\n\r\n    System.out.println(&quot; Before str = &quot; + str); \r\n\r\n    str = str.replaceFirst(str.substring(0,1), str.substring(0,1).toLowerCase());\r\n\r\n    System.out.println(&quot; After str = &quot; + str);\r\n\r\nGives:\r\n\r\n Before str = TaxoRanks\r\n\r\n   After str = taxoRanks\r\n ","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I have come accross this only today.  Tried to do it myself in the most pedestrian way.  That took one line, tho longish. Here goes</p>\n\n<pre><code>String str = \"TaxoRank\"; \n\nSystem.out.println(\" Before str = \" + str); \n\nstr = str.replaceFirst(str.substring(0,1), str.substring(0,1).toLowerCase());\n\nSystem.out.println(\" After str = \" + str);\n</code></pre>\n\n<p>Gives:</p>\n\n<p>Before str = TaxoRanks</p>\n\n<p>After str = taxoRanks</p>\n"},{"tags":[],"owner":{"account_id":4785112,"reputation":918,"user_id":3865846,"accept_rate":75,"display_name":"Hllink"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1438291203,"creation_date":1438289591,"answer_id":31733835,"question_id":4052840,"body_markdown":"A very short and simple static method to archive what you want:\r\n\r\n\r\n    public static String decapitalizeString(String string) {\r\n        return string == null || string.isEmpty() ? &quot;&quot; : Character.toLowerCase(string.charAt(0)) + string.substring(1);\r\n    }","title":"Most efficient way to make the first character of a String lower case?","body":"<p>A very short and simple static method to archive what you want:</p>\n\n<pre><code>public static String decapitalizeString(String string) {\n    return string == null || string.isEmpty() ? \"\" : Character.toLowerCase(string.charAt(0)) + string.substring(1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1075043,"reputation":19715,"user_id":1073386,"accept_rate":83,"display_name":"Adam Stelmaszczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":160,"is_accepted":true,"score":160,"last_activity_date":1682749781,"creation_date":1438295441,"answer_id":31735171,"question_id":4052840,"body_markdown":"I tested the promising approaches using [JMH][1]. Full benchmark [code][2].\r\n\r\nAssumption during the tests (to avoid checking the corner cases every time): the input String length is always greater than 1.\r\n\r\nResults\r\n-------\r\n\r\n    Benchmark           Mode  Cnt         Score        Error  Units\r\n    MyBenchmark.test1  thrpt   20  10463220.493 &#177; 288805.068  ops/s\r\n    MyBenchmark.test2  thrpt   20  14730158.709 &#177; 530444.444  ops/s\r\n    MyBenchmark.test3  thrpt   20  16079551.751 &#177;  56884.357  ops/s\r\n    MyBenchmark.test4  thrpt   20   9762578.446 &#177; 584316.582  ops/s\r\n    MyBenchmark.test5  thrpt   20   6093216.066 &#177; 180062.872  ops/s\r\n    MyBenchmark.test6  thrpt   20   2104102.578 &#177;  18705.805  ops/s\r\n\r\nThe score are operations per second, the more the better. \r\n\r\nTests\r\n--------\r\n\r\n1. `test1` was first Andy&#39;s and Hllink&#39;s approach:\r\n\r\n        string = Character.toLowerCase(string.charAt(0)) + string.substring(1);\r\n\r\n2. `test2` was second Andy&#39;s approach. It is also [`Introspector.decapitalize()`][3] suggested by Daniel, but without two `if` statements. First `if` was removed because of the testing assumption. The second one was removed, because it was violating correctness (i.e. input `&quot;HI&quot;` would return `&quot;HI&quot;`). This was almost the fastest.\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] = Character.toLowerCase(c[0]);\r\n        string = new String(c);\r\n\r\n3. `test3` was a modification of `test2`, but instead of `Character.toLowerCase()`, I was adding 32, which works correctly if and only if the string is in ASCII. This was the fastest. `c[0] |= &#39; &#39;` from Mike&#39;s [comment](https://stackoverflow.com/questions/4052840/most-efficient-way-to-make-the-first-character-of-a-string-lower-case#comment-4355644) gave the same performance.\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] += 32;\r\n        string = new String(c);\r\n\r\n4. `test4` used `StringBuilder`.\r\n\r\n        StringBuilder sb = new StringBuilder(string);\r\n        sb.setCharAt(0, Character.toLowerCase(sb.charAt(0)));\r\n        string = sb.toString();\r\n\r\n5. `test5` used two `substring()` calls.\r\n\r\n        string = string.substring(0, 1).toLowerCase() + string.substring(1);\r\n\r\n6. `test6` uses reflection to change [`char value[]`][4] directly in String. This was the slowest.\r\n\r\n        try {\r\n            Field field = String.class.getDeclaredField(&quot;value&quot;);\r\n            field.setAccessible(true);\r\n            char[] value = (char[]) field.get(string);\r\n            value[0] = Character.toLowerCase(value[0]);\r\n        } catch (IllegalAccessException e) {\r\n            e.printStackTrace();\r\n        } catch (NoSuchFieldException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nConclusions\r\n-------\r\n\r\nIf the String length is always greater than 0, use `test2`.\r\n\r\nIf not, we have to check the corner cases:\r\n\r\n    public static String decapitalize(String string) {\r\n        if (string == null || string.length() == 0) {\r\n            return string;\r\n        }\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] = Character.toLowerCase(c[0]);\r\n\r\n        return new String(c);\r\n    }\r\n\r\n&lt;!----&gt;\r\n\r\nIf you are sure that your text will be always in ASCII and you are looking for extreme performance because you found this code in the  bottleneck, use `test3`.\r\n\r\n  [1]: http://openjdk.java.net/projects/code-tools/jmh/\r\n  [2]: https://gist.github.com/AdamStelmaszczyk/5593723da543940acfd1\r\n  [3]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/beans/Introspector.java#Introspector.decapitalize%28java.lang.String%29\r\n  [4]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.0value","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I tested the promising approaches using <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\" rel=\"nofollow noreferrer\">JMH</a>. Full benchmark <a href=\"https://gist.github.com/AdamStelmaszczyk/5593723da543940acfd1\" rel=\"nofollow noreferrer\">code</a>.</p>\n<p>Assumption during the tests (to avoid checking the corner cases every time): the input String length is always greater than 1.</p>\n<h2>Results</h2>\n<pre><code>Benchmark           Mode  Cnt         Score        Error  Units\nMyBenchmark.test1  thrpt   20  10463220.493 ± 288805.068  ops/s\nMyBenchmark.test2  thrpt   20  14730158.709 ± 530444.444  ops/s\nMyBenchmark.test3  thrpt   20  16079551.751 ±  56884.357  ops/s\nMyBenchmark.test4  thrpt   20   9762578.446 ± 584316.582  ops/s\nMyBenchmark.test5  thrpt   20   6093216.066 ± 180062.872  ops/s\nMyBenchmark.test6  thrpt   20   2104102.578 ±  18705.805  ops/s\n</code></pre>\n<p>The score are operations per second, the more the better.</p>\n<h2>Tests</h2>\n<ol>\n<li><p><code>test1</code> was first Andy's and Hllink's approach:</p>\n<pre><code> string = Character.toLowerCase(string.charAt(0)) + string.substring(1);\n</code></pre>\n</li>\n<li><p><code>test2</code> was second Andy's approach. It is also <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/beans/Introspector.java#Introspector.decapitalize%28java.lang.String%29\" rel=\"nofollow noreferrer\"><code>Introspector.decapitalize()</code></a> suggested by Daniel, but without two <code>if</code> statements. First <code>if</code> was removed because of the testing assumption. The second one was removed, because it was violating correctness (i.e. input <code>&quot;HI&quot;</code> would return <code>&quot;HI&quot;</code>). This was almost the fastest.</p>\n<pre><code> char c[] = string.toCharArray();\n c[0] = Character.toLowerCase(c[0]);\n string = new String(c);\n</code></pre>\n</li>\n<li><p><code>test3</code> was a modification of <code>test2</code>, but instead of <code>Character.toLowerCase()</code>, I was adding 32, which works correctly if and only if the string is in ASCII. This was the fastest. <code>c[0] |= ' '</code> from Mike's <a href=\"https://stackoverflow.com/questions/4052840/most-efficient-way-to-make-the-first-character-of-a-string-lower-case#comment-4355644\">comment</a> gave the same performance.</p>\n<pre><code> char c[] = string.toCharArray();\n c[0] += 32;\n string = new String(c);\n</code></pre>\n</li>\n<li><p><code>test4</code> used <code>StringBuilder</code>.</p>\n<pre><code> StringBuilder sb = new StringBuilder(string);\n sb.setCharAt(0, Character.toLowerCase(sb.charAt(0)));\n string = sb.toString();\n</code></pre>\n</li>\n<li><p><code>test5</code> used two <code>substring()</code> calls.</p>\n<pre><code> string = string.substring(0, 1).toLowerCase() + string.substring(1);\n</code></pre>\n</li>\n<li><p><code>test6</code> uses reflection to change <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.0value\" rel=\"nofollow noreferrer\"><code>char value[]</code></a> directly in String. This was the slowest.</p>\n<pre><code> try {\n     Field field = String.class.getDeclaredField(&quot;value&quot;);\n     field.setAccessible(true);\n     char[] value = (char[]) field.get(string);\n     value[0] = Character.toLowerCase(value[0]);\n } catch (IllegalAccessException e) {\n     e.printStackTrace();\n } catch (NoSuchFieldException e) {\n     e.printStackTrace();\n }\n</code></pre>\n</li>\n</ol>\n<h2>Conclusions</h2>\n<p>If the String length is always greater than 0, use <code>test2</code>.</p>\n<p>If not, we have to check the corner cases:</p>\n<pre><code>public static String decapitalize(String string) {\n    if (string == null || string.length() == 0) {\n        return string;\n    }\n\n    char c[] = string.toCharArray();\n    c[0] = Character.toLowerCase(c[0]);\n\n    return new String(c);\n}\n</code></pre>\n\n<p>If you are sure that your text will be always in ASCII and you are looking for extreme performance because you found this code in the  bottleneck, use <code>test3</code>.</p>\n"},{"tags":[],"owner":{"account_id":5256798,"reputation":320,"user_id":4199462,"display_name":"Vivek"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1557337079,"creation_date":1557337079,"answer_id":56046279,"question_id":4052840,"body_markdown":"    val str = &quot;Hello&quot;\r\n    s&quot;${str.head.toLower}${str.tail}&quot;\r\n\r\nResult:\r\n\r\n    res4: String = hello","title":"Most efficient way to make the first character of a String lower case?","body":"<pre><code>val str = \"Hello\"\ns\"${str.head.toLower}${str.tail}\"\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>res4: String = hello\n</code></pre>\n"}],"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127375,"favorite_count":0,"down_vote_count":0,"up_vote_count":131,"accepted_answer_id":31735171,"answer_count":11,"score":131,"last_activity_date":1682749781,"creation_date":1288362997,"question_id":4052840,"body_markdown":"What is the most efficient way to make the first character of a `String` lower case?\r\n\r\nI can think of a number of ways to do this:\r\n\r\n___Using `charAt()` with `substring()`___\r\n\r\n    String input   = &quot;SomeInputString&quot;;\r\n    String output  = Character.toLowerCase(input.charAt(0)) +\r\n                       (input.length() &gt; 1 ? input.substring(1) : &quot;&quot;);\r\n\r\n___Or using a `char` array___\r\n\r\n     String input  = &quot;SomeInputString&quot;;\r\n     char c[]      = input.toCharArray();\r\n     c[0]          = Character.toLowerCase(c[0]);\r\n     String output = new String(c);\r\n\r\n---\r\n\r\nI am sure there are many other great ways to achieve this. What do you recommend?","title":"Most efficient way to make the first character of a String lower case?","body":"<p>What is the most efficient way to make the first character of a <code>String</code> lower case?</p>\n\n<p>I can think of a number of ways to do this:</p>\n\n<p><strong><em>Using <code>charAt()</code> with <code>substring()</code></em></strong></p>\n\n<pre><code>String input   = \"SomeInputString\";\nString output  = Character.toLowerCase(input.charAt(0)) +\n                   (input.length() &gt; 1 ? input.substring(1) : \"\");\n</code></pre>\n\n<p><strong><em>Or using a <code>char</code> array</em></strong></p>\n\n<pre><code> String input  = \"SomeInputString\";\n char c[]      = input.toCharArray();\n c[0]          = Character.toLowerCase(c[0]);\n String output = new String(c);\n</code></pre>\n\n<hr>\n\n<p>I am sure there are many other great ways to achieve this. What do you recommend?</p>\n"},{"tags":["java","python","sqlite","android-studio","sockets"],"comments":[{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1591715634,"post_id":62285590,"comment_id":110157906,"body_markdown":"You should compare original and damaged file with a hex viewer or editor (also compare sizes).","body":"You should compare original and damaged file with a hex viewer or editor (also compare sizes)."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591716217,"post_id":62285590,"comment_id":110158238,"body_markdown":"the corrupted file is 4 kb less then the original file, and how to spot problems with hex viewer","body":"the corrupted file is 4 kb less then the original file, and how to spot problems with hex viewer"},{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":1,"creation_date":1591734000,"post_id":62285590,"comment_id":110167727,"body_markdown":"I took a closer look now at the Java client: It only reads up to 20002 bytes from socket and writes exactly 20002 bytes, regardless how much data is transferred. The transfer code must be included in a while-loop and break if nothing more is read and the write must only transfer so much bytes as were really read before, not the size of the buffer.","body":"I took a closer look now at the Java client: It only reads up to 20002 bytes from socket and writes exactly 20002 bytes, regardless how much data is transferred. The transfer code must be included in a while-loop and break if nothing more is read and the write must only transfer so much bytes as were really read before, not the size of the buffer."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591775088,"post_id":62285590,"comment_id":110180371,"body_markdown":"thank you so much for helping but i dont know how to make a loop of that, i am not expert at java sockets and all the other java socket tutorials didnt use loops","body":"thank you so much for helping but i dont know how to make a loop of that, i am not expert at java sockets and all the other java socket tutorials didnt use loops"},{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1591790902,"post_id":62285590,"comment_id":110188871,"body_markdown":"It&#39;s a simple infinite while-loop around the read-write code which should be broken if no more input is coming.","body":"It&#39;s a simple infinite while-loop around the read-write code which should be broken if no more input is coming."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591819737,"post_id":62285590,"comment_id":110205488,"body_markdown":"yeah thank i make it worked, the only problem now is to do the opposite, to  make a python server that receive the file and java client that send the file","body":"yeah thank i make it worked, the only problem now is to do the opposite, to  make a python server that receive the file and java client that send the file"}],"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682748632,"creation_date":1591714896,"question_id":62285590,"body_markdown":"i am trying to send a db file from python server to java client, for my school project.\r\n\r\nevery file is being transferred successfully \r\nHowever when i try to open the file i get this error:\r\n**&quot;could not open database file. reason database disk image is malformed&quot;**\r\n\r\n\r\ni am using an python server on my PC\r\n\r\nand a android client on my phone\r\nthey both are on the same WiFi.\r\n\r\nhere is the code for the Python server\r\n```\r\nimport socket\r\nTCP_IP = &#39;192.168.14.87&#39;\r\nTCP_PORT = 9012\r\n\r\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\ns.bind((TCP_IP, TCP_PORT))\r\ns.listen(5)\r\nprint (&#39;listening&#39;)\r\nconn, addr=s.accept()\r\nprint (&quot;Client connected: &quot;,addr)\r\nfilename=&quot;trempi.db&quot;\r\n#file=open(filename, &#39;rb&#39;)\r\n#file_data=file.read()\r\nwith open(filename, &quot;rb&quot;) as f:\r\n\t\tbytes_read=f.read()\r\n\t\tif not bytes_read:\r\n\t\t\tbreak\r\n\t\tconn.sendall(bytes_read)\t\r\nconn.close()\r\nprint (&quot;Data has been transmitted :)&quot;)\r\n```\r\n\r\nAnd there is the code of the Andorid Client:\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        tv=findViewById(R.id.tv1);\r\n        btn=findViewById(R.id.btn);\r\n        btn2=findViewById(R.id.btn2);\r\n        btn.setOnClickListener(this);\r\n        btn2.setOnClickListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if (v==btn2)\r\n        {\r\n            Intent go=new Intent(MainActivity.this,Data.class);\r\n            startActivity(go);\r\n        }\r\n        if (v==btn)\r\n        {\r\n            Thread myThread=new Thread(new MyServer());\r\n            myThread.start();\r\n        }\r\n\r\n    }\r\n    class MyServer implements Runnable\r\n    {\r\n        Handler handler=new Handler();\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                byte[] b=new byte[20002];\r\n                Socket s=new Socket(&quot;192.168.14.87&quot;,9012);\r\n                InputStream is=s.getInputStream();\r\n\r\n                FileOutputStream fr=new FileOutputStream(getDatabasePath(&quot;trempi.db&quot;).toString());\r\n                is.read(b,0,b.length);\r\n                fr.write(b,0,b.length);\r\n                s.close();\r\n                is.close();\r\n                fr.close();\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```","title":"trying to send sqlite database file through socket","body":"<p>i am trying to send a db file from python server to java client, for my school project.</p>\n<p>every file is being transferred successfully\nHowever when i try to open the file i get this error:\n<strong>&quot;could not open database file. reason database disk image is malformed&quot;</strong></p>\n<p>i am using an python server on my PC</p>\n<p>and a android client on my phone\nthey both are on the same WiFi.</p>\n<p>here is the code for the Python server</p>\n<pre><code>import socket\nTCP_IP = '192.168.14.87'\nTCP_PORT = 9012\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.bind((TCP_IP, TCP_PORT))\ns.listen(5)\nprint ('listening')\nconn, addr=s.accept()\nprint (&quot;Client connected: &quot;,addr)\nfilename=&quot;trempi.db&quot;\n#file=open(filename, 'rb')\n#file_data=file.read()\nwith open(filename, &quot;rb&quot;) as f:\n        bytes_read=f.read()\n        if not bytes_read:\n            break\n        conn.sendall(bytes_read)    \nconn.close()\nprint (&quot;Data has been transmitted :)&quot;)\n</code></pre>\n<p>And there is the code of the Andorid Client:</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        tv=findViewById(R.id.tv1);\n        btn=findViewById(R.id.btn);\n        btn2=findViewById(R.id.btn2);\n        btn.setOnClickListener(this);\n        btn2.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View v) {\n        if (v==btn2)\n        {\n            Intent go=new Intent(MainActivity.this,Data.class);\n            startActivity(go);\n        }\n        if (v==btn)\n        {\n            Thread myThread=new Thread(new MyServer());\n            myThread.start();\n        }\n\n    }\n    class MyServer implements Runnable\n    {\n        Handler handler=new Handler();\n        @Override\n        public void run() {\n            try {\n                byte[] b=new byte[20002];\n                Socket s=new Socket(&quot;192.168.14.87&quot;,9012);\n                InputStream is=s.getInputStream();\n\n                FileOutputStream fr=new FileOutputStream(getDatabasePath(&quot;trempi.db&quot;).toString());\n                is.read(b,0,b.length);\n                fr.write(b,0,b.length);\n                s.close();\n                is.close();\n                fr.close();\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","environment-variables","sts"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1682753963,"post_id":76134273,"comment_id":134268040,"body_markdown":"Java properties and environment variables are different things. To set the Java property, start your Java application with the VM argument `-DenvVerNum=2.2.2`. In Java you can get the value of an environment variable via `System.getenv(&quot;envVerNum&quot;)`. Please show your code where and how you access `envVerNum` and tell why you do what (and whether you want to use a Java property or an environment variable for it).","body":"Java properties and environment variables are different things. To set the Java property, start your Java application with the VM argument <code>-DenvVerNum=2.2.2</code>. In Java you can get the value of an environment variable via <code>System.getenv(&quot;envVerNum&quot;)</code>. Please show your code where and how you access <code>envVerNum</code> and tell why you do what (and whether you want to use a Java property or an environment variable for it)."}],"answers":[{"tags":[],"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682748092,"creation_date":1682748092,"answer_id":76134763,"question_id":76134273,"body_markdown":"using CMD (not powershell) execute SET command to see all environmental variables including all that you set up through contro-lpanel. \r\n\r\nMicrosoft Docs has extensive documentation on all aspects of environmental variables (RTFM https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1) \r\n\r\nThe problem, IMHO ,you are not aware of difference between &quot;environmental variable&quot; on different OS platform (*nix, windows,   Mac)\r\n\r\n\r\n","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot; in Application Properties in sts4","body":"<p>using CMD (not powershell) execute SET command to see all environmental variables including all that you set up through contro-lpanel.</p>\n<p>Microsoft Docs has extensive documentation on all aspects of environmental variables (RTFM <a href=\"https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1</a>)</p>\n<p>The problem, IMHO ,you are not aware of difference between &quot;environmental variable&quot; on different OS platform (*nix, windows,   Mac)</p>\n"}],"owner":{"account_id":28274053,"reputation":1,"user_id":21616811,"display_name":"Sam Nithish  K C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682748092,"creation_date":1682735405,"question_id":76134273,"body_markdown":"In MacOS, they just open terminal and do these\r\n```\r\nvi .bash_profile\r\n```\r\n here vi is something like text editor .. \r\n\r\nthen the file named .bash_profile popsup and they store \r\n```\r\nexport envVerNum=2.2.2 \r\n```\r\nand save it and close it.\r\n\r\nthen open terminal again and type \r\n```\r\necho $envVerNum\r\n```\r\n\r\nit returns 2.2.2 !\r\nit also returns in sts4 !\r\n\r\nNow, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !\r\n\r\n\r\nI tried setting environment varibles directly on control panel ! that doesnt work.. tell me something &quot;it need some configuration&quot; \r\nand \r\nI tried setting environment variables insde the sts4 run and debug settings.\r\n\r\nI expect that ... i want to store envVerNum=2.2.2 outside the sts4 and call it on Application Properties.\r\n\r\nplease explain me !","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot; in Application Properties in sts4","body":"<p>In MacOS, they just open terminal and do these</p>\n<pre><code>vi .bash_profile\n</code></pre>\n<p>here vi is something like text editor ..</p>\n<p>then the file named .bash_profile popsup and they store</p>\n<pre><code>export envVerNum=2.2.2 \n</code></pre>\n<p>and save it and close it.</p>\n<p>then open terminal again and type</p>\n<pre><code>echo $envVerNum\n</code></pre>\n<p>it returns 2.2.2 !\nit also returns in sts4 !</p>\n<p>Now, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !</p>\n<p>I tried setting environment varibles directly on control panel ! that doesnt work.. tell me something &quot;it need some configuration&quot;\nand\nI tried setting environment variables insde the sts4 run and debug settings.</p>\n<p>I expect that ... i want to store envVerNum=2.2.2 outside the sts4 and call it on Application Properties.</p>\n<p>please explain me !</p>\n"},{"tags":["java","javafx","desktop-application"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682708453,"post_id":76132499,"comment_id":134263700,"body_markdown":"You put the CSS file under the wrong directory. The `src/main/java` directory (and sub-directories, i.e., packages) are for `*.java` files only. Put CSS files, image files, FXML files, and other resources under the `src/main/resources` directory (or a sub-directory, i.e., package).","body":"You put the CSS file under the wrong directory. The <code>src&#47;main&#47;java</code> directory (and sub-directories, i.e., packages) are for <code>*.java</code> files only. Put CSS files, image files, FXML files, and other resources under the <code>src&#47;main&#47;resources</code> directory (or a sub-directory, i.e., package)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682708659,"post_id":76132499,"comment_id":134263727,"body_markdown":"And note `scene.getStylesheets().add(&quot;login-style.css&quot;)` will look for the resource at the **root** of the class-path. Make sure to specify the correct path; maybe use the `Class#getResource(String)` API. I recommend you read [How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?](https://stackoverflow.com/q/61531317/6395627) (which this question is probably a duplicate of).","body":"And note <code>scene.getStylesheets().add(&quot;login-style.css&quot;)</code> will look for the resource at the <b>root</b> of the class-path. Make sure to specify the correct path; maybe use the <code>Class#getResource(String)</code> API. I recommend you read <a href=\"https://stackoverflow.com/q/61531317/6395627\">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a> (which this question is probably a duplicate of)."}],"owner":{"account_id":26910488,"reputation":1,"user_id":20486142,"display_name":"Noussaiba Zaoui"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682710155,"answer_count":0,"score":0,"last_activity_date":1682741032,"creation_date":1682708142,"question_id":76132499,"body_markdown":"here is a screenshoot of the hierarchy of my project :(https://i.stack.imgur.com/pY7uI.png)\r\n\r\nhere is the code source :\r\n**StylingLoginPage.java:**\r\n\r\n```\r\npackage com.example.loginpage;\r\n\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.geometry.Insets;\r\nimport javafx.scene.layout.GridPane;\r\n\r\n\r\nimport javafx.application.Application;\r\n\r\npublic class StylingLoginPage extends Application {\r\n\r\n    public static void  main (String[] args){\r\n        launch(args);\r\n    }\r\n    @Override\r\n    public void start (Stage primaryStage){\r\n        primaryStage.setTitle(&quot;CSS styling&quot;);\r\n\r\n        //Name Label:\r\n        Label namelabel = new Label(&quot;Username&quot;);\r\n        GridPane.setConstraints(namelabel,0,0);\r\n\r\n        //Username Input:\r\n        TextField nameInput = new TextField();\r\n        nameInput.setPromptText(&quot;Enter your name&quot;);\r\n        GridPane.setConstraints(nameInput,1,0);\r\n\r\n        //password Label:\r\n        Label pwdlabel = new Label(&quot;password&quot;);\r\n        GridPane.setConstraints(pwdlabel,0,1);\r\n\r\n        //Password Input:\r\n        TextField pwdInput = new TextField();\r\n        pwdInput.setPromptText(&quot;Enter your password&quot;);\r\n        GridPane.setConstraints(pwdInput,1,1);\r\n\r\n        //Login Button:\r\n        Button loginButton = new Button(&quot;Login&quot;);\r\n        GridPane.setConstraints(loginButton ,1,2);\r\n\r\n        //EventHandler:\r\n        loginButton.setOnAction(e-&gt;System.out.println(&quot;User loged in ..&quot;));\r\n\r\n        //Layout:\r\n        GridPane gridpane = new GridPane();\r\n        gridpane.setPadding(new Insets(10,10,10,10));\r\n        gridpane.setVgap(10);\r\n        gridpane.setHgap(10);\r\n        gridpane.getChildren().addAll(namelabel,nameInput,pwdlabel,pwdInput,loginButton);\r\n\r\n        //Scene:\r\n        Scene scene = new Scene(gridpane,300,300);\r\n        scene.getStylesheets().add(&quot;login-style.css&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n**login-style.css**\r\n\r\n```\r\n.root{\r\n    -fx-background-color:#383838;\r\n    -fx-font-size:11pt;\r\n}\r\n```\r\n\r\n\r\nI&#39;m building a login Page using javaFX and i tried to include some CSS style  in my project . \r\nWether i&#39;m working on Eclipe or intellij IDEA, I&#39;m getting the sam error:\r\n*com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\r\nWARNING: Resource &quot;login-style.css&quot; not found.\r\n*","title":"CSS file not found in javaFX project","body":"<p>here is a screenshoot of the hierarchy of my project :(<a href=\"https://i.stack.imgur.com/pY7uI.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/pY7uI.png</a>)</p>\n<p>here is the code source :\n<strong>StylingLoginPage.java:</strong></p>\n<pre><code>package com.example.loginpage;\n\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextField;\nimport javafx.geometry.Insets;\nimport javafx.scene.layout.GridPane;\n\n\nimport javafx.application.Application;\n\npublic class StylingLoginPage extends Application {\n\n    public static void  main (String[] args){\n        launch(args);\n    }\n    @Override\n    public void start (Stage primaryStage){\n        primaryStage.setTitle(&quot;CSS styling&quot;);\n\n        //Name Label:\n        Label namelabel = new Label(&quot;Username&quot;);\n        GridPane.setConstraints(namelabel,0,0);\n\n        //Username Input:\n        TextField nameInput = new TextField();\n        nameInput.setPromptText(&quot;Enter your name&quot;);\n        GridPane.setConstraints(nameInput,1,0);\n\n        //password Label:\n        Label pwdlabel = new Label(&quot;password&quot;);\n        GridPane.setConstraints(pwdlabel,0,1);\n\n        //Password Input:\n        TextField pwdInput = new TextField();\n        pwdInput.setPromptText(&quot;Enter your password&quot;);\n        GridPane.setConstraints(pwdInput,1,1);\n\n        //Login Button:\n        Button loginButton = new Button(&quot;Login&quot;);\n        GridPane.setConstraints(loginButton ,1,2);\n\n        //EventHandler:\n        loginButton.setOnAction(e-&gt;System.out.println(&quot;User loged in ..&quot;));\n\n        //Layout:\n        GridPane gridpane = new GridPane();\n        gridpane.setPadding(new Insets(10,10,10,10));\n        gridpane.setVgap(10);\n        gridpane.setHgap(10);\n        gridpane.getChildren().addAll(namelabel,nameInput,pwdlabel,pwdInput,loginButton);\n\n        //Scene:\n        Scene scene = new Scene(gridpane,300,300);\n        scene.getStylesheets().add(&quot;login-style.css&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p><strong>login-style.css</strong></p>\n<pre><code>.root{\n    -fx-background-color:#383838;\n    -fx-font-size:11pt;\n}\n</code></pre>\n<p>I'm building a login Page using javaFX and i tried to include some CSS style  in my project .\nWether i'm working on Eclipe or intellij IDEA, I'm getting the sam error:\n*com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\nWARNING: Resource &quot;login-style.css&quot; not found.\n*</p>\n"},{"tags":["java","kotlin","static-methods"],"comments":[{"owner":{"account_id":3660223,"reputation":6093,"user_id":3050249,"display_name":"Miha_x64"},"score":3,"creation_date":1494337024,"post_id":43857824,"comment_id":74777897,"body_markdown":"If you want to create a singleton, check out https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations.","body":"If you want to create a singleton, check out <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>."}],"answers":[{"comments":[{"owner":{"account_id":11057702,"reputation":263,"user_id":8120100,"display_name":"artaxerx"},"score":0,"creation_date":1683012173,"post_id":43857895,"comment_id":134297639,"body_markdown":"If you want to use it like a `static final` field in Java without getters, you probably should mark it `@JvmField`","body":"If you want to use it like a <code>static final</code> field in Java without getters, you probably should mark it <code>@JvmField</code>"}],"tags":[],"owner":{"account_id":1483982,"reputation":6755,"user_id":1392623,"display_name":"Eduard B."},"comment_count":1,"down_vote_count":1,"up_vote_count":186,"is_accepted":true,"score":185,"last_activity_date":1682740719,"creation_date":1494280717,"answer_id":43857895,"question_id":43857824,"body_markdown":"**Update**: Anyone (like OP) who just needs a so-called &quot;Singleton&quot;, sometimes called &quot;Service&quot; (except in Android), should simply use Kotlin&#39;s built-in:\r\n```kotlin\r\nobject Foo {\r\n    // Done, this already does what OP needed,\r\n    // because the boilerplate codes (like static field and constructor),\r\n    // are taken care of by Kotlin.\r\n}\r\n```\r\n&lt;sup&gt;(Like [Roman](https://stackoverflow.com/users/1051598/roman-elizarov) rightly pointed out in the comment-section.)&lt;/sup&gt;\r\n\r\nPrevious answer; If you have (or plan to have) multiple `static` variables, then continue reading:\r\n\r\nThe closest thing to Java&#39;s static fields is a companion object. You can find the documentation reference for them here: https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\r\n\r\nYour code in Kotlin would look something like this:\r\n\r\n    class Foo {\r\n    \r\n        companion object {\r\n            private lateinit var instance: Foo\r\n\r\n            fun get(): Foo {\r\n                return instance;\r\n            }\r\n        }\r\n    \r\n        init {\r\n            if (instance == null) {\r\n                instance = this\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nIf you want your fields/methods to be exposed as static to Java callers, you can apply the [`@JvmStatic`][1] annotation:\r\n\r\n    class Foo {\r\n    \r\n        companion object {\r\n            private lateinit var instance: Foo\r\n\r\n            @JvmStatic fun get(): Foo {\r\n                return instance;\r\n            }\r\n        }\r\n    \r\n        init {\r\n            if (instance == null) {\r\n                instance = this\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n&gt; **Note** that `@JvmStatic` does not need any import (as it&#39;s built-in feature of Kotlin).\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/","title":"static methods and variables in Kotlin?","body":"<p><strong>Update</strong>: Anyone (like OP) who just needs a so-called &quot;Singleton&quot;, sometimes called &quot;Service&quot; (except in Android), should simply use Kotlin's built-in:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>object Foo {\n    // Done, this already does what OP needed,\n    // because the boilerplate codes (like static field and constructor),\n    // are taken care of by Kotlin.\n}\n</code></pre>\n<p><sup>(Like <a href=\"https://stackoverflow.com/users/1051598/roman-elizarov\">Roman</a> rightly pointed out in the comment-section.)</sup></p>\n<p>Previous answer; If you have (or plan to have) multiple <code>static</code> variables, then continue reading:</p>\n<p>The closest thing to Java's static fields is a companion object. You can find the documentation reference for them here: <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects</a></p>\n<p>Your code in Kotlin would look something like this:</p>\n<pre><code>class Foo {\n\n    companion object {\n        private lateinit var instance: Foo\n\n        fun get(): Foo {\n            return instance;\n        }\n    }\n\n    init {\n        if (instance == null) {\n            instance = this\n        }\n    }\n\n}\n</code></pre>\n<p>If you want your fields/methods to be exposed as static to Java callers, you can apply the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/\" rel=\"noreferrer\"><code>@JvmStatic</code></a> annotation:</p>\n<pre><code>class Foo {\n\n    companion object {\n        private lateinit var instance: Foo\n\n        @JvmStatic fun get(): Foo {\n            return instance;\n        }\n    }\n\n    init {\n        if (instance == null) {\n            instance = this\n        }\n    }\n\n}\n</code></pre>\n<blockquote>\n<p><strong>Note</strong> that <code>@JvmStatic</code> does not need any import (as it's built-in feature of Kotlin).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8190426,"reputation":626,"user_id":6164819,"display_name":"rakesh rajput"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1502993215,"creation_date":1498735696,"answer_id":44823868,"question_id":43857824,"body_markdown":"first you create a simple class then after create a block followed by companion object keyword\r\n\r\n\r\nfor example: \r\n\r\n\r\n    class Test{\r\n\r\n        companion object{\r\n\r\n            fun  getValue(): String{\r\n             \r\n               return &quot;Test String&quot;\r\n\r\n            }\r\n        }\r\n    }\r\n\r\nyou can call this class function using class name dot function name \r\n\r\nfor example:\r\n\r\n    // here you will get the function value\r\n    Test.getValue() ","title":"static methods and variables in Kotlin?","body":"<p>first you create a simple class then after create a block followed by companion object keyword</p>\n\n<p>for example: </p>\n\n<pre><code>class Test{\n\n    companion object{\n\n        fun  getValue(): String{\n\n           return \"Test String\"\n\n        }\n    }\n}\n</code></pre>\n\n<p>you can call this class function using class name dot function name </p>\n\n<p>for example:</p>\n\n<pre><code>// here you will get the function value\nTest.getValue() \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1112584,"reputation":629,"user_id":1102761,"display_name":"jtonic"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1598962936,"creation_date":1508268340,"answer_id":46797741,"question_id":43857824,"body_markdown":"You can create a companion object for the class, and if you want the field to be `static` you can use the annotation @JvmStatic. Companion object have access to private members of the class it is companion for.\r\n\r\nSee below an example:\r\n\r\n    class User {\r\n        private lateinit var name: String\r\n    \r\n        override fun toString() = name\r\n    \r\n        companion object {\r\n            @JvmStatic\r\n            val instance by lazy {\r\n                User().apply { name = &quot;jtonic&quot; }\r\n            }\r\n        }\r\n    }\r\n    \r\n    class CompanionTest {\r\n    \r\n        @Test\r\n        fun `test companion object`() {\r\n            User.instance.toString() shouldBe &quot;jtonic&quot;\r\n        }\r\n    }","title":"static methods and variables in Kotlin?","body":"<p>You can create a companion object for the class, and if you want the field to be <code>static</code> you can use the annotation @JvmStatic. Companion object have access to private members of the class it is companion for.</p>\n<p>See below an example:</p>\n<pre><code>class User {\n    private lateinit var name: String\n\n    override fun toString() = name\n\n    companion object {\n        @JvmStatic\n        val instance by lazy {\n            User().apply { name = &quot;jtonic&quot; }\n        }\n    }\n}\n\nclass CompanionTest {\n\n    @Test\n    fun `test companion object`() {\n        User.instance.toString() shouldBe &quot;jtonic&quot;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10848361,"reputation":1894,"user_id":7977034,"accept_rate":71,"display_name":"Caleb Bassham"},"score":0,"creation_date":1579999613,"post_id":46802549,"comment_id":105954240,"body_markdown":"This is the much better solution, however, for my use case I needed a class because it needed to be able to be created by a Java class loader.","body":"This is the much better solution, however, for my use case I needed a class because it needed to be able to be created by a Java class loader."},{"owner":{"account_id":25693132,"reputation":485,"user_id":19454251,"display_name":"Arthur Kasparian"},"score":0,"creation_date":1673534712,"post_id":46802549,"comment_id":132524882,"body_markdown":"An object is accessible throughout the entire project though, couldn&#39;t that hinder performance?","body":"An object is accessible throughout the entire project though, couldn&#39;t that hinder performance?"}],"tags":[],"owner":{"account_id":1046776,"reputation":27433,"user_id":1051598,"accept_rate":20,"display_name":"Roman  Elizarov"},"comment_count":2,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1508298950,"creation_date":1508298950,"answer_id":46802549,"question_id":43857824,"body_markdown":"It looks that you want to define a singleton object. It is supported in Kotlin as a first-class concept:\r\n\r\n    object Foo {\r\n      ... \r\n    }\r\n\r\nAll the boilerplate code with static field and constructor is taken care by the Kotlin automatically. You don&#39;t have to write any of that. \r\n\r\nFrom the Kotlin code you can refer to the instance of this object simply as `Foo`. From the Java code you can referer to the instance of this object as `Foo.INSTANCE`, because the Kotlin compiler automatically creates the corresponding static field named `INSTANCE`.\r\n","title":"static methods and variables in Kotlin?","body":"<p>It looks that you want to define a singleton object. It is supported in Kotlin as a first-class concept:</p>\n\n<pre><code>object Foo {\n  ... \n}\n</code></pre>\n\n<p>All the boilerplate code with static field and constructor is taken care by the Kotlin automatically. You don't have to write any of that. </p>\n\n<p>From the Kotlin code you can refer to the instance of this object simply as <code>Foo</code>. From the Java code you can referer to the instance of this object as <code>Foo.INSTANCE</code>, because the Kotlin compiler automatically creates the corresponding static field named <code>INSTANCE</code>.</p>\n"}],"owner":{"account_id":10848361,"reputation":1894,"user_id":7977034,"accept_rate":71,"display_name":"Caleb Bassham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174194,"favorite_count":0,"down_vote_count":0,"up_vote_count":134,"accepted_answer_id":43857895,"answer_count":4,"score":134,"last_activity_date":1682740719,"creation_date":1494280337,"question_id":43857824,"body_markdown":"I want to be able to save a class instance to a private/public static variable, but I can&#39;t figure out how to do this in Kotlin.\r\n\r\n    public class Foo {\r\n        private static Foo instance;\r\n\r\n        public Foo() {\r\n            if (instance == null) {\r\n                instance = this;\r\n            }\r\n        }\r\n        \r\n        public static Foo get() {\r\n            return instance;\r\n        }\r\n    }\r\n","title":"static methods and variables in Kotlin?","body":"<p>I want to be able to save a class instance to a private/public static variable, but I can't figure out how to do this in Kotlin.</p>\n<pre><code>public class Foo {\n    private static Foo instance;\n\n    public Foo() {\n        if (instance == null) {\n            instance = this;\n        }\n    }\n    \n    public static Foo get() {\n        return instance;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa","spring-data","thymeleaf"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":1,"creation_date":1682713814,"post_id":76133043,"comment_id":134264619,"body_markdown":"The method `save` from anything `Repository` returns the persisted entity. In other words, your method `registerUser` can return User.","body":"The method <code>save</code> from anything <code>Repository</code> returns the persisted entity. In other words, your method <code>registerUser</code> can return User."},{"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"score":0,"creation_date":1682714158,"post_id":76133043,"comment_id":134264684,"body_markdown":"Is there a method to return the new registered user id and display it with my code? Or is there something I&#39;m doing wrong and it&#39;s not the correct way?","body":"Is there a method to return the new registered user id and display it with my code? Or is there something I&#39;m doing wrong and it&#39;s not the correct way?"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":1,"creation_date":1682714694,"post_id":76133043,"comment_id":134264768,"body_markdown":"As I said, the `save` method of your `UserRepository` returns the `User` you just saved. I don&#39;t work with Thymeleaf so I&#39;m not sure how to &quot;send&quot; or &quot;update&quot; the view with the new data (Though I think it&#39;s something with the `Model`), but with the `User` returned from the repository, you just need to call `getIdUser()` to get the Id..","body":"As I said, the <code>save</code> method of your <code>UserRepository</code> returns the <code>User</code> you just saved. I don&#39;t work with Thymeleaf so I&#39;m not sure how to &quot;send&quot; or &quot;update&quot; the view with the new data (Though I think it&#39;s something with the <code>Model</code>), but with the <code>User</code> returned from the repository, you just need to call <code>getIdUser()</code> to get the Id.."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682742199,"post_id":76133043,"comment_id":134267215,"body_markdown":"Or just : `&quot;redirect:/home?success&amp;idUser&quot;+user.getId()`!?","body":"Or just : <code>&quot;redirect:&#47;home?success&amp;idUser&quot;+user.getId()</code>!?"}],"answers":[{"tags":[],"owner":{"account_id":2669818,"reputation":715,"user_id":2307460,"accept_rate":60,"display_name":"Yogesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682740513,"creation_date":1682740513,"answer_id":76134449,"question_id":76133043,"body_markdown":"Instead of returning `String` you need to return `ModelAndView` so you can any property of User object\r\n\r\nController \r\n\r\n    public ModelAndView userRegister(User user) {\r\n        ModelAndView  model = new ModelAndView(&quot;home&quot;);\r\n        User registerUser = userService.registerUser(user);\r\n        model.addObject(&quot;registerUser&quot;,registerUser);\r\n        return model;   \r\n    }\r\n\r\nRepository \r\n\r\n    public User registerUser(User user) {\r\n       return userRepository.save(user);\r\n    }\r\n\r\nThymeleaf code\r\n\r\n    &lt;span th:text=&quot;${registerUser.idUser}&quot;&gt;&lt;/span&gt;","title":"Spring - Is there a way to display the id of a record after being registered with Thymeleaf?","body":"<p>Instead of returning <code>String</code> you need to return <code>ModelAndView</code> so you can any property of User object</p>\n<p>Controller</p>\n<pre><code>public ModelAndView userRegister(User user) {\n    ModelAndView  model = new ModelAndView(&quot;home&quot;);\n    User registerUser = userService.registerUser(user);\n    model.addObject(&quot;registerUser&quot;,registerUser);\n    return model;   \n}\n</code></pre>\n<p>Repository</p>\n<pre><code>public User registerUser(User user) {\n   return userRepository.save(user);\n}\n</code></pre>\n<p>Thymeleaf code</p>\n<pre><code>&lt;span th:text=&quot;${registerUser.idUser}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"}],"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76134449,"answer_count":1,"score":1,"last_activity_date":1682740513,"creation_date":1682713344,"question_id":76133043,"body_markdown":"In my project I want to show the id of the record in the view with Thymeleaf after it has been inserted successfully.\r\n\r\nIs there any way to get that result?\r\n\r\nEntity:\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;id_user&quot;)\r\n\tprivate Long idUser;\r\n\t\r\n    @Column(name = &quot;first_name&quot;, nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column(name = &quot;last_name&quot;, nullable = false, length = 150)\r\n\tprivate String lastName;\r\n\r\n\tpublic Long getIdUser() {\r\n\t\treturn idUser;\r\n\t}\r\n\r\n\tpublic void setIdUser(Long idUser) {\r\n\t\tthis.idUser= idUser;\r\n\t}\r\n\t\r\n\tpublic String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName= firstName;\r\n    }\r\n\r\n\tpublic String getLastName() {\r\n\t\treturn lastName;\r\n\t}\r\n\r\n\tpublic void setLastName(String lastName) {\r\n\t\tthis.lastName= lastName;\r\n\t}\r\n}\r\n```\r\n\r\nService:\r\n```\r\npublic void registerUser(User user) {\r\n   userRepository.save(user);\r\n}\r\n```\r\n\r\nController (To show the user&#39;s id after being registered):\r\n```\r\npublic String userRegister(User user) {\r\n\r\n\tuserService.registerUser(user);\r\n\treturn &quot;redirect:/home?success&quot;;\r\n\t\t\r\n}\r\n```\r\n\r\nThymeleaf (The idea to be able to display the id of the new user):\r\n```\r\n&lt;span th:text=&quot;${idUser}&quot;&gt;&lt;/span&gt;\r\n```","title":"Spring - Is there a way to display the id of a record after being registered with Thymeleaf?","body":"<p>In my project I want to show the id of the record in the view with Thymeleaf after it has been inserted successfully.</p>\n<p>Is there any way to get that result?</p>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_user&quot;)\n    private Long idUser;\n    \n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;, nullable = false, length = 150)\n    private String lastName;\n\n    public Long getIdUser() {\n        return idUser;\n    }\n\n    public void setIdUser(Long idUser) {\n        this.idUser= idUser;\n    }\n    \n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName= firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName= lastName;\n    }\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>public void registerUser(User user) {\n   userRepository.save(user);\n}\n</code></pre>\n<p>Controller (To show the user's id after being registered):</p>\n<pre><code>public String userRegister(User user) {\n\n    userService.registerUser(user);\n    return &quot;redirect:/home?success&quot;;\n        \n}\n</code></pre>\n<p>Thymeleaf (The idea to be able to display the id of the new user):</p>\n<pre><code>&lt;span th:text=&quot;${idUser}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":["c#","java","hash"],"answers":[{"tags":[],"owner":{"account_id":107337,"reputation":1,"user_id":285465,"accept_rate":80,"display_name":"TomTom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269411945,"creation_date":1269411945,"answer_id":2505756,"question_id":2505742,"body_markdown":"Havh values generated from the same input and with the same algorithm are defined to be equal. 1+1=2, regardless of the programming language I program this in.\r\n\r\nOtherwise the internet would not work at all, you know.","title":"Are hash values globally unique","body":"<p>Havh values generated from the same input and with the same algorithm are defined to be equal. 1+1=2, regardless of the programming language I program this in.</p>\n\n<p>Otherwise the internet would not work at all, you know.</p>\n"},{"tags":[],"owner":{"account_id":9936,"reputation":8011,"user_id":18548,"accept_rate":82,"display_name":"Ritesh M Nayak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269411966,"creation_date":1269411966,"answer_id":2505758,"question_id":2505742,"body_markdown":"My suggestion would be to use a common/accepted hashing algorithm like MD5 to achieve the same hash values. ","title":"Are hash values globally unique","body":"<p>My suggestion would be to use a common/accepted hashing algorithm like MD5 to achieve the same hash values. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1682740222,"creation_date":1269412049,"answer_id":2505764,"question_id":2505742,"body_markdown":"Hash values are not globally unique.  But that is not what you are really asking.\r\n\r\nWhat you really want to know is whether a hashing algorithm (such as MD5) will produce the same hash value for identical files on different operating system platforms. The answer to *that* question is &quot;yes&quot; ... provided that files are byte-for-byte identical.  \r\n\r\nIn the case of binary files, they should be byte-for-byte identical. In the case of text documents, transcoding between different character encodings, or changing line termination sequences will make the files different at the byte level and result in different MD5 hash values.\r\n\r\n\r\n","title":"Are hash values globally unique","body":"<p>Hash values are not globally unique.  But that is not what you are really asking.</p>\n<p>What you really want to know is whether a hashing algorithm (such as MD5) will produce the same hash value for identical files on different operating system platforms. The answer to <em>that</em> question is &quot;yes&quot; ... provided that files are byte-for-byte identical.</p>\n<p>In the case of binary files, they should be byte-for-byte identical. In the case of text documents, transcoding between different character encodings, or changing line termination sequences will make the files different at the byte level and result in different MD5 hash values.</p>\n"},{"tags":[],"owner":{"account_id":87132,"reputation":5775,"user_id":241821,"accept_rate":81,"display_name":"Vaishak Suresh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269412199,"creation_date":1269412199,"answer_id":2505775,"question_id":2505742,"body_markdown":"If the Hashing algorithm and the input are same, the hash value generated would be same irrespective of language or environment.\r\nThe hashing algorithm takes the full/part of the key and manipulates it to generate the value which is why it would be same in all languages.","title":"Are hash values globally unique","body":"<p>If the Hashing algorithm and the input are same, the hash value generated would be same irrespective of language or environment.\nThe hashing algorithm takes the full/part of the key and manipulates it to generate the value which is why it would be same in all languages.</p>\n"},{"tags":[],"owner":{"account_id":104451,"reputation":54096,"user_id":279259,"accept_rate":92,"display_name":"ereOn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269417395,"creation_date":1269417395,"answer_id":2506111,"question_id":2505742,"body_markdown":"I wish I could comment on this but I don&#39;t have enough reputation to do that.\r\n\r\nWhile I don&#39;t know for what purpose you want to use a hash algorithm, I&#39;d like to say that some collisions have been found for MD5 so it might be less &quot;secure&quot; (well, we probably can&#39;t say &quot;broken&quot; since those collisions are hard to compute). The same remark applies to the SHA-1 algorithm.\r\n\r\nMore information here: http://www.mathstat.dal.ca/~selinger/md5collision/\r\n\r\nSo if you want to use a hash algorithm for security purposes, you might take a look at SHA-256 or SHA-512 which are stronger for now.\r\n\r\nOtherwise you can probably keep going with MD5.\r\n\r\nMy two cents.","title":"Are hash values globally unique","body":"<p>I wish I could comment on this but I don't have enough reputation to do that.</p>\n\n<p>While I don't know for what purpose you want to use a hash algorithm, I'd like to say that some collisions have been found for MD5 so it might be less \"secure\" (well, we probably can't say \"broken\" since those collisions are hard to compute). The same remark applies to the SHA-1 algorithm.</p>\n\n<p>More information here: <a href=\"http://www.mathstat.dal.ca/~selinger/md5collision/\" rel=\"nofollow noreferrer\">http://www.mathstat.dal.ca/~selinger/md5collision/</a></p>\n\n<p>So if you want to use a hash algorithm for security purposes, you might take a look at SHA-256 or SHA-512 which are stronger for now.</p>\n\n<p>Otherwise you can probably keep going with MD5.</p>\n\n<p>My two cents.</p>\n"}],"owner":{"display_name":"Anton P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":560,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":2505764,"answer_count":5,"score":0,"last_activity_date":1682740222,"creation_date":1269411807,"question_id":2505742,"body_markdown":"I want to generate a hash code for a file.  Using C# I would do something like this then store the value in a database.\r\n\r\n    byte[] b = File.ReadAllBytes(@&quot;C:\\image.jpg&quot;);\r\n    string hash = ComputeHash(b);\r\n\r\n\r\nNow, if i use say a Java program that implements the same hashing alogorithm (Md5), can i expect the hash values to be the equal to the value generated in C#? What if i execute the java program from different environments, Windows, Linux or Mac?\r\n","title":"Are hash values globally unique","body":"<p>I want to generate a hash code for a file.  Using C# I would do something like this then store the value in a database.</p>\n\n<pre><code>byte[] b = File.ReadAllBytes(@\"C:\\image.jpg\");\nstring hash = ComputeHash(b);\n</code></pre>\n\n<p>Now, if i use say a Java program that implements the same hashing alogorithm (Md5), can i expect the hash values to be the equal to the value generated in C#? What if i execute the java program from different environments, Windows, Linux or Mac?</p>\n"},{"tags":["java","serialization","jackson","lombok","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682738769,"creation_date":1682716355,"answer_id":76133308,"question_id":76132155,"body_markdown":"Remove the `@Jacksonized` annotation:\r\n\r\n```\r\n@Getter\r\n@Builder\r\nstatic class Person {\r\n    private final String name;\r\n    private final List&lt;Pet&gt; pets;\r\n\r\n}\r\n\r\n@Getter\r\n@Builder\r\nstatic class Pet {\r\n    private final String name;\r\n    private final String type;\r\n\r\n}\r\n```\r\n\r\n**Explanation**\r\n\r\nThe `@Jacksonized` annotation is, unfortunately, prioritized over the explicitly registered custom deserializer so Jackson is trying to use `Person.PersonBuilder` for the deserialization instead of \r\n`PersonDeserializer`. Seems like a bug in Jackson so I&#39;ve opened [#3901](https://github.com/FasterXML/jackson-databind/issues/3901).","title":"Custom deserializer with record work but @Jacksonized @Builder breaks","body":"<p>Remove the <code>@Jacksonized</code> annotation:</p>\n<pre><code>@Getter\n@Builder\nstatic class Person {\n    private final String name;\n    private final List&lt;Pet&gt; pets;\n\n}\n\n@Getter\n@Builder\nstatic class Pet {\n    private final String name;\n    private final String type;\n\n}\n</code></pre>\n<p><strong>Explanation</strong></p>\n<p>The <code>@Jacksonized</code> annotation is, unfortunately, prioritized over the explicitly registered custom deserializer so Jackson is trying to use <code>Person.PersonBuilder</code> for the deserialization instead of\n<code>PersonDeserializer</code>. Seems like a bug in Jackson so I've opened <a href=\"https://github.com/FasterXML/jackson-databind/issues/3901\" rel=\"nofollow noreferrer\">#3901</a>.</p>\n"}],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76133308,"answer_count":1,"score":0,"last_activity_date":1682739127,"creation_date":1682704813,"question_id":76132155,"body_markdown":"A custom deserializer for this simple model works fine:\r\n\r\n```\r\nstatic record Person(\r\n    String name,\r\n    List&lt;Pet&gt; pets) {\r\n}\r\n\r\nstatic record Pet(\r\n    String name,\r\n    String type) {\r\n}\r\n\r\n```\r\n\r\nbut a `@Jacksonized` Lombok builder version:\r\n\r\n```\r\n@Getter\r\n@Builder\r\n@Jacksonized\r\nstatic class Person {\r\n    private final String name;\r\n    private final List&lt;Pet&gt; pets;\r\n\r\n}\r\n\r\n@Getter\r\n@Builder\r\nstatic class Pet {\r\n    private final String name;\r\n    private final String type;\r\n\r\n}\r\n```\r\n\r\nfails with:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.RuntimeJsonMappingException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)\r\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\r\n\tat com.fasterxml.jackson.databind.MappingIterator._handleMappingException(MappingIterator.java:416)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:201)\r\n\tat JacksonTest.readPersonFromCsv(JacksonTest.java:99)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)\r\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1904)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1349)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromString(BeanDeserializerBase.java:1495)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:197)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:355)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:158)\r\n\tat com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:293)\r\n\tat com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:217)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:283)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:199)\r\n\t... 70 more\r\n\r\n```\r\nThe problem here is that `pets`, which is a list of POJOs, is serialized into a string which the custom deserializer unpacks. But, because there&#39;s &quot;no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)&quot; the `deserialize` method is never invoked, sadly.\r\n\r\nThe custom deserializer is:\r\n\r\n```\r\nstatic class PersonDeserializer extends StdDeserializer&lt;Person&gt; {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public PersonDeserializer() {\r\n        this(Person.class);\r\n    }\r\n\r\n    public PersonDeserializer(Class&lt;Person&gt; type) {\r\n        super(type);\r\n    }\r\n\r\n    @Override\r\n    public Person deserialize(JsonParser p, DeserializationContext ctxt)\r\n      throws IOException, JsonProcessingException {\r\n        JsonNode node = p.getCodec().readTree(p);\r\n\r\n        String name = node.get(&quot;name&quot;).asText();\r\n        String petsSerialized = node.get(&quot;pets&quot;).asText();\r\n\r\n        List&lt;Pet&gt; pets = deserialize(petsSerialized);\r\n\r\n        //return new Person(name, pets);\r\n        return Person.builder().name(name).pets(pets).build();\r\n    }\r\n\r\n    private static List&lt;Pet&gt; deserialize(String serializedPets) {\r\n        return Arrays.stream(serializedPets.replaceAll(&quot;^.\\\\{?|}?.$&quot;, &quot;&quot;).split(&quot;},\\s*\\\\{&quot;))\r\n                .map(inner -&gt; Arrays.stream(inner.replaceAll(&quot;^.&#39;?|&#39;?.$&quot;, &quot;&quot;).split(&quot;&#39;,&#39;&quot;)).toList())\r\n                .map(l -&gt; deserialize(l))\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    private static Pet deserialize(List&lt;String&gt; l) {\r\n        //return new Pet(l.get(0), l.get(1));\r\n        return Pet.builder().name(l.get(0)).type(l.get(1)).build();\r\n    }\r\n}\r\n```\r\n\r\nReplacing `@Jacksonized` with an explicit `JsonDeserialize(using=PersonDeserializer.class)` does work as the `record`-based POJO version does; however, I have multiple deserializers which are selected at runtime.\r\n\r\nSo, I think I&#39;m forced to collapse the deserializers into a single multiplexing deserializer which then does what&#39;s needed at runtime...unless one of you has a bright idea?\r\n\r\nThe serializers &amp; deserializers are registered with the mapper:\r\n\r\n```\r\nprivate static CsvMapper _register(CsvMapper mapper) {\r\n    var module = new SimpleModule();\r\n\r\n    module.addSerializer(Person.class, new PersonSerializer());\r\n    module.addDeserializer(Person.class, new PersonDeserializer());\r\n\r\n    return (CsvMapper)mapper.registerModule(module);\r\n}\r\n```\r\nwhich is what I was expecting to tweak at runtime.\r\n\r\nThis looks like a short-coming/bug in Jackson&#39;s builder support; it could an issue in Lombok&#39;s Jackson support but I haven&#39;t found a manual builder pattern that works either so I suspect Lombok is just a victim of Jackson. \r\n\r\nAnyone found a workaround?\r\n\r\nHere&#39;s the driver:\r\n```\r\nvar mapper = _register(new CsvMapper());\r\n\r\nString serializedPersons = &quot;&quot;&quot;\r\n    name,pets\r\n    Ali,&quot;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&quot;\r\n    Jan,&quot;[{&#39;Mr. Bubbles&#39;,&#39;dog&#39;}, {&#39;Lilly&#39;,&#39;cat&#39;}]&quot;\r\n    Tom,&quot;[{&#39;Fester&#39;,&#39;dog&#39;}, {&#39;Wednesday&#39;,&#39;cat&#39;}]&quot;\r\n    Zoe,&quot;[{&#39;Jaeger&#39;,&#39;dog&#39;}, {&#39;Deira&#39;,&#39;cat&#39;}]&quot;\r\n    &quot;&quot;&quot;;\r\n\r\nCsvSchema schema = mapper.schemaFor(Person.class).withHeader();\r\n\r\nObjectReader reader = mapper.readerFor(Person.class).with(schema);\r\n\r\nMappingIterator&lt;Person&gt; i = reader.readValues(serializedPersons);\r\n\r\nwhile (i.hasNext()) {\r\n    System.out.println(&quot;Person: &quot; + i.next());\r\n}\r\n```","title":"Custom deserializer with record work but @Jacksonized @Builder breaks","body":"<p>A custom deserializer for this simple model works fine:</p>\n<pre><code>static record Person(\n    String name,\n    List&lt;Pet&gt; pets) {\n}\n\nstatic record Pet(\n    String name,\n    String type) {\n}\n\n</code></pre>\n<p>but a <code>@Jacksonized</code> Lombok builder version:</p>\n<pre><code>@Getter\n@Builder\n@Jacksonized\nstatic class Person {\n    private final String name;\n    private final List&lt;Pet&gt; pets;\n\n}\n\n@Getter\n@Builder\nstatic class Pet {\n    private final String name;\n    private final String type;\n\n}\n</code></pre>\n<p>fails with:</p>\n<pre><code>com.fasterxml.jackson.databind.RuntimeJsonMappingException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\n    at com.fasterxml.jackson.databind.MappingIterator._handleMappingException(MappingIterator.java:416)\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:201)\n    at JacksonTest.readPersonFromCsv(JacksonTest.java:99)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1904)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1349)\n    at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromString(BeanDeserializerBase.java:1495)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:197)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:355)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:158)\n    at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:293)\n    at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:217)\n    at com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:283)\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:199)\n    ... 70 more\n\n</code></pre>\n<p>The problem here is that <code>pets</code>, which is a list of POJOs, is serialized into a string which the custom deserializer unpacks. But, because there's &quot;no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')&quot; the <code>deserialize</code> method is never invoked, sadly.</p>\n<p>The custom deserializer is:</p>\n<pre><code>static class PersonDeserializer extends StdDeserializer&lt;Person&gt; {\n    private static final long serialVersionUID = 1L;\n\n    public PersonDeserializer() {\n        this(Person.class);\n    }\n\n    public PersonDeserializer(Class&lt;Person&gt; type) {\n        super(type);\n    }\n\n    @Override\n    public Person deserialize(JsonParser p, DeserializationContext ctxt)\n      throws IOException, JsonProcessingException {\n        JsonNode node = p.getCodec().readTree(p);\n\n        String name = node.get(&quot;name&quot;).asText();\n        String petsSerialized = node.get(&quot;pets&quot;).asText();\n\n        List&lt;Pet&gt; pets = deserialize(petsSerialized);\n\n        //return new Person(name, pets);\n        return Person.builder().name(name).pets(pets).build();\n    }\n\n    private static List&lt;Pet&gt; deserialize(String serializedPets) {\n        return Arrays.stream(serializedPets.replaceAll(&quot;^.\\\\{?|}?.$&quot;, &quot;&quot;).split(&quot;},\\s*\\\\{&quot;))\n                .map(inner -&gt; Arrays.stream(inner.replaceAll(&quot;^.'?|'?.$&quot;, &quot;&quot;).split(&quot;','&quot;)).toList())\n                .map(l -&gt; deserialize(l))\n                .collect(Collectors.toList());\n    }\n\n    private static Pet deserialize(List&lt;String&gt; l) {\n        //return new Pet(l.get(0), l.get(1));\n        return Pet.builder().name(l.get(0)).type(l.get(1)).build();\n    }\n}\n</code></pre>\n<p>Replacing <code>@Jacksonized</code> with an explicit <code>JsonDeserialize(using=PersonDeserializer.class)</code> does work as the <code>record</code>-based POJO version does; however, I have multiple deserializers which are selected at runtime.</p>\n<p>So, I think I'm forced to collapse the deserializers into a single multiplexing deserializer which then does what's needed at runtime...unless one of you has a bright idea?</p>\n<p>The serializers &amp; deserializers are registered with the mapper:</p>\n<pre><code>private static CsvMapper _register(CsvMapper mapper) {\n    var module = new SimpleModule();\n\n    module.addSerializer(Person.class, new PersonSerializer());\n    module.addDeserializer(Person.class, new PersonDeserializer());\n\n    return (CsvMapper)mapper.registerModule(module);\n}\n</code></pre>\n<p>which is what I was expecting to tweak at runtime.</p>\n<p>This looks like a short-coming/bug in Jackson's builder support; it could an issue in Lombok's Jackson support but I haven't found a manual builder pattern that works either so I suspect Lombok is just a victim of Jackson.</p>\n<p>Anyone found a workaround?</p>\n<p>Here's the driver:</p>\n<pre><code>var mapper = _register(new CsvMapper());\n\nString serializedPersons = &quot;&quot;&quot;\n    name,pets\n    Ali,&quot;[{'Cutesy','cat'}, {'Tootsie','cat'}]&quot;\n    Jan,&quot;[{'Mr. Bubbles','dog'}, {'Lilly','cat'}]&quot;\n    Tom,&quot;[{'Fester','dog'}, {'Wednesday','cat'}]&quot;\n    Zoe,&quot;[{'Jaeger','dog'}, {'Deira','cat'}]&quot;\n    &quot;&quot;&quot;;\n\nCsvSchema schema = mapper.schemaFor(Person.class).withHeader();\n\nObjectReader reader = mapper.readerFor(Person.class).with(schema);\n\nMappingIterator&lt;Person&gt; i = reader.readValues(serializedPersons);\n\nwhile (i.hasNext()) {\n    System.out.println(&quot;Person: &quot; + i.next());\n}\n</code></pre>\n"},{"tags":["java","security","ssl","ssl-certificate"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1426542913,"post_id":29085950,"comment_id":46408182,"body_markdown":"This just shows a competed SSL handshake. There is no error here. &#39;Couldn&#39;t authorise&#39; is not a Java message. It is a message printed by your application, under circumstances which you have not disclosed. You need to provide the code that printed it in your question. Presumably you got an exception, in which case you must also provide the full exception and stack trace in your question. Not answerable as is.","body":"This just shows a competed SSL handshake. There is no error here. &#39;Couldn&#39;t authorise&#39; is not a Java message. It is a message printed by your application, under circumstances which you have not disclosed. You need to provide the code that printed it in your question. Presumably you got an exception, in which case you must also provide the full exception and stack trace in your question. Not answerable as is."}],"answers":[{"tags":[],"owner":{"account_id":2754663,"reputation":337,"user_id":2373118,"accept_rate":60,"display_name":"Gary Drocella"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426617188,"creation_date":1426617188,"answer_id":29107063,"question_id":29085950,"body_markdown":"Thanks to the comment of the EJP, I decided to dig into the client error message.  I added a debug statement that printed the error the client was getting, which was the following:\r\n\r\n    Hostname/IP doesn&#39;t match certificate&#39;s altnames\r\n\r\nI have a check in the client for this string, but I upgraded to node v0.12 and it appears they added some extra output in that statement.  The logic currently is to just ignore this error, and continue with the encrypted session.  \r\n\r\nThanks for the help.","title":"Debug Java SSL Handshake using -Djavax.net.debug=all","body":"<p>Thanks to the comment of the EJP, I decided to dig into the client error message.  I added a debug statement that printed the error the client was getting, which was the following:</p>\n\n<pre><code>Hostname/IP doesn't match certificate's altnames\n</code></pre>\n\n<p>I have a check in the client for this string, but I upgraded to node v0.12 and it appears they added some extra output in that statement.  The logic currently is to just ignore this error, and continue with the encrypted session.  </p>\n\n<p>Thanks for the help.</p>\n"}],"owner":{"account_id":2754663,"reputation":337,"user_id":2373118,"accept_rate":60,"display_name":"Gary Drocella"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10900,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1682848952,"answer_count":1,"score":3,"last_activity_date":1682737525,"creation_date":1426536270,"question_id":29085950,"body_markdown":"My Node.js client is connecting to a Java server with SSL.  It seems to work up until the CertificateVerify where then I get a cache session, and my client prints SSL Couldn&#39;t Authorize.  \r\n \r\nHere is a snippet of the Java server debug statements logged from the ssl handshake using -Djavax.net.debug=all.  The problem is, Java does not explicitly raise any red flags like couldn&#39;t verify signature.  This is the tail of the log where it stops. Note: I added an ellipses after the Cache Server Session at the end of the log.  \r\n\r\nCan anyone help me decipher this log output to determine why the ssl handshake is failing?  I&#39;m guessing that ultimately it can&#39;t verify the signature of the certificate, but I do not see this being explicitly stated. \r\n    \r\n    pool-1-thread-2, READ: TLSv1.2 Handshake, length = 264\r\n    *** CertificateVerify\r\n    Signature Algorithm SHA512withRSA\r\n    [read] MD5 and SHA1 hashes:  len = 264\r\n    0000: 0F 00 01 04 06 01 01 00   1E F6 13 87 8C 77 81 2D  .............w.-\r\n    0010: E3 33 EB E0 8F 80 49 C6   90 F9 B5 4C 9B A0 69 77  .3....I....L..iw\r\n    0020: B1 14 6C E3 B2 15 15 1F   26 D5 69 31 64 36 0D D1  ..l.....&amp;.i1d6..\r\n    0030: DA AD BA 58 BF 76 6D 25   1D 49 BA 4A C6 80 1C 49  ...X.vm%.I.J...I\r\n    0040: DC 5B D8 F0 FC B3 34 86   93 71 0D 3D 92 DB AB 0E  .[....4..q.=....\r\n    0050: 6A 34 62 FC F5 09 61 65   68 12 64 BB 6F 6E 39 96  j4b...aeh.d.on9.\r\n    0060: BC C6 40 D4 A1 63 4D 0E   68 61 02 8E 14 4B DF 6D  ..@..cM.ha...K.m\r\n    0070: B1 C2 D6 D5 E6 09 19 E9   31 A6 20 07 44 BB AD 43  ........1. .D..C\r\n    0080: D4 3C 91 9C 56 FC A8 70   8B 5C 8D 87 F2 61 30 CA  .&lt;..V..p.\\...a0.\r\n    0090: 6B 82 88 FA 3D B3 27 84   12 FE EF 2B 51 3A DD 5B  k...=.&#39;....+Q:.[\r\n    00A0: 0E 03 D6 44 E9 B8 04 EF   62 4B 7A 51 7E 6D 85 79  ...D....bKzQ.m.y\r\n    00B0: 1A 78 C8 5E 21 C8 E8 CA   2A 7D 2F 5E 6C 90 1B 00  .x.^!...*./^l...\r\n    00C0: B5 97 5F 8D FC D5 C3 D8   ED 2D 05 B6 DA 51 16 B7  .._......-...Q..\r\n    00D0: 39 14 44 46 DE 80 DD 98   31 F8 B5 DD E8 89 8C 64  9.DF....1......d\r\n    00E0: 4E DF 3C 99 38 10 87 F4   D0 67 4E C3 AA FE 25 F3  N.&lt;.8....gN...%.\r\n    00F0: 7E F1 48 60 52 09 2C 2B   C4 32 A4 58 92 3E 15 4A  ..H`R.,+.2.X.&gt;.J\r\n    0100: DA 11 CB 19 45 16 5D 79                            ....E.]y\r\n    [Raw read]: length = 5\r\n    0000: 14 03 03 00 01                                     .....\r\n    [Raw read]: length = 1\r\n    0000: 01                                                 .\r\n    pool-1-thread-2, READ: TLSv1.2 Change Cipher Spec, length = 1\r\n    [Raw read]: length = 5\r\n    0000: 16 03 03 00 50                                     ....P\r\n    [Raw read]: length = 80\r\n    0000: CE F7 6C D4 32 5C 12 6E   02 47 11 1E DA C8 7C 13  ..l.2\\.n.G......\r\n    0010: F0 F5 92 42 82 3D 58 FF   70 A3 05 D9 1F D8 00 1E  ...B.=X.p.......\r\n    0020: 88 77 06 11 78 B5 A7 AA   23 69 D5 54 E9 22 78 D6  .w..x...#i.T.&quot;x.\r\n    0030: 08 A8 B2 D8 AF CE 78 91   34 28 78 6B 50 8D 7E 32  ......x.4(xkP..2\r\n    0040: 1A 30 79 ED 31 51 FD 8D   79 59 5A 9D 99 27 B4 25  .0y.1Q..yYZ..&#39;.%\r\n    pool-1-thread-2, READ: TLSv1.2 Handshake, length = 80\r\n    Padded plaintext after DECRYPTION:  len = 80\r\n    0000: A8 92 6E 76 A7 44 8F 3F   0A 85 B0 7B 5F D9 21 CE  ..nv.D.?...._.!.\r\n    0010: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\r\n    0020: 84 2D 2D 20 C9 87 0A 37   33 44 5D E9 95 2D 3B B9  .-- ...73D]..-;.\r\n    0030: E3 50 F1 31 1C 54 F9 41   FB 4E C4 B6 81 C5 DF 78  .P.1.T.A.N.....x\r\n    0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\r\n    *** Finished\r\n    verify_data:  { 134, 98, 181, 239, 25, 12, 92, 194, 223, 96, 53, 92 }\r\n    ***\r\n    [read] MD5 and SHA1 hashes:  len = 16\r\n    0000: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\r\n    pool-1-thread-2, WRITE: TLSv1.2 Change Cipher Spec, length = 1\r\n    [Raw write]: length = 6\r\n    0000: 14 03 03 00 01 01                                  ......\r\n    *** Finished\r\n    verify_data:  { 166, 60, 137, 232, 242, 208, 180, 127, 89, 133, 80, 93 }\r\n    ***\r\n    [write] MD5 and SHA1 hashes:  len = 16\r\n    0000: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\r\n    Padded plaintext before ENCRYPTION:  len = 80\r\n    0000: 9C F6 B8 F4 10 05 57 5C   DE 38 27 7A 82 F5 04 88  ......W\\.8&#39;z....\r\n    0010: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\r\n    0020: 73 1C 58 7B 9D FD 88 E4   40 1A 04 AB A3 B3 57 38  s.X.....@.....W8\r\n    0030: 7B 22 19 CB F0 24 AE 16   69 63 04 F9 9E 20 7D 00  .&quot;...$..ic... ..\r\n    0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\r\n    pool-1-thread-2, WRITE: TLSv1.2 Handshake, length = 80\r\n    [Raw write]: length = 85\r\n    0000: 16 03 03 00 50 AB AE B3   92 D6 B2 9B D4 3F 51 A7  ....P........?Q.\r\n    0010: F6 FF B8 11 FF 81 26 33   2F 70 64 71 FF 33 F3 DA  ......&amp;3/pdq.3..\r\n    0020: EB B8 9E 5E 66 69 49 20   05 0F 1A A2 C1 C6 81 EC  ...^fiI ........\r\n    0030: 07 23 7E C8 26 11 49 8F   02 1F 53 8F 49 26 30 13  .#..&amp;.I...S.I&amp;0.\r\n    0040: DA 10 33 9F 0A 94 B5 39   86 C8 5F D9 8A 22 49 68  ..3....9.._..&quot;Ih\r\n    0050: C1 31 0A 7D CE                                     .1...\r\n    %% Cached server session: ...\r\n\r\nMore helpful information.  I&#39;ve checked the expiration of the certificate.  It expires November 2044, so I&#39;m assured that the hand shake isn&#39;t failing due to an expired certificate.","title":"Debug Java SSL Handshake using -Djavax.net.debug=all","body":"<p>My Node.js client is connecting to a Java server with SSL.  It seems to work up until the CertificateVerify where then I get a cache session, and my client prints SSL Couldn't Authorize.  </p>\n\n<p>Here is a snippet of the Java server debug statements logged from the ssl handshake using -Djavax.net.debug=all.  The problem is, Java does not explicitly raise any red flags like couldn't verify signature.  This is the tail of the log where it stops. Note: I added an ellipses after the Cache Server Session at the end of the log.  </p>\n\n<p>Can anyone help me decipher this log output to determine why the ssl handshake is failing?  I'm guessing that ultimately it can't verify the signature of the certificate, but I do not see this being explicitly stated. </p>\n\n<pre><code>pool-1-thread-2, READ: TLSv1.2 Handshake, length = 264\n*** CertificateVerify\nSignature Algorithm SHA512withRSA\n[read] MD5 and SHA1 hashes:  len = 264\n0000: 0F 00 01 04 06 01 01 00   1E F6 13 87 8C 77 81 2D  .............w.-\n0010: E3 33 EB E0 8F 80 49 C6   90 F9 B5 4C 9B A0 69 77  .3....I....L..iw\n0020: B1 14 6C E3 B2 15 15 1F   26 D5 69 31 64 36 0D D1  ..l.....&amp;.i1d6..\n0030: DA AD BA 58 BF 76 6D 25   1D 49 BA 4A C6 80 1C 49  ...X.vm%.I.J...I\n0040: DC 5B D8 F0 FC B3 34 86   93 71 0D 3D 92 DB AB 0E  .[....4..q.=....\n0050: 6A 34 62 FC F5 09 61 65   68 12 64 BB 6F 6E 39 96  j4b...aeh.d.on9.\n0060: BC C6 40 D4 A1 63 4D 0E   68 61 02 8E 14 4B DF 6D  ..@..cM.ha...K.m\n0070: B1 C2 D6 D5 E6 09 19 E9   31 A6 20 07 44 BB AD 43  ........1. .D..C\n0080: D4 3C 91 9C 56 FC A8 70   8B 5C 8D 87 F2 61 30 CA  .&lt;..V..p.\\...a0.\n0090: 6B 82 88 FA 3D B3 27 84   12 FE EF 2B 51 3A DD 5B  k...=.'....+Q:.[\n00A0: 0E 03 D6 44 E9 B8 04 EF   62 4B 7A 51 7E 6D 85 79  ...D....bKzQ.m.y\n00B0: 1A 78 C8 5E 21 C8 E8 CA   2A 7D 2F 5E 6C 90 1B 00  .x.^!...*./^l...\n00C0: B5 97 5F 8D FC D5 C3 D8   ED 2D 05 B6 DA 51 16 B7  .._......-...Q..\n00D0: 39 14 44 46 DE 80 DD 98   31 F8 B5 DD E8 89 8C 64  9.DF....1......d\n00E0: 4E DF 3C 99 38 10 87 F4   D0 67 4E C3 AA FE 25 F3  N.&lt;.8....gN...%.\n00F0: 7E F1 48 60 52 09 2C 2B   C4 32 A4 58 92 3E 15 4A  ..H`R.,+.2.X.&gt;.J\n0100: DA 11 CB 19 45 16 5D 79                            ....E.]y\n[Raw read]: length = 5\n0000: 14 03 03 00 01                                     .....\n[Raw read]: length = 1\n0000: 01                                                 .\npool-1-thread-2, READ: TLSv1.2 Change Cipher Spec, length = 1\n[Raw read]: length = 5\n0000: 16 03 03 00 50                                     ....P\n[Raw read]: length = 80\n0000: CE F7 6C D4 32 5C 12 6E   02 47 11 1E DA C8 7C 13  ..l.2\\.n.G......\n0010: F0 F5 92 42 82 3D 58 FF   70 A3 05 D9 1F D8 00 1E  ...B.=X.p.......\n0020: 88 77 06 11 78 B5 A7 AA   23 69 D5 54 E9 22 78 D6  .w..x...#i.T.\"x.\n0030: 08 A8 B2 D8 AF CE 78 91   34 28 78 6B 50 8D 7E 32  ......x.4(xkP..2\n0040: 1A 30 79 ED 31 51 FD 8D   79 59 5A 9D 99 27 B4 25  .0y.1Q..yYZ..'.%\npool-1-thread-2, READ: TLSv1.2 Handshake, length = 80\nPadded plaintext after DECRYPTION:  len = 80\n0000: A8 92 6E 76 A7 44 8F 3F   0A 85 B0 7B 5F D9 21 CE  ..nv.D.?...._.!.\n0010: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\n0020: 84 2D 2D 20 C9 87 0A 37   33 44 5D E9 95 2D 3B B9  .-- ...73D]..-;.\n0030: E3 50 F1 31 1C 54 F9 41   FB 4E C4 B6 81 C5 DF 78  .P.1.T.A.N.....x\n0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\n*** Finished\nverify_data:  { 134, 98, 181, 239, 25, 12, 92, 194, 223, 96, 53, 92 }\n***\n[read] MD5 and SHA1 hashes:  len = 16\n0000: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\npool-1-thread-2, WRITE: TLSv1.2 Change Cipher Spec, length = 1\n[Raw write]: length = 6\n0000: 14 03 03 00 01 01                                  ......\n*** Finished\nverify_data:  { 166, 60, 137, 232, 242, 208, 180, 127, 89, 133, 80, 93 }\n***\n[write] MD5 and SHA1 hashes:  len = 16\n0000: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\nPadded plaintext before ENCRYPTION:  len = 80\n0000: 9C F6 B8 F4 10 05 57 5C   DE 38 27 7A 82 F5 04 88  ......W\\.8'z....\n0010: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\n0020: 73 1C 58 7B 9D FD 88 E4   40 1A 04 AB A3 B3 57 38  s.X.....@.....W8\n0030: 7B 22 19 CB F0 24 AE 16   69 63 04 F9 9E 20 7D 00  .\"...$..ic... ..\n0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\npool-1-thread-2, WRITE: TLSv1.2 Handshake, length = 80\n[Raw write]: length = 85\n0000: 16 03 03 00 50 AB AE B3   92 D6 B2 9B D4 3F 51 A7  ....P........?Q.\n0010: F6 FF B8 11 FF 81 26 33   2F 70 64 71 FF 33 F3 DA  ......&amp;3/pdq.3..\n0020: EB B8 9E 5E 66 69 49 20   05 0F 1A A2 C1 C6 81 EC  ...^fiI ........\n0030: 07 23 7E C8 26 11 49 8F   02 1F 53 8F 49 26 30 13  .#..&amp;.I...S.I&amp;0.\n0040: DA 10 33 9F 0A 94 B5 39   86 C8 5F D9 8A 22 49 68  ..3....9.._..\"Ih\n0050: C1 31 0A 7D CE                                     .1...\n%% Cached server session: ...\n</code></pre>\n\n<p>More helpful information.  I've checked the expiration of the certificate.  It expires November 2044, so I'm assured that the hand shake isn't failing due to an expired certificate.</p>\n"},{"tags":["java","list","vector","synchronization"],"comments":[{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1361176373,"post_id":14932034,"comment_id":20953869,"body_markdown":"Consider using [`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html) instead.","body":"Consider using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"nofollow noreferrer\"><code>CopyOnWriteArrayList</code></a> instead."},{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1361176611,"post_id":14932034,"comment_id":20953942,"body_markdown":"It is ordinarily too costly.","body":"It is ordinarily too costly."},{"owner":{"account_id":1612392,"reputation":3450,"user_id":1490986,"accept_rate":75,"display_name":"Dan King"},"score":1,"creation_date":1468919676,"post_id":14932034,"comment_id":64312637,"body_markdown":"This question has been marked as a duplicate - but the question it supposedly duplicates hasn&#39;t been answered (to be more precise, it has one &quot;answer&quot;, but it doesn&#39;t actually answer the question).","body":"This question has been marked as a duplicate - but the question it supposedly duplicates hasn&#39;t been answered (to be more precise, it has one &quot;answer&quot;, but it doesn&#39;t actually answer the question)."}],"answers":[{"tags":[],"owner":{"account_id":1509295,"reputation":3758,"user_id":1411812,"accept_rate":63,"display_name":"Vinod Jayachandran"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1361175992,"creation_date":1361175992,"answer_id":14932094,"question_id":14932034,"body_markdown":"Java Vectors are syncronized by default. You don&#39;t have to synchronize is explicitly. Even if you do so there is no extra benefit\r\n\r\nUse of Java Vector is highly discouraged and instead Syncronized &quot;ArrayList&quot; is suggested. There are clearly benefits of the same. \r\n\r\nAlso please refer [Are Vectors Obsolete ?][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5763838/java-6-se-are-vectors-obsolete","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>Java Vectors are syncronized by default. You don't have to synchronize is explicitly. Even if you do so there is no extra benefit</p>\n\n<p>Use of Java Vector is highly discouraged and instead Syncronized \"ArrayList\" is suggested. There are clearly benefits of the same. </p>\n\n<p>Also please refer <a href=\"https://stackoverflow.com/questions/5763838/java-6-se-are-vectors-obsolete\">Are Vectors Obsolete ?</a></p>\n"},{"comments":[{"owner":{"account_id":2512349,"reputation":1790,"user_id":2184517,"accept_rate":64,"display_name":"AfterWorkGuinness"},"score":0,"creation_date":1400364668,"post_id":14932111,"comment_id":36449804,"body_markdown":"Reading the javadoc for Vector, I don&#39;t see anywhere where it says objects added to a vector are copied to a new list like structure, can you expand on / or double check your point in the last paragraph ?","body":"Reading the javadoc for Vector, I don&#39;t see anywhere where it says objects added to a vector are copied to a new list like structure, can you expand on / or double check your point in the last paragraph ?"},{"owner":{"account_id":1052629,"reputation":3982,"user_id":1056138,"accept_rate":50,"display_name":"ATrubka"},"score":0,"creation_date":1401700471,"post_id":14932111,"comment_id":36969563,"body_markdown":"That&#39;s not exactly what I said. Elements of a list are not copied. My point was that if you were to create a synchronized Vector or List out of an existing not synchronized List you would have to copy data from one to another (something like list2.addAll(list1)). If you do so, the underlying data structure gets copied (not the elements though). I suggest you open Vector.java, AbstractList.java and other related classes to see how the data gets added from one collection to another. It&#39;s going to be much clearer for you then.","body":"That&#39;s not exactly what I said. Elements of a list are not copied. My point was that if you were to create a synchronized Vector or List out of an existing not synchronized List you would have to copy data from one to another (something like list2.addAll(list1)). If you do so, the underlying data structure gets copied (not the elements though). I suggest you open Vector.java, AbstractList.java and other related classes to see how the data gets added from one collection to another. It&#39;s going to be much clearer for you then."},{"owner":{"account_id":2707688,"reputation":773,"user_id":2336934,"display_name":"dan"},"score":0,"creation_date":1678457335,"post_id":14932111,"comment_id":133541224,"body_markdown":"Having used JDK 1.1 and following versions, the Collections Framework has always been a part of the standard JDK download, since 1.2, never a separate library.  Although, and this from memory, the Collections Framework became a &quot;Framework&quot; with the release of 1.2, but Vector and a handful of other data structures have been there since before that.  Framework meaning that the Sun developers, Josh Bloch, et al,  thought the collection type classes had really gained notable maturity and cohesiveness.","body":"Having used JDK 1.1 and following versions, the Collections Framework has always been a part of the standard JDK download, since 1.2, never a separate library.  Although, and this from memory, the Collections Framework became a &quot;Framework&quot; with the release of 1.2, but Vector and a handful of other data structures have been there since before that.  Framework meaning that the Sun developers, Josh Bloch, et al,  thought the collection type classes had really gained notable maturity and cohesiveness."},{"owner":{"account_id":2707688,"reputation":773,"user_id":2336934,"display_name":"dan"},"score":0,"creation_date":1678457755,"post_id":14932111,"comment_id":133541342,"body_markdown":"`java.util.Vector` has **ALWAYS** been synchronized, they never removed the synchronization from it.  Your information is wrong. Just go look in the code, its still synchronized in JDK 1.11.  It&#39;s the only `List` that is inherently synchronized.","body":"<code>java.util.Vector</code> has <b>ALWAYS</b> been synchronized, they never removed the synchronization from it.  Your information is wrong. Just go look in the code, its still synchronized in JDK 1.11.  It&#39;s the only <code>List</code> that is inherently synchronized."},{"owner":{"account_id":1052629,"reputation":3982,"user_id":1056138,"accept_rate":50,"display_name":"ATrubka"},"score":0,"creation_date":1678718207,"post_id":14932111,"comment_id":133583105,"body_markdown":"Dan, I was using collections library before it became part of jdk 1.2. At that time it was just another library. I believe packages were different as well. Not sure what sparked your second comment. I never said anything about synchronization removal from Vector.","body":"Dan, I was using collections library before it became part of jdk 1.2. At that time it was just another library. I believe packages were different as well. Not sure what sparked your second comment. I never said anything about synchronization removal from Vector."},{"owner":{"account_id":2707688,"reputation":773,"user_id":2336934,"display_name":"dan"},"score":0,"creation_date":1682517149,"post_id":14932111,"comment_id":134228625,"body_markdown":"@ATrubka I came on the Java scene with 1.1 and we upgraded a year later to 1.2 when it was released.  We weren&#39;t using Collections before 1.2 bundled it.  Indeed Vector was a part of 1.1.  Perhaps you&#39;re referencing something else here: _In Collections developers improved that Vector structure in many ways. Particularly, they removed synchronization as it proved to be unnecessary in most of the cases._  Reads like you&#39;re saying they removed the synchronization from Vector.  Vector was moved into the Collections framework with 1.2, so your statement isn&#39;t clear if you mean something else.","body":"@ATrubka I came on the Java scene with 1.1 and we upgraded a year later to 1.2 when it was released.  We weren&#39;t using Collections before 1.2 bundled it.  Indeed Vector was a part of 1.1.  Perhaps you&#39;re referencing something else here: <i>In Collections developers improved that Vector structure in many ways. Particularly, they removed synchronization as it proved to be unnecessary in most of the cases.</i>  Reads like you&#39;re saying they removed the synchronization from Vector.  Vector was moved into the Collections framework with 1.2, so your statement isn&#39;t clear if you mean something else."},{"owner":{"account_id":1052629,"reputation":3982,"user_id":1056138,"accept_rate":50,"display_name":"ATrubka"},"score":0,"creation_date":1682610616,"post_id":14932111,"comment_id":134246417,"body_markdown":"@dan, you&#39;re confusing Vector with various types of Lists. Vector predates Collections. I believe it was was part of Java from day one, but I don&#39;t really know day one. Vector was and still is synchronized. When they added collections, they changed Vector to implement List interface, but the synchronization stayed unchanged for backward compatibility. At that time people were discouraged from using older Vector and Hashtable and were suggested to use other List and Map implementations. Other implementations are typically not synchronized as it&#39;s not needed for most usages.","body":"@dan, you&#39;re confusing Vector with various types of Lists. Vector predates Collections. I believe it was was part of Java from day one, but I don&#39;t really know day one. Vector was and still is synchronized. When they added collections, they changed Vector to implement List interface, but the synchronization stayed unchanged for backward compatibility. At that time people were discouraged from using older Vector and Hashtable and were suggested to use other List and Map implementations. Other implementations are typically not synchronized as it&#39;s not needed for most usages."},{"owner":{"account_id":2707688,"reputation":773,"user_id":2336934,"display_name":"dan"},"score":0,"creation_date":1682622564,"post_id":14932111,"comment_id":134249131,"body_markdown":"@ATrubka You haven&#39;t told me anything I didn&#39;t already know.  The point is, your answer isn&#39;t clear - it appears we both agree on and lived through the facts.  Your answer reads as tho you&#39;re saying they removed the synchronization from Vector - which is wrong and why I downvoted your answer and created my comment.  There are Java developers who have not lived through this and aren&#39;t aware of these facts.","body":"@ATrubka You haven&#39;t told me anything I didn&#39;t already know.  The point is, your answer isn&#39;t clear - it appears we both agree on and lived through the facts.  Your answer reads as tho you&#39;re saying they removed the synchronization from Vector - which is wrong and why I downvoted your answer and created my comment.  There are Java developers who have not lived through this and aren&#39;t aware of these facts."}],"tags":[],"owner":{"account_id":1052629,"reputation":3982,"user_id":1056138,"accept_rate":50,"display_name":"ATrubka"},"comment_count":8,"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1682736007,"creation_date":1361176075,"answer_id":14932111,"question_id":14932034,"body_markdown":"The main reason for this redundancy is backward compatibility with java code developed for old versions of Java.\r\n\r\nIf I remember correctly before Java 1.2 Collections were a separate library and were not part of standard JDK/JRE.\r\n\r\nAt that point the only list like data structure supplied by SDK was Vector. In Collections developers improved that Vector structure in many ways. Particularly, the new implementations like ArrayList didn&#39;t have synchronization as it proved to be unnecessary in most of the cases.\r\n\r\nStill they wanted to allow an easy way to create a synchronized version of list like collection. Thus they introduced SynchronizedList.\r\n\r\nThe main difference now between Vector and SynchronizedList is the way you use it. By calling Collections.synchronizedList you create a wrapper around your current List implementation, which means you don&#39;t copy data to another data structure and you keep underlying structure intact. For instance, if you want LinkedList structure behind it as opposed to ArrayList.\r\n\r\nIn case of a Vector, you actually copy the data to the new list like structure Vector. So it&#39;s less efficient in case you had a list before, but if you didn&#39;t have any data structure before, then you may want to use Vector as it doesn&#39;t add method wrapping cost to every method invocation. Another disadvantage of a vector is that you can&#39;t keep alternative underlying structure (such as LinkedList), you always use what&#39;s been implemented in the Vector itself.","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>The main reason for this redundancy is backward compatibility with java code developed for old versions of Java.</p>\n<p>If I remember correctly before Java 1.2 Collections were a separate library and were not part of standard JDK/JRE.</p>\n<p>At that point the only list like data structure supplied by SDK was Vector. In Collections developers improved that Vector structure in many ways. Particularly, the new implementations like ArrayList didn't have synchronization as it proved to be unnecessary in most of the cases.</p>\n<p>Still they wanted to allow an easy way to create a synchronized version of list like collection. Thus they introduced SynchronizedList.</p>\n<p>The main difference now between Vector and SynchronizedList is the way you use it. By calling Collections.synchronizedList you create a wrapper around your current List implementation, which means you don't copy data to another data structure and you keep underlying structure intact. For instance, if you want LinkedList structure behind it as opposed to ArrayList.</p>\n<p>In case of a Vector, you actually copy the data to the new list like structure Vector. So it's less efficient in case you had a list before, but if you didn't have any data structure before, then you may want to use Vector as it doesn't add method wrapping cost to every method invocation. Another disadvantage of a vector is that you can't keep alternative underlying structure (such as LinkedList), you always use what's been implemented in the Vector itself.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361176584,"creation_date":1361176584,"answer_id":14932234,"question_id":14932034,"body_markdown":"Vector is a synchronized List implementation and Collections.synchronziedList is a method of Collections utility class that creates a synchronized proxy for any List implementation","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>Vector is a synchronized List implementation and Collections.synchronziedList is a method of Collections utility class that creates a synchronized proxy for any List implementation</p>\n"}],"owner":{"account_id":1478601,"reputation":3574,"user_id":1388421,"accept_rate":55,"display_name":"roast_soul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9803,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"closed_date":1361182281,"accepted_answer_id":14932111,"answer_count":3,"score":8,"last_activity_date":1682736007,"creation_date":1361175672,"question_id":14932034,"body_markdown":"If multiple threads access vector, vector will ensure that only one thread can access the vector at the same time. SynchronizedList is same. \r\nSo what&#39;s the difference?\r\nHow to choose in some synchronous situation?","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>If multiple threads access vector, vector will ensure that only one thread can access the vector at the same time. SynchronizedList is same. \nSo what's the difference?\nHow to choose in some synchronous situation?</p>\n"},{"tags":["java","arrays","multidimensional-array","primitive","deepequals"],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682636735,"post_id":76125169,"comment_id":134251314,"body_markdown":"If someone wants the JLS references, I could track them down.  It will be in the section that defines subtyping.","body":"If someone wants the JLS references, I could track them down.  It will be in the section that defines subtyping."},{"owner":{"account_id":17933974,"reputation":25,"user_id":13030693,"display_name":"Anand Pandey"},"score":0,"creation_date":1682719586,"post_id":76125169,"comment_id":134265493,"body_markdown":"Thankyou.I was thinking of the same,your answer validated my thoughts.","body":"Thankyou.I was thinking of the same,your answer validated my thoughts."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682735602,"creation_date":1682635939,"answer_id":76125169,"question_id":76125091,"body_markdown":"The literal question asked is:\r\n\r\n&gt; Why does `Arrays.deepEquals(Object[] arr1, Object[] arr2)` work for primitive multidimensional arrays like `int[][]`, `float[][]` etc?\r\n\r\nThe simple answer to that is &quot;because the javadoc says so&quot;.  See [@Old Dog Programmer&#39;s answer][1] for details.\r\n\r\n-----------------\r\n\r\nBut the **real** question being asked (as I understand it) is:\r\n\r\n&gt; Why does it work for `int[][]`, `float[][]` etc but not for `int[]`, `float[]` etc?\r\n\r\nThis is a consequence of the way that subtyping and multidimensional array types work in Java.  In Java there is really no such thing as a multidimensional array type&lt;sup&gt;1&lt;/sup&gt;.  For example, the type `int[][]` is actually an &quot;array of arrays of `int`&quot;.   The &quot;array of `int`&quot; part is a primitive array type.  \r\n\r\nAccording to the Java subtyping rules, all arrays (including 1-D primitive arrays such as `int[]`) are subtypes of `Object`.  That means that `int[][]` (&quot;array of arrays of `int`&quot;) is a subtype of `Object[]` (&quot;array of `Object`&quot;).\r\n\r\nBy contrast an `int[]` is NOT a subtype of `Object[]` since `int` is not a subtype of `Object`.\r\n\r\nThat means that `Arrays.deepEquals` doesn&#39;t work for primitive arrays (i.e. the method is not applicable to the arguments) but it does work for *arrays of* primitive arrays; i.e. multidimensional primitive arrays.  The practical solution is to use the `Arrays.equals` overloads when comparing 1-D primitive arrays.\r\n\r\n-----------------------------\r\n\r\n&lt;sup&gt;1 - JLS Chapter 1 states: *&quot;The language supports arrays of arrays, rather than multidimensional arrays.&quot;*\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76125227/139985","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>The literal question asked is:</p>\n<blockquote>\n<p>Why does <code>Arrays.deepEquals(Object[] arr1, Object[] arr2)</code> work for primitive multidimensional arrays like <code>int[][]</code>, <code>float[][]</code> etc?</p>\n</blockquote>\n<p>The simple answer to that is &quot;because the javadoc says so&quot;.  See <a href=\"https://stackoverflow.com/a/76125227/139985\">@Old Dog Programmer's answer</a> for details.</p>\n<hr />\n<p>But the <strong>real</strong> question being asked (as I understand it) is:</p>\n<blockquote>\n<p>Why does it work for <code>int[][]</code>, <code>float[][]</code> etc but not for <code>int[]</code>, <code>float[]</code> etc?</p>\n</blockquote>\n<p>This is a consequence of the way that subtyping and multidimensional array types work in Java.  In Java there is really no such thing as a multidimensional array type<sup>1</sup>.  For example, the type <code>int[][]</code> is actually an &quot;array of arrays of <code>int</code>&quot;.   The &quot;array of <code>int</code>&quot; part is a primitive array type.</p>\n<p>According to the Java subtyping rules, all arrays (including 1-D primitive arrays such as <code>int[]</code>) are subtypes of <code>Object</code>.  That means that <code>int[][]</code> (&quot;array of arrays of <code>int</code>&quot;) is a subtype of <code>Object[]</code> (&quot;array of <code>Object</code>&quot;).</p>\n<p>By contrast an <code>int[]</code> is NOT a subtype of <code>Object[]</code> since <code>int</code> is not a subtype of <code>Object</code>.</p>\n<p>That means that <code>Arrays.deepEquals</code> doesn't work for primitive arrays (i.e. the method is not applicable to the arguments) but it does work for <em>arrays of</em> primitive arrays; i.e. multidimensional primitive arrays.  The practical solution is to use the <code>Arrays.equals</code> overloads when comparing 1-D primitive arrays.</p>\n<hr />\n<p><sup>1 - JLS Chapter 1 states: <em>&quot;The language supports arrays of arrays, rather than multidimensional arrays.&quot;</em>\n</sup></p>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682637314,"creation_date":1682636929,"answer_id":76125227,"question_id":76125091,"body_markdown":"It works because `Arrays.deepEquals` was written to work for 2D arrays of primitives. The [API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#deepEquals(java.lang.Object%5B%5D,java.lang.Object%5B%5D)) specifies it will work. Here is a quote, in which I emphasized the most relevant line: \r\n\r\n&gt; Two possibly null elements e1 and e2 are deeply equal if any of the following conditions hold:\r\n\r\n&gt; * e1 and e2 are both arrays of object reference types, and Arrays.deepEquals(e1, e2) would return true\r\n&gt; * **e1 and e2 are arrays of the same primitive type, and the appropriate overloading of Arrays.equals(e1, e2) would return true.**\r\n&gt; * e1 == e2\r\n&gt; * e1.equals(e2) would return true.\r\n&gt; Note that this definition permits null elements at any depth.\r\n\r\nHow was it made to work? We can look at the [source code](https://developer.classpath.org/doc/java/util/Arrays-source.html) for the method. It contains an `if ... else` chain that checks if the parameters are each an`instanceof` the same type of primitive array.\r\n\r\nThe code for the `deepToString` method contains a similar `if ... else` chain.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>It works because <code>Arrays.deepEquals</code> was written to work for 2D arrays of primitives. The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#deepEquals(java.lang.Object%5B%5D,java.lang.Object%5B%5D)\" rel=\"nofollow noreferrer\">API</a> specifies it will work. Here is a quote, in which I emphasized the most relevant line:</p>\n<blockquote>\n<p>Two possibly null elements e1 and e2 are deeply equal if any of the following conditions hold:</p>\n</blockquote>\n<blockquote>\n<ul>\n<li>e1 and e2 are both arrays of object reference types, and Arrays.deepEquals(e1, e2) would return true</li>\n<li><strong>e1 and e2 are arrays of the same primitive type, and the appropriate overloading of Arrays.equals(e1, e2) would return true.</strong></li>\n<li>e1 == e2</li>\n<li>e1.equals(e2) would return true.\nNote that this definition permits null elements at any depth.</li>\n</ul>\n</blockquote>\n<p>How was it made to work? We can look at the <a href=\"https://developer.classpath.org/doc/java/util/Arrays-source.html\" rel=\"nofollow noreferrer\">source code</a> for the method. It contains an <code>if ... else</code> chain that checks if the parameters are each an<code>instanceof</code> the same type of primitive array.</p>\n<p>The code for the <code>deepToString</code> method contains a similar <code>if ... else</code> chain.</p>\n"}],"owner":{"account_id":17933974,"reputation":25,"user_id":13030693,"display_name":"Anand Pandey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76125169,"answer_count":2,"score":2,"last_activity_date":1682735602,"creation_date":1682634725,"question_id":76125091,"body_markdown":"From method signature it is very clear that method accepts the argument of type Object[] but still this method works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)\r\n(However it shows error for primitive one dimensional array (like int[],float[] etc))\r\n\r\nEx:\r\n      \r\n```\r\n      int[][]arr=new int[2][3];\r\n      arr[0][0]=1;\r\n      arr[0][1]=2;\r\n      arr[0][2]=3;\r\n      arr[1][0]=4;\r\n      arr[1][1]=5;\r\n      arr[1][2]=6;\r\n      int[][]arr1=new int[2][3];\r\n      arr1[0][0]=1;\r\n      arr1[0][1]=2;\r\n      arr1[0][2]=3;\r\n      arr1[1][0]=4;\r\n      arr1[1][1]=5;\r\n      arr1[1][2]=6;\r\n\r\n      System.out.println(Arrays.deepEquals(arr,arr1));\r\n\r\n      Output: true\r\n\r\n\r\nEx:  \r\n     int[]arr={1,2,3,4,5};\r\n     int[]arr1={1,2,3,4,5};\r\n     System.out.println(Arrays.deepEquals(arr,arr1));//Error\r\n/*&quot;The method deepEquals(Object[], Object[]) in the type Arrays is not applicable for the arguments (int[], int[])&quot;*/\r\n\r\n```\r\n\r\nthe same issue is with Arrays.deepToString(Object[]) From method signature it is very clear that this method too accepts the argument of type Object[] but still it works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)(However it shows error for primitive one dimensional array (like int[],float[] etc))\r\n\r\n\r\n```\r\n  Ex:\r\n      int[][]arr=new int[2][3];\r\n      arr[0][0]=1;\r\n      arr[0][1]=2;\r\n      arr[0][2]=3;\r\n      arr[1][0]=4;\r\n      arr[1][1]=5;\r\n      arr[1][2]=6;\r\n\r\n      System.out.println(Arrays.deepToString(arr));\r\n\r\n      Output: [[1, 3, 0], [4, 5, 6]]\r\n\r\n\r\n Ex:\r\n\r\n     int[]arr={1,2,3,4,5}; \r\n     System.out.println(Arrays.deepToString(arr)); //Error\r\n    //&quot;The method deepToString(Object[]) in the type Arrays is not applicable for the arguments (int[])&quot;\r\n```\r\n\r\nEdit:\r\n\r\nI would also like to add few points from my end as well.\r\n\r\n1: Subtyping in Java :\r\n\r\n    What is subtyping?\r\n  =&gt;Subtyping is a key feature of object-oriented \r\n    programming languages such as Java. In Java, Sis a subtype of T if S \r\n    extends or implements T. Subtyping is transitive, meaning that if R is a \r\n    subtype of S, then R is also a subtype of T (T is the super type of both \r\n    Sand R).String is a subtype of Object, because the String class is a \r\n    subclass of the Object class.\r\n\r\n    int is not a subtype of Object, because none of Java&#39;s primitive types \r\n    are subtypes of any reference type.\r\n\r\n    StringBuilder is not a subtype of String, because the StringBuilder \r\n    class is not a subclass of the String class.\r\n\r\n     HashMap&lt;Candidate,Double&gt; is a subtype of Map&lt;Candidate,Double&gt;, \r\n     because the HashMap class implements the Map interface and the type \r\n     parameters match.\r\n\r\n     HashMap&lt;Candidate,Double&gt; is not a subtype of Map&lt;String,Ballot&gt;, even \r\n     though the HashMap class implements the Map interface, because the type \r\n     parameters do not match.\r\n\r\n2:  Subtyping among Array Types :\r\n\r\n    The following rules define the direct supertype relation among array \r\n    types:\r\n\r\n    If S and T are both reference types, then S[] &gt;1 T[] iff S &gt;1 T.\r\n\r\n    Object &gt;1 Object[]\r\n\r\n    Cloneable &gt;1 Object[]\r\n\r\n    java.io.Serializable &gt;1 Object[]\r\n\r\n    If P is a primitive type, then:\r\n\r\n    Object &gt;1 P[]\r\n\r\n    Cloneable &gt;1 P[]\r\n\r\n    java.io.Serializable &gt;1 P[]\r\n\r\n3: The direct superclass of an array type is Object.\r\n\r\n4: Every array type implements the interfaces Cloneable and \r\n   java.io.Serializable.\r\n\r\n5:In the Java programming language, arrays are objects , are dynamically \r\n  created, and may be assigned to variables of type Object. All methods of \r\n  class Object may be invoked on an array.\r\n\r\n6: An object is a class instance or an array.\r\n\r\n7: The reference values (often just references) are pointers to these \r\n   objects, and a special null reference, which refers to no object.\r\n\r\n8: A class instance is explicitly created by a class instance \r\n   creation expression.\r\n\r\n9: An array is explicitly created by an array creation expression .\r\n","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>From method signature it is very clear that method accepts the argument of type Object[] but still this method works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)\n(However it shows error for primitive one dimensional array (like int[],float[] etc))</p>\n<p>Ex:</p>\n<pre><code>      int[][]arr=new int[2][3];\n      arr[0][0]=1;\n      arr[0][1]=2;\n      arr[0][2]=3;\n      arr[1][0]=4;\n      arr[1][1]=5;\n      arr[1][2]=6;\n      int[][]arr1=new int[2][3];\n      arr1[0][0]=1;\n      arr1[0][1]=2;\n      arr1[0][2]=3;\n      arr1[1][0]=4;\n      arr1[1][1]=5;\n      arr1[1][2]=6;\n\n      System.out.println(Arrays.deepEquals(arr,arr1));\n\n      Output: true\n\n\nEx:  \n     int[]arr={1,2,3,4,5};\n     int[]arr1={1,2,3,4,5};\n     System.out.println(Arrays.deepEquals(arr,arr1));//Error\n/*&quot;The method deepEquals(Object[], Object[]) in the type Arrays is not applicable for the arguments (int[], int[])&quot;*/\n\n</code></pre>\n<p>the same issue is with Arrays.deepToString(Object[]) From method signature it is very clear that this method too accepts the argument of type Object[] but still it works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)(However it shows error for primitive one dimensional array (like int[],float[] etc))</p>\n<pre><code>  Ex:\n      int[][]arr=new int[2][3];\n      arr[0][0]=1;\n      arr[0][1]=2;\n      arr[0][2]=3;\n      arr[1][0]=4;\n      arr[1][1]=5;\n      arr[1][2]=6;\n\n      System.out.println(Arrays.deepToString(arr));\n\n      Output: [[1, 3, 0], [4, 5, 6]]\n\n\n Ex:\n\n     int[]arr={1,2,3,4,5}; \n     System.out.println(Arrays.deepToString(arr)); //Error\n    //&quot;The method deepToString(Object[]) in the type Arrays is not applicable for the arguments (int[])&quot;\n</code></pre>\n<p>Edit:</p>\n<p>I would also like to add few points from my end as well.</p>\n<p>1: Subtyping in Java :</p>\n<pre><code>What is subtyping?\n</code></pre>\n<p>=&gt;Subtyping is a key feature of object-oriented\nprogramming languages such as Java. In Java, Sis a subtype of T if S\nextends or implements T. Subtyping is transitive, meaning that if R is a\nsubtype of S, then R is also a subtype of T (T is the super type of both\nSand R).String is a subtype of Object, because the String class is a\nsubclass of the Object class.</p>\n<pre><code>int is not a subtype of Object, because none of Java's primitive types \nare subtypes of any reference type.\n\nStringBuilder is not a subtype of String, because the StringBuilder \nclass is not a subclass of the String class.\n\n HashMap&lt;Candidate,Double&gt; is a subtype of Map&lt;Candidate,Double&gt;, \n because the HashMap class implements the Map interface and the type \n parameters match.\n\n HashMap&lt;Candidate,Double&gt; is not a subtype of Map&lt;String,Ballot&gt;, even \n though the HashMap class implements the Map interface, because the type \n parameters do not match.\n</code></pre>\n<p>2:  Subtyping among Array Types :</p>\n<pre><code>The following rules define the direct supertype relation among array \ntypes:\n\nIf S and T are both reference types, then S[] &gt;1 T[] iff S &gt;1 T.\n\nObject &gt;1 Object[]\n\nCloneable &gt;1 Object[]\n\njava.io.Serializable &gt;1 Object[]\n\nIf P is a primitive type, then:\n\nObject &gt;1 P[]\n\nCloneable &gt;1 P[]\n\njava.io.Serializable &gt;1 P[]\n</code></pre>\n<p>3: The direct superclass of an array type is Object.</p>\n<p>4: Every array type implements the interfaces Cloneable and\njava.io.Serializable.</p>\n<p>5:In the Java programming language, arrays are objects , are dynamically\ncreated, and may be assigned to variables of type Object. All methods of\nclass Object may be invoked on an array.</p>\n<p>6: An object is a class instance or an array.</p>\n<p>7: The reference values (often just references) are pointers to these\nobjects, and a special null reference, which refers to no object.</p>\n<p>8: A class instance is explicitly created by a class instance\ncreation expression.</p>\n<p>9: An array is explicitly created by an array creation expression .</p>\n"},{"tags":["java","swing","txt"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682672261,"post_id":76127862,"comment_id":134255794,"body_markdown":"Swing is not thread safe - you should be using a SwingWorker","body":"Swing is not thread safe - you should be using a SwingWorker"},{"owner":{"account_id":28443448,"reputation":1,"user_id":21762501,"display_name":"Orhancan Yıldırım"},"score":0,"creation_date":1682672761,"post_id":76127862,"comment_id":134255909,"body_markdown":"i used it to prevent the app from freezing","body":"i used it to prevent the app from freezing"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682673240,"post_id":76127862,"comment_id":134256006,"body_markdown":"And, as I stated, Swing is NOT thread safe - you should be using a `SwingWorker` which will allow you to execute a long running or blocking operation in the background, but provides you with the functionality to post updates back the Event Dispatching Thread","body":"And, as I stated, Swing is NOT thread safe - you should be using a <code>SwingWorker</code> which will allow you to execute a long running or blocking operation in the background, but provides you with the functionality to post updates back the Event Dispatching Thread"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1682678360,"post_id":76127862,"comment_id":134257066,"body_markdown":"another must-not (apart from must-not access components nor any of its properties off the EDT) is a null layout manager (along with hard-coding locations/sizes of components), instead choose a manager that suits your needs, the swing tag wiki has references for tutorials to learn how to use them.","body":"another must-not (apart from must-not access components nor any of its properties off the EDT) is a null layout manager (along with hard-coding locations/sizes of components), instead choose a manager that suits your needs, the swing tag wiki has references for tutorials to learn how to use them."}],"answers":[{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1682678164,"post_id":76128140,"comment_id":134257021,"body_markdown":"arrrgghhh .. you know better than to replicate such terrible naming violations ;)","body":"arrrgghhh .. you know better than to replicate such terrible naming violations ;)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682688077,"post_id":76128140,"comment_id":134259238,"body_markdown":"@kleopatra Copy&#39;n&#39;Paste - does it help to &quot;answer&quot; the question? I&#39;m kind of over trying to &quot;fix every little&quot; thing - I&#39;ve highlight the issues and moved on :P","body":"@kleopatra Copy&#39;n&#39;Paste - does it help to &quot;answer&quot; the question? I&#39;m kind of over trying to &quot;fix every little&quot; thing - I&#39;ve highlight the issues and moved on :P"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682731939,"creation_date":1682674000,"answer_id":76128140,"question_id":76127862,"body_markdown":"Swing is not thread safe, this means that you should not be updating the UI, or any state the UI relies on, from outside the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nIn this case, I would suggest using a `SwingWorker`, see [Worker Threads and SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) for more details.\r\n\r\nI modified your code to generate some random data and your `MusteriEkle` button code to make use of a `SwingWorker` which will update the UI with new rows of data, after a small, deliberate, delay, which is used for effect.\r\n\r\n    protected List&lt;Musteri&gt; randomData() {\r\n        List&lt;Musteri&gt; data = new ArrayList&lt;&gt;(256);\r\n        for (int index = 0; index &lt; 100 + (int) (Math.random() * 1000); index++) {\r\n            data.add(new Musteri(index));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    public JButton getMusteriEkle() {\r\n        if (musteriEkle == null) {\r\n            musteriEkle = new JButton(&quot;M&#252;şteri Oluştur&quot;);\r\n            musteriEkle.setBounds(50, 500, 200, 30);\r\n            musteriEkle.setBackground(new Color(143, 194, 197));\r\n            musteriEkle.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    musteriEkle.setEnabled(false);\r\n                    musteriModel.setRowCount(0); // Tablodaki t&#252;m satırları sil\r\n                    SwingWorker&lt;Void, Object[]&gt; worker = new SwingWorker&lt;&gt;() {\r\n                        @Override\r\n                        protected Void doInBackground() throws Exception {\r\n                            Thread.sleep(50);\r\n                            List&lt;Musteri&gt; musteriler = randomData();\r\n                            for (int i = 0; i &lt; musteriler.size(); i++) {\r\n                                Object[] musteriVeri = new Object[4]; // Yeni dizi oluştur\r\n                                musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n                                musteriVeri[1] = musteriler.get(i).getEmail();\r\n                                musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n                                musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n                                publish(musteriVeri);\r\n                                Thread.sleep(50);\r\n                            }\r\n                            return null;\r\n                        }\r\n\r\n                        @Override\r\n                        protected void process(List&lt;Object[]&gt; chunks) {\r\n                            for (Object[] row : chunks) {\r\n                                musteriModel.addRow(row);\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        protected void done() {\r\n                            musteriEkle.setEnabled(true);\r\n                        }\r\n                    };\r\n                    worker.execute();\r\n                }\r\n            });\r\n            //musteriEkle.addActionListener(new MusteriEkraniAction(this));\r\n\r\n        }\r\n        return musteriEkle;\r\n    }\r\n\r\nYou might want to take some time and learn the [Code Conventions for the Java  Programming Language](https://www.oracle.com/java/technologies/javase/codeconventions-contents.html), it will make it easier for other people to read your code.\r\n\r\nI would also recommend taking the time to learn, understand and use [the layout management system](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) available in Swing ... as you layout kind of broke on my system while I was trying to test your code.\r\n\r\n&gt; but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated\r\n\r\nI was unable to reproduce your issue as you supplied a incomplete and uncompilable code example, but I would start my investigation in `MusteriController` and the `ListeyiAl` method.","title":"When I add data to the table I want it to update instantly","body":"<p>Swing is not thread safe, this means that you should not be updating the UI, or any state the UI relies on, from outside the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>In this case, I would suggest using a <code>SwingWorker</code>, see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">Worker Threads and SwingWorker</a> for more details.</p>\n<p>I modified your code to generate some random data and your <code>MusteriEkle</code> button code to make use of a <code>SwingWorker</code> which will update the UI with new rows of data, after a small, deliberate, delay, which is used for effect.</p>\n<pre><code>protected List&lt;Musteri&gt; randomData() {\n    List&lt;Musteri&gt; data = new ArrayList&lt;&gt;(256);\n    for (int index = 0; index &lt; 100 + (int) (Math.random() * 1000); index++) {\n        data.add(new Musteri(index));\n    }\n    return data;\n}\n\npublic JButton getMusteriEkle() {\n    if (musteriEkle == null) {\n        musteriEkle = new JButton(&quot;Müşteri Oluştur&quot;);\n        musteriEkle.setBounds(50, 500, 200, 30);\n        musteriEkle.setBackground(new Color(143, 194, 197));\n        musteriEkle.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                musteriEkle.setEnabled(false);\n                musteriModel.setRowCount(0); // Tablodaki tüm satırları sil\n                SwingWorker&lt;Void, Object[]&gt; worker = new SwingWorker&lt;&gt;() {\n                    @Override\n                    protected Void doInBackground() throws Exception {\n                        Thread.sleep(50);\n                        List&lt;Musteri&gt; musteriler = randomData();\n                        for (int i = 0; i &lt; musteriler.size(); i++) {\n                            Object[] musteriVeri = new Object[4]; // Yeni dizi oluştur\n                            musteriVeri[0] = musteriler.get(i).getAdSoyad();\n                            musteriVeri[1] = musteriler.get(i).getEmail();\n                            musteriVeri[2] = musteriler.get(i).gettelefoNo();\n                            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n                            publish(musteriVeri);\n                            Thread.sleep(50);\n                        }\n                        return null;\n                    }\n\n                    @Override\n                    protected void process(List&lt;Object[]&gt; chunks) {\n                        for (Object[] row : chunks) {\n                            musteriModel.addRow(row);\n                        }\n                    }\n\n                    @Override\n                    protected void done() {\n                        musteriEkle.setEnabled(true);\n                    }\n                };\n                worker.execute();\n            }\n        });\n        //musteriEkle.addActionListener(new MusteriEkraniAction(this));\n\n    }\n    return musteriEkle;\n}\n</code></pre>\n<p>You might want to take some time and learn the <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\" rel=\"nofollow noreferrer\">Code Conventions for the Java  Programming Language</a>, it will make it easier for other people to read your code.</p>\n<p>I would also recommend taking the time to learn, understand and use <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">the layout management system</a> available in Swing ... as you layout kind of broke on my system while I was trying to test your code.</p>\n<blockquote>\n<p>but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated</p>\n</blockquote>\n<p>I was unable to reproduce your issue as you supplied a incomplete and uncompilable code example, but I would start my investigation in <code>MusteriController</code> and the <code>ListeyiAl</code> method.</p>\n"}],"owner":{"account_id":28443448,"reputation":1,"user_id":21762501,"display_name":"Orhancan Yıldırım"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1682678466,"answer_count":1,"score":-1,"last_activity_date":1682731939,"creation_date":1682671924,"question_id":76127862,"body_markdown":"My problem is that I want the table to be updated instantly as soon as I press the &quot;MusteriEkle&quot; button while transferring the data I received from the &quot;MusteriOlusturmaEkranın&quot; to the table, but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated, but when we click the &quot;GeriDon&quot; button and come to the &quot;AnaEkran&quot;, and again when we click on the &quot;MusteriOlusturmaEkranın&quot; It shows up correctly when we open &quot; How can I fix this?\r\n```java\r\npackage GUI;\r\n\r\nimport Action.MusteriEkraniAction;\r\nimport Controller.MusteriController;\r\nimport DAO.MusteriDao;\r\nimport Entity.Musteri;\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTable;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.table.DefaultTableModel;\r\n\r\npublic class MusteriOlusturmaEkrani extends JFrame {\r\n    private JTable MusteriTablo;\r\n    private JLabel AdSoyad;\r\n    private JLabel TelefoNo;\r\n    private JLabel Email;\r\n    private JLabel SevkAdres;\r\n    private JTextField AdSoyadF;\r\n    private JTextField EmailF;\r\n    private JTextField TelefoNoF;\r\n    private JTextField SevkAdresF;\r\n    private JScrollPane tabloPane;\r\n    private JButton GeriDon;\r\n    private JButton MusteriEkle;\r\n    private DefaultTableModel Musterimodel;\r\n    public Object[] musteriVeri;\r\n    public MusteriController musteriController;\r\n\r\n    public MusteriOlusturmaEkrani() throws IOException {\r\n        TabloOlustur();\r\n        Olustur();\r\n    }\r\n\r\n    private void TabloOlustur() {\r\n        MusteriDao musteridao = new MusteriDao();\r\n        musteriController = new MusteriController();\r\n        Musterimodel = new DefaultTableModel();\r\n        Object[] m&#252;steriObje = new Object[4];\r\n        m&#252;steriObje[0] = &quot;Ad Soyad&quot;;\r\n        m&#252;steriObje[1] = &quot;Tel No&quot;;\r\n        m&#252;steriObje[2] = &quot;E-mail&quot;;\r\n        m&#252;steriObje[3] = &quot;Adres&quot;;\r\n        Musterimodel.setColumnIdentifiers(m&#252;steriObje);\r\n        musteriVeri = new Object[4];\r\n        List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\r\n        for (int i = 0; i &lt; musteriler.size(); i++) {\r\n            musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n            musteriVeri[1] = musteriler.get(i).getEmail();\r\n            musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n            Musterimodel.addRow(musteriVeri);\r\n        }\r\n        PanelEkle();\r\n    }\r\n\r\n    public void TabloGuncelle() {\r\n        Thread thread = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Musterimodel.setRowCount(0); // Tablodaki t&#252;m satırları sil\r\n                List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\r\n                for (int i = 0; i &lt; musteriler.size(); i++) {\r\n                    Object[] musteriVeri = new Object[4]; // Yeni dizi oluştur\r\n                    musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n                    musteriVeri[1] = musteriler.get(i).getEmail();\r\n                    musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n                    musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n                    Musterimodel.addRow(musteriVeri);\r\n                }\r\n            }\r\n        });\r\n        thread.start();\r\n    }\r\n\r\n    private void Olustur() {\r\n        add(PanelEkle());\r\n        setTitle(&quot;M&#252;şteri Oluşturma&quot;);\r\n        setLocationRelativeTo(null);\r\n        setBounds(300, 75, 1000, 650);\r\n        setVisible(true);\r\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n        setResizable(false);\r\n    }\r\n\r\n    private JPanel PanelEkle() {\r\n        JPanel M&#252;steriPanel = new JPanel();\r\n        M&#252;steriPanel.setBackground(new Color(255, 240, 255));\r\n        M&#252;steriPanel.setLayout(null);\r\n        M&#252;steriPanel.add(getTabloPane());\r\n        M&#252;steriPanel.add(getAdSoyad());\r\n        M&#252;steriPanel.add(getAdSoyadF());\r\n        M&#252;steriPanel.add(getTelefoNo());\r\n        M&#252;steriPanel.add(getTelefoNoF());\r\n        M&#252;steriPanel.add(getEmail());\r\n        M&#252;steriPanel.add(getEmailF());\r\n        M&#252;steriPanel.add(getGeriDon());\r\n        M&#252;steriPanel.add(getSevkAdres());\r\n        M&#252;steriPanel.add(getSevkAdresF());\r\n        M&#252;steriPanel.add(getMusteriEkle());\r\n        return M&#252;steriPanel;\r\n    }\r\n\r\n    public JTable getMusteriTablo() {\r\n        if (MusteriTablo == null) {\r\n            MusteriTablo = new JTable();\r\n            MusteriTablo.setModel(Musterimodel);\r\n        }\r\n        return MusteriTablo;\r\n    }\r\n\r\n    public void setMusteriTablo(JTable MusteriTablo) {\r\n        this.MusteriTablo = MusteriTablo;\r\n    }\r\n\r\n    public JLabel getAdSoyad() {\r\n        if (AdSoyad == null) {\r\n            AdSoyad = new JLabel(&quot;Ad Soyad :&quot;);\r\n            AdSoyad.setBounds(50, 100, 200, 50);\r\n            AdSoyad.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return AdSoyad;\r\n    }\r\n\r\n    public void setAdSoyad(JLabel AdSoyad) {\r\n        this.AdSoyad = AdSoyad;\r\n    }\r\n\r\n    public JLabel getTelefoNo() {\r\n        if (TelefoNo == null) {\r\n            TelefoNo = new JLabel(&quot;Telefon :&quot;);\r\n            TelefoNo.setBounds(50, 260, 200, 50);\r\n            TelefoNo.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return TelefoNo;\r\n    }\r\n\r\n    public void setTelefoNo(JLabel TelefoNo) {\r\n        this.TelefoNo = TelefoNo;\r\n    }\r\n\r\n    public JLabel getEmail() {\r\n        if (Email == null) {\r\n            Email = new JLabel(&quot;E-mail :&quot;);\r\n            Email.setBounds(50, 180, 200, 50);\r\n            Email.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return Email;\r\n    }\r\n\r\n    public void setEmail(JLabel Email) {\r\n        this.Email = Email;\r\n    }\r\n\r\n    public JTextField getAdSoyadF() {\r\n        if (AdSoyadF == null) {\r\n            AdSoyadF = new JTextField();\r\n            AdSoyadF.setBounds(50, 150, 200, 30);\r\n        }\r\n        return AdSoyadF;\r\n    }\r\n\r\n    public void setAdSoyadF(JTextField AdSoyadF) {\r\n        this.AdSoyadF = AdSoyadF;\r\n    }\r\n\r\n    public JTextField getEmailF() {\r\n        if (EmailF == null) {\r\n            EmailF = new JTextField();\r\n            EmailF.setBounds(50, 310, 200, 30);\r\n        }\r\n        return EmailF;\r\n    }\r\n\r\n    public void setEmailF(JTextField EmailF) {\r\n        this.EmailF = EmailF;\r\n    }\r\n\r\n    public JTextField getTelefoNoF() {\r\n        if (TelefoNoF == null) {\r\n            TelefoNoF = new JTextField();\r\n            TelefoNoF.setBounds(50, 230, 200, 30);\r\n        }\r\n        return TelefoNoF;\r\n    }\r\n\r\n    public void setTelefoNoF(JTextField TelefoNoF) {\r\n        this.TelefoNoF = TelefoNoF;\r\n    }\r\n\r\n    public JScrollPane getTabloPane() {\r\n        if (tabloPane == null) {\r\n            tabloPane = new JScrollPane();\r\n            tabloPane.setViewportView(getMusteriTablo());\r\n            tabloPane.setBounds(450, 50, 500, 450);\r\n        }\r\n        return tabloPane;\r\n    }\r\n\r\n    public void setTabloPane(JScrollPane tabloPane) {\r\n        this.tabloPane = tabloPane;\r\n    }\r\n\r\n    public JButton getGeriDon() {\r\n        if (GeriDon == null) {\r\n            GeriDon = new JButton(&quot;Geri d&#246;n&quot;);\r\n            GeriDon.setBounds(850, 550, 100, 30);\r\n            GeriDon.setBackground(new Color(186, 153, 187));\r\n            GeriDon.addActionListener(new MusteriEkraniAction(this));\r\n        }\r\n        return GeriDon;\r\n    }\r\n\r\n    public void setGeriDon(JButton GeriDon) {\r\n        this.GeriDon = GeriDon;\r\n    }\r\n\r\n    public JLabel getSevkAdres() {\r\n        if (SevkAdres == null) {\r\n            SevkAdres = new JLabel(&quot;Sevk Adresi :&quot;);\r\n            SevkAdres.setBounds(50, 360, 100, 30);\r\n            SevkAdres.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return SevkAdres;\r\n    }\r\n\r\n    public void setSevkAdres(JLabel SevkAdres) {\r\n        this.SevkAdres = SevkAdres;\r\n    }\r\n\r\n    public JTextField getSevkAdresF() {\r\n        if (SevkAdresF == null) {\r\n            SevkAdresF = new JTextField();\r\n            SevkAdresF.setBounds(50, 410, 200, 30);\r\n        }\r\n        return SevkAdresF;\r\n    }\r\n\r\n    public void setSevkAdresF(JTextField SevkAdresF) {\r\n        this.SevkAdresF = SevkAdresF;\r\n    }\r\n\r\n    public JButton getMusteriEkle() {\r\n        if (MusteriEkle == null) {\r\n            MusteriEkle = new JButton(&quot;M&#252;şteri Oluştur&quot;);\r\n            MusteriEkle.setBounds(50, 500, 200, 30);\r\n            MusteriEkle.setBackground(new Color(143, 194, 197));\r\n            MusteriEkle.addActionListener(new MusteriEkraniAction(this));\r\n        }\r\n        return MusteriEkle;\r\n    }\r\n\r\n    public void setMusteriEkle(JButton MusteriEkle) {\r\n        this.MusteriEkle = MusteriEkle;\r\n    }\r\n}\r\n```\r\n&quot;Musterimodel.setRowCount(0);&quot; in &quot;TabloG&#252;ncelle&quot; I tried adding the code it was repeating twice before this code it was repeating once after adding this code","title":"When I add data to the table I want it to update instantly","body":"<p>My problem is that I want the table to be updated instantly as soon as I press the &quot;MusteriEkle&quot; button while transferring the data I received from the &quot;MusteriOlusturmaEkranın&quot; to the table, but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated, but when we click the &quot;GeriDon&quot; button and come to the &quot;AnaEkran&quot;, and again when we click on the &quot;MusteriOlusturmaEkranın&quot; It shows up correctly when we open &quot; How can I fix this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package GUI;\n\nimport Action.MusteriEkraniAction;\nimport Controller.MusteriController;\nimport DAO.MusteriDao;\nimport Entity.Musteri;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.io.IOException;\nimport java.util.List;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.JTextField;\nimport javax.swing.table.DefaultTableModel;\n\npublic class MusteriOlusturmaEkrani extends JFrame {\n    private JTable MusteriTablo;\n    private JLabel AdSoyad;\n    private JLabel TelefoNo;\n    private JLabel Email;\n    private JLabel SevkAdres;\n    private JTextField AdSoyadF;\n    private JTextField EmailF;\n    private JTextField TelefoNoF;\n    private JTextField SevkAdresF;\n    private JScrollPane tabloPane;\n    private JButton GeriDon;\n    private JButton MusteriEkle;\n    private DefaultTableModel Musterimodel;\n    public Object[] musteriVeri;\n    public MusteriController musteriController;\n\n    public MusteriOlusturmaEkrani() throws IOException {\n        TabloOlustur();\n        Olustur();\n    }\n\n    private void TabloOlustur() {\n        MusteriDao musteridao = new MusteriDao();\n        musteriController = new MusteriController();\n        Musterimodel = new DefaultTableModel();\n        Object[] müsteriObje = new Object[4];\n        müsteriObje[0] = &quot;Ad Soyad&quot;;\n        müsteriObje[1] = &quot;Tel No&quot;;\n        müsteriObje[2] = &quot;E-mail&quot;;\n        müsteriObje[3] = &quot;Adres&quot;;\n        Musterimodel.setColumnIdentifiers(müsteriObje);\n        musteriVeri = new Object[4];\n        List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\n        for (int i = 0; i &lt; musteriler.size(); i++) {\n            musteriVeri[0] = musteriler.get(i).getAdSoyad();\n            musteriVeri[1] = musteriler.get(i).getEmail();\n            musteriVeri[2] = musteriler.get(i).gettelefoNo();\n            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n            Musterimodel.addRow(musteriVeri);\n        }\n        PanelEkle();\n    }\n\n    public void TabloGuncelle() {\n        Thread thread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                Musterimodel.setRowCount(0); // Tablodaki tüm satırları sil\n                List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\n                for (int i = 0; i &lt; musteriler.size(); i++) {\n                    Object[] musteriVeri = new Object[4]; // Yeni dizi oluştur\n                    musteriVeri[0] = musteriler.get(i).getAdSoyad();\n                    musteriVeri[1] = musteriler.get(i).getEmail();\n                    musteriVeri[2] = musteriler.get(i).gettelefoNo();\n                    musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n                    Musterimodel.addRow(musteriVeri);\n                }\n            }\n        });\n        thread.start();\n    }\n\n    private void Olustur() {\n        add(PanelEkle());\n        setTitle(&quot;Müşteri Oluşturma&quot;);\n        setLocationRelativeTo(null);\n        setBounds(300, 75, 1000, 650);\n        setVisible(true);\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        setResizable(false);\n    }\n\n    private JPanel PanelEkle() {\n        JPanel MüsteriPanel = new JPanel();\n        MüsteriPanel.setBackground(new Color(255, 240, 255));\n        MüsteriPanel.setLayout(null);\n        MüsteriPanel.add(getTabloPane());\n        MüsteriPanel.add(getAdSoyad());\n        MüsteriPanel.add(getAdSoyadF());\n        MüsteriPanel.add(getTelefoNo());\n        MüsteriPanel.add(getTelefoNoF());\n        MüsteriPanel.add(getEmail());\n        MüsteriPanel.add(getEmailF());\n        MüsteriPanel.add(getGeriDon());\n        MüsteriPanel.add(getSevkAdres());\n        MüsteriPanel.add(getSevkAdresF());\n        MüsteriPanel.add(getMusteriEkle());\n        return MüsteriPanel;\n    }\n\n    public JTable getMusteriTablo() {\n        if (MusteriTablo == null) {\n            MusteriTablo = new JTable();\n            MusteriTablo.setModel(Musterimodel);\n        }\n        return MusteriTablo;\n    }\n\n    public void setMusteriTablo(JTable MusteriTablo) {\n        this.MusteriTablo = MusteriTablo;\n    }\n\n    public JLabel getAdSoyad() {\n        if (AdSoyad == null) {\n            AdSoyad = new JLabel(&quot;Ad Soyad :&quot;);\n            AdSoyad.setBounds(50, 100, 200, 50);\n            AdSoyad.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return AdSoyad;\n    }\n\n    public void setAdSoyad(JLabel AdSoyad) {\n        this.AdSoyad = AdSoyad;\n    }\n\n    public JLabel getTelefoNo() {\n        if (TelefoNo == null) {\n            TelefoNo = new JLabel(&quot;Telefon :&quot;);\n            TelefoNo.setBounds(50, 260, 200, 50);\n            TelefoNo.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return TelefoNo;\n    }\n\n    public void setTelefoNo(JLabel TelefoNo) {\n        this.TelefoNo = TelefoNo;\n    }\n\n    public JLabel getEmail() {\n        if (Email == null) {\n            Email = new JLabel(&quot;E-mail :&quot;);\n            Email.setBounds(50, 180, 200, 50);\n            Email.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return Email;\n    }\n\n    public void setEmail(JLabel Email) {\n        this.Email = Email;\n    }\n\n    public JTextField getAdSoyadF() {\n        if (AdSoyadF == null) {\n            AdSoyadF = new JTextField();\n            AdSoyadF.setBounds(50, 150, 200, 30);\n        }\n        return AdSoyadF;\n    }\n\n    public void setAdSoyadF(JTextField AdSoyadF) {\n        this.AdSoyadF = AdSoyadF;\n    }\n\n    public JTextField getEmailF() {\n        if (EmailF == null) {\n            EmailF = new JTextField();\n            EmailF.setBounds(50, 310, 200, 30);\n        }\n        return EmailF;\n    }\n\n    public void setEmailF(JTextField EmailF) {\n        this.EmailF = EmailF;\n    }\n\n    public JTextField getTelefoNoF() {\n        if (TelefoNoF == null) {\n            TelefoNoF = new JTextField();\n            TelefoNoF.setBounds(50, 230, 200, 30);\n        }\n        return TelefoNoF;\n    }\n\n    public void setTelefoNoF(JTextField TelefoNoF) {\n        this.TelefoNoF = TelefoNoF;\n    }\n\n    public JScrollPane getTabloPane() {\n        if (tabloPane == null) {\n            tabloPane = new JScrollPane();\n            tabloPane.setViewportView(getMusteriTablo());\n            tabloPane.setBounds(450, 50, 500, 450);\n        }\n        return tabloPane;\n    }\n\n    public void setTabloPane(JScrollPane tabloPane) {\n        this.tabloPane = tabloPane;\n    }\n\n    public JButton getGeriDon() {\n        if (GeriDon == null) {\n            GeriDon = new JButton(&quot;Geri dön&quot;);\n            GeriDon.setBounds(850, 550, 100, 30);\n            GeriDon.setBackground(new Color(186, 153, 187));\n            GeriDon.addActionListener(new MusteriEkraniAction(this));\n        }\n        return GeriDon;\n    }\n\n    public void setGeriDon(JButton GeriDon) {\n        this.GeriDon = GeriDon;\n    }\n\n    public JLabel getSevkAdres() {\n        if (SevkAdres == null) {\n            SevkAdres = new JLabel(&quot;Sevk Adresi :&quot;);\n            SevkAdres.setBounds(50, 360, 100, 30);\n            SevkAdres.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return SevkAdres;\n    }\n\n    public void setSevkAdres(JLabel SevkAdres) {\n        this.SevkAdres = SevkAdres;\n    }\n\n    public JTextField getSevkAdresF() {\n        if (SevkAdresF == null) {\n            SevkAdresF = new JTextField();\n            SevkAdresF.setBounds(50, 410, 200, 30);\n        }\n        return SevkAdresF;\n    }\n\n    public void setSevkAdresF(JTextField SevkAdresF) {\n        this.SevkAdresF = SevkAdresF;\n    }\n\n    public JButton getMusteriEkle() {\n        if (MusteriEkle == null) {\n            MusteriEkle = new JButton(&quot;Müşteri Oluştur&quot;);\n            MusteriEkle.setBounds(50, 500, 200, 30);\n            MusteriEkle.setBackground(new Color(143, 194, 197));\n            MusteriEkle.addActionListener(new MusteriEkraniAction(this));\n        }\n        return MusteriEkle;\n    }\n\n    public void setMusteriEkle(JButton MusteriEkle) {\n        this.MusteriEkle = MusteriEkle;\n    }\n}\n</code></pre>\n<p>&quot;Musterimodel.setRowCount(0);&quot; in &quot;TabloGüncelle&quot; I tried adding the code it was repeating twice before this code it was repeating once after adding this code</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682711299,"post_id":76132833,"comment_id":134264173,"body_markdown":"`String[] locales = Stream.of(Locale.values()).map(loc -&gt; loc.locale).toArray(String[]::new);`.","body":"<code>String[] locales = Stream.of(Locale.values()).map(loc -&gt; loc.locale).toArray(String[]::new);</code>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682711404,"post_id":76132833,"comment_id":134264196,"body_markdown":"Note there&#39;s no reason to use `Locale.class.getEnumConstants()` in this case. All `enum` classes implicitly have a static `values()` method that returns an array of all constants.","body":"Note there&#39;s no reason to use <code>Locale.class.getEnumConstants()</code> in this case. All <code>enum</code> classes implicitly have a static <code>values()</code> method that returns an array of all constants."},{"owner":{"account_id":20494982,"reputation":41,"user_id":15040175,"display_name":"kubas1178"},"score":0,"creation_date":1682711704,"post_id":76132833,"comment_id":134264253,"body_markdown":"@Slaw\nThank you it worked! Can&#39;t belive i missed that...","body":"@Slaw Thank you it worked! Can&#39;t belive i missed that..."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":3,"creation_date":1682712086,"post_id":76132833,"comment_id":134264325,"body_markdown":"Side note: Maybe your example `Locale` enum was created only for this question - but I would give it a different name, to avoid potential clashes with core Java&#39;s [`Locale`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html) class.","body":"Side note: Maybe your example <code>Locale</code> enum was created only for this question - but I would give it a different name, to avoid potential clashes with core Java&#39;s <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a> class."}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682711937,"creation_date":1682711937,"answer_id":76132913,"question_id":76132833,"body_markdown":"An enum value in Java is an object. An object is an instance of a type. In this case, the type is the enum, (&quot;Locale&quot;,) so the enum values are instances of that type, in other words, each enum value is of type &quot;Locale&quot;. Java guarantees that there will only be a fixed set of instances, one instance for each value declared in the enum. \r\n\r\nWhen you declare a constructor and fields in an `enum`, these become part of each instance. So, each one of the locales you have declared will have an extra member of type `String` which you call `locale`.\r\n\r\nKnowing that, and also knowing that to get all instances, we can use `Locale.values()`, your answer is:\r\n\r\n    for( var instance : Locale.values() )\r\n        System.out.println( instance.locale );\r\n","title":"Receiving field values from all enum members","body":"<p>An enum value in Java is an object. An object is an instance of a type. In this case, the type is the enum, (&quot;Locale&quot;,) so the enum values are instances of that type, in other words, each enum value is of type &quot;Locale&quot;. Java guarantees that there will only be a fixed set of instances, one instance for each value declared in the enum.</p>\n<p>When you declare a constructor and fields in an <code>enum</code>, these become part of each instance. So, each one of the locales you have declared will have an extra member of type <code>String</code> which you call <code>locale</code>.</p>\n<p>Knowing that, and also knowing that to get all instances, we can use <code>Locale.values()</code>, your answer is:</p>\n<pre><code>for( var instance : Locale.values() )\n    System.out.println( instance.locale );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682731673,"creation_date":1682714655,"answer_id":76133163,"question_id":76132833,"body_markdown":"The [Answer by Mike Nakis][1] is correct. I can clarify a bit more.\r\n\r\nLet&#39;s change the names in the original code, for clarity. \r\n\r\nAs [commented by andrewJames][2], Java bundles a commonly used class named `Locale`. So let&#39;s change your enum name to be more specific, something like `LocaleCode`. \r\n\r\nAnd change the field name to be more specific: `code`. \r\n\r\nThe `code` field holding the `String` object should be private, to prevent inadvertent re-assignment to another object. Add a getter method to access that string.\r\n\r\nFor fun, we can add a convenience method to return a [`java.util.Locale`][3] object matching our stored code string. By the way, the order of language and culture in your string codes seems to be the reverse of conventional/standard order (but I am no expert). \r\n\r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.util.Locale;\r\n\r\npublic enum LocaleCode\r\n{\r\n    PL( &quot;PL-pl&quot; ),\r\n    DE( &quot;DE-de&quot; ),\r\n    EN( &quot;EN-en&quot; );\r\n\r\n    // Member field\r\n    private final String code;\r\n\r\n    // Constructor\r\n    private LocaleCode ( String code )\r\n    {\r\n        this.code = code;\r\n    }\r\n\r\n    // Getter method for private field.\r\n    public String getCode ( )\r\n    {\r\n        return code;\r\n    }\r\n\r\n    // Convenience method for obtaining a `java.util.Locale` object for this code.\r\n    public Locale getLocale ( )\r\n    {\r\n        …\r\n    }\r\n}\r\n```\r\n\r\nYou asked:\r\n\r\n&gt; What i want to achive is to get all field values as array [&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]\r\n\r\nLoop through each of the enum objects, interrogating for its field value, and collect.\r\n\r\nYou said:\r\n\r\n&gt;For the enum values its easy: `Locale[] yourEnums = Locale.class.getEnumConstants();`\r\n\r\nJust call `MyEnumClass.values()` for an array of all the enum objects in the order of their declaration. This special method is *not* well-documented, hidden as a mention in Javadoc for [`Enum.valueOf`][4]. To quote:\r\n\r\n&gt;All the constants of an `enum` class can be obtained by calling the implicit `public static T[] values()` method of that class.\r\n\r\n\r\n```java\r\nint count = LocaleCode.values().length;\r\nString[] codes = new String[ count ];\r\nLocaleCode[] values = LocaleCode.values();\r\nfor ( int index = 0 ; index &lt; values.length ; index++ )\r\n{\r\n    LocaleCode localeCode = values[ index ];\r\n    codes[ index ] = localeCode.getCode();\r\n}\r\nSystem.out.println( &quot;codes = &quot; + Arrays.toString( codes ) );\r\n```\r\n\r\n&gt;codes = [PL-pl, DE-de, EN-en]\r\n\r\nMore briefly using streams and method reference. \r\n\r\n```java\r\nString[] codes =\r\n        Arrays\r\n                .stream( LocaleCode.values() )\r\n                .map( LocaleCode :: getCode )\r\n                .toList()\r\n                .toArray( new String[ 0 ] );\r\n```\r\n\r\n&gt;codes = [PL-pl, DE-de, EN-en]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76132913/642706\r\n  [2]: https://stackoverflow.com/questions/76132833/receiving-field-values-from-all-enum-members#comment134264325_76132833\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html#ObtainingLocale\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String)","title":"Receiving field values from all enum members","body":"<p>The <a href=\"https://stackoverflow.com/a/76132913/642706\">Answer by Mike Nakis</a> is correct. I can clarify a bit more.</p>\n<p>Let's change the names in the original code, for clarity.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/76132833/receiving-field-values-from-all-enum-members#comment134264325_76132833\">commented by andrewJames</a>, Java bundles a commonly used class named <code>Locale</code>. So let's change your enum name to be more specific, something like <code>LocaleCode</code>.</p>\n<p>And change the field name to be more specific: <code>code</code>.</p>\n<p>The <code>code</code> field holding the <code>String</code> object should be private, to prevent inadvertent re-assignment to another object. Add a getter method to access that string.</p>\n<p>For fun, we can add a convenience method to return a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html#ObtainingLocale\" rel=\"nofollow noreferrer\"><code>java.util.Locale</code></a> object matching our stored code string. By the way, the order of language and culture in your string codes seems to be the reverse of conventional/standard order (but I am no expert).</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.util.Locale;\n\npublic enum LocaleCode\n{\n    PL( &quot;PL-pl&quot; ),\n    DE( &quot;DE-de&quot; ),\n    EN( &quot;EN-en&quot; );\n\n    // Member field\n    private final String code;\n\n    // Constructor\n    private LocaleCode ( String code )\n    {\n        this.code = code;\n    }\n\n    // Getter method for private field.\n    public String getCode ( )\n    {\n        return code;\n    }\n\n    // Convenience method for obtaining a `java.util.Locale` object for this code.\n    public Locale getLocale ( )\n    {\n        …\n    }\n}\n</code></pre>\n<p>You asked:</p>\n<blockquote>\n<p>What i want to achive is to get all field values as array [&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]</p>\n</blockquote>\n<p>Loop through each of the enum objects, interrogating for its field value, and collect.</p>\n<p>You said:</p>\n<blockquote>\n<p>For the enum values its easy: <code>Locale[] yourEnums = Locale.class.getEnumConstants();</code></p>\n</blockquote>\n<p>Just call <code>MyEnumClass.values()</code> for an array of all the enum objects in the order of their declaration. This special method is <em>not</em> well-documented, hidden as a mention in Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String)\" rel=\"nofollow noreferrer\"><code>Enum.valueOf</code></a>. To quote:</p>\n<blockquote>\n<p>All the constants of an <code>enum</code> class can be obtained by calling the implicit <code>public static T[] values()</code> method of that class.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>int count = LocaleCode.values().length;\nString[] codes = new String[ count ];\nLocaleCode[] values = LocaleCode.values();\nfor ( int index = 0 ; index &lt; values.length ; index++ )\n{\n    LocaleCode localeCode = values[ index ];\n    codes[ index ] = localeCode.getCode();\n}\nSystem.out.println( &quot;codes = &quot; + Arrays.toString( codes ) );\n</code></pre>\n<blockquote>\n<p>codes = [PL-pl, DE-de, EN-en]</p>\n</blockquote>\n<p>More briefly using streams and method reference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] codes =\n        Arrays\n                .stream( LocaleCode.values() )\n                .map( LocaleCode :: getCode )\n                .toList()\n                .toArray( new String[ 0 ] );\n</code></pre>\n<blockquote>\n<p>codes = [PL-pl, DE-de, EN-en]</p>\n</blockquote>\n"}],"owner":{"account_id":20494982,"reputation":41,"user_id":15040175,"display_name":"kubas1178"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76132913,"answer_count":2,"score":1,"last_activity_date":1682731673,"creation_date":1682711135,"question_id":76132833,"body_markdown":"I am struggling with java enums. Due to task assumptions enum values must contain hyphens. I&#39;ve found out that enum values cannot have such character in its name so i decided to move the correct names as enum fields.\r\n\r\nLet&#39;s assume that my enum class looks like this.\r\n\r\n```\r\npublic enum Locale{\r\n    PL(&quot;PL-pl&quot;),\r\n    DE(&quot;DE-de&quot;),\r\n    EN(&quot;EN-en&quot;);\r\n\r\n    public final String locale;\r\n\r\n    private Locale(String locale) {\r\n        this.locale= locale;\r\n    }\r\n}\r\n```\r\n\r\nWhat i want to achive is to get all field values as array **[&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]**\r\n\r\nFor the enum values its easy\r\n```\r\nLocale[] yourEnums = Locale.class.getEnumConstants();\r\n```\r\n, but I think I searched whole internet and couldn&#39;t find solution for my problem.","title":"Receiving field values from all enum members","body":"<p>I am struggling with java enums. Due to task assumptions enum values must contain hyphens. I've found out that enum values cannot have such character in its name so i decided to move the correct names as enum fields.</p>\n<p>Let's assume that my enum class looks like this.</p>\n<pre><code>public enum Locale{\n    PL(&quot;PL-pl&quot;),\n    DE(&quot;DE-de&quot;),\n    EN(&quot;EN-en&quot;);\n\n    public final String locale;\n\n    private Locale(String locale) {\n        this.locale= locale;\n    }\n}\n</code></pre>\n<p>What i want to achive is to get all field values as array <strong>[&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]</strong></p>\n<p>For the enum values its easy</p>\n<pre><code>Locale[] yourEnums = Locale.class.getEnumConstants();\n</code></pre>\n<p>, but I think I searched whole internet and couldn't find solution for my problem.</p>\n"},{"tags":["java","loops","logic"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":5,"creation_date":1682704777,"post_id":76132111,"comment_id":134263041,"body_markdown":"You are confusing variable with object.","body":"You are confusing variable with object."},{"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"score":1,"creation_date":1682704880,"post_id":76132111,"comment_id":134263068,"body_markdown":"Perhaps you could add actual vs. expected output to your question.","body":"Perhaps you could add actual vs. expected output to your question."},{"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"score":0,"creation_date":1682706098,"post_id":76132111,"comment_id":134263297,"body_markdown":"@HovercraftFullOfEels how so?","body":"@HovercraftFullOfEels how so?"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682719320,"creation_date":1682719320,"answer_id":76133527,"question_id":76132111,"body_markdown":"The code fragment\r\n\r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n        \r\n    for(int i = 0; i&lt;10; i++)\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n\r\nis equivalent to\r\n\r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n    // here the `ArrayList` referenced by `names` is empty\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n    // at this point there is no variable called name\r\n    // the `ArrayList` referenced by `names` contains one reference to the string &quot;name: &quot;\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n    // at this point there is no variable called name\r\n    // the `ArrayList` referenced by `names` contains two references to the string &quot;name: &quot;\r\n    // some repetitions left out for brevity\r\n\r\n----\r\nI think your misunderstanding is this:\r\n\r\n&gt; I added the variable to an `ArrayList` outside of the scope of the for loop\r\n\r\nYou cannot add variables to an `ArrayList` - you can only add the objects referenced by variables to an `ArrayList`\r\n\r\nThe `ArrayList.add()` doesn&#39;t know how you called your variable - or whether you used a variable at all - maybe you were calling it as `names.add(&quot;name: &quot;);`","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>The code fragment</p>\n<pre><code>ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n    \nfor(int i = 0; i&lt;10; i++)\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n</code></pre>\n<p>is equivalent to</p>\n<pre><code>ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n// here the `ArrayList` referenced by `names` is empty\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n// at this point there is no variable called name\n// the `ArrayList` referenced by `names` contains one reference to the string &quot;name: &quot;\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n// at this point there is no variable called name\n// the `ArrayList` referenced by `names` contains two references to the string &quot;name: &quot;\n// some repetitions left out for brevity\n</code></pre>\n<hr />\n<p>I think your misunderstanding is this:</p>\n<blockquote>\n<p>I added the variable to an <code>ArrayList</code> outside of the scope of the for loop</p>\n</blockquote>\n<p>You cannot add variables to an <code>ArrayList</code> - you can only add the objects referenced by variables to an <code>ArrayList</code></p>\n<p>The <code>ArrayList.add()</code> doesn't know how you called your variable - or whether you used a variable at all - maybe you were calling it as <code>names.add(&quot;name: &quot;);</code></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682731221,"creation_date":1682730795,"answer_id":76134110,"question_id":76132111,"body_markdown":"The [Answer by Thomas Kl&#228;ger][1] is correct. I&#39;ll add a bit to explain the syntax of your lambda code.\r\n\r\n# Two ways to do the same thing: Declare var, loop list\r\n\r\nYour two pieces of code:\r\n\r\n    names.forEach( ( name ) -&gt; { System.out.println( name ); } );\r\n\r\n… and:\r\n\r\n    for ( String temp : names ) { System.out.println( temp ); }\r\n\r\n… both do the very same thing: Define a local reference variable named `name` of type `String`. \r\n\r\nWe can make them even more similar by changing `temp` variable name to `name`. And your first line has unnecessary parentheses, removed here.\r\n\r\n    names.forEach( name -&gt; { System.out.println( name ); } );\r\n    for ( String name : names ) { System.out.println( name ); }\r\n\r\nBoth lines:\r\n\r\n 1. **Define a local variable named `name`**, of a type to hold a reference to a `String` object. \r\n 2. Loop the object references held in the `List` named `names`. \r\n 3. For each time through that loop, both lines pass the object referenced by the variable named `name` to `System.out.println`. \r\n\r\nDifferent syntax but same result.\r\n\r\n## Both lines contain `String name` declaration\r\n\r\nWe can make this similarity more clear by expanding the syntax of your lambda code. \r\n\r\nThe `name -&gt;` portion is actually an abbreviation of `( String name ) -&gt;`. This makes more explicit the declaration of a variable named `name` to hold a reference to an object of the class `String`. Your [IDE][2] likely offers a feature to switch between the full declaration and the abbreviation.\r\n\r\n    names.forEach( ( String name ) -&gt; { System.out.println( name ); } );\r\n\r\nThis `( String name ) -&gt;` means the same thing as `String name` in the second line `for ( String name : names ) { System.out.println( name ); }`. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76133527/642706\r\n  [2]: https://en.wikipedia.org/wiki/Integrated_development_environment","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>The <a href=\"https://stackoverflow.com/a/76133527/642706\">Answer by Thomas Kläger</a> is correct. I'll add a bit to explain the syntax of your lambda code.</p>\n<h1>Two ways to do the same thing: Declare var, loop list</h1>\n<p>Your two pieces of code:</p>\n<pre><code>names.forEach( ( name ) -&gt; { System.out.println( name ); } );\n</code></pre>\n<p>… and:</p>\n<pre><code>for ( String temp : names ) { System.out.println( temp ); }\n</code></pre>\n<p>… both do the very same thing: Define a local reference variable named <code>name</code> of type <code>String</code>.</p>\n<p>We can make them even more similar by changing <code>temp</code> variable name to <code>name</code>. And your first line has unnecessary parentheses, removed here.</p>\n<pre><code>names.forEach( name -&gt; { System.out.println( name ); } );\nfor ( String name : names ) { System.out.println( name ); }\n</code></pre>\n<p>Both lines:</p>\n<ol>\n<li><strong>Define a local variable named <code>name</code></strong>, of a type to hold a reference to a <code>String</code> object.</li>\n<li>Loop the object references held in the <code>List</code> named <code>names</code>.</li>\n<li>For each time through that loop, both lines pass the object referenced by the variable named <code>name</code> to <code>System.out.println</code>.</li>\n</ol>\n<p>Different syntax but same result.</p>\n<h2>Both lines contain <code>String name</code> declaration</h2>\n<p>We can make this similarity more clear by expanding the syntax of your lambda code.</p>\n<p>The <code>name -&gt;</code> portion is actually an abbreviation of <code>( String name ) -&gt;</code>. This makes more explicit the declaration of a variable named <code>name</code> to hold a reference to an object of the class <code>String</code>. Your <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> likely offers a feature to switch between the full declaration and the abbreviation.</p>\n<pre><code>names.forEach( ( String name ) -&gt; { System.out.println( name ); } );\n</code></pre>\n<p>This <code>( String name ) -&gt;</code> means the same thing as <code>String name</code> in the second line <code>for ( String name : names ) { System.out.println( name ); }</code>.</p>\n"}],"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1682932067,"accepted_answer_id":76133527,"answer_count":2,"score":-3,"last_activity_date":1682731221,"creation_date":1682704384,"question_id":76132111,"body_markdown":"I am playing around learning Lambda within Java and needed to create a list of variables. I created a for loop which creates a new String variable on each iteration, however each one has the same variable name which is not aloud outside of a for loop. \r\n\r\nI see in the following post, https://stackoverflow.com/questions/53497746/why-is-it-allowed-to-declare-a-variable-in-a-for-loop , they detail that its because of the scope of the created variable within the loop. However, I added the variable to an ArrayList outside of the scope of the for loop and then iterated through it to see that the duplicated name variables still exists with no errors. \r\n\r\nI duplicated the code to have each variable have the same String value as well, to check if it had something to do with the values being different, but it still allowed the variables to be stored into the Array...\r\n\r\nCode is below. \r\n\r\n\r\n\r\n    import java.util.ArrayList;\r\n    \r\n    public class Lambda \r\n    {\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n    \t\t\r\n    \t\tfor(int i = 0; i&lt;10; i++)\r\n    \t\t{\r\n    \t\t\tString name = &quot;name: &quot;;\r\n    \t\t\tnames.add(name);\r\n    \t\t}\r\n    \t\t\r\n    \t\tnames.forEach((name) -&gt; {System.out.println(name);});\r\n    \t\t\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;\\n***********************************\\n&quot;);\r\n    \t\t\r\n    \t\tfor(String temp: names)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(temp);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>I am playing around learning Lambda within Java and needed to create a list of variables. I created a for loop which creates a new String variable on each iteration, however each one has the same variable name which is not aloud outside of a for loop.</p>\n<p>I see in the following post, <a href=\"https://stackoverflow.com/questions/53497746/why-is-it-allowed-to-declare-a-variable-in-a-for-loop\">Why is it allowed to declare a variable in a for loop?</a> , they detail that its because of the scope of the created variable within the loop. However, I added the variable to an ArrayList outside of the scope of the for loop and then iterated through it to see that the duplicated name variables still exists with no errors.</p>\n<p>I duplicated the code to have each variable have the same String value as well, to check if it had something to do with the values being different, but it still allowed the variables to be stored into the Array...</p>\n<p>Code is below.</p>\n<pre><code>import java.util.ArrayList;\n\npublic class Lambda \n{\n    public static void main(String[] args)\n    {\n        ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n        \n        for(int i = 0; i&lt;10; i++)\n        {\n            String name = &quot;name: &quot;;\n            names.add(name);\n        }\n        \n        names.forEach((name) -&gt; {System.out.println(name);});\n        \n        \n        System.out.println(&quot;\\n***********************************\\n&quot;);\n        \n        for(String temp: names)\n        {\n            System.out.println(temp);\n        }\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm","sorting","matrix","comparator"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1682728642,"post_id":76134014,"comment_id":134266354,"body_markdown":"Does this answer your question? [Java Integer compareTo() - why use comparison vs. subtraction?](https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction\">Java Integer compareTo() - why use comparison vs. subtraction?</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1682728691,"post_id":76134014,"comment_id":134266362,"body_markdown":"In brief, this implementation is _not_ actually correct for all input values, and should be avoided.","body":"In brief, this implementation is <i>not</i> actually correct for all input values, and should be avoided."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682731058,"creation_date":1682731058,"answer_id":76134118,"question_id":76134014,"body_markdown":"That simply says:\r\n\r\n* If the first numbers are equal return the difference between the second.\r\n* Otherwise, return the diff between the first.\r\n\r\nWhich then boils down your question to:\r\n\r\n&quot;Why does `a-b` form a valid comparator&quot;?\r\n\r\nThe answer is: __It does not, actually__.\r\n\r\nA comparator must return a negative number if &#39;a&#39; comes before &#39;b&#39;, a positive number if &#39;a&#39; comes after &#39;b&#39;, and 0 if &#39;a&#39; and &#39;b&#39; are, in terms of comparison, equal.\r\n\r\n`a-b` actually sort of does that. For example, 3-5 is -2. -2 is negative, which means &#39;3&#39; comes before &#39;5&#39;. Indeed it does.\r\n\r\nIt&#39;s not a good idea because there&#39;s such a thing as overflow. `-2_000_000_000` surely comes before `1_000_000_000`. Nevertheless, `-2_000_000_000 - 1_000_000_000` is nevertheless positive (try it!) because of overflow.\r\n\r\nThe proper way to write that code as above would instead be:\r\n\r\n```\r\nArrays.sort(nx2Matrix, (a, b) -&gt; {\r\n    if (a[0] == b[0]) return Integer.comparing(a[1], b[1]);\r\n    return Integer.comparing(a[0], b[0]);\r\n});\r\n```\r\n\r\nor perhaps even:\r\n\r\n```\r\nArrays.sort(nx2Matrix, Comparator\r\n  .comparingInt(a -&gt; a[0])\r\n  .thenComparingInt(a -&gt; a[1]));\r\n```\r\n\r\nWhich is a lot more readable, and doesn&#39;t suffer from the overflow issue.\r\n\r\nThe above means:\r\n\r\n* For any element, &#39;unpack it&#39; by taking that element and running the function `a[0]` on it; this gives you an `int`, then just compare these ints to know which element is first.\r\n* If that results in 2 elements being considered equal, instead compare the ints you get when running `a[1]` on each element.\r\n","title":"How does this algorithm using Array.sort(T[] a, Comparator&lt;? super T&gt; c) sort n x 2 matrixes?","body":"<p>That simply says:</p>\n<ul>\n<li>If the first numbers are equal return the difference between the second.</li>\n<li>Otherwise, return the diff between the first.</li>\n</ul>\n<p>Which then boils down your question to:</p>\n<p>&quot;Why does <code>a-b</code> form a valid comparator&quot;?</p>\n<p>The answer is: <strong>It does not, actually</strong>.</p>\n<p>A comparator must return a negative number if 'a' comes before 'b', a positive number if 'a' comes after 'b', and 0 if 'a' and 'b' are, in terms of comparison, equal.</p>\n<p><code>a-b</code> actually sort of does that. For example, 3-5 is -2. -2 is negative, which means '3' comes before '5'. Indeed it does.</p>\n<p>It's not a good idea because there's such a thing as overflow. <code>-2_000_000_000</code> surely comes before <code>1_000_000_000</code>. Nevertheless, <code>-2_000_000_000 - 1_000_000_000</code> is nevertheless positive (try it!) because of overflow.</p>\n<p>The proper way to write that code as above would instead be:</p>\n<pre><code>Arrays.sort(nx2Matrix, (a, b) -&gt; {\n    if (a[0] == b[0]) return Integer.comparing(a[1], b[1]);\n    return Integer.comparing(a[0], b[0]);\n});\n</code></pre>\n<p>or perhaps even:</p>\n<pre><code>Arrays.sort(nx2Matrix, Comparator\n  .comparingInt(a -&gt; a[0])\n  .thenComparingInt(a -&gt; a[1]));\n</code></pre>\n<p>Which is a lot more readable, and doesn't suffer from the overflow issue.</p>\n<p>The above means:</p>\n<ul>\n<li>For any element, 'unpack it' by taking that element and running the function <code>a[0]</code> on it; this gives you an <code>int</code>, then just compare these ints to know which element is first.</li>\n<li>If that results in 2 elements being considered equal, instead compare the ints you get when running <code>a[1]</code> on each element.</li>\n</ul>\n"}],"owner":{"account_id":26945933,"reputation":7,"user_id":20515929,"display_name":"Brendan B"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682731058,"creation_date":1682728364,"question_id":76134014,"body_markdown":"```\r\nArrays.sort(nx2Matrix, (a, b) -&gt; {\r\n    if (a[0] == b[0]) return a[1] - b[1];\r\n    else return a[0] - b[0];\r\n});\r\n```\r\n\r\nThis sorts n x 2 matrixes to be in ascending order primarily by the first index, then the second, as it should:\r\n\r\n```none\r\n[[2, 0], [4, 1], [1, 2], [2, 3], [5, 4]]\r\n```\r\n\r\nturns into\r\n\r\n```none\r\n[[1, 2], [2, 0], [2, 3], [4, 1], [5, 4]]\r\n```\r\n\r\nBut how is it doing this exactly? More specifically, what is the Comparator doing? (This is from Approach 1 for https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/)\r\n\r\nI tried reading the docs for Comparator, but it didn&#39;t make sense to me. I also tried using print statements to see exactly what&#39;s going on, but I still don&#39;t understand how it sorts the matrix.\r\n","title":"How does this algorithm using Array.sort(T[] a, Comparator&lt;? super T&gt; c) sort n x 2 matrixes?","body":"<pre><code>Arrays.sort(nx2Matrix, (a, b) -&gt; {\n    if (a[0] == b[0]) return a[1] - b[1];\n    else return a[0] - b[0];\n});\n</code></pre>\n<p>This sorts n x 2 matrixes to be in ascending order primarily by the first index, then the second, as it should:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[2, 0], [4, 1], [1, 2], [2, 3], [5, 4]]\n</code></pre>\n<p>turns into</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[1, 2], [2, 0], [2, 3], [4, 1], [5, 4]]\n</code></pre>\n<p>But how is it doing this exactly? More specifically, what is the Comparator doing? (This is from Approach 1 for <a href=\"https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/</a>)</p>\n<p>I tried reading the docs for Comparator, but it didn't make sense to me. I also tried using print statements to see exactly what's going on, but I still don't understand how it sorts the matrix.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":17791044,"reputation":33,"user_id":12920036,"display_name":"Fayaz"},"score":0,"creation_date":1682722739,"post_id":76131781,"comment_id":134265809,"body_markdown":"can you correct my coding and post it here, since i&#39;m new to Framework and selenium, can you please post the correct code for me? from there i will learn","body":"can you correct my coding and post it here, since i&#39;m new to Framework and selenium, can you please post the correct code for me? from there i will learn"},{"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"score":0,"creation_date":1682730445,"post_id":76131781,"comment_id":134266493,"body_markdown":"Please see if the edit helps.","body":"Please see if the edit helps."},{"owner":{"account_id":17791044,"reputation":33,"user_id":12920036,"display_name":"Fayaz"},"score":1,"creation_date":1682968983,"post_id":76131781,"comment_id":134292461,"body_markdown":"This may be solution for my issue, but i created separate base class for all my reusable things, that was worked fine for me, But I&#39;m really thankful for your answer, Thanks a lot","body":"This may be solution for my issue, but i created separate base class for all my reusable things, that was worked fine for me, But I&#39;m really thankful for your answer, Thanks a lot"}],"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682730429,"creation_date":1682701538,"answer_id":76131781,"question_id":76131505,"body_markdown":"Please note that you have defined 2 static ```WebDriver``` objects:\r\n- ```TestNG_Demo.driver```\r\n- ```InvoiceCreationSanity.driver```\r\n\r\nYou have just initialized ```TestNG_Demo.driver``` but ```InvoiceCreationSanity``` class is using ```InvoiceCreationSanity.driver```, which is null.\r\n\r\nYou can choose to set your ```InvoiceCreationSanity.driver``` with ```TestNG_Demo.driver``` so that ```invoicecreation()``` can use the initialized ```driver```:\r\n```java\r\npublic class InvoiceCreationSanity {\r\n    private static WebDriver driver;\r\n    \r\n    @BeforeTest\r\n    public void SetUp() throws InterruptedException {\r\n        TestNG_Demo Setupobject = new TestNG_Demo();\r\n        driver = Setupobject.SetUp(); // Set InvoiceCreationSanity.driver here\r\n        Setupobject.signin();\r\n            \r\n    }\r\n    \r\n    @Test\r\n    public void invoicecreation()  {\r\n        // As driver is set above, now it is initialized and the function should run properly\r\n        createinvoicepom.createinvoice(driver).click();\r\n    }\r\n    \r\n    public void result() {\r\n        System.out.println(&quot;Test Completed Successfully&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class TestNG_Demo {\r\n    \r\n    public static WebDriver driver;\r\n\r\n    \r\n    // You have to return the WebDriver for this function\r\n    @BeforeTest\r\n    public WebDriver SetUp() {\r\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.manage().window().maximize();\r\n        return driver;\r\n    }\r\n        \r\n    \r\n    @Test   \r\n    public void signin() throws InterruptedException {\r\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\r\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\r\n        dashloginpagepom.continue_button(driver).click();\r\n        Thread.sleep(6000);\r\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.cont(driver).click();\r\n        Thread.sleep(6000);\r\n    }\r\n    \r\n    @AfterTest\r\n    public void result() {\r\n        driver.close();\r\n        System.out.println(&quot;Test Completed Successfully&quot;);\r\n    }\r\n}\r\n```\r\n\r\nSide Note: It is a good practice to follow [Java Naming Conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) when you name your classes, functions and variables ","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null","body":"<p>Please note that you have defined 2 static <code>WebDriver</code> objects:</p>\n<ul>\n<li><code>TestNG_Demo.driver</code></li>\n<li><code>InvoiceCreationSanity.driver</code></li>\n</ul>\n<p>You have just initialized <code>TestNG_Demo.driver</code> but <code>InvoiceCreationSanity</code> class is using <code>InvoiceCreationSanity.driver</code>, which is null.</p>\n<p>You can choose to set your <code>InvoiceCreationSanity.driver</code> with <code>TestNG_Demo.driver</code> so that <code>invoicecreation()</code> can use the initialized <code>driver</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InvoiceCreationSanity {\n    private static WebDriver driver;\n    \n    @BeforeTest\n    public void SetUp() throws InterruptedException {\n        TestNG_Demo Setupobject = new TestNG_Demo();\n        driver = Setupobject.SetUp(); // Set InvoiceCreationSanity.driver here\n        Setupobject.signin();\n            \n    }\n    \n    @Test\n    public void invoicecreation()  {\n        // As driver is set above, now it is initialized and the function should run properly\n        createinvoicepom.createinvoice(driver).click();\n    }\n    \n    public void result() {\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestNG_Demo {\n    \n    public static WebDriver driver;\n\n    \n    // You have to return the WebDriver for this function\n    @BeforeTest\n    public WebDriver SetUp() {\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        return driver;\n    }\n        \n    \n    @Test   \n    public void signin() throws InterruptedException {\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\n        dashloginpagepom.continue_button(driver).click();\n        Thread.sleep(6000);\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.cont(driver).click();\n        Thread.sleep(6000);\n    }\n    \n    @AfterTest\n    public void result() {\n        driver.close();\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>Side Note: It is a good practice to follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java Naming Conventions</a> when you name your classes, functions and variables</p>\n"}],"owner":{"account_id":17791044,"reputation":33,"user_id":12920036,"display_name":"Fayaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682730429,"creation_date":1682699093,"question_id":76131505,"body_markdown":"I&#39;m running the below TestNG code \r\n\r\n    package pages;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.Test;\r\n    import org.openqa.selenium.By;\r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    import pages.createinvoicepom;\r\n    \r\n    \r\n    public class InvoiceCreationSanity {\r\n    \tprivate static WebDriver driver;\r\n    \t\r\n    \t@BeforeTest\r\n    \tpublic void SetUp() throws InterruptedException {\r\n    \t\tTestNG_Demo Setupobject = new TestNG_Demo();\r\n    \t\tSetupobject.SetUp();\r\n    \t\tSetupobject.signin();\r\n    \t\t\t\r\n    \t\t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void invoicecreation()  {\r\n    \t\r\n    \tcreateinvoicepom.createinvoice(driver).click();\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void result() {\r\n    \t\tSystem.out.println(&quot;Test Completed Successfully&quot;);\r\n    \t}\r\n    }\r\n\r\nBut getting the error as Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null\r\n\r\nIn the @BeforeTest I&#39;m calling the methods from another class and that is \r\n\r\n    package pages;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedCondition;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    import org.testng.annotations.AfterTest;\r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import pages.dashloginpagepom;\r\n    import pages.createinvoicepom;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class TestNG_Demo {\r\n    \t\r\n    \tpublic static WebDriver driver;\r\n    \r\n    \t\r\n    \t@BeforeTest\r\n        public void SetUp() {\r\n        \tSystem.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\tdriver.manage().window().maximize();\r\n    \t}\r\n    \t\t\r\n    \t\r\n    \t@Test\t\r\n    \tpublic void signin() throws InterruptedException {\r\n    \t\tdriver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\r\n    \t\tdashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\r\n    \t\tdashloginpagepom.continue_button(driver).click();\r\n    \t\tThread.sleep(6000);\r\n    \t\tdashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.cont(driver).click();\r\n    \t\tThread.sleep(6000);\r\n    \t\t}\r\n    \t\r\n    \t@AfterTest\r\n    \tpublic void result() {\r\n    \t\tdriver.close();\r\n    \tSystem.out.println(&quot;Test Completed Successfully&quot;);\r\n    \t}\r\n    }\r\n\r\nThen in the @Test I&#39;m calling the objects from another class and that is\r\n\r\n    package pages;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    \r\n    public class createinvoicepom {\r\n    \r\n    \tpublic static WebDriver driver = null;\r\n    \t\r\n    \tpublic static WebElement element = null;\r\n    \t\r\n    \tpublic static WebElement createinvoice(WebDriver driver){\r\n    \t\telement = driver.findElement(By.xpath(&quot;//span[@class=&#39;styles_btnContent__7MVVu&#39;]&quot;));\r\n    \t\treturn element;\r\n         \t}\r\n    \t\r\n    \tpublic static WebElement additemfromdatabase(WebDriver driver) {\r\n    \t\telement = driver.findElement(By.xpath(&quot;//span[contains(text(),&#39;Add items from database&#39;)]&quot;));\r\n    \t\treturn element;\r\n    \t}\r\n    \t\r\n    \tpublic static WebElement addbutton(WebDriver driver) {\r\n    \t\t\r\n    \t\telement = driver.findElement(By.xpath(&quot;(//button[@class=&#39;mantine-ActionIcon-transparent mantine-ActionIcon-root event-track mantine-1dw43f4&#39;])[2]&quot;));\r\n    \t\treturn element;\r\n    \t}\r\n    \t\r\n    }\r\n      \r\nWhat mistake I&#39;m doing here?\r\n","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null","body":"<p>I'm running the below TestNG code</p>\n<pre><code>package pages;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\nimport org.openqa.selenium.By;\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport pages.createinvoicepom;\n\n\npublic class InvoiceCreationSanity {\n    private static WebDriver driver;\n    \n    @BeforeTest\n    public void SetUp() throws InterruptedException {\n        TestNG_Demo Setupobject = new TestNG_Demo();\n        Setupobject.SetUp();\n        Setupobject.signin();\n            \n        }\n    \n    @Test\n    public void invoicecreation()  {\n    \n    createinvoicepom.createinvoice(driver).click();\n        \n        \n    }\n    \n    public void result() {\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>But getting the error as Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null</p>\n<p>In the @BeforeTest I'm calling the methods from another class and that is</p>\n<pre><code>package pages;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedCondition;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\n\nimport pages.dashloginpagepom;\nimport pages.createinvoicepom;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class TestNG_Demo {\n    \n    public static WebDriver driver;\n\n    \n    @BeforeTest\n    public void SetUp() {\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n    }\n        \n    \n    @Test   \n    public void signin() throws InterruptedException {\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\n        dashloginpagepom.continue_button(driver).click();\n        Thread.sleep(6000);\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.cont(driver).click();\n        Thread.sleep(6000);\n        }\n    \n    @AfterTest\n    public void result() {\n        driver.close();\n    System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>Then in the @Test I'm calling the objects from another class and that is</p>\n<pre><code>package pages;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\n\npublic class createinvoicepom {\n\n    public static WebDriver driver = null;\n    \n    public static WebElement element = null;\n    \n    public static WebElement createinvoice(WebDriver driver){\n        element = driver.findElement(By.xpath(&quot;//span[@class='styles_btnContent__7MVVu']&quot;));\n        return element;\n        }\n    \n    public static WebElement additemfromdatabase(WebDriver driver) {\n        element = driver.findElement(By.xpath(&quot;//span[contains(text(),'Add items from database')]&quot;));\n        return element;\n    }\n    \n    public static WebElement addbutton(WebDriver driver) {\n        \n        element = driver.findElement(By.xpath(&quot;(//button[@class='mantine-ActionIcon-transparent mantine-ActionIcon-root event-track mantine-1dw43f4'])[2]&quot;));\n        return element;\n    }\n    \n}\n  \n</code></pre>\n<p>What mistake I'm doing here?</p>\n"},{"tags":["java","android-camerax","rgba"],"answers":[{"tags":[],"owner":{"account_id":15381842,"reputation":492,"user_id":11097044,"display_name":"MKD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634811315,"creation_date":1634809450,"answer_id":69659602,"question_id":69211429,"body_markdown":"I think `imageProxy.close();` is too late before analyze returns new ImageProxy. Maybe call `imageProxy.close()` below of `imageProxy.getImage();`.\r\n","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>I think <code>imageProxy.close();</code> is too late before analyze returns new ImageProxy. Maybe call <code>imageProxy.close()</code> below of <code>imageProxy.getImage();</code>.</p>\n"},{"comments":[{"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"score":1,"creation_date":1651557758,"post_id":69659670,"comment_id":127385890,"body_markdown":"According to the documentation you&#39;re only supposed to call `imageProxy.close()`, not `img.close()` as that can mess up the camera provider&#39;s internal state.","body":"According to the documentation you&#39;re only supposed to call <code>imageProxy.close()</code>, not <code>img.close()</code> as that can mess up the camera provider&#39;s internal state."},{"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"score":0,"creation_date":1699272746,"post_id":69659670,"comment_id":136506578,"body_markdown":"Thanks!!  image.close(); fix the issue in my App.  I was taking photos as a bitmap.","body":"Thanks!!  image.close(); fix the issue in my App.  I was taking photos as a bitmap."}],"tags":[],"owner":{"account_id":17424219,"reputation":1083,"user_id":12629252,"display_name":"easy_breezy"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682727209,"creation_date":1634809720,"answer_id":69659670,"question_id":69211429,"body_markdown":"You should close the image right after you got all the needed data from it like this:\r\n\r\n    public void analyze(@NonNull ImageProxy imageProxy) {\r\n        //my code to turn media image into a bitmap\r\n        Image img = imageProxy.getImage();\r\n        Image.Plane[] planes = img.getPlanes();\r\n        ByteBuffer buffer = planes[0].getBuffer();\r\n        int pixelStride = planes[0].getPixelStride();\r\n        int rowStride = planes[0].getRowStride();\r\n        int imgWidth = img.getWidth();\r\n        int imgHeight = img.getHeight();\r\n        //close imageProxy\r\n        imageProxy.close();\r\n        int rowPadding = rowStride - pixelStride * img.getWidth();\r\n        Bitmap bitmap = Bitmap.createBitmap(imgWidth + rowPadding / pixelStride, imgHeight, Bitmap.Config.ARGB_8888);\r\n        bitmap.copyPixelsFromBuffer(buffer);\r\n    }","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>You should close the image right after you got all the needed data from it like this:</p>\n<pre><code>public void analyze(@NonNull ImageProxy imageProxy) {\n    //my code to turn media image into a bitmap\n    Image img = imageProxy.getImage();\n    Image.Plane[] planes = img.getPlanes();\n    ByteBuffer buffer = planes[0].getBuffer();\n    int pixelStride = planes[0].getPixelStride();\n    int rowStride = planes[0].getRowStride();\n    int imgWidth = img.getWidth();\n    int imgHeight = img.getHeight();\n    //close imageProxy\n    imageProxy.close();\n    int rowPadding = rowStride - pixelStride * img.getWidth();\n    Bitmap bitmap = Bitmap.createBitmap(imgWidth + rowPadding / pixelStride, imgHeight, Bitmap.Config.ARGB_8888);\n    bitmap.copyPixelsFromBuffer(buffer);\n}\n</code></pre>\n"}],"owner":{"account_id":18544248,"reputation":161,"user_id":13512017,"display_name":"MickaelD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682727209,"creation_date":1631806958,"question_id":69211429,"body_markdown":"I am trying to implement a very basic CameraX Image Analysis use case where I would send the images received by the analyzer to a tflite classifier model. The model only accepting bitmap as inputs I thought I would set OUTPUT_IMAGE_FORMAT_RGBA_8888 when building the ImageAmalysis. Resulting media images are easier to convert to bitmaps than the standard YUV_420_888 ones. Problem is I get a error : &quot;java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.&quot; Usually it would mean I have forgotten to close the imageProxy but it is not the case so I don&#39;t know what is wrong with my code. See below:\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.graphics.Bitmap;\r\n\r\n    import android.media.Image;\r\n    import android.os.Bundle;\r\n    import android.util.Size;\r\n\r\n    import androidx.camera.core.Camera;\r\n    import androidx.camera.core.CameraSelector;\r\n    import androidx.camera.core.ExperimentalGetImage;\r\n    import androidx.camera.core.ImageAnalysis;\r\n    import androidx.camera.core.ImageProxy;\r\n    import androidx.camera.core.Preview;\r\n    import androidx.camera.lifecycle.ProcessCameraProvider;\r\n    import androidx.camera.view.PreviewView;\r\n    import androidx.core.content.ContextCompat;\r\n    import androidx.lifecycle.LifecycleOwner;\r\n\r\n    import com.google.common.util.concurrent.ListenableFuture;\r\n\r\n    import java.nio.ByteBuffer;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.Executor;\r\n    import java.util.concurrent.Executors;\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\r\n    \r\n        private Executor analysisExecutor;\r\n    \r\n        private PreviewView previewView;\r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            analysisExecutor = Executors.newSingleThreadExecutor();\r\n    \r\n            setContentView(R.layout.activity_main);\r\n            previewView = findViewById(R.id.viewFinder);\r\n    \r\n            cameraProviderFuture = ProcessCameraProvider.getInstance(this);       \r\n    \r\n            cameraProviderFuture.addListener(() -&gt; {\r\n                try {\r\n                    ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\r\n                    cameraProvider.unbindAll();\r\n                    bindUseCases(cameraProvider);\r\n                } catch (ExecutionException | InterruptedException e) {\r\n                    // No errors need to be handled for this Future.\r\n                    // This should never be reached.\r\n                }\r\n            }, ContextCompat.getMainExecutor(this));\r\n    \r\n        }\r\n    \r\n        void bindUseCases(@NonNull ProcessCameraProvider cameraProvider) {\r\n    \r\n            CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                    .requireLensFacing(CameraSelector.LENS_FACING_BACK)\r\n                    .build();\r\n    \r\n            //Preview\r\n            Preview preview = new Preview.Builder()\r\n                    .build();\r\n            preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n    \r\n            //ImageAnalysis\r\n            ImageAnalysis imageAnalysis =\r\n                    new ImageAnalysis.Builder()\r\n                            .setTargetResolution(new Size(1280, 720))\r\n                            .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n                            .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\r\n                            .build();\r\n            imageAnalysis.setAnalyzer(analysisExecutor, new ImageAnalysis.Analyzer() {\r\n                @Override\r\n                @ExperimentalGetImage\r\n                public void analyze(@NonNull ImageProxy imageProxy) {\r\n                    //my code to turn media image into a bitmap\r\n                    Image img = imageProxy.getImage();\r\n                    Image.Plane[] planes = img.getPlanes();\r\n                    ByteBuffer buffer = planes[0].getBuffer();\r\n                    int pixelStride = planes[0].getPixelStride();\r\n                    int rowStride = planes[0].getRowStride();\r\n                    int rowPadding = rowStride - pixelStride * img.getWidth();\r\n                    Bitmap bitmap = Bitmap.createBitmap(img.getWidth()+rowPadding/pixelStride, img.getHeight(), Bitmap.Config.ARGB_8888);\r\n                    bitmap.copyPixelsFromBuffer(buffer);\r\n                    //close img and imageProxy\r\n                    img.close();\r\n                    imageProxy.close();\r\n                }\r\n            });\r\n    \r\n            Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, imageAnalysis, preview);\r\n        }\r\n    \r\n    }\r\n\r\nAnd the complete error message:\r\n\r\n&gt; E/ImageAnalysisAnalyzer: Failed to acquire image.\r\n&gt;     java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.\r\n&gt;         at android.media.ImageReader.acquireNextImage(ImageReader.java:527)\r\n&gt;         at android.media.ImageReader.acquireLatestImage(ImageReader.java:411)\r\n&gt;         at androidx.camera.core.AndroidImageReaderProxy.acquireLatestImage(AndroidImageReaderProxy.java:56)\r\n&gt;         at androidx.camera.core.SafeCloseImageReaderProxy.acquireLatestImage(SafeCloseImageReaderProxy.java:67)\r\n&gt;         at androidx.camera.core.ImageYuvToRgbConverter.convertYUVToRGB(ImageYuvToRgbConverter.java:83)\r\n&gt;         at androidx.camera.core.ImageAnalysisAbstractAnalyzer.analyzeImage(ImageAnalysisAbstractAnalyzer.java:125)\r\n&gt;         at androidx.camera.core.ImageAnalysisNonBlockingAnalyzer.onValidImageAvailable(ImageAnalysisNonBlockingAnalyzer.java:103)\r\n&gt;         at androidx.camera.core.ImageAnalysisAbstractAnalyzer.onImageAvailable(ImageAnalysisAbstractAnalyzer.java:69)\r\n&gt;         at androidx.camera.core.SafeCloseImageReaderProxy.lambda$setOnImageAvailableListener$1$SafeCloseImageReaderProxy(SafeCloseImageReaderProxy.java:170)\r\n&gt;         at androidx.camera.core.-$$Lambda$SafeCloseImageReaderProxy$vlVuGMKvMVqmwbJFm3dTgGgUzu4.onImageAvailable(Unknown\r\n&gt; Source:4)\r\n&gt;         at androidx.camera.core.AndroidImageReaderProxy.lambda$setOnImageAvailableListener$0$AndroidImageReaderProxy(AndroidImageReaderProxy.java:139)\r\n&gt;         at androidx.camera.core.-$$Lambda$AndroidImageReaderProxy$ydxkGVJ03P0ZMYkq3dfSV-hzi3E.run(Unknown\r\n&gt; Source:4)\r\n&gt;         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n&gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n&gt;         at java.lang.Thread.run(Thread.java:923)","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>I am trying to implement a very basic CameraX Image Analysis use case where I would send the images received by the analyzer to a tflite classifier model. The model only accepting bitmap as inputs I thought I would set OUTPUT_IMAGE_FORMAT_RGBA_8888 when building the ImageAmalysis. Resulting media images are easier to convert to bitmaps than the standard YUV_420_888 ones. Problem is I get a error : &quot;java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.&quot; Usually it would mean I have forgotten to close the imageProxy but it is not the case so I don't know what is wrong with my code. See below:</p>\n<pre><code>import androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.graphics.Bitmap;\n\nimport android.media.Image;\nimport android.os.Bundle;\nimport android.util.Size;\n\nimport androidx.camera.core.Camera;\nimport androidx.camera.core.CameraSelector;\nimport androidx.camera.core.ExperimentalGetImage;\nimport androidx.camera.core.ImageAnalysis;\nimport androidx.camera.core.ImageProxy;\nimport androidx.camera.core.Preview;\nimport androidx.camera.lifecycle.ProcessCameraProvider;\nimport androidx.camera.view.PreviewView;\nimport androidx.core.content.ContextCompat;\nimport androidx.lifecycle.LifecycleOwner;\n\nimport com.google.common.util.concurrent.ListenableFuture;\n\nimport java.nio.ByteBuffer;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Executor;\nimport java.util.concurrent.Executors;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\n\n    private Executor analysisExecutor;\n\n    private PreviewView previewView;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        analysisExecutor = Executors.newSingleThreadExecutor();\n\n        setContentView(R.layout.activity_main);\n        previewView = findViewById(R.id.viewFinder);\n\n        cameraProviderFuture = ProcessCameraProvider.getInstance(this);       \n\n        cameraProviderFuture.addListener(() -&gt; {\n            try {\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\n                cameraProvider.unbindAll();\n                bindUseCases(cameraProvider);\n            } catch (ExecutionException | InterruptedException e) {\n                // No errors need to be handled for this Future.\n                // This should never be reached.\n            }\n        }, ContextCompat.getMainExecutor(this));\n\n    }\n\n    void bindUseCases(@NonNull ProcessCameraProvider cameraProvider) {\n\n        CameraSelector cameraSelector = new CameraSelector.Builder()\n                .requireLensFacing(CameraSelector.LENS_FACING_BACK)\n                .build();\n\n        //Preview\n        Preview preview = new Preview.Builder()\n                .build();\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n        //ImageAnalysis\n        ImageAnalysis imageAnalysis =\n                new ImageAnalysis.Builder()\n                        .setTargetResolution(new Size(1280, 720))\n                        .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n                        .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\n                        .build();\n        imageAnalysis.setAnalyzer(analysisExecutor, new ImageAnalysis.Analyzer() {\n            @Override\n            @ExperimentalGetImage\n            public void analyze(@NonNull ImageProxy imageProxy) {\n                //my code to turn media image into a bitmap\n                Image img = imageProxy.getImage();\n                Image.Plane[] planes = img.getPlanes();\n                ByteBuffer buffer = planes[0].getBuffer();\n                int pixelStride = planes[0].getPixelStride();\n                int rowStride = planes[0].getRowStride();\n                int rowPadding = rowStride - pixelStride * img.getWidth();\n                Bitmap bitmap = Bitmap.createBitmap(img.getWidth()+rowPadding/pixelStride, img.getHeight(), Bitmap.Config.ARGB_8888);\n                bitmap.copyPixelsFromBuffer(buffer);\n                //close img and imageProxy\n                img.close();\n                imageProxy.close();\n            }\n        });\n\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, imageAnalysis, preview);\n    }\n\n}\n</code></pre>\n<p>And the complete error message:</p>\n<blockquote>\n<p>E/ImageAnalysisAnalyzer: Failed to acquire image.\njava.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.\nat android.media.ImageReader.acquireNextImage(ImageReader.java:527)\nat android.media.ImageReader.acquireLatestImage(ImageReader.java:411)\nat androidx.camera.core.AndroidImageReaderProxy.acquireLatestImage(AndroidImageReaderProxy.java:56)\nat androidx.camera.core.SafeCloseImageReaderProxy.acquireLatestImage(SafeCloseImageReaderProxy.java:67)\nat androidx.camera.core.ImageYuvToRgbConverter.convertYUVToRGB(ImageYuvToRgbConverter.java:83)\nat androidx.camera.core.ImageAnalysisAbstractAnalyzer.analyzeImage(ImageAnalysisAbstractAnalyzer.java:125)\nat androidx.camera.core.ImageAnalysisNonBlockingAnalyzer.onValidImageAvailable(ImageAnalysisNonBlockingAnalyzer.java:103)\nat androidx.camera.core.ImageAnalysisAbstractAnalyzer.onImageAvailable(ImageAnalysisAbstractAnalyzer.java:69)\nat androidx.camera.core.SafeCloseImageReaderProxy.lambda$setOnImageAvailableListener$1$SafeCloseImageReaderProxy(SafeCloseImageReaderProxy.java:170)\nat androidx.camera.core.-$$Lambda$SafeCloseImageReaderProxy$vlVuGMKvMVqmwbJFm3dTgGgUzu4.onImageAvailable(Unknown\nSource:4)\nat androidx.camera.core.AndroidImageReaderProxy.lambda$setOnImageAvailableListener$0$AndroidImageReaderProxy(AndroidImageReaderProxy.java:139)\nat androidx.camera.core.-$$Lambda$AndroidImageReaderProxy$ydxkGVJ03P0ZMYkq3dfSV-hzi3E.run(Unknown\nSource:4)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\nat java.lang.Thread.run(Thread.java:923)</p>\n</blockquote>\n"},{"tags":["java","android","xml","android-layout","layout-inflater"],"comments":[{"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"score":0,"creation_date":1410353944,"post_id":25749761,"comment_id":40292738,"body_markdown":"What do you mean by mean by &quot;simply&quot; merges it&#39;s child views? The reason you have two different view group is because the LinerLayout which you are extending is already inflating the xml layout. Your code is causing it to be inflated twice.","body":"What do you mean by mean by &quot;simply&quot; merges it&#39;s child views? The reason you have two different view group is because the LinerLayout which you are extending is already inflating the xml layout. Your code is causing it to be inflated twice."},{"owner":{"account_id":4770903,"reputation":344,"user_id":3855685,"accept_rate":50,"display_name":"Martin Majewski"},"score":0,"creation_date":1410354824,"post_id":25749761,"comment_id":40293375,"body_markdown":"How to explain this? The problem with my (the above shown) code is (from my understanding), that the Java class is a ViewGroup (extending LinearLayout), which gets hooked up into the view hierarchy and it inflates the xml file with another ViewGroup (in this case also a LinearLayout - could be also a different VG) and hooks this up to the Java class ViewGroup. So in this case I have two LL nodes.\nBut: I want to be able to have my Java class VG acting as the parent VG in place of the xml&#39;s parent VG. Every sub-component should be attached to the Java&#39;s VG. Do you understand what I mean?","body":"How to explain this? The problem with my (the above shown) code is (from my understanding), that the Java class is a ViewGroup (extending LinearLayout), which gets hooked up into the view hierarchy and it inflates the xml file with another ViewGroup (in this case also a LinearLayout - could be also a different VG) and hooks this up to the Java class ViewGroup. So in this case I have two LL nodes. But: I want to be able to have my Java class VG acting as the parent VG in place of the xml&#39;s parent VG. Every sub-component should be attached to the Java&#39;s VG. Do you understand what I mean?"},{"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"score":0,"creation_date":1410358130,"post_id":25749761,"comment_id":40295723,"body_markdown":"My suggestion below will do exactly that, I will add more information on how to use it.","body":"My suggestion below will do exactly that, I will add more information on how to use it."}],"answers":[{"comments":[{"owner":{"account_id":4770903,"reputation":344,"user_id":3855685,"accept_rate":50,"display_name":"Martin Majewski"},"score":0,"creation_date":1410390346,"post_id":25750238,"comment_id":40312712,"body_markdown":"Thank you very much.\n\nI have provided more informations in my question post.","body":"Thank you very much.  I have provided more informations in my question post."}],"tags":[],"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1410359247,"creation_date":1410282198,"answer_id":25750238,"question_id":25749761,"body_markdown":"You **should not** be inflating the layout in your extended class, instead you should specify the fully qualified class name in your xml file. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;com.package.MyCustomView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Text&quot;\r\n            android:id=&quot;@+id/textView&quot; /&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;64dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Button&quot;\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nHere is an [article][1] with more information\r\n\r\n**EDIT**\r\n\r\nNormal android XML files can be considered shorthand for programmatically creating views. Your XML above instructs android to create view of type LinearLayout with the given params then to adds a child TextView with the given params and so forth. \r\n\r\nThis layout can be used two way.\r\n\r\n 1. Include the layout inside another layout\r\n 2. Inflate the layout (i.e. use the layout inflator) which will return an object of type LinearLayout\r\n\r\nYou can create a class as follows\r\n\r\n    public class MyCustomView extends LinearLayout {\r\n    \r\n      // Note: I am not inflating the layout here\r\n\r\n      public void foo() {\r\n          // Do some foo\r\n      }\r\n\r\n      public void setTitle(String text) {\r\n          findViewById(R.id.textView).setText(text);\r\n      }\r\n      ....\r\n        \r\n    }\r\n\r\nThen using the layout above you can use the following code (say activity/fragment)\r\n    \r\n\r\n\r\n     MyCustomView view = (MyCustomView) LayoutInflater.from(context).inflate(R.layout.my_xml_layout, parent, true);\r\n     view.foo(); // Do some foo\r\n     view.setTitle(&quot;Hello Word!!!&quot;);\r\n\r\n\r\nThis allows you to create your own custom &quot;widgets&quot; that behave much like the built in system widgets (TextView, ListView, etc). It will only have one view group (MyCustomView) and you can add any extra behavior you need. \r\n\r\n  [1]: http://www.vogella.com/tutorials/AndroidCustomViews/article.html","title":"Android: How to avoid doubling ViewGroups with LayoutInflater","body":"<p>You <strong>should not</strong> be inflating the layout in your extended class, instead you should specify the fully qualified class name in your xml file. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;com.package.MyCustomView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Text\"\n        android:id=\"@+id/textView\" /&gt;\n\n    &lt;ImageView\n        android:layout_width=\"64dp\"\n        android:layout_height=\"64dp\"\n        android:id=\"@+id/imageView\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n\n    &lt;Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Button\"\n        android:id=\"@+id/button\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Here is an <a href=\"http://www.vogella.com/tutorials/AndroidCustomViews/article.html\" rel=\"nofollow\">article</a> with more information</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Normal android XML files can be considered shorthand for programmatically creating views. Your XML above instructs android to create view of type LinearLayout with the given params then to adds a child TextView with the given params and so forth. </p>\n\n<p>This layout can be used two way.</p>\n\n<ol>\n<li>Include the layout inside another layout</li>\n<li>Inflate the layout (i.e. use the layout inflator) which will return an object of type LinearLayout</li>\n</ol>\n\n<p>You can create a class as follows</p>\n\n<pre><code>public class MyCustomView extends LinearLayout {\n\n  // Note: I am not inflating the layout here\n\n  public void foo() {\n      // Do some foo\n  }\n\n  public void setTitle(String text) {\n      findViewById(R.id.textView).setText(text);\n  }\n  ....\n\n}\n</code></pre>\n\n<p>Then using the layout above you can use the following code (say activity/fragment)</p>\n\n<pre><code> MyCustomView view = (MyCustomView) LayoutInflater.from(context).inflate(R.layout.my_xml_layout, parent, true);\n view.foo(); // Do some foo\n view.setTitle(\"Hello Word!!!\");\n</code></pre>\n\n<p>This allows you to create your own custom \"widgets\" that behave much like the built in system widgets (TextView, ListView, etc). It will only have one view group (MyCustomView) and you can add any extra behavior you need. </p>\n"}],"owner":{"account_id":4770903,"reputation":344,"user_id":3855685,"accept_rate":50,"display_name":"Martin Majewski"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1064,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":25750238,"answer_count":1,"score":2,"last_activity_date":1682725992,"creation_date":1410280410,"question_id":25749761,"body_markdown":"**I found an solution**\r\n\r\nA big thank you to cyroxis for the constructive criticism and suggestions that led me into the correct direction. At the beginning I thought it isn&#39;t the accepted answer, but after some thinking I am sure it is.\r\n\r\nNevertheless I want to provide some additionale informations that matches my case more precisely.\r\n\r\nYou can find the solution text at the bottom of this post\r\n\r\n**Original question**\r\n\r\nmy first question here. :-) Let&#39;s start:\r\n\r\nI wonder if there is a simple way (through the API, maybe?!) to avoid a unnecessary deep view hierarchy when using LayoutInflater inside a custom class that extends a ViewGroup e.g. LinearLayout.\r\n\r\nFor example\r\n\r\nThis is an Android xml layout file &quot;my_xml_layout.xml&quot;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Text&quot;\r\n            android:id=&quot;@+id/textView&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:layout_width=&quot;64dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Button&quot;\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nAnd now I want to encapsulate the layout into a custom view and control the behavior and interaction of all its components (the TextView, the Button and the ImageView). So I create a class which extends e.g LinearLayout like this one\r\n\r\n    public class MyCustomView extends LinearLayout {\r\n    \r\n        public MyCustomView(Context context) {\r\n            super(context);\r\n            inflateLayout(context);\r\n        }\r\n    \r\n        public MyCustomView(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            inflateLayout(context);\r\n        }\r\n\r\n        public MyCustomView(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            inflateLayout(context);\r\n        }\r\n\r\n        private void inflateLayout(Context context){\r\n            LayoutInflater.from(context).inflate(R.layout.my_xml_layout, this, true);\r\n        }\r\n\r\n    ...\r\n\r\n    }\r\n\r\nThis works fine and now I have all subcomponents accessible inside MyCustomView on the one Hand and can simple add MyCustomView as a View to e.g. an Activity or a Fragment layout.\r\n\r\nBUT: Now I have two LinearLayout nodes in my layout hierarchy. One that comes from the layout xml file and a second that comes from the MyCustomView parent ViewGroup class.\r\n\r\nSo how can I, say, delete one of the redundant ViewGroups (but leave the attribute values of the xml file&#39;s ViewGroup intact).\r\n\r\nThe previous way I always achieved this was to type an extensive number of code that inflates the xml layout into a local variable and extracts every subcomponent from it just to attach it to the java ViewGroup again.\r\n\r\nOr am I doing things totally wrong? Is there another way to program a complex view&#39;s behavior but designing it within the xml editor?\r\n\r\nYour thoughts are very appreciated.\r\n\r\nThank you! \r\n\r\nMartin\r\n\r\n**Update #1**\r\n\r\nThe suggested solution from cyroxis is sadly not the solution. Let me explain my observation (sorry for my bad English and please correct me if I make mistakes - this helps me improve my English skills :-) ):\r\n\r\nUsing the full qualifier name makes (from my experience) only sense when you create a fully customized view in Java code with all the onDraw and onMeasure implementation. Then to include your custom view into a layout hierarchy in xml you have to go this way and use the full qualifier name in the layout file. Having also defined additional attributes within a styleable xml file you can simple configure the custom view without changing a single line in Java code.\r\n\r\nNevertheless I&#39;ve tried to use the full qualifier just to tests if I missed something or if my knowledge lags behind the implemented functionality of the Android APIs. But no, I couldn&#39;t find a configuration where the usage of the full qualifier name helps me out. Even worse, Android Studio is very sensitive to qualifier name changes at this stage of development and crashes very often when the preview renderer is enabled and there are syntax errors or some weird dependency loops. ;-)\r\n\r\nTo be clear: Encapsulating the whole layout structure with the full qualifier name works in general (in terms of not crashing the IDE) but does not &quot;simply&quot; merges it&#39;s child views without another call of the LayoutInflater - what cyroxis wants to avoid.\r\n\r\nSpeaking of &quot;merging&quot;: The merge tag is the closest thing I&#39;ve found that behaves the way I want it to. Encapsulating my layout with merge and inflating it within my custom view class does spare one level of layout hierarchy but at the cost of an intuitive xml layout workflow - because the layout editor has no ViewGroup informations anymore to set the merge&#39;s child views position (but it works at runtime).\r\n\r\nTo make my position clear: I want to be able to use Android&#39;s standard views to compose a more complex view and then orchestrate all the sub-components in Java code to create a fancy new view that I can reuse in other xml layout files, Activities and Fragments. Programming the logic of the composed view within an Activity or a Fragment is no a good choice in my opinion, because it makes the code redundant for any further Activities or Fragments. Creating static methods, or completely loose classes that requires an instance to one, some or all layout components of my complex view hits the idea of easily maintainable code and encapsulated modules.\r\n\r\nI&#39;ll provide here another workaround I&#39;ve been using for a longer time now in a couple of hours. It makes me wonder if I&#39;m one of only few people who are really bothered by this issue?!\r\n\r\n**Update #2**\r\n\r\nI did some further investigations and found something interesting - and maybe it has a lot in common with cyroxis&#39; solution:\r\n\r\n 1. I added the full qualifier name to my composed xml view&#39;s topmost ViewGroup, pointing to my Java Class (like cyroxis said)\r\n 2. I added the xml layout to my Fragment&#39;s layout xml file by using the &quot;include&quot; directive. \r\n\r\n    &lt;include layout=&quot;@layout/my_xml_layout&quot; /&gt;\r\n\r\nThe result is, that the renderer (and my device) is showing the composed view correctly. So I assume that it takes the ViewGroup informations (that it is actually a LinearLayout) from my Java class, because this is the only place where this is noted.\r\n\r\nNow: If this is the case, how can I access the different sub-components?\r\n\r\n    this.getChildAt(...) \r\n\r\ndoes not work for me.\r\n\r\nThe second observation:\r\n\r\nIf I add the xml layout not via the include-directive but directly with\r\n\r\n    &lt;net.martinmajewski.challengeme.views.panels.HintActivationPanel/&gt;\r\n\r\nI get a invisible node without any dimensions.\r\nSo the layout attributes are not available at the Java Class at this point.\r\n\r\nMy Java Class does nothing special so far. It just implements the three constructors, and (like mentioned above) tries to access the sub-components.\r\n\r\n**Solution**\r\n\r\nPrerequisite: \r\n\r\n - You create a layout xml file containing all the (standard Android) views you want to compose into a single complex view. This is the design stage of your view.\r\n - You create a corresponding Java class file that extends a ViewGroup of your choice - preferably the root ViewGroup type of your xml file. This is the class holding the view&#39;s logic for behavior and sub-view orchestration.\r\n - You replace the ViewGroup type name in the xml file with the full qualifier name of your Java class. This links the both files together (direction: XML -&gt; Java class. Say: The xml layout knows about and needs the Java class, but that does not hold true the other way round).\r\n \r\nNow you can (re)use your view in different layouts by including it with the &lt;include&gt; directive. By layouts I literally mean layout xml files. I want to be able to design my UI in a WYSIWYG manner for quick prototyping and reviewing. So I want to enable the preview renderer to use a xml file without having to write a single logic line at this point in time. And there comes the problem. When you place your composed view inside an Activity&#39;s / fragment&#39;s layout it gets completely and &quot;automatically&quot; inflated by the setContentView or within the onCreateView Method. So at this point it is already there and it has called one of the three available public constructors of your Java class. I realized this fact thanks to cyroxis. Cyroxis suggested to inflate the view manually inside an Activity, but that would lead to a redundant inflations. I think cyroxis just forgot to take into account that the custom view is already a part of the parent layout.\r\n\r\nSo now that the layout exists and is correctly hooked to a parent **without doubling** any node everything is perfect, right?\r\n\r\nNo yet.\r\n\r\nYour Java class has no references to its sub-components.\r\nYou can do this like cyroxis, but if you have implemented some interaction of the sub components without any outside influence intended, you have to initialize your sub-views at the beginning (saving the references).\r\nTo do so you have to provide a public initialization method that you call after the inflation process. At this point of time your Java object can finally find the ids of the sub-views and call the findViewById method without getting a null pointer back. This is also true for the getChildAt method.\r\n\r\nMaybe this will help some of you, too.\r\n\r\nBye\r\nMartin\r\n\r\n\r\n","title":"Android: How to avoid doubling ViewGroups with LayoutInflater","body":"<p><strong>I found an solution</strong></p>\n\n<p>A big thank you to cyroxis for the constructive criticism and suggestions that led me into the correct direction. At the beginning I thought it isn't the accepted answer, but after some thinking I am sure it is.</p>\n\n<p>Nevertheless I want to provide some additionale informations that matches my case more precisely.</p>\n\n<p>You can find the solution text at the bottom of this post</p>\n\n<p><strong>Original question</strong></p>\n\n<p>my first question here. :-) Let's start:</p>\n\n<p>I wonder if there is a simple way (through the API, maybe?!) to avoid a unnecessary deep view hierarchy when using LayoutInflater inside a custom class that extends a ViewGroup e.g. LinearLayout.</p>\n\n<p>For example</p>\n\n<p>This is an Android xml layout file \"my_xml_layout.xml\"</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Text\"\n        android:id=\"@+id/textView\" /&gt;\n\n    &lt;ImageView\n        android:layout_width=\"64dp\"\n        android:layout_height=\"64dp\"\n        android:id=\"@+id/imageView\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n\n    &lt;Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Button\"\n        android:id=\"@+id/button\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And now I want to encapsulate the layout into a custom view and control the behavior and interaction of all its components (the TextView, the Button and the ImageView). So I create a class which extends e.g LinearLayout like this one</p>\n\n<pre><code>public class MyCustomView extends LinearLayout {\n\n    public MyCustomView(Context context) {\n        super(context);\n        inflateLayout(context);\n    }\n\n    public MyCustomView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        inflateLayout(context);\n    }\n\n    public MyCustomView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        inflateLayout(context);\n    }\n\n    private void inflateLayout(Context context){\n        LayoutInflater.from(context).inflate(R.layout.my_xml_layout, this, true);\n    }\n\n...\n\n}\n</code></pre>\n\n<p>This works fine and now I have all subcomponents accessible inside MyCustomView on the one Hand and can simple add MyCustomView as a View to e.g. an Activity or a Fragment layout.</p>\n\n<p>BUT: Now I have two LinearLayout nodes in my layout hierarchy. One that comes from the layout xml file and a second that comes from the MyCustomView parent ViewGroup class.</p>\n\n<p>So how can I, say, delete one of the redundant ViewGroups (but leave the attribute values of the xml file's ViewGroup intact).</p>\n\n<p>The previous way I always achieved this was to type an extensive number of code that inflates the xml layout into a local variable and extracts every subcomponent from it just to attach it to the java ViewGroup again.</p>\n\n<p>Or am I doing things totally wrong? Is there another way to program a complex view's behavior but designing it within the xml editor?</p>\n\n<p>Your thoughts are very appreciated.</p>\n\n<p>Thank you! </p>\n\n<p>Martin</p>\n\n<p><strong>Update #1</strong></p>\n\n<p>The suggested solution from cyroxis is sadly not the solution. Let me explain my observation (sorry for my bad English and please correct me if I make mistakes - this helps me improve my English skills :-) ):</p>\n\n<p>Using the full qualifier name makes (from my experience) only sense when you create a fully customized view in Java code with all the onDraw and onMeasure implementation. Then to include your custom view into a layout hierarchy in xml you have to go this way and use the full qualifier name in the layout file. Having also defined additional attributes within a styleable xml file you can simple configure the custom view without changing a single line in Java code.</p>\n\n<p>Nevertheless I've tried to use the full qualifier just to tests if I missed something or if my knowledge lags behind the implemented functionality of the Android APIs. But no, I couldn't find a configuration where the usage of the full qualifier name helps me out. Even worse, Android Studio is very sensitive to qualifier name changes at this stage of development and crashes very often when the preview renderer is enabled and there are syntax errors or some weird dependency loops. ;-)</p>\n\n<p>To be clear: Encapsulating the whole layout structure with the full qualifier name works in general (in terms of not crashing the IDE) but does not \"simply\" merges it's child views without another call of the LayoutInflater - what cyroxis wants to avoid.</p>\n\n<p>Speaking of \"merging\": The merge tag is the closest thing I've found that behaves the way I want it to. Encapsulating my layout with merge and inflating it within my custom view class does spare one level of layout hierarchy but at the cost of an intuitive xml layout workflow - because the layout editor has no ViewGroup informations anymore to set the merge's child views position (but it works at runtime).</p>\n\n<p>To make my position clear: I want to be able to use Android's standard views to compose a more complex view and then orchestrate all the sub-components in Java code to create a fancy new view that I can reuse in other xml layout files, Activities and Fragments. Programming the logic of the composed view within an Activity or a Fragment is no a good choice in my opinion, because it makes the code redundant for any further Activities or Fragments. Creating static methods, or completely loose classes that requires an instance to one, some or all layout components of my complex view hits the idea of easily maintainable code and encapsulated modules.</p>\n\n<p>I'll provide here another workaround I've been using for a longer time now in a couple of hours. It makes me wonder if I'm one of only few people who are really bothered by this issue?!</p>\n\n<p><strong>Update #2</strong></p>\n\n<p>I did some further investigations and found something interesting - and maybe it has a lot in common with cyroxis' solution:</p>\n\n<ol>\n<li>I added the full qualifier name to my composed xml view's topmost ViewGroup, pointing to my Java Class (like cyroxis said)</li>\n<li><p>I added the xml layout to my Fragment's layout xml file by using the \"include\" directive. </p>\n\n<p></p></li>\n</ol>\n\n<p>The result is, that the renderer (and my device) is showing the composed view correctly. So I assume that it takes the ViewGroup informations (that it is actually a LinearLayout) from my Java class, because this is the only place where this is noted.</p>\n\n<p>Now: If this is the case, how can I access the different sub-components?</p>\n\n<pre><code>this.getChildAt(...) \n</code></pre>\n\n<p>does not work for me.</p>\n\n<p>The second observation:</p>\n\n<p>If I add the xml layout not via the include-directive but directly with</p>\n\n<pre><code>&lt;net.martinmajewski.challengeme.views.panels.HintActivationPanel/&gt;\n</code></pre>\n\n<p>I get a invisible node without any dimensions.\nSo the layout attributes are not available at the Java Class at this point.</p>\n\n<p>My Java Class does nothing special so far. It just implements the three constructors, and (like mentioned above) tries to access the sub-components.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Prerequisite: </p>\n\n<ul>\n<li>You create a layout xml file containing all the (standard Android) views you want to compose into a single complex view. This is the design stage of your view.</li>\n<li>You create a corresponding Java class file that extends a ViewGroup of your choice - preferably the root ViewGroup type of your xml file. This is the class holding the view's logic for behavior and sub-view orchestration.</li>\n<li>You replace the ViewGroup type name in the xml file with the full qualifier name of your Java class. This links the both files together (direction: XML -> Java class. Say: The xml layout knows about and needs the Java class, but that does not hold true the other way round).</li>\n</ul>\n\n<p>Now you can (re)use your view in different layouts by including it with the  directive. By layouts I literally mean layout xml files. I want to be able to design my UI in a WYSIWYG manner for quick prototyping and reviewing. So I want to enable the preview renderer to use a xml file without having to write a single logic line at this point in time. And there comes the problem. When you place your composed view inside an Activity's / fragment's layout it gets completely and \"automatically\" inflated by the setContentView or within the onCreateView Method. So at this point it is already there and it has called one of the three available public constructors of your Java class. I realized this fact thanks to cyroxis. Cyroxis suggested to inflate the view manually inside an Activity, but that would lead to a redundant inflations. I think cyroxis just forgot to take into account that the custom view is already a part of the parent layout.</p>\n\n<p>So now that the layout exists and is correctly hooked to a parent <strong>without doubling</strong> any node everything is perfect, right?</p>\n\n<p>No yet.</p>\n\n<p>Your Java class has no references to its sub-components.\nYou can do this like cyroxis, but if you have implemented some interaction of the sub components without any outside influence intended, you have to initialize your sub-views at the beginning (saving the references).\nTo do so you have to provide a public initialization method that you call after the inflation process. At this point of time your Java object can finally find the ids of the sub-views and call the findViewById method without getting a null pointer back. This is also true for the getChildAt method.</p>\n\n<p>Maybe this will help some of you, too.</p>\n\n<p>Bye\nMartin</p>\n"},{"tags":["java","twilio","mms"],"answers":[{"comments":[{"owner":{"account_id":24626922,"reputation":59,"user_id":18526553,"display_name":"Beksultan"},"score":0,"creation_date":1682768403,"post_id":76133847,"comment_id":134269370,"body_markdown":"Thank u for your answer &#129303;. I&#39;ll test it via USA phone numbers.","body":"Thank u for your answer 🤗. I&#39;ll test it via USA phone numbers."}],"tags":[],"owner":{"account_id":2215084,"reputation":6791,"user_id":2919731,"accept_rate":100,"display_name":"Swimburger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682724706,"creation_date":1682724706,"answer_id":76133847,"question_id":76080819,"body_markdown":"The way MMS is sent/received depends on the country you are sending MMS to.\r\n\r\nBased on the country code `+996`, it seems that you&#39;re sending an MMS to Kyrgyzstan. For that Kyrgyzstan, MMS are converted to SMS with embedded URL, [as documented on the Kyrgyzstan SMS guidelines][1].\r\n\r\n\r\n  [1]: https://www.twilio.com/en-us/guidelines/kg/sms","title":"How to send MMS message to phone number using Java and Twilio?","body":"<p>The way MMS is sent/received depends on the country you are sending MMS to.</p>\n<p>Based on the country code <code>+996</code>, it seems that you're sending an MMS to Kyrgyzstan. For that Kyrgyzstan, MMS are converted to SMS with embedded URL, <a href=\"https://www.twilio.com/en-us/guidelines/kg/sms\" rel=\"nofollow noreferrer\">as documented on the Kyrgyzstan SMS guidelines</a>.</p>\n"}],"owner":{"account_id":24626922,"reputation":59,"user_id":18526553,"display_name":"Beksultan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76133847,"answer_count":1,"score":1,"last_activity_date":1682725450,"creation_date":1682182227,"question_id":76080819,"body_markdown":"I wanted to send MMS message (image) to phone number using Java and Twilio. \r\n\r\nHow Can I send MMS message (Images) to phone number?\r\nIs it possible?\r\nPlease let me know if you know better solution or better service &#128591;&#127995;\r\nThank u \r\n\r\n\r\n\r\nI created an account in Twilio and got SID, AUTH_TOKEN, and new phone number.\r\nAdd this dependency below to my project.\r\n`implementation &#39;com.twilio.sdk:twilio:9.2.5&#39;`\r\nand sent simple message to phone number at first using this code below\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n        Message message = Message.creator(\r\n                        new PhoneNumber(&quot;+996*********&quot;),\r\n                        new PhoneNumber(&quot;+16*********&quot;),\r\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\r\n                .create();\r\n\r\n        System.out.println(message.getSid());\r\n    }\r\n```\r\nit works perfectly\r\n\r\nAfter I tried to send MMS message.\r\nI asked from ChatGPT and it gave me this code below\r\n\r\n```\r\npublic static void main(String[] args) throws URISyntaxException {\r\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n        Message message = Message.creator(\r\n                        new PhoneNumber(&quot;+996552157541&quot;),\r\n                        new PhoneNumber(&quot;+16207054562&quot;),\r\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\r\n                .setMediaUrl(\r\n                        List.of(new URI(&quot;https://i.pinimg.com/474x/f5/36/01/f53601133f236d1cb167ac19f05a3d60.jpg&quot;))\r\n                )\r\n                .create();\r\n\r\n        System.out.println(message.getSid());\r\n    }\r\n```\r\nit also works but not as I expected\r\nit sends image link instead of image","title":"How to send MMS message to phone number using Java and Twilio?","body":"<p>I wanted to send MMS message (image) to phone number using Java and Twilio.</p>\n<p>How Can I send MMS message (Images) to phone number?\nIs it possible?\nPlease let me know if you know better solution or better service 🙏🏻\nThank u</p>\n<p>I created an account in Twilio and got SID, AUTH_TOKEN, and new phone number.\nAdd this dependency below to my project.\n<code>implementation 'com.twilio.sdk:twilio:9.2.5'</code>\nand sent simple message to phone number at first using this code below</p>\n<pre><code>    public static void main(String[] args) {\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        Message message = Message.creator(\n                        new PhoneNumber(&quot;+996*********&quot;),\n                        new PhoneNumber(&quot;+16*********&quot;),\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\n                .create();\n\n        System.out.println(message.getSid());\n    }\n</code></pre>\n<p>it works perfectly</p>\n<p>After I tried to send MMS message.\nI asked from ChatGPT and it gave me this code below</p>\n<pre><code>public static void main(String[] args) throws URISyntaxException {\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        Message message = Message.creator(\n                        new PhoneNumber(&quot;+996552157541&quot;),\n                        new PhoneNumber(&quot;+16207054562&quot;),\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\n                .setMediaUrl(\n                        List.of(new URI(&quot;https://i.pinimg.com/474x/f5/36/01/f53601133f236d1cb167ac19f05a3d60.jpg&quot;))\n                )\n                .create();\n\n        System.out.println(message.getSid());\n    }\n</code></pre>\n<p>it also works but not as I expected\nit sends image link instead of image</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":34541,"reputation":33238,"user_id":97688,"accept_rate":76,"display_name":"clamp"},"score":0,"creation_date":1266083088,"post_id":2258031,"comment_id":2218495,"body_markdown":"when you install the jdk there is an option to also install the sources. after that you will find them in the src.zip just as said below","body":"when you install the jdk there is an option to also install the sources. after that you will find them in the src.zip just as said below"},{"owner":{"account_id":1537474,"reputation":3656,"user_id":1433066,"accept_rate":68,"display_name":"Nick Dong"},"score":0,"creation_date":1377758843,"post_id":2258031,"comment_id":27206199,"body_markdown":"where is the source code of tools.jar","body":"where is the source code of tools.jar"}],"answers":[{"comments":[{"owner":{"account_id":87077,"reputation":25974,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"score":0,"creation_date":1266075002,"post_id":2258040,"comment_id":2217937,"body_markdown":"i have jdk1.6. can you tell me the path where it lies.","body":"i have jdk1.6. can you tell me the path where it lies."},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1266075141,"post_id":2258040,"comment_id":2217951,"body_markdown":"It&#39;s in `src.zip` in the JDK installation, like he just said.","body":"It&#39;s in <code>src.zip</code> in the JDK installation, like he just said."},{"owner":{"account_id":87077,"reputation":25974,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"score":0,"creation_date":1266075486,"post_id":2258040,"comment_id":2217972,"body_markdown":"i don&#39;t have it in the installation folder.","body":"i don&#39;t have it in the installation folder."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1266076737,"post_id":2258040,"comment_id":2218083,"body_markdown":"Then you probably downloaded the JRE, not the JDK.  That&#39;s the case if you don&#39;t have a /bin directory.","body":"Then you probably downloaded the JRE, not the JDK.  That&#39;s the case if you don&#39;t have a /bin directory."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":4,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1613678378,"creation_date":1266074854,"answer_id":2258040,"question_id":2258031,"body_markdown":"For old versions of Java with separate JRE and JDK downloads, download the JDK.  The sources for the public classes are in src.zip.","title":"Source code for the Java library classes","body":"<p>For old versions of Java with separate JRE and JDK downloads, download the JDK.  The sources for the public classes are in src.zip.</p>\n"},{"comments":[{"owner":{"account_id":10865671,"reputation":586,"user_id":7989121,"display_name":"brat"},"score":0,"creation_date":1581498859,"post_id":2258163,"comment_id":106450768,"body_markdown":"Could not find SecretKey Interface looking there :-/","body":"Could not find SecretKey Interface looking there :-/"}],"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1266077251,"creation_date":1266076926,"answer_id":2258163,"question_id":2258031,"body_markdown":"Sources are in `src.zip` located in the installation folder:\r\n\r\n- On Windows, the JDK includes `src.zip` [by default][1] if I remember well.\r\n\r\n- On a Linux distro, you may have to install the `sun-java6-source` package.\r\n\r\n- On Mac, you&#39;ll have to download the Developer Documentation. Have a look at [this answer][2].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/technotes/tools/windows/jdkfiles.html\r\n  [2]: https://stackoverflow.com/questions/440441/location-of-1-5-x-jdk-source-code","title":"Source code for the Java library classes","body":"<p>Sources are in <code>src.zip</code> located in the installation folder:</p>\n\n<ul>\n<li><p>On Windows, the JDK includes <code>src.zip</code> <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/windows/jdkfiles.html\" rel=\"nofollow noreferrer\">by default</a> if I remember well.</p></li>\n<li><p>On a Linux distro, you may have to install the <code>sun-java6-source</code> package.</p></li>\n<li><p>On Mac, you'll have to download the Developer Documentation. Have a look at <a href=\"https://stackoverflow.com/questions/440441/location-of-1-5-x-jdk-source-code\">this answer</a>.</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":92864,"reputation":27045,"user_id":254306,"accept_rate":84,"display_name":"Travis Gockel"},"score":1,"creation_date":1320095516,"post_id":2258195,"comment_id":9730876,"body_markdown":"This is a wonderful resource for quickly browsing an implementation.","body":"This is a wonderful resource for quickly browsing an implementation."}],"tags":[],"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1442393830,"creation_date":1266077529,"answer_id":2258195,"question_id":2258031,"body_markdown":"If you only need to have a look at the source/implemenation, i would suggest using \r\n\r\n[Docjar][1]\r\n\r\n\r\n  [1]: http://www.docjar.com/\r\n\r\n**Edit**\r\n\r\nGrepCode is even better\r\n\r\n[GrepCode][1]\r\n\r\n[1]: http://grepcode.com/","title":"Source code for the Java library classes","body":"<p>If you only need to have a look at the source/implemenation, i would suggest using </p>\n\n<p><a href=\"http://grepcode.com/\" rel=\"nofollow noreferrer\">Docjar</a></p>\n\n<p><strong>Edit</strong></p>\n\n<p>GrepCode is even better</p>\n\n<p><a href=\"http://grepcode.com/\" rel=\"nofollow noreferrer\">GrepCode</a></p>\n"},{"tags":[],"owner":{"account_id":91637,"reputation":253,"user_id":251505,"display_name":"Tal "},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1266135046,"creation_date":1266087644,"answer_id":2258662,"question_id":2258031,"body_markdown":"As mention above, most of the source files can be found by downloading the SDK.\r\nHowever for some classes you can find the source code (javax.ssl etc&#39;) for I suggest adding the jad eclipse plugin that will decompile any class without using external site such as Docjar.\r\nJad eclipse info:\r\nhttp://jadclipse.sourceforge.net/wiki/index.php/Main_Page\r\n","title":"Source code for the Java library classes","body":"<p>As mention above, most of the source files can be found by downloading the SDK.\nHowever for some classes you can find the source code (javax.ssl etc') for I suggest adding the jad eclipse plugin that will decompile any class without using external site such as Docjar.\nJad eclipse info:\n<a href=\"http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\" rel=\"nofollow noreferrer\">http://jadclipse.sourceforge.net/wiki/index.php/Main_Page</a></p>\n"},{"comments":[{"owner":{"account_id":159534,"reputation":1599,"user_id":378986,"accept_rate":67,"display_name":"CleanBold"},"score":1,"creation_date":1603103738,"post_id":9204027,"comment_id":113920778,"body_markdown":"Both links are down as of Oct-2020. See answer by Nosrep. The link mentioned in his answer is working fine. http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/","body":"Both links are down as of Oct-2020. See answer by Nosrep. The link mentioned in his answer is working fine. <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes</a>"}],"tags":[],"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1603212821,"creation_date":1328749035,"answer_id":9204027,"question_id":2258031,"body_markdown":"Here&#39;s the [browsable source code for OpenJDK 7][1].\r\n\r\nUpdate: As of June 2018 grepcode seems to be down. Here you can find [an alternative][2].\r\n\r\nUpdate^2: As of October 2020, the two previous links do not work. View it at [OpenJDK](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/) and vote up the [answer by Nosrep](https://stackoverflow.com/a/62687925/631051), which I got it from.\r\n\r\n\r\n  [1]: http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/7-b147/\r\n  [2]:\r\nhttps://www.zgrepcode.com/java/oracle/","title":"Source code for the Java library classes","body":"<p>Here's the <a href=\"http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/7-b147/\" rel=\"nofollow noreferrer\">browsable source code for OpenJDK 7</a>.</p>\n<p>Update: As of June 2018 grepcode seems to be down. Here you can find <a href=\"https://www.zgrepcode.com/java/oracle/\" rel=\"nofollow noreferrer\">an alternative</a>.</p>\n<p>Update^2: As of October 2020, the two previous links do not work. View it at <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\" rel=\"nofollow noreferrer\">OpenJDK</a> and vote up the <a href=\"https://stackoverflow.com/a/62687925/631051\">answer by Nosrep</a>, which I got it from.</p>\n"},{"tags":[],"owner":{"account_id":1413944,"reputation":59688,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359907323,"creation_date":1359907323,"answer_id":14674362,"question_id":2258031,"body_markdown":"There is also grepcode.com (not sure how old this site is, perhaps this answer is an update for new solutions now), sample query:\r\n\r\nhttp://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=","title":"Source code for the Java library classes","body":"<p>There is also grepcode.com (not sure how old this site is, perhaps this answer is an update for new solutions now), sample query:</p>\n\n<p><a href=\"http://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=\" rel=\"nofollow\">http://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=</a></p>\n"},{"tags":[],"owner":{"account_id":15279763,"reputation":49,"user_id":11024520,"display_name":"Dylan Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549476002,"creation_date":1549476002,"answer_id":54559856,"question_id":2258031,"body_markdown":"You can directly browse the code online here for Java : https://zgrepcode.com/java/openjdk/10.0.2/\r\n\r\nIt is a great tool also for browsing most of the open source projects as it gives you internal linking to classes.","title":"Source code for the Java library classes","body":"<p>You can directly browse the code online here for Java : <a href=\"https://zgrepcode.com/java/openjdk/10.0.2/\" rel=\"nofollow noreferrer\">https://zgrepcode.com/java/openjdk/10.0.2/</a></p>\n\n<p>It is a great tool also for browsing most of the open source projects as it gives you internal linking to classes.</p>\n"},{"tags":[],"owner":{"account_id":13165284,"reputation":521,"user_id":9509713,"display_name":"Nosrep"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1682722932,"creation_date":1593656070,"answer_id":62687925,"question_id":2258031,"body_markdown":"As almost all the suggestions seem to be either grepcode or zgrepcode which are both down, I found one from OpenJDK here: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\r\n\r\nEdit: a more complete version of all OpenJDK projects and JDK 6-15 can be found here: https://hg.openjdk.java.net/\r\n\r\nEdit Edit: Apparently there&#39;s a jdk Github repository now, dunno if it was created after this answer or I just couldn&#39;t find it; either way: https://github.com/openjdk/jdk\r\n\r\nHarder to find classes than in the mercurial repository for me at least, but for example here is the ArrayList file: https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java\r\n\r\nOr, yknow just use search","title":"Source code for the Java library classes","body":"<p>As almost all the suggestions seem to be either grepcode or zgrepcode which are both down, I found one from OpenJDK here: <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\" rel=\"nofollow noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/</a></p>\n<p>Edit: a more complete version of all OpenJDK projects and JDK 6-15 can be found here: <a href=\"https://hg.openjdk.java.net/\" rel=\"nofollow noreferrer\">https://hg.openjdk.java.net/</a></p>\n<p>Edit Edit: Apparently there's a jdk Github repository now, dunno if it was created after this answer or I just couldn't find it; either way: <a href=\"https://github.com/openjdk/jdk\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk</a></p>\n<p>Harder to find classes than in the mercurial repository for me at least, but for example here is the ArrayList file: <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java</a></p>\n<p>Or, yknow just use search</p>\n"}],"owner":{"account_id":87077,"reputation":25974,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34363,"favorite_count":0,"down_vote_count":1,"up_vote_count":36,"accepted_answer_id":2258040,"answer_count":8,"score":35,"last_activity_date":1682722932,"creation_date":1266074728,"question_id":2258031,"body_markdown":"Where can I find the source code for the Java library classes? I mean classes in `rt.jar`. \r\n\r\nPlatform: Windows.","title":"Source code for the Java library classes","body":"<p>Where can I find the source code for the Java library classes? I mean classes in <code>rt.jar</code>. </p>\n\n<p>Platform: Windows.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1682712512,"post_id":76132226,"comment_id":134264409,"body_markdown":"*B: Tried but did not work * - that is the approach I use. If it didn&#39;t work then you didn&#39;t implement it correctly. Post a proper [mre] demonstrating the problem. For the MRE all you need is a frame with a scroll pane and your panels. Create a button to add a new row of data. Once the MRE works and you understand the concept, then you change your real code. If you can&#39;t get the MRE to work, then you have simple code to post.","body":"*B: Tried but did not work * - that is the approach I use. If it didn&#39;t work then you didn&#39;t implement it correctly. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. For the MRE all you need is a frame with a scroll pane and your panels. Create a button to add a new row of data. Once the MRE works and you understand the concept, then you change your real code. If you can&#39;t get the MRE to work, then you have simple code to post."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1682712761,"post_id":76132226,"comment_id":134264442,"body_markdown":"Maybe this will help: https://stackoverflow.com/a/75674828/131872","body":"Maybe this will help: <a href=\"https://stackoverflow.com/a/75674828/131872\">stackoverflow.com/a/75674828/131872</a>"}],"answers":[{"comments":[{"owner":{"account_id":20190529,"reputation":100,"user_id":14808851,"display_name":"Nex"},"score":0,"creation_date":1682711208,"post_id":76132291,"comment_id":134264159,"body_markdown":"A: I dont want to use JTable as the only allow sectionListener that would not work here, just like JList\nB: Tried  but did not work\nC: I just cannot get it display the items vertically\n\nDo you have any suggestions how to make it vertical?","body":"A: I dont want to use JTable as the only allow sectionListener that would not work here, just like JList B: Tried  but did not work C: I just cannot get it display the items vertically  Do you have any suggestions how to make it vertical?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1682714842,"post_id":76132291,"comment_id":134264794,"body_markdown":"@KrisztianNagy: for example...","body":"@KrisztianNagy: for example..."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682720408,"post_id":76132291,"comment_id":134265581,"body_markdown":"@KrisztianNagy *&quot;JTable as the only allow sectionListener that would not work here&quot;* - in what ways would it not work - looking at the UI, it would seem like a perfect fit (see [this](https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138) for reasons why I&#39;d prefer it (as a user) over a wall of buttons)","body":"@KrisztianNagy <i>&quot;JTable as the only allow sectionListener that would not work here&quot;</i> - in what ways would it not work - looking at the UI, it would seem like a perfect fit (see <a href=\"https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138\">this</a> for reasons why I&#39;d prefer it (as a user) over a wall of buttons)"},{"owner":{"account_id":20190529,"reputation":100,"user_id":14808851,"display_name":"Nex"},"score":0,"creation_date":1682722839,"post_id":76132291,"comment_id":134265824,"body_markdown":"Scroll -&gt; Border -&gt; Grid layout worked from your suggestion @HovercraftFullOfEels . Although I have no idea why....\nUpdated the question above so you can see the result.","body":"Scroll -&gt; Border -&gt; Grid layout worked from your suggestion @HovercraftFullOfEels . Although I have no idea why.... Updated the question above so you can see the result."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1682714623,"creation_date":1682706070,"answer_id":76132291,"question_id":76132226,"body_markdown":"Possible solutions:\r\n\r\n* Use a JTable for tabular data and display\r\n\r\nOr \r\n* Place the JPanel rows into a JPanel that uses a GridLayout\r\n* And place that GridLayout-using JPanel into the BorderLayout.PAGE_START (also known as BorderLayout.NORTH) position of a BorderLayout-using JPanel\r\n* Then place *that* JPanel into the JScrollPane. The rows will all be sized their preferred heights.\r\n\r\nOr\r\n* Use a GridBagLayout, but use a GridBagConstraints.weighty of 0 so that it does not expand.\r\n\r\n_________________________\r\nFor example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class GridPanelExample extends JPanel {\r\n\tprivate static final int PREF_W = 500;\r\n\tprivate static final int PREF_H = 300;\r\n\tprivate JPanel gridPanel = new JPanel(new GridLayout(0, 1)); // 1 column, variable number of rows\r\n\tprivate JPanel BorderLayoutPanel = new JPanel(new BorderLayout());\r\n\tprivate JScrollPane scrollPane = new JScrollPane(BorderLayoutPanel);\r\n\tprivate int index = 0;\r\n\r\n\tpublic GridPanelExample() {\r\n\t\tBorderLayoutPanel.add(gridPanel, BorderLayout.PAGE_START);\r\n\t\tsetLayout(new BorderLayout());\r\n\r\n\t\tfor (index = 0; index &lt; 3; index++) {\r\n\t\t\tStudentRow row = new StudentRow(index);\r\n\t\t\tgridPanel.add(row);\r\n\t\t}\r\n\r\n\t\tJButton addStudentButton = new JButton(&quot;Add Student&quot;);\r\n\t\taddStudentButton.addActionListener(e -&gt; {\r\n\t\t\tStudentRow row = new StudentRow(index++);\r\n\t\t\tgridPanel.add(row);\r\n\t\t\tgridPanel.revalidate();\r\n\t\t\tgridPanel.repaint();\r\n\t\t});\r\n\t\tJPanel buttonPanel = new JPanel();\r\n\t\tbuttonPanel.add(addStudentButton);\r\n\r\n\t\tscrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n\t\tadd(scrollPane, BorderLayout.CENTER);\r\n\t\tadd(buttonPanel, BorderLayout.PAGE_END);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension getPreferredSize() {\r\n\t\tDimension superSize = super.getPreferredSize();\r\n\t\tint width = Math.max(superSize.width, PREF_W);\r\n\t\treturn new Dimension(width, PREF_H);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSwingUtilities.invokeLater(() -&gt; {\r\n\t\t\tGridPanelExample mainPanel = new GridPanelExample();\r\n\t\t\tJFrame frame = new JFrame(&quot;GridPanelExample&quot;);\r\n\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tframe.getContentPane().add(mainPanel);\r\n\t\t\tframe.pack();\r\n\t\t\tframe.setLocationByPlatform(true);\r\n\t\t\tframe.setVisible(true);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass StudentRow extends JPanel {\r\n\r\n\tpublic int index;\r\n\tprivate JLabel nameLabel;\r\n\tprivate JLabel ageLabel;\r\n\tprivate JButton editButton;\r\n\tprivate JButton deleteButton;\r\n\r\n\tpublic StudentRow(int index) {\r\n\t\tthis.index = index;\r\n\t\tsetLayout(new GridBagLayout());\r\n\r\n\t\tString nameText = String.format(&quot;name: %03d&quot;, index);\r\n\t\tnameLabel = new JLabel(nameText);\r\n\t\tageLabel = new JLabel();\r\n\t\tageLabel.setText(Integer.toString(20));\r\n\t\teditButton = new JButton(&quot;Edit&quot;);\r\n\t\tdeleteButton = new JButton(&quot;Delete&quot;);\r\n\t\tdeleteButton.addActionListener(e -&gt; {\r\n\t\t\tContainer parent = getParent();\r\n\t\t\tparent.remove(this);\r\n\t\t\tparent.revalidate();\r\n\t\t\tparent.repaint();\r\n\t\t});\r\n\r\n\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\tgbc.gridx = 0;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\tgbc.weightx = 1;\r\n\t\tgbc.weighty = 0;\r\n\t\tadd(nameLabel, gbc);\r\n\r\n\t\tgbc.gridx = 1;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.WEST;\r\n\t\tadd(ageLabel, gbc);\r\n\r\n\t\tgbc.gridx = 2;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.EAST;\r\n\t\tadd(editButton, gbc);\r\n\r\n\t\tgbc.gridx = 3;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.EAST;\r\n\t\tadd(deleteButton, gbc);\r\n\r\n\t\tint gap = 3;\r\n\t\tsetBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gqIje.gif","title":"Stop even space dividing vertically","body":"<p>Possible solutions:</p>\n<ul>\n<li>Use a JTable for tabular data and display</li>\n</ul>\n<p>Or</p>\n<ul>\n<li>Place the JPanel rows into a JPanel that uses a GridLayout</li>\n<li>And place that GridLayout-using JPanel into the BorderLayout.PAGE_START (also known as BorderLayout.NORTH) position of a BorderLayout-using JPanel</li>\n<li>Then place <em>that</em> JPanel into the JScrollPane. The rows will all be sized their preferred heights.</li>\n</ul>\n<p>Or</p>\n<ul>\n<li>Use a GridBagLayout, but use a GridBagConstraints.weighty of 0 so that it does not expand.</li>\n</ul>\n<hr />\n<p>For example:</p>\n<p><a href=\"https://i.stack.imgur.com/gqIje.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gqIje.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\npublic class GridPanelExample extends JPanel {\n    private static final int PREF_W = 500;\n    private static final int PREF_H = 300;\n    private JPanel gridPanel = new JPanel(new GridLayout(0, 1)); // 1 column, variable number of rows\n    private JPanel BorderLayoutPanel = new JPanel(new BorderLayout());\n    private JScrollPane scrollPane = new JScrollPane(BorderLayoutPanel);\n    private int index = 0;\n\n    public GridPanelExample() {\n        BorderLayoutPanel.add(gridPanel, BorderLayout.PAGE_START);\n        setLayout(new BorderLayout());\n\n        for (index = 0; index &lt; 3; index++) {\n            StudentRow row = new StudentRow(index);\n            gridPanel.add(row);\n        }\n\n        JButton addStudentButton = new JButton(&quot;Add Student&quot;);\n        addStudentButton.addActionListener(e -&gt; {\n            StudentRow row = new StudentRow(index++);\n            gridPanel.add(row);\n            gridPanel.revalidate();\n            gridPanel.repaint();\n        });\n        JPanel buttonPanel = new JPanel();\n        buttonPanel.add(addStudentButton);\n\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        add(scrollPane, BorderLayout.CENTER);\n        add(buttonPanel, BorderLayout.PAGE_END);\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        Dimension superSize = super.getPreferredSize();\n        int width = Math.max(superSize.width, PREF_W);\n        return new Dimension(width, PREF_H);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            GridPanelExample mainPanel = new GridPanelExample();\n            JFrame frame = new JFrame(&quot;GridPanelExample&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.getContentPane().add(mainPanel);\n            frame.pack();\n            frame.setLocationByPlatform(true);\n            frame.setVisible(true);\n        });\n    }\n}\n\nclass StudentRow extends JPanel {\n\n    public int index;\n    private JLabel nameLabel;\n    private JLabel ageLabel;\n    private JButton editButton;\n    private JButton deleteButton;\n\n    public StudentRow(int index) {\n        this.index = index;\n        setLayout(new GridBagLayout());\n\n        String nameText = String.format(&quot;name: %03d&quot;, index);\n        nameLabel = new JLabel(nameText);\n        ageLabel = new JLabel();\n        ageLabel.setText(Integer.toString(20));\n        editButton = new JButton(&quot;Edit&quot;);\n        deleteButton = new JButton(&quot;Delete&quot;);\n        deleteButton.addActionListener(e -&gt; {\n            Container parent = getParent();\n            parent.remove(this);\n            parent.revalidate();\n            parent.repaint();\n        });\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.weightx = 1;\n        gbc.weighty = 0;\n        add(nameLabel, gbc);\n\n        gbc.gridx = 1;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(ageLabel, gbc);\n\n        gbc.gridx = 2;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(editButton, gbc);\n\n        gbc.gridx = 3;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(deleteButton, gbc);\n\n        int gap = 3;\n        setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20190529,"reputation":100,"user_id":14808851,"display_name":"Nex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76132291,"answer_count":1,"score":0,"last_activity_date":1682722661,"creation_date":1682705538,"question_id":76132226,"body_markdown":"First of all I am new to JAVA, started yesterday...so be gentle haha.\r\n\r\nIn short I am adding a list of JPanels to a JPanel that is set as a viewport of a JScrollPane. \r\n\r\nThe issue is that when I add an item it divides the remaning space in the JPanel evenly between my rows... \r\nHere is how it looks with 2 items added:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd here is how it looks with 3 items added:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAfter reachnig 10 -ish items the list starts to expand and becomes scrollable.\r\nBeen searching the internet for a couple of hours now with no luck... any suggestions are welcome!\r\n\r\n\r\nHere is the source code if it helps:\r\n\r\n```\r\npublic class StudentListView extends JScrollPane {\r\n\r\n    private  JPanel myList;\r\n    private  EventManager events;\r\n    private  List&lt;StudentModel&gt; students;\r\n    private  StudentRow listRow;\r\n\r\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\r\n        this.students = students;\r\n        this.events = events;\r\n\r\n        myList = new JPanel();\r\n        myList.setLayout(new BoxLayout(myList, BoxLayout.Y_AXIS));\r\n\r\n        for (int i = 0; i &lt; this.students.size(); i++) {     \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            listRow.setAlignmentY(Component.TOP_ALIGNMENT);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        setViewportView(myList);\r\n    }\r\n\r\n    public void updateView(List&lt;StudentModel&gt; students) {\r\n        myList.removeAll();\r\n\r\n        this.students = students;\r\n        for (int i = 0; i &lt; this.students.size(); i++) { \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        myList.revalidate();\r\n        setViewportView(myList);\r\n    }\r\n}\r\n```\r\n\r\nAnd the ROWS:\r\n\r\n```\r\npublic class StudentRow extends JPanel {\r\n    \r\n    public int index;\r\n    private JLabel nameLabel;\r\n    private JLabel ageLabel;\r\n    private JButton editButton;\r\n    private JButton deleteButton;\r\n\r\n    public StudentRow(StudentModel student, EventManager events, int index) {\r\n        this.index = index;\r\n\r\n        setPreferredSize(new Dimension(400, 30));\r\n\r\n        nameLabel = new JLabel();\r\n        nameLabel.setText(student.getName());\r\n        ageLabel = new JLabel();\r\n        ageLabel.setText(Integer.toString(student.getAge()));\r\n        editButton = new JButton(&quot;Edit&quot;);\r\n        deleteButton = new JButton(&quot;Delete&quot;);\r\n        \r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        gbc.gridx = 0;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.WEST;\r\n        add(nameLabel, gbc);\r\n        \r\n        gbc.gridx = 1;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.WEST;\r\n        add(ageLabel, gbc);\r\n        \r\n        gbc.gridx = 2;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.EAST;\r\n        add(editButton, gbc);\r\n        \r\n        gbc.gridx = 3;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.EAST;\r\n        add(deleteButton, gbc);\r\n\r\n        // Create component action listeners\r\n        deleteButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                events.notify(&quot;removeStudent&quot;, student);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nSOLUTION:\r\n\r\n```\r\npublic class StudentListView extends JScrollPane {\r\n\r\n    private  JPanel myList;\r\n    private  EventManager events;\r\n    private  List&lt;StudentModel&gt; students;\r\n    private  StudentRow listRow;\r\n    private  JPanel BorderLayoutPanel;\r\n\r\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\r\n        this.students = students;\r\n        this.events = events;\r\n\r\n        myList = new JPanel();\r\n        myList.setLayout(new GridLayout(0,1));\r\n\r\n        BorderLayoutPanel = new JPanel(new BorderLayout());\r\n        BorderLayoutPanel.add(myList, BorderLayout.PAGE_START);\r\n\r\n        for (int i = 0; i &lt; this.students.size(); i++) {  \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        setViewportView(BorderLayoutPanel);\r\n    }\r\n\r\n    public void updateView(List&lt;StudentModel&gt; students) {\r\n        myList.removeAll();\r\n\r\n        this.students = students;\r\n        for (int i = 0; i &lt; this.students.size(); i++) { \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        myList.revalidate();\r\n        setViewportView(BorderLayoutPanel);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/PIpni.png\r\n  [2]: https://i.stack.imgur.com/Usj5H.png","title":"Stop even space dividing vertically","body":"<p>First of all I am new to JAVA, started yesterday...so be gentle haha.</p>\n<p>In short I am adding a list of JPanels to a JPanel that is set as a viewport of a JScrollPane.</p>\n<p>The issue is that when I add an item it divides the remaning space in the JPanel evenly between my rows...\nHere is how it looks with 2 items added:</p>\n<p><a href=\"https://i.stack.imgur.com/PIpni.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PIpni.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is how it looks with 3 items added:</p>\n<p><a href=\"https://i.stack.imgur.com/Usj5H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Usj5H.png\" alt=\"enter image description here\" /></a></p>\n<p>After reachnig 10 -ish items the list starts to expand and becomes scrollable.\nBeen searching the internet for a couple of hours now with no luck... any suggestions are welcome!</p>\n<p>Here is the source code if it helps:</p>\n<pre><code>public class StudentListView extends JScrollPane {\n\n    private  JPanel myList;\n    private  EventManager events;\n    private  List&lt;StudentModel&gt; students;\n    private  StudentRow listRow;\n\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\n        this.students = students;\n        this.events = events;\n\n        myList = new JPanel();\n        myList.setLayout(new BoxLayout(myList, BoxLayout.Y_AXIS));\n\n        for (int i = 0; i &lt; this.students.size(); i++) {     \n            listRow = new StudentRow(students.get(i), events, i);\n            listRow.setAlignmentY(Component.TOP_ALIGNMENT);\n            myList.add(listRow);\n        }\n\n        setViewportView(myList);\n    }\n\n    public void updateView(List&lt;StudentModel&gt; students) {\n        myList.removeAll();\n\n        this.students = students;\n        for (int i = 0; i &lt; this.students.size(); i++) { \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        myList.revalidate();\n        setViewportView(myList);\n    }\n}\n</code></pre>\n<p>And the ROWS:</p>\n<pre><code>public class StudentRow extends JPanel {\n    \n    public int index;\n    private JLabel nameLabel;\n    private JLabel ageLabel;\n    private JButton editButton;\n    private JButton deleteButton;\n\n    public StudentRow(StudentModel student, EventManager events, int index) {\n        this.index = index;\n\n        setPreferredSize(new Dimension(400, 30));\n\n        nameLabel = new JLabel();\n        nameLabel.setText(student.getName());\n        ageLabel = new JLabel();\n        ageLabel.setText(Integer.toString(student.getAge()));\n        editButton = new JButton(&quot;Edit&quot;);\n        deleteButton = new JButton(&quot;Delete&quot;);\n        \n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(nameLabel, gbc);\n        \n        gbc.gridx = 1;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(ageLabel, gbc);\n        \n        gbc.gridx = 2;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(editButton, gbc);\n        \n        gbc.gridx = 3;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(deleteButton, gbc);\n\n        // Create component action listeners\n        deleteButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                events.notify(&quot;removeStudent&quot;, student);\n            }\n        });\n    }\n}\n</code></pre>\n<p>SOLUTION:</p>\n<pre><code>public class StudentListView extends JScrollPane {\n\n    private  JPanel myList;\n    private  EventManager events;\n    private  List&lt;StudentModel&gt; students;\n    private  StudentRow listRow;\n    private  JPanel BorderLayoutPanel;\n\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\n        this.students = students;\n        this.events = events;\n\n        myList = new JPanel();\n        myList.setLayout(new GridLayout(0,1));\n\n        BorderLayoutPanel = new JPanel(new BorderLayout());\n        BorderLayoutPanel.add(myList, BorderLayout.PAGE_START);\n\n        for (int i = 0; i &lt; this.students.size(); i++) {  \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        setViewportView(BorderLayoutPanel);\n    }\n\n    public void updateView(List&lt;StudentModel&gt; students) {\n        myList.removeAll();\n\n        this.students = students;\n        for (int i = 0; i &lt; this.students.size(); i++) { \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        myList.revalidate();\n        setViewportView(BorderLayoutPanel);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","logging","log4j"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682721480,"creation_date":1682721480,"answer_id":76133674,"question_id":76132925,"body_markdown":"Filters can have three results:\r\n * `ACCEPT` - accepts the message,\r\n * `DENY`   - drops the message,\r\n * `NEUTRAL` - continues to the **next** filter.\r\n\r\nIn your configuration:\r\n\r\n```lang-xml\r\n&lt;Filters&gt;\r\n    &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n&lt;/Filters&gt;\r\n```\r\n\r\nthe first filter accepts all messages at least as specific as `INFO`. The second filter is never used. What you want is:\r\n\r\n```lang-xml\r\n&lt;Filters&gt;\r\n    &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;NEUTRAL&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n&lt;/Filters&gt;\r\n```\r\n\r\n**Remark**: since version 2.13.0 there is a `LevelMatchFilter` that you can use instead of the entire `&lt;Filters&gt;` component:\r\n\r\n```lang-xml\r\n&lt;LevelMatchFilter level=&quot;INFO&quot;/&gt;\r\n```\r\n\r\nAlternatively you can use a [`RoutingAppender`](https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender) to define a single appender without filters, e.g.:\r\n\r\n```lang-xml\r\n&lt;Routing name=&quot;FILE&quot;&gt;\r\n  &lt;Routes pattern=&quot;$${event:Level}&quot;&gt;\r\n    &lt;Route&gt;\r\n      &lt;RollingFile name=&quot;${event:Level}File&quot;\r\n                   fileName=&quot;${LOG_DIRECTORY}/${lower:${event:Level}}.log&quot;\r\n                   filePattern=&quot;${LOG_DIRECTORY}/logs/${lower:${event:Level}}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n        &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n        &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n        &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n      &lt;/RollingFile&gt;\r\n    &lt;/Route&gt;\r\n  &lt;/Routes&gt;\r\n&lt;/Routing&gt;\r\n```\r\n```","title":"Log4j2 configuration (Filters)","body":"<p>Filters can have three results:</p>\n<ul>\n<li><code>ACCEPT</code> - accepts the message,</li>\n<li><code>DENY</code>   - drops the message,</li>\n<li><code>NEUTRAL</code> - continues to the <strong>next</strong> filter.</li>\n</ul>\n<p>In your configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Filters&gt;\n    &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n&lt;/Filters&gt;\n</code></pre>\n<p>the first filter accepts all messages at least as specific as <code>INFO</code>. The second filter is never used. What you want is:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Filters&gt;\n    &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;NEUTRAL&quot; onMismatch=&quot;DENY&quot;/&gt;\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\n&lt;/Filters&gt;\n</code></pre>\n<p><strong>Remark</strong>: since version 2.13.0 there is a <code>LevelMatchFilter</code> that you can use instead of the entire <code>&lt;Filters&gt;</code> component:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;LevelMatchFilter level=&quot;INFO&quot;/&gt;\n</code></pre>\n<p>Alternatively you can use a <a href=\"https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender\" rel=\"nofollow noreferrer\"><code>RoutingAppender</code></a> to define a single appender without filters, e.g.:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Routing name=&quot;FILE&quot;&gt;\n  &lt;Routes pattern=&quot;$${event:Level}&quot;&gt;\n    &lt;Route&gt;\n      &lt;RollingFile name=&quot;${event:Level}File&quot;\n                   fileName=&quot;${LOG_DIRECTORY}/${lower:${event:Level}}.log&quot;\n                   filePattern=&quot;${LOG_DIRECTORY}/logs/${lower:${event:Level}}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n        &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n        &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n        &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n      &lt;/RollingFile&gt;\n    &lt;/Route&gt;\n  &lt;/Routes&gt;\n&lt;/Routing&gt;\n</code></pre>\n<pre><code></code></pre>\n"}],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76133674,"answer_count":1,"score":1,"last_activity_date":1682721480,"creation_date":1682712035,"question_id":76132925,"body_markdown":"I want my *warnings*, *errors*, and *info* to be saved in separate files. All 2 files are created automatically, however in the *info.log*, I see *warnings* as well. How can I fix **log4j2.xml**, so all three files, that is ***warn.log***, **info.log**, and **error.log** contain **ONLY** warnings, info, and errors respectively?&lt;br&gt;&lt;br&gt;\r\n\r\nHere is the **log4j2.xml** implementation:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;PID&quot;&gt;%pid&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_DIRECTORY&quot;&gt;/media/edoyou/HDD/Kanan/k2s-project/k2sbeauty/logs&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%5p&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\r\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}}}{faint} %clr{${LOG_LEVEL_PATTERN}}\r\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint}\r\n            %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\r\n        &lt;/Property&gt;\r\n        &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t]\r\n            %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\r\n        &lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:CONSOLE_LOG_PATTERN}&quot;/&gt;\r\n        &lt;/Console&gt;\r\n        &lt;RollingFile name=&quot;InfoFile&quot; fileName=&quot;${LOG_DIRECTORY}/info.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/info-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;RollingFile name=&quot;ErrorFile&quot; fileName=&quot;${LOG_DIRECTORY}/error.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/error-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;RollingFile name=&quot;WarnFile&quot; fileName=&quot;${LOG_DIRECTORY}/warn.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/warn-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n\r\n    &lt;/Appenders&gt;\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;InfoFile&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;WarnFile&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;ErrorFile&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n\r\n-------------------------------\r\n","title":"Log4j2 configuration (Filters)","body":"<p>I want my <em>warnings</em>, <em>errors</em>, and <em>info</em> to be saved in separate files. All 2 files are created automatically, however in the <em>info.log</em>, I see <em>warnings</em> as well. How can I fix <strong>log4j2.xml</strong>, so all three files, that is <em><strong>warn.log</strong></em>, <strong>info.log</strong>, and <strong>error.log</strong> contain <strong>ONLY</strong> warnings, info, and errors respectively?<br><br></p>\n<p>Here is the <strong>log4j2.xml</strong> implementation:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Properties&gt;\n        &lt;Property name=&quot;PID&quot;&gt;%pid&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_DIRECTORY&quot;&gt;/media/edoyou/HDD/Kanan/k2s-project/k2sbeauty/logs&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%5p&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}}}{faint} %clr{${LOG_LEVEL_PATTERN}}\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint}\n            %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\n        &lt;/Property&gt;\n        &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t]\n            %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\n        &lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:CONSOLE_LOG_PATTERN}&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;RollingFile name=&quot;InfoFile&quot; fileName=&quot;${LOG_DIRECTORY}/info.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/info-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;ErrorFile&quot; fileName=&quot;${LOG_DIRECTORY}/error.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/error-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n            &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;WarnFile&quot; fileName=&quot;${LOG_DIRECTORY}/warn.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/warn-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n            &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n            &lt;AppenderRef ref=&quot;InfoFile&quot;/&gt;\n            &lt;AppenderRef ref=&quot;WarnFile&quot;/&gt;\n            &lt;AppenderRef ref=&quot;ErrorFile&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<hr />\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1682722464,"post_id":76133630,"comment_id":134265787,"body_markdown":"IF you are using SQL database, have you tried using a `nativeQuery`?","body":"IF you are using SQL database, have you tried using a <code>nativeQuery</code>?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1682723138,"post_id":76133630,"comment_id":134265852,"body_markdown":"you already have the data of your `personaBefore` in your `update` method, so why don&#39;t you pass it as second parameter to your `checkChanges` method? You even could make a copy of it. Or you detach the instance from the database, so it doesn&#39;t get updates from there. (Fetch it, detach it, keep it for further reference)","body":"you already have the data of your <code>personaBefore</code> in your <code>update</code> method, so why don&#39;t you pass it as second parameter to your <code>checkChanges</code> method? You even could make a copy of it. Or you detach the instance from the database, so it doesn&#39;t get updates from there. (Fetch it, detach it, keep it for further reference)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682723238,"post_id":76133630,"comment_id":134265863,"body_markdown":"You have to think of the in-memory representation of DB attached objects as a cache of the DB. Never try to work around this as long as the object is attached to the DB! It will bring you more trouble than it will help.","body":"You have to think of the in-memory representation of DB attached objects as a cache of the DB. Never try to work around this as long as the object is attached to the DB! It will bring you more trouble than it will help."},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682723352,"post_id":76133630,"comment_id":134265882,"body_markdown":"@JettoMart&#237;nez yes, It doesn&#39;t work, it returns the value with the copied attributes of changedPersona","body":"@JettoMart&#237;nez yes, It doesn&#39;t work, it returns the value with the copied attributes of changedPersona"},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682723477,"post_id":76133630,"comment_id":134265893,"body_markdown":"@cyberbrain I know, I found a way to work around it like that. But since I need to call the checkChanges function in other functions as well, I would like a cleaner more straightforward way to do it.","body":"@cyberbrain I know, I found a way to work around it like that. But since I need to call the checkChanges function in other functions as well, I would like a cleaner more straightforward way to do it."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1682724113,"post_id":76133630,"comment_id":134265971,"body_markdown":"If both `persona` will have the same attributes after the `copyAttributesOfObjectAToObjectB` method is called, and that call is complicating your requirement, why can&#39;t you check before it? I mean, as the method signature implies, `changedPersona` attributes are copied to `personaBefore`, right? If so, then check before that happens. Your method is supposed to only **check**, so it can return a boolean and after the copying, do whatever your `if` statement is supposed to if needed.","body":"If both <code>persona</code> will have the same attributes after the <code>copyAttributesOfObjectAToObjectB</code> method is called, and that call is complicating your requirement, why can&#39;t you check before it? I mean, as the method signature implies, <code>changedPersona</code> attributes are copied to <code>personaBefore</code>, right? If so, then check before that happens. Your method is supposed to only <b>check</b>, so it can return a boolean and after the copying, do whatever your <code>if</code> statement is supposed to if needed."},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682724474,"post_id":76133630,"comment_id":134266025,"body_markdown":"@JettoMart&#237;nez I know there are other solutions, what I am asking is if there is a good, recommended way of discarding the personaBefore stored in spring-boot memory, so that I can get the actual value stored in the database.","body":"@JettoMart&#237;nez I know there are other solutions, what I am asking is if there is a good, recommended way of discarding the personaBefore stored in spring-boot memory, so that I can get the actual value stored in the database."},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682744229,"post_id":76133630,"comment_id":134267336,"body_markdown":"Although you are not indicating persistence framework, I would suggest to check if your assumption on &quot;equality&quot; method is correct. Check implementation of &quot;equals&quot; method on  Persona  class.","body":"Although you are not indicating persistence framework, I would suggest to check if your assumption on &quot;equality&quot; method is correct. Check implementation of &quot;equals&quot; method on  Persona  class."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682779020,"post_id":76133630,"comment_id":134270558,"body_markdown":"Does the method `copyAttributesOfObjectAToObjectB` also modify its first parameter, `changedPersona`?","body":"Does the method <code>copyAttributesOfObjectAToObjectB</code> also modify its first parameter, <code>changedPersona</code>?"}],"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682720825,"creation_date":1682720825,"question_id":76133630,"body_markdown":"I have a problem with spring boot, let&#39;s say I have a method &quot;update&quot; to update the record of a Person. I am making fixes over somebody else&#39;s code so this is just the way things are. I am simplifying things here but the function has way more validations and things I don&#39;t want to change. The thing is, that between all those things this method does, it copies the values of the changedPersona to the object of persona stored in the database at the time.\r\n\r\nWhat I need to do is check if some specific fields from changedPersona are different to the ones stored for that person in the database. That I try to do in the &quot;checkChanges&quot; function, the problem is that even though I try to get the value of personaBefore fresh out of the database, Spring boot returns the object with the attributes of changedPersona (because of the copying in the &quot;update&quot; function I did before). So the comparison doesn&#39;t work.\r\n\r\nNotice that the updated values are not being officially stored in the database until AFTER I call the checkChanges function.\r\n\r\n```java\r\n@Override\r\npublic void update(Persona changedPersona){\r\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\r\n    // because of the way this method was written personaBefore will eventualy have the same values as changedPersona\r\n    copyAttributesOfObjectAToObjectB(changedPersona, personaBefore);\r\n    .\r\n    .\r\n    .\r\n    //this is what i need to do \r\n    checkChanges(changedPersona);\r\n\r\n    this.personaRepository.save(changedPersona);\r\n\r\n\r\n}\r\n\r\nprivate void checkChanges(Persona changedPersona){\r\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\r\n    if(changedPersona.equals(personaBefore){\r\n    // do something\r\n    }\r\n}\r\n```\r\n\r\nI need a way to get the personaBefore object CURRENT value in the database, not as it is stored in spring boot memory. Something like\r\n```java\r\n var personaBefore = this.personaRepository.findRealTimeValueById(changedPersona.idPersona);\r\n```\r\nHelp please","title":"SpringBoot: get object current value stored in database","body":"<p>I have a problem with spring boot, let's say I have a method &quot;update&quot; to update the record of a Person. I am making fixes over somebody else's code so this is just the way things are. I am simplifying things here but the function has way more validations and things I don't want to change. The thing is, that between all those things this method does, it copies the values of the changedPersona to the object of persona stored in the database at the time.</p>\n<p>What I need to do is check if some specific fields from changedPersona are different to the ones stored for that person in the database. That I try to do in the &quot;checkChanges&quot; function, the problem is that even though I try to get the value of personaBefore fresh out of the database, Spring boot returns the object with the attributes of changedPersona (because of the copying in the &quot;update&quot; function I did before). So the comparison doesn't work.</p>\n<p>Notice that the updated values are not being officially stored in the database until AFTER I call the checkChanges function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void update(Persona changedPersona){\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\n    // because of the way this method was written personaBefore will eventualy have the same values as changedPersona\n    copyAttributesOfObjectAToObjectB(changedPersona, personaBefore);\n    .\n    .\n    .\n    //this is what i need to do \n    checkChanges(changedPersona);\n\n    this.personaRepository.save(changedPersona);\n\n\n}\n\nprivate void checkChanges(Persona changedPersona){\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\n    if(changedPersona.equals(personaBefore){\n    // do something\n    }\n}\n</code></pre>\n<p>I need a way to get the personaBefore object CURRENT value in the database, not as it is stored in spring boot memory. Something like</p>\n<pre class=\"lang-java prettyprint-override\"><code> var personaBefore = this.personaRepository.findRealTimeValueById(changedPersona.idPersona);\n</code></pre>\n<p>Help please</p>\n"},{"tags":["java","selenium","annotations","testng","invocation"],"comments":[{"owner":{"account_id":13663575,"reputation":1059,"user_id":9857994,"display_name":"AutomatedOwl"},"score":0,"creation_date":1530680327,"post_id":51160440,"comment_id":89315175,"body_markdown":"Please supply output and given error.","body":"Please supply output and given error."}],"answers":[{"comments":[{"owner":{"account_id":2576992,"reputation":5,"user_id":2234432,"display_name":"Bhavik Gandhi"},"score":0,"creation_date":1530801876,"post_id":51183370,"comment_id":89369845,"body_markdown":"Thanks for the answer. It helps, but is there anyway that I can run all the threads in the same order.\nFor example, I am running 3 test cases in `TestClassSample` by giving priorities. And I want to execute those test cases according to given priority. From your example, threads are executing randomly and it&#39;s not executing in the same order.\n\n**Output:**\n\n`Running fooTest() on Thread [21]\nRunning fooTest() on Thread [18]\n1. Hello\n\n2. Test----Hello\n\nRunning fooTest() on Thread [19]\nRunning fooTest() on Thread [28]`\n\nThanks in advance.","body":"Thanks for the answer. It helps, but is there anyway that I can run all the threads in the same order. For example, I am running 3 test cases in <code>TestClassSample</code> by giving priorities. And I want to execute those test cases according to given priority. From your example, threads are executing randomly and it&#39;s not executing in the same order.  <b>Output:</b>  <code>Running fooTest() on Thread [21] Running fooTest() on Thread [18] 1. Hello  2. Test----Hello  Running fooTest() on Thread [19] Running fooTest() on Thread [28]</code>  Thanks in advance."},{"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"score":0,"creation_date":1530849510,"post_id":51183370,"comment_id":89386782,"body_markdown":"@BhavikGandhi - All you need to do is, disable parallelism by setting `parallel=&quot;false&quot;` in the suite file that I have shared. After that you should see TestNG running the tests one after the other. Please accept my answer, if it has answered your question.","body":"@BhavikGandhi - All you need to do is, disable parallelism by setting <code>parallel=&quot;false&quot;</code> in the suite file that I have shared. After that you should see TestNG running the tests one after the other. Please accept my answer, if it has answered your question."}],"tags":[],"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1530764686,"creation_date":1530764686,"answer_id":51183370,"question_id":51160440,"body_markdown":"You can make use an `IAnnotationTransformer` implementation to get this done.\r\n\r\nHere&#39;s a sample that shows how to pass in the method name and the invocation count via JVM arguments and how the annotation transformer implementation changes the invocation count in runtime.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.rationaleemotions.stackoverflow.qn51160440;\r\n    \r\n    import org.testng.ITestResult;\r\n    import org.testng.Reporter;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class TestClassSample {\r\n      @Test\r\n      public void fooTest() {\r\n        ITestResult r = Reporter.getCurrentTestResult();\r\n        String methodname = r.getMethod().getMethodName();\r\n        System.err.println(\r\n            &quot;Running &quot; + methodname + &quot;() on Thread [&quot; + Thread.currentThread().getId() + &quot;]&quot;);\r\n      }\r\n    }\r\n\r\nHere&#39;s how the annotation transformer looks like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.rationaleemotions.stackoverflow.qn51160440;\r\n    \r\n    import java.lang.reflect.Constructor;\r\n    import java.lang.reflect.Method;\r\n    import org.testng.IAnnotationTransformer;\r\n    import org.testng.annotations.ITestAnnotation;\r\n    \r\n    public class AnnotationTransformerImpl implements IAnnotationTransformer {\r\n    \r\n      @Override\r\n      public void transform(\r\n          ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\r\n        //Pass the value via JVM argument -Dkvp=someMethod=400\r\n        //Here &quot;someMethod&quot; is the name of the method and 400 is the invocation count value\r\n        String kvp = System.getProperty(&quot;kvp&quot;, &quot;fooTest=200&quot;);\r\n        String keyValue[] = kvp.split(&quot;=&quot;);\r\n        if (keyValue.length != 2) {\r\n          return;\r\n        }\r\n        if (!testMethod.getName().equalsIgnoreCase(keyValue[0])) {\r\n          return;\r\n        }\r\n        annotation.setInvocationCount(Integer.parseInt(keyValue[1]));\r\n        annotation.setThreadPoolSize(25);\r\n      }\r\n    }\r\n\r\nHere&#39;s how the suite file looks like\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;45160355_Suite&quot; parallel=&quot;methods&quot; verbose=&quot;2&quot; &gt;\r\n        &lt;listeners&gt;\r\n            &lt;listener\r\n              class-name=&quot;com.rationaleemotions.stackoverflow.qn51160440.AnnotationTransformerImpl&quot;/&gt;\r\n        &lt;/listeners&gt;\r\n        &lt;test name=&quot;45160355_test&quot; verbose=&quot;2&quot;&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;com.rationaleemotions.stackoverflow.qn51160440.TestClassSample&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\n","title":"How to set invocation count during execution for the method using TestNG &amp; Java","body":"<p>You can make use an <code>IAnnotationTransformer</code> implementation to get this done.</p>\n\n<p>Here's a sample that shows how to pass in the method name and the invocation count via JVM arguments and how the annotation transformer implementation changes the invocation count in runtime.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.rationaleemotions.stackoverflow.qn51160440;\n\nimport org.testng.ITestResult;\nimport org.testng.Reporter;\nimport org.testng.annotations.Test;\n\npublic class TestClassSample {\n  @Test\n  public void fooTest() {\n    ITestResult r = Reporter.getCurrentTestResult();\n    String methodname = r.getMethod().getMethodName();\n    System.err.println(\n        \"Running \" + methodname + \"() on Thread [\" + Thread.currentThread().getId() + \"]\");\n  }\n}\n</code></pre>\n\n<p>Here's how the annotation transformer looks like</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.rationaleemotions.stackoverflow.qn51160440;\n\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Method;\nimport org.testng.IAnnotationTransformer;\nimport org.testng.annotations.ITestAnnotation;\n\npublic class AnnotationTransformerImpl implements IAnnotationTransformer {\n\n  @Override\n  public void transform(\n      ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\n    //Pass the value via JVM argument -Dkvp=someMethod=400\n    //Here \"someMethod\" is the name of the method and 400 is the invocation count value\n    String kvp = System.getProperty(\"kvp\", \"fooTest=200\");\n    String keyValue[] = kvp.split(\"=\");\n    if (keyValue.length != 2) {\n      return;\n    }\n    if (!testMethod.getName().equalsIgnoreCase(keyValue[0])) {\n      return;\n    }\n    annotation.setInvocationCount(Integer.parseInt(keyValue[1]));\n    annotation.setThreadPoolSize(25);\n  }\n}\n</code></pre>\n\n<p>Here's how the suite file looks like</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"45160355_Suite\" parallel=\"methods\" verbose=\"2\" &gt;\n    &lt;listeners&gt;\n        &lt;listener\n          class-name=\"com.rationaleemotions.stackoverflow.qn51160440.AnnotationTransformerImpl\"/&gt;\n    &lt;/listeners&gt;\n    &lt;test name=\"45160355_test\" verbose=\"2\"&gt;\n        &lt;classes&gt;\n            &lt;class name=\"com.rationaleemotions.stackoverflow.qn51160440.TestClassSample\"/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n"}],"owner":{"account_id":2576992,"reputation":5,"user_id":2234432,"display_name":"Bhavik Gandhi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11930,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51183370,"answer_count":1,"score":0,"last_activity_date":1682720688,"creation_date":1530640404,"question_id":51160440,"body_markdown":"I am having one test method, which I am manually executing for 200 times. \r\n\r\n    @Test(priority=2, invocationCount = 200)\r\n    public void inviteTalents() throws InterruptedException\r\n    {\r\n\t  logger.log(Status.INFO, &quot;Count &quot; + logins[count]);\r\n    }\r\n\r\nHow can I set the invocation count variable? I have tried something like this, but doesn&#39;t work. Any help?\r\n\r\n\t  @BeforeMethod\r\n\t  public void setUp(Method method, ITestContext context) {\r\n\t    \r\n\t    if(method.getName().equals(&quot;test3&quot;))\r\n\t    {\r\n\t    \tITestNGMethod currentTestNGMethod = null;\r\n\t        for (ITestNGMethod testNGMethod : context.getAllTestMethods())\r\n\t        {\r\n\t          if (testNGMethod.getInstance() == this)\r\n\t          {\r\n\t            currentTestNGMethod = testNGMethod;\r\n\t            break;\r\n\t          }\r\n\t        }\r\n\t        currentTestNGMethod.setInvocationCount(count);\t\r\n\t    }\r\n\t  }","title":"How to set invocation count during execution for the method using TestNG &amp; Java","body":"<p>I am having one test method, which I am manually executing for 200 times. </p>\n\n<pre><code>@Test(priority=2, invocationCount = 200)\npublic void inviteTalents() throws InterruptedException\n{\n  logger.log(Status.INFO, \"Count \" + logins[count]);\n}\n</code></pre>\n\n<p>How can I set the invocation count variable? I have tried something like this, but doesn't work. Any help?</p>\n\n<pre><code>  @BeforeMethod\n  public void setUp(Method method, ITestContext context) {\n\n    if(method.getName().equals(\"test3\"))\n    {\n        ITestNGMethod currentTestNGMethod = null;\n        for (ITestNGMethod testNGMethod : context.getAllTestMethods())\n        {\n          if (testNGMethod.getInstance() == this)\n          {\n            currentTestNGMethod = testNGMethod;\n            break;\n          }\n        }\n        currentTestNGMethod.setInvocationCount(count);  \n    }\n  }\n</code></pre>\n"},{"tags":["java","openapi","openapi-generator","codegen"],"answers":[{"tags":[],"owner":{"account_id":1657072,"reputation":1220,"user_id":1526322,"accept_rate":100,"display_name":"Knox"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1585468171,"creation_date":1585468171,"answer_id":60911455,"question_id":60808674,"body_markdown":"The way to specify this in OpenAPI would be using `multipleOf`:\r\n```yaml\r\ncommissionAmount:\r\n  type: number\r\n  minimum: -99999.99\r\n  maximum: 99999.99\r\n  multipleOf: 0.01\r\n```\r\n\r\nHowever, using the OpenAPI Generator **will not produce an annotation** for this. The reason being is that there is no `javax.validation` annotation that can represent `multipleOf` effectively (imagine trying to express `multipleOf: 0.02`- `@Digits` would be insufficient).\r\n\r\nHowever, you can create your own annotation as this user has: https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233\r\n\r\nWith the following annotation and validator:\r\n```java\r\n@Target({METHOD, FIELD})\r\n@Retention(RUNTIME)\r\n@Repeatable(MultipleOf.List.class)\r\n@Constraint(validatedBy = MultipleOfValidator.class)\r\npublic @interface MultipleOf {\r\n\r\n    double value();\r\n\r\n    String message() default &quot;{error.multipleOf}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default { };\r\n\r\n    @Target({ METHOD, FIELD })\r\n    @Retention(RUNTIME)\r\n    @Documented\r\n    @interface List {\r\n        MultipleOf[] value();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class MultipleOfValidator implements ConstraintValidator&lt;MultipleOf, Number&gt; {\r\n\r\n    private double value;\r\n\r\n    @Override\r\n    public void initialize(MultipleOf constraintAnnotation) {\r\n        this.value = constraintAnnotation.value();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(Number value, ConstraintValidatorContext context) {\r\n        return (value == null) || (value.doubleValue() / this.value) % 1 == 0;\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou would then be able to fork the generator and add your new annotation to the template: https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache\r\n\r\nWith a line like this:\r\n```mustache\r\n{{#multipleOf}}@MultipleOf({{multipleOf}}){{/multipleOf}}","title":"openapi 3.0 valid minimum and maximum values","body":"<p>The way to specify this in OpenAPI would be using <code>multipleOf</code>:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>commissionAmount:\n  type: number\n  minimum: -99999.99\n  maximum: 99999.99\n  multipleOf: 0.01\n</code></pre>\n\n<p>However, using the OpenAPI Generator <strong>will not produce an annotation</strong> for this. The reason being is that there is no <code>javax.validation</code> annotation that can represent <code>multipleOf</code> effectively (imagine trying to express <code>multipleOf: 0.02</code>- <code>@Digits</code> would be insufficient).</p>\n\n<p>However, you can create your own annotation as this user has: <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233\" rel=\"noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233</a></p>\n\n<p>With the following annotation and validator:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Target({METHOD, FIELD})\n@Retention(RUNTIME)\n@Repeatable(MultipleOf.List.class)\n@Constraint(validatedBy = MultipleOfValidator.class)\npublic @interface MultipleOf {\n\n    double value();\n\n    String message() default \"{error.multipleOf}\";\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default { };\n\n    @Target({ METHOD, FIELD })\n    @Retention(RUNTIME)\n    @Documented\n    @interface List {\n        MultipleOf[] value();\n    }\n\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MultipleOfValidator implements ConstraintValidator&lt;MultipleOf, Number&gt; {\n\n    private double value;\n\n    @Override\n    public void initialize(MultipleOf constraintAnnotation) {\n        this.value = constraintAnnotation.value();\n    }\n\n    @Override\n    public boolean isValid(Number value, ConstraintValidatorContext context) {\n        return (value == null) || (value.doubleValue() / this.value) % 1 == 0;\n    }\n\n}\n</code></pre>\n\n<p>You would then be able to fork the generator and add your new annotation to the template: <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache\" rel=\"noreferrer\">https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache</a></p>\n\n<p>With a line like this:</p>\n\n<pre><code>{{#multipleOf}}@MultipleOf({{multipleOf}}){{/multipleOf}}\n</code></pre>\n"}],"owner":{"account_id":2020088,"reputation":1882,"user_id":1806481,"accept_rate":65,"display_name":"Sridhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14083,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1682719241,"creation_date":1584943866,"question_id":60808674,"body_markdown":"I have below schema definition to represent `commission amount` in my openapi contract.\r\n\r\n```\r\ncommissionAmount:\r\n  type: number\r\n  minimum: -99999.99\r\n  maximum: 99999.99\r\n```\r\n\r\nGenerated Code:\r\n```\r\n@Valid\r\n@DecimalMin(&quot;-99999.99&quot;) @DecimalMax(&quot;99999.99&quot;) \r\npublic BigDecimal getCommissionAmount() {\r\n  return commAmt;\r\n}\r\n```\r\n\r\nThe generated code is good and as expected. I just wanted to know are these `-99999.99` and `99999.99` valid values for `minimum` and `maximum`. \r\n\r\nThe reason for asking this question is it does not check the limit in the fractional part. For example, I expect `12345.678` is invalid , `12345.67` is valid. But it marks both as valid.\r\n\r\nI read `@Digits` is used to check for the digit limit of integer and fractional part. How do I tell `openapi-generator-maven-plugin` to annotate `Digits` as well?\r\n\r\nExpected Generated Code:\r\n```\r\n@Valid\r\n@Digits(integer = 5, fraction = 2)\r\n@DecimalMin(&quot;-99999.99&quot;) @DecimalMax(&quot;99999.99&quot;) \r\npublic BigDecimal getCommissionAmount() {\r\n  return commAmt;\r\n}\r\n```\r\n","title":"openapi 3.0 valid minimum and maximum values","body":"<p>I have below schema definition to represent <code>commission amount</code> in my openapi contract.</p>\n\n<pre><code>commissionAmount:\n  type: number\n  minimum: -99999.99\n  maximum: 99999.99\n</code></pre>\n\n<p>Generated Code:</p>\n\n<pre><code>@Valid\n@DecimalMin(\"-99999.99\") @DecimalMax(\"99999.99\") \npublic BigDecimal getCommissionAmount() {\n  return commAmt;\n}\n</code></pre>\n\n<p>The generated code is good and as expected. I just wanted to know are these <code>-99999.99</code> and <code>99999.99</code> valid values for <code>minimum</code> and <code>maximum</code>. </p>\n\n<p>The reason for asking this question is it does not check the limit in the fractional part. For example, I expect <code>12345.678</code> is invalid , <code>12345.67</code> is valid. But it marks both as valid.</p>\n\n<p>I read <code>@Digits</code> is used to check for the digit limit of integer and fractional part. How do I tell <code>openapi-generator-maven-plugin</code> to annotate <code>Digits</code> as well?</p>\n\n<p>Expected Generated Code:</p>\n\n<pre><code>@Valid\n@Digits(integer = 5, fraction = 2)\n@DecimalMin(\"-99999.99\") @DecimalMax(\"99999.99\") \npublic BigDecimal getCommissionAmount() {\n  return commAmt;\n}\n</code></pre>\n"},{"tags":["java","protocol-buffers","protobuf-java"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1682382042,"post_id":76094939,"comment_id":134203190,"body_markdown":"The answer will first depend on what fields are actually present in the serialized data.  Are all fields actually there?","body":"The answer will first depend on what fields are actually present in the serialized data.  Are all fields actually there?"},{"owner":{"account_id":9588169,"reputation":1267,"user_id":7120087,"display_name":"Baiqing"},"score":0,"creation_date":1682395068,"post_id":76094939,"comment_id":134204374,"body_markdown":"Required fields are there, optional fields may or may not be but mostly will be present","body":"Required fields are there, optional fields may or may not be but mostly will be present"}],"answers":[{"tags":[],"owner":{"account_id":4382998,"reputation":406,"user_id":3574093,"display_name":"Florian Enner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682718165,"creation_date":1682718165,"answer_id":76133460,"question_id":76094939,"body_markdown":"The location of the data in memory is independent of the field number, so protobuf still needs to do some amount of parsing for each field. Removing fields will likely result in a benefit, but the gains depend on your field types. \r\n\r\nUnknown varint fields (int32, int64,...) need to be parsed entirely, but fixed size (float, double, fixed32,...) and length-delimited types (messages, strings, bytes) can be skipped efficiently.","title":"Protobuf deserialization speed up via hiding extra fields","body":"<p>The location of the data in memory is independent of the field number, so protobuf still needs to do some amount of parsing for each field. Removing fields will likely result in a benefit, but the gains depend on your field types.</p>\n<p>Unknown varint fields (int32, int64,...) need to be parsed entirely, but fixed size (float, double, fixed32,...) and length-delimited types (messages, strings, bytes) can be skipped efficiently.</p>\n"}],"owner":{"account_id":9588169,"reputation":1267,"user_id":7120087,"display_name":"Baiqing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76133460,"answer_count":1,"score":0,"last_activity_date":1682718165,"creation_date":1682360410,"question_id":76094939,"body_markdown":"Not too familiar with protobuf&#39;s implementation in java so I&#39;m not certain if this will yield any benefits, but here is a thought I had.\r\n\r\nSay for a large pb struct that looks like the following:\r\n```protobuf\r\nmessage data {\r\n    required string field1 = 1;\r\n    required int64 field2 = 2;\r\n    optional string field3 = 3;\r\n    ...\r\n    required string field1000 = 1000;\r\n}\r\n```\r\nThe above example hopefully shows a combination of 1000 fields, which could be a mix of required and optional fields with a mix of datatypes.\r\n\r\nIf I were to only want, per say, field 1 and 3, and give the deserialize job the following:\r\n```protobuf\r\nmessage data {\r\n    required string field1 = 1;\r\n    optional string field3 = 3;\r\n}\r\n```\r\nFirst of all, what would happen here, would the deserializer still attempt to parse all fields? Or would it know to only look for certain fields in their respective indexes.","title":"Protobuf deserialization speed up via hiding extra fields","body":"<p>Not too familiar with protobuf's implementation in java so I'm not certain if this will yield any benefits, but here is a thought I had.</p>\n<p>Say for a large pb struct that looks like the following:</p>\n<pre class=\"lang-protobuf prettyprint-override\"><code>message data {\n    required string field1 = 1;\n    required int64 field2 = 2;\n    optional string field3 = 3;\n    ...\n    required string field1000 = 1000;\n}\n</code></pre>\n<p>The above example hopefully shows a combination of 1000 fields, which could be a mix of required and optional fields with a mix of datatypes.</p>\n<p>If I were to only want, per say, field 1 and 3, and give the deserialize job the following:</p>\n<pre class=\"lang-protobuf prettyprint-override\"><code>message data {\n    required string field1 = 1;\n    optional string field3 = 3;\n}\n</code></pre>\n<p>First of all, what would happen here, would the deserializer still attempt to parse all fields? Or would it know to only look for certain fields in their respective indexes.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10565292,"reputation":2108,"user_id":7783718,"display_name":"Abhay Koradiya"},"score":0,"creation_date":1560252430,"post_id":56542557,"comment_id":99666890,"body_markdown":"find view by it&#39;s id of given.","body":"find view by it&#39;s id of given."},{"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"score":0,"creation_date":1560317257,"post_id":56542557,"comment_id":99691092,"body_markdown":"May you please explain better?\n\nThere is no layout or fragment ora activity in the code which belongs to that dialog, I looked for it and was not able to find it.","body":"May you please explain better?  There is no layout or fragment ora activity in the code which belongs to that dialog, I looked for it and was not able to find it."},{"owner":{"account_id":10565292,"reputation":2108,"user_id":7783718,"display_name":"Abhay Koradiya"},"score":0,"creation_date":1560318003,"post_id":56542557,"comment_id":99691302,"body_markdown":"from Which library it&#39;s come ?","body":"from Which library it&#39;s come ?"},{"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"score":0,"creation_date":1560324359,"post_id":56542557,"comment_id":99693754,"body_markdown":"I don&#39;t know: this was my question. \n\nI was not able to track the dialog, nor I was able to find where is istantiated in the code. I performed a step-by-step debug and the dialog seems to be originated in some system library, but I may be wrong.","body":"I don&#39;t know: this was my question.   I was not able to track the dialog, nor I was able to find where is istantiated in the code. I performed a step-by-step debug and the dialog seems to be originated in some system library, but I may be wrong."}],"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682717462,"creation_date":1560251965,"question_id":56542557,"body_markdown":"I need trying to change/translate the message shown in the OneBusAway Android app after sending with success a report about an arrival time or a bus stop.\r\n\r\nThe dialog shows the message &quot;Your issue has been successfully reported&quot;, plus an &quot;Ok&quot; button: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe message shown does not depend on the language of the operating system. I looked in the whole code for that string, and for substrings, without beeing able to find anything.\r\n\r\nMore, debugging step-by-step it seems the dialog is originated from some Android library.\r\n\r\nAny idea on how to approach the problem in order to change and/or translate the message?\r\n\r\n  [1]: https://i.stack.imgur.com/21ffX.jpg","title":"Android - OneBusAway: translate message for succesfully sent problems","body":"<p>I need trying to change/translate the message shown in the OneBusAway Android app after sending with success a report about an arrival time or a bus stop.</p>\n\n<p>The dialog shows the message \"Your issue has been successfully reported\", plus an \"Ok\" button: </p>\n\n<p><a href=\"https://i.stack.imgur.com/21ffX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/21ffX.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The message shown does not depend on the language of the operating system. I looked in the whole code for that string, and for substrings, without beeing able to find anything.</p>\n\n<p>More, debugging step-by-step it seems the dialog is originated from some Android library.</p>\n\n<p>Any idea on how to approach the problem in order to change and/or translate the message?</p>\n"},{"tags":["java","generics"],"answers":[{"comments":[{"owner":{"account_id":454778,"reputation":532,"user_id":852569,"accept_rate":64,"display_name":"Fabrizio Giudici"},"score":0,"creation_date":1682689796,"post_id":76129514,"comment_id":134259633,"body_markdown":"That statement in section 4.10.2 is precisely what I was missing. Thanks.","body":"That statement in section 4.10.2 is precisely what I was missing. Thanks."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682687345,"creation_date":1682684360,"answer_id":76129514,"question_id":76129388,"body_markdown":"The case of `method3` is not similar to the case of `method2` at all. Namely, there are no [raw types][1] involved when calling `method3`. `DerivedClass` in `DerivedClass.class` is a raw type.\r\n\r\nIt *would* be similar if you return a raw `DerivedClass` in the supplier:\r\n\r\n    final var m5 = method3(arg, () -&gt; new DerivedClass());\r\n\r\n    // this doesn&#39;t compile, for the same reason as in the method2 case\r\n    s = m5.getSomething();\r\n\r\nThe type argument for `method2` *cannot* be inferred as `DerivedClass&lt;T&gt;`, because then the second parameter (`arg2`) would be of type `Class&lt;? extends DerivedClass&lt;T&gt;&gt;`, but you are passing a `Class&lt;DerivedClass&gt;` to it.\r\n\r\nIt&#39;s like assigning a `Class&lt;DerivedClass&gt;` to `Class&lt;? extends DerivedClass&lt;T&gt;&gt;` variable:\r\n\r\n    // this does not compile either\r\n    Class&lt;? extends DerivedClass&lt;T&gt;&gt; x = DerivedClass.class;\r\n\r\nThis doesn&#39;t compile because the raw `DerivedClass` is not a subtype of `DerivedClass&lt;T&gt;`. In fact, if you look at [section 4.10.2][2] of the JLS, `DerivedClass` is a direct *supertype* of `DerivedClass&lt;T&gt;`.\r\n\r\n&gt; Given a generic class or interface `C` with type parameters F1,...,Fn (n &gt; 0), the direct supertypes of the parameterized type `C&lt;T1,...,Tn&gt;`, where each of Ti (1 ≤ i ≤ n) is a type, are all of the following:\r\n&gt;\r\n&gt; - [...]\r\n&gt;\r\n&gt; - The raw type `C`.\r\n\r\nTherefore, the type parameter of `method2` is inferred as the raw `DerivedClass`. This works for `arg1` too, as the generic `DerivedClass&lt;T&gt;` is a subtype of the raw `DerivedClass`.\r\n\r\nThat said, [it is not possible to get a `Class&lt;DerivedClass&lt;T&gt;&gt;`][3] unless you do unchecked casts.\r\n\r\nNow you might be wondering how this assignment works if `method2` returns a raw `DerivedClass`, but you are assigning it to `DerivedClass&lt;T&gt;`:\r\n\r\n    final DerivedClass&lt;T&gt; m4 = BaseClass.method2(arg, DerivedClass.class);\r\n\r\nThis works because in assignment contexts just are [specified][4] to work like this. The important sentence is:\r\n\r\n&gt; If, after the conversions listed above have been applied, the resulting type is a raw type (&#167;4.8), an unchecked conversion (&#167;5.1.9) may then be applied.\r\n\r\nThere is an implicit unchecked conversion here converting `DerivedClass` to `DerivedClass&lt;T&gt;`. This is also why you get the warning.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2770321/5133585\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10.2\r\n  [3]: https://stackoverflow.com/q/2390662/5133585\r\n  [4]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.2","title":"A special case of Java generics matching","body":"<p>The case of <code>method3</code> is not similar to the case of <code>method2</code> at all. Namely, there are no <a href=\"https://stackoverflow.com/q/2770321/5133585\">raw types</a> involved when calling <code>method3</code>. <code>DerivedClass</code> in <code>DerivedClass.class</code> is a raw type.</p>\n<p>It <em>would</em> be similar if you return a raw <code>DerivedClass</code> in the supplier:</p>\n<pre><code>final var m5 = method3(arg, () -&gt; new DerivedClass());\n\n// this doesn't compile, for the same reason as in the method2 case\ns = m5.getSomething();\n</code></pre>\n<p>The type argument for <code>method2</code> <em>cannot</em> be inferred as <code>DerivedClass&lt;T&gt;</code>, because then the second parameter (<code>arg2</code>) would be of type <code>Class&lt;? extends DerivedClass&lt;T&gt;&gt;</code>, but you are passing a <code>Class&lt;DerivedClass&gt;</code> to it.</p>\n<p>It's like assigning a <code>Class&lt;DerivedClass&gt;</code> to <code>Class&lt;? extends DerivedClass&lt;T&gt;&gt;</code> variable:</p>\n<pre><code>// this does not compile either\nClass&lt;? extends DerivedClass&lt;T&gt;&gt; x = DerivedClass.class;\n</code></pre>\n<p>This doesn't compile because the raw <code>DerivedClass</code> is not a subtype of <code>DerivedClass&lt;T&gt;</code>. In fact, if you look at <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10.2\" rel=\"nofollow noreferrer\">section 4.10.2</a> of the JLS, <code>DerivedClass</code> is a direct <em>supertype</em> of <code>DerivedClass&lt;T&gt;</code>.</p>\n<blockquote>\n<p>Given a generic class or interface <code>C</code> with type parameters F1,...,Fn (n &gt; 0), the direct supertypes of the parameterized type <code>C&lt;T1,...,Tn&gt;</code>, where each of Ti (1 ≤ i ≤ n) is a type, are all of the following:</p>\n<ul>\n<li><p>[...]</p>\n</li>\n<li><p>The raw type <code>C</code>.</p>\n</li>\n</ul>\n</blockquote>\n<p>Therefore, the type parameter of <code>method2</code> is inferred as the raw <code>DerivedClass</code>. This works for <code>arg1</code> too, as the generic <code>DerivedClass&lt;T&gt;</code> is a subtype of the raw <code>DerivedClass</code>.</p>\n<p>That said, <a href=\"https://stackoverflow.com/q/2390662/5133585\">it is not possible to get a <code>Class&lt;DerivedClass&lt;T&gt;&gt;</code></a> unless you do unchecked casts.</p>\n<p>Now you might be wondering how this assignment works if <code>method2</code> returns a raw <code>DerivedClass</code>, but you are assigning it to <code>DerivedClass&lt;T&gt;</code>:</p>\n<pre><code>final DerivedClass&lt;T&gt; m4 = BaseClass.method2(arg, DerivedClass.class);\n</code></pre>\n<p>This works because in assignment contexts just are <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">specified</a> to work like this. The important sentence is:</p>\n<blockquote>\n<p>If, after the conversions listed above have been applied, the resulting type is a raw type (§4.8), an unchecked conversion (§5.1.9) may then be applied.</p>\n</blockquote>\n<p>There is an implicit unchecked conversion here converting <code>DerivedClass</code> to <code>DerivedClass&lt;T&gt;</code>. This is also why you get the warning.</p>\n"},{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682684761,"creation_date":1682684761,"answer_id":76129568,"question_id":76129388,"body_markdown":"Because both `BaseClass` and `DerivedClass` are generic classes, but `DerivedClass.class` is a raw type (namely `Class&lt;DerivedClass&gt;` and not `Class&lt;DerivedClass&lt;T&gt;&gt;`).\r\n\r\n`var` is inferred to be the raw type and your statement is identical to:\r\n\r\n```\r\nfinal DerivedClass m2 = method2(arg, DerivedClass.class);\r\n```\r\n\r\nOnce you use raw types, all generic information is &quot;lost&quot;/erased and you have to deal with plain `Object`s.\r\n\r\n`this.&lt;DerivedClass&lt;T&gt;&gt;method2(arg, DerivedClass.class)` should make `m2` generic again (but you probably still have the unchecked cast warning, just for the argument).\r\n\r\nAnd it&#39;s exactly this &quot;unchecked assignment&quot; that&#39;s causing the issues (unchecked from the raw type to the generic closed type).","title":"A special case of Java generics matching","body":"<p>Because both <code>BaseClass</code> and <code>DerivedClass</code> are generic classes, but <code>DerivedClass.class</code> is a raw type (namely <code>Class&lt;DerivedClass&gt;</code> and not <code>Class&lt;DerivedClass&lt;T&gt;&gt;</code>).</p>\n<p><code>var</code> is inferred to be the raw type and your statement is identical to:</p>\n<pre><code>final DerivedClass m2 = method2(arg, DerivedClass.class);\n</code></pre>\n<p>Once you use raw types, all generic information is &quot;lost&quot;/erased and you have to deal with plain <code>Object</code>s.</p>\n<p><code>this.&lt;DerivedClass&lt;T&gt;&gt;method2(arg, DerivedClass.class)</code> should make <code>m2</code> generic again (but you probably still have the unchecked cast warning, just for the argument).</p>\n<p>And it's exactly this &quot;unchecked assignment&quot; that's causing the issues (unchecked from the raw type to the generic closed type).</p>\n"}],"owner":{"account_id":454778,"reputation":532,"user_id":852569,"accept_rate":64,"display_name":"Fabrizio Giudici"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76129514,"answer_count":2,"score":3,"last_activity_date":1682716930,"creation_date":1682682861,"question_id":76129388,"body_markdown":"I&#39;d like to resolve a dubious point that has been affecting some parts of my code for years — it is fixed with a trivial cast, but now I&#39;d like to understand the rationale behind it and possibly a reference in official specifications.\r\n\r\nLet me introduce this piece of code:\r\n\r\n    import java.util.function.Supplier;\r\n\r\n    class BaseClass&lt;T, R&gt; {\r\n      R getSomething() { return null; }\r\n      static &lt;U&gt; U method1 (final U arg1) { return arg1; }\r\n      static &lt;U&gt; U method2 (final U arg1, final Class&lt;? extends U&gt; arg2) { return arg1; }\r\n      static &lt;U&gt; U method3 (final U arg1, final Supplier&lt;? extends U&gt; arg2) { return arg1; }\r\n    }\r\n\r\nNow let me have a subclass with a partial generics binding (`T` is still unbound):\r\n\r\n    class DerivedClass&lt;T&gt; extends BaseClass&lt;T, String&gt; {\r\n      private String s;\r\n\r\n      void test (final DerivedClass&lt;T&gt; arg) {\r\n        final var m1 = method1(arg);\r\n        s = m1.getSomething();\r\n\r\n        final DerivedClass&lt;T&gt; m3 = method1(arg);\r\n        s = m3.getSomething();\r\n\r\n        final var m2 = method2(arg, DerivedClass.class);\r\n        // 1. ERROR: requires String, found Object\r\n        s = m2.getSomething();\r\n\r\n        // 2. WARNING: unchecked assignment DerivedClass to DerivedClass&lt;T&gt;\r\n        final DerivedClass&lt;T&gt; m4 = method2(arg, DerivedClass.class);\r\n        s = m4.getSomething();\r\n\r\n        final var m5 = method3(arg, () -&gt; new DerivedClass&lt;&gt;());\r\n        s = m5.getSomething();\r\n        } \r\n    }\r\n  \r\nWith `method1` everything is fine and the returned object carries the binding `R` -&gt; `String`. In other words, the `U` type of `arg1` is correctly propagated to the result.\r\n\r\nWith `method2` the binding is lost (and &quot;downgraded&quot; to `Object`): this ends up in a warning if I force things with an explicit type declaration of `m4` (of course an explicit cast would work too) and an error if I use `var`.\r\n\r\nWith `method3`, in spite of `arg2` being declared in a similar way as in `method2`, everything is fine again.\r\n\r\nSo it seems that the culprit is the presence of an argument of `Class&lt;&gt;` type. Why? In general, why doesn&#39;t the compiler use `arg1` for a complete match even when there is a `Class&lt;&gt;` parameter?\r\n\r\nAs far as I can remember this happens since Java 5 (of course the portions with `var` refer to Java 17).","title":"A special case of Java generics matching","body":"<p>I'd like to resolve a dubious point that has been affecting some parts of my code for years — it is fixed with a trivial cast, but now I'd like to understand the rationale behind it and possibly a reference in official specifications.</p>\n<p>Let me introduce this piece of code:</p>\n<pre><code>import java.util.function.Supplier;\n\nclass BaseClass&lt;T, R&gt; {\n  R getSomething() { return null; }\n  static &lt;U&gt; U method1 (final U arg1) { return arg1; }\n  static &lt;U&gt; U method2 (final U arg1, final Class&lt;? extends U&gt; arg2) { return arg1; }\n  static &lt;U&gt; U method3 (final U arg1, final Supplier&lt;? extends U&gt; arg2) { return arg1; }\n}\n</code></pre>\n<p>Now let me have a subclass with a partial generics binding (<code>T</code> is still unbound):</p>\n<pre><code>class DerivedClass&lt;T&gt; extends BaseClass&lt;T, String&gt; {\n  private String s;\n\n  void test (final DerivedClass&lt;T&gt; arg) {\n    final var m1 = method1(arg);\n    s = m1.getSomething();\n\n    final DerivedClass&lt;T&gt; m3 = method1(arg);\n    s = m3.getSomething();\n\n    final var m2 = method2(arg, DerivedClass.class);\n    // 1. ERROR: requires String, found Object\n    s = m2.getSomething();\n\n    // 2. WARNING: unchecked assignment DerivedClass to DerivedClass&lt;T&gt;\n    final DerivedClass&lt;T&gt; m4 = method2(arg, DerivedClass.class);\n    s = m4.getSomething();\n\n    final var m5 = method3(arg, () -&gt; new DerivedClass&lt;&gt;());\n    s = m5.getSomething();\n    } \n}\n</code></pre>\n<p>With <code>method1</code> everything is fine and the returned object carries the binding <code>R</code> -&gt; <code>String</code>. In other words, the <code>U</code> type of <code>arg1</code> is correctly propagated to the result.</p>\n<p>With <code>method2</code> the binding is lost (and &quot;downgraded&quot; to <code>Object</code>): this ends up in a warning if I force things with an explicit type declaration of <code>m4</code> (of course an explicit cast would work too) and an error if I use <code>var</code>.</p>\n<p>With <code>method3</code>, in spite of <code>arg2</code> being declared in a similar way as in <code>method2</code>, everything is fine again.</p>\n<p>So it seems that the culprit is the presence of an argument of <code>Class&lt;&gt;</code> type. Why? In general, why doesn't the compiler use <code>arg1</code> for a complete match even when there is a <code>Class&lt;&gt;</code> parameter?</p>\n<p>As far as I can remember this happens since Java 5 (of course the portions with <code>var</code> refer to Java 17).</p>\n"},{"tags":["java","xml","schema","aem"],"comments":[{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":1,"creation_date":1684511895,"post_id":76130291,"comment_id":134532856,"body_markdown":"By the way, if you have custom properties, beware of calling them something like: cn:myPropery, where cn is custom name, the idea is that anything like prefix:Property can cause problems when importing the content into AEM and you have to register these custom prefixes. See this: https://experienceleague.adobe.com/docs/experience-manager-learn/cloud-service/developing/advanced/custom-namespaces.html?lang=en","body":"By the way, if you have custom properties, beware of calling them something like: cn:myPropery, where cn is custom name, the idea is that anything like prefix:Property can cause problems when importing the content into AEM and you have to register these custom prefixes. See this: <a href=\"https://experienceleague.adobe.com/docs/experience-manager-learn/cloud-service/developing/advanced/custom-namespaces.html?lang=en\" rel=\"nofollow noreferrer\">experienceleague.adobe.com/docs/experience-manager-learn/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":60637,"reputation":487,"user_id":181097,"accept_rate":89,"display_name":"jfix"},"score":0,"creation_date":1682882270,"post_id":76133331,"comment_id":134281227,"body_markdown":"thanks Raphael, I&#39;ll have a look at this. in the end we will probably create our own (very basic) schema using our own `jar:primaryType`s etc.","body":"thanks Raphael, I&#39;ll have a look at this. in the end we will probably create our own (very basic) schema using our own <code>jar:primaryType</code>s etc."}],"tags":[],"owner":{"account_id":6995,"reputation":18400,"user_id":11940,"accept_rate":88,"display_name":"Raphael Schweikert"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682716678,"creation_date":1682716678,"answer_id":76133331,"question_id":76130291,"body_markdown":"[OakPAL](http://adamcin.net/oakpal/) can validate the XML used to import nodes into AEM. It’s not a schema, as I don’t believe such a thing exists, since JCR node types (the thing described by the `jcr:primaryType` attribute, which is `cq:Component` in your example) can have declarations that aren’t static and, thus, not representable in schemata.\r\n\r\nAlso, I’ve only ever used it to validate entire packages (ZIP files) with nodes, not single XML files so maybe you’ll have to package up your XMLs in order to use it.","title":"Is there an XML schema for JCR (Java Content Repository)?","body":"<p><a href=\"http://adamcin.net/oakpal/\" rel=\"nofollow noreferrer\">OakPAL</a> can validate the XML used to import nodes into AEM. It’s not a schema, as I don’t believe such a thing exists, since JCR node types (the thing described by the <code>jcr:primaryType</code> attribute, which is <code>cq:Component</code> in your example) can have declarations that aren’t static and, thus, not representable in schemata.</p>\n<p>Also, I’ve only ever used it to validate entire packages (ZIP files) with nodes, not single XML files so maybe you’ll have to package up your XMLs in order to use it.</p>\n"}],"owner":{"account_id":60637,"reputation":487,"user_id":181097,"accept_rate":89,"display_name":"jfix"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682716678,"creation_date":1682690070,"question_id":76130291,"body_markdown":"We&#39;ve been asked to provide content via API to the Adobe Experience Manager CMS (previously CQ?).\r\n\r\nAs we store our information in our own system in an XML database, it would make sense to provide some JCR-compliant XML which may have to be enriched by AEM. To make sure our XML is correct we would like to validate it before sending it to AEM.\r\n\r\nBut despite having spent quite some time looking for an XML schema (or a JSON schema), we cannot find one. Does it not exist, or does it have a different name? If there is no schema, how can one make sure the XML is valid?\r\n\r\n\r\nHere is a code bit from Adobe&#39;s [AEM Github repository][1]\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jcr:root xmlns:cq=&quot;http://www.day.com/jcr/cq/1.0&quot; xmlns:jcr=&quot;http://www.jcp.org/jcr/1.0&quot;\r\n    cq:icon=&quot;textLeft&quot;\r\n    jcr:description=&quot;Rich Text Section&quot;\r\n    jcr:primaryType=&quot;cq:Component&quot;\r\n    jcr:title=&quot;Text (v2)&quot;\r\n    componentGroup=&quot;.core-wcm&quot;/&gt;\r\n```\r\n\r\nThere are namespaces which lead us to think that somewhere there may be a schema, but so far no luck.\r\n\r\n  [1]: https://github.com/adobe/aem-core-wcm-components/blob/main/content/src/content/jcr_root/apps/core/wcm/components/text/v2/text/.content.xml","title":"Is there an XML schema for JCR (Java Content Repository)?","body":"<p>We've been asked to provide content via API to the Adobe Experience Manager CMS (previously CQ?).</p>\n<p>As we store our information in our own system in an XML database, it would make sense to provide some JCR-compliant XML which may have to be enriched by AEM. To make sure our XML is correct we would like to validate it before sending it to AEM.</p>\n<p>But despite having spent quite some time looking for an XML schema (or a JSON schema), we cannot find one. Does it not exist, or does it have a different name? If there is no schema, how can one make sure the XML is valid?</p>\n<p>Here is a code bit from Adobe's <a href=\"https://github.com/adobe/aem-core-wcm-components/blob/main/content/src/content/jcr_root/apps/core/wcm/components/text/v2/text/.content.xml\" rel=\"nofollow noreferrer\">AEM Github repository</a></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jcr:root xmlns:cq=&quot;http://www.day.com/jcr/cq/1.0&quot; xmlns:jcr=&quot;http://www.jcp.org/jcr/1.0&quot;\n    cq:icon=&quot;textLeft&quot;\n    jcr:description=&quot;Rich Text Section&quot;\n    jcr:primaryType=&quot;cq:Component&quot;\n    jcr:title=&quot;Text (v2)&quot;\n    componentGroup=&quot;.core-wcm&quot;/&gt;\n</code></pre>\n<p>There are namespaces which lead us to think that somewhere there may be a schema, but so far no luck.</p>\n"},{"tags":["java","primes","biginteger"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":2,"creation_date":1647900029,"post_id":71564562,"comment_id":126483348,"body_markdown":"My guess is that there are other ranges of primes for which you get considerably poorer results. It might be that many of the first 1M integers are the &quot;easy ones&quot; to check.","body":"My guess is that there are other ranges of primes for which you get considerably poorer results. It might be that many of the first 1M integers are the &quot;easy ones&quot; to check."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1647900907,"post_id":71564562,"comment_id":126483565,"body_markdown":"The implementation references ANSI X9.80 for the logic.","body":"The implementation references ANSI X9.80 for the logic."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1647909251,"post_id":71564562,"comment_id":126485099,"body_markdown":"Even at a certainty of `2`,  `BigInteger b = (BigInteger.TWO.pow(82589933)).subtract(BigInteger.ONE);` which is the largest known prime takes a long time (at least 10 minutes on my PC) to return.  And that is small since the largest BigInteger permitted takes `Integer.MAX_VALUE` as  an argument to the `pow` method.","body":"Even at a certainty of <code>2</code>,  <code>BigInteger b = (BigInteger.TWO.pow(82589933)).subtract(BigInteger.ONE);</code> which is the largest known prime takes a long time (at least 10 minutes on my PC) to return.  And that is small since the largest BigInteger permitted takes <code>Integer.MAX_VALUE</code> as  an argument to the <code>pow</code> method."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1647912222,"post_id":71564562,"comment_id":126485543,"body_markdown":"The probability is related solely to one of the internal underlying tests called the miller-rabin primality test. *Most* composites will be detected rather easily, but a few stubborn ones are harder to reveal. That probability is a worst case probability in case the composite you are testing just happens to be one of the stubborn ones.","body":"The probability is related solely to one of the internal underlying tests called the miller-rabin primality test. <i>Most</i> composites will be detected rather easily, but a few stubborn ones are harder to reveal. That probability is a worst case probability in case the composite you are testing just happens to be one of the stubborn ones."}],"answers":[{"comments":[{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1647903606,"post_id":71565106,"comment_id":126484173,"body_markdown":"Seems a bit vague","body":"Seems a bit vague"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1647903680,"post_id":71565106,"comment_id":126484189,"body_markdown":"@MorganS42: Why?  &quot;99.9% &gt;= 0.75&quot; is exactly the answer you get by reading the documentation carefully.","body":"@MorganS42: Why?  &quot;99.9% &gt;= 0.75&quot; is exactly the answer you get by reading the documentation carefully."},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1647904204,"post_id":71565106,"comment_id":126484280,"body_markdown":"That&#39;s true and I do think it answers the question, I had not noticed that detail in the documentation. Nonetheless 99.9% is significantly higher than 75%, why so? I know you said that it&#39;s because only small numbers were being tested, but when is it no longer considered small? A million? A billion? etc. The BigInteger class defines the SMALL_PRIME_THRESHOLD at 95; I am aware that there would be optimisations for small primes larger then this. Even still I would expect a true certainty of 90%, 95% even 99%, but 99.9% is on a whole other level. After reading your answer I am still left puzzled.","body":"That&#39;s true and I do think it answers the question, I had not noticed that detail in the documentation. Nonetheless 99.9% is significantly higher than 75%, why so? I know you said that it&#39;s because only small numbers were being tested, but when is it no longer considered small? A million? A billion? etc. The BigInteger class defines the SMALL_PRIME_THRESHOLD at 95; I am aware that there would be optimisations for small primes larger then this. Even still I would expect a true certainty of 90%, 95% even 99%, but 99.9% is on a whole other level. After reading your answer I am still left puzzled."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1647908622,"post_id":71565106,"comment_id":126485006,"body_markdown":"`1-1/2^certainty` is the ***lower bound***.  There&#39;s nothing in the definition saying the actual value must be close to the lower bound, only that it will be greater than the lower bound, i.e. some (any) value between `1-1/2^certainty` and `1`.  `0.999` is definitely within that range.","body":"<code>1-1&#47;2^certainty</code> is the <b><i>lower bound</i></b>.  There&#39;s nothing in the definition saying the actual value must be close to the lower bound, only that it will be greater than the lower bound, i.e. some (any) value between <code>1-1&#47;2^certainty</code> and <code>1</code>.  <code>0.999</code> is definitely within that range."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1647920308,"post_id":71565106,"comment_id":126486857,"body_markdown":"Note that it&#39;s not necessarily about primes smaller than 95, but composite numbers with factors &lt;= 95.  A huge fraction of all numbers -- and you are _testing_ all numbers -- have factors &lt;= 95.  Most primes used for crypto -- a relevant application of BigInteger -- are on the order of 10^77 at least.","body":"Note that it&#39;s not necessarily about primes smaller than 95, but composite numbers with factors &lt;= 95.  A huge fraction of all numbers -- and you are <i>testing</i> all numbers -- have factors &lt;= 95.  Most primes used for crypto -- a relevant application of BigInteger -- are on the order of 10^77 at least."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1647989437,"post_id":71565106,"comment_id":126509534,"body_markdown":"*Most quality primality testers will have lots of optimizations for small primes...* Java&#39;s has no such optimizations.","body":"<i>Most quality primality testers will have lots of optimizations for small primes...</i> Java&#39;s has no such optimizations."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":6,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1647903636,"creation_date":1647903489,"answer_id":71565106,"question_id":71564562,"body_markdown":"The documentation you&#39;ve cited is correct.\r\n\r\n&gt; certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2&lt;sup&gt;certainty&lt;/sup&gt;)\r\n\r\n99.9% indeed exceeds 1 - 1/(2&lt;sup&gt;2&lt;/sup&gt;) = 3/4, so there&#39;s nothing wrong with what you&#39;ve shown us.\r\n\r\nThe implementation makes no guarantees that that&#39;s _exactly_ the probability, it just provides an implementation whose error is _definitely bounded_ by that certainty.\r\n\r\nMost quality primality testers will have lots of optimizations for small primes, or rather, numbers whose divisors are small composite numbers.  These likely kick in before the random aspects of the algorithm, resulting in higher-than-usual accuracy for small primes.","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>The documentation you've cited is correct.</p>\n<blockquote>\n<p>certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2<sup>certainty</sup>)</p>\n</blockquote>\n<p>99.9% indeed exceeds 1 - 1/(2<sup>2</sup>) = 3/4, so there's nothing wrong with what you've shown us.</p>\n<p>The implementation makes no guarantees that that's <em>exactly</em> the probability, it just provides an implementation whose error is <em>definitely bounded</em> by that certainty.</p>\n<p>Most quality primality testers will have lots of optimizations for small primes, or rather, numbers whose divisors are small composite numbers.  These likely kick in before the random aspects of the algorithm, resulting in higher-than-usual accuracy for small primes.</p>\n"},{"tags":[],"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1682716163,"creation_date":1647991414,"answer_id":71580103,"question_id":71564562,"body_markdown":"These statements frequently cause confusion. I will attempt to explain it a little better here.\r\n\r\nJava&#39;s `BigInteger.isProbablePrime()` contains no optimizations for small integers at all, except 0, 1, and 2 are treated as special cases and all even integers except 2 are immediately declared composite. This will be true as of the time this was written.\r\n\r\nAll other odd integers are checked for primality using the Miller-Rabin (MR) primality test. In addition, if the integer is 100 bits or larger it is also checked with something called the Lucas-Lehmer test.\r\n\r\nMR is a complicated primality test whose explanation and analysis are beyond the scope of an SO answer. The key point is that, as far as MR is concerned, not all composites are created equal. A very, very tiny fraction are *stubborn*, which means it&#39;s much, much harder to discover their compositeness. A few examples: amongst the small odd composites, 91, 703, and 1891 are stubborn. MR overcomes this by trying multiple randomized attempts to discover the compositeness of an integer. Rabin&#39;s analysis shows that, for the most stubborn composites, a single randomized attempt still has at least a 75% (3/4) probability of revealing its compositeness.\r\n\r\nThe algorithm has no way to know which composites are stubborn. And for cryptography, getting a number you&#39;re told is prime but is actually composite can be potentially disastrous. So, for safety, the formula for `certainty` assumes that *all* the numbers it tests for primality are are stubborn composites or real primes. The `certainty` argument is almost equivalent to specifying the number of randomized attempts that the MR algorithm needs to perform. In reality, the relationship between the `certainty` argument and the number of randomized attempts in the Java implementation seems more complicated and I don&#39;t completely understand it myself just from reading the source code.\r\n\r\nBut remember I said that the fraction of composites that are stubborn is very, very small. Almost every composite you test is not stubborn, and will fail MR after only a single randomized attempt as primes get larger. That&#39;s why your success rate appears to be 99.9%.\r\n\r\nAs an experiment to see how different composites perform, change your program to instead just repeatedly try confirming the compositeness of, say, 1891. You will see something closer to only 75% success.\r\n\r\nA list of relatively small MR-stubborn composites is [here](https://oeis.org/A090659).","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>These statements frequently cause confusion. I will attempt to explain it a little better here.</p>\n<p>Java's <code>BigInteger.isProbablePrime()</code> contains no optimizations for small integers at all, except 0, 1, and 2 are treated as special cases and all even integers except 2 are immediately declared composite. This will be true as of the time this was written.</p>\n<p>All other odd integers are checked for primality using the Miller-Rabin (MR) primality test. In addition, if the integer is 100 bits or larger it is also checked with something called the Lucas-Lehmer test.</p>\n<p>MR is a complicated primality test whose explanation and analysis are beyond the scope of an SO answer. The key point is that, as far as MR is concerned, not all composites are created equal. A very, very tiny fraction are <em>stubborn</em>, which means it's much, much harder to discover their compositeness. A few examples: amongst the small odd composites, 91, 703, and 1891 are stubborn. MR overcomes this by trying multiple randomized attempts to discover the compositeness of an integer. Rabin's analysis shows that, for the most stubborn composites, a single randomized attempt still has at least a 75% (3/4) probability of revealing its compositeness.</p>\n<p>The algorithm has no way to know which composites are stubborn. And for cryptography, getting a number you're told is prime but is actually composite can be potentially disastrous. So, for safety, the formula for <code>certainty</code> assumes that <em>all</em> the numbers it tests for primality are are stubborn composites or real primes. The <code>certainty</code> argument is almost equivalent to specifying the number of randomized attempts that the MR algorithm needs to perform. In reality, the relationship between the <code>certainty</code> argument and the number of randomized attempts in the Java implementation seems more complicated and I don't completely understand it myself just from reading the source code.</p>\n<p>But remember I said that the fraction of composites that are stubborn is very, very small. Almost every composite you test is not stubborn, and will fail MR after only a single randomized attempt as primes get larger. That's why your success rate appears to be 99.9%.</p>\n<p>As an experiment to see how different composites perform, change your program to instead just repeatedly try confirming the compositeness of, say, 1891. You will see something closer to only 75% success.</p>\n<p>A list of relatively small MR-stubborn composites is <a href=\"https://oeis.org/A090659\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71580103,"answer_count":2,"score":3,"last_activity_date":1682716163,"creation_date":1647899596,"question_id":71564562,"body_markdown":"I understand the [certainty](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#isProbablePrime(int)) argument to mean:\r\n\r\n&gt; certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2&lt;sup&gt;certainty&lt;/sup&gt;)\r\n\r\nFrom my experiments, it seems to exceed it by quite a lot! The code below finds &quot;probable primes&quot; between 2 and 1 million and checks against a set of definite primes to see if it was a false positive.\r\n\r\nI&#39;m using a certainty argument of 2. I therefore expect that only 75% of &quot;probable primes&quot; will be actual primes. (1 - 1/2&lt;sup&gt;2&lt;/sup&gt; = 0.75 = 75%.)\r\n\r\nActually, it gets it right 99.9% of the time.\r\n\r\nIs my understanding of the meaning of &quot;certainty&quot; correct? I suspect it might not be if the certainty I&#39;ve seen experimentally exceeds my expectation by so much.\r\n\r\n\r\n    import java.math.BigInteger;\r\n    import java.util.BitSet;\r\n    \r\n    import static java.lang.Math.sqrt;\r\n    \r\n    public class PrimesCalculator {\r\n        public final int max;\r\n        private final BitSet sieve;  // Set of all non-primes from 2 to max.\r\n    \r\n        public PrimesCalculator(int max) {\r\n            this.max = max;\r\n            sieve = new BitSet(max+1);\r\n            for (int n = 2, sqrtMax = (int) sqrt(max); n &lt; sqrtMax; n++)\r\n                for (int i = n * 2; i &lt; max; i += n)\r\n                    sieve.set(i);\r\n        }\r\n    \r\n        public boolean isPrime(int n) {\r\n            return !sieve.get(n);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            PrimesCalculator calc = new PrimesCalculator(1_000_000);\r\n            int numPrimes = 0;\r\n            int numProbablePrimes = 0;\r\n            for (int i = 2; i &lt; calc.max; i++)\r\n                if (BigInteger.valueOf(i).isProbablePrime(2)) {\r\n                    numProbablePrimes++;\r\n                    if (calc.isPrime(i))\r\n                        numPrimes++;\r\n                }\r\n            System.out.printf(&quot;%s/%s (%s%%)%n&quot;, numPrimes, numProbablePrimes, numPrimes / (numProbablePrimes / 100.0));\r\n        }\r\n    }\r\n\r\n","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>I understand the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#isProbablePrime(int)\" rel=\"nofollow noreferrer\">certainty</a> argument to mean:</p>\n<blockquote>\n<p>certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2<sup>certainty</sup>)</p>\n</blockquote>\n<p>From my experiments, it seems to exceed it by quite a lot! The code below finds &quot;probable primes&quot; between 2 and 1 million and checks against a set of definite primes to see if it was a false positive.</p>\n<p>I'm using a certainty argument of 2. I therefore expect that only 75% of &quot;probable primes&quot; will be actual primes. (1 - 1/2<sup>2</sup> = 0.75 = 75%.)</p>\n<p>Actually, it gets it right 99.9% of the time.</p>\n<p>Is my understanding of the meaning of &quot;certainty&quot; correct? I suspect it might not be if the certainty I've seen experimentally exceeds my expectation by so much.</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.BitSet;\n\nimport static java.lang.Math.sqrt;\n\npublic class PrimesCalculator {\n    public final int max;\n    private final BitSet sieve;  // Set of all non-primes from 2 to max.\n\n    public PrimesCalculator(int max) {\n        this.max = max;\n        sieve = new BitSet(max+1);\n        for (int n = 2, sqrtMax = (int) sqrt(max); n &lt; sqrtMax; n++)\n            for (int i = n * 2; i &lt; max; i += n)\n                sieve.set(i);\n    }\n\n    public boolean isPrime(int n) {\n        return !sieve.get(n);\n    }\n\n    public static void main(String[] args) {\n        PrimesCalculator calc = new PrimesCalculator(1_000_000);\n        int numPrimes = 0;\n        int numProbablePrimes = 0;\n        for (int i = 2; i &lt; calc.max; i++)\n            if (BigInteger.valueOf(i).isProbablePrime(2)) {\n                numProbablePrimes++;\n                if (calc.isPrime(i))\n                    numPrimes++;\n            }\n        System.out.printf(&quot;%s/%s (%s%%)%n&quot;, numPrimes, numProbablePrimes, numPrimes / (numProbablePrimes / 100.0));\n    }\n}\n</code></pre>\n"},{"tags":["java","jframe","jpanel","jbutton"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1682398043,"post_id":76097622,"comment_id":134204610,"body_markdown":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers. 2) Read the section from the Swing tutorial on [How to Use CardLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) for working examples to get you started.","body":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers. 2) Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">How to Use CardLayout</a> for working examples to get you started."},{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":1,"creation_date":1682403659,"post_id":76097622,"comment_id":134205261,"body_markdown":"Welcome to SO, I think it would be usefull to read: https://stackoverflow.com/help/minimal-reproducible-example","body":"Welcome to SO, I think it would be usefull to read: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"owner":{"account_id":28407200,"reputation":1,"user_id":21731060,"display_name":"SoraKing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682716140,"creation_date":1682396544,"question_id":76097622,"body_markdown":"I am new to programming just picked up for the last six months and have been on and off. My question is how do I get my button to take me to my next panel to show my game panel from my main panel. I have a switch case which should check for my value of my button which I set to start when clicked. But for some reason I am not understanding what I am doing wrong.\r\n\r\nI am at lost and just need some help really picking up on my mistake that I am making and how to improve. Each of these class are different files.\r\n\r\n```\r\n// Just to start game and nothing else\r\npublic class Starter\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tWindow window = new Window();\r\n\t\twindow.createWindow();\r\n\t}\r\n}\r\n\r\n// Has values that can be used for all classes\r\npublic class Common\r\n{\r\n\tint width, height;\r\n\tFont titleFont;\r\n\tFont normalFont;\r\n\tColor white;\r\n\tColor black;\r\n\t\r\n\tpublic Common()\r\n\t{\r\n\t\twidth = 800;\r\n\t\theight = 600;\r\n\t\ttitleFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 90);\r\n\t\tnormalFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 26);\r\n\t\twhite = Color.white;\r\n\t\tblack = Color.black;\r\n\t}\r\n}\r\n\r\n//Class to create just Frame and add to frame\r\npublic class Window\r\n{\r\n\tJFrame window;\r\n\tString title;\r\n\tMainPanel mainPanel;\r\n\tCommon values;\r\n\t\r\n\tpublic Window()\r\n\t{\r\n\t\twindow = new JFrame();\r\n\t\ttitle = &quot;Game&quot;;\r\n\t\tmainPanel = new MainPanel();\r\n\t\tvalues = new Common();\r\n\t}\r\n\t\r\n\tpublic void createWindow()\r\n\t{\r\n\t\twindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\twindow.setTitle(title);\r\n\t\twindow.setSize(values.width, values.height);\r\n\t\twindow.setLayout(null);\r\n\t\twindow.setLocationRelativeTo(null);\r\n\t\t\r\n\t\twindow.add(mainPanel.mainPanel());\r\n\t\tmainPanel.createMainPanel();\r\n\t\t\r\n\t\twindow.setVisible(true);\t\r\n\t}\r\n}\r\n\r\n//Main Menu Panel\r\npublic class MainPanel\r\n{\r\n\tJPanel mainPanel;\r\n\tCommon values;\r\n\tJButton startButton;\r\n\tJLabel titleLabel;\r\n\tManager manager;\r\n\t\r\n\tpublic MainPanel()\r\n\t{\r\n\t\tmainPanel = new JPanel();\r\n\t\tvalues = new Common();\r\n\t\tstartButton = new JButton();\r\n\t\ttitleLabel = new JLabel();\r\n\t\tmanager = new Manager();\r\n\t}\r\n\t\r\n\tpublic void createMainPanel()\r\n\t{\r\n\t\tmainPanel.setBounds(0, 0, values.width, values.height);\r\n\t\tmainPanel.setBackground(Color.black);\r\n\t\tmainPanel.setLayout(null);\r\n\t\t\r\n\t\tstartButton.setText(&quot;Start&quot;);\r\n\t\tstartButton.setBounds(350, 400, 100, 50);\r\n\t\tstartButton.setFocusable(false);\r\n\t\tstartButton.setBackground(values.black);\r\n\t\tstartButton.setForeground(values.white);\r\n\t\tstartButton.setFont(values.normalFont);\r\n\t\tstartButton.setFocusPainted(false);\r\n\t\tstartButton.addActionListener(manager);\r\n\t\tstartButton.setActionCommand(&quot;Start&quot;);\r\n\t\t\r\n\t\ttitleLabel.setText(&quot;Solo Level&quot;);\r\n\t\ttitleLabel.setBounds(200, 100, 600, 100);\r\n\t\ttitleLabel.setFont(values.titleFont);\r\n\t\ttitleLabel.setForeground(values.white);\r\n\t\ttitleLabel.setBackground(values.black);\r\n\t\t\r\n\t\t//Add everything to Main Panel\r\n\t\tmainPanel.add(titleLabel);\r\n\t\tmainPanel.add(startButton);\r\n\t}\r\n\t\r\n\tpublic JPanel mainPanel()\r\n\t{\r\n\t\treturn mainPanel;\r\n\t}\r\n}\r\n\r\n// Class to control buttons and change panels\r\npublic class Manager implements ActionListener\r\n{\r\n\tString choice;\r\n\tMainPanel mp;\r\n\tGamePanel gp;\r\n\r\n\tpublic void actionPerformed(ActionEvent e)\r\n\t{\r\n\t\tchoice = e.getActionCommand();\r\n\t\t\r\n\t\tswitch(choice)\r\n\t\t{\r\n\t\t\tcase &quot;Start&quot; :\r\n\t\t\t\tchangeMainPanel();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;next&quot; : \r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;left&quot; : \r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;right&quot; :\r\n\t\t\t\tbreak;\r\n\t\t} \r\n\t}\r\n\t\r\n\tpublic void changeMainPanel()\r\n\t{\r\n\t\tmp.mainPanel.setVisible(false);\r\n\t\tgp.gamePanel.setVisible(true);\r\n\t}\r\n}\r\n\r\n// Game Panel not working\r\npublic class GamePanel\r\n{\r\n\tJPanel gamePanel;\r\n\tCommon values;\r\n\tJLabel test;\r\n\t\r\n\tpublic GamePanel()\r\n\t{\r\n\t\tgamePanel = new JPanel();\r\n\t\tvalues = new Common();\r\n\t\ttest = new JLabel();\r\n\t}\r\n\t\r\n\tpublic void createGamePanel()\r\n\t{\r\n\t\tgamePanel.setBounds(0, 0, values.width, values.height);\r\n\t\ttest.setText(&quot;This is a test&quot;);\r\n\t\ttest.setBounds(100, 100, 250, 250);\r\n\t\tgamePanel.add(test);\r\n\t}\r\n}","title":"How to use buttons in java","body":"<p>I am new to programming just picked up for the last six months and have been on and off. My question is how do I get my button to take me to my next panel to show my game panel from my main panel. I have a switch case which should check for my value of my button which I set to start when clicked. But for some reason I am not understanding what I am doing wrong.</p>\n<p>I am at lost and just need some help really picking up on my mistake that I am making and how to improve. Each of these class are different files.</p>\n<pre><code>// Just to start game and nothing else\npublic class Starter\n{\n    public static void main(String[] args)\n    {\n        Window window = new Window();\n        window.createWindow();\n    }\n}\n\n// Has values that can be used for all classes\npublic class Common\n{\n    int width, height;\n    Font titleFont;\n    Font normalFont;\n    Color white;\n    Color black;\n    \n    public Common()\n    {\n        width = 800;\n        height = 600;\n        titleFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 90);\n        normalFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 26);\n        white = Color.white;\n        black = Color.black;\n    }\n}\n\n//Class to create just Frame and add to frame\npublic class Window\n{\n    JFrame window;\n    String title;\n    MainPanel mainPanel;\n    Common values;\n    \n    public Window()\n    {\n        window = new JFrame();\n        title = &quot;Game&quot;;\n        mainPanel = new MainPanel();\n        values = new Common();\n    }\n    \n    public void createWindow()\n    {\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.setTitle(title);\n        window.setSize(values.width, values.height);\n        window.setLayout(null);\n        window.setLocationRelativeTo(null);\n        \n        window.add(mainPanel.mainPanel());\n        mainPanel.createMainPanel();\n        \n        window.setVisible(true);    \n    }\n}\n\n//Main Menu Panel\npublic class MainPanel\n{\n    JPanel mainPanel;\n    Common values;\n    JButton startButton;\n    JLabel titleLabel;\n    Manager manager;\n    \n    public MainPanel()\n    {\n        mainPanel = new JPanel();\n        values = new Common();\n        startButton = new JButton();\n        titleLabel = new JLabel();\n        manager = new Manager();\n    }\n    \n    public void createMainPanel()\n    {\n        mainPanel.setBounds(0, 0, values.width, values.height);\n        mainPanel.setBackground(Color.black);\n        mainPanel.setLayout(null);\n        \n        startButton.setText(&quot;Start&quot;);\n        startButton.setBounds(350, 400, 100, 50);\n        startButton.setFocusable(false);\n        startButton.setBackground(values.black);\n        startButton.setForeground(values.white);\n        startButton.setFont(values.normalFont);\n        startButton.setFocusPainted(false);\n        startButton.addActionListener(manager);\n        startButton.setActionCommand(&quot;Start&quot;);\n        \n        titleLabel.setText(&quot;Solo Level&quot;);\n        titleLabel.setBounds(200, 100, 600, 100);\n        titleLabel.setFont(values.titleFont);\n        titleLabel.setForeground(values.white);\n        titleLabel.setBackground(values.black);\n        \n        //Add everything to Main Panel\n        mainPanel.add(titleLabel);\n        mainPanel.add(startButton);\n    }\n    \n    public JPanel mainPanel()\n    {\n        return mainPanel;\n    }\n}\n\n// Class to control buttons and change panels\npublic class Manager implements ActionListener\n{\n    String choice;\n    MainPanel mp;\n    GamePanel gp;\n\n    public void actionPerformed(ActionEvent e)\n    {\n        choice = e.getActionCommand();\n        \n        switch(choice)\n        {\n            case &quot;Start&quot; :\n                changeMainPanel();\n                break;\n            case &quot;next&quot; : \n                break;\n            case &quot;left&quot; : \n                break;\n            case &quot;right&quot; :\n                break;\n        } \n    }\n    \n    public void changeMainPanel()\n    {\n        mp.mainPanel.setVisible(false);\n        gp.gamePanel.setVisible(true);\n    }\n}\n\n// Game Panel not working\npublic class GamePanel\n{\n    JPanel gamePanel;\n    Common values;\n    JLabel test;\n    \n    public GamePanel()\n    {\n        gamePanel = new JPanel();\n        values = new Common();\n        test = new JLabel();\n    }\n    \n    public void createGamePanel()\n    {\n        gamePanel.setBounds(0, 0, values.width, values.height);\n        test.setText(&quot;This is a test&quot;);\n        test.setBounds(100, 100, 250, 250);\n        gamePanel.add(test);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc"],"owner":{"account_id":27971586,"reputation":49,"user_id":21361197,"display_name":"xdd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682715879,"creation_date":1681485813,"question_id":76016663,"body_markdown":"     @ModelAttribute and Session\r\nwhen i was searching about model Attribute i found tutorials that store entire Object like user but i    can do it also with Session to identify the User\r\n\r\nwhat i want to know is what is the difference between Session and ModelAttribute and when to use Session and when to Use ModelAttribute`","title":"what is the difference between Session and ModelAttribute in spring mvc","body":"<pre><code> @ModelAttribute and Session\n</code></pre>\n<p>when i was searching about model Attribute i found tutorials that store entire Object like user but i    can do it also with Session to identify the User</p>\n<p>what i want to know is what is the difference between Session and ModelAttribute and when to use Session and when to Use ModelAttribute`</p>\n"},{"tags":["java","jvm","websphere"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":6,"creation_date":1682596063,"post_id":76120002,"comment_id":134242534,"body_markdown":"February 2002. That software is old enough to vote. And is totally unsupported at this time.","body":"February 2002. That software is old enough to vote. And is totally unsupported at this time."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682597945,"post_id":76120002,"comment_id":134242982,"body_markdown":"I think replacing it with the cacerts of a recent Java version might work, though I&#39;m not sure if the file format changed between then and now.","body":"I think replacing it with the cacerts of a recent Java version might work, though I&#39;m not sure if the file format changed between then and now."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1682598049,"post_id":76120002,"comment_id":134243012,"body_markdown":"There is not enough context in the question to understand if the issue is on the server side or a custom keystone in the application.","body":"There is not enough context in the question to understand if the issue is on the server side or a custom keystone in the application."}],"owner":{"account_id":28384358,"reputation":21,"user_id":21711051,"display_name":"Ben Wang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682715011,"creation_date":1682595921,"question_id":76120002,"body_markdown":"I think I may have met an &quot;IBM java 1.4.2 certificate expired&quot; issue.\r\n\r\nThe app, which calls IBM java 1.4.2, and then connects the server, throws the error:\r\n\r\n```\r\njavax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_expired.\r\n```\r\n\r\nIn the client, I into `/usr/java142/lib/security/`.\r\n\r\nI use `keytool -list -v -keystore cacerts` to check the `cacerts` file.\r\n\r\nBut I do not know how to update this `cacerts`? Or is there any way I can update it?\r\n\r\nFor the server, it is a black box, which I have no rights into it.","title":"IBM java/IBM JVM 1.4.2 certificate expired, can I update it without server?","body":"<p>I think I may have met an &quot;IBM java 1.4.2 certificate expired&quot; issue.</p>\n<p>The app, which calls IBM java 1.4.2, and then connects the server, throws the error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_expired.\n</code></pre>\n<p>In the client, I into <code>/usr/java142/lib/security/</code>.</p>\n<p>I use <code>keytool -list -v -keystore cacerts</code> to check the <code>cacerts</code> file.</p>\n<p>But I do not know how to update this <code>cacerts</code>? Or is there any way I can update it?</p>\n<p>For the server, it is a black box, which I have no rights into it.</p>\n"},{"tags":["java","ssl","rally","apache-httpclient-4.x","sslhandshakeexception"],"comments":[{"owner":{"account_id":376614,"reputation":8400,"user_id":728184,"display_name":"Kyle Morse"},"score":0,"creation_date":1461637456,"post_id":36851534,"comment_id":61277157,"body_markdown":"Is there a reason you can&#39;t use the Rally Rest Toolkit for Java? https://github.com/RallyTools/RallyRestToolkitForJava","body":"Is there a reason you can&#39;t use the Rally Rest Toolkit for Java? <a href=\"https://github.com/RallyTools/RallyRestToolkitForJava\" rel=\"nofollow noreferrer\">github.com/RallyTools/RallyRestToolkitForJava</a>"},{"owner":{"account_id":4785622,"reputation":79,"user_id":3866223,"accept_rate":80,"display_name":"Tontodoin"},"score":0,"creation_date":1461683887,"post_id":36851534,"comment_id":61305410,"body_markdown":"I&#39;m using the Rally Rest Toolkit for java. The issue arises in the query function of the api. The get this SSLhandshakeException at this stage. I can temporarily tackle this issue by adding the certificate in trusted keystore but the validity is set to a small range.","body":"I&#39;m using the Rally Rest Toolkit for java. The issue arises in the query function of the api. The get this SSLhandshakeException at this stage. I can temporarily tackle this issue by adding the certificate in trusted keystore but the validity is set to a small range."}],"answers":[{"tags":[],"owner":{"account_id":2807640,"reputation":5946,"user_id":2414556,"display_name":"nickm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461692264,"creation_date":1461692264,"answer_id":36871986,"question_id":36851534,"body_markdown":"You wrote that you want to find a way to allow all certificates, and use HttpClient with Rally Rest Toolkit for Java. Here is how you can access HttpClient from restApi:\r\n\r\n    HttpClient client = restApi.getClient();\r\n\r\nHere is an example that trusts all certs, e.g. self-signed certs:\r\n\r\n    public class ConnnectionTestWithHTTPClient {\r\n    \r\n    \tpublic static void main(String[] args) throws URISyntaxException, IOException {\r\n    \t\t\r\n    \r\n    \t    String host = &quot;https://rally1.rallydev.com&quot;;\r\n    \t    String apiKey = &quot;_abc123&quot;;\r\n    \t    String applicationName = &quot;Connnection Test With HTTPClient&quot;;\r\n    \t    RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);\r\n            restApi.setApplicationName(applicationName); \r\n            //restApi.setProxy(new URI(&quot;http://myproxy.mycompany.com&quot;), &quot;MyProxyUsername&quot;, &quot;MyProxyPassword&quot;);  //YOUR PROXY SETTINGS HERE\r\n            HttpClient client = restApi.getClient();\r\n            try {\r\n            \tSSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {\r\n                    public boolean isTrusted(X509Certificate[] certificate, String authType)\r\n                        throws CertificateException {\r\n                        //trust all certs\r\n                        return true;\r\n                    }\r\n                }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n                client.getConnectionManager().getSchemeRegistry().register(new Scheme(&quot;https&quot;, 443, sf));\r\n                \r\n            \tString workspaceRef = &quot;/workspace/12345&quot;; \r\n            \tGetRequest getRequest = new GetRequest(workspaceRef);\r\n            \tGetResponse getResponse = restApi.get(getRequest);\r\n            \tSystem.out.println(getResponse.getObject());\r\n            } catch (Exception e) {\r\n            \tSystem.out.println(e);\r\n            } finally {\r\n                restApi.close();\r\n            }   \r\n    \t} \r\n    }","title":"SSLHandshakeException with Rally rest api","body":"<p>You wrote that you want to find a way to allow all certificates, and use HttpClient with Rally Rest Toolkit for Java. Here is how you can access HttpClient from restApi:</p>\n\n<pre><code>HttpClient client = restApi.getClient();\n</code></pre>\n\n<p>Here is an example that trusts all certs, e.g. self-signed certs:</p>\n\n<pre><code>public class ConnnectionTestWithHTTPClient {\n\n    public static void main(String[] args) throws URISyntaxException, IOException {\n\n\n        String host = \"https://rally1.rallydev.com\";\n        String apiKey = \"_abc123\";\n        String applicationName = \"Connnection Test With HTTPClient\";\n        RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);\n        restApi.setApplicationName(applicationName); \n        //restApi.setProxy(new URI(\"http://myproxy.mycompany.com\"), \"MyProxyUsername\", \"MyProxyPassword\");  //YOUR PROXY SETTINGS HERE\n        HttpClient client = restApi.getClient();\n        try {\n            SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {\n                public boolean isTrusted(X509Certificate[] certificate, String authType)\n                    throws CertificateException {\n                    //trust all certs\n                    return true;\n                }\n            }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n            client.getConnectionManager().getSchemeRegistry().register(new Scheme(\"https\", 443, sf));\n\n            String workspaceRef = \"/workspace/12345\"; \n            GetRequest getRequest = new GetRequest(workspaceRef);\n            GetResponse getResponse = restApi.get(getRequest);\n            System.out.println(getResponse.getObject());\n        } catch (Exception e) {\n            System.out.println(e);\n        } finally {\n            restApi.close();\n        }   \n    } \n}\n</code></pre>\n"}],"owner":{"account_id":4785622,"reputation":79,"user_id":3866223,"accept_rate":80,"display_name":"Tontodoin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36871986,"answer_count":1,"score":1,"last_activity_date":1682714834,"creation_date":1461620265,"question_id":36851534,"body_markdown":"The query function in the api is failing with the following exception:\r\n\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nTo counter this exception, I manually downloaded the certificate and imported it to cacerts and everything works as excepted. But the validity duration of this certificate has been set to a few days making this solution nonviable. \r\n\r\nFor the test purpose, I have created a trust strategy to allow all certificates but I do not find a way to integrate it with Rest Api. I&#39;m using HttpClient 4.4.\r\n\r\nHow do I get past this issue? Thanks.\r\n","title":"SSLHandshakeException with Rally rest api","body":"<p>The query function in the api is failing with the following exception:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n\n<p>To counter this exception, I manually downloaded the certificate and imported it to cacerts and everything works as excepted. But the validity duration of this certificate has been set to a few days making this solution nonviable. </p>\n\n<p>For the test purpose, I have created a trust strategy to allow all certificates but I do not find a way to integrate it with Rest Api. I'm using HttpClient 4.4.</p>\n\n<p>How do I get past this issue? Thanks.</p>\n"},{"tags":["java","spring","spring-boot","liquibase"],"comments":[{"owner":{"account_id":7723297,"reputation":1774,"user_id":5848801,"accept_rate":75,"display_name":"Simon Ludwig"},"score":0,"creation_date":1480200825,"post_id":35997898,"comment_id":68866712,"body_markdown":"I had the same problem and posted my answer here: http://stackoverflow.com/questions/40210247/how-to-drop-in-memory-h2db-between-spring-integration-tests/40805764#40805764","body":"I had the same problem and posted my answer here: <a href=\"http://stackoverflow.com/questions/40210247/how-to-drop-in-memory-h2db-between-spring-integration-tests/40805764#40805764\" title=\"how to drop in memory h2db between spring integration tests\">stackoverflow.com/questions/40210247/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1708812,"reputation":790,"user_id":1567291,"accept_rate":77,"display_name":"bytor99999"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475090089,"creation_date":1475090089,"answer_id":39755881,"question_id":35997898,"body_markdown":"Not sure if this completely answers your question. There is another property liquibase.default-schema=schemaNameToCreate\r\n\r\nBut even with that I was never able to get it to create the schema from scratch. ","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>Not sure if this completely answers your question. There is another property liquibase.default-schema=schemaNameToCreate</p>\n\n<p>But even with that I was never able to get it to create the schema from scratch. </p>\n"},{"tags":[],"owner":{"account_id":1250945,"reputation":4498,"user_id":1221807,"accept_rate":85,"display_name":"MemLeak"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1579708914,"creation_date":1525613441,"answer_id":50200248,"question_id":35997898,"body_markdown":"There is a `spring.liquibase.dropFirst` config property. Maybe this is what you&#39;re looking for? ","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>There is a <code>spring.liquibase.dropFirst</code> config property. Maybe this is what you're looking for? </p>\n"},{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682714220,"creation_date":1682714220,"answer_id":76133123,"question_id":35997898,"body_markdown":"7 years later I&#39;m maybe a bit smarter to answer my own question. Spring uses a test context cache between tests. That is, if the spring context remains the same between tests, the context is restored from the cache. This is for speeding up the tests. If you change the data, Spring doesn&#39;t notice and restores the context from the cache, even though the requirements have changed. There are several ways to fix this: \r\n- use @DirtiesContext \r\n- use @Transactional on the test \r\n- delete and setup all data &quot;manually&quot; in @BeforeEach","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>7 years later I'm maybe a bit smarter to answer my own question. Spring uses a test context cache between tests. That is, if the spring context remains the same between tests, the context is restored from the cache. This is for speeding up the tests. If you change the data, Spring doesn't notice and restores the context from the cache, even though the requirements have changed. There are several ways to fix this:</p>\n<ul>\n<li>use @DirtiesContext</li>\n<li>use @Transactional on the test</li>\n<li>delete and setup all data &quot;manually&quot; in @BeforeEach</li>\n</ul>\n"}],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23135,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":76133123,"answer_count":3,"score":27,"last_activity_date":1682714220,"creation_date":1457988921,"question_id":35997898,"body_markdown":"I&#39;m trying to setup the database schema and some test data with liquibase for some tests. Each test has a separate changelog which setup the schema and some specific data for the test.\r\n\r\nIn order to make my tests working, I need to drop the schema before each test and fill it with new test data. However, it seems that this is not working because some tests are failing because the old test data is still available. I think something with my configuration is not correct. How can I force liquibase to drop the schema before each test?\r\n\r\nMy tests look as following:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringApplicationConfiguration(classes = MyTestConfig.class)\r\n    @TestPropertySource(properties = &quot;liquibase.change-log=classpath:changelog/schema-with-testdata.xml&quot;)\r\n    public class MyRepositoryTest {\r\n\r\nThe config for the tests looks as follows:\r\n\r\n    @SpringApplicationConfiguration\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(&quot;com.mypackage&quot;)\r\n    @EntityScan(basePackages = { &quot;com.mypackage.domain&quot; })\r\n    @EnableJpaRepositories(basePackages = { &quot;com.mypackage.domain&quot;, &quot;com.mypackage.infra.persistence&quot; })\r\n    public class MyTestConfig {\r\n\r\nAnd the application.properties under src/main/test/resources is \r\n\r\n    liquibase.drop-first=true\r\n    spring.jpa.hibernate.ddl-auto=none","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>I'm trying to setup the database schema and some test data with liquibase for some tests. Each test has a separate changelog which setup the schema and some specific data for the test.</p>\n\n<p>In order to make my tests working, I need to drop the schema before each test and fill it with new test data. However, it seems that this is not working because some tests are failing because the old test data is still available. I think something with my configuration is not correct. How can I force liquibase to drop the schema before each test?</p>\n\n<p>My tests look as following:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = MyTestConfig.class)\n@TestPropertySource(properties = \"liquibase.change-log=classpath:changelog/schema-with-testdata.xml\")\npublic class MyRepositoryTest {\n</code></pre>\n\n<p>The config for the tests looks as follows:</p>\n\n<pre><code>@SpringApplicationConfiguration\n@Configuration\n@EnableAutoConfiguration\n@ComponentScan(\"com.mypackage\")\n@EntityScan(basePackages = { \"com.mypackage.domain\" })\n@EnableJpaRepositories(basePackages = { \"com.mypackage.domain\", \"com.mypackage.infra.persistence\" })\npublic class MyTestConfig {\n</code></pre>\n\n<p>And the application.properties under src/main/test/resources is </p>\n\n<pre><code>liquibase.drop-first=true\nspring.jpa.hibernate.ddl-auto=none\n</code></pre>\n"},{"tags":["java","android-studio","error-handling","compiler-errors","android-manifest"],"comments":[{"owner":{"account_id":3529755,"reputation":613,"user_id":2949696,"accept_rate":67,"display_name":"apex39"},"score":0,"creation_date":1644413761,"post_id":71044526,"comment_id":125599889,"body_markdown":"Please review your project dependencies if they contain legacy libraries","body":"Please review your project dependencies if they contain legacy libraries"}],"answers":[{"comments":[{"owner":{"account_id":5444726,"reputation":1223,"user_id":4331682,"accept_rate":0,"display_name":"Sunil Chaudhary"},"score":1,"creation_date":1648214412,"post_id":71218726,"comment_id":126574237,"body_markdown":"still not working  have any other solution??","body":"still not working  have any other solution??"},{"owner":{"account_id":6316309,"reputation":2040,"user_id":4906130,"display_name":"Bhavnik"},"score":2,"creation_date":1651655115,"post_id":71218726,"comment_id":127412519,"body_markdown":"For me, It worked with the line &quot;android.enableJetifier=true&quot; and by setting maven { url &quot;https://jitpack.io&quot; } in settings.gradle file.","body":"For me, It worked with the line &quot;android.enableJetifier=true&quot; and by setting maven { url &quot;<a href=\"https://jitpack.io\" rel=\"nofollow noreferrer\">jitpack.io</a>&quot; } in settings.gradle file."},{"owner":{"account_id":7958616,"reputation":465,"user_id":6007077,"display_name":"guenter47"},"score":0,"creation_date":1661555390,"post_id":71218726,"comment_id":129808148,"body_markdown":"jcenter() is shot down since February 1, 2022 and can no longer be used.","body":"jcenter() is shot down since February 1, 2022 and can no longer be used."},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":1,"creation_date":1677183282,"post_id":71218726,"comment_id":133293002,"body_markdown":"Why do we need `Jitpack.io` here?","body":"Why do we need <code>Jitpack.io</code> here?"},{"owner":{"account_id":25055536,"reputation":107,"user_id":18910957,"display_name":"oolyvi"},"score":0,"creation_date":1697353285,"post_id":71218726,"comment_id":136267432,"body_markdown":"I did same things without using `maven { url &quot;https://jitpack.io&quot; }` and it solved my problem","body":"I did same things without using <code>maven { url &quot;https:&#47;&#47;jitpack.io&quot; }</code> and it solved my problem"}],"tags":[],"owner":{"account_id":14686445,"reputation":307,"user_id":10606297,"display_name":"JJ Smith"},"comment_count":5,"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1682713555,"creation_date":1645521815,"answer_id":71218726,"question_id":71044526,"body_markdown":"1. Comment this line in settings.gradle\r\n```\r\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n```    \r\n2. Add this in build.gradle (project level):\r\n```\r\nallprojects {\r\n   repositories {\r\n       google()\r\n       jcenter()\r\n       maven { url &quot;https://jitpack.io&quot; }\r\n   }\r\n}\r\n```\r\n3. Add in gradle.properties:\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<ol>\n<li>Comment this line in settings.gradle</li>\n</ol>\n<pre><code>repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n</code></pre>\n<ol start=\"2\">\n<li>Add this in build.gradle (project level):</li>\n</ol>\n<pre><code>allprojects {\n   repositories {\n       google()\n       jcenter()\n       maven { url &quot;https://jitpack.io&quot; }\n   }\n}\n</code></pre>\n<ol start=\"3\">\n<li>Add in gradle.properties:</li>\n</ol>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4859445,"reputation":961,"user_id":3919531,"accept_rate":60,"display_name":"Damien"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652189061,"creation_date":1652189061,"answer_id":72187193,"question_id":71044526,"body_markdown":"My solution is simialar to @JJ Smith one. But I didn&#39;t do anything to `build.gradle` file. So:\r\n1. Comment this line in `setting.gradle`:\r\n\r\n```\r\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n```\r\n\r\n2. Make sure you have these 2 lines in `gradle.properties` (if not add them or change them to true):\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```\r\n\r\n3. Sync gradle\r\n\r\nI **DID NOT** change the `build.gradle`(at project level) file. I report it here just for the sake of completeness:\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n    }\r\n    dependencies {\r\n        //...\r\n    }\r\n}\r\n\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.2.0&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.2.0&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.21&#39; apply false\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>My solution is simialar to @JJ Smith one. But I didn't do anything to <code>build.gradle</code> file. So:</p>\n<ol>\n<li>Comment this line in <code>setting.gradle</code>:</li>\n</ol>\n<pre><code>repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n</code></pre>\n<ol start=\"2\">\n<li>Make sure you have these 2 lines in <code>gradle.properties</code> (if not add them or change them to true):</li>\n</ol>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n<ol start=\"3\">\n<li>Sync gradle</li>\n</ol>\n<p>I <strong>DID NOT</strong> change the <code>build.gradle</code>(at project level) file. I report it here just for the sake of completeness:</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n    }\n    dependencies {\n        //...\n    }\n}\n\n\nplugins {\n    id 'com.android.application' version '7.2.0' apply false\n    id 'com.android.library' version '7.2.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.21' apply false\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11279330,"reputation":340,"user_id":8272380,"display_name":"Dhanushka Sandaruwan"},"score":1,"creation_date":1691224413,"post_id":72919692,"comment_id":135465532,"body_markdown":"This worked fine and No needed to change anywhere else.","body":"This worked fine and No needed to change anywhere else."}],"tags":[],"owner":{"account_id":23365040,"reputation":802,"user_id":17436751,"display_name":"Sayooj"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1657355750,"creation_date":1657351704,"answer_id":72919692,"question_id":71044526,"body_markdown":"Add these in gradle.properties:\r\n\r\n    android.enableJetifier=true\r\n    android.useAndroidX=true\r\n\r\nSync your `gradle` and Run the app. It worked fine for me and I didn&#39;t have to do the changes in `setting.gradle` and `build.gradle` (Project level) or any other files.","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>Add these in gradle.properties:</p>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n<p>Sync your <code>gradle</code> and Run the app. It worked fine for me and I didn't have to do the changes in <code>setting.gradle</code> and <code>build.gradle</code> (Project level) or any other files.</p>\n"},{"tags":[],"owner":{"account_id":22083723,"reputation":124,"user_id":16342910,"display_name":"Prasanna Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663930115,"creation_date":1663930115,"answer_id":73826607,"question_id":71044526,"body_markdown":"Check if you the following dependency:\r\n\r\n    implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n\r\nIf you have it, just remove it.\r\nIt worked for me.","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>Check if you the following dependency:</p>\n<pre><code>implementation 'com.android.support:multidex:1.0.3'\n</code></pre>\n<p>If you have it, just remove it.\nIt worked for me.</p>\n"}],"owner":{"account_id":23435740,"reputation":479,"user_id":17493859,"display_name":"Arnav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35532,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1682713555,"creation_date":1644385392,"question_id":71044526,"body_markdown":"I am getting an warning in android studio when I run my app. the warning is-\r\n***Your project has set `android.useAndroidX=true`, but configuration `debugRuntimeClasspath` still contains legacy support libraries, which may cause runtime issues.***\r\nAnd a error-\r\n***Manifest merger failed with multiple errors, see logs***\r\nI checked my manifest file and there is no error in my manifest file. I tried debugging the app but it still doesn&#39;t fix. I am getting this after updating android studio from android studio arctic fox to android studio bumble bee which is recently released. I updated the gradle version tried cleaning project, invalidating caches but nothing worked. I increased the memory heap size and enabled multidex but still it is not fixed. Please help me out.\r\n","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>I am getting an warning in android studio when I run my app. the warning is-\n<em><strong>Your project has set <code>android.useAndroidX=true</code>, but configuration <code>debugRuntimeClasspath</code> still contains legacy support libraries, which may cause runtime issues.</strong></em>\nAnd a error-\n<em><strong>Manifest merger failed with multiple errors, see logs</strong></em>\nI checked my manifest file and there is no error in my manifest file. I tried debugging the app but it still doesn't fix. I am getting this after updating android studio from android studio arctic fox to android studio bumble bee which is recently released. I updated the gradle version tried cleaning project, invalidating caches but nothing worked. I increased the memory heap size and enabled multidex but still it is not fixed. Please help me out.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677780875,"creation_date":1677779590,"answer_id":75619156,"question_id":75607788,"body_markdown":"You are only searching for `id=2`, so `mode = incrementing` doesn&#39;t really make sense for that `query`, as it will always append `ORDER BY ID ASC` to the query. \r\n\r\nIf you always want to search for `id = 2`, and get constant updates for that row, then you probably want `mode = bulk`\r\n\r\nOr, at the very least, you cannot end the query with a semi-colon as `WHERE id &gt; -1 ORDER BY id ASC` is added with incrementing mode. ","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>You are only searching for <code>id=2</code>, so <code>mode = incrementing</code> doesn't really make sense for that <code>query</code>, as it will always append <code>ORDER BY ID ASC</code> to the query.</p>\n<p>If you always want to search for <code>id = 2</code>, and get constant updates for that row, then you probably want <code>mode = bulk</code></p>\n<p>Or, at the very least, you cannot end the query with a semi-colon as <code>WHERE id &gt; -1 ORDER BY id ASC</code> is added with incrementing mode.</p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677780094,"creation_date":1677780094,"answer_id":75619244,"question_id":75607788,"body_markdown":"Removed the semicolon from the query. Afterthat, it started working\r\n\r\nWorking code:\r\n\r\n    {\r\n      &quot;name&quot;: &quot;mysql-jdbc&quot;,\r\n      &quot;config&quot;: {\r\n        &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\r\n        &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\r\n        &quot;connection.user&quot; : &quot;root&quot;,\r\n        &quot;connection.password&quot; : &quot;root&quot;,\r\n        &quot;mode&quot;            : &quot;incrementing&quot;,\r\n        &quot;incrementing.column.name&quot;: &quot;id&quot;,\r\n        &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test&quot;,\r\n        &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\r\n        &quot;validate.non.null&quot;       : &quot;false&quot;,\r\n        &quot;poll.interval.ms&quot;        : &quot;1000&quot;\r\n      }\r\n    }","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>Removed the semicolon from the query. Afterthat, it started working</p>\n<p>Working code:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;mysql-jdbc&quot;,\n  &quot;config&quot;: {\n    &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\n    &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\n    &quot;connection.user&quot; : &quot;root&quot;,\n    &quot;connection.password&quot; : &quot;root&quot;,\n    &quot;mode&quot;            : &quot;incrementing&quot;,\n    &quot;incrementing.column.name&quot;: &quot;id&quot;,\n    &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test&quot;,\n    &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\n    &quot;validate.non.null&quot;       : &quot;false&quot;,\n    &quot;poll.interval.ms&quot;        : &quot;1000&quot;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":252,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75619156,"answer_count":2,"score":-1,"last_activity_date":1682712989,"creation_date":1677696521,"question_id":75607788,"body_markdown":"JSON file:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n    {\r\n      &quot;name&quot;: &quot;mysql-jdbc&quot;,\r\n      &quot;config&quot;: {\r\n        &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\r\n        &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\r\n        &quot;connection.user&quot; : &quot;root&quot;,\r\n        &quot;connection.password&quot; : &quot;root&quot;,\r\n        &quot;mode&quot;            : &quot;incrementing&quot;,\r\n        &quot;incrementing.column.name&quot;: &quot;id&quot;,\r\n        &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test;&quot;,\r\n        &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\r\n        &quot;validate.non.null&quot;       : &quot;false&quot;,\r\n        &quot;poll.interval.ms&quot;        : &quot;1000&quot;\r\n      }\r\n    }\r\n\r\n\r\nQuery in logs:\r\n\r\n    connect  |  (org.apache.kafka.connect.runtime.tracing.TracerConfig)\r\n    connect  | [2023-03-01 19:42:30,132] INFO Initializing: org.apache.kafka.connect.runtime.TransformationChain{} (org.apache.kafka.connect.runtime.Worker)\r\n    connect  | [2023-03-01 19:42:30,133] INFO [Worker clientId=connect-1, groupId=jdbc_source_connector] Finished starting connectors and tasks (org.apache.kafka.connect.runtime.distributed.DistributedHerder)\r\n    connect  | [2023-03-01 19:42:30,133] INFO Starting JDBC source task (io.confluent.connect.jdbc.source.JdbcSourceTask)\r\n    connect  | [2023-03-01 19:42:30,133] INFO JdbcSourceTaskConfig values: \r\n    connect  |      batch.max.rows = 100\r\n    connect  |      catalog.pattern = null\r\n    connect  |      connection.attempts = 3\r\n    connect  |      connection.backoff.ms = 10000\r\n    connect  |      connection.password = [hidden]\r\n    connect  |      connection.url = jdbc:mysql://mysqldb:3306/silicon\r\n    connect  |      connection.user = root\r\n    connect  |      db.timezone = UTC\r\n    connect  |      dialect.name = \r\n    connect  |      incrementing.column.name = id\r\n    connect  |      mode = incrementing\r\n    connect  |      numeric.mapping = null\r\n    connect  |      numeric.precision.mapping = false\r\n    connect  |      poll.interval.ms = 1000\r\n    connect  |      query = select * from (select * from credit_lines where id=2) test;\r\n    connect  |      query.retry.attempts = -1\r\n    connect  |      query.suffix = \r\n    connect  |      quote.sql.identifiers = ALWAYS\r\n    connect  |      schema.pattern = null\r\n    connect  |      table.blacklist = []\r\n    connect  |      table.monitoring.startup.polling.limit.ms = 10000\r\n    connect  |      table.poll.interval.ms = 60000\r\n    connect  |      table.types = [TABLE]\r\n    connect  |      table.whitelist = []\r\n    connect  |      tables = []\r\n    connect  |      timestamp.column.name = []\r\n    connect  |      timestamp.delay.interval.ms = 0\r\n    connect  |      timestamp.granularity = connect_logical\r\n    connect  |      timestamp.initial = null\r\n    connect  |      topic.prefix = JDBC.test_db_test\r\n    connect  |      transaction.isolation.mode = DEFAULT\r\n    connect  |      validate.non.null = false\r\n    connect  |  (io.confluent.connect.jdbc.source.JdbcSourceTaskConfig)\r\n\r\n\r\nError I am getting:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     ERROR WorkerSourceTask{id=mysql-jdbc-0} Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted (org.apache.kafka.connect.runtime.WorkerTask)\r\n    connect  | org.apache.kafka.connect.errors.ConnectException: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;WHERE `id` &gt; -1 ORDER BY `id` ASC&#39; at line 1\r\n    connect  |      at io.confluent.connect.jdbc.source.JdbcSourceTask.poll(JdbcSourceTask.java:452)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.poll(AbstractWorkerSourceTask.java:470)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.execute(AbstractWorkerSourceTask.java:349)\r\n    connect  |      at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:201)\r\n    connect  |      at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:256)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.run(AbstractWorkerSourceTask.java:75)\r\n    connect  |      at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    connect  |      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    connect  |      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    connect  |      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    connect  |      at java.base/java.lang.Thread.run(Thread.java:829)\r\n    connect  | Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;WHERE `id` &gt; -1 ORDER BY `id` ASC&#39; at line 1\r\n","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>JSON file:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;name&quot;: &quot;mysql-jdbc&quot;,\n  &quot;config&quot;: {\n    &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\n    &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\n    &quot;connection.user&quot; : &quot;root&quot;,\n    &quot;connection.password&quot; : &quot;root&quot;,\n    &quot;mode&quot;            : &quot;incrementing&quot;,\n    &quot;incrementing.column.name&quot;: &quot;id&quot;,\n    &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test;&quot;,\n    &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\n    &quot;validate.non.null&quot;       : &quot;false&quot;,\n    &quot;poll.interval.ms&quot;        : &quot;1000&quot;\n  }\n}\n</code></pre>\n<p>Query in logs:</p>\n<pre><code>connect  |  (org.apache.kafka.connect.runtime.tracing.TracerConfig)\nconnect  | [2023-03-01 19:42:30,132] INFO Initializing: org.apache.kafka.connect.runtime.TransformationChain{} (org.apache.kafka.connect.runtime.Worker)\nconnect  | [2023-03-01 19:42:30,133] INFO [Worker clientId=connect-1, groupId=jdbc_source_connector] Finished starting connectors and tasks (org.apache.kafka.connect.runtime.distributed.DistributedHerder)\nconnect  | [2023-03-01 19:42:30,133] INFO Starting JDBC source task (io.confluent.connect.jdbc.source.JdbcSourceTask)\nconnect  | [2023-03-01 19:42:30,133] INFO JdbcSourceTaskConfig values: \nconnect  |      batch.max.rows = 100\nconnect  |      catalog.pattern = null\nconnect  |      connection.attempts = 3\nconnect  |      connection.backoff.ms = 10000\nconnect  |      connection.password = [hidden]\nconnect  |      connection.url = jdbc:mysql://mysqldb:3306/silicon\nconnect  |      connection.user = root\nconnect  |      db.timezone = UTC\nconnect  |      dialect.name = \nconnect  |      incrementing.column.name = id\nconnect  |      mode = incrementing\nconnect  |      numeric.mapping = null\nconnect  |      numeric.precision.mapping = false\nconnect  |      poll.interval.ms = 1000\nconnect  |      query = select * from (select * from credit_lines where id=2) test;\nconnect  |      query.retry.attempts = -1\nconnect  |      query.suffix = \nconnect  |      quote.sql.identifiers = ALWAYS\nconnect  |      schema.pattern = null\nconnect  |      table.blacklist = []\nconnect  |      table.monitoring.startup.polling.limit.ms = 10000\nconnect  |      table.poll.interval.ms = 60000\nconnect  |      table.types = [TABLE]\nconnect  |      table.whitelist = []\nconnect  |      tables = []\nconnect  |      timestamp.column.name = []\nconnect  |      timestamp.delay.interval.ms = 0\nconnect  |      timestamp.granularity = connect_logical\nconnect  |      timestamp.initial = null\nconnect  |      topic.prefix = JDBC.test_db_test\nconnect  |      transaction.isolation.mode = DEFAULT\nconnect  |      validate.non.null = false\nconnect  |  (io.confluent.connect.jdbc.source.JdbcSourceTaskConfig)\n</code></pre>\n<p>Error I am getting:</p>\n<pre class=\"lang-none prettyprint-override\"><code> ERROR WorkerSourceTask{id=mysql-jdbc-0} Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted (org.apache.kafka.connect.runtime.WorkerTask)\nconnect  | org.apache.kafka.connect.errors.ConnectException: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `id` &gt; -1 ORDER BY `id` ASC' at line 1\nconnect  |      at io.confluent.connect.jdbc.source.JdbcSourceTask.poll(JdbcSourceTask.java:452)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.poll(AbstractWorkerSourceTask.java:470)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.execute(AbstractWorkerSourceTask.java:349)\nconnect  |      at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:201)\nconnect  |      at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:256)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.run(AbstractWorkerSourceTask.java:75)\nconnect  |      at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\nconnect  |      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nconnect  |      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nconnect  |      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nconnect  |      at java.base/java.lang.Thread.run(Thread.java:829)\nconnect  | Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `id` &gt; -1 ORDER BY `id` ASC' at line 1\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","testing","spring-rest"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1682585912,"post_id":76118452,"comment_id":134240298,"body_markdown":"That&#39;s because you have specified `@Column(nullable = false)` and the value when inserting is null, therefore, it will raise an exception. You can set a default value in the database engine or in the code","body":"That&#39;s because you have specified <code>@Column(nullable = false)</code> and the value when inserting is null, therefore, it will raise an exception. You can set a default value in the database engine or in the code"},{"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"score":0,"creation_date":1682589616,"post_id":76118452,"comment_id":134241110,"body_markdown":"I actually tried to set it to **true** as well, I get exactly the same error message. I don&#39;t understand the connection between `Client` and `Hairdresser` actually. If my hairdresser-related method failed, I would understand somehow. I get an error whilst running **shouldSaveClient()**","body":"I actually tried to set it to <b>true</b> as well, I get exactly the same error message. I don&#39;t understand the connection between <code>Client</code> and <code>Hairdresser</code> actually. If my hairdresser-related method failed, I would understand somehow. I get an error whilst running <b>shouldSaveClient()</b>"},{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1682599057,"post_id":76118452,"comment_id":134243311,"body_markdown":"How does the table look like? Can you print the SQL to see what&#39;s happening?","body":"How does the table look like? Can you print the SQL to see what&#39;s happening?"},{"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"score":0,"creation_date":1682663653,"post_id":76118452,"comment_id":134254036,"body_markdown":"Sorry for the late response, I edited my question above, view of the database added.","body":"Sorry for the late response, I edited my question above, view of the database added."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1682711438,"post_id":76118452,"comment_id":134264198,"body_markdown":"Please do not edit solution announcements into the question. Accept (i.e. click the &quot;tick&quot; next to it) one of the existing answer, if there are any. You can also create your own answer, and even accept it, if your solution is not yet covered by an existing answer. Compare https://stackoverflow.com/help/self-answer","body":"Please do not edit solution announcements into the question. Accept (i.e. click the &quot;tick&quot; next to it) one of the existing answer, if there are any. You can also create your own answer, and even accept it, if your solution is not yet covered by an existing answer. Compare <a href=\"https://stackoverflow.com/help/self-answer\">stackoverflow.com/help/self-answer</a>"}],"answers":[{"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":1,"creation_date":1682766049,"post_id":76133006,"comment_id":134269130,"body_markdown":"Be aware that `create-drop` will drop the database once the application is stopped. Follow [this](https://stackoverflow.com/questions/42135114/how-does-spring-jpa-hibernate-ddl-auto-property-exactly-work-in-spring)","body":"Be aware that <code>create-drop</code> will drop the database once the application is stopped. Follow <a href=\"https://stackoverflow.com/questions/42135114/how-does-spring-jpa-hibernate-ddl-auto-property-exactly-work-in-spring\">this</a>"}],"tags":[],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682712986,"creation_date":1682712986,"answer_id":76133006,"question_id":76118452,"body_markdown":"There were reasons that `UserRepositoryTest` was failing. \r\n\r\n - *First*, `@Inheritance(strategy = InheritanceType.JOINED)` annotation should have added right above the `User` class as it is the base class for `Client` and `Hairdresser`. Here is the modified form of the **User** class:\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\npublic class User { ... }\r\n```\r\n\r\n - *Second*, there was a problem with my database as it was changed during the development and not updated. So, the solution was dropping the table, and it&#39;s done by adding **create-drop** to the configuration file, in my case it&#39;s *application.properties*:\r\n```\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\n```\r\n","title":"Facing an error whilst testing the repository in Spring Boot Application","body":"<p>There were reasons that <code>UserRepositoryTest</code> was failing.</p>\n<ul>\n<li><em>First</em>, <code>@Inheritance(strategy = InheritanceType.JOINED)</code> annotation should have added right above the <code>User</code> class as it is the base class for <code>Client</code> and <code>Hairdresser</code>. Here is the modified form of the <strong>User</strong> class:</li>\n</ul>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class User { ... }\n</code></pre>\n<ul>\n<li><em>Second</em>, there was a problem with my database as it was changed during the development and not updated. So, the solution was dropping the table, and it's done by adding <strong>create-drop</strong> to the configuration file, in my case it's <em>application.properties</em>:</li>\n</ul>\n<pre><code>spring.jpa.hibernate.ddl-auto=create-drop\n</code></pre>\n"}],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682712986,"creation_date":1682585052,"question_id":76118452,"body_markdown":"&lt;br&gt;&lt;br&gt;\r\nI am working on project using Spring Boot (version 3.0.5). I am trying to test `UserRepository` if my `Client` and `Hairdresser`(which are the children of the `User` class) are saved fine in the repo. However, I get an error whilst trying to save the `Client`, `Hairdresser` works fine.&lt;br&gt;&lt;br&gt;\r\n\r\n----------------------------------------------------------\r\n\r\n**UserRepositoryTest.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.repositories;\r\n\r\nimport com.edoyou.k2sbeauty.entities.model.Client;\r\nimport com.edoyou.k2sbeauty.entities.model.Hairdresser;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\npublic class UserRepositoryTest {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    private Client client;\r\n    private Hairdresser hairdresser;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        client = new Client();\r\n        client.setFirstName(&quot;Barbara&quot;);\r\n        client.setLastName(&quot;O&#39;Conner&quot;);\r\n        client.setEmail(&quot;myemail@gmail.com&quot;);\r\n        client.setPassword(&quot;password&quot;);\r\n        client.setPhone(&quot;36707733373&quot;);\r\n        client.setCreatedAt(LocalDateTime.now());\r\n        client.setUpdatedAt(LocalDateTime.now());\r\n\r\n        hairdresser = new Hairdresser();\r\n        hairdresser.setFirstName(&quot;Jane&quot;);\r\n        hairdresser.setLastName(&quot;Doe&quot;);\r\n        hairdresser.setEmail(&quot;jane.doe@gmail.com&quot;);\r\n        hairdresser.setPassword(&quot;password&quot;);\r\n        hairdresser.setPhone(&quot;36707733444&quot;);\r\n        hairdresser.setCreatedAt(LocalDateTime.now());\r\n        hairdresser.setUpdatedAt(LocalDateTime.now());\r\n        hairdresser.setSpecialization(&quot;Hairstyling&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void shouldSaveClient() {\r\n        Client savedClient = userRepository.save(client);\r\n        assertThat(savedClient).isNotNull();\r\n        assertThat(savedClient.getId()).isNotNull();\r\n    }\r\n\r\n    @Test\r\n    public void shouldSaveHairdresser() {\r\n        Hairdresser savedHairdresser = userRepository.save(hairdresser);\r\n        assertThat(savedHairdresser).isNotNull();\r\n        assertThat(savedHairdresser.getId()).isNotNull();\r\n    }\r\n}\r\n```\r\n\r\n*shouldSaveHairdresser()* test is fine, *shouldSaveClient()* test method fails.&lt;br&gt;&lt;br&gt;\r\n\r\n**User.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.time.LocalDateTime;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n\r\n  @Column(nullable = false)\r\n  private String firstName;\r\n\r\n  @Column(nullable = false)\r\n  private String lastName;\r\n\r\n  @Column(nullable = false, unique = true)\r\n  private String email;\r\n\r\n  @Column(nullable = false)\r\n  private String password;\r\n\r\n  @Column(nullable = false)\r\n  private String phone;\r\n\r\n  @Column(nullable = false)\r\n  private LocalDateTime createdAt;\r\n\r\n  @Column(nullable = false)\r\n  private LocalDateTime updatedAt;\r\n\r\n  @ManyToMany(fetch = FetchType.LAZY)\r\n  @JoinTable(name = &quot;user_roles&quot;,\r\n      joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n      inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n  private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\n  public void setId(Long id) {\r\n    this.id = id;\r\n  }\r\n\r\n  public void setFirstName(String firstName) {\r\n    this.firstName = firstName;\r\n  }\r\n\r\n  public void setLastName(String lastName) {\r\n    this.lastName = lastName;\r\n  }\r\n\r\n  public void setEmail(String email) {\r\n    this.email = email;\r\n  }\r\n\r\n  public void setPassword(String password) {\r\n    this.password = password;\r\n  }\r\n\r\n  public void setPhone(String phone) {\r\n    this.phone = phone;\r\n  }\r\n\r\n  public void setCreatedAt(LocalDateTime createdAt) {\r\n    this.createdAt = createdAt;\r\n  }\r\n\r\n  public void setUpdatedAt(LocalDateTime updatedAt) {\r\n    this.updatedAt = updatedAt;\r\n  }\r\n\r\n  public void setRoles(Set&lt;Role&gt; roles) {\r\n    this.roles = roles;\r\n  }\r\n\r\n  public Long getId() {\r\n    return id;\r\n  }\r\n\r\n  public String getFirstName() {\r\n    return firstName;\r\n  }\r\n\r\n  public String getLastName() {\r\n    return lastName;\r\n  }\r\n\r\n  public String getEmail() {\r\n    return email;\r\n  }\r\n\r\n  public String getPassword() {\r\n    return password;\r\n  }\r\n\r\n  public String getPhone() {\r\n    return phone;\r\n  }\r\n\r\n  public LocalDateTime getCreatedAt() {\r\n    return createdAt;\r\n  }\r\n\r\n  public LocalDateTime getUpdatedAt() {\r\n    return updatedAt;\r\n  }\r\n\r\n  public Set&lt;Role&gt; getRoles() {\r\n    return roles;\r\n  }\r\n}\r\n```\r\n\r\n**Hairdresser.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;hairdressers&quot;)\r\npublic class Hairdresser extends User {\r\n  @Column(nullable = false)\r\n  private String specialization;\r\n\r\n  @OneToMany(mappedBy = &quot;hairdresser&quot;)\r\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\r\n\r\n  public void setSpecialization(String specialization) {\r\n    this.specialization = specialization;\r\n  }\r\n\r\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\r\n    this.appointments = appointments;\r\n  }\r\n\r\n  public String getSpecialization() {\r\n    return specialization;\r\n  }\r\n\r\n  public Set&lt;Appointment&gt; getAppointments() {\r\n    return appointments;\r\n  }\r\n}\r\n```\r\n\r\n**Client.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;clients&quot;)\r\npublic class Client extends User {\r\n  @OneToMany(mappedBy = &quot;client&quot;)\r\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\r\n\r\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\r\n    this.appointments = appointments;\r\n  }\r\n\r\n  public Set&lt;Appointment&gt; getAppointments() {\r\n    return appointments;\r\n  }\r\n}\r\n```\r\n\r\n# ERROR:\r\n```\r\n2023-04-27 10:20:42.145 ERROR 43965 --- [main] o.h.e.j.s.SqlExceptionHelper             : Field &#39;specialization&#39; doesn&#39;t have a default value\r\n\r\n```\r\n--------------------------------------------------\r\n\r\n*Here is the full view of the database tables:*&lt;br&gt;&lt;br&gt;\r\n[![---][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UUtP7.png","title":"Facing an error whilst testing the repository in Spring Boot Application","body":"<p><br><br>\nI am working on project using Spring Boot (version 3.0.5). I am trying to test <code>UserRepository</code> if my <code>Client</code> and <code>Hairdresser</code>(which are the children of the <code>User</code> class) are saved fine in the repo. However, I get an error whilst trying to save the <code>Client</code>, <code>Hairdresser</code> works fine.<br><br></p>\n<hr />\n<p><strong>UserRepositoryTest.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.repositories;\n\nimport com.edoyou.k2sbeauty.entities.model.Client;\nimport com.edoyou.k2sbeauty.entities.model.Hairdresser;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.time.LocalDateTime;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\npublic class UserRepositoryTest {\n    @Autowired\n    private UserRepository userRepository;\n    private Client client;\n    private Hairdresser hairdresser;\n\n    @BeforeEach\n    void setUp() {\n        client = new Client();\n        client.setFirstName(&quot;Barbara&quot;);\n        client.setLastName(&quot;O'Conner&quot;);\n        client.setEmail(&quot;myemail@gmail.com&quot;);\n        client.setPassword(&quot;password&quot;);\n        client.setPhone(&quot;36707733373&quot;);\n        client.setCreatedAt(LocalDateTime.now());\n        client.setUpdatedAt(LocalDateTime.now());\n\n        hairdresser = new Hairdresser();\n        hairdresser.setFirstName(&quot;Jane&quot;);\n        hairdresser.setLastName(&quot;Doe&quot;);\n        hairdresser.setEmail(&quot;jane.doe@gmail.com&quot;);\n        hairdresser.setPassword(&quot;password&quot;);\n        hairdresser.setPhone(&quot;36707733444&quot;);\n        hairdresser.setCreatedAt(LocalDateTime.now());\n        hairdresser.setUpdatedAt(LocalDateTime.now());\n        hairdresser.setSpecialization(&quot;Hairstyling&quot;);\n    }\n\n    @Test\n    public void shouldSaveClient() {\n        Client savedClient = userRepository.save(client);\n        assertThat(savedClient).isNotNull();\n        assertThat(savedClient.getId()).isNotNull();\n    }\n\n    @Test\n    public void shouldSaveHairdresser() {\n        Hairdresser savedHairdresser = userRepository.save(hairdresser);\n        assertThat(savedHairdresser).isNotNull();\n        assertThat(savedHairdresser.getId()).isNotNull();\n    }\n}\n</code></pre>\n<p><em>shouldSaveHairdresser()</em> test is fine, <em>shouldSaveClient()</em> test method fails.<br><br></p>\n<p><strong>User.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @Column(nullable = false)\n  private String firstName;\n\n  @Column(nullable = false)\n  private String lastName;\n\n  @Column(nullable = false, unique = true)\n  private String email;\n\n  @Column(nullable = false)\n  private String password;\n\n  @Column(nullable = false)\n  private String phone;\n\n  @Column(nullable = false)\n  private LocalDateTime createdAt;\n\n  @Column(nullable = false)\n  private LocalDateTime updatedAt;\n\n  @ManyToMany(fetch = FetchType.LAZY)\n  @JoinTable(name = &quot;user_roles&quot;,\n      joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n      inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n  private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n  public void setId(Long id) {\n    this.id = id;\n  }\n\n  public void setFirstName(String firstName) {\n    this.firstName = firstName;\n  }\n\n  public void setLastName(String lastName) {\n    this.lastName = lastName;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public void setPassword(String password) {\n    this.password = password;\n  }\n\n  public void setPhone(String phone) {\n    this.phone = phone;\n  }\n\n  public void setCreatedAt(LocalDateTime createdAt) {\n    this.createdAt = createdAt;\n  }\n\n  public void setUpdatedAt(LocalDateTime updatedAt) {\n    this.updatedAt = updatedAt;\n  }\n\n  public void setRoles(Set&lt;Role&gt; roles) {\n    this.roles = roles;\n  }\n\n  public Long getId() {\n    return id;\n  }\n\n  public String getFirstName() {\n    return firstName;\n  }\n\n  public String getLastName() {\n    return lastName;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public String getPassword() {\n    return password;\n  }\n\n  public String getPhone() {\n    return phone;\n  }\n\n  public LocalDateTime getCreatedAt() {\n    return createdAt;\n  }\n\n  public LocalDateTime getUpdatedAt() {\n    return updatedAt;\n  }\n\n  public Set&lt;Role&gt; getRoles() {\n    return roles;\n  }\n}\n</code></pre>\n<p><strong>Hairdresser.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;hairdressers&quot;)\npublic class Hairdresser extends User {\n  @Column(nullable = false)\n  private String specialization;\n\n  @OneToMany(mappedBy = &quot;hairdresser&quot;)\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\n\n  public void setSpecialization(String specialization) {\n    this.specialization = specialization;\n  }\n\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\n    this.appointments = appointments;\n  }\n\n  public String getSpecialization() {\n    return specialization;\n  }\n\n  public Set&lt;Appointment&gt; getAppointments() {\n    return appointments;\n  }\n}\n</code></pre>\n<p><strong>Client.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;clients&quot;)\npublic class Client extends User {\n  @OneToMany(mappedBy = &quot;client&quot;)\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\n\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\n    this.appointments = appointments;\n  }\n\n  public Set&lt;Appointment&gt; getAppointments() {\n    return appointments;\n  }\n}\n</code></pre>\n<h1>ERROR:</h1>\n<pre><code>2023-04-27 10:20:42.145 ERROR 43965 --- [main] o.h.e.j.s.SqlExceptionHelper             : Field 'specialization' doesn't have a default value\n\n</code></pre>\n<hr />\n<p><em>Here is the full view of the database tables:</em><br><br>\n<a href=\"https://i.stack.imgur.com/UUtP7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UUtP7.png\" alt=\"---\" /></a></p>\n"},{"tags":["java","android","json","android-recyclerview"],"comments":[{"owner":{"account_id":5617891,"reputation":4182,"user_id":4448617,"display_name":"Ratilal Chopda"},"score":0,"creation_date":1511872658,"post_id":47531756,"comment_id":82019980,"body_markdown":"youe json response is true","body":"youe json response is true"},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1511872763,"post_id":47531756,"comment_id":82020047,"body_markdown":"Possible duplicate of [ANDROID, Parse JSON data from a web server and display on ListView](https://stackoverflow.com/questions/36221795/android-parse-json-data-from-a-web-server-and-display-on-listview)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/36221795/android-parse-json-data-from-a-web-server-and-display-on-listview\">ANDROID, Parse JSON data from a web server and display on ListView</a>"},{"owner":{"account_id":9871999,"reputation":1058,"user_id":7311269,"accept_rate":62,"display_name":"Nero"},"score":0,"creation_date":1511873640,"post_id":47531756,"comment_id":82020593,"body_markdown":"Now you have to implement the hard stuff. I would recommend you create a class for the Json response with getters and setters so this way you can call out the information whenever needed. \nYou will also have to create a custom listview (another XML design) which will be the design of each item in your list. Then an adapter class which will work in conjunction to your listview and set the values where necessary. It&#39;s well complicated but I would recommend you to follow tutorial on custom listview.","body":"Now you have to implement the hard stuff. I would recommend you create a class for the Json response with getters and setters so this way you can call out the information whenever needed.  You will also have to create a custom listview (another XML design) which will be the design of each item in your list. Then an adapter class which will work in conjunction to your listview and set the values where necessary. It&#39;s well complicated but I would recommend you to follow tutorial on custom listview."},{"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"score":0,"creation_date":1511874529,"post_id":47531756,"comment_id":82021143,"body_markdown":"and how can i set value for them ?","body":"and how can i set value for them ?"},{"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"score":0,"creation_date":1511875382,"post_id":47531756,"comment_id":82021775,"body_markdown":"Please take a look, I did some changes.","body":"Please take a look, I did some changes."}],"answers":[{"tags":[],"owner":{"account_id":4967767,"reputation":56,"user_id":3996504,"display_name":"Piyush Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511873098,"creation_date":1511873098,"answer_id":47531966,"question_id":47531756,"body_markdown":"You can create a bean class with setter getter for your List Items and the bean class should implement parcelable so that you can send the bean object to other activity. For recycler View you use adapter of same bean type and set that adapter once data is loaded from server. ","title":"Display data from JSON inside RecyclerView(CardView)","body":"<p>You can create a bean class with setter getter for your List Items and the bean class should implement parcelable so that you can send the bean object to other activity. For recycler View you use adapter of same bean type and set that adapter once data is loaded from server. </p>\n"}],"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682712734,"creation_date":1511872407,"question_id":47531756,"body_markdown":"I have a `JSON node` which is displayed in `logcat` and look like this: \r\n\r\n    jsonData[{&quot;numarProduse&quot;:&quot;4&quot;,&quot;pretTotal&quot;:&quot;1138&quot;,&quot;data&quot;:&quot;11-27-2017&quot;,&quot;numeVanzator&quot;:&quot;Clau&quot;,&quot;numarClient&quot;:0,&quot;detaliiCos&quot;:{&quot;metodaPlata&quot;:&quot;CASH&quot;}}]\r\n\r\nBut I want from this `JSON response` to display in another activity just 3 of them **&quot;numarProduse&quot;:&quot;4&quot;, &quot;pretTotal&quot;:&quot;1138&quot;, &quot;numarClient&quot;:0**. \r\n\r\nI tried something else, to upload data to `Firebase` and then retrieve data from `Firebase`. \r\n\r\n**Here is my `RecyclerView Adapter`**:\r\n\r\n    public class CardArrayAdapter  extends RecyclerView.Adapter&lt;CardArrayAdapter.ViewHolder&gt; {\r\n    private List&lt;Card&gt; listdata;\r\n\r\n    public CardArrayAdapter(List&lt;Card&gt; listdata) {\r\n        this.listdata = listdata;\r\n    }\r\n\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.list_item_card, parent, false);\r\n        return new ViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(ViewHolder holder, int position) {\r\n\r\n        Card vanzatorProduse = listdata.get(position);\r\n\r\n        holder.txtViewNumarCumparator.setText(vanzatorProduse.getProdusId());\r\n        holder.listaProduse.setText(vanzatorProduse.getQty());\r\n        holder.sumaProduse.setText(vanzatorProduse.getSubTotal());\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        return listdata.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        public TextView txtViewNumarCumparator;\r\n        public TextView listaProduse;\r\n        public TextView sumaProduse;\r\n\r\n        public ViewHolder(View itemView) {\r\n            super(itemView);\r\n\r\n            txtViewNumarCumparator = (TextView) itemView.findViewById(R.id.txtViewNumarCumparator);\r\n            listaProduse = (TextView) itemView.findViewById(R.id.listaProduse);\r\n            sumaProduse = (TextView) itemView.findViewById(R.id.sumaProduse);\r\n        }\r\n    }\r\n    }\r\n\r\nI made my layout for `CardView`, and object class with getters and setters.\r\n\r\n    public class Card implements Serializable {\r\n    public String produsId;\r\n    public String subTotal;\r\n    public String qty;\r\n\r\n    public Card(){}\r\n\r\n    public Card(String produsId, String subTotal, String qty) {\r\n        this.produsId = produsId;\r\n        this.subTotal = subTotal;\r\n        this.qty = qty;\r\n    }\r\n\r\n    public String getProdusId() {\r\n        return produsId;\r\n    }\r\n\r\n    public void setProdusId(String produsId) {\r\n        this.produsId = produsId;\r\n    }\r\n\r\n    public String getSubTotal() {\r\n        return subTotal;\r\n    }\r\n\r\n    public void setSubTotal(String subTotal) {\r\n        this.subTotal = subTotal;\r\n    }\r\n\r\n    public String getQty() {\r\n        return qty;\r\n    }\r\n\r\n    public void setQty(String qty) {\r\n        this.qty = qty;\r\n    }\r\n    }\r\n\r\nAnd here is where I tried to retrieve data from `Firebase`: \r\n\r\n    myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                list = new ArrayList&lt;&gt;();\r\n\r\n                for (DataSnapshot snapshot : dataSnapshot.getChildren()){\r\n\r\n                    VanzatorProduse produse = snapshot.getValue(VanzatorProduse.class);\r\n                    Card listdata = new Card();\r\n                    String id = produse.getProdusId();\r\n                    String qty = String.valueOf(produse.getQty());\r\n                    String suma = String.valueOf(produse.getSubTotal());\r\n\r\n                    listdata.setProdusId(id);\r\n                    listdata.setQty(qty);\r\n                    listdata.setSubTotal(suma);\r\n                    list.add(listdata);\r\n\r\n                }\r\n                CardArrayAdapter recycler = new CardArrayAdapter(list);\r\n                RecyclerView.LayoutManager layoutmanager = new LinearLayoutManager(VanzatorActivity.this);\r\n                recyclerview.setLayoutManager(layoutmanager);\r\n                recyclerview.setItemAnimator( new DefaultItemAnimator());\r\n                recyclerview.setAdapter(recycler);\r\n            }\r\n\r\nBut is not working, I get two columns where is 0 displayed. I have no idea what to do next, here I&#39;m blocked. ","title":"Display data from JSON inside RecyclerView(CardView)","body":"<p>I have a <code>JSON node</code> which is displayed in <code>logcat</code> and look like this:</p>\n<pre><code>jsonData[{&quot;numarProduse&quot;:&quot;4&quot;,&quot;pretTotal&quot;:&quot;1138&quot;,&quot;data&quot;:&quot;11-27-2017&quot;,&quot;numeVanzator&quot;:&quot;Clau&quot;,&quot;numarClient&quot;:0,&quot;detaliiCos&quot;:{&quot;metodaPlata&quot;:&quot;CASH&quot;}}]\n</code></pre>\n<p>But I want from this <code>JSON response</code> to display in another activity just 3 of them <strong>&quot;numarProduse&quot;:&quot;4&quot;, &quot;pretTotal&quot;:&quot;1138&quot;, &quot;numarClient&quot;:0</strong>.</p>\n<p>I tried something else, to upload data to <code>Firebase</code> and then retrieve data from <code>Firebase</code>.</p>\n<p><strong>Here is my <code>RecyclerView Adapter</code></strong>:</p>\n<pre><code>public class CardArrayAdapter  extends RecyclerView.Adapter&lt;CardArrayAdapter.ViewHolder&gt; {\nprivate List&lt;Card&gt; listdata;\n\npublic CardArrayAdapter(List&lt;Card&gt; listdata) {\n    this.listdata = listdata;\n}\n\n@Override\npublic ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(parent.getContext())\n            .inflate(R.layout.list_item_card, parent, false);\n    return new ViewHolder(v);\n}\n\n@Override\npublic void onBindViewHolder(ViewHolder holder, int position) {\n\n    Card vanzatorProduse = listdata.get(position);\n\n    holder.txtViewNumarCumparator.setText(vanzatorProduse.getProdusId());\n    holder.listaProduse.setText(vanzatorProduse.getQty());\n    holder.sumaProduse.setText(vanzatorProduse.getSubTotal());\n}\n@Override\npublic int getItemCount() {\n    return listdata.size();\n}\n\npublic class ViewHolder extends RecyclerView.ViewHolder {\n\n    public TextView txtViewNumarCumparator;\n    public TextView listaProduse;\n    public TextView sumaProduse;\n\n    public ViewHolder(View itemView) {\n        super(itemView);\n\n        txtViewNumarCumparator = (TextView) itemView.findViewById(R.id.txtViewNumarCumparator);\n        listaProduse = (TextView) itemView.findViewById(R.id.listaProduse);\n        sumaProduse = (TextView) itemView.findViewById(R.id.sumaProduse);\n    }\n}\n}\n</code></pre>\n<p>I made my layout for <code>CardView</code>, and object class with getters and setters.</p>\n<pre><code>public class Card implements Serializable {\npublic String produsId;\npublic String subTotal;\npublic String qty;\n\npublic Card(){}\n\npublic Card(String produsId, String subTotal, String qty) {\n    this.produsId = produsId;\n    this.subTotal = subTotal;\n    this.qty = qty;\n}\n\npublic String getProdusId() {\n    return produsId;\n}\n\npublic void setProdusId(String produsId) {\n    this.produsId = produsId;\n}\n\npublic String getSubTotal() {\n    return subTotal;\n}\n\npublic void setSubTotal(String subTotal) {\n    this.subTotal = subTotal;\n}\n\npublic String getQty() {\n    return qty;\n}\n\npublic void setQty(String qty) {\n    this.qty = qty;\n}\n}\n</code></pre>\n<p>And here is where I tried to retrieve data from <code>Firebase</code>:</p>\n<pre><code>myRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            list = new ArrayList&lt;&gt;();\n\n            for (DataSnapshot snapshot : dataSnapshot.getChildren()){\n\n                VanzatorProduse produse = snapshot.getValue(VanzatorProduse.class);\n                Card listdata = new Card();\n                String id = produse.getProdusId();\n                String qty = String.valueOf(produse.getQty());\n                String suma = String.valueOf(produse.getSubTotal());\n\n                listdata.setProdusId(id);\n                listdata.setQty(qty);\n                listdata.setSubTotal(suma);\n                list.add(listdata);\n\n            }\n            CardArrayAdapter recycler = new CardArrayAdapter(list);\n            RecyclerView.LayoutManager layoutmanager = new LinearLayoutManager(VanzatorActivity.this);\n            recyclerview.setLayoutManager(layoutmanager);\n            recyclerview.setItemAnimator( new DefaultItemAnimator());\n            recyclerview.setAdapter(recycler);\n        }\n</code></pre>\n<p>But is not working, I get two columns where is 0 displayed. I have no idea what to do next, here I'm blocked.</p>\n"},{"tags":["java","arrays","multidimensional-array","duplicates"],"comments":[{"owner":{"account_id":1749597,"reputation":1030,"user_id":1599011,"display_name":"mykaf"},"score":1,"creation_date":1682709208,"post_id":76132575,"comment_id":134263816,"body_markdown":"You tagged `javascript` but use `java` in your question; which is it?","body":"You tagged <code>javascript</code> but use <code>java</code> in your question; which is it?"},{"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"score":0,"creation_date":1682709577,"post_id":76132575,"comment_id":134263886,"body_markdown":"Java, i will remove javascript for the confusion","body":"Java, i will remove javascript for the confusion"}],"answers":[{"comments":[{"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"score":0,"creation_date":1682724460,"post_id":76132976,"comment_id":134266020,"body_markdown":"Thank you so much for all the advice and steps, i just have a question, could this code be possible without a boolean?","body":"Thank you so much for all the advice and steps, i just have a question, could this code be possible without a boolean?"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":0,"creation_date":1683045792,"post_id":76132976,"comment_id":134305183,"body_markdown":"@alana Why would you want to do it without a boolean? It&#39;s much simpler this way. You could try modifying this code but I&#39;m not going to try and come up with a more complex solution","body":"@alana Why would you want to do it without a boolean? It&#39;s much simpler this way. You could try modifying this code but I&#39;m not going to try and come up with a more complex solution"},{"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"score":0,"creation_date":1683293346,"post_id":76132976,"comment_id":134348758,"body_markdown":"i was just curious if it was possible, thats all","body":"i was just curious if it was possible, thats all"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":0,"creation_date":1683318745,"post_id":76132976,"comment_id":134354417,"body_markdown":"@alana it might be possible but it would require much more thinking, and would make the solution much more complex","body":"@alana it might be possible but it would require much more thinking, and would make the solution much more complex"}],"tags":[],"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682712650,"creation_date":1682712650,"answer_id":76132976,"question_id":76132575,"body_markdown":"This is not the most efficient solution, but one way would be to create a method `removeInvalidData`, that:\r\n\r\n1. Orders the data to have the invalid data (`-1`) at the beginning or end of the array\r\n2. Counts the amount of invalid data\r\n3. Creates a new array of the size of the valid data (total data count - invalid data count)\r\n4. Fills the new array with the valid data\r\n\r\nAn example for this would be:\r\n\r\n    private static int[] removeInvalidNumbers(int[] numbers) {\r\n        int numberOfInvalidData = 0;\r\n        \r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            for (int j = i + 1; j &lt; numbers.length; j++) {\r\n                if (numbers[i] &lt; numbers[j]) {\r\n                    int temp = numbers[i];\r\n                    numbers[i] = numbers[j];\r\n                    numbers[j] = temp;\r\n                }\r\n            }\r\n        }\r\n        \r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            if (numbers[i] == -1) {\r\n                numberOfInvalidData++;\r\n            }\r\n        }\r\n        \r\n        int[] newNumbers = new int[numbers.length - numberOfInvalidData];\r\n        \r\n        for (int i = 0; i &lt; newNumbers.length; i++) {\r\n            newNumbers[i] = numbers[i];\r\n        }\r\n        \r\n        return newNumbers;\r\n    }\r\n\r\nYou would call this function in the `return` statement of `eliminateDuplicates`:\r\n\r\n    return removeInvalidNumbers(list);\r\n\r\nAs you can see, it uses multiple `for-loops` even nested ones multiple times.\r\n\r\n-----------\r\n\r\nI like this approach better:\r\n\r\n1. Creates a new array that has the non duplicated numbers in it `nonDuplicatedNumbers`\r\n2. Creates a flag for `isDuplicate` that tells us if the number is duplicated\r\n3. Adds the number to `nonDuplicatedNumber` if `isDuplicate` is false\r\n4. Counts the number of invalid data at the same time\r\n5. Calls the function to remove invalid data\r\n\r\n        private static int[] eliminateDuplicates(int[] list) {\r\n            int[] nonDuplicatedNumbers = new int[list.length];\r\n            int numberOfDuplicates = 0;\r\n            for (int i = 0; i &lt; list.length; i++) {\r\n                boolean isDuplicate = false;\r\n                for (int j = 0; j &lt; nonDuplicatedNumbers.length; j++) {\r\n                    if (list[i] == nonDuplicatedNumbers[j]) {\r\n                        isDuplicate = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!isDuplicate) {\r\n                    nonDuplicatedNumbers[i - numberOfDuplicates] = list[i];\r\n                } else {\r\n                    numberOfDuplicates++;\r\n                }\r\n            }\r\n\r\n            nonDuplicatedNumbers = removeInvalidData(nonDuplicatedNumbers, numberOfDuplicates);\r\n\r\n            return nonDuplicatedNumbers;\r\n        }\r\n\r\nAnd now `removeInvalidData` does the following:\r\n\r\n1. Creates a new array of the size of the valid data (total - invalid data counts)\r\n2. Iterates over the array using the new array&#39;s length to store the non duplicated values\r\n3. Returns the non duplicated numbers\r\n\r\n        private static int[] removeInvalidData(int[] numbers, int numberOfDuplicates) {\r\n            int[] validNumbers = new int[numbers.length - numberOfDuplicates];\r\n\r\n            for (int i = 0; i &lt; validNumbers.length; i++) {\r\n                validNumbers[i] = numbers[i];\r\n            }\r\n\r\n            return validNumbers;\r\n        }","title":"Could I fix the -1 in the EliminateDuplicates method?","body":"<p>This is not the most efficient solution, but one way would be to create a method <code>removeInvalidData</code>, that:</p>\n<ol>\n<li>Orders the data to have the invalid data (<code>-1</code>) at the beginning or end of the array</li>\n<li>Counts the amount of invalid data</li>\n<li>Creates a new array of the size of the valid data (total data count - invalid data count)</li>\n<li>Fills the new array with the valid data</li>\n</ol>\n<p>An example for this would be:</p>\n<pre><code>private static int[] removeInvalidNumbers(int[] numbers) {\n    int numberOfInvalidData = 0;\n    \n    for (int i = 0; i &lt; numbers.length; i++) {\n        for (int j = i + 1; j &lt; numbers.length; j++) {\n            if (numbers[i] &lt; numbers[j]) {\n                int temp = numbers[i];\n                numbers[i] = numbers[j];\n                numbers[j] = temp;\n            }\n        }\n    }\n    \n    for (int i = 0; i &lt; numbers.length; i++) {\n        if (numbers[i] == -1) {\n            numberOfInvalidData++;\n        }\n    }\n    \n    int[] newNumbers = new int[numbers.length - numberOfInvalidData];\n    \n    for (int i = 0; i &lt; newNumbers.length; i++) {\n        newNumbers[i] = numbers[i];\n    }\n    \n    return newNumbers;\n}\n</code></pre>\n<p>You would call this function in the <code>return</code> statement of <code>eliminateDuplicates</code>:</p>\n<pre><code>return removeInvalidNumbers(list);\n</code></pre>\n<p>As you can see, it uses multiple <code>for-loops</code> even nested ones multiple times.</p>\n<hr />\n<p>I like this approach better:</p>\n<ol>\n<li><p>Creates a new array that has the non duplicated numbers in it <code>nonDuplicatedNumbers</code></p>\n</li>\n<li><p>Creates a flag for <code>isDuplicate</code> that tells us if the number is duplicated</p>\n</li>\n<li><p>Adds the number to <code>nonDuplicatedNumber</code> if <code>isDuplicate</code> is false</p>\n</li>\n<li><p>Counts the number of invalid data at the same time</p>\n</li>\n<li><p>Calls the function to remove invalid data</p>\n<pre><code> private static int[] eliminateDuplicates(int[] list) {\n     int[] nonDuplicatedNumbers = new int[list.length];\n     int numberOfDuplicates = 0;\n     for (int i = 0; i &lt; list.length; i++) {\n         boolean isDuplicate = false;\n         for (int j = 0; j &lt; nonDuplicatedNumbers.length; j++) {\n             if (list[i] == nonDuplicatedNumbers[j]) {\n                 isDuplicate = true;\n                 break;\n             }\n         }\n         if (!isDuplicate) {\n             nonDuplicatedNumbers[i - numberOfDuplicates] = list[i];\n         } else {\n             numberOfDuplicates++;\n         }\n     }\n\n     nonDuplicatedNumbers = removeInvalidData(nonDuplicatedNumbers, numberOfDuplicates);\n\n     return nonDuplicatedNumbers;\n }\n</code></pre>\n</li>\n</ol>\n<p>And now <code>removeInvalidData</code> does the following:</p>\n<ol>\n<li><p>Creates a new array of the size of the valid data (total - invalid data counts)</p>\n</li>\n<li><p>Iterates over the array using the new array's length to store the non duplicated values</p>\n</li>\n<li><p>Returns the non duplicated numbers</p>\n<pre><code> private static int[] removeInvalidData(int[] numbers, int numberOfDuplicates) {\n     int[] validNumbers = new int[numbers.length - numberOfDuplicates];\n\n     for (int i = 0; i &lt; validNumbers.length; i++) {\n         validNumbers[i] = numbers[i];\n     }\n\n     return validNumbers;\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682712650,"creation_date":1682708777,"question_id":76132575,"body_markdown":"Problem: Eliminate duplicates\r\n\r\nWrite a method that returns a new array by eliminating the duplicate values in the array using the following method header:\r\n\r\npublic static int[] eliminateDuplicates (int[] list)\r\n\r\nWrite a program that reads in ten integers, invokes the method, and displays the result.\r\n\r\nI am trying to remove the -1s in my java code. I figured out the first part but i’m confusing myself on how to fix my eliminateDuplicates method. I was told to add “int[] list2 = new int[count]” Can anyone give me advice on how to fix this. I am still very new to coding\r\n\r\n```import java.util.Scanner;\r\n\r\npublic class Lab09 {\r\n    public static void main(String[] args) {\r\n        Scanner s = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter ten numbers: &quot;);\r\n        int[] num = new int[10];\r\n\r\n        for (int i = 0; i &lt; num.length; i++) {\r\n            num[i] = s.nextInt();\r\n        }\r\n        num = eliminateDuplicates(num);\r\n\r\n        System.out.print(&quot;The distinct numbers are: &quot;);\r\n        for (int i = 0; i &lt; num.length; i++) {\r\n            System.out.print(num[i] + &quot; &quot;);\r\n        }\r\n        s.close();\r\n    }\r\n\r\n    public static int[] eliminateDuplicates(int[] list) {\r\n        for (int i = 0; i &lt; list.length; i++) {\r\n            for (int v = i + 1; v &lt; list.length; v++) {\r\n                if (list[i] == list[v]) {\r\n                    list[v] = -1;\r\n                }\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n}\r\n","title":"Could I fix the -1 in the EliminateDuplicates method?","body":"<p>Problem: Eliminate duplicates</p>\n<p>Write a method that returns a new array by eliminating the duplicate values in the array using the following method header:</p>\n<p>public static int[] eliminateDuplicates (int[] list)</p>\n<p>Write a program that reads in ten integers, invokes the method, and displays the result.</p>\n<p>I am trying to remove the -1s in my java code. I figured out the first part but i’m confusing myself on how to fix my eliminateDuplicates method. I was told to add “int[] list2 = new int[count]” Can anyone give me advice on how to fix this. I am still very new to coding</p>\n<pre><code>\npublic class Lab09 {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n\n        System.out.println(&quot;Enter ten numbers: &quot;);\n        int[] num = new int[10];\n\n        for (int i = 0; i &lt; num.length; i++) {\n            num[i] = s.nextInt();\n        }\n        num = eliminateDuplicates(num);\n\n        System.out.print(&quot;The distinct numbers are: &quot;);\n        for (int i = 0; i &lt; num.length; i++) {\n            System.out.print(num[i] + &quot; &quot;);\n        }\n        s.close();\n    }\n\n    public static int[] eliminateDuplicates(int[] list) {\n        for (int i = 0; i &lt; list.length; i++) {\n            for (int v = i + 1; v &lt; list.length; v++) {\n                if (list[i] == list[v]) {\n                    list[v] = -1;\n                }\n            }\n        }\n        return list;\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9757,"page":468,"page_size":100}
