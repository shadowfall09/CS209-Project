{"items":[{"tags":["java","arraylist","number-formatting"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1694292257,"post_id":77073987,"comment_id":135873025,"body_markdown":"Use the `sort(List,Comparator)` overload (or just `List#sort(Comparator)`) and supply a `Comparator&lt;Number&gt;` that appropriately compares the `Number` objects. How you determine what an &quot;appropriate comparison&quot; is either up to you, inferable from other constraints, or you need to ask for clarification from your professor.","body":"Use the <code>sort(List,Comparator)</code> overload (or just <code>List#sort(Comparator)</code>) and supply a <code>Comparator&lt;Number&gt;</code> that appropriately compares the <code>Number</code> objects. How you determine what an &quot;appropriate comparison&quot; is either up to you, inferable from other constraints, or you need to ask for clarification from your professor."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":5,"creation_date":1694292323,"post_id":77073987,"comment_id":135873035,"body_markdown":"`Number` does not implement `Comparable`, you&#39;d have to write a comparator that can determine the actual subtype and call the appropriate comparator.","body":"<code>Number</code> does not implement <code>Comparable</code>, you&#39;d have to write a comparator that can determine the actual subtype and call the appropriate comparator."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1694295721,"post_id":77073987,"comment_id":135873336,"body_markdown":"Rough and ready but you might try `list.stream().mapToDouble(Number::doubleValue).sorted().forEach(System.out::println);`","body":"Rough and ready but you might try <code>list.stream().mapToDouble(Number::doubleValue).sorted().forE&zwnj;&#8203;ach(System.out::prin&zwnj;&#8203;tln);</code>"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1695498068,"post_id":77073987,"comment_id":136033462,"body_markdown":"This is a subtle and quite difficult problem.  You have to consider both the ranges and precisions of all the possible `Number` representations and handle each representation as a distinct case.  _There is no one type that encompasses all possible values in all the subtypes of `Number` while preserving precision._  And things get even more complex if the array contains a mixture of `Number` subtypes.  I don&#39;t think any of the answers below address this issue.","body":"This is a subtle and quite difficult problem.  You have to consider both the ranges and precisions of all the possible <code>Number</code> representations and handle each representation as a distinct case.  <i>There is no one type that encompasses all possible values in all the subtypes of <code>Number</code> while preserving precision.</i>  And things get even more complex if the array contains a mixture of <code>Number</code> subtypes.  I don&#39;t think any of the answers below address this issue."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1694376725,"creation_date":1694294917,"answer_id":77074096,"question_id":77073987,"body_markdown":"&gt; _&quot;... The code works fine for an array list of any type except `Number`. But I am required to use `Number`.&quot;_\r\n\r\nUse the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class for comparison.\r\n\r\n```java\r\nlist.sort(Comparator.comparing(e -&gt; new BigDecimal(String.valueOf(e))));\r\n```\r\n\r\n```java\r\npublic static void sort(ArrayList&lt;Number&gt; list){\r\n    list.sort(Comparator.comparing(e -&gt; new BigDecimal(String.valueOf(e))));\r\n    for(Number N: list)\r\n        System.out.printf(&quot;[%s]&quot;,N);\r\n    System.out.println();\r\n}\r\n```\r\n\r\nAlso, you&#39;ll need to adjust the _printf_ specifier to `%s`, or you&#39;ll receive an _[IllegalFormatConversionException](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/IllegalFormatConversionException.html)_.\r\n\r\nHere is an example with some random _Number_ objects.\r\n\r\n```java\r\nArrayList&lt;Number&gt; list = new ArrayList&lt;&gt;();\r\nlist.add(4);\r\nlist.add(3f);\r\nlist.add(2l);\r\nlist.add(1d);\r\nSystem.out.println(list);\r\nsort(list);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[4, 3.0, 2, 1.0]\r\n[1.0][2][3.0][4]\r\n```","title":"How to sort an ArrayList of type Number","body":"<blockquote>\n<p><em>&quot;... The code works fine for an array list of any type except <code>Number</code>. But I am required to use <code>Number</code>.&quot;</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> class for comparison.</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.sort(Comparator.comparing(e -&gt; new BigDecimal(String.valueOf(e))));\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void sort(ArrayList&lt;Number&gt; list){\n    list.sort(Comparator.comparing(e -&gt; new BigDecimal(String.valueOf(e))));\n    for(Number N: list)\n        System.out.printf(&quot;[%s]&quot;,N);\n    System.out.println();\n}\n</code></pre>\n<p>Also, you'll need to adjust the <em>printf</em> specifier to <code>%s</code>, or you'll receive an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/IllegalFormatConversionException.html\" rel=\"nofollow noreferrer\">IllegalFormatConversionException</a></em>.</p>\n<p>Here is an example with some random <em>Number</em> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Number&gt; list = new ArrayList&lt;&gt;();\nlist.add(4);\nlist.add(3f);\nlist.add(2l);\nlist.add(1d);\nSystem.out.println(list);\nsort(list);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[4, 3.0, 2, 1.0]\n[1.0][2][3.0][4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29404134,"reputation":57,"user_id":22529599,"display_name":"Diavel"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1694403742,"creation_date":1694297851,"answer_id":77074214,"question_id":77073987,"body_markdown":"To give [credit to Jim Garrison][1], [`Number`][2] is not [`Comparable`][3] so a [`Comparator`][4] needs to be defined for the Number data type. This can be done as such.\r\n\r\n    static Comparator&lt;Number&gt; NumberComparator = new Comparator&lt;Number&gt;(){\r\n\r\n        public int compare(Number n1, Number n2) {\r\n\r\n            BigDecimal N1,N2;\r\n            N1 = new BigDecimal(String.valueOf(n1));\r\n            N2 = new BigDecimal(String.valueOf(n2));\r\n            return N1.compareTo(N2);\r\n\r\n        } \r\n    };\r\nThank you all for sending me down the right path and teaching me some tricks along the way.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77073987/how-to-sort-an-arraylist-of-type-number#comment135873035_77073987\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Number.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html","title":"How to sort an ArrayList of type Number","body":"<p>To give <a href=\"https://stackoverflow.com/questions/77073987/how-to-sort-an-arraylist-of-type-number#comment135873035_77073987\">credit to Jim Garrison</a>, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Number.html\" rel=\"nofollow noreferrer\"><code>Number</code></a> is not <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a> so a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> needs to be defined for the Number data type. This can be done as such.</p>\n<pre><code>static Comparator&lt;Number&gt; NumberComparator = new Comparator&lt;Number&gt;(){\n\n    public int compare(Number n1, Number n2) {\n\n        BigDecimal N1,N2;\n        N1 = new BigDecimal(String.valueOf(n1));\n        N2 = new BigDecimal(String.valueOf(n2));\n        return N1.compareTo(N2);\n\n    } \n};\n</code></pre>\n<p>Thank you all for sending me down the right path and teaching me some tricks along the way.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694301114,"creation_date":1694298793,"answer_id":77074247,"question_id":77073987,"body_markdown":"All you need is correctly compare `double` values. To do this, you should use `Double.compare()`.\r\n\r\nBut `Number` can be greater, e.g. `BigDecimal`, so in general way it is better to convert each number to `BigDecimal` and compare it then.\r\n\r\nRemember, this is not efficient solution.\r\n\r\n```java\r\npublic static void sort(List&lt;Number&gt; list) {\r\n    list.sort(Comparator.comparing(one -&gt; new BigDecimal(one.toString())));\r\n    \r\n    for (Number N : list)\r\n        System.out.printf(&quot;[%s]&quot;, N);\r\n    \r\n    System.out.println();\r\n}\r\n```","title":"How to sort an ArrayList of type Number","body":"<p>All you need is correctly compare <code>double</code> values. To do this, you should use <code>Double.compare()</code>.</p>\n<p>But <code>Number</code> can be greater, e.g. <code>BigDecimal</code>, so in general way it is better to convert each number to <code>BigDecimal</code> and compare it then.</p>\n<p>Remember, this is not efficient solution.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void sort(List&lt;Number&gt; list) {\n    list.sort(Comparator.comparing(one -&gt; new BigDecimal(one.toString())));\n    \n    for (Number N : list)\n        System.out.printf(&quot;[%s]&quot;, N);\n    \n    System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":29404134,"reputation":57,"user_id":22529599,"display_name":"Diavel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1694403742,"creation_date":1694292086,"question_id":77073987,"body_markdown":"\r\n```java\r\n/* Here is a method to sort an array list\r\n * if the array list type is Integer ect this runs just fine\r\n * But errors on Number\r\n */ \r\n\r\npublic static void sort(ArrayList&lt;Number&gt; list){\r\n    Collections.sort(list);\r\n    for(Number N: list)\r\n        System.out.printf(&quot;[%d]&quot;,N);\r\n    System.out.println();\r\n}\r\n```\r\n\r\nThe code works fine for an array list of any type except [`Number`][1]. But I am required to use `Number`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Number.html","title":"How to sort an ArrayList of type Number","body":"<pre class=\"lang-java prettyprint-override\"><code>/* Here is a method to sort an array list\n * if the array list type is Integer ect this runs just fine\n * But errors on Number\n */ \n\npublic static void sort(ArrayList&lt;Number&gt; list){\n    Collections.sort(list);\n    for(Number N: list)\n        System.out.printf(&quot;[%d]&quot;,N);\n    System.out.println();\n}\n</code></pre>\n<p>The code works fine for an array list of any type except <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Number.html\" rel=\"nofollow noreferrer\"><code>Number</code></a>. But I am required to use <code>Number</code>.</p>\n"},{"tags":["java","mysql","javafx","fxml","fxmlloader"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1694403959,"post_id":77078718,"comment_id":135881683,"body_markdown":"You should create a [mcve] consisting of an fxml file with a one table, two columns, a couple of items of hard coded data (no database), and populate the hard coded data into the controller.","body":"You should create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> consisting of an fxml file with a one table, two columns, a couple of items of hard coded data (no database), and populate the hard coded data into the controller."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694404040,"post_id":77078718,"comment_id":135881692,"body_markdown":"Never set @FXML fields, use Java naming conventions for your controller class, a constructor for the controllers is unnecessary,  setting this.memberField = memberField is probably wrong  and is confusing.","body":"Never set @FXML fields, use Java naming conventions for your controller class, a constructor for the controllers is unnecessary,  setting this.memberField = memberField is probably wrong  and is confusing."}],"owner":{"account_id":15924578,"reputation":11,"user_id":13552123,"display_name":"pmccu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694401587,"creation_date":1694401587,"question_id":77078718,"body_markdown":"The basis of this is: I&#39;m trying to get all of the components in the modify appointments.fxml file to pre-populate the contents of the &#39;customerTable&#39; tableview into their respective components.\r\n\r\nThe main window controller is &#39;appointmentsandcustomerscontroller&#39;:\r\n\r\nappointmentsandcustomerscontroller:\r\n\r\n```\r\npackage com.company.controllers;\r\n\r\n// ... IMPORT STATEMENTS ...\r\nimport com.company.models.Appointment;\r\nimport com.company.models.Contact;\r\nimport com.company.models.Customer;\r\nimport com.company.controllers.createcustomercontroller;\r\nimport com.mysql.cj.conf.StringProperty;\r\n\r\n\r\nimport javafx.application.Platform;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.control.cell.PropertyValueFactory;\r\nimport javafx.stage.Modality;\r\nimport javafx.stage.Stage;\r\nimport helper.JDBC;\r\nimport com.company.models.Customer;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport com.company.controllers.createappointmentcontroller;\r\nimport javafx.scene.control.cell.PropertyValueFactory;\r\n\r\n\r\nimport javax.imageio.IIOParam;\r\nimport java.io.IOException;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\n\r\npublic class appointmentsandcustomerscontroller {\r\n\r\n    // ... APPOINTMENTS FXML TAGS ...\r\n\r\n    @FXML\r\n    private TableView&lt;Appointment&gt; appointmentsTable;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, Integer&gt; appointmentID;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, String&gt; appointmentTitle;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, String&gt; appointmentType;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, String&gt; appointmentDescription;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, LocalDateTime&gt; appointmentStartDateTime;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, LocalDateTime&gt; appointmentEndDateTime;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, Contact&gt; appointmentContact;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, Integer&gt; appointmentCustomerID;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Appointment, Integer&gt; appointmentUserID;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; customerCountryColumn;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; createDate;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; createdBy;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; lastUpdate;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; lastUpdatedBy;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; divisionID;\r\n\r\n    @FXML\r\n    private Button appointmentAddButton;\r\n\r\n    @FXML\r\n    private Button appointmentModify;\r\n\r\n   /* @FXML\r\n    private Button appointmentDeleteButton;*/\r\n\r\n\r\n    // ... CUSTOMER FXML TAGS\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; customerPostalCode;\r\n\r\n    @FXML\r\n    private TableView&lt;Customer&gt; customersTable;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, Integer&gt; customerID;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; customerName;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; customerAddress;\r\n\r\n    @FXML\r\n    private TableColumn&lt;Customer, String&gt; customerPhoneNumber;\r\n\r\n    @FXML\r\n    private Button customerAdd;\r\n\r\n    @FXML\r\n    private Button customerModify;\r\n\r\n\r\n\r\n\r\n    // ... REPORTS AND LOGOUT ...\r\n    @FXML\r\n    private Button generateReport;\r\n\r\n    @FXML\r\n    private Button homeLogout;\r\n\r\n\r\n    /*public int getSelectedAppointmentID() {\r\n\r\n        int selectedAppointmentID = 0;\r\n        return selectedAppointmentID;\r\n    }*/\r\n\r\n\r\n    public ObservableList&lt;Customer&gt; customerList;\r\n    public ObservableList&lt;Appointment&gt; appointmentList = FXCollections.observableArrayList();\r\n    private appointmentsandcustomerscontroller controllerReference;\r\n\r\n    // private ObservableList&lt;Contact&gt; contacts;\r\n\r\n    @FXML\r\n    public void initialize() {\r\n\r\n        // ... Initialize Customers Table ...\r\n        customerID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerID&quot;));\r\n        customerName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerName&quot;));\r\n        customerAddress.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;address&quot;));\r\n        customerPhoneNumber.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;phoneNumber&quot;));\r\n        customerPostalCode.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;postalCode&quot;));\r\n\r\n\r\n        // ... NOT NEEDED FOR CUSTOMERS TABLE?...\r\n        /*createDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;createDate&quot;));\r\n        createdBy.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;createdBy&quot;));\r\n        lastUpdate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;lastUpdate&quot;));\r\n        lastUpdatedBy.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;lastUpdatedBy&quot;));\r\n        divisionID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;divisionID&quot;));*/\r\n\r\n\r\n        // ... Initialize Appointments Table ...\r\n\r\n        appointmentID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;appointmentId&quot;));\r\n        appointmentTitle.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;title&quot;));\r\n        appointmentType.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;type&quot;));\r\n        appointmentDescription.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;description&quot;));\r\n        appointmentStartDateTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;startDateTime&quot;));\r\n        appointmentEndDateTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;endDateTime&quot;));\r\n        appointmentContact.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;contact&quot;));\r\n        appointmentCustomerID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerId&quot;));\r\n        appointmentUserID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;userId&quot;));\r\n\r\n        populateAppointments();\r\n        populateCustomers();\r\n        customersTable.setItems(customerList);\r\n        appointmentsTable.setItems(appointmentList);\r\n        setControllerReference(this);\r\n    }\r\n\r\n\r\n\r\n\r\n    public List&lt;Appointment&gt; fetchDataFromDatabase() {\r\n        // Create a list to store the fetched appointments\r\n        List&lt;Appointment&gt; appointments = new ArrayList&lt;&gt;();\r\n\r\n        // Automatically close the connection\r\n        try (Connection connection = JDBC.openConnection()) {\r\n            // Create and execute a SQL query to fetch the necessary data\r\n            String query = &quot;SELECT * FROM Appointments&quot;; // Adjust the query as needed\r\n            ResultSet resultSet = connection.createStatement().executeQuery(query);\r\n\r\n            // Iterate through the result set and create Appointment objects\r\n            while (resultSet.next()) {\r\n                // Retrieve data from the result set\r\n                int appointmentId = resultSet.getInt(&quot;Appointment_ID&quot;);\r\n                String title = resultSet.getString(&quot;Title&quot;);\r\n                String description = resultSet.getString(&quot;Description&quot;);\r\n                String location = resultSet.getString(&quot;Location&quot;);\r\n                String type = resultSet.getString(&quot;Type&quot;);\r\n                LocalDateTime startDateTime = resultSet.getTimestamp(&quot;Start_DateTime&quot;).toLocalDateTime();\r\n                LocalDateTime endDateTime = resultSet.getTimestamp(&quot;End_DateTime&quot;).toLocalDateTime();\r\n                int customerId = resultSet.getInt(&quot;Customer_ID&quot;);\r\n                int userId = resultSet.getInt(&quot;User_ID&quot;);\r\n                int contactId = resultSet.getInt(&quot;Contact_ID&quot;);\r\n\r\n                // Create a Contact object (you may fetch contact details from another table)\r\n                Contact contact = new Contact(&quot;ContactName&quot;); // Replace with actual contact details\r\n\r\n                // Create an Appointment object and add it to the list\r\n                Appointment appointment = new Appointment(\r\n                        appointmentId,\r\n                        title,\r\n                        description,\r\n                        location,\r\n                        contact,\r\n                        type,\r\n                        startDateTime,\r\n                        endDateTime,\r\n                        customerId,\r\n                        userId,\r\n                        contactId\r\n                );\r\n\r\n                appointments.add(appointment); // Add the appointment to the list\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return appointments;\r\n    }\r\n\r\n\r\n\r\n\r\n    private void populateCustomers() {\r\n        try {\r\n            // Open the database connection\r\n            JDBC.openConnection();\r\n\r\n\r\n            // SQL query to retrieve data from the &#39;customers&#39; table\r\n            String query = &quot;SELECT * FROM customers&quot;;\r\n\r\n\r\n            // Execute the query and retrieve the result set\r\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\r\n\r\n            // Populate the customerList with retrieved data\r\n            customerList = FXCollections.observableArrayList();\r\n\r\n\r\n            while (resultSet.next()) {\r\n                int customerID = resultSet.getInt(&quot;Customer_ID&quot;);\r\n                String customerName = resultSet.getString(&quot;Customer_Name&quot;);\r\n                String address = resultSet.getString(&quot;Address&quot;);\r\n                String postalCode = resultSet.getString(&quot;Postal_Code&quot;);\r\n                String phoneNumber = resultSet.getString(&quot;Phone&quot;);\r\n\r\n\r\n                // Create a Customer object without the extra parameters\r\n                Customer customer = new Customer(customerID, customerName, address, postalCode, phoneNumber);\r\n                customerList.add(customer);\r\n            }\r\n\r\n\r\n\r\n            // Set the populated customerList to the customersTable\r\n            /*customersTable.setItems(customerList);\r\n            customersTable.refresh();*/\r\n\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            // Close the database connection\r\n            JDBC.closeConnection();\r\n        }\r\n    }\r\n\r\n    public void populateAppointments() {\r\n        try {\r\n            // Open the database connection\r\n            JDBC.openConnection();\r\n\r\n            // SQL query to retrieve all columns from the &#39;appointments&#39; table\r\n            String query = &quot;SELECT * FROM appointments&quot;;\r\n\r\n            // Execute the query and retrieve the result set\r\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\r\n\r\n            // Populate the appointmentList with retrieved data\r\n            appointmentList = FXCollections.observableArrayList();\r\n\r\n            while (resultSet.next()) {\r\n                int appointmentId = resultSet.getInt(&quot;Appointment_ID&quot;);\r\n                String title = resultSet.getString(&quot;Title&quot;);\r\n                String type = resultSet.getString(&quot;Type&quot;);\r\n                String description = resultSet.getString(&quot;Description&quot;);\r\n                String location = resultSet.getString(&quot;Location&quot;); // Retrieve the &quot;location&quot; column\r\n                LocalDateTime startDateTime = resultSet.getTimestamp(&quot;Start&quot;).toLocalDateTime();\r\n                LocalDateTime endDateTime = resultSet.getTimestamp(&quot;End&quot;).toLocalDateTime();\r\n                int contactId = resultSet.getInt(&quot;Contact_ID&quot;);\r\n                int customerId = resultSet.getInt(&quot;Customer_ID&quot;);\r\n                int userId = resultSet.getInt(&quot;User_ID&quot;);\r\n\r\n\r\n                Contact contact = getContactFromResultSet(contactId);\r\n\r\n                // Create an Appointment object and add it to the list\r\n                Appointment appointment = new Appointment(appointmentId, title, description, location, contact, type, startDateTime, endDateTime, customerId, userId, contactId);\r\n\r\n                appointmentList.add(appointment);\r\n            }\r\n\r\n            // Set the populated appointmentList to the appointmentsTable\r\n            /*appointmentsTable.setItems(appointmentList);\r\n            appointmentsTable.refresh();*/\r\n\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            // Close the database connection\r\n            JDBC.closeConnection();\r\n        }\r\n    }\r\n\r\n    private Contact getContactFromResultSet(int contactId) {\r\n        try {\r\n            // SQL query to retrieve the contact information by ID\r\n            String query = &quot;SELECT * FROM contacts WHERE Contact_ID = &quot; + contactId;\r\n\r\n            // Execute the query and retrieve the result set\r\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\r\n\r\n            // Check if there is a result\r\n            if (resultSet.next()) {\r\n                String contactName = resultSet.getString(&quot;Contact_Name&quot;);\r\n\r\n                // Create and return a Contact object\r\n                return new Contact(contactId, contactName);\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Return null if no contact is found\r\n        return null;\r\n    }\r\n\r\n    @FXML\r\n    public void showInformationDialog(String title, String message) {\r\n        Alert alert = new Alert(Alert.AlertType.INFORMATION);\r\n        alert.setTitle(title);\r\n        alert.setHeaderText(null);\r\n        alert.setContentText(message);\r\n        alert.showAndWait();\r\n    }\r\n\r\n    @FXML\r\n    public void showErrorDialog(String title, String message) {\r\n        Alert alert = new Alert(Alert.AlertType.ERROR);\r\n        alert.setTitle(title);\r\n        alert.setHeaderText(null);\r\n        alert.setContentText(message);\r\n        alert.showAndWait();\r\n    }\r\n\r\n\r\n    // ... Delete Appointments ...\r\n    @FXML\r\n    public void appointmentDeleteButton() {\r\n        // Get the selected items from the appointmentsTable\r\n        ObservableList&lt;Appointment&gt; selectedAppointments = appointmentsTable.getSelectionModel().getSelectedItems();\r\n\r\n        if (selectedAppointments.isEmpty()) {\r\n            // No appointments are selected, display a message or handle it as needed\r\n            // You can show an alert or a message to inform the user.\r\n\r\n        } else {\r\n            // Confirm the deletion with the user (you can use JavaFX dialogs for this)\r\n            boolean confirmed = showConfirmationDialog(&quot;Confirm Deletion&quot;, &quot;Are you sure you want to delete selected appointments?&quot;);\r\n\r\n            if (confirmed) {\r\n                try {\r\n                    // Open the database connection\r\n                    JDBC.openConnection();\r\n\r\n                    // Define the SQL query to delete appointments by their IDs\r\n                    String deleteQuery = &quot;DELETE FROM appointments WHERE Appointment_ID = ?&quot;;\r\n\r\n\r\n                    // Use a PreparedStatement to execute the query\r\n                    PreparedStatement preparedStatement = JDBC.connection.prepareStatement(deleteQuery);\r\n\r\n                    // Delete each selected appointment\r\n                    for (Appointment appointment : selectedAppointments) {\r\n                        int appointmentId = appointment.getAppointmentId(); // Use getAppointmentId\r\n                        preparedStatement.setInt(1, appointmentId);\r\n                        preparedStatement.executeUpdate();\r\n                    }\r\n\r\n\r\n                    // Close the PreparedStatement\r\n                    preparedStatement.close();\r\n\r\n                    // Remove the deleted appointments from the appointmentsTable\r\n                    appointmentsTable.getItems().removeAll(selectedAppointments);\r\n                    System.out.println(&quot;Appointments removed from the list.&quot;);\r\n\r\n                    // Inform the user about the successful deletion (you can use JavaFX alerts)\r\n                    showInformationDialog(&quot;Deletion Successful&quot;, &quot;Selected appointments have been deleted.&quot;);\r\n\r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                    // Handle database errors or show an error message\r\n                    showErrorDialog(&quot;Error&quot;, &quot;An error occurred while deleting appointments.&quot;);\r\n                } finally {\r\n                    // Close the database connection\r\n                    JDBC.closeConnection();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public boolean showConfirmationDialog(String title, String message) {\r\n        Alert confirmationDialog = new Alert(Alert.AlertType.CONFIRMATION);\r\n        confirmationDialog.setTitle(title);\r\n        confirmationDialog.setHeaderText(null);\r\n        confirmationDialog.setContentText(message);\r\n\r\n        // Add OK and Cancel buttons to the dialog\r\n        ButtonType okButton = new ButtonType(&quot;OK&quot;, ButtonBar.ButtonData.OK_DONE);\r\n        ButtonType cancelButton = new ButtonType(&quot;Cancel&quot;, ButtonBar.ButtonData.CANCEL_CLOSE);\r\n        confirmationDialog.getButtonTypes().setAll(okButton, cancelButton);\r\n\r\n        // Show the dialog and wait for a button press\r\n        Optional&lt;ButtonType&gt; result = confirmationDialog.showAndWait();\r\n\r\n        // Check if the OK button was pressed\r\n        return result.isPresent() &amp;&amp; result.get() == okButton;\r\n    }\r\n\r\n\r\n\r\n    // CODE FOR THE BUTTONS THAT OPEN THE WINDOWS\r\n    @FXML\r\n    private void appointmentAddButton() {\r\n        try {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/createappointment.fxml&quot;));\r\n            // fxmlLoader.setController(this);\r\n            Parent root = fxmlLoader.load();\r\n\r\n            // ... If I remove this, the appointment saves, but it doesn&#39;t refresh the database\r\n            createappointmentcontroller controller = fxmlLoader.getController();\r\n            controller.setAppointmentsController(this);\r\n\r\n            Stage stage = new Stage();\r\n            stage.initModality(Modality.APPLICATION_MODAL);\r\n            stage.setTitle(&quot;Create Appointment&quot;);\r\n            stage.setScene(new Scene(root));\r\n            stage.showAndWait();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    // ... Launches modifyappointment.fxml -- commented out for testing\r\n   /* @FXML\r\n    private void appointmentModifyButton() {\r\n        try {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/modifyappointment.fxml&quot;));\r\n            Parent root = fxmlLoader.load();\r\n\r\n            Stage stage = new Stage();\r\n            stage.initModality(Modality.APPLICATION_MODAL);\r\n            stage.setTitle(&quot;Modify Appointment&quot;);\r\n            stage.setScene(new Scene(root));\r\n            stage.showAndWait();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }*/\r\n\r\n\r\n\r\n\r\n\r\n    // ... Appointment Modify Test ...\r\n\r\n    public void appointmentModifyButton(ActionEvent event) throws IOException {\r\n        // Assuming you have a class for your Appointment and a TableView named &#39;customersTable&#39;\r\n        Appointment selectedAppointment = appointmentsTable.getSelectionModel().getSelectedItem();\r\n        if (selectedAppointment == null) {\r\n            return;\r\n        }\r\n\r\n        Stage stage = (Stage) ((Button) event.getSource()).getScene().getWindow();\r\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/modifyappointment.fxml&quot;));\r\n        Parent scene = loader.load();\r\n        modifyappointmentcontroller controller = loader.getController();\r\n\r\n        // Pass the selectedAppointment to the controller\r\n        controller.setModifyAppointmentID(selectedAppointment);\r\n\r\n        stage.setTitle(&quot;Modify Appointment&quot;);\r\n        stage.setScene(new Scene(scene));\r\n        stage.show();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @FXML\r\n    private void customerAddButton() {\r\n        try {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/customers/createcustomer.fxml&quot;));\r\n            Parent root = fxmlLoader.load();\r\n\r\n            Stage stage = new Stage();\r\n            stage.initModality(Modality.APPLICATION_MODAL);\r\n            stage.setTitle(&quot;Add Customer&quot;);\r\n            stage.setScene(new Scene(root));\r\n            stage.showAndWait();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @FXML\r\n    private void customerModifyButton() {\r\n        try {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/customers/modifycustomer.fxml&quot;));\r\n            Parent root = fxmlLoader.load();\r\n\r\n            // ... START TEST ...\r\n\r\n            /*modifyappointmentcontroller controller = loader.getController();\r\n            controller.initialize(selectedAppointment);*/\r\n            // ... END TEST ...\r\n\r\n            Stage stage = new Stage();\r\n            stage.initModality(Modality.APPLICATION_MODAL);\r\n            stage.setTitle(&quot;Modify Customer&quot;);\r\n            stage.setScene(new Scene(root));\r\n            stage.showAndWait();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    public void setControllerReference(appointmentsandcustomerscontroller controller) {\r\n        this.controllerReference = controller;\r\n    }\r\n\r\n    // Refresh Appointments Table\r\n    public void refreshCustomerTable(ActionEvent actionEvent) {\r\n        populateAppointments();\r\n        appointmentsTable.setItems(appointmentList);\r\n    }\r\n}\r\n```\r\n\r\nAppointment Class:\r\n\r\n```\r\npackage com.company.models;\r\nimport com.company.controllers.modifyappointmentcontroller;\r\nimport java.time.LocalDateTime;\r\n\r\npublic class Appointment {\r\n\r\n    // if these fail, they were set to private - contactId is always private\r\n    private int appointmentId = 1;\r\n    private String title;\r\n    private String description;\r\n    private String location;\r\n    private Contact contact;\r\n    private String type;\r\n    private LocalDateTime startDateTime;\r\n    private LocalDateTime endDateTime;\r\n    private int customerId;\r\n    private int userId;\r\n    private int contactId;\r\n\r\n    public Appointment(int appointmentId, String title, String description, String location,\r\n                       Contact contact, String type, LocalDateTime startDateTime,\r\n                       LocalDateTime endDateTime, int customerId, int userId, int contactId) {\r\n        this.appointmentId = appointmentId;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.location = location;\r\n        this.contact = contact;\r\n        this.type = type;\r\n        this.startDateTime = startDateTime;\r\n        this.endDateTime = endDateTime;\r\n        this.customerId = customerId;\r\n        this.userId = userId;\r\n        this.contactId = contactId;\r\n    }\r\n\r\n\r\n\r\n\r\n    public Appointment(int appointmentId) {\r\n        this.appointmentId = appointmentId;\r\n    }\r\n\r\n    public int getAppointmentId() {\r\n        return appointmentId;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public String getLocation() {\r\n        return location;\r\n    }\r\n\r\n    public Contact getContact() {\r\n        return contact;\r\n    }\r\n\r\n    public String getType() {\r\n        return type;\r\n    }\r\n\r\n    public LocalDateTime getStartDateTime() {\r\n        return startDateTime;\r\n    }\r\n\r\n    public LocalDateTime getEndDateTime() {\r\n        return endDateTime;\r\n    }\r\n\r\n    public int getCustomerId() {\r\n        return customerId;\r\n    }\r\n\r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public int getContactId() {\r\n        return contactId;\r\n    }\r\n\r\n    public void setContactId(int contactId) {\r\n        this.contactId = contactId;\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nmodifyappointmentcontroller:\r\n\r\n```\r\npackage com.company.controllers;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.*;\r\nimport com.company.models.Appointment;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.control.TableColumn;\r\n\r\n\r\npublic class modifyappointmentcontroller {\r\n\r\n    private TableColumn&lt;TextField, Integer&gt; appointmentIDColumn;\r\n\r\n    private int appointmentID;\r\n\r\n    @FXML private TextField modifyAppointmentID; // Keep this as it is with the same fx:id\r\n    @FXML private TextField modifyAppointmentTitle;\r\n    @FXML private TextField modifyAppointmentDescribe;\r\n    @FXML private TextField modifyAppointmentLocation;\r\n    @FXML private ComboBox modifyAppointmentContact;\r\n    @FXML private ComboBox modifyAppointmentType;\r\n    @FXML private DatePicker modifyAppointmentStartDate;\r\n    @FXML private DatePicker modifyAppointmentEndDate;\r\n    @FXML private ComboBox  modifyAppointmentStartTime;\r\n    @FXML private ComboBox  modifyAppointmentEndTime;\r\n    @FXML private ComboBox  modifyAppointmentCustomer;\r\n    @FXML private ComboBox  modifyAppointmentUser;\r\n\r\n    public modifyappointmentcontroller(TextField modifyAppointmentID, TableColumn&lt;TextField, Integer&gt; appointmentIDColumn, TextField modifyAppointmentTitle, TextField modifyAppointmentDescribe, TextField modifyAppointmentLocation, ComboBox modifyAppointmentContact, ComboBox modifyAppointmentType, DatePicker modifyAppointmentStartDate, DatePicker modifyAppointmentEndDate, ComboBox modifyAppointmentStartTime, ComboBox modifyAppointmentEndTime, ComboBox modifyAppointmentCustomer, ComboBox modifyAppointmentUser) {\r\n        this.modifyAppointmentID = modifyAppointmentID;\r\n        this.appointmentIDColumn = appointmentIDColumn;\r\n        this.modifyAppointmentTitle = modifyAppointmentTitle;\r\n        this.modifyAppointmentDescribe = modifyAppointmentDescribe;\r\n        this.modifyAppointmentLocation = modifyAppointmentLocation;\r\n        this.modifyAppointmentContact = modifyAppointmentContact;\r\n        this.modifyAppointmentType = modifyAppointmentType;\r\n        this.modifyAppointmentStartDate = modifyAppointmentStartDate;\r\n        this.modifyAppointmentEndDate = modifyAppointmentEndDate;\r\n        this.modifyAppointmentStartTime = modifyAppointmentStartTime;\r\n        this.modifyAppointmentEndTime = modifyAppointmentEndTime;\r\n        this.modifyAppointmentCustomer = modifyAppointmentCustomer;\r\n        this.modifyAppointmentUser = modifyAppointmentUser;\r\n    }\r\n\r\n    // refer to software 1 - you have to have a new method that will accept the selected card on main controller, that data will be passed to this method\r\n    // this data has to be passed on to the text field... modifyAppointmentID.setText(selectedRecord.appointmentID) &#39;selectedRecord&#39; is just a varible name that can be whatever you want.\r\n\r\n    @FXML\r\n    private void initialize() {\r\n        modifyAppointmentID.setText(String.valueOf(getSelectedAppointmentID())); // Assuming appointmentID has a getAppointmentID() method\r\n       // modifyAppointmentID.setText(&quot;&quot;);\r\n    }\r\n\r\n\r\n    private int getSelectedAppointmentID() {\r\n\r\n        return appointmentID;\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n    public void setModifyAppointmentID(Appointment appointment) {\r\n        this.appointmentID = appointment.getAppointmentId(); // Assuming getAppointmentId() returns an int\r\n        /*modifyAppointmentID.setText(String.valueOf(this.appointmentID));\r\n        modifyAppointmentID.setText(String.valueOf(appointment.getAppointmentId()));*/\r\n        modifyAppointmentID.setText(Integer.toString(getSelectedAppointmentID()));\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;m not sure if I have my variables messed up, but I&#39;ve got everything initialized (that I can think of). I&#39;ve got the constructors properly coded. \r\n\r\nReality is, I&#39;m a complete beginner (so take it easy on me lol) and have it to the point where I can add what I need to the tables, I just can&#39;t get the data to pre-populate.","title":"Pre-Populate TableView Data Into an FXML Window","body":"<p>The basis of this is: I'm trying to get all of the components in the modify appointments.fxml file to pre-populate the contents of the 'customerTable' tableview into their respective components.</p>\n<p>The main window controller is 'appointmentsandcustomerscontroller':</p>\n<p>appointmentsandcustomerscontroller:</p>\n<pre><code>package com.company.controllers;\n\n// ... IMPORT STATEMENTS ...\nimport com.company.models.Appointment;\nimport com.company.models.Contact;\nimport com.company.models.Customer;\nimport com.company.controllers.createcustomercontroller;\nimport com.mysql.cj.conf.StringProperty;\n\n\nimport javafx.application.Platform;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.stage.Modality;\nimport javafx.stage.Stage;\nimport helper.JDBC;\nimport com.company.models.Customer;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport com.company.controllers.createappointmentcontroller;\nimport javafx.scene.control.cell.PropertyValueFactory;\n\n\nimport javax.imageio.IIOParam;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.time.LocalDateTime;\nimport java.time.LocalTime;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic class appointmentsandcustomerscontroller {\n\n    // ... APPOINTMENTS FXML TAGS ...\n\n    @FXML\n    private TableView&lt;Appointment&gt; appointmentsTable;\n\n    @FXML\n    private TableColumn&lt;Appointment, Integer&gt; appointmentID;\n\n    @FXML\n    private TableColumn&lt;Appointment, String&gt; appointmentTitle;\n\n    @FXML\n    private TableColumn&lt;Appointment, String&gt; appointmentType;\n\n    @FXML\n    private TableColumn&lt;Appointment, String&gt; appointmentDescription;\n\n    @FXML\n    private TableColumn&lt;Appointment, LocalDateTime&gt; appointmentStartDateTime;\n\n    @FXML\n    private TableColumn&lt;Appointment, LocalDateTime&gt; appointmentEndDateTime;\n\n    @FXML\n    private TableColumn&lt;Appointment, Contact&gt; appointmentContact;\n\n    @FXML\n    private TableColumn&lt;Appointment, Integer&gt; appointmentCustomerID;\n\n    @FXML\n    private TableColumn&lt;Appointment, Integer&gt; appointmentUserID;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; customerCountryColumn;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; createDate;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; createdBy;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; lastUpdate;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; lastUpdatedBy;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; divisionID;\n\n    @FXML\n    private Button appointmentAddButton;\n\n    @FXML\n    private Button appointmentModify;\n\n   /* @FXML\n    private Button appointmentDeleteButton;*/\n\n\n    // ... CUSTOMER FXML TAGS\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; customerPostalCode;\n\n    @FXML\n    private TableView&lt;Customer&gt; customersTable;\n\n    @FXML\n    private TableColumn&lt;Customer, Integer&gt; customerID;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; customerName;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; customerAddress;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; customerPhoneNumber;\n\n    @FXML\n    private Button customerAdd;\n\n    @FXML\n    private Button customerModify;\n\n\n\n\n    // ... REPORTS AND LOGOUT ...\n    @FXML\n    private Button generateReport;\n\n    @FXML\n    private Button homeLogout;\n\n\n    /*public int getSelectedAppointmentID() {\n\n        int selectedAppointmentID = 0;\n        return selectedAppointmentID;\n    }*/\n\n\n    public ObservableList&lt;Customer&gt; customerList;\n    public ObservableList&lt;Appointment&gt; appointmentList = FXCollections.observableArrayList();\n    private appointmentsandcustomerscontroller controllerReference;\n\n    // private ObservableList&lt;Contact&gt; contacts;\n\n    @FXML\n    public void initialize() {\n\n        // ... Initialize Customers Table ...\n        customerID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerID&quot;));\n        customerName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerName&quot;));\n        customerAddress.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;address&quot;));\n        customerPhoneNumber.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;phoneNumber&quot;));\n        customerPostalCode.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;postalCode&quot;));\n\n\n        // ... NOT NEEDED FOR CUSTOMERS TABLE?...\n        /*createDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;createDate&quot;));\n        createdBy.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;createdBy&quot;));\n        lastUpdate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;lastUpdate&quot;));\n        lastUpdatedBy.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;lastUpdatedBy&quot;));\n        divisionID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;divisionID&quot;));*/\n\n\n        // ... Initialize Appointments Table ...\n\n        appointmentID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;appointmentId&quot;));\n        appointmentTitle.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;title&quot;));\n        appointmentType.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;type&quot;));\n        appointmentDescription.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;description&quot;));\n        appointmentStartDateTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;startDateTime&quot;));\n        appointmentEndDateTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;endDateTime&quot;));\n        appointmentContact.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;contact&quot;));\n        appointmentCustomerID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;customerId&quot;));\n        appointmentUserID.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;userId&quot;));\n\n        populateAppointments();\n        populateCustomers();\n        customersTable.setItems(customerList);\n        appointmentsTable.setItems(appointmentList);\n        setControllerReference(this);\n    }\n\n\n\n\n    public List&lt;Appointment&gt; fetchDataFromDatabase() {\n        // Create a list to store the fetched appointments\n        List&lt;Appointment&gt; appointments = new ArrayList&lt;&gt;();\n\n        // Automatically close the connection\n        try (Connection connection = JDBC.openConnection()) {\n            // Create and execute a SQL query to fetch the necessary data\n            String query = &quot;SELECT * FROM Appointments&quot;; // Adjust the query as needed\n            ResultSet resultSet = connection.createStatement().executeQuery(query);\n\n            // Iterate through the result set and create Appointment objects\n            while (resultSet.next()) {\n                // Retrieve data from the result set\n                int appointmentId = resultSet.getInt(&quot;Appointment_ID&quot;);\n                String title = resultSet.getString(&quot;Title&quot;);\n                String description = resultSet.getString(&quot;Description&quot;);\n                String location = resultSet.getString(&quot;Location&quot;);\n                String type = resultSet.getString(&quot;Type&quot;);\n                LocalDateTime startDateTime = resultSet.getTimestamp(&quot;Start_DateTime&quot;).toLocalDateTime();\n                LocalDateTime endDateTime = resultSet.getTimestamp(&quot;End_DateTime&quot;).toLocalDateTime();\n                int customerId = resultSet.getInt(&quot;Customer_ID&quot;);\n                int userId = resultSet.getInt(&quot;User_ID&quot;);\n                int contactId = resultSet.getInt(&quot;Contact_ID&quot;);\n\n                // Create a Contact object (you may fetch contact details from another table)\n                Contact contact = new Contact(&quot;ContactName&quot;); // Replace with actual contact details\n\n                // Create an Appointment object and add it to the list\n                Appointment appointment = new Appointment(\n                        appointmentId,\n                        title,\n                        description,\n                        location,\n                        contact,\n                        type,\n                        startDateTime,\n                        endDateTime,\n                        customerId,\n                        userId,\n                        contactId\n                );\n\n                appointments.add(appointment); // Add the appointment to the list\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        return appointments;\n    }\n\n\n\n\n    private void populateCustomers() {\n        try {\n            // Open the database connection\n            JDBC.openConnection();\n\n\n            // SQL query to retrieve data from the 'customers' table\n            String query = &quot;SELECT * FROM customers&quot;;\n\n\n            // Execute the query and retrieve the result set\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\n\n            // Populate the customerList with retrieved data\n            customerList = FXCollections.observableArrayList();\n\n\n            while (resultSet.next()) {\n                int customerID = resultSet.getInt(&quot;Customer_ID&quot;);\n                String customerName = resultSet.getString(&quot;Customer_Name&quot;);\n                String address = resultSet.getString(&quot;Address&quot;);\n                String postalCode = resultSet.getString(&quot;Postal_Code&quot;);\n                String phoneNumber = resultSet.getString(&quot;Phone&quot;);\n\n\n                // Create a Customer object without the extra parameters\n                Customer customer = new Customer(customerID, customerName, address, postalCode, phoneNumber);\n                customerList.add(customer);\n            }\n\n\n\n            // Set the populated customerList to the customersTable\n            /*customersTable.setItems(customerList);\n            customersTable.refresh();*/\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            // Close the database connection\n            JDBC.closeConnection();\n        }\n    }\n\n    public void populateAppointments() {\n        try {\n            // Open the database connection\n            JDBC.openConnection();\n\n            // SQL query to retrieve all columns from the 'appointments' table\n            String query = &quot;SELECT * FROM appointments&quot;;\n\n            // Execute the query and retrieve the result set\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\n\n            // Populate the appointmentList with retrieved data\n            appointmentList = FXCollections.observableArrayList();\n\n            while (resultSet.next()) {\n                int appointmentId = resultSet.getInt(&quot;Appointment_ID&quot;);\n                String title = resultSet.getString(&quot;Title&quot;);\n                String type = resultSet.getString(&quot;Type&quot;);\n                String description = resultSet.getString(&quot;Description&quot;);\n                String location = resultSet.getString(&quot;Location&quot;); // Retrieve the &quot;location&quot; column\n                LocalDateTime startDateTime = resultSet.getTimestamp(&quot;Start&quot;).toLocalDateTime();\n                LocalDateTime endDateTime = resultSet.getTimestamp(&quot;End&quot;).toLocalDateTime();\n                int contactId = resultSet.getInt(&quot;Contact_ID&quot;);\n                int customerId = resultSet.getInt(&quot;Customer_ID&quot;);\n                int userId = resultSet.getInt(&quot;User_ID&quot;);\n\n\n                Contact contact = getContactFromResultSet(contactId);\n\n                // Create an Appointment object and add it to the list\n                Appointment appointment = new Appointment(appointmentId, title, description, location, contact, type, startDateTime, endDateTime, customerId, userId, contactId);\n\n                appointmentList.add(appointment);\n            }\n\n            // Set the populated appointmentList to the appointmentsTable\n            /*appointmentsTable.setItems(appointmentList);\n            appointmentsTable.refresh();*/\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            // Close the database connection\n            JDBC.closeConnection();\n        }\n    }\n\n    private Contact getContactFromResultSet(int contactId) {\n        try {\n            // SQL query to retrieve the contact information by ID\n            String query = &quot;SELECT * FROM contacts WHERE Contact_ID = &quot; + contactId;\n\n            // Execute the query and retrieve the result set\n            ResultSet resultSet = JDBC.connection.createStatement().executeQuery(query);\n\n            // Check if there is a result\n            if (resultSet.next()) {\n                String contactName = resultSet.getString(&quot;Contact_Name&quot;);\n\n                // Create and return a Contact object\n                return new Contact(contactId, contactName);\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        // Return null if no contact is found\n        return null;\n    }\n\n    @FXML\n    public void showInformationDialog(String title, String message) {\n        Alert alert = new Alert(Alert.AlertType.INFORMATION);\n        alert.setTitle(title);\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    @FXML\n    public void showErrorDialog(String title, String message) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(title);\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n\n    // ... Delete Appointments ...\n    @FXML\n    public void appointmentDeleteButton() {\n        // Get the selected items from the appointmentsTable\n        ObservableList&lt;Appointment&gt; selectedAppointments = appointmentsTable.getSelectionModel().getSelectedItems();\n\n        if (selectedAppointments.isEmpty()) {\n            // No appointments are selected, display a message or handle it as needed\n            // You can show an alert or a message to inform the user.\n\n        } else {\n            // Confirm the deletion with the user (you can use JavaFX dialogs for this)\n            boolean confirmed = showConfirmationDialog(&quot;Confirm Deletion&quot;, &quot;Are you sure you want to delete selected appointments?&quot;);\n\n            if (confirmed) {\n                try {\n                    // Open the database connection\n                    JDBC.openConnection();\n\n                    // Define the SQL query to delete appointments by their IDs\n                    String deleteQuery = &quot;DELETE FROM appointments WHERE Appointment_ID = ?&quot;;\n\n\n                    // Use a PreparedStatement to execute the query\n                    PreparedStatement preparedStatement = JDBC.connection.prepareStatement(deleteQuery);\n\n                    // Delete each selected appointment\n                    for (Appointment appointment : selectedAppointments) {\n                        int appointmentId = appointment.getAppointmentId(); // Use getAppointmentId\n                        preparedStatement.setInt(1, appointmentId);\n                        preparedStatement.executeUpdate();\n                    }\n\n\n                    // Close the PreparedStatement\n                    preparedStatement.close();\n\n                    // Remove the deleted appointments from the appointmentsTable\n                    appointmentsTable.getItems().removeAll(selectedAppointments);\n                    System.out.println(&quot;Appointments removed from the list.&quot;);\n\n                    // Inform the user about the successful deletion (you can use JavaFX alerts)\n                    showInformationDialog(&quot;Deletion Successful&quot;, &quot;Selected appointments have been deleted.&quot;);\n\n                } catch (SQLException e) {\n                    e.printStackTrace();\n                    // Handle database errors or show an error message\n                    showErrorDialog(&quot;Error&quot;, &quot;An error occurred while deleting appointments.&quot;);\n                } finally {\n                    // Close the database connection\n                    JDBC.closeConnection();\n                }\n            }\n        }\n    }\n\n    public boolean showConfirmationDialog(String title, String message) {\n        Alert confirmationDialog = new Alert(Alert.AlertType.CONFIRMATION);\n        confirmationDialog.setTitle(title);\n        confirmationDialog.setHeaderText(null);\n        confirmationDialog.setContentText(message);\n\n        // Add OK and Cancel buttons to the dialog\n        ButtonType okButton = new ButtonType(&quot;OK&quot;, ButtonBar.ButtonData.OK_DONE);\n        ButtonType cancelButton = new ButtonType(&quot;Cancel&quot;, ButtonBar.ButtonData.CANCEL_CLOSE);\n        confirmationDialog.getButtonTypes().setAll(okButton, cancelButton);\n\n        // Show the dialog and wait for a button press\n        Optional&lt;ButtonType&gt; result = confirmationDialog.showAndWait();\n\n        // Check if the OK button was pressed\n        return result.isPresent() &amp;&amp; result.get() == okButton;\n    }\n\n\n\n    // CODE FOR THE BUTTONS THAT OPEN THE WINDOWS\n    @FXML\n    private void appointmentAddButton() {\n        try {\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/createappointment.fxml&quot;));\n            // fxmlLoader.setController(this);\n            Parent root = fxmlLoader.load();\n\n            // ... If I remove this, the appointment saves, but it doesn't refresh the database\n            createappointmentcontroller controller = fxmlLoader.getController();\n            controller.setAppointmentsController(this);\n\n            Stage stage = new Stage();\n            stage.initModality(Modality.APPLICATION_MODAL);\n            stage.setTitle(&quot;Create Appointment&quot;);\n            stage.setScene(new Scene(root));\n            stage.showAndWait();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    // ... Launches modifyappointment.fxml -- commented out for testing\n   /* @FXML\n    private void appointmentModifyButton() {\n        try {\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/modifyappointment.fxml&quot;));\n            Parent root = fxmlLoader.load();\n\n            Stage stage = new Stage();\n            stage.initModality(Modality.APPLICATION_MODAL);\n            stage.setTitle(&quot;Modify Appointment&quot;);\n            stage.setScene(new Scene(root));\n            stage.showAndWait();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }*/\n\n\n\n\n\n    // ... Appointment Modify Test ...\n\n    public void appointmentModifyButton(ActionEvent event) throws IOException {\n        // Assuming you have a class for your Appointment and a TableView named 'customersTable'\n        Appointment selectedAppointment = appointmentsTable.getSelectionModel().getSelectedItem();\n        if (selectedAppointment == null) {\n            return;\n        }\n\n        Stage stage = (Stage) ((Button) event.getSource()).getScene().getWindow();\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/appointments/modifyappointment.fxml&quot;));\n        Parent scene = loader.load();\n        modifyappointmentcontroller controller = loader.getController();\n\n        // Pass the selectedAppointment to the controller\n        controller.setModifyAppointmentID(selectedAppointment);\n\n        stage.setTitle(&quot;Modify Appointment&quot;);\n        stage.setScene(new Scene(scene));\n        stage.show();\n    }\n\n\n\n\n\n\n\n    @FXML\n    private void customerAddButton() {\n        try {\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/customers/createcustomer.fxml&quot;));\n            Parent root = fxmlLoader.load();\n\n            Stage stage = new Stage();\n            stage.initModality(Modality.APPLICATION_MODAL);\n            stage.setTitle(&quot;Add Customer&quot;);\n            stage.setScene(new Scene(root));\n            stage.showAndWait();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @FXML\n    private void customerModifyButton() {\n        try {\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/company/views/customers/modifycustomer.fxml&quot;));\n            Parent root = fxmlLoader.load();\n\n            // ... START TEST ...\n\n            /*modifyappointmentcontroller controller = loader.getController();\n            controller.initialize(selectedAppointment);*/\n            // ... END TEST ...\n\n            Stage stage = new Stage();\n            stage.initModality(Modality.APPLICATION_MODAL);\n            stage.setTitle(&quot;Modify Customer&quot;);\n            stage.setScene(new Scene(root));\n            stage.showAndWait();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    public void setControllerReference(appointmentsandcustomerscontroller controller) {\n        this.controllerReference = controller;\n    }\n\n    // Refresh Appointments Table\n    public void refreshCustomerTable(ActionEvent actionEvent) {\n        populateAppointments();\n        appointmentsTable.setItems(appointmentList);\n    }\n}\n</code></pre>\n<p>Appointment Class:</p>\n<pre><code>package com.company.models;\nimport com.company.controllers.modifyappointmentcontroller;\nimport java.time.LocalDateTime;\n\npublic class Appointment {\n\n    // if these fail, they were set to private - contactId is always private\n    private int appointmentId = 1;\n    private String title;\n    private String description;\n    private String location;\n    private Contact contact;\n    private String type;\n    private LocalDateTime startDateTime;\n    private LocalDateTime endDateTime;\n    private int customerId;\n    private int userId;\n    private int contactId;\n\n    public Appointment(int appointmentId, String title, String description, String location,\n                       Contact contact, String type, LocalDateTime startDateTime,\n                       LocalDateTime endDateTime, int customerId, int userId, int contactId) {\n        this.appointmentId = appointmentId;\n        this.title = title;\n        this.description = description;\n        this.location = location;\n        this.contact = contact;\n        this.type = type;\n        this.startDateTime = startDateTime;\n        this.endDateTime = endDateTime;\n        this.customerId = customerId;\n        this.userId = userId;\n        this.contactId = contactId;\n    }\n\n\n\n\n    public Appointment(int appointmentId) {\n        this.appointmentId = appointmentId;\n    }\n\n    public int getAppointmentId() {\n        return appointmentId;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public String getLocation() {\n        return location;\n    }\n\n    public Contact getContact() {\n        return contact;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public LocalDateTime getStartDateTime() {\n        return startDateTime;\n    }\n\n    public LocalDateTime getEndDateTime() {\n        return endDateTime;\n    }\n\n    public int getCustomerId() {\n        return customerId;\n    }\n\n    public int getUserId() {\n        return userId;\n    }\n\n    public int getContactId() {\n        return contactId;\n    }\n\n    public void setContactId(int contactId) {\n        this.contactId = contactId;\n    }\n}\n\n\n</code></pre>\n<p>modifyappointmentcontroller:</p>\n<pre><code>package com.company.controllers;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.*;\nimport com.company.models.Appointment;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.TableColumn;\n\n\npublic class modifyappointmentcontroller {\n\n    private TableColumn&lt;TextField, Integer&gt; appointmentIDColumn;\n\n    private int appointmentID;\n\n    @FXML private TextField modifyAppointmentID; // Keep this as it is with the same fx:id\n    @FXML private TextField modifyAppointmentTitle;\n    @FXML private TextField modifyAppointmentDescribe;\n    @FXML private TextField modifyAppointmentLocation;\n    @FXML private ComboBox modifyAppointmentContact;\n    @FXML private ComboBox modifyAppointmentType;\n    @FXML private DatePicker modifyAppointmentStartDate;\n    @FXML private DatePicker modifyAppointmentEndDate;\n    @FXML private ComboBox  modifyAppointmentStartTime;\n    @FXML private ComboBox  modifyAppointmentEndTime;\n    @FXML private ComboBox  modifyAppointmentCustomer;\n    @FXML private ComboBox  modifyAppointmentUser;\n\n    public modifyappointmentcontroller(TextField modifyAppointmentID, TableColumn&lt;TextField, Integer&gt; appointmentIDColumn, TextField modifyAppointmentTitle, TextField modifyAppointmentDescribe, TextField modifyAppointmentLocation, ComboBox modifyAppointmentContact, ComboBox modifyAppointmentType, DatePicker modifyAppointmentStartDate, DatePicker modifyAppointmentEndDate, ComboBox modifyAppointmentStartTime, ComboBox modifyAppointmentEndTime, ComboBox modifyAppointmentCustomer, ComboBox modifyAppointmentUser) {\n        this.modifyAppointmentID = modifyAppointmentID;\n        this.appointmentIDColumn = appointmentIDColumn;\n        this.modifyAppointmentTitle = modifyAppointmentTitle;\n        this.modifyAppointmentDescribe = modifyAppointmentDescribe;\n        this.modifyAppointmentLocation = modifyAppointmentLocation;\n        this.modifyAppointmentContact = modifyAppointmentContact;\n        this.modifyAppointmentType = modifyAppointmentType;\n        this.modifyAppointmentStartDate = modifyAppointmentStartDate;\n        this.modifyAppointmentEndDate = modifyAppointmentEndDate;\n        this.modifyAppointmentStartTime = modifyAppointmentStartTime;\n        this.modifyAppointmentEndTime = modifyAppointmentEndTime;\n        this.modifyAppointmentCustomer = modifyAppointmentCustomer;\n        this.modifyAppointmentUser = modifyAppointmentUser;\n    }\n\n    // refer to software 1 - you have to have a new method that will accept the selected card on main controller, that data will be passed to this method\n    // this data has to be passed on to the text field... modifyAppointmentID.setText(selectedRecord.appointmentID) 'selectedRecord' is just a varible name that can be whatever you want.\n\n    @FXML\n    private void initialize() {\n        modifyAppointmentID.setText(String.valueOf(getSelectedAppointmentID())); // Assuming appointmentID has a getAppointmentID() method\n       // modifyAppointmentID.setText(&quot;&quot;);\n    }\n\n\n    private int getSelectedAppointmentID() {\n\n        return appointmentID;\n\n    }\n\n\n    \n\n    public void setModifyAppointmentID(Appointment appointment) {\n        this.appointmentID = appointment.getAppointmentId(); // Assuming getAppointmentId() returns an int\n        /*modifyAppointmentID.setText(String.valueOf(this.appointmentID));\n        modifyAppointmentID.setText(String.valueOf(appointment.getAppointmentId()));*/\n        modifyAppointmentID.setText(Integer.toString(getSelectedAppointmentID()));\n    }\n}\n</code></pre>\n<p>I'm not sure if I have my variables messed up, but I've got everything initialized (that I can think of). I've got the constructors properly coded.</p>\n<p>Reality is, I'm a complete beginner (so take it easy on me lol) and have it to the point where I can add what I need to the tables, I just can't get the data to pre-populate.</p>\n"},{"tags":["java","sql","oracle"],"comments":[{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":2,"creation_date":1381482482,"post_id":19314289,"comment_id":28606321,"body_markdown":"What is `abc`? Can you post a complete example?","body":"What is <code>abc</code>? Can you post a complete example?"},{"owner":{"account_id":454315,"reputation":27651,"user_id":851811,"accept_rate":100,"display_name":"Xavi L&#243;pez"},"score":0,"creation_date":1381482896,"post_id":19314289,"comment_id":28606530,"body_markdown":"As a side note, you could consider using prepared statements to prevent severe vulnerabilities such as injection.","body":"As a side note, you could consider using prepared statements to prevent severe vulnerabilities such as injection."},{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":1,"creation_date":1381482905,"post_id":19314289,"comment_id":28606534,"body_markdown":"And what datatype is `tou3.file123`? Are you really doing this as `system` - it&#39;s not a good idea to have your own objects in the `system` or `sys` schemas...","body":"And what datatype is <code>tou3.file123</code>? Are you really doing this as <code>system</code> - it&#39;s not a good idea to have your own objects in the <code>system</code> or <code>sys</code> schemas..."},{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":0,"creation_date":1381484358,"post_id":19314289,"comment_id":28607388,"body_markdown":"It looks like maybe you&#39;re trying to store an image file into a `blob` field (I can only think you&#39;d get that error with `blob` or `raw`), but you&#39;re actually inserting a string value into the field instead of the binary file contents? You&#39;d have to use a prepared statement for that if so, and stream the data. Please clarify what you&#39;re doing and what you want to achieve.","body":"It looks like maybe you&#39;re trying to store an image file into a <code>blob</code> field (I can only think you&#39;d get that error with <code>blob</code> or <code>raw</code>), but you&#39;re actually inserting a string value into the field instead of the binary file contents? You&#39;d have to use a prepared statement for that if so, and stream the data. Please clarify what you&#39;re doing and what you want to achieve."}],"answers":[{"tags":[],"owner":{"account_id":3278785,"reputation":2285,"user_id":2759934,"display_name":"sunysen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381483257,"creation_date":1381483257,"answer_id":19314595,"question_id":19314289,"body_markdown":"try\r\n\r\n        try { \r\n            con = DriverManager.getConnection(URL,Username,Password);\r\n            st=(Statement) con.createStatement();\r\n            String sql=&quot;insert into TOU3(file123) values(&quot;+abc+&quot;)&quot;;\r\n            st.executeUpdate(sql);\r\n        }                                        \r\n        catch(Exception e) {\r\n            e.printStackTrace();\r\n        }","title":"java.sql.SQLException: ORA-01465: invalid hex number","body":"<p>try</p>\n\n<pre><code>    try { \n        con = DriverManager.getConnection(URL,Username,Password);\n        st=(Statement) con.createStatement();\n        String sql=\"insert into TOU3(file123) values(\"+abc+\")\";\n        st.executeUpdate(sql);\n    }                                        \n    catch(Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2814311,"reputation":2660,"user_id":2918720,"display_name":"KhogaEslam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586983789,"creation_date":1586983789,"answer_id":61238372,"question_id":19314289,"body_markdown":"if you are inserting string into BLOB type you need to use `getBytes()`\r\n    \r\n    // ex:\r\n    String abc = &quot;very long string&quot;;\r\n    // file123 is BLOB column\r\n    String query = &quot;insert into TOU3(file123) values(&quot; + abc.getBytes() + &quot;)&quot;;","title":"java.sql.SQLException: ORA-01465: invalid hex number","body":"<p>if you are inserting string into BLOB type you need to use <code>getBytes()</code></p>\n\n<pre><code>// ex:\nString abc = \"very long string\";\n// file123 is BLOB column\nString query = \"insert into TOU3(file123) values(\" + abc.getBytes() + \")\";\n</code></pre>\n"}],"owner":{"account_id":3038477,"reputation":31,"user_id":2576045,"accept_rate":20,"display_name":"Toushif Nadaf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15695,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694401450,"creation_date":1381482300,"question_id":19314289,"body_markdown":"i am trying to save value in database but i am getting this error\r\n\r\ni tried this\r\n\r\n\r\n    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n        \r\n        try {\r\n            // TODO add your handling code here:\r\n            captureScreen(&quot;img.jpg&quot;);\r\n        } catch (Exception ex) {\r\n            Logger.getLogger(frontendUI.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        try {\r\n            Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n            System.out.println(&quot;driver  loaded&quot;);\r\n        }\r\n        catch(ClassNotFoundException ex) {\r\n            System.out.println(&quot;driver not loaded&quot;);\r\n        }\r\n\r\n        String URL = &quot;jdbc:oracle:thin:@localhost:1521:xe&quot;;\r\n        String Username = &quot;system&quot;;\r\n        String Password = &quot;toushif&quot;;\r\n        try { \r\n            con = DriverManager.getConnection(URL,Username,Password);\r\n            st=(Statement) con.createStatement();\r\n            String sql=&quot;insert into TOU3(file123) values(&#39;&quot;+abc+&quot;&#39;)&quot;;\r\n            st.executeUpdate(sql);\r\n        }                                        \r\n        catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n          \r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    }","title":"java.sql.SQLException: ORA-01465: invalid hex number","body":"<p>i am trying to save value in database but i am getting this error</p>\n\n<p>i tried this</p>\n\n<pre><code>private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n\n    try {\n        // TODO add your handling code here:\n        captureScreen(\"img.jpg\");\n    } catch (Exception ex) {\n        Logger.getLogger(frontendUI.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    try {\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n        System.out.println(\"driver  loaded\");\n    }\n    catch(ClassNotFoundException ex) {\n        System.out.println(\"driver not loaded\");\n    }\n\n    String URL = \"jdbc:oracle:thin:@localhost:1521:xe\";\n    String Username = \"system\";\n    String Password = \"toushif\";\n    try { \n        con = DriverManager.getConnection(URL,Username,Password);\n        st=(Statement) con.createStatement();\n        String sql=\"insert into TOU3(file123) values('\"+abc+\"')\";\n        st.executeUpdate(sql);\n    }                                        \n    catch(Exception e) {\n        e.printStackTrace();\n    }\n\n/**\n * @param args the command line arguments\n */\n}\n</code></pre>\n"},{"tags":["java","android","json","gson"],"answers":[{"tags":[],"owner":{"account_id":13680665,"reputation":735,"user_id":9871101,"display_name":"Dinh Lam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694400964,"creation_date":1694274262,"answer_id":77072938,"question_id":77072774,"body_markdown":"You can make new parameters is `nullable`, so the old user will not crashed until parsing.\r\n\r\nor if you use Gson you can create the TypeAdapter for data class and do logic when parse json string to make sure it succeed.\r\n\r\nLet check: https://www.tutorialspoint.com/gson/gson_custom_adapters.htm","title":"adding new parameters to json saved in shared preferences","body":"<p>You can make new parameters is <code>nullable</code>, so the old user will not crashed until parsing.</p>\n<p>or if you use Gson you can create the TypeAdapter for data class and do logic when parse json string to make sure it succeed.</p>\n<p>Let check: <a href=\"https://www.tutorialspoint.com/gson/gson_custom_adapters.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/gson/gson_custom_adapters.htm</a></p>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694352534,"creation_date":1694352158,"answer_id":77076287,"question_id":77072774,"body_markdown":"Most likely this will not be an issue because Gson will not fail if the value for a field is missing (see [related Gson feature request](https://github.com/google/gson/issues/61)). However, your code has to account for the new field being `null` (or for primitive types having the default value) if the data comes from a previous version of your app and no value for this field is present.\r\n\r\nYou can also assign a default value to the field (e.g. `public String newField = &quot;default&quot;;`)  which is used if the field is missing in the JSON data, but in that case you have to make sure your class is `static` (explicitly, or implicitly) and has a no-args constructor. Otherwise you could run into issues with Gson&#39;s usage of JDK Unsafe (see also [`GsonBuilder.disableJdkUnsafe()`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#disableJdkUnsafe())).\r\n\r\nSince this is an Android app, you also have to make sure you had configured ProGuard or R8 properly in the past, or used `@SerializedName`. Otherwise your JSON data might use obfuscated field names such as `a`, `b`... and those names might change in the new version of your app, which would prevent it from reading the JSON data. See the [Gson Troubleshooting Guide](https://github.com/google/gson/blob/main/Troubleshooting.md#android-app-broken-after-app-update) for more information.","title":"adding new parameters to json saved in shared preferences","body":"<p>Most likely this will not be an issue because Gson will not fail if the value for a field is missing (see <a href=\"https://github.com/google/gson/issues/61\" rel=\"nofollow noreferrer\">related Gson feature request</a>). However, your code has to account for the new field being <code>null</code> (or for primitive types having the default value) if the data comes from a previous version of your app and no value for this field is present.</p>\n<p>You can also assign a default value to the field (e.g. <code>public String newField = &quot;default&quot;;</code>)  which is used if the field is missing in the JSON data, but in that case you have to make sure your class is <code>static</code> (explicitly, or implicitly) and has a no-args constructor. Otherwise you could run into issues with Gson's usage of JDK Unsafe (see also <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#disableJdkUnsafe()\" rel=\"nofollow noreferrer\"><code>GsonBuilder.disableJdkUnsafe()</code></a>).</p>\n<p>Since this is an Android app, you also have to make sure you had configured ProGuard or R8 properly in the past, or used <code>@SerializedName</code>. Otherwise your JSON data might use obfuscated field names such as <code>a</code>, <code>b</code>... and those names might change in the new version of your app, which would prevent it from reading the JSON data. See the <a href=\"https://github.com/google/gson/blob/main/Troubleshooting.md#android-app-broken-after-app-update\" rel=\"nofollow noreferrer\">Gson Troubleshooting Guide</a> for more information.</p>\n"}],"owner":{"account_id":23642317,"reputation":777,"user_id":17672403,"display_name":"Faruk Karaca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77076287,"answer_count":2,"score":1,"last_activity_date":1694400964,"creation_date":1694271426,"question_id":77072774,"body_markdown":"In my Android application, after converting a custom data class to a string as json, I save it as shared preferences. In the new version, I need to add a new parameter to the data class here and check it and display it on the screen where relevant.\r\nWill users of the old version experience a crash when I release the new version of the application with the added parameter?\r\nOr what are the possible scenarios. Does anyone have an idea?\r\n\r\nI am using Gson to convert data class to json and back to data class.","title":"adding new parameters to json saved in shared preferences","body":"<p>In my Android application, after converting a custom data class to a string as json, I save it as shared preferences. In the new version, I need to add a new parameter to the data class here and check it and display it on the screen where relevant.\nWill users of the old version experience a crash when I release the new version of the application with the added parameter?\nOr what are the possible scenarios. Does anyone have an idea?</p>\n<p>I am using Gson to convert data class to json and back to data class.</p>\n"},{"tags":["java","android","google-maps","google-maps-api-2","markerclusterer"],"comments":[{"owner":{"account_id":2820349,"reputation":720,"user_id":2424236,"accept_rate":75,"display_name":"Arūnas Bedžinskas"},"score":0,"creation_date":1460464762,"post_id":36556499,"comment_id":60745612,"body_markdown":"Please clarify as it is unclear what is the problem. Is it that markers do not cluster when you zoom out or they do not stop clustering when you zoom in to them? Or both?","body":"Please clarify as it is unclear what is the problem. Is it that markers do not cluster when you zoom out or they do not stop clustering when you zoom in to them? Or both?"}],"answers":[{"tags":[],"owner":{"account_id":7942007,"reputation":584,"user_id":5995677,"display_name":"SwagBomb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460460975,"creation_date":1460460975,"answer_id":36572135,"question_id":36556499,"body_markdown":"Your `shouldRenderAsCluster()` is always clustering due to the condition you set.\r\n\r\n    cluster.getSize() &gt; 1;\r\n\r\nYou can check out a similar SO post over [here](https://stackoverflow.com/questions/24159284/map-clustering-max-zoom-markers-still-clustered?rq=1)\r\n\r\nAlso, try to check out this [SO](https://stackoverflow.com/questions/29947100/google-maps-cluster-item-marker-icon-with-picasso) post. Figured that you are using **PicassoMarker** library which might have affected your cluster rendering too.\r\n","title":"Android Google maps Api doesn&#39;t uncluster while zoom in","body":"<p>Your <code>shouldRenderAsCluster()</code> is always clustering due to the condition you set.</p>\n\n<pre><code>cluster.getSize() &gt; 1;\n</code></pre>\n\n<p>You can check out a similar SO post over <a href=\"https://stackoverflow.com/questions/24159284/map-clustering-max-zoom-markers-still-clustered?rq=1\">here</a></p>\n\n<p>Also, try to check out this <a href=\"https://stackoverflow.com/questions/29947100/google-maps-cluster-item-marker-icon-with-picasso\">SO</a> post. Figured that you are using <strong>PicassoMarker</strong> library which might have affected your cluster rendering too.</p>\n"},{"tags":[],"owner":{"account_id":6746705,"reputation":570,"user_id":5198110,"accept_rate":65,"display_name":"Peter Parker"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1506435303,"creation_date":1460562058,"answer_id":36603349,"question_id":36556499,"body_markdown":" I  needed  to add this function and call it in `onCameraChange`    \r\n\r\n    public void updateUI(List&lt;MyCluster&gt; clusters) {\r\n            myClusterManager.clearItems();\r\n    \r\n            for (int i = 0; i &lt; clusters.size(); i++) {\r\n                myClusterManager.addItem(clusters.get(i));\r\n             //   myClusterManager.setRenderer(new PlaceRender(context, map, myClusterManager));\r\n\r\n        }\r\n        myClusterManager.onCameraChange(map.getCameraPosition());\r\n    }","title":"Android Google maps Api doesn&#39;t uncluster while zoom in","body":"<p>I  needed  to add this function and call it in <code>onCameraChange</code>    </p>\n\n<pre><code>public void updateUI(List&lt;MyCluster&gt; clusters) {\n        myClusterManager.clearItems();\n\n        for (int i = 0; i &lt; clusters.size(); i++) {\n            myClusterManager.addItem(clusters.get(i));\n         //   myClusterManager.setRenderer(new PlaceRender(context, map, myClusterManager));\n\n    }\n    myClusterManager.onCameraChange(map.getCameraPosition());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6788871,"reputation":45,"user_id":5226641,"display_name":"imodeGowas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694399869,"creation_date":1694399869,"answer_id":77078641,"question_id":36556499,"body_markdown":"For me,  I did not set CameraIdleListener with the map object.\r\nStarted to work and show individual pins when I zoomed in after setting CameraIdleListener as well as MarkerClickListener.\r\n[followed the implementation here][1]\r\n    \r\n    myClusterManager = new ClusterManager&lt;&gt;(context, map);\r\n\r\n    // Point the map&#39;s listeners at the listeners implemented by the cluster\r\n    // manager.\r\n    map.setOnCameraIdleListener(myClusterManager);\r\n    map.setOnMarkerClickListener(myClusterManager);\r\n\r\n\r\n  [1]: https://developers.google.com/maps/documentation/android-sdk/utility/marker-clustering","title":"Android Google maps Api doesn&#39;t uncluster while zoom in","body":"<p>For me,  I did not set CameraIdleListener with the map object.\nStarted to work and show individual pins when I zoomed in after setting CameraIdleListener as well as MarkerClickListener.\n<a href=\"https://developers.google.com/maps/documentation/android-sdk/utility/marker-clustering\" rel=\"nofollow noreferrer\">followed the implementation here</a></p>\n<pre><code>myClusterManager = new ClusterManager&lt;&gt;(context, map);\n\n// Point the map's listeners at the listeners implemented by the cluster\n// manager.\nmap.setOnCameraIdleListener(myClusterManager);\nmap.setOnMarkerClickListener(myClusterManager);\n</code></pre>\n"}],"owner":{"account_id":6746705,"reputation":570,"user_id":5198110,"accept_rate":65,"display_name":"Peter Parker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2528,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36603349,"answer_count":3,"score":4,"last_activity_date":1694399869,"creation_date":1460399563,"question_id":36556499,"body_markdown":"I created `Custom Cluster Render` extending `DefaultClusterRenderer&lt;T&gt;`, while using `Google Maps Api` and `android maps utils`. According to the following guide \r\n https://github.com/googlemaps/android-maps-utils/blob/master/demo/src/com/google/maps/android/utils/demo/CustomMarkerClusteringDemoActivity.java\r\n\r\nWhen I have more then too many `markers`in the same area, they cluster into the one. But the don&#39;t separate onto `markers` while  zooming, and I can see \r\n\r\nhttp://cs627121.vk.me/v627121202/51eb5/rY9f4p8ivos.jpg\r\n\r\nHere&#39;s some code:\r\n\r\n     public PlaceRender(Context context, GoogleMap map, ClusterManager&lt;MyCluster&gt; clusterManager) {\r\n        super(context, map, clusterManager);\r\n        mIconGenerator = new IconGenerator(context);\r\n        imageView = new ImageView(context);\r\n        mClusterImageView = new ImageView(context);\r\n        mIconGenerator.setContentView(imageView);\r\n        this.context = context;\r\n        this.map = map;\r\n        this.myClusterManager = clusterManager;\r\n    }\r\n\r\n    @Override\r\n    protected void onBeforeClusterItemRendered(MyCluster cluster, MarkerOptions markerOptions) {\r\n        super.onBeforeClusterItemRendered(cluster, markerOptions);\r\n        markerOptions.title(cluster.name).snippet(cluster.snippet);\r\n        markerOptions.infoWindowAnchor(0.5f, 0.0f);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onBeforeClusterRendered(Cluster&lt;MyCluster&gt; cluster, MarkerOptions markerOptions) {\r\n        super.onBeforeClusterRendered(cluster, markerOptions);\r\n    }\r\n\r\n    @Override\r\n    protected boolean shouldRenderAsCluster(Cluster cluster) {\r\n        // Always render clusters.\r\n        return cluster.getSize() &gt; 1;\r\n    }\r\n\r\n    @Override\r\n    protected void onClusterRendered(Cluster&lt;MyCluster&gt; cluster, Marker marker){\r\n        super.onClusterRendered(cluster, marker);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onClusterItemRendered(MyCluster geo, Marker marker) {\r\n        super.onClusterItemRendered(geo, marker);\r\n        loadIconFromApi(geo, marker);\r\n    }\r\n\r\n\r\n    public void addItems(List&lt;MyCluster&gt; clusters, Context context, GoogleMap map) {\r\n        myClusterManager = new ClusterManager&lt;&gt;(context, map);\r\n        map.setOnMarkerClickListener(this);\r\n\r\n        for (int i = 0; i &lt; clusters.size(); i++) {\r\n            myClusterManager.addItem(clusters.get(i));\r\n            myClusterManager.setRenderer(new PlaceRender(context, map, myClusterManager));\r\n\r\n        }\r\n        myClusterManager.cluster();\r\n\r\n    }\r\n\r\n    //\r\n    private void loadIconFromApi(MyCluster geo, Marker marker) {\r\n        PicassoMarker markers = new PicassoMarker(marker, mIconGenerator, imageView);\r\n        geo.setPicassoMarker(markers);\r\n        Picasso.with(context).load(geo.image).into(markers);\r\n    }\r\n\r\n    @Override\r\n    public boolean onMarkerClick(Marker marker) {\r\n        marker.showInfoWindow();\r\n        return true;\r\n    }\r\n\r\nIf I use `15x camera zoom`, so I can see every marker, and then `zoom out` it, my markers won&#39;t merge into the one `cluster`.\r\n\r\nWhat did I missed?","title":"Android Google maps Api doesn&#39;t uncluster while zoom in","body":"<p>I created <code>Custom Cluster Render</code> extending <code>DefaultClusterRenderer&lt;T&gt;</code>, while using <code>Google Maps Api</code> and <code>android maps utils</code>. According to the following guide \n <a href=\"https://github.com/googlemaps/android-maps-utils/blob/master/demo/src/com/google/maps/android/utils/demo/CustomMarkerClusteringDemoActivity.java\" rel=\"nofollow\">https://github.com/googlemaps/android-maps-utils/blob/master/demo/src/com/google/maps/android/utils/demo/CustomMarkerClusteringDemoActivity.java</a></p>\n\n<p>When I have more then too many <code>markers</code>in the same area, they cluster into the one. But the don't separate onto <code>markers</code> while  zooming, and I can see </p>\n\n<p><a href=\"http://cs627121.vk.me/v627121202/51eb5/rY9f4p8ivos.jpg\" rel=\"nofollow\">http://cs627121.vk.me/v627121202/51eb5/rY9f4p8ivos.jpg</a></p>\n\n<p>Here's some code:</p>\n\n<pre><code> public PlaceRender(Context context, GoogleMap map, ClusterManager&lt;MyCluster&gt; clusterManager) {\n    super(context, map, clusterManager);\n    mIconGenerator = new IconGenerator(context);\n    imageView = new ImageView(context);\n    mClusterImageView = new ImageView(context);\n    mIconGenerator.setContentView(imageView);\n    this.context = context;\n    this.map = map;\n    this.myClusterManager = clusterManager;\n}\n\n@Override\nprotected void onBeforeClusterItemRendered(MyCluster cluster, MarkerOptions markerOptions) {\n    super.onBeforeClusterItemRendered(cluster, markerOptions);\n    markerOptions.title(cluster.name).snippet(cluster.snippet);\n    markerOptions.infoWindowAnchor(0.5f, 0.0f);\n\n\n}\n\n@Override\nprotected void onBeforeClusterRendered(Cluster&lt;MyCluster&gt; cluster, MarkerOptions markerOptions) {\n    super.onBeforeClusterRendered(cluster, markerOptions);\n}\n\n@Override\nprotected boolean shouldRenderAsCluster(Cluster cluster) {\n    // Always render clusters.\n    return cluster.getSize() &gt; 1;\n}\n\n@Override\nprotected void onClusterRendered(Cluster&lt;MyCluster&gt; cluster, Marker marker){\n    super.onClusterRendered(cluster, marker);\n}\n\n\n@Override\nprotected void onClusterItemRendered(MyCluster geo, Marker marker) {\n    super.onClusterItemRendered(geo, marker);\n    loadIconFromApi(geo, marker);\n}\n\n\npublic void addItems(List&lt;MyCluster&gt; clusters, Context context, GoogleMap map) {\n    myClusterManager = new ClusterManager&lt;&gt;(context, map);\n    map.setOnMarkerClickListener(this);\n\n    for (int i = 0; i &lt; clusters.size(); i++) {\n        myClusterManager.addItem(clusters.get(i));\n        myClusterManager.setRenderer(new PlaceRender(context, map, myClusterManager));\n\n    }\n    myClusterManager.cluster();\n\n}\n\n//\nprivate void loadIconFromApi(MyCluster geo, Marker marker) {\n    PicassoMarker markers = new PicassoMarker(marker, mIconGenerator, imageView);\n    geo.setPicassoMarker(markers);\n    Picasso.with(context).load(geo.image).into(markers);\n}\n\n@Override\npublic boolean onMarkerClick(Marker marker) {\n    marker.showInfoWindow();\n    return true;\n}\n</code></pre>\n\n<p>If I use <code>15x camera zoom</code>, so I can see every marker, and then <code>zoom out</code> it, my markers won't merge into the one <code>cluster</code>.</p>\n\n<p>What did I missed?</p>\n"},{"tags":["java","visual-studio-code","vscode-debugger"],"comments":[{"owner":{"account_id":15004631,"reputation":625,"user_id":10831094,"display_name":"Rustam Pulatov"},"score":0,"creation_date":1570430546,"post_id":58263893,"comment_id":102896979,"body_markdown":"Read https://code.visualstudio.com/docs/java/java-tutorial. It&#39;s very helpful for vscode + java","body":"Read <a href=\"https://code.visualstudio.com/docs/java/java-tutorial\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/java/java-tutorial</a>. It&#39;s very helpful for vscode + java"}],"answers":[{"tags":[],"owner":{"account_id":16421398,"reputation":79,"user_id":11862497,"display_name":"Umar Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599863953,"creation_date":1570428072,"answer_id":58264193,"question_id":58263893,"body_markdown":"Did you install jdk? Are you using visual studio code ? If yes then do this:\r\n\r\nPlease install necessary extensions and add an extension that create a .class file to excecute that .java file or you can simply use cmd\r\n\r\nIn cmd goto your file location and enter following\r\n\r\n1. `javac filename.java` (this creates a .class file) then enter\r\n2. `java filename.java` (you will see your output in cmd)","title":"Unable to run Java program with vscode","body":"<p>Did you install jdk? Are you using visual studio code ? If yes then do this:</p>\n<p>Please install necessary extensions and add an extension that create a .class file to excecute that .java file or you can simply use cmd</p>\n<p>In cmd goto your file location and enter following</p>\n<ol>\n<li><code>javac filename.java</code> (this creates a .class file) then enter</li>\n<li><code>java filename.java</code> (you will see your output in cmd)</li>\n</ol>\n"}],"owner":{"account_id":4226546,"reputation":971,"user_id":3459944,"display_name":"Hassan Jamil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2430,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694398191,"creation_date":1570425832,"question_id":58263893,"body_markdown":"I have upgraded my Visual Studio Code to version details: &lt;br/&gt;&lt;br/&gt;\r\n**Version**: 1.38.1 (user setup)&lt;br/&gt;\r\n**Commit**: b37e54c98e1a74ba89e03073e5a3761284e3ffb0&lt;br/&gt;\r\n**Date**: 2019-09-11T13:35:15.005Z&lt;br/&gt;\r\n**Electron**: 4.2.10&lt;br/&gt;\r\n**Chrome**: 69.0.3497.128&lt;br/&gt;\r\n**Node.js**: 10.11.0&lt;br/&gt;\r\n**V8**: 6.9.427.31-electron.0&lt;br/&gt;\r\n**OS**: Windows_NT x64 10.0.18362&lt;br/&gt;&lt;br/&gt;\r\n\r\nEvery time I run the simple **HelloWorld program** written in Java, vscode prompt the following error \r\n\r\n&gt; Extension host terminated unexpectedly\r\n\r\nI think some extension related to Debugger of Java is incompatible with the vscode version or it may be deprecated.\r\n\r\n[![Problem][1]][1]\r\n\r\nAny help will be appreciate,\r\nThanks\r\n\r\n  [1]: https://i.stack.imgur.com/PF80R.png","title":"Unable to run Java program with vscode","body":"<p>I have upgraded my Visual Studio Code to version details: <br/><br/>\n<strong>Version</strong>: 1.38.1 (user setup)<br/>\n<strong>Commit</strong>: b37e54c98e1a74ba89e03073e5a3761284e3ffb0<br/>\n<strong>Date</strong>: 2019-09-11T13:35:15.005Z<br/>\n<strong>Electron</strong>: 4.2.10<br/>\n<strong>Chrome</strong>: 69.0.3497.128<br/>\n<strong>Node.js</strong>: 10.11.0<br/>\n<strong>V8</strong>: 6.9.427.31-electron.0<br/>\n<strong>OS</strong>: Windows_NT x64 10.0.18362<br/><br/></p>\n\n<p>Every time I run the simple <strong>HelloWorld program</strong> written in Java, vscode prompt the following error </p>\n\n<blockquote>\n  <p>Extension host terminated unexpectedly</p>\n</blockquote>\n\n<p>I think some extension related to Debugger of Java is incompatible with the vscode version or it may be deprecated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PF80R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PF80R.png\" alt=\"Problem\"></a></p>\n\n<p>Any help will be appreciate,\nThanks</p>\n"},{"tags":["java","jpa","memory","transform","querydsl"],"owner":{"account_id":28176211,"reputation":31,"user_id":21533955,"display_name":"firefly_0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694396912,"creation_date":1694396218,"question_id":77078481,"body_markdown":"A question arose while using querydsl.\r\nI heard that using transform can be dangerous because it uses a lot of memory. However, if you don&#39;t use transform, you will use memory through something like a stream anyway, so I&#39;m curious what the difference is between the two.\r\nIf the differences between the two are similar, wouldn&#39;t it be okay to just use transform?\r\n\r\nFor reference, the number of stores according to the results is about 10,000. Each store has about 3 keywords.\r\n\r\n\r\n# &quot;When using stream&quot;\r\n```java\r\n   @Override\r\n    public Page&lt;MyLikeStoreResponse&gt; findMyLikeStore(Long memberId, Pageable pageable) {\r\n\r\n        List&lt;Store&gt; storeQuery =\r\n                jpaQueryFactory\r\n                        .select(likes.store)\r\n                        .from(likes)\r\n                        .join(likes.store, store)\r\n                        .join(likes.member, member)\r\n                        .leftJoin(store.storeKeywordList, storeKeyword)\r\n                        .leftJoin(storeKeyword.keyword, keyword)\r\n                        .where(member.memberId.eq(memberId))\r\n                        .offset(pageable.getOffset())\r\n                        .limit(pageable.getPageSize())\r\n                        .fetch();\r\n\r\n        List&lt;MyLikeStoreResponse&gt; response = createMyLikeStoreResponse(storeQuery);\r\n\r\n        int count = jpaQueryFactory\r\n                .select(store)\r\n                .from(likes)\r\n                .join(likes.store, store)\r\n                .join(likes.member, member)\r\n                .where(member.memberId.eq(memberId))\r\n                .fetch()\r\n                .size();\r\n\r\n\r\n        return new PageImpl&lt;&gt;(response, pageable, count);\r\n    }\r\n   private List&lt;MyLikeStoreResponse&gt; createMyLikeStoreResponse(List&lt;Store&gt; storeQuery){\r\n        return storeQuery\r\n                .stream()\r\n                .map(store -&gt;\r\n                        MyLikeStoreResponse\r\n                                .builder()\r\n                                .phone(store.getPhone())\r\n                                .storeId(store.getStoreId())\r\n                                .address(store.getAddress())\r\n                                .storeName(store.getName())\r\n                                .keywordList(store.getStoreKeywordList().stream()\r\n                                        .limit(3)\r\n                                        .map(storeKeyword -&gt; storeKeyword.getKeyword().getName())\r\n                                        .collect(Collectors.toList()))\r\n                                .build()\r\n                ).collect(Collectors.toList());\r\n    }\r\n```\r\n## Performance test - stream\r\nPerformance test results using visualVM (requests were sent about 10 times): https://i.stack.imgur.com/wymAz.png\r\n\r\n# When using transform\r\n\r\n```java\r\n@Override\r\n    public Page&lt;MyLikeStoreResponse&gt; findMyLikeStore(Long memberId, Pageable pageable) {\r\n\r\n        List&lt;MyLikeStoreResponse&gt; response = jpaQueryFactory\r\n                .select(likes.store)\r\n                .from(likes)\r\n                .join(likes.store, store)\r\n                .join(likes.member, member)\r\n                .leftJoin(store.storeImageList, image).fetchJoin()\r\n                .leftJoin(store.storeKeywordList, storeKeyword)\r\n                .leftJoin(storeKeyword.keyword, keyword)\r\n                .where(member.memberId.eq(memberId))\r\n                .offset(pageable.getOffset())\r\n                .limit(pageable.getPageSize())\r\n                .transform(groupBy(store.storeId).list(\r\n                        Projections.constructor(\r\n                                MyLikeStoreResponse.class,\r\n                                store.storeId,\r\n                                store.name.as(&quot;storeName&quot;),\r\n                                store.address,\r\n                                store.phone,\r\n                                list(storeKeyword.keyword.name).as(&quot;keywordList&quot;)\r\n                        )\r\n                ));\r\n\r\n\r\n        int count = jpaQueryFactory\r\n                .select(store)\r\n                .from(likes)\r\n                .join(likes.store, store)\r\n                .join(likes.member, member)\r\n                .where(member.memberId.eq(memberId))\r\n                .fetch()\r\n                .size();\r\n\r\n\r\n        return new PageImpl&lt;&gt;(response, pageable, count);\r\n    }\r\n```\r\n\r\n## Performance test - transform\r\nPerformance test results using visualVM (requests were sent about 10 times): \r\nhttps://i.stack.imgur.com/5Ide5.png \r\n\r\nAnd the stream method is approximately 100ms faster (measured using Postman).\r\n\r\n\r\n# question\r\n1) Did I conduct the performance test correctly? I think I sent too few requests.\r\n2) There seems to be no difference comparing stream and transform. Is my judgment correct?\r\n3) Is it the right choice to conduct performance testing of both? Can we conclude that the two are similar without testing?\r\n4) Why is stream faster? Is there a reason you are planning to go?\r\n","title":"Usually, which one to use, transform or stream, places less load on memory?","body":"<p>A question arose while using querydsl.\nI heard that using transform can be dangerous because it uses a lot of memory. However, if you don't use transform, you will use memory through something like a stream anyway, so I'm curious what the difference is between the two.\nIf the differences between the two are similar, wouldn't it be okay to just use transform?</p>\n<p>For reference, the number of stores according to the results is about 10,000. Each store has about 3 keywords.</p>\n<h1>&quot;When using stream&quot;</h1>\n<pre class=\"lang-java prettyprint-override\"><code>   @Override\n    public Page&lt;MyLikeStoreResponse&gt; findMyLikeStore(Long memberId, Pageable pageable) {\n\n        List&lt;Store&gt; storeQuery =\n                jpaQueryFactory\n                        .select(likes.store)\n                        .from(likes)\n                        .join(likes.store, store)\n                        .join(likes.member, member)\n                        .leftJoin(store.storeKeywordList, storeKeyword)\n                        .leftJoin(storeKeyword.keyword, keyword)\n                        .where(member.memberId.eq(memberId))\n                        .offset(pageable.getOffset())\n                        .limit(pageable.getPageSize())\n                        .fetch();\n\n        List&lt;MyLikeStoreResponse&gt; response = createMyLikeStoreResponse(storeQuery);\n\n        int count = jpaQueryFactory\n                .select(store)\n                .from(likes)\n                .join(likes.store, store)\n                .join(likes.member, member)\n                .where(member.memberId.eq(memberId))\n                .fetch()\n                .size();\n\n\n        return new PageImpl&lt;&gt;(response, pageable, count);\n    }\n   private List&lt;MyLikeStoreResponse&gt; createMyLikeStoreResponse(List&lt;Store&gt; storeQuery){\n        return storeQuery\n                .stream()\n                .map(store -&gt;\n                        MyLikeStoreResponse\n                                .builder()\n                                .phone(store.getPhone())\n                                .storeId(store.getStoreId())\n                                .address(store.getAddress())\n                                .storeName(store.getName())\n                                .keywordList(store.getStoreKeywordList().stream()\n                                        .limit(3)\n                                        .map(storeKeyword -&gt; storeKeyword.getKeyword().getName())\n                                        .collect(Collectors.toList()))\n                                .build()\n                ).collect(Collectors.toList());\n    }\n</code></pre>\n<h2>Performance test - stream</h2>\n<p>Performance test results using visualVM (requests were sent about 10 times): <a href=\"https://i.stack.imgur.com/wymAz.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/wymAz.png</a></p>\n<h1>When using transform</h1>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public Page&lt;MyLikeStoreResponse&gt; findMyLikeStore(Long memberId, Pageable pageable) {\n\n        List&lt;MyLikeStoreResponse&gt; response = jpaQueryFactory\n                .select(likes.store)\n                .from(likes)\n                .join(likes.store, store)\n                .join(likes.member, member)\n                .leftJoin(store.storeImageList, image).fetchJoin()\n                .leftJoin(store.storeKeywordList, storeKeyword)\n                .leftJoin(storeKeyword.keyword, keyword)\n                .where(member.memberId.eq(memberId))\n                .offset(pageable.getOffset())\n                .limit(pageable.getPageSize())\n                .transform(groupBy(store.storeId).list(\n                        Projections.constructor(\n                                MyLikeStoreResponse.class,\n                                store.storeId,\n                                store.name.as(&quot;storeName&quot;),\n                                store.address,\n                                store.phone,\n                                list(storeKeyword.keyword.name).as(&quot;keywordList&quot;)\n                        )\n                ));\n\n\n        int count = jpaQueryFactory\n                .select(store)\n                .from(likes)\n                .join(likes.store, store)\n                .join(likes.member, member)\n                .where(member.memberId.eq(memberId))\n                .fetch()\n                .size();\n\n\n        return new PageImpl&lt;&gt;(response, pageable, count);\n    }\n</code></pre>\n<h2>Performance test - transform</h2>\n<p>Performance test results using visualVM (requests were sent about 10 times):\n<a href=\"https://i.stack.imgur.com/5Ide5.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/5Ide5.png</a></p>\n<p>And the stream method is approximately 100ms faster (measured using Postman).</p>\n<h1>question</h1>\n<ol>\n<li>Did I conduct the performance test correctly? I think I sent too few requests.</li>\n<li>There seems to be no difference comparing stream and transform. Is my judgment correct?</li>\n<li>Is it the right choice to conduct performance testing of both? Can we conclude that the two are similar without testing?</li>\n<li>Why is stream faster? Is there a reason you are planning to go?</li>\n</ol>\n"},{"tags":["java","android","checkbox"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1694402718,"post_id":77077990,"comment_id":135881619,"body_markdown":"Instead of pasting your entire code here, your first step when debugging should be to make a minimum example - for example a new project with a single activity and a single check box, or if the list is necessary a simple list with one item and one check box - and use that to try out the code patterns you want to use. Then, if you still can&#39;t get it working there you can share the minimal example here and describe what is happening.","body":"Instead of pasting your entire code here, your first step when debugging should be to make a minimum example - for example a new project with a single activity and a single check box, or if the list is necessary a simple list with one item and one check box - and use that to try out the code patterns you want to use. Then, if you still can&#39;t get it working there you can share the minimal example here and describe what is happening."}],"answers":[{"tags":[],"owner":{"account_id":29004116,"reputation":337,"user_id":22217083,"display_name":"Sarah"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1694395459,"creation_date":1694395459,"answer_id":77078455,"question_id":77077990,"body_markdown":"It seems like you are trying to save the state of a checkbox using SharedPreferences, but the code provided doesn&#39;t show how the checkboxes are being added to your ListView or how you are updating their state. Here are some steps you can follow to save and restore the state of checkboxes in your ListView:\r\n\r\n1. First, make sure you have a model class to represent your list items (in this case, Tarefa) that includes a property for the checkbox state (e.g., isChecked).\r\n\r\n2. Update your ListaTarefaAdapter to work with this model class and bind the checkbox state to the actual checkboxes in your list item layout (linha.xml).\r\n\r\n3. When a checkbox state changes, update the corresponding property in your model class.\r\n\r\n4. In your onCreate method, after you initialize your adapter and ListView, set the adapter on the ListView.\r\n\r\n5. In your check method, you can use SharedPreferences to restore the checkbox state when the activity is created.\r\n\r\n6. In your CompoundButton.OnCheckedChangeListener, update the model class with the new state and save it in SharedPreferences.\r\n\r\nHere&#39;s a modified version of your MainActivity class to demonstrate these steps:\r\n\r\n    import android.content.DialogInterface;\r\n    import android.content.SharedPreferences;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.CheckBox;\r\n    import android.widget.CompoundButton;\r\n    import android.widget.EditText;\r\n    import android.widget.ImageButton;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.ListView;\r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import java.util.List;\r\n    import br.mateus.appTarefas.model.ListaTarefaAdapter;\r\n    import br.mateus.appTarefas.model.Tarefa;\r\n    import br.mateus.appTarefas.persistance.TarefaBD;\r\n    import br.mateus.appTarefas.persistance.TarefaDAO;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        private EditText titulo;\r\n        private EditText descricao;\r\n        private ImageButton botaoSalvar;\r\n        private ListView listar;\r\n        private List&lt;Tarefa&gt; item;\r\n        private ListaTarefaAdapter arrayTarefa;\r\n        private TarefaDAO dao;\r\n        private Tarefa t;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setTheme(R.style.Theme_App);\r\n            setContentView(R.layout.activity_main);\r\n            mapearXML();\r\n            verificar();\r\n            click();\r\n            arrayTarefa = new ListaTarefaAdapter(getApplicationContext(), item);\r\n            listar.setAdapter(arrayTarefa);\r\n            check();\r\n        }\r\n    \r\n        private void mapearXML() {\r\n            // Your existing code for mapping views\r\n        }\r\n    \r\n        private void verificar() {\r\n            // Your existing code for database initialization\r\n        }\r\n    \r\n        private void check() {\r\n            SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\r\n            boolean isChecked = sharedPreferences.getBoolean(&quot;checkBoxState&quot;, false);\r\n            // Set the initial checkbox state here\r\n            // You need to determine which item&#39;s checkbox you want to set based on your logic\r\n            // For now, I&#39;m assuming it&#39;s the first item in the list\r\n            if (!item.isEmpty()) {\r\n                item.get(0).setChecked(isChecked);\r\n                arrayTarefa.notifyDataSetChanged();\r\n            }\r\n        }\r\n    \r\n        private void click() {\r\n            // Your existing code for button click and item click listeners\r\n        }\r\n    \r\n        // Rest of your MainActivity code...\r\n    \r\n    }\r\n\r\nIn this modified code, I&#39;ve added comments to guide you on where to set and update the checkbox state based on your logic. You&#39;ll need to adapt this code according to your specific requirements and how you handle checkboxes in your ListaTarefaAdapter. The key is to update the checkbox state in your model class (Tarefa) and notify the adapter of the changes so that it reflects the correct state in the ListView.\r\n\r\nGood Luck.","title":"My checkbox is not saving when closing and opening the application","body":"<p>It seems like you are trying to save the state of a checkbox using SharedPreferences, but the code provided doesn't show how the checkboxes are being added to your ListView or how you are updating their state. Here are some steps you can follow to save and restore the state of checkboxes in your ListView:</p>\n<ol>\n<li><p>First, make sure you have a model class to represent your list items (in this case, Tarefa) that includes a property for the checkbox state (e.g., isChecked).</p>\n</li>\n<li><p>Update your ListaTarefaAdapter to work with this model class and bind the checkbox state to the actual checkboxes in your list item layout (linha.xml).</p>\n</li>\n<li><p>When a checkbox state changes, update the corresponding property in your model class.</p>\n</li>\n<li><p>In your onCreate method, after you initialize your adapter and ListView, set the adapter on the ListView.</p>\n</li>\n<li><p>In your check method, you can use SharedPreferences to restore the checkbox state when the activity is created.</p>\n</li>\n<li><p>In your CompoundButton.OnCheckedChangeListener, update the model class with the new state and save it in SharedPreferences.</p>\n</li>\n</ol>\n<p>Here's a modified version of your MainActivity class to demonstrate these steps:</p>\n<pre><code>import android.content.DialogInterface;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.CheckBox;\nimport android.widget.CompoundButton;\nimport android.widget.EditText;\nimport android.widget.ImageButton;\nimport android.widget.LinearLayout;\nimport android.widget.ListView;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\nimport java.util.List;\nimport br.mateus.appTarefas.model.ListaTarefaAdapter;\nimport br.mateus.appTarefas.model.Tarefa;\nimport br.mateus.appTarefas.persistance.TarefaBD;\nimport br.mateus.appTarefas.persistance.TarefaDAO;\n\npublic class MainActivity extends AppCompatActivity {\n    private EditText titulo;\n    private EditText descricao;\n    private ImageButton botaoSalvar;\n    private ListView listar;\n    private List&lt;Tarefa&gt; item;\n    private ListaTarefaAdapter arrayTarefa;\n    private TarefaDAO dao;\n    private Tarefa t;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setTheme(R.style.Theme_App);\n        setContentView(R.layout.activity_main);\n        mapearXML();\n        verificar();\n        click();\n        arrayTarefa = new ListaTarefaAdapter(getApplicationContext(), item);\n        listar.setAdapter(arrayTarefa);\n        check();\n    }\n\n    private void mapearXML() {\n        // Your existing code for mapping views\n    }\n\n    private void verificar() {\n        // Your existing code for database initialization\n    }\n\n    private void check() {\n        SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\n        boolean isChecked = sharedPreferences.getBoolean(&quot;checkBoxState&quot;, false);\n        // Set the initial checkbox state here\n        // You need to determine which item's checkbox you want to set based on your logic\n        // For now, I'm assuming it's the first item in the list\n        if (!item.isEmpty()) {\n            item.get(0).setChecked(isChecked);\n            arrayTarefa.notifyDataSetChanged();\n        }\n    }\n\n    private void click() {\n        // Your existing code for button click and item click listeners\n    }\n\n    // Rest of your MainActivity code...\n\n}\n</code></pre>\n<p>In this modified code, I've added comments to guide you on where to set and update the checkbox state based on your logic. You'll need to adapt this code according to your specific requirements and how you handle checkboxes in your ListaTarefaAdapter. The key is to update the checkbox state in your model class (Tarefa) and notify the adapter of the changes so that it reflects the correct state in the ListView.</p>\n<p>Good Luck.</p>\n"}],"owner":{"account_id":29402706,"reputation":7,"user_id":22528506,"display_name":"Mateus Dallacourt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":1,"score":-4,"last_activity_date":1694395459,"creation_date":1694382179,"question_id":77077990,"body_markdown":"I&#39;m trying to get the box to be saved when I open the application again, but when I close and open it it always comes back empty. I&#39;ve faced many pointer errors trying to resolve this, I&#39;ve tried creating directly in the onCreate method, but nothing works.\r\n\r\nMainActivity\r\n\r\n\r\n    package br.mateus.appTarefas;\r\n    import android.content.DialogInterface;\r\n    import android.content.SharedPreferences;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.Button;\r\n    import android.widget.CheckBox;\r\n    import android.widget.CompoundButton;\r\n    import android.widget.EditText;\r\n    import android.widget.ImageButton;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.ListView;\r\n\r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import java.util.List;\r\n\r\n    import br.mateus.appTarefas.model.ListaTarefaAdapter;\r\n    import br.mateus.appTarefas.model.Tarefa;\r\n    import br.mateus.appTarefas.persistance.TarefaBD;\r\n    import br.mateus.appTarefas.persistance.TarefaDAO;\r\n\r\n    public class MainActivity extends AppCompatActivity{\r\n        private EditText titulo;\r\n        private EditText descricao;\r\n        private ImageButton botaoSalvar;\r\n        private ListView listar;\r\n        private List&lt;Tarefa&gt;item;\r\n        private ListaTarefaAdapter arrayTarefa;\r\n        private TarefaDAO dao;\r\n        private Tarefa t;\r\n\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setTheme(R.style.Theme_App);\r\n            setContentView(R.layout.activity_main);\r\n            mapearXML();\r\n            verificar();\r\n            click();\r\n            check();\r\n            arrayTarefa = new ListaTarefaAdapter(getApplicationContext(),item);\r\n            listar.setAdapter(arrayTarefa);\r\n        }\r\n\r\n        private void mapearXML(){\r\n            titulo = findViewById(R.id.idTitulo);\r\n            descricao = findViewById(R.id.idDescricao);\r\n            botaoSalvar = findViewById(R.id.idSalvar);\r\n            listar = findViewById(R.id.idLista);\r\n        }\r\n\r\n        private void verificar(){\r\n            if(dao==null){\r\n                dao = new TarefaBD(this);\r\n            }\r\n            item=dao.listar();\r\n        }\r\n\r\n        private void check(){\r\n            View checkLayout = getLayoutInflater().inflate(R.layout.linha,null);\r\n            CheckBox check = checkLayout.findViewById(R.id.idCheckBox);\r\n\r\n            SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\r\n            boolean isChecked = sharedPreferences.getBoolean(&quot;checkBoxState&quot;, false);\r\n            check.setChecked(isChecked);\r\n            check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n                @Override\r\n                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                    SharedPreferences.Editor editor = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE).edit();\r\n                    editor.putBoolean(&quot;checkBoxState&quot;, isChecked);\r\n                    editor.apply();\r\n                }\r\n            });\r\n        }\r\n\r\n        private void click(){\r\n            botaoSalvar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Log.d(&quot;MainActivitya&quot;,&quot;Item clicado&quot;);\r\n\r\n                    String tituloTarefa = titulo.getText().toString().trim();\r\n                    String descricaoTarefa = descricao.getText().toString().trim();\r\n                    if (tituloTarefa.isEmpty() ) {\r\n                        titulo.setError(&quot;Este campo n&#227;o pode estar vazio.&quot;);\r\n                    }else if(descricaoTarefa.isEmpty()){\r\n                        descricao.setError(&quot;Este campo n&#227;o pode estar vazio.&quot;);\r\n                    }else{\r\n                        if (t == null) {\r\n                            t = new Tarefa();\r\n                        }\r\n                        t.setTitulo(tituloTarefa);\r\n                        t.setDescricao(descricaoTarefa);\r\n                        if (t.getId() == null) {\r\n                            dao.salvar(t);\r\n                        } else {\r\n                            dao.editar(t);\r\n                        }\r\n                        limparCampos();\r\n                        atualizarItens();\r\n                    }\r\n                }\r\n                });\r\n\r\n            listar.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long id) {\r\n                    final Tarefa tarefaSelecionada = item.get(position);\r\n\r\n                    LinearLayout itemLayout = view.findViewById(R.id.idItem); // Substitua &quot;R.id.itemLayout&quot; pelo ID correto do seu LinearLayout no arquivo linha.xml\r\n\r\n                    itemLayout.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View view) {\r\n                            mostrarDialogoEditarExcluir(tarefaSelecionada);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n\r\n        };\r\n\r\n        private void mostrarDialogoEditarExcluir(final Tarefa tarefa) {\r\n            AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(MainActivity.this);\r\n            dialogBuilder.setTitle(&quot;Op&#231;&#245;es&quot;);\r\n            dialogBuilder.setMessage(&quot;Escolha uma op&#231;&#227;o para a tarefa:&quot;);\r\n\r\n            dialogBuilder.setPositiveButton(&quot;Editar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    abrirDialogoEditar(tarefa);\r\n                }\r\n            });\r\n\r\n            dialogBuilder.setNegativeButton(&quot;Excluir&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    mostrarDialogoConfirmacaoExcluir(tarefa);\r\n                }\r\n            });\r\n\r\n            dialogBuilder.setNeutralButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    // A&#231;&#227;o a ser realizada quando o bot&#227;o &quot;Cancelar&quot; for clicado\r\n                }\r\n            });\r\n\r\n            dialogBuilder.create().show();\r\n        }\r\n        private void abrirDialogoEditar(final Tarefa tarefa) {\r\n            AlertDialog.Builder editarDialogBuilder = new AlertDialog.Builder(MainActivity.this);\r\n            editarDialogBuilder.setTitle(&quot;Editar Tarefa&quot;);\r\n\r\n            // Inflar o layout do di&#225;logo de edi&#231;&#227;o\r\n            View editarView = getLayoutInflater().inflate(R.layout.dialog_editar, null);\r\n            editarDialogBuilder.setView(editarView);\r\n\r\n            final EditText editarTitulo = editarView.findViewById(R.id.idTitulo);\r\n            final EditText editarDescricao = editarView.findViewById(R.id.idDescricao);\r\n\r\n            editarTitulo.setText(tarefa.getTitulo());\r\n            editarDescricao.setText(tarefa.getDescricao());\r\n\r\n            editarDialogBuilder.setPositiveButton(&quot;Salvar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    String novoTitulo = editarTitulo.getText().toString();\r\n                    String novaDescricao = editarDescricao.getText().toString();\r\n\r\n                    // Atualize a tarefa com os novos valores aqui\r\n                    tarefa.setTitulo(novoTitulo);\r\n                    tarefa.setDescricao(novaDescricao);\r\n\r\n                    // Atualize a tarefa no banco de dados\r\n                    dao.editar(tarefa);\r\n\r\n                    // Atualize a lista de tarefas na interface do usu&#225;rio\r\n                    atualizarItens();\r\n                }\r\n            });\r\n\r\n            editarDialogBuilder.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    // A&#231;&#227;o a ser realizada quando o bot&#227;o &quot;Cancelar&quot; for clicado\r\n                }\r\n            });\r\n\r\n            editarDialogBuilder.create().show();\r\n        }\r\n        private void mostrarDialogoConfirmacaoExcluir(final Tarefa tarefa) {\r\n            AlertDialog.Builder confirmarExclusaoDialogBuilder = new AlertDialog.Builder(MainActivity.this);\r\n            confirmarExclusaoDialogBuilder.setTitle(&quot;Confirmar Exclus&#227;o&quot;);\r\n            confirmarExclusaoDialogBuilder.setMessage(&quot;Tem certeza de que deseja excluir esta tarefa?&quot;);\r\n\r\n            confirmarExclusaoDialogBuilder.setPositiveButton(&quot;Excluir&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    // Execute a exclus&#227;o da tarefa aqui\r\n                    dao.remove(tarefa);\r\n\r\n                    // Atualize a lista de tarefas na interface do usu&#225;rio\r\n                    atualizarItens();\r\n                }\r\n            });\r\n\r\n            confirmarExclusaoDialogBuilder.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    // A&#231;&#227;o a ser realizada quando o bot&#227;o &quot;Cancelar&quot; for clicado\r\n                }\r\n            });\r\n\r\n            confirmarExclusaoDialogBuilder.create().show();\r\n        }\r\n\r\n        private void atualizarItens(){\r\n            item.clear();\r\n            item.addAll(dao.listar());\r\n            arrayTarefa.notifyDataSetChanged();\r\n        }\r\n\r\n        private void limparCampos(){\r\n            titulo.setText(&quot; &quot;);\r\n            descricao.setText(&quot; &quot;);\r\n            t=null;\r\n        }\r\n\r\n        public void cancelar(View view){\r\n            AlertDialog.Builder cancela = new AlertDialog.Builder(this);\r\n            cancela.setTitle(&quot;Deseja mesmo sair?&quot;);\r\n            cancela.setPositiveButton(&quot;Sair&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    finish();\r\n                }\r\n            });\r\n            cancela.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n\r\n                }\r\n            });\r\n            cancela.create().show();\r\n        }\r\n    }\r\n\r\nactivity_main xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:id=&quot;@+id/idPrincipal&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/azulescuro&quot;\r\n    &gt;\r\n\r\n    &lt;ListView\r\n\r\n        android:id=&quot;@+id/idLista&quot;\r\n        android:layout_width=&quot;401dp&quot;\r\n        android:layout_height=&quot;331dp&quot;\r\n        android:layout_marginTop=&quot;392dp&quot;\r\n        android:textFilterEnabled=&quot;false&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        /&gt;\r\n\r\n\r\n    &lt;ImageButton\r\n        android:id=&quot;@+id/idCancelar&quot;\r\n\r\n        android:layout_width=&quot;77dp&quot;\r\n        android:layout_height=&quot;120dp&quot;\r\n        android:layout_marginStart=&quot;4dp&quot;\r\n        android:layout_marginBottom=&quot;8dp&quot;\r\n        android:backgroundTint=&quot;#00FFFFFF&quot;\r\n        android:contentDescription=&quot;Sair&quot;\r\n        android:onClick=&quot;cancelar&quot;\r\n        android:src=&quot;@drawable/sair&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/idTitulo&quot;\r\n        app:layout_constraintStart_toEndOf=&quot;@+id/idSalvar&quot; /&gt;\r\n\r\n    &lt;ImageButton\r\n        android:id=&quot;@+id/idSalvar&quot;\r\n        android:layout_width=&quot;67dp&quot;\r\n        android:layout_height=&quot;86dp&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:layout_marginStart=&quot;272dp&quot;\r\n        android:layout_marginBottom=&quot;24dp&quot;\r\n        android:backgroundTint=&quot;#00FFFFFF&quot;\r\n        android:contentDescription=&quot;Adicionar&quot;\r\n        android:scaleType=&quot;fitCenter&quot;\r\n        android:src=&quot;@drawable/adicionar&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/idTitulo&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/idTitulo&quot;\r\n        android:layout_width=&quot;396dp&quot;\r\n        android:layout_height=&quot;73dp&quot;\r\n        android:layout_marginStart=&quot;4dp&quot;\r\n        android:layout_marginTop=&quot;116dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;T&#237;tulo&quot;\r\n        android:inputType=&quot;text&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/idDescricao&quot;\r\n        android:layout_width=&quot;394dp&quot;\r\n        android:layout_height=&quot;142dp&quot;\r\n        android:layout_marginStart=&quot;4dp&quot;\r\n        android:layout_marginTop=&quot;36dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Descri&#231;&#227;o&quot;\r\n        android:inputType=&quot;text&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/idTitulo&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nlinha.xml (where is the checkbox)\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:id=&quot;@+id/idItem&quot;\r\n    android:layout_width=&quot;400dp&quot;\r\n    android:layout_height=&quot;50dp&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:descendantFocusability=&quot;blocksDescendants&quot;&gt;\r\n\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;CheckBox\r\n            android:id=&quot;@+id/idCheckBox&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textTitulo&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Texto da Linha 1&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textDescricao&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:paddingLeft=&quot;30dp&quot;\r\n            android:text=&quot;Texto da Linha 2&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\n","title":"My checkbox is not saving when closing and opening the application","body":"<p>I'm trying to get the box to be saved when I open the application again, but when I close and open it it always comes back empty. I've faced many pointer errors trying to resolve this, I've tried creating directly in the onCreate method, but nothing works.</p>\n<p>MainActivity</p>\n<pre><code>package br.mateus.appTarefas;\nimport android.content.DialogInterface;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.Button;\nimport android.widget.CheckBox;\nimport android.widget.CompoundButton;\nimport android.widget.EditText;\nimport android.widget.ImageButton;\nimport android.widget.LinearLayout;\nimport android.widget.ListView;\n\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.List;\n\nimport br.mateus.appTarefas.model.ListaTarefaAdapter;\nimport br.mateus.appTarefas.model.Tarefa;\nimport br.mateus.appTarefas.persistance.TarefaBD;\nimport br.mateus.appTarefas.persistance.TarefaDAO;\n\npublic class MainActivity extends AppCompatActivity{\n    private EditText titulo;\n    private EditText descricao;\n    private ImageButton botaoSalvar;\n    private ListView listar;\n    private List&lt;Tarefa&gt;item;\n    private ListaTarefaAdapter arrayTarefa;\n    private TarefaDAO dao;\n    private Tarefa t;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setTheme(R.style.Theme_App);\n        setContentView(R.layout.activity_main);\n        mapearXML();\n        verificar();\n        click();\n        check();\n        arrayTarefa = new ListaTarefaAdapter(getApplicationContext(),item);\n        listar.setAdapter(arrayTarefa);\n    }\n\n    private void mapearXML(){\n        titulo = findViewById(R.id.idTitulo);\n        descricao = findViewById(R.id.idDescricao);\n        botaoSalvar = findViewById(R.id.idSalvar);\n        listar = findViewById(R.id.idLista);\n    }\n\n    private void verificar(){\n        if(dao==null){\n            dao = new TarefaBD(this);\n        }\n        item=dao.listar();\n    }\n\n    private void check(){\n        View checkLayout = getLayoutInflater().inflate(R.layout.linha,null);\n        CheckBox check = checkLayout.findViewById(R.id.idCheckBox);\n\n        SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\n        boolean isChecked = sharedPreferences.getBoolean(&quot;checkBoxState&quot;, false);\n        check.setChecked(isChecked);\n        check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                SharedPreferences.Editor editor = getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE).edit();\n                editor.putBoolean(&quot;checkBoxState&quot;, isChecked);\n                editor.apply();\n            }\n        });\n    }\n\n    private void click(){\n        botaoSalvar.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Log.d(&quot;MainActivitya&quot;,&quot;Item clicado&quot;);\n\n                String tituloTarefa = titulo.getText().toString().trim();\n                String descricaoTarefa = descricao.getText().toString().trim();\n                if (tituloTarefa.isEmpty() ) {\n                    titulo.setError(&quot;Este campo não pode estar vazio.&quot;);\n                }else if(descricaoTarefa.isEmpty()){\n                    descricao.setError(&quot;Este campo não pode estar vazio.&quot;);\n                }else{\n                    if (t == null) {\n                        t = new Tarefa();\n                    }\n                    t.setTitulo(tituloTarefa);\n                    t.setDescricao(descricaoTarefa);\n                    if (t.getId() == null) {\n                        dao.salvar(t);\n                    } else {\n                        dao.editar(t);\n                    }\n                    limparCampos();\n                    atualizarItens();\n                }\n            }\n            });\n\n        listar.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long id) {\n                final Tarefa tarefaSelecionada = item.get(position);\n\n                LinearLayout itemLayout = view.findViewById(R.id.idItem); // Substitua &quot;R.id.itemLayout&quot; pelo ID correto do seu LinearLayout no arquivo linha.xml\n\n                itemLayout.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View view) {\n                        mostrarDialogoEditarExcluir(tarefaSelecionada);\n                    }\n                });\n            }\n        });\n\n\n\n    };\n\n    private void mostrarDialogoEditarExcluir(final Tarefa tarefa) {\n        AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(MainActivity.this);\n        dialogBuilder.setTitle(&quot;Opções&quot;);\n        dialogBuilder.setMessage(&quot;Escolha uma opção para a tarefa:&quot;);\n\n        dialogBuilder.setPositiveButton(&quot;Editar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                abrirDialogoEditar(tarefa);\n            }\n        });\n\n        dialogBuilder.setNegativeButton(&quot;Excluir&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                mostrarDialogoConfirmacaoExcluir(tarefa);\n            }\n        });\n\n        dialogBuilder.setNeutralButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                // Ação a ser realizada quando o botão &quot;Cancelar&quot; for clicado\n            }\n        });\n\n        dialogBuilder.create().show();\n    }\n    private void abrirDialogoEditar(final Tarefa tarefa) {\n        AlertDialog.Builder editarDialogBuilder = new AlertDialog.Builder(MainActivity.this);\n        editarDialogBuilder.setTitle(&quot;Editar Tarefa&quot;);\n\n        // Inflar o layout do diálogo de edição\n        View editarView = getLayoutInflater().inflate(R.layout.dialog_editar, null);\n        editarDialogBuilder.setView(editarView);\n\n        final EditText editarTitulo = editarView.findViewById(R.id.idTitulo);\n        final EditText editarDescricao = editarView.findViewById(R.id.idDescricao);\n\n        editarTitulo.setText(tarefa.getTitulo());\n        editarDescricao.setText(tarefa.getDescricao());\n\n        editarDialogBuilder.setPositiveButton(&quot;Salvar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                String novoTitulo = editarTitulo.getText().toString();\n                String novaDescricao = editarDescricao.getText().toString();\n\n                // Atualize a tarefa com os novos valores aqui\n                tarefa.setTitulo(novoTitulo);\n                tarefa.setDescricao(novaDescricao);\n\n                // Atualize a tarefa no banco de dados\n                dao.editar(tarefa);\n\n                // Atualize a lista de tarefas na interface do usuário\n                atualizarItens();\n            }\n        });\n\n        editarDialogBuilder.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                // Ação a ser realizada quando o botão &quot;Cancelar&quot; for clicado\n            }\n        });\n\n        editarDialogBuilder.create().show();\n    }\n    private void mostrarDialogoConfirmacaoExcluir(final Tarefa tarefa) {\n        AlertDialog.Builder confirmarExclusaoDialogBuilder = new AlertDialog.Builder(MainActivity.this);\n        confirmarExclusaoDialogBuilder.setTitle(&quot;Confirmar Exclusão&quot;);\n        confirmarExclusaoDialogBuilder.setMessage(&quot;Tem certeza de que deseja excluir esta tarefa?&quot;);\n\n        confirmarExclusaoDialogBuilder.setPositiveButton(&quot;Excluir&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                // Execute a exclusão da tarefa aqui\n                dao.remove(tarefa);\n\n                // Atualize a lista de tarefas na interface do usuário\n                atualizarItens();\n            }\n        });\n\n        confirmarExclusaoDialogBuilder.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                // Ação a ser realizada quando o botão &quot;Cancelar&quot; for clicado\n            }\n        });\n\n        confirmarExclusaoDialogBuilder.create().show();\n    }\n\n    private void atualizarItens(){\n        item.clear();\n        item.addAll(dao.listar());\n        arrayTarefa.notifyDataSetChanged();\n    }\n\n    private void limparCampos(){\n        titulo.setText(&quot; &quot;);\n        descricao.setText(&quot; &quot;);\n        t=null;\n    }\n\n    public void cancelar(View view){\n        AlertDialog.Builder cancela = new AlertDialog.Builder(this);\n        cancela.setTitle(&quot;Deseja mesmo sair?&quot;);\n        cancela.setPositiveButton(&quot;Sair&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                finish();\n            }\n        });\n        cancela.setNegativeButton(&quot;Cancelar&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n\n            }\n        });\n        cancela.create().show();\n    }\n}\n</code></pre>\n<p>activity_main xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:id=&quot;@+id/idPrincipal&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/azulescuro&quot;\n    &gt;\n\n    &lt;ListView\n\n        android:id=&quot;@+id/idLista&quot;\n        android:layout_width=&quot;401dp&quot;\n        android:layout_height=&quot;331dp&quot;\n        android:layout_marginTop=&quot;392dp&quot;\n        android:textFilterEnabled=&quot;false&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        /&gt;\n\n\n    &lt;ImageButton\n        android:id=&quot;@+id/idCancelar&quot;\n\n        android:layout_width=&quot;77dp&quot;\n        android:layout_height=&quot;120dp&quot;\n        android:layout_marginStart=&quot;4dp&quot;\n        android:layout_marginBottom=&quot;8dp&quot;\n        android:backgroundTint=&quot;#00FFFFFF&quot;\n        android:contentDescription=&quot;Sair&quot;\n        android:onClick=&quot;cancelar&quot;\n        android:src=&quot;@drawable/sair&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/idTitulo&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/idSalvar&quot; /&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/idSalvar&quot;\n        android:layout_width=&quot;67dp&quot;\n        android:layout_height=&quot;86dp&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:layout_marginStart=&quot;272dp&quot;\n        android:layout_marginBottom=&quot;24dp&quot;\n        android:backgroundTint=&quot;#00FFFFFF&quot;\n        android:contentDescription=&quot;Adicionar&quot;\n        android:scaleType=&quot;fitCenter&quot;\n        android:src=&quot;@drawable/adicionar&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/idTitulo&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/idTitulo&quot;\n        android:layout_width=&quot;396dp&quot;\n        android:layout_height=&quot;73dp&quot;\n        android:layout_marginStart=&quot;4dp&quot;\n        android:layout_marginTop=&quot;116dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Título&quot;\n        android:inputType=&quot;text&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/idDescricao&quot;\n        android:layout_width=&quot;394dp&quot;\n        android:layout_height=&quot;142dp&quot;\n        android:layout_marginStart=&quot;4dp&quot;\n        android:layout_marginTop=&quot;36dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Descrição&quot;\n        android:inputType=&quot;text&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/idTitulo&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>linha.xml (where is the checkbox)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/idItem&quot;\n    android:layout_width=&quot;400dp&quot;\n    android:layout_height=&quot;50dp&quot;\n    android:orientation=&quot;vertical&quot;\n    android:descendantFocusability=&quot;blocksDescendants&quot;&gt;\n\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;CheckBox\n            android:id=&quot;@+id/idCheckBox&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textTitulo&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Texto da Linha 1&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textDescricao&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:paddingLeft=&quot;30dp&quot;\n            android:text=&quot;Texto da Linha 2&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":10,"creation_date":1295235109,"post_id":4709175,"comment_id":37910626,"body_markdown":"In his book [*Effective Java, Second Edition*](http://my.safaribooksonline.com/9780137150021), Joshua Bloch elaborates on this approach in [*Item 3: Enforce the Singleton Property with a Private Constructor or an enum Type*](http://www.drdobbs.com/java/208403883?pgno=3), reprinted in [*Dr. Dobb&#39;s*](http://www.drdobbs.com/index.jhtml).","body":"In his book <a href=\"http://my.safaribooksonline.com/9780137150021\" rel=\"nofollow noreferrer\"><i>Effective Java, Second Edition</i></a>, Joshua Bloch elaborates on this approach in <a href=\"http://www.drdobbs.com/java/208403883?pgno=3\" rel=\"nofollow noreferrer\"><i>Item 3: Enforce the Singleton Property with a Private Constructor or an enum Type</i></a>, reprinted in <a href=\"http://www.drdobbs.com/index.jhtml\" rel=\"nofollow noreferrer\"><i>Dr. Dobb&#39;s</i></a>."},{"owner":{"account_id":2416637,"reputation":96,"user_id":2110517,"accept_rate":50,"display_name":"Arnav Joshi"},"score":1,"creation_date":1474827500,"post_id":4709175,"comment_id":66679709,"body_markdown":"You can&#39;t instantiate enums because it has private constructor, they are instantiated on jvm startup, so its singleton, Enums are not thread safe.","body":"You can&#39;t instantiate enums because it has private constructor, they are instantiated on jvm startup, so its singleton, Enums are not thread safe."}],"answers":[{"tags":[],"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1295228593,"creation_date":1295226174,"answer_id":4709193,"question_id":4709175,"body_markdown":"From Java [documents][1] -\r\n\r\n&gt; You should use enum types any time you\r\n&gt; need to represent a fixed set of\r\n&gt; constants. That includes natural enum\r\n&gt; types such as the planets in our solar\r\n&gt; system and data sets where you know\r\n&gt; all possible values at compile\r\n&gt; time—for example, the choices on a\r\n&gt; menu, command line flags, and so on.\r\n\r\nA common example is to replace a class with a set of private static final int constants (within reasonable number of constants) with an enum type. Basically if you think you know all possible values of &quot;something&quot; at compile time you can represent that as an enum type. Enums provide readability and flexibility over a class with constants.\r\n\r\nFew other advantages that I can think of enum types. They is always one instance of a particular enum class (hence the concept of using enums as singleton arrives). Another advantage is you can use enums as a type in switch-case statement. Also you can use [toString()][2] on the enum to print them as readable strings.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [2]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#toString%28%29","title":"What are enums and why are they useful?","body":"<p>From Java <a href=\"http://download.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"noreferrer\">documents</a> -</p>\n\n<blockquote>\n  <p>You should use enum types any time you\n  need to represent a fixed set of\n  constants. That includes natural enum\n  types such as the planets in our solar\n  system and data sets where you know\n  all possible values at compile\n  time—for example, the choices on a\n  menu, command line flags, and so on.</p>\n</blockquote>\n\n<p>A common example is to replace a class with a set of private static final int constants (within reasonable number of constants) with an enum type. Basically if you think you know all possible values of \"something\" at compile time you can represent that as an enum type. Enums provide readability and flexibility over a class with constants.</p>\n\n<p>Few other advantages that I can think of enum types. They is always one instance of a particular enum class (hence the concept of using enums as singleton arrives). Another advantage is you can use enums as a type in switch-case statement. Also you can use <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#toString%28%29\" rel=\"noreferrer\">toString()</a> on the enum to print them as readable strings.</p>\n"},{"tags":[],"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"down_vote_count":2,"up_vote_count":773,"is_accepted":true,"score":771,"last_activity_date":1394729657,"creation_date":1295226577,"answer_id":4709224,"question_id":4709175,"body_markdown":"You should always use enums when a variable (especially a method parameter) can only take one out of a small set of possible values. Examples would be things like type constants (contract status: &quot;permanent&quot;, &quot;temp&quot;, &quot;apprentice&quot;), or flags (&quot;execute now&quot;, &quot;defer execution&quot;).\r\n\r\nIf you use enums instead of integers (or String codes), you increase compile-time checking and avoid errors from passing in invalid constants, and you document which values are legal to use.\r\n\r\nBTW, overuse of enums might mean that your methods do too much (it&#39;s often better to have several separate methods, rather than one method that takes several flags which modify what it does), but if you have to use flags or type codes, enums are the way to go.\r\n\r\nAs an example, which is better?\r\n\r\n    /** Counts number of foobangs.\r\n     * @param type Type of foobangs to count. Can be 1=green foobangs,\r\n     * 2=wrinkled foobangs, 3=sweet foobangs, 0=all types.\r\n     * @return number of foobangs of type\r\n     */\r\n    public int countFoobangs(int type)\r\n    \r\nversus\r\n    \r\n    /** Types of foobangs. */\r\n    public enum FB_TYPE {\r\n     GREEN, WRINKLED, SWEET, \r\n     /** special type for all types combined */\r\n     ALL;\r\n    }\r\n    \r\n    /** Counts number of foobangs.\r\n     * @param type Type of foobangs to count\r\n     * @return number of foobangs of type\r\n     */\r\n    public int countFoobangs(FB_TYPE type)\r\n\r\nA method call like:\r\n\r\n    int sweetFoobangCount = countFoobangs(3);\r\n\r\nthen becomes:\r\n\r\n    int sweetFoobangCount = countFoobangs(FB_TYPE.SWEET);\r\n\r\n---\r\n\r\nIn the second example, it&#39;s immediately clear which types are allowed, docs and implementation cannot go out of sync, and the compiler can enforce this.\r\nAlso, an invalid call like\r\n\r\n    int sweetFoobangCount = countFoobangs(99);\r\n\r\nis no longer possible.\r\n\r\n","title":"What are enums and why are they useful?","body":"<p>You should always use enums when a variable (especially a method parameter) can only take one out of a small set of possible values. Examples would be things like type constants (contract status: \"permanent\", \"temp\", \"apprentice\"), or flags (\"execute now\", \"defer execution\").</p>\n\n<p>If you use enums instead of integers (or String codes), you increase compile-time checking and avoid errors from passing in invalid constants, and you document which values are legal to use.</p>\n\n<p>BTW, overuse of enums might mean that your methods do too much (it's often better to have several separate methods, rather than one method that takes several flags which modify what it does), but if you have to use flags or type codes, enums are the way to go.</p>\n\n<p>As an example, which is better?</p>\n\n<pre><code>/** Counts number of foobangs.\n * @param type Type of foobangs to count. Can be 1=green foobangs,\n * 2=wrinkled foobangs, 3=sweet foobangs, 0=all types.\n * @return number of foobangs of type\n */\npublic int countFoobangs(int type)\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>/** Types of foobangs. */\npublic enum FB_TYPE {\n GREEN, WRINKLED, SWEET, \n /** special type for all types combined */\n ALL;\n}\n\n/** Counts number of foobangs.\n * @param type Type of foobangs to count\n * @return number of foobangs of type\n */\npublic int countFoobangs(FB_TYPE type)\n</code></pre>\n\n<p>A method call like:</p>\n\n<pre><code>int sweetFoobangCount = countFoobangs(3);\n</code></pre>\n\n<p>then becomes:</p>\n\n<pre><code>int sweetFoobangCount = countFoobangs(FB_TYPE.SWEET);\n</code></pre>\n\n<hr>\n\n<p>In the second example, it's immediately clear which types are allowed, docs and implementation cannot go out of sync, and the compiler can enforce this.\nAlso, an invalid call like</p>\n\n<pre><code>int sweetFoobangCount = countFoobangs(99);\n</code></pre>\n\n<p>is no longer possible.</p>\n"},{"tags":[],"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1532968247,"creation_date":1295227571,"answer_id":4709284,"question_id":4709175,"body_markdown":"&gt; Now why and what for should I used\r\n&gt; enum in day to day programming?\r\n\r\nYou can use an Enum to represent a smallish fixed set of constants or an internal class mode while increasing readability. Also, Enums can enforce a certain rigidity when used in method parameters. They offer the interesting possibility of passing information to a constructor like in the [Planets example on Oracle&#39;s site][1] and, as you&#39;ve discovered, also allow a simple way to create a singleton pattern.\r\n\r\nex: `Locale.setDefault(Locale.US)` reads better than `Locale.setDefault(1)` and enforces the use of the fixed set of values shown in an IDE when you add the `.` separator instead of all integers.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html","title":"What are enums and why are they useful?","body":"<blockquote>\n  <p>Now why and what for should I used\n  enum in day to day programming?</p>\n</blockquote>\n\n<p>You can use an Enum to represent a smallish fixed set of constants or an internal class mode while increasing readability. Also, Enums can enforce a certain rigidity when used in method parameters. They offer the interesting possibility of passing information to a constructor like in the <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow noreferrer\">Planets example on Oracle's site</a> and, as you've discovered, also allow a simple way to create a singleton pattern.</p>\n\n<p>ex: <code>Locale.setDefault(Locale.US)</code> reads better than <code>Locale.setDefault(1)</code> and enforces the use of the fixed set of values shown in an IDE when you add the <code>.</code> separator instead of all integers.</p>\n"},{"tags":[],"owner":{"account_id":215917,"reputation":9891,"user_id":470838,"accept_rate":89,"display_name":"orangepips"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1295236168,"creation_date":1295236168,"answer_id":4709892,"question_id":4709175,"body_markdown":"Something none of the other answers have covered that make enums particularly powerful are the ability to have [template methods][1]. Methods can be part of the base enum and overridden by each type. And, with the behavior attached to the enum, it often eliminates the need for if-else constructs or switch statements as this [blog post demonstrates][2] - where `enum.method()` does what originally would be executed inside the conditional. The same example also shows the use of static imports with enums as well producing much cleaner DSL like code. \r\n\r\nSome other interesting qualities include the fact that enums provide implementation for `equals()`, `toString()` and `hashCode()` and implement `Serializable` and `Comparable`. \r\n\r\nFor a complete rundown of all that enums have to offer I highly recommend Bruce Eckel&#39;s [Thinking in Java 4th edition][3] which devotes an entire chapter to the topic. Particularly illuminating are the examples involving a Rock, Paper, Scissors (i.e. RoShamBo) game as enums. \r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Template_method_pattern\r\n  [2]: http://www.ajaxonomy.com/2007/java/making-the-most-of-java-50-enum-tricks\r\n  [3]: http://www.mindview.net/Books/TIJ4","title":"What are enums and why are they useful?","body":"<p>Something none of the other answers have covered that make enums particularly powerful are the ability to have <a href=\"http://en.wikipedia.org/wiki/Template_method_pattern\" rel=\"noreferrer\">template methods</a>. Methods can be part of the base enum and overridden by each type. And, with the behavior attached to the enum, it often eliminates the need for if-else constructs or switch statements as this <a href=\"http://www.ajaxonomy.com/2007/java/making-the-most-of-java-50-enum-tricks\" rel=\"noreferrer\">blog post demonstrates</a> - where <code>enum.method()</code> does what originally would be executed inside the conditional. The same example also shows the use of static imports with enums as well producing much cleaner DSL like code. </p>\n\n<p>Some other interesting qualities include the fact that enums provide implementation for <code>equals()</code>, <code>toString()</code> and <code>hashCode()</code> and implement <code>Serializable</code> and <code>Comparable</code>. </p>\n\n<p>For a complete rundown of all that enums have to offer I highly recommend Bruce Eckel's <a href=\"http://www.mindview.net/Books/TIJ4\" rel=\"noreferrer\">Thinking in Java 4th edition</a> which devotes an entire chapter to the topic. Particularly illuminating are the examples involving a Rock, Paper, Scissors (i.e. RoShamBo) game as enums. </p>\n"},{"tags":[],"owner":{"account_id":2050167,"reputation":1469,"user_id":1829357,"display_name":"Steve"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1361451069,"creation_date":1361451069,"answer_id":15002704,"question_id":4709175,"body_markdown":"ENum stands for &quot;Enumerated Type&quot;. It is a data type having a fixed set of constants which you define yourself.","title":"What are enums and why are they useful?","body":"<p>ENum stands for \"Enumerated Type\". It is a data type having a fixed set of constants which you define yourself.</p>\n"},{"tags":[],"owner":{"account_id":2130094,"reputation":1331,"user_id":1891112,"accept_rate":71,"display_name":"tinker_fairy"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1532969975,"creation_date":1361466988,"answer_id":15008356,"question_id":4709175,"body_markdown":"What is an enum\r\n---------------\r\n\r\n* enum is a keyword defined for Enumeration a new data type. Typesafe enumerations should be used liberally. In particular, they are a robust alternative to the simple String or int constants used in much older APIs to represent sets of related items.\r\n\r\nWhy to use enum\r\n----------------\r\n\r\n* enums are implicitly final subclasses of java.lang.Enum\r\n* if an enum is a member of a class, it&#39;s implicitly static\r\n* new can never be used with an enum, even within the enum type itself\r\n* name and valueOf simply use the text of the enum constants, while toString may be overridden to provide any content, if desired\r\n* for enum constants, equals and == amount to the same thing, and can be used interchangeably\r\n* enum constants are implicitly public static final\r\n\r\nNote\r\n----\r\n\r\n* enums cannot extend any class.\r\n* An enum cannot be a superclass.\r\n* the order of appearance of enum constants is called their &quot;natural order&quot;, and defines the order used by other items as well: compareTo, iteration order of values, EnumSet, EnumSet.range.\r\n* An enumeration can have constructors, static and instance blocks, variables, and methods but cannot have abstract methods.","title":"What are enums and why are they useful?","body":"<h2>What is an enum</h2>\n\n<ul>\n<li>enum is a keyword defined for Enumeration a new data type. Typesafe enumerations should be used liberally. In particular, they are a robust alternative to the simple String or int constants used in much older APIs to represent sets of related items.</li>\n</ul>\n\n<h2>Why to use enum</h2>\n\n<ul>\n<li>enums are implicitly final subclasses of java.lang.Enum</li>\n<li>if an enum is a member of a class, it's implicitly static</li>\n<li>new can never be used with an enum, even within the enum type itself</li>\n<li>name and valueOf simply use the text of the enum constants, while toString may be overridden to provide any content, if desired</li>\n<li>for enum constants, equals and == amount to the same thing, and can be used interchangeably</li>\n<li>enum constants are implicitly public static final</li>\n</ul>\n\n<h2>Note</h2>\n\n<ul>\n<li>enums cannot extend any class.</li>\n<li>An enum cannot be a superclass.</li>\n<li>the order of appearance of enum constants is called their \"natural order\", and defines the order used by other items as well: compareTo, iteration order of values, EnumSet, EnumSet.range.</li>\n<li>An enumeration can have constructors, static and instance blocks, variables, and methods but cannot have abstract methods.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":985564,"reputation":263,"user_id":1004150,"display_name":"sErVerdevIL"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1361794887,"creation_date":1361794887,"answer_id":15066871,"question_id":4709175,"body_markdown":"Apart from all said by others.. In an older project that I used to work for, a lot of communication between entities(independent applications) was using integers which represented a small set. It was useful to declare the set as `enum` with static methods to get `enum` object from `value` and viceversa. The code looked cleaner, switch case usability and easier writing to logs.\r\n\r\n    enum ProtocolType {\r\n        TCP_IP (1, &quot;Transmission Control Protocol&quot;), \r\n        IP (2, &quot;Internet Protocol&quot;), \r\n        UDP (3, &quot;User Datagram Protocol&quot;);\r\n    \r\n        public int code;\r\n        public String name;\r\n    \r\n        private ProtocolType(int code, String name) {\r\n    \t    this.code = code;\r\n            this.name = name;\r\n        }\r\n    \r\n        public static ProtocolType fromInt(int code) {\r\n\t    switch(code) {\r\n\t    case 1:\r\n\t        return TCP_IP;\r\n\t    case 2:\r\n\t        return IP;\r\n\t    case 3:\r\n\t        return UDP;\r\n\t    }\r\n\t\r\n        // we had some exception handling for this\r\n        // as the contract for these was between 2 independent applications\r\n        // liable to change between versions (mostly adding new stuff)\r\n        // but keeping it simple here.\r\n        return null;\r\n        }\r\n    }\r\n\r\nCreate `enum` object from received values (e.g. 1,2) using `ProtocolType.fromInt(2)`\r\nWrite to logs using `myEnumObj.name`\r\n\r\nHope this helps.","title":"What are enums and why are they useful?","body":"<p>Apart from all said by others.. In an older project that I used to work for, a lot of communication between entities(independent applications) was using integers which represented a small set. It was useful to declare the set as <code>enum</code> with static methods to get <code>enum</code> object from <code>value</code> and viceversa. The code looked cleaner, switch case usability and easier writing to logs.</p>\n\n<pre><code>enum ProtocolType {\n    TCP_IP (1, \"Transmission Control Protocol\"), \n    IP (2, \"Internet Protocol\"), \n    UDP (3, \"User Datagram Protocol\");\n\n    public int code;\n    public String name;\n\n    private ProtocolType(int code, String name) {\n        this.code = code;\n        this.name = name;\n    }\n\n    public static ProtocolType fromInt(int code) {\n    switch(code) {\n    case 1:\n        return TCP_IP;\n    case 2:\n        return IP;\n    case 3:\n        return UDP;\n    }\n\n    // we had some exception handling for this\n    // as the contract for these was between 2 independent applications\n    // liable to change between versions (mostly adding new stuff)\n    // but keeping it simple here.\n    return null;\n    }\n}\n</code></pre>\n\n<p>Create <code>enum</code> object from received values (e.g. 1,2) using <code>ProtocolType.fromInt(2)</code>\nWrite to logs using <code>myEnumObj.name</code></p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":2109911,"reputation":2328,"user_id":1875384,"accept_rate":89,"display_name":"Rafa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1361802168,"creation_date":1361802168,"answer_id":15069169,"question_id":4709175,"body_markdown":"In my opinion, all the answers you got up to now are valid, but in my experience, I would express it in a few words:\r\n\r\n**Use enums if you want the compiler to check the validity of the value of an identifier.** \r\n\r\nOtherwise, you can use strings as you always did (probably you defined some &quot;conventions&quot; for your application) and you will be very flexible... but you will not get 100% security against typos on your strings and you will realize them only in runtime.  ","title":"What are enums and why are they useful?","body":"<p>In my opinion, all the answers you got up to now are valid, but in my experience, I would express it in a few words:</p>\n\n<p><strong>Use enums if you want the compiler to check the validity of the value of an identifier.</strong> </p>\n\n<p>Otherwise, you can use strings as you always did (probably you defined some \"conventions\" for your application) and you will be very flexible... but you will not get 100% security against typos on your strings and you will realize them only in runtime.  </p>\n"},{"tags":[],"owner":{"account_id":2388379,"reputation":5178,"user_id":2088822,"accept_rate":93,"display_name":"afsantos"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1361820301,"creation_date":1361820301,"answer_id":15074808,"question_id":4709175,"body_markdown":"`Enum`s enumerate a fixed set of values, in a self-documenting way.&lt;br/&gt;\r\nThey make your code more explicit, and also less error-prone.\r\n\r\nWhy not using `String`, or `int`, instead of `Enum`, for constants?\r\n\r\n 1. The compiler won&#39;t allow *typos*, neither values out of the fixed\r\n    set, as enums are **types** by themselves. Consequences:\r\n    - You won&#39;t have to write a **pre-condition** (or a manual `if`) to assure your argument is in the valid range.\r\n    - The **type invariant** comes for free.\r\n 2. Enums can have behaviour, just as any other class.\r\n 3. You would probably need a similar amount of memory to use `String`s, anyway (this depends on the complexity of the `Enum`).\r\n\r\nMoreover, each of the `Enum`&#39;s instances is a class, for which you can define its individual behaviour. \r\n\r\nPlus, they assure *thread safety* upon creation of the instances (when the enum is loaded), which has seen great application in simplifying the **Singleton Pattern**.\r\n\r\n[This blog][1] illustrates some of its applications, such as a **State Machine** for a parser.\r\n\r\n\r\n  [1]: http://vanillajava.blogspot.pt/2011/06/java-secret-using-enum-as-state-machine.html","title":"What are enums and why are they useful?","body":"<p><code>Enum</code>s enumerate a fixed set of values, in a self-documenting way.<br/>\nThey make your code more explicit, and also less error-prone.</p>\n\n<p>Why not using <code>String</code>, or <code>int</code>, instead of <code>Enum</code>, for constants?</p>\n\n<ol>\n<li>The compiler won't allow <em>typos</em>, neither values out of the fixed\nset, as enums are <strong>types</strong> by themselves. Consequences:\n<ul>\n<li>You won't have to write a <strong>pre-condition</strong> (or a manual <code>if</code>) to assure your argument is in the valid range.</li>\n<li>The <strong>type invariant</strong> comes for free.</li>\n</ul></li>\n<li>Enums can have behaviour, just as any other class.</li>\n<li>You would probably need a similar amount of memory to use <code>String</code>s, anyway (this depends on the complexity of the <code>Enum</code>).</li>\n</ol>\n\n<p>Moreover, each of the <code>Enum</code>'s instances is a class, for which you can define its individual behaviour. </p>\n\n<p>Plus, they assure <em>thread safety</em> upon creation of the instances (when the enum is loaded), which has seen great application in simplifying the <strong>Singleton Pattern</strong>.</p>\n\n<p><a href=\"http://vanillajava.blogspot.pt/2011/06/java-secret-using-enum-as-state-machine.html\">This blog</a> illustrates some of its applications, such as a <strong>State Machine</strong> for a parser.</p>\n"},{"tags":[],"owner":{"account_id":96690,"reputation":37290,"user_id":262683,"display_name":"Costi Ciudatu"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1536917815,"creation_date":1361827806,"answer_id":15076852,"question_id":4709175,"body_markdown":"Besides the already mentioned use-cases, I often find enums useful for implementing the strategy pattern, following some basic OOP guidelines:\r\n\r\n 1. Having the code where the data is (that is, within the enum itself -- or often within the enum constants, which may override methods).\r\n 2. Implementing an interface (or more) in order to not bind the client code to the enum (which should only provide a set of default implementations).\r\n\r\nThe simplest example would be a set of `Comparator` implementations:\r\n\r\n    enum StringComparator implements Comparator&lt;String&gt; {\r\n        NATURAL {\r\n            @Override\r\n            public int compare(String s1, String s2) {\r\n                return s1.compareTo(s2);\r\n            }\r\n        },\r\n        REVERSE {\r\n            @Override\r\n            public int compare(String s1, String s2) {\r\n                return NATURAL.compare(s2, s1);\r\n            }\r\n        },\r\n        LENGTH {\r\n            @Override\r\n            public int compare(String s1, String s2) {\r\n                return new Integer(s1.length()).compareTo(s2.length());\r\n            }\r\n        };\r\n    }\r\n\r\nThis &quot;pattern&quot; can be used in far more complex scenarios, making extensive use of all the goodies that come with the enum: iterating over the instances, relying on their implicit order, retrieving an instance by its name, static methods providing the right instance for specific contexts etc. And still you have this all hidden behind the interface so your code will work with custom implementations without modification in case you want something that&#39;s not available among the &quot;default options&quot;.\r\n\r\nI&#39;ve seen this successfully applied for modeling the concept of time granularity (daily, weekly, etc.) where all the logic was encapsulated in an enum (choosing the right granularity for a given time range, specific behavior bound to each granularity as constant methods etc.). And still, the `Granularity` as seen by the service layer was simply an interface.\r\n","title":"What are enums and why are they useful?","body":"<p>Besides the already mentioned use-cases, I often find enums useful for implementing the strategy pattern, following some basic OOP guidelines:</p>\n\n<ol>\n<li>Having the code where the data is (that is, within the enum itself -- or often within the enum constants, which may override methods).</li>\n<li>Implementing an interface (or more) in order to not bind the client code to the enum (which should only provide a set of default implementations).</li>\n</ol>\n\n<p>The simplest example would be a set of <code>Comparator</code> implementations:</p>\n\n<pre><code>enum StringComparator implements Comparator&lt;String&gt; {\n    NATURAL {\n        @Override\n        public int compare(String s1, String s2) {\n            return s1.compareTo(s2);\n        }\n    },\n    REVERSE {\n        @Override\n        public int compare(String s1, String s2) {\n            return NATURAL.compare(s2, s1);\n        }\n    },\n    LENGTH {\n        @Override\n        public int compare(String s1, String s2) {\n            return new Integer(s1.length()).compareTo(s2.length());\n        }\n    };\n}\n</code></pre>\n\n<p>This \"pattern\" can be used in far more complex scenarios, making extensive use of all the goodies that come with the enum: iterating over the instances, relying on their implicit order, retrieving an instance by its name, static methods providing the right instance for specific contexts etc. And still you have this all hidden behind the interface so your code will work with custom implementations without modification in case you want something that's not available among the \"default options\".</p>\n\n<p>I've seen this successfully applied for modeling the concept of time granularity (daily, weekly, etc.) where all the logic was encapsulated in an enum (choosing the right granularity for a given time range, specific behavior bound to each granularity as constant methods etc.). And still, the <code>Granularity</code> as seen by the service layer was simply an interface.</p>\n"},{"tags":[],"owner":{"account_id":1088393,"reputation":1269,"user_id":1083581,"accept_rate":21,"display_name":"happybuddha"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1361833069,"creation_date":1361833069,"answer_id":15078145,"question_id":4709175,"body_markdown":"So far, I have never needed to use enums. I have been reading about them since they were introduced in 1.5 or version tiger as it was called back in the day. They never really solved a &#39;problem&#39; for me. For those who use it (and I see a lot of them do), am sure it definitely serves *some* purpose. Just my 2 quid.","title":"What are enums and why are they useful?","body":"<p>So far, I have never needed to use enums. I have been reading about them since they were introduced in 1.5 or version tiger as it was called back in the day. They never really solved a 'problem' for me. For those who use it (and I see a lot of them do), am sure it definitely serves <em>some</em> purpose. Just my 2 quid.</p>\n"},{"tags":[],"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"down_vote_count":1,"up_vote_count":155,"is_accepted":false,"score":154,"last_activity_date":1482021596,"creation_date":1361844187,"answer_id":15080106,"question_id":4709175,"body_markdown":"Why use any programming language feature?  The reason we have languages at all is for\r\n\r\n  1.  Programmers to efficiently and _correctly_ express algorithms in a form computers can use.\r\n  2.  Maintainers to understand algorithms others have written and _correctly_ make changes.\r\n\r\nEnums improve both likelihood of correctness and readability without writing a lot of boilerplate.  If you are willing to write boilerplate, then you can &quot;simulate&quot; enums:\r\n\r\n    public class Color {\r\n        private Color() {} // Prevent others from making colors.\r\n        public static final Color RED = new Color();\r\n        public static final Color AMBER = new Color();\r\n        public static final Color GREEN = new Color();\r\n    }\r\n\r\nNow you can write:\r\n\r\n    Color trafficLightColor = Color.RED;\r\n\r\nThe boilerplate above has much the same effect as\r\n\r\n    public enum Color { RED, AMBER, GREEN };\r\n\r\nBoth provide the same level of checking help from the compiler.  Boilerplate is just more typing.  But saving a lot of typing makes the programmer more _efficient_ (see 1), so it&#39;s a worthwhile feature.\r\n\r\nIt&#39;s worthwhile for at least one more reason, too:\r\n\r\n**Switch statements**\r\n\r\nOne thing that the `static final` enum simulation above does _not_ give you is nice `switch` cases.  For enum types, the Java switch uses the type of its variable to infer the scope of enum cases, so for the `enum Color` above you merely need to say:\r\n\r\n    Color color = ... ;\r\n    switch (color) {\r\n        case RED:\r\n            ...\r\n            break;\r\n    }\r\n\r\nNote it&#39;s not `Color.RED` in the cases.  If you don&#39;t use enum, the only way to use named quantities with `switch` is something like:\r\n\r\n    public Class Color {\r\n        public static final int RED = 0;\r\n        public static final int AMBER = 1;\r\n        public static final int GREEN = 2;\r\n    }\r\n\r\nBut now a variable to hold a color must have type `int`.  The nice compiler checking of the enum and the `static final` simulation is gone.  Not happy.\r\n\r\nA compromise is to use a scalar-valued member in the simulation:\r\n\r\n    public class Color {\r\n        public static final int RED_TAG = 1;\r\n        public static final int AMBER_TAG = 2;\r\n        public static final int GREEN_TAG = 3;\r\n\r\n        public final int tag;\r\n\r\n        private Color(int tag) { this.tag = tag; } \r\n        public static final Color RED = new Color(RED_TAG);\r\n        public static final Color AMBER = new Color(AMBER_TAG);\r\n        public static final Color GREEN = new Color(GREEN_TAG);\r\n    }\r\n\r\nNow:\r\n\r\n    Color color = ... ;\r\n    switch (color.tag) {\r\n        case Color.RED_TAG:\r\n            ...\r\n            break;\r\n    }\r\n\r\nBut note, even more boilerplate!\r\n\r\n**Using an enum as a singleton**\r\n\r\nFrom the boilerplate above you can see why an enum provides a way to implement a singleton.  Instead of writing:\r\n\r\n    public class SingletonClass {\r\n        public static final void INSTANCE = new SingletonClass();\r\n        private SingletonClass() {}\r\n\r\n        // all the methods and instance data for the class here\r\n    }\r\n\r\nand then accessing it with\r\n\r\n    SingletonClass.INSTANCE\r\n\r\nwe can just say\r\n\r\n    public enum SingletonClass {\r\n        INSTANCE;\r\n    \r\n        // all the methods and instance data for the class here\r\n    }\r\n\r\nwhich gives us the same thing.  We can get away with this because Java enums _are_ implemented as full classes with only a little syntactic sugar sprinkled over the top.  This is again less boilerplate, but it&#39;s non-obvious unless the idiom is familiar to you.  I also dislike the fact that you get the various enum functions even though they don&#39;t make much sense for the singleton: `ord` and `values`, etc.  (There&#39;s actually a trickier simulation where `Color extends Integer` that will work with switch, but it&#39;s so tricky that it even more clearly shows why `enum` is a better idea.)\r\n\r\n**Thread safety**\r\n\r\nThread safety is a potential problem only when singletons are created lazily with no locking.\r\n\r\n    public class SingletonClass {\r\n        private static SingletonClass INSTANCE;\r\n        private SingletonClass() {}\r\n        public SingletonClass getInstance() {\r\n            if (INSTANCE == null) INSTANCE = new SingletonClass();\r\n            return INSTANCE;\r\n        }\r\n\r\n        // all the methods and instance data for the class here\r\n    }\r\n\r\nIf many threads call `getInstance` simultaneously while `INSTANCE` is still null, any number of instances can be created.  This is bad.  The only solution is to add `synchronized` access to protect the variable `INSTANCE`.\r\n\r\nHowever, the `static final` code above does not have this problem.  It creates the instance eagerly at class load time.  Class loading is synchronized.  \r\n\r\nThe `enum` singleton is effectively lazy because it&#39;s not initialized until first use. Java initialization is also synchronized, so multiple threads can&#39;t initialize more than one instance of `INSTANCE`. You&#39;re getting a lazily initialized singleton with very little code. The only negative is the the rather obscure syntax. You need to know the idiom or thoroughly understand how class loading and initialization work to know what&#39;s happening.  \r\n","title":"What are enums and why are they useful?","body":"<p>Why use any programming language feature?  The reason we have languages at all is for</p>\n\n<ol>\n<li>Programmers to efficiently and <em>correctly</em> express algorithms in a form computers can use.</li>\n<li>Maintainers to understand algorithms others have written and <em>correctly</em> make changes.</li>\n</ol>\n\n<p>Enums improve both likelihood of correctness and readability without writing a lot of boilerplate.  If you are willing to write boilerplate, then you can \"simulate\" enums:</p>\n\n<pre><code>public class Color {\n    private Color() {} // Prevent others from making colors.\n    public static final Color RED = new Color();\n    public static final Color AMBER = new Color();\n    public static final Color GREEN = new Color();\n}\n</code></pre>\n\n<p>Now you can write:</p>\n\n<pre><code>Color trafficLightColor = Color.RED;\n</code></pre>\n\n<p>The boilerplate above has much the same effect as</p>\n\n<pre><code>public enum Color { RED, AMBER, GREEN };\n</code></pre>\n\n<p>Both provide the same level of checking help from the compiler.  Boilerplate is just more typing.  But saving a lot of typing makes the programmer more <em>efficient</em> (see 1), so it's a worthwhile feature.</p>\n\n<p>It's worthwhile for at least one more reason, too:</p>\n\n<p><strong>Switch statements</strong></p>\n\n<p>One thing that the <code>static final</code> enum simulation above does <em>not</em> give you is nice <code>switch</code> cases.  For enum types, the Java switch uses the type of its variable to infer the scope of enum cases, so for the <code>enum Color</code> above you merely need to say:</p>\n\n<pre><code>Color color = ... ;\nswitch (color) {\n    case RED:\n        ...\n        break;\n}\n</code></pre>\n\n<p>Note it's not <code>Color.RED</code> in the cases.  If you don't use enum, the only way to use named quantities with <code>switch</code> is something like:</p>\n\n<pre><code>public Class Color {\n    public static final int RED = 0;\n    public static final int AMBER = 1;\n    public static final int GREEN = 2;\n}\n</code></pre>\n\n<p>But now a variable to hold a color must have type <code>int</code>.  The nice compiler checking of the enum and the <code>static final</code> simulation is gone.  Not happy.</p>\n\n<p>A compromise is to use a scalar-valued member in the simulation:</p>\n\n<pre><code>public class Color {\n    public static final int RED_TAG = 1;\n    public static final int AMBER_TAG = 2;\n    public static final int GREEN_TAG = 3;\n\n    public final int tag;\n\n    private Color(int tag) { this.tag = tag; } \n    public static final Color RED = new Color(RED_TAG);\n    public static final Color AMBER = new Color(AMBER_TAG);\n    public static final Color GREEN = new Color(GREEN_TAG);\n}\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>Color color = ... ;\nswitch (color.tag) {\n    case Color.RED_TAG:\n        ...\n        break;\n}\n</code></pre>\n\n<p>But note, even more boilerplate!</p>\n\n<p><strong>Using an enum as a singleton</strong></p>\n\n<p>From the boilerplate above you can see why an enum provides a way to implement a singleton.  Instead of writing:</p>\n\n<pre><code>public class SingletonClass {\n    public static final void INSTANCE = new SingletonClass();\n    private SingletonClass() {}\n\n    // all the methods and instance data for the class here\n}\n</code></pre>\n\n<p>and then accessing it with</p>\n\n<pre><code>SingletonClass.INSTANCE\n</code></pre>\n\n<p>we can just say</p>\n\n<pre><code>public enum SingletonClass {\n    INSTANCE;\n\n    // all the methods and instance data for the class here\n}\n</code></pre>\n\n<p>which gives us the same thing.  We can get away with this because Java enums <em>are</em> implemented as full classes with only a little syntactic sugar sprinkled over the top.  This is again less boilerplate, but it's non-obvious unless the idiom is familiar to you.  I also dislike the fact that you get the various enum functions even though they don't make much sense for the singleton: <code>ord</code> and <code>values</code>, etc.  (There's actually a trickier simulation where <code>Color extends Integer</code> that will work with switch, but it's so tricky that it even more clearly shows why <code>enum</code> is a better idea.)</p>\n\n<p><strong>Thread safety</strong></p>\n\n<p>Thread safety is a potential problem only when singletons are created lazily with no locking.</p>\n\n<pre><code>public class SingletonClass {\n    private static SingletonClass INSTANCE;\n    private SingletonClass() {}\n    public SingletonClass getInstance() {\n        if (INSTANCE == null) INSTANCE = new SingletonClass();\n        return INSTANCE;\n    }\n\n    // all the methods and instance data for the class here\n}\n</code></pre>\n\n<p>If many threads call <code>getInstance</code> simultaneously while <code>INSTANCE</code> is still null, any number of instances can be created.  This is bad.  The only solution is to add <code>synchronized</code> access to protect the variable <code>INSTANCE</code>.</p>\n\n<p>However, the <code>static final</code> code above does not have this problem.  It creates the instance eagerly at class load time.  Class loading is synchronized.  </p>\n\n<p>The <code>enum</code> singleton is effectively lazy because it's not initialized until first use. Java initialization is also synchronized, so multiple threads can't initialize more than one instance of <code>INSTANCE</code>. You're getting a lazily initialized singleton with very little code. The only negative is the the rather obscure syntax. You need to know the idiom or thoroughly understand how class loading and initialization work to know what's happening.  </p>\n"},{"tags":[],"owner":{"account_id":1705684,"reputation":7431,"user_id":1564766,"accept_rate":15,"display_name":"abishkar bhattarai"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1413492636,"creation_date":1361857321,"answer_id":15082184,"question_id":4709175,"body_markdown":"Enum inherits all the methods of `Object` class and abstract class `Enum`. So you can use it&#39;s methods for reflection, multithreading, serilization, comparable, etc. If you just declare a static constant instead of Enum, you can&#39;t. Besides that, the value of Enum can be passed to DAO layer as well.\r\n\r\nHere&#39;s an example program to demonstrate.\r\n\r\n    public enum State {\r\n    \r\n        Start(&quot;1&quot;),\r\n        Wait(&quot;1&quot;),\r\n        Notify(&quot;2&quot;),\r\n        NotifyAll(&quot;3&quot;),\r\n        Run(&quot;4&quot;),\r\n        SystemInatilize(&quot;5&quot;),\r\n        VendorInatilize(&quot;6&quot;),\r\n        test,\r\n        FrameworkInatilize(&quot;7&quot;);\r\n\r\n        public static State getState(String value) {\r\n            return State.Wait;\r\n        }\r\n\r\n        private String value;\r\n        State test;\r\n\r\n        private State(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n        private State() {\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n\r\n        public void setCurrentState(State currentState) {\r\n            test = currentState;\r\n        }\r\n\r\n        public boolean isNotify() {\r\n            return this.equals(Notify);\r\n        }\r\n    }\r\n\r\n    public class EnumTest {\r\n\r\n        State test;\r\n\r\n        public void setCurrentState(State currentState) {\r\n            test = currentState;\r\n        }\r\n\r\n        public State getCurrentState() {\r\n            return test;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(State.test);\r\n            System.out.println(State.FrameworkInatilize);\r\n            EnumTest test=new EnumTest();\r\n            test.setCurrentState(State.Notify);\r\n            test. stateSwitch();\r\n        }\r\n\r\n        public void stateSwitch() {\r\n            switch (getCurrentState()) {\r\n            case Notify:\r\n                System.out.println(&quot;Notify&quot;);\r\n                System.out.println(test.isNotify());\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"What are enums and why are they useful?","body":"<p>Enum inherits all the methods of <code>Object</code> class and abstract class <code>Enum</code>. So you can use it's methods for reflection, multithreading, serilization, comparable, etc. If you just declare a static constant instead of Enum, you can't. Besides that, the value of Enum can be passed to DAO layer as well.</p>\n\n<p>Here's an example program to demonstrate.</p>\n\n<pre><code>public enum State {\n\n    Start(\"1\"),\n    Wait(\"1\"),\n    Notify(\"2\"),\n    NotifyAll(\"3\"),\n    Run(\"4\"),\n    SystemInatilize(\"5\"),\n    VendorInatilize(\"6\"),\n    test,\n    FrameworkInatilize(\"7\");\n\n    public static State getState(String value) {\n        return State.Wait;\n    }\n\n    private String value;\n    State test;\n\n    private State(String value) {\n        this.value = value;\n    }\n\n    private State() {\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setCurrentState(State currentState) {\n        test = currentState;\n    }\n\n    public boolean isNotify() {\n        return this.equals(Notify);\n    }\n}\n\npublic class EnumTest {\n\n    State test;\n\n    public void setCurrentState(State currentState) {\n        test = currentState;\n    }\n\n    public State getCurrentState() {\n        return test;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(State.test);\n        System.out.println(State.FrameworkInatilize);\n        EnumTest test=new EnumTest();\n        test.setCurrentState(State.Notify);\n        test. stateSwitch();\n    }\n\n    public void stateSwitch() {\n        switch (getCurrentState()) {\n        case Notify:\n            System.out.println(\"Notify\");\n            System.out.println(test.isNotify());\n            break;\n        default:\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1039047,"reputation":623,"user_id":1045512,"accept_rate":55,"display_name":"Abhishek Bhandari"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1532968209,"creation_date":1361869858,"answer_id":15085145,"question_id":4709175,"body_markdown":"Enum? Why should it be used? I think it&#39;s more understood when you will use it. I have the same experience.\r\n\r\nSay you have a create, delete, edit and read database operation.\r\n\r\nNow if you create an enum as an operation:\r\n\r\n    public enum operation {\r\n        create(&quot;1&quot;)\r\n        delete(&quot;2&quot;)\r\n        edit(&quot;3&quot;)\r\n        read(&quot;4&quot;)\r\n\r\n        // You may have is methods here\r\n        public boolean isCreate() {\r\n            return this.equals(create);\r\n        }\r\n        // More methods like the above can be written\r\n\r\n    }\r\n\r\nNow, you may declare something like:\r\n\r\n    private operation currentOperation;\r\n\r\n    // And assign the value for it \r\n    currentOperation = operation.create\r\n\r\nSo you can use it in many ways. It&#39;s always good to have enum for specific things as the database operation in the above example can be controlled by checking the **currentOperation**. Perhaps one can say this can be accomplished with variables and integer values too. But I believe Enum is a safer and a programmer&#39;s way.\r\n\r\nAnother thing: I think every programmer loves **boolean**, don&#39;t we? Because it can store only two values, two specific values. So Enum can be thought of as having the same type of facilities where a user will define how many and what type of value it will store, just in a slightly different way. :)\r\n","title":"What are enums and why are they useful?","body":"<p>Enum? Why should it be used? I think it's more understood when you will use it. I have the same experience.</p>\n\n<p>Say you have a create, delete, edit and read database operation.</p>\n\n<p>Now if you create an enum as an operation:</p>\n\n<pre><code>public enum operation {\n    create(\"1\")\n    delete(\"2\")\n    edit(\"3\")\n    read(\"4\")\n\n    // You may have is methods here\n    public boolean isCreate() {\n        return this.equals(create);\n    }\n    // More methods like the above can be written\n\n}\n</code></pre>\n\n<p>Now, you may declare something like:</p>\n\n<pre><code>private operation currentOperation;\n\n// And assign the value for it \ncurrentOperation = operation.create\n</code></pre>\n\n<p>So you can use it in many ways. It's always good to have enum for specific things as the database operation in the above example can be controlled by checking the <strong>currentOperation</strong>. Perhaps one can say this can be accomplished with variables and integer values too. But I believe Enum is a safer and a programmer's way.</p>\n\n<p>Another thing: I think every programmer loves <strong>boolean</strong>, don't we? Because it can store only two values, two specific values. So Enum can be thought of as having the same type of facilities where a user will define how many and what type of value it will store, just in a slightly different way. :)</p>\n"},{"tags":[],"owner":{"account_id":1845239,"reputation":972,"user_id":1673709,"display_name":"Vishal Verma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361872956,"creation_date":1361872956,"answer_id":15086164,"question_id":4709175,"body_markdown":"There are many answers here, just want to point two specific ones:\r\n\r\n1) Using as constants in `Switch-case` statement.\r\nSwitch case won&#39;t allow you to use String objects for case. Enums come in handy. More: http://www.javabeat.net/2009/02/how-to-use-enum-in-switch/\r\n\r\n2) Implementing `Singleton Design Pattern` - Enum again, comes to rescue. Usage, here: https://stackoverflow.com/questions/427902/what-is-the-best-approach-for-using-an-enum-as-a-singleton-in-java","title":"What are enums and why are they useful?","body":"<p>There are many answers here, just want to point two specific ones:</p>\n\n<p>1) Using as constants in <code>Switch-case</code> statement.\nSwitch case won't allow you to use String objects for case. Enums come in handy. More: <a href=\"http://www.javabeat.net/2009/02/how-to-use-enum-in-switch/\" rel=\"nofollow noreferrer\">http://www.javabeat.net/2009/02/how-to-use-enum-in-switch/</a></p>\n\n<p>2) Implementing <code>Singleton Design Pattern</code> - Enum again, comes to rescue. Usage, here: <a href=\"https://stackoverflow.com/questions/427902/what-is-the-best-approach-for-using-an-enum-as-a-singleton-in-java\">What is the best approach for using an Enum as a singleton in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1574773727,"creation_date":1430226867,"answer_id":29920606,"question_id":4709175,"body_markdown":"Use enums for TYPE SAFETY, this is a language feature so you will usually get:\r\n\r\n - Compiler support (immediately see type issues)\r\n - Tool support in IDEs (auto-completion in switch case, missing cases, force default, ...)\r\n - In some cases enum performance is also great ([EnumSet][1], typesafe alternative to traditional int-based [&quot;bit flags.&quot;][2])\r\n\r\nEnums can have methods, constructors, you can even use enums inside enums and combine enums with interfaces.\r\n\r\nThink of enums as types to replace a well defined set of int constants (which Java &#39;inherited&#39; from C/C++) and in some cases to replace bit flags.\r\n\r\nThe book *Effective Java 2nd Edition* has a whole chapter about them and goes into more details. Also see [this Stack Overflow post][3].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\r\n  [2]: https://stackoverflow.com/questions/7415590/java-integer-flag-and-bitwise-operations-for-memory-reduction\r\n  [3]: https://stackoverflow.com/questions/5092015/advantages-of-javas-enum-over-the-old-typesafe-enum-pattern","title":"What are enums and why are they useful?","body":"<p>Use enums for TYPE SAFETY, this is a language feature so you will usually get:</p>\n\n<ul>\n<li>Compiler support (immediately see type issues)</li>\n<li>Tool support in IDEs (auto-completion in switch case, missing cases, force default, ...)</li>\n<li>In some cases enum performance is also great (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\" rel=\"nofollow noreferrer\">EnumSet</a>, typesafe alternative to traditional int-based <a href=\"https://stackoverflow.com/questions/7415590/java-integer-flag-and-bitwise-operations-for-memory-reduction\">\"bit flags.\"</a>)</li>\n</ul>\n\n<p>Enums can have methods, constructors, you can even use enums inside enums and combine enums with interfaces.</p>\n\n<p>Think of enums as types to replace a well defined set of int constants (which Java 'inherited' from C/C++) and in some cases to replace bit flags.</p>\n\n<p>The book <em>Effective Java 2nd Edition</em> has a whole chapter about them and goes into more details. Also see <a href=\"https://stackoverflow.com/questions/5092015/advantages-of-javas-enum-over-the-old-typesafe-enum-pattern\">this Stack Overflow post</a>.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1512438615,"creation_date":1438335406,"answer_id":31742900,"question_id":4709175,"body_markdown":"`enum` means **enum**eration i.e. mention (a number of things) one by one.\r\n\r\n&gt;An **enum** is a data type that contains fixed set of constants.\r\n\r\nOR\r\n&gt;**An `enum` is just like a `class`, with a fixed set of instances known at compile time.**  \r\n\r\n\r\nFor example:\r\n\r\n    public class EnumExample {\r\n    \tinterface SeasonInt {\r\n    \t\tString seasonDuration();\r\n    \t}\r\n    \t\r\n    \tprivate enum Season implements SeasonInt {\r\n    \t\t// except the enum constants remaining code looks same as class\r\n    \t\t// enum constants are implicitly public static final we have used all caps to specify them like Constants in Java\r\n    \t\tWINTER(88, &quot;DEC - FEB&quot;), SPRING(92, &quot;MAR - JUN&quot;), SUMMER(91, &quot;JUN - AUG&quot;), FALL(90, &quot;SEP - NOV&quot;);\r\n    \t\t\r\n    \t\tprivate int days;\r\n    \t\tprivate String months;\r\n    \t\t\r\n    \t\tSeason(int days, String months) { // note: constructor is by default private \r\n    \t\t\tthis.days = days;\r\n    \t\t\tthis.months = months;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String seasonDuration() {\r\n    \t\t\treturn this+&quot; -&gt; &quot;+this.days + &quot;days,   &quot; + this.months+&quot; months&quot;;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(Season.SPRING.seasonDuration());\r\n    \t\tfor (Season season : Season.values()){\r\n    \t\t\tSystem.out.println(season.seasonDuration());\r\n    \t\t}\r\n    \t\t\t\r\n    \t}\r\n    }\r\n\r\n**Advantages of enum:**  \r\n\r\n- enum improves type safety at compile-time checking to avoid errors at run-time.\r\n- enum can be easily used in switch\r\n- enum can be traversed\r\n- enum can have fields, constructors and methods\r\n- enum may implement many interfaces but cannot extend any class because it internally extends Enum class\r\n\r\nfor [more][1]\r\n\r\n\r\n  [1]: http://www.javatpoint.com/enum-in-java","title":"What are enums and why are they useful?","body":"<p><code>enum</code> means <strong>enum</strong>eration i.e. mention (a number of things) one by one.</p>\n\n<blockquote>\n  <p>An <strong>enum</strong> is a data type that contains fixed set of constants.</p>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n  <p><strong>An <code>enum</code> is just like a <code>class</code>, with a fixed set of instances known at compile time.</strong>  </p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>public class EnumExample {\n    interface SeasonInt {\n        String seasonDuration();\n    }\n\n    private enum Season implements SeasonInt {\n        // except the enum constants remaining code looks same as class\n        // enum constants are implicitly public static final we have used all caps to specify them like Constants in Java\n        WINTER(88, \"DEC - FEB\"), SPRING(92, \"MAR - JUN\"), SUMMER(91, \"JUN - AUG\"), FALL(90, \"SEP - NOV\");\n\n        private int days;\n        private String months;\n\n        Season(int days, String months) { // note: constructor is by default private \n            this.days = days;\n            this.months = months;\n        }\n\n        @Override\n        public String seasonDuration() {\n            return this+\" -&gt; \"+this.days + \"days,   \" + this.months+\" months\";\n        }\n\n    }\n    public static void main(String[] args) {\n        System.out.println(Season.SPRING.seasonDuration());\n        for (Season season : Season.values()){\n            System.out.println(season.seasonDuration());\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>Advantages of enum:</strong>  </p>\n\n<ul>\n<li>enum improves type safety at compile-time checking to avoid errors at run-time.</li>\n<li>enum can be easily used in switch</li>\n<li>enum can be traversed</li>\n<li>enum can have fields, constructors and methods</li>\n<li>enum may implement many interfaces but cannot extend any class because it internally extends Enum class</li>\n</ul>\n\n<p>for <a href=\"http://www.javatpoint.com/enum-in-java\" rel=\"noreferrer\">more</a></p>\n"},{"tags":[],"owner":{"account_id":8098856,"reputation":35,"user_id":6102448,"display_name":"Rahul Prajapat"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1464229067,"creation_date":1464227916,"answer_id":37450345,"question_id":4709175,"body_markdown":"Java lets you restrict variable to having one of only a few predefined values - in other words, one value from an enumerated list.\r\nUsing `enums` can help to reduce bug&#39;s in your code.\r\nHere is an example of `enums` outside a class:\r\n\r\n    enums coffeesize{BIG , HUGE , OVERWHELMING }; \r\n    //This semicolon is optional.\r\n\r\nThis restricts `coffeesize` to having either: `BIG` , `HUGE` , or `OVERWHELMING` as a variable.","title":"What are enums and why are they useful?","body":"<p>Java lets you restrict variable to having one of only a few predefined values - in other words, one value from an enumerated list.\nUsing <code>enums</code> can help to reduce bug's in your code.\nHere is an example of <code>enums</code> outside a class:</p>\n\n<pre><code>enums coffeesize{BIG , HUGE , OVERWHELMING }; \n//This semicolon is optional.\n</code></pre>\n\n<p>This restricts <code>coffeesize</code> to having either: <code>BIG</code> , <code>HUGE</code> , or <code>OVERWHELMING</code> as a variable.</p>\n"},{"tags":[],"owner":{"account_id":8613791,"reputation":3578,"user_id":6451425,"accept_rate":95,"display_name":"Ad Infinitum"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1522149810,"creation_date":1469185037,"answer_id":38524728,"question_id":4709175,"body_markdown":"It is useful to know that `enums` are just like the other classes with `Constant` fields and a `private constructor`.\r\n\r\nFor example,\r\n\r\n    public enum Weekday\r\n    {\r\n      MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY\r\n    } \r\n\r\nThe compiler compiles it as follows;\r\n\r\n    class Weekday extends Enum\r\n    {\r\n      public static final Weekday MONDAY  = new Weekday( &quot;MONDAY&quot;,   0 );\r\n      public static final Weekday TUESDAY = new Weekday( &quot;TUESDAY &quot;, 1 );\r\n      public static final Weekday WEDNESDAY= new Weekday( &quot;WEDNESDAY&quot;, 2 );\r\n      public static final Weekday THURSDAY= new Weekday( &quot;THURSDAY&quot;, 3 );\r\n      public static final Weekday FRIDAY= new Weekday( &quot;FRIDAY&quot;, 4 );\r\n      public static final Weekday SATURDAY= new Weekday( &quot;SATURDAY&quot;, 5 );\r\n      public static final Weekday SUNDAY= new Weekday( &quot;SUNDAY&quot;, 6 );\r\n    \r\n      private Weekday( String s, int i )\r\n      {\r\n        super( s, i );\r\n      }\r\n    \r\n      // other methods...\r\n    }","title":"What are enums and why are they useful?","body":"<p>It is useful to know that <code>enums</code> are just like the other classes with <code>Constant</code> fields and a <code>private constructor</code>.</p>\n\n<p>For example,</p>\n\n<pre><code>public enum Weekday\n{\n  MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY\n} \n</code></pre>\n\n<p>The compiler compiles it as follows;</p>\n\n<pre><code>class Weekday extends Enum\n{\n  public static final Weekday MONDAY  = new Weekday( \"MONDAY\",   0 );\n  public static final Weekday TUESDAY = new Weekday( \"TUESDAY \", 1 );\n  public static final Weekday WEDNESDAY= new Weekday( \"WEDNESDAY\", 2 );\n  public static final Weekday THURSDAY= new Weekday( \"THURSDAY\", 3 );\n  public static final Weekday FRIDAY= new Weekday( \"FRIDAY\", 4 );\n  public static final Weekday SATURDAY= new Weekday( \"SATURDAY\", 5 );\n  public static final Weekday SUNDAY= new Weekday( \"SUNDAY\", 6 );\n\n  private Weekday( String s, int i )\n  {\n    super( s, i );\n  }\n\n  // other methods...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483388909,"creation_date":1481851796,"answer_id":41175989,"question_id":4709175,"body_markdown":"What gave me the Ah-Ha moment was this realization: that Enum has a private constructor only accessible via the public enumeration:\r\n\r\n    enum RGB {\r\n        RED(&quot;Red&quot;), GREEN(&quot;Green&quot;), BLUE(&quot;Blue&quot;);\r\n    \r\n        public static final String PREFIX = &quot;color &quot;;\r\n    \r\n        public String getRGBString() {\r\n            return PREFIX + color;\r\n        }\r\n    \r\n        String color;\r\n    \r\n        RGB(String color) {\r\n            this.color = color;\r\n        }\r\n    }\r\n    \r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            String c = RGB.RED.getRGBString();\r\n            System.out.print(&quot;Hello &quot; + c);\r\n        }\r\n    }\r\n\r\n","title":"What are enums and why are they useful?","body":"<p>What gave me the Ah-Ha moment was this realization: that Enum has a private constructor only accessible via the public enumeration:</p>\n\n<pre><code>enum RGB {\n    RED(\"Red\"), GREEN(\"Green\"), BLUE(\"Blue\");\n\n    public static final String PREFIX = \"color \";\n\n    public String getRGBString() {\n        return PREFIX + color;\n    }\n\n    String color;\n\n    RGB(String color) {\n        this.color = color;\n    }\n}\n\npublic class HelloWorld {\n    public static void main(String[] args) {\n        String c = RGB.RED.getRGBString();\n        System.out.print(\"Hello \" + c);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1003933,"reputation":3792,"user_id":1018154,"display_name":"CodeToLife"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495997025,"creation_date":1495997025,"answer_id":44230786,"question_id":4709175,"body_markdown":"As for me to make the code readable in future the most useful aplyable case  of enumeration is represented in  next snippet: \r\n    \r\n    public enum Items {\r\n        MESSAGES, CHATS, CITY_ONLINE, FRIENDS, PROFILE, SETTINGS, PEOPLE_SEARCH, CREATE_CHAT\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menuPrm) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main, menuPrm);\r\n        View itemChooserLcl;\r\n        for (int i = 0; i &lt; menuPrm.size(); i++) {\r\n            MenuItem itemLcl  = menuPrm.getItem(i);\r\n                itemChooserLcl = itemLcl.getActionView();\r\n                if (itemChooserLcl != null) {\r\n                     //here Im marking each View&#39; tag by enume values:\r\n                    itemChooserLcl.setTag(Items.values()[i]);\r\n                    itemChooserLcl.setOnClickListener(drawerMenuListener);\r\n                }\r\n            }\r\n        return true;\r\n    }\r\n    private View.OnClickListener drawerMenuListener=new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n            Items tagLcl= (Items) v.getTag();\r\n            switch (tagLcl){\r\n                case MESSAGES: ;\r\n                break;\r\n                case CHATS : ;\r\n                break;\r\n                case CITY_ONLINE : ;\r\n                break;\r\n                case FRIENDS : ;\r\n                break;\r\n                case  PROFILE: ;\r\n                break;\r\n                case  SETTINGS: ;\r\n                break;\r\n                case  PEOPLE_SEARCH: ;\r\n                break;\r\n                case  CREATE_CHAT: ;\r\n                break;\r\n            }\r\n        }\r\n    };","title":"What are enums and why are they useful?","body":"<p>As for me to make the code readable in future the most useful aplyable case  of enumeration is represented in  next snippet: </p>\n\n<pre><code>public enum Items {\n    MESSAGES, CHATS, CITY_ONLINE, FRIENDS, PROFILE, SETTINGS, PEOPLE_SEARCH, CREATE_CHAT\n}\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menuPrm) {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.main, menuPrm);\n    View itemChooserLcl;\n    for (int i = 0; i &lt; menuPrm.size(); i++) {\n        MenuItem itemLcl  = menuPrm.getItem(i);\n            itemChooserLcl = itemLcl.getActionView();\n            if (itemChooserLcl != null) {\n                 //here Im marking each View' tag by enume values:\n                itemChooserLcl.setTag(Items.values()[i]);\n                itemChooserLcl.setOnClickListener(drawerMenuListener);\n            }\n        }\n    return true;\n}\nprivate View.OnClickListener drawerMenuListener=new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Items tagLcl= (Items) v.getTag();\n        switch (tagLcl){\n            case MESSAGES: ;\n            break;\n            case CHATS : ;\n            break;\n            case CITY_ONLINE : ;\n            break;\n            case FRIENDS : ;\n            break;\n            case  PROFILE: ;\n            break;\n            case  SETTINGS: ;\n            break;\n            case  PEOPLE_SEARCH: ;\n            break;\n            case  CREATE_CHAT: ;\n            break;\n        }\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11462147,"reputation":21,"user_id":8401479,"display_name":"BradB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501612985,"creation_date":1501612985,"answer_id":45445453,"question_id":4709175,"body_markdown":"In my experience I have seen Enum usage sometimes cause systems to be very difficult to change. If you are using an Enum for a set of domain-specific values that change frequently, and it has a lot of other classes and components that depend on it, you might want to consider *not* using an Enum.\r\n\r\nFor example, a trading system that uses an Enum for markets/exchanges. There are a lot of markets out there and it&#39;s almost certain that there will be a lot of sub-systems that need to access this list of markets. Every time you want a new market to be added to your system, or if you want to remove a market, it&#39;s possible that everything under the sun will have to be rebuilt and released.\r\n\r\nA better example would be something like a product category type. Let&#39;s say your software manages inventory for a department store. There are a lot of product categories, and many reasons why this list of categories could change. Managers may want to stock a new product line, get rid of other product lines, and possibly reorganize the categories from time to time. If you have to rebuild and redeploy all of your systems simply because users want to add a product category, then you&#39;ve taken something that should be simple and fast (adding a category) and made it very difficult and slow.\r\n\r\nBottom line, Enums are good if the data you are representing is very static over time and has a limited number of dependencies. But if the data changes a lot and has a lot of dependencies, then you need something dynamic that isn&#39;t checked at compile time (like a database table).","title":"What are enums and why are they useful?","body":"<p>In my experience I have seen Enum usage sometimes cause systems to be very difficult to change. If you are using an Enum for a set of domain-specific values that change frequently, and it has a lot of other classes and components that depend on it, you might want to consider <em>not</em> using an Enum.</p>\n\n<p>For example, a trading system that uses an Enum for markets/exchanges. There are a lot of markets out there and it's almost certain that there will be a lot of sub-systems that need to access this list of markets. Every time you want a new market to be added to your system, or if you want to remove a market, it's possible that everything under the sun will have to be rebuilt and released.</p>\n\n<p>A better example would be something like a product category type. Let's say your software manages inventory for a department store. There are a lot of product categories, and many reasons why this list of categories could change. Managers may want to stock a new product line, get rid of other product lines, and possibly reorganize the categories from time to time. If you have to rebuild and redeploy all of your systems simply because users want to add a product category, then you've taken something that should be simple and fast (adding a category) and made it very difficult and slow.</p>\n\n<p>Bottom line, Enums are good if the data you are representing is very static over time and has a limited number of dependencies. But if the data changes a lot and has a lot of dependencies, then you need something dynamic that isn't checked at compile time (like a database table).</p>\n"},{"tags":[],"owner":{"account_id":2578107,"reputation":1918,"user_id":2235356,"accept_rate":86,"display_name":"TEH EMPRAH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524925495,"creation_date":1524925495,"answer_id":50077561,"question_id":4709175,"body_markdown":"I would use enums as a useful mapping instrument, avoiding multiple `if-else`\r\nprovided that some methods are implemented.\r\n\r\n    public enum Mapping {\r\n    \r\n        ONE(&quot;1&quot;),\r\n        TWO(&quot;2&quot;);\r\n    \r\n        private String label;\r\n    \r\n        private Mapping(String label){\r\n            this.label = label;\r\n        }\r\n    \r\n        public static Mapping by(String label) {\r\n        \r\n            for(Mapping m: values() {\r\n                if(m.label.equals(label)) return m;\r\n            }\r\n        \r\n            return null;\r\n        }\r\n    \r\n    }\r\n\r\nSo the method `by(String label)` allows you to get the Enumerated value by non-enumerated. Further, one can invent mapping between 2 enums. Could also try &#39;1 to many&#39; or &#39;many to many&#39; in addition to &#39;one to one&#39; default relation\r\n\r\nIn the end, `enum` is a Java class. So you can have `main` method inside it, which might be useful when needing to do some mapping operations on `args` right away.","title":"What are enums and why are they useful?","body":"<p>I would use enums as a useful mapping instrument, avoiding multiple <code>if-else</code>\nprovided that some methods are implemented.</p>\n\n<pre><code>public enum Mapping {\n\n    ONE(\"1\"),\n    TWO(\"2\");\n\n    private String label;\n\n    private Mapping(String label){\n        this.label = label;\n    }\n\n    public static Mapping by(String label) {\n\n        for(Mapping m: values() {\n            if(m.label.equals(label)) return m;\n        }\n\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>So the method <code>by(String label)</code> allows you to get the Enumerated value by non-enumerated. Further, one can invent mapping between 2 enums. Could also try '1 to many' or 'many to many' in addition to 'one to one' default relation</p>\n\n<p>In the end, <code>enum</code> is a Java class. So you can have <code>main</code> method inside it, which might be useful when needing to do some mapping operations on <code>args</code> right away.</p>\n"},{"tags":[],"owner":{"account_id":3945733,"reputation":3836,"user_id":3258462,"accept_rate":46,"display_name":"Vincent Tang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554681203,"creation_date":1554681203,"answer_id":55564680,"question_id":4709175,"body_markdown":"Instead of making a bunch of const int declarations\r\n\r\nYou can group them all in 1 enum\r\n\r\nSo its all organized by the common group they belong to","title":"What are enums and why are they useful?","body":"<p>Instead of making a bunch of const int declarations</p>\n\n<p>You can group them all in 1 enum</p>\n\n<p>So its all organized by the common group they belong to</p>\n"},{"tags":[],"owner":{"display_name":"user10309496"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1575960485,"creation_date":1575960485,"answer_id":59261657,"question_id":4709175,"body_markdown":"Enums are like classes. Like class, it also has methods and attributes.\r\n\r\nDifferences with class are:\r\n1. enum constants are public, static , final. \r\n2. an enum can&#39;t be used to create an object and it can&#39;t extend other classes. But it can implement interfaces.","title":"What are enums and why are they useful?","body":"<p>Enums are like classes. Like class, it also has methods and attributes.</p>\n\n<p>Differences with class are:\n1. enum constants are public, static , final. \n2. an enum can't be used to create an object and it can't extend other classes. But it can implement interfaces.</p>\n"},{"tags":[],"owner":{"account_id":972509,"reputation":697,"user_id":994749,"display_name":"Oleg Poltoratskii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640266884,"creation_date":1580121343,"answer_id":59929399,"question_id":4709175,"body_markdown":"## The enum based singleton\r\n\r\n&gt; a modern look at an old problem\r\n\r\nThis approach implements the singleton by taking advantage of Java&#39;s guarantee that any enum value is instantiated only once in a Java program and enum provides implicit support for thread safety. Since Java enum values are globally accessible, so they can be used as a singleton. \r\n\r\n```java\r\npublic enum Singleton {\r\n    SINGLETON; \r\n    public void method() { }\r\n}\r\n```\r\n\r\nHow does this work? Well, line two of the code may be considered to something like this:\r\n\r\n```java\r\npublic final static Singleton SINGLETON = new Singleton(); \r\n```\r\n\r\nAnd we get good old early initialized singleton.\r\n\r\nRemember that since this is an enum you can always access to the instance via `Singleton. SINGLETON` as well:\r\n\r\n```java\r\nSingleton s = Singleton.SINGLETON;\r\n```\r\n\r\n#### Advantages\r\n\r\n- To prevent creating other instances of singleton during deserialization use enum based singleton because serialization of enum is taken care by JVM. Enum serialization and deserialization work differently than for normal java objects. The only thing that gets serialized is the name of the enum value. During the deserialization process, the enum `valueOf` method is used with the deserialized name to get the desired instance. \r\n- Enum based singleton allows to protect itself from reflection attacks. The enum type actually extends the java `Enum` class. The reason that reflection cannot be used to instantiate objects of enum type is that the java specification disallows and that rule is coded in the implementation of the `newInstance` method of the `Constructor` class, which is usually used for creating objects via reflection:\r\n\r\n```java\r\nif ((clazz.getModifiers() &amp; Modifier.ENUM) != 0)\r\n    throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;);\r\n```\r\n\r\n- Enum is not supposed to be cloned because there must be exactly one instance of each value. \r\n- The most laconic code among all singleton realizations.\r\n\r\n#### Disadvantages\r\n\r\n- The enum based singleton does not allow lazy initialization.\r\n- If you changed your design and wanted to convert your singleton to multiton, enum would not allow this. The multiton pattern is used for the controlled creation of multiple instances, which it manages through the use of a `map`. Rather than having a single instance *per application* (e.g. the `java.lang.Runtime`) the multiton pattern instead ensures a single instance *per key*.\r\n- Enum appears only in Java 5 so you can not use it in the prior version. \r\n\r\n### There are several realizations of singleton pattern each one with advantages and disadvantages.\r\n\r\n- Eager loading singleton\r\n- Double-checked locking singleton\r\n- Initialization-on-demand holder idiom\r\n- The enum based singleton\r\n\r\nA detailed description each of them is too verbose so I just put a link to a good article - [All you want to know about Singleton](http://poltora.info/blog/all-you-want-to-know-about-singleton/)","title":"What are enums and why are they useful?","body":"<h2>The enum based singleton</h2>\n<blockquote>\n<p>a modern look at an old problem</p>\n</blockquote>\n<p>This approach implements the singleton by taking advantage of Java's guarantee that any enum value is instantiated only once in a Java program and enum provides implicit support for thread safety. Since Java enum values are globally accessible, so they can be used as a singleton.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Singleton {\n    SINGLETON; \n    public void method() { }\n}\n</code></pre>\n<p>How does this work? Well, line two of the code may be considered to something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final static Singleton SINGLETON = new Singleton(); \n</code></pre>\n<p>And we get good old early initialized singleton.</p>\n<p>Remember that since this is an enum you can always access to the instance via <code>Singleton. SINGLETON</code> as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Singleton s = Singleton.SINGLETON;\n</code></pre>\n<h4>Advantages</h4>\n<ul>\n<li>To prevent creating other instances of singleton during deserialization use enum based singleton because serialization of enum is taken care by JVM. Enum serialization and deserialization work differently than for normal java objects. The only thing that gets serialized is the name of the enum value. During the deserialization process, the enum <code>valueOf</code> method is used with the deserialized name to get the desired instance.</li>\n<li>Enum based singleton allows to protect itself from reflection attacks. The enum type actually extends the java <code>Enum</code> class. The reason that reflection cannot be used to instantiate objects of enum type is that the java specification disallows and that rule is coded in the implementation of the <code>newInstance</code> method of the <code>Constructor</code> class, which is usually used for creating objects via reflection:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>if ((clazz.getModifiers() &amp; Modifier.ENUM) != 0)\n    throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;);\n</code></pre>\n<ul>\n<li>Enum is not supposed to be cloned because there must be exactly one instance of each value.</li>\n<li>The most laconic code among all singleton realizations.</li>\n</ul>\n<h4>Disadvantages</h4>\n<ul>\n<li>The enum based singleton does not allow lazy initialization.</li>\n<li>If you changed your design and wanted to convert your singleton to multiton, enum would not allow this. The multiton pattern is used for the controlled creation of multiple instances, which it manages through the use of a <code>map</code>. Rather than having a single instance <em>per application</em> (e.g. the <code>java.lang.Runtime</code>) the multiton pattern instead ensures a single instance <em>per key</em>.</li>\n<li>Enum appears only in Java 5 so you can not use it in the prior version.</li>\n</ul>\n<h3>There are several realizations of singleton pattern each one with advantages and disadvantages.</h3>\n<ul>\n<li>Eager loading singleton</li>\n<li>Double-checked locking singleton</li>\n<li>Initialization-on-demand holder idiom</li>\n<li>The enum based singleton</li>\n</ul>\n<p>A detailed description each of them is too verbose so I just put a link to a good article - <a href=\"http://poltora.info/blog/all-you-want-to-know-about-singleton/\" rel=\"nofollow noreferrer\">All you want to know about Singleton</a></p>\n"},{"tags":[],"owner":{"account_id":1693307,"reputation":2936,"user_id":1555261,"accept_rate":77,"display_name":"Nicolas Voron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582899407,"creation_date":1582899407,"answer_id":60453542,"question_id":4709175,"body_markdown":"In addition to @BradB Answer :\r\n\r\nThat is so true... It&#39;s strange that it is the only answer who mention that. When  beginners discover enums, they quickly take that as a magic-trick for valid identifier checking for the compiler. And when the code is intended to be use on distributed systems, they cry... some month later. Maintain backward compatibility with enums that contains non static list of values is a real concern, and pain. This is because when you add a value to an existing enum, its type change (despite the name does not). \r\n\r\n&quot;Ho, wait, it may look like the same type, right? After all, they’re enums with the same name – and aren’t enums just integers under the hood?&quot; And for these reasons, your compiler will likely not flag the use of one definition of the type itself where it was expecting the other. But in fact, they are (in most important ways) different types. Most importantly, they have different data domains – values that are acceptable given the type. By adding a value, we’ve effectively changed the type of the enum and therefore break backward compatibility.\r\n\r\nIn conclusion : Use it when you want, but, please, **check that the data domain used is a finite, already known, fixed set**.","title":"What are enums and why are they useful?","body":"<p>In addition to @BradB Answer :</p>\n\n<p>That is so true... It's strange that it is the only answer who mention that. When  beginners discover enums, they quickly take that as a magic-trick for valid identifier checking for the compiler. And when the code is intended to be use on distributed systems, they cry... some month later. Maintain backward compatibility with enums that contains non static list of values is a real concern, and pain. This is because when you add a value to an existing enum, its type change (despite the name does not). </p>\n\n<p>\"Ho, wait, it may look like the same type, right? After all, they’re enums with the same name – and aren’t enums just integers under the hood?\" And for these reasons, your compiler will likely not flag the use of one definition of the type itself where it was expecting the other. But in fact, they are (in most important ways) different types. Most importantly, they have different data domains – values that are acceptable given the type. By adding a value, we’ve effectively changed the type of the enum and therefore break backward compatibility.</p>\n\n<p>In conclusion : Use it when you want, but, please, <strong>check that the data domain used is a finite, already known, fixed set</strong>.</p>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694395417,"creation_date":1694192781,"answer_id":77068742,"question_id":4709175,"body_markdown":"There&#39;s a lot of answers on this page, and almost all of them are outdated. Here is a comprehensive and exhaustive overview of the benefits of enums in Java, from a 2023 perspective.\r\n\r\n---\r\nBasics about Enums\r\n===\r\n\r\nWhat are Enums?\r\n---\r\nAn [Enumerated Type][1], also known as an Enum, is a very special data type where every single one of the values in its domain has a name (and usually, an index too).\r\n\r\nA normal data type has values, but doesn&#39;t bother naming or numbering each value. An enum data type, on the other hand, [enumerates][2] every single one of its values, hence the name.\r\n\r\nAlso, an enum data type has a fixed number of instances that will ever exist for it. Meaning, if I say my enum data type called `Direction` has the values `NORTH`, `SOUTH`, `EAST`, and `WEST`, then that means that those 4 values are the ***only possible values*** that that enum data type can ever have (until we edit the code and recompile).\r\n\r\nWhy are they useful?\r\n---\r\n\r\nAt first glance, naming and indexing values doesn&#39;t seem too useful. However, there at least 3 special abilities that you get for doing so.\r\n\r\n* **Value Safety** - You can create a custom domain that only contains meaningful values.\r\n\r\n  * Before we had enums, we would treat a number as our value-carrier. For an example, in the `Direction` example from above, we would say `NORTH` is `0`, `EAST` is `1`, and so on. So, if I had a function that needed to take in a direction, I would just give that function a number parameter and then treat the different number values as if they represented a direction. But what happens if you pass in an `87`? There&#39;s only 4 values! That is what Value Safety protects us against -- if we just use a number to represent our value, we run the risk of accidentally using an invalid number, causing our code to break at runtime. We can&#39;t catch the error at compile-time because all our code knows is that we are giving it a number. It has no way of knowing which numbers are valid or invalid at compile-time. Value Safety means that we don&#39;t pass in a number anymore - we pass in an enum value, which, in my `Direction` example, can only be one of my 4 values. If I try to pass in something that is not one of my 4 values, I get a compiler error, and that&#39;s exactly what I want.\r\n\r\n* **Type Safety** - Since it is a data type, you can prevent it from accidentally being confused for another data type.\r\n\r\n  * Going back to the number point from before, let&#39;s say I have another data type called `Orientation`, with the values `UP`, `DOWN`, `LEFT`, and `RIGHT`. Now, if `Orientation` had been represented with numbers, `UP` would be `0`, `DOWN` would be `1`, etc. And let&#39;s say I have a function that asks for a `Direction`. Let&#39;s also say that I make a mistake and pass in `Orientation.UP`, when I actually meant to pass in `Direction.NORTH`. Well, by pure coincidence, my bug will not cause me pain (yet) because both values evaluate to `0`. So, by accident, I got exactly what I wanted. But what if I actually wanted to enter `Direction.SOUTH`, but accidentally entered `Orientation.DOWN`? Well now the bug will cause me pain because `Orientation.DOWN` is `1`, but `1` corresponds to `Direction.EAST`! This is a good example of the type of tricky bugs we would run into when using numbers as our value carriers. But, if we use enums to represent both, our code will catch the bug at compile-time because you can&#39;t use give the function an `Orientation` when it asked for a `Direction`. That is what type safety is - it prevents us from accidentally using one data type when we meant another.\r\n\r\n      * I would check out this link for more details about Type Safety and Value Safety -- https://stackoverflow.com/questions/76943052/differences-between-type-safety-and-value-safety\r\n\r\n* **Bounded and Indexed Domain** - Enums allow you to specify at compile time ***EXACTLY*** how many instances of that type will exist at runtime. And not a minimum or maximum, but the exact number. They will all be instantiated the first time that you use the enum, like calling a method or referencing one of its fields or enum values. Knowing the number of instances gives you some ***POWERFUL*** guarantees. However, most (non-JVM) languages don&#39;t really take full advantage of this part. They might have a method that returns the whole domain, or fetches objects by index (useful for Random Number Generators), but that&#39;s usually the extent of their reach.\r\n  * I&#39;ll be exploring these guarantees in WAY MORE DEPTH later in this answer, but for the Java section. Like I said, most (non-JVM) programming languages don&#39;t take enough advantage of these guarantees. Java takes these guarantees further than any other non-JVM language on the market, so I will save those benefits for later.\r\n---\r\nJava Enums\r\n===\r\n\r\nHow are &quot;Java Enums&quot; different than other Enums? They are Classes too!\r\n---\r\n\r\n[Java Enums][3] follow all the rules I described earlier. They have Type Safety, Value Safety, and they have a Bounded and Indexed Domain.\r\n\r\nHowever, Java Enums have one simple attribute that puts them on the bleeding edge of capability compared to all other non-JVM languages -- ***Almost anything a final class can do, a Java Enum can do too***.\r\n\r\n  * **Final Classes can have instance fields? So can Java Enums!**\r\n\r\n    * If I were to make a [`CardSuit`][4] enum, not only can I have values `HEART`, `SPADE`, `CLUB`, and `DIAMOND` -- I could also give each of those values a `String` instance field that could hold the Emoji symbol for their respective Suit, simplifying my UI!\r\n\r\n```\r\nenum CardSuit\r\n{\r\n\r\n    HEART(&quot;♥️&quot;), //&lt;--- Yes, Java Strings can hold emoji characters!\r\n    SPADE(&quot;♠️&quot;),\r\n    DIAMOND(&quot;♦️&quot;),\r\n    CLUB(&quot;♣️&quot;), //&lt;--- Trailing commas are allowed in Java Enums.\r\n    ;\r\n\r\n    public final String symbol;\r\n\r\n    CardSuit(final String symbol)\r\n    {\r\n\r\n        this.symbol = symbol;\r\n\r\n    }\r\n\r\n}\r\n\r\n//Later on, I can call it like this.\r\n\r\nfinal String symbol = CardSuit.SPADE.symbol;\r\n```\r\n\r\n  * **Final Classes can have instance methods? So can Java Enums!**\r\n\r\n    * If I were to make a `Operator` enum, not only can I have values `GREATER_THAN`, `LESS_THAN`, and `EQUAL_TO` -- I could also give each of those values a `permits(int actualValue, int significantValue)` method that could perform the calculation! This is an ***EXTREMELY*** powerful tactic because you basically captured the [Strategy Pattern][5] in its purest and simplest form.\r\n\r\n      * Special credit to this answer, this is another really good example of the strategy pattern in play -- https://stackoverflow.com/a/15076852/10118965\r\n\r\n```\r\nenum Operator\r\n{\r\n\r\n   GREATER_THAN,\r\n   GREATER_THAN_OR_EQUAL_TO,\r\n   LESS_THAN,\r\n   LESS_THAN_OR_EQUAL_TO,\r\n   EQUAL_TO,\r\n   NOT_EQUAL_TO,\r\n   ;\r\n   \r\n   public boolean permits(final int actualValue, final int significantValue)\r\n   {\r\n   \r\n      return \r\n         switch (this)\r\n         {\r\n         \r\n            case GREATER_THAN             -&gt; actualValue &gt;  significantValue;\r\n            case GREATER_THAN_OR_EQUAL_TO -&gt; actualValue &gt;= significantValue;\r\n            case LESS_THAN                -&gt; actualValue &lt;  significantValue;\r\n            case LESS_THAN_OR_EQUAL_TO    -&gt; actualValue &lt;= significantValue;\r\n            case EQUAL_TO                 -&gt; actualValue == significantValue;\r\n            case NOT_EQUAL_TO             -&gt; actualValue != significantValue;\r\n         \r\n         }\r\n         ;\r\n   \r\n   }\r\n   \r\n}\r\n```\r\n\r\n* **Final Classes can have static fields and methods? So can Java Enums!**\r\n\r\n    * If I were to make a `Shop` enum where each enum value has a `String` location, I could create a static method `fetchByLocation(String location)` to filter my results down to the ones that matter!\r\n\r\n```\r\nimport java.util.*;\r\n\r\nenum Shop\r\n{\r\n\t\r\n\tShopA(&quot;Town 1&quot;),\r\n\tShopB(&quot;Town 1&quot;),\r\n\tShopC(&quot;Town 4&quot;),\r\n\tShopD(&quot;Town 2&quot;),\r\n\tShopE(&quot;Town 5&quot;),\r\n\tShopF(&quot;Town 3&quot;),\r\n\tShopG(&quot;Town 6&quot;),\r\n\tShopH(&quot;Town 2&quot;),\r\n\tShopI(&quot;Town 6&quot;),\r\n\t;\r\n\t\r\n    //This is how you do static fields!\r\n    public static final String COUNTRY_NAME = &quot;SomeName&quot;;\r\n    //You can even have static initialization blocks! Not shown here.\r\n\r\n\tpublic final String location;\r\n\t\r\n\tShop(final String location)\r\n\t{\r\n\t\t\r\n\t\tthis.location = location;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static List&lt;Shop&gt; fetchByLocation(final String location)\r\n\t{\r\n\t\t\r\n\t\tfinal List&lt;Shop&gt; shops = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor (final Shop eachShop : shops)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tif (eachShop.location.equals(location))\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t\tshops.add(eachShop);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn shops;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n* **Final Classes can implement Interfaces? So can Java Enums!**\r\n\r\n  * I know I already used this before, but I am just going to steal the code from this answer (https://stackoverflow.com/a/15076852/10118965), since it captures the intent so perfectly.\r\n\r\n  * Also, since enums can have Interfaces, then they can also have abstract methods too! In this example, you could achieve this by just removing `implements Comparator&lt;String&gt;` from the top, and then in the body, adding `public abstract int compare(String s1, String s2);` as if it was an instance method, like I showed above.\r\n\r\n  * Also, unlike Final Classes, enum values can be Anonymous Classes, should you want to create part of the implementation inline. In some instances, that can simplify things.\r\n\r\n```\r\nenum StringComparator implements Comparator&lt;String&gt; {\r\n    NATURAL {\r\n        @Override\r\n        public int compare(String s1, String s2) {\r\n            return s1.compareTo(s2);\r\n        }\r\n    },\r\n    REVERSE {\r\n        @Override\r\n        public int compare(String s1, String s2) {\r\n            return NATURAL.compare(s2, s1);\r\n        }\r\n    },\r\n    LENGTH {\r\n        @Override\r\n        public int compare(String s1, String s2) {\r\n            return new Integer(s1.length()).compareTo(s2.length());\r\n        }\r\n    };\r\n}\r\n```\r\n\r\n*Please note though, the only thing that Final Classes can do that Java Enums cannot do is to have a class level Type Parameter. Here is a post going into better detail about why they can&#39;t* -- https://stackoverflow.com/questions/76983559/generics-in-enum-for-complex-type-checking/76984724#76984724\r\n\r\n**Of course, you can still put generics on your enum methods all you please, they just can&#39;t refer to a class-level type parameter.**\r\n\r\nWhat else can Java Enums do?\r\n---\r\n\r\nThere&#39;s so much more! Back in the **Bounded and Indexed Domain** section, I mentioned that Enums allow you to specify at compile time ***EXACTLY*** how many instances of that type will exist at runtime. I also said that knowing the number of instances ***at compile-time*** gives you some ***POWERFUL*** guarantees. Here are some of those benefits now.\r\n\r\n  * **Singletons (and Multi-tons)**\r\n    * Enums are not only the best way to create singletons in Java (so far), but the officially encouraged way. If you want only one instance of an object, you should be using an enum, and not handrolling a singleton yourself.\r\n  * **Helper Methods**\r\n    * Enums come pre-baked with some helpful methods. For example, consider the enum [`java.time.DayOfWeek`][6] -- it models the days of the week -- Monday, Tuesday, etc. Here are some of the helpful methods that are ***automatically included, just because it is an enum***. Every other enum that you make will have these methods included by default too.\r\n      * [`valueOf(String name)`][7] -- If someone sends you a `String`, and you want to turn that into your Enum, simply call the static method `valueOf` that automatically comes with your enum. The `String` must exactly match your enum value&#39;s name. But if it does, then it&#39;s simple, easy deserialization.\r\n      * [`name()`][8] -- Alternatively, this method will take the enum value (Monday, Tuesday, etc) and turn it into a `String` that exactly matches the enum values name. The previous method demonstrated simple, easy deserialization. This method is for simple, easy serialization.\r\n      * [`values()`][9] -- If you want an array of all values ***in order***, then you can just call this method. In this case, it will return an array containing all the days of the week, starting from MONDAY. This is good for looping or fetching an enum value by index.\r\n      * [`compareTo(E other)`][10] -- All enums are [`Comparable&lt;E&gt;`][11] by default. So, you can easily tell whether the enum value in your hand comes before or after another enum value.\r\n      * [`ordinal()`][12] -- And in case you just want the positional index of the enum value (maybe you want to randomly choose from any of the enum values), you can just call this method to get the enum&#39;s positional index. This may not seem that useful, but it has shockingly powerful uses.\r\n  * **Enum Collections**\r\n    * Enums have ***EXTREMELY FAST*** and memory-optimized versions of [`java.util.Set`][13] and [`java.util.Map`][14] -- respectfully called [`java.util.EnumSet`][15] and [`java.util.EnumMap`][16].\r\n      * To give an example of just how fast is fast, I did some (completely rudimentary and informal) performance tests, and I found `EnumMap` to be over ***3 times faster*** than [`java.util.HashMap`][17]. And roughly 15% faster than [`java.util.IdentityHashMap`][18], which is the non-enum equivalent of `EnumMap`. If you have an enum and you need a set or a map whose keys are the enum, then you need a reason to NOT use the enum variants. You should be using them by default when working with enums. It&#39;s a free performance boost.\r\n        * And if that wasn&#39;t good enough, both of these enum-variants are actually ***ORDERED***, which means that comparing `EnumMap` to `HashMap` and `IdentityHashMap` is an unfair comparison (for `EnumMap`!) because `EnumMap` is actually providing way more functionality and abilities than the hash variants. A &quot;fair&quot; comparison would be comparing `EnumMap` to [`java.util.TreeMap`][19], which is even ***SLOWER*** than `HashMap` and `IdentityHashMap`. I hope you see just how insanely powerful these enum variants are compared to the rest of the `Collection` library.\r\n      * And don&#39;t forget, I said they are also memory-optimized too. So not only are you getting the best performance that the `Collection` library has to offer, you are also getting one of the lightest memory-costs in the library too.\r\n      * The reason for all of this speed and lightweight memory is ***because we know EXACTLY HOW MANY INSTANCES THERE ARE*** at ***compile-time***. Knowing this means that we have optimization strategies that physically aren&#39;t possible for any of the other collections.\r\n        * These enum-variants are able to represent inclusion using a `byte[]` (or a bit vector, which is very similar). For example, in `EnumSet`, it uses the enum&#39;s `ordinal()` method to be able to represent indexes in an array, and then just puts a 0 or a 1 to indicate whether or not the matching enum value is present in the set (I told you that `ordinal()` method had shockingly powerful uses). It is this `byte[]` that makes them so unbelievably fast and lightweight, because a `byte[]` is unbelievably fast and lightweight.\r\n\r\nHow well do Java Enums get along with other Java features?\r\n---\r\n\r\nExtremely well! Java as a language prioritizes cohesiveness. That means that a feature that is added to the language should play nicely with all other features. Enums are no exception to this. So as a result, anywhere that you can use a Final Class, you can use an Enum there too!\r\n\r\nHowever, there are some special interactions between Enums and other features of Java. Those interactions are what I will highlight in this section.\r\n\r\n*I should also mention, this is the part of the post that is more 2023 focused. As new features have been added, there have been more features for Java Enums to have special interactions with.*\r\n\r\n***As a very quick note, I will reemphasize what I said before - pretty much the only feature that Java Enums don&#39;t get along perfectly with is generics, and even then, it&#39;s only class-level generics. Anything not class-level works beautifully.***\r\n\r\n* **Enums + [Switch][20] = Single-Type Exhaustiveness Checking**\r\n  * Since we know the exact number of values that an enum data type can have at compile time, that gives the compiler a special ability when using a switch expression/statement.\r\n    * If the value we are switching over is an enum, then a switch expression/statement will give you the option to opt into [Exhaustiveness Checking (Ctrl+F &quot;Exhaustiveness of switch Expressions&quot;)][21]\r\n      * Exhaustiveness checking is a special ability that says, if all of the case labels in our switch expression/statement cover the full domain of possible values for what we are switching over (with the exception of null), then our switch is considered exhaustive. This is ***EXTREMELY POWERFUL***. Let&#39;s say that I use my `Direction` enum again. But let&#39;s say that I add the diagonal values to it -- `NORTHEAST`, `SOUTHEAST`, etc. If I have a switch expression that switches on an enum value, then that means that that code won&#39;t compile unless I cover every single case. So, back when my `Direction` enum only had 4 values, that meant I only needed 4 case labels. As long as I have those 4 case labels, my enum compiles. But once I add the 4 diagonals as well, bringing my total up to 8, that switch expression will no longer compile because it is no longer exhaustive. This is ***HUGE*** because it completely eliminates those I-changed-it-here-but-forgot-to-change-it-there type of bugs that everyone runs into all the time.\r\n    * Of course, if you do not want Exhaustiveness Checking, you can easily opt out of it by just using a `default` clause. Simply mention what the default behaviour should be if you don&#39;t match any of the other case labels, and then you will be good to go. That said, it is strongly encouraged to NOT opt out. Simply update the enum to mention what it should do in those instances by adding do nothing (or, do the same thing) case labels. Of course, if that is not an option for you, or it is simply too inconvenient (library maintainers), then by all means, that is what the default clause is for.\r\n\r\n* **Enums + [Switch Patterns][22] + [Sealed Types][23] = Multi-Type Exhaustiveness Checking**\r\n\r\n  * Sometimes, we have an enum that we would like to break up into multiple parts, but we still want to get Exhaustiveness Checking. In situations such as those, the solution is to include Sealed Types and Switch Patterns to the mix.\r\n    * A Sealed Type is a type where only a fixed number of types can extend it, and those types are known at compile-time.\r\n    * A Switch Pattern is a switch statement/expression where the case labels don&#39;t hold constants, they hold type patterns. A type pattern is where we test a value to see if it is assignable to a type. If so, we create a new variable of the focused type, and assign the value to that variable. Read more in the link above for Switch Patterns.\r\n      * To demonstrate all 3 of these combined, let&#39;s say I have an enum `Alphabet`. It has 26 values -- the 26 letters of the English Language. But what if I want to distinguish between vowels and consonants? Well, all I need to do is to turn my `Alphabet` enum into a Sealed Interface that only permits 2 other enums -- `Consonant` and `Vowel`. From there, I provide `Vowel` with the 5 vowels, and then put the rest of the `Alphabet` values into `Consonant`. Once I have that, I can switch over an instance of `Alphabet`, and still get exhaustiveness checking, while being able to &quot;chunk&quot; my Exhaustiveness Checks by type. If I want to handle all instances of `Consonant` in the same way while handling instances of `Vowel` individually, I can simply pass in the type `Consonant` as one of my type patterns for a single case label, and then the other case labels will be for each value of `Vowel`. This will still give me Exhaustiveness Checking, but allowing me to focus it on the parts that matter.\r\n\r\n* More (potentially, not certainly) coming in the future!\r\n\r\n  * In the future, it is extremely likely that we will get Constant Patterns. That means that, anywhere that we do pattern-matching, we will be able to pass in our enum value as a Constant Pattern. In that situation, enums will become exponentially more valuable, as that will give us yet another form of Exhaustiveness Checking that currently isn&#39;t possible.\r\n\r\nThe Tradeoffs when using Java Enums\r\n===\r\n\r\nSacrifices\r\n---\r\n\r\nAs you can see, Java Enums are powerful and flexible. There are so many use cases, and they extend into a lot of different domains. They have abilities that are unique (not just within Java, but amongst all non-JVM languages).\r\n\r\nThat said, everything that is good about enums comes because we make sacrifices along the way. **We don&#39;t just get this stuff for free - there is a cost. There always is a cost**.\r\n\r\nThe Costs of using Java Enums\r\n---\r\n\r\nAs mentioned, Java Enums charge a tax for their use, much like every feature in the Java language.\r\n\r\n* If you want to add/remove/update a value in your Java Enum, you may have to recompile code that does Exhaustiveness Checking.\r\n\r\n  * You could argue that this is a feature, not a bug. I certainly agree. But bug or not, it is a price you must pay. If you decide that you want your `Direction` enum to have diagonals, then you must recompile your switch expressions that don&#39;t have defaults or catch-all&#39;s. At that point, it becomes a question of whether or not it is worth it for you to not have the default clause.\r\n\r\n* Enums are ***Final*** Classes, not just Classes\r\n\r\n  * Since enums are FINAL Classes, that means that they cannot be extended. This limits their applicability in a few ways, but for good reason. After all, if your enum can be arbitrarily extended, how would you go about implementing `values()` or `ordinal()`?\r\n\r\nWhen should we use Java Enums?\r\n---\r\n\r\nJava Enums are best used when the following 3 things are true.\r\n\r\n1. **You know all the values of a type at compile-time**\r\n\r\n    - This means that whatever domain you are trying to model is a domain where you, the person consuming this information, can think through every single possible value in the domain. A good example might be an enum for the months of a year. You can think up all 12 months, so that means that we know all the values of the `Month` type at compile-time.\r\n\r\n2. **The number of values is &quot;small enough&quot;**\r\n\r\n    - One user on this thread mentioned that you don&#39;t want to put Days of the year into an enum because there are 2 many values (366). I respectfully disagree, but every person&#39;s boundary for what is too much is different.\r\n\r\n        - That said, there is a limit to maximum number of enum values you can include. If I&#39;m not mistaken, Java says that all class files can not have more than ~65k fields. So, if your enum has fields, there&#39;s your answer. And for me, I have found that I start hitting the limit once my enum gets over 2k values (my enum has multiple values). That said, if you find yourself reaching the thousands, chances are good that the work you are doing has simply gotten too big for an enum to handle. Time to reach in and find a better tool.\r\n\r\n3. **You will never change the enum values -- OR, your enum values change *in*frequently enough that your end users are fine potentially recompiling when the change happens.**\r\n\r\n    - Consider the `Planet` enum. That is a good candidate for an enum. All of its values are known at runtime, and it&#39;s certainly small enough. And at first glance, this seems to be an unchanging enum. But as it turns out, this one actually did need to change in the past -- when we turned Pluto from a Planet to a Dwarf Planet. I don&#39;t know the context, but I would assume that most users are fine swapping their program when it becomes clear that Pluto was no longer a Planet. Again, judge how quickly your users are willing and able to recompile their code. Then compare that to how likely and frequently you plan to update and change the enum. If change is more frequent than what your users desire, there is your answer.\r\n    - Also, users are a lot more likely to recompile if you remove or modify enum values. Adding enum values are less likely to require a code change. If you only plan to add enum values, you should feel more confident storing this data as an enum.\r\n\r\nPlease let me know if there are any questions.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Enumerated_type\r\n  [2]: https://www.merriam-webster.com/dictionary/enumerate\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [4]: https://en.wikipedia.org/wiki/Playing_card_suit\r\n  [5]: https://en.wikipedia.org/wiki/Strategy_pattern\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html#valueOf(java.lang.String)\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#name()\r\n  [9]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html#values()\r\n  [10]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#compareTo(E)\r\n  [11]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html\r\n  [12]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#ordinal()\r\n  [13]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\r\n  [14]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html\r\n  [15]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/EnumSet.html\r\n  [16]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/EnumMap.html\r\n  [17]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\r\n  [18]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/IdentityHashMap.html\r\n  [19]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TreeMap.html\r\n  [20]: https://openjdk.org/jeps/361\r\n  [21]: https://docs.oracle.com/en/java/javase/20/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC\r\n  [22]: https://openjdk.org/jeps/441\r\n  [23]: https://openjdk.org/jeps/409","title":"What are enums and why are they useful?","body":"<p>There's a lot of answers on this page, and almost all of them are outdated. Here is a comprehensive and exhaustive overview of the benefits of enums in Java, from a 2023 perspective.</p>\n<hr />\n<h1>Basics about Enums</h1>\n<h2>What are Enums?</h2>\n<p>An <a href=\"https://en.wikipedia.org/wiki/Enumerated_type\" rel=\"nofollow noreferrer\">Enumerated Type</a>, also known as an Enum, is a very special data type where every single one of the values in its domain has a name (and usually, an index too).</p>\n<p>A normal data type has values, but doesn't bother naming or numbering each value. An enum data type, on the other hand, <a href=\"https://www.merriam-webster.com/dictionary/enumerate\" rel=\"nofollow noreferrer\">enumerates</a> every single one of its values, hence the name.</p>\n<p>Also, an enum data type has a fixed number of instances that will ever exist for it. Meaning, if I say my enum data type called <code>Direction</code> has the values <code>NORTH</code>, <code>SOUTH</code>, <code>EAST</code>, and <code>WEST</code>, then that means that those 4 values are the <em><strong>only possible values</strong></em> that that enum data type can ever have (until we edit the code and recompile).</p>\n<h2>Why are they useful?</h2>\n<p>At first glance, naming and indexing values doesn't seem too useful. However, there at least 3 special abilities that you get for doing so.</p>\n<ul>\n<li><p><strong>Value Safety</strong> - You can create a custom domain that only contains meaningful values.</p>\n<ul>\n<li>Before we had enums, we would treat a number as our value-carrier. For an example, in the <code>Direction</code> example from above, we would say <code>NORTH</code> is <code>0</code>, <code>EAST</code> is <code>1</code>, and so on. So, if I had a function that needed to take in a direction, I would just give that function a number parameter and then treat the different number values as if they represented a direction. But what happens if you pass in an <code>87</code>? There's only 4 values! That is what Value Safety protects us against -- if we just use a number to represent our value, we run the risk of accidentally using an invalid number, causing our code to break at runtime. We can't catch the error at compile-time because all our code knows is that we are giving it a number. It has no way of knowing which numbers are valid or invalid at compile-time. Value Safety means that we don't pass in a number anymore - we pass in an enum value, which, in my <code>Direction</code> example, can only be one of my 4 values. If I try to pass in something that is not one of my 4 values, I get a compiler error, and that's exactly what I want.</li>\n</ul>\n</li>\n<li><p><strong>Type Safety</strong> - Since it is a data type, you can prevent it from accidentally being confused for another data type.</p>\n<ul>\n<li><p>Going back to the number point from before, let's say I have another data type called <code>Orientation</code>, with the values <code>UP</code>, <code>DOWN</code>, <code>LEFT</code>, and <code>RIGHT</code>. Now, if <code>Orientation</code> had been represented with numbers, <code>UP</code> would be <code>0</code>, <code>DOWN</code> would be <code>1</code>, etc. And let's say I have a function that asks for a <code>Direction</code>. Let's also say that I make a mistake and pass in <code>Orientation.UP</code>, when I actually meant to pass in <code>Direction.NORTH</code>. Well, by pure coincidence, my bug will not cause me pain (yet) because both values evaluate to <code>0</code>. So, by accident, I got exactly what I wanted. But what if I actually wanted to enter <code>Direction.SOUTH</code>, but accidentally entered <code>Orientation.DOWN</code>? Well now the bug will cause me pain because <code>Orientation.DOWN</code> is <code>1</code>, but <code>1</code> corresponds to <code>Direction.EAST</code>! This is a good example of the type of tricky bugs we would run into when using numbers as our value carriers. But, if we use enums to represent both, our code will catch the bug at compile-time because you can't use give the function an <code>Orientation</code> when it asked for a <code>Direction</code>. That is what type safety is - it prevents us from accidentally using one data type when we meant another.</p>\n<ul>\n<li>I would check out this link for more details about Type Safety and Value Safety -- <a href=\"https://stackoverflow.com/questions/76943052/differences-between-type-safety-and-value-safety\">Differences between type-safety and value-safety</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Bounded and Indexed Domain</strong> - Enums allow you to specify at compile time <em><strong>EXACTLY</strong></em> how many instances of that type will exist at runtime. And not a minimum or maximum, but the exact number. They will all be instantiated the first time that you use the enum, like calling a method or referencing one of its fields or enum values. Knowing the number of instances gives you some <em><strong>POWERFUL</strong></em> guarantees. However, most (non-JVM) languages don't really take full advantage of this part. They might have a method that returns the whole domain, or fetches objects by index (useful for Random Number Generators), but that's usually the extent of their reach.</p>\n<ul>\n<li>I'll be exploring these guarantees in WAY MORE DEPTH later in this answer, but for the Java section. Like I said, most (non-JVM) programming languages don't take enough advantage of these guarantees. Java takes these guarantees further than any other non-JVM language on the market, so I will save those benefits for later.</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h1>Java Enums</h1>\n<h2>How are &quot;Java Enums&quot; different than other Enums? They are Classes too!</h2>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow noreferrer\">Java Enums</a> follow all the rules I described earlier. They have Type Safety, Value Safety, and they have a Bounded and Indexed Domain.</p>\n<p>However, Java Enums have one simple attribute that puts them on the bleeding edge of capability compared to all other non-JVM languages -- <em><strong>Almost anything a final class can do, a Java Enum can do too</strong></em>.</p>\n<ul>\n<li><p><strong>Final Classes can have instance fields? So can Java Enums!</strong></p>\n<ul>\n<li>If I were to make a <a href=\"https://en.wikipedia.org/wiki/Playing_card_suit\" rel=\"nofollow noreferrer\"><code>CardSuit</code></a> enum, not only can I have values <code>HEART</code>, <code>SPADE</code>, <code>CLUB</code>, and <code>DIAMOND</code> -- I could also give each of those values a <code>String</code> instance field that could hold the Emoji symbol for their respective Suit, simplifying my UI!</li>\n</ul>\n</li>\n</ul>\n<pre><code>enum CardSuit\n{\n\n    HEART(&quot;♥️&quot;), //&lt;--- Yes, Java Strings can hold emoji characters!\n    SPADE(&quot;♠️&quot;),\n    DIAMOND(&quot;♦️&quot;),\n    CLUB(&quot;♣️&quot;), //&lt;--- Trailing commas are allowed in Java Enums.\n    ;\n\n    public final String symbol;\n\n    CardSuit(final String symbol)\n    {\n\n        this.symbol = symbol;\n\n    }\n\n}\n\n//Later on, I can call it like this.\n\nfinal String symbol = CardSuit.SPADE.symbol;\n</code></pre>\n<ul>\n<li><p><strong>Final Classes can have instance methods? So can Java Enums!</strong></p>\n<ul>\n<li><p>If I were to make a <code>Operator</code> enum, not only can I have values <code>GREATER_THAN</code>, <code>LESS_THAN</code>, and <code>EQUAL_TO</code> -- I could also give each of those values a <code>permits(int actualValue, int significantValue)</code> method that could perform the calculation! This is an <em><strong>EXTREMELY</strong></em> powerful tactic because you basically captured the <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">Strategy Pattern</a> in its purest and simplest form.</p>\n<ul>\n<li>Special credit to this answer, this is another really good example of the strategy pattern in play -- <a href=\"https://stackoverflow.com/a/15076852/10118965\">https://stackoverflow.com/a/15076852/10118965</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code>enum Operator\n{\n\n   GREATER_THAN,\n   GREATER_THAN_OR_EQUAL_TO,\n   LESS_THAN,\n   LESS_THAN_OR_EQUAL_TO,\n   EQUAL_TO,\n   NOT_EQUAL_TO,\n   ;\n   \n   public boolean permits(final int actualValue, final int significantValue)\n   {\n   \n      return \n         switch (this)\n         {\n         \n            case GREATER_THAN             -&gt; actualValue &gt;  significantValue;\n            case GREATER_THAN_OR_EQUAL_TO -&gt; actualValue &gt;= significantValue;\n            case LESS_THAN                -&gt; actualValue &lt;  significantValue;\n            case LESS_THAN_OR_EQUAL_TO    -&gt; actualValue &lt;= significantValue;\n            case EQUAL_TO                 -&gt; actualValue == significantValue;\n            case NOT_EQUAL_TO             -&gt; actualValue != significantValue;\n         \n         }\n         ;\n   \n   }\n   \n}\n</code></pre>\n<ul>\n<li><p><strong>Final Classes can have static fields and methods? So can Java Enums!</strong></p>\n<ul>\n<li>If I were to make a <code>Shop</code> enum where each enum value has a <code>String</code> location, I could create a static method <code>fetchByLocation(String location)</code> to filter my results down to the ones that matter!</li>\n</ul>\n</li>\n</ul>\n<pre><code>import java.util.*;\n\nenum Shop\n{\n    \n    ShopA(&quot;Town 1&quot;),\n    ShopB(&quot;Town 1&quot;),\n    ShopC(&quot;Town 4&quot;),\n    ShopD(&quot;Town 2&quot;),\n    ShopE(&quot;Town 5&quot;),\n    ShopF(&quot;Town 3&quot;),\n    ShopG(&quot;Town 6&quot;),\n    ShopH(&quot;Town 2&quot;),\n    ShopI(&quot;Town 6&quot;),\n    ;\n    \n    //This is how you do static fields!\n    public static final String COUNTRY_NAME = &quot;SomeName&quot;;\n    //You can even have static initialization blocks! Not shown here.\n\n    public final String location;\n    \n    Shop(final String location)\n    {\n        \n        this.location = location;\n        \n    }\n    \n    public static List&lt;Shop&gt; fetchByLocation(final String location)\n    {\n        \n        final List&lt;Shop&gt; shops = new ArrayList&lt;&gt;();\n        \n        for (final Shop eachShop : shops)\n        {\n            \n            if (eachShop.location.equals(location))\n            {\n                \n                shops.add(eachShop);\n                \n            }\n            \n        }\n        \n        return shops;\n        \n    }\n    \n}\n</code></pre>\n<ul>\n<li><p><strong>Final Classes can implement Interfaces? So can Java Enums!</strong></p>\n<ul>\n<li><p>I know I already used this before, but I am just going to steal the code from this answer (<a href=\"https://stackoverflow.com/a/15076852/10118965\">https://stackoverflow.com/a/15076852/10118965</a>), since it captures the intent so perfectly.</p>\n</li>\n<li><p>Also, since enums can have Interfaces, then they can also have abstract methods too! In this example, you could achieve this by just removing <code>implements Comparator&lt;String&gt;</code> from the top, and then in the body, adding <code>public abstract int compare(String s1, String s2);</code> as if it was an instance method, like I showed above.</p>\n</li>\n<li><p>Also, unlike Final Classes, enum values can be Anonymous Classes, should you want to create part of the implementation inline. In some instances, that can simplify things.</p>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code>enum StringComparator implements Comparator&lt;String&gt; {\n    NATURAL {\n        @Override\n        public int compare(String s1, String s2) {\n            return s1.compareTo(s2);\n        }\n    },\n    REVERSE {\n        @Override\n        public int compare(String s1, String s2) {\n            return NATURAL.compare(s2, s1);\n        }\n    },\n    LENGTH {\n        @Override\n        public int compare(String s1, String s2) {\n            return new Integer(s1.length()).compareTo(s2.length());\n        }\n    };\n}\n</code></pre>\n<p><em>Please note though, the only thing that Final Classes can do that Java Enums cannot do is to have a class level Type Parameter. Here is a post going into better detail about why they can't</em> -- <a href=\"https://stackoverflow.com/questions/76983559/generics-in-enum-for-complex-type-checking/76984724#76984724\">Generics in enum for complex type checking</a></p>\n<p><strong>Of course, you can still put generics on your enum methods all you please, they just can't refer to a class-level type parameter.</strong></p>\n<h2>What else can Java Enums do?</h2>\n<p>There's so much more! Back in the <strong>Bounded and Indexed Domain</strong> section, I mentioned that Enums allow you to specify at compile time <em><strong>EXACTLY</strong></em> how many instances of that type will exist at runtime. I also said that knowing the number of instances <em><strong>at compile-time</strong></em> gives you some <em><strong>POWERFUL</strong></em> guarantees. Here are some of those benefits now.</p>\n<ul>\n<li><strong>Singletons (and Multi-tons)</strong>\n<ul>\n<li>Enums are not only the best way to create singletons in Java (so far), but the officially encouraged way. If you want only one instance of an object, you should be using an enum, and not handrolling a singleton yourself.</li>\n</ul>\n</li>\n<li><strong>Helper Methods</strong>\n<ul>\n<li>Enums come pre-baked with some helpful methods. For example, consider the enum <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html\" rel=\"nofollow noreferrer\"><code>java.time.DayOfWeek</code></a> -- it models the days of the week -- Monday, Tuesday, etc. Here are some of the helpful methods that are <em><strong>automatically included, just because it is an enum</strong></em>. Every other enum that you make will have these methods included by default too.\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html#valueOf(java.lang.String)\" rel=\"nofollow noreferrer\"><code>valueOf(String name)</code></a> -- If someone sends you a <code>String</code>, and you want to turn that into your Enum, simply call the static method <code>valueOf</code> that automatically comes with your enum. The <code>String</code> must exactly match your enum value's name. But if it does, then it's simple, easy deserialization.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#name()\" rel=\"nofollow noreferrer\"><code>name()</code></a> -- Alternatively, this method will take the enum value (Monday, Tuesday, etc) and turn it into a <code>String</code> that exactly matches the enum values name. The previous method demonstrated simple, easy deserialization. This method is for simple, easy serialization.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/DayOfWeek.html#values()\" rel=\"nofollow noreferrer\"><code>values()</code></a> -- If you want an array of all values <em><strong>in order</strong></em>, then you can just call this method. In this case, it will return an array containing all the days of the week, starting from MONDAY. This is good for looping or fetching an enum value by index.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#compareTo(E)\" rel=\"nofollow noreferrer\"><code>compareTo(E other)</code></a> -- All enums are <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable&lt;E&gt;</code></a> by default. So, you can easily tell whether the enum value in your hand comes before or after another enum value.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#ordinal()\" rel=\"nofollow noreferrer\"><code>ordinal()</code></a> -- And in case you just want the positional index of the enum value (maybe you want to randomly choose from any of the enum values), you can just call this method to get the enum's positional index. This may not seem that useful, but it has shockingly powerful uses.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>Enum Collections</strong>\n<ul>\n<li>Enums have <em><strong>EXTREMELY FAST</strong></em> and memory-optimized versions of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>java.util.Set</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>java.util.Map</code></a> -- respectfully called <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/EnumSet.html\" rel=\"nofollow noreferrer\"><code>java.util.EnumSet</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/EnumMap.html\" rel=\"nofollow noreferrer\"><code>java.util.EnumMap</code></a>.\n<ul>\n<li>To give an example of just how fast is fast, I did some (completely rudimentary and informal) performance tests, and I found <code>EnumMap</code> to be over <em><strong>3 times faster</strong></em> than <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>java.util.HashMap</code></a>. And roughly 15% faster than <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/IdentityHashMap.html\" rel=\"nofollow noreferrer\"><code>java.util.IdentityHashMap</code></a>, which is the non-enum equivalent of <code>EnumMap</code>. If you have an enum and you need a set or a map whose keys are the enum, then you need a reason to NOT use the enum variants. You should be using them by default when working with enums. It's a free performance boost.\n<ul>\n<li>And if that wasn't good enough, both of these enum-variants are actually <em><strong>ORDERED</strong></em>, which means that comparing <code>EnumMap</code> to <code>HashMap</code> and <code>IdentityHashMap</code> is an unfair comparison (for <code>EnumMap</code>!) because <code>EnumMap</code> is actually providing way more functionality and abilities than the hash variants. A &quot;fair&quot; comparison would be comparing <code>EnumMap</code> to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TreeMap.html\" rel=\"nofollow noreferrer\"><code>java.util.TreeMap</code></a>, which is even <em><strong>SLOWER</strong></em> than <code>HashMap</code> and <code>IdentityHashMap</code>. I hope you see just how insanely powerful these enum variants are compared to the rest of the <code>Collection</code> library.</li>\n</ul>\n</li>\n<li>And don't forget, I said they are also memory-optimized too. So not only are you getting the best performance that the <code>Collection</code> library has to offer, you are also getting one of the lightest memory-costs in the library too.</li>\n<li>The reason for all of this speed and lightweight memory is <em><strong>because we know EXACTLY HOW MANY INSTANCES THERE ARE</strong></em> at <em><strong>compile-time</strong></em>. Knowing this means that we have optimization strategies that physically aren't possible for any of the other collections.\n<ul>\n<li>These enum-variants are able to represent inclusion using a <code>byte[]</code> (or a bit vector, which is very similar). For example, in <code>EnumSet</code>, it uses the enum's <code>ordinal()</code> method to be able to represent indexes in an array, and then just puts a 0 or a 1 to indicate whether or not the matching enum value is present in the set (I told you that <code>ordinal()</code> method had shockingly powerful uses). It is this <code>byte[]</code> that makes them so unbelievably fast and lightweight, because a <code>byte[]</code> is unbelievably fast and lightweight.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2>How well do Java Enums get along with other Java features?</h2>\n<p>Extremely well! Java as a language prioritizes cohesiveness. That means that a feature that is added to the language should play nicely with all other features. Enums are no exception to this. So as a result, anywhere that you can use a Final Class, you can use an Enum there too!</p>\n<p>However, there are some special interactions between Enums and other features of Java. Those interactions are what I will highlight in this section.</p>\n<p><em>I should also mention, this is the part of the post that is more 2023 focused. As new features have been added, there have been more features for Java Enums to have special interactions with.</em></p>\n<p><em><strong>As a very quick note, I will reemphasize what I said before - pretty much the only feature that Java Enums don't get along perfectly with is generics, and even then, it's only class-level generics. Anything not class-level works beautifully.</strong></em></p>\n<ul>\n<li><p><strong>Enums + <a href=\"https://openjdk.org/jeps/361\" rel=\"nofollow noreferrer\">Switch</a> = Single-Type Exhaustiveness Checking</strong></p>\n<ul>\n<li>Since we know the exact number of values that an enum data type can have at compile time, that gives the compiler a special ability when using a switch expression/statement.\n<ul>\n<li>If the value we are switching over is an enum, then a switch expression/statement will give you the option to opt into <a href=\"https://docs.oracle.com/en/java/javase/20/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC\" rel=\"nofollow noreferrer\">Exhaustiveness Checking (Ctrl+F &quot;Exhaustiveness of switch Expressions&quot;)</a>\n<ul>\n<li>Exhaustiveness checking is a special ability that says, if all of the case labels in our switch expression/statement cover the full domain of possible values for what we are switching over (with the exception of null), then our switch is considered exhaustive. This is <em><strong>EXTREMELY POWERFUL</strong></em>. Let's say that I use my <code>Direction</code> enum again. But let's say that I add the diagonal values to it -- <code>NORTHEAST</code>, <code>SOUTHEAST</code>, etc. If I have a switch expression that switches on an enum value, then that means that that code won't compile unless I cover every single case. So, back when my <code>Direction</code> enum only had 4 values, that meant I only needed 4 case labels. As long as I have those 4 case labels, my enum compiles. But once I add the 4 diagonals as well, bringing my total up to 8, that switch expression will no longer compile because it is no longer exhaustive. This is <em><strong>HUGE</strong></em> because it completely eliminates those I-changed-it-here-but-forgot-to-change-it-there type of bugs that everyone runs into all the time.</li>\n</ul>\n</li>\n<li>Of course, if you do not want Exhaustiveness Checking, you can easily opt out of it by just using a <code>default</code> clause. Simply mention what the default behaviour should be if you don't match any of the other case labels, and then you will be good to go. That said, it is strongly encouraged to NOT opt out. Simply update the enum to mention what it should do in those instances by adding do nothing (or, do the same thing) case labels. Of course, if that is not an option for you, or it is simply too inconvenient (library maintainers), then by all means, that is what the default clause is for.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Enums + <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">Switch Patterns</a> + <a href=\"https://openjdk.org/jeps/409\" rel=\"nofollow noreferrer\">Sealed Types</a> = Multi-Type Exhaustiveness Checking</strong></p>\n<ul>\n<li>Sometimes, we have an enum that we would like to break up into multiple parts, but we still want to get Exhaustiveness Checking. In situations such as those, the solution is to include Sealed Types and Switch Patterns to the mix.\n<ul>\n<li>A Sealed Type is a type where only a fixed number of types can extend it, and those types are known at compile-time.</li>\n<li>A Switch Pattern is a switch statement/expression where the case labels don't hold constants, they hold type patterns. A type pattern is where we test a value to see if it is assignable to a type. If so, we create a new variable of the focused type, and assign the value to that variable. Read more in the link above for Switch Patterns.\n<ul>\n<li>To demonstrate all 3 of these combined, let's say I have an enum <code>Alphabet</code>. It has 26 values -- the 26 letters of the English Language. But what if I want to distinguish between vowels and consonants? Well, all I need to do is to turn my <code>Alphabet</code> enum into a Sealed Interface that only permits 2 other enums -- <code>Consonant</code> and <code>Vowel</code>. From there, I provide <code>Vowel</code> with the 5 vowels, and then put the rest of the <code>Alphabet</code> values into <code>Consonant</code>. Once I have that, I can switch over an instance of <code>Alphabet</code>, and still get exhaustiveness checking, while being able to &quot;chunk&quot; my Exhaustiveness Checks by type. If I want to handle all instances of <code>Consonant</code> in the same way while handling instances of <code>Vowel</code> individually, I can simply pass in the type <code>Consonant</code> as one of my type patterns for a single case label, and then the other case labels will be for each value of <code>Vowel</code>. This will still give me Exhaustiveness Checking, but allowing me to focus it on the parts that matter.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>More (potentially, not certainly) coming in the future!</p>\n<ul>\n<li>In the future, it is extremely likely that we will get Constant Patterns. That means that, anywhere that we do pattern-matching, we will be able to pass in our enum value as a Constant Pattern. In that situation, enums will become exponentially more valuable, as that will give us yet another form of Exhaustiveness Checking that currently isn't possible.</li>\n</ul>\n</li>\n</ul>\n<h1>The Tradeoffs when using Java Enums</h1>\n<h2>Sacrifices</h2>\n<p>As you can see, Java Enums are powerful and flexible. There are so many use cases, and they extend into a lot of different domains. They have abilities that are unique (not just within Java, but amongst all non-JVM languages).</p>\n<p>That said, everything that is good about enums comes because we make sacrifices along the way. <strong>We don't just get this stuff for free - there is a cost. There always is a cost</strong>.</p>\n<h2>The Costs of using Java Enums</h2>\n<p>As mentioned, Java Enums charge a tax for their use, much like every feature in the Java language.</p>\n<ul>\n<li><p>If you want to add/remove/update a value in your Java Enum, you may have to recompile code that does Exhaustiveness Checking.</p>\n<ul>\n<li>You could argue that this is a feature, not a bug. I certainly agree. But bug or not, it is a price you must pay. If you decide that you want your <code>Direction</code> enum to have diagonals, then you must recompile your switch expressions that don't have defaults or catch-all's. At that point, it becomes a question of whether or not it is worth it for you to not have the default clause.</li>\n</ul>\n</li>\n<li><p>Enums are <em><strong>Final</strong></em> Classes, not just Classes</p>\n<ul>\n<li>Since enums are FINAL Classes, that means that they cannot be extended. This limits their applicability in a few ways, but for good reason. After all, if your enum can be arbitrarily extended, how would you go about implementing <code>values()</code> or <code>ordinal()</code>?</li>\n</ul>\n</li>\n</ul>\n<h2>When should we use Java Enums?</h2>\n<p>Java Enums are best used when the following 3 things are true.</p>\n<ol>\n<li><p><strong>You know all the values of a type at compile-time</strong></p>\n<ul>\n<li>This means that whatever domain you are trying to model is a domain where you, the person consuming this information, can think through every single possible value in the domain. A good example might be an enum for the months of a year. You can think up all 12 months, so that means that we know all the values of the <code>Month</code> type at compile-time.</li>\n</ul>\n</li>\n<li><p><strong>The number of values is &quot;small enough&quot;</strong></p>\n<ul>\n<li><p>One user on this thread mentioned that you don't want to put Days of the year into an enum because there are 2 many values (366). I respectfully disagree, but every person's boundary for what is too much is different.</p>\n<ul>\n<li>That said, there is a limit to maximum number of enum values you can include. If I'm not mistaken, Java says that all class files can not have more than ~65k fields. So, if your enum has fields, there's your answer. And for me, I have found that I start hitting the limit once my enum gets over 2k values (my enum has multiple values). That said, if you find yourself reaching the thousands, chances are good that the work you are doing has simply gotten too big for an enum to handle. Time to reach in and find a better tool.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>You will never change the enum values -- OR, your enum values change <em>in</em>frequently enough that your end users are fine potentially recompiling when the change happens.</strong></p>\n<ul>\n<li>Consider the <code>Planet</code> enum. That is a good candidate for an enum. All of its values are known at runtime, and it's certainly small enough. And at first glance, this seems to be an unchanging enum. But as it turns out, this one actually did need to change in the past -- when we turned Pluto from a Planet to a Dwarf Planet. I don't know the context, but I would assume that most users are fine swapping their program when it becomes clear that Pluto was no longer a Planet. Again, judge how quickly your users are willing and able to recompile their code. Then compare that to how likely and frequently you plan to update and change the enum. If change is more frequent than what your users desire, there is your answer.</li>\n<li>Also, users are a lot more likely to recompile if you remove or modify enum values. Adding enum values are less likely to require a code change. If you only plan to add enum values, you should feel more confident storing this data as an enum.</li>\n</ul>\n</li>\n</ol>\n<p>Please let me know if there are any questions.</p>\n"},{"tags":[],"owner":{"account_id":24224809,"reputation":363,"user_id":18179479,"display_name":"Mircea Sirghi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694254593,"creation_date":1694254593,"answer_id":77071772,"question_id":4709175,"body_markdown":"When a variable can take certain values it is useful to use enums. It encapsulates all possible values from a specific group.\r\n\r\nOne advantage is that it will not accept other values and you have the ability to throw a Runtime exception without loosing processing resources in vain.\r\n\r\nYou can also assign different behaviors per enum value which helps implementing Strategy pattern. \r\n\r\nIn the end it makes the code more readable as you don&#39;t pollute it with `new` operator.","title":"What are enums and why are they useful?","body":"<p>When a variable can take certain values it is useful to use enums. It encapsulates all possible values from a specific group.</p>\n<p>One advantage is that it will not accept other values and you have the ability to throw a Runtime exception without loosing processing resources in vain.</p>\n<p>You can also assign different behaviors per enum value which helps implementing Strategy pattern.</p>\n<p>In the end it makes the code more readable as you don't pollute it with <code>new</code> operator.</p>\n"}],"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392609,"favorite_count":0,"down_vote_count":4,"up_vote_count":605,"accepted_answer_id":4709224,"answer_count":29,"score":601,"last_activity_date":1694395417,"creation_date":1295225925,"question_id":4709175,"body_markdown":"Today I was browsing through some questions on this site and I found a mention of an _enum_ [being used in singleton pattern][1] about purported thread-safety benefits to such solution.\r\n\r\nI have never used enums and I have been programming in Java for more than a couple of years now. And apparently, they changed a lot. Now they even do full-blown support of OOP within themselves.\r\n\r\nNow why and what should I use enum in day to day programming?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4706216/java-singleton-instantiation","title":"What are enums and why are they useful?","body":"<p>Today I was browsing through some questions on this site and I found a mention of an <em>enum</em> <a href=\"https://stackoverflow.com/questions/4706216/java-singleton-instantiation\">being used in singleton pattern</a> about purported thread-safety benefits to such solution.</p>\n<p>I have never used enums and I have been programming in Java for more than a couple of years now. And apparently, they changed a lot. Now they even do full-blown support of OOP within themselves.</p>\n<p>Now why and what should I use enum in day to day programming?</p>\n"},{"tags":["java","list","immutability"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":7,"creation_date":1694378946,"post_id":77077794,"comment_id":135879867,"body_markdown":"What is the point of copying an immutable object?","body":"What is the point of copying an immutable object?"},{"owner":{"account_id":27202067,"reputation":48,"user_id":20734188,"display_name":"Saketh Kantipudi"},"score":0,"creation_date":1694379150,"post_id":77077794,"comment_id":135879886,"body_markdown":"When preforming operations on the list for instance join, they must return a copied join of the original object to not actually change the immutable object.","body":"When preforming operations on the list for instance join, they must return a copied join of the original object to not actually change the immutable object."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":4,"creation_date":1694379245,"post_id":77077794,"comment_id":135879900,"body_markdown":"An immutable object cannot be changed. That is the definition of an immutable object.","body":"An immutable object cannot be changed. That is the definition of an immutable object."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694379554,"post_id":77077794,"comment_id":135879930,"body_markdown":"There is no general way to create a deep copy of a list in java since [`Cloneable` is  considered broken (`artima.com`)](https://www.artima.com/articles/josh-bloch-on-design). We can only implement deep-copying for specific classes.","body":"There is no general way to create a deep copy of a list in java since <a href=\"https://www.artima.com/articles/josh-bloch-on-design\" rel=\"nofollow noreferrer\"><code>Cloneable</code> is  considered broken (<code>artima.com</code>)</a>. We can only implement deep-copying for specific classes."},{"owner":{"account_id":27202067,"reputation":48,"user_id":20734188,"display_name":"Saketh Kantipudi"},"score":0,"creation_date":1694379982,"post_id":77077794,"comment_id":135879973,"body_markdown":"Ok, good to know, I am new to java mainly have expierence with C and python. For deepy copying this specific Cons class, how should I go about it. I guess thats what I am really asking. Aside from the methods I tried above, I also tried a copy constructor.","body":"Ok, good to know, I am new to java mainly have expierence with C and python. For deepy copying this specific Cons class, how should I go about it. I guess thats what I am really asking. Aside from the methods I tried above, I also tried a copy constructor."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1694388052,"post_id":77077794,"comment_id":135880634,"body_markdown":"Is your current `copy()` method supposed to implement a deep copy?  Because it looks like it&#39;s not.  So only `join()` performs a deep copy?","body":"Is your current <code>copy()</code> method supposed to implement a deep copy?  Because it looks like it&#39;s not.  So only <code>join()</code> performs a deep copy?"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694395105,"creation_date":1694395105,"answer_id":77078445,"question_id":77077794,"body_markdown":"I&#39;m not sure why you made `tail` non-final when you said you are making an *immutable* cons list. Also ,`tail` is of type `List` (`java.util.List`?) when it should be of a type that is either `Cons` or `Nil`.\r\n\r\nLet&#39;s fix those problems by using a sealed interface `ConsList&lt;T&gt;`, which `Cons&lt;T&gt;` and `Nil&lt;T&gt;` implement. We also make `Cons&lt;T&gt;` and `Nil&lt;T&gt;` *records* so that they are immutable.\r\n\r\n```\r\nsealed interface ConsList&lt;T&gt; permits Cons, Nil {}\r\nrecord Cons&lt;T&gt;(T head, ConsList&lt;T&gt; tail) implements ConsList&lt;T&gt; { }\r\nrecord Nil&lt;T&gt;() implements ConsList&lt;T&gt; {}\r\n```\r\n\r\nNow `copy` can be implemented like this:\r\n\r\n    static &lt;T&gt; ConsList&lt;T&gt; copy(ConsList&lt;T&gt; list) {\r\n        Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\r\n        ConsList&lt;T&gt; temp = list;\r\n        while (temp instanceof Cons&lt;T&gt; cons) {\r\n            stack.push(cons.head());\r\n            temp = cons.tail();\r\n        }\r\n        temp = new Nil&lt;&gt;();\r\n        while (!stack.isEmpty()) {\r\n            temp = new Cons&lt;&gt;(stack.pop(), temp);\r\n        }\r\n        return temp;\r\n    }\r\n\r\nThis could also be done with recursion, but unlike functional languages like Haskell, Java doesn&#39;t have much optimisations for recursive code like that, so I don&#39;t recommend that. The stack would likely overflow for slightly larger lists.\r\n\r\nWhat you will realise though, is that you don&#39;t actually need a `copy` method like this. In your `join` method, the only reason why you make a deep copy is because you call `cp.append` later on. Though you did not show the implementation, I can only assume it mutates `cp` in some way. That is not something an *immutable* data type should do.\r\n\r\nInstead, you should implement `join` by collecting the elements of each list into a stack, and then making a joined list by popping from the stack.\r\n\r\n    // in ConsList&lt;T&gt; interface\r\n    default ConsList&lt;T&gt; join(ConsList&lt;T&gt; other) {\r\n        Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\r\n\r\n        // push &quot;this&quot;\r\n        ConsList&lt;T&gt; temp = this;\r\n        while (temp instanceof Cons&lt;T&gt; cons) {\r\n            stack.push(cons.head());\r\n            temp = cons.tail();\r\n        }\r\n\r\n        // push other\r\n        temp = other;\r\n        while (temp instanceof Cons&lt;T&gt; cons) {\r\n            stack.push(cons.head());\r\n            temp = cons.tail();\r\n        }\r\n\r\n        // pop everything from the stack and make a new ConsList&lt;T&gt;\r\n        temp = new Nil&lt;&gt;();\r\n        while (!stack.isEmpty()) {\r\n            temp = new Cons&lt;&gt;(stack.pop(), temp);\r\n        }\r\n        return temp;\r\n    }\r\n\r\nYou can also write this with recursion which would make the code look a lot &quot;nicer&quot;, but again, I don&#39;t recommend doing so. That said, the code duplication can be slightly refactored:\r\n\r\n    default ConsList&lt;T&gt; join(ConsList&lt;T&gt; other) {\r\n        Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\r\n        toStack(this, stack);\r\n        toStack(other, stack);\r\n        return fromStack(stack);\r\n    }\r\n    \r\n    static &lt;T&gt; void toStack(ConsList&lt;T&gt; list, Deque&lt;T&gt; stack) {\r\n        ConsList&lt;T&gt; temp = list;\r\n        while (temp instanceof Cons&lt;T&gt; cons) {\r\n            stack.push(cons.head());\r\n            temp = cons.tail();\r\n        }\r\n    }\r\n    \r\n    static &lt;T&gt; ConsList&lt;T&gt; fromStack(Deque&lt;T&gt; stack) {\r\n        ConsList&lt;T&gt; temp = new Nil&lt;&gt;();\r\n        while (!stack.isEmpty()) {\r\n            temp = new Cons&lt;&gt;(stack.pop(), temp);\r\n        }\r\n        return temp;\r\n    }","title":"Deep Copy of Cons instance of Java List interface","body":"<p>I'm not sure why you made <code>tail</code> non-final when you said you are making an <em>immutable</em> cons list. Also ,<code>tail</code> is of type <code>List</code> (<code>java.util.List</code>?) when it should be of a type that is either <code>Cons</code> or <code>Nil</code>.</p>\n<p>Let's fix those problems by using a sealed interface <code>ConsList&lt;T&gt;</code>, which <code>Cons&lt;T&gt;</code> and <code>Nil&lt;T&gt;</code> implement. We also make <code>Cons&lt;T&gt;</code> and <code>Nil&lt;T&gt;</code> <em>records</em> so that they are immutable.</p>\n<pre><code>sealed interface ConsList&lt;T&gt; permits Cons, Nil {}\nrecord Cons&lt;T&gt;(T head, ConsList&lt;T&gt; tail) implements ConsList&lt;T&gt; { }\nrecord Nil&lt;T&gt;() implements ConsList&lt;T&gt; {}\n</code></pre>\n<p>Now <code>copy</code> can be implemented like this:</p>\n<pre><code>static &lt;T&gt; ConsList&lt;T&gt; copy(ConsList&lt;T&gt; list) {\n    Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\n    ConsList&lt;T&gt; temp = list;\n    while (temp instanceof Cons&lt;T&gt; cons) {\n        stack.push(cons.head());\n        temp = cons.tail();\n    }\n    temp = new Nil&lt;&gt;();\n    while (!stack.isEmpty()) {\n        temp = new Cons&lt;&gt;(stack.pop(), temp);\n    }\n    return temp;\n}\n</code></pre>\n<p>This could also be done with recursion, but unlike functional languages like Haskell, Java doesn't have much optimisations for recursive code like that, so I don't recommend that. The stack would likely overflow for slightly larger lists.</p>\n<p>What you will realise though, is that you don't actually need a <code>copy</code> method like this. In your <code>join</code> method, the only reason why you make a deep copy is because you call <code>cp.append</code> later on. Though you did not show the implementation, I can only assume it mutates <code>cp</code> in some way. That is not something an <em>immutable</em> data type should do.</p>\n<p>Instead, you should implement <code>join</code> by collecting the elements of each list into a stack, and then making a joined list by popping from the stack.</p>\n<pre><code>// in ConsList&lt;T&gt; interface\ndefault ConsList&lt;T&gt; join(ConsList&lt;T&gt; other) {\n    Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\n\n    // push &quot;this&quot;\n    ConsList&lt;T&gt; temp = this;\n    while (temp instanceof Cons&lt;T&gt; cons) {\n        stack.push(cons.head());\n        temp = cons.tail();\n    }\n\n    // push other\n    temp = other;\n    while (temp instanceof Cons&lt;T&gt; cons) {\n        stack.push(cons.head());\n        temp = cons.tail();\n    }\n\n    // pop everything from the stack and make a new ConsList&lt;T&gt;\n    temp = new Nil&lt;&gt;();\n    while (!stack.isEmpty()) {\n        temp = new Cons&lt;&gt;(stack.pop(), temp);\n    }\n    return temp;\n}\n</code></pre>\n<p>You can also write this with recursion which would make the code look a lot &quot;nicer&quot;, but again, I don't recommend doing so. That said, the code duplication can be slightly refactored:</p>\n<pre><code>default ConsList&lt;T&gt; join(ConsList&lt;T&gt; other) {\n    Deque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\n    toStack(this, stack);\n    toStack(other, stack);\n    return fromStack(stack);\n}\n\nstatic &lt;T&gt; void toStack(ConsList&lt;T&gt; list, Deque&lt;T&gt; stack) {\n    ConsList&lt;T&gt; temp = list;\n    while (temp instanceof Cons&lt;T&gt; cons) {\n        stack.push(cons.head());\n        temp = cons.tail();\n    }\n}\n\nstatic &lt;T&gt; ConsList&lt;T&gt; fromStack(Deque&lt;T&gt; stack) {\n    ConsList&lt;T&gt; temp = new Nil&lt;&gt;();\n    while (!stack.isEmpty()) {\n        temp = new Cons&lt;&gt;(stack.pop(), temp);\n    }\n    return temp;\n}\n</code></pre>\n"}],"owner":{"account_id":27202067,"reputation":48,"user_id":20734188,"display_name":"Saketh Kantipudi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77078445,"answer_count":1,"score":1,"last_activity_date":1694395105,"creation_date":1694378218,"question_id":77077794,"body_markdown":"I am implementing a immutable List interface in java, a Cons class, essentially a list of lists ie; Cons(1,2,3)= Cons(1,Cons(2,Cons(3,null)))\r\n\r\nI am trying to create a deepcopy of a cons but have had no success\r\n\r\n\r\nBelow is the class constructor methods and intialization:\r\n\r\n\r\n```\r\npublic final class Cons&lt;T&gt; implements List&lt;T&gt; {\r\n\r\n  private final T head;\r\n  private List&lt;T&gt; tail; // non-final because of take and join\r\n\r\n  Cons(T head, List&lt;T&gt; tail) {\r\n    this.head = head;\r\n    this.tail = tail;\r\n  }\r\n\r\n```\r\n\r\nBelow is the current Copy class:\r\n```\r\n    public Cons&lt;T&gt; copy(Cons&lt;T&gt; tocopy) {\r\n      Cons&lt;T&gt; test=  new Cons&lt;T&gt;(this.head,this.tail);\r\n      return test;\r\n    }\r\n}\r\n```\r\nBelow is how its being called, I have confirmed this is simple a shallow copy or refrence to this by appending a value and comparing the copy to this:\r\n\r\n \r\n\r\n    public List&lt;T&gt; join(List&lt;T&gt; other) {\r\n    \r\n          Cons&lt;T&gt; cp= copy(this);\r\n          if(other instanceof Nil){\r\n              return cp;\r\n          }\r\n          Cons&lt;T&gt; ptr= (Cons&lt;T&gt;) other;\r\n    \r\n          for(; ptr instanceof Cons;ptr= (Cons&lt;T&gt;) ptr.tail){\r\n              if(!(ptr.tail instanceof Cons)){\r\n                  cp.append(ptr.head);\r\n                  break;\r\n              }\r\n              else{\r\n                  cp.append(ptr.head);\r\n              }\r\n          }\r\n          return cp;\r\n      }\r\n\r\nIn addition I have tried Cons&lt;T&gt; copy = cons(this.head, this.tail), ","title":"Deep Copy of Cons instance of Java List interface","body":"<p>I am implementing a immutable List interface in java, a Cons class, essentially a list of lists ie; Cons(1,2,3)= Cons(1,Cons(2,Cons(3,null)))</p>\n<p>I am trying to create a deepcopy of a cons but have had no success</p>\n<p>Below is the class constructor methods and intialization:</p>\n<pre><code>public final class Cons&lt;T&gt; implements List&lt;T&gt; {\n\n  private final T head;\n  private List&lt;T&gt; tail; // non-final because of take and join\n\n  Cons(T head, List&lt;T&gt; tail) {\n    this.head = head;\n    this.tail = tail;\n  }\n\n</code></pre>\n<p>Below is the current Copy class:</p>\n<pre><code>    public Cons&lt;T&gt; copy(Cons&lt;T&gt; tocopy) {\n      Cons&lt;T&gt; test=  new Cons&lt;T&gt;(this.head,this.tail);\n      return test;\n    }\n}\n</code></pre>\n<p>Below is how its being called, I have confirmed this is simple a shallow copy or refrence to this by appending a value and comparing the copy to this:</p>\n<pre><code>public List&lt;T&gt; join(List&lt;T&gt; other) {\n\n      Cons&lt;T&gt; cp= copy(this);\n      if(other instanceof Nil){\n          return cp;\n      }\n      Cons&lt;T&gt; ptr= (Cons&lt;T&gt;) other;\n\n      for(; ptr instanceof Cons;ptr= (Cons&lt;T&gt;) ptr.tail){\n          if(!(ptr.tail instanceof Cons)){\n              cp.append(ptr.head);\n              break;\n          }\n          else{\n              cp.append(ptr.head);\n          }\n      }\n      return cp;\n  }\n</code></pre>\n<p>In addition I have tried Cons copy = cons(this.head, this.tail),</p>\n"},{"tags":["java","unicode","identifier","scjp"],"comments":[{"owner":{"account_id":329906,"reputation":12891,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":2,"creation_date":1390396953,"post_id":11774099,"comment_id":32072035,"body_markdown":"Regarding &quot;a currency character&quot;: UK visitors to this question may be suprised and interested to know that, consistent with being able to start with &quot;a&quot; currency character, Java identifiers can, legally, begin with the pound symbol (&#163;).","body":"Regarding &quot;a currency character&quot;: UK visitors to this question may be suprised and interested to know that, consistent with being able to start with &quot;a&quot; currency character, Java identifiers can, legally, begin with the pound symbol (&#163;)."},{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":11,"creation_date":1390481657,"post_id":11774099,"comment_id":32115473,"body_markdown":"Note that since Java 8, `_` is a &quot;deprecated&quot; identifier. Specifically, the compiler emits the following warning: *(use of &#39;_&#39; as an identifier might not be supported in releases after Java SE 8)*.","body":"Note that since Java 8, <code>_</code> is a &quot;deprecated&quot; identifier. Specifically, the compiler emits the following warning: <i>(use of &#39;_&#39; as an identifier might not be supported in releases after Java SE 8)</i>."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":4,"creation_date":1395434767,"post_id":11774099,"comment_id":34353771,"body_markdown":"@aioobe Yup. [Brian Goetz says they are &quot;reclaiming&quot; `_` for use in future language features](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010670.html). Identifiers that *start* with an underscore are still okay, but a single underscore is an error if used as a lambda parameter name, and a warning everywhere else.","body":"@aioobe Yup. <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010670.html\" rel=\"nofollow noreferrer\">Brian Goetz says they are &quot;reclaiming&quot; <code>_</code> for use in future language features</a>. Identifiers that <i>start</i> with an underscore are still okay, but a single underscore is an error if used as a lambda parameter name, and a warning everywhere else."},{"owner":{"account_id":481416,"reputation":355314,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":1,"creation_date":1428252704,"post_id":11774099,"comment_id":47083309,"body_markdown":"For the bytecode, anything by sequence that does not contain `. ; [ / &lt; &gt; :` goes: http://stackoverflow.com/questions/26791204/why-does-the-jvm-allow-us-to-name-a-function-starting-with-a-digit-in-bytecode https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.4 Everything else is a Java-only restriction.","body":"For the bytecode, anything by sequence that does not contain <code>. ; [ &#47; &lt; &gt; :</code> goes: <a href=\"http://stackoverflow.com/questions/26791204/why-does-the-jvm-allow-us-to-name-a-function-starting-with-a-digit-in-bytecode\" title=\"why does the jvm allow us to name a function starting with a digit in bytecode\">stackoverflow.com/questions/26791204/&hellip;</a> <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.4\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se7/html/&hellip;</a> Everything else is a Java-only restriction."}],"answers":[{"tags":[],"owner":{"account_id":1482573,"reputation":3407,"user_id":1391578,"display_name":"Markus Mikkolainen"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1694394001,"creation_date":1343897856,"answer_id":11774137,"question_id":11774099,"body_markdown":"Iterate through the whole 65k chars and ask `Character.isJavaIdentifierStart(c)`.\r\nThe answer is: &quot;undertie&quot; decimal 8255","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>Iterate through the whole 65k chars and ask <code>Character.isJavaIdentifierStart(c)</code>.\nThe answer is: &quot;undertie&quot; decimal 8255</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":270,"is_accepted":true,"score":270,"last_activity_date":1503103214,"creation_date":1343897943,"answer_id":11774161,"question_id":11774099,"body_markdown":"Here is a list of connecting characters. These are characters used to connect words.\r\n\r\nhttp://www.fileformat.info/info/unicode/category/Pc/list.htm\r\n\r\n    U+005F _ LOW LINE\r\n    U+203F ‿ UNDERTIE\r\n    U+2040 ⁀ CHARACTER TIE\r\n    U+2054 ⁔ INVERTED UNDERTIE\r\n    U+FE33 ︳ PRESENTATION FORM FOR VERTICAL LOW LINE\r\n    U+FE34 ︴ PRESENTATION FORM FOR VERTICAL WAVY LOW LINE\r\n    U+FE4D ﹍ DASHED LOW LINE\r\n    U+FE4E ﹎ CENTRELINE LOW LINE\r\n    U+FE4F ﹏ WAVY LOW LINE\r\n    U+FF3F ＿ FULLWIDTH LOW LINE\r\n\r\nThis compiles on Java 7.\r\n\r\n    int _, ‿, ⁀, ⁔, ︳, ︴, ﹍, ﹎, ﹏, ＿;\r\n\r\n\r\n---\r\n\r\nAn example. In this case `tp` is the name of a column and the value for a given row.\r\n\r\n    Column&lt;Double&gt; ︴tp︴ = table.getColumn(&quot;tp&quot;, double.class);\r\n\r\n    double tp = row.getDouble(︴tp︴);\r\n\r\n---\r\n\r\nThe following\r\n\r\n    for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++)\r\n        if (Character.isJavaIdentifierStart(i) &amp;&amp; !Character.isAlphabetic(i))\r\n            System.out.print((char) i + &quot; &quot;);\r\n    }\r\n\r\nprints\r\n\r\n$ _ &#162; &#163; &#164; &#165; ؋ ৲ ৳ ৻ ૱ ௹ ฿ ៛ ‿ ⁀ ⁔ ₠ ₡ ₢ ₣ ₤ ₥ ₦ ₧ ₨ ₩ ₪ ₫ € ₭ ₮ ₯ ₰ ₱ ₲ ₳ ₴ ₵ ₶ ₷ ₸ ₹ ꠸ ﷼ ︳ ︴ ﹍ ﹎ ﹏ ﹩ ＄ ＿ ￠ ￡ ￥ ￦\r\n\r\n","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>Here is a list of connecting characters. These are characters used to connect words.</p>\n\n<p><a href=\"http://www.fileformat.info/info/unicode/category/Pc/list.htm\" rel=\"noreferrer\">http://www.fileformat.info/info/unicode/category/Pc/list.htm</a></p>\n\n<pre><code>U+005F _ LOW LINE\nU+203F ‿ UNDERTIE\nU+2040 ⁀ CHARACTER TIE\nU+2054 ⁔ INVERTED UNDERTIE\nU+FE33 ︳ PRESENTATION FORM FOR VERTICAL LOW LINE\nU+FE34 ︴ PRESENTATION FORM FOR VERTICAL WAVY LOW LINE\nU+FE4D ﹍ DASHED LOW LINE\nU+FE4E ﹎ CENTRELINE LOW LINE\nU+FE4F ﹏ WAVY LOW LINE\nU+FF3F ＿ FULLWIDTH LOW LINE\n</code></pre>\n\n<p>This compiles on Java 7.</p>\n\n<pre><code>int _, ‿, ⁀, ⁔, ︳, ︴, ﹍, ﹎, ﹏, ＿;\n</code></pre>\n\n<hr>\n\n<p>An example. In this case <code>tp</code> is the name of a column and the value for a given row.</p>\n\n<pre><code>Column&lt;Double&gt; ︴tp︴ = table.getColumn(\"tp\", double.class);\n\ndouble tp = row.getDouble(︴tp︴);\n</code></pre>\n\n<hr>\n\n<p>The following</p>\n\n<pre><code>for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++)\n    if (Character.isJavaIdentifierStart(i) &amp;&amp; !Character.isAlphabetic(i))\n        System.out.print((char) i + \" \");\n}\n</code></pre>\n\n<p>prints</p>\n\n<p>$ _ ¢ £ ¤ ¥ ؋ ৲ ৳ ৻ ૱ ௹ ฿ ៛ ‿ ⁀ ⁔ ₠ ₡ ₢ ₣ ₤ ₥ ₦ ₧ ₨ ₩ ₪ ₫ € ₭ ₮ ₯ ₰ ₱ ₲ ₳ ₴ ₵ ₶ ₷ ₸ ₹ ꠸ ﷼ ︳ ︴ ﹍ ﹎ ﹏ ﹩ ＄ ＿ ￠ ￡ ￥ ￦</p>\n"},{"tags":[],"owner":{"account_id":1642943,"reputation":19407,"user_id":1515052,"accept_rate":90,"display_name":"Simulant"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1694393923,"creation_date":1343897977,"answer_id":11774167,"question_id":11774099,"body_markdown":"[Here is a List][1] of connector Characters in Unicode. You will not find them on your keyboard.\r\n\r\nU+005F \tLOW LINE \t_ \t\r\nU+203F \tUNDERTIE \t‿ \t\r\nU+2040 \tCHARACTER TIE \t⁀ \t\r\nU+2054 \tINVERTED UNDERTIE \t⁔ \t\r\nU+FE33 \tPRESENTATION FORM FOR VERTICAL LOW LINE \t︳ \t\r\nU+FE34 \tPRESENTATION FORM FOR VERTICAL WAVY LOW LINE \t︴ \t\r\nU+FE4D \tDASHED LOW LINE \t﹍ \t\r\nU+FE4E \tCENTRELINE LOW LINE \t﹎ \t\r\nU+FE4F \tWAVY LOW LINE \t﹏ \t\r\nU+FF3F \tFULLWIDTH LOW LINE \t＿ \t\r\n\r\n\r\n\r\n[1]: https://www.fileformat.info/info/unicode/category/Pc/list.htm","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p><a href=\"https://www.fileformat.info/info/unicode/category/Pc/list.htm\" rel=\"nofollow noreferrer\">Here is a List</a> of connector Characters in Unicode. You will not find them on your keyboard.</p>\n<p>U+005F  LOW LINE    _<br />\nU+203F  UNDERTIE    ‿<br />\nU+2040  CHARACTER TIE   ⁀<br />\nU+2054  INVERTED UNDERTIE   ⁔<br />\nU+FE33  PRESENTATION FORM FOR VERTICAL LOW LINE     ︳<br />\nU+FE34  PRESENTATION FORM FOR VERTICAL WAVY LOW LINE    ︴<br />\nU+FE4D  DASHED LOW LINE     ﹍<br />\nU+FE4E  CENTRELINE LOW LINE     ﹎<br />\nU+FE4F  WAVY LOW LINE   ﹏<br />\nU+FF3F  FULLWIDTH LOW LINE  ＿</p>\n"},{"tags":[],"owner":{"account_id":680,"reputation":960655,"user_id":893,"accept_rate":84,"display_name":"Greg Hewgill"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1694393972,"creation_date":1343897994,"answer_id":11774170,"question_id":11774099,"body_markdown":"The definitive specification of a legal Java identifier can be found in the [Java Language Specification][1].\r\n\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>The definitive specification of a legal Java identifier can be found in the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8\" rel=\"nofollow noreferrer\">Java Language Specification</a>.</p>\n"},{"tags":[],"owner":{"account_id":4152007,"reputation":300,"user_id":4760208,"display_name":"sxnamit"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1441291696,"creation_date":1439881802,"answer_id":32065830,"question_id":11774099,"body_markdown":"A connecting character is used to connect two characters.\r\n\r\nIn Java, a connecting character is the one for which [Character.getType(int codePoint)][1]/[Character.getType(char ch)][2] returns a value equal to [Character.CONNECTOR_PUNCTUATION][3].\r\n\r\nNote that in Java, the character information is based on Unicode standard which identifies connecting characters by assigning them the general category Pc, which is an alias for [Connector_Punctuation][4].\r\n\r\nThe following code snippet,\r\n\r\n    for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++) {\r\n        if (Character.getType(i) == Character.CONNECTOR_PUNCTUATION\r\n                &amp;&amp; Character.isJavaIdentifierStart(i)) {\r\n            System.out.println(&quot;character: &quot; + String.valueOf(Character.toChars(i))\r\n                    + &quot;, codepoint: &quot; + i + &quot;, hexcode: &quot; + Integer.toHexString(i));\r\n        }\r\n    }\r\n\r\nprints the connecting characters that can be used to start an identifer on jdk1.6.0_45\r\n\r\n    character: _, codepoint: 95, hexcode: 5f\r\n    character: ‿, codepoint: 8255, hexcode: 203f\r\n    character: ⁀, codepoint: 8256, hexcode: 2040\r\n    character: ⁔, codepoint: 8276, hexcode: 2054\r\n    character: ・, codepoint: 12539, hexcode: 30fb\r\n    character: ︳, codepoint: 65075, hexcode: fe33\r\n    character: ︴, codepoint: 65076, hexcode: fe34\r\n    character: ﹍, codepoint: 65101, hexcode: fe4d\r\n    character: ﹎, codepoint: 65102, hexcode: fe4e\r\n    character: ﹏, codepoint: 65103, hexcode: fe4f\r\n    character: ＿, codepoint: 65343, hexcode: ff3f\r\n    character: ･, codepoint: 65381, hexcode: ff65\r\n\r\nThe following compiles on jdk1.6.0_45,\r\n\r\n    int _, ‿, ⁀, ⁔, ・, ︳, ︴, ﹍, ﹎, ﹏, ＿, ･ = 0;\r\n\r\nApparently, the above declaration fails to compile on jdk1.7.0_80 &amp; jdk1.8.0_51 for the following two connecting characters (backward compatibility...oops!!!),\r\n\r\n    character: ・, codepoint: 12539, hexcode: 30fb\r\n    character: ･, codepoint: 65381, hexcode: ff65\r\n\r\nAnyway, details aside, ***the exam focuses only on the Basic Latin character set***.\r\n\r\n*Also, for legal identifers in Java, the spec is provided [here][5]. Use the Character class APIs to get more details.*\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28int%29\r\n  [2]: https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28char%29\r\n  [3]: https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#CONNECTOR_PUNCTUATION\r\n  [4]: http://unicode.org/reports/tr44/#General_Category_Values\r\n  [5]: https://docs.oracle.com/javase/specs/jls/se6/html/lexical.html#3.8","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>A connecting character is used to connect two characters.</p>\n\n<p>In Java, a connecting character is the one for which <a href=\"https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28int%29\" rel=\"nofollow\">Character.getType(int codePoint)</a>/<a href=\"https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28char%29\" rel=\"nofollow\">Character.getType(char ch)</a> returns a value equal to <a href=\"https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#CONNECTOR_PUNCTUATION\" rel=\"nofollow\">Character.CONNECTOR_PUNCTUATION</a>.</p>\n\n<p>Note that in Java, the character information is based on Unicode standard which identifies connecting characters by assigning them the general category Pc, which is an alias for <a href=\"http://unicode.org/reports/tr44/#General_Category_Values\" rel=\"nofollow\">Connector_Punctuation</a>.</p>\n\n<p>The following code snippet,</p>\n\n<pre><code>for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++) {\n    if (Character.getType(i) == Character.CONNECTOR_PUNCTUATION\n            &amp;&amp; Character.isJavaIdentifierStart(i)) {\n        System.out.println(\"character: \" + String.valueOf(Character.toChars(i))\n                + \", codepoint: \" + i + \", hexcode: \" + Integer.toHexString(i));\n    }\n}\n</code></pre>\n\n<p>prints the connecting characters that can be used to start an identifer on jdk1.6.0_45</p>\n\n<pre><code>character: _, codepoint: 95, hexcode: 5f\ncharacter: ‿, codepoint: 8255, hexcode: 203f\ncharacter: ⁀, codepoint: 8256, hexcode: 2040\ncharacter: ⁔, codepoint: 8276, hexcode: 2054\ncharacter: ・, codepoint: 12539, hexcode: 30fb\ncharacter: ︳, codepoint: 65075, hexcode: fe33\ncharacter: ︴, codepoint: 65076, hexcode: fe34\ncharacter: ﹍, codepoint: 65101, hexcode: fe4d\ncharacter: ﹎, codepoint: 65102, hexcode: fe4e\ncharacter: ﹏, codepoint: 65103, hexcode: fe4f\ncharacter: ＿, codepoint: 65343, hexcode: ff3f\ncharacter: ･, codepoint: 65381, hexcode: ff65\n</code></pre>\n\n<p>The following compiles on jdk1.6.0_45,</p>\n\n<pre><code>int _, ‿, ⁀, ⁔, ・, ︳, ︴, ﹍, ﹎, ﹏, ＿, ･ = 0;\n</code></pre>\n\n<p>Apparently, the above declaration fails to compile on jdk1.7.0_80 &amp; jdk1.8.0_51 for the following two connecting characters (backward compatibility...oops!!!),</p>\n\n<pre><code>character: ・, codepoint: 12539, hexcode: 30fb\ncharacter: ･, codepoint: 65381, hexcode: ff65\n</code></pre>\n\n<p>Anyway, details aside, <strong><em>the exam focuses only on the Basic Latin character set</em></strong>.</p>\n\n<p><em>Also, for legal identifers in Java, the spec is provided <a href=\"https://docs.oracle.com/javase/specs/jls/se6/html/lexical.html#3.8\" rel=\"nofollow\">here</a>. Use the Character class APIs to get more details.</em></p>\n"},{"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651263639,"creation_date":1464896748,"answer_id":37600805,"question_id":11774099,"body_markdown":"The list of characters you can use **inside** your identifiers (rather than just at the start) is *much* more fun:\r\n\r\n    for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++)\r\n        if (Character.isJavaIdentifierPart(i) &amp;&amp; !Character.isAlphabetic(i))\r\n            System.out.print((char) i + &quot; &quot;);\r\n\r\nThe list is:\r\n\r\n    I wanted to post the output, but it&#39;s forbidden by the SO spam filter. That&#39;s how fun it is!\r\n\r\nIt includes most of the control characters! I mean bells and stuff! You can make your source code ring the fn bell! Or use characters which will only be displayed sometimes, like the soft hyphen.","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>The list of characters you can use <strong>inside</strong> your identifiers (rather than just at the start) is <em>much</em> more fun:</p>\n<pre><code>for (int i = Character.MIN_CODE_POINT; i &lt;= Character.MAX_CODE_POINT; i++)\n    if (Character.isJavaIdentifierPart(i) &amp;&amp; !Character.isAlphabetic(i))\n        System.out.print((char) i + &quot; &quot;);\n</code></pre>\n<p>The list is:</p>\n<pre><code>I wanted to post the output, but it's forbidden by the SO spam filter. That's how fun it is!\n</code></pre>\n<p>It includes most of the control characters! I mean bells and stuff! You can make your source code ring the fn bell! Or use characters which will only be displayed sometimes, like the soft hyphen.</p>\n"},{"tags":[],"owner":{"account_id":9525668,"reputation":61,"user_id":7078947,"display_name":"Ulrich Grepel"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1486629455,"creation_date":1486629455,"answer_id":42131725,"question_id":11774099,"body_markdown":"One of the most, well, fun characters that is allowed in Java identifiers (however not at the start) is the unicode character named &quot;Zero Width Non Joiner&quot; (&amp;amp;zwnj;, U+200C, https://en.wikipedia.org/wiki/Zero-width_non-joiner).\r\n\r\nI had this once in a piece of XML inside an attribute value holding a reference to another piece of that XML. Since the ZWNJ is &quot;zero width&quot; it cannot be seen (except when walking along with the cursor, it is displayed right on the character before). It also couldn&#39;t be seen in the logfile and/or console output. But it was there all the time: copy &amp; paste into search fields got it and thus did not find the referred position. Typing the (visible part of the) string into the search field however found the referred position. Took me a while to figure this out.\r\n\r\nTyping a Zero-Width-Non-Joiner is actually quite easy (too easy) when using the European keyboard layout, at least in its German variant, e.g. &quot;Europatastatur 2.02&quot; - it is reachable with AltGr + &quot;.&quot;, two keys which unfortunately are located directly next to each other on most keyboards and can easily be hit together accidentally.\r\n\r\nBack to Java: I thought well, you could write some code like this:\r\n\r\n    void foo() {\r\n        int i = 1;\r\n        int i‌ = 2;\r\n    }\r\n\r\nwith the second i appended by a zero-width-non-joiner (can&#39;t do that in the above code snipped in stackoverflow&#39;s editor), but that didn&#39;t work. IntelliJ (16.3.3) did not complain, but JavaC (Java 8) did complain about an already defined identifier - it seems JavaC actually allows the ZWNJ character as part of an identifier, but when using reflection to see what it does, the ZWNJ character is stripped off the identifier - something that characters like ‿ aren&#39;t.","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>One of the most, well, fun characters that is allowed in Java identifiers (however not at the start) is the unicode character named \"Zero Width Non Joiner\" (&amp;zwnj;, U+200C, <a href=\"https://en.wikipedia.org/wiki/Zero-width_non-joiner\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Zero-width_non-joiner</a>).</p>\n\n<p>I had this once in a piece of XML inside an attribute value holding a reference to another piece of that XML. Since the ZWNJ is \"zero width\" it cannot be seen (except when walking along with the cursor, it is displayed right on the character before). It also couldn't be seen in the logfile and/or console output. But it was there all the time: copy &amp; paste into search fields got it and thus did not find the referred position. Typing the (visible part of the) string into the search field however found the referred position. Took me a while to figure this out.</p>\n\n<p>Typing a Zero-Width-Non-Joiner is actually quite easy (too easy) when using the European keyboard layout, at least in its German variant, e.g. \"Europatastatur 2.02\" - it is reachable with AltGr + \".\", two keys which unfortunately are located directly next to each other on most keyboards and can easily be hit together accidentally.</p>\n\n<p>Back to Java: I thought well, you could write some code like this:</p>\n\n<pre><code>void foo() {\n    int i = 1;\n    int i‌ = 2;\n}\n</code></pre>\n\n<p>with the second i appended by a zero-width-non-joiner (can't do that in the above code snipped in stackoverflow's editor), but that didn't work. IntelliJ (16.3.3) did not complain, but JavaC (Java 8) did complain about an already defined identifier - it seems JavaC actually allows the ZWNJ character as part of an identifier, but when using reflection to see what it does, the ZWNJ character is stripped off the identifier - something that characters like ‿ aren't.</p>\n"}],"owner":{"account_id":205346,"reputation":48091,"user_id":454049,"accept_rate":72,"display_name":"LuckyLuke"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68289,"favorite_count":0,"down_vote_count":0,"up_vote_count":211,"accepted_answer_id":11774161,"answer_count":7,"score":211,"last_activity_date":1694394001,"creation_date":1343897666,"question_id":11774099,"body_markdown":"I am reading for SCJP and I have a question regarding this line:\r\n\r\n&gt; Identifiers must start with a letter, a currency character ($), or a\r\n&gt; connecting character such as the underscore ( _ ). Identifiers cannot\r\n&gt; start with a number!\r\n\r\nIt states that a valid identifier name can start with a connecting character **such as** underscore. I thought underscores were the only valid option? What other *connecting characters* are there?","title":"What are &quot;connecting characters&quot; in Java identifiers?","body":"<p>I am reading for SCJP and I have a question regarding this line:</p>\n\n<blockquote>\n  <p>Identifiers must start with a letter, a currency character ($), or a\n  connecting character such as the underscore ( _ ). Identifiers cannot\n  start with a number!</p>\n</blockquote>\n\n<p>It states that a valid identifier name can start with a connecting character <strong>such as</strong> underscore. I thought underscores were the only valid option? What other <em>connecting characters</em> are there?</p>\n"},{"tags":["java","swing","jscrollpane"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694390400,"post_id":77078270,"comment_id":135880792,"body_markdown":"*&quot;JScrollPane scroll bar is fixed&quot;* then you&#39;ve done it wrong","body":"<i>&quot;JScrollPane scroll bar is fixed&quot;</i> then you&#39;ve done it wrong"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694390546,"post_id":77078270,"comment_id":135880804,"body_markdown":"Don&#39;t do `viewport.add(chatPanel);` this isn&#39;t how scroll panes work.  Instead, create a &quot;conversation pane&quot; onto which your `CharPanel`s can be added.  The `JScrollPane` should wrap the &quot;conversation pane&quot; (see things like the `JScrollPane` constructor or `JScrollPane#setViewportView`. In fact you might actually just want to look at [How to Use Scroll Panes](https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html))","body":"Don&#39;t do <code>viewport.add(chatPanel);</code> this isn&#39;t how scroll panes work.  Instead, create a &quot;conversation pane&quot; onto which your <code>CharPanel</code>s can be added.  The <code>JScrollPane</code> should wrap the &quot;conversation pane&quot; (see things like the <code>JScrollPane</code> constructor or <code>JScrollPane#setViewportView</code>. In fact you might actually just want to look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">How to Use Scroll Panes</a>)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694390576,"post_id":77078270,"comment_id":135880807,"body_markdown":"I would also consider using a `JList` with custom cell renderers over using &quot;live&quot; components this way, but that&#39;s me","body":"I would also consider using a <code>JList</code> with custom cell renderers over using &quot;live&quot; components this way, but that&#39;s me"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694390834,"post_id":77078270,"comment_id":135880831,"body_markdown":"`static JScrollPane scrollPane = new JScrollPane(inner_background);` is a bad idea - `static` is not your friend in this context.  This is ignoring principles like encapsulation and single responsibility, is exposing portions or your code to manipulation in ways which weren&#39;t intended (see single responsibility principle) and would be better handled using things like dependency injection and/or observer patterns","body":"<code>static JScrollPane scrollPane = new JScrollPane(inner_background);</code> is a bad idea - <code>static</code> is not your friend in this context.  This is ignoring principles like encapsulation and single responsibility, is exposing portions or your code to manipulation in ways which weren&#39;t intended (see single responsibility principle) and would be better handled using things like dependency injection and/or observer patterns"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1694391104,"post_id":77078270,"comment_id":135880843,"body_markdown":"Get rid of all the setPreferredSize() statements. It is the job of the layout manager to determine the preferred size of the component.  Setting the preferred size of the component added to the viewport of the scrollpane will prevent scrolling from working properly. Also, I see no need to use a layered pane.","body":"Get rid of all the setPreferredSize() statements. It is the job of the layout manager to determine the preferred size of the component.  Setting the preferred size of the component added to the viewport of the scrollpane will prevent scrolling from working properly. Also, I see no need to use a layered pane."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694391172,"post_id":77078270,"comment_id":135880848,"body_markdown":"The use of `JLayeredPane` in this way seems naive to me.  `JLayeredPane` isn&#39;t the simplest component to deal with and you&#39;re adding the additional overhead of having to (in a naive way) manage the layout.  Instead, you should be taking the time to learn and understand the available layout managers and making use of &quot;compound&quot; layouts to help solve complex UIs. Maybe start with [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)","body":"The use of <code>JLayeredPane</code> in this way seems naive to me.  <code>JLayeredPane</code> isn&#39;t the simplest component to deal with and you&#39;re adding the additional overhead of having to (in a naive way) manage the layout.  Instead, you should be taking the time to learn and understand the available layout managers and making use of &quot;compound&quot; layouts to help solve complex UIs. Maybe start with <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a>"}],"owner":{"account_id":29397182,"reputation":13,"user_id":22524270,"display_name":"PokeCedGo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694391206,"creation_date":1694389795,"question_id":77078270,"body_markdown":"I&#39;ve already created a working scrolling pane using JScrollPane, however, the current code works as follows: I type something into the chat input, press enter, it creates a JPanel and adds it to the JScrollPane. However, the JScrollPane scroll bar is fixed. Is there a property where I can change it&#39;s canvas size so I can actually &quot;scroll&quot; the scrolling bar. Or is there a simpler method to achieve what I&#39;m trying to do?\r\n\r\nChatUI.java\r\n\r\n```\r\nimport javax.swing.*;\r\nimport javax.swing.border.LineBorder;\r\nimport java.awt.Font;\r\nimport java.awt.Image;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\npublic class ChatUI {\r\n    static JTextField chat_input = new JTextField(8);\r\n    static JPanel inner_background = new JPanel();\r\n    static JScrollPane scrollPane = new JScrollPane(inner_background);\r\n\r\n    public static String getTextFieldText() {\r\n        return chat_input.getText();\r\n    }\r\n\r\n    public static void createScrollingList(JLayeredPane layeredPane) {\r\n        // Set the layout manager for the inner background panel\r\n        inner_background.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS));\r\n\r\n        // Set the preferred size of inner_background to be larger than the visible area\r\n        inner_background.setPreferredSize(new Dimension(300, 1000));\r\n\r\n        // Other settings for the inner background panel\r\n        inner_background.setBackground(Color.decode(&quot;#111214&quot;));\r\n        inner_background.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\r\n\r\n        layeredPane.add(inner_background, Integer.valueOf(0));\r\n\r\n        // Configure the JScrollPane\r\n        scrollPane.setBounds(20, 200, 330, 450);\r\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n        scrollPane.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\r\n\r\n      \r\n        scrollPane.setPreferredSize(new Dimension(400, 1000)); // Set a larger preferred size\r\n      //  scrollPane.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS)); // Use BoxLayout for vertical layout\r\n\r\n        // Add some components to the content panel\r\n        for (int i = 0; i &lt; 20; i++) {\r\n            JButton button = new JButton(&quot;Button &quot; + i);\r\n            scrollPane.add(button);\r\n        }\r\n        // Add the JScrollPane to the layeredPane\r\n        layeredPane.add(scrollPane, Integer.valueOf(2));\r\n    }\r\n\r\n\r\n    static void UIVisuals(JFrame frame, JLayeredPane layeredPane) {\r\n        // Left frame\r\n        JPanel topBackground = new JPanel();\r\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\r\n        topBackground.setBounds(0, 0, 500, 80);\r\n\r\n        // Right frame\r\n        JPanel rightFrame = new JPanel();\r\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\r\n        rightFrame.setBounds(20, 40, 20, 20);\r\n\r\n        // Add frames to layeredPane\r\n        layeredPane.add(rightFrame, Integer.valueOf(1));\r\n        layeredPane.add(topBackground, Integer.valueOf(1));\r\n\r\n       // User_Icon\r\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\r\n        JLabel userLabel = new JLabel(userIcon);\r\n        userLabel.setBounds(0, 30, userIcon.getIconWidth(), userIcon.getIconHeight()); // Adjust the bounds as needed\r\n        layeredPane.add(userLabel, Integer.valueOf(2));\r\n\r\n        // Emoji Button\r\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\r\n\r\n        // Create a JButton and set the image icon\r\n        JButton gift_button = new JButton(imageIcon);\r\n        gift_button.setBounds(320, 670, 40, 40);\r\n        layeredPane.add(gift_button, Integer.valueOf(2));\r\n\r\n        // Make button transparent\r\n        gift_button.setOpaque(false);\r\n        gift_button.setContentAreaFilled(false);\r\n        gift_button.setBorderPainted(false);\r\n\r\n        // Texting Panel\r\n        chat_input.setBackground(Color.decode(&quot;#383A40&quot;));\r\n        chat_input.setForeground(Color.WHITE);\r\n        chat_input.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\r\n\r\n        // Font setup\r\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 15);\r\n        chat_input.setFont(f3);\r\n\r\n        // Adjust the position and size of the chat input\r\n        chat_input.setBounds(20, 670, 280, 40);\r\n        layeredPane.add(chat_input, Integer.valueOf(1));\r\n\r\n        JPanel bottomPanel = new JPanel();\r\n        bottomPanel.setLayout(null); // Set null layout for precise positioning\r\n        bottomPanel.add(chat_input);\r\n\r\n        // Add components to layeredPane\r\n        layeredPane.add(chat_input, Integer.valueOf(1));\r\n        layeredPane.add(bottomPanel, BorderLayout.SOUTH);\r\n\r\n        // Event Listeners\r\n        EventListeners eventListeners = new EventListeners(gift_button, chat_input);\r\n        chat_input.addActionListener(eventListeners);\r\n        gift_button.addActionListener(eventListeners);\r\n\r\n        createScrollingList(layeredPane);\r\n\r\n\r\n\r\n        \r\n    }\r\n}\r\n\r\n```\r\n\r\nEventListeners.java\r\n\r\n\r\n```\r\n  import java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JViewport;\r\n\r\npublic class EventListeners implements ActionListener {\r\n    private final JButton button;\r\n    private final JTextField textField;\r\n\r\n    public EventListeners(JButton gift_button, JTextField textField) {\r\n        this.button = gift_button;\r\n        this.textField = textField;\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == button) {\r\n            //Gift Button\r\n                System.out.println(&quot;Button clicked&quot;);\r\n              \r\n        } else if (e.getSource() == textField) {\r\n            //Enter \r\n            String input = textField.getText();\r\n            if (!input.isEmpty()) {\r\n                     System.out.println(&quot;Enter key pressed: &quot; + input);\r\n                textField.setText(&quot;&quot;);\r\n\r\n                // Create a JPanel to add to the JScrollPane\r\n                JPanel chatPanel = new JPanel();\r\n                chatPanel.setPreferredSize(new Dimension(20, 10)); // Set the preferred size\r\n                chatPanel.setBackground(Color.YELLOW); // Set the background color or customize as needed\r\n\r\n                // Add the chatPanel to the JScrollPane&#39;s viewport\r\n                JViewport viewport = ChatUI.scrollPane.getViewport();\r\n                viewport.add(chatPanel);\r\n\r\n                // Repaint the viewport to reflect changes\r\n                viewport.repaint();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI&#39;ve attempted changing the size of the panel that gets added into the ScrollingPane and it doesn&#39;t seem to change in size and rather covers the entire scrolling Pane. Again, not sure if there is a proprety I&#39;m not aware of about JScrollPane that can change its canvas size resulting in the scroll bar to actually be scrollable.\r\n\r\n[![https://i.stack.imgur.com/aTTg0.png][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aTTg0.png","title":"How to create a Scrolling Pane for a Chat System?","body":"<p>I've already created a working scrolling pane using JScrollPane, however, the current code works as follows: I type something into the chat input, press enter, it creates a JPanel and adds it to the JScrollPane. However, the JScrollPane scroll bar is fixed. Is there a property where I can change it's canvas size so I can actually &quot;scroll&quot; the scrolling bar. Or is there a simpler method to achieve what I'm trying to do?</p>\n<p>ChatUI.java</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.Font;\nimport java.awt.Image;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\n\npublic class ChatUI {\n    static JTextField chat_input = new JTextField(8);\n    static JPanel inner_background = new JPanel();\n    static JScrollPane scrollPane = new JScrollPane(inner_background);\n\n    public static String getTextFieldText() {\n        return chat_input.getText();\n    }\n\n    public static void createScrollingList(JLayeredPane layeredPane) {\n        // Set the layout manager for the inner background panel\n        inner_background.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS));\n\n        // Set the preferred size of inner_background to be larger than the visible area\n        inner_background.setPreferredSize(new Dimension(300, 1000));\n\n        // Other settings for the inner background panel\n        inner_background.setBackground(Color.decode(&quot;#111214&quot;));\n        inner_background.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\n\n        layeredPane.add(inner_background, Integer.valueOf(0));\n\n        // Configure the JScrollPane\n        scrollPane.setBounds(20, 200, 330, 450);\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        scrollPane.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\n\n      \n        scrollPane.setPreferredSize(new Dimension(400, 1000)); // Set a larger preferred size\n      //  scrollPane.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS)); // Use BoxLayout for vertical layout\n\n        // Add some components to the content panel\n        for (int i = 0; i &lt; 20; i++) {\n            JButton button = new JButton(&quot;Button &quot; + i);\n            scrollPane.add(button);\n        }\n        // Add the JScrollPane to the layeredPane\n        layeredPane.add(scrollPane, Integer.valueOf(2));\n    }\n\n\n    static void UIVisuals(JFrame frame, JLayeredPane layeredPane) {\n        // Left frame\n        JPanel topBackground = new JPanel();\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\n        topBackground.setBounds(0, 0, 500, 80);\n\n        // Right frame\n        JPanel rightFrame = new JPanel();\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\n        rightFrame.setBounds(20, 40, 20, 20);\n\n        // Add frames to layeredPane\n        layeredPane.add(rightFrame, Integer.valueOf(1));\n        layeredPane.add(topBackground, Integer.valueOf(1));\n\n       // User_Icon\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\n        JLabel userLabel = new JLabel(userIcon);\n        userLabel.setBounds(0, 30, userIcon.getIconWidth(), userIcon.getIconHeight()); // Adjust the bounds as needed\n        layeredPane.add(userLabel, Integer.valueOf(2));\n\n        // Emoji Button\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\n\n        // Create a JButton and set the image icon\n        JButton gift_button = new JButton(imageIcon);\n        gift_button.setBounds(320, 670, 40, 40);\n        layeredPane.add(gift_button, Integer.valueOf(2));\n\n        // Make button transparent\n        gift_button.setOpaque(false);\n        gift_button.setContentAreaFilled(false);\n        gift_button.setBorderPainted(false);\n\n        // Texting Panel\n        chat_input.setBackground(Color.decode(&quot;#383A40&quot;));\n        chat_input.setForeground(Color.WHITE);\n        chat_input.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\n\n        // Font setup\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 15);\n        chat_input.setFont(f3);\n\n        // Adjust the position and size of the chat input\n        chat_input.setBounds(20, 670, 280, 40);\n        layeredPane.add(chat_input, Integer.valueOf(1));\n\n        JPanel bottomPanel = new JPanel();\n        bottomPanel.setLayout(null); // Set null layout for precise positioning\n        bottomPanel.add(chat_input);\n\n        // Add components to layeredPane\n        layeredPane.add(chat_input, Integer.valueOf(1));\n        layeredPane.add(bottomPanel, BorderLayout.SOUTH);\n\n        // Event Listeners\n        EventListeners eventListeners = new EventListeners(gift_button, chat_input);\n        chat_input.addActionListener(eventListeners);\n        gift_button.addActionListener(eventListeners);\n\n        createScrollingList(layeredPane);\n\n\n\n        \n    }\n}\n\n</code></pre>\n<p>EventListeners.java</p>\n<pre><code>  import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.JViewport;\n\npublic class EventListeners implements ActionListener {\n    private final JButton button;\n    private final JTextField textField;\n\n    public EventListeners(JButton gift_button, JTextField textField) {\n        this.button = gift_button;\n        this.textField = textField;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == button) {\n            //Gift Button\n                System.out.println(&quot;Button clicked&quot;);\n              \n        } else if (e.getSource() == textField) {\n            //Enter \n            String input = textField.getText();\n            if (!input.isEmpty()) {\n                     System.out.println(&quot;Enter key pressed: &quot; + input);\n                textField.setText(&quot;&quot;);\n\n                // Create a JPanel to add to the JScrollPane\n                JPanel chatPanel = new JPanel();\n                chatPanel.setPreferredSize(new Dimension(20, 10)); // Set the preferred size\n                chatPanel.setBackground(Color.YELLOW); // Set the background color or customize as needed\n\n                // Add the chatPanel to the JScrollPane's viewport\n                JViewport viewport = ChatUI.scrollPane.getViewport();\n                viewport.add(chatPanel);\n\n                // Repaint the viewport to reflect changes\n                viewport.repaint();\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>I've attempted changing the size of the panel that gets added into the ScrollingPane and it doesn't seem to change in size and rather covers the entire scrolling Pane. Again, not sure if there is a proprety I'm not aware of about JScrollPane that can change its canvas size resulting in the scroll bar to actually be scrollable.</p>\n<p><a href=\"https://i.stack.imgur.com/aTTg0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aTTg0.png\" alt=\"https://i.stack.imgur.com/aTTg0.png\" /></a></p>\n"},{"tags":["java","spring","hibernate","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637243260,"creation_date":1637243260,"answer_id":70021006,"question_id":70002332,"body_markdown":"The Hibernate configuration is for setting query timeout is:\r\n\r\n    javax.persistence.query.timeout\r\n\r\nIf using Springboot application properties:\r\n\r\n    spring.jpa.properties.javax.persistence.query.timeout=123","title":"How to set session time out","body":"<p>The Hibernate configuration is for setting query timeout is:</p>\n<pre><code>javax.persistence.query.timeout\n</code></pre>\n<p>If using Springboot application properties:</p>\n<pre><code>spring.jpa.properties.javax.persistence.query.timeout=123\n</code></pre>\n"}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694391062,"creation_date":1637143381,"question_id":70002332,"body_markdown":"I have an old project which is using Spring (3.2.1.RELEASE) and hibernate-core (3.6.10.Final). Basically, I need to set the time out when any query takes more than 30 seconds to execute.\r\n\r\nPlease find below my existing spring configuration:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n\r\n    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd&quot;&gt;\r\n\r\n    &lt;!-- Hibernate Transaction Manager --&gt;\r\n    &lt;bean id=&quot;transactionManager&quot;\r\n          class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;\r\n             &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;jee:jndi-lookup id=&quot;dataSource&quot; jndi-name=&quot;${jndi.x.name}&quot;&gt;&lt;/jee:jndi-lookup&gt;\r\n    &lt;jee:jndi-lookup id=&quot;dataSourceConfig&quot; jndi-name=&quot;${jndi.y.name}&quot;&gt;&lt;/jee:jndi-lookup&gt;\r\n\r\n\r\n\r\n    &lt;bean id=&quot;sessionFactory&quot;\r\n          class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.format_sql&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.globally_quoted_identifiers&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.CharSet&quot;&gt;utf8&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.characterEncoding&quot;&gt;utf8&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.useUnicode&quot;&gt;false&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;!-- configure hibernate session factory for Local database --&gt;\r\n\r\n    &lt;bean id=&quot;sessionFactoryConfig&quot;\r\n          class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSourceConfig&quot;/&gt;\r\n        &lt;property name=&quot;configLocations&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;classpath:hibernate.cfg.xml&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n                &lt;!--\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\t--&gt;\r\n                &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.globally_quoted_identifiers&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.CharSet&quot;&gt;utf8&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.characterEncoding&quot;&gt;utf8&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.useUnicode&quot;&gt;false&lt;/prop&gt;\r\n      \r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nMy hibernate.cfg.xml is find below:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n\t&lt;session-factory name=&quot;sessionFactoryConfig&quot;&gt;\r\n\t\t&lt;!-- Please keep this in alphabetical order (ascending) --&gt;\r\n\t\t&lt;mapping resource=&quot;mappings/named_queries.xml&quot; /&gt;\r\n\t\t&lt;mapping class=&quot;dummy.test&quot; /&gt;\r\n        &lt;mapping class=&quot;dummy.test2&quot; /&gt;\r\n\r\n\t&lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\n\r\nI have seen the following config:\r\n\r\n    hibernate.c3p0.timeout\r\n\r\nBut based on what I have read, it will remove unused connection in a pool not time out an active session if it is taking more than 30 seconds.\r\n\r\nAny idea how I can achieve the global time out functionality? \r\n\r\n","title":"How to set session time out","body":"<p>I have an old project which is using Spring (3.2.1.RELEASE) and hibernate-core (3.6.10.Final). Basically, I need to set the time out when any query takes more than 30 seconds to execute.</p>\n<p>Please find below my existing spring configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\n    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd&quot;&gt;\n\n    &lt;!-- Hibernate Transaction Manager --&gt;\n    &lt;bean id=&quot;transactionManager&quot;\n          class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;\n             &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;\n    &lt;/bean&gt;\n\n    &lt;jee:jndi-lookup id=&quot;dataSource&quot; jndi-name=&quot;${jndi.x.name}&quot;&gt;&lt;/jee:jndi-lookup&gt;\n    &lt;jee:jndi-lookup id=&quot;dataSourceConfig&quot; jndi-name=&quot;${jndi.y.name}&quot;&gt;&lt;/jee:jndi-lookup&gt;\n\n\n\n    &lt;bean id=&quot;sessionFactory&quot;\n          class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.format_sql&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.globally_quoted_identifiers&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.CharSet&quot;&gt;utf8&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.characterEncoding&quot;&gt;utf8&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.useUnicode&quot;&gt;false&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- configure hibernate session factory for Local database --&gt;\n\n    &lt;bean id=&quot;sessionFactoryConfig&quot;\n          class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSourceConfig&quot;/&gt;\n        &lt;property name=&quot;configLocations&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:hibernate.cfg.xml&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                &lt;!--    &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt; --&gt;\n                &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.globally_quoted_identifiers&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.CharSet&quot;&gt;utf8&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.characterEncoding&quot;&gt;utf8&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.useUnicode&quot;&gt;false&lt;/prop&gt;\n      \n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>My hibernate.cfg.xml is find below:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory name=&quot;sessionFactoryConfig&quot;&gt;\n        &lt;!-- Please keep this in alphabetical order (ascending) --&gt;\n        &lt;mapping resource=&quot;mappings/named_queries.xml&quot; /&gt;\n        &lt;mapping class=&quot;dummy.test&quot; /&gt;\n        &lt;mapping class=&quot;dummy.test2&quot; /&gt;\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>I have seen the following config:</p>\n<pre><code>hibernate.c3p0.timeout\n</code></pre>\n<p>But based on what I have read, it will remove unused connection in a pool not time out an active session if it is taking more than 30 seconds.</p>\n<p>Any idea how I can achieve the global time out functionality?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":10158908,"reputation":8699,"user_id":7583953,"accept_rate":80,"display_name":"Alec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572054224,"creation_date":1572054224,"answer_id":58567407,"question_id":58567397,"body_markdown":"Start at 2 and increment by 2 to get the even numbers:\r\n```\r\nint[] array = new int[10]\r\n\r\nfor(int counter=2; counter &lt;= 20; counter += 2) {\r\n    array[counter/2 - 1] = counter\r\n}\r\n```\r\nor \r\n```\r\nint[] array = new int[10]\r\n\r\nfor(int i=0; i &lt;= 10; i++) {\r\n    array[i] = i*2 + 2\r\n}\r\n```\r\n","title":"Generate even numbers in an int array?","body":"<p>Start at 2 and increment by 2 to get the even numbers:</p>\n\n<pre><code>int[] array = new int[10]\n\nfor(int counter=2; counter &lt;= 20; counter += 2) {\n    array[counter/2 - 1] = counter\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>int[] array = new int[10]\n\nfor(int i=0; i &lt;= 10; i++) {\n    array[i] = i*2 + 2\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14791339,"reputation":149,"user_id":10682178,"display_name":"Ibrahim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1572054377,"creation_date":1572054377,"answer_id":58567414,"question_id":58567397,"body_markdown":"if you want program print even number between 2 &amp; 20 \r\n\r\n    for(int i=2;i&lt;=20;i++)\r\n    {\r\n       if(i%2 == 0)\r\n        print(i)\r\n    }","title":"Generate even numbers in an int array?","body":"<p>if you want program print even number between 2 &amp; 20 </p>\n\n<pre><code>for(int i=2;i&lt;=20;i++)\n{\n   if(i%2 == 0)\n    print(i)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14022334,"reputation":1,"user_id":10128278,"display_name":"oguzhancaner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694374355,"creation_date":1572055016,"answer_id":58567456,"question_id":58567397,"body_markdown":"this is also an option\r\n\r\n\tint i, value;\r\n\tint nums[] = new int[10];\r\n\tfor (i = 0, value = 2; i &lt; nums.length; value = value + 2, i = i + 1) {\r\n\t\tnums[i] = value;\r\n\t}\r\n\tfor (i = 0; i &lt; nums.length; i++) {\r\n\t\tSystem.out.println(nums[i]);\r\n\t}","title":"Generate even numbers in an int array?","body":"<p>this is also an option</p>\n<pre><code>int i, value;\nint nums[] = new int[10];\nfor (i = 0, value = 2; i &lt; nums.length; value = value + 2, i = i + 1) {\n    nums[i] = value;\n}\nfor (i = 0; i &lt; nums.length; i++) {\n    System.out.println(nums[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10546813,"reputation":194,"user_id":7770787,"display_name":"DarkCeptor44"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572055021,"creation_date":1572055021,"answer_id":58567457,"question_id":58567397,"body_markdown":"```java\r\nint[] array = new int[10];\r\n\r\nfor (int i = 0, j = 1; i &lt; array.length &amp;&amp; j &lt;= 20; j++) {\r\n    if (j % 2 == 0) {\r\n        array[i] = j;\r\n        i++;\r\n    }\r\n}\r\n\r\nSystem.out.println(Arrays.toString(array));\r\n```","title":"Generate even numbers in an int array?","body":"<pre class=\"lang-java prettyprint-override\"><code>int[] array = new int[10];\n\nfor (int i = 0, j = 1; i &lt; array.length &amp;&amp; j &lt;= 20; j++) {\n    if (j % 2 == 0) {\n        array[i] = j;\n        i++;\n    }\n}\n\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572055373,"creation_date":1572055063,"answer_id":58567460,"question_id":58567397,"body_markdown":"Java 8: `int[] array = IntStream.range(1, 11).map(x -&gt; x * 2).toArray();`\r\n\r\nOr, to just print: `IntStream.range(1, 11).map(x -&gt; x * 2).forEach(System.out::println);`","title":"Generate even numbers in an int array?","body":"<p>Java 8: <code>int[] array = IntStream.range(1, 11).map(x -&gt; x * 2).toArray();</code></p>\n\n<p>Or, to just print: <code>IntStream.range(1, 11).map(x -&gt; x * 2).forEach(System.out::println);</code></p>\n"},{"tags":[],"owner":{"account_id":16951207,"reputation":1129,"user_id":12260671,"display_name":"www.hybriscx.com"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694374396,"creation_date":1572057278,"answer_id":58567599,"question_id":58567397,"body_markdown":"\r\n\r\nBelow is an example using **do-while**.\r\n\r\nyou can simply **define a range** of expected even numbers using **minVal** and **maxVal**.\r\n\r\nProgram will execute and return list of ordered even numbers for given range. Assuming input values are correct even numbers. You can improve to apply validations.\r\n\r\n```\r\npublic class EvenNumberGenerator {\r\n\r\n\tstatic int minVal=2;         //enter valid min value even number\r\n\tstatic int maxVal = 20;      //enter valid max value even number\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;Integer&gt; evenNumbers = new ArrayList();\r\n\t\tdo {\r\n\t\t\tif(minVal % 2 == 0) {\r\n\t\t\t\tevenNumbers.add(minVal);\r\n\t\t\t}\r\n\t\t\tminVal++;\r\n\t\t} while (!evenNumbers.contains(maxVal));\r\n\t\t\r\n\t\tSystem.out.println(evenNumbers);\r\n\r\n        // evenNumbers.toArray(); in case you need an array\r\n\t}\r\n}\r\n```\r\n**OUTPUT**\r\n```\r\n[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]\r\n```\r\n\r\n","title":"Generate even numbers in an int array?","body":"<p>Below is an example using <strong>do-while</strong>.</p>\n<p>you can simply <strong>define a range</strong> of expected even numbers using <strong>minVal</strong> and <strong>maxVal</strong>.</p>\n<p>Program will execute and return list of ordered even numbers for given range. Assuming input values are correct even numbers. You can improve to apply validations.</p>\n<pre><code>public class EvenNumberGenerator {\n\n    static int minVal=2;         //enter valid min value even number\n    static int maxVal = 20;      //enter valid max value even number\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; evenNumbers = new ArrayList();\n        do {\n            if(minVal % 2 == 0) {\n                evenNumbers.add(minVal);\n            }\n            minVal++;\n        } while (!evenNumbers.contains(maxVal));\n        \n        System.out.println(evenNumbers);\n\n        // evenNumbers.toArray(); in case you need an array\n    }\n}\n</code></pre>\n<p><strong>OUTPUT</strong></p>\n<pre><code>[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572057650,"creation_date":1572057650,"answer_id":58567632,"question_id":58567397,"body_markdown":"From java-9 you can use `IntStream.iterate` to create `int` array\r\n\r\n    int[] arr= IntStream.iterate(2, i-&gt;i&lt;=20, i-&gt;i+2).toArray();\r\n\r\nfor `Integer` array you can use `Stream.iterate`\r\n\r\n    Integer[] ary = Stream.iterate(2, i-&gt;i&lt;=20, i-&gt;i+2).toArray(Integer[]::new);","title":"Generate even numbers in an int array?","body":"<p>From java-9 you can use <code>IntStream.iterate</code> to create <code>int</code> array</p>\n\n<pre><code>int[] arr= IntStream.iterate(2, i-&gt;i&lt;=20, i-&gt;i+2).toArray();\n</code></pre>\n\n<p>for <code>Integer</code> array you can use <code>Stream.iterate</code></p>\n\n<pre><code>Integer[] ary = Stream.iterate(2, i-&gt;i&lt;=20, i-&gt;i+2).toArray(Integer[]::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572058530,"creation_date":1572058530,"answer_id":58567694,"question_id":58567397,"body_markdown":"Using your code as a start, this will work:\r\n\r\n    int[] array = new int[10];\r\n    \r\n    for(int counter=0; counter&lt;array.length; counter++) {\r\n        array[counter] = (counter + 1) * 2;\r\n    }\r\n    System.out.println(Arrays.toString(array));\r\n\r\nThe following will also work with [Eclipse Collections][1]:\r\n\r\n    int[] array = IntInterval.evensFromTo(2, 20).toArray();\r\n    System.out.println(Arrays.toString(array));\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n","title":"Generate even numbers in an int array?","body":"<p>Using your code as a start, this will work:</p>\n\n<pre><code>int[] array = new int[10];\n\nfor(int counter=0; counter&lt;array.length; counter++) {\n    array[counter] = (counter + 1) * 2;\n}\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>The following will also work with <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>:</p>\n\n<pre><code>int[] array = IntInterval.evensFromTo(2, 20).toArray();\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":29296373,"reputation":1,"user_id":22445629,"display_name":"Svitoch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694390612,"creation_date":1694367284,"answer_id":77077238,"question_id":58567397,"body_markdown":"```\r\nfor (int i = 0, j = 0; i &lt; array.length; i++, j += 2)\r\n    array[i] = j;\r\n```","title":"Generate even numbers in an int array?","body":"<pre><code>for (int i = 0, j = 0; i &lt; array.length; i++, j += 2)\n    array[i] = j;\n</code></pre>\n"}],"owner":{"display_name":"user12065019"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1055,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":58567414,"answer_count":9,"score":-1,"last_activity_date":1694390612,"creation_date":1572054085,"question_id":58567397,"body_markdown":"I need to make a 10 element array and the goal is to print out the even numbers from 2 to 20.  I have to do this by adding 2 to the beginning element.  This is what I have so far.  I think I should use a loop as shown but I don&#39;t know how to go about adding 2 and printing that out. \r\n\r\n    int[] array = new int[10];\r\n   \r\n    for(int counter=0; counter&lt;array.length; counter++) {\r\n   \r\n    }\r\n","title":"Generate even numbers in an int array?","body":"<p>I need to make a 10 element array and the goal is to print out the even numbers from 2 to 20.  I have to do this by adding 2 to the beginning element.  This is what I have so far.  I think I should use a loop as shown but I don't know how to go about adding 2 and printing that out.</p>\n<pre><code>int[] array = new int[10];\n\nfor(int counter=0; counter&lt;array.length; counter++) {\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","postman","multipart","http-request-parameters"],"comments":[{"owner":{"account_id":1380512,"reputation":110,"user_id":7388422,"display_name":"Shant Khayalian"},"score":0,"creation_date":1694372290,"post_id":77077363,"comment_id":135879216,"body_markdown":"If you are encountering a 404 error when testing your Spring Boot multipart API endpoint using Postman, it indicates that Postman cannot find the resource at the specified URL. Ensure that the URL you&#39;re using in Postman matches the endpoint mapping in your Spring Boot application. If your Spring Boot application has a base path or context path configured, make sure you include it in the URL. Also, make sure your Postman request is correctly configured to send the data as multipart/form-data and that the field names (person and personImage) match the @RequestParam names in controller method.","body":"If you are encountering a 404 error when testing your Spring Boot multipart API endpoint using Postman, it indicates that Postman cannot find the resource at the specified URL. Ensure that the URL you&#39;re using in Postman matches the endpoint mapping in your Spring Boot application. If your Spring Boot application has a base path or context path configured, make sure you include it in the URL. Also, make sure your Postman request is correctly configured to send the data as multipart/form-data and that the field names (person and personImage) match the @RequestParam names in controller method."},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1694408761,"post_id":77077363,"comment_id":135882009,"body_markdown":"You can also try [this](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954)","body":"You can also try <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">this</a>"},{"owner":{"account_id":26684333,"reputation":175,"user_id":20293876,"display_name":"Nazir"},"score":0,"creation_date":1694444152,"post_id":77077363,"comment_id":135888299,"body_markdown":"Thanjks .  My problem is solved I has an error in matching url with end point.  But I have another issue which I will raise  separately.","body":"Thanjks .  My problem is solved I has an error in matching url with end point.  But I have another issue which I will raise  separately."}],"owner":{"account_id":26684333,"reputation":175,"user_id":20293876,"display_name":"Nazir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694386275,"creation_date":1694369316,"question_id":77077363,"body_markdown":"I am trying to build an api end point to receive formdata along with Image file.  I have a Spring Boot end point shown below:\r\n\r\n~~~\r\n\t@PostMapping(&quot;/user/personUpload&quot;)\r\n\tpublic ResponseEntity&lt;BaseResposeModel&gt; personUploadWithImage(@RequestParam(&quot;person&quot;) PersonModel person, @RequestParam(&quot;personImage&quot;)   MultipartFile file) throws IOException{\r\n.................\r\n\t\t\t \r\n\t}\r\n~~\r\nHow do I test this from postman. I always get 404 resource not found error.\r\n\r\n[!This is the screenshot of Postman for testing the end point.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DjgGH.png","title":"Test Spring Boot Multipart API End Point using Postman","body":"<p>I am trying to build an api end point to receive formdata along with Image file.  I have a Spring Boot end point shown below:</p>\n<pre><code>    @PostMapping(&quot;/user/personUpload&quot;)\n    public ResponseEntity&lt;BaseResposeModel&gt; personUploadWithImage(@RequestParam(&quot;person&quot;) PersonModel person, @RequestParam(&quot;personImage&quot;)   MultipartFile file) throws IOException{\n.................\n             \n    }\n~~\nHow do I test this from postman. I always get 404 resource not found error.\n\n[!This is the screenshot of Postman for testing the end point.][1]][1]\n\n\n  [1]: https://i.stack.imgur.com/DjgGH.png\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1298976310,"creation_date":1298975678,"answer_id":5153307,"question_id":5153252,"body_markdown":"I would use split\r\n\r\n    String text = &quot;A=B&amp;C=D&amp;E=F&quot;;\r\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\r\n    for(String keyValue : text.split(&quot; *&amp; *&quot;)) {\r\n       String[] pairs = keyValue.split(&quot; *= *&quot;, 2);\r\n       map.put(pairs[0], pairs.length == 1 ? &quot;&quot; : pairs[1]);\r\n    }\r\n\r\nEDIT allows for padded spaces and a value with an `=` or no value. e.g.\r\n\r\n    A = minus- &amp; C=equals= &amp; E==F","title":"How to parse the string into map","body":"<p>I would use split</p>\n\n<pre><code>String text = \"A=B&amp;C=D&amp;E=F\";\nMap&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\nfor(String keyValue : text.split(\" *&amp; *\")) {\n   String[] pairs = keyValue.split(\" *= *\", 2);\n   map.put(pairs[0], pairs.length == 1 ? \"\" : pairs[1]);\n}\n</code></pre>\n\n<p>EDIT allows for padded spaces and a value with an <code>=</code> or no value. e.g.</p>\n\n<pre><code>A = minus- &amp; C=equals= &amp; E==F\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41228,"reputation":24523,"user_id":119772,"accept_rate":75,"display_name":"Suraj Chandran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1298975712,"creation_date":1298975712,"answer_id":5153314,"question_id":5153252,"body_markdown":"    String  t = A=B&amp;C=D&amp;E=F;\r\n    Map map = new HashMap();\r\n    String[] pairs = t.split(&quot;&amp;&quot;);\r\n    //TODO 1) Learn generis 2) Use gnerics    \r\n    for (String pair : pairs)\r\n    {\r\n        String[] kv = pair.split(&quot;=&quot;);\r\n        map.put(kv[0], kv[1]);\r\n    }\r\n\r\n  \r\n","title":"How to parse the string into map","body":"<pre><code>String  t = A=B&amp;C=D&amp;E=F;\nMap map = new HashMap();\nString[] pairs = t.split(\"&amp;\");\n//TODO 1) Learn generis 2) Use gnerics    \nfor (String pair : pairs)\n{\n    String[] kv = pair.split(\"=\");\n    map.put(kv[0], kv[1]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":42964,"reputation":26240,"user_id":125382,"accept_rate":91,"display_name":"MAK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1298975766,"creation_date":1298975766,"answer_id":5153325,"question_id":5153252,"body_markdown":"Split the string (either using a `StringTokenizer` or `String.split()`) on &#39;&amp;&#39;. On each token just split again on &#39;=&#39;. Use the first part as the key and the second part as the value.\r\n\r\nIt can also be done using a regex, but the problem is really simple enough for `StringTokenizer`.","title":"How to parse the string into map","body":"<p>Split the string (either using a <code>StringTokenizer</code> or <code>String.split()</code>) on '&amp;'. On each token just split again on '='. Use the first part as the key and the second part as the value.</p>\n\n<p>It can also be done using a regex, but the problem is really simple enough for <code>StringTokenizer</code>.</p>\n"},{"tags":[],"owner":{"account_id":45943,"reputation":19756,"user_id":135624,"accept_rate":88,"display_name":"Paul McKenzie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1298976194,"creation_date":1298976194,"answer_id":5153397,"question_id":5153252,"body_markdown":"    public class TestMapParser {\r\n        @Test\r\n        public void testParsing() {\r\n            Map&lt;String, String&gt; map = parseMap(&quot;A=B&amp;C=D&amp;E=F&quot;);\r\n            Assert.assertTrue(&quot;contains key&quot;, map.containsKey(&quot;A&quot;));\r\n            Assert.assertEquals(&quot;contains value&quot;, &quot;B&quot;, map.get(&quot;A&quot;));\r\n\r\n            Assert.assertTrue(&quot;contains key&quot;, map.containsKey(&quot;C&quot;));\r\n            Assert.assertEquals(&quot;contains value&quot;, &quot;D&quot;, map.get(&quot;C&quot;));\r\n\r\n            Assert.assertTrue(&quot;contains key&quot;, map.containsKey(&quot;E&quot;));\r\n            Assert.assertEquals(&quot;contains value&quot;, &quot;F&quot;, map.get(&quot;E&quot;));\r\n        }\r\n\r\n        private Map&lt;String, String&gt; parseMap(final String input) {\r\n            final Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n            for (String pair : input.split(&quot;&amp;&quot;)) {\r\n                String[] kv = pair.split(&quot;=&quot;);\r\n                map.put(kv[0], kv[1]);\r\n            }\r\n            return map;\r\n        }\r\n    }","title":"How to parse the string into map","body":"<pre><code>public class TestMapParser {\n    @Test\n    public void testParsing() {\n        Map&lt;String, String&gt; map = parseMap(\"A=B&amp;C=D&amp;E=F\");\n        Assert.assertTrue(\"contains key\", map.containsKey(\"A\"));\n        Assert.assertEquals(\"contains value\", \"B\", map.get(\"A\"));\n\n        Assert.assertTrue(\"contains key\", map.containsKey(\"C\"));\n        Assert.assertEquals(\"contains value\", \"D\", map.get(\"C\"));\n\n        Assert.assertTrue(\"contains key\", map.containsKey(\"E\"));\n        Assert.assertEquals(\"contains value\", \"F\", map.get(\"E\"));\n    }\n\n    private Map&lt;String, String&gt; parseMap(final String input) {\n        final Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n        for (String pair : input.split(\"&amp;\")) {\n            String[] kv = pair.split(\"=\");\n            map.put(kv[0], kv[1]);\n        }\n        return map;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162927,"reputation":141,"user_id":6662434,"display_name":"Geker"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1503887327,"creation_date":1503887327,"answer_id":45911088,"question_id":5153252,"body_markdown":"just use guava Splitter\r\n\r\n    String src=&quot;A=B&amp;C=D&amp;E=F&quot;;\r\n    Map map= Splitter.on(&#39;&amp;&#39;).withKeyValueSeparator(&#39;=&#39;).split(src)；\r\n\r\n","title":"How to parse the string into map","body":"<p>just use guava Splitter</p>\n\n<pre><code>String src=\"A=B&amp;C=D&amp;E=F\";\nMap map= Splitter.on('&amp;').withKeyValueSeparator('=').split(src)；\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23167396,"reputation":21,"user_id":17267123,"display_name":"Brando Jeanpier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694382951,"creation_date":1694382951,"answer_id":77078021,"question_id":5153252,"body_markdown":"Using the stream api it can be done in just one sentence.\r\n\r\n    String  t = &quot;A=B&amp;C=D&amp;E=F&quot;;\r\n    Map&lt;String, String&gt; map = Arrays.stream(t.split(&quot;&amp;&quot;))\r\n    .map(kv -&gt; kv.split(&quot;=&quot;))\r\n    .collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));","title":"How to parse the string into map","body":"<p>Using the stream api it can be done in just one sentence.</p>\n<pre><code>String  t = &quot;A=B&amp;C=D&amp;E=F&quot;;\nMap&lt;String, String&gt; map = Arrays.stream(t.split(&quot;&amp;&quot;))\n.map(kv -&gt; kv.split(&quot;=&quot;))\n.collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));\n</code></pre>\n"}],"owner":{"account_id":232243,"reputation":83887,"user_id":496949,"accept_rate":86,"display_name":"user496949"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44191,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":5153307,"answer_count":6,"score":10,"last_activity_date":1694382951,"creation_date":1298975450,"question_id":5153252,"body_markdown":"have a string like A=B&amp;C=D&amp;E=F, how to parse it into map?","title":"How to parse the string into map","body":"<p>have a string like A=B&amp;C=D&amp;E=F, how to parse it into map?</p>\n"},{"tags":["java","spring","hibernate","kotlin"],"answers":[{"tags":[],"owner":{"account_id":2562129,"reputation":5879,"user_id":2223059,"accept_rate":38,"display_name":"craigmiller160"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1688054457,"creation_date":1686330340,"answer_id":76442375,"question_id":76418374,"body_markdown":"Wow, this was quite the rabbit hole. So, a few quick findings for the group. It seems that Hibernate is moving away from the `AbstractSingleColumnStandardBasicType` approach for type definitions. Even after I got it implemented properly, registering it was a nightmare. The primary issue with registering it was that every option that still exists in Hibernate 6 seems to be marked for deprecation. Basically that whole approach was a dead-end.\r\n\r\nThe `AttributeConverter` approach also doesn&#39;t seem to work for more complex types like my `TypedId`. I could never get Hibernate to recognize it.\r\n\r\nIn the end, I discovered that using the `@JavaType` and `@JdbcType` mechanisms Hibernate 6 offers in tandem was the solution.\r\n\r\nFirst, I needed to write a `JavaType` implementation, which was easy since my type is just a wrapper around `UUID`:\r\n\r\n```\r\nclass TypedIdJavaType:\r\n    AbstractClassJavaType&lt;TypedId&lt;*&gt;&gt;(TypedId::class.java) {\r\n  override fun &lt;X : Any?&gt; unwrap(value: TypedId&lt;*&gt;?, type: Class&lt;X&gt;, options: WrapperOptions?): X =\r\n      UUIDJavaType.INSTANCE.unwrap(value?.uuid, type, options)\r\n\r\n  override fun &lt;X : Any?&gt; wrap(value: X, options: WrapperOptions?): TypedId&lt;*&gt; =\r\n      TypedId&lt;Any&gt;(UUIDJavaType.INSTANCE.wrap(value, options))\r\n}\r\n```\r\n\r\nThen, I reference my new `JavaType` via the annotation on my `uid` property. However, I also need to include the `@JdbcType(UUIDJdbcType::class)` as well. See below:\r\n\r\n```\r\n@MappedSuperclass\r\n@TypeDef(defaultForType = TypedId::class, typeClass = TypedIdJpaType::class)\r\nabstract class DatabaseRecord&lt;T&gt; : Persistable&lt;TypedId&lt;T&gt;&gt; {\r\n    @Id \r\n    @JavaType(TypedIdJavaType::class)\r\n    @JdbcType(UUIDJdbcType::class)\r\n    var uid: TypedId&lt;T&gt; = TypedId()\r\n    @Transient private var innerIsNew: Boolean = true\r\n    override fun getId(): TypedId&lt;T&gt; = uid\r\n\r\n    override fun isNew(): Boolean = innerIsNew\r\n\r\n    private fun handleIsNew() {\r\n        innerIsNew = false\r\n    }\r\n\r\n    @PrePersist\r\n    open fun onPrePersist() {\r\n        handleIsNew()\r\n    }\r\n\r\n    @PostLoad\r\n    open fun onPostLoad() {\r\n        handleIsNew()\r\n    }\r\n}\r\n```\r\n\r\nThe reason for needing both appears to be that `@JdbcType` tells Hibernate what this field is supposed to be when it is first scanning the entity. Once it knows what type it is supposed to be via `@JdbcType`, it then checks the other annotations, Hibernate&#39;s configuration, etc to find an available mechanism for converting the provided type to the JDBC Type.\r\n\r\nAnd that&#39;s it. This was a massive rabbit hole that IMO is not well documented at the moment.\r\n","title":"How do I handle custom types in Hibernate 6?","body":"<p>Wow, this was quite the rabbit hole. So, a few quick findings for the group. It seems that Hibernate is moving away from the <code>AbstractSingleColumnStandardBasicType</code> approach for type definitions. Even after I got it implemented properly, registering it was a nightmare. The primary issue with registering it was that every option that still exists in Hibernate 6 seems to be marked for deprecation. Basically that whole approach was a dead-end.</p>\n<p>The <code>AttributeConverter</code> approach also doesn't seem to work for more complex types like my <code>TypedId</code>. I could never get Hibernate to recognize it.</p>\n<p>In the end, I discovered that using the <code>@JavaType</code> and <code>@JdbcType</code> mechanisms Hibernate 6 offers in tandem was the solution.</p>\n<p>First, I needed to write a <code>JavaType</code> implementation, which was easy since my type is just a wrapper around <code>UUID</code>:</p>\n<pre><code>class TypedIdJavaType:\n    AbstractClassJavaType&lt;TypedId&lt;*&gt;&gt;(TypedId::class.java) {\n  override fun &lt;X : Any?&gt; unwrap(value: TypedId&lt;*&gt;?, type: Class&lt;X&gt;, options: WrapperOptions?): X =\n      UUIDJavaType.INSTANCE.unwrap(value?.uuid, type, options)\n\n  override fun &lt;X : Any?&gt; wrap(value: X, options: WrapperOptions?): TypedId&lt;*&gt; =\n      TypedId&lt;Any&gt;(UUIDJavaType.INSTANCE.wrap(value, options))\n}\n</code></pre>\n<p>Then, I reference my new <code>JavaType</code> via the annotation on my <code>uid</code> property. However, I also need to include the <code>@JdbcType(UUIDJdbcType::class)</code> as well. See below:</p>\n<pre><code>@MappedSuperclass\n@TypeDef(defaultForType = TypedId::class, typeClass = TypedIdJpaType::class)\nabstract class DatabaseRecord&lt;T&gt; : Persistable&lt;TypedId&lt;T&gt;&gt; {\n    @Id \n    @JavaType(TypedIdJavaType::class)\n    @JdbcType(UUIDJdbcType::class)\n    var uid: TypedId&lt;T&gt; = TypedId()\n    @Transient private var innerIsNew: Boolean = true\n    override fun getId(): TypedId&lt;T&gt; = uid\n\n    override fun isNew(): Boolean = innerIsNew\n\n    private fun handleIsNew() {\n        innerIsNew = false\n    }\n\n    @PrePersist\n    open fun onPrePersist() {\n        handleIsNew()\n    }\n\n    @PostLoad\n    open fun onPostLoad() {\n        handleIsNew()\n    }\n}\n</code></pre>\n<p>The reason for needing both appears to be that <code>@JdbcType</code> tells Hibernate what this field is supposed to be when it is first scanning the entity. Once it knows what type it is supposed to be via <code>@JdbcType</code>, it then checks the other annotations, Hibernate's configuration, etc to find an available mechanism for converting the provided type to the JDBC Type.</p>\n<p>And that's it. This was a massive rabbit hole that IMO is not well documented at the moment.</p>\n"},{"tags":[],"owner":{"account_id":12174577,"reputation":11,"user_id":8888048,"display_name":"Mitch A."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694382776,"creation_date":1694382776,"answer_id":77078010,"question_id":76418374,"body_markdown":"As mentioned by craigmiller160, the documentation for custom user types in Hibernate 6 is not well documented. Hopefully this improves in the future.\r\n\r\nI had a similar setup (using custom domain object as entity ID) but in addition was using an IdentifierGenerator:\r\n\r\n    public class UserAccountIdGenerator implements IdentifierGenerator {\r\n        @Override\r\n        public Serializable generate(SharedSessionContractImplementor session, Object object)\r\n        throws HibernateException {\r\n            return new UserAccountId(UUID.randomUUID());\r\n        }\r\n    }\r\n\r\n\r\nNote that the type of the return value has to be of the domain object. Otherwise Hibernate throws an (unhelpful) error like so:\r\n\r\n    org.springframework.orm.jpa.JpaSystemException: Could not set value of type [java.lang.String] : `com.mtc.app.UserAccount.id` (setter)\r\n    Caused by: org.hibernate.PropertyAccessException: Could not set value of type [java.lang.String] : `com.mtc.app.UserAccount.id` (setter)\r\n    Caused by: java.lang.IllegalArgumentException: Can not set com.mtc.app.UserAccountId field com.mtc.app.UserAccount.id to java.lang.String\r\n\r\n","title":"How do I handle custom types in Hibernate 6?","body":"<p>As mentioned by craigmiller160, the documentation for custom user types in Hibernate 6 is not well documented. Hopefully this improves in the future.</p>\n<p>I had a similar setup (using custom domain object as entity ID) but in addition was using an IdentifierGenerator:</p>\n<pre><code>public class UserAccountIdGenerator implements IdentifierGenerator {\n    @Override\n    public Serializable generate(SharedSessionContractImplementor session, Object object)\n    throws HibernateException {\n        return new UserAccountId(UUID.randomUUID());\n    }\n}\n</code></pre>\n<p>Note that the type of the return value has to be of the domain object. Otherwise Hibernate throws an (unhelpful) error like so:</p>\n<pre><code>org.springframework.orm.jpa.JpaSystemException: Could not set value of type [java.lang.String] : `com.mtc.app.UserAccount.id` (setter)\nCaused by: org.hibernate.PropertyAccessException: Could not set value of type [java.lang.String] : `com.mtc.app.UserAccount.id` (setter)\nCaused by: java.lang.IllegalArgumentException: Can not set com.mtc.app.UserAccountId field com.mtc.app.UserAccount.id to java.lang.String\n</code></pre>\n"}],"owner":{"account_id":2562129,"reputation":5879,"user_id":2223059,"accept_rate":38,"display_name":"craigmiller160"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1618,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76442375,"answer_count":2,"score":4,"last_activity_date":1694382776,"creation_date":1686084669,"question_id":76418374,"body_markdown":"**Issue Summary**\r\n\r\nI have a custom type that I use in a project with Spring Boot 2/Hibernate 5. I am attempting to migrate this project to Spring Boot 3/Hibernate 6 and I cannot seem to get this custom type to work. This type is a wrapper around a UUID, and should be treated as a UUID when reading/writing from/to a database.\r\n\r\n**Existing Code**\r\n\r\nMy `TypedId` class allows for distinguishing different UUIDs based on the entity they are associated with. It&#39;s a relatively simple class:\r\n\r\n```\r\ndata class TypedId&lt;T&gt;(val uuid: UUID = UUID.randomUUID()) : Serializable, Comparable&lt;TypedId&lt;T&gt;&gt; {\r\n  constructor(id: String) : this(UUID.fromString(id))\r\n\r\n  override fun compareTo(other: TypedId&lt;T&gt;): Int = this.uuid.compareTo(other.uuid)\r\n\r\n  override fun toString(): String = uuid.toString()\r\n}\r\n```\r\n\r\nThis is configured in a base DatabaseRecord abstract class that all my JPA Entities extend:\r\n\r\n```\r\n@MappedSuperclass\r\n@TypeDef(defaultForType = TypedId::class, typeClass = TypedIdJpaType::class)\r\nabstract class DatabaseRecord&lt;T&gt; : Persistable&lt;TypedId&lt;T&gt;&gt; {\r\n\t@Id var uid: TypedId&lt;T&gt; = TypedId()\r\n\t@Transient private var innerIsNew: Boolean = true\r\n\toverride fun getId(): TypedId&lt;T&gt; = uid\r\n\r\n\toverride fun isNew(): Boolean = innerIsNew\r\n\r\n\tprivate fun handleIsNew() {\r\n\t\tinnerIsNew = false\r\n\t}\r\n\r\n\t@PrePersist\r\n\topen fun onPrePersist() {\r\n\t\thandleIsNew()\r\n\t}\r\n\r\n\t@PostLoad\r\n\topen fun onPostLoad() {\r\n\t\thandleIsNew()\r\n\t}\r\n}\r\n```\r\n\r\nThe important part of the above code is the `@TypeDef`. That points to the JPA Type class that configures the entire type definition. Here is the relevant code pulled in by that annotation:\r\n\r\n```\r\nclass TypedIdJpaType :\r\n    AbstractSingleColumnStandardBasicType&lt;TypedId&lt;*&gt;&gt;(\r\n        PostgresUUIDSqlTypeDescriptor.INSTANCE, TypedIdDescriptor.INSTANCE) {\r\n  override fun getName(): String = TypedId::class.java.simpleName\r\n  override fun registerUnderJavaType(): Boolean = true\r\n}\r\n\r\nclass TypedIdDescriptor : AbstractTypeDescriptor&lt;TypedId&lt;*&gt;&gt;(TypedId::class.java) {\r\n  companion object {\r\n    val INSTANCE = TypedIdDescriptor()\r\n  }\r\n  override fun fromString(string: String): TypedId&lt;*&gt; = TypedId&lt;Any&gt;(string)\r\n\r\n  override fun &lt;X : Any&gt; wrap(value: X?, options: WrapperOptions): TypedId&lt;*&gt;? =\r\n      value?.let { nonNullValue -&gt;\r\n        when (nonNullValue) {\r\n          is ByteArray -&gt;\r\n              TypedId(UUIDTypeDescriptor.ToBytesTransformer.INSTANCE.parse(nonNullValue))\r\n          is String -&gt;\r\n              TypedId&lt;Any&gt;(UUIDTypeDescriptor.ToStringTransformer.INSTANCE.parse(nonNullValue))\r\n          is UUID -&gt; TypedId&lt;Any&gt;(nonNullValue)\r\n          else -&gt; throw unknownWrap(nonNullValue::class.java)\r\n        }\r\n      }\r\n\r\n  override fun &lt;X : Any&gt; unwrap(value: TypedId&lt;*&gt;, type: Class&lt;X&gt;, options: WrapperOptions): X =\r\n      UUIDTypeDescriptor.INSTANCE.unwrap(value.uuid, type, options)\r\n}\r\n\r\n```\r\n\r\nLastly, here is my sample entity that I have created for very basic test cases involving all of this code:\r\n\r\n```\r\ninterface CountryId\r\n\r\n@Entity\r\n@Table(name = &quot;countries&quot;)\r\nclass Country(var name: String = &quot;&quot;) : DatabaseRecord&lt;CountryId&gt;()\r\n```\r\n\r\n**The Core Problem**\r\n\r\nWith Hibernate 6, `@TypeDef`, `TypeDescriptor`, etc are all removed. This means the entire mechanism for converting the `TypedId` no longer works. I&#39;ve been trying to identify an alternate solution.\r\n\r\n**The Question**\r\n\r\nI&#39;ve tried a `Converter`. I&#39;ve tried implementing `AbstractStandardBasicType`. I&#39;m just very lost right now.\r\n\r\nI&#39;ve been reading over the new Hibernate 6 user guide, but nothing I&#39;ve gleaned from there has helped yet.\r\n\r\n**Additional Details**\r\n\r\nAfter posting this question, I realized the error message should be useful. This happens when I try to use a Spring `JpaRepository` to save (aka insert) the above entity:\r\n\r\n```\r\ncould not execute statement [ERROR: column &quot;uid&quot; is of type uuid but expression is of type bytea\r\n  Hint: You will need to rewrite or cast the expression.\r\n```","title":"How do I handle custom types in Hibernate 6?","body":"<p><strong>Issue Summary</strong></p>\n<p>I have a custom type that I use in a project with Spring Boot 2/Hibernate 5. I am attempting to migrate this project to Spring Boot 3/Hibernate 6 and I cannot seem to get this custom type to work. This type is a wrapper around a UUID, and should be treated as a UUID when reading/writing from/to a database.</p>\n<p><strong>Existing Code</strong></p>\n<p>My <code>TypedId</code> class allows for distinguishing different UUIDs based on the entity they are associated with. It's a relatively simple class:</p>\n<pre><code>data class TypedId&lt;T&gt;(val uuid: UUID = UUID.randomUUID()) : Serializable, Comparable&lt;TypedId&lt;T&gt;&gt; {\n  constructor(id: String) : this(UUID.fromString(id))\n\n  override fun compareTo(other: TypedId&lt;T&gt;): Int = this.uuid.compareTo(other.uuid)\n\n  override fun toString(): String = uuid.toString()\n}\n</code></pre>\n<p>This is configured in a base DatabaseRecord abstract class that all my JPA Entities extend:</p>\n<pre><code>@MappedSuperclass\n@TypeDef(defaultForType = TypedId::class, typeClass = TypedIdJpaType::class)\nabstract class DatabaseRecord&lt;T&gt; : Persistable&lt;TypedId&lt;T&gt;&gt; {\n    @Id var uid: TypedId&lt;T&gt; = TypedId()\n    @Transient private var innerIsNew: Boolean = true\n    override fun getId(): TypedId&lt;T&gt; = uid\n\n    override fun isNew(): Boolean = innerIsNew\n\n    private fun handleIsNew() {\n        innerIsNew = false\n    }\n\n    @PrePersist\n    open fun onPrePersist() {\n        handleIsNew()\n    }\n\n    @PostLoad\n    open fun onPostLoad() {\n        handleIsNew()\n    }\n}\n</code></pre>\n<p>The important part of the above code is the <code>@TypeDef</code>. That points to the JPA Type class that configures the entire type definition. Here is the relevant code pulled in by that annotation:</p>\n<pre><code>class TypedIdJpaType :\n    AbstractSingleColumnStandardBasicType&lt;TypedId&lt;*&gt;&gt;(\n        PostgresUUIDSqlTypeDescriptor.INSTANCE, TypedIdDescriptor.INSTANCE) {\n  override fun getName(): String = TypedId::class.java.simpleName\n  override fun registerUnderJavaType(): Boolean = true\n}\n\nclass TypedIdDescriptor : AbstractTypeDescriptor&lt;TypedId&lt;*&gt;&gt;(TypedId::class.java) {\n  companion object {\n    val INSTANCE = TypedIdDescriptor()\n  }\n  override fun fromString(string: String): TypedId&lt;*&gt; = TypedId&lt;Any&gt;(string)\n\n  override fun &lt;X : Any&gt; wrap(value: X?, options: WrapperOptions): TypedId&lt;*&gt;? =\n      value?.let { nonNullValue -&gt;\n        when (nonNullValue) {\n          is ByteArray -&gt;\n              TypedId(UUIDTypeDescriptor.ToBytesTransformer.INSTANCE.parse(nonNullValue))\n          is String -&gt;\n              TypedId&lt;Any&gt;(UUIDTypeDescriptor.ToStringTransformer.INSTANCE.parse(nonNullValue))\n          is UUID -&gt; TypedId&lt;Any&gt;(nonNullValue)\n          else -&gt; throw unknownWrap(nonNullValue::class.java)\n        }\n      }\n\n  override fun &lt;X : Any&gt; unwrap(value: TypedId&lt;*&gt;, type: Class&lt;X&gt;, options: WrapperOptions): X =\n      UUIDTypeDescriptor.INSTANCE.unwrap(value.uuid, type, options)\n}\n\n</code></pre>\n<p>Lastly, here is my sample entity that I have created for very basic test cases involving all of this code:</p>\n<pre><code>interface CountryId\n\n@Entity\n@Table(name = &quot;countries&quot;)\nclass Country(var name: String = &quot;&quot;) : DatabaseRecord&lt;CountryId&gt;()\n</code></pre>\n<p><strong>The Core Problem</strong></p>\n<p>With Hibernate 6, <code>@TypeDef</code>, <code>TypeDescriptor</code>, etc are all removed. This means the entire mechanism for converting the <code>TypedId</code> no longer works. I've been trying to identify an alternate solution.</p>\n<p><strong>The Question</strong></p>\n<p>I've tried a <code>Converter</code>. I've tried implementing <code>AbstractStandardBasicType</code>. I'm just very lost right now.</p>\n<p>I've been reading over the new Hibernate 6 user guide, but nothing I've gleaned from there has helped yet.</p>\n<p><strong>Additional Details</strong></p>\n<p>After posting this question, I realized the error message should be useful. This happens when I try to use a Spring <code>JpaRepository</code> to save (aka insert) the above entity:</p>\n<pre><code>could not execute statement [ERROR: column &quot;uid&quot; is of type uuid but expression is of type bytea\n  Hint: You will need to rewrite or cast the expression.\n</code></pre>\n"},{"tags":["java","junit","cucumber","cucumber-java","cucumber-junit"],"answers":[{"tags":[],"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1694382309,"creation_date":1568164315,"answer_id":57879850,"question_id":57879703,"body_markdown":"From https://cucumber.io/docs/cucumber/cucumber-expressions/\r\n\r\n&gt; {string} Matches single-quoted or double-quoted strings,\r\n&gt; for example &quot;banana split&quot; or &#39;banana split&#39; (but not banana split). \r\n\r\nFor your currency code that does not have any quotes (nor any spaces), you want `{word}`, so:\r\n\r\n     @When(&quot;I deposit {int} of {word}&quot;)\r\n\r\n","title":"Java Cucumber does not recognize my string parameter","body":"<p>From <a href=\"https://cucumber.io/docs/cucumber/cucumber-expressions/\" rel=\"nofollow noreferrer\">https://cucumber.io/docs/cucumber/cucumber-expressions/</a></p>\n<blockquote>\n<p>{string} Matches single-quoted or double-quoted strings,\nfor example &quot;banana split&quot; or 'banana split' (but not banana split).</p>\n</blockquote>\n<p>For your currency code that does not have any quotes (nor any spaces), you want <code>{word}</code>, so:</p>\n<pre><code> @When(&quot;I deposit {int} of {word}&quot;)\n</code></pre>\n"}],"owner":{"account_id":3191393,"reputation":91,"user_id":2695543,"accept_rate":59,"display_name":"user2695543"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10104,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":57879850,"answer_count":1,"score":7,"last_activity_date":1694382309,"creation_date":1568162723,"question_id":57879703,"body_markdown":"Cucumber doesn&#39;t recognize the String parameter what I would like to use it as currency. It only recognise int value. (It finds the steps because other steps works)\r\n\r\n    @When(&quot;I deposit {int} of {string}&quot;)\r\n    public void testDeposit(int value, String currency) throws ClientProtocolException, IOException {\r\n\r\nIt shows the following error message:\r\n\r\n    There were undefined steps. You can implement missing steps with the snippets below:\r\n    \r\n    @When(&quot;I deposit {int} of GBP&quot;)\r\n    public void i_deposit_of_GBP(Integer int1) {\r\n        // Write code here that turns the phrase above into concrete actions\r\n        throw new cucumber.api.PendingException();\r\n    }\r\n    \r\n    @Then(&quot;My balance is {int} of GBP&quot;)\r\n    public void my_balance_is_of_GBP(Integer int1) {\r\n        // Write code here that turns the phrase above into concrete actions\r\n        throw new cucumber.api.PendingException();\r\n    }\r\n\r\n - Given I created an account\r\n - When I deposit 100 of GBP\r\n - Then My balance is 100 of GBP\r\n\r\nWhat can be the problem?","title":"Java Cucumber does not recognize my string parameter","body":"<p>Cucumber doesn't recognize the String parameter what I would like to use it as currency. It only recognise int value. (It finds the steps because other steps works)</p>\n\n<pre><code>@When(\"I deposit {int} of {string}\")\npublic void testDeposit(int value, String currency) throws ClientProtocolException, IOException {\n</code></pre>\n\n<p>It shows the following error message:</p>\n\n<pre><code>There were undefined steps. You can implement missing steps with the snippets below:\n\n@When(\"I deposit {int} of GBP\")\npublic void i_deposit_of_GBP(Integer int1) {\n    // Write code here that turns the phrase above into concrete actions\n    throw new cucumber.api.PendingException();\n}\n\n@Then(\"My balance is {int} of GBP\")\npublic void my_balance_is_of_GBP(Integer int1) {\n    // Write code here that turns the phrase above into concrete actions\n    throw new cucumber.api.PendingException();\n}\n</code></pre>\n\n<ul>\n<li>Given I created an account</li>\n<li>When I deposit 100 of GBP</li>\n<li>Then My balance is 100 of GBP</li>\n</ul>\n\n<p>What can be the problem?</p>\n"},{"tags":["java","spring-boot","parsing","jsoup"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694409010,"post_id":77077969,"comment_id":135882044,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":29410077,"reputation":11,"user_id":22534157,"display_name":"Михаил А"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694381705,"creation_date":1694381705,"question_id":77077969,"body_markdown":"Could you please advise on how to deal with parsing the dns-shop website (https://www.dns-shop.ru/)? I need to retrieve some data from the page using Jsoup. It&#39;s said that dns-shop has good protection against CSRF.\r\n\r\n\r\n\r\n```\r\nprivate String url = &quot;https://www.dns-shop.ru/&quot;;\r\n\r\n    @Scheduled(fixedDelay = 5000)\r\n    public Document connectAndGet() throws IOException {\r\n        return Jsoup.connect(url)\r\n                .userAgent(&quot;Mozilla&quot;)\r\n                .timeout(10000)\r\n                .referrer(&quot;https://google.com&quot;)\r\n                .get();\r\n    }\r\n```\r\n\r\nWhen I try to run the code, I&#39;m getting a 401 Unauthorized error. I should also mention that I don&#39;t encounter such issues with resources like eBay and Amazon, where everything connects correctly. I suspect the problem might be related to cookies or even tokens. I need to access the page and extract data from it.\r\n\r\nError by this code is:\r\n\r\n```\r\norg.jsoup.HttpStatusException: HTTP error fetching URL. Status=401, URL=[https://www.dns-shop.ru/]\r\n\tat org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:912) ~[jsoup-1.16.1.jar:1.16.1]\r\n\tat org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:851) ~[jsoup-1.16.1.jar:1.16.1]\r\n\tat org.jsoup.helper.HttpConnection.execute(HttpConnection.java:345) ~[jsoup-1.16.1.jar:1.16.1]\r\n\tat org.jsoup.helper.HttpConnection.get(HttpConnection.java:330) ~[jsoup-1.16.1.jar:1.16.1]\r\n\tat com.xxx.connectAndGet(ParseSite.java:31) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n","title":"Parsing site with csrf","body":"<p>Could you please advise on how to deal with parsing the dns-shop website (<a href=\"https://www.dns-shop.ru/\" rel=\"nofollow noreferrer\">https://www.dns-shop.ru/</a>)? I need to retrieve some data from the page using Jsoup. It's said that dns-shop has good protection against CSRF.</p>\n<pre><code>private String url = &quot;https://www.dns-shop.ru/&quot;;\n\n    @Scheduled(fixedDelay = 5000)\n    public Document connectAndGet() throws IOException {\n        return Jsoup.connect(url)\n                .userAgent(&quot;Mozilla&quot;)\n                .timeout(10000)\n                .referrer(&quot;https://google.com&quot;)\n                .get();\n    }\n</code></pre>\n<p>When I try to run the code, I'm getting a 401 Unauthorized error. I should also mention that I don't encounter such issues with resources like eBay and Amazon, where everything connects correctly. I suspect the problem might be related to cookies or even tokens. I need to access the page and extract data from it.</p>\n<p>Error by this code is:</p>\n<pre><code>org.jsoup.HttpStatusException: HTTP error fetching URL. Status=401, URL=[https://www.dns-shop.ru/]\n    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:912) ~[jsoup-1.16.1.jar:1.16.1]\n    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:851) ~[jsoup-1.16.1.jar:1.16.1]\n    at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:345) ~[jsoup-1.16.1.jar:1.16.1]\n    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:330) ~[jsoup-1.16.1.jar:1.16.1]\n    at com.xxx.connectAndGet(ParseSite.java:31) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-6.0.11.jar:6.0.11]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":11929801,"reputation":87,"user_id":8729998,"display_name":"Aldwin Delgado"},"score":0,"creation_date":1639698291,"post_id":70384491,"comment_id":124422584,"body_markdown":"Did you try simplifying your `pom.xml` file? Seems to me you&#39;re importing too many items -- and some of them are already included in the starter package of Spring.\n\nSee [this MySQL](https://github.com/spring-guides/gs-accessing-data-mysql/blob/main/initial/pom.xml) sample from Spring Data tutorial.","body":"Did you try simplifying your <code>pom.xml</code> file? Seems to me you&#39;re importing too many items -- and some of them are already included in the starter package of Spring.  See <a href=\"https://github.com/spring-guides/gs-accessing-data-mysql/blob/main/initial/pom.xml\" rel=\"nofollow noreferrer\">this MySQL</a> sample from Spring Data tutorial."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1639726443,"post_id":70384491,"comment_id":124427043,"body_markdown":"FOr starters your dependencies are a mess. Ditch all the hibernate dependencies. Remove the `spring-web` and `spring-webmvc` dependencies. On your `@SpringBootApplication` annotated class remove `@ComponentScan` and `@EnableJpaRepositories`. Then restart your application using `--debug` to get more information and the stacktrace telling you what is wrong. You probably misconfigured your database.","body":"FOr starters your dependencies are a mess. Ditch all the hibernate dependencies. Remove the <code>spring-web</code> and <code>spring-webmvc</code> dependencies. On your <code>@SpringBootApplication</code> annotated class remove <code>@ComponentScan</code> and <code>@EnableJpaRepositories</code>. Then restart your application using <code>--debug</code> to get more information and the stacktrace telling you what is wrong. You probably misconfigured your database."},{"owner":{"account_id":3640819,"reputation":335,"user_id":4645889,"accept_rate":20,"display_name":"htamayo"},"score":0,"creation_date":1640192688,"post_id":70384491,"comment_id":124539243,"body_markdown":"thanks a lot, as a matter of fact, searching about this bug I started to add dependencies with no control and still the problem persist. I cleaned up my pom.xml and I will start the app in debug mode, I&#39;ll let you know what I get","body":"thanks a lot, as a matter of fact, searching about this bug I started to add dependencies with no control and still the problem persist. I cleaned up my pom.xml and I will start the app in debug mode, I&#39;ll let you know what I get"}],"answers":[{"tags":[],"owner":{"account_id":3640819,"reputation":335,"user_id":4645889,"accept_rate":20,"display_name":"htamayo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1641164721,"creation_date":1641164721,"answer_id":70560417,"question_id":70384491,"body_markdown":"Well, after 17 days finally I got the solution:\r\n\r\nmy problem was on properties file, for some reason I used this line (I can&#39;t remember why):\r\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\nI just commented it and problem solved.\r\n\r\nLessons learned:\r\n1. always document your code\r\n2. JitterTed&#39;s discord is a great source of answers.","title":"Java Spring Boot: Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>Well, after 17 days finally I got the solution:</p>\n<p>my problem was on properties file, for some reason I used this line (I can't remember why):\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</p>\n<p>I just commented it and problem solved.</p>\n<p>Lessons learned:</p>\n<ol>\n<li>always document your code</li>\n<li>JitterTed's discord is a great source of answers.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18535575,"reputation":11,"user_id":13505335,"display_name":"sanju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694380364,"creation_date":1694380364,"answer_id":77077906,"question_id":70384491,"body_markdown":"Issue : Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration.\r\n\r\nResolution: After 3 days of struggle I found my problem was due to a property on properties file: spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\nPost commented, at least this issue resolved. \r\nI got another issue, which I will update soon.","title":"Java Spring Boot: Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>Issue : Consider defining a bean named 'entityManagerFactory' in your configuration.</p>\n<p>Resolution: After 3 days of struggle I found my problem was due to a property on properties file: spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</p>\n<p>Post commented, at least this issue resolved.\nI got another issue, which I will update soon.</p>\n"}],"owner":{"account_id":3640819,"reputation":335,"user_id":4645889,"accept_rate":20,"display_name":"htamayo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6561,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70560417,"answer_count":2,"score":2,"last_activity_date":1694380364,"creation_date":1639682469,"question_id":70384491,"body_markdown":"I&#39;m working on a basic application using Java Spring Boot, I&#39;m stuck on this error:\r\n\r\nThis is the error message:\r\n\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2021-12-16 12:44:40.321 ERROR 5698 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    Description:\r\n    Field userRepository in com.htamayo.sbcrashcourse.SbcrashcourseApplication required a bean named &#39;entityManagerFactory&#39; that could not be found.\r\n    The injection point has the following annotations:\r\n    \t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    Action:\r\n    Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration.\r\n\r\n\r\n1) My main class looks like this:\r\n\r\n        package com.htamayo.sbcrashcourse;\r\n    \r\n        import com.htamayo.sbcrashcourse.lendingengine.domain.model.User;\r\n        import com.htamayo.sbcrashcourse.lendingengine.domain.repository.UserRepository;\r\n        import org.springframework.beans.factory.annotation.Autowired;\r\n        import org.springframework.boot.CommandLineRunner;\r\n        import org.springframework.boot.SpringApplication;\r\n        import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n        import org.springframework.context.annotation.Bean;\r\n        import org.springframework.context.annotation.ComponentScan;\r\n        import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n        @SpringBootApplication\r\n        @ComponentScan(basePackages = {&quot;com.htamayo.sbcrashcourse.lendingengine&quot;})\r\n        @EnableJpaRepositories(&quot;com.htamayo.sbcrashcourse.lendingengine.domain.repository&quot;)\r\n        public class SbcrashcourseApplication implements CommandLineRunner {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserRepository userRepository;\r\n    \r\n    \tpublic static void main(String[] args) {SpringApplication.run(SbcrashcourseApplication.class, args);}\r\n    \r\n    \t@Override\r\n    \tpublic void run(String... args) throws Exception {\r\n    \t\tuserRepository.save(new User(1, &quot;John&quot;, &quot;B&quot;, 27, &quot;Software Developer&quot;));\r\n    \t\tuserRepository.save(new User(2, &quot;Peter&quot;, &quot;C&quot;, 21, &quot;Pilot&quot;));\r\n    \t\tuserRepository.save(new User(3, &quot;Henry&quot;, &quot;E&quot;, 21, &quot;Unemployed&quot;));\r\n    \t}\r\n    }\r\n\r\n\r\n2) UserRepository class is this:\r\n\r\n \r\n\r\n       package com.htamayo.sbcrashcourse.lendingengine.domain.repository;\r\n        \r\n        import com.htamayo.sbcrashcourse.lendingengine.domain.model.User;\r\n        import org.springframework.data.jpa.repository.JpaRepository;\r\n        \r\n        public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n        \r\n        }\r\n\r\n\r\n3) And my pom.xml looks like this:\r\n\r\n    \t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.4.32.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.7.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.7.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nI&#39;ve been searching for solutions on Google but so far nothing, so my question is: I don&#39;t understand how to overcome the EntityManagerFactory error, am I missing a dependency? or should I refactor my code? any solutions?\r\n\r\nThanks a lot for your suggestions.\r\n\r\n\r\n\r\n","title":"Java Spring Boot: Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>I'm working on a basic application using Java Spring Boot, I'm stuck on this error:</p>\n<p>This is the error message:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-12-16 12:44:40.321 ERROR 5698 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n***************************\nAPPLICATION FAILED TO START\n***************************\nDescription:\nField userRepository in com.htamayo.sbcrashcourse.SbcrashcourseApplication required a bean named 'entityManagerFactory' that could not be found.\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\nAction:\nConsider defining a bean named 'entityManagerFactory' in your configuration.\n</code></pre>\n<ol>\n<li><p>My main class looks like this:</p>\n<pre><code> package com.htamayo.sbcrashcourse;\n\n import com.htamayo.sbcrashcourse.lendingengine.domain.model.User;\n import com.htamayo.sbcrashcourse.lendingengine.domain.repository.UserRepository;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.boot.CommandLineRunner;\n import org.springframework.boot.SpringApplication;\n import org.springframework.boot.autoconfigure.SpringBootApplication;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.ComponentScan;\n import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n @SpringBootApplication\n @ComponentScan(basePackages = {&quot;com.htamayo.sbcrashcourse.lendingengine&quot;})\n @EnableJpaRepositories(&quot;com.htamayo.sbcrashcourse.lendingengine.domain.repository&quot;)\n public class SbcrashcourseApplication implements CommandLineRunner {\n\n @Autowired\n private UserRepository userRepository;\n\n public static void main(String[] args) {SpringApplication.run(SbcrashcourseApplication.class, args);}\n\n @Override\n public void run(String... args) throws Exception {\n     userRepository.save(new User(1, &quot;John&quot;, &quot;B&quot;, 27, &quot;Software Developer&quot;));\n     userRepository.save(new User(2, &quot;Peter&quot;, &quot;C&quot;, 21, &quot;Pilot&quot;));\n     userRepository.save(new User(3, &quot;Henry&quot;, &quot;E&quot;, 21, &quot;Unemployed&quot;));\n }\n</code></pre>\n<p>}</p>\n</li>\n<li><p>UserRepository class is this:</p>\n<pre><code>package com.htamayo.sbcrashcourse.lendingengine.domain.repository;\n\n import com.htamayo.sbcrashcourse.lendingengine.domain.model.User;\n import org.springframework.data.jpa.repository.JpaRepository;\n\n public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n\n }\n</code></pre>\n</li>\n<li><p>And my pom.xml looks like this:</p>\n<pre><code> &lt;dependencies&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n     &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n     &lt;version&gt;5.4.32.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;mysql&lt;/groupId&gt;\n     &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n     &lt;scope&gt;runtime&lt;/scope&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n     &lt;version&gt;5.3.9&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n     &lt;version&gt;5.3.9&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n     &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n     &lt;version&gt;5.5.7.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n     &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n     &lt;version&gt;5.5.7.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n     &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n     &lt;version&gt;2.3.1&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n \n \n     \n         \n             org.springframework.boot\n               spring-boot-maven-plugin\n         \n     \n \n</li>\n</ol>\n\n<p>I've been searching for solutions on Google but so far nothing, so my question is: I don't understand how to overcome the EntityManagerFactory error, am I missing a dependency? or should I refactor my code? any solutions?</p>\n<p>Thanks a lot for your suggestions.</p>\n"},{"tags":["java","vaadin"],"answers":[{"tags":[],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694380327,"creation_date":1694380327,"answer_id":77077904,"question_id":77075571,"body_markdown":"OK. I found this issue from 2 years ago (https://github.com/vaadin/web-components/issues/201). The CSRF token is passed as a meta tag of page. I was able to retrieve, and ensure myself that CSRF is enabled, CSRF token through `UI.getCurrent().getCsrfToken()`.","title":"Include CSRF token in requests in Vaadin","body":"<p>OK. I found this issue from 2 years ago (<a href=\"https://github.com/vaadin/web-components/issues/201\" rel=\"nofollow noreferrer\">https://github.com/vaadin/web-components/issues/201</a>). The CSRF token is passed as a meta tag of page. I was able to retrieve, and ensure myself that CSRF is enabled, CSRF token through <code>UI.getCurrent().getCsrfToken()</code>.</p>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694380327,"creation_date":1694339129,"question_id":77075571,"body_markdown":"On Vaadin&#39;s site they state that:\r\n&gt; All requests between the client and the server are included with a user session specific CSRF token\r\n\r\nHowever, I&#39;m unable to fetch this token programmatically. I tried `System.out.println(VaadinRequest.getCurrent().getAttribute(&quot;_csrf&quot;));`\r\n\r\nand\r\n\r\n`System.out.println(VaadinRequest.getCurrent().getHeader(&quot;X-CSRF-TOKEN&quot;));`\r\n\r\nIn order to somehow see if the request really contains this token. In both cases, the returned value is `null`.\r\n\r\nIn my `SecurityConfig.java`, I have disabled the CSRF token, as the Vaadin breaks if it is enabled. I assume that there may be some overlap going on.\r\n\r\nI also do have `SecurityVaadinConfig.java` which is pretty default, as it looks like this:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityVaadinConfig extends VaadinWebSecurity {\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeHttpRequests((auth) -&gt; auth\r\n\t\t\t\t.requestMatchers(new AntPathRequestMatcher(&quot;/**&quot;)).permitAll());\r\n\t\tsuper.configure(http);\r\n\t\tsetLoginView(http, LoginView.class);\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void configure(WebSecurity web) throws Exception {\r\n\t\tsuper.configure(web);\r\n\t}\r\n}\r\n```\r\n\r\nHow can I ensure that this token is really passed in &quot;all requests between the client and the server&quot;?","title":"Include CSRF token in requests in Vaadin","body":"<p>On Vaadin's site they state that:</p>\n<blockquote>\n<p>All requests between the client and the server are included with a user session specific CSRF token</p>\n</blockquote>\n<p>However, I'm unable to fetch this token programmatically. I tried <code>System.out.println(VaadinRequest.getCurrent().getAttribute(&quot;_csrf&quot;));</code></p>\n<p>and</p>\n<p><code>System.out.println(VaadinRequest.getCurrent().getHeader(&quot;X-CSRF-TOKEN&quot;));</code></p>\n<p>In order to somehow see if the request really contains this token. In both cases, the returned value is <code>null</code>.</p>\n<p>In my <code>SecurityConfig.java</code>, I have disabled the CSRF token, as the Vaadin breaks if it is enabled. I assume that there may be some overlap going on.</p>\n<p>I also do have <code>SecurityVaadinConfig.java</code> which is pretty default, as it looks like this:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityVaadinConfig extends VaadinWebSecurity {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests((auth) -&gt; auth\n                .requestMatchers(new AntPathRequestMatcher(&quot;/**&quot;)).permitAll());\n        super.configure(http);\n        setLoginView(http, LoginView.class);\n    }\n\n    @Override\n    protected void configure(WebSecurity web) throws Exception {\n        super.configure(web);\n    }\n}\n</code></pre>\n<p>How can I ensure that this token is really passed in &quot;all requests between the client and the server&quot;?</p>\n"},{"tags":["java","windows","intellij-idea","windows-10","wsl-2"],"comments":[{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1626933926,"post_id":68479755,"comment_id":121024543,"body_markdown":"HI, I am from JB support. Log and ThreadDumps are needed to see what is going on while the IDE is frozen. Please restart the IntelliJ IDEA, reproduce the freeze and share the [logs folder](https://intellij-support.jetbrains.com/hc/en-us/articles/207241085) via https://uploads.jetbrains.com. Tell the upload ID after that","body":"HI, I am from JB support. Log and ThreadDumps are needed to see what is going on while the IDE is frozen. Please restart the IntelliJ IDEA, reproduce the freeze and share the <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/207241085\" rel=\"nofollow noreferrer\">logs folder</a> via <a href=\"https://uploads.jetbrains.com\" rel=\"nofollow noreferrer\">uploads.jetbrains.com</a>. Tell the upload ID after that"},{"owner":{"account_id":8334228,"reputation":93,"user_id":6261713,"display_name":"pratham"},"score":0,"creation_date":1626957600,"post_id":68479755,"comment_id":121033753,"body_markdown":"Hi @KonstantinAnnikov, I have uploaded the whole log folder. \n\nUpload id: 2021_07_22_Hh7GVgZBgJ7cyFu5 (file: log.7z)","body":"Hi @KonstantinAnnikov, I have uploaded the whole log folder.   Upload id: 2021_07_22_Hh7GVgZBgJ7cyFu5 (file: log.7z)"},{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1627029902,"post_id":68479755,"comment_id":121053656,"body_markdown":"Could you please try 2020.2 Preview version https://www.jetbrains.com/idea/nextversion/ There were many improvements in this area that may already fix this problem. See https://youtrack.jetbrains.com/issue/IDEA-270081","body":"Could you please try 2020.2 Preview version <a href=\"https://www.jetbrains.com/idea/nextversion/\" rel=\"nofollow noreferrer\">jetbrains.com/idea/nextversion</a> There were many improvements in this area that may already fix this problem. See <a href=\"https://youtrack.jetbrains.com/issue/IDEA-270081\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-270081</a>"},{"owner":{"account_id":8334228,"reputation":93,"user_id":6261713,"display_name":"pratham"},"score":0,"creation_date":1627109244,"post_id":68479755,"comment_id":121073365,"body_markdown":"Thank @KonstantinAnnikov, version 2020.2 solved the JDK frozen issue.  :)","body":"Thank @KonstantinAnnikov, version 2020.2 solved the JDK frozen issue.  :)"},{"owner":{"account_id":2797658,"reputation":713,"user_id":2406578,"accept_rate":38,"display_name":"Tien Hoang"},"score":1,"creation_date":1692616529,"post_id":68479755,"comment_id":135643074,"body_markdown":"@KonstantinAnnikov I&#39;m using IntelliJ 2023.2, and I still got a frozen issue. Do you have any suggestions?","body":"@KonstantinAnnikov I&#39;m using IntelliJ 2023.2, and I still got a frozen issue. Do you have any suggestions?"}],"answers":[{"tags":[],"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1627266650,"creation_date":1627266650,"answer_id":68523888,"question_id":68479755,"body_markdown":"This has been fixed in the 2021.2 version of IntelliJ IDEA. Until it is released, you can download it at https://www.jetbrains.com/idea/nextversion/","title":"Adding JDK path from WSL2 Ubuntu to IntelliJ IDE frozen the screen","body":"<p>This has been fixed in the 2021.2 version of IntelliJ IDEA. Until it is released, you can download it at <a href=\"https://www.jetbrains.com/idea/nextversion/\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/idea/nextversion/</a></p>\n"},{"tags":[],"owner":{"account_id":1321504,"reputation":155,"user_id":1267233,"accept_rate":0,"display_name":"Eduardo Bueno"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679942507,"creation_date":1679942507,"answer_id":75859277,"question_id":68479755,"body_markdown":"Looks like this is still an issue at least with IntelliJ IDEA 2022.3.3 (Build #IC-223.8836.41). Every time I add a WSL JDK, it freezes.","title":"Adding JDK path from WSL2 Ubuntu to IntelliJ IDE frozen the screen","body":"<p>Looks like this is still an issue at least with IntelliJ IDEA 2022.3.3 (Build #IC-223.8836.41). Every time I add a WSL JDK, it freezes.</p>\n"},{"tags":[],"owner":{"account_id":23565943,"reputation":56,"user_id":17606671,"display_name":"dutsi170"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1680378113,"creation_date":1680378113,"answer_id":75908469,"question_id":68479755,"body_markdown":"You should shutdown any WSL instance before trying to add JDK WSL path via Intellij Idea.","title":"Adding JDK path from WSL2 Ubuntu to IntelliJ IDE frozen the screen","body":"<p>You should shutdown any WSL instance before trying to add JDK WSL path via Intellij Idea.</p>\n"},{"tags":[],"owner":{"account_id":6436922,"reputation":46,"user_id":12096971,"display_name":"Bruno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694379694,"creation_date":1694379694,"answer_id":77077872,"question_id":68479755,"body_markdown":"I just had this problem with IntelliJ IDEA 2023.2.1, so the issue persists in newer versions.\r\nThe issue is related to real time virus monitoring. You should create security exceptions for IntelliJ folders and processes as described in the following links. Good luck.\r\n\r\nhttps://intellij-support.jetbrains.com/hc/en-us/articles/360006298560\r\n\r\nhttps://intellij-support.jetbrains.com/hc/en-us/articles/360005028939-Slow-startup-on-Windows-splash-screen-appears-in-more-than-20-seconds\r\n\r\n","title":"Adding JDK path from WSL2 Ubuntu to IntelliJ IDE frozen the screen","body":"<p>I just had this problem with IntelliJ IDEA 2023.2.1, so the issue persists in newer versions.\nThe issue is related to real time virus monitoring. You should create security exceptions for IntelliJ folders and processes as described in the following links. Good luck.</p>\n<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/360006298560\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/articles/360006298560</a></p>\n<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/360005028939-Slow-startup-on-Windows-splash-screen-appears-in-more-than-20-seconds\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/articles/360005028939-Slow-startup-on-Windows-splash-screen-appears-in-more-than-20-seconds</a></p>\n"}],"owner":{"account_id":8334228,"reputation":93,"user_id":6261713,"display_name":"pratham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7572,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":68523888,"answer_count":4,"score":3,"last_activity_date":1694379694,"creation_date":1626932819,"question_id":68479755,"body_markdown":"As you guys can see from the images. I am trying to connect by WSL2-Ubuntu with IntelliJ by following this documentation [https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html#local_project][1]. When I give JDK path and click on Apply or Ok it froze the screen. This happens every time I try and only leaves with me the option to close the IDE using task manager. JDK path that I am using is: \\\\wsl$\\Ubuntu\\usr\\lib\\jvm\\java-11-openjdk-amd64. Any idea why it must be behaving in such a way? \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html#local_project\r\n  [2]: https://i.stack.imgur.com/v7sd0.png","title":"Adding JDK path from WSL2 Ubuntu to IntelliJ IDE frozen the screen","body":"<p>As you guys can see from the images. I am trying to connect by WSL2-Ubuntu with IntelliJ by following this documentation <a href=\"https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html#local_project\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html#local_project</a>. When I give JDK path and click on Apply or Ok it froze the screen. This happens every time I try and only leaves with me the option to close the IDE using task manager. JDK path that I am using is: \\wsl$\\Ubuntu\\usr\\lib\\jvm\\java-11-openjdk-amd64. Any idea why it must be behaving in such a way?</p>\n<p><a href=\"https://i.stack.imgur.com/v7sd0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v7sd0.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","oracle","jdbc","crystal-reports"],"comments":[{"owner":{"account_id":1189417,"reputation":30924,"user_id":1162620,"accept_rate":70,"display_name":"Ravi"},"score":0,"creation_date":1516280420,"post_id":48321246,"comment_id":83628998,"body_markdown":"Possible duplicate of [ORA-12505 :TNS listener does not currently know of SID given in connect descriptor](https://stackoverflow.com/questions/30861061/ora-12505-tns-listener-does-not-currently-know-of-sid-given-in-connect-descript)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/30861061/ora-12505-tns-listener-does-not-currently-know-of-sid-given-in-connect-descript\">ORA-12505 :TNS listener does not currently know of SID given in connect descriptor</a>"},{"owner":{"account_id":7811320,"reputation":11,"user_id":5907431,"display_name":"Manav Bali"},"score":0,"creation_date":1516340214,"post_id":48321246,"comment_id":83654526,"body_markdown":"umm dont think so dear This is altogether a different issue, if that were the case, then we would have caught the error during our first connection attempt.","body":"umm dont think so dear This is altogether a different issue, if that were the case, then we would have caught the error during our first connection attempt."}],"answers":[{"tags":[],"owner":{"account_id":7811320,"reputation":11,"user_id":5907431,"display_name":"Manav Bali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521005178,"creation_date":1521005178,"answer_id":49270263,"question_id":48321246,"body_markdown":"We are able to fix this issue. Although we have tried plenty of solutions for this, the issue is only coming with the Users having special characters in their password like if they have setup their password like this: Abcd@12345, this &#39;@&#39; character is causing this error. Removing this character resolved this issue, Also it is recommended not to use such characters like &#39;@&#39;, &#39;.&#39; in your password.\r\n\r\nhttps://asktom.oracle.com/pls/apex/f?p=100:11:::NO:RP:P11_QUESTION_ID:9533940800346284735\r\n\r\n ","title":"Logon Error:IO Error: Invalid connection string format, a valid format is: &quot;host:port:sid&quot; with SAP crystal reports JAVA API","body":"<p>We are able to fix this issue. Although we have tried plenty of solutions for this, the issue is only coming with the Users having special characters in their password like if they have setup their password like this: Abcd@12345, this '@' character is causing this error. Removing this character resolved this issue, Also it is recommended not to use such characters like '@', '.' in your password.</p>\n\n<p><a href=\"https://asktom.oracle.com/pls/apex/f?p=100:11:::NO:RP:P11_QUESTION_ID:9533940800346284735\" rel=\"nofollow noreferrer\">https://asktom.oracle.com/pls/apex/f?p=100:11:::NO:RP:P11_QUESTION_ID:9533940800346284735</a></p>\n"}],"owner":{"account_id":7811320,"reputation":11,"user_id":5907431,"display_name":"Manav Bali"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11970,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694379640,"creation_date":1516278101,"question_id":48321246,"body_markdown":"We have a Java based desktop Application, that does two parts jdbc logon, one is for creating a connection with Oracle DB, this let user to execute queries and stored procedures, and second jdbc logon happens if user tries to generate/print Crystal report. For this crystal java interface we are using crjava-runtime_12.2.223.zip libraries from SAP community. Now the strange thing is on  all of our developers machine, we don&#39;t face any error of invalid connection string format, but this error is coming only at one of the production user&#39;s account. He is able to logon to the application successfully i.e. first jdbc connection but when he is trying to establish the connection with crystal interface he is facing this error of **Logon Error:IO Error: Invalid connection string format, a valid format is: &quot;host:port:sid&quot;** \r\n\r\nWe have tried resolving this by following jdbc URL formats(read lots of Java JDBC questions- How to connect to Oracle using jdbc formats) but he is getting the same error always while establishing connection with Crystal Interface. (SID and service name for the user is same as abcprod)\r\n\r\n1. jdbc:oracle:thin:@abc-db.abchosting.local:1521:abcprod\r\n2. jdbc:oracle:thin:@//abc-db.abchosting.local:1521/abcprod\r\n3. jdbc:oracle:thin:@abcprod(Using TNSFILE)\r\n4. jdbc:oracle:thin:@abc-db.abchosting.local:1521/abcprod\r\n\r\nUser is on oracle version 12c, there are two other users on that same DB, they are not facing this error at all. Can anybody suggest what should we check, Is this application issue(code level) or Oracle grants/permission issue? I have asked DBA to compare the grants for all these three users but he is saying all grants are same for them. Any hints or suggestions? \r\n\r\nThis issue is not related with Oracle&#39;s JDBC library, this is related with SAP Crystal Report&#39;s library for java, because if we are making connection with oracle&#39;s JDBC library it works fine, my first statement says: two parts JDBC logon, first with plain oracle&#39;s JDBC library which works fine, second part with crystal&#39;s library, same connection string/URL which was used in first part, when trying establishing connection it throws error but this error is specific to only one user rest of the other users in production don&#39;t face this error.\r\n","title":"Logon Error:IO Error: Invalid connection string format, a valid format is: &quot;host:port:sid&quot; with SAP crystal reports JAVA API","body":"<p>We have a Java based desktop Application, that does two parts jdbc logon, one is for creating a connection with Oracle DB, this let user to execute queries and stored procedures, and second jdbc logon happens if user tries to generate/print Crystal report. For this crystal java interface we are using crjava-runtime_12.2.223.zip libraries from SAP community. Now the strange thing is on  all of our developers machine, we don't face any error of invalid connection string format, but this error is coming only at one of the production user's account. He is able to logon to the application successfully i.e. first jdbc connection but when he is trying to establish the connection with crystal interface he is facing this error of <strong>Logon Error:IO Error: Invalid connection string format, a valid format is: \"host:port:sid\"</strong> </p>\n\n<p>We have tried resolving this by following jdbc URL formats(read lots of Java JDBC questions- How to connect to Oracle using jdbc formats) but he is getting the same error always while establishing connection with Crystal Interface. (SID and service name for the user is same as abcprod)</p>\n\n<ol>\n<li>jdbc:oracle:thin:@abc-db.abchosting.local:1521:abcprod</li>\n<li>jdbc:oracle:thin:@//abc-db.abchosting.local:1521/abcprod</li>\n<li>jdbc:oracle:thin:@abcprod(Using TNSFILE)</li>\n<li>jdbc:oracle:thin:@abc-db.abchosting.local:1521/abcprod</li>\n</ol>\n\n<p>User is on oracle version 12c, there are two other users on that same DB, they are not facing this error at all. Can anybody suggest what should we check, Is this application issue(code level) or Oracle grants/permission issue? I have asked DBA to compare the grants for all these three users but he is saying all grants are same for them. Any hints or suggestions? </p>\n\n<p>This issue is not related with Oracle's JDBC library, this is related with SAP Crystal Report's library for java, because if we are making connection with oracle's JDBC library it works fine, my first statement says: two parts JDBC logon, first with plain oracle's JDBC library which works fine, second part with crystal's library, same connection string/URL which was used in first part, when trying establishing connection it throws error but this error is specific to only one user rest of the other users in production don't face this error.</p>\n"},{"tags":["java","android","image","local-storage","android-permissions"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1694283796,"post_id":77072796,"comment_id":135872215,"body_markdown":"You mean Android 13 and above? Which SDK would that be?","body":"You mean Android 13 and above? Which SDK would that be?"},{"owner":{"account_id":17523909,"reputation":407,"user_id":12709358,"display_name":"Elango"},"score":0,"creation_date":1694285408,"post_id":77072796,"comment_id":135872374,"body_markdown":"check out this https://medium.com/@muhammadbilal4074/storage-permission-in-android-13-89372e543864 , if you are already tried , share your code here , we will help you to find issue","body":"check out this <a href=\"https://medium.com/@muhammadbilal4074/storage-permission-in-android-13-89372e543864\" rel=\"nofollow noreferrer\">medium.com/@muhammadbilal4074/&hellip;</a> , if you are already tried , share your code here , we will help you to find issue"},{"owner":{"account_id":7508298,"reputation":27,"user_id":5704160,"display_name":"Muhammad Zeeshan Ali"},"score":0,"creation_date":1694336422,"post_id":77072796,"comment_id":135875671,"body_markdown":"For SDK 33 and Above","body":"For SDK 33 and Above"}],"answers":[{"tags":[],"owner":{"account_id":18977650,"reputation":167,"user_id":13849761,"display_name":"TheShoqanebi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694379323,"creation_date":1694379323,"answer_id":77077849,"question_id":77072796,"body_markdown":"# To get required permissions \r\n\r\n1. Add these lines to Android Manifest\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\n2. In you activity directly inside the class not in (onCreate method)\r\n```\r\nActivityResultLauncher&lt;String&gt; requestPermission = registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\r\n        if (isGranted) {\r\n            // TODO\r\n        } else {\r\n            // TODO\r\n        }\r\n    });\r\n\r\n    ActivityResultLauncher&lt;Intent&gt; android11StoragePermission = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\r\n        if (isPermitted()) {\r\n            // TODO\r\n        } else {\r\n            //TODO\r\n        }\r\n    });\r\n```\r\n\r\n3. Add this two functions to your activity\r\n```\r\n@TargetApi(Build.VERSION_CODES.R)\r\n    private void requestAndroid11StoragePermission() {\r\n        Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\r\n        intent.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n        intent.setData(Uri.parse(String.format(&quot;package:%s&quot;, getApplicationContext().getPackageName())));\r\n        android11StoragePermission.launch(intent);\r\n    }\r\n\r\n    private boolean isPermitted() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            return Environment.isExternalStorageManager();\r\n        } else {\r\n            return ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                    ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED;\r\n        }\r\n    }\r\n```\r\n\r\n4. check device API version and request premissions\r\n```\r\nif (isPermitted()) {\r\n                //TODO\r\n            } else {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n                    requestAndroid11StoragePermission();\r\n                } else {\r\n                    requestPermission.launch(Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n                }\r\n            }\r\n```\r\n\r\n\r\n# To save image from `ImageView` to internal storage\r\n\r\n1. add this function to your class\r\n\r\n```\r\nprivate void saveImage(Bitmap bitmap) {\r\n        String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString();\r\n        File myDir = new File(root + &quot;/Saved Images&quot;);\r\n\r\n        if (!myDir.exists()) {\r\n            myDir.mkdirs();\r\n        }\r\n\r\n        // Generate a unique file name\r\n        String imageName = &quot;Image_&quot; + new Date().getTime() + &quot;.jpg&quot;;\r\n\r\n        File file = new File(myDir, imageName);\r\n        if (file.exists()) file.delete();\r\n\r\n        try {\r\n            // Save the Bitmap to the file\r\n            OutputStream outputStream;\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n                outputStream = Files.newOutputStream(file.toPath());\r\n            } else {\r\n                outputStream = new FileOutputStream(file);\r\n            }\r\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\r\n            outputStream.flush();\r\n            outputStream.close();\r\n\r\n            // Add the image to the MediaStore\r\n            ContentValues values = new ContentValues();\r\n            values.put(MediaStore.Images.Media.DATA, file.getAbsolutePath());\r\n            values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpeg&quot;);\r\n            getApplicationContext().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\r\n\r\n            // Trigger a media scan to update the gallery\r\n            MediaScannerConnection.scanFile(getApplicationContext(), new String[]{file.getAbsolutePath()}, null, null);\r\n        } catch (Exception e) {\r\n            // TODO\r\n        }\r\n    }\r\n```\r\n\r\n2. pass your imageview image to this function\r\n\r\n```\r\nBitmapDrawable bitmapDrawable = ((BitmapDrawable) imageView.getDrawable());\r\nBitmap bitmap = bitmapDrawable.getBitmap();\r\nsaveImage(bitmap);\r\n```","title":"New Android storage Permission for API 13 and above","body":"<h1>To get required permissions</h1>\n<ol>\n<li>Add these lines to Android Manifest</li>\n</ol>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<ol start=\"2\">\n<li>In you activity directly inside the class not in (onCreate method)</li>\n</ol>\n<pre><code>ActivityResultLauncher&lt;String&gt; requestPermission = registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\n        if (isGranted) {\n            // TODO\n        } else {\n            // TODO\n        }\n    });\n\n    ActivityResultLauncher&lt;Intent&gt; android11StoragePermission = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\n        if (isPermitted()) {\n            // TODO\n        } else {\n            //TODO\n        }\n    });\n</code></pre>\n<ol start=\"3\">\n<li>Add this two functions to your activity</li>\n</ol>\n<pre><code>@TargetApi(Build.VERSION_CODES.R)\n    private void requestAndroid11StoragePermission() {\n        Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\n        intent.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n        intent.setData(Uri.parse(String.format(&quot;package:%s&quot;, getApplicationContext().getPackageName())));\n        android11StoragePermission.launch(intent);\n    }\n\n    private boolean isPermitted() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            return Environment.isExternalStorageManager();\n        } else {\n            return ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED &amp;&amp;\n                    ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED;\n        }\n    }\n</code></pre>\n<ol start=\"4\">\n<li>check device API version and request premissions</li>\n</ol>\n<pre><code>if (isPermitted()) {\n                //TODO\n            } else {\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n                    requestAndroid11StoragePermission();\n                } else {\n                    requestPermission.launch(Manifest.permission.WRITE_EXTERNAL_STORAGE);\n                }\n            }\n</code></pre>\n<h1>To save image from <code>ImageView</code> to internal storage</h1>\n<ol>\n<li>add this function to your class</li>\n</ol>\n<pre><code>private void saveImage(Bitmap bitmap) {\n        String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString();\n        File myDir = new File(root + &quot;/Saved Images&quot;);\n\n        if (!myDir.exists()) {\n            myDir.mkdirs();\n        }\n\n        // Generate a unique file name\n        String imageName = &quot;Image_&quot; + new Date().getTime() + &quot;.jpg&quot;;\n\n        File file = new File(myDir, imageName);\n        if (file.exists()) file.delete();\n\n        try {\n            // Save the Bitmap to the file\n            OutputStream outputStream;\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n                outputStream = Files.newOutputStream(file.toPath());\n            } else {\n                outputStream = new FileOutputStream(file);\n            }\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\n            outputStream.flush();\n            outputStream.close();\n\n            // Add the image to the MediaStore\n            ContentValues values = new ContentValues();\n            values.put(MediaStore.Images.Media.DATA, file.getAbsolutePath());\n            values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpeg&quot;);\n            getApplicationContext().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n\n            // Trigger a media scan to update the gallery\n            MediaScannerConnection.scanFile(getApplicationContext(), new String[]{file.getAbsolutePath()}, null, null);\n        } catch (Exception e) {\n            // TODO\n        }\n    }\n</code></pre>\n<ol start=\"2\">\n<li>pass your imageview image to this function</li>\n</ol>\n<pre><code>BitmapDrawable bitmapDrawable = ((BitmapDrawable) imageView.getDrawable());\nBitmap bitmap = bitmapDrawable.getBitmap();\nsaveImage(bitmap);\n</code></pre>\n"}],"owner":{"account_id":7508298,"reputation":27,"user_id":5704160,"display_name":"Muhammad Zeeshan Ali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694379323,"creation_date":1694271789,"question_id":77072796,"body_markdown":"I want to save image from an ImageView to storage in Android using JAVA. I want to know how to give storage permissions for API 13 and above.","title":"New Android storage Permission for API 13 and above","body":"<p>I want to save image from an ImageView to storage in Android using JAVA. I want to know how to give storage permissions for API 13 and above.</p>\n"},{"tags":["java","spring","hibernate","jpa","ddl"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":1,"creation_date":1486647014,"post_id":42135114,"comment_id":71442209,"body_markdown":"FWIW JPA 2.1 has a _standard_ property javax.persistence.schema-generation.database.action so don&#39;t really see the need to use JPA vendor specific properties for schema generation.","body":"FWIW JPA 2.1 has a <i>standard</i> property javax.persistence.schema-generation.database.action so don&#39;t really see the need to use JPA vendor specific properties for schema generation."},{"owner":{"account_id":1714975,"reputation":20238,"user_id":1572269,"accept_rate":43,"display_name":"Naros"},"score":1,"creation_date":1530806010,"post_id":42135114,"comment_id":89372611,"body_markdown":"@NeilStockton One idea we&#39;re exploring with Hibernate 6 is the ability to be able to control schema generation differently based on categories; e.g. your orm tables might be `none` but you might want your Hibernate Search and Envers tables to be generated using `update` since they&#39;re internally managed by those projects and you don&#39;t want to manage those manually yourself.  Right now we control this globally for all tables regardless of their origin/source. This would further the reason to use vendor-specific options if you wanted to use this.","body":"@NeilStockton One idea we&#39;re exploring with Hibernate 6 is the ability to be able to control schema generation differently based on categories; e.g. your orm tables might be <code>none</code> but you might want your Hibernate Search and Envers tables to be generated using <code>update</code> since they&#39;re internally managed by those projects and you don&#39;t want to manage those manually yourself.  Right now we control this globally for all tables regardless of their origin/source. This would further the reason to use vendor-specific options if you wanted to use this."},{"owner":{"account_id":3015538,"reputation":4229,"user_id":2557818,"accept_rate":82,"display_name":"Raja Anbazhagan"},"score":0,"creation_date":1641230321,"post_id":42135114,"comment_id":124747246,"body_markdown":"This property is a way to specify hibernate to apply DDL for the database. It is hibernate-specific. More details at https://springhow.com/spring-boot-database-initialization/","body":"This property is a way to specify hibernate to apply DDL for the database. It is hibernate-specific. More details at <a href=\"https://springhow.com/spring-boot-database-initialization/\" rel=\"nofollow noreferrer\">springhow.com/spring-boot-database-initialization</a>"}],"answers":[{"tags":[],"owner":{"account_id":1714975,"reputation":20238,"user_id":1572269,"accept_rate":43,"display_name":"Naros"},"down_vote_count":0,"up_vote_count":468,"is_accepted":true,"score":468,"last_activity_date":1486678959,"creation_date":1486678959,"answer_id":42147995,"question_id":42135114,"body_markdown":"For the record, the `spring.jpa.hibernate.ddl-auto` property is Spring Data JPA specific and is their way to specify a value that will eventually be passed to Hibernate under the property it knows, `hibernate.hbm2ddl.auto`.\r\n\r\nThe values `create`, `create-drop`, `validate`, and `update` basically influence how the schema tool management will manipulate the database schema at startup.\r\n\r\nFor example, the `update` operation will query the JDBC driver&#39;s API to get the database metadata and then Hibernate compares the object model it creates based on reading your annotated classes or HBM XML mappings and will attempt to adjust the schema on-the-fly.\r\n\r\nThe `update` operation for example will attempt to add new columns, constraints, etc but will never remove a column or constraint that may have existed previously but no longer does as part of the object model from a prior run.\r\n\r\nTypically in test case scenarios, you&#39;ll likely use `create-drop` so that you create your schema, your test case adds some mock data, you run your tests, and then during the test case cleanup, the schema objects are dropped, leaving an empty database.\r\n\r\nIn development, it&#39;s often common to see developers use `update` to automatically modify the schema to add new additions upon restart.  But again understand, this does not remove a column or constraint that may exist from previous executions that is no longer necessary.\r\n\r\nIn production, it&#39;s often highly recommended you use `none` or simply don&#39;t specify this property.  That is because it&#39;s common practice for DBAs to review migration scripts for database changes, particularly if your database is shared across multiple services and applications.","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>For the record, the <code>spring.jpa.hibernate.ddl-auto</code> property is Spring Data JPA specific and is their way to specify a value that will eventually be passed to Hibernate under the property it knows, <code>hibernate.hbm2ddl.auto</code>.</p>\n\n<p>The values <code>create</code>, <code>create-drop</code>, <code>validate</code>, and <code>update</code> basically influence how the schema tool management will manipulate the database schema at startup.</p>\n\n<p>For example, the <code>update</code> operation will query the JDBC driver's API to get the database metadata and then Hibernate compares the object model it creates based on reading your annotated classes or HBM XML mappings and will attempt to adjust the schema on-the-fly.</p>\n\n<p>The <code>update</code> operation for example will attempt to add new columns, constraints, etc but will never remove a column or constraint that may have existed previously but no longer does as part of the object model from a prior run.</p>\n\n<p>Typically in test case scenarios, you'll likely use <code>create-drop</code> so that you create your schema, your test case adds some mock data, you run your tests, and then during the test case cleanup, the schema objects are dropped, leaving an empty database.</p>\n\n<p>In development, it's often common to see developers use <code>update</code> to automatically modify the schema to add new additions upon restart.  But again understand, this does not remove a column or constraint that may exist from previous executions that is no longer necessary.</p>\n\n<p>In production, it's often highly recommended you use <code>none</code> or simply don't specify this property.  That is because it's common practice for DBAs to review migration scripts for database changes, particularly if your database is shared across multiple services and applications.</p>\n"},{"tags":[],"owner":{"account_id":13089743,"reputation":2044,"user_id":9457633,"display_name":"Md Kawser Habib"},"down_vote_count":0,"up_vote_count":66,"is_accepted":false,"score":66,"last_activity_date":1616492386,"creation_date":1616492386,"answer_id":66760630,"question_id":42135114,"body_markdown":"In Spring/Spring-Boot, SQL database can be initialized in different ways depending on what your stack is.\r\n\r\nJPA has features for DDL generation, and these can be set up to run on startup against the database. This is controlled through two external properties:\r\n\r\n- `spring.jpa.generate-ddl` (boolean) switches the feature on and off and is vendor independent.\r\n- `spring.jpa.hibernate.ddl-auto` (enum) is a Hibernate feature that controls the behavior in a more fine-grained way. See below for more detail.\r\n\r\nHibernate property values are: create, update, create-drop, validate and none:\r\n\r\n- create – Hibernate first drops existing tables, then creates new tables\r\n- update – the object model created based on the mappings (annotations or XML) is compared with the existing schema, and then Hibernate updates the schema according to the diff. It never deletes the existing tables or columns even if they are no more required by the application\r\n- create-drop – similar to create, with the addition that Hibernate will drop the database after all operations are completed. Typically used for unit testing\r\n- validate – Hibernate only validates whether the tables and columns exist, otherwise it throws an exception\r\n- none – this value effectively turns off the DDL generation\r\n\r\nSpring Boot internally defaults this parameter value to create-drop if no schema manager has been detected, otherwise none for all other cases.","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>In Spring/Spring-Boot, SQL database can be initialized in different ways depending on what your stack is.</p>\n<p>JPA has features for DDL generation, and these can be set up to run on startup against the database. This is controlled through two external properties:</p>\n<ul>\n<li><code>spring.jpa.generate-ddl</code> (boolean) switches the feature on and off and is vendor independent.</li>\n<li><code>spring.jpa.hibernate.ddl-auto</code> (enum) is a Hibernate feature that controls the behavior in a more fine-grained way. See below for more detail.</li>\n</ul>\n<p>Hibernate property values are: create, update, create-drop, validate and none:</p>\n<ul>\n<li>create – Hibernate first drops existing tables, then creates new tables</li>\n<li>update – the object model created based on the mappings (annotations or XML) is compared with the existing schema, and then Hibernate updates the schema according to the diff. It never deletes the existing tables or columns even if they are no more required by the application</li>\n<li>create-drop – similar to create, with the addition that Hibernate will drop the database after all operations are completed. Typically used for unit testing</li>\n<li>validate – Hibernate only validates whether the tables and columns exist, otherwise it throws an exception</li>\n<li>none – this value effectively turns off the DDL generation</li>\n</ul>\n<p>Spring Boot internally defaults this parameter value to create-drop if no schema manager has been detected, otherwise none for all other cases.</p>\n"},{"tags":[],"owner":{"account_id":18459969,"reputation":99,"user_id":13447741,"display_name":"Dennis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636979893,"creation_date":1636979893,"answer_id":69974531,"question_id":42135114,"body_markdown":"&quot;spring.jpa.hibernate.ddl-auto= create-drop&quot; means that when the server is run, the database(table) instance is created. And whenever the server stops, the database table instance is droped. ","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>&quot;spring.jpa.hibernate.ddl-auto= create-drop&quot; means that when the server is run, the database(table) instance is created. And whenever the server stops, the database table instance is droped.</p>\n"},{"tags":[],"owner":{"account_id":9961893,"reputation":41,"user_id":7370923,"display_name":"Lalit Sati"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674611704,"creation_date":1674609645,"answer_id":75228882,"question_id":42135114,"body_markdown":"For the Propertie of JPA/Hibernate \r\nspring.jpa.hibernate.ddl-auto value should be create, update, create-drop not other then it will give an exception, where the correct meaning for these value - \r\n\r\n - **Create** : when the server will start all entity will be newly created\r\n - **Update** : when the server will start container will find which entities are update and which all are newly created the same thing will happen inside database as well old table will update as per the entity and newly table will created \r\n\r\n - **Create-drop**: when the server will start then auto all entity will crete and when the server will stop all the entities will auto remove from database\r\n\r\n - **none** : it means database ddl will not impact from back-end application **Note**: Production environment always set with none value\r\n\r\n","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>For the Propertie of JPA/Hibernate\nspring.jpa.hibernate.ddl-auto value should be create, update, create-drop not other then it will give an exception, where the correct meaning for these value -</p>\n<ul>\n<li><p><strong>Create</strong> : when the server will start all entity will be newly created</p>\n</li>\n<li><p><strong>Update</strong> : when the server will start container will find which entities are update and which all are newly created the same thing will happen inside database as well old table will update as per the entity and newly table will created</p>\n</li>\n<li><p><strong>Create-drop</strong>: when the server will start then auto all entity will crete and when the server will stop all the entities will auto remove from database</p>\n</li>\n<li><p><strong>none</strong> : it means database ddl will not impact from back-end application <strong>Note</strong>: Production environment always set with none value</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1676415220,"creation_date":1676414350,"answer_id":75453902,"question_id":42135114,"body_markdown":"Also depending on `spring.jpa.hibernate.ddl-auto` the DML files feature is enabled\r\n\r\n## DDL and DML ##\r\n\r\nIt is worth to understand the difference between them.\r\n\r\n - **Data Definition Language(DDL)** - related to database schema creating\r\n - **Data Manipulation Language(DML)** - related to importing data \r\n\r\nBasically there are 3 types of database schema creating(DDL) and importing data(DML): \r\n\r\n - Using Hibernate \r\n - Using Spring JDBC SQL scripts \r\n - Using high level tools like Flyway/Liquibase\r\n\r\nThis topic covers Hibernate and it&#39;s DDL (first option), **but it is worth to mention Hibernate DML files feature** that enabled if `spring.jpa.hibernate.ddl-auto` is `create` or `create-drop` \r\n\r\nThat means `import.sql` in the root of the classpath will be executed on startup by Hibernate. This can be useful for demos and for testing if you are careful, but probably not something you want to be on the classpath in production. It is a Hibernate feature (nothing to do with Spring).\r\n\r\nAlso here is a table that explains `spring.jpa.hibernate.ddl-auto` and whether the `import.sql` can be used depending on `spring.jpa.hibernate.ddl-auto` value specified:\r\n\r\n|  **spring.jpa.hibernate.ddl-auto** | **Create schema from entities** |   **import.sql**   |\r\n|---------------------|-----------------------------|----------------|\r\n|       **create**        |            **true**             |      **true**      |\r\n|       **update**        | **update schema from entities** |     **false**      |\r\n|     **create-drop**     |            **true**             |      **true**      |\r\n|      **validate**       |            **false**            |     **false**      |\r\n|        **none**         |            **false**            |     **false**      |\r\n\r\nAlso some extra information about different types of DDL amd DML [can be found in Spring docs][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>Also depending on <code>spring.jpa.hibernate.ddl-auto</code> the DML files feature is enabled</p>\n<h2>DDL and DML</h2>\n<p>It is worth to understand the difference between them.</p>\n<ul>\n<li><strong>Data Definition Language(DDL)</strong> - related to database schema creating</li>\n<li><strong>Data Manipulation Language(DML)</strong> - related to importing data</li>\n</ul>\n<p>Basically there are 3 types of database schema creating(DDL) and importing data(DML):</p>\n<ul>\n<li>Using Hibernate</li>\n<li>Using Spring JDBC SQL scripts</li>\n<li>Using high level tools like Flyway/Liquibase</li>\n</ul>\n<p>This topic covers Hibernate and it's DDL (first option), <strong>but it is worth to mention Hibernate DML files feature</strong> that enabled if <code>spring.jpa.hibernate.ddl-auto</code> is <code>create</code> or <code>create-drop</code></p>\n<p>That means <code>import.sql</code> in the root of the classpath will be executed on startup by Hibernate. This can be useful for demos and for testing if you are careful, but probably not something you want to be on the classpath in production. It is a Hibernate feature (nothing to do with Spring).</p>\n<p>Also here is a table that explains <code>spring.jpa.hibernate.ddl-auto</code> and whether the <code>import.sql</code> can be used depending on <code>spring.jpa.hibernate.ddl-auto</code> value specified:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th><strong>spring.jpa.hibernate.ddl-auto</strong></th>\n<th><strong>Create schema from entities</strong></th>\n<th><strong>import.sql</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>create</strong></td>\n<td><strong>true</strong></td>\n<td><strong>true</strong></td>\n</tr>\n<tr>\n<td><strong>update</strong></td>\n<td><strong>update schema from entities</strong></td>\n<td><strong>false</strong></td>\n</tr>\n<tr>\n<td><strong>create-drop</strong></td>\n<td><strong>true</strong></td>\n<td><strong>true</strong></td>\n</tr>\n<tr>\n<td><strong>validate</strong></td>\n<td><strong>false</strong></td>\n<td><strong>false</strong></td>\n</tr>\n<tr>\n<td><strong>none</strong></td>\n<td><strong>false</strong></td>\n<td><strong>false</strong></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Also some extra information about different types of DDL amd DML <a href=\"https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html\" rel=\"noreferrer\">can be found in Spring docs</a></p>\n"}],"owner":{"account_id":4298757,"reputation":3291,"user_id":3513023,"accept_rate":65,"display_name":"METTAIBI"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482273,"favorite_count":0,"down_vote_count":1,"up_vote_count":301,"accepted_answer_id":42147995,"answer_count":5,"score":300,"last_activity_date":1694376866,"creation_date":1486638649,"question_id":42135114,"body_markdown":"I was working on my Spring boot app project and noticed that, sometimes there is a connection time out error to my Database on another server(SQL Server). \r\nThis happens specially when I try to do some script migration with `FlyWay` but it works after several tries. \r\n\r\nThen I noticed that I didn&#39;t specify  `spring.jpa.hibernate.ddl-auto` in my properties file. I did some research and found that it is recommended to add\r\n `spring.jpa.hibernate.ddl-auto= create-drop` in development.\r\n And change it to: `spring.jpa.hibernate.ddl-auto= none` in production.\r\n\r\nBut I didn&#39;t actually understand how does it really work and how does hibernate generate database schema using `create-drop` or `none` value. Can you please explain technically how does it really work, and what are recommendations for using this property in development and on a production server.\r\nThank you","title":"How does spring.jpa.hibernate.ddl-auto property exactly work in Spring?","body":"<p>I was working on my Spring boot app project and noticed that, sometimes there is a connection time out error to my Database on another server(SQL Server). \nThis happens specially when I try to do some script migration with <code>FlyWay</code> but it works after several tries. </p>\n\n<p>Then I noticed that I didn't specify  <code>spring.jpa.hibernate.ddl-auto</code> in my properties file. I did some research and found that it is recommended to add\n <code>spring.jpa.hibernate.ddl-auto= create-drop</code> in development.\n And change it to: <code>spring.jpa.hibernate.ddl-auto= none</code> in production.</p>\n\n<p>But I didn't actually understand how does it really work and how does hibernate generate database schema using <code>create-drop</code> or <code>none</code> value. Can you please explain technically how does it really work, and what are recommendations for using this property in development and on a production server.\nThank you</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694376857,"creation_date":1694177597,"answer_id":77067072,"question_id":77066533,"body_markdown":"You can use a [`QueueBrowser`][1]. You can create the browser using [`Session.createBrowser(Queue)`][2]. As the [API doc][1] states:\r\n\r\n&gt; A client uses a `QueueBrowser` object to look at messages on a queue without removing them.\r\n&gt;\r\n&gt; The `getEnumeration` method returns a `java.util.Enumeration` that is used to scan the queue&#39;s messages. It may be an enumeration of the entire content of a queue, or it may contain only the messages matching a message selector.\r\n\r\nThe `Enumeration` contains instances of the `javax.jms.Message` objects from the queue. Therefore you can inspect all the message&#39;s headers, properties, and body.\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/queuebrowser\r\n  [2]: https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/session#createBrowser-jakarta.jms.Queue-","title":"Is it possible to get all messages from a queue via JMS without deleting them from the queue?","body":"<p>You can use a <a href=\"https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/queuebrowser\" rel=\"nofollow noreferrer\"><code>QueueBrowser</code></a>. You can create the browser using <a href=\"https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/session#createBrowser-jakarta.jms.Queue-\" rel=\"nofollow noreferrer\"><code>Session.createBrowser(Queue)</code></a>. As the <a href=\"https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/queuebrowser\" rel=\"nofollow noreferrer\">API doc</a> states:</p>\n<blockquote>\n<p>A client uses a <code>QueueBrowser</code> object to look at messages on a queue without removing them.</p>\n<p>The <code>getEnumeration</code> method returns a <code>java.util.Enumeration</code> that is used to scan the queue's messages. It may be an enumeration of the entire content of a queue, or it may contain only the messages matching a message selector.</p>\n</blockquote>\n<p>The <code>Enumeration</code> contains instances of the <code>javax.jms.Message</code> objects from the queue. Therefore you can inspect all the message's headers, properties, and body.</p>\n"}],"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77067072,"answer_count":1,"score":0,"last_activity_date":1694376857,"creation_date":1694172823,"question_id":77066533,"body_markdown":"I would like to know if it is possible to get the messages from a queue through JMS without removing them. There is a `browse()` method in JMX, but is there a similar method in JMS?\r\n","title":"Is it possible to get all messages from a queue via JMS without deleting them from the queue?","body":"<p>I would like to know if it is possible to get the messages from a queue through JMS without removing them. There is a <code>browse()</code> method in JMX, but is there a similar method in JMS?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":262886,"reputation":1526,"user_id":548073,"accept_rate":69,"display_name":"sola"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645199672,"creation_date":1645199672,"answer_id":71176320,"question_id":71175593,"body_markdown":"In the Baeldung article, **Section 5** is only about various ways to define a graph with not much emphasis on the dynamic/non-dynamic nature of the definition itself.\r\n\r\nIn **Section 5.1** the definition of the graph is static but this section is only about demonstrating how to define a graph which then will be used in typical cases when building the graph dynamically is not really necessary. This section shows an alternative to the older way of building HQL / JPA-QL queries with JOIN FETCH sections.\r\n\r\n~~~\r\n@NamedEntityGraph(\r\n  name = &quot;post-entity-graph&quot;,\r\n  attributeNodes = {\r\n    @NamedAttributeNode(&quot;subject&quot;),\r\n    @NamedAttributeNode(&quot;user&quot;),\r\n    @NamedAttributeNode(&quot;comments&quot;),\r\n  }\r\n)\r\n@Entity\r\npublic class Post {\r\n\r\n    @OneToMany(mappedBy = &quot;post&quot;)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n    \r\n    //...\r\n}\r\n~~~\r\n\r\nThen, **Section 6** tells you how to use the entity graphs defined earlier in various ways.\r\n\r\n\r\n~~~\r\n// Getting the &quot;statically&quot; defined graph (from annotation)\r\nEntityGraph entityGraph = entityManager.getEntityGraph(&quot;post-entity-graph&quot;);\r\n\r\n// Then using the graph\r\nMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\nproperties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\r\nPost post = entityManager.find(Post.class, id, properties);\r\n~~~\r\n\r\nNaturally, you can swap this first line to the fully dynamically built graph demonstrated in Section 5.2:\r\n\r\n~~~\r\n// Building the graph dynamically\r\nEntityGraph&lt;Post&gt; entityGraph = entityManager.createEntityGraph(Post.class);\r\nentityGraph.addAttributeNodes(&quot;subject&quot;);\r\nentityGraph.addAttributeNodes(&quot;user&quot;);\r\n\r\n\r\n// Then using the graph\r\nMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\nproperties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\r\nPost post = entityManager.find(Post.class, id, properties);\r\n~~~\r\n\r\nIn both cases you supply an **EntityGraph** object to the query.\r\n","title":"How does JPA EntityGraph allow chosing the entity graph at runtime?","body":"<p>In the Baeldung article, <strong>Section 5</strong> is only about various ways to define a graph with not much emphasis on the dynamic/non-dynamic nature of the definition itself.</p>\n<p>In <strong>Section 5.1</strong> the definition of the graph is static but this section is only about demonstrating how to define a graph which then will be used in typical cases when building the graph dynamically is not really necessary. This section shows an alternative to the older way of building HQL / JPA-QL queries with JOIN FETCH sections.</p>\n<pre><code>@NamedEntityGraph(\n  name = &quot;post-entity-graph&quot;,\n  attributeNodes = {\n    @NamedAttributeNode(&quot;subject&quot;),\n    @NamedAttributeNode(&quot;user&quot;),\n    @NamedAttributeNode(&quot;comments&quot;),\n  }\n)\n@Entity\npublic class Post {\n\n    @OneToMany(mappedBy = &quot;post&quot;)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n    \n    //...\n}\n</code></pre>\n<p>Then, <strong>Section 6</strong> tells you how to use the entity graphs defined earlier in various ways.</p>\n<pre><code>// Getting the &quot;statically&quot; defined graph (from annotation)\nEntityGraph entityGraph = entityManager.getEntityGraph(&quot;post-entity-graph&quot;);\n\n// Then using the graph\nMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\nproperties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\nPost post = entityManager.find(Post.class, id, properties);\n</code></pre>\n<p>Naturally, you can swap this first line to the fully dynamically built graph demonstrated in Section 5.2:</p>\n<pre><code>// Building the graph dynamically\nEntityGraph&lt;Post&gt; entityGraph = entityManager.createEntityGraph(Post.class);\nentityGraph.addAttributeNodes(&quot;subject&quot;);\nentityGraph.addAttributeNodes(&quot;user&quot;);\n\n\n// Then using the graph\nMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\nproperties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\nPost post = entityManager.find(Post.class, id, properties);\n</code></pre>\n<p>In both cases you supply an <strong>EntityGraph</strong> object to the query.</p>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1645440522,"creation_date":1645203737,"answer_id":71177276,"question_id":71175593,"body_markdown":"You can&#39;t use dynamic entity graphs with spring-data, because `JpaRepository` doesn&#39;t have methods to pass entity graphs like\r\n```\r\nOptional&lt;T&gt; findById(ID id, EntityGraph entityGraph);\r\n```\r\n\r\n**Using custom JPA repository**\r\n\r\nYou can use raw JPA for that, by creating a custom repository and using entity graphs with `EntityManager`.\r\n\r\n**Using spring-data-jpa-entity-graph**\r\n\r\nThere is a more convenient approach by using library [\r\nspring-data-jpa-entity-graph](https://github.com/Cosium/spring-data-jpa-entity-graph).\r\n\r\nIt allows to use JPA repository methods like `findById()` or `findByName()` with dynamic entity graphs.\r\n\r\nI prefer to use it with this helper class\r\n```java\r\npublic abstract class EntityGraphBuilder&lt;T&gt; {\r\n\r\n    private List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n\r\n    protected T self;\r\n\r\n    public T add(String path) {\r\n        result.add(path);\r\n        return self;\r\n    }\r\n\r\n    public DynamicEntityGraph build() {\r\n        return new DynamicEntityGraph(EntityGraphType.FETCH, result);\r\n    }\r\n\r\n}\r\n```\r\n\r\nEach entity has its own `GraphBuilder`\r\n```java\r\n@Entity\r\npublic class OrderEntity {\r\n\r\n    @Id\r\n    private Long id;\r\n\r\n    @Column\r\n    private name;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private OrderRequestEntity orderRequest;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private ProviderEntity provider;\r\n\r\n    public static GraphBuilder graph() {\r\n        return new GraphBuilder();\r\n    }\r\n\r\n    public static class GraphBuilder extends EntityGraphBuilder&lt;GraphBuilder&gt; {\r\n\r\n        private GraphBuilder() {\r\n            self = this;\r\n        }\r\n\r\n        public GraphBuilder orderRequest() {\r\n            return add(&quot;orderRequest&quot;);\r\n        }\r\n\r\n        public GraphBuilder provider() {\r\n            return add(&quot;provider&quot;);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nRepository uses `EntityGraphJpaRepository` from `spring-data-jpa-entity-graph` library\r\n```\r\n@Repository\r\npublic interface OrdersRepository extends EntityGraphJpaRepository&lt;OrderEntity, Long&gt; {\r\n\r\n  OrderEntity findByName(String name, EntityGraph entityGraph);\r\n\r\n}\r\n```\r\n\r\nYou can use derived query methods like `findByName()` with dynamic entity graphs too.\r\n\r\nExample of using `findById()` method, the same approach can be applied to `findByName()`\r\n```\r\nOrdersRepository ordersRepository;\r\nLong orderId = 1L;\r\n\r\nOrderEntity order = ordersRepository.findById(\r\n  orderId,\r\n  OrderEntity.graph().orderRequest().provider().build()\r\n).orElseThrow(\r\n  () -&gt; new ServiceException(&quot;Can&#39;t find orderId=&quot; + orderId)\r\n);\r\n```","title":"How does JPA EntityGraph allow chosing the entity graph at runtime?","body":"<p>You can't use dynamic entity graphs with spring-data, because <code>JpaRepository</code> doesn't have methods to pass entity graphs like</p>\n<pre><code>Optional&lt;T&gt; findById(ID id, EntityGraph entityGraph);\n</code></pre>\n<p><strong>Using custom JPA repository</strong></p>\n<p>You can use raw JPA for that, by creating a custom repository and using entity graphs with <code>EntityManager</code>.</p>\n<p><strong>Using spring-data-jpa-entity-graph</strong></p>\n<p>There is a more convenient approach by using library <a href=\"https://github.com/Cosium/spring-data-jpa-entity-graph\" rel=\"nofollow noreferrer\">\nspring-data-jpa-entity-graph</a>.</p>\n<p>It allows to use JPA repository methods like <code>findById()</code> or <code>findByName()</code> with dynamic entity graphs.</p>\n<p>I prefer to use it with this helper class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class EntityGraphBuilder&lt;T&gt; {\n\n    private List&lt;String&gt; result = new ArrayList&lt;&gt;();\n\n    protected T self;\n\n    public T add(String path) {\n        result.add(path);\n        return self;\n    }\n\n    public DynamicEntityGraph build() {\n        return new DynamicEntityGraph(EntityGraphType.FETCH, result);\n    }\n\n}\n</code></pre>\n<p>Each entity has its own <code>GraphBuilder</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class OrderEntity {\n\n    @Id\n    private Long id;\n\n    @Column\n    private name;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    private OrderRequestEntity orderRequest;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    private ProviderEntity provider;\n\n    public static GraphBuilder graph() {\n        return new GraphBuilder();\n    }\n\n    public static class GraphBuilder extends EntityGraphBuilder&lt;GraphBuilder&gt; {\n\n        private GraphBuilder() {\n            self = this;\n        }\n\n        public GraphBuilder orderRequest() {\n            return add(&quot;orderRequest&quot;);\n        }\n\n        public GraphBuilder provider() {\n            return add(&quot;provider&quot;);\n        }\n\n    }\n\n}\n</code></pre>\n<p>Repository uses <code>EntityGraphJpaRepository</code> from <code>spring-data-jpa-entity-graph</code> library</p>\n<pre><code>@Repository\npublic interface OrdersRepository extends EntityGraphJpaRepository&lt;OrderEntity, Long&gt; {\n\n  OrderEntity findByName(String name, EntityGraph entityGraph);\n\n}\n</code></pre>\n<p>You can use derived query methods like <code>findByName()</code> with dynamic entity graphs too.</p>\n<p>Example of using <code>findById()</code> method, the same approach can be applied to <code>findByName()</code></p>\n<pre><code>OrdersRepository ordersRepository;\nLong orderId = 1L;\n\nOrderEntity order = ordersRepository.findById(\n  orderId,\n  OrderEntity.graph().orderRequest().provider().build()\n).orElseThrow(\n  () -&gt; new ServiceException(&quot;Can't find orderId=&quot; + orderId)\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21369010,"reputation":41,"user_id":15736811,"display_name":"Kagliostro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694376715,"creation_date":1694376715,"answer_id":77077738,"question_id":71175593,"body_markdown":"With spring-data from [jpa-buddy blog][1]:\r\n\r\n&gt; *&quot;Fortunately, this framework allows adding any arbitrary string between the repository method&#39;s find and By parts. So, in the repository, there will be two methods&quot;*\r\n\r\n    @EntityGraph(attributePaths = { &quot;pets.type&quot;, &quot;pets.visits&quot; })\r\n    Optional&lt;Owner&gt; findById(Integer id);\r\n\r\n    @EntityGraph(attributePaths = { &quot;pets &quot;})\r\n    Optional&lt;Owner&gt; findOwnerWithPetsById(Integer id);\r\n\r\n\r\n  [1]: https://jpa-buddy.com/blog/dynamic-entity-graphs-in-spring-data-jpa/","title":"How does JPA EntityGraph allow chosing the entity graph at runtime?","body":"<p>With spring-data from <a href=\"https://jpa-buddy.com/blog/dynamic-entity-graphs-in-spring-data-jpa/\" rel=\"nofollow noreferrer\">jpa-buddy blog</a>:</p>\n<blockquote>\n<p><em>&quot;Fortunately, this framework allows adding any arbitrary string between the repository method's find and By parts. So, in the repository, there will be two methods&quot;</em></p>\n</blockquote>\n<pre><code>@EntityGraph(attributePaths = { &quot;pets.type&quot;, &quot;pets.visits&quot; })\nOptional&lt;Owner&gt; findById(Integer id);\n\n@EntityGraph(attributePaths = { &quot;pets &quot;})\nOptional&lt;Owner&gt; findOwnerWithPetsById(Integer id);\n</code></pre>\n"}],"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2781,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71177276,"answer_count":3,"score":2,"last_activity_date":1694376715,"creation_date":1645196566,"question_id":71175593,"body_markdown":"I have seen various post describing that JPA EntityGraph allows to choose the graph at run time. And I am not entirely clear what this refers to.\r\n\r\nOut of good faith and respect I would like to take this helpful article for reference: https://www.baeldung.com/jpa-entity-graph. (Most of JPA users might have gone through it already.)\r\n\r\nThe article quotes - \r\n\r\n&gt; EntityGraph allows grouping the related persistence fields which we\r\n&gt; want to retrieve and lets us choose the graph type at runtime.\r\n\r\nand again solidifies above statement in conclusion section. \r\n\r\n&gt; In this article, we&#39;ve explored using the JPA Entity Graph to\r\n&gt; dynamically fetch an Entity and its associations.\r\n&gt; \r\n&gt; The decision is made at runtime in which we choose to load or not the\r\n&gt; related association.\r\n\r\nAs we see in the article (5.1) - EntityGraphs are defined as below using Annotations-   \r\n**5.1. Defining an Entity Graph with Annotations**\r\n\r\n    @NamedEntityGraph(\r\n      name = &quot;post-entity-graph&quot;,\r\n      attributeNodes = {\r\n        @NamedAttributeNode(&quot;subject&quot;),\r\n        @NamedAttributeNode(&quot;user&quot;),\r\n        @NamedAttributeNode(&quot;comments&quot;),\r\n      }\r\n    )\r\n    @Entity\r\n    public class Post {\r\n    \r\n        @OneToMany(mappedBy = &quot;post&quot;)\r\n        private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n        \r\n        //...\r\n    }\r\n\r\n**The @NameEntityGraph annotation is defined at compile time and I don&#39;t see anything runtime or dynamic here.**\r\n\r\n**But in 5.2** - entity graphs are defined using api or programmatically -   \r\n**5.2. Defining an Entity Graph with the JPA API**\r\n   \r\n     EntityGraph&lt;Post&gt; entityGraph = entityManager.createEntityGraph(Post.class);\r\n     entityGraph.addAttributeNodes(&quot;subject&quot;);\r\n     entityGraph.addAttributeNodes(&quot;user&quot;);\r\n\r\n***In 5.2 approach, I see nodes can be chosen dynamically using some logic. So is this approach is what is refered to &quot;dynamically fetch&quot; and &quot;runtime based&quot;.***\r\nOr am i missing something and do i have more to understand.\r\n\r\nFurther the approaches given in **6. Using the Entity Graph**   \r\nex:  \r\n\r\n    EntityGraph entityGraph = entityManager.getEntityGraph(&quot;post-entity-graph&quot;);\r\n    Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n    properties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\r\n    Post post = entityManager.find(Post.class, id, properties);\r\n\r\nare all programmatic and so can be changed during runtime i.e they can be said as dynamic.   \r\nBut one approach missed in above article, but mentioned here - https://www.baeldung.com/spring-data-jpa-named-entity-graphs, as below, does not seem to fit in to dynamic criteria. \r\n\r\n    public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\r\n    \r\n        @EntityGraph(value = &quot;Item.characteristics&quot;)\r\n        Item findByName(String name);\r\n    }\r\n\r\n\r\n**So does the dynamic approach just refer to 5.2 style or it implies even 5.1 style too.** \r\n\r\n","title":"How does JPA EntityGraph allow chosing the entity graph at runtime?","body":"<p>I have seen various post describing that JPA EntityGraph allows to choose the graph at run time. And I am not entirely clear what this refers to.</p>\n<p>Out of good faith and respect I would like to take this helpful article for reference: <a href=\"https://www.baeldung.com/jpa-entity-graph\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-entity-graph</a>. (Most of JPA users might have gone through it already.)</p>\n<p>The article quotes -</p>\n<blockquote>\n<p>EntityGraph allows grouping the related persistence fields which we\nwant to retrieve and lets us choose the graph type at runtime.</p>\n</blockquote>\n<p>and again solidifies above statement in conclusion section.</p>\n<blockquote>\n<p>In this article, we've explored using the JPA Entity Graph to\ndynamically fetch an Entity and its associations.</p>\n<p>The decision is made at runtime in which we choose to load or not the\nrelated association.</p>\n</blockquote>\n<p>As we see in the article (5.1) - EntityGraphs are defined as below using Annotations-<br />\n<strong>5.1. Defining an Entity Graph with Annotations</strong></p>\n<pre><code>@NamedEntityGraph(\n  name = &quot;post-entity-graph&quot;,\n  attributeNodes = {\n    @NamedAttributeNode(&quot;subject&quot;),\n    @NamedAttributeNode(&quot;user&quot;),\n    @NamedAttributeNode(&quot;comments&quot;),\n  }\n)\n@Entity\npublic class Post {\n\n    @OneToMany(mappedBy = &quot;post&quot;)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n    \n    //...\n}\n</code></pre>\n<p><strong>The @NameEntityGraph annotation is defined at compile time and I don't see anything runtime or dynamic here.</strong></p>\n<p><strong>But in 5.2</strong> - entity graphs are defined using api or programmatically -<br />\n<strong>5.2. Defining an Entity Graph with the JPA API</strong></p>\n<pre><code> EntityGraph&lt;Post&gt; entityGraph = entityManager.createEntityGraph(Post.class);\n entityGraph.addAttributeNodes(&quot;subject&quot;);\n entityGraph.addAttributeNodes(&quot;user&quot;);\n</code></pre>\n<p><em><strong>In 5.2 approach, I see nodes can be chosen dynamically using some logic. So is this approach is what is refered to &quot;dynamically fetch&quot; and &quot;runtime based&quot;.</strong></em>\nOr am i missing something and do i have more to understand.</p>\n<p>Further the approaches given in <strong>6. Using the Entity Graph</strong><br />\nex:</p>\n<pre><code>EntityGraph entityGraph = entityManager.getEntityGraph(&quot;post-entity-graph&quot;);\nMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\nproperties.put(&quot;javax.persistence.fetchgraph&quot;, entityGraph);\nPost post = entityManager.find(Post.class, id, properties);\n</code></pre>\n<p>are all programmatic and so can be changed during runtime i.e they can be said as dynamic.<br />\nBut one approach missed in above article, but mentioned here - <a href=\"https://www.baeldung.com/spring-data-jpa-named-entity-graphs\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-jpa-named-entity-graphs</a>, as below, does not seem to fit in to dynamic criteria.</p>\n<pre><code>public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\n\n    @EntityGraph(value = &quot;Item.characteristics&quot;)\n    Item findByName(String name);\n}\n</code></pre>\n<p><strong>So does the dynamic approach just refer to 5.2 style or it implies even 5.1 style too.</strong></p>\n"},{"tags":["java","jsp","struts"],"comments":[{"owner":{"account_id":4575430,"reputation":1857,"user_id":3713995,"accept_rate":80,"display_name":"Abhijeet Panwar"},"score":0,"creation_date":1403007026,"post_id":24262370,"comment_id":37482710,"body_markdown":"Trying to diagnose problem, First put a creator constructor and put a System.out.println(&quot;constructor called&quot;); and then put System.out.println(&quot;setter called&quot;); in your setters. check if constructor and setters are being called or not?","body":"Trying to diagnose problem, First put a creator constructor and put a System.out.println(&quot;constructor called&quot;); and then put System.out.println(&quot;setter called&quot;); in your setters. check if constructor and setters are being called or not?"},{"owner":{"account_id":3589855,"reputation":1411,"user_id":2996174,"accept_rate":0,"display_name":"user2996174"},"score":0,"creation_date":1403007516,"post_id":24262370,"comment_id":37483038,"body_markdown":"constructor is called but setters is not called","body":"constructor is called but setters is not called"},{"owner":{"account_id":4575430,"reputation":1857,"user_id":3713995,"accept_rate":80,"display_name":"Abhijeet Panwar"},"score":0,"creation_date":1403008079,"post_id":24262370,"comment_id":37483407,"body_markdown":"How are you providing File in that text box?","body":"How are you providing File in that text box?"}],"answers":[{"tags":[],"owner":{"account_id":3952469,"reputation":3052,"user_id":3677030,"accept_rate":21,"display_name":"Mohammed Rampurawala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403006549,"creation_date":1403006549,"answer_id":24263290,"question_id":24262370,"body_markdown":"teacherRegisterForward() needs to return the ActionForward object so return the Object\r\n\r\n    public ActionForward teacherregister(ActionMapping mapping,ActionForm form,HttpServletRequest request,HttpServletResponse response)throws Exception\r\n                    {\r\n            \r\n                        TeacherForm tform=(TeacherForm)form;\r\n                        formFile = tform.getTeacherprofile();\r\n                          System.out.println(&quot;tfastname-----&quot;+tform.getTfastname());\r\n                        return null;\r\n            \r\n                }","title":"java.lang.IllegalArgumentException: argument type mismatch:when store the form values in Database","body":"<p>teacherRegisterForward() needs to return the ActionForward object so return the Object</p>\n\n<pre><code>public ActionForward teacherregister(ActionMapping mapping,ActionForm form,HttpServletRequest request,HttpServletResponse response)throws Exception\n                {\n\n                    TeacherForm tform=(TeacherForm)form;\n                    formFile = tform.getTeacherprofile();\n                      System.out.println(\"tfastname-----\"+tform.getTfastname());\n                    return null;\n\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4575430,"reputation":1857,"user_id":3713995,"accept_rate":80,"display_name":"Abhijeet Panwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403009455,"creation_date":1403008950,"answer_id":24264125,"question_id":24262370,"body_markdown":"Your constructor is not being called by form means that type of parameters passed by your Struts form and  provided bean class are difference. Bean class has a decalration of FormFile type teacherfile, while by  textfields value from form value is taken as String. \r\n\r\n\r\nMay be this tutorial can help you :-[File Uplaod Example in Struts1][1]\r\n\r\n\r\n  [1]: http://www.mkyong.com/struts/struts-file-upload-example/","title":"java.lang.IllegalArgumentException: argument type mismatch:when store the form values in Database","body":"<p>Your constructor is not being called by form means that type of parameters passed by your Struts form and  provided bean class are difference. Bean class has a decalration of FormFile type teacherfile, while by  textfields value from form value is taken as String. </p>\n\n<p>May be this tutorial can help you :-<a href=\"http://www.mkyong.com/struts/struts-file-upload-example/\" rel=\"nofollow\">File Uplaod Example in Struts1</a></p>\n"},{"tags":[],"owner":{"account_id":4346013,"reputation":1904,"user_id":3547935,"display_name":"hari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403067577,"creation_date":1403067577,"answer_id":24277353,"question_id":24262370,"body_markdown":"which line throw an exceptions?\r\n   \r\n    Caused by: java.lang.IllegalArgumentException: Cannot invoke com.centris.campus.forms.TeacherForm.setTeacherprofile on bean class &#39;class com.centris.campus.forms.TeacherForm&#39; - argument type mismatch - had objects of type &quot;java.lang.String&quot; but expected signature &quot;org.apache.struts.upload.FormFile&quot;\r\n\r\nthat line clearly tells, tform.getTeacherprofile(); return FormFile Type(it means you can save in FormFile datatypes).check formFile type.if you are using String formFile only.It should throw like the error.\r\n\r\n    formFile = tform.getTeacherprofile();\r\n\r\ntry this,\r\n\r\n    FormFile formFile = tform.getTeacherprofile();\r\n\r\nexpected signature &quot;FormFile&quot;\r\n\r\n\r\nReceived signature  &quot;String&quot;\r\n\r\n\r\n","title":"java.lang.IllegalArgumentException: argument type mismatch:when store the form values in Database","body":"<p>which line throw an exceptions?</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Cannot invoke com.centris.campus.forms.TeacherForm.setTeacherprofile on bean class 'class com.centris.campus.forms.TeacherForm' - argument type mismatch - had objects of type \"java.lang.String\" but expected signature \"org.apache.struts.upload.FormFile\"\n</code></pre>\n\n<p>that line clearly tells, tform.getTeacherprofile(); return FormFile Type(it means you can save in FormFile datatypes).check formFile type.if you are using String formFile only.It should throw like the error.</p>\n\n<pre><code>formFile = tform.getTeacherprofile();\n</code></pre>\n\n<p>try this,</p>\n\n<pre><code>FormFile formFile = tform.getTeacherprofile();\n</code></pre>\n\n<p>expected signature \"FormFile\"</p>\n\n<p>Received signature  \"String\"</p>\n"}],"owner":{"account_id":3589855,"reputation":1411,"user_id":2996174,"accept_rate":0,"display_name":"user2996174"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10104,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694376390,"creation_date":1403003816,"question_id":24262370,"body_markdown":"I want to store form values in Database using struts\r\nMy form Bean:\r\n\r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.upload.FormFile;\r\n        public class TeacherForm extends ActionForm {\r\n        \r\n        private String tfastname;\r\n        private FormFile teacherImage;\t\r\n        private FormFile teacherprofile;\r\n        \r\n        public String getTfastname() {\r\n        \r\n        \treturn tfastname;\r\n        }\r\n        \r\n        public void setTfastname(String tfastname) {\r\n        \tthis.tfastname = tfastname;\r\n        }\r\n        \r\n        \r\n        public FormFile getTeacherImage() {\r\n        \treturn teacherImage;\r\n        }\r\n        \r\n        public void setTeacherImage(FormFile teacherImage) {\r\n        \tthis.teacherImage = teacherImage;\r\n        }\r\n        \r\n        public FormFile getTeacherprofile() {\r\n        \treturn teacherprofile;\r\n        }\r\n        \r\n        public void setTeacherprofile(FormFile teacherprofile) {\r\n        \tthis.teacherprofile = teacherprofile;\r\n        \r\n        }\r\n\r\nBelow is the jsp:\r\n\r\n\r\n    &lt;form action=&quot;teacherregistration.html&quot;  enctype=&quot;multipart/form-data&quot;&gt;\r\n    \t\t\t&lt;input type=&quot;hidden&quot; name=&quot;method&quot; value=&quot;teacherregister&quot;&gt;&lt;/input&gt;\r\n    \t\t\t           &lt;table class=&quot;tablecss&quot; cellspacing=&quot;3&quot; cellpadding=&quot;3&quot;&gt;\r\n    \t\t\t\t\t&lt;tr&gt;\r\n    \t\t\t\t\t\t&lt;td align=&quot;right&quot; valign=&quot;middle&quot; width=&quot;10%&quot;&gt;&lt;label\r\n    \t\t\t\t\t\t\tclass=&quot;LblDialog&quot;&gt;First Name&lt;/label&gt;&lt;/td&gt;\r\n    \t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot;  name=&quot;tfastname&quot; id=&quot;fname&quot;\r\n    \t\t\t\t\t\t\t\tclass=&quot;textBoxInDialog&quot;/&gt;&lt;/td&gt;\r\n    \r\n                        &lt;tr&gt;\t\r\n                                   \r\n                        &lt;td align=&quot;center&quot; valign=&quot;middle&quot; width=&quot;10%&quot;&gt;&lt;label\r\n    \t\t\t\t\t\t class=&quot;textBoxInDialog&quot;&gt;Upload Profile&lt;/label&gt;&lt;/td&gt;\r\n    \t\t\t\t\t&lt;td align=&quot;center&quot; valign=&quot;middle&quot; width=&quot;10%&quot;&gt;&lt;input\r\n    \t\t\t\t\t\t\ttype=&quot;file&quot; id=&quot;teaprofile&quot; name=&quot;teacherprofile&quot;/&gt;&lt;/td&gt;\r\n    \t\t\t\t\t&lt;td align=&quot;center&quot; valign=&quot;middle&quot; width=&quot;10%&quot;&gt;&lt;label\r\n    \t\t\t\t\t\t class=&quot;textBoxInDialog&quot;&gt;Image&lt;/label&gt;&lt;/td&gt;\r\n    \t\t\t\t    &lt;td align=&quot;center&quot; valign=&quot;middle&quot; width=&quot;10%&quot;&gt;&lt;input\r\n    \t\t\t\t\t\t\ttype=&quot;file&quot; id=&quot;teaImageId&quot; name=&quot;teacherImage&quot; /&gt;&lt;img\r\n    \t\t\t\t\t\t\tid=&quot;imagePreview&quot; src=&quot;#&quot; alt=&quot;your image&quot; width=&quot;70px&quot;\r\n    \t\t\t\t\t\t\theight=&quot;70px&quot;/&gt;&lt;/td&gt; \t\r\n    \t\t\t\t&lt;/tr&gt;\r\n    \r\n    \t\t\t\t&lt;/table&gt;\r\n    \t\t\t\t&lt;br /&gt;\r\n    \t\t\t\t\t\t\t\t&lt;table id=&quot;parentReg&quot; cellspacing=&quot;3&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot;&gt;\r\n    \t\t\t\t\t&lt;tr class=&quot;odd&quot;&gt;\r\n    \r\n    \t\t\t\t\t\t&lt;td colspan=&quot;3&quot;&gt;&lt;center&gt;\r\n    \t\t\t\t\t\t\t\t&lt;input type=&quot;submit&quot; class=&quot;submitButton&quot; id=&quot;buttonID&quot;&gt;&lt;/input&gt;&lt;/td&gt;\r\n    \t\t\t\t\t&lt;/tr&gt;\r\n\r\n\t\r\nIn configuration file:\r\n\r\n    &lt;form-bean name=&quot;teacherregistorform&quot; type=&quot;com.centris.campus.forms.TeacherForm&quot; /&gt;\r\n    \r\n    &lt;action path=&quot;/teacherregistration&quot;\r\n    \t\t\ttype=&quot;com.centris.campus.actions.TeacherRegistrationAction&quot; input=&quot;/JSP/Teacher/TeacherRegistration.jsp&quot; parameter=&quot;method&quot;\r\n    \t\t\tname=&quot;teacherregistorform&quot; scope=&quot;request&quot;&gt;\r\n    \t\t\t&lt;forward name=&quot;teacherLogin&quot; path=&quot;inAdminTeacherRegistration&quot;/&gt;\r\n    \t\t&lt;/action&gt;\r\n\r\n\r\nIn Action class:\r\n\r\n\t\r\n    import org.apache.struts.upload.FormFile;\r\n    \r\n        public ActionForward teacherregister(ActionMapping mapping,ActionForm form,HttpServletRequest request,HttpServletResponse response)throws Exception\r\n        \t{\r\n        \t\t\r\n        \t\tTeacherForm tform=(TeacherForm)form;\r\n        \t    formFile = tform.getTeacherprofile();\r\n        \t\t  System.out.println(&quot;tfastname-----&quot;+tform.getTfastname());\r\n        \r\n        }\r\n        \r\n\r\n\t\r\nHere am using log4j also when i click on submit button i will get below error:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Cannot invoke com.centris.campus.forms.TeacherForm.setTeacherprofile on bean class &#39;class com.centris.campus.forms.TeacherForm&#39; - argument type mismatch - had objects of type &quot;java.lang.String&quot; but expected signature &quot;org.apache.struts.upload.FormFile&quot;\r\n    \tat org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2181)\r\n    \tat org.apache.commons.beanutils.PropertyUtilsBean.setSimpleProperty(PropertyUtilsBean.java:2141)\r\n    \tat org.apache.commons.beanutils.PropertyUtilsBean.setNestedProperty(PropertyUtilsBean.java:1948)\r\n    \tat org.apache.commons.beanutils.PropertyUtilsBean.setProperty(PropertyUtilsBean.java:2054)\r\n    \tat org.apache.commons.beanutils.BeanUtilsBean.setProperty(BeanUtilsBean.java:1015)\r\n    \tat org.apache.commons.beanutils.BeanUtilsBean.populate(BeanUtilsBean.java:830)\r\n    \tat org.apache.commons.beanutils.BeanUtils.populate(BeanUtils.java:433)\r\n    \tat org.apache.struts.util.RequestUtils.populate(RequestUtils.java:473)\r\n    \t... 25 more\r\n    Caused by: java.lang.IllegalArgumentException: argument type mismatch\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2155)\r\n    \t... 32 more\r\n    \r\n    \t  \r\n\r\nplease give me any solution how to solve this problem.\r\nThis is helpful for me.\r\n\r\n","title":"java.lang.IllegalArgumentException: argument type mismatch:when store the form values in Database","body":"<p>I want to store form values in Database using struts\nMy form Bean:</p>\n\n<pre><code>import org.apache.struts.action.ActionForm;\nimport org.apache.struts.upload.FormFile;\n    public class TeacherForm extends ActionForm {\n\n    private String tfastname;\n    private FormFile teacherImage;  \n    private FormFile teacherprofile;\n\n    public String getTfastname() {\n\n        return tfastname;\n    }\n\n    public void setTfastname(String tfastname) {\n        this.tfastname = tfastname;\n    }\n\n\n    public FormFile getTeacherImage() {\n        return teacherImage;\n    }\n\n    public void setTeacherImage(FormFile teacherImage) {\n        this.teacherImage = teacherImage;\n    }\n\n    public FormFile getTeacherprofile() {\n        return teacherprofile;\n    }\n\n    public void setTeacherprofile(FormFile teacherprofile) {\n        this.teacherprofile = teacherprofile;\n\n    }\n</code></pre>\n\n<p>Below is the jsp:</p>\n\n<pre><code>&lt;form action=\"teacherregistration.html\"  enctype=\"multipart/form-data\"&gt;\n            &lt;input type=\"hidden\" name=\"method\" value=\"teacherregister\"&gt;&lt;/input&gt;\n                       &lt;table class=\"tablecss\" cellspacing=\"3\" cellpadding=\"3\"&gt;\n                    &lt;tr&gt;\n                        &lt;td align=\"right\" valign=\"middle\" width=\"10%\"&gt;&lt;label\n                            class=\"LblDialog\"&gt;First Name&lt;/label&gt;&lt;/td&gt;\n                        &lt;td&gt;&lt;input type=\"text\"  name=\"tfastname\" id=\"fname\"\n                                class=\"textBoxInDialog\"/&gt;&lt;/td&gt;\n\n                    &lt;tr&gt;    \n\n                    &lt;td align=\"center\" valign=\"middle\" width=\"10%\"&gt;&lt;label\n                         class=\"textBoxInDialog\"&gt;Upload Profile&lt;/label&gt;&lt;/td&gt;\n                    &lt;td align=\"center\" valign=\"middle\" width=\"10%\"&gt;&lt;input\n                            type=\"file\" id=\"teaprofile\" name=\"teacherprofile\"/&gt;&lt;/td&gt;\n                    &lt;td align=\"center\" valign=\"middle\" width=\"10%\"&gt;&lt;label\n                         class=\"textBoxInDialog\"&gt;Image&lt;/label&gt;&lt;/td&gt;\n                    &lt;td align=\"center\" valign=\"middle\" width=\"10%\"&gt;&lt;input\n                            type=\"file\" id=\"teaImageId\" name=\"teacherImage\" /&gt;&lt;img\n                            id=\"imagePreview\" src=\"#\" alt=\"your image\" width=\"70px\"\n                            height=\"70px\"/&gt;&lt;/td&gt;    \n                &lt;/tr&gt;\n\n                &lt;/table&gt;\n                &lt;br /&gt;\n                                &lt;table id=\"parentReg\" cellspacing=\"3\" cellpadding=\"3\" width=\"100%\"&gt;\n                    &lt;tr class=\"odd\"&gt;\n\n                        &lt;td colspan=\"3\"&gt;&lt;center&gt;\n                                &lt;input type=\"submit\" class=\"submitButton\" id=\"buttonID\"&gt;&lt;/input&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n</code></pre>\n\n<p>In configuration file:</p>\n\n<pre><code>&lt;form-bean name=\"teacherregistorform\" type=\"com.centris.campus.forms.TeacherForm\" /&gt;\n\n&lt;action path=\"/teacherregistration\"\n            type=\"com.centris.campus.actions.TeacherRegistrationAction\" input=\"/JSP/Teacher/TeacherRegistration.jsp\" parameter=\"method\"\n            name=\"teacherregistorform\" scope=\"request\"&gt;\n            &lt;forward name=\"teacherLogin\" path=\"inAdminTeacherRegistration\"/&gt;\n        &lt;/action&gt;\n</code></pre>\n\n<p>In Action class:</p>\n\n<pre><code>import org.apache.struts.upload.FormFile;\n\n    public ActionForward teacherregister(ActionMapping mapping,ActionForm form,HttpServletRequest request,HttpServletResponse response)throws Exception\n        {\n\n            TeacherForm tform=(TeacherForm)form;\n            formFile = tform.getTeacherprofile();\n              System.out.println(\"tfastname-----\"+tform.getTfastname());\n\n    }\n</code></pre>\n\n<p>Here am using log4j also when i click on submit button i will get below error:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Cannot invoke com.centris.campus.forms.TeacherForm.setTeacherprofile on bean class 'class com.centris.campus.forms.TeacherForm' - argument type mismatch - had objects of type \"java.lang.String\" but expected signature \"org.apache.struts.upload.FormFile\"\n    at org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2181)\n    at org.apache.commons.beanutils.PropertyUtilsBean.setSimpleProperty(PropertyUtilsBean.java:2141)\n    at org.apache.commons.beanutils.PropertyUtilsBean.setNestedProperty(PropertyUtilsBean.java:1948)\n    at org.apache.commons.beanutils.PropertyUtilsBean.setProperty(PropertyUtilsBean.java:2054)\n    at org.apache.commons.beanutils.BeanUtilsBean.setProperty(BeanUtilsBean.java:1015)\n    at org.apache.commons.beanutils.BeanUtilsBean.populate(BeanUtilsBean.java:830)\n    at org.apache.commons.beanutils.BeanUtils.populate(BeanUtils.java:433)\n    at org.apache.struts.util.RequestUtils.populate(RequestUtils.java:473)\n    ... 25 more\nCaused by: java.lang.IllegalArgumentException: argument type mismatch\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2155)\n    ... 32 more\n</code></pre>\n\n<p>please give me any solution how to solve this problem.\nThis is helpful for me.</p>\n"},{"tags":["java","javafx","textarea","selection"],"comments":[{"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"score":0,"creation_date":1694373561,"post_id":77077367,"comment_id":135879346,"body_markdown":"@James_D `ListView` may be a good option I haven&#39;t thought about. Could you give me a simple implementation with a few options to select from so I can get an idea of how it works?","body":"@James_D <code>ListView</code> may be a good option I haven&#39;t thought about. Could you give me a simple implementation with a few options to select from so I can get an idea of how it works?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694375312,"post_id":77077367,"comment_id":135879512,"body_markdown":"Added example (both of using a `ListView` and of doing this with a `TextArea` as an answer.","body":"Added example (both of using a <code>ListView</code> and of doing this with a <code>TextArea</code> as an answer."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694375541,"creation_date":1694374358,"answer_id":77077617,"question_id":77077367,"body_markdown":"It is never a particularly good idea to add low-level event handling (such as mouse and keyboard event handlers) to high-level UI controls. You always stand the risk of interfering with the built-in functionality of the controls, or of the built-in functionality interfering with your event handlers resulting in not giving you the functionality you want.\r\n\r\nIn your case, the latter is happening: the `TextArea` already implements changing the selection when keys are pressed. If the arrow keys are pressed with no modifier key, then the selection will be cleared. This default behavior is occurring *after* your key press is invoked, so the default behavior is the behavior you see.\r\n\r\nYou can see what is happening by adding\r\n\r\n    textArea.selectionProperty().addListener((obs, oldSel, newSel) -&gt; \r\n        System.out.printf(&quot;Selection change: %s -&gt; %s%n&quot;, oldSel, newSel)\r\n    );\r\n\r\nNote you can workaround this by adding `event.consume()` to both the `if() { ... }` blocks in your key event handler, but I don&#39;t think this is a particularly good solution: the solutions below are better imho.\r\n\r\n\r\nIt looks like you are simply using the wrong control here. If you have a non-editable `TextArea` in which you are regarding each line as a distinct item, then it sounds like you are trying to re-implement a `ListView`, which already implements things like selection of the individual items. You can reimplement your example simple with:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ListView;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.Random;\r\n    \r\n    public class Main extends Application {\r\n        public static void main(String[] args) {\r\n            Application.launch(args);\r\n        }\r\n    \r\n        private ListView&lt;String&gt; listView;\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            System.out.println(&quot;Starting JavaFX Window...&quot;);\r\n            StackPane rootPane = new StackPane();\r\n            listView = new ListView&lt;&gt;();\r\n    \r\n    \r\n            listView.getItems().add(&quot;TEST&quot;);\r\n            createRandomOptions(8);\r\n    \r\n    \r\n            rootPane.getChildren().add(listView);\r\n            Scene scene = new Scene(rootPane, 900, 500);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n            System.out.println(&quot;Created window.&quot;);\r\n            System.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\r\n                    + &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\r\n                    + &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Creates a bunch of random options in textArea.\r\n         * @param newOptionCount\r\n         */\r\n        private void createRandomOptions(int newOptionCount) {\r\n            for (int i = 0; i &lt; newOptionCount; i++) {\r\n                listView.getItems().add(&quot;SEL&quot; + (new Random().nextInt(10000)));\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nIf you really want to modify what is selected in a text area, use a `TextFormatter` with a filter that modifies the selection. This would looks something like this (though, again, I think this is just reinventing the wheel). Note this also behaves the way you (presumably) want on mouse clicks:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.IndexRange;\r\n    import javafx.scene.control.TextArea;\r\n    import javafx.scene.control.TextFormatter;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.Random;\r\n    \r\n    public class Main extends Application {\r\n        public static void main(String[] args) {\r\n            Application.launch(args);\r\n        }\r\n    \r\n        private TextArea textArea;\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            System.out.println(&quot;Starting JavaFX Window...&quot;);\r\n            StackPane rootPane = new StackPane();\r\n            textArea = new TextArea();\r\n    \r\n            textArea.selectionProperty().addListener((obs, oldSel, newSel) -&gt; System.out.printf(&quot;Selection change: %s -&gt; %s%n&quot;, oldSel, newSel));\r\n    \r\n            textArea.setText(&quot;TEST&quot;);\r\n            textArea.setEditable(false);\r\n            createRandomOptions(8);\r\n    \r\n            textArea.setTextFormatter(new TextFormatter&lt;String&gt;(this::modifySelection));\r\n    \r\n            rootPane.getChildren().add(textArea);\r\n            Scene scene = new Scene(rootPane, 900, 500);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n            System.out.println(&quot;Created window.&quot;);\r\n            System.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\r\n                    + &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\r\n                    + &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\r\n        }\r\n        \r\n        private TextFormatter.Change modifySelection(TextFormatter.Change change) {\r\n            IndexRange selection = change.getSelection();\r\n            String[] lines = change.getControlNewText().split(&quot;\\n&quot;);\r\n            int lineStart = 0 ;\r\n            for (String line : lines) {\r\n                int lineEnd = lineStart + line.length();\r\n                if (lineStart &lt;= selection.getStart() &amp;&amp; lineEnd &gt;= selection.getStart()) {\r\n                    change.setAnchor(lineStart);\r\n                }\r\n                if (lineStart &lt;= selection.getEnd() &amp;&amp; lineEnd &gt;= selection.getEnd()) {\r\n                    change.setCaretPosition(lineEnd);\r\n                }\r\n                lineStart += line.length() + 1; // +1 to account for line terminator itself\r\n            }\r\n            return change;\r\n        }\r\n    \r\n        /**\r\n         * Creates a bunch of random options in textArea.\r\n         * @param newOptionCount\r\n         */\r\n        private void createRandomOptions(int newOptionCount) {\r\n            for (int i = 0; i &lt; newOptionCount; i++) {\r\n                textArea.appendText(&quot;\\nSEL&quot; + (new Random().nextInt(10000)));\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Why does selectRange() in JavaFX TextArea sometimes not highlight the selection?","body":"<p>It is never a particularly good idea to add low-level event handling (such as mouse and keyboard event handlers) to high-level UI controls. You always stand the risk of interfering with the built-in functionality of the controls, or of the built-in functionality interfering with your event handlers resulting in not giving you the functionality you want.</p>\n<p>In your case, the latter is happening: the <code>TextArea</code> already implements changing the selection when keys are pressed. If the arrow keys are pressed with no modifier key, then the selection will be cleared. This default behavior is occurring <em>after</em> your key press is invoked, so the default behavior is the behavior you see.</p>\n<p>You can see what is happening by adding</p>\n<pre><code>textArea.selectionProperty().addListener((obs, oldSel, newSel) -&gt; \n    System.out.printf(&quot;Selection change: %s -&gt; %s%n&quot;, oldSel, newSel)\n);\n</code></pre>\n<p>Note you can workaround this by adding <code>event.consume()</code> to both the <code>if() { ... }</code> blocks in your key event handler, but I don't think this is a particularly good solution: the solutions below are better imho.</p>\n<p>It looks like you are simply using the wrong control here. If you have a non-editable <code>TextArea</code> in which you are regarding each line as a distinct item, then it sounds like you are trying to re-implement a <code>ListView</code>, which already implements things like selection of the individual items. You can reimplement your example simple with:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ListView;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\nimport java.util.Random;\n\npublic class Main extends Application {\n    public static void main(String[] args) {\n        Application.launch(args);\n    }\n\n    private ListView&lt;String&gt; listView;\n\n    @Override\n    public void start(Stage primaryStage) {\n        System.out.println(&quot;Starting JavaFX Window...&quot;);\n        StackPane rootPane = new StackPane();\n        listView = new ListView&lt;&gt;();\n\n\n        listView.getItems().add(&quot;TEST&quot;);\n        createRandomOptions(8);\n\n\n        rootPane.getChildren().add(listView);\n        Scene scene = new Scene(rootPane, 900, 500);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n        System.out.println(&quot;Created window.&quot;);\n        System.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\n                + &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\n                + &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\n    }\n\n\n    /**\n     * Creates a bunch of random options in textArea.\n     * @param newOptionCount\n     */\n    private void createRandomOptions(int newOptionCount) {\n        for (int i = 0; i &lt; newOptionCount; i++) {\n            listView.getItems().add(&quot;SEL&quot; + (new Random().nextInt(10000)));\n        }\n    }\n\n}\n</code></pre>\n<p>If you really want to modify what is selected in a text area, use a <code>TextFormatter</code> with a filter that modifies the selection. This would looks something like this (though, again, I think this is just reinventing the wheel). Note this also behaves the way you (presumably) want on mouse clicks:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.IndexRange;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextFormatter;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\nimport java.util.Random;\n\npublic class Main extends Application {\n    public static void main(String[] args) {\n        Application.launch(args);\n    }\n\n    private TextArea textArea;\n\n    @Override\n    public void start(Stage primaryStage) {\n        System.out.println(&quot;Starting JavaFX Window...&quot;);\n        StackPane rootPane = new StackPane();\n        textArea = new TextArea();\n\n        textArea.selectionProperty().addListener((obs, oldSel, newSel) -&gt; System.out.printf(&quot;Selection change: %s -&gt; %s%n&quot;, oldSel, newSel));\n\n        textArea.setText(&quot;TEST&quot;);\n        textArea.setEditable(false);\n        createRandomOptions(8);\n\n        textArea.setTextFormatter(new TextFormatter&lt;String&gt;(this::modifySelection));\n\n        rootPane.getChildren().add(textArea);\n        Scene scene = new Scene(rootPane, 900, 500);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n        System.out.println(&quot;Created window.&quot;);\n        System.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\n                + &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\n                + &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\n    }\n    \n    private TextFormatter.Change modifySelection(TextFormatter.Change change) {\n        IndexRange selection = change.getSelection();\n        String[] lines = change.getControlNewText().split(&quot;\\n&quot;);\n        int lineStart = 0 ;\n        for (String line : lines) {\n            int lineEnd = lineStart + line.length();\n            if (lineStart &lt;= selection.getStart() &amp;&amp; lineEnd &gt;= selection.getStart()) {\n                change.setAnchor(lineStart);\n            }\n            if (lineStart &lt;= selection.getEnd() &amp;&amp; lineEnd &gt;= selection.getEnd()) {\n                change.setCaretPosition(lineEnd);\n            }\n            lineStart += line.length() + 1; // +1 to account for line terminator itself\n        }\n        return change;\n    }\n\n    /**\n     * Creates a bunch of random options in textArea.\n     * @param newOptionCount\n     */\n    private void createRandomOptions(int newOptionCount) {\n        for (int i = 0; i &lt; newOptionCount; i++) {\n            textArea.appendText(&quot;\\nSEL&quot; + (new Random().nextInt(10000)));\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77077617,"answer_count":1,"score":1,"last_activity_date":1694375541,"creation_date":1694369394,"question_id":77077367,"body_markdown":"I have written the following code in my JavaFX main class:\r\n```\r\npackage jfxTest;\r\n\r\nimport java.util.Random;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.TextArea;\r\nimport javafx.scene.input.KeyCode;\r\nimport javafx.scene.input.KeyEvent;\r\nimport javafx.scene.layout.StackPane;\r\nimport javafx.stage.Stage;\r\n\r\npublic class Main extends Application {\r\n\tpublic static void main(String[] args) {\r\n\t\tApplication.launch(args);\r\n\t}\r\n\r\n\tprivate static int selectionIndex = 0;\r\n\tprivate static TextArea textArea;\r\n\r\n\t@Override\r\n\tpublic void start(Stage primaryStage) {\r\n\t\tSystem.out.println(&quot;Starting JavaFX Window...&quot;);\r\n\t\tStackPane rootPane = new StackPane();\r\n\t\ttextArea = new TextArea();\r\n\r\n\t\ttextArea.setText(&quot;TEST&quot;);\r\n\t\ttextArea.setEditable(false);\r\n\t\tcreateRandomOptions(8);\r\n\r\n\t\ttextArea.addEventFilter(KeyEvent.KEY_PRESSED, event -&gt; {\r\n\t\t\tif (event.getCode().equals(KeyCode.UP)) {\r\n\t\t\t\tselect(selectionIndex &lt;= 0 ? 0 : selectionIndex - 1);\r\n\t\t\t}\r\n\t\t\tif (event.getCode().equals(KeyCode.DOWN)) {\r\n\t\t\t\tString[] lines = textArea.getText().split(&quot;\\n&quot;);\r\n\t\t\t\tselect(selectionIndex &gt;= lines.length - 1 ? lines.length - 1 : selectionIndex + 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trootPane.getChildren().add(textArea);\r\n\t\tScene scene = new Scene(rootPane, 900, 500);\r\n\t\tprimaryStage.setScene(scene);\r\n\t\tprimaryStage.show();\r\n\t\tSystem.out.println(&quot;Created window.&quot;);\r\n\t\tSystem.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\r\n\t\t\t\t+ &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\r\n\t\t\t\t+ &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Creates a bunch of random options in textArea.\r\n\t * @param newOptionCount\r\n\t */\r\n\tprivate static void createRandomOptions(int newOptionCount) {\r\n\t\tfor (int i = 0; i &lt; newOptionCount; i++) {\r\n\t\t\ttextArea.appendText(&quot;\\nSEL&quot; + (new Random().nextInt(10000)));\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static void select(int newSelectionIndex) {\r\n\t\tString[] lines = textArea.getText().split(&quot;\\n&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;New selection index: &quot; + newSelectionIndex);\r\n\t\tselectionIndex = newSelectionIndex;\r\n\t\t\r\n\t\t// Determine selection indexes\r\n\t\tint selectionStart = 0;\r\n\t\tint selectionEnd = 0;\r\n\t\tfor (int i = 0; i &lt; newSelectionIndex; i++) {\r\n\t\t\tselectionStart += lines[i].length() + 1;\r\n\t\t}\r\n\t\tselectionEnd = selectionStart + lines[newSelectionIndex].length();\r\n\t\t\r\n\t\t// Does not work. Selection does need to be applied twice by the user to be actually highlighted.\r\n\t\ttextArea.selectRange(selectionStart, selectionEnd);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Selected text: &quot; + textArea.getSelectedText() + &quot;\\n&quot;);\r\n\t}\r\n}\r\n\r\n```\r\n\r\nI know it looks like a mess and is not exactly clean, but you should get the point.\r\nNow the problem is as follows:\r\nWhen I navigate in the `TextArea` with the arrow keys (specifically UP and DOWN), the selection only becomes visible, when it is applied twice by the user(only at the very top and bottom), although, a call to `selectRange()` is made everytime.\r\n\r\nWhy is this? Is it a bug in the JavaFX library, or am I missing something?\r\n\r\n\r\nI have searched the problem a few times already, but I&#39;ve found no results yet.\r\nI haven&#39;t tested this using AWT Swing yet, but I am quite confident, that it would work fine using it.\r\n\r\nMy Java is OpenJDK 19 with JavaFX version 19.","title":"Why does selectRange() in JavaFX TextArea sometimes not highlight the selection?","body":"<p>I have written the following code in my JavaFX main class:</p>\n<pre><code>package jfxTest;\n\nimport java.util.Random;\n\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\npublic class Main extends Application {\n    public static void main(String[] args) {\n        Application.launch(args);\n    }\n\n    private static int selectionIndex = 0;\n    private static TextArea textArea;\n\n    @Override\n    public void start(Stage primaryStage) {\n        System.out.println(&quot;Starting JavaFX Window...&quot;);\n        StackPane rootPane = new StackPane();\n        textArea = new TextArea();\n\n        textArea.setText(&quot;TEST&quot;);\n        textArea.setEditable(false);\n        createRandomOptions(8);\n\n        textArea.addEventFilter(KeyEvent.KEY_PRESSED, event -&gt; {\n            if (event.getCode().equals(KeyCode.UP)) {\n                select(selectionIndex &lt;= 0 ? 0 : selectionIndex - 1);\n            }\n            if (event.getCode().equals(KeyCode.DOWN)) {\n                String[] lines = textArea.getText().split(&quot;\\n&quot;);\n                select(selectionIndex &gt;= lines.length - 1 ? lines.length - 1 : selectionIndex + 1);\n            }\n        });\n\n        rootPane.getChildren().add(textArea);\n        Scene scene = new Scene(rootPane, 900, 500);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n        System.out.println(&quot;Created window.&quot;);\n        System.out.println(&quot;\\nNow press up and down keys to navigate:\\n&quot;\n                + &quot;Notice, that although a new selection is displayed in the console, it is not\\n&quot;\n                + &quot;highlighted in the window itself. Even a call to getSelectedText() works fine.\\n&quot;);\n    }\n    \n    /**\n     * Creates a bunch of random options in textArea.\n     * @param newOptionCount\n     */\n    private static void createRandomOptions(int newOptionCount) {\n        for (int i = 0; i &lt; newOptionCount; i++) {\n            textArea.appendText(&quot;\\nSEL&quot; + (new Random().nextInt(10000)));\n        }\n    }\n    \n    private static void select(int newSelectionIndex) {\n        String[] lines = textArea.getText().split(&quot;\\n&quot;);\n        \n        System.out.println(&quot;New selection index: &quot; + newSelectionIndex);\n        selectionIndex = newSelectionIndex;\n        \n        // Determine selection indexes\n        int selectionStart = 0;\n        int selectionEnd = 0;\n        for (int i = 0; i &lt; newSelectionIndex; i++) {\n            selectionStart += lines[i].length() + 1;\n        }\n        selectionEnd = selectionStart + lines[newSelectionIndex].length();\n        \n        // Does not work. Selection does need to be applied twice by the user to be actually highlighted.\n        textArea.selectRange(selectionStart, selectionEnd);\n        \n        System.out.println(&quot;Selected text: &quot; + textArea.getSelectedText() + &quot;\\n&quot;);\n    }\n}\n\n</code></pre>\n<p>I know it looks like a mess and is not exactly clean, but you should get the point.\nNow the problem is as follows:\nWhen I navigate in the <code>TextArea</code> with the arrow keys (specifically UP and DOWN), the selection only becomes visible, when it is applied twice by the user(only at the very top and bottom), although, a call to <code>selectRange()</code> is made everytime.</p>\n<p>Why is this? Is it a bug in the JavaFX library, or am I missing something?</p>\n<p>I have searched the problem a few times already, but I've found no results yet.\nI haven't tested this using AWT Swing yet, but I am quite confident, that it would work fine using it.</p>\n<p>My Java is OpenJDK 19 with JavaFX version 19.</p>\n"},{"tags":["java","maven","jacoco","jacoco-maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694418633,"post_id":77076495,"comment_id":135883379,"body_markdown":"First why do you have unit tests in a separate module instead of the module where the code lives? What is the reason? What kind of problem are you trying to solve?","body":"First why do you have unit tests in a separate module instead of the module where the code lives? What is the reason? What kind of problem are you trying to solve?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694418706,"post_id":77076495,"comment_id":135883388,"body_markdown":"Also using old versions of maven-surefire-plugin, maven-compiler-plugin etc. I strongy recommend to upgrade to the most recent version for all plugin check here: https://maven.apache.org/plugins/","body":"Also using old versions of maven-surefire-plugin, maven-compiler-plugin etc. I strongy recommend to upgrade to the most recent version for all plugin check here: <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>"},{"owner":{"account_id":15107999,"reputation":13,"user_id":10903041,"display_name":"mrKaczorrro"},"score":0,"creation_date":1694422730,"post_id":77076495,"comment_id":135884111,"body_markdown":"This is simplified version of the project which I am working on. The real project has junit SOAP tests under &#39;.src.test.java&#39; folder and xml files with SOAP tests under &#39;test.souapui&#39; folder. In the &#39;multi-module&#39; project, I intentionally used the old versions of the dependencies, because they are the same ones  I use in my work project.","body":"This is simplified version of the project which I am working on. The real project has junit SOAP tests under &#39;.src.test.java&#39; folder and xml files with SOAP tests under &#39;test.souapui&#39; folder. In the &#39;multi-module&#39; project, I intentionally used the old versions of the dependencies, because they are the same ones  I use in my work project."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694423138,"post_id":77076495,"comment_id":135884188,"body_markdown":"So this means first SOAP tests are integration tests and should be executed by failsafe-plugin with the appropriate naming convention (*IT.java).. also that means you should update your project. Apart from that it does not answer my question why you have unit tests in a separate module which makes no sense ... unit tests should be in the same module as your production code which you are testing.","body":"So this means first SOAP tests are integration tests and should be executed by failsafe-plugin with the appropriate naming convention (*IT.java).. also that means you should update your project. Apart from that it does not answer my question why you have unit tests in a separate module which makes no sense ... unit tests should be in the same module as your production code which you are testing."},{"owner":{"account_id":15107999,"reputation":13,"user_id":10903041,"display_name":"mrKaczorrro"},"score":0,"creation_date":1694424901,"post_id":77076495,"comment_id":135884538,"body_markdown":"You are right, having unit tests in separate project does not make sense. The only reason why i did this in &#39;multi-module&#39; project, was to simplify the structure of my work project and highlight the  &quot;Skipping JaCoCo execution due to missing classes directory.&quot; error.  So if I understand it correct, the only possibility to generate JaCoCo report in case of &#39;multi-module&#39; project, is to configure it as a integration test?","body":"You are right, having unit tests in separate project does not make sense. The only reason why i did this in &#39;multi-module&#39; project, was to simplify the structure of my work project and highlight the  &quot;Skipping JaCoCo execution due to missing classes directory.&quot; error.  So if I understand it correct, the only possibility to generate JaCoCo report in case of &#39;multi-module&#39; project, is to configure it as a integration test?"}],"answers":[{"tags":[],"owner":{"account_id":1380512,"reputation":110,"user_id":7388422,"display_name":"Shant Khayalian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694370192,"creation_date":1694370192,"answer_id":77077405,"question_id":77076495,"body_markdown":"There are many reasons for the problem, but consider this step to find out the configuration missing section.\r\n\r\n1. Check Data File Location:\r\nIn your `multi-module-tests` module&#39;s `pom.xml`, ensure that the `jacoco.exec` file is being generated in the correct location. The `destFile` property should specify the full path to where the `jacoco.exec` file should be saved, which is typically within the target directory of the module.\r\n\r\n       &lt;configuration&gt;\r\n           &lt;destFile&gt;${project.build.directory}/jacoco.exec&lt;/destFile&gt;\r\n       &lt;/configuration&gt;\r\n\r\n\r\n2. Check Include Patterns:\r\nIn the `jacoco-report` module&#39;s `pom.xml`, your `&lt;dataFileIncludes&gt;` pattern should match the location of `jacoco.exec` files from all your modules. Make sure it&#39;s set correctly to include all the modules.\r\n\r\n       &lt;dataFileIncludes&gt;\r\n           &lt;dataFileInclude&gt;/target/jacoco.exec&lt;/dataFileInclude&gt;\r\n       &lt;/dataFileIncludes&gt;\r\n\r\n3. Ensure Correct Execution Order:\r\nWhen running `mvn clean install -DskipTests=false`, make sure that the modules are executed in the correct order. Dependencies between modules must be resolved in the right sequence to ensure that coverage data is collected properly.\r\n\r\n4. Run `verify` Phase:\r\nEnsure that you run the `verify` phase to generate the reports in the `jacoco-report` module, as specified in your `jacoco-report` module&#39;s `pom.xml`.\r\n\r\n   mvn clean verify\r\n\r\n5. Verify Relative Paths:\r\nDouble-check that relative paths are correctly configured in your POM files, especially for properties like `destFile`. Relative paths should be based on the current module&#39;s location.\r\n\r\n6. Plugin Versions Compatibility:\r\nVerify that you are using compatible versions of Maven, JaCoCo, and related plugins. Incompatibilities can lead to issues with report generation.\r\n\r\n7. Debugging Output:\r\nEnable debugging output (`-X` flag) when running Maven (`mvn clean install -DskipTests=false -X`) to get more detailed information about what is happening during the build process. This might help pinpoint the issue.\r\n\r\n8. Check Classpath Configuration:\r\nEnsure that the classes and test classes directories are correctly configured in your POM files for both the `jacoco-maven-plugin` and the `maven-surefire-plugin`. Verify that the `includes` section in `jacoco-maven-plugin` covers the classes you want to include in the report.\r\n\r\nAfter making these adjustments, try running the build again (`mvn clean verify`) and check if the JaCoCo report is generated correctly in the `jacoco-report` module with the expected coverage data.\r\n\r\nHope I was helpful.\r\n\r\n","title":"Jacoco can not find classes directory in multi-module maven project and generates empty html report","body":"<p>There are many reasons for the problem, but consider this step to find out the configuration missing section.</p>\n<ol>\n<li><p>Check Data File Location:\nIn your <code>multi-module-tests</code> module's <code>pom.xml</code>, ensure that the <code>jacoco.exec</code> file is being generated in the correct location. The <code>destFile</code> property should specify the full path to where the <code>jacoco.exec</code> file should be saved, which is typically within the target directory of the module.</p>\n<pre><code>&lt;configuration&gt;\n    &lt;destFile&gt;${project.build.directory}/jacoco.exec&lt;/destFile&gt;\n&lt;/configuration&gt;\n</code></pre>\n</li>\n<li><p>Check Include Patterns:\nIn the <code>jacoco-report</code> module's <code>pom.xml</code>, your <code>&lt;dataFileIncludes&gt;</code> pattern should match the location of <code>jacoco.exec</code> files from all your modules. Make sure it's set correctly to include all the modules.</p>\n<pre><code>&lt;dataFileIncludes&gt;\n    &lt;dataFileInclude&gt;/target/jacoco.exec&lt;/dataFileInclude&gt;\n&lt;/dataFileIncludes&gt;\n</code></pre>\n</li>\n<li><p>Ensure Correct Execution Order:\nWhen running <code>mvn clean install -DskipTests=false</code>, make sure that the modules are executed in the correct order. Dependencies between modules must be resolved in the right sequence to ensure that coverage data is collected properly.</p>\n</li>\n<li><p>Run <code>verify</code> Phase:\nEnsure that you run the <code>verify</code> phase to generate the reports in the <code>jacoco-report</code> module, as specified in your <code>jacoco-report</code> module's <code>pom.xml</code>.</p>\n<p>mvn clean verify</p>\n</li>\n<li><p>Verify Relative Paths:\nDouble-check that relative paths are correctly configured in your POM files, especially for properties like <code>destFile</code>. Relative paths should be based on the current module's location.</p>\n</li>\n<li><p>Plugin Versions Compatibility:\nVerify that you are using compatible versions of Maven, JaCoCo, and related plugins. Incompatibilities can lead to issues with report generation.</p>\n</li>\n<li><p>Debugging Output:\nEnable debugging output (<code>-X</code> flag) when running Maven (<code>mvn clean install -DskipTests=false -X</code>) to get more detailed information about what is happening during the build process. This might help pinpoint the issue.</p>\n</li>\n<li><p>Check Classpath Configuration:\nEnsure that the classes and test classes directories are correctly configured in your POM files for both the <code>jacoco-maven-plugin</code> and the <code>maven-surefire-plugin</code>. Verify that the <code>includes</code> section in <code>jacoco-maven-plugin</code> covers the classes you want to include in the report.</p>\n</li>\n</ol>\n<p>After making these adjustments, try running the build again (<code>mvn clean verify</code>) and check if the JaCoCo report is generated correctly in the <code>jacoco-report</code> module with the expected coverage data.</p>\n<p>Hope I was helpful.</p>\n"}],"owner":{"account_id":15107999,"reputation":13,"user_id":10903041,"display_name":"mrKaczorrro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694375490,"creation_date":1694355509,"question_id":77076495,"body_markdown":"In my multi-module project I have a code and tests in separate modules. When I run maven command `&#39;mvn clean install -DskipTests=false&#39;`, jacoco.exec file is generated in test module but Jacoco complains about missing classes directory. In jacoco-report module, the report is generated but its empty. \r\n\r\nHow can I configure it to generate report or to be more specific how can I point Jacoco to the classes directory?\r\n\r\nHere is structure of my project:\r\n\r\n[![Code structure](https://i.stack.imgur.com/G4WMz.png)](https://i.stack.imgur.com/G4WMz.png)\r\n\r\nMy pom file from &#39;multi-module&#39;: \r\n\r\n```\r\n &lt;build&gt;\r\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;11&lt;/release&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M3&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;\r\n                        --illegal-access=permit\r\n                    &lt;/argLine&gt;\r\n                    &lt;argLine&gt;@{argLine}&lt;/argLine&gt;\r\n                    &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\r\n                    &lt;skipTests&gt;${skipTests}&lt;/skipTests&gt;\r\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;**/*Test.java&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.10&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;destFile&gt;${project.basedir}/../multi-module-core/target/jacoco.exec&lt;/destFile&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;jacoco-site&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;dataFile&gt;${project.basedir}/../multi-module-tests/target/jacoco.exec&lt;/dataFile&gt;\r\n                            &lt;includes&gt;\r\n                                &lt;include&gt;${project.basedir}/../multi-module-core/target/classes/**&lt;/include&gt;\r\n                            &lt;/includes&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;`\r\n```\r\n\r\n\r\nPom file from &#39;multi-module-core&#39;: \r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;11&lt;/release&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\nPom file from &#39;multi-module-tests&#39;: \r\n\r\n```\r\n   &lt;build&gt;\r\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;11&lt;/release&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.18&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;@{argLine}&lt;/argLine&gt;\r\n                    &lt;skipTests&gt;${skipTests}&lt;/skipTests&gt;\r\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;filesets&gt;\r\n                        &lt;fileset&gt;\r\n                            &lt;directory&gt;.&lt;/directory&gt;\r\n                            &lt;includes&gt;\r\n                                &lt;include&gt;**/*.log&lt;/include&gt;\r\n                            &lt;/includes&gt;\r\n                            &lt;followSymlinks&gt;false&lt;/followSymlinks&gt;\r\n                        &lt;/fileset&gt;\r\n                    &lt;/filesets&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\n\r\nPom file from &#39;jacoco-report&#39;: \r\n\r\n```\r\n  &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.10&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report-aggregate&lt;/id&gt;\r\n                        &lt;phase&gt;verify&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report-aggregate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;dataFileIncludes&gt;\r\n                                &lt;dataFileInclude&gt;**/jacoco.exec&lt;/dataFileInclude&gt;\r\n                            &lt;/dataFileIncludes&gt;\r\n                            &lt;outputDirectory&gt;\r\n                                ${project.reporting.outputDirectory}/jacoco-aggregate\r\n                            &lt;/outputDirectory&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\n\r\nSo far I tried multiple configurations from all over the internet but with the same result. Appreciate any help or suggestions. \r\n\r\n\r\n**EDIT 1**:\r\nAs suggested I run mvn command in debug mode:\r\n\r\n    mvn clean verify -DskipTests=false -X\r\n\r\nIT turns out that the following path is wrong:\r\n\r\n    &lt;include&gt;${project.basedir}/../multi-module-core/target/classes/**&lt;/include&gt;\r\n\r\nand it points to :  **[C:\\Projects\\jococo\\test\\multi-module\\multi-module-tests/../multi-module-core/target/classes/**]**  .\r\n\r\nBut even when I hard coded the path to **C:\\Projects\\jococo\\test\\multi-module\\multi-module-core\\target\\classes** \r\n\r\nHere is what I got during jacoco:report phase:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XQJgW.png\r\n\r\n     includes = [C:\\Projects\\jococo\\test\\multi-module\\multi-module-core\\target\\classes]\r\n\r\n\r\nIt looks like the paths pointing to the correct directory with classes but I still got the same error message: **Skipping JaCoCo execution due to missing classes directory.** \r\n\r\n**EDIT 2:**\r\n\r\nFor the reference here is GitHub repo to the project:  https://github.com/KonarzewskiP/jacoco-multi-module","title":"Jacoco can not find classes directory in multi-module maven project and generates empty html report","body":"<p>In my multi-module project I have a code and tests in separate modules. When I run maven command <code>'mvn clean install -DskipTests=false'</code>, jacoco.exec file is generated in test module but Jacoco complains about missing classes directory. In jacoco-report module, the report is generated but its empty.</p>\n<p>How can I configure it to generate report or to be more specific how can I point Jacoco to the classes directory?</p>\n<p>Here is structure of my project:</p>\n<p><a href=\"https://i.stack.imgur.com/G4WMz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G4WMz.png\" alt=\"Code structure\" /></a></p>\n<p>My pom file from 'multi-module':</p>\n<pre><code> &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;\n                        --illegal-access=permit\n                    &lt;/argLine&gt;\n                    &lt;argLine&gt;@{argLine}&lt;/argLine&gt;\n                    &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\n                    &lt;skipTests&gt;${skipTests}&lt;/skipTests&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;**/*Test.java&lt;/include&gt;\n                    &lt;/includes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.10&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;destFile&gt;${project.basedir}/../multi-module-core/target/jacoco.exec&lt;/destFile&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;prepare-agent&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;jacoco-site&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;dataFile&gt;${project.basedir}/../multi-module-tests/target/jacoco.exec&lt;/dataFile&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;${project.basedir}/../multi-module-core/target/classes/**&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;`\n</code></pre>\n<p>Pom file from 'multi-module-core':</p>\n<pre><code>    &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.3&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>Pom file from 'multi-module-tests':</p>\n<pre><code>   &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}-${project.version}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.18&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;@{argLine}&lt;/argLine&gt;\n                    &lt;skipTests&gt;${skipTests}&lt;/skipTests&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;filesets&gt;\n                        &lt;fileset&gt;\n                            &lt;directory&gt;.&lt;/directory&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;**/*.log&lt;/include&gt;\n                            &lt;/includes&gt;\n                            &lt;followSymlinks&gt;false&lt;/followSymlinks&gt;\n                        &lt;/fileset&gt;\n                    &lt;/filesets&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>Pom file from 'jacoco-report':</p>\n<pre><code>  &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.10&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report-aggregate&lt;/id&gt;\n                        &lt;phase&gt;verify&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report-aggregate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;dataFileIncludes&gt;\n                                &lt;dataFileInclude&gt;**/jacoco.exec&lt;/dataFileInclude&gt;\n                            &lt;/dataFileIncludes&gt;\n                            &lt;outputDirectory&gt;\n                                ${project.reporting.outputDirectory}/jacoco-aggregate\n                            &lt;/outputDirectory&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>So far I tried multiple configurations from all over the internet but with the same result. Appreciate any help or suggestions.</p>\n<p><strong>EDIT 1</strong>:\nAs suggested I run mvn command in debug mode:</p>\n<pre><code>mvn clean verify -DskipTests=false -X\n</code></pre>\n<p>IT turns out that the following path is wrong:</p>\n<pre><code>&lt;include&gt;${project.basedir}/../multi-module-core/target/classes/**&lt;/include&gt;\n</code></pre>\n<p>and it points to :  <strong>[C:\\Projects\\jococo\\test\\multi-module\\multi-module-tests/../multi-module-core/target/classes/</strong>]**  .</p>\n<p>But even when I hard coded the path to <strong>C:\\Projects\\jococo\\test\\multi-module\\multi-module-core\\target\\classes</strong></p>\n<p>Here is what I got during jacoco:report phase:</p>\n<p><a href=\"https://i.stack.imgur.com/XQJgW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XQJgW.png\" alt=\"enter image description here\" /></a></p>\n<pre><code> includes = [C:\\Projects\\jococo\\test\\multi-module\\multi-module-core\\target\\classes]\n</code></pre>\n<p>It looks like the paths pointing to the correct directory with classes but I still got the same error message: <strong>Skipping JaCoCo execution due to missing classes directory.</strong></p>\n<p><strong>EDIT 2:</strong></p>\n<p>For the reference here is GitHub repo to the project:  <a href=\"https://github.com/KonarzewskiP/jacoco-multi-module\" rel=\"nofollow noreferrer\">https://github.com/KonarzewskiP/jacoco-multi-module</a></p>\n"},{"tags":["java","spring","maven","spring-mvc","spring-social-google"],"comments":[{"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"score":1,"creation_date":1443992379,"post_id":32938328,"comment_id":53702068,"body_markdown":"Could it be that some of the dependencies have a transitive dependency  on Spring that would cause a version conflict?","body":"Could it be that some of the dependencies have a transitive dependency  on Spring that would cause a version conflict?"},{"owner":{"account_id":1914991,"reputation":95,"user_id":1727736,"display_name":"Avinash Vundyala"},"score":0,"creation_date":1443992515,"post_id":32938328,"comment_id":53702108,"body_markdown":"@hotzst I guess the same but i am unable to figure out which one is causing the conflict.","body":"@hotzst I guess the same but i am unable to figure out which one is causing the conflict."},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":1,"creation_date":1443992541,"post_id":32938328,"comment_id":53702115,"body_markdown":"This is most certainly a version mismatch. Check your actual lib directory for duplicate libraries and do mvn dependency:tree to figure out what is dragging in the wrong one. See more on this here: https://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html","body":"This is most certainly a version mismatch. Check your actual lib directory for duplicate libraries and do mvn dependency:tree to figure out what is dragging in the wrong one. See more on this here: <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-dependency-plugin/examples/&hellip;</a>"},{"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"score":3,"creation_date":1443992647,"post_id":32938328,"comment_id":53702153,"body_markdown":"By the way `maven-eclipse-plugin` is deprecated obsolete piece of garbage.","body":"By the way <code>maven-eclipse-plugin</code> is deprecated obsolete piece of garbage."},{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":1,"creation_date":1443992807,"post_id":32938328,"comment_id":53702214,"body_markdown":"Is this `&lt;source&gt;1.6&lt;/source&gt;` normal? You are declaring a property `java-version` with 1.8","body":"Is this <code>&lt;source&gt;1.6&lt;&#47;source&gt;</code> normal? You are declaring a property <code>java-version</code> with 1.8"},{"owner":{"account_id":1914991,"reputation":95,"user_id":1727736,"display_name":"Avinash Vundyala"},"score":0,"creation_date":1443993008,"post_id":32938328,"comment_id":53702275,"body_markdown":"Updated with the result of mvn dependency:tree. looks like its all good.","body":"Updated with the result of mvn dependency:tree. looks like its all good."},{"owner":{"account_id":1914991,"reputation":95,"user_id":1727736,"display_name":"Avinash Vundyala"},"score":0,"creation_date":1443994355,"post_id":32938328,"comment_id":53702687,"body_markdown":"It appears that its not a dependency conflict cause i ran the same pom on other application","body":"It appears that its not a dependency conflict cause i ran the same pom on other application"},{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1443995768,"post_id":32938328,"comment_id":53703101,"body_markdown":"And the server is not using its own Spring libraries? Which server are you using?","body":"And the server is not using its own Spring libraries? Which server are you using?"},{"owner":{"account_id":1914991,"reputation":95,"user_id":1727736,"display_name":"Avinash Vundyala"},"score":0,"creation_date":1444013414,"post_id":32938328,"comment_id":53706510,"body_markdown":"i am using tomcat and the server is not using its own spring library","body":"i am using tomcat and the server is not using its own spring library"},{"owner":{"account_id":4638140,"reputation":817,"user_id":3758745,"accept_rate":50,"display_name":"user3758745"},"score":0,"creation_date":1459886817,"post_id":32938328,"comment_id":60486744,"body_markdown":"@Avinash did you found a solution for this problem? Could you put an answer here please if you do? I&#39;m so sick of this garbage framework.","body":"@Avinash did you found a solution for this problem? Could you put an answer here please if you do? I&#39;m so sick of this garbage framework."}],"answers":[{"tags":[],"owner":{"account_id":8293443,"reputation":31,"user_id":6234326,"display_name":"liuyang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504653740,"creation_date":1461653884,"answer_id":36857465,"question_id":32938328,"body_markdown":"I met the problem and solve it.It is because the jar version conflicts.\r\nThe process I met the problem\r\n\r\n - 1. I use 4.2.0.release spring at first in pom.xml\r\n   2. but I find it seems wrong\r\n   3. then I change 4.2.0.release to 4.0.2.release\r\n   4. then I change 4.0.2.release to 4.2.0.release, and run on server\r\n   5. i met the problem\r\n   6. At last, I change the vesion, and it runs. So, I am using 4.0.2.release.","title":"Caused by: java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;","body":"<p>I met the problem and solve it.It is because the jar version conflicts.\nThe process I met the problem</p>\n\n<ul>\n<li><ol>\n<li>I use 4.2.0.release spring at first in pom.xml</li>\n<li>but I find it seems wrong</li>\n<li>then I change 4.2.0.release to 4.0.2.release</li>\n<li>then I change 4.0.2.release to 4.2.0.release, and run on server</li>\n<li>i met the problem</li>\n<li>At last, I change the vesion, and it runs. So, I am using 4.0.2.release.</li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694375330,"creation_date":1694375330,"answer_id":77077667,"question_id":32938328,"body_markdown":"For me it was mismatch of the version of `org.springframework:spring-web`. There was a conflict between the version resolved by org.springframework.boot:spring-boot-starter-web:3.1.0 which is 6.0.9 and the version I provided in the pom – 6.0.0. After changing the version to 6.0.9, the error disappeared.\r\n\r\n    &lt;springframework.version&gt;3.1.0&lt;/springframework.version&gt;\r\n    &lt;springweb.version&gt;6.0.9&lt;/springweb.version&gt;\r\n    ...\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;${springweb.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Caused by: java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;","body":"<p>For me it was mismatch of the version of <code>org.springframework:spring-web</code>. There was a conflict between the version resolved by org.springframework.boot:spring-boot-starter-web:3.1.0 which is 6.0.9 and the version I provided in the pom – 6.0.0. After changing the version to 6.0.9, the error disappeared.</p>\n<pre><code>&lt;springframework.version&gt;3.1.0&lt;/springframework.version&gt;\n&lt;springweb.version&gt;6.0.9&lt;/springweb.version&gt;\n...\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;${springframework.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;${springweb.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1914991,"reputation":95,"user_id":1727736,"display_name":"Avinash Vundyala"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9585,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694375330,"creation_date":1443992223,"question_id":32938328,"body_markdown":"&gt;org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0&#39;: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;\r\n&gt;\r\n&gt;Caused by: java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;\r\n\r\nBeen stuck with this error for hours.\r\n\r\n\r\nmy pom.xml\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;com.social&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;sample-social&lt;/artifactId&gt;\r\n    \t&lt;name&gt;ezhire&lt;/name&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java-version&gt;1.8&lt;/java-version&gt;\r\n    \t\t&lt;org.springframework-version&gt;4.2.1.RELEASE&lt;/org.springframework-version&gt;\r\n    \t\t&lt;org.springframework.social-version&gt;1.1.0.RELEASE&lt;/org.springframework.social-version&gt;\r\n    \t\t&lt;org.springframework.social.google-version&gt;1.0.0.RELEASE&lt;/org.springframework.social.google-version&gt;\r\n    \t\t&lt;org.springframework.security-version&gt;4.0.2.RELEASE&lt;/org.springframework.security-version&gt;\r\n    \t\t&lt;org.aspectj-version&gt;1.6.10&lt;/org.aspectj-version&gt;\r\n    \t\t&lt;org.slf4j-version&gt;1.6.6&lt;/org.slf4j-version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- Spring --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Spring Social --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-social-core&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;${org.springframework.social-version}&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-social-web&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;${org.springframework.social-version}&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-social-google&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;${org.springframework.social.google-version}&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework.security-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- AspectJ --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.aspectj-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- Logging --&gt;\r\n    \r\n    \t\t&lt;!-- @Inject --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- Servlet --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- Jade --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;de.neuland-bfi&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-jade4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- Test --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.7&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.9&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;additionalProjectnatures&gt;\r\n    \t\t\t\t\t\t&lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\r\n    \t\t\t\t\t&lt;/additionalProjectnatures&gt;\r\n    \t\t\t\t\t&lt;additionalBuildcommands&gt;\r\n    \t\t\t\t\t\t&lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\r\n    \t\t\t\t\t&lt;/additionalBuildcommands&gt;\r\n    \t\t\t\t\t&lt;downloadSources&gt;true&lt;/downloadSources&gt;\r\n    \t\t\t\t\t&lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.6&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.6&lt;/target&gt;\r\n    \t\t\t\t\t&lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\r\n    \t\t\t\t\t&lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n    \t\t\t\t\t&lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;1.2.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nThe application is not starting. All the spring framework dependencies are on same version but still getting the same error.\r\n\r\n**Update**\r\n\r\nResult of mvn dependency:tree \r\n\r\n\r\n    [INFO] com.accolite:ezhire:war:1.0.0-BUILD-SNAPSHOT\r\n    [INFO] +- org.springframework:spring-context:jar:4.2.1.RELEASE:compile\r\n    [INFO] |  +- org.springframework:spring-aop:jar:4.2.1.RELEASE:compile\r\n    [INFO] |  |  \\- aopalliance:aopalliance:jar:1.0:compile\r\n    [INFO] |  +- org.springframework:spring-beans:jar:4.2.1.RELEASE:compile\r\n    [INFO] |  \\- org.springframework:spring-expression:jar:4.2.1.RELEASE:compile\r\n    [INFO] +- org.springframework:spring-webmvc:jar:4.2.1.RELEASE:compile\r\n    [INFO] +- org.springframework.social:spring-social-core:jar:1.1.0.RELEASE:compil\r\n    e\r\n    [INFO] +- org.springframework.social:spring-social-web:jar:1.1.0.RELEASE:compile\r\n    \r\n    [INFO] +- org.springframework.social:spring-social-google:jar:1.0.0.RELEASE:comp\r\n    ile\r\n    [INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.3.3:compile\r\n    [INFO] |  +- org.springframework.social:spring-social-config:jar:1.1.0.RELEASE:c\r\n    ompile\r\n    [INFO] |  +- com.fasterxml.jackson.core:jackson-core:jar:2.3.3:compile\r\n    [INFO] |  \\- com.fasterxml.jackson.core:jackson-databind:jar:2.3.3:compile\r\n    [INFO] +- org.springframework.security:spring-security-crypto:jar:4.0.2.RELEASE:\r\n    compile\r\n    [INFO] +- org.aspectj:aspectjrt:jar:1.6.10:compile\r\n    [INFO] +- javax.inject:javax.inject:jar:1:compile\r\n    [INFO] +- javax.servlet:servlet-api:jar:2.5:provided\r\n    [INFO] +- javax.servlet.jsp:jsp-api:jar:2.1:provided\r\n    [INFO] +- javax.servlet:jstl:jar:1.2:compile\r\n    [INFO] +- de.neuland-bfi:spring-jade4j:jar:0.4.0:compile\r\n    [INFO] |  +- de.neuland-bfi:jade4j:jar:0.4.0:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-jexl:jar:2.1.1:compile\r\n    [INFO] |  |  +- commons-collections:commons-collections:jar:3.2.1:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-lang3:jar:3.1:compile\r\n    [INFO] |  |  +- com.googlecode.concurrentlinkedhashmap:concurrentlinkedhashmap-l\r\n    ru:jar:1.3.1:compile\r\n    [INFO] |  |  \\- org.pegdown:pegdown:jar:1.1.0:compile\r\n    [INFO] |  |     +- org.parboiled:parboiled-core:jar:1.0.2:compile\r\n    [INFO] |  |     \\- org.parboiled:parboiled-java:jar:1.0.2:compile\r\n    [INFO] |  |        +- asm:asm:jar:3.3.1:compile\r\n    [INFO] |  |        +- asm:asm-util:jar:3.3.1:compile\r\n    [INFO] |  |        +- asm:asm-tree:jar:3.3.1:compile\r\n    [INFO] |  |        \\- asm:asm-analysis:jar:3.3.1:compile\r\n    [INFO] |  +- commons-io:commons-io:jar:2.1:compile\r\n    [INFO] |  \\- org.slf4j:slf4j-api:jar:1.6.0:compile\r\n    [INFO] +- junit:junit:jar:4.7:test\r\n    [INFO] +- org.springframework:spring-jdbc:jar:4.2.1.RELEASE:compile\r\n    [INFO] |  \\- org.springframework:spring-tx:jar:4.2.1.RELEASE:compile\r\n    [INFO] +- org.apache.commons:commons-dbcp2:jar:2.1.1:compile\r\n    [INFO] |  +- org.apache.commons:commons-pool2:jar:2.4.2:compile\r\n    [INFO] |  \\- commons-logging:commons-logging:jar:1.2:compile\r\n    [INFO] +- org.apache.logging.log4j:log4j-api:jar:2.4:compile\r\n    [INFO] +- org.apache.logging.log4j:log4j-core:jar:2.4:compile\r\n    [INFO] +- org.springframework:spring-core:jar:4.2.1.RELEASE:compile\r\n    [INFO] \\- org.springframework:spring-web:jar:4.2.1.RELEASE:compile\r\n\r\nLooks like its all good here.\r\n","title":"Caused by: java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;","body":"<blockquote>\n  <p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;</p>\n  \n  <p>Caused by: java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.path()[Ljava/lang/String;</p>\n</blockquote>\n\n<p>Been stuck with this error for hours.</p>\n\n<p>my pom.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.social&lt;/groupId&gt;\n    &lt;artifactId&gt;sample-social&lt;/artifactId&gt;\n    &lt;name&gt;ezhire&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;java-version&gt;1.8&lt;/java-version&gt;\n        &lt;org.springframework-version&gt;4.2.1.RELEASE&lt;/org.springframework-version&gt;\n        &lt;org.springframework.social-version&gt;1.1.0.RELEASE&lt;/org.springframework.social-version&gt;\n        &lt;org.springframework.social.google-version&gt;1.0.0.RELEASE&lt;/org.springframework.social.google-version&gt;\n        &lt;org.springframework.security-version&gt;4.0.2.RELEASE&lt;/org.springframework.security-version&gt;\n        &lt;org.aspectj-version&gt;1.6.10&lt;/org.aspectj-version&gt;\n        &lt;org.slf4j-version&gt;1.6.6&lt;/org.slf4j-version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Spring Social --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-social-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.social-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-social-web&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.social-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-social-google&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.social.google-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.security-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- AspectJ --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;${org.aspectj-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Logging --&gt;\n\n        &lt;!-- @Inject --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n            &lt;version&gt;1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Jade --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.neuland-bfi&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jade4j&lt;/artifactId&gt;\n            &lt;version&gt;0.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.7&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.9&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;additionalProjectnatures&gt;\n                        &lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\n                    &lt;/additionalProjectnatures&gt;\n                    &lt;additionalBuildcommands&gt;\n                        &lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\n                    &lt;/additionalBuildcommands&gt;\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                    &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                    &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.2.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>The application is not starting. All the spring framework dependencies are on same version but still getting the same error.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Result of mvn dependency:tree </p>\n\n<pre><code>[INFO] com.accolite:ezhire:war:1.0.0-BUILD-SNAPSHOT\n[INFO] +- org.springframework:spring-context:jar:4.2.1.RELEASE:compile\n[INFO] |  +- org.springframework:spring-aop:jar:4.2.1.RELEASE:compile\n[INFO] |  |  \\- aopalliance:aopalliance:jar:1.0:compile\n[INFO] |  +- org.springframework:spring-beans:jar:4.2.1.RELEASE:compile\n[INFO] |  \\- org.springframework:spring-expression:jar:4.2.1.RELEASE:compile\n[INFO] +- org.springframework:spring-webmvc:jar:4.2.1.RELEASE:compile\n[INFO] +- org.springframework.social:spring-social-core:jar:1.1.0.RELEASE:compil\ne\n[INFO] +- org.springframework.social:spring-social-web:jar:1.1.0.RELEASE:compile\n\n[INFO] +- org.springframework.social:spring-social-google:jar:1.0.0.RELEASE:comp\nile\n[INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.3.3:compile\n[INFO] |  +- org.springframework.social:spring-social-config:jar:1.1.0.RELEASE:c\nompile\n[INFO] |  +- com.fasterxml.jackson.core:jackson-core:jar:2.3.3:compile\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-databind:jar:2.3.3:compile\n[INFO] +- org.springframework.security:spring-security-crypto:jar:4.0.2.RELEASE:\ncompile\n[INFO] +- org.aspectj:aspectjrt:jar:1.6.10:compile\n[INFO] +- javax.inject:javax.inject:jar:1:compile\n[INFO] +- javax.servlet:servlet-api:jar:2.5:provided\n[INFO] +- javax.servlet.jsp:jsp-api:jar:2.1:provided\n[INFO] +- javax.servlet:jstl:jar:1.2:compile\n[INFO] +- de.neuland-bfi:spring-jade4j:jar:0.4.0:compile\n[INFO] |  +- de.neuland-bfi:jade4j:jar:0.4.0:compile\n[INFO] |  |  +- org.apache.commons:commons-jexl:jar:2.1.1:compile\n[INFO] |  |  +- commons-collections:commons-collections:jar:3.2.1:compile\n[INFO] |  |  +- org.apache.commons:commons-lang3:jar:3.1:compile\n[INFO] |  |  +- com.googlecode.concurrentlinkedhashmap:concurrentlinkedhashmap-l\nru:jar:1.3.1:compile\n[INFO] |  |  \\- org.pegdown:pegdown:jar:1.1.0:compile\n[INFO] |  |     +- org.parboiled:parboiled-core:jar:1.0.2:compile\n[INFO] |  |     \\- org.parboiled:parboiled-java:jar:1.0.2:compile\n[INFO] |  |        +- asm:asm:jar:3.3.1:compile\n[INFO] |  |        +- asm:asm-util:jar:3.3.1:compile\n[INFO] |  |        +- asm:asm-tree:jar:3.3.1:compile\n[INFO] |  |        \\- asm:asm-analysis:jar:3.3.1:compile\n[INFO] |  +- commons-io:commons-io:jar:2.1:compile\n[INFO] |  \\- org.slf4j:slf4j-api:jar:1.6.0:compile\n[INFO] +- junit:junit:jar:4.7:test\n[INFO] +- org.springframework:spring-jdbc:jar:4.2.1.RELEASE:compile\n[INFO] |  \\- org.springframework:spring-tx:jar:4.2.1.RELEASE:compile\n[INFO] +- org.apache.commons:commons-dbcp2:jar:2.1.1:compile\n[INFO] |  +- org.apache.commons:commons-pool2:jar:2.4.2:compile\n[INFO] |  \\- commons-logging:commons-logging:jar:1.2:compile\n[INFO] +- org.apache.logging.log4j:log4j-api:jar:2.4:compile\n[INFO] +- org.apache.logging.log4j:log4j-core:jar:2.4:compile\n[INFO] +- org.springframework:spring-core:jar:4.2.1.RELEASE:compile\n[INFO] \\- org.springframework:spring-web:jar:4.2.1.RELEASE:compile\n</code></pre>\n\n<p>Looks like its all good here.</p>\n"},{"tags":["java","testng","testng-annotation-test"],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694363473,"creation_date":1694362363,"answer_id":77076929,"question_id":77076901,"body_markdown":"I do not know how to do this for TestNG, but with JUnit, I would abuse a value source and implement an `ArgumentProvider`.\r\n\r\n```Java\r\npublic class LargeZSTAsBytesArgumentsProvider implements ArgumentsProvider \r\n{\r\n  @Override\r\n  public final Stream&lt;? extends Arguments&gt; provideArguments( ExtensionContext context ) \r\n  {\r\n    final var path = Paths.get( &quot;.&quot;, &quot;test&quot;, &quot;resources&quot;, &quot;large.zst&quot; );\r\n    final var bytes = Files.readAllBytes( path );\r\n\r\n    final var retValue = Stream.of( Arguments.of( bytes ) );\r\n    return retValue;\r\n  }\r\n}\r\n```\r\n\r\nBasically, you get the file as an instance of `java.nio.Path`, then you call [`Files::readAllBytes`][1] with that `Path` instance and wraps the resulting byte array.\r\n\r\n`foo()` will then look like this:\r\n\r\n```Java\r\n@ParameterizedTest\r\n@ArgumentsSource( LargeZSTAsBytesArgumentsProvider.class )\r\nvoid foo( final byte [] input ) \r\n{\r\n  // do something with the byte array …\r\n}\r\n```\r\nObviously, the error handling is missing! \r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readAllBytes(java.nio.file.Path)","title":"How to pass resource bytes as parameters","body":"<p>I do not know how to do this for TestNG, but with JUnit, I would abuse a value source and implement an <code>ArgumentProvider</code>.</p>\n<pre><code>public class LargeZSTAsBytesArgumentsProvider implements ArgumentsProvider \n{\n  @Override\n  public final Stream&lt;? extends Arguments&gt; provideArguments( ExtensionContext context ) \n  {\n    final var path = Paths.get( &quot;.&quot;, &quot;test&quot;, &quot;resources&quot;, &quot;large.zst&quot; );\n    final var bytes = Files.readAllBytes( path );\n\n    final var retValue = Stream.of( Arguments.of( bytes ) );\n    return retValue;\n  }\n}\n</code></pre>\n<p>Basically, you get the file as an instance of <code>java.nio.Path</code>, then you call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readAllBytes(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>Files::readAllBytes</code></a> with that <code>Path</code> instance and wraps the resulting byte array.</p>\n<p><code>foo()</code> will then look like this:</p>\n<pre><code>@ParameterizedTest\n@ArgumentsSource( LargeZSTAsBytesArgumentsProvider.class )\nvoid foo( final byte [] input ) \n{\n  // do something with the byte array …\n}\n</code></pre>\n<p>Obviously, the error handling is missing!</p>\n"},{"tags":[],"owner":{"account_id":1380512,"reputation":110,"user_id":7388422,"display_name":"Shant Khayalian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694368345,"creation_date":1694368345,"answer_id":77077302,"question_id":77076901,"body_markdown":"To pass the bytes of a file (e.g., &quot;large.zst&quot; located in test/resources) as a parameter to a test method using annotations in JUnit 5, you can use the @ParameterizedTest annotation along with @MethodSource. Here&#39;s an example of how to do this:\r\n\r\nFirst, create a method that provides the test data. In this case, it will read the file and return its contents as a byte array.\r\n\r\nAnnotate this method with @MethodSource to specify it as the source of test data.\r\n\r\nIn your test method, accept the byte array as a parameter.\r\n\r\nHere&#39;s an example:\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.params.ParameterizedTest;\r\n    import org.junit.jupiter.params.provider.MethodSource;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    \r\n    public class MyTest {\r\n    \r\n        @ParameterizedTest\r\n        @MethodSource(&quot;provideFileContents&quot;)\r\n        void testFoo(byte[] fileContent) {\r\n            // Now you can use the fileContent byte array in your test method\r\n            // ... your test logic here ...\r\n        }\r\n    \r\n        // This method reads the file and provides its content as a byte array\r\n        static byte[][] provideFileContents() throws IOException {\r\n            Path filePath = Path.of(&quot;src/test/resources/large.zst&quot;);\r\n            byte[] fileContent = Files.readAllBytes(filePath);\r\n            return new byte[][] { fileContent };\r\n        }\r\n    }\r\n\r\n\r\nThe provideFileContents method reads the content of the &quot;large.zst&quot; file and returns it as a two-dimensional byte array.\r\n\r\nThe @ParameterizedTest annotation is used on the test method, and @MethodSource(&quot;provideFileContents&quot;) specifies that the test data will come from the provideFileContents method.\r\n\r\nInside the testFoo method, you can use the fileContent byte array for testing your logic.\r\n\r\nThis approach allows you to pass resource bytes as parameters to your test method using annotations in JUnit 5.\r\n\r\nAlso I am not sure if this is what you are looking for.","title":"How to pass resource bytes as parameters","body":"<p>To pass the bytes of a file (e.g., &quot;large.zst&quot; located in test/resources) as a parameter to a test method using annotations in JUnit 5, you can use the @ParameterizedTest annotation along with @MethodSource. Here's an example of how to do this:</p>\n<p>First, create a method that provides the test data. In this case, it will read the file and return its contents as a byte array.</p>\n<p>Annotate this method with @MethodSource to specify it as the source of test data.</p>\n<p>In your test method, accept the byte array as a parameter.</p>\n<p>Here's an example:</p>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\n\npublic class MyTest {\n\n    @ParameterizedTest\n    @MethodSource(&quot;provideFileContents&quot;)\n    void testFoo(byte[] fileContent) {\n        // Now you can use the fileContent byte array in your test method\n        // ... your test logic here ...\n    }\n\n    // This method reads the file and provides its content as a byte array\n    static byte[][] provideFileContents() throws IOException {\n        Path filePath = Path.of(&quot;src/test/resources/large.zst&quot;);\n        byte[] fileContent = Files.readAllBytes(filePath);\n        return new byte[][] { fileContent };\n    }\n}\n</code></pre>\n<p>The provideFileContents method reads the content of the &quot;large.zst&quot; file and returns it as a two-dimensional byte array.</p>\n<p>The @ParameterizedTest annotation is used on the test method, and @MethodSource(&quot;provideFileContents&quot;) specifies that the test data will come from the provideFileContents method.</p>\n<p>Inside the testFoo method, you can use the fileContent byte array for testing your logic.</p>\n<p>This approach allows you to pass resource bytes as parameters to your test method using annotations in JUnit 5.</p>\n<p>Also I am not sure if this is what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":743251,"reputation":13440,"user_id":725937,"accept_rate":51,"display_name":"abergmeier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694373291,"creation_date":1694371871,"answer_id":77077481,"question_id":77076901,"body_markdown":"Adapting the answer from @tquadrat to _testng_ would look like this IMO:\r\n\r\n```java\r\n    @DataProvider(name = &quot;largeCompressed&quot;)\r\n    private Object[] createLargeCompressed() {\r\n        // Had no luck using `new Path`.\r\n        URL url = this.getClass().getResource(&quot;/large.zst&quot;);\r\n        Path path;\r\n\t\ttry {\r\n\t\t\tpath = Path.of(url.toURI());\r\n\t\t} catch (URISyntaxException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n        try {\r\n            return new Object[]{Files.readAllBytes(path)};\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Test(dataProvider = &quot;largeCompressed&quot;)\r\n    public void foo(byte[] largeCompressed) {\r\n        // do something with the byte array …\r\n    }\r\n```","title":"How to pass resource bytes as parameters","body":"<p>Adapting the answer from @tquadrat to <em>testng</em> would look like this IMO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @DataProvider(name = &quot;largeCompressed&quot;)\n    private Object[] createLargeCompressed() {\n        // Had no luck using `new Path`.\n        URL url = this.getClass().getResource(&quot;/large.zst&quot;);\n        Path path;\n        try {\n            path = Path.of(url.toURI());\n        } catch (URISyntaxException e) {\n            throw new RuntimeException(e);\n        }\n        try {\n            return new Object[]{Files.readAllBytes(path)};\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Test(dataProvider = &quot;largeCompressed&quot;)\n    public void foo(byte[] largeCompressed) {\n        // do something with the byte array …\n    }\n</code></pre>\n"}],"owner":{"account_id":743251,"reputation":13440,"user_id":725937,"accept_rate":51,"display_name":"abergmeier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77077481,"answer_count":3,"score":0,"last_activity_date":1694373291,"creation_date":1694361838,"question_id":77076901,"body_markdown":"I have a Test method `foo`. I have test input `large.zst` in `test/resources`.\r\nNow I would like to pass the bytes of `large.zst` as `byte[]` into `foo`.\r\n\r\nIs there any way of passing the file content as a byte array via Annotations?","title":"How to pass resource bytes as parameters","body":"<p>I have a Test method <code>foo</code>. I have test input <code>large.zst</code> in <code>test/resources</code>.\nNow I would like to pass the bytes of <code>large.zst</code> as <code>byte[]</code> into <code>foo</code>.</p>\n<p>Is there any way of passing the file content as a byte array via Annotations?</p>\n"},{"tags":["java","json","spring-boot","rest","resttemplate"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1694375061,"post_id":77077552,"comment_id":135879489,"body_markdown":"Have you tried modelling `Events Previous` and `Name` as well?","body":"Have you tried modelling <code>Events Previous</code> and <code>Name</code> as well?"},{"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"score":0,"creation_date":1694375145,"post_id":77077552,"comment_id":135879494,"body_markdown":"Yes I have. But that does not work either. Strange thing is I tried to exchange with ```restTemplate.getForEntity(url, Object.class)``` as well, which threw the same error. Only ```restTemplate.getForEntity(url, String.class)``` seems to be working","body":"Yes I have. But that does not work either. Strange thing is I tried to exchange with <code>restTemplate.getForEntity(url, Object.class)</code> as well, which threw the same error. Only <code>restTemplate.getForEntity(url, String.class)</code> seems to be working"}],"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694373164,"creation_date":1694373164,"question_id":77077552,"body_markdown":"I am trying to map a json response similar to this to a POJO on a rest template exchange:\r\n\r\n```\r\n{\r\n    &quot;Is Active&quot;: false,\r\n    &quot;Details&quot;: {\r\n        &quot;Base Data&quot;: {\r\n            &quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;: 2911\r\n        },\r\n        &quot;Events Previous&quot;: {\r\n        },\r\n\t\t&quot;Name&quot;: &quot;Value&quot; \r\n        &quot;Cumulative Data&quot;: {\r\n            &quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;: 1000\r\n        }\r\n    }\r\n}\r\n```\r\nHere are my POJOs that I have defined. \r\n\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class ApiResponse implements Serializable {\r\n    @JsonProperty(&quot;Details&quot;)\r\n    private Details details;\r\n\r\n    @JsonProperty(&quot;Is Active&quot;)\r\n    private boolean isActive;\r\n    \r\n    //Getters and Setters\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class Details implements Serializable {\r\n    @JsonProperty(&quot;Base Data&quot;)\r\n    private Data gauge;\r\n\r\n    @JsonProperty(&quot;Cumulative Data&quot;)\r\n    private Data cumulativeData;\r\n\r\n    //Getters and setters\r\n}\r\n\r\n```\r\n\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class Data implements Serializable {\r\n    @JsonProperty(&quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;)\r\n    private int data;\r\n\r\n    //Getters and setters\r\n}\r\n```\r\nI have ignored all the properties that I do not need for my purposes. When I make the rest call, I receive an exception, attached below\r\n\r\n```\r\nResponseEntity&lt;ApiResponse&gt; apiResponse= restTemplate.getForEntity(url, ApiResponse.class);\r\n```\r\n\r\n```\r\n406 Not Acceptable: [{&quot;message&quot;:&quot;Could not find acceptable representation&quot;,&quot;timestamp&quot;:1694372115059,&quot;type&quot;:&quot;org.springframework.web.HttpMediaTypeNotAcceptableException&quot;,&quot;details&quot;:{},&quot;validationMessages&quot;:[]}]\r\n```\r\n\r\nHow can I resolve this error? Thanks!","title":"Why am I getting &quot;Could not find acceptable representation&quot; error on this API call?","body":"<p>I am trying to map a json response similar to this to a POJO on a rest template exchange:</p>\n<pre><code>{\n    &quot;Is Active&quot;: false,\n    &quot;Details&quot;: {\n        &quot;Base Data&quot;: {\n            &quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;: 2911\n        },\n        &quot;Events Previous&quot;: {\n        },\n        &quot;Name&quot;: &quot;Value&quot; \n        &quot;Cumulative Data&quot;: {\n            &quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;: 1000\n        }\n    }\n}\n</code></pre>\n<p>Here are my POJOs that I have defined.</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ApiResponse implements Serializable {\n    @JsonProperty(&quot;Details&quot;)\n    private Details details;\n\n    @JsonProperty(&quot;Is Active&quot;)\n    private boolean isActive;\n    \n    //Getters and Setters\n\n}\n\n</code></pre>\n<pre><code>\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Details implements Serializable {\n    @JsonProperty(&quot;Base Data&quot;)\n    private Data gauge;\n\n    @JsonProperty(&quot;Cumulative Data&quot;)\n    private Data cumulativeData;\n\n    //Getters and setters\n}\n\n</code></pre>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Data implements Serializable {\n    @JsonProperty(&quot;Document{{tags=Document{{application=myApp}}, dimensions=Document{{}}}}&quot;)\n    private int data;\n\n    //Getters and setters\n}\n</code></pre>\n<p>I have ignored all the properties that I do not need for my purposes. When I make the rest call, I receive an exception, attached below</p>\n<pre><code>ResponseEntity&lt;ApiResponse&gt; apiResponse= restTemplate.getForEntity(url, ApiResponse.class);\n</code></pre>\n<pre><code>406 Not Acceptable: [{&quot;message&quot;:&quot;Could not find acceptable representation&quot;,&quot;timestamp&quot;:1694372115059,&quot;type&quot;:&quot;org.springframework.web.HttpMediaTypeNotAcceptableException&quot;,&quot;details&quot;:{},&quot;validationMessages&quot;:[]}]\n</code></pre>\n<p>How can I resolve this error? Thanks!</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1369760441,"post_id":16797529,"comment_id":24208080,"body_markdown":"Presumably you don&#39;t have a `default` case?","body":"Presumably you don&#39;t have a <code>default</code> case?"},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":0,"creation_date":1369760768,"post_id":16797529,"comment_id":24208248,"body_markdown":"@OliCharlesworth How do you think I got the run time error? ;-)","body":"@OliCharlesworth How do you think I got the run time error? ;-)"},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1369760822,"post_id":16797529,"comment_id":24208277,"body_markdown":"Well, if you have a `default` case, then it&#39;s unlikely that any compile-time tool would warn you about &quot;missing&quot; cases (because they&#39;re not actually missing in that scenario ;) )","body":"Well, if you have a <code>default</code> case, then it&#39;s unlikely that any compile-time tool would warn you about &quot;missing&quot; cases (because they&#39;re not actually missing in that scenario ;) )"},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":0,"creation_date":1369762274,"post_id":16797529,"comment_id":24208970,"body_markdown":"@OliCharlesworth I want to get rid of the `default` because this kind of default is always a run time error. Because if it would be a valid state it should have been an enum value.","body":"@OliCharlesworth I want to get rid of the <code>default</code> because this kind of default is always a run time error. Because if it would be a valid state it should have been an enum value."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":4,"creation_date":1369768071,"post_id":16797529,"comment_id":24211811,"body_markdown":"Write a test that fails if one case is missing. Run the tests regularly.","body":"Write a test that fails if one case is missing. Run the tests regularly."},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1369899599,"post_id":16797529,"comment_id":24265966,"body_markdown":"Could you throw a RTE on the `default:` case and write a test which inputs all possible enum values?","body":"Could you throw a RTE on the <code>default:</code> case and write a test which inputs all possible enum values?"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1495181852,"post_id":16797529,"comment_id":75153972,"body_markdown":"I would not want this in all cases. Sometimes some values are left out on purpose, or handled in a default. So it is difficult to come up with a useful compile time check without some language extension where the programmer can indicate if a &quot;complete switch&quot; is desired or not.","body":"I would not want this in all cases. Sometimes some values are left out on purpose, or handled in a default. So it is difficult to come up with a useful compile time check without some language extension where the programmer can indicate if a &quot;complete switch&quot; is desired or not."},{"owner":{"account_id":57502,"reputation":8746,"user_id":172274,"accept_rate":78,"display_name":"still_dreaming_1"},"score":0,"creation_date":1592002853,"post_id":16797529,"comment_id":110278354,"body_markdown":"@assylias that&#39;s what compilers are for","body":"@assylias that&#39;s what compilers are for"},{"owner":{"account_id":57502,"reputation":8746,"user_id":172274,"accept_rate":78,"display_name":"still_dreaming_1"},"score":2,"creation_date":1592003083,"post_id":16797529,"comment_id":110278405,"body_markdown":"@vikingsteve that would require writing tests for something the compiler should catch. Even if someone wanted/tried to do this, what would catch when a test is missing? That is why they are asking this question, and why 7 years later people like me are searching for this kind of thing and finding this question.","body":"@vikingsteve that would require writing tests for something the compiler should catch. Even if someone wanted/tried to do this, what would catch when a test is missing? That is why they are asking this question, and why 7 years later people like me are searching for this kind of thing and finding this question."}],"answers":[{"tags":[],"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1369760578,"creation_date":1369760578,"answer_id":16797618,"question_id":16797529,"body_markdown":"I don&#39;t know about the standard Java compiler, but the Eclipse compiler can certainly be configured to warn about this.  Go to Window-&gt;Preferences-&gt;Java-&gt;Compiler-&gt;Errors/Warnings/Enum type constant not covered on switch.","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>I don't know about the standard Java compiler, but the Eclipse compiler can certainly be configured to warn about this.  Go to Window->Preferences->Java->Compiler->Errors/Warnings/Enum type constant not covered on switch.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1369762464,"creation_date":1369761384,"answer_id":16797860,"question_id":16797529,"body_markdown":"Probably a tool like FindBugs will mark such switches.\r\n\r\nThe hard answer would be to refactor:\r\n\r\n***Possibility 1: can go Object Oriented***\r\n\r\nIf feasible, depends on the code in the cases.\r\n\r\nInstead of\r\n\r\n    switch (language) {\r\n    case EO: ... break;\r\n    case IL: ... break;\r\n    }\r\n\r\ncreate an abstract method:, say `p`\r\n\r\n    language.p();\r\n\r\nor\r\n\r\n    switch (p.category()) {\r\n    case 1: // Less cases.\r\n    ...\r\n    }\r\n\r\n***Possibility 2: higher level***\r\n\r\nWhen having many switches, in an enum like DocumentType, WORD, EXCEL, PDF, ... .\r\nThen create a WordDoc, ExcelDoc, PdfDoc extending a base class Doc. And again one can work object oriented.","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>Probably a tool like FindBugs will mark such switches.</p>\n\n<p>The hard answer would be to refactor:</p>\n\n<p><em><strong>Possibility 1: can go Object Oriented</em></strong></p>\n\n<p>If feasible, depends on the code in the cases.</p>\n\n<p>Instead of</p>\n\n<pre><code>switch (language) {\ncase EO: ... break;\ncase IL: ... break;\n}\n</code></pre>\n\n<p>create an abstract method:, say <code>p</code></p>\n\n<pre><code>language.p();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>switch (p.category()) {\ncase 1: // Less cases.\n...\n}\n</code></pre>\n\n<p><em><strong>Possibility 2: higher level</em></strong></p>\n\n<p>When having many switches, in an enum like DocumentType, WORD, EXCEL, PDF, ... .\nThen create a WordDoc, ExcelDoc, PdfDoc extending a base class Doc. And again one can work object oriented.</p>\n"},{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1613520260,"creation_date":1369763813,"answer_id":16798500,"question_id":16797529,"body_markdown":"In *Effective Java*, Joshua Bloch recommends creating an abstract method which would be implemented for each constant. For example: \r\n\r\n    enum Color {\r\n        RED   { public String getName() {return &quot;Red&quot;;} },\r\n        GREEN { public String getName() {return &quot;Green&quot;;} },\r\n        BLUE  { public String getName() {return &quot;Blue&quot;;} };\r\n        public abstract String getName();\r\n    }\r\n\r\nThis would function as a safer switch, forcing you to implement the method if you add a new constant.\r\n\r\nEDIT: To clear up some confusion, here&#39;s the equivalent using a regular `switch`:\r\n\r\n    enum Color {\r\n        RED, GREEN, BLUE;\r\n        public String getName() {\r\n            switch(this) {\r\n                case RED:   return &quot;Red&quot;;\r\n                case GREEN: return &quot;Green&quot;;\r\n                case BLUE:  return &quot;Blue&quot;;\r\n                default: return null;\r\n            }\r\n        }\r\n    }","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>In <em>Effective Java</em>, Joshua Bloch recommends creating an abstract method which would be implemented for each constant. For example:</p>\n<pre><code>enum Color {\n    RED   { public String getName() {return &quot;Red&quot;;} },\n    GREEN { public String getName() {return &quot;Green&quot;;} },\n    BLUE  { public String getName() {return &quot;Blue&quot;;} };\n    public abstract String getName();\n}\n</code></pre>\n<p>This would function as a safer switch, forcing you to implement the method if you add a new constant.</p>\n<p>EDIT: To clear up some confusion, here's the equivalent using a regular <code>switch</code>:</p>\n<pre><code>enum Color {\n    RED, GREEN, BLUE;\n    public String getName() {\n        switch(this) {\n            case RED:   return &quot;Red&quot;;\n            case GREEN: return &quot;Green&quot;;\n            case BLUE:  return &quot;Blue&quot;;\n            default: return null;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1848338,"reputation":1157,"user_id":1675502,"accept_rate":42,"display_name":"V&#237;ctor Herraiz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1369853728,"creation_date":1369765389,"answer_id":16798861,"question_id":16797529,"body_markdown":"In my opinion and if the code that your are going to execute is outside of the domain of your enum,  a way to do that is to build a unit test case that loops through your items in the enumeration and execute the piece of code that contains the switch.If something goes wrong or not as expected you can check the return value or the state of the object with an assertion.\r\n\r\nYou could execute the tests as part of some building process and you will see any anomalies at this point. \r\n\r\nAnyway, unit testing is almost mandatory and beneficial in many projects.\r\n\r\nIf the code inside the switch belongs in the enum, include it within as proposed in other answers.\r\n\r\n\r\n\r\n\r\n ","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>In my opinion and if the code that your are going to execute is outside of the domain of your enum,  a way to do that is to build a unit test case that loops through your items in the enumeration and execute the piece of code that contains the switch.If something goes wrong or not as expected you can check the return value or the state of the object with an assertion.</p>\n\n<p>You could execute the tests as part of some building process and you will see any anomalies at this point. </p>\n\n<p>Anyway, unit testing is almost mandatory and beneficial in many projects.</p>\n\n<p>If the code inside the switch belongs in the enum, include it within as proposed in other answers.</p>\n"},{"tags":[],"owner":{"account_id":69219,"reputation":5340,"user_id":201557,"display_name":"Thierry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1481642402,"creation_date":1443790079,"answer_id":32907539,"question_id":16797529,"body_markdown":"You could also use an adaptation of the Visitor pattern to enums, which avoid putting all kind of unrelated state in the enum class.\r\n\r\nThe compile time failure will happen if the one modifying the enum is careful enough, but it is not garanteed.\r\n\r\nYou&#39;ll still have a failure earlier than the RTE in a default statement : it will fail when one of the visitor class is loaded, which you can make happen at application startup.\r\n\r\nHere is some code :\r\n\r\nYou start from an enum that look like that :\r\n\r\n    public enum Status {\r\n        PENDING, PROGRESSING, DONE\r\n    }\r\n\r\nHere is how you transform it to use the visitor pattern :\r\n\r\n    public enum Status {\r\n    \tPENDING,\r\n    \tPROGRESSING,\r\n    \tDONE;\r\n    \t\r\n    \tpublic static abstract class StatusVisitor&lt;R&gt; extends EnumVisitor&lt;Status, R&gt; {\r\n    \t    public abstract R visitPENDING();\r\n    \t    public abstract R visitPROGRESSING();\r\n    \t    public abstract R visitDONE();\r\n    \t}\r\n    }\r\n\r\nWhen you add a new constant to the enum, if you don&#39;t forget to add the method visitXXX to the abstract StatusVisitor class, you&#39;ll have directly the compilation error you expect everywhere you used a visitor (which should replace every switch you did on the enum) :\r\n\r\n    switch(anObject.getStatus()) {\r\n    case PENDING :\r\n        [code1]\r\n        break;\r\n    case PROGRESSING :\r\n        [code2]\r\n        break;\r\n    case DONE :\r\n        [code3]\r\n        break;\r\n    }\r\n\r\nshould become :\r\n\r\n    StatusVisitor&lt;String&gt; v = new StatusVisitor&lt;String&gt;() {\r\n        @Override\r\n        public String visitPENDING() {\r\n            [code1]\r\n            return null;\r\n        }\r\n        @Override\r\n        public String visitPROGRESSING() {\r\n            [code2]\r\n            return null;\r\n        }\r\n        @Override\r\n        public String visitDONE() {\r\n            [code3]\r\n            return null;\r\n        }\r\n    };\r\n    v.visit(anObject.getStatus());\r\n\r\nAnd now the ugly part, the EnumVisitor class. It is the top class of the Visitor hierarchy, implementing the visit method and making the code fail at startup (of test or application) if you forgot to update the absract visitor :\r\n\r\n    public abstract class EnumVisitor&lt;E extends Enum&lt;E&gt;, R&gt; {\r\n    \r\n    \tpublic EnumVisitor() {\r\n    \t    Class&lt;?&gt; currentClass = getClass();\r\n    \t    while(currentClass != null &amp;&amp; !currentClass.getSuperclass().getName().equals(&quot;xxx.xxx.EnumVisitor&quot;)) {\r\n    \t        currentClass = currentClass.getSuperclass();\r\n    \t    }\r\n    \t    \r\n    \t\tClass&lt;E&gt; e = (Class&lt;E&gt;) ((ParameterizedType) currentClass.getGenericSuperclass()).getActualTypeArguments()[0];\r\n    \t\tEnum[] enumConstants = e.getEnumConstants();\r\n    \t\tif (enumConstants == null) {\r\n    \t\t    throw new RuntimeException(&quot;Seems like &quot; + e.getName() + &quot; is not an enum.&quot;);\r\n    \t\t}\r\n    \t\tClass&lt;? extends EnumVisitor&gt; actualClass = this.getClass();\r\n    \t\tSet&lt;String&gt; missingMethods = new HashSet&lt;&gt;();\r\n    \t\tfor(Enum c : enumConstants) {\r\n    \t\t\ttry {\r\n    \t\t\t\tactualClass.getMethod(&quot;visit&quot; + c.name(), null);\r\n    \t\t\t} catch (NoSuchMethodException e2) {\r\n    \t\t\t    missingMethods.add(&quot;visit&quot; + c.name());\r\n    \t\t\t} catch (Exception e1) {\r\n    \t\t\t\tthrow new RuntimeException(e1);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif (!missingMethods.isEmpty()) {\r\n    \t\t    throw new RuntimeException(currentClass.getName() + &quot; visitor is missing the following methods : &quot; + String.join(&quot;,&quot;, missingMethods));\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic final R visit(E value) {\r\n    \t\tClass&lt;? extends EnumVisitor&gt; actualClass = this.getClass();\r\n    \t\ttry {\r\n    \t\t\tMethod method = actualClass.getMethod(&quot;visit&quot; + value.name());\r\n    \t\t\treturn (R) method.invoke(this);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new RuntimeException(e);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThere are several ways you could implement / improve this glue code. I choose to walk up the class hierarchy, stop when the superclass is the EnumVisitor, and read the parameterized type from there. You could also do it with a constructor param being the enum class.\r\n\r\nYou could use a smarter naming strategy to have less ugly names, and so on...\r\n\r\nThe drawback is that it is a bit more verbose.\r\nThe benefits are\r\n\r\n - compile time error [in most cases anyway]\r\n - works even if you don&#39;t own the enum code\r\n - no dead code (the default statement of switch on all enum values)\r\n - sonar/pmd/... not complaining that you have a switch statement without default statement","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>You could also use an adaptation of the Visitor pattern to enums, which avoid putting all kind of unrelated state in the enum class.</p>\n\n<p>The compile time failure will happen if the one modifying the enum is careful enough, but it is not garanteed.</p>\n\n<p>You'll still have a failure earlier than the RTE in a default statement : it will fail when one of the visitor class is loaded, which you can make happen at application startup.</p>\n\n<p>Here is some code :</p>\n\n<p>You start from an enum that look like that :</p>\n\n<pre><code>public enum Status {\n    PENDING, PROGRESSING, DONE\n}\n</code></pre>\n\n<p>Here is how you transform it to use the visitor pattern :</p>\n\n<pre><code>public enum Status {\n    PENDING,\n    PROGRESSING,\n    DONE;\n\n    public static abstract class StatusVisitor&lt;R&gt; extends EnumVisitor&lt;Status, R&gt; {\n        public abstract R visitPENDING();\n        public abstract R visitPROGRESSING();\n        public abstract R visitDONE();\n    }\n}\n</code></pre>\n\n<p>When you add a new constant to the enum, if you don't forget to add the method visitXXX to the abstract StatusVisitor class, you'll have directly the compilation error you expect everywhere you used a visitor (which should replace every switch you did on the enum) :</p>\n\n<pre><code>switch(anObject.getStatus()) {\ncase PENDING :\n    [code1]\n    break;\ncase PROGRESSING :\n    [code2]\n    break;\ncase DONE :\n    [code3]\n    break;\n}\n</code></pre>\n\n<p>should become :</p>\n\n<pre><code>StatusVisitor&lt;String&gt; v = new StatusVisitor&lt;String&gt;() {\n    @Override\n    public String visitPENDING() {\n        [code1]\n        return null;\n    }\n    @Override\n    public String visitPROGRESSING() {\n        [code2]\n        return null;\n    }\n    @Override\n    public String visitDONE() {\n        [code3]\n        return null;\n    }\n};\nv.visit(anObject.getStatus());\n</code></pre>\n\n<p>And now the ugly part, the EnumVisitor class. It is the top class of the Visitor hierarchy, implementing the visit method and making the code fail at startup (of test or application) if you forgot to update the absract visitor :</p>\n\n<pre><code>public abstract class EnumVisitor&lt;E extends Enum&lt;E&gt;, R&gt; {\n\n    public EnumVisitor() {\n        Class&lt;?&gt; currentClass = getClass();\n        while(currentClass != null &amp;&amp; !currentClass.getSuperclass().getName().equals(\"xxx.xxx.EnumVisitor\")) {\n            currentClass = currentClass.getSuperclass();\n        }\n\n        Class&lt;E&gt; e = (Class&lt;E&gt;) ((ParameterizedType) currentClass.getGenericSuperclass()).getActualTypeArguments()[0];\n        Enum[] enumConstants = e.getEnumConstants();\n        if (enumConstants == null) {\n            throw new RuntimeException(\"Seems like \" + e.getName() + \" is not an enum.\");\n        }\n        Class&lt;? extends EnumVisitor&gt; actualClass = this.getClass();\n        Set&lt;String&gt; missingMethods = new HashSet&lt;&gt;();\n        for(Enum c : enumConstants) {\n            try {\n                actualClass.getMethod(\"visit\" + c.name(), null);\n            } catch (NoSuchMethodException e2) {\n                missingMethods.add(\"visit\" + c.name());\n            } catch (Exception e1) {\n                throw new RuntimeException(e1);\n            }\n        }\n        if (!missingMethods.isEmpty()) {\n            throw new RuntimeException(currentClass.getName() + \" visitor is missing the following methods : \" + String.join(\",\", missingMethods));\n        }\n    }\n\n    public final R visit(E value) {\n        Class&lt;? extends EnumVisitor&gt; actualClass = this.getClass();\n        try {\n            Method method = actualClass.getMethod(\"visit\" + value.name());\n            return (R) method.invoke(this);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>There are several ways you could implement / improve this glue code. I choose to walk up the class hierarchy, stop when the superclass is the EnumVisitor, and read the parameterized type from there. You could also do it with a constructor param being the enum class.</p>\n\n<p>You could use a smarter naming strategy to have less ugly names, and so on...</p>\n\n<p>The drawback is that it is a bit more verbose.\nThe benefits are</p>\n\n<ul>\n<li>compile time error [in most cases anyway]</li>\n<li>works even if you don't own the enum code</li>\n<li>no dead code (the default statement of switch on all enum values)</li>\n<li>sonar/pmd/... not complaining that you have a switch statement without default statement</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":30670,"reputation":18662,"user_id":83741,"accept_rate":67,"display_name":"Alexander Torstling"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453968401,"creation_date":1453968401,"answer_id":35055888,"question_id":16797529,"body_markdown":"This is a variant of the Visitor approach which gives you compile-time help when you add constants:\r\n\r\n    interface Status {\r\n        enum Pending implements Status {\r\n            INSTANCE;\r\n\r\n            @Override\r\n            public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\r\n                return v.visit(this);\r\n            }\r\n        }\r\n        enum Progressing implements Status {\r\n            INSTANCE;\r\n\r\n            @Override\r\n            public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\r\n                return v.visit(this);\r\n            }\r\n        }\r\n        enum Done implements Status {\r\n            INSTANCE;\r\n\r\n            @Override\r\n            public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\r\n                return v.visit(this);\r\n            }\r\n        }\r\n        \r\n        &lt;T&gt; T accept(Visitor&lt;T&gt; v);\r\n        interface Visitor&lt;T&gt; {\r\n            T visit(Done done);\r\n            T visit(Progressing progressing);\r\n            T visit(Pending pending);\r\n        }\r\n    }\r\n    \r\n    void usage() {\r\n        Status s = getRandomStatus();\r\n        String userMessage = s.accept(new Status.Visitor&lt;String&gt;() {\r\n            @Override\r\n            public String visit(Status.Done done) {\r\n                return &quot;completed&quot;;\r\n            }\r\n\r\n            @Override\r\n            public String visit(Status.Progressing progressing) {\r\n                return &quot;in progress&quot;;\r\n            }\r\n\r\n            @Override\r\n            public String visit(Status.Pending pending) {\r\n                return &quot;in queue&quot;;\r\n            }\r\n        });\r\n    }\r\n\r\nBeautiful, eh? I call it the &quot;Rube Goldberg Architecture Solution&quot;.\r\n\r\nI would normally just use an abstract method, but if you really don&#39;t want to add methods to your enum (maybe because you introduce cyclic dependencies), this is a way.","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>This is a variant of the Visitor approach which gives you compile-time help when you add constants:</p>\n\n<pre><code>interface Status {\n    enum Pending implements Status {\n        INSTANCE;\n\n        @Override\n        public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\n            return v.visit(this);\n        }\n    }\n    enum Progressing implements Status {\n        INSTANCE;\n\n        @Override\n        public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\n            return v.visit(this);\n        }\n    }\n    enum Done implements Status {\n        INSTANCE;\n\n        @Override\n        public &lt;T&gt; T accept(Visitor&lt;T&gt; v) {\n            return v.visit(this);\n        }\n    }\n\n    &lt;T&gt; T accept(Visitor&lt;T&gt; v);\n    interface Visitor&lt;T&gt; {\n        T visit(Done done);\n        T visit(Progressing progressing);\n        T visit(Pending pending);\n    }\n}\n\nvoid usage() {\n    Status s = getRandomStatus();\n    String userMessage = s.accept(new Status.Visitor&lt;String&gt;() {\n        @Override\n        public String visit(Status.Done done) {\n            return \"completed\";\n        }\n\n        @Override\n        public String visit(Status.Progressing progressing) {\n            return \"in progress\";\n        }\n\n        @Override\n        public String visit(Status.Pending pending) {\n            return \"in queue\";\n        }\n    });\n}\n</code></pre>\n\n<p>Beautiful, eh? I call it the \"Rube Goldberg Architecture Solution\".</p>\n\n<p>I would normally just use an abstract method, but if you really don't want to add methods to your enum (maybe because you introduce cyclic dependencies), this is a way.</p>\n"},{"tags":[],"owner":{"account_id":9643998,"reputation":141,"user_id":7157391,"display_name":"Ilia Zlobin"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1481562996,"creation_date":1481562996,"answer_id":41106087,"question_id":16797529,"body_markdown":"Another solution uses the functional approach. You just need to declare the enum class according with next template:\r\n\r\n    public enum Direction {\r\n        \r\n        UNKNOWN,\r\n        FORWARD,\r\n        BACKWARD;\r\n    \r\n        public interface SwitchResult {\r\n            public void UNKNOWN();\r\n            public void FORWARD();\r\n            public void BACKWARD();\r\n        }\r\n    \r\n        public void switchValue(SwitchResult result) {\r\n            switch (this) {\r\n                case UNKNOWN:\r\n                    result.UNKNOWN();\r\n                    break;\r\n                case FORWARD:\r\n                    result.FORWARD();\r\n                    break;\r\n                case BACKWARD:\r\n                    result.BACKWARD();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\nIf you try to use this without one enumeration constant at least, you will get the compilation error:\r\n\r\n    getDirection().switchValue(new Direction.SwitchResult() {\r\n        public void UNKNOWN() { /* */ }\r\n        public void FORWARD() { /* */ }\r\n        // public void BACKWARD() { /* */ } // &lt;- Compilation error if missing\r\n    });\r\n\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>Another solution uses the functional approach. You just need to declare the enum class according with next template:</p>\n\n<pre><code>public enum Direction {\n\n    UNKNOWN,\n    FORWARD,\n    BACKWARD;\n\n    public interface SwitchResult {\n        public void UNKNOWN();\n        public void FORWARD();\n        public void BACKWARD();\n    }\n\n    public void switchValue(SwitchResult result) {\n        switch (this) {\n            case UNKNOWN:\n                result.UNKNOWN();\n                break;\n            case FORWARD:\n                result.FORWARD();\n                break;\n            case BACKWARD:\n                result.BACKWARD();\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>If you try to use this without one enumeration constant at least, you will get the compilation error:</p>\n\n<pre><code>getDirection().switchValue(new Direction.SwitchResult() {\n    public void UNKNOWN() { /* */ }\n    public void FORWARD() { /* */ }\n    // public void BACKWARD() { /* */ } // &lt;- Compilation error if missing\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1484850440,"creation_date":1484850440,"answer_id":41749102,"question_id":16797529,"body_markdown":"In case there are several enums on different tiers of the project that must correspond to each other, this can be ensured by a test case:\r\n\r\n    private static &lt;T extends Enum&lt;T&gt;&gt; String[] names(T[] values) {\r\n        return Arrays.stream(values).map(Enum::name).toArray(String[]::new);\r\n    }\r\n\r\n    @Test\r\n    public void testEnumCompleteness() throws Exception {\r\n        Assert.assertArrayEquals(names(Enum1.values()), names(Enum2.values()));\r\n    }\r\n\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>In case there are several enums on different tiers of the project that must correspond to each other, this can be ensured by a test case:</p>\n\n<pre><code>private static &lt;T extends Enum&lt;T&gt;&gt; String[] names(T[] values) {\n    return Arrays.stream(values).map(Enum::name).toArray(String[]::new);\n}\n\n@Test\npublic void testEnumCompleteness() throws Exception {\n    Assert.assertArrayEquals(names(Enum1.values()), names(Enum2.values()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1495181239,"creation_date":1495098702,"answer_id":44043428,"question_id":16797529,"body_markdown":"The [Enum Mapper project][1] provides an an annotation processor which will make sure at compile-time that all enum constants are handled.  \r\nMoreover it supports reverse lookup and paritial mappers.\r\n\r\nUsage example:\r\n\r\n    @EnumMapper\r\n    public enum Seasons {\r\n      SPRING, SUMMER, FALL, WINTER\r\n    }\r\n\r\nThe annotation processor will generate a java class `Seasons_MapperFull`, which can be used to map all enum constants to arbitrary values.\r\n\r\nHere is an example use where we map each enum constant to a string.\r\n\r\n    EnumMapperFull&lt;Seasons, String&gt; germanSeasons = Seasons_MapperFull\r\n         .setSPRING(&quot;Fruehling&quot;)\r\n         .setSUMMER(&quot;Sommer&quot;)\r\n         .setFALL(&quot;Herbst&quot;)\r\n         .setWINTER(&quot;Winter&quot;);\r\n\r\nYou can now use the mapper to get the values, or do reverse lookup\r\n\r\n    String germanSummer = germanSeasons.getValue(Seasons.SUMMER); // returns &quot;Sommer&quot;\r\n    ExtremeSeasons.getEnumOrNull(&quot;Sommer&quot;);                 // returns the enum-constant SUMMER\r\n    ExtremeSeasons.getEnumOrRaise(&quot;Fruehling&quot;);             // throws an IllegalArgumentException \r\n\r\n  [1]: https://github.com/tmtron/enum-mapper\r\n\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>The <a href=\"https://github.com/tmtron/enum-mapper\" rel=\"nofollow noreferrer\">Enum Mapper project</a> provides an an annotation processor which will make sure at compile-time that all enum constants are handled.<br>\nMoreover it supports reverse lookup and paritial mappers.</p>\n\n<p>Usage example:</p>\n\n<pre><code>@EnumMapper\npublic enum Seasons {\n  SPRING, SUMMER, FALL, WINTER\n}\n</code></pre>\n\n<p>The annotation processor will generate a java class <code>Seasons_MapperFull</code>, which can be used to map all enum constants to arbitrary values.</p>\n\n<p>Here is an example use where we map each enum constant to a string.</p>\n\n<pre><code>EnumMapperFull&lt;Seasons, String&gt; germanSeasons = Seasons_MapperFull\n     .setSPRING(\"Fruehling\")\n     .setSUMMER(\"Sommer\")\n     .setFALL(\"Herbst\")\n     .setWINTER(\"Winter\");\n</code></pre>\n\n<p>You can now use the mapper to get the values, or do reverse lookup</p>\n\n<pre><code>String germanSummer = germanSeasons.getValue(Seasons.SUMMER); // returns \"Sommer\"\nExtremeSeasons.getEnumOrNull(\"Sommer\");                 // returns the enum-constant SUMMER\nExtremeSeasons.getEnumOrRaise(\"Fruehling\");             // throws an IllegalArgumentException \n</code></pre>\n"},{"tags":[],"owner":{"account_id":892671,"reputation":17469,"user_id":930640,"accept_rate":62,"display_name":"Magnus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523384472,"creation_date":1523384472,"answer_id":49760552,"question_id":16797529,"body_markdown":"If you&#39;re using Android Studio (at least version 3 and up) you can activate this exact check in the inspections setting. This might be available on other IntelliJ Java IDE&#39;s as well.\r\n\r\nGo to `Preferences/Inspections`. In the `Java/Control flow Issues` section, check the item `Enum &#39;switch&#39; statement that misses case`. Optionally you can change severity to `Error` to make it more obvious than a warning.","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>If you're using Android Studio (at least version 3 and up) you can activate this exact check in the inspections setting. This might be available on other IntelliJ Java IDE's as well.</p>\n\n<p>Go to <code>Preferences/Inspections</code>. In the <code>Java/Control flow Issues</code> section, check the item <code>Enum 'switch' statement that misses case</code>. Optionally you can change severity to <code>Error</code> to make it more obvious than a warning.</p>\n"},{"tags":[],"owner":{"account_id":285917,"reputation":459,"user_id":584860,"display_name":"Jeff DQ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575909901,"creation_date":1575909901,"answer_id":59253212,"question_id":16797529,"body_markdown":"I know the question is about Java, and I think the answer for pure Java is clear: it&#39;s not a built-in feature, but there are workarounds. For those who arrive here and are working on Android or other systems that can utilize Kotlin, that language provides this feature with its [when expression][1], and the interop with Java allows it to be rather seamless, even if this is the only Kotlin code in your codebase.\r\n\r\nFor example:\r\n\r\n    public enum HeaderSignalStrength {\r\n      STRENGTH_0, STRENGTH_1, STRENGTH_2, STRENGTH_3, STRENGTH_4;\r\n    }\r\n\r\nWith my original Java code as:\r\n\r\n    // In HeaderUtil.java\r\n    @DrawableRes\r\n    private static int getSignalStrengthIcon(@NonNull HeaderSignalStrength strength) {\r\n      switch (strength) {\r\n        case STRENGTH_0: return R.drawable.connection_strength_0;\r\n        case STRENGTH_1: return R.drawable.connection_strength_1;\r\n        case STRENGTH_2: return R.drawable.connection_strength_2;\r\n        case STRENGTH_3: return R.drawable.connection_strength_3;\r\n        case STRENGTH_4: return R.drawable.connection_strength_4;\r\n        default:\r\n          Log.w(&quot;Unhandled HeaderSignalStrength: &quot; + strength);\r\n          return R.drawable.cockpit_connection_strength_0;\r\n      }\r\n    }\r\n    \r\n    // In Java code somewhere\r\n    mStrength.setImageResource(HeaderUtil.getSignalStrengthIcon(strength));\r\n\r\nCan be rewritten with Kotlin:\r\n\r\n    // In HeaderExtensions.kt\r\n    @DrawableRes\r\n    fun HeaderSignalStrength.getIconRes(): Int {\r\n        return when (this) {\r\n            HeaderSignalStrength.STRENGTH_0 -&gt; R.drawable.connection_strength_0\r\n            HeaderSignalStrength.STRENGTH_1 -&gt; R.drawable.connection_strength_1\r\n            HeaderSignalStrength.STRENGTH_2 -&gt; R.drawable.connection_strength_2\r\n            HeaderSignalStrength.STRENGTH_3 -&gt; R.drawable.connection_strength_3\r\n            HeaderSignalStrength.STRENGTH_4 -&gt; R.drawable.connection_strength_4\r\n        }\r\n    }\r\n\r\n    // In Java code somewhere\r\n    mStrength.setImageResource(HeaderExtensionsKt.getIconRes(strength));\r\n    \r\n\r\n  [1]: https://kotlinlang.org/docs/reference/control-flow.html#when-expression\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>I know the question is about Java, and I think the answer for pure Java is clear: it's not a built-in feature, but there are workarounds. For those who arrive here and are working on Android or other systems that can utilize Kotlin, that language provides this feature with its <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">when expression</a>, and the interop with Java allows it to be rather seamless, even if this is the only Kotlin code in your codebase.</p>\n\n<p>For example:</p>\n\n<pre><code>public enum HeaderSignalStrength {\n  STRENGTH_0, STRENGTH_1, STRENGTH_2, STRENGTH_3, STRENGTH_4;\n}\n</code></pre>\n\n<p>With my original Java code as:</p>\n\n<pre><code>// In HeaderUtil.java\n@DrawableRes\nprivate static int getSignalStrengthIcon(@NonNull HeaderSignalStrength strength) {\n  switch (strength) {\n    case STRENGTH_0: return R.drawable.connection_strength_0;\n    case STRENGTH_1: return R.drawable.connection_strength_1;\n    case STRENGTH_2: return R.drawable.connection_strength_2;\n    case STRENGTH_3: return R.drawable.connection_strength_3;\n    case STRENGTH_4: return R.drawable.connection_strength_4;\n    default:\n      Log.w(\"Unhandled HeaderSignalStrength: \" + strength);\n      return R.drawable.cockpit_connection_strength_0;\n  }\n}\n\n// In Java code somewhere\nmStrength.setImageResource(HeaderUtil.getSignalStrengthIcon(strength));\n</code></pre>\n\n<p>Can be rewritten with Kotlin:</p>\n\n<pre><code>// In HeaderExtensions.kt\n@DrawableRes\nfun HeaderSignalStrength.getIconRes(): Int {\n    return when (this) {\n        HeaderSignalStrength.STRENGTH_0 -&gt; R.drawable.connection_strength_0\n        HeaderSignalStrength.STRENGTH_1 -&gt; R.drawable.connection_strength_1\n        HeaderSignalStrength.STRENGTH_2 -&gt; R.drawable.connection_strength_2\n        HeaderSignalStrength.STRENGTH_3 -&gt; R.drawable.connection_strength_3\n        HeaderSignalStrength.STRENGTH_4 -&gt; R.drawable.connection_strength_4\n    }\n}\n\n// In Java code somewhere\nmStrength.setImageResource(HeaderExtensionsKt.getIconRes(strength));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6592968,"reputation":458,"user_id":5093616,"display_name":"JackHammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599438325,"creation_date":1599438325,"answer_id":63770040,"question_id":16797529,"body_markdown":"Functional approach with lambdas, much less code\r\n\r\n    public enum MyEnum {\r\n\t\tFIRST,\r\n\t\tSECOND,\r\n\t\tTHIRD;\r\n\t\r\n\t\t&lt;T&gt; T switchFunc(\r\n\t\t\t\tFunction&lt;MyEnum, T&gt; first,\r\n\t\t\t\tFunction&lt;MyEnum, T&gt; second,\r\n\t\t\t\tFunction&lt;MyEnum, T&gt; third\r\n\t\t\t\t// when another enum constant is added, add another function here\r\n\t\t\t\t) {\r\n\t\t\tswitch (this) {\r\n\t\t\t\tcase FIRST: return first.apply(this);\r\n\t\t\t\tcase SECOND: return second.apply(this);\r\n\t\t\t\tcase THIRD: return third.apply(this);\r\n\t\t\t\t// and case here\r\n\t\t\t\tdefault: throw new IllegalArgumentException(&quot;You forgot to add parameter&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tMyEnum myEnum = MyEnum.FIRST;\r\n\t\r\n\t\t\t// when another enum constant added method will break and trigger compile-time error\r\n\t\t\tString r = myEnum.switchFunc(\r\n\t\t\t\t\tme -&gt; &quot;first&quot;,\r\n\t\t\t\t\tme -&gt; &quot;second&quot;,\r\n\t\t\t\t\tme -&gt; &quot;third&quot;);\r\n\t\t\tSystem.out.println(r);\r\n\t\t}\r\n}","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>Functional approach with lambdas, much less code</p>\n<pre><code>public enum MyEnum {\n    FIRST,\n    SECOND,\n    THIRD;\n\n    &lt;T&gt; T switchFunc(\n            Function&lt;MyEnum, T&gt; first,\n            Function&lt;MyEnum, T&gt; second,\n            Function&lt;MyEnum, T&gt; third\n            // when another enum constant is added, add another function here\n            ) {\n        switch (this) {\n            case FIRST: return first.apply(this);\n            case SECOND: return second.apply(this);\n            case THIRD: return third.apply(this);\n            // and case here\n            default: throw new IllegalArgumentException(&quot;You forgot to add parameter&quot;);\n        }\n    }\n\n    public static void main(String[] args) {\n        MyEnum myEnum = MyEnum.FIRST;\n\n        // when another enum constant added method will break and trigger compile-time error\n        String r = myEnum.switchFunc(\n                me -&gt; &quot;first&quot;,\n                me -&gt; &quot;second&quot;,\n                me -&gt; &quot;third&quot;);\n        System.out.println(r);\n    }\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":20928670,"reputation":11,"user_id":15375561,"display_name":"Bruno Wenger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615466817,"creation_date":1615466817,"answer_id":66582879,"question_id":16797529,"body_markdown":"Had the same issue. I throw an error on the default case and add a static initializer that iterates all enum values. Simple but fails fast. If you have some unit test coverage it does the trick.\r\n```\r\npublic class HolidayCalculations {\r\n\t\r\n\tpublic static Date getDate(Holiday holiday, int year) {\r\n\t\tswitch (holiday) {\r\n\t\tcase AllSaintsDay:\r\n\t\tcase AscensionDay:\r\n\t\t\treturn new Date(1);\r\n\t\tdefault: \r\n\t\t\tthrow new IllegalStateException(&quot;getDate(..) for &quot;+holiday.name() + &quot; not implemented&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic {\r\n\t\tfor (Holiday value : Holiday.values()) getDate(value, 2000);\r\n\t}\r\n\t\r\n}\r\n```\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>Had the same issue. I throw an error on the default case and add a static initializer that iterates all enum values. Simple but fails fast. If you have some unit test coverage it does the trick.</p>\n<pre><code>public class HolidayCalculations {\n    \n    public static Date getDate(Holiday holiday, int year) {\n        switch (holiday) {\n        case AllSaintsDay:\n        case AscensionDay:\n            return new Date(1);\n        default: \n            throw new IllegalStateException(&quot;getDate(..) for &quot;+holiday.name() + &quot; not implemented&quot;);\n            \n        }\n    }\n    \n    static {\n        for (Holiday value : Holiday.values()) getDate(value, 2000);\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2190659,"reputation":2306,"user_id":1937795,"accept_rate":75,"display_name":"Itchy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694369757,"creation_date":1694369757,"answer_id":77077388,"question_id":16797529,"body_markdown":"Since Java 14 (with [JEP 361][1]) there are now **Switch Expressions** which lets you do that. For example with the following example:\r\n\r\n    public enum ExampleEnum {A, B}\r\n\r\n    public static String exampleMethod(ExampleEnum exampleEnum) {\r\n        return switch (exampleEnum) {\r\n            case A -&gt; &quot;A&quot;;\r\n            case B -&gt; &quot;B&quot;;\r\n        };\r\n    }\r\n\r\nIf you add a new enum value `C` then you get a compile error: `java: the switch expression does not cover all possible input values`.\r\n\r\nBut be warned, this does **not** magically **work with &quot;normal&quot; (old) switch** statements like:\r\n\r\n    public static String badExampleMethod(ExampleEnum exampleEnum) {\r\n        switch (exampleEnum) {\r\n            case A:\r\n                return &quot;A&quot;;\r\n            case B:\r\n                return &quot;B&quot;;\r\n        }\r\n    }\r\nThis would already throw a compile error: `java: missing return statement` and so force you to add a `default` branch (which then does not bring a compile error when adding a new enum value).\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/361","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>Since Java 14 (with <a href=\"https://openjdk.org/jeps/361\" rel=\"nofollow noreferrer\">JEP 361</a>) there are now <strong>Switch Expressions</strong> which lets you do that. For example with the following example:</p>\n<pre><code>public enum ExampleEnum {A, B}\n\npublic static String exampleMethod(ExampleEnum exampleEnum) {\n    return switch (exampleEnum) {\n        case A -&gt; &quot;A&quot;;\n        case B -&gt; &quot;B&quot;;\n    };\n}\n</code></pre>\n<p>If you add a new enum value <code>C</code> then you get a compile error: <code>java: the switch expression does not cover all possible input values</code>.</p>\n<p>But be warned, this does <strong>not</strong> magically <strong>work with &quot;normal&quot; (old) switch</strong> statements like:</p>\n<pre><code>public static String badExampleMethod(ExampleEnum exampleEnum) {\n    switch (exampleEnum) {\n        case A:\n            return &quot;A&quot;;\n        case B:\n            return &quot;B&quot;;\n    }\n}\n</code></pre>\n<p>This would already throw a compile error: <code>java: missing return statement</code> and so force you to add a <code>default</code> branch (which then does not bring a compile error when adding a new enum value).</p>\n"}],"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15614,"favorite_count":0,"down_vote_count":1,"up_vote_count":57,"accepted_answer_id":77077388,"answer_count":14,"score":56,"last_activity_date":1694369757,"creation_date":1369760261,"question_id":16797529,"body_markdown":"I have several switch statements which test an `enum`. All `enum` values must be handled in the `switch` statements by a `case` statement. During code refactoring it can happen that the `enum` shrinks and grows. When the `enum` shrinks the compiler throws an error. But no error is thrown, if the the `enum` grows. The matching state gets forgotten and produces a run time error. I would like to move this error from run time to compile time. Theoretically it should be possible to detect the missing `enum` cases at compile time. Is there any way to achieve this?\r\n\r\nThe question exists already &quot;https://stackoverflow.com/questions/3999942/how-to-detect-a-new-value-was-added-to-an-enum-and-is-not-handled-in-a-switch?rq=1&quot; but it does not contain an answer only an Eclipse related work around.\r\n","title":"How to ensure completeness in an enum switch at compile time?","body":"<p>I have several switch statements which test an <code>enum</code>. All <code>enum</code> values must be handled in the <code>switch</code> statements by a <code>case</code> statement. During code refactoring it can happen that the <code>enum</code> shrinks and grows. When the <code>enum</code> shrinks the compiler throws an error. But no error is thrown, if the the <code>enum</code> grows. The matching state gets forgotten and produces a run time error. I would like to move this error from run time to compile time. Theoretically it should be possible to detect the missing <code>enum</code> cases at compile time. Is there any way to achieve this?</p>\n\n<p>The question exists already \"<a href=\"https://stackoverflow.com/questions/3999942/how-to-detect-a-new-value-was-added-to-an-enum-and-is-not-handled-in-a-switch?rq=1\">How to detect a new value was added to an enum and is not handled in a switch</a>\" but it does not contain an answer only an Eclipse related work around.</p>\n"},{"tags":["java","algorithm","tree","binary-tree"],"answers":[{"tags":[],"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694285573,"creation_date":1694285185,"answer_id":77073609,"question_id":77073122,"body_markdown":"I&#39;m having trouble reasoning about the correctness of your code. The moving of `root` got me lost. Why not build the strings as you go?:\r\n\r\n    public static List&lt;String&gt; binaryTreePaths(TreeNode root) {\r\n        List&lt;String&gt; retVal = new ArrayList&lt;&gt;();\r\n        Stack&lt;AbstractMap.SimpleEntry&lt;TreeNode, String&gt;&gt; stack = new Stack&lt;&gt;();\r\n        if (root == null) return retVal;\r\n        stack.push(makePair(root, root.val));\r\n        while(!stack.empty()) {\r\n            AbstractMap.SimpleEntry&lt;TreeNode, String&gt; item = stack.pop();\r\n            TreeNode current = item.getKey();\r\n            if(current.left!=null) {\r\n                stack.push(makePair(current.left,\r\n                    item.getValue()+&quot;-&gt;&quot;+current.left.val));\r\n            }\r\n            if(current.right!=null) {\r\n                stack.push(makePair(current.right,\r\n                    item.getValue()+&quot;-&gt;&quot;+current.right.val));\r\n            }\r\n            if(current.left==null &amp;&amp; current.right==null) {\r\n                retVal.add(item.getValue());\r\n            }\r\n        }\r\n        return retVal;\r\n    }\r\n\r\nCode is untested and probably won&#39;t compile, treat as pseudocode. Implementation of `makePair` left as exercise to the reader (`AbstractMap.SimpleEntry` used for a Pair, you can use some other Pair/Tuple).","title":"Leetcode: Binary Tree Paths","body":"<p>I'm having trouble reasoning about the correctness of your code. The moving of <code>root</code> got me lost. Why not build the strings as you go?:</p>\n<pre><code>public static List&lt;String&gt; binaryTreePaths(TreeNode root) {\n    List&lt;String&gt; retVal = new ArrayList&lt;&gt;();\n    Stack&lt;AbstractMap.SimpleEntry&lt;TreeNode, String&gt;&gt; stack = new Stack&lt;&gt;();\n    if (root == null) return retVal;\n    stack.push(makePair(root, root.val));\n    while(!stack.empty()) {\n        AbstractMap.SimpleEntry&lt;TreeNode, String&gt; item = stack.pop();\n        TreeNode current = item.getKey();\n        if(current.left!=null) {\n            stack.push(makePair(current.left,\n                item.getValue()+&quot;-&gt;&quot;+current.left.val));\n        }\n        if(current.right!=null) {\n            stack.push(makePair(current.right,\n                item.getValue()+&quot;-&gt;&quot;+current.right.val));\n        }\n        if(current.left==null &amp;&amp; current.right==null) {\n            retVal.add(item.getValue());\n        }\n    }\n    return retVal;\n}\n</code></pre>\n<p>Code is untested and probably won't compile, treat as pseudocode. Implementation of <code>makePair</code> left as exercise to the reader (<code>AbstractMap.SimpleEntry</code> used for a Pair, you can use some other Pair/Tuple).</p>\n"}],"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77073609,"answer_count":1,"score":0,"last_activity_date":1694369664,"creation_date":1694277451,"question_id":77073122,"body_markdown":"I&#39;m solving the following leetcode [problem][1]:\r\n\r\n&gt; Given the root of a binary tree, return all root-to-leaf paths in any\r\n&gt; order.\r\n&gt; \r\n&gt; A leaf is a node with no children.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n&gt; Input: `root` = `[1,2,3,null,5]`\r\n&gt; \r\n&gt; Output: `[&quot;1-&gt;2-&gt;5&quot;,&quot;1-&gt;3&quot;]`\r\n\r\nRecursive solution is trivial so I tried to come up with iterative solution. Here is how my solution looks like:\r\n\r\n    public static List&lt;String&gt; binaryTreePaths(TreeNode root) {\r\n        List&lt;String&gt; retVal = new ArrayList&lt;&gt;();\r\n        Deque&lt;TreeNode&gt; stack = new ArrayDeque&lt;&gt;();\r\n        while(root != null) {\r\n            if(root.left != null){\r\n                stack.push(root);\r\n                root = root.left;\r\n            } else if (root.right != null) {\r\n                stack.push(root);\r\n                root = root.right;\r\n            //\r\n            //The code under the else branch below is difficult to read\r\n            //\r\n            } else {\r\n                final var arr = new ArrayList&lt;&gt;(stack);\r\n                Collections.reverse(arr);\r\n                arr.add(root);\r\n                final var path = arr.stream()\r\n                        .map(node -&gt; String.valueOf(node.val))\r\n                        .collect(Collectors.joining(&quot;-&gt;&quot;));\r\n                retVal.add(path);\r\n                TreeNode newRoot = null;\r\n                while(!stack.isEmpty()){\r\n                    TreeNode previous = stack.pop();\r\n                    TreeNode current = root;\r\n                    if(previous.right != null &amp;&amp; previous.right != current){\r\n                        stack.push(previous);\r\n                        newRoot = previous.right;\r\n                        break;\r\n                    } else {\r\n                        root = previous;\r\n                    }\r\n                }\r\n                root = newRoot;\r\n            }\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n**The problem:** The code is relatively verbose and difficult to read. My idea is to keep track of the whole path from the top to the current node. But this differs from the standard DFS since it keeps only unvisited node on the stack.\r\n\r\nIs there a way to improve the part and/or the whole implementation?\r\n\r\n\r\n  [1]: https://leetcode.com/problems/binary-tree-paths/description/\r\n  [2]: https://i.stack.imgur.com/5gaKa.jpg","title":"Leetcode: Binary Tree Paths","body":"<p>I'm solving the following leetcode <a href=\"https://leetcode.com/problems/binary-tree-paths/description/\" rel=\"nofollow noreferrer\">problem</a>:</p>\n<blockquote>\n<p>Given the root of a binary tree, return all root-to-leaf paths in any\norder.</p>\n<p>A leaf is a node with no children.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/5gaKa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5gaKa.jpg\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>Input: <code>root</code> = <code>[1,2,3,null,5]</code></p>\n<p>Output: <code>[&quot;1-&gt;2-&gt;5&quot;,&quot;1-&gt;3&quot;]</code></p>\n</blockquote>\n<p>Recursive solution is trivial so I tried to come up with iterative solution. Here is how my solution looks like:</p>\n<pre><code>public static List&lt;String&gt; binaryTreePaths(TreeNode root) {\n    List&lt;String&gt; retVal = new ArrayList&lt;&gt;();\n    Deque&lt;TreeNode&gt; stack = new ArrayDeque&lt;&gt;();\n    while(root != null) {\n        if(root.left != null){\n            stack.push(root);\n            root = root.left;\n        } else if (root.right != null) {\n            stack.push(root);\n            root = root.right;\n        //\n        //The code under the else branch below is difficult to read\n        //\n        } else {\n            final var arr = new ArrayList&lt;&gt;(stack);\n            Collections.reverse(arr);\n            arr.add(root);\n            final var path = arr.stream()\n                    .map(node -&gt; String.valueOf(node.val))\n                    .collect(Collectors.joining(&quot;-&gt;&quot;));\n            retVal.add(path);\n            TreeNode newRoot = null;\n            while(!stack.isEmpty()){\n                TreeNode previous = stack.pop();\n                TreeNode current = root;\n                if(previous.right != null &amp;&amp; previous.right != current){\n                    stack.push(previous);\n                    newRoot = previous.right;\n                    break;\n                } else {\n                    root = previous;\n                }\n            }\n            root = newRoot;\n        }\n    }\n    return retVal;\n}\n</code></pre>\n<p><strong>The problem:</strong> The code is relatively verbose and difficult to read. My idea is to keep track of the whole path from the top to the current node. But this differs from the standard DFS since it keeps only unvisited node on the stack.</p>\n<p>Is there a way to improve the part and/or the whole implementation?</p>\n"},{"tags":["java","selenium","winappdriver"],"answers":[{"tags":[],"owner":{"account_id":10336690,"reputation":3527,"user_id":7624566,"display_name":"K. B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1629834701,"creation_date":1629834701,"answer_id":68913376,"question_id":68912075,"body_markdown":"I am using in my code:\r\n\r\n     this.driver.SwitchTo().Window(this.driver.WindowHandles[0]);\r\n\r\nHowever, I do not expect this to work in your case, as your number of open windows is 1, than means that there is no second window to switch to.\r\nSo in your case you can use root session in order to attach to your window:\r\n\r\n     AppiumOptions rootSessionOptions = new AppiumOptions();\r\n    rootSessionOptions.AddAdditionalCapability(&quot;app&quot;, &quot;Root&quot;);\r\n    rootSessionOptions.AddAdditionalCapability(&quot;deviceName&quot;, &quot;WindowsPC&quot;);\r\n    _driver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), rootSessionOptions);\r\n    _driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(5);\r\n\r\n    var VSWindow = _driver.FindElementByName(&quot;Your project name without .csproj - Microsoft Visual Studio&quot;);\r\n    var VSTopLevelWindowHandle = VSWindow.GetAttribute(&quot;NativeWindowHandle&quot;);\r\n    VSTopLevelWindowHandle = (int.Parse(VSTopLevelWindowHandle)).ToString(&quot;x&quot;);\r\n\r\n    AppiumOptions VisualStudioSessionOptions = new AppiumOptions();\r\n    VisualStudioSessionOptions.AddAdditionalCapability(&quot;appTopLevelWindow&quot;, VSTopLevelWindowHandle);\r\n    _driver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), VisualStudioSessionOptions);\r\n\r\n    _driver.SwitchTo().Window(_driver.WindowHandles[0]);\r\n\r\nReference:   \r\nhttps://github.com/microsoft/WinAppDriver/issues/978   \r\nhttps://stackoverflow.com/questions/62549778/openqa-selenium-webdriverexception-windowhandle-is-not-a-top-level-window-han","title":"How to switch focus between windows using WinAppDriver Java","body":"<p>I am using in my code:</p>\n<pre><code> this.driver.SwitchTo().Window(this.driver.WindowHandles[0]);\n</code></pre>\n<p>However, I do not expect this to work in your case, as your number of open windows is 1, than means that there is no second window to switch to.\nSo in your case you can use root session in order to attach to your window:</p>\n<pre><code> AppiumOptions rootSessionOptions = new AppiumOptions();\nrootSessionOptions.AddAdditionalCapability(&quot;app&quot;, &quot;Root&quot;);\nrootSessionOptions.AddAdditionalCapability(&quot;deviceName&quot;, &quot;WindowsPC&quot;);\n_driver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), rootSessionOptions);\n_driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(5);\n\nvar VSWindow = _driver.FindElementByName(&quot;Your project name without .csproj - Microsoft Visual Studio&quot;);\nvar VSTopLevelWindowHandle = VSWindow.GetAttribute(&quot;NativeWindowHandle&quot;);\nVSTopLevelWindowHandle = (int.Parse(VSTopLevelWindowHandle)).ToString(&quot;x&quot;);\n\nAppiumOptions VisualStudioSessionOptions = new AppiumOptions();\nVisualStudioSessionOptions.AddAdditionalCapability(&quot;appTopLevelWindow&quot;, VSTopLevelWindowHandle);\n_driver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), VisualStudioSessionOptions);\n\n_driver.SwitchTo().Window(_driver.WindowHandles[0]);\n</code></pre>\n<p>Reference:<br />\n<a href=\"https://github.com/microsoft/WinAppDriver/issues/978\" rel=\"nofollow noreferrer\">https://github.com/microsoft/WinAppDriver/issues/978</a><br />\n<a href=\"https://stackoverflow.com/questions/62549778/openqa-selenium-webdriverexception-windowhandle-is-not-a-top-level-window-han\">OpenQA.Selenium.WebDriverException: [windowHandle] is not a top level window handle solution</a></p>\n"},{"tags":[],"owner":{"account_id":15443040,"reputation":11,"user_id":11140972,"display_name":"Elena "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654114064,"creation_date":1654114064,"answer_id":72467476,"question_id":68912075,"body_markdown":"This code works for me (windows automation using win app driver) **with C#**\r\n//Switch to the next window in desktop application:\r\n\r\n   \r\n\r\n     IList&lt;string&gt; toWindowHandles = new List&lt;string&gt;(_driver.WindowHandles);\r\n        Thread.Sleep(6000);\r\n                                                                \r\n        _driver.SwitchTo().Window(_driver.WindowHandles[0]);\r\n\r\n**With Java:** \r\n\r\n        Thread.sleep(5000);\r\n    //Switch to the next window in desktop application:\r\n        Set&lt;String&gt; windowHandles = driver.getWindowHandles();\r\n        driver.switchTo().window(windowHandles.iterator().next());","title":"How to switch focus between windows using WinAppDriver Java","body":"<p>This code works for me (windows automation using win app driver) <strong>with C#</strong>\n//Switch to the next window in desktop application:</p>\n<pre><code> IList&lt;string&gt; toWindowHandles = new List&lt;string&gt;(_driver.WindowHandles);\n    Thread.Sleep(6000);\n                                                            \n    _driver.SwitchTo().Window(_driver.WindowHandles[0]);\n</code></pre>\n<p><strong>With Java:</strong></p>\n<pre><code>    Thread.sleep(5000);\n//Switch to the next window in desktop application:\n    Set&lt;String&gt; windowHandles = driver.getWindowHandles();\n    driver.switchTo().window(windowHandles.iterator().next());\n</code></pre>\n"}],"owner":{"account_id":17295678,"reputation":81,"user_id":12526407,"display_name":"siri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4089,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":68913376,"answer_count":2,"score":1,"last_activity_date":1694368910,"creation_date":1629828026,"question_id":68912075,"body_markdown":"I am new to windows automation using win app driver. \r\nOur application is developed with chromium browser and we are using win app diver to automate since the main app we are trying to open is windows based.\r\nWhen I click on Ok button opens another window(Window B). I have 2 windows opened window 1 and window 2. I need to perform actions on both the windows for that I need to shift the focus between two windows. When I use getwindowhandles() method I am getting number of windows opened as 1.\r\nHow can I switch between windows using winapp driver.\r\nAppreciate your help.\r\nThanks\r\n","title":"How to switch focus between windows using WinAppDriver Java","body":"<p>I am new to windows automation using win app driver.\nOur application is developed with chromium browser and we are using win app diver to automate since the main app we are trying to open is windows based.\nWhen I click on Ok button opens another window(Window B). I have 2 windows opened window 1 and window 2. I need to perform actions on both the windows for that I need to shift the focus between two windows. When I use getwindowhandles() method I am getting number of windows opened as 1.\nHow can I switch between windows using winapp driver.\nAppreciate your help.\nThanks</p>\n"},{"tags":["java","spring","spring-boot","http-status-codes"],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694368710,"creation_date":1694368710,"answer_id":77077334,"question_id":77077277,"body_markdown":"Follow the [specification](https://www.rfc-editor.org/rfc/rfc2616#page-63).\r\n\r\n\r\n&gt; 10.3.5 304 Not Modified\r\n&gt; \r\n&gt;    If the client has performed a conditional GET request and access is\r\n&gt; allowed, but the document has not been modified, the server SHOULD   \r\n&gt; respond with this status code. The 304 response MUST NOT contain a   \r\n&gt; message-body, and thus is always terminated by the first empty line   \r\n&gt; after the header fields.\r\n\r\nYou might, for example, do a &#39;conditional GET&#39; on a large document; there&#39;s no point in getting it again if you already have it and it hasn&#39;t been changed since.  The efficiency of not transferring the document should be obvious; you need to trade that off against the work of maintaining a local copy.","title":"When and Why Should I Use the HTTP 304 Not Modified Status Code in a Spring Application?","body":"<p>Follow the <a href=\"https://www.rfc-editor.org/rfc/rfc2616#page-63\" rel=\"nofollow noreferrer\">specification</a>.</p>\n<blockquote>\n<p>10.3.5 304 Not Modified</p>\n<p>If the client has performed a conditional GET request and access is\nallowed, but the document has not been modified, the server SHOULD<br />\nrespond with this status code. The 304 response MUST NOT contain a<br />\nmessage-body, and thus is always terminated by the first empty line<br />\nafter the header fields.</p>\n</blockquote>\n<p>You might, for example, do a 'conditional GET' on a large document; there's no point in getting it again if you already have it and it hasn't been changed since.  The efficiency of not transferring the document should be obvious; you need to trade that off against the work of maintaining a local copy.</p>\n"}],"owner":{"account_id":25989163,"reputation":37,"user_id":19701675,"display_name":"shiningStar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77077334,"answer_count":1,"score":0,"last_activity_date":1694368710,"creation_date":1694367984,"question_id":77077277,"body_markdown":"I&#39;m currently working on a Spring application and I&#39;ve come across the HTTP 304 Not Modified status code. While I understand its basic purpose, I&#39;m struggling to grasp real-life scenarios where it would be particularly beneficial.\r\n\r\nCould someone please provide some concrete examples or use cases where using the 304 status code would be a good practice?\r\n\r\nAdditionally, I&#39;d appreciate any insights on how this status code can enhance performance or efficiency in a web application.\r\n\r\nThank you for shedding light on this topic!","title":"When and Why Should I Use the HTTP 304 Not Modified Status Code in a Spring Application?","body":"<p>I'm currently working on a Spring application and I've come across the HTTP 304 Not Modified status code. While I understand its basic purpose, I'm struggling to grasp real-life scenarios where it would be particularly beneficial.</p>\n<p>Could someone please provide some concrete examples or use cases where using the 304 status code would be a good practice?</p>\n<p>Additionally, I'd appreciate any insights on how this status code can enhance performance or efficiency in a web application.</p>\n<p>Thank you for shedding light on this topic!</p>\n"},{"tags":["java","eclipse","selenium","testng"],"comments":[{"owner":{"account_id":17295469,"reputation":137,"user_id":12526239,"display_name":"Yasin Bekar"},"score":0,"creation_date":1631039464,"post_id":51688951,"comment_id":122114799,"body_markdown":"As the log states, there is a null pointer exception\nCaused by: java.lang.NullPointerException at java.base/java.io.FileInputStream...\nIt means that the FilePath is not coming through the execution or is not provided.","body":"As the log states, there is a null pointer exception Caused by: java.lang.NullPointerException at java.base/java.io.FileInputStream... It means that the FilePath is not coming through the execution or is not provided."}],"answers":[{"tags":[],"owner":{"account_id":4994171,"reputation":2831,"user_id":4015372,"display_name":"OhleC"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1533414814,"creation_date":1533414814,"answer_id":51689357,"question_id":51688951,"body_markdown":"The lowest &#39;caused by&#39; section points you to the underlying exception in your base class constructor: you are calling `System.getProperty` with a file path; that will probably return null. To me it looks like the whole call shouldn&#39;t be there, and you just want to pass the file path to the `FileInputStream` constructor (or read it from a system property with some key)","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p>The lowest 'caused by' section points you to the underlying exception in your base class constructor: you are calling <code>System.getProperty</code> with a file path; that will probably return null. To me it looks like the whole call shouldn't be there, and you just want to pass the file path to the <code>FileInputStream</code> constructor (or read it from a system property with some key)</p>\n"},{"tags":[],"owner":{"account_id":14092429,"reputation":67,"user_id":10180321,"display_name":"sette"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533422312,"creation_date":1533422312,"answer_id":51690049,"question_id":51688951,"body_markdown":"Looking at the code, I understand the issue is in the constructor of the base class.\r\nLoginPageTest calls super() which invokes TestBase. \r\n\r\nFileInputStream needs a file path. I suspect FileInputSteam object created is coming as null.\r\n\r\nWhy are you calling System.getProperty? Is the config.properties file available?","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p>Looking at the code, I understand the issue is in the constructor of the base class.\nLoginPageTest calls super() which invokes TestBase. </p>\n\n<p>FileInputStream needs a file path. I suspect FileInputSteam object created is coming as null.</p>\n\n<p>Why are you calling System.getProperty? Is the config.properties file available?</p>\n"},{"tags":[],"owner":{"account_id":18094041,"reputation":1,"user_id":13152781,"display_name":"Rajeev Ranjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588279084,"creation_date":1588243248,"answer_id":61521531,"question_id":51688951,"body_markdown":"Just Remove `System.getproperty` from your base class. Use this lines of code \r\n\r\n     prop = new Properties();\r\n     \r\n    FileInputStream ip = new FileInputStream((&quot;C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties&quot;));\r\n      \r\n    prop.load(ip);","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p>Just Remove <code>System.getproperty</code> from your base class. Use this lines of code </p>\n\n<pre><code> prop = new Properties();\n\nFileInputStream ip = new FileInputStream((\"C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties\"));\n\nprop.load(ip);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25867958,"reputation":3,"user_id":19599273,"display_name":"Chandan Dash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684052879,"creation_date":1683872351,"answer_id":76233598,"question_id":51688951,"body_markdown":"**If you use Jdk_1.8 for your automation suite, It might be one of the following two errors :-**\r\n\r\n    \r\n\r\n     1. java.lang.AbstractMethodError: org.openqa.selenium.remote.service.DriverService$Builder.loadSystemProperties()V\r\n    \r\n     2. org.testng.TestNGException:&#160;\r\n    Cannot instantiate class tests.mobiquityPayX.payXUAT.channelApp.BillPayChannelTest\r\n\r\n\r\n\r\n&gt; **Solution:** Try to upgrade your the latest java-client dependencies. It may be\r\n&gt; resolve your issues..\r\n&gt; \r\n&gt; \r\n\r\n ","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p><strong>If you use Jdk_1.8 for your automation suite, It might be one of the following two errors :-</strong></p>\n<pre><code> 1. java.lang.AbstractMethodError: org.openqa.selenium.remote.service.DriverService$Builder.loadSystemProperties()V\n\n 2. org.testng.TestNGException: \nCannot instantiate class tests.mobiquityPayX.payXUAT.channelApp.BillPayChannelTest\n</code></pre>\n<blockquote>\n<p><strong>Solution:</strong> Try to upgrade your the latest java-client dependencies. It may be\nresolve your issues..</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":28640639,"reputation":1,"user_id":21929840,"display_name":"Jaibir singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684564197,"creation_date":1684564197,"answer_id":76293823,"question_id":51688951,"body_markdown":"i think you dont want to write the whole system path so thats why u are using system.get but with system.get you are also giving whole path instead of that use system.get(&quot;user.dir&quot;)+&quot;\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties&quot;   the user.dir will return the system path where your file is stored this will help us and we dont have to write the long path of file. ","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p>i think you dont want to write the whole system path so thats why u are using system.get but with system.get you are also giving whole path instead of that use system.get(&quot;user.dir&quot;)+&quot;\\src\\main\\java\\com\\pvi\\qa\\config\\config.properties&quot;   the user.dir will return the system path where your file is stored this will help us and we dont have to write the long path of file.</p>\n"}],"owner":{"account_id":14093375,"reputation":3,"user_id":10180974,"display_name":"Pranjal Saxena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42663,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51689357,"answer_count":5,"score":0,"last_activity_date":1694368031,"creation_date":1533411004,"question_id":51688951,"body_markdown":"I am facing this &#39;Cannot insantiate class&#39; error on running one of my test cases in selenium webdriver using java(Using Maven project).\r\n\r\nBelow is the parent class where I defined driver and properties\r\n\r\n \r\n\r\n    package com.pvi.qa.base;\r\n    \r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    public class TestBase {\r\n    \t\r\n    \tpublic static WebDriver driver;\r\n    \tpublic static Properties prop ;\r\n    \t\r\n    \tpublic TestBase() {\r\n    \t\ttry {\r\n    \t\t\tprop = new Properties();\r\n    \t\t\tFileInputStream ip = new FileInputStream(System.getProperty(&quot;C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties&quot;));\r\n    \t\tprop.load(ip);\r\n    \t\t\r\n    \t\t}\r\n    \t\tcatch(FileNotFoundException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tcatch(IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    public static void initialization () {\r\n    String BrowserName = prop.getProperty(&quot;browser&quot;);\t\r\n    if(BrowserName.equals(&quot;chrome&quot;)) {\r\n    \tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\Softwares\\\\chromedriver_win32 (1)\\\\chromedriver.exe&quot;);\r\n    \tdriver = new ChromeDriver();}\r\n    driver.manage().window().maximize();\r\n    driver.manage().deleteAllCookies();\r\n    driver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n    driver.get(prop.getProperty(&quot;url&quot;));\r\n    }\r\n    }\r\n\r\nBelow is the test cases class which I am running through TestNG\r\n\r\n    package com.pvi.qa.testcases;\r\n    \r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import com.pvi.qa.base.TestBase;\r\n    import com.pvi.qa.pages.HomePage;\r\n    import com.pvi.qa.pages.LoginPage;\r\n    \r\n    public class LoginPageTest extends TestBase{\r\n    \tLoginPage loginPage;\r\n    \tHomePage homePage;\r\n    \t\r\n    \t\r\n    \tpublic LoginPageTest() {\r\n    \t\tsuper();\r\n    \t\t}\r\n    \t\r\n    \t@BeforeMethod\r\n    \tpublic void setUp() {\r\n    \t\tinitialization();\r\n    \t\tloginPage = new LoginPage();\r\n    \t}\r\n    \r\n    \r\n    \t@Test\r\n    \tpublic void logintest() {\r\n    \t\thomePage = loginPage.login(prop.getProperty(&quot;username&quot;), prop.getProperty(&quot;password&quot;));\r\n    \t}\r\n    \t\r\n    \t@AfterMethod\r\n    \tpublic void tearDown() {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \t\r\n    }\r\n\r\nAnd below is the error I am getting - \r\n\r\n    [RemoteTestNG] detected TestNG version 6.14.3\r\n    org.testng.TestNGException: \r\n    Cannot instantiate class com.pvi.qa.testcases.LoginPageTest\r\n    \tat org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:30)\r\n    \tat org.testng.internal.ClassHelper.createInstance1(ClassHelper.java:423)\r\n    \tat org.testng.internal.ClassHelper.createInstance(ClassHelper.java:336)\r\n    \tat org.testng.internal.ClassImpl.getDefaultInstance(ClassImpl.java:125)\r\n    \tat org.testng.internal.ClassImpl.getInstances(ClassImpl.java:190)\r\n    \tat org.testng.TestClass.getInstances(TestClass.java:95)\r\n    \tat org.testng.TestClass.initTestClassesAndInstances(TestClass.java:81)\r\n    \tat org.testng.TestClass.init(TestClass.java:73)\r\n    \tat org.testng.TestClass.&lt;init&gt;(TestClass.java:38)\r\n    \tat org.testng.TestRunner.initMethods(TestRunner.java:389)\r\n    \tat org.testng.TestRunner.init(TestRunner.java:271)\r\n    \tat org.testng.TestRunner.init(TestRunner.java:241)\r\n    \tat org.testng.TestRunner.&lt;init&gt;(TestRunner.java:192)\r\n    \tat org.testng.remote.support.RemoteTestNG6_12$1.newTestRunner(RemoteTestNG6_12.java:33)\r\n    \tat org.testng.remote.support.RemoteTestNG6_12$DelegatingTestRunnerFactory.newTestRunner(RemoteTestNG6_12.java:66)\r\n    \tat org.testng.SuiteRunner$ProxyTestRunnerFactory.newTestRunner(SuiteRunner.java:713)\r\n    \tat org.testng.SuiteRunner.init(SuiteRunner.java:260)\r\n    \tat org.testng.SuiteRunner.&lt;init&gt;(SuiteRunner.java:198)\r\n    \tat org.testng.TestNG.createSuiteRunner(TestNG.java:1295)\r\n    \tat org.testng.TestNG.createSuiteRunners(TestNG.java:1273)\r\n    \tat org.testng.TestNG.runSuitesLocally(TestNG.java:1128)\r\n    \tat org.testng.TestNG.runSuites(TestNG.java:1049)\r\n    \tat org.testng.TestNG.run(TestNG.java:1017)\r\n    \tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:114)\r\n    \tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n    \tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:24)\r\n    \t... 25 more\r\n    Caused by: java.lang.NullPointerException\r\n    \tat java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\r\n    \tat java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\r\n    \tat com.pvi.qa.base.TestBase.&lt;init&gt;(TestBase.java:20)\r\n    \tat com.pvi.qa.testcases.LoginPageTest.&lt;init&gt;(LoginPageTest.java:17)\r\n    \t... 30 more\r\n\r\nI have tried everything but not worked for me, Please let me know why I am getting this error. Thanks ","title":"org.testng.TestNGException : Cannot instantiate class","body":"<p>I am facing this 'Cannot insantiate class' error on running one of my test cases in selenium webdriver using java(Using Maven project).</p>\n\n<p>Below is the parent class where I defined driver and properties</p>\n\n<pre><code>package com.pvi.qa.base;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.Properties;\nimport java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class TestBase {\n\n    public static WebDriver driver;\n    public static Properties prop ;\n\n    public TestBase() {\n        try {\n            prop = new Properties();\n            FileInputStream ip = new FileInputStream(System.getProperty(\"C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties\"));\n        prop.load(ip);\n\n        }\n        catch(FileNotFoundException e) {\n            e.printStackTrace();\n        }\n        catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\npublic static void initialization () {\nString BrowserName = prop.getProperty(\"browser\");   \nif(BrowserName.equals(\"chrome\")) {\n    System.setProperty(\"webdriver.chrome.driver\", \"D:\\\\Softwares\\\\chromedriver_win32 (1)\\\\chromedriver.exe\");\n    driver = new ChromeDriver();}\ndriver.manage().window().maximize();\ndriver.manage().deleteAllCookies();\ndriver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\ndriver.get(prop.getProperty(\"url\"));\n}\n}\n</code></pre>\n\n<p>Below is the test cases class which I am running through TestNG</p>\n\n<pre><code>package com.pvi.qa.testcases;\n\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\nimport com.pvi.qa.base.TestBase;\nimport com.pvi.qa.pages.HomePage;\nimport com.pvi.qa.pages.LoginPage;\n\npublic class LoginPageTest extends TestBase{\n    LoginPage loginPage;\n    HomePage homePage;\n\n\n    public LoginPageTest() {\n        super();\n        }\n\n    @BeforeMethod\n    public void setUp() {\n        initialization();\n        loginPage = new LoginPage();\n    }\n\n\n    @Test\n    public void logintest() {\n        homePage = loginPage.login(prop.getProperty(\"username\"), prop.getProperty(\"password\"));\n    }\n\n    @AfterMethod\n    public void tearDown() {\n        driver.quit();\n    }\n\n}\n</code></pre>\n\n<p>And below is the error I am getting - </p>\n\n<pre><code>[RemoteTestNG] detected TestNG version 6.14.3\norg.testng.TestNGException: \nCannot instantiate class com.pvi.qa.testcases.LoginPageTest\n    at org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:30)\n    at org.testng.internal.ClassHelper.createInstance1(ClassHelper.java:423)\n    at org.testng.internal.ClassHelper.createInstance(ClassHelper.java:336)\n    at org.testng.internal.ClassImpl.getDefaultInstance(ClassImpl.java:125)\n    at org.testng.internal.ClassImpl.getInstances(ClassImpl.java:190)\n    at org.testng.TestClass.getInstances(TestClass.java:95)\n    at org.testng.TestClass.initTestClassesAndInstances(TestClass.java:81)\n    at org.testng.TestClass.init(TestClass.java:73)\n    at org.testng.TestClass.&lt;init&gt;(TestClass.java:38)\n    at org.testng.TestRunner.initMethods(TestRunner.java:389)\n    at org.testng.TestRunner.init(TestRunner.java:271)\n    at org.testng.TestRunner.init(TestRunner.java:241)\n    at org.testng.TestRunner.&lt;init&gt;(TestRunner.java:192)\n    at org.testng.remote.support.RemoteTestNG6_12$1.newTestRunner(RemoteTestNG6_12.java:33)\n    at org.testng.remote.support.RemoteTestNG6_12$DelegatingTestRunnerFactory.newTestRunner(RemoteTestNG6_12.java:66)\n    at org.testng.SuiteRunner$ProxyTestRunnerFactory.newTestRunner(SuiteRunner.java:713)\n    at org.testng.SuiteRunner.init(SuiteRunner.java:260)\n    at org.testng.SuiteRunner.&lt;init&gt;(SuiteRunner.java:198)\n    at org.testng.TestNG.createSuiteRunner(TestNG.java:1295)\n    at org.testng.TestNG.createSuiteRunners(TestNG.java:1273)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)\n    at org.testng.TestNG.runSuites(TestNG.java:1049)\n    at org.testng.TestNG.run(TestNG.java:1017)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:114)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:24)\n    ... 25 more\nCaused by: java.lang.NullPointerException\n    at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\n    at com.pvi.qa.base.TestBase.&lt;init&gt;(TestBase.java:20)\n    at com.pvi.qa.testcases.LoginPageTest.&lt;init&gt;(LoginPageTest.java:17)\n    ... 30 more\n</code></pre>\n\n<p>I have tried everything but not worked for me, Please let me know why I am getting this error. Thanks </p>\n"},{"tags":["java","android-studio","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":20088006,"reputation":5,"user_id":14729168,"display_name":"Meeo Meo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694366448,"creation_date":1613051649,"answer_id":66156088,"question_id":66152355,"body_markdown":"Ok, I got to solve it. If anybody runs into the same issue at some point in time:\r\n\r\n```\r\nimport java.lang.reflect.Method;\r\nimport java.lang.reflect.InvocationTargetException;\r\n```\r\n\r\n```\r\nwebView = new WebView(this);\r\n        webView = (WebView)findViewById(R.id.webview);\r\n        webView.getSettings().setLoadsImagesAutomatically(true);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setBuiltInZoomControls(true);\r\n        webView.setInitialScale(65);\r\n        try {\r\n            Method m = webView.getClass().getMethod(&quot;setIsCacheDrawBitmap&quot;, boolean.class);\r\n            if (m != null) {\r\n                m.invoke(webView, false);\r\n                webView.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NORMAL);\r\n            }\r\n        } catch (NoSuchMethodException e) {\r\n        } catch (IllegalAccessException e) {\r\n        } catch (InvocationTargetException e) {\r\n        }\r\n\r\n        webView.loadUrl(&quot;https://duckduckgo.com/&quot;);\r\n```\r\n\r\nFound the solution in here: \r\nhttps://stackoverflow.com/q/3025657/","title":"setInitialScale for older devices?","body":"<p>Ok, I got to solve it. If anybody runs into the same issue at some point in time:</p>\n<pre><code>import java.lang.reflect.Method;\nimport java.lang.reflect.InvocationTargetException;\n</code></pre>\n<pre><code>webView = new WebView(this);\n        webView = (WebView)findViewById(R.id.webview);\n        webView.getSettings().setLoadsImagesAutomatically(true);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setBuiltInZoomControls(true);\n        webView.setInitialScale(65);\n        try {\n            Method m = webView.getClass().getMethod(&quot;setIsCacheDrawBitmap&quot;, boolean.class);\n            if (m != null) {\n                m.invoke(webView, false);\n                webView.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NORMAL);\n            }\n        } catch (NoSuchMethodException e) {\n        } catch (IllegalAccessException e) {\n        } catch (InvocationTargetException e) {\n        }\n\n        webView.loadUrl(&quot;https://duckduckgo.com/&quot;);\n</code></pre>\n<p>Found the solution in here:\n<a href=\"https://stackoverflow.com/q/3025657/\">Android WebView not respecting scaling percentage</a></p>\n"}],"owner":{"account_id":20088006,"reputation":5,"user_id":14729168,"display_name":"Meeo Meo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694366448,"creation_date":1613037254,"question_id":66152355,"body_markdown":"I&#39;m currently working on a webView application,\r\nbut I just can&#39;t get the initial zoom to work out, which should be at 150% when starting the app.\r\n\r\n```\r\nprivate static final int zoom = 150;\r\nwebView.setInitialScale(zoom);\r\n```\r\n\r\nThis seems to be working fine on newer devices, but is there an alternative to older devices as well?","title":"setInitialScale for older devices?","body":"<p>I'm currently working on a webView application,\nbut I just can't get the initial zoom to work out, which should be at 150% when starting the app.</p>\n<pre><code>private static final int zoom = 150;\nwebView.setInitialScale(zoom);\n</code></pre>\n<p>This seems to be working fine on newer devices, but is there an alternative to older devices as well?</p>\n"},{"tags":["java","weblogic","weblogic12c","wlst"],"comments":[{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":0,"creation_date":1615554866,"post_id":66599606,"comment_id":117733548,"body_markdown":"Your JAR file must be added to WLST&#39;s classpath. \n$DOMAIN_HOME/lib is used by servers start scripts and not with WLST.","body":"Your JAR file must be added to WLST&#39;s classpath.  $DOMAIN_HOME/lib is used by servers start scripts and not with WLST."},{"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"score":1,"creation_date":1615561142,"post_id":66599606,"comment_id":117736681,"body_markdown":"The JAR is on the server classpath. Otherwise, my custom security provider just does not appear on the WL console.","body":"The JAR is on the server classpath. Otherwise, my custom security provider just does not appear on the WL console."},{"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"score":0,"creation_date":1615562001,"post_id":66599606,"comment_id":117737133,"body_markdown":"But please, correct me if I am wrong!","body":"But please, correct me if I am wrong!"},{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":1,"creation_date":1615562289,"post_id":66599606,"comment_id":117737288,"body_markdown":"the server classpath is not wlst classpath.\nYour lib in the server classpath, so the console is able to deploy your custom security provider.\nIf you want to do so with WLST, you have to update your WLST script and update the classpath.","body":"the server classpath is not wlst classpath. Your lib in the server classpath, so the console is able to deploy your custom security provider. If you want to do so with WLST, you have to update your WLST script and update the classpath."}],"answers":[{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615890753,"creation_date":1615890753,"answer_id":66653419,"question_id":66599606,"body_markdown":"I added my JAR to the WLST classpath, but this did not help.\r\n\r\n - I changed the `CLASSPATH` variable because the `wlst.sh` executes a java command in the background so this standard variable must be considered. It did not work.\r\n - I added the `-cp` JVM param manually to the java command that starts the WlST. It did not work.\r\n\r\n**The only workaround that worked for me is that the following:**\r\n\r\n - **for WL console**: copy the JAR that contains the custom authentication provider under `$ORACLE_HOME/user_projects/domains/$DOMAIN_NAME/lib/` directory\r\n - **for WLST**: copy the JAR to `$ORACLE_HOME/wlserver/server/lib/mbeantypes/`\r\n\r\nThe 2nd copy solved the `class not found issue` thrown by the WLST.\r\n\r\nIf you know a better, more standard way, please let me know.\r\n","title":"WebLogic: add a new custom authentication-providers via WLST throws a ClassNotFoundException","body":"<p>I added my JAR to the WLST classpath, but this did not help.</p>\n<ul>\n<li>I changed the <code>CLASSPATH</code> variable because the <code>wlst.sh</code> executes a java command in the background so this standard variable must be considered. It did not work.</li>\n<li>I added the <code>-cp</code> JVM param manually to the java command that starts the WlST. It did not work.</li>\n</ul>\n<p><strong>The only workaround that worked for me is that the following:</strong></p>\n<ul>\n<li><strong>for WL console</strong>: copy the JAR that contains the custom authentication provider under <code>$ORACLE_HOME/user_projects/domains/$DOMAIN_NAME/lib/</code> directory</li>\n<li><strong>for WLST</strong>: copy the JAR to <code>$ORACLE_HOME/wlserver/server/lib/mbeantypes/</code></li>\n</ul>\n<p>The 2nd copy solved the <code>class not found issue</code> thrown by the WLST.</p>\n<p>If you know a better, more standard way, please let me know.</p>\n"},{"tags":[],"owner":{"account_id":13616554,"reputation":109,"user_id":9822309,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1621305844,"creation_date":1621305844,"answer_id":67579271,"question_id":66599606,"body_markdown":"At some point oracle has changed from using `CLASSPATH` to `WLST_EXT_CLASSPATH` to set the classpath for WLST. Oracle doesn&#39;t seem to have done a great job of documenting that this is the right env variable to use though. I found it by digging through the various sh scripts that wlst.sh calls, but [this](https://docs.oracle.com/middleware/12213/wls/DEVSP/aud.htm#DEVSP418) document for 12c refers to it, but seems to be the only place that it&#39;s mentioned.\r\n\r\nI&#39;ve tested this using 14.1.1 and a custom provider in the DOMAIN/lib/mbeantypes dir and it works (i.e. I can use WLST to configure a custom security provider as long as I set WLST_EXT_CLASSPATH first) but don&#39;t have 12c to test that it works there.\r\n","title":"WebLogic: add a new custom authentication-providers via WLST throws a ClassNotFoundException","body":"<p>At some point oracle has changed from using <code>CLASSPATH</code> to <code>WLST_EXT_CLASSPATH</code> to set the classpath for WLST. Oracle doesn't seem to have done a great job of documenting that this is the right env variable to use though. I found it by digging through the various sh scripts that wlst.sh calls, but <a href=\"https://docs.oracle.com/middleware/12213/wls/DEVSP/aud.htm#DEVSP418\" rel=\"nofollow noreferrer\">this</a> document for 12c refers to it, but seems to be the only place that it's mentioned.</p>\n<p>I've tested this using 14.1.1 and a custom provider in the DOMAIN/lib/mbeantypes dir and it works (i.e. I can use WLST to configure a custom security provider as long as I set WLST_EXT_CLASSPATH first) but don't have 12c to test that it works there.</p>\n"}],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67579271,"answer_count":2,"score":0,"last_activity_date":1694366405,"creation_date":1615550725,"question_id":66599606,"body_markdown":"I am trying to add a new custom authentication-provider with a WLST online-mode script but I get a class not found exception despite I can see my provider on the WL console.\r\n\r\n**This is the situation:**\r\n\r\n 1. I have a JAR file, it contains a custom WebLogic authentication-provider.\r\n 1. The JAR is copied under the `user_projects/domains/$DOMAIN_NAME/lib/` directory.\r\n 1. I can see the custom auth provider on the WL console, appears in the list: `Home &gt; Security Realms &gt; myrealm &gt; Providers &gt; new&gt; Type`\r\n 1. I can add this custom provider by hand via WL Console.\r\n\r\nBut I need to automate this step so I have created a WLST script for this. The relevant part of the WLST is this:\r\n\r\n    # add a new authentication provider with name of MyCustomAuthProvider\r\n    cd(&#39;/SecurityConfiguration/&#39; + _domainName + &#39;/Realms/myrealm&#39;)\r\n    cmo.createAuthenticationProvider(&#39;MyCustomAuthProvider&#39;, &#39;aa.bb.cc.MyCustomAuthProvider&#39;)\r\n    \r\n    cd(&#39;/SecurityConfiguration/&#39; + _domainName + &#39;/Realms/myrealm/AuthenticationProviders/MyCustomAuthProvider&#39;)\r\n    cmo.setControlFlag(&#39;OPTIONAL&#39;)\r\n        \r\n    # reorder authentication providers\r\n    ...\r\n\r\n**But this WLST throws the following exception:**\r\n\r\n    java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: aa.bb.cc.MyCustomAuthProvider\r\n\r\n\r\n**So I did double-check to see whether the WL sees my custom auth provider:**\r\n\r\n    wls:/offline&gt; connect(&#39;weblogic&#39;, &#39;weblogic12&#39;, &#39;t3://localhost:7001&#39;)\r\n    cd(&#39;/SecurityConfiguration/myDomain/Realms/myrealm&#39;)\r\n    ls()\r\n\r\nThe list I got is exactly the same as I expected: my class is on the list. This is the reason why I can add it using the web console.\r\n\r\n**This is the value of the AuthenticationProviderTypes:**\r\n\r\n    java.lang.String[com.bea.security.saml2.providers.SAML2IdentityAsserter,\r\n    aa.bb.cc.MyCustomAuthProvider,\r\n    eblogic.security.providers.authentication.ActiveDirectoryAuthenticator,\r\n    weblogic.security.providers.authentication.CustomDBMSAuthenticator,\r\n    eblogic.security.providers.authentication.DefaultAuthenticator,\r\n    weblogic.security.providers.authentication.DefaultIdentityAsserter, \r\n    eblogic.security.providers.authentication.IPlanetAuthenticator,\r\n    weblogic.security.providers.authentication.LDAPAuthenticator,\r\n    weblogic.security.providers.authentication.LDAPX509IdentityAsserter,\r\n    weblogic.security.providers.authentication.NegotiateIdentityAsserter,\r\n    weblogic.security.providers.authentication.NovellAuthenticator,\r\n    weblogic.security.providers.authentication.OpenLDAPAuthenticator,\r\n    weblogic.security.providers.authentication.OracleIdentityCloudIntegrator,\r\n    weblogic.security.providers.authentication.OracleInternetDirectoryAuthenticator,\r\n    weblogic.security.providers.authentication.OracleUnifiedDirectoryAuthenticator,\r\n    weblogic.security.providers.authentication.OracleVirtualDirectoryAuthenticator,\r\n    weblogic.security.providers.authentication.ReadOnlySQLAuthenticator,\r\n    weblogic.security.providers.authentication.SQLAuthenticator,\r\n    weblogic.security.providers.authentication.VirtualUserAuthenticator,\r\n    weblogic.security.providers.saml.SAMLAuthenticator,\r\n    weblogic.security.providers.saml.SAMLIdentityAsserterV2]\r\n\r\n\r\nEverything looks perfect. But then why WLST throws a `class not found` exception while trying to create it?\r\nThis is crazy.\r\n\r\nI have googled for this, but only the same issues I have found without a solution.\r\n\r\n - [here][1]\r\n\r\nWhat I missed?\r\n\r\n\r\n  [1]: https://github.com/biemond/puppet/issues/57\r\n","title":"WebLogic: add a new custom authentication-providers via WLST throws a ClassNotFoundException","body":"<p>I am trying to add a new custom authentication-provider with a WLST online-mode script but I get a class not found exception despite I can see my provider on the WL console.</p>\n<p><strong>This is the situation:</strong></p>\n<ol>\n<li>I have a JAR file, it contains a custom WebLogic authentication-provider.</li>\n<li>The JAR is copied under the <code>user_projects/domains/$DOMAIN_NAME/lib/</code> directory.</li>\n<li>I can see the custom auth provider on the WL console, appears in the list: <code>Home &gt; Security Realms &gt; myrealm &gt; Providers &gt; new&gt; Type</code></li>\n<li>I can add this custom provider by hand via WL Console.</li>\n</ol>\n<p>But I need to automate this step so I have created a WLST script for this. The relevant part of the WLST is this:</p>\n<pre><code># add a new authentication provider with name of MyCustomAuthProvider\ncd('/SecurityConfiguration/' + _domainName + '/Realms/myrealm')\ncmo.createAuthenticationProvider('MyCustomAuthProvider', 'aa.bb.cc.MyCustomAuthProvider')\n\ncd('/SecurityConfiguration/' + _domainName + '/Realms/myrealm/AuthenticationProviders/MyCustomAuthProvider')\ncmo.setControlFlag('OPTIONAL')\n    \n# reorder authentication providers\n...\n</code></pre>\n<p><strong>But this WLST throws the following exception:</strong></p>\n<pre><code>java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: aa.bb.cc.MyCustomAuthProvider\n</code></pre>\n<p><strong>So I did double-check to see whether the WL sees my custom auth provider:</strong></p>\n<pre><code>wls:/offline&gt; connect('weblogic', 'weblogic12', 't3://localhost:7001')\ncd('/SecurityConfiguration/myDomain/Realms/myrealm')\nls()\n</code></pre>\n<p>The list I got is exactly the same as I expected: my class is on the list. This is the reason why I can add it using the web console.</p>\n<p><strong>This is the value of the AuthenticationProviderTypes:</strong></p>\n<pre><code>java.lang.String[com.bea.security.saml2.providers.SAML2IdentityAsserter,\naa.bb.cc.MyCustomAuthProvider,\neblogic.security.providers.authentication.ActiveDirectoryAuthenticator,\nweblogic.security.providers.authentication.CustomDBMSAuthenticator,\neblogic.security.providers.authentication.DefaultAuthenticator,\nweblogic.security.providers.authentication.DefaultIdentityAsserter, \neblogic.security.providers.authentication.IPlanetAuthenticator,\nweblogic.security.providers.authentication.LDAPAuthenticator,\nweblogic.security.providers.authentication.LDAPX509IdentityAsserter,\nweblogic.security.providers.authentication.NegotiateIdentityAsserter,\nweblogic.security.providers.authentication.NovellAuthenticator,\nweblogic.security.providers.authentication.OpenLDAPAuthenticator,\nweblogic.security.providers.authentication.OracleIdentityCloudIntegrator,\nweblogic.security.providers.authentication.OracleInternetDirectoryAuthenticator,\nweblogic.security.providers.authentication.OracleUnifiedDirectoryAuthenticator,\nweblogic.security.providers.authentication.OracleVirtualDirectoryAuthenticator,\nweblogic.security.providers.authentication.ReadOnlySQLAuthenticator,\nweblogic.security.providers.authentication.SQLAuthenticator,\nweblogic.security.providers.authentication.VirtualUserAuthenticator,\nweblogic.security.providers.saml.SAMLAuthenticator,\nweblogic.security.providers.saml.SAMLIdentityAsserterV2]\n</code></pre>\n<p>Everything looks perfect. But then why WLST throws a <code>class not found</code> exception while trying to create it?\nThis is crazy.</p>\n<p>I have googled for this, but only the same issues I have found without a solution.</p>\n<ul>\n<li><a href=\"https://github.com/biemond/puppet/issues/57\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n<p>What I missed?</p>\n"},{"tags":["java","spring","spring-boot","file-upload","multipartform-data"],"comments":[{"owner":{"account_id":6615151,"reputation":7343,"user_id":5108695,"display_name":"Dupinder Singh"},"score":0,"creation_date":1600271233,"post_id":61320431,"comment_id":113037242,"body_markdown":"hi @Tina. I am also facing the same issue. Are you using Spring Auth in your project also? Because Without SpringAuth my Multipart Request works fine, but When I start using Auth then is Request returns 400 error","body":"hi @Tina. I am also facing the same issue. Are you using Spring Auth in your project also? Because Without SpringAuth my Multipart Request works fine, but When I start using Auth then is Request returns 400 error"}],"answers":[{"tags":[],"owner":{"account_id":10988855,"reputation":84,"user_id":8073567,"display_name":"nbalodi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587382103,"creation_date":1587382103,"answer_id":61321385,"question_id":61320431,"body_markdown":"Is it possible to change your log level to DEBUG? i.e. logging.level.org.springframework.web=DEBUG.","title":"Got almost 50% http 400 bad request error on Spring Boot 2.1 MultipartFile - file upload when enable SSL(https)","body":"<p>Is it possible to change your log level to DEBUG? i.e. logging.level.org.springframework.web=DEBUG.</p>\n"},{"tags":[],"owner":{"account_id":15126163,"reputation":2731,"user_id":10915384,"display_name":"Kunal Vohra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587383836,"creation_date":1587383836,"answer_id":61321946,"question_id":61320431,"body_markdown":"Try thism may help. Unable to see any other issue with your code.   \r\n\r\n   \r\n\r\n    @RequestBody MultipartFile[] submissions\r\n\r\nshould be \r\n    \r\n    @RequestParam(&quot;file&quot;) MultipartFile[] submissions\r\n\r\nThe files are not the request body, they are part of it and there is no built-in `HttpMessageConverter` that can convert the request to an array of `MultiPartFile`.\r\n\r\nYou can also use `MultipartHttpServletRequest`, which gives you access to the headers of the individual parts.","title":"Got almost 50% http 400 bad request error on Spring Boot 2.1 MultipartFile - file upload when enable SSL(https)","body":"<p>Try thism may help. Unable to see any other issue with your code.   </p>\n\n<pre><code>@RequestBody MultipartFile[] submissions\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>@RequestParam(\"file\") MultipartFile[] submissions\n</code></pre>\n\n<p>The files are not the request body, they are part of it and there is no built-in <code>HttpMessageConverter</code> that can convert the request to an array of <code>MultiPartFile</code>.</p>\n\n<p>You can also use <code>MultipartHttpServletRequest</code>, which gives you access to the headers of the individual parts.</p>\n"},{"tags":[],"owner":{"account_id":18346052,"reputation":11,"user_id":13361223,"display_name":"Tina"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694366145,"creation_date":1591769764,"answer_id":62296999,"question_id":61320431,"body_markdown":"Thanks everyone&#39;s reply.\r\nI think this is the bug of SpringBoot or its embed Tomcat bug in SpringBoot v2.1.x version.\r\nWhen SpringBoot v2.3.0 formal vesion released. I use the same code to upgrade to v2.3.0\r\nEverything is workable now. I use bulk test or called pressure test in file upload.\r\nIt&#39;s 100% successful now.\r\n\r\n**Update:**\r\nThe root cause is Tomcat component is not stable with Spring framework - Multipart under the https and/or http2 or Spring security (such like OAuth2) enabled.\r\n\r\nIn most cases in Spring Boot 2.3.0 - 2.3.2, the fail rate of file upload is 4 ~ 14 ~ 50%.\r\nAfter Spring Boot 2.3.5 to 2.4.0 version, the fail rate of file upload is near 50%.\r\nThe key different is the Tomcat version and Spring Security version is different among these Spring Boot version.\r\n\r\nAnother problem is the http2 protocol supported by Tomcat is not stable.\r\nIf you enable the http2 (such like setup the server.http2.enabled=true in your properties file) and use Multipart or HttpServletRequest for your file upload, the fail rate is rise to near 90% and get connection .\r\n\r\n**Conclusion:**\r\nFor anyone which face the file upload unstable problem and get ERR_CONNECTION_CLOSED and find error log about\r\n\r\norg.apache.catalina.connector.ClientAbortException: org.apache.coyote.CloseNowException: Connection [{0}], Stream [{1}], This stream is not writable\r\n\r\nCaused by: org.apache.coyote.CloseNowException: Connection [{0}], Stream [{1}], This stream is not writable\r\n\r\nCaused by: org.apache.coyote.http2.StreamException: Connection [{0}], Stream [{1}], This stream is not writable\r\n\r\nYou can try to upgrade to Spring Boot 2.4.0 and disable http2 support of Tomcat in Spring Boot by setup the server.http2.enabled=false in your properties file\r\n\r\nYou may find the stability is improved even to 100% success rate. (I tried and implemented to all my clients)\r\n\r\nIf the disable http2 support is not workable for you.\r\nYou may try to downgrade to Spring Boot 2.3.0 - 2.3.2 version or implement your file upload by HttpServletRequest (remember to disable the Multipart in Spring Boot first)\r\n\r\nYou may find related developing document [here][1]\r\nand [there][2]\r\n\r\n  [1]: https://stackoverflow.com/q/32782026/\r\n  [2]: https://stackoverflow.com/q/54813440/","title":"Got almost 50% http 400 bad request error on Spring Boot 2.1 MultipartFile - file upload when enable SSL(https)","body":"<p>Thanks everyone's reply.\nI think this is the bug of SpringBoot or its embed Tomcat bug in SpringBoot v2.1.x version.\nWhen SpringBoot v2.3.0 formal vesion released. I use the same code to upgrade to v2.3.0\nEverything is workable now. I use bulk test or called pressure test in file upload.\nIt's 100% successful now.</p>\n<p><strong>Update:</strong>\nThe root cause is Tomcat component is not stable with Spring framework - Multipart under the https and/or http2 or Spring security (such like OAuth2) enabled.</p>\n<p>In most cases in Spring Boot 2.3.0 - 2.3.2, the fail rate of file upload is 4 ~ 14 ~ 50%.\nAfter Spring Boot 2.3.5 to 2.4.0 version, the fail rate of file upload is near 50%.\nThe key different is the Tomcat version and Spring Security version is different among these Spring Boot version.</p>\n<p>Another problem is the http2 protocol supported by Tomcat is not stable.\nIf you enable the http2 (such like setup the server.http2.enabled=true in your properties file) and use Multipart or HttpServletRequest for your file upload, the fail rate is rise to near 90% and get connection .</p>\n<p><strong>Conclusion:</strong>\nFor anyone which face the file upload unstable problem and get ERR_CONNECTION_CLOSED and find error log about</p>\n<p>org.apache.catalina.connector.ClientAbortException: org.apache.coyote.CloseNowException: Connection [{0}], Stream [{1}], This stream is not writable</p>\n<p>Caused by: org.apache.coyote.CloseNowException: Connection [{0}], Stream [{1}], This stream is not writable</p>\n<p>Caused by: org.apache.coyote.http2.StreamException: Connection [{0}], Stream [{1}], This stream is not writable</p>\n<p>You can try to upgrade to Spring Boot 2.4.0 and disable http2 support of Tomcat in Spring Boot by setup the server.http2.enabled=false in your properties file</p>\n<p>You may find the stability is improved even to 100% success rate. (I tried and implemented to all my clients)</p>\n<p>If the disable http2 support is not workable for you.\nYou may try to downgrade to Spring Boot 2.3.0 - 2.3.2 version or implement your file upload by HttpServletRequest (remember to disable the Multipart in Spring Boot first)</p>\n<p>You may find related developing document <a href=\"https://stackoverflow.com/q/32782026/\">here</a>\nand <a href=\"https://stackoverflow.com/q/54813440/\">there</a></p>\n"}],"owner":{"account_id":18346052,"reputation":11,"user_id":13361223,"display_name":"Tina"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62296999,"answer_count":3,"score":0,"last_activity_date":1694366145,"creation_date":1587379068,"question_id":61320431,"body_markdown":"I have a API server which built with Spring Boot 2.1 on public domain which serve APIs and file upload as well.\r\n\r\nIn recent days, we wants to upgrade this Spring Boot server to use SSL (https).\r\nBefore we setup the SSL settings in Spring Boot. The API for file upload is workable very well (100% upload successful).\r\n\r\nAfter we setup the SSL settings in Spring Boot. The API for file upload is work but only 50% upload successful other 50% got http 400 bad request. (We sure that the problem is not related to front-end web, because we use the Swagger which bundled with Spring Boot to test can get the same result)\r\n\r\nAnd we lookup the server logs of Spring Boot. When the http 400 bad request happens, there were not have any logs about the http 400 bad request.\r\nWe study many days and survey on internet but still cannot solve this problem. Please give helps.\r\n\r\nWe already try to disable csrf (either in properties file or via config class) and many other solutions which provided on internet but still not work.\r\n\r\nEnvironment: Spring Boot 2.1.13 (which is the latest version of Spring Boot 2.1)\r\n\r\nSettings in properties file: (only added SSL setup section in properties file, and the SSL (https) is successfully on)\r\n\r\n```\r\n# SSL setup\r\nserver.ssl.key-store=classpath:keystore.p12\r\nserver.ssl.key-store-password=abcdef\r\nserver.ssl.key-store-type=PKCS12\r\nserver.ssl.key-alias=tomcat\r\nserver.ssl.enabled-protocols=TLSv1.1,TLSv1.2\r\nserver.http2.enabled=true\r\nsecurity.basic.enabled=false\r\nsecurity.enable-csrf=false\r\n\r\n## MULTIPART (MultipartProperties)\r\n# Enable multipart uploads\r\nspring.servlet.multipart.enabled = true\r\n# Threshold after which files are written to disk.\r\nspring.servlet.multipart.file-size-threshold=2KB\r\n# Max file size.\r\nspring.servlet.multipart.max-file-size=100MB\r\n# Max Request Size\r\nspring.servlet.multipart.max-request-size=115MB\r\n```\r\n\r\nMy controller for file upload:\r\n\r\n```\r\nimport io.swagger.annotations.Api;\r\nimport io.swagger.annotations.ApiOperation;\r\nimport io.swagger.annotations.SwaggerDefinition;\r\nimport io.swagger.annotations.Tag;\r\nimport java.util.Collections;\r\nimport java.util.Map;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\n@Slf4j\r\n@RestController\r\n@RequestMapping(value = &quot;/v1/fileupload&quot;)\r\n@Api(tags = {&quot;fileupload api&quot;}, value = &quot;fileupload&quot;)\r\n@SwaggerDefinition(tags = {\r\n    @Tag(name = &quot;fileupload api&quot;, description = &quot;apis for file upload&quot;)\r\n})\r\npublic class FileUploadController {\r\n\t\r\n\t@Autowired\r\n\tprivate FileUploadService fileUploadService;\r\n\t\r\n\tprivate ApiUtilHelper helper = new ApiUtilHelper();\r\n\t\r\n\t@ApiOperation(value = &quot;upload single data import file&quot;)\r\n\t@RequestMapping(\r\n\t\tvalue = &quot;/dataimport&quot;,\r\n\t\tmethod = RequestMethod.POST,,\r\n\t\tconsumes = { MediaType.MULTIPART_FORM_DATA_VALUE },\r\n\t\tproduces = { MediaType.APPLICATION_JSON_UTF8_VALUE }\r\n\t)\r\n\tpublic ResponseEntity&lt;?&gt; uploadSingleFileForDataImport(@RequestParam(&quot;file&quot;) MultipartFile file) throws FileStorageException {\r\n\t\tlog.info(&quot;Enter into uploadSingleFileForDataImport&quot;);\r\n\t\tFileUploadResponse fileUploadResponse = fileUploadService.storeFile(file, &quot;dataImport&quot;);\r\n\t\tMap&lt;String, Object&gt; additionals = Collections.singletonMap(&quot;filupload&quot;, fileUploadResponse);\r\n\t\tBasicResponse br = helper.createSuccessBaseResponse(ApiSuccessCode.CreateSuccess, additionals);\r\n\t\treturn new ResponseEntity&lt;BasicResponse&gt;(br, ApiSuccessCode.CreateSuccess.getHttpStatus());\r\n\t}\r\n```\r\n\r\nSwagger test result:\r\n\r\n```\r\nRequest URL: https://example.com:8443/v1/fileupload/dataimport\r\nRequest Method: POST\r\nStatus Code: 400 \r\nRemote Address: 111.222.111.222:8443\r\nReferrer Policy: no-referrer-when-downgrade\r\n\r\n**Response http header from Spring Boot**\r\nConnection: close\r\nContent-Length: 0\r\nDate: Mon, 20 Apr 2020 13:13:02 GMT\r\n\r\n**Request http header from Swagger**\r\naccept: application/json;charset=UTF-8\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,ja;q=0.5\r\nConnection: keep-alive\r\nContent-Length: 484098\r\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryiXmuHnaNthhXowmb\r\nCookie: _ga=GA1.2.1299976434.1580821082; JSESSIONID=2C157019D6560405CC75A5F5083DE0AE\r\nHost: example.com:8443\r\nOrigin: https://example.com:8443\r\nReferer: https://example.com:8443/swagger-ui.html\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-origin\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36\r\n\r\n```\r\n\r\n2020.04.20 13:44 (UTC time) supplement info as below:\r\nThanks @nbalodi,\r\nWhen I setup logging.level.org.springframework.web=DEBUG. I got the error log now. Logs attached as below:\r\n```\r\nHttpEntityMethodProcessor : No match for [application/json;charset=UTF-8], supported: []\r\nExceptionHandlerExceptionResolver : Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part &#39;file&#39; is not present]\r\nDispatcherServlet : Completed 400 BAD_REQUEST\r\n```\r\nThe weird part is this error situation is only happen when we use the ssl settings as I described above.","title":"Got almost 50% http 400 bad request error on Spring Boot 2.1 MultipartFile - file upload when enable SSL(https)","body":"<p>I have a API server which built with Spring Boot 2.1 on public domain which serve APIs and file upload as well.</p>\n\n<p>In recent days, we wants to upgrade this Spring Boot server to use SSL (https).\nBefore we setup the SSL settings in Spring Boot. The API for file upload is workable very well (100% upload successful).</p>\n\n<p>After we setup the SSL settings in Spring Boot. The API for file upload is work but only 50% upload successful other 50% got http 400 bad request. (We sure that the problem is not related to front-end web, because we use the Swagger which bundled with Spring Boot to test can get the same result)</p>\n\n<p>And we lookup the server logs of Spring Boot. When the http 400 bad request happens, there were not have any logs about the http 400 bad request.\nWe study many days and survey on internet but still cannot solve this problem. Please give helps.</p>\n\n<p>We already try to disable csrf (either in properties file or via config class) and many other solutions which provided on internet but still not work.</p>\n\n<p>Environment: Spring Boot 2.1.13 (which is the latest version of Spring Boot 2.1)</p>\n\n<p>Settings in properties file: (only added SSL setup section in properties file, and the SSL (https) is successfully on)</p>\n\n<pre><code># SSL setup\nserver.ssl.key-store=classpath:keystore.p12\nserver.ssl.key-store-password=abcdef\nserver.ssl.key-store-type=PKCS12\nserver.ssl.key-alias=tomcat\nserver.ssl.enabled-protocols=TLSv1.1,TLSv1.2\nserver.http2.enabled=true\nsecurity.basic.enabled=false\nsecurity.enable-csrf=false\n\n## MULTIPART (MultipartProperties)\n# Enable multipart uploads\nspring.servlet.multipart.enabled = true\n# Threshold after which files are written to disk.\nspring.servlet.multipart.file-size-threshold=2KB\n# Max file size.\nspring.servlet.multipart.max-file-size=100MB\n# Max Request Size\nspring.servlet.multipart.max-request-size=115MB\n</code></pre>\n\n<p>My controller for file upload:</p>\n\n<pre><code>import io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport io.swagger.annotations.SwaggerDefinition;\nimport io.swagger.annotations.Tag;\nimport java.util.Collections;\nimport java.util.Map;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\n@Slf4j\n@RestController\n@RequestMapping(value = \"/v1/fileupload\")\n@Api(tags = {\"fileupload api\"}, value = \"fileupload\")\n@SwaggerDefinition(tags = {\n    @Tag(name = \"fileupload api\", description = \"apis for file upload\")\n})\npublic class FileUploadController {\n\n    @Autowired\n    private FileUploadService fileUploadService;\n\n    private ApiUtilHelper helper = new ApiUtilHelper();\n\n    @ApiOperation(value = \"upload single data import file\")\n    @RequestMapping(\n        value = \"/dataimport\",\n        method = RequestMethod.POST,,\n        consumes = { MediaType.MULTIPART_FORM_DATA_VALUE },\n        produces = { MediaType.APPLICATION_JSON_UTF8_VALUE }\n    )\n    public ResponseEntity&lt;?&gt; uploadSingleFileForDataImport(@RequestParam(\"file\") MultipartFile file) throws FileStorageException {\n        log.info(\"Enter into uploadSingleFileForDataImport\");\n        FileUploadResponse fileUploadResponse = fileUploadService.storeFile(file, \"dataImport\");\n        Map&lt;String, Object&gt; additionals = Collections.singletonMap(\"filupload\", fileUploadResponse);\n        BasicResponse br = helper.createSuccessBaseResponse(ApiSuccessCode.CreateSuccess, additionals);\n        return new ResponseEntity&lt;BasicResponse&gt;(br, ApiSuccessCode.CreateSuccess.getHttpStatus());\n    }\n</code></pre>\n\n<p>Swagger test result:</p>\n\n<pre><code>Request URL: https://example.com:8443/v1/fileupload/dataimport\nRequest Method: POST\nStatus Code: 400 \nRemote Address: 111.222.111.222:8443\nReferrer Policy: no-referrer-when-downgrade\n\n**Response http header from Spring Boot**\nConnection: close\nContent-Length: 0\nDate: Mon, 20 Apr 2020 13:13:02 GMT\n\n**Request http header from Swagger**\naccept: application/json;charset=UTF-8\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,ja;q=0.5\nConnection: keep-alive\nContent-Length: 484098\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryiXmuHnaNthhXowmb\nCookie: _ga=GA1.2.1299976434.1580821082; JSESSIONID=2C157019D6560405CC75A5F5083DE0AE\nHost: example.com:8443\nOrigin: https://example.com:8443\nReferer: https://example.com:8443/swagger-ui.html\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36\n\n</code></pre>\n\n<p>2020.04.20 13:44 (UTC time) supplement info as below:\nThanks @nbalodi,\nWhen I setup logging.level.org.springframework.web=DEBUG. I got the error log now. Logs attached as below:</p>\n\n<pre><code>HttpEntityMethodProcessor : No match for [application/json;charset=UTF-8], supported: []\nExceptionHandlerExceptionResolver : Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part 'file' is not present]\nDispatcherServlet : Completed 400 BAD_REQUEST\n</code></pre>\n\n<p>The weird part is this error situation is only happen when we use the ssl settings as I described above.</p>\n"},{"tags":["java","android","kotlin","android-viewmodel"],"comments":[{"owner":{"account_id":5442381,"reputation":16756,"user_id":4409113,"accept_rate":88,"display_name":"ʍѳђઽ૯ท"},"score":1,"creation_date":1537304049,"post_id":52394416,"comment_id":91734012,"body_markdown":"Would you paste the logcat which crash occured? Not just a line of error? Thanks. However I&#39;m suspecting that this might cause the issue: `public WordViewModel(Application application)`","body":"Would you paste the logcat which crash occured? Not just a line of error? Thanks. However I&#39;m suspecting that this might cause the issue: <code>public WordViewModel(Application application)</code>"},{"owner":{"account_id":10856877,"reputation":103,"user_id":7982964,"display_name":"Mwen Rele"},"score":0,"creation_date":1537305020,"post_id":52394416,"comment_id":91734369,"body_markdown":"Posted the whole error.","body":"Posted the whole error."},{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1537305209,"post_id":52394416,"comment_id":91734452,"body_markdown":"The error seems unrelated to ViewModels: `Caused by: java.lang.RuntimeException: cannot find implementation for com.meme.archcompwordlist.room.WordRoomDatabase. WordRoomDatabase_Impl`","body":"The error seems unrelated to ViewModels: <code>Caused by: java.lang.RuntimeException: cannot find implementation for com.meme.archcompwordlist.room.WordRoomDatabase. WordRoomDatabase_Impl</code>"},{"owner":{"account_id":10856877,"reputation":103,"user_id":7982964,"display_name":"Mwen Rele"},"score":0,"creation_date":1537307722,"post_id":52394416,"comment_id":91735315,"body_markdown":"Yeah, thanks. I was curious why you asked for the whole trace and so look deeper into the scary stuff and found that I needed some gradle dependencies to start: \n    **annotationProcessor  &quot;android.arch.persistence.room:compiler:$lifecycle_version&quot;\n    kapt &quot;android.arch.persistence.room:compiler:$lifecycle_version&quot;** My code is in a better state now","body":"Yeah, thanks. I was curious why you asked for the whole trace and so look deeper into the scary stuff and found that I needed some gradle dependencies to start:      <b>annotationProcessor  &quot;android.arch.persistence.room:compiler:$lifecycle_version&quot;     kapt &quot;android.arch.persistence.room:compiler:$lifecycle_version&quot;</b> My code is in a better state now"}],"answers":[{"tags":[],"owner":{"account_id":7916116,"reputation":263,"user_id":5978486,"display_name":"humanheima"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1694365870,"creation_date":1583993556,"answer_id":60648506,"question_id":52394416,"body_markdown":"I met the same problem and find resolution from https://stackoverflow.com/q/56412140/\r\n\r\nYou should pass a `ViewModelProvider.AndroidViewModelFactory` to `ViewModelProvider` as follow:\r\n\r\n```\r\nWordViewModel model = new ViewModelProvider(this, new ViewModelProvider.AndroidViewModelFactory(getApplication())).get(WordViewModel.class);\r\n```","title":"Cannot create an instance of subclass of AndroidViewModel","body":"<p>I met the same problem and find resolution from <a href=\"https://stackoverflow.com/q/56412140/\">How to fix &#39;Cannot create an instance of ViewModel class&#39;?</a></p>\n<p>You should pass a <code>ViewModelProvider.AndroidViewModelFactory</code> to <code>ViewModelProvider</code> as follow:</p>\n<pre><code>WordViewModel model = new ViewModelProvider(this, new ViewModelProvider.AndroidViewModelFactory(getApplication())).get(WordViewModel.class);\n</code></pre>\n"}],"owner":{"account_id":10856877,"reputation":103,"user_id":7982964,"display_name":"Mwen Rele"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1074,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1694365870,"creation_date":1537303746,"question_id":52394416,"body_markdown":"My ViewModel class is in Java and my Activity class is in Kotlin. I am getting the error \r\n\r\n&gt; 09-18 14:01:32.737 14082-14082/com.meme.archcompwordlist\r\n&gt; E/AndroidRuntime: FATAL EXCEPTION: main Process:\r\n&gt; com.meme.archcompwordlist, PID: 14082 java.lang.RuntimeException:\r\n&gt; Unable to start activity\r\n&gt; ComponentInfo{com.meme.archcompwordlist/com.meme.archcompwordlist.MainActivity}:\r\n&gt; java.lang.RuntimeException: Cannot create an instance of class\r\n&gt; com.meme.archcompwordlist.WordViewModel\r\n&gt;     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\r\n&gt;     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\r\n&gt;     at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n&gt;     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\r\n&gt;     at android.os.Handler.dispatchMessage(Handler.java:102)\r\n&gt;     at android.os.Looper.loop(Looper.java:154)\r\n&gt;     at android.app.ActivityThread.main(ActivityThread.java:6119)\r\n&gt;     at java.lang.reflect.Method.invoke(Native Method)\r\n&gt;     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\r\n&gt;     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)  Caused by: java.lang.RuntimeException: Cannot create an instance of\r\n&gt; class com.meme.archcompwordlist.WordViewModel\r\n&gt;     at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:207)\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)\r\n&gt;     at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37)\r\n&gt;     at android.app.Activity.performCreate(Activity.java:6679)\r\n&gt;     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\r\n&gt;     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)\r\n&gt;     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)&#160;\r\n&gt;     at android.app.ActivityThread.-wrap12(ActivityThread.java)&#160;\r\n&gt;     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)&#160;\r\n&gt;     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n&gt;     at android.os.Looper.loop(Looper.java:154)&#160;\r\n&gt;     at android.app.ActivityThread.main(ActivityThread.java:6119)&#160;\r\n&gt;     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)&#160;  Caused by: java.lang.reflect.InvocationTargetException\r\n&gt;     at java.lang.reflect.Constructor.newInstance0(Native Method)\r\n&gt;     at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\r\n&gt;     at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199)\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)&#160;\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)&#160;\r\n&gt;     at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37)&#160;\r\n&gt;     at android.app.Activity.performCreate(Activity.java:6679)&#160;\r\n&gt;     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)&#160;\r\n&gt;     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)&#160;\r\n&gt;     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)&#160;\r\n&gt;     at android.app.ActivityThread.-wrap12(ActivityThread.java)&#160;\r\n&gt;     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)&#160;\r\n&gt;     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n&gt;     at android.os.Looper.loop(Looper.java:154)&#160;\r\n&gt;     at android.app.ActivityThread.main(ActivityThread.java:6119)&#160;\r\n&gt;     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)&#160;  Caused by: java.lang.RuntimeException: cannot find implementation for\r\n&gt; com.meme.archcompwordlist.room.WordRoomDatabase. WordRoomDatabase_Impl\r\n&gt; does not exist\r\n&gt;     at android.arch.persistence.room.Room.getGeneratedImplementation(Room.java:93)\r\n&gt;     at android.arch.persistence.room.RoomDatabase$Builder.build(RoomDatabase.java:630)\r\n&gt;     at com.meme.archcompwordlist.room.WordRoomDatabase.getRoomDatabase(WordRoomDatabase.java:22)\r\n&gt;     at com.meme.archcompwordlist.WordRepository.&lt;init&gt;(WordRepository.java:21)\r\n&gt;     at com.meme.archcompwordlist.WordViewModel.&lt;init&gt;(WordViewModel.java:22)\r\n&gt;     at java.lang.reflect.Constructor.newInstance0(Native Method)&#160;\r\n&gt;     at java.lang.reflect.Constructor.newInstance(Constructor.java:430)&#160;\r\n&gt;     at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199)&#160;\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)&#160;\r\n&gt;     at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)&#160;\r\n&gt;     at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37)&#160;\r\n&gt;     at android.app.Activity.performCreate(Activity.java:6679)&#160;\r\n&gt;     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)&#160;\r\n&gt;     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)&#160;\r\n&gt;     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)&#160;\r\n&gt;     at android.app.ActivityThread.-wrap12(ActivityThread.java)&#160;\r\n&gt;     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)&#160;\r\n&gt;     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n&gt;     at android.os.Looper.loop(Looper.java:154)&#160;\r\n&gt;     at android.app.ActivityThread.main(ActivityThread.java:6119)&#160;\r\n&gt;     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)&#160;\r\n&gt;     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\r\n\r\n\r\nHere is my AndroidViewModel class\r\n\r\n    public class WordViewModel extends AndroidViewModel {\r\n    \r\n        private WordRepository repository;\r\n    \r\n        private LiveData&lt;List&lt;WordEntity&gt;&gt; allWords;\r\n    \r\n        public WordViewModel(Application application){\r\n            super(application);\r\n            repository = new WordRepository(application);\r\n            allWords = repository.getAllWords();\r\n        }\r\n    \r\n        public LiveData&lt;List&lt;WordEntity&gt;&gt; getAllWords(){\r\n            return allWords;\r\n        }\r\n    \r\n        public void insert(WordEntity word){\r\n            repository.insert(word);\r\n        }\r\n    \r\n        public void deleteAllWords() {\r\n            repository.deleteAllWords();\r\n        }\r\n    }\r\n\r\nAnd here is my activity class\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n    \r\n        private lateinit var wordViewModel:WordViewModel\r\n        private lateinit var newWord:EditText\r\n        private lateinit var recyclerView:RecyclerView\r\n        private lateinit var adapter:WordAdapter\r\n    \r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            setSupportActionBar(toolbar)\r\n    \r\n            adapter= WordAdapter()\r\n            recyclerView= findViewById&lt;RecyclerView&gt;(R.id.wordList)\r\n            recyclerView.adapter=adapter\r\n    \r\n            //establish a connection to the current ViewModel\r\n            wordViewModel= ViewModelProviders.of(this).get(WordViewModel::class.java)\r\n    \r\n            newWord = findViewById&lt;EditText&gt;(R.id.insertWord);\r\n            findViewById&lt;Button&gt;(R.id.submitWord).setOnClickListener {\r\n                 fun onClick(v:View?){\r\n                    if(!TextUtils.isEmpty(newWord.getText())){\r\n                        wordViewModel.insert(WordEntity(newWord.getText().toString()))\r\n                    }\r\n                }\r\n            }\r\n            findViewById&lt;Button&gt;(R.id.deleteWords).setOnClickListener{\r\n                fun onClick(v:View?){\r\n                    wordViewModel.deleteAllWords()\r\n                }\r\n            }\r\n    \r\n    \r\n            wordViewModel.getAllWords().observe(this,Observer&lt;List&lt;WordEntity&gt;&gt;(){\r\n                fun onChanged(words:List&lt;WordEntity&gt;){\r\n                adapter.setWords(words)\r\n            }\r\n            })\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nCould someone please help me identify what I am doing wrong? I am trying to pick-up Architecture Components after a long time away from Android. I am not entirely clear how to proceed.","title":"Cannot create an instance of subclass of AndroidViewModel","body":"<p>My ViewModel class is in Java and my Activity class is in Kotlin. I am getting the error </p>\n\n<blockquote>\n  <p>09-18 14:01:32.737 14082-14082/com.meme.archcompwordlist\n  E/AndroidRuntime: FATAL EXCEPTION: main Process:\n  com.meme.archcompwordlist, PID: 14082 java.lang.RuntimeException:\n  Unable to start activity\n  ComponentInfo{com.meme.archcompwordlist/com.meme.archcompwordlist.MainActivity}:\n  java.lang.RuntimeException: Cannot create an instance of class\n  com.meme.archcompwordlist.WordViewModel\n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\n      at android.app.ActivityThread.-wrap12(ActivityThread.java)\n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\n      at android.os.Handler.dispatchMessage(Handler.java:102)\n      at android.os.Looper.loop(Looper.java:154)\n      at android.app.ActivityThread.main(ActivityThread.java:6119)\n      at java.lang.reflect.Method.invoke(Native Method)\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)  Caused by: java.lang.RuntimeException: Cannot create an instance of\n  class com.meme.archcompwordlist.WordViewModel\n      at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:207)\n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)\n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)\n      at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37)\n      at android.app.Activity.performCreate(Activity.java:6679)\n      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)\n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726) \n      at android.app.ActivityThread.-wrap12(ActivityThread.java) \n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477) \n      at android.os.Handler.dispatchMessage(Handler.java:102) \n      at android.os.Looper.loop(Looper.java:154) \n      at android.app.ActivityThread.main(ActivityThread.java:6119) \n      at java.lang.reflect.Method.invoke(Native Method) \n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886) \n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)   Caused by: java.lang.reflect.InvocationTargetException\n      at java.lang.reflect.Constructor.newInstance0(Native Method)\n      at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\n      at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199)\n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134) \n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102) \n      at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37) \n      at android.app.Activity.performCreate(Activity.java:6679) \n      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118) \n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618) \n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726) \n      at android.app.ActivityThread.-wrap12(ActivityThread.java) \n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477) \n      at android.os.Handler.dispatchMessage(Handler.java:102) \n      at android.os.Looper.loop(Looper.java:154) \n      at android.app.ActivityThread.main(ActivityThread.java:6119) \n      at java.lang.reflect.Method.invoke(Native Method) \n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886) \n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)   Caused by: java.lang.RuntimeException: cannot find implementation for\n  com.meme.archcompwordlist.room.WordRoomDatabase. WordRoomDatabase_Impl\n  does not exist\n      at android.arch.persistence.room.Room.getGeneratedImplementation(Room.java:93)\n      at android.arch.persistence.room.RoomDatabase$Builder.build(RoomDatabase.java:630)\n      at com.meme.archcompwordlist.room.WordRoomDatabase.getRoomDatabase(WordRoomDatabase.java:22)\n      at com.meme.archcompwordlist.WordRepository.(WordRepository.java:21)\n      at com.meme.archcompwordlist.WordViewModel.(WordViewModel.java:22)\n      at java.lang.reflect.Constructor.newInstance0(Native Method) \n      at java.lang.reflect.Constructor.newInstance(Constructor.java:430) \n      at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199) \n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134) \n      at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102) \n      at com.meme.archcompwordlist.MainActivity.onCreate(MainActivity.kt:37) \n      at android.app.Activity.performCreate(Activity.java:6679) \n      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118) \n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618) \n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726) \n      at android.app.ActivityThread.-wrap12(ActivityThread.java) \n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477) \n      at android.os.Handler.dispatchMessage(Handler.java:102) \n      at android.os.Looper.loop(Looper.java:154) \n      at android.app.ActivityThread.main(ActivityThread.java:6119) \n      at java.lang.reflect.Method.invoke(Native Method) \n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886) \n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)</p>\n</blockquote>\n\n<p>Here is my AndroidViewModel class</p>\n\n<pre><code>public class WordViewModel extends AndroidViewModel {\n\n    private WordRepository repository;\n\n    private LiveData&lt;List&lt;WordEntity&gt;&gt; allWords;\n\n    public WordViewModel(Application application){\n        super(application);\n        repository = new WordRepository(application);\n        allWords = repository.getAllWords();\n    }\n\n    public LiveData&lt;List&lt;WordEntity&gt;&gt; getAllWords(){\n        return allWords;\n    }\n\n    public void insert(WordEntity word){\n        repository.insert(word);\n    }\n\n    public void deleteAllWords() {\n        repository.deleteAllWords();\n    }\n}\n</code></pre>\n\n<p>And here is my activity class</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private lateinit var wordViewModel:WordViewModel\n    private lateinit var newWord:EditText\n    private lateinit var recyclerView:RecyclerView\n    private lateinit var adapter:WordAdapter\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        setSupportActionBar(toolbar)\n\n        adapter= WordAdapter()\n        recyclerView= findViewById&lt;RecyclerView&gt;(R.id.wordList)\n        recyclerView.adapter=adapter\n\n        //establish a connection to the current ViewModel\n        wordViewModel= ViewModelProviders.of(this).get(WordViewModel::class.java)\n\n        newWord = findViewById&lt;EditText&gt;(R.id.insertWord);\n        findViewById&lt;Button&gt;(R.id.submitWord).setOnClickListener {\n             fun onClick(v:View?){\n                if(!TextUtils.isEmpty(newWord.getText())){\n                    wordViewModel.insert(WordEntity(newWord.getText().toString()))\n                }\n            }\n        }\n        findViewById&lt;Button&gt;(R.id.deleteWords).setOnClickListener{\n            fun onClick(v:View?){\n                wordViewModel.deleteAllWords()\n            }\n        }\n\n\n        wordViewModel.getAllWords().observe(this,Observer&lt;List&lt;WordEntity&gt;&gt;(){\n            fun onChanged(words:List&lt;WordEntity&gt;){\n            adapter.setWords(words)\n        }\n        })\n\n    }\n\n}\n</code></pre>\n\n<p>Could someone please help me identify what I am doing wrong? I am trying to pick-up Architecture Components after a long time away from Android. I am not entirely clear how to proceed.</p>\n"},{"tags":["java","spring-boot","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":153343,"reputation":1086,"user_id":368532,"accept_rate":70,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694365678,"creation_date":1694365678,"answer_id":77077153,"question_id":77068917,"body_markdown":"Configure the following property ([source][1])\r\n\r\n    server.tomcat.max-http-form-post-size\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.max-http-form-post-size","title":"How to set up max post size for Tomcat in Spring boot","body":"<p>Configure the following property (<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.max-http-form-post-size\" rel=\"nofollow noreferrer\">source</a>)</p>\n<pre><code>server.tomcat.max-http-form-post-size\n</code></pre>\n"}],"owner":{"account_id":19170500,"reputation":165,"user_id":14004337,"display_name":"Raman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694365678,"creation_date":1694194713,"question_id":77068917,"body_markdown":"I have a client server application using Spring Shell on the client side and Spring boot(2.5.7) on the server side. We use Tomcat server and use TomcatServletWebServerFactory to create it. I want to provide a specific value for max post size to the server programmatically. I read some articles and can see that Connector class can be used to customize the server. However I am not finding a suitable code. Can someone please guide?","title":"How to set up max post size for Tomcat in Spring boot","body":"<p>I have a client server application using Spring Shell on the client side and Spring boot(2.5.7) on the server side. We use Tomcat server and use TomcatServletWebServerFactory to create it. I want to provide a specific value for max post size to the server programmatically. I read some articles and can see that Connector class can be used to customize the server. However I am not finding a suitable code. Can someone please guide?</p>\n"},{"tags":["java","executable-jar","owl-api"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694122770,"post_id":77062343,"comment_id":135853723,"body_markdown":"Looks like the fat jar classloading is having difficulties. My guess would be that you omitted some necessary item(s) when creating it","body":"Looks like the fat jar classloading is having difficulties. My guess would be that you omitted some necessary item(s) when creating it"},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1694189181,"post_id":77062343,"comment_id":135863225,"body_markdown":"Please share how you&#39;re combining the jars. The error is related to missing resources that are part of the OWLAPI jar files (not their dependencies). Similarly, there are resource files with the same names but different content in different OWLAPI jars, so merging them requires the tool to be aware.","body":"Please share how you&#39;re combining the jars. The error is related to missing resources that are part of the OWLAPI jar files (not their dependencies). Similarly, there are resource files with the same names but different content in different OWLAPI jars, so merging them requires the tool to be aware."},{"owner":{"account_id":27849015,"reputation":1,"user_id":21263885,"display_name":"Basma Moukhtar Hussein"},"score":0,"creation_date":1694526923,"post_id":77062343,"comment_id":135900609,"body_markdown":"I extract the project from eclipse as a runnable jar file and choose to &quot;package the required libraries into jar&quot; option","body":"I extract the project from eclipse as a runnable jar file and choose to &quot;package the required libraries into jar&quot; option"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694527221,"post_id":77062343,"comment_id":135900701,"body_markdown":"If this isn&#39;t working, I&#39;d be inclined to make it into a Maven project (assuming it isn&#39;t already - please say if I&#39;m wrong) and then you have various options to make at *somewhat* less proprietary way of making fat jars","body":"If this isn&#39;t working, I&#39;d be inclined to make it into a Maven project (assuming it isn&#39;t already - please say if I&#39;m wrong) and then you have various options to make at <i>somewhat</i> less proprietary way of making fat jars"},{"owner":{"account_id":27849015,"reputation":1,"user_id":21263885,"display_name":"Basma Moukhtar Hussein"},"score":0,"creation_date":1694617338,"post_id":77062343,"comment_id":135915467,"body_markdown":"It&#39;s not a maven project actually. I will give it a try.  Thanks a lot.","body":"It&#39;s not a maven project actually. I will give it a try.  Thanks a lot."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694617509,"post_id":77062343,"comment_id":135915510,"body_markdown":"OK. I use Maven Shade personally","body":"OK. I use Maven Shade personally"}],"owner":{"account_id":27849015,"reputation":1,"user_id":21263885,"display_name":"Basma Moukhtar Hussein"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694365379,"creation_date":1694114854,"question_id":77062343,"body_markdown":"I am developing a java application that uses the owl api (v 5.1.19). Everything works fine when I run the app from eclipse.\r\n\r\n\r\nI need to extract the app as an executable jar file. But when I do so and run the jar file, the owl api throws the following exception.\r\nNote that all the dependencies needed by the owl api are extracted in the jar file.\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)\r\n    Caused by: java.lang.NullPointerException\r\n        at java.base/java.util.Objects.requireNonNull(Unknown Source)\r\n        at java.base/java.util.Optional.&lt;init&gt;(Unknown Source)\r\n        at java.base/java.util.Optional.of(Unknown Source)\r\n        at java.base/java.util.stream.FindOps$FindSink$OfRef.get(Unknown Source)\r\n        at java.base/java.util.stream.FindOps$FindSink$OfRef.get(Unknown Source)\r\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n        at java.base/java.util.stream.ReferencePipeline.findAny(Unknown Source)\r\n       at org.semanticweb.owlapi.utilities.Injector.getImplementation(Injector.java:246)\r\n        at org.semanticweb.owlapi.apibinding.OWLManager.createOWLOntologyManager(OWLManager.java:119)\r\n        at utils.OntologyUtils.loadOntology(OntologyUtils.java:251)\r\n        at persistence.OntologyDAO.loadWholeOntology(OntologyDAO.java:31)\r\n        at application.OntologyHandler.&lt;init&gt;(OntologyHandler.java:21)\r\n        at application.RecommendationAlgorithm.&lt;init&gt;(RecommendationAlgorithm.java:42)\r\n        at ui.MainPage.&lt;init&gt;(MainPage.java:37)\r\n        at ui.TestUI.main(TestUI.java:9)\r\n```","title":"include owl api jar files into an executable jar file","body":"<p>I am developing a java application that uses the owl api (v 5.1.19). Everything works fine when I run the app from eclipse.</p>\n<p>I need to extract the app as an executable jar file. But when I do so and run the jar file, the owl api throws the following exception.\nNote that all the dependencies needed by the owl api are extracted in the jar file.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)\n    Caused by: java.lang.NullPointerException\n        at java.base/java.util.Objects.requireNonNull(Unknown Source)\n        at java.base/java.util.Optional.&lt;init&gt;(Unknown Source)\n        at java.base/java.util.Optional.of(Unknown Source)\n        at java.base/java.util.stream.FindOps$FindSink$OfRef.get(Unknown Source)\n        at java.base/java.util.stream.FindOps$FindSink$OfRef.get(Unknown Source)\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n        at java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n        at java.base/java.util.stream.ReferencePipeline.findAny(Unknown Source)\n       at org.semanticweb.owlapi.utilities.Injector.getImplementation(Injector.java:246)\n        at org.semanticweb.owlapi.apibinding.OWLManager.createOWLOntologyManager(OWLManager.java:119)\n        at utils.OntologyUtils.loadOntology(OntologyUtils.java:251)\n        at persistence.OntologyDAO.loadWholeOntology(OntologyDAO.java:31)\n        at application.OntologyHandler.&lt;init&gt;(OntologyHandler.java:21)\n        at application.RecommendationAlgorithm.&lt;init&gt;(RecommendationAlgorithm.java:42)\n        at ui.MainPage.&lt;init&gt;(MainPage.java:37)\n        at ui.TestUI.main(TestUI.java:9)\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":153343,"reputation":1086,"user_id":368532,"accept_rate":70,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694364990,"creation_date":1694364990,"answer_id":77077110,"question_id":77076292,"body_markdown":"You can&#39;t use subqueries in select clause of jpql expression (see [this][1]), this explains the error.\r\n\r\nYou have to declare one to many relation anyway if you wish to achieve this result, but you can mark it as lazy, so it will not be fetched unless explicitly requested.\r\n\r\n  [1]: https://openjpa.apache.org/builds/2.4.2/apache-openjpa/docs/jpa_langref.html#jpa_langref_select_clause","title":"Is it possible to get all child entites without using @OneToMany annotation in one query?","body":"<p>You can't use subqueries in select clause of jpql expression (see <a href=\"https://openjpa.apache.org/builds/2.4.2/apache-openjpa/docs/jpa_langref.html#jpa_langref_select_clause\" rel=\"nofollow noreferrer\">this</a>), this explains the error.</p>\n<p>You have to declare one to many relation anyway if you wish to achieve this result, but you can mark it as lazy, so it will not be fetched unless explicitly requested.</p>\n"}],"owner":{"account_id":12206881,"reputation":840,"user_id":8909722,"display_name":"monstereo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694364990,"creation_date":1694352237,"question_id":77076292,"body_markdown":"Let&#39;s assume that I have following entities:\r\n\r\n- **UserEntities**:\r\n\r\n```java\r\n@Embeddable\r\n@Data\r\npublic class ContactInformation implements Serializable {\r\n\r\n    @Column()\r\n    private String name;\r\n\r\n    @Column()\r\n    private String surname;\r\n\r\n}\r\n\r\npublic class UserEntity {\r\n    @Embedded\r\n    private ContactInformation contactInformation;\r\n\r\n    @Column()\r\n    @NotEmpty\r\n    private String email;\r\n\r\n    @Column()\r\n    @NotEmpty\r\n    private String password;\r\n}\r\n```\r\n\r\n- And **UserHobbyEntity**:\r\n\r\n```java\r\npublic class UserHobbyEntity extends BaseEntity {\r\n\r\n    @Column(name = )\r\n    @NotEmpty\r\n    private String hobbyName;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    private UserEntity userEntity;\r\n}\r\n```\r\n\r\nNow I want to get all users (using paginate) with his/her hobbies without using `@OneToMany` and map to new class called `SearchUserModel`:\r\n\r\n```java\r\npublic class SearchUserModel {\r\n    private String userId;\r\n    private String name;\r\n    private String surname;\r\n    private List&lt;String&gt; hobbies;\r\n    public SearchUserModel(String userId,\r\n                           String name, String surname,\r\n                           List&lt;String&gt; hobbies) {\r\n        this.userId = userId;\r\n        this.name = name;\r\n        this.surname = surname;\r\n        this.hobbies = hobbies;\r\n    }\r\n}\r\n```\r\n\r\nWhen I call the following repository method, spring boot says that **&quot; Could not determine appropriate instantiation strategy - no matching constructor found and one or more arguments did not define alias for bean-injection&quot;**:\r\n\r\n```java\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;UserEntity, String&gt; {\r\n    @Query(&quot;&quot;&quot;\r\n            SELECT new com.package.to.SearchUserModel(\r\n              user.id,\r\n              user.contactInformation.name,\r\n              user.contactInformation.surname,\r\n              (SELECT uh.hobbyName FROM UserHobbyEntity uh WHERE uh.userEntity.id = user.id)\r\n            )\r\n            FROM UserEntity user\r\n            WHERE user.id != :userId\r\n            &quot;&quot;&quot;)\r\n    Page&lt;SearchUserModel&gt; getUsersForUser(String userId, Pageable pageable);\r\n}\r\n```\r\n\r\nWhen i changed `List&lt;String&gt; hobbies` to `String hobby`, it works but I want to get all hobbies:\r\n\r\n```java\r\npublic class SearchUserModel {\r\n    private String userId;\r\n    private String name;\r\n    private String surname;\r\n    \r\n    // this is working but i want to get all hobbies for each user\r\n    public SearchUserModel(String userId,\r\n                           String name, String surname,\r\n                           String hobby) {\r\n        this.userId = userId;\r\n        this.name = name;\r\n        this.surname = surname;\r\n        \r\n    }\r\n}\r\n```","title":"Is it possible to get all child entites without using @OneToMany annotation in one query?","body":"<p>Let's assume that I have following entities:</p>\n<ul>\n<li><strong>UserEntities</strong>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Embeddable\n@Data\npublic class ContactInformation implements Serializable {\n\n    @Column()\n    private String name;\n\n    @Column()\n    private String surname;\n\n}\n\npublic class UserEntity {\n    @Embedded\n    private ContactInformation contactInformation;\n\n    @Column()\n    @NotEmpty\n    private String email;\n\n    @Column()\n    @NotEmpty\n    private String password;\n}\n</code></pre>\n<ul>\n<li>And <strong>UserHobbyEntity</strong>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserHobbyEntity extends BaseEntity {\n\n    @Column(name = )\n    @NotEmpty\n    private String hobbyName;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private UserEntity userEntity;\n}\n</code></pre>\n<p>Now I want to get all users (using paginate) with his/her hobbies without using <code>@OneToMany</code> and map to new class called <code>SearchUserModel</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SearchUserModel {\n    private String userId;\n    private String name;\n    private String surname;\n    private List&lt;String&gt; hobbies;\n    public SearchUserModel(String userId,\n                           String name, String surname,\n                           List&lt;String&gt; hobbies) {\n        this.userId = userId;\n        this.name = name;\n        this.surname = surname;\n        this.hobbies = hobbies;\n    }\n}\n</code></pre>\n<p>When I call the following repository method, spring boot says that <strong>&quot; Could not determine appropriate instantiation strategy - no matching constructor found and one or more arguments did not define alias for bean-injection&quot;</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface UserRepository extends JpaRepository&lt;UserEntity, String&gt; {\n    @Query(&quot;&quot;&quot;\n            SELECT new com.package.to.SearchUserModel(\n              user.id,\n              user.contactInformation.name,\n              user.contactInformation.surname,\n              (SELECT uh.hobbyName FROM UserHobbyEntity uh WHERE uh.userEntity.id = user.id)\n            )\n            FROM UserEntity user\n            WHERE user.id != :userId\n            &quot;&quot;&quot;)\n    Page&lt;SearchUserModel&gt; getUsersForUser(String userId, Pageable pageable);\n}\n</code></pre>\n<p>When i changed <code>List&lt;String&gt; hobbies</code> to <code>String hobby</code>, it works but I want to get all hobbies:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SearchUserModel {\n    private String userId;\n    private String name;\n    private String surname;\n    \n    // this is working but i want to get all hobbies for each user\n    public SearchUserModel(String userId,\n                           String name, String surname,\n                           String hobby) {\n        this.userId = userId;\n        this.name = name;\n        this.surname = surname;\n        \n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":32380,"reputation":134937,"user_id":89806,"accept_rate":58,"display_name":"moinudin"},"score":1,"creation_date":1294190682,"post_id":4600034,"comment_id":5054433,"body_markdown":"http://joda-time.sourceforge.net/","body":"<a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow noreferrer\">joda-time.sourceforge.net</a>"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":3,"creation_date":1605092086,"post_id":4600034,"comment_id":114544355,"body_markdown":"**To future readers**: this question was asked in 2011, before Java 8 existed, which ships with an implementation of [JSR 310](https://jcp.org/aboutJava/communityprocess/pfd/jsr310/JSR-310-guide.html). Many answers here use the `Calendar` class – but this class is obsolete. Use classes from the [`java.time`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/package-summary.html) package instead.  [This answer is an elegant solution](https://stackoverflow.com/a/51010738/507738) using `java.time`.","body":"<b>To future readers</b>: this question was asked in 2011, before Java 8 existed, which ships with an implementation of <a href=\"https://jcp.org/aboutJava/communityprocess/pfd/jsr310/JSR-310-guide.html\" rel=\"nofollow noreferrer\">JSR 310</a>. Many answers here use the <code>Calendar</code> class – but this class is obsolete. Use classes from the <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.time</code></a> package instead.  <a href=\"https://stackoverflow.com/a/51010738/507738\">This answer is an elegant solution</a> using <code>java.time</code>."}],"answers":[{"tags":[],"owner":{"account_id":65096,"reputation":15637,"user_id":191797,"accept_rate":100,"display_name":"Piyush Mattoo"},"down_vote_count":5,"up_vote_count":58,"is_accepted":true,"score":53,"last_activity_date":1391842914,"creation_date":1294190420,"answer_id":4600057,"question_id":4600034,"body_markdown":"    public static int getWorkingDaysBetweenTwoDates(Date startDate, Date endDate) {\r\n        Calendar startCal = Calendar.getInstance();\r\n\t\tstartCal.setTime(startDate);\t\t\r\n\t\t\r\n\t\tCalendar endCal = Calendar.getInstance();\r\n\t\tendCal.setTime(endDate);\r\n\r\n        int workDays = 0;\r\n\r\n        //Return 0 if start and end are the same\r\n        if (startCal.getTimeInMillis() == endCal.getTimeInMillis()) {\r\n            return 0;\r\n        }\r\n        \r\n        if (startCal.getTimeInMillis() &gt; endCal.getTimeInMillis()) {\r\n            startCal.setTime(endDate);\r\n            endCal.setTime(startDate);\r\n        }\r\n\r\n        do {\r\n           //excluding start date\r\n            startCal.add(Calendar.DAY_OF_MONTH, 1);\r\n            if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY &amp;&amp; startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {\r\n                ++workDays;\r\n            }\r\n        } while (startCal.getTimeInMillis() &lt; endCal.getTimeInMillis()); //excluding end date\r\n\r\n        return workDays;\r\n    }\r\n\r\n&gt; Start date and end date are exclusive, Only the days between given\r\n&gt; dates will be counted. Start date and end date will not be included.","title":"Calculate number of weekdays between two dates in Java","body":"<pre><code>public static int getWorkingDaysBetweenTwoDates(Date startDate, Date endDate) {\n    Calendar startCal = Calendar.getInstance();\n    startCal.setTime(startDate);        \n\n    Calendar endCal = Calendar.getInstance();\n    endCal.setTime(endDate);\n\n    int workDays = 0;\n\n    //Return 0 if start and end are the same\n    if (startCal.getTimeInMillis() == endCal.getTimeInMillis()) {\n        return 0;\n    }\n\n    if (startCal.getTimeInMillis() &gt; endCal.getTimeInMillis()) {\n        startCal.setTime(endDate);\n        endCal.setTime(startDate);\n    }\n\n    do {\n       //excluding start date\n        startCal.add(Calendar.DAY_OF_MONTH, 1);\n        if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY &amp;&amp; startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {\n            ++workDays;\n        }\n    } while (startCal.getTimeInMillis() &lt; endCal.getTimeInMillis()); //excluding end date\n\n    return workDays;\n}\n</code></pre>\n\n<blockquote>\n  <p>Start date and end date are exclusive, Only the days between given\n  dates will be counted. Start date and end date will not be included.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":111785,"reputation":3170,"user_id":295103,"accept_rate":100,"display_name":"Andre"},"down_vote_count":4,"up_vote_count":7,"is_accepted":false,"score":3,"last_activity_date":1294190453,"creation_date":1294190453,"answer_id":4600059,"question_id":4600034,"body_markdown":"I don&#39;t have a Java based solution, but have a PHP one, hope it helps:\r\n\r\n    function getDate($days) {\t\r\n        for ($i = 0; $i &lt; $days; $i ++) {                                      \r\n\t\t    if (date(&#39;N&#39; , strtotime(&#39;+&#39; . ($i + 1) . &#39; days&#39;)) &gt; 5) {  \r\n\t\t\t    $days++;                                                        \r\n\t\t    }                                                                   \r\n\t    }                                                                       \r\n\t                                                                            \r\n\t    return date(&#39;l, F jS&#39;, strtotime(&#39;+&#39; . $days . &#39; days&#39;, time()));\r\n    }","title":"Calculate number of weekdays between two dates in Java","body":"<p>I don't have a Java based solution, but have a PHP one, hope it helps:</p>\n\n<pre><code>function getDate($days) {   \n    for ($i = 0; $i &lt; $days; $i ++) {                                      \n        if (date('N' , strtotime('+' . ($i + 1) . ' days')) &gt; 5) {  \n            $days++;                                                        \n        }                                                                   \n    }                                                                       \n\n    return date('l, F jS', strtotime('+' . $days . ' days', time()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1442412137,"creation_date":1294197447,"answer_id":4600534,"question_id":4600034,"body_markdown":"Solution **without loop**:\r\n\r\n\tstatic long days(Date start, Date end){\r\n\t\t//Ignore argument check\r\n\t\t\r\n\t\tCalendar c1 = Calendar.getInstance();\r\n\t\tc1.setTime(start);\r\n\t\tint w1 = c1.get(Calendar.DAY_OF_WEEK);\r\n\t\tc1.add(Calendar.DAY_OF_WEEK, -w1);\r\n\t  \r\n\t\tCalendar c2 = Calendar.getInstance();\r\n\t\tc2.setTime(end);\r\n\t\tint w2 = c2.get(Calendar.DAY_OF_WEEK);\r\n\t\tc2.add(Calendar.DAY_OF_WEEK, -w2);\r\n   \r\n\t\t//end Saturday to start Saturday \r\n\t\tlong days = (c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24);\r\n\t\tlong daysWithoutWeekendDays = days-(days*2/7);\r\n\r\n        // Adjust days to add on (w2) and days to subtract (w1) so that Saturday\r\n        // and Sunday are not included\r\n        if (w1 == Calendar.SUNDAY &amp;&amp; w2 != Calendar.SATURDAY) {\r\n            w1 = Calendar.MONDAY;\r\n        } else if (w1 == Calendar.SATURDAY &amp;&amp; w2 != Calendar.SUNDAY) {\r\n            w1 = Calendar.FRIDAY;\r\n        } \r\n        \r\n        if (w2 == Calendar.SUNDAY) {\r\n            w2 = Calendar.MONDAY;\r\n        } else if (w2 == Calendar.SATURDAY) {\r\n            w2 = Calendar.FRIDAY;\r\n        }\r\n\t\t\r\n\t\treturn daysWithoutWeekendDays-w1+w2;\r\n\t}","title":"Calculate number of weekdays between two dates in Java","body":"<p>Solution <strong>without loop</strong>:</p>\n\n<pre><code>static long days(Date start, Date end){\n    //Ignore argument check\n\n    Calendar c1 = Calendar.getInstance();\n    c1.setTime(start);\n    int w1 = c1.get(Calendar.DAY_OF_WEEK);\n    c1.add(Calendar.DAY_OF_WEEK, -w1);\n\n    Calendar c2 = Calendar.getInstance();\n    c2.setTime(end);\n    int w2 = c2.get(Calendar.DAY_OF_WEEK);\n    c2.add(Calendar.DAY_OF_WEEK, -w2);\n\n    //end Saturday to start Saturday \n    long days = (c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24);\n    long daysWithoutWeekendDays = days-(days*2/7);\n\n    // Adjust days to add on (w2) and days to subtract (w1) so that Saturday\n    // and Sunday are not included\n    if (w1 == Calendar.SUNDAY &amp;&amp; w2 != Calendar.SATURDAY) {\n        w1 = Calendar.MONDAY;\n    } else if (w1 == Calendar.SATURDAY &amp;&amp; w2 != Calendar.SUNDAY) {\n        w1 = Calendar.FRIDAY;\n    } \n\n    if (w2 == Calendar.SUNDAY) {\n        w2 = Calendar.MONDAY;\n    } else if (w2 == Calendar.SATURDAY) {\n        w2 = Calendar.FRIDAY;\n    }\n\n    return daysWithoutWeekendDays-w1+w2;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":409306,"reputation":347,"user_id":780490,"display_name":"Levi"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1320362033,"creation_date":1320362033,"answer_id":8003104,"question_id":4600034,"body_markdown":"I used Shengyuan Lu&#39;s solution, but I needed to make a fix for the case where the method is called when one of the dates is on a Saturday and the other a Sunday - otherwise the answer is off by a day:\r\n\r\n    static long days(Date start, Date end){\r\n        //Ignore argument check\r\n    \r\n        Calendar c1 = GregorianCalendar.getInstance();\r\n        c1.setTime(start);\r\n        int w1 = c1.get(Calendar.DAY_OF_WEEK);\r\n        c1.add(Calendar.DAY_OF_WEEK, -w1 + 1);\r\n    \r\n        Calendar c2 = GregorianCalendar.getInstance();\r\n        c2.setTime(end);\r\n        int w2 = c2.get(Calendar.DAY_OF_WEEK);\r\n        c2.add(Calendar.DAY_OF_WEEK, -w2 + 1);\r\n    \r\n        //end Saturday to start Saturday \r\n        long days = (c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24);\r\n        long daysWithoutSunday = days-(days*2/7);\r\n    \r\n        if (w1 == Calendar.SUNDAY) {\r\n            w1 = Calendar.MONDAY;\r\n        }\r\n        if (w2 == Calendar.SUNDAY) {\r\n            w2 = Calendar.MONDAY;\r\n        }\r\n        return daysWithoutSunday-w1+w2;\r\n    }\r\n\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p>I used Shengyuan Lu's solution, but I needed to make a fix for the case where the method is called when one of the dates is on a Saturday and the other a Sunday - otherwise the answer is off by a day:</p>\n\n<pre><code>static long days(Date start, Date end){\n    //Ignore argument check\n\n    Calendar c1 = GregorianCalendar.getInstance();\n    c1.setTime(start);\n    int w1 = c1.get(Calendar.DAY_OF_WEEK);\n    c1.add(Calendar.DAY_OF_WEEK, -w1 + 1);\n\n    Calendar c2 = GregorianCalendar.getInstance();\n    c2.setTime(end);\n    int w2 = c2.get(Calendar.DAY_OF_WEEK);\n    c2.add(Calendar.DAY_OF_WEEK, -w2 + 1);\n\n    //end Saturday to start Saturday \n    long days = (c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24);\n    long daysWithoutSunday = days-(days*2/7);\n\n    if (w1 == Calendar.SUNDAY) {\n        w1 = Calendar.MONDAY;\n    }\n    if (w2 == Calendar.SUNDAY) {\n        w2 = Calendar.MONDAY;\n    }\n    return daysWithoutSunday-w1+w2;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2550410,"reputation":101,"user_id":2214277,"display_name":"Ivi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1364370891,"creation_date":1364360175,"answer_id":15652184,"question_id":4600034,"body_markdown":"The `do` `while` in the solution of Piyush is wrong, it should be : \r\n\r\n    do {\r\n        if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY &amp;&amp; startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {\r\n            ++workDays;\r\n        }\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1);\r\n    } while (startCal.getTimeInMillis() &lt; endCal.getTimeInMillis());\r\n\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p>The <code>do</code> <code>while</code> in the solution of Piyush is wrong, it should be : </p>\n\n<pre><code>do {\n    if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY &amp;&amp; startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {\n        ++workDays;\n    }\n    startCal.add(Calendar.DAY_OF_MONTH, 1);\n} while (startCal.getTimeInMillis() &lt; endCal.getTimeInMillis());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1352505,"reputation":2694,"user_id":1291714,"display_name":"riggaroo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1377672450,"creation_date":1377672450,"answer_id":18481090,"question_id":4600034,"body_markdown":"The `startCal.add` should add onto the `Calendar.DATE` field, not the `Calendar.DAY_OF_MONTH`, I was getting weird results with over Decemeber / January period.","title":"Calculate number of weekdays between two dates in Java","body":"<p>The <code>startCal.add</code> should add onto the <code>Calendar.DATE</code> field, not the <code>Calendar.DAY_OF_MONTH</code>, I was getting weird results with over Decemeber / January period.</p>\n"},{"tags":[],"owner":{"account_id":6749592,"reputation":11,"user_id":5200049,"display_name":"Peter Harrison"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1438901008,"creation_date":1438901008,"answer_id":31866985,"question_id":4600034,"body_markdown":"This is my example without looping. It is a class in this example because I serialize it in some JSON output. Basically I work out the number of days between the two dates, divide by 7 and assign to a long to have a integer value for the number of weeks. Take the original number of days and subtract the number of weekends*2. This isn&#39;t quite perfect - you need to work out if there is a &#39;hangover&#39; where the start is close to the end of the week and goes over the weekend. To correct for this I find the day of the week at the start and find the remainder of the number of days, and add those together to find the &#39;hangover&#39; - and if it is more than 5 it is a weekend. It isn&#39;t quite perfect, and does not account for holidays at all. And no Joda in sight. That said there is also a issue with timezones.\r\n\r\n\timport java.io.Serializable;\r\n\timport java.util.Date;\r\n\r\n\tpublic class BusinessDayCalculator implements Serializable {\r\n\t\r\n\t\tprivate static long DAY = 86400000l;\r\n\t\r\n\t\tprivate Date startTime;\r\n\t\tprivate Date endTime;\r\n\t\t\r\n\t\tpublic void setStartTime(Date startTime) {\r\n\t\t\tthis.startTime = startTime;\r\n\t\t}\r\n\t\r\n\t\tpublic Date getStartTime() {\r\n\t\t\treturn startTime;\r\n\t\t}\r\n\t\r\n\t\tpublic void setEndTime(Date endTime) {\r\n\t\t\tthis.endTime = endTime;\r\n\t\t}\r\n\t\r\n\t\tpublic Date getEndTime() {\r\n\t\t\treturn endTime;\r\n\t\t}\r\n\t\t\r\n\t\tpublic long getHours() {\r\n\t\t\treturn (this.endTime.getTime() - this.startTime.getTime())/(1000*60*60);\r\n\t\t}\r\n\t\r\n\t\tpublic long getBusinessDays(){\r\n\t\t\r\n\t\t\tlong startDay = getDayFromDate(this.startTime);\r\n\t\t\tlong endDay = getDayFromDate(this.endTime);\r\n\t\t\r\n\t\t\tlong totalDays = endDay-startDay;\r\n\t\t\tlong totalWeekends = totalDays/7;\r\n\t\t\r\n\t\t\tlong day = getDay(this.startTime);\r\n\t\t\r\n\t\t\tlong hangover = totalDays % 7;\r\n\t\t\r\n\t\t\tlong intoWeekend = day + hangover;\r\n\t\t\tif(intoWeekend&gt;5){\r\n\t\t\t\ttotalWeekends++;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tlong totalBusinessDays = totalDays - (totalWeekends *2);\r\n\t\t\r\n\t\t\t/*\r\n\t\t\tSystem.out.println(&quot;Days = &quot; + day );\r\n\t\t\tSystem.out.println(&quot;Hangover = &quot; + hangover );\r\n\t\t\tSystem.out.println(&quot;Total Days = &quot; + totalDays);\r\n\t\t\tSystem.out.println(&quot;Total Weekends = &quot; + totalWeekends);\r\n\t\t\tSystem.out.println(&quot;Total Business Days = &quot; + totalBusinessDays);\r\n\t\t\t*/\r\n\t\t\r\n\t\t\treturn totalBusinessDays;\r\n\t\t}\r\n\t\r\n\t\tprivate long getDayFromDate( Date date ){\r\n\t\t\tlong d = date.getTime() / DAY;\r\n\t\t\treturn d;\r\n\t\t}\r\n\t\r\n\t\tprivate long getDay( Date date ){\r\n\t\t\tlong daysSinceEpoc = getDayFromDate(date);\r\n\t\t\tlong day = daysSinceEpoc % 7;\r\n\t\t\tday = day + 4;\r\n\t\t\tif(day&gt;6) day = day - 7;\r\n\t\t\treturn day;\r\n\t\t}\r\n\r\n\t}\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p>This is my example without looping. It is a class in this example because I serialize it in some JSON output. Basically I work out the number of days between the two dates, divide by 7 and assign to a long to have a integer value for the number of weeks. Take the original number of days and subtract the number of weekends*2. This isn't quite perfect - you need to work out if there is a 'hangover' where the start is close to the end of the week and goes over the weekend. To correct for this I find the day of the week at the start and find the remainder of the number of days, and add those together to find the 'hangover' - and if it is more than 5 it is a weekend. It isn't quite perfect, and does not account for holidays at all. And no Joda in sight. That said there is also a issue with timezones.</p>\n\n<pre><code>import java.io.Serializable;\nimport java.util.Date;\n\npublic class BusinessDayCalculator implements Serializable {\n\n    private static long DAY = 86400000l;\n\n    private Date startTime;\n    private Date endTime;\n\n    public void setStartTime(Date startTime) {\n        this.startTime = startTime;\n    }\n\n    public Date getStartTime() {\n        return startTime;\n    }\n\n    public void setEndTime(Date endTime) {\n        this.endTime = endTime;\n    }\n\n    public Date getEndTime() {\n        return endTime;\n    }\n\n    public long getHours() {\n        return (this.endTime.getTime() - this.startTime.getTime())/(1000*60*60);\n    }\n\n    public long getBusinessDays(){\n\n        long startDay = getDayFromDate(this.startTime);\n        long endDay = getDayFromDate(this.endTime);\n\n        long totalDays = endDay-startDay;\n        long totalWeekends = totalDays/7;\n\n        long day = getDay(this.startTime);\n\n        long hangover = totalDays % 7;\n\n        long intoWeekend = day + hangover;\n        if(intoWeekend&gt;5){\n            totalWeekends++;\n        }\n\n        long totalBusinessDays = totalDays - (totalWeekends *2);\n\n        /*\n        System.out.println(\"Days = \" + day );\n        System.out.println(\"Hangover = \" + hangover );\n        System.out.println(\"Total Days = \" + totalDays);\n        System.out.println(\"Total Weekends = \" + totalWeekends);\n        System.out.println(\"Total Business Days = \" + totalBusinessDays);\n        */\n\n        return totalBusinessDays;\n    }\n\n    private long getDayFromDate( Date date ){\n        long d = date.getTime() / DAY;\n        return d;\n    }\n\n    private long getDay( Date date ){\n        long daysSinceEpoc = getDayFromDate(date);\n        long day = daysSinceEpoc % 7;\n        day = day + 4;\n        if(day&gt;6) day = day - 7;\n        return day;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4875051,"reputation":4665,"user_id":3930424,"accept_rate":78,"display_name":"GROX13"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1469604185,"creation_date":1469604185,"answer_id":38606400,"question_id":4600034,"body_markdown":"This is my example without looping. Algorithm is same as [卢声远 Shengyuan Lus][1] one but I used some features of JodaTime.\r\n\r\n    public static int getNumberOfBusinessDays(@Nonnull LocalDate from, @Nonnull LocalDate to) {\r\n\t\tint fromDateDayOfWeek = from.getDayOfWeek();\r\n\t\tint toDateDayOfWeek = to.getDayOfWeek();\r\n\r\n\t\tint daysWithoutWeekends = 5 * Weeks.weeksBetween(\r\n\t\t\t\tfrom.withDayOfWeek(DateTimeConstants.MONDAY), to).getWeeks();\r\n\r\n\t\tif (fromDateDayOfWeek == DateTimeConstants.SUNDAY) {\r\n\t\t\tfromDateDayOfWeek = DateTimeConstants.SATURDAY;\r\n\t\t}\r\n\t\tif (toDateDayOfWeek == DateTimeConstants.SUNDAY) {\r\n\t\t\ttoDateDayOfWeek = DateTimeConstants.SATURDAY;\r\n\t\t}\r\n\r\n\t\treturn daysWithoutWeekends - (fromDateDayOfWeek - toDateDayOfWeek);\r\n\t}\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/290629/%E5%8D%A2%E5%A3%B0%E8%BF%9C-shengyuan-lu","title":"Calculate number of weekdays between two dates in Java","body":"<p>This is my example without looping. Algorithm is same as <a href=\"https://stackoverflow.com/users/290629/%E5%8D%A2%E5%A3%B0%E8%BF%9C-shengyuan-lu\">卢声远 Shengyuan Lus</a> one but I used some features of JodaTime.</p>\n\n<pre><code>public static int getNumberOfBusinessDays(@Nonnull LocalDate from, @Nonnull LocalDate to) {\n    int fromDateDayOfWeek = from.getDayOfWeek();\n    int toDateDayOfWeek = to.getDayOfWeek();\n\n    int daysWithoutWeekends = 5 * Weeks.weeksBetween(\n            from.withDayOfWeek(DateTimeConstants.MONDAY), to).getWeeks();\n\n    if (fromDateDayOfWeek == DateTimeConstants.SUNDAY) {\n        fromDateDayOfWeek = DateTimeConstants.SATURDAY;\n    }\n    if (toDateDayOfWeek == DateTimeConstants.SUNDAY) {\n        toDateDayOfWeek = DateTimeConstants.SATURDAY;\n    }\n\n    return daysWithoutWeekends - (fromDateDayOfWeek - toDateDayOfWeek);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3217290,"reputation":193,"user_id":2715625,"accept_rate":25,"display_name":"Harshal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472314829,"creation_date":1472314020,"answer_id":39183119,"question_id":4600034,"body_markdown":"This program considers loop approach but consider activities happened on after work hours to next working day office start hour\r\n \r\n\r\n  \r\npublic class BusinessDayCalculator {\r\n\r\n\tprivate final String DATE_FORMAT = &quot;dd/MM/yyyy HH:mm:ss&quot;;\r\n\tprivate final int OFFICE_START_HOUR = 9;\r\n\tprivate final int OFFICE_CLOSE_HOUR = 17;\r\n\tprivate final int TOTAL_MINS_IN_BUSINESS_DAY = (OFFICE_CLOSE_HOUR - OFFICE_START_HOUR)*60;\r\n\r\n\tpublic void dateDifference(String start, String end){\r\n\t\tDate startDate = validateStringToDate(start);\r\n\t\tDate endDate = validateStringToDate(end);\r\n\t\tSystem.out.println(startDate);\r\n\t\tSystem.out.println(endDate);\r\n\t\tCalendar startDay = convertDateToCalendar(startDate);\r\n\t\tCalendar tempDay = (Calendar) startDay.clone();\r\n\t\tCalendar endDay = convertDateToCalendar(endDate);\r\n\r\n\t\tSystem.out.println(startDay.getTime());\r\n\t\tSystem.out.println(endDay.getTime());\r\n\t\tint workDays = -1;\r\n\r\n\t\tint startDayDifference = 0;\r\n\t\tint endDayDifference = 0;\r\n        int hours = 0;\r\n\t\tint minsRemainder = 0;\r\n\r\n\t\tif(!(startDay.get(Calendar.DAY_OF_YEAR) == endDay.get(Calendar.DAY_OF_YEAR)\r\n\t\t\t\t&amp;&amp; startDay.get(Calendar.YEAR) == endDay.get(Calendar.YEAR))){\r\n\r\n\t\t\tdo{\r\n\t\t\t\ttempDay.add(Calendar.DAY_OF_MONTH, 1);\r\n\t\t\t\tif(tempDay.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY \r\n\t\t\t\t\t\t&amp;&amp; tempDay.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY){\r\n\t\t\t\t\tworkDays++;\r\n\t\t\t\t}\r\n\t\t\t}while(tempDay.getTimeInMillis() &lt;= endDay.getTimeInMillis());\r\n\r\n\t\t\tif(workDays &gt; 0){\r\n\t\t\t\tworkDays = workDays - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstartDayDifference = hourDifferenceInMinutesOfStartDay(startDay);\r\n\t\tendDayDifference = hourDifferenceInMinutesOfEndDay(endDay);\r\n\r\n\t\tminsRemainder = (startDayDifference + endDayDifference) % TOTAL_MINS_IN_BUSINESS_DAY;\r\n\t\tworkDays = workDays + ((startDayDifference + endDayDifference) / TOTAL_MINS_IN_BUSINESS_DAY);\r\n\r\n\t\thours = minsRemainder/60;\r\n\t\tminsRemainder = minsRemainder % 60;\r\n\r\n\t\tSystem.out.println(workDays + &quot;d &quot;+ hours + &quot;hrs &quot; + minsRemainder + &quot; mins&quot;);\r\n\r\n\t}\r\n\r\n\r\n\tprivate int hourDifferenceInMinutesOfEndDay(Calendar endDay) {\r\n\t\tlong endTimestamp = endDay.getTimeInMillis();\r\n\t\tSystem.out.println(endTimestamp);\r\n\t\tendDay.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\r\n\t\tendDay.set(Calendar.MINUTE,0);\r\n\t\tlong endDayOfficeStartTimestamp = endDay.getTimeInMillis();\r\n\t\tSystem.out.println(endDayOfficeStartTimestamp);\r\n\t\tint difference = (int)((endTimestamp - endDayOfficeStartTimestamp) / 1000) / 60;\r\n\t\tSystem.out.println(difference);\r\n\t\treturn difference;\r\n\t}\r\n\r\n\r\n\tprivate int hourDifferenceInMinutesOfStartDay(Calendar startDay) {\r\n\t\tlong starttimestamp = startDay.getTimeInMillis();\r\n\t\tSystem.out.println(starttimestamp);\r\n\t\tstartDay.set(Calendar.HOUR_OF_DAY, OFFICE_CLOSE_HOUR);\r\n\t\tstartDay.set(Calendar.MINUTE,0);\r\n\t\tlong startDayOfficeCloseTimestamp = startDay.getTimeInMillis();\r\n\t\tSystem.out.println(startDayOfficeCloseTimestamp);\r\n\t\tint difference = (int)((startDayOfficeCloseTimestamp - starttimestamp) / 1000) / 60;\r\n\t\tSystem.out.println(difference);\r\n\t\treturn difference;\r\n\t}\r\n\r\n\tpublic Calendar convertDateToCalendar(Date date){\r\n\t\tCalendar calendar = Calendar.getInstance();\r\n\t\tcalendar.setTime(date);\r\n\r\n\t\tif(calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY \r\n\t\t\t\t|| calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){\r\n\t\t\tcalendar = handleActivityOnAfterWorkHoursOrWeekendOrHolidays(calendar);\r\n\t\t}\r\n\r\n\t\tif(calendar.get(Calendar.HOUR_OF_DAY) &gt;= OFFICE_CLOSE_HOUR \r\n\t\t\t\t&amp;&amp; calendar.get(Calendar.MINUTE) &gt; 0){\r\n\t\t\tcalendar = handleActivityOnAfterWorkHoursOrWeekendOrHolidays(calendar);\r\n\t\t}\r\n\r\n\t\tif(calendar.get(Calendar.HOUR_OF_DAY) &lt; OFFICE_START_HOUR){\r\n\t\t\tcalendar.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\r\n\t\t\tcalendar.set(Calendar.MINUTE,0);\r\n\t\t}\r\n\r\n\t\treturn calendar;\r\n\t}\r\n\r\n\tprivate Calendar handleActivityOnAfterWorkHoursOrWeekendOrHolidays(Calendar calendar) {\r\n\t\tdo{\r\n\t\t\tcalendar.add(Calendar.DAY_OF_MONTH, 1);\r\n\t\t}while(isHoliday(calendar));\r\n\t\tcalendar.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\r\n\t\tcalendar.set(Calendar.MINUTE,0);\r\n\t\treturn calendar;\r\n\t}\r\n\r\n\tprivate boolean isHoliday(Calendar calendar) {\r\n\t\tif(calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY \r\n\t\t\t\t|| calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic Date validateStringToDate(String input){\r\n\t\tSimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\r\n\t\tDate date = null;\r\n\t\ttry{\r\n\t\t\tdate = dateFormat.parse(input);\r\n\t\t}catch(ParseException exception){\r\n\t\t\tSystem.out.println(&quot;invalid date format&quot;);\r\n\t\t\tthrow new RuntimeException(&quot;invalid date format&quot;);\r\n\t\t}\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tBusinessDayCalculator calc = new BusinessDayCalculator();\r\n\t\tString startDate = &quot;27/12/2016 11:38:00&quot;;\r\n\t\tString endDate = &quot;04/01/2017 12:38:00&quot;;\r\n\t\tcalc.dateDifference(startDate, endDate);\r\n\t}\r\n\r\n\r\n}\r\n    \r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p>This program considers loop approach but consider activities happened on after work hours to next working day office start hour</p>\n\n<p>public class BusinessDayCalculator {</p>\n\n<pre><code>private final String DATE_FORMAT = \"dd/MM/yyyy HH:mm:ss\";\nprivate final int OFFICE_START_HOUR = 9;\nprivate final int OFFICE_CLOSE_HOUR = 17;\nprivate final int TOTAL_MINS_IN_BUSINESS_DAY = (OFFICE_CLOSE_HOUR - OFFICE_START_HOUR)*60;\n\npublic void dateDifference(String start, String end){\n    Date startDate = validateStringToDate(start);\n    Date endDate = validateStringToDate(end);\n    System.out.println(startDate);\n    System.out.println(endDate);\n    Calendar startDay = convertDateToCalendar(startDate);\n    Calendar tempDay = (Calendar) startDay.clone();\n    Calendar endDay = convertDateToCalendar(endDate);\n\n    System.out.println(startDay.getTime());\n    System.out.println(endDay.getTime());\n    int workDays = -1;\n\n    int startDayDifference = 0;\n    int endDayDifference = 0;\n    int hours = 0;\n    int minsRemainder = 0;\n\n    if(!(startDay.get(Calendar.DAY_OF_YEAR) == endDay.get(Calendar.DAY_OF_YEAR)\n            &amp;&amp; startDay.get(Calendar.YEAR) == endDay.get(Calendar.YEAR))){\n\n        do{\n            tempDay.add(Calendar.DAY_OF_MONTH, 1);\n            if(tempDay.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY \n                    &amp;&amp; tempDay.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY){\n                workDays++;\n            }\n        }while(tempDay.getTimeInMillis() &lt;= endDay.getTimeInMillis());\n\n        if(workDays &gt; 0){\n            workDays = workDays - 1;\n        }\n\n    }\n\n    startDayDifference = hourDifferenceInMinutesOfStartDay(startDay);\n    endDayDifference = hourDifferenceInMinutesOfEndDay(endDay);\n\n    minsRemainder = (startDayDifference + endDayDifference) % TOTAL_MINS_IN_BUSINESS_DAY;\n    workDays = workDays + ((startDayDifference + endDayDifference) / TOTAL_MINS_IN_BUSINESS_DAY);\n\n    hours = minsRemainder/60;\n    minsRemainder = minsRemainder % 60;\n\n    System.out.println(workDays + \"d \"+ hours + \"hrs \" + minsRemainder + \" mins\");\n\n}\n\n\nprivate int hourDifferenceInMinutesOfEndDay(Calendar endDay) {\n    long endTimestamp = endDay.getTimeInMillis();\n    System.out.println(endTimestamp);\n    endDay.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\n    endDay.set(Calendar.MINUTE,0);\n    long endDayOfficeStartTimestamp = endDay.getTimeInMillis();\n    System.out.println(endDayOfficeStartTimestamp);\n    int difference = (int)((endTimestamp - endDayOfficeStartTimestamp) / 1000) / 60;\n    System.out.println(difference);\n    return difference;\n}\n\n\nprivate int hourDifferenceInMinutesOfStartDay(Calendar startDay) {\n    long starttimestamp = startDay.getTimeInMillis();\n    System.out.println(starttimestamp);\n    startDay.set(Calendar.HOUR_OF_DAY, OFFICE_CLOSE_HOUR);\n    startDay.set(Calendar.MINUTE,0);\n    long startDayOfficeCloseTimestamp = startDay.getTimeInMillis();\n    System.out.println(startDayOfficeCloseTimestamp);\n    int difference = (int)((startDayOfficeCloseTimestamp - starttimestamp) / 1000) / 60;\n    System.out.println(difference);\n    return difference;\n}\n\npublic Calendar convertDateToCalendar(Date date){\n    Calendar calendar = Calendar.getInstance();\n    calendar.setTime(date);\n\n    if(calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY \n            || calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){\n        calendar = handleActivityOnAfterWorkHoursOrWeekendOrHolidays(calendar);\n    }\n\n    if(calendar.get(Calendar.HOUR_OF_DAY) &gt;= OFFICE_CLOSE_HOUR \n            &amp;&amp; calendar.get(Calendar.MINUTE) &gt; 0){\n        calendar = handleActivityOnAfterWorkHoursOrWeekendOrHolidays(calendar);\n    }\n\n    if(calendar.get(Calendar.HOUR_OF_DAY) &lt; OFFICE_START_HOUR){\n        calendar.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\n        calendar.set(Calendar.MINUTE,0);\n    }\n\n    return calendar;\n}\n\nprivate Calendar handleActivityOnAfterWorkHoursOrWeekendOrHolidays(Calendar calendar) {\n    do{\n        calendar.add(Calendar.DAY_OF_MONTH, 1);\n    }while(isHoliday(calendar));\n    calendar.set(Calendar.HOUR_OF_DAY, OFFICE_START_HOUR);\n    calendar.set(Calendar.MINUTE,0);\n    return calendar;\n}\n\nprivate boolean isHoliday(Calendar calendar) {\n    if(calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY \n            || calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){\n        return true;\n    }\n    return false;\n}\n\npublic Date validateStringToDate(String input){\n    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\n    Date date = null;\n    try{\n        date = dateFormat.parse(input);\n    }catch(ParseException exception){\n        System.out.println(\"invalid date format\");\n        throw new RuntimeException(\"invalid date format\");\n    }\n    return date;\n}\n\npublic static void main(String[] args){\n    BusinessDayCalculator calc = new BusinessDayCalculator();\n    String startDate = \"27/12/2016 11:38:00\";\n    String endDate = \"04/01/2017 12:38:00\";\n    calc.dateDifference(startDate, endDate);\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":7170330,"reputation":81,"user_id":5478011,"display_name":"Amir Kadić"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612439655,"creation_date":1477425502,"answer_id":40248655,"question_id":4600034,"body_markdown":"Here is a set-based solution that completes in constant time for any given subset of weekdays, not just Monday-Friday. It splits the problem into counting full weeks and counting the days in the residual week. If you are interested, [here&#39;s a detailed explanation and a formal proof][1] that the algorithm is correct. Note that the intervals are *inclusive*, i.e. startDate and endDate are counted in. If startDate is after endDate, the result is zero rather than negative.\r\n\r\n    long countWeekDays(LocalDate startDate, LocalDate endDate, Set&lt;DayOfWeek&gt; daysOfWeek) {\r\n\r\n        long periodLength = Math.max(0, ChronoUnit.DAYS.between(startDate, endDate) + 1);\r\n        long fullWeeks = periodLength / 7;\r\n        long residualWeekLength = periodLength % 7;\r\n\r\n        Set&lt;DayOfWeek&gt; residualWeekDays = LongStream.range(0, residualWeekLength)\r\n            .mapToObj(offset -&gt; startDate.plusDays(offset).getDayOfWeek())\r\n            .collect(Collectors.toSet());\r\n        residualWeekDays.retainAll(daysOfWeek);\r\n\r\n        return fullWeeks * daysOfWeek.size() + residualWeekDays.size();\r\n    }\r\n\r\nFor the original problem (Monday-Friday) it is called e.g. with:\r\n\r\n    countWeekDays(\r\n        LocalDate.of(2016, 2, 8),\r\n        LocalDate.of(2016, 2, 26),\r\n        new HashSet(Arrays.asList(\r\n            DayOfWeek.MONDAY,\r\n            DayOfWeek.TUESDAY,\r\n            DayOfWeek.WEDNESDAY,\r\n            DayOfWeek.THURSDAY,\r\n            DayOfWeek.FRIDAY\r\n            )\r\n        )\r\n    )\r\n\r\nThis assumes you are working with inclusive intervals. If you want to skip the first day of the interval, just add one day to the first parameter:\r\n\r\n    countWeekDays(\r\n        LocalDate.of(2016, 2, 8).plusDays(1),\r\n        LocalDate.of(2016, 2, 26),\r\n        new HashSet(Arrays.asList(\r\n            DayOfWeek.MONDAY,\r\n            DayOfWeek.TUESDAY,\r\n            DayOfWeek.WEDNESDAY,\r\n            DayOfWeek.THURSDAY,\r\n            DayOfWeek.FRIDAY\r\n            )\r\n        )\r\n    )\r\n\r\nLikewise, if you want to skip the last day of the inclusive interval, subtract one day from the second parameter:\r\n\r\n    countWeekDays(\r\n        LocalDate.of(2016, 2, 8),\r\n        LocalDate.of(2016, 2, 26).minusDays(1),\r\n        new HashSet(Arrays.asList(\r\n            DayOfWeek.MONDAY,\r\n            DayOfWeek.TUESDAY,\r\n            DayOfWeek.WEDNESDAY,\r\n            DayOfWeek.THURSDAY,\r\n            DayOfWeek.FRIDAY\r\n            )\r\n        )\r\n    )\r\n\r\nFinally, if you need to skip both interval-delimiting days, combine the two previous modifications:\r\n\r\n    countWeekDays(\r\n        LocalDate.of(2016, 2, 8).plusDays(1),\r\n        LocalDate.of(2016, 2, 26).minusDays(1),\r\n        new HashSet(Arrays.asList(\r\n            DayOfWeek.MONDAY,\r\n            DayOfWeek.TUESDAY,\r\n            DayOfWeek.WEDNESDAY,\r\n            DayOfWeek.THURSDAY,\r\n            DayOfWeek.FRIDAY\r\n            )\r\n        )\r\n    )\r\n\r\n\r\n  [1]: https://amir.a-ware.dev/calculating-the-number-of-specific-weekdays-between-two-dates.html#calculating-the-number-of-specific-weekdays-between-two-dates","title":"Calculate number of weekdays between two dates in Java","body":"<p>Here is a set-based solution that completes in constant time for any given subset of weekdays, not just Monday-Friday. It splits the problem into counting full weeks and counting the days in the residual week. If you are interested, <a href=\"https://amir.a-ware.dev/calculating-the-number-of-specific-weekdays-between-two-dates.html#calculating-the-number-of-specific-weekdays-between-two-dates\" rel=\"nofollow noreferrer\">here's a detailed explanation and a formal proof</a> that the algorithm is correct. Note that the intervals are <em>inclusive</em>, i.e. startDate and endDate are counted in. If startDate is after endDate, the result is zero rather than negative.</p>\n<pre><code>long countWeekDays(LocalDate startDate, LocalDate endDate, Set&lt;DayOfWeek&gt; daysOfWeek) {\n\n    long periodLength = Math.max(0, ChronoUnit.DAYS.between(startDate, endDate) + 1);\n    long fullWeeks = periodLength / 7;\n    long residualWeekLength = periodLength % 7;\n\n    Set&lt;DayOfWeek&gt; residualWeekDays = LongStream.range(0, residualWeekLength)\n        .mapToObj(offset -&gt; startDate.plusDays(offset).getDayOfWeek())\n        .collect(Collectors.toSet());\n    residualWeekDays.retainAll(daysOfWeek);\n\n    return fullWeeks * daysOfWeek.size() + residualWeekDays.size();\n}\n</code></pre>\n<p>For the original problem (Monday-Friday) it is called e.g. with:</p>\n<pre><code>countWeekDays(\n    LocalDate.of(2016, 2, 8),\n    LocalDate.of(2016, 2, 26),\n    new HashSet(Arrays.asList(\n        DayOfWeek.MONDAY,\n        DayOfWeek.TUESDAY,\n        DayOfWeek.WEDNESDAY,\n        DayOfWeek.THURSDAY,\n        DayOfWeek.FRIDAY\n        )\n    )\n)\n</code></pre>\n<p>This assumes you are working with inclusive intervals. If you want to skip the first day of the interval, just add one day to the first parameter:</p>\n<pre><code>countWeekDays(\n    LocalDate.of(2016, 2, 8).plusDays(1),\n    LocalDate.of(2016, 2, 26),\n    new HashSet(Arrays.asList(\n        DayOfWeek.MONDAY,\n        DayOfWeek.TUESDAY,\n        DayOfWeek.WEDNESDAY,\n        DayOfWeek.THURSDAY,\n        DayOfWeek.FRIDAY\n        )\n    )\n)\n</code></pre>\n<p>Likewise, if you want to skip the last day of the inclusive interval, subtract one day from the second parameter:</p>\n<pre><code>countWeekDays(\n    LocalDate.of(2016, 2, 8),\n    LocalDate.of(2016, 2, 26).minusDays(1),\n    new HashSet(Arrays.asList(\n        DayOfWeek.MONDAY,\n        DayOfWeek.TUESDAY,\n        DayOfWeek.WEDNESDAY,\n        DayOfWeek.THURSDAY,\n        DayOfWeek.FRIDAY\n        )\n    )\n)\n</code></pre>\n<p>Finally, if you need to skip both interval-delimiting days, combine the two previous modifications:</p>\n<pre><code>countWeekDays(\n    LocalDate.of(2016, 2, 8).plusDays(1),\n    LocalDate.of(2016, 2, 26).minusDays(1),\n    new HashSet(Arrays.asList(\n        DayOfWeek.MONDAY,\n        DayOfWeek.TUESDAY,\n        DayOfWeek.WEDNESDAY,\n        DayOfWeek.THURSDAY,\n        DayOfWeek.FRIDAY\n        )\n    )\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1605090854,"creation_date":1478036677,"answer_id":40369140,"question_id":4600034,"body_markdown":"# java.time\r\n\r\nThe modern way is with the java.time classes. \r\n\r\n## `LocalDate`\r\n\r\nThe [`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html) class represents a date-only value without time-of-day and without time zone.\r\n\r\n    LocalDate start = LocalDate.of( 2016 , 1 , 23 );\r\n    LocalDate stop = start.plusMonths( 1 );\r\n\r\n## `DayOfWeek` enum\r\n\r\nThe [`DayOfWeek`](http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html) [enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html) provides a [singleton](https://en.wikipedia.org/wiki/Singleton_pattern) instance for each of the sever days of the week.\r\n\r\n    DayOfWeek dow = start.getDayOfWeek();\r\n    if( dow.equals( DayOfWeek.SATURDAY ) || dow.equals( DayOfWeek.SUNDAY ) ) …\r\n\r\nWe can collect the desired dates in a `List`.\r\n\r\n    int initialCapacity = Duration.between( start , stop ).toDays() ;\r\n    List&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;( initialCapacity );\r\n    …\r\n    if( dow.equals( DayOfWeek.SATURDAY ) || dow.equals( DayOfWeek.SUNDAY ) ) {\r\n        dates.add( date );\r\n        …\r\n\r\nAn [`EnumSet`][1] is an extremely efficient, fast and low-memory, implementation of [`Set`][2]. We can use an `EnumSet` instead of the `if` statement seen above.\r\n\r\n    Set&lt;DayOfWeek&gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY ) ;\r\n    …\r\n    if( weekend.contains( dayOfWeek ) ) …\r\n\r\nPut that all together.\r\n\r\n    LocalDate date = start ;\r\n    while( date.isBefore( stop ) ) {\r\n        if( ! weekend.contains( date.getDayOfWeek() ) ) { // If not weekend, collect this LocalDate.\r\n            dates.add( date ) ;\r\n        }\r\n        // Prepare for next loop.\r\n        date = date.plusDays( 1 ); // Increment to next day.\r\n    }\r\n\r\n# `nextWorkingDay` TemporalAdjuster\r\n\r\nAnother approach uses the [ThreeTen-Extra][3] project to add classes that work with java.time.\r\n\r\nThe [`Temporals`][4] class adds additional implementations of [`TemporalAdjuster`](http://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html) for manipulating date-time values. We want the [`nextWorkingDay`][5] adjuster to increment the date while skipping over Saturday &amp; Sunday.\r\n\r\n    LocalDate start = LocalDate.of( 2016 , 1 , 23 );\r\n    LocalDate stop = start.plusMonths( 1 );\r\n\r\n    int initialCapacity = Duration.between( start , stop ).toDays() ;\r\n    List&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;( initialCapacity );\r\n\r\n    LocalDate date = start.minusDays( 1 );  // Start a day ahead.\r\n    while( date.isBefore( stop ) ) {\r\n        date = date.with( org.threeten.extra.Temporals.nextWorkingDay() );\r\n        // Double-check ending date as the `nextWorkingDay` adjuster could move us past the stop date.\r\n        if( date.isBefore( stop ) ) { \r\n            dates.add( date ) ;\r\n        }\r\n    }\r\n\r\n# Performance\r\n\r\nI am curious about the performance of the various approach in various Answers on this page. I am considering only the modern *java.time* code, not the code using troublesome legacy `Date`/`Calendar` classes.\r\n\r\nHere are four methods that each return the number of days elapsed. \r\n\r\nOne uses the clever math-based approach seen in the [Answer by Roland](https://stackoverflow.com/a/44942039/642706). \r\n\r\n    private long countWeekDaysMath ( LocalDate start , LocalDate stop ) {\r\n        // Code taken from Answer by Roland.\r\n        // https://stackoverflow.com/a/44942039/642706\r\n        long count = 0;\r\n        final DayOfWeek startW = start.getDayOfWeek();\r\n        final DayOfWeek stopW = stop.getDayOfWeek();\r\n\r\n        final long days = ChronoUnit.DAYS.between( start , stop );\r\n        final long daysWithoutWeekends = days - 2 * ( ( days + startW.getValue() ) / 7 );\r\n\r\n        //adjust for starting and ending on a Sunday:\r\n        count = daysWithoutWeekends + ( startW == DayOfWeek.SUNDAY ? 1 : 0 ) + ( stopW == DayOfWeek.SUNDAY ? 1 : 0 );\r\n\r\n        return count;\r\n    }\r\n\r\nTwo use approaches seen in this Answer of mine: (a) Visit each date, incrementing one-by-one in a conventional loop.\r\n\r\n    private long countWeekDaysVisit ( LocalDate start , LocalDate stop ) {\r\n        // Code taken from Answer by Basil Bourque.\r\n        // https://stackoverflow.com/a/40369140/642706\r\n        long count = 0;\r\n        Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\r\n        LocalDate ld = start;\r\n        while ( ld.isBefore( stop ) ) {\r\n            if ( ! weekend.contains( ld.getDayOfWeek() ) ) { // If not weekend, collect this LocalDate.\r\n                count++;\r\n            }\r\n            // Prepare for next loop.\r\n            ld = ld.plusDays( 1 ); // Increment to next day.\r\n        }\r\n        return count;\r\n    }\r\n\r\n…and, (b) Using the `TemporalAdjuster` implementation `org.threeten.extra.Temporals.nextWorkingDay()`.\r\n\r\n    private long countWeekDaysAdjuster ( LocalDate start , LocalDate stop ) {\r\n        // Code taken from Answer by Basil Bourque.\r\n        // https://stackoverflow.com/a/40369140/642706\r\n        long count = 0;\r\n        Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\r\n        TemporalAdjuster nextWorkingDayTA = org.threeten.extra.Temporals.nextWorkingDay();\r\n        LocalDate ld = start;\r\n        if ( weekend.contains( ld.getDayOfWeek() ) ) {\r\n            ld = ld.with( nextWorkingDayTA );\r\n        }\r\n        while ( ld.isBefore( stop ) ) {\r\n            count++;\r\n            // Prepare for next loop.\r\n            ld = ld.with( nextWorkingDayTA ); // Increment to next working day (non-weekend day).\r\n        }\r\n        return count;\r\n    }\r\n\r\n The last uses Java Streams approach seen in the [Answer by Ravindra Ranwala](https://stackoverflow.com/a/51010738/642706).\r\n\r\n    private long countWeekDaysStream ( LocalDate start , LocalDate stop ) {\r\n        // Code taken from the Answer by Ravindra Ranwala.\r\n        // https://stackoverflow.com/a/51010738/642706\r\n        long count = 0;\r\n        Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\r\n        final long weekDaysBetween = start.datesUntil( stop )\r\n                                         .filter( d -&gt; ! weekend.contains( d.getDayOfWeek() ) )\r\n                                         .count();\r\n        return count;\r\n    }\r\n\r\n\r\nAnd the test harness. \r\n\r\n**Caveats:** \r\n\r\n - Well, the usual caveats about micro-benchmarking being untrustworthy, prone to unjustified or unrealistic conclusions. \r\n - I wish I&#39;d learned to use the [*JMH* micro-benchmarking framework][6].\r\n - I have not bothered to try optimizing any of this code. For example, in real work, the `TemporalAdjuster` could be cached outside our method.\r\n\r\nTest harness.\r\n\r\n    LocalDate start = LocalDate.of( 2018 , Month.JANUARY , 1 );\r\n    LocalDate stop = start.plusYears( 1 );\r\n\r\n    int runs = 100_000;\r\n\r\n    long go = System.nanoTime();\r\n    for ( int i = 1 ; i &lt;= runs ; i++ ) {\r\n        long count = this.countWeekDaysMath( start , stop );\r\n    }\r\n    long elapsedMath = ( System.nanoTime() - go );\r\n\r\n    go = System.nanoTime();\r\n    for ( int i = 1 ; i &lt;= runs ; i++ ) {\r\n        long count = this.countWeekDaysVisit( start , stop );\r\n    }\r\n    long elapsedVisit = ( System.nanoTime() - go );\r\n\r\n    go = System.nanoTime();\r\n    for ( int i = 1 ; i &lt;= runs ; i++ ) {\r\n        long count = this.countWeekDaysStream( start , stop );\r\n    }\r\n    long elapsedAdjuster = ( System.nanoTime() - go );\r\n\r\n    go = System.nanoTime();\r\n    for ( int i = 1 ; i &lt;= runs ; i++ ) {\r\n        long count = this.countWeekDaysStream( start , stop );\r\n    }\r\n    long elapsedStream = ( System.nanoTime() - go );\r\n\r\n    System.out.println( &quot;math: &quot; + elapsedMath + &quot; each: &quot; + ( elapsedMath / runs ) );\r\n    System.out.println( &quot;visit: &quot; + elapsedVisit + &quot; each: &quot; + ( elapsedVisit / runs ) );\r\n    System.out.println( &quot;adjuster: &quot; + elapsedAdjuster + &quot; each: &quot; + ( elapsedAdjuster / runs ) );\r\n    System.out.println( &quot;stream: &quot; + elapsedStream + &quot; each: &quot; + ( elapsedStream / runs ) );\r\n\r\nWhen run on my MacBook Pro (Sierra) with Oracle JDK 10.0.1 and *ThreeTen-Extra* version 1.3.2, I get results consistently close to the following. The **math solution is a tiny fraction of the others** at a couple hundred nanos versus several thousand, as we would expect obviously. Of the other three, the **`TemporalAdjuster` is the longest**, always over 10,000 nanos each. The visit and stream both come in well under that 10,000 nanos each, with visit being noticeably faster than streams. As seen in other examples around the internets, **Java Streams usually make for nifty short code while often running significantly longer**, about 20% longer in this case.\r\n\r\n&gt;math: 18313309 each: 183\r\n\r\n&gt;visit: 708420626 each: 7084\r\n\r\n&gt;adjuster: 1002157240 each: 10021\r\n\r\n&gt;stream: 924724750 each: 9247\r\n\r\n\r\n\r\n\r\n----------\r\n\r\n# About java.time\r\n\r\nThe [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [Joda-Time](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to java.time.\r\n\r\nTo learn more, see the [Oracle Tutorial](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8) and [**SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - The [*ThreeTenABP*](https://github.com/JakeWharton/ThreeTenABP) project adapts ***ThreeTen-Backport*** (mentioned above) for Android specifically.\r\n  - See [*How to use…*](https://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [ThreeTen-Extra](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Set.html\r\n  [3]: http://www.threeten.org/threeten-extra/\r\n  [4]: http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Temporals.html\r\n  [5]: http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Temporals.html#nextWorkingDay--\r\n  [6]: http://openjdk.java.net/projects/code-tools/jmh/","title":"Calculate number of weekdays between two dates in Java","body":"<h1>java.time</h1>\n<p>The modern way is with the java.time classes.</p>\n<h2><code>LocalDate</code></h2>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\"><code>LocalDate</code></a> class represents a date-only value without time-of-day and without time zone.</p>\n<pre><code>LocalDate start = LocalDate.of( 2016 , 1 , 23 );\nLocalDate stop = start.plusMonths( 1 );\n</code></pre>\n<h2><code>DayOfWeek</code> enum</h2>\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"noreferrer\"><code>DayOfWeek</code></a> <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"noreferrer\">enum</a> provides a <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"noreferrer\">singleton</a> instance for each of the sever days of the week.</p>\n<pre><code>DayOfWeek dow = start.getDayOfWeek();\nif( dow.equals( DayOfWeek.SATURDAY ) || dow.equals( DayOfWeek.SUNDAY ) ) …\n</code></pre>\n<p>We can collect the desired dates in a <code>List</code>.</p>\n<pre><code>int initialCapacity = Duration.between( start , stop ).toDays() ;\nList&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;( initialCapacity );\n…\nif( dow.equals( DayOfWeek.SATURDAY ) || dow.equals( DayOfWeek.SUNDAY ) ) {\n    dates.add( date );\n    …\n</code></pre>\n<p>An <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\" rel=\"noreferrer\"><code>EnumSet</code></a> is an extremely efficient, fast and low-memory, implementation of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a>. We can use an <code>EnumSet</code> instead of the <code>if</code> statement seen above.</p>\n<pre><code>Set&lt;DayOfWeek&gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY ) ;\n…\nif( weekend.contains( dayOfWeek ) ) …\n</code></pre>\n<p>Put that all together.</p>\n<pre><code>LocalDate date = start ;\nwhile( date.isBefore( stop ) ) {\n    if( ! weekend.contains( date.getDayOfWeek() ) ) { // If not weekend, collect this LocalDate.\n        dates.add( date ) ;\n    }\n    // Prepare for next loop.\n    date = date.plusDays( 1 ); // Increment to next day.\n}\n</code></pre>\n<h1><code>nextWorkingDay</code> TemporalAdjuster</h1>\n<p>Another approach uses the <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\">ThreeTen-Extra</a> project to add classes that work with java.time.</p>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Temporals.html\" rel=\"noreferrer\"><code>Temporals</code></a> class adds additional implementations of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html\" rel=\"noreferrer\"><code>TemporalAdjuster</code></a> for manipulating date-time values. We want the <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Temporals.html#nextWorkingDay--\" rel=\"noreferrer\"><code>nextWorkingDay</code></a> adjuster to increment the date while skipping over Saturday &amp; Sunday.</p>\n<pre><code>LocalDate start = LocalDate.of( 2016 , 1 , 23 );\nLocalDate stop = start.plusMonths( 1 );\n\nint initialCapacity = Duration.between( start , stop ).toDays() ;\nList&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;( initialCapacity );\n\nLocalDate date = start.minusDays( 1 );  // Start a day ahead.\nwhile( date.isBefore( stop ) ) {\n    date = date.with( org.threeten.extra.Temporals.nextWorkingDay() );\n    // Double-check ending date as the `nextWorkingDay` adjuster could move us past the stop date.\n    if( date.isBefore( stop ) ) { \n        dates.add( date ) ;\n    }\n}\n</code></pre>\n<h1>Performance</h1>\n<p>I am curious about the performance of the various approach in various Answers on this page. I am considering only the modern <em>java.time</em> code, not the code using troublesome legacy <code>Date</code>/<code>Calendar</code> classes.</p>\n<p>Here are four methods that each return the number of days elapsed.</p>\n<p>One uses the clever math-based approach seen in the <a href=\"https://stackoverflow.com/a/44942039/642706\">Answer by Roland</a>.</p>\n<pre><code>private long countWeekDaysMath ( LocalDate start , LocalDate stop ) {\n    // Code taken from Answer by Roland.\n    // https://stackoverflow.com/a/44942039/642706\n    long count = 0;\n    final DayOfWeek startW = start.getDayOfWeek();\n    final DayOfWeek stopW = stop.getDayOfWeek();\n\n    final long days = ChronoUnit.DAYS.between( start , stop );\n    final long daysWithoutWeekends = days - 2 * ( ( days + startW.getValue() ) / 7 );\n\n    //adjust for starting and ending on a Sunday:\n    count = daysWithoutWeekends + ( startW == DayOfWeek.SUNDAY ? 1 : 0 ) + ( stopW == DayOfWeek.SUNDAY ? 1 : 0 );\n\n    return count;\n}\n</code></pre>\n<p>Two use approaches seen in this Answer of mine: (a) Visit each date, incrementing one-by-one in a conventional loop.</p>\n<pre><code>private long countWeekDaysVisit ( LocalDate start , LocalDate stop ) {\n    // Code taken from Answer by Basil Bourque.\n    // https://stackoverflow.com/a/40369140/642706\n    long count = 0;\n    Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\n    LocalDate ld = start;\n    while ( ld.isBefore( stop ) ) {\n        if ( ! weekend.contains( ld.getDayOfWeek() ) ) { // If not weekend, collect this LocalDate.\n            count++;\n        }\n        // Prepare for next loop.\n        ld = ld.plusDays( 1 ); // Increment to next day.\n    }\n    return count;\n}\n</code></pre>\n<p>…and, (b) Using the <code>TemporalAdjuster</code> implementation <code>org.threeten.extra.Temporals.nextWorkingDay()</code>.</p>\n<pre><code>private long countWeekDaysAdjuster ( LocalDate start , LocalDate stop ) {\n    // Code taken from Answer by Basil Bourque.\n    // https://stackoverflow.com/a/40369140/642706\n    long count = 0;\n    Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\n    TemporalAdjuster nextWorkingDayTA = org.threeten.extra.Temporals.nextWorkingDay();\n    LocalDate ld = start;\n    if ( weekend.contains( ld.getDayOfWeek() ) ) {\n        ld = ld.with( nextWorkingDayTA );\n    }\n    while ( ld.isBefore( stop ) ) {\n        count++;\n        // Prepare for next loop.\n        ld = ld.with( nextWorkingDayTA ); // Increment to next working day (non-weekend day).\n    }\n    return count;\n}\n</code></pre>\n<p>The last uses Java Streams approach seen in the <a href=\"https://stackoverflow.com/a/51010738/642706\">Answer by Ravindra Ranwala</a>.</p>\n<pre><code>private long countWeekDaysStream ( LocalDate start , LocalDate stop ) {\n    // Code taken from the Answer by Ravindra Ranwala.\n    // https://stackoverflow.com/a/51010738/642706\n    long count = 0;\n    Set &lt; DayOfWeek &gt; weekend = EnumSet.of( DayOfWeek.SATURDAY , DayOfWeek.SUNDAY );\n    final long weekDaysBetween = start.datesUntil( stop )\n                                     .filter( d -&gt; ! weekend.contains( d.getDayOfWeek() ) )\n                                     .count();\n    return count;\n}\n</code></pre>\n<p>And the test harness.</p>\n<p><strong>Caveats:</strong></p>\n<ul>\n<li>Well, the usual caveats about micro-benchmarking being untrustworthy, prone to unjustified or unrealistic conclusions.</li>\n<li>I wish I'd learned to use the <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\" rel=\"noreferrer\"><em>JMH</em> micro-benchmarking framework</a>.</li>\n<li>I have not bothered to try optimizing any of this code. For example, in real work, the <code>TemporalAdjuster</code> could be cached outside our method.</li>\n</ul>\n<p>Test harness.</p>\n<pre><code>LocalDate start = LocalDate.of( 2018 , Month.JANUARY , 1 );\nLocalDate stop = start.plusYears( 1 );\n\nint runs = 100_000;\n\nlong go = System.nanoTime();\nfor ( int i = 1 ; i &lt;= runs ; i++ ) {\n    long count = this.countWeekDaysMath( start , stop );\n}\nlong elapsedMath = ( System.nanoTime() - go );\n\ngo = System.nanoTime();\nfor ( int i = 1 ; i &lt;= runs ; i++ ) {\n    long count = this.countWeekDaysVisit( start , stop );\n}\nlong elapsedVisit = ( System.nanoTime() - go );\n\ngo = System.nanoTime();\nfor ( int i = 1 ; i &lt;= runs ; i++ ) {\n    long count = this.countWeekDaysStream( start , stop );\n}\nlong elapsedAdjuster = ( System.nanoTime() - go );\n\ngo = System.nanoTime();\nfor ( int i = 1 ; i &lt;= runs ; i++ ) {\n    long count = this.countWeekDaysStream( start , stop );\n}\nlong elapsedStream = ( System.nanoTime() - go );\n\nSystem.out.println( &quot;math: &quot; + elapsedMath + &quot; each: &quot; + ( elapsedMath / runs ) );\nSystem.out.println( &quot;visit: &quot; + elapsedVisit + &quot; each: &quot; + ( elapsedVisit / runs ) );\nSystem.out.println( &quot;adjuster: &quot; + elapsedAdjuster + &quot; each: &quot; + ( elapsedAdjuster / runs ) );\nSystem.out.println( &quot;stream: &quot; + elapsedStream + &quot; each: &quot; + ( elapsedStream / runs ) );\n</code></pre>\n<p>When run on my MacBook Pro (Sierra) with Oracle JDK 10.0.1 and <em>ThreeTen-Extra</em> version 1.3.2, I get results consistently close to the following. The <strong>math solution is a tiny fraction of the others</strong> at a couple hundred nanos versus several thousand, as we would expect obviously. Of the other three, the <strong><code>TemporalAdjuster</code> is the longest</strong>, always over 10,000 nanos each. The visit and stream both come in well under that 10,000 nanos each, with visit being noticeably faster than streams. As seen in other examples around the internets, <strong>Java Streams usually make for nifty short code while often running significantly longer</strong>, about 20% longer in this case.</p>\n<blockquote>\n<p>math: 18313309 each: 183</p>\n</blockquote>\n<blockquote>\n<p>visit: 708420626 each: 7084</p>\n</blockquote>\n<blockquote>\n<p>adjuster: 1002157240 each: 10021</p>\n</blockquote>\n<blockquote>\n<p>stream: 924724750 each: 9247</p>\n</blockquote>\n<hr />\n<h1>About java.time</h1>\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to java.time.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\">Oracle Tutorial</a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>SE 9</strong></a> and later</li>\n<li>Built-in.</li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>SE 7</strong></a></li>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a></li>\n<li>The <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em>ThreeTenABP</em></a> project adapts <em><strong>ThreeTen-Backport</strong></em> (mentioned above) for Android specifically.</li>\n<li>See <a href=\"https://stackoverflow.com/q/38922754/642706\"><em>How to use…</em></a>.</li>\n</ul>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\">ThreeTen-Extra</a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":4474787,"reputation":7719,"user_id":3640161,"accept_rate":61,"display_name":"Tiago Lopo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490112885,"creation_date":1490112885,"answer_id":42932622,"question_id":4600034,"body_markdown":"In groovy: \r\n\r\n      public static int getWorkingDaysBetweenDates (Date start, Date end) {\r\n        def totalDays = (Integer) (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)\r\n        def int workingDays = 0\r\n    \r\n        (0..totalDays).each { def dow = (start + it)[Calendar.DAY_OF_WEEK]; if(dow != Calendar.SATURDAY &amp;&amp; dow != Calendar.SUNDAY){workingDays++} }\r\n     \r\n        workingDays\r\n      }","title":"Calculate number of weekdays between two dates in Java","body":"<p>In groovy: </p>\n\n<pre><code>  public static int getWorkingDaysBetweenDates (Date start, Date end) {\n    def totalDays = (Integer) (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)\n    def int workingDays = 0\n\n    (0..totalDays).each { def dow = (start + it)[Calendar.DAY_OF_WEEK]; if(dow != Calendar.SATURDAY &amp;&amp; dow != Calendar.SUNDAY){workingDays++} }\n\n    workingDays\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":222360,"reputation":7605,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1533277958,"creation_date":1499325055,"answer_id":44942039,"question_id":4600034,"body_markdown":"Solution without loop in 5 lines of code\r\n========================================\r\n\r\nDays between are defined in the same way as `ChronoUnit.DAYS.between(start, end)` which means there are `4` days between Monday and Friday. Since we are only interested in weekdays we have to subtract weekends, therefore from Friday until Tuesday there will be `2` weekdays(just compute `endDay - startDay` and subtract `2` for the weekend). Add `1` to the result if you want an *inclusive* result, i.e. not days between.\r\n\r\nI present two solutions.\r\n\r\n**First solution (5-liner, short and cryptic):**\r\n\r\n    import java.time.*;\r\n    import java.time.temporal.*;\r\n\r\n    public static long calcWeekDays1(final LocalDate start, final LocalDate end) {\r\n        final DayOfWeek startW = start.getDayOfWeek();\r\n        final DayOfWeek endW = end.getDayOfWeek();\r\n    \r\n        final long days = ChronoUnit.DAYS.between(start, end);\r\n        final long daysWithoutWeekends = days - 2 * ((days + startW.getValue())/7);\r\n    \r\n        //adjust for starting and ending on a Sunday:\r\n        return daysWithoutWeekends + (startW == DayOfWeek.SUNDAY ? 1 : 0) + (endW == DayOfWeek.SUNDAY ? 1 : 0);\r\n    }\r\n\r\n**Second solution:**\r\n\r\n    public static long calcWeekDays2(final LocalDate start, final LocalDate end) {\r\n        final int startW = start.getDayOfWeek().getValue();\r\n        final int endW = end.getDayOfWeek().getValue();\r\n\r\n        final long days = ChronoUnit.DAYS.between(start, end);\r\n        long result = days - 2*(days/7); //remove weekends\r\n\r\n        if (days % 7 != 0) { //deal with the rest days\r\n            if (startW == 7) {\r\n                result -= 1;\r\n            } else if (endW == 7) {  //they can&#39;t both be Sunday, otherwise rest would be zero\r\n                result -= 1;\r\n            } else if (endW &lt; startW) { //another weekend is included\r\n                result -= 2;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<h1>Solution without loop in 5 lines of code</h1>\n\n<p>Days between are defined in the same way as <code>ChronoUnit.DAYS.between(start, end)</code> which means there are <code>4</code> days between Monday and Friday. Since we are only interested in weekdays we have to subtract weekends, therefore from Friday until Tuesday there will be <code>2</code> weekdays(just compute <code>endDay - startDay</code> and subtract <code>2</code> for the weekend). Add <code>1</code> to the result if you want an <em>inclusive</em> result, i.e. not days between.</p>\n\n<p>I present two solutions.</p>\n\n<p><strong>First solution (5-liner, short and cryptic):</strong></p>\n\n<pre><code>import java.time.*;\nimport java.time.temporal.*;\n\npublic static long calcWeekDays1(final LocalDate start, final LocalDate end) {\n    final DayOfWeek startW = start.getDayOfWeek();\n    final DayOfWeek endW = end.getDayOfWeek();\n\n    final long days = ChronoUnit.DAYS.between(start, end);\n    final long daysWithoutWeekends = days - 2 * ((days + startW.getValue())/7);\n\n    //adjust for starting and ending on a Sunday:\n    return daysWithoutWeekends + (startW == DayOfWeek.SUNDAY ? 1 : 0) + (endW == DayOfWeek.SUNDAY ? 1 : 0);\n}\n</code></pre>\n\n<p><strong>Second solution:</strong></p>\n\n<pre><code>public static long calcWeekDays2(final LocalDate start, final LocalDate end) {\n    final int startW = start.getDayOfWeek().getValue();\n    final int endW = end.getDayOfWeek().getValue();\n\n    final long days = ChronoUnit.DAYS.between(start, end);\n    long result = days - 2*(days/7); //remove weekends\n\n    if (days % 7 != 0) { //deal with the rest days\n        if (startW == 7) {\n            result -= 1;\n        } else if (endW == 7) {  //they can't both be Sunday, otherwise rest would be zero\n            result -= 1;\n        } else if (endW &lt; startW) { //another weekend is included\n            result -= 2;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1529893029,"creation_date":1529849702,"answer_id":51010738,"question_id":4600034,"body_markdown":"Almost all the solutions are pretty much obsoleted and narrative. However here&#39;s a much condensed and readable solution. \r\n\r\nThis approach uses a [Java Stream](https://docs.oracle.com/javase/tutorial/collections/streams/#pipelines) provided by the [`LocalDate::datesUntil`](https://docs.oracle.com/../../java/time/LocalDate.html#datesUntil-java.time.LocalDate-) method built into in Java 9 and later. \r\n\r\n    LocalDate startDate = LocalDate.of(2018, 5, 2);\r\n    LocalDate endDate = LocalDate.now();\r\n    Set&lt;DayOfWeek&gt; weekend = EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\r\n    final long weekDaysBetween = startDate.datesUntil(endDate)\r\n    \t\t.filter(d -&gt; !weekend.contains(d.getDayOfWeek()))\r\n    \t\t.count();\r\n\r\n\r\n&gt; `.datesUntil` returns a sequential ordered stream of dates. The\r\n&gt; returned stream starts from this date (inclusive) and goes to\r\n&gt; endExclusive (exclusive) by an incremental step of 1 day.\r\n\r\nThen all the Saturdays and Sundays are filtered out. Final step is to get the count of the remaining week days.\r\n\r\nJava-9 has been released one year ago, since using it now seems reasonable to me.","title":"Calculate number of weekdays between two dates in Java","body":"<p>Almost all the solutions are pretty much obsoleted and narrative. However here's a much condensed and readable solution. </p>\n\n<p>This approach uses a <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/#pipelines\" rel=\"noreferrer\">Java Stream</a> provided by the <a href=\"https://docs.oracle.com/../../java/time/LocalDate.html#datesUntil-java.time.LocalDate-\" rel=\"noreferrer\"><code>LocalDate::datesUntil</code></a> method built into in Java 9 and later. </p>\n\n<pre><code>LocalDate startDate = LocalDate.of(2018, 5, 2);\nLocalDate endDate = LocalDate.now();\nSet&lt;DayOfWeek&gt; weekend = EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\nfinal long weekDaysBetween = startDate.datesUntil(endDate)\n        .filter(d -&gt; !weekend.contains(d.getDayOfWeek()))\n        .count();\n</code></pre>\n\n<blockquote>\n  <p><code>.datesUntil</code> returns a sequential ordered stream of dates. The\n  returned stream starts from this date (inclusive) and goes to\n  endExclusive (exclusive) by an incremental step of 1 day.</p>\n</blockquote>\n\n<p>Then all the Saturdays and Sundays are filtered out. Final step is to get the count of the remaining week days.</p>\n\n<p>Java-9 has been released one year ago, since using it now seems reasonable to me.</p>\n"},{"tags":[],"owner":{"account_id":1476930,"reputation":9005,"user_id":1387113,"accept_rate":100,"display_name":"hd84335"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532959169,"creation_date":1532959169,"answer_id":51595686,"question_id":4600034,"body_markdown":"Using `java 8` it can be easily done, example function:\r\n\r\n    long getBusinessDaysDifference(LocalDate startDate, LocalDate endDate) { \r\n\r\n        EnumSet&lt;DayOfWeek&gt; weekend = EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\r\n\t    List&lt;LocalDate&gt; list = Lists.newArrayList();\r\n    \r\n\t    LocalDate start = startDate; \t\t\r\n        while (start.isBefore(endDate)) {\r\n \t\t\tlist.add(start);\r\n \t\t\tstart = start.plus(1, ChronoUnit.DAYS);\r\n\t    }\r\n    \r\n        long numberOfDays = list.stream().filter(d -&gt; !weekend.contains(d.getDayOfWeek())).count();\r\n    \r\n        return numberOfDays;\r\n    }\r\n\r\nDescription:\r\n\r\n1. Define your `off-days` in an `EnumSet` (*weekends* in this case).\r\n2. Create a list holding all the days between the *startDate* and *endDate*.\r\n3. Reduce the outcome list by removing any occurrence of a day from the `EnumSet`.\r\n4. Then finally count the size of this reduced list.\r\n\r\n\r\n*Note: this function can be optimized, but might be helpful as a starting point*.\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p>Using <code>java 8</code> it can be easily done, example function:</p>\n\n<pre><code>long getBusinessDaysDifference(LocalDate startDate, LocalDate endDate) { \n\n    EnumSet&lt;DayOfWeek&gt; weekend = EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\n    List&lt;LocalDate&gt; list = Lists.newArrayList();\n\n    LocalDate start = startDate;        \n    while (start.isBefore(endDate)) {\n        list.add(start);\n        start = start.plus(1, ChronoUnit.DAYS);\n    }\n\n    long numberOfDays = list.stream().filter(d -&gt; !weekend.contains(d.getDayOfWeek())).count();\n\n    return numberOfDays;\n}\n</code></pre>\n\n<p>Description:</p>\n\n<ol>\n<li>Define your <code>off-days</code> in an <code>EnumSet</code> (<em>weekends</em> in this case).</li>\n<li>Create a list holding all the days between the <em>startDate</em> and <em>endDate</em>.</li>\n<li>Reduce the outcome list by removing any occurrence of a day from the <code>EnumSet</code>.</li>\n<li>Then finally count the size of this reduced list.</li>\n</ol>\n\n<p><em>Note: this function can be optimized, but might be helpful as a starting point</em>.</p>\n"},{"tags":[],"owner":{"account_id":5686042,"reputation":73,"user_id":4495583,"display_name":"Guillaume Deshors"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1535641097,"creation_date":1535641097,"answer_id":52100097,"question_id":4600034,"body_markdown":"This thread is filled with failing solutions... I started by writing a little test file which met my needs, and saw that Roland&#39;s both solutions fails, Amir&#39;s too. I wanted a solution that uses java 8 and that *does not uses loops* because, do I have to say why ?\r\n\r\nSo here&#39;s the test file : \r\n\r\n    @Test\r\n\tpublic void test() {\r\n\t\tLocalDate d1 = LocalDate.of(2018, 8, 1);\r\n\t\tLocalDate d2 = LocalDate.of(2018, 8, 2);\r\n\t\tLocalDate d3 = LocalDate.of(2018, 8, 3);\r\n\t\tLocalDate d4 = LocalDate.of(2018, 8, 4);\r\n\t\tLocalDate d5 = LocalDate.of(2018, 8, 5);\r\n\t\tLocalDate d6 = LocalDate.of(2018, 8, 6);\r\n\t\tLocalDate d7 = LocalDate.of(2018, 8, 7);\r\n\t\tLocalDate d8 = LocalDate.of(2018, 8, 8);\r\n\t\tLocalDate d9 = LocalDate.of(2018, 8, 9);\r\n\t\tLocalDate d10 = LocalDate.of(2018, 8, 10);\r\n\t\tLocalDate d15 = LocalDate.of(2018, 8, 15);\r\n\t\tLocalDate dsep = LocalDate.of(2018, 9, 5);\r\n\r\n\t\t// same day : 0 days between\r\n\t\tAssert.assertEquals(0, DateUtils.calcWeekDays1(d1, d1));\r\n\t\tAssert.assertEquals(1, DateUtils.calcWeekDays1(d1, d2));\r\n\t\tAssert.assertEquals(2, DateUtils.calcWeekDays1(d1, d3));\r\n\t\t// end on week-end \r\n\t\tAssert.assertEquals(2, DateUtils.calcWeekDays1(d1, d4));\r\n\t\tAssert.assertEquals(2, DateUtils.calcWeekDays1(d1, d5));\r\n\t\t// next week\r\n\t\tAssert.assertEquals(3, DateUtils.calcWeekDays1(d1, d6));\r\n\t\tAssert.assertEquals(4, DateUtils.calcWeekDays1(d1, d7));\r\n\t\tAssert.assertEquals(5, DateUtils.calcWeekDays1(d1, d8));\r\n\t\tAssert.assertEquals(6, DateUtils.calcWeekDays1(d1, d9));\r\n\t\tAssert.assertEquals(7, DateUtils.calcWeekDays1(d1, d10));\r\n\t\t// start on saturday\r\n\t\tAssert.assertEquals(0, DateUtils.calcWeekDays1(d4, d5));\r\n\t\tAssert.assertEquals(0, DateUtils.calcWeekDays1(d4, d6));\r\n\t\tAssert.assertEquals(1, DateUtils.calcWeekDays1(d4, d7));\r\n\t\t// start on sunday\r\n\t\tAssert.assertEquals(0, DateUtils.calcWeekDays1(d5, d5));\r\n\t\tAssert.assertEquals(0, DateUtils.calcWeekDays1(d5, d6));\r\n\t\tAssert.assertEquals(1, DateUtils.calcWeekDays1(d5, d7));\r\n\t\t// go to next week\r\n\t\tAssert.assertEquals(10, DateUtils.calcWeekDays1(d1, d15));\r\n\t\t// next month\r\n\t\tAssert.assertEquals(25, DateUtils.calcWeekDays1(d1, dsep));\r\n\t\t// start sat, go to next month\r\n\t\tAssert.assertEquals(22, DateUtils.calcWeekDays1(d4, dsep));\r\n\r\n\t}\r\n\r\nAnd here is my proposed solution, quite simple. Just let java count the number of weeks, multiply by five, and add the number of days needed to compensate the difference ; the only trick is adjusting the start and end to avoid week-ends :\r\n\r\n    public static long calcWeekDays1(LocalDate start, LocalDate end) {\r\n\t\tif (start.getDayOfWeek().getValue() &gt; 5) {\r\n\t\t\tstart = start.with(TemporalAdjusters.next(DayOfWeek.MONDAY));\r\n\t\t}\r\n\t\tif (end.getDayOfWeek().getValue() &gt; 5) {\r\n\t\t\tend = end.with(TemporalAdjusters.previous(DayOfWeek.FRIDAY));\r\n\t\t}\r\n\t\tif (start.isAfter(end)) { // may happen if you start sat. and end sunday\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tlong weeks = ChronoUnit.WEEKS.between(start, end);\r\n\t\tif (start.getDayOfWeek().getValue() &gt; end.getDayOfWeek().getValue()) {\r\n\t\t\tweeks += 1;\r\n\t\t}\r\n\t\treturn 5 * weeks + end.getDayOfWeek().getValue() - start.getDayOfWeek().getValue();\r\n\t}\r\n\r\nAnd now I will look stupid if my code fails too :)","title":"Calculate number of weekdays between two dates in Java","body":"<p>This thread is filled with failing solutions... I started by writing a little test file which met my needs, and saw that Roland's both solutions fails, Amir's too. I wanted a solution that uses java 8 and that <em>does not uses loops</em> because, do I have to say why ?</p>\n\n<p>So here's the test file : </p>\n\n<pre><code>@Test\npublic void test() {\n    LocalDate d1 = LocalDate.of(2018, 8, 1);\n    LocalDate d2 = LocalDate.of(2018, 8, 2);\n    LocalDate d3 = LocalDate.of(2018, 8, 3);\n    LocalDate d4 = LocalDate.of(2018, 8, 4);\n    LocalDate d5 = LocalDate.of(2018, 8, 5);\n    LocalDate d6 = LocalDate.of(2018, 8, 6);\n    LocalDate d7 = LocalDate.of(2018, 8, 7);\n    LocalDate d8 = LocalDate.of(2018, 8, 8);\n    LocalDate d9 = LocalDate.of(2018, 8, 9);\n    LocalDate d10 = LocalDate.of(2018, 8, 10);\n    LocalDate d15 = LocalDate.of(2018, 8, 15);\n    LocalDate dsep = LocalDate.of(2018, 9, 5);\n\n    // same day : 0 days between\n    Assert.assertEquals(0, DateUtils.calcWeekDays1(d1, d1));\n    Assert.assertEquals(1, DateUtils.calcWeekDays1(d1, d2));\n    Assert.assertEquals(2, DateUtils.calcWeekDays1(d1, d3));\n    // end on week-end \n    Assert.assertEquals(2, DateUtils.calcWeekDays1(d1, d4));\n    Assert.assertEquals(2, DateUtils.calcWeekDays1(d1, d5));\n    // next week\n    Assert.assertEquals(3, DateUtils.calcWeekDays1(d1, d6));\n    Assert.assertEquals(4, DateUtils.calcWeekDays1(d1, d7));\n    Assert.assertEquals(5, DateUtils.calcWeekDays1(d1, d8));\n    Assert.assertEquals(6, DateUtils.calcWeekDays1(d1, d9));\n    Assert.assertEquals(7, DateUtils.calcWeekDays1(d1, d10));\n    // start on saturday\n    Assert.assertEquals(0, DateUtils.calcWeekDays1(d4, d5));\n    Assert.assertEquals(0, DateUtils.calcWeekDays1(d4, d6));\n    Assert.assertEquals(1, DateUtils.calcWeekDays1(d4, d7));\n    // start on sunday\n    Assert.assertEquals(0, DateUtils.calcWeekDays1(d5, d5));\n    Assert.assertEquals(0, DateUtils.calcWeekDays1(d5, d6));\n    Assert.assertEquals(1, DateUtils.calcWeekDays1(d5, d7));\n    // go to next week\n    Assert.assertEquals(10, DateUtils.calcWeekDays1(d1, d15));\n    // next month\n    Assert.assertEquals(25, DateUtils.calcWeekDays1(d1, dsep));\n    // start sat, go to next month\n    Assert.assertEquals(22, DateUtils.calcWeekDays1(d4, dsep));\n\n}\n</code></pre>\n\n<p>And here is my proposed solution, quite simple. Just let java count the number of weeks, multiply by five, and add the number of days needed to compensate the difference ; the only trick is adjusting the start and end to avoid week-ends :</p>\n\n<pre><code>public static long calcWeekDays1(LocalDate start, LocalDate end) {\n    if (start.getDayOfWeek().getValue() &gt; 5) {\n        start = start.with(TemporalAdjusters.next(DayOfWeek.MONDAY));\n    }\n    if (end.getDayOfWeek().getValue() &gt; 5) {\n        end = end.with(TemporalAdjusters.previous(DayOfWeek.FRIDAY));\n    }\n    if (start.isAfter(end)) { // may happen if you start sat. and end sunday\n        return 0;\n    }\n    long weeks = ChronoUnit.WEEKS.between(start, end);\n    if (start.getDayOfWeek().getValue() &gt; end.getDayOfWeek().getValue()) {\n        weeks += 1;\n    }\n    return 5 * weeks + end.getDayOfWeek().getValue() - start.getDayOfWeek().getValue();\n}\n</code></pre>\n\n<p>And now I will look stupid if my code fails too :)</p>\n"},{"tags":[],"owner":{"account_id":11311035,"reputation":1860,"user_id":8294118,"accept_rate":100,"display_name":"user666"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565952134,"creation_date":1551363862,"answer_id":54927860,"question_id":4600034,"body_markdown":"    public long getNumberOfWeekDayBetweenDates(LocalDate startDate, LocalDate endDate, String dayOfWeek) {\r\n            long result = -1;\r\n            if (startDate != null &amp;&amp; endDate != null &amp;&amp; dayOfWeek != null &amp;&amp; (startDate.isBefore(endDate) || startDate.isEqual(endDate))) {\r\n                java.time.DayOfWeek givenDayOfWeek = java.time.DayOfWeek.valueOf(dayOfWeek);\r\n                // find the first given day of week in the interval\r\n                LocalDate firstOccurrence = startDate.with(TemporalAdjusters.nextOrSame(givenDayOfWeek));\r\n                // similarly find last Monday\r\n                LocalDate lastOccurrence = endDate.with(TemporalAdjusters.previousOrSame(givenDayOfWeek));\r\n                if (firstOccurrence != null &amp;&amp; lastOccurrence != null) {\r\n                    // count the number of weeks between the first and last occurrence, then add 1 as end day is exclusive\r\n                    result = ChronoUnit.WEEKS.between(firstOccurrence, lastOccurrence) + 1;\r\n                } else if (firstOccurrence == null &amp;&amp; lastOccurrence == null) {\r\n                    // no occurrence\r\n                    result = 0;\r\n                } else {\r\n                    result = 1;\r\n                }\r\n            }\r\n            return result;\r\n        }","title":"Calculate number of weekdays between two dates in Java","body":"<pre><code>public long getNumberOfWeekDayBetweenDates(LocalDate startDate, LocalDate endDate, String dayOfWeek) {\n        long result = -1;\n        if (startDate != null &amp;&amp; endDate != null &amp;&amp; dayOfWeek != null &amp;&amp; (startDate.isBefore(endDate) || startDate.isEqual(endDate))) {\n            java.time.DayOfWeek givenDayOfWeek = java.time.DayOfWeek.valueOf(dayOfWeek);\n            // find the first given day of week in the interval\n            LocalDate firstOccurrence = startDate.with(TemporalAdjusters.nextOrSame(givenDayOfWeek));\n            // similarly find last Monday\n            LocalDate lastOccurrence = endDate.with(TemporalAdjusters.previousOrSame(givenDayOfWeek));\n            if (firstOccurrence != null &amp;&amp; lastOccurrence != null) {\n                // count the number of weeks between the first and last occurrence, then add 1 as end day is exclusive\n                result = ChronoUnit.WEEKS.between(firstOccurrence, lastOccurrence) + 1;\n            } else if (firstOccurrence == null &amp;&amp; lastOccurrence == null) {\n                // no occurrence\n                result = 0;\n            } else {\n                result = 1;\n            }\n        }\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1562227347,"creation_date":1562227347,"answer_id":56883305,"question_id":4600034,"body_markdown":"Solution for Java 8 without loop and INCLUSIVE intervals: \r\n\r\n\tpublic long getDaysWithoutSundays(LocalDate startDate, LocalDate endDate) {\r\n\t\tlong numberOfDays = ChronoUnit.DAYS.between(startDate, endDate) + 1;\r\n\t\tlong numberOfSundays = numberOfDays / 7;\r\n\t\tlong rest = numberOfDays % 7;\r\n\t\tif (rest &gt; 0) {\r\n\t\t\tint startToEnd = startDate.getDayOfWeek().getValue() - endDate.getDayOfWeek().getValue();\r\n\t\t\tif (startToEnd &gt; 0) {\r\n\t\t\t\tnumberOfSundays++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (endDate.getDayOfWeek().equals(DayOfWeek.SUNDAY)) {\r\n\t\t\t\t\tnumberOfSundays++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn numberOfDays - numberOfSundays;\r\n\t}","title":"Calculate number of weekdays between two dates in Java","body":"<p>Solution for Java 8 without loop and INCLUSIVE intervals: </p>\n\n<pre><code>public long getDaysWithoutSundays(LocalDate startDate, LocalDate endDate) {\n    long numberOfDays = ChronoUnit.DAYS.between(startDate, endDate) + 1;\n    long numberOfSundays = numberOfDays / 7;\n    long rest = numberOfDays % 7;\n    if (rest &gt; 0) {\n        int startToEnd = startDate.getDayOfWeek().getValue() - endDate.getDayOfWeek().getValue();\n        if (startToEnd &gt; 0) {\n            numberOfSundays++;\n        }\n        else {\n            if (endDate.getDayOfWeek().equals(DayOfWeek.SUNDAY)) {\n                numberOfSundays++;\n            }\n        }\n    }\n    return numberOfDays - numberOfSundays;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4218968,"reputation":4362,"user_id":3454208,"accept_rate":48,"display_name":"Varun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570524047,"creation_date":1570524047,"answer_id":58282879,"question_id":4600034,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n\r\n    /**\r\n     * \r\n     * @author varun.vishwakarma\r\n     *\r\n     */\r\n    public class FindWeekendsInDateRange {\r\n    \tstatic HashMap&lt;Integer, String&gt; daysOfWeek=null;\r\n    \t\r\n    \t\r\n    \tstatic {\r\n    \t\tdaysOfWeek = new HashMap&lt;Integer, String&gt;();\r\n    \t\tdaysOfWeek.put(new Integer(1), &quot;Sun&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(2), &quot;Mon&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(3), &quot;Tue&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(4), &quot;Wed&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(5), &quot;Thu&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(6), &quot;Fri&quot;);\r\n    \t\tdaysOfWeek.put(new Integer(7), &quot;Sat&quot;);\r\n    \t}\r\n\r\n    \t/**\r\n    \t * \r\n    \t * @param from_date \r\n    \t * @param to_date\r\n    \t * @return \r\n    \t */\r\n    \tpublic static List&lt;Date&gt;  calculateWeekendsInDateReange(Date fromDate, Date toDate) {\r\n    \t\tList&lt;Date&gt; listOfWeekends = new ArrayList&lt;Date&gt;();\r\n    \t\t\tCalendar from = Calendar.getInstance();\r\n    \t\t\tCalendar to = Calendar.getInstance();\r\n    \t\t\tfrom.setTime(fromDate);\r\n    \t\t\tto.setTime(toDate);\r\n    \t\t\twhile (from.getTimeInMillis() &lt; to.getTimeInMillis()) {\r\n    \t\t\t\tif (daysOfWeek.get(from.get(Calendar.DAY_OF_WEEK)) == &quot;Sat&quot;) {\r\n    \t\t\t\t\tDate sat = from.getTime();\r\n    \t\t\t\t\tlistOfWeekends.add(sat);\r\n    \t\t\t\t} else if (daysOfWeek.get(from.get(Calendar.DAY_OF_WEEK)) == &quot;Sun&quot;) {\r\n    \t\t\t\t\tDate sun = from.getTime();\r\n    \t\t\t\t\tlistOfWeekends.add(sun);\r\n    \t\t\t\t}\r\n    \t\t\t\tfrom.add(Calendar.DAY_OF_MONTH, 1);\r\n    \t\t\t}\r\n    \t\treturn listOfWeekends;\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString fromDate = &quot;7-Oct-2019&quot;;\r\n    \t\tString toDate = &quot;25-Oct-2019&quot;;\r\n    \t\tSystem.out.println(FindWeekendsInDateRange.calculateWeekendsInDateReange(new Date(fromDate), new Date(toDate)));\r\n    \t\r\n\r\n    \t}\r\n\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Calculate number of weekdays between two dates in Java","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\n/**\r\n * \r\n * @author varun.vishwakarma\r\n *\r\n */\r\npublic class FindWeekendsInDateRange {\r\n\tstatic HashMap&lt;Integer, String&gt; daysOfWeek=null;\r\n\t\r\n\t\r\n\tstatic {\r\n\t\tdaysOfWeek = new HashMap&lt;Integer, String&gt;();\r\n\t\tdaysOfWeek.put(new Integer(1), \"Sun\");\r\n\t\tdaysOfWeek.put(new Integer(2), \"Mon\");\r\n\t\tdaysOfWeek.put(new Integer(3), \"Tue\");\r\n\t\tdaysOfWeek.put(new Integer(4), \"Wed\");\r\n\t\tdaysOfWeek.put(new Integer(5), \"Thu\");\r\n\t\tdaysOfWeek.put(new Integer(6), \"Fri\");\r\n\t\tdaysOfWeek.put(new Integer(7), \"Sat\");\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param from_date \r\n\t * @param to_date\r\n\t * @return \r\n\t */\r\n\tpublic static List&lt;Date&gt;  calculateWeekendsInDateReange(Date fromDate, Date toDate) {\r\n\t\tList&lt;Date&gt; listOfWeekends = new ArrayList&lt;Date&gt;();\r\n\t\t\tCalendar from = Calendar.getInstance();\r\n\t\t\tCalendar to = Calendar.getInstance();\r\n\t\t\tfrom.setTime(fromDate);\r\n\t\t\tto.setTime(toDate);\r\n\t\t\twhile (from.getTimeInMillis() &lt; to.getTimeInMillis()) {\r\n\t\t\t\tif (daysOfWeek.get(from.get(Calendar.DAY_OF_WEEK)) == \"Sat\") {\r\n\t\t\t\t\tDate sat = from.getTime();\r\n\t\t\t\t\tlistOfWeekends.add(sat);\r\n\t\t\t\t} else if (daysOfWeek.get(from.get(Calendar.DAY_OF_WEEK)) == \"Sun\") {\r\n\t\t\t\t\tDate sun = from.getTime();\r\n\t\t\t\t\tlistOfWeekends.add(sun);\r\n\t\t\t\t}\r\n\t\t\t\tfrom.add(Calendar.DAY_OF_MONTH, 1);\r\n\t\t\t}\r\n\t\treturn listOfWeekends;\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\tString fromDate = \"7-Oct-2019\";\r\n\t\tString toDate = \"25-Oct-2019\";\r\n\t\tSystem.out.println(FindWeekendsInDateRange.calculateWeekendsInDateReange(new Date(fromDate), new Date(toDate)));\r\n\t\r\n\r\n\t}\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":7666017,"reputation":7604,"user_id":5809720,"display_name":"Sagar Gangwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614336677,"creation_date":1614336677,"answer_id":66384444,"question_id":4600034,"body_markdown":"For **`LocalDate`** supported by latest java version you can try below function.\r\n\r\nIt provides support of function[**`getDayOfWeek()`**][1].\r\n\r\nThe **`getDayOfWeek()`** method of **`LocalDate`** class in Java gets the day-of-week field, which is an enum DayOfWeek.\r\n\r\n    public static int getWeekEndCount(LocalDate fromDate, LocalDate toDate) {\r\n            int saturday = 0;\r\n            int sunday = 0;\r\n            while (!fromDate.isAfter(toDate)) {\r\n                if (fromDate.getDayOfWeek().equals(DayOfWeek.SATURDAY))\r\n                    saturday++;\r\n                else if (fromDate.getDayOfWeek().equals(DayOfWeek.SUNDAY))\r\n                    sunday++;\r\n                fromDate = fromDate.plusDays(1);\r\n            }\r\n            System.out.println(&quot;Saturday count==&quot;+saturday);\r\n            System.out.println(&quot;Sunday count==&quot;+sunday);\r\n            return saturday+sunday;\r\n        }\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/localdate-getdayofweek-method-in-java/","title":"Calculate number of weekdays between two dates in Java","body":"<p>For <strong><code>LocalDate</code></strong> supported by latest java version you can try below function.</p>\n<p>It provides support of function<a href=\"https://www.geeksforgeeks.org/localdate-getdayofweek-method-in-java/\" rel=\"nofollow noreferrer\"><strong><code>getDayOfWeek()</code></strong></a>.</p>\n<p>The <strong><code>getDayOfWeek()</code></strong> method of <strong><code>LocalDate</code></strong> class in Java gets the day-of-week field, which is an enum DayOfWeek.</p>\n<pre><code>public static int getWeekEndCount(LocalDate fromDate, LocalDate toDate) {\n        int saturday = 0;\n        int sunday = 0;\n        while (!fromDate.isAfter(toDate)) {\n            if (fromDate.getDayOfWeek().equals(DayOfWeek.SATURDAY))\n                saturday++;\n            else if (fromDate.getDayOfWeek().equals(DayOfWeek.SUNDAY))\n                sunday++;\n            fromDate = fromDate.plusDays(1);\n        }\n        System.out.println(&quot;Saturday count==&quot;+saturday);\n        System.out.println(&quot;Sunday count==&quot;+sunday);\n        return saturday+sunday;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59102,"reputation":627,"user_id":176859,"display_name":"idarwin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677285065,"creation_date":1677285065,"answer_id":75562548,"question_id":4600034,"body_markdown":"I&#39;m surprised that every solution given here fails to account for business holidays, which occur in most countries every few months at least, so any span more than a few months will give an incorrect answer. Fortunately, Ravindra&#39;s answer using Streams is, despite the inconsequential (for spans under ~10 years) overhead, the best one because it is trivial to correct:\r\n\r\n    import java.time.*;\r\n    import java.util.*;\r\n\r\n    import static java.time.temporal.ChronoUnit.DAYS;\r\n\r\n    public class WeekDaysLeft {\r\n    public static void main(String[] args) {\r\n        LocalDate startDate = LocalDate.now(); // Early 2023\r\n        LocalDate endDate = LocalDate.of(2023, 6, 23);\r\n        Set&lt;DayOfWeek&gt; weekendDays =\r\n           EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\r\n        Set&lt;LocalDate&gt; holidays =\r\n            Set.of(LocalDate.of(2023,4,7),\r\n                LocalDate.of(2023,4,10));\r\n        final long weekDaysBetween =\r\n            startDate.datesUntil(endDate)\r\n            .filter(d -&gt; !weekendDays.contains(\r\n                d.getDayOfWeek()))\r\n            .filter(d -&gt; !holidays.contains(d))\r\n            .count();\r\n        System.out.println(weekDaysBetween);\r\n    }\r\n    }\r\n\r\nIn regard to my claim that the overhead is inconsequential:\r\n 1. Run my solution under time(1) on Unix/Linux\r\n e.g., time java WeekDaysLeft.java\r\n 2. Change the end-date to 2033, and repeat step 1.\r\nOn my system, the user time went DOWN slightly (user time up trivially).\r\nAnd, of course, if you&#39;re running this after June, 2023, bump all the years given.","title":"Calculate number of weekdays between two dates in Java","body":"<p>I'm surprised that every solution given here fails to account for business holidays, which occur in most countries every few months at least, so any span more than a few months will give an incorrect answer. Fortunately, Ravindra's answer using Streams is, despite the inconsequential (for spans under ~10 years) overhead, the best one because it is trivial to correct:</p>\n<pre><code>import java.time.*;\nimport java.util.*;\n\nimport static java.time.temporal.ChronoUnit.DAYS;\n\npublic class WeekDaysLeft {\npublic static void main(String[] args) {\n    LocalDate startDate = LocalDate.now(); // Early 2023\n    LocalDate endDate = LocalDate.of(2023, 6, 23);\n    Set&lt;DayOfWeek&gt; weekendDays =\n       EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);\n    Set&lt;LocalDate&gt; holidays =\n        Set.of(LocalDate.of(2023,4,7),\n            LocalDate.of(2023,4,10));\n    final long weekDaysBetween =\n        startDate.datesUntil(endDate)\n        .filter(d -&gt; !weekendDays.contains(\n            d.getDayOfWeek()))\n        .filter(d -&gt; !holidays.contains(d))\n        .count();\n    System.out.println(weekDaysBetween);\n}\n}\n</code></pre>\n<p>In regard to my claim that the overhead is inconsequential:</p>\n<ol>\n<li>Run my solution under time(1) on Unix/Linux\ne.g., time java WeekDaysLeft.java</li>\n<li>Change the end-date to 2033, and repeat step 1.\nOn my system, the user time went DOWN slightly (user time up trivially).\nAnd, of course, if you're running this after June, 2023, bump all the years given.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23983780,"reputation":11,"user_id":17970844,"display_name":"UdacianND004"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694364626,"creation_date":1694364626,"answer_id":77077080,"question_id":4600034,"body_markdown":"Without loop, excluding last day:\r\n```\r\npublic static int daysWithoutWeekends(Date start, Date end){\r\n        if(start.after(end)){\r\n            var temp = start;\r\n            start = end;\r\n            end = temp;\r\n        }\r\n        Calendar c1 = Calendar.getInstance();\r\n        c1.setTime(start);\r\n        int w1 = c1.get(Calendar.DAY_OF_WEEK);\r\n        c1.add(Calendar.DAY_OF_WEEK, 7-w1);\r\n\r\n        Calendar c2 = Calendar.getInstance();\r\n        c2.setTime(end);\r\n        int w2 = c2.get(Calendar.DAY_OF_WEEK);\r\n        c2.add(Calendar.DAY_OF_WEEK, -w2);\r\n\r\n        int days =(int) ((c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24));\r\n        int daysWithoutWeekendDays = days-(days*2/7);\r\n\r\n        int additionalDays = Math.min(7-w1, 5) + Math.min(Math.max(w2-2, 0), 5);\r\n        return daysWithoutWeekendDays+additionalDays;\r\n    }\r\n```","title":"Calculate number of weekdays between two dates in Java","body":"<p>Without loop, excluding last day:</p>\n<pre><code>public static int daysWithoutWeekends(Date start, Date end){\n        if(start.after(end)){\n            var temp = start;\n            start = end;\n            end = temp;\n        }\n        Calendar c1 = Calendar.getInstance();\n        c1.setTime(start);\n        int w1 = c1.get(Calendar.DAY_OF_WEEK);\n        c1.add(Calendar.DAY_OF_WEEK, 7-w1);\n\n        Calendar c2 = Calendar.getInstance();\n        c2.setTime(end);\n        int w2 = c2.get(Calendar.DAY_OF_WEEK);\n        c2.add(Calendar.DAY_OF_WEEK, -w2);\n\n        int days =(int) ((c2.getTimeInMillis()-c1.getTimeInMillis())/(1000*60*60*24));\n        int daysWithoutWeekendDays = days-(days*2/7);\n\n        int additionalDays = Math.min(7-w1, 5) + Math.min(Math.max(w2-2, 0), 5);\n        return daysWithoutWeekendDays+additionalDays;\n    }\n</code></pre>\n"}],"owner":{"account_id":265739,"reputation":1795,"user_id":552914,"accept_rate":97,"display_name":"John C"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102504,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":4600057,"answer_count":22,"score":61,"last_activity_date":1694364626,"creation_date":1294190073,"question_id":4600034,"body_markdown":"Can anyone point me to some Java snippet wherein i can get business (except Sat and Sun) days between two dates.","title":"Calculate number of weekdays between two dates in Java","body":"<p>Can anyone point me to some Java snippet wherein i can get business (except Sat and Sun) days between two dates.</p>\n"},{"tags":["java","spring","zeromq","jzmq"],"comments":[{"owner":{"account_id":448441,"reputation":3683,"user_id":6783775,"display_name":"rveerd"},"score":0,"creation_date":1689346346,"post_id":76644159,"comment_id":135205004,"body_markdown":"Errno 4 is `EINTR`, an interrupted system call. That means your program receives a signal while calling a system function. Apparently when trying to receive data from the socket. Probably your `recv()` call is blocking waiting for data when it is interrupted. A solution is to retry the interrupted call.","body":"Errno 4 is <code>EINTR</code>, an interrupted system call. That means your program receives a signal while calling a system function. Apparently when trying to receive data from the socket. Probably your <code>recv()</code> call is blocking waiting for data when it is interrupted. A solution is to retry the interrupted call."}],"answers":[{"tags":[],"owner":{"account_id":2463651,"reputation":7805,"user_id":2147218,"display_name":"bazza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691046115,"creation_date":1691046115,"answer_id":76825617,"question_id":76644159,"body_markdown":"I&#39;m assuming that, what&#39;s not shown, is the other program paired with this serving as the other endpoints for the PUSH and PULL sockets that you create and connect. \r\n\r\nI think that the problem lies in your other program that we&#39;re not seeing. Is that receiving the `GET_CURRENCY_STRENGTHS` message, replying, and then immediately terminating, or immediately cleaning up its context in much the same way as this code snippet is? \r\n\r\nIf so, it is the immediate termination / clean up that is the problem. The act of sending a message using ZMQ is non blocking; you&#39;re just pushing the message on to a queue that&#39;s managed by the thread(s) that ZMQ starts up and manages in the background. If after a ZMQ send() you immediately terminate the program or clean up, that means in all likelihood the management threads haven&#39;t actually had any time to do anything at all - maybe they&#39;ve not even been scheduled by the OS at this point. \r\n\r\nThe result of the program terminating is that the OS cleans up whatever resources have not yet been cleaned up by the program itself - sockets, allocated memory, threads, the lot. \r\n\r\nThe fact that this is all on localhost is interesting, because the OS has full visibility of the underlying tcp socket and can tell the connecting end (this program) a lot more about the state of the tcp socket than if the other endpoints were on another computer.  \r\n\r\nIf this is the case, at other end of the connections (in the code snippet you&#39;ve given us), what&#39;s happening is that ZMQ is patiently waiting in a blocked system call for something to come in via a tcp socket. Except, that socket is getting torn down by the OS (or the other end cleaning up). So, the socket read is terminated (because the socket no longer exists) and you get an ugly exception as shown.\r\n\r\nAt least, that&#39;s my guess. If that&#39;s correct, try putting in some delay in the other program (that we&#39;ve not seen) between the zmq send() and the termination of the program, allow things to happen in the background.\r\n\r\nThe variability in whether your code succeeds or not would be down to the random nature of the threads being scheduled or not following the zmq send(). The communication between the application program and the zme management thread(s) is done via IPC pipes (or other things like semaphores), all of which give the OS an opportunity to re-schedule threads. Sometimes it might say one thread gets scheduled, another time it may not, depending on how much of a time slice the main application thread has had (and a heap of other mysterious, arcane factors). \r\n\r\n**In General**\r\n\r\nIn ZMQ in particular, and in other Actor Model systems in general, termination is something that has to be agreed on. Because it&#39;s buffering messages inside the transport, you&#39;ve no idea whether &quot;that last, final message&quot; has made it through to the receiving end and that it is safe to terminate. What you need to have is a either a time delay before closing to allow everything to settle down to quiescence, or some explicit messaging acknowledging that the final message has propagated to everywhere. ","title":"Why am I getting an Errno 4 ZMQException?","body":"<p>I'm assuming that, what's not shown, is the other program paired with this serving as the other endpoints for the PUSH and PULL sockets that you create and connect.</p>\n<p>I think that the problem lies in your other program that we're not seeing. Is that receiving the <code>GET_CURRENCY_STRENGTHS</code> message, replying, and then immediately terminating, or immediately cleaning up its context in much the same way as this code snippet is?</p>\n<p>If so, it is the immediate termination / clean up that is the problem. The act of sending a message using ZMQ is non blocking; you're just pushing the message on to a queue that's managed by the thread(s) that ZMQ starts up and manages in the background. If after a ZMQ send() you immediately terminate the program or clean up, that means in all likelihood the management threads haven't actually had any time to do anything at all - maybe they've not even been scheduled by the OS at this point.</p>\n<p>The result of the program terminating is that the OS cleans up whatever resources have not yet been cleaned up by the program itself - sockets, allocated memory, threads, the lot.</p>\n<p>The fact that this is all on localhost is interesting, because the OS has full visibility of the underlying tcp socket and can tell the connecting end (this program) a lot more about the state of the tcp socket than if the other endpoints were on another computer.</p>\n<p>If this is the case, at other end of the connections (in the code snippet you've given us), what's happening is that ZMQ is patiently waiting in a blocked system call for something to come in via a tcp socket. Except, that socket is getting torn down by the OS (or the other end cleaning up). So, the socket read is terminated (because the socket no longer exists) and you get an ugly exception as shown.</p>\n<p>At least, that's my guess. If that's correct, try putting in some delay in the other program (that we've not seen) between the zmq send() and the termination of the program, allow things to happen in the background.</p>\n<p>The variability in whether your code succeeds or not would be down to the random nature of the threads being scheduled or not following the zmq send(). The communication between the application program and the zme management thread(s) is done via IPC pipes (or other things like semaphores), all of which give the OS an opportunity to re-schedule threads. Sometimes it might say one thread gets scheduled, another time it may not, depending on how much of a time slice the main application thread has had (and a heap of other mysterious, arcane factors).</p>\n<p><strong>In General</strong></p>\n<p>In ZMQ in particular, and in other Actor Model systems in general, termination is something that has to be agreed on. Because it's buffering messages inside the transport, you've no idea whether &quot;that last, final message&quot; has made it through to the receiving end and that it is safe to terminate. What you need to have is a either a time delay before closing to allow everything to settle down to quiescence, or some explicit messaging acknowledging that the final message has propagated to everywhere.</p>\n"}],"owner":{"account_id":17260307,"reputation":3,"user_id":12498373,"display_name":"jose1278"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694364299,"creation_date":1688837222,"question_id":76644159,"body_markdown":"I am getting this exception:\r\n\r\n   \r\n\r\n     org.zeromq.ZMQException: Errno 4\r\n        \tat org.zeromq.ZMQ$Socket.mayRaise(ZMQ.java:3732) ~[jeromq-0.5.3.jar:na]\r\n        \tat org.zeromq.ZMQ$Socket.recv(ZMQ.java:3530) ~[jeromq-0.5.3.jar:na]\r\n        \tat com.forexassistant.service.zeromq.CurrencyStrengthZeroMQ.sendCurrencyStrengthRequest(CurrencyStrengthZeroMQ.java:30) ~[classes/:na]\r\n        \tat com.forexassistant.service.algorithmlogic.AlgorithmLogic.getCurrencyStrength(AlgorithmLogic.java:209) ~[classes/:na]\r\n        \tat sun.reflect.GeneratedMethodAccessor111.invoke(Unknown Source) ~[na:na]\r\n        \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_241]\r\n        \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_241]\r\n        \tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.3.22.jar:5.3.22]\r\n        \tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.3.22.jar:5.3.22]\r\n        \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_241]\r\n        \tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [na:1.8.0_241]\r\n        \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_241]\r\n        \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [na:1.8.0_241]\r\n        \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_241]\r\n        \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_241]\r\n        \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_241]\r\n        \tSuppressed: org.zeromq.ZMQException: Errno 4\r\n        \t\tat zmq.Ctx.terminate(Ctx.java:304) ~[jeromq-0.5.3.jar:na]\r\n        \t\tat org.zeromq.ZMQ$Context.term(ZMQ.java:671) ~[jeromq-0.5.3.jar:na]\r\n        \t\tat org.zeromq.ZContext.destroy(ZContext.java:136) ~[jeromq-0.5.3.jar:na]\r\n        \t\tat org.zeromq.ZContext.close(ZContext.java:463) ~[jeromq-0.5.3.jar:na]\r\n        \t\tat com.forexassistant.service.zeromq.CurrencyStrengthZeroMQ.sendCurrencyStrengthRequest(CurrencyStrengthZeroMQ.java:37) ~[classes/:na]\r\n        \t\t... 13 common frames omitted\r\n\r\nI have no idea why it is happening, the logic in question is this that communicates with the socket:\r\n\r\n    public String sendCurrencyStrengthRequest() {\r\n    \t\ttry (ZContext context = new ZContext()) {\r\n    \t\t\tZMQ.Socket socket = context.createSocket(SocketType.PUSH);\r\n    \t        socket.connect(&quot;tcp://localhost:32868&quot;);\r\n    \t        ZMQ.Socket socket2 = context.createSocket(SocketType.PULL);\r\n    \t\t    socket2.connect(&quot;tcp://localhost:32869&quot;); \r\n    \t        \r\n    \t\t    String msg = &quot;GET_CURRENCY_STRENGTHS&quot;;\r\n    \t        socket.send(msg,1);\r\n    \t        \r\n    \t\t\r\n    \t     \twhile (!Thread.currentThread().isInterrupted()) {\r\n    \t\t    \t byte[] reply = socket2.recv(0);\r\n    \t\t    \t if(reply!=null) {\r\n    \t\t    \t\t currencyStrengths= new String(reply, ZMQ.CHARSET);\r\n    \t\t    \t }\r\n    \t\t    \t context.close();\r\n    \t\t    \t break;  \t \r\n    \t\t    }\r\n    \t\t}\r\n    \t\treturn currencyStrengths;\r\n    \t}\r\n\r\nThis is the code from the other bit:\r\n```\r\n\r\n\r\n// CREATE ZeroMQ Context\r\nContext context(PROJECT_NAME);\r\n\r\n// CREATE ZMQ_PUSH SOCKET\r\nSocket pushSocket(context, ZMQ_PUSH);\r\n\r\n// CREATE ZMQ_PULL SOCKET\r\nSocket pullSocket(context, ZMQ_PULL);\r\n\r\n// CREATE ZMQ_PUB SOCKET\r\nSocket pubSocket(context, ZMQ_PUB);\r\n\r\n\r\nint OnInit() {\r\n\r\n   EventSetMillisecondTimer(MILLISECOND_TIMER);     // Set Millisecond Timer to get client socket input\r\n   \r\n   //EventSetTimer(1790);\r\n   \r\n   context.setBlocky(false);\r\n   \r\n   // Send responses to PULL_PORT that client is listening on.   \r\n   if(!pushSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT))) {\r\n      Print(&quot;[PUSH] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\r\n      return(INIT_FAILED);\r\n   } else {\r\n      Print(&quot;[PUSH] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\r\n      pushSocket.setSendHighWaterMark(1);\r\n      pushSocket.setLinger(0);\r\n   }\r\n   \r\n   // Receive commands from PUSH_PORT that client is sending to.     \r\n   if(!pullSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT))) {\r\n      Print(&quot;[PULL] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\r\n      return(INIT_FAILED);\r\n   } else {\r\n      Print(&quot;[PULL] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\r\n      pullSocket.setReceiveHighWaterMark(1);   \r\n      pullSocket.setLinger(0); \r\n   }\r\n   \r\n   // Send new market data to PUB_PORT that client is subscribed to.      \r\n   if(!pubSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT))) {\r\n      Print(&quot;[PUB] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\r\n      return(INIT_FAILED);\r\n   } else {\r\n      Print(&quot;[PUB] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\r\n      pubSocket.setSendHighWaterMark(1);\r\n      pubSocket.setLinger(0);\r\n   }\r\n   return(INIT_SUCCEEDED);\r\n}\r\n//+------------------------------------------------------------------+\r\n//| Expert deinitialization function                                 |\r\n//+------------------------------------------------------------------+\r\nvoid OnDeinit(const int reason) {\r\n\r\n   Print(&quot;[PUSH] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\r\n   pushSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT));\r\n   pushSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT));\r\n   \r\n   \r\n   Print(&quot;[PULL] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\r\n   pullSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT));\r\n   pullSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT));\r\n   \r\n   \r\n   if (Publish_MarketData == true || Publish_MarketRates == true) {\r\n      Print(&quot;[PUB] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\r\n      pubSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT));\r\n      pubSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT));\r\n   }\r\n   \r\n   // Shutdown ZeroMQ Context\r\n   context.shutdown();\r\n   context.destroy(0);\r\n   \r\n   EventKillTimer();\r\n}\r\n\r\n\r\n//+------------------------------------------------------------------+\r\n//| Expert timer function                                            |\r\n//+------------------------------------------------------------------+\r\nvoid OnTimer() {\r\n\r\n   /*\r\n      Use this OnTimer() function to get and respond to commands\r\n   */\r\n   \r\n   if(CheckServerStatus() == true) {\r\n      // Get client&#39;s response, but don&#39;t block.\r\n      bool hasAllOtherRequest = pullSocket.recv(request, true);\r\n      \r\n      if(hasAllOtherRequest){\r\n         if (request.size() &gt; 0) {\r\n            // Wait \r\n            // pullSocket.recv(request,false);\r\n            \r\n            // MessageHandler() should go here.   \r\n            ZmqMsg reply = MessageHandler(request);\r\n            \r\n            \r\n            // Send response, and block\r\n            // pushSocket.send(reply);\r\n            \r\n            // Send response, but don&#39;t block\r\n            if(!pushSocket.send(reply, true)) {\r\n              Print(&quot;###ERROR### Sending message&quot;);\r\n            }\r\n         }\r\n      }\r\n      \r\n      \r\n      // update prices regularly in case there was no tick within X milliseconds (for non-chart symbols). \r\n      if (GetTickCount() &gt;= lastUpdateMillis + MILLISECOND_TIMER_PRICES) OnTick();\r\n   }\r\n}\r\n//+------------------------------------------------------------------+\r\n\r\nZmqMsg MessageHandler(ZmqMsg &amp;_request) {\r\n   \r\n   // Output object\r\n   ZmqMsg reply;\r\n   \r\n   // Message components for later.\r\n   string components[11];\r\n   \r\n   if(_request.size() &gt; 0) {\r\n   \r\n      // Get data from request   \r\n      ArrayResize(_data, _request.size());\r\n      _request.getData(_data);\r\n      string dataStr = CharArrayToString(_data);\r\n      \r\n      \r\n      // Process data\r\n      ParseZmqMessage(dataStr, components);\r\n      \r\n      // Interpret data\r\n      InterpretZmqMessage(pushSocket, components);\r\n      \r\n      \r\n   } else {\r\n      // NO DATA RECEIVED\r\n   }\r\n   \r\n   return(reply);\r\n}\r\n\r\n\r\n//+------------------------------------------------------------------+\r\n// Interpret Zmq Message and perform actions\r\nvoid InterpretZmqMessage(Socket &amp;pSocket, string &amp;compArray[]) {\r\n\r\n   \r\n   int switch_action = 0;\r\n   \r\n   /* 02-08-2019 10:41 CEST - HEARTBEAT */\r\n   if(compArray[0] == &quot;GET_CURRENCY_STRENGTHS&quot;)\r\n      switch_action = 14; \r\n  \r\n   /* Setup processing variables */\r\n   string zmq_ret = &quot;&quot;;\r\n   string response = &quot;&quot;;\r\n   string responseArray[10];\r\n   string ret = &quot;&quot;;\r\n   int ticket = -1;\r\n   bool ans = false;\r\n   \r\n   /****************************\r\n    * PERFORM SOME CHECKS HERE *\r\n    ****************************/\r\n   if (CheckOpsStatus(pSocket, switch_action) == true) {\r\n   \r\n      switch(switch_action) {\r\n       case 14: \r\n            \r\n            getCurrencyStrengths(responseArray);\r\n            \r\n            response = response + responseArray[0] + &quot;, &quot;;\r\n            response = response + responseArray[1] + &quot;, &quot;;\r\n            response = response + responseArray[2] + &quot;, &quot;;\r\n            response = response + responseArray[3] + &quot;, &quot;;\r\n            response = response + responseArray[4] + &quot;, &quot;;\r\n            response = response + responseArray[5];\r\n            \r\n               \r\n            InformPullClient(pSocket, response);\r\n            \r\n            break;\r\n            \r\n            \r\n         default: \r\n            break;\r\n      }\r\n   }\r\n}\r\n\r\n\r\n\r\n// Inform Client\r\nvoid InformPullClient(Socket&amp; pSocket, string message) {\r\n\r\n   ZmqMsg pushReply(message);\r\n   \r\n   pSocket.send(pushReply,true); // NON-BLOCKING\r\n   \r\n}\r\n\r\n\r\n```\r\nWhen the error happens then the line to print Print(&quot;###ERROR### Sending message&quot;); is hit and causes that to be printed in the other application.\r\n\r\n\r\nAm I doing this wrong? sendCurrencyStrengthRequest() is scheduled in Spring to be called every 5 seconds and there is another function that will be called every 30mins that uses a different pull and push socket within a different context, all this works for a while and then this error gets thrown, any idea?\r\n","title":"Why am I getting an Errno 4 ZMQException?","body":"<p>I am getting this exception:</p>\n<pre><code> org.zeromq.ZMQException: Errno 4\n        at org.zeromq.ZMQ$Socket.mayRaise(ZMQ.java:3732) ~[jeromq-0.5.3.jar:na]\n        at org.zeromq.ZMQ$Socket.recv(ZMQ.java:3530) ~[jeromq-0.5.3.jar:na]\n        at com.forexassistant.service.zeromq.CurrencyStrengthZeroMQ.sendCurrencyStrengthRequest(CurrencyStrengthZeroMQ.java:30) ~[classes/:na]\n        at com.forexassistant.service.algorithmlogic.AlgorithmLogic.getCurrencyStrength(AlgorithmLogic.java:209) ~[classes/:na]\n        at sun.reflect.GeneratedMethodAccessor111.invoke(Unknown Source) ~[na:na]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_241]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_241]\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.3.22.jar:5.3.22]\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.3.22.jar:5.3.22]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_241]\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [na:1.8.0_241]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_241]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [na:1.8.0_241]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_241]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_241]\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_241]\n        Suppressed: org.zeromq.ZMQException: Errno 4\n            at zmq.Ctx.terminate(Ctx.java:304) ~[jeromq-0.5.3.jar:na]\n            at org.zeromq.ZMQ$Context.term(ZMQ.java:671) ~[jeromq-0.5.3.jar:na]\n            at org.zeromq.ZContext.destroy(ZContext.java:136) ~[jeromq-0.5.3.jar:na]\n            at org.zeromq.ZContext.close(ZContext.java:463) ~[jeromq-0.5.3.jar:na]\n            at com.forexassistant.service.zeromq.CurrencyStrengthZeroMQ.sendCurrencyStrengthRequest(CurrencyStrengthZeroMQ.java:37) ~[classes/:na]\n            ... 13 common frames omitted\n</code></pre>\n<p>I have no idea why it is happening, the logic in question is this that communicates with the socket:</p>\n<pre><code>public String sendCurrencyStrengthRequest() {\n        try (ZContext context = new ZContext()) {\n            ZMQ.Socket socket = context.createSocket(SocketType.PUSH);\n            socket.connect(&quot;tcp://localhost:32868&quot;);\n            ZMQ.Socket socket2 = context.createSocket(SocketType.PULL);\n            socket2.connect(&quot;tcp://localhost:32869&quot;); \n            \n            String msg = &quot;GET_CURRENCY_STRENGTHS&quot;;\n            socket.send(msg,1);\n            \n        \n            while (!Thread.currentThread().isInterrupted()) {\n                 byte[] reply = socket2.recv(0);\n                 if(reply!=null) {\n                     currencyStrengths= new String(reply, ZMQ.CHARSET);\n                 }\n                 context.close();\n                 break;      \n            }\n        }\n        return currencyStrengths;\n    }\n</code></pre>\n<p>This is the code from the other bit:</p>\n<pre><code>\n\n// CREATE ZeroMQ Context\nContext context(PROJECT_NAME);\n\n// CREATE ZMQ_PUSH SOCKET\nSocket pushSocket(context, ZMQ_PUSH);\n\n// CREATE ZMQ_PULL SOCKET\nSocket pullSocket(context, ZMQ_PULL);\n\n// CREATE ZMQ_PUB SOCKET\nSocket pubSocket(context, ZMQ_PUB);\n\n\nint OnInit() {\n\n   EventSetMillisecondTimer(MILLISECOND_TIMER);     // Set Millisecond Timer to get client socket input\n   \n   //EventSetTimer(1790);\n   \n   context.setBlocky(false);\n   \n   // Send responses to PULL_PORT that client is listening on.   \n   if(!pushSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT))) {\n      Print(&quot;[PUSH] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\n      return(INIT_FAILED);\n   } else {\n      Print(&quot;[PUSH] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\n      pushSocket.setSendHighWaterMark(1);\n      pushSocket.setLinger(0);\n   }\n   \n   // Receive commands from PUSH_PORT that client is sending to.     \n   if(!pullSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT))) {\n      Print(&quot;[PULL] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\n      return(INIT_FAILED);\n   } else {\n      Print(&quot;[PULL] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\n      pullSocket.setReceiveHighWaterMark(1);   \n      pullSocket.setLinger(0); \n   }\n   \n   // Send new market data to PUB_PORT that client is subscribed to.      \n   if(!pubSocket.bind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT))) {\n      Print(&quot;[PUB] ####ERROR#### Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\n      return(INIT_FAILED);\n   } else {\n      Print(&quot;[PUB] Binding MT4 Server to Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\n      pubSocket.setSendHighWaterMark(1);\n      pubSocket.setLinger(0);\n   }\n   return(INIT_SUCCEEDED);\n}\n//+------------------------------------------------------------------+\n//| Expert deinitialization function                                 |\n//+------------------------------------------------------------------+\nvoid OnDeinit(const int reason) {\n\n   Print(&quot;[PUSH] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PULL_PORT) + &quot;..&quot;);\n   pushSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT));\n   pushSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PULL_PORT));\n   \n   \n   Print(&quot;[PULL] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PUSH_PORT) + &quot;..&quot;);\n   pullSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT));\n   pullSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUSH_PORT));\n   \n   \n   if (Publish_MarketData == true || Publish_MarketRates == true) {\n      Print(&quot;[PUB] Unbinding MT4 Server from Socket on Port &quot; + IntegerToString(PUB_PORT) + &quot;..&quot;);\n      pubSocket.unbind(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT));\n      pubSocket.disconnect(StringFormat(&quot;%s://%s:%d&quot;, ZEROMQ_PROTOCOL, HOSTNAME, PUB_PORT));\n   }\n   \n   // Shutdown ZeroMQ Context\n   context.shutdown();\n   context.destroy(0);\n   \n   EventKillTimer();\n}\n\n\n//+------------------------------------------------------------------+\n//| Expert timer function                                            |\n//+------------------------------------------------------------------+\nvoid OnTimer() {\n\n   /*\n      Use this OnTimer() function to get and respond to commands\n   */\n   \n   if(CheckServerStatus() == true) {\n      // Get client's response, but don't block.\n      bool hasAllOtherRequest = pullSocket.recv(request, true);\n      \n      if(hasAllOtherRequest){\n         if (request.size() &gt; 0) {\n            // Wait \n            // pullSocket.recv(request,false);\n            \n            // MessageHandler() should go here.   \n            ZmqMsg reply = MessageHandler(request);\n            \n            \n            // Send response, and block\n            // pushSocket.send(reply);\n            \n            // Send response, but don't block\n            if(!pushSocket.send(reply, true)) {\n              Print(&quot;###ERROR### Sending message&quot;);\n            }\n         }\n      }\n      \n      \n      // update prices regularly in case there was no tick within X milliseconds (for non-chart symbols). \n      if (GetTickCount() &gt;= lastUpdateMillis + MILLISECOND_TIMER_PRICES) OnTick();\n   }\n}\n//+------------------------------------------------------------------+\n\nZmqMsg MessageHandler(ZmqMsg &amp;_request) {\n   \n   // Output object\n   ZmqMsg reply;\n   \n   // Message components for later.\n   string components[11];\n   \n   if(_request.size() &gt; 0) {\n   \n      // Get data from request   \n      ArrayResize(_data, _request.size());\n      _request.getData(_data);\n      string dataStr = CharArrayToString(_data);\n      \n      \n      // Process data\n      ParseZmqMessage(dataStr, components);\n      \n      // Interpret data\n      InterpretZmqMessage(pushSocket, components);\n      \n      \n   } else {\n      // NO DATA RECEIVED\n   }\n   \n   return(reply);\n}\n\n\n//+------------------------------------------------------------------+\n// Interpret Zmq Message and perform actions\nvoid InterpretZmqMessage(Socket &amp;pSocket, string &amp;compArray[]) {\n\n   \n   int switch_action = 0;\n   \n   /* 02-08-2019 10:41 CEST - HEARTBEAT */\n   if(compArray[0] == &quot;GET_CURRENCY_STRENGTHS&quot;)\n      switch_action = 14; \n  \n   /* Setup processing variables */\n   string zmq_ret = &quot;&quot;;\n   string response = &quot;&quot;;\n   string responseArray[10];\n   string ret = &quot;&quot;;\n   int ticket = -1;\n   bool ans = false;\n   \n   /****************************\n    * PERFORM SOME CHECKS HERE *\n    ****************************/\n   if (CheckOpsStatus(pSocket, switch_action) == true) {\n   \n      switch(switch_action) {\n       case 14: \n            \n            getCurrencyStrengths(responseArray);\n            \n            response = response + responseArray[0] + &quot;, &quot;;\n            response = response + responseArray[1] + &quot;, &quot;;\n            response = response + responseArray[2] + &quot;, &quot;;\n            response = response + responseArray[3] + &quot;, &quot;;\n            response = response + responseArray[4] + &quot;, &quot;;\n            response = response + responseArray[5];\n            \n               \n            InformPullClient(pSocket, response);\n            \n            break;\n            \n            \n         default: \n            break;\n      }\n   }\n}\n\n\n\n// Inform Client\nvoid InformPullClient(Socket&amp; pSocket, string message) {\n\n   ZmqMsg pushReply(message);\n   \n   pSocket.send(pushReply,true); // NON-BLOCKING\n   \n}\n\n\n</code></pre>\n<p>When the error happens then the line to print Print(&quot;###ERROR### Sending message&quot;); is hit and causes that to be printed in the other application.</p>\n<p>Am I doing this wrong? sendCurrencyStrengthRequest() is scheduled in Spring to be called every 5 seconds and there is another function that will be called every 30mins that uses a different pull and push socket within a different context, all this works for a while and then this error gets thrown, any idea?</p>\n"},{"tags":["java","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":5582102,"reputation":1071,"user_id":4423695,"display_name":"ThilankaD"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1625161646,"creation_date":1625161646,"answer_id":68214786,"question_id":68213740,"body_markdown":"Since you have not defined the column name for `id` in A then the column name will defaults to `id`. Then in class B, you should change the `referencedColumnName` to `id` (or else you can simply skip the `referencedColumnName` attribute since it can be derived directly from the target entity in an OneToOne relationship)\r\n\r\n    @Entity\r\n    @Table(name = &quot;b&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode(callSuper=false)\r\n    public class B extends Auditable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column\r\n        @Size(min = 1, max = 100)\r\n        private String name;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name=&quot;aId&quot;, referencedColumnName = &quot;id&quot;)\r\n        private A aId;\r\n    \r\n    }\r\n\r\nIn repository, you need to annotate it with `@Repository` annotation to let Spring know it should be treated as a Repository Bean.\r\n\r\n \r\n    @Repository\r\n    public interface BRepository extends JpaRepository&lt;B, Long&gt; {\r\n        \r\n        @Query(value=&quot;select b from B b where B.aId.id=?1&quot;)\r\n        List&lt;B&gt; findAllBByA_aId(String aId);\r\n    }\r\n\r\nor you can use SPeL directly,\r\n\r\n\r\n    @Repository\r\n    public interface BRepository extends JpaRepository&lt;B, Long&gt; {\r\n        \r\n        List&lt;B&gt; findAllByaIdId(String aId);\r\n    }\r\n","title":"Spring Data JPA: FindBy on Join Column","body":"<p>Since you have not defined the column name for <code>id</code> in A then the column name will defaults to <code>id</code>. Then in class B, you should change the <code>referencedColumnName</code> to <code>id</code> (or else you can simply skip the <code>referencedColumnName</code> attribute since it can be derived directly from the target entity in an OneToOne relationship)</p>\n<pre><code>@Entity\n@Table(name = &quot;b&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@EqualsAndHashCode(callSuper=false)\npublic class B extends Auditable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column\n    @Size(min = 1, max = 100)\n    private String name;\n\n    @OneToOne\n    @JoinColumn(name=&quot;aId&quot;, referencedColumnName = &quot;id&quot;)\n    private A aId;\n\n}\n</code></pre>\n<p>In repository, you need to annotate it with <code>@Repository</code> annotation to let Spring know it should be treated as a Repository Bean.</p>\n<pre><code>@Repository\npublic interface BRepository extends JpaRepository&lt;B, Long&gt; {\n    \n    @Query(value=&quot;select b from B b where B.aId.id=?1&quot;)\n    List&lt;B&gt; findAllBByA_aId(String aId);\n}\n</code></pre>\n<p>or you can use SPeL directly,</p>\n<pre><code>@Repository\npublic interface BRepository extends JpaRepository&lt;B, Long&gt; {\n    \n    List&lt;B&gt; findAllByaIdId(String aId);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1034341,"reputation":33,"user_id":1042032,"display_name":"Hugo Scavino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694363691,"creation_date":1694363691,"answer_id":77077013,"question_id":68213740,"body_markdown":"In my case, the below @Query worked for me. After the &#39;WHERE&#39; I used the instance and not the Repository name. Basically, I had to use lowercase &#39;b&#39; and not uppercase &#39;B&#39;\r\n\r\n`@Query(value=&quot;select b from B b where b.aId.id=?1&quot;)`\r\n","title":"Spring Data JPA: FindBy on Join Column","body":"<p>In my case, the below @Query worked for me. After the 'WHERE' I used the instance and not the Repository name. Basically, I had to use lowercase 'b' and not uppercase 'B'</p>\n<p><code>@Query(value=&quot;select b from B b where b.aId.id=?1&quot;)</code></p>\n"}],"owner":{"account_id":19540743,"reputation":303,"user_id":14298525,"display_name":"mifol68042"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12221,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":68214786,"answer_count":2,"score":11,"last_activity_date":1694363691,"creation_date":1625156557,"question_id":68213740,"body_markdown":"I have setup two entities like below in a one-to-one mapping and I am trying to query on the joincolumn like below in my repository:\r\n\r\n    @Entity\r\n    @Table(name = &quot;a&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode(callSuper=false)\r\n    public class A extends Auditable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(unique = true)\r\n        @Size(min = 1, max = 100)\r\n        private String name;\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;b&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode(callSuper=false)\r\n    public class B extends Auditable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column\r\n        @Size(min = 1, max = 100)\r\n        private String name;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name=&quot;aId&quot;, referencedColumnName = &quot;aId&quot;)\r\n        private A aId;\r\n    \r\n    }\r\n\r\n\r\nIn my `BRepository.java`, I am trying to do this:\r\n\r\n    @Component\r\n    public interface BRepository extends JpaRepository&lt;B, Long&gt; {\r\n        List&lt;B&gt; findAllBByA_aId(String aId);\r\n    }\r\n\r\nI get the following error:\r\n\r\n`No property a found for type B! Did you mean &#39;aId&#39;?`\r\n\r\nIs this not the right way to query on a join column in spring-data??","title":"Spring Data JPA: FindBy on Join Column","body":"<p>I have setup two entities like below in a one-to-one mapping and I am trying to query on the joincolumn like below in my repository:</p>\n<pre><code>@Entity\n@Table(name = &quot;a&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@EqualsAndHashCode(callSuper=false)\npublic class A extends Auditable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true)\n    @Size(min = 1, max = 100)\n    private String name;\n}\n\n\n@Entity\n@Table(name = &quot;b&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@EqualsAndHashCode(callSuper=false)\npublic class B extends Auditable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column\n    @Size(min = 1, max = 100)\n    private String name;\n\n    @OneToOne\n    @JoinColumn(name=&quot;aId&quot;, referencedColumnName = &quot;aId&quot;)\n    private A aId;\n\n}\n</code></pre>\n<p>In my <code>BRepository.java</code>, I am trying to do this:</p>\n<pre><code>@Component\npublic interface BRepository extends JpaRepository&lt;B, Long&gt; {\n    List&lt;B&gt; findAllBByA_aId(String aId);\n}\n</code></pre>\n<p>I get the following error:</p>\n<p><code>No property a found for type B! Did you mean 'aId'?</code></p>\n<p>Is this not the right way to query on a join column in spring-data??</p>\n"},{"tags":["java","spring","spring-boot","validation","testing"],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678911654,"creation_date":1678911654,"answer_id":75749693,"question_id":75749445,"body_markdown":"It looks like you are bypassing the `Spring` injection, so I would not expect things like the `RestExceptionHandler` to get invoked. I suggest making this a `SpringBootTest`\r\n```Java\r\n@SpringBootTest\r\n@ExtendWith(MockitoExtension.class)\r\npublic class ProductServiceTest {\r\n   @Mock ProductRepository productRepository;\r\n   @Autowired ProductMapper productMapper;\r\n   @Autowired ProductServiceImpl productService;\r\n\r\n   @Test\r\n   void whenEmptyNameProduct() {\r\n      //...same as before\r\n   }\r\n }\r\n```\r\nI don&#39;t know what mocking framework you use, but this is what the `SpringBoot` `Mockito` version would look like.","title":"How to test @NotBlank spring validation with JUnit? [RESOLVED]","body":"<p>It looks like you are bypassing the <code>Spring</code> injection, so I would not expect things like the <code>RestExceptionHandler</code> to get invoked. I suggest making this a <code>SpringBootTest</code></p>\n<pre><code>@SpringBootTest\n@ExtendWith(MockitoExtension.class)\npublic class ProductServiceTest {\n   @Mock ProductRepository productRepository;\n   @Autowired ProductMapper productMapper;\n   @Autowired ProductServiceImpl productService;\n\n   @Test\n   void whenEmptyNameProduct() {\n      //...same as before\n   }\n }\n</code></pre>\n<p>I don't know what mocking framework you use, but this is what the <code>SpringBoot</code> <code>Mockito</code> version would look like.</p>\n"},{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678957188,"creation_date":1678957188,"answer_id":75753937,"question_id":75749445,"body_markdown":"firstly, you can quickly unit-test and check how your object is validated like this:\r\n\r\n    @Test\r\n\tvoid test2() {\r\n\t\t//given\r\n\t\tValidator validator = Validation.buildDefaultValidatorFactory().getValidator();\r\n\t\tProductRequest productMissingName = buildValidProduct();\r\n\t\tproductMissingName.setName(&quot;&quot;);\r\n\r\n\t\t//when\r\n\t\tvar violations  = validator.validate(productMissingName);\r\n\t\tSystem.out.println(violations);\r\n\r\n\t\t//then\r\n\t\t// ...\r\n\t}\r\n\r\nThen, you need to make sure that this validation will happen. So you&#39;ll need to add a `@Valid` - you can put it in the controller, or even here in the service class. For instance:\r\n\r\n    @Override\r\n    @Transactional\r\n    public ProductResponse createProduct(@Valid ProductRequest productRequest) {\r\n        // ...\r\n    }\r\n\r\nOnce you have these, it should work with the `@SpringBootTest`, as suggested by @egeorge in the previous answer\r\n","title":"How to test @NotBlank spring validation with JUnit? [RESOLVED]","body":"<p>firstly, you can quickly unit-test and check how your object is validated like this:</p>\n<pre><code>@Test\nvoid test2() {\n    //given\n    Validator validator = Validation.buildDefaultValidatorFactory().getValidator();\n    ProductRequest productMissingName = buildValidProduct();\n    productMissingName.setName(&quot;&quot;);\n\n    //when\n    var violations  = validator.validate(productMissingName);\n    System.out.println(violations);\n\n    //then\n    // ...\n}\n</code></pre>\n<p>Then, you need to make sure that this validation will happen. So you'll need to add a <code>@Valid</code> - you can put it in the controller, or even here in the service class. For instance:</p>\n<pre><code>@Override\n@Transactional\npublic ProductResponse createProduct(@Valid ProductRequest productRequest) {\n    // ...\n}\n</code></pre>\n<p>Once you have these, it should work with the <code>@SpringBootTest</code>, as suggested by @egeorge in the previous answer</p>\n"}],"owner":{"account_id":20544317,"reputation":3,"user_id":21406289,"display_name":"Luisian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":713,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75753937,"answer_count":2,"score":0,"last_activity_date":1694363178,"creation_date":1678909882,"question_id":75749445,"body_markdown":"I am trying to test validation I have a controller\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/product&quot;)\r\n    @RequiredArgsConstructor\r\n    @CrossOrigin\r\n    public class ProductController {\r\n\r\n    private final ProductService productService;\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)\r\n    @PostMapping\r\n    public ProductResponse createProduct(@RequestBody @Valid ProductRequest request) {\r\n        return productService.createProduct(request);\r\n     }\r\n    }\r\nservice\r\n\r\n    @Slf4j\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class ProductServiceImpl implements ProductService {\r\n\r\n    private final ProductMapper productMapper;\r\n    private final ProductRepository productRepository;\r\n\r\n    @Override\r\n    @Transactional\r\n    public ProductResponse createProduct(ProductRequest productRequest) {\r\n        Product product = productMapper.mapToEntity(productRequest);\r\n        Product savedProduct = productRepository.save(product);\r\n        log.info(&quot;New product saved. Id = {}&quot;, savedProduct.getId());\r\n        return productMapper.mapToResponse(savedProduct);\r\n    }\r\n\r\n    }\r\n\r\nDTO with spring validation annotations for controller and service \r\n\r\n    @Getter\r\n    @Setter\r\n    public class ProductRequest {\r\n\r\n        @NotBlank(message = &quot;{name.not-blank}&quot;)\r\n        private String name;\r\n\r\n        @Positive(message = &quot;{amount.positive}&quot;)\r\n        private Integer amount;\r\n\r\n        @Positive(message = &quot;{price.positive}&quot;)\r\n        private Double price;\r\n    }\r\n\r\nMesagge in message.properties file:\r\n\r\n    name.not-blank=Name field is required\r\n\r\n\r\n\r\nthe exceptions are handled in RestExceptionHandler:\r\n\r\n    @ExceptionHandler(MethodArgumentNotValidException.class)\r\n    protected ResponseEntity&lt;ExceptionResponse&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\r\n        String message = ex.getAllErrors().stream()\r\n                .map(DefaultMessageSourceResolvable::getDefaultMessage)\r\n                .collect(Collectors.joining(&quot;, &quot;));\r\n        ExceptionResponse response = new ExceptionResponse(message);\r\n        log.error(message);\r\n        return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);\r\n    }\r\n\r\n\r\nAnd if I launch the app, and don&#39;t fill the name field of ProductRequest, I get the message according to my messages.properties file: &quot;Name field is required&quot;\r\n[enter image description here](https://i.stack.imgur.com/JzLuU.png)\r\n\r\nBut, if I create test and don&#39;t fill the same field in creating ProductRequest:\r\n\r\n    public class ProductServiceTest {\r\n\r\n    private final ProductRepository productRepository = mock(ProductRepository.class);\r\n    private final ProductMapper productMapper = new ProductMapperImpl();\r\n    private final ProductServiceImpl productService =\r\n            new ProductServiceImpl(\r\n                    productMapper,\r\n                    productRepository);\r\n\r\n    @Test\r\n    void whenEmptyNameProduct() {\r\n        var productRequest = buildProduct();\r\n        var product = productMapper.mapToEntity(productRequest);\r\n        when(productRepository.save(any())).thenReturn(product);\r\n        var productResponse = productMapper.mapToResponse(product);\r\n        MethodArgumentNotValidException thrown = assertThrows(\r\n                MethodArgumentNotValidException.class,\r\n                () -&gt; productService.createProduct(productRequest));\r\n        assertTrue(thrown.getMessage().contentEquals(&quot;Name field is required&quot;));\r\n    }\r\n\r\n    private ProductRequest buildProduct() {\r\n        ProductRequest request = new ProductRequest();\r\n    //        request.setName(&quot;&quot;);\r\n        request.setAmount(0);\r\n        request.setPrice(500.0);\r\n        return request;\r\n    }\r\n\r\n    }\r\n\r\nI get the message from console:\r\n\r\n&gt; org.opentest4j.AssertionFailedError: Expected org.springframework.web.bind.MethodArgumentNotValidException to be thrown, but nothing was thrown.\r\n\r\n[enter image description here](https://i.stack.imgur.com/PvNlf.png)\r\n\r\n\r\nI&#39;ve also tried to remove the exception handling from RestExceptionHandler, and launch the app, but in this case I get the massage:\r\n\r\n&gt; Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.guavapay.delivery.dto.response.ProductResponse com.guavapay.delivery.controller.ProductController.createProduct(com.guavapay.delivery.dto.request.ProductRequest): [Field error in object &#39;productRequest&#39; on field &#39;name&#39;: rejected value []; codes [NotBlank.productRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequest.name,name]; arguments []; default message [name]]; default message [Name field is required]] ]\r\n\r\n[enter image description here](https://i.stack.imgur.com/dDghU.png)\r\nwhere the MethodArgumentNotValidException is contained.\r\n\r\nAnd I am confused, what do I need to do that to test the @NotBlank annotation properly and get the MethodArgumentNotValidException for asserting in test?.. \r\n\r\nCould you advise me anything?","title":"How to test @NotBlank spring validation with JUnit? [RESOLVED]","body":"<p>I am trying to test validation I have a controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/product&quot;)\n@RequiredArgsConstructor\n@CrossOrigin\npublic class ProductController {\n\nprivate final ProductService productService;\n\n@PreAuthorize(&quot;hasRole('ROLE_ADMIN')&quot;)\n@PostMapping\npublic ProductResponse createProduct(@RequestBody @Valid ProductRequest request) {\n    return productService.createProduct(request);\n }\n}\n</code></pre>\n<p>service</p>\n<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class ProductServiceImpl implements ProductService {\n\nprivate final ProductMapper productMapper;\nprivate final ProductRepository productRepository;\n\n@Override\n@Transactional\npublic ProductResponse createProduct(ProductRequest productRequest) {\n    Product product = productMapper.mapToEntity(productRequest);\n    Product savedProduct = productRepository.save(product);\n    log.info(&quot;New product saved. Id = {}&quot;, savedProduct.getId());\n    return productMapper.mapToResponse(savedProduct);\n}\n\n}\n</code></pre>\n<p>DTO with spring validation annotations for controller and service</p>\n<pre><code>@Getter\n@Setter\npublic class ProductRequest {\n\n    @NotBlank(message = &quot;{name.not-blank}&quot;)\n    private String name;\n\n    @Positive(message = &quot;{amount.positive}&quot;)\n    private Integer amount;\n\n    @Positive(message = &quot;{price.positive}&quot;)\n    private Double price;\n}\n</code></pre>\n<p>Mesagge in message.properties file:</p>\n<pre><code>name.not-blank=Name field is required\n</code></pre>\n<p>the exceptions are handled in RestExceptionHandler:</p>\n<pre><code>@ExceptionHandler(MethodArgumentNotValidException.class)\nprotected ResponseEntity&lt;ExceptionResponse&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\n    String message = ex.getAllErrors().stream()\n            .map(DefaultMessageSourceResolvable::getDefaultMessage)\n            .collect(Collectors.joining(&quot;, &quot;));\n    ExceptionResponse response = new ExceptionResponse(message);\n    log.error(message);\n    return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);\n}\n</code></pre>\n<p>And if I launch the app, and don't fill the name field of ProductRequest, I get the message according to my messages.properties file: &quot;Name field is required&quot;\n<a href=\"https://i.stack.imgur.com/JzLuU.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>But, if I create test and don't fill the same field in creating ProductRequest:</p>\n<pre><code>public class ProductServiceTest {\n\nprivate final ProductRepository productRepository = mock(ProductRepository.class);\nprivate final ProductMapper productMapper = new ProductMapperImpl();\nprivate final ProductServiceImpl productService =\n        new ProductServiceImpl(\n                productMapper,\n                productRepository);\n\n@Test\nvoid whenEmptyNameProduct() {\n    var productRequest = buildProduct();\n    var product = productMapper.mapToEntity(productRequest);\n    when(productRepository.save(any())).thenReturn(product);\n    var productResponse = productMapper.mapToResponse(product);\n    MethodArgumentNotValidException thrown = assertThrows(\n            MethodArgumentNotValidException.class,\n            () -&gt; productService.createProduct(productRequest));\n    assertTrue(thrown.getMessage().contentEquals(&quot;Name field is required&quot;));\n}\n\nprivate ProductRequest buildProduct() {\n    ProductRequest request = new ProductRequest();\n//        request.setName(&quot;&quot;);\n    request.setAmount(0);\n    request.setPrice(500.0);\n    return request;\n}\n\n}\n</code></pre>\n<p>I get the message from console:</p>\n<blockquote>\n<p>org.opentest4j.AssertionFailedError: Expected org.springframework.web.bind.MethodArgumentNotValidException to be thrown, but nothing was thrown.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/PvNlf.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I've also tried to remove the exception handling from RestExceptionHandler, and launch the app, but in this case I get the massage:</p>\n<blockquote>\n<p>Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.guavapay.delivery.dto.response.ProductResponse com.guavapay.delivery.controller.ProductController.createProduct(com.guavapay.delivery.dto.request.ProductRequest): [Field error in object 'productRequest' on field 'name': rejected value []; codes [NotBlank.productRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequest.name,name]; arguments []; default message [name]]; default message [Name field is required]] ]</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/dDghU.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nwhere the MethodArgumentNotValidException is contained.</p>\n<p>And I am confused, what do I need to do that to test the @NotBlank annotation properly and get the MethodArgumentNotValidException for asserting in test?..</p>\n<p>Could you advise me anything?</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1631107456,"post_id":69103108,"comment_id":122134506,"body_markdown":"What exactly do you mean by &quot;while parsing for the negative scenario&quot;? When do you expect `ofInstant` to fail? And is there any reason you have to do this with mocking rather than injecting the time zone (which will help with all kinds of testing) and just using a suitable zone/instant combination? (In other words, I&#39;d say that the first sentence of this question is wrong - you need to test your code, but that&#39;s not the same as needing to mock ofInstant.)","body":"What exactly do you mean by &quot;while parsing for the negative scenario&quot;? When do you expect <code>ofInstant</code> to fail? And is there any reason you have to do this with mocking rather than injecting the time zone (which will help with all kinds of testing) and just using a suitable zone/instant combination? (In other words, I&#39;d say that the first sentence of this question is wrong - you need to test your code, but that&#39;s not the same as needing to mock ofInstant.)"}],"answers":[{"tags":[],"owner":{"account_id":748890,"reputation":9396,"user_id":730754,"accept_rate":50,"display_name":"Eduardo Y&#225;&#241;ez Parareda"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1631108605,"creation_date":1631104667,"answer_id":69103252,"question_id":69103108,"body_markdown":"You cannot use `Mockito` for this because `ZonedDateTime` is a final class and `ofInstant` is a _static_ method, but you can use the `PowerMock` library to enhance `Mockito` capabilities:\r\n\r\n    final String error = &quot;Error while parsing the effective end date&quot;;\r\n    // Enable static mocking for all methods of a class\r\n    mockStatic(ZonedDateTime.class);\r\n    PowerMockito.doThrow(new DateTimeException(error).when(ZonedDateTime.ofInstant(Mockito.anyObject(), Mockito.anyObject()));","title":"How to Mock a ZonedDateTime with Mockito and Junit","body":"<p>You cannot use <code>Mockito</code> for this because <code>ZonedDateTime</code> is a final class and <code>ofInstant</code> is a <em>static</em> method, but you can use the <code>PowerMock</code> library to enhance <code>Mockito</code> capabilities:</p>\n<pre><code>final String error = &quot;Error while parsing the effective end date&quot;;\n// Enable static mocking for all methods of a class\nmockStatic(ZonedDateTime.class);\nPowerMockito.doThrow(new DateTimeException(error).when(ZonedDateTime.ofInstant(Mockito.anyObject(), Mockito.anyObject()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12541443,"reputation":633,"user_id":9126244,"display_name":"hfc"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1649834867,"creation_date":1647623498,"answer_id":71530773,"question_id":69103108,"body_markdown":"As of now (18/03/2022) Mockito supports mocking static methods. You can do \r\n\r\n    @Test\r\n    public void testDate() {\r\n        String instantExpected = &quot;2022-03-14T09:33:52Z&quot;;\r\n        ZonedDateTime zonedDateTime = ZonedDateTime.parse(instantExpected);\r\n\r\n        try (MockedStatic&lt;ZonedDateTime&gt; mockedLocalDateTime = Mockito.mockStatic(ZonedDateTime.class)) {\r\n            mockedLocalDateTime.when(ZonedDateTime::now).thenReturn(zonedDateTime);\r\n\r\n            assertThat(yourService.getCurrentDate()).isEqualTo(zonedDateTime);\r\n        }\r\n    }\r\n\r\nPlease note that you need to use `mockito-inline` dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"How to Mock a ZonedDateTime with Mockito and Junit","body":"<p>As of now (18/03/2022) Mockito supports mocking static methods. You can do</p>\n<pre><code>@Test\npublic void testDate() {\n    String instantExpected = &quot;2022-03-14T09:33:52Z&quot;;\n    ZonedDateTime zonedDateTime = ZonedDateTime.parse(instantExpected);\n\n    try (MockedStatic&lt;ZonedDateTime&gt; mockedLocalDateTime = Mockito.mockStatic(ZonedDateTime.class)) {\n        mockedLocalDateTime.when(ZonedDateTime::now).thenReturn(zonedDateTime);\n\n        assertThat(yourService.getCurrentDate()).isEqualTo(zonedDateTime);\n    }\n}\n</code></pre>\n<p>Please note that you need to use <code>mockito-inline</code> dependency:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n        &lt;version&gt;4.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11686211,"reputation":161,"user_id":8555991,"display_name":"fiver6"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694363177,"creation_date":1694363177,"answer_id":77076976,"question_id":69103108,"body_markdown":"As of 01/14/2023 with &quot;mockito-core&quot; 5.0.0, we don&#39;t need to add &quot;mockito-inline&quot; dependency anymore to mock ZonedDateTime with Mockito.\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\nThen, use it as:\r\n\r\n        @Test\r\n        void test() {\r\n        ZonedDateTime zonedDateTime = ZonedDateTime.parse(&quot;2024-01-01T00:00:00.000000+03:00[Europe/Istanbul]&quot;);\r\n        try (MockedStatic&lt;ZonedDateTime&gt; mockedStatic = mockStatic(ZonedDateTime.class)) {\r\n            mockedStatic.when(() -&gt; ZonedDateTime.now(ZoneId.of(&quot;Europe/Istanbul&quot;))).thenReturn(zonedDateTime);\r\n            System.out.println(ZonedDateTime.now(ZoneId.of(&quot;Europe/Istanbul&quot;)));\r\n        }\r\n    }","title":"How to Mock a ZonedDateTime with Mockito and Junit","body":"<p>As of 01/14/2023 with &quot;mockito-core&quot; 5.0.0, we don't need to add &quot;mockito-inline&quot; dependency anymore to mock ZonedDateTime with Mockito.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;5.0.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Then, use it as:</p>\n<pre><code>    @Test\n    void test() {\n    ZonedDateTime zonedDateTime = ZonedDateTime.parse(&quot;2024-01-01T00:00:00.000000+03:00[Europe/Istanbul]&quot;);\n    try (MockedStatic&lt;ZonedDateTime&gt; mockedStatic = mockStatic(ZonedDateTime.class)) {\n        mockedStatic.when(() -&gt; ZonedDateTime.now(ZoneId.of(&quot;Europe/Istanbul&quot;))).thenReturn(zonedDateTime);\n        System.out.println(ZonedDateTime.now(ZoneId.of(&quot;Europe/Istanbul&quot;)));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7720636,"reputation":1532,"user_id":5846981,"accept_rate":100,"display_name":"Som"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8630,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":69103252,"answer_count":3,"score":7,"last_activity_date":1694363177,"creation_date":1631104027,"question_id":69103108,"body_markdown":"I need to mock a `ZonedDateTime.ofInstant()` method. I know there are many suggestions in SO but for my specific problem, till now I did not get any simple way out.\r\n\r\nHere is my code :\r\n\r\n    public ZonedDateTime myMethodToTest(){\r\n\r\n        MyClass myClass;\r\n        myClass = fetchSomethingFromDB();\r\n        try{\r\n            final ZoneId systemDefault = ZoneId.systemDefault();\r\n            return ZonedDateTime.ofInstant(myClass.getEndDt().toInstant(), systemDefault);\r\n        } catch(DateTimeException dte) {\r\n            return null;\r\n        }\r\n        \r\n    }\r\n\r\nHere is my incomplete Test method :\r\n\r\n     @Mock\r\n     MyClass mockMyClass;\r\n\r\n     @Test(expected = DateTimeException.class)\r\n     public void testmyMethodToTest_Exception() {\r\n        String error = &quot;Error while parsing the effective end date&quot;;\r\n        doThrow(new DateTimeException(error)).when(--need to mock here---);\r\n        ZonedDateTime dateTime = mockMyClass.myMethodTotest();\r\n    }\r\n\r\nI want to mock the `ZonedDateTime.ofInstant()` method to throw a DateTimeException while parsing for the negative scenario. How I can do that.","title":"How to Mock a ZonedDateTime with Mockito and Junit","body":"<p>I need to mock a <code>ZonedDateTime.ofInstant()</code> method. I know there are many suggestions in SO but for my specific problem, till now I did not get any simple way out.</p>\n<p>Here is my code :</p>\n<pre><code>public ZonedDateTime myMethodToTest(){\n\n    MyClass myClass;\n    myClass = fetchSomethingFromDB();\n    try{\n        final ZoneId systemDefault = ZoneId.systemDefault();\n        return ZonedDateTime.ofInstant(myClass.getEndDt().toInstant(), systemDefault);\n    } catch(DateTimeException dte) {\n        return null;\n    }\n    \n}\n</code></pre>\n<p>Here is my incomplete Test method :</p>\n<pre><code> @Mock\n MyClass mockMyClass;\n\n @Test(expected = DateTimeException.class)\n public void testmyMethodToTest_Exception() {\n    String error = &quot;Error while parsing the effective end date&quot;;\n    doThrow(new DateTimeException(error)).when(--need to mock here---);\n    ZonedDateTime dateTime = mockMyClass.myMethodTotest();\n}\n</code></pre>\n<p>I want to mock the <code>ZonedDateTime.ofInstant()</code> method to throw a DateTimeException while parsing for the negative scenario. How I can do that.</p>\n"},{"tags":["java","list","enums"],"comments":[{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1419500489,"post_id":16149117,"comment_id":43710045,"body_markdown":"ArrayList&lt;Something&gt; list = new ArrayList&lt;Something&gt;(Arrays.asList(Something.values()))","body":"ArrayList&lt;Something&gt; list = new ArrayList&lt;Something&gt;(Arrays.asList(Something.values()))"}],"answers":[{"tags":[],"owner":{"account_id":395472,"reputation":12714,"user_id":758446,"accept_rate":93,"display_name":"BlackVegetable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366639453,"creation_date":1366639453,"answer_id":16149150,"question_id":16149117,"body_markdown":"This is a bit more readable:\r\n\r\n    Object[] allValues = all.getDeclaringClass().getEnumConstants();","title":"Filling a List with all enum values in Java","body":"<p>This is a bit more readable:</p>\n\n<pre><code>Object[] allValues = all.getDeclaringClass().getEnumConstants();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1366639494,"creation_date":1366639494,"answer_id":16149162,"question_id":16149117,"body_markdown":"There is a constructor for `ArrayList` which is\r\n\r\n    ArrayList(Collection&lt;? extends E&gt; c) \r\n\r\nNow, `EnumSet` extends `AbstractCollection` so you can just do\r\n\r\n    ArrayList&lt;Something&gt; all = new ArrayList&lt;Something&gt;(enumSet)","title":"Filling a List with all enum values in Java","body":"<p>There is a constructor for <code>ArrayList</code> which is</p>\n\n<pre><code>ArrayList(Collection&lt;? extends E&gt; c) \n</code></pre>\n\n<p>Now, <code>EnumSet</code> extends <code>AbstractCollection</code> so you can just do</p>\n\n<pre><code>ArrayList&lt;Something&gt; all = new ArrayList&lt;Something&gt;(enumSet)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":205,"is_accepted":true,"score":205,"last_activity_date":1366640306,"creation_date":1366639501,"answer_id":16149165,"question_id":16149117,"body_markdown":"I wouldn&#39;t use a List in the first places as an EnumSet is more approriate but you can do\r\n\r\n    List&lt;Something&gt; somethingList = Arrays.asList(Something.values());\r\n\r\nor\r\n\r\n    List&lt;Something&gt; somethingList =\r\n                     new ArrayList&lt;Something&gt;(EnumSet.allOf(Something.class));\r\n","title":"Filling a List with all enum values in Java","body":"<p>I wouldn't use a List in the first places as an EnumSet is more approriate but you can do</p>\n\n<pre><code>List&lt;Something&gt; somethingList = Arrays.asList(Something.values());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>List&lt;Something&gt; somethingList =\n                 new ArrayList&lt;Something&gt;(EnumSet.allOf(Something.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29332,"reputation":12535,"user_id":79207,"accept_rate":72,"display_name":"planetjones"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366639547,"creation_date":1366639547,"answer_id":16149177,"question_id":16149117,"body_markdown":"    List&lt;Something&gt; result = new ArrayList&lt;Something&gt;(all);\r\n\r\n`EnumSet` is a Java Collection, as it implements the `Set` interface:\r\n\r\n    public interface Set&lt;E&gt; extends Collection&lt;E&gt; \r\n\r\nSo anything you can do with a Collection you can do with an `EnumSet`.","title":"Filling a List with all enum values in Java","body":"<pre><code>List&lt;Something&gt; result = new ArrayList&lt;Something&gt;(all);\n</code></pre>\n\n<p><code>EnumSet</code> is a Java Collection, as it implements the <code>Set</code> interface:</p>\n\n<pre><code>public interface Set&lt;E&gt; extends Collection&lt;E&gt; \n</code></pre>\n\n<p>So anything you can do with a Collection you can do with an <code>EnumSet</code>.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1366639580,"creation_date":1366639580,"answer_id":16149195,"question_id":16149117,"body_markdown":"try\r\n\r\n\tenum E {\r\n\t\tE1, E2, E3\r\n\t}\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tList&lt;E&gt; list = Arrays.asList(E.values());\r\n\t\tSystem.out.println(list);\r\n\t}\r\n","title":"Filling a List with all enum values in Java","body":"<p>try</p>\n\n<pre><code>enum E {\n    E1, E2, E3\n}\n\npublic static void main(String[] args) throws Exception {\n    List&lt;E&gt; list = Arrays.asList(E.values());\n    System.out.println(list);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2023007,"reputation":2962,"user_id":1808743,"accept_rate":88,"display_name":"Joshua"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366639725,"creation_date":1366639725,"answer_id":16149256,"question_id":16149117,"body_markdown":"Try this:\r\n    \r\n    ... = new ArrayList&lt;Something&gt;(EnumSet.allOf(Something.class));\r\n\r\nas `ArrayList` has a constructor with `Collection&lt;? extends E&gt;`. But use this method only if you really want to use `EnumSet`.\r\n\r\nAll enums have access to the method `values()`. It returns an array of all enum values:\r\n\r\n    ... = Arrays.asList(Something.values());","title":"Filling a List with all enum values in Java","body":"<p>Try this:</p>\n\n<pre><code>... = new ArrayList&lt;Something&gt;(EnumSet.allOf(Something.class));\n</code></pre>\n\n<p>as <code>ArrayList</code> has a constructor with <code>Collection&lt;? extends E&gt;</code>. But use this method only if you really want to use <code>EnumSet</code>.</p>\n\n<p>All enums have access to the method <code>values()</code>. It returns an array of all enum values:</p>\n\n<pre><code>... = Arrays.asList(Something.values());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62229,"reputation":21708,"user_id":185022,"accept_rate":81,"display_name":"AZ_"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1419498503,"creation_date":1419498503,"answer_id":27645804,"question_id":16149117,"body_markdown":"[`Class.getEnumConstants()`][1]\r\n\r\n    List&lt;SOME_ENUM&gt; enumList = Arrays.asList(SOME_ENUM.class.getEnumConstants());\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29","title":"Filling a List with all enum values in Java","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29\" rel=\"noreferrer\"><code>Class.getEnumConstants()</code></a></p>\n\n<pre><code>List&lt;SOME_ENUM&gt; enumList = Arrays.asList(SOME_ENUM.class.getEnumConstants());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178949,"reputation":12261,"user_id":411247,"accept_rate":91,"display_name":"Topera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463495911,"creation_date":1463495911,"answer_id":37279227,"question_id":16149117,"body_markdown":"You can use also:\r\n\r\n    Collections.singletonList(Something.values())","title":"Filling a List with all enum values in Java","body":"<p>You can use also:</p>\n\n<pre><code>Collections.singletonList(Something.values())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14267852,"reputation":1,"user_id":10306369,"display_name":"سيدا الشايقي"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1535888598,"creation_date":1535888423,"answer_id":52136671,"question_id":16149117,"body_markdown":"    private ComboBox gender;\r\n    private enum Selgender{Male,Famle};\r\n    ObservableList&lt;Object&gt; observableList  =FXCollections.observableArrayList(Selgender.values());\r\n        \r\n\r\n","title":"Filling a List with all enum values in Java","body":"<pre><code>private ComboBox gender;\nprivate enum Selgender{Male,Famle};\nObservableList&lt;Object&gt; observableList  =FXCollections.observableArrayList(Selgender.values());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19044543,"reputation":6383,"user_id":13903942,"display_name":"Federico Ba&#249;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694362644,"creation_date":1694362644,"answer_id":77076946,"question_id":16149117,"body_markdown":"I know the question is asking about `List` but I think I have possible cleaner solutions as well as one solution using `List` that wasn&#39;t added yet.\r\n\r\nI&#39;m using `Java 17` \r\n\r\n### Simply use a array of `enum`\r\n\r\n\r\n```java\r\npublic class Main {\r\n    static public enum Something {\r\n        One,\r\n        Two,\r\n        Three,\r\n        Four,\r\n        Five,\r\n        ;\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Something[] somethings = Something.values();\r\n        for (Something something: somethings) {\r\n            System.out.printf(&quot;- %s\\n&quot;, something);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nSimple get all values of the enum with `enum.values()`\r\n\r\n`Something[] somethings = Something.values();`\r\n\r\n#### Use `list.of`\r\n\r\n```java\r\n\r\nimport java.util.List;\r\n\r\npublic class Main {\r\n    static public enum Something {\r\n        One,\r\n        Two,\r\n        Three,\r\n        Four,\r\n        Five,\r\n        ;\r\n\r\n    }\r\n\r\n    public static void main(String[] args) { \r\n        List&lt;Something&gt; somethings2 = List.of(Something.values());\r\n        for (Something something: somethings2) {\r\n            System.out.printf(&quot;- %s\\n&quot;, something);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nI&#39;ve seen solutions using `Arrays.asList(` which as described in [What is the difference between List.of and Arrays.asList?][1]\r\n\r\n&gt; `Arrays.asList` returns a mutable list while the list returned by `List.of` is [immutable](https://docs.oracle.com/javase/9/docs/api/java/util/List.html#immutable)\r\n\r\nor \r\n\r\n&gt; `Arrays.asList` allows null elements while `List.of` doesn&#39;t\r\n\r\nAnd few other reasons.\r\nBecause theoretically, from an Array of `enum` you should&#39;t be able to mutate it (adding / removing elements) I think it makes more sense to use `List.of`\r\nAnyways, it depends by use cases and both ways are probably valid\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/46579348/13903942","title":"Filling a List with all enum values in Java","body":"<p>I know the question is asking about <code>List</code> but I think I have possible cleaner solutions as well as one solution using <code>List</code> that wasn't added yet.</p>\n<p>I'm using <code>Java 17</code></p>\n<h3>Simply use a array of <code>enum</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    static public enum Something {\n        One,\n        Two,\n        Three,\n        Four,\n        Five,\n        ;\n\n    }\n\n    public static void main(String[] args) {\n        Something[] somethings = Something.values();\n        for (Something something: somethings) {\n            System.out.printf(&quot;- %s\\n&quot;, something);\n        }\n\n    }\n\n}\n\n</code></pre>\n<p>Simple get all values of the enum with <code>enum.values()</code></p>\n<p><code>Something[] somethings = Something.values();</code></p>\n<h4>Use <code>list.of</code></h4>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport java.util.List;\n\npublic class Main {\n    static public enum Something {\n        One,\n        Two,\n        Three,\n        Four,\n        Five,\n        ;\n\n    }\n\n    public static void main(String[] args) { \n        List&lt;Something&gt; somethings2 = List.of(Something.values());\n        for (Something something: somethings2) {\n            System.out.printf(&quot;- %s\\n&quot;, something);\n        }\n    }\n\n}\n\n</code></pre>\n<p>I've seen solutions using <code>Arrays.asList(</code> which as described in <a href=\"https://stackoverflow.com/a/46579348/13903942\">What is the difference between List.of and Arrays.asList?</a></p>\n<blockquote>\n<p><code>Arrays.asList</code> returns a mutable list while the list returned by <code>List.of</code> is <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#immutable\" rel=\"nofollow noreferrer\">immutable</a></p>\n</blockquote>\n<p>or</p>\n<blockquote>\n<p><code>Arrays.asList</code> allows null elements while <code>List.of</code> doesn't</p>\n</blockquote>\n<p>And few other reasons.\nBecause theoretically, from an Array of <code>enum</code> you should't be able to mutate it (adding / removing elements) I think it makes more sense to use <code>List.of</code>\nAnyways, it depends by use cases and both ways are probably valid</p>\n"}],"owner":{"account_id":111587,"reputation":11539,"user_id":294702,"accept_rate":90,"display_name":"MonoThreaded"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211793,"favorite_count":0,"down_vote_count":0,"up_vote_count":104,"accepted_answer_id":16149165,"answer_count":10,"score":104,"last_activity_date":1694362644,"creation_date":1366639337,"question_id":16149117,"body_markdown":"I would like to fill a list with all possible values of an enum&lt;br&gt;\r\nSince I recently fell in love with `EnumSet`, I leveraged `allOf()`&lt;br&gt;\r\n\r\n    EnumSet&lt;Something&gt; all = EnumSet.allOf( Something.class);\r\n    List&lt;Something&gt; list = new ArrayList&lt;&gt;( all.size());\r\n    for (Something s : all) {\r\n    \tlist.add( s);\r\n    }\r\n    return list;\r\n\r\n**Is there a better way** (as in non obfuscated one liner) to achieve the same result?","title":"Filling a List with all enum values in Java","body":"<p>I would like to fill a list with all possible values of an enum<br>\nSince I recently fell in love with <code>EnumSet</code>, I leveraged <code>allOf()</code><br></p>\n\n<pre><code>EnumSet&lt;Something&gt; all = EnumSet.allOf( Something.class);\nList&lt;Something&gt; list = new ArrayList&lt;&gt;( all.size());\nfor (Something s : all) {\n    list.add( s);\n}\nreturn list;\n</code></pre>\n\n<p><strong>Is there a better way</strong> (as in non obfuscated one liner) to achieve the same result?</p>\n"},{"tags":["java","spring-boot","websocket"],"answers":[{"tags":[],"owner":{"account_id":29034199,"reputation":871,"user_id":22240478,"display_name":"pwoltschk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694359578,"creation_date":1694359578,"answer_id":77076734,"question_id":77076235,"body_markdown":" The error message indicates that Spring is unable to upgrade the HTTP request to a WebSocket connection on your Tomcat server. \r\n\r\nThere are few things to check:\r\n\r\n- Make sure you are using a compatible version of Tomcat that supports Servlet 3.1 or later. Tomcat 8.5 meets this requirement.\r\n\r\n- Add the `tomcat-websocket` dependency to your pom.xml:\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n  &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\r\n  &lt;version&gt;9.0.43&lt;/version&gt; \r\n&lt;/dependency&gt;\r\n```\r\n\r\n- Configure Spring to use the TomcatRequestUpgradeStrategy:\r\n\r\n```\r\n@Configuration\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n  @Override\r\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n    registry.addEndpoint(&quot;/chat&quot;).setHandshakeHandler(new DefaultHandshakeHandler(\r\n      new TomcatRequestUpgradeStrategy())).withSockJS();\r\n  }\r\n\r\n}\r\n```\r\n\r\nThis explicitly configures Spring to use Tomcat&#39;s built-in WebSocket support.\r\n","title":"No suitable default RequestUpgradeStrategy found on Dailyrazor&#39;s tomcat 8.5 server","body":"<p>The error message indicates that Spring is unable to upgrade the HTTP request to a WebSocket connection on your Tomcat server.</p>\n<p>There are few things to check:</p>\n<ul>\n<li><p>Make sure you are using a compatible version of Tomcat that supports Servlet 3.1 or later. Tomcat 8.5 meets this requirement.</p>\n</li>\n<li><p>Add the <code>tomcat-websocket</code> dependency to your pom.xml:</p>\n</li>\n</ul>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n  &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\n  &lt;version&gt;9.0.43&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>Configure Spring to use the TomcatRequestUpgradeStrategy:</li>\n</ul>\n<pre><code>@Configuration\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n    registry.addEndpoint(&quot;/chat&quot;).setHandshakeHandler(new DefaultHandshakeHandler(\n      new TomcatRequestUpgradeStrategy())).withSockJS();\n  }\n\n}\n</code></pre>\n<p>This explicitly configures Spring to use Tomcat's built-in WebSocket support.</p>\n"}],"owner":{"account_id":20209390,"reputation":5,"user_id":14822787,"display_name":"Abdullah Howard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77076734,"answer_count":1,"score":0,"last_activity_date":1694359578,"creation_date":1694351277,"question_id":77076235,"body_markdown":"I am fairly new to spring-boot and Websockets in general. I am attempting to create a program that requires websockets to manage a chat application. The program runs perfectly fine on my local machine. However, when uploading it to my tomcat server on Dailyrazor, I get the error message `No suitable default RequestUpgradeStrategy found`.\r\n\r\nWhat I have tried:\r\n1. I have checked my spring-boot version to ensure that it is compatible with my Tomcat 8.5 server\r\n2. I have checked to make sure that my websockets version is also compatible. It is also important to note that my program ran perfectly fine on Dailyrazor before I added websockets to it.\r\n\r\nHere is my build.gradle file\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath &quot;org.springframework.boot:spring-boot-gradle-plugin:2.2.2.RELEASE&quot;\r\n        classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.8.RELEASE&quot;\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;war&#39;\r\n}\r\n\r\ngroup &#39;com.teamtreehouse&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\n\r\n\r\nallprojects  {\r\n    apply plugin: &#39;maven&#39;\r\n    apply plugin: &quot;io.spring.dependency-management&quot;\r\n    group = &#39;com.wnp&#39;\r\n    version = &#39;6.5.0-SNAPSHOT&#39;\r\n}\r\n\r\napply plugin: &#39;java&#39;\r\napply plugin: &quot;org.springframework.boot&quot;\r\n\r\nsourceCompatibility = 1.8\r\ntargetCompatibility = 1.8\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n// https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-websocket\r\n\r\n//    compile &#39;org.projectreactor:reactor-spring:1.0.1.release&#39;\r\n    implementation &#39;io.spring.dependency-management:io.spring.dependency-management.gradle.plugin:1.1.0&#39;\r\n\r\n    compile &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n//// https://mvnrepository.com/artifact/org.springframework/spring-web\r\n//    implementation &#39;org.springframework:spring-web:6.0.0&#39;\r\n\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-mail:2.2.2.RELEASE&#39;\r\n\r\n    compile group: &#39;org.apache.maven.plugins&#39;, name: &#39;maven-surefire-plugin&#39;, version: &#39;2.22.2&#39;\r\n    implementation &#39;org.ocpsoft.prettytime:prettytime:3.2.7.Final&#39;\r\n\r\n//    compile &#39;org.springframework:spring-orm&#39;\r\n//    compile group: &#39;org.hibernate&#39;, name: &#39;hibernate-core&#39;\r\n    // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-tomcat\r\n//    providedRuntime group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-tomcat&#39;, version: &#39;2.7.5&#39;\r\n// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-tomcat\r\n    providedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat:2.2.2.RELEASE&#39;\r\n\r\n    compile &#39;org.eclipse.mylyn.github:org.eclipse.egit.github.core:2.1.5&#39;\r\n    testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.11&#39;\r\n    compile &#39;org.hashids:hashids:1.0.1&#39;\r\n\r\n// https://mvnrepository.com/artifact/mysql/mysql-connector-java\r\n    implementation &#39;mysql:mysql-connector-java:8.0.33&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-websocket&#39;\r\n\r\n    testImplementation group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.11&#39;\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk-s3&#39;, version: &#39;1.12.131&#39;\r\n// https://mvnrepository.com/artifact/org.projectlombok/lombok\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.28&#39;\r\n\r\n    testImplementation &#39;software.amazon.awssdk:s3:2.17.102&#39;\r\n\r\n    runtimeOnly &#39;software.amazon.awssdk:bom:2.17.102&#39;\r\n\r\n\r\n}\r\n```\r\n\r\n\r\nHere is my websockets configuration:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/chat&quot;);\r\n        registry.addEndpoint(&quot;/chat&quot;).withSockJS();\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n    }\r\n\r\n\r\n}\r\n```\r\nFinally, here is my error log:\r\n\r\n```\r\nINFO next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase.[Catalina].[next-step-co.com].[/] - 2 Spring WebApplicationInitializers detected on classpath\r\nINFO mysql-cj-abandoned-connection-cleanup org.apache.catalina.loader.WebappClassLoader - Illegal access: this web application instance has been stopped already.  Could not load .  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\r\nINFO next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase.[Catalina].[next-step-co.com].[/] - Initializing Spring embedded WebApplicationContext\r\nERROR next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase - ContainerBase.addChild: start: \r\norg.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[next-step-co.com].StandardContext[]]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:724)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:714)\r\n\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:919)\r\n\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1704)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;stompWebSocketHandlerMapping&#39; defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method &#39;stompWebSocketHandlerMapping&#39; threw exception; nested exception is java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:656)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:484)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$878/444480024.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:152)\r\n\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:132)\r\n\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:92)\r\n\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5164)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\t... 10 more\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method &#39;stompWebSocketHandlerMapping&#39; threw exception; nested exception is java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)\r\n\t... 33 more\r\nCaused by: java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\r\n\tat org.springframework.web.socket.server.support.AbstractHandshakeHandler.initRequestUpgradeStrategy(AbstractHandshakeHandler.java:153)\r\n\tat org.springframework.web.socket.server.support.AbstractHandshakeHandler.&lt;init&gt;(AbstractHandshakeHandler.java:119)\r\n\tat org.springframework.web.socket.server.support.DefaultHandshakeHandler.&lt;init&gt;(DefaultHandshakeHandler.java:35)\r\n\tat org.springframework.web.socket.server.support.WebSocketHttpRequestHandler.&lt;init&gt;(WebSocketHttpRequestHandler.java:74)\r\n\tat org.springframework.web.socket.config.annotation.WebMvcStompWebSocketEndpointRegistration.getMappings(WebMvcStompWebSocketEndpointRegistration.java:142)\r\n\tat org.springframework.web.socket.config.annotation.WebMvcStompEndpointRegistry.getHandlerMapping(WebMvcStompEndpointRegistry.java:155)\r\n\tat org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurationSupport.stompWebSocketHandlerMapping(WebSocketMessageBrokerConfigurationSupport.java:82)\r\n\tat org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503.CGLIB$stompWebSocketHandlerMapping$11(&lt;generated&gt;)\r\n\tat org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503$$FastClassBySpringCGLIB$$d170f115.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n\tat org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503.stompWebSocketHandlerMapping(&lt;generated&gt;)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 34 more\r\nERROR next-step-co.com-startStop-2 org.apache.catalina.startup.HostConfig - Error deploying web application archive /home/nextste2/tomcat/webapps/next-step-co.com/ROOT.war\r\njava.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[next-step-co.com].StandardContext[]]\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:727)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:714)\r\n\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:919)\r\n\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1704)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\n```","title":"No suitable default RequestUpgradeStrategy found on Dailyrazor&#39;s tomcat 8.5 server","body":"<p>I am fairly new to spring-boot and Websockets in general. I am attempting to create a program that requires websockets to manage a chat application. The program runs perfectly fine on my local machine. However, when uploading it to my tomcat server on Dailyrazor, I get the error message <code>No suitable default RequestUpgradeStrategy found</code>.</p>\n<p>What I have tried:</p>\n<ol>\n<li>I have checked my spring-boot version to ensure that it is compatible with my Tomcat 8.5 server</li>\n<li>I have checked to make sure that my websockets version is also compatible. It is also important to note that my program ran perfectly fine on Dailyrazor before I added websockets to it.</li>\n</ol>\n<p>Here is my build.gradle file</p>\n<pre><code>buildscript {\n    repositories {\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n    dependencies {\n        classpath &quot;org.springframework.boot:spring-boot-gradle-plugin:2.2.2.RELEASE&quot;\n        classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.8.RELEASE&quot;\n    }\n}\n\nplugins {\n    id 'war'\n}\n\ngroup 'com.teamtreehouse'\nversion '1.0-SNAPSHOT'\n\n\n\nallprojects  {\n    apply plugin: 'maven'\n    apply plugin: &quot;io.spring.dependency-management&quot;\n    group = 'com.wnp'\n    version = '6.5.0-SNAPSHOT'\n}\n\napply plugin: 'java'\napply plugin: &quot;org.springframework.boot&quot;\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n// https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-websocket\n\n//    compile 'org.projectreactor:reactor-spring:1.0.1.release'\n    implementation 'io.spring.dependency-management:io.spring.dependency-management.gradle.plugin:1.1.0'\n\n    compile 'org.springframework.boot:spring-boot-starter-web'\n    compile 'org.springframework.boot:spring-boot-starter-data-jpa'\n    compile 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compile 'org.springframework.boot:spring-boot-starter-security'\n//// https://mvnrepository.com/artifact/org.springframework/spring-web\n//    implementation 'org.springframework:spring-web:6.0.0'\n\n\n    implementation 'org.springframework.boot:spring-boot-starter-mail:2.2.2.RELEASE'\n\n    compile group: 'org.apache.maven.plugins', name: 'maven-surefire-plugin', version: '2.22.2'\n    implementation 'org.ocpsoft.prettytime:prettytime:3.2.7.Final'\n\n//    compile 'org.springframework:spring-orm'\n//    compile group: 'org.hibernate', name: 'hibernate-core'\n    // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-tomcat\n//    providedRuntime group: 'org.springframework.boot', name: 'spring-boot-starter-tomcat', version: '2.7.5'\n// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-tomcat\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat:2.2.2.RELEASE'\n\n    compile 'org.eclipse.mylyn.github:org.eclipse.egit.github.core:2.1.5'\n    testCompile group: 'junit', name: 'junit', version: '4.11'\n    compile 'org.hashids:hashids:1.0.1'\n\n// https://mvnrepository.com/artifact/mysql/mysql-connector-java\n    implementation 'mysql:mysql-connector-java:8.0.33'\n    implementation 'org.springframework.boot:spring-boot-starter-websocket'\n\n    testImplementation group: 'junit', name: 'junit', version: '4.11'\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.12.131'\n// https://mvnrepository.com/artifact/org.projectlombok/lombok\n    compileOnly 'org.projectlombok:lombok:1.18.28'\n\n    testImplementation 'software.amazon.awssdk:s3:2.17.102'\n\n    runtimeOnly 'software.amazon.awssdk:bom:2.17.102'\n\n\n}\n</code></pre>\n<p>Here is my websockets configuration:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/chat&quot;);\n        registry.addEndpoint(&quot;/chat&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n    }\n\n\n}\n</code></pre>\n<p>Finally, here is my error log:</p>\n<pre><code>INFO next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase.[Catalina].[next-step-co.com].[/] - 2 Spring WebApplicationInitializers detected on classpath\nINFO mysql-cj-abandoned-connection-cleanup org.apache.catalina.loader.WebappClassLoader - Illegal access: this web application instance has been stopped already.  Could not load .  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\nINFO next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase.[Catalina].[next-step-co.com].[/] - Initializing Spring embedded WebApplicationContext\nERROR next-step-co.com-startStop-2 org.apache.catalina.core.ContainerBase - ContainerBase.addChild: start: \norg.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[next-step-co.com].StandardContext[]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:724)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:714)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:919)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1704)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stompWebSocketHandlerMapping' defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception; nested exception is java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:656)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:484)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$878/444480024.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:152)\n    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:132)\n    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:92)\n    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5164)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 10 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception; nested exception is java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)\n    ... 33 more\nCaused by: java.lang.IllegalStateException: No suitable default RequestUpgradeStrategy found\n    at org.springframework.web.socket.server.support.AbstractHandshakeHandler.initRequestUpgradeStrategy(AbstractHandshakeHandler.java:153)\n    at org.springframework.web.socket.server.support.AbstractHandshakeHandler.&lt;init&gt;(AbstractHandshakeHandler.java:119)\n    at org.springframework.web.socket.server.support.DefaultHandshakeHandler.&lt;init&gt;(DefaultHandshakeHandler.java:35)\n    at org.springframework.web.socket.server.support.WebSocketHttpRequestHandler.&lt;init&gt;(WebSocketHttpRequestHandler.java:74)\n    at org.springframework.web.socket.config.annotation.WebMvcStompWebSocketEndpointRegistration.getMappings(WebMvcStompWebSocketEndpointRegistration.java:142)\n    at org.springframework.web.socket.config.annotation.WebMvcStompEndpointRegistry.getHandlerMapping(WebMvcStompEndpointRegistry.java:155)\n    at org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurationSupport.stompWebSocketHandlerMapping(WebSocketMessageBrokerConfigurationSupport.java:82)\n    at org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503.CGLIB$stompWebSocketHandlerMapping$11(&lt;generated&gt;)\n    at org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503$$FastClassBySpringCGLIB$$d170f115.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\n    at org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration$$EnhancerBySpringCGLIB$$89bc0503.stompWebSocketHandlerMapping(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 34 more\nERROR next-step-co.com-startStop-2 org.apache.catalina.startup.HostConfig - Error deploying web application archive /home/nextste2/tomcat/webapps/next-step-co.com/ROOT.war\njava.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[next-step-co.com].StandardContext[]]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:727)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:714)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:919)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1704)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1692113453,"post_id":76906930,"comment_id":135578862,"body_markdown":"Maybe wrong `@Modifying` annotation (check the package)?","body":"Maybe wrong <code>@Modifying</code> annotation (check the package)?"},{"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"score":0,"creation_date":1692114286,"post_id":76906930,"comment_id":135579022,"body_markdown":"one Question: WHICH Library du you import for the @Query annotation? Are your shure that you import the right one?","body":"one Question: WHICH Library du you import for the @Query annotation? Are your shure that you import the right one?"}],"answers":[{"tags":[],"owner":{"account_id":8047538,"reputation":423,"user_id":6067302,"display_name":"TomekK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692113877,"creation_date":1692113877,"answer_id":76907265,"question_id":76906930,"body_markdown":"Locking with the use of `@Lock` doesn&#39;t work with non select `@Query`.\r\nIt looks like a bigger theme since we have this in the Query interface documentation:\r\n\r\n&gt; Throws: IllegalStateException - if the query is found not to be a Java\r\n&gt; Persistence query language SELECT query or a Criteria API query\r\n\r\nhttps://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setLockMode(javax.persistence.LockModeType)","title":"Spring JPA update &quot;expecting SELECT query&quot;","body":"<p>Locking with the use of <code>@Lock</code> doesn't work with non select <code>@Query</code>.\nIt looks like a bigger theme since we have this in the Query interface documentation:</p>\n<blockquote>\n<p>Throws: IllegalStateException - if the query is found not to be a Java\nPersistence query language SELECT query or a Criteria API query</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setLockMode(javax.persistence.LockModeType)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setLockMode(javax.persistence.LockModeType)</a></p>\n"},{"tags":[],"owner":{"account_id":1034341,"reputation":33,"user_id":1042032,"display_name":"Hugo Scavino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694359575,"creation_date":1694359575,"answer_id":77076733,"question_id":76906930,"body_markdown":"Make sure to import the correct @Modifying annotation. Use the one from jpa and not jdbc. \r\n\r\nimport org.springframework.data.jpa.repository.Modifying;","title":"Spring JPA update &quot;expecting SELECT query&quot;","body":"<p>Make sure to import the correct @Modifying annotation. Use the one from jpa and not jdbc.</p>\n<p>import org.springframework.data.jpa.repository.Modifying;</p>\n"}],"owner":{"account_id":4015385,"reputation":5418,"user_id":3307720,"accept_rate":51,"display_name":"nasch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":654,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694359575,"creation_date":1692111226,"question_id":76906930,"body_markdown":"Here&#39;s the query in my repository interface:\r\n\r\n    @Modifying\r\n    @Lock(LockModeType.PESSIMISTIC_FORCE_INCREMENT)\r\n    @Query(&quot;UPDATE TradeTransaction tt set tt.externalStatus = :status where tt.id = :id&quot;)\r\n    int updateTransactionExternalStatus(@Param(&quot;status&quot;) TradeTransaction.ExternalStatus status,\r\n                                        @Param(&quot;id&quot;) Long id);\r\n\r\nAnd here&#39;s the error:\r\n\r\n    org.hibernate.query.IllegalSelectQueryException: Expecting a SELECT Query [org.hibernate.query.sqm.tree.select.SqmSelectStatement], but found org.hibernate.query.sqm.tree.update.SqmUpdateStatement [UPDATE TradeTransaction tt set tt.externalStatus = :status where tt.id = :id]\r\n\t\r\nEverything I&#39;m reading says the @Modifying annotation should do it.\r\n\r\nEDIT: I&#39;ve determined I don&#39;t need this kind of transaction control after all. TomekK&#39;s answer may be helpful to someone so I&#39;ll leave this up.","title":"Spring JPA update &quot;expecting SELECT query&quot;","body":"<p>Here's the query in my repository interface:</p>\n<pre><code>@Modifying\n@Lock(LockModeType.PESSIMISTIC_FORCE_INCREMENT)\n@Query(&quot;UPDATE TradeTransaction tt set tt.externalStatus = :status where tt.id = :id&quot;)\nint updateTransactionExternalStatus(@Param(&quot;status&quot;) TradeTransaction.ExternalStatus status,\n                                    @Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>And here's the error:</p>\n<pre><code>org.hibernate.query.IllegalSelectQueryException: Expecting a SELECT Query [org.hibernate.query.sqm.tree.select.SqmSelectStatement], but found org.hibernate.query.sqm.tree.update.SqmUpdateStatement [UPDATE TradeTransaction tt set tt.externalStatus = :status where tt.id = :id]\n</code></pre>\n<p>Everything I'm reading says the @Modifying annotation should do it.</p>\n<p>EDIT: I've determined I don't need this kind of transaction control after all. TomekK's answer may be helpful to someone so I'll leave this up.</p>\n"},{"tags":["java","uml","sequence-diagram","argouml"],"comments":[{"owner":{"account_id":55879,"reputation":10520,"user_id":167425,"accept_rate":50,"display_name":"Tom Morris"},"score":0,"creation_date":1301076427,"post_id":5410487,"comment_id":6155847,"body_markdown":"Could you describe what problem you are having or where you are stuck?  I&#39;m familiar with ArgoUML sequence diagrams, but it&#39;s unclear what problem you are having.","body":"Could you describe what problem you are having or where you are stuck?  I&#39;m familiar with ArgoUML sequence diagrams, but it&#39;s unclear what problem you are having."},{"owner":{"account_id":1225248,"reputation":19779,"user_id":1190934,"accept_rate":60,"display_name":"James Oravec"},"score":0,"creation_date":1363635827,"post_id":5410487,"comment_id":21920210,"body_markdown":"I had the same question. Didn&#39;t see any useful tutorials on YouTube in English. I ended up making my sequence diagram with: http://www.websequencediagrams.com/","body":"I had the same question. Didn&#39;t see any useful tutorials on YouTube in English. I ended up making my sequence diagram with: <a href=\"http://www.websequencediagrams.com/\" rel=\"nofollow noreferrer\">websequencediagrams.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":294087,"reputation":6941,"user_id":597770,"display_name":"iluxa"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1300908701,"creation_date":1300908701,"answer_id":5410602,"question_id":5410487,"body_markdown":"The best tool for sequence diagrams I ever found is Quick Sequence Diagram Editor - check it out: http://sdedit.sourceforge.net/index.html\r\n","title":"Sequence Diagrams ARGOUML","body":"<p>The best tool for sequence diagrams I ever found is Quick Sequence Diagram Editor - check it out: <a href=\"http://sdedit.sourceforge.net/index.html\" rel=\"nofollow\">http://sdedit.sourceforge.net/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":1225248,"reputation":19779,"user_id":1190934,"accept_rate":60,"display_name":"James Oravec"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1363635985,"creation_date":1363635985,"answer_id":15485544,"question_id":5410487,"body_markdown":"If you are willing to use other tools, I used http://www.websequencediagrams.com/ which gave me what I needed. \r\n\r\nI liked the fact that I don&#39;t have to download an executable, it generate the images in real time and I can save the text that generated the diagram (I can also right click and save the generated image as well).","title":"Sequence Diagrams ARGOUML","body":"<p>If you are willing to use other tools, I used <a href=\"http://www.websequencediagrams.com/\" rel=\"nofollow\">http://www.websequencediagrams.com/</a> which gave me what I needed. </p>\n\n<p>I liked the fact that I don't have to download an executable, it generate the images in real time and I can save the text that generated the diagram (I can also right click and save the generated image as well).</p>\n"},{"tags":[],"owner":{"account_id":357702,"reputation":33,"user_id":698030,"display_name":"Kai"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1388159861,"creation_date":1388159861,"answer_id":20803651,"question_id":5410487,"body_markdown":"If you are talking about the webstart version of argouml. And if you problem is not even able to create a sequence diagram. Please try download one instead of start it via webstart. \r\n\r\nMy locally installed copy have no trouble creating sequence diagram, while the webstarted one can&#39;t.","title":"Sequence Diagrams ARGOUML","body":"<p>If you are talking about the webstart version of argouml. And if you problem is not even able to create a sequence diagram. Please try download one instead of start it via webstart. </p>\n\n<p>My locally installed copy have no trouble creating sequence diagram, while the webstarted one can't.</p>\n"},{"tags":[],"owner":{"account_id":3236725,"reputation":2084,"user_id":2730742,"accept_rate":27,"display_name":"krm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448556678,"creation_date":1448556678,"answer_id":33943675,"question_id":5410487,"body_markdown":"In my case the zipped binary package worked correctly, so that I could create a sequence diagram, though the setup and Java Web Start versions didn&#39;t work. \r\n\r\nHere&#39;s the link to a [binary package of the latest stable version][1]. \r\nHere&#39;s a link to the [page with all available downloads for the last stable version][2]\r\n\r\n  [1]: http://argouml-downloads.tigris.org/nonav/argouml-0.34/ArgoUML-0.34.zip\r\n  [2]: http://argouml-downloads.tigris.org/argouml-0.34/","title":"Sequence Diagrams ARGOUML","body":"<p>In my case the zipped binary package worked correctly, so that I could create a sequence diagram, though the setup and Java Web Start versions didn't work. </p>\n\n<p>Here's the link to a <a href=\"http://argouml-downloads.tigris.org/nonav/argouml-0.34/ArgoUML-0.34.zip\" rel=\"nofollow\">binary package of the latest stable version</a>. \nHere's a link to the <a href=\"http://argouml-downloads.tigris.org/argouml-0.34/\" rel=\"nofollow\">page with all available downloads for the last stable version</a></p>\n"}],"owner":{"account_id":338853,"reputation":81,"user_id":667958,"accept_rate":25,"display_name":"Wanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8211,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":4,"score":5,"last_activity_date":1694358405,"creation_date":1300908138,"question_id":5410487,"body_markdown":"Im having trouble using argoUML to draw  my squence diagrams. Does anyone know how I can generate a sequence diagram in argouml?\r\n","title":"Sequence Diagrams ARGOUML","body":"<p>Im having trouble using argoUML to draw  my squence diagrams. Does anyone know how I can generate a sequence diagram in argouml?</p>\n"},{"tags":["java","android","metadata","android-mediaplayer","exoplayer"],"answers":[{"tags":[],"owner":{"account_id":4925749,"reputation":33,"user_id":3967027,"display_name":"Dawinder Gill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694358192,"creation_date":1694358192,"answer_id":77076655,"question_id":77028032,"body_markdown":"It looks like you did not add &#39;title&#39; anywhere which is why you are getting a &#39;NULL&#39; value as an output. You can use the code below to add and get the title or any other information from MediaMetadata.\r\n\r\n    //Add required info into mediaMetadata\r\n    val mediaMetadata = MediaMetadata.Builder()\r\n            .setDisplayTitle(&quot;Your title here&quot;)\r\n            .setArtist(&quot;Your artist name&quot;)\r\n            .build()\r\n    \r\n    //Build mediaItem with data added and url of media\r\n    val mediaItem = MediaItem.Builder()\r\n            .setMediaMetadata(mediaMetadata)\r\n            .setUri(&quot;Your track URL here&quot;)\r\n\r\n    mediaItem.build()\r\n\r\n    //Now add this mediaItem into your code like this\r\n    player.setMediaItem(mediaItem);\r\n    player.prepare();\r\n    player.play();\r\n\r\n    //Now in listener\r\n    player.addListener(new Player.Listener() {\r\n\r\n                    @Override\r\n                    public void onMediaMetadataChanged(MediaMetadata mediaMetadata) {\r\n                        //Now get posted values like this\r\n                        println(&quot;Title : &quot;+mediaMetadata.displayTitle)    \r\n                    }\r\n                }\r\n        );\r\n\r\nYou can find more useful methods in MediaMetadata Builder like setAlbumTitle, setAlbumArtist, setSubtitle, setDescription, setUserRating, etc.\r\n\r\nOne more thing I think your code is in Java but my code at the beginning is in Kotlin so convert it into Java before use.","title":"Media3 ExoPlayer getMediaMetadata() do not get correct data","body":"<p>It looks like you did not add 'title' anywhere which is why you are getting a 'NULL' value as an output. You can use the code below to add and get the title or any other information from MediaMetadata.</p>\n<pre><code>//Add required info into mediaMetadata\nval mediaMetadata = MediaMetadata.Builder()\n        .setDisplayTitle(&quot;Your title here&quot;)\n        .setArtist(&quot;Your artist name&quot;)\n        .build()\n\n//Build mediaItem with data added and url of media\nval mediaItem = MediaItem.Builder()\n        .setMediaMetadata(mediaMetadata)\n        .setUri(&quot;Your track URL here&quot;)\n\nmediaItem.build()\n\n//Now add this mediaItem into your code like this\nplayer.setMediaItem(mediaItem);\nplayer.prepare();\nplayer.play();\n\n//Now in listener\nplayer.addListener(new Player.Listener() {\n\n                @Override\n                public void onMediaMetadataChanged(MediaMetadata mediaMetadata) {\n                    //Now get posted values like this\n                    println(&quot;Title : &quot;+mediaMetadata.displayTitle)    \n                }\n            }\n    );\n</code></pre>\n<p>You can find more useful methods in MediaMetadata Builder like setAlbumTitle, setAlbumArtist, setSubtitle, setDescription, setUserRating, etc.</p>\n<p>One more thing I think your code is in Java but my code at the beginning is in Kotlin so convert it into Java before use.</p>\n"}],"owner":{"account_id":29350396,"reputation":1,"user_id":22487672,"display_name":"Z Ivanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694358192,"creation_date":1693653013,"question_id":77028032,"body_markdown":"I&#39;m trying to create a very simple app - a online radio player, and I want to get the name of the song currently playing. Here is the code:\r\n\r\n\r\n```\r\nplayer = new ExoPlayer.Builder(this).build();\r\n        viewPlayer.setPlayer(player);\r\n        MediaItem mediaItem = MediaItem.fromUri(link);\r\n        player.setMediaItem(mediaItem);\r\n        player.prepare();\r\n        player.play();\r\n\r\n\r\n        player.addListener(\r\n                new Player.Listener() {\r\n\r\n                    @Override\r\n                    public void onMediaMetadataChanged(MediaMetadata mediaMetadata) {\r\n                        metadata = player.getMediaMetadata();\r\n\r\n                        if (metadata.title!=null) {\r\n                            MainActivity.this.title = metadata.albumTitle.toString();\r\n                            viewSong.setText(MainActivity.this.title);\r\n                        } else viewSong.setText(&quot;NULL&quot;);\r\n                    }\r\n                }\r\n        );\r\n```\r\nI think, I have all dependencies needed in build.gradle.\r\n\r\n\r\nPlayer works fine but `getMediaMetadata()` gives me this (in debug mode):\r\n\r\n\r\n```\r\nmetadata = {MediaMetadata@11693}\r\n\talbumArtist = null\r\n\talbumTitle = null\r\n\tartist = null\r\n\t..............\r\n\t..............\r\n\tgenre = Rock Music\r\n\t..............\r\n\t..............\r\n\tstation = RADIO 1 ROCK\r\n```\r\n\r\n\r\nThere is some data, but what I need is &#39;null&#39;.\r\n\r\nI know that metadata contains the title and artist info. \r\n[VLC player gives me this:](https://i.stack.imgur.com/fMqiA.png)\r\n\r\nI did not find any relevant answer of this problem yet.","title":"Media3 ExoPlayer getMediaMetadata() do not get correct data","body":"<p>I'm trying to create a very simple app - a online radio player, and I want to get the name of the song currently playing. Here is the code:</p>\n<pre><code>player = new ExoPlayer.Builder(this).build();\n        viewPlayer.setPlayer(player);\n        MediaItem mediaItem = MediaItem.fromUri(link);\n        player.setMediaItem(mediaItem);\n        player.prepare();\n        player.play();\n\n\n        player.addListener(\n                new Player.Listener() {\n\n                    @Override\n                    public void onMediaMetadataChanged(MediaMetadata mediaMetadata) {\n                        metadata = player.getMediaMetadata();\n\n                        if (metadata.title!=null) {\n                            MainActivity.this.title = metadata.albumTitle.toString();\n                            viewSong.setText(MainActivity.this.title);\n                        } else viewSong.setText(&quot;NULL&quot;);\n                    }\n                }\n        );\n</code></pre>\n<p>I think, I have all dependencies needed in build.gradle.</p>\n<p>Player works fine but <code>getMediaMetadata()</code> gives me this (in debug mode):</p>\n<pre><code>metadata = {MediaMetadata@11693}\n    albumArtist = null\n    albumTitle = null\n    artist = null\n    ..............\n    ..............\n    genre = Rock Music\n    ..............\n    ..............\n    station = RADIO 1 ROCK\n</code></pre>\n<p>There is some data, but what I need is 'null'.</p>\n<p>I know that metadata contains the title and artist info.\n<a href=\"https://i.stack.imgur.com/fMqiA.png\" rel=\"nofollow noreferrer\">VLC player gives me this:</a></p>\n<p>I did not find any relevant answer of this problem yet.</p>\n"},{"tags":["java","pdf","hash","pdfbox","electronic-signature"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1692885128,"post_id":76969040,"comment_id":135687053,"body_markdown":"*&quot;I know that we would get the best help if we shared the PDF before and after signing&quot;* - indeed, please share.","body":"<i>&quot;I know that we would get the best help if we shared the PDF before and after signing&quot;</i> - indeed, please share."},{"owner":{"account_id":17774775,"reputation":1,"user_id":12907401,"display_name":"jan_s"},"score":0,"creation_date":1692897891,"post_id":76969040,"comment_id":135690128,"body_markdown":"@KJ yes I tried that version as well, here&#39;s the code:\nhttps://gist.github.com/jan-sz/7c2fdf1e48e302bca01711440d364316\nValidation in Adobe Acrobat Reader shows &quot;Certification is invalid&quot; &quot;Document has been altered or corrupted since it was signed&quot;. When I checked the size of `ByteArrayOutputStream` I return in `ContentSigner.getOutputStream` it&#39;s  `baos.toByteArray().length` is 0.","body":"@KJ yes I tried that version as well, here&#39;s the code: <a href=\"https://gist.github.com/jan-sz/7c2fdf1e48e302bca01711440d364316\" rel=\"nofollow noreferrer\">gist.github.com/jan-sz/7c2fdf1e48e302bca01711440d364316</a> Validation in Adobe Acrobat Reader shows &quot;Certification is invalid&quot; &quot;Document has been altered or corrupted since it was signed&quot;. When I checked the size of <code>ByteArrayOutputStream</code> I return in <code>ContentSigner.getOutputStream</code> it&#39;s  <code>baos.toByteArray().length</code> is 0."},{"owner":{"account_id":17774775,"reputation":1,"user_id":12907401,"display_name":"jan_s"},"score":0,"creation_date":1692952618,"post_id":76969040,"comment_id":135697536,"body_markdown":"@mkl I edited my question - I added a class that imitiates the external signature and added the examples of PDFs and keys used for signature –","body":"@mkl I edited my question - I added a class that imitiates the external signature and added the examples of PDFs and keys used for signature –"}],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692976460,"creation_date":1692976460,"answer_id":76978464,"question_id":76969040,"body_markdown":"Analyzing your example file one sees that none of the hashes in the signature is correct. Furthermore, one sees that the CMS signature container is not of the simple form required for your hack to work.\r\n\r\n### Creating a simple signature container (no signed attributes)\r\n\r\nYou desire to create a simple signature container (no signed attributes, the signature bytes directly sign the data) for your `ContentSigner` hack to work.\r\n\r\nYour example file contains a signature container with signed attributes, though. Thus, both the hash in the signed attributes and in the signature bytes are wrong, the former because you use `&quot;not used&quot;.getBytes()` as generator input and the latter because it is not based on the signed attributes.\r\n\r\nThe cause is that you incompletely copied the code from the [answer][1] you used as template: you dropped the call of the `JcaSignerInfoGeneratorBuilder` method `setDirectSignature` there:\r\n```lang-java\r\n    JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\r\n    sigb.setDirectSignature(true);\r\n```\r\nBut the `JcaSignerInfoGeneratorBuilder` only creates simple signature container structures if `DirectSignature` is set to `true`.\r\n\r\nThus, please complete your copy of that code.\r\n\r\n### Signing the correct hash\r\n\r\nEven after switching to creation of simple signature containers you&#39;ll sign the wrong hash because your flow with the `ExternalSignature` test replacement after hashing the data using `MessageDigest.getInstance(&quot;SHA256&quot;, new BouncyCastleProvider())` at the beginning of `CreateSignature.sign` hashes that hash again by using `Signature.getInstance(&quot;SHA256withRSA&quot;)` in `ExternalSignature.sign`.\r\n\r\nTo make that flow work, you&#39;ll have to remove one of the hash calculations.\r\n\r\nI don&#39;t know, though, whether your `ExternalSignature` test replacement really correctly represents your `ServerSignature` functionality. If the latter does not hash itself but truly expects pre-hashed data, your flow with it may work without further ado after switching to creation of simple signature containers.\r\n\r\n### As an aside\r\n\r\nWhy do you insist on creating simple signature containers? Every signature profile that is somehow to be taken seriously requires the use of signed attributes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69910676/1729265","title":"Java Apache PDFBox - issue with generating the hash for external signing or with merging it back - adding Public key certificate chain to PDF","body":"<p>Analyzing your example file one sees that none of the hashes in the signature is correct. Furthermore, one sees that the CMS signature container is not of the simple form required for your hack to work.</p>\n<h3>Creating a simple signature container (no signed attributes)</h3>\n<p>You desire to create a simple signature container (no signed attributes, the signature bytes directly sign the data) for your <code>ContentSigner</code> hack to work.</p>\n<p>Your example file contains a signature container with signed attributes, though. Thus, both the hash in the signed attributes and in the signature bytes are wrong, the former because you use <code>&quot;not used&quot;.getBytes()</code> as generator input and the latter because it is not based on the signed attributes.</p>\n<p>The cause is that you incompletely copied the code from the <a href=\"https://stackoverflow.com/a/69910676/1729265\">answer</a> you used as template: you dropped the call of the <code>JcaSignerInfoGeneratorBuilder</code> method <code>setDirectSignature</code> there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\n    sigb.setDirectSignature(true);\n</code></pre>\n<p>But the <code>JcaSignerInfoGeneratorBuilder</code> only creates simple signature container structures if <code>DirectSignature</code> is set to <code>true</code>.</p>\n<p>Thus, please complete your copy of that code.</p>\n<h3>Signing the correct hash</h3>\n<p>Even after switching to creation of simple signature containers you'll sign the wrong hash because your flow with the <code>ExternalSignature</code> test replacement after hashing the data using <code>MessageDigest.getInstance(&quot;SHA256&quot;, new BouncyCastleProvider())</code> at the beginning of <code>CreateSignature.sign</code> hashes that hash again by using <code>Signature.getInstance(&quot;SHA256withRSA&quot;)</code> in <code>ExternalSignature.sign</code>.</p>\n<p>To make that flow work, you'll have to remove one of the hash calculations.</p>\n<p>I don't know, though, whether your <code>ExternalSignature</code> test replacement really correctly represents your <code>ServerSignature</code> functionality. If the latter does not hash itself but truly expects pre-hashed data, your flow with it may work without further ado after switching to creation of simple signature containers.</p>\n<h3>As an aside</h3>\n<p>Why do you insist on creating simple signature containers? Every signature profile that is somehow to be taken seriously requires the use of signed attributes.</p>\n"},{"tags":[],"owner":{"account_id":17774775,"reputation":1,"user_id":12907401,"display_name":"jan_s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694357983,"creation_date":1693990368,"answer_id":77050400,"question_id":76969040,"body_markdown":"I found the solution to my problem in other Stackoverflow post:\r\nhttps://stackoverflow.com/questions/75505900/pdfbox-document-getting-corrupted-after-adding-signed-attributes \r\n\r\nBased on the answer from mkl, we were able to create a working solution with PDFBox version 3.0.0:\r\n```java\r\npackage TOTPSignPDF.Service;\r\n\r\nimport TOTPSignPDF.ServerSignature;\r\nimport org.apache.pdfbox.Loader;\r\nimport org.apache.pdfbox.pdmodel.PDDocument;\r\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.ExternalSigningSupport;\r\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.PDSignature;\r\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.SignatureOptions;\r\nimport org.bouncycastle.asn1.ASN1EncodableVector;\r\nimport org.bouncycastle.asn1.ASN1ObjectIdentifier;\r\nimport org.bouncycastle.asn1.ASN1Primitive;\r\nimport org.bouncycastle.asn1.DERSet;\r\nimport org.bouncycastle.asn1.cms.Attribute;\r\nimport org.bouncycastle.asn1.cms.AttributeTable;\r\nimport org.bouncycastle.asn1.ess.ESSCertIDv2;\r\nimport org.bouncycastle.asn1.ess.SigningCertificateV2;\r\nimport org.bouncycastle.asn1.nist.NISTObjectIdentifiers;\r\nimport org.bouncycastle.asn1.pkcs.PKCSObjectIdentifiers;\r\nimport org.bouncycastle.asn1.x509.AlgorithmIdentifier;\r\nimport org.bouncycastle.cert.X509CertificateHolder;\r\nimport org.bouncycastle.cert.jcajce.JcaCertStore;\r\nimport org.bouncycastle.cms.CMSAttributeTableGenerator;\r\nimport org.bouncycastle.cms.CMSException;\r\nimport org.bouncycastle.cms.CMSSignedData;\r\nimport org.bouncycastle.cms.CMSSignedDataGenerator;\r\nimport org.bouncycastle.cms.CMSTypedData;\r\nimport org.bouncycastle.cms.DefaultSignedAttributeTableGenerator;\r\nimport org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder;\r\nimport org.bouncycastle.jcajce.io.OutputStreamFactory;\r\nimport org.bouncycastle.operator.ContentSigner;\r\nimport org.bouncycastle.operator.OperatorCreationException;\r\nimport org.bouncycastle.operator.jcajce.JcaDigestCalculatorProviderBuilder;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\nimport java.security.MessageDigest;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.cert.Certificate;\r\nimport java.security.cert.CertificateEncodingException;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\nimport java.util.Calendar;\r\n\r\n/*\r\n    This solution was based on official examples from Apache:\r\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java?revision=1899086&amp;view=markup\r\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignatureBase.java?view=markup\r\n */\r\n\r\n@Service\r\npublic class CreateSignature {\r\n\r\n    private static final Logger LOG = LoggerFactory.getLogger(CreateSignature.class);\r\n\r\n    @Autowired\r\n    ServerSignature serverSignature;\r\n\r\n    private Certificate[] certificateChain;\r\n\r\n    /**\r\n     * Signs the given PDF file.\r\n     *\r\n     * @param inFile the original PDF file\r\n     */\r\n    public void signDocument(File inFile, Certificate[] certChain) throws\r\n                                                                   IOException,\r\n                                                                   CertificateEncodingException,\r\n                                                                   NoSuchAlgorithmException,\r\n                                                                   OperatorCreationException,\r\n                                                                   CMSException {\r\n\r\n        // we&#39;re being given the certificate chain with public key\r\n        setCertificateChain(certChain);\r\n\r\n        String name = inFile.getName();\r\n        String substring = name.substring(0, name.lastIndexOf(&#39;.&#39;));\r\n\r\n        File outFile = new File(inFile.getParent(), substring + &quot;_signed_pdfbox.pdf&quot;);\r\n        signDocument(inFile, outFile);\r\n    }\r\n\r\n    private void setCertificateChain(final Certificate[] certificateChain) {\r\n        this.certificateChain = certificateChain;\r\n    }\r\n\r\n    // https://stackoverflow.com/questions/75505900/pdfbox-document-getting-corrupted-after-adding-signed-attributes\r\n    private void signDocument(File inFile, File outFile) throws\r\n                                                         IOException,\r\n                                                         NoSuchAlgorithmException,\r\n                                                         OperatorCreationException,\r\n                                                         CertificateEncodingException,\r\n                                                         CMSException {\r\n        try (\r\n            FileOutputStream output = new FileOutputStream(outFile);\r\n            PDDocument document = Loader.loadPDF(inFile)\r\n        ) {\r\n            PDSignature signature = new PDSignature();\r\n\r\n            signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\r\n            signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\r\n            signature.setName(&quot;Test Name&quot;);\r\n            signature.setSignDate(Calendar.getInstance());\r\n\r\n            SignatureOptions signatureOptions = new SignatureOptions();\r\n            signatureOptions.setPage(0);\r\n\r\n            document.addSignature(signature, signatureOptions);\r\n            ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\r\n\r\n            // retrieve signer certificate and its chain\r\n            X509Certificate cert = (X509Certificate) certificateChain[0];\r\n\r\n            // build signed attribute table generator and SignerInfo generator builder\r\n            ESSCertIDv2 certid = new ESSCertIDv2(\r\n                new AlgorithmIdentifier(NISTObjectIdentifiers.id_sha256),\r\n                MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\r\n            );\r\n            SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\r\n            Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, new DERSet(sigcert));\r\n\r\n            ASN1EncodableVector v = new ASN1EncodableVector();\r\n            v.add(attr);\r\n            AttributeTable atttributeTable = new AttributeTable(v);\r\n            CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\r\n\r\n            org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\r\n            JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\r\n            sigb.setSignedAttributeGenerator(attrGen);\r\n\r\n            // create ContentSigner that signs by calling the external endpoint\r\n            ContentSigner contentSigner = new ContentSigner() {\r\n                private MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n                private OutputStream stream = OutputStreamFactory.createStream(digest);\r\n\r\n                @Override\r\n                public byte[] getSignature() {\r\n                    try {\r\n                        byte[] hash = digest.digest();\r\n                        byte[] signedHash = serverSignature.sign(Base64.getEncoder().encodeToString(hash));\r\n                        return signedHash;\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(&quot;Exception while signing&quot;, e);\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public OutputStream getOutputStream() {\r\n                    return stream;\r\n                }\r\n\r\n                @Override\r\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\r\n                    return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\r\n                }\r\n            };\r\n\r\n            // create the SignedData generator and execute\r\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\r\n            gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\r\n\r\n            CMSTypedData msg = new CMSProcessableInputStream(externalSigning.getContent());\r\n            CMSSignedData signedData = gen.generate(msg, false);\r\n\r\n            byte[] cmsSignature = signedData.getEncoded();\r\n            externalSigning.setSignature(cmsSignature);\r\n        }\r\n    }\r\n}\r\n```","title":"Java Apache PDFBox - issue with generating the hash for external signing or with merging it back - adding Public key certificate chain to PDF","body":"<p>I found the solution to my problem in other Stackoverflow post:\n<a href=\"https://stackoverflow.com/questions/75505900/pdfbox-document-getting-corrupted-after-adding-signed-attributes\">pdfbox - document getting corrupted after adding signed attributes</a></p>\n<p>Based on the answer from mkl, we were able to create a working solution with PDFBox version 3.0.0:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package TOTPSignPDF.Service;\n\nimport TOTPSignPDF.ServerSignature;\nimport org.apache.pdfbox.Loader;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.ExternalSigningSupport;\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.PDSignature;\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.SignatureOptions;\nimport org.bouncycastle.asn1.ASN1EncodableVector;\nimport org.bouncycastle.asn1.ASN1ObjectIdentifier;\nimport org.bouncycastle.asn1.ASN1Primitive;\nimport org.bouncycastle.asn1.DERSet;\nimport org.bouncycastle.asn1.cms.Attribute;\nimport org.bouncycastle.asn1.cms.AttributeTable;\nimport org.bouncycastle.asn1.ess.ESSCertIDv2;\nimport org.bouncycastle.asn1.ess.SigningCertificateV2;\nimport org.bouncycastle.asn1.nist.NISTObjectIdentifiers;\nimport org.bouncycastle.asn1.pkcs.PKCSObjectIdentifiers;\nimport org.bouncycastle.asn1.x509.AlgorithmIdentifier;\nimport org.bouncycastle.cert.X509CertificateHolder;\nimport org.bouncycastle.cert.jcajce.JcaCertStore;\nimport org.bouncycastle.cms.CMSAttributeTableGenerator;\nimport org.bouncycastle.cms.CMSException;\nimport org.bouncycastle.cms.CMSSignedData;\nimport org.bouncycastle.cms.CMSSignedDataGenerator;\nimport org.bouncycastle.cms.CMSTypedData;\nimport org.bouncycastle.cms.DefaultSignedAttributeTableGenerator;\nimport org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder;\nimport org.bouncycastle.jcajce.io.OutputStreamFactory;\nimport org.bouncycastle.operator.ContentSigner;\nimport org.bouncycastle.operator.OperatorCreationException;\nimport org.bouncycastle.operator.jcajce.JcaDigestCalculatorProviderBuilder;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.X509Certificate;\nimport java.util.Arrays;\nimport java.util.Base64;\nimport java.util.Calendar;\n\n/*\n    This solution was based on official examples from Apache:\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java?revision=1899086&amp;view=markup\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignatureBase.java?view=markup\n */\n\n@Service\npublic class CreateSignature {\n\n    private static final Logger LOG = LoggerFactory.getLogger(CreateSignature.class);\n\n    @Autowired\n    ServerSignature serverSignature;\n\n    private Certificate[] certificateChain;\n\n    /**\n     * Signs the given PDF file.\n     *\n     * @param inFile the original PDF file\n     */\n    public void signDocument(File inFile, Certificate[] certChain) throws\n                                                                   IOException,\n                                                                   CertificateEncodingException,\n                                                                   NoSuchAlgorithmException,\n                                                                   OperatorCreationException,\n                                                                   CMSException {\n\n        // we're being given the certificate chain with public key\n        setCertificateChain(certChain);\n\n        String name = inFile.getName();\n        String substring = name.substring(0, name.lastIndexOf('.'));\n\n        File outFile = new File(inFile.getParent(), substring + &quot;_signed_pdfbox.pdf&quot;);\n        signDocument(inFile, outFile);\n    }\n\n    private void setCertificateChain(final Certificate[] certificateChain) {\n        this.certificateChain = certificateChain;\n    }\n\n    // https://stackoverflow.com/questions/75505900/pdfbox-document-getting-corrupted-after-adding-signed-attributes\n    private void signDocument(File inFile, File outFile) throws\n                                                         IOException,\n                                                         NoSuchAlgorithmException,\n                                                         OperatorCreationException,\n                                                         CertificateEncodingException,\n                                                         CMSException {\n        try (\n            FileOutputStream output = new FileOutputStream(outFile);\n            PDDocument document = Loader.loadPDF(inFile)\n        ) {\n            PDSignature signature = new PDSignature();\n\n            signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\n            signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\n            signature.setName(&quot;Test Name&quot;);\n            signature.setSignDate(Calendar.getInstance());\n\n            SignatureOptions signatureOptions = new SignatureOptions();\n            signatureOptions.setPage(0);\n\n            document.addSignature(signature, signatureOptions);\n            ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\n\n            // retrieve signer certificate and its chain\n            X509Certificate cert = (X509Certificate) certificateChain[0];\n\n            // build signed attribute table generator and SignerInfo generator builder\n            ESSCertIDv2 certid = new ESSCertIDv2(\n                new AlgorithmIdentifier(NISTObjectIdentifiers.id_sha256),\n                MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\n            );\n            SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\n            Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, new DERSet(sigcert));\n\n            ASN1EncodableVector v = new ASN1EncodableVector();\n            v.add(attr);\n            AttributeTable atttributeTable = new AttributeTable(v);\n            CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\n\n            org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\n            JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\n            sigb.setSignedAttributeGenerator(attrGen);\n\n            // create ContentSigner that signs by calling the external endpoint\n            ContentSigner contentSigner = new ContentSigner() {\n                private MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n                private OutputStream stream = OutputStreamFactory.createStream(digest);\n\n                @Override\n                public byte[] getSignature() {\n                    try {\n                        byte[] hash = digest.digest();\n                        byte[] signedHash = serverSignature.sign(Base64.getEncoder().encodeToString(hash));\n                        return signedHash;\n                    } catch (Exception e) {\n                        throw new RuntimeException(&quot;Exception while signing&quot;, e);\n                    }\n                }\n\n                @Override\n                public OutputStream getOutputStream() {\n                    return stream;\n                }\n\n                @Override\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\n                    return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\n                }\n            };\n\n            // create the SignedData generator and execute\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\n            gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\n\n            CMSTypedData msg = new CMSProcessableInputStream(externalSigning.getContent());\n            CMSSignedData signedData = gen.generate(msg, false);\n\n            byte[] cmsSignature = signedData.getEncoded();\n            externalSigning.setSignature(cmsSignature);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17774775,"reputation":1,"user_id":12907401,"display_name":"jan_s"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77050400,"answer_count":2,"score":0,"last_activity_date":1694357983,"creation_date":1692878226,"question_id":76969040,"body_markdown":"**Problem description**\r\n\r\nWe have a specific business / technical case - we need to electronically sign PDFs, and to do that we&#39;re partnering with a company that handles electronic signature over the hash of a PDF.\r\n\r\nWe more or less know how to get the hash from the PDF and merge it back after signing by an external service via Rest API - but something along this process causes the PDF to show &quot;Document has been altered or corrupted since it was signed&quot;.\r\n\r\n\r\n\r\n[Resulting PDF with broken signature](https://i.stack.imgur.com/FSmHW.png)\r\n\r\n**How we&#39;re doing it**\r\n\r\nWe are using library Apache PDFBox version 3.0.0 (and we tried with different versions as well) and we&#39;re basing our solution on the official Apache Examples:\r\n\r\nhttps://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/\r\n- CreateSignature\r\n- CreateSignatureBase\r\n\r\nWe&#39;ve read many posts on stackoverlow that describe problems similar to ours, for example:\r\n- https://stackoverflow.com/questions/56867465/external-signature-with-pdfbox-2-0-15\r\n- https://stackoverflow.com/questions/41767351/create-pkcs7-signature-from-file-digest\r\n\r\n*And we settled on the solution described here*: \r\nhttps://stackoverflow.com/questions/69676156/java-pdfbox-pdf-sign-problem-external-signature-invalid-signature-there-are\r\n\r\nOur main class - CreateSignature\r\n\r\n```java\r\npackage TOTPSignPDF.Service;\r\n\r\nimport org.apache.pdfbox.Loader;\r\nimport org.apache.pdfbox.pdmodel.PDDocument;\r\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.ExternalSigningSupport;\r\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.PDSignature;\r\nimport org.bouncycastle.asn1.x509.AlgorithmIdentifier;\r\nimport org.bouncycastle.cert.jcajce.JcaCertStore;\r\nimport org.bouncycastle.cms.CMSException;\r\nimport org.bouncycastle.cms.CMSSignedData;\r\nimport org.bouncycastle.cms.CMSSignedDataGenerator;\r\nimport org.bouncycastle.cms.CMSTypedData;\r\nimport org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\nimport org.bouncycastle.operator.ContentSigner;\r\nimport org.bouncycastle.operator.DefaultSignatureAlgorithmIdentifierFinder;\r\nimport org.bouncycastle.operator.OperatorCreationException;\r\nimport org.bouncycastle.operator.jcajce.JcaDigestCalculatorProviderBuilder;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.security.GeneralSecurityException;\r\nimport java.security.MessageDigest;\r\nimport java.security.cert.Certificate;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\nimport java.util.Calendar;\r\n\r\n/*\r\n    This solution was based on official examples from Apache:\r\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java?revision=1899086&amp;view=markup\r\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignatureBase.java?view=markup\r\n */\r\n\r\n@Service\r\npublic class CreateSignature {\r\n\r\n    private static final Logger LOG = LoggerFactory.getLogger(CreateSignature.class);\r\n\r\n    //@Autowired\r\n    //ServerSignature serverSignature;\r\n\r\n    @Autowired\r\n    ExternalSignature externalSignature;\r\n\r\n    private Certificate[] certificateChain;\r\n\r\n    /**\r\n     * Signs the given PDF file.\r\n     *\r\n     * @param inFile the original PDF file\r\n     */\r\n    public void signDocument(File inFile) throws IOException {\r\n\r\n        // we&#39;re being given the certificate chain with public key\r\n        setCertificateChain(externalSignature.getCertificateChain());\r\n\r\n        String name = inFile.getName();\r\n        String substring = name.substring(0, name.lastIndexOf(&#39;.&#39;));\r\n\r\n        File outFile = new File(inFile.getParent(), substring + &quot;_signed.pdf&quot;);\r\n        loadPDFAndSign(inFile, outFile);\r\n    }\r\n\r\n    private void setCertificateChain(final Certificate[] certificateChain) {\r\n        this.certificateChain = certificateChain;\r\n    }\r\n\r\n    /**\r\n     * Signs the given PDF file.\r\n     *\r\n     * @param inFile  input PDF file\r\n     * @param outFile output PDF file\r\n     * @throws IOException if the input file could not be read\r\n     */\r\n\r\n    private void loadPDFAndSign(File inFile, File outFile) throws IOException {\r\n        if (inFile == null || !inFile.exists()) {\r\n            throw new FileNotFoundException(&quot;Document for signing does not exist&quot;);\r\n        }\r\n\r\n        // sign\r\n        try (FileOutputStream fileOutputStream = new FileOutputStream(outFile);\r\n             PDDocument doc = Loader.loadPDF(inFile)) {\r\n            addSignatureDictionaryAndSignExternally(doc, fileOutputStream);\r\n        }\r\n    }\r\n\r\n    private void addSignatureDictionaryAndSignExternally(PDDocument document, OutputStream output)\r\n        throws IOException {\r\n\r\n        int accessPermissions = SigUtils.getMDPPermission(document);\r\n        if (accessPermissions == 1) {\r\n            throw new IllegalStateException(&quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot;);\r\n        }\r\n\r\n        // create signature dictionary\r\n        PDSignature signature = new PDSignature();\r\n        signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\r\n        signature.setSubFilter(PDSignature.SUBFILTER_ADBE_PKCS7_DETACHED);\r\n        signature.setName(&quot;Example User&quot;);\r\n        signature.setLocation(&quot;Los Angeles, CA&quot;);\r\n        signature.setReason(&quot;Testing&quot;);\r\n\r\n        // the signing date, needed for valid signature\r\n        signature.setSignDate(Calendar.getInstance());\r\n\r\n        // Optional: certify \r\n        if (accessPermissions == 0) {\r\n            SigUtils.setMDPPermission(document, signature, 2);\r\n        }\r\n\r\n        // it was if(isExternalSigning()) {\r\n        document.addSignature(signature);\r\n        ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\r\n        // invoke external signature service - passing the document content with the &quot;empty&quot; signature added\r\n        byte[] cmsSignature = sign(externalSigning.getContent());\r\n        // set signature bytes received from the service\r\n        externalSigning.setSignature(cmsSignature);\r\n        //}\r\n\r\n        // call SigUtils.checkCrossReferenceTable(document) if Adobe complains - we&#39;re doing it only because I ran out of ideas\r\n        // and read https://stackoverflow.com/a/71293901/535646\r\n        // and https://issues.apache.org/jira/browse/PDFBOX-5382\r\n        SigUtils.checkCrossReferenceTable(document); // no errors here\r\n\r\n        //document.close(); not needed because document is defined as auto-closeable resource in the function above\r\n    }\r\n\r\n    /**\r\n     * SignatureInterface sample implementation.\r\n     * Use your favorite cryptographic library to implement PKCS #7 signature creation.\r\n     * If you want to create the hash and the signature separately (e.g. to transfer only the hash\r\n     * to an external application), read &lt;a href=&quot;https://stackoverflow.com/questions/41767351&quot;&gt;this\r\n     * answer&lt;/a&gt; or &lt;a href=&quot;https://stackoverflow.com/questions/56867465&quot;&gt;this answer&lt;/a&gt;.\r\n     *\r\n     * @throws IOException\r\n     */\r\n    private byte[] sign(InputStream content) throws IOException {\r\n        try {\r\n\r\n            // get the hash of the document with additional signature field\r\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA256&quot;, new BouncyCastleProvider());\r\n\r\n            byte[] hashBytes = digest.digest(content.readAllBytes());\r\n            String hashBase64 = new String(Base64.getEncoder().encode(hashBytes));\r\n            LOG.info(&quot;Digest in Base64: &quot; + hashBase64);\r\n\r\n            // call External API to sign the hash - hash of the document with added field for signature\r\n            //byte[] signedHashBytes = serverSignature.sign(hashBase64);\r\n            byte[] signedHashBytes = externalSignature.sign(hashBytes);\r\n\r\n            // this lower part of the code is based on this answer:\r\n            // https://stackoverflow.com/questions/69676156/java-pdfbox-pdf-sign-problem-external-signature-invalid-signature-there-are\r\n            //\r\n            // In the standalone application this ContentSigner would be an implementation of signing process,\r\n            // but we are given the signed hash from the External Api and we just have to return it - the same situation\r\n            // as in this stackoverflow post\r\n            ContentSigner nonSigner_signedHashProvided = new ContentSigner() {\r\n\r\n                @Override\r\n                public byte[] getSignature() {\r\n                    return signedHashBytes;\r\n                }\r\n\r\n                @Override\r\n                public OutputStream getOutputStream() {\r\n                    return new ByteArrayOutputStream();\r\n                }\r\n\r\n                @Override\r\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\r\n                    return new DefaultSignatureAlgorithmIdentifierFinder().find(&quot;SHA256WithRSA&quot;);\r\n                }\r\n            };\r\n\r\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\n            X509Certificate certificateRepresentingTheSigner = (X509Certificate) certificateChain[0];\r\n\r\n            gen.addSignerInfoGenerator(\r\n                new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build())\r\n                    .build(\r\n                        nonSigner_signedHashProvided,\r\n                        certificateRepresentingTheSigner\r\n                    )\r\n            );\r\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\r\n\r\n            //CMSProcessableInputStream msg = new CMSProcessableInputStream(content);\r\n            //these don&#39;t seem to change anything\r\n            //CMSTypedData msg = new CMSProcessableByteArray(signedHashBytes);\r\n            CMSTypedData msg = new CMSProcessableInputStream(new ByteArrayInputStream(&quot;not used&quot;.getBytes()));\r\n            CMSSignedData signedData = gen.generate(msg, false);\r\n\r\n            return signedData.getEncoded();\r\n        } catch (GeneralSecurityException | CMSException | OperatorCreationException e) {\r\n            throw new IOException(e);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nClass imitating the external hash signing process - ExternalSignature\r\n\r\nI created a local keystore with self-signed private key with this command:\r\n\r\n`keytool -genkeypair -storepass 123456 -storetype pkcs12 -alias testKeystoreForPOC -validity 365 -keystore testKeystore.jks -keyalg RSA -sigalg SHA256withRSA`\r\n\r\n\r\n```java\r\npackage TOTPSignPDF.Service;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.security.InvalidKeyException;\r\nimport java.security.KeyStore;\r\nimport java.security.KeyStoreException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.PrivateKey;\r\nimport java.security.Signature;\r\nimport java.security.SignatureException;\r\nimport java.security.UnrecoverableKeyException;\r\nimport java.security.cert.Certificate;\r\nimport java.security.cert.CertificateEncodingException;\r\nimport java.security.cert.CertificateException;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Base64;\r\nimport java.util.Enumeration;\r\n\r\n@Service\r\npublic class ExternalSignature {\r\n    private static final Logger LOG = LoggerFactory.getLogger(ExternalSignature.class);\r\n\r\n    private Certificate[] certificateChain;\r\n\r\n    private PrivateKey privateKey;\r\n\r\n    public byte[] sign(byte[] bytesToSign) {\r\n        LOG.info(&quot;Started signing process&quot;);\r\n        try {\r\n            Signature privateSignature = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\n            privateSignature.initSign(privateKey);\r\n            privateSignature.update(bytesToSign);\r\n            byte[] signature = privateSignature.sign();\r\n            LOG.info(&quot;Finished signing process&quot;);\r\n            return signature;\r\n        } catch (NoSuchAlgorithmException | InvalidKeyException | SignatureException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public Certificate[] getCertificateChain(){\r\n        return this.certificateChain;\r\n    }\r\n\r\n    @PostConstruct\r\n    private void initializePostConstruct() {\r\n        File keystoreFile = new File(&quot;keystore/testKeystore.jks&quot;);\r\n\r\n        try {\r\n            KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n\r\n            char[] password = &quot;123456&quot;.toCharArray();\r\n            try (InputStream is = new FileInputStream(keystoreFile)) {\r\n                keystore.load(is, password);\r\n            }\r\n\r\n            // grabs the first alias from the keystore and get the private key. An\r\n            // alternative method or constructor could be used for setting a specific\r\n            // alias that should be used.\r\n            Enumeration&lt;String&gt; aliases = keystore.aliases();\r\n            String alias;\r\n            Certificate cert = null;\r\n            while (cert == null &amp;&amp; aliases.hasMoreElements()) {\r\n                alias = aliases.nextElement();\r\n                setPrivateKey((PrivateKey) keystore.getKey(alias, password));\r\n                Certificate[] certChain = keystore.getCertificateChain(alias);\r\n                if (certChain != null) {\r\n                    setCertificateChain(certChain);\r\n                    cert = certChain[0];\r\n                    if (cert instanceof X509Certificate) {\r\n                        // avoid expired certificate\r\n                        ((X509Certificate) cert).checkValidity();\r\n\r\n                        SigUtils.checkCertificateUsage((X509Certificate) cert);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (cert == null) {\r\n                throw new IOException(&quot;Could not find certificate&quot;);\r\n            }\r\n        } catch (KeyStoreException | NoSuchAlgorithmException | CertificateException | UnrecoverableKeyException | IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public final void setPrivateKey(PrivateKey privateKey) {\r\n        LOG.info(&quot;Set new private key&quot;);\r\n        String base64OfPrivateKey = new String(Base64.getEncoder().encode(privateKey.getEncoded()));\r\n        LOG.info(&quot;base64OfPrivateKey: &quot; + base64OfPrivateKey);\r\n        this.privateKey = privateKey;\r\n    }\r\n\r\n    public final void setCertificateChain(final Certificate[] certificateChain) {\r\n        LOG.info(&quot;Set new certificate chain, size: &quot; + certificateChain.length);\r\n        try {\r\n            String base64OfPublicKey = new String(Base64.getEncoder().encode(certificateChain[0].getEncoded()));\r\n            LOG.info(&quot;base64OfPublicKey: &quot; + base64OfPublicKey);\r\n        } catch (CertificateEncodingException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        this.certificateChain = certificateChain;\r\n    }\r\n}\r\n```\r\n\r\n\r\nAdditional classes that are used from Apache examples:\r\n\r\n- CMSProcessableInputStream\r\n- SigUtils\r\n\r\n**Please help us**\r\n\r\nAs far as we understand other posts on this site revolving around similar problems, everything should work, but it doesn&#39;t.\r\nMost probably we&#39;re missing some crucial step.\r\n\r\nWe’re looking forward to any response, every bit of information could help us.\r\n\r\nSomething that I don&#39;t understand is why the digest (hash) of the PDF is so small: `LXl/LHCaxrf7lYlN8d8m7gDNp9DRqY+azvxCS/mB3uY=`\r\n\r\nDoes it look like correct size ?\r\n\r\n\r\n\r\n**PDF examples and public / private key**\r\n\r\n - [PDF after signing](https://www.dropbox.com/scl/fi/zpy8wez9m6hk05r94b1og/PDFSignTest_signed.pdf?rlkey=4df0pjie0caqt5xkeb0tqfrlk&amp;dl=0)\r\n - [PDF before signing](https://www.dropbox.com/scl/fi/6xbq3k648iabgeomlq7ir/PDFSignTest.pdf?rlkey=faomwn2uw6c62xxyxv1uo5rnl&amp;dl=0)\r\n - [Keystore used for signing process](https://www.dropbox.com/scl/fi/mjqottdokq31a5lnc09fi/testKeystore.jks?rlkey=dqq75mb83gh09jhlru8emmi4c&amp;dl=0)\r\n\r\n - Public key in Base64:     `MIIDUTCCAjmgAwIBAgIEZPgGSjANBgkqhkiG9w0BAQsFADBZMQswCQYDVQQGEwJURTENMAsGA1UECBMEVGVzdDENMAsGA1UEBxMEVGVzdDENMAsGA1UEChMEVGVzdDENMAsGA1UECxMEVGVzdDEOMAwGA1UEAxMFSmFuIFMwHhcNMjMwODI0MTgzMTM2WhcNMjQwODIzMTgzMTM2WjBZMQswCQYDVQQGEwJURTENMAsGA1UECBMEVGVzdDENMAsGA1UEBxMEVGVzdDENMAsGA1UEChMEVGVzdDENMAsGA1UECxMEVGVzdDEOMAwGA1UEAxMFSmFuIFMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCEO5+UBxpzSI5vtmPvzlyz0d1yHph33VG9bFkqQ7bnmE3ghHiFyGTBrD7IPTrBg1NjhdC5jqpa/acY/oWUAwV5dlyD02nVBoy7VBLvz7QOc9QPaUQ2frVY4Qy05qgLZEGgnbpG2X44sqV8ogW1y2IaY+2F9NBKralp8r6M/sB4DKJmTWd+1UOlpnlfr3H5KvX+YXzfC+KVDIEoG7yzXZuw7I3x0VawVz/5gx3FAkagi7yHh9J58kmImpOFquxcK6SdMCoBsWmFmHmCpExVfxrVLMpIV5a5AHDWn84YHHRKC5kvhnyujXaIHFV+78TFxk8DGnPnKcgFRWKRVyfcYT7hAgMBAAGjITAfMB0GA1UdDgQWBBQFR8qbfk35MQdMqxQhZ2kkLoLPDDANBgkqhkiG9w0BAQsFAAOCAQEAI6aAn6zKcRieUkyHraRswYhxRjpc1fDaeDz01XanqxUIpNf31dU+f62oo5Dv4VAgd6MzLdFSpcERB9ScJzIIrz7mnqS0r8LhesDejs/mnDg2+E89XHy7yZtU3MqAXmESe7qms8AB1F68YZ+OOjWfn1AZfjaAzU0La49NaFbQE96vBLBGNX2Efavk7trv9PMCKMio19w/FBGwH8cU0erAi/WZhRlX3C1eFfmGSs5BWZL03yOmdeR/PVNut135dbk0EJ9rn6TJp1KgoNqcnsbPZcSxmUB/3U/hWUoFb6UN7g+1NbVh0PHCZ2Kbwyk6mO2viNbXka1WuopUxGh1RmJW9A==`\r\n\r\n - Private key in Base64:\r\n`MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCEO5+UBxpzSI5vtmPvzlyz0d1yHph33VG9bFkqQ7bnmE3ghHiFyGTBrD7IPTrBg1NjhdC5jqpa/acY/oWUAwV5dlyD02nVBoy7VBLvz7QOc9QPaUQ2frVY4Qy05qgLZEGgnbpG2X44sqV8ogW1y2IaY+2F9NBKralp8r6M/sB4DKJmTWd+1UOlpnlfr3H5KvX+YXzfC+KVDIEoG7yzXZuw7I3x0VawVz/5gx3FAkagi7yHh9J58kmImpOFquxcK6SdMCoBsWmFmHmCpExVfxrVLMpIV5a5AHDWn84YHHRKC5kvhnyujXaIHFV+78TFxk8DGnPnKcgFRWKRVyfcYT7hAgMBAAECggEAdp8iBWHl6XsyQ6bDufFOmgVu+RvXPNfuptXWmyKJpvKrEfjkQWdGc7L30xuSZNxRZxs45ezEh8G6L6LL475eH9r9HUj/TJmGj9nY7wZNiRWBK54MEjLSrfudMX8lSqrScKpt23bqUyR3bfnO04my5Oe1wRCf9g4ZxzB6nfM+Z7Hq+HxJRk5KlkMCGCf5Q0kA0t2FCkEHyvLUKft/ba05/XNODnDbA3n7AkWCzKmU9ypRen2OjqWaamQAaD0eJvxXDMEsAbZ+xGzD68GKs9+glmF9iZUoDwFMa3aCqVTpskOUtYxKHXVwgbhZoPpgmC+NPjlwaWdntp8a77q/Z0Jg0QKBgQDEwxbwvUHG3vtUK27WMBW7UunwUHuyA5ECaZG6Spm1rq6OhGLaSOWDNUF9VVgLTEkW6M/stxEuTqzWT1lbUqGIYeOkP6e5tD9LIYoUb6Sozpa6f0cwEsxNKpVOxRIn9tIOx3dZS164+rT1d75+t6W9tHPGFaOZJOKwObn9eoJK7QKBgQCsCx7xQq+rawXoNPQBBABSvLe4alxCQ8MhBDhFYjWAh9scfocCDFHSYXzG1AhMG5dBMNWvkL3xuXVw1ba7FltSb1VHvjQqkr9AV+QNR4sCorVy1tNIuH63Jwtsn3UkYr0CUU6u/sWZW5pirs+fobFv2DZraPnB3j5z1d8RpjShRQKBgF3ilMSkGYmyBgxgeQ98fDIY2wVO8ea76upSwzU3uWZGhoX8R0rOs6zKsYgDO/KQIOPsjKHvrCQDaFcOH54CrI7t3ngV44sppXXM+BzONKxTfvpYFviqT4+WfQ3L3ODy1cI1jQ4vd3AeOFBUJbJDILOHMiLXWmuNfRkHQmbfmOH1AoGAFilQkQ9gBZrBpgm8LK1RRVcd61l4DOkhp40dmoJuFeJqLR93UKI5n/oC0rHZZ8ReFX2u6PCiJxMWt7Qv16WnmdTRjW5I1fsVO7qWm8dNdsdyzBo0GTf6yqjy5ckck9VMN5I1qoES/xA3sOKHyC5R5vBZAjkBgyGXteAk3eck/GkCgYEArm4brBpXj+Ox6Korw0Hk2bdk30R7BAm2+N+E1683wJBnWP3kiGGRDaGulUtoq2HthXr42ZyfwtuiS9UrAJFOWDLy3UYxeR1DYDFoq+mdy1fR8IniWXyGZQ6goJ0t/SNIN1NsRnh03Fc8iqRqYEs3anvuOr8xGvMsxXW0qT9OLcY=`","title":"Java Apache PDFBox - issue with generating the hash for external signing or with merging it back - adding Public key certificate chain to PDF","body":"<p><strong>Problem description</strong></p>\n<p>We have a specific business / technical case - we need to electronically sign PDFs, and to do that we're partnering with a company that handles electronic signature over the hash of a PDF.</p>\n<p>We more or less know how to get the hash from the PDF and merge it back after signing by an external service via Rest API - but something along this process causes the PDF to show &quot;Document has been altered or corrupted since it was signed&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/FSmHW.png\" rel=\"nofollow noreferrer\">Resulting PDF with broken signature</a></p>\n<p><strong>How we're doing it</strong></p>\n<p>We are using library Apache PDFBox version 3.0.0 (and we tried with different versions as well) and we're basing our solution on the official Apache Examples:</p>\n<p><a href=\"https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/\" rel=\"nofollow noreferrer\">https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/</a></p>\n<ul>\n<li>CreateSignature</li>\n<li>CreateSignatureBase</li>\n</ul>\n<p>We've read many posts on stackoverlow that describe problems similar to ours, for example:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/56867465/external-signature-with-pdfbox-2-0-15\">External Signature with PDFBox 2.0.15</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41767351/create-pkcs7-signature-from-file-digest\">Create pkcs7 signature from file digest</a></li>\n</ul>\n<p><em>And we settled on the solution described here</em>:\n<a href=\"https://stackoverflow.com/questions/69676156/java-pdfbox-pdf-sign-problem-external-signature-invalid-signature-there-are\">Java PdfBox - PDF Sign Problem -External Signature -Invalid signature There are errors in formatting or in the information contained in this signature</a></p>\n<p>Our main class - CreateSignature</p>\n<pre class=\"lang-java prettyprint-override\"><code>package TOTPSignPDF.Service;\n\nimport org.apache.pdfbox.Loader;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.ExternalSigningSupport;\nimport org.apache.pdfbox.pdmodel.interactive.digitalsignature.PDSignature;\nimport org.bouncycastle.asn1.x509.AlgorithmIdentifier;\nimport org.bouncycastle.cert.jcajce.JcaCertStore;\nimport org.bouncycastle.cms.CMSException;\nimport org.bouncycastle.cms.CMSSignedData;\nimport org.bouncycastle.cms.CMSSignedDataGenerator;\nimport org.bouncycastle.cms.CMSTypedData;\nimport org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.operator.ContentSigner;\nimport org.bouncycastle.operator.DefaultSignatureAlgorithmIdentifierFinder;\nimport org.bouncycastle.operator.OperatorCreationException;\nimport org.bouncycastle.operator.jcajce.JcaDigestCalculatorProviderBuilder;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.security.GeneralSecurityException;\nimport java.security.MessageDigest;\nimport java.security.cert.Certificate;\nimport java.security.cert.X509Certificate;\nimport java.util.Arrays;\nimport java.util.Base64;\nimport java.util.Calendar;\n\n/*\n    This solution was based on official examples from Apache:\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java?revision=1899086&amp;view=markup\n    https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignatureBase.java?view=markup\n */\n\n@Service\npublic class CreateSignature {\n\n    private static final Logger LOG = LoggerFactory.getLogger(CreateSignature.class);\n\n    //@Autowired\n    //ServerSignature serverSignature;\n\n    @Autowired\n    ExternalSignature externalSignature;\n\n    private Certificate[] certificateChain;\n\n    /**\n     * Signs the given PDF file.\n     *\n     * @param inFile the original PDF file\n     */\n    public void signDocument(File inFile) throws IOException {\n\n        // we're being given the certificate chain with public key\n        setCertificateChain(externalSignature.getCertificateChain());\n\n        String name = inFile.getName();\n        String substring = name.substring(0, name.lastIndexOf('.'));\n\n        File outFile = new File(inFile.getParent(), substring + &quot;_signed.pdf&quot;);\n        loadPDFAndSign(inFile, outFile);\n    }\n\n    private void setCertificateChain(final Certificate[] certificateChain) {\n        this.certificateChain = certificateChain;\n    }\n\n    /**\n     * Signs the given PDF file.\n     *\n     * @param inFile  input PDF file\n     * @param outFile output PDF file\n     * @throws IOException if the input file could not be read\n     */\n\n    private void loadPDFAndSign(File inFile, File outFile) throws IOException {\n        if (inFile == null || !inFile.exists()) {\n            throw new FileNotFoundException(&quot;Document for signing does not exist&quot;);\n        }\n\n        // sign\n        try (FileOutputStream fileOutputStream = new FileOutputStream(outFile);\n             PDDocument doc = Loader.loadPDF(inFile)) {\n            addSignatureDictionaryAndSignExternally(doc, fileOutputStream);\n        }\n    }\n\n    private void addSignatureDictionaryAndSignExternally(PDDocument document, OutputStream output)\n        throws IOException {\n\n        int accessPermissions = SigUtils.getMDPPermission(document);\n        if (accessPermissions == 1) {\n            throw new IllegalStateException(&quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot;);\n        }\n\n        // create signature dictionary\n        PDSignature signature = new PDSignature();\n        signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\n        signature.setSubFilter(PDSignature.SUBFILTER_ADBE_PKCS7_DETACHED);\n        signature.setName(&quot;Example User&quot;);\n        signature.setLocation(&quot;Los Angeles, CA&quot;);\n        signature.setReason(&quot;Testing&quot;);\n\n        // the signing date, needed for valid signature\n        signature.setSignDate(Calendar.getInstance());\n\n        // Optional: certify \n        if (accessPermissions == 0) {\n            SigUtils.setMDPPermission(document, signature, 2);\n        }\n\n        // it was if(isExternalSigning()) {\n        document.addSignature(signature);\n        ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\n        // invoke external signature service - passing the document content with the &quot;empty&quot; signature added\n        byte[] cmsSignature = sign(externalSigning.getContent());\n        // set signature bytes received from the service\n        externalSigning.setSignature(cmsSignature);\n        //}\n\n        // call SigUtils.checkCrossReferenceTable(document) if Adobe complains - we're doing it only because I ran out of ideas\n        // and read https://stackoverflow.com/a/71293901/535646\n        // and https://issues.apache.org/jira/browse/PDFBOX-5382\n        SigUtils.checkCrossReferenceTable(document); // no errors here\n\n        //document.close(); not needed because document is defined as auto-closeable resource in the function above\n    }\n\n    /**\n     * SignatureInterface sample implementation.\n     * Use your favorite cryptographic library to implement PKCS #7 signature creation.\n     * If you want to create the hash and the signature separately (e.g. to transfer only the hash\n     * to an external application), read &lt;a href=&quot;https://stackoverflow.com/questions/41767351&quot;&gt;this\n     * answer&lt;/a&gt; or &lt;a href=&quot;https://stackoverflow.com/questions/56867465&quot;&gt;this answer&lt;/a&gt;.\n     *\n     * @throws IOException\n     */\n    private byte[] sign(InputStream content) throws IOException {\n        try {\n\n            // get the hash of the document with additional signature field\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA256&quot;, new BouncyCastleProvider());\n\n            byte[] hashBytes = digest.digest(content.readAllBytes());\n            String hashBase64 = new String(Base64.getEncoder().encode(hashBytes));\n            LOG.info(&quot;Digest in Base64: &quot; + hashBase64);\n\n            // call External API to sign the hash - hash of the document with added field for signature\n            //byte[] signedHashBytes = serverSignature.sign(hashBase64);\n            byte[] signedHashBytes = externalSignature.sign(hashBytes);\n\n            // this lower part of the code is based on this answer:\n            // https://stackoverflow.com/questions/69676156/java-pdfbox-pdf-sign-problem-external-signature-invalid-signature-there-are\n            //\n            // In the standalone application this ContentSigner would be an implementation of signing process,\n            // but we are given the signed hash from the External Api and we just have to return it - the same situation\n            // as in this stackoverflow post\n            ContentSigner nonSigner_signedHashProvided = new ContentSigner() {\n\n                @Override\n                public byte[] getSignature() {\n                    return signedHashBytes;\n                }\n\n                @Override\n                public OutputStream getOutputStream() {\n                    return new ByteArrayOutputStream();\n                }\n\n                @Override\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\n                    return new DefaultSignatureAlgorithmIdentifierFinder().find(&quot;SHA256WithRSA&quot;);\n                }\n            };\n\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\n            X509Certificate certificateRepresentingTheSigner = (X509Certificate) certificateChain[0];\n\n            gen.addSignerInfoGenerator(\n                new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build())\n                    .build(\n                        nonSigner_signedHashProvided,\n                        certificateRepresentingTheSigner\n                    )\n            );\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\n\n            //CMSProcessableInputStream msg = new CMSProcessableInputStream(content);\n            //these don't seem to change anything\n            //CMSTypedData msg = new CMSProcessableByteArray(signedHashBytes);\n            CMSTypedData msg = new CMSProcessableInputStream(new ByteArrayInputStream(&quot;not used&quot;.getBytes()));\n            CMSSignedData signedData = gen.generate(msg, false);\n\n            return signedData.getEncoded();\n        } catch (GeneralSecurityException | CMSException | OperatorCreationException e) {\n            throw new IOException(e);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Class imitating the external hash signing process - ExternalSignature</p>\n<p>I created a local keystore with self-signed private key with this command:</p>\n<p><code>keytool -genkeypair -storepass 123456 -storetype pkcs12 -alias testKeystoreForPOC -validity 365 -keystore testKeystore.jks -keyalg RSA -sigalg SHA256withRSA</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package TOTPSignPDF.Service;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\n\nimport javax.annotation.PostConstruct;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.InvalidKeyException;\nimport java.security.KeyStore;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.PrivateKey;\nimport java.security.Signature;\nimport java.security.SignatureException;\nimport java.security.UnrecoverableKeyException;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport java.util.Base64;\nimport java.util.Enumeration;\n\n@Service\npublic class ExternalSignature {\n    private static final Logger LOG = LoggerFactory.getLogger(ExternalSignature.class);\n\n    private Certificate[] certificateChain;\n\n    private PrivateKey privateKey;\n\n    public byte[] sign(byte[] bytesToSign) {\n        LOG.info(&quot;Started signing process&quot;);\n        try {\n            Signature privateSignature = Signature.getInstance(&quot;SHA256withRSA&quot;);\n            privateSignature.initSign(privateKey);\n            privateSignature.update(bytesToSign);\n            byte[] signature = privateSignature.sign();\n            LOG.info(&quot;Finished signing process&quot;);\n            return signature;\n        } catch (NoSuchAlgorithmException | InvalidKeyException | SignatureException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public Certificate[] getCertificateChain(){\n        return this.certificateChain;\n    }\n\n    @PostConstruct\n    private void initializePostConstruct() {\n        File keystoreFile = new File(&quot;keystore/testKeystore.jks&quot;);\n\n        try {\n            KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\n\n            char[] password = &quot;123456&quot;.toCharArray();\n            try (InputStream is = new FileInputStream(keystoreFile)) {\n                keystore.load(is, password);\n            }\n\n            // grabs the first alias from the keystore and get the private key. An\n            // alternative method or constructor could be used for setting a specific\n            // alias that should be used.\n            Enumeration&lt;String&gt; aliases = keystore.aliases();\n            String alias;\n            Certificate cert = null;\n            while (cert == null &amp;&amp; aliases.hasMoreElements()) {\n                alias = aliases.nextElement();\n                setPrivateKey((PrivateKey) keystore.getKey(alias, password));\n                Certificate[] certChain = keystore.getCertificateChain(alias);\n                if (certChain != null) {\n                    setCertificateChain(certChain);\n                    cert = certChain[0];\n                    if (cert instanceof X509Certificate) {\n                        // avoid expired certificate\n                        ((X509Certificate) cert).checkValidity();\n\n                        SigUtils.checkCertificateUsage((X509Certificate) cert);\n                    }\n                }\n            }\n\n            if (cert == null) {\n                throw new IOException(&quot;Could not find certificate&quot;);\n            }\n        } catch (KeyStoreException | NoSuchAlgorithmException | CertificateException | UnrecoverableKeyException | IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public final void setPrivateKey(PrivateKey privateKey) {\n        LOG.info(&quot;Set new private key&quot;);\n        String base64OfPrivateKey = new String(Base64.getEncoder().encode(privateKey.getEncoded()));\n        LOG.info(&quot;base64OfPrivateKey: &quot; + base64OfPrivateKey);\n        this.privateKey = privateKey;\n    }\n\n    public final void setCertificateChain(final Certificate[] certificateChain) {\n        LOG.info(&quot;Set new certificate chain, size: &quot; + certificateChain.length);\n        try {\n            String base64OfPublicKey = new String(Base64.getEncoder().encode(certificateChain[0].getEncoded()));\n            LOG.info(&quot;base64OfPublicKey: &quot; + base64OfPublicKey);\n        } catch (CertificateEncodingException e) {\n            throw new RuntimeException(e);\n        }\n        this.certificateChain = certificateChain;\n    }\n}\n</code></pre>\n<p>Additional classes that are used from Apache examples:</p>\n<ul>\n<li>CMSProcessableInputStream</li>\n<li>SigUtils</li>\n</ul>\n<p><strong>Please help us</strong></p>\n<p>As far as we understand other posts on this site revolving around similar problems, everything should work, but it doesn't.\nMost probably we're missing some crucial step.</p>\n<p>We’re looking forward to any response, every bit of information could help us.</p>\n<p>Something that I don't understand is why the digest (hash) of the PDF is so small: <code>LXl/LHCaxrf7lYlN8d8m7gDNp9DRqY+azvxCS/mB3uY=</code></p>\n<p>Does it look like correct size ?</p>\n<p><strong>PDF examples and public / private key</strong></p>\n<ul>\n<li><p><a href=\"https://www.dropbox.com/scl/fi/zpy8wez9m6hk05r94b1og/PDFSignTest_signed.pdf?rlkey=4df0pjie0caqt5xkeb0tqfrlk&amp;dl=0\" rel=\"nofollow noreferrer\">PDF after signing</a></p>\n</li>\n<li><p><a href=\"https://www.dropbox.com/scl/fi/6xbq3k648iabgeomlq7ir/PDFSignTest.pdf?rlkey=faomwn2uw6c62xxyxv1uo5rnl&amp;dl=0\" rel=\"nofollow noreferrer\">PDF before signing</a></p>\n</li>\n<li><p><a href=\"https://www.dropbox.com/scl/fi/mjqottdokq31a5lnc09fi/testKeystore.jks?rlkey=dqq75mb83gh09jhlru8emmi4c&amp;dl=0\" rel=\"nofollow noreferrer\">Keystore used for signing process</a></p>\n</li>\n<li><p>Public key in Base64:     <code>MIIDUTCCAjmgAwIBAgIEZPgGSjANBgkqhkiG9w0BAQsFADBZMQswCQYDVQQGEwJURTENMAsGA1UECBMEVGVzdDENMAsGA1UEBxMEVGVzdDENMAsGA1UEChMEVGVzdDENMAsGA1UECxMEVGVzdDEOMAwGA1UEAxMFSmFuIFMwHhcNMjMwODI0MTgzMTM2WhcNMjQwODIzMTgzMTM2WjBZMQswCQYDVQQGEwJURTENMAsGA1UECBMEVGVzdDENMAsGA1UEBxMEVGVzdDENMAsGA1UEChMEVGVzdDENMAsGA1UECxMEVGVzdDEOMAwGA1UEAxMFSmFuIFMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCEO5+UBxpzSI5vtmPvzlyz0d1yHph33VG9bFkqQ7bnmE3ghHiFyGTBrD7IPTrBg1NjhdC5jqpa/acY/oWUAwV5dlyD02nVBoy7VBLvz7QOc9QPaUQ2frVY4Qy05qgLZEGgnbpG2X44sqV8ogW1y2IaY+2F9NBKralp8r6M/sB4DKJmTWd+1UOlpnlfr3H5KvX+YXzfC+KVDIEoG7yzXZuw7I3x0VawVz/5gx3FAkagi7yHh9J58kmImpOFquxcK6SdMCoBsWmFmHmCpExVfxrVLMpIV5a5AHDWn84YHHRKC5kvhnyujXaIHFV+78TFxk8DGnPnKcgFRWKRVyfcYT7hAgMBAAGjITAfMB0GA1UdDgQWBBQFR8qbfk35MQdMqxQhZ2kkLoLPDDANBgkqhkiG9w0BAQsFAAOCAQEAI6aAn6zKcRieUkyHraRswYhxRjpc1fDaeDz01XanqxUIpNf31dU+f62oo5Dv4VAgd6MzLdFSpcERB9ScJzIIrz7mnqS0r8LhesDejs/mnDg2+E89XHy7yZtU3MqAXmESe7qms8AB1F68YZ+OOjWfn1AZfjaAzU0La49NaFbQE96vBLBGNX2Efavk7trv9PMCKMio19w/FBGwH8cU0erAi/WZhRlX3C1eFfmGSs5BWZL03yOmdeR/PVNut135dbk0EJ9rn6TJp1KgoNqcnsbPZcSxmUB/3U/hWUoFb6UN7g+1NbVh0PHCZ2Kbwyk6mO2viNbXka1WuopUxGh1RmJW9A==</code></p>\n</li>\n<li><p>Private key in Base64:\n<code>MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCEO5+UBxpzSI5vtmPvzlyz0d1yHph33VG9bFkqQ7bnmE3ghHiFyGTBrD7IPTrBg1NjhdC5jqpa/acY/oWUAwV5dlyD02nVBoy7VBLvz7QOc9QPaUQ2frVY4Qy05qgLZEGgnbpG2X44sqV8ogW1y2IaY+2F9NBKralp8r6M/sB4DKJmTWd+1UOlpnlfr3H5KvX+YXzfC+KVDIEoG7yzXZuw7I3x0VawVz/5gx3FAkagi7yHh9J58kmImpOFquxcK6SdMCoBsWmFmHmCpExVfxrVLMpIV5a5AHDWn84YHHRKC5kvhnyujXaIHFV+78TFxk8DGnPnKcgFRWKRVyfcYT7hAgMBAAECggEAdp8iBWHl6XsyQ6bDufFOmgVu+RvXPNfuptXWmyKJpvKrEfjkQWdGc7L30xuSZNxRZxs45ezEh8G6L6LL475eH9r9HUj/TJmGj9nY7wZNiRWBK54MEjLSrfudMX8lSqrScKpt23bqUyR3bfnO04my5Oe1wRCf9g4ZxzB6nfM+Z7Hq+HxJRk5KlkMCGCf5Q0kA0t2FCkEHyvLUKft/ba05/XNODnDbA3n7AkWCzKmU9ypRen2OjqWaamQAaD0eJvxXDMEsAbZ+xGzD68GKs9+glmF9iZUoDwFMa3aCqVTpskOUtYxKHXVwgbhZoPpgmC+NPjlwaWdntp8a77q/Z0Jg0QKBgQDEwxbwvUHG3vtUK27WMBW7UunwUHuyA5ECaZG6Spm1rq6OhGLaSOWDNUF9VVgLTEkW6M/stxEuTqzWT1lbUqGIYeOkP6e5tD9LIYoUb6Sozpa6f0cwEsxNKpVOxRIn9tIOx3dZS164+rT1d75+t6W9tHPGFaOZJOKwObn9eoJK7QKBgQCsCx7xQq+rawXoNPQBBABSvLe4alxCQ8MhBDhFYjWAh9scfocCDFHSYXzG1AhMG5dBMNWvkL3xuXVw1ba7FltSb1VHvjQqkr9AV+QNR4sCorVy1tNIuH63Jwtsn3UkYr0CUU6u/sWZW5pirs+fobFv2DZraPnB3j5z1d8RpjShRQKBgF3ilMSkGYmyBgxgeQ98fDIY2wVO8ea76upSwzU3uWZGhoX8R0rOs6zKsYgDO/KQIOPsjKHvrCQDaFcOH54CrI7t3ngV44sppXXM+BzONKxTfvpYFviqT4+WfQ3L3ODy1cI1jQ4vd3AeOFBUJbJDILOHMiLXWmuNfRkHQmbfmOH1AoGAFilQkQ9gBZrBpgm8LK1RRVcd61l4DOkhp40dmoJuFeJqLR93UKI5n/oC0rHZZ8ReFX2u6PCiJxMWt7Qv16WnmdTRjW5I1fsVO7qWm8dNdsdyzBo0GTf6yqjy5ckck9VMN5I1qoES/xA3sOKHyC5R5vBZAjkBgyGXteAk3eck/GkCgYEArm4brBpXj+Ox6Korw0Hk2bdk30R7BAm2+N+E1683wJBnWP3kiGGRDaGulUtoq2HthXr42ZyfwtuiS9UrAJFOWDLy3UYxeR1DYDFoq+mdy1fR8IniWXyGZQ6goJ0t/SNIN1NsRnh03Fc8iqRqYEs3anvuOr8xGvMsxXW0qT9OLcY=</code></p>\n</li>\n</ul>\n"},{"tags":["java","android","sms","restore","smsmanager"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1693524086,"post_id":77019630,"comment_id":135776413,"body_markdown":"You&#39;re trying to insert the same id multiple times.  You can&#39;t do that.  If an sms with that id already exists in the db, it will fail like this.","body":"You&#39;re trying to insert the same id multiple times.  You can&#39;t do that.  If an sms with that id already exists in the db, it will fail like this."},{"owner":{"account_id":6964564,"reputation":1,"user_id":5343031,"display_name":"Shahin Sadeghi"},"score":0,"creation_date":1693563608,"post_id":77019630,"comment_id":135780920,"body_markdown":"Thank you @GabeSechan I deleted all the text messages from the phone and there is no similar id and the error Logcat is no longer shown but The bug still remains and SMS messages cannot be restored only on Xiaomi phones.","body":"Thank you @GabeSechan I deleted all the text messages from the phone and there is no similar id and the error Logcat is no longer shown but The bug still remains and SMS messages cannot be restored only on Xiaomi phones."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1693836580,"post_id":77019630,"comment_id":135809061,"body_markdown":"When your &quot;app cannot restore text messages&quot;, what *exactly* happens? Crash, stacktrace, error messages, actual vs expected results...","body":"When your &quot;app cannot restore text messages&quot;, what <i>exactly</i> happens? Crash, stacktrace, error messages, actual vs expected results..."},{"owner":{"account_id":6964564,"reputation":1,"user_id":5343031,"display_name":"Shahin Sadeghi"},"score":0,"creation_date":1693858541,"post_id":77019630,"comment_id":135812556,"body_markdown":"Hi @Jorn it doesn&#39;t display any errors or Crash in logcat just show in the Verbose:\n 2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names&#160;are: _id\n2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names&#160;are: thread_id\n2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names&#160;are: address\n2023-09-05 00:38:47.089 9563-9563/com.backupeamoozesh3 D/Names&#160;are: mx_id_v2\n2023-09-05 00:38:47.120 9563-9563/com.backupeamoozesh3 I/Toast: Show toast from OpPackageName:com.backupeamoozesh3, PackageName:com.backupeamoozesh3","body":"Hi @Jorn it doesn&#39;t display any errors or Crash in logcat just show in the Verbose:  2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names are: _id 2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names are: thread_id 2023-09-05 00:38:47.088 9563-9563/com.backupeamoozesh3 D/Names are: address 2023-09-05 00:38:47.089 9563-9563/com.backupeamoozesh3 D/Names are: mx_id_v2 2023-09-05 00:38:47.120 9563-9563/com.backupeamoozesh3 I/Toast: Show toast from OpPackageName:com.backupeamoozesh3, PackageName:com.backupeamoozesh3"}],"answers":[{"tags":[],"owner":{"account_id":29293095,"reputation":840,"user_id":22443070,"display_name":"xPetersue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694357969,"creation_date":1694357969,"answer_id":77076639,"question_id":77019630,"body_markdown":"I just noticed that the issue with duplicated IDs has been resolved. Well, the issue only persists on Xiaomi phones.\r\n\r\nTry to check the following possibilities.\r\n\r\n1. Make sure your app is compatible with Xiaomi&#39;s MIUI and that it has the necessary permissions to read and write SMS messages.\r\n2. Update Dependencies: Ensure that your app&#39;s dependencies, including any third-party libraries and the Android SDK, are up to date. Sometimes, issues can be caused by outdated libraries or SDK versions.\r\n\r\nIf the issue persists, consider alternative methods for SMS backup and restore on Xiaomi devices. Xiaomi&#39;s customizations may conflict with certain approaches. You could explore options like using Xiaomi&#39;s official backup and restore APIs if available.\r\n","title":"SMS backups cannot be restored on Xiaomi phones android","body":"<p>I just noticed that the issue with duplicated IDs has been resolved. Well, the issue only persists on Xiaomi phones.</p>\n<p>Try to check the following possibilities.</p>\n<ol>\n<li>Make sure your app is compatible with Xiaomi's MIUI and that it has the necessary permissions to read and write SMS messages.</li>\n<li>Update Dependencies: Ensure that your app's dependencies, including any third-party libraries and the Android SDK, are up to date. Sometimes, issues can be caused by outdated libraries or SDK versions.</li>\n</ol>\n<p>If the issue persists, consider alternative methods for SMS backup and restore on Xiaomi devices. Xiaomi's customizations may conflict with certain approaches. You could explore options like using Xiaomi's official backup and restore APIs if available.</p>\n"}],"owner":{"account_id":6964564,"reputation":1,"user_id":5343031,"display_name":"Shahin Sadeghi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1694357969,"creation_date":1693521720,"question_id":77019630,"body_markdown":"I&#39;m making one sms backup and restore android app.&lt;br&gt;\r\nUnfortunately, my app cannot restore text messages on Xiaomi phones, including Redmi 3s with android 6, Redmi Note 11 with android 12, But in other phones, it performs SMS backup and restore operations very well.&lt;br&gt;\r\nHow can I solve this bug?&lt;br&gt;\r\nJava codes:&lt;br&gt;\r\n``` \r\npublic class SmsBackupActivity extends Activity {\r\n\r\n    private static final int DEF_SMS_REQ = 0;\r\n    Button btnBackup;\r\n    Button btnRestore;\r\n    AlertDialog dismiss;\r\n    SMSGettersSetters localSMSGettersSetters;\r\n    Cursor localCursor;\r\n    int i;\r\n    int j;\r\n    private static Context context;\r\n    ProgressDialog pDialog;\r\n    public List&lt;SMSGettersSetters&gt; smsBuffer = new ArrayList();\r\n    TextView tvLastBackup;\r\n    FileWriter write;\r\n    String[] xmlfile;\r\n    Uri localUri;\r\n\r\n    private void backupSMS() throws IOException {\r\n\r\n        this.smsBuffer.clear();\r\n        String str1 = getExternalFilesDir(null) + File.separator + &quot;sms&quot;;\r\n        this.write = new FileWriter(str1 + File.separator + this.xmlfile[0] + &quot;.xml&quot;);\r\n        localUri = Uri.parse(&quot;content://sms/&quot;);\r\n        ContentResolver localContentResolver = getContentResolver();\r\n        String[] arrayOfString1 = new String[8];\r\n        arrayOfString1[0] = &quot;_id&quot;;\r\n        arrayOfString1[1] = &quot;thread_id&quot;;\r\n        arrayOfString1[2] = &quot;address&quot;;\r\n        arrayOfString1[3] = &quot;person&quot;;\r\n        arrayOfString1[4] = &quot;date&quot;;\r\n        arrayOfString1[5] = &quot;body&quot;;\r\n        arrayOfString1[6] = &quot;type&quot;;\r\n        arrayOfString1[7] = &quot;read&quot;;\r\n        localCursor = localContentResolver.query(localUri, arrayOfString1, null, null, null);\r\n        String[] arrayOfString2 = new String[8];\r\n        arrayOfString2[0] = &quot;_id&quot;;\r\n        arrayOfString2[1] = &quot;thread_id&quot;;\r\n        arrayOfString2[2] = &quot;address&quot;;\r\n        arrayOfString2[3] = &quot;person&quot;;\r\n        arrayOfString2[4] = &quot;date&quot;;\r\n        arrayOfString2[5] = &quot;body&quot;;\r\n        arrayOfString2[6] = &quot;type&quot;;\r\n        arrayOfString2[7] = &quot;read&quot;;\r\n        localCursor.moveToFirst();\r\n        i = localCursor.getCount();\r\n        this.pDialog.setMax(i);\r\n        this.write.append(&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;&quot;);\r\n        this.write.append(&#39;\\n&#39;);\r\n        this.write.append(&quot;&lt;smsall&gt;&quot;);\r\n        this.write.append(&#39;\\n&#39;);\r\n\r\n        while (true) {\r\n            localSMSGettersSetters = new SMSGettersSetters();\r\n            @SuppressLint(&quot;Range&quot;) String str2 = localCursor.getString(localCursor.getColumnIndex(&quot;_id&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str3 = localCursor.getString(localCursor.getColumnIndex(&quot;thread_id&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str4 = localCursor.getString(localCursor.getColumnIndex(&quot;address&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str5 = localCursor.getString(localCursor.getColumnIndex(&quot;person&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str6 = localCursor.getString(localCursor.getColumnIndex(&quot;date&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str7 = localCursor.getString(localCursor.getColumnIndex(&quot;body&quot;)).replaceAll(&quot;&amp;&quot;, &quot;&amp;amp;&quot;).replaceAll(&quot;&lt;&quot;, &quot;&amp;lt;&quot;).replaceAll(&quot;&gt;&quot;, &quot;&amp;gt;&quot;).replaceAll(&quot;\\&quot;&quot;, &quot;&amp;quot;&quot;).replaceAll(&quot;&gt;&quot;, &quot;&amp;apos;&quot;).replaceAll(&quot;&#39;&quot;, &quot;&amp;frasl;&quot;);\r\n            @SuppressLint(&quot;Range&quot;) String str8 = localCursor.getString(localCursor.getColumnIndex(&quot;type&quot;));\r\n            @SuppressLint(&quot;Range&quot;) String str9 = localCursor.getString(localCursor.getColumnIndex(&quot;read&quot;));\r\n            localSMSGettersSetters.setId(str2);\r\n            localSMSGettersSetters.setThreadId(str3);\r\n            localSMSGettersSetters.setAddres(str4);\r\n            localSMSGettersSetters.setPerson(str5);\r\n            localSMSGettersSetters.setDate(str6);\r\n            localSMSGettersSetters.setBody(str7);\r\n            localSMSGettersSetters.setType(str8);\r\n            localSMSGettersSetters.setRead(str9);\r\n            localSMSGettersSetters.setSentDate(str1);\r\n            this.smsBuffer.add(localSMSGettersSetters);\r\n\r\n            Handler localHandler = new Handler(Looper.getMainLooper());\r\n            localHandler.post(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    final int m = j;\r\n                    SmsBackupActivity.this.pDialog.setProgress(1 + m);\r\n                    i++;\r\n                    int v = -1 + i;\r\n\r\n                    if (m == v) {\r\n\r\n                        Log.d(&quot;dismiss&quot;, &quot;is called&quot;);\r\n                        SmsBackupActivity.this.pDialog.dismiss();\r\n                        SmsBackupActivity.this.setBackupDate();\r\n                    }\r\n                    i--;\r\n                    return;\r\n                }\r\n            });\r\n            generateXMLFileForSMS(localSMSGettersSetters);\r\n            localCursor.moveToNext();\r\n            j++;\r\n\r\n            if (j == i) {\r\n                this.write.append(&quot;&lt;/smsall&gt;&quot;);\r\n                this.write.flush();\r\n                this.write.close();\r\n                pDialog.dismiss();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    private void generateXMLFileForSMS(SMSGettersSetters paramSMSGettersSetters) {\r\n        try {\r\n            this.write.append(&quot;&lt;sms&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;id&gt;&quot; + paramSMSGettersSetters.getId() + &quot;&lt;/id&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;threadId&gt;&quot; + paramSMSGettersSetters.getThreadId() + &quot;&lt;/threadId&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;address&gt;&quot; + paramSMSGettersSetters.getAddress() + &quot;&lt;/address&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;person&gt;&quot; + paramSMSGettersSetters.getPerson() + &quot;&lt;/person&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;date&gt;&quot; + paramSMSGettersSetters.getDate() + &quot;&lt;/date&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;body&gt;&quot; + paramSMSGettersSetters.getBody() + &quot;&lt;/body&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;type&gt;&quot; + paramSMSGettersSetters.getType() + &quot;&lt;/type&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;read&gt;&quot; + paramSMSGettersSetters.getRead() + &quot;&lt;/read&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            this.write.append(&quot;&lt;/sms&gt;&quot;);\r\n            this.write.append(&#39;\\n&#39;);\r\n            return;\r\n        } catch (NullPointerException localNullPointerException) {\r\n            while (true)\r\n                System.out.println(&quot;Nullpointer Exception &quot; + localNullPointerException);\r\n        } catch (IOException localIOException) {\r\n            while (true)\r\n                localIOException.printStackTrace();\r\n        } catch (Exception localException) {\r\n            while (true)\r\n                localException.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void launchComponent(String paramString1, String paramString2) {\r\n        Intent localIntent = new Intent(&quot;android.intent.action.MAIN&quot;);\r\n        localIntent.addCategory(&quot;android.intent.category.LAUNCHER&quot;);\r\n        localIntent.setComponent(new ComponentName(paramString1, paramString2));\r\n        startActivity(localIntent);\r\n    }\r\n\r\n    public void BackupAlert() {\r\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\r\n        View localView = getLayoutInflater().inflate(R.layout.layout_backup_dialog, null);\r\n        final EditText localEditText = (EditText) localView.findViewById(R.id.etFileName);\r\n        CharSequence localCharSequence = DateFormat.format(&quot;yyMMddhhmmss&quot;, new Date().getTime());\r\n        localEditText.setText(&quot;sms_&quot; + localCharSequence + &quot;.xml&quot;);\r\n        localBuilder.setView(localView);\r\n        localBuilder.setPositiveButton(&quot;ok&quot;, new OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\r\n                SmsBackupActivity.this.xmlfile = localEditText.getText().toString().trim().split(&quot;.xml&quot;);\r\n                SmsBackupActivity.this.setProgressDialog();\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            Looper.prepare();\r\n                            SmsBackupActivity.this.backupSMS();\r\n                            Looper.loop();\r\n                        } catch (IOException e) {\r\n                            // TODO Auto-generated catch block\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }).start();\r\n            }\r\n        });\r\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\r\n        AlertDialog localAlertDialog = localBuilder.create();\r\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation;\r\n        localAlertDialog.show();\r\n    }\r\n\r\n\r\n    public String getBackupDate(String paramString) {\r\n        return getSharedPreferences(&quot;BackupPrefs&quot;, 0).getString(paramString, getString(R.string.never_backup));\r\n    }\r\n\r\n    public int getSMSCount() {\r\n        Cursor localCursor = getContentResolver().query(Uri.parse(&quot;content://sms/&quot;), null, null, null, null);\r\n        String[] arrayOfString = localCursor.getColumnNames();\r\n        for (int i = 0; ; i++) {\r\n            if (i &gt;= arrayOfString.length)\r\n                return localCursor.getCount();\r\n            Log.d(&quot;Names are&quot;, arrayOfString[i]);\r\n        }\r\n    }\r\n\r\n    public List&lt;FileGetterSetters&gt; getSMSFiles() {\r\n        ArrayList localArrayList = new ArrayList();\r\n        File[] arrayOfFile = new File(getExternalFilesDir(null) + File.separator + &quot;sms&quot;).listFiles();\r\n        int i = arrayOfFile.length;\r\n        for (int j = 0; ; j++) {\r\n            if (j &gt;= i)\r\n                return localArrayList;\r\n            File localFile = arrayOfFile[j];\r\n            FileGetterSetters localFileGetterSetters = new FileGetterSetters();\r\n            Log.d(&quot;file Name is&quot;, localFile.getName());\r\n            localFileGetterSetters.setFileName(localFile.getName());\r\n            Date localDate = new Date(localFile.lastModified());\r\n            Log.d(&quot;Modified date is&quot;, localDate.toString());\r\n            localFileGetterSetters.setDateCreated(localDate.toString());\r\n            localArrayList.add(localFileGetterSetters);\r\n        }\r\n    }\r\n\r\n    public String getXML(String paramString) {\r\n        Log.d(&quot;File path is&quot;, paramString);\r\n        File localFile = new File(paramString);\r\n        StringBuilder localStringBuilder = new StringBuilder();\r\n        try {\r\n            BufferedReader localBufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(localFile)));\r\n            while (true) {\r\n                String str = localBufferedReader.readLine();\r\n                if (str == null)\r\n                    return localStringBuilder.toString();\r\n                localStringBuilder.append(str);\r\n                localStringBuilder.append(&#39;\\n&#39;);\r\n            }\r\n        } catch (IOException localIOException) {\r\n\r\n        }\r\n        return paramString;\r\n    }\r\n\r\n    public void initAllViews() {\r\n        this.btnBackup = ((Button) findViewById(R.id.btnBackup));\r\n        this.btnRestore = ((Button) findViewById(R.id.btnRestore));\r\n        TextView localTextView1 = (TextView) findViewById(R.id.tvSMS);\r\n        this.tvLastBackup = ((TextView) findViewById(R.id.tvLastBackup));\r\n\r\n        btnBackup.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n                // TODO Auto-generated method stub\r\n                if (getSMSCount() &gt; 0) {\r\n                    SmsBackupActivity.this.BackupAlert();\r\n                } else {\r\n                    Toast.makeText(getApplicationContext(), &quot;SMS not found&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n        });\r\n        btnRestore.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @SuppressLint(&quot;NewApi&quot;)\r\n            @Override\r\n            public void onClick(View v) {\r\n                // TODO Auto-generated method stub\r\n\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    RoleManager roleManager = (RoleManager) getSystemService(Context.ROLE_SERVICE);\r\n                    if (roleManager != null &amp;&amp; !roleManager.isRoleHeld(ROLE_SMS)) {\r\n                        SmsReceiver.enable(SmsBackupActivity.this);\r\n                        Intent intent = roleManager.createRequestRoleIntent(ROLE_SMS);\r\n                        startActivityForResult(intent, DEF_SMS_REQ);\r\n                    }\r\n                    else {\r\n                        SmsBackupActivity.this.restoreBackupFilesDialog(true);\r\n                    }\r\n                } else {\r\n                    if (!Telephony.Sms.getDefaultSmsPackage(getApplicationContext()).equals(getPackageName()))\r\n                    {\r\n                        Intent intent = new Intent(Telephony.Sms.Intents.ACTION_CHANGE_DEFAULT);\r\n                        intent.putExtra(Telephony.Sms.Intents.EXTRA_PACKAGE_NAME,getPackageName());\r\n                        startActivityForResult(intent, DEF_SMS_REQ);\r\n                    }\r\n                    else\r\n                    {\r\n                        SmsBackupActivity.this.restoreBackupFilesDialog(true);\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        localTextView1.setText(Html.fromHtml(&quot;&lt;font color=&#39;#FFFFFF&#39;&gt;SMS:&lt;/font&gt;&quot; + getSMSCount()));\r\n        this.tvLastBackup.setText(Html.fromHtml(&quot;&lt;font color=&#39;#FFFFFF&#39;&gt;&quot; + getString(R.string.last_backup) + &quot;:&lt;/font&gt;&quot; + getBackupDate(&quot;smsBackupDate&quot;)));\r\n    }\r\n\r\n    public void okDialog() {\r\n        AlertDialog localAlertDialog = new AlertDialog.Builder(this).create();\r\n\r\n        localAlertDialog.setMessage(getString(R.string.deleted_successfully_));\r\n        localAlertDialog.setButton(&quot;ok&quot;, new OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\r\n            }\r\n        });\r\n        localAlertDialog.show();\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle paramBundle) {\r\n        super.onCreate(paramBundle);\r\n        setContentView(R.layout.layout_sms_backupt);\r\n        SmsBackupActivity.context = getApplicationContext();\r\n        initAllViews();\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        switch (requestCode) {\r\n            case DEF_SMS_REQ:\r\n                if (Build.VERSION.SDK_INT == Build.VERSION_CODES.KITKAT &amp;&amp; isDefaultSmsApp(this) ||\r\n                        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.BASE &amp;&amp; resultCode == Activity.RESULT_OK) {\r\n                    SmsBackupActivity.this.restoreBackupFilesDialog(true);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    @TargetApi(Build.VERSION_CODES.KITKAT)\r\n    public static boolean isDefaultSmsApp(Context context) {\r\n        return context.getPackageName().equals(getDefaultSmsPackage(context));\r\n    }\r\n\r\n    public void openInbox() {\r\n        try {\r\n            Intent localIntent = new Intent(&quot;android.intent.action.MAIN&quot;);\r\n            localIntent.addCategory(&quot;android.intent.category.LAUNCHER&quot;);\r\n            Iterator localIterator = getPackageManager().queryIntentActivities(localIntent, 0).iterator();\r\n            while (localIterator.hasNext()) {\r\n                ResolveInfo localResolveInfo = (ResolveInfo) localIterator.next();\r\n                if (localResolveInfo.activityInfo.packageName.equalsIgnoreCase(&quot;com.android.mms&quot;))\r\n                    launchComponent(localResolveInfo.activityInfo.packageName, localResolveInfo.activityInfo.name);\r\n            }\r\n        } catch (ActivityNotFoundException localActivityNotFoundException) {\r\n        }\r\n    }\r\n\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n    public void restoreBackup(HashMap&lt;String, String&gt; paramHashMap) {\r\n        ContentValues localContentValues = new ContentValues();\r\n        localContentValues.put(&quot;address&quot;, paramHashMap.get(&quot;address&quot;));\r\n        localContentValues.put(&quot;person&quot;, paramHashMap.get(&quot;person&quot;));\r\n        localContentValues.put(&quot;date&quot;, paramHashMap.get(&quot;date&quot;));\r\n        localContentValues.put(&quot;body&quot;, paramHashMap.get(&quot;body&quot;));\r\n        localContentValues.put(&quot;_id&quot;, paramHashMap.get(&quot;id&quot;));\r\n        localContentValues.put(&quot;type&quot;, paramHashMap.get(&quot;type&quot;));\r\n        localContentValues.put(&quot;read&quot;, paramHashMap.get(&quot;read&quot;));\r\n\r\n        try {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.BASE) {\r\n                getContentResolver().insert(Telephony.Sms.CONTENT_URI, localContentValues);\r\n            } else {\r\n                getContentResolver().insert(Uri.parse(&quot;content://sms/&quot;), localContentValues);\r\n            }\r\n        }catch (Exception e){\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public void restoreBackupFilesDialog(final boolean paramBoolean) {\r\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\r\n        localBuilder.setTitle(R.string.backup_files);\r\n        ListView localListView = new ListView(this);\r\n        final List localList = getSMSFiles();\r\n        localListView.setAdapter(new FileAdapter(this, R.layout.item_row_file, localList));\r\n        localListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; paramAnonymousAdapterView, View paramAnonymousView, int paramAnonymousInt, long paramAnonymousLong) {\r\n                SmsBackupActivity.this.dismiss.dismiss();\r\n                if (paramBoolean) {\r\n                    String str = getExternalFilesDir(null) + File.separator + &quot;sms&quot; + File.separator + ((FileGetterSetters) localList.get(paramAnonymousInt)).getFileName();\r\n                    Log.d(&quot;Seleted file path is&quot;, str);\r\n                    RestoringTask localRestoringTask = new RestoringTask(SmsBackupActivity.this);\r\n                    String[] arrayOfString = new String[1];\r\n                    arrayOfString[0] = str;\r\n                    localRestoringTask.execute(arrayOfString);\r\n                }\r\n            }\r\n        });\r\n        localBuilder.setView(localListView);\r\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\r\n        AlertDialog localAlertDialog = localBuilder.create();\r\n        localAlertDialog.getWindow().getAttributes().alpha = 0.6F;\r\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.FileDialogAnimation;\r\n        this.dismiss = localAlertDialog;\r\n        localAlertDialog.show();\r\n    }\r\n\r\n\r\n    public void setBackupDate() {\r\n        CharSequence localCharSequence = DateFormat.format(&quot;yy/MM/dd hh:mm:ss&quot;, new Date().getTime());\r\n        this.tvLastBackup.setText(Html.fromHtml(&quot;&lt;font color=&#39;#FFFFFF&#39;&gt;&quot; + getString(R.string.last_backup) + &quot;:&lt;/font&gt;&quot; + localCharSequence.toString()));\r\n        setLastBackupDate(&quot;smsBackupDate&quot;, localCharSequence.toString());\r\n    }\r\n\r\n\r\n    public void setLastBackupDate(String paramString1, String paramString2) {\r\n        SharedPreferences.Editor localEditor = getSharedPreferences(&quot;BackupPrefs&quot;, 0).edit();\r\n        localEditor.putString(paramString1, paramString2);\r\n        localEditor.commit();\r\n    }\r\n\r\n    public void setProgressDialog() {\r\n        this.pDialog = new ProgressDialog(this);\r\n        this.pDialog.setMessage(getString(R.string.backuping_files_please_wait_));\r\n        this.pDialog.setIndeterminate(false);\r\n        this.pDialog.setProgressDrawable(getResources().getDrawable(R.drawable.greenprogress));\r\n        this.pDialog.setMax(100);\r\n        this.pDialog.setProgressStyle(1);\r\n        this.pDialog.setCancelable(true);\r\n        this.pDialog.show();\r\n    }\r\n\r\n\r\n    public void viewMessagesDialog() {\r\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\r\n\r\n        localBuilder.setMessage(getString(R.string.restore_completed_successfully_));\r\n        localBuilder.setPositiveButton(getString(R.string.view_messages), new OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\r\n                SmsBackupActivity.this.openInbox();\r\n            }\r\n        });\r\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\r\n        AlertDialog localAlertDialog = localBuilder.create();\r\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation;\r\n        localAlertDialog.show();\r\n    }\r\n\r\n    public class RestoringTask extends AsyncTask&lt;String, Integer, String&gt; {\r\n\r\n        ProgressDialog pd = new ProgressDialog(SmsBackupActivity.this);\r\n        Integer[] arrayOfInteger;\r\n\r\n        public RestoringTask(SmsBackupActivity smsBackupActivity) {\r\n        }\r\n\r\n        @Override\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        protected String doInBackground(String[] paramArrayOfString) {\r\n            String str = SmsBackupActivity.this.getXML(paramArrayOfString[0]);\r\n            XMLParser localXMLParser = new XMLParser();\r\n\r\n            NodeList localNodeList = localXMLParser.getDomElement(str).getElementsByTagName(&quot;sms&quot;);\r\n            int i = localNodeList.getLength();\r\n            for (int j = 0; ; j++) {\r\n                if (j &gt;= i)\r\n                    return &quot;&quot;;\r\n                @SuppressWarnings(&quot;rawtypes&quot;)\r\n                HashMap localHashMap = new HashMap();\r\n                Element localElement = (Element) localNodeList.item(j);\r\n                localHashMap.put(&quot;id&quot;, localXMLParser.getValue(localElement, &quot;id&quot;));\r\n                localHashMap.put(&quot;threadId&quot;, localXMLParser.getValue(localElement, &quot;threadId&quot;));\r\n                localHashMap.put(&quot;address&quot;, localXMLParser.getValue(localElement, &quot;address&quot;));\r\n                localHashMap.put(&quot;person&quot;, localXMLParser.getValue(localElement, &quot;person&quot;));\r\n                localHashMap.put(&quot;date&quot;, localXMLParser.getValue(localElement, &quot;date&quot;));\r\n                localHashMap.put(&quot;body&quot;, localXMLParser.getValue(localElement, &quot;body&quot;));\r\n                localHashMap.put(&quot;type&quot;, localXMLParser.getValue(localElement, &quot;type&quot;));\r\n                localHashMap.put(&quot;read&quot;, localXMLParser.getValue(localElement, &quot;read&quot;));\r\n\r\n                SmsBackupActivity.this.restoreBackup(localHashMap);\r\n                Integer[] arrayOfInteger = new Integer[2];\r\n                arrayOfInteger[0] = Integer.valueOf(i);\r\n                arrayOfInteger[1] = Integer.valueOf(j);\r\n                publishProgress(arrayOfInteger);\r\n            }\r\n\r\n        }\r\n\r\n        @Override\r\n        @SuppressLint(&quot;InlinedApi&quot;)\r\n        protected void onPostExecute(String paramString) {\r\n            super.onPostExecute(paramString);\r\n            ((TextView) SmsBackupActivity.this.findViewById(R.id.tvSMS)).setText(Html.fromHtml(&quot;&lt;font color=&#39;#FFFFFF&#39;&gt;SMS:&lt;/font&gt;&quot; + SmsBackupActivity.this.getSMSCount()));\r\n            this.pd.dismiss();\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n                Toast.makeText(getApplicationContext(), &quot;Restored successfully&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                SmsBackupActivity.this.viewMessagesDialog();\r\n            }\r\n\r\n        }\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            this.pd.setProgressStyle(1);\r\n            this.pd.setMessage(SmsBackupActivity.this.getString(R.string.restoring_backups_));\r\n            this.pd.setProgressDrawable(SmsBackupActivity.this.getResources().getDrawable(R.drawable.greenprogress));\r\n            this.pd.show();\r\n        }\r\n\r\n        @Override\r\n        protected void onProgressUpdate(Integer[] paramArrayOfInteger) {\r\n            this.pd.setMax(paramArrayOfInteger[0].intValue());\r\n            this.pd.setProgress(paramArrayOfInteger[1].intValue());\r\n            super.onProgressUpdate(paramArrayOfInteger);\r\n        }\r\n    }\r\n}\r\n ```\r\nAlso, in my MainActivity file, I&#39;ve taken Manifest.permission.READ_SMS permission.&lt;br&gt;\r\n**Update**: I deleted all the text messages from the phone and there is no similar id and the error Logcat is no longer shown but The bug still remains and SMS messages cannot be restored only on Xiaomi phones.","title":"SMS backups cannot be restored on Xiaomi phones android","body":"<p>I'm making one sms backup and restore android app.<br>\nUnfortunately, my app cannot restore text messages on Xiaomi phones, including Redmi 3s with android 6, Redmi Note 11 with android 12, But in other phones, it performs SMS backup and restore operations very well.<br>\nHow can I solve this bug?<br>\nJava codes:<br></p>\n<pre><code>public class SmsBackupActivity extends Activity {\n\n    private static final int DEF_SMS_REQ = 0;\n    Button btnBackup;\n    Button btnRestore;\n    AlertDialog dismiss;\n    SMSGettersSetters localSMSGettersSetters;\n    Cursor localCursor;\n    int i;\n    int j;\n    private static Context context;\n    ProgressDialog pDialog;\n    public List&lt;SMSGettersSetters&gt; smsBuffer = new ArrayList();\n    TextView tvLastBackup;\n    FileWriter write;\n    String[] xmlfile;\n    Uri localUri;\n\n    private void backupSMS() throws IOException {\n\n        this.smsBuffer.clear();\n        String str1 = getExternalFilesDir(null) + File.separator + &quot;sms&quot;;\n        this.write = new FileWriter(str1 + File.separator + this.xmlfile[0] + &quot;.xml&quot;);\n        localUri = Uri.parse(&quot;content://sms/&quot;);\n        ContentResolver localContentResolver = getContentResolver();\n        String[] arrayOfString1 = new String[8];\n        arrayOfString1[0] = &quot;_id&quot;;\n        arrayOfString1[1] = &quot;thread_id&quot;;\n        arrayOfString1[2] = &quot;address&quot;;\n        arrayOfString1[3] = &quot;person&quot;;\n        arrayOfString1[4] = &quot;date&quot;;\n        arrayOfString1[5] = &quot;body&quot;;\n        arrayOfString1[6] = &quot;type&quot;;\n        arrayOfString1[7] = &quot;read&quot;;\n        localCursor = localContentResolver.query(localUri, arrayOfString1, null, null, null);\n        String[] arrayOfString2 = new String[8];\n        arrayOfString2[0] = &quot;_id&quot;;\n        arrayOfString2[1] = &quot;thread_id&quot;;\n        arrayOfString2[2] = &quot;address&quot;;\n        arrayOfString2[3] = &quot;person&quot;;\n        arrayOfString2[4] = &quot;date&quot;;\n        arrayOfString2[5] = &quot;body&quot;;\n        arrayOfString2[6] = &quot;type&quot;;\n        arrayOfString2[7] = &quot;read&quot;;\n        localCursor.moveToFirst();\n        i = localCursor.getCount();\n        this.pDialog.setMax(i);\n        this.write.append(&quot;&lt;?xml version='1.0' encoding='UTF-8'?&gt;&quot;);\n        this.write.append('\\n');\n        this.write.append(&quot;&lt;smsall&gt;&quot;);\n        this.write.append('\\n');\n\n        while (true) {\n            localSMSGettersSetters = new SMSGettersSetters();\n            @SuppressLint(&quot;Range&quot;) String str2 = localCursor.getString(localCursor.getColumnIndex(&quot;_id&quot;));\n            @SuppressLint(&quot;Range&quot;) String str3 = localCursor.getString(localCursor.getColumnIndex(&quot;thread_id&quot;));\n            @SuppressLint(&quot;Range&quot;) String str4 = localCursor.getString(localCursor.getColumnIndex(&quot;address&quot;));\n            @SuppressLint(&quot;Range&quot;) String str5 = localCursor.getString(localCursor.getColumnIndex(&quot;person&quot;));\n            @SuppressLint(&quot;Range&quot;) String str6 = localCursor.getString(localCursor.getColumnIndex(&quot;date&quot;));\n            @SuppressLint(&quot;Range&quot;) String str7 = localCursor.getString(localCursor.getColumnIndex(&quot;body&quot;)).replaceAll(&quot;&amp;&quot;, &quot;&amp;amp;&quot;).replaceAll(&quot;&lt;&quot;, &quot;&amp;lt;&quot;).replaceAll(&quot;&gt;&quot;, &quot;&amp;gt;&quot;).replaceAll(&quot;\\&quot;&quot;, &quot;&amp;quot;&quot;).replaceAll(&quot;&gt;&quot;, &quot;&amp;apos;&quot;).replaceAll(&quot;'&quot;, &quot;&amp;frasl;&quot;);\n            @SuppressLint(&quot;Range&quot;) String str8 = localCursor.getString(localCursor.getColumnIndex(&quot;type&quot;));\n            @SuppressLint(&quot;Range&quot;) String str9 = localCursor.getString(localCursor.getColumnIndex(&quot;read&quot;));\n            localSMSGettersSetters.setId(str2);\n            localSMSGettersSetters.setThreadId(str3);\n            localSMSGettersSetters.setAddres(str4);\n            localSMSGettersSetters.setPerson(str5);\n            localSMSGettersSetters.setDate(str6);\n            localSMSGettersSetters.setBody(str7);\n            localSMSGettersSetters.setType(str8);\n            localSMSGettersSetters.setRead(str9);\n            localSMSGettersSetters.setSentDate(str1);\n            this.smsBuffer.add(localSMSGettersSetters);\n\n            Handler localHandler = new Handler(Looper.getMainLooper());\n            localHandler.post(new Runnable() {\n                @Override\n                public void run() {\n                    final int m = j;\n                    SmsBackupActivity.this.pDialog.setProgress(1 + m);\n                    i++;\n                    int v = -1 + i;\n\n                    if (m == v) {\n\n                        Log.d(&quot;dismiss&quot;, &quot;is called&quot;);\n                        SmsBackupActivity.this.pDialog.dismiss();\n                        SmsBackupActivity.this.setBackupDate();\n                    }\n                    i--;\n                    return;\n                }\n            });\n            generateXMLFileForSMS(localSMSGettersSetters);\n            localCursor.moveToNext();\n            j++;\n\n            if (j == i) {\n                this.write.append(&quot;&lt;/smsall&gt;&quot;);\n                this.write.flush();\n                this.write.close();\n                pDialog.dismiss();\n                return;\n            }\n        }\n    }\n\n    private void generateXMLFileForSMS(SMSGettersSetters paramSMSGettersSetters) {\n        try {\n            this.write.append(&quot;&lt;sms&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;id&gt;&quot; + paramSMSGettersSetters.getId() + &quot;&lt;/id&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;threadId&gt;&quot; + paramSMSGettersSetters.getThreadId() + &quot;&lt;/threadId&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;address&gt;&quot; + paramSMSGettersSetters.getAddress() + &quot;&lt;/address&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;person&gt;&quot; + paramSMSGettersSetters.getPerson() + &quot;&lt;/person&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;date&gt;&quot; + paramSMSGettersSetters.getDate() + &quot;&lt;/date&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;body&gt;&quot; + paramSMSGettersSetters.getBody() + &quot;&lt;/body&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;type&gt;&quot; + paramSMSGettersSetters.getType() + &quot;&lt;/type&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;read&gt;&quot; + paramSMSGettersSetters.getRead() + &quot;&lt;/read&gt;&quot;);\n            this.write.append('\\n');\n            this.write.append(&quot;&lt;/sms&gt;&quot;);\n            this.write.append('\\n');\n            return;\n        } catch (NullPointerException localNullPointerException) {\n            while (true)\n                System.out.println(&quot;Nullpointer Exception &quot; + localNullPointerException);\n        } catch (IOException localIOException) {\n            while (true)\n                localIOException.printStackTrace();\n        } catch (Exception localException) {\n            while (true)\n                localException.printStackTrace();\n        }\n    }\n\n    private void launchComponent(String paramString1, String paramString2) {\n        Intent localIntent = new Intent(&quot;android.intent.action.MAIN&quot;);\n        localIntent.addCategory(&quot;android.intent.category.LAUNCHER&quot;);\n        localIntent.setComponent(new ComponentName(paramString1, paramString2));\n        startActivity(localIntent);\n    }\n\n    public void BackupAlert() {\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\n        View localView = getLayoutInflater().inflate(R.layout.layout_backup_dialog, null);\n        final EditText localEditText = (EditText) localView.findViewById(R.id.etFileName);\n        CharSequence localCharSequence = DateFormat.format(&quot;yyMMddhhmmss&quot;, new Date().getTime());\n        localEditText.setText(&quot;sms_&quot; + localCharSequence + &quot;.xml&quot;);\n        localBuilder.setView(localView);\n        localBuilder.setPositiveButton(&quot;ok&quot;, new OnClickListener() {\n            @Override\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\n                SmsBackupActivity.this.xmlfile = localEditText.getText().toString().trim().split(&quot;.xml&quot;);\n                SmsBackupActivity.this.setProgressDialog();\n                new Thread(new Runnable() {\n                    @Override\n                    public void run() {\n                        try {\n                            Looper.prepare();\n                            SmsBackupActivity.this.backupSMS();\n                            Looper.loop();\n                        } catch (IOException e) {\n                            // TODO Auto-generated catch block\n                            e.printStackTrace();\n                        }\n                    }\n                }).start();\n            }\n        });\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\n        AlertDialog localAlertDialog = localBuilder.create();\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation;\n        localAlertDialog.show();\n    }\n\n\n    public String getBackupDate(String paramString) {\n        return getSharedPreferences(&quot;BackupPrefs&quot;, 0).getString(paramString, getString(R.string.never_backup));\n    }\n\n    public int getSMSCount() {\n        Cursor localCursor = getContentResolver().query(Uri.parse(&quot;content://sms/&quot;), null, null, null, null);\n        String[] arrayOfString = localCursor.getColumnNames();\n        for (int i = 0; ; i++) {\n            if (i &gt;= arrayOfString.length)\n                return localCursor.getCount();\n            Log.d(&quot;Names are&quot;, arrayOfString[i]);\n        }\n    }\n\n    public List&lt;FileGetterSetters&gt; getSMSFiles() {\n        ArrayList localArrayList = new ArrayList();\n        File[] arrayOfFile = new File(getExternalFilesDir(null) + File.separator + &quot;sms&quot;).listFiles();\n        int i = arrayOfFile.length;\n        for (int j = 0; ; j++) {\n            if (j &gt;= i)\n                return localArrayList;\n            File localFile = arrayOfFile[j];\n            FileGetterSetters localFileGetterSetters = new FileGetterSetters();\n            Log.d(&quot;file Name is&quot;, localFile.getName());\n            localFileGetterSetters.setFileName(localFile.getName());\n            Date localDate = new Date(localFile.lastModified());\n            Log.d(&quot;Modified date is&quot;, localDate.toString());\n            localFileGetterSetters.setDateCreated(localDate.toString());\n            localArrayList.add(localFileGetterSetters);\n        }\n    }\n\n    public String getXML(String paramString) {\n        Log.d(&quot;File path is&quot;, paramString);\n        File localFile = new File(paramString);\n        StringBuilder localStringBuilder = new StringBuilder();\n        try {\n            BufferedReader localBufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(localFile)));\n            while (true) {\n                String str = localBufferedReader.readLine();\n                if (str == null)\n                    return localStringBuilder.toString();\n                localStringBuilder.append(str);\n                localStringBuilder.append('\\n');\n            }\n        } catch (IOException localIOException) {\n\n        }\n        return paramString;\n    }\n\n    public void initAllViews() {\n        this.btnBackup = ((Button) findViewById(R.id.btnBackup));\n        this.btnRestore = ((Button) findViewById(R.id.btnRestore));\n        TextView localTextView1 = (TextView) findViewById(R.id.tvSMS);\n        this.tvLastBackup = ((TextView) findViewById(R.id.tvLastBackup));\n\n        btnBackup.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                // TODO Auto-generated method stub\n                if (getSMSCount() &gt; 0) {\n                    SmsBackupActivity.this.BackupAlert();\n                } else {\n                    Toast.makeText(getApplicationContext(), &quot;SMS not found&quot;, Toast.LENGTH_SHORT).show();\n                }\n\n            }\n        });\n        btnRestore.setOnClickListener(new View.OnClickListener() {\n\n            @SuppressLint(&quot;NewApi&quot;)\n            @Override\n            public void onClick(View v) {\n                // TODO Auto-generated method stub\n\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                    RoleManager roleManager = (RoleManager) getSystemService(Context.ROLE_SERVICE);\n                    if (roleManager != null &amp;&amp; !roleManager.isRoleHeld(ROLE_SMS)) {\n                        SmsReceiver.enable(SmsBackupActivity.this);\n                        Intent intent = roleManager.createRequestRoleIntent(ROLE_SMS);\n                        startActivityForResult(intent, DEF_SMS_REQ);\n                    }\n                    else {\n                        SmsBackupActivity.this.restoreBackupFilesDialog(true);\n                    }\n                } else {\n                    if (!Telephony.Sms.getDefaultSmsPackage(getApplicationContext()).equals(getPackageName()))\n                    {\n                        Intent intent = new Intent(Telephony.Sms.Intents.ACTION_CHANGE_DEFAULT);\n                        intent.putExtra(Telephony.Sms.Intents.EXTRA_PACKAGE_NAME,getPackageName());\n                        startActivityForResult(intent, DEF_SMS_REQ);\n                    }\n                    else\n                    {\n                        SmsBackupActivity.this.restoreBackupFilesDialog(true);\n                    }\n                }\n\n            }\n        });\n\n        localTextView1.setText(Html.fromHtml(&quot;&lt;font color='#FFFFFF'&gt;SMS:&lt;/font&gt;&quot; + getSMSCount()));\n        this.tvLastBackup.setText(Html.fromHtml(&quot;&lt;font color='#FFFFFF'&gt;&quot; + getString(R.string.last_backup) + &quot;:&lt;/font&gt;&quot; + getBackupDate(&quot;smsBackupDate&quot;)));\n    }\n\n    public void okDialog() {\n        AlertDialog localAlertDialog = new AlertDialog.Builder(this).create();\n\n        localAlertDialog.setMessage(getString(R.string.deleted_successfully_));\n        localAlertDialog.setButton(&quot;ok&quot;, new OnClickListener() {\n            @Override\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\n            }\n        });\n        localAlertDialog.show();\n    }\n\n    @Override\n    protected void onCreate(Bundle paramBundle) {\n        super.onCreate(paramBundle);\n        setContentView(R.layout.layout_sms_backupt);\n        SmsBackupActivity.context = getApplicationContext();\n        initAllViews();\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        switch (requestCode) {\n            case DEF_SMS_REQ:\n                if (Build.VERSION.SDK_INT == Build.VERSION_CODES.KITKAT &amp;&amp; isDefaultSmsApp(this) ||\n                        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.BASE &amp;&amp; resultCode == Activity.RESULT_OK) {\n                    SmsBackupActivity.this.restoreBackupFilesDialog(true);\n                }\n                break;\n        }\n    }\n\n    @TargetApi(Build.VERSION_CODES.KITKAT)\n    public static boolean isDefaultSmsApp(Context context) {\n        return context.getPackageName().equals(getDefaultSmsPackage(context));\n    }\n\n    public void openInbox() {\n        try {\n            Intent localIntent = new Intent(&quot;android.intent.action.MAIN&quot;);\n            localIntent.addCategory(&quot;android.intent.category.LAUNCHER&quot;);\n            Iterator localIterator = getPackageManager().queryIntentActivities(localIntent, 0).iterator();\n            while (localIterator.hasNext()) {\n                ResolveInfo localResolveInfo = (ResolveInfo) localIterator.next();\n                if (localResolveInfo.activityInfo.packageName.equalsIgnoreCase(&quot;com.android.mms&quot;))\n                    launchComponent(localResolveInfo.activityInfo.packageName, localResolveInfo.activityInfo.name);\n            }\n        } catch (ActivityNotFoundException localActivityNotFoundException) {\n        }\n    }\n\n    @SuppressLint(&quot;NewApi&quot;)\n    public void restoreBackup(HashMap&lt;String, String&gt; paramHashMap) {\n        ContentValues localContentValues = new ContentValues();\n        localContentValues.put(&quot;address&quot;, paramHashMap.get(&quot;address&quot;));\n        localContentValues.put(&quot;person&quot;, paramHashMap.get(&quot;person&quot;));\n        localContentValues.put(&quot;date&quot;, paramHashMap.get(&quot;date&quot;));\n        localContentValues.put(&quot;body&quot;, paramHashMap.get(&quot;body&quot;));\n        localContentValues.put(&quot;_id&quot;, paramHashMap.get(&quot;id&quot;));\n        localContentValues.put(&quot;type&quot;, paramHashMap.get(&quot;type&quot;));\n        localContentValues.put(&quot;read&quot;, paramHashMap.get(&quot;read&quot;));\n\n        try {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.BASE) {\n                getContentResolver().insert(Telephony.Sms.CONTENT_URI, localContentValues);\n            } else {\n                getContentResolver().insert(Uri.parse(&quot;content://sms/&quot;), localContentValues);\n            }\n        }catch (Exception e){\n\n        }\n\n    }\n\n    public void restoreBackupFilesDialog(final boolean paramBoolean) {\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\n        localBuilder.setTitle(R.string.backup_files);\n        ListView localListView = new ListView(this);\n        final List localList = getSMSFiles();\n        localListView.setAdapter(new FileAdapter(this, R.layout.item_row_file, localList));\n        localListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; paramAnonymousAdapterView, View paramAnonymousView, int paramAnonymousInt, long paramAnonymousLong) {\n                SmsBackupActivity.this.dismiss.dismiss();\n                if (paramBoolean) {\n                    String str = getExternalFilesDir(null) + File.separator + &quot;sms&quot; + File.separator + ((FileGetterSetters) localList.get(paramAnonymousInt)).getFileName();\n                    Log.d(&quot;Seleted file path is&quot;, str);\n                    RestoringTask localRestoringTask = new RestoringTask(SmsBackupActivity.this);\n                    String[] arrayOfString = new String[1];\n                    arrayOfString[0] = str;\n                    localRestoringTask.execute(arrayOfString);\n                }\n            }\n        });\n        localBuilder.setView(localListView);\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\n        AlertDialog localAlertDialog = localBuilder.create();\n        localAlertDialog.getWindow().getAttributes().alpha = 0.6F;\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.FileDialogAnimation;\n        this.dismiss = localAlertDialog;\n        localAlertDialog.show();\n    }\n\n\n    public void setBackupDate() {\n        CharSequence localCharSequence = DateFormat.format(&quot;yy/MM/dd hh:mm:ss&quot;, new Date().getTime());\n        this.tvLastBackup.setText(Html.fromHtml(&quot;&lt;font color='#FFFFFF'&gt;&quot; + getString(R.string.last_backup) + &quot;:&lt;/font&gt;&quot; + localCharSequence.toString()));\n        setLastBackupDate(&quot;smsBackupDate&quot;, localCharSequence.toString());\n    }\n\n\n    public void setLastBackupDate(String paramString1, String paramString2) {\n        SharedPreferences.Editor localEditor = getSharedPreferences(&quot;BackupPrefs&quot;, 0).edit();\n        localEditor.putString(paramString1, paramString2);\n        localEditor.commit();\n    }\n\n    public void setProgressDialog() {\n        this.pDialog = new ProgressDialog(this);\n        this.pDialog.setMessage(getString(R.string.backuping_files_please_wait_));\n        this.pDialog.setIndeterminate(false);\n        this.pDialog.setProgressDrawable(getResources().getDrawable(R.drawable.greenprogress));\n        this.pDialog.setMax(100);\n        this.pDialog.setProgressStyle(1);\n        this.pDialog.setCancelable(true);\n        this.pDialog.show();\n    }\n\n\n    public void viewMessagesDialog() {\n        AlertDialog.Builder localBuilder = new AlertDialog.Builder(this);\n\n        localBuilder.setMessage(getString(R.string.restore_completed_successfully_));\n        localBuilder.setPositiveButton(getString(R.string.view_messages), new OnClickListener() {\n            @Override\n            public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {\n                SmsBackupActivity.this.openInbox();\n            }\n        });\n        localBuilder.setNegativeButton(&quot;cancel&quot;, null);\n        AlertDialog localAlertDialog = localBuilder.create();\n        localAlertDialog.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation;\n        localAlertDialog.show();\n    }\n\n    public class RestoringTask extends AsyncTask&lt;String, Integer, String&gt; {\n\n        ProgressDialog pd = new ProgressDialog(SmsBackupActivity.this);\n        Integer[] arrayOfInteger;\n\n        public RestoringTask(SmsBackupActivity smsBackupActivity) {\n        }\n\n        @Override\n        @SuppressWarnings(&quot;unchecked&quot;)\n        protected String doInBackground(String[] paramArrayOfString) {\n            String str = SmsBackupActivity.this.getXML(paramArrayOfString[0]);\n            XMLParser localXMLParser = new XMLParser();\n\n            NodeList localNodeList = localXMLParser.getDomElement(str).getElementsByTagName(&quot;sms&quot;);\n            int i = localNodeList.getLength();\n            for (int j = 0; ; j++) {\n                if (j &gt;= i)\n                    return &quot;&quot;;\n                @SuppressWarnings(&quot;rawtypes&quot;)\n                HashMap localHashMap = new HashMap();\n                Element localElement = (Element) localNodeList.item(j);\n                localHashMap.put(&quot;id&quot;, localXMLParser.getValue(localElement, &quot;id&quot;));\n                localHashMap.put(&quot;threadId&quot;, localXMLParser.getValue(localElement, &quot;threadId&quot;));\n                localHashMap.put(&quot;address&quot;, localXMLParser.getValue(localElement, &quot;address&quot;));\n                localHashMap.put(&quot;person&quot;, localXMLParser.getValue(localElement, &quot;person&quot;));\n                localHashMap.put(&quot;date&quot;, localXMLParser.getValue(localElement, &quot;date&quot;));\n                localHashMap.put(&quot;body&quot;, localXMLParser.getValue(localElement, &quot;body&quot;));\n                localHashMap.put(&quot;type&quot;, localXMLParser.getValue(localElement, &quot;type&quot;));\n                localHashMap.put(&quot;read&quot;, localXMLParser.getValue(localElement, &quot;read&quot;));\n\n                SmsBackupActivity.this.restoreBackup(localHashMap);\n                Integer[] arrayOfInteger = new Integer[2];\n                arrayOfInteger[0] = Integer.valueOf(i);\n                arrayOfInteger[1] = Integer.valueOf(j);\n                publishProgress(arrayOfInteger);\n            }\n\n        }\n\n        @Override\n        @SuppressLint(&quot;InlinedApi&quot;)\n        protected void onPostExecute(String paramString) {\n            super.onPostExecute(paramString);\n            ((TextView) SmsBackupActivity.this.findViewById(R.id.tvSMS)).setText(Html.fromHtml(&quot;&lt;font color='#FFFFFF'&gt;SMS:&lt;/font&gt;&quot; + SmsBackupActivity.this.getSMSCount()));\n            this.pd.dismiss();\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n                Toast.makeText(getApplicationContext(), &quot;Restored successfully&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                SmsBackupActivity.this.viewMessagesDialog();\n            }\n\n        }\n\n        @Override\n        protected void onPreExecute() {\n            super.onPreExecute();\n            this.pd.setProgressStyle(1);\n            this.pd.setMessage(SmsBackupActivity.this.getString(R.string.restoring_backups_));\n            this.pd.setProgressDrawable(SmsBackupActivity.this.getResources().getDrawable(R.drawable.greenprogress));\n            this.pd.show();\n        }\n\n        @Override\n        protected void onProgressUpdate(Integer[] paramArrayOfInteger) {\n            this.pd.setMax(paramArrayOfInteger[0].intValue());\n            this.pd.setProgress(paramArrayOfInteger[1].intValue());\n            super.onProgressUpdate(paramArrayOfInteger);\n        }\n    }\n}\n</code></pre>\n<p>Also, in my MainActivity file, I've taken Manifest.permission.READ_SMS permission.<br>\n<strong>Update</strong>: I deleted all the text messages from the phone and there is no similar id and the error Logcat is no longer shown but The bug still remains and SMS messages cannot be restored only on Xiaomi phones.</p>\n"},{"tags":["java","sql","database","h2"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1415132750,"post_id":26743992,"comment_id":42074226,"body_markdown":"Funny how the first answer you get is exactly what I&#39;ve been saying...","body":"Funny how the first answer you get is exactly what I&#39;ve been saying..."},{"owner":{"account_id":3870202,"reputation":521,"user_id":3205654,"accept_rate":57,"display_name":"Ryan"},"score":2,"creation_date":1415137208,"post_id":26743992,"comment_id":42076437,"body_markdown":"Not exactly. None of your responses were very direct or helpful.","body":"Not exactly. None of your responses were very direct or helpful."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1415141195,"post_id":26743992,"comment_id":42078214,"body_markdown":"So &quot;use the server mode&quot; wasn&#39;t helpful...shame","body":"So &quot;use the server mode&quot; wasn&#39;t helpful...shame"},{"owner":{"account_id":3870202,"reputation":521,"user_id":3205654,"accept_rate":57,"display_name":"Ryan"},"score":0,"creation_date":1415144888,"post_id":26743992,"comment_id":42079468,"body_markdown":"Okay, I don&#39;t think using &quot;AUTO_SERVER=TRUE&quot; alone fixed the problem. Should that alone have fixed the problem? Right now, I have it set up to immediately commit and close the connection after a query is made, so the lock file is created and then deleted. Is this an efficient way to allow multiple users to access the database?","body":"Okay, I don&#39;t think using &quot;AUTO_SERVER=TRUE&quot; alone fixed the problem. Should that alone have fixed the problem? Right now, I have it set up to immediately commit and close the connection after a query is made, so the lock file is created and then deleted. Is this an efficient way to allow multiple users to access the database?"}],"answers":[{"tags":[],"owner":{"account_id":249090,"reputation":4307,"user_id":524900,"display_name":"Lolo"},"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1415132318,"creation_date":1415132318,"answer_id":26744250,"question_id":26743992,"body_markdown":"It looks like you are using H2 in embedded mode, which only allows one database connection at a time. See [connection modes][1] in the documentation for details.\r\n\r\nIf you need support for multiple connections, including from multiple application instances, then you need to start H2 in [server mode][2] instead and use the appropriate [connection URLs][3] for this mode.\r\n\r\n\r\n  [1]: http://www.h2database.com/html/features.html#connection_modes\r\n  [2]: http://www.h2database.com/html/tutorial.html#using_server\r\n  [3]: http://www.h2database.com/html/features.html#database_url","title":"How do I allow multiple users to connect to my H2 database simultaneously?","body":"<p>It looks like you are using H2 in embedded mode, which only allows one database connection at a time. See <a href=\"http://www.h2database.com/html/features.html#connection_modes\">connection modes</a> in the documentation for details.</p>\n\n<p>If you need support for multiple connections, including from multiple application instances, then you need to start H2 in <a href=\"http://www.h2database.com/html/tutorial.html#using_server\">server mode</a> instead and use the appropriate <a href=\"http://www.h2database.com/html/features.html#database_url\">connection URLs</a> for this mode.</p>\n"},{"tags":[],"owner":{"account_id":13118858,"reputation":6035,"user_id":9477038,"display_name":"Jackkobec"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1522498674,"creation_date":1522498674,"answer_id":49587637,"question_id":26743992,"body_markdown":"**AUTO_SERVER=TRUE** allows multiple connections mode.","title":"How do I allow multiple users to connect to my H2 database simultaneously?","body":"<p><strong>AUTO_SERVER=TRUE</strong> allows multiple connections mode.</p>\n"},{"tags":[],"owner":{"account_id":7993153,"reputation":23,"user_id":6030425,"display_name":"mairisb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694357558,"creation_date":1694356695,"answer_id":77076570,"question_id":26743992,"body_markdown":"The accepted answer is wrong. It is possible to have multiple connections without starting a separate H2 server manually by using [Automatic Mixed Mode][1]:\r\n\r\n&gt; Multiple processes can access the same database without having to start the server manually. To do that, append ;AUTO_SERVER=TRUE to the database URL. You can use the same database URL independent of whether the database is already open or not. This feature doesn&#39;t work with in-memory databases. \r\n\r\nSo, to allow multiple users to connect to an H2 database simultaneously, append `;AUTO_SERVER=true` data source URL property.\r\n\r\nThe only caveat is that you can&#39;t use this with the in-memory database. The next best thing (based on simplicity) is file-based database.\r\n\r\n---\r\n\r\n**Example for a spring app**\r\n\r\n`application.properties` to use a file-based database:\r\n\r\n```env\r\nspring.datasource.url=jdbc:h2:file:./data/testdb;AUTO_SERVER=TRUE\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=password\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.generate-ddl=true\r\n```\r\n\r\nWhen launching the app this will create a new database file as `./data/testdb.mv.db` or use it if it already exists.\r\n\r\nNow you can connect to this database from another source using the same url `h2:file:./data/testdb;AUTO_SERVER=TRUE`. It&#39;s important not to forget to append `;AUTO_SERVER=true` to the url when connecting from another source, otherwise you will get `The file is locked` exception.\r\n\r\n\r\n  [1]: http://www.h2database.com/html/features.html#auto_mixed_mode","title":"How do I allow multiple users to connect to my H2 database simultaneously?","body":"<p>The accepted answer is wrong. It is possible to have multiple connections without starting a separate H2 server manually by using <a href=\"http://www.h2database.com/html/features.html#auto_mixed_mode\" rel=\"nofollow noreferrer\">Automatic Mixed Mode</a>:</p>\n<blockquote>\n<p>Multiple processes can access the same database without having to start the server manually. To do that, append ;AUTO_SERVER=TRUE to the database URL. You can use the same database URL independent of whether the database is already open or not. This feature doesn't work with in-memory databases.</p>\n</blockquote>\n<p>So, to allow multiple users to connect to an H2 database simultaneously, append <code>;AUTO_SERVER=true</code> data source URL property.</p>\n<p>The only caveat is that you can't use this with the in-memory database. The next best thing (based on simplicity) is file-based database.</p>\n<hr />\n<p><strong>Example for a spring app</strong></p>\n<p><code>application.properties</code> to use a file-based database:</p>\n<pre><code>spring.datasource.url=jdbc:h2:file:./data/testdb;AUTO_SERVER=TRUE\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>When launching the app this will create a new database file as <code>./data/testdb.mv.db</code> or use it if it already exists.</p>\n<p>Now you can connect to this database from another source using the same url <code>h2:file:./data/testdb;AUTO_SERVER=TRUE</code>. It's important not to forget to append <code>;AUTO_SERVER=true</code> to the url when connecting from another source, otherwise you will get <code>The file is locked</code> exception.</p>\n"}],"owner":{"account_id":3870202,"reputation":521,"user_id":3205654,"accept_rate":57,"display_name":"Ryan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24819,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":26744250,"answer_count":3,"score":23,"last_activity_date":1694357558,"creation_date":1415131396,"question_id":26743992,"body_markdown":"I am using H2 for database management, and this is what I would like to do:\r\n\r\nI would like to allow multiple users to access a database at the same time. I&#39;ve read a bit about &quot;MULTI_THREADED=TRUE&quot;, &quot;LOCK_FILE=NO&quot;, and &quot;AUTO_SERVER=TRUE&quot;. I&#39;ve also read that &quot;LOCK_FILE=NO&quot; can be dangerous, because it can corrupt the database. I definitely would not want this, so I&#39;m assuming that is a bad way to go. I&#39;ve also tried to close the connection immediately after a record is accessed, whether it is being read from or written to. So far, nothing seems to work. The application is not allowing me to read from or write to the database if the database has been connected to in a separate instance of the application (ex: on another computer). Once I completely close the application on one computer, I am able to access the database records.\r\n\r\nHow do I allow multiple users to connect to the H2 database at the same time without compromising the safety of the database?","title":"How do I allow multiple users to connect to my H2 database simultaneously?","body":"<p>I am using H2 for database management, and this is what I would like to do:</p>\n\n<p>I would like to allow multiple users to access a database at the same time. I've read a bit about \"MULTI_THREADED=TRUE\", \"LOCK_FILE=NO\", and \"AUTO_SERVER=TRUE\". I've also read that \"LOCK_FILE=NO\" can be dangerous, because it can corrupt the database. I definitely would not want this, so I'm assuming that is a bad way to go. I've also tried to close the connection immediately after a record is accessed, whether it is being read from or written to. So far, nothing seems to work. The application is not allowing me to read from or write to the database if the database has been connected to in a separate instance of the application (ex: on another computer). Once I completely close the application on one computer, I am able to access the database records.</p>\n\n<p>How do I allow multiple users to connect to the H2 database at the same time without compromising the safety of the database?</p>\n"},{"tags":["java","reflections"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1694255650,"post_id":77071815,"comment_id":135869417,"body_markdown":"How did you try `isAssignableFrom`? It [should be the way to go](https://www.tutorialspoint.com/java/lang/class_isassignablefrom.htm).","body":"How did you try <code>isAssignableFrom</code>? It <a href=\"https://www.tutorialspoint.com/java/lang/class_isassignablefrom.htm\" rel=\"nofollow noreferrer\">should be the way to go</a>."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":3,"creation_date":1694255818,"post_id":77071815,"comment_id":135869436,"body_markdown":"@daniu are you sure that [`Class::isAssignableFrom` (`docs.oracle.com`)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)) should work? IIRC, `isAssignableFrom(...)` checks the object hierarchy. Since the class in question does not `implements` the interface, I think this would not work.","body":"@daniu are you sure that <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>Class::isAssignableFrom</code> (<code>docs.oracle.com</code>)</a> should work? IIRC, <code>isAssignableFrom(...)</code> checks the object hierarchy. Since the class in question does not <code>implements</code> the interface, I think this would not work."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1694256122,"post_id":77071815,"comment_id":135869468,"body_markdown":"Clarify compatible, the way you think it is, it isn&#39;t. Also you can use a Reflection API to look into a Class details. Or you searching for the library to do it for you?","body":"Clarify compatible, the way you think it is, it isn&#39;t. Also you can use a Reflection API to look into a Class details. Or you searching for the library to do it for you?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1694256157,"post_id":77071815,"comment_id":135869473,"body_markdown":"It is definitively possible to implement a check for this; the compiler does this check (otherwise it would not be able to find certain errors when we implement an interface). I wonder, however, what the end goal here is. We&#39;d need to either manipulate the bytecode of the (already compiled) class, or modify the (source code of the) class and recompile. This smells like an [XY problem (`xyproblem.info`)](https://xyproblem.info/). What are you actually trying to achieve?","body":"It is definitively possible to implement a check for this; the compiler does this check (otherwise it would not be able to find certain errors when we implement an interface). I wonder, however, what the end goal here is. We&#39;d need to either manipulate the bytecode of the (already compiled) class, or modify the (source code of the) class and recompile. This smells like an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem (<code>xyproblem.info</code>)</a>. What are you actually trying to achieve?"},{"owner":{"account_id":20470686,"reputation":21,"user_id":15021196,"display_name":"Oliver Wheatley"},"score":0,"creation_date":1694256545,"post_id":77071815,"comment_id":135869513,"body_markdown":"@Turing85 The end goal is to identify whether a class exactly matches an interface. So what I&#39;m building is a library that is being used to auto test code that students are tasked with writing. Students annotate their classes with a specific annotation which I then search for using reflections. I want to validate that the class they have written meets the criteria that was given to them in the task.","body":"@Turing85 The end goal is to identify whether a class exactly matches an interface. So what I&#39;m building is a library that is being used to auto test code that students are tasked with writing. Students annotate their classes with a specific annotation which I then search for using reflections. I want to validate that the class they have written meets the criteria that was given to them in the task."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694256765,"post_id":77071815,"comment_id":135869530,"body_markdown":"... Why not give them the interface and enforce that their code implements the interface?","body":"... Why not give them the interface and enforce that their code implements the interface?"},{"owner":{"account_id":20470686,"reputation":21,"user_id":15021196,"display_name":"Oliver Wheatley"},"score":0,"creation_date":1694256998,"post_id":77071815,"comment_id":135869564,"body_markdown":"@Turing85 Good question, so in this instance the students are not told what the correct return type is for a method, part of the task is to determine the most appropriate return type and giving them the interface would reveal this.","body":"@Turing85 Good question, so in this instance the students are not told what the correct return type is for a method, part of the task is to determine the most appropriate return type and giving them the interface would reveal this."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694257088,"post_id":77071815,"comment_id":135869578,"body_markdown":"Then an alternative idea would be to write some code that manipulates the source code to add the `implements SomeInterface` code fragment (from what I read, It should be fairly simple with a bash script, or an OpenRewrite recipe).","body":"Then an alternative idea would be to write some code that manipulates the source code to add the <code>implements SomeInterface</code> code fragment (from what I read, It should be fairly simple with a bash script, or an OpenRewrite recipe)."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1694257495,"post_id":77071815,"comment_id":135869619,"body_markdown":"Yet another idea is to let the Interface return `Object`. We can then test the runtime type of the returned value with `instanceof ...` or `.getClass().getCanonocalName()` or ... as part of the test procedure. Of course, we should then mention that the interface returns `Object` because part of the exercise is to determine the return type.","body":"Yet another idea is to let the Interface return <code>Object</code>. We can then test the runtime type of the returned value with <code>instanceof ...</code> or <code>.getClass().getCanonocalName()</code> or ... as part of the test procedure. Of course, we should then mention that the interface returns <code>Object</code> because part of the exercise is to determine the return type."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1694291667,"post_id":77071815,"comment_id":135872977,"body_markdown":"Voting to re-open. Closing for &quot;seeking recommendations for books, tools, software libraries&quot; is an over-reaction and a misinterpretation. This is actually a question about the intricacies of using reflection.","body":"Voting to re-open. Closing for &quot;seeking recommendations for books, tools, software libraries&quot; is an over-reaction and a misinterpretation. This is actually a question about the intricacies of using reflection."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694256271,"creation_date":1694256271,"answer_id":77071857,"question_id":77071815,"body_markdown":"There is no such concept of &quot;is capable of implementing&quot; an interface. A class either does (or does not) implement an interface. **However**, you can use *reflection* to dynamically call some method. It has caveats and limitations (of course). For example, it&#39;s usually slow. But here is a `doSomething` with &quot;duck-typing&quot;.\r\n\r\n\tpublic static final void doSomething(Object o) {\r\n\t\tif (o == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tClass&lt;?&gt; cls = o.getClass();\r\n\t\ttry {\r\n\t\t\tMethod m = cls.getMethod(&quot;doSomething&quot;, new Class&lt;?&gt;[] {});\r\n\t\t\tif (m != null) {\r\n\t\t\t\tm.invoke(o, new Object[] {});\r\n\t\t\t}\r\n\t\t} catch (final Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nNote the line `if (m != null)`, that does check if `doSomething` is available in the actual instance `o`. You could test for the presence of all necessary methods in the same manner.","title":"How to check if a class is capable of implementing an interface at runtime in Java (JDK 17)","body":"<p>There is no such concept of &quot;is capable of implementing&quot; an interface. A class either does (or does not) implement an interface. <strong>However</strong>, you can use <em>reflection</em> to dynamically call some method. It has caveats and limitations (of course). For example, it's usually slow. But here is a <code>doSomething</code> with &quot;duck-typing&quot;.</p>\n<pre><code>public static final void doSomething(Object o) {\n    if (o == null) {\n        return;\n    }\n    Class&lt;?&gt; cls = o.getClass();\n    try {\n        Method m = cls.getMethod(&quot;doSomething&quot;, new Class&lt;?&gt;[] {});\n        if (m != null) {\n            m.invoke(o, new Object[] {});\n        }\n    } catch (final Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Note the line <code>if (m != null)</code>, that does check if <code>doSomething</code> is available in the actual instance <code>o</code>. You could test for the presence of all necessary methods in the same manner.</p>\n"},{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694357125,"creation_date":1694357125,"answer_id":77076590,"question_id":77071815,"body_markdown":"### Problem statement\r\n\r\nOP [clarified in the comments][clarificationComment] that the goal is to build an evaluation system for exercises given to students, I see some approaches that do not require reflection.\r\n\r\n### Approach 1: return `Object`\r\nWe can release the interface-definition to the students, but replace the return-type with `Object`. We can then check the runtime-type of the return value via `instanceof` or [`Class::isAssignableFrom` (`docs.oracle.com`)][classIsAssignableFromApi] (or really any other way we see fit).\r\n\r\n### Approach 2: Modify the source code to add `implements &lt;interface&gt;`\r\nThere are many way we could do this, e.g. a simple bash-script like\r\n\r\n    find \\\r\n      src/main/java \\\r\n      -type f \\\r\n      -name &quot;*.java&quot; \\\r\n      -exec \\\r\n        sed \\\r\n          -i \\\r\n          &#39;s/^\\(.*class\\s\\+Bar\\)\\s\\+{.*$/\\1 implements Foo {/g&#39; \\\r\n        {} \\;\r\n\r\nWe can then incorporate this script in a plethora of ways in our build-process. The downside of this approach is that it is OS-depndent.\r\n\r\nI would like to highlight another approach using [OpenRewrite (`docs.openrewrite.org`)][openRewriteHome], which is OS-independent. OpenRewrite allows us, among other things, to formulate simple rules for refactoring in a declarative way. In our example, we want to replace the string `class &lt;classname&gt;` with `class  &lt;classname&gt; implements &lt;interfacename&gt;`. If we assume the name of the interface to be `Foo` and the name of the class to be `Bar`, a OpenRewrite recipe may look like this:\r\n\r\n    type: specs.openrewrite.org/v1beta/recipe\r\n    name: de.turing85.AddFooInterfaceToBarClass\r\n    displayName: Add the Foo interface to the Bar class.\r\n    recipeList:\r\n      - org.openrewrite.text.FindAndReplace:\r\n          find: (?&lt;classdef&gt;class\\s+Bar)\\s+\\{\r\n          replace: ${classdef} implements Foo {\r\n          regex: true\r\n          filePattern: src/main/java/**/*.java\r\n\r\nSince OpenRewrite provides a [maven- (`docs.openrewrite.org`)][openRewriteMavenPlugin] and a [gradle-plugin (`docs.openrewrite.org`)][openRewriteGradlePlugin], we can simply incoroprate it in our build-process.\r\n\r\nA POC can be found in [this `github.com` repository][githubOpenRewriteExample].\r\n\r\n[clarificationComment]: https://stackoverflow.com/questions/77071815/how-to-check-if-a-class-is-capable-of-implementing-an-interface-at-runtime-in-ja#comment135869513_77071815\r\n\r\n[classIsAssignableFromApi]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)\r\n\r\n[openRewriteHome]: https://docs.openrewrite.org/\r\n\r\n[openRewriteMavenPlugin]: https://docs.openrewrite.org/reference/rewrite-maven-plugin\r\n\r\n[openRewriteGradlePlugin]: https://docs.openrewrite.org/reference/gradle-plugin-configuration\r\n\r\n[githubOpenRewriteExample]: https://github.com/turing85/openrewrite-example","title":"How to check if a class is capable of implementing an interface at runtime in Java (JDK 17)","body":"<h3>Problem statement</h3>\n<p>OP <a href=\"https://stackoverflow.com/questions/77071815/how-to-check-if-a-class-is-capable-of-implementing-an-interface-at-runtime-in-ja#comment135869513_77071815\">clarified in the comments</a> that the goal is to build an evaluation system for exercises given to students, I see some approaches that do not require reflection.</p>\n<h3>Approach 1: return <code>Object</code></h3>\n<p>We can release the interface-definition to the students, but replace the return-type with <code>Object</code>. We can then check the runtime-type of the return value via <code>instanceof</code> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>Class::isAssignableFrom</code> (<code>docs.oracle.com</code>)</a> (or really any other way we see fit).</p>\n<h3>Approach 2: Modify the source code to add <code>implements &lt;interface&gt;</code></h3>\n<p>There are many way we could do this, e.g. a simple bash-script like</p>\n<pre><code>find \\\n  src/main/java \\\n  -type f \\\n  -name &quot;*.java&quot; \\\n  -exec \\\n    sed \\\n      -i \\\n      's/^\\(.*class\\s\\+Bar\\)\\s\\+{.*$/\\1 implements Foo {/g' \\\n    {} \\;\n</code></pre>\n<p>We can then incorporate this script in a plethora of ways in our build-process. The downside of this approach is that it is OS-depndent.</p>\n<p>I would like to highlight another approach using <a href=\"https://docs.openrewrite.org/\" rel=\"nofollow noreferrer\">OpenRewrite (<code>docs.openrewrite.org</code>)</a>, which is OS-independent. OpenRewrite allows us, among other things, to formulate simple rules for refactoring in a declarative way. In our example, we want to replace the string <code>class &lt;classname&gt;</code> with <code>class  &lt;classname&gt; implements &lt;interfacename&gt;</code>. If we assume the name of the interface to be <code>Foo</code> and the name of the class to be <code>Bar</code>, a OpenRewrite recipe may look like this:</p>\n<pre><code>type: specs.openrewrite.org/v1beta/recipe\nname: de.turing85.AddFooInterfaceToBarClass\ndisplayName: Add the Foo interface to the Bar class.\nrecipeList:\n  - org.openrewrite.text.FindAndReplace:\n      find: (?&lt;classdef&gt;class\\s+Bar)\\s+\\{\n      replace: ${classdef} implements Foo {\n      regex: true\n      filePattern: src/main/java/**/*.java\n</code></pre>\n<p>Since OpenRewrite provides a <a href=\"https://docs.openrewrite.org/reference/rewrite-maven-plugin\" rel=\"nofollow noreferrer\">maven- (<code>docs.openrewrite.org</code>)</a> and a <a href=\"https://docs.openrewrite.org/reference/gradle-plugin-configuration\" rel=\"nofollow noreferrer\">gradle-plugin (<code>docs.openrewrite.org</code>)</a>, we can simply incoroprate it in our build-process.</p>\n<p>A POC can be found in <a href=\"https://github.com/turing85/openrewrite-example\" rel=\"nofollow noreferrer\">this <code>github.com</code> repository</a>.</p>\n"}],"owner":{"account_id":20470686,"reputation":21,"user_id":15021196,"display_name":"Oliver Wheatley"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":77071857,"answer_count":2,"score":-1,"last_activity_date":1694357125,"creation_date":1694255489,"question_id":77071815,"body_markdown":"I need to determine whether a class is capable of implementing an interface when it does not explicitly implement that interface. I would like to determine this at runtime, I am using reflections to gather classes.\r\n\r\nFor example:\r\n\r\nLets say I have the following class:\r\n\r\n```\r\npublic class Clazz {\r\n    public void doSomething() {\r\n        // ... do it\r\n    }\r\n}\r\n```\r\n\r\nAnd the following interface:\r\n\r\n```\r\npublic interface ClazzInterface {\r\n    public void doSomething();\r\n}\r\n```\r\n\r\nClazz does not implement ClazzInterface, however it is compatible with ClazzInterface and could implement it without any modification. I am looking for a way to check this at runtime.\r\n\r\nSomething like:\r\n\r\n```\r\nboolean canImplement = Clazz.class canImplement ClazzInterface.class\r\n```\r\n\r\nIs this possible either through a built in library or method or some logic I could write myself?\r\n\r\nI have tried using reflections `isAssignableFrom` and this does not work, returning `false` for the above example.","title":"How to check if a class is capable of implementing an interface at runtime in Java (JDK 17)","body":"<p>I need to determine whether a class is capable of implementing an interface when it does not explicitly implement that interface. I would like to determine this at runtime, I am using reflections to gather classes.</p>\n<p>For example:</p>\n<p>Lets say I have the following class:</p>\n<pre><code>public class Clazz {\n    public void doSomething() {\n        // ... do it\n    }\n}\n</code></pre>\n<p>And the following interface:</p>\n<pre><code>public interface ClazzInterface {\n    public void doSomething();\n}\n</code></pre>\n<p>Clazz does not implement ClazzInterface, however it is compatible with ClazzInterface and could implement it without any modification. I am looking for a way to check this at runtime.</p>\n<p>Something like:</p>\n<pre><code>boolean canImplement = Clazz.class canImplement ClazzInterface.class\n</code></pre>\n<p>Is this possible either through a built in library or method or some logic I could write myself?</p>\n<p>I have tried using reflections <code>isAssignableFrom</code> and this does not work, returning <code>false</code> for the above example.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1687983477,"post_id":76575976,"comment_id":135014684,"body_markdown":"using JWTs as session holders is a security risk, your application can easily be DDoSed as you are doing a database call for every request, your token can be stolen in the browser etc. Dont use JWTs as sessions https://developer.okta.com/blog/2017/08/17/why-jwts-suck-as-session-tokens","body":"using JWTs as session holders is a security risk, your application can easily be DDoSed as you are doing a database call for every request, your token can be stolen in the browser etc. Dont use JWTs as sessions <a href=\"https://developer.okta.com/blog/2017/08/17/why-jwts-suck-as-session-tokens\" rel=\"nofollow noreferrer\">developer.okta.com/blog/2017/08/17/&hellip;</a>"},{"owner":{"account_id":6704835,"reputation":31,"user_id":5170202,"display_name":"Bruno Paiva"},"score":0,"creation_date":1688290787,"post_id":76575976,"comment_id":135051969,"body_markdown":"Thanks for the callout, but this is just a research project, just study purposes","body":"Thanks for the callout, but this is just a research project, just study purposes"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1688291554,"post_id":76575976,"comment_id":135052053,"body_markdown":"so for that reason its okey to learn and study bad practices?","body":"so for that reason its okey to learn and study bad practices?"}],"owner":{"account_id":6704835,"reputation":31,"user_id":5170202,"display_name":"Bruno Paiva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":236,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694356445,"creation_date":1687978557,"question_id":76575976,"body_markdown":"I am using Spring Security with JWT authorization and recently I was trying to upgrade my Spring Security to the latest version (6.1.1), however for non-mapped API routes I&#39;m getting always 403 Forbidden instead of 404 Not Found, even when setting the Authorization token correctly. I created a JWTFilter that is always called during the Authentication flow. If authenticated successfully it sets the Authentication object inside the context (see code paste below).\r\n\r\nI activated TRACE logging and this is the logs when I try to call a path tha wasn&#39;t mapped in the SecurityConfig.\r\n\r\n```\r\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@4126cd58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ecd90ea, org.springframework.security.web.context.SecurityContextHolderFilter@e25af5a, org.springframework.security.web.header.HeaderWriterFilter@34734cf6, org.springframework.security.web.authentication.logout.LogoutFilter@5901af8b, org.greenhill.application.config.security.JwtTokenFilter@19098979, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6df7193b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57640814, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@bad144f, org.springframework.security.web.session.SessionManagementFilter@6921fa4d, org.springframework.security.web.access.ExceptionTranslationFilter@7a88c97f, org.springframework.security.web.access.intercept.AuthorizationFilter@7a98b997]] (1/1)\r\n2023-06-28T19:42:18.740+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /test\r\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/logout&#39;, GET], Ant [pattern=&#39;/logout&#39;, POST], Ant [pattern=&#39;/logout&#39;, PUT], Ant [pattern=&#39;/logout&#39;, DELETE]]\r\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JwtTokenFilter (6/12)\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.greenhill.auth.repository.entity.Worker@6586a89e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\r\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@61b920f6]\r\n2023-06-28T19:42:18.747+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@61b920f6] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@e8f8395\r\n2023-06-28T19:42:18.748+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /test\r\n2023-06-28T19:42:18.749+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n2023-06-28T19:42:18.752+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@4126cd58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ecd90ea, org.springframework.security.web.context.SecurityContextHolderFilter@e25af5a, org.springframework.security.web.header.HeaderWriterFilter@34734cf6, org.springframework.security.web.authentication.logout.LogoutFilter@5901af8b, org.greenhill.application.config.security.JwtTokenFilter@19098979, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6df7193b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57640814, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@bad144f, org.springframework.security.web.session.SessionManagementFilter@6921fa4d, org.springframework.security.web.access.ExceptionTranslationFilter@7a88c97f, org.springframework.security.web.access.intercept.AuthorizationFilter@7a98b997]] (1/1)\r\n2023-06-28T19:42:18.752+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /error\r\n2023-06-28T19:42:18.752+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/logout&#39;, GET], Ant [pattern=&#39;/logout&#39;, POST], Ant [pattern=&#39;/logout&#39;, PUT], Ant [pattern=&#39;/logout&#39;, DELETE]]\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JwtTokenFilter (6/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-06-28T19:42:18.754+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@1ef57c0b]]\r\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@1ef57c0b]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@e8f8395\r\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n2023-06-28T19:42:18.756+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:358) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-06-28T19:42:18.763+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n2023-06-28T19:42:22.075+01:00  INFO 6970 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-06-28T19:42:22.080+01:00  INFO 6970 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-06-28T19:42:22.095+01:00  INFO 6970 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n\r\nProcess finished with exit code 130 (interrupted by signal 2: SIGINT)\r\n```\r\n\r\nThis is my SecurityConfig class:\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableMethodSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    private final AuthRepository authRepository;\r\n    private final JwtTokenFilter jwtTokenFilter;\r\n\r\n    public SecurityConfiguration(AuthRepository authRepository, JwtTokenFilter jwtTokenFilter) {\r\n        this.authRepository = authRepository;\r\n        this.jwtTokenFilter = jwtTokenFilter;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain jwtFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(request -&gt; request.requestMatchers(&quot;/auth/**&quot;)\r\n                        .permitAll().anyRequest().authenticated())\r\n                .sessionManagement(manager -&gt; manager.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authenticationProvider(authenticationProvider())\r\n                .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        UserDetailsService userDetailsService = username -&gt; authRepository.findByEmail(username)\r\n                .orElseThrow(\r\n                        () -&gt; new UsernameNotFoundException(&quot;User &quot; + username + &quot; not found.&quot;));\r\n        authProvider.setUserDetailsService(userDetailsService);\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config)\r\n            throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is my JwtTokenFilter class\r\n\r\n\r\n```\r\n@Component\r\npublic class JwtTokenFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtTokenUtil jwtTokenUtil;\r\n\r\n\r\n    public JwtTokenFilter(JwtTokenUtil jwtTokenUtil) {\r\n        this.jwtTokenUtil = jwtTokenUtil;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n\r\n        if (!hasAuthorizationBearer(request)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        String token = getAccessToken(request);\r\n\r\n        if (!jwtTokenUtil.validateAccessToken(token)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        setAuthenticationContext(token, request);\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private boolean hasAuthorizationBearer(HttpServletRequest request) {\r\n        String header = request.getHeader(&quot;Authorization&quot;);\r\n        if (ObjectUtils.isEmpty(header) || !header.startsWith(&quot;Bearer&quot;)) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private String getAccessToken(HttpServletRequest request) {\r\n        String header = request.getHeader(&quot;Authorization&quot;);\r\n        String token = header.split(&quot; &quot;)[1].trim();\r\n        return token;\r\n    }\r\n\r\n    private void setAuthenticationContext(String token, HttpServletRequest request) {\r\n        UserDetails userDetails = getUserDetails(token);\r\n\r\n        UsernamePasswordAuthenticationToken\r\n                authentication = new UsernamePasswordAuthenticationToken(userDetails, null, null);\r\n\r\n        authentication.setDetails(\r\n                new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n    }\r\n\r\n    private UserDetails getUserDetails(String token) {\r\n        Worker worker = new Worker();\r\n        String[] jwtSubject = jwtTokenUtil.getSubject(token).split(&quot;,&quot;);\r\n\r\n        worker.setId(UUID.fromString(jwtSubject[0]));\r\n        worker.setEmail(jwtSubject[1]);\r\n\r\n        return worker;\r\n    }\r\n}\r\n```\r\n\r\nWhen I call `/auth/sign-in` or `/auth/sign-up` it works perfecly.\r\nDoes anyone know what could be the issue here?\r\n\r\nFrom the logs above, apparently Spring Security is executing the same FilterChain twice. On the first time It can authenticate successfully, but the second time it doesn&#39;t and then the `AnonymousAuthenticationFilter` throws the Access Denied\r\n\r\nI tried calling my API in a path that is not `/auth/sign-in` or `/auth/sign-up`, and instead of getting 404 I&#39;m always getting 403 forbidden.","title":"Spring Security 6.1 returning 403 for non mapped API routes","body":"<p>I am using Spring Security with JWT authorization and recently I was trying to upgrade my Spring Security to the latest version (6.1.1), however for non-mapped API routes I'm getting always 403 Forbidden instead of 404 Not Found, even when setting the Authorization token correctly. I created a JWTFilter that is always called during the Authentication flow. If authenticated successfully it sets the Authentication object inside the context (see code paste below).</p>\n<p>I activated TRACE logging and this is the logs when I try to call a path tha wasn't mapped in the SecurityConfig.</p>\n<pre><code>2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@4126cd58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ecd90ea, org.springframework.security.web.context.SecurityContextHolderFilter@e25af5a, org.springframework.security.web.header.HeaderWriterFilter@34734cf6, org.springframework.security.web.authentication.logout.LogoutFilter@5901af8b, org.greenhill.application.config.security.JwtTokenFilter@19098979, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6df7193b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57640814, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@bad144f, org.springframework.security.web.session.SessionManagementFilter@6921fa4d, org.springframework.security.web.access.ExceptionTranslationFilter@7a88c97f, org.springframework.security.web.access.intercept.AuthorizationFilter@7a98b997]] (1/1)\n2023-06-28T19:42:18.740+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /test\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-06-28T19:42:18.740+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]\n2023-06-28T19:42:18.741+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JwtTokenFilter (6/12)\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-06-28T19:42:18.743+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.greenhill.auth.repository.entity.Worker@6586a89e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-06-28T19:42:18.744+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@61b920f6]\n2023-06-28T19:42:18.747+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@61b920f6] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@e8f8395\n2023-06-28T19:42:18.748+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /test\n2023-06-28T19:42:18.749+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n2023-06-28T19:42:18.752+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@4126cd58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ecd90ea, org.springframework.security.web.context.SecurityContextHolderFilter@e25af5a, org.springframework.security.web.header.HeaderWriterFilter@34734cf6, org.springframework.security.web.authentication.logout.LogoutFilter@5901af8b, org.greenhill.application.config.security.JwtTokenFilter@19098979, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6df7193b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57640814, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@bad144f, org.springframework.security.web.session.SessionManagementFilter@6921fa4d, org.springframework.security.web.access.ExceptionTranslationFilter@7a88c97f, org.springframework.security.web.access.intercept.AuthorizationFilter@7a98b997]] (1/1)\n2023-06-28T19:42:18.752+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /error\n2023-06-28T19:42:18.752+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JwtTokenFilter (6/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-06-28T19:42:18.753+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-06-28T19:42:18.754+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@1ef57c0b]]\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@1ef57c0b]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@e8f8395\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-06-28T19:42:18.755+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-06-28T19:42:18.756+01:00 TRACE 6970 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.9.jar:6.0.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:358) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-06-28T19:42:18.763+01:00 DEBUG 6970 --- [nio-8080-exec-4] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n2023-06-28T19:42:22.075+01:00  INFO 6970 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-06-28T19:42:22.080+01:00  INFO 6970 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-06-28T19:42:22.095+01:00  INFO 6970 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n\nProcess finished with exit code 130 (interrupted by signal 2: SIGINT)\n</code></pre>\n<p>This is my SecurityConfig class:</p>\n<pre><code>@Configuration\n@EnableMethodSecurity\npublic class SecurityConfiguration {\n\n    private final AuthRepository authRepository;\n    private final JwtTokenFilter jwtTokenFilter;\n\n    public SecurityConfiguration(AuthRepository authRepository, JwtTokenFilter jwtTokenFilter) {\n        this.authRepository = authRepository;\n        this.jwtTokenFilter = jwtTokenFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain jwtFilterChain(HttpSecurity http) throws Exception {\n        http.csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(request -&gt; request.requestMatchers(&quot;/auth/**&quot;)\n                        .permitAll().anyRequest().authenticated())\n                .sessionManagement(manager -&gt; manager.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider())\n                .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        UserDetailsService userDetailsService = username -&gt; authRepository.findByEmail(username)\n                .orElseThrow(\n                        () -&gt; new UsernameNotFoundException(&quot;User &quot; + username + &quot; not found.&quot;));\n        authProvider.setUserDetailsService(userDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config)\n            throws Exception {\n        return config.getAuthenticationManager();\n    }\n}\n\n</code></pre>\n<p>This is my JwtTokenFilter class</p>\n<pre><code>@Component\npublic class JwtTokenFilter extends OncePerRequestFilter {\n\n    private final JwtTokenUtil jwtTokenUtil;\n\n\n    public JwtTokenFilter(JwtTokenUtil jwtTokenUtil) {\n        this.jwtTokenUtil = jwtTokenUtil;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        if (!hasAuthorizationBearer(request)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        String token = getAccessToken(request);\n\n        if (!jwtTokenUtil.validateAccessToken(token)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        setAuthenticationContext(token, request);\n        filterChain.doFilter(request, response);\n    }\n\n    private boolean hasAuthorizationBearer(HttpServletRequest request) {\n        String header = request.getHeader(&quot;Authorization&quot;);\n        if (ObjectUtils.isEmpty(header) || !header.startsWith(&quot;Bearer&quot;)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private String getAccessToken(HttpServletRequest request) {\n        String header = request.getHeader(&quot;Authorization&quot;);\n        String token = header.split(&quot; &quot;)[1].trim();\n        return token;\n    }\n\n    private void setAuthenticationContext(String token, HttpServletRequest request) {\n        UserDetails userDetails = getUserDetails(token);\n\n        UsernamePasswordAuthenticationToken\n                authentication = new UsernamePasswordAuthenticationToken(userDetails, null, null);\n\n        authentication.setDetails(\n                new WebAuthenticationDetailsSource().buildDetails(request));\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n    }\n\n    private UserDetails getUserDetails(String token) {\n        Worker worker = new Worker();\n        String[] jwtSubject = jwtTokenUtil.getSubject(token).split(&quot;,&quot;);\n\n        worker.setId(UUID.fromString(jwtSubject[0]));\n        worker.setEmail(jwtSubject[1]);\n\n        return worker;\n    }\n}\n</code></pre>\n<p>When I call <code>/auth/sign-in</code> or <code>/auth/sign-up</code> it works perfecly.\nDoes anyone know what could be the issue here?</p>\n<p>From the logs above, apparently Spring Security is executing the same FilterChain twice. On the first time It can authenticate successfully, but the second time it doesn't and then the <code>AnonymousAuthenticationFilter</code> throws the Access Denied</p>\n<p>I tried calling my API in a path that is not <code>/auth/sign-in</code> or <code>/auth/sign-up</code>, and instead of getting 404 I'm always getting 403 forbidden.</p>\n"},{"tags":["java","httpserver","fileserver"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1694352630,"post_id":77076313,"comment_id":135877235,"body_markdown":"Maybe it&#39;s me, but I would think that this question would benefit from more detail, more *real* code, and removal of the GitHub link. All pertinent information should be in the question itself, such as a [mre] code post, and not in a link.","body":"Maybe it&#39;s me, but I would think that this question would benefit from more detail, more <i>real</i> code, and removal of the GitHub link. All pertinent information should be in the question itself, such as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post, and not in a link."},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1694352989,"post_id":77076313,"comment_id":135877266,"body_markdown":"Oh, I thought I only use jdk classes. Did u see any legal issues?","body":"Oh, I thought I only use jdk classes. Did u see any legal issues?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1694353089,"post_id":77076313,"comment_id":135877276,"body_markdown":"What do you mean by &quot;legal issues&quot;? This site is a software Q&amp;A site and does not delve into legal issues, other than that intellectual property rights must be respected. That&#39;s it.","body":"What do you mean by &quot;legal issues&quot;? This site is a software Q&amp;A site and does not delve into legal issues, other than that intellectual property rights must be respected. That&#39;s it."},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1694353249,"post_id":77076313,"comment_id":135877286,"body_markdown":"To be safe I am removing github redirection.","body":"To be safe I am removing github redirection."}],"answers":[{"tags":[],"owner":{"account_id":27243397,"reputation":1316,"user_id":20769158,"display_name":"scrhartley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694356096,"creation_date":1694354386,"answer_id":77076425,"question_id":77076313,"body_markdown":"If you put an index file (index.html or index.htm) in the directory, then that will be served, rather than the directory contents.\r\n\r\nOne more thing: you probably want a / at the end of the context path (so &quot;/file/&quot;) as per the note in the [API](https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html#createContext(java.lang.String,com.sun.net.httpserver.HttpHandler)):\r\n&gt; The path should generally, but is not required to, end with &#39;/&#39;. If the path does not end with &#39;/&#39;, eg such as with &quot;/foo&quot; then this would match requests with a path of &quot;/foobar&quot; or &quot;/foo/bar&quot;.\r\n\r\nAlternatively:\r\n```java\r\nvar server = HttpServer.create(new InetSocketAddress(8080), 2);\r\nvar fileHandler = SimpleFileServer.createFileHandler(Path.of(&quot;d:\\file&quot;));\r\nserver.createContext(&quot;/file/&quot;, (exchange) -&gt; {\r\n    if (exchange.getHttpContext().getPath().equals(exchange.getRequestURI().getPath())) {\r\n        try (exchange) {\r\n            exchange.setAttribute(&quot;request-path&quot;, &quot;could not resolve request URI path&quot;);\r\n            exchange.sendResponseHeaders(404, 0);\r\n        }\r\n    } else {\r\n        fileHandler.handle(exchange);\r\n    }\r\n});\r\nserver.start();\r\n```","title":"Java SimpleFileServer disable directory listing","body":"<p>If you put an index file (index.html or index.htm) in the directory, then that will be served, rather than the directory contents.</p>\n<p>One more thing: you probably want a / at the end of the context path (so &quot;/file/&quot;) as per the note in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html#createContext(java.lang.String,com.sun.net.httpserver.HttpHandler)\" rel=\"nofollow noreferrer\">API</a>:</p>\n<blockquote>\n<p>The path should generally, but is not required to, end with '/'. If the path does not end with '/', eg such as with &quot;/foo&quot; then this would match requests with a path of &quot;/foobar&quot; or &quot;/foo/bar&quot;.</p>\n</blockquote>\n<p>Alternatively:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var server = HttpServer.create(new InetSocketAddress(8080), 2);\nvar fileHandler = SimpleFileServer.createFileHandler(Path.of(&quot;d:\\file&quot;));\nserver.createContext(&quot;/file/&quot;, (exchange) -&gt; {\n    if (exchange.getHttpContext().getPath().equals(exchange.getRequestURI().getPath())) {\n        try (exchange) {\n            exchange.setAttribute(&quot;request-path&quot;, &quot;could not resolve request URI path&quot;);\n            exchange.sendResponseHeaders(404, 0);\n        }\n    } else {\n        fileHandler.handle(exchange);\n    }\n});\nserver.start();\n</code></pre>\n"}],"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77076425,"answer_count":1,"score":0,"last_activity_date":1694356096,"creation_date":1694352528,"question_id":77076313,"body_markdown":"For a minimalistic SimpleFileServer pseudocode below, how to disable directory listing? \r\n~~~\r\nvar server = HttpsServer.create(new InetSocketAddress(port), 2)\r\nserver.createContext(&quot;/file&quot;, SimpleFileServer.createFileHandler(Path.of(&quot;d:\\file&quot;)));\r\nserver.start();\r\n~~~\r\n\r\n","title":"Java SimpleFileServer disable directory listing","body":"<p>For a minimalistic SimpleFileServer pseudocode below, how to disable directory listing?</p>\n<pre><code>var server = HttpsServer.create(new InetSocketAddress(port), 2)\nserver.createContext(&quot;/file&quot;, SimpleFileServer.createFileHandler(Path.of(&quot;d:\\file&quot;)));\nserver.start();\n</code></pre>\n"},{"tags":["java","casting","primitive-types","jshell"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1694354810,"post_id":77076404,"comment_id":135877430,"body_markdown":"Because of automatic promotion of your `byte` operands to type `int`, and the results of the `-` operations therefore being of type `int`.","body":"Because of automatic promotion of your <code>byte</code> operands to type <code>int</code>, and the results of the <code>-</code> operations therefore being of type <code>int</code>."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1694354890,"post_id":77076404,"comment_id":135877437,"body_markdown":"You need to read the 2nd duplink to understand why `byte val = 200 - 200;` is allowed.  (And it isn&#39;t a bug in jshell.  The JLS says it is valid.)","body":"You need to read the 2nd duplink to understand why <code>byte val = 200 - 200;</code> is allowed.  (And it isn&#39;t a bug in jshell.  The JLS says it is valid.)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1694361119,"post_id":77076404,"comment_id":135878131,"body_markdown":"The critical thing here is that your variable isn&#39;t `final`, thus its value is not considered a constant expression, even if you never change its value once assigned.","body":"The critical thing here is that your variable isn&#39;t <code>final</code>, thus its value is not considered a constant expression, even if you never change its value once assigned."}],"answers":[{"tags":[],"owner":{"account_id":2656033,"reputation":47,"user_id":2296720,"accept_rate":100,"display_name":"FreackH"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694354839,"creation_date":1694354839,"answer_id":77076450,"question_id":77076404,"body_markdown":"Java automatically promotes each `byte`, `short`, or `char` operand to `int` when evaluating an expression. Because the operands are automatically promoted to `int` when the expression is evaluated, the result also gets promoted to `int`. Thus, the result of the expression is now of type `int`, which cannot be assigned to a `byte` without the use of a cast.","title":"What are rules in casting primitive types in expressions in Java?","body":"<p>Java automatically promotes each <code>byte</code>, <code>short</code>, or <code>char</code> operand to <code>int</code> when evaluating an expression. Because the operands are automatically promoted to <code>int</code> when the expression is evaluated, the result also gets promoted to <code>int</code>. Thus, the result of the expression is now of type <code>int</code>, which cannot be assigned to a <code>byte</code> without the use of a cast.</p>\n"}],"owner":{"account_id":12471496,"reputation":59,"user_id":9079439,"display_name":"Argos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1694354681,"answer_count":1,"score":-2,"last_activity_date":1694355314,"creation_date":1694354026,"question_id":77076404,"body_markdown":"I&#39;m trying to figure out why some castings work and why others do not. Can you explain to me why some of these examples work and others don&#39;t?\r\n\r\n\r\n**Setup:**\r\n\r\nI&#39;m using jshell.\r\n\r\n    byte one = 1;\r\n    one ==&gt; 1\r\n**Example 1:**\r\n\r\n    jshell&gt; byte val = 200 - 200;\r\n    val ==&gt; 0\r\nAccording to my knowledge these literals are of type int, but code compiles because the result fits in the byte.\r\n\r\n\r\n**Example 2**\r\n\r\n    jshell&gt; byte val = 1 - one;\r\n    |  Error:\r\n    |  incompatible types: possible lossy conversion from int to byte\r\n    |  byte val = 1 - one;\r\n    |             ^-----^\r\nWhen I&#39;m switching one literal to a variable, code suddenly does not compile. Casting any or all of components of the espression doesn&#39;t fix the problem. \r\n\r\n**Example 3**\r\n```\r\njshell&gt; byte val = (byte)(1) - one;\r\n|  Error:\r\n|  incompatible types: possible lossy conversion from int to byte\r\n|  byte val = (byte)(1) - one;\r\n|     \r\n```\r\nI expected this to work. After all I did convert the integer in this expression to byte, so there shouldn&#39;t be &#39;incompatible types&#39; error.\r\n\r\n**Example 4**\r\n```\r\njshell&gt; byte val = 1 - (byte)(one);\r\n|  Error:\r\n|  incompatible types: possible lossy conversion from int to byte\r\n|  byte val = 1 - (byte)(one);\r\n|             ^-------------^\r\n```\r\nThis was more an experiment to see if this would fix the problem. I didn&#39;t expect this to work.\r\n\r\n**Example 5**\r\n\r\n```\r\njshell&gt; byte val = (byte)(1) - (byte)(one);\r\n|  Error:\r\n|  incompatible types: possible lossy conversion from int to byte\r\n|  byte val = (byte)(1) - (byte)(one);\r\n|             ^---------------------^\r\n```\r\nThis one confuses me so much. I&#39;m casting both components to byte, so why would there be an error? After all in Example 1 there was a similar operation and Java didn&#39;t complain at all. \r\n\r\n**Example 6**\r\n```\r\njshell&gt; byte val = (byte)(1 - one);\r\nval ==&gt; 0\r\n```\r\nIn the end only casting result of the expression doesn&#39;t produce an error. Why?\r\n","title":"What are rules in casting primitive types in expressions in Java?","body":"<p>I'm trying to figure out why some castings work and why others do not. Can you explain to me why some of these examples work and others don't?</p>\n<p><strong>Setup:</strong></p>\n<p>I'm using jshell.</p>\n<pre><code>byte one = 1;\none ==&gt; 1\n</code></pre>\n<p><strong>Example 1:</strong></p>\n<pre><code>jshell&gt; byte val = 200 - 200;\nval ==&gt; 0\n</code></pre>\n<p>According to my knowledge these literals are of type int, but code compiles because the result fits in the byte.</p>\n<p><strong>Example 2</strong></p>\n<pre><code>jshell&gt; byte val = 1 - one;\n|  Error:\n|  incompatible types: possible lossy conversion from int to byte\n|  byte val = 1 - one;\n|             ^-----^\n</code></pre>\n<p>When I'm switching one literal to a variable, code suddenly does not compile. Casting any or all of components of the espression doesn't fix the problem.</p>\n<p><strong>Example 3</strong></p>\n<pre><code>jshell&gt; byte val = (byte)(1) - one;\n|  Error:\n|  incompatible types: possible lossy conversion from int to byte\n|  byte val = (byte)(1) - one;\n|     \n</code></pre>\n<p>I expected this to work. After all I did convert the integer in this expression to byte, so there shouldn't be 'incompatible types' error.</p>\n<p><strong>Example 4</strong></p>\n<pre><code>jshell&gt; byte val = 1 - (byte)(one);\n|  Error:\n|  incompatible types: possible lossy conversion from int to byte\n|  byte val = 1 - (byte)(one);\n|             ^-------------^\n</code></pre>\n<p>This was more an experiment to see if this would fix the problem. I didn't expect this to work.</p>\n<p><strong>Example 5</strong></p>\n<pre><code>jshell&gt; byte val = (byte)(1) - (byte)(one);\n|  Error:\n|  incompatible types: possible lossy conversion from int to byte\n|  byte val = (byte)(1) - (byte)(one);\n|             ^---------------------^\n</code></pre>\n<p>This one confuses me so much. I'm casting both components to byte, so why would there be an error? After all in Example 1 there was a similar operation and Java didn't complain at all.</p>\n<p><strong>Example 6</strong></p>\n<pre><code>jshell&gt; byte val = (byte)(1 - one);\nval ==&gt; 0\n</code></pre>\n<p>In the end only casting result of the expression doesn't produce an error. Why?</p>\n"},{"tags":["java","spring","jpa","javabeans","autowired"],"comments":[{"owner":{"account_id":15539213,"reputation":346,"user_id":11210547,"display_name":"P&#233;ter Bar&#225;th"},"score":0,"creation_date":1673437442,"post_id":64813071,"comment_id":132497821,"body_markdown":"Does the courseDAO derive from an interface?","body":"Does the courseDAO derive from an interface?"}],"answers":[{"tags":[],"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694355053,"creation_date":1694326996,"answer_id":77075014,"question_id":64813071,"body_markdown":"If you do name your bean `entityManagerFactory` it might break other beans that depend on the type of it to be Hibernate `EntityManagerFactory`. Rename it to for example `localContainerEntityManagerFactory`.","title":"Bean is expected to be of type &#39;CourseDAO&#39; but was actually of type &#39;com.sun.proxy.$Proxy49&#39;","body":"<p>If you do name your bean <code>entityManagerFactory</code> it might break other beans that depend on the type of it to be Hibernate <code>EntityManagerFactory</code>. Rename it to for example <code>localContainerEntityManagerFactory</code>.</p>\n"}],"owner":{"account_id":6678616,"reputation":528,"user_id":5152519,"accept_rate":100,"display_name":"Danny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1359,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694355053,"creation_date":1605221826,"question_id":64813071,"body_markdown":"In a training Spring MVC + JPA/Hibernate project, I&#39;m getting the error in question, after I&#39;ve changed my configuration.\r\n\r\nOriginally the DAO class was like this:\r\n\r\n```\r\npublic Course getById(Integer id) throws DAOException {\r\n        Course result = null;\r\n        try {\r\n            EntityManager em = emf.getFactory().createEntityManager();\r\n            result = em.find(Course.class, id);\r\n        } catch (Exception e) {\r\n            logger.error(e.getMessage(), e);\r\n            throw new DAOException(&quot;Could not get Course By Id&quot;, e);\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\nI was told to spawn *EntityManager* with `@PersistenceContext`, and avoid creating new EntityManager every now and then. So I replaced the above `EntityManager em = ...` line with a `@Autowired EntityManager em;` field, and changed the JpaConfig class, so it looks like:\r\n\r\n```\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;com.example.school&quot;)\r\n@PropertySource(&quot;classpath:database.properties&quot;)\r\n@EnableTransactionManagement\r\npublic class JpaConfig {\r\n    private final Environment environment;\r\n\r\n    @Autowired\r\n    public JpaConfig(Environment environment) {\r\n        this.environment = environment;\r\n    }\r\n\r\n    @Autowired\r\n    DataSource dataSource;\r\n    \r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() throws NamingException {\r\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n        em.setDataSource(dataSource);\r\n        em.setPackagesToScan(&quot;com.example.school&quot;);\r\n        JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        em.setJpaVendorAdapter(vendorAdapter);\r\n        return em;\r\n    }\r\n\r\n    @Bean\r\n    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) {\r\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n        transactionManager.setEntityManagerFactory(emf);\r\n        return transactionManager;\r\n    }\r\n\r\n    @Bean\r\n    public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {\r\n        return new PersistenceExceptionTranslationPostProcessor();\r\n    }\r\n}\r\n```\r\n\r\nWhile previously the configuration file was that simple:\r\n\r\n```\r\n@Configuration\r\npublic class EntityManagerConfig {\r\n    EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;PU&quot;);\r\n\r\n    @Bean\r\n    EntityManager em() {\r\n        return emf.createEntityManager();\r\n    }\r\n}\r\n```\r\n\r\nNow I get a stacktrace with the following most important problem in it:\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException ...\r\n\r\n...\r\n\r\nCaused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named &#39;courseDAO&#39; is expected to be of type &#39;com.example.school.dao.CourseDAO&#39; but was actually of type &#39;com.sun.proxy.$Proxy49&#39;\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1317)\r\n\r\nWhat can be wrong about this configuration?","title":"Bean is expected to be of type &#39;CourseDAO&#39; but was actually of type &#39;com.sun.proxy.$Proxy49&#39;","body":"<p>In a training Spring MVC + JPA/Hibernate project, I'm getting the error in question, after I've changed my configuration.</p>\n<p>Originally the DAO class was like this:</p>\n<pre><code>public Course getById(Integer id) throws DAOException {\n        Course result = null;\n        try {\n            EntityManager em = emf.getFactory().createEntityManager();\n            result = em.find(Course.class, id);\n        } catch (Exception e) {\n            logger.error(e.getMessage(), e);\n            throw new DAOException(&quot;Could not get Course By Id&quot;, e);\n        }\n        return result;\n    }\n</code></pre>\n<p>I was told to spawn <em>EntityManager</em> with <code>@PersistenceContext</code>, and avoid creating new EntityManager every now and then. So I replaced the above <code>EntityManager em = ...</code> line with a <code>@Autowired EntityManager em;</code> field, and changed the JpaConfig class, so it looks like:</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;com.example.school&quot;)\n@PropertySource(&quot;classpath:database.properties&quot;)\n@EnableTransactionManagement\npublic class JpaConfig {\n    private final Environment environment;\n\n    @Autowired\n    public JpaConfig(Environment environment) {\n        this.environment = environment;\n    }\n\n    @Autowired\n    DataSource dataSource;\n    \n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() throws NamingException {\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n        em.setDataSource(dataSource);\n        em.setPackagesToScan(&quot;com.example.school&quot;);\n        JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        em.setJpaVendorAdapter(vendorAdapter);\n        return em;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(emf);\n        return transactionManager;\n    }\n\n    @Bean\n    public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {\n        return new PersistenceExceptionTranslationPostProcessor();\n    }\n}\n</code></pre>\n<p>While previously the configuration file was that simple:</p>\n<pre><code>@Configuration\npublic class EntityManagerConfig {\n    EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;PU&quot;);\n\n    @Bean\n    EntityManager em() {\n        return emf.createEntityManager();\n    }\n}\n</code></pre>\n<p>Now I get a stacktrace with the following most important problem in it:</p>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException ...</p>\n<p>...</p>\n<p>Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'courseDAO' is expected to be of type 'com.example.school.dao.CourseDAO' but was actually of type 'com.sun.proxy.$Proxy49'\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1317)</p>\n<p>What can be wrong about this configuration?</p>\n"},{"tags":["java","spring","spring-mvc","session","spring-security"],"answers":[{"tags":[],"owner":{"account_id":3948767,"reputation":761,"user_id":4568220,"accept_rate":44,"display_name":"raju vaishnav"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1461392723,"creation_date":1461392723,"answer_id":36807445,"question_id":36795678,"body_markdown":"I was able to solve above issue by adding below config in web.xml only. any better way will be accepted.\r\n\r\n\r\n     &lt;session-config&gt;\r\n        &lt;session-timeout&gt;20&lt;/session-timeout&gt;\r\n    &lt;/session-config&gt;","title":"How to enable session and set session timeout in Spring Security","body":"<p>I was able to solve above issue by adding below config in web.xml only. any better way will be accepted.</p>\n\n<pre><code> &lt;session-config&gt;\n    &lt;session-timeout&gt;20&lt;/session-timeout&gt;\n&lt;/session-config&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3925872,"reputation":522,"user_id":3246375,"accept_rate":43,"display_name":"munilvc"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1509633451,"creation_date":1463173764,"answer_id":37219356,"question_id":36795678,"body_markdown":"If you are using [JavaConfig][1] and do not want to use XML you can create a `HttpSessionListener` and use `getSession().setMaxInactiveInterval()`, then in the `Initializer` add the listener in `onStartup()`:\r\n\r\n    public class SessionListener implements HttpSessionListener {\r\n    \r\n        @Override\r\n        public void sessionCreated(HttpSessionEvent event) {\r\n            System.out.println(&quot;session created&quot;);\r\n            event.getSession().setMaxInactiveInterval(15);\r\n        }\r\n    \r\n        @Override\r\n        public void sessionDestroyed(HttpSessionEvent event) {\r\n           System.out.println(&quot;session destroyed&quot;);\r\n        }\r\n    }\r\n\r\nThen in the Initializer:\r\n\r\n    @Override\r\n    public void onStartup(ServletContext servletContext) throws ServletException {\r\n        super.onStartup(servletContext);\r\n        servletContext.addListener(new SessionListener());\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/","title":"How to enable session and set session timeout in Spring Security","body":"<p>If you are using <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/\" rel=\"noreferrer\">JavaConfig</a> and do not want to use XML you can create a <code>HttpSessionListener</code> and use <code>getSession().setMaxInactiveInterval()</code>, then in the <code>Initializer</code> add the listener in <code>onStartup()</code>:</p>\n\n<pre><code>public class SessionListener implements HttpSessionListener {\n\n    @Override\n    public void sessionCreated(HttpSessionEvent event) {\n        System.out.println(\"session created\");\n        event.getSession().setMaxInactiveInterval(15);\n    }\n\n    @Override\n    public void sessionDestroyed(HttpSessionEvent event) {\n       System.out.println(\"session destroyed\");\n    }\n}\n</code></pre>\n\n<p>Then in the Initializer:</p>\n\n<pre><code>@Override\npublic void onStartup(ServletContext servletContext) throws ServletException {\n    super.onStartup(servletContext);\n    servletContext.addListener(new SessionListener());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74193,"reputation":4313,"user_id":213292,"accept_rate":40,"display_name":"JJ Roman"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1523050625,"creation_date":1523050625,"answer_id":49701303,"question_id":36795678,"body_markdown":"When using application.properties set property `server.session.timeout=` value is in seconds.","title":"How to enable session and set session timeout in Spring Security","body":"<p>When using application.properties set property <code>server.session.timeout=</code> value is in seconds.</p>\n"},{"tags":[],"owner":{"account_id":3364917,"reputation":3325,"user_id":2825798,"display_name":"PraveenKumar Lalasangi"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1694354284,"creation_date":1566418368,"answer_id":57598611,"question_id":36795678,"body_markdown":"Different ways to configure session timeout time(maxInactiveInterval) in spring security.\r\n\r\n&lt;b&gt; 1. By addinng session config in web.xml(from raju vaishnav&#39;s answer)&lt;/b&gt;\r\n\r\n&lt;b&gt; 2. By creating implementation of HttpSessionListener and adding it to servlet context.(from munilvc&#39;s answer)&lt;/b&gt;\r\n### 3. By registering your custom AuthenticationSuccessHandler in spring security configuration, and setting session maximum inactive interval in onAuthenticationSuccess method.\r\nThis implementation has advantages\r\n\r\n1. On login success, You can set different value of maxInactiveInterval for different roles/users.\r\n\r\n2. On login success, you can set user object in session, hence user object can be accessed in any controller from session.\r\n\r\nDisadvantage: You can not set session timeout for ANONYMOUS user(Un-authenticated user)\r\n\r\nCreate AuthenticationSuccessHandler Handler\r\n```java\r\npublic class MyAuthenticationSuccessHandler implements AuthenticationSuccessHandler\r\n{\r\n\r\n\tpublic void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)\r\n\t\t\tthrows IOException \r\n\t{\r\n        Set&lt;String&gt; roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());\r\n        if (roles.contains(&quot;ROLE_ADMIN&quot;))\r\n        {\r\n        \trequest.getSession(false).setMaxInactiveInterval(60);\r\n        }\r\n        else\r\n        {\r\n        \trequest.getSession(false).setMaxInactiveInterval(120);\r\n        }\r\n        //Your login success url goes here, currently login success url=&quot;/&quot;\r\n        response.sendRedirect(request.getContextPath());\r\n    }\r\n}\r\n```\r\nRegister success handler\r\n\r\nIn Java Config way\r\n```java\r\n@Override\r\nprotected void configure(final HttpSecurity http) throws Exception\r\n{\r\n\thttp\r\n\t\t.authorizeRequests()\r\n\t\t\t.antMatchers(&quot;/resources/**&quot;, &quot;/login&quot;).permitAll()\r\n\t\t\t.antMatchers(&quot;/app/admin/*&quot;).hasRole(&quot;ADMIN&quot;)\r\n\t\t\t.antMatchers(&quot;/app/user/*&quot;, &quot;/&quot;).hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\r\n\t\t.and().exceptionHandling().accessDeniedPage(&quot;/403&quot;)\r\n\t\t.and().formLogin()\r\n\t\t\t.loginPage(&quot;/login&quot;).usernameParameter(&quot;userName&quot;)\r\n\t\t\t.passwordParameter(&quot;password&quot;)\r\n\t\t\t.successHandler(new MyAuthenticationSuccessHandler())\r\n\t\t\t.failureUrl(&quot;/login?error=true&quot;)\r\n\t\t.and().logout()\r\n\t\t\t.logoutSuccessHandler(new CustomLogoutSuccessHandler())\r\n\t\t\t.invalidateHttpSession(true)\r\n\t\t.and().csrf().disable();\r\n\r\n\thttp.sessionManagement().maximumSessions(1).expiredUrl(&quot;/login?expired=true&quot;);\r\n}\r\n```\r\nIn xml config way\r\n```xml\r\n&lt;http auto-config=&quot;true&quot; use-expressions=&quot;true&quot; create-session=&quot;ifRequired&quot;&gt;\r\n\t&lt;csrf disabled=&quot;true&quot;/&gt;\r\n\r\n\t&lt;intercept-url pattern=&quot;/resources/**&quot; access=&quot;permitAll&quot; /&gt;\r\n\t&lt;intercept-url pattern=&quot;/login&quot; access=&quot;permitAll&quot; /&gt;\r\n\r\n\t&lt;intercept-url pattern=&quot;/app/admin/*&quot; access=&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot; /&gt;\r\n\t&lt;intercept-url pattern=&quot;/&quot; access=&quot;hasAnyRole(&#39;ROLE_USER&#39;, &#39;ROLE_ADMIN&#39;)&quot; /&gt;\r\n\t&lt;intercept-url pattern=&quot;/app/user/*&quot; access=&quot;hasAnyRole(&#39;ROLE_USER&#39;, &#39;ROLE_ADMIN&#39;)&quot; /&gt;\r\n\r\n\t&lt;access-denied-handler error-page=&quot;/403&quot; /&gt;\r\n\r\n\t&lt;form-login \r\n\t    login-page=&quot;/login&quot;\r\n\t    authentication-success-handler-ref=&quot;authenticationSuccessHandler&quot;\r\n\t    authentication-failure-url=&quot;/login?error=true&quot; \r\n\t    username-parameter=&quot;userName&quot;\r\n\t    password-parameter=&quot;password&quot; /&gt;\r\n\r\n\t&lt;logout invalidate-session=&quot;false&quot; success-handler-ref=&quot;customLogoutSuccessHandler&quot;/&gt;\r\n\r\n\t&lt;session-management invalid-session-url=&quot;/login?expired=true&quot;&gt;\r\n\t\t&lt;concurrency-control max-sessions=&quot;1&quot; /&gt;\r\n\t&lt;/session-management&gt;\r\n &lt;/http&gt;\r\n \r\n &lt;beans:bean id=&quot;authenticationSuccessHandler&quot; class=&quot;com.pvn.mvctiles.configuration.MyAuthenticationSuccessHandler&quot; /&gt;\r\n \r\n ```\r\n\r\nWorking code is available in [my github repository](https://github.com/nlpraveennl/stackoverflow-answer-reference/)\r\nWorking code is available in two forms\r\n\r\n[1. XML config way of implementation](https://github.com/nlpraveennl/stackoverflow-answer-reference/tree/master/springsecurity-auth-success-handler-xmlconfig)\r\n\r\n[2. JAVA config way of implementation](https://github.com/nlpraveennl/stackoverflow-answer-reference/tree/master/springsecurity-auth-success-handler-javaconfig)\r\n\r\nIf you want to have automatic logout feature and timer which displays when session is about to expire, if user is filling form but not submitted then user can extend session by clicking on keep session alive button.\r\nIf you want to implement auto logout refer [stack overflow answer on auto logout on session timeout](https://stackoverflow.com/a/57598264/2825798). Hope this will help.\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gF7el.png","title":"How to enable session and set session timeout in Spring Security","body":"<p>Different ways to configure session timeout time(maxInactiveInterval) in spring security.</p>\n<p><b> 1. By addinng session config in web.xml(from raju vaishnav's answer)</b></p>\n<p><b> 2. By creating implementation of HttpSessionListener and adding it to servlet context.(from munilvc's answer)</b></p>\n<h3>3. By registering your custom AuthenticationSuccessHandler in spring security configuration, and setting session maximum inactive interval in onAuthenticationSuccess method.</h3>\n<p>This implementation has advantages</p>\n<ol>\n<li><p>On login success, You can set different value of maxInactiveInterval for different roles/users.</p>\n</li>\n<li><p>On login success, you can set user object in session, hence user object can be accessed in any controller from session.</p>\n</li>\n</ol>\n<p>Disadvantage: You can not set session timeout for ANONYMOUS user(Un-authenticated user)</p>\n<p>Create AuthenticationSuccessHandler Handler</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyAuthenticationSuccessHandler implements AuthenticationSuccessHandler\n{\n\n    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)\n            throws IOException \n    {\n        Set&lt;String&gt; roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());\n        if (roles.contains(&quot;ROLE_ADMIN&quot;))\n        {\n            request.getSession(false).setMaxInactiveInterval(60);\n        }\n        else\n        {\n            request.getSession(false).setMaxInactiveInterval(120);\n        }\n        //Your login success url goes here, currently login success url=&quot;/&quot;\n        response.sendRedirect(request.getContextPath());\n    }\n}\n</code></pre>\n<p>Register success handler</p>\n<p>In Java Config way</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(final HttpSecurity http) throws Exception\n{\n    http\n        .authorizeRequests()\n            .antMatchers(&quot;/resources/**&quot;, &quot;/login&quot;).permitAll()\n            .antMatchers(&quot;/app/admin/*&quot;).hasRole(&quot;ADMIN&quot;)\n            .antMatchers(&quot;/app/user/*&quot;, &quot;/&quot;).hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\n        .and().exceptionHandling().accessDeniedPage(&quot;/403&quot;)\n        .and().formLogin()\n            .loginPage(&quot;/login&quot;).usernameParameter(&quot;userName&quot;)\n            .passwordParameter(&quot;password&quot;)\n            .successHandler(new MyAuthenticationSuccessHandler())\n            .failureUrl(&quot;/login?error=true&quot;)\n        .and().logout()\n            .logoutSuccessHandler(new CustomLogoutSuccessHandler())\n            .invalidateHttpSession(true)\n        .and().csrf().disable();\n\n    http.sessionManagement().maximumSessions(1).expiredUrl(&quot;/login?expired=true&quot;);\n}\n</code></pre>\n<p>In xml config way</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;http auto-config=&quot;true&quot; use-expressions=&quot;true&quot; create-session=&quot;ifRequired&quot;&gt;\n    &lt;csrf disabled=&quot;true&quot;/&gt;\n\n    &lt;intercept-url pattern=&quot;/resources/**&quot; access=&quot;permitAll&quot; /&gt;\n    &lt;intercept-url pattern=&quot;/login&quot; access=&quot;permitAll&quot; /&gt;\n\n    &lt;intercept-url pattern=&quot;/app/admin/*&quot; access=&quot;hasRole('ROLE_ADMIN')&quot; /&gt;\n    &lt;intercept-url pattern=&quot;/&quot; access=&quot;hasAnyRole('ROLE_USER', 'ROLE_ADMIN')&quot; /&gt;\n    &lt;intercept-url pattern=&quot;/app/user/*&quot; access=&quot;hasAnyRole('ROLE_USER', 'ROLE_ADMIN')&quot; /&gt;\n\n    &lt;access-denied-handler error-page=&quot;/403&quot; /&gt;\n\n    &lt;form-login \n        login-page=&quot;/login&quot;\n        authentication-success-handler-ref=&quot;authenticationSuccessHandler&quot;\n        authentication-failure-url=&quot;/login?error=true&quot; \n        username-parameter=&quot;userName&quot;\n        password-parameter=&quot;password&quot; /&gt;\n\n    &lt;logout invalidate-session=&quot;false&quot; success-handler-ref=&quot;customLogoutSuccessHandler&quot;/&gt;\n\n    &lt;session-management invalid-session-url=&quot;/login?expired=true&quot;&gt;\n        &lt;concurrency-control max-sessions=&quot;1&quot; /&gt;\n    &lt;/session-management&gt;\n &lt;/http&gt;\n \n &lt;beans:bean id=&quot;authenticationSuccessHandler&quot; class=&quot;com.pvn.mvctiles.configuration.MyAuthenticationSuccessHandler&quot; /&gt;\n \n</code></pre>\n<p>Working code is available in <a href=\"https://github.com/nlpraveennl/stackoverflow-answer-reference/\" rel=\"nofollow noreferrer\">my github repository</a>\nWorking code is available in two forms</p>\n<p><a href=\"https://github.com/nlpraveennl/stackoverflow-answer-reference/tree/master/springsecurity-auth-success-handler-xmlconfig\" rel=\"nofollow noreferrer\">1. XML config way of implementation</a></p>\n<p><a href=\"https://github.com/nlpraveennl/stackoverflow-answer-reference/tree/master/springsecurity-auth-success-handler-javaconfig\" rel=\"nofollow noreferrer\">2. JAVA config way of implementation</a></p>\n<p>If you want to have automatic logout feature and timer which displays when session is about to expire, if user is filling form but not submitted then user can extend session by clicking on keep session alive button.\nIf you want to implement auto logout refer <a href=\"https://stackoverflow.com/a/57598264/2825798\">stack overflow answer on auto logout on session timeout</a>. Hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":11773195,"reputation":31,"user_id":8615602,"display_name":"Komal Singh Sisodiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598525719,"creation_date":1598525719,"answer_id":63614506,"question_id":36795678,"body_markdown":"I handled it inside subclass of [UsernamePasswordAuthenticationFilter][1]\r\nYou can get username by - \r\n\r\n    obtainUsername(request);\r\n\r\nand apply user checks and set time out accordingly, like-\r\n\r\n    if(username.equalsIgnoreCase(&quot;komal-singh-sisodiya@xyz.com&quot;)) \r\n\t\t\t{\r\n\t\t\tlogger.debug(&quot;setting timeout 15 min&quot;);\r\n\t\t\trequest.getSession(false).setMaxInactiveInterval(15*60);\r\n\t\t\t}\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html","title":"How to enable session and set session timeout in Spring Security","body":"<p>I handled it inside subclass of <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html\" rel=\"nofollow noreferrer\">UsernamePasswordAuthenticationFilter</a>\nYou can get username by -</p>\n<pre><code>obtainUsername(request);\n</code></pre>\n<p>and apply user checks and set time out accordingly, like-</p>\n<pre><code>if(username.equalsIgnoreCase(&quot;komal-singh-sisodiya@xyz.com&quot;)) \n        {\n        logger.debug(&quot;setting timeout 15 min&quot;);\n        request.getSession(false).setMaxInactiveInterval(15*60);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6430905,"reputation":400,"user_id":4984125,"display_name":"New Bee"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1609117486,"creation_date":1609117486,"answer_id":65471968,"question_id":36795678,"body_markdown":"In your application properties use \r\n**`server.servlet.session.timeout=1m`** (If a duration suffix is not specified, seconds will be used.)\r\n\r\nBy default it is 30 minutes.\r\n","title":"How to enable session and set session timeout in Spring Security","body":"<p>In your application properties use\n<strong><code>server.servlet.session.timeout=1m</code></strong> (If a duration suffix is not specified, seconds will be used.)</p>\n<p>By default it is 30 minutes.</p>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654356874,"creation_date":1654356874,"answer_id":72501015,"question_id":36795678,"body_markdown":"Add the below in `application.proprites` \r\n\r\n    server.servlet.session.timeout= ","title":"How to enable session and set session timeout in Spring Security","body":"<p>Add the below in <code>application.proprites</code></p>\n<pre><code>server.servlet.session.timeout= \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9260961,"reputation":1,"user_id":6878063,"display_name":"hema arun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660918152,"creation_date":1660665967,"answer_id":73377018,"question_id":36795678,"body_markdown":"this will work:    \r\n\r\n    @EnableJdbcHttpSession(maxInactiveIntervalInSeconds = 84600)","title":"How to enable session and set session timeout in Spring Security","body":"<p>this will work:</p>\n<pre><code>@EnableJdbcHttpSession(maxInactiveIntervalInSeconds = 84600)\n</code></pre>\n"}],"owner":{"account_id":3948767,"reputation":761,"user_id":4568220,"accept_rate":44,"display_name":"raju vaishnav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105527,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":36807445,"answer_count":8,"score":37,"last_activity_date":1694354284,"creation_date":1461333159,"question_id":36795678,"body_markdown":"I am new to Spring Security and I am working on a login, logout, and session timeout feature. I have configured my code by referring to [this][1] document. My code looks below:\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.authorizeRequests().antMatchers(&quot;/admin/**&quot;)\r\n\t\t\t.access(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;).and().formLogin()\r\n\t\t\t.loginPage(&quot;/login&quot;).failureUrl(&quot;/login?error&quot;)\r\n\t\t\t\t.usernameParameter(&quot;username&quot;)\r\n\t\t\t\t.passwordParameter(&quot;password&quot;)\r\n\t\t\t\t.and().logout().logoutSuccessUrl(&quot;/login?logout&quot;).and().csrf();\r\n\t\thttp.sessionManagement().maximumSessions(1).expiredUrl(&quot;/login?expired&quot;);\r\n\t}\r\n\r\n **Override the class AbstractSecurityWebApplicationInitializer**\r\n\r\n\timport org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer;\r\n\r\n\tpublic class SpringSecurityInitializer extends AbstractSecurityWebApplicationInitializer {\r\n\r\n\t\t@Override\r\n\t\tpublic boolean enableHttpSessionEventPublisher() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nI need clarification on whether I am doing it right, if it looks good, then where I need to setup the session timeout. I am doing it fully based on annotation.\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/docs/3.2.4.RELEASE/apidocs/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#sessionManagement%28%29\r\n\r\n","title":"How to enable session and set session timeout in Spring Security","body":"<p>I am new to Spring Security and I am working on a login, logout, and session timeout feature. I have configured my code by referring to <a href=\"http://docs.spring.io/spring-security/site/docs/3.2.4.RELEASE/apidocs/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#sessionManagement%28%29\" rel=\"noreferrer\">this</a> document. My code looks below:</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n\n    http.authorizeRequests().antMatchers(\"/admin/**\")\n        .access(\"hasRole('ROLE_USER')\").and().formLogin()\n        .loginPage(\"/login\").failureUrl(\"/login?error\")\n            .usernameParameter(\"username\")\n            .passwordParameter(\"password\")\n            .and().logout().logoutSuccessUrl(\"/login?logout\").and().csrf();\n    http.sessionManagement().maximumSessions(1).expiredUrl(\"/login?expired\");\n}\n</code></pre>\n\n<p><strong>Override the class AbstractSecurityWebApplicationInitializer</strong></p>\n\n<pre><code>import org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer;\n\npublic class SpringSecurityInitializer extends AbstractSecurityWebApplicationInitializer {\n\n    @Override\n    public boolean enableHttpSessionEventPublisher() {\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>I need clarification on whether I am doing it right, if it looks good, then where I need to setup the session timeout. I am doing it fully based on annotation.</p>\n"},{"tags":["java","spring-boot","hibernate","spring-orm"],"owner":{"account_id":19468499,"reputation":194,"user_id":14241354,"display_name":"14241354"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1694359113,"answer_count":0,"score":0,"last_activity_date":1694354243,"creation_date":1694354243,"question_id":77076417,"body_markdown":"When calling the `scanPackages(String...)` method of `org.springframework.orm.hibernate5.LocalSessionFactoryBuilder` I get a `NoSuchMethodError`:\r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;void org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.addAttributeConverter(java.lang.Class)&#39;\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.scanPackages(LocalSessionFactoryBuilder.java:350)\r\n```\r\n\r\n* The error occurs when the package being scanned includes a class annotated with `jakarta.persistence.Converter`.\r\n* This happens when using `spring-boot-starter-parent` versions `3.1.0`, `3.1.1`, `3.1.2` and `3.1.3`.\r\n* It does not happen when I use `spring-boot-starter-parent` version `3.0.10`.\r\n* `spring-boot-starter-parent` `3.1.3` uses `hibernate-core` `6.2.7.Final` and `spring-orm` `6.0.11`.\r\n\r\n\r\n# **Example:**\r\n\r\nBelow is a unit test that demonstrates this problem, and the `pom.xml` I was using to build it. The unit test fails with a `NoSuchMethodError`.\r\n\r\n**src/test/java/com/example/ScanPackagesTest.java**\r\n```\r\npackage com.example;\r\n\r\nimport java.sql.Date;\r\nimport java.time.LocalDate;\r\n\r\nimport javax.sql.DataSource;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;\r\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType;\r\nimport org.springframework.orm.hibernate5.LocalSessionFactoryBuilder;\r\n\r\nimport jakarta.persistence.AttributeConverter;\r\nimport jakarta.persistence.Converter;\r\n\r\npublic class ScanPackagesTest {\r\n   @Test\r\n   public void test() {\r\n      DataSource dataSource = new EmbeddedDatabaseBuilder().setType(EmbeddedDatabaseType.H2).build();\r\n      LocalSessionFactoryBuilder sessionBuilder = new LocalSessionFactoryBuilder(dataSource);\r\n      sessionBuilder.scanPackages(&quot;com.example&quot;);\r\n   }\r\n\r\n   @Converter(autoApply = true)\r\n   public static class StubConverter implements AttributeConverter&lt;LocalDate, Date&gt; {\r\n      @Override\r\n      public Date convertToDatabaseColumn(LocalDate attribute) {\r\n         return attribute == null ? null : Date.valueOf(attribute);\r\n      }\r\n\r\n      @Override\r\n      public LocalDate convertToEntityAttribute(Date dbData) {\r\n         return dbData == null ? null : dbData.toLocalDate();\r\n      }\r\n   }\r\n}\r\n\r\n```\r\n\r\n**pom.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.3&lt;/version&gt; &lt;!-- Test passes when using 3.0.10. Test fails when using 3.1.0 or later. --&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**Stacktrace of failing test:**\r\n```\r\njava.lang.NoSuchMethodError: &#39;void org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.addAttributeConverter(java.lang.Class)&#39;\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.scanPackages(LocalSessionFactoryBuilder.java:350)\r\n\tat com.example.ScanPackagesTest.test(ScanPackagesTest.java:21)\r\n```\r\n","title":"NoSuchMethod &#39;void org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.addAttributeConverter(java.lang.Class)&#39;","body":"<p>When calling the <code>scanPackages(String...)</code> method of <code>org.springframework.orm.hibernate5.LocalSessionFactoryBuilder</code> I get a <code>NoSuchMethodError</code>:</p>\n<pre><code>java.lang.NoSuchMethodError: 'void org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.addAttributeConverter(java.lang.Class)'\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.scanPackages(LocalSessionFactoryBuilder.java:350)\n</code></pre>\n<ul>\n<li>The error occurs when the package being scanned includes a class annotated with <code>jakarta.persistence.Converter</code>.</li>\n<li>This happens when using <code>spring-boot-starter-parent</code> versions <code>3.1.0</code>, <code>3.1.1</code>, <code>3.1.2</code> and <code>3.1.3</code>.</li>\n<li>It does not happen when I use <code>spring-boot-starter-parent</code> version <code>3.0.10</code>.</li>\n<li><code>spring-boot-starter-parent</code> <code>3.1.3</code> uses <code>hibernate-core</code> <code>6.2.7.Final</code> and <code>spring-orm</code> <code>6.0.11</code>.</li>\n</ul>\n<h1><strong>Example:</strong></h1>\n<p>Below is a unit test that demonstrates this problem, and the <code>pom.xml</code> I was using to build it. The unit test fails with a <code>NoSuchMethodError</code>.</p>\n<p><strong>src/test/java/com/example/ScanPackagesTest.java</strong></p>\n<pre><code>package com.example;\n\nimport java.sql.Date;\nimport java.time.LocalDate;\n\nimport javax.sql.DataSource;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType;\nimport org.springframework.orm.hibernate5.LocalSessionFactoryBuilder;\n\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\npublic class ScanPackagesTest {\n   @Test\n   public void test() {\n      DataSource dataSource = new EmbeddedDatabaseBuilder().setType(EmbeddedDatabaseType.H2).build();\n      LocalSessionFactoryBuilder sessionBuilder = new LocalSessionFactoryBuilder(dataSource);\n      sessionBuilder.scanPackages(&quot;com.example&quot;);\n   }\n\n   @Converter(autoApply = true)\n   public static class StubConverter implements AttributeConverter&lt;LocalDate, Date&gt; {\n      @Override\n      public Date convertToDatabaseColumn(LocalDate attribute) {\n         return attribute == null ? null : Date.valueOf(attribute);\n      }\n\n      @Override\n      public LocalDate convertToEntityAttribute(Date dbData) {\n         return dbData == null ? null : dbData.toLocalDate();\n      }\n   }\n}\n\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt; &lt;!-- Test passes when using 3.0.10. Test fails when using 3.1.0 or later. --&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>Stacktrace of failing test:</strong></p>\n<pre><code>java.lang.NoSuchMethodError: 'void org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.addAttributeConverter(java.lang.Class)'\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBuilder.scanPackages(LocalSessionFactoryBuilder.java:350)\n    at com.example.ScanPackagesTest.test(ScanPackagesTest.java:21)\n</code></pre>\n"},{"tags":["java","spring-security","oauth-2.0","spring-oauth2"],"answers":[{"tags":[],"owner":{"account_id":19460464,"reputation":43,"user_id":14234891,"display_name":"Ionathan Ardelean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694330805,"creation_date":1694330805,"answer_id":77075158,"question_id":77074220,"body_markdown":"In Spring Security 5.7.0-M2 WebSecurityConfigurerAdapter was deprecated.\r\nHere is how you do it now:\r\nhttps://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n\r\n","title":"error with WebSecurityConfigurerAdapter when migrating springboot application 2.7 to 3.1.1","body":"<p>In Spring Security 5.7.0-M2 WebSecurityConfigurerAdapter was deprecated.\nHere is how you do it now:\n<a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a></p>\n"},{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694351758,"creation_date":1694331013,"answer_id":77075169,"question_id":77074220,"body_markdown":"If the problem is in migration and nothing else, i mean to replace old configuration.\r\n\r\nYou should remove ` extends WebSecurityConfigurerAdapter`.\r\n\r\nThe configuration class will look so:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class OpaqueSecurityConfig {\r\n    \r\n      @Bean\r\n      public SecurityFilterChain securityFilterChain(HttpSecurity http)  throws Exception {\r\n    \r\n        http.cors(AbstractHttpConfigurer::disable);\r\n        http.authorizeHttpRequests(request -&gt; {\r\n          request.requestMatchers(HttpMethod.GET,\r\n                  &quot;/public/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/apiGeneral-docs/**&quot;, &quot;swagger-ui-GeneralApi/**&quot;, &quot;/swagger-ui-GeneralApi.html/**&quot;).permitAll()\r\n              .requestMatchers(HttpMethod.POST, &quot;/public/**&quot;).permitAll()\r\n              .anyRequest().authenticated();\r\n        });\r\n        http.oauth2ResourceServer(c -&gt; c.opaqueToken(Customizer.withDefaults()));\r\n    \r\n        return http.build();\r\n      }\r\n    \r\n      @Bean\r\n      OpaqueTokenIntrospector tokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\r\n        return new CustomOpaqueTokenIntrospector(builder, resourceServerProps);\r\n      }\r\n    \r\n    }\r\nBut i really suggest you to check next resources:\r\n\r\n[spring-security-without-the-websecurityconfigureradapter][1]\r\n\r\n[Migration Guide][2]\r\n\r\n\r\nAbout `gradle` build file also update the version for \r\n\r\n`implementation &#39;org.springframework.boot:spring-boot-gradle-plugin:**2.7.0**&#39;` to one that you use in project.\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n  [2]: https://docs.spring.io/spring-security/reference/migration-7/configuration.html","title":"error with WebSecurityConfigurerAdapter when migrating springboot application 2.7 to 3.1.1","body":"<p>If the problem is in migration and nothing else, i mean to replace old configuration.</p>\n<p>You should remove <code> extends WebSecurityConfigurerAdapter</code>.</p>\n<p>The configuration class will look so:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class OpaqueSecurityConfig {\n\n  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http)  throws Exception {\n\n    http.cors(AbstractHttpConfigurer::disable);\n    http.authorizeHttpRequests(request -&gt; {\n      request.requestMatchers(HttpMethod.GET,\n              &quot;/public/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/apiGeneral-docs/**&quot;, &quot;swagger-ui-GeneralApi/**&quot;, &quot;/swagger-ui-GeneralApi.html/**&quot;).permitAll()\n          .requestMatchers(HttpMethod.POST, &quot;/public/**&quot;).permitAll()\n          .anyRequest().authenticated();\n    });\n    http.oauth2ResourceServer(c -&gt; c.opaqueToken(Customizer.withDefaults()));\n\n    return http.build();\n  }\n\n  @Bean\n  OpaqueTokenIntrospector tokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\n    return new CustomOpaqueTokenIntrospector(builder, resourceServerProps);\n  }\n\n}\n</code></pre>\n<p>But i really suggest you to check next resources:</p>\n<p><a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">spring-security-without-the-websecurityconfigureradapter</a></p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/migration-7/configuration.html\" rel=\"nofollow noreferrer\">Migration Guide</a></p>\n<p>About <code>gradle</code> build file also update the version for</p>\n<p><code>implementation 'org.springframework.boot:spring-boot-gradle-plugin:**2.7.0**'</code> to one that you use in project.</p>\n"}],"owner":{"account_id":15908288,"reputation":55,"user_id":11489433,"display_name":"Kenny Cruz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77075169,"answer_count":2,"score":-1,"last_activity_date":1694351758,"creation_date":1694297912,"question_id":77074220,"body_markdown":"Good afternoon, I have a problem with an application in springboot 2.7.1 that I updated to version 3.1.1\r\nmy application uses CustomOpaqueTokenIntrospector to validate a token, the problem is that in version 3.1.1 &quot;WebSecurityConfigurerAdapter&quot;, &quot;cors&quot;,&quot;antMatchers&quot;, &quot;oauth2ResourceServer().opaqueToken()&quot; are deprecated, and honestly I&#39;m new to this authentication and authorization.\r\nCould you help me with an answer on how I could correct my problem, I have attached the code of my configuration classes.\r\n\r\n**Class OpaqueSecurityConfig:**\r\n\r\n    package ec.edu.espe.generalapi.Config.security;\r\n    \r\n    import org.springframework.boot.autoconfigure.security.oauth2.resource.OAuth2ResourceServerProperties;\r\n    import org.springframework.boot.web.client.RestTemplateBuilder;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.HttpMethod;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector;\r\n    \r\n    @Configuration\r\n    public class OpaqueSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n           \r\n            http.cors();\r\n            http\r\n                    .authorizeRequests(authz -&gt; authz\r\n                            .antMatchers(HttpMethod.GET, &quot;/public/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/apiGeneral-docs/**&quot;, &quot;swagger-ui-GeneralApi/**&quot;, &quot;/swagger-ui-GeneralApi.html/**&quot;).permitAll()\r\n                            .antMatchers(HttpMethod.POST, &quot;/public/**&quot;).permitAll()\r\n                            .anyRequest().authenticated())\r\n                    .oauth2ResourceServer().opaqueToken();\r\n        }\r\n    \r\n        @Bean\r\n        OpaqueTokenIntrospector tokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\r\n            return new CustomOpaqueTokenIntrospector(builder, resourceServerProps);\r\n        }\r\n    \r\n    }\r\n\r\n**Class CustomOpaqueTokenIntrospector:**\r\n\r\n    package ec.edu.espe.generalapi.Config.security;\r\n    \r\n    import org.springframework.boot.autoconfigure.security.oauth2.resource.OAuth2ResourceServerProperties;\r\n    import org.springframework.boot.web.client.RestTemplateBuilder;\r\n    import org.springframework.security.oauth2.core.OAuth2AuthenticatedPrincipal;\r\n    import org.springframework.security.oauth2.server.resource.introspection.NimbusOpaqueTokenIntrospector;\r\n    import org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector;\r\n    import org.springframework.web.client.RestOperations;\r\n    \r\n    import java.time.Duration;\r\n    \r\n    \r\n    public class CustomOpaqueTokenIntrospector implements OpaqueTokenIntrospector {\r\n        private OAuth2ResourceServerProperties.Opaquetoken opaqueTokenProps;\r\n        private RestTemplateBuilder builder;\r\n        CustomOpaqueTokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\r\n            this.opaqueTokenProps = resourceServerProps.getOpaquetoken();\r\n            this.builder = builder;\r\n        }\r\n    \r\n        @Override\r\n        public OAuth2AuthenticatedPrincipal introspect(String token) {\r\n          //  System.out.println(token);\r\n            RestOperations restOperations = builder\r\n                    .defaultHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\r\n                    .setConnectTimeout(Duration.ofSeconds(60))\r\n                    .setReadTimeout(Duration.ofSeconds(60))\r\n                    .build();\r\n            return new NimbusOpaqueTokenIntrospector(opaqueTokenProps.getIntrospectionUri(), restOperations).introspect(token);\r\n        }\r\n    }\r\n\r\nand finally:\r\n\r\n**build.gradle**\r\n\r\n    plugins {\r\n    \tid &#39;java&#39;\r\n    \tid &#39;org.springframework.boot&#39; version &#39;3.1.3&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n    }\r\n    \r\n    group = &#39;example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    \r\n    java {\r\n    \tsourceCompatibility = &#39;17&#39;\r\n    }\r\n    \r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.0.0&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-gradle-plugin:2.7.0&#39;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \timplementation &#39;org.springdoc:springdoc-openapi-ui:1.6.12&#39;\r\n    \timplementation &#39;org.springdoc:springdoc-openapi-security:1.6.12&#39;\r\n    \timplementation group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.3.1&#39;\r\n    \truntimeOnly &#39;com.nimbusds:oauth2-oidc-sdk:9.2.4&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-actuator:2.6.1&#39;\r\n    \truntimeOnly &#39;com.oracle.database.jdbc:ojdbc8&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n    \tuseJUnitPlatform()\r\n    }\r\n\r\n\r\n","title":"error with WebSecurityConfigurerAdapter when migrating springboot application 2.7 to 3.1.1","body":"<p>Good afternoon, I have a problem with an application in springboot 2.7.1 that I updated to version 3.1.1\nmy application uses CustomOpaqueTokenIntrospector to validate a token, the problem is that in version 3.1.1 &quot;WebSecurityConfigurerAdapter&quot;, &quot;cors&quot;,&quot;antMatchers&quot;, &quot;oauth2ResourceServer().opaqueToken()&quot; are deprecated, and honestly I'm new to this authentication and authorization.\nCould you help me with an answer on how I could correct my problem, I have attached the code of my configuration classes.</p>\n<p><strong>Class OpaqueSecurityConfig:</strong></p>\n<pre><code>package ec.edu.espe.generalapi.Config.security;\n\nimport org.springframework.boot.autoconfigure.security.oauth2.resource.OAuth2ResourceServerProperties;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector;\n\n@Configuration\npublic class OpaqueSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n       \n        http.cors();\n        http\n                .authorizeRequests(authz -&gt; authz\n                        .antMatchers(HttpMethod.GET, &quot;/public/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/apiGeneral-docs/**&quot;, &quot;swagger-ui-GeneralApi/**&quot;, &quot;/swagger-ui-GeneralApi.html/**&quot;).permitAll()\n                        .antMatchers(HttpMethod.POST, &quot;/public/**&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .oauth2ResourceServer().opaqueToken();\n    }\n\n    @Bean\n    OpaqueTokenIntrospector tokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\n        return new CustomOpaqueTokenIntrospector(builder, resourceServerProps);\n    }\n\n}\n</code></pre>\n<p><strong>Class CustomOpaqueTokenIntrospector:</strong></p>\n<pre><code>package ec.edu.espe.generalapi.Config.security;\n\nimport org.springframework.boot.autoconfigure.security.oauth2.resource.OAuth2ResourceServerProperties;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.security.oauth2.core.OAuth2AuthenticatedPrincipal;\nimport org.springframework.security.oauth2.server.resource.introspection.NimbusOpaqueTokenIntrospector;\nimport org.springframework.security.oauth2.server.resource.introspection.OpaqueTokenIntrospector;\nimport org.springframework.web.client.RestOperations;\n\nimport java.time.Duration;\n\n\npublic class CustomOpaqueTokenIntrospector implements OpaqueTokenIntrospector {\n    private OAuth2ResourceServerProperties.Opaquetoken opaqueTokenProps;\n    private RestTemplateBuilder builder;\n    CustomOpaqueTokenIntrospector(RestTemplateBuilder builder, OAuth2ResourceServerProperties resourceServerProps) {\n        this.opaqueTokenProps = resourceServerProps.getOpaquetoken();\n        this.builder = builder;\n    }\n\n    @Override\n    public OAuth2AuthenticatedPrincipal introspect(String token) {\n      //  System.out.println(token);\n        RestOperations restOperations = builder\n                .defaultHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\n                .setConnectTimeout(Duration.ofSeconds(60))\n                .setReadTimeout(Duration.ofSeconds(60))\n                .build();\n        return new NimbusOpaqueTokenIntrospector(opaqueTokenProps.getIntrospectionUri(), restOperations).introspect(token);\n    }\n}\n</code></pre>\n<p>and finally:</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.3'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\ngroup = 'example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '17'\n}\n\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.0.0'\n    implementation 'org.springframework.boot:spring-boot-gradle-plugin:2.7.0'\n    compileOnly 'org.projectlombok:lombok'\n    implementation 'org.springdoc:springdoc-openapi-ui:1.6.12'\n    implementation 'org.springdoc:springdoc-openapi-security:1.6.12'\n    implementation group: 'org.postgresql', name: 'postgresql', version: '42.3.1'\n    runtimeOnly 'com.nimbusds:oauth2-oidc-sdk:9.2.4'\n    implementation 'org.springframework.boot:spring-boot-starter-actuator:2.6.1'\n    runtimeOnly 'com.oracle.database.jdbc:ojdbc8'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","spring-boot","openshift"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1676990363,"post_id":75521872,"comment_id":133245625,"body_markdown":"have you tried smth. like: `java -cp &quot;directory where foo.properties is located&quot; -jar myapplication.jar` ?","body":"have you tried smth. like: <code>java -cp &quot;directory where foo.properties is located&quot; -jar myapplication.jar</code> ?"},{"owner":{"account_id":3867185,"reputation":1489,"user_id":3203447,"accept_rate":94,"display_name":"JTK"},"score":0,"creation_date":1693492822,"post_id":75521872,"comment_id":135771020,"body_markdown":"It&#39;s not possible to use -cp and -jar together: https://stackoverflow.com/questions/13018100/execute-jar-file-with-multiple-classpath-libraries-from-command-prompt","body":"It&#39;s not possible to use -cp and -jar together: <a href=\"https://stackoverflow.com/questions/13018100/execute-jar-file-with-multiple-classpath-libraries-from-command-prompt\" title=\"execute jar file with multiple classpath libraries from command prompt\">stackoverflow.com/questions/13018100/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":153343,"reputation":1086,"user_id":368532,"accept_rate":70,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694351660,"creation_date":1677013022,"answer_id":75525834,"question_id":75521872,"body_markdown":"**spring.config.location** has nothing to do with java native **getResourceAsStream** method, therefore it doesn&#39;t help\r\n\r\nFor JVM to interpret **/deployments/config/** as part of your classpath, you have to include this folder to the classpath in java command.\r\n\r\nYou probably have a Dockerfile with this line\r\n\r\n    java -jar service.jar\r\n\r\nModify it to \r\n\r\n    java -cp service.jar:/deployments/config mypackage.MyApplication\r\n","title":"Add external properties to classpath for maven dependence","body":"<p><strong>spring.config.location</strong> has nothing to do with java native <strong>getResourceAsStream</strong> method, therefore it doesn't help</p>\n<p>For JVM to interpret <strong>/deployments/config/</strong> as part of your classpath, you have to include this folder to the classpath in java command.</p>\n<p>You probably have a Dockerfile with this line</p>\n<pre><code>java -jar service.jar\n</code></pre>\n<p>Modify it to</p>\n<pre><code>java -cp service.jar:/deployments/config mypackage.MyApplication\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3867185,"reputation":1489,"user_id":3203447,"accept_rate":94,"display_name":"JTK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693494012,"creation_date":1693494012,"answer_id":77017043,"question_id":75521872,"body_markdown":"This was solved by configuring OCP4 Environment Variables: `JAVA_MAIN_CLASS`, `JAVA_CLASSPATH`\r\n\r\n    JAVA_MAIN_CLASS=-Dloader.main=your.spring.application.class org.springframework.boot.loader.JarLauncher\r\n\r\n    JAVA_CLASSPATH=/deployments/your.spring.application.jar:/deployments/data/:.\r\n\r\nIt&#39;s not possible to use both `-jar` and `-cp` on the command line: https://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html#-jar","title":"Add external properties to classpath for maven dependence","body":"<p>This was solved by configuring OCP4 Environment Variables: <code>JAVA_MAIN_CLASS</code>, <code>JAVA_CLASSPATH</code></p>\n<pre><code>JAVA_MAIN_CLASS=-Dloader.main=your.spring.application.class org.springframework.boot.loader.JarLauncher\n\nJAVA_CLASSPATH=/deployments/your.spring.application.jar:/deployments/data/:.\n</code></pre>\n<p>It's not possible to use both <code>-jar</code> and <code>-cp</code> on the command line: <a href=\"https://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html#-jar\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html#-jar</a></p>\n"}],"owner":{"account_id":3867185,"reputation":1489,"user_id":3203447,"accept_rate":94,"display_name":"JTK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77017043,"answer_count":2,"score":0,"last_activity_date":1694351660,"creation_date":1676989708,"question_id":75521872,"body_markdown":"I have an spring-boot application deployed on Openshift.\r\nThis application is dependent on a plain old java application, which has been added as maven dependence. \r\nThe maven dependence requires a `foo.properties` file on the classpath, it loads the `foo.properties` file using:\r\n\r\n    inputStream = this.getClass().getResourceAsStream(&quot;/foo.properties&quot;);\r\n\r\nThe `foo.properties` file will contain different values depending on the environment it&#39;s deployed to.\r\nI have tried to externalise the properties by adding a configmap to openshift, and mounting it at: `/deployments/config`\r\n\r\nI have added spring properties to the openshift environment variables:\r\n\r\n    spring.config.name foo\r\n    spring.config.location /deployments/config/\r\n\r\nHowever the maven dependence is unable to pick up the `foo.properties`, returning null.\r\n\r\nIs what I&#39;m attempting achievable, or are there alternative solutions to this problem?","title":"Add external properties to classpath for maven dependence","body":"<p>I have an spring-boot application deployed on Openshift.\nThis application is dependent on a plain old java application, which has been added as maven dependence.\nThe maven dependence requires a <code>foo.properties</code> file on the classpath, it loads the <code>foo.properties</code> file using:</p>\n<pre><code>inputStream = this.getClass().getResourceAsStream(&quot;/foo.properties&quot;);\n</code></pre>\n<p>The <code>foo.properties</code> file will contain different values depending on the environment it's deployed to.\nI have tried to externalise the properties by adding a configmap to openshift, and mounting it at: <code>/deployments/config</code></p>\n<p>I have added spring properties to the openshift environment variables:</p>\n<pre><code>spring.config.name foo\nspring.config.location /deployments/config/\n</code></pre>\n<p>However the maven dependence is unable to pick up the <code>foo.properties</code>, returning null.</p>\n<p>Is what I'm attempting achievable, or are there alternative solutions to this problem?</p>\n"},{"tags":["java","spring-boot","web","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1442195,"reputation":861,"user_id":1361980,"display_name":"kalmas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694349419,"creation_date":1694349419,"answer_id":77076133,"question_id":77075818,"body_markdown":"There is no stored session to keep you logged in once you are redirected. That&#39;s what `SessionCreationPolicy.STATELESS` means: don&#39;t create a server-side session, treat every request individually. You have to authenticate somehow when the browser redirects to `/api/home`. There are many options but it boils down to one of the following:\r\n* Enable backend sessions, this will tell Spring to link your requests together via the `JSESSIONID` cookie. This is the simple answer but will lead to problems down the road if you are building an API (see: [REST][1])\r\n* Include authentication token with each request. For example, make an endpoint that accepts a username and password and returns a token (see: [JWT][2]) to the client (browser). The client would then provide that token as a header on subsequent requests to authenticate.\r\n\r\n\r\n  [1]: https://restfulapi.net/\r\n  [2]: https://jwt.io/","title":"In Spring Security, after entering correct username and password, it redirects to the home page but it still displays &quot;HTTP 403 Forbidden&quot;","body":"<p>There is no stored session to keep you logged in once you are redirected. That's what <code>SessionCreationPolicy.STATELESS</code> means: don't create a server-side session, treat every request individually. You have to authenticate somehow when the browser redirects to <code>/api/home</code>. There are many options but it boils down to one of the following:</p>\n<ul>\n<li>Enable backend sessions, this will tell Spring to link your requests together via the <code>JSESSIONID</code> cookie. This is the simple answer but will lead to problems down the road if you are building an API (see: <a href=\"https://restfulapi.net/\" rel=\"nofollow noreferrer\">REST</a>)</li>\n<li>Include authentication token with each request. For example, make an endpoint that accepts a username and password and returns a token (see: <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">JWT</a>) to the client (browser). The client would then provide that token as a header on subsequent requests to authenticate.</li>\n</ul>\n"}],"owner":{"account_id":29402756,"reputation":1,"user_id":22528551,"display_name":"Mantozi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694349419,"creation_date":1694343468,"question_id":77075818,"body_markdown":"So I was practicing my SpringBoot+SpringSecurity skill.\r\nIn the security configuration:\r\n\r\n```\r\n@Bean\r\n    public SecurityFilterChain configuration(HttpSecurity http) throws Exception {\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n\r\n        http.authorizeHttpRequests(Registry -&gt; Registry\r\n                .requestMatchers(Constants.PUBLIC_URL)// /auth/**\r\n                .permitAll()\r\n                .requestMatchers(Constants.AUTHENTICATE_URL)// /api/**\r\n                .hasAnyRole(Role.ADMIN.name(), Role.USER.name())\r\n        );\r\n\r\n        http.sessionManagement(session\r\n                -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\r\n        http.authenticationProvider(authenticationProvider());\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nThis is my authenticate controller:\r\n\r\n```\r\n@PostMapping(&quot;/authenticate&quot;)\r\n    public String processAuthenticate(@Valid @ModelAttribute(name = &quot;user&quot;) AuthenticateRequest authenticateRequest, BindingResult bindingResult) {\r\n        bindingResult = authServices.authenticate(authenticateRequest, bindingResult);\r\n\r\n        if (bindingResult.hasErrors()) {\r\n            return &quot;authenticate&quot;;\r\n        }\r\n\r\n        SecurityContextHolder.getContext().setAuthentication(\r\n                new UsernamePasswordAuthenticationToken(\r\n                        authenticateRequest.getUsername(),\r\n                        authenticateRequest.getPassword()\r\n                )\r\n        );\r\n        return &quot;redirect:/api/home&quot;;\r\n    }\r\n```\r\nSo, that&#39;s exactly what I think:\r\nif `authServices.authenticate(authenticateRequest, bindingResult);` does not throw any exception, which means the correct username and password are entered!\r\nNext, the SecurityContextHolder will set the Authentication(UsernamePasswordAuthentication) and fill it with username and password.\r\nFinally, send redirect to the url &quot;/api/home&quot;.\r\n\r\nThere are two roles defined: USER and ADMIN.\r\n\r\n```\r\npublic enum Role {\r\n\r\n    USER(Collections.emptySet()),\r\n\r\n\r\n    ADMIN(Set.of(ADMIN_READ,\r\n            ADMIN_UPDATE, ADMIN_CREATE, ADMIN_DELETE\r\n    ));\r\n\r\n\r\n    @Getter\r\n    private final Set&lt;Permission&gt; permissions;\r\n\r\n    public List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\r\n        List&lt;SimpleGrantedAuthority&gt; authorities = new java.util.ArrayList&lt;&gt;(getPermissions().stream()\r\n                .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\r\n                .toList());\r\n        authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\r\n        return authorities;\r\n    }\r\n}\r\n```\r\n\r\nI think it shall be something wrong in the authorities or roles or something. Because when I delete the `.hasAnyRole(Role.ADMIN.name(), Role.USER.name())` and change it to `permitAll()`\r\n\r\nAdditionally, there is no AccessDeniedException threw out, only Http 403 Error on the web page.\r\n\r\nThis is my Mysql table:\r\n&#39;1&#39;, &#39;user1&#39;, &#39;$2a$10$faQJhWWffJlvWbN4YDC4tep4TIMDzH3Hze4tH9MMmt6r9NKp49FCe&#39;, &#39;user1@qq.com&#39;, &#39;ADMIN&#39;\r\n\r\n&#39;5&#39;, &#39;user2&#39;, &#39;$2a$10$qAZAuvoG.aaEMljYfQirZOhjEUsUZ3edcum/Mhc6UPOc.ti0VD7JO&#39;, &#39;user2@qq.com&#39;, &#39;USER&#39;\r\n\r\n\r\nI&#39;ve tried:\r\n\r\nadding @PreAuthorize(&quot;isAuthenticated()&quot;)on the homePage controller function but does not help.\r\nand @Secured(&quot;ROLE_USER&quot;) does not help either.\r\nchanging the column &quot;USER&quot; to &quot;ROLE_USER&quot; in the Mysql table does not help.\r\nAnd, I changed the `.hasAnyRole(Role.ADMIN.name(), Role.USER.name())` to `.hasAuthority(&quot;ADMIN&quot;)`,to\r\n`.hasAuthority(&quot;USER&quot;)`,unluckily, they does NOT help.\r\n\r\n\r\nWhat I expected:\r\nJust tell me the reason for this annoying problem. I wish I can redirect to the /api/home successfully. Thank you very much!","title":"In Spring Security, after entering correct username and password, it redirects to the home page but it still displays &quot;HTTP 403 Forbidden&quot;","body":"<p>So I was practicing my SpringBoot+SpringSecurity skill.\nIn the security configuration:</p>\n<pre><code>@Bean\n    public SecurityFilterChain configuration(HttpSecurity http) throws Exception {\n        http.csrf(AbstractHttpConfigurer::disable);\n\n        http.authorizeHttpRequests(Registry -&gt; Registry\n                .requestMatchers(Constants.PUBLIC_URL)// /auth/**\n                .permitAll()\n                .requestMatchers(Constants.AUTHENTICATE_URL)// /api/**\n                .hasAnyRole(Role.ADMIN.name(), Role.USER.name())\n        );\n\n        http.sessionManagement(session\n                -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n        http.authenticationProvider(authenticationProvider());\n\n        return http.build();\n    }\n</code></pre>\n<p>This is my authenticate controller:</p>\n<pre><code>@PostMapping(&quot;/authenticate&quot;)\n    public String processAuthenticate(@Valid @ModelAttribute(name = &quot;user&quot;) AuthenticateRequest authenticateRequest, BindingResult bindingResult) {\n        bindingResult = authServices.authenticate(authenticateRequest, bindingResult);\n\n        if (bindingResult.hasErrors()) {\n            return &quot;authenticate&quot;;\n        }\n\n        SecurityContextHolder.getContext().setAuthentication(\n                new UsernamePasswordAuthenticationToken(\n                        authenticateRequest.getUsername(),\n                        authenticateRequest.getPassword()\n                )\n        );\n        return &quot;redirect:/api/home&quot;;\n    }\n</code></pre>\n<p>So, that's exactly what I think:\nif <code>authServices.authenticate(authenticateRequest, bindingResult);</code> does not throw any exception, which means the correct username and password are entered!\nNext, the SecurityContextHolder will set the Authentication(UsernamePasswordAuthentication) and fill it with username and password.\nFinally, send redirect to the url &quot;/api/home&quot;.</p>\n<p>There are two roles defined: USER and ADMIN.</p>\n<pre><code>public enum Role {\n\n    USER(Collections.emptySet()),\n\n\n    ADMIN(Set.of(ADMIN_READ,\n            ADMIN_UPDATE, ADMIN_CREATE, ADMIN_DELETE\n    ));\n\n\n    @Getter\n    private final Set&lt;Permission&gt; permissions;\n\n    public List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\n        List&lt;SimpleGrantedAuthority&gt; authorities = new java.util.ArrayList&lt;&gt;(getPermissions().stream()\n                .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\n                .toList());\n        authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\n        return authorities;\n    }\n}\n</code></pre>\n<p>I think it shall be something wrong in the authorities or roles or something. Because when I delete the <code>.hasAnyRole(Role.ADMIN.name(), Role.USER.name())</code> and change it to <code>permitAll()</code></p>\n<p>Additionally, there is no AccessDeniedException threw out, only Http 403 Error on the web page.</p>\n<p>This is my Mysql table:\n'1', 'user1', '$2a$10$faQJhWWffJlvWbN4YDC4tep4TIMDzH3Hze4tH9MMmt6r9NKp49FCe', 'user1@qq.com', 'ADMIN'</p>\n<p>'5', 'user2', '$2a$10$qAZAuvoG.aaEMljYfQirZOhjEUsUZ3edcum/Mhc6UPOc.ti0VD7JO', 'user2@qq.com', 'USER'</p>\n<p>I've tried:</p>\n<p>adding @PreAuthorize(&quot;isAuthenticated()&quot;)on the homePage controller function but does not help.\nand @Secured(&quot;ROLE_USER&quot;) does not help either.\nchanging the column &quot;USER&quot; to &quot;ROLE_USER&quot; in the Mysql table does not help.\nAnd, I changed the <code>.hasAnyRole(Role.ADMIN.name(), Role.USER.name())</code> to <code>.hasAuthority(&quot;ADMIN&quot;)</code>,to\n<code>.hasAuthority(&quot;USER&quot;)</code>,unluckily, they does NOT help.</p>\n<p>What I expected:\nJust tell me the reason for this annoying problem. I wish I can redirect to the /api/home successfully. Thank you very much!</p>\n"},{"tags":["java","cloning"],"answers":[{"tags":[],"owner":{"account_id":1449510,"reputation":48172,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694348511,"creation_date":1353552418,"answer_id":13505207,"question_id":13505147,"body_markdown":"When you do a clone of an `Object &#39;A&#39;`, you are creating a new `Object &#39;B&#39;` (with the same references to objects) but in a different memory address. Thus, when you modify the object &#39;A&#39; you are not accessing the same memory address of the `Object &#39;B&#39;`. Therefore, changes in the clone do not reflect back in the original object and vice-versa.\r\n\r\n\r\n**Shallow Copy**\r\n\r\nGenerally, the clone method of an object, creates a new instance of the same class and copies all the fields to the new instance and returns it. This is nothing but shallow copy. Object class provides a clone method and provides support for the shallow copy. It returns ‘Object’ as the type and you need to explicitly cast back to your original object.\r\n\r\n**Deep Copy**\r\n\r\nWhen you need a deep copy then you need to implement it yourself. When the copied object contains some other object its references are copied recursively in the deep copy. When you implement a deep copy be careful as you might fall for cyclic dependencies. If you don’t want to implement deep copy yourself then you can go for serialization. It does implement deep copy implicitly and gracefully handling cyclic dependencies.\r\n\r\n([source][1] about the information) \r\n\r\nHere an illustrative example:\r\n\r\nShallow\r\n\r\n![Before Copy](https://upload.wikimedia.org/wikipedia/en/thumb/6/6c/Pre_shallow_deep_copy.svg/120px-Pre_shallow_deep_copy.svg.png)\r\n![Shallow Copying](https://upload.wikimedia.org/wikipedia/en/thumb/3/3e/Shallow_copy_in_progress.svg/120px-Shallow_copy_in_progress.svg.png)\r\n![Shallow Done](https://upload.wikimedia.org/wikipedia/en/thumb/e/e1/Shallow_copy_done.svg/120px-Shallow_copy_done.svg.png)\r\n\r\nDeep:\r\n\r\n![Before Copy](https://upload.wikimedia.org/wikipedia/en/thumb/6/6c/Pre_shallow_deep_copy.svg/120px-Pre_shallow_deep_copy.svg.png)\r\n[![Deep Copying][2]][2]  \n&lt;sub&gt;(source: [wikimedia.org][4])&lt;/sub&gt;  \n\r\n[![Deep Done][3]][3]\r\n\r\n\r\n  [1]: https://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/\n [2]: https://i.stack.imgur.com/0hokX.png\n [3]: https://i.stack.imgur.com/QeXVZ.png\n [4]: https://web.archive.org/web/20170126014102/https://upload.wikimedia.org/wikipedia/en/thumb/5/5f/Deep_copy_in_progress.svg/120px-Deep_copy_in_progress.svg.png","title":"Modifying arraylists in a method and pass by value","body":"<p>When you do a clone of an <code>Object 'A'</code>, you are creating a new <code>Object 'B'</code> (with the same references to objects) but in a different memory address. Thus, when you modify the object 'A' you are not accessing the same memory address of the <code>Object 'B'</code>. Therefore, changes in the clone do not reflect back in the original object and vice-versa.</p>\n<p><strong>Shallow Copy</strong></p>\n<p>Generally, the clone method of an object, creates a new instance of the same class and copies all the fields to the new instance and returns it. This is nothing but shallow copy. Object class provides a clone method and provides support for the shallow copy. It returns ‘Object’ as the type and you need to explicitly cast back to your original object.</p>\n<p><strong>Deep Copy</strong></p>\n<p>When you need a deep copy then you need to implement it yourself. When the copied object contains some other object its references are copied recursively in the deep copy. When you implement a deep copy be careful as you might fall for cyclic dependencies. If you don’t want to implement deep copy yourself then you can go for serialization. It does implement deep copy implicitly and gracefully handling cyclic dependencies.</p>\n<p>(<a href=\"https://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/\" rel=\"nofollow noreferrer\">source</a> about the information)</p>\n<p>Here an illustrative example:</p>\n<p>Shallow</p>\n<p><img src=\"https://upload.wikimedia.org/wikipedia/en/thumb/6/6c/Pre_shallow_deep_copy.svg/120px-Pre_shallow_deep_copy.svg.png\" alt=\"Before Copy\" />\n<img src=\"https://upload.wikimedia.org/wikipedia/en/thumb/3/3e/Shallow_copy_in_progress.svg/120px-Shallow_copy_in_progress.svg.png\" alt=\"Shallow Copying\" />\n<img src=\"https://upload.wikimedia.org/wikipedia/en/thumb/e/e1/Shallow_copy_done.svg/120px-Shallow_copy_done.svg.png\" alt=\"Shallow Done\" /></p>\n<p>Deep:</p>\n<p><img src=\"https://upload.wikimedia.org/wikipedia/en/thumb/6/6c/Pre_shallow_deep_copy.svg/120px-Pre_shallow_deep_copy.svg.png\" alt=\"Before Copy\" />\n<a href=\"https://i.stack.imgur.com/0hokX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0hokX.png\" alt=\"Deep Copying\" /></a><br />\n<sub>(source: <a href=\"https://web.archive.org/web/20170126014102/https://upload.wikimedia.org/wikipedia/en/thumb/5/5f/Deep_copy_in_progress.svg/120px-Deep_copy_in_progress.svg.png\" rel=\"nofollow noreferrer\">wikimedia.org</a>)</sub></p>\n<p><a href=\"https://i.stack.imgur.com/QeXVZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QeXVZ.png\" alt=\"Deep Done\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1353553392,"creation_date":1353552584,"answer_id":13505227,"question_id":13505147,"body_markdown":"The whole purpose of a clone is to be *different* than the original - so changes in the clone *are not* reflected in the original. Otherwise, you could just use simple assignment as opposed to cloning.\r\n\r\ne.g.\r\n\r\n    MyClass a = new MyClass();  // some cloneable class\r\n    \r\n    MyClass b = a;  // not a clone, changes to `b` will affect in `a`\r\n                    // assignment duplicates the reference\r\n        -or-\r\n\r\n    MyClass b = a.clone();  // clone, changes to `b` will not affect in `a`\r\n                            // clone duplicates the object\r\n\r\nThere is actually a Wikipedia article on Java cloning [here][1].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Clone_%28Java_method%29","title":"Modifying arraylists in a method and pass by value","body":"<p>The whole purpose of a clone is to be <em>different</em> than the original - so changes in the clone <em>are not</em> reflected in the original. Otherwise, you could just use simple assignment as opposed to cloning.</p>\n\n<p>e.g.</p>\n\n<pre><code>MyClass a = new MyClass();  // some cloneable class\n\nMyClass b = a;  // not a clone, changes to `b` will affect in `a`\n                // assignment duplicates the reference\n    -or-\n\nMyClass b = a.clone();  // clone, changes to `b` will not affect in `a`\n                        // clone duplicates the object\n</code></pre>\n\n<p>There is actually a Wikipedia article on Java cloning <a href=\"http://en.wikipedia.org/wiki/Clone_%28Java_method%29\" rel=\"nofollow\">here</a>.</p>\n"}],"owner":{"account_id":1967259,"reputation":525,"user_id":1767157,"accept_rate":87,"display_name":"Floose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":13505207,"answer_count":2,"score":2,"last_activity_date":1694348511,"creation_date":1353551827,"question_id":13505147,"body_markdown":"I read [this][1] post today about deep copying and had a few questions:\r\n\r\n\r\nIn the first code, the author says adding an (integer) object to a clone does not appear in the original. Why is this so? As I understand, cloning basically creates an object with the same references to objects as the original.\r\n\r\nWhy isn&#39;t a change in the clone reflected back in the original?\r\n\r\nDoesn&#39;t clone share the same reference as the Original?\r\n\r\n\r\n  [1]: http://javatechniques.com/blog/faster-deep-copies-of-java-objects/","title":"Modifying arraylists in a method and pass by value","body":"<p>I read <a href=\"http://javatechniques.com/blog/faster-deep-copies-of-java-objects/\" rel=\"nofollow\">this</a> post today about deep copying and had a few questions:</p>\n\n<p>In the first code, the author says adding an (integer) object to a clone does not appear in the original. Why is this so? As I understand, cloning basically creates an object with the same references to objects as the original.</p>\n\n<p>Why isn't a change in the clone reflected back in the original?</p>\n\n<p>Doesn't clone share the same reference as the Original?</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"score":0,"creation_date":1694354668,"post_id":77075994,"comment_id":135877416,"body_markdown":"What are the contents for the `build-logic/build.gradle`? And how are you applying the convention plugins to a project? Amend your question with those details.","body":"What are the contents for the <code>build-logic&#47;build.gradle</code>? And how are you applying the convention plugins to a project? Amend your question with those details."}],"owner":{"account_id":12491675,"reputation":187,"user_id":9092996,"display_name":"Kush Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694346964,"creation_date":1694346964,"question_id":77075994,"body_markdown":"[![Current build logic structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UEWJu.png\r\nThe above is my current build logic structure, when I try to apply shared dependencies in `java-common-conventions.gradle` the build complains.\r\n\r\nalso I&#39;m unable to apply spring boot plugins like so:\r\n\r\n```plugins {\r\n    // Apply the java Plugin to add support for Java.\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.10&#39;\r\n}\r\n```\r\n\r\nerror:  \r\n`\r\nInvalid plugin request [id: &#39;org.springframework.boot&#39;, version: &#39;2.7.10&#39;]. Plugin requests from precompiled scripts must not include a version number. Please remove the version from the offending request and make sure the module containing the requested plugin &#39;org.springframework.boot&#39; is an implementation dependency\r\n`\r\nit does work if I define it in every subproject&#39;s `build.gradle`\r\n\r\nhow do I shared dependencies and how/where do I define the `subproject` &amp; allproject closures?","title":"where do i define shared dependencies in gradle 8 structure?","body":"<p><a href=\"https://i.stack.imgur.com/UEWJu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UEWJu.png\" alt=\"Current build logic structure\" /></a></p>\n<p>The above is my current build logic structure, when I try to apply shared dependencies in <code>java-common-conventions.gradle</code> the build complains.</p>\n<p>also I'm unable to apply spring boot plugins like so:</p>\n<pre><code>    // Apply the java Plugin to add support for Java.\n    id 'java'\n    id 'org.springframework.boot' version '2.7.10'\n}\n</code></pre>\n<p>error:<br />\n<code>Invalid plugin request [id: 'org.springframework.boot', version: '2.7.10']. Plugin requests from precompiled scripts must not include a version number. Please remove the version from the offending request and make sure the module containing the requested plugin 'org.springframework.boot' is an implementation dependency</code>\nit does work if I define it in every subproject's <code>build.gradle</code></p>\n<p>how do I shared dependencies and how/where do I define the <code>subproject</code> &amp; allproject closures?</p>\n"},{"tags":["java","keycloak","keycloak-spi"],"comments":[{"owner":{"account_id":6825031,"reputation":151,"user_id":5250989,"display_name":"Silvio"},"score":0,"creation_date":1694342640,"post_id":75470097,"comment_id":135876249,"body_markdown":"Same problem here.","body":"Same problem here."}],"answers":[{"tags":[],"owner":{"account_id":6825031,"reputation":151,"user_id":5250989,"display_name":"Silvio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694346599,"creation_date":1694346599,"answer_id":77075975,"question_id":75470097,"body_markdown":"I had the same problem.\r\n\r\nThe solution for me was that the getUserByUsername had to throw an error for addUser to be called. So in my case if I returned a 404 from my API if user is not found then addUser was called.","title":"Keycloak add user from custom user provider","body":"<p>I had the same problem.</p>\n<p>The solution for me was that the getUserByUsername had to throw an error for addUser to be called. So in my case if I returned a 404 from my API if user is not found then addUser was called.</p>\n"}],"owner":{"account_id":14824442,"reputation":21,"user_id":10705782,"display_name":"MrDeliK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694346599,"creation_date":1676539238,"question_id":75470097,"body_markdown":"I&#39;m creating a custom user storage using the [User storage SPI](https://www.keycloak.org/docs/latest/server_development/index.html#add-remove-user-and-query-capability-interfaces)\r\n\r\nMy problem here is that that addUser function is not called.\r\nWhen i try to add a user, the function `getUserByNickName` is directly called but do not find any user.","title":"Keycloak add user from custom user provider","body":"<p>I'm creating a custom user storage using the <a href=\"https://www.keycloak.org/docs/latest/server_development/index.html#add-remove-user-and-query-capability-interfaces\" rel=\"nofollow noreferrer\">User storage SPI</a></p>\n<p>My problem here is that that addUser function is not called.\nWhen i try to add a user, the function <code>getUserByNickName</code> is directly called but do not find any user.</p>\n"},{"tags":["java","spring-boot","forms","spring-mvc"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1694409656,"post_id":77075885,"comment_id":135882111,"body_markdown":"To post data &amp; files, you can try [this](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954). To generate directory to upload files to you can try [this](https://stackoverflow.com/questions/76962580/spring-boot-jar-deploy-file-upload-system/76977184#76977184)","body":"To post data &amp; files, you can try <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">this</a>. To generate directory to upload files to you can try <a href=\"https://stackoverflow.com/questions/76962580/spring-boot-jar-deploy-file-upload-system/76977184#76977184\">this</a>"}],"owner":{"account_id":29406648,"reputation":1,"user_id":22531851,"display_name":"Владислав Бучченко"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694345180,"creation_date":1694344816,"question_id":77075885,"body_markdown":"My DB `Day` model has fields: timestamp such as id, description, content, steps, mainImage. The constructor is empty with default values ​​if there is no such timestamp in the database. &quot;non-empty&quot; if timestamp is in BD, getters/setters. There is a view `full_day.html` with info and an Edit Day button. When clicked Edit, a modal window opens with a form for changing the day using the &quot;Save&quot; button.\r\n\r\nIn short, I want my user to add an image to a form (and some other things) and the image file goes to the /static/images/ and the file name goes to the MySQL Table. What are the ideas to do?\r\n\r\n(It is the details of the info I described above)\r\n\r\n**CalendarController.java**:\r\n```java\r\n// Other methods\r\n@GetMapping(&quot;/{year}/{month}/{dayNumber}&quot;)\r\npublic String day(Model model,\r\n                  @PathVariable int year,\r\n                  @PathVariable String month,\r\n                  @PathVariable int dayNumber) {\r\n\r\n    long timestamp = convertToDateTimestamp(year, month, dayNumber);\r\n\r\n    Optional&lt;Day&gt; gotDay = dayRepository.findById(timestamp);\r\n    ArrayList&lt;Day&gt; currentDay = new ArrayList&lt;&gt;();\r\n\r\n    gotDay.ifPresent(currentDay::add);\r\n\r\n    model.addAttribute(&quot;gotDay&quot;, gotDay);\r\n    model.addAttribute(&quot;currentDay&quot;, currentDay);\r\n    model.addAttribute(&quot;year&quot;, year);\r\n    model.addAttribute(&quot;month&quot;, month);\r\n    model.addAttribute(&quot;dayNumber&quot;, dayNumber);\r\n    return &quot;full_day&quot;;\r\n}\r\n\r\n@PostMapping(&quot;/{year}/{month}/{dayNumber}&quot;)\r\npublic String saveDay(Model model,\r\n                      @ModelAttribute(&quot;gotDay&quot;) Day currentDay,\r\n                      @PathVariable int year,\r\n                      @PathVariable String month,\r\n                      @PathVariable int dayNumber\r\n) {\r\n\r\n    currentDay.setTimestamp(convertToDateTimestamp(year, month, dayNumber));\r\n    dayRepository.save(currentDay);\r\n\r\n    return &quot;redirect:/calendar/&quot; + year + &quot;/&quot; + month + &quot;/&quot; + dayNumber;\r\n}\r\n```\r\n\r\n**Day.java:**\r\n```java\r\n@Entity\r\n@Table(schema = &quot;memoryfulday&quot;, name = &quot;memoryful&quot;)\r\npublic class Day {\r\n    @Id\r\n    private Long timestamp;\r\n    private String description, content;\r\n    private int steps;\r\n    private String mainImage;\r\n//    private MultipartFile mainImage;\r\n\r\n    public Day(Long timestamp) {\r\n        this.timestamp = timestamp;\r\n        this.mainImage = &quot;NoPhoto.png&quot;;\r\n        this.description = &quot;No brief description&quot;;\r\n        this.steps = 0;\r\n        this.content = &quot;No content&quot;;\r\n    }\r\n\r\n    public Day(Long timestamp, String mainImage, String description, String content, int steps) {\r\n        this.timestamp = timestamp;\r\n        this.mainImage = mainImage;\r\n        this.description = description;\r\n        this.content = content;\r\n        this.steps = steps;\r\n    }\r\n\r\n    // toString()\r\n    // getters/setters\r\n}\r\n```\r\n**full_day.html:**\r\n```html\r\n&lt;!-- some code --&gt;\r\n&lt;div id=&quot;edit-modal&quot; class=&quot;edit-modal&quot;&gt;\r\n    &lt;div class=&quot;edit-content&quot;&gt;\r\n        &lt;span class=&quot;close&quot;&gt;&amp;times;&lt;/span&gt;\r\n        &lt;h2&gt;Edit Day Window&lt;/h2&gt;\r\n\r\n        &lt;form method=&quot;post&quot; th:object=&quot;${gotDay}&quot;&gt;\r\n            &lt;label for=&quot;steps&quot;&gt;Daily steps&lt;/label&gt;\r\n            &lt;input value=&quot;${day.steps}&quot; th:field=&quot;*{steps}&quot; id=&quot;steps&quot; type=&quot;number&quot; tabindex=&quot;1&quot; placeholder=&quot;10000&quot;&gt;\r\n\r\n            &lt;label for=&quot;description&quot;&gt;Description&lt;/label&gt;\r\n            &lt;input value=&quot;${day.description}&quot; th:field=&quot;*{description}&quot; id=&quot;description&quot; type=&quot;text&quot; tabindex=&quot;2&quot; placeholder=&quot;Enter day&#39;s description&quot;&gt;\r\n\r\n            &lt;label for=&quot;content&quot;&gt;Content&lt;/label&gt;\r\n            &lt;textarea th:text=&quot;${day.content}&quot; th:field=&quot;*{content}&quot; id=&quot;content&quot; tabindex=&quot;3&quot; placeholder=&quot;Enter day&#39;s content&quot;&gt;&lt;/textarea&gt;\r\n            &lt;input type=&quot;submit&quot; tabindex=&quot;4&quot; class=&quot;left-right&quot; id=&quot;editSubmit&quot; value=&quot;Save&quot;&gt;\r\n        &lt;/form&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n// some js to interract with modal window\r\n```\r\n\r\nI watched videos, searched info in websites, but I didn&#39;t find what I wanted. I tried some code that ChatGPT wrote for me, but it couldn&#39;t help me.","title":"Add an image from &lt;input type=&quot;file&quot;&gt; through &lt;form method=&quot;post&quot;&gt; to the /static/images and the name of the image to MySQL","body":"<p>My DB <code>Day</code> model has fields: timestamp such as id, description, content, steps, mainImage. The constructor is empty with default values ​​if there is no such timestamp in the database. &quot;non-empty&quot; if timestamp is in BD, getters/setters. There is a view <code>full_day.html</code> with info and an Edit Day button. When clicked Edit, a modal window opens with a form for changing the day using the &quot;Save&quot; button.</p>\n<p>In short, I want my user to add an image to a form (and some other things) and the image file goes to the /static/images/ and the file name goes to the MySQL Table. What are the ideas to do?</p>\n<p>(It is the details of the info I described above)</p>\n<p><strong>CalendarController.java</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Other methods\n@GetMapping(&quot;/{year}/{month}/{dayNumber}&quot;)\npublic String day(Model model,\n                  @PathVariable int year,\n                  @PathVariable String month,\n                  @PathVariable int dayNumber) {\n\n    long timestamp = convertToDateTimestamp(year, month, dayNumber);\n\n    Optional&lt;Day&gt; gotDay = dayRepository.findById(timestamp);\n    ArrayList&lt;Day&gt; currentDay = new ArrayList&lt;&gt;();\n\n    gotDay.ifPresent(currentDay::add);\n\n    model.addAttribute(&quot;gotDay&quot;, gotDay);\n    model.addAttribute(&quot;currentDay&quot;, currentDay);\n    model.addAttribute(&quot;year&quot;, year);\n    model.addAttribute(&quot;month&quot;, month);\n    model.addAttribute(&quot;dayNumber&quot;, dayNumber);\n    return &quot;full_day&quot;;\n}\n\n@PostMapping(&quot;/{year}/{month}/{dayNumber}&quot;)\npublic String saveDay(Model model,\n                      @ModelAttribute(&quot;gotDay&quot;) Day currentDay,\n                      @PathVariable int year,\n                      @PathVariable String month,\n                      @PathVariable int dayNumber\n) {\n\n    currentDay.setTimestamp(convertToDateTimestamp(year, month, dayNumber));\n    dayRepository.save(currentDay);\n\n    return &quot;redirect:/calendar/&quot; + year + &quot;/&quot; + month + &quot;/&quot; + dayNumber;\n}\n</code></pre>\n<p><strong>Day.java:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(schema = &quot;memoryfulday&quot;, name = &quot;memoryful&quot;)\npublic class Day {\n    @Id\n    private Long timestamp;\n    private String description, content;\n    private int steps;\n    private String mainImage;\n//    private MultipartFile mainImage;\n\n    public Day(Long timestamp) {\n        this.timestamp = timestamp;\n        this.mainImage = &quot;NoPhoto.png&quot;;\n        this.description = &quot;No brief description&quot;;\n        this.steps = 0;\n        this.content = &quot;No content&quot;;\n    }\n\n    public Day(Long timestamp, String mainImage, String description, String content, int steps) {\n        this.timestamp = timestamp;\n        this.mainImage = mainImage;\n        this.description = description;\n        this.content = content;\n        this.steps = steps;\n    }\n\n    // toString()\n    // getters/setters\n}\n</code></pre>\n<p><strong>full_day.html:</strong></p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- some code --&gt;\n&lt;div id=&quot;edit-modal&quot; class=&quot;edit-modal&quot;&gt;\n    &lt;div class=&quot;edit-content&quot;&gt;\n        &lt;span class=&quot;close&quot;&gt;&amp;times;&lt;/span&gt;\n        &lt;h2&gt;Edit Day Window&lt;/h2&gt;\n\n        &lt;form method=&quot;post&quot; th:object=&quot;${gotDay}&quot;&gt;\n            &lt;label for=&quot;steps&quot;&gt;Daily steps&lt;/label&gt;\n            &lt;input value=&quot;${day.steps}&quot; th:field=&quot;*{steps}&quot; id=&quot;steps&quot; type=&quot;number&quot; tabindex=&quot;1&quot; placeholder=&quot;10000&quot;&gt;\n\n            &lt;label for=&quot;description&quot;&gt;Description&lt;/label&gt;\n            &lt;input value=&quot;${day.description}&quot; th:field=&quot;*{description}&quot; id=&quot;description&quot; type=&quot;text&quot; tabindex=&quot;2&quot; placeholder=&quot;Enter day's description&quot;&gt;\n\n            &lt;label for=&quot;content&quot;&gt;Content&lt;/label&gt;\n            &lt;textarea th:text=&quot;${day.content}&quot; th:field=&quot;*{content}&quot; id=&quot;content&quot; tabindex=&quot;3&quot; placeholder=&quot;Enter day's content&quot;&gt;&lt;/textarea&gt;\n            &lt;input type=&quot;submit&quot; tabindex=&quot;4&quot; class=&quot;left-right&quot; id=&quot;editSubmit&quot; value=&quot;Save&quot;&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n// some js to interract with modal window\n</code></pre>\n<p>I watched videos, searched info in websites, but I didn't find what I wanted. I tried some code that ChatGPT wrote for me, but it couldn't help me.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1694342229,"post_id":77075732,"comment_id":135876205,"body_markdown":"Threads run instructions and are mapped to cores. One thread is associated with at most one core at any one point in time. Therefore, each instruction is associated with exactly on e thread. Each instruction is executed on exactly one core, therefore bound to exactly one thread. `Thread.currentThread()` is the thread that executes the current statement (or thread of executions, to be precise).","body":"Threads run instructions and are mapped to cores. One thread is associated with at most one core at any one point in time. Therefore, each instruction is associated with exactly on e thread. Each instruction is executed on exactly one core, therefore bound to exactly one thread. <code>Thread.currentThread()</code> is the thread that executes the current statement (or thread of executions, to be precise)."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1694342629,"post_id":77075732,"comment_id":135876247,"body_markdown":"it is just the same `Thread` that is calling the `sleep` method (this is not necessarily related (directly) to any core)","body":"it is just the same <code>Thread</code> that is calling the <code>sleep</code> method (this is not necessarily related (directly) to any core)"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1694342895,"post_id":77075732,"comment_id":135876277,"body_markdown":"The call to method `currentThread()` is executed on a specific thread, that thread is identified through native code and returned.","body":"The call to method <code>currentThread()</code> is executed on a specific thread, that thread is identified through native code and returned."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1694343198,"post_id":77075732,"comment_id":135876323,"body_markdown":"You might want to look at how threading is implemented for a given OS (e.g. libc in Linux).","body":"You might want to look at how threading is implemented for a given OS (e.g. libc in Linux)."}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694345147,"creation_date":1694345147,"answer_id":77075906,"question_id":77075732,"body_markdown":"&quot;Current thread&quot; does not mean what you think it means. What it means is, the thread that called the `Thread.currentThread()` function. The name is left over from ancient times when computers only had one CPU each. In those days, only one thread could be &quot;current,&quot; and so the thread that called the function and the current thread were one and the same. ","title":"Thread.currentThread in case of parallel threads","body":"<p>&quot;Current thread&quot; does not mean what you think it means. What it means is, the thread that called the <code>Thread.currentThread()</code> function. The name is left over from ancient times when computers only had one CPU each. In those days, only one thread could be &quot;current,&quot; and so the thread that called the function and the current thread were one and the same.</p>\n"}],"owner":{"account_id":2846397,"reputation":6438,"user_id":2444661,"accept_rate":55,"display_name":"Mandroid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77075906,"answer_count":1,"score":1,"last_activity_date":1694345147,"creation_date":1694342054,"question_id":77075732,"body_markdown":"Current implementation of Thread.sleep is:\r\n\r\n    public static void sleep(long millis) throws InterruptedException {\r\n        if (millis &lt; 0L) {\r\n            throw new IllegalArgumentException(&quot;timeout value is negative&quot;);\r\n        } else {\r\n            Thread var3 = currentThread();\r\n    .....\r\n\r\ncurrentThread is native method.\r\nIn a multi-core system we can have multiple threads actually running at same time.\r\n\r\nHow is current thread then decided?","title":"Thread.currentThread in case of parallel threads","body":"<p>Current implementation of Thread.sleep is:</p>\n<pre><code>public static void sleep(long millis) throws InterruptedException {\n    if (millis &lt; 0L) {\n        throw new IllegalArgumentException(&quot;timeout value is negative&quot;);\n    } else {\n        Thread var3 = currentThread();\n.....\n</code></pre>\n<p>currentThread is native method.\nIn a multi-core system we can have multiple threads actually running at same time.</p>\n<p>How is current thread then decided?</p>\n"},{"tags":["java","maven","graphql","runtime-error","micronaut"],"owner":{"account_id":4145529,"reputation":33,"user_id":3399383,"display_name":"user3399383"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694345101,"creation_date":1694345101,"question_id":77075901,"body_markdown":"I currently have an existing Micronaut server project that containing multiple endpoints. I&#39;m considering incorporating an additional GraphQL endpoint and introducing management endpoints for a new feature. However, whenever I add one of these dependencies (micronaut-graphql or micronaut-management), the software fails to start and consistently generates the following error message:\r\n\r\n```\r\n←[36m13:12:08.804←[0;39m ←[1;30m[main]←[0;39m ←[1;31mERROR←[0;39m ←[35mio.micronaut.runtime.Micronaut←[0;39m - Error starting Micronaut server: Error instantiating bean of type  [io.micronaut.web.router.DefaultRouter]\r\n\r\nMessage: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\r\nPath Taken: NettyEmbeddedServer.buildDefaultServer(NettyHttpServerConfiguration configuration) --&gt; new DefaultNettyEmbeddedServerFactory(ApplicationContext applicationContext,[RouteExecutor routeExecutor],MediaTypeCodecRegistry mediaTypeCodecRegistry,StaticResourceResolver staticResourceResolver,ThreadFactory nettyThreadFactory,HttpCompressionStrategy httpCompressionStrategy,EventLoopGroupFactory eventLoopGroupFactory,EventLoopGroupRegistry eventLoopGroupRegistry) --&gt; new RouteExecutor([Router router],BeanContext beanContext,RequestArgumentSatisfier requestArgumentSatisfier,HttpServerConfiguration serverConfiguration,ErrorResponseProcessor errorResponseProcessor,ExecutorSelector executorSelector) --&gt; new DefaultRouter([Collection builders])\r\nio.micronaut.context.exceptions.BeanInstantiationException: Error instantiating bean of type  [io.micronaut.web.router.DefaultRouter]\r\n\r\nMessage: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\r\nPath Taken: NettyEmbeddedServer.buildDefaultServer(NettyHttpServerConfiguration configuration) --&gt; new DefaultNettyEmbeddedServerFactory(ApplicationContext applicationContext,[RouteExecutor routeExecutor],MediaTypeCodecRegistry mediaTypeCodecRegistry,StaticResourceResolver staticResourceResolver,ThreadFactory nettyThreadFactory,HttpCompressionStrategy httpCompressionStrategy,EventLoopGroupFactory eventLoopGroupFactory,EventLoopGroupRegistry eventLoopGroupRegistry) --&gt; new RouteExecutor([Router router],BeanContext beanContext,RequestArgumentSatisfier requestArgumentSatisfier,HttpServerConfiguration serverConfiguration,ErrorResponseProcessor errorResponseProcessor,ExecutorSelector executorSelector) --&gt; new DefaultRouter([Collection builders])\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2367)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2853)\r\n        at io.micronaut.context.DefaultBeanContext.addCandidateToList(DefaultBeanContext.java:3511)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistrations(DefaultBeanContext.java:3457)\r\n        at io.micronaut.context.DefaultBeanContext.getBeanRegistrations(DefaultBeanContext.java:3427)\r\n        at io.micronaut.context.DefaultBeanContext.getBeansOfType(DefaultBeanContext.java:1381)\r\n        at io.micronaut.context.AbstractBeanResolutionContext.getBeansOfType(AbstractBeanResolutionContext.java:72)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBeansOfType(AbstractInitializableBeanDefinition.java:2161)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeansOfTypeForConstructorArgument(AbstractInitializableBeanDefinition.java:1437)\r\n        at io.micronaut.web.router.$DefaultRouter$Definition.build(Unknown Source)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\r\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\r\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\r\n        at io.micronaut.http.server.$RouteExecutor$Definition.build(Unknown Source)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\r\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\r\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\r\n        at io.micronaut.http.server.netty.$DefaultNettyEmbeddedServerFactory$Definition.build(Unknown Source)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\r\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\r\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1599)\r\n        at io.micronaut.http.server.netty.$DefaultNettyEmbeddedServerFactory$BuildDefaultServer0$Definition.build(Unknown Source)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\r\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:1680)\r\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:1655)\r\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:878)\r\n        at io.micronaut.context.BeanLocator.findBean(BeanLocator.java:291)\r\n        at io.micronaut.runtime.Micronaut.start(Micronaut.java:77)\r\n        at io.micronaut.runtime.Micronaut.run(Micronaut.java:323)\r\n        at io.micronaut.runtime.Micronaut.run(Micronaut.java:309)\r\n        at demo.Main.main(Main.java:10)\r\nCaused by: java.lang.UnsupportedOperationException: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\r\n        at io.micronaut.context.NoInjectionBeanDefinition.getConstructor(NoInjectionBeanDefinition.java:131)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanDefinition(DefaultBeanContext.java:2315)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2307)\r\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\r\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\r\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\r\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\r\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\r\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\r\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\r\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\r\n        at io.micronaut.management.endpoint.processors.$DeleteEndpointRouteBuilder$Definition.build(Unknown Source)\r\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\r\n        ... 68 common frames omitted\r\n```\r\n\r\n\r\nFor reproducing the problem I created a small example project here (without having the dependencies and tests for /health and /graphql enabled here:\r\n\r\n[GitHub Repo](https://github.com/HPIMartin/MicronautDemo/tree/main)\r\n\r\nIf the dependencies are added the tests are green but if I build the jar file e.g. using the provided dockerfile the resulting jar is failing.","title":"Micronaut - Exception: manualy registered singleton by adding framework dependecy","body":"<p>I currently have an existing Micronaut server project that containing multiple endpoints. I'm considering incorporating an additional GraphQL endpoint and introducing management endpoints for a new feature. However, whenever I add one of these dependencies (micronaut-graphql or micronaut-management), the software fails to start and consistently generates the following error message:</p>\n<pre><code>←[36m13:12:08.804←[0;39m ←[1;30m[main]←[0;39m ←[1;31mERROR←[0;39m ←[35mio.micronaut.runtime.Micronaut←[0;39m - Error starting Micronaut server: Error instantiating bean of type  [io.micronaut.web.router.DefaultRouter]\n\nMessage: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\nPath Taken: NettyEmbeddedServer.buildDefaultServer(NettyHttpServerConfiguration configuration) --&gt; new DefaultNettyEmbeddedServerFactory(ApplicationContext applicationContext,[RouteExecutor routeExecutor],MediaTypeCodecRegistry mediaTypeCodecRegistry,StaticResourceResolver staticResourceResolver,ThreadFactory nettyThreadFactory,HttpCompressionStrategy httpCompressionStrategy,EventLoopGroupFactory eventLoopGroupFactory,EventLoopGroupRegistry eventLoopGroupRegistry) --&gt; new RouteExecutor([Router router],BeanContext beanContext,RequestArgumentSatisfier requestArgumentSatisfier,HttpServerConfiguration serverConfiguration,ErrorResponseProcessor errorResponseProcessor,ExecutorSelector executorSelector) --&gt; new DefaultRouter([Collection builders])\nio.micronaut.context.exceptions.BeanInstantiationException: Error instantiating bean of type  [io.micronaut.web.router.DefaultRouter]\n\nMessage: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\nPath Taken: NettyEmbeddedServer.buildDefaultServer(NettyHttpServerConfiguration configuration) --&gt; new DefaultNettyEmbeddedServerFactory(ApplicationContext applicationContext,[RouteExecutor routeExecutor],MediaTypeCodecRegistry mediaTypeCodecRegistry,StaticResourceResolver staticResourceResolver,ThreadFactory nettyThreadFactory,HttpCompressionStrategy httpCompressionStrategy,EventLoopGroupFactory eventLoopGroupFactory,EventLoopGroupRegistry eventLoopGroupRegistry) --&gt; new RouteExecutor([Router router],BeanContext beanContext,RequestArgumentSatisfier requestArgumentSatisfier,HttpServerConfiguration serverConfiguration,ErrorResponseProcessor errorResponseProcessor,ExecutorSelector executorSelector) --&gt; new DefaultRouter([Collection builders])\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2367)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2853)\n        at io.micronaut.context.DefaultBeanContext.addCandidateToList(DefaultBeanContext.java:3511)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistrations(DefaultBeanContext.java:3457)\n        at io.micronaut.context.DefaultBeanContext.getBeanRegistrations(DefaultBeanContext.java:3427)\n        at io.micronaut.context.DefaultBeanContext.getBeansOfType(DefaultBeanContext.java:1381)\n        at io.micronaut.context.AbstractBeanResolutionContext.getBeansOfType(AbstractBeanResolutionContext.java:72)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBeansOfType(AbstractInitializableBeanDefinition.java:2161)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeansOfTypeForConstructorArgument(AbstractInitializableBeanDefinition.java:1437)\n        at io.micronaut.web.router.$DefaultRouter$Definition.build(Unknown Source)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\n        at io.micronaut.http.server.$RouteExecutor$Definition.build(Unknown Source)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\n        at io.micronaut.http.server.netty.$DefaultNettyEmbeddedServerFactory$Definition.build(Unknown Source)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1599)\n        at io.micronaut.http.server.netty.$DefaultNettyEmbeddedServerFactory$BuildDefaultServer0$Definition.build(Unknown Source)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2305)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:1680)\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:1655)\n        at io.micronaut.context.DefaultBeanContext.findBean(DefaultBeanContext.java:878)\n        at io.micronaut.context.BeanLocator.findBean(BeanLocator.java:291)\n        at io.micronaut.runtime.Micronaut.start(Micronaut.java:77)\n        at io.micronaut.runtime.Micronaut.run(Micronaut.java:323)\n        at io.micronaut.runtime.Micronaut.run(Micronaut.java:309)\n        at demo.Main.main(Main.java:10)\nCaused by: java.lang.UnsupportedOperationException: Bean of type [class io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment] is a manually registered singleton that was registered with the context via BeanContext.registerBean(..) and cannot be created directly\n        at io.micronaut.context.NoInjectionBeanDefinition.getConstructor(NoInjectionBeanDefinition.java:131)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanDefinition(DefaultBeanContext.java:2315)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2307)\n        at io.micronaut.context.DefaultBeanContext.doCreateBean(DefaultBeanContext.java:2251)\n        at io.micronaut.context.DefaultBeanContext.createRegistration(DefaultBeanContext.java:3016)\n        at io.micronaut.context.SingletonScope.getOrCreate(SingletonScope.java:80)\n        at io.micronaut.context.DefaultBeanContext.findOrCreateSingletonBeanRegistration(DefaultBeanContext.java:2918)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2879)\n        at io.micronaut.context.DefaultBeanContext.resolveBeanRegistration(DefaultBeanContext.java:2800)\n        at io.micronaut.context.DefaultBeanContext.getBean(DefaultBeanContext.java:1617)\n        at io.micronaut.context.AbstractBeanResolutionContext.getBean(AbstractBeanResolutionContext.java:66)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.resolveBean(AbstractInitializableBeanDefinition.java:2065)\n        at io.micronaut.context.AbstractInitializableBeanDefinition.getBeanForConstructorArgument(AbstractInitializableBeanDefinition.java:1297)\n        at io.micronaut.management.endpoint.processors.$DeleteEndpointRouteBuilder$Definition.build(Unknown Source)\n        at io.micronaut.context.DefaultBeanContext.resolveByBeanFactory(DefaultBeanContext.java:2354)\n        ... 68 common frames omitted\n</code></pre>\n<p>For reproducing the problem I created a small example project here (without having the dependencies and tests for /health and /graphql enabled here:</p>\n<p><a href=\"https://github.com/HPIMartin/MicronautDemo/tree/main\" rel=\"nofollow noreferrer\">GitHub Repo</a></p>\n<p>If the dependencies are added the tests are green but if I build the jar file e.g. using the provided dockerfile the resulting jar is failing.</p>\n"},{"tags":["java","video","android-framelayout","mediacontroller"],"owner":{"account_id":29257311,"reputation":21,"user_id":22415222,"display_name":"Arianna Garaglia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694344261,"creation_date":1694344261,"question_id":77075852,"body_markdown":"I&#39;m trying to view videos in my app, but the problem is that the media controller doesn&#39;t stay docked to the video. In fact, if I scroll down the page, the media controller of the first video is located on the buttons\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nthe code of the adapter is this:\r\n\r\n```\r\npublic void onBindViewHolder(@NonNull VideoViewHolder holder, int position) {\r\n        String videoURL = videoURLs.get(position);\r\n\r\n        VideoView videoView = holder.videoView;\r\n        FrameLayout customMediaController = holder.customMediaController;\r\n\r\n        // crea un mediaController personalizzato\r\n        MediaController mediaController = new MediaController(holder.itemView.getContext());\r\n        // collega la VideoView al MediaController\r\n        mediaController.setAnchorView(videoView);\r\n        // imposta il MediaController per la VideoView\r\n        videoView.setMediaController(mediaController);\r\n\r\n        // gestione manuale della posizione del MediaController\r\n        FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(\r\n                FrameLayout.LayoutParams.WRAP_CONTENT,\r\n                FrameLayout.LayoutParams.WRAP_CONTENT\r\n        );\r\n        layoutParams.gravity = Gravity.CENTER;\r\n        customMediaController.setLayoutParams(layoutParams);\r\n\r\n        .......\r\n    } \r\n```\r\n\r\nthe code of the xml file is this:\r\n\r\n```\r\n&lt;RelativeLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginTop=&quot;10dp&quot;&gt;\r\n\r\n    &lt;!-- Pulsante Play --&gt;\r\n    &lt;Button\r\n        android:id=&quot;@+id/playButton&quot;\r\n        android:layout_width=&quot;@dimen/larghezza_bottone_piccolo&quot;\r\n        android:layout_height=&quot;@dimen/altezza_bottone_piccolo&quot;\r\n        android:text=&quot;@string/avvia&quot;\r\n        android:layout_marginTop=&quot;3dp&quot;\r\n        android:layout_marginStart=&quot;50dp&quot; /&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/video_container&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_below=&quot;@+id/playButton&quot;&gt;\r\n\r\n        &lt;VideoView\r\n            android:id=&quot;@+id/videoView&quot;\r\n            android:layout_width=&quot;300dp&quot;\r\n            android:layout_height=&quot;300dp&quot;\r\n            /&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/custom_media_controller&quot;\r\n            android:layout_width=&quot;300dp&quot;\r\n            android:layout_height=&quot;300dp&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=&quot;@+id/deleteButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:src=&quot;@drawable/delete_icon&quot;\r\n        android:contentDescription=&quot;@string/elimina&quot;\r\n        android:layout_marginTop=&quot;3dp&quot;\r\n        android:layout_marginStart=&quot;20dp&quot;\r\n        android:layout_toRightOf=&quot;@+id/playButton&quot;/&gt;\r\n\r\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=&quot;@+id/downloadButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:src=&quot;@drawable/baseline_download_24&quot;\r\n        android:contentDescription=&quot;@string/download&quot;\r\n        android:layout_marginTop=&quot;3dp&quot;\r\n        android:layout_toRightOf=&quot;@+id/deleteButton&quot;\r\n        android:layout_marginStart=&quot;20dp&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nI can&#39;t solve this problem, i&#39;ve tried so many things\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UiTJz.jpg","title":"mediacontroller not anchored to video frame layout","body":"<p>I'm trying to view videos in my app, but the problem is that the media controller doesn't stay docked to the video. In fact, if I scroll down the page, the media controller of the first video is located on the buttons</p>\n<p><a href=\"https://i.stack.imgur.com/UiTJz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UiTJz.jpg\" alt=\"enter image description here\" /></a></p>\n<p>the code of the adapter is this:</p>\n<pre><code>public void onBindViewHolder(@NonNull VideoViewHolder holder, int position) {\n        String videoURL = videoURLs.get(position);\n\n        VideoView videoView = holder.videoView;\n        FrameLayout customMediaController = holder.customMediaController;\n\n        // crea un mediaController personalizzato\n        MediaController mediaController = new MediaController(holder.itemView.getContext());\n        // collega la VideoView al MediaController\n        mediaController.setAnchorView(videoView);\n        // imposta il MediaController per la VideoView\n        videoView.setMediaController(mediaController);\n\n        // gestione manuale della posizione del MediaController\n        FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(\n                FrameLayout.LayoutParams.WRAP_CONTENT,\n                FrameLayout.LayoutParams.WRAP_CONTENT\n        );\n        layoutParams.gravity = Gravity.CENTER;\n        customMediaController.setLayoutParams(layoutParams);\n\n        .......\n    } \n</code></pre>\n<p>the code of the xml file is this:</p>\n<pre><code>&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginTop=&quot;10dp&quot;&gt;\n\n    &lt;!-- Pulsante Play --&gt;\n    &lt;Button\n        android:id=&quot;@+id/playButton&quot;\n        android:layout_width=&quot;@dimen/larghezza_bottone_piccolo&quot;\n        android:layout_height=&quot;@dimen/altezza_bottone_piccolo&quot;\n        android:text=&quot;@string/avvia&quot;\n        android:layout_marginTop=&quot;3dp&quot;\n        android:layout_marginStart=&quot;50dp&quot; /&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/video_container&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;10dp&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_below=&quot;@+id/playButton&quot;&gt;\n\n        &lt;VideoView\n            android:id=&quot;@+id/videoView&quot;\n            android:layout_width=&quot;300dp&quot;\n            android:layout_height=&quot;300dp&quot;\n            /&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/custom_media_controller&quot;\n            android:layout_width=&quot;300dp&quot;\n            android:layout_height=&quot;300dp&quot;&gt;\n        &lt;/FrameLayout&gt;\n    &lt;/FrameLayout&gt;\n\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n        android:id=&quot;@+id/deleteButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/delete_icon&quot;\n        android:contentDescription=&quot;@string/elimina&quot;\n        android:layout_marginTop=&quot;3dp&quot;\n        android:layout_marginStart=&quot;20dp&quot;\n        android:layout_toRightOf=&quot;@+id/playButton&quot;/&gt;\n\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n        android:id=&quot;@+id/downloadButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/baseline_download_24&quot;\n        android:contentDescription=&quot;@string/download&quot;\n        android:layout_marginTop=&quot;3dp&quot;\n        android:layout_toRightOf=&quot;@+id/deleteButton&quot;\n        android:layout_marginStart=&quot;20dp&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>I can't solve this problem, i've tried so many things</p>\n"},{"tags":["java","concurrency","thread-safety","synchronized"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1694333058,"post_id":77072580,"comment_id":135875355,"body_markdown":"Don&#39;t put your questions into the comments. You can see for yourself that they are almost invisible. Put them into the text part of your question.","body":"Don&#39;t put your questions into the comments. You can see for yourself that they are almost invisible. Put them into the text part of your question."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694329438,"creation_date":1694268756,"answer_id":77072609,"question_id":77072580,"body_markdown":"You are ignoring the return value of `putIfAbsent` which would allow you to return consistent values. \r\n\r\nHowever you can replace most of the method by a single call to\r\n\r\n    return map.computeIfAbsent(name, key -&gt; new Item());","title":"Thread Safety in operations involving ConcurrentHashMap in Java","body":"<p>You are ignoring the return value of <code>putIfAbsent</code> which would allow you to return consistent values.</p>\n<p>However you can replace most of the method by a single call to</p>\n<pre><code>return map.computeIfAbsent(name, key -&gt; new Item());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12635385,"reputation":527,"user_id":9185029,"display_name":"Alexander Katsenelenbogen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694273171,"creation_date":1694273171,"answer_id":77072879,"question_id":77072580,"body_markdown":"As written, your method is not threadsafe. Why?\r\n\r\nIt is possible for two thread invocations of this method to reach this line and see a missing key:\r\n\r\n    if (store.containsKey(name)) {\r\n        throw new Exception(&quot;Already Exists&quot;);\r\n     }\r\nIf both invocations see the name key as missing, then your item now gets created twice. So what&#39;s the lesson here? Using ConcurrentHashMap on its own is not enough, at least not in the way you are using it. \r\n\r\nWhat you want to do is take advantage of ConcurrentHashMap&#39;s *atomic* methods. The answer posted by DuncG provides a way to do this:\r\n\r\n    return map.computeIfAbsent(name, () -&gt; new Item());\r\n\r\nNow, the ConcurrentHashMap takes care of the thread-safety for you, and you have no need of using the synchronized keyword. Effectively, it will check the map, create the object if it is missing, and return it, all atomically, without any concern for race conditions.\r\n\r\nAll that said, if your use case can tolerate two or more creations of the Item() and two or more versions floating around (by chance), then it may not be that big of a deal. That said, I&#39;d still recommend going with the computeIfAbsent approach since it guarantees consistent behavior.","title":"Thread Safety in operations involving ConcurrentHashMap in Java","body":"<p>As written, your method is not threadsafe. Why?</p>\n<p>It is possible for two thread invocations of this method to reach this line and see a missing key:</p>\n<pre><code>if (store.containsKey(name)) {\n    throw new Exception(&quot;Already Exists&quot;);\n }\n</code></pre>\n<p>If both invocations see the name key as missing, then your item now gets created twice. So what's the lesson here? Using ConcurrentHashMap on its own is not enough, at least not in the way you are using it.</p>\n<p>What you want to do is take advantage of ConcurrentHashMap's <em>atomic</em> methods. The answer posted by DuncG provides a way to do this:</p>\n<pre><code>return map.computeIfAbsent(name, () -&gt; new Item());\n</code></pre>\n<p>Now, the ConcurrentHashMap takes care of the thread-safety for you, and you have no need of using the synchronized keyword. Effectively, it will check the map, create the object if it is missing, and return it, all atomically, without any concern for race conditions.</p>\n<p>All that said, if your use case can tolerate two or more creations of the Item() and two or more versions floating around (by chance), then it may not be that big of a deal. That said, I'd still recommend going with the computeIfAbsent approach since it guarantees consistent behavior.</p>\n"}],"owner":{"account_id":7828782,"reputation":150,"user_id":7356882,"display_name":"HyperVol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":77072879,"answer_count":2,"score":-3,"last_activity_date":1694344234,"creation_date":1694268297,"question_id":77072580,"body_markdown":"Context: I&#39;m creating a new `Item`, caching it and returning it, however, its name must be unique. We&#39;re talking about multithreaded env. My questions are in the comments.\r\n\r\n```\r\nclass ItemOperations {\r\n\r\n    private ConcurrentMap&lt;String, Item&gt; store = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    Item createItem(String name) throws Exception {\r\n\r\n        // I agree this operation is thread safe because of ConcurrentHashMap\r\n        if (store.containsKey(name)) {\r\n            throw new Exception(&quot;Already Exists&quot;);\r\n        }\r\n\r\n        // Item creation is Expensive operation\r\n        Item newItem = new Item();\r\n        // *Ques 1* : For above - multiple threads will create multiple different objects right ?\r\n\r\n\r\n        // putIfAbsent is again thread safe due to concurrentMap..\r\n        // Losing thread will not update the value.. (correct me if i&#39;m wrong)\r\n        store.putIfAbsent(&quot;newItemName&quot;, newItem);\r\n\r\n\r\n        // *Ques 2* : Separate threads will return different objects and\r\n        // the second thread will return a new object which is \r\n        //NOT present in the store but was created on the fly , hence returning incorrect data\r\n        return newItem;\r\n    }\r\n}\r\n```\r\nHow to fix this ?\r\n\r\nMy thoughts: Should the whole createItem() be wrapped in a synchronized(this) block? so that Item Object creation is thread safe ? If yes, we&#39;ll lose the benefits of ConcurrentHashmap and it&#39;ll further degrade performance.\r\n\r\nUsing put instead of putIfAbsent is worse - ensures data correctness, but useless multiple writes to hashmap - hence impacting performance.","title":"Thread Safety in operations involving ConcurrentHashMap in Java","body":"<p>Context: I'm creating a new <code>Item</code>, caching it and returning it, however, its name must be unique. We're talking about multithreaded env. My questions are in the comments.</p>\n<pre><code>class ItemOperations {\n\n    private ConcurrentMap&lt;String, Item&gt; store = new ConcurrentHashMap&lt;&gt;();\n\n    Item createItem(String name) throws Exception {\n\n        // I agree this operation is thread safe because of ConcurrentHashMap\n        if (store.containsKey(name)) {\n            throw new Exception(&quot;Already Exists&quot;);\n        }\n\n        // Item creation is Expensive operation\n        Item newItem = new Item();\n        // *Ques 1* : For above - multiple threads will create multiple different objects right ?\n\n\n        // putIfAbsent is again thread safe due to concurrentMap..\n        // Losing thread will not update the value.. (correct me if i'm wrong)\n        store.putIfAbsent(&quot;newItemName&quot;, newItem);\n\n\n        // *Ques 2* : Separate threads will return different objects and\n        // the second thread will return a new object which is \n        //NOT present in the store but was created on the fly , hence returning incorrect data\n        return newItem;\n    }\n}\n</code></pre>\n<p>How to fix this ?</p>\n<p>My thoughts: Should the whole createItem() be wrapped in a synchronized(this) block? so that Item Object creation is thread safe ? If yes, we'll lose the benefits of ConcurrentHashmap and it'll further degrade performance.</p>\n<p>Using put instead of putIfAbsent is worse - ensures data correctness, but useless multiple writes to hashmap - hence impacting performance.</p>\n"},{"tags":["java","apache","openid-connect","quarkus","mod-auth-openidc"],"comments":[{"owner":{"account_id":10801575,"reputation":1614,"user_id":7945344,"display_name":"Lucas Declercq"},"score":0,"creation_date":1685569596,"post_id":76375712,"comment_id":134680509,"body_markdown":"You should use a ContainerRequestFilter to manually read the headers and setup the security context and/or a RequestScoped custom bean containing the values you need. You can get inspiration from this post : https://stackoverflow.com/questions/66695265/how-to-retrieve-securitycontext-in-a-quarkus-application","body":"You should use a ContainerRequestFilter to manually read the headers and setup the security context and/or a RequestScoped custom bean containing the values you need. You can get inspiration from this post : <a href=\"https://stackoverflow.com/questions/66695265/how-to-retrieve-securitycontext-in-a-quarkus-application\" title=\"how to retrieve securitycontext in a quarkus application\">stackoverflow.com/questions/66695265/&hellip;</a>"}],"owner":{"account_id":14865200,"reputation":150,"user_id":10734565,"display_name":"Vinetos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694342481,"creation_date":1685551551,"question_id":76375712,"body_markdown":"I run Quarkus behind an Apache Reverse Proxy.  \r\nThe Apache use `mod_auth_openidc` to authenticate the user and pass the `OIDC_CLAIM_*` HTTP headers to the applications behind.  \r\n\r\nHow to configure Quarkus to read the `OIDC_CLAIM_*` HTTP headers ? Is there a way to @Inject this in the &quot;quarkus&quot; way ?\r\n\r\nHere&#39;s the relevant HTTPD configuration : \r\n```xml\r\n&lt;Location /java&gt;\r\n   ProxyPreserveHost On\r\n   AuthType openid-connect\r\n   Require claim resource_access.apache-oidc.roles:admin-role\r\n\r\n   ProxyPass &quot;http://java-app:8080&quot;\r\n   ProxyPassReverse &quot;http://java-app:8080&quot;\r\n&lt;/Location&gt;\r\n```\r\n\r\nActually, the only way I have found using `@HeaderParam`\r\n```java\r\n@GET\r\npublic String get(@HeaderParam(&quot;OIDC_CLAIM_preferred_username&quot;) String username) {\r\n     return username;\r\n}\r\n```\r\n\r\nIt works but not the way it should. Can I use Quarkus to retrieve `OIDC_*` headers and access its content with the CDI ?\r\n\r\n\r\nThanks,","title":"How to use OIDC_CLAIM_* headers in Quarkus behind an Apache Reverse Proxy?","body":"<p>I run Quarkus behind an Apache Reverse Proxy.<br />\nThe Apache use <code>mod_auth_openidc</code> to authenticate the user and pass the <code>OIDC_CLAIM_*</code> HTTP headers to the applications behind.</p>\n<p>How to configure Quarkus to read the <code>OIDC_CLAIM_*</code> HTTP headers ? Is there a way to @Inject this in the &quot;quarkus&quot; way ?</p>\n<p>Here's the relevant HTTPD configuration :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Location /java&gt;\n   ProxyPreserveHost On\n   AuthType openid-connect\n   Require claim resource_access.apache-oidc.roles:admin-role\n\n   ProxyPass &quot;http://java-app:8080&quot;\n   ProxyPassReverse &quot;http://java-app:8080&quot;\n&lt;/Location&gt;\n</code></pre>\n<p>Actually, the only way I have found using <code>@HeaderParam</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@GET\npublic String get(@HeaderParam(&quot;OIDC_CLAIM_preferred_username&quot;) String username) {\n     return username;\n}\n</code></pre>\n<p>It works but not the way it should. Can I use Quarkus to retrieve <code>OIDC_*</code> headers and access its content with the CDI ?</p>\n<p>Thanks,</p>\n"},{"tags":["java","instagram-api"],"owner":{"account_id":29406887,"reputation":1,"user_id":22531747,"display_name":"AHMET YILDIZBAKAN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694340532,"creation_date":1694340532,"question_id":77075651,"body_markdown":"```\r\npackage com.yazilimevi.unfollow.CustomViews;\r\n\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.yazilimevi.unfollow.InsClient;\r\nimport com.yazilimevi.unfollow.MainActivity;\r\nimport com.yazilimevi.unfollow.R;\r\nimport com.yazilimevi.unfollow.insterfaces.AuthenticationListener;\r\n\r\npublic class AuthenticationDialog extends Dialog {\r\n    private AuthenticationListener listener;\r\n    private Context context;\r\n    private WebView webView;\r\n\r\n    private final String url = InsClient.BASE_URL\r\n            +&quot;oauth/authorize/?client_id=&quot;\r\n            +InsClient.INSTAGRAM_CLIENT_ID\r\n            +&quot;&amp;redirect_uri=&quot;\r\n            +InsClient.REDIRECT_URI\r\n            +&quot;&amp;response_type=token&quot;\r\n            +&quot;&amp;display=touch&amp;scope=public_content&quot;;\r\n\r\n\r\n    public AuthenticationDialog(AuthenticationListener listener, @NonNull Context context) {\r\n        super(context);\r\n        this.context = context;\r\n        this.listener = listener;\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        this.setContentView(R.layout.auth_dialog);\r\n        initializeWebView();\r\n    }\r\n\r\n    private void initializeWebView() {\r\n        webView = (WebView) findViewById(R.id.webView);\r\n        webView.loadUrl(url);\r\n\r\n        webView.setWebViewClient(new WebViewClient(){\r\n\r\n            String access_token;\r\n            boolean authComplete;\r\n\r\n            @Override\r\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n                view.loadUrl(url);\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n                super.onPageStarted(view, url, favicon);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onPageFinished(WebView view, String url) {\r\n                super.onPageFinished(view, url);\r\n              /*  WebSettings settings = webView.getSettings();\r\n                settings.setJavaScriptEnabled(true);\r\n                settings.setDomStorageEnabled(true);*/\r\n                if (url.contains(&quot;#access_token=&quot;) &amp;&amp; !authComplete){\r\n\r\n                    Uri uri = Uri.parse(url);\r\n                    access_token = uri.getEncodedFragment();\r\n                    access_token = access_token.substring(access_token.lastIndexOf(&quot;=&quot;)+1);\r\n                    authComplete = true;\r\n                    listener.onCodeReceived(access_token);\r\n                    dismiss();\r\n                }\r\n                else if (url.contains(&quot;?error&quot;)){\r\n                    System.out.println(&quot;&#231;ıktı&quot;);\r\n                    dismiss();\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nurl.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens. url.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens. url.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens.\r\n```\r\n`public static final String GET_USER_INFO_URL = &quot;https://api.instagram.com/v1/users/self/?access_token=&quot;;\r\npublic static String INSTAGRAM_CLIENT_ID =&quot;685551893072923&quot;;\r\npublic static String INSTAGRAM_CLIENT_ID_SECRET =&quot;7b599f18f96677b83053241599686f42&quot;;\r\npublic static String BASE_URL =&quot;https://api.instagram.com/&quot;;\r\npublic static String REDIRECT_URI = &quot;https%3A%2F%2Fwww.instagram.com/&quot;;\r\npublic final static String PREF_NAME = &quot;app_pref&quot;;`\r\n```\r\n I&#39;m waiting for your help I&#39;m waiting for your help I&#39;m waiting for your help I&#39;m waiting for your help","title":"Android studio java getting error fetching access token","body":"<pre><code>package com.yazilimevi.unfollow.CustomViews;\n\nimport android.app.Dialog;\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\nimport androidx.annotation.NonNull;\n\nimport com.yazilimevi.unfollow.InsClient;\nimport com.yazilimevi.unfollow.MainActivity;\nimport com.yazilimevi.unfollow.R;\nimport com.yazilimevi.unfollow.insterfaces.AuthenticationListener;\n\npublic class AuthenticationDialog extends Dialog {\n    private AuthenticationListener listener;\n    private Context context;\n    private WebView webView;\n\n    private final String url = InsClient.BASE_URL\n            +&quot;oauth/authorize/?client_id=&quot;\n            +InsClient.INSTAGRAM_CLIENT_ID\n            +&quot;&amp;redirect_uri=&quot;\n            +InsClient.REDIRECT_URI\n            +&quot;&amp;response_type=token&quot;\n            +&quot;&amp;display=touch&amp;scope=public_content&quot;;\n\n\n    public AuthenticationDialog(AuthenticationListener listener, @NonNull Context context) {\n        super(context);\n        this.context = context;\n        this.listener = listener;\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        this.setContentView(R.layout.auth_dialog);\n        initializeWebView();\n    }\n\n    private void initializeWebView() {\n        webView = (WebView) findViewById(R.id.webView);\n        webView.loadUrl(url);\n\n        webView.setWebViewClient(new WebViewClient(){\n\n            String access_token;\n            boolean authComplete;\n\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                view.loadUrl(url);\n                return false;\n            }\n\n            @Override\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\n                super.onPageStarted(view, url, favicon);\n\n            }\n\n            @Override\n            public void onPageFinished(WebView view, String url) {\n                super.onPageFinished(view, url);\n              /*  WebSettings settings = webView.getSettings();\n                settings.setJavaScriptEnabled(true);\n                settings.setDomStorageEnabled(true);*/\n                if (url.contains(&quot;#access_token=&quot;) &amp;&amp; !authComplete){\n\n                    Uri uri = Uri.parse(url);\n                    access_token = uri.getEncodedFragment();\n                    access_token = access_token.substring(access_token.lastIndexOf(&quot;=&quot;)+1);\n                    authComplete = true;\n                    listener.onCodeReceived(access_token);\n                    dismiss();\n                }\n                else if (url.contains(&quot;?error&quot;)){\n                    System.out.println(&quot;çıktı&quot;);\n                    dismiss();\n                }\n\n            }\n        });\n\n    }\n}\n\n</code></pre>\n<p>url.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens. url.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens. url.contains(&quot;#access_token=&quot;) It translates to false and Instagram webview does not work. I added Instagram API and client ids. I call the dialog in the main activity section, but only the Instagram logo appears in the dialog that opens.</p>\n<pre><code>`public static final String GET_USER_INFO_URL = &quot;https://api.instagram.com/v1/users/self/?access_token=&quot;;\npublic static String INSTAGRAM_CLIENT_ID =&quot;685551893072923&quot;;\npublic static String INSTAGRAM_CLIENT_ID_SECRET =&quot;7b599f18f96677b83053241599686f42&quot;;\npublic static String BASE_URL =&quot;https://api.instagram.com/&quot;;\npublic static String REDIRECT_URI = &quot;https%3A%2F%2Fwww.instagram.com/&quot;;\npublic final static String PREF_NAME = &quot;app_pref&quot;;`\n</code></pre>\n<p>I'm waiting for your help I'm waiting for your help I'm waiting for your help I'm waiting for your help</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1694340524,"post_id":77075589,"comment_id":135876017,"body_markdown":"Why is your expected result 6 -&gt; 9? You also use `addfirst` for 9, meaning it will be added *before* 6, because it was called after adding 6.","body":"Why is your expected result 6 -&gt; 9? You also use <code>addfirst</code> for 9, meaning it will be added <i>before</i> 6, because it was called after adding 6."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694342996,"post_id":77075589,"comment_id":135876289,"body_markdown":"... you must `addLast(9)` if you want it added as *Last*","body":"... you must <code>addLast(9)</code> if you want it added as <i>Last</i>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694343372,"post_id":77075589,"comment_id":135876340,"body_markdown":"Step through your code with the debugger.","body":"Step through your code with the debugger."}],"answers":[{"tags":[],"owner":{"account_id":27734686,"reputation":1,"user_id":21172516,"display_name":"jun AS"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1694340204,"creation_date":1694340204,"answer_id":77075640,"question_id":77075589,"body_markdown":"the answer is true,you define code addfirst,is mean per newnode will add  to the head position. you add 6, head -&gt;6 ,again add 9，9.next = head，head - &gt;9,when you print ,is just 9 -&gt; 6, if you want 6 —&gt;9 ,you should to use addlast","title":"Why my element is not getting add at start index when i call addfirst method in linkedlist","body":"<p>the answer is true,you define code addfirst,is mean per newnode will add  to the head position. you add 6, head -&gt;6 ,again add 9，9.next = head，head - &gt;9,when you print ,is just 9 -&gt; 6, if you want 6 —&gt;9 ,you should to use addlast</p>\n"}],"owner":{"account_id":29406800,"reputation":1,"user_id":22531673,"display_name":"Dishank Gawas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694340481,"creation_date":1694339416,"question_id":77075589,"body_markdown":"This is my linked list code:\r\n\r\n```java\r\npackage com.dishank.primitive;\r\n\r\npublic class LL {\r\n\tNode head;\r\n\t\r\n\tclass Node{\r\n\t\tint data;\r\n\t\tNode next;\r\n\t\t\r\n\t\tNode(int data){\r\n\t\t\tthis.data=data;\r\n\t\t\tthis.next=null;\r\n\t\t}\r\n\t}\r\n\r\n\t// add first\r\n\tpublic void addfirst(int data) {\r\n\t\tNode newnode = new Node(data);\r\n\t\tif(head==null) {\r\n\t\t\thead=newnode;\r\n\t\t\treturn;\t\r\n\t\t}\r\n\t\tnewnode.next=head;\r\n\t\thead=newnode;\r\n\t}\r\n\r\n\t//add last\r\n\tpublic void addlast(int data) {\r\n\t\tNode newnode=new Node(data);\r\n\t\tif(head==null) {\r\n\t\t\thead=newnode;\r\n\t\t\treturn;\t\r\n\t\t}\r\n\t\tNode currNode = head;\r\n\t\twhile(currNode.next!=null) {\r\n\t\t\tcurrNode=currNode.next;\r\n\t\t}\r\n\t\tcurrNode.next=newnode;\r\n\t}\r\n\r\n\tpublic void printt() {\r\n\t\tNode currNode = head;\r\n\t\twhile(currNode!=null) {\r\n\t\t\tSystem.out.print(currNode.data+&quot; -&gt; &quot;);\r\n\t\t\tcurrNode=currNode.next;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tLL list = new LL();\r\n\t\tlist.addfirst(6);\r\n\t\tlist.addfirst(9);\r\n\t\tlist.printt();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nExpected op is 6 -&gt; 9, but I&#39;m getting 9 -&gt; 6 -&gt;. I tried updating my code, but nothing works. What is the problem?","title":"Why my element is not getting add at start index when i call addfirst method in linkedlist","body":"<p>This is my linked list code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.dishank.primitive;\n\npublic class LL {\n    Node head;\n    \n    class Node{\n        int data;\n        Node next;\n        \n        Node(int data){\n            this.data=data;\n            this.next=null;\n        }\n    }\n\n    // add first\n    public void addfirst(int data) {\n        Node newnode = new Node(data);\n        if(head==null) {\n            head=newnode;\n            return; \n        }\n        newnode.next=head;\n        head=newnode;\n    }\n\n    //add last\n    public void addlast(int data) {\n        Node newnode=new Node(data);\n        if(head==null) {\n            head=newnode;\n            return; \n        }\n        Node currNode = head;\n        while(currNode.next!=null) {\n            currNode=currNode.next;\n        }\n        currNode.next=newnode;\n    }\n\n    public void printt() {\n        Node currNode = head;\n        while(currNode!=null) {\n            System.out.print(currNode.data+&quot; -&gt; &quot;);\n            currNode=currNode.next;\n        }\n    }\n\n    public static void main(String[] args) {\n        LL list = new LL();\n        list.addfirst(6);\n        list.addfirst(9);\n        list.printt();\n    }\n\n}\n</code></pre>\n<p>Expected op is 6 -&gt; 9, but I'm getting 9 -&gt; 6 -&gt;. I tried updating my code, but nothing works. What is the problem?</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"score":0,"creation_date":1555599607,"post_id":55748199,"comment_id":98174322,"body_markdown":"what is there on line 64 on your html ?","body":"what is there on line 64 on your html ?"},{"owner":{"account_id":6682518,"reputation":13,"user_id":11378283,"display_name":"Alexander Romanov"},"score":0,"creation_date":1555600128,"post_id":55748199,"comment_id":98174615,"body_markdown":"I&#39;m sorry.This one &lt;input type=&quot;text&quot; name=&quot;name&quot;  th:field=&quot;*{name}&quot;/&gt;","body":"I&#39;m sorry.This one &lt;input type=&quot;text&quot; name=&quot;name&quot;  th:field=&quot;*{name}&quot;/&gt;"},{"owner":{"account_id":6682518,"reputation":13,"user_id":11378283,"display_name":"Alexander Romanov"},"score":0,"creation_date":1555600225,"post_id":55748199,"comment_id":98174675,"body_markdown":"Col 32 starts here th","body":"Col 32 starts here th"},{"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"score":0,"creation_date":1555600358,"post_id":55748199,"comment_id":98174754,"body_markdown":"change `&lt;form method=&quot;POST&quot; th:object=&quot;${taco}&quot;&gt;` to `&lt;form method=&quot;POST&quot; th:object=&quot;${design}&quot;&gt;`","body":"change <code>&lt;form method=&quot;POST&quot; th:object=&quot;${taco}&quot;&gt;</code> to <code>&lt;form method=&quot;POST&quot; th:object=&quot;${design}&quot;&gt;</code>"},{"owner":{"account_id":6682518,"reputation":13,"user_id":11378283,"display_name":"Alexander Romanov"},"score":0,"creation_date":1555600625,"post_id":55748199,"comment_id":98174897,"body_markdown":"It works, but incorrect input ok but another page part doesn&#39;t work( Why i should change taco to design?","body":"It works, but incorrect input ok but another page part doesn&#39;t work( Why i should change taco to design?"},{"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"score":0,"creation_date":1555600679,"post_id":55748199,"comment_id":98174930,"body_markdown":"you are missing `th:action` on your form as well.","body":"you are missing <code>th:action</code> on your form as well."}],"answers":[{"tags":[],"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555600792,"creation_date":1555600792,"answer_id":55749117,"question_id":55748199,"body_markdown":"I noticed two things on your code.\r\n\r\n1. I don&#39;t see `th:action` on your form that is required for form submission.\r\n2. change `form method=&quot;POST&quot; th:object=&quot;${taco}&quot;` to `form method=&quot;POST&quot; th:object=&quot;${design}&quot;`\r\n\r\nTry fixing these two and it should work.","title":"How to set object field from Thymeleaf template?","body":"<p>I noticed two things on your code.</p>\n\n<ol>\n<li>I don't see <code>th:action</code> on your form that is required for form submission.</li>\n<li>change <code>form method=\"POST\" th:object=\"${taco}\"</code> to <code>form method=\"POST\" th:object=\"${design}\"</code></li>\n</ol>\n\n<p>Try fixing these two and it should work.</p>\n"},{"tags":[],"owner":{"account_id":2869500,"reputation":54,"user_id":2463147,"display_name":"Polash"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1694340291,"creation_date":1555611244,"answer_id":55751684,"question_id":55748199,"body_markdown":"I found two thing in code:\r\n\r\n1. I  do not find any  action your  form in html. You should use `th:action` tag to add an action.\r\n2. in html you used `th:object=&quot;${taco}&quot;` for declare an object for your html form. But you do not add “taco” object in your model in controller method from where you return the html design. You should add the “taco” object in your controller method like below.\r\n\r\n   \r\n\r\n     model.addAttribute(“taco”, taco Object);","title":"How to set object field from Thymeleaf template?","body":"<p>I found two thing in code:</p>\n<ol>\n<li><p>I  do not find any  action your  form in html. You should use <code>th:action</code> tag to add an action.</p>\n</li>\n<li><p>in html you used <code>th:object=&quot;${taco}&quot;</code> for declare an object for your html form. But you do not add “taco” object in your model in controller method from where you return the html design. You should add the “taco” object in your controller method like below.</p>\n<p>model.addAttribute(“taco”, taco Object);</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11739059,"reputation":368,"user_id":8591962,"display_name":"Mohit Bansal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569544508,"creation_date":1569543199,"answer_id":58126199,"question_id":55748199,"body_markdown":"I encountered same issue.\r\n\r\nResolution for me was to add getters in Taco.java for name. Somehow lombok is not generating getters automatically at run time.\r\n\r\nAnd `th:object=&quot;${taco}&quot;` should be `th:object=&quot;${design}&quot;`\r\n\r\nNo need to make changes for `th:action`. From tutorial\r\n&gt;If you take another look at the &lt;form&gt; tag in your view, you can see that its method attribute is set to POST. Moreover, the &lt;form&gt; doesn’t declare an action attribute. This means that when the form is submitted, the browser will gather up all the data in the form and send it to the server in an HTTP POST request to the same path for which a GET request displayed the form—the /design path.\r\n\r\n","title":"How to set object field from Thymeleaf template?","body":"<p>I encountered same issue.</p>\n\n<p>Resolution for me was to add getters in Taco.java for name. Somehow lombok is not generating getters automatically at run time.</p>\n\n<p>And <code>th:object=\"${taco}\"</code> should be <code>th:object=\"${design}\"</code></p>\n\n<p>No need to make changes for <code>th:action</code>. From tutorial</p>\n\n<blockquote>\n  <p>If you take another look at the  tag in your view, you can see that its method attribute is set to POST. Moreover, the  doesn’t declare an action attribute. This means that when the form is submitted, the browser will gather up all the data in the form and send it to the server in an HTTP POST request to the same path for which a GET request displayed the form—the /design path.</p>\n</blockquote>\n"}],"owner":{"account_id":6682518,"reputation":13,"user_id":11378283,"display_name":"Alexander Romanov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7920,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55751684,"answer_count":3,"score":1,"last_activity_date":1694340291,"creation_date":1555597738,"question_id":55748199,"body_markdown":"i&#39;m new in Spring and i trying to learn it with help Spring in action 5 (Craig Walls).I&#39;m creating small  Spring Boot MVC-application.Now i have a little problem with Thymeleaf.\r\n\r\nI have Controller,View and model as POJO object.When i&#39;m trying to get data from form Intellij Idea told me that something wrong with my Thymeleaf view in this line:&lt;input type=&quot;text&quot; name=&quot;name&quot;  th:field=&quot;*{name}&quot;/&gt;\r\n\r\n    Model\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    \r\n    import javax.validation.constraints.NotNull;\r\n    import javax.validation.constraints.Size;\r\n    \r\n    import lombok.Data;\r\n    \r\n    \r\n    @Data\r\n    public class Taco {\r\n    \r\n        private Long id;\r\n    \r\n        private Date createdAt;\r\n    \r\n        @NotNull\r\n        @Size(min=5, message=&quot;Name must be at least 5 characters long&quot;)\r\n        private String name;\r\n    \r\n        @Size(min=1, message=&quot;You must choose at least 1 ingredient&quot;)\r\n        private List&lt;Ingredient&gt; ingredients;\r\n    \r\n    \r\n    }\r\n\r\nView\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot;\r\n          xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n          xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;title&gt;Taco Cloud&lt;/title&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/styles.css}&quot;/&gt;\r\n    \r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \r\n        &lt;h1&gt;Design your taco!&lt;/h1&gt;\r\n        &lt;img src=&quot;../static/images/TacoCloud.png&quot; alt=&quot;TacoCloud.png&quot; th:src=&quot;@{/images/TacoCloud.png}&quot;&gt;\r\n    \r\n        &lt;form method=&quot;POST&quot; th:object=&quot;${taco}&quot;&gt;\r\n            &lt;div class=&quot;grid&quot;&gt;\r\n                &lt;div class=&quot;ingredient-group&quot; id=&quot;wraps&quot;&gt;\r\n                    &lt;h3&gt;Designate yor wrap:&lt;/h3&gt;\r\n                    &lt;div th:each=&quot;ingredient:${wrap}&quot;&gt;\r\n                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;${ingredient.id}&quot;/&gt;\r\n    \r\n                        &lt;span th:text=&quot;${ingredient.name}&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n    \r\n    \r\n                &lt;div class=&quot;ingredient-group&quot; id=&quot;proteins&quot;&gt;\r\n                &lt;h3&gt;Pick your protein:&lt;/h3&gt;\r\n                &lt;div th:each=&quot;ingredient: ${protein}&quot;&gt;\r\n                    &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;${ingredient.id}&quot;/&gt;\r\n                    &lt;span th:text=&quot;${ingredient.name}&quot;&gt;INGREDIENT&lt;/span&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n    \r\n    \r\n                &lt;div class=&quot;ingredient-group&quot; id=&quot;cheeses&quot;&gt;\r\n                    &lt;h3&gt;Choose your cheese:&lt;/h3&gt;\r\n                    &lt;div th:each=&quot;ingredient:${cheese}&quot;&gt;\r\n                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;${ingredient.id}&quot;/&gt;\r\n                        &lt;span th:text=&quot;${ingredient.name}&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n    \r\n                &lt;div class=&quot;ingredient-group&quot; id=&quot;veggies&quot;&gt;\r\n                    &lt;h3&gt;Determine your veggies:&lt;/h3&gt;\r\n                    &lt;div th:each=&quot;ingredient : ${veggies}&quot;&gt;\r\n                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;${ingredient.id}&quot;\r\n                        /&gt;\r\n                        &lt;span th:text=&quot;${ingredient.name}&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;ingredient-group&quot; id=&quot;sauces&quot;&gt;\r\n                    &lt;h3&gt;Select your sauce:&lt;/h3&gt;\r\n                    &lt;div th:each=&quot;ingredient : ${sauce}&quot;&gt;\r\n                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;${ingredient.id}&quot;\r\n                        /&gt;\r\n                        &lt;span th:text=&quot;${ingredient.name}&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div&gt;\r\n                &lt;h3&gt;Name your taco creation:&lt;/h3&gt;\r\n                &lt;input type=&quot;text&quot; name=&quot;name&quot;  th:field=&quot;*{name}&quot;/&gt; \r\n         \r\n                &lt;br/&gt;\r\n                &lt;button&gt;Submit your taco&lt;/button&gt;\r\n            &lt;/div&gt;\r\n    \r\n        &lt;/form&gt;\r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nController\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.validation.Errors;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import tacos.Ingredient.Type;\r\n    import tacos.Ingredient;\r\n    import org.springframework.web.bind.annotation.ModelAttribute;\r\n    import tacos.Taco;\r\n    import tacos.data.IngredientRepository;\r\n    \r\n    import javax.validation.Valid;\r\n    \r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    \r\n    @Slf4j\r\n    @Controller\r\n    @RequestMapping(&quot;/design&quot;)\r\n    public class DesignTacoController {\r\n    \r\n        private final IngredientRepository ingredientRepo;\r\n    \r\n        @Autowired\r\n        public DesignTacoController(IngredientRepository ingredientRepo){\r\n            this.ingredientRepo=ingredientRepo;\r\n        }\r\n    \r\n    \r\n        @GetMapping\r\n        public String showDesignForm(Model model) {\r\n    \r\n            List&lt;Ingredient&gt; ingredients=new ArrayList&lt;&gt;();\r\n            ingredientRepo.findAll().forEach(i-&gt;ingredients.add(i));\r\n    \r\n            Type[] types = Ingredient.Type.values();\r\n            for (Type type : types) {\r\n                model.addAttribute(type.toString().toLowerCase(),\r\n                        filterByType(ingredients, type));\r\n            }\r\n    \r\n            return &quot;design&quot;;\r\n        }\r\n    \r\n    \r\n        private List&lt;Ingredient&gt; filterByType(\r\n                List&lt;Ingredient&gt; ingredients, Type type) {\r\n            return ingredients\r\n                    .stream()\r\n                    .filter(x -&gt; x.getType().equals(type))\r\n                    .collect(Collectors.toList());\r\n        }\r\n    \r\n        @PostMapping\r\n        public String processDesign(@Valid @ModelAttribute(&quot;design&quot;) Taco design, Errors errors, Model model) {\r\n            if (errors.hasErrors()) {\r\n                return &quot;design&quot;;\r\n            }\r\n    \r\n            // Save the taco design...\r\n            // We&#39;ll do this in chapter 3\r\n            log.info(&quot;Processing design: &quot; + design);\r\n    \r\n            return &quot;redirect:/orders/current&quot;;\r\n        }\r\n    \r\n    }\r\n\r\nAnd finally i get this error:\r\n\r\n    org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/design.html]&quot;)\r\n    \r\n    Caused by: org.attoparser.ParseException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;design&quot; - line 64, col 45)\r\n\r\n","title":"How to set object field from Thymeleaf template?","body":"<p>i'm new in Spring and i trying to learn it with help Spring in action 5 (Craig Walls).I'm creating small  Spring Boot MVC-application.Now i have a little problem with Thymeleaf.</p>\n\n<p>I have Controller,View and model as POJO object.When i'm trying to get data from form Intellij Idea told me that something wrong with my Thymeleaf view in this line:</p>\n\n<pre><code>Model\nimport java.util.Date;\nimport java.util.List;\n\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\n\nimport lombok.Data;\n\n\n@Data\npublic class Taco {\n\n    private Long id;\n\n    private Date createdAt;\n\n    @NotNull\n    @Size(min=5, message=\"Name must be at least 5 characters long\")\n    private String name;\n\n    @Size(min=1, message=\"You must choose at least 1 ingredient\")\n    private List&lt;Ingredient&gt; ingredients;\n\n\n}\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"\n      xmlns=\"http://www.w3.org/1999/xhtml\"\n      xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Taco Cloud&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/styles.css}\"/&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;h1&gt;Design your taco!&lt;/h1&gt;\n    &lt;img src=\"../static/images/TacoCloud.png\" alt=\"TacoCloud.png\" th:src=\"@{/images/TacoCloud.png}\"&gt;\n\n    &lt;form method=\"POST\" th:object=\"${taco}\"&gt;\n        &lt;div class=\"grid\"&gt;\n            &lt;div class=\"ingredient-group\" id=\"wraps\"&gt;\n                &lt;h3&gt;Designate yor wrap:&lt;/h3&gt;\n                &lt;div th:each=\"ingredient:${wrap}\"&gt;\n                    &lt;input name=\"ingredients\" type=\"checkbox\" th:value=\"${ingredient.id}\"/&gt;\n\n                    &lt;span th:text=\"${ingredient.name}\"&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n\n            &lt;div class=\"ingredient-group\" id=\"proteins\"&gt;\n            &lt;h3&gt;Pick your protein:&lt;/h3&gt;\n            &lt;div th:each=\"ingredient: ${protein}\"&gt;\n                &lt;input name=\"ingredients\" type=\"checkbox\" th:value=\"${ingredient.id}\"/&gt;\n                &lt;span th:text=\"${ingredient.name}\"&gt;INGREDIENT&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n\n            &lt;div class=\"ingredient-group\" id=\"cheeses\"&gt;\n                &lt;h3&gt;Choose your cheese:&lt;/h3&gt;\n                &lt;div th:each=\"ingredient:${cheese}\"&gt;\n                    &lt;input name=\"ingredients\" type=\"checkbox\" th:value=\"${ingredient.id}\"/&gt;\n                    &lt;span th:text=\"${ingredient.name}\"&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"ingredient-group\" id=\"veggies\"&gt;\n                &lt;h3&gt;Determine your veggies:&lt;/h3&gt;\n                &lt;div th:each=\"ingredient : ${veggies}\"&gt;\n                    &lt;input name=\"ingredients\" type=\"checkbox\" th:value=\"${ingredient.id}\"\n                    /&gt;\n                    &lt;span th:text=\"${ingredient.name}\"&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"ingredient-group\" id=\"sauces\"&gt;\n                &lt;h3&gt;Select your sauce:&lt;/h3&gt;\n                &lt;div th:each=\"ingredient : ${sauce}\"&gt;\n                    &lt;input name=\"ingredients\" type=\"checkbox\" th:value=\"${ingredient.id}\"\n                    /&gt;\n                    &lt;span th:text=\"${ingredient.name}\"&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;h3&gt;Name your taco creation:&lt;/h3&gt;\n            &lt;input type=\"text\" name=\"name\"  th:field=\"*{name}\"/&gt; \n\n            &lt;br/&gt;\n            &lt;button&gt;Submit your taco&lt;/button&gt;\n        &lt;/div&gt;\n\n    &lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.Errors;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport tacos.Ingredient.Type;\nimport tacos.Ingredient;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport tacos.Taco;\nimport tacos.data.IngredientRepository;\n\nimport javax.validation.Valid;\n\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n\n@Slf4j\n@Controller\n@RequestMapping(\"/design\")\npublic class DesignTacoController {\n\n    private final IngredientRepository ingredientRepo;\n\n    @Autowired\n    public DesignTacoController(IngredientRepository ingredientRepo){\n        this.ingredientRepo=ingredientRepo;\n    }\n\n\n    @GetMapping\n    public String showDesignForm(Model model) {\n\n        List&lt;Ingredient&gt; ingredients=new ArrayList&lt;&gt;();\n        ingredientRepo.findAll().forEach(i-&gt;ingredients.add(i));\n\n        Type[] types = Ingredient.Type.values();\n        for (Type type : types) {\n            model.addAttribute(type.toString().toLowerCase(),\n                    filterByType(ingredients, type));\n        }\n\n        return \"design\";\n    }\n\n\n    private List&lt;Ingredient&gt; filterByType(\n            List&lt;Ingredient&gt; ingredients, Type type) {\n        return ingredients\n                .stream()\n                .filter(x -&gt; x.getType().equals(type))\n                .collect(Collectors.toList());\n    }\n\n    @PostMapping\n    public String processDesign(@Valid @ModelAttribute(\"design\") Taco design, Errors errors, Model model) {\n        if (errors.hasErrors()) {\n            return \"design\";\n        }\n\n        // Save the taco design...\n        // We'll do this in chapter 3\n        log.info(\"Processing design: \" + design);\n\n        return \"redirect:/orders/current\";\n    }\n\n}\n</code></pre>\n\n<p>And finally i get this error:</p>\n\n<pre><code>org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: \"class path resource [templates/design.html]\")\n\nCaused by: org.attoparser.ParseException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: \"design\" - line 64, col 45)\n</code></pre>\n"},{"tags":["java","sqlite","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694339396,"post_id":77075521,"comment_id":135875909,"body_markdown":"Obviously, the database you updated through NetBeans is not the same database as the JAR. Please provide a [mre] that includes the relevant build files.","body":"Obviously, the database you updated through NetBeans is not the same database as the JAR. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that includes the relevant build files."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1694343831,"post_id":77075521,"comment_id":135876379,"body_markdown":"A JAR file is like a ZIP file, it is an archive of other files, but it is not trivial to (directly) change the contents of the files inside the JAR/ZIP (also not the intention of it)","body":"A JAR file is like a ZIP file, it is an archive of other files, but it is not trivial to (directly) change the contents of the files inside the JAR/ZIP (also not the intention of it)"},{"owner":{"account_id":25866616,"reputation":1,"user_id":19598180,"display_name":"Rohan Nag"},"score":0,"creation_date":1694348322,"post_id":77075521,"comment_id":135876803,"body_markdown":"I simply want to build a terminal based application. If I just run the java file, it can&#39;t find the SQLite drivers, and I have to provide a class path every time. Is there  a better way to build a terminal based application using Java, other than converting into a Jar, such that the data persistence issue is resolved. Please help me!","body":"I simply want to build a terminal based application. If I just run the java file, it can&#39;t find the SQLite drivers, and I have to provide a class path every time. Is there  a better way to build a terminal based application using Java, other than converting into a Jar, such that the data persistence issue is resolved. Please help me!"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1694369169,"post_id":77075521,"comment_id":135878918,"body_markdown":"Your situation isn&#39;t using jpackage but you have a resource path db which means it is readonly. See [How to control SQLite 3 database files directory after installing my app (Packaged using JPackage)](https://stackoverflow.com/questions/70163374/how-to-control-sqlite-3-database-files-directory-after-installing-my-app-packag)","body":"Your situation isn&#39;t using jpackage but you have a resource path db which means it is readonly. See <a href=\"https://stackoverflow.com/questions/70163374/how-to-control-sqlite-3-database-files-directory-after-installing-my-app-packag\">How to control SQLite 3 database files directory after installing my app (Packaged using JPackage)</a>"}],"owner":{"account_id":25866616,"reputation":1,"user_id":19598180,"display_name":"Rohan Nag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694339347,"creation_date":1694338332,"question_id":77075521,"body_markdown":"I&#39;m encountering an issue with my Java application developed in NetBeans. The application uses an SQLite database, and I&#39;ve noticed that changes made to the database persist when I run the program from within NetBeans. However, when I build the JAR file and run it separately, the database changes are not reflected.\r\n\r\nHere are some key details:\r\n\r\nThe database file (customerDB.db) is stored in the &quot;databases&quot; folder, and the folder is added as a resource in my NetBeans project.\r\nI&#39;m confident that I&#39;m modifying the correct database file in the &quot;databases&quot; folder.\r\n\r\nNetBeans seems to copy the database file to a temporary location during the build process, which is used when running the JAR file.\r\nI would appreciate any insights into why the JAR file&#39;s database isn&#39;t updating as expected and how I can ensure that changes persist when running the JAR file.\r\n\r\nHere&#39;s the program for connecting to the SQLite Database, and updating it:\r\n\r\n```\r\n\r\npublic class SQLiteDatabase {\r\n\r\n    private Connection con;\r\n    private final String tableName;\r\n\r\n    public SQLiteDatabase() throws SQLException, ClassNotFoundException, IOException {\r\n        tableName = &quot;&quot;;\r\n        Class.forName(&quot;org.sqlite.JDBC&quot;);\r\n        Path dbFile = Files.createTempFile(null, &quot;.db&quot;);\r\n\r\n        con = DriverManager.getConnection(&quot;jdbc:sqlite::resource:customerDB.db&quot;);\r\n\r\n    }\r\n\r\n    public SQLiteDatabase(String tableName, String tableFields) throws SQLException, ClassNotFoundException, IOException {\r\n        this.tableName = tableName;\r\n        Class.forName(&quot;org.sqlite.JDBC&quot;);\r\n        String query = String.format(&quot;CREATE TABLE IF NOT EXISTS %s %s&quot;, tableName, tableFields);\r\n        \r\n        con = DriverManager.getConnection(&quot;jdbc:sqlite::resource:customerDB.db&quot;);\r\n        \r\n        Statement st = con.createStatement();\r\n        st.executeUpdate(query);\r\n    }\r\n\r\n    public void showTables() throws SQLException {\r\n        try (ResultSet rs = con.getMetaData().getTables(null, null, null, null)) {\r\n            while (rs.next()) {\r\n                System.out.println(rs.getString(&quot;TABLE_NAME&quot;));\r\n            }\r\n        }\r\n    }\r\n\r\n    public void insertData(int id, String name, String username, String password) throws SQLException {\r\n        String query = String.format(&quot;INSERT INTO %s VALUES(?,?,?,?)&quot;, tableName);\r\n        PreparedStatement p = con.prepareStatement(query);\r\n        p.setInt(1, id);\r\n        p.setString(2, name);\r\n        p.setString(3, username);\r\n        p.setString(4, password);\r\n\r\n        int count = p.executeUpdate();\r\n\r\n        System.out.println(String.format(&quot;%d row(s) added sucessfully&quot;, count));\r\n\r\n        p.close();\r\n    }\r\n\r\n    public void readData() throws SQLException {\r\n        String query = String.format(&quot;SELECT * FROM %s&quot;, tableName);\r\n        Formatter formatter = new Formatter();\r\n\r\n        try (Statement st = con.createStatement(); \r\n             ResultSet rs = st.executeQuery(query)) {\r\n\r\n            formatter.format(&quot;%-5s %-25s %-25s %-25s\\n&quot;, &quot;id&quot;, &quot;name&quot;, &quot;username&quot;, &quot;password&quot;);\r\n\r\n        while(rs.next())\r\n        {\r\n            int id = rs.getInt(1);\r\n            String name = rs.getString(2);\r\n            String username = rs.getString(3);\r\n            String password = rs.getString(4);\r\n            \r\n            formatter.format(&quot;%-5s %-25s %-25s %-25s\\n&quot;, id,name,username, password);\r\n\r\n        }\r\n            System.out.println(formatter);\r\n\r\n        }\r\n    }\r\n    \r\n    public void deleteData(int id) throws SQLException {\r\n        String query = String.format(&quot;DELETE FROM %s WHERE id=?&quot;, tableName);\r\n        try (PreparedStatement p = con.prepareStatement(query)) {\r\n            p.setInt(1, id);\r\n            \r\n            int count = p.executeUpdate();\r\n            \r\n            System.out.println(String.format(&quot;%d row(s) deleted sucessfully&quot;, count));\r\n        }\r\n    }\r\n\r\n    public Boolean close() throws SQLException {\r\n        con.close();\r\n    }\r\n}\r\n```\r\n\r\nAnd here&#39;s the driver code:\r\n\r\n```\r\nimport sqlite.SQLiteDatabase;\r\n\r\npublic class BankManagementSystem {\r\n    public static void main(String[] args) {\r\n        \r\n        try(Scanner sc = new Scanner(System.in))\r\n        {  \r\n            SQLiteDatabase sql = new SQLiteDatabase(&quot;login_details&quot;, &quot;(id int, name varchar(255), username varchar(255), password varchar(255))&quot;);\r\n            \r\n            \r\n//           sql.showTables();\r\n//           sql.insertData(1, &quot;rohan&quot;, &quot;rohan&quot;, &quot;1234&quot;);\r\n//           sql.deleteData(1);\r\n            sql.readData();\r\n            \r\n        }\r\n        catch(Exception e)\r\n        {\r\n            Logger.getLogger(BankManagementSystem.class.getName()).log(Level.SEVERE, null, e);\r\n        }\r\n    }\r\n}\r\n```\r\nWhen ran with the `sql.insertData(1, &quot;rohan&quot;, &quot;rohan&quot;, &quot;1234&quot;);` statement, its shows the following output:\r\n```\r\n1 row(s) added successfully\r\n```\r\nThen after running with the `sql.readData();` statement, it shows the data entry in NetBeans.\r\nHere&#39;s the output in NetBeans:\r\n```\r\nid    name                      username                  password\r\n1     rohan                     rohan                     1234 \r\n```\r\nBut when I build the JAR file (clean and build option) then run the JAR file, it doesn&#39;t show the updated database.\r\nIt just shows:\r\n```\r\nid    name                      username                  password\r\n```\r\n\r\nPlease help me out! I want the data to be consistent. When I update the database from NetBeans, it should also reflect in the JAR file also.","title":"Why is the SQLite database not updating inside the jar file?","body":"<p>I'm encountering an issue with my Java application developed in NetBeans. The application uses an SQLite database, and I've noticed that changes made to the database persist when I run the program from within NetBeans. However, when I build the JAR file and run it separately, the database changes are not reflected.</p>\n<p>Here are some key details:</p>\n<p>The database file (customerDB.db) is stored in the &quot;databases&quot; folder, and the folder is added as a resource in my NetBeans project.\nI'm confident that I'm modifying the correct database file in the &quot;databases&quot; folder.</p>\n<p>NetBeans seems to copy the database file to a temporary location during the build process, which is used when running the JAR file.\nI would appreciate any insights into why the JAR file's database isn't updating as expected and how I can ensure that changes persist when running the JAR file.</p>\n<p>Here's the program for connecting to the SQLite Database, and updating it:</p>\n<pre><code>\npublic class SQLiteDatabase {\n\n    private Connection con;\n    private final String tableName;\n\n    public SQLiteDatabase() throws SQLException, ClassNotFoundException, IOException {\n        tableName = &quot;&quot;;\n        Class.forName(&quot;org.sqlite.JDBC&quot;);\n        Path dbFile = Files.createTempFile(null, &quot;.db&quot;);\n\n        con = DriverManager.getConnection(&quot;jdbc:sqlite::resource:customerDB.db&quot;);\n\n    }\n\n    public SQLiteDatabase(String tableName, String tableFields) throws SQLException, ClassNotFoundException, IOException {\n        this.tableName = tableName;\n        Class.forName(&quot;org.sqlite.JDBC&quot;);\n        String query = String.format(&quot;CREATE TABLE IF NOT EXISTS %s %s&quot;, tableName, tableFields);\n        \n        con = DriverManager.getConnection(&quot;jdbc:sqlite::resource:customerDB.db&quot;);\n        \n        Statement st = con.createStatement();\n        st.executeUpdate(query);\n    }\n\n    public void showTables() throws SQLException {\n        try (ResultSet rs = con.getMetaData().getTables(null, null, null, null)) {\n            while (rs.next()) {\n                System.out.println(rs.getString(&quot;TABLE_NAME&quot;));\n            }\n        }\n    }\n\n    public void insertData(int id, String name, String username, String password) throws SQLException {\n        String query = String.format(&quot;INSERT INTO %s VALUES(?,?,?,?)&quot;, tableName);\n        PreparedStatement p = con.prepareStatement(query);\n        p.setInt(1, id);\n        p.setString(2, name);\n        p.setString(3, username);\n        p.setString(4, password);\n\n        int count = p.executeUpdate();\n\n        System.out.println(String.format(&quot;%d row(s) added sucessfully&quot;, count));\n\n        p.close();\n    }\n\n    public void readData() throws SQLException {\n        String query = String.format(&quot;SELECT * FROM %s&quot;, tableName);\n        Formatter formatter = new Formatter();\n\n        try (Statement st = con.createStatement(); \n             ResultSet rs = st.executeQuery(query)) {\n\n            formatter.format(&quot;%-5s %-25s %-25s %-25s\\n&quot;, &quot;id&quot;, &quot;name&quot;, &quot;username&quot;, &quot;password&quot;);\n\n        while(rs.next())\n        {\n            int id = rs.getInt(1);\n            String name = rs.getString(2);\n            String username = rs.getString(3);\n            String password = rs.getString(4);\n            \n            formatter.format(&quot;%-5s %-25s %-25s %-25s\\n&quot;, id,name,username, password);\n\n        }\n            System.out.println(formatter);\n\n        }\n    }\n    \n    public void deleteData(int id) throws SQLException {\n        String query = String.format(&quot;DELETE FROM %s WHERE id=?&quot;, tableName);\n        try (PreparedStatement p = con.prepareStatement(query)) {\n            p.setInt(1, id);\n            \n            int count = p.executeUpdate();\n            \n            System.out.println(String.format(&quot;%d row(s) deleted sucessfully&quot;, count));\n        }\n    }\n\n    public Boolean close() throws SQLException {\n        con.close();\n    }\n}\n</code></pre>\n<p>And here's the driver code:</p>\n<pre><code>import sqlite.SQLiteDatabase;\n\npublic class BankManagementSystem {\n    public static void main(String[] args) {\n        \n        try(Scanner sc = new Scanner(System.in))\n        {  \n            SQLiteDatabase sql = new SQLiteDatabase(&quot;login_details&quot;, &quot;(id int, name varchar(255), username varchar(255), password varchar(255))&quot;);\n            \n            \n//           sql.showTables();\n//           sql.insertData(1, &quot;rohan&quot;, &quot;rohan&quot;, &quot;1234&quot;);\n//           sql.deleteData(1);\n            sql.readData();\n            \n        }\n        catch(Exception e)\n        {\n            Logger.getLogger(BankManagementSystem.class.getName()).log(Level.SEVERE, null, e);\n        }\n    }\n}\n</code></pre>\n<p>When ran with the <code>sql.insertData(1, &quot;rohan&quot;, &quot;rohan&quot;, &quot;1234&quot;);</code> statement, its shows the following output:</p>\n<pre><code>1 row(s) added successfully\n</code></pre>\n<p>Then after running with the <code>sql.readData();</code> statement, it shows the data entry in NetBeans.\nHere's the output in NetBeans:</p>\n<pre><code>id    name                      username                  password\n1     rohan                     rohan                     1234 \n</code></pre>\n<p>But when I build the JAR file (clean and build option) then run the JAR file, it doesn't show the updated database.\nIt just shows:</p>\n<pre><code>id    name                      username                  password\n</code></pre>\n<p>Please help me out! I want the data to be consistent. When I update the database from NetBeans, it should also reflect in the JAR file also.</p>\n"},{"tags":["java","spring","logging","cxf"],"owner":{"account_id":6374796,"reputation":386,"user_id":4946127,"accept_rate":67,"display_name":"user2594"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694338840,"creation_date":1694338840,"question_id":77075547,"body_markdown":"We have an embedded JAX-RS web service within a stand-alone Java application using Apache CXF with Spring and having a traditional web.xml deployment descriptor to configure the beans.\r\n\r\nWhen we invoke an API call from a rest client, we could see the below logs getting generated which we wanted to suppress.\r\n\r\n    \r\n    Service http request on thread: Thread[http-nio-8088-exec-9,5,main]\r\n    Create a new message for processing\r\n    Request Headers: {accept-encoding=[gzip, deflate, br], Authorization=[***], cache-control=[no-cache], connection=[keep-alive], Content-Length=[2827], content-type=[application/json], host=[localhost:8088], postman-token=[e4a88b18-c864-4267-92b0-e8659007118c], Proxy-Authorization=[***], user-agent=[PostmanRuntime/7.29.2],consumer.id=[a3b799098c9e493a9b3a04ba4daedae091ajaqqo], svc.version=[2.0.0]}\r\n    Adding interceptor org.apache.cxf.transport.https.CertConstraintsInterceptor@7ac897c2 to phase pre-stream\r\n    Chain org.apache.cxf.phase.PhaseInterceptorChain@26a32a9c was created. Current flow:\r\n      pre-stream [CertConstraintsInterceptor]\r\n      unmarshal [JAXRSInInterceptor]\r\n      pre-logical [OneWayProcessorInterceptor]\r\n      invoke [ServiceInvokerInterceptor]\r\n      post-invoke [OutgoingChainInterceptor]\r\n    \r\n    Invoking handleMessage on interceptor org.apache.cxf.transport.https.CertConstraintsInterceptor@7ac897c2\r\n    Invoking handleMessage on interceptor org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor@735f6995\r\n    Trying to select a resource class, request path : /v1/api/fetch\r\n    Resource class\r\n    No method match, method name : implService, request path : /fetch, method @Path : /simulate, HTTP Method : POST, method HTTP Method : POST, ContentType : application/json, method @Consumes : application/json,application/xml,text/xml,, Accept : */*,, method @Produces : */*,.\r\n    Resource operation service may get selected\r\n    Resource operation service on the resource class \r\n    Request path is: /v1/api/fetch\r\n    Request HTTP method is: POST\r\n    Request contentType is: application/json\r\n    Accept contentType is: */*\r\n    Found operation: fetchService\r\n    Invoking handleMessage on interceptor org.apache.cxf.interceptor.OneWayProcessorInterceptor@13a230be\r\n    Invoking handleMessage on interceptor org.apache.cxf.interceptor.ServiceInvokerInterceptor@6c4f928\r\n\r\n\r\nWe are looking to suppress these logs. One way I could think of is by adding below:-\r\n\r\n    &lt;jaxrs:properties&gt;\r\n        &lt;entry key=&quot;org.apache.cxf.Logger&quot; value=&quot;org.apache.cxf.common.logging.Log4jLogger&quot; /&gt;\r\n    &lt;/jaxrs:properties&gt;\r\n\r\nto jax rs configuration in webContext.xml:\r\n\r\n    &lt;jaxrs:server address=&quot;/services&quot;&gt;\r\n        &lt;jaxrs:serviceBeans&gt;\r\n            &lt;ref bean=&quot;router${router.runas}DeliveryService&quot; /&gt;\r\n        &lt;/jaxrs:serviceBeans&gt;\r\n        &lt;jaxrs:providers&gt;\r\n            &lt;ref bean=&quot;provider&quot; /&gt;\r\n            &lt;ref bean=&quot;exceptionMapper&quot; /&gt;\r\n        &lt;/jaxrs:providers&gt;\r\n        &lt;jaxrs:properties&gt;\r\n            &lt;entry key=&quot;org.apache.cxf.Logger&quot; value=&quot;org.apache.cxf.common.logging.Log4jLogger&quot; /&gt;\r\n        &lt;/jaxrs:properties&gt;\r\n    &lt;/jaxrs:server&gt;\r\n\r\nAnd passing the following JVM args while starting up the application.\r\n\r\n    -Dlog4j.logger.org.apache.cxf.name=org.apache.cxf\r\n    -Dlog4j.logger.org.apache.cxf.level=ERROR\r\n\r\nBut this is not solving and we are still seeing the logs. Can someone please take a look and suggest where things are going wrong. TIA.","title":"Apache CXF logs are not getting suppressed","body":"<p>We have an embedded JAX-RS web service within a stand-alone Java application using Apache CXF with Spring and having a traditional web.xml deployment descriptor to configure the beans.</p>\n<p>When we invoke an API call from a rest client, we could see the below logs getting generated which we wanted to suppress.</p>\n<pre><code>Service http request on thread: Thread[http-nio-8088-exec-9,5,main]\nCreate a new message for processing\nRequest Headers: {accept-encoding=[gzip, deflate, br], Authorization=[***], cache-control=[no-cache], connection=[keep-alive], Content-Length=[2827], content-type=[application/json], host=[localhost:8088], postman-token=[e4a88b18-c864-4267-92b0-e8659007118c], Proxy-Authorization=[***], user-agent=[PostmanRuntime/7.29.2],consumer.id=[a3b799098c9e493a9b3a04ba4daedae091ajaqqo], svc.version=[2.0.0]}\nAdding interceptor org.apache.cxf.transport.https.CertConstraintsInterceptor@7ac897c2 to phase pre-stream\nChain org.apache.cxf.phase.PhaseInterceptorChain@26a32a9c was created. Current flow:\n  pre-stream [CertConstraintsInterceptor]\n  unmarshal [JAXRSInInterceptor]\n  pre-logical [OneWayProcessorInterceptor]\n  invoke [ServiceInvokerInterceptor]\n  post-invoke [OutgoingChainInterceptor]\n\nInvoking handleMessage on interceptor org.apache.cxf.transport.https.CertConstraintsInterceptor@7ac897c2\nInvoking handleMessage on interceptor org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor@735f6995\nTrying to select a resource class, request path : /v1/api/fetch\nResource class\nNo method match, method name : implService, request path : /fetch, method @Path : /simulate, HTTP Method : POST, method HTTP Method : POST, ContentType : application/json, method @Consumes : application/json,application/xml,text/xml,, Accept : */*,, method @Produces : */*,.\nResource operation service may get selected\nResource operation service on the resource class \nRequest path is: /v1/api/fetch\nRequest HTTP method is: POST\nRequest contentType is: application/json\nAccept contentType is: */*\nFound operation: fetchService\nInvoking handleMessage on interceptor org.apache.cxf.interceptor.OneWayProcessorInterceptor@13a230be\nInvoking handleMessage on interceptor org.apache.cxf.interceptor.ServiceInvokerInterceptor@6c4f928\n</code></pre>\n<p>We are looking to suppress these logs. One way I could think of is by adding below:-</p>\n<pre><code>&lt;jaxrs:properties&gt;\n    &lt;entry key=&quot;org.apache.cxf.Logger&quot; value=&quot;org.apache.cxf.common.logging.Log4jLogger&quot; /&gt;\n&lt;/jaxrs:properties&gt;\n</code></pre>\n<p>to jax rs configuration in webContext.xml:</p>\n<pre><code>&lt;jaxrs:server address=&quot;/services&quot;&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=&quot;router${router.runas}DeliveryService&quot; /&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n    &lt;jaxrs:providers&gt;\n        &lt;ref bean=&quot;provider&quot; /&gt;\n        &lt;ref bean=&quot;exceptionMapper&quot; /&gt;\n    &lt;/jaxrs:providers&gt;\n    &lt;jaxrs:properties&gt;\n        &lt;entry key=&quot;org.apache.cxf.Logger&quot; value=&quot;org.apache.cxf.common.logging.Log4jLogger&quot; /&gt;\n    &lt;/jaxrs:properties&gt;\n&lt;/jaxrs:server&gt;\n</code></pre>\n<p>And passing the following JVM args while starting up the application.</p>\n<pre><code>-Dlog4j.logger.org.apache.cxf.name=org.apache.cxf\n-Dlog4j.logger.org.apache.cxf.level=ERROR\n</code></pre>\n<p>But this is not solving and we are still seeing the logs. Can someone please take a look and suggest where things are going wrong. TIA.</p>\n"},{"tags":["java","mysql","json","jdbc","max-allowed-packet"],"comments":[{"owner":{"account_id":7035840,"reputation":33810,"user_id":5389997,"display_name":"Shadow"},"score":1,"creation_date":1694338666,"post_id":77075522,"comment_id":135875863,"body_markdown":"Nothing, really. If you bump into the packet size limot, then either you have to increase the limit or dexrease the size of the data you send.","body":"Nothing, really. If you bump into the packet size limot, then either you have to increase the limit or dexrease the size of the data you send."},{"owner":{"account_id":5577723,"reputation":2140,"user_id":4420649,"display_name":"Wilson Hauck"},"score":1,"creation_date":1694501664,"post_id":77075522,"comment_id":135895190,"body_markdown":"Is your organization financially impacted by this inability to process data someone is providing for your consumption?  If so, share this reality with the DBA and maybe he will consider taking it to the limit of 1G.  If RAM is available on the server.  HTOP or TOP provides clues on RAM availability and usage for most Linux type systems..  Windows has similar clues.","body":"Is your organization financially impacted by this inability to process data someone is providing for your consumption?  If so, share this reality with the DBA and maybe he will consider taking it to the limit of 1G.  If RAM is available on the server.  HTOP or TOP provides clues on RAM availability and usage for most Linux type systems..  Windows has similar clues."},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1694504169,"post_id":77075522,"comment_id":135895647,"body_markdown":"@WilsonHauck Thank you,  This problem does not happen too often, after we migrated to new google API for reading the insights, I considered like the old API a delay of 72 hours but seemingly new API is more than 5 days late so I am obligated to update my database values for at least 3 months which leads to this much info. Right now I have just broke down the number of records to save and once updated for all the clients there wouldn&#39;t be a problem.","body":"@WilsonHauck Thank you,  This problem does not happen too often, after we migrated to new google API for reading the insights, I considered like the old API a delay of 72 hours but seemingly new API is more than 5 days late so I am obligated to update my database values for at least 3 months which leads to this much info. Right now I have just broke down the number of records to save and once updated for all the clients there wouldn&#39;t be a problem."},{"owner":{"account_id":5577723,"reputation":2140,"user_id":4420649,"display_name":"Wilson Hauck"},"score":1,"creation_date":1694509676,"post_id":77075522,"comment_id":135896650,"body_markdown":"The very best always.  For performance tuning, view profile info.","body":"The very best always.  For performance tuning, view profile info."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1695001325,"post_id":77075522,"comment_id":135961325,"body_markdown":"Are you generating the input string in Java?  Can you stop before hitting the 64KB limit?  Or change the configuration if you will not exceed the hard limit of 1MB","body":"Are you generating the input string in Java?  Can you stop before hitting the 64KB limit?  Or change the configuration if you will not exceed the hard limit of 1MB"},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1695020639,"post_id":77075522,"comment_id":135962956,"body_markdown":"@RickJames,  I am doing the split before reaching the limit, I was wondering if there is another way t tackle the issue but seems that there is no other method.","body":"@RickJames,  I am doing the split before reaching the limit, I was wondering if there is another way t tackle the issue but seems that there is no other method."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":1,"creation_date":1695063318,"post_id":77075522,"comment_id":135971393,"body_markdown":"typo:  the hard limit is 1GB.","body":"typo:  the hard limit is 1GB."}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694338358,"creation_date":1694338358,"question_id":77075522,"body_markdown":"I have this error while inserting batch in mysql:\r\n\r\n    java.sql.BatchUpdateException: Packet for query is too large (70,566,811 &gt; 67,108,864). You can change this value on the server by setting the &#39;max_allowed_packet&#39; variable.\r\n\r\nI need to read the insights from a Google-API day by day and save them using [fetchMultiDailyMetricsTimeSeries Method][1]. Everyday, the program should get executed to read the info related to 3 days ago,but I discovered that Google is not updated for last three days and **Now** I am obligated to update the info in my table for at least 3 months. Here arise the problem that we receive loads of data on a field typed JSON in `mysql` returned from API. So, I cannot change the table structure since there are other programs reading from this table and this problem will be no longer valid after updating the table.\r\n\r\nThe query is a simple Insert that I need to to consider `ON DUPLICATE UPDATE`. In fact, I cannot change the `max-allowed-pocket` variable (The ***DBA*** does not want to change it). \r\n\r\nI have split my list in a way that for every 500 records, the program goes to do the insert. However, it seems that it is not enough and the received data is too large even in 500 records limit. right now, I am trying to make the break-point smaller and also fetch the info for a shorter loop of days like 10 so that there would not be a problem but this would be too slow since I need to perform these for all the clients (more than 20) and for 90 days.\r\n\r\nI use `JAVA` and `JDBC Prepared Statement`. \r\n\r\nWhat can I do else?\r\n\r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries","title":"max-allowed-packet error in sql while fetching data from Google API and batch insert","body":"<p>I have this error while inserting batch in mysql:</p>\n<pre><code>java.sql.BatchUpdateException: Packet for query is too large (70,566,811 &gt; 67,108,864). You can change this value on the server by setting the 'max_allowed_packet' variable.\n</code></pre>\n<p>I need to read the insights from a Google-API day by day and save them using <a href=\"https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries\" rel=\"nofollow noreferrer\">fetchMultiDailyMetricsTimeSeries Method</a>. Everyday, the program should get executed to read the info related to 3 days ago,but I discovered that Google is not updated for last three days and <strong>Now</strong> I am obligated to update the info in my table for at least 3 months. Here arise the problem that we receive loads of data on a field typed JSON in <code>mysql</code> returned from API. So, I cannot change the table structure since there are other programs reading from this table and this problem will be no longer valid after updating the table.</p>\n<p>The query is a simple Insert that I need to to consider <code>ON DUPLICATE UPDATE</code>. In fact, I cannot change the <code>max-allowed-pocket</code> variable (The <em><strong>DBA</strong></em> does not want to change it).</p>\n<p>I have split my list in a way that for every 500 records, the program goes to do the insert. However, it seems that it is not enough and the received data is too large even in 500 records limit. right now, I am trying to make the break-point smaller and also fetch the info for a shorter loop of days like 10 so that there would not be a problem but this would be too slow since I need to perform these for all the clients (more than 20) and for 90 days.</p>\n<p>I use <code>JAVA</code> and <code>JDBC Prepared Statement</code>.</p>\n<p>What can I do else?</p>\n"},{"tags":["java","proguard","quarkus","obfuscation","uberjar"],"owner":{"account_id":9502539,"reputation":814,"user_id":7063104,"display_name":"Archsx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694337593,"creation_date":1694337593,"question_id":77075473,"body_markdown":"I&#39;m building a regular uber-jar (not native executable file) based on Quarkus. and I also wanna obfuscate the uber-jar. so I build the jar file with \r\n```\r\n ./gradlew quarkusBuild -Dquarkus.package.type=uber-jar\r\n\r\n```\r\nand here is part of build.gradle.kts\r\n```\r\n tasks.register(&quot;proguard&quot;, JavaExec::class) {\r\n    classpath = files(&quot;$rootDir/proguard/lib/proguard.jar&quot;)\r\n    main = &quot;proguard.ProGuard&quot;\r\n    args(\r\n        &quot;-include&quot;,\r\n        &quot;proguard.conf&quot;,\r\n        &quot;-injars&quot;,\r\n        &quot;build/my-project-1.0.0-runner.jar&quot;,\r\n        &quot;-outjars&quot;,\r\n        &quot;build/app.jar&quot;\r\n    )\r\n }\r\n\r\n```\r\nhowerver, after I build the jar and run `./gradlew proguard`, I got tons of warnings, \r\n```\r\nWarning: there were 3260 unresolved references to classes or interfaces.\r\n\r\nWarning: there were 56 unresolved references to program class members.\r\n\r\nWarning: there were 204 unresolved references to library class members.\r\n\r\n```\r\n\r\n**Thounds** of warnings !!  I think maybe I should use option `-keep` to prevent some package from obfuscating.but there are too many warnings and I wonder is it the right way to fix the warning. anyway I add some `-keep` option in `proguard.conf`, and it is interesting that I find some option not work. here is my proguard.conf:\r\n```\r\n-target 17\r\n# -verbose\r\n\r\n-dontshrink\r\n\r\n-dontoptimize\r\n\r\n-dontwarn\r\n\r\n-adaptclassstrings\r\n\r\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.base.jmod\r\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.logging.jmod\r\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.sql.jmod\r\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.xml.jmod\r\n\r\n\r\n\r\n\r\n# Keep all Quarkus-related classes and resources\r\n-keep class io.quarkus.** { *; }\r\n-keep class io.quarkus.vertx.** { *; }\r\n-keep interface io.quarkus.vertx.** { *; }\r\n-keep class io.vertx.** { *; }\r\n-keep class io.vertx.**\r\n-keep class io.vertx.** {\r\n    *;\r\n}\r\n\r\n-keep interface io.vertx.** { *; }\r\n-keep interface com.sun.** { *; }\r\n-keep interface io.quarkus.** { *; }\r\n-keep class javax.** { *; }\r\n-keep class com.google.common.** { *; }\r\n-keep class com.sun.** { *; }\r\n-keep class java.util.logging.Level { *; }\r\n-keep class com.fasterxml.jackson.annotation.** { *; }\r\n-dontwarn  com.fasterxml.jackson.databind\r\n-dontwarn  javax.annotation.**\r\n-dontwarn  javax.xml.**\r\n-dontwarn  javax.**\r\n-dontwarn  java.awt.**\r\n-keep class javax.annotation.** { *; }\r\n-keep class  org.apache.log4j.** { *; }\r\n-keep class  org.apache.log4j.**\r\n-keep class  org.jboss.** { *; }\r\n-keep class  org.jboss.**\r\n-keep class  io.netty.** { *; }\r\n-keep class  io.netty.**\r\n-keep class  sun.misc.** { *; }\r\n-keep class  sun.misc.**\r\n\r\n-keepattributes *Annotation*,Signature\r\n\r\n# Keep application-specific classes and resources\r\n-keep class org.myproject.** { *; }\r\n\r\n```\r\nAs you can see , I&#39;ve add `-keep class  io.netty.** { *; }\r\n-keep class  io.netty.**` but still got io.netty warning:\r\n```\r\n// part of the massive warning\r\n\r\nWarning: io.netty.handler.ssl.OpenSsl: can&#39;t find referenced class io.netty.internal.tcnative.SSL\r\nWarning: io.netty.handler.ssl.OpenSsl: can&#39;t find referenced class io.netty.internal.tcnative.SSLContext\r\n\r\n// ...\r\n// also, I&#39;ve add -keep org.jboss.**\r\nWarning: io.netty.handler.codec.marshalling.LimitingByteInput: can&#39;t find referenced class org.jboss.marshalling.ByteInput \r\n\r\n// and some similar occasion, I&#39;ve add the keep option but still get warning\r\nWarning: com.google.common.util.concurrent.AbstractFuture$UnsafeAtomicHelper: can&#39;t find referenced class sun.misc.Unsafe\r\n\r\n\r\n// I&#39;ve add java.base.jmod and java.logging.jmod, java.sql.jmod and java.xml.jmod \r\n// now I have to add java.beans.jmod ? I have to add all the jmod in the jdk?\r\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can&#39;t find referenced class java.beans.Transient\r\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can&#39;t find referenced class java.beans.ConstructorProperties\r\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can&#39;t find referenced class java.beans.Transient\r\n\r\n\r\n\r\n```\r\nmaybe you&#39;ve notice that I have even add `-dontwarn` but why I **still** got the thounds warnings . \r\n","title":"proguard.conf option -keep and -dontwarn not work","body":"<p>I'm building a regular uber-jar (not native executable file) based on Quarkus. and I also wanna obfuscate the uber-jar. so I build the jar file with</p>\n<pre><code> ./gradlew quarkusBuild -Dquarkus.package.type=uber-jar\n\n</code></pre>\n<p>and here is part of build.gradle.kts</p>\n<pre><code> tasks.register(&quot;proguard&quot;, JavaExec::class) {\n    classpath = files(&quot;$rootDir/proguard/lib/proguard.jar&quot;)\n    main = &quot;proguard.ProGuard&quot;\n    args(\n        &quot;-include&quot;,\n        &quot;proguard.conf&quot;,\n        &quot;-injars&quot;,\n        &quot;build/my-project-1.0.0-runner.jar&quot;,\n        &quot;-outjars&quot;,\n        &quot;build/app.jar&quot;\n    )\n }\n\n</code></pre>\n<p>howerver, after I build the jar and run <code>./gradlew proguard</code>, I got tons of warnings,</p>\n<pre><code>Warning: there were 3260 unresolved references to classes or interfaces.\n\nWarning: there were 56 unresolved references to program class members.\n\nWarning: there were 204 unresolved references to library class members.\n\n</code></pre>\n<p><strong>Thounds</strong> of warnings !!  I think maybe I should use option <code>-keep</code> to prevent some package from obfuscating.but there are too many warnings and I wonder is it the right way to fix the warning. anyway I add some <code>-keep</code> option in <code>proguard.conf</code>, and it is interesting that I find some option not work. here is my proguard.conf:</p>\n<pre><code>-target 17\n# -verbose\n\n-dontshrink\n\n-dontoptimize\n\n-dontwarn\n\n-adaptclassstrings\n\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.base.jmod\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.logging.jmod\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.sql.jmod\n-libraryjars /usr/lib/jvm/temurin-17-jdk-amd64/jmods/java.xml.jmod\n\n\n\n\n# Keep all Quarkus-related classes and resources\n-keep class io.quarkus.** { *; }\n-keep class io.quarkus.vertx.** { *; }\n-keep interface io.quarkus.vertx.** { *; }\n-keep class io.vertx.** { *; }\n-keep class io.vertx.**\n-keep class io.vertx.** {\n    *;\n}\n\n-keep interface io.vertx.** { *; }\n-keep interface com.sun.** { *; }\n-keep interface io.quarkus.** { *; }\n-keep class javax.** { *; }\n-keep class com.google.common.** { *; }\n-keep class com.sun.** { *; }\n-keep class java.util.logging.Level { *; }\n-keep class com.fasterxml.jackson.annotation.** { *; }\n-dontwarn  com.fasterxml.jackson.databind\n-dontwarn  javax.annotation.**\n-dontwarn  javax.xml.**\n-dontwarn  javax.**\n-dontwarn  java.awt.**\n-keep class javax.annotation.** { *; }\n-keep class  org.apache.log4j.** { *; }\n-keep class  org.apache.log4j.**\n-keep class  org.jboss.** { *; }\n-keep class  org.jboss.**\n-keep class  io.netty.** { *; }\n-keep class  io.netty.**\n-keep class  sun.misc.** { *; }\n-keep class  sun.misc.**\n\n-keepattributes *Annotation*,Signature\n\n# Keep application-specific classes and resources\n-keep class org.myproject.** { *; }\n\n</code></pre>\n<p>As you can see , I've add <code>-keep class  io.netty.** { *; } -keep class  io.netty.**</code> but still got io.netty warning:</p>\n<pre><code>// part of the massive warning\n\nWarning: io.netty.handler.ssl.OpenSsl: can't find referenced class io.netty.internal.tcnative.SSL\nWarning: io.netty.handler.ssl.OpenSsl: can't find referenced class io.netty.internal.tcnative.SSLContext\n\n// ...\n// also, I've add -keep org.jboss.**\nWarning: io.netty.handler.codec.marshalling.LimitingByteInput: can't find referenced class org.jboss.marshalling.ByteInput \n\n// and some similar occasion, I've add the keep option but still get warning\nWarning: com.google.common.util.concurrent.AbstractFuture$UnsafeAtomicHelper: can't find referenced class sun.misc.Unsafe\n\n\n// I've add java.base.jmod and java.logging.jmod, java.sql.jmod and java.xml.jmod \n// now I have to add java.beans.jmod ? I have to add all the jmod in the jdk?\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can't find referenced class java.beans.Transient\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can't find referenced class java.beans.ConstructorProperties\nWarning: com.fasterxml.jackson.databind.ext.Java7SupportImpl: can't find referenced class java.beans.Transient\n\n\n\n</code></pre>\n<p>maybe you've notice that I have even add <code>-dontwarn</code> but why I <strong>still</strong> got the thounds warnings .</p>\n"},{"tags":["java","android","overlay","android-button","android-overlay"],"answers":[{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694227898,"creation_date":1694227898,"answer_id":77070664,"question_id":77069843,"body_markdown":"Your showTextDialog() method in FloatingWidgetService.java is empty and that&#39;s why nothing appears when you call this empty method:\r\n\r\n     private void showTextDialog() {\r\n    \r\n        }\r\n\r\ntry this to test if it is properly working or not and then replace it with your code you want:\r\n\r\n    private void showTextDialog() {\r\n        Toast.makeText(this, &quot;Button clicked!&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n\r\n\r\n","title":"Why floating widget overlay button is not visible and code is without error?","body":"<p>Your showTextDialog() method in FloatingWidgetService.java is empty and that's why nothing appears when you call this empty method:</p>\n<pre><code> private void showTextDialog() {\n\n    }\n</code></pre>\n<p>try this to test if it is properly working or not and then replace it with your code you want:</p>\n<pre><code>private void showTextDialog() {\n    Toast.makeText(this, &quot;Button clicked!&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694337406,"creation_date":1694336566,"answer_id":77075420,"question_id":77069843,"body_markdown":"I have done some modification in your files. This code works fine when i tested it on my physical device, but it has one drawback that when user granted the permission of overlay it do not show floating widget but when you relaunch the app then it show the flaoting button. if you want to achieve this when user granted permission and it should show the flaoting widget immediately after it you can do it by imlementing broadcast receiver (with permission of MANAGE_OVERLAY_PERMISSION&quot;) and using the foregroundservice: however the code is this:\r\n\r\nMainActivity.java:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            startFloatingWidgetService();\r\n        }\r\n        private void startFloatingWidgetService() {\r\n            Intent intent = new Intent(this, FloatingWidgetService.class);\r\n            startService(intent);\r\n        }\r\n    }\r\n\r\nFloatingWidgetService.java\r\n\r\nIn this class the main change i did is to check if we have permission to overlay or not. if not request permission if it&#39;s already give or not needed then show widget.\r\n\r\n    public class FloatingWidgetService extends Service {\r\n\r\n    \r\n    private WindowManager mWindowManager;\r\n    private View mFloatingWidgetView;\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        \r\n        return null;\r\n    }\r\n\r\n    // Method to request the SYSTEM_ALERT_WINDOW permission\r\n    private void requestOverlayPermission() {\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\r\n            intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n    // Method to create the floating widget\r\n    private void createFloatingWidget() {\r\n\r\n        // Inflate the layout for the floating widget\r\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\r\n                null);\r\n\r\n        // Initialize the button on the floating widget\r\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Handle the button click event\r\n                showTextDialog();\r\n                // You can perform other actions here as needed\r\n            }\r\n        });\r\n\r\n        // Initialize the WindowManager\r\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n\r\n        // Set up WindowManager.LayoutParams for the floating widget\r\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\r\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                PixelFormat.TRANSLUCENT\r\n        );\r\n\r\n        // Set the gravity of the floating widget (position on the screen)\r\n        params.gravity = Gravity.BOTTOM | Gravity.END;\r\n\r\n        // Add the floating widget to the WindowManager\r\n        mWindowManager.addView(mFloatingWidgetView, params);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        // Check if the permission is granted (only for API level 23 and higher)\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\r\n            // You don&#39;t have permission to draw overlays, so request it\r\n            requestOverlayPermission();\r\n        } else {\r\n            // Permission is granted, proceed with creating the floating widget\r\n            createFloatingWidget();\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\r\n            mWindowManager.removeView(mFloatingWidgetView);\r\n        }\r\n    }\r\n\r\n    private void showTextDialog() {\r\n\r\n                                 }\r\n    }\r\n\r\nactivity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Hello World!&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/start_button&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;16dp&quot;\r\n            android:text=&quot;@string/start_floating_widget_service&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.5&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nfloating_widget_layout.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/floating_button&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;end&quot;\r\n            android:background=&quot;@android:color/holo_red_light&quot;\r\n            android:text=&quot;@string/floating_widget_button&quot;\r\n            android:textColor=&quot;#212121&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nAndroidManifest.xml\r\n\r\nIn your manifest you didn&#39;t added service in your manifest.\r\n\r\n    &lt;service\r\n                android:name=&quot;.FloatingWidgetService&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:exported=&quot;true&quot; /&gt;\r\n\r\nif you don&#39;t face any issue with the overlay permission then it should work by only adding service to your manifest but to be on the safe side add the code that I provided in the FloatingWidgetService class to verify the permission.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.FloatingWidget&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n    \r\n            &lt;service\r\n                android:name=&quot;.FloatingWidgetService&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:exported=&quot;true&quot; /&gt;\r\n    \r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\n\r\nYou can access the code here : [Github][1]\r\n\r\nlet me know if it works for you or not.\r\n\r\n\r\n  [1]: https://github.com/sarmadalij/FloatingWidget","title":"Why floating widget overlay button is not visible and code is without error?","body":"<p>I have done some modification in your files. This code works fine when i tested it on my physical device, but it has one drawback that when user granted the permission of overlay it do not show floating widget but when you relaunch the app then it show the flaoting button. if you want to achieve this when user granted permission and it should show the flaoting widget immediately after it you can do it by imlementing broadcast receiver (with permission of MANAGE_OVERLAY_PERMISSION&quot;) and using the foregroundservice: however the code is this:</p>\n<p>MainActivity.java:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        startFloatingWidgetService();\n    }\n    private void startFloatingWidgetService() {\n        Intent intent = new Intent(this, FloatingWidgetService.class);\n        startService(intent);\n    }\n}\n</code></pre>\n<p>FloatingWidgetService.java</p>\n<p>In this class the main change i did is to check if we have permission to overlay or not. if not request permission if it's already give or not needed then show widget.</p>\n<pre><code>public class FloatingWidgetService extends Service {\n\n\nprivate WindowManager mWindowManager;\nprivate View mFloatingWidgetView;\n@Override\npublic IBinder onBind(Intent intent) {\n    \n    return null;\n}\n\n// Method to request the SYSTEM_ALERT_WINDOW permission\nprivate void requestOverlayPermission() {\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n        Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\n        intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        startActivity(intent);\n    }\n}\n\n// Method to create the floating widget\nprivate void createFloatingWidget() {\n\n    // Inflate the layout for the floating widget\n    mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\n            null);\n\n    // Initialize the button on the floating widget\n    Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\n    button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            // Handle the button click event\n            showTextDialog();\n            // You can perform other actions here as needed\n        }\n    });\n\n    // Initialize the WindowManager\n    mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\n\n    // Set up WindowManager.LayoutParams for the floating widget\n    WindowManager.LayoutParams params = new WindowManager.LayoutParams(\n            WindowManager.LayoutParams.WRAP_CONTENT,\n            WindowManager.LayoutParams.WRAP_CONTENT,\n            WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\n            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n            PixelFormat.TRANSLUCENT\n    );\n\n    // Set the gravity of the floating widget (position on the screen)\n    params.gravity = Gravity.BOTTOM | Gravity.END;\n\n    // Add the floating widget to the WindowManager\n    mWindowManager.addView(mFloatingWidgetView, params);\n}\n\n@Override\npublic void onCreate() {\n    super.onCreate();\n\n    // Check if the permission is granted (only for API level 23 and higher)\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\n        // You don't have permission to draw overlays, so request it\n        requestOverlayPermission();\n    } else {\n        // Permission is granted, proceed with creating the floating widget\n        createFloatingWidget();\n    }\n\n\n\n}\n\n@Override\npublic void onDestroy() {\n    super.onDestroy();\n    if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\n        mWindowManager.removeView(mFloatingWidgetView);\n    }\n}\n\nprivate void showTextDialog() {\n\n                             }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello World!&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/start_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;16dp&quot;\n        android:text=&quot;@string/start_floating_widget_service&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.5&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>floating_widget_layout.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/floating_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;end&quot;\n        android:background=&quot;@android:color/holo_red_light&quot;\n        android:text=&quot;@string/floating_widget_button&quot;\n        android:textColor=&quot;#212121&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml</p>\n<p>In your manifest you didn't added service in your manifest.</p>\n<pre><code>&lt;service\n            android:name=&quot;.FloatingWidgetService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot; /&gt;\n</code></pre>\n<p>if you don't face any issue with the overlay permission then it should work by only adding service to your manifest but to be on the safe side add the code that I provided in the FloatingWidgetService class to verify the permission.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.FloatingWidget&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n        &lt;service\n            android:name=&quot;.FloatingWidgetService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot; /&gt;\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>You can access the code here : <a href=\"https://github.com/sarmadalij/FloatingWidget\" rel=\"nofollow noreferrer\">Github</a></p>\n<p>let me know if it works for you or not.</p>\n"}],"owner":{"account_id":18331583,"reputation":39,"user_id":13349991,"display_name":"Mirek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77075420,"answer_count":2,"score":0,"last_activity_date":1694337406,"creation_date":1694206626,"question_id":77069843,"body_markdown":"I tried to make floating widget overlay button - like messenger profile photo widget, which is displayed when someone send you message. I used these files. When I run program, there is nothing invalid in code. I see app with button but there is nothing visible after click.\r\n\r\nMainActivity.java:\r\n```java\r\npackage com.example.mywidget;\r\n\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class MainActivity extends Activity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        startFloatingWidgetService();\r\n\r\n    };\r\n\r\n    private void startFloatingWidgetService() {\r\n        Intent intent = new Intent(this, FloatingWidgetService.class);\r\n        startService(intent);\r\n    }\r\n};\r\n```\r\n\r\n\r\nFloatingWidgetService.java\r\n```java\r\npackage com.example.mywidget; \r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.graphics.PixelFormat;\r\nimport android.os.IBinder;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.LinearLayout;\r\n\r\npublic class FloatingWidgetService extends Service {\r\n\r\n    private WindowManager mWindowManager;\r\n    private View mFloatingWidgetView;\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout, null);\r\n\r\n        // Inicializace tlač&#237;tka\r\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n              \r\n                showTextDialog();\r\n            }\r\n        });\r\n\r\n        // Inicializace WindowManager\r\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY, \r\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                PixelFormat.TRANSLUCENT\r\n        );\r\n\r\n        params.gravity = Gravity.BOTTOM | Gravity.END;\r\n        mWindowManager.addView(mFloatingWidgetView, params);\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\r\n            mWindowManager.removeView(mFloatingWidgetView);\r\n        }\r\n    }\r\n\r\n    private void showTextDialog() {\r\n\r\n    }\r\n}\r\n``` \r\n\r\nactivity_main.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Hello World!&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/start_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Start Floating Widget Service&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nfloating_widget_layout.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/floating_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;dfdsfdasdfasdfAFASD&quot;\r\n        android:layout_gravity=&quot;end&quot;\r\n        android:background=&quot;@android:color/holo_red_light&quot;/&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nAndroidManifest.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Mywidget&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"Why floating widget overlay button is not visible and code is without error?","body":"<p>I tried to make floating widget overlay button - like messenger profile photo widget, which is displayed when someone send you message. I used these files. When I run program, there is nothing invalid in code. I see app with button but there is nothing visible after click.</p>\n<p>MainActivity.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.mywidget;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        startFloatingWidgetService();\n\n    };\n\n    private void startFloatingWidgetService() {\n        Intent intent = new Intent(this, FloatingWidgetService.class);\n        startService(intent);\n    }\n};\n</code></pre>\n<p>FloatingWidgetService.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.mywidget; \n\nimport android.app.Service;\nimport android.content.Intent;\nimport android.graphics.PixelFormat;\nimport android.os.IBinder;\nimport android.view.Gravity;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\n\npublic class FloatingWidgetService extends Service {\n\n    private WindowManager mWindowManager;\n    private View mFloatingWidgetView;\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout, null);\n\n        // Inicializace tlačítka\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n              \n                showTextDialog();\n            }\n        });\n\n        // Inicializace WindowManager\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY, \n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n                PixelFormat.TRANSLUCENT\n        );\n\n        params.gravity = Gravity.BOTTOM | Gravity.END;\n        mWindowManager.addView(mFloatingWidgetView, params);\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\n            mWindowManager.removeView(mFloatingWidgetView);\n        }\n    }\n\n    private void showTextDialog() {\n\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello World!&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/start_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Start Floating Widget Service&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>floating_widget_layout.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/floating_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;dfdsfdasdfasdfAFASD&quot;\n        android:layout_gravity=&quot;end&quot;\n        android:background=&quot;@android:color/holo_red_light&quot;/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Mywidget&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","google-books"],"answers":[{"tags":[],"owner":{"account_id":8017240,"reputation":68,"user_id":6047091,"display_name":"Victoria K"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1520255389,"creation_date":1520255389,"answer_id":49111250,"question_id":48886400,"body_markdown":"As I&#39;ve understood, the problem is in my country(Belarus). Looks like Google Books APi doesn&#39;t work in Belarus. Problem can be fixed by using VPN.","title":"Google books api always returns nothing","body":"<p>As I've understood, the problem is in my country(Belarus). Looks like Google Books APi doesn't work in Belarus. Problem can be fixed by using VPN.</p>\n"}],"owner":{"account_id":8017240,"reputation":68,"user_id":6047091,"display_name":"Victoria K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1045,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49111250,"answer_count":1,"score":0,"last_activity_date":1694337371,"creation_date":1519133272,"question_id":48886400,"body_markdown":"I am trying to use Google books API but for any request I receive `totalItems = 0`.\r\n\r\nI&#39;ve tried to send the request in chrome, for example: \r\n\r\n&gt; https://www.googleapis.com/books/v1/volumes?q=flowers+inauthor:keyes&amp;key=MY_KEY\r\n\r\nAlso I&#39;ve tried the approach, described here:\r\n\r\nhttps://github.com/google/google-api-java-client-samples/blob/master/books-cmdline-sample/src/main/java/com/google/api/services/samples/books/cmdline/BooksSample.java\r\n\r\n\r\nAnd for any query with any parameters I always receive nothing:\r\n\r\n    {\r\n     &quot;kind&quot;: &quot;books#volumes&quot;,\r\n     &quot;totalItems&quot;: 0\r\n    }\r\n\r\nI generated key using developer console: https://console.developers.google.com and selected option Api Key.\r\n\r\n\r\n","title":"Google books api always returns nothing","body":"<p>I am trying to use Google books API but for any request I receive <code>totalItems = 0</code>.</p>\n<p>I've tried to send the request in chrome, for example:</p>\n<blockquote>\n<p><a href=\"https://www.googleapis.com/books/v1/volumes?q=flowers+inauthor:keyes&amp;key=MY_KEY\" rel=\"nofollow noreferrer\">https://www.googleapis.com/books/v1/volumes?q=flowers+inauthor:keyes&amp;key=MY_KEY</a></p>\n</blockquote>\n<p>Also I've tried the approach, described here:</p>\n<p><a href=\"https://github.com/google/google-api-java-client-samples/blob/master/books-cmdline-sample/src/main/java/com/google/api/services/samples/books/cmdline/BooksSample.java\" rel=\"nofollow noreferrer\">https://github.com/google/google-api-java-client-samples/blob/master/books-cmdline-sample/src/main/java/com/google/api/services/samples/books/cmdline/BooksSample.java</a></p>\n<p>And for any query with any parameters I always receive nothing:</p>\n<pre><code>{\n &quot;kind&quot;: &quot;books#volumes&quot;,\n &quot;totalItems&quot;: 0\n}\n</code></pre>\n<p>I generated key using developer console: <a href=\"https://console.developers.google.com\" rel=\"nofollow noreferrer\">https://console.developers.google.com</a> and selected option Api Key.</p>\n"},{"tags":["java","frequency"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1658998768,"post_id":73149937,"comment_id":129192758,"body_markdown":"When word `i` is the same as word `j`, you increment `frequency[i]`. What about `frequency[j]`?","body":"When word <code>i</code> is the same as word <code>j</code>, you increment <code>frequency[i]</code>. What about <code>frequency[j]</code>?"}],"answers":[{"tags":[],"owner":{"account_id":15572374,"reputation":108,"user_id":12490479,"display_name":"Woutenator"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658999592,"creation_date":1658999592,"answer_id":73150202,"question_id":73149937,"body_markdown":"I would use a Map for this. A map can be used to store a value for a given key. You can use your words as keys and their counts as values. Using a Map makes your code easier to understand, shorter, and less prone to errors. For example:\r\n\r\n    import java.util.Scanner;\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            HashMap&lt;String, Integer&gt; frequencies = new HashMap&lt;&gt;();\r\n            Scanner s = new Scanner(System.in);\r\n    \r\n            int wordCount = s.nextInt();\r\n      \r\n            for (int i = 0; i &lt; wordCount; ++i) {\r\n                String word = s.next();\r\n                int count = frequencies.getOrDefault(word, 0);\r\n                frequencies.put(word, count + 1);\r\n            }\r\n      \r\n            for (Map.Entry&lt;String, Integer&gt; item : frequencies.entrySet()) {\r\n                System.out.println(item.getKey() + &quot;: &quot; + item.getValue());\r\n            }\r\n        }\r\n    }","title":"Word frequencies","body":"<p>I would use a Map for this. A map can be used to store a value for a given key. You can use your words as keys and their counts as values. Using a Map makes your code easier to understand, shorter, and less prone to errors. For example:</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Map;\nimport java.util.HashMap;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        HashMap&lt;String, Integer&gt; frequencies = new HashMap&lt;&gt;();\n        Scanner s = new Scanner(System.in);\n\n        int wordCount = s.nextInt();\n  \n        for (int i = 0; i &lt; wordCount; ++i) {\n            String word = s.next();\n            int count = frequencies.getOrDefault(word, 0);\n            frequencies.put(word, count + 1);\n        }\n  \n        for (Map.Entry&lt;String, Integer&gt; item : frequencies.entrySet()) {\n            System.out.println(item.getKey() + &quot;: &quot; + item.getValue());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2777627,"reputation":775,"user_id":2390877,"accept_rate":60,"display_name":"Yves V."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658999709,"creation_date":1658999709,"answer_id":73150236,"question_id":73149937,"body_markdown":"For such a scenario you, either use a Map, where you keep the frequency for each word, or you can even do it with a stream and a group by. You don&#39;t even need to know the number of words in advance, assuming you simply split them by a space.\r\n\r\nWith a stream it&#39;s basically a oneliner:\r\n\r\n```\r\nString input = &quot;pickle test rick Pickle test pickle&quot;;\r\n// With a stream:\r\nMap&lt;String, Long&gt; result = Arrays.stream(input.split(&quot; &quot;)).collect(Collectors.groupingBy(s-&gt;s, Collectors.counting()));\r\n```\r\n\r\nThe map contains:\r\n```\r\n{Pickle=1, test=2, rick=1, pickle=2}\r\n```\r\n\r\nIf you don&#39;t like streams, simply iterate manually over the words, and increment the value of the word (which is used as key in your map).","title":"Word frequencies","body":"<p>For such a scenario you, either use a Map, where you keep the frequency for each word, or you can even do it with a stream and a group by. You don't even need to know the number of words in advance, assuming you simply split them by a space.</p>\n<p>With a stream it's basically a oneliner:</p>\n<pre><code>String input = &quot;pickle test rick Pickle test pickle&quot;;\n// With a stream:\nMap&lt;String, Long&gt; result = Arrays.stream(input.split(&quot; &quot;)).collect(Collectors.groupingBy(s-&gt;s, Collectors.counting()));\n</code></pre>\n<p>The map contains:</p>\n<pre><code>{Pickle=1, test=2, rick=1, pickle=2}\n</code></pre>\n<p>If you don't like streams, simply iterate manually over the words, and increment the value of the word (which is used as key in your map).</p>\n"},{"tags":[],"owner":{"account_id":1671119,"reputation":1077,"user_id":1537580,"accept_rate":62,"display_name":"FrancescoDS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659000941,"creation_date":1659000941,"answer_id":73150516,"question_id":73149937,"body_markdown":"the problem is in this instruction:\r\n\r\n    if (wordsList[i].equals(wordsList[j]))\r\n\r\n`wordsList[j]` is null if j &gt; i. This happens because you scan the words in external for, so in the inner for you don&#39;t know the words at indexes &gt; i. \r\n\r\nBecause of that, when you perform the comparison, the second word results as null for indexes j &gt; i.\r\n\r\n\r\n   ","title":"Word frequencies","body":"<p>the problem is in this instruction:</p>\n<pre><code>if (wordsList[i].equals(wordsList[j]))\n</code></pre>\n<p><code>wordsList[j]</code> is null if j &gt; i. This happens because you scan the words in external for, so in the inner for you don't know the words at indexes &gt; i.</p>\n<p>Because of that, when you perform the comparison, the second word results as null for indexes j &gt; i.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659006750,"creation_date":1659002561,"answer_id":73150930,"question_id":73149937,"body_markdown":"Creating a `HashMap` containing frequencies of each word is the most performant approach.\r\n\r\nOne of the ways to do it is by using method [`merge()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)), that was introduced in the `Map` interface with Java 8. It expects three arguments: a *key*, a *value* to be associated with that *key* (if it was not present in the map) and a *function* that would be evaluated if the already exists, and we need to merge the previous value and a new one.\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        int numberWords = scanner.nextInt();\r\n        \r\n        Map&lt;String, Integer&gt; frequencies = new HashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; numberWords; i++) {\r\n            frequencies.merge(scanner.next(), 1, Integer::sum);\r\n        }\r\n        \r\n        frequencies.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\r\n    }\r\n\r\n*Output:*\r\n```\r\nPickle -&gt; 1\r\ntest -&gt; 2\r\nrick -&gt; 1\r\npickle -&gt; 2\r\n```\r\n\r\nIn case if you&#39;re comfortable with Stream API, you can approach this problem using built-in *collector* [`toMap()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)) (***note*** that we can read the input directly from the stream):\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        \r\n        Map&lt;String, Integer&gt; frequencies = IntStream.range(0,scanner.nextInt())\r\n            .mapToObj(i -&gt; scanner.next())\r\n            .collect(Collectors.toMap(\r\n                Function.identity(),\r\n                i -&gt; 1,\r\n                Integer::sum\r\n            ));\r\n        \r\n        frequencies.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\r\n    }\r\n\r\n*Output:*\r\n```\r\nPickle -&gt; 1\r\ntest -&gt; 2\r\nrick -&gt; 1\r\npickle -&gt; 2\r\n```","title":"Word frequencies","body":"<p>Creating a <code>HashMap</code> containing frequencies of each word is the most performant approach.</p>\n<p>One of the ways to do it is by using method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\"><code>merge()</code></a>, that was introduced in the <code>Map</code> interface with Java 8. It expects three arguments: a <em>key</em>, a <em>value</em> to be associated with that <em>key</em> (if it was not present in the map) and a <em>function</em> that would be evaluated if the already exists, and we need to merge the previous value and a new one.</p>\n<pre><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    int numberWords = scanner.nextInt();\n    \n    Map&lt;String, Integer&gt; frequencies = new HashMap&lt;&gt;();\n    for (int i = 0; i &lt; numberWords; i++) {\n        frequencies.merge(scanner.next(), 1, Integer::sum);\n    }\n    \n    frequencies.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Pickle -&gt; 1\ntest -&gt; 2\nrick -&gt; 1\npickle -&gt; 2\n</code></pre>\n<p>In case if you're comfortable with Stream API, you can approach this problem using built-in <em>collector</em> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>toMap()</code></a> (<em><strong>note</strong></em> that we can read the input directly from the stream):</p>\n<pre><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    \n    Map&lt;String, Integer&gt; frequencies = IntStream.range(0,scanner.nextInt())\n        .mapToObj(i -&gt; scanner.next())\n        .collect(Collectors.toMap(\n            Function.identity(),\n            i -&gt; 1,\n            Integer::sum\n        ));\n    \n    frequencies.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Pickle -&gt; 1\ntest -&gt; 2\nrick -&gt; 1\npickle -&gt; 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27020925,"reputation":1,"user_id":20578920,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669184404,"creation_date":1669184404,"answer_id":74542532,"question_id":73149937,"body_markdown":"I used another string variable I named currWord to hold the values in wordsList[i] and then compared currWord to wordsList[j]. Here is the code:\r\n\r\n```\r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n    public static void main(String[] args) {\r\n        Scanner scnr = new Scanner(System.in);\r\n        String [] userString = new String[20];\r\n        int [] wordFreq = new int[20];\r\n        String currWord;\r\n        int stringLength;\r\n        int i;\r\n        int j;\r\n      \r\n        stringLength = scnr.nextInt();\r\n        userString = new String[stringLength];\r\n        wordFreq = new int[stringLength];\r\n      \r\n        for (i = 0; i &lt; stringLength; ++i) {\r\n            userString[i] = scnr.next();\r\n            wordFreq[i] = 0;\r\n        }\r\n      \r\n        for (i = 0; i &lt; stringLength; ++i) {\r\n            currWord = userString[i];\r\n            for (j = 0; j &lt; stringLength; ++j) {\r\n                if (userString[j].compareTo(currWord) == 0) {\r\n                wordFreq[i] = wordFreq[i] + 1;\r\n                }\r\n            }\r\n        }\r\n         \r\n        for (i = 0; i &lt; stringLength; ++i) {\r\n            System.out.println(userString[i] + &quot; - &quot; + wordFreq[i]);\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Word frequencies","body":"<p>I used another string variable I named currWord to hold the values in wordsList[i] and then compared currWord to wordsList[j]. Here is the code:</p>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n    public static void main(String[] args) {\n        Scanner scnr = new Scanner(System.in);\n        String [] userString = new String[20];\n        int [] wordFreq = new int[20];\n        String currWord;\n        int stringLength;\n        int i;\n        int j;\n      \n        stringLength = scnr.nextInt();\n        userString = new String[stringLength];\n        wordFreq = new int[stringLength];\n      \n        for (i = 0; i &lt; stringLength; ++i) {\n            userString[i] = scnr.next();\n            wordFreq[i] = 0;\n        }\n      \n        for (i = 0; i &lt; stringLength; ++i) {\n            currWord = userString[i];\n            for (j = 0; j &lt; stringLength; ++j) {\n                if (userString[j].compareTo(currWord) == 0) {\n                wordFreq[i] = wordFreq[i] + 1;\n                }\n            }\n        }\n         \n        for (i = 0; i &lt; stringLength; ++i) {\n            System.out.println(userString[i] + &quot; - &quot; + wordFreq[i]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29370428,"reputation":1,"user_id":22503172,"display_name":"Michael Ojoko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694337228,"creation_date":1693911811,"answer_id":77043972,"question_id":73149937,"body_markdown":"``` \r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      // length of the array\r\n      int numWords = scnr.nextInt();\r\n\r\n      // array containing the string of words later to be set by the user.\r\n      String[] wordsList = new String[numWords];\r\n\r\n      int i;\r\n      int j;\r\n\r\n      // array to tally the number of occurrences of a given word.\r\n      int[] numOccur = new int[numWords];\r\n      \r\n      // Use input from user and assign it with values in array.\r\n      for (i = 0; i &lt; numWords; ++i) {\r\n         wordsList[i] = scnr.next();\r\n      }\r\n\r\n      // nested for loop. to check matching values in array.\r\n      // if value is found the occurrence array at the same index of the matching string is incremented.  \r\n      for (i = 0; i &lt; numWords; ++i) {\r\n         for (j = 0; j &lt; numWords; ++j) {\r\n            if (wordsList[i].equals(wordsList[j])) {\r\n               numOccur[i]++;\r\n            }\r\n         }\r\n      }\r\n\r\n      // this prints the string element and its corresponding value in the occurrences array. \r\n      for (i = 0; i &lt; numWords; ++i) {\r\n         System.out.println(wordsList[i] + &quot; - &quot; + numOccur[i]);\r\n      }\r\n      \r\n   }\r\n} \r\n```\r\n","title":"Word frequencies","body":"<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      // length of the array\n      int numWords = scnr.nextInt();\n\n      // array containing the string of words later to be set by the user.\n      String[] wordsList = new String[numWords];\n\n      int i;\n      int j;\n\n      // array to tally the number of occurrences of a given word.\n      int[] numOccur = new int[numWords];\n      \n      // Use input from user and assign it with values in array.\n      for (i = 0; i &lt; numWords; ++i) {\n         wordsList[i] = scnr.next();\n      }\n\n      // nested for loop. to check matching values in array.\n      // if value is found the occurrence array at the same index of the matching string is incremented.  \n      for (i = 0; i &lt; numWords; ++i) {\n         for (j = 0; j &lt; numWords; ++j) {\n            if (wordsList[i].equals(wordsList[j])) {\n               numOccur[i]++;\n            }\n         }\n      }\n\n      // this prints the string element and its corresponding value in the occurrences array. \n      for (i = 0; i &lt; numWords; ++i) {\n         System.out.println(wordsList[i] + &quot; - &quot; + numOccur[i]);\n      }\n      \n   }\n} \n</code></pre>\n"}],"owner":{"account_id":25915340,"reputation":1,"user_id":19638813,"display_name":"redbull_luvr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1694337228,"creation_date":1658998466,"question_id":73149937,"body_markdown":"I&#39;m writing a Java program that calculates the frequencies of words in an input. The initial integer indicates how many words will follow. Here is my code so far:\r\n\r\n```\r\nimport java.util.Scanner; \r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n\r\n      Scanner scnr = new Scanner(System.in);\r\n      int numberWords = scnr.nextInt();\r\n      String[] wordsList = new String[numberWords];\r\n      int i;\r\n      int j;\r\n      int[] frequency = new int[numberWords];\r\n      \r\n\r\n      for (i = 0; i &lt; numberWords; ++i) {\r\n         wordsList[i] = scnr.next();\r\n         frequency[i] = 0;\r\n         for (j = 0; j &lt; numberWords; ++j) {\r\n            if (wordsList[i].equals(wordsList[j])) {\r\n               frequency[i] = frequency[i] + 1;\r\n            }\r\n         }\r\n      }\r\n      for (i = 0; i &lt; numberWords; ++i) {\r\n         System.out.print(wordsList[i] + &quot; - &quot; + frequency[i]);\r\n         System.out.print(&quot;\\n&quot;);\r\n      }\r\n      \r\n   }\r\n}\r\n```\r\nWhen I input the following:\r\n```none\r\n6 pickle test rick Pickle test pickle\r\n```\r\nThis is the output:\r\n```none\r\npickle - 1\r\ntest - 1\r\nrick - 1\r\nPickle - 1\r\ntest - 2\r\npickle - 2\r\n```\r\nHowever, this is the expected output:\r\n```none\r\npickle - 2\r\ntest - 2\r\nrick - 1\r\nPickle - 1\r\ntest - 2\r\npickle - 2\r\n```\r\nIt looks like it&#39;s picking up the correct frequencies for later occurrences, but not for the initial occurrences.","title":"Word frequencies","body":"<p>I'm writing a Java program that calculates the frequencies of words in an input. The initial integer indicates how many words will follow. Here is my code so far:</p>\n<pre><code>import java.util.Scanner; \npublic class LabProgram {\n   public static void main(String[] args) {\n\n      Scanner scnr = new Scanner(System.in);\n      int numberWords = scnr.nextInt();\n      String[] wordsList = new String[numberWords];\n      int i;\n      int j;\n      int[] frequency = new int[numberWords];\n      \n\n      for (i = 0; i &lt; numberWords; ++i) {\n         wordsList[i] = scnr.next();\n         frequency[i] = 0;\n         for (j = 0; j &lt; numberWords; ++j) {\n            if (wordsList[i].equals(wordsList[j])) {\n               frequency[i] = frequency[i] + 1;\n            }\n         }\n      }\n      for (i = 0; i &lt; numberWords; ++i) {\n         System.out.print(wordsList[i] + &quot; - &quot; + frequency[i]);\n         System.out.print(&quot;\\n&quot;);\n      }\n      \n   }\n}\n</code></pre>\n<p>When I input the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>6 pickle test rick Pickle test pickle\n</code></pre>\n<p>This is the output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>pickle - 1\ntest - 1\nrick - 1\nPickle - 1\ntest - 2\npickle - 2\n</code></pre>\n<p>However, this is the expected output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>pickle - 2\ntest - 2\nrick - 1\nPickle - 1\ntest - 2\npickle - 2\n</code></pre>\n<p>It looks like it's picking up the correct frequencies for later occurrences, but not for the initial occurrences.</p>\n"},{"tags":["java","git","eclipse","egit"],"comments":[{"owner":{"account_id":4459325,"reputation":1497,"user_id":3628679,"display_name":"Alex"},"score":0,"creation_date":1694374955,"post_id":77075401,"comment_id":135879485,"body_markdown":"It seems the logic of the UI changed from the Eclipse version I was used to?! Whenever I edit a file, it shows up in the lower Staged window. However, ifI  then commit, the Staged window is not cleared, but all the files are still in Staged. I don&#39;t get this. Any guidance?","body":"It seems the logic of the UI changed from the Eclipse version I was used to?! Whenever I edit a file, it shows up in the lower Staged window. However, ifI  then commit, the Staged window is not cleared, but all the files are still in Staged. I don&#39;t get this. Any guidance?"},{"owner":{"account_id":4459325,"reputation":1497,"user_id":3628679,"display_name":"Alex"},"score":0,"creation_date":1694375286,"post_id":77075401,"comment_id":135879508,"body_markdown":"Is the issue maybe related to the  &quot;Unborn branch: This commit will create the branch master&quot; ? Although the message doesn&#39;t disappear after I commit.","body":"Is the issue maybe related to the  &quot;Unborn branch: This commit will create the branch master&quot; ? Although the message doesn&#39;t disappear after I commit."}],"owner":{"account_id":4459325,"reputation":1497,"user_id":3628679,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694335958,"creation_date":1694335958,"question_id":77075401,"body_markdown":"I had a project in Eclipse, version controled in a local file system git repository. Because of other problems, I had to re-install Eclipse and took the opportunity to install the latest Eclipse update, Version: 2023-06 (4.28.0). Then, I &quot;re-installed&quot; the project in Eclipse. This project resides in the workspace directory of Eclipse. Before putting this project under git control again, I migrated the project to java modules. Next, I deleted the former project git directory in the git root directory in the file system. The git root directory and the Eclipse workspace directory are on the same level my users home directory.\r\nSo in the Eclipse Java view, I right clicked the project and selected Teams -&gt; Share project. In the dialog I created a new git project at the same old git root location, having the same name as the old previous project.\r\n\r\nIn the Java view the project has now the git master tag.\r\n\r\n[![enter image description here][1]][1]. \r\n\r\nWhen I now go to the Git Staging tab, irrespective of whether I do this in the git- or the Java view, I see as expected all the files of the project in the &quot;Unstaged Changes&quot; window. But clicking the double green plus icon, the single green cross icon, trying to move the files with drag and drop into the Staged Changes window, right click a file and select &quot;Add to index&quot; - nothing moves the files from Unstaged to Stage. Git remains stubborn and the  Commit button disabled.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nOn the file system all files were copied to the git project directory. I guess this is the base for the Unstaged file list.\r\n\r\nI also don&#39;t see any kind of git error message. Is there a log file, and if so where? Maybe there is somewhere a git configuration file that is outdated and mixing up with my old and my new setup?!\r\n\r\nThe Git setup in Eclipse is:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nPlease let me know if you need further information. Thank you in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LZmGm.png\r\n  [2]: https://i.stack.imgur.com/wj6c5.png\r\n  [3]: https://i.stack.imgur.com/TLWtB.png","title":"Can&#39;t stage new project in Eclipse git","body":"<p>I had a project in Eclipse, version controled in a local file system git repository. Because of other problems, I had to re-install Eclipse and took the opportunity to install the latest Eclipse update, Version: 2023-06 (4.28.0). Then, I &quot;re-installed&quot; the project in Eclipse. This project resides in the workspace directory of Eclipse. Before putting this project under git control again, I migrated the project to java modules. Next, I deleted the former project git directory in the git root directory in the file system. The git root directory and the Eclipse workspace directory are on the same level my users home directory.\nSo in the Eclipse Java view, I right clicked the project and selected Teams -&gt; Share project. In the dialog I created a new git project at the same old git root location, having the same name as the old previous project.</p>\n<p>In the Java view the project has now the git master tag.</p>\n<p><a href=\"https://i.stack.imgur.com/LZmGm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LZmGm.png\" alt=\"enter image description here\" /></a>.</p>\n<p>When I now go to the Git Staging tab, irrespective of whether I do this in the git- or the Java view, I see as expected all the files of the project in the &quot;Unstaged Changes&quot; window. But clicking the double green plus icon, the single green cross icon, trying to move the files with drag and drop into the Staged Changes window, right click a file and select &quot;Add to index&quot; - nothing moves the files from Unstaged to Stage. Git remains stubborn and the  Commit button disabled.</p>\n<p><a href=\"https://i.stack.imgur.com/wj6c5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wj6c5.png\" alt=\"enter image description here\" /></a></p>\n<p>On the file system all files were copied to the git project directory. I guess this is the base for the Unstaged file list.</p>\n<p>I also don't see any kind of git error message. Is there a log file, and if so where? Maybe there is somewhere a git configuration file that is outdated and mixing up with my old and my new setup?!</p>\n<p>The Git setup in Eclipse is:</p>\n<p><a href=\"https://i.stack.imgur.com/TLWtB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TLWtB.png\" alt=\"enter image description here\" /></a></p>\n<p>Please let me know if you need further information. Thank you in advance.</p>\n"},{"tags":["java","eclipse","anchor","fill","gridbaglayout"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694336342,"post_id":77075398,"comment_id":135875663,"body_markdown":"Try adding `weighty = 1` to the last component (the button)","body":"Try adding <code>weighty = 1</code> to the last component (the button)"},{"owner":{"account_id":26293779,"reputation":1,"user_id":19960387,"display_name":"nour tebbal"},"score":0,"creation_date":1694338081,"post_id":77075398,"comment_id":135875813,"body_markdown":"That solve the problem for all the components but the last one stays at the center vertically, I usually add an invisible useless component at the end and i apply your solution and that solve the problem but I feel like it&#39;s not professionnal, thanx for the answer any way","body":"That solve the problem for all the components but the last one stays at the center vertically, I usually add an invisible useless component at the end and i apply your solution and that solve the problem but I feel like it&#39;s not professionnal, thanx for the answer any way"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694343014,"post_id":77075398,"comment_id":135876290,"body_markdown":"The set it’s anchor to be NORTH or use a “filler” component","body":"The set it’s anchor to be NORTH or use a “filler” component"}],"owner":{"account_id":26293779,"reputation":1,"user_id":19960387,"display_name":"nour tebbal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694335931,"creation_date":1694335931,"question_id":77075398,"body_markdown":"I have these components shown on the center vertically, I want to show them on the top of the panel, like it shown in the picture (the yellow arrow).\r\nNB: I tried to set the anchor on &quot;NORTH&quot; and fill to &quot;BOTH&quot; but nothing happened.\r\n\r\n[enter image description here](https://i.stack.imgur.com/4MD7e.jpg)\r\n\r\n```\r\nsetLayout(new GridBagLayout());\r\n\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\tBorder border = BorderFactory.createTitledBorder(null, &quot;Saisie&quot;, TitledBorder.CENTER, TitledBorder.TOP, new Font(&quot;times new roman&quot;,Font.BOLD,14),Color.GRAY);\r\n\t\tsetBorder(border);\r\n\t\t\r\n\t\tgbc.gridx = 0;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.gridwidth = 1;\r\n\t\tgbc.gridheight = 1;\r\n\t\tgbc.weightx = 0.;\r\n\t\tgbc.weighty = 0.;\r\n\t\tgbc.fill = GridBagConstraints.NONE;\r\n\t\tgbc.anchor = GridBagConstraints.LINE_END;\r\n\t\tgbc.insets = new Insets(3, 3, 3, 3);\r\n\t\tadd(JLabel_ID, gbc);\r\n\t\t\r\n\t\tgbc.gridx = 1;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.gridwidth = 1;\r\n\t\tgbc.gridheight = 1;\r\n\t\tgbc.weightx = 0.;\r\n\t\tgbc.weighty = 0.;\r\n\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\tgbc.anchor = GridBagConstraints.CENTER;\r\n\t\tgbc.insets = new Insets(3, 3, 3, 3);\r\n\t\tadd(JTextField_ID, gbc);\r\n\t\t\r\n\t\tgbc.gridx = 0;\r\n\t\tgbc.gridy = 1;\r\n\t\tgbc.gridwidth = 1;\r\n\t\tgbc.gridheight = 1;\r\n\t\tgbc.weightx = 0.;\r\n\t\tgbc.weighty = 0.;\r\n\t\tgbc.fill = GridBagConstraints.NONE;\r\n\t\tgbc.anchor = GridBagConstraints.LINE_END;\r\n\t\tgbc.insets = new Insets(3, 3, 3, 3);\r\n\t\tadd(JLabel_Nom, gbc);\r\n\t\t\r\n\t\tgbc.gridx = 1;\r\n\t\tgbc.gridy = 1;\r\n\t\tgbc.gridwidth = 1;\r\n\t\tgbc.gridheight = 1;\r\n\t\tgbc.weightx = 0.;\r\n\t\tgbc.weighty = 0.;\r\n\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\tgbc.anchor = GridBagConstraints.CENTER;\r\n\t\tgbc.insets = new Insets(3, 3, 3, 3);\r\n\t\tadd(JTextField_Nom, gbc);\r\n\r\n\t}```\r\n\r\n\r\nI tried to set the anchor on &quot;NORTH&quot; and fill to &quot;BOTH&quot; but nothing happened.","title":"Java component positioning on the top of the GridBagLayout","body":"<p>I have these components shown on the center vertically, I want to show them on the top of the panel, like it shown in the picture (the yellow arrow).\nNB: I tried to set the anchor on &quot;NORTH&quot; and fill to &quot;BOTH&quot; but nothing happened.</p>\n<p><a href=\"https://i.stack.imgur.com/4MD7e.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>setLayout(new GridBagLayout());\n        GridBagConstraints gbc = new GridBagConstraints();\n        Border border = BorderFactory.createTitledBorder(null, &quot;Saisie&quot;, TitledBorder.CENTER, TitledBorder.TOP, new Font(&quot;times new roman&quot;,Font.BOLD,14),Color.GRAY);\n        setBorder(border);\n        \n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.gridwidth = 1;\n        gbc.gridheight = 1;\n        gbc.weightx = 0.;\n        gbc.weighty = 0.;\n        gbc.fill = GridBagConstraints.NONE;\n        gbc.anchor = GridBagConstraints.LINE_END;\n        gbc.insets = new Insets(3, 3, 3, 3);\n        add(JLabel_ID, gbc);\n        \n        gbc.gridx = 1;\n        gbc.gridy = 0;\n        gbc.gridwidth = 1;\n        gbc.gridheight = 1;\n        gbc.weightx = 0.;\n        gbc.weighty = 0.;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.anchor = GridBagConstraints.CENTER;\n        gbc.insets = new Insets(3, 3, 3, 3);\n        add(JTextField_ID, gbc);\n        \n        gbc.gridx = 0;\n        gbc.gridy = 1;\n        gbc.gridwidth = 1;\n        gbc.gridheight = 1;\n        gbc.weightx = 0.;\n        gbc.weighty = 0.;\n        gbc.fill = GridBagConstraints.NONE;\n        gbc.anchor = GridBagConstraints.LINE_END;\n        gbc.insets = new Insets(3, 3, 3, 3);\n        add(JLabel_Nom, gbc);\n        \n        gbc.gridx = 1;\n        gbc.gridy = 1;\n        gbc.gridwidth = 1;\n        gbc.gridheight = 1;\n        gbc.weightx = 0.;\n        gbc.weighty = 0.;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.anchor = GridBagConstraints.CENTER;\n        gbc.insets = new Insets(3, 3, 3, 3);\n        add(JTextField_Nom, gbc);\n\n    }```\n\n\nI tried to set the anchor on &quot;NORTH&quot; and fill to &quot;BOTH&quot; but nothing happened.\n</code></pre>\n"},{"tags":["java","android","android-mediacodec","mediamuxer"],"answers":[{"tags":[],"owner":{"account_id":5376192,"reputation":9447,"user_id":4283005,"display_name":"dev.bmax"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694333308,"creation_date":1694333308,"answer_id":77075264,"question_id":77063784,"body_markdown":"Timestamps are used to control the playback speed. \r\n\r\nSetting the frame rate is not enough. You need to assign a timestamp to each frame that you write to the output file. \r\n\r\nTry to use the `BufferInfo` object for this:\r\n\r\n    bufferInfo.presentationTimeUs = nextFrameTimeUs();\r\n    mediaMuxer.writeSampleData(videoTrackIndex, encodedData, bufferInfo);\r\n\r\nThe implementation of `nextFrameTimeUs()` is up to you. One way to do it is to map the current frame index to presentation time based on the average frame duration (that you can calculate from the frame rate).\r\n\r\nNote that the presentation time should be given in microseconds (Us).\r\n","title":"Regarding the problem of making the bitmaps image collection of ArrayList&lt;Bitmap&gt; type into a video, the duration of the video is too short","body":"<p>Timestamps are used to control the playback speed.</p>\n<p>Setting the frame rate is not enough. You need to assign a timestamp to each frame that you write to the output file.</p>\n<p>Try to use the <code>BufferInfo</code> object for this:</p>\n<pre><code>bufferInfo.presentationTimeUs = nextFrameTimeUs();\nmediaMuxer.writeSampleData(videoTrackIndex, encodedData, bufferInfo);\n</code></pre>\n<p>The implementation of <code>nextFrameTimeUs()</code> is up to you. One way to do it is to map the current frame index to presentation time based on the average frame duration (that you can calculate from the frame rate).</p>\n<p>Note that the presentation time should be given in microseconds (Us).</p>\n"}],"owner":{"account_id":29391722,"reputation":13,"user_id":22519909,"display_name":"Lewis Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77075264,"answer_count":1,"score":0,"last_activity_date":1694333308,"creation_date":1694139637,"question_id":77063784,"body_markdown":"There are 300 frames of images in the bitmaps, and the set frame rate is 30, but the video length is only 3 seconds; if there are 600 frames of images, the video length is 6 seconds, etc.;The video can play all content, but the playback rate is faster, at double or triple speed; what is the reason for this? How should it(encodeVideo(ArrayList&lt;Bitmap&gt; bitmaps)) be optimized?\r\n\r\n    private static final String MIME_TYPE = &quot;video/avc&quot;; \r\n    private static final int BIT_RATE = 3000000; \r\n    private static final int FRAME_RATE = 30;\r\n    private static final int I_FRAME_INTERVAL = 10;\r\n\r\n\r\n\r\n    public void encodeVideo(ArrayList&lt;Bitmap&gt; bitmaps) {\r\n        Executor executor = Executors.newSingleThreadExecutor();\r\n        executor.execute(() -&gt; {\r\n            if (bitmaps == null || bitmaps.isEmpty()) {\r\n                return;\r\n            }\r\n\r\n\r\n            try {\r\n                width = bitmaps.get(0).getWidth();\r\n                height = bitmaps.get(0).getHeight();\r\n                String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.getDefault()).format(new Date());\r\n                String fileName1 = &quot;VID_&quot; + timeStamp + &quot;.mp4&quot;;\r\n                outputFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), fileName1);\r\n\r\n                \r\n                MediaFormat format = MediaFormat.createVideoFormat(MIME_TYPE, width, height);\r\n                format.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface);\r\n                format.setInteger(MediaFormat.KEY_BIT_RATE, BIT_RATE);\r\n                format.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE);\r\n                format.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, I_FRAME_INTERVAL);\r\n\r\n                \r\n                mediaCodec = MediaCodec.createEncoderByType(MIME_TYPE);\r\n                mediaCodec.configure(format, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\r\n                inputSurface = mediaCodec.createInputSurface();\r\n                mediaCodec.start();\r\n\r\n                \r\n                mediaMuxer = new MediaMuxer(outputFile.getPath(), MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\r\n\r\n                for (Bitmap bitmap : bitmaps) {\r\n                    if (Thread.currentThread().isInterrupted()) {\r\n                        return;\r\n                    }\r\n                    \r\n                    Canvas canvas = inputSurface.lockCanvas(null);\r\n                    if (canvas != null) {\r\n                        try {\r\n                            canvas.drawBitmap(bitmap, 0, 0, null);\r\n                        } finally {\r\n                            inputSurface.unlockCanvasAndPost(canvas);\r\n                        }\r\n                    }\r\n\r\n                    \r\n                    MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\r\n                    while (true) {\r\n                        int encoderStatus = mediaCodec.dequeueOutputBuffer(bufferInfo, 0);\r\n                        if (encoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\r\n                            break;\r\n                        } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\r\n                            if (muxerStarted) {\r\n                                releaseResources();\r\n                                return;\r\n                            }\r\n                            MediaFormat newFormat = mediaCodec.getOutputFormat();\r\n                            videoTrackIndex = mediaMuxer.addTrack(newFormat);\r\n                            mediaMuxer.start();\r\n                            muxerStarted = true;\r\n                        } else if (encoderStatus &lt; 0) {\r\n                            Log.w(TAG, &quot;unexpected result from encoder.dequeueOutputBuffer: &quot; + encoderStatus);\r\n                        } else {\r\n                            ByteBuffer encodedData = mediaCodec.getOutputBuffer(encoderStatus);\r\n                            if (encodedData == null) {\r\n                                releaseResources();\r\n                                return;\r\n                            }\r\n                            if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_CODEC_CONFIG) != 0) {\r\n                                bufferInfo.size = 0;\r\n                            }\r\n                            if (bufferInfo.size != 0) {\r\n                                if (!muxerStarted) {\r\n                                    releaseResources();\r\n                                    return;\r\n                                }\r\n                                encodedData.position(bufferInfo.offset);\r\n                                encodedData.limit(bufferInfo.offset + bufferInfo.size);\r\n                                mediaMuxer.writeSampleData(videoTrackIndex, encodedData, bufferInfo);\r\n                            }\r\n                            mediaCodec.releaseOutputBuffer(encoderStatus, false);\r\n                            if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                \r\n                releaseResources();\r\n\r\n               \r\n                ContentValues values = new ContentValues();\r\n                values.put(MediaStore.Video.Media.DATA, outputFile.getAbsolutePath());\r\n                values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\r\n                Uri uri = context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\r\n\r\n\r\n            } catch (IOException e) {\r\n                releaseResources();\r\n            }\r\n        });\r\n    }\r\n","title":"Regarding the problem of making the bitmaps image collection of ArrayList&lt;Bitmap&gt; type into a video, the duration of the video is too short","body":"<p>There are 300 frames of images in the bitmaps, and the set frame rate is 30, but the video length is only 3 seconds; if there are 600 frames of images, the video length is 6 seconds, etc.;The video can play all content, but the playback rate is faster, at double or triple speed; what is the reason for this? How should it(encodeVideo(ArrayList bitmaps)) be optimized?</p>\n<pre><code>private static final String MIME_TYPE = &quot;video/avc&quot;; \nprivate static final int BIT_RATE = 3000000; \nprivate static final int FRAME_RATE = 30;\nprivate static final int I_FRAME_INTERVAL = 10;\n\n\n\npublic void encodeVideo(ArrayList&lt;Bitmap&gt; bitmaps) {\n    Executor executor = Executors.newSingleThreadExecutor();\n    executor.execute(() -&gt; {\n        if (bitmaps == null || bitmaps.isEmpty()) {\n            return;\n        }\n\n\n        try {\n            width = bitmaps.get(0).getWidth();\n            height = bitmaps.get(0).getHeight();\n            String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.getDefault()).format(new Date());\n            String fileName1 = &quot;VID_&quot; + timeStamp + &quot;.mp4&quot;;\n            outputFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), fileName1);\n\n            \n            MediaFormat format = MediaFormat.createVideoFormat(MIME_TYPE, width, height);\n            format.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface);\n            format.setInteger(MediaFormat.KEY_BIT_RATE, BIT_RATE);\n            format.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE);\n            format.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, I_FRAME_INTERVAL);\n\n            \n            mediaCodec = MediaCodec.createEncoderByType(MIME_TYPE);\n            mediaCodec.configure(format, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\n            inputSurface = mediaCodec.createInputSurface();\n            mediaCodec.start();\n\n            \n            mediaMuxer = new MediaMuxer(outputFile.getPath(), MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\n\n            for (Bitmap bitmap : bitmaps) {\n                if (Thread.currentThread().isInterrupted()) {\n                    return;\n                }\n                \n                Canvas canvas = inputSurface.lockCanvas(null);\n                if (canvas != null) {\n                    try {\n                        canvas.drawBitmap(bitmap, 0, 0, null);\n                    } finally {\n                        inputSurface.unlockCanvasAndPost(canvas);\n                    }\n                }\n\n                \n                MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\n                while (true) {\n                    int encoderStatus = mediaCodec.dequeueOutputBuffer(bufferInfo, 0);\n                    if (encoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\n                        break;\n                    } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\n                        if (muxerStarted) {\n                            releaseResources();\n                            return;\n                        }\n                        MediaFormat newFormat = mediaCodec.getOutputFormat();\n                        videoTrackIndex = mediaMuxer.addTrack(newFormat);\n                        mediaMuxer.start();\n                        muxerStarted = true;\n                    } else if (encoderStatus &lt; 0) {\n                        Log.w(TAG, &quot;unexpected result from encoder.dequeueOutputBuffer: &quot; + encoderStatus);\n                    } else {\n                        ByteBuffer encodedData = mediaCodec.getOutputBuffer(encoderStatus);\n                        if (encodedData == null) {\n                            releaseResources();\n                            return;\n                        }\n                        if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_CODEC_CONFIG) != 0) {\n                            bufferInfo.size = 0;\n                        }\n                        if (bufferInfo.size != 0) {\n                            if (!muxerStarted) {\n                                releaseResources();\n                                return;\n                            }\n                            encodedData.position(bufferInfo.offset);\n                            encodedData.limit(bufferInfo.offset + bufferInfo.size);\n                            mediaMuxer.writeSampleData(videoTrackIndex, encodedData, bufferInfo);\n                        }\n                        mediaCodec.releaseOutputBuffer(encoderStatus, false);\n                        if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\n                            break;\n                        }\n                    }\n                }\n            }\n\n            \n            releaseResources();\n\n           \n            ContentValues values = new ContentValues();\n            values.put(MediaStore.Video.Media.DATA, outputFile.getAbsolutePath());\n            values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\n            Uri uri = context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\n\n\n        } catch (IOException e) {\n            releaseResources();\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694262675,"post_id":77071936,"comment_id":135870114,"body_markdown":"UserDetails has nothing to do with JWT, `oauth2ResourceServer`. It is null because if you pass a JWT to a spring service, it will validate the token, but it will not load any user details since a token is not a session and it is stateless. If you want the id, you need to put it in the jwt token as a claim.","body":"UserDetails has nothing to do with JWT, <code>oauth2ResourceServer</code>. It is null because if you pass a JWT to a spring service, it will validate the token, but it will not load any user details since a token is not a session and it is stateless. If you want the id, you need to put it in the jwt token as a claim."},{"owner":{"account_id":24613960,"reputation":33,"user_id":20440933,"display_name":"Jez"},"score":0,"creation_date":1694263170,"post_id":77071936,"comment_id":135870168,"body_markdown":"So basically, I have to put every data I need about the user into the JWT, and then extract it in the controller?","body":"So basically, I have to put every data I need about the user into the JWT, and then extract it in the controller?"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694264002,"post_id":77071936,"comment_id":135870249,"body_markdown":"or you give up using JWT tokens and resource server since it is not what you want and instead implement FormLogin","body":"or you give up using JWT tokens and resource server since it is not what you want and instead implement FormLogin"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1694301098,"post_id":77071936,"comment_id":135873657,"body_markdown":"I don&#39;t agree with last comment: configuring a REST API as a stateless resource server is a good idea, you should stick with it: it makes it very scalable and fault tolerant. Moreover, what is the point of configuring OAuth2 client and request &amp; store tokens if you never use it to query an OAuth2 resource server?","body":"I don&#39;t agree with last comment: configuring a REST API as a stateless resource server is a good idea, you should stick with it: it makes it very scalable and fault tolerant. Moreover, what is the point of configuring OAuth2 client and request &amp; store tokens if you never use it to query an OAuth2 resource server?"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694333014,"creation_date":1694303104,"answer_id":77074380,"question_id":77071936,"body_markdown":"Resource server build the security-context out of the access token, either by decoding it (if it&#39;s a JWT), or introspecting it (whatever the format).\r\n\r\nIn case of JWT, there is a [chapter in the doc][1] explaining how it works, and you should read it.\r\n\r\nIf you stick with the default `Authentication` implementation with JWT decoders (`JwtAuthenticationToken`), then `@AuthenticationPrincipal` should return a `org.springframework.security.oauth2.jwt.Jwt` from which you can read claims (provided that the request was authorised with a valid `Bearer` JWT).\r\n\r\nSo, yes, as you suggest in the comments to your question, enriching access tokens (when creating it on the authorization server) with all of the user data you need on your resource server(s), seems a better idea\r\nthan looping to the database for each and every REST API call.\r\n\r\nIf there are claims you need to access frequently, you could configure the `jwtAuthenticationConverter` to return your own extension of `AbstractAuthenticationToken` (instead of `JwtAuthenticationToken`). It is rather simple and allows to return typed values from named accessors (and de-couple your application code from your authorization server claims structure).\r\n\r\n#### P.S.\r\nOAuth2 resource servers are queried by OAuth2 clients but mobile and Javascript based applications (Angular, Vue, React, etc) make unsafe OAuth2 clients.\r\n\r\nThe [current recommendation][2] from Spring Security team is to use &quot;confidential&quot; clients on the server.\r\n\r\nFor mobile and Javascript based applications, I use `spring-cloud-gateway` (with `spring-boot-starter-oauth2-client` and `TokenRelay=` filter) in front of my stateless resource servers. In this architecture, requests are authorized with:\r\n- sessions between the front-end and the (stateful) gateway\r\n- Bearer JWT between the gateway and the (stateless) REST APIs.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-architecture\r\n  [2]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390","title":"Spring Boot REST (OAUTH2 JWT) @AuthenticationPrincipal returns null for custom UserDetails","body":"<p>Resource server build the security-context out of the access token, either by decoding it (if it's a JWT), or introspecting it (whatever the format).</p>\n<p>In case of JWT, there is a <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-architecture\" rel=\"nofollow noreferrer\">chapter in the doc</a> explaining how it works, and you should read it.</p>\n<p>If you stick with the default <code>Authentication</code> implementation with JWT decoders (<code>JwtAuthenticationToken</code>), then <code>@AuthenticationPrincipal</code> should return a <code>org.springframework.security.oauth2.jwt.Jwt</code> from which you can read claims (provided that the request was authorised with a valid <code>Bearer</code> JWT).</p>\n<p>So, yes, as you suggest in the comments to your question, enriching access tokens (when creating it on the authorization server) with all of the user data you need on your resource server(s), seems a better idea\nthan looping to the database for each and every REST API call.</p>\n<p>If there are claims you need to access frequently, you could configure the <code>jwtAuthenticationConverter</code> to return your own extension of <code>AbstractAuthenticationToken</code> (instead of <code>JwtAuthenticationToken</code>). It is rather simple and allows to return typed values from named accessors (and de-couple your application code from your authorization server claims structure).</p>\n<h4>P.S.</h4>\n<p>OAuth2 resource servers are queried by OAuth2 clients but mobile and Javascript based applications (Angular, Vue, React, etc) make unsafe OAuth2 clients.</p>\n<p>The <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">current recommendation</a> from Spring Security team is to use &quot;confidential&quot; clients on the server.</p>\n<p>For mobile and Javascript based applications, I use <code>spring-cloud-gateway</code> (with <code>spring-boot-starter-oauth2-client</code> and <code>TokenRelay=</code> filter) in front of my stateless resource servers. In this architecture, requests are authorized with:</p>\n<ul>\n<li>sessions between the front-end and the (stateful) gateway</li>\n<li>Bearer JWT between the gateway and the (stateless) REST APIs.</li>\n</ul>\n"}],"owner":{"account_id":24613960,"reputation":33,"user_id":20440933,"display_name":"Jez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":77074380,"answer_count":1,"score":2,"last_activity_date":1694333014,"creation_date":1694257805,"question_id":77071936,"body_markdown":"**Context:** I have a Spring Boot REST API secured with oauth2 JWT, this part works properly.\r\n\r\n**Problem:** In my RestController I want to access the currently authenticated user&#39;s ID with `@AuthenticationPrincipal User userDetails` but it returns `null`.\r\n\r\n**Security Filter Chain:**\r\n\r\n```\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception\r\n    {\r\n        return http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt;\r\n                {\r\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll();\r\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasAnyRole(&quot;ADMIN&quot;);\r\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/user/**&quot;)).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n                    auth.anyRequest().authenticated();\r\n                })\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwtAuthenticationConverter()))\r\n                        .authenticationEntryPoint(invalidTokenAuthenticationEntryPoint)\r\n                )\r\n                .exceptionHandling(exception -&gt;\r\n                        exception.authenticationEntryPoint(authRequiredAuthenticationEntryPoint))\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .build();\r\n    }\r\n```\r\n\r\n\r\n\r\n**User Entity:**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class User extends AbstractTimestampEntity implements UserDetails\r\n{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;user_id&quot;)\r\n    private Long userId;\r\n\r\n    @Column(nullable = false)\r\n    private String username;\r\n\r\n    @Column(nullable = false)\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    @JsonIgnore\r\n    private String password;\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;user_role_junction&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;)}\r\n    )\r\n    private Set&lt;Role&gt; authorities;\r\n\r\n    // Constructor for manual user creation\r\n    public User(String username, String email, String password, Set&lt;Role&gt; authorities)\r\n    {\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.authorities = authorities;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired()\r\n    {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked()\r\n    {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired()\r\n    {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled()\r\n    {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n**User Details Service implementation**\r\n\r\n```\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService\r\n{\r\n    private UserRepository userRepository;\r\n\r\n    public UserDetailsServiceImpl(UserRepository userRepository)\r\n    {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException\r\n    {\r\n        return userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User does not exists!&quot;));\r\n    }\r\n}\r\n```\r\n\r\n**User Controller**\r\n\r\n```\r\npackage com.jez.blogapi.controller;\r\n\r\nimport com.jez.blogapi.model.User;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/user&quot;)\r\npublic class UserController\r\n{\r\n    @GetMapping(&quot;/test&quot;)\r\n    public ResponseEntity&lt;String&gt; getUserById(@AuthenticationPrincipal User userDetails)\r\n    {\r\n        System.out.println(userDetails);\r\n        return new ResponseEntity&lt;&gt;(&quot;test response message&quot;, HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n","title":"Spring Boot REST (OAUTH2 JWT) @AuthenticationPrincipal returns null for custom UserDetails","body":"<p><strong>Context:</strong> I have a Spring Boot REST API secured with oauth2 JWT, this part works properly.</p>\n<p><strong>Problem:</strong> In my RestController I want to access the currently authenticated user's ID with <code>@AuthenticationPrincipal User userDetails</code> but it returns <code>null</code>.</p>\n<p><strong>Security Filter Chain:</strong></p>\n<pre><code>    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception\n    {\n        return http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt;\n                {\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll();\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasAnyRole(&quot;ADMIN&quot;);\n                    auth.requestMatchers(new AntPathRequestMatcher(&quot;/user/**&quot;)).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;);\n                    auth.anyRequest().authenticated();\n                })\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\n                        .jwt(jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwtAuthenticationConverter()))\n                        .authenticationEntryPoint(invalidTokenAuthenticationEntryPoint)\n                )\n                .exceptionHandling(exception -&gt;\n                        exception.authenticationEntryPoint(authRequiredAuthenticationEntryPoint))\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .build();\n    }\n</code></pre>\n<p><strong>User Entity:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User extends AbstractTimestampEntity implements UserDetails\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;user_id&quot;)\n    private Long userId;\n\n    @Column(nullable = false)\n    private String username;\n\n    @Column(nullable = false)\n    private String email;\n\n    @Column(nullable = false)\n    @JsonIgnore\n    private String password;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;user_role_junction&quot;,\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;)}\n    )\n    private Set&lt;Role&gt; authorities;\n\n    // Constructor for manual user creation\n    public User(String username, String email, String password, Set&lt;Role&gt; authorities)\n    {\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }\n\n    @Override\n    public boolean isAccountNonExpired()\n    {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked()\n    {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired()\n    {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled()\n    {\n        return true;\n    }\n}\n</code></pre>\n<p><strong>User Details Service implementation</strong></p>\n<pre><code>@Service\npublic class UserDetailsServiceImpl implements UserDetailsService\n{\n    private UserRepository userRepository;\n\n    public UserDetailsServiceImpl(UserRepository userRepository)\n    {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException\n    {\n        return userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User does not exists!&quot;));\n    }\n}\n</code></pre>\n<p><strong>User Controller</strong></p>\n<pre><code>package com.jez.blogapi.controller;\n\nimport com.jez.blogapi.model.User;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/user&quot;)\npublic class UserController\n{\n    @GetMapping(&quot;/test&quot;)\n    public ResponseEntity&lt;String&gt; getUserById(@AuthenticationPrincipal User userDetails)\n    {\n        System.out.println(userDetails);\n        return new ResponseEntity&lt;&gt;(&quot;test response message&quot;, HttpStatus.OK);\n    }\n}\n</code></pre>\n"},{"tags":["java","design-patterns"],"answers":[{"tags":[],"owner":{"account_id":189531,"reputation":22741,"user_id":428916,"accept_rate":69,"display_name":"Rocky Pulley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1309367417,"creation_date":1309367417,"answer_id":6524610,"question_id":6524563,"body_markdown":"It sounds like maybe it&#39;s using the Observer pattern.\r\n\r\n","title":"Is Something-Aware a design pattern?","body":"<p>It sounds like maybe it's using the Observer pattern.</p>\n"},{"tags":[],"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1309368735,"creation_date":1309368735,"answer_id":6524835,"question_id":6524563,"body_markdown":"The design pattern is still Dependency Injection and IOC.  The marker interfaces are just a clunky language-version specific way of implementing it.","title":"Is Something-Aware a design pattern?","body":"<p>The design pattern is still Dependency Injection and IOC.  The marker interfaces are just a clunky language-version specific way of implementing it.</p>\n"}],"owner":{"account_id":33478,"reputation":1691,"user_id":93773,"accept_rate":45,"display_name":"Matt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1730,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1694332259,"creation_date":1309367192,"question_id":6524563,"body_markdown":"In the Struts2 interceptor package, we can see many XxxAware interfaces, like `ApplicationAware`, `CookieAware`, and so on. \r\n\r\nIn the Spring framework, `ApplicationContextAware`, `BeanFactoryAware`, and other examples can be seen as well.\r\n\r\nI also follow this design concept to implement my framework. Is this a kind of design pattern? Does it have a name?","title":"Is Something-Aware a design pattern?","body":"<p>In the Struts2 interceptor package, we can see many XxxAware interfaces, like <code>ApplicationAware</code>, <code>CookieAware</code>, and so on.</p>\n<p>In the Spring framework, <code>ApplicationContextAware</code>, <code>BeanFactoryAware</code>, and other examples can be seen as well.</p>\n<p>I also follow this design concept to implement my framework. Is this a kind of design pattern? Does it have a name?</p>\n"},{"tags":["java","spring-boot","thymeleaf","junit5","spring-test"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694291878,"creation_date":1694291878,"answer_id":77073980,"question_id":77051481,"body_markdown":"Those thymeleaf related beans are auto-configured by `ThymeleafAutoConfiguration` which is enabled if any configuration class is annotated with `@EnableAutoConfiguration`. \r\n\r\n`@SpringBootApplication` has this `@EnableAutoConfiguration` , so when you start the app in normal way , `ThymeleafAutoConfiguration` takes effect and define the related thymeleaf beans.\r\n\r\nBut now in test , you just specify to use `ThymeleafProcessor` and `TemplateEngine` as the configuration class to start the spring context. Neither `@SpringBootApplication` nor `@EnableAutoConfiguration` involved and so `ThymeleafAutoConfiguration` does not take effect.\r\n\r\nYou can fix it by explicitly import `ThymeleafAutoConfiguration` using `@ImportAutoConfiguration` :\r\n\r\n``` java\r\n@SpringBootTest(classes = {ThymeleafProcessor.class})\r\n@ImportAutoConfiguration(ThymeleafAutoConfiguration.class)\r\nclass ThymeleafProcessorTest {\r\n\r\n\r\n}\r\n```\r\n\r\nI also tidy up the codes a bit :\r\n\r\n- `@ExtendWith(SpringExtension.class)`  is not required as it is already defined by `@SpringBootTest`\r\n\r\n- Do not need to define `TemplateEngine` in `@SpringBootTest` as it will be defined by `ThymeleafAutoConfiguration`\r\n\r\n- Most probably `@EnableConfigurationProperties` is also not required.\r\n","title":"How to unit test a Thymeleaf template using Spring Boot Test","body":"<p>Those thymeleaf related beans are auto-configured by <code>ThymeleafAutoConfiguration</code> which is enabled if any configuration class is annotated with <code>@EnableAutoConfiguration</code>.</p>\n<p><code>@SpringBootApplication</code> has this <code>@EnableAutoConfiguration</code> , so when you start the app in normal way , <code>ThymeleafAutoConfiguration</code> takes effect and define the related thymeleaf beans.</p>\n<p>But now in test , you just specify to use <code>ThymeleafProcessor</code> and <code>TemplateEngine</code> as the configuration class to start the spring context. Neither <code>@SpringBootApplication</code> nor <code>@EnableAutoConfiguration</code> involved and so <code>ThymeleafAutoConfiguration</code> does not take effect.</p>\n<p>You can fix it by explicitly import <code>ThymeleafAutoConfiguration</code> using <code>@ImportAutoConfiguration</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = {ThymeleafProcessor.class})\n@ImportAutoConfiguration(ThymeleafAutoConfiguration.class)\nclass ThymeleafProcessorTest {\n\n\n}\n</code></pre>\n<p>I also tidy up the codes a bit :</p>\n<ul>\n<li><p><code>@ExtendWith(SpringExtension.class)</code>  is not required as it is already defined by <code>@SpringBootTest</code></p>\n</li>\n<li><p>Do not need to define <code>TemplateEngine</code> in <code>@SpringBootTest</code> as it will be defined by <code>ThymeleafAutoConfiguration</code></p>\n</li>\n<li><p>Most probably <code>@EnableConfigurationProperties</code> is also not required.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":460980,"reputation":399,"user_id":862404,"accept_rate":66,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77073980,"answer_count":1,"score":0,"last_activity_date":1694331839,"creation_date":1693999845,"question_id":77051481,"body_markdown":"I am parsing a Thymeleaf template using the following bean:\r\n\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    import org.thymeleaf.TemplateEngine;\r\n    import org.thymeleaf.context.Context;\r\n    \r\n    @Service\r\n    public class ThymeleafProcessor {\r\n    \r\n        private final TemplateEngine templateEngine;\r\n    \r\n        @Autowired\r\n        public ThymeleafProcessor(TemplateEngine templateEngine) {\r\n            this.templateEngine = templateEngine;\r\n        }\r\n    \r\n        public String process() {\r\n            final var templateResolvers = templateEngine.getTemplateResolvers();\r\n            System.out.println(templateResolvers);// Collection with one SpringResourceTemplateResolver \r\n            String process = templateEngine.process(&quot;test.html&quot;, new Context());\r\n            System.out.println(process); //Prints &quot;Hello World&quot;\r\n            return process;\r\n        }\r\n    }\r\n\r\n\r\nThe template is located in src/main/resources/templates and looks like this:\r\n\r\n    Hello World\r\n\r\nSo far everything works fine.\r\n\r\nNow I want to write a unit test for the bean but this doesn&#39;t work:\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit.jupiter.SpringExtension;\r\n    import org.thymeleaf.TemplateEngine;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    \r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest(classes = {\r\n            ThymeleafProcessor.class,\r\n            TemplateEngine.class,\r\n    })\r\n    @EnableConfigurationProperties\r\n    class ThymeleafProcessorTest {\r\n    \r\n        @Autowired\r\n        private ThymeleafProcessor thymeleafProcessor;\r\n    \r\n        @Autowired\r\n        private TemplateEngine templateEngine;\r\n    \r\n    \r\n        @Test\r\n        void doTest() {\r\n            System.out.println(templateEngine.getTemplateResolvers().size());  //this will return 0 in the test\r\n    \r\n            var result = thymeleafProcessor.process();\r\n    \r\n            assertEquals(&quot;Hello World&quot;, result);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nInsetad of the expected String &quot;Hello World&quot; the String &quot;test.html&quot; is returned. The problem seems to be that no Template Resolver is available.\r\n\r\nHow does the test need to be configured in order to test the Thymeleaf template?\r\n\r\n","title":"How to unit test a Thymeleaf template using Spring Boot Test","body":"<p>I am parsing a Thymeleaf template using the following bean:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.thymeleaf.TemplateEngine;\nimport org.thymeleaf.context.Context;\n\n@Service\npublic class ThymeleafProcessor {\n\n    private final TemplateEngine templateEngine;\n\n    @Autowired\n    public ThymeleafProcessor(TemplateEngine templateEngine) {\n        this.templateEngine = templateEngine;\n    }\n\n    public String process() {\n        final var templateResolvers = templateEngine.getTemplateResolvers();\n        System.out.println(templateResolvers);// Collection with one SpringResourceTemplateResolver \n        String process = templateEngine.process(&quot;test.html&quot;, new Context());\n        System.out.println(process); //Prints &quot;Hello World&quot;\n        return process;\n    }\n}\n</code></pre>\n<p>The template is located in src/main/resources/templates and looks like this:</p>\n<pre><code>Hello World\n</code></pre>\n<p>So far everything works fine.</p>\n<p>Now I want to write a unit test for the bean but this doesn't work:</p>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.thymeleaf.TemplateEngine;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = {\n        ThymeleafProcessor.class,\n        TemplateEngine.class,\n})\n@EnableConfigurationProperties\nclass ThymeleafProcessorTest {\n\n    @Autowired\n    private ThymeleafProcessor thymeleafProcessor;\n\n    @Autowired\n    private TemplateEngine templateEngine;\n\n\n    @Test\n    void doTest() {\n        System.out.println(templateEngine.getTemplateResolvers().size());  //this will return 0 in the test\n\n        var result = thymeleafProcessor.process();\n\n        assertEquals(&quot;Hello World&quot;, result);\n    }\n\n}\n</code></pre>\n<p>Insetad of the expected String &quot;Hello World&quot; the String &quot;test.html&quot; is returned. The problem seems to be that no Template Resolver is available.</p>\n<p>How does the test need to be configured in order to test the Thymeleaf template?</p>\n"},{"tags":["java","security","jar","crlf-vulnerability"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1694331822,"post_id":77075132,"comment_id":135875255,"body_markdown":"Finding all installed JAR files can be done using an OS-specific command; e.g. `sudo find / -name \\*.jar`.  The duplink tells you how to find a JAR&#39;s version information (if any) ... in addition to what is implied by the JAR file&#39;s filename.","body":"Finding all installed JAR files can be done using an OS-specific command; e.g. <code>sudo find &#47; -name \\*.jar</code>.  The duplink tells you how to find a JAR&#39;s version information (if any) ... in addition to what is implied by the JAR file&#39;s filename."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1694347159,"post_id":77075132,"comment_id":135876703,"body_markdown":"...and for the CVEs you can use https://owasp.org/www-project-dependency-check/","body":"...and for the CVEs you can use <a href=\"https://owasp.org/www-project-dependency-check/\" rel=\"nofollow noreferrer\">owasp.org/www-project-dependency-check</a>"}],"owner":{"account_id":2982039,"reputation":1,"user_id":2531808,"display_name":"Zoeb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694331733,"answer_count":0,"score":0,"last_activity_date":1694330292,"creation_date":1694330292,"question_id":77075132,"body_markdown":"I&#39;m trying to find and list all the Java Jar files in the system for vulnerability scanning. \r\n\r\nNeed to get the information regarding their version and any active CVEs that are against those Versions of JAR. \r\n\r\nWill also appreciate any advice on tools that can do it. \r\n\r\ntried listing all the Jar files manually, but couldnt get the version info from that. ","title":"Finding all the JAR packages that are installed in a system for vulnerability scanning","body":"<p>I'm trying to find and list all the Java Jar files in the system for vulnerability scanning.</p>\n<p>Need to get the information regarding their version and any active CVEs that are against those Versions of JAR.</p>\n<p>Will also appreciate any advice on tools that can do it.</p>\n<p>tried listing all the Jar files manually, but couldnt get the version info from that.</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":1,"creation_date":1648205089,"post_id":61370386,"comment_id":126570889,"body_markdown":"*Usually* when you&#39;re given external class files they should be bundled inside a jar file. But a directory containing class files can also be on the classpath.","body":"<i>Usually</i> when you&#39;re given external class files they should be bundled inside a jar file. But a directory containing class files can also be on the classpath."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694329681,"post_id":61370386,"comment_id":135875098,"body_markdown":"Surely this just refers to the `import` statement?","body":"Surely this just refers to the <code>import</code> statement?"}],"answers":[{"tags":[],"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1587625933,"creation_date":1587625933,"answer_id":61381361,"question_id":61370386,"body_markdown":"as I know, intellij idea can decompile the .class file depends on the build in decompile plugin, while the extension named &#39;Java Decompiler&#39; in vscode marketplace works a little complex. maybe you can take a try, use the &#39;Java Decompiler&#39; extension or take a look in the intellij idea.","title":"How to use java .class file in Visual Studio Code?","body":"<p>as I know, intellij idea can decompile the .class file depends on the build in decompile plugin, while the extension named 'Java Decompiler' in vscode marketplace works a little complex. maybe you can take a try, use the 'Java Decompiler' extension or take a look in the intellij idea.</p>\n"},{"tags":[],"owner":{"account_id":78259,"reputation":1816,"user_id":222838,"accept_rate":75,"display_name":"mico"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652256624,"creation_date":1652256624,"answer_id":72197568,"question_id":61370386,"body_markdown":"The easiest way is to have both classes in the same directory, like in this example. Say you have class A\r\n\r\n    public class A {\r\n        public int fun() {\r\n            return 0;\r\n        }\r\n    }\r\n\r\nto use class A from class B in the same directory, you just declare a type A in your B\r\n\r\n\tclass B {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tA a = new A();\r\n\t\t\tint i = a.fun();\r\n\t\t\tSystem.out.println(i);\r\n\t\t}\r\n\t}\r\n \r\nthis will print `0`.\r\n\r\nThis works because both classes are in the same directory, and class A is declared public.\r\n\r\nBeing in the same directory, with no package declaration, means that both classes are in the default package, this is the easiest case.","title":"How to use java .class file in Visual Studio Code?","body":"<p>The easiest way is to have both classes in the same directory, like in this example. Say you have class A</p>\n<pre><code>public class A {\n    public int fun() {\n        return 0;\n    }\n}\n</code></pre>\n<p>to use class A from class B in the same directory, you just declare a type A in your B</p>\n<pre><code>class B {\n    public static void main(String[] args) {\n        A a = new A();\n        int i = a.fun();\n        System.out.println(i);\n    }\n}\n</code></pre>\n<p>this will print <code>0</code>.</p>\n<p>This works because both classes are in the same directory, and class A is declared public.</p>\n<p>Being in the same directory, with no package declaration, means that both classes are in the default package, this is the easiest case.</p>\n"},{"tags":[],"owner":{"account_id":1863598,"reputation":1206,"user_id":1687636,"accept_rate":64,"display_name":"Sheldon Wei"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660296301,"creation_date":1660296301,"answer_id":73331974,"question_id":61370386,"body_markdown":"You may use the extension https://marketplace.visualstudio.com/items?itemName=dgileadi.java-decompiler.\r\nThe ext can help you view the original source code of .class file.\r\n\r\nOn the other hand, what you talked is auto-import feature, which is suported by vscode now.","title":"How to use java .class file in Visual Studio Code?","body":"<p>You may use the extension <a href=\"https://marketplace.visualstudio.com/items?itemName=dgileadi.java-decompiler\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=dgileadi.java-decompiler</a>.\nThe ext can help you view the original source code of .class file.</p>\n<p>On the other hand, what you talked is auto-import feature, which is suported by vscode now.</p>\n"}],"owner":{"account_id":18373681,"reputation":29,"user_id":13383260,"display_name":"Cory"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21492,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":3,"score":1,"last_activity_date":1694329320,"creation_date":1587573570,"question_id":61370386,"body_markdown":"I&#39;m currently studying a Java course, and one of the assignments requires me to use (import) a class inside a .class file.\r\n\r\nI&#39;m currently using Visual Studio Code, and I can&#39;t seem to find a way to import the class into my Java code.\r\n\r\nWe are not given the .java code. From what I can tell, Visual Studio Code does not support the use of .class files.","title":"How to use java .class file in Visual Studio Code?","body":"<p>I'm currently studying a Java course, and one of the assignments requires me to use (import) a class inside a .class file.</p>\n\n<p>I'm currently using Visual Studio Code, and I can't seem to find a way to import the class into my Java code.</p>\n\n<p>We are not given the .java code. From what I can tell, Visual Studio Code does not support the use of .class files.</p>\n"},{"tags":["java","android","android-webview"],"comments":[{"owner":{"account_id":2191523,"reputation":6723,"user_id":1938435,"accept_rate":92,"display_name":"PurkkaKoodari"},"score":0,"creation_date":1445499986,"post_id":33275717,"comment_id":54352113,"body_markdown":"Possible duplicate of [How to edit or create custom error page for WebView?](http://stackoverflow.com/questions/4101331/how-to-edit-or-create-custom-error-page-for-webview)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4101331/how-to-edit-or-create-custom-error-page-for-webview\">How to edit or create custom error page for WebView?</a>"},{"owner":{"account_id":274791,"reputation":1249,"user_id":567235,"accept_rate":79,"display_name":"CoderRoller"},"score":0,"creation_date":1445501314,"post_id":33275717,"comment_id":54352858,"body_markdown":"I dont want to hide the message only but to hold to it until the signal is strong and the page is loaded, see the edit.","body":"I dont want to hide the message only but to hold to it until the signal is strong and the page is loaded, see the edit."}],"answers":[{"tags":[],"owner":{"account_id":3523143,"reputation":213,"user_id":2944936,"display_name":"Ravneet Singh"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1445508222,"creation_date":1445500138,"answer_id":33275826,"question_id":33275717,"body_markdown":"You can check the url that is getting loaded in your webview by doing this.\r\n    \r\n    myWebView.setWebViewClient(new WebViewClient() {\r\n        @SuppressLint(&quot;NewApi&quot;)\r\n        @Override\r\n        public void onPageFinished(WebView view, String url) {\r\n            super.onPageFinished(view, url);\r\n        }\r\n        @Override\r\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n            super.onPageStarted(view, url, favicon);\t\r\n        }\r\n    });","title":"Android Webview ERR_NAME_NOT_RESOLVED loading an URL","body":"<p>You can check the url that is getting loaded in your webview by doing this.</p>\n\n<pre><code>myWebView.setWebViewClient(new WebViewClient() {\n    @SuppressLint(\"NewApi\")\n    @Override\n    public void onPageFinished(WebView view, String url) {\n        super.onPageFinished(view, url);\n    }\n    @Override\n    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n        super.onPageStarted(view, url, favicon);    \n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1558234,"reputation":503,"user_id":1448739,"accept_rate":23,"display_name":"Jarvis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452251654,"creation_date":1452251654,"answer_id":34675718,"question_id":33275717,"body_markdown":"You can ask the user to retry at that point of time either displaying there or by showing a popup with a message. If you get the network is strong enough load the same page again.","title":"Android Webview ERR_NAME_NOT_RESOLVED loading an URL","body":"<p>You can ask the user to retry at that point of time either displaying there or by showing a popup with a message. If you get the network is strong enough load the same page again.</p>\n"}],"owner":{"account_id":274791,"reputation":1249,"user_id":567235,"accept_rate":79,"display_name":"CoderRoller"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16616,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1694329320,"creation_date":1445499775,"question_id":33275717,"body_markdown":"I have an App made using Android `Webview`, while using Wifi connection the initial page loaded displays ok, after switching to mobile data mode, the application shows the `ERR_NAME_NOT_RESOLVED` message at times.\r\n\r\nIs there a workaround to hide this message until the page is correctly displayed? or to make it work when the connection is not good in the initial load?\r\n\r\nThanks for the insight.","title":"Android Webview ERR_NAME_NOT_RESOLVED loading an URL","body":"<p>I have an App made using Android <code>Webview</code>, while using Wifi connection the initial page loaded displays ok, after switching to mobile data mode, the application shows the <code>ERR_NAME_NOT_RESOLVED</code> message at times.</p>\n\n<p>Is there a workaround to hide this message until the page is correctly displayed? or to make it work when the connection is not good in the initial load?</p>\n\n<p>Thanks for the insight.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","jetty"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694327525,"creation_date":1694194097,"answer_id":77068859,"question_id":77066825,"body_markdown":"When a request is received, Spring MVC calls all registered handler mappings in order until one provides a handler for the request. \r\n\r\n`WelcomePageHandlerMapping` is ordered after the `RequestMappingHandlerMapping` so `WelcomePageHandlerMapping` will only be called if no `@RequestMapping` matches the request.\r\n\r\nWhen `WelcomePageHandlerMapping` is called it has to determine if it can provide a handler for the incoming request. Part of determining if it can do so is checking to see if the request will accept a `text/html` response. This check is done before checking that the path matches so the invalid `Accept` header causes a problem irrespective of the request&#39;s path.","title":"The Spring Boot&#39;s WelcomePageHandlerMapping is getting called on invalid API path where the 404 error expected","body":"<p>When a request is received, Spring MVC calls all registered handler mappings in order until one provides a handler for the request.</p>\n<p><code>WelcomePageHandlerMapping</code> is ordered after the <code>RequestMappingHandlerMapping</code> so <code>WelcomePageHandlerMapping</code> will only be called if no <code>@RequestMapping</code> matches the request.</p>\n<p>When <code>WelcomePageHandlerMapping</code> is called it has to determine if it can provide a handler for the incoming request. Part of determining if it can do so is checking to see if the request will accept a <code>text/html</code> response. This check is done before checking that the path matches so the invalid <code>Accept</code> header causes a problem irrespective of the request's path.</p>\n"}],"owner":{"account_id":21115744,"reputation":35,"user_id":15522868,"display_name":"javalanga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77068859,"answer_count":1,"score":2,"last_activity_date":1694327525,"creation_date":1694175488,"question_id":77066825,"body_markdown":"I have a simple Spring Boot (3.1.2) application with defined @RestController with several @GetMapping (`/app/test`, `/app/test2`).\r\n\r\nE.g:\r\n\r\n```\r\n@GetMapping(&quot;/test&quot;)\r\n    public TestModel getTestModel() {\r\n        return TestModel.builder()\r\n                .testModelName(&quot;The best test model ever!&quot;)\r\n                .testModelVersion(1)\r\n                .build();\r\n    }\r\n```\r\n\r\nSo when I&#39;m trying to send a request to my app using the incorrect API path and `Accept` header like this:\r\n\r\n`curl -X GET http://localhost:8080/random/incorrect -H &quot;Accept: yaml&quot;`\r\n\r\nInstead of expected 404 Not Found error, I&#39;m getting this exception:\r\n```\r\njakarta.servlet.ServletException: Request processing failed: org.springframework.http.InvalidMediaTypeException: Invalid mime type &quot;yaml&quot;: does not contain &#39;/&#39;\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:500) ~[jakarta.servlet-api-5.0.0.jar:5.0.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:587) ~[jakarta.servlet-api-5.0.0.jar:5.0.0]\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:764) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1665) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.websocket.servlet.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:170) ~[websocket-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:527) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:578) ~[jetty-security-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1570) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1381) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[jetty-servlet-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1543) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1303) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:563) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$0(HttpChannel.java:505) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:762) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:497) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:282) ~[jetty-server-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[jetty-io-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[jetty-io-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[jetty-io-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969) ~[jetty-util-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194) ~[jetty-util-11.0.15.jar:11.0.15]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149) ~[jetty-util-11.0.15.jar:11.0.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: org.springframework.http.InvalidMediaTypeException: Invalid mime type &quot;yaml&quot;: does not contain &#39;/&#39;\r\n\tat org.springframework.http.MediaType.parseMediaType(MediaType.java:742) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.http.MediaType.parseMediaTypes(MediaType.java:768) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.getAcceptedMediaTypes(WelcomePageHandlerMapping.java:82) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.isHtmlTextAccepted(WelcomePageHandlerMapping.java:71) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.getHandlerInternal(WelcomePageHandlerMapping.java:67) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:505) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1275) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\t... 48 common frames omitted\r\n```\r\n\r\nAs I can see the `WelcomePageHandlerMapping` is getting called. So my question is: why is this handler getting called instead of returning the 404 error instantly?\r\n\r\n\r\n\r\nI tried to find some info in documentation but I had no luck.","title":"The Spring Boot&#39;s WelcomePageHandlerMapping is getting called on invalid API path where the 404 error expected","body":"<p>I have a simple Spring Boot (3.1.2) application with defined @RestController with several @GetMapping (<code>/app/test</code>, <code>/app/test2</code>).</p>\n<p>E.g:</p>\n<pre><code>@GetMapping(&quot;/test&quot;)\n    public TestModel getTestModel() {\n        return TestModel.builder()\n                .testModelName(&quot;The best test model ever!&quot;)\n                .testModelVersion(1)\n                .build();\n    }\n</code></pre>\n<p>So when I'm trying to send a request to my app using the incorrect API path and <code>Accept</code> header like this:</p>\n<p><code>curl -X GET http://localhost:8080/random/incorrect -H &quot;Accept: yaml&quot;</code></p>\n<p>Instead of expected 404 Not Found error, I'm getting this exception:</p>\n<pre><code>jakarta.servlet.ServletException: Request processing failed: org.springframework.http.InvalidMediaTypeException: Invalid mime type &quot;yaml&quot;: does not contain '/'\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:500) ~[jakarta.servlet-api-5.0.0.jar:5.0.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:587) ~[jakarta.servlet-api-5.0.0.jar:5.0.0]\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:764) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1665) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.websocket.servlet.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:170) ~[websocket-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:527) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:578) ~[jetty-security-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1570) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1381) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[jetty-servlet-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1543) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1303) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.Server.handle(Server.java:563) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$0(HttpChannel.java:505) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:762) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:497) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:282) ~[jetty-server-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[jetty-io-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[jetty-io-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[jetty-io-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969) ~[jetty-util-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194) ~[jetty-util-11.0.15.jar:11.0.15]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149) ~[jetty-util-11.0.15.jar:11.0.15]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: org.springframework.http.InvalidMediaTypeException: Invalid mime type &quot;yaml&quot;: does not contain '/'\n    at org.springframework.http.MediaType.parseMediaType(MediaType.java:742) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.http.MediaType.parseMediaTypes(MediaType.java:768) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.getAcceptedMediaTypes(WelcomePageHandlerMapping.java:82) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.isHtmlTextAccepted(WelcomePageHandlerMapping.java:71) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.web.servlet.WelcomePageHandlerMapping.getHandlerInternal(WelcomePageHandlerMapping.java:67) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:505) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1275) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    ... 48 common frames omitted\n</code></pre>\n<p>As I can see the <code>WelcomePageHandlerMapping</code> is getting called. So my question is: why is this handler getting called instead of returning the 404 error instantly?</p>\n<p>I tried to find some info in documentation but I had no luck.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"score":0,"creation_date":1694261920,"post_id":77072135,"comment_id":135870035,"body_markdown":"How about the use the Optional  to pack your object ，the Optional class is supported after Java8","body":"How about the use the Optional  to pack your object ，the Optional class is supported after Java8"},{"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694262974,"post_id":77072135,"comment_id":135870148,"body_markdown":"syndImage itself is null, how to handle it elegantly and return null","body":"syndImage itself is null, how to handle it elegantly and return null"},{"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"score":1,"creation_date":1694263862,"post_id":77072135,"comment_id":135870235,"body_markdown":"String s = null;\nString trim = Optional.ofNullable(s).orElse(&quot;&quot;).trim();","body":"String s = null; String trim = Optional.ofNullable(s).orElse(&quot;&quot;).trim();"},{"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"score":0,"creation_date":1694263966,"post_id":77072135,"comment_id":135870242,"body_markdown":"Like the up code , if don&#39;t use the Optional,it may say NullPointException,but like the code ,it can replace the empty object to a default object to avoid the NullPoint","body":"Like the up code , if don&#39;t use the Optional,it may say NullPointException,but like the code ,it can replace the empty object to a default object to avoid the NullPoint"},{"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694264064,"post_id":77072135,"comment_id":135870253,"body_markdown":"syndImage is null and its not a string","body":"syndImage is null and its not a string"},{"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"score":0,"creation_date":1694264582,"post_id":77072135,"comment_id":135870306,"body_markdown":"The string can replace by your syndImage ... I don&#39;t defined a object like syndImage ...","body":"The string can replace by your syndImage ... I don&#39;t defined a object like syndImage ..."}],"answers":[{"tags":[],"owner":{"account_id":29401700,"reputation":11,"user_id":22527733,"display_name":"saribasrana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694263770,"creation_date":1694263731,"answer_id":77072321,"question_id":77072135,"body_markdown":"You can use requireNonNullElse() like this:\r\n\r\n    return Image.builder()\r\n    .title(Objects.requireNonNullElse(syndImage.getTitle(), &quot;Default Title&quot;))\r\n    .url(Objects.requireNonNullElse(syndImage.getUrl(), &quot;Default URL&quot;))\r\n    .build();","title":"How to convert to an Object by handling null inputs","body":"<p>You can use requireNonNullElse() like this:</p>\n<pre><code>return Image.builder()\n.title(Objects.requireNonNullElse(syndImage.getTitle(), &quot;Default Title&quot;))\n.url(Objects.requireNonNullElse(syndImage.getUrl(), &quot;Default URL&quot;))\n.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694289912,"creation_date":1694289133,"answer_id":77073836,"question_id":77072135,"body_markdown":"## Use the builder\r\n\r\n[You commented][1]:\r\n\r\n&gt;I don&#39;t want to build the object if input is null and just return null \r\n\r\nSounds like a job for your Builder. That is one purpose of a builder: Verify inputs before constructing an object. \r\n\r\nSo if you don&#39;t like one of the inputs (`null`, whatever), have `Image.builder().….build()` return `null`. \r\n\r\nOr better, have it return an empty [`Optional&lt; Image &gt;`][2] object. The point of `Optional` is to flag to the calling programmer that a null value is a legitimate result. \r\n\r\n```java\r\npublic static Optional&lt; Image &gt; convert(SyndImage syndImage) {\r\n    return Image.builder()\r\n        .title(syndImage.getTitle())\r\n        .url(syndImage.getUrl())\r\n        .build();\r\n}  \r\n```\r\n\r\nInside your builder code:\r\n\r\n```java\r\nif ( Objects.isNull( url ) ) { return Optional.empty() ; }\r\n```\r\n\r\nThe calling code checks to see if they received an `Image` object in the payload.\r\n\r\n```java\r\nif( optionalImage.isPresent() ) { … }\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77072135/how-to-convert-to-an-object-by-handling-null-inputs/77073836#comment135870230_77072321\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Optional.html","title":"How to convert to an Object by handling null inputs","body":"<h2>Use the builder</h2>\n<p><a href=\"https://stackoverflow.com/questions/77072135/how-to-convert-to-an-object-by-handling-null-inputs/77073836#comment135870230_77072321\">You commented</a>:</p>\n<blockquote>\n<p>I don't want to build the object if input is null and just return null</p>\n</blockquote>\n<p>Sounds like a job for your Builder. That is one purpose of a builder: Verify inputs before constructing an object.</p>\n<p>So if you don't like one of the inputs (<code>null</code>, whatever), have <code>Image.builder().….build()</code> return <code>null</code>.</p>\n<p>Or better, have it return an empty <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Optional.html\" rel=\"nofollow noreferrer\"><code>Optional&lt; Image &gt;</code></a> object. The point of <code>Optional</code> is to flag to the calling programmer that a null value is a legitimate result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Optional&lt; Image &gt; convert(SyndImage syndImage) {\n    return Image.builder()\n        .title(syndImage.getTitle())\n        .url(syndImage.getUrl())\n        .build();\n}  \n</code></pre>\n<p>Inside your builder code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if ( Objects.isNull( url ) ) { return Optional.empty() ; }\n</code></pre>\n<p>The calling code checks to see if they received an <code>Image</code> object in the payload.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if( optionalImage.isPresent() ) { … }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694326907,"creation_date":1694326907,"answer_id":77075011,"question_id":77072135,"body_markdown":"Assuming you have limitations to update existing builder or refactor to optional return for getImage,you could implement as below\r\n```\r\nimport lombok.Data;\r\nimport org.junit.jupiter.api.Assertions;\r\n\r\nimport java.util.Objects;\r\nimport java.util.Optional;\r\n\r\n@Data\r\nclass SyndImage{\r\n    String title;\r\n    String url;\r\n\r\n    public SyndImage(String title, String url) {\r\n        this.title = title;\r\n        this.url = url;\r\n    }\r\n\r\n    public SyndImage(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public SyndImage() {\r\n\r\n    }\r\n}\r\nclass Image{}\r\npublic class OptionalUtility {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Assertions.assertNull(getImage(new SyndImage()));//null fields\r\n        //SyndImage allFileds = new SyndImage(&quot;MyTitle1&quot;, &quot;Url1&quot;);\r\n        Assertions.assertNotNull(getImage(new SyndImage(&quot;MyTitle1&quot;, &quot;Url1&quot;)));//all fields\r\n\r\n        //SyndImage title = new SyndImage(&quot;Title&quot;);\r\n        Assertions.assertNull(getImage(new SyndImage(&quot;Title&quot;)));//only title field is available\r\n        \r\n        Assertions.assertNull(getImage(null));//null fields\r\n        \r\n    }\r\n\r\n    private static Image getImage(SyndImage syndImage) {\r\n       return Optional.ofNullable(syndImage)\r\n                .filter(sImage-&gt; Objects.nonNull(sImage.getTitle()))//if field checks are also required\r\n                .filter(sImage-&gt;Objects.nonNull(sImage.getUrl()))\r\n                .map(sImage-&gt;iamgeBuilderMethod(sImage))\r\n                .orElse(null);//this is generally not recommended\r\n    }\r\n\r\n    private static Image iamgeBuilderMethod(SyndImage sImage) {\r\n       /* return Image.builder()\r\n                .title(syndImage.getTitle())\r\n                .url(syndImage.getUrl())\r\n                .build();*/\r\n        System.out.println(&quot;Image created&quot;);\r\n        return new Image();//this will be your existing convert method\r\n    }\r\n}\r\n```","title":"How to convert to an Object by handling null inputs","body":"<p>Assuming you have limitations to update existing builder or refactor to optional return for getImage,you could implement as below</p>\n<pre><code>import lombok.Data;\nimport org.junit.jupiter.api.Assertions;\n\nimport java.util.Objects;\nimport java.util.Optional;\n\n@Data\nclass SyndImage{\n    String title;\n    String url;\n\n    public SyndImage(String title, String url) {\n        this.title = title;\n        this.url = url;\n    }\n\n    public SyndImage(String title) {\n        this.title = title;\n    }\n\n    public SyndImage() {\n\n    }\n}\nclass Image{}\npublic class OptionalUtility {\n\n    public static void main(String[] args) {\n\n        Assertions.assertNull(getImage(new SyndImage()));//null fields\n        //SyndImage allFileds = new SyndImage(&quot;MyTitle1&quot;, &quot;Url1&quot;);\n        Assertions.assertNotNull(getImage(new SyndImage(&quot;MyTitle1&quot;, &quot;Url1&quot;)));//all fields\n\n        //SyndImage title = new SyndImage(&quot;Title&quot;);\n        Assertions.assertNull(getImage(new SyndImage(&quot;Title&quot;)));//only title field is available\n        \n        Assertions.assertNull(getImage(null));//null fields\n        \n    }\n\n    private static Image getImage(SyndImage syndImage) {\n       return Optional.ofNullable(syndImage)\n                .filter(sImage-&gt; Objects.nonNull(sImage.getTitle()))//if field checks are also required\n                .filter(sImage-&gt;Objects.nonNull(sImage.getUrl()))\n                .map(sImage-&gt;iamgeBuilderMethod(sImage))\n                .orElse(null);//this is generally not recommended\n    }\n\n    private static Image iamgeBuilderMethod(SyndImage sImage) {\n       /* return Image.builder()\n                .title(syndImage.getTitle())\n                .url(syndImage.getUrl())\n                .build();*/\n        System.out.println(&quot;Image created&quot;);\n        return new Image();//this will be your existing convert method\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694326907,"creation_date":1694261165,"question_id":77072135,"body_markdown":"How to convert to an Object by handling null inputs, is there a way to check for null inputs and return null without writing the if check for null;\r\n\r\n    public static Image convert(SyndImage syndImage) {\r\n        return Image.builder()\r\n            .title(syndImage.getTitle())\r\n            .url(syndImage.getUrl())\r\n            .build();\r\n    }  ","title":"How to convert to an Object by handling null inputs","body":"<p>How to convert to an Object by handling null inputs, is there a way to check for null inputs and return null without writing the if check for null;</p>\n<pre><code>public static Image convert(SyndImage syndImage) {\n    return Image.builder()\n        .title(syndImage.getTitle())\n        .url(syndImage.getUrl())\n        .build();\n}  \n</code></pre>\n"},{"tags":["java","android","android-studio","gradle","build.gradle"],"comments":[{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1678721112,"post_id":75723748,"comment_id":133584116,"body_markdown":"Try reboot, delete that .lck file, and try again","body":"Try reboot, delete that .lck file, and try again"}],"answers":[{"tags":[],"owner":{"account_id":15087538,"reputation":161,"user_id":10888323,"display_name":"Joel Kanyi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1694326467,"creation_date":1682923705,"answer_id":76145179,"question_id":75723748,"body_markdown":"Make your Gradle User Home to be empty [![Make your Gradle User Home to be empty][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TTuMs.png\r\n\r\nThen restart Android Studio and sync. Gradle error will be gone.","title":"gradle error in android studio: Could not create parent directory for lock file","body":"<p>Make your Gradle User Home to be empty <a href=\"https://i.stack.imgur.com/TTuMs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TTuMs.png\" alt=\"Make your Gradle User Home to be empty\" /></a></p>\n<p>Then restart Android Studio and sync. Gradle error will be gone.</p>\n"}],"owner":{"account_id":24541871,"reputation":1,"user_id":18452158,"display_name":"Harshit Sah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":917,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694326467,"creation_date":1678720531,"question_id":75723748,"body_markdown":"**Gradle Error** : Could not create parent directory for lock file.\r\n\r\n\r\n**Could not create parent directory for lock file D:\\PROGRAM FILES\\ANDROID\\jbr\\wrapper\\dists\\gradle-7.5-bin\\f1w0cc9nuo0eivz97x2xlu9sv\\gradle-7.5-bin.zip.lck**\r\n\r\n\r\n**While building or syncing my app, the Gradle shows this error.** \r\n\r\n**Please help me with this error.**","title":"gradle error in android studio: Could not create parent directory for lock file","body":"<p><strong>Gradle Error</strong> : Could not create parent directory for lock file.</p>\n<p><strong>Could not create parent directory for lock file D:\\PROGRAM FILES\\ANDROID\\jbr\\wrapper\\dists\\gradle-7.5-bin\\f1w0cc9nuo0eivz97x2xlu9sv\\gradle-7.5-bin.zip.lck</strong></p>\n<p><strong>While building or syncing my app, the Gradle shows this error.</strong></p>\n<p><strong>Please help me with this error.</strong></p>\n"},{"tags":["java","ssl","db2","connection","driver"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1533565609,"post_id":51709836,"comment_id":90380893,"body_markdown":"``\\`` is an escape character in a Java string literal, so you need to double them: `DriverManager.getConnection(&quot;jdbc:db2://[host]:[port]/[databaseName]:sslConnection=true;sslTrustStoreLocation=c:\\\\db2_ssl\\\\db2.jks;sslTrustStorePassword=teste123;&quot;, &quot;myuser&quot;, &quot;mypassword&quot;);`","body":"<code>\\</code> is an escape character in a Java string literal, so you need to double them: <code>DriverManager.getConnection(&quot;jdbc:db2:&#47;&#47;[host]:[port]&#47;[datab&zwnj;&#8203;aseName]:sslConnecti&zwnj;&#8203;on=true;sslTrustStor&zwnj;&#8203;eLocation=c:\\\\db2_ss&zwnj;&#8203;l\\\\db2.jks;sslTrustS&zwnj;&#8203;torePassword=teste12&zwnj;&#8203;3;&quot;, &quot;myuser&quot;, &quot;mypassword&quot;);</code>"},{"owner":{"account_id":11306067,"reputation":11409,"user_id":8290634,"display_name":"mao"},"score":0,"creation_date":1533566055,"post_id":51709836,"comment_id":90381211,"body_markdown":"You are also using an unsupported  out of date jdbc driver (3.64.96) which dates from V9.5 fp10.  That&#39;s not the cause of your symptom however. But consider using supported versions. The -4499 can happen when you are not connecting to the port configured for SSL at the target Db2-instance.","body":"You are also using an unsupported  out of date jdbc driver (3.64.96) which dates from V9.5 fp10.  That&#39;s not the cause of your symptom however. But consider using supported versions. The -4499 can happen when you are not connecting to the port configured for SSL at the target Db2-instance."},{"owner":{"account_id":6349671,"reputation":178,"user_id":4929141,"display_name":"THIAGORC"},"score":0,"creation_date":1533573647,"post_id":51709836,"comment_id":90385654,"body_markdown":"Hi Andreas.\nI already tried it, still got the same issue.\n\nAny other ideas?","body":"Hi Andreas. I already tried it, still got the same issue.  Any other ideas?"},{"owner":{"account_id":6349671,"reputation":178,"user_id":4929141,"display_name":"THIAGORC"},"score":0,"creation_date":1533574027,"post_id":51709836,"comment_id":90385829,"body_markdown":"Hi @mao, I tried to update to the latest db2 driver (10.1) and still got the same issue.","body":"Hi @mao, I tried to update to the latest db2 driver (10.1) and still got the same issue."},{"owner":{"account_id":11306067,"reputation":11409,"user_id":8290634,"display_name":"mao"},"score":0,"creation_date":1533575646,"post_id":51709836,"comment_id":90386616,"body_markdown":"V10.1 is also out of support (since 30/Sept/2017). The latest Db2 jdbc driver is V11.1.3.3 at current date. Verify the JKS has the signer (CA) certificate(s) in addition to the certificate, if the cert is not self-signed. Verify that all certs are valid and unexpired and not revoked. Verify that your JVM/jdk are up to date(at least Java 8)","body":"V10.1 is also out of support (since 30/Sept/2017). The latest Db2 jdbc driver is V11.1.3.3 at current date. Verify the JKS has the signer (CA) certificate(s) in addition to the certificate, if the cert is not self-signed. Verify that all certs are valid and unexpired and not revoked. Verify that your JVM/jdk are up to date(at least Java 8)"}],"answers":[{"tags":[],"owner":{"account_id":6349671,"reputation":178,"user_id":4929141,"display_name":"THIAGORC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533581763,"creation_date":1533581763,"answer_id":51714001,"question_id":51709836,"body_markdown":"Appreciate all responses.\r\nAfter several tests I could realize that the &quot;problem&quot; is on JDK.\r\nI changed to use JDK 1.8 and it worked successfully.\r\n\r\nNot sure if we have a workaround for other JDK versions.\r\n\r\nThank you.","title":"DB2 JDBC SSL Connection","body":"<p>Appreciate all responses.\nAfter several tests I could realize that the \"problem\" is on JDK.\nI changed to use JDK 1.8 and it worked successfully.</p>\n\n<p>Not sure if we have a workaround for other JDK versions.</p>\n\n<p>Thank you.</p>\n"}],"owner":{"account_id":6349671,"reputation":178,"user_id":4929141,"display_name":"THIAGORC"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16059,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1694325735,"creation_date":1533565359,"question_id":51709836,"body_markdown":"Recently our partner have updated their database environment to use SSL, and we need to update our application config in order to establish the connection with the database.\r\n\r\nI have generated the JKS file and also have imported the certificates to the JKS.\r\n\r\nWhen I use SQL Squirrel connection string:\r\n\r\n&gt; jdbc:db2://[host]:[port]/[databaseName]:sslConnection=true;sslTrustStoreLocation=c:\\db2_ssl\\db2.jks;sslTrustStorePassword=teste123;\r\n\r\nIt connectes successfully.\r\n\r\nIf I use the exact the same connection string:\r\n\r\n    Connection connection = DriverManager.getConnection(&quot;jdbc:db2://[host]:[port]/[databaseName]:sslConnection=true;sslTrustStoreLocation=c:\\db2_ssl\\db2.jks;sslTrustStorePassword=teste123;&quot;, &quot;myuser&quot;, &quot;mypassword&quot;);\r\n\r\nIt throws me the exception as follows:\r\n\r\n    com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][3.64.96] A communication error occurred during operations on the connection&#39;s underlying socket, socket input stream, \r\n    or socket output stream.  Error location: T4Agent.sendRequest() - flush (-1).  Message: Received fatal alert: handshake_failure. ERRORCODE=-4499, SQLSTATE=08001\r\n    \tat com.ibm.db2.jcc.am.bd.a(bd.java:321)\r\n    \tat com.ibm.db2.jcc.t4.a.a(a.java:548)\r\n    \tat com.ibm.db2.jcc.t4.a.a(a.java:543)\r\n    \tat com.ibm.db2.jcc.t4.a.f(a.java:484)\r\n    \tat com.ibm.db2.jcc.t4.a.flush_(a.java:390)\r\n    \tat com.ibm.db2.jcc.am.Agent.flowOutsideUOW(Agent.java:246)\r\n    \tat com.ibm.db2.jcc.t4.b.b(b.java:1220)\r\n    \tat com.ibm.db2.jcc.t4.b.b(b.java:788)\r\n    \tat com.ibm.db2.jcc.t4.b.a(b.java:760)\r\n    \tat com.ibm.db2.jcc.t4.b.a(b.java:421)\r\n    \tat com.ibm.db2.jcc.t4.b.a(b.java:396)\r\n    \tat com.ibm.db2.jcc.t4.b.&lt;init&gt;(b.java:334)\r\n    \tat com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource.java:232)\r\n    \tat com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource.java:198)\r\n    \tat com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:475)\r\n    \tat com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:116)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:379)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:415)\r\n    \tat com.ibm.sdpi.wmb.flows.productdata.ProductDataAnnouncementNode.evaluate(ProductDataAnnouncementNode.java:93)\r\n    \tat com.ibm.broker.javacompute.MbRuntimeJavaComputeNode.evaluate(MbRuntimeJavaComputeNode.java:265)\r\n    \tat com.ibm.broker.plugin.MbNode.evaluate(MbNode.java:1480)\r\n    \tat com.ibm.broker.plugin.MbOutputTerminal._propagate(Native Method)\r\n    \tat com.ibm.broker.plugin.MbOutputTerminal.propagate(MbOutputTerminal.java:114)\r\n    \tat com.ibm.sdpi.wmb.flows.common.SDPIOutboundCommon_JavaCompute.evaluate(SDPIOutboundCommon_JavaCompute.java:226)\r\n    \tat com.ibm.broker.javacompute.MbRuntimeJavaComputeNode.evaluate(MbRuntimeJavaComputeNode.java:265)\r\n    \tat com.ibm.broker.plugin.MbNode.evaluate(MbNode.java:1480)\r\n    Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n    \tat com.ibm.jsse2.o.a(o.java:22)\r\n    \tat com.ibm.jsse2.o.a(o.java:34)\r\n    \tat com.ibm.jsse2.SSLSocketImpl.b(SSLSocketImpl.java:378)\r\n    \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:479)\r\n    \tat com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:437)\r\n    \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:772)\r\n    \tat com.ibm.jsse2.k.write(k.java:3)\r\n    \tat com.ibm.db2.jcc.t4.db.b(db.java:1685)\r\n    \tat com.ibm.db2.jcc.t4.db.a(db.java:1633)\r\n    \tat com.ibm.db2.jcc.t4.a.f(a.java:451)\r\n    \t... 22 more\r\n\r\nI am using the exact same DB2 drivers in SQL Squirrel and application.\r\n\r\nWhy it does work in SQL Squirrel and it doesn&#39;t using DriverManager?\r\n\r\nDo you have any ideas how to connect to a remote DB2 database using SSL?\r\n\r\nThanks in advance.","title":"DB2 JDBC SSL Connection","body":"<p>Recently our partner have updated their database environment to use SSL, and we need to update our application config in order to establish the connection with the database.</p>\n\n<p>I have generated the JKS file and also have imported the certificates to the JKS.</p>\n\n<p>When I use SQL Squirrel connection string:</p>\n\n<blockquote>\n  <p>jdbc:db2://[host]:[port]/[databaseName]:sslConnection=true;sslTrustStoreLocation=c:\\db2_ssl\\db2.jks;sslTrustStorePassword=teste123;</p>\n</blockquote>\n\n<p>It connectes successfully.</p>\n\n<p>If I use the exact the same connection string:</p>\n\n<pre><code>Connection connection = DriverManager.getConnection(\"jdbc:db2://[host]:[port]/[databaseName]:sslConnection=true;sslTrustStoreLocation=c:\\db2_ssl\\db2.jks;sslTrustStorePassword=teste123;\", \"myuser\", \"mypassword\");\n</code></pre>\n\n<p>It throws me the exception as follows:</p>\n\n<pre><code>com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][3.64.96] A communication error occurred during operations on the connection's underlying socket, socket input stream, \nor socket output stream.  Error location: T4Agent.sendRequest() - flush (-1).  Message: Received fatal alert: handshake_failure. ERRORCODE=-4499, SQLSTATE=08001\n    at com.ibm.db2.jcc.am.bd.a(bd.java:321)\n    at com.ibm.db2.jcc.t4.a.a(a.java:548)\n    at com.ibm.db2.jcc.t4.a.a(a.java:543)\n    at com.ibm.db2.jcc.t4.a.f(a.java:484)\n    at com.ibm.db2.jcc.t4.a.flush_(a.java:390)\n    at com.ibm.db2.jcc.am.Agent.flowOutsideUOW(Agent.java:246)\n    at com.ibm.db2.jcc.t4.b.b(b.java:1220)\n    at com.ibm.db2.jcc.t4.b.b(b.java:788)\n    at com.ibm.db2.jcc.t4.b.a(b.java:760)\n    at com.ibm.db2.jcc.t4.b.a(b.java:421)\n    at com.ibm.db2.jcc.t4.b.a(b.java:396)\n    at com.ibm.db2.jcc.t4.b.&lt;init&gt;(b.java:334)\n    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource.java:232)\n    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource.java:198)\n    at com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:475)\n    at com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:116)\n    at java.sql.DriverManager.getConnection(DriverManager.java:379)\n    at java.sql.DriverManager.getConnection(DriverManager.java:415)\n    at com.ibm.sdpi.wmb.flows.productdata.ProductDataAnnouncementNode.evaluate(ProductDataAnnouncementNode.java:93)\n    at com.ibm.broker.javacompute.MbRuntimeJavaComputeNode.evaluate(MbRuntimeJavaComputeNode.java:265)\n    at com.ibm.broker.plugin.MbNode.evaluate(MbNode.java:1480)\n    at com.ibm.broker.plugin.MbOutputTerminal._propagate(Native Method)\n    at com.ibm.broker.plugin.MbOutputTerminal.propagate(MbOutputTerminal.java:114)\n    at com.ibm.sdpi.wmb.flows.common.SDPIOutboundCommon_JavaCompute.evaluate(SDPIOutboundCommon_JavaCompute.java:226)\n    at com.ibm.broker.javacompute.MbRuntimeJavaComputeNode.evaluate(MbRuntimeJavaComputeNode.java:265)\n    at com.ibm.broker.plugin.MbNode.evaluate(MbNode.java:1480)\nCaused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at com.ibm.jsse2.o.a(o.java:22)\n    at com.ibm.jsse2.o.a(o.java:34)\n    at com.ibm.jsse2.SSLSocketImpl.b(SSLSocketImpl.java:378)\n    at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:479)\n    at com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:437)\n    at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:772)\n    at com.ibm.jsse2.k.write(k.java:3)\n    at com.ibm.db2.jcc.t4.db.b(db.java:1685)\n    at com.ibm.db2.jcc.t4.db.a(db.java:1633)\n    at com.ibm.db2.jcc.t4.a.f(a.java:451)\n    ... 22 more\n</code></pre>\n\n<p>I am using the exact same DB2 drivers in SQL Squirrel and application.</p>\n\n<p>Why it does work in SQL Squirrel and it doesn't using DriverManager?</p>\n\n<p>Do you have any ideas how to connect to a remote DB2 database using SSL?</p>\n\n<p>Thanks in advance.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9800,"page":192,"page_size":100}
