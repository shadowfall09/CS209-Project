{"items":[{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634158278,"creation_date":1634158278,"answer_id":69562171,"question_id":69560514,"body_markdown":"You should probably do:\r\n\r\n    // start in classes root\r\n    File directorio = new File(&quot;./out/production/psp-2122&quot;); \r\n    // Run java with fully qualified class name Ejemplo2.Ejemplo2\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;java&quot;, &quot;Ejemplo2.Ejemplo2&quot;); ","title":"Having trouble calling .class to process on IntelliJ","body":"<p>You should probably do:</p>\n<pre><code>// start in classes root\nFile directorio = new File(&quot;./out/production/psp-2122&quot;); \n// Run java with fully qualified class name Ejemplo2.Ejemplo2\nProcessBuilder pb = new ProcessBuilder(&quot;java&quot;, &quot;Ejemplo2.Ejemplo2&quot;); \n</code></pre>\n"}],"owner":{"account_id":23024427,"reputation":1,"user_id":17144919,"display_name":"NuruMero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634203018,"creation_date":1634149428,"question_id":69560514,"body_markdown":"I&#39;m trying to get the result from a .class, calling the process on another .java. The formatting of both files is as follows:\r\n\r\n```\r\npackage Ejemplo2;\r\n\r\nimport java.io.*;\r\n\r\npublic class Ejemplo2 {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        Process p = new ProcessBuilder(&quot;ls&quot;, &quot;-la&quot;).start();\r\n\r\n        try {\r\n            InputStream is = p.getInputStream();\r\n            int c;\r\n            while ((c = is.read()) != -1) {\r\n                System.out.print((char) c);\r\n            }\r\n            is.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        int exitVal;\r\n        try {\r\n            exitVal = p.waitFor(); //recoge la salida de System.exit()\r\n            System.out.println(&quot;Valor de Salida: &quot; +exitVal);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nand\r\n```\r\npackage Ejemplo3;\r\n\r\nimport java.io.*;\r\n\r\npublic class Ejemplo3 {\r\n\r\n    public static void main(String[] args) throws IOException{\r\n\r\n        File directorio = new File(&quot;./out/production/psp-2122/Ejemplo2&quot;);\r\n\r\n        ProcessBuilder pb = new ProcessBuilder(&quot;java&quot;, &quot;Ejemplo2&quot;);\r\n\r\n        pb.directory(directorio);\r\n\r\n        System.out.printf(&quot;Directorio de trabajo: %s%n&quot;,pb.directory());\r\n\r\n        Process p = pb.start();\r\n\r\n        try {\r\n            InputStream  is = p.getInputStream();\r\n\r\n            for (int i = 0; i&lt;is.available(); i++) {\r\n                System.out.println(&quot;&quot; + is.read());\r\n            }\r\n            \r\n            is.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe result only displays the directory and the exit code, but I don&#39;t really have a clue why the process itself is not shown.","title":"Having trouble calling .class to process on IntelliJ","body":"<p>I'm trying to get the result from a .class, calling the process on another .java. The formatting of both files is as follows:</p>\n<pre><code>package Ejemplo2;\n\nimport java.io.*;\n\npublic class Ejemplo2 {\n\n    public static void main(String[] args) throws IOException {\n\n        Process p = new ProcessBuilder(&quot;ls&quot;, &quot;-la&quot;).start();\n\n        try {\n            InputStream is = p.getInputStream();\n            int c;\n            while ((c = is.read()) != -1) {\n                System.out.print((char) c);\n            }\n            is.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        int exitVal;\n        try {\n            exitVal = p.waitFor(); //recoge la salida de System.exit()\n            System.out.println(&quot;Valor de Salida: &quot; +exitVal);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>package Ejemplo3;\n\nimport java.io.*;\n\npublic class Ejemplo3 {\n\n    public static void main(String[] args) throws IOException{\n\n        File directorio = new File(&quot;./out/production/psp-2122/Ejemplo2&quot;);\n\n        ProcessBuilder pb = new ProcessBuilder(&quot;java&quot;, &quot;Ejemplo2&quot;);\n\n        pb.directory(directorio);\n\n        System.out.printf(&quot;Directorio de trabajo: %s%n&quot;,pb.directory());\n\n        Process p = pb.start();\n\n        try {\n            InputStream  is = p.getInputStream();\n\n            for (int i = 0; i&lt;is.available(); i++) {\n                System.out.println(&quot;&quot; + is.read());\n            }\n            \n            is.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The result only displays the directory and the exit code, but I don't really have a clue why the process itself is not shown.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":20782572,"reputation":1178,"user_id":15262615,"display_name":"Hussien Fahmy"},"score":1,"creation_date":1634203110,"post_id":69567878,"comment_id":122964078,"body_markdown":"https://stackoverflow.com/a/63654043/15262615","body":"<a href=\"https://stackoverflow.com/a/63654043/15262615\">stackoverflow.com/a/63654043/15262615</a>"}],"answers":[{"tags":[],"owner":{"account_id":8265021,"reputation":1010,"user_id":6214899,"display_name":"Cuong Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634202990,"creation_date":1634202990,"answer_id":69568126,"question_id":69567878,"body_markdown":"You should.\r\n\r\n     ActivityResultLauncher&lt;String&gt; mGetContent = registerForActivityResult(new GetContent(),\r\n        new ActivityResultCallback&lt;Uri&gt;() {\r\n            @Override\r\n            public void onActivityResult(Uri uri) {\r\n                // Handle the returned Uri\r\n            }\r\n    });\r\n    \r\n    @Override\r\n    public void onCreate(@Nullable savedInstanceState: Bundle) {\r\n        // ...\r\n        \r\n        binding.addphotoImage.setOnClickListener(new OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // Pass in the mime type you&#39;d like to allow the user to select\r\n                // as the input\r\n                mGetContent.launch(&quot;image/*&quot;);\r\n            }\r\n        });\r\n    }","title":"How can I change startActivityForResult() to ActivityResultLauncher?","body":"<p>You should.</p>\n<pre><code> ActivityResultLauncher&lt;String&gt; mGetContent = registerForActivityResult(new GetContent(),\n    new ActivityResultCallback&lt;Uri&gt;() {\n        @Override\n        public void onActivityResult(Uri uri) {\n            // Handle the returned Uri\n        }\n});\n\n@Override\npublic void onCreate(@Nullable savedInstanceState: Bundle) {\n    // ...\n    \n    binding.addphotoImage.setOnClickListener(new OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // Pass in the mime type you'd like to allow the user to select\n            // as the input\n            mGetContent.launch(&quot;image/*&quot;);\n        }\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":16052507,"reputation":11,"user_id":11585931,"display_name":"Ally"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1634209802,"answer_count":1,"score":-2,"last_activity_date":1634202990,"creation_date":1634201989,"question_id":69567878,"body_markdown":"I&#39;m a super beginner with Android Studio.\r\nI&#39;m trying to Open album and get images and startActivityForResult() has been deprecated. How can I change my code by using ActivityResultLauncher?\r\n\r\n```\r\npublic class AddPhotoActivity extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    private ActivityAddPhotoBinding binding;\r\n\r\n    private String Url;\r\n\r\n    private FirebaseStorage firebaseStorage;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_add_photo);\r\n\r\n        binding.addphotoBtnUpload.setOnClickListener(this);\r\n\r\n\r\n        //Open Album\r\n        Intent intent = new Intent(Intent.ACTION_PICK);\r\n        intent.setType(&quot;image/*&quot;);\r\n        startActivityForResult(intent, PICK_IMAGE_FROM_ALBUM);\r\n\r\n        // Firebase storage\r\n        firebaseStorage = FirebaseStorage.getInstance();\r\n\r\n     \r\n        binding.addphotoImage.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                Intent intent = new Intent(Intent.ACTION_PICK);\r\n                intent.setType(&quot;image/*&quot;);\r\n                startActivityForResult(intent, PICK_IMAGE_FROM_ALBUM);\r\n            }\r\n        });\r\n    }\r\n```","title":"How can I change startActivityForResult() to ActivityResultLauncher?","body":"<p>I'm a super beginner with Android Studio.\nI'm trying to Open album and get images and startActivityForResult() has been deprecated. How can I change my code by using ActivityResultLauncher?</p>\n<pre><code>public class AddPhotoActivity extends AppCompatActivity implements View.OnClickListener {\n\n    private ActivityAddPhotoBinding binding;\n\n    private String Url;\n\n    private FirebaseStorage firebaseStorage;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_add_photo);\n\n        binding.addphotoBtnUpload.setOnClickListener(this);\n\n\n        //Open Album\n        Intent intent = new Intent(Intent.ACTION_PICK);\n        intent.setType(&quot;image/*&quot;);\n        startActivityForResult(intent, PICK_IMAGE_FROM_ALBUM);\n\n        // Firebase storage\n        firebaseStorage = FirebaseStorage.getInstance();\n\n     \n        binding.addphotoImage.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n\n                Intent intent = new Intent(Intent.ACTION_PICK);\n                intent.setType(&quot;image/*&quot;);\n                startActivityForResult(intent, PICK_IMAGE_FROM_ALBUM);\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1632808180,"post_id":69355533,"comment_id":122585880,"body_markdown":"I can try to help you - for contact see my profile. If successful, you can post the solution here.","body":"I can try to help you - for contact see my profile. If successful, you can post the solution here."},{"owner":{"account_id":20121147,"reputation":11,"user_id":14755627,"display_name":"leminhduc"},"score":0,"creation_date":1632814632,"post_id":69355533,"comment_id":122587949,"body_markdown":"Hi @kiwiwings, I have reached out to you via email, hoping to hear from you.","body":"Hi @kiwiwings, I have reached out to you via email, hoping to hear from you."},{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1633734244,"post_id":69355533,"comment_id":122847721,"body_markdown":"As a reference, I add the [bugzilla entry](https://bz.apache.org/bugzilla/show_bug.cgi?id=65623) which will contain the fix soon. for users of POI 5.0.0, you can copy the XAdESXLSignatureFacet source and provide it in your user packages. The corresponding test case is &quot;createXAdES_T_65623&quot; in [TestSignatureInfo](https://svn.apache.org/viewvc/poi/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java?view=markup)","body":"As a reference, I add the <a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=65623\" rel=\"nofollow noreferrer\">bugzilla entry</a> which will contain the fix soon. for users of POI 5.0.0, you can copy the XAdESXLSignatureFacet source and provide it in your user packages. The corresponding test case is &quot;createXAdES_T_65623&quot; in <a href=\"https://svn.apache.org/viewvc/poi/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java?view=markup\" rel=\"nofollow noreferrer\">TestSignatureInfo</a>"}],"answers":[{"tags":[],"owner":{"account_id":20121147,"reputation":11,"user_id":14755627,"display_name":"leminhduc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634202328,"creation_date":1634202328,"answer_id":69567953,"question_id":69355533,"body_markdown":"+ The problem was **solved** with the enthusiastic and professional help of **[kiwiwings](https://stackoverflow.com/users/2066598/kiwiwings)**&lt;br&gt;\r\n+ If anyone has the same problem as me, you can follow kwiwing&#39;s instructions in the comment with the 2 links he described:&lt;br&gt;\r\n\r\n&gt; As a reference, I add the **[bugzilla entry](https://bz.apache.org/bugzilla/show_bug.cgi?id=65623)** which will contain the fix soon. for users of POI 5.0.0, you can copy the XAdESXLSignatureFacet source and provide it in your user packages. The corresponding test case is &quot;createXAdES_T_65623&quot; in **[TestSignatureInfo](https://svn.apache.org/viewvc/poi/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java?view=markup)** \r\n","title":"Digital Signature with XLSX and XAdES-T using Java","body":"<ul>\n<li>The problem was <strong>solved</strong> with the enthusiastic and professional help of <strong><a href=\"https://stackoverflow.com/users/2066598/kiwiwings\">kiwiwings</a></strong><br></li>\n<li>If anyone has the same problem as me, you can follow kwiwing's instructions in the comment with the 2 links he described:<br></li>\n</ul>\n<blockquote>\n<p>As a reference, I add the <strong><a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=65623\" rel=\"nofollow noreferrer\">bugzilla entry</a></strong> which will contain the fix soon. for users of POI 5.0.0, you can copy the XAdESXLSignatureFacet source and provide it in your user packages. The corresponding test case is &quot;createXAdES_T_65623&quot; in <strong><a href=\"https://svn.apache.org/viewvc/poi/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java?view=markup\" rel=\"nofollow noreferrer\">TestSignatureInfo</a></strong></p>\n</blockquote>\n"}],"owner":{"account_id":20121147,"reputation":11,"user_id":14755627,"display_name":"leminhduc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":652,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69567953,"answer_count":1,"score":0,"last_activity_date":1634202328,"creation_date":1632800474,"question_id":69355533,"body_markdown":"&lt;br/&gt;\r\nI am trying to sign XLSX file in office 2016 and add timestamp server, I used apache poi&#39;s code but it doesn&#39;t seem to work, every signing result returns XAdES-EPES. The result I expect is XAdES-T.\r\nHere is the source code for apache poi with timestamp server signing:\r\n\r\n&lt;https://github.com/apache/poi/blob/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java&gt;\r\n\r\n    void testSignEnvelopingDocument() throws Exception {\r\n        String testFile = &quot;hello-world-unsigned.xlsx&quot;;\r\n        File sigCopy = testdata.getFile(testFile);\r\n        UnsynchronizedByteArrayOutputStream bos = new UnsynchronizedByteArrayOutputStream(50000);\r\n\r\n        final String execTimestr;\r\n\r\n\r\n        try (OPCPackage pkg = OPCPackage.open(copy(sigCopy), PackageAccess.READ_WRITE)) {\r\n\r\n            initKeyPair();\r\n            final X509CRL crl = generateCrl(x509, keyPair.getPrivate());\r\n\r\n            // setup\r\n            SignatureConfig signatureConfig = new SignatureConfig();\r\n            signatureConfig.setKey(keyPair.getPrivate());\r\n\r\n            /*\r\n             * We need at least 2 certificates for the XAdES-C complete certificate\r\n             * refs construction.\r\n             */\r\n            List&lt;X509Certificate&gt; certificateChain = new ArrayList&lt;&gt;();\r\n            certificateChain.add(x509);\r\n            certificateChain.add(x509);\r\n            signatureConfig.setSigningCertificateChain(certificateChain);\r\n\r\n            signatureConfig.addSignatureFacet(new OOXMLSignatureFacet());\r\n            signatureConfig.addSignatureFacet(new EnvelopedSignatureFacet());\r\n            signatureConfig.addSignatureFacet(new KeyInfoSignatureFacet());\r\n            signatureConfig.addSignatureFacet(new XAdESSignatureFacet());\r\n            signatureConfig.addSignatureFacet(new XAdESXLSignatureFacet());\r\n\r\n            // check for internet, no error means it works\r\n            boolean mockTsp = (getAccessError(&quot;http://timestamp.comodoca.com/rfc3161&quot;, true, 10000) != null);\r\n\r\n            // http://timestamping.edelweb.fr/service/tsp\r\n            // http://tsa.belgium.be/connect\r\n            // http://timestamp.comodoca.com/authenticode\r\n            // http://timestamp.comodoca.com/rfc3161\r\n            // http://services.globaltrustfinder.com/adss/tsa\r\n            signatureConfig.setTspUrl(&quot;http://timestamp.comodoca.com/rfc3161&quot;);\r\n            signatureConfig.setTspRequestPolicy(null); // comodoca request fails, if default policy is set ...\r\n            signatureConfig.setTspOldProtocol(false);\r\n\r\n            signatureConfig.setXadesDigestAlgo(HashAlgorithm.sha512);\r\n            signatureConfig.setXadesRole(&quot;Xades Reviewer&quot;);\r\n            signatureConfig.setSignatureDescription(&quot;test xades signature&quot;);\r\n\r\n            execTimestr = signatureConfig.formatExecutionTime();\r\n\r\n            //set proxy info if any\r\n            String proxy = System.getProperty(&quot;http_proxy&quot;);\r\n            if (proxy != null &amp;&amp; proxy.trim().length() &gt; 0) {\r\n                signatureConfig.setProxyUrl(proxy);\r\n            }\r\n\r\n            if (mockTsp) {\r\n                TimeStampService tspService = (signatureInfo, data, revocationData) -&gt; {\r\n                    revocationData.addCRL(crl);\r\n                    return &quot;time-stamp-token&quot;.getBytes(LocaleUtil.CHARSET_1252);\r\n                };\r\n                signatureConfig.setTspService(tspService);\r\n            } else {\r\n                TimeStampServiceValidator tspValidator = (validateChain, revocationData) -&gt; {\r\n                    for (X509Certificate certificate : validateChain) {\r\n                        LOG.atDebug().log(&quot;certificate: {}&quot;, certificate.getSubjectX500Principal());\r\n                        LOG.atDebug().log(&quot;validity: {} - {}&quot;, certificate.getNotBefore(), certificate.getNotAfter());\r\n                    }\r\n                };\r\n                signatureConfig.setTspValidator(tspValidator);\r\n                signatureConfig.setTspOldProtocol(signatureConfig.getTspUrl().contains(&quot;edelweb&quot;));\r\n            }\r\n\r\n            final RevocationData revocationData = new RevocationData();\r\n            revocationData.addCRL(crl);\r\n            OCSPResp ocspResp = createOcspResp(x509, x509, x509, keyPair.getPrivate(), cal.getTimeInMillis());\r\n            revocationData.addOCSP(ocspResp.getEncoded());\r\n\r\n            RevocationDataService revocationDataService = revocationChain -&gt; revocationData;\r\n            signatureConfig.setRevocationDataService(revocationDataService);\r\n\r\n            // operate\r\n            SignatureInfo si = new SignatureInfo();\r\n            si.setOpcPackage(pkg);\r\n            si.setSignatureConfig(signatureConfig);\r\n            try {\r\n                si.confirmSignature();\r\n            } catch (RuntimeException e) {\r\n                // only allow a ConnectException because of timeout, we see this in Jenkins from time to time...\r\n                if (e.getCause() == null) {\r\n                    throw e;\r\n                }\r\n                if ((e.getCause() instanceof ConnectException) || (e.getCause() instanceof SocketTimeoutException)) {\r\n                    assumeFalse(e.getCause().getMessage().contains(&quot;timed out&quot;),\r\n                        &quot;Only allowing ConnectException with &#39;timed out&#39; as message here, but had: &quot; + e);\r\n                } else if (e.getCause() instanceof IOException) {\r\n                    assumeFalse(e.getCause().getMessage().contains(&quot;Error contacting TSP server&quot;),\r\n                        &quot;Only allowing IOException with &#39;Error contacting TSP server&#39; as message here, but had: &quot; + e);\r\n                } else if (e.getCause() instanceof RuntimeException) {\r\n                    assumeFalse(e.getCause().getMessage().contains(&quot;This site is cur&quot;),\r\n                        &quot;Only allowing RuntimeException with &#39;This site is cur&#39; as message here, but had: &quot; + e);\r\n                }\r\n                throw e;\r\n            }\r\n    }\r\n\r\n","title":"Digital Signature with XLSX and XAdES-T using Java","body":"<br/>\nI am trying to sign XLSX file in office 2016 and add timestamp server, I used apache poi's code but it doesn't seem to work, every signing result returns XAdES-EPES. The result I expect is XAdES-T.\nHere is the source code for apache poi with timestamp server signing:\n<p><a href=\"https://github.com/apache/poi/blob/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java\" rel=\"nofollow noreferrer\">https://github.com/apache/poi/blob/trunk/poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/dsig/TestSignatureInfo.java</a></p>\n<pre><code>void testSignEnvelopingDocument() throws Exception {\n    String testFile = &quot;hello-world-unsigned.xlsx&quot;;\n    File sigCopy = testdata.getFile(testFile);\n    UnsynchronizedByteArrayOutputStream bos = new UnsynchronizedByteArrayOutputStream(50000);\n\n    final String execTimestr;\n\n\n    try (OPCPackage pkg = OPCPackage.open(copy(sigCopy), PackageAccess.READ_WRITE)) {\n\n        initKeyPair();\n        final X509CRL crl = generateCrl(x509, keyPair.getPrivate());\n\n        // setup\n        SignatureConfig signatureConfig = new SignatureConfig();\n        signatureConfig.setKey(keyPair.getPrivate());\n\n        /*\n         * We need at least 2 certificates for the XAdES-C complete certificate\n         * refs construction.\n         */\n        List&lt;X509Certificate&gt; certificateChain = new ArrayList&lt;&gt;();\n        certificateChain.add(x509);\n        certificateChain.add(x509);\n        signatureConfig.setSigningCertificateChain(certificateChain);\n\n        signatureConfig.addSignatureFacet(new OOXMLSignatureFacet());\n        signatureConfig.addSignatureFacet(new EnvelopedSignatureFacet());\n        signatureConfig.addSignatureFacet(new KeyInfoSignatureFacet());\n        signatureConfig.addSignatureFacet(new XAdESSignatureFacet());\n        signatureConfig.addSignatureFacet(new XAdESXLSignatureFacet());\n\n        // check for internet, no error means it works\n        boolean mockTsp = (getAccessError(&quot;http://timestamp.comodoca.com/rfc3161&quot;, true, 10000) != null);\n\n        // http://timestamping.edelweb.fr/service/tsp\n        // http://tsa.belgium.be/connect\n        // http://timestamp.comodoca.com/authenticode\n        // http://timestamp.comodoca.com/rfc3161\n        // http://services.globaltrustfinder.com/adss/tsa\n        signatureConfig.setTspUrl(&quot;http://timestamp.comodoca.com/rfc3161&quot;);\n        signatureConfig.setTspRequestPolicy(null); // comodoca request fails, if default policy is set ...\n        signatureConfig.setTspOldProtocol(false);\n\n        signatureConfig.setXadesDigestAlgo(HashAlgorithm.sha512);\n        signatureConfig.setXadesRole(&quot;Xades Reviewer&quot;);\n        signatureConfig.setSignatureDescription(&quot;test xades signature&quot;);\n\n        execTimestr = signatureConfig.formatExecutionTime();\n\n        //set proxy info if any\n        String proxy = System.getProperty(&quot;http_proxy&quot;);\n        if (proxy != null &amp;&amp; proxy.trim().length() &gt; 0) {\n            signatureConfig.setProxyUrl(proxy);\n        }\n\n        if (mockTsp) {\n            TimeStampService tspService = (signatureInfo, data, revocationData) -&gt; {\n                revocationData.addCRL(crl);\n                return &quot;time-stamp-token&quot;.getBytes(LocaleUtil.CHARSET_1252);\n            };\n            signatureConfig.setTspService(tspService);\n        } else {\n            TimeStampServiceValidator tspValidator = (validateChain, revocationData) -&gt; {\n                for (X509Certificate certificate : validateChain) {\n                    LOG.atDebug().log(&quot;certificate: {}&quot;, certificate.getSubjectX500Principal());\n                    LOG.atDebug().log(&quot;validity: {} - {}&quot;, certificate.getNotBefore(), certificate.getNotAfter());\n                }\n            };\n            signatureConfig.setTspValidator(tspValidator);\n            signatureConfig.setTspOldProtocol(signatureConfig.getTspUrl().contains(&quot;edelweb&quot;));\n        }\n\n        final RevocationData revocationData = new RevocationData();\n        revocationData.addCRL(crl);\n        OCSPResp ocspResp = createOcspResp(x509, x509, x509, keyPair.getPrivate(), cal.getTimeInMillis());\n        revocationData.addOCSP(ocspResp.getEncoded());\n\n        RevocationDataService revocationDataService = revocationChain -&gt; revocationData;\n        signatureConfig.setRevocationDataService(revocationDataService);\n\n        // operate\n        SignatureInfo si = new SignatureInfo();\n        si.setOpcPackage(pkg);\n        si.setSignatureConfig(signatureConfig);\n        try {\n            si.confirmSignature();\n        } catch (RuntimeException e) {\n            // only allow a ConnectException because of timeout, we see this in Jenkins from time to time...\n            if (e.getCause() == null) {\n                throw e;\n            }\n            if ((e.getCause() instanceof ConnectException) || (e.getCause() instanceof SocketTimeoutException)) {\n                assumeFalse(e.getCause().getMessage().contains(&quot;timed out&quot;),\n                    &quot;Only allowing ConnectException with 'timed out' as message here, but had: &quot; + e);\n            } else if (e.getCause() instanceof IOException) {\n                assumeFalse(e.getCause().getMessage().contains(&quot;Error contacting TSP server&quot;),\n                    &quot;Only allowing IOException with 'Error contacting TSP server' as message here, but had: &quot; + e);\n            } else if (e.getCause() instanceof RuntimeException) {\n                assumeFalse(e.getCause().getMessage().contains(&quot;This site is cur&quot;),\n                    &quot;Only allowing RuntimeException with 'This site is cur' as message here, but had: &quot; + e);\n            }\n            throw e;\n        }\n}\n</code></pre>\n"},{"tags":["java","android","view","height","scrollbar"],"comments":[{"owner":{"account_id":18264438,"reputation":467,"user_id":13296516,"display_name":"null_override"},"score":0,"creation_date":1633987604,"post_id":69530491,"comment_id":122901593,"body_markdown":"Did you see this: https://androidopentutorials.com/android-vertical-scrollbar-styling/","body":"Did you see this: <a href=\"https://androidopentutorials.com/android-vertical-scrollbar-styling/\" rel=\"nofollow noreferrer\">androidopentutorials.com/android-vertical-scrollbar-styling</a>"}],"owner":{"account_id":23005379,"reputation":71,"user_id":17128751,"display_name":"mbob98"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634202295,"creation_date":1633974603,"question_id":69530491,"body_markdown":"I&#39;m trying to make a view whose height is independent of the scrollbar, where the view is larger than the scrollbar&#39;s height but is still accurately scrolled by said scrollbar.\r\n\r\nAn example of this would be the below image in a Harman infotainment system, in the settings menu:\r\n\r\n[![Harman Vehicle Settings][1]][1]\r\n\r\nAs you can see from the above image, the scrollbar is slightly smaller than the total height of the view it scrolls for, which is normally not possible in something like a GridView or RecyclerView, since the height of the scroll bar is fixed to the height of the view. How would one achieve this with a GridView or RecyclerView? If not possible with a GridView or RecyclerView, how could I otherwise implement a similar idea?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YrqXG.png","title":"Making the view larger than the scrollbar","body":"<p>I'm trying to make a view whose height is independent of the scrollbar, where the view is larger than the scrollbar's height but is still accurately scrolled by said scrollbar.</p>\n<p>An example of this would be the below image in a Harman infotainment system, in the settings menu:</p>\n<p><a href=\"https://i.stack.imgur.com/YrqXG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YrqXG.png\" alt=\"Harman Vehicle Settings\" /></a></p>\n<p>As you can see from the above image, the scrollbar is slightly smaller than the total height of the view it scrolls for, which is normally not possible in something like a GridView or RecyclerView, since the height of the scroll bar is fixed to the height of the view. How would one achieve this with a GridView or RecyclerView? If not possible with a GridView or RecyclerView, how could I otherwise implement a similar idea?</p>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1634152401,"post_id":69560807,"comment_id":122951943,"body_markdown":"This should answer your question https://stackoverflow.com/questions/36292406/what-does-user-mean-with-curl\n\nIt gets converted into an Authorization Header that contains base64 encoding of the username:password.","body":"This should answer your question <a href=\"https://stackoverflow.com/questions/36292406/what-does-user-mean-with-curl\" title=\"what does user mean with curl\">stackoverflow.com/questions/36292406/&hellip;</a>  It gets converted into an Authorization Header that contains base64 encoding of the username:password."}],"answers":[{"tags":[],"owner":{"account_id":6093444,"reputation":989,"user_id":4755028,"accept_rate":46,"display_name":"Aavik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634202141,"creation_date":1634202141,"answer_id":69567917,"question_id":69560807,"body_markdown":"Thanks. Authorisation header works with Base64 encode like:\r\necho -n &quot;username:password&quot; | base64 =&gt; outputs encoded value\r\n.header(&quot;Authorization&quot;, &quot;Basic &lt;encoded value&gt;&quot;)","title":"Curl to rest assured API","body":"<p>Thanks. Authorisation header works with Base64 encode like:\necho -n &quot;username:password&quot; | base64 =&gt; outputs encoded value\n.header(&quot;Authorization&quot;, &quot;Basic &quot;)</p>\n"}],"owner":{"account_id":6093444,"reputation":989,"user_id":4755028,"accept_rate":46,"display_name":"Aavik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634202141,"creation_date":1634150983,"question_id":69560807,"body_markdown":"Am trying to use REST-Assured from GET curl request:\r\n\r\n```\r\ncurl --location --request GET \\\r\n&quot;https://repo.jfrog.org/artifactory/&lt;REPO-KEY&gt;/&lt;GROUPD-ID&gt;/&lt;ARTIFACT-ID&gt;/&lt;VERSION&gt;-SNAPSHOT/file1.xml&quot; \\\r\n--header &#39;originating_ip: 127.0.0.1&#39; \\\r\n--user &#39;username:password&#39; \\\r\n--output jrog_test_output\r\n```\r\nHere is the REST-Assured request:\r\n```\r\ngiven().header(&quot;originating_ip&quot;, &quot;127.0.0.1&quot;).formParam(&quot;username&quot;,&quot;username&quot;).formParam(&quot;password&quot;,&quot;password&quot;).log().all().get(url).then().log().all().assertThat().statusCode(HttpStatus.SC_OK);\r\n```\r\nThis does not connect and don&#39;t get logs. How should the username and password get assigned.\r\n","title":"Curl to rest assured API","body":"<p>Am trying to use REST-Assured from GET curl request:</p>\n<pre><code>curl --location --request GET \\\n&quot;https://repo.jfrog.org/artifactory/&lt;REPO-KEY&gt;/&lt;GROUPD-ID&gt;/&lt;ARTIFACT-ID&gt;/&lt;VERSION&gt;-SNAPSHOT/file1.xml&quot; \\\n--header 'originating_ip: 127.0.0.1' \\\n--user 'username:password' \\\n--output jrog_test_output\n</code></pre>\n<p>Here is the REST-Assured request:</p>\n<pre><code>given().header(&quot;originating_ip&quot;, &quot;127.0.0.1&quot;).formParam(&quot;username&quot;,&quot;username&quot;).formParam(&quot;password&quot;,&quot;password&quot;).log().all().get(url).then().log().all().assertThat().statusCode(HttpStatus.SC_OK);\n</code></pre>\n<p>This does not connect and don't get logs. How should the username and password get assigned.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":2,"creation_date":1634202065,"post_id":69567882,"comment_id":122963690,"body_markdown":"Does this answer your question? [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"owner":{"account_id":23029371,"reputation":1,"user_id":17149113,"display_name":"Jack"},"score":0,"creation_date":1634202249,"post_id":69567882,"comment_id":122963754,"body_markdown":"Yes! thanks buddy","body":"Yes! thanks buddy"}],"owner":{"account_id":23029371,"reputation":1,"user_id":17149113,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634202095,"answer_count":0,"score":0,"last_activity_date":1634202007,"creation_date":1634202007,"question_id":69567882,"body_markdown":"Apologies in advance I only started learning to code very recently, with no experience in the field. My code looks like this\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tint accNo, choice = 4;\r\n\t\tString accName;\r\n\t\tString accType;\r\n\t\tdouble balance;\r\n\t\tSystem.out.print(&quot;Enter Account No :&quot;);\r\n\t\taccNo = input.nextInt();\r\n\r\n\t\tSystem.out.print(&quot;Name : &quot;);\r\n\t\taccName = input.nextLine();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Account Type : &quot;);\r\n\t\taccType = input.nextLine();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Opening Balance : &quot;);\r\n\t\tbalance = input.nextDouble();\r\n\r\n\r\nBut it prints off like this with name and account type being the same thing\r\n\r\nEnter Account No :1231234\r\n\r\nName : Account Type : \r\n\r\nAny ideas?","title":"Don&#39;t know why this is printing on the same line?","body":"<p>Apologies in advance I only started learning to code very recently, with no experience in the field. My code looks like this</p>\n<pre><code>public static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    int accNo, choice = 4;\n    String accName;\n    String accType;\n    double balance;\n    System.out.print(&quot;Enter Account No :&quot;);\n    accNo = input.nextInt();\n\n    System.out.print(&quot;Name : &quot;);\n    accName = input.nextLine();\n    \n    System.out.print(&quot;Account Type : &quot;);\n    accType = input.nextLine();\n    \n    System.out.print(&quot;Opening Balance : &quot;);\n    balance = input.nextDouble();\n</code></pre>\n<p>But it prints off like this with name and account type being the same thing</p>\n<p>Enter Account No :1231234</p>\n<p>Name : Account Type :</p>\n<p>Any ideas?</p>\n"},{"tags":["java","spring","ldap","protocols"],"owner":{"account_id":23029286,"reputation":11,"user_id":17149036,"display_name":"skaz76"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634201740,"creation_date":1634201740,"question_id":69567814,"body_markdown":"I am using spring-ldap-core (version 2.3.3) and spring-security-ldap (version 5.4.2) plugin in my Sprint boot application.\r\nThe application worked ok ... until yesterday.\r\nYesterday, users receive error \r\n\r\n&gt; javax.naming.authenticationexception ldap error code 49 - invalid credentials\r\n\r\nAfter checking other applications written in other languages ​​(php, pascal, C #), I came to the conclusion that the problem may be the LDAP protocol version.\r\n\r\nOther applications enforce LDAP version 3.\r\n\r\nCan anyone tell me how to enforce this version in spring-security???","title":"Spring security auth ldap","body":"<p>I am using spring-ldap-core (version 2.3.3) and spring-security-ldap (version 5.4.2) plugin in my Sprint boot application.\nThe application worked ok ... until yesterday.\nYesterday, users receive error</p>\n<blockquote>\n<p>javax.naming.authenticationexception ldap error code 49 - invalid credentials</p>\n</blockquote>\n<p>After checking other applications written in other languages ​​(php, pascal, C #), I came to the conclusion that the problem may be the LDAP protocol version.</p>\n<p>Other applications enforce LDAP version 3.</p>\n<p>Can anyone tell me how to enforce this version in spring-security???</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":20560636,"reputation":41,"user_id":15091227,"display_name":"Emre Ozcan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634201670,"creation_date":1634201670,"answer_id":69567799,"question_id":69567798,"body_markdown":"you have to update your **build gradle**\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n\r\nto\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n\r\nNow problem will fix","title":"ActivityResultLauncher unresolved reference","body":"<p>you have to update your <strong>build gradle</strong></p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.2.0'\n</code></pre>\n<p>to</p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.3.1'\n</code></pre>\n<p>Now problem will fix</p>\n"}],"owner":{"account_id":20560636,"reputation":41,"user_id":15091227,"display_name":"Emre Ozcan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":650,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69567799,"answer_count":1,"score":1,"last_activity_date":1634201670,"creation_date":1634201670,"question_id":69567798,"body_markdown":"As you know pick image from gallery or etc. change using of it. You have to use **ActivityResultLauncher**. Hovewer, sometimes it could not show. because of that:\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n\r\n","title":"ActivityResultLauncher unresolved reference","body":"<p>As you know pick image from gallery or etc. change using of it. You have to use <strong>ActivityResultLauncher</strong>. Hovewer, sometimes it could not show. because of that:</p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.2.0'\n</code></pre>\n"},{"tags":["java","lambda","stream","hashmap","java-stream"],"comments":[{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1634196031,"post_id":69566511,"comment_id":122961318,"body_markdown":"I don&#39;t think you can do much more than you&#39;ve already done. Other languages use `_` for this purpose but that&#39;s a reserved keyword since Java 9","body":"I don&#39;t think you can do much more than you&#39;ve already done. Other languages use <code>_</code> for this purpose but that&#39;s a reserved keyword since Java 9"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1634196196,"post_id":69566511,"comment_id":122961379,"body_markdown":"Thanks a lot. After asking the question, I have seen that there is a similar usage in `computeIfAbsent` method explanations. So, val is only used at that place. So, I can use it like I used.","body":"Thanks a lot. After asking the question, I have seen that there is a similar usage in <code>computeIfAbsent</code> method explanations. So, val is only used at that place. So, I can use it like I used."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634201634,"creation_date":1634201634,"answer_id":69567789,"question_id":69566511,"body_markdown":"Your `addToMap()` method implies a wrong understanding of the parameters of the `computeIfAbsent()` method:\r\n\r\n    private void addToMap(Integer key, UUID value) {\r\n        map.computeIfAbsent(key, val -&gt; new ArrayList&lt;&gt;()).add(value);\r\n    }\r\n\r\nThe parameter in `val -&gt; new ArrayList&lt;&gt;()` has nothing to do with the `value` that you pass into `addToMap()`!\r\n\r\nIf you look at the JavaDoc for [Map.computeIfAbsent()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)) you can see that the second parameter is a `Function&lt;? super K,​? extends V&gt;` - i.e. a function that takes a key and returns whatever should be stored in the map.\r\n\r\nIt would be better to write the `addToMap()` method as\r\n\r\n    private void addToMap(Integer key, UUID value) {\r\n        map.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\r\n    }\r\n\r\nNote that the answer from toniedzwiedz is dangerous. It only works for a `Map&lt;Integer, ?&gt;` with keys greater than or equal to zero.\r\n\r\nIt is dangerous because it basically replaces `k -&gt; new ArrayList&lt;&gt;()` with `k -&gt; new ArrayList&lt;&gt;(k)` - this happens to work for maps with `Integer` keys and uses the key value to define the initial capacity of the `ArrayList`.\r\n\r\nIt will not work if `k` is negative (`new ArrayList&lt;&gt;(k)` will throw an `IllegalArgumentException` if k is negative).\r\n\r\nIt will also not work for a `Map&lt;String, UUID&gt;` because there is no `ArrayList` constructor that takes a `String` argument.\r\n\r\n","title":"Strange lambda behaviour in Java stream","body":"<p>Your <code>addToMap()</code> method implies a wrong understanding of the parameters of the <code>computeIfAbsent()</code> method:</p>\n<pre><code>private void addToMap(Integer key, UUID value) {\n    map.computeIfAbsent(key, val -&gt; new ArrayList&lt;&gt;()).add(value);\n}\n</code></pre>\n<p>The parameter in <code>val -&gt; new ArrayList&lt;&gt;()</code> has nothing to do with the <code>value</code> that you pass into <code>addToMap()</code>!</p>\n<p>If you look at the JavaDoc for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\">Map.computeIfAbsent()</a> you can see that the second parameter is a <code>Function&lt;? super K,​? extends V&gt;</code> - i.e. a function that takes a key and returns whatever should be stored in the map.</p>\n<p>It would be better to write the <code>addToMap()</code> method as</p>\n<pre><code>private void addToMap(Integer key, UUID value) {\n    map.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\n}\n</code></pre>\n<p>Note that the answer from toniedzwiedz is dangerous. It only works for a <code>Map&lt;Integer, ?&gt;</code> with keys greater than or equal to zero.</p>\n<p>It is dangerous because it basically replaces <code>k -&gt; new ArrayList&lt;&gt;()</code> with <code>k -&gt; new ArrayList&lt;&gt;(k)</code> - this happens to work for maps with <code>Integer</code> keys and uses the key value to define the initial capacity of the <code>ArrayList</code>.</p>\n<p>It will not work if <code>k</code> is negative (<code>new ArrayList&lt;&gt;(k)</code> will throw an <code>IllegalArgumentException</code> if k is negative).</p>\n<p>It will also not work for a <code>Map&lt;String, UUID&gt;</code> because there is no <code>ArrayList</code> constructor that takes a <code>String</code> argument.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69567789,"answer_count":1,"score":1,"last_activity_date":1634201634,"creation_date":1634195836,"question_id":69566511,"body_markdown":"I created the following method that adds the given UUID value with the given Integer to teh `map` variable.  \r\n\r\n\r\n```\r\nfinal Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();\r\n\r\nprivate void addToMap(Integer key, UUID value) {\r\n    map.computeIfAbsent(key, val -&gt; new ArrayList&lt;&gt;()).add(value);\r\n}\r\n```\r\n\r\nNormally I was tried to use `map.computeIfAbsent(key, value -&gt; new ArrayList&lt;&gt;()).add(value);` by passing `value` parameter to the lambda function, it it throws &quot;*Variable &#39;value&#39; is already defined in the scope*&quot; error pointing the &quot;value&quot; in `.. value -&gt;  ...` part. \r\n\r\nMy updated `addToMap` method is working, but I think `val` is pointless. So, how should this method be updated? ","title":"Strange lambda behaviour in Java stream","body":"<p>I created the following method that adds the given UUID value with the given Integer to teh <code>map</code> variable.</p>\n<pre><code>final Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();\n\nprivate void addToMap(Integer key, UUID value) {\n    map.computeIfAbsent(key, val -&gt; new ArrayList&lt;&gt;()).add(value);\n}\n</code></pre>\n<p>Normally I was tried to use <code>map.computeIfAbsent(key, value -&gt; new ArrayList&lt;&gt;()).add(value);</code> by passing <code>value</code> parameter to the lambda function, it it throws &quot;<em>Variable 'value' is already defined in the scope</em>&quot; error pointing the &quot;value&quot; in <code>.. value -&gt;  ...</code> part.</p>\n<p>My updated <code>addToMap</code> method is working, but I think <code>val</code> is pointless. So, how should this method be updated?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634200244,"post_id":69566494,"comment_id":122962968,"body_markdown":"When you run it how? There&#39;s not enough here to reproduce the problem.","body":"When you run it how? There&#39;s not enough here to reproduce the problem."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634201122,"post_id":69566494,"comment_id":122963289,"body_markdown":"What [tag:basic] has to do with it is another mystery.","body":"What <a href=\"https://stackoverflow.com/questions/tagged/basic\">basic</a> has to do with it is another mystery."}],"answers":[{"tags":[],"owner":{"account_id":3888257,"reputation":111,"user_id":5532932,"display_name":"muratcanyeldan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634197478,"creation_date":1634197478,"answer_id":69566865,"question_id":69566494,"body_markdown":"There is a several things which you should fix with your code. \r\nIn general class names start with upper case letters in Java.\r\nAnd you should use getter and setters for you variables for best practice. Also you can&#39;t read streetName with your current code because when you call in.nextInt() method it doesn&#39;t consume new line character. And also for best practice you should use camelCase for you variable names.\r\n\r\nHere is a better aproach to your code.\r\n\r\n    public class Virual {\r\n    \tprivate String name;\r\n    \tprivate String streetName;\r\n    \tprivate String barangay;\r\n    \tprivate String city;\r\n    \tprivate String region;\r\n    \tprivate int zipcode;\r\n    \tprivate int streetNo;\r\n    \r\n    \tpublic Virual() {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn String.format(&quot;Name: %s Street No: %d Street: %s Barangay: %s City : %s Region: %s Zip Code : %d&quot;, name, streetNo, streetName, barangay, city, region, zipcode);\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getStreetName() {\r\n    \t\treturn streetName;\r\n    \t}\r\n    \r\n    \tpublic void setStreetName(String streetName) {\r\n    \t\tthis.streetName = streetName;\r\n    \t}\r\n    \r\n    \tpublic String getBarangay() {\r\n    \t\treturn barangay;\r\n    \t}\r\n    \r\n    \tpublic void setBarangay(String barangay) {\r\n    \t\tthis.barangay = barangay;\r\n    \t}\r\n    \r\n    \tpublic String getCity() {\r\n    \t\treturn city;\r\n    \t}\r\n    \r\n    \tpublic void setCity(String city) {\r\n    \t\tthis.city = city;\r\n    \t}\r\n    \r\n    \tpublic String getRegion() {\r\n    \t\treturn region;\r\n    \t}\r\n    \r\n    \tpublic void setRegion(String region) {\r\n    \t\tthis.region = region;\r\n    \t}\r\n    \r\n    \tpublic int getZipcode() {\r\n    \t\treturn zipcode;\r\n    \t}\r\n    \r\n    \tpublic void setZipcode(int zipcode) {\r\n    \t\tthis.zipcode = zipcode;\r\n    \t}\r\n    \r\n    \tpublic int getStreetNo() {\r\n    \t\treturn streetNo;\r\n    \t}\r\n    \r\n    \tpublic void setStreetNo(int streetNo) {\r\n    \t\tthis.streetNo = streetNo;\r\n    \t}\r\n    }\r\n\r\n\r\n    public class ResidentInfo {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tScanner in = new Scanner(System.in);\r\n    \t\tVirual rsd = new Virual();\r\n    \r\n    \t\tSystem.out.println(&quot;Enter Name: &quot;);\r\n    \t\trsd.setName(in.nextLine());\r\n    \t\tSystem.out.println(&quot;Enter Street No: &quot;);\r\n    \t\trsd.setStreetNo(in.nextInt());\r\n    \t\tin.nextLine(); //to consume /n character (new line)\r\n    \t\t/*if you don&#39;t put in.nextLine after in.nextInt , in.nextInt method don&#39;t read newline char\r\n    \t\tso you can&#39;t enter value for street name\r\n    \t\t */\r\n    \t\tSystem.out.println(&quot;Enter Street Name: &quot;);\r\n    \t\trsd.setStreetName(in.nextLine());\r\n    \t\tSystem.out.println(&quot;Enter Barangay: &quot;);\r\n    \t\trsd.setBarangay(in.nextLine());\r\n    \t\tSystem.out.println(&quot;Enter City: &quot;);\r\n    \t\trsd.setCity(in.nextLine());\r\n    \t\tSystem.out.println(&quot;Enter Region: &quot;);\r\n    \t\trsd.setRegion(in.nextLine());\r\n    \t\tSystem.out.println(&quot;Enter Zip Code: &quot;);\r\n    \t\trsd.setZipcode(in.nextInt());\r\n    \r\n    \t\tSystem.out.println(rsd.toString());\r\n    \r\n    \t}\r\n    }","title":"java.lang.NoSuchMethodException: Practice.Virual.main [class [Ljava.lang.String;] at java.lang.Class.getMethod(Class.java:2072) a error","body":"<p>There is a several things which you should fix with your code.\nIn general class names start with upper case letters in Java.\nAnd you should use getter and setters for you variables for best practice. Also you can't read streetName with your current code because when you call in.nextInt() method it doesn't consume new line character. And also for best practice you should use camelCase for you variable names.</p>\n<p>Here is a better aproach to your code.</p>\n<pre><code>public class Virual {\n    private String name;\n    private String streetName;\n    private String barangay;\n    private String city;\n    private String region;\n    private int zipcode;\n    private int streetNo;\n\n    public Virual() {\n    }\n\n    @Override\n    public String toString() {\n        return String.format(&quot;Name: %s Street No: %d Street: %s Barangay: %s City : %s Region: %s Zip Code : %d&quot;, name, streetNo, streetName, barangay, city, region, zipcode);\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getStreetName() {\n        return streetName;\n    }\n\n    public void setStreetName(String streetName) {\n        this.streetName = streetName;\n    }\n\n    public String getBarangay() {\n        return barangay;\n    }\n\n    public void setBarangay(String barangay) {\n        this.barangay = barangay;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getRegion() {\n        return region;\n    }\n\n    public void setRegion(String region) {\n        this.region = region;\n    }\n\n    public int getZipcode() {\n        return zipcode;\n    }\n\n    public void setZipcode(int zipcode) {\n        this.zipcode = zipcode;\n    }\n\n    public int getStreetNo() {\n        return streetNo;\n    }\n\n    public void setStreetNo(int streetNo) {\n        this.streetNo = streetNo;\n    }\n}\n\n\npublic class ResidentInfo {\n    public static void main(String[] args) {\n\n        Scanner in = new Scanner(System.in);\n        Virual rsd = new Virual();\n\n        System.out.println(&quot;Enter Name: &quot;);\n        rsd.setName(in.nextLine());\n        System.out.println(&quot;Enter Street No: &quot;);\n        rsd.setStreetNo(in.nextInt());\n        in.nextLine(); //to consume /n character (new line)\n        /*if you don't put in.nextLine after in.nextInt , in.nextInt method don't read newline char\n        so you can't enter value for street name\n         */\n        System.out.println(&quot;Enter Street Name: &quot;);\n        rsd.setStreetName(in.nextLine());\n        System.out.println(&quot;Enter Barangay: &quot;);\n        rsd.setBarangay(in.nextLine());\n        System.out.println(&quot;Enter City: &quot;);\n        rsd.setCity(in.nextLine());\n        System.out.println(&quot;Enter Region: &quot;);\n        rsd.setRegion(in.nextLine());\n        System.out.println(&quot;Enter Zip Code: &quot;);\n        rsd.setZipcode(in.nextInt());\n\n        System.out.println(rsd.toString());\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23028371,"reputation":7,"user_id":17148231,"display_name":"Alain Lado"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1634201127,"creation_date":1634195754,"question_id":69566494,"body_markdown":"What&#39;s wrong with my code? I&#39;m new to coding so i may got something wrog here even though my code runs.. there&#39;s seem to be nothing run with my code though. the error that was showing was paste at the bottom of this post.\r\n\r\n\r\n    String name, streetname, barangay, city, region;\r\n    int zipcode, streetno;\r\n\r\n       void display() {\r\n         System.out.println(&quot;Name: &quot; + this.name);\r\n         System.out.println(&quot;Street No: &quot; + this.streetno);\r\n         System.out.println(&quot;Street: &quot; + this.streetname);\r\n         System.out.println(&quot;Barangay: &quot; + this.barangay);\r\n         System.out.println(&quot;City : &quot; + this.city);\r\n         System.out.println(&quot;Region: &quot; + this.region);\r\n         System.out.println(&quot;Zip Code : &quot; + this.zipcode);\r\n         \r\n       }\r\n    }\r\n\r\n    class residentinfo {\r\n\r\n      public static void main(String[] args) {\r\n      \r\n      Scanner in = new Scanner(System.in);\r\n      Virual rsd = new Virual();\r\n      \r\n      System.out.println(&quot;Enter Name: &quot;);\r\n      rsd.name = in.nextLine();\r\n      System.out.println(&quot;Enter Street No: &quot;);\r\n      rsd.streetno = in.nextInt();\r\n      System.out.println(&quot;Enter Street Name: &quot;);\r\n      rsd.streetname = in.nextLine();\r\n      System.out.println(&quot;Enter Barangay: &quot;);\r\n      rsd.barangay = in.nextLine();\r\n      System.out.println(&quot;Enter City: &quot;);\r\n      rsd.city = in.nextLine();\r\n      System.out.println(&quot;Enter Region: &quot;);\r\n      rsd.region = in.nextLine();\r\n      System.out.println(&quot;Enter Zip Code: &quot;);\r\n      rsd.zipcode = in.nextInt();\r\n      \r\n      rsd.display();\r\n\r\n      }\r\n    }\r\n\r\n\r\nWhat&#39;s wrong with my code? When i run it this error showed up. there&#39;s seem to be nothing run with my code, and it runs already.\r\n\r\n    java.lang.NoSuchMethodException: Practice.Virual.main [class [Ljava.lang.String;] at java.lang.Class.getMethod(Class.java:2072)\r\n    at java.lang.Class.getDeclaredMethod(Class.java:2050)\r\n    at com.duy.android.compiler.java.Java.run(Java.java:105)\r\n    at com.duy.ide.javaide.run.activities.ExecuteActivity.executeDex(ExecuteActivity.java:147)\r\n    at com.duy.ide.javaide.run.activities.ExecuteActivity.exec(ExecuteActivity.java:124)\r\n    at com.duy.ide.javaide.run.activities.ExecuteActivity.access$100(ExecuteActivity.java:45)\r\n    at com.duy.ide.javaide.run.activities.ExecuteActivity$1.run(ExecuteActivity.java:88)\r\n    at java.lang.Thread.run(Thread.java:923\r\n\r\n\r\n","title":"java.lang.NoSuchMethodException: Practice.Virual.main [class [Ljava.lang.String;] at java.lang.Class.getMethod(Class.java:2072) a error","body":"<p>What's wrong with my code? I'm new to coding so i may got something wrog here even though my code runs.. there's seem to be nothing run with my code though. the error that was showing was paste at the bottom of this post.</p>\n<pre><code>String name, streetname, barangay, city, region;\nint zipcode, streetno;\n\n   void display() {\n     System.out.println(&quot;Name: &quot; + this.name);\n     System.out.println(&quot;Street No: &quot; + this.streetno);\n     System.out.println(&quot;Street: &quot; + this.streetname);\n     System.out.println(&quot;Barangay: &quot; + this.barangay);\n     System.out.println(&quot;City : &quot; + this.city);\n     System.out.println(&quot;Region: &quot; + this.region);\n     System.out.println(&quot;Zip Code : &quot; + this.zipcode);\n     \n   }\n}\n\nclass residentinfo {\n\n  public static void main(String[] args) {\n  \n  Scanner in = new Scanner(System.in);\n  Virual rsd = new Virual();\n  \n  System.out.println(&quot;Enter Name: &quot;);\n  rsd.name = in.nextLine();\n  System.out.println(&quot;Enter Street No: &quot;);\n  rsd.streetno = in.nextInt();\n  System.out.println(&quot;Enter Street Name: &quot;);\n  rsd.streetname = in.nextLine();\n  System.out.println(&quot;Enter Barangay: &quot;);\n  rsd.barangay = in.nextLine();\n  System.out.println(&quot;Enter City: &quot;);\n  rsd.city = in.nextLine();\n  System.out.println(&quot;Enter Region: &quot;);\n  rsd.region = in.nextLine();\n  System.out.println(&quot;Enter Zip Code: &quot;);\n  rsd.zipcode = in.nextInt();\n  \n  rsd.display();\n\n  }\n}\n</code></pre>\n<p>What's wrong with my code? When i run it this error showed up. there's seem to be nothing run with my code, and it runs already.</p>\n<pre><code>java.lang.NoSuchMethodException: Practice.Virual.main [class [Ljava.lang.String;] at java.lang.Class.getMethod(Class.java:2072)\nat java.lang.Class.getDeclaredMethod(Class.java:2050)\nat com.duy.android.compiler.java.Java.run(Java.java:105)\nat com.duy.ide.javaide.run.activities.ExecuteActivity.executeDex(ExecuteActivity.java:147)\nat com.duy.ide.javaide.run.activities.ExecuteActivity.exec(ExecuteActivity.java:124)\nat com.duy.ide.javaide.run.activities.ExecuteActivity.access$100(ExecuteActivity.java:45)\nat com.duy.ide.javaide.run.activities.ExecuteActivity$1.run(ExecuteActivity.java:88)\nat java.lang.Thread.run(Thread.java:923\n</code></pre>\n"},{"tags":["java","xml","dom"],"comments":[{"owner":{"account_id":5733087,"reputation":6013,"user_id":4528039,"display_name":"T.Gounelle"},"score":0,"creation_date":1425408327,"post_id":28837786,"comment_id":45948223,"body_markdown":"Do you have a sample of your xml?","body":"Do you have a sample of your xml?"}],"answers":[{"tags":[],"owner":{"account_id":5733087,"reputation":6013,"user_id":4528039,"display_name":"T.Gounelle"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1425414894,"creation_date":1425414455,"answer_id":28841297,"question_id":28837786,"body_markdown":"In order to modify some element or attribute values in the XML file, while still being respectful of XML structure, you will need to use a XML parser. It&#39;s a bit more involved than just `String$replace()`... \r\n\r\nGiven an example XML like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans&gt; \r\n        &lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;\r\n            &lt;!-- setter injection using --&gt;\r\n            &lt;property name=&quot;beanTwo&quot; ref=&quot;anotherBean&quot;/&gt;\r\n            &lt;property name=&quot;integerProperty&quot; value=&quot;!Here:Integer:Foo&quot;/&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean id=&quot;anotherBean&quot; class=&quot;examples.AnotherBean&quot;&gt;\r\n            &lt;property name=&quot;stringProperty&quot; value=&quot;!Here:String:Bar&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nIn order to change the 2 markers `!Here`, you need\r\n\r\n 1. to load the file into a dom `Document`,\r\n 2. select with xpath the wanted nodes. Here I search for all nodes in the document with an attribute `value` that contains the string `!Here`. The xpath expression is `//*[contains(@value, &#39;!Here&#39;)]`.\r\n 3. do the transformation you want on each selected nodes. Here I just change `!Here` by `What?`.\r\n\r\n 4. save the modified dom `Document` into a new file.\r\n\r\n----------\r\n\r\n    static String inputFile = &quot;./beans.xml&quot;;\r\n    static String outputFile = &quot;./beans_new.xml&quot;;\r\n    \r\n    // 1- Build the doc from the XML file\r\n    Document doc = DocumentBuilderFactory.newInstance()\r\n    \t\t\t.newDocumentBuilder().parse(new InputSource(inputFile));\r\n    \r\n    // 2- Locate the node(s) with xpath\r\n    XPath xpath = XPathFactory.newInstance().newXPath();\r\n    NodeList nodes = (NodeList)xpath.evaluate(&quot;//*[contains(@value, &#39;!Here&#39;)]&quot;,\r\n                                              doc, XPathConstants.NODESET);\r\n    \t\r\n    // 3- Make the change on the selected nodes\r\n    for (int idx = 0; idx &lt; nodes.getLength(); idx++) {\r\n    \tNode value = nodes.item(idx).getAttributes().getNamedItem(&quot;value&quot;);\r\n    \tString val = value.getNodeValue();\r\n    \tvalue.setNodeValue(val.replaceAll(&quot;!Here&quot;, &quot;What?&quot;));\r\n    }\r\n    \r\n    // 4- Save the result to a new XML doc\r\n    Transformer xformer = TransformerFactory.newInstance().newTransformer();\r\n    xformer.transform(new DOMSource(doc), new StreamResult(new File(outputFile)));\r\n\r\nThe resulting XML file is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;beans&gt; \r\n        &lt;bean class=&quot;examples.ExampleBean&quot; id=&quot;exampleBean&quot;&gt;\r\n            &lt;!-- setter injection using --&gt;\r\n            &lt;property name=&quot;beanTwo&quot; ref=&quot;anotherBean&quot;/&gt;\r\n            &lt;property name=&quot;integerProperty&quot; value=&quot;What?:Integer:Foo&quot;/&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean class=&quot;examples.AnotherBean&quot; id=&quot;anotherBean&quot;&gt;\r\n            &lt;property name=&quot;stringProperty&quot; value=&quot;What?:String:Bar&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n","title":"How to find and replace an attribute value in a XML","body":"<p>In order to modify some element or attribute values in the XML file, while still being respectful of XML structure, you will need to use a XML parser. It's a bit more involved than just <code>String$replace()</code>... </p>\n\n<p>Given an example XML like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans&gt; \n    &lt;bean id=\"exampleBean\" class=\"examples.ExampleBean\"&gt;\n        &lt;!-- setter injection using --&gt;\n        &lt;property name=\"beanTwo\" ref=\"anotherBean\"/&gt;\n        &lt;property name=\"integerProperty\" value=\"!Here:Integer:Foo\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"anotherBean\" class=\"examples.AnotherBean\"&gt;\n        &lt;property name=\"stringProperty\" value=\"!Here:String:Bar\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>In order to change the 2 markers <code>!Here</code>, you need</p>\n\n<ol>\n<li>to load the file into a dom <code>Document</code>,</li>\n<li>select with xpath the wanted nodes. Here I search for all nodes in the document with an attribute <code>value</code> that contains the string <code>!Here</code>. The xpath expression is <code>//*[contains(@value, '!Here')]</code>.</li>\n<li><p>do the transformation you want on each selected nodes. Here I just change <code>!Here</code> by <code>What?</code>.</p></li>\n<li><p>save the modified dom <code>Document</code> into a new file.</p></li>\n</ol>\n\n<hr>\n\n<pre><code>static String inputFile = \"./beans.xml\";\nstatic String outputFile = \"./beans_new.xml\";\n\n// 1- Build the doc from the XML file\nDocument doc = DocumentBuilderFactory.newInstance()\n            .newDocumentBuilder().parse(new InputSource(inputFile));\n\n// 2- Locate the node(s) with xpath\nXPath xpath = XPathFactory.newInstance().newXPath();\nNodeList nodes = (NodeList)xpath.evaluate(\"//*[contains(@value, '!Here')]\",\n                                          doc, XPathConstants.NODESET);\n\n// 3- Make the change on the selected nodes\nfor (int idx = 0; idx &lt; nodes.getLength(); idx++) {\n    Node value = nodes.item(idx).getAttributes().getNamedItem(\"value\");\n    String val = value.getNodeValue();\n    value.setNodeValue(val.replaceAll(\"!Here\", \"What?\"));\n}\n\n// 4- Save the result to a new XML doc\nTransformer xformer = TransformerFactory.newInstance().newTransformer();\nxformer.transform(new DOMSource(doc), new StreamResult(new File(outputFile)));\n</code></pre>\n\n<p>The resulting XML file is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;beans&gt; \n    &lt;bean class=\"examples.ExampleBean\" id=\"exampleBean\"&gt;\n        &lt;!-- setter injection using --&gt;\n        &lt;property name=\"beanTwo\" ref=\"anotherBean\"/&gt;\n        &lt;property name=\"integerProperty\" value=\"What?:Integer:Foo\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean class=\"examples.AnotherBean\" id=\"anotherBean\"&gt;\n        &lt;property name=\"stringProperty\" value=\"What?:String:Bar\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6193930,"reputation":2587,"user_id":4825845,"display_name":"Juan Moreno"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1564168985,"creation_date":1563800070,"answer_id":57146515,"question_id":28837786,"body_markdown":"We have some alternatives to this in Java. \r\n\r\n - First, **JAXP** (it has been bundled with Java since version 1.4).\r\n\r\nLet&#39;s assume we need to change the attribute `customer` to `false` in this XML:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;notification id=&quot;5&quot;&gt;\r\n       &lt;to customer=&quot;true&quot;&gt;john@email.com&lt;/to&gt;\r\n       &lt;from&gt;mary@email.com&lt;/from&gt;\r\n    &lt;/notification&gt;\r\n\r\nWith JAXP (this implementation is based in @t-gounelle sample) we could do this:\r\n\r\n    //Load the document\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    factory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n    Document input = factory.newDocumentBuilder().parse(resourcePath);\r\n    //Select the node(s) with XPath\r\n    XPath xpath = XPathFactory.newInstance().newXPath();\r\n    NodeList nodes = (NodeList) xpath.evaluate(String.format(&quot;//*[contains(@%s, &#39;%s&#39;)]&quot;, attribute, oldValue), input, XPathConstants.NODESET);\r\n    // Updated the selected nodes (here, we use the Stream API, but we can use a for loop too)\r\n    IntStream\r\n        .range(0, nodes.getLength())\r\n        .mapToObj(i -&gt; (Element) nodes.item(i))\r\n        .forEach(value -&gt; value.setAttribute(attribute, newValue));\r\n    // Get the result as a String\r\n    TransformerFactory factory = TransformerFactory.newInstance();\r\n    factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    Transformer xformer = factory.newTransformer();\r\n    xformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n    Writer output = new StringWriter();\r\n    xformer.transform(new DOMSource(input), new StreamResult(output));\r\n    String result = output.toString();\r\n\r\n**Note that in order to disable external entity processing ([XXE][1]) for the `DocumentBuilderFactory` class, we configure the `XMLConstants.FEATURE_SECURE_PROCESSING` feature**. It’s a good practice to configure it when we parse untrusted XML files. Check this [OWASP guide][2] with additional information.\r\n\r\n - Another alternative is **[dom4j][3]**. It&#39;s an open-source framework for processing XML which is integrated with XPath and fully supports DOM, SAX, JAXP and the Java platform such as Java Collections. \r\n\r\nWe need to add the following dependencies to our pom.xml to use it:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.dom4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;jaxen&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxen&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe implementation is very similar to JAXP equivalent:\r\n\r\n    // Load the document\r\n    SAXReader xmlReader = new SAXReader();\r\n    Document input = xmlReader.read(resourcePath);\r\n    // Features to prevent XXE\r\n    xmlReader.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n    xmlReader.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\n    xmlReader.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);\r\n    // Select the nodes\r\n    String expr = String.format(&quot;//*[contains(@%s, &#39;%s&#39;)]&quot;, attribute, oldValue);\r\n    XPath xpath = DocumentHelper.createXPath(expr);\r\n    List&lt;Node&gt; nodes = xpath.selectNodes(input);\r\n    // Updated the selected nodes\r\n    IntStream\r\n        .range(0, nodes.getLength())\r\n        .mapToObj(i -&gt; (Element) nodes.get(i);)\r\n        .forEach(value -&gt; value.addAttribute(attribute, newValue));\r\n    // We can get the representation as String in the same way as the previous JAXP snippet.\r\n\r\nNote that with this method despite the name, if an attribute already exists for the given name it will be replaced otherwise it will add it. We can found the javadoc [here][4].\r\n\r\n - Another nice alternative is **[jOOX][5]**, this library inspires its API in [jQuery][6].\r\n\r\nWe need to add the following dependencies to our pom.xml to use jOOX.\r\n\r\nFor use with Java 9+:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;joox&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFor use with Java 6+:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;joox-java-6&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWe can implement our attribute changer like this:\r\n\r\n    // Load the document\r\n    DocumentBuilder builder = JOOX.builder();\r\n    Document input = builder.parse(resourcePath);\r\n    Match $ = $(input);\r\n    // Select the nodes\r\n    $\r\n        .find(&quot;to&quot;) // We can use and XPATH expresion too.\r\n        .get() \r\n        .stream()\r\n        .forEach(e -&gt; e.setAttribute(attribute, newValue));\r\n    // Get the String reprentation\r\n    $.toString();\r\n\r\nAs we can see in this sample, the syntaxis is less verbose than JAXP and dom4j samples.\r\n\r\nI compared the 3 implementations with JMH and I got the following results:\r\n\r\n    | Benchmark                          Mode  Cnt  Score   Error  Units |\r\n    |--------------------------------------------------------------------|\r\n    | AttributeBenchMark.dom4jBenchmark  avgt    5  0.167 &#177; 0.050  ms/op |\r\n    | AttributeBenchMark.jaxpBenchmark   avgt    5  0.185 &#177; 0.047  ms/op |\r\n    | AttributeBenchMark.jooxBenchmark   avgt    5  0.307 &#177; 0.110  ms/op |\r\n\r\nI put the examples [here][7] if you need to take a look.\r\n\r\n\r\n  [1]: https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Processing\r\n  [2]: https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html#general-guidance\r\n  [3]: https://dom4j.github.io/\r\n  [4]: https://dom4j.github.io/javadoc/2.1.1/org/dom4j/Element.html#addAttribute-java.lang.String-java.lang.String-\r\n  [5]: https://github.com/jOOQ/jOOX\r\n  [6]: https://jquery.com/\r\n  [7]: https://github.com/earth001/jaxp-example","title":"How to find and replace an attribute value in a XML","body":"<p>We have some alternatives to this in Java. </p>\n\n<ul>\n<li>First, <strong>JAXP</strong> (it has been bundled with Java since version 1.4).</li>\n</ul>\n\n<p>Let's assume we need to change the attribute <code>customer</code> to <code>false</code> in this XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;notification id=\"5\"&gt;\n   &lt;to customer=\"true\"&gt;john@email.com&lt;/to&gt;\n   &lt;from&gt;mary@email.com&lt;/from&gt;\n&lt;/notification&gt;\n</code></pre>\n\n<p>With JAXP (this implementation is based in @t-gounelle sample) we could do this:</p>\n\n<pre><code>//Load the document\nDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nfactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nfactory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\nDocument input = factory.newDocumentBuilder().parse(resourcePath);\n//Select the node(s) with XPath\nXPath xpath = XPathFactory.newInstance().newXPath();\nNodeList nodes = (NodeList) xpath.evaluate(String.format(\"//*[contains(@%s, '%s')]\", attribute, oldValue), input, XPathConstants.NODESET);\n// Updated the selected nodes (here, we use the Stream API, but we can use a for loop too)\nIntStream\n    .range(0, nodes.getLength())\n    .mapToObj(i -&gt; (Element) nodes.item(i))\n    .forEach(value -&gt; value.setAttribute(attribute, newValue));\n// Get the result as a String\nTransformerFactory factory = TransformerFactory.newInstance();\nfactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nTransformer xformer = factory.newTransformer();\nxformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\nWriter output = new StringWriter();\nxformer.transform(new DOMSource(input), new StreamResult(output));\nString result = output.toString();\n</code></pre>\n\n<p><strong>Note that in order to disable external entity processing (<a href=\"https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Processing\" rel=\"nofollow noreferrer\">XXE</a>) for the <code>DocumentBuilderFactory</code> class, we configure the <code>XMLConstants.FEATURE_SECURE_PROCESSING</code> feature</strong>. It’s a good practice to configure it when we parse untrusted XML files. Check this <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html#general-guidance\" rel=\"nofollow noreferrer\">OWASP guide</a> with additional information.</p>\n\n<ul>\n<li>Another alternative is <strong><a href=\"https://dom4j.github.io/\" rel=\"nofollow noreferrer\">dom4j</a></strong>. It's an open-source framework for processing XML which is integrated with XPath and fully supports DOM, SAX, JAXP and the Java platform such as Java Collections. </li>\n</ul>\n\n<p>We need to add the following dependencies to our pom.xml to use it:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.dom4j&lt;/groupId&gt;\n    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;jaxen&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxen&lt;/artifactId&gt;\n    &lt;version&gt;1.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>The implementation is very similar to JAXP equivalent:</p>\n\n<pre><code>// Load the document\nSAXReader xmlReader = new SAXReader();\nDocument input = xmlReader.read(resourcePath);\n// Features to prevent XXE\nxmlReader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\nxmlReader.setFeature(\"http://xml.org/sax/features/external-general-entities\", false);\nxmlReader.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false);\n// Select the nodes\nString expr = String.format(\"//*[contains(@%s, '%s')]\", attribute, oldValue);\nXPath xpath = DocumentHelper.createXPath(expr);\nList&lt;Node&gt; nodes = xpath.selectNodes(input);\n// Updated the selected nodes\nIntStream\n    .range(0, nodes.getLength())\n    .mapToObj(i -&gt; (Element) nodes.get(i);)\n    .forEach(value -&gt; value.addAttribute(attribute, newValue));\n// We can get the representation as String in the same way as the previous JAXP snippet.\n</code></pre>\n\n<p>Note that with this method despite the name, if an attribute already exists for the given name it will be replaced otherwise it will add it. We can found the javadoc <a href=\"https://dom4j.github.io/javadoc/2.1.1/org/dom4j/Element.html#addAttribute-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<ul>\n<li>Another nice alternative is <strong><a href=\"https://github.com/jOOQ/jOOX\" rel=\"nofollow noreferrer\">jOOX</a></strong>, this library inspires its API in <a href=\"https://jquery.com/\" rel=\"nofollow noreferrer\">jQuery</a>.</li>\n</ul>\n\n<p>We need to add the following dependencies to our pom.xml to use jOOX.</p>\n\n<p>For use with Java 9+:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n    &lt;artifactId&gt;joox&lt;/artifactId&gt;\n    &lt;version&gt;1.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>For use with Java 6+:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n    &lt;artifactId&gt;joox-java-6&lt;/artifactId&gt;\n    &lt;version&gt;1.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>We can implement our attribute changer like this:</p>\n\n<pre><code>// Load the document\nDocumentBuilder builder = JOOX.builder();\nDocument input = builder.parse(resourcePath);\nMatch $ = $(input);\n// Select the nodes\n$\n    .find(\"to\") // We can use and XPATH expresion too.\n    .get() \n    .stream()\n    .forEach(e -&gt; e.setAttribute(attribute, newValue));\n// Get the String reprentation\n$.toString();\n</code></pre>\n\n<p>As we can see in this sample, the syntaxis is less verbose than JAXP and dom4j samples.</p>\n\n<p>I compared the 3 implementations with JMH and I got the following results:</p>\n\n<pre><code>| Benchmark                          Mode  Cnt  Score   Error  Units |\n|--------------------------------------------------------------------|\n| AttributeBenchMark.dom4jBenchmark  avgt    5  0.167 ± 0.050  ms/op |\n| AttributeBenchMark.jaxpBenchmark   avgt    5  0.185 ± 0.047  ms/op |\n| AttributeBenchMark.jooxBenchmark   avgt    5  0.307 ± 0.110  ms/op |\n</code></pre>\n\n<p>I put the examples <a href=\"https://github.com/earth001/jaxp-example\" rel=\"nofollow noreferrer\">here</a> if you need to take a look.</p>\n"},{"tags":[],"owner":{"account_id":14157526,"reputation":1,"user_id":10227723,"display_name":"Georgii Zykov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565843621,"creation_date":1565815909,"answer_id":57501884,"question_id":28837786,"body_markdown":"Gounelle&#39;s answer is correct, however, it is based on fact that you know attribute name in advance.\r\n\r\nIf you want to find all attributes based only on their value, use this expression for xpath:\r\n\r\n    NodeList attributes = (NodeList) xpath.evaluate(\r\n        &quot;//*/@*[contains(. , &#39;!Here&#39;)]&quot;,\r\n         doc, \r\n        XPathConstants.NODESET\r\n    )\r\n\r\n\r\nHere, you select all attributes by setting `//*/@*`. Then you can set a condition like I mentioned above. \r\n\r\nBy the way, if you search for a single attribute, you can use `Attr` instead of `Node`\r\n\r\n    Attr attribute = (Attr) xpath.evaluate(\r\n        &quot;//*/@*[contains(. , &#39;!Here&#39;)]&quot;,\r\n         doc, \r\n        XPathConstants.NODE\r\n    )\r\n    \r\n    attribute.setValue(&quot;What!&quot;);\r\n\r\n\r\nIf you want to find attributes by particular value, use\r\n\r\n    &quot;//*/@*[ . = &#39;!Here:String:HashKey&#39; ]&quot;\r\n\r\nIf you search for attribute using number comparison, for instance, if you had\r\n\r\n    &lt;bean value=&quot;999&quot;&gt;&lt;/bean&gt;\r\n    &lt;bean value=&quot;1337&quot;&gt;&lt;/bean&gt;\r\n\r\nthen you could select second bean by setting expression to\r\n\r\n    &quot;//*/@*[ . &gt; 1000]&quot;","title":"How to find and replace an attribute value in a XML","body":"<p>Gounelle's answer is correct, however, it is based on fact that you know attribute name in advance.</p>\n\n<p>If you want to find all attributes based only on their value, use this expression for xpath:</p>\n\n<pre><code>NodeList attributes = (NodeList) xpath.evaluate(\n    \"//*/@*[contains(. , '!Here')]\",\n     doc, \n    XPathConstants.NODESET\n)\n</code></pre>\n\n<p>Here, you select all attributes by setting <code>//*/@*</code>. Then you can set a condition like I mentioned above. </p>\n\n<p>By the way, if you search for a single attribute, you can use <code>Attr</code> instead of <code>Node</code></p>\n\n<pre><code>Attr attribute = (Attr) xpath.evaluate(\n    \"//*/@*[contains(. , '!Here')]\",\n     doc, \n    XPathConstants.NODE\n)\n\nattribute.setValue(\"What!\");\n</code></pre>\n\n<p>If you want to find attributes by particular value, use</p>\n\n<pre><code>\"//*/@*[ . = '!Here:String:HashKey' ]\"\n</code></pre>\n\n<p>If you search for attribute using number comparison, for instance, if you had</p>\n\n<pre><code>&lt;bean value=\"999\"&gt;&lt;/bean&gt;\n&lt;bean value=\"1337\"&gt;&lt;/bean&gt;\n</code></pre>\n\n<p>then you could select second bean by setting expression to</p>\n\n<pre><code>\"//*/@*[ . &gt; 1000]\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3119806,"reputation":237,"user_id":2639810,"display_name":"Joel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634201103,"creation_date":1634200242,"answer_id":69567489,"question_id":28837786,"body_markdown":"I recently encountered a similar problem in the current project.\r\nI realize this solution might not solve the original question since it does not take into account the part about\r\n\r\n&gt; The attribute value contains instructions to replace later\r\n\r\nStill, someone might find it useful.\r\nWe already used [StringSubstitutor.java][1] from apache commons for replacing values in JSON files.\r\n\r\nTurns out it worked just as well with XML text in our case.\r\nIt does operate on String&#39;s, which may not be suitable in all cases.\r\n\r\nGiven a simple XML like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;Foo&gt;\r\n\t\t&lt;Bar&gt;${replaceThis:-defaultValueHere}&lt;/Bar&gt;\r\n        &lt;bean value=&quot;${!Here}:Sring:HashKey&quot;&gt;&lt;/bean&gt;\r\n\t&lt;/Foo&gt;\r\n\r\n``StringSubstitutor`` lets you replace the ``${replaceThis:-defaultValueHere}`` with anything.\r\nIn Java 11  simple example might look like this:\r\n\r\n    // Read the file as a string. (Java 11+)\r\n    String xml = Files.readString(path, StandardCharsets.US_ASCII);\r\n\r\n    // Specify what to replace \r\n    Map&lt;String, String&gt; replacementMappings = Map.of(\r\n        &quot;replaceThis&quot;, &quot;Something else&quot;,\r\n        &quot;!Here&quot;,&quot;Bean&quot;\r\n    );\r\n\r\n    String xmlWithStringsReplaced = new StringSubstitutor(replacementMappings).replace(testFile);\r\n\r\nThen the ``xmlWithStringsReplaced`` should look like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;Foo&gt;\r\n\t\t&lt;Bar&gt;Something Else&lt;/Bar&gt;\r\n        &lt;bean value=&quot;Bean:Sring:HashKey&quot;&gt;&lt;/bean&gt;\r\n\t&lt;/Foo&gt;\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringSubstitutor.html","title":"How to find and replace an attribute value in a XML","body":"<p>I recently encountered a similar problem in the current project.\nI realize this solution might not solve the original question since it does not take into account the part about</p>\n<blockquote>\n<p>The attribute value contains instructions to replace later</p>\n</blockquote>\n<p>Still, someone might find it useful.\nWe already used <a href=\"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\">StringSubstitutor.java</a> from apache commons for replacing values in JSON files.</p>\n<p>Turns out it worked just as well with XML text in our case.\nIt does operate on String's, which may not be suitable in all cases.</p>\n<p>Given a simple XML like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Foo&gt;\n    &lt;Bar&gt;${replaceThis:-defaultValueHere}&lt;/Bar&gt;\n    &lt;bean value=&quot;${!Here}:Sring:HashKey&quot;&gt;&lt;/bean&gt;\n&lt;/Foo&gt;\n</code></pre>\n<p><code>StringSubstitutor</code> lets you replace the <code>${replaceThis:-defaultValueHere}</code> with anything.\nIn Java 11  simple example might look like this:</p>\n<pre><code>// Read the file as a string. (Java 11+)\nString xml = Files.readString(path, StandardCharsets.US_ASCII);\n\n// Specify what to replace \nMap&lt;String, String&gt; replacementMappings = Map.of(\n    &quot;replaceThis&quot;, &quot;Something else&quot;,\n    &quot;!Here&quot;,&quot;Bean&quot;\n);\n\nString xmlWithStringsReplaced = new StringSubstitutor(replacementMappings).replace(testFile);\n</code></pre>\n<p>Then the <code>xmlWithStringsReplaced</code> should look like:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Foo&gt;\n    &lt;Bar&gt;Something Else&lt;/Bar&gt;\n    &lt;bean value=&quot;Bean:Sring:HashKey&quot;&gt;&lt;/bean&gt;\n&lt;/Foo&gt;\n</code></pre>\n"}],"owner":{"account_id":5878524,"reputation":147,"user_id":4628687,"display_name":"Enzo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69968,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":28841297,"answer_count":4,"score":10,"last_activity_date":1634201103,"creation_date":1425402562,"question_id":28837786,"body_markdown":"I am  building a &quot;XML scanner&quot; in Java that finds attribute values starting with  &quot;!Here:&quot;. The attribute value contains instructions to replace later.\r\nfor example I have this xml file filled with records like\r\n\r\n    &lt;bean value=&quot;!Here:Sring:HashKey&quot;&gt;&lt;/bean&gt;\r\n\r\nHow can I find and replace the attribute values only knowing it starts with `&quot;!Here:&quot;`?","title":"How to find and replace an attribute value in a XML","body":"<p>I am  building a \"XML scanner\" in Java that finds attribute values starting with  \"!Here:\". The attribute value contains instructions to replace later.\nfor example I have this xml file filled with records like</p>\n\n<pre><code>&lt;bean value=\"!Here:Sring:HashKey\"&gt;&lt;/bean&gt;\n</code></pre>\n\n<p>How can I find and replace the attribute values only knowing it starts with <code>\"!Here:\"</code>?</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":232598,"reputation":6666,"user_id":1474421,"accept_rate":79,"display_name":"anotherdave"},"score":0,"creation_date":1634201687,"post_id":69567120,"comment_id":122963534,"body_markdown":"Given that Google HTTP Client [hasn&#39;t released a 2.0 version yet](https://search.maven.org/search?q=a:google-http-client), I presume that this is just an example?","body":"Given that Google HTTP Client <a href=\"https://search.maven.org/search?q=a:google-http-client\" rel=\"nofollow noreferrer\">hasn&#39;t released a 2.0 version yet</a>, I presume that this is just an example?"}],"answers":[{"tags":[],"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634199707,"creation_date":1634199707,"answer_id":69567371,"question_id":69567120,"body_markdown":"I don&#39;t know of a way to do this in vanilla Maven, just by specifying a version pattern.\r\n\r\nTo achieve this, you could use the [versions maven plugin](https://www.mojohaus.org/versions-maven-plugin/use-next-releases-mojo.html). It allows you to provide a list of dependencies that should always use the latest version.\r\n\r\nYour use case is more or less [described in the documentation](https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html).\r\n\r\nAlternatively, you could consider using a higher-level tool like [dependabot](https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/about-dependabot-version-updates). This would have the benefit of making this part of your CI process, rather than just a step in the application build, and orchestrate this behaviour across other technologies you might be using in your project.","title":"Select latest version from version range in Maven","body":"<p>I don't know of a way to do this in vanilla Maven, just by specifying a version pattern.</p>\n<p>To achieve this, you could use the <a href=\"https://www.mojohaus.org/versions-maven-plugin/use-next-releases-mojo.html\" rel=\"nofollow noreferrer\">versions maven plugin</a>. It allows you to provide a list of dependencies that should always use the latest version.</p>\n<p>Your use case is more or less <a href=\"https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\" rel=\"nofollow noreferrer\">described in the documentation</a>.</p>\n<p>Alternatively, you could consider using a higher-level tool like <a href=\"https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/about-dependabot-version-updates\" rel=\"nofollow noreferrer\">dependabot</a>. This would have the benefit of making this part of your CI process, rather than just a step in the application build, and orchestrate this behaviour across other technologies you might be using in your project.</p>\n"},{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634200655,"creation_date":1634200655,"answer_id":69567571,"question_id":69567120,"body_markdown":"First of all, your range does NOT include the version `2.0` because it is an open range (to include the version `2.0`, you would need to write `[1.19.0,2.0]`).\r\n\r\nSecondly, you can resolve version ranges with the versions maven plugin:\r\n\r\nhttps://www.mojohaus.org/versions-maven-plugin/resolve-ranges-mojo.html","title":"Select latest version from version range in Maven","body":"<p>First of all, your range does NOT include the version <code>2.0</code> because it is an open range (to include the version <code>2.0</code>, you would need to write <code>[1.19.0,2.0]</code>).</p>\n<p>Secondly, you can resolve version ranges with the versions maven plugin:</p>\n<p><a href=\"https://www.mojohaus.org/versions-maven-plugin/resolve-ranges-mojo.html\" rel=\"nofollow noreferrer\">https://www.mojohaus.org/versions-maven-plugin/resolve-ranges-mojo.html</a></p>\n"}],"owner":{"account_id":6995665,"reputation":475,"user_id":5363433,"accept_rate":52,"display_name":"Utkarsh Saraf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":829,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634201053,"creation_date":1634198652,"question_id":69567120,"body_markdown":"I have dependency as follows:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\r\n      &lt;artifactId&gt;google-http-client&lt;/artifactId&gt;\r\n      &lt;version&gt;[1.19.0,2.0)&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIs there any goal in maven which help me always select latest version i.e. 2.0 from above range explicitly and use it.\r\n\r\nI am using maven 3.6.\r\n\r\nHelp appreciated \r\n\r\n","title":"Select latest version from version range in Maven","body":"<p>I have dependency as follows:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\n  &lt;artifactId&gt;google-http-client&lt;/artifactId&gt;\n  &lt;version&gt;[1.19.0,2.0)&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Is there any goal in maven which help me always select latest version i.e. 2.0 from above range explicitly and use it.</p>\n<p>I am using maven 3.6.</p>\n<p>Help appreciated</p>\n"},{"tags":["java","google-sheets-api"],"answers":[{"tags":[],"owner":{"account_id":16071429,"reputation":26112,"user_id":11599789,"display_name":"ziganotschka"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634201012,"creation_date":1601464141,"answer_id":64136295,"question_id":64135720,"body_markdown":"+ The information is confusing, the [Google Auth Library](https://github.com/googleapis/google-auth-library-java) that is [recommended to use](https://github.com/googleapis/google-api-java-client/commit/45825c4157eee2a7254817b1aae9aa63ba726726) since the deprecation includes the `google-auth-library-oauth2` library\r\n+ In other words, you can still use `GoogleCredential`, and it is still the method recommended in the [documentation](https://developers.google.com/identity/protocols/oauth2/service-account#authorizingrequests):\r\n```lang-java\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleCredential;\r\nGoogleCredential credential = GoogleCredential.fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\r\n    .createScoped(Collections.singleton(SCOPES));\r\n```\r\n\r\n+ Alternatively, you can also build your credential from a .p12 file:\r\n```lang-java\r\nGoogleCredential credential = new GoogleCredential.Builder()\r\n    .setTransport(httpTransport)\r\n    .setJsonFactory(JSON_FACTORY)\r\n    .setServiceAccountId(emailAddress)\r\n    .setServiceAccountPrivateKeyFromP12File(new File(&quot;MyProject.p12&quot;))\r\n    .setServiceAccountScopes(Collections.singleton(YOUR SCOPE))\r\n    .build();\r\n```\r\n+ However, if you do want to use `GoogleCredentials` and have problems with the `HttpRequestInitializer` you can use the [HttpCredentialsAdapter](https://github.com/googleapis/google-auth-library-java/blob/master/oauth2_http/java/com/google/auth/http/HttpCredentialsAdapter.java)\r\n","title":"How do you access a Google Sheet with a service account from Java?","body":"<ul>\n<li>The information is confusing, the <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">Google Auth Library</a> that is <a href=\"https://github.com/googleapis/google-api-java-client/commit/45825c4157eee2a7254817b1aae9aa63ba726726\" rel=\"nofollow noreferrer\">recommended to use</a> since the deprecation includes the <code>google-auth-library-oauth2</code> library</li>\n<li>In other words, you can still use <code>GoogleCredential</code>, and it is still the method recommended in the <a href=\"https://developers.google.com/identity/protocols/oauth2/service-account#authorizingrequests\" rel=\"nofollow noreferrer\">documentation</a>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;\nGoogleCredential credential = GoogleCredential.fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\n    .createScoped(Collections.singleton(SCOPES));\n</code></pre>\n<ul>\n<li>Alternatively, you can also build your credential from a .p12 file:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>GoogleCredential credential = new GoogleCredential.Builder()\n    .setTransport(httpTransport)\n    .setJsonFactory(JSON_FACTORY)\n    .setServiceAccountId(emailAddress)\n    .setServiceAccountPrivateKeyFromP12File(new File(&quot;MyProject.p12&quot;))\n    .setServiceAccountScopes(Collections.singleton(YOUR SCOPE))\n    .build();\n</code></pre>\n<ul>\n<li>However, if you do want to use <code>GoogleCredentials</code> and have problems with the <code>HttpRequestInitializer</code> you can use the <a href=\"https://github.com/googleapis/google-auth-library-java/blob/master/oauth2_http/java/com/google/auth/http/HttpCredentialsAdapter.java\" rel=\"nofollow noreferrer\">HttpCredentialsAdapter</a></li>\n</ul>\n"}],"owner":{"account_id":17272,"reputation":4745,"user_id":38483,"accept_rate":87,"display_name":"tonicebrian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1588,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64136295,"answer_count":1,"score":1,"last_activity_date":1634201012,"creation_date":1601461986,"question_id":64135720,"body_markdown":"I&#39;m trying to access a Google Sheet from a service account (the service account has access to the sheet). But I have a problem, all the documentation including the [official docs][1] point to use `GoogleCredential` that is deprecated since 1.7. The deprecation says that you sould use library `google-auth-library` and this is what I&#39;m doing in:\r\n\r\n```scala\r\nval googleCredentials = ServiceAccountCredentials\r\n      .fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\r\n      .createScoped(SCOPES)\r\ngoogleCredentials.refresh()\r\n```\r\nbut the variable is of type `GoogleCredentials` and the function `Sheets.Builder` doesn&#39;t accept this as a valid `HttpRequestInitializer`. So I had to hack my way around using the deprecated class with:\r\n\r\n```scala\r\nval token = googleCredentials.getAccessToken.getTokenValue\r\nval credential = new GoogleCredential().setAccessToken(token)\r\n```\r\n\r\nWith this workaround I&#39;m able to access the Google Sheet but I&#39;m sure that there is a proper way to do it without using deprecated libraries. \r\n\r\nDoes anyone know what&#39;s the proper way to do it?\r\n\r\nLeaving here the full snippet as a reference.\r\n\r\n```scala\r\npackage drivers\r\nimport java.io.FileInputStream\r\nimport java.util.Collections\r\n\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleCredential\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport\r\nimport com.google.api.client.json.jackson2.JacksonFactory\r\nimport com.google.api.services.sheets.v4.{Sheets, SheetsScopes}\r\nimport com.google.auth.oauth2.ServiceAccountCredentials\r\nimport com.typesafe.config.ConfigFactory\r\n\r\nobject TestDriver {\r\n\r\n  def main(args: Array[String]): Unit = {\r\n    val config = ConfigFactory.load()\r\n    val spreadsheetId = config.getString(&quot;spreadsheetId&quot;)\r\n    val CREDENTIALS_FILE_PATH = config.getString(&quot;google_application_credentials&quot;)\r\n\r\n    val SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY)\r\n    val JSON_FACTORY = JacksonFactory.getDefaultInstance\r\n    val APPLICATION_NAME = &quot;my-app&quot;\r\n\r\n    val googleCredentials = ServiceAccountCredentials\r\n      .fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\r\n      .createScoped(SCOPES)\r\n    googleCredentials.refresh()\r\n\r\n    val token = googleCredentials.getAccessToken.getTokenValue\r\n    val credential = new GoogleCredential().setAccessToken(token)\r\n    val httpTransport = GoogleNetHttpTransport.newTrustedTransport\r\n    val service = new Sheets.Builder(httpTransport, JSON_FACTORY, credential)\r\n      .setApplicationName(APPLICATION_NAME)\r\n      .build()\r\n    val range = &quot;Sheet1!A1:D1&quot;\r\n    val response = service.spreadsheets().values().get(spreadsheetId, range).execute()\r\n    val values = response.getValues\r\n    values.forEach(println)\r\n  }\r\n```\r\n\r\n  [1]: https://developers.google.com/identity/protocols/oauth2/service-account","title":"How do you access a Google Sheet with a service account from Java?","body":"<p>I'm trying to access a Google Sheet from a service account (the service account has access to the sheet). But I have a problem, all the documentation including the <a href=\"https://developers.google.com/identity/protocols/oauth2/service-account\" rel=\"nofollow noreferrer\">official docs</a> point to use <code>GoogleCredential</code> that is deprecated since 1.7. The deprecation says that you sould use library <code>google-auth-library</code> and this is what I'm doing in:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val googleCredentials = ServiceAccountCredentials\n      .fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\n      .createScoped(SCOPES)\ngoogleCredentials.refresh()\n</code></pre>\n<p>but the variable is of type <code>GoogleCredentials</code> and the function <code>Sheets.Builder</code> doesn't accept this as a valid <code>HttpRequestInitializer</code>. So I had to hack my way around using the deprecated class with:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val token = googleCredentials.getAccessToken.getTokenValue\nval credential = new GoogleCredential().setAccessToken(token)\n</code></pre>\n<p>With this workaround I'm able to access the Google Sheet but I'm sure that there is a proper way to do it without using deprecated libraries.</p>\n<p>Does anyone know what's the proper way to do it?</p>\n<p>Leaving here the full snippet as a reference.</p>\n<pre class=\"lang-scala prettyprint-override\"><code>package drivers\nimport java.io.FileInputStream\nimport java.util.Collections\n\nimport com.google.api.client.googleapis.auth.oauth2.GoogleCredential\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport\nimport com.google.api.client.json.jackson2.JacksonFactory\nimport com.google.api.services.sheets.v4.{Sheets, SheetsScopes}\nimport com.google.auth.oauth2.ServiceAccountCredentials\nimport com.typesafe.config.ConfigFactory\n\nobject TestDriver {\n\n  def main(args: Array[String]): Unit = {\n    val config = ConfigFactory.load()\n    val spreadsheetId = config.getString(&quot;spreadsheetId&quot;)\n    val CREDENTIALS_FILE_PATH = config.getString(&quot;google_application_credentials&quot;)\n\n    val SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY)\n    val JSON_FACTORY = JacksonFactory.getDefaultInstance\n    val APPLICATION_NAME = &quot;my-app&quot;\n\n    val googleCredentials = ServiceAccountCredentials\n      .fromStream(new FileInputStream(CREDENTIALS_FILE_PATH))\n      .createScoped(SCOPES)\n    googleCredentials.refresh()\n\n    val token = googleCredentials.getAccessToken.getTokenValue\n    val credential = new GoogleCredential().setAccessToken(token)\n    val httpTransport = GoogleNetHttpTransport.newTrustedTransport\n    val service = new Sheets.Builder(httpTransport, JSON_FACTORY, credential)\n      .setApplicationName(APPLICATION_NAME)\n      .build()\n    val range = &quot;Sheet1!A1:D1&quot;\n    val response = service.spreadsheets().values().get(spreadsheetId, range).execute()\n    val values = response.getValues\n    values.forEach(println)\n  }\n</code></pre>\n"},{"tags":["java","google-cloud-platform","google-cloud-storage"],"answers":[{"tags":[],"owner":{"account_id":4328614,"reputation":3204,"user_id":3534690,"display_name":"Gabe Weiss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560524208,"creation_date":1560524208,"answer_id":56600684,"question_id":56594343,"body_markdown":"I haven&#39;t worked with the Java, but is it possible that getNextPage() is returning the next page, but not iterating allBlobs? So allBlobs&#39; position in the storage list isn&#39;t changing? What happens if you add a line after your for loop that does &quot;allBlobs = page&quot;;","title":"Listing Blobs in GCS using java with pagination keep getting the same page of blobs","body":"<p>I haven't worked with the Java, but is it possible that getNextPage() is returning the next page, but not iterating allBlobs? So allBlobs' position in the storage list isn't changing? What happens if you add a line after your for loop that does \"allBlobs = page\";</p>\n"},{"tags":[],"owner":{"account_id":311361,"reputation":65446,"user_id":624900,"accept_rate":88,"display_name":"jterrace"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1560537786,"creation_date":1560537786,"answer_id":56603631,"question_id":56594343,"body_markdown":"Use the `iterateAll` method instead. See example [here](https://github.com/googleapis/google-cloud-java/blob/master/google-cloud-examples/src/main/java/com/google/cloud/examples/storage/snippets/StorageSnippets.java#L283) (copied here for completion):\r\n\r\n```\r\nPage&lt;Blob&gt; blobs =\r\n    storage.list(\r\n        bucketName, BlobListOption.currentDirectory(),\r\n        BlobListOption.prefix(directory));\r\n\r\nfor (Blob blob : blobs.iterateAll()) {\r\n  // do something with the blob\r\n}\r\n```","title":"Listing Blobs in GCS using java with pagination keep getting the same page of blobs","body":"<p>Use the <code>iterateAll</code> method instead. See example <a href=\"https://github.com/googleapis/google-cloud-java/blob/master/google-cloud-examples/src/main/java/com/google/cloud/examples/storage/snippets/StorageSnippets.java#L283\" rel=\"nofollow noreferrer\">here</a> (copied here for completion):</p>\n\n<pre><code>Page&lt;Blob&gt; blobs =\n    storage.list(\n        bucketName, BlobListOption.currentDirectory(),\n        BlobListOption.prefix(directory));\n\nfor (Blob blob : blobs.iterateAll()) {\n  // do something with the blob\n}\n</code></pre>\n"}],"owner":{"account_id":11027646,"reputation":373,"user_id":8099998,"display_name":"Sam Tsai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1851,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56603631,"answer_count":2,"score":3,"last_activity_date":1634200902,"creation_date":1560500969,"question_id":56594343,"body_markdown":"I am trying to list a large amount of gcs blobs using the Java API. Since the number of blobs is large, I tried to use pagination, but I am getting the same page repeatedly. The code looked like this:\r\n```\r\nStorage storage = StorageOptions.newBuilder().setCredentials(credentials).build().getService();\r\n\r\nPage&lt;Blob&gt; allBlobs = storage.list(myBucketName,Storage.BlobListOption.pageSize(5000), Storage.BlobListOption.prefix(&quot;some prefix&quot;);\r\n\r\nwhile (allBlobs.hasNextPage()) {\r\n   Page&lt;Blob&gt; page = allBlobs.getNextPage();\r\n   for (Blob blob : page.getValues()) {\r\n     .... do something....\r\n   }\r\n\r\n}\r\n```\r\n\r\nIt looks like I am getting the same page over and over. I looked at the token by allBlobs.getNextPageToken() and the token looked the same all the time. Did I miss something to move the page forward to the next one? Isn&#39;t `getNextPage` doing it? The `Page` interface has only a few methods defined. Did I overlook something?","title":"Listing Blobs in GCS using java with pagination keep getting the same page of blobs","body":"<p>I am trying to list a large amount of gcs blobs using the Java API. Since the number of blobs is large, I tried to use pagination, but I am getting the same page repeatedly. The code looked like this:</p>\n<pre><code>Storage storage = StorageOptions.newBuilder().setCredentials(credentials).build().getService();\n\nPage&lt;Blob&gt; allBlobs = storage.list(myBucketName,Storage.BlobListOption.pageSize(5000), Storage.BlobListOption.prefix(&quot;some prefix&quot;);\n\nwhile (allBlobs.hasNextPage()) {\n   Page&lt;Blob&gt; page = allBlobs.getNextPage();\n   for (Blob blob : page.getValues()) {\n     .... do something....\n   }\n\n}\n</code></pre>\n<p>It looks like I am getting the same page over and over. I looked at the token by allBlobs.getNextPageToken() and the token looked the same all the time. Did I miss something to move the page forward to the next one? Isn't <code>getNextPage</code> doing it? The <code>Page</code> interface has only a few methods defined. Did I overlook something?</p>\n"},{"tags":["java","maven","aspectj","lombok"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1634200803,"post_id":69221666,"comment_id":122963191,"body_markdown":"Welcome to SO. Please learn how to ask good questions here by always presenting a reproducible code sample, ideally an [MCVE](https://stackoverflow.com/help/mcve) - please do read the article! Please also note that you should ask one clear question and not list several issues without asking anything in particular. I tried to answer your question(s) this time, it was your free shot. Next time, probably someone is going to close a question like this.","body":"Welcome to SO. Please learn how to ask good questions here by always presenting a reproducible code sample, ideally an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> - please do read the article! Please also note that you should ask one clear question and not list several issues without asking anything in particular. I tried to answer your question(s) this time, it was your free shot. Next time, probably someone is going to close a question like this."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1635423092,"post_id":69221666,"comment_id":123297458,"body_markdown":"Feedback, please. Don&#39;t just ask questions but then not react to answers or comment, which is not very polite. Thank you.","body":"Feedback, please. Don&#39;t just ask questions but then not react to answers or comment, which is not very polite. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634200650,"creation_date":1634200650,"answer_id":69567568,"question_id":69221666,"body_markdown":"* Version 1.14.0 of the MojoHaus AspectJ Maven Plugin supports Java 16.\r\n* Version 1.13.1 of the [AspectJ.dev AspectJ Maven Plugin](https://github.com/dev-aspectj/aspectj-maven-plugin) has additional features, supports Java 16 and 17 and can be configured to support future Java and AspectJ versions greater than 17 too.\r\n* Both plugins already have a dependency on the AspectJ compiler contained in `aspectjtools`, which you can up- or downgrade, if you need a specific version.\r\n* You do need to add `aspectjrt` when using compile-time weaving, because running AspectJ-enabled programs needs a small AspectJ runtime.\r\n* IntelliJ IDEA has plugins for &quot;AspectJ&quot; (marketplace, author JetBrains) and &quot;AOP Pointcut Language&quot; (bundled). You can install both in order to get support for the AspectJ syntax and also for AspectJ Maven Plugin (both variants mentioned above).\r\n* When combining Lombok and AspectJ, please be aware of possible problems, because they both fork the Eclipse Java Compiler in different ways. The problems can be solved by either weaving delomboked source code or by first applying Lombok with javac and then adding an additional AspectJ binary weaving build step. See [here](https://stackoverflow.com/a/56999300/1082681) and [here](https://stackoverflow.com/a/26157868/1082681.)","title":"Workflow when connecting to spring AspectJ project","body":"<ul>\n<li>Version 1.14.0 of the MojoHaus AspectJ Maven Plugin supports Java 16.</li>\n<li>Version 1.13.1 of the <a href=\"https://github.com/dev-aspectj/aspectj-maven-plugin\" rel=\"nofollow noreferrer\">AspectJ.dev AspectJ Maven Plugin</a> has additional features, supports Java 16 and 17 and can be configured to support future Java and AspectJ versions greater than 17 too.</li>\n<li>Both plugins already have a dependency on the AspectJ compiler contained in <code>aspectjtools</code>, which you can up- or downgrade, if you need a specific version.</li>\n<li>You do need to add <code>aspectjrt</code> when using compile-time weaving, because running AspectJ-enabled programs needs a small AspectJ runtime.</li>\n<li>IntelliJ IDEA has plugins for &quot;AspectJ&quot; (marketplace, author JetBrains) and &quot;AOP Pointcut Language&quot; (bundled). You can install both in order to get support for the AspectJ syntax and also for AspectJ Maven Plugin (both variants mentioned above).</li>\n<li>When combining Lombok and AspectJ, please be aware of possible problems, because they both fork the Eclipse Java Compiler in different ways. The problems can be solved by either weaving delomboked source code or by first applying Lombok with javac and then adding an additional AspectJ binary weaving build step. See <a href=\"https://stackoverflow.com/a/56999300/1082681\">here</a> and <a href=\"https://stackoverflow.com/a/26157868/1082681.\">here</a></li>\n</ul>\n"}],"owner":{"account_id":19853713,"reputation":1,"user_id":14543674,"display_name":"Eduard"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634200650,"creation_date":1631873687,"question_id":69221666,"body_markdown":"colleagues.\r\n\r\nI connect aspects, native ajc compiler. Idea used: Intelleje IDEA\r\n\r\nTechnologies on the project:\r\n\r\n    Maven\r\n    Spring boot\r\n    Lombok\r\n\r\nProblem: Trying to run aspectj for java 16 with integrated stack of the above technologies. + framework for automating the assembly of projects to build in jar with working aspects\r\n\r\nI tried:\r\n\r\n    1. plugin for automated project building &quot;org.codehaus.mojo&quot; works only with Java 1.8, I cannot use later versions. As I understand it, the plugin is outdated.\r\n\r\n    2. Including aspectjrt in project dependencies and assigning aspectjtools and aspectjweawer to the project facet\r\n\r\n    3. Various manipulations with installing the Java version in ide\r\n\r\nResults:\r\n\r\n    1. Works but target is not achieved (java before 8)\r\n    2. Does not work\r\n    3. Does not work\r\nSpent time studying the material: 2-3 weeks, shoveled a bunch of articles and Internet resources. Also read the book casually AspectJ in action\r\n\r\nI am attaching a pom file with a working plugin:\r\n\r\n```&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;groupId&lt;/groupId&gt;\r\n    &lt;artifactId&gt;MyAopWithoutSpring&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;!--    &lt;parent&gt;--&gt;\r\n    &lt;!--        &lt;groupId&gt;com.baeldung&lt;/groupId&gt;--&gt;\r\n    &lt;!--        &lt;artifactId&gt;parent-boot-2&lt;/artifactId&gt;--&gt;\r\n    &lt;!--        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;--&gt;\r\n    &lt;!--        &lt;relativePath&gt;../parent-boot-2&lt;/relativePath&gt;--&gt;\r\n    &lt;!--    &lt;/parent&gt;--&gt;\r\n    &lt;!--    &lt;parent&gt;--&gt;\r\n    &lt;!--        --&gt;\r\n    &lt;!--    &lt;/parent&gt;--&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${aspectj-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;complianceLevel&gt;${java.version}&lt;/complianceLevel&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n                    &lt;verbose&gt;true&lt;/verbose&gt;\r\n                    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;**/pointcutadvice/**&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;10&lt;/source&gt;\r\n                    &lt;target&gt;10&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;aspectj-plugin.version&gt;1.11&lt;/aspectj-plugin.version&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt; ```\r\n\r\nTo be honest, I am already ready to despair, I do not understand the sequence of actions at all in order for it to somehow work on the technology stack that is necessary. I will be glad to any advice and tips from more experienced colleagues","title":"Workflow when connecting to spring AspectJ project","body":"<p>colleagues.</p>\n<p>I connect aspects, native ajc compiler. Idea used: Intelleje IDEA</p>\n<p>Technologies on the project:</p>\n<pre><code>Maven\nSpring boot\nLombok\n</code></pre>\n<p>Problem: Trying to run aspectj for java 16 with integrated stack of the above technologies. + framework for automating the assembly of projects to build in jar with working aspects</p>\n<p>I tried:</p>\n<pre><code>1. plugin for automated project building &quot;org.codehaus.mojo&quot; works only with Java 1.8, I cannot use later versions. As I understand it, the plugin is outdated.\n\n2. Including aspectjrt in project dependencies and assigning aspectjtools and aspectjweawer to the project facet\n\n3. Various manipulations with installing the Java version in ide\n</code></pre>\n<p>Results:</p>\n<pre><code>1. Works but target is not achieved (java before 8)\n2. Does not work\n3. Does not work\n</code></pre>\n<p>Spent time studying the material: 2-3 weeks, shoveled a bunch of articles and Internet resources. Also read the book casually AspectJ in action</p>\n<p>I am attaching a pom file with a working plugin:</p>\n<pre><code>         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;groupId&lt;/groupId&gt;\n    &lt;artifactId&gt;MyAopWithoutSpring&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;!--    &lt;parent&gt;--&gt;\n    &lt;!--        &lt;groupId&gt;com.baeldung&lt;/groupId&gt;--&gt;\n    &lt;!--        &lt;artifactId&gt;parent-boot-2&lt;/artifactId&gt;--&gt;\n    &lt;!--        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;--&gt;\n    &lt;!--        &lt;relativePath&gt;../parent-boot-2&lt;/relativePath&gt;--&gt;\n    &lt;!--    &lt;/parent&gt;--&gt;\n    &lt;!--    &lt;parent&gt;--&gt;\n    &lt;!--        --&gt;\n    &lt;!--    &lt;/parent&gt;--&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${aspectj-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;complianceLevel&gt;${java.version}&lt;/complianceLevel&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n                    &lt;verbose&gt;true&lt;/verbose&gt;\n                    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;**/pointcutadvice/**&lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;10&lt;/source&gt;\n                    &lt;target&gt;10&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;properties&gt;\n        &lt;aspectj-plugin.version&gt;1.11&lt;/aspectj-plugin.version&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt; ```\n\nTo be honest, I am already ready to despair, I do not understand the sequence of actions at all in order for it to somehow work on the technology stack that is necessary. I will be glad to any advice and tips from more experienced colleagues\n</code></pre>\n"},{"tags":["java","servlets","logging","servlet-filters"],"comments":[{"owner":{"account_id":242365,"reputation":6161,"user_id":513828,"accept_rate":96,"display_name":"Dave"},"score":0,"creation_date":1327007983,"post_id":8933054,"comment_id":11179857,"body_markdown":"How are you writing your response?  `response.getWriter().write(yourResponseString)`???  Or are you doing something different?  Are you wanting to write errors as well?  (In other words, do you want to log the response when you&#39;re doing `response.sendError(yourError)`??)","body":"How are you writing your response?  <code>response.getWriter().write(yourResponseString)</code>???  Or are you doing something different?  Are you wanting to write errors as well?  (In other words, do you want to log the response when you&#39;re doing <code>response.sendError(yourError)</code>??)"},{"owner":{"account_id":1161155,"reputation":4421,"user_id":1140620,"display_name":"Sergey Benner"},"score":1,"creation_date":1327008283,"post_id":8933054,"comment_id":11179962,"body_markdown":"perhaps this http://java.sun.com/blueprints/corej2eepatterns/Patterns/InterceptingFilter.html and this http://docstore.mik.ua/orelly/xml/jxslt/ch08_04.htm might give you a hint","body":"perhaps this <a href=\"http://java.sun.com/blueprints/corej2eepatterns/Patterns/InterceptingFilter.html\" rel=\"nofollow noreferrer\">java.sun.com/blueprints/corej2eepatterns/Patterns/&hellip;</a> and this <a href=\"http://docstore.mik.ua/orelly/xml/jxslt/ch08_04.htm\" rel=\"nofollow noreferrer\">docstore.mik.ua/orelly/xml/jxslt/ch08_04.htm</a> might give you a hint"},{"owner":{"account_id":42978,"reputation":5381,"user_id":125429,"accept_rate":67,"display_name":"aloo"},"score":0,"creation_date":1327021100,"post_id":8933054,"comment_id":11183000,"body_markdown":"@Dave just using response.getWriter().write(yourResponseString) as you mentioned and thats the old output I&#39;d like to capture.","body":"@Dave just using response.getWriter().write(yourResponseString) as you mentioned and thats the old output I&#39;d like to capture."},{"owner":{"account_id":1241031,"reputation":1797,"user_id":1203628,"accept_rate":75,"display_name":"pdorgambide"},"score":0,"creation_date":1547571760,"post_id":8933054,"comment_id":95233964,"body_markdown":"Using the TeeOutputStream to write into two outputstreams at time: https://stackoverflow.com/a/28305057/1203628.","body":"Using the TeeOutputStream to write into two outputstreams at time: <a href=\"https://stackoverflow.com/a/28305057/1203628\">stackoverflow.com/a/28305057/1203628</a>."}],"answers":[{"tags":[],"owner":{"account_id":184519,"reputation":22782,"user_id":420613,"accept_rate":87,"display_name":"Muhammad Imran Tariq"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327303153,"creation_date":1327303153,"answer_id":8968290,"question_id":8933054,"body_markdown":"I am not quite familiar with appengine but you need something [Access Log Valve][1] in Tomcat. Its attribute **pattern** ; a formatting layout identifying the various information fields from the request and response to be logged, or the word common or combined to select a standard format.\r\n\r\nIt looks appengine has built in functionality for [log filtering][2].\r\n\r\n[apply a servlet filter][3]\r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Access_Log_Valve\r\n  [2]: http://code.google.com/appengine/articles/logging.html\r\n  [3]: https://stackoverflow.com/questions/2770323/how-do-i-apply-a-servlet-filter-when-serving-an-html-page-directly","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>I am not quite familiar with appengine but you need something <a href=\"http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Access_Log_Valve\" rel=\"nofollow noreferrer\">Access Log Valve</a> in Tomcat. Its attribute <strong>pattern</strong> ; a formatting layout identifying the various information fields from the request and response to be logged, or the word common or combined to select a standard format.</p>\n\n<p>It looks appengine has built in functionality for <a href=\"http://code.google.com/appengine/articles/logging.html\" rel=\"nofollow noreferrer\">log filtering</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2770323/how-do-i-apply-a-servlet-filter-when-serving-an-html-page-directly\">apply a servlet filter</a></p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":128,"is_accepted":true,"score":127,"last_activity_date":1340637763,"creation_date":1327323910,"answer_id":8972088,"question_id":8933054,"body_markdown":"You need to create a [`Filter`][1] wherein you wrap the `ServletResponse` argument with a custom [`HttpServletResponseWrapper`][2] implementation wherein you override the `getOutputStream()` and `getWriter()` to return a custom [`ServletOutputStream`][3] implementation wherein you copy the written byte(s) in the base abstract [`OutputStream#write(int b)`][4] method. Then, you pass the wrapped custom `HttpServletResponseWrapper` to the `FilterChain#doFilter()` call instead and finally you should be able to get the copied response *after* the the call.\r\n\r\nIn other words, the `Filter`:\r\n\r\n    @WebFilter(&quot;/*&quot;)\r\n    public class ResponseLogger implements Filter {\r\n    \r\n        @Override\r\n        public void init(FilterConfig config) throws ServletException {\r\n            // NOOP.\r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {\r\n            if (response.getCharacterEncoding() == null) {\r\n                response.setCharacterEncoding(&quot;UTF-8&quot;); // Or whatever default. UTF-8 is good for World Domination.\r\n            }\r\n    \r\n            HttpServletResponseCopier responseCopier = new HttpServletResponseCopier((HttpServletResponse) response);\r\n    \r\n            try {\r\n                chain.doFilter(request, responseCopier);\r\n                responseCopier.flushBuffer();\r\n            } finally {\r\n                byte[] copy = responseCopier.getCopy();\r\n                System.out.println(new String(copy, response.getCharacterEncoding())); // Do your logging job here. This is just a basic example.\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void destroy() {\r\n            // NOOP.\r\n        }\r\n    \r\n    }\r\n\r\nThe custom `HttpServletResponseWrapper`:\r\n\r\n    public class HttpServletResponseCopier extends HttpServletResponseWrapper {\r\n    \r\n        private ServletOutputStream outputStream;\r\n        private PrintWriter writer;\r\n        private ServletOutputStreamCopier copier;\r\n    \r\n        public HttpServletResponseCopier(HttpServletResponse response) throws IOException {\r\n            super(response);\r\n        }\r\n    \r\n        @Override\r\n        public ServletOutputStream getOutputStream() throws IOException {\r\n            if (writer != null) {\r\n                throw new IllegalStateException(&quot;getWriter() has already been called on this response.&quot;);\r\n            }\r\n    \r\n            if (outputStream == null) {\r\n                outputStream = getResponse().getOutputStream();\r\n                copier = new ServletOutputStreamCopier(outputStream);\r\n            }\r\n    \r\n            return copier;\r\n        }\r\n    \r\n        @Override\r\n        public PrintWriter getWriter() throws IOException {\r\n            if (outputStream != null) {\r\n                throw new IllegalStateException(&quot;getOutputStream() has already been called on this response.&quot;);\r\n            }\r\n    \r\n            if (writer == null) {\r\n                copier = new ServletOutputStreamCopier(getResponse().getOutputStream());\r\n                writer = new PrintWriter(new OutputStreamWriter(copier, getResponse().getCharacterEncoding()), true);\r\n            }\r\n    \r\n            return writer;\r\n        }\r\n    \r\n        @Override\r\n        public void flushBuffer() throws IOException {\r\n            if (writer != null) {\r\n                writer.flush();\r\n            } else if (outputStream != null) {\r\n                copier.flush();\r\n            }\r\n        }\r\n    \r\n        public byte[] getCopy() {\r\n            if (copier != null) {\r\n                return copier.getCopy();\r\n            } else {\r\n                return new byte[0];\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nThe custom `ServletOutputStream`:\r\n\r\n    public class ServletOutputStreamCopier extends ServletOutputStream {\r\n    \r\n        private OutputStream outputStream;\r\n        private ByteArrayOutputStream copy;\r\n    \r\n        public ServletOutputStreamCopier(OutputStream outputStream) {\r\n            this.outputStream = outputStream;\r\n            this.copy = new ByteArrayOutputStream(1024);\r\n        }\r\n    \r\n        @Override\r\n        public void write(int b) throws IOException {\r\n            outputStream.write(b);\r\n            copy.write(b);\r\n        }\r\n    \r\n        public byte[] getCopy() {\r\n            return copy.toByteArray();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/tags/servlet-filters/info\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html\r\n  [3]: http://docs.oracle.com/javaee/6/api/javax/servlet/ServletOutputStream.html\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28int%29\r\n","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>You need to create a <a href=\"https://stackoverflow.com/tags/servlet-filters/info\"><code>Filter</code></a> wherein you wrap the <code>ServletResponse</code> argument with a custom <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html\" rel=\"noreferrer\"><code>HttpServletResponseWrapper</code></a> implementation wherein you override the <code>getOutputStream()</code> and <code>getWriter()</code> to return a custom <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/ServletOutputStream.html\" rel=\"noreferrer\"><code>ServletOutputStream</code></a> implementation wherein you copy the written byte(s) in the base abstract <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28int%29\" rel=\"noreferrer\"><code>OutputStream#write(int b)</code></a> method. Then, you pass the wrapped custom <code>HttpServletResponseWrapper</code> to the <code>FilterChain#doFilter()</code> call instead and finally you should be able to get the copied response <em>after</em> the the call.</p>\n\n<p>In other words, the <code>Filter</code>:</p>\n\n<pre><code>@WebFilter(\"/*\")\npublic class ResponseLogger implements Filter {\n\n    @Override\n    public void init(FilterConfig config) throws ServletException {\n        // NOOP.\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {\n        if (response.getCharacterEncoding() == null) {\n            response.setCharacterEncoding(\"UTF-8\"); // Or whatever default. UTF-8 is good for World Domination.\n        }\n\n        HttpServletResponseCopier responseCopier = new HttpServletResponseCopier((HttpServletResponse) response);\n\n        try {\n            chain.doFilter(request, responseCopier);\n            responseCopier.flushBuffer();\n        } finally {\n            byte[] copy = responseCopier.getCopy();\n            System.out.println(new String(copy, response.getCharacterEncoding())); // Do your logging job here. This is just a basic example.\n        }\n    }\n\n    @Override\n    public void destroy() {\n        // NOOP.\n    }\n\n}\n</code></pre>\n\n<p>The custom <code>HttpServletResponseWrapper</code>:</p>\n\n<pre><code>public class HttpServletResponseCopier extends HttpServletResponseWrapper {\n\n    private ServletOutputStream outputStream;\n    private PrintWriter writer;\n    private ServletOutputStreamCopier copier;\n\n    public HttpServletResponseCopier(HttpServletResponse response) throws IOException {\n        super(response);\n    }\n\n    @Override\n    public ServletOutputStream getOutputStream() throws IOException {\n        if (writer != null) {\n            throw new IllegalStateException(\"getWriter() has already been called on this response.\");\n        }\n\n        if (outputStream == null) {\n            outputStream = getResponse().getOutputStream();\n            copier = new ServletOutputStreamCopier(outputStream);\n        }\n\n        return copier;\n    }\n\n    @Override\n    public PrintWriter getWriter() throws IOException {\n        if (outputStream != null) {\n            throw new IllegalStateException(\"getOutputStream() has already been called on this response.\");\n        }\n\n        if (writer == null) {\n            copier = new ServletOutputStreamCopier(getResponse().getOutputStream());\n            writer = new PrintWriter(new OutputStreamWriter(copier, getResponse().getCharacterEncoding()), true);\n        }\n\n        return writer;\n    }\n\n    @Override\n    public void flushBuffer() throws IOException {\n        if (writer != null) {\n            writer.flush();\n        } else if (outputStream != null) {\n            copier.flush();\n        }\n    }\n\n    public byte[] getCopy() {\n        if (copier != null) {\n            return copier.getCopy();\n        } else {\n            return new byte[0];\n        }\n    }\n\n}\n</code></pre>\n\n<p>The custom <code>ServletOutputStream</code>:</p>\n\n<pre><code>public class ServletOutputStreamCopier extends ServletOutputStream {\n\n    private OutputStream outputStream;\n    private ByteArrayOutputStream copy;\n\n    public ServletOutputStreamCopier(OutputStream outputStream) {\n        this.outputStream = outputStream;\n        this.copy = new ByteArrayOutputStream(1024);\n    }\n\n    @Override\n    public void write(int b) throws IOException {\n        outputStream.write(b);\n        copy.write(b);\n    }\n\n    public byte[] getCopy() {\n        return copy.toByteArray();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1376876,"reputation":1243,"user_id":1310733,"display_name":"Petr &#218;jezdsk&#253;"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1476791225,"creation_date":1476791225,"answer_id":40107407,"question_id":8933054,"body_markdown":"While [BalusC&#39;s answer](https://stackoverflow.com/a/8972088/1310733) will work in most scenarios you have to be careful with the `flush` call - it commits response and no other writing to it is possible, eg. via following filters.\r\nWe have found some problems with very simmilar approach in Websphere environment where the delivered response was only partial.\r\n\r\nAccording to [this question](https://stackoverflow.com/questions/30749730/when-is-servlet-response-committed-or-flushed) the flush should not be called at all and you should let it be called internally.\r\n\r\nI have solved the flush problem by using `TeeWriter` (it splits stream into 2 streams) and using non-buffering streams in the &quot;branched stream&quot; for logging purpose. It is unneccessary to call the `flush` then.\r\n\r\n    private HttpServletResponse wrapResponseForLogging(HttpServletResponse response, final Writer branchedWriter) {\r\n        return new HttpServletResponseWrapper(response) {\r\n            PrintWriter writer;\r\n\r\n            @Override\r\n            public synchronized PrintWriter getWriter() throws IOException {\r\n                if (writer == null) {\r\n                    writer = new PrintWriter(new TeeWriter(super.getWriter(), branchedWriter));\r\n                }\r\n                return writer;\r\n            }\r\n        };\r\n    }\r\n\r\nThen you can use it this way:\r\n\r\n    protected void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException {\r\n        //...\r\n        StringBuilderWriter branchedWriter = new org.apache.commons.io.output.StringBuilderWriter();\r\n        try {\r\n            chain.doFilter(request, wrapResponseForLogging(response, branchedWriter));\r\n        } finally {\r\n            log.trace(&quot;Response: &quot; + branchedWriter);\r\n        }\r\n    }\r\n\r\nThe code is simplified for brewity.","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>While <a href=\"https://stackoverflow.com/a/8972088/1310733\">BalusC's answer</a> will work in most scenarios you have to be careful with the <code>flush</code> call - it commits response and no other writing to it is possible, eg. via following filters.\nWe have found some problems with very simmilar approach in Websphere environment where the delivered response was only partial.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/30749730/when-is-servlet-response-committed-or-flushed\">this question</a> the flush should not be called at all and you should let it be called internally.</p>\n\n<p>I have solved the flush problem by using <code>TeeWriter</code> (it splits stream into 2 streams) and using non-buffering streams in the \"branched stream\" for logging purpose. It is unneccessary to call the <code>flush</code> then.</p>\n\n<pre><code>private HttpServletResponse wrapResponseForLogging(HttpServletResponse response, final Writer branchedWriter) {\n    return new HttpServletResponseWrapper(response) {\n        PrintWriter writer;\n\n        @Override\n        public synchronized PrintWriter getWriter() throws IOException {\n            if (writer == null) {\n                writer = new PrintWriter(new TeeWriter(super.getWriter(), branchedWriter));\n            }\n            return writer;\n        }\n    };\n}\n</code></pre>\n\n<p>Then you can use it this way:</p>\n\n<pre><code>protected void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException {\n    //...\n    StringBuilderWriter branchedWriter = new org.apache.commons.io.output.StringBuilderWriter();\n    try {\n        chain.doFilter(request, wrapResponseForLogging(response, branchedWriter));\n    } finally {\n        log.trace(\"Response: \" + branchedWriter);\n    }\n}\n</code></pre>\n\n<p>The code is simplified for brewity.</p>\n"},{"tags":[],"owner":{"account_id":7867087,"reputation":1216,"user_id":5945599,"display_name":"omilus"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1492161693,"creation_date":1492161693,"answer_id":43408741,"question_id":8933054,"body_markdown":"BalusC solution is ok, but little outdated. Spring now has feature for it . All you need to do is use `[ContentCachingResponseWrapper]`, which has method `public byte[] getContentAsByteArray()` .\r\n\r\nI Suggest to make WrapperFactory which will allow to make it configurable, whether to use default ResponseWrapper or ContentCachingResponseWrapper.\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/ContentCachingResponseWrapper.html#getContentAsByteArray--","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>BalusC solution is ok, but little outdated. Spring now has feature for it . All you need to do is use <code>[ContentCachingResponseWrapper]</code>, which has method <code>public byte[] getContentAsByteArray()</code> .</p>\n\n<p>I Suggest to make WrapperFactory which will allow to make it configurable, whether to use default ResponseWrapper or ContentCachingResponseWrapper.</p>\n"},{"tags":[],"owner":{"account_id":11796127,"reputation":271,"user_id":8630803,"display_name":"Shrinivasan"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1562268975,"creation_date":1562268975,"answer_id":56893497,"question_id":8933054,"body_markdown":"Instead of creating Custom HttpServletResponseWrapper.You can use ContentCachingResponseWrapper as it provide method getContentAsByteArray().\r\n\r\n    public void doFilterInternal(HttpServletRequest servletRequest, HttpServletResponse servletResponse,\r\n    \t\t\tFilterChain filterChain) throws IOException, ServletException {\r\n    \t\t\r\n    \t\tHttpServletRequest request = servletRequest;\r\n    \t\tHttpServletResponse response = servletResponse;\r\n    \t\tContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n    \t\tContentCachingResponseWrapper responseWrapper =new ContentCachingResponseWrapper(response);\r\n    \t\ttry {\r\n    \t\t\tsuper.doFilterInternal(requestWrapper, responseWrapper, filterChain);\r\n    \t\t\t\r\n    \t\t} finally {\r\n\r\n    \t\t\tbyte[] responseArray=responseWrapper.getContentAsByteArray();\r\n    \t\t\tString responseStr=new String(responseArray,responseWrapper.getCharacterEncoding());\r\n    \t\t\tSystem.out.println(&quot;string&quot;+responseStr);\t\t\r\n                /*It is important to copy cached reponse body back to response stream\r\n                to see response */\r\n                responseWrapper.copyBodyToResponse();\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n\r\n\r\n","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>Instead of creating Custom HttpServletResponseWrapper.You can use ContentCachingResponseWrapper as it provide method getContentAsByteArray().</p>\n\n<pre><code>public void doFilterInternal(HttpServletRequest servletRequest, HttpServletResponse servletResponse,\n            FilterChain filterChain) throws IOException, ServletException {\n\n        HttpServletRequest request = servletRequest;\n        HttpServletResponse response = servletResponse;\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper =new ContentCachingResponseWrapper(response);\n        try {\n            super.doFilterInternal(requestWrapper, responseWrapper, filterChain);\n\n        } finally {\n\n            byte[] responseArray=responseWrapper.getContentAsByteArray();\n            String responseStr=new String(responseArray,responseWrapper.getCharacterEncoding());\n            System.out.println(\"string\"+responseStr);       \n            /*It is important to copy cached reponse body back to response stream\n            to see response */\n            responseWrapper.copyBodyToResponse();\n\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20564140,"reputation":1,"user_id":15093963,"display_name":"Ledzepp23"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1634200443,"creation_date":1634198398,"answer_id":69567058,"question_id":8933054,"body_markdown":"If you just want the response payload as as String, I would go for:\r\n\r\n\r\n```java\r\nfinal ReadableHttpServletResponse httpResponse = (ReadableHttpServletResponse) response;\r\nfinal byte[] data = httpResponse.readPayload();\r\nSystem.out.println(new String(data));\r\n```","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>If you just want the response payload as as String, I would go for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final ReadableHttpServletResponse httpResponse = (ReadableHttpServletResponse) response;\nfinal byte[] data = httpResponse.readPayload();\nSystem.out.println(new String(data));\n</code></pre>\n"}],"owner":{"account_id":42978,"reputation":5381,"user_id":125429,"accept_rate":67,"display_name":"aloo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92467,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":8972088,"answer_count":6,"score":60,"last_activity_date":1634200443,"creation_date":1327006074,"question_id":8933054,"body_markdown":"I&#39;ve created a filter to in my java webserver (appengine actually) that logs the parameters of an incoming request. I&#39;d also like to log the resulting response that my webserver writes. Although I have access to the response object, I&#39;m not sure how to get the actual string/content response out of it.\r\n\r\nAny ideas?","title":"How to read and copy the HTTP servlet response output stream content for logging","body":"<p>I've created a filter to in my java webserver (appengine actually) that logs the parameters of an incoming request. I'd also like to log the resulting response that my webserver writes. Although I have access to the response object, I'm not sure how to get the actual string/content response out of it.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","android","barcode","zxing","barcode-printing"],"comments":[{"owner":{"account_id":48238,"reputation":820,"user_id":143222,"display_name":"creuzerm"},"score":0,"creation_date":1446651760,"post_id":9239699,"comment_id":54833257,"body_markdown":"I had to go into the settings in the app and enable PDF417 support.","body":"I had to go into the settings in the app and enable PDF417 support."}],"answers":[{"tags":[],"owner":{"account_id":1034339,"reputation":3721,"user_id":1042031,"accept_rate":65,"display_name":"Suave Nti"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1328960880,"creation_date":1328960880,"answer_id":9239948,"question_id":9239699,"body_markdown":"Have used , It can scan PDF417 format. Make sure you give a try with a Gadget containing Auto Focus camera. Have tried It on Samsung Galaxy Tab it works like a charm.","title":"ZXing on Android PDF417","body":"<p>Have used , It can scan PDF417 format. Make sure you give a try with a Gadget containing Auto Focus camera. Have tried It on Samsung Galaxy Tab it works like a charm.</p>\n"},{"tags":[],"owner":{"account_id":25066,"reputation":66292,"user_id":64174,"accept_rate":100,"display_name":"Sean Owen"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1407427493,"creation_date":1328961287,"answer_id":9239991,"question_id":9239699,"body_markdown":"It really depends on what you expect. Simple PDF417 reads pretty instantly, like... [this](http://labloguera.net/blogs/jalbert/pdf417sd_thumb_26D74651.png) or [this](http://www.officialeancode.com/sample_codes/2D%20PDF417%20code.jpg).\r\n\r\n[This](http://img.tfd.com/cde/_PDF417.GIF) will never be scanned.\r\n\r\n\r\nBorderline is stuff that is small or moderately complex: [example 1](http://mdn.morovia.com/manuals/bax3/images/pdf417-sample1.gif) and [example 2](http://www.carolinabarcode.com/images/ArticleImages/Symbology/PDF417-Barcode.jpg).\r\n\r\n\r\nI can read the first but not the second, even though the first is denser -- size helps.\r\n\r\n - Make sure to enable PDF 417 decoding; it&#39;s off by default\r\n - Quiet zone (white space around the code) is required\r\n - Focus and light help a lot","title":"ZXing on Android PDF417","body":"<p>It really depends on what you expect. Simple PDF417 reads pretty instantly, like... <a href=\"http://labloguera.net/blogs/jalbert/pdf417sd_thumb_26D74651.png\" rel=\"noreferrer\">this</a> or <a href=\"http://www.officialeancode.com/sample_codes/2D%20PDF417%20code.jpg\" rel=\"noreferrer\">this</a>.</p>\n\n<p><a href=\"http://img.tfd.com/cde/_PDF417.GIF\" rel=\"noreferrer\">This</a> will never be scanned.</p>\n\n<p>Borderline is stuff that is small or moderately complex: <a href=\"http://mdn.morovia.com/manuals/bax3/images/pdf417-sample1.gif\" rel=\"noreferrer\">example 1</a> and <a href=\"http://www.carolinabarcode.com/images/ArticleImages/Symbology/PDF417-Barcode.jpg\" rel=\"noreferrer\">example 2</a>.</p>\n\n<p>I can read the first but not the second, even though the first is denser -- size helps.</p>\n\n<ul>\n<li>Make sure to enable PDF 417 decoding; it's off by default</li>\n<li>Quiet zone (white space around the code) is required</li>\n<li>Focus and light help a lot</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2429263,"reputation":9,"user_id":2120557,"display_name":"furkan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1362070677,"creation_date":1362070677,"answer_id":15141277,"question_id":9239699,"body_markdown":"Zxing&#39;s solution did not work for me. I used DataSymbol Decoder (turn on 2d codes, by default they are off) on my samsung charge. In less than a second I captured my drivers license...","title":"ZXing on Android PDF417","body":"<p>Zxing's solution did not work for me. I used DataSymbol Decoder (turn on 2d codes, by default they are off) on my samsung charge. In less than a second I captured my drivers license...</p>\n"},{"tags":[],"owner":{"account_id":355909,"reputation":1616,"user_id":695116,"accept_rate":57,"display_name":"ssasa"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1372670731,"creation_date":1372670731,"answer_id":17401114,"question_id":9239699,"body_markdown":"You can try PDF417.mobi SDK. It should work on low-end phones if equipped with auto-focus camera. It&#39;s a commercial library, but free for developers and non-commercial purposes.\r\n\r\nYou can try the demo [here][1] or play with code directly from [GitHub][2].\r\nOfficial web site is here [http://pdf417.mobi/][3]\r\n\r\nDisclaimer: I&#39;m part of the team working on PDF417.mobi\r\n\r\n\r\n  [1]: https://play.google.com/store/apps/details?id=mobi.pdf417\r\n  [2]: https://github.com/PDF417/android\r\n  [3]: http://pdf417.mobi/","title":"ZXing on Android PDF417","body":"<p>You can try PDF417.mobi SDK. It should work on low-end phones if equipped with auto-focus camera. It's a commercial library, but free for developers and non-commercial purposes.</p>\n\n<p>You can try the demo <a href=\"https://play.google.com/store/apps/details?id=mobi.pdf417\" rel=\"nofollow\">here</a> or play with code directly from <a href=\"https://github.com/PDF417/android\" rel=\"nofollow\">GitHub</a>.\nOfficial web site is here <a href=\"http://pdf417.mobi/\" rel=\"nofollow\">http://pdf417.mobi/</a></p>\n\n<p>Disclaimer: I'm part of the team working on PDF417.mobi</p>\n"},{"tags":[],"owner":{"account_id":3938274,"reputation":111,"user_id":3253827,"display_name":"AM_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634200383,"creation_date":1497964563,"answer_id":44654158,"question_id":9239699,"body_markdown":"Google&#39;s [ML KIT Barcode Scanning](https://developers.google.com/ml-kit/vision/barcode-scanning) which is part of google&#39;s *Mobile Vision* library lists support for PDF-417 Barcodes. \r\n\r\nIt automatically parses QR Codes, Data Matrix, PDF-417, and Aztec values, for the following supported formats:\r\n\r\n- URL\r\n- Contact information (VCARD, etc.)\r\n- Calendar event\r\n- Email\r\n- Phone\r\n- SMS\r\n- ISBN\r\n- WiFi\r\n- Geo-location (latitude and longitude)\r\n- AAMVA driver license/ID\r\n\r\nReview the [Getting Started Page](https://developers.google.com/ml-kit/vision/barcode-scanning/android) or clone [GIT project](https://github.com/googlesamples/mlkit/tree/master/android/vision-quickstart) to get started.","title":"ZXing on Android PDF417","body":"<p>Google's <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning\" rel=\"nofollow noreferrer\">ML KIT Barcode Scanning</a> which is part of google's <em>Mobile Vision</em> library lists support for PDF-417 Barcodes.</p>\n<p>It automatically parses QR Codes, Data Matrix, PDF-417, and Aztec values, for the following supported formats:</p>\n<ul>\n<li>URL</li>\n<li>Contact information (VCARD, etc.)</li>\n<li>Calendar event</li>\n<li>Email</li>\n<li>Phone</li>\n<li>SMS</li>\n<li>ISBN</li>\n<li>WiFi</li>\n<li>Geo-location (latitude and longitude)</li>\n<li>AAMVA driver license/ID</li>\n</ul>\n<p>Review the <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/android\" rel=\"nofollow noreferrer\">Getting Started Page</a> or clone <a href=\"https://github.com/googlesamples/mlkit/tree/master/android/vision-quickstart\" rel=\"nofollow noreferrer\">GIT project</a> to get started.</p>\n"},{"tags":[],"owner":{"account_id":472765,"reputation":22562,"user_id":881441,"display_name":"Stephen Quan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529557864,"creation_date":1529554790,"answer_id":50960320,"question_id":9239699,"body_markdown":"I got similar results as described by @sean-owen in that only the simple PDF417 were being read. It feels like the ZXing library doesn&#39;t have the same error correction for PDF417 that it does for QR Codes. However, with user assistance we were able to eliminate noise and create an artificial quiet zone by:\r\n\r\n - require the user to hold the phone in landscape mode (this maximizes the pixels captured from the camera, even in 640x480 mode)\r\n - require the user to fit the barcode inside a 50:18 clipping rectangle (this ratio seems to best fit the US Driver&#39;s License and such a clipping rectangle will empower the user to clip away most of the noise)\r\n - allow the user control focus, tilt distortions\r\n\r\nBy following the above, even some of the notoriously difficult PDF417 images can be scanned.","title":"ZXing on Android PDF417","body":"<p>I got similar results as described by @sean-owen in that only the simple PDF417 were being read. It feels like the ZXing library doesn't have the same error correction for PDF417 that it does for QR Codes. However, with user assistance we were able to eliminate noise and create an artificial quiet zone by:</p>\n\n<ul>\n<li>require the user to hold the phone in landscape mode (this maximizes the pixels captured from the camera, even in 640x480 mode)</li>\n<li>require the user to fit the barcode inside a 50:18 clipping rectangle (this ratio seems to best fit the US Driver's License and such a clipping rectangle will empower the user to clip away most of the noise)</li>\n<li>allow the user control focus, tilt distortions</li>\n</ul>\n\n<p>By following the above, even some of the notoriously difficult PDF417 images can be scanned.</p>\n"}],"owner":{"account_id":162571,"reputation":6260,"user_id":384115,"accept_rate":63,"display_name":"STeN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19535,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":9239991,"answer_count":6,"score":9,"last_activity_date":1634200383,"creation_date":1328958309,"question_id":9239699,"body_markdown":"Was anybody able to read the [PDF417][1] barcode with use of the [ZXing][2] library on the Android OS? They are supporting this - and according to their page it is in &#39;alpha&#39; stage.\r\n\r\nWe are not looking for perfect solution - since the PDF417 is pretty complex and needs a very good camera with auto-focus, we can accept that it will be working only on few pre-selected high end devices.\r\n\r\nWe have tried also the [Barcode Scanner +][3] available on the Android Market - it has the PDF417 option in the settings, but whatever we read it always fails.\r\n\r\nWe were looking also for commercial SDK, also here on stackoverflow, but with no luck.\r\n\r\nAny help is appreciated.\r\n\r\nKind Regards,\r\nSTeN\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/PDF417\r\n  [2]: http://code.google.com/p/zxing/\r\n  [3]: http://srowen.com/bsplus/","title":"ZXing on Android PDF417","body":"<p>Was anybody able to read the <a href=\"http://en.wikipedia.org/wiki/PDF417\" rel=\"noreferrer\">PDF417</a> barcode with use of the <a href=\"http://code.google.com/p/zxing/\" rel=\"noreferrer\">ZXing</a> library on the Android OS? They are supporting this - and according to their page it is in 'alpha' stage.</p>\n\n<p>We are not looking for perfect solution - since the PDF417 is pretty complex and needs a very good camera with auto-focus, we can accept that it will be working only on few pre-selected high end devices.</p>\n\n<p>We have tried also the <a href=\"http://srowen.com/bsplus/\" rel=\"noreferrer\">Barcode Scanner +</a> available on the Android Market - it has the PDF417 option in the settings, but whatever we read it always fails.</p>\n\n<p>We were looking also for commercial SDK, also here on stackoverflow, but with no luck.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Kind Regards,\nSTeN</p>\n"},{"tags":["java","android","opengl"],"owner":{"account_id":17166208,"reputation":75,"user_id":12479599,"display_name":"Bocho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634200239,"creation_date":1634146730,"question_id":69559974,"body_markdown":"I&#39;m trying to make some cubes move around responding to users interact. First, I realize that&#39;s better to move the camera than translate all the cubes. Te results that I want to achieve is the cubes follow my finger around the screen.\r\n\r\nI convert the next code:\r\n\r\n[![original source][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ybYBr.png\r\n\r\nIn java code like this:\r\n\r\n    switch (event.getAction()) {\r\n                case MotionEvent.ACTION_MOVE:\r\n                    float[] multy = new float[3];\r\n                    float[] suma = new float[3];\r\n                    float cameraSpeed = 0.07f;\r\n                    float[] cross = normalizar(cross(renderer.getCameraFront(), renderer.getCameraUp()));\r\n                    for (int i = 0; i &lt; multy.length; i++) {\r\n                        multy[i] = cameraSpeed * cross[i];\r\n                    }\r\n                    for (int i = 0; i &lt; suma.length; i++) {\r\n                        suma[i] = renderer.getCameraPos()[i] + (x &gt; getWidth() / 2 ? -multy[i] : multy[i]);\r\n                    }\r\n                    renderer.setCameraPos(suma);\r\n                    requestRender();\r\n                    break;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public float[] normalizar(float[] vector) {\r\n        float[] vectorNormalizado = new float[3];\r\n        double length = Math.sqrt(Math.pow(vector[0], 2) + Math.pow(vector[1], 2) + Math.pow(vector[2], 2));\r\n        if (length != 0) {\r\n            vectorNormalizado[0] = (float) (vector[0] / length);\r\n            vectorNormalizado[1] = (float) (vector[1] / length);\r\n            vectorNormalizado[2] = (float) (vector[2] / length);\r\n        }\r\n        return vectorNormalizado;\r\n    }\r\n\r\n    public float[] cross(float[] v0, float[] v1) {\r\n        float[] crossProduct = new float[3];\r\n        crossProduct[0] = v0[1] * v1[2] - v0[2] * v1[1];\r\n        crossProduct[1] = v0[2] * v1[0] - v0[0] * v1[2];\r\n        crossProduct[2] = v0[0] * v1[1] - v0[1] * v1[0];\r\n\r\n        return crossProduct;\r\n    }\r\n\r\nNow I&#39;m able to move the cubes horizontally. The problem is that the cubes move in a constant velocity and don&#39;t take care of the x point of the event, only I use it to move to the right or left  relative to the middle of the screen.\r\n\r\nHow can make that the cubes move following the x point of the event?\r\n\r\nFinally, there is any way to make it work vertically too?","title":"How move the camera around the world, simulating that the objects are which are moving in OpenGL","body":"<p>I'm trying to make some cubes move around responding to users interact. First, I realize that's better to move the camera than translate all the cubes. Te results that I want to achieve is the cubes follow my finger around the screen.</p>\n<p>I convert the next code:</p>\n<p><a href=\"https://i.stack.imgur.com/ybYBr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ybYBr.png\" alt=\"original source\" /></a></p>\n<p>In java code like this:</p>\n<pre><code>switch (event.getAction()) {\n            case MotionEvent.ACTION_MOVE:\n                float[] multy = new float[3];\n                float[] suma = new float[3];\n                float cameraSpeed = 0.07f;\n                float[] cross = normalizar(cross(renderer.getCameraFront(), renderer.getCameraUp()));\n                for (int i = 0; i &lt; multy.length; i++) {\n                    multy[i] = cameraSpeed * cross[i];\n                }\n                for (int i = 0; i &lt; suma.length; i++) {\n                    suma[i] = renderer.getCameraPos()[i] + (x &gt; getWidth() / 2 ? -multy[i] : multy[i]);\n                }\n                renderer.setCameraPos(suma);\n                requestRender();\n                break;\n        }\n    }\n    return true;\n}\n\npublic float[] normalizar(float[] vector) {\n    float[] vectorNormalizado = new float[3];\n    double length = Math.sqrt(Math.pow(vector[0], 2) + Math.pow(vector[1], 2) + Math.pow(vector[2], 2));\n    if (length != 0) {\n        vectorNormalizado[0] = (float) (vector[0] / length);\n        vectorNormalizado[1] = (float) (vector[1] / length);\n        vectorNormalizado[2] = (float) (vector[2] / length);\n    }\n    return vectorNormalizado;\n}\n\npublic float[] cross(float[] v0, float[] v1) {\n    float[] crossProduct = new float[3];\n    crossProduct[0] = v0[1] * v1[2] - v0[2] * v1[1];\n    crossProduct[1] = v0[2] * v1[0] - v0[0] * v1[2];\n    crossProduct[2] = v0[0] * v1[1] - v0[1] * v1[0];\n\n    return crossProduct;\n}\n</code></pre>\n<p>Now I'm able to move the cubes horizontally. The problem is that the cubes move in a constant velocity and don't take care of the x point of the event, only I use it to move to the right or left  relative to the middle of the screen.</p>\n<p>How can make that the cubes move following the x point of the event?</p>\n<p>Finally, there is any way to make it work vertically too?</p>\n"},{"tags":["java","maven","heroku","pom.xml"],"owner":{"account_id":18450097,"reputation":399,"user_id":13440443,"display_name":"Rahul Goswami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634200096,"creation_date":1634188773,"question_id":69565445,"body_markdown":"So I was trying to deploy my project but it shows and error so I did `heroku logs --tail` I got this type of error\r\n\r\n[![This is this the error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k3HWD.png\r\n\r\nSo adding Pom.xml and Procfile for your references.\r\n\r\nPom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;net.codejava&lt;/groupId&gt;\r\n        &lt;artifactId&gt;trial&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n        &lt;name&gt;trial&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.7&lt;/source&gt;\r\n                        &lt;target&gt;1.7&lt;/target&gt;\r\n                        &lt;compilerArguments&gt;\r\n                            &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\r\n                        &lt;/compilerArguments&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;validate&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\r\n                                &lt;silent&gt;true&lt;/silent&gt;\r\n                                &lt;artifactItems&gt;\r\n                                    &lt;artifactItem&gt;\r\n                                        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\r\n                                        &lt;version&gt;7.0&lt;/version&gt;\r\n                                        &lt;type&gt;jar&lt;/type&gt;\r\n                                    &lt;/artifactItem&gt;\r\n                                &lt;/artifactItems&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.26&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nProcfile\r\n\r\n    web: Java $JAVA_OPTS -jar target/dependency/webapp-runner.jar –port $PORT target/trial.war\r\n\r\nSo if someone can help me out in this. And I dont know why there is no webapp-runner.jar in Pom.xml should I need to add it manually or there is something I need to install.","title":"Java maven can&#39;t start app on Heroku. Error H10 (app crashed)","body":"<p>So I was trying to deploy my project but it shows and error so I did <code>heroku logs --tail</code> I got this type of error</p>\n<p><a href=\"https://i.stack.imgur.com/k3HWD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k3HWD.png\" alt=\"This is this the error\" /></a></p>\n<p>So adding Pom.xml and Procfile for your references.</p>\n<p>Pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;net.codejava&lt;/groupId&gt;\n    &lt;artifactId&gt;trial&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;trial&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;compilerArguments&gt;\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                    &lt;/compilerArguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\n                            &lt;silent&gt;true&lt;/silent&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;javax&lt;/groupId&gt;\n                                    &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\n                                    &lt;version&gt;7.0&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.26&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Procfile</p>\n<pre><code>web: Java $JAVA_OPTS -jar target/dependency/webapp-runner.jar –port $PORT target/trial.war\n</code></pre>\n<p>So if someone can help me out in this. And I dont know why there is no webapp-runner.jar in Pom.xml should I need to add it manually or there is something I need to install.</p>\n"},{"tags":["java","cudnn","dl4j"],"answers":[{"tags":[],"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634198511,"creation_date":1634198511,"answer_id":69567092,"question_id":69566911,"body_markdown":"`CanvasFrame` tries to do gamma correction by default because it&#39;s typically needed by cameras used for CV, but cheap webcams usually output gamma corrected images, so make sure to let `CanvasFrame` know about it this way:\r\n\r\n    // We should also specify the relative monitor/camera response for proper gamma correction.\r\n    CanvasFrame frame = new CanvasFrame(&quot;Some Title&quot;, CanvasFrame.getDefaultGamma()/grabber.getGamma());\r\n- https://github.com/bytedeco/javacv/\r\n","title":"DL4J-Image become too bright","body":"<p><code>CanvasFrame</code> tries to do gamma correction by default because it's typically needed by cameras used for CV, but cheap webcams usually output gamma corrected images, so make sure to let <code>CanvasFrame</code> know about it this way:</p>\n<pre><code>// We should also specify the relative monitor/camera response for proper gamma correction.\nCanvasFrame frame = new CanvasFrame(&quot;Some Title&quot;, CanvasFrame.getDefaultGamma()/grabber.getGamma());\n</code></pre>\n<ul>\n<li><a href=\"https://github.com/bytedeco/javacv/\" rel=\"nofollow noreferrer\">https://github.com/bytedeco/javacv/</a></li>\n</ul>\n"}],"owner":{"account_id":18482907,"reputation":5,"user_id":13464580,"display_name":"Aiman Zaidi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69567092,"answer_count":1,"score":0,"last_activity_date":1634199704,"creation_date":1634197684,"question_id":69566911,"body_markdown":"Currently, I&#39;ve been asked to write CNN code using DL4J using YOLOv2 architecture. But the problem is after the model has complete, I do a simple GUI for validation testing then the [image shown is too bright][1] and sometimes the [image can be displayed][2]. Im not sure where does this problem comes from whether at earliest stage of training or else. Here, I attach the code that I have for now. For Iterator:\r\n\r\n    public class faceMaskIterator {\r\n    private static final Logger log = org.slf4j.LoggerFactory.getLogger(faceMaskIterator.class);\r\n    private static final int seed = 123;\r\n    private static Random rng = new Random(seed);\r\n    private static String dataDir;\r\n    private static Path pathDirectory;\r\n    private static InputSplit trainData, testData;\r\n    private static final String[] allowedFormats  = NativeImageLoader.ALLOWED_FORMATS;\r\n    private static final double splitRatio = 0.8;\r\n    private static final int nChannels = 3;\r\n    public static final int gridWidth = 13;\r\n    public static final int gridHeight = 13;\r\n    public static final int yolowidth = 416;\r\n    public static final int yoloheight = 416;\r\n\r\n    private static RecordReaderDataSetIterator makeIterator(InputSplit split, Path dir, int batchSize) throws Exception {\r\n\r\n        ObjectDetectionRecordReader recordReader = new ObjectDetectionRecordReader(yoloheight, yolowidth, nChannels,\r\n                gridHeight, gridWidth, new VocLabelProvider(dir.toString()));\r\n        recordReader.initialize(split);\r\n        RecordReaderDataSetIterator iter = new RecordReaderDataSetIterator(recordReader, batchSize, 1, 1,true);\r\n        iter.setPreProcessor(new ImagePreProcessingScaler(0, 1));\r\n\r\n        return iter;\r\n    }\r\n\r\n    public static RecordReaderDataSetIterator trainIterator(int batchSize) throws Exception {\r\n        return makeIterator(trainData, pathDirectory, batchSize);\r\n    }\r\n\r\n    public static RecordReaderDataSetIterator testIterator(int batchSize) throws Exception {\r\n        return makeIterator(testData, pathDirectory, batchSize);\r\n    }\r\n\r\n    public static void setup() throws IOException {\r\n        log.info(&quot;Load data...&quot;);\r\n        dataDir = Paths.get(\r\n                System.getProperty(&quot;user.home&quot;),\r\n                Helper.getPropValues(&quot;dl4j_home.data&quot;)\r\n        ).toString();\r\n        pathDirectory = Paths.get(dataDir,&quot;face_mask_dataset&quot;);\r\n        FileSplit fileSplit = new FileSplit(new File(pathDirectory.toString()),allowedFormats,rng);\r\n        PathFilter pathFilter = new RandomPathFilter(rng,allowedFormats);\r\n        InputSplit[] sample = fileSplit.sample(pathFilter, splitRatio,1-splitRatio);\r\n        trainData = sample[0];\r\n        testData = sample[1];\r\n    }}\r\n\r\nFor training:\r\n\r\n    public class faceMaskPreTrained {\r\n    private static final Logger log = LoggerFactory.getLogger(ai.certifai.groupProjek.faceMaskPreTrained.class);\r\n    private static int seed = 420;\r\n    private static double detectionThreshold = 0.9;\r\n    private static int nBoxes = 3;\r\n    private static double lambdaNoObj = 0.7;\r\n    private static double lambdaCoord = 1.0;\r\n    private static double[][] priorBoxes = {{1, 1}, {2, 1}, {1, 2}};\r\n\r\n    private static int batchSize = 3;\r\n    private static int nEpochs = 1;\r\n    private static double learningRate = 1e-4;\r\n    private static int nClasses = 3;\r\n    private static List&lt;String&gt; labels;\r\n\r\n    private static File modelFilename = new File(System.getProperty(&quot;user.dir&quot;), &quot;generated-models/facemask_detector.zip&quot;);\r\n    private static ComputationGraph model;\r\n    private static Frame frame = null;\r\n    private static final Scalar GREEN = RGB(0, 255.0, 0);\r\n    private static final Scalar YELLOW = RGB(255, 255, 0);\r\n    private static final Scalar RED = RGB(255, 0, 0);\r\n    private static Scalar[] colormap = {GREEN, YELLOW, RED};\r\n    private static String labeltext = null;\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        faceMaskIterator.setup();\r\n        RecordReaderDataSetIterator trainIter = faceMaskIterator.trainIterator(batchSize);\r\n        RecordReaderDataSetIterator testIter = faceMaskIterator.testIterator(1);\r\n        labels = trainIter.getLabels();\r\n\r\n        if (modelFilename.exists()) {\r\n            Nd4j.getRandom().setSeed(seed);\r\n            log.info(&quot;Load model...&quot;);\r\n            model = ModelSerializer.restoreComputationGraph(modelFilename);\r\n        } else {\r\n            Nd4j.getRandom().setSeed(seed);\r\n            INDArray priors = Nd4j.create(priorBoxes);\r\n\r\n            log.info(&quot;Build model...&quot;);\r\n            ComputationGraph pretrained = (ComputationGraph) YOLO2.builder().build().initPretrained();\r\n\r\n            \r\n            FineTuneConfiguration fineTuneConf = getFineTuneConfiguration();\r\n            model = getComputationGraph(pretrained, priors, fineTuneConf);\r\n            System.out.println(model.summary(InputType.convolutional(\r\n                    faceMaskIterator.yoloheight,\r\n                    faceMaskIterator.yolowidth,\r\n                    nClasses)));\r\n\r\n            log.info(&quot;Train model...&quot;);\r\n            UIServer server = UIServer.getInstance();\r\n            StatsStorage storage = new InMemoryStatsStorage();\r\n            server.attach(storage);\r\n            model.setListeners(new ScoreIterationListener(5), new StatsListener(storage,5));\r\n\r\n            for (int i = 1; i &lt; nEpochs + 1; i++) {\r\n                trainIter.reset();\r\n                while (trainIter.hasNext()) {\r\n                    model.fit(trainIter.next());\r\n                }\r\n                log.info(&quot;*** Completed epoch {} ***&quot;, i);\r\n            }\r\n            ModelSerializer.writeModel(model, modelFilename, true);\r\n            System.out.println(&quot;Model saved.&quot;);\r\n        }\r\n        //   Evaluate the model&#39;s accuracy by using the test iterator.\r\n        OfflineValidationWithTestDataset(testIter);\r\n        //   Inference the model and process the webcam stream and make predictions.\r\n        doInference();\r\n    }\r\n\r\n    private static ComputationGraph getComputationGraph(ComputationGraph pretrained, INDArray priors, FineTuneConfiguration fineTuneConf) {\r\n\r\n        return new TransferLearning.GraphBuilder(pretrained)\r\n                .fineTuneConfiguration(fineTuneConf)\r\n                .removeVertexKeepConnections(&quot;conv2d_23&quot;)\r\n                .removeVertexKeepConnections(&quot;outputs&quot;)\r\n                .addLayer(&quot;conv2d_23&quot;,\r\n                        new ConvolutionLayer.Builder(1, 1)\r\n                                .nIn(1024)\r\n                                .nOut(nBoxes * (5 + nClasses))\r\n                                .stride(1, 1)\r\n                                .convolutionMode(ConvolutionMode.Same)\r\n                                .weightInit(WeightInit.XAVIER)\r\n                                .activation(Activation.IDENTITY)\r\n                                .build(),\r\n                        &quot;leaky_re_lu_22&quot;)\r\n                .addLayer(&quot;outputs&quot;,\r\n                        new Yolo2OutputLayer.Builder()\r\n                                .lambdaNoObj(lambdaNoObj)\r\n                                .lambdaCoord(lambdaCoord)\r\n                                .boundingBoxPriors(priors.castTo(DataType.FLOAT))\r\n                                .build(),\r\n                        &quot;conv2d_23&quot;)\r\n                .setOutputs(&quot;outputs&quot;)\r\n                .build();\r\n    }\r\n\r\n    private static FineTuneConfiguration getFineTuneConfiguration() {\r\n\r\n        return new FineTuneConfiguration.Builder()\r\n                .seed(seed)\r\n                .optimizationAlgo(OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT)\r\n                .gradientNormalization(GradientNormalization.RenormalizeL2PerLayer)\r\n                .gradientNormalizationThreshold(1.0)\r\n                .updater(new Adam.Builder().learningRate(learningRate).build())\r\n                .l2(0.00001)\r\n                .activation(Activation.IDENTITY)\r\n                .trainingWorkspaceMode(WorkspaceMode.ENABLED)\r\n                .inferenceWorkspaceMode(WorkspaceMode.ENABLED)\r\n                .build();\r\n    }\r\n\r\n    //    Evaluate visually the performance of the trained object detection model\r\n    private static void OfflineValidationWithTestDataset(RecordReaderDataSetIterator test) throws InterruptedException {\r\n        NativeImageLoader imageLoader = new NativeImageLoader();\r\n        CanvasFrame canvas = new CanvasFrame(&quot;Validate Test Dataset&quot;);\r\n        OpenCVFrameConverter.ToMat converter = new OpenCVFrameConverter.ToMat();\r\n        org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer yout = (org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer) model.getOutputLayer(0);\r\n        Mat convertedMat = new Mat();\r\n        Mat convertedMat_big = new Mat();\r\n\r\n        while (test.hasNext() &amp;&amp; canvas.isVisible()) {\r\n            org.nd4j.linalg.dataset.DataSet ds = test.next();\r\n            INDArray features = ds.getFeatures();\r\n            INDArray results = model.outputSingle(features);\r\n            List&lt;DetectedObject&gt; objs = yout.getPredictedObjects(results, detectionThreshold);\r\n            YoloUtils.nms(objs, 0.4);\r\n            Mat mat = imageLoader.asMat(features);\r\n            mat.convertTo(convertedMat, CV_8U, 255, 0);\r\n            int w = mat.cols() * 2;\r\n            int h = mat.rows() * 2;\r\n            resize(convertedMat, convertedMat_big, new Size(w, h));\r\n            convertedMat_big = drawResults(objs, convertedMat_big, w, h);\r\n            canvas.showImage(converter.convert(convertedMat_big));\r\n            canvas.waitKey();\r\n        }\r\n        canvas.dispose();\r\n    }\r\n\r\n    // Stream video frames from Webcam and run them through YOLOv2 model and get predictions\r\n    private static void doInference() {\r\n\r\n        String cameraPos = &quot;front&quot;;\r\n        int cameraNum = 0;\r\n        Thread thread = null;\r\n        NativeImageLoader loader = new NativeImageLoader(\r\n                faceMaskIterator.yolowidth,\r\n                faceMaskIterator.yoloheight,\r\n                3,\r\n                new ColorConversionTransform(COLOR_BGR2RGB));\r\n        ImagePreProcessingScaler scaler = new ImagePreProcessingScaler(0, 1);\r\n\r\n        if (!cameraPos.equals(&quot;front&quot;) &amp;&amp; !cameraPos.equals(&quot;back&quot;)) {\r\n            try {\r\n                throw new Exception(&quot;Unknown argument for camera position. Choose between front and back&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        FrameGrabber grabber = null;\r\n        try {\r\n            grabber = FrameGrabber.createDefault(cameraNum);\r\n        } catch (FrameGrabber.Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        OpenCVFrameConverter.ToMat converter = new OpenCVFrameConverter.ToMat();\r\n\r\n        try {\r\n            grabber.start();\r\n        } catch (FrameGrabber.Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        CanvasFrame canvas = new CanvasFrame(&quot;Object Detection&quot;);\r\n        int w = grabber.getImageWidth();\r\n        int h = grabber.getImageHeight();\r\n        canvas.setCanvasSize(w, h);\r\n\r\n        while (true) {\r\n            try {\r\n                frame = grabber.grab();\r\n            } catch (FrameGrabber.Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            //if a thread is null, create new thread\r\n            if (thread == null) {\r\n                thread = new Thread(() -&gt;\r\n                {\r\n                    while (frame != null) {\r\n                        try {\r\n                            Mat rawImage = new Mat();\r\n\r\n                            //Flip the camera if opening front camera\r\n                            if (cameraPos.equals(&quot;front&quot;)) {\r\n                                Mat inputImage = converter.convert(frame);\r\n                                flip(inputImage, rawImage, 1);\r\n                            } else {\r\n                                rawImage = converter.convert(frame);\r\n                            }\r\n\r\n                            Mat resizeImage = new Mat();\r\n                            resize(rawImage, resizeImage, new Size(faceMaskIterator.yolowidth, faceMaskIterator.yoloheight));\r\n                            INDArray inputImage = loader.asMatrix(resizeImage);\r\n                            scaler.transform(inputImage);\r\n                            INDArray outputs = model.outputSingle(inputImage);\r\n                            org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer yout = (org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer) model.getOutputLayer(0);\r\n                            List&lt;DetectedObject&gt; objs = yout.getPredictedObjects(outputs, detectionThreshold);\r\n                            YoloUtils.nms(objs, 0.4);\r\n                            rawImage = drawResults(objs, rawImage, w, h);\r\n                            canvas.showImage(converter.convert(rawImage));\r\n                        } catch (Exception e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                });\r\n                thread.start();\r\n            }\r\n\r\n            KeyEvent t = null;\r\n            try {\r\n                t = canvas.waitKey(33);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            if ((t != null) &amp;&amp; (t.getKeyCode() == KeyEvent.VK_Q)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private static Mat drawResults(List&lt;DetectedObject&gt; objects, Mat mat, int w, int h) {\r\n        for (DetectedObject obj : objects) {\r\n            double[] xy1 = obj.getTopLeftXY();\r\n            double[] xy2 = obj.getBottomRightXY();\r\n            String label = labels.get(obj.getPredictedClass());\r\n            int x1 = (int) Math.round(w * xy1[0] / faceMaskIterator.gridWidth);\r\n            int y1 = (int) Math.round(h * xy1[1] / faceMaskIterator.gridHeight);\r\n            int x2 = (int) Math.round(w * xy2[0] / faceMaskIterator.gridWidth);\r\n            int y2 = (int) Math.round(h * xy2[1] / faceMaskIterator.gridHeight);\r\n            //Draw bounding box\r\n            rectangle(mat, new Point(x1, y1), new Point(x2, y2), colormap[obj.getPredictedClass()], 2, 0, 0);\r\n            //Display label text\r\n            labeltext = label + &quot; &quot; + String.format(&quot;%.2f&quot;, obj.getConfidence() * 100) + &quot;%&quot;;\r\n            int[] baseline = {0};\r\n            Size textSize = getTextSize(labeltext, FONT_HERSHEY_DUPLEX, 1, 1, baseline);\r\n            rectangle(mat, new Point(x1 + 2, y2 - 2), new Point(x1 + 2 + textSize.get(0), y2 - 2 - textSize.get(1)), colormap[obj.getPredictedClass()], FILLED, 0, 0);\r\n            putText(mat, labeltext, new Point(x1 + 2, y2 - 2), FONT_HERSHEY_DUPLEX, 1, RGB(0, 0, 0));\r\n        }\r\n        return mat;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r9e89.png\r\n  [2]: https://i.stack.imgur.com/IVlBi.jpg","title":"DL4J-Image become too bright","body":"<p>Currently, I've been asked to write CNN code using DL4J using YOLOv2 architecture. But the problem is after the model has complete, I do a simple GUI for validation testing then the <a href=\"https://i.stack.imgur.com/r9e89.png\" rel=\"nofollow noreferrer\">image shown is too bright</a> and sometimes the <a href=\"https://i.stack.imgur.com/IVlBi.jpg\" rel=\"nofollow noreferrer\">image can be displayed</a>. Im not sure where does this problem comes from whether at earliest stage of training or else. Here, I attach the code that I have for now. For Iterator:</p>\n<pre><code>public class faceMaskIterator {\nprivate static final Logger log = org.slf4j.LoggerFactory.getLogger(faceMaskIterator.class);\nprivate static final int seed = 123;\nprivate static Random rng = new Random(seed);\nprivate static String dataDir;\nprivate static Path pathDirectory;\nprivate static InputSplit trainData, testData;\nprivate static final String[] allowedFormats  = NativeImageLoader.ALLOWED_FORMATS;\nprivate static final double splitRatio = 0.8;\nprivate static final int nChannels = 3;\npublic static final int gridWidth = 13;\npublic static final int gridHeight = 13;\npublic static final int yolowidth = 416;\npublic static final int yoloheight = 416;\n\nprivate static RecordReaderDataSetIterator makeIterator(InputSplit split, Path dir, int batchSize) throws Exception {\n\n    ObjectDetectionRecordReader recordReader = new ObjectDetectionRecordReader(yoloheight, yolowidth, nChannels,\n            gridHeight, gridWidth, new VocLabelProvider(dir.toString()));\n    recordReader.initialize(split);\n    RecordReaderDataSetIterator iter = new RecordReaderDataSetIterator(recordReader, batchSize, 1, 1,true);\n    iter.setPreProcessor(new ImagePreProcessingScaler(0, 1));\n\n    return iter;\n}\n\npublic static RecordReaderDataSetIterator trainIterator(int batchSize) throws Exception {\n    return makeIterator(trainData, pathDirectory, batchSize);\n}\n\npublic static RecordReaderDataSetIterator testIterator(int batchSize) throws Exception {\n    return makeIterator(testData, pathDirectory, batchSize);\n}\n\npublic static void setup() throws IOException {\n    log.info(&quot;Load data...&quot;);\n    dataDir = Paths.get(\n            System.getProperty(&quot;user.home&quot;),\n            Helper.getPropValues(&quot;dl4j_home.data&quot;)\n    ).toString();\n    pathDirectory = Paths.get(dataDir,&quot;face_mask_dataset&quot;);\n    FileSplit fileSplit = new FileSplit(new File(pathDirectory.toString()),allowedFormats,rng);\n    PathFilter pathFilter = new RandomPathFilter(rng,allowedFormats);\n    InputSplit[] sample = fileSplit.sample(pathFilter, splitRatio,1-splitRatio);\n    trainData = sample[0];\n    testData = sample[1];\n}}\n</code></pre>\n<p>For training:</p>\n<pre><code>public class faceMaskPreTrained {\nprivate static final Logger log = LoggerFactory.getLogger(ai.certifai.groupProjek.faceMaskPreTrained.class);\nprivate static int seed = 420;\nprivate static double detectionThreshold = 0.9;\nprivate static int nBoxes = 3;\nprivate static double lambdaNoObj = 0.7;\nprivate static double lambdaCoord = 1.0;\nprivate static double[][] priorBoxes = {{1, 1}, {2, 1}, {1, 2}};\n\nprivate static int batchSize = 3;\nprivate static int nEpochs = 1;\nprivate static double learningRate = 1e-4;\nprivate static int nClasses = 3;\nprivate static List&lt;String&gt; labels;\n\nprivate static File modelFilename = new File(System.getProperty(&quot;user.dir&quot;), &quot;generated-models/facemask_detector.zip&quot;);\nprivate static ComputationGraph model;\nprivate static Frame frame = null;\nprivate static final Scalar GREEN = RGB(0, 255.0, 0);\nprivate static final Scalar YELLOW = RGB(255, 255, 0);\nprivate static final Scalar RED = RGB(255, 0, 0);\nprivate static Scalar[] colormap = {GREEN, YELLOW, RED};\nprivate static String labeltext = null;\n\npublic static void main(String[] args) throws Exception {\n    faceMaskIterator.setup();\n    RecordReaderDataSetIterator trainIter = faceMaskIterator.trainIterator(batchSize);\n    RecordReaderDataSetIterator testIter = faceMaskIterator.testIterator(1);\n    labels = trainIter.getLabels();\n\n    if (modelFilename.exists()) {\n        Nd4j.getRandom().setSeed(seed);\n        log.info(&quot;Load model...&quot;);\n        model = ModelSerializer.restoreComputationGraph(modelFilename);\n    } else {\n        Nd4j.getRandom().setSeed(seed);\n        INDArray priors = Nd4j.create(priorBoxes);\n\n        log.info(&quot;Build model...&quot;);\n        ComputationGraph pretrained = (ComputationGraph) YOLO2.builder().build().initPretrained();\n\n        \n        FineTuneConfiguration fineTuneConf = getFineTuneConfiguration();\n        model = getComputationGraph(pretrained, priors, fineTuneConf);\n        System.out.println(model.summary(InputType.convolutional(\n                faceMaskIterator.yoloheight,\n                faceMaskIterator.yolowidth,\n                nClasses)));\n\n        log.info(&quot;Train model...&quot;);\n        UIServer server = UIServer.getInstance();\n        StatsStorage storage = new InMemoryStatsStorage();\n        server.attach(storage);\n        model.setListeners(new ScoreIterationListener(5), new StatsListener(storage,5));\n\n        for (int i = 1; i &lt; nEpochs + 1; i++) {\n            trainIter.reset();\n            while (trainIter.hasNext()) {\n                model.fit(trainIter.next());\n            }\n            log.info(&quot;*** Completed epoch {} ***&quot;, i);\n        }\n        ModelSerializer.writeModel(model, modelFilename, true);\n        System.out.println(&quot;Model saved.&quot;);\n    }\n    //   Evaluate the model's accuracy by using the test iterator.\n    OfflineValidationWithTestDataset(testIter);\n    //   Inference the model and process the webcam stream and make predictions.\n    doInference();\n}\n\nprivate static ComputationGraph getComputationGraph(ComputationGraph pretrained, INDArray priors, FineTuneConfiguration fineTuneConf) {\n\n    return new TransferLearning.GraphBuilder(pretrained)\n            .fineTuneConfiguration(fineTuneConf)\n            .removeVertexKeepConnections(&quot;conv2d_23&quot;)\n            .removeVertexKeepConnections(&quot;outputs&quot;)\n            .addLayer(&quot;conv2d_23&quot;,\n                    new ConvolutionLayer.Builder(1, 1)\n                            .nIn(1024)\n                            .nOut(nBoxes * (5 + nClasses))\n                            .stride(1, 1)\n                            .convolutionMode(ConvolutionMode.Same)\n                            .weightInit(WeightInit.XAVIER)\n                            .activation(Activation.IDENTITY)\n                            .build(),\n                    &quot;leaky_re_lu_22&quot;)\n            .addLayer(&quot;outputs&quot;,\n                    new Yolo2OutputLayer.Builder()\n                            .lambdaNoObj(lambdaNoObj)\n                            .lambdaCoord(lambdaCoord)\n                            .boundingBoxPriors(priors.castTo(DataType.FLOAT))\n                            .build(),\n                    &quot;conv2d_23&quot;)\n            .setOutputs(&quot;outputs&quot;)\n            .build();\n}\n\nprivate static FineTuneConfiguration getFineTuneConfiguration() {\n\n    return new FineTuneConfiguration.Builder()\n            .seed(seed)\n            .optimizationAlgo(OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT)\n            .gradientNormalization(GradientNormalization.RenormalizeL2PerLayer)\n            .gradientNormalizationThreshold(1.0)\n            .updater(new Adam.Builder().learningRate(learningRate).build())\n            .l2(0.00001)\n            .activation(Activation.IDENTITY)\n            .trainingWorkspaceMode(WorkspaceMode.ENABLED)\n            .inferenceWorkspaceMode(WorkspaceMode.ENABLED)\n            .build();\n}\n\n//    Evaluate visually the performance of the trained object detection model\nprivate static void OfflineValidationWithTestDataset(RecordReaderDataSetIterator test) throws InterruptedException {\n    NativeImageLoader imageLoader = new NativeImageLoader();\n    CanvasFrame canvas = new CanvasFrame(&quot;Validate Test Dataset&quot;);\n    OpenCVFrameConverter.ToMat converter = new OpenCVFrameConverter.ToMat();\n    org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer yout = (org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer) model.getOutputLayer(0);\n    Mat convertedMat = new Mat();\n    Mat convertedMat_big = new Mat();\n\n    while (test.hasNext() &amp;&amp; canvas.isVisible()) {\n        org.nd4j.linalg.dataset.DataSet ds = test.next();\n        INDArray features = ds.getFeatures();\n        INDArray results = model.outputSingle(features);\n        List&lt;DetectedObject&gt; objs = yout.getPredictedObjects(results, detectionThreshold);\n        YoloUtils.nms(objs, 0.4);\n        Mat mat = imageLoader.asMat(features);\n        mat.convertTo(convertedMat, CV_8U, 255, 0);\n        int w = mat.cols() * 2;\n        int h = mat.rows() * 2;\n        resize(convertedMat, convertedMat_big, new Size(w, h));\n        convertedMat_big = drawResults(objs, convertedMat_big, w, h);\n        canvas.showImage(converter.convert(convertedMat_big));\n        canvas.waitKey();\n    }\n    canvas.dispose();\n}\n\n// Stream video frames from Webcam and run them through YOLOv2 model and get predictions\nprivate static void doInference() {\n\n    String cameraPos = &quot;front&quot;;\n    int cameraNum = 0;\n    Thread thread = null;\n    NativeImageLoader loader = new NativeImageLoader(\n            faceMaskIterator.yolowidth,\n            faceMaskIterator.yoloheight,\n            3,\n            new ColorConversionTransform(COLOR_BGR2RGB));\n    ImagePreProcessingScaler scaler = new ImagePreProcessingScaler(0, 1);\n\n    if (!cameraPos.equals(&quot;front&quot;) &amp;&amp; !cameraPos.equals(&quot;back&quot;)) {\n        try {\n            throw new Exception(&quot;Unknown argument for camera position. Choose between front and back&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    FrameGrabber grabber = null;\n    try {\n        grabber = FrameGrabber.createDefault(cameraNum);\n    } catch (FrameGrabber.Exception e) {\n        e.printStackTrace();\n    }\n    OpenCVFrameConverter.ToMat converter = new OpenCVFrameConverter.ToMat();\n\n    try {\n        grabber.start();\n    } catch (FrameGrabber.Exception e) {\n        e.printStackTrace();\n    }\n\n    CanvasFrame canvas = new CanvasFrame(&quot;Object Detection&quot;);\n    int w = grabber.getImageWidth();\n    int h = grabber.getImageHeight();\n    canvas.setCanvasSize(w, h);\n\n    while (true) {\n        try {\n            frame = grabber.grab();\n        } catch (FrameGrabber.Exception e) {\n            e.printStackTrace();\n        }\n\n        //if a thread is null, create new thread\n        if (thread == null) {\n            thread = new Thread(() -&gt;\n            {\n                while (frame != null) {\n                    try {\n                        Mat rawImage = new Mat();\n\n                        //Flip the camera if opening front camera\n                        if (cameraPos.equals(&quot;front&quot;)) {\n                            Mat inputImage = converter.convert(frame);\n                            flip(inputImage, rawImage, 1);\n                        } else {\n                            rawImage = converter.convert(frame);\n                        }\n\n                        Mat resizeImage = new Mat();\n                        resize(rawImage, resizeImage, new Size(faceMaskIterator.yolowidth, faceMaskIterator.yoloheight));\n                        INDArray inputImage = loader.asMatrix(resizeImage);\n                        scaler.transform(inputImage);\n                        INDArray outputs = model.outputSingle(inputImage);\n                        org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer yout = (org.deeplearning4j.nn.layers.objdetect.Yolo2OutputLayer) model.getOutputLayer(0);\n                        List&lt;DetectedObject&gt; objs = yout.getPredictedObjects(outputs, detectionThreshold);\n                        YoloUtils.nms(objs, 0.4);\n                        rawImage = drawResults(objs, rawImage, w, h);\n                        canvas.showImage(converter.convert(rawImage));\n                    } catch (Exception e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n            });\n            thread.start();\n        }\n\n        KeyEvent t = null;\n        try {\n            t = canvas.waitKey(33);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        if ((t != null) &amp;&amp; (t.getKeyCode() == KeyEvent.VK_Q)) {\n            break;\n        }\n    }\n}\n\nprivate static Mat drawResults(List&lt;DetectedObject&gt; objects, Mat mat, int w, int h) {\n    for (DetectedObject obj : objects) {\n        double[] xy1 = obj.getTopLeftXY();\n        double[] xy2 = obj.getBottomRightXY();\n        String label = labels.get(obj.getPredictedClass());\n        int x1 = (int) Math.round(w * xy1[0] / faceMaskIterator.gridWidth);\n        int y1 = (int) Math.round(h * xy1[1] / faceMaskIterator.gridHeight);\n        int x2 = (int) Math.round(w * xy2[0] / faceMaskIterator.gridWidth);\n        int y2 = (int) Math.round(h * xy2[1] / faceMaskIterator.gridHeight);\n        //Draw bounding box\n        rectangle(mat, new Point(x1, y1), new Point(x2, y2), colormap[obj.getPredictedClass()], 2, 0, 0);\n        //Display label text\n        labeltext = label + &quot; &quot; + String.format(&quot;%.2f&quot;, obj.getConfidence() * 100) + &quot;%&quot;;\n        int[] baseline = {0};\n        Size textSize = getTextSize(labeltext, FONT_HERSHEY_DUPLEX, 1, 1, baseline);\n        rectangle(mat, new Point(x1 + 2, y2 - 2), new Point(x1 + 2 + textSize.get(0), y2 - 2 - textSize.get(1)), colormap[obj.getPredictedClass()], FILLED, 0, 0);\n        putText(mat, labeltext, new Point(x1 + 2, y2 - 2), FONT_HERSHEY_DUPLEX, 1, RGB(0, 0, 0));\n    }\n    return mat;\n}\n</code></pre>\n"},{"tags":["java","multithreading","compiler-optimization","instruction-reordering"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1538662377,"post_id":52648800,"comment_id":92229641,"body_markdown":"But that would be a bug, and probably fixed in the next release when discovered. Are you looking for historical issue reports, or open tickets or such? Or do you mean to say that this is a situation that can just happen and is not going to be resolved?","body":"But that would be a bug, and probably fixed in the next release when discovered. Are you looking for historical issue reports, or open tickets or such? Or do you mean to say that this is a situation that can just happen and is not going to be resolved?"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":6,"creation_date":1538662431,"post_id":52648800,"comment_id":92229674,"body_markdown":"It wouldn&#39;t be a bug. Instruction reordering can be visible from other threads if proper synchronization/memory barriers aren&#39;t in place.","body":"It wouldn&#39;t be a bug. Instruction reordering can be visible from other threads if proper synchronization/memory barriers aren&#39;t in place."},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1538662478,"post_id":52648800,"comment_id":92229705,"body_markdown":"Well, OP explicitly excluded undefined behaviour due to insufficient thread synchronization. Modulo that, it&#39;s a bug, no?","body":"Well, OP explicitly excluded undefined behaviour due to insufficient thread synchronization. Modulo that, it&#39;s a bug, no?"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1538662676,"post_id":52648800,"comment_id":92229842,"body_markdown":"And you are saying you can get undefined behaviour due to re-ordering even when thread synchronization has been applied properly? Do you have a reference for that?","body":"And you are saying you can get undefined behaviour due to re-ordering even when thread synchronization has been applied properly? Do you have a reference for that?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1538662928,"post_id":52648800,"comment_id":92230032,"body_markdown":"that would be tremendously hard to show IMO on `x86`, but a very nice question","body":"that would be tremendously hard to show IMO on <code>x86</code>, but a very nice question"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":4,"creation_date":1538662979,"post_id":52648800,"comment_id":92230063,"body_markdown":"@Thilo I take it that OP wants an example where improper synchronization triggers a problem caused specifically by instruction reordering, not one caused by non-atomicity of reads or some other synchronization issue. There are many specific reasons improper synchronization can be a problem; they&#39;re interested in this particular one.","body":"@Thilo I take it that OP wants an example where improper synchronization triggers a problem caused specifically by instruction reordering, not one caused by non-atomicity of reads or some other synchronization issue. There are many specific reasons improper synchronization can be a problem; they&#39;re interested in this particular one."},{"owner":{"account_id":3381296,"reputation":5075,"user_id":2838289,"display_name":"LuCio"},"score":0,"creation_date":1538663231,"post_id":52648800,"comment_id":92230249,"body_markdown":"Do you asking for an example which shows [this](https://docs.oracle.com/javase/specs/jls/se11/html/jls-17.html#d5e35122)?","body":"Do you asking for an example which shows <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-17.html#d5e35122\" rel=\"nofollow noreferrer\">this</a>?"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":1,"creation_date":1538663287,"post_id":52648800,"comment_id":92230288,"body_markdown":"A good answer might show bytecode with reordered instructions that is buggy, yet would in fact work if the instructions were in their original order. A more difficult demonstration could inspect the JIT&#39;s native code output and point out a reordering optimization it performs that causes failure.","body":"A good answer might show bytecode with reordered instructions that is buggy, yet would in fact work if the instructions were in their original order. A more difficult demonstration could inspect the JIT&#39;s native code output and point out a reordering optimization it performs that causes failure."},{"owner":{"account_id":49385,"reputation":93759,"user_id":147024,"display_name":"yole"},"score":4,"creation_date":1539193103,"post_id":52648800,"comment_id":92416479,"body_markdown":"How do you expect to see instruction reordering happening in the bytecode? It&#39;s something done by the JIT compiler. javac does not perform any instruction reordering.","body":"How do you expect to see instruction reordering happening in the bytecode? It&#39;s something done by the JIT compiler. javac does not perform any instruction reordering."},{"owner":{"account_id":1296166,"reputation":508,"user_id":1247166,"accept_rate":71,"display_name":"Martin"},"score":2,"creation_date":1539194121,"post_id":52648800,"comment_id":92416913,"body_markdown":"I found an example but for C++. Maybe you can translate it to Java: https://preshing.com/20120515/memory-reordering-caught-in-the-act/","body":"I found an example but for C++. Maybe you can translate it to Java: <a href=\"https://preshing.com/20120515/memory-reordering-caught-in-the-act/\" rel=\"nofollow noreferrer\">preshing.com/20120515/memory-reordering-caught-in-the-act</a>"},{"owner":{"account_id":98926,"reputation":18506,"user_id":267482,"accept_rate":70,"display_name":"bobah"},"score":0,"creation_date":1539334801,"post_id":52648800,"comment_id":92473587,"body_markdown":"Possible duplicate - https://stackoverflow.com/questions/35883354/is-there-any-instruction-reordering-done-by-the-hotspot-jit-compiler-that-can-be","body":"Possible duplicate - <a href=\"https://stackoverflow.com/questions/35883354/is-there-any-instruction-reordering-done-by-the-hotspot-jit-compiler-that-can-be\" title=\"is there any instruction reordering done by the hotspot jit compiler that can be\">stackoverflow.com/questions/35883354/&hellip;</a>"},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634166032,"post_id":52648800,"comment_id":122955875,"body_markdown":"It sounds like you&#39;re actually worried about memory reordering.  On non-x86 ISAs, memory ordering != asm program order, so instruction order is not really relevant to correctness without also having memory barriers or e.g. ARM64 `stlr` / `ldar` release-store / acquire-load instructions.  And even on x86, StoreLoad reordering happens, so you don&#39;t get sequentially-consistent execution.  Anyway, if lack of instruction reordering was all that was providing correctness on x86 without having told the JVM about the desired memory ordering, your code is broken on ARM.","body":"It sounds like you&#39;re actually worried about memory reordering.  On non-x86 ISAs, memory ordering != asm program order, so instruction order is not really relevant to correctness without also having memory barriers or e.g. ARM64 <code>stlr</code> / <code>ldar</code> release-store / acquire-load instructions.  And even on x86, StoreLoad reordering happens, so you don&#39;t get sequentially-consistent execution.  Anyway, if lack of instruction reordering was all that was providing correctness on x86 without having told the JVM about the desired memory ordering, your code is broken on ARM."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634166168,"post_id":52648800,"comment_id":122955899,"body_markdown":"Even an in-order pipeline can create LoadStore and LoadLoad reordering with scoreboarding of loads and hit-under-miss cache: [How is load-&gt;store reordering possible with in-order commit?](https://stackoverflow.com/q/52215031).  And basically all CPUs have StoreLoad reordering, although that&#39;s not a problem for acq/rel sync.  (This is memory reordering relative to asm instruction program order and/or execution order, not compile-time reordering of source vs. asm, but my point is that compile-time ordering is just one of many things that are necessary for correct / desired memory ordering)","body":"Even an in-order pipeline can create LoadStore and LoadLoad reordering with scoreboarding of loads and hit-under-miss cache: <a href=\"https://stackoverflow.com/q/52215031\">How is load-&gt;store reordering possible with in-order commit?</a>.  And basically all CPUs have StoreLoad reordering, although that&#39;s not a problem for acq/rel sync.  (This is memory reordering relative to asm instruction program order and/or execution order, not compile-time reordering of source vs. asm, but my point is that compile-time ordering is just one of many things that are necessary for correct / desired memory ordering)"},{"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":0,"creation_date":1634199718,"post_id":52648800,"comment_id":122962762,"body_markdown":"@PeterCordes Much of what you wrote is a bit too technical for me. Please take a look at my edit, and see if I&#39;ve captured the gist of what you are saying correctly.","body":"@PeterCordes Much of what you wrote is a bit too technical for me. Please take a look at my edit, and see if I&#39;ve captured the gist of what you are saying correctly."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634201387,"post_id":52648800,"comment_id":122963397,"body_markdown":"Yeah, that&#39;s basically the point.  In some ways that significantly changes the question, but if you want a memory-reordering demo that works even on x86, compile-time reordering (including JIT) is only way to break most uses of lock-free inter-thread communication (because usually acquire/release synchronization is all that&#39;s needed, and x86 does that for free, just based on asm program order).  [C++ How is release-and-acquire achieved on x86 only using MOV?](https://stackoverflow.com/q/60314179)","body":"Yeah, that&#39;s basically the point.  In some ways that significantly changes the question, but if you want a memory-reordering demo that works even on x86, compile-time reordering (including JIT) is only way to break most uses of lock-free inter-thread communication (because usually acquire/release synchronization is all that&#39;s needed, and x86 does that for free, just based on asm program order).  <a href=\"https://stackoverflow.com/q/60314179\">C++ How is release-and-acquire achieved on x86 only using MOV?</a>"},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1634201808,"post_id":52648800,"comment_id":122963582,"body_markdown":"The other major way to see memory reordering on x86 is with something that would demo StoreLoad reordering, like https://preshing.com/20120515/memory-reordering-caught-in-the-act/, which x86&#39;s asm memory model allows (i.e. at run-time for a fixed asm instruction order). In that case asm instruction order is *not* sufficient.  (Most other ISAs allow that *and more*: https://preshing.com/20120930/weak-vs-strong-memory-models/). Your previous wording ruled that out, and gave the impression that asm itself would be sequentially consistent, making compile-time reodering sound like the only problem.","body":"The other major way to see memory reordering on x86 is with something that would demo StoreLoad reordering, like <a href=\"https://preshing.com/20120515/memory-reordering-caught-in-the-act/\" rel=\"nofollow noreferrer\">preshing.com/20120515/memory-reordering-caught-in-the-act</a>, which x86&#39;s asm memory model allows (i.e. at run-time for a fixed asm instruction order). In that case asm instruction order is <i>not</i> sufficient.  (Most other ISAs allow that <i>and more</i>: <a href=\"https://preshing.com/20120930/weak-vs-strong-memory-models/\" rel=\"nofollow noreferrer\">preshing.com/20120930/weak-vs-strong-memory-models</a>). Your previous wording ruled that out, and gave the impression that asm itself would be sequentially consistent, making compile-time reodering sound like the only problem."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634202255,"post_id":52648800,"comment_id":122963755,"body_markdown":"Note that store forwarding means a thread always sees *it&#39;s own* stores in program order, i.e. CPUs (and compilers) must not break single-threaded code.  So StoreLoad reordering isn&#39;t the *only* effect of the store-buffer + store forwarding that&#39;s part of CPU memory models, including x86&#39;s.  Java may not let you type-pun like this, but if you do for example an `int` load that overlaps with a recent `char` store, you can potentially load a value that no other core can see.  (Or will ever see if another thread&#39;s int or char store also overlaps that and becomes globally visible first.)","body":"Note that store forwarding means a thread always sees <i>it&#39;s own</i> stores in program order, i.e. CPUs (and compilers) must not break single-threaded code.  So StoreLoad reordering isn&#39;t the <i>only</i> effect of the store-buffer + store forwarding that&#39;s part of CPU memory models, including x86&#39;s.  Java may not let you type-pun like this, but if you do for example an <code>int</code> load that overlaps with a recent <code>char</code> store, you can potentially load a value that no other core can see.  (Or will ever see if another thread&#39;s int or char store also overlaps that and becomes globally visible first.)"},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634202420,"post_id":52648800,"comment_id":122963806,"body_markdown":"[Globally Invisible load instructions](https://stackoverflow.com/a/50617986).  So it&#39;s not as simple as just &quot;x86 allows StoreLoad reordering&quot;.   Not that all this x86 detail is really relevant, mostly just bringing this up because you accepted an x86-specific answer.  That answer would show reordering on most ARM or AArch64 CPU even if the asm loads/stores matched Java source order.  But that&#39;s fine, running on x86 and seeing acq/rel sync broken (and checking the asm) does demo what you asked for: *instruction* reordering by whichever JIT was used.","body":"<a href=\"https://stackoverflow.com/a/50617986\">Globally Invisible load instructions</a>.  So it&#39;s not as simple as just &quot;x86 allows StoreLoad reordering&quot;.   Not that all this x86 detail is really relevant, mostly just bringing this up because you accepted an x86-specific answer.  That answer would show reordering on most ARM or AArch64 CPU even if the asm loads/stores matched Java source order.  But that&#39;s fine, running on x86 and seeing acq/rel sync broken (and checking the asm) does demo what you asked for: <i>instruction</i> reordering by whichever JIT was used."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1634202548,"post_id":52648800,"comment_id":122963846,"body_markdown":"TL:DR: as a &quot;how does it break&quot; question, this is fine.  But just be aware that x86 is pretty strongly ordered, and can make things happen to work (depending on lack of compile-time reordering) when they&#39;re not safe in the Java memory model, and *will* break on other ISAs.  So understanding when instruction reordering happens or not isn&#39;t relevant for reasoning about correctness of portable programs, only trying to hack cheap x86-only equivalents for C++ `memory_order_release` / `memory_order_acquire` in Java which only provides expensive `seq_cst` via `volatile`.  (Unless that&#39;s changed)","body":"TL:DR: as a &quot;how does it break&quot; question, this is fine.  But just be aware that x86 is pretty strongly ordered, and can make things happen to work (depending on lack of compile-time reordering) when they&#39;re not safe in the Java memory model, and <i>will</i> break on other ISAs.  So understanding when instruction reordering happens or not isn&#39;t relevant for reasoning about correctness of portable programs, only trying to hack cheap x86-only equivalents for C++ <code>memory_order_release</code> / <code>memory_order_acquire</code> in Java which only provides expensive <code>seq_cst</code> via <code>volatile</code>.  (Unless that&#39;s changed)"}],"answers":[{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1594949996,"creation_date":1539203481,"answer_id":52748354,"question_id":52648800,"body_markdown":"This demonstrates reordering of certain assignments, out of 1M iterations there is usually couple of printed lines.\r\n```java\r\npublic class App {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        for (int i = 0; i &lt; 1000_000; i++) {\r\n            final State state = new State();\r\n\r\n            // a = 0, b = 0, c = 0\r\n\r\n            // Write values\r\n            new Thread(() -&gt; {\r\n                state.a = 1;\r\n                // a = 1, b = 0, c = 0\r\n                state.b = 1;\r\n                // a = 1, b = 1, c = 0\r\n                state.c = state.a + 1;\r\n                // a = 1, b = 1, c = 2\r\n            }).start();\r\n\r\n            // Read values - this should never happen, right?\r\n            new Thread(() -&gt; {\r\n                // copy in reverse order so if we see some invalid state we know this is caused by reordering and not by a race condition in reads/writes\r\n                // we don&#39;t know if the reordered statements are the writes or reads (we will se it is writes later)\r\n                int tmpC = state.c;\r\n                int tmpB = state.b;\r\n                int tmpA = state.a;\r\n\r\n                if (tmpB == 1 &amp;&amp; tmpA == 0) {\r\n                    System.out.println(&quot;Hey wtf!! b == 1 &amp;&amp; a == 0&quot;);\r\n                }\r\n                if (tmpC == 2 &amp;&amp; tmpB == 0) {\r\n                    System.out.println(&quot;Hey wtf!! c == 2 &amp;&amp; b == 0&quot;);\r\n                }\r\n                if (tmpC == 2 &amp;&amp; tmpA == 0) {\r\n                    System.out.println(&quot;Hey wtf!! c == 2 &amp;&amp; a == 0&quot;);\r\n                }\r\n            }).start();\r\n\r\n        }\r\n        System.out.println(&quot;done&quot;);\r\n    }\r\n\r\n    static class State {\r\n        int a = 0;\r\n        int b = 0;\r\n        int c = 0;\r\n    }\r\n\r\n}\r\n```\r\nPrinting the assembly for the write lambda gets this output (among other..)\r\n\r\n                                                    ; {metadata(&#39;com/example/App$$Lambda$1&#39;)}\r\n      0x00007f73b51a0100: 752b                jne       7f73b51a012dh\r\n                                                    ;*invokeinterface run\r\n                                                    ; - java.lang.Thread::run@11 (line 748)\r\n    \r\n      0x00007f73b51a0102: 458b530c            mov       r10d,dword ptr [r11+0ch]\r\n                                                    ;*getfield arg$1\r\n                                                    ; - com.example.App$$Lambda$1/1831932724::run@1\r\n                                                    ; - java.lang.Thread::run@-1 (line 747)\r\n    \r\n      0x00007f73b51a0106: 43c744d41402000000  mov       dword ptr [r12+r10*8+14h],2h\r\n                                                    ;*putfield c\r\n                                                    ; - com.example.App::lambda$main$0@17 (line 18)\r\n                                                    ; - com.example.App$$Lambda$1/1831932724::run@4\r\n                                                    ; - java.lang.Thread::run@-1 (line 747)\r\n                                                    ; implicit exception: dispatches to 0x00007f73b51a01b5\r\n      0x00007f73b51a010f: 43c744d40c01000000  mov       dword ptr [r12+r10*8+0ch],1h\r\n                                                    ;*putfield a\r\n                                                    ; - com.example.App::lambda$main$0@2 (line 14)\r\n                                                    ; - com.example.App$$Lambda$1/1831932724::run@4\r\n                                                    ; - java.lang.Thread::run@-1 (line 747)\r\n    \r\n      0x00007f73b51a0118: 43c744d41001000000  mov       dword ptr [r12+r10*8+10h],1h\r\n                                                    ;*synchronization entry\r\n                                                    ; - java.lang.Thread::run@-1 (line 747)\r\n    \r\n      0x00007f73b51a0121: 4883c420            add       rsp,20h\r\n      0x00007f73b51a0125: 5d                  pop       rbp\r\n      0x00007f73b51a0126: 8505d41eb016        test      dword ptr [7f73cbca2000h],eax\r\n                                                    ;   {poll_return}\r\n      0x00007f73b51a012c: c3                  ret\r\n      0x00007f73b51a012d: 4181f885f900f8      cmp       r8d,0f800f985h\r\n\r\n\r\nI am not sure why the last `mov       dword ptr [r12+r10*8+10h],1h` is not marked with putfield b and line 16, but you can see the swapped assignment of b and c (c right after a).\r\n\r\n**EDIT:**\r\nBecause writes happen in order a,b,c and reads happen in reverse order c,b,a you should never see an invalid state unless the writes (or reads) are reordered. \r\n\r\nWrites performed by single cpu (or core) are visible in same order by all processors, see e.g. [this answer][1], which points to [Intel System Programming Guide][2] Volume 3 section 8.2.2.\r\n\r\n&gt; Writes by a single processor are observed in the same order by all processors.\r\n\r\n  [1]: https://stackoverflow.com/a/8883426/951609\r\n  [2]: https://software.intel.com/sites/default/files/managed/a4/60/325384-sdm-vol-3abcd.pdf","title":"How to demonstrate Java instruction reordering problems?","body":"<p>This demonstrates reordering of certain assignments, out of 1M iterations there is usually couple of printed lines.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n\n    public static void main(String[] args) {\n\n        for (int i = 0; i &lt; 1000_000; i++) {\n            final State state = new State();\n\n            // a = 0, b = 0, c = 0\n\n            // Write values\n            new Thread(() -&gt; {\n                state.a = 1;\n                // a = 1, b = 0, c = 0\n                state.b = 1;\n                // a = 1, b = 1, c = 0\n                state.c = state.a + 1;\n                // a = 1, b = 1, c = 2\n            }).start();\n\n            // Read values - this should never happen, right?\n            new Thread(() -&gt; {\n                // copy in reverse order so if we see some invalid state we know this is caused by reordering and not by a race condition in reads/writes\n                // we don't know if the reordered statements are the writes or reads (we will se it is writes later)\n                int tmpC = state.c;\n                int tmpB = state.b;\n                int tmpA = state.a;\n\n                if (tmpB == 1 &amp;&amp; tmpA == 0) {\n                    System.out.println(&quot;Hey wtf!! b == 1 &amp;&amp; a == 0&quot;);\n                }\n                if (tmpC == 2 &amp;&amp; tmpB == 0) {\n                    System.out.println(&quot;Hey wtf!! c == 2 &amp;&amp; b == 0&quot;);\n                }\n                if (tmpC == 2 &amp;&amp; tmpA == 0) {\n                    System.out.println(&quot;Hey wtf!! c == 2 &amp;&amp; a == 0&quot;);\n                }\n            }).start();\n\n        }\n        System.out.println(&quot;done&quot;);\n    }\n\n    static class State {\n        int a = 0;\n        int b = 0;\n        int c = 0;\n    }\n\n}\n</code></pre>\n<p>Printing the assembly for the write lambda gets this output (among other..)</p>\n<pre><code>                                                ; {metadata('com/example/App$$Lambda$1')}\n  0x00007f73b51a0100: 752b                jne       7f73b51a012dh\n                                                ;*invokeinterface run\n                                                ; - java.lang.Thread::run@11 (line 748)\n\n  0x00007f73b51a0102: 458b530c            mov       r10d,dword ptr [r11+0ch]\n                                                ;*getfield arg$1\n                                                ; - com.example.App$$Lambda$1/1831932724::run@1\n                                                ; - java.lang.Thread::run@-1 (line 747)\n\n  0x00007f73b51a0106: 43c744d41402000000  mov       dword ptr [r12+r10*8+14h],2h\n                                                ;*putfield c\n                                                ; - com.example.App::lambda$main$0@17 (line 18)\n                                                ; - com.example.App$$Lambda$1/1831932724::run@4\n                                                ; - java.lang.Thread::run@-1 (line 747)\n                                                ; implicit exception: dispatches to 0x00007f73b51a01b5\n  0x00007f73b51a010f: 43c744d40c01000000  mov       dword ptr [r12+r10*8+0ch],1h\n                                                ;*putfield a\n                                                ; - com.example.App::lambda$main$0@2 (line 14)\n                                                ; - com.example.App$$Lambda$1/1831932724::run@4\n                                                ; - java.lang.Thread::run@-1 (line 747)\n\n  0x00007f73b51a0118: 43c744d41001000000  mov       dword ptr [r12+r10*8+10h],1h\n                                                ;*synchronization entry\n                                                ; - java.lang.Thread::run@-1 (line 747)\n\n  0x00007f73b51a0121: 4883c420            add       rsp,20h\n  0x00007f73b51a0125: 5d                  pop       rbp\n  0x00007f73b51a0126: 8505d41eb016        test      dword ptr [7f73cbca2000h],eax\n                                                ;   {poll_return}\n  0x00007f73b51a012c: c3                  ret\n  0x00007f73b51a012d: 4181f885f900f8      cmp       r8d,0f800f985h\n</code></pre>\n<p>I am not sure why the last <code>mov       dword ptr [r12+r10*8+10h],1h</code> is not marked with putfield b and line 16, but you can see the swapped assignment of b and c (c right after a).</p>\n<p><strong>EDIT:</strong>\nBecause writes happen in order a,b,c and reads happen in reverse order c,b,a you should never see an invalid state unless the writes (or reads) are reordered.</p>\n<p>Writes performed by single cpu (or core) are visible in same order by all processors, see e.g. <a href=\"https://stackoverflow.com/a/8883426/951609\">this answer</a>, which points to <a href=\"https://software.intel.com/sites/default/files/managed/a4/60/325384-sdm-vol-3abcd.pdf\" rel=\"noreferrer\">Intel System Programming Guide</a> Volume 3 section 8.2.2.</p>\n<blockquote>\n<p>Writes by a single processor are observed in the same order by all processors.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1539418841,"creation_date":1539333859,"answer_id":52775627,"question_id":52648800,"body_markdown":"Test\n---\n\nI wrote a [JUnit 5][1] test that checks whether instruction reordering took place after two threads terminate.\n\n- The test must pass if no instruction reordering happened.\n- The test must fail if instruction reordering occurred.  \n\n‌\n\n    public class InstructionReorderingTest {\n    \n        static int x, y, a, b;\n    \n        @org.junit.jupiter.api.BeforeEach\n        public void init() {\n            x = y = a = b = 0;\n        }\n    \n        @org.junit.jupiter.api.Test\n        public void test() throws InterruptedException {\n            Thread threadA = new Thread(() -&gt; {\n                a = 1;\n                x = b;\n            });\n            Thread threadB = new Thread(() -&gt; {\n                b = 1;\n                y = a;\n            });\n    \n            threadA.start();\n            threadB.start();\n    \n            threadA.join();\n            threadB.join();\n    \n            org.junit.jupiter.api.Assertions.assertFalse(x == 0 &amp;&amp; y == 0);\n        }\n    \n    }\n\nResults\n---\n\nI ran the test [until it fails][2] several times. The results are as follows:\n\n    InstructionReorderingTest.test [*] (12s 222ms): 29144 total, 1 failed, 29143 passed.\n    InstructionReorderingTest.test [*] (26s 678ms): 69513 total, 1 failed, 69512 passed.\n    InstructionReorderingTest.test [*] (12s 161ms): 27878 total, 1 failed, 27877 passed.\n\nExplanation\n---\n\nThe results we expect are\n\n- `x = 0, y = 1`: `threadA` runs to completion before `threadB` starts.\n- `x = 1, y = 0`: `threadB` runs to completion before `threadA` starts.\n- `x = 1, y = 1`: their instructions are interleaved.\n\nNo one can expect `x = 0, y = 0`, which may happen as the test results showed.\n\n&gt; The actions in each thread have no dataflow dependence on each other, and accordingly can be executed out of order. (Even if they are executed in order, the timing by which caches are flushed to main memory can make it appear, from the perspective of `threadB`, that the assignments in `threadA` occurred in the opposite order.)\n&gt;\n&gt; [![enter image description here][3]][3]\n&gt; &lt;sub&gt;Java Concurrency in Practice, Brian Goetz&lt;/sub&gt;\n\n\n  [1]: https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api/5.3.1\n  [2]: https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#testKind\n  [3]: https://i.stack.imgur.com/935zX.png","title":"How to demonstrate Java instruction reordering problems?","body":"<h2>Test</h2>\n<p>I wrote a <a href=\"https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api/5.3.1\" rel=\"nofollow noreferrer\">JUnit 5</a> test that checks whether instruction reordering took place after two threads terminate.</p>\n<ul>\n<li>The test must pass if no instruction reordering happened.</li>\n<li>The test must fail if instruction reordering occurred.</li>\n</ul>\n<p>‌</p>\n<pre><code>public class InstructionReorderingTest {\n\n    static int x, y, a, b;\n\n    @org.junit.jupiter.api.BeforeEach\n    public void init() {\n        x = y = a = b = 0;\n    }\n\n    @org.junit.jupiter.api.Test\n    public void test() throws InterruptedException {\n        Thread threadA = new Thread(() -&gt; {\n            a = 1;\n            x = b;\n        });\n        Thread threadB = new Thread(() -&gt; {\n            b = 1;\n            y = a;\n        });\n\n        threadA.start();\n        threadB.start();\n\n        threadA.join();\n        threadB.join();\n\n        org.junit.jupiter.api.Assertions.assertFalse(x == 0 &amp;&amp; y == 0);\n    }\n\n}\n</code></pre>\n<h2>Results</h2>\n<p>I ran the test <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#testKind\" rel=\"nofollow noreferrer\">until it fails</a> several times. The results are as follows:</p>\n<pre><code>InstructionReorderingTest.test [*] (12s 222ms): 29144 total, 1 failed, 29143 passed.\nInstructionReorderingTest.test [*] (26s 678ms): 69513 total, 1 failed, 69512 passed.\nInstructionReorderingTest.test [*] (12s 161ms): 27878 total, 1 failed, 27877 passed.\n</code></pre>\n<h2>Explanation</h2>\n<p>The results we expect are</p>\n<ul>\n<li><code>x = 0, y = 1</code>: <code>threadA</code> runs to completion before <code>threadB</code> starts.</li>\n<li><code>x = 1, y = 0</code>: <code>threadB</code> runs to completion before <code>threadA</code> starts.</li>\n<li><code>x = 1, y = 1</code>: their instructions are interleaved.</li>\n</ul>\n<p>No one can expect <code>x = 0, y = 0</code>, which may happen as the test results showed.</p>\n<blockquote>\n<p>The actions in each thread have no dataflow dependence on each other, and accordingly can be executed out of order. (Even if they are executed in order, the timing by which caches are flushed to main memory can make it appear, from the perspective of <code>threadB</code>, that the assignments in <code>threadA</code> occurred in the opposite order.)</p>\n<p><a href=\"https://i.stack.imgur.com/935zX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/935zX.png\" alt=\"enter image description here\" /></a>\n<sub>Java Concurrency in Practice, Brian Goetz</sub></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4838384,"reputation":553,"user_id":3904219,"display_name":"user3904219"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1539444208,"creation_date":1539444208,"answer_id":52794463,"question_id":52648800,"body_markdown":"For single thread executions reordering is not a problem at all, because of Java Memory Model (JMM) (guarantee that any reads actions related to writes are total ordered) and cannot lead to unexpected results.\r\n\r\nFor concurrent execution, rules are completely different and things gets more complicated to understand (even by providing simple example which will raise even more questions). But even this are totally described by JMM with all corner cases, so, **unexpected results also forbidden**. Generally, forbidden if all barriers are placed right.\r\n\r\nFor better understanding reordering I strongly recommend [this][1] subject with plenty examples insides.\r\n\r\n\r\n  [1]: https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/","title":"How to demonstrate Java instruction reordering problems?","body":"<p>For single thread executions reordering is not a problem at all, because of Java Memory Model (JMM) (guarantee that any reads actions related to writes are total ordered) and cannot lead to unexpected results.</p>\n\n<p>For concurrent execution, rules are completely different and things gets more complicated to understand (even by providing simple example which will raise even more questions). But even this are totally described by JMM with all corner cases, so, <strong>unexpected results also forbidden</strong>. Generally, forbidden if all barriers are placed right.</p>\n\n<p>For better understanding reordering I strongly recommend <a href=\"https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/\" rel=\"nofollow noreferrer\">this</a> subject with plenty examples insides.</p>\n"}],"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":1,"up_vote_count":44,"accepted_answer_id":52748354,"answer_count":3,"score":43,"last_activity_date":1634199674,"creation_date":1538661999,"question_id":52648800,"body_markdown":"With Java instruction reordering the execution order of the code is changed by the JVM at compile time or run time, possibly causing unrelated statements to be executed out-of-order. \r\n\r\n**Edit:** [Instruction reordering can produce counter-intuitive results. Many CPU architectures can reorder the memory interactions of machine instructions which leads to similar unexpected results even if the compiler did not change the instruction order. Thus, the term **memory reordering** may be a better fit than instruction reordering.]\r\n\r\nSo my question is:\r\n\r\nCan someone provide an example Java program/snippet, that reliably shows an instruction reordering problem, that is not caused also by other synchronization issues ( such as caching/visibility or non-atomic r/w, as in my failed attempt at such a demo in [my previous question][1] )\r\n\r\nTo emphasize, I am not looking for examples of theoretical reordering issues. What I am looking for is a way to actually demonstrate them by seeing incorrect or unexpected results of a running program.\r\n\r\nBarring a faulty behavior example, just showing actual reordering happening in the assembly of a simple program could also be nice. \r\n\r\n  [1]: https://stackoverflow.com/questions/52647427/java-instruction-reordering-example-not-working","title":"How to demonstrate Java instruction reordering problems?","body":"<p>With Java instruction reordering the execution order of the code is changed by the JVM at compile time or run time, possibly causing unrelated statements to be executed out-of-order.</p>\n<p><strong>Edit:</strong> [Instruction reordering can produce counter-intuitive results. Many CPU architectures can reorder the memory interactions of machine instructions which leads to similar unexpected results even if the compiler did not change the instruction order. Thus, the term <strong>memory reordering</strong> may be a better fit than instruction reordering.]</p>\n<p>So my question is:</p>\n<p>Can someone provide an example Java program/snippet, that reliably shows an instruction reordering problem, that is not caused also by other synchronization issues ( such as caching/visibility or non-atomic r/w, as in my failed attempt at such a demo in <a href=\"https://stackoverflow.com/questions/52647427/java-instruction-reordering-example-not-working\">my previous question</a> )</p>\n<p>To emphasize, I am not looking for examples of theoretical reordering issues. What I am looking for is a way to actually demonstrate them by seeing incorrect or unexpected results of a running program.</p>\n<p>Barring a faulty behavior example, just showing actual reordering happening in the assembly of a simple program could also be nice.</p>\n"},{"tags":["java","android","caching","android-11"],"comments":[{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1634206634,"post_id":69566452,"comment_id":122965445,"body_markdown":"@Sachin - this is only delete own application cache. I already write my question title is that I want to delete other applications cache.","body":"@Sachin - this is only delete own application cache. I already write my question title is that I want to delete other applications cache."}],"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634199636,"creation_date":1634195522,"question_id":69566452,"body_markdown":"I search a lot but can&#39;t found any solution. https://developer.android.com/reference/android/os/storage/StorageManager#ACTION_CLEAR_APP_CACHE I tried with two codes but not working. \r\n\r\nthis is first one:\r\n\r\n    Intent intent = new Intent();\r\n    intent.setAction(ACTION_CLEAR_APP_CACHE);\r\n    startActivityForResult(intent,REQUEST_CLEAR_APP_CACHE);\r\n    \r\nAnd this is second one:\r\n\r\n    Intent storageIntent = new Intent();\r\n    storageIntent.setAction(ACTION_MANAGE_STORAGE);\r\n    startActivity(storageIntent);\r\nthis is just open only download folder to free some space. \r\n\r\nif anyone have solution please post. Thanks in advance.\r\n ","title":"How to clear other apps cache programmatically in android 11?","body":"<p>I search a lot but can't found any solution. <a href=\"https://developer.android.com/reference/android/os/storage/StorageManager#ACTION_CLEAR_APP_CACHE\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/storage/StorageManager#ACTION_CLEAR_APP_CACHE</a> I tried with two codes but not working.</p>\n<p>this is first one:</p>\n<pre><code>Intent intent = new Intent();\nintent.setAction(ACTION_CLEAR_APP_CACHE);\nstartActivityForResult(intent,REQUEST_CLEAR_APP_CACHE);\n</code></pre>\n<p>And this is second one:</p>\n<pre><code>Intent storageIntent = new Intent();\nstorageIntent.setAction(ACTION_MANAGE_STORAGE);\nstartActivity(storageIntent);\n</code></pre>\n<p>this is just open only download folder to free some space.</p>\n<p>if anyone have solution please post. Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","aop","aspectj"],"comments":[{"owner":{"account_id":15369314,"reputation":384,"user_id":11087815,"display_name":"S B"},"score":0,"creation_date":1633021065,"post_id":69387152,"comment_id":122657270,"body_markdown":"Please provide more details on expected output ? Do you want to identify every line of execution of parentMethod implementation ?","body":"Please provide more details on expected output ? Do you want to identify every line of execution of parentMethod implementation ?"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634199099,"creation_date":1634199099,"answer_id":69567232,"question_id":69387152,"body_markdown":"I think we are not talking about inheritance, so you should not call it a &quot;parent method&quot;. You simply mean a method calling other methods, do you not? Anyway, concerning your question:\r\n\r\nWith Spring AOP you have limited means of expressing control flow pointcuts, compared to native AspectJ&#39;s `cflow()` and `cflowbelow()` pointcuts. In your case and if you want to stick with proxy-based Spring AOP, a `ControlFlowPointcut` might be enough, because you do not need any method name patterns but seem to have a fixed method name as your target. For more information, see:\r\n  * Section &quot;update 2&quot; of [this answer](https://stackoverflow.com/a/66649082/1082681) for basic pointers to resources concerning `ControlFlowPointcut`.\r\n  * [This answer](https://stackoverflow.com/a/68434674/1082681), if you want to match method patterns with a custom `MultiMethodControlFlowPointcut` (currently still unsupported by Spring out of the box).\r\n  * Spring manual chapter [&quot;Using AspectJ with Spring Applications&quot;](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-using-aspectj) explains how to configure Spring to use native AspectJ via load-time weaving (LTW).\r\n  * If you decide to go the native AspectJ LTW way, the AspectJ manual section about [control-flow-based pointcuts](https://www.eclipse.org/aspectj/doc/next/progguide/semantics-pointcuts.html#d0e5393) briefly explains `cflow` and `cflowbelow`.","title":"How to define a Pointcut to pick out all methods invoked by the specified method?","body":"<p>I think we are not talking about inheritance, so you should not call it a &quot;parent method&quot;. You simply mean a method calling other methods, do you not? Anyway, concerning your question:</p>\n<p>With Spring AOP you have limited means of expressing control flow pointcuts, compared to native AspectJ's <code>cflow()</code> and <code>cflowbelow()</code> pointcuts. In your case and if you want to stick with proxy-based Spring AOP, a <code>ControlFlowPointcut</code> might be enough, because you do not need any method name patterns but seem to have a fixed method name as your target. For more information, see:</p>\n<ul>\n<li>Section &quot;update 2&quot; of <a href=\"https://stackoverflow.com/a/66649082/1082681\">this answer</a> for basic pointers to resources concerning <code>ControlFlowPointcut</code>.</li>\n<li><a href=\"https://stackoverflow.com/a/68434674/1082681\">This answer</a>, if you want to match method patterns with a custom <code>MultiMethodControlFlowPointcut</code> (currently still unsupported by Spring out of the box).</li>\n<li>Spring manual chapter <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-using-aspectj\" rel=\"nofollow noreferrer\">&quot;Using AspectJ with Spring Applications&quot;</a> explains how to configure Spring to use native AspectJ via load-time weaving (LTW).</li>\n<li>If you decide to go the native AspectJ LTW way, the AspectJ manual section about <a href=\"https://www.eclipse.org/aspectj/doc/next/progguide/semantics-pointcuts.html#d0e5393\" rel=\"nofollow noreferrer\">control-flow-based pointcuts</a> briefly explains <code>cflow</code> and <code>cflowbelow</code>.</li>\n</ul>\n"}],"owner":{"account_id":6124168,"reputation":727,"user_id":7418355,"display_name":"Tabish Mir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69567232,"answer_count":1,"score":0,"last_activity_date":1634199099,"creation_date":1632983063,"question_id":69387152,"body_markdown":"Is there any way to define a pointcut in AspectJ that would pick out each method directly executed by a specified method? \r\n\r\nFor example if there is a `parentMethod()` in `classA` that looks like:\r\n```java\r\npublic void parentMethod() {\r\n    classB.methodX();\r\n    classC.methodY();\r\n}\r\n```\r\nI want to define a pointcut that uses just the information about `parentMethod` to pick out whenever its invoked methods, `methodX()` and `methodY()`, are executed. Is there a way to achieve this using AspectJ pointcuts?\r\n","title":"How to define a Pointcut to pick out all methods invoked by the specified method?","body":"<p>Is there any way to define a pointcut in AspectJ that would pick out each method directly executed by a specified method?</p>\n<p>For example if there is a <code>parentMethod()</code> in <code>classA</code> that looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void parentMethod() {\n    classB.methodX();\n    classC.methodY();\n}\n</code></pre>\n<p>I want to define a pointcut that uses just the information about <code>parentMethod</code> to pick out whenever its invoked methods, <code>methodX()</code> and <code>methodY()</code>, are executed. Is there a way to achieve this using AspectJ pointcuts?</p>\n"},{"tags":["java","testing","rest-assured"],"comments":[{"owner":{"account_id":6836018,"reputation":803,"user_id":5257981,"display_name":"kaweesha"},"score":2,"creation_date":1602052493,"post_id":64238047,"comment_id":113593835,"body_markdown":"Please add the complete response body to the question.","body":"Please add the complete response body to the question."},{"owner":{"account_id":3850681,"reputation":2684,"user_id":3190953,"accept_rate":62,"display_name":"Wilfred Clement"},"score":1,"creation_date":1602096941,"post_id":64238047,"comment_id":113615695,"body_markdown":"They key `result` has a `:` in the response, either the response is incorrect which you will have to check with the developers or you could use `path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)`","body":"They key <code>result</code> has a <code>:</code> in the response, either the response is incorrect which you will have to check with the developers or you could use <code>path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)</code>"},{"owner":{"account_id":12848279,"reputation":1,"user_id":9293988,"display_name":"Kos"},"score":0,"creation_date":1602134080,"post_id":64238047,"comment_id":113625165,"body_markdown":"@WilfredClement Response body comes from tutorial so it should be properly.\nI&#39;ve changed `path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)` as you mentioned, but exception still occurs.","body":"@WilfredClement Response body comes from tutorial so it should be properly. I&#39;ve changed <code>path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)</code> as you mentioned, but exception still occurs."},{"owner":{"account_id":6836018,"reputation":803,"user_id":5257981,"display_name":"kaweesha"},"score":1,"creation_date":1602930756,"post_id":64238047,"comment_id":113879110,"body_markdown":"@Kos - I agree with @WilfredClement. The `:` in `result:` is a mistake. But, it I ran the complete above code with `path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)`. And I got the expected output correctly. So I think the issue is in imports. Add only `io.restassured.specification.RequestSpecification`, `java.util.ArrayList` and `io.restassured.RestAssured.when` as imports and rerun the method. I think, you will get the expected output. If this doesn&#39;t work please add the imports and your rest assured, java versions to the question.","body":"@Kos - I agree with @WilfredClement. The <code>:</code> in <code>result:</code> is a mistake. But, it I ran the complete above code with <code>path(&quot;&#39;result:&#39;.statements.AMOUNT&quot;)</code>. And I got the expected output correctly. So I think the issue is in imports. Add only <code>io.restassured.specification.RequestSpecification</code>, <code>java.util.ArrayList</code> and <code>io.restassured.RestAssured.when</code> as imports and rerun the method. I think, you will get the expected output. If this doesn&#39;t work please add the imports and your rest assured, java versions to the question."},{"owner":{"account_id":12848279,"reputation":1,"user_id":9293988,"display_name":"Kos"},"score":0,"creation_date":1603024738,"post_id":64238047,"comment_id":113899550,"body_markdown":"@kaweesha thank you for your answer. I added your imports, but issue still occurs. My rest assured version is 4.3.1 and I use Java version 8 Update 261.\nMy current imports are:\n`import io.restassured.specification.RequestSpecification;\nimport java.util.ArrayList;\nimport java.util.concurrent.TimeUnit;\nimport static io.restassured.RestAssured.*;`","body":"@kaweesha thank you for your answer. I added your imports, but issue still occurs. My rest assured version is 4.3.1 and I use Java version 8 Update 261. My current imports are: <code>import io.restassured.specification.RequestSpecification; import java.util.ArrayList; import java.util.concurrent.TimeUnit; import static io.restassured.RestAssured.*;</code>"},{"owner":{"account_id":6836018,"reputation":803,"user_id":5257981,"display_name":"kaweesha"},"score":0,"creation_date":1603029942,"post_id":64238047,"comment_id":113900914,"body_markdown":"How do you run this method? Can you completely isolate this method and run?","body":"How do you run this method? Can you completely isolate this method and run?"}],"answers":[{"tags":[],"owner":{"account_id":23028537,"reputation":11,"user_id":17148379,"display_name":"Guido Dulos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634198638,"creation_date":1634195380,"answer_id":69566429,"question_id":64238047,"body_markdown":"The url is a php and the contenttype is not json but HTML. \r\npath(...)  only works with json.\r\nYou can use the idea for another URL where the contenttype is json.\r\nI used this one: https://dummy.restapiexample.com/api/v1/employees with this code: \r\n\r\n    public static void getSpecificPartOfResponseBody(){\r\n\r\n        ArrayList&lt;Integer&gt; ages;\r\n        ages = when().get(url).then().extract().path(&quot;data.employee_age&quot;);\r\n\r\n\r\n        int sumOfAll=0;\r\n        for(Integer a :ages){\r\n\r\n            System.out.println(&quot;The age value fetched is &quot;+a);\r\n            sumOfAll=sumOfAll+ a;\r\n        }\r\n        System.out.println(&quot;The total amount of ages is &quot; + sumOfAll);\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CkVbw.png","title":"Rest Assured execption class io.restassured.path.xml.XmlPath cannot be cast to class java.util.ArrayList error","body":"<p>The url is a php and the contenttype is not json but HTML.\npath(...)  only works with json.\nYou can use the idea for another URL where the contenttype is json.\nI used this one: <a href=\"https://dummy.restapiexample.com/api/v1/employees\" rel=\"nofollow noreferrer\">https://dummy.restapiexample.com/api/v1/employees</a> with this code:</p>\n<pre><code>public static void getSpecificPartOfResponseBody(){\n\n    ArrayList&lt;Integer&gt; ages;\n    ages = when().get(url).then().extract().path(&quot;data.employee_age&quot;);\n\n\n    int sumOfAll=0;\n    for(Integer a :ages){\n\n        System.out.println(&quot;The age value fetched is &quot;+a);\n        sumOfAll=sumOfAll+ a;\n    }\n    System.out.println(&quot;The total amount of ages is &quot; + sumOfAll);\n}\n</code></pre>\n"}],"owner":{"account_id":12848279,"reputation":1,"user_id":9293988,"display_name":"Kos"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4059,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634198638,"creation_date":1602050337,"question_id":64238047,"body_markdown":"Im working on Rest Assured project and I want to get speciific part of response body\r\nbut Im getting exception:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: class io.restassured.path.xml.XmlPath cannot be cast to class java.util.ArrayList (io.restassured.path.xml.XmlPath is in unnamed module of loader &#39;app&#39;; java.util.ArrayList is in module java.base of loader &#39;bootstrap&#39;)\r\n\r\nThe code is taken from tutorial website so it should works correctly. Can anyone help? \r\n\r\n     public static void getSpecificPartOfResponseBody(){\r\n            ArrayList&lt;String&gt; amounts = when().get(url).then().extract().path(&quot;result.statements.AMOUNT&quot;) ;\r\n            int sumOfAll=0;\r\n            for(String a:amounts){\r\n\r\n                System.out.println(&quot;The amount value fetched is &quot;+a);\r\n                sumOfAll=sumOfAll+Integer.valueOf(a);\r\n            }\r\n            System.out.println(&quot;The total amount is &quot;+sumOfAll);\r\n\r\n    }\r\n\r\n \r\nresponse body:\r\n\r\n    {&quot;result:&quot;:{&quot;statements&quot;:[{&quot;TRANSACTION_ID&quot;:&quot;12&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-16&quot;,&quot;AMOUNT&quot;:&quot;500&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;D&quot;,&quot;DESCRIPTION&quot;:&quot;Initial Deposit&quot;},{&quot;TRANSACTION_ID&quot;:&quot;23&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-17&quot;,&quot;AMOUNT&quot;:&quot;14&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;yi Tansfer From 14&quot;},{&quot;TRANSACTION_ID&quot;:&quot;25&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-18&quot;,&quot;AMOUNT&quot;:&quot;1&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;hgg Tansfer From 15&quot;},{&quot;TRANSACTION_ID&quot;:&quot;49745&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2017-04-13&quot;,&quot;AMOUNT&quot;:&quot;0&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;0 Tansfer From 1&quot;},{&quot;TRANSACTION_ID&quot;:&quot;94867&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2018-11-21&quot;,&quot;AMOUNT&quot;:&quot;500&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;cash Tansfer From 14&quot;}]},&quot;message&quot;:{&quot;ErrorCode:&quot;:0,&quot;ErrorMsg:&quot;:&quot;Success&quot;}}","title":"Rest Assured execption class io.restassured.path.xml.XmlPath cannot be cast to class java.util.ArrayList error","body":"<p>Im working on Rest Assured project and I want to get speciific part of response body\nbut Im getting exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class io.restassured.path.xml.XmlPath cannot be cast to class java.util.ArrayList (io.restassured.path.xml.XmlPath is in unnamed module of loader 'app'; java.util.ArrayList is in module java.base of loader 'bootstrap')\n</code></pre>\n<p>The code is taken from tutorial website so it should works correctly. Can anyone help?</p>\n<pre><code> public static void getSpecificPartOfResponseBody(){\n        ArrayList&lt;String&gt; amounts = when().get(url).then().extract().path(&quot;result.statements.AMOUNT&quot;) ;\n        int sumOfAll=0;\n        for(String a:amounts){\n\n            System.out.println(&quot;The amount value fetched is &quot;+a);\n            sumOfAll=sumOfAll+Integer.valueOf(a);\n        }\n        System.out.println(&quot;The total amount is &quot;+sumOfAll);\n\n}\n</code></pre>\n<p>response body:</p>\n<pre><code>{&quot;result:&quot;:{&quot;statements&quot;:[{&quot;TRANSACTION_ID&quot;:&quot;12&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-16&quot;,&quot;AMOUNT&quot;:&quot;500&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;D&quot;,&quot;DESCRIPTION&quot;:&quot;Initial Deposit&quot;},{&quot;TRANSACTION_ID&quot;:&quot;23&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-17&quot;,&quot;AMOUNT&quot;:&quot;14&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;yi Tansfer From 14&quot;},{&quot;TRANSACTION_ID&quot;:&quot;25&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2013-11-18&quot;,&quot;AMOUNT&quot;:&quot;1&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;hgg Tansfer From 15&quot;},{&quot;TRANSACTION_ID&quot;:&quot;49745&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2017-04-13&quot;,&quot;AMOUNT&quot;:&quot;0&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;0 Tansfer From 1&quot;},{&quot;TRANSACTION_ID&quot;:&quot;94867&quot;,&quot;ACCOUNT_NO&quot;:&quot;1&quot;,&quot;DATE_OF_TRANSACTION&quot;:&quot;2018-11-21&quot;,&quot;AMOUNT&quot;:&quot;500&quot;,&quot;TRANSACTION_TYPE&quot;:&quot;t&quot;,&quot;DESCRIPTION&quot;:&quot;cash Tansfer From 14&quot;}]},&quot;message&quot;:{&quot;ErrorCode:&quot;:0,&quot;ErrorMsg:&quot;:&quot;Success&quot;}}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1634185743,"post_id":69565060,"comment_id":122958887,"body_markdown":"`==` is comparing it&#39;s memory reference, so if both instances are pointing to the same location in memory, they have to be equal, otherwise it will compare the properties to ascertain if the two objects are otherwise comparably the same","body":"<code>==</code> is comparing it&#39;s memory reference, so if both instances are pointing to the same location in memory, they have to be equal, otherwise it will compare the properties to ascertain if the two objects are otherwise comparably the same"},{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":1,"creation_date":1634199712,"post_id":69565060,"comment_id":122962759,"body_markdown":"Interesting tidbit: this specific `if` check and return is just an optimization: if you left it out, the code would compare all the values and still return `true` (assuming the rest of the `equals` method is written correctly).","body":"Interesting tidbit: this specific <code>if</code> check and return is just an optimization: if you left it out, the code would compare all the values and still return <code>true</code> (assuming the rest of the <code>equals</code> method is written correctly)."}],"answers":[{"tags":[],"owner":{"account_id":6446534,"reputation":137,"user_id":4994864,"display_name":"Neeraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634186393,"creation_date":1634186393,"answer_id":69565164,"question_id":69565060,"body_markdown":"`this` and `compared` are both references to objects in your case. \r\n\r\nIn Java each object resides at a particular memory location. Two different objects can NOT have the same memory location at the same time. \r\n\r\nThe equality operator or &quot;==&quot; compares two objects based on whether they are located at the same memory address.  So &quot;==&quot; operator will return true only if two object reference it is comparing represent exactly same object otherwise &quot;==&quot; will return false.\r\n\r\nAlso note that `==` operator is not the same as the `equals` method on the class.  \r\n\r\nYou can read more at: https://javarevisited.blogspot.com/2012/12/difference-between-equals-method-and-equality-operator-java.html#ixzz79Ev3iZ5P","title":"What does comparing two objects with &#39;==&#39; actually do?","body":"<p><code>this</code> and <code>compared</code> are both references to objects in your case.</p>\n<p>In Java each object resides at a particular memory location. Two different objects can NOT have the same memory location at the same time.</p>\n<p>The equality operator or &quot;==&quot; compares two objects based on whether they are located at the same memory address.  So &quot;==&quot; operator will return true only if two object reference it is comparing represent exactly same object otherwise &quot;==&quot; will return false.</p>\n<p>Also note that <code>==</code> operator is not the same as the <code>equals</code> method on the class.</p>\n<p>You can read more at: <a href=\"https://javarevisited.blogspot.com/2012/12/difference-between-equals-method-and-equality-operator-java.html#ixzz79Ev3iZ5P\" rel=\"nofollow noreferrer\">https://javarevisited.blogspot.com/2012/12/difference-between-equals-method-and-equality-operator-java.html#ixzz79Ev3iZ5P</a></p>\n"},{"tags":[],"owner":{"account_id":20040046,"reputation":46,"user_id":14690918,"display_name":"Random Guy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634198403,"creation_date":1634198403,"answer_id":69567060,"question_id":69565060,"body_markdown":"**==** : compare memory address\r\n\r\n**.equals()** : compare values(use for Object type)","title":"What does comparing two objects with &#39;==&#39; actually do?","body":"<p><strong>==</strong> : compare memory address</p>\n<p><strong>.equals()</strong> : compare values(use for Object type)</p>\n"}],"owner":{"account_id":14533806,"reputation":21,"user_id":10497848,"display_name":"Praveen KG"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634222476,"answer_count":2,"score":1,"last_activity_date":1634198403,"creation_date":1634185481,"question_id":69565060,"body_markdown":"First time posting here in a while, so I am very sorry if I made any mistakes.\r\n\r\nI am learning java from MOOC fi. I am currently in week 5 and it mentions here that to compare two objects, you have to do the following:\r\n\r\n    public class SimpleDate {\r\n        private int day;\r\n        private int month;\r\n        private int year;\r\n    \r\n        public SimpleDate(int day, int month, int year) {\r\n            this.day = day;\r\n            this.month = month;\r\n            this.year = year;\r\n        }\r\n    \r\n        public boolean equals(Object compared) {\r\n            // if the variables are located in the same position, they are equal\r\n            if (this == compared) {\r\n                return true;\r\n            }\r\n    \r\n            // if the type of the compared object is not SimpleDate, the objects are not equal\r\n            if (!(compared instanceof SimpleDate)) {\r\n                return false;\r\n            }\r\n    \r\n            // convert the Object type compared object\r\n            // into a SimpleDate type object called comparedSimpleDate\r\n            SimpleDate comparedSimpleDate = (SimpleDate) compared;\r\n    \r\n            // if the values of the object variables are the same, the objects are equal\r\n            if (this.day == comparedSimpleDate.day &amp;&amp;\r\n                this.month == comparedSimpleDate.month &amp;&amp;\r\n                this.year == comparedSimpleDate.year) {\r\n                return true;\r\n            }\r\n    \r\n            // otherwise the objects are not equal\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return this.day + &quot;.&quot; + this.month + &quot;.&quot; + this.year;\r\n        }\r\n    }\r\n\r\nSo I am confused, what does:\r\n\r\n    public boolean equals(Object compared) {\r\n        // if the variables are located in the same position, they are equal\r\n        if (this == compared) {\r\n            return true;\r\n        }\r\n\r\nthe above code actually do? What does located in same position mean?\r\n\r\nIsn&#39;t it better to just check if an object is of a particular class type and then compare their instance variables to see if they are equal?","title":"What does comparing two objects with &#39;==&#39; actually do?","body":"<p>First time posting here in a while, so I am very sorry if I made any mistakes.</p>\n<p>I am learning java from MOOC fi. I am currently in week 5 and it mentions here that to compare two objects, you have to do the following:</p>\n<pre><code>public class SimpleDate {\n    private int day;\n    private int month;\n    private int year;\n\n    public SimpleDate(int day, int month, int year) {\n        this.day = day;\n        this.month = month;\n        this.year = year;\n    }\n\n    public boolean equals(Object compared) {\n        // if the variables are located in the same position, they are equal\n        if (this == compared) {\n            return true;\n        }\n\n        // if the type of the compared object is not SimpleDate, the objects are not equal\n        if (!(compared instanceof SimpleDate)) {\n            return false;\n        }\n\n        // convert the Object type compared object\n        // into a SimpleDate type object called comparedSimpleDate\n        SimpleDate comparedSimpleDate = (SimpleDate) compared;\n\n        // if the values of the object variables are the same, the objects are equal\n        if (this.day == comparedSimpleDate.day &amp;&amp;\n            this.month == comparedSimpleDate.month &amp;&amp;\n            this.year == comparedSimpleDate.year) {\n            return true;\n        }\n\n        // otherwise the objects are not equal\n        return false;\n    }\n\n    @Override\n    public String toString() {\n        return this.day + &quot;.&quot; + this.month + &quot;.&quot; + this.year;\n    }\n}\n</code></pre>\n<p>So I am confused, what does:</p>\n<pre><code>public boolean equals(Object compared) {\n    // if the variables are located in the same position, they are equal\n    if (this == compared) {\n        return true;\n    }\n</code></pre>\n<p>the above code actually do? What does located in same position mean?</p>\n<p>Isn't it better to just check if an object is of a particular class type and then compare their instance variables to see if they are equal?</p>\n"},{"tags":["java","apache-spark","spark-graphx"],"owner":{"account_id":11762207,"reputation":117,"user_id":8607900,"display_name":"Aavash Bhandari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634198296,"creation_date":1634198296,"question_id":69567038,"body_markdown":"I have used the GraphX API in java and created a graph from the EdgeRDD and the VertexRDD. Initially the RDDs were created using the dataset. If I run the below code I see no error. However, I cannot verify that the code is running and it is partitioning the graph using the partitioning strategy.\r\n```\r\nJavaRDD&lt;Edge&lt;Double&gt;&gt; edgeRDD = javaSparkContext.parallelize(edges);\r\nJavaRDD&lt;Tuple2&lt;Object, String&gt;&gt; nodeRDD = javaSparkContext.parallelize(nodes);\r\nGraph&lt;String, Double&gt; graph = Graph.apply(nodeRDD.rdd(), edgeRDD.rdd(), &quot;&quot;, StorageLevel.MEMORY_ONLY(),\r\n\t\t\t\tStorageLevel.MEMORY_ONLY(), stringTag, doubleTag);\r\n//This graph.partitionBy method\r\ngraph.partitionBy(PartitionStrategy.EdgePartition2D$.MODULE$, 3);\r\n```\r\n\r\nIs there any way to verify that the EdgePartition2D has worked and it created 3 partitions. Or may be print the 3 subgraphs after running this method?\r\nI have been running these codes on a standalone machine for now.","title":"How to verify the graph.PartitionStrategy has worked or not?","body":"<p>I have used the GraphX API in java and created a graph from the EdgeRDD and the VertexRDD. Initially the RDDs were created using the dataset. If I run the below code I see no error. However, I cannot verify that the code is running and it is partitioning the graph using the partitioning strategy.</p>\n<pre><code>JavaRDD&lt;Edge&lt;Double&gt;&gt; edgeRDD = javaSparkContext.parallelize(edges);\nJavaRDD&lt;Tuple2&lt;Object, String&gt;&gt; nodeRDD = javaSparkContext.parallelize(nodes);\nGraph&lt;String, Double&gt; graph = Graph.apply(nodeRDD.rdd(), edgeRDD.rdd(), &quot;&quot;, StorageLevel.MEMORY_ONLY(),\n                StorageLevel.MEMORY_ONLY(), stringTag, doubleTag);\n//This graph.partitionBy method\ngraph.partitionBy(PartitionStrategy.EdgePartition2D$.MODULE$, 3);\n</code></pre>\n<p>Is there any way to verify that the EdgePartition2D has worked and it created 3 partitions. Or may be print the 3 subgraphs after running this method?\nI have been running these codes on a standalone machine for now.</p>\n"},{"tags":["java","arrays","list","hashmap","treemap"],"comments":[{"owner":{"account_id":11683,"reputation":1438189,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1634133455,"post_id":69556779,"comment_id":122944730,"body_markdown":"You might want to look at the `MultiMap` collections in Guava: https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Multimap.html","body":"You might want to look at the <code>MultiMap</code> collections in Guava: <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Multimap.html\" rel=\"nofollow noreferrer\">guava.dev/releases/23.0/api/docs/com/google/common/collect/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299866,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634198013,"creation_date":1634133390,"answer_id":69556866,"question_id":69556779,"body_markdown":"You could indeed use a `Map&lt;Integer, List&lt;UUID&gt;&gt;` as you suggested. You can then use [`computeIfAbsent`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-) to create an empty map if the key isn&#39;t there, and add the value to the key:\r\n\r\n```java\r\nfinal Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();\r\n\r\naddToMap(int key, String value) {\r\n    mapppp.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\r\n}\r\n```","title":"How to add List element to map by key?","body":"<p>You could indeed use a <code>Map&lt;Integer, List&lt;UUID&gt;&gt;</code> as you suggested. You can then use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>computeIfAbsent</code></a> to create an empty map if the key isn't there, and add the value to the key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();\n\naddToMap(int key, String value) {\n    mapppp.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\n}\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1634198013,"creation_date":1634132982,"question_id":69556779,"body_markdown":"I use the following approach for sorting items by key:\r\n\r\n```\r\nfinal Map&lt;Integer, UUID&gt; map = new TreeMap&lt;&gt;();\r\n\r\n\r\nwhile (rowIterator.hasNext()) {\r\n\r\n  // Add Items to the TreeMap\r\n  mapppp.put(1, UUID.fromString(&quot;610e9040-840c-48c5-aa64-f193ed896133&quot;));\r\n  mapppp.put(2, UUID.fromString(&quot;4ff0055d-49a9-4e93-b960-ff70ae1007ce&quot;));\r\n  mapppp.put(3, UUID.fromString(&quot;751c79ce-445c-406a-9787-a754857a259c&quot;));\r\n  mapppp.put(3, UUID.fromString(&quot;dc721d77-509d-4bd3-8004-43a8daab5840&quot;));  \r\n  mapppp.put(3, UUID.fromString(&quot;4ca16aff-5a30-4638-8b38-3a93eddb0fc5&quot;));  \r\n  mapppp.put(3, UUID.fromString(&quot;e4be360b-cccb-42a2-b416-eb4bb623b49f&quot;));            \r\n}\r\n```\r\n\r\nHowever, I cannot add another element for the repeated key value (for example 3) and I think I should implement something like `Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();` rather than `Map&lt;Integer, UUID&gt; map = new TreeMap&lt;&gt;();`. However, I could not find a proper solution for that. So, how can I manage the repeated key values to be added to the map? ","title":"How to add List element to map by key?","body":"<p>I use the following approach for sorting items by key:</p>\n<pre><code>final Map&lt;Integer, UUID&gt; map = new TreeMap&lt;&gt;();\n\n\nwhile (rowIterator.hasNext()) {\n\n  // Add Items to the TreeMap\n  mapppp.put(1, UUID.fromString(&quot;610e9040-840c-48c5-aa64-f193ed896133&quot;));\n  mapppp.put(2, UUID.fromString(&quot;4ff0055d-49a9-4e93-b960-ff70ae1007ce&quot;));\n  mapppp.put(3, UUID.fromString(&quot;751c79ce-445c-406a-9787-a754857a259c&quot;));\n  mapppp.put(3, UUID.fromString(&quot;dc721d77-509d-4bd3-8004-43a8daab5840&quot;));  \n  mapppp.put(3, UUID.fromString(&quot;4ca16aff-5a30-4638-8b38-3a93eddb0fc5&quot;));  \n  mapppp.put(3, UUID.fromString(&quot;e4be360b-cccb-42a2-b416-eb4bb623b49f&quot;));            \n}\n</code></pre>\n<p>However, I cannot add another element for the repeated key value (for example 3) and I think I should implement something like <code>Map&lt;Integer, List&lt;UUID&gt;&gt; map = new TreeMap&lt;&gt;();</code> rather than <code>Map&lt;Integer, UUID&gt; map = new TreeMap&lt;&gt;();</code>. However, I could not find a proper solution for that. So, how can I manage the repeated key values to be added to the map?</p>\n"},{"tags":["java","loops","oop","methods","sum"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1634198005,"post_id":69566617,"comment_id":122962068,"body_markdown":"Hint: 55 = 10 + 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1","body":"Hint: 55 = 10 + 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1"}],"answers":[{"tags":[],"owner":{"account_id":16354119,"reputation":1,"user_id":11811765,"display_name":"Syed Yarooq Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634197850,"creation_date":1634197850,"answer_id":69566945,"question_id":69566617,"body_markdown":"Try this\r\n\r\n    public int sumOfInts(int i) {\r\n        int sum = 0;\r\n        int iteration = 0; \r\n        while(iteration &lt; i){\r\n           sum = sum+iteration;\r\n           iteration++;\r\n        }  \r\n        return sum;\r\n        \r\n    }\r\n","title":"Java method to get sum of int based on test logic","body":"<p>Try this</p>\n<pre><code>public int sumOfInts(int i) {\n    int sum = 0;\n    int iteration = 0; \n    while(iteration &lt; i){\n       sum = sum+iteration;\n       iteration++;\n    }  \n    return sum;\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17750659,"reputation":336,"user_id":12888853,"display_name":"kosmasd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634197959,"creation_date":1634197959,"answer_id":69566973,"question_id":69566617,"body_markdown":"You are looking to make a method that gives you the cumulative sum. The method you have written just gives you the number of times it runs, which is exactly the number you have provided as argument.\r\n\r\nYou need to differentiate between the counter (the argument) and the cumulative sum, and also update the value of the counter so that the while loop knows when to exit. \r\n\r\nLastly, the &lt;= comparison is necessary to get the correct value (vs just &lt;).\r\n\r\n\r\nHere is an example:\r\n\r\n```\r\n   public int sumOfInts(int i) {\r\n        int sum = 0;\r\n        int counter = 0;\r\n\r\n        while(counter &lt;= i) {\r\n            sum = sum + counter;\r\n            counter = counter + 1;\r\n        }\r\n        return sum;\r\n    }\r\n```","title":"Java method to get sum of int based on test logic","body":"<p>You are looking to make a method that gives you the cumulative sum. The method you have written just gives you the number of times it runs, which is exactly the number you have provided as argument.</p>\n<p>You need to differentiate between the counter (the argument) and the cumulative sum, and also update the value of the counter so that the while loop knows when to exit.</p>\n<p>Lastly, the &lt;= comparison is necessary to get the correct value (vs just &lt;).</p>\n<p>Here is an example:</p>\n<pre><code>   public int sumOfInts(int i) {\n        int sum = 0;\n        int counter = 0;\n\n        while(counter &lt;= i) {\n            sum = sum + counter;\n            counter = counter + 1;\n        }\n        return sum;\n    }\n</code></pre>\n"}],"owner":{"account_id":22898291,"reputation":15,"user_id":17037469,"display_name":"dmc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69566973,"answer_count":2,"score":0,"last_activity_date":1634197959,"creation_date":1634196304,"question_id":69566617,"body_markdown":"I am new to learning java and I have a written a method below. I am trying to understand how to satisfy the tester methods. Is there a way to get the correct logic with the while loop?\r\nI stated that the sum = 0 and while the sum is less than i, increment the sum and loop till it reaches i then return the sum (or thats what i think that&#39;s what im trying to do) to satisfy the test. When i look at the junit error message for 1) it says its giving me 10 but expects 55, 2) says im getting 49 but expects 1225. 3) is satisfied. What am i doing wrong here? Is it possible to do this method either with an if statement or while loop? \r\n\r\n     public int sumOfInts(int i) {\r\n            int sum = 0;\r\n            \r\n            while(sum &lt; i)\r\n               ++sum;\r\n            return sum;\r\n            \r\n        }\r\n\r\n\r\n1) \r\n \r\n ````````````````````````````````````````````````````````\r\n    public void testSumOfInts2() {\r\n                    int sumOfInts = math.sumOfInts(10);\r\n                    assertEquals(55, sumOfInts);\r\n`````````````````````````````````````````````````````````\r\n2) \r\n\r\n```````````````````````````````````````````````````````````` \r\n\r\n     public void testSumOfInts3() {\r\n                int sumOfInts = math.sumOfInts(49);\r\n                assertEquals(1225, sumOfInts);\r\n````````````````````````````````````````````````````````````````\r\n3) \r\n\r\n   \r\n``````````````````````````````````````````````````````````````````````````\r\n     public void testSumOfInts4() {\r\n                int sumOfInts = math.sumOfInts(-49);\r\n                assertEquals(0, sumOfInts);\r\n\r\n``````````````````````````````````````````````````````````````````````````\r\n\r\n","title":"Java method to get sum of int based on test logic","body":"<p>I am new to learning java and I have a written a method below. I am trying to understand how to satisfy the tester methods. Is there a way to get the correct logic with the while loop?\nI stated that the sum = 0 and while the sum is less than i, increment the sum and loop till it reaches i then return the sum (or thats what i think that's what im trying to do) to satisfy the test. When i look at the junit error message for 1) it says its giving me 10 but expects 55, 2) says im getting 49 but expects 1225. 3) is satisfied. What am i doing wrong here? Is it possible to do this method either with an if statement or while loop?</p>\n<pre><code> public int sumOfInts(int i) {\n        int sum = 0;\n        \n        while(sum &lt; i)\n           ++sum;\n        return sum;\n        \n    }\n</code></pre>\n<ol>\n<li></li>\n</ol>\n<pre><code>   public void testSumOfInts2() {\n                   int sumOfInts = math.sumOfInts(10);\n                   assertEquals(55, sumOfInts);\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>\n     public void testSumOfInts3() {\n                int sumOfInts = math.sumOfInts(49);\n                assertEquals(1225, sumOfInts);\n</code></pre>\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>     public void testSumOfInts4() {\n                int sumOfInts = math.sumOfInts(-49);\n                assertEquals(0, sumOfInts);\n\n</code></pre>\n"},{"tags":["java","datetime-format","datetimeformatter","timeofday"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634193988,"post_id":69566133,"comment_id":122960662,"body_markdown":"It depends on the locale used and in the end also on the locale data and hence on the locale data provider. See for example [java.text.ParseException: Unparseable date: &quot;01:19 PM&quot;](https://stackoverflow.com/questions/25524284/java-text-parseexception-unparseable-date-0119-pm)","body":"It depends on the locale used and in the end also on the locale data and hence on the locale data provider. See for example <a href=\"https://stackoverflow.com/questions/25524284/java-text-parseexception-unparseable-date-0119-pm\">java.text.ParseException: Unparseable date: &quot;01:19 PM&quot;</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634195638,"post_id":69566133,"comment_id":122961195,"body_markdown":"Which is the default locale in Java on your Mac? (`System.out.println(Locale.getDefault(Locale.Category.FORMAT));`)","body":"Which is the default locale in Java on your Mac? (<code>System.out.println(Locale.getDefault(Locale.Category.FORMAT&zwnj;&#8203;));</code>)"}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1634194713,"creation_date":1634194393,"answer_id":69566256,"question_id":69566133,"body_markdown":"`DateTimeFormatter` is a Locale-sensitive type i.e. its parsing and formatting depend on the `Locale`. Check [Never use SimpleDateFormat or DateTimeFormatter without a Locale](https://stackoverflow.com/a/65544056/10819573) to learn more about it.\r\n\r\nIf you have an English `Locale`, and you want the output to be always in a single case (i.e. upper case), you can chain the string operation with the formatted string e.g.\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.ZoneOffset;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(\r\n    \t\t\t\tLocalTime.now(ZoneOffset.UTC)\r\n    \t\t\t\t\t.format(DateTimeFormatter.ofPattern(&quot;ha&quot;, Locale.ENGLISH))\r\n    \t\t\t\t\t.toUpperCase()\r\n    \t\t);\r\n    \t}\r\n    }\r\n\r\n**Output from a sample run:**\r\n\r\n    6AM\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\nLearn more about the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n***\r\n&lt;sup&gt;* If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table). Note that Android 8.0 Oreo already provides [support for `java.time`](https://developer.android.com/reference/java/time/package-summary).\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/wvU7EL","title":"How to change time format in Java - &quot;am/pm&quot; vs. &quot;AM/PM&quot;","body":"<p><code>DateTimeFormatter</code> is a Locale-sensitive type i.e. its parsing and formatting depend on the <code>Locale</code>. Check <a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use SimpleDateFormat or DateTimeFormatter without a Locale</a> to learn more about it.</p>\n<p>If you have an English <code>Locale</code>, and you want the output to be always in a single case (i.e. upper case), you can chain the string operation with the formatted string e.g.</p>\n<pre><code>import java.time.LocalTime;\nimport java.time.ZoneOffset;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\n                LocalTime.now(ZoneOffset.UTC)\n                    .format(DateTimeFormatter.ofPattern(&quot;ha&quot;, Locale.ENGLISH))\n                    .toUpperCase()\n        );\n    }\n}\n</code></pre>\n<p><strong>Output from a sample run:</strong></p>\n<pre><code>6AM\n</code></pre>\n<p><a href=\"https://ideone.com/wvU7EL\" rel=\"noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"noreferrer\">Java 8+ APIs available through desugaring</a>. Note that Android 8.0 Oreo already provides <a href=\"https://developer.android.com/reference/java/time/package-summary\" rel=\"noreferrer\">support for <code>java.time</code></a>.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":517968,"reputation":619,"user_id":2881548,"accept_rate":0,"display_name":"THM"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634195717,"creation_date":1634195717,"answer_id":69566487,"question_id":69566133,"body_markdown":"    -Duser.timezone=EDT\r\n    -Duser.country=US\r\n    -Duser.language=en-US\r\n\r\n\r\nsolved issue","title":"How to change time format in Java - &quot;am/pm&quot; vs. &quot;AM/PM&quot;","body":"<pre><code>-Duser.timezone=EDT\n-Duser.country=US\n-Duser.language=en-US\n</code></pre>\n<p>solved issue</p>\n"}],"owner":{"account_id":517968,"reputation":619,"user_id":2881548,"accept_rate":0,"display_name":"THM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2564,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1634197922,"creation_date":1634193747,"question_id":69566133,"body_markdown":"Tests created previously use `DateTimeFormatter.ofPattern(&quot;ha&quot;);` and returns **&quot;10AM&quot;** (for &#39;`2017-04-09T10:00-06:00[US/Mountain]`&#39;).\r\n\r\nUnder my MacOs and Java [&#39;openjdk version &quot;11.0.12&quot;&#39;] I got **&quot;10am&quot;**\r\n\r\n    &quot;10AM&quot; != &quot;10am&quot;\r\n\r\nIn specification I see &quot;ha&quot; should create &quot;10AM&quot; not &quot;10am&quot; \r\nsee: https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html \r\n\r\nAny advice?","title":"How to change time format in Java - &quot;am/pm&quot; vs. &quot;AM/PM&quot;","body":"<p>Tests created previously use <code>DateTimeFormatter.ofPattern(&quot;ha&quot;);</code> and returns <strong>&quot;10AM&quot;</strong> (for '<code>2017-04-09T10:00-06:00[US/Mountain]</code>').</p>\n<p>Under my MacOs and Java ['openjdk version &quot;11.0.12&quot;'] I got <strong>&quot;10am&quot;</strong></p>\n<pre><code>&quot;10AM&quot; != &quot;10am&quot;\n</code></pre>\n<p>In specification I see &quot;ha&quot; should create &quot;10AM&quot; not &quot;10am&quot;\nsee: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a></p>\n<p>Any advice?</p>\n"},{"tags":["java","android","android-recyclerview","click","android-espresso"],"comments":[{"owner":{"account_id":1528808,"reputation":6784,"user_id":1426565,"accept_rate":29,"display_name":"Cruceo"},"score":0,"creation_date":1633885912,"post_id":69516950,"comment_id":122874054,"body_markdown":"Is it possible that `MainActivity` is showing a dialog or opening another Activity, such as one for login or authentication? Perhaps even a permission dialog? Espresso will absolutely throw that same error under those conditions, as the Activity being tested would be pushed into a paused state on launch until the offending Dialog/Activity is closed","body":"Is it possible that <code>MainActivity</code> is showing a dialog or opening another Activity, such as one for login or authentication? Perhaps even a permission dialog? Espresso will absolutely throw that same error under those conditions, as the Activity being tested would be pushed into a paused state on launch until the offending Dialog/Activity is closed"},{"owner":{"account_id":18838992,"reputation":93,"user_id":14335049,"display_name":"Makc"},"score":0,"creation_date":1633900184,"post_id":69516950,"comment_id":122877197,"body_markdown":"@Cruceo no. It is simple list. Click on element open another activity with detail that element. No dialog or permission displayed. I do it by hand and it work. It interesting, i tried this example with doubleClick() and one of line log looks like &quot;Caused by: java.lang.SecurityException: Injecting to another application requires INJECT_EVENTS permission&quot;. But i cant find something that help me.","body":"@Cruceo no. It is simple list. Click on element open another activity with detail that element. No dialog or permission displayed. I do it by hand and it work. It interesting, i tried this example with doubleClick() and one of line log looks like &quot;Caused by: java.lang.SecurityException: Injecting to another application requires INJECT_EVENTS permission&quot;. But i cant find something that help me."}],"answers":[{"tags":[],"owner":{"account_id":18838992,"reputation":93,"user_id":14335049,"display_name":"Makc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634197806,"creation_date":1634197806,"answer_id":69566934,"question_id":69516950,"body_markdown":"Solved. The problem was in my click listener code that depend from getCallingActivity()","title":"Espresso RecyclerViewActions click destroy activity","body":"<p>Solved. The problem was in my click listener code that depend from getCallingActivity()</p>\n"}],"owner":{"account_id":18838992,"reputation":93,"user_id":14335049,"display_name":"Makc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634197806,"creation_date":1633882916,"question_id":69516950,"body_markdown":"I want use espresso for testing my app and take very simple test from [documentation](https://developer.android.com/training/testing/espresso/lists). But have problem with RecyclerViewActions. It just destroy activity.\r\n\r\n```\r\nimport android.os.SystemClock;\r\n\r\nimport androidx.test.espresso.contrib.RecyclerViewActions;\r\nimport androidx.test.espresso.matcher.ViewMatchers;\r\nimport androidx.test.ext.junit.rules.ActivityScenarioRule;\r\n\r\nimport com.motivationmanager.R;\r\n\r\nimport org.junit.Rule;\r\nimport org.junit.Test;\r\n\r\nimport static androidx.test.espresso.Espresso.onView;\r\nimport static androidx.test.espresso.action.ViewActions.click;\r\n\r\npublic class MainActivityTest {\r\n\r\n    @Rule\r\n    public ActivityScenarioRule&lt;MainActivity&gt; mActivityRule = new ActivityScenarioRule&lt;&gt;(\r\n            MainActivity.class);\r\n\r\n    @Test\r\n    public void recyclerViewTest() {\r\n        SystemClock.sleep(2000);\r\n        onView(ViewMatchers.withId(R.id.tasks_progress_recyclerview))\r\n                .perform(RecyclerViewActions.scrollToPosition (0))\r\n                .perform(RecyclerViewActions.actionOnItemAtPosition(0, click()));\r\n\t//copy of the code above that not working because error occurs\r\n        SystemClock.sleep(2000);\r\n        onView(ViewMatchers.withId(R.id.tasks_progress_recyclerview))\r\n                .perform(RecyclerViewActions.scrollToPosition (0))\r\n                .perform(RecyclerViewActions.actionOnItemAtPosition(0, click()));}}\r\n```\r\nlog \r\n```\r\nTesting started at 18:47 ...\r\n\r\n10/10 18:47:39: Launching &#39;MainActivityTest&#39; on 4  WVGA (Nexus S) API 30.\r\nInstall successfully finished in 1 s 408 ms.\r\nRunning tests\r\n\r\n$ adb shell am instrument -w -m    -e debug true -e class &#39;ui.MainActivityTest&#39; com.example.motivationmanager.test/androidx.test.runner.AndroidJUnitRunner\r\nConnecting to com.example.motivationmanager.test\r\nWaiting for application to start debug server\r\nWaiting for application to come online: com.example.motivationmanager.test | com.example.motivationmanager\r\nConnecting to com.example.motivationmanager.test\r\nWaiting for application to start debug server\r\nConnecting to com.example.motivationmanager\r\nWaiting for application to start debug server\r\nConnected to process 9973 on device &#39;emulator-5556&#39;.\r\nConnecting to com.example.motivationmanager.test\r\nWaiting for application to start debug server\r\nConnecting to com.example.motivationmanager\r\nConnected to the target VM, address: &#39;localhost:50308&#39;, transport: &#39;socket&#39;\r\nCapturing and displaying logcat messages from application. This behavior can be disabled in the &quot;Logcat output&quot; section of the &quot;Debugger&quot; settings page.\r\nI/tivationmanage: Not late-enabling -Xcheck:jni (already on)\r\nI/tivationmanage: Unquickening 12 vdex files!\r\nW/tivationmanage: Unexpected CPU variant for X86 using defaults: x86\r\nI/tivationmanage: The ClassLoaderContext is a special shared library.\r\nI/chatty: uid=10153(com.example.motivationmanager) identical 1 line\r\nI/tivationmanage: The ClassLoaderContext is a special shared library.\r\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\r\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\r\nI/tivationmanage: The ClassLoaderContext is a special shared library.\r\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\r\n    Returning zygote-cached class loader: /system/framework/android.test.base.jar\r\nI/tivationmanage: The ClassLoaderContext is a special shared library.\r\nI/chatty: uid=10153(com.example.motivationmanager) identical 2 lines\r\nI/tivationmanage: The ClassLoaderContext is a special shared library.\r\nW/tivationmanage: Accessing hidden method Landroid/app/Instrumentation;-&gt;execStartActivity(Landroid/content/Context;Landroid/os/IBinder;Landroid/os/IBinder;Landroid/app/Activity;Landroid/content/Intent;ILandroid/os/Bundle;)Landroid/app/Instrumentation$ActivityResult; (greylist, linking, allowed)\r\n    Accessing hidden method Landroid/app/Instrumentation;-&gt;execStartActivity(Landroid/content/Context;Landroid/os/IBinder;Landroid/os/IBinder;Ljava/lang/String;Landroid/content/Intent;ILandroid/os/Bundle;)Landroid/app/Instrumentation$ActivityResult; (greylist, linking, allowed)\r\nD/NetworkSecurityConfig: No Network Security Config specified, using platform default\r\nD/NetworkSecurityConfig: No Network Security Config specified, using platform default\r\nI/MultiDex: VM with version 2.1.0 has multidex support\r\n    Installing application\r\n    VM has multidex support, MultiDex support library is disabled.\r\nI/MonitoringInstr: Instrumentation started!\r\nI/AndroidJUnitRunner: Waiting for debugger to connect...\r\nI/System.out: Sending WAIT chunk\r\nI/System.out: Debugger has connected\r\n    waiting for debugger to settle...\r\nI/System.out: waiting for debugger to settle...\r\nI/chatty: uid=10153(com.example.motivationmanager) identical 3 lines\r\nI/System.out: waiting for debugger to settle...\r\nI/System.out: waiting for debugger to settle...\r\nI/System.out: debugger has settled (1300)\r\nI/AndroidJUnitRunner: Debugger connected.\r\nV/TestEventClient: No service name argument was given (testDiscoveryService, testRunEventService or orchestratorService)\r\nI/MonitoringInstr: No JSBridge.\r\nD/InfraTrack: Tracking disabled due to lack of internet permissions\r\nI/UsageTrackerFacilitator: Usage tracking disabled\r\nD/TestExecutor: Adding listener androidx.test.internal.runner.listener.LogRunListener\r\nD/TestExecutor: Adding listener androidx.test.internal.runner.listener.InstrumentationResultPrinter\r\n    Adding listener androidx.test.internal.runner.listener.ActivityFinisherRunListener\r\nI/TestRunner: run started: 1 tests\r\nI/TestRunner: started: recyclerViewTest(ui.MainActivityTest)\r\n\r\nStarted running tests\r\n\r\nW/Settings: Setting always_finish_activities has moved from android.provider.Settings.System to android.provider.Settings.Global, returning read-only value.\r\nD/libEGL: loaded /vendor/lib/egl/libEGL_emulation.so\r\nD/libEGL: loaded /vendor/lib/egl/libGLESv1_CM_emulation.so\r\nD/libEGL: loaded /vendor/lib/egl/libGLESv2_emulation.so\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: PRE_ON_CREATE\r\nV/ActivityScenario: Activity lifecycle changed event received but ignored because the reported transition was not ON_CREATE while the last known transition was PRE_ON_CREATE\r\nW/tivationmanage: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\r\nW/tivationmanage: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: CREATED\r\nV/ActivityScenario: Update currentActivityStage to CREATED, currentActivity=ui.MainActivity@197a684\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: STARTED\r\nV/ActivityScenario: Update currentActivityStage to STARTED, currentActivity=ui.MainActivity@197a684\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: RESUMED\r\nV/ActivityScenario: Update currentActivityStage to RESUMED, currentActivity=ui.MainActivity@197a684\r\nD/HostConnection: HostConnection::get() New Host Connection established 0xf6c223d0, tid 10012\r\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_async_unmap_buffer ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_async_frame_commands ANDROID_EMU_gles_max_version_3_0 \r\nW/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\r\nD/EGL_emulation: eglCreateContext: 0xf6c22590: maj 3 min 0 rcv 3\r\nD/EGL_emulation: eglMakeCurrent: 0xf6c22590: ver 3 0 (tinfo 0xc54bac70) (first time)\r\nI/Gralloc4: mapper 4.x is not supported\r\nD/HostConnection: createUnique: call\r\n    HostConnection::get() New Host Connection established 0xf6c22050, tid 10012\r\nD/goldfish-address-space: allocate: Ask for block of size 0x100\r\n    allocate: ioctl allocate returned offset 0x3fbffe000 size 0x2000\r\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_async_unmap_buffer ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_async_frame_commands ANDROID_EMU_gles_max_version_3_0 \r\nD/EventInjectionStrategy: Creating injection strategy with input manager.\r\nW/tivationmanage: Accessing hidden method Landroid/hardware/input/InputManager;-&gt;getInstance()Landroid/hardware/input/InputManager; (greylist, reflection, allowed)\r\nW/tivationmanage: Accessing hidden method Landroid/hardware/input/InputManager;-&gt;injectInputEvent(Landroid/view/InputEvent;I)Z (greylist, reflection, allowed)\r\n    Accessing hidden field Landroid/hardware/input/InputManager;-&gt;INJECT_INPUT_EVENT_MODE_WAIT_FOR_FINISH:I (greylist, reflection, allowed)\r\nW/tivationmanage: Accessing hidden method Landroid/os/MessageQueue;-&gt;next()Landroid/os/Message; (greylist, reflection, allowed)\r\n    Accessing hidden field Landroid/os/MessageQueue;-&gt;mMessages:Landroid/os/Message; (greylist, reflection, allowed)\r\n    Accessing hidden method Landroid/os/Message;-&gt;recycleUnchecked()V (greylist, reflection, allowed)\r\nW/tivationmanage: Accessing hidden method Landroid/view/WindowManagerGlobal;-&gt;getInstance()Landroid/view/WindowManagerGlobal; (greylist, reflection, allowed)\r\n    Accessing hidden field Landroid/view/WindowManagerGlobal;-&gt;mViews:Ljava/util/ArrayList; (greylist, reflection, allowed)\r\n    Accessing hidden field Landroid/view/WindowManagerGlobal;-&gt;mParams:Ljava/util/ArrayList; (greylist, reflection, allowed)\r\nI/ViewInteraction: Performing &#39;scroll RecyclerView to position: 0&#39; action on view view.getId() is &lt;2131296529/com.example.motivationmanager:id/tasks_progress_recyclerview&gt;\r\nW/tivationmanage: Accessing hidden method Landroid/view/ViewConfiguration;-&gt;getDoubleTapMinTime()I (greylist, reflection, allowed)\r\nI/ViewInteraction: Performing &#39;actionOnItemAtPosition performing ViewAction: single click on item at position: 0&#39; action on view view.getId() is &lt;2131296529/com.example.motivationmanager:id/tasks_progress_recyclerview&gt;\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: PAUSED\r\nV/ActivityScenario: Update currentActivityStage to PAUSED, currentActivity=ui.MainActivity@197a684\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: STOPPED\r\nV/ActivityScenario: Update currentActivityStage to STOPPED, currentActivity=ui.MainActivity@197a684\r\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: DESTROYED\r\nV/ActivityScenario: Update currentActivityStage to DESTROYED, currentActivity=null\r\nW/RootViewPicker: No activities found - waiting: 10ms for one to appear.\r\nW/RootViewPicker: No activities found - waiting: 50ms for one to appear.\r\nW/RootViewPicker: No activities found - waiting: 150ms for one to appear.\r\nW/RootViewPicker: No activities found - waiting: 250ms for one to appear.\r\nE/TestRunner: failed: recyclerViewTest(ui.MainActivityTest)\r\n    ----- begin exception -----\r\nE/TestRunner: androidx.test.espresso.NoActivityResumedException: No activities found. Did you forget to launch the activity by calling getActivity() or startActivitySync or similar?\r\n        at dalvik.system.VMStack.getThreadStackTrace(Native Method)\r\n        at java.lang.Thread.getStackTrace(Thread.java:1736)\r\n        at androidx.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:12)\r\n        at androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:7)\r\n        at androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:8)\r\n        at androidx.test.espresso.ViewInteraction.desugaredPerform(ViewInteraction.java:11)\r\n        at androidx.test.espresso.ViewInteraction.perform(ViewInteraction.java:4)\r\n        at ui.MainActivityTest.recyclerViewTest(MainActivityTest.java:58)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n        at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)\r\n        at org.junit.rules.RunRules.evaluate(RunRules.java:20)\r\n        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n        at org.junit.runners.Suite.runChild(Suite.java:128)\r\n        at org.junit.runners.Suite.runChild(Suite.java:27)\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:115)\r\n        at androidx.test.internal.runner.TestExecutor.execute(TestExecutor.java:56)\r\n        at androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:444)\r\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2205)\r\n    ----- end exception -----\r\nI/TestRunner: finished: recyclerViewTest(ui.MainActivityTest)\r\n\r\nandroidx.test.espresso.NoActivityResumedException: No activities found. Did you forget to launch the activity by calling getActivity() or startActivitySync or similar?\r\n\tat dalvik.system.VMStack.getThreadStackTrace(Native Method)\r\n\tat java.lang.Thread.getStackTrace(Thread.java:1736)\r\n\tat androidx.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:12)\r\n\tat androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:7)\r\n\tat androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:8)\r\n\tat androidx.test.espresso.ViewInteraction.desugaredPerform(ViewInteraction.java:11)\r\n\tat androidx.test.espresso.ViewInteraction.perform(ViewInteraction.java:4)\r\n\tat ui.MainActivityTest.recyclerViewTest(MainActivityTest.java:58)\r\n\r\nI/TestRunner: run finished: 1 tests, 1 failed, 0 ignored\r\nTests ran to completion.\r\n\r\nI/MonitoringInstr: waitForActivitiesToComplete() took: 0ms\r\nDisconnected from the target VM, address: &#39;localhost:50308&#39;, transport: &#39;socket&#39;\r\n\r\n```\r\nAfter &quot;RecyclerViewActions.actionOnItemAtPosition(0, click()&quot; activity status is DESTROYED and copy of code take error &quot;androidx.test.espresso.NoActivityResumedException: No activities found.&quot; How click can destoy activity? How can i fix it? I have 3 or more items in recyclerview. I switched off animation from [recommendation](https://developer.android.com/training/testing/espresso/setup). I use 3.4.0 version espresso. No any ideas what to do.","title":"Espresso RecyclerViewActions click destroy activity","body":"<p>I want use espresso for testing my app and take very simple test from <a href=\"https://developer.android.com/training/testing/espresso/lists\" rel=\"nofollow noreferrer\">documentation</a>. But have problem with RecyclerViewActions. It just destroy activity.</p>\n<pre><code>import android.os.SystemClock;\n\nimport androidx.test.espresso.contrib.RecyclerViewActions;\nimport androidx.test.espresso.matcher.ViewMatchers;\nimport androidx.test.ext.junit.rules.ActivityScenarioRule;\n\nimport com.motivationmanager.R;\n\nimport org.junit.Rule;\nimport org.junit.Test;\n\nimport static androidx.test.espresso.Espresso.onView;\nimport static androidx.test.espresso.action.ViewActions.click;\n\npublic class MainActivityTest {\n\n    @Rule\n    public ActivityScenarioRule&lt;MainActivity&gt; mActivityRule = new ActivityScenarioRule&lt;&gt;(\n            MainActivity.class);\n\n    @Test\n    public void recyclerViewTest() {\n        SystemClock.sleep(2000);\n        onView(ViewMatchers.withId(R.id.tasks_progress_recyclerview))\n                .perform(RecyclerViewActions.scrollToPosition (0))\n                .perform(RecyclerViewActions.actionOnItemAtPosition(0, click()));\n    //copy of the code above that not working because error occurs\n        SystemClock.sleep(2000);\n        onView(ViewMatchers.withId(R.id.tasks_progress_recyclerview))\n                .perform(RecyclerViewActions.scrollToPosition (0))\n                .perform(RecyclerViewActions.actionOnItemAtPosition(0, click()));}}\n</code></pre>\n<p>log</p>\n<pre><code>Testing started at 18:47 ...\n\n10/10 18:47:39: Launching 'MainActivityTest' on 4  WVGA (Nexus S) API 30.\nInstall successfully finished in 1 s 408 ms.\nRunning tests\n\n$ adb shell am instrument -w -m    -e debug true -e class 'ui.MainActivityTest' com.example.motivationmanager.test/androidx.test.runner.AndroidJUnitRunner\nConnecting to com.example.motivationmanager.test\nWaiting for application to start debug server\nWaiting for application to come online: com.example.motivationmanager.test | com.example.motivationmanager\nConnecting to com.example.motivationmanager.test\nWaiting for application to start debug server\nConnecting to com.example.motivationmanager\nWaiting for application to start debug server\nConnected to process 9973 on device 'emulator-5556'.\nConnecting to com.example.motivationmanager.test\nWaiting for application to start debug server\nConnecting to com.example.motivationmanager\nConnected to the target VM, address: 'localhost:50308', transport: 'socket'\nCapturing and displaying logcat messages from application. This behavior can be disabled in the &quot;Logcat output&quot; section of the &quot;Debugger&quot; settings page.\nI/tivationmanage: Not late-enabling -Xcheck:jni (already on)\nI/tivationmanage: Unquickening 12 vdex files!\nW/tivationmanage: Unexpected CPU variant for X86 using defaults: x86\nI/tivationmanage: The ClassLoaderContext is a special shared library.\nI/chatty: uid=10153(com.example.motivationmanager) identical 1 line\nI/tivationmanage: The ClassLoaderContext is a special shared library.\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\nI/tivationmanage: The ClassLoaderContext is a special shared library.\nD/ApplicationLoaders: Returning zygote-cached class loader: /system/framework/android.test.base.jar\n    Returning zygote-cached class loader: /system/framework/android.test.base.jar\nI/tivationmanage: The ClassLoaderContext is a special shared library.\nI/chatty: uid=10153(com.example.motivationmanager) identical 2 lines\nI/tivationmanage: The ClassLoaderContext is a special shared library.\nW/tivationmanage: Accessing hidden method Landroid/app/Instrumentation;-&gt;execStartActivity(Landroid/content/Context;Landroid/os/IBinder;Landroid/os/IBinder;Landroid/app/Activity;Landroid/content/Intent;ILandroid/os/Bundle;)Landroid/app/Instrumentation$ActivityResult; (greylist, linking, allowed)\n    Accessing hidden method Landroid/app/Instrumentation;-&gt;execStartActivity(Landroid/content/Context;Landroid/os/IBinder;Landroid/os/IBinder;Ljava/lang/String;Landroid/content/Intent;ILandroid/os/Bundle;)Landroid/app/Instrumentation$ActivityResult; (greylist, linking, allowed)\nD/NetworkSecurityConfig: No Network Security Config specified, using platform default\nD/NetworkSecurityConfig: No Network Security Config specified, using platform default\nI/MultiDex: VM with version 2.1.0 has multidex support\n    Installing application\n    VM has multidex support, MultiDex support library is disabled.\nI/MonitoringInstr: Instrumentation started!\nI/AndroidJUnitRunner: Waiting for debugger to connect...\nI/System.out: Sending WAIT chunk\nI/System.out: Debugger has connected\n    waiting for debugger to settle...\nI/System.out: waiting for debugger to settle...\nI/chatty: uid=10153(com.example.motivationmanager) identical 3 lines\nI/System.out: waiting for debugger to settle...\nI/System.out: waiting for debugger to settle...\nI/System.out: debugger has settled (1300)\nI/AndroidJUnitRunner: Debugger connected.\nV/TestEventClient: No service name argument was given (testDiscoveryService, testRunEventService or orchestratorService)\nI/MonitoringInstr: No JSBridge.\nD/InfraTrack: Tracking disabled due to lack of internet permissions\nI/UsageTrackerFacilitator: Usage tracking disabled\nD/TestExecutor: Adding listener androidx.test.internal.runner.listener.LogRunListener\nD/TestExecutor: Adding listener androidx.test.internal.runner.listener.InstrumentationResultPrinter\n    Adding listener androidx.test.internal.runner.listener.ActivityFinisherRunListener\nI/TestRunner: run started: 1 tests\nI/TestRunner: started: recyclerViewTest(ui.MainActivityTest)\n\nStarted running tests\n\nW/Settings: Setting always_finish_activities has moved from android.provider.Settings.System to android.provider.Settings.Global, returning read-only value.\nD/libEGL: loaded /vendor/lib/egl/libEGL_emulation.so\nD/libEGL: loaded /vendor/lib/egl/libGLESv1_CM_emulation.so\nD/libEGL: loaded /vendor/lib/egl/libGLESv2_emulation.so\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: PRE_ON_CREATE\nV/ActivityScenario: Activity lifecycle changed event received but ignored because the reported transition was not ON_CREATE while the last known transition was PRE_ON_CREATE\nW/tivationmanage: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\nW/tivationmanage: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: CREATED\nV/ActivityScenario: Update currentActivityStage to CREATED, currentActivity=ui.MainActivity@197a684\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: STARTED\nV/ActivityScenario: Update currentActivityStage to STARTED, currentActivity=ui.MainActivity@197a684\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: RESUMED\nV/ActivityScenario: Update currentActivityStage to RESUMED, currentActivity=ui.MainActivity@197a684\nD/HostConnection: HostConnection::get() New Host Connection established 0xf6c223d0, tid 10012\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_async_unmap_buffer ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_async_frame_commands ANDROID_EMU_gles_max_version_3_0 \nW/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\nD/EGL_emulation: eglCreateContext: 0xf6c22590: maj 3 min 0 rcv 3\nD/EGL_emulation: eglMakeCurrent: 0xf6c22590: ver 3 0 (tinfo 0xc54bac70) (first time)\nI/Gralloc4: mapper 4.x is not supported\nD/HostConnection: createUnique: call\n    HostConnection::get() New Host Connection established 0xf6c22050, tid 10012\nD/goldfish-address-space: allocate: Ask for block of size 0x100\n    allocate: ioctl allocate returned offset 0x3fbffe000 size 0x2000\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_async_unmap_buffer ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_async_frame_commands ANDROID_EMU_gles_max_version_3_0 \nD/EventInjectionStrategy: Creating injection strategy with input manager.\nW/tivationmanage: Accessing hidden method Landroid/hardware/input/InputManager;-&gt;getInstance()Landroid/hardware/input/InputManager; (greylist, reflection, allowed)\nW/tivationmanage: Accessing hidden method Landroid/hardware/input/InputManager;-&gt;injectInputEvent(Landroid/view/InputEvent;I)Z (greylist, reflection, allowed)\n    Accessing hidden field Landroid/hardware/input/InputManager;-&gt;INJECT_INPUT_EVENT_MODE_WAIT_FOR_FINISH:I (greylist, reflection, allowed)\nW/tivationmanage: Accessing hidden method Landroid/os/MessageQueue;-&gt;next()Landroid/os/Message; (greylist, reflection, allowed)\n    Accessing hidden field Landroid/os/MessageQueue;-&gt;mMessages:Landroid/os/Message; (greylist, reflection, allowed)\n    Accessing hidden method Landroid/os/Message;-&gt;recycleUnchecked()V (greylist, reflection, allowed)\nW/tivationmanage: Accessing hidden method Landroid/view/WindowManagerGlobal;-&gt;getInstance()Landroid/view/WindowManagerGlobal; (greylist, reflection, allowed)\n    Accessing hidden field Landroid/view/WindowManagerGlobal;-&gt;mViews:Ljava/util/ArrayList; (greylist, reflection, allowed)\n    Accessing hidden field Landroid/view/WindowManagerGlobal;-&gt;mParams:Ljava/util/ArrayList; (greylist, reflection, allowed)\nI/ViewInteraction: Performing 'scroll RecyclerView to position: 0' action on view view.getId() is &lt;2131296529/com.example.motivationmanager:id/tasks_progress_recyclerview&gt;\nW/tivationmanage: Accessing hidden method Landroid/view/ViewConfiguration;-&gt;getDoubleTapMinTime()I (greylist, reflection, allowed)\nI/ViewInteraction: Performing 'actionOnItemAtPosition performing ViewAction: single click on item at position: 0' action on view view.getId() is &lt;2131296529/com.example.motivationmanager:id/tasks_progress_recyclerview&gt;\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: PAUSED\nV/ActivityScenario: Update currentActivityStage to PAUSED, currentActivity=ui.MainActivity@197a684\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: STOPPED\nV/ActivityScenario: Update currentActivityStage to STOPPED, currentActivity=ui.MainActivity@197a684\nD/LifecycleMonitor: Lifecycle status change: ui.MainActivity@197a684 in: DESTROYED\nV/ActivityScenario: Update currentActivityStage to DESTROYED, currentActivity=null\nW/RootViewPicker: No activities found - waiting: 10ms for one to appear.\nW/RootViewPicker: No activities found - waiting: 50ms for one to appear.\nW/RootViewPicker: No activities found - waiting: 150ms for one to appear.\nW/RootViewPicker: No activities found - waiting: 250ms for one to appear.\nE/TestRunner: failed: recyclerViewTest(ui.MainActivityTest)\n    ----- begin exception -----\nE/TestRunner: androidx.test.espresso.NoActivityResumedException: No activities found. Did you forget to launch the activity by calling getActivity() or startActivitySync or similar?\n        at dalvik.system.VMStack.getThreadStackTrace(Native Method)\n        at java.lang.Thread.getStackTrace(Thread.java:1736)\n        at androidx.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:12)\n        at androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:7)\n        at androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:8)\n        at androidx.test.espresso.ViewInteraction.desugaredPerform(ViewInteraction.java:11)\n        at androidx.test.espresso.ViewInteraction.perform(ViewInteraction.java:4)\n        at ui.MainActivityTest.recyclerViewTest(MainActivityTest.java:58)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n        at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)\n        at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n        at org.junit.runners.Suite.runChild(Suite.java:128)\n        at org.junit.runners.Suite.runChild(Suite.java:27)\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:115)\n        at androidx.test.internal.runner.TestExecutor.execute(TestExecutor.java:56)\n        at androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:444)\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2205)\n    ----- end exception -----\nI/TestRunner: finished: recyclerViewTest(ui.MainActivityTest)\n\nandroidx.test.espresso.NoActivityResumedException: No activities found. Did you forget to launch the activity by calling getActivity() or startActivitySync or similar?\n    at dalvik.system.VMStack.getThreadStackTrace(Native Method)\n    at java.lang.Thread.getStackTrace(Thread.java:1736)\n    at androidx.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:12)\n    at androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:7)\n    at androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:8)\n    at androidx.test.espresso.ViewInteraction.desugaredPerform(ViewInteraction.java:11)\n    at androidx.test.espresso.ViewInteraction.perform(ViewInteraction.java:4)\n    at ui.MainActivityTest.recyclerViewTest(MainActivityTest.java:58)\n\nI/TestRunner: run finished: 1 tests, 1 failed, 0 ignored\nTests ran to completion.\n\nI/MonitoringInstr: waitForActivitiesToComplete() took: 0ms\nDisconnected from the target VM, address: 'localhost:50308', transport: 'socket'\n\n</code></pre>\n<p>After &quot;RecyclerViewActions.actionOnItemAtPosition(0, click()&quot; activity status is DESTROYED and copy of code take error &quot;androidx.test.espresso.NoActivityResumedException: No activities found.&quot; How click can destoy activity? How can i fix it? I have 3 or more items in recyclerview. I switched off animation from <a href=\"https://developer.android.com/training/testing/espresso/setup\" rel=\"nofollow noreferrer\">recommendation</a>. I use 3.4.0 version espresso. No any ideas what to do.</p>\n"},{"tags":["java","spring","spring-boot","aop","spring-aop"],"comments":[{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1633071104,"post_id":69398432,"comment_id":122666961,"body_markdown":"`ModelRequest` is not a spring managed bean so AOP cannot work on it.","body":"<code>ModelRequest</code> is not a spring managed bean so AOP cannot work on it."},{"owner":{"account_id":21082640,"reputation":69,"user_id":15496597,"display_name":"Snehasis Rout"},"score":0,"creation_date":1633084485,"post_id":69398432,"comment_id":122671781,"body_markdown":"I have annotated it with @Component , still same issue","body":"I have annotated it with @Component , still same issue"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1634197724,"post_id":69398432,"comment_id":122961950,"body_markdown":"I reformatted your sample code, splitting code blocks by class, adding syntax highlighting  and unifying indentation. Maybe next time you can do that by yourself. BTW, your classes do not have imports, i.e. unless somebody happens to know the Lombok `@Data` annotation, she is not going to understand where setters are supposed to be called. Please do add some more context to your future questions. Thank you very much.","body":"I reformatted your sample code, splitting code blocks by class, adding syntax highlighting  and unifying indentation. Maybe next time you can do that by yourself. BTW, your classes do not have imports, i.e. unless somebody happens to know the Lombok <code>@Data</code> annotation, she is not going to understand where setters are supposed to be called. Please do add some more context to your future questions. Thank you very much."}],"answers":[{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633146323,"creation_date":1633146323,"answer_id":69413816,"question_id":69398432,"body_markdown":"Spring AOP only works on Spring Container managed beans.\r\nFrom the documentation : [5.2. Spring AOP Capabilities and Goals][1] \r\n\r\n*Spring AOP currently supports only method execution join points (advising the execution of methods on Spring beans)*\r\n\r\n The `ModelRequest` parameter instance of `createCountryExceptionRule()` method is not a Spring bean ( annotating the `ModelRequest` class with `@Component` has no effect here).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-introduction-spring-defn","title":"Spring AOP not working for model class in spring boot","body":"<p>Spring AOP only works on Spring Container managed beans.\nFrom the documentation : <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-introduction-spring-defn\" rel=\"nofollow noreferrer\">5.2. Spring AOP Capabilities and Goals</a></p>\n<p><em>Spring AOP currently supports only method execution join points (advising the execution of methods on Spring beans)</em></p>\n<p>The <code>ModelRequest</code> parameter instance of <code>createCountryExceptionRule()</code> method is not a Spring bean ( annotating the <code>ModelRequest</code> class with <code>@Component</code> has no effect here).</p>\n"}],"owner":{"account_id":21082640,"reputation":69,"user_id":15496597,"display_name":"Snehasis Rout"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634197774,"creation_date":1633033253,"question_id":69398432,"body_markdown":"My aspect class is calling the aspect while startup. \r\n\r\nbut after calling the api mentioned below the model setter methods are not handled through aspect\r\n\r\n```java\r\n@RestController\r\n@AllArgsConstructor\r\n@Slf4j\r\npublic class MyController {\r\n  @PostMapping(&quot;/terms&quot;)\r\n  public Mono&lt;ResponseEntity&lt;ModelResponse&gt;&gt; createCountryExceptionRule(@RequestBody ModelRequest model) {\r\n    model.setField1(&quot;test&quot;);\r\n    //some statements\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n@Data\r\nclass ModelRequest{\r\n  String field1;\r\n  String field2;\r\n}\r\n```\r\n\r\n```java\r\n@Aspect\r\n@Component\r\nclass MyAspect {\r\n  @Before(&quot;execution(public * *.set*(..))&quot;)\r\n  public void test(JoinPoint joinPoint) {\r\n    System.out.println(&quot;Before method:&quot; + joinPoint.getSignature());\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableAspectJAutoProxy(proxyTargetClass=true)\r\npublic class MyApplication {\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(MyApplication.class, args);\r\n  }\r\n}\r\n```\r\n\r\ndependency i have added is below\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe aspect is not getting called if I&#39;m calling the api through http request\r\n\r\nwhat&#39;s wrong am I doing here or anything I&#39;m missing?\r\n","title":"Spring AOP not working for model class in spring boot","body":"<p>My aspect class is calling the aspect while startup.</p>\n<p>but after calling the api mentioned below the model setter methods are not handled through aspect</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@AllArgsConstructor\n@Slf4j\npublic class MyController {\n  @PostMapping(&quot;/terms&quot;)\n  public Mono&lt;ResponseEntity&lt;ModelResponse&gt;&gt; createCountryExceptionRule(@RequestBody ModelRequest model) {\n    model.setField1(&quot;test&quot;);\n    //some statements\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\nclass ModelRequest{\n  String field1;\n  String field2;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\nclass MyAspect {\n  @Before(&quot;execution(public * *.set*(..))&quot;)\n  public void test(JoinPoint joinPoint) {\n    System.out.println(&quot;Before method:&quot; + joinPoint.getSignature());\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAspectJAutoProxy(proxyTargetClass=true)\npublic class MyApplication {\n  public static void main(String[] args) {\n    SpringApplication.run(MyApplication.class, args);\n  }\n}\n</code></pre>\n<p>dependency i have added is below</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The aspect is not getting called if I'm calling the api through http request</p>\n<p>what's wrong am I doing here or anything I'm missing?</p>\n"},{"tags":["java","apache-poi","docx","xwpf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1634203272,"post_id":69566899,"comment_id":122964146,"body_markdown":"https://stackoverflow.com/questions/43511968/how-to-set-image-size-is-dynamically-in-poi-word-run-addpicture/43514492#43514492","body":"<a href=\"https://stackoverflow.com/questions/43511968/how-to-set-image-size-is-dynamically-in-poi-word-run-addpicture/43514492#43514492\" title=\"how to set image size is dynamically in poi word run addpicture\">stackoverflow.com/questions/43511968/&hellip;</a>"},{"owner":{"account_id":1385390,"reputation":537,"user_id":1317578,"display_name":"anlar"},"score":0,"creation_date":1634236471,"post_id":69566899,"comment_id":122977774,"body_markdown":"@AxelRichter Thank you. I know it is possible to process an image before to get its dimensions. I wanted to know whether it is possible to achieve the same without analyzing an image.","body":"@AxelRichter Thank you. I know it is possible to process an image before to get its dimensions. I wanted to know whether it is possible to achieve the same without analyzing an image."}],"owner":{"account_id":1385390,"reputation":537,"user_id":1317578,"display_name":"anlar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634197650,"creation_date":1634197650,"question_id":69566899,"body_markdown":"I&#39;m using Apache POI XWPF to insert an image into .docx file with the following code:\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    XWPFDocument docx = new XWPFDocument();\r\n    XWPFRun run = docx.addParagraph().createRun();\r\n    run.addPicture(&lt;input_stream&gt;, XWPFDocument.PICTURE_TYPE_PNG, &quot;filename&quot;, Units.toEMU(250), Units.toEMU(140));\r\n\r\nProblem is that it is required to specify both height and width of the image, which I may not know.\r\n\r\nI want to add an image without providing its dimensions or only providing one of them (so another one will be calculated to keep images aspect ratio).","title":"How to add a picture to .docx with Apache POI XWPF without specifying its size","body":"<p>I'm using Apache POI XWPF to insert an image into .docx file with the following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>XWPFDocument docx = new XWPFDocument();\nXWPFRun run = docx.addParagraph().createRun();\nrun.addPicture(&lt;input_stream&gt;, XWPFDocument.PICTURE_TYPE_PNG, &quot;filename&quot;, Units.toEMU(250), Units.toEMU(140));\n</code></pre>\n<p>Problem is that it is required to specify both height and width of the image, which I may not know.</p>\n<p>I want to add an image without providing its dimensions or only providing one of them (so another one will be calculated to keep images aspect ratio).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2020478,"reputation":30439,"user_id":1806780,"accept_rate":0,"display_name":"Sami Kuhmonen"},"score":0,"creation_date":1634188627,"post_id":69565317,"comment_id":122959359,"body_markdown":"Why not just use the return value?","body":"Why not just use the return value?"},{"owner":{"display_name":"user15511009"},"score":0,"creation_date":1634189564,"post_id":69565317,"comment_id":122959546,"body_markdown":"as traverse is recursive function and if i convert it into int method then return statements will cause problems","body":"as traverse is recursive function and if i convert it into int method then return statements will cause problems"},{"owner":{"account_id":2020478,"reputation":30439,"user_id":1806780,"accept_rate":0,"display_name":"Sami Kuhmonen"},"score":0,"creation_date":1634190384,"post_id":69565317,"comment_id":122959729,"body_markdown":"How so? It’s regular to have recursive functions return values","body":"How so? It’s regular to have recursive functions return values"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634197632,"creation_date":1634197632,"answer_id":69566897,"question_id":69565317,"body_markdown":"Just because the logic is not language-dependent doesn&#39;t mean that the implementation is also not language-dependent. Imagine implementing the logic in a purely functional language that has no mutable state - the logic would be still the same, but the implementation needs to be very different.\r\n\r\nTo solve this problem your recursive function needs to update two values (`cnt` and `ans`) which makes the problem a bit unwieldy for the usual style (return the result directly).\r\n\r\nInstead of that I would implement this with a helper object:\r\n\r\n    class Solution {\r\n        public int kthSmallest(TreeNode root, int k) {\r\n            Traverser t = new Traverser();\r\n            t.traverse(root, k);\r\n            return t.ans;\r\n        }\r\n    \r\n        static class Traverser {\r\n            int cnt = 1;\r\n            int ans = 0;\r\n            void traverse(TreeNode root, int k) {\r\n                if (root == null) return;\r\n\r\n                traverse(root.left, k);\r\n                if (cnt++ == k) {\r\n                    ans = root.val;\r\n                    return;\r\n                }\r\n                traverse(root.right, k);\r\n            }\r\n        }\r\n    }\r\n\r\nNote that the `Traverser.traverse()` method neatly aligns with your `traverse` implementation - just the two parameters `ans` and `cnt` have been migrated into fields of the `Traverser` class.","title":"230. Kth Smallest Element in a BST","body":"<p>Just because the logic is not language-dependent doesn't mean that the implementation is also not language-dependent. Imagine implementing the logic in a purely functional language that has no mutable state - the logic would be still the same, but the implementation needs to be very different.</p>\n<p>To solve this problem your recursive function needs to update two values (<code>cnt</code> and <code>ans</code>) which makes the problem a bit unwieldy for the usual style (return the result directly).</p>\n<p>Instead of that I would implement this with a helper object:</p>\n<pre><code>class Solution {\n    public int kthSmallest(TreeNode root, int k) {\n        Traverser t = new Traverser();\n        t.traverse(root, k);\n        return t.ans;\n    }\n\n    static class Traverser {\n        int cnt = 1;\n        int ans = 0;\n        void traverse(TreeNode root, int k) {\n            if (root == null) return;\n\n            traverse(root.left, k);\n            if (cnt++ == k) {\n                ans = root.val;\n                return;\n            }\n            traverse(root.right, k);\n        }\n    }\n}\n</code></pre>\n<p>Note that the <code>Traverser.traverse()</code> method neatly aligns with your <code>traverse</code> implementation - just the two parameters <code>ans</code> and <code>cnt</code> have been migrated into fields of the <code>Traverser</code> class.</p>\n"}],"owner":{"display_name":"user15511009"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69566897,"answer_count":1,"score":0,"last_activity_date":1634197632,"creation_date":1634187756,"question_id":69565317,"body_markdown":"in c++ we can change the value of variable though pointers and references in another function but we cannot do it in java . Let me come back to the query\r\n \r\nThis is the problem description, Given the root of a binary search tree, and an integer k, return the kth smallest value (1-indexed) of all the values of the nodes in the tree.\r\n\r\n    /**\r\n     * Definition for a binary tree node.\r\n     * public class TreeNode {\r\n     *     int val;\r\n     *     TreeNode left;\r\n     *     TreeNode right;\r\n     *     TreeNode() {}\r\n     *     TreeNode(int val) { this.val = val; }\r\n     *     TreeNode(int val, TreeNode left, TreeNode right) {\r\n     *         this.val = val;\r\n     *         this.left = left;\r\n     *         this.right = right;\r\n     *     }\r\n     * }\r\n     */\r\n    class Solution {\r\n        public int kthSmallest(TreeNode root, int k) {\r\n            Integer cnt = 1, ans = 0;\r\n            traverse(root, k , cnt, ans);\r\n            return ans;\r\n            \r\n        }\r\n        \r\n        void traverse(TreeNode root, int k, Integer cnt, Integer ans){\r\n            if(root == null) return;\r\n            \r\n            traverse(root.left, k, cnt, ans);\r\n            if(cnt++ == k){\r\n                ans = new Integer(root.val);\r\n                return;\r\n            }\r\n            traverse(root.right, k, cnt, ans);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\nSuppose I want to change the value of ans through traverse function which is void and does not return anything but wants to change the value of ans how can I do that?\r\nAs logic of program is not language-dependent there should be a way to it\r\nthe value of ans initially is zero and returning zero for any input\r\n","title":"230. Kth Smallest Element in a BST","body":"<p>in c++ we can change the value of variable though pointers and references in another function but we cannot do it in java . Let me come back to the query</p>\n<p>This is the problem description, Given the root of a binary search tree, and an integer k, return the kth smallest value (1-indexed) of all the values of the nodes in the tree.</p>\n<pre><code>/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\nclass Solution {\n    public int kthSmallest(TreeNode root, int k) {\n        Integer cnt = 1, ans = 0;\n        traverse(root, k , cnt, ans);\n        return ans;\n        \n    }\n    \n    void traverse(TreeNode root, int k, Integer cnt, Integer ans){\n        if(root == null) return;\n        \n        traverse(root.left, k, cnt, ans);\n        if(cnt++ == k){\n            ans = new Integer(root.val);\n            return;\n        }\n        traverse(root.right, k, cnt, ans);\n\n    }\n}\n</code></pre>\n<p>Suppose I want to change the value of ans through traverse function which is void and does not return anything but wants to change the value of ans how can I do that?\nAs logic of program is not language-dependent there should be a way to it\nthe value of ans initially is zero and returning zero for any input</p>\n"},{"tags":["java","junit","mockito","spring-test"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":3,"creation_date":1511352403,"post_id":47434183,"comment_id":81822752,"body_markdown":"Tr using `@DirtiesContext(classMode=ClassMode.AFTER_EACH_TEST_METHOD)`","body":"Tr using <code>@DirtiesContext(classMode=ClassMode.AFTER_EACH_TEST_METHOD)</code>"},{"owner":{"account_id":12006352,"reputation":243,"user_id":8784586,"display_name":"Rob Obdeijn"},"score":3,"creation_date":1511352406,"post_id":47434183,"comment_id":81822755,"body_markdown":"You&#39;re doing `verify(cacheServices, BDDMockito.times(1))` in both methods meaning it can only be invoked once. It is the same object so it gets invoked twice when you run the full suite.","body":"You&#39;re doing <code>verify(cacheServices, BDDMockito.times(1))</code> in both methods meaning it can only be invoked once. It is the same object so it gets invoked twice when you run the full suite."},{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":2,"creation_date":1511353810,"post_id":47434183,"comment_id":81823620,"body_markdown":"`@DirtiesContext` produces quite a bit of overhead, I would suggest solving the problem without that, for example by resetting the offending mocks after the test. See the answer that Chi Coung Le posted below for more possibilities.","body":"<code>@DirtiesContext</code> produces quite a bit of overhead, I would suggest solving the problem without that, for example by resetting the offending mocks after the test. See the answer that Chi Coung Le posted below for more possibilities."}],"answers":[{"tags":[],"owner":{"account_id":1094073,"reputation":368,"user_id":8458293,"display_name":"Chi Cuong Le"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1511352588,"creation_date":1511352588,"answer_id":47434378,"question_id":47434183,"body_markdown":"Reason: your test load one application context with bean mock inside. The bean mocks are dirty after any test. You have a dirty application context also.\r\n\r\nSolution: you have to clean bean mock. Using Mockito.reset(mocks) after each test. I&#39;ve found sth similar: https://stackoverflow.com/questions/18164123/how-to-clean-up-mocks-in-spring-tests-when-using-mockito","title":"Mockito Tests Pass individually but fail as part of a suite","body":"<p>Reason: your test load one application context with bean mock inside. The bean mocks are dirty after any test. You have a dirty application context also.</p>\n\n<p>Solution: you have to clean bean mock. Using Mockito.reset(mocks) after each test. I've found sth similar: <a href=\"https://stackoverflow.com/questions/18164123/how-to-clean-up-mocks-in-spring-tests-when-using-mockito\">How to clean up mocks in spring tests when using Mockito</a></p>\n"},{"tags":[],"owner":{"account_id":7087418,"reputation":11,"user_id":5423801,"display_name":"Julian Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627751240,"creation_date":1627751240,"answer_id":68604231,"question_id":47434183,"body_markdown":"I am late in the game, but thought that this could be useful for people that are still experiencing the same issue(source:https://reflectoring.io/clean-unit-tests-with-mockito/):\r\n\r\n    class CityServiceImplTest {\r\n    \r\n      // System under Test (SuT)\r\n      private CityService cityService;\r\n    \r\n      // Mock\r\n      private CityRepository cityRepository;\r\n    \r\n      @BeforeEach\r\n      void setUp() {\r\n        cityRepository = Mockito.mock(CityRepository.class);\r\n        cityService = new CityServiceImpl(cityRepository);\r\n      }\r\n    \r\n      // Test cases omitted for brevity.\r\n    \r\n    }\r\n\r\n\r\nWith this approach, I eliminated the @SpringBootTest annotation altogether and made the test class very light weight.","title":"Mockito Tests Pass individually but fail as part of a suite","body":"<p>I am late in the game, but thought that this could be useful for people that are still experiencing the same issue(source:<a href=\"https://reflectoring.io/clean-unit-tests-with-mockito/\" rel=\"nofollow noreferrer\">https://reflectoring.io/clean-unit-tests-with-mockito/</a>):</p>\n<pre><code>class CityServiceImplTest {\n\n  // System under Test (SuT)\n  private CityService cityService;\n\n  // Mock\n  private CityRepository cityRepository;\n\n  @BeforeEach\n  void setUp() {\n    cityRepository = Mockito.mock(CityRepository.class);\n    cityService = new CityServiceImpl(cityRepository);\n  }\n\n  // Test cases omitted for brevity.\n\n}\n</code></pre>\n<p>With this approach, I eliminated the @SpringBootTest annotation altogether and made the test class very light weight.</p>\n"},{"tags":[],"owner":{"account_id":19695043,"reputation":181,"user_id":14419099,"display_name":"firefighter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634197535,"creation_date":1634197535,"answer_id":69566878,"question_id":47434183,"body_markdown":"I faced with this problem too and solved the problem like this;\r\n\r\nAdded these 3 annotations to my test classs:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @TestPropertySource(properties = {\r\n            &quot;spring.jpa.hibernate.ddl-auto=none&quot;\r\n    })\r\n    @SpringBootTest\r\n\r\nCreated Mocks with:\r\n\r\n    @InjectMocks\r\n    private ImplService service;\r\n    \r\n    @Mock\r\n    private MailService mailService;\r\n\r\nIn the set up:\r\n\r\n        @Before\r\n        public void setUp() {\r\n            LockAssert.TestHelper.makeAllAssertsPass(true);\r\n            MockitoAnnotations.initMocks(this);\r\n            // In case if you are using &quot;environment&quot; in your  \r\n            ReflectionTestUtils.setField(service, &quot;environment&quot;, &quot;testEnvironment&quot;);\r\n            ....\r\n        }","title":"Mockito Tests Pass individually but fail as part of a suite","body":"<p>I faced with this problem too and solved the problem like this;</p>\n<p>Added these 3 annotations to my test classs:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@TestPropertySource(properties = {\n        &quot;spring.jpa.hibernate.ddl-auto=none&quot;\n})\n@SpringBootTest\n</code></pre>\n<p>Created Mocks with:</p>\n<pre><code>@InjectMocks\nprivate ImplService service;\n\n@Mock\nprivate MailService mailService;\n</code></pre>\n<p>In the set up:</p>\n<pre><code>    @Before\n    public void setUp() {\n        LockAssert.TestHelper.makeAllAssertsPass(true);\n        MockitoAnnotations.initMocks(this);\n        // In case if you are using &quot;environment&quot; in your  \n        ReflectionTestUtils.setField(service, &quot;environment&quot;, &quot;testEnvironment&quot;);\n        ....\n    }\n</code></pre>\n"}],"owner":{"account_id":6830,"reputation":4131,"user_id":11612,"accept_rate":92,"display_name":"Damien"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29711,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":47434378,"answer_count":3,"score":18,"last_activity_date":1634197535,"creation_date":1511351979,"question_id":47434183,"body_markdown":"I have a case where my mockito tests all pass individually but can fail when run as part of a testing suite.\r\nI am using mockito version 2.9.0\r\n\r\nMy test class is as follows\r\n\r\n    import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\r\n    import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n    \r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.BDDMockito;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.test.context.ContextConfiguration;\r\n    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\r\n    import org.springframework.test.context.web.WebAppConfiguration;\r\n    import org.springframework.test.web.servlet.MockMvc;\r\n    import org.springframework.test.web.servlet.setup.MockMvcBuilders;\r\n    import org.springframework.web.context.WebApplicationContext;\r\n    \r\n    import com.cache.CacheServices;\r\n    \r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @WebAppConfiguration\r\n    @ContextConfiguration(value={&quot;classpath:generalConfig/generalConfigMocks-context.xml&quot;})\r\n    public class GeneralConfigAPIClientTest {\r\n    \r\n        private MockMvc mockMvc;\r\n    \t\r\n        @Autowired\r\n        CacheServices cacheServices; \r\n        \r\n        @Autowired\r\n        IGeneralConfigServices generalConfigServices;\r\n        \r\n        @Autowired \r\n        private WebApplicationContext wac;\r\n        \r\n        /**\r\n         * Set up the test context, initialize the mockMvc.\r\n         * */\r\n        @Before \r\n        public void setUp() {\r\n            this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();       \r\n        }\r\n    \r\n    \t@Test\r\n    \tpublic void testEmptyGeneralConfigCache_FailureFalseReturned() throws Exception {\r\n    \r\n    \t\tBDDMockito.given(cacheServices.emptyCacheContents(BDDMockito.anyString())).willReturn(false);\r\n    \t\t\r\n    \t\tthis.mockMvc.perform(get(&quot;/generalConfig/emptyGeneralConfigCache&quot;))\r\n    \t\t\t\t.andExpect(status().isOk())\t\t\r\n    \t\t\t\t.andReturn();\r\n    \r\n    \t\tBDDMockito.verify(cacheServices, BDDMockito.times(1)).emptyCacheContents(BDDMockito.anyString());\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void testEmptyGeneralConfigCache_SuccessTrueReturned() throws Exception {\r\n    \t\tBDDMockito.given(cacheServices.emptyCacheContents(BDDMockito.anyString())).willReturn(true);\r\n    \t\t\r\n    \t\tthis.mockMvc.perform(get(&quot;/generalConfig/emptyGeneralConfigCache&quot;))\r\n    \t\t\t\t.andExpect(status().isOk())\t\t\r\n    \t\t\t\t.andReturn();\r\n    \r\n    \t\tBDDMockito.verify(cacheServices, BDDMockito.times(1)).emptyCacheContents(BDDMockito.anyString());\r\n    \t}\r\n    \t\r\n    \t}\r\n\r\nThe contents of generalConfig/generalConfigMocks-context.xml are as follows\r\n\r\n   \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:oxm=&quot;http://www.springframework.org/schema/oxm&quot;\r\n    \txmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    \txmlns:ehcache=&quot;http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring&quot;\r\n    \txmlns:cache=&quot;http://www.springframework.org/schema/cache&quot;\r\n    \txsi:schemaLocation=&quot;\r\n       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\r\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\r\n       http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd\r\n       http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring\r\n       http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd\r\n       http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-4.1.xsd\r\n       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \r\n    \t&lt;context:annotation-config /&gt;\r\n    \r\n    \t&lt;context:component-scan base-package=&quot;com..config&quot; /&gt;\r\n    \r\n    \t&lt;bean id=&quot;generalConfigServices&quot; class=&quot;org.mockito.BDDMockito&quot; factory-method=&quot;mock&quot;&gt;\r\n    \t    &lt;constructor-arg value=&quot;com.config.IGeneralConfigServices&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t\r\n    \t&lt;bean id=&quot;cacheServices&quot; class=&quot;org.mockito.BDDMockito&quot; factory-method=&quot;mock&quot;&gt;\r\n    \t    &lt;constructor-arg value=&quot;com.cache.CacheServices&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \r\n    &lt;/beans&gt;\r\n\r\nA sample error response I get from running my tests is as follows\r\n\r\n        org.mockito.exceptions.verification.TooManyActualInvocations: \r\n    cacheServices.emptyCacheContents(\r\n        &lt;any string&gt;\r\n    );\r\n    Wanted 1 time:\r\n    -&gt; at com.config.GeneralConfigAPIClientTest.testEmptyGeneralConfigCache_SuccessTrueReturned(GeneralConfigAPIClientTest.java:65)\r\n    But was 2 times. Undesired invocation:\r\n    -&gt; at com.config.GeneralConfigAPIClient.callEmptyGeneralConfigCache(GeneralConfigAPIClient.java:34)\r\n    \r\n    \tat com.config.GeneralConfigAPIClientTest.testEmptyGeneralConfigCache_SuccessTrueReturned(GeneralConfigAPIClientTest.java:65)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n    \tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n    \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:539)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207)\r\n\r\n\r\n\r\nCan anyone offer any insights as to why my tests are passing individually but failing as a group","title":"Mockito Tests Pass individually but fail as part of a suite","body":"<p>I have a case where my mockito tests all pass individually but can fail when run as part of a testing suite.\nI am using mockito version 2.9.0</p>\n\n<p>My test class is as follows</p>\n\n<pre><code>import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.BDDMockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\nimport org.springframework.test.context.web.WebAppConfiguration;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\nimport org.springframework.web.context.WebApplicationContext;\n\nimport com.cache.CacheServices;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@WebAppConfiguration\n@ContextConfiguration(value={\"classpath:generalConfig/generalConfigMocks-context.xml\"})\npublic class GeneralConfigAPIClientTest {\n\n    private MockMvc mockMvc;\n\n    @Autowired\n    CacheServices cacheServices; \n\n    @Autowired\n    IGeneralConfigServices generalConfigServices;\n\n    @Autowired \n    private WebApplicationContext wac;\n\n    /**\n     * Set up the test context, initialize the mockMvc.\n     * */\n    @Before \n    public void setUp() {\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();       \n    }\n\n    @Test\n    public void testEmptyGeneralConfigCache_FailureFalseReturned() throws Exception {\n\n        BDDMockito.given(cacheServices.emptyCacheContents(BDDMockito.anyString())).willReturn(false);\n\n        this.mockMvc.perform(get(\"/generalConfig/emptyGeneralConfigCache\"))\n                .andExpect(status().isOk())     \n                .andReturn();\n\n        BDDMockito.verify(cacheServices, BDDMockito.times(1)).emptyCacheContents(BDDMockito.anyString());\n    }\n\n    @Test\n    public void testEmptyGeneralConfigCache_SuccessTrueReturned() throws Exception {\n        BDDMockito.given(cacheServices.emptyCacheContents(BDDMockito.anyString())).willReturn(true);\n\n        this.mockMvc.perform(get(\"/generalConfig/emptyGeneralConfigCache\"))\n                .andExpect(status().isOk())     \n                .andReturn();\n\n        BDDMockito.verify(cacheServices, BDDMockito.times(1)).emptyCacheContents(BDDMockito.anyString());\n    }\n\n    }\n</code></pre>\n\n<p>The contents of generalConfig/generalConfigMocks-context.xml are as follows</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:oxm=\"http://www.springframework.org/schema/oxm\"\n    xmlns:util=\"http://www.springframework.org/schema/util\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:ehcache=\"http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring\"\n    xmlns:cache=\"http://www.springframework.org/schema/cache\"\n    xsi:schemaLocation=\"\n   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\n   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\n   http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd\n   http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring\n   http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd\n   http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-4.1.xsd\n   http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\"&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;context:annotation-config /&gt;\n\n    &lt;context:component-scan base-package=\"com..config\" /&gt;\n\n    &lt;bean id=\"generalConfigServices\" class=\"org.mockito.BDDMockito\" factory-method=\"mock\"&gt;\n        &lt;constructor-arg value=\"com.config.IGeneralConfigServices\"/&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"cacheServices\" class=\"org.mockito.BDDMockito\" factory-method=\"mock\"&gt;\n        &lt;constructor-arg value=\"com.cache.CacheServices\"/&gt;\n    &lt;/bean&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>A sample error response I get from running my tests is as follows</p>\n\n<pre><code>    org.mockito.exceptions.verification.TooManyActualInvocations: \ncacheServices.emptyCacheContents(\n    &lt;any string&gt;\n);\nWanted 1 time:\n-&gt; at com.config.GeneralConfigAPIClientTest.testEmptyGeneralConfigCache_SuccessTrueReturned(GeneralConfigAPIClientTest.java:65)\nBut was 2 times. Undesired invocation:\n-&gt; at com.config.GeneralConfigAPIClient.callEmptyGeneralConfigCache(GeneralConfigAPIClient.java:34)\n\n    at com.config.GeneralConfigAPIClientTest.testEmptyGeneralConfigCache_SuccessTrueReturned(GeneralConfigAPIClientTest.java:65)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:539)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207)\n</code></pre>\n\n<p>Can anyone offer any insights as to why my tests are passing individually but failing as a group</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634197363,"creation_date":1634197363,"answer_id":69566831,"question_id":69441972,"body_markdown":"That&#39;s not possible, but what you can do is use inheritance to avoid duplication.\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class Afiliado implements Serializable {\r\n    \r\n        @Id\r\n        @Column(name = &quot;clcuenta&quot;)\r\n        private int clAccount;\r\n        \r\n        @Column(name=&quot;prefijo&quot;)\r\n        private String prefix=&quot;&quot;;\r\n        \r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;afiliadoPMX&quot;)\r\n    public class AfiliadoPMX extends Afiliado {}","title":"Create Generic Entity model for JPA","body":"<p>That's not possible, but what you can do is use inheritance to avoid duplication.</p>\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class Afiliado implements Serializable {\n\n    @Id\n    @Column(name = &quot;clcuenta&quot;)\n    private int clAccount;\n    \n    @Column(name=&quot;prefijo&quot;)\n    private String prefix=&quot;&quot;;\n    \n}\n\n@Entity\n@Table(name = &quot;afiliadoPMX&quot;)\npublic class AfiliadoPMX extends Afiliado {}\n</code></pre>\n"}],"owner":{"account_id":22941602,"reputation":1,"user_id":17074260,"display_name":"Carlos Axel Reyes Amezcua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634197363,"creation_date":1633378733,"question_id":69441972,"body_markdown":"im trying to modelate with JPA mutiple tables where all of them have the same structure but different names cAfiliado[**PREFIX**].\r\n\r\n - cAfiliado**PMX** \r\n - cAfiliado**PMQ** \r\n - cAfiliado**QAW** \r\n - cAfiliado**BMX**\r\n\r\n\r\nThe issue is that there are hundres of tables and maybe more in the future. \r\n\r\nSo I want to know if its possible to do like one Generic Pojo that can be read from any table specifying the name.\r\n\r\n```\r\n\r\n    @Entity\r\n    @Table(name = &quot;afiliado&quot;{PREFIX})\r\n    @Data\r\n    public class Afiliado implements Serializable {\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;clcuenta&quot;)\r\n    \tprivate int clAccount;\r\n    \t\r\n    \t@Column(name=&quot;prefijo&quot;)\r\n    \tprivate String prefix=&quot;&quot;;\r\n    \t\r\n    }\r\n\r\n```\r\n\r\nMaybe using a parameter or something like that \r\n\r\n\r\nI have already solved using EntityManager and Native Query \r\n\r\nHere is what I have done already \r\n\r\nStringBuilder querySearch = new StringBuilder(&quot;SELECT * FROM cafiliado&quot;).append(prefix).append(&quot; WHERE Clave = ?1&quot;);\r\n\r\nSELECT * FROM cafiliado[**PREFIX**] \r\n\r\n","title":"Create Generic Entity model for JPA","body":"<p>im trying to modelate with JPA mutiple tables where all of them have the same structure but different names cAfiliado[<strong>PREFIX</strong>].</p>\n<ul>\n<li>cAfiliado<strong>PMX</strong></li>\n<li>cAfiliado<strong>PMQ</strong></li>\n<li>cAfiliado<strong>QAW</strong></li>\n<li>cAfiliado<strong>BMX</strong></li>\n</ul>\n<p>The issue is that there are hundres of tables and maybe more in the future.</p>\n<p>So I want to know if its possible to do like one Generic Pojo that can be read from any table specifying the name.</p>\n<pre><code>\n    @Entity\n    @Table(name = &quot;afiliado&quot;{PREFIX})\n    @Data\n    public class Afiliado implements Serializable {\n    \n        @Id\n        @Column(name = &quot;clcuenta&quot;)\n        private int clAccount;\n        \n        @Column(name=&quot;prefijo&quot;)\n        private String prefix=&quot;&quot;;\n        \n    }\n\n</code></pre>\n<p>Maybe using a parameter or something like that</p>\n<p>I have already solved using EntityManager and Native Query</p>\n<p>Here is what I have done already</p>\n<p>StringBuilder querySearch = new StringBuilder(&quot;SELECT * FROM cafiliado&quot;).append(prefix).append(&quot; WHERE Clave = ?1&quot;);</p>\n<p>SELECT * FROM cafiliado[<strong>PREFIX</strong>]</p>\n"},{"tags":["java","arrays","arraylist","addition"],"comments":[{"owner":{"account_id":12074979,"reputation":129,"user_id":8828811,"display_name":"Aliics"},"score":0,"creation_date":1628812338,"post_id":68765259,"comment_id":121527807,"body_markdown":"You can use the ArrayList as a Stream by called &quot;.stream()&quot; on your ArrayList.\nThis opens up a lot of functional programming methods to use.\nYou&#39;ll want to use &quot;.filter(Predicate predicate)&quot; here, it should more or less perfectly suite your needs. Once done with your &quot;.stream()&quot;, I suppose you&#39;ll want a new ArrayList of the non-reserved animals, so you&#39;ll call &quot;.collect(Collector collector)&quot; for pre-16 JDK implementations.\n\n\nAn example pre-16:\n`dogList.stream().filter(d -&gt; !d.reversed).collect(Collectors.toList)`.\n\n\nAn example &gt;16:\n`dogList.stream().filter(d -&gt; !d.reserved).toList()`","body":"You can use the ArrayList as a Stream by called &quot;.stream()&quot; on your ArrayList. This opens up a lot of functional programming methods to use. You&#39;ll want to use &quot;.filter(Predicate predicate)&quot; here, it should more or less perfectly suite your needs. Once done with your &quot;.stream()&quot;, I suppose you&#39;ll want a new ArrayList of the non-reserved animals, so you&#39;ll call &quot;.collect(Collector collector)&quot; for pre-16 JDK implementations.   An example pre-16: <code>dogList.stream().filter(d -&gt; !d.reversed).collect(Collectors.toList)</code>.   An example &gt;16: <code>dogList.stream().filter(d -&gt; !d.reserved).toList()</code>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628813941,"creation_date":1628813941,"answer_id":68765472,"question_id":68765259,"body_markdown":"You should not be using `==` to test for String equality.  Use `equals`\r\n```\r\n    if (listType == &quot;dog&quot;) { \r\n           System.out.println(dogList.toString());\r\n    } \r\n    else if(listType == &quot;monkey&quot;) { \r\n        System.out.println(monkeyList.toString());\r\n     }\r\n``` \r\nChange to\r\n```\r\n   if (&quot;dog&quot;.equals(listType)) { \r\n           System.out.println(dogList.toString());\r\n    } \r\n    else if(&quot;monkey&quot;.equals(listType)) { \r\n        System.out.println(monkeyList.toString());\r\n    } \r\n                ","title":"How do I search my array list to find a reserved animal?","body":"<p>You should not be using <code>==</code> to test for String equality.  Use <code>equals</code></p>\n<pre><code>    if (listType == &quot;dog&quot;) { \n           System.out.println(dogList.toString());\n    } \n    else if(listType == &quot;monkey&quot;) { \n        System.out.println(monkeyList.toString());\n     }\n</code></pre>\n<p>Change to</p>\n<pre><code>   if (&quot;dog&quot;.equals(listType)) { \n           System.out.println(dogList.toString());\n    } \n    else if(&quot;monkey&quot;.equals(listType)) { \n        System.out.println(monkeyList.toString());\n    } \n                \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22686308,"reputation":31,"user_id":16855873,"display_name":"Brian Fulton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634197265,"creation_date":1634197265,"answer_id":69566812,"question_id":68765259,"body_markdown":"Like my father always told me,... &quot;The easiest way to do something is to not do it.&quot; kidding,... mostly, instead of searching your list, make a new one. under monkey and dog have availableList(); or whatever you want. when your user fills data with the setter just use if/else to also fill the available animal to your new list. (code below is just the reserved setter, all others above it with the add line at the top.)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n            System.out.println(&quot;Is &quot; + name + &quot;reserved?&quot;);\r\n\t\t\tif (scan.next().equalsIgnoreCase(&quot;yes&quot;)) {\r\n\t\t\t\tdog.setReserved(true);\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tdog.setReserved(false);\r\n\t\t\t\tRescueAnimal animal = new RescueAnimal();\r\n\t\t\t\tavailableList.add(-i, animal);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How do I search my array list to find a reserved animal?","body":"<p>Like my father always told me,... &quot;The easiest way to do something is to not do it.&quot; kidding,... mostly, instead of searching your list, make a new one. under monkey and dog have availableList(); or whatever you want. when your user fills data with the setter just use if/else to also fill the available animal to your new list. (code below is just the reserved setter, all others above it with the add line at the top.)</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>        System.out.println(\"Is \" + name + \"reserved?\");\n        if (scan.next().equalsIgnoreCase(\"yes\")) {\n            dog.setReserved(true);          \n        } else {\n            dog.setReserved(false);\n            RescueAnimal animal = new RescueAnimal();\n            availableList.add(-i, animal);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":21357123,"reputation":1,"user_id":15725938,"display_name":"CodeCreater"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1643168553,"answer_count":2,"score":-1,"last_activity_date":1634197265,"creation_date":1628811726,"question_id":68765259,"body_markdown":"Hello i am having a problem figuring out how to search my array list for an animal with a false reserve and if one is found how to print that animals name. I need to do this for all animals in both array list. I have attached my code below. I can not find the right method for searching through the array list and then printing that objects name if the element is found. \r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class Driver {\r\n    private static ArrayList&lt;Dog&gt; dogList = new ArrayList&lt;Dog&gt;();\r\n    private static ArrayList&lt;Monkey&gt; monkeyList = new ArrayList&lt;Monkey&gt;();\r\n    // Instance variables (if needed)\r\n\r\n    public static void main(String[] args) {\r\n    \tScanner scnr = new Scanner(System.in);\r\n    \t\r\n\r\n        initializeDogList();\r\n        initializeMonkeyList();\r\n        \r\n        //Menu loop\r\n        \r\n        while(true) {\r\n        \tdisplayMenu();\r\n        \tString menuOption = scnr.nextLine();\r\n        \tif (menuOption.equals(&quot;1&quot;)) {\r\n        \t\tintakeNewDog(scnr);\r\n        \t\t\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;2&quot;) ) {\r\n        \t\tintakeNewMonkey(scnr);\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;3&quot;)) {\r\n        \t\treserveAnimal(scnr);\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;4&quot;)) {\r\n        \t\tprintAnimals(&quot;dog&quot;);\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;5&quot;)) {\r\n        \t\tprintAnimals(&quot;monkey&quot;);\r\n        \t\t\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;6&quot;)){\r\n        \t\tprintAnimals(&quot;available&quot;);\r\n        \t\t\r\n        \t}\r\n        \telse if (menuOption.equals(&quot;q&quot;)) {\r\n        \t\tbreak;\r\n        \t}\r\n        \telse {\r\n        \t\tSystem.out.print(&quot;Invalid Input&quot;);\r\n        \t}\r\n        }\r\n    }\r\n\r\n    // This method prints the menu options\r\n    public static void displayMenu() {\r\n        System.out.println(&quot;\\n\\n&quot;);\r\n        System.out.println(&quot;\\t\\t\\t\\tRescue Animal System Menu&quot;);\r\n        System.out.println(&quot;[1] Intake a new dog&quot;);\r\n        System.out.println(&quot;[2] Intake a new monkey&quot;);\r\n        System.out.println(&quot;[3] Reserve an animal&quot;);\r\n        System.out.println(&quot;[4] Print a list of all dogs&quot;);\r\n        System.out.println(&quot;[5] Print a list of all monkeys&quot;);\r\n        System.out.println(&quot;[6] Print a list of all animals that are not reserved&quot;);\r\n        System.out.println(&quot;[q] Quit application&quot;);\r\n        System.out.println();\r\n        System.out.println(&quot;Enter a menu selection&quot;);\r\n    }\r\n\r\n\r\n    // Adds dogs to a list for testing\r\n    public static void initializeDogList() {\r\n        Dog dog1 = new Dog(&quot;Spot&quot;, &quot;German Shepherd&quot;, &quot;male&quot;, &quot;1&quot;, &quot;25.6&quot;, &quot;05-12-2019&quot;, &quot;United States&quot;, &quot;intake&quot;, false, &quot;United States&quot;);\r\n        Dog dog2 = new Dog(&quot;Rex&quot;, &quot;Great Dane&quot;, &quot;male&quot;, &quot;3&quot;, &quot;35.2&quot;, &quot;02-03-2020&quot;, &quot;United States&quot;, &quot;Phase I&quot;, false, &quot;United States&quot;);\r\n        Dog dog3 = new Dog(&quot;Bella&quot;, &quot;Chihuahua&quot;, &quot;female&quot;, &quot;4&quot;, &quot;25.6&quot;, &quot;12-12-2019&quot;, &quot;Canada&quot;, &quot;in service&quot;, true, &quot;Canada&quot;);\r\n\r\n        dogList.add(dog1);\r\n        dogList.add(dog2);\r\n        dogList.add(dog3);\r\n    }\r\n\r\n\r\n    // Adds monkeys to a list for testing\r\n    public static void initializeMonkeyList() {\r\n\r\n    }\r\n\r\n\r\n    //Intakes a new dog\r\n    public static void intakeNewDog(Scanner scanner) {\r\n        System.out.println(&quot;What is the dog&#39;s name?&quot;);\r\n        String name = scanner.nextLine();\r\n        for(Dog dog: dogList) {\r\n            if(dog.getName().equalsIgnoreCase(name)) {\r\n                System.out.println(&quot;\\n\\nThis dog is already in our system\\n\\n&quot;);\r\n                return; //returns to menu\r\n            }\r\n        }\r\n        \r\n        //Gathers all information for new dog\r\n        \r\n        System.out.println(&quot;What is the dog&#39;s breed?&quot;);\r\n        String breed = scanner.nextLine();\r\n        System.out.println(&quot;What is the dog&#39;s gender?&quot;);\r\n        String gender = scanner.nextLine();\r\n        System.out.println(&quot;What is the dog&#39;s age?&quot;);\r\n        String age = scanner.nextLine();\r\n        System.out.println(&quot;What is the dog&#39;s weight&quot;);\r\n        String weight = scanner.nextLine();\r\n        System.out.println(&quot;In what country was the dog acquired?&quot;);\r\n        String acquisitionDate = scanner.nextLine();\r\n        System.out.println(&quot;Where was the dog acquired?&quot;);\r\n        String acquisitionCountry = scanner.nextLine();\r\n        System.out.println(&quot;What is the dog&#39;s training status?&quot;);\r\n        String trainingStatus = scanner.nextLine();\r\n        System.out.println(&quot;What country is the dog in service?&quot;);\r\n        String inServiceCountry = scanner.nextLine();\r\n        \r\n        //Creates a new object for dogList\r\n        \r\n        Dog objt = new Dog(name, breed, gender, age, weight, acquisitionDate,\r\n\t\t\t\t acquisitionCountry, trainingStatus, false, inServiceCountry);\r\n        \r\n        //adds new dog to dogList\r\n        \r\n        dogList.add(objt);\r\n        \r\n        //End message to let user know that the animal has been added.\r\n        System.out.println(&quot;Thank you! &quot; + name + &quot; has been added to the system.&quot;);\r\n        \r\n        \r\n    }\r\n\r\n\r\n        \r\n\t\r\n        // For the project submission you must also  validate the input\r\n\t// to make sure the monkey doesn&#39;t already exist and the species type is allowed\r\n        public static void intakeNewMonkey(Scanner scanner) {\r\n            System.out.println(&quot;What is the monkey&#39;s name?&quot;);\r\n            String name = scanner.nextLine();\r\n            for(Monkey monkey: monkeyList) {\r\n                if(monkey.getName().equalsIgnoreCase(name)) {\r\n                    System.out.println(&quot;\\n\\nThis monkey is already in our system\\n\\n&quot;);\r\n                    return;\r\n                }\r\n            }\r\n            System.out.println(&quot;What is the monkey&#39;s gender?&quot;); \r\n            String gender = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s age?&quot;);\r\n            String age = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s weight?&quot;);\r\n            String weight = scanner.nextLine();\r\n            System.out.println(&quot;When was the monkey acquired?&quot;);\r\n            String acquisitionDate = scanner.nextLine();\r\n            System.out.println(&quot;What country was the monkey acquired in?&quot;);\r\n            String acquisitionCountry = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s training status?&quot;);\r\n            String trainingStatus = scanner.nextLine();\r\n            System.out.println(&quot;What country is the monkey in service?&quot;);\r\n            String inServiceCountry = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s tail length?&quot;);\r\n            String tailLength = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s height?&quot;);\r\n            String height = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s body length?&quot;);\r\n            String bodyLength = scanner.nextLine();\r\n            System.out.println(&quot;What is the monkey&#39;s species?&quot;);\r\n            String species = scanner.nextLine();\r\n          \r\n            \r\n            Monkey objt = new Monkey(name, gender, age, weight, acquisitionDate,\r\n            \t\t\t\t\t\t acquisitionCountry, trainingStatus, false,\r\n            \t\t\t\t\t\t inServiceCountry, tailLength, height,\r\n            \t\t\t\t\t\t bodyLength, species);\r\n            monkeyList.add(objt);\r\n            \r\n            System.out.println(&quot;Thank you! &quot; + name + &quot; has been added to the system.&quot;);\r\n        }\r\n\r\n        // Complete reserveAnimal\r\n        // You will need to find the animal by animal type and in service country\r\n        public static void reserveAnimal(Scanner scanner) {\r\n            System.out.println(&quot;What type of animal would you like to reserve?&quot;);\r\n            String animalType = scanner.nextLine();\r\n            if (animalType == &quot;dog&quot;) {\r\n            \t\r\n            }\r\n            else if (animalType == &quot;monkey&quot;) {\r\n\r\n            }\r\n            else {\r\n            \tSystem.out.println(&quot;Invalid animal.&quot;);\r\n            }\t\r\n            System.out.println(&quot;What country is the animal in service?&quot;);\r\n            String inServiceCountry = scanner.nextLine();\r\n            \r\n            \r\n        }\r\n\r\n        // Complete printAnimals\r\n        // Include the animal name, status, acquisition country and if the animal is reserved.\r\n\t// Remember that this method connects to three different menu items.\r\n        // The printAnimals() method has three different outputs\r\n        // based on the listType parameter\r\n        // dog - prints the list of dogs\r\n        // monkey - prints the list of monkeys\r\n        // available - prints a combined list of all animals that are\r\n        // fully trained (&quot;in service&quot;) but not reserved \r\n\t// Remember that you only have to fully implement ONE of these lists. \r\n\t// The other lists can have a print statement saying &quot;This option needs to be implemented&quot;.\r\n\t// To score &quot;exemplary&quot; you must correctly implement the &quot;available&quot; list.\r\n       \r\n        \r\n        \r\n    \r\n        \r\n        \r\n        public static void printAnimals(String type) {\r\n        \r\n        \tString listType = type;\r\n        \tif (listType == &quot;dog&quot;) {\r\n        \t\tSystem.out.println(dogList.toString());\r\n        \t\t\r\n        \t} \r\n        \telse if(listType == &quot;monkey&quot;) {\r\n        \t\tSystem.out.println(monkeyList.toString());\r\n        \t\t\r\n        \t} \r\n        \telse {\r\n        \t}\r\n        \t\t\r\n        \t\r\n        \t\r\n\r\n        }\r\n}\r\n\r\n```\r\n```\r\n\r\npublic class Dog extends RescueAnimal {\r\n\r\n    // Instance variable\r\n    private String breed;\r\n\r\n    // Constructor\r\n    public Dog(String name, String breed, String gender, String age,\r\n    String weight, String acquisitionDate, String acquisitionCountry,\r\n\tString trainingStatus, boolean reserved, String inServiceCountry) {\r\n        setName(name);\r\n        setBreed(breed);\r\n        setGender(gender);\r\n        setAge(age);\r\n        setWeight(weight);\r\n        setAcquisitionDate(acquisitionDate);\r\n        setAcquisitionLocation(acquisitionCountry);\r\n        setTrainingStatus(trainingStatus);\r\n        setReserved(reserved);\r\n        setInServiceCountry(inServiceCountry);\r\n       \r\n    }\r\n\r\n    // Accessor Method\r\n    public String getBreed() {\r\n        return breed;\r\n    }\r\n\r\n    // Mutator Method\r\n    public void setBreed(String dogBreed) {\r\n        breed = dogBreed;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return getName();\r\n    }\r\n}\r\n```\r\n```\r\n\r\n\r\npublic class Monkey extends RescueAnimal {\r\n\t\r\n\t//Monkey Variables\r\n\t\r\n\tprivate String tailLength;\r\n\tprivate String height;\r\n\tprivate String bodyLength;\r\n\tprivate String species;\r\n\t\r\n\t\r\n\t//Constructor\r\n\t\r\n\tpublic Monkey(String name, String gender, String age, String weight,\r\n\tString acquisitionDate, String acquisitionCountry, String trainingStatus,\r\n\tboolean reserved, String inServiceCountry,String tailLength, String height,\r\n\tString bodyLength, String species) {\r\n\t\tsetTailLength(tailLength);\r\n\t\tsetHeight(height);\r\n\t\tsetBodyLength(bodyLength);\r\n\t\tsetSpecies(species);\r\n\t\tsetName(name);\r\n\t\tsetGender(gender);\r\n\t\tsetAge(age);\r\n\t\tsetWeight(weight);\r\n\t\tsetAcquisitionDate(acquisitionDate);\r\n\t\tsetAcquisitionLocation(acquisitionCountry);\r\n\t\tsetTrainingStatus(trainingStatus);\r\n        setReserved(reserved);\r\n        setInServiceCountry(inServiceCountry);\r\n        \t\t\t\r\n\t}\r\n\t\r\n\t//Mutator\r\n\t\r\n\tpublic void setTailLength(String TailLength){\r\n\t\ttailLength = TailLength;\r\n\t}\r\n\t\r\n\tpublic void setHeight(String Height) {\r\n\t\theight = Height;\r\n\t}\r\n\t\r\n\tpublic void setBodyLength(String BodyLength) {\r\n\t\tbodyLength = BodyLength;\r\n\t}\r\n\t\r\n\tpublic void setSpecies(String Species) {\r\n\t\tspecies = Species;\r\n\t}\r\n\t\r\n\t//Accessor\r\n\t\r\n\tpublic String getTailLength() {\r\n\t\treturn tailLength;\r\n\t}\r\n\t\r\n\tpublic String getHeight() {\r\n\t\treturn height;\r\n\t}\r\n\t\r\n\tpublic String getBodyLength() {\r\n\t\treturn bodyLength;\r\n\t}\r\n\t\r\n\tpublic String getSpecies() {\r\n\t\treturn species;\r\n\t}\r\n\t@Override\r\n\tpublic String toString() {\r\n\t    return getName();\r\n\t}\r\n}\r\n```\r\n```\r\n\r\n\r\nimport java.lang.String;\r\n\r\npublic class RescueAnimal {\r\n\r\n    // Instance variables\r\n    private String name;\r\n    private String animalType;\r\n    private String gender;\r\n    private String age;\r\n    private String weight;\r\n    private String acquisitionDate;\r\n    private String acquisitionCountry;\r\n\tprivate String trainingStatus;\r\n    private boolean reserved;\r\n\tprivate String inServiceCountry;\r\n\r\n\r\n    // Constructor\r\n    public RescueAnimal() {\r\n    }\r\n\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\r\n\tpublic String getAnimalType() {\r\n\t\treturn animalType;\r\n\t}\r\n\r\n\r\n\tpublic void setAnimalType(String animalType) {\r\n\t\tthis.animalType = animalType;\r\n\t}\r\n\r\n\r\n\tpublic String getGender() {\r\n\t\treturn gender;\r\n\t}\r\n\r\n\r\n\tpublic void setGender(String gender) {\r\n\t\tthis.gender = gender;\r\n\t}\r\n\r\n\r\n\tpublic String getAge() {\r\n\t\treturn age;\r\n\t}\r\n\r\n\r\n\tpublic void setAge(String age) {\r\n\t\tthis.age = age;\r\n\t}\r\n\r\n\r\n\tpublic String getWeight() {\r\n\t\treturn weight;\r\n\t}\r\n\r\n\r\n\tpublic void setWeight(String weight) {\r\n\t\tthis.weight = weight;\r\n\t}\r\n\r\n\r\n\tpublic String getAcquisitionDate() {\r\n\t\treturn acquisitionDate;\r\n\t}\r\n\r\n\r\n\tpublic void setAcquisitionDate(String acquisitionDate) {\r\n\t\tthis.acquisitionDate = acquisitionDate;\r\n\t}\r\n\r\n\r\n\tpublic String getAcquisitionLocation() {\r\n\t\treturn acquisitionCountry;\r\n\t}\r\n\r\n\r\n\tpublic void setAcquisitionLocation(String acquisitionCountry) {\r\n\t\tthis.acquisitionCountry = acquisitionCountry;\r\n\t}\r\n\r\n\r\n\tpublic  boolean getReserved() {\r\n\t\treturn reserved;\r\n\t}\r\n\r\n\r\n\tpublic void setReserved(boolean reserved) {\r\n\t\tthis.reserved = reserved;\r\n\t}\r\n\r\n\r\n\tpublic String getInServiceLocation() {\r\n\t\treturn inServiceCountry;\r\n\t}\r\n\r\n\r\n\tpublic void setInServiceCountry(String inServiceCountry) {\r\n\t\tthis.inServiceCountry = inServiceCountry;\r\n\t}\r\n\r\n\r\n\r\n\r\n\tpublic String getTrainingStatus() {\r\n\t\treturn trainingStatus;\r\n\t}\r\n\r\n\r\n\tpublic void setTrainingStatus(String trainingStatus) {\r\n\t\tthis.trainingStatus = trainingStatus;\r\n\t}\r\n}\r\n```","title":"How do I search my array list to find a reserved animal?","body":"<p>Hello i am having a problem figuring out how to search my array list for an animal with a false reserve and if one is found how to print that animals name. I need to do this for all animals in both array list. I have attached my code below. I can not find the right method for searching through the array list and then printing that objects name if the element is found.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Driver {\n    private static ArrayList&lt;Dog&gt; dogList = new ArrayList&lt;Dog&gt;();\n    private static ArrayList&lt;Monkey&gt; monkeyList = new ArrayList&lt;Monkey&gt;();\n    // Instance variables (if needed)\n\n    public static void main(String[] args) {\n        Scanner scnr = new Scanner(System.in);\n        \n\n        initializeDogList();\n        initializeMonkeyList();\n        \n        //Menu loop\n        \n        while(true) {\n            displayMenu();\n            String menuOption = scnr.nextLine();\n            if (menuOption.equals(&quot;1&quot;)) {\n                intakeNewDog(scnr);\n                \n            }\n            else if (menuOption.equals(&quot;2&quot;) ) {\n                intakeNewMonkey(scnr);\n            }\n            else if (menuOption.equals(&quot;3&quot;)) {\n                reserveAnimal(scnr);\n            }\n            else if (menuOption.equals(&quot;4&quot;)) {\n                printAnimals(&quot;dog&quot;);\n            }\n            else if (menuOption.equals(&quot;5&quot;)) {\n                printAnimals(&quot;monkey&quot;);\n                \n            }\n            else if (menuOption.equals(&quot;6&quot;)){\n                printAnimals(&quot;available&quot;);\n                \n            }\n            else if (menuOption.equals(&quot;q&quot;)) {\n                break;\n            }\n            else {\n                System.out.print(&quot;Invalid Input&quot;);\n            }\n        }\n    }\n\n    // This method prints the menu options\n    public static void displayMenu() {\n        System.out.println(&quot;\\n\\n&quot;);\n        System.out.println(&quot;\\t\\t\\t\\tRescue Animal System Menu&quot;);\n        System.out.println(&quot;[1] Intake a new dog&quot;);\n        System.out.println(&quot;[2] Intake a new monkey&quot;);\n        System.out.println(&quot;[3] Reserve an animal&quot;);\n        System.out.println(&quot;[4] Print a list of all dogs&quot;);\n        System.out.println(&quot;[5] Print a list of all monkeys&quot;);\n        System.out.println(&quot;[6] Print a list of all animals that are not reserved&quot;);\n        System.out.println(&quot;[q] Quit application&quot;);\n        System.out.println();\n        System.out.println(&quot;Enter a menu selection&quot;);\n    }\n\n\n    // Adds dogs to a list for testing\n    public static void initializeDogList() {\n        Dog dog1 = new Dog(&quot;Spot&quot;, &quot;German Shepherd&quot;, &quot;male&quot;, &quot;1&quot;, &quot;25.6&quot;, &quot;05-12-2019&quot;, &quot;United States&quot;, &quot;intake&quot;, false, &quot;United States&quot;);\n        Dog dog2 = new Dog(&quot;Rex&quot;, &quot;Great Dane&quot;, &quot;male&quot;, &quot;3&quot;, &quot;35.2&quot;, &quot;02-03-2020&quot;, &quot;United States&quot;, &quot;Phase I&quot;, false, &quot;United States&quot;);\n        Dog dog3 = new Dog(&quot;Bella&quot;, &quot;Chihuahua&quot;, &quot;female&quot;, &quot;4&quot;, &quot;25.6&quot;, &quot;12-12-2019&quot;, &quot;Canada&quot;, &quot;in service&quot;, true, &quot;Canada&quot;);\n\n        dogList.add(dog1);\n        dogList.add(dog2);\n        dogList.add(dog3);\n    }\n\n\n    // Adds monkeys to a list for testing\n    public static void initializeMonkeyList() {\n\n    }\n\n\n    //Intakes a new dog\n    public static void intakeNewDog(Scanner scanner) {\n        System.out.println(&quot;What is the dog's name?&quot;);\n        String name = scanner.nextLine();\n        for(Dog dog: dogList) {\n            if(dog.getName().equalsIgnoreCase(name)) {\n                System.out.println(&quot;\\n\\nThis dog is already in our system\\n\\n&quot;);\n                return; //returns to menu\n            }\n        }\n        \n        //Gathers all information for new dog\n        \n        System.out.println(&quot;What is the dog's breed?&quot;);\n        String breed = scanner.nextLine();\n        System.out.println(&quot;What is the dog's gender?&quot;);\n        String gender = scanner.nextLine();\n        System.out.println(&quot;What is the dog's age?&quot;);\n        String age = scanner.nextLine();\n        System.out.println(&quot;What is the dog's weight&quot;);\n        String weight = scanner.nextLine();\n        System.out.println(&quot;In what country was the dog acquired?&quot;);\n        String acquisitionDate = scanner.nextLine();\n        System.out.println(&quot;Where was the dog acquired?&quot;);\n        String acquisitionCountry = scanner.nextLine();\n        System.out.println(&quot;What is the dog's training status?&quot;);\n        String trainingStatus = scanner.nextLine();\n        System.out.println(&quot;What country is the dog in service?&quot;);\n        String inServiceCountry = scanner.nextLine();\n        \n        //Creates a new object for dogList\n        \n        Dog objt = new Dog(name, breed, gender, age, weight, acquisitionDate,\n                 acquisitionCountry, trainingStatus, false, inServiceCountry);\n        \n        //adds new dog to dogList\n        \n        dogList.add(objt);\n        \n        //End message to let user know that the animal has been added.\n        System.out.println(&quot;Thank you! &quot; + name + &quot; has been added to the system.&quot;);\n        \n        \n    }\n\n\n        \n    \n        // For the project submission you must also  validate the input\n    // to make sure the monkey doesn't already exist and the species type is allowed\n        public static void intakeNewMonkey(Scanner scanner) {\n            System.out.println(&quot;What is the monkey's name?&quot;);\n            String name = scanner.nextLine();\n            for(Monkey monkey: monkeyList) {\n                if(monkey.getName().equalsIgnoreCase(name)) {\n                    System.out.println(&quot;\\n\\nThis monkey is already in our system\\n\\n&quot;);\n                    return;\n                }\n            }\n            System.out.println(&quot;What is the monkey's gender?&quot;); \n            String gender = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's age?&quot;);\n            String age = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's weight?&quot;);\n            String weight = scanner.nextLine();\n            System.out.println(&quot;When was the monkey acquired?&quot;);\n            String acquisitionDate = scanner.nextLine();\n            System.out.println(&quot;What country was the monkey acquired in?&quot;);\n            String acquisitionCountry = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's training status?&quot;);\n            String trainingStatus = scanner.nextLine();\n            System.out.println(&quot;What country is the monkey in service?&quot;);\n            String inServiceCountry = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's tail length?&quot;);\n            String tailLength = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's height?&quot;);\n            String height = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's body length?&quot;);\n            String bodyLength = scanner.nextLine();\n            System.out.println(&quot;What is the monkey's species?&quot;);\n            String species = scanner.nextLine();\n          \n            \n            Monkey objt = new Monkey(name, gender, age, weight, acquisitionDate,\n                                     acquisitionCountry, trainingStatus, false,\n                                     inServiceCountry, tailLength, height,\n                                     bodyLength, species);\n            monkeyList.add(objt);\n            \n            System.out.println(&quot;Thank you! &quot; + name + &quot; has been added to the system.&quot;);\n        }\n\n        // Complete reserveAnimal\n        // You will need to find the animal by animal type and in service country\n        public static void reserveAnimal(Scanner scanner) {\n            System.out.println(&quot;What type of animal would you like to reserve?&quot;);\n            String animalType = scanner.nextLine();\n            if (animalType == &quot;dog&quot;) {\n                \n            }\n            else if (animalType == &quot;monkey&quot;) {\n\n            }\n            else {\n                System.out.println(&quot;Invalid animal.&quot;);\n            }   \n            System.out.println(&quot;What country is the animal in service?&quot;);\n            String inServiceCountry = scanner.nextLine();\n            \n            \n        }\n\n        // Complete printAnimals\n        // Include the animal name, status, acquisition country and if the animal is reserved.\n    // Remember that this method connects to three different menu items.\n        // The printAnimals() method has three different outputs\n        // based on the listType parameter\n        // dog - prints the list of dogs\n        // monkey - prints the list of monkeys\n        // available - prints a combined list of all animals that are\n        // fully trained (&quot;in service&quot;) but not reserved \n    // Remember that you only have to fully implement ONE of these lists. \n    // The other lists can have a print statement saying &quot;This option needs to be implemented&quot;.\n    // To score &quot;exemplary&quot; you must correctly implement the &quot;available&quot; list.\n       \n        \n        \n    \n        \n        \n        public static void printAnimals(String type) {\n        \n            String listType = type;\n            if (listType == &quot;dog&quot;) {\n                System.out.println(dogList.toString());\n                \n            } \n            else if(listType == &quot;monkey&quot;) {\n                System.out.println(monkeyList.toString());\n                \n            } \n            else {\n            }\n                \n            \n            \n\n        }\n}\n\n</code></pre>\n<pre><code>\npublic class Dog extends RescueAnimal {\n\n    // Instance variable\n    private String breed;\n\n    // Constructor\n    public Dog(String name, String breed, String gender, String age,\n    String weight, String acquisitionDate, String acquisitionCountry,\n    String trainingStatus, boolean reserved, String inServiceCountry) {\n        setName(name);\n        setBreed(breed);\n        setGender(gender);\n        setAge(age);\n        setWeight(weight);\n        setAcquisitionDate(acquisitionDate);\n        setAcquisitionLocation(acquisitionCountry);\n        setTrainingStatus(trainingStatus);\n        setReserved(reserved);\n        setInServiceCountry(inServiceCountry);\n       \n    }\n\n    // Accessor Method\n    public String getBreed() {\n        return breed;\n    }\n\n    // Mutator Method\n    public void setBreed(String dogBreed) {\n        breed = dogBreed;\n    }\n\n    @Override\n    public String toString() {\n        return getName();\n    }\n}\n</code></pre>\n<pre><code>\n\npublic class Monkey extends RescueAnimal {\n    \n    //Monkey Variables\n    \n    private String tailLength;\n    private String height;\n    private String bodyLength;\n    private String species;\n    \n    \n    //Constructor\n    \n    public Monkey(String name, String gender, String age, String weight,\n    String acquisitionDate, String acquisitionCountry, String trainingStatus,\n    boolean reserved, String inServiceCountry,String tailLength, String height,\n    String bodyLength, String species) {\n        setTailLength(tailLength);\n        setHeight(height);\n        setBodyLength(bodyLength);\n        setSpecies(species);\n        setName(name);\n        setGender(gender);\n        setAge(age);\n        setWeight(weight);\n        setAcquisitionDate(acquisitionDate);\n        setAcquisitionLocation(acquisitionCountry);\n        setTrainingStatus(trainingStatus);\n        setReserved(reserved);\n        setInServiceCountry(inServiceCountry);\n                    \n    }\n    \n    //Mutator\n    \n    public void setTailLength(String TailLength){\n        tailLength = TailLength;\n    }\n    \n    public void setHeight(String Height) {\n        height = Height;\n    }\n    \n    public void setBodyLength(String BodyLength) {\n        bodyLength = BodyLength;\n    }\n    \n    public void setSpecies(String Species) {\n        species = Species;\n    }\n    \n    //Accessor\n    \n    public String getTailLength() {\n        return tailLength;\n    }\n    \n    public String getHeight() {\n        return height;\n    }\n    \n    public String getBodyLength() {\n        return bodyLength;\n    }\n    \n    public String getSpecies() {\n        return species;\n    }\n    @Override\n    public String toString() {\n        return getName();\n    }\n}\n</code></pre>\n<pre><code>\n\nimport java.lang.String;\n\npublic class RescueAnimal {\n\n    // Instance variables\n    private String name;\n    private String animalType;\n    private String gender;\n    private String age;\n    private String weight;\n    private String acquisitionDate;\n    private String acquisitionCountry;\n    private String trainingStatus;\n    private boolean reserved;\n    private String inServiceCountry;\n\n\n    // Constructor\n    public RescueAnimal() {\n    }\n\n\n    public String getName() {\n        return name;\n    }\n\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n\n    public String getAnimalType() {\n        return animalType;\n    }\n\n\n    public void setAnimalType(String animalType) {\n        this.animalType = animalType;\n    }\n\n\n    public String getGender() {\n        return gender;\n    }\n\n\n    public void setGender(String gender) {\n        this.gender = gender;\n    }\n\n\n    public String getAge() {\n        return age;\n    }\n\n\n    public void setAge(String age) {\n        this.age = age;\n    }\n\n\n    public String getWeight() {\n        return weight;\n    }\n\n\n    public void setWeight(String weight) {\n        this.weight = weight;\n    }\n\n\n    public String getAcquisitionDate() {\n        return acquisitionDate;\n    }\n\n\n    public void setAcquisitionDate(String acquisitionDate) {\n        this.acquisitionDate = acquisitionDate;\n    }\n\n\n    public String getAcquisitionLocation() {\n        return acquisitionCountry;\n    }\n\n\n    public void setAcquisitionLocation(String acquisitionCountry) {\n        this.acquisitionCountry = acquisitionCountry;\n    }\n\n\n    public  boolean getReserved() {\n        return reserved;\n    }\n\n\n    public void setReserved(boolean reserved) {\n        this.reserved = reserved;\n    }\n\n\n    public String getInServiceLocation() {\n        return inServiceCountry;\n    }\n\n\n    public void setInServiceCountry(String inServiceCountry) {\n        this.inServiceCountry = inServiceCountry;\n    }\n\n\n\n\n    public String getTrainingStatus() {\n        return trainingStatus;\n    }\n\n\n    public void setTrainingStatus(String trainingStatus) {\n        this.trainingStatus = trainingStatus;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-messaging"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1575551554,"post_id":59195672,"comment_id":104610050,"body_markdown":"Are you trying to get a list of all users that are currently connected with WebSockets, or a list of all existing users within `InMemoryUserDetailsManager`?","body":"Are you trying to get a list of all users that are currently connected with WebSockets, or a list of all existing users within <code>InMemoryUserDetailsManager</code>?"},{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":0,"creation_date":1575551990,"post_id":59195672,"comment_id":104610295,"body_markdown":"@g00glen00b according to https://stackoverflow.com/a/54254980/1453413, DefaultSimpUserRegistry keeps track of connected websocket users","body":"@g00glen00b according to <a href=\"https://stackoverflow.com/a/54254980/1453413\">stackoverflow.com/a/54254980/1453413</a>, DefaultSimpUserRegistry keeps track of connected websocket users"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":1,"creation_date":1575552085,"post_id":59195672,"comment_id":104610352,"body_markdown":"You&#39;re right, but from your question it appears that you launch the application, and immediately expect a user to be visible. However, if you don&#39;t make a WebSocket connection after launching your application, then that list will obviously be empty. That&#39;s why I&#39;m asking what exactly you want to see.","body":"You&#39;re right, but from your question it appears that you launch the application, and immediately expect a user to be visible. However, if you don&#39;t make a WebSocket connection after launching your application, then that list will obviously be empty. That&#39;s why I&#39;m asking what exactly you want to see."},{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":0,"creation_date":1575552721,"post_id":59195672,"comment_id":104610757,"body_markdown":"Thanks for the tip g00glen00b, I&#39;ll figure out with this","body":"Thanks for the tip g00glen00b, I&#39;ll figure out with this"}],"answers":[{"tags":[],"owner":{"account_id":13645919,"reputation":9,"user_id":9844919,"display_name":"Shikhar Upadhyay"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1575551665,"creation_date":1575551665,"answer_id":59196014,"question_id":59195672,"body_markdown":"At the time of Class Loading, your simpUserRegistry will be null. At starting, you will not get list of users. Instead of calling simpUserRegistry in connectedEquipments() method, call userRegistry() method by Using USersConfig class. Something like below code. \r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String connectedEquipments() {\r\n\r\n        return userRegistry()\r\n                .getUsers()\r\n                .stream()\r\n                .map(SimpUser::getName)\r\n                .collect(Collectors.toList()).toString();\r\n    }","title":"How to get the list of users properly with Spring?","body":"<p>At the time of Class Loading, your simpUserRegistry will be null. At starting, you will not get list of users. Instead of calling simpUserRegistry in connectedEquipments() method, call userRegistry() method by Using USersConfig class. Something like below code. </p>\n\n<pre><code>@GetMapping(\"/users\")\npublic String connectedEquipments() {\n\n    return userRegistry()\n            .getUsers()\n            .stream()\n            .map(SimpUser::getName)\n            .collect(Collectors.toList()).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1575557538,"creation_date":1575557538,"answer_id":59197726,"question_id":59195672,"body_markdown":"Within your question, you&#39;re trying a few things:\r\n\r\n1. You&#39;re setting up `InMemoryUserDetailsManager` with a list of allowed users (in your case a user called `u`).\r\n2. You&#39;re using `SimpUserRegistry` to get a list of all connected users through Spring messaging (for example using WebSockets).\r\n\r\nIf you&#39;re just trying to get a list of all users, and you&#39;re not using WebSockets, then **the second approach won&#39;t work**.\r\n\r\nIf you&#39;re trying to get a list of all users that are stored within `InMemoryUserDetailsManager`, then the answer is that it&#39;s not possible to get that list. `InMemoryUserDetailsManager` uses an in-memory `Map` to store all users, and it doesn&#39;t expose that list.\r\n\r\nIf you really want such a list, you&#39;ll have to create a custom in-memory `UserDetailsService`, for example:\r\n\r\n```java\r\n@Service\r\npublic class ListingInMemoryUserDetailsService implements UserDetailsService {\r\n    private final Map&lt;String, InMemoryUser&gt; users;\r\n\r\n    public ListingInMemoryUserDetailsService() {\r\n        this.users = new HashMap&lt;&gt;();\r\n    }\r\n\r\n    public ListingInMemoryUserDetailsService(UserDetails... userDetails) {\r\n        this.users = stream(userDetails)\r\n            .collect(Collectors.toMap(UserDetails::getUsername, InMemoryUser::new));\r\n    }\r\n\r\n    public Collection&lt;String&gt; getUsernames() {\r\n        return users\r\n            .values()\r\n            .stream()\r\n            .map(InMemoryUser::getUsername)\r\n            .collect(toList());\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        return Optional\r\n            .ofNullable(users.get(username))\r\n            .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User does not exist&quot;));\r\n    }\r\n}\r\n```\r\n\r\nIn this example, `InMemoryUser` is an implementation of the `UserDetails` interface. When you create a custom implementation like that, you&#39;ll have to configure it with Spring Security:\r\n\r\n```java\r\n@Override\r\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    auth\r\n        .userDetailsService(userDetailsService)\r\n        .passwordEncoder(passwordEncoder);\r\n}\r\n```\r\n\r\n---\r\n\r\nAlternatively, if you&#39;re interested in retrieving a list of all created sessions, there&#39;s a better approach. First, you&#39;ll have to create a `SessionRegistry` bean:\r\n\r\n```java\r\n@Bean\r\npublic SessionRegistry sessionRegistry() {\r\n    return new SessionRegistryImpl();\r\n}\r\n```\r\n\r\nThen, you&#39;ll have to configure Spring Security to set up sessions, and to use your `SessionRegistry` to do that:\r\n\r\n```java\r\n@Override\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n    http\r\n        .authorizeRequests()\r\n            .antMatchers(&quot;/&quot;, &quot;/home&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n        .formLogin()\r\n            .loginPage(&quot;/login&quot;).permitAll()\r\n            .and()\r\n        .logout().permitAll()\r\n        // Add something like this:\r\n        .sessionManagement()\r\n            .maximumSessions(1)\r\n            .sessionRegistry(sessionRegistry);\r\n}\r\n```\r\n\r\nAfter that, you can autowire `SessionRegistry`, and use the `getAllPrincipals()` method:\r\n\r\n```java\r\n@GetMapping(&quot;/users&quot;)\r\npublic Collection&lt;String&gt; findUsers() {\r\n    return sessionRegistry\r\n        .getAllPrincipals()\r\n        .stream()\r\n        .map(this::getUsername)\r\n        .flatMap(Optional::stream)\r\n        .collect(toList());\r\n}\r\n\r\nprivate Optional&lt;String&gt; getUsername(Object principal) {\r\n    if (principal instanceof UserDetails) {\r\n        return Optional.ofNullable(((UserDetails) principal).getUsername());\r\n    } else {\r\n        return Optional.empty();\r\n    }\r\n}\r\n```\r\n\r\nThis will list all usernames of users that logged in within the application, and had a session. This also includes expired sessions, so you may want to filter on those as well.","title":"How to get the list of users properly with Spring?","body":"<p>Within your question, you're trying a few things:</p>\n\n<ol>\n<li>You're setting up <code>InMemoryUserDetailsManager</code> with a list of allowed users (in your case a user called <code>u</code>).</li>\n<li>You're using <code>SimpUserRegistry</code> to get a list of all connected users through Spring messaging (for example using WebSockets).</li>\n</ol>\n\n<p>If you're just trying to get a list of all users, and you're not using WebSockets, then <strong>the second approach won't work</strong>.</p>\n\n<p>If you're trying to get a list of all users that are stored within <code>InMemoryUserDetailsManager</code>, then the answer is that it's not possible to get that list. <code>InMemoryUserDetailsManager</code> uses an in-memory <code>Map</code> to store all users, and it doesn't expose that list.</p>\n\n<p>If you really want such a list, you'll have to create a custom in-memory <code>UserDetailsService</code>, for example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class ListingInMemoryUserDetailsService implements UserDetailsService {\n    private final Map&lt;String, InMemoryUser&gt; users;\n\n    public ListingInMemoryUserDetailsService() {\n        this.users = new HashMap&lt;&gt;();\n    }\n\n    public ListingInMemoryUserDetailsService(UserDetails... userDetails) {\n        this.users = stream(userDetails)\n            .collect(Collectors.toMap(UserDetails::getUsername, InMemoryUser::new));\n    }\n\n    public Collection&lt;String&gt; getUsernames() {\n        return users\n            .values()\n            .stream()\n            .map(InMemoryUser::getUsername)\n            .collect(toList());\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return Optional\n            .ofNullable(users.get(username))\n            .orElseThrow(() -&gt; new UsernameNotFoundException(\"User does not exist\"));\n    }\n}\n</code></pre>\n\n<p>In this example, <code>InMemoryUser</code> is an implementation of the <code>UserDetails</code> interface. When you create a custom implementation like that, you'll have to configure it with Spring Security:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth\n        .userDetailsService(userDetailsService)\n        .passwordEncoder(passwordEncoder);\n}\n</code></pre>\n\n<hr>\n\n<p>Alternatively, if you're interested in retrieving a list of all created sessions, there's a better approach. First, you'll have to create a <code>SessionRegistry</code> bean:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SessionRegistry sessionRegistry() {\n    return new SessionRegistryImpl();\n}\n</code></pre>\n\n<p>Then, you'll have to configure Spring Security to set up sessions, and to use your <code>SessionRegistry</code> to do that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n        .authorizeRequests()\n            .antMatchers(\"/\", \"/home\").permitAll()\n            .anyRequest().authenticated()\n            .and()\n        .formLogin()\n            .loginPage(\"/login\").permitAll()\n            .and()\n        .logout().permitAll()\n        // Add something like this:\n        .sessionManagement()\n            .maximumSessions(1)\n            .sessionRegistry(sessionRegistry);\n}\n</code></pre>\n\n<p>After that, you can autowire <code>SessionRegistry</code>, and use the <code>getAllPrincipals()</code> method:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(\"/users\")\npublic Collection&lt;String&gt; findUsers() {\n    return sessionRegistry\n        .getAllPrincipals()\n        .stream()\n        .map(this::getUsername)\n        .flatMap(Optional::stream)\n        .collect(toList());\n}\n\nprivate Optional&lt;String&gt; getUsername(Object principal) {\n    if (principal instanceof UserDetails) {\n        return Optional.ofNullable(((UserDetails) principal).getUsername());\n    } else {\n        return Optional.empty();\n    }\n}\n</code></pre>\n\n<p>This will list all usernames of users that logged in within the application, and had a session. This also includes expired sessions, so you may want to filter on those as well.</p>\n"}],"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1344,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59197726,"answer_count":2,"score":1,"last_activity_date":1634197122,"creation_date":1575550442,"question_id":59195672,"body_markdown":"I want to get the list of all authenticated users.  \r\nI took the basic spring-security [example][1] from the official Spring site.\r\n\r\nAs it was recommended in other relative questions ([51992610][2]), I injected the DefaultSimpUserRegistry into the code.\r\nStill, the list is empty.\r\n\r\n```\r\n@Configuration\r\npublic class UsersConfig {\r\n    final private SimpUserRegistry userRegistry = new DefaultSimpUserRegistry();\r\n    \r\n    @Bean\r\n    @Primary\r\n    public SimpUserRegistry userRegistry() {\r\n        return userRegistry;\r\n    }\r\n}\r\n```\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeRequests()\r\n                            .antMatchers(&quot;/&quot;, &quot;/home&quot;).permitAll()\r\n                            .anyRequest().authenticated()\r\n                            .and()\r\n                    .formLogin()\r\n                            .loginPage(&quot;/login&quot;)\r\n                            .permitAll()\r\n                            .and()\r\n                    .logout()\r\n                            .permitAll();\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public UserDetailsService userDetailsService() {\r\n            UserDetails user =\r\n                     User.withDefaultPasswordEncoder()\r\n                            .username(&quot;u&quot;)\r\n                            .password(&quot;11&quot;)\r\n                            .roles(&quot;USER&quot;)\r\n                            .build();\r\n\r\n            return new InMemoryUserDetailsManager(user);\r\n    }\r\n}\r\n```\r\n```\r\n@RestController\r\npublic class WebSocketController {\r\n\r\n    @Autowired\r\n    private final SimpUserRegistry simpUserRegistry;\r\n\r\n    public WebSocketController(SimpUserRegistry simpUserRegistry) {\r\n        this.simpUserRegistry = simpUserRegistry;\r\n    }\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String connectedEquipments() {\r\n        \r\n        return this.simpUserRegistry\r\n                .getUsers()\r\n                .stream()\r\n                .map(SimpUser::getName)\r\n                .collect(Collectors.toList()).toString();\r\n    }\r\n}\r\n```\r\nBuild jar, launch locally, login, enter http://localhost:8080/users. Result:\r\n```\r\n[]\r\n```\r\nThe full code may be taken from the Spring site.\r\nThe topics on SimpUserRegistry are so rare, I can&#39;t find a full example with it. The similar posts are unanswered yet ([48804780][3], [58925128][4]). \r\n\r\nSorry, I am new to Spring, is SimpUserRegistry the correct way to list users with Spring? If so, how to use it properly? Thanks.\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/securing-web/\r\n  [2]: https://stackoverflow.com/questions/51992610\r\n  [3]: https://stackoverflow.com/questions/48804780\r\n  [4]: https://stackoverflow.com/questions/58925128","title":"How to get the list of users properly with Spring?","body":"<p>I want to get the list of all authenticated users.<br />\nI took the basic spring-security <a href=\"https://spring.io/guides/gs/securing-web/\" rel=\"nofollow noreferrer\">example</a> from the official Spring site.</p>\n<p>As it was recommended in other relative questions (<a href=\"https://stackoverflow.com/questions/51992610\">51992610</a>), I injected the DefaultSimpUserRegistry into the code.\nStill, the list is empty.</p>\n<pre><code>@Configuration\npublic class UsersConfig {\n    final private SimpUserRegistry userRegistry = new DefaultSimpUserRegistry();\n    \n    @Bean\n    @Primary\n    public SimpUserRegistry userRegistry() {\n        return userRegistry;\n    }\n}\n</code></pre>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n            http\n                    .authorizeRequests()\n                            .antMatchers(&quot;/&quot;, &quot;/home&quot;).permitAll()\n                            .anyRequest().authenticated()\n                            .and()\n                    .formLogin()\n                            .loginPage(&quot;/login&quot;)\n                            .permitAll()\n                            .and()\n                    .logout()\n                            .permitAll();\n    }\n\n    @Bean\n    @Override\n    public UserDetailsService userDetailsService() {\n            UserDetails user =\n                     User.withDefaultPasswordEncoder()\n                            .username(&quot;u&quot;)\n                            .password(&quot;11&quot;)\n                            .roles(&quot;USER&quot;)\n                            .build();\n\n            return new InMemoryUserDetailsManager(user);\n    }\n}\n</code></pre>\n<pre><code>@RestController\npublic class WebSocketController {\n\n    @Autowired\n    private final SimpUserRegistry simpUserRegistry;\n\n    public WebSocketController(SimpUserRegistry simpUserRegistry) {\n        this.simpUserRegistry = simpUserRegistry;\n    }\n\n    @GetMapping(&quot;/users&quot;)\n    public String connectedEquipments() {\n        \n        return this.simpUserRegistry\n                .getUsers()\n                .stream()\n                .map(SimpUser::getName)\n                .collect(Collectors.toList()).toString();\n    }\n}\n</code></pre>\n<p>Build jar, launch locally, login, enter http://localhost:8080/users. Result:</p>\n<pre><code>[]\n</code></pre>\n<p>The full code may be taken from the Spring site.\nThe topics on SimpUserRegistry are so rare, I can't find a full example with it. The similar posts are unanswered yet (<a href=\"https://stackoverflow.com/questions/48804780\">48804780</a>, <a href=\"https://stackoverflow.com/questions/58925128\">58925128</a>).</p>\n<p>Sorry, I am new to Spring, is SimpUserRegistry the correct way to list users with Spring? If so, how to use it properly? Thanks.</p>\n"},{"tags":["java","android","admob"],"comments":[{"owner":{"account_id":4245751,"reputation":30189,"user_id":3474494,"accept_rate":100,"display_name":"AmmarCSE"},"score":0,"creation_date":1398679846,"post_id":23337802,"comment_id":35737865,"body_markdown":"Can you post your logcat with exception?","body":"Can you post your logcat with exception?"},{"owner":{"account_id":86571,"reputation":42635,"user_id":240646,"accept_rate":89,"display_name":"Szymon"},"score":0,"creation_date":1398680637,"post_id":23337802,"comment_id":35738372,"body_markdown":"Are you using AdMob from Google Play services?","body":"Are you using AdMob from Google Play services?"}],"answers":[{"tags":[],"owner":{"account_id":4376931,"reputation":423,"user_id":3569711,"display_name":"furkick"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512837180,"creation_date":1398711648,"answer_id":23349152,"question_id":23337802,"body_markdown":"This is going to be vague as you have not stated what type of view your XML file is (Relative, Linear etc.)\r\n\r\nIn my application with a scrollable relative layout I have included:\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/test&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot;\r\n        android:layout_below=&quot;@+id/TextView07&quot;\r\n        android:paddingTop=&quot;20dp&quot; &gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\nNow inside my actual class that I wan&#39;t the ad I have included:\r\n\r\n\tprivate AdView adView;\r\n\r\n\t/* Your ad unit id. Replace with your actual ad unit id. */\r\n\tprivate static final String AD_UNIT_ID = &quot;ca-app-pub-xxxxxx/yyyyyy&quot;;\r\n\r\n\t/**\r\n\t * Simply loads the xml about page layout to display the text.\r\n\t */\r\n\r\n\tpublic void onCreate(Bundle start) {\r\n\t\tsuper.onCreate(start);\r\n\t\tsetContentView(R.layout.about);\r\n\r\n\t\tfinal TelephonyManager tm = (TelephonyManager) getBaseContext()\r\n\t\t\t\t.getSystemService(Context.TELEPHONY_SERVICE);\r\n\r\n\t\t//String deviceid = tm.getDeviceId();\r\n\r\n\t\tadView = new AdView(this);\r\n\t\tadView.setAdSize(AdSize.SMART_BANNER);\r\n\t\tadView.setAdUnitId(AD_UNIT_ID);\r\n\r\n\t\t// Add the AdView to the view hierarchy. The view will have no size\r\n\t\t// until the ad is loaded.\r\n\t\tRelativeLayout layout = (RelativeLayout) findViewById(R.id.test);\r\n\t\tlayout.addView(adView);\r\n\r\n\t\t// Create an ad request. Check logcat output for the hashed device ID to\r\n\t\t// get test ads on a physical device.\r\n\t\tAdRequest adRequest = new AdRequest.Builder()\r\n\t\t.build();\r\n\t\t\t\t//.addTestDevice(AdRequest.DEVICE_ID_EMULATOR)\r\n\t\t\t\t//.addTestDevice(deviceid).build();\r\n\r\n\t\t// Start loading the ad in the background.\r\n\t\tadView.loadAd(adRequest);\r\n\t}\r\n\r\n\r\nNow ideally you want to use a smart banner to optimise your layout for all devices, as I have above, this is standard now.\r\n\r\nIf this is no help head over to [here][1]\r\n\r\n\r\n  [1]: https://developers.google.com/mobile-ads-sdk/docs/","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>This is going to be vague as you have not stated what type of view your XML file is (Relative, Linear etc.)</p>\n\n<p>In my application with a scrollable relative layout I have included:</p>\n\n<pre><code>&lt;RelativeLayout\n    android:id=\"@+id/test\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"fill_parent\"\n    android:layout_below=\"@+id/TextView07\"\n    android:paddingTop=\"20dp\" &gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Now inside my actual class that I wan't the ad I have included:</p>\n\n<pre><code>private AdView adView;\n\n/* Your ad unit id. Replace with your actual ad unit id. */\nprivate static final String AD_UNIT_ID = \"ca-app-pub-xxxxxx/yyyyyy\";\n\n/**\n * Simply loads the xml about page layout to display the text.\n */\n\npublic void onCreate(Bundle start) {\n    super.onCreate(start);\n    setContentView(R.layout.about);\n\n    final TelephonyManager tm = (TelephonyManager) getBaseContext()\n            .getSystemService(Context.TELEPHONY_SERVICE);\n\n    //String deviceid = tm.getDeviceId();\n\n    adView = new AdView(this);\n    adView.setAdSize(AdSize.SMART_BANNER);\n    adView.setAdUnitId(AD_UNIT_ID);\n\n    // Add the AdView to the view hierarchy. The view will have no size\n    // until the ad is loaded.\n    RelativeLayout layout = (RelativeLayout) findViewById(R.id.test);\n    layout.addView(adView);\n\n    // Create an ad request. Check logcat output for the hashed device ID to\n    // get test ads on a physical device.\n    AdRequest adRequest = new AdRequest.Builder()\n    .build();\n            //.addTestDevice(AdRequest.DEVICE_ID_EMULATOR)\n            //.addTestDevice(deviceid).build();\n\n    // Start loading the ad in the background.\n    adView.loadAd(adRequest);\n}\n</code></pre>\n\n<p>Now ideally you want to use a smart banner to optimise your layout for all devices, as I have above, this is standard now.</p>\n\n<p>If this is no help head over to <a href=\"https://developers.google.com/mobile-ads-sdk/docs/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2238040,"reputation":5463,"user_id":1973820,"accept_rate":36,"display_name":"Hamed MP"},"down_vote_count":0,"up_vote_count":180,"is_accepted":true,"score":180,"last_activity_date":1401633248,"creation_date":1401633248,"answer_id":23980933,"question_id":23337802,"body_markdown":"I found solution in the github example, that is:\r\n\r\ninstead of \r\n\r\n    xmlns:ads=&quot;http://schemas.android.com/apk/lib/com.google.ads&quot;\r\n\r\ndelete the xmlns:ads*** tag and add\r\n\r\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n\r\ntag to your LinearLayout tag as follow:\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n              xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n              android:orientation=&quot;vertical&quot;\r\n              android:layout_width=&quot;match_parent&quot;\r\n              android:layout_height=&quot;match_parent&quot;&gt;\r\n    &lt;TextView android:layout_width=&quot;match_parent&quot;\r\n              android:layout_height=&quot;wrap_content&quot;\r\n              android:text=&quot;@string/hello&quot;/&gt;\r\n    &lt;com.google.android.gms.ads.AdView android:id=&quot;@+id/adView&quot;\r\n                           android:layout_width=&quot;match_parent&quot;\r\n                           android:layout_height=&quot;wrap_content&quot;\r\n                           ads:adSize=&quot;BANNER&quot;\r\n                           ads:adUnitId=&quot;INSERT_YOUR_AD_UNIT_ID_HERE&quot;/&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nThat&#39;s it :)\r\n\r\n[github link for this xml](https://github.com/googleads/googleads-mobile-android-examples/blob/master/admob/banner-xml/res/layout/main.xml)","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>I found solution in the github example, that is:</p>\n\n<p>instead of </p>\n\n<pre><code>xmlns:ads=\"http://schemas.android.com/apk/lib/com.google.ads\"\n</code></pre>\n\n<p>delete the xmlns:ads*** tag and add</p>\n\n<pre><code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n</code></pre>\n\n<p>tag to your LinearLayout tag as follow:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n          xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n          android:orientation=\"vertical\"\n          android:layout_width=\"match_parent\"\n          android:layout_height=\"match_parent\"&gt;\n&lt;TextView android:layout_width=\"match_parent\"\n          android:layout_height=\"wrap_content\"\n          android:text=\"@string/hello\"/&gt;\n&lt;com.google.android.gms.ads.AdView android:id=\"@+id/adView\"\n                       android:layout_width=\"match_parent\"\n                       android:layout_height=\"wrap_content\"\n                       ads:adSize=\"BANNER\"\n                       ads:adUnitId=\"INSERT_YOUR_AD_UNIT_ID_HERE\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>That's it :)</p>\n\n<p><a href=\"https://github.com/googleads/googleads-mobile-android-examples/blob/master/admob/banner-xml/res/layout/main.xml\">github link for this xml</a></p>\n"},{"tags":[],"owner":{"account_id":5512018,"reputation":45,"user_id":4378015,"display_name":"Premier Invites"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1420319092,"creation_date":1420318774,"answer_id":27759464,"question_id":23337802,"body_markdown":"A lot of people Migrating existing applications to the google play services method are incorrectly adding the wrong information.\r\n\r\nSomething that I would like to point out is that many people with the same question have been using this as a template\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/lib-auto&quot;\r\n        android:id=&quot;@+id/adView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        ads:adSize=&quot;BANNER&quot;\r\n        ads:adUnitId=&quot;ca-app-pub-XXXXXXXXXXXXXXXX/XXXXXXXXXX&quot;\r\n        ads:loadAdOnCreate=&quot;true&quot; &gt;\r\n    &lt;/com.google.android.gms.ads.AdView&gt;\r\n\r\nThis is incorrect as xmlns:ads should be change to:-\r\n    `xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;`\r\n\r\nLike so \r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/adView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        ads:adSize=&quot;BANNER&quot;\r\n        ads:adUnitId=&quot;ca-app-pub-XXXXXXXXXXXXXXXX/XXXXXXXXXX&quot;\r\n        ads:loadAdOnCreate=&quot;true&quot; &gt;\r\n    &lt;/com.google.android.gms.ads.AdView&gt;","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>A lot of people Migrating existing applications to the google play services method are incorrectly adding the wrong information.</p>\n\n<p>Something that I would like to point out is that many people with the same question have been using this as a template</p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    xmlns:ads=\"http://schemas.android.com/apk/lib-auto\"\n    android:id=\"@+id/adView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"50dp\"\n    ads:adSize=\"BANNER\"\n    ads:adUnitId=\"ca-app-pub-XXXXXXXXXXXXXXXX/XXXXXXXXXX\"\n    ads:loadAdOnCreate=\"true\" &gt;\n&lt;/com.google.android.gms.ads.AdView&gt;\n</code></pre>\n\n<p>This is incorrect as xmlns:ads should be change to:-\n    <code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"</code></p>\n\n<p>Like so </p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/adView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"50dp\"\n    ads:adSize=\"BANNER\"\n    ads:adUnitId=\"ca-app-pub-XXXXXXXXXXXXXXXX/XXXXXXXXXX\"\n    ads:loadAdOnCreate=\"true\" &gt;\n&lt;/com.google.android.gms.ads.AdView&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6414951,"reputation":726,"user_id":4973453,"accept_rate":30,"display_name":"Kelok Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460421903,"creation_date":1460421903,"answer_id":36561713,"question_id":23337802,"body_markdown":"I tried changing the namespace declaration but it just doesn&#39;t work. I fixed this by specifying a height value for the adView instead of `wrap_content`. It works for me\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        android:id=&quot;@+id/adView2&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_gravity=&quot;center|bottom&quot;\r\n        ads:adSize=&quot;BANNER&quot;\r\n        ads:adUnitId=&quot;@string/banner_ad_unit_id&quot; /&gt;","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>I tried changing the namespace declaration but it just doesn't work. I fixed this by specifying a height value for the adView instead of <code>wrap_content</code>. It works for me</p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    android:id=\"@+id/adView2\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"50dp\"\n    android:layout_alignParentBottom=\"true\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_gravity=\"center|bottom\"\n    ads:adSize=\"BANNER\"\n    ads:adUnitId=\"@string/banner_ad_unit_id\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8248844,"reputation":9692,"user_id":6204133,"display_name":"Dan Alboteanu"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1515166095,"creation_date":1498305698,"answer_id":44736170,"question_id":23337802,"body_markdown":"**Warning:** Make sure you set the ad size and ad unit ID in the same manner (i.e. set both in XML or both programmatically).\r\n\r\nhttps://developers.google.com/admob/android/banner\r\n","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p><strong>Warning:</strong> Make sure you set the ad size and ad unit ID in the same manner (i.e. set both in XML or both programmatically).</p>\n\n<p><a href=\"https://developers.google.com/admob/android/banner\" rel=\"noreferrer\">https://developers.google.com/admob/android/banner</a></p>\n"},{"tags":[],"owner":{"account_id":4469997,"reputation":3994,"user_id":3636561,"display_name":"Abdul Rizwan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519310707,"creation_date":1519310707,"answer_id":48930258,"question_id":23337802,"body_markdown":"**remove `    xmlns:ads=&quot;http://schemas.android.com/tools&quot;` from root view**\r\n\r\nthen add **AdView**\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n            xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            android:id=&quot;@+id/adView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            ads:adSize=&quot;BANNER&quot;\r\n            ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot;&gt;\r\n        &lt;/com.google.android.gms.ads.AdView&gt;\r\n\r\nRemember these steps:\r\n\r\n\r\n1. You can define `    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n` on root view it self .\r\n\r\n2. if you have not defined `xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;` inside rootView then you must need to add `xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;` inside **AdView.** \r\n\r\n3.  if you have defined adSize inside your `AdView` xml file then don&#39;t set dynamically, like : `adView.setAdSize(AdSize.BANNER);` or else it will through an exception `java.lang.IllegalStateException: The ad size can only be set once on AdView.`\r\n\r\n4. `xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;` and `xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;` are looking same but there is a difference which is **xmlns:ads** and **xmlns:app** so don&#39;t get confuse.\r\n\r\nI think it will resolve your issue ... Happy to help :)","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p><strong>remove <code>xmlns:ads=\"http://schemas.android.com/tools\"</code> from root view</strong></p>\n\n<p>then add <strong>AdView</strong></p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n        xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n        android:id=\"@+id/adView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_alignParentBottom=\"true\"\n        ads:adSize=\"BANNER\"\n        ads:adUnitId=\"ca-app-pub-3940256099942544/6300978111\"&gt;\n    &lt;/com.google.android.gms.ads.AdView&gt;\n</code></pre>\n\n<p>Remember these steps:</p>\n\n<ol>\n<li><p>You can define <code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n</code> on root view it self .</p></li>\n<li><p>if you have not defined <code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"</code> inside rootView then you must need to add <code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"</code> inside <strong>AdView.</strong> </p></li>\n<li><p>if you have defined adSize inside your <code>AdView</code> xml file then don't set dynamically, like : <code>adView.setAdSize(AdSize.BANNER);</code> or else it will through an exception <code>java.lang.IllegalStateException: The ad size can only be set once on AdView.</code></p></li>\n<li><p><code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"</code> and <code>xmlns:app=\"http://schemas.android.com/apk/res-auto\"</code> are looking same but there is a difference which is <strong>xmlns:ads</strong> and <strong>xmlns:app</strong> so don't get confuse.</p></li>\n</ol>\n\n<p>I think it will resolve your issue ... Happy to help :)</p>\n"},{"tags":[],"owner":{"account_id":14688504,"reputation":833,"user_id":10607823,"display_name":"DEVSHK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553418210,"creation_date":1553418210,"answer_id":55322177,"question_id":23337802,"body_markdown":"**I faced that same problem because i do not add this line on `xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;` top of &lt;com.google.android.gms.ads.AdView&gt;. Then i change my xml code like this**\r\n\r\n        &lt;com.google.android.gms.ads.AdView\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/adView&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        ads:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        ads:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        ads:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        ads:layout_constraintBottom_toTopOf=&quot;@+id/headerText&quot;\r\n        android:layout_marginTop=&quot;@dimen/_2sdp&quot;\r\n        ads:adSize=&quot;BANNER&quot;\r\n        ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot;\r\n        android:visibility=&quot;visible&quot;&gt;\r\n    &lt;/com.google.android.gms.ads.AdView&gt;\r\n\r\n*after that i add this 3 line in onCreate method*\r\n\r\n    AdView mAdView = (AdView)findViewById(R.id.adView);\r\n        MobileAds.initialize(this, &quot;ca-app-pub-3940256099942544~3347511713&quot;);\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n        mAdView.loadAd(adRequest);\r\n\r\n","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p><strong>I faced that same problem because i do not add this line on <code>xmlns:ads=\"http://schemas.android.com/apk/res-auto\"</code> top of . Then i change my xml code like this</strong></p>\n\n<pre><code>    &lt;com.google.android.gms.ads.AdView\n    xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/adView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    ads:layout_constraintLeft_toLeftOf=\"parent\"\n    ads:layout_constraintRight_toRightOf=\"parent\"\n    ads:layout_constraintTop_toTopOf=\"parent\"\n    ads:layout_constraintBottom_toTopOf=\"@+id/headerText\"\n    android:layout_marginTop=\"@dimen/_2sdp\"\n    ads:adSize=\"BANNER\"\n    ads:adUnitId=\"ca-app-pub-3940256099942544/6300978111\"\n    android:visibility=\"visible\"&gt;\n&lt;/com.google.android.gms.ads.AdView&gt;\n</code></pre>\n\n<p><em>after that i add this 3 line in onCreate method</em></p>\n\n<pre><code>AdView mAdView = (AdView)findViewById(R.id.adView);\n    MobileAds.initialize(this, \"ca-app-pub-3940256099942544~3347511713\");\n    AdRequest adRequest = new AdRequest.Builder().build();\n    mAdView.loadAd(adRequest);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6240589,"reputation":1431,"user_id":4854335,"display_name":"Donovan Phoenix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596634884,"creation_date":1596634884,"answer_id":63266497,"question_id":23337802,"body_markdown":"For anyone interested here is a Kotlin version.\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/adContainer&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd inside the code behind\r\n\r\n    //create a new AdView    \r\n    val adView = AdView(this)\r\n    adView.adSize = AdSize.SMART_BANNER\r\n    adView.adUnitId = &quot;your adUnitID goes here or you can use a function&quot;\r\n    adView.visibility = View.GONE\r\n\r\n    //add it to the layout\r\n    val layout = adContainer\r\n    layout.addView(adView)\r\n\r\n    //profit\r\n    MobileAds.initialize(this) {}\r\n    val adRequest = AdRequest.Builder().build()\r\n    adView.loadAd(adRequest)\r\n    adView.adListener = object : AdListener(){\r\n        override fun onAdLoaded() {\r\n            adView.visibility = View.VISIBLE\r\n            super.onAdLoaded()\r\n        }\r\n    }","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>For anyone interested here is a Kotlin version.</p>\n<pre><code>&lt;RelativeLayout\n    android:id=&quot;@+id/adContainer&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_centerHorizontal=&quot;true&quot;\n    android:layout_alignParentBottom=&quot;true&quot;&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And inside the code behind</p>\n<pre><code>//create a new AdView    \nval adView = AdView(this)\nadView.adSize = AdSize.SMART_BANNER\nadView.adUnitId = &quot;your adUnitID goes here or you can use a function&quot;\nadView.visibility = View.GONE\n\n//add it to the layout\nval layout = adContainer\nlayout.addView(adView)\n\n//profit\nMobileAds.initialize(this) {}\nval adRequest = AdRequest.Builder().build()\nadView.loadAd(adRequest)\nadView.adListener = object : AdListener(){\n    override fun onAdLoaded() {\n        adView.visibility = View.VISIBLE\n        super.onAdLoaded()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20848390,"reputation":833,"user_id":15313429,"display_name":"Mazhar Iqbal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634197106,"creation_date":1634197106,"answer_id":69566780,"question_id":23337802,"body_markdown":"**you have to replace the xmlns:ads in your parent layout**\r\n\r\n            xmlns:ads=&quot;http://schemas.android.com/tools&quot;\r\n\r\n      **by this**\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p><strong>you have to replace the xmlns:ads in your parent layout</strong></p>\n<pre><code>        xmlns:ads=&quot;http://schemas.android.com/tools&quot;\n\n  **by this**\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n</code></pre>\n"}],"owner":{"account_id":2084993,"reputation":3677,"user_id":1856166,"accept_rate":72,"display_name":"zbz.lvlv"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43921,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"accepted_answer_id":23980933,"answer_count":9,"score":53,"last_activity_date":1634197106,"creation_date":1398678603,"question_id":23337802,"body_markdown":"I have this in my main xml file:\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n    \txmlns:ads=&quot;http://schemas.android.com/apk/lib/com.google.ads&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            ads:adUnitId=&quot;******************&quot;\r\n            ads:adSize=&quot;BANNER&quot;\r\n            android:id=&quot;@+id/adView&quot;/&gt;\r\n\r\nI have already set the ad size and unit id, but when this is run (from MainActivity.java),\r\n\r\n    AdView adView = (AdView)this.findViewById(com.example.lovetestactual.R.id.adView);\r\n    AdRequest adRequest = new AdRequest.Builder().build();\r\n    adView.loadAd(adRequest);\r\n\r\nIt threw an exception of what is in the title.","title":"Ad Size and Ad unit id must be set before loadAd is called","body":"<p>I have this in my main xml file:</p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    xmlns:ads=\"http://schemas.android.com/apk/lib/com.google.ads\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        ads:adUnitId=\"******************\"\n        ads:adSize=\"BANNER\"\n        android:id=\"@+id/adView\"/&gt;\n</code></pre>\n\n<p>I have already set the ad size and unit id, but when this is run (from MainActivity.java),</p>\n\n<pre><code>AdView adView = (AdView)this.findViewById(com.example.lovetestactual.R.id.adView);\nAdRequest adRequest = new AdRequest.Builder().build();\nadView.loadAd(adRequest);\n</code></pre>\n\n<p>It threw an exception of what is in the title.</p>\n"},{"tags":["java","deployment","wildfly"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634197583,"post_id":69566740,"comment_id":122961884,"body_markdown":"I guess that when you are starting manually you are using a different user, hence *Permission denied*","body":"I guess that when you are starting manually you are using a different user, hence <i>Permission denied</i>"},{"owner":{"account_id":9043972,"reputation":139,"user_id":6737118,"accept_rate":50,"display_name":"Tel lui"},"score":0,"creation_date":1634199595,"post_id":69566740,"comment_id":122962718,"body_markdown":"@ScaryWombat you are right, I am using a different user whether than the user added according to the guide I find in: https://linuxize.com/post/how-to-install-wildfly-on-centos-7/   . However, I still do not know how to start it manually by different user...Thank you very much :)","body":"@ScaryWombat you are right, I am using a different user whether than the user added according to the guide I find in: <a href=\"https://linuxize.com/post/how-to-install-wildfly-on-centos-7/\" rel=\"nofollow noreferrer\">linuxize.com/post/how-to-install-wildfly-on-centos-7</a>   . However, I still do not know how to start it manually by different user...Thank you very much :)"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634200344,"post_id":69566740,"comment_id":122963006,"body_markdown":"have a look at https://serverfault.com/questions/841099/systemd-grant-an-unprivileged-user-permission-to-alter-one-specific-service","body":"have a look at <a href=\"https://serverfault.com/questions/841099/systemd-grant-an-unprivileged-user-permission-to-alter-one-specific-service\" title=\"systemd grant an unprivileged user permission to alter one specific service\">serverfault.com/questions/841099/&hellip;</a>"}],"owner":{"account_id":9043972,"reputation":139,"user_id":6737118,"accept_rate":50,"display_name":"Tel lui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634196921,"creation_date":1634196921,"question_id":69566740,"body_markdown":"I get the error below when deploying the app to Wildfly:\r\n\r\n&gt; {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.persistenceunit.\\&quot;funmusic-back.war#productPU\\&quot;&quot; =&gt; &quot;jakarta.persistence.PersistenceException: [PersistenceUnit: productPU] Unable to build Hibernate SessionFactory\r\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: productPU] Unable to build Hibernate SessionFactory\r\n    Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to open specified script target file for writing : productDrop.ddl\r\n    Caused by: java.io.FileNotFoundException: productDrop.ddl (Permission denied)&quot;}}\r\n\r\nThe tricky point I met is, when I start the wildfly by standalone.sh, it is alright. However, when I start it using systemctl start wildfly, this problem happen. I am wondering whether it is the problem related to the Domain Mode and Standalone Mode of Wildfly, but could not recognize the missing piece I should learn in order to solve the problem. My OS using is CentOS 7 and the Wildfly version is 25.\r\n\r\nBelow is the persistence.xml for your reference:\r\n\r\n    &lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;\r\n             version=&quot;2.2&quot;&gt;\r\n    &lt;!-- transaction-type is the type of transactions used by EntityManagers from this persistence unit. --&gt;\r\n    &lt;persistence-unit name=&quot;productPU&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name =&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;&gt;&lt;/property&gt;\r\n            &lt;property name =&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;drop-and-create&quot;&gt;&lt;/property&gt;\r\n            &lt;property name =&quot;javax.persistence.schema-generation.scripts.create-target&quot; value=&quot;productCreate.ddl&quot;&gt;&lt;/property&gt;\r\n            &lt;property name =&quot;javax.persistence.schema-generation.scripts.drop-target&quot; value=&quot;productDrop.ddl&quot;&gt;&lt;/property&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\nI get a single @Entity which is a very simple POJO with a few fields within. As it is simple, I am going to skip it here.\r\n\r\nIt would be grateful if you could point out the cause of the problem and give me some insight of it. Also, document reference with section specified would be more appreciated.\r\n\r\nThank you!","title":"How to solve the problem: java.io.FileNotFoundException when deploying jee app to Wildfly 25","body":"<p>I get the error below when deploying the app to Wildfly:</p>\n<blockquote>\n<p>{&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.persistenceunit.&quot;funmusic-back.war#productPU&quot;&quot; =&gt; &quot;jakarta.persistence.PersistenceException: [PersistenceUnit: productPU] Unable to build Hibernate SessionFactory\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: productPU] Unable to build Hibernate SessionFactory\nCaused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to open specified script target file for writing : productDrop.ddl\nCaused by: java.io.FileNotFoundException: productDrop.ddl (Permission denied)&quot;}}</p>\n</blockquote>\n<p>The tricky point I met is, when I start the wildfly by standalone.sh, it is alright. However, when I start it using systemctl start wildfly, this problem happen. I am wondering whether it is the problem related to the Domain Mode and Standalone Mode of Wildfly, but could not recognize the missing piece I should learn in order to solve the problem. My OS using is CentOS 7 and the Wildfly version is 25.</p>\n<p>Below is the persistence.xml for your reference:</p>\n<pre><code>&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;\n         version=&quot;2.2&quot;&gt;\n&lt;!-- transaction-type is the type of transactions used by EntityManagers from this persistence unit. --&gt;\n&lt;persistence-unit name=&quot;productPU&quot; transaction-type=&quot;JTA&quot;&gt;\n    &lt;properties&gt;\n        &lt;property name =&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;&gt;&lt;/property&gt;\n        &lt;property name =&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;drop-and-create&quot;&gt;&lt;/property&gt;\n        &lt;property name =&quot;javax.persistence.schema-generation.scripts.create-target&quot; value=&quot;productCreate.ddl&quot;&gt;&lt;/property&gt;\n        &lt;property name =&quot;javax.persistence.schema-generation.scripts.drop-target&quot; value=&quot;productDrop.ddl&quot;&gt;&lt;/property&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>I get a single @Entity which is a very simple POJO with a few fields within. As it is simple, I am going to skip it here.</p>\n<p>It would be grateful if you could point out the cause of the problem and give me some insight of it. Also, document reference with section specified would be more appreciated.</p>\n<p>Thank you!</p>\n"},{"tags":["java","javapoet"],"answers":[{"tags":[],"owner":{"account_id":2504304,"reputation":101,"user_id":2178508,"display_name":"ttdevs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634196634,"creation_date":1634196634,"answer_id":69566686,"question_id":65684053,"body_markdown":"I try this:\r\n\r\n     /**\r\n     * Out code is below:\r\n     * \r\n     * public void lambdaTest() {\r\n     *   CompletableFuture.supplyAsync(() -&gt; 1).handle((num, throwable) -&gt;  {\r\n     *     if (num &gt; 2) {\r\n     *       return true;\r\n     *     }\r\n     *     return false;\r\n     *   } );\r\n     * }\r\n     * @return\r\n     */\r\n    public MethodSpec lambdaTest() {\r\n        String param1 = &quot;num&quot;, param2 = &quot;throwable&quot;;\r\n        CodeBlock.Builder builder = CodeBlock.builder();\r\n        CodeBlock.Builder subBuilder = CodeBlock.builder();\r\n        subBuilder.beginControlFlow(&quot;if ($N &gt; 2)&quot;, param1)\r\n                .addStatement(&quot;return true&quot;)\r\n                .endControlFlow()\r\n                .addStatement(&quot;return false&quot;);\r\n        builder.beginControlFlow(&quot;CompletableFuture.supplyAsync(() -&gt; 1).handle(($N, $N) -&gt; &quot;, param1, param2)\r\n                .add(subBuilder.build())\r\n                .endControlFlow(&quot;)&quot;);\r\n        return MethodSpec\r\n                .methodBuilder(&quot;lambdaTest&quot;)\r\n                .addModifiers(Modifier.PUBLIC)\r\n                .returns(void.class)\r\n                .addCode(builder.build())\r\n                .build();\r\n    }","title":"How to add a CodeBlock as part of MethodSpec&#39;s statement in Javapoet","body":"<p>I try this:</p>\n<pre><code> /**\n * Out code is below:\n * \n * public void lambdaTest() {\n *   CompletableFuture.supplyAsync(() -&gt; 1).handle((num, throwable) -&gt;  {\n *     if (num &gt; 2) {\n *       return true;\n *     }\n *     return false;\n *   } );\n * }\n * @return\n */\npublic MethodSpec lambdaTest() {\n    String param1 = &quot;num&quot;, param2 = &quot;throwable&quot;;\n    CodeBlock.Builder builder = CodeBlock.builder();\n    CodeBlock.Builder subBuilder = CodeBlock.builder();\n    subBuilder.beginControlFlow(&quot;if ($N &gt; 2)&quot;, param1)\n            .addStatement(&quot;return true&quot;)\n            .endControlFlow()\n            .addStatement(&quot;return false&quot;);\n    builder.beginControlFlow(&quot;CompletableFuture.supplyAsync(() -&gt; 1).handle(($N, $N) -&gt; &quot;, param1, param2)\n            .add(subBuilder.build())\n            .endControlFlow(&quot;)&quot;);\n    return MethodSpec\n            .methodBuilder(&quot;lambdaTest&quot;)\n            .addModifiers(Modifier.PUBLIC)\n            .returns(void.class)\n            .addCode(builder.build())\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":3004149,"reputation":711,"user_id":2548990,"accept_rate":29,"display_name":"abhilash_goyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":560,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634196634,"creation_date":1610454772,"question_id":65684053,"body_markdown":"I want to create a lambda expression like:\r\n\r\n```\r\n// some code\r\nCompletableFuture.handle((s,t) -&gt; {\r\nif(t != null){\r\n//some code}\r\nelse{\r\n// some code}\r\n});\r\n//some code\r\n```\r\nI have all logic of if-else in a CodeBlock code, and parent code in the MethodSpec method.\r\n\r\nI am trying to add this code as follows:\r\n\r\n`method.addStament(&quot;CompletableFuture.handle((s,t) -&gt; $N)&quot;, code.build);` \r\n\r\nwhich obviously is not working! Want help only for Lamda part.\r\n\r\nAny help !","title":"How to add a CodeBlock as part of MethodSpec&#39;s statement in Javapoet","body":"<p>I want to create a lambda expression like:</p>\n<pre><code>// some code\nCompletableFuture.handle((s,t) -&gt; {\nif(t != null){\n//some code}\nelse{\n// some code}\n});\n//some code\n</code></pre>\n<p>I have all logic of if-else in a CodeBlock code, and parent code in the MethodSpec method.</p>\n<p>I am trying to add this code as follows:</p>\n<p><code>method.addStament(&quot;CompletableFuture.handle((s,t) -&gt; $N)&quot;, code.build);</code></p>\n<p>which obviously is not working! Want help only for Lamda part.</p>\n<p>Any help !</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1634155333,"post_id":69561607,"comment_id":122952914,"body_markdown":"After this line: `int numUser = input.nextInt();` you have to add a call to `nextLine()` to remove the newline that wasn&#39;t read by `nextInt()`.","body":"After this line: <code>int numUser = input.nextInt();</code> you have to add a call to <code>nextLine()</code> to remove the newline that wasn&#39;t read by <code>nextInt()</code>."}],"answers":[{"tags":[],"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1634196517,"creation_date":1634155368,"answer_id":69561674,"question_id":69561607,"body_markdown":"Insert input.nextLine() before for loop.\r\n\r\nBecause nextInt () doesn&#39;t read the whole line but only an int number.\r\nThe next nextLine () consumes the line and therefore everything after the number.\r\nYou can try to insert &quot;3 User1&quot; in the input line in the number of users and see that it takes you as input first 3 as the number of users and then User1 as the user.\r\n\r\n[![Test Image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lwPfL.png","title":"Beginner, Java for-loop prints out statement twice before accepting a string input","body":"<p>Insert input.nextLine() before for loop.</p>\n<p>Because nextInt () doesn't read the whole line but only an int number.\nThe next nextLine () consumes the line and therefore everything after the number.\nYou can try to insert &quot;3 User1&quot; in the input line in the number of users and see that it takes you as input first 3 as the number of users and then User1 as the user.</p>\n<p><a href=\"https://i.stack.imgur.com/lwPfL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lwPfL.png\" alt=\"Test Image\" /></a></p>\n"}],"owner":{"account_id":23025008,"reputation":11,"user_id":17145411,"display_name":"pewpewpew"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634222525,"answer_count":1,"score":1,"last_activity_date":1634196517,"creation_date":1634154996,"question_id":69561607,"body_markdown":"I&#39;m writing a program that asks how many users are going to use it, based off that response it creates an array of String type holding the names of each user. The problem I&#39;m running into is that when I execute the for-loop that stores each name into the String type array, it prints out the statement twice before accepting a string input. Anyone know what I&#39;m doing wrong?\r\n\r\n\r\n        Scanner input = new Scanner(System.in);\r\n        \r\n        System.out.print(&quot;Please enter the number of users: &quot;);\r\n        int numUser = input.nextInt();\r\n        \r\n        String[] userArray = new String[numUser];\r\n        \r\n       \r\n        for (int i = 0; i &lt; numUser; i++) {\r\n            System.out.print(&quot;For user &quot; + (i+1) + &quot;, please type your username followed by enter: &quot;);\r\n            String inputUsername = input.nextLine(); \r\n            userArray[i] = inputUsername;\r\n        }\r\n        for (int i = 0; i &lt; numUser; i++) {\r\n            System.out.println(userArray[i]);\r\n        }\r\n    }\r\n\r\nOUTPUT\r\n-------------------------------------------------------------------\r\nnotice in the image of my output that my statement is outputted twice on the same line and on the second statement I can finally start inputting names storing them into the array. Also, I have a for-loop that displays the names, notice that the first name is blank and after that it displays the rest of the names.\r\n[Image of the output of my Java program after it&#39;s been ran][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T56gr.png","title":"Beginner, Java for-loop prints out statement twice before accepting a string input","body":"<p>I'm writing a program that asks how many users are going to use it, based off that response it creates an array of String type holding the names of each user. The problem I'm running into is that when I execute the for-loop that stores each name into the String type array, it prints out the statement twice before accepting a string input. Anyone know what I'm doing wrong?</p>\n<pre><code>    Scanner input = new Scanner(System.in);\n    \n    System.out.print(&quot;Please enter the number of users: &quot;);\n    int numUser = input.nextInt();\n    \n    String[] userArray = new String[numUser];\n    \n   \n    for (int i = 0; i &lt; numUser; i++) {\n        System.out.print(&quot;For user &quot; + (i+1) + &quot;, please type your username followed by enter: &quot;);\n        String inputUsername = input.nextLine(); \n        userArray[i] = inputUsername;\n    }\n    for (int i = 0; i &lt; numUser; i++) {\n        System.out.println(userArray[i]);\n    }\n}\n</code></pre>\n<h2>OUTPUT</h2>\n<p>notice in the image of my output that my statement is outputted twice on the same line and on the second statement I can finally start inputting names storing them into the array. Also, I have a for-loop that displays the names, notice that the first name is blank and after that it displays the rest of the names.\n<a href=\"https://i.stack.imgur.com/T56gr.png\" rel=\"nofollow noreferrer\">Image of the output of my Java program after it's been ran</a></p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634196461,"creation_date":1634196461,"answer_id":69566650,"question_id":69441774,"body_markdown":"Usually, this is handled by sorting by something unique and using `setMaxResults(1)`, but I don&#39;t know how Spring Data supports this.","title":"Spring data JPA Specification - return list and limit result-attribute to occur only once in the list","body":"<p>Usually, this is handled by sorting by something unique and using <code>setMaxResults(1)</code>, but I don't know how Spring Data supports this.</p>\n"}],"owner":{"account_id":19944897,"reputation":27,"user_id":14615802,"display_name":"petr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69566650,"answer_count":1,"score":0,"last_activity_date":1634196461,"creation_date":1633377647,"question_id":69441774,"body_markdown":"I am trying to build a specification which takes as an input Set UUID fooIds and long olderThanInMillis.\r\n\r\nMy method should return a List of Result. The Result has a fooId as a field (not id). **In the table, there may be many objects with identical fooId. However I wish to get only 1 Result per fooId.**\r\n\r\nMy current specification looks like this:\r\n\r\n ```\r\nprivate Specification&lt;Result&gt; buildSpec(Set&lt;UUID&gt; fooIds, long olderThanMilis)\r\n\t{\r\n\t\tSpecification&lt;Result&gt; idSpec = (root, query, builder) -&gt; builder.or(builder.in(root.get(&quot;fooId&quot;)).value(clientPoses));\r\n\t\tSpecification&lt;Result&gt; olderThanSpec = (root, query, builder) -&gt; builder.lessThanOrEqualTo(root.get(&quot;created&quot;), olderThanMilis);\r\n\r\n\t\treturn idSpec.and(olderThanSpec);\r\n\t} \r\n```\r\n\r\n\r\nI am trying to pack something on top of what I have, but nothing seems to work. Possible workaround is of course not to load from DB a List&lt;Result&gt;, but rather load it one by one per fooId and olderThanMillis with limit 1... In case of loading it one by one, is that a bad practice or not? Any advice, please? Thank you...","title":"Spring data JPA Specification - return list and limit result-attribute to occur only once in the list","body":"<p>I am trying to build a specification which takes as an input Set UUID fooIds and long olderThanInMillis.</p>\n<p>My method should return a List of Result. The Result has a fooId as a field (not id). <strong>In the table, there may be many objects with identical fooId. However I wish to get only 1 Result per fooId.</strong></p>\n<p>My current specification looks like this:</p>\n<pre><code>private Specification&lt;Result&gt; buildSpec(Set&lt;UUID&gt; fooIds, long olderThanMilis)\n   {\n       Specification&lt;Result&gt; idSpec = (root, query, builder) -&gt; builder.or(builder.in(root.get(&quot;fooId&quot;)).value(clientPoses));\n       Specification&lt;Result&gt; olderThanSpec = (root, query, builder) -&gt; builder.lessThanOrEqualTo(root.get(&quot;created&quot;), olderThanMilis);\n\n       return idSpec.and(olderThanSpec);\n   } \n</code></pre>\n<p>I am trying to pack something on top of what I have, but nothing seems to work. Possible workaround is of course not to load from DB a List, but rather load it one by one per fooId and olderThanMillis with limit 1... In case of loading it one by one, is that a bad practice or not? Any advice, please? Thank you...</p>\n"},{"tags":["java","encoding","base64","uuid"],"comments":[{"owner":{"account_id":4192142,"reputation":3239,"user_id":3434508,"accept_rate":40,"display_name":"Stavr00"},"score":0,"creation_date":1441027598,"post_id":28129639,"comment_id":52499803,"body_markdown":"Another discussion here: http://stackoverflow.com/questions/772802/storing-uuid-as-base64-string","body":"Another discussion here: <a href=\"http://stackoverflow.com/questions/772802/storing-uuid-as-base64-string\" title=\"storing uuid as base64 string\">stackoverflow.com/questions/772802/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5035249,"reputation":465,"user_id":4044256,"accept_rate":50,"display_name":"Maxime"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1422130268,"creation_date":1422129920,"answer_id":28129678,"question_id":28129639,"body_markdown":"You can use Base64 from apache commons codecs.\r\nhttps://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html\r\n\r\n    import java.util.UUID;\r\n    import org.apache.commons.codec.binary.Base64;\r\n    \r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            String uid = UUID.randomUUID().toString();\r\n            System.out.println(uid);\r\n            byte[] b = Base64.encodeBase64(uid.getBytes());\r\n            System.out.println(new String(b));\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How can I convert a UUID to base64?","body":"<p>You can use Base64 from apache commons codecs.\n<a href=\"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html\" rel=\"nofollow\">https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html</a></p>\n\n<pre><code>import java.util.UUID;\nimport org.apache.commons.codec.binary.Base64;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        String uid = UUID.randomUUID().toString();\n        System.out.println(uid);\n        byte[] b = Base64.encodeBase64(uid.getBytes());\n        System.out.println(new String(b));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1634196244,"creation_date":1422129955,"answer_id":28129686,"question_id":28129639,"body_markdown":"First, convert your UUID to a byte buffer for consumption by a [`Base64` encoder][1]:\r\n\r\n    ByteBuffer uuidBytes = ByteBuffer.wrap(new byte[16]);\r\n    uuidBytes.putLong(uuid.getMostSignificantBits());\r\n    uuidBytes.putLong(uuid.getLeastSignificantBits());\r\n\r\nThen encode that using the encoder:\r\n\r\n    byte[] encoded = encoder.encode(uuidBytes);\r\n\r\nAlternatively, you can get a Base64-encoded string like this:\r\n\r\n    String encoded = encoder.encodeToString(uuidBytes);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Base64.Encoder.html","title":"How can I convert a UUID to base64?","body":"<p>First, convert your UUID to a byte buffer for consumption by a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Base64.Encoder.html\" rel=\"nofollow noreferrer\"><code>Base64</code> encoder</a>:</p>\n<pre><code>ByteBuffer uuidBytes = ByteBuffer.wrap(new byte[16]);\nuuidBytes.putLong(uuid.getMostSignificantBits());\nuuidBytes.putLong(uuid.getLeastSignificantBits());\n</code></pre>\n<p>Then encode that using the encoder:</p>\n<pre><code>byte[] encoded = encoder.encode(uuidBytes);\n</code></pre>\n<p>Alternatively, you can get a Base64-encoded string like this:</p>\n<pre><code>String encoded = encoder.encodeToString(uuidBytes);\n</code></pre>\n"}],"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8929,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":28129686,"answer_count":2,"score":6,"last_activity_date":1634196244,"creation_date":1422129654,"question_id":28129639,"body_markdown":"I want to take type `UUID` and output it in a `Base64` encoded format, however given the input methods on `Base64` and outputs on `UUID` how to accomplish this doesn&#39;t seem obvious.\r\n\r\n**update** though not an explicit requirement for my use case, it would be nice to know if the method used uses the raw UUID (the 128 bits that a UUID actually is) of the UUID, as the standard hex encoding does.\r\n","title":"How can I convert a UUID to base64?","body":"<p>I want to take type <code>UUID</code> and output it in a <code>Base64</code> encoded format, however given the input methods on <code>Base64</code> and outputs on <code>UUID</code> how to accomplish this doesn't seem obvious.</p>\n\n<p><strong>update</strong> though not an explicit requirement for my use case, it would be nice to know if the method used uses the raw UUID (the 128 bits that a UUID actually is) of the UUID, as the standard hex encoding does.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"score":0,"creation_date":1633367297,"post_id":69439639,"comment_id":122735676,"body_markdown":"Shouldn&#39;t it be findByNameAndTitleIn(String name, Set&lt;String&gt; titles)?","body":"Shouldn&#39;t it be findByNameAndTitleIn(String name, Set&lt;String&gt; titles)?"},{"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"score":0,"creation_date":1633367912,"post_id":69439639,"comment_id":122735931,"body_markdown":"@MrFisherman title is a property of the `Book` class, not of the `Author`","body":"@MrFisherman title is a property of the <code>Book</code> class, not of the <code>Author</code>"},{"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"score":0,"creation_date":1633368050,"post_id":69439639,"comment_id":122735977,"body_markdown":"Right, sorry :).","body":"Right, sorry :)."},{"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"score":0,"creation_date":1633368671,"post_id":69439639,"comment_id":122736212,"body_markdown":"Can tou also try to capitalize first letter of &quot;title&quot; word? Like findByAuthorNameAndBooks_TitleIn. All of similar queries on the internet begins with capital character like here https://stackoverflow-com.translate.goog/a/33438696?_x_tr_sl=en&amp;_x_tr_tl=pl&amp;_x_tr_hl=pl&amp;_x_tr_pto=nui,op,sc or here https://docs-spring-io.translate.goog/spring-data/jpa/docs/current/reference/html/?_x_tr_sl=en&amp;_x_tr_tl=pl&amp;_x_tr_hl=pl&amp;_x_tr_pto=nui,op,sc#repositories.query-methods.query-property-expressions","body":"Can tou also try to capitalize first letter of &quot;title&quot; word? Like findByAuthorNameAndBooks_TitleIn. All of similar queries on the internet begins with capital character like here <a href=\"https://stackoverflow-com.translate.goog/a/33438696?_x_tr_sl=en&amp;_x_tr_tl=pl&amp;_x_tr_hl=pl&amp;_x_tr_pto=nui,op,sc\" rel=\"nofollow noreferrer\">stackoverflow-com.translate.goog/a/&hellip;</a> or here <a href=\"https://docs-spring-io.translate.goog/spring-data/jpa/docs/current/reference/html/?_x_tr_sl=en&amp;_x_tr_tl=pl&amp;_x_tr_hl=pl&amp;_x_tr_pto=nui,op,sc#repositories.query-methods.query-property-expressions\" rel=\"nofollow noreferrer\">docs-spring-io.translate.goog/spring-data/jpa/docs/current/&hellip;</a>"},{"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"score":0,"creation_date":1633369171,"post_id":69439639,"comment_id":122736383,"body_markdown":"@MrFisherman Thanks, tried it, but the behavior didn&#39;t change, it also fetches all related books","body":"@MrFisherman Thanks, tried it, but the behavior didn&#39;t change, it also fetches all related books"},{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1633369885,"post_id":69439639,"comment_id":122736628,"body_markdown":"I dont think there is a way to express the `join fetch` in method name. So it always performs an `left outer join` which leads to the undesired results. Why don&#39;t you keep the `@Query` one? Query method names are just for convenience and cannot satisfy all needs.","body":"I dont think there is a way to express the <code>join fetch</code> in method name. So it always performs an <code>left outer join</code> which leads to the undesired results. Why don&#39;t you keep the <code>@Query</code> one? Query method names are just for convenience and cannot satisfy all needs."},{"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"score":0,"creation_date":1633456710,"post_id":69439639,"comment_id":122763282,"body_markdown":"@pleft thanks for the comment. I&#39;ll keep the query, it was rather a sporting interest to do it with method names and it seemed to me that this could be easily achieved.","body":"@pleft thanks for the comment. I&#39;ll keep the query, it was rather a sporting interest to do it with method names and it seemed to me that this could be easily achieved."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634196080,"creation_date":1634196080,"answer_id":69566574,"question_id":69439639,"body_markdown":"I wouldn&#39;t recommend you to use the method name convention as that is only a tool for quick prototyping AFAIU. As soon as the requirements change you might have to switch back to a query and then you will have fun to decipher what this method name convention really means.\r\n\r\nBut even your JPQL/HQL query isn&#39;t really safe as you are returning managed entities with filtered collections. A simple change to the collection could lead to deletion of all filtered out books. I would recommend you use DTOs instead to avoid all of the issues.\r\n\r\nI think this is a perfect use case for [Blaze-Persistence Entity Views][1].\r\n\r\nI created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.\r\n\r\nA DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:\r\n\r\n    @EntityView(Author.class)\r\n    public interface AuthorDto {\r\n        @IdMapping\r\n        Long getId();\r\n        String getAuthorName();\r\n        Set&lt;BookDto&gt; getBooks();\r\n\r\n        @EntityView(Book.class)\r\n        interface BookDto {\r\n            @IdMapping\r\n            Long getId();\r\n            String getTitle();\r\n        }\r\n    }\r\n\r\nQuerying is a matter of applying the entity view to a query, the simplest being just a query by id.\r\n\r\n`AuthorDto a = entityViewManager.find(entityManager, AuthorDto.class, id);`\r\n\r\nThe Spring Data integration allows you to use it almost like Spring Data Projections: https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\r\n\r\n    Page&lt;AuthorDto&gt; findAll(Pageable pageable);\r\n\t\r\nThe best part is, it will only fetch the state that is actually necessary!\r\n\r\nIn your particular case, you could use this:\r\n\r\n    Optional&lt;AuthorDto&gt; findByAuthorNameAndBooks_titleIn(String authorName, Set&lt;String&gt; titles) {\r\n        return findOne((root, query, cb) -&gt; {\r\n            return cb.and(\r\n                cb.equal(root.get(&quot;name&quot;), authorName),\r\n                root.get(&quot;books&quot;).get(&quot;title&quot;).in(titles)\r\n             );\r\n        });\r\n    }\r\n\r\n\r\n  [1]: https://github.com/Blazebit/blaze-persistence#entity-view-usage","title":"Rewrite JPQL-query with spring-data query from method names","body":"<p>I wouldn't recommend you to use the method name convention as that is only a tool for quick prototyping AFAIU. As soon as the requirements change you might have to switch back to a query and then you will have fun to decipher what this method name convention really means.</p>\n<p>But even your JPQL/HQL query isn't really safe as you are returning managed entities with filtered collections. A simple change to the collection could lead to deletion of all filtered out books. I would recommend you use DTOs instead to avoid all of the issues.</p>\n<p>I think this is a perfect use case for <a href=\"https://github.com/Blazebit/blaze-persistence#entity-view-usage\" rel=\"nofollow noreferrer\">Blaze-Persistence Entity Views</a>.</p>\n<p>I created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.</p>\n<p>A DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:</p>\n<pre><code>@EntityView(Author.class)\npublic interface AuthorDto {\n    @IdMapping\n    Long getId();\n    String getAuthorName();\n    Set&lt;BookDto&gt; getBooks();\n\n    @EntityView(Book.class)\n    interface BookDto {\n        @IdMapping\n        Long getId();\n        String getTitle();\n    }\n}\n</code></pre>\n<p>Querying is a matter of applying the entity view to a query, the simplest being just a query by id.</p>\n<p><code>AuthorDto a = entityViewManager.find(entityManager, AuthorDto.class, id);</code></p>\n<p>The Spring Data integration allows you to use it almost like Spring Data Projections: <a href=\"https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\" rel=\"nofollow noreferrer\">https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features</a></p>\n<pre><code>Page&lt;AuthorDto&gt; findAll(Pageable pageable);\n</code></pre>\n<p>The best part is, it will only fetch the state that is actually necessary!</p>\n<p>In your particular case, you could use this:</p>\n<pre><code>Optional&lt;AuthorDto&gt; findByAuthorNameAndBooks_titleIn(String authorName, Set&lt;String&gt; titles) {\n    return findOne((root, query, cb) -&gt; {\n        return cb.and(\n            cb.equal(root.get(&quot;name&quot;), authorName),\n            root.get(&quot;books&quot;).get(&quot;title&quot;).in(titles)\n         );\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634196080,"creation_date":1633366015,"question_id":69439639,"body_markdown":"I have two entities with many-to-many relationship:\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;author&quot;)\r\n    public class Author {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        @Column(name = &quot;author_name&quot;, unique = true)\r\n        private String authorName;\r\n\r\n        @ManyToMany // default FetchType.LAZY\r\n        @JoinTable(name = &quot;author_book&quot;,\r\n                joinColumns = @JoinColumn(name = &quot;author_id&quot;),\r\n                inverseJoinColumns = @JoinColumn(name = &quot;book_id&quot;))\r\n        private Set&lt;Book&gt; books;\r\n\r\n        // other fields, getters, setters\r\n    }\r\n\r\nand\r\n\r\n    @Entity\r\n    @Table(name = &quot;book&quot;)\r\n    public class Book {\r\n        \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n\r\n        @Column(name = &quot;title&quot;, unique = true)\r\n        private String title;\r\n      \r\n        // other fields, getters, setters\r\n    }\r\n\r\nLet&#39;s say, that we have in the database 1 author with author_name &#39;*Stephen King*&#39; with related 3 books with titles &#39;*book-title-1*&#39;, &#39;*book-title-2*&#39;, &#39;*book-title-3*&#39;.\r\n\r\nI need to get author by name with his books with a certain titles, e.g.: \r\n\r\n&gt; find an author named &#39;Stephen King&#39; with books named &#39;book-title-1&#39; or &#39;book-title-2&#39;\r\n\r\n With following query as below, it works, namely I&#39;m getting an author with a set of **two** Book-elements.\r\n\r\n    public interface AuthorRepository extends JpaRepository&lt;Author, Long&gt; {\r\n    \r\n        @Query(&quot;select a from Author a join fetch a.books b &quot; +\r\n                &quot;where a.authorName=:authorName and b.title in :titles&quot;)\r\n        Optional&lt;Author&gt; findByNameAndBookTitles(String authorName, Set&lt;String&gt; titles);\r\n    }\r\nHibernate query for method above (simplified):\r\n\r\n   \r\n\r\n     select author.id, book.id, author.author_name, book.title, author_book.author_id, author_book.book_id\r\n        from public.author\r\n        inner join public.author_book on author.id= author_book.author_id \r\n        inner join public.book on author_book.book_id=book.id \r\n        where author.author_name=? and (book.title in (? , ?))\r\n\r\nQuestion: **Is there a way to rewrite it with query from method names?**\r\n\r\nI tried smth like this: \r\n\r\n    Optional&lt;Author&gt; findByAuthorNameAndBooks_titleIn(String authorName, Set&lt;String&gt; titles);\r\n\r\nbut it returns author and **all** related books instead of two books, so hibernate makes two following queries (second hibernate query is made when the `Set&lt;Book&gt; books` is accessed for the first time):\r\n\r\n    Hibernate:\r\n    select author.id , author.author_name\r\n    from public.author\r\n    left outer join public.author_book on author.id = author_book.author_id \r\n    left outer join public.book on author_book.book_id= book.id \r\n    where author_name=? and (book.title in (? , ?))\r\n\r\n    Hibernate: \r\n    select author_book.author_id, author_book.book_id, book.id, book.title \r\n    from public.author_book\r\n    inner join public.book on author_book.book_id=book.id \r\n    where author_book.author_id=?\r\n\r\nI suggested that probably it would work with `@ManyToMany(fetch = FetchType.EAGER)`, but hibernate again made two queries like above, with the only difference that the second query is made before the first call to the set of books. \r\n\r\nIf you need any clarification, let me know and thanks in advance.","title":"Rewrite JPQL-query with spring-data query from method names","body":"<p>I have two entities with many-to-many relationship:</p>\n<pre><code>@Entity\n@Table(name = &quot;author&quot;)\npublic class Author {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;author_name&quot;, unique = true)\n    private String authorName;\n\n    @ManyToMany // default FetchType.LAZY\n    @JoinTable(name = &quot;author_book&quot;,\n            joinColumns = @JoinColumn(name = &quot;author_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;book_id&quot;))\n    private Set&lt;Book&gt; books;\n\n    // other fields, getters, setters\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Entity\n@Table(name = &quot;book&quot;)\npublic class Book {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;title&quot;, unique = true)\n    private String title;\n  \n    // other fields, getters, setters\n}\n</code></pre>\n<p>Let's say, that we have in the database 1 author with author_name '<em>Stephen King</em>' with related 3 books with titles '<em>book-title-1</em>', '<em>book-title-2</em>', '<em>book-title-3</em>'.</p>\n<p>I need to get author by name with his books with a certain titles, e.g.:</p>\n<blockquote>\n<p>find an author named 'Stephen King' with books named 'book-title-1' or 'book-title-2'</p>\n</blockquote>\n<p>With following query as below, it works, namely I'm getting an author with a set of <strong>two</strong> Book-elements.</p>\n<pre><code>public interface AuthorRepository extends JpaRepository&lt;Author, Long&gt; {\n\n    @Query(&quot;select a from Author a join fetch a.books b &quot; +\n            &quot;where a.authorName=:authorName and b.title in :titles&quot;)\n    Optional&lt;Author&gt; findByNameAndBookTitles(String authorName, Set&lt;String&gt; titles);\n}\n</code></pre>\n<p>Hibernate query for method above (simplified):</p>\n<pre><code> select author.id, book.id, author.author_name, book.title, author_book.author_id, author_book.book_id\n    from public.author\n    inner join public.author_book on author.id= author_book.author_id \n    inner join public.book on author_book.book_id=book.id \n    where author.author_name=? and (book.title in (? , ?))\n</code></pre>\n<p>Question: <strong>Is there a way to rewrite it with query from method names?</strong></p>\n<p>I tried smth like this:</p>\n<pre><code>Optional&lt;Author&gt; findByAuthorNameAndBooks_titleIn(String authorName, Set&lt;String&gt; titles);\n</code></pre>\n<p>but it returns author and <strong>all</strong> related books instead of two books, so hibernate makes two following queries (second hibernate query is made when the <code>Set&lt;Book&gt; books</code> is accessed for the first time):</p>\n<pre><code>Hibernate:\nselect author.id , author.author_name\nfrom public.author\nleft outer join public.author_book on author.id = author_book.author_id \nleft outer join public.book on author_book.book_id= book.id \nwhere author_name=? and (book.title in (? , ?))\n\nHibernate: \nselect author_book.author_id, author_book.book_id, book.id, book.title \nfrom public.author_book\ninner join public.book on author_book.book_id=book.id \nwhere author_book.author_id=?\n</code></pre>\n<p>I suggested that probably it would work with <code>@ManyToMany(fetch = FetchType.EAGER)</code>, but hibernate again made two queries like above, with the only difference that the second query is made before the first call to the set of books.</p>\n<p>If you need any clarification, let me know and thanks in advance.</p>\n"},{"tags":["java","android","retrofit2"],"comments":[{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":2,"creation_date":1634193882,"post_id":69566135,"comment_id":122960624,"body_markdown":"`Missing either @GET URL or @Url parameter.`","body":"<code>Missing either @GET URL or @Url parameter.</code>"},{"owner":{"account_id":17066236,"reputation":167,"user_id":12348326,"display_name":"BroscR"},"score":0,"creation_date":1634195225,"post_id":69566135,"comment_id":122961087,"body_markdown":"Does this answer your question? [java.lang.IllegalStateException: Could not execute method for android:onClick in android](https://stackoverflow.com/questions/41196392/java-lang-illegalstateexception-could-not-execute-method-for-androidonclick-in)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41196392/java-lang-illegalstateexception-could-not-execute-method-for-androidonclick-in\">java.lang.IllegalStateException: Could not execute method for android:onClick in android</a>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1634196803,"post_id":69566135,"comment_id":122961630,"body_markdown":"@BroscR No, see a_local_nobody&#39;s comment for the actual error message.","body":"@BroscR No, see a_local_nobody&#39;s comment for the actual error message."}],"answers":[{"tags":[],"owner":{"account_id":11667426,"reputation":643,"user_id":8543717,"display_name":"Rezaul Islam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634195832,"creation_date":1634195832,"answer_id":69566510,"question_id":69566135,"body_markdown":"You are missing URL(Request destination path) after ```@GET ```in your```searchMovie()``` method in ```MovieApi interface```\r\n\r\nExample:\r\n```@GET(&quot;api/fruit/all&quot;)```","title":"App crashing when i hit a button that calls a function i made","body":"<p>You are missing URL(Request destination path) after <code>@GET </code>in your<code>searchMovie()</code> method in <code>MovieApi interface</code></p>\n<p>Example:\n<code>@GET(&quot;api/fruit/all&quot;)</code></p>\n"}],"owner":{"account_id":20646008,"reputation":17,"user_id":15157513,"display_name":"Yagami AMV"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1634203887,"accepted_answer_id":69566510,"answer_count":1,"score":-2,"last_activity_date":1634196032,"creation_date":1634193753,"question_id":69566135,"body_markdown":"Ok, so I Am making a movie app and while doing so I came across this problem. I Have this function which when pressed will print out titles of some movies but when I try to run it I get this error message I&#39;m getting the movies using TMDB API.\r\nIf you know how to fix it please tell me, Thanks!\r\n\r\n```\r\njava.lang.IllegalStateException: Could not execute method for android:onClick\r\n        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:414)\r\n        at android.view.View.performClick(View.java:7448)\r\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n        at android.view.View.performClickInternal(View.java:7425)\r\n        at android.view.View.access$3600(View.java:810)\r\n        at android.view.View$PerformClick.run(View.java:28305)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n     Caused by: java.lang.reflect.InvocationTargetException\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:409)\r\n        at android.view.View.performClick(View.java:7448)&#160;\r\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)&#160;\r\n        at android.view.View.performClickInternal(View.java:7425)&#160;\r\n        at android.view.View.access$3600(View.java:810)&#160;\r\n        at android.view.View$PerformClick.run(View.java:28305)&#160;\r\n        at android.os.Handler.handleCallback(Handler.java:938)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n        at android.os.Looper.loop(Looper.java:223)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)&#160;\r\n     Caused by: java.lang.IllegalArgumentException: Missing either @GET URL or @Url parameter.\r\n        for method MovieApi.searchMovie\r\n        at retrofit2.Utils.methodError(Utils.java:54)\r\n        at retrofit2.Utils.methodError(Utils.java:43)\r\n        at retrofit2.RequestFactory$Builder.build(RequestFactory.java:210)\r\n        at retrofit2.RequestFactory.parseAnnotations(RequestFactory.java:67)\r\n        at retrofit2.ServiceMethod.parseAnnotations(ServiceMethod.java:26)\r\n        at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:202)\r\n        at retrofit2.Retrofit$1.invoke(Retrofit.java:160)\r\n        at java.lang.reflect.Proxy.invoke(Proxy.java:1006)\r\n        at $Proxy1.searchMovie(Unknown Source)\r\n        at com.example.watchitmovieapp.MainActivity.GetRetrofitResponse(MainActivity.java:44)\r\n        at com.example.watchitmovieapp.MainActivity.onButtonClicked(MainActivity.java:37)\r\n```\r\nHere is my code\r\n**Main Activity**\r\n\r\n```\r\npackage com.example.watchitmovieapp;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\n\r\nimport com.example.watchitmovieapp.models.MovieModel;\r\nimport com.example.watchitmovieapp.request.Servicey;\r\nimport com.example.watchitmovieapp.response.MovieSearchResponse;\r\nimport com.example.watchitmovieapp.utils.Credentials;\r\nimport com.example.watchitmovieapp.utils.MovieApi;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Button btn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        btn = findViewById(R.id.button);\r\n\r\n    }\r\n\r\n    public void onButtonClicked(View view){\r\n        GetRetrofitResponse();\r\n    }\r\n\r\n    private void GetRetrofitResponse() {\r\n        MovieApi movieApi = Servicey.getMovieApi();\r\n\r\n        Call&lt;MovieSearchResponse&gt; responseCall = movieApi\r\n                .searchMovie(\r\n                        Credentials.API_KEY,\r\n                        &quot;Jack Reacher&quot;,\r\n                        &quot;1&quot;);\r\n        responseCall.enqueue(new Callback&lt;MovieSearchResponse&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;MovieSearchResponse&gt; call, Response&lt;MovieSearchResponse&gt; response) {\r\n                if (response.code() == 200){\r\n                    //Log.v(&quot;Tag&quot;, &quot;The response&quot; + response.body().toString());\r\n\r\n                    List&lt;MovieModel&gt; movies = new ArrayList&lt;&gt;(response.body().getMovies());\r\n\r\n                    for (MovieModel movie: movies){\r\n                        Log.v(&quot;Tag&quot;, &quot;Name&quot; + movie.getTitle());\r\n                    }\r\n                }else{\r\n                    try {\r\n                        Log.v(&quot;Tag&quot;, &quot;Error&quot; + response.errorBody().string());\r\n                    }catch (IOException e){\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;MovieSearchResponse&gt; call, Throwable t) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n**Servicey**\r\n\r\n```\r\npackage com.example.watchitmovieapp.request;\r\n\r\nimport com.example.watchitmovieapp.utils.Credentials;\r\nimport com.example.watchitmovieapp.utils.MovieApi;\r\n\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\nimport retrofit2.http.GET;\r\n\r\npublic class Servicey {\r\n    private static Retrofit.Builder retrofitBuilder =\r\n            new Retrofit.Builder()\r\n            .baseUrl(Credentials.BASE_URL)\r\n            .addConverterFactory(GsonConverterFactory.create());\r\n\r\n    private static Retrofit retrofit = retrofitBuilder.build();\r\n\r\n    private static  MovieApi movieApi = retrofit.create(MovieApi.class);\r\n\r\n    public static MovieApi getMovieApi(){\r\n        return movieApi;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n**MovieSearchResponse**\r\n\r\n```\r\npackage com.example.watchitmovieapp.response;\r\n\r\nimport com.example.watchitmovieapp.models.MovieModel;\r\nimport com.google.gson.annotations.Expose;\r\nimport com.google.gson.annotations.SerializedName;\r\n\r\nimport java.util.List;\r\n\r\npublic class MovieSearchResponse {\r\n    @SerializedName(&quot;total_results&quot;)\r\n    @Expose()\r\n    private int total_count;\r\n    @SerializedName(&quot;results&quot;)\r\n    @Expose()\r\n    private List&lt;MovieModel&gt; movies;\r\n    public int getTotal_count(){\r\n        return total_count;\r\n    }\r\n    public List&lt;MovieModel&gt; getMovies(){\r\n        return movies;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;MovieSearchResponse{&quot; +\r\n                &quot;total_count=&quot; + total_count +\r\n                &quot;, movies=&quot; + movies +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**MovieApi**\r\n```\r\npackage com.example.watchitmovieapp.utils;\r\n\r\nimport android.graphics.Movie;\r\n\r\nimport com.example.watchitmovieapp.response.MovieSearchResponse;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.http.GET;\r\nimport retrofit2.http.Query;\r\n\r\npublic interface MovieApi {\r\n\r\n    // searching\r\n    @GET\r\n    Call&lt;MovieSearchResponse&gt; searchMovie(\r\n            @Query(&quot;key&quot;) String key,\r\n            @Query(&quot;query&quot;) String query,\r\n            @Query(&quot;page&quot;) String page\r\n    );\r\n}\r\n\r\n```\r\n\r\n**Movie Model**\r\n\r\n```\r\npackage com.example.watchitmovieapp.models;\r\n\r\nimport android.os.Parcel;\r\nimport android.os.Parcelable;\r\n\r\npublic class MovieModel implements Parcelable  {\r\n\r\n    private String title;\r\n    private String poster_path;\r\n    private String release_date;\r\n    private int movie_id;\r\n    private float vote_average;\r\n    private String movie_overview;\r\n\r\n    //Constructor\r\n\r\n\r\n    public MovieModel(String title, String poster_path, String release_date, int movie_id, float vote_average, String movie_overview) {\r\n        this.title = title;\r\n        this.poster_path = poster_path;\r\n        this.release_date = release_date;\r\n        this.movie_id = movie_id;\r\n        this.vote_average = vote_average;\r\n        this.movie_overview = movie_overview;\r\n    }\r\n\r\n    //Getters\r\n\r\n    protected MovieModel(Parcel in) {\r\n        title = in.readString();\r\n        poster_path = in.readString();\r\n        release_date = in.readString();\r\n        movie_id = in.readInt();\r\n        vote_average = in.readFloat();\r\n        movie_overview = in.readString();\r\n    }\r\n\r\n    public static final Creator&lt;MovieModel&gt; CREATOR = new Creator&lt;MovieModel&gt;() {\r\n        @Override\r\n        public MovieModel createFromParcel(Parcel in) {\r\n            return new MovieModel(in);\r\n        }\r\n\r\n        @Override\r\n        public MovieModel[] newArray(int size) {\r\n            return new MovieModel[size];\r\n        }\r\n    };\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public String getPoster_path() {\r\n        return poster_path;\r\n    }\r\n\r\n    public String getRelease_date() {\r\n        return release_date;\r\n    }\r\n\r\n    public int getMovie_id() {\r\n        return movie_id;\r\n    }\r\n\r\n    public float getVote_average() {\r\n        return vote_average;\r\n    }\r\n\r\n    public String getMovie_overview() {\r\n        return movie_overview;\r\n    }\r\n\r\n    @Override\r\n    public int describeContents() {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel parcel, int i) {\r\n        parcel.writeString(title);\r\n        parcel.writeString(poster_path);\r\n        parcel.writeString(release_date);\r\n        parcel.writeInt(movie_id);\r\n        parcel.writeFloat(vote_average);\r\n        parcel.writeString(movie_overview);\r\n    }\r\n}\r\n\r\n```","title":"App crashing when i hit a button that calls a function i made","body":"<p>Ok, so I Am making a movie app and while doing so I came across this problem. I Have this function which when pressed will print out titles of some movies but when I try to run it I get this error message I'm getting the movies using TMDB API.\nIf you know how to fix it please tell me, Thanks!</p>\n<pre><code>java.lang.IllegalStateException: Could not execute method for android:onClick\n        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:414)\n        at android.view.View.performClick(View.java:7448)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n        at android.view.View.performClickInternal(View.java:7425)\n        at android.view.View.access$3600(View.java:810)\n        at android.view.View$PerformClick.run(View.java:28305)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Method.invoke(Native Method)\n        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:409)\n        at android.view.View.performClick(View.java:7448) \n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119) \n        at android.view.View.performClickInternal(View.java:7425) \n        at android.view.View.access$3600(View.java:810) \n        at android.view.View$PerformClick.run(View.java:28305) \n        at android.os.Handler.handleCallback(Handler.java:938) \n        at android.os.Handler.dispatchMessage(Handler.java:99) \n        at android.os.Looper.loop(Looper.java:223) \n        at android.app.ActivityThread.main(ActivityThread.java:7656) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947) \n     Caused by: java.lang.IllegalArgumentException: Missing either @GET URL or @Url parameter.\n        for method MovieApi.searchMovie\n        at retrofit2.Utils.methodError(Utils.java:54)\n        at retrofit2.Utils.methodError(Utils.java:43)\n        at retrofit2.RequestFactory$Builder.build(RequestFactory.java:210)\n        at retrofit2.RequestFactory.parseAnnotations(RequestFactory.java:67)\n        at retrofit2.ServiceMethod.parseAnnotations(ServiceMethod.java:26)\n        at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:202)\n        at retrofit2.Retrofit$1.invoke(Retrofit.java:160)\n        at java.lang.reflect.Proxy.invoke(Proxy.java:1006)\n        at $Proxy1.searchMovie(Unknown Source)\n        at com.example.watchitmovieapp.MainActivity.GetRetrofitResponse(MainActivity.java:44)\n        at com.example.watchitmovieapp.MainActivity.onButtonClicked(MainActivity.java:37)\n</code></pre>\n<p>Here is my code\n<strong>Main Activity</strong></p>\n<pre><code>package com.example.watchitmovieapp;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\n\nimport com.example.watchitmovieapp.models.MovieModel;\nimport com.example.watchitmovieapp.request.Servicey;\nimport com.example.watchitmovieapp.response.MovieSearchResponse;\nimport com.example.watchitmovieapp.utils.Credentials;\nimport com.example.watchitmovieapp.utils.MovieApi;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport retrofit2.Call;\nimport retrofit2.Callback;\nimport retrofit2.Response;\n\npublic class MainActivity extends AppCompatActivity {\n\n    Button btn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        btn = findViewById(R.id.button);\n\n    }\n\n    public void onButtonClicked(View view){\n        GetRetrofitResponse();\n    }\n\n    private void GetRetrofitResponse() {\n        MovieApi movieApi = Servicey.getMovieApi();\n\n        Call&lt;MovieSearchResponse&gt; responseCall = movieApi\n                .searchMovie(\n                        Credentials.API_KEY,\n                        &quot;Jack Reacher&quot;,\n                        &quot;1&quot;);\n        responseCall.enqueue(new Callback&lt;MovieSearchResponse&gt;() {\n            @Override\n            public void onResponse(Call&lt;MovieSearchResponse&gt; call, Response&lt;MovieSearchResponse&gt; response) {\n                if (response.code() == 200){\n                    //Log.v(&quot;Tag&quot;, &quot;The response&quot; + response.body().toString());\n\n                    List&lt;MovieModel&gt; movies = new ArrayList&lt;&gt;(response.body().getMovies());\n\n                    for (MovieModel movie: movies){\n                        Log.v(&quot;Tag&quot;, &quot;Name&quot; + movie.getTitle());\n                    }\n                }else{\n                    try {\n                        Log.v(&quot;Tag&quot;, &quot;Error&quot; + response.errorBody().string());\n                    }catch (IOException e){\n                        e.printStackTrace();\n                    }\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;MovieSearchResponse&gt; call, Throwable t) {\n\n            }\n        });\n    }\n}\n</code></pre>\n<p><strong>Servicey</strong></p>\n<pre><code>package com.example.watchitmovieapp.request;\n\nimport com.example.watchitmovieapp.utils.Credentials;\nimport com.example.watchitmovieapp.utils.MovieApi;\n\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\nimport retrofit2.http.GET;\n\npublic class Servicey {\n    private static Retrofit.Builder retrofitBuilder =\n            new Retrofit.Builder()\n            .baseUrl(Credentials.BASE_URL)\n            .addConverterFactory(GsonConverterFactory.create());\n\n    private static Retrofit retrofit = retrofitBuilder.build();\n\n    private static  MovieApi movieApi = retrofit.create(MovieApi.class);\n\n    public static MovieApi getMovieApi(){\n        return movieApi;\n    }\n\n}\n\n</code></pre>\n<p><strong>MovieSearchResponse</strong></p>\n<pre><code>package com.example.watchitmovieapp.response;\n\nimport com.example.watchitmovieapp.models.MovieModel;\nimport com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\nimport java.util.List;\n\npublic class MovieSearchResponse {\n    @SerializedName(&quot;total_results&quot;)\n    @Expose()\n    private int total_count;\n    @SerializedName(&quot;results&quot;)\n    @Expose()\n    private List&lt;MovieModel&gt; movies;\n    public int getTotal_count(){\n        return total_count;\n    }\n    public List&lt;MovieModel&gt; getMovies(){\n        return movies;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;MovieSearchResponse{&quot; +\n                &quot;total_count=&quot; + total_count +\n                &quot;, movies=&quot; + movies +\n                '}';\n    }\n}\n\n</code></pre>\n<p><strong>MovieApi</strong></p>\n<pre><code>package com.example.watchitmovieapp.utils;\n\nimport android.graphics.Movie;\n\nimport com.example.watchitmovieapp.response.MovieSearchResponse;\n\nimport retrofit2.Call;\nimport retrofit2.http.GET;\nimport retrofit2.http.Query;\n\npublic interface MovieApi {\n\n    // searching\n    @GET\n    Call&lt;MovieSearchResponse&gt; searchMovie(\n            @Query(&quot;key&quot;) String key,\n            @Query(&quot;query&quot;) String query,\n            @Query(&quot;page&quot;) String page\n    );\n}\n\n</code></pre>\n<p><strong>Movie Model</strong></p>\n<pre><code>package com.example.watchitmovieapp.models;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\npublic class MovieModel implements Parcelable  {\n\n    private String title;\n    private String poster_path;\n    private String release_date;\n    private int movie_id;\n    private float vote_average;\n    private String movie_overview;\n\n    //Constructor\n\n\n    public MovieModel(String title, String poster_path, String release_date, int movie_id, float vote_average, String movie_overview) {\n        this.title = title;\n        this.poster_path = poster_path;\n        this.release_date = release_date;\n        this.movie_id = movie_id;\n        this.vote_average = vote_average;\n        this.movie_overview = movie_overview;\n    }\n\n    //Getters\n\n    protected MovieModel(Parcel in) {\n        title = in.readString();\n        poster_path = in.readString();\n        release_date = in.readString();\n        movie_id = in.readInt();\n        vote_average = in.readFloat();\n        movie_overview = in.readString();\n    }\n\n    public static final Creator&lt;MovieModel&gt; CREATOR = new Creator&lt;MovieModel&gt;() {\n        @Override\n        public MovieModel createFromParcel(Parcel in) {\n            return new MovieModel(in);\n        }\n\n        @Override\n        public MovieModel[] newArray(int size) {\n            return new MovieModel[size];\n        }\n    };\n\n    public String getTitle() {\n        return title;\n    }\n\n    public String getPoster_path() {\n        return poster_path;\n    }\n\n    public String getRelease_date() {\n        return release_date;\n    }\n\n    public int getMovie_id() {\n        return movie_id;\n    }\n\n    public float getVote_average() {\n        return vote_average;\n    }\n\n    public String getMovie_overview() {\n        return movie_overview;\n    }\n\n    @Override\n    public int describeContents() {\n        return 0;\n    }\n\n    @Override\n    public void writeToParcel(Parcel parcel, int i) {\n        parcel.writeString(title);\n        parcel.writeString(poster_path);\n        parcel.writeString(release_date);\n        parcel.writeInt(movie_id);\n        parcel.writeFloat(vote_average);\n        parcel.writeString(movie_overview);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","serialization","redis"],"comments":[{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1634193415,"post_id":69565961,"comment_id":122960480,"body_markdown":"I see that `MappingJacksonValue` is non-final. Then, it should be possible to extend the class as a new class which also implements `Serializable`, say `CustomMappingJacksonValue extends MappingJacksonValue implements Serializable`. Did you try it?","body":"I see that <code>MappingJacksonValue</code> is non-final. Then, it should be possible to extend the class as a new class which also implements <code>Serializable</code>, say <code>CustomMappingJacksonValue extends MappingJacksonValue implements Serializable</code>. Did you try it?"},{"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"score":1,"creation_date":1634193893,"post_id":69565961,"comment_id":122960630,"body_markdown":"Probably you are using the default serialization for redis, this require objects to be serializable (and `MappingJacksonValue` is not). You can use https://docs.spring.io/spring-data/redis/docs/current/api/org/springframework/data/redis/serializer/GenericJackson2JsonRedisSerializer.html instead.","body":"Probably you are using the default serialization for redis, this require objects to be serializable (and <code>MappingJacksonValue</code> is not). You can use <a href=\"https://docs.spring.io/spring-data/redis/docs/current/api/org/springframework/data/redis/serializer/GenericJackson2JsonRedisSerializer.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/redis/docs/current/api/org/&hellip;</a> instead."},{"owner":{"account_id":5619902,"reputation":2178,"user_id":4450098,"accept_rate":35,"display_name":"Sagar Nayak"},"score":0,"creation_date":1634212366,"post_id":69565961,"comment_id":122967616,"body_markdown":"@josejuan can you suggest any example code. I am unable to execute it. it saves JSON value to Redis but it has the wrong value saved. and gives error while deserializing.","body":"@josejuan can you suggest any example code. I am unable to execute it. it saves JSON value to Redis but it has the wrong value saved. and gives error while deserializing."},{"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"score":0,"creation_date":1634280106,"post_id":69565961,"comment_id":122986766,"body_markdown":"@SagarNayak post a minimal reproducible example (what you cannot serialize?), that `MappingJacksonValue` is trivial.","body":"@SagarNayak post a minimal reproducible example (what you cannot serialize?), that <code>MappingJacksonValue</code> is trivial."}],"owner":{"account_id":5619902,"reputation":2178,"user_id":4450098,"accept_rate":35,"display_name":"Sagar Nayak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634195677,"creation_date":1634192737,"question_id":69565961,"body_markdown":"**Goal**\r\n\r\nCache MappingJacksonValue while returning from the spring boot controller.\r\n\r\n**Steps to reproduce**\r\n\r\n***Method-***\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    @Cacheable(key = &quot;#id&quot;)\r\n    fun getAccessRoleDetails(\r\n        @PathVariable(&quot;id&quot;)\r\n        @NotBlank(message = &quot;Please provide a access role id&quot;)\r\n        id: UUID\r\n    ): MappingJacksonValue {\r\n        println(\r\n            &quot;&quot;&quot;\r\n            called in port ${serverProperties.port}\r\n        &quot;&quot;&quot;.trimIndent()\r\n        )\r\n        val accessRole = accessRoleRepo.findById(id.toString())\r\n        if (accessRole.isEmpty) {\r\n            throw GenericException(\r\n                errorMessage = &quot;not found&quot;,\r\n                code = HttpStatus.NOT_FOUND.value()\r\n            )\r\n        }\r\n        val mappingJacksonValue = MappingJacksonValue(accessRole)\r\n        mappingJacksonValue.filters = SimpleFilterProvider()\r\n            .addFilter(\r\n                &quot;filterOne&quot;,\r\n                SimpleBeanPropertyFilter.filterOutAllExcept(\r\n                    &quot;id&quot;,\r\n                    &quot;code&quot;,\r\n                    &quot;createdDate&quot;,\r\n                    &quot;description&quot;,\r\n                    &quot;lastUpdated&quot;,\r\n                    &quot;title&quot;,\r\n                    &quot;accessControlPolicies&quot;\r\n                )\r\n            )\r\n            .addFilter(\r\n                &quot;filterTwo&quot;,\r\n                SimpleBeanPropertyFilter.filterOutAllExcept(\r\n                    &quot;id&quot;,\r\n                    &quot;code&quot;,\r\n                    &quot;createdDate&quot;,\r\n                    &quot;description&quot;,\r\n                    &quot;lastUpdated&quot;,\r\n                )\r\n            )\r\n        return mappingJacksonValue\r\n    }\r\n\r\n***Error-***\r\n\r\n\t2021-10-14 11:40:01.525 ERROR 7308 --- [nio-8100-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.converter.json.MappingJacksonValue]] with root cause\r\n\r\n\tjava.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.converter.json.MappingJacksonValue]\r\n\r\n**Is there a way to serialize MappingJacksonValue or do I have to make changes to the return type?**\r\n","title":"Serialize MappingJacksonValue","body":"<p><strong>Goal</strong></p>\n<p>Cache MappingJacksonValue while returning from the spring boot controller.</p>\n<p><strong>Steps to reproduce</strong></p>\n<p><em><strong>Method-</strong></em></p>\n<pre><code>@GetMapping(&quot;/{id}&quot;)\n@Cacheable(key = &quot;#id&quot;)\nfun getAccessRoleDetails(\n    @PathVariable(&quot;id&quot;)\n    @NotBlank(message = &quot;Please provide a access role id&quot;)\n    id: UUID\n): MappingJacksonValue {\n    println(\n        &quot;&quot;&quot;\n        called in port ${serverProperties.port}\n    &quot;&quot;&quot;.trimIndent()\n    )\n    val accessRole = accessRoleRepo.findById(id.toString())\n    if (accessRole.isEmpty) {\n        throw GenericException(\n            errorMessage = &quot;not found&quot;,\n            code = HttpStatus.NOT_FOUND.value()\n        )\n    }\n    val mappingJacksonValue = MappingJacksonValue(accessRole)\n    mappingJacksonValue.filters = SimpleFilterProvider()\n        .addFilter(\n            &quot;filterOne&quot;,\n            SimpleBeanPropertyFilter.filterOutAllExcept(\n                &quot;id&quot;,\n                &quot;code&quot;,\n                &quot;createdDate&quot;,\n                &quot;description&quot;,\n                &quot;lastUpdated&quot;,\n                &quot;title&quot;,\n                &quot;accessControlPolicies&quot;\n            )\n        )\n        .addFilter(\n            &quot;filterTwo&quot;,\n            SimpleBeanPropertyFilter.filterOutAllExcept(\n                &quot;id&quot;,\n                &quot;code&quot;,\n                &quot;createdDate&quot;,\n                &quot;description&quot;,\n                &quot;lastUpdated&quot;,\n            )\n        )\n    return mappingJacksonValue\n}\n</code></pre>\n<p><em><strong>Error-</strong></em></p>\n<pre><code>2021-10-14 11:40:01.525 ERROR 7308 --- [nio-8100-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.converter.json.MappingJacksonValue]] with root cause\n\njava.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.converter.json.MappingJacksonValue]\n</code></pre>\n<p><strong>Is there a way to serialize MappingJacksonValue or do I have to make changes to the return type?</strong></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":21181428,"reputation":177,"user_id":15575750,"display_name":"Ruslan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634195397,"creation_date":1634140239,"answer_id":69558571,"question_id":69558474,"body_markdown":"Try this one\r\n\r\n    public int getSize(){\r\n        IntList copy = this;\r\n        int size = 1;\r\n        while (copy.rest != null){\r\n            size += 1;\r\n            copy = copy.rest;\r\n        }\r\n        return size;\r\n    }\r\n\r\nUPD. A bit of explanation. When you create new pointer to an object, like \r\n\r\n    IntList copy = this;\r\n\r\nIt&#39;s still one object in memory, but 2 different pointers on it. You can do something like \r\n\r\n    copy = null;\r\n\r\nand it will not break **this** pointer, because you changed only pointer, not an object. However, if you change a field in **copy**, it changes field in **this** also. So, if you do like\r\n\r\n    copy.rest = copy.rest.rest;\r\n\r\nthis line changes **this.rest** also, because you changed real in-memory object, not only a pointer.","title":"Implement a method as a pure function to get size of a custom data structure iteratively (no recursion) and with space complexity O(1), so no copying","body":"<p>Try this one</p>\n<pre><code>public int getSize(){\n    IntList copy = this;\n    int size = 1;\n    while (copy.rest != null){\n        size += 1;\n        copy = copy.rest;\n    }\n    return size;\n}\n</code></pre>\n<p>UPD. A bit of explanation. When you create new pointer to an object, like</p>\n<pre><code>IntList copy = this;\n</code></pre>\n<p>It's still one object in memory, but 2 different pointers on it. You can do something like</p>\n<pre><code>copy = null;\n</code></pre>\n<p>and it will not break <strong>this</strong> pointer, because you changed only pointer, not an object. However, if you change a field in <strong>copy</strong>, it changes field in <strong>this</strong> also. So, if you do like</p>\n<pre><code>copy.rest = copy.rest.rest;\n</code></pre>\n<p>this line changes <strong>this.rest</strong> also, because you changed real in-memory object, not only a pointer.</p>\n"}],"owner":{"account_id":7611247,"reputation":174,"user_id":5772008,"display_name":"Kushal Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69558571,"answer_count":1,"score":0,"last_activity_date":1634195397,"creation_date":1634139839,"question_id":69558474,"body_markdown":"in a course I am doing, here is an example of the IntList class. With one recursive method to get the size of the list, getSizeRecursive() and one iterative method getSizeIterative().\r\n\r\n    public class IntList {\r\n        public int first;\r\n        public IntList rest;\r\n    \r\n        public IntList(int first, IntList L){\r\n            this.first = first;\r\n            this.rest = L;\r\n        }\r\n    \r\n        public int getSizeIterative(){\r\n            int size = 1;\r\n            while (this.rest != null){\r\n                size += 1;\r\n                this.rest = this.rest.rest;\r\n            }\r\n            return size;\r\n        }\r\n    \r\n        public int getSizeRecursive(){\r\n            if (this.rest == null)\r\n                return 1;\r\n            else return 1 + rest.getSizeRecur();\r\n        }\r\n    }\r\n\r\nNow the iterative method gives the desired result too, like the recursive method, but only if I run it once, as it&#39;s changing the pointer to **rest** variable when it calls getSizeIterative(). So, I don&#39;t get the same result when I call the method twice. e.g.\r\n\r\n    IntList l = new IntList(10, null);\r\n    l = new IntList(15, l);\r\n    l = new IntList(5, l);\r\n    System.out.println(l.getSize()); // Outputs 3 as expected.\r\n    System.out.println(l.getSize()); // Outputs 1! &lt;-- Wrong.\r\n\r\nNow, I want to implement this method as a pure function, so I create a copy of the list in the getSizeIterative() method, like this:\r\n \r\n\r\n    public int getSizeIterative(){\r\n        IntList copy = new IntList(first, rest); &lt;-- Added this line.\r\n        int size = 1;\r\n        if (copy.rest != null){\r\n            while (copy.rest != null){\r\n                size += 1;\r\n                copy.rest = copy.rest.rest;\r\n            }\r\n        }\r\n        return size;\r\n    }\r\n\r\nBut now it takes up more space. Is there a way to not use extra space? Thanks.","title":"Implement a method as a pure function to get size of a custom data structure iteratively (no recursion) and with space complexity O(1), so no copying","body":"<p>in a course I am doing, here is an example of the IntList class. With one recursive method to get the size of the list, getSizeRecursive() and one iterative method getSizeIterative().</p>\n<pre><code>public class IntList {\n    public int first;\n    public IntList rest;\n\n    public IntList(int first, IntList L){\n        this.first = first;\n        this.rest = L;\n    }\n\n    public int getSizeIterative(){\n        int size = 1;\n        while (this.rest != null){\n            size += 1;\n            this.rest = this.rest.rest;\n        }\n        return size;\n    }\n\n    public int getSizeRecursive(){\n        if (this.rest == null)\n            return 1;\n        else return 1 + rest.getSizeRecur();\n    }\n}\n</code></pre>\n<p>Now the iterative method gives the desired result too, like the recursive method, but only if I run it once, as it's changing the pointer to <strong>rest</strong> variable when it calls getSizeIterative(). So, I don't get the same result when I call the method twice. e.g.</p>\n<pre><code>IntList l = new IntList(10, null);\nl = new IntList(15, l);\nl = new IntList(5, l);\nSystem.out.println(l.getSize()); // Outputs 3 as expected.\nSystem.out.println(l.getSize()); // Outputs 1! &lt;-- Wrong.\n</code></pre>\n<p>Now, I want to implement this method as a pure function, so I create a copy of the list in the getSizeIterative() method, like this:</p>\n<pre><code>public int getSizeIterative(){\n    IntList copy = new IntList(first, rest); &lt;-- Added this line.\n    int size = 1;\n    if (copy.rest != null){\n        while (copy.rest != null){\n            size += 1;\n            copy.rest = copy.rest.rest;\n        }\n    }\n    return size;\n}\n</code></pre>\n<p>But now it takes up more space. Is there a way to not use extra space? Thanks.</p>\n"},{"tags":["java","mongodb","rest"],"comments":[{"owner":{"account_id":433419,"reputation":1293,"user_id":818722,"accept_rate":88,"display_name":"morsor"},"score":0,"creation_date":1634198301,"post_id":69566413,"comment_id":122962196,"body_markdown":"Have you considered some clean-up? Should all user flags be set to false when the application starts?","body":"Have you considered some clean-up? Should all user flags be set to false when the application starts?"},{"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"score":0,"creation_date":1634200579,"post_id":69566413,"comment_id":122963094,"body_markdown":"yes.. that&#39;s taken care..  i am more worried if due to any reason the flag updation fails and user cannot fire the api at all..    Also looking for any better approach ..","body":"yes.. that&#39;s taken care..  i am more worried if due to any reason the flag updation fails and user cannot fire the api at all..    Also looking for any better approach .."}],"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634195301,"creation_date":1634195301,"question_id":69566413,"body_markdown":"I have a javax rest api which generates and downloads a PDF when called. It&#39;s a memory intensive call. I would like to restrict user to call it only once and don&#39;t allow concurrent requests to the API. If there is another request to the api by same user ,  it should not allow if there&#39;s already a request going on..  Though UI will restrict multiple clicks. , at the backend  I have to handle this case.   \r\n\r\n**My current backend solution :** \r\n\r\nWhenever user hits the api , set a flag in mongoDB to `true`.  Once the response is given back (technically just before return statement), set the flag to `false`.  Check flag  before processing every request. \r\n\r\nsomething like \r\n\r\n    if(mongoDB.getCurrentUserFlag()) { //request is on-going. Don&#39;t allow.}\r\n    else\r\n    // go ahead\r\n\r\n\r\nI would like to know if there&#39;s a optimal and better approach. \r\n\r\n","title":"Java Rest api - Restrict concurrent requests of a user","body":"<p>I have a javax rest api which generates and downloads a PDF when called. It's a memory intensive call. I would like to restrict user to call it only once and don't allow concurrent requests to the API. If there is another request to the api by same user ,  it should not allow if there's already a request going on..  Though UI will restrict multiple clicks. , at the backend  I have to handle this case.</p>\n<p><strong>My current backend solution :</strong></p>\n<p>Whenever user hits the api , set a flag in mongoDB to <code>true</code>.  Once the response is given back (technically just before return statement), set the flag to <code>false</code>.  Check flag  before processing every request.</p>\n<p>something like</p>\n<pre><code>if(mongoDB.getCurrentUserFlag()) { //request is on-going. Don't allow.}\nelse\n// go ahead\n</code></pre>\n<p>I would like to know if there's a optimal and better approach.</p>\n"},{"tags":["java","multithreading","executorservice"],"comments":[{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1634194381,"post_id":69565934,"comment_id":122960796,"body_markdown":"I don&#39;t see any problem in the implementation. If you are using `ExecutorCompletionService`, you will have to `take()` the results one-by-one. That is its design. Also, submssion of tasks to it also has to be happen in loop. Only the processing of each submitted will happen in parallel. I think the code is quite OK.","body":"I don&#39;t see any problem in the implementation. If you are using <code>ExecutorCompletionService</code>, you will have to <code>take()</code> the results one-by-one. That is its design. Also, submssion of tasks to it also has to be happen in loop. Only the processing of each submitted will happen in parallel. I think the code is quite OK."},{"owner":{"account_id":12790453,"reputation":219,"user_id":9255138,"display_name":"sudhir"},"score":0,"creation_date":1634194779,"post_id":69565934,"comment_id":122960938,"body_markdown":"Makes sense. Is it possible to make parallel calls, one for each partition using any other Java library without using ExecutorCompletionService.","body":"Makes sense. Is it possible to make parallel calls, one for each partition using any other Java library without using ExecutorCompletionService."},{"owner":{"account_id":12790453,"reputation":219,"user_id":9255138,"display_name":"sudhir"},"score":0,"creation_date":1634195092,"post_id":69565934,"comment_id":122961042,"body_markdown":"My goal is aplit the array in to multiple partitions.\nProcess all partions parallely.","body":"My goal is aplit the array in to multiple partitions. Process all partions parallely."},{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1634195446,"post_id":69565934,"comment_id":122961149,"body_markdown":"There are 4 actions: (a) Splitting, (b) Submission of tasks, (c) Processing of tasks and (d) Reading results. (a) and (b) must happen in sequence since the array that has the initial set of data has to be partitioned in only one thread, to avoid erroneous partitioning. Then, that (c) happens concurrently is the lookout of `ExecutorService`. (d) is where you have choice (if you have hundreds of parallel tasks, then you may think of `take()` in multiple threads). As an aside, submission of tasks is not so costly that we attempt to parallelize it, I think.","body":"There are 4 actions: (a) Splitting, (b) Submission of tasks, (c) Processing of tasks and (d) Reading results. (a) and (b) must happen in sequence since the array that has the initial set of data has to be partitioned in only one thread, to avoid erroneous partitioning. Then, that (c) happens concurrently is the lookout of <code>ExecutorService</code>. (d) is where you have choice (if you have hundreds of parallel tasks, then you may think of <code>take()</code> in multiple threads). As an aside, submission of tasks is not so costly that we attempt to parallelize it, I think."},{"owner":{"account_id":12790453,"reputation":219,"user_id":9255138,"display_name":"sudhir"},"score":0,"creation_date":1634196641,"post_id":69565934,"comment_id":122961572,"body_markdown":"https://stackoverflow.com/questions/18162863/how-to-run-different-methods-parallely\nThis solution might work for me. Will create 4 callable objects 1 for each partition and use executor service to call the task list and aggregate the final result. Do you think this is better solution fo ruse case?","body":"<a href=\"https://stackoverflow.com/questions/18162863/how-to-run-different-methods-parallely\" title=\"how to run different methods parallely\">stackoverflow.com/questions/18162863/&hellip;</a> This solution might work for me. Will create 4 callable objects 1 for each partition and use executor service to call the task list and aggregate the final result. Do you think this is better solution fo ruse case?"}],"owner":{"account_id":12790453,"reputation":219,"user_id":9255138,"display_name":"sudhir"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634195126,"creation_date":1634192592,"question_id":69565934,"body_markdown":"I am working implementing parallel batch processing in Java.\r\nMy idea is let&#39;s say there is array of 12 elements, split the array in to 3 arrays of size 4 and get the sum of all elements of each array and print the result. I tried implementing solution using ExecutorCompletionService. Below is code I have written.\r\n\r\nIssue here is I am still looping for partitions and getting the sum.\r\n\r\nIs there is any way to parallelize the process of getting sum for all partitions(3 arrays)?\r\n\r\nMy intention is to get sum of each partition (array) parallely instead of looping over all partitions one by one.\r\n\r\nMy goal is to split the array in to multiple partitions. Process all partions parallely. \r\n\r\nPlease help.\r\n\r\n```\r\nimport java.util.*;\r\nimport java.util.concurrent.Callable;\r\nimport java.util.concurrent.ExecutorCompletionService;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.Future;\r\n\r\nimport com.google.common.collect.Lists;\r\n\r\npublic class TestMultiThread {\r\n    public static void main(String[] args) throws InterruptedException {\r\n        System.out.println(&quot;Hello test multi threading&quot;);\r\n        List&lt;Integer&gt; values = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12));\r\n        List&lt;List&lt;Integer&gt;&gt; partition = Lists.partition(values, 4);\r\n\r\n        final ExecutorService pool = Executors.newFixedThreadPool(10);\r\n        final ExecutorCompletionService&lt;Integer&gt; completionService = new ExecutorCompletionService&lt;&gt;(pool);\r\n        List&lt;Future&lt;Integer&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n        for (List&lt;Integer&gt; value:partition) {\r\n            futures.add(completionService.submit(getArraySize(value)));\r\n        }\r\n\r\n        for(Future&lt;Integer&gt; future: futures) {\r\n            future = completionService.take();\r\n            try {\r\n                Integer integer = future.get();\r\n                System.out.println(integer);\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Failed&quot;);\r\n            }\r\n        }\r\n\r\n        futures.forEach(future -&gt; future.cancel(true));\r\n    }\r\n\r\n\r\n    private static Callable&lt;Integer&gt; getArraySize(List&lt;Integer&gt; value) {\r\n        Callable&lt;Integer&gt; callable = () -&gt; {\r\n            int sum = 0;\r\n            for (int i : value) sum += i;\r\n            return sum;\r\n        };\r\n        return callable;\r\n    }\r\n}\r\n\r\n```","title":"Java parallelize batch process","body":"<p>I am working implementing parallel batch processing in Java.\nMy idea is let's say there is array of 12 elements, split the array in to 3 arrays of size 4 and get the sum of all elements of each array and print the result. I tried implementing solution using ExecutorCompletionService. Below is code I have written.</p>\n<p>Issue here is I am still looping for partitions and getting the sum.</p>\n<p>Is there is any way to parallelize the process of getting sum for all partitions(3 arrays)?</p>\n<p>My intention is to get sum of each partition (array) parallely instead of looping over all partitions one by one.</p>\n<p>My goal is to split the array in to multiple partitions. Process all partions parallely.</p>\n<p>Please help.</p>\n<pre><code>import java.util.*;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorCompletionService;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\nimport com.google.common.collect.Lists;\n\npublic class TestMultiThread {\n    public static void main(String[] args) throws InterruptedException {\n        System.out.println(&quot;Hello test multi threading&quot;);\n        List&lt;Integer&gt; values = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12));\n        List&lt;List&lt;Integer&gt;&gt; partition = Lists.partition(values, 4);\n\n        final ExecutorService pool = Executors.newFixedThreadPool(10);\n        final ExecutorCompletionService&lt;Integer&gt; completionService = new ExecutorCompletionService&lt;&gt;(pool);\n        List&lt;Future&lt;Integer&gt;&gt; futures = new ArrayList&lt;&gt;();\n        for (List&lt;Integer&gt; value:partition) {\n            futures.add(completionService.submit(getArraySize(value)));\n        }\n\n        for(Future&lt;Integer&gt; future: futures) {\n            future = completionService.take();\n            try {\n                Integer integer = future.get();\n                System.out.println(integer);\n            } catch (Exception e) {\n                System.out.println(&quot;Failed&quot;);\n            }\n        }\n\n        futures.forEach(future -&gt; future.cancel(true));\n    }\n\n\n    private static Callable&lt;Integer&gt; getArraySize(List&lt;Integer&gt; value) {\n        Callable&lt;Integer&gt; callable = () -&gt; {\n            int sum = 0;\n            for (int i : value) sum += i;\n            return sum;\n        };\n        return callable;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":11667426,"reputation":643,"user_id":8543717,"display_name":"Rezaul Islam"},"score":0,"creation_date":1634194087,"post_id":69565738,"comment_id":122960697,"body_markdown":"Can you please share your app Level build.gradle ?","body":"Can you please share your app Level build.gradle ?"},{"owner":{"account_id":11667426,"reputation":643,"user_id":8543717,"display_name":"Rezaul Islam"},"score":0,"creation_date":1634194836,"post_id":69565738,"comment_id":122960953,"body_markdown":"I guess you are missing something in app level build.gradle file.","body":"I guess you are missing something in app level build.gradle file."}],"answers":[{"tags":[],"owner":{"account_id":11667426,"reputation":643,"user_id":8543717,"display_name":"Rezaul Islam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634195108,"creation_date":1634195108,"answer_id":69566382,"question_id":69565738,"body_markdown":"May be you are missing to add dependencies in your app level build.gradle\r\n```\r\nimplementation &#39;android.arch.lifecycle:extensions:2.1.0&#39;\r\nimplementation &#39;android.arch.lifecycle:runtime:2.1.0&#39;\r\n```","title":"Could not find android.arch.lifecycle:extensions:2.1.0. Required by: project :app &gt; com.paypal.checkout:android-sdk:0.1.0","body":"<p>May be you are missing to add dependencies in your app level build.gradle</p>\n<pre><code>implementation 'android.arch.lifecycle:extensions:2.1.0'\nimplementation 'android.arch.lifecycle:runtime:2.1.0'\n</code></pre>\n"}],"owner":{"account_id":8919477,"reputation":740,"user_id":6656661,"accept_rate":100,"display_name":"Dharini"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1634195108,"creation_date":1634191213,"question_id":69565738,"body_markdown":"I&#39;m try to install paypalcheckout sdk in andorid project from below link,\r\n\r\nhttps://developer.paypal.com/docs/business/native-checkout/android/\r\n\r\nI&#39;m also adding this to dependencies in gradle app module file\r\nimplementation &#39;com.paypal.checkout:android-sdk:0.2.0&#39; &amp; rebuild project but it won&#39;t be able to build\r\n\r\nIn project gradle file code \r\n\r\n    allprojects {\r\n    repositories {\r\n        jcenter()\r\n        google()\r\n        mavenCentral()\r\n        maven {\r\n            url &quot;https://maven.google.com&quot;\r\n        }\r\n        maven {\r\n            url  &quot;https://cardinalcommerceprod.jfrog.io/artifactory/android&quot;\r\n            credentials {\r\n                // Be sure to add these non-sensitive credentials in order to retrieve dependencies from\r\n                // the private repository.\r\n                username &#39;paypal_sgerritz&#39;\r\n                password &#39;AKCp8jQ8tAahqpT5JjZ4FRP2mW7GMoFZ674kGqHmupTesKeAY2G8NcmPKLuTxTGkKjDLRzDUQ&#39;\r\n            }\r\n        }\r\n        maven { url &#39;https://maven.fabric.io/public&#39; }\r\n    }\r\n}\r\n\r\nwhen I build android project it says error\r\n\r\n```\r\nExecution failed for task &#39;:app:preDebugBuild&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Could not find android.arch.lifecycle:extensions:2.1.0.\r\n     Required by:\r\n         project :app &gt; com.paypal.checkout:android-sdk:0.1.0\r\n   &gt; Could not find android.arch.lifecycle:runtime:2.1.0.\r\n     Required by:\r\n         project :app &gt; com.paypal.checkout:android-sdk:0.1.0\r\n   &gt; Could not find android.arch.lifecycle:runtime:2.1.0.\r\n     Required by:\r\n         project :app &gt; com.android.support:support-v4:28.0.0 &gt; com.android.support:support-compat:28.0.0\r\n\r\nPossible solution:\r\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\r\n```\r\n\r\nI&#39;m new to android.Suggest me some solution to solve this.","title":"Could not find android.arch.lifecycle:extensions:2.1.0. Required by: project :app &gt; com.paypal.checkout:android-sdk:0.1.0","body":"<p>I'm try to install paypalcheckout sdk in andorid project from below link,</p>\n<p><a href=\"https://developer.paypal.com/docs/business/native-checkout/android/\" rel=\"nofollow noreferrer\">https://developer.paypal.com/docs/business/native-checkout/android/</a></p>\n<p>I'm also adding this to dependencies in gradle app module file\nimplementation 'com.paypal.checkout:android-sdk:0.2.0' &amp; rebuild project but it won't be able to build</p>\n<p>In project gradle file code</p>\n<pre><code>allprojects {\nrepositories {\n    jcenter()\n    google()\n    mavenCentral()\n    maven {\n        url &quot;https://maven.google.com&quot;\n    }\n    maven {\n        url  &quot;https://cardinalcommerceprod.jfrog.io/artifactory/android&quot;\n        credentials {\n            // Be sure to add these non-sensitive credentials in order to retrieve dependencies from\n            // the private repository.\n            username 'paypal_sgerritz'\n            password 'AKCp8jQ8tAahqpT5JjZ4FRP2mW7GMoFZ674kGqHmupTesKeAY2G8NcmPKLuTxTGkKjDLRzDUQ'\n        }\n    }\n    maven { url 'https://maven.fabric.io/public' }\n}\n</code></pre>\n<p>}</p>\n<p>when I build android project it says error</p>\n<pre><code>Execution failed for task ':app:preDebugBuild'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Could not find android.arch.lifecycle:extensions:2.1.0.\n     Required by:\n         project :app &gt; com.paypal.checkout:android-sdk:0.1.0\n   &gt; Could not find android.arch.lifecycle:runtime:2.1.0.\n     Required by:\n         project :app &gt; com.paypal.checkout:android-sdk:0.1.0\n   &gt; Could not find android.arch.lifecycle:runtime:2.1.0.\n     Required by:\n         project :app &gt; com.android.support:support-v4:28.0.0 &gt; com.android.support:support-compat:28.0.0\n\nPossible solution:\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\n</code></pre>\n<p>I'm new to android.Suggest me some solution to solve this.</p>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":3686195,"reputation":2732,"user_id":3069919,"display_name":"The-Big-K"},"score":0,"creation_date":1544917911,"post_id":53789972,"comment_id":94446186,"body_markdown":"Is that also applicable if the yaml files are separated by tla file separator? (---)  For now I ended up opening multiple input streams and merged them with a SequenceInputStream and SnakeYaml 1.23 is giving the right parsed output.","body":"Is that also applicable if the yaml files are separated by tla file separator? (---)  For now I ended up opening multiple input streams and merged them with a SequenceInputStream and SnakeYaml 1.23 is giving the right parsed output."},{"owner":{"account_id":3686195,"reputation":2732,"user_id":3069919,"display_name":"The-Big-K"},"score":0,"creation_date":1544951249,"post_id":53789972,"comment_id":94450360,"body_markdown":"Thanks a lot! I didn&#39;t not include file markers in the example snippet, I think I should have. If I load a single stream of multiple Yaml files, how do I end up with multiple data structures? I&#39;m using a single sequence inputstream as argument to loadAll API, which would return me a single Map of String to Object as response. Atleast that&#39;s what I see on my testing. Perhaps that&#39;s a snake yaml specific thing?","body":"Thanks a lot! I didn&#39;t not include file markers in the example snippet, I think I should have. If I load a single stream of multiple Yaml files, how do I end up with multiple data structures? I&#39;m using a single sequence inputstream as argument to loadAll API, which would return me a single Map of String to Object as response. Atleast that&#39;s what I see on my testing. Perhaps that&#39;s a snake yaml specific thing?"},{"owner":{"account_id":3686195,"reputation":2732,"user_id":3069919,"display_name":"The-Big-K"},"score":1,"creation_date":1544983153,"post_id":53789972,"comment_id":94458335,"body_markdown":"Got it. Thanks Anton! I think if you summarize this discussion as an answer, we can close out this question.","body":"Got it. Thanks Anton! I think if you summarize this discussion as an answer, we can close out this question."}],"answers":[{"tags":[],"owner":{"account_id":1373414,"reputation":71469,"user_id":1307905,"accept_rate":75,"display_name":"Anthon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1544997062,"creation_date":1544997062,"answer_id":53806788,"question_id":53789972,"body_markdown":"I don&#39;t know the details of SnakeYAML, but you cannot just concatenate the two files `a.yaml` and `b.yaml`, even if they both have a mapping at the root level.\r\nDoing so you would get a duplicate key in your mapping and according to the YAML 1.2 (and 1.0) specifications you are not allowed to have duplicate keys, and the 1.1 specification states you should get a warning on a duplicate key, and the first value (you indicate you want to have the second).\r\n\r\nSo you have to resolve this in Java, and you can do so by loading the documents from their respective files and update the data structure loaded from `a.yaml` with the one from `b.yaml`.\r\n\r\nYou can also concatenate the files into a file with multiple documents, but for that the documents would have to be separated by a directives-end-indicator (`---`) or a document-end-indicator (`...`). You normally need to use a special &quot;load-all&quot; function to load such a multi-document file resulting in a list of (or iterator over) data-structures loaded from the mappings, that you then can merge.\r\n\r\nIf you make the multi-document file programmatically, make sure to check that the files end in a newline, otherwise appending `---` and the next file is not going to give the multi-document stream you expect.\r\n\r\n","title":"How do I load multiple yaml files using Snake YAML Java?","body":"<p>I don't know the details of SnakeYAML, but you cannot just concatenate the two files <code>a.yaml</code> and <code>b.yaml</code>, even if they both have a mapping at the root level.\nDoing so you would get a duplicate key in your mapping and according to the YAML 1.2 (and 1.0) specifications you are not allowed to have duplicate keys, and the 1.1 specification states you should get a warning on a duplicate key, and the first value (you indicate you want to have the second).</p>\n\n<p>So you have to resolve this in Java, and you can do so by loading the documents from their respective files and update the data structure loaded from <code>a.yaml</code> with the one from <code>b.yaml</code>.</p>\n\n<p>You can also concatenate the files into a file with multiple documents, but for that the documents would have to be separated by a directives-end-indicator (<code>---</code>) or a document-end-indicator (<code>...</code>). You normally need to use a special \"load-all\" function to load such a multi-document file resulting in a list of (or iterator over) data-structures loaded from the mappings, that you then can merge.</p>\n\n<p>If you make the multi-document file programmatically, make sure to check that the files end in a newline, otherwise appending <code>---</code> and the next file is not going to give the multi-document stream you expect.</p>\n"},{"tags":[],"owner":{"account_id":3686195,"reputation":2732,"user_id":3069919,"display_name":"The-Big-K"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1546029446,"creation_date":1546022159,"answer_id":53962925,"question_id":53789972,"body_markdown":"Refer to Anthon&#39;s answer for the details. As a FYI to folks who want to a working snippet, this is what I did. \r\n\r\n    \r\n\r\n    final Yaml yaml = new Yaml(configConstructor, representer);\r\n\r\n    try (\r\n        final InputStream defaultYamlStream = new FileInputStream(settingsPath + &quot;/cbench-default.yaml&quot;);\r\n        final InputStream customerYamlStream = new FileInputStream(settingsPath + &quot;/&quot; + identifier + &quot;.yaml&quot;);\r\n        final InputStream fullYamlStream = new SequenceInputStream(defaultYamlStream, customerYamlStream);\r\n    ) {\r\n        //try\r\n        parsedConfig = (BenchmarkConfig) yaml.load(fullYamlStream);\r\n\r\n    } catch (IOException ioe) {\r\n        // ERROR\r\n        System.out.println(&quot;Exception parsing the YAML configuration.&quot;);\r\n        throw new RuntimeException(&quot;Exception parsing the YAML configuration.&quot;, ioe);\r\n    }\r\n\r\nI&#39;m creating a stream of concatenated files (sequence stream in my case) and using the load API as recommended by Anthon, and it works fine. Do make a note of the document end markers.\r\n\r\n","title":"How do I load multiple yaml files using Snake YAML Java?","body":"<p>Refer to Anthon's answer for the details. As a FYI to folks who want to a working snippet, this is what I did. </p>\n\n<pre><code>final Yaml yaml = new Yaml(configConstructor, representer);\n\ntry (\n    final InputStream defaultYamlStream = new FileInputStream(settingsPath + \"/cbench-default.yaml\");\n    final InputStream customerYamlStream = new FileInputStream(settingsPath + \"/\" + identifier + \".yaml\");\n    final InputStream fullYamlStream = new SequenceInputStream(defaultYamlStream, customerYamlStream);\n) {\n    //try\n    parsedConfig = (BenchmarkConfig) yaml.load(fullYamlStream);\n\n} catch (IOException ioe) {\n    // ERROR\n    System.out.println(\"Exception parsing the YAML configuration.\");\n    throw new RuntimeException(\"Exception parsing the YAML configuration.\", ioe);\n}\n</code></pre>\n\n<p>I'm creating a stream of concatenated files (sequence stream in my case) and using the load API as recommended by Anthon, and it works fine. Do make a note of the document end markers.</p>\n"},{"tags":[],"owner":{"account_id":293998,"reputation":18107,"user_id":597624,"accept_rate":72,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569538191,"creation_date":1569538191,"answer_id":58125642,"question_id":53789972,"body_markdown":"Here a example how to do it with small recursive function (written in Groovy):\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    @Grapes(\r\n        @Grab(group=&#39;org.yaml&#39;, module=&#39;snakeyaml&#39;, version=&#39;1.25&#39;)\r\n    )\r\n    \r\n    import org.yaml.snakeyaml.Yaml\r\n    \r\n    import static groovy.json.JsonOutput.prettyPrint\r\n    import static groovy.json.JsonOutput.toJson\r\n    \r\n    def extension = new Yaml().load((&quot;extension.yml&quot; as File).text)\r\n    def original = new Yaml().load((&quot;original.yml&quot; as File).text)\r\n    \r\n    println prettyPrint(toJson(original))\r\n    println &quot;#############################&quot;\r\n    \r\n    iterateAndOverrite(extension, original)\r\n    extension = original\r\n    \r\n    println prettyPrint(toJson(original))\r\n    \r\n    private void iterateAndOverrite(extension, original){\r\n        extension.each {\r\n            if(it.value instanceof Map &amp;&amp; original[it.key] != null){\r\n                iterateAndOverrite(extension[it.key], original[it.key])\r\n            } else {\r\n                 original[it.key] = extension[it.key]\r\n            }\r\n        }\r\n    }","title":"How do I load multiple yaml files using Snake YAML Java?","body":"<p>Here a example how to do it with small recursive function (written in Groovy):</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>@Grapes(\n    @Grab(group='org.yaml', module='snakeyaml', version='1.25')\n)\n\nimport org.yaml.snakeyaml.Yaml\n\nimport static groovy.json.JsonOutput.prettyPrint\nimport static groovy.json.JsonOutput.toJson\n\ndef extension = new Yaml().load((\"extension.yml\" as File).text)\ndef original = new Yaml().load((\"original.yml\" as File).text)\n\nprintln prettyPrint(toJson(original))\nprintln \"#############################\"\n\niterateAndOverrite(extension, original)\nextension = original\n\nprintln prettyPrint(toJson(original))\n\nprivate void iterateAndOverrite(extension, original){\n    extension.each {\n        if(it.value instanceof Map &amp;&amp; original[it.key] != null){\n            iterateAndOverrite(extension[it.key], original[it.key])\n        } else {\n             original[it.key] = extension[it.key]\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3591299,"reputation":172,"user_id":2997298,"display_name":"Meghashyam Bhandary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634194810,"creation_date":1634194810,"answer_id":69566332,"question_id":53789972,"body_markdown":"I use this to override and merge two yaml config, might help someone:\r\n\r\n     public static void update(Map&lt;String,Object&gt; existingMap,Map&lt;String,Object&gt; newMap){\r\n        newMap.forEach((key, value) -&gt; {\r\n            if(value instanceof LinkedHashMap){\r\n                LinkedHashMap&lt;String,Object&gt; newMapValue = (LinkedHashMap&lt;String,Object&gt;)value;\r\n                LinkedHashMap&lt;String,Object&gt; existingMapValue = (LinkedHashMap&lt;String,Object&gt;)existingMap.getOrDefault(key,new LinkedHashMap&lt;String,Object&gt;());\r\n                update(existingMapValue,newMapValue);\r\n            }\r\n            else{\r\n                existingMap.put(key,value);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Reads application.yaml file and loads it to config.\r\n     */\r\n    public static void init() throws Exception {\r\n        Yaml yaml = new Yaml();\r\n\r\n        //loading config file 1\r\n        InputStream inputStream = ConnectionUtil.class\r\n                    .getClassLoader()\r\n                    .getResourceAsStream(&quot;application.yaml&quot;);\r\n        config = yaml.load(inputStream);\r\n\r\n        //loading config file 2\r\n        String configFile = System.getProperty(&quot;config&quot;);\r\n        if(configFile!=null){\r\n            File file = new File(configFile);\r\n            if(file.exists()){\r\n                InputStream inputStream2 = new FileInputStream(file);\r\n                Map&lt;String,Object&gt; config2 = yaml.load(inputStream2);\r\n                update(config,config2);\r\n            }\r\n            else\r\n            {\r\n                throw new Exception(&quot;invalid config file path&quot;); \r\n            \r\n            }\r\n        }\r\n\r\n        System.out.println(yaml.dump(config));\r\n\r\n    }","title":"How do I load multiple yaml files using Snake YAML Java?","body":"<p>I use this to override and merge two yaml config, might help someone:</p>\n<pre><code> public static void update(Map&lt;String,Object&gt; existingMap,Map&lt;String,Object&gt; newMap){\n    newMap.forEach((key, value) -&gt; {\n        if(value instanceof LinkedHashMap){\n            LinkedHashMap&lt;String,Object&gt; newMapValue = (LinkedHashMap&lt;String,Object&gt;)value;\n            LinkedHashMap&lt;String,Object&gt; existingMapValue = (LinkedHashMap&lt;String,Object&gt;)existingMap.getOrDefault(key,new LinkedHashMap&lt;String,Object&gt;());\n            update(existingMapValue,newMapValue);\n        }\n        else{\n            existingMap.put(key,value);\n        }\n    });\n}\n\n/**\n * Reads application.yaml file and loads it to config.\n */\npublic static void init() throws Exception {\n    Yaml yaml = new Yaml();\n\n    //loading config file 1\n    InputStream inputStream = ConnectionUtil.class\n                .getClassLoader()\n                .getResourceAsStream(&quot;application.yaml&quot;);\n    config = yaml.load(inputStream);\n\n    //loading config file 2\n    String configFile = System.getProperty(&quot;config&quot;);\n    if(configFile!=null){\n        File file = new File(configFile);\n        if(file.exists()){\n            InputStream inputStream2 = new FileInputStream(file);\n            Map&lt;String,Object&gt; config2 = yaml.load(inputStream2);\n            update(config,config2);\n        }\n        else\n        {\n            throw new Exception(&quot;invalid config file path&quot;); \n        \n        }\n    }\n\n    System.out.println(yaml.dump(config));\n\n}\n</code></pre>\n"}],"owner":{"account_id":3686195,"reputation":2732,"user_id":3069919,"display_name":"The-Big-K"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5873,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":53806788,"answer_count":4,"score":0,"last_activity_date":1634194810,"creation_date":1544853687,"question_id":53789972,"body_markdown":"I have a few yaml files in a directory. How do I load all of them into the same YAML Object (Map)? \r\n\r\n    # a.yaml\r\n    a: ValueA\r\n    c: ValueC\r\n\r\n    # b.yaml\r\n    a: ValueAA\r\n    b: ValueB\r\n\r\nI want to a.yaml, followed by b.yaml. The result would be:\r\n\r\n    { a: ValueAA, b: ValueB, c: ValueC }\r\n\r\nOne way I could do this is to explicitly concatenate the contents of a.yaml and b.yaml into a single String, and then load the merged String. I would like to know if I can avoid that and just load the 2 yaml files sequentially using the load() API. ","title":"How do I load multiple yaml files using Snake YAML Java?","body":"<p>I have a few yaml files in a directory. How do I load all of them into the same YAML Object (Map)? </p>\n\n<pre><code># a.yaml\na: ValueA\nc: ValueC\n\n# b.yaml\na: ValueAA\nb: ValueB\n</code></pre>\n\n<p>I want to a.yaml, followed by b.yaml. The result would be:</p>\n\n<pre><code>{ a: ValueAA, b: ValueB, c: ValueC }\n</code></pre>\n\n<p>One way I could do this is to explicitly concatenate the contents of a.yaml and b.yaml into a single String, and then load the merged String. I would like to know if I can avoid that and just load the 2 yaml files sequentially using the load() API. </p>\n"},{"tags":["java","spring","hibernate","jdbc"],"comments":[{"owner":{"account_id":20525751,"reputation":949,"user_id":15064224,"display_name":"Issa Khodadadi"},"score":0,"creation_date":1633346498,"post_id":69435108,"comment_id":122726764,"body_markdown":"use `@Transactional` annotation, read more here: https://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/transaction.html","body":"use <code>@Transactional</code> annotation, read more here: <a href=\"https://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/transaction.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/4.2.x/&hellip;</a>"},{"owner":{"account_id":19856892,"reputation":29,"user_id":14546117,"display_name":"Lethargicaa"},"score":0,"creation_date":1633354600,"post_id":69435108,"comment_id":122730129,"body_markdown":"@mr1554 some methods already contain this annotation, and some do not, unfortunately this part of the code cannot be edited. I can&#39;t figure out the documentation, please tell me if it is possible to configure some kind of bean so that absolutely all transactions in the application are, for example, &quot;only rollback&quot;","body":"@mr1554 some methods already contain this annotation, and some do not, unfortunately this part of the code cannot be edited. I can&#39;t figure out the documentation, please tell me if it is possible to configure some kind of bean so that absolutely all transactions in the application are, for example, &quot;only rollback&quot;"},{"owner":{"account_id":20525751,"reputation":949,"user_id":15064224,"display_name":"Issa Khodadadi"},"score":0,"creation_date":1633355407,"post_id":69435108,"comment_id":122730518,"body_markdown":"please share the code, it will help to get to the right point much better.","body":"please share the code, it will help to get to the right point much better."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634194758,"creation_date":1634194758,"answer_id":69566323,"question_id":69435108,"body_markdown":"I think the easiest way to do this would be to temporarily revoke the write permissions of the database user you use for accessing the database.","title":"How to cancel all commits on rollback/readonly in properties, regardless of hibernate, or accessing the database without it","body":"<p>I think the easiest way to do this would be to temporarily revoke the write permissions of the database user you use for accessing the database.</p>\n"}],"owner":{"account_id":19856892,"reputation":29,"user_id":14546117,"display_name":"Lethargicaa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69566323,"answer_count":1,"score":0,"last_activity_date":1634194758,"creation_date":1633346336,"question_id":69435108,"body_markdown":"There are many different methods in my application that handle both with and without Hibernate. But for testing the database, I need to &quot;turn off&quot; all commits, so as not to mess up the database. Is there any way to do it, using some kind of bean property? (maybe something like readonly flag or rollback only for any transaction?","title":"How to cancel all commits on rollback/readonly in properties, regardless of hibernate, or accessing the database without it","body":"<p>There are many different methods in my application that handle both with and without Hibernate. But for testing the database, I need to &quot;turn off&quot; all commits, so as not to mess up the database. Is there any way to do it, using some kind of bean property? (maybe something like readonly flag or rollback only for any transaction?</p>\n"},{"tags":["java","servlets"],"answers":[{"tags":[],"owner":{"account_id":22946308,"reputation":69,"user_id":17078245,"display_name":"kody-technolab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634194552,"creation_date":1634194552,"answer_id":69566287,"question_id":69565414,"body_markdown":"There are multiple ways to do that, below are some common ways for the same.\r\n\r\n 1. If your data is file then you need to see File Upload using Servlet API. \r\n 2. You can use JDBC API in your Servlet to write data into relational databases like \r\n    MySQL, PostgreSQL in tabular format and can retrieve later on as well.\r\n\r\nIf you can describe what kind of data you want to store at server side then answer can be given more in detail.","title":"Need to store the data on the server instead on the browser window/tab on client side","body":"<p>There are multiple ways to do that, below are some common ways for the same.</p>\n<ol>\n<li>If your data is file then you need to see File Upload using Servlet API.</li>\n<li>You can use JDBC API in your Servlet to write data into relational databases like\nMySQL, PostgreSQL in tabular format and can retrieve later on as well.</li>\n</ol>\n<p>If you can describe what kind of data you want to store at server side then answer can be given more in detail.</p>\n"}],"owner":{"account_id":15968532,"reputation":21,"user_id":11523355,"display_name":"codingninza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634194552,"creation_date":1634188542,"question_id":69565414,"body_markdown":"We have requirement that we need to store the data on the server using java servlet instead of using the session storage which is used to store the on the browser window/tab on client side. ","title":"Need to store the data on the server instead on the browser window/tab on client side","body":"<p>We have requirement that we need to store the data on the server using java servlet instead of using the session storage which is used to store the on the browser window/tab on client side.</p>\n"},{"tags":["java","spring","spring-boot","application-settings"],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":169,"is_accepted":true,"score":169,"last_activity_date":1484360972,"creation_date":1430363550,"answer_id":29958374,"question_id":29958231,"body_markdown":"I found a simple solution using `@ConditionalOnExpression`:\r\n\r\n    @RestController\r\n    @ConditionalOnExpression(&quot;${my.controller.enabled:false}&quot;)\r\n    @RequestMapping(value = &quot;foo&quot;, produces = &quot;application/json;charset=UTF-8&quot;)\r\n    public class MyController {\r\n        @RequestMapping(value = &quot;bar&quot;)\r\n        public ResponseEntity&lt;String&gt; bar(\r\n            return new ResponseEntity&lt;&gt;(&quot;Hello world&quot;, HttpStatus.OK);\r\n        }\r\n    }\r\n\r\nWith this annotation added, unless I have\r\n\r\n    my.controller.enabled=true\r\n\r\nin my `application.properties` file, the controller won&#39;t start at all.\r\n\r\nYou can also use the more convenient:\r\n\r\n    @ConditionalOnProperty(&quot;my.property&quot;)\r\n\r\nWhich behaves exactly as above; if the property is present and `&quot;true&quot;`, the component starts, otherwise it doesn&#39;t.\r\n","title":"Can a spring boot @RestController be enabled/disabled using properties?","body":"<p>I found a simple solution using <code>@ConditionalOnExpression</code>:</p>\n\n<pre><code>@RestController\n@ConditionalOnExpression(\"${my.controller.enabled:false}\")\n@RequestMapping(value = \"foo\", produces = \"application/json;charset=UTF-8\")\npublic class MyController {\n    @RequestMapping(value = \"bar\")\n    public ResponseEntity&lt;String&gt; bar(\n        return new ResponseEntity&lt;&gt;(\"Hello world\", HttpStatus.OK);\n    }\n}\n</code></pre>\n\n<p>With this annotation added, unless I have</p>\n\n<pre><code>my.controller.enabled=true\n</code></pre>\n\n<p>in my <code>application.properties</code> file, the controller won't start at all.</p>\n\n<p>You can also use the more convenient:</p>\n\n<pre><code>@ConditionalOnProperty(\"my.property\")\n</code></pre>\n\n<p>Which behaves exactly as above; if the property is present and <code>\"true\"</code>, the component starts, otherwise it doesn't.</p>\n"},{"tags":[],"owner":{"account_id":6097727,"reputation":135,"user_id":4758020,"display_name":"David Latief Budiman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545927366,"creation_date":1545927366,"answer_id":53947893,"question_id":29958231,"body_markdown":"Adding to this question and another question [here.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53815728/stop-spring-controller-at-runtime/53818901#53818901\r\n\r\nThis is my answer:\r\n\r\nI would actually used the @RefreshScope Bean and then when you want to stop the Rest Controller at runtime, you only need to change the property of said controller to false.\r\n\r\nSO&#39;s [link](https://stackoverflow.com/questions/43737305/refreshscope-runtime-configuration-without-spring-cloud-config-server) referencing to changing property at runtime. \r\n\r\nHere are my snippets of working code:\r\n\r\n    @RefreshScope\r\n    @RestController\r\n    class MessageRestController(\r\n        @Value(&quot;\\${message.get.enabled}&quot;) val getEnabled: Boolean,\r\n        @Value(&quot;\\${message:Hello default}&quot;) val message: String\r\n    ) {\r\n        @GetMapping(&quot;/message&quot;)\r\n        fun get(): String {\r\n            if (!getEnabled) {\r\n                throw NoHandlerFoundException(&quot;GET&quot;, &quot;/message&quot;, null)\r\n            }\r\n            return message\r\n        }\r\n    }\r\n\r\nAnd there are other alternatives of using Filter:\r\n\r\n    @Component\r\n    class EndpointsAvailabilityFilter @Autowired constructor(\r\n        private val env: Environment\r\n    ): OncePerRequestFilter() {\r\n        override fun doFilterInternal(\r\n            request: HttpServletRequest,\r\n            response: HttpServletResponse,\r\n            filterChain: FilterChain\r\n        ) {\r\n            val requestURI = request.requestURI\r\n            val requestMethod = request.method\r\n            val property = &quot;${requestURI.substring(1).replace(&quot;/&quot;, &quot;.&quot;)}.&quot; +\r\n                    &quot;${requestMethod.toLowerCase()}.enabled&quot;\r\n            val enabled = env.getProperty(property, &quot;true&quot;)\r\n            if (!enabled.toBoolean()) {\r\n                throw NoHandlerFoundException(requestMethod, requestURI, ServletServerHttpRequest(request).headers)\r\n            }\r\n            filterChain.doFilter(request, response)\r\n        }\r\n    }\r\n\r\n[My Github explaining how to disable at runtime](https://github.com/david-blacnet/spring-config-example)","title":"Can a spring boot @RestController be enabled/disabled using properties?","body":"<p>Adding to this question and another question <a href=\"https://stackoverflow.com/questions/53815728/stop-spring-controller-at-runtime/53818901#53818901\">here.</a></p>\n\n<p>This is my answer:</p>\n\n<p>I would actually used the @RefreshScope Bean and then when you want to stop the Rest Controller at runtime, you only need to change the property of said controller to false.</p>\n\n<p>SO's <a href=\"https://stackoverflow.com/questions/43737305/refreshscope-runtime-configuration-without-spring-cloud-config-server\">link</a> referencing to changing property at runtime. </p>\n\n<p>Here are my snippets of working code:</p>\n\n<pre><code>@RefreshScope\n@RestController\nclass MessageRestController(\n    @Value(\"\\${message.get.enabled}\") val getEnabled: Boolean,\n    @Value(\"\\${message:Hello default}\") val message: String\n) {\n    @GetMapping(\"/message\")\n    fun get(): String {\n        if (!getEnabled) {\n            throw NoHandlerFoundException(\"GET\", \"/message\", null)\n        }\n        return message\n    }\n}\n</code></pre>\n\n<p>And there are other alternatives of using Filter:</p>\n\n<pre><code>@Component\nclass EndpointsAvailabilityFilter @Autowired constructor(\n    private val env: Environment\n): OncePerRequestFilter() {\n    override fun doFilterInternal(\n        request: HttpServletRequest,\n        response: HttpServletResponse,\n        filterChain: FilterChain\n    ) {\n        val requestURI = request.requestURI\n        val requestMethod = request.method\n        val property = \"${requestURI.substring(1).replace(\"/\", \".\")}.\" +\n                \"${requestMethod.toLowerCase()}.enabled\"\n        val enabled = env.getProperty(property, \"true\")\n        if (!enabled.toBoolean()) {\n            throw NoHandlerFoundException(requestMethod, requestURI, ServletServerHttpRequest(request).headers)\n        }\n        filterChain.doFilter(request, response)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://github.com/david-blacnet/spring-config-example\" rel=\"nofollow noreferrer\">My Github explaining how to disable at runtime</a></p>\n"},{"tags":[],"owner":{"account_id":2772369,"reputation":2020,"user_id":2386710,"accept_rate":67,"display_name":"Akka Jaworek"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1547715211,"creation_date":1547715211,"answer_id":54232117,"question_id":29958231,"body_markdown":"I assume this question comes from the fact that you are using different application.properties files for your different enviroments. In this case you can use spring profiles and separate configurations into different files with profile name suffix for example:\r\n\r\napplication.properties:\r\n\r\n    spring.profiles.active=@activatedProperties@\r\n\r\napplication-local.properties:\r\n    \r\n     //some config\r\n\r\napplication-prod.properties:\r\n   \r\n    //some config\r\n\r\nthen in your build paramethers you can specify which enviroment are you building by adding option:\r\n\r\n    -Dspring.profiles.active= //&lt;-put here profile local or prod\r\n\r\nthen in your application you can enable/disable any spring bean by adding \r\n\r\n    @Profile(&quot;put here profile name&quot;)\r\n\r\nfor example:\r\n\r\n    @RestController\r\n    @Profile(&quot;local&quot;)\r\n    @RequestMapping(&quot;/testApi&quot;)\r\n    public class RestForTesting{\r\n   \r\n    //do some stuff\r\n\r\n    }\r\nnow my RestForTesting will be created only if im running a build created with \r\n\r\n``-Dspring.profiles.active=local``","title":"Can a spring boot @RestController be enabled/disabled using properties?","body":"<p>I assume this question comes from the fact that you are using different application.properties files for your different enviroments. In this case you can use spring profiles and separate configurations into different files with profile name suffix for example:</p>\n\n<p>application.properties:</p>\n\n<pre><code>spring.profiles.active=@activatedProperties@\n</code></pre>\n\n<p>application-local.properties:</p>\n\n<pre><code> //some config\n</code></pre>\n\n<p>application-prod.properties:</p>\n\n<pre><code>//some config\n</code></pre>\n\n<p>then in your build paramethers you can specify which enviroment are you building by adding option:</p>\n\n<pre><code>-Dspring.profiles.active= //&lt;-put here profile local or prod\n</code></pre>\n\n<p>then in your application you can enable/disable any spring bean by adding </p>\n\n<pre><code>@Profile(\"put here profile name\")\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>@RestController\n@Profile(\"local\")\n@RequestMapping(\"/testApi\")\npublic class RestForTesting{\n\n//do some stuff\n\n}\n</code></pre>\n\n<p>now my RestForTesting will be created only if im running a build created with </p>\n\n<p><code>-Dspring.profiles.active=local</code></p>\n"},{"tags":[],"owner":{"account_id":1018166,"reputation":895,"user_id":1029242,"display_name":"wangf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634194453,"creation_date":1556086318,"answer_id":55823436,"question_id":29958231,"body_markdown":"In some case, the @ConditionalOnXXX cannot work, for example, depends on another bean instance to check condition. (XXXCondition class cannot invoke a bean).\r\n\r\nIn such case, register controller in Java configuration file.\r\n\r\nSee source code(Spring webmvc 5.1.6):\r\n\r\n&lt;!-- begin snippet --&gt;\r\n    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.isHandler(Class&lt;?&gt;)\r\n     \r\n           @Override\r\n           protected boolean isHandler(Class&lt;?&gt; beanType) {\r\n                  return (AnnotatedElementUtils.hasAnnotation(beanType, Controller.class) ||\r\n                               AnnotatedElementUtils.hasAnnotation(beanType, RequestMapping.class));\r\n           }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nShould add @RequestMapping annotation on type level for the controller bean. See:\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    @RequestMapping // Make Spring treat the bean as request handler\r\n    public class MyControllerA implements IMyController {\r\n    \t@RequestMapping(path = { &quot;/path1&quot; })\r\n    \tpublic .. restMethod1(...) {\r\n      ........\r\n    \t}\r\n    }\r\n\r\n    @RequestMapping // Make Spring treat the bean as request handler\r\n    public class MyControllerB implements IMyController {\r\n    \t@RequestMapping(path = { &quot;/path1&quot; })\r\n    \tpublic .. restMethod1(...) {\r\n      ........\r\n    \t}\r\n    }\r\n\r\n    @Configuration\r\n    public class ControllerConfiguration {\r\n\r\n    \t/**\r\n    \t *\r\n    \t * Programmatically register Controller based on certain condition.\r\n    \t *\r\n    \t */\r\n    \t@Bean\r\n    \tpublic IMyController myController() {\r\n    \t\tIMyController controller;\r\n    \t\tif (conditionA) {\r\n    \t\t\tcontroller = new MyControllerA();\r\n    \t\t} else {\r\n    \t\t\tcontroller = new MyControllerB();\r\n    \t\t}\r\n    \t\treturn controller;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Can a spring boot @RestController be enabled/disabled using properties?","body":"<p>In some case, the @ConditionalOnXXX cannot work, for example, depends on another bean instance to check condition. (XXXCondition class cannot invoke a bean).</p>\n<p>In such case, register controller in Java configuration file.</p>\n<p>See source code(Spring webmvc 5.1.6):</p>\n\n<pre><code>org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.isHandler(Class&lt;?&gt;)\n \n       @Override\n       protected boolean isHandler(Class&lt;?&gt; beanType) {\n              return (AnnotatedElementUtils.hasAnnotation(beanType, Controller.class) ||\n                           AnnotatedElementUtils.hasAnnotation(beanType, RequestMapping.class));\n       }\n</code></pre>\n\n<p>Should add @RequestMapping annotation on type level for the controller bean. See:</p>\n\n<pre><code>@RequestMapping // Make Spring treat the bean as request handler\npublic class MyControllerA implements IMyController {\n    @RequestMapping(path = { &quot;/path1&quot; })\n    public .. restMethod1(...) {\n  ........\n    }\n}\n\n@RequestMapping // Make Spring treat the bean as request handler\npublic class MyControllerB implements IMyController {\n    @RequestMapping(path = { &quot;/path1&quot; })\n    public .. restMethod1(...) {\n  ........\n    }\n}\n\n@Configuration\npublic class ControllerConfiguration {\n\n    /**\n     *\n     * Programmatically register Controller based on certain condition.\n     *\n     */\n    @Bean\n    public IMyController myController() {\n        IMyController controller;\n        if (conditionA) {\n            controller = new MyControllerA();\n        } else {\n            controller = new MyControllerB();\n        }\n        return controller;\n    }\n}\n</code></pre>\n\n"}],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85198,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":29958374,"answer_count":4,"score":105,"last_activity_date":1634194453,"creation_date":1430362595,"question_id":29958231,"body_markdown":"Given a &quot;standard&quot; spring boot application with a `@RestController`, eg\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;foo&quot;, produces = &quot;application/json;charset=UTF-8&quot;)\r\n    public class MyController {\r\n        @RequestMapping(value = &quot;bar&quot;)\r\n        public ResponseEntity&lt;String&gt; bar(\r\n            return new ResponseEntity&lt;&gt;(&quot;Hello world&quot;, HttpStatus.OK);\r\n        }\r\n    }\r\n\r\nIs there an annotation or technique that prevents the endpoint from starting *at all* if/unless a certain application property exists/doesn&#39;t exist.\r\n\r\nNote: Testing a property inside the method and exploding is not a solution, because the endpoint will exist.\r\n\r\nI don&#39;t care about the granularity: ie enabling/disabling just a method or the whole class are both fine.\r\n\r\n---\r\n\r\nBecause a profile is not a property, control via profiles does not solve my problem.\r\n","title":"Can a spring boot @RestController be enabled/disabled using properties?","body":"<p>Given a \"standard\" spring boot application with a <code>@RestController</code>, eg</p>\n\n<pre><code>@RestController\n@RequestMapping(value = \"foo\", produces = \"application/json;charset=UTF-8\")\npublic class MyController {\n    @RequestMapping(value = \"bar\")\n    public ResponseEntity&lt;String&gt; bar(\n        return new ResponseEntity&lt;&gt;(\"Hello world\", HttpStatus.OK);\n    }\n}\n</code></pre>\n\n<p>Is there an annotation or technique that prevents the endpoint from starting <em>at all</em> if/unless a certain application property exists/doesn't exist.</p>\n\n<p>Note: Testing a property inside the method and exploding is not a solution, because the endpoint will exist.</p>\n\n<p>I don't care about the granularity: ie enabling/disabling just a method or the whole class are both fine.</p>\n\n<hr>\n\n<p>Because a profile is not a property, control via profiles does not solve my problem.</p>\n"},{"tags":["java","spring-boot","hibernate","lazy-loading"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":1,"creation_date":1633272540,"post_id":69415913,"comment_id":122710219,"body_markdown":"What do you do with `optionalUser` after retrieving it?","body":"What do you do with <code>optionalUser</code> after retrieving it?"},{"owner":{"account_id":3231270,"reputation":526,"user_id":2726467,"accept_rate":60,"display_name":"Shaunyl"},"score":0,"creation_date":1633281137,"post_id":69415913,"comment_id":122712538,"body_markdown":"@Jo&#227;oDias return to the client, but I put a breaking point right after optionalUser and I already saw the data being loaded up in the logs. I know that even if lazy, if you demand it with get (or is demanded i.e. during serialization), it load those data. But I am not doing it actually. Still hibernate loads it. Weird","body":"@Jo&#227;oDias return to the client, but I put a breaking point right after optionalUser and I already saw the data being loaded up in the logs. I know that even if lazy, if you demand it with get (or is demanded i.e. during serialization), it load those data. But I am not doing it actually. Still hibernate loads it. Weird"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1633296939,"post_id":69415913,"comment_id":122716100,"body_markdown":"When you put a breakpoint and navigates through the object it is exactly the same as demanding it with a get. &quot;I already saw the data being loaded up in the logs&quot; --&gt; which logs are you talking about? Hibernate logs or your own logs?","body":"When you put a breakpoint and navigates through the object it is exactly the same as demanding it with a get. &quot;I already saw the data being loaded up in the logs&quot; --&gt; which logs are you talking about? Hibernate logs or your own logs?"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634194397,"creation_date":1634194397,"answer_id":69566257,"question_id":69415913,"body_markdown":"The collection is loaded because some code, probably Jackson during serialization, is accessing the data through e.g. reflection. Try adding `@JsonIgnore` to your `wishes` association to observe that Jackson is the problem here.\r\n\r\nTo solve this properly, you need DTOs that prevent access to information that you don&#39;t want to expose and I think this is a perfect use case for [Blaze-Persistence Entity Views][1].\r\n\r\nI created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.\r\n\r\nA DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:\r\n\r\n    @EntityView(User.class)\r\n    public interface UserDto {\r\n        @IdMapping\r\n        Long getId();\r\n        String getEmail();\r\n        Set&lt;RoleDto&gt; getRoles();\r\n\r\n        @EntityView(Role.class)\r\n        interface RoleDto {\r\n            @IdMapping\r\n            Long getId();\r\n            String getName();\r\n        }\r\n    }\r\n\r\nQuerying is a matter of applying the entity view to a query, the simplest being just a query by id.\r\n\r\n`UserDto a = entityViewManager.find(entityManager, UserDto.class, id);`\r\n\r\nThe Spring Data integration allows you to use it almost like Spring Data Projections: https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\r\n\r\n    Page&lt;UserDto&gt; findAll(Pageable pageable);\r\n\t\r\nThe best part is, it will only fetch the state that is actually necessary!\r\n\r\n  [1]: https://github.com/Blazebit/blaze-persistence#entity-view-usage","title":"Hibernate OneToMany collection is loaded even if lazy","body":"<p>The collection is loaded because some code, probably Jackson during serialization, is accessing the data through e.g. reflection. Try adding <code>@JsonIgnore</code> to your <code>wishes</code> association to observe that Jackson is the problem here.</p>\n<p>To solve this properly, you need DTOs that prevent access to information that you don't want to expose and I think this is a perfect use case for <a href=\"https://github.com/Blazebit/blaze-persistence#entity-view-usage\" rel=\"nofollow noreferrer\">Blaze-Persistence Entity Views</a>.</p>\n<p>I created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.</p>\n<p>A DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:</p>\n<pre><code>@EntityView(User.class)\npublic interface UserDto {\n    @IdMapping\n    Long getId();\n    String getEmail();\n    Set&lt;RoleDto&gt; getRoles();\n\n    @EntityView(Role.class)\n    interface RoleDto {\n        @IdMapping\n        Long getId();\n        String getName();\n    }\n}\n</code></pre>\n<p>Querying is a matter of applying the entity view to a query, the simplest being just a query by id.</p>\n<p><code>UserDto a = entityViewManager.find(entityManager, UserDto.class, id);</code></p>\n<p>The Spring Data integration allows you to use it almost like Spring Data Projections: <a href=\"https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\" rel=\"nofollow noreferrer\">https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features</a></p>\n<pre><code>Page&lt;UserDto&gt; findAll(Pageable pageable);\n</code></pre>\n<p>The best part is, it will only fetch the state that is actually necessary!</p>\n"}],"owner":{"account_id":3231270,"reputation":526,"user_id":2726467,"accept_rate":60,"display_name":"Shaunyl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":634,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634194397,"creation_date":1633169417,"question_id":69415913,"body_markdown":"I have an entity `User`, with a property `wishes` that should be lazy loaded as stated in the FetchType attribute of the @OneToMany annotation:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\r\n@DynamicUpdate\r\npublic class User extends AbstractEntity&lt;Long&gt; {\r\n\r\n    @Column(name = &quot;user_email&quot;, unique = true)\r\n    private String email;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;user&quot;)\r\n    private Set&lt;Wish&gt; wishes = new HashSet&lt;&gt;();\r\n\r\n    public boolean equals(Object other) {\r\n        if (this == other) return true;\r\n        if (!(other instanceof User)) return false;\r\n\r\n        final User user = (User) other;\r\n\r\n        if (!user.getEmail().equals(getEmail())) return false;\r\n\r\n        return true;\r\n    }\r\n\r\n    public int hashCode() {\r\n        int result;\r\n        result = getEmail().hashCode();\r\n        result = 29 * result;\r\n        return result;\r\n    }\r\n```\r\n\r\nThe entity `Wish` follows:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;wish&quot;,\r\n    uniqueConstraints = @UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;product_id&quot;}))\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\r\n@AllArgsConstructor\r\n@Immutable\r\npublic class Wish extends AbstractPersistable&lt;Long&gt; {\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n    private User user;\r\n\r\n    public boolean equals(Object other) {\r\n        if (this == other) return true;\r\n        if (!(other instanceof User)) return false;\r\n\r\n        final Wish wish = (Wish) other;\r\n\r\n        if (!wish.getId().equals(getId())) return false;\r\n\r\n        return true;\r\n    }\r\n\r\n    public int hashCode() {\r\n        int result;\r\n        result = getId().hashCode();\r\n        result = 29 * result;\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nThe problem is that when I run the following code in a service class:\r\n\r\n```\r\n    @Transactional(readOnly = true)\r\n    public User getUserWithRolesOnly(String username) {\r\n        Optional&lt;User&gt; optionalUser = userRepository.findOneWithRoles(username);\r\n        ....\r\n        // HERE, user.wishes is loaded up even if it is LAZY\r\n        ...\r\n        return user;\r\n    }\r\n```\r\n\r\nRepository code:\r\n\r\n```\r\n    @Query(&quot;SELECT u FROM User u &quot; +\r\n        &quot;LEFT JOIN FETCH u.roles &quot; +\r\n        &quot;WHERE u.email = ?1&quot;)\r\n    Optional&lt;User&gt; findOneWithRoles(String email);\r\n```\r\n\r\nThe user object is loaded along with the wishes. How come? I would expect it not to be loaded if not requested (since it&#39;s LAZY fetched).\r\n\r\n\r\nWhy is `wishes` loaded instead?\r\n\r\nI see it being loaded also by debugging the hibernate code. Logs:\r\n```\r\n2021-10-02 12:08:38.501 TRACE 20808 --- [nio-8080-exec-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.test.impl.User.wishes#3]\r\n```\r\n","title":"Hibernate OneToMany collection is loaded even if lazy","body":"<p>I have an entity <code>User</code>, with a property <code>wishes</code> that should be lazy loaded as stated in the FetchType attribute of the @OneToMany annotation:</p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\n@Getter\n@Setter\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@DynamicUpdate\npublic class User extends AbstractEntity&lt;Long&gt; {\n\n    @Column(name = &quot;user_email&quot;, unique = true)\n    private String email;\n\n    @JsonManagedReference\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;user&quot;)\n    private Set&lt;Wish&gt; wishes = new HashSet&lt;&gt;();\n\n    public boolean equals(Object other) {\n        if (this == other) return true;\n        if (!(other instanceof User)) return false;\n\n        final User user = (User) other;\n\n        if (!user.getEmail().equals(getEmail())) return false;\n\n        return true;\n    }\n\n    public int hashCode() {\n        int result;\n        result = getEmail().hashCode();\n        result = 29 * result;\n        return result;\n    }\n</code></pre>\n<p>The entity <code>Wish</code> follows:</p>\n<pre><code>@Entity\n@Table(name = &quot;wish&quot;,\n    uniqueConstraints = @UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;product_id&quot;}))\n@Getter\n@Setter\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@AllArgsConstructor\n@Immutable\npublic class Wish extends AbstractPersistable&lt;Long&gt; {\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    private User user;\n\n    public boolean equals(Object other) {\n        if (this == other) return true;\n        if (!(other instanceof User)) return false;\n\n        final Wish wish = (Wish) other;\n\n        if (!wish.getId().equals(getId())) return false;\n\n        return true;\n    }\n\n    public int hashCode() {\n        int result;\n        result = getId().hashCode();\n        result = 29 * result;\n        return result;\n    }\n}\n</code></pre>\n<p>The problem is that when I run the following code in a service class:</p>\n<pre><code>    @Transactional(readOnly = true)\n    public User getUserWithRolesOnly(String username) {\n        Optional&lt;User&gt; optionalUser = userRepository.findOneWithRoles(username);\n        ....\n        // HERE, user.wishes is loaded up even if it is LAZY\n        ...\n        return user;\n    }\n</code></pre>\n<p>Repository code:</p>\n<pre><code>    @Query(&quot;SELECT u FROM User u &quot; +\n        &quot;LEFT JOIN FETCH u.roles &quot; +\n        &quot;WHERE u.email = ?1&quot;)\n    Optional&lt;User&gt; findOneWithRoles(String email);\n</code></pre>\n<p>The user object is loaded along with the wishes. How come? I would expect it not to be loaded if not requested (since it's LAZY fetched).</p>\n<p>Why is <code>wishes</code> loaded instead?</p>\n<p>I see it being loaded also by debugging the hibernate code. Logs:</p>\n<pre><code>2021-10-02 12:08:38.501 TRACE 20808 --- [nio-8080-exec-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.test.impl.User.wishes#3]\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":20804099,"reputation":147,"user_id":15279383,"display_name":"Sasmita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634192743,"creation_date":1634138122,"answer_id":69558059,"question_id":69503233,"body_markdown":"I found a way. To make the interface between the adapter and the fragment in the navHost a little different\r\n\r\n# The logic I use\r\n\r\n 1. First I create an **InterfaceAdapter** between the **adapter and the\r\n    activity_main.java** used as the navHost controller.\r\n 2. I sending data from **activity_main.java to fragment** using\r\n    **InterfaceActivity**. The data comes from the InterfaceAdapter.\r\n\r\n# InterfaceAdapter\r\n\r\n    public interface AdapterInterface {\r\n        void sendPosition(int position);\r\n    }\r\n\r\n# InterfaceActivity\r\n\r\n    public interface AdapterInterface {\r\n        void sendPosition2(int position);\r\n    }\r\n\r\n# ClassAdapter\r\n\r\n    private ArrayList&lt;CustomList&gt; arrayList = new ArrayList&lt;&gt;();\r\n    private Context context;\r\n    private AdapterInterface adapterInterface;\r\n    \r\n    \r\n    // Edit the contructor\r\n    public ClassAdapter(Context context, ArrayList&lt;CustomList&gt; arrayList, AdapterInterface adapterInterface) {\r\n        this.context = context;\r\n        this.arrayList = arrayList;\r\n        this.adapterInterface = adapterInterface;\r\n    }\r\n\r\n    // example send position when onClick, do this in onBindViewHolder\r\n    holder.itemView.setOnClickListener((view) -&gt; {\r\n        adapterInterface.sendPosition(position);\r\n    });\r\n\r\n# MainActivity\r\n\r\n    public class MainActivity extends AppCompatActivity implements AdapterInterface {\r\n    \r\n        private Bundle bundle;\r\n        private InterfaceActivity interfaceActivity;\r\n    \r\n        // alt+enter and implement method\r\n    \r\n        @Override\r\n        public void sendPosition(int position) {\r\n            interfaceActivity.sendPosition2(position);\r\n        }\r\n    \r\n        public void dataHome(InterfaceActivity interfaceActivity) {\r\n            this.interfaceActivity = interfaceActivity;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n# Fragment in navHost\r\n\r\nDo this in onCreateView\r\n\r\n    arrayList1.addAll(arrayList);\r\n    binding.recyclerview.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n    adapter = new ClassAdapter(getActivity(), arrayList1, (AdapterInterface) getActivity());\r\n    binding.recyclerview.setAdapter(adapter);\r\n\r\n    ((MainActivity)getActivity()).dataHome(new InterfaceActivity() {\r\n        @Override\r\n        public void sendPosition(int position) {\r\n            // do something\r\n        }\r\n    });\r\n\r\nHope this will help someone","title":"Android-studio java : Activity cannot be cast to AdapterInterface in fragment","body":"<p>I found a way. To make the interface between the adapter and the fragment in the navHost a little different</p>\n<h1>The logic I use</h1>\n<ol>\n<li>First I create an <strong>InterfaceAdapter</strong> between the <strong>adapter and the\nactivity_main.java</strong> used as the navHost controller.</li>\n<li>I sending data from <strong>activity_main.java to fragment</strong> using\n<strong>InterfaceActivity</strong>. The data comes from the InterfaceAdapter.</li>\n</ol>\n<h1>InterfaceAdapter</h1>\n<pre><code>public interface AdapterInterface {\n    void sendPosition(int position);\n}\n</code></pre>\n<h1>InterfaceActivity</h1>\n<pre><code>public interface AdapterInterface {\n    void sendPosition2(int position);\n}\n</code></pre>\n<h1>ClassAdapter</h1>\n<pre><code>private ArrayList&lt;CustomList&gt; arrayList = new ArrayList&lt;&gt;();\nprivate Context context;\nprivate AdapterInterface adapterInterface;\n\n\n// Edit the contructor\npublic ClassAdapter(Context context, ArrayList&lt;CustomList&gt; arrayList, AdapterInterface adapterInterface) {\n    this.context = context;\n    this.arrayList = arrayList;\n    this.adapterInterface = adapterInterface;\n}\n\n// example send position when onClick, do this in onBindViewHolder\nholder.itemView.setOnClickListener((view) -&gt; {\n    adapterInterface.sendPosition(position);\n});\n</code></pre>\n<h1>MainActivity</h1>\n<pre><code>public class MainActivity extends AppCompatActivity implements AdapterInterface {\n\n    private Bundle bundle;\n    private InterfaceActivity interfaceActivity;\n\n    // alt+enter and implement method\n\n    @Override\n    public void sendPosition(int position) {\n        interfaceActivity.sendPosition2(position);\n    }\n\n    public void dataHome(InterfaceActivity interfaceActivity) {\n        this.interfaceActivity = interfaceActivity;\n    }\n\n}\n</code></pre>\n<h1>Fragment in navHost</h1>\n<p>Do this in onCreateView</p>\n<pre><code>arrayList1.addAll(arrayList);\nbinding.recyclerview.setLayoutManager(new LinearLayoutManager(getActivity()));\nadapter = new ClassAdapter(getActivity(), arrayList1, (AdapterInterface) getActivity());\nbinding.recyclerview.setAdapter(adapter);\n\n((MainActivity)getActivity()).dataHome(new InterfaceActivity() {\n    @Override\n    public void sendPosition(int position) {\n        // do something\n    }\n});\n</code></pre>\n<p>Hope this will help someone</p>\n"}],"owner":{"account_id":20804099,"reputation":147,"user_id":15279383,"display_name":"Sasmita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1634444528,"accepted_answer_id":69558059,"answer_count":1,"score":2,"last_activity_date":1634194304,"creation_date":1633745578,"question_id":69503233,"body_markdown":"I have an ActivityController that contains a bottom navigation and I want to create interface between RecyclerviewAdapter and Fragment that are inside the bottom navigation to send the adapter position.\r\n\r\n# I get this error\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.my.money, PID: 10644\r\n        java.lang.ClassCastException: com.my.money.Content.ControllerActivity cannot be cast to com.my.money.Content.ui.debt.AdapterInterface\r\n            at com.my.money.Content.ui.debt.DebtFragment.onCreateView(DebtFragment.java:52)\r\n\r\n# DebtFragment :\r\n\r\n    public class DebtFragment extends Fragment implements View.OnClickListener, AdapterInterface {\r\n    \r\n        private FragmentDebtBinding binding;\r\n        private ClassAdapterDebt adapter;\r\n        private ArrayList&lt;CustomListDebt&gt; arrayList = new ArrayList&lt;&gt;();\r\n        private Context context;\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            binding = FragmentDebtBinding.inflate(inflater, container, false);\r\n            View view = binding.getRoot();\r\n  \r\n            binding.recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n            adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) getActivity());\r\n            binding.recyclerView.setAdapter(adapter);\r\n            showAllData();\r\n\r\n            return view;\r\n        }\r\n\r\n        ...\r\n    \r\n        @Override\r\n        public void onClickItem(int position) {\r\n            Toast.makeText(getContext(), String.valueOf(position), Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n# Interface\r\n\r\n    public interface AdapterInterface {\r\n        void onClickItem(int position);\r\n    }\r\n\r\n# Adapter\r\n\r\n    private ArrayList&lt;CustomListDebt&gt; arrayList = new ArrayList&lt;&gt;();\r\n    private Context context;\r\n    private AdapterInterface adapterInterface;\r\n    \r\n    // Constructor\r\n    public ClassAdapterDebt(ArrayList&lt;CustomListDebt&gt; arrayList, Context context, AdapterInterface anInterface) {\r\n        this.arrayList = arrayList;\r\n        this.context = context;\r\n        this.adapterInterface = anInterface;\r\n    }\r\n\r\nThis in onBindViewHolder\r\n\r\n    holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            if (adapterInterface != null) {\r\n                adapterInterface.onClickItem(position);\r\n            } else {\r\n                adapterInterface.onClickItem(0);\r\n            }\r\n        }\r\n    });\r\n\r\n# My try\r\n\r\nI try to change this\r\n\r\n    adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) getActivity());\r\n\r\nTo this :\r\n\r\n    adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) context);\r\n\r\nError cannot cast will disappear and replaced with error :\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.my.money, PID: 22316\r\n        java.lang.NullPointerException: Attempt to invoke interface method &#39;void com.my.money.Content.ui.debt.AdapterInterface.onClickItem(int)&#39; on a null object reference\r\n            at com.my.money.Content.ui.debt.ClassAdapterDebt$1.onClick(ClassAdapterDebt.java:68)\r\n\r\nThere are some notes during the build proccess, does this have any effect?\r\n\r\n    Note: Some input files use or override a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    Note: C:\\Users\\asus\\AndroidStudioProjects\\PencatatKeuangan\\app\\src\\main\\java\\com\\my\\money\\Content\\ui\\Adapter\\RecyclerHomeAdapter.java uses unchecked or unsafe operations.\r\n    Note: Recompile with -Xlint:unchecked for details.\r\n\r\nAny help will be very important","title":"Android-studio java : Activity cannot be cast to AdapterInterface in fragment","body":"<p>I have an ActivityController that contains a bottom navigation and I want to create interface between RecyclerviewAdapter and Fragment that are inside the bottom navigation to send the adapter position.</p>\n<h1>I get this error</h1>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.my.money, PID: 10644\n    java.lang.ClassCastException: com.my.money.Content.ControllerActivity cannot be cast to com.my.money.Content.ui.debt.AdapterInterface\n        at com.my.money.Content.ui.debt.DebtFragment.onCreateView(DebtFragment.java:52)\n</code></pre>\n<h1>DebtFragment :</h1>\n<pre><code>public class DebtFragment extends Fragment implements View.OnClickListener, AdapterInterface {\n\n    private FragmentDebtBinding binding;\n    private ClassAdapterDebt adapter;\n    private ArrayList&lt;CustomListDebt&gt; arrayList = new ArrayList&lt;&gt;();\n    private Context context;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        binding = FragmentDebtBinding.inflate(inflater, container, false);\n        View view = binding.getRoot();\n\n        binding.recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\n        adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) getActivity());\n        binding.recyclerView.setAdapter(adapter);\n        showAllData();\n\n        return view;\n    }\n\n    ...\n\n    @Override\n    public void onClickItem(int position) {\n        Toast.makeText(getContext(), String.valueOf(position), Toast.LENGTH_SHORT).show();\n    }\n</code></pre>\n<h1>Interface</h1>\n<pre><code>public interface AdapterInterface {\n    void onClickItem(int position);\n}\n</code></pre>\n<h1>Adapter</h1>\n<pre><code>private ArrayList&lt;CustomListDebt&gt; arrayList = new ArrayList&lt;&gt;();\nprivate Context context;\nprivate AdapterInterface adapterInterface;\n\n// Constructor\npublic ClassAdapterDebt(ArrayList&lt;CustomListDebt&gt; arrayList, Context context, AdapterInterface anInterface) {\n    this.arrayList = arrayList;\n    this.context = context;\n    this.adapterInterface = anInterface;\n}\n</code></pre>\n<p>This in onBindViewHolder</p>\n<pre><code>holder.itemView.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        if (adapterInterface != null) {\n            adapterInterface.onClickItem(position);\n        } else {\n            adapterInterface.onClickItem(0);\n        }\n    }\n});\n</code></pre>\n<h1>My try</h1>\n<p>I try to change this</p>\n<pre><code>adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) getActivity());\n</code></pre>\n<p>To this :</p>\n<pre><code>adapter = new ClassAdapterDebt(arrayList, getActivity(), (AdapterInterface) context);\n</code></pre>\n<p>Error cannot cast will disappear and replaced with error :</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.my.money, PID: 22316\n    java.lang.NullPointerException: Attempt to invoke interface method 'void com.my.money.Content.ui.debt.AdapterInterface.onClickItem(int)' on a null object reference\n        at com.my.money.Content.ui.debt.ClassAdapterDebt$1.onClick(ClassAdapterDebt.java:68)\n</code></pre>\n<p>There are some notes during the build proccess, does this have any effect?</p>\n<pre><code>Note: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: C:\\Users\\asus\\AndroidStudioProjects\\PencatatKeuangan\\app\\src\\main\\java\\com\\my\\money\\Content\\ui\\Adapter\\RecyclerHomeAdapter.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n</code></pre>\n<p>Any help will be very important</p>\n"},{"tags":["java","jvm","stack","size"],"comments":[{"owner":{"account_id":187390,"reputation":7647,"user_id":425406,"display_name":"Sean"},"score":1,"creation_date":1305565081,"post_id":6020619,"comment_id":6959588,"body_markdown":"Have you read this http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom","body":"Have you read this <a href=\"http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/hotspotfaq-138619.html#threads_o&zwnj;&#8203;om</a>"},{"owner":{"account_id":32670,"reputation":6689,"user_id":90802,"display_name":"charlie arehart"},"score":2,"creation_date":1305649166,"post_id":6020619,"comment_id":6977791,"body_markdown":"Thanks, Sean, but you do realize that applies only to 1.4. Note I had asked for any references for 1.5 or 1.6. Those are proving harder to find. Sorry, I should have indicated that I was aware of that 1.4 technote, just like I referenced the jrockit 1.5 note.","body":"Thanks, Sean, but you do realize that applies only to 1.4. Note I had asked for any references for 1.5 or 1.6. Those are proving harder to find. Sorry, I should have indicated that I was aware of that 1.4 technote, just like I referenced the jrockit 1.5 note."}],"answers":[{"tags":[],"owner":{"account_id":48025,"reputation":1684,"user_id":142458,"display_name":"Greg Bowyer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1383035747,"creation_date":1306351819,"answer_id":6129785,"question_id":6020619,"body_markdown":"For hotspot it depends on your architecture and what not.\r\n\r\nThe default stack size can be found in the source code in the header files that relate to a given platform e.g.\r\n\r\n[google code search](http://www.google.com/codesearch/p?hl=en#aRIt9pqzOVI/src/os_cpu/linux_x86/vm/globals_linux_x86.hpp&amp;q=ThreadStackSize&amp;exact_package=http://hg.openjdk.java.net/jdk7/swing/hotspot&amp;sa=N&amp;cd=9&amp;ct=rc) *(edit: this service has been deactivated since this answer was made, sadly)*\r\nUPDATE: here&#39;s a new link from Nebelmann: [Openjdk source: globals_windows_x86.hpp][1]\r\n\r\nNot sure if this helps but its a start\r\n\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/473cce303f13/src/os_cpu/windows_x86/vm/globals_windows_x86.hpp","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>For hotspot it depends on your architecture and what not.</p>\n\n<p>The default stack size can be found in the source code in the header files that relate to a given platform e.g.</p>\n\n<p><a href=\"http://www.google.com/codesearch/p?hl=en#aRIt9pqzOVI/src/os_cpu/linux_x86/vm/globals_linux_x86.hpp&amp;q=ThreadStackSize&amp;exact_package=http://hg.openjdk.java.net/jdk7/swing/hotspot&amp;sa=N&amp;cd=9&amp;ct=rc\" rel=\"nofollow\">google code search</a> <em>(edit: this service has been deactivated since this answer was made, sadly)</em>\nUPDATE: here's a new link from Nebelmann: <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/473cce303f13/src/os_cpu/windows_x86/vm/globals_windows_x86.hpp\" rel=\"nofollow\">Openjdk source: globals_windows_x86.hpp</a></p>\n\n<p>Not sure if this helps but its a start</p>\n"},{"tags":[],"owner":{"account_id":91741,"reputation":664,"user_id":251745,"accept_rate":61,"display_name":"chepseskaf"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1346249585,"creation_date":1346249235,"answer_id":12179831,"question_id":6020619,"body_markdown":"There are default settings available from IBM Java 6 user guide ([source][1]):\r\n\r\n**Xss &amp;lt;size&amp;gt;** for Java Threads 32 bits:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    AIX&#174;: 256KB\r\n    IBM&#174;I: 256KB\r\n    Linux: 256KB\r\n    Windows: 256KB\r\n    z/OS&#174;: 256KB\r\n\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/topic/com.ibm.java.doc.user.win32.60/diag/appendixes/defaults.html","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>There are default settings available from IBM Java 6 user guide (<a href=\"http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/topic/com.ibm.java.doc.user.win32.60/diag/appendixes/defaults.html\" rel=\"nofollow\">source</a>):</p>\n\n<p><strong>Xss &lt;size&gt;</strong> for Java Threads 32 bits:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AIX®: 256KB\nIBM®I: 256KB\nLinux: 256KB\nWindows: 256KB\nz/OS®: 256KB\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2222156,"reputation":779,"user_id":1961303,"display_name":"keypress"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1371554948,"creation_date":1371554948,"answer_id":17167720,"question_id":6020619,"body_markdown":"You can find it [at Oracle site][1] under &quot;-XX:ThreadStackSize&quot; option which means the same as -Xss.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>You can find it <a href=\"http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html\" rel=\"noreferrer\">at Oracle site</a> under \"-XX:ThreadStackSize\" option which means the same as -Xss.</p>\n"},{"tags":[],"owner":{"account_id":34101,"reputation":1106,"user_id":96030,"accept_rate":100,"display_name":"Ben"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1386754692,"creation_date":1386754692,"answer_id":20515511,"question_id":6020619,"body_markdown":"This information now appears in the Oracle Hotspot FAQ\r\nhttp://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom\r\n\r\n&gt; You may be running into a problem with the default stack size for threads. In Java SE 6, the default on Sparc is 512k in the 32-bit VM, and 1024k in the 64-bit VM. On x86 Solaris/Linux it is 320k in the 32-bit VM and 1024k in the 64-bit VM.\r\n\r\n&gt; On Windows, the default thread stack size is read from the binary (java.exe). As of Java SE 6, this value is 320k in the 32-bit VM and 1024k in the 64-bit VM.\r\n\r\n&gt; You can reduce your stack size by running with the -Xss option. For example:\r\n\r\n&gt; java -server -Xss64k\r\n\r\n\r\n&gt; Note that on some versions of Windows, the OS may round up thread stack sizes using very coarse granularity. If the requested size is less than the default size by 1K or more, the stack size is rounded up to the default; otherwise, the stack size is rounded up to a multiple of 1 MB.\r\n\r\n&gt;64k is the least amount of stack space allowed per thread.\r\n\r\n","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>This information now appears in the Oracle Hotspot FAQ\n<a href=\"http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom\" rel=\"noreferrer\">http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom</a></p>\n\n<blockquote>\n  <p>You may be running into a problem with the default stack size for threads. In Java SE 6, the default on Sparc is 512k in the 32-bit VM, and 1024k in the 64-bit VM. On x86 Solaris/Linux it is 320k in the 32-bit VM and 1024k in the 64-bit VM.</p>\n  \n  <p>On Windows, the default thread stack size is read from the binary (java.exe). As of Java SE 6, this value is 320k in the 32-bit VM and 1024k in the 64-bit VM.</p>\n  \n  <p>You can reduce your stack size by running with the -Xss option. For example:</p>\n  \n  <p>java -server -Xss64k</p>\n  \n  <p>Note that on some versions of Windows, the OS may round up thread stack sizes using very coarse granularity. If the requested size is less than the default size by 1K or more, the stack size is rounded up to the default; otherwise, the stack size is rounded up to a multiple of 1 MB.</p>\n  \n  <p>64k is the least amount of stack space allowed per thread.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1391814,"reputation":4341,"user_id":1322463,"display_name":"plockc"},"down_vote_count":0,"up_vote_count":103,"is_accepted":false,"score":103,"last_activity_date":1417813160,"creation_date":1417813160,"answer_id":27324590,"question_id":6020619,"body_markdown":"try:\r\n\r\n    java -XX:+PrintFlagsFinal -version | grep ThreadStackSize\r\n\r\n","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>try:</p>\n\n<pre><code>java -XX:+PrintFlagsFinal -version | grep ThreadStackSize\n</code></pre>\n"},{"tags":[],"owner":{"account_id":32670,"reputation":6689,"user_id":90802,"display_name":"charlie arehart"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1614970359,"creation_date":1614968184,"answer_id":66497611,"question_id":6020619,"body_markdown":"What a long, strange trip it&#39;s been getting to an answer to this question, first posted in 2011--and getting all kinds of answers in the years since. Some proposed using the `-XX:+PrintFlagsFinal` JVM argument, which may be best for most, but it did not help for Windows (always reports 0). And some folks shared various resources (for various JVMs and versions), some of which did try to help answer this question but often did not, or did not clarify for those who may be running an Oracle JVM on Windows.\r\n\r\nHere&#39;s at least a bit more clarity: with Java 11 being (in 2021) the current latest LTS (long-term support release) version of the Oracle JVM, I&#39;ve found a document for that current version which DOES list the specific defaults for XSS (aka ThreadStackSize), and for different OS&#39;s. It&#39;s at https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE. Here&#39;s what it reports (in case that link breaks in the future):\r\n\r\n&gt; - Linux/x64 (64-bit): 1024 KB\r\n&gt; - macOS (64-bit): 1024 KB\r\n&gt; - Oracle Solaris/x64 (64-bit): 1024 KB\r\n&gt; - Windows: The default value depends on virtual memory\r\n\r\nSadly, Windows folks are still left to wonder: what could that mean, &quot;depends on virtual memory&quot;? I suppose it means the virtual memory of Windows itself of course, but even then how do we translate that into what we should expect the actual stack size for a jvm thread to be?\r\n\r\nAnd back to my original question: I&#39;d wanted to know what the **default** was, because so often someone might suggest the solution to some problem is to change that `-XSS` jvm arg (to some value they would propose). But how can we know if we are making it larger or smaller than the default? Depending on the problem being solved, that can be vital to know!\r\n\r\nAfter 10 years, I guess it&#39;s a mythical quest that may not be concluded. But who knows, maybe someone seeing this now or in the future may ride to the rescue with new info. Or perhaps Java 17 (the expected next LTS version) may change things. (To be clear, there is no version of that page I shared, for Java 13 or above, as I write.)\r\n\r\nIf nothing else, I leave this for posterity, to at least help someone else facing this question to know that they&#39;re not crazy in finding it so hard to get a straight answer (especially about the default XSS value for Windows, and whether changing it would be raising or lowering the size relative to the default).","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>What a long, strange trip it's been getting to an answer to this question, first posted in 2011--and getting all kinds of answers in the years since. Some proposed using the <code>-XX:+PrintFlagsFinal</code> JVM argument, which may be best for most, but it did not help for Windows (always reports 0). And some folks shared various resources (for various JVMs and versions), some of which did try to help answer this question but often did not, or did not clarify for those who may be running an Oracle JVM on Windows.</p>\n<p>Here's at least a bit more clarity: with Java 11 being (in 2021) the current latest LTS (long-term support release) version of the Oracle JVM, I've found a document for that current version which DOES list the specific defaults for XSS (aka ThreadStackSize), and for different OS's. It's at <a href=\"https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE\" rel=\"noreferrer\">https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE</a>. Here's what it reports (in case that link breaks in the future):</p>\n<blockquote>\n<ul>\n<li>Linux/x64 (64-bit): 1024 KB</li>\n<li>macOS (64-bit): 1024 KB</li>\n<li>Oracle Solaris/x64 (64-bit): 1024 KB</li>\n<li>Windows: The default value depends on virtual memory</li>\n</ul>\n</blockquote>\n<p>Sadly, Windows folks are still left to wonder: what could that mean, &quot;depends on virtual memory&quot;? I suppose it means the virtual memory of Windows itself of course, but even then how do we translate that into what we should expect the actual stack size for a jvm thread to be?</p>\n<p>And back to my original question: I'd wanted to know what the <strong>default</strong> was, because so often someone might suggest the solution to some problem is to change that <code>-XSS</code> jvm arg (to some value they would propose). But how can we know if we are making it larger or smaller than the default? Depending on the problem being solved, that can be vital to know!</p>\n<p>After 10 years, I guess it's a mythical quest that may not be concluded. But who knows, maybe someone seeing this now or in the future may ride to the rescue with new info. Or perhaps Java 17 (the expected next LTS version) may change things. (To be clear, there is no version of that page I shared, for Java 13 or above, as I write.)</p>\n<p>If nothing else, I leave this for posterity, to at least help someone else facing this question to know that they're not crazy in finding it so hard to get a straight answer (especially about the default XSS value for Windows, and whether changing it would be raising or lowering the size relative to the default).</p>\n"}],"owner":{"account_id":32670,"reputation":6689,"user_id":90802,"display_name":"charlie arehart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91705,"favorite_count":0,"down_vote_count":0,"up_vote_count":80,"accepted_answer_id":66497611,"answer_count":6,"score":80,"last_activity_date":1634194156,"creation_date":1305564408,"question_id":6020619,"body_markdown":"Has anyone ever found a single JVM document listing default `-Xss` values for various versions of the Oracle JVM, and for different OS&#39;s?\r\n\r\nI&#39;ve been able to find this table in the [jrockit docs][1], but that&#39;s not helpful for those using the &quot;normal&quot; Oracle JVM.\r\n\r\nI do appreciate that the `-Xss` value will vary per OS (and JVM version), so maybe there&#39;s no one document that lists all recent combinations. But if any readers here know of any individual documents that list at least just the default `-Xss` value for *each* JVM version (or at least 1.6 and 1.5), or even if only for *some* OS&#39;s, that would be a great start. I&#39;m especially interested in the default for Windows.\r\n\r\nI&#39;ll add that the reason this is valuable is that often we see people recommend (wrongly, I think) that someone can solve a problem by changing the `-Xss` value. But if you don&#39;t know your default, then there&#39;s no way to know if you&#39;re raising or lowering the value by whatever change someone recommends. They don&#39;t generally indicate the version/OS they&#39;re on, so it&#39;s a crapshoot whether their suggestion will &quot;help&quot; you.\r\n\r\nEven better than some documentation, if anyone knows a way to query the JVM to get the current value, whether from the command line or via an API call, that would be even more valuable. Thanks.\r\n\r\n&gt; **Update: I have added [an answer of my own][2] that summarizes the various suggestions and points to a current resource (in early 2021)\r\n&gt; indicating the answer, including what I learned about the `-Xss` value\r\n&gt; in Windows.**\r\n\r\n[1]: http://download.oracle.com/docs/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html#wp1000929\r\n[2]:\r\nhttps://stackoverflow.com/a/66497611/90802","title":"Where can I find default -Xss (stack size) value for Oracle JVM?","body":"<p>Has anyone ever found a single JVM document listing default <code>-Xss</code> values for various versions of the Oracle JVM, and for different OS's?</p>\n<p>I've been able to find this table in the <a href=\"http://download.oracle.com/docs/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html#wp1000929\" rel=\"noreferrer\">jrockit docs</a>, but that's not helpful for those using the &quot;normal&quot; Oracle JVM.</p>\n<p>I do appreciate that the <code>-Xss</code> value will vary per OS (and JVM version), so maybe there's no one document that lists all recent combinations. But if any readers here know of any individual documents that list at least just the default <code>-Xss</code> value for <em>each</em> JVM version (or at least 1.6 and 1.5), or even if only for <em>some</em> OS's, that would be a great start. I'm especially interested in the default for Windows.</p>\n<p>I'll add that the reason this is valuable is that often we see people recommend (wrongly, I think) that someone can solve a problem by changing the <code>-Xss</code> value. But if you don't know your default, then there's no way to know if you're raising or lowering the value by whatever change someone recommends. They don't generally indicate the version/OS they're on, so it's a crapshoot whether their suggestion will &quot;help&quot; you.</p>\n<p>Even better than some documentation, if anyone knows a way to query the JVM to get the current value, whether from the command line or via an API call, that would be even more valuable. Thanks.</p>\n<blockquote>\n<p><strong>Update: I have added <a href=\"https://stackoverflow.com/a/66497611/90802\">an answer of my own</a> that summarizes the various suggestions and points to a current resource (in early 2021)\nindicating the answer, including what I learned about the <code>-Xss</code> value\nin Windows.</strong></p>\n</blockquote>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1633268091,"post_id":69425072,"comment_id":122709097,"body_markdown":"What about using `@EmbeddedId`?","body":"What about using <code>@EmbeddedId</code>?"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634194068,"creation_date":1634194068,"answer_id":69566202,"question_id":69425072,"body_markdown":"Seems that what you want to use is discriminator based inheritance:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;metrics&quot;)\r\n@DiscriminatorColumn(name = &quot;metric_type&quot;)\r\npublic abstract class Metric {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long metricId;\r\n    private OffsetDateTime time;\r\n    private String workflowId;\r\n    private String jobId;\r\n    private String name;\r\n}\r\n\r\n@Entity\r\n@DiscriminatorValue(&quot;CPU&quot;)\r\npublic class CPU extends Metric {\r\n}\r\n```","title":"JPA use id from nested class","body":"<p>Seems that what you want to use is discriminator based inheritance:</p>\n<pre><code>@Entity\n@Table(name = &quot;metrics&quot;)\n@DiscriminatorColumn(name = &quot;metric_type&quot;)\npublic abstract class Metric {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long metricId;\n    private OffsetDateTime time;\n    private String workflowId;\n    private String jobId;\n    private String name;\n}\n\n@Entity\n@DiscriminatorValue(&quot;CPU&quot;)\npublic class CPU extends Metric {\n}\n</code></pre>\n"}],"owner":{"account_id":10864233,"reputation":47,"user_id":7988178,"display_name":"musztardus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634194068,"creation_date":1633266004,"question_id":69425072,"body_markdown":"I have table in my database\r\n\r\n```sql\r\ncreate table metrics\r\n(\r\n    metric_id   integer,\r\n    time        timestamp,\r\n    workflow_id varchar,\r\n    job_id      varchar,\r\n    name        varchar,\r\n    metric_type   varchar\r\n);\r\n```\r\n\r\nAnd two objects\r\n\r\n```java\r\n@Embeddable\r\npublic class Metric {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long metricId;\r\n    private OffsetDateTime time;\r\n    private String workflowId;\r\n    private String jobId;\r\n    private String name;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;metrics&quot;)\r\npublic class CPU {\r\n    @Enumerated(EnumType.STRING)\r\n    private final MetricType metricType = MetricType.CPU;\r\n    @Embedded\r\n    private Metric metric;\r\n}\r\n```\r\n\r\nIs it possible to use `@Id` defined in `Metric` class as `@Id` used for `CPU` entity? \\\r\nI do not want to create composite key, I just want to use the `@Id` from `Metric` as `@Id` in `CPU` ","title":"JPA use id from nested class","body":"<p>I have table in my database</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table metrics\n(\n    metric_id   integer,\n    time        timestamp,\n    workflow_id varchar,\n    job_id      varchar,\n    name        varchar,\n    metric_type   varchar\n);\n</code></pre>\n<p>And two objects</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Embeddable\npublic class Metric {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long metricId;\n    private OffsetDateTime time;\n    private String workflowId;\n    private String jobId;\n    private String name;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;metrics&quot;)\npublic class CPU {\n    @Enumerated(EnumType.STRING)\n    private final MetricType metricType = MetricType.CPU;\n    @Embedded\n    private Metric metric;\n}\n</code></pre>\n<p>Is it possible to use <code>@Id</code> defined in <code>Metric</code> class as <code>@Id</code> used for <code>CPU</code> entity? <br />\nI do not want to create composite key, I just want to use the <code>@Id</code> from <code>Metric</code> as <code>@Id</code> in <code>CPU</code></p>\n"},{"tags":["java","mysql","spring-boot","hibernate","hikaricp"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634193758,"creation_date":1634193758,"answer_id":69566137,"question_id":69394504,"body_markdown":"Seems like you have some kind of idle connection timeout configured on the server. You should be able to get around that by configuring your connection pool to do connection validation queries every X seconds. Look into the documentation, it looks like `keepaliveTime` is the setting that you should set to e.g. 300000 (5 minutes in ms): https://github.com/brettwooldridge/HikariCP","title":"Connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 marked as broken because of SQLSTATE(08S01), ErrorCode(0)","body":"<p>Seems like you have some kind of idle connection timeout configured on the server. You should be able to get around that by configuring your connection pool to do connection validation queries every X seconds. Look into the documentation, it looks like <code>keepaliveTime</code> is the setting that you should set to e.g. 300000 (5 minutes in ms): <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">https://github.com/brettwooldridge/HikariCP</a></p>\n"}],"owner":{"account_id":11677965,"reputation":95,"user_id":8617930,"display_name":"vipul jadhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634193758,"creation_date":1633013936,"question_id":69394504,"body_markdown":"There are related questions but not totally similar for which I was looking for hence publishing this problem\r\n**Description**: This warning(SQLSTATE(08S01), ErrorCode(0)) comes intermittently and immedietly after this there is exception in springboot java code while fetching(select query) record from the database where it uses springboot jparepository concept.\r\n\r\nBelow is the exception trace of WARN\r\n```\r\ncom.zaxxer.hikari.pool.ProxyConnection:::ProxyConnection.java:::checkException:::182:::HikariPool-1 - Connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 marked as broken because of SQLSTATE(08S01), ErrorCode(0)\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: The last packet successfully received from the server was 949,021 milliseconds ago. The last packet sent successfully to the server was 949,022 milliseconds ago. is longer than the server configured value of &#39;wait_timeout&#39;. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid this problem.\r\nat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\r\nat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\nat com.mysql.cj.jdbc.ConnectionImpl.setReadOnlyInternal(ConnectionImpl.java:2161)\r\nat com.mysql.cj.jdbc.ConnectionImpl.setReadOnly(ConnectionImpl.java:2145)\r\nat com.zaxxer.hikari.pool.ProxyConnection.setReadOnly(ProxyConnection.java:423)\r\nat com.zaxxer.hikari.pool.HikariProxyConnection.setReadOnly(HikariProxyConnection.ja\r\n```\r\nimmedietly after above WARN, service code is failing due to below exception where springboot jparepository is used\r\n\r\n```\r\n:::D3931305D3A84D82AACF29594A0432C8::::::Monitor:::com.zaxxer.hikari.pool.ProxyLeakTask:::ProxyLeakTask.java:::cancel:::91:::Previously reported leaked connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 on thread http-nio-9090-exec-69 was returned to the pool (unleaked)\r\n2021-09-07 **21:39:52,100:::ERROR:::D3931305D3A84D82AACF29594A0432C8:::saveRunConfigurations:::388:::Could not open JPA EntityManager for transaction; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed:\r\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed:**\r\nat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448)\r\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\r\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\r\nat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:572)\r\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:360)\r\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\r\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n.\r\n.\r\n```\r\n\r\nBelow are the HikariCp Configurations and values of timeout of mysql db\r\n```\r\nspring.datasource.hikari.maximumPoolSize=150\r\nspring.datasource.hikari.minimumIdle=20\r\nspring.datasource.hikari.idleTimeout=600000\r\nspring.datasource.hikari.connectionTimeout=900000\r\nspring.datasource.hikari.maxLifetime=1000000\r\nspring.datasource.hikari.validationTimeout=30000\r\nspring.datasource.hikari.connectionTestQuery=SELECT 1\r\nspring.datasource.hikari.leakDetectionThreshold=90000\r\n\r\n---\r\n\r\n MySQL [(none)]&gt; SHOW GLOBAL VARIABLES LIKE &quot;%wait%&quot;;\r\n+---------------------------------------------------+----------+\r\n| Variable_name | Value |\r\n+---------------------------------------------------+----------+\r\n| innodb_fatal_semaphore_wait_threshold | 600 |\r\n| innodb_lock_wait_timeout | 50 |\r\n| innodb_spin_wait_delay | 6 |\r\n| lock_wait_timeout | 31536000 |\r\n| performance_schema_events_waits_history_long_size | 10000 |\r\n| performance_schema_events_waits_history_size | 10 |\r\n| shutdown_wait_connection_timeout | 500 |\r\n| thread_pool_batch_wait_timeout | 10000 |\r\n| wait_timeout | 180 |\r\n\r\n\r\nMySQL [(none)]&gt; SHOW VARIABLES LIKE &quot;%timeout%&quot;;\r\n+----------------------------------+----------+\r\n| Variable_name | Value |\r\n+----------------------------------+----------+\r\n| connect_timeout | 10 |\r\n| delayed_insert_timeout | 300 |\r\n| have_statement_timeout | YES |\r\n| innodb_flush_log_at_timeout | 1 |\r\n| innodb_lock_wait_timeout | 50 |\r\n| innodb_rollback_on_timeout | OFF |\r\n| interactive_timeout | 28800 |\r\n| lock_wait_timeout | 31536000 |\r\n| net_read_timeout | 120 |\r\n| net_write_timeout | 240 |\r\n| rpl_stop_slave_timeout | 31536000 |\r\n| shutdown_wait_connection_timeout | 500 |\r\n| slave_net_timeout | 60 |\r\n| tcp_linger_timeout | 10 |\r\n| thread_pool_batch_wait_timeout | 10000 |\\\r\n| wait_timeout | 28800 | \r\n```\r\nAs the issue was on PROD env so I have to reproduce the issue on Lower env to find the exact RCA\r\nhence \r\n 1. tried with same configurations but still it did not reproduce on Lower env\r\n 2. At firts I thought it is due to lower value of wait_timeout hence tried with increasing wait_timeout to 28800 still did not reproduce\r\n 3. tried with increasing load on Mysql in Lower env \r\n 4. It may be due to firewall restrictions or something but I am not getting it exactly what to check\r\n 5. tried with decreasing the value of spring.datasource.hikari.maxLifetime=100000\r\n \r\nIt would be greate help for suggestions on finding the exact cause of this problem and how to reproduce this issue","title":"Connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 marked as broken because of SQLSTATE(08S01), ErrorCode(0)","body":"<p>There are related questions but not totally similar for which I was looking for hence publishing this problem\n<strong>Description</strong>: This warning(SQLSTATE(08S01), ErrorCode(0)) comes intermittently and immedietly after this there is exception in springboot java code while fetching(select query) record from the database where it uses springboot jparepository concept.</p>\n<p>Below is the exception trace of WARN</p>\n<pre><code>com.zaxxer.hikari.pool.ProxyConnection:::ProxyConnection.java:::checkException:::182:::HikariPool-1 - Connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 marked as broken because of SQLSTATE(08S01), ErrorCode(0)\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: The last packet successfully received from the server was 949,021 milliseconds ago. The last packet sent successfully to the server was 949,022 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.\nat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\nat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\nat com.mysql.cj.jdbc.ConnectionImpl.setReadOnlyInternal(ConnectionImpl.java:2161)\nat com.mysql.cj.jdbc.ConnectionImpl.setReadOnly(ConnectionImpl.java:2145)\nat com.zaxxer.hikari.pool.ProxyConnection.setReadOnly(ProxyConnection.java:423)\nat com.zaxxer.hikari.pool.HikariProxyConnection.setReadOnly(HikariProxyConnection.ja\n</code></pre>\n<p>immedietly after above WARN, service code is failing due to below exception where springboot jparepository is used</p>\n<pre><code>:::D3931305D3A84D82AACF29594A0432C8::::::Monitor:::com.zaxxer.hikari.pool.ProxyLeakTask:::ProxyLeakTask.java:::cancel:::91:::Previously reported leaked connection com.mysql.cj.jdbc.ConnectionImpl@ee48bb3 on thread http-nio-9090-exec-69 was returned to the pool (unleaked)\n2021-09-07 **21:39:52,100:::ERROR:::D3931305D3A84D82AACF29594A0432C8:::saveRunConfigurations:::388:::Could not open JPA EntityManager for transaction; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed:\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed:**\nat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:572)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:360)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n.\n.\n</code></pre>\n<p>Below are the HikariCp Configurations and values of timeout of mysql db</p>\n<pre><code>spring.datasource.hikari.maximumPoolSize=150\nspring.datasource.hikari.minimumIdle=20\nspring.datasource.hikari.idleTimeout=600000\nspring.datasource.hikari.connectionTimeout=900000\nspring.datasource.hikari.maxLifetime=1000000\nspring.datasource.hikari.validationTimeout=30000\nspring.datasource.hikari.connectionTestQuery=SELECT 1\nspring.datasource.hikari.leakDetectionThreshold=90000\n\n---\n\n MySQL [(none)]&gt; SHOW GLOBAL VARIABLES LIKE &quot;%wait%&quot;;\n+---------------------------------------------------+----------+\n| Variable_name | Value |\n+---------------------------------------------------+----------+\n| innodb_fatal_semaphore_wait_threshold | 600 |\n| innodb_lock_wait_timeout | 50 |\n| innodb_spin_wait_delay | 6 |\n| lock_wait_timeout | 31536000 |\n| performance_schema_events_waits_history_long_size | 10000 |\n| performance_schema_events_waits_history_size | 10 |\n| shutdown_wait_connection_timeout | 500 |\n| thread_pool_batch_wait_timeout | 10000 |\n| wait_timeout | 180 |\n\n\nMySQL [(none)]&gt; SHOW VARIABLES LIKE &quot;%timeout%&quot;;\n+----------------------------------+----------+\n| Variable_name | Value |\n+----------------------------------+----------+\n| connect_timeout | 10 |\n| delayed_insert_timeout | 300 |\n| have_statement_timeout | YES |\n| innodb_flush_log_at_timeout | 1 |\n| innodb_lock_wait_timeout | 50 |\n| innodb_rollback_on_timeout | OFF |\n| interactive_timeout | 28800 |\n| lock_wait_timeout | 31536000 |\n| net_read_timeout | 120 |\n| net_write_timeout | 240 |\n| rpl_stop_slave_timeout | 31536000 |\n| shutdown_wait_connection_timeout | 500 |\n| slave_net_timeout | 60 |\n| tcp_linger_timeout | 10 |\n| thread_pool_batch_wait_timeout | 10000 |\\\n| wait_timeout | 28800 | \n</code></pre>\n<p>As the issue was on PROD env so I have to reproduce the issue on Lower env to find the exact RCA\nhence</p>\n<ol>\n<li>tried with same configurations but still it did not reproduce on Lower env</li>\n<li>At firts I thought it is due to lower value of wait_timeout hence tried with increasing wait_timeout to 28800 still did not reproduce</li>\n<li>tried with increasing load on Mysql in Lower env</li>\n<li>It may be due to firewall restrictions or something but I am not getting it exactly what to check</li>\n<li>tried with decreasing the value of spring.datasource.hikari.maxLifetime=100000</li>\n</ol>\n<p>It would be greate help for suggestions on finding the exact cause of this problem and how to reproduce this issue</p>\n"},{"tags":["java","oracle","jdbc"],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634193720,"creation_date":1634193720,"answer_id":69566129,"question_id":69566055,"body_markdown":"The main problem here is that you are binding a Java `String` to your Oracle query, when instead you should be binding a date/time type which the JDBC driver can convert to the proper type in the query.  Consider this version:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static Info readFromDataBase(String createdDate) throws SQLException {\r\n        // ...\r\n\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        LocalDateTime dateTime = LocalDateTime.parse(createdDate, formatter);\r\n        String sql = &quot;SELECT PHONE_NUMBER, TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?&quot;;\r\n        PreparedStatement ps = connect.prepareStatement(sql);\r\n        ps.setObject(1, dateTime);\r\n        ResultSet resultSet = ps.executeQuery();\r\n        if (resultSet.next()) {\r\n            // process result set\r\n        }\r\n\r\n        // ...\r\n    }","title":"How to select by DATE type in jdbc using oracle DB?","body":"<p>The main problem here is that you are binding a Java <code>String</code> to your Oracle query, when instead you should be binding a date/time type which the JDBC driver can convert to the proper type in the query.  Consider this version:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Info readFromDataBase(String createdDate) throws SQLException {\n    // ...\n\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    LocalDateTime dateTime = LocalDateTime.parse(createdDate, formatter);\n    String sql = &quot;SELECT PHONE_NUMBER, TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?&quot;;\n    PreparedStatement ps = connect.prepareStatement(sql);\n    ps.setObject(1, dateTime);\n    ResultSet resultSet = ps.executeQuery();\n    if (resultSet.next()) {\n        // process result set\n    }\n\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69566129,"answer_count":1,"score":0,"last_activity_date":1634193720,"creation_date":1634193243,"question_id":69566055,"body_markdown":"In my Database created_date colum of data type is DATE and I want to select by DATE type in jdbc using ORACLE database, but when I run this method\r\nlike this\r\n\r\n    Info infos = ExcellWriteToDatabase.readFromDataBase(&quot;2021-10-14 09:36:58&quot;);\r\n\r\n, I have getting this error. How to solve this problem? I have tried many things, but coludn&#39;t solved.\r\n\r\n    java.sql.SQLDataException: ORA-01861: literal does not match format string\r\n    \r\n    \tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:509)\r\n    \tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:461)\r\n    \tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1104)\r\n    \tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:550)\r\n    \tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:268)\r\n    \tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:655)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:270)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:91)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:970)\r\n    \tat oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1012)\r\n    \tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3666)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1426)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3713)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1167)\r\n    \tat az.expressbank.insertdatabasetheexcellfile.util.ExcellWriteToDatabase.readFromDataBase(ExcellWriteToDatabase.java:106)\r\n    \tat az.expressbank.insertdatabasetheexcellfile.test.Test.main(Test.java:25)\r\n    Caused by: Error : 1861, Position : 65, Sql = SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = :1 , OriginalSql = SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?, Error Msg = ORA-01861: literal does not match format string\r\n    \r\n    \tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:513)\r\n    \t... 16 more\r\n    null\r\n\r\n\r\n\r\n    public static Info readFromDataBase(String createdDate) throws SQLException {\r\n             try {\r\n                        Properties properties = new Properties();\r\n                        properties.setProperty(&quot;user&quot;, &quot;root&quot;);\r\n                        properties.setProperty(&quot;password&quot;, &quot;password&quot;);\r\n                        properties.setProperty(&quot;useSSL&quot;, &quot;false&quot;);\r\n                        properties.setProperty(&quot;autoReconnect&quot;, &quot;true&quot;);\r\n            \r\n                        Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n                        Connection connect = DriverManager.getConnection(&quot;url&quot;, properties);\r\n                        PreparedStatement prepareStatement = connect.prepareStatement(&quot;SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?&quot;);\r\n                        prepareStatement.setString(1, createdDate);\r\n                        ResultSet resultSet = prepareStatement.executeQuery();\r\n                        if (resultSet.next()) {\r\n                            Info info = new Info();\r\n                            info.setPhoneNumber(resultSet.getString(1));\r\n                            info.setCreatedDate(LocalDateTime.parse(resultSet.getString(2), DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)));\r\n                            return info;\r\n                        }\r\n                        connect.close();\r\n                    } catch (ClassNotFoundException | SQLException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n            \r\n                    return null;\r\n                    }","title":"How to select by DATE type in jdbc using oracle DB?","body":"<p>In my Database created_date colum of data type is DATE and I want to select by DATE type in jdbc using ORACLE database, but when I run this method\nlike this</p>\n<pre><code>Info infos = ExcellWriteToDatabase.readFromDataBase(&quot;2021-10-14 09:36:58&quot;);\n</code></pre>\n<p>, I have getting this error. How to solve this problem? I have tried many things, but coludn't solved.</p>\n<pre><code>java.sql.SQLDataException: ORA-01861: literal does not match format string\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:509)\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:461)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1104)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:550)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:268)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:655)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:270)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:91)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:970)\n    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1012)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3666)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1426)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3713)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1167)\n    at az.expressbank.insertdatabasetheexcellfile.util.ExcellWriteToDatabase.readFromDataBase(ExcellWriteToDatabase.java:106)\n    at az.expressbank.insertdatabasetheexcellfile.test.Test.main(Test.java:25)\nCaused by: Error : 1861, Position : 65, Sql = SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = :1 , OriginalSql = SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?, Error Msg = ORA-01861: literal does not match format string\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:513)\n    ... 16 more\nnull\n\n\n\npublic static Info readFromDataBase(String createdDate) throws SQLException {\n         try {\n                    Properties properties = new Properties();\n                    properties.setProperty(&quot;user&quot;, &quot;root&quot;);\n                    properties.setProperty(&quot;password&quot;, &quot;password&quot;);\n                    properties.setProperty(&quot;useSSL&quot;, &quot;false&quot;);\n                    properties.setProperty(&quot;autoReconnect&quot;, &quot;true&quot;);\n        \n                    Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\n                    Connection connect = DriverManager.getConnection(&quot;url&quot;, properties);\n                    PreparedStatement prepareStatement = connect.prepareStatement(&quot;SELECT PHONE_NUMBER,TEXT_MESSAGE FROM TEST WHERE CREATED_DATE = ?&quot;);\n                    prepareStatement.setString(1, createdDate);\n                    ResultSet resultSet = prepareStatement.executeQuery();\n                    if (resultSet.next()) {\n                        Info info = new Info();\n                        info.setPhoneNumber(resultSet.getString(1));\n                        info.setCreatedDate(LocalDateTime.parse(resultSet.getString(2), DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)));\n                        return info;\n                    }\n                    connect.close();\n                } catch (ClassNotFoundException | SQLException e) {\n                    e.printStackTrace();\n                }\n        \n                return null;\n                }\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","hibernate-native-query"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634193469,"creation_date":1634193469,"answer_id":69566085,"question_id":69396562,"body_markdown":"Use a query like this:\r\n\r\n    select a.Id \r\n    from aaa a \r\n    join a.bbbDetails b on key(b) = BBBType.FIRST\r\n    where a.status = :status and b.flag = false","title":"Query based on map index in spring data jpa native query","body":"<p>Use a query like this:</p>\n<pre><code>select a.Id \nfrom aaa a \njoin a.bbbDetails b on key(b) = BBBType.FIRST\nwhere a.status = :status and b.flag = false\n</code></pre>\n"}],"owner":{"account_id":2432294,"reputation":598,"user_id":2122943,"accept_rate":28,"display_name":"Sel_va"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":633,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634193469,"creation_date":1633023077,"question_id":69396562,"body_markdown":"I have two entities AAA and BBB as follows\r\n\r\n    class AAA{\r\n    \r\n      @Id private String Id;\r\n    \r\n     @OneToMany(mappedBy = &quot;aaa&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n      @MapKey(name = &quot;bbbType&quot;)\r\n      @Setter\r\n      private Map&lt;BBBType, BBB&gt; bbbDetails;\r\n      \r\n      private String status;\r\n    }\r\n\r\nand BBB entity as\r\n\r\n    class BBB {\r\n     @ManyToOne(cascade = CascadeType.ALL)\r\n      @JoinColumn(name = &quot;Id&quot;)\r\n      @Setter\r\n      private AAA aaa;\r\n    \r\n      private BBBType bbbType;  // BBBType is a enum of Strings\r\n\r\n      private boolean flag;\r\n    }\r\n\r\nNow using spring data JPA native query I need to have a query like below(using JPARepository)\r\n\r\n\r\n    @Query(\r\n          &quot;select a.Id from aaa a where \r\n               a.status = :status and a.bbbDetails[&#39;BBBType.FIRST&#39;].flag= false&quot;)\r\n      List&lt;String&gt; findAllIdsByTypeAndStatus(@Param(&quot;status&quot;) String status);\r\n\r\nwhile execution it gives below exception\r\n\r\n&gt; Caused by: org.springframework.beans.BeanInstantiationException:\r\n&gt; Failed to instantiate [java.util.List]: Factory method\r\n&gt; &#39;loadDataForPartitioner&#39; threw exception; nested exception is\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException: could\r\n&gt; not prepare statement; SQL [/* select a.Id from AAA a where a.status =\r\n&gt; :status and a.bbbDetails[&#39;BBBType.FIRST&#39;].flag= false */ select\r\n&gt; aaa0_.id as col_0_0_ from aaa aaa0_ cross join bbb_details bbbde1_\r\n&gt; where aaa0_.id=bbbde1_.id and bbbde1_.null = &#39;BBBType.FIRST&#39; and\r\n&gt; aaa0_.status=? and bbbde1_.flag=false]; nested exception is\r\n&gt; org.hibernate.exception.SQLGrammarException: could not prepare\r\n&gt; statement\r\n&gt; ...\r\n&gt; ... .... ... \r\n&gt; ; nested exception is org.hibernate.exception.SQLGrammarException:\r\n&gt; could not prepare statement\r\n\r\nHere the bbbDetails is a map of key(BBBType) value(child entity) pair. How should I query the mapped child entity based on the BBBType value in the data jpa native query?","title":"Query based on map index in spring data jpa native query","body":"<p>I have two entities AAA and BBB as follows</p>\n<pre><code>class AAA{\n\n  @Id private String Id;\n\n @OneToMany(mappedBy = &quot;aaa&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  @MapKey(name = &quot;bbbType&quot;)\n  @Setter\n  private Map&lt;BBBType, BBB&gt; bbbDetails;\n  \n  private String status;\n}\n</code></pre>\n<p>and BBB entity as</p>\n<pre><code>class BBB {\n @ManyToOne(cascade = CascadeType.ALL)\n  @JoinColumn(name = &quot;Id&quot;)\n  @Setter\n  private AAA aaa;\n\n  private BBBType bbbType;  // BBBType is a enum of Strings\n\n  private boolean flag;\n}\n</code></pre>\n<p>Now using spring data JPA native query I need to have a query like below(using JPARepository)</p>\n<pre><code>@Query(\n      &quot;select a.Id from aaa a where \n           a.status = :status and a.bbbDetails['BBBType.FIRST'].flag= false&quot;)\n  List&lt;String&gt; findAllIdsByTypeAndStatus(@Param(&quot;status&quot;) String status);\n</code></pre>\n<p>while execution it gives below exception</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.BeanInstantiationException:\nFailed to instantiate [java.util.List]: Factory method\n'loadDataForPartitioner' threw exception; nested exception is\norg.springframework.dao.InvalidDataAccessResourceUsageException: could\nnot prepare statement; SQL [/* select a.Id from AAA a where a.status =\n:status and a.bbbDetails['BBBType.FIRST'].flag= false */ select\naaa0_.id as col_0_0_ from aaa aaa0_ cross join bbb_details bbbde1_\nwhere aaa0_.id=bbbde1_.id and bbbde1_.null = 'BBBType.FIRST' and\naaa0_.status=? and bbbde1_.flag=false]; nested exception is\norg.hibernate.exception.SQLGrammarException: could not prepare\nstatement\n...\n... .... ...\n; nested exception is org.hibernate.exception.SQLGrammarException:\ncould not prepare statement</p>\n</blockquote>\n<p>Here the bbbDetails is a map of key(BBBType) value(child entity) pair. How should I query the mapped child entity based on the BBBType value in the data jpa native query?</p>\n"},{"tags":["java","android","asp.net-web-api","android-volley","httpentity"],"comments":[{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":1,"creation_date":1443404954,"post_id":32240177,"comment_id":53465897,"body_markdown":"I have just copied @Kevin comment at the [following question](http://stackoverflow.com/questions/16797468/how-to-send-a-multipart-form-data-post-in-android-with-volley/31718902#31718902): Some servers are VERY picky. If you have issues add a SPACE between &quot;;&quot; and &quot;filename=&quot; when building Content-Disposition and &quot;multipart/form-data; boundary=&quot; + boundary; :)","body":"I have just copied @Kevin comment at the <a href=\"http://stackoverflow.com/questions/16797468/how-to-send-a-multipart-form-data-post-in-android-with-volley/31718902#31718902\">following question</a>: Some servers are VERY picky. If you have issues add a SPACE between &quot;;&quot; and &quot;filename=&quot; when building Content-Disposition and &quot;multipart/form-data; boundary=&quot; + boundary; :)"},{"owner":{"account_id":2015065,"reputation":1850,"user_id":1802587,"accept_rate":43,"display_name":"Maor Hadad"},"score":1,"creation_date":1443407124,"post_id":32240177,"comment_id":53466297,"body_markdown":"if you want to add mimtype:                          dataOutputStream.writeBytes(&quot;Content-Type: image/jpeg&quot; + lineEnd);","body":"if you want to add mimtype:                          dataOutputStream.writeBytes(&quot;Content-Type: image/jpeg&quot; + lineEnd);"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":1,"creation_date":1443407675,"post_id":32240177,"comment_id":53466401,"body_markdown":"@MaorHadad: thanks for your comment :)","body":"@MaorHadad: thanks for your comment :)"},{"owner":{"account_id":2015065,"reputation":1850,"user_id":1802587,"accept_rate":43,"display_name":"Maor Hadad"},"score":1,"creation_date":1443459256,"post_id":32240177,"comment_id":53491813,"body_markdown":"Thank you for this great solution. after updating to appcompat 23 this issue was pain in the a**","body":"Thank you for this great solution. after updating to appcompat 23 this issue was pain in the a**"},{"owner":{"account_id":3969990,"reputation":7267,"user_id":3274830,"accept_rate":58,"display_name":"Mohsen Kamrani"},"score":1,"creation_date":1447247815,"post_id":32240177,"comment_id":55075970,"body_markdown":"Dear BNK does this work for uploading video?","body":"Dear BNK does this work for uploading video?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1447288505,"post_id":32240177,"comment_id":55098397,"body_markdown":"@mok: It may, however, Volley is not recommended for large files/payloads. I think you can try this (increase timeout with setRetryPolicy) and also other solutions such as HttpUrlConnection, OkHttp or Retrofit","body":"@mok: It may, however, Volley is not recommended for large files/payloads. I think you can try this (increase timeout with setRetryPolicy) and also other solutions such as HttpUrlConnection, OkHttp or Retrofit"},{"owner":{"account_id":3969990,"reputation":7267,"user_id":3274830,"accept_rate":58,"display_name":"Mohsen Kamrani"},"score":0,"creation_date":1447309691,"post_id":32240177,"comment_id":55104280,"body_markdown":"aha, thanks. Is the order of the solutions intentional? I mean is on of them superior to others?","body":"aha, thanks. Is the order of the solutions intentional? I mean is on of them superior to others?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1447316068,"post_id":32240177,"comment_id":55106851,"body_markdown":"@mok I don&#39;t mean that order :)","body":"@mok I don&#39;t mean that order :)"},{"owner":{"account_id":1840491,"reputation":16441,"user_id":1669996,"accept_rate":89,"display_name":"casillas"},"score":0,"creation_date":1449158612,"post_id":32240177,"comment_id":55894333,"body_markdown":"@BNK, thanks a lot for providing great solution. I have embedded your solution into my app. I am selecting a photo in my phone library and send it via multipart form data, but it takes a couple of seconds (~10-15) before it sends to the server. Is there a way to reduce this overhead? or any other recommendation?","body":"@BNK, thanks a lot for providing great solution. I have embedded your solution into my app. I am selecting a photo in my phone library and send it via multipart form data, but it takes a couple of seconds (~10-15) before it sends to the server. Is there a way to reduce this overhead? or any other recommendation?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1449188890,"post_id":32240177,"comment_id":55911057,"body_markdown":"@casillas because Volley actually still uses Apache library inside its classes, so if you don&#39;t want to use deprecated lib, IMO, you can try other solutions such as OkHttp, Retrofit. About the overhead, sorry I have no idea and don&#39;t know how to reproduce it to check.","body":"@casillas because Volley actually still uses Apache library inside its classes, so if you don&#39;t want to use deprecated lib, IMO, you can try other solutions such as OkHttp, Retrofit. About the overhead, sorry I have no idea and don&#39;t know how to reproduce it to check."},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":1,"creation_date":1449192684,"post_id":32240177,"comment_id":55912103,"body_markdown":"@casillas: If you like OkHttp, pls refer to my sample project at https://github.com/ngocchung/MultipartOkHttp :)","body":"@casillas: If you like OkHttp, pls refer to my sample project at <a href=\"https://github.com/ngocchung/MultipartOkHttp\" rel=\"nofollow noreferrer\">github.com/ngocchung/MultipartOkHttp</a> :)"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450424873,"post_id":32240177,"comment_id":56443061,"body_markdown":"@BNK can i send zip file along with some text information to server using this code?","body":"@BNK can i send zip file along with some text information to server using this code?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450424986,"post_id":32240177,"comment_id":56443110,"body_markdown":"@MustanserIqbal: I have not tried ZIP file, however, i think if the file is not too large, this code works. You can give it a try","body":"@MustanserIqbal: I have not tried ZIP file, however, i think if the file is not too large, this code works. You can give it a try"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450425282,"post_id":32240177,"comment_id":56443244,"body_markdown":"actually i need to send 9 to 10 images at once? and one more question.I have little confusion.  buildPart(dos, fileData2, &quot;ic_action_book.png&quot;);\n[&quot;ic_action_book.png&quot; =&gt; is this is the key which will be used to  save corresponding image ]","body":"actually i need to send 9 to 10 images at once? and one more question.I have little confusion.  buildPart(dos, fileData2, &quot;ic_action_book.png&quot;); [&quot;ic_action_book.png&quot; =&gt; is this is the key which will be used to  save corresponding image ]"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450425867,"post_id":32240177,"comment_id":56443525,"body_markdown":"No, it&#39;s just filename","body":"No, it&#39;s just filename"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450427406,"post_id":32240177,"comment_id":56444298,"body_markdown":"@BNK then how i will identify the images? while receiving on server?","body":"@BNK then how i will identify the images? while receiving on server?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450428336,"post_id":32240177,"comment_id":56444793,"body_markdown":"@MustanserIqbal IMO, you can read here https://www.asp.net/web-api/overview/advanced/sending-html-form-data-part-2 (server-side), client-side `dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;uploaded_file\\&quot;; filename=\\&quot;&quot;`","body":"@MustanserIqbal IMO, you can read here <a href=\"https://www.asp.net/web-api/overview/advanced/sending-html-form-data-part-2\" rel=\"nofollow noreferrer\">asp.net/web-api/overview/advanced/sending-html-form-data-par&zwnj;&#8203;t-2</a> (server-side), client-side <code>dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;uploaded_file\\&quot;; filename=\\&quot;&quot;</code>"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450432018,"post_id":32240177,"comment_id":56446939,"body_markdown":"@BNK i tried your github code but did not upload anything on server..","body":"@BNK i tried your github code but did not upload anything on server.."},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450439627,"post_id":32240177,"comment_id":56451607,"body_markdown":"@MustanserIqbal any logcat or error message available or not? Have you tried debugging your server-side app? Did it receive any message from android client?","body":"@MustanserIqbal any logcat or error message available or not? Have you tried debugging your server-side app? Did it receive any message from android client?"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450439821,"post_id":32240177,"comment_id":56451724,"body_markdown":"i think the problem is on server side. because for the first time i am writing server side code and there must be something wrong.. all i get on android is upload successfully.","body":"i think the problem is on server side. because for the first time i am writing server side code and there must be something wrong.. all i get on android is upload successfully."},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450441465,"post_id":32240177,"comment_id":56452623,"body_markdown":"@MustanserIqbal I think if you choose Asp.Net Web Api, you can refer samples at www.asp.net/webapi","body":"@MustanserIqbal I think if you choose Asp.Net Web Api, you can refer samples at www.asp.net/webapi"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450682104,"post_id":32240177,"comment_id":56522285,"body_markdown":"can you share your server side code please? because still m not able to upload zip files. Thanks","body":"can you share your server side code please? because still m not able to upload zip files. Thanks"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450682298,"post_id":32240177,"comment_id":56522367,"body_markdown":"@MustanserIqbal: my code is very simple http://pastebin.com/Vzt4wvX2, almost the same as sample code at https://www.asp.net/web-api/overview/advanced/sending-html-form-data-part-2","body":"@MustanserIqbal: my code is very simple <a href=\"http://pastebin.com/Vzt4wvX2\" rel=\"nofollow noreferrer\">pastebin.com/Vzt4wvX2</a>, almost the same as sample code at <a href=\"https://www.asp.net/web-api/overview/advanced/sending-html-form-data-part-2\" rel=\"nofollow noreferrer\">asp.net/web-api/overview/advanced/sending-html-form-data-par&zwnj;&#8203;t-2</a>"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450683020,"post_id":32240177,"comment_id":56522685,"body_markdown":"okay thanks for the reply... let me check this.. actually i need to this in php","body":"okay thanks for the reply... let me check this.. actually i need to this in php"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1450683172,"post_id":32240177,"comment_id":56522754,"body_markdown":"@MustanserIqbal sorry I am not familiar with PHP, you can search more in SO or some link as http://stackoverflow.com/questions/23504191/android-upload-large-files-using-multipartentity and  http://sunil-android.blogspot.com/2013/09/file-upload-on-php-server-in-android.html","body":"@MustanserIqbal sorry I am not familiar with PHP, you can search more in SO or some link as <a href=\"http://stackoverflow.com/questions/23504191/android-upload-large-files-using-multipartentity\" title=\"android upload large files using multipartentity\">stackoverflow.com/questions/23504191/&hellip;</a> and  <a href=\"http://sunil-android.blogspot.com/2013/09/file-upload-on-php-server-in-android.html\" rel=\"nofollow noreferrer\">sunil-android.blogspot.com/2013/09/&hellip;</a>"},{"owner":{"account_id":4409779,"reputation":5017,"user_id":3593066,"accept_rate":53,"display_name":"Mustanser Iqbal"},"score":0,"creation_date":1450693620,"post_id":32240177,"comment_id":56528164,"body_markdown":"@BNK please take a look at my new question here http://stackoverflow.com/q/34393178/3593066 Thanks","body":"@BNK please take a look at my new question here <a href=\"http://stackoverflow.com/q/34393178/3593066\">stackoverflow.com/q/34393178/3593066</a> Thanks"},{"owner":{"account_id":2565781,"reputation":131,"user_id":2225901,"accept_rate":75,"display_name":"H4F"},"score":1,"creation_date":1451090302,"post_id":32240177,"comment_id":56677196,"body_markdown":"Awesome Thanks for sharing man, im kind of noop here so whats confius me is: in get request i know the parameter i should use from browser rrequest, but now with post how to tell what parameters does api need, spicaly the parameter for image upload","body":"Awesome Thanks for sharing man, im kind of noop here so whats confius me is: in get request i know the parameter i should use from browser rrequest, but now with post how to tell what parameters does api need, spicaly the parameter for image upload"},{"owner":{"account_id":7405451,"reputation":1007,"user_id":5634508,"accept_rate":19,"display_name":"andro"},"score":0,"creation_date":1455267991,"post_id":32240177,"comment_id":58423184,"body_markdown":"in this how i can add other text parrams with image","body":"in this how i can add other text parrams with image"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1455272016,"post_id":32240177,"comment_id":58425833,"body_markdown":"@andro as I mentioned at the end, you can refer RacZo&#39;s answer below for text parts","body":"@andro as I mentioned at the end, you can refer RacZo&#39;s answer below for text parts"},{"owner":{"account_id":7405451,"reputation":1007,"user_id":5634508,"accept_rate":19,"display_name":"andro"},"score":0,"creation_date":1455272066,"post_id":32240177,"comment_id":58425865,"body_markdown":"is this send image as a file ? coz server need file with mutipart","body":"is this send image as a file ? coz server need file with mutipart"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1455274310,"post_id":32240177,"comment_id":58427346,"body_markdown":"@andro of course my solution will send image as a file","body":"@andro of course my solution will send image as a file"},{"owner":{"account_id":7405451,"reputation":1007,"user_id":5634508,"accept_rate":19,"display_name":"andro"},"score":0,"creation_date":1455274856,"post_id":32240177,"comment_id":58427693,"body_markdown":"what are the key for file ? name=\\&quot;uploaded_file\\&quot; is key value?","body":"what are the key for file ? name=\\&quot;uploaded_file\\&quot; is key value?"},{"owner":{"account_id":5834020,"reputation":3006,"user_id":4597666,"accept_rate":65,"display_name":"Mike Walker"},"score":0,"creation_date":1473799827,"post_id":32240177,"comment_id":66276720,"body_markdown":"Thank you very much for the code. I tried adding the `getParams()` method in the code, but it&#39;s not getting called. Is there a way we can also pass parameters?","body":"Thank you very much for the code. I tried adding the <code>getParams()</code> method in the code, but it&#39;s not getting called. Is there a way we can also pass parameters?"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1473811891,"post_id":32240177,"comment_id":66280416,"body_markdown":"@MikeWalker IMO, you can try the answers below","body":"@MikeWalker IMO, you can try the answers below"},{"owner":{"account_id":3804353,"reputation":6039,"user_id":3283568,"accept_rate":51,"display_name":"Akshay"},"score":0,"creation_date":1475587003,"post_id":32240177,"comment_id":66994504,"body_markdown":"Image uploaded but not opening in windows explorer!!","body":"Image uploaded but not opening in windows explorer!!"},{"owner":{"account_id":3804353,"reputation":6039,"user_id":3283568,"accept_rate":51,"display_name":"Akshay"},"score":1,"creation_date":1475587110,"post_id":32240177,"comment_id":66994586,"body_markdown":"@BNK used your whole code plus added MIME type as suggested by Maor Hadad","body":"@BNK used your whole code plus added MIME type as suggested by Maor Hadad"},{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":1,"creation_date":1477504783,"post_id":32240177,"comment_id":67798311,"body_markdown":"Thank @BNK for the great solution i will defenitely add your name in the class file&#39;s author top.\nCan you please tell how can be get response back from server as it only returns network response unlike String/json response","body":"Thank @BNK for the great solution i will defenitely add your name in the class file&#39;s author top. Can you please tell how can be get response back from server as it only returns network response unlike String/json response"},{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":1,"creation_date":1477505419,"post_id":32240177,"comment_id":67798648,"body_markdown":"sorry my bad i am getting the response in bytes[]  String resultResponse = new String(response.data);","body":"sorry my bad i am getting the response in bytes[]  String resultResponse = new String(response.data);"},{"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"score":0,"creation_date":1477560191,"post_id":32240177,"comment_id":67820220,"body_markdown":"@Shubham so do you mean your issue has been solved?","body":"@Shubham so do you mean your issue has been solved?"},{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":1,"creation_date":1477561535,"post_id":32240177,"comment_id":67821073,"body_markdown":"yes when i return the response from the server i get the response in the NerworkResponse object. I thought NetworkReponse will return the status code etc not the string response","body":"yes when i return the response from the server i get the response in the NerworkResponse object. I thought NetworkReponse will return the status code etc not the string response"}],"answers":[{"tags":[],"owner":{"account_id":359832,"reputation":10305,"user_id":701472,"accept_rate":75,"display_name":"Oscar Salguero"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1536265903,"creation_date":1442869750,"answer_id":32704606,"question_id":32240177,"body_markdown":"Just want to add to the answer. I was trying to figure how to append text fields to the body and created the following function to do it:\r\n\r\n\r\n    private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\r\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\r\n        dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot; + parameterName + &quot;\\&quot;&quot; + lineEnd);\r\n        dataOutputStream.writeBytes(&quot;Content-Type: text/plain; charset=UTF-8&quot; + lineEnd);\r\n        dataOutputStream.writeBytes(lineEnd);\r\n        dataOutputStream.writeBytes(parameterValue + lineEnd);\r\n    }\r\n\r\nIt is working pretty well.\r\n","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>Just want to add to the answer. I was trying to figure how to append text fields to the body and created the following function to do it:</p>\n\n<pre><code>private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\n    dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\n    dataOutputStream.writeBytes(\"Content-Disposition: form-data; name=\\\"\" + parameterName + \"\\\"\" + lineEnd);\n    dataOutputStream.writeBytes(\"Content-Type: text/plain; charset=UTF-8\" + lineEnd);\n    dataOutputStream.writeBytes(lineEnd);\n    dataOutputStream.writeBytes(parameterValue + lineEnd);\n}\n</code></pre>\n\n<p>It is working pretty well.</p>\n"},{"tags":[],"owner":{"account_id":5822752,"reputation":1801,"user_id":6080790,"accept_rate":58,"display_name":"Angga Ari Wijaya"},"down_vote_count":0,"up_vote_count":68,"is_accepted":false,"score":68,"last_activity_date":1551857361,"creation_date":1461764150,"answer_id":36891462,"question_id":32240177,"body_markdown":"I rewrite your code @RacZo and @BNK more modular and easy to use like\r\n\r\n    VolleyMultipartRequest multipartRequest = new VolleyMultipartRequest(Request.Method.POST, url, new Response.Listener&lt;NetworkResponse&gt;() {\r\n        @Override\r\n        public void onResponse(NetworkResponse response) {\r\n            String resultResponse = new String(response.data);\r\n            // parse success output\r\n        }\r\n    }, new Response.ErrorListener() {\r\n        @Override\r\n        public void onErrorResponse(VolleyError error) {                \r\n            error.printStackTrace();\r\n        }\r\n    }) {\r\n        @Override\r\n        protected Map&lt;String, String&gt; getParams() {\r\n            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n            params.put(&quot;api_token&quot;, &quot;gh659gjhvdyudo973823tt9gvjf7i6ric75r76&quot;);\r\n            params.put(&quot;name&quot;, &quot;Angga&quot;);\r\n            params.put(&quot;location&quot;, &quot;Indonesia&quot;);\r\n            params.put(&quot;about&quot;, &quot;UI/UX Designer&quot;);\r\n            params.put(&quot;contact&quot;, &quot;angga@email.com&quot;);\r\n            return params;\r\n        }\r\n\r\n        @Override\r\n        protected Map&lt;String, DataPart&gt; getByteData() {\r\n            Map&lt;String, DataPart&gt; params = new HashMap&lt;&gt;();\r\n            // file name could found file base or direct access from real path\r\n            // for now just get bitmap data from ImageView\r\n            params.put(&quot;avatar&quot;, new DataPart(&quot;file_avatar.jpg&quot;, AppHelper.getFileDataFromDrawable(getBaseContext(), mAvatarImage.getDrawable()), &quot;image/jpeg&quot;));\r\n            params.put(&quot;cover&quot;, new DataPart(&quot;file_cover.jpg&quot;, AppHelper.getFileDataFromDrawable(getBaseContext(), mCoverImage.getDrawable()), &quot;image/jpeg&quot;));\r\n\r\n            return params;\r\n        }\r\n    };\r\n\r\n    VolleySingleton.getInstance(getBaseContext()).addToRequestQueue(multipartRequest);\r\n\r\nCheck full of code `VolleyMultipartRequest` at my [gist](https://gist.github.com/anggadarkprince/a7c536da091f4b26bb4abf2f92926594).","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>I rewrite your code @RacZo and @BNK more modular and easy to use like</p>\n\n<pre><code>VolleyMultipartRequest multipartRequest = new VolleyMultipartRequest(Request.Method.POST, url, new Response.Listener&lt;NetworkResponse&gt;() {\n    @Override\n    public void onResponse(NetworkResponse response) {\n        String resultResponse = new String(response.data);\n        // parse success output\n    }\n}, new Response.ErrorListener() {\n    @Override\n    public void onErrorResponse(VolleyError error) {                \n        error.printStackTrace();\n    }\n}) {\n    @Override\n    protected Map&lt;String, String&gt; getParams() {\n        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n        params.put(\"api_token\", \"gh659gjhvdyudo973823tt9gvjf7i6ric75r76\");\n        params.put(\"name\", \"Angga\");\n        params.put(\"location\", \"Indonesia\");\n        params.put(\"about\", \"UI/UX Designer\");\n        params.put(\"contact\", \"angga@email.com\");\n        return params;\n    }\n\n    @Override\n    protected Map&lt;String, DataPart&gt; getByteData() {\n        Map&lt;String, DataPart&gt; params = new HashMap&lt;&gt;();\n        // file name could found file base or direct access from real path\n        // for now just get bitmap data from ImageView\n        params.put(\"avatar\", new DataPart(\"file_avatar.jpg\", AppHelper.getFileDataFromDrawable(getBaseContext(), mAvatarImage.getDrawable()), \"image/jpeg\"));\n        params.put(\"cover\", new DataPart(\"file_cover.jpg\", AppHelper.getFileDataFromDrawable(getBaseContext(), mCoverImage.getDrawable()), \"image/jpeg\"));\n\n        return params;\n    }\n};\n\nVolleySingleton.getInstance(getBaseContext()).addToRequestQueue(multipartRequest);\n</code></pre>\n\n<p>Check full of code <code>VolleyMultipartRequest</code> at my <a href=\"https://gist.github.com/anggadarkprince/a7c536da091f4b26bb4abf2f92926594\" rel=\"noreferrer\">gist</a>.</p>\n"},{"tags":[],"owner":{"account_id":2173640,"reputation":370,"user_id":1924907,"display_name":"Sepehr Nozaryian"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1536265719,"creation_date":1488959876,"answer_id":42665883,"question_id":32240177,"body_markdown":"For those who are struggling to send utf-8 parameters and still no luck, the problem I had was in the dataOutputStream, and change the code of @RacZo to below code:\r\n\r\n    private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\r\n            dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\r\n            dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;&quot;);\r\n            dataOutputStream.write(parameterName.getBytes(&quot;UTF-8&quot;));\r\n            dataOutputStream.writeBytes(lineEnd);\r\n            dataOutputStream.writeBytes(&quot;Content-Type: text/plain; charset=UTF-8&quot; + lineEnd);\r\n            dataOutputStream.writeBytes(lineEnd);\r\n            dataOutputStream.write(parameterValue.getBytes(&quot;UTF-8&quot;));\r\n            dataOutputStream.writeBytes(lineEnd);\r\n        } \r\n","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>For those who are struggling to send utf-8 parameters and still no luck, the problem I had was in the dataOutputStream, and change the code of @RacZo to below code:</p>\n\n<pre><code>private void buildTextPart(DataOutputStream dataOutputStream, String parameterName, String parameterValue) throws IOException {\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\n        dataOutputStream.writeBytes(\"Content-Disposition: form-data; name=\\\"\");\n        dataOutputStream.write(parameterName.getBytes(\"UTF-8\"));\n        dataOutputStream.writeBytes(lineEnd);\n        dataOutputStream.writeBytes(\"Content-Type: text/plain; charset=UTF-8\" + lineEnd);\n        dataOutputStream.writeBytes(lineEnd);\n        dataOutputStream.write(parameterValue.getBytes(\"UTF-8\"));\n        dataOutputStream.writeBytes(lineEnd);\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3788825,"reputation":23829,"user_id":3145960,"accept_rate":100,"display_name":"Reaz Murshed"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559925759,"creation_date":1559925759,"answer_id":56498289,"question_id":32240177,"body_markdown":"I found a wrapper of the original volley library which is easier to integrate for multi-part requests. It also supports uploading the multi-part data along with other request parameters. Hence I am sharing my code for the future developers who might run into the problem that I was having (i.e. uploading multi-part data using volley along with some other parameters). \r\n\r\nAdd the following library in the `build.gradle` file. \r\n\r\n    dependencies {\r\n        compile &#39;dev.dworks.libs:volleyplus:+&#39;\r\n    }\r\n\r\n**Please note that, I removed the original volley library from my `build.gradle`** and used the above library instead which can handle both multi-part and normal requests having similar integration technique. \r\n\r\nThen I just had to write the following class which handles the POST request operation. \r\n\r\n    public class POSTMediasTask {\r\n        public void uploadMedia(final Context context, String filePath) {\r\n    \r\n            String url = getUrlForPOSTMedia(); // This is a dummy function which returns the POST url for you\r\n            SimpleMultiPartRequest multiPartRequestWithParams = new SimpleMultiPartRequest(Request.Method.POST, url,\r\n                    new Response.Listener&lt;String&gt;() {\r\n                        @Override\r\n                        public void onResponse(String response) {\r\n                            Log.d(&quot;Response&quot;, response);\r\n                            // TODO: Do something on success\r\n                        }\r\n                    }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n                    // TODO: Handle your error here\r\n                }\r\n            });\r\n    \r\n            // Add the file here\r\n            multiPartRequestWithParams.addFile(&quot;file&quot;, filePath);\r\n\r\n            // Add the params here\r\n            multiPartRequestWithParams.addStringParam(&quot;param1&quot;, &quot;SomeParamValue1&quot;);\r\n            multiPartRequestWithParams.addStringParam(&quot;param2&quot;, &quot;SomeParamValue2&quot;);\r\n    \r\n            RequestQueue queue = Volley.newRequestQueue(context);\r\n            queue.add(multiPartRequestWithParams);\r\n        }\r\n    }\r\n\r\nNow execute the task like the following.\r\n\r\n    new POSTMediasTask().uploadMedia(context, mediaPath);\r\n\r\nYou can upload one file at a time using this library. However, I could manage to upload multiple files, just by initiating multiple tasks.\r\n\r\nHope that helps! ","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>I found a wrapper of the original volley library which is easier to integrate for multi-part requests. It also supports uploading the multi-part data along with other request parameters. Hence I am sharing my code for the future developers who might run into the problem that I was having (i.e. uploading multi-part data using volley along with some other parameters). </p>\n\n<p>Add the following library in the <code>build.gradle</code> file. </p>\n\n<pre><code>dependencies {\n    compile 'dev.dworks.libs:volleyplus:+'\n}\n</code></pre>\n\n<p><strong>Please note that, I removed the original volley library from my <code>build.gradle</code></strong> and used the above library instead which can handle both multi-part and normal requests having similar integration technique. </p>\n\n<p>Then I just had to write the following class which handles the POST request operation. </p>\n\n<pre><code>public class POSTMediasTask {\n    public void uploadMedia(final Context context, String filePath) {\n\n        String url = getUrlForPOSTMedia(); // This is a dummy function which returns the POST url for you\n        SimpleMultiPartRequest multiPartRequestWithParams = new SimpleMultiPartRequest(Request.Method.POST, url,\n                new Response.Listener&lt;String&gt;() {\n                    @Override\n                    public void onResponse(String response) {\n                        Log.d(\"Response\", response);\n                        // TODO: Do something on success\n                    }\n                }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                // TODO: Handle your error here\n            }\n        });\n\n        // Add the file here\n        multiPartRequestWithParams.addFile(\"file\", filePath);\n\n        // Add the params here\n        multiPartRequestWithParams.addStringParam(\"param1\", \"SomeParamValue1\");\n        multiPartRequestWithParams.addStringParam(\"param2\", \"SomeParamValue2\");\n\n        RequestQueue queue = Volley.newRequestQueue(context);\n        queue.add(multiPartRequestWithParams);\n    }\n}\n</code></pre>\n\n<p>Now execute the task like the following.</p>\n\n<pre><code>new POSTMediasTask().uploadMedia(context, mediaPath);\n</code></pre>\n\n<p>You can upload one file at a time using this library. However, I could manage to upload multiple files, just by initiating multiple tasks.</p>\n\n<p>Hope that helps! </p>\n"},{"tags":[],"owner":{"account_id":1311559,"reputation":1628,"user_id":1259464,"display_name":"Ika"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1568902042,"creation_date":1568902042,"answer_id":58012895,"question_id":32240177,"body_markdown":"Here is a Kotlin version of a class allowing multipart request with Volley 1.1.1.\r\n\r\nIt&#39;s mostly based on @BNK&#39;s solution but slighly simplified. I did not notice any particular performance issue. I uploaded a 5Mb pic in about 3 seconds.\r\n\r\n&lt;!-- language: kotlin --&gt;\r\n\r\n    class MultipartWebservice(context: Context) {\r\n    \r\n        private var queue: RequestQueue? = null\r\n    \r\n        private val boundary = &quot;apiclient-&quot; + System.currentTimeMillis()\r\n        private val mimeType = &quot;multipart/form-data;boundary=$boundary&quot;\r\n    \r\n        init {\r\n            queue = Volley.newRequestQueue(context)\r\n        }\r\n    \r\n        fun sendMultipartRequest(\r\n            method: Int,\r\n            url: String,\r\n            fileData: ByteArray,\r\n            fileName: String,\r\n            listener: Response.Listener&lt;NetworkResponse&gt;,\r\n            errorListener: Response.ErrorListener\r\n        ) {\r\n    \r\n            // Create multi part byte array\r\n            val bos = ByteArrayOutputStream()\r\n            val dos = DataOutputStream(bos)\r\n            buildMultipartContent(dos, fileData, fileName)\r\n            val multipartBody = bos.toByteArray()\r\n    \r\n            // Request header, if needed\r\n            val headers = HashMap&lt;String, String&gt;()\r\n            headers[&quot;API-TOKEN&quot;] = &quot;458e126682d577c97d225bbd73a75b5989f65e977b6d8d4b2267537019ad9d20&quot;\r\n    \r\n            val request = MultipartRequest(\r\n                method,\r\n                url,\r\n                errorListener,\r\n                listener,\r\n                headers,\r\n                mimeType,\r\n                multipartBody\r\n            )\r\n    \r\n            queue?.add(request)\r\n    \r\n        }\r\n    \r\n        @Throws(IOException::class)\r\n        private fun buildMultipartContent(dos: DataOutputStream, fileData: ByteArray, fileName: String) {\r\n    \r\n            val twoHyphens = &quot;--&quot;\r\n            val lineEnd = &quot;\\r\\n&quot;\r\n    \r\n            dos.writeBytes(twoHyphens + boundary + lineEnd)\r\n            dos.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;file\\&quot;; filename=\\&quot;$fileName\\&quot;$lineEnd&quot;)\r\n            dos.writeBytes(lineEnd)\r\n            dos.write(fileData)\r\n            dos.writeBytes(lineEnd)\r\n            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd)\r\n        }\r\n    \r\n        class MultipartRequest(\r\n            method: Int,\r\n            url: String,\r\n            errorListener: Response.ErrorListener?,\r\n            private var listener: Response.Listener&lt;NetworkResponse&gt;,\r\n            private var headers: MutableMap&lt;String, String&gt;,\r\n            private var mimeType: String,\r\n            private var multipartBody: ByteArray\r\n        ) : Request&lt;NetworkResponse&gt;(method, url, errorListener) {\r\n    \r\n            override fun getHeaders(): MutableMap&lt;String, String&gt; {\r\n                return if (headers.isEmpty()) super.getHeaders() else headers\r\n            }\r\n    \r\n            override fun getBodyContentType(): String {\r\n                return mimeType\r\n            }\r\n    \r\n            override fun getBody(): ByteArray {\r\n                return multipartBody\r\n            }\r\n    \r\n            override fun parseNetworkResponse(response: NetworkResponse?): Response&lt;NetworkResponse&gt; {\r\n                return try {\r\n                    Response.success(response, HttpHeaderParser.parseCacheHeaders(response))\r\n                } catch (e: Exception) {\r\n                    Response.error(ParseError(e))\r\n                }\r\n            }\r\n    \r\n            override fun deliverResponse(response: NetworkResponse?) {\r\n                listener.onResponse(response)\r\n            }\r\n        }\r\n    }","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>Here is a Kotlin version of a class allowing multipart request with Volley 1.1.1.</p>\n\n<p>It's mostly based on @BNK's solution but slighly simplified. I did not notice any particular performance issue. I uploaded a 5Mb pic in about 3 seconds.</p>\n\n<pre><code>class MultipartWebservice(context: Context) {\n\n    private var queue: RequestQueue? = null\n\n    private val boundary = \"apiclient-\" + System.currentTimeMillis()\n    private val mimeType = \"multipart/form-data;boundary=$boundary\"\n\n    init {\n        queue = Volley.newRequestQueue(context)\n    }\n\n    fun sendMultipartRequest(\n        method: Int,\n        url: String,\n        fileData: ByteArray,\n        fileName: String,\n        listener: Response.Listener&lt;NetworkResponse&gt;,\n        errorListener: Response.ErrorListener\n    ) {\n\n        // Create multi part byte array\n        val bos = ByteArrayOutputStream()\n        val dos = DataOutputStream(bos)\n        buildMultipartContent(dos, fileData, fileName)\n        val multipartBody = bos.toByteArray()\n\n        // Request header, if needed\n        val headers = HashMap&lt;String, String&gt;()\n        headers[\"API-TOKEN\"] = \"458e126682d577c97d225bbd73a75b5989f65e977b6d8d4b2267537019ad9d20\"\n\n        val request = MultipartRequest(\n            method,\n            url,\n            errorListener,\n            listener,\n            headers,\n            mimeType,\n            multipartBody\n        )\n\n        queue?.add(request)\n\n    }\n\n    @Throws(IOException::class)\n    private fun buildMultipartContent(dos: DataOutputStream, fileData: ByteArray, fileName: String) {\n\n        val twoHyphens = \"--\"\n        val lineEnd = \"\\r\\n\"\n\n        dos.writeBytes(twoHyphens + boundary + lineEnd)\n        dos.writeBytes(\"Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"$fileName\\\"$lineEnd\")\n        dos.writeBytes(lineEnd)\n        dos.write(fileData)\n        dos.writeBytes(lineEnd)\n        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd)\n    }\n\n    class MultipartRequest(\n        method: Int,\n        url: String,\n        errorListener: Response.ErrorListener?,\n        private var listener: Response.Listener&lt;NetworkResponse&gt;,\n        private var headers: MutableMap&lt;String, String&gt;,\n        private var mimeType: String,\n        private var multipartBody: ByteArray\n    ) : Request&lt;NetworkResponse&gt;(method, url, errorListener) {\n\n        override fun getHeaders(): MutableMap&lt;String, String&gt; {\n            return if (headers.isEmpty()) super.getHeaders() else headers\n        }\n\n        override fun getBodyContentType(): String {\n            return mimeType\n        }\n\n        override fun getBody(): ByteArray {\n            return multipartBody\n        }\n\n        override fun parseNetworkResponse(response: NetworkResponse?): Response&lt;NetworkResponse&gt; {\n            return try {\n                Response.success(response, HttpHeaderParser.parseCacheHeaders(response))\n            } catch (e: Exception) {\n                Response.error(ParseError(e))\n            }\n        }\n\n        override fun deliverResponse(response: NetworkResponse?) {\n            listener.onResponse(response)\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7157595,"reputation":829,"user_id":5469415,"accept_rate":0,"display_name":"Shoaib Anwar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634193312,"creation_date":1634193312,"answer_id":69566064,"question_id":32240177,"body_markdown":"Here is very simplified Kotlin Version for Multipart Volley POST Request\r\n\r\n        private fun saveProfileAccount(concern: String, selectedDate: String, WDH: String, details: String, fileExtention: String) {\r\n\r\n        val multipartRequest: VolleyMultipartRequest =\r\n            object : VolleyMultipartRequest(\r\n                Request.Method.POST, APIURLS.WhistleBlower,\r\n                Response.Listener&lt;JSONObject&gt; { response -&gt;\r\n\r\n                },\r\n                Response.ErrorListener { error -&gt;\r\n\r\n                    error.printStackTrace()\r\n                }) {\r\n\r\n                @Throws(AuthFailureError::class)\r\n                override fun getHeaders(): MutableMap&lt;String, String&gt;{\r\n                    val params: MutableMap&lt;String, String&gt; = HashMap()\r\n                    params[ConstantValues.XAppApiKey] = APIURLS.XAppApiValue\r\n                    return params\r\n                }\r\n\r\n                override fun getParams(): Map&lt;String, String&gt;? {\r\n                    val params: MutableMap&lt;String, String&gt; = HashMap()\r\n                    val sharedPreferences: SharedPreferences = requireActivity().getSharedPreferences(Prefs.PREF_NAME, 0)\r\n                    val userId = Prefs.getStringPref(sharedPreferences, Prefs.USER_ID)\r\n                    val userName = Prefs.getStringPref(sharedPreferences, Prefs.FULL_NAME)\r\n\r\n                    params[&quot;PersonId&quot;] = userId.toString()\r\n                    params[&quot;PersonName&quot;] = userName.toString()\r\n                    params[&quot;Concern&quot;] = concern\r\n                    params[&quot;DateOfHappen&quot;] = selectedDate\r\n                    params[&quot;WhereHappened&quot;] = WDH\r\n                    params[&quot;Ext&quot;] = fileExtention\r\n                    \r\n\r\n                    return params\r\n                }\r\n\r\n\r\n                override fun getByteData(): Map&lt;String, DataPart&gt;? {\r\n                    val params: MutableMap&lt;String, DataPart&gt; = HashMap()\r\n                    // file name could found file base or direct access from real path\r\n                    // for now just get bitmap data from ImageView\r\n\r\n                    params[&quot;cover&quot;] = DataPart(\r\n                        &quot;sd.pdf&quot;,\r\n                        byteArray,\r\n                        &quot;doc/pdf&quot;\r\n                    )\r\n                    return params\r\n                }\r\n            }\r\n\r\n        AppSingleton.getInstance(requireContext())?.addToRequestQueue(multipartRequest)\r\n    }\r\n","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>Here is very simplified Kotlin Version for Multipart Volley POST Request</p>\n<pre><code>    private fun saveProfileAccount(concern: String, selectedDate: String, WDH: String, details: String, fileExtention: String) {\n\n    val multipartRequest: VolleyMultipartRequest =\n        object : VolleyMultipartRequest(\n            Request.Method.POST, APIURLS.WhistleBlower,\n            Response.Listener&lt;JSONObject&gt; { response -&gt;\n\n            },\n            Response.ErrorListener { error -&gt;\n\n                error.printStackTrace()\n            }) {\n\n            @Throws(AuthFailureError::class)\n            override fun getHeaders(): MutableMap&lt;String, String&gt;{\n                val params: MutableMap&lt;String, String&gt; = HashMap()\n                params[ConstantValues.XAppApiKey] = APIURLS.XAppApiValue\n                return params\n            }\n\n            override fun getParams(): Map&lt;String, String&gt;? {\n                val params: MutableMap&lt;String, String&gt; = HashMap()\n                val sharedPreferences: SharedPreferences = requireActivity().getSharedPreferences(Prefs.PREF_NAME, 0)\n                val userId = Prefs.getStringPref(sharedPreferences, Prefs.USER_ID)\n                val userName = Prefs.getStringPref(sharedPreferences, Prefs.FULL_NAME)\n\n                params[&quot;PersonId&quot;] = userId.toString()\n                params[&quot;PersonName&quot;] = userName.toString()\n                params[&quot;Concern&quot;] = concern\n                params[&quot;DateOfHappen&quot;] = selectedDate\n                params[&quot;WhereHappened&quot;] = WDH\n                params[&quot;Ext&quot;] = fileExtention\n                \n\n                return params\n            }\n\n\n            override fun getByteData(): Map&lt;String, DataPart&gt;? {\n                val params: MutableMap&lt;String, DataPart&gt; = HashMap()\n                // file name could found file base or direct access from real path\n                // for now just get bitmap data from ImageView\n\n                params[&quot;cover&quot;] = DataPart(\n                    &quot;sd.pdf&quot;,\n                    byteArray,\n                    &quot;doc/pdf&quot;\n                )\n                return params\n            }\n        }\n\n    AppSingleton.getInstance(requireContext())?.addToRequestQueue(multipartRequest)\n}\n</code></pre>\n"}],"owner":{"account_id":5439735,"reputation":24034,"user_id":4328123,"accept_rate":82,"display_name":"BNK"},"comment_count":40,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84055,"favorite_count":0,"down_vote_count":1,"up_vote_count":114,"answer_count":6,"score":113,"last_activity_date":1634193312,"creation_date":1440645959,"question_id":32240177,"body_markdown":"This is not really a question, however, I would like to share some of my working code here for your reference when you need.\r\n\r\nAs we know that `HttpEntity` is deprecated from API22 and comletely removed since API23. At the moment, we cannot access [HttpEntity Reference on Android Developer][1] anymore (404).  So, the following is my working sample code for **POST Multipart Request with Volley and without HttpEntity**. It&#39;s working, tested with `Asp.Net Web API`. Of course, the code perhaps is just a basic sample that posts two existed drawable files, also is not the best solution for all cases, and not good tuning.\r\n\r\n**MultipartActivity.java:**\r\n\r\n    package com.example.multipartvolley;\r\n    \r\n    import android.app.Activity;\r\n    import android.content.Context;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.drawable.BitmapDrawable;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.os.Bundle;\r\n    import android.support.v4.content.ContextCompat;\r\n    import android.view.Menu;\r\n    import android.view.MenuItem;\r\n    import android.widget.Toast;\r\n    \r\n    import com.android.volley.NetworkResponse;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    \r\n    \r\n    public class MultipartActivity extends Activity {\r\n    \r\n        private final Context context = this;\r\n        private final String twoHyphens = &quot;--&quot;;\r\n        private final String lineEnd = &quot;\\r\\n&quot;;\r\n        private final String boundary = &quot;apiclient-&quot; + System.currentTimeMillis();\r\n        private final String mimeType = &quot;multipart/form-data;boundary=&quot; + boundary;\r\n        private byte[] multipartBody;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_multipart);\r\n    \r\n            byte[] fileData1 = getFileDataFromDrawable(context, R.drawable.ic_action_android);\r\n            byte[] fileData2 = getFileDataFromDrawable(context, R.drawable.ic_action_book);\r\n    \r\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n            DataOutputStream dos = new DataOutputStream(bos);\r\n            try {\r\n                // the first file\r\n                buildPart(dos, fileData1, &quot;ic_action_android.png&quot;);\r\n                // the second file\r\n                buildPart(dos, fileData2, &quot;ic_action_book.png&quot;);\r\n                // send multipart form data necesssary after file data\r\n                dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);\r\n                // pass to multipart body\r\n                multipartBody = bos.toByteArray();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            String url = &quot;http://192.168.1.100/api/postfile&quot;;\r\n            MultipartRequest multipartRequest = new MultipartRequest(url, null, mimeType, multipartBody, new Response.Listener&lt;NetworkResponse&gt;() {\r\n                @Override\r\n                public void onResponse(NetworkResponse response) {\r\n                    Toast.makeText(context, &quot;Upload successfully!&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n                    Toast.makeText(context, &quot;Upload failed!\\r\\n&quot; + error.toString(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n            VolleySingleton.getInstance(context).addToRequestQueue(multipartRequest);\r\n        }\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            // Inflate the menu; this adds items to the action bar if it is present.\r\n            getMenuInflater().inflate(R.menu.menu_multipart, menu);\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean onOptionsItemSelected(MenuItem item) {\r\n            // Handle action bar item clicks here. The action bar will\r\n            // automatically handle clicks on the Home/Up button, so long\r\n            // as you specify a parent activity in AndroidManifest.xml.\r\n            int id = item.getItemId();\r\n    \r\n            //noinspection SimplifiableIfStatement\r\n            if (id == R.id.action_settings) {\r\n                return true;\r\n            }\r\n    \r\n            return super.onOptionsItemSelected(item);\r\n        }\r\n    \r\n        private void buildPart(DataOutputStream dataOutputStream, byte[] fileData, String fileName) throws IOException {\r\n            dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\r\n            dataOutputStream.writeBytes(&quot;Content-Disposition: form-data; name=\\&quot;uploaded_file\\&quot;; filename=\\&quot;&quot;\r\n                    + fileName + &quot;\\&quot;&quot; + lineEnd);\r\n            dataOutputStream.writeBytes(lineEnd);\r\n    \r\n            ByteArrayInputStream fileInputStream = new ByteArrayInputStream(fileData);\r\n            int bytesAvailable = fileInputStream.available();\r\n    \r\n            int maxBufferSize = 1024 * 1024;\r\n            int bufferSize = Math.min(bytesAvailable, maxBufferSize);\r\n            byte[] buffer = new byte[bufferSize];\r\n    \r\n            // read file and write it into form...\r\n            int bytesRead = fileInputStream.read(buffer, 0, bufferSize);\r\n    \r\n            while (bytesRead &gt; 0) {\r\n                dataOutputStream.write(buffer, 0, bufferSize);\r\n                bytesAvailable = fileInputStream.available();\r\n                bufferSize = Math.min(bytesAvailable, maxBufferSize);\r\n                bytesRead = fileInputStream.read(buffer, 0, bufferSize);\r\n            }\r\n    \r\n            dataOutputStream.writeBytes(lineEnd);\r\n        }\r\n\r\n        private byte[] getFileDataFromDrawable(Context context, int id) {\r\n            Drawable drawable = ContextCompat.getDrawable(context, id);\r\n            Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();\r\n            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n            bitmap.compress(Bitmap.CompressFormat.PNG, 0, byteArrayOutputStream);\r\n            return byteArrayOutputStream.toByteArray();\r\n        }\r\n    }\r\n\r\n**MultipartRequest.java:**\r\n\r\n    package com.example.multipartvolley;\r\n    \r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.NetworkResponse;\r\n    import com.android.volley.ParseError;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.HttpHeaderParser;\r\n    \r\n    import java.util.Map;\r\n    \r\n    class MultipartRequest extends Request&lt;NetworkResponse&gt; {\r\n        private final Response.Listener&lt;NetworkResponse&gt; mListener;\r\n        private final Response.ErrorListener mErrorListener;\r\n        private final Map&lt;String, String&gt; mHeaders;\r\n        private final String mMimeType;\r\n        private final byte[] mMultipartBody;\r\n    \r\n        public MultipartRequest(String url, Map&lt;String, String&gt; headers, String mimeType, byte[] multipartBody, Response.Listener&lt;NetworkResponse&gt; listener, Response.ErrorListener errorListener) {\r\n            super(Method.POST, url, errorListener);\r\n            this.mListener = listener;\r\n            this.mErrorListener = errorListener;\r\n            this.mHeaders = headers;\r\n            this.mMimeType = mimeType;\r\n            this.mMultipartBody = multipartBody;\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n            return (mHeaders != null) ? mHeaders : super.getHeaders();\r\n        }\r\n    \r\n        @Override\r\n        public String getBodyContentType() {\r\n            return mMimeType;\r\n        }\r\n    \r\n        @Override\r\n        public byte[] getBody() throws AuthFailureError {\r\n            return mMultipartBody;\r\n        }\r\n    \r\n        @Override\r\n        protected Response&lt;NetworkResponse&gt; parseNetworkResponse(NetworkResponse response) {\r\n            try {\r\n                return Response.success(\r\n                        response,\r\n                        HttpHeaderParser.parseCacheHeaders(response));\r\n            } catch (Exception e) {\r\n                return Response.error(new ParseError(e));\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void deliverResponse(NetworkResponse response) {\r\n            mListener.onResponse(response);\r\n        }\r\n    \r\n        @Override\r\n        public void deliverError(VolleyError error) {\r\n            mErrorListener.onErrorResponse(error);\r\n        }\r\n    }\r\n\r\n**UPDATE:**\r\n\r\nFor text part, please refer to @Oscar&#39;s answer below.\r\n\r\n  [1]: http://developer.android.com/reference/org/apache/http/HttpEntity.html?is-external=true","title":"Working POST Multipart Request with Volley and without HttpEntity","body":"<p>This is not really a question, however, I would like to share some of my working code here for your reference when you need.</p>\n\n<p>As we know that <code>HttpEntity</code> is deprecated from API22 and comletely removed since API23. At the moment, we cannot access <a href=\"http://developer.android.com/reference/org/apache/http/HttpEntity.html?is-external=true\" rel=\"noreferrer\">HttpEntity Reference on Android Developer</a> anymore (404).  So, the following is my working sample code for <strong>POST Multipart Request with Volley and without HttpEntity</strong>. It's working, tested with <code>Asp.Net Web API</code>. Of course, the code perhaps is just a basic sample that posts two existed drawable files, also is not the best solution for all cases, and not good tuning.</p>\n\n<p><strong>MultipartActivity.java:</strong></p>\n\n<pre><code>package com.example.multipartvolley;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.support.v4.content.ContextCompat;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.widget.Toast;\n\nimport com.android.volley.NetworkResponse;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\n\n\npublic class MultipartActivity extends Activity {\n\n    private final Context context = this;\n    private final String twoHyphens = \"--\";\n    private final String lineEnd = \"\\r\\n\";\n    private final String boundary = \"apiclient-\" + System.currentTimeMillis();\n    private final String mimeType = \"multipart/form-data;boundary=\" + boundary;\n    private byte[] multipartBody;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_multipart);\n\n        byte[] fileData1 = getFileDataFromDrawable(context, R.drawable.ic_action_android);\n        byte[] fileData2 = getFileDataFromDrawable(context, R.drawable.ic_action_book);\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        DataOutputStream dos = new DataOutputStream(bos);\n        try {\n            // the first file\n            buildPart(dos, fileData1, \"ic_action_android.png\");\n            // the second file\n            buildPart(dos, fileData2, \"ic_action_book.png\");\n            // send multipart form data necesssary after file data\n            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);\n            // pass to multipart body\n            multipartBody = bos.toByteArray();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        String url = \"http://192.168.1.100/api/postfile\";\n        MultipartRequest multipartRequest = new MultipartRequest(url, null, mimeType, multipartBody, new Response.Listener&lt;NetworkResponse&gt;() {\n            @Override\n            public void onResponse(NetworkResponse response) {\n                Toast.makeText(context, \"Upload successfully!\", Toast.LENGTH_SHORT).show();\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                Toast.makeText(context, \"Upload failed!\\r\\n\" + error.toString(), Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        VolleySingleton.getInstance(context).addToRequestQueue(multipartRequest);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.menu_multipart, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        // Handle action bar item clicks here. The action bar will\n        // automatically handle clicks on the Home/Up button, so long\n        // as you specify a parent activity in AndroidManifest.xml.\n        int id = item.getItemId();\n\n        //noinspection SimplifiableIfStatement\n        if (id == R.id.action_settings) {\n            return true;\n        }\n\n        return super.onOptionsItemSelected(item);\n    }\n\n    private void buildPart(DataOutputStream dataOutputStream, byte[] fileData, String fileName) throws IOException {\n        dataOutputStream.writeBytes(twoHyphens + boundary + lineEnd);\n        dataOutputStream.writeBytes(\"Content-Disposition: form-data; name=\\\"uploaded_file\\\"; filename=\\\"\"\n                + fileName + \"\\\"\" + lineEnd);\n        dataOutputStream.writeBytes(lineEnd);\n\n        ByteArrayInputStream fileInputStream = new ByteArrayInputStream(fileData);\n        int bytesAvailable = fileInputStream.available();\n\n        int maxBufferSize = 1024 * 1024;\n        int bufferSize = Math.min(bytesAvailable, maxBufferSize);\n        byte[] buffer = new byte[bufferSize];\n\n        // read file and write it into form...\n        int bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n\n        while (bytesRead &gt; 0) {\n            dataOutputStream.write(buffer, 0, bufferSize);\n            bytesAvailable = fileInputStream.available();\n            bufferSize = Math.min(bytesAvailable, maxBufferSize);\n            bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n        }\n\n        dataOutputStream.writeBytes(lineEnd);\n    }\n\n    private byte[] getFileDataFromDrawable(Context context, int id) {\n        Drawable drawable = ContextCompat.getDrawable(context, id);\n        Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 0, byteArrayOutputStream);\n        return byteArrayOutputStream.toByteArray();\n    }\n}\n</code></pre>\n\n<p><strong>MultipartRequest.java:</strong></p>\n\n<pre><code>package com.example.multipartvolley;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.NetworkResponse;\nimport com.android.volley.ParseError;\nimport com.android.volley.Request;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.HttpHeaderParser;\n\nimport java.util.Map;\n\nclass MultipartRequest extends Request&lt;NetworkResponse&gt; {\n    private final Response.Listener&lt;NetworkResponse&gt; mListener;\n    private final Response.ErrorListener mErrorListener;\n    private final Map&lt;String, String&gt; mHeaders;\n    private final String mMimeType;\n    private final byte[] mMultipartBody;\n\n    public MultipartRequest(String url, Map&lt;String, String&gt; headers, String mimeType, byte[] multipartBody, Response.Listener&lt;NetworkResponse&gt; listener, Response.ErrorListener errorListener) {\n        super(Method.POST, url, errorListener);\n        this.mListener = listener;\n        this.mErrorListener = errorListener;\n        this.mHeaders = headers;\n        this.mMimeType = mimeType;\n        this.mMultipartBody = multipartBody;\n    }\n\n    @Override\n    public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n        return (mHeaders != null) ? mHeaders : super.getHeaders();\n    }\n\n    @Override\n    public String getBodyContentType() {\n        return mMimeType;\n    }\n\n    @Override\n    public byte[] getBody() throws AuthFailureError {\n        return mMultipartBody;\n    }\n\n    @Override\n    protected Response&lt;NetworkResponse&gt; parseNetworkResponse(NetworkResponse response) {\n        try {\n            return Response.success(\n                    response,\n                    HttpHeaderParser.parseCacheHeaders(response));\n        } catch (Exception e) {\n            return Response.error(new ParseError(e));\n        }\n    }\n\n    @Override\n    protected void deliverResponse(NetworkResponse response) {\n        mListener.onResponse(response);\n    }\n\n    @Override\n    public void deliverError(VolleyError error) {\n        mErrorListener.onErrorResponse(error);\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>For text part, please refer to @Oscar's answer below.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1634191794,"post_id":69565773,"comment_id":122960040,"body_markdown":"Your problem is that `Object[]` and `String[]` are different types and not part of the same hierarchy (both extend `Object` but that&#39;s it). Have a look here for some more info: https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java - You could also have a look at the `ArrayList` sources which internally mains the array as `Object[]` and casts upon retrieval.","body":"Your problem is that <code>Object[]</code> and <code>String[]</code> are different types and not part of the same hierarchy (both extend <code>Object</code> but that&#39;s it). Have a look here for some more info: <a href=\"https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java\" title=\"how to create a generic array in java\">stackoverflow.com/questions/529085/&hellip;</a> - You could also have a look at the <code>ArrayList</code> sources which internally mains the array as <code>Object[]</code> and casts upon retrieval."},{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":1,"creation_date":1634192035,"post_id":69565773,"comment_id":122960101,"body_markdown":"https://www.baeldung.com/java-generic-array","body":"<a href=\"https://www.baeldung.com/java-generic-array\" rel=\"nofollow noreferrer\">baeldung.com/java-generic-array</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1634192041,"post_id":69565773,"comment_id":122960102,"body_markdown":"Class `java.util.ArrayList` is also a generic list that is backed by an array (of `Object`). You can look at the source code of that class to see how they did it.","body":"Class <code>java.util.ArrayList</code> is also a generic list that is backed by an array (of <code>Object</code>). You can look at the source code of that class to see how they did it."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1634192378,"post_id":69565773,"comment_id":122960200,"body_markdown":"And just for the future: when you have an exception stack trace with a line number, then please **mark** that line somehow (for example with a comment) in the source code we are showing. Dont expect us to copy your code, and compile it locally to figure such details ourselves.","body":"And just for the future: when you have an exception stack trace with a line number, then please <b>mark</b> that line somehow (for example with a comment) in the source code we are showing. Dont expect us to copy your code, and compile it locally to figure such details ourselves."},{"owner":{"account_id":18514929,"reputation":95,"user_id":13489275,"display_name":"Edith"},"score":0,"creation_date":1634192710,"post_id":69565773,"comment_id":122960277,"body_markdown":"Oh,I see. Generic is only for type checking at compile time. No wonder when I add a break point to see the type of item, it is still Object[]. Thank you for the hints :)","body":"Oh,I see. Generic is only for type checking at compile time. No wonder when I add a break point to see the type of item, it is still Object[]. Thank you for the hints :)"}],"answers":[{"tags":[],"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634192907,"creation_date":1634192907,"answer_id":69565986,"question_id":69565773,"body_markdown":"You must to inject explicitly the array constructor for `T` type.\r\n\r\nE.g. move your `new T[10]` as\r\n\r\n    static class GenericList&lt;T&gt; {\r\n        final public T[] items;\r\n        private int count;\r\n\r\n        public GenericList(IntFunction&lt;T[]&gt; arrayConstructor) {\r\n            items = arrayConstructor.apply(10);\r\n        }\r\n\r\nAnd create the object injecting the constructor\r\n\r\n    var list = new GenericList&lt;&gt;(String []::new);\r\n\r\nNow all works\r\n\r\n    a\r\n    b\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n    null\r\n\r\n(Note: with `T[] items = (T[]) new Object[10]` you are not creating a `T` array, you are creating an `Object` array casting to a `T` array, which is incorrect)","title":"ClassCastException when declaring class generic as string","body":"<p>You must to inject explicitly the array constructor for <code>T</code> type.</p>\n<p>E.g. move your <code>new T[10]</code> as</p>\n<pre><code>static class GenericList&lt;T&gt; {\n    final public T[] items;\n    private int count;\n\n    public GenericList(IntFunction&lt;T[]&gt; arrayConstructor) {\n        items = arrayConstructor.apply(10);\n    }\n</code></pre>\n<p>And create the object injecting the constructor</p>\n<pre><code>var list = new GenericList&lt;&gt;(String []::new);\n</code></pre>\n<p>Now all works</p>\n<pre><code>a\nb\nnull\nnull\nnull\nnull\nnull\nnull\nnull\nnull\n</code></pre>\n<p>(Note: with <code>T[] items = (T[]) new Object[10]</code> you are not creating a <code>T</code> array, you are creating an <code>Object</code> array casting to a <code>T</code> array, which is incorrect)</p>\n"}],"owner":{"account_id":18514929,"reputation":95,"user_id":13489275,"display_name":"Edith"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69565986,"answer_count":1,"score":1,"last_activity_date":1634192907,"creation_date":1634191523,"question_id":69565773,"body_markdown":"I have a GenericList class that must initialise an array with type &lt;T&gt; but it force me to declare it as Object in compile time. When I declare the generic as String in Main, the program stops with ClassCastException when i assign the list.items to a variable called items, which compile time also recognise it as String[]. Error is like this:\r\n```none\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [Ljava.lang.String; ([Ljava.lang.Object; and [Ljava.lang.String; are in module java.base of loader &#39;bootstrap&#39;)\r\n\tat com.advanced.Main.main(Main.java:51)&quot;. \r\n```\r\nWhy and how to solve this? Thank you.\r\n```java\r\npublic class GenericList&lt;T&gt; {   \r\n    public T[] items = (T[]) new Object[10];\r\n    private int count;\r\n    public void add(T item){\r\n        items[count++] = item;\r\n    }\r\n    public T get(int index){\r\n        return items[index];\r\n    }\r\n    public T[] getItems() {\r\n        return items;\r\n    }\r\n}\r\n```\r\n-------------\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        var list = new GenericList&lt;String&gt;();\r\n        list.add(&quot;a&quot;);\r\n        list.add(&quot;b&quot;);\r\n        var items = list.items;\r\n        for(var item: items){\r\n            System.out.println(item);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"ClassCastException when declaring class generic as string","body":"<p>I have a GenericList class that must initialise an array with type  but it force me to declare it as Object in compile time. When I declare the generic as String in Main, the program stops with ClassCastException when i assign the list.items to a variable called items, which compile time also recognise it as String[]. Error is like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [Ljava.lang.String; ([Ljava.lang.Object; and [Ljava.lang.String; are in module java.base of loader 'bootstrap')\n    at com.advanced.Main.main(Main.java:51)&quot;. \n</code></pre>\n<p>Why and how to solve this? Thank you.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GenericList&lt;T&gt; {   \n    public T[] items = (T[]) new Object[10];\n    private int count;\n    public void add(T item){\n        items[count++] = item;\n    }\n    public T get(int index){\n        return items[index];\n    }\n    public T[] getItems() {\n        return items;\n    }\n}\n</code></pre>\n<hr />\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n\n        var list = new GenericList&lt;String&gt;();\n        list.add(&quot;a&quot;);\n        list.add(&quot;b&quot;);\n        var items = list.items;\n        for(var item: items){\n            System.out.println(item);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","package"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1634183871,"post_id":69564876,"comment_id":122958629,"body_markdown":"You have to use the fully-qualified name. It&#39;s not like directories where you have &quot;relative&quot; names.","body":"You have to use the fully-qualified name. It&#39;s not like directories where you have &quot;relative&quot; names."}],"answers":[{"tags":[],"owner":{"account_id":10133926,"reputation":131,"user_id":7486210,"accept_rate":50,"display_name":"Ebad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634192876,"creation_date":1634183925,"answer_id":69564910,"question_id":69564876,"body_markdown":"Nevermind, I had to use the full package path `(com.[...].[...].pkg1.subpkg1.SomeClass)`.","title":"Same class name in a subpackage","body":"<p>Nevermind, I had to use the full package path <code>(com.[...].[...].pkg1.subpkg1.SomeClass)</code>.</p>\n"}],"owner":{"account_id":10133926,"reputation":131,"user_id":7486210,"accept_rate":50,"display_name":"Ebad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634192876,"creation_date":1634183449,"question_id":69564876,"body_markdown":"So I found this answer and it shows that I have to import one class and fully qualify the class that I don&#39;t import.\r\nhttps://stackoverflow.com/questions/4055634/same-class-name-in-different-packages/4055649\r\n\r\nHowever, how do I do that for classes with the same name but in a subpackage and being used as a parameter?\r\n\r\nSay I have:\r\n\r\npkg1/SomeClass.java\r\n```\r\npackage pkg1;\r\npublic class SomeClass {\r\n}\r\n```\r\n\r\npkg1/subpkg1/SomeClass.java\r\n```\r\npackage pkg1.subpkg1;\r\npublic class SomeClass {\r\n}\r\n```\r\nThen a different class in pkg1 needs to use both:\r\npkg1/LastClass.java\r\n```\r\npackage pkg1;\r\n\r\npublic class LastClass {\r\n    public void someMethod(SomeClass someClass) {\r\n    }\r\n\r\n    public void someOtherMethod(subpkg1.SomeClass someClass) {\r\n    }\r\n}\r\n```\r\nThis does not seem to work (cannot resolve symbol subpkg1). How can I use the class in the subpackage?","title":"Same class name in a subpackage","body":"<p>So I found this answer and it shows that I have to import one class and fully qualify the class that I don't import.\n<a href=\"https://stackoverflow.com/questions/4055634/same-class-name-in-different-packages/4055649\">Same class name in different packages</a></p>\n<p>However, how do I do that for classes with the same name but in a subpackage and being used as a parameter?</p>\n<p>Say I have:</p>\n<p>pkg1/SomeClass.java</p>\n<pre><code>package pkg1;\npublic class SomeClass {\n}\n</code></pre>\n<p>pkg1/subpkg1/SomeClass.java</p>\n<pre><code>package pkg1.subpkg1;\npublic class SomeClass {\n}\n</code></pre>\n<p>Then a different class in pkg1 needs to use both:\npkg1/LastClass.java</p>\n<pre><code>package pkg1;\n\npublic class LastClass {\n    public void someMethod(SomeClass someClass) {\n    }\n\n    public void someOtherMethod(subpkg1.SomeClass someClass) {\n    }\n}\n</code></pre>\n<p>This does not seem to work (cannot resolve symbol subpkg1). How can I use the class in the subpackage?</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1633638581,"post_id":69391959,"comment_id":122820588,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":22884205,"reputation":11,"user_id":17025344,"display_name":"Suraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634192640,"creation_date":1633003509,"question_id":69391959,"body_markdown":"My phone is Samsung A2 having Os 8.1.0. When app is foreground or background notifications received but when app is in sleep mode then onMessageReceived not got called...so push notification not received.. it gives error like broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE \r\n\r\n    `public class MyFirebaseMessagingService extends   FirebaseMessagingService {\r\n    private static final String TAG =   MyFirebaseMessagingService.class.getSimpleName();\r\n    private NotificationUtils notificationUtils;\r\n    int m = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);\r\n    public static Ringtone notificationRingtone=null;\r\n    @Override\r\n    public void onNewToken(String s) {\r\n        super.onNewToken(s);\r\n    }\r\n    @Override\r\n    public void onMessageReceived(RemoteMessage remoteMessage) {\r\n        super.onMessageReceived(remoteMessage);\r\n      Log.e(TAG, &quot;From: &quot; + remoteMessage.getFrom());\r\n    if (remoteMessage.getNotification() != null) {\r\n            Log.e(TAG, &quot;Notification Body: &quot; + remoteMessage.getNotification().getBody());\r\n            Log.e(TAG, &quot;Notification Body1: &quot; + remoteMessage.getNotification().toString());\r\n            Log.e(TAG, &quot;Notification Body2: &quot; + remoteMessage.getNotification().getTitle());\r\n\r\n   }`","title":"broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE","body":"<p>My phone is Samsung A2 having Os 8.1.0. When app is foreground or background notifications received but when app is in sleep mode then onMessageReceived not got called...so push notification not received.. it gives error like broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE</p>\n<pre><code>`public class MyFirebaseMessagingService extends   FirebaseMessagingService {\nprivate static final String TAG =   MyFirebaseMessagingService.class.getSimpleName();\nprivate NotificationUtils notificationUtils;\nint m = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);\npublic static Ringtone notificationRingtone=null;\n@Override\npublic void onNewToken(String s) {\n    super.onNewToken(s);\n}\n@Override\npublic void onMessageReceived(RemoteMessage remoteMessage) {\n    super.onMessageReceived(remoteMessage);\n  Log.e(TAG, &quot;From: &quot; + remoteMessage.getFrom());\nif (remoteMessage.getNotification() != null) {\n        Log.e(TAG, &quot;Notification Body: &quot; + remoteMessage.getNotification().getBody());\n        Log.e(TAG, &quot;Notification Body1: &quot; + remoteMessage.getNotification().toString());\n        Log.e(TAG, &quot;Notification Body2: &quot; + remoteMessage.getNotification().getTitle());\n</code></pre>\n<p>}`</p>\n"},{"tags":["java","classpath","javac","jcstress"],"answers":[{"tags":[],"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556002273,"creation_date":1556002273,"answer_id":55805757,"question_id":54542348,"body_markdown":"You did not say which version of Java you used. But the same thing happens for me with a Windows JDK-8 build from Oracle. JDK-12 seems to be fine, though. Also, you could try one of these: https://builds.shipilev.net/.","title":"Error during run jcstress: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM","body":"<p>You did not say which version of Java you used. But the same thing happens for me with a Windows JDK-8 build from Oracle. JDK-12 seems to be fine, though. Also, you could try one of these: <a href=\"https://builds.shipilev.net/\" rel=\"nofollow noreferrer\">https://builds.shipilev.net/</a>.</p>\n"},{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634192640,"creation_date":1634192640,"answer_id":69565947,"question_id":54542348,"body_markdown":"When you try the newest version like JDK 16/17, it should work fine.","title":"Error during run jcstress: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM","body":"<p>When you try the newest version like JDK 16/17, it should work fine.</p>\n"}],"owner":{"account_id":6470184,"reputation":49,"user_id":5010603,"display_name":"Andrii Khrupalyk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634192640,"creation_date":1549397713,"question_id":54542348,"body_markdown":"I&#39;m trying to run jcstress 0.5, but I&#39;m getting an error:\r\n\r\n```\r\nError: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM.\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n\r\nFull log:\r\n\r\n```\r\nProbing what VM modes are available:\r\n (failures are non-fatal, but may miss some interesting cases)\r\n\r\n----- [OK] [-Xint]\r\n----- [OK] [-XX:TieredStopAtLevel=1]\r\n----- [OK] []\r\n----- [N/A] [-XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]\r\nError: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM.\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n\r\n\r\n----- [OK] [-XX:-TieredCompilation]\r\n----- [N/A] [-XX:-TieredCompilation, -XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]\r\nError: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM.\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n\r\n\r\n\r\nInitializing and probing the target VM: \r\n (all failures are non-fatal, but may affect testing accuracy)\r\n\r\n----- [OK] Unlocking diagnostic VM options\r\nBurning up to figure out the exact CPU count....... done!\r\n\r\n----- [OK] Trimming down the default VM heap size to 1/8-th of max RAM\r\n----- [OK] Trimming down the number of compiler threads\r\n----- [OK] Trimming down the number of parallel GC threads\r\n----- [OK] Trimming down the number of concurrent GC threads\r\n----- [OK] Trimming down the number of G1 concurrent refinement GC threads\r\n----- [OK] Testing @Contended works on all results and infra objects\r\n----- [OK] Unlocking Whitebox API for online de-optimization\r\n----- [OK] Testing allocation profiling\r\n----- [FAILED] Trying Thread.onSpinWait\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: java.lang.Thread.onSpinWait()V\r\n\tat org.openjdk.jcstress.vm.ThreadSpinWaitTestMain.main(ThreadSpinWaitTestMain.java:30)\r\n\r\n\r\n  Hardware threads in use/available: 8/8, no yielding.\r\n  Test preset mode: &quot;default&quot;\r\n  Writing the test results to &quot;jcstress-results-2019-02-05-22-08-52.bin.gz&quot;\r\n  Parsing results to &quot;results/&quot;\r\n  Running each test matching &quot;.*&quot; for 1 forks, 5 iterations, 1000 ms each\r\n  Each JVM would execute at most 5 tests in the row.\r\n  Solo stride size will be autobalanced within [10, 10000] elements, but taking no more than 100 Mb.\r\n\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat java.io.Reader.&lt;init&gt;(Reader.java:78)\r\n\tat java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:72)\r\n\tat org.openjdk.jcstress.infra.runners.TestList.getTests(TestList.java:53)\r\n\tat org.openjdk.jcstress.infra.runners.TestList.tests(TestList.java:105)\r\n\tat org.openjdk.jcstress.JCStress.getTests(JCStress.java:139)\r\n\tat org.openjdk.jcstress.JCStress.run(JCStress.java:67)\r\n\tat org.openjdk.jcstress.Main.main(Main.java:60)\r\n\r\n```\r\n\r\nCommand which I use to run tests:\r\n```\r\njava -cp jars/jcstress-core-0.5.jar:jars/jopt-simple-4.6.jar org.openjdk.jcstress.Main\r\n```\r\n\r\n","title":"Error during run jcstress: VM option &#39;StressLCM&#39; is develop and is available only in debug version of VM","body":"<p>I'm trying to run jcstress 0.5, but I'm getting an error:</p>\n\n<pre><code>Error: VM option 'StressLCM' is develop and is available only in debug version of VM.\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n\n<p>Full log:</p>\n\n<pre><code>Probing what VM modes are available:\n (failures are non-fatal, but may miss some interesting cases)\n\n----- [OK] [-Xint]\n----- [OK] [-XX:TieredStopAtLevel=1]\n----- [OK] []\n----- [N/A] [-XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]\nError: VM option 'StressLCM' is develop and is available only in debug version of VM.\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\n\n----- [OK] [-XX:-TieredCompilation]\n----- [N/A] [-XX:-TieredCompilation, -XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]\nError: VM option 'StressLCM' is develop and is available only in debug version of VM.\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\n\n\nInitializing and probing the target VM: \n (all failures are non-fatal, but may affect testing accuracy)\n\n----- [OK] Unlocking diagnostic VM options\nBurning up to figure out the exact CPU count....... done!\n\n----- [OK] Trimming down the default VM heap size to 1/8-th of max RAM\n----- [OK] Trimming down the number of compiler threads\n----- [OK] Trimming down the number of parallel GC threads\n----- [OK] Trimming down the number of concurrent GC threads\n----- [OK] Trimming down the number of G1 concurrent refinement GC threads\n----- [OK] Testing @Contended works on all results and infra objects\n----- [OK] Unlocking Whitebox API for online de-optimization\n----- [OK] Testing allocation profiling\n----- [FAILED] Trying Thread.onSpinWait\nException in thread \"main\" java.lang.NoSuchMethodError: java.lang.Thread.onSpinWait()V\n    at org.openjdk.jcstress.vm.ThreadSpinWaitTestMain.main(ThreadSpinWaitTestMain.java:30)\n\n\n  Hardware threads in use/available: 8/8, no yielding.\n  Test preset mode: \"default\"\n  Writing the test results to \"jcstress-results-2019-02-05-22-08-52.bin.gz\"\n  Parsing results to \"results/\"\n  Running each test matching \".*\" for 1 forks, 5 iterations, 1000 ms each\n  Each JVM would execute at most 5 tests in the row.\n  Solo stride size will be autobalanced within [10, 10000] elements, but taking no more than 100 Mb.\n\nException in thread \"main\" java.lang.NullPointerException\n    at java.io.Reader.&lt;init&gt;(Reader.java:78)\n    at java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:72)\n    at org.openjdk.jcstress.infra.runners.TestList.getTests(TestList.java:53)\n    at org.openjdk.jcstress.infra.runners.TestList.tests(TestList.java:105)\n    at org.openjdk.jcstress.JCStress.getTests(JCStress.java:139)\n    at org.openjdk.jcstress.JCStress.run(JCStress.java:67)\n    at org.openjdk.jcstress.Main.main(Main.java:60)\n\n</code></pre>\n\n<p>Command which I use to run tests:</p>\n\n<pre><code>java -cp jars/jcstress-core-0.5.jar:jars/jopt-simple-4.6.jar org.openjdk.jcstress.Main\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":4,"creation_date":1634019874,"post_id":69535836,"comment_id":122907074,"body_markdown":"Have you considered `for(i in 0 until table.size-8)`?","body":"Have you considered <code>for(i in 0 until table.size-8)</code>?"},{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1634019899,"post_id":69535836,"comment_id":122907080,"body_markdown":"Does this answer your question? [Why was the indexed for loop removed in Kotlin?](https://stackoverflow.com/questions/45144495/why-was-the-indexed-for-loop-removed-in-kotlin)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/45144495/why-was-the-indexed-for-loop-removed-in-kotlin\">Why was the indexed for loop removed in Kotlin?</a>"}],"answers":[{"tags":[],"owner":{"account_id":13766114,"reputation":1780,"user_id":9936828,"display_name":"somethingsomething"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634026799,"creation_date":1634026799,"answer_id":69537193,"question_id":69535836,"body_markdown":"You can just move the `-8` into the upper limit, and since you include (`&lt;=`) the upper limit you shouldn&#39;t be using until, but the regular range expansion with two dots.\r\n\r\nSo it becomes:\r\n\r\n    for (i in 0..table.size-8){\r\n        for (j in 0..table[i].size-8){}\r\n    }\r\n\r\n(I imagine you would also want to replace the magical number eight with a variable with a meaningful name)","title":"Convert Java loop to Kotlin","body":"<p>You can just move the <code>-8</code> into the upper limit, and since you include (<code>&lt;=</code>) the upper limit you shouldn't be using until, but the regular range expansion with two dots.</p>\n<p>So it becomes:</p>\n<pre><code>for (i in 0..table.size-8){\n    for (j in 0..table[i].size-8){}\n}\n</code></pre>\n<p>(I imagine you would also want to replace the magical number eight with a variable with a meaningful name)</p>\n"}],"owner":{"account_id":18732360,"reputation":3,"user_id":13657461,"display_name":"ilovepizza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634051873,"accepted_answer_id":69537193,"answer_count":1,"score":0,"last_activity_date":1634192399,"creation_date":1634019097,"question_id":69535836,"body_markdown":"\r\nI&#39;m studying implementation with Kotlin. When I implement Kotlin version by below situation, I can&#39;t imagine cool way.\r\n\r\n```java\r\nfor(i = 0 ; i + 8 &lt;= table.size; i++){\r\n for(j = 0 ; j + 8 &lt;= table[0].size; j++{\r\n  whatever\r\n }\r\n}\r\n```\r\nAbove code is Java version\r\n\r\n```kotlin\r\nfor(i in 0 until table.size){\r\n if(i+8 &gt; table.size)break\r\n  for(j in until table[0].size){\r\n    if(j+8 &gt; table[0].size)break\r\n      whatever\r\n   }\r\n}\r\n```\r\nAbove is Kotlin version which I think.\r\n\r\nIs this fine way? ","title":"Convert Java loop to Kotlin","body":"<p>I'm studying implementation with Kotlin. When I implement Kotlin version by below situation, I can't imagine cool way.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(i = 0 ; i + 8 &lt;= table.size; i++){\n for(j = 0 ; j + 8 &lt;= table[0].size; j++{\n  whatever\n }\n}\n</code></pre>\n<p>Above code is Java version</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>for(i in 0 until table.size){\n if(i+8 &gt; table.size)break\n  for(j in until table[0].size){\n    if(j+8 &gt; table[0].size)break\n      whatever\n   }\n}\n</code></pre>\n<p>Above is Kotlin version which I think.</p>\n<p>Is this fine way?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3205406,"reputation":99,"user_id":2706534,"display_name":"user2706534"},"score":1,"creation_date":1634162508,"post_id":69562106,"comment_id":122955080,"body_markdown":"It&#39;s hard to say anything; looks like some kind of typo. Blind guess - check if all annotations are in place: `@Component` at class that implements CompactDisc, `@Configuration` and `@ComponentScan` at CDPlayerConfig. Plus - all classes are in &quot;soundsystem&quot; package (`&lt;context:component-scan base-package=&quot;soundsystem&quot; /&gt;`)","body":"It&#39;s hard to say anything; looks like some kind of typo. Blind guess - check if all annotations are in place: <code>@Component</code> at class that implements CompactDisc, <code>@Configuration</code> and <code>@ComponentScan</code> at CDPlayerConfig. Plus - all classes are in &quot;soundsystem&quot; package (<code>&lt;context:component-scan base-package=&quot;soundsystem&quot; &#47;&gt;</code>)"}],"answers":[{"tags":[],"owner":{"account_id":16185685,"reputation":1,"user_id":17138684,"display_name":"chrislo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634192361,"creation_date":1634192361,"answer_id":69565899,"question_id":69562106,"body_markdown":"Be sure to import org.junit.Test instead of org.junit.jupiter.api.Test","title":"Spring Beans not wiring?","body":"<p>Be sure to import org.junit.Test instead of org.junit.jupiter.api.Test</p>\n"}],"owner":{"account_id":21216317,"reputation":15,"user_id":15603874,"display_name":"ChunkyLover53"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634192361,"creation_date":1634157935,"question_id":69562106,"body_markdown":"I&#39;m going through the book &quot;Spring in Action&quot; eth Edition and trying to follow along.\r\n\r\nI&#39;ve tried copying the CDPlayer example code from chapter 2:\r\nhttps://livebook.manning.com/book/spring-in-action-fourth-edition/chapter-2/1\r\n\r\nas far as the test class:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes=CDPlayerConfig.class)\r\n    public class CDPlayerTest\r\n    {\r\n       @Autowired\r\n       private CompactDisc cd;\r\n    \r\n       @Test\r\n       public void cdShouldNotBeNull() {\r\n          cd.play();\r\n       }\r\n    }\r\n\r\nBut the test fails:\r\n\r\n    org.junit.runners.model.InvalidTestClassError: Invalid test class &#39;com.example.soundsystem.CDPlayerTest&#39;:\r\n\r\n  \r\n\r\n    1. No runnable methods\r\n\r\n\tat org.junit.runners.ParentRunner.validate(ParentRunner.java:525)\r\n\tat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:92)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:74)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.&lt;init&gt;(SpringJUnit4ClassRunner.java:137)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\r\n\tat org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder$DefensiveAnnotatedBuilder.buildRunner(DefensiveAllDefaultPossibilitiesBuilder.java:114)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\r\n\tat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:37)\r\n\tat org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder.runnerForClass(DefensiveAllDefaultPossibilitiesBuilder.java:57)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\r\n\tat org.junit.vintage.engine.discovery.ClassSelectorResolver.resolveTestClass(ClassSelectorResolver.java:66)\r\n\tat org.junit.vintage.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:47)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:134)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:185)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:125)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:91)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:82)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\r\n\tat org.junit.vintage.engine.discovery.VintageDiscoverer.discover(VintageDiscoverer.java:44)\r\n\tat org.junit.vintage.engine.VintageTestEngine.discover(VintageTestEngine.java:63)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:103)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\n\r\n\r\n\r\n\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;com.example.soundsystem.CompactDisc.play()&quot; because &quot;this.cd&quot; is null\r\n\r\n\tat com.example.soundsystem.CDPlayerTest.cdShouldNotBeNull(CDPlayerTest.java:19)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\n\r\n\r\nStruggling to get this working. It doesn&#39;t help that the book doesn&#39;t actually cover how to set up Spring (as far as I can see). When creating the project I just used https://start.spring.io/ and didn&#39;t add any dependencies, as I assume I won&#39;t need any for this other than spring boot itself\r\n\r\n","title":"Spring Beans not wiring?","body":"<p>I'm going through the book &quot;Spring in Action&quot; eth Edition and trying to follow along.</p>\n<p>I've tried copying the CDPlayer example code from chapter 2:\n<a href=\"https://livebook.manning.com/book/spring-in-action-fourth-edition/chapter-2/1\" rel=\"nofollow noreferrer\">https://livebook.manning.com/book/spring-in-action-fourth-edition/chapter-2/1</a></p>\n<p>as far as the test class:</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes=CDPlayerConfig.class)\npublic class CDPlayerTest\n{\n   @Autowired\n   private CompactDisc cd;\n\n   @Test\n   public void cdShouldNotBeNull() {\n      cd.play();\n   }\n}\n</code></pre>\n<p>But the test fails:</p>\n<pre><code>org.junit.runners.model.InvalidTestClassError: Invalid test class 'com.example.soundsystem.CDPlayerTest':\n\n\n\n1. No runnable methods\n\nat org.junit.runners.ParentRunner.validate(ParentRunner.java:525)\nat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:92)\nat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:74)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.&lt;init&gt;(SpringJUnit4ClassRunner.java:137)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:64)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)\nat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\nat org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder$DefensiveAnnotatedBuilder.buildRunner(DefensiveAllDefaultPossibilitiesBuilder.java:114)\nat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\nat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:37)\nat org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder.runnerForClass(DefensiveAllDefaultPossibilitiesBuilder.java:57)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:70)\nat org.junit.vintage.engine.discovery.ClassSelectorResolver.resolveTestClass(ClassSelectorResolver.java:66)\nat org.junit.vintage.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:47)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:134)\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\nat java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)\nat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\nat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\nat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\nat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\nat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:185)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:125)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:91)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:82)\nat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\nat org.junit.vintage.engine.discovery.VintageDiscoverer.discover(VintageDiscoverer.java:44)\nat org.junit.vintage.engine.VintageTestEngine.discover(VintageTestEngine.java:63)\nat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:103)\nat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\nat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\nat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\nat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\n\n\n\n\n\njava.lang.NullPointerException: Cannot invoke &quot;com.example.soundsystem.CompactDisc.play()&quot; because &quot;this.cd&quot; is null\n\nat com.example.soundsystem.CDPlayerTest.cdShouldNotBeNull(CDPlayerTest.java:19)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:564)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\nat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\nat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\n</code></pre>\n<p>Struggling to get this working. It doesn't help that the book doesn't actually cover how to set up Spring (as far as I can see). When creating the project I just used <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a> and didn't add any dependencies, as I assume I won't need any for this other than spring boot itself</p>\n"},{"tags":["java","eclipse","jsp","tomcat"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1634133438,"post_id":69556824,"comment_id":122944722,"body_markdown":"Does `&lt;%@ page import=&quot;java.util.Date&quot; %&gt;` instead of `&lt;%@ page import java.util.Date()%&gt;` work?","body":"Does <code>&lt;%@ page import=&quot;java.util.Date&quot; %&gt;</code> instead of <code>&lt;%@ page import java.util.Date()%&gt;</code> work?"},{"owner":{"account_id":22929497,"reputation":35,"user_id":17064053,"display_name":"melololo"},"score":0,"creation_date":1634134031,"post_id":69556824,"comment_id":122944974,"body_markdown":"no it doesn&#39;t work","body":"no it doesn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":22946308,"reputation":69,"user_id":17078245,"display_name":"kody-technolab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634192346,"creation_date":1634192346,"answer_id":69565896,"question_id":69556824,"body_markdown":"Try below code, \r\n\r\n    &lt;%@ page import=&quot;java.util.Date&quot;%&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n        pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n        &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n        &lt;title&gt;Message of the Day Application&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body bgcolor=&quot;green&quot;&gt;\r\n        &lt;h1 align=&quot;center&quot;&gt;Welcome to MOTD Application&lt;/h1&gt;\r\n        &lt;h1 align=&quot;center&quot;&gt;Version 2.0&lt;/h1&gt;\r\n        &lt;h1&gt;Message of the Day: Cloud Computing is Cooler!&lt;/h1&gt;\r\n        &lt;h2&gt;The date and time now is &lt;%= new Date() %&gt;&lt;/h2&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nAlso one more thing here as we have imported java.util.Date class then no need to use fully qualified name while using it. We can use it directly with the class name like this &lt;%= new Date() %&gt;","title":"Create JSP file in Eclipse using Apache Tomcat","body":"<p>Try below code,</p>\n<pre><code>&lt;%@ page import=&quot;java.util.Date&quot;%&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n    &lt;title&gt;Message of the Day Application&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body bgcolor=&quot;green&quot;&gt;\n    &lt;h1 align=&quot;center&quot;&gt;Welcome to MOTD Application&lt;/h1&gt;\n    &lt;h1 align=&quot;center&quot;&gt;Version 2.0&lt;/h1&gt;\n    &lt;h1&gt;Message of the Day: Cloud Computing is Cooler!&lt;/h1&gt;\n    &lt;h2&gt;The date and time now is &lt;%= new Date() %&gt;&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Also one more thing here as we have imported java.util.Date class then no need to use fully qualified name while using it. We can use it directly with the class name like this &lt;%= new Date() %&gt;</p>\n"}],"owner":{"account_id":22929497,"reputation":35,"user_id":17064053,"display_name":"melololo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634192346,"creation_date":1634133152,"question_id":69556824,"body_markdown":"This is my first time using Eclipse and Tomcat.\r\nI want to add an `index,jsp` file containing the following HTTML/JSP content.\r\n\r\n\r\n    &lt;%@ page import java.util.Date()%&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n        pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    \t&lt;head&gt;\r\n    \t&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n    \t&lt;title&gt;Message of the Day Application&lt;/title&gt;\r\n    \t&lt;/head&gt;\r\n    \t&lt;body bgcolor=&quot;green&quot;&gt;\r\n    \t&lt;h1 align=&quot;center&quot;&gt;Welcome to MOTD Application&lt;/h1&gt;\r\n    \t&lt;h1 align=&quot;center&quot;&gt;Version 2.0&lt;/h1&gt;\r\n    \t&lt;h1&gt;Message of the Day: Cloud Computing is Cooler!&lt;/h1&gt;\r\n    \t&lt;h2&gt;The date and time now is &lt;%= new java.util.Date() %&gt;&lt;/h2&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nError:\r\n\r\n    java.util.Date cannot be resolved to a type\r\nError raised for the `java.util.Date()` in the line prior to `&lt;/body&gt;`","title":"Create JSP file in Eclipse using Apache Tomcat","body":"<p>This is my first time using Eclipse and Tomcat.\nI want to add an <code>index,jsp</code> file containing the following HTTML/JSP content.</p>\n<pre><code>&lt;%@ page import java.util.Date()%&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n    &lt;title&gt;Message of the Day Application&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body bgcolor=&quot;green&quot;&gt;\n    &lt;h1 align=&quot;center&quot;&gt;Welcome to MOTD Application&lt;/h1&gt;\n    &lt;h1 align=&quot;center&quot;&gt;Version 2.0&lt;/h1&gt;\n    &lt;h1&gt;Message of the Day: Cloud Computing is Cooler!&lt;/h1&gt;\n    &lt;h2&gt;The date and time now is &lt;%= new java.util.Date() %&gt;&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Error:</p>\n<pre><code>java.util.Date cannot be resolved to a type\n</code></pre>\n<p>Error raised for the <code>java.util.Date()</code> in the line prior to <code>&lt;/body&gt;</code></p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1633089015,"post_id":69402451,"comment_id":122673487,"body_markdown":"If it shouldn&#39;t be fetched why do you map it?","body":"If it shouldn&#39;t be fetched why do you map it?"},{"owner":{"account_id":21664877,"reputation":1,"user_id":15983445,"display_name":"developer"},"score":0,"creation_date":1633092745,"post_id":69402451,"comment_id":122675071,"body_markdown":"@SimonMartinelli, I mapped it to save the data of a candidate in all the associated tables in one go. i.e. repo.save(candidate).","body":"@SimonMartinelli, I mapped it to save the data of a candidate in all the associated tables in one go. i.e. repo.save(candidate)."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1633092814,"post_id":69402451,"comment_id":122675097,"body_markdown":"Your requirement does not match how JPA works.","body":"Your requirement does not match how JPA works."},{"owner":{"account_id":21664877,"reputation":1,"user_id":15983445,"display_name":"developer"},"score":0,"creation_date":1633093041,"post_id":69402451,"comment_id":122675200,"body_markdown":"ok..you mean if we are saving the data via mapping, then it will bring back the data as well everything...is it? No JPA query can help me out","body":"ok..you mean if we are saving the data via mapping, then it will bring back the data as well everything...is it? No JPA query can help me out"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1633093437,"post_id":69402451,"comment_id":122675347,"body_markdown":"That&#39;s the way it works. You have set the fetch type to lazy but then the candidate will contain a proxy that will trigger the load if you access the property","body":"That&#39;s the way it works. You have set the fetch type to lazy but then the candidate will contain a proxy that will trigger the load if you access the property"},{"owner":{"account_id":21664877,"reputation":1,"user_id":15983445,"display_name":"developer"},"score":0,"creation_date":1633093706,"post_id":69402451,"comment_id":122675461,"body_markdown":"just an update, I am now exploring criteria and projections for the same. Also, if someone knows if we have field level annotation in spring boot to skip the particular column (like we have @JsonIgnore in jackson) which would tell hibernate not to fetch that column data.","body":"just an update, I am now exploring criteria and projections for the same. Also, if someone knows if we have field level annotation in spring boot to skip the particular column (like we have @JsonIgnore in jackson) which would tell hibernate not to fetch that column data."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1633093854,"post_id":69402451,"comment_id":122675534,"body_markdown":"There is no annotation for that. Because that way you&#39;d get an incomplete entity and if you for whatever reason try to save the candidate my be deleted (depending on the cascading)","body":"There is no annotation for that. Because that way you&#39;d get an incomplete entity and if you for whatever reason try to save the candidate my be deleted (depending on the cascading)"},{"owner":{"account_id":21664877,"reputation":1,"user_id":15983445,"display_name":"developer"},"score":0,"creation_date":1633094359,"post_id":69402451,"comment_id":122675740,"body_markdown":"Thank you @SimonMartinelli...I appreciate your quick help...will look for a different approach then :)","body":"Thank you @SimonMartinelli...I appreciate your quick help...will look for a different approach then :)"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634192223,"creation_date":1634192223,"answer_id":69565879,"question_id":69402451,"body_markdown":"What you need here is a DTO and I think this is a perfect use case for [Blaze-Persistence Entity Views][1].\r\n\r\nI created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.\r\n\r\nA DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:\r\n\r\n    @EntityView(Candidate.class)\r\n    public interface CandidateDto {\r\n        @IdMapping\r\n        Long getId();\r\n        String getName();\r\n        AddressDto getAddress();\r\n        Set&lt;SkillsDto&gt; getSkills();\r\n\r\n        @EntityView(Address.class)\r\n        interface AddressDto {\r\n            @IdMapping\r\n            Long getId();\r\n            String getName();\r\n        }\r\n        @EntityView(Skills.class)\r\n        interface SkillsDto {\r\n            @IdMapping\r\n            Long getId();\r\n            String getName();\r\n        }\r\n    }\r\n\r\nQuerying is a matter of applying the entity view to a query, the simplest being just a query by id.\r\n\r\n`CandidateDto a = entityViewManager.find(entityManager, CandidateDto.class, id);`\r\n\r\nThe Spring Data integration allows you to use it almost like Spring Data Projections: https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\r\n\r\n    Page&lt;CandidateDto&gt; findAll(Pageable pageable);\r\n\t\r\nThe best part is, it will only fetch the state that is actually necessary!\r\n\r\n  [1]: https://github.com/Blazebit/blaze-persistence#entity-view-usage","title":"JPA Hibernate SQL Query to NOT fetch data from one of the associated tables","body":"<p>What you need here is a DTO and I think this is a perfect use case for <a href=\"https://github.com/Blazebit/blaze-persistence#entity-view-usage\" rel=\"nofollow noreferrer\">Blaze-Persistence Entity Views</a>.</p>\n<p>I created the library to allow easy mapping between JPA models and custom interface or abstract class defined models, something like Spring Data Projections on steroids. The idea is that you define your target structure(domain model) the way you like and map attributes(getters) via JPQL expressions to the entity model.</p>\n<p>A DTO model for your use case could look like the following with Blaze-Persistence Entity-Views:</p>\n<pre><code>@EntityView(Candidate.class)\npublic interface CandidateDto {\n    @IdMapping\n    Long getId();\n    String getName();\n    AddressDto getAddress();\n    Set&lt;SkillsDto&gt; getSkills();\n\n    @EntityView(Address.class)\n    interface AddressDto {\n        @IdMapping\n        Long getId();\n        String getName();\n    }\n    @EntityView(Skills.class)\n    interface SkillsDto {\n        @IdMapping\n        Long getId();\n        String getName();\n    }\n}\n</code></pre>\n<p>Querying is a matter of applying the entity view to a query, the simplest being just a query by id.</p>\n<p><code>CandidateDto a = entityViewManager.find(entityManager, CandidateDto.class, id);</code></p>\n<p>The Spring Data integration allows you to use it almost like Spring Data Projections: <a href=\"https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features\" rel=\"nofollow noreferrer\">https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features</a></p>\n<pre><code>Page&lt;CandidateDto&gt; findAll(Pageable pageable);\n</code></pre>\n<p>The best part is, it will only fetch the state that is actually necessary!</p>\n"}],"owner":{"account_id":21664877,"reputation":1,"user_id":15983445,"display_name":"developer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634192223,"creation_date":1633075277,"question_id":69402451,"body_markdown":"I am trying to make use of JPA query to fetch the data from DB using below query:\r\n\r\n    from Candidate c where c.id = :id\r\nwhere, id = candidate_id(primary key of main table).\r\n\r\nThis query fetch the data from all of its associated tables as well, whereas my requirement is to fetch the data only from 2 of its associated tables. Because 3rd table contains heavy JSON data which degrades the response time of above query.\r\n\r\nI tried using **JOIN**, **Fetch JOIN** of parent with its 2 associated tables but it didn&#39;t work. I was also looking into how we can skip just one column data(column of 3rd table with heavy JSON) while fetching the Candidate data but with no luck.\r\n\r\nIs it possible to achieve it using JPA query or I need to try something else? I am good to save candidate and all its associated tables data in one go using `repo.save(candidate)` but don&#39;t want to fetch one of the related tables data.\r\n\r\nThis is how I have made the association in spring-boot:\r\n\r\nCANDIDATE ENTITY:\r\n\r\n    @OneToOne(cascade = CascadeType.ALL,                              \r\n            fetch = FetchType.LAZY,                                   \r\n            mappedBy = &quot;candidate&quot;)                                    \r\n    @JsonManagedReference                                             \r\n    private Address address;                            \r\n                                                                      \r\n    @OneToMany(cascade = CascadeType.ALL,                             \r\n            fetch = FetchType.LAZY,                                   \r\n            mappedBy = &quot;candidate&quot;)                                    \r\n    @JsonManagedReference                                             \r\n    private Set&lt;Skills&gt; skills= new HashSet&lt;&gt;();                    \r\n                                                                      \r\n    @OneToMany(cascade = CascadeType.ALL,                             \r\n            fetch = FetchType.LAZY,                                   \r\n            mappedBy = &quot;candidate&quot;)                                    \r\n    @JsonManagedReference                                             \r\n    private Set&lt;Prefrence&gt; prefrences = new HashSet&lt;&gt;();\r\n\r\n\r\nADDRESS ENTITY:\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;candidate_id&quot;)\r\n        @JsonBackReference\r\n        private Candidate candidate;\r\n\r\nSKILLS ENTITY:\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;candidate_id&quot;)\r\n        @JsonBackReference\r\n        private Candidate candidate;\r\n    //rest of the fields\r\n\r\nPREFERENCE ENTITY:\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;candidate_id&quot;)\r\n        @JsonBackReference\r\n        private Candidate candidate;\r\n    //rest of the fields\r\n\r\nI don&#39;t want to fetch Preference entity data when using `candidateRepo.findById(id)` It should be always null in fetched Candidate\r\nAttached the diagram\r\n[diagram][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1irF3.png","title":"JPA Hibernate SQL Query to NOT fetch data from one of the associated tables","body":"<p>I am trying to make use of JPA query to fetch the data from DB using below query:</p>\n<pre><code>from Candidate c where c.id = :id\n</code></pre>\n<p>where, id = candidate_id(primary key of main table).</p>\n<p>This query fetch the data from all of its associated tables as well, whereas my requirement is to fetch the data only from 2 of its associated tables. Because 3rd table contains heavy JSON data which degrades the response time of above query.</p>\n<p>I tried using <strong>JOIN</strong>, <strong>Fetch JOIN</strong> of parent with its 2 associated tables but it didn't work. I was also looking into how we can skip just one column data(column of 3rd table with heavy JSON) while fetching the Candidate data but with no luck.</p>\n<p>Is it possible to achieve it using JPA query or I need to try something else? I am good to save candidate and all its associated tables data in one go using <code>repo.save(candidate)</code> but don't want to fetch one of the related tables data.</p>\n<p>This is how I have made the association in spring-boot:</p>\n<p>CANDIDATE ENTITY:</p>\n<pre><code>@OneToOne(cascade = CascadeType.ALL,                              \n        fetch = FetchType.LAZY,                                   \n        mappedBy = &quot;candidate&quot;)                                    \n@JsonManagedReference                                             \nprivate Address address;                            \n                                                                  \n@OneToMany(cascade = CascadeType.ALL,                             \n        fetch = FetchType.LAZY,                                   \n        mappedBy = &quot;candidate&quot;)                                    \n@JsonManagedReference                                             \nprivate Set&lt;Skills&gt; skills= new HashSet&lt;&gt;();                    \n                                                                  \n@OneToMany(cascade = CascadeType.ALL,                             \n        fetch = FetchType.LAZY,                                   \n        mappedBy = &quot;candidate&quot;)                                    \n@JsonManagedReference                                             \nprivate Set&lt;Prefrence&gt; prefrences = new HashSet&lt;&gt;();\n</code></pre>\n<p>ADDRESS ENTITY:</p>\n<pre><code>@OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;candidate_id&quot;)\n    @JsonBackReference\n    private Candidate candidate;\n</code></pre>\n<p>SKILLS ENTITY:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;candidate_id&quot;)\n    @JsonBackReference\n    private Candidate candidate;\n//rest of the fields\n</code></pre>\n<p>PREFERENCE ENTITY:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;candidate_id&quot;)\n    @JsonBackReference\n    private Candidate candidate;\n//rest of the fields\n</code></pre>\n<p>I don't want to fetch Preference entity data when using <code>candidateRepo.findById(id)</code> It should be always null in fetched Candidate\nAttached the diagram\n<a href=\"https://i.stack.imgur.com/1irF3.png\" rel=\"nofollow noreferrer\">diagram</a></p>\n"},{"tags":["java","json","rest","content-type","swagger-ui"],"answers":[{"tags":[],"owner":{"account_id":2488823,"reputation":1044,"user_id":2166750,"accept_rate":56,"display_name":"Bert Verhees"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422698397,"creation_date":1422698397,"answer_id":28250358,"question_id":28245362,"body_markdown":"I found the answer myself. I need to put a mediatype to the @Post-annotation in the Rest resource layer, like this\r\n\r\n    @Post(&quot;json&quot;)\r\n\r\n","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>I found the answer myself. I need to put a mediatype to the @Post-annotation in the Rest resource layer, like this</p>\n\n<pre><code>@Post(\"json\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15176699,"reputation":106,"user_id":10951219,"display_name":"Polyana Pimenta"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1548175810,"creation_date":1548174361,"answer_id":54312503,"question_id":28245362,"body_markdown":"If this helps anyone in the future,\r\n\r\nIn my case the error:\r\n\r\n```\r\n{\r\n  &quot;timestamp&quot;: &quot;2019-01-22T18:23:48.989+0000&quot;,\r\n  &quot;status&quot;: 415,\r\n  &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n  &quot;message&quot;: &quot;Content type &#39;&#39; not supported&quot;,\r\n  &quot;trace&quot;: &quot;org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;&#39; not supported\r\n\r\n  [...]\r\n}\r\n```\r\n\r\nI was putting in the @RequestMapping:\r\n\r\n```\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\n@RequestMapping(value = &quot;/products&quot;, \r\n                consumes= APPLICATION_JSON_VALUE, \r\n                produces = APPLICATION_JSON_VALUE)\r\npublic class ProductResource {\r\n\r\n [...]\r\n\r\n}\r\n```\r\n\r\nBut I realized that what was generating this error was the &#39;consumes&#39;, removing it from @RequestMapping everything worked on the Swagger interface ui.\r\n\r\nright:\r\n\r\n```\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\n@RequestMapping(value = &quot;/products&quot;, \r\n                produces = APPLICATION_JSON_VALUE)\r\npublic class ProductResource {\r\n\r\n [...]\r\n\r\n}\r\n```","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>If this helps anyone in the future,</p>\n\n<p>In my case the error:</p>\n\n<pre><code>{\n  \"timestamp\": \"2019-01-22T18:23:48.989+0000\",\n  \"status\": 415,\n  \"error\": \"Unsupported Media Type\",\n  \"message\": \"Content type '' not supported\",\n  \"trace\": \"org.springframework.web.HttpMediaTypeNotSupportedException: Content type '' not supported\n\n  [...]\n}\n</code></pre>\n\n<p>I was putting in the @RequestMapping:</p>\n\n<pre><code>import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\n@RequestMapping(value = \"/products\", \n                consumes= APPLICATION_JSON_VALUE, \n                produces = APPLICATION_JSON_VALUE)\npublic class ProductResource {\n\n [...]\n\n}\n</code></pre>\n\n<p>But I realized that what was generating this error was the 'consumes', removing it from @RequestMapping everything worked on the Swagger interface ui.</p>\n\n<p>right:</p>\n\n<pre><code>import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\n@RequestMapping(value = \"/products\", \n                produces = APPLICATION_JSON_VALUE)\npublic class ProductResource {\n\n [...]\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10908630,"reputation":11,"user_id":8018693,"display_name":"Mitali Dubey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610557070,"creation_date":1610557070,"answer_id":65706399,"question_id":28245362,"body_markdown":"Was facing the same issue on Swagger Ui, removing &quot;Consumes&quot; from @RequestMapping worked for me as well.","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>Was facing the same issue on Swagger Ui, removing &quot;Consumes&quot; from @RequestMapping worked for me as well.</p>\n"},{"tags":[],"owner":{"account_id":16141794,"reputation":104,"user_id":11652703,"display_name":"Michaeluuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614518108,"creation_date":1614518108,"answer_id":66409468,"question_id":28245362,"body_markdown":"This worked for me \r\n\r\n    headers: &lt;String, String&gt;{\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;,\r\n          },\r\n\r\nInitially, it was like this:\r\n \r\n\r\n        headers: &lt;String, String&gt;{\r\n                &#39;Content-Type&#39;: &#39;application/json; charset=UTF-8&#39;,\r\n          },\r\n\r\nand the later one returned this json from the GO swagger backend,\r\n\r\n&gt; {code: 415, message: unsupported media type &quot;text/plain&quot;, only\r\n&gt; [application/json] are allowed}\r\n\r\n","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>This worked for me</p>\n<pre><code>headers: &lt;String, String&gt;{\n        'Content-Type': 'application/json',\n      },\n</code></pre>\n<p>Initially, it was like this:</p>\n<pre><code>    headers: &lt;String, String&gt;{\n            'Content-Type': 'application/json; charset=UTF-8',\n      },\n</code></pre>\n<p>and the later one returned this json from the GO swagger backend,</p>\n<blockquote>\n<p>{code: 415, message: unsupported media type &quot;text/plain&quot;, only\n[application/json] are allowed}</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5561110,"reputation":11,"user_id":4410309,"display_name":"Tom Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634191730,"creation_date":1634191730,"answer_id":69565808,"question_id":28245362,"body_markdown":"For me, my problem was the combined use of a `@RequestBody`, i.e. originally, my API endpoint looked like:\r\n\r\n&gt; public ResponseEntity&lt;?&gt; editDetails(@RequestBody @Valid\r\n&gt; EditDetailsRequestDto requestDto, @RequestPart @ApiParam(value=&quot;File&quot;)\r\n&gt; MultipartFile businessLicense) { ...\r\n\r\nBut when I changed `@RequestBody` to a bunch of `@RequestParam`s it fixed the 415 error.","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>For me, my problem was the combined use of a <code>@RequestBody</code>, i.e. originally, my API endpoint looked like:</p>\n<blockquote>\n<p>public ResponseEntity&lt;?&gt; editDetails(@RequestBody @Valid\nEditDetailsRequestDto requestDto, @RequestPart @ApiParam(value=&quot;File&quot;)\nMultipartFile businessLicense) { ...</p>\n</blockquote>\n<p>But when I changed <code>@RequestBody</code> to a bunch of <code>@RequestParam</code>s it fixed the 415 error.</p>\n"}],"owner":{"account_id":2488823,"reputation":1044,"user_id":2166750,"accept_rate":56,"display_name":"Bert Verhees"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24908,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":54312503,"answer_count":5,"score":4,"last_activity_date":1634191730,"creation_date":1422655261,"question_id":28245362,"body_markdown":"I have two REST-GUI&#39;s to test my REST-application.\r\nOne is created with swagger, and the other is Advanced REST Client which runs in Chrome.\r\n\r\nI do a post to a service, the Swagger fails with error 415, and the Advanced Rest Client succeeds.\r\n\r\nThe difference between the two is the Content-Type in the request header. The OK-version has Content-Type: text/plain\r\nThe Error version has: Content-Type: application/json\r\n\r\nFor the rest, both are quite the same. I cut off the payload, but they are also exact the same in both cases.\r\n\r\nI don&#39;t know how to change Content-Type in Swagger, if it is possible and if it is needed.\r\n\r\nBelow is information which you could need to help me in this issue. If you need more info, please need.\r\n\r\nThanks very much for any help.\r\n\r\nBest regards.\r\n\r\nThe information look like:\r\n\r\n---------------------\r\n**OK: Advanced REST Client**\r\n\r\n    Remote Address:127.0.0.1:8080\r\n    Request URL:http://localhost:8080/oak-kernel-2.0/oak/archetype\r\n    Request Method:POST\r\n    Status Code:200 OK\r\n\r\n    POST /oak-kernel-2.0/oak/archetype HTTP/1.1\r\n    Host: localhost:8080\r\n    Connection: keep-alive\r\n    Content-Length: 10642\r\n    Origin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo\r\n    User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ....\r\n    Content-Type: text/plain\r\n    Accept: */*\r\n    Accept-Encoding: gzip, deflate\r\n    Accept-Language: en-US,en;q=0.8,nl;q=0.6\r\n    Cookie: _ga=GA1.1.1597438054.1422608427\r\n\r\nPayload (fragment):\r\n    \r\n    {&quot;archetype&quot;: &quot;archetype (adl_version\\u003d1.4)\\n\\top........\r\n\r\nResponse:\r\n\r\n    Accept-Ranges:bytes\r\n    Content-Length:87\r\n    Content-Type:application/json;charset=UTF-8\r\n    Date:Fri, 30 Jan 2015 20:59:49 GMT\r\n    Server:Restlet-Framework/2.2.3\r\n    Vary:Accept-Charset, Accept-Encoding, Accept-Language, Accept\r\n\r\n---------------------\r\n**ERROR: Swagger**\r\n\r\n    Remote Address:127.0.0.1:8080\r\n    Request URL:http://localhost:8080/oak-kernel-2.0/oak/archetype\r\n    Request Method:POST\r\n    Status Code:415 Unsupported Media Type\r\n\r\n    POST /oak-kernel-2.0/oak/archetype HTTP/1.1\r\n    Host: localhost:8080\r\n    Connection: keep-alive\r\n    Content-Length: 10642\r\n    Accept: application/json\r\n    Origin: http://localhost:8080\r\n    User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ....\r\n    Content-Type: application/json\r\n    Referer: http://localhost:8080/swagger/\r\n    Accept-Encoding: gzip, deflate\r\n    Accept-Language: en-US,en;q=0.8,nl;q=0.6\r\n    Cookie: _ga=GA1.1.1597438054.1422608427\r\n\r\nPayload (fragment):\r\n    \r\n    {&quot;archetype&quot;: &quot;archetype (adl_version\\u003d1.4)\\n\\top........\r\n\r\nResponse\r\n    \r\n    Accept-Ranges:bytes\r\n    Content-Length:554\r\n    Content-Type:text/html;charset=UTF-8\r\n    Date:Fri, 30 Jan 2015 21:28:12 GMT\r\n    Server:Restlet-Framework/2.2.3","title":"Swagger 415 Unsupported media type: application/json instead of text/plain in POST request","body":"<p>I have two REST-GUI's to test my REST-application.\nOne is created with swagger, and the other is Advanced REST Client which runs in Chrome.</p>\n\n<p>I do a post to a service, the Swagger fails with error 415, and the Advanced Rest Client succeeds.</p>\n\n<p>The difference between the two is the Content-Type in the request header. The OK-version has Content-Type: text/plain\nThe Error version has: Content-Type: application/json</p>\n\n<p>For the rest, both are quite the same. I cut off the payload, but they are also exact the same in both cases.</p>\n\n<p>I don't know how to change Content-Type in Swagger, if it is possible and if it is needed.</p>\n\n<p>Below is information which you could need to help me in this issue. If you need more info, please need.</p>\n\n<p>Thanks very much for any help.</p>\n\n<p>Best regards.</p>\n\n<p>The information look like:</p>\n\n<hr>\n\n<p><strong>OK: Advanced REST Client</strong></p>\n\n<pre><code>Remote Address:127.0.0.1:8080\nRequest URL:http://localhost:8080/oak-kernel-2.0/oak/archetype\nRequest Method:POST\nStatus Code:200 OK\n\nPOST /oak-kernel-2.0/oak/archetype HTTP/1.1\nHost: localhost:8080\nConnection: keep-alive\nContent-Length: 10642\nOrigin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ....\nContent-Type: text/plain\nAccept: */*\nAccept-Encoding: gzip, deflate\nAccept-Language: en-US,en;q=0.8,nl;q=0.6\nCookie: _ga=GA1.1.1597438054.1422608427\n</code></pre>\n\n<p>Payload (fragment):</p>\n\n<pre><code>{\"archetype\": \"archetype (adl_version\\u003d1.4)\\n\\top........\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>Accept-Ranges:bytes\nContent-Length:87\nContent-Type:application/json;charset=UTF-8\nDate:Fri, 30 Jan 2015 20:59:49 GMT\nServer:Restlet-Framework/2.2.3\nVary:Accept-Charset, Accept-Encoding, Accept-Language, Accept\n</code></pre>\n\n<hr>\n\n<p><strong>ERROR: Swagger</strong></p>\n\n<pre><code>Remote Address:127.0.0.1:8080\nRequest URL:http://localhost:8080/oak-kernel-2.0/oak/archetype\nRequest Method:POST\nStatus Code:415 Unsupported Media Type\n\nPOST /oak-kernel-2.0/oak/archetype HTTP/1.1\nHost: localhost:8080\nConnection: keep-alive\nContent-Length: 10642\nAccept: application/json\nOrigin: http://localhost:8080\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ....\nContent-Type: application/json\nReferer: http://localhost:8080/swagger/\nAccept-Encoding: gzip, deflate\nAccept-Language: en-US,en;q=0.8,nl;q=0.6\nCookie: _ga=GA1.1.1597438054.1422608427\n</code></pre>\n\n<p>Payload (fragment):</p>\n\n<pre><code>{\"archetype\": \"archetype (adl_version\\u003d1.4)\\n\\top........\n</code></pre>\n\n<p>Response</p>\n\n<pre><code>Accept-Ranges:bytes\nContent-Length:554\nContent-Type:text/html;charset=UTF-8\nDate:Fri, 30 Jan 2015 21:28:12 GMT\nServer:Restlet-Framework/2.2.3\n</code></pre>\n"},{"tags":["java","hibernate","jpa","h2"],"comments":[{"owner":{"account_id":29144164,"reputation":12197,"user_id":12361700,"display_name":"Alberto"},"score":0,"creation_date":1632866744,"post_id":69368967,"comment_id":122608972,"body_markdown":"what&#39;s the exception?","body":"what&#39;s the exception?"},{"owner":{"account_id":174940,"reputation":6518,"user_id":404604,"accept_rate":47,"display_name":"Psycho Punch"},"score":0,"creation_date":1632866896,"post_id":69368967,"comment_id":122609001,"body_markdown":"@AlbertoSinigaglia the root cause of the exception is with the `ObjectMapper` complaining that there isn&#39;t a JSON creator/constructor that takes a string. I&#39;m going to upload a demo project to Github in a moment to demonstrate.","body":"@AlbertoSinigaglia the root cause of the exception is with the <code>ObjectMapper</code> complaining that there isn&#39;t a JSON creator/constructor that takes a string. I&#39;m going to upload a demo project to Github in a moment to demonstrate."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634191524,"creation_date":1634191524,"answer_id":69565774,"question_id":69368967,"body_markdown":"Hibernate does not know about the &quot;JSON&quot; SQL data type and how it needs to be handled. Just use text like you do now, that&#39;s totally fine. AFAIU the JSON data type in H2 is just like a domain type with validation i.e. you could replace it with `TEXT CHECK is_json(..)`, so there is not much value in using that particular data type. You could tell hibernate to use `@ColumnTransformer` to append this `FORMAT JSON`, but then you&#39;d have issues with PostgreSQL again. Overall, this cross database testing with proprietary features that Hibernate does not abstract over is simply a mess. I would suggest you simply drop H2 and use PostgreSQL with fsync=off for testing which is quite fast already.","title":"How do I Insert JSON-formatted string to a H2 database using Hibernate?","body":"<p>Hibernate does not know about the &quot;JSON&quot; SQL data type and how it needs to be handled. Just use text like you do now, that's totally fine. AFAIU the JSON data type in H2 is just like a domain type with validation i.e. you could replace it with <code>TEXT CHECK is_json(..)</code>, so there is not much value in using that particular data type. You could tell hibernate to use <code>@ColumnTransformer</code> to append this <code>FORMAT JSON</code>, but then you'd have issues with PostgreSQL again. Overall, this cross database testing with proprietary features that Hibernate does not abstract over is simply a mess. I would suggest you simply drop H2 and use PostgreSQL with fsync=off for testing which is quite fast already.</p>\n"}],"owner":{"account_id":174940,"reputation":6518,"user_id":404604,"accept_rate":47,"display_name":"Psycho Punch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1351,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1634191524,"creation_date":1632866631,"question_id":69368967,"body_markdown":"I have a PostgresSQL production database, but I&#39;m trying to run some of my automated tests against H2 in-memory. I&#39;m trying to persist JSON formatted data to a table but while I&#39;m able to write the data with no complaints, I get conversion exceptions when I read them back. I have no problem doing this in the production Postgres database.\r\n\r\nThe object I&#39;m persisting is structured similar to the following:\r\n\r\n    @Entity\r\n    public class Record {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        @Column(columnDefinition = &quot;jsonb&quot;)\r\n        @Convert(converter = PersonalInfoConverter.class)\r\n        private PersonalInfo personalInfo;\r\n    \r\n        public Record() {}\r\n    \r\n        public Record(PersonalInfo personalInfo) {\r\n            this.personalInfo = personalInfo;\r\n        }\r\n    \r\n    }\r\n\r\nThe `PersonalInfoConverter` just uses a Jackson `ObjectMapper` to de/serialise the object from/to a `String` (pretty standard stuff with `writeValueAsString`, and `readValue`). To get jsonb to work with H2, I used [this trick][0], which basically sets jsonb as an alias for H2&#39;s JSON.\r\n\r\nI kept running into conversion errors when reading records from the database, until I stumbled upon [this question][1], which linked to a [further discussion on Github][2] about inserting JSON formatted strings into H2 tables. It sounds like to be able to get this to work properly, I need to specifically annotate the string inserted into the H2 database. I assumed that, if this were the case, then Hibernate should have handled this properly itself, but it didn&#39;t seem like it works out of the box. How do I configure my code to get this to work?\r\n\r\nIn the meantime, I&#39;m working around this issue by using jsonb as an alias to H2&#39;s text type instead:\r\n\r\n    CREATE TYPE &quot;JSONB&quot; as text;\r\n\r\n\r\nI&#39;ve created [a project to demonstrate the issue][3].\r\n\r\n\r\n[0]: https://stackoverflow.com/a/63813698/404604\r\n[1]: https://stackoverflow.com/q/59677309/404604\r\n[2]: https://github.com/h2database/h2database/issues/2389\r\n[3]: https://github.com/psychopunch/h2-json-jpa-demo","title":"How do I Insert JSON-formatted string to a H2 database using Hibernate?","body":"<p>I have a PostgresSQL production database, but I'm trying to run some of my automated tests against H2 in-memory. I'm trying to persist JSON formatted data to a table but while I'm able to write the data with no complaints, I get conversion exceptions when I read them back. I have no problem doing this in the production Postgres database.</p>\n<p>The object I'm persisting is structured similar to the following:</p>\n<pre><code>@Entity\npublic class Record {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    @Convert(converter = PersonalInfoConverter.class)\n    private PersonalInfo personalInfo;\n\n    public Record() {}\n\n    public Record(PersonalInfo personalInfo) {\n        this.personalInfo = personalInfo;\n    }\n\n}\n</code></pre>\n<p>The <code>PersonalInfoConverter</code> just uses a Jackson <code>ObjectMapper</code> to de/serialise the object from/to a <code>String</code> (pretty standard stuff with <code>writeValueAsString</code>, and <code>readValue</code>). To get jsonb to work with H2, I used <a href=\"https://stackoverflow.com/a/63813698/404604\">this trick</a>, which basically sets jsonb as an alias for H2's JSON.</p>\n<p>I kept running into conversion errors when reading records from the database, until I stumbled upon <a href=\"https://stackoverflow.com/q/59677309/404604\">this question</a>, which linked to a <a href=\"https://github.com/h2database/h2database/issues/2389\" rel=\"nofollow noreferrer\">further discussion on Github</a> about inserting JSON formatted strings into H2 tables. It sounds like to be able to get this to work properly, I need to specifically annotate the string inserted into the H2 database. I assumed that, if this were the case, then Hibernate should have handled this properly itself, but it didn't seem like it works out of the box. How do I configure my code to get this to work?</p>\n<p>In the meantime, I'm working around this issue by using jsonb as an alias to H2's text type instead:</p>\n<pre><code>CREATE TYPE &quot;JSONB&quot; as text;\n</code></pre>\n<p>I've created <a href=\"https://github.com/psychopunch/h2-json-jpa-demo\" rel=\"nofollow noreferrer\">a project to demonstrate the issue</a>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3297248,"reputation":666,"user_id":2774232,"accept_rate":95,"display_name":"corneliu"},"score":0,"creation_date":1634138075,"post_id":69557857,"comment_id":122946767,"body_markdown":"There are several issues with your code. First your method `flipForHeads` should return an `int` . Second, why do you create another instance of your `GVCoin` in your method `flipForHeads` ? It makes no sense. You already have the instance of that object passed as parameter.","body":"There are several issues with your code. First your method <code>flipForHeads</code> should return an <code>int</code> . Second, why do you create another instance of your <code>GVCoin</code> in your method <code>flipForHeads</code> ? It makes no sense. You already have the instance of that object passed as parameter."}],"answers":[{"tags":[],"owner":{"account_id":23005250,"reputation":7,"user_id":17128640,"display_name":"Jay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634191439,"creation_date":1634148587,"answer_id":69560360,"question_id":69557857,"body_markdown":"I managed to figure out the code. On the method call I simply formatted the code as follows: \r\n\r\n    int flips = 0;\r\n\r\n    while (coin.numHeads() &lt; goal) {\r\n        coin.flip();\r\n        flips++ ;\r\n    }\r\n    return flips;\r\n","title":"unable to come up with a solution to use methods calls","body":"<p>I managed to figure out the code. On the method call I simply formatted the code as follows:</p>\n<pre><code>int flips = 0;\n\nwhile (coin.numHeads() &lt; goal) {\n    coin.flip();\n    flips++ ;\n}\nreturn flips;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22514761,"reputation":1572,"user_id":16709163,"display_name":"ray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634152410,"creation_date":1634152410,"answer_id":69561121,"question_id":69557857,"body_markdown":"I suggest you not to use seed when you create `Random`. If you do, the outcome will be always the same.\r\n\r\nHere some working code. I removed some code you wrote which I thought not actually needed. Cheers!\r\n\r\n```\r\nclass GVCoin {\r\n    private Random r;\r\n\r\n    public GVCoin() {\r\n        r = new Random();\r\n    }\r\n\r\n    public GVCoin(int seed) {\r\n        this();\r\n        r = new Random(seed);\r\n    }\r\n\r\n    public boolean flip() {\r\n        return r.nextBoolean();\r\n    }\r\n}\r\n\r\npublic class TossingCoins {\r\n    public int flipForHeads(GVCoin coin, int goal) {\r\n        int count = 0;\r\n        int numberOfHeads = 0;\r\n        while (numberOfHeads &lt; goal) {\r\n            count++;\r\n            boolean isHead = coin.flip();\r\n            if (isHead) {\r\n                numberOfHeads++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        TossingCoins game = new TossingCoins();\r\n        GVCoin coin = new GVCoin();\r\n        int numberOfHeads = 5;\r\n        int totalFlips;\r\n\r\n        totalFlips = game.flipForHeads(coin, numberOfHeads);\r\n        System.out.println(&quot;Total number of flips for &quot;+ numberOfHeads +  &quot; heads: &quot; + totalFlips);\r\n    }\r\n}\r\n```","title":"unable to come up with a solution to use methods calls","body":"<p>I suggest you not to use seed when you create <code>Random</code>. If you do, the outcome will be always the same.</p>\n<p>Here some working code. I removed some code you wrote which I thought not actually needed. Cheers!</p>\n<pre><code>class GVCoin {\n    private Random r;\n\n    public GVCoin() {\n        r = new Random();\n    }\n\n    public GVCoin(int seed) {\n        this();\n        r = new Random(seed);\n    }\n\n    public boolean flip() {\n        return r.nextBoolean();\n    }\n}\n\npublic class TossingCoins {\n    public int flipForHeads(GVCoin coin, int goal) {\n        int count = 0;\n        int numberOfHeads = 0;\n        while (numberOfHeads &lt; goal) {\n            count++;\n            boolean isHead = coin.flip();\n            if (isHead) {\n                numberOfHeads++;\n            }\n        }\n        return count;\n    }\n\n    public static void main(String[] args) {\n        TossingCoins game = new TossingCoins();\n        GVCoin coin = new GVCoin();\n        int numberOfHeads = 5;\n        int totalFlips;\n\n        totalFlips = game.flipForHeads(coin, numberOfHeads);\n        System.out.println(&quot;Total number of flips for &quot;+ numberOfHeads +  &quot; heads: &quot; + totalFlips);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23005250,"reputation":7,"user_id":17128640,"display_name":"Jay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634191439,"creation_date":1634137273,"question_id":69557857,"body_markdown":"I am working on a lab that requires me to return the number it flips it requires to get heads. I used a for loop, and a while loop but it appears that returning the method values along with the loops is not making the code runnable. I would appreciate the assistance. There are two pieces of codes, each different classes calling upon another class. \r\n\r\n    import java.util.*;\r\n    \r\n    public class GVCoin {\r\n        \r\n       // true for heads, false for tails\r\n       private boolean isHeads;\r\n       private int flips, heads;\r\n       private Random r;\r\n    \r\n       public GVCoin() {\r\n         r = new Random();\r\n         heads = 0;\r\n         flips = 0;\r\n         isHeads = true;     \r\n       }\r\n    \r\n       public void flip() {\r\n         isHeads = r.nextBoolean();  // Flip the coin by randomly choosing true / false\r\n         flips++;  // Increment flip count\r\n         if(isHeads){\r\n             heads++; // Increment heads count if current flip results in heads\r\n         }\r\n       }\r\n        \r\n       public boolean isHeads() {\r\n         return isHeads; // Return true if coin is currently heads\r\n       }    \r\n    \r\n       public String toString() {\r\n         String str;\r\n         str = &quot;Flips: &quot; + flips + &quot; Heads: &quot; + heads + &quot; isHeads: &quot; + isHeads;\r\n         return str;  // Return String representation of important values\r\n       }    \r\n       \r\n       public int numFlips() {\r\n         return flips;   // Return number of total flips\r\n       }\r\n        \r\n       public int numHeads() {\r\n         return heads;   // Return number of total heads   \r\n       }\r\n        \r\n    \r\n       public int numTails() {\r\n         return flips - heads; // Return number of total tails   \r\n       }\r\n    \r\n       public void setToHeads(boolean h) {\r\n         isHeads = h; \r\n       }\r\n    \r\n       public GVCoin(int seed) {  // Create the coin with a random seed\r\n         this();\r\n         r = new Random(seed);\r\n       }    \r\n    }\r\n\r\n\r\n    public class TossingCoins {\r\n       \r\n       public int flipForHeads(GVCoin coin, int goal) {\r\n          \r\n          int i = 0;\r\n          \r\n          do { \r\n             coin.flip();\r\n             i++;\r\n             \r\n          } while (i &lt; goal);\r\n          \r\n          \r\n        return i;\r\n            \r\n       }\r\n       \r\n       public static void main(String[] args) {\r\n          TossingCoins game = new TossingCoins();\r\n          GVCoin coin = new GVCoin(15); // Create a GVCoin object with seed value 15\r\n          int numHeads = 100;   // Desire 100 heads\r\n          int totalFlips;\r\n          \r\n          totalFlips = game.flipForHeads(coin, numHeads);\r\n          System.out.println(&quot;Total number of flips for 100 heads: &quot; + totalFlips);\r\n       }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"unable to come up with a solution to use methods calls","body":"<p>I am working on a lab that requires me to return the number it flips it requires to get heads. I used a for loop, and a while loop but it appears that returning the method values along with the loops is not making the code runnable. I would appreciate the assistance. There are two pieces of codes, each different classes calling upon another class.</p>\n<pre><code>import java.util.*;\n\npublic class GVCoin {\n    \n   // true for heads, false for tails\n   private boolean isHeads;\n   private int flips, heads;\n   private Random r;\n\n   public GVCoin() {\n     r = new Random();\n     heads = 0;\n     flips = 0;\n     isHeads = true;     \n   }\n\n   public void flip() {\n     isHeads = r.nextBoolean();  // Flip the coin by randomly choosing true / false\n     flips++;  // Increment flip count\n     if(isHeads){\n         heads++; // Increment heads count if current flip results in heads\n     }\n   }\n    \n   public boolean isHeads() {\n     return isHeads; // Return true if coin is currently heads\n   }    \n\n   public String toString() {\n     String str;\n     str = &quot;Flips: &quot; + flips + &quot; Heads: &quot; + heads + &quot; isHeads: &quot; + isHeads;\n     return str;  // Return String representation of important values\n   }    \n   \n   public int numFlips() {\n     return flips;   // Return number of total flips\n   }\n    \n   public int numHeads() {\n     return heads;   // Return number of total heads   \n   }\n    \n\n   public int numTails() {\n     return flips - heads; // Return number of total tails   \n   }\n\n   public void setToHeads(boolean h) {\n     isHeads = h; \n   }\n\n   public GVCoin(int seed) {  // Create the coin with a random seed\n     this();\n     r = new Random(seed);\n   }    \n}\n\n\npublic class TossingCoins {\n   \n   public int flipForHeads(GVCoin coin, int goal) {\n      \n      int i = 0;\n      \n      do { \n         coin.flip();\n         i++;\n         \n      } while (i &lt; goal);\n      \n      \n    return i;\n        \n   }\n   \n   public static void main(String[] args) {\n      TossingCoins game = new TossingCoins();\n      GVCoin coin = new GVCoin(15); // Create a GVCoin object with seed value 15\n      int numHeads = 100;   // Desire 100 heads\n      int totalFlips;\n      \n      totalFlips = game.flipForHeads(coin, numHeads);\n      System.out.println(&quot;Total number of flips for 100 heads: &quot; + totalFlips);\n   }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":1009321,"reputation":10671,"user_id":1022260,"accept_rate":53,"display_name":"mikeb"},"score":0,"creation_date":1632928974,"post_id":69379057,"comment_id":122627292,"body_markdown":"You need to fix your id generation strategy - marking as duplicate.","body":"You need to fix your id generation strategy - marking as duplicate."},{"owner":{"account_id":1009321,"reputation":10671,"user_id":1022260,"accept_rate":53,"display_name":"mikeb"},"score":0,"creation_date":1632928981,"post_id":69379057,"comment_id":122627296,"body_markdown":"Does this answer your question? [JPA primary key auto generate](https://stackoverflow.com/questions/1817625/jpa-primary-key-auto-generate)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1817625/jpa-primary-key-auto-generate\">JPA primary key auto generate</a>"},{"owner":{"account_id":2674027,"reputation":407,"user_id":2310811,"display_name":"Philipp"},"score":0,"creation_date":1632929824,"post_id":69379057,"comment_id":122627721,"body_markdown":"Maybe i dont get what you mean, but i dont generate my ids. In my case, it is necessary that i set a custom id (`playerId`)","body":"Maybe i dont get what you mean, but i dont generate my ids. In my case, it is necessary that i set a custom id (<code>playerId</code>)"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1632998497,"post_id":69379057,"comment_id":122647165,"body_markdown":"Likely a better approach would be to **retry** the unit of work.","body":"Likely a better approach would be to <b>retry</b> the unit of work."},{"owner":{"account_id":2674027,"reputation":407,"user_id":2310811,"display_name":"Philipp"},"score":0,"creation_date":1632998678,"post_id":69379057,"comment_id":122647233,"body_markdown":"@MarkRotteveel You mean i could catch the DataIntegrityViolationException and just try again and then it would update the existing record? This would be possible, but the scenario happens quite often. So i would catch this exception a lot of times and it wouldnt be an &#39;Execption&#39; anymore, but part of my business logic. That doesnt seem right to me and also probably bad for performance.","body":"@MarkRotteveel You mean i could catch the DataIntegrityViolationException and just try again and then it would update the existing record? This would be possible, but the scenario happens quite often. So i would catch this exception a lot of times and it wouldnt be an &#39;Execption&#39; anymore, but part of my business logic. That doesnt seem right to me and also probably bad for performance."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1632998972,"post_id":69379057,"comment_id":122647354,"body_markdown":"Then you should look into why two different threads are working on the same player at the same time. That sounds like a serious flaw to me. Or you need to switch to using something like SQL `MERGE`.","body":"Then you should look into why two different threads are working on the same player at the same time. That sounds like a serious flaw to me. Or you need to switch to using something like SQL <code>MERGE</code>."},{"owner":{"account_id":2674027,"reputation":407,"user_id":2310811,"display_name":"Philipp"},"score":0,"creation_date":1633000345,"post_id":69379057,"comment_id":122647851,"body_markdown":"The two different threads are each triggered by the connection to a different websocket. In some cases the frontend app connects to these websockets at the same time. But i will look into `MERGE` and maybe use a native query with that. Tank you!","body":"The two different threads are each triggered by the connection to a different websocket. In some cases the frontend app connects to these websockets at the same time. But i will look into <code>MERGE</code> and maybe use a native query with that. Tank you!"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634190820,"creation_date":1634190820,"answer_id":69565695,"question_id":69379057,"body_markdown":"You could use `@SQLInsert` for this purpose to change the SQL that is used for the insert operation. Depending on your database, it might be possible to switch to some database native conflict/merge handling. See https://stackoverflow.com/questions/64754720/hibernate-transactions-and-concurrency-using-attachdirty-saveorupdate/64764412#64764412","title":"Insert/update entitiy from two different threads at the same time","body":"<p>You could use <code>@SQLInsert</code> for this purpose to change the SQL that is used for the insert operation. Depending on your database, it might be possible to switch to some database native conflict/merge handling. See <a href=\"https://stackoverflow.com/questions/64754720/hibernate-transactions-and-concurrency-using-attachdirty-saveorupdate/64764412#64764412\">Hibernate Transactions and Concurrency Using attachDirty (saveOrUpdate)</a></p>\n"}],"owner":{"account_id":2674027,"reputation":407,"user_id":2310811,"display_name":"Philipp"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1502,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1634190820,"creation_date":1632928276,"question_id":69379057,"body_markdown":"I have the following method that adds a player to the database or updates it, should it already exist:\r\n\r\n\r\n```lang-java\r\n@Transactional(isolation = Isolation.SERIALIZABLE)\r\npublic Player addOrUpdatePlayer(String playerId, String playerName) {\r\n    Optional&lt;Player&gt; playerOptional = playerRepository.findById(playerId);\r\n    if (playerOptional.isPresent()) {\r\n        Player player = playerOptional.get();\r\n        player.setName(playerName);\r\n        return playerRepository.save(player);\r\n    } else {\r\n        Player newPlayer = Player.builder()\r\n            .id(playerId)\r\n            .name(playerName)\r\n            .build();\r\n        return playerRepository.save(newPlayer);\r\n    }\r\n}\r\n```\r\n\r\nThis method is sometimes called by two different threads and therefore executed two times at almost the same time. Sometimes I get the following exception:\r\n\r\n&gt; org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index\r\n&gt; or primary key violation: &quot;PUBLIC.PRIMARY_KEY_B42 ON PUBLIC.PLAYER(ID)\r\n&gt; VALUES 3&quot;;\r\n\r\nThis makes sense to me because both methods check in the beginning if the player is in the database and it is not in both cases. Then both try to insert and the slower one runs into the constraint.\r\n\r\nI want to lock the player table during the execution of this method, so if it is called multiple times, they have to wait for each other.\r\n\r\nMy player repository looks like this:\r\n\r\n``` lang-java\r\npublic interface PlayerRepository extends JpaRepository&lt;Player, String&gt; {\r\n\r\n    @Lock(LockModeType.PESSIMISTIC_WRITE)\r\n    Optional&lt;Player&gt; findById(String var1);\r\n\r\n    @Lock(LockModeType.PESSIMISTIC_WRITE)\r\n    &lt;S extends Player&gt; S save(S var1);\r\n}\r\n```\r\nI also tried to increase isolation level on the transaction:\r\n\r\n    @Transactional(isolation = Isolation.SERIALIZABLE)\r\n\r\nHowever, I still get this exception, so apparently the inserts are still running concurrently. What am I doing wrong? Or is there a different way to achieve what i am trying here?\r\n\r\nAfter some more research, I think I understand why neither `@Lock` nor `@Transactional(isolation = Isolation.SERIALIZABLE)` are doing anything. They basically work by locking records in a database table for the duration of the transaction, but since there are no records to lock in my case, its not doing anything.\r\n\r\nSo, I guess I would have to lock the whole table for that transaction. Is that even possible with Spring JPA?\r\nAnd since that doesn&#39;t seem smart performance wise, is there an other way to tackle this problem?\r\n\r\n","title":"Insert/update entitiy from two different threads at the same time","body":"<p>I have the following method that adds a player to the database or updates it, should it already exist:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(isolation = Isolation.SERIALIZABLE)\npublic Player addOrUpdatePlayer(String playerId, String playerName) {\n    Optional&lt;Player&gt; playerOptional = playerRepository.findById(playerId);\n    if (playerOptional.isPresent()) {\n        Player player = playerOptional.get();\n        player.setName(playerName);\n        return playerRepository.save(player);\n    } else {\n        Player newPlayer = Player.builder()\n            .id(playerId)\n            .name(playerName)\n            .build();\n        return playerRepository.save(newPlayer);\n    }\n}\n</code></pre>\n<p>This method is sometimes called by two different threads and therefore executed two times at almost the same time. Sometimes I get the following exception:</p>\n<blockquote>\n<p>org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index\nor primary key violation: &quot;PUBLIC.PRIMARY_KEY_B42 ON PUBLIC.PLAYER(ID)\nVALUES 3&quot;;</p>\n</blockquote>\n<p>This makes sense to me because both methods check in the beginning if the player is in the database and it is not in both cases. Then both try to insert and the slower one runs into the constraint.</p>\n<p>I want to lock the player table during the execution of this method, so if it is called multiple times, they have to wait for each other.</p>\n<p>My player repository looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface PlayerRepository extends JpaRepository&lt;Player, String&gt; {\n\n    @Lock(LockModeType.PESSIMISTIC_WRITE)\n    Optional&lt;Player&gt; findById(String var1);\n\n    @Lock(LockModeType.PESSIMISTIC_WRITE)\n    &lt;S extends Player&gt; S save(S var1);\n}\n</code></pre>\n<p>I also tried to increase isolation level on the transaction:</p>\n<pre><code>@Transactional(isolation = Isolation.SERIALIZABLE)\n</code></pre>\n<p>However, I still get this exception, so apparently the inserts are still running concurrently. What am I doing wrong? Or is there a different way to achieve what i am trying here?</p>\n<p>After some more research, I think I understand why neither <code>@Lock</code> nor <code>@Transactional(isolation = Isolation.SERIALIZABLE)</code> are doing anything. They basically work by locking records in a database table for the duration of the transaction, but since there are no records to lock in my case, its not doing anything.</p>\n<p>So, I guess I would have to lock the whole table for that transaction. Is that even possible with Spring JPA?\nAnd since that doesn't seem smart performance wise, is there an other way to tackle this problem?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":2324765,"reputation":3694,"user_id":2039546,"display_name":"İsmail Y."},"score":0,"creation_date":1632931672,"post_id":69379797,"comment_id":122628614,"body_markdown":"Can you share your `SomeView` entity? I think you have a structural problem here, I think your problem is not cache related.","body":"Can you share your <code>SomeView</code> entity? I think you have a structural problem here, I think your problem is not cache related."},{"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"score":0,"creation_date":1632932144,"post_id":69379797,"comment_id":122628839,"body_markdown":"Hibernate logging has to be also enabled in hibernate configuration.\n\nAdd lines\n\nhibernate.show_sql=true\nhibernate.format_sql=true. And see the queries getting printed on the logger / console.","body":"Hibernate logging has to be also enabled in hibernate configuration.  Add lines  hibernate.show_sql=true hibernate.format_sql=true. And see the queries getting printed on the logger / console."},{"owner":{"account_id":4718218,"reputation":113,"user_id":3816852,"display_name":"UnnameDSoS"},"score":0,"creation_date":1632941655,"post_id":69379797,"comment_id":122632524,"body_markdown":"I did enable the logger and yes the correct sql query is being run! \n@İsmail Y it is a simple view mapped to an entity","body":"I did enable the logger and yes the correct sql query is being run!  @İsmail Y it is a simple view mapped to an entity"}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632932249,"creation_date":1632932249,"answer_id":69380077,"question_id":69379797,"body_markdown":"This is main feature of Hibernate. \r\n\r\nIf you look something up and change new found entity, changes will be saved to database without any additional code.\r\n\r\nIf you don&#39;t want that you need to use thing called &quot;stateless session&quot;. But please warn everyone around about it, because otherwise you end up with many surprised people. This &quot;stateless session&quot; isn&#39;t very popular thing and no one will expect you use it.","title":"Mandatory Flush for a repository","body":"<p>This is main feature of Hibernate.</p>\n<p>If you look something up and change new found entity, changes will be saved to database without any additional code.</p>\n<p>If you don't want that you need to use thing called &quot;stateless session&quot;. But please warn everyone around about it, because otherwise you end up with many surprised people. This &quot;stateless session&quot; isn't very popular thing and no one will expect you use it.</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634190623,"creation_date":1634190623,"answer_id":69565667,"question_id":69379797,"body_markdown":"If you don&#39;t want this caching to happen, you can immediately detach the entity after reading it i.e.:\r\n\r\n    SomeView someView1 = repo.findByIdAndLanguageId(id,lid1);\r\n    entityManager.detach(someView1);","title":"Mandatory Flush for a repository","body":"<p>If you don't want this caching to happen, you can immediately detach the entity after reading it i.e.:</p>\n<pre><code>SomeView someView1 = repo.findByIdAndLanguageId(id,lid1);\nentityManager.detach(someView1);\n</code></pre>\n"}],"owner":{"account_id":4718218,"reputation":113,"user_id":3816852,"display_name":"UnnameDSoS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634190623,"creation_date":1632931173,"question_id":69379797,"body_markdown":"Situation: JPA, SpringBoot, Hibernate\r\n```\r\npublic interface ViewRepository\r\n\t\textends JpaRepository&lt;SomeView, Long&gt;, JpaSpecificationExecutor&lt;SomeView&gt; {\r\n\r\n\tOptional&lt;SomeView&gt; findByIdAndLanguageId(Long id,Long lid);\r\n}\r\n```\r\n```\r\n//service\r\nSomeView getSomeView(){\r\nSomeView someView1 = repo.findByIdAndLanguageId(id,lid1);\r\n....\r\n//now get in it in different lang id\r\nSomeView someView2 = repo.findByIdAndLanguageId(id,lid2);\r\n\r\n//the problem here is that the value for someView2is the same as someView1 since hibernate cash this.\r\n}\r\n```\r\n\r\nIs there an annotation / way to prevent this caching for any call to this repository only?(not application wide turning of the caching) at service level or repository level ....\r\n ","title":"Mandatory Flush for a repository","body":"<p>Situation: JPA, SpringBoot, Hibernate</p>\n<pre><code>public interface ViewRepository\n        extends JpaRepository&lt;SomeView, Long&gt;, JpaSpecificationExecutor&lt;SomeView&gt; {\n\n    Optional&lt;SomeView&gt; findByIdAndLanguageId(Long id,Long lid);\n}\n</code></pre>\n<pre><code>//service\nSomeView getSomeView(){\nSomeView someView1 = repo.findByIdAndLanguageId(id,lid1);\n....\n//now get in it in different lang id\nSomeView someView2 = repo.findByIdAndLanguageId(id,lid2);\n\n//the problem here is that the value for someView2is the same as someView1 since hibernate cash this.\n}\n</code></pre>\n<p>Is there an annotation / way to prevent this caching for any call to this repository only?(not application wide turning of the caching) at service level or repository level ....</p>\n"},{"tags":["java","sql-server","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":1,"creation_date":1632756996,"post_id":69349324,"comment_id":122573313,"body_markdown":"Run a SQL trace (Extended Events or Profiler) to capture the actual query sent to SQL Server.","body":"Run a SQL trace (Extended Events or Profiler) to capture the actual query sent to SQL Server."},{"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"score":0,"creation_date":1632765752,"post_id":69349324,"comment_id":122576668,"body_markdown":"Thanks. Seems like the query sent to the SQL server is indeed different. I have added the query received from profiler and added my findings. Why is the query malformed?","body":"Thanks. Seems like the query sent to the SQL server is indeed different. I have added the query received from profiler and added my findings. Why is the query malformed?"},{"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"score":0,"creation_date":1632766347,"post_id":69349324,"comment_id":122576867,"body_markdown":"Is the column name &#39;from&#39; a keyword in any way? I couldn&#39;t find a reference for the same. Also the same detachedcriteria was working fine on hibernate 3 and spring 3, but is facing the above issue on hibernate 4 and spring 4.1.6.","body":"Is the column name &#39;from&#39; a keyword in any way? I couldn&#39;t find a reference for the same. Also the same detachedcriteria was working fine on hibernate 3 and spring 3, but is facing the above issue on hibernate 4 and spring 4.1.6."},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":0,"creation_date":1632766430,"post_id":69349324,"comment_id":122576893,"body_markdown":"This is the problem column in the query, which as 2 `AS` clauses:` `ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_`.","body":"This is the problem column in the query, which as 2 <code>AS</code> clauses:` <code>ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_</code>."},{"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"score":0,"creation_date":1632767092,"post_id":69349324,"comment_id":122577138,"body_markdown":"Yes, hibernate is creating the query. The generated query should have been shomething like `ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr_, this_.msgfrom as msgfrom9_0_`. How can this be rectified?","body":"Yes, hibernate is creating the query. The generated query should have been shomething like <code>ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr_, this_.msgfrom as msgfrom9_0_</code>. How can this be rectified?"},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":0,"creation_date":1632771686,"post_id":69349324,"comment_id":122578759,"body_markdown":"Looks like a hibernate bug. Are you using the latest? Maybe someone can suggest a work-around.","body":"Looks like a hibernate bug. Are you using the latest? Maybe someone can suggest a work-around."},{"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"score":0,"creation_date":1632771938,"post_id":69349324,"comment_id":122578840,"body_markdown":"I was thinking the same. I am using Hibernate 4.0 now. But I wont be able to update to hibernate 4.3 as it will break jtds driver and more. I just hope there is a version below 4.3 that can work in my case. Thanks for the help. I wouldn&#39;t have ever though that the trace query would be different from the one generated by hibernate criteria.","body":"I was thinking the same. I am using Hibernate 4.0 now. But I wont be able to update to hibernate 4.3 as it will break jtds driver and more. I just hope there is a version below 4.3 that can work in my case. Thanks for the help. I wouldn&#39;t have ever though that the trace query would be different from the one generated by hibernate criteria."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634190219,"creation_date":1634190219,"answer_id":69565617,"question_id":69349324,"body_markdown":"Looks like a bug, but you can debug `org.hibernate.dialect.pagination.SQLServer2005LimitHandler#processSql` to see what goes wrong and even apply a custom workaround as you can replace the `LimitHandler` in a custom `Dialect`.","title":"org.hibernate.exception.GenericJDBCException: Incorrect syntax near the keyword &#39;as&#39;","body":"<p>Looks like a bug, but you can debug <code>org.hibernate.dialect.pagination.SQLServer2005LimitHandler#processSql</code> to see what goes wrong and even apply a custom workaround as you can replace the <code>LimitHandler</code> in a custom <code>Dialect</code>.</p>\n"}],"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634190219,"creation_date":1632756711,"question_id":69349324,"body_markdown":"Below is the exception thrown when a detached criteria is executed :\r\n\r\n    org.springframework.orm.hibernate4.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [n/a]; SQL state [S1000]; error code [156]; Incorrect syntax near the keyword &#39;as&#39;.; nested exception is org.hibernate.exception.GenericJDBCException: Incorrect syntax near the keyword &#39;as&#39;.\r\n    2021-09-28 20:42:03,882 [mailTimerFactory-1] TRACE org.springframework.transaction.interceptor.TransactionInterceptor  - Completing transaction for [com.test.service.impl.MailManagerImpl.processMails]\r\n\r\n\r\nI have debugged with hibernate sourcecode and got the sql query being generated as I couldn&#39;t get to print the sql for the criteria even after turning showsql to true. Below is the query generated :\r\n\r\n    [org.hibernate.loader.criteria.CriteriaLoader(select this_.cid as cid9_0_, this_.msgfrom as msgfrom9_0_, this_.msgto as msgto9_0_, this_.msgcc as msgcc9_0_, this_.msubject as msubject9_0_, this_.body as body9_0_, this_.createDate as createDate9_0_, this_.mailDate as mailDate9_0_, this_.expiryDate as expiryDate9_0_, this_.mailsent as mailsent9_0_, this_.remarks as remarks9_0_, this_.html as html9_0_ from mail_queue this_ where this_.mailsent=? and (this_.mailDate is null or this_.mailDate&lt;=?) and (this_.expiryDate is null or this_.expiryDate&gt;=?))]\r\n\r\nI have copied the select query and was able to successfully execute it in SQL Server which makes me wonder what was causing the issue. If the column names contain any SQL keyword then it wouldn&#39;t be executed, right? There are no spaces in the column names as well. Any help would be appreciated.\r\n\r\n\r\nEdit : Below is the sql trace :\r\n\r\n\r\n    declare @p1 int\r\n    set @p1=NULL\r\n    exec sp_prepare @p1 output,N&#39;@P0 bit,@P1 datetime,@P2 datetime,@P3 int,@P4 int&#39;,N&#39;WITH query AS (select this_.cid as cid9_0_, this_.ms, ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_, this_.msgto as msgto9_0_, this_.msgcc as msgcc9_0_, this_.msubject as msubject9_0_, this_.body as body9_0_, this_.createdate as createdate9_0_, this_.maildate as maildate9_0_, this_.expirydate as expirydate9_0_, this_.mailsent as mailsent9_0_, this_.remarks as remarks9_0_, this_.html as html9_0_ from [mail_queue] this_ where this_.mailsent= @P0  and (this_.maildate is null or this_.maildate&lt;= @P1 ) and (this_.expirydate is null or this_.expirydate&gt;= @P2 )) SELECT * FROM query WHERE __hibernate_row_nr__ &gt;=  @P3  AND __hibernate_row_nr__ &lt;  @P4 &#39;,1\r\n    select @p1\r\n\r\n\r\nThe query is malformed at `ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_`. How can I solve this? It turns out that removing the firstresult and maxresults parameters fixes this :\r\n\r\n&gt; original\r\n\r\n    getHibernateTemplate().findByCriteria(criteria, 0, 250)\r\n\r\n&gt; after removing\r\n\r\n    getHibernateTemplate().findByCriteria(criteria)\r\n\r\nI believe the `ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr_` part is added because of the adding firstresult and maxresults parameters and hibernate is using the rownumber to filter the number of records. I cannot remove the limit parameters as it would fetch all the records in the table. I have used the parameters in many other detached criteria but strangely it is malformed in this case. How can I resolve this? \r\n\r\n","title":"org.hibernate.exception.GenericJDBCException: Incorrect syntax near the keyword &#39;as&#39;","body":"<p>Below is the exception thrown when a detached criteria is executed :</p>\n<pre><code>org.springframework.orm.hibernate4.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [n/a]; SQL state [S1000]; error code [156]; Incorrect syntax near the keyword 'as'.; nested exception is org.hibernate.exception.GenericJDBCException: Incorrect syntax near the keyword 'as'.\n2021-09-28 20:42:03,882 [mailTimerFactory-1] TRACE org.springframework.transaction.interceptor.TransactionInterceptor  - Completing transaction for [com.test.service.impl.MailManagerImpl.processMails]\n</code></pre>\n<p>I have debugged with hibernate sourcecode and got the sql query being generated as I couldn't get to print the sql for the criteria even after turning showsql to true. Below is the query generated :</p>\n<pre><code>[org.hibernate.loader.criteria.CriteriaLoader(select this_.cid as cid9_0_, this_.msgfrom as msgfrom9_0_, this_.msgto as msgto9_0_, this_.msgcc as msgcc9_0_, this_.msubject as msubject9_0_, this_.body as body9_0_, this_.createDate as createDate9_0_, this_.mailDate as mailDate9_0_, this_.expiryDate as expiryDate9_0_, this_.mailsent as mailsent9_0_, this_.remarks as remarks9_0_, this_.html as html9_0_ from mail_queue this_ where this_.mailsent=? and (this_.mailDate is null or this_.mailDate&lt;=?) and (this_.expiryDate is null or this_.expiryDate&gt;=?))]\n</code></pre>\n<p>I have copied the select query and was able to successfully execute it in SQL Server which makes me wonder what was causing the issue. If the column names contain any SQL keyword then it wouldn't be executed, right? There are no spaces in the column names as well. Any help would be appreciated.</p>\n<p>Edit : Below is the sql trace :</p>\n<pre><code>declare @p1 int\nset @p1=NULL\nexec sp_prepare @p1 output,N'@P0 bit,@P1 datetime,@P2 datetime,@P3 int,@P4 int',N'WITH query AS (select this_.cid as cid9_0_, this_.ms, ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_, this_.msgto as msgto9_0_, this_.msgcc as msgcc9_0_, this_.msubject as msubject9_0_, this_.body as body9_0_, this_.createdate as createdate9_0_, this_.maildate as maildate9_0_, this_.expirydate as expirydate9_0_, this_.mailsent as mailsent9_0_, this_.remarks as remarks9_0_, this_.html as html9_0_ from [mail_queue] this_ where this_.mailsent= @P0  and (this_.maildate is null or this_.maildate&lt;= @P1 ) and (this_.expirydate is null or this_.expirydate&gt;= @P2 )) SELECT * FROM query WHERE __hibernate_row_nr__ &gt;=  @P3  AND __hibernate_row_nr__ &lt;  @P4 ',1\nselect @p1\n</code></pre>\n<p>The query is malformed at <code>ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr__gfrom as msgfrom9_0_</code>. How can I solve this? It turns out that removing the firstresult and maxresults parameters fixes this :</p>\n<blockquote>\n<p>original</p>\n</blockquote>\n<pre><code>getHibernateTemplate().findByCriteria(criteria, 0, 250)\n</code></pre>\n<blockquote>\n<p>after removing</p>\n</blockquote>\n<pre><code>getHibernateTemplate().findByCriteria(criteria)\n</code></pre>\n<p>I believe the <code>ROW_NUMBER() OVER (ORDER BY CURRENT_TIMESTAMP) as __hibernate_row_nr_</code> part is added because of the adding firstresult and maxresults parameters and hibernate is using the rownumber to filter the number of records. I cannot remove the limit parameters as it would fetch all the records in the table. I have used the parameters in many other detached criteria but strangely it is malformed in this case. How can I resolve this?</p>\n"},{"tags":["java","exception","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634190208,"creation_date":1634190208,"answer_id":69565615,"question_id":69561631,"body_markdown":"`ExceptionOccurred` gives you a local reference to the exception object. So it&#39;s not going to be affected by `ExceptionClear` unless `ExceptionClear` also clears the local reference table, which would be weird (neither ART nor Dalvik does that FWIW).\r\n\r\nI think you can safely assume that `exc` is still valid after `ExceptionClear`. And if it isn&#39;t, you&#39;d notice it because you&#39;d get some kind of JNI error for using a stale local reference.\r\n\r\n","title":"Is the exception object returned by ExceptionOccurred() still valid after ExceptionClear()?","body":"<p><code>ExceptionOccurred</code> gives you a local reference to the exception object. So it's not going to be affected by <code>ExceptionClear</code> unless <code>ExceptionClear</code> also clears the local reference table, which would be weird (neither ART nor Dalvik does that FWIW).</p>\n<p>I think you can safely assume that <code>exc</code> is still valid after <code>ExceptionClear</code>. And if it isn't, you'd notice it because you'd get some kind of JNI error for using a stale local reference.</p>\n"}],"owner":{"account_id":135551,"reputation":10091,"user_id":338479,"accept_rate":80,"display_name":"Edward Falk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69565615,"answer_count":1,"score":0,"last_activity_date":1634190208,"creation_date":1634155128,"question_id":69561631,"body_markdown":"In my C++ code, I want to test for a Java exception, get information about it, and handle it locally:\r\n\r\n    jobject exc = env-&gt;ExceptionOccurred();\r\n    if (exc) {\r\n        env-&gt;ExceptionClear();\r\n        jclass javaLang = env-&gt;FindClass(&quot;java/lang/Object&quot;);\r\n        jmethodID j_toString = env-&gt;GetMethodID(javaLang, &quot;toString&quot;, &quot;()Ljava/lang/String;&quot;);\r\n\r\n        auto s = (jstring)(env-&gt;CallObjectMethod(exc, j_toString));\r\n        ...\r\n    }\r\n\r\nI call `ExceptionClear()` right near the top because the call to `FindClass()` will cause a &quot;JNI FindClass called with pending exception&quot; error if I don&#39;t. But if I do this, will the exception object still be valid?","title":"Is the exception object returned by ExceptionOccurred() still valid after ExceptionClear()?","body":"<p>In my C++ code, I want to test for a Java exception, get information about it, and handle it locally:</p>\n<pre><code>jobject exc = env-&gt;ExceptionOccurred();\nif (exc) {\n    env-&gt;ExceptionClear();\n    jclass javaLang = env-&gt;FindClass(&quot;java/lang/Object&quot;);\n    jmethodID j_toString = env-&gt;GetMethodID(javaLang, &quot;toString&quot;, &quot;()Ljava/lang/String;&quot;);\n\n    auto s = (jstring)(env-&gt;CallObjectMethod(exc, j_toString));\n    ...\n}\n</code></pre>\n<p>I call <code>ExceptionClear()</code> right near the top because the call to <code>FindClass()</code> will cause a &quot;JNI FindClass called with pending exception&quot; error if I don't. But if I do this, will the exception object still be valid?</p>\n"},{"tags":["java","android","listview"],"comments":[{"owner":{"account_id":17597721,"reputation":647,"user_id":12768337,"display_name":"Rudra Rokaya"},"score":0,"creation_date":1634183557,"post_id":69564269,"comment_id":122958583,"body_markdown":"I repopulate your code and it works fine in the emulator (Pixel 4 XL API Level 29). try to run your app on a real device.","body":"I repopulate your code and it works fine in the emulator (Pixel 4 XL API Level 29). try to run your app on a real device."},{"owner":{"account_id":23026672,"reputation":1,"user_id":17146789,"display_name":"Saint Blue"},"score":0,"creation_date":1634203386,"post_id":69564269,"comment_id":122964198,"body_markdown":"i tried using the emulator that you said but still not showing and i don&#39;t have any android devices that&#39;s why i can&#39;t run on a real device. Anyway thanks a lot!","body":"i tried using the emulator that you said but still not showing and i don&#39;t have any android devices that&#39;s why i can&#39;t run on a real device. Anyway thanks a lot!"}],"answers":[{"tags":[],"owner":{"account_id":21192804,"reputation":1215,"user_id":15584964,"display_name":"RaBaKa 78"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634183750,"creation_date":1634183750,"answer_id":69564896,"question_id":69564269,"body_markdown":"Heyy try replacing your `RelativeLayout` with `LinearLayout`, or remove `weightSum` because `weightSum` cannot be used with `RelativeLayout` ","title":"Why does listview is not showing on my emulator?","body":"<p>Heyy try replacing your <code>RelativeLayout</code> with <code>LinearLayout</code>, or remove <code>weightSum</code> because <code>weightSum</code> cannot be used with <code>RelativeLayout</code></p>\n"},{"tags":[],"owner":{"account_id":15893944,"reputation":51,"user_id":11468186,"display_name":"absolute_vijju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634189990,"creation_date":1634189668,"answer_id":69565536,"question_id":69564269,"body_markdown":"Replace with this code.\r\n-----------------------\r\n**Note: Whenever you give textSize, give it in sp not in Pixel.**\r\n\r\n\r\nactivty_stress.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;#83BCD4&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:text=&quot;Find your relaxation&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n    \r\n        &lt;ListView\r\n            android:id=&quot;@+id/listview&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;70dp&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nstress.java\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            ListView listView = findViewById(R.id.listview);\r\n    \r\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n            list.add(&quot;Therapy1&quot;);\r\n            list.add(&quot;Therapy2&quot;);\r\n            list.add(&quot;Therapy3&quot;);\r\n            list.add(&quot;Therapy4&quot;);\r\n            list.add(&quot;Therapy5&quot;);\r\n    \r\n            ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, list);\r\n            listView.setAdapter(arrayAdapter);\r\n    \r\n            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                    if (position == 0) {\r\n                        //clicked therapy1\r\n    //                    startActivity(new Intent(stress.this,Therapy1.class));\r\n                    } else if (position == 1) {\r\n                        //clicked therapy2\r\n                    } else {\r\n    \r\n                    }\r\n                }\r\n            });\r\n    \r\n        }\r\n\r\nOutput:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y9OVs.png","title":"Why does listview is not showing on my emulator?","body":"<h2>Replace with this code.</h2>\n<p><strong>Note: Whenever you give textSize, give it in sp not in Pixel.</strong></p>\n<p>activty_stress.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;#83BCD4&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView4&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:text=&quot;Find your relaxation&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textSize=&quot;30sp&quot; /&gt;\n\n    &lt;ListView\n        android:id=&quot;@+id/listview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;70dp&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>stress.java</p>\n<pre><code>    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ListView listView = findViewById(R.id.listview);\n\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        list.add(&quot;Therapy1&quot;);\n        list.add(&quot;Therapy2&quot;);\n        list.add(&quot;Therapy3&quot;);\n        list.add(&quot;Therapy4&quot;);\n        list.add(&quot;Therapy5&quot;);\n\n        ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, list);\n        listView.setAdapter(arrayAdapter);\n\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                if (position == 0) {\n                    //clicked therapy1\n//                    startActivity(new Intent(stress.this,Therapy1.class));\n                } else if (position == 1) {\n                    //clicked therapy2\n                } else {\n\n                }\n            }\n        });\n\n    }\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/y9OVs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y9OVs.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23026672,"reputation":1,"user_id":17146789,"display_name":"Saint Blue"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634189990,"creation_date":1634177077,"question_id":69564269,"body_markdown":"I&#39;m making simple listview of therapies and the list is not showing on the emulator. I&#39;ve upgraded and downgraded my api from 22 to 30 and change relative layout to linear layout but still the list is not showing.\r\n\r\n*activty_stress.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout \r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:weightSum=&quot;9&quot;\r\n    android:background=&quot;#83BCD4&quot;\r\n    tools:context=&quot;.stress&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView4&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:text=&quot;Find your relaxation&quot;\r\n        android:textColor=&quot;@color/white&quot;\r\n        android:textSize=&quot;18pt&quot; /&gt;\r\n\r\n    &lt;ListView\r\n        android:id=&quot;@+id/listview&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;70dp&quot;/&gt;\r\n\r\n     &lt;/RelativeLayout&gt;\r\n\r\n*stress.java*\r\n\r\n       @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_stress);\r\n\r\n        ListView listView = findViewById(R.id.listview);\r\n\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(&quot;Therapy1&quot;);\r\n        list.add(&quot;Therapy2&quot;);\r\n        list.add(&quot;Therapy3&quot;);\r\n        list.add(&quot;Therapy4&quot;);\r\n        list.add(&quot;Therapy5&quot;);\r\n\r\n        ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1,list);\r\n        listView.setAdapter(arrayAdapter);\r\n        \r\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                if (position==0){\r\n                    //clicked therapy1\r\n                    startActivity(new Intent(stress.this,Therapy1.class));\r\n                } else if (position==1){\r\n                    //clicked therapy2\r\n                }else{\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n    ","title":"Why does listview is not showing on my emulator?","body":"<p>I'm making simple listview of therapies and the list is not showing on the emulator. I've upgraded and downgraded my api from 22 to 30 and change relative layout to linear layout but still the list is not showing.</p>\n<p><em>activty_stress.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout \nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:orientation=&quot;vertical&quot;\nandroid:weightSum=&quot;9&quot;\nandroid:background=&quot;#83BCD4&quot;\ntools:context=&quot;.stress&quot;&gt;\n\n&lt;TextView\n    android:id=&quot;@+id/textView4&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_centerHorizontal=&quot;true&quot;\n    android:text=&quot;Find your relaxation&quot;\n    android:textColor=&quot;@color/white&quot;\n    android:textSize=&quot;18pt&quot; /&gt;\n\n&lt;ListView\n    android:id=&quot;@+id/listview&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginTop=&quot;70dp&quot;/&gt;\n\n &lt;/RelativeLayout&gt;\n</code></pre>\n<p><em>stress.java</em></p>\n<pre><code>   @Override\n    protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_stress);\n\n    ListView listView = findViewById(R.id.listview);\n\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    list.add(&quot;Therapy1&quot;);\n    list.add(&quot;Therapy2&quot;);\n    list.add(&quot;Therapy3&quot;);\n    list.add(&quot;Therapy4&quot;);\n    list.add(&quot;Therapy5&quot;);\n\n    ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1,list);\n    listView.setAdapter(arrayAdapter);\n    \n    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n            if (position==0){\n                //clicked therapy1\n                startActivity(new Intent(stress.this,Therapy1.class));\n            } else if (position==1){\n                //clicked therapy2\n            }else{\n\n            }\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","spring-boot","junit5","rest"],"comments":[{"owner":{"account_id":1465191,"reputation":1315,"user_id":1378268,"accept_rate":65,"display_name":"Kode Charlie"},"score":0,"creation_date":1634182960,"post_id":69564693,"comment_id":122958518,"body_markdown":"Do you have a `maven` project?  If so, it would help to paste your `pom.xml` file here.  Also, be careful with the `SpringRunner` plus Junit5.  Probably you can pull it off, but you need to have the right set up in your project.  For JUnit5, I use the test harness from &quot;junit-jupiter&quot;, and specifically, `@SpringJUnitWebConfig` along with `MockMvc`.","body":"Do you have a <code>maven</code> project?  If so, it would help to paste your <code>pom.xml</code> file here.  Also, be careful with the <code>SpringRunner</code> plus Junit5.  Probably you can pull it off, but you need to have the right set up in your project.  For JUnit5, I use the test harness from &quot;junit-jupiter&quot;, and specifically, <code>@SpringJUnitWebConfig</code> along with <code>MockMvc</code>."},{"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"score":0,"creation_date":1634184055,"post_id":69564693,"comment_id":122958655,"body_markdown":"@KodeCharlie yep, i use maven. Is there a way to make the expect the same as the actual or vice versa? i dont know convert it.","body":"@KodeCharlie yep, i use maven. Is there a way to make the expect the same as the actual or vice versa? i dont know convert it."},{"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"score":0,"creation_date":1634184748,"post_id":69564693,"comment_id":122958750,"body_markdown":"i try replace SpringRunner with SpringJunitWebConfig, but error\nis still the same","body":"i try replace SpringRunner with SpringJunitWebConfig, but error is still the same"},{"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"score":0,"creation_date":1634185503,"post_id":69564693,"comment_id":122958857,"body_markdown":"I just did this, it&#39;s ok, but I don&#39;t know if it&#39;s the right test standard\n`    \n@Test\n    void getAll() throws Exception {\n        RequestBuilder request = get(&quot;/&quot;);\n        MvcResult result = mvc.perform(request).andReturn();\n        assertEquals(200, result.getResponse().getStatus());\n\n        Object lExamples = mExampleRepository.findAll();\n        assertEquals(new Gson().toJson(lExamples), result.getResponse().getContentAsString());\n    }\n`","body":"I just did this, it&#39;s ok, but I don&#39;t know if it&#39;s the right test standard `     @Test     void getAll() throws Exception {         RequestBuilder request = get(&quot;/&quot;);         MvcResult result = mvc.perform(request).andReturn();         assertEquals(200, result.getResponse().getStatus());          Object lExamples = mExampleRepository.findAll();         assertEquals(new Gson().toJson(lExamples), result.getResponse().getContentAsString());     } `"}],"answers":[{"tags":[],"owner":{"account_id":23027726,"reputation":84,"user_id":17147685,"display_name":"The blank"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634189855,"creation_date":1634189855,"answer_id":69565559,"question_id":69564693,"body_markdown":"Json doesn&#39;t store objects inside content. In this case, you store MExample in database but spring boot help you to convert object to json in http response.\r\nYou have 3 methods to solve this problem:\r\n1. Convert lExamples to Json, use toString() method to make comparison\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    Object lExamples = mExampleRepository.findAll();\r\n    JSONObject json = new JSONObject(lExamples);\r\n    assertEquals(json.toString(), result.getResponse().getContentAsString());\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n2. Install your data without using Object\r\n\r\n2. Convert Http response to List&lt;lExamples&gt; object\r\n","title":"Junit 5 with rest api (get all)","body":"<p>Json doesn't store objects inside content. In this case, you store MExample in database but spring boot help you to convert object to json in http response.\nYou have 3 methods to solve this problem:</p>\n<ol>\n<li>Convert lExamples to Json, use toString() method to make comparison</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Object lExamples = mExampleRepository.findAll();\nJSONObject json = new JSONObject(lExamples);\nassertEquals(json.toString(), result.getResponse().getContentAsString());</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<ol start=\"2\">\n<li><p>Install your data without using Object</p>\n</li>\n<li><p>Convert Http response to List object</p>\n</li>\n</ol>\n"}],"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":607,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69565559,"answer_count":1,"score":-1,"last_activity_date":1634189855,"creation_date":1634181618,"question_id":69564693,"body_markdown":"I&#39;m learning junit 5 for rest api.\r\n\r\nUnit test for get method (get all instance) and this my code.\r\n\r\nmy data \r\n\r\n```\r\n[{&quot;id&quot;:1,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\r\n{&quot;id&quot;:2,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\r\n{&quot;id&quot;:3,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\r\n{&quot;id&quot;:4,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\r\n{&quot;id&quot;:5,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\r\n{&quot;id&quot;:6,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6}]\r\n```\r\n\r\nExampleController\r\n```\r\n@RestController\r\npublic class ExampleController {\r\n\r\n    @Autowired\r\n    MExampleRepository mExampleRepository;\r\n\r\n    @GetMapping(&quot;/hello&quot;)\r\n    public String hello(@RequestParam(name = &quot;name&quot;, defaultValue = &quot;World&quot;)  String name) {\r\n        return String.format(&quot;Hello, %s&quot;, name);\r\n    }\r\n\r\n    /**\r\n     * get all\r\n     * @return\r\n     */\r\n    @GetMapping(&quot;/&quot;)\r\n    public List&lt;MExample&gt; getAll() {\r\n        return mExampleRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\nExampleControllerTest\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\nclass ExampleControllerIntTest {\r\n    @Autowired\r\n    private MockMvc mvc;\r\n\r\n    @Autowired\r\n    private MExampleRepository mExampleRepository;\r\n\r\n    @Test\r\n    void testHelloWithName() throws Exception {\r\n        mvc.perform(get(&quot;/hello?name=Dan&quot;))\r\n                .andExpect(content().string(&quot;Hello, Dan&quot;));\r\n    }\r\n\r\n    //junit test\r\n\r\n    //get all example\r\n\r\n    @Test\r\n    void getAll() throws Exception {\r\n        RequestBuilder request = get(&quot;/&quot;);\r\n        MvcResult result = mvc.perform(request).andReturn();\r\n        assertEquals(200, result.getResponse().getStatus());\r\n\r\n        Object lExamples = mExampleRepository.findAll();\r\n        assertEquals(lExamples, result.getResponse().getContentAsString());\r\n    }\r\n}\r\n```\r\n\r\nand then result when run test\r\n\r\n```\r\nExpected :[MExample(id=1, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=2, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=3, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=4, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=5, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=6, example2=2, example3=3, example4=4, example5=5, example6=6)]\r\nActual   :[{&quot;id&quot;:1,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:2,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:3,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:4,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:5,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:6,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6}]\r\n\r\n```\r\n\r\nI want it pass for this test but i dont known what to do.\r\n\r\nSorry if the question is not clear, my english is a bit bad\r\n\r\nAnyone help me, thank you.\r\n","title":"Junit 5 with rest api (get all)","body":"<p>I'm learning junit 5 for rest api.</p>\n<p>Unit test for get method (get all instance) and this my code.</p>\n<p>my data</p>\n<pre><code>[{&quot;id&quot;:1,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\n{&quot;id&quot;:2,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\n{&quot;id&quot;:3,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\n{&quot;id&quot;:4,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\n{&quot;id&quot;:5,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},\n{&quot;id&quot;:6,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6}]\n</code></pre>\n<p>ExampleController</p>\n<pre><code>@RestController\npublic class ExampleController {\n\n    @Autowired\n    MExampleRepository mExampleRepository;\n\n    @GetMapping(&quot;/hello&quot;)\n    public String hello(@RequestParam(name = &quot;name&quot;, defaultValue = &quot;World&quot;)  String name) {\n        return String.format(&quot;Hello, %s&quot;, name);\n    }\n\n    /**\n     * get all\n     * @return\n     */\n    @GetMapping(&quot;/&quot;)\n    public List&lt;MExample&gt; getAll() {\n        return mExampleRepository.findAll();\n    }\n}\n</code></pre>\n<p>ExampleControllerTest</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\nclass ExampleControllerIntTest {\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private MExampleRepository mExampleRepository;\n\n    @Test\n    void testHelloWithName() throws Exception {\n        mvc.perform(get(&quot;/hello?name=Dan&quot;))\n                .andExpect(content().string(&quot;Hello, Dan&quot;));\n    }\n\n    //junit test\n\n    //get all example\n\n    @Test\n    void getAll() throws Exception {\n        RequestBuilder request = get(&quot;/&quot;);\n        MvcResult result = mvc.perform(request).andReturn();\n        assertEquals(200, result.getResponse().getStatus());\n\n        Object lExamples = mExampleRepository.findAll();\n        assertEquals(lExamples, result.getResponse().getContentAsString());\n    }\n}\n</code></pre>\n<p>and then result when run test</p>\n<pre><code>Expected :[MExample(id=1, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=2, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=3, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=4, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=5, example2=2, example3=3, example4=4, example5=5, example6=6), MExample(id=6, example2=2, example3=3, example4=4, example5=5, example6=6)]\nActual   :[{&quot;id&quot;:1,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:2,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:3,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:4,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:5,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6},{&quot;id&quot;:6,&quot;example2&quot;:2,&quot;example3&quot;:3,&quot;example4&quot;:4,&quot;example5&quot;:5,&quot;example6&quot;:6}]\n\n</code></pre>\n<p>I want it pass for this test but i dont known what to do.</p>\n<p>Sorry if the question is not clear, my english is a bit bad</p>\n<p>Anyone help me, thank you.</p>\n"},{"tags":["java","selenium","selenium-webdriver","automation","ui-automation"],"answers":[{"tags":[],"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634189163,"creation_date":1634187827,"answer_id":69565323,"question_id":69565186,"body_markdown":"You should not declare like this,\r\n\r\n    private final WebElement notificationTitle = driver.findElement(By.xpath(&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;));\r\n\r\n\r\nwhenever the class is initializing, driver will start find this element, then resulted as **NoSuchElementException**\r\n\r\n\r\nDeclare the by and call it whereever you need,\r\n\r\n    private final By notificationTitleTxt = By.xpath(&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;);\r\n\r\n\r\ncall this like on your method,\r\n\r\n    driver.findElement(notificationTitleTxt).getText();\r\n\r\n\r\n","title":"Selenium No such element exception despite not using or calling the WebElement","body":"<p>You should not declare like this,</p>\n<pre><code>private final WebElement notificationTitle = driver.findElement(By.xpath(&quot;//a[@class='pmd-list-title']&quot;));\n</code></pre>\n<p>whenever the class is initializing, driver will start find this element, then resulted as <strong>NoSuchElementException</strong></p>\n<p>Declare the by and call it whereever you need,</p>\n<pre><code>private final By notificationTitleTxt = By.xpath(&quot;//a[@class='pmd-list-title']&quot;);\n</code></pre>\n<p>call this like on your method,</p>\n<pre><code>driver.findElement(notificationTitleTxt).getText();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9207703,"reputation":28723,"user_id":9444073,"display_name":"cruisepandey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634189454,"creation_date":1634189099,"answer_id":69565479,"question_id":69565186,"body_markdown":"What I would do here is \r\n\r\n1. Use try-catch \r\n\r\n2. Use findElements\r\n\r\nSample code for `findElements` \r\n\r\n\r\n    private final List&lt;WebElement&gt; notificationTitle = driver.findElements(By.xpath(&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;));\r\n\r\nand in your **instance initialize** block \r\n\r\n\r\n    public String getNotificationTitle()\r\n    {\r\n        String title = notificationTitle.get(0).getText();\r\n        return title;\r\n    }\r\n\r\n\r\nor why not simply try and catch block  ?\r\n\r\n\r\n    try {\r\n         private final WebElement notificationTitle = \r\n           driver.findElement(By.xpath(&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;));\r\n       }\r\n       catch(ExceptionInInitializerError ex){\r\n           ex.printStackTrace();\r\n       }\r\n         \r\n\r\n   ","title":"Selenium No such element exception despite not using or calling the WebElement","body":"<p>What I would do here is</p>\n<ol>\n<li><p>Use try-catch</p>\n</li>\n<li><p>Use findElements</p>\n</li>\n</ol>\n<p>Sample code for <code>findElements</code></p>\n<pre><code>private final List&lt;WebElement&gt; notificationTitle = driver.findElements(By.xpath(&quot;//a[@class='pmd-list-title']&quot;));\n</code></pre>\n<p>and in your <strong>instance initialize</strong> block</p>\n<pre><code>public String getNotificationTitle()\n{\n    String title = notificationTitle.get(0).getText();\n    return title;\n}\n</code></pre>\n<p>or why not simply try and catch block  ?</p>\n<pre><code>try {\n     private final WebElement notificationTitle = \n       driver.findElement(By.xpath(&quot;//a[@class='pmd-list-title']&quot;));\n   }\n   catch(ExceptionInInitializerError ex){\n       ex.printStackTrace();\n   }\n     \n</code></pre>\n"}],"owner":{"account_id":22636254,"reputation":327,"user_id":16813026,"display_name":"enthusiasticCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":893,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1637620065,"accepted_answer_id":69565323,"answer_count":2,"score":-1,"last_activity_date":1634189454,"creation_date":1634186595,"question_id":69565186,"body_markdown":"Now I am executing a test case but am getting a NoSuchElementException despite not using that element in my test case. Here is my implementation.\r\n\r\n**This is my page layer**\r\n```\r\n\r\n    public class NotificationsPage extends BasePage {\r\n    \r\n    \tprivate final WebElement datePicker = \r\n    \t\t\tdriver.findElement(By.xpath(&quot;(//input[@aria-label=&#39;Password2&#39;])[1]&quot;));\r\n    \tpublic String textBoxData = &quot;&quot;;\r\n    \tpublic String date1 = &quot;&quot;;\r\n    \tpublic String date2 = &quot;&quot;;\r\n    \tprivate final WebElement notificationTitle = driver.findElement(By.xpath(&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;));\r\n    \t\r\n    \t{\r\n    \t\ttextBoxData = datePicker.getAttribute(&quot;value&quot;);\r\n    \t\tString[] parts = textBoxData.split(&quot;-&quot;);\r\n    \t\tdate1 = parts[0].trim();\r\n    \t\tdate2 = parts[1].trim();\r\n    \t}\r\n    \t\r\n    \tpublic String getNotificationTitle()\r\n    \t{\r\n    \t\tString title = notificationTitle.getText();\r\n    \t\treturn title;\r\n    \t}\r\n    }\r\n\r\n```\r\n\r\n**This is my test case I&#39;m executing**\r\n```\r\n\r\n    @Test\r\n    \tpublic void testDateSettings(Map&lt;String, String&gt; map) throws Exception\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tnew LoginPage().clickLoginButton().setUserName(map.get(&quot;username&quot;)).setPassword(map.get(&quot;password&quot;)).clickSubmit()\r\n    \t\t\t.clickHighlights();\r\n    \t\t}\r\n    \t\tcatch(ExceptionInInitializerError ex)\r\n    \t\t{\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \t\t\r\n    \t\tNotificationsPage notificationsPage = new NotificationsPage();\r\n    \t\tString systemDate = DateTimeUtils.getSystemDate();\r\n    \t\tSystem.out.println(&quot;System date:: &quot;+systemDate);\r\n    \t\tSystem.out.println(&quot;Date1:: &quot;+notificationsPage.date1);\r\n    \t\tSystem.out.println(&quot;Date2:: &quot;+notificationsPage.date2);\r\n    \t\tAssertions.assertThat(systemDate).isBetween(notificationsPage.date1, notificationsPage.date2);\r\n    \t}\r\n\r\n```\r\n\r\nNow as you can see I am nowhere using the element **notificationTitle** in this particular test case but it is still giving me NoSuchElementException for that WebElement. Here is the stack trace\r\n\r\n```\r\norg.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//a[@class=&#39;pmd-list-title&#39;]&quot;}\r\n  (Session info: chrome=94.0.4606.81)\r\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/no_such_element.html\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DESKTOP-R3JT7MO&#39;, ip: &#39;192.168.0.103&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;16.0.1&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 94.0.4606.81, chrome: {chromedriverVersion: 94.0.4606.61 (418b78f5838ed..., userDataDir: C:\\Users\\CHINMA~1\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:65399}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\nSession ID: b059694161fd932a928a64dc2c56d31d\r\n*** Element info: {Using=xpath, value=//a[@class=&#39;pmd-list-title&#39;]}\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:323)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:428)\r\n\tat org.openqa.selenium.By$ByXPath.findElement(By.java:353)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:315)\r\n\tat com.digicorp.pageobjects.NotificationsPage.&lt;init&gt;(NotificationsPage.java:15)\r\n\tat com.digicorp.pageobjects.HomePage.clickHighlights(HomePage.java:77)\r\n\tat com.digicorp.testcases.TC_HighlightsSection.testDateSettings(TC_HighlightsSection.java:37)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\r\n\tat org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:598)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\r\n\tat org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\r\n\tat org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\r\n\tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\r\n\tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.testng.TestRunner.privateRun(TestRunner.java:794)\r\n\tat org.testng.TestRunner.run(TestRunner.java:596)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n\tat org.testng.TestNG.runSuites(TestNG.java:1063)\r\n\tat org.testng.TestNG.run(TestNG.java:1031)\r\n\tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n\tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n\r\n```\r\n\r\nCan someone shed some light on where I am making a mistake.","title":"Selenium No such element exception despite not using or calling the WebElement","body":"<p>Now I am executing a test case but am getting a NoSuchElementException despite not using that element in my test case. Here is my implementation.</p>\n<p><strong>This is my page layer</strong></p>\n<pre><code>\n    public class NotificationsPage extends BasePage {\n    \n        private final WebElement datePicker = \n                driver.findElement(By.xpath(&quot;(//input[@aria-label='Password2'])[1]&quot;));\n        public String textBoxData = &quot;&quot;;\n        public String date1 = &quot;&quot;;\n        public String date2 = &quot;&quot;;\n        private final WebElement notificationTitle = driver.findElement(By.xpath(&quot;//a[@class='pmd-list-title']&quot;));\n        \n        {\n            textBoxData = datePicker.getAttribute(&quot;value&quot;);\n            String[] parts = textBoxData.split(&quot;-&quot;);\n            date1 = parts[0].trim();\n            date2 = parts[1].trim();\n        }\n        \n        public String getNotificationTitle()\n        {\n            String title = notificationTitle.getText();\n            return title;\n        }\n    }\n\n</code></pre>\n<p><strong>This is my test case I'm executing</strong></p>\n<pre><code>\n    @Test\n        public void testDateSettings(Map&lt;String, String&gt; map) throws Exception\n        {\n            try\n            {\n                new LoginPage().clickLoginButton().setUserName(map.get(&quot;username&quot;)).setPassword(map.get(&quot;password&quot;)).clickSubmit()\n                .clickHighlights();\n            }\n            catch(ExceptionInInitializerError ex)\n            {\n                ex.printStackTrace();\n            }\n            \n            NotificationsPage notificationsPage = new NotificationsPage();\n            String systemDate = DateTimeUtils.getSystemDate();\n            System.out.println(&quot;System date:: &quot;+systemDate);\n            System.out.println(&quot;Date1:: &quot;+notificationsPage.date1);\n            System.out.println(&quot;Date2:: &quot;+notificationsPage.date2);\n            Assertions.assertThat(systemDate).isBetween(notificationsPage.date1, notificationsPage.date2);\n        }\n\n</code></pre>\n<p>Now as you can see I am nowhere using the element <strong>notificationTitle</strong> in this particular test case but it is still giving me NoSuchElementException for that WebElement. Here is the stack trace</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//a[@class='pmd-list-title']&quot;}\n  (Session info: chrome=94.0.4606.81)\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/no_such_element.html\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DESKTOP-R3JT7MO', ip: '192.168.0.103', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '16.0.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 94.0.4606.81, chrome: {chromedriverVersion: 94.0.4606.61 (418b78f5838ed..., userDataDir: C:\\Users\\CHINMA~1\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:65399}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\nSession ID: b059694161fd932a928a64dc2c56d31d\n*** Element info: {Using=xpath, value=//a[@class='pmd-list-title']}\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:323)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:428)\n    at org.openqa.selenium.By$ByXPath.findElement(By.java:353)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:315)\n    at com.digicorp.pageobjects.NotificationsPage.&lt;init&gt;(NotificationsPage.java:15)\n    at com.digicorp.pageobjects.HomePage.clickHighlights(HomePage.java:77)\n    at com.digicorp.testcases.TC_HighlightsSection.testDateSettings(TC_HighlightsSection.java:37)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\n    at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:598)\n    at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\n    at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\n    at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\n    at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.testng.TestRunner.privateRun(TestRunner.java:794)\n    at org.testng.TestRunner.run(TestRunner.java:596)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\n\n</code></pre>\n<p>Can someone shed some light on where I am making a mistake.</p>\n"},{"tags":["java","android","android-studio","gradle","android-gradle-plugin"],"answers":[{"tags":[],"owner":{"account_id":6873078,"reputation":9765,"user_id":5282585,"accept_rate":78,"display_name":"nhoxbypass"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1508571108,"creation_date":1508423526,"answer_id":46832405,"question_id":46832288,"body_markdown":"Open your Android Studio **`Project Explorer`**, expand **`External Libraries`** sections. Right click and **`Show in Files/Explorer`**","title":"Where does gradle save dependencies&#39; jars?","body":"<p>Open your Android Studio <strong><code>Project Explorer</code></strong>, expand <strong><code>External Libraries</code></strong> sections. Right click and <strong><code>Show in Files/Explorer</code></strong></p>\n"},{"tags":[],"owner":{"account_id":7661956,"reputation":800,"user_id":5806975,"display_name":"FabioStein"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1508423621,"creation_date":1508423621,"answer_id":46832435,"question_id":46832288,"body_markdown":"Generally, you can find in:&lt;br&gt;\r\n\r\n    %USERPROFILE%/.gradle/caches/modules-2/files-2.1","title":"Where does gradle save dependencies&#39; jars?","body":"<p>Generally, you can find in:<br></p>\n\n<pre><code>%USERPROFILE%/.gradle/caches/modules-2/files-2.1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"down_vote_count":0,"up_vote_count":64,"is_accepted":true,"score":64,"last_activity_date":1566861232,"creation_date":1527487150,"answer_id":50559977,"question_id":46832288,"body_markdown":"***BY DEFAULT***\r\n\r\nLinux:\r\n\r\n    ~/.gradle/caches/modules-2/files-2.1\r\nWindows: \r\n\r\n    %USERPROFILE%/.gradle/caches/modules-2/files-2.1\r\n\r\nMac:\r\n\r\n    ~/.gradle/caches/modules-2/files-2.1\r\n\r\nAndroid:\r\n\r\n    no idea... can anyone edit?\r\n\r\n***SETTING TO SOMETHING ELSE***\r\n\r\nBut you can override these default settings by setting `GRADLE_USER_HOME`.  The latter environment variable, if set, is **NOT** the same as `GRADLE_HOME`, which is the path to the directory containing the `bin/` directory for the Gradle version your system is using at the command prompt (NB instead of invoking Gradle directly at the command line most people seem to use the [Gradle wrapper][1] however: `$ ./gradlew build`).\r\n\r\n***RUNNING GRADLE IN AN IDE***\r\n\r\nIDEs may be using a different version and be storing dependency jars somewhere else.  I only know Eclipse.  Having installed Buildship (&quot;Eclipse Plug-ins for Gradle&quot;) the place to go is Window --&gt; Preferences --&gt; Gradle.  There is a box here for you to specify &quot;Gradle User Home&quot;.  Mine is currently empty.  I presume it is using the system `GRADLE_USER_HOME` (which I have indeed set)... but I haven&#39;t bothered checking: although it is possible to run Gradle tasks from within Eclipse to me it is more handy to run Gradle commands in a separate Terminal (*nix)/Command Prompt window (&#39;Doze). \r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/gradle_wrapper.html","title":"Where does gradle save dependencies&#39; jars?","body":"<p><strong><em>BY DEFAULT</em></strong></p>\n\n<p>Linux:</p>\n\n<pre><code>~/.gradle/caches/modules-2/files-2.1\n</code></pre>\n\n<p>Windows: </p>\n\n<pre><code>%USERPROFILE%/.gradle/caches/modules-2/files-2.1\n</code></pre>\n\n<p>Mac:</p>\n\n<pre><code>~/.gradle/caches/modules-2/files-2.1\n</code></pre>\n\n<p>Android:</p>\n\n<pre><code>no idea... can anyone edit?\n</code></pre>\n\n<p><strong><em>SETTING TO SOMETHING ELSE</em></strong></p>\n\n<p>But you can override these default settings by setting <code>GRADLE_USER_HOME</code>.  The latter environment variable, if set, is <strong>NOT</strong> the same as <code>GRADLE_HOME</code>, which is the path to the directory containing the <code>bin/</code> directory for the Gradle version your system is using at the command prompt (NB instead of invoking Gradle directly at the command line most people seem to use the <a href=\"https://docs.gradle.org/current/userguide/gradle_wrapper.html\" rel=\"noreferrer\">Gradle wrapper</a> however: <code>$ ./gradlew build</code>).</p>\n\n<p><strong><em>RUNNING GRADLE IN AN IDE</em></strong></p>\n\n<p>IDEs may be using a different version and be storing dependency jars somewhere else.  I only know Eclipse.  Having installed Buildship (\"Eclipse Plug-ins for Gradle\") the place to go is Window --> Preferences --> Gradle.  There is a box here for you to specify \"Gradle User Home\".  Mine is currently empty.  I presume it is using the system <code>GRADLE_USER_HOME</code> (which I have indeed set)... but I haven't bothered checking: although it is possible to run Gradle tasks from within Eclipse to me it is more handy to run Gradle commands in a separate Terminal (*nix)/Command Prompt window ('Doze). </p>\n"},{"tags":[],"owner":{"account_id":5201756,"reputation":1971,"user_id":4160889,"accept_rate":74,"display_name":"ForeverLearner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634189305,"creation_date":1634112941,"answer_id":69551968,"question_id":46832288,"body_markdown":"The format for the jar is `~/.gradle/caches/modules-2/files-2.1/&lt;com.org.pkg&gt;/&lt;uuid&gt;/`\r\n\r\nIf you are using Intellij IDEA, then browse the jar on the Project window \r\n[![enter image description here][1]][1]\r\n\r\n\r\nRight-click on the jar and open in terminal.\r\n\r\nRun the `pwd` command in terminal to find the location.\r\n\r\nVideo guide - [How to find dependent jar on local when using gradle][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vKAcu.png\r\n  [2]: https://youtu.be/6qLOdL849Y0","title":"Where does gradle save dependencies&#39; jars?","body":"<p>The format for the jar is <code>~/.gradle/caches/modules-2/files-2.1/&lt;com.org.pkg&gt;/&lt;uuid&gt;/</code></p>\n<p>If you are using Intellij IDEA, then browse the jar on the Project window\n<a href=\"https://i.stack.imgur.com/vKAcu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKAcu.png\" alt=\"enter image description here\" /></a></p>\n<p>Right-click on the jar and open in terminal.</p>\n<p>Run the <code>pwd</code> command in terminal to find the location.</p>\n<p>Video guide - <a href=\"https://youtu.be/6qLOdL849Y0\" rel=\"nofollow noreferrer\">How to find dependent jar on local when using gradle</a></p>\n"}],"owner":{"account_id":6236664,"reputation":5308,"user_id":4851751,"accept_rate":100,"display_name":"Doron Yakovlev Golani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36375,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"accepted_answer_id":50559977,"answer_count":4,"score":52,"last_activity_date":1634189305,"creation_date":1508423181,"question_id":46832288,"body_markdown":"I want to look at the jars/aars that are compiled when I add dependencies.\r\n\r\nFor example if I add this dependency in Gradle, where does it put the jar?\r\n\r\n    dependencies {\r\n        compile &#39;com.google.android.gms:play-services-analytics:11.0.4&#39;\r\n    }\r\n\r\n","title":"Where does gradle save dependencies&#39; jars?","body":"<p>I want to look at the jars/aars that are compiled when I add dependencies.</p>\n\n<p>For example if I add this dependency in Gradle, where does it put the jar?</p>\n\n<pre><code>dependencies {\n    compile 'com.google.android.gms:play-services-analytics:11.0.4'\n}\n</code></pre>\n"},{"tags":["java","datetime","jodatime","java-time"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1634145046,"post_id":69558345,"comment_id":122949494,"body_markdown":"A year is not 365.0000 days.","body":"A year is not 365.0000 days."},{"owner":{"account_id":231844,"reputation":15697,"user_id":496289,"accept_rate":86,"display_name":"Kashyap"},"score":0,"creation_date":1634145926,"post_id":69558345,"comment_id":122949792,"body_markdown":"@VGR, you&#39;re right. Updated. Also added `java.time` behavior.","body":"@VGR, you&#39;re right. Updated. Also added <code>java.time</code> behavior."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634189152,"creation_date":1634148024,"answer_id":69560250,"question_id":69558345,"body_markdown":"## Not a bug: Julian vs. proleptic Gregorian calendar\r\n\r\nThis is no bug. It has been designed this way consciously. There are two different calendar systems in play here:\r\n\r\n 1. The outdated `java.util.Date` class uses the Julian Calendar for dates before 1582. It’s an attempt to reflect the calendar system that was actually in use in the greater parts of Europe back then.\r\n 2. Both Joda-Time and java.time use the ISO 8601 calendar system by default (other calendar systems are supported if you specify them explicitly). ISO 8601 in turn uses the proleptic Gregorian calendar. The proleptic Gregorian calendar is created by extrapolating the rules of the Gregorian calendar back into the times before the Gregorian calendar was invented and introduced. So it gives dates that do not agree with dates actually used back then, but in turn, are more well-defined.\r\n\r\nThe two calendars are several days apart for most dates, up to a couple of weeks as we get close to the Julian-Gregorian cross over in 1582 or later, depending on the jurisdiction.\r\n\r\n## Joda-Time supports the Gregorian/Julian calendar\r\n\r\nThe combined Gregorian/Juian calendar system that `Date` used is supported by Joda-TIme too through the `GJChronology` class.\r\n\r\n\t\tDateTime dt = new DateTime(-62_135_640_000_000L,\r\n\t\t\t\tGJChronology.getInstanceUTC());\r\n\t\tSystem.out.println(&quot;DateTime with GJChronology: &quot; + dt);\r\n\r\nOutput:\r\n\r\n&gt; DateTime with GJChronology: 0001-01-02T12:00:00.000Z\r\n\r\nThe year, the month, and the day-of-month all agree with what you got from `Date`.\r\n\r\n## Links\r\n\r\n - [ISO8601 Java calendar system](https://www.joda.org/joda-time/cal_iso.html) on the Joda-Time website.\r\n - [Wikipedia article: ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)\r\n - [Proleptic Gregorian calendar](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar) on Wikipedia\r\n - Similar question: [Java: How to get the timestamp of &#39;1000-01-01 00:00:00&#39; in UTC?](https://stackoverflow.com/questions/57992234/java-how-to-get-the-timestamp-of-1000-01-01-000000-in-utc) The difference is that that question is about `ZonedDateTime` from java.time, not about Joda-Time.","title":"Is this a bug in joda time? Handling very old (year 0000) instant / negative epoch","body":"<h2>Not a bug: Julian vs. proleptic Gregorian calendar</h2>\n<p>This is no bug. It has been designed this way consciously. There are two different calendar systems in play here:</p>\n<ol>\n<li>The outdated <code>java.util.Date</code> class uses the Julian Calendar for dates before 1582. It’s an attempt to reflect the calendar system that was actually in use in the greater parts of Europe back then.</li>\n<li>Both Joda-Time and java.time use the ISO 8601 calendar system by default (other calendar systems are supported if you specify them explicitly). ISO 8601 in turn uses the proleptic Gregorian calendar. The proleptic Gregorian calendar is created by extrapolating the rules of the Gregorian calendar back into the times before the Gregorian calendar was invented and introduced. So it gives dates that do not agree with dates actually used back then, but in turn, are more well-defined.</li>\n</ol>\n<p>The two calendars are several days apart for most dates, up to a couple of weeks as we get close to the Julian-Gregorian cross over in 1582 or later, depending on the jurisdiction.</p>\n<h2>Joda-Time supports the Gregorian/Julian calendar</h2>\n<p>The combined Gregorian/Juian calendar system that <code>Date</code> used is supported by Joda-TIme too through the <code>GJChronology</code> class.</p>\n<pre><code>    DateTime dt = new DateTime(-62_135_640_000_000L,\n            GJChronology.getInstanceUTC());\n    System.out.println(&quot;DateTime with GJChronology: &quot; + dt);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>DateTime with GJChronology: 0001-01-02T12:00:00.000Z</p>\n</blockquote>\n<p>The year, the month, and the day-of-month all agree with what you got from <code>Date</code>.</p>\n<h2>Links</h2>\n<ul>\n<li><a href=\"https://www.joda.org/joda-time/cal_iso.html\" rel=\"nofollow noreferrer\">ISO8601 Java calendar system</a> on the Joda-Time website.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">Wikipedia article: ISO 8601</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar\" rel=\"nofollow noreferrer\">Proleptic Gregorian calendar</a> on Wikipedia</li>\n<li>Similar question: <a href=\"https://stackoverflow.com/questions/57992234/java-how-to-get-the-timestamp-of-1000-01-01-000000-in-utc\">Java: How to get the timestamp of '1000-01-01 00:00:00' in UTC?</a> The difference is that that question is about <code>ZonedDateTime</code> from java.time, not about Joda-Time.</li>\n</ul>\n"}],"owner":{"account_id":231844,"reputation":15697,"user_id":496289,"accept_rate":86,"display_name":"Kashyap"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69560250,"answer_count":1,"score":2,"last_activity_date":1634189152,"creation_date":1634139276,"question_id":69558345,"body_markdown":"It seems like `DateTime` does not initialize itself with correct date when we construct it from a `java.util.Date` with year `0001`.\r\n\r\n```java\r\nimport java.time.LocalDateTime;\r\nimport java.util.TimeZone;\r\npublic class TestMain {\r\n    public static void main(String[] args) {\r\n        TimeZone.setDefault(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n        java.util.Date d = new java.util.Date(-62135640000000L);\r\n        java.time.Instant i = java.time.Instant.ofEpochMilli(-62135640000000L);\r\n        System.out.println(&quot;d = new java.util.Date(-62135640000000L)                      : &quot; + new java.util.Date(-62135640000000L));\r\n        System.out.println(&quot;new org.joda.time.DateTime(d)                                 : &quot; + new org.joda.time.DateTime(d));\r\n        System.out.println(&quot;new org.joda.time.DateTime(-62135640000000L)                  : &quot; + new org.joda.time.DateTime(-62135640000000L));\r\n        System.out.println(&quot;java.time.LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC): &quot; + LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC));\r\n    }\r\n}\r\n```\r\n\r\noutput:\r\n```\r\nd = new java.util.Date(-62135640000000L)                      : Sun Jan 02 12:00:00 UTC 1\r\nnew org.joda.time.DateTime(d)                                 : 0000-12-31T12:00:00.000Z\r\nnew org.joda.time.DateTime(-62135640000000L)                  : 0000-12-31T12:00:00.000Z\r\njava.time.LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC): 0000-12-31T12:00\r\n```\r\n\r\nApart from the timezone related differences, if you note:\r\n* the date is `02` in `Date` object and `31` in `DateTime` (or `00` if you change to `UTC`)\r\n* the year is `0001` in `Date` object and `0000` in `DateTime`\r\n\r\nAm I doing something wrong, or is this a bug?\r\n\r\nDid some more calculation\r\n```\r\n62135640000000 / 1000 / 3600 / 24 / 365.25 = 1968.9596167008898015058179329227\r\n0.9596167008898015058179329227 * 365.25 = 350.5\r\n365.25 - 350.5 = 14.75\r\n```\r\n\r\nSo `-62135640000000` = negative 1969 years and 350.5 days. Or about 14.75 days after start of year 0000.\r\n","title":"Is this a bug in joda time? Handling very old (year 0000) instant / negative epoch","body":"<p>It seems like <code>DateTime</code> does not initialize itself with correct date when we construct it from a <code>java.util.Date</code> with year <code>0001</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDateTime;\nimport java.util.TimeZone;\npublic class TestMain {\n    public static void main(String[] args) {\n        TimeZone.setDefault(TimeZone.getTimeZone(&quot;UTC&quot;));\n        java.util.Date d = new java.util.Date(-62135640000000L);\n        java.time.Instant i = java.time.Instant.ofEpochMilli(-62135640000000L);\n        System.out.println(&quot;d = new java.util.Date(-62135640000000L)                      : &quot; + new java.util.Date(-62135640000000L));\n        System.out.println(&quot;new org.joda.time.DateTime(d)                                 : &quot; + new org.joda.time.DateTime(d));\n        System.out.println(&quot;new org.joda.time.DateTime(-62135640000000L)                  : &quot; + new org.joda.time.DateTime(-62135640000000L));\n        System.out.println(&quot;java.time.LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC): &quot; + LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC));\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre><code>d = new java.util.Date(-62135640000000L)                      : Sun Jan 02 12:00:00 UTC 1\nnew org.joda.time.DateTime(d)                                 : 0000-12-31T12:00:00.000Z\nnew org.joda.time.DateTime(-62135640000000L)                  : 0000-12-31T12:00:00.000Z\njava.time.LocalDateTime.ofInstant(i, java.time.ZoneOffset.UTC): 0000-12-31T12:00\n</code></pre>\n<p>Apart from the timezone related differences, if you note:</p>\n<ul>\n<li>the date is <code>02</code> in <code>Date</code> object and <code>31</code> in <code>DateTime</code> (or <code>00</code> if you change to <code>UTC</code>)</li>\n<li>the year is <code>0001</code> in <code>Date</code> object and <code>0000</code> in <code>DateTime</code></li>\n</ul>\n<p>Am I doing something wrong, or is this a bug?</p>\n<p>Did some more calculation</p>\n<pre><code>62135640000000 / 1000 / 3600 / 24 / 365.25 = 1968.9596167008898015058179329227\n0.9596167008898015058179329227 * 365.25 = 350.5\n365.25 - 350.5 = 14.75\n</code></pre>\n<p>So <code>-62135640000000</code> = negative 1969 years and 350.5 days. Or about 14.75 days after start of year 0000.</p>\n"},{"tags":["java","hibernate","jpa","orm"],"comments":[{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1632897308,"post_id":69368404,"comment_id":122613217,"body_markdown":"Your class `ContainerEntity` has two fields with the same name `customAttributes` that is not possible.","body":"Your class <code>ContainerEntity</code> has two fields with the same name <code>customAttributes</code> that is not possible."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634188459,"creation_date":1634188459,"answer_id":69565399,"question_id":69368404,"body_markdown":"I think you simply cannot use `@OneToMany(mappedBy)` in this particular case due to a limitation in older Hibernate versions in combination with using the subtype. You should switch to \r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\r\n    private Set&lt;BaseAttributeEntity&gt; attributes = new HashSet&lt;&gt;();\r\n\r\n    private Set&lt;SpecialAttributeEntity&gt; specialAttributes;\r\n    private Set&lt;AnotherSpecialAttributeEntity&gt; anotherSpecialAttributes;\r\n\r\n    // Put respective instances into separate collections on load\r\n    @PostLoad\r\n    void postLoad() {\r\n        this.specialAttributes = attributes.stream().filter(a instanceof SpecialAttributeEntity).collect(toSet());\r\n        this.anotherSpecialAttributes = attributes.stream().filter(a instanceof AnotherSpecialAttributeEntity).collect(toSet());\r\n    }\r\n\r\n    // Controlled write access\r\n    public void addAttribute(BaseAttributeEntity a) {\r\n        if (a instanceof SpecialAttributeEntity) {\r\n            specialAttributes.add(a);\r\n        } else {\r\n            anotherSpecialAttributes.add(a);\r\n        }\r\n        attributes.add(a);\r\n    }\r\n    public void removeAttribute(BaseAttributeEntity a) {\r\n        if (a instanceof SpecialAttributeEntity) {\r\n            specialAttributes.remove(a);\r\n        } else {\r\n            anotherSpecialAttributes.remove(a);\r\n        }\r\n        attributes.remove(a);\r\n    }\r\n\r\n    // Provide read-only access\r\n    public Set&lt;SpecialAttributeEntity&gt; getSpecialAttributes() {\r\n        return Collections.unmodifiableSet(specialAttributes);\r\n    }\r\n    public Set&lt;AnotherSpecialAttributeEntity&gt; getAnotherSpecialAttributes() {\r\n        return Collections.unmodifiableSet(anotherSpecialAttributes);\r\n    }","title":"Hibernate is using wrong table for join when inheritence strategy is InheritanceType.JOINED","body":"<p>I think you simply cannot use <code>@OneToMany(mappedBy)</code> in this particular case due to a limitation in older Hibernate versions in combination with using the subtype. You should switch to</p>\n<pre><code>@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\nprivate Set&lt;BaseAttributeEntity&gt; attributes = new HashSet&lt;&gt;();\n\nprivate Set&lt;SpecialAttributeEntity&gt; specialAttributes;\nprivate Set&lt;AnotherSpecialAttributeEntity&gt; anotherSpecialAttributes;\n\n// Put respective instances into separate collections on load\n@PostLoad\nvoid postLoad() {\n    this.specialAttributes = attributes.stream().filter(a instanceof SpecialAttributeEntity).collect(toSet());\n    this.anotherSpecialAttributes = attributes.stream().filter(a instanceof AnotherSpecialAttributeEntity).collect(toSet());\n}\n\n// Controlled write access\npublic void addAttribute(BaseAttributeEntity a) {\n    if (a instanceof SpecialAttributeEntity) {\n        specialAttributes.add(a);\n    } else {\n        anotherSpecialAttributes.add(a);\n    }\n    attributes.add(a);\n}\npublic void removeAttribute(BaseAttributeEntity a) {\n    if (a instanceof SpecialAttributeEntity) {\n        specialAttributes.remove(a);\n    } else {\n        anotherSpecialAttributes.remove(a);\n    }\n    attributes.remove(a);\n}\n\n// Provide read-only access\npublic Set&lt;SpecialAttributeEntity&gt; getSpecialAttributes() {\n    return Collections.unmodifiableSet(specialAttributes);\n}\npublic Set&lt;AnotherSpecialAttributeEntity&gt; getAnotherSpecialAttributes() {\n    return Collections.unmodifiableSet(anotherSpecialAttributes);\n}\n</code></pre>\n"}],"owner":{"account_id":7378127,"reputation":186,"user_id":5615926,"display_name":"Y. Sobelman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634188459,"creation_date":1632862728,"question_id":69368404,"body_markdown":"I have a base JPA Entity defined like so (I&#39;m using *Hibernate 5.4.25.final* implementation):\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;Attributes&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\npublic class BaseAttributeEntity {\r\n\r\n    @Id\r\n\tprivate UUID id;\r\n\r\n    @Column\r\n    private String name;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;containerId&quot;)\r\n    private ContainerEntity containerEntity;\r\n}\r\n```\r\nAnd 2 inheriting entities, both similar to the below:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SpecialAttributes&quot;)\r\npublic class SpecialAttributeEntity extends BaseAttributeEntity {\r\n   // ... some more properties\r\n}\r\n\r\n```\r\n\r\nThe table structure is similar to what&#39;s described in the [hibernate documentation][1], with id column defined on all 3 tables.\r\n\r\nI also have another entity containing collections of the 2 entities, something like that:\r\n```\r\n@Entity\r\n@Table(name = &quot;Container&quot;)\r\npublic class ContainerEntity {\r\n\r\n    @Id\r\n\tprivate UUID id;\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\r\n    private Set&lt;SpecialAttributeEntity&gt; specialAttributes = new HashSet&lt;&gt;();\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\r\n    private Set&lt;AnotherSpecialAttributeEntity&gt; anotherSpecialAttributes = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nWhen I try to run some searching logic and fetch `ContainerEntity`s I get the below error from the underlying sql:\r\n```\r\norg.postgresql.util.PSQLException: ERROR: column specialattr0_.containerId does not exist\r\n  Hint: Perhaps you meant to reference the column &quot;specialattr0_1_.containerId&quot;.\r\n```\r\n\r\nThe underlying sql Hibernate uses for fetching (I left only the `from` statement because that&#39;s where the problem lies):\r\n```\r\nfrom \r\n  &quot;Service&quot;.&quot;SpecialAttributes&quot; specialattr0_ \r\n  inner join &quot;Service&quot;.&quot;Attributes&quot; specialattr0_1_ on specialattr0_.&quot;id&quot; = specialattr0_1_.&quot;id&quot; \r\n  left outer join &quot;Service&quot;.&quot;Containers&quot; containeren1_ on customattr0_1_.&quot;containerId&quot; = containeren1_.&quot;id&quot;\r\n```\r\n\r\nBasically the problem is that both of the &quot;attributes&quot; entities are joined using the `containerId` column, which is defined in the base class DB table, but Hibernate tries to make the `join` but using the column from the children classes DB tables (where it obviously does not exist...).\r\n\r\nI tried, but still haven&#39;t found a solution for this. How can I direct Hibernate to use the right table? Preferably using the standard specification?\r\n\r\nThank you!\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity-inheritance-joined-table","title":"Hibernate is using wrong table for join when inheritence strategy is InheritanceType.JOINED","body":"<p>I have a base JPA Entity defined like so (I'm using <em>Hibernate 5.4.25.final</em> implementation):</p>\n<pre><code>@Entity\n@Table(name = &quot;Attributes&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class BaseAttributeEntity {\n\n    @Id\n    private UUID id;\n\n    @Column\n    private String name;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;containerId&quot;)\n    private ContainerEntity containerEntity;\n}\n</code></pre>\n<p>And 2 inheriting entities, both similar to the below:</p>\n<pre><code>@Entity\n@Table(name = &quot;SpecialAttributes&quot;)\npublic class SpecialAttributeEntity extends BaseAttributeEntity {\n   // ... some more properties\n}\n\n</code></pre>\n<p>The table structure is similar to what's described in the <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity-inheritance-joined-table\" rel=\"nofollow noreferrer\">hibernate documentation</a>, with id column defined on all 3 tables.</p>\n<p>I also have another entity containing collections of the 2 entities, something like that:</p>\n<pre><code>@Entity\n@Table(name = &quot;Container&quot;)\npublic class ContainerEntity {\n\n    @Id\n    private UUID id;\n\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\n    private Set&lt;SpecialAttributeEntity&gt; specialAttributes = new HashSet&lt;&gt;();\n\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;containerEntity&quot;)\n    private Set&lt;AnotherSpecialAttributeEntity&gt; anotherSpecialAttributes = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>When I try to run some searching logic and fetch <code>ContainerEntity</code>s I get the below error from the underlying sql:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: column specialattr0_.containerId does not exist\n  Hint: Perhaps you meant to reference the column &quot;specialattr0_1_.containerId&quot;.\n</code></pre>\n<p>The underlying sql Hibernate uses for fetching (I left only the <code>from</code> statement because that's where the problem lies):</p>\n<pre><code>from \n  &quot;Service&quot;.&quot;SpecialAttributes&quot; specialattr0_ \n  inner join &quot;Service&quot;.&quot;Attributes&quot; specialattr0_1_ on specialattr0_.&quot;id&quot; = specialattr0_1_.&quot;id&quot; \n  left outer join &quot;Service&quot;.&quot;Containers&quot; containeren1_ on customattr0_1_.&quot;containerId&quot; = containeren1_.&quot;id&quot;\n</code></pre>\n<p>Basically the problem is that both of the &quot;attributes&quot; entities are joined using the <code>containerId</code> column, which is defined in the base class DB table, but Hibernate tries to make the <code>join</code> but using the column from the children classes DB tables (where it obviously does not exist...).</p>\n<p>I tried, but still haven't found a solution for this. How can I direct Hibernate to use the right table? Preferably using the standard specification?</p>\n<p>Thank you!</p>\n"},{"tags":["java","glassfish","classnotfoundexception","asadmin"],"answers":[{"tags":[],"owner":{"account_id":14514701,"reputation":714,"user_id":10484162,"display_name":"Ashish Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634188198,"creation_date":1634188198,"answer_id":69565363,"question_id":69542070,"body_markdown":"The problem arised from a missing jar file that is **common-util.jar**  [More about common util jar files][1]\r\nThe missing file comes under the above mentioned jar file\r\n\r\n    jar -tvf common-util.jar\r\n    --o/p set of files inside the jar as below\r\n\r\n    com.sun.enterprise.universal.i18n.LocalStringsImpl.class\r\n\r\n\r\n  [1]: http://www.java2s.com/Code/Jar/c/Downloadcommonutil301jar.htm","title":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/enterprise/universal/i18n/LocalStringsImpl","body":"<p>The problem arised from a missing jar file that is <strong>common-util.jar</strong>  <a href=\"http://www.java2s.com/Code/Jar/c/Downloadcommonutil301jar.htm\" rel=\"nofollow noreferrer\">More about common util jar files</a>\nThe missing file comes under the above mentioned jar file</p>\n<pre><code>jar -tvf common-util.jar\n--o/p set of files inside the jar as below\n\ncom.sun.enterprise.universal.i18n.LocalStringsImpl.class\n</code></pre>\n"}],"owner":{"account_id":14514701,"reputation":714,"user_id":10484162,"display_name":"Ashish Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69565363,"answer_count":1,"score":0,"last_activity_date":1634188198,"creation_date":1634047783,"question_id":69542070,"body_markdown":"When I undeployed the war file(glassfish) using asadmin and when I try restarting the glassfish it throws error, what can be the possible problem may be jar file or something is missing.\r\n\r\n    /opt/glassfishv3/glassfish/bin/asadmin undeploy war-name\r\n    /opt/glassfishv3/glassfish/bin/asadmin deploy war-name.war\r\n    ./etc/init.d/glassfish restart\r\n\r\n\r\n----------\r\n\r\n\r\n    Starting Glassfish ...\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/enterprise/universal/i18n/LocalStringsImpl\r\n            at com.sun.enterprise.admin.cli.AsadminMain.&lt;clinit&gt;(AsadminMain.java:94)\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.enterprise.universal.i18n.LocalStringsImpl\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\r\n","title":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/enterprise/universal/i18n/LocalStringsImpl","body":"<p>When I undeployed the war file(glassfish) using asadmin and when I try restarting the glassfish it throws error, what can be the possible problem may be jar file or something is missing.</p>\n<pre><code>/opt/glassfishv3/glassfish/bin/asadmin undeploy war-name\n/opt/glassfishv3/glassfish/bin/asadmin deploy war-name.war\n./etc/init.d/glassfish restart\n</code></pre>\n<hr />\n<pre><code>Starting Glassfish ...\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/enterprise/universal/i18n/LocalStringsImpl\n        at com.sun.enterprise.admin.cli.AsadminMain.&lt;clinit&gt;(AsadminMain.java:94)\nCaused by: java.lang.ClassNotFoundException: com.sun.enterprise.universal.i18n.LocalStringsImpl\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","error-handling","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":22941670,"reputation":21,"user_id":17074317,"display_name":"Deepak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633604093,"creation_date":1633604093,"answer_id":69479877,"question_id":69475757,"body_markdown":"In place of doing an if you can catch an HttpClientErrorException, so with that you can avoid boiler plate\r\n\r\n    @Test\r\n    void shouldPrintErrorForRestTemplate() {\r\n        try {\r\n\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\r\n\r\n        } catch(HttpClientErrorException e) {\r\n            log.error(e.getResponseBodyAsString(),e);\r\n        }catch (Exception e) {\r\n            log.error(&quot;Error calling REST API&quot;, e);\r\n        }\r\n    }","title":"How to print complete error message when logging an exception generated by RestTemplate?","body":"<p>In place of doing an if you can catch an HttpClientErrorException, so with that you can avoid boiler plate</p>\n<pre><code>@Test\nvoid shouldPrintErrorForRestTemplate() {\n    try {\n\n        RestTemplate restTemplate = new RestTemplate();\n        restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\n\n    } catch(HttpClientErrorException e) {\n        log.error(e.getResponseBodyAsString(),e);\n    }catch (Exception e) {\n        log.error(&quot;Error calling REST API&quot;, e);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1634106840,"creation_date":1633962018,"answer_id":69527775,"question_id":69475757,"body_markdown":"[By default](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/RestTemplate.java#L138), `RestTemplate` uses [`DefaultErrorHandler`](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L53) for processing errors.\r\n\r\nIn the implementation of this class, the different `handleError` methods - see for instance [this](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L165-L192) - rely on the [`getErrorMessage` method](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L128-L163):\r\n\r\n```java\r\n/**\r\n  * Return error message with details from the response body, possibly truncated:\r\n  * &lt;pre&gt;\r\n  * 404 Not Found: [{&#39;id&#39;: 123, &#39;message&#39;: &#39;my very long... (500 bytes)]\r\n  * &lt;/pre&gt;\r\n  */\r\nprivate String getErrorMessage(\r\n    int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\r\n\r\n\r\n  String preface = rawStatusCode + &quot; &quot; + statusText + &quot;: &quot;;\r\n  if (ObjectUtils.isEmpty(responseBody)) {\r\n    return preface + &quot;[no body]&quot;;\r\n  }\r\n\r\n\r\n  if (charset == null) {\r\n    charset = StandardCharsets.UTF_8;\r\n  }\r\n  int maxChars = 200;\r\n\r\n\r\n  if (responseBody.length &lt; maxChars * 2) {\r\n    return preface + &quot;[&quot; + new String(responseBody, charset) + &quot;]&quot;;\r\n  }\r\n\r\n\r\n  try {\r\n    Reader reader = new InputStreamReader(new ByteArrayInputStream(responseBody), charset);\r\n    CharBuffer buffer = CharBuffer.allocate(maxChars);\r\n    reader.read(buffer);\r\n    reader.close();\r\n    buffer.flip();\r\n    return preface + &quot;[&quot; + buffer.toString() + &quot;... (&quot; + responseBody.length + &quot; bytes)]&quot;;\r\n  }\r\n  catch (IOException ex) {\r\n    // should never happen\r\n    throw new IllegalStateException(ex);\r\n  }\r\n}\r\n```\r\n\r\nAs you can see, this is method the one that actually truncates the message.\r\n\r\nIn order to provide the full message, you can your own provided [`ResponseErrorHandler`](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/ResponseErrorHandler.java#L32) implementation.\r\n\r\nFor instance, reusing the code implement in `DefaultErrorHandler`:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.charset.Charset;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.client.ClientHttpResponse;\r\nimport org.springframework.lang.Nullable;\r\nimport org.springframework.util.ObjectUtils;\r\nimport org.springframework.web.client.DefaultResponseErrorHandler;\r\nimport org.springframework.web.client.HttpClientErrorException;\r\nimport org.springframework.web.client.HttpServerErrorException;\r\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\r\n\r\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\r\n  \r\n  // This overloaded method version is only available since Spring 5.0\r\n  // For previous versions of the library you can override\r\n  // handleError(ClientHttpResponse response) instead\r\n  @Override\r\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\r\n    String statusText = response.getStatusText();\r\n    HttpHeaders headers = response.getHeaders();\r\n    byte[] body = getResponseBody(response);\r\n    Charset charset = getCharset(response);\r\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\r\n\r\n    switch (statusCode.series()) {\r\n      case CLIENT_ERROR:\r\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      case SERVER_ERROR:\r\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      default:\r\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return error message with details from the response body:\r\n   * &lt;pre&gt;\r\n   * 404 Not Found: [{&#39;id&#39;: 123, &#39;message&#39;: &#39;actual mesage&#39;]\r\n   * &lt;/pre&gt;\r\n   *\r\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\r\n   */\r\n  private String getErrorMessage(\r\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\r\n\r\n    String preface = rawStatusCode + &quot; &quot; + statusText + &quot;: &quot;;\r\n    if (ObjectUtils.isEmpty(responseBody)) {\r\n      return preface + &quot;[no body]&quot;;\r\n    }\r\n\r\n    if (charset == null) {\r\n      charset = StandardCharsets.UTF_8;\r\n    }\r\n\r\n    // return the message without truncation\r\n    return preface + &quot;[&quot; + new String(responseBody, charset) + &quot;]&quot;;\r\n  }\r\n}\r\n```\r\n\r\nThen, configure `RestTemplate` to use this custom `ResponseErrorHandler`:\r\n\r\n```java\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.web.client.HttpClientErrorException;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\n@Slf4j\r\npublic class RestTemplateTest {\r\n\r\n    @Test\r\n    void shouldPrintErrorForRestTemplate() {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        ResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\r\n        restTemplate.setErrorHandler(errorHandler);\r\n\r\n        try {\r\n            restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error calling REST API&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nPlease, see [this related SO question](https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling) or [this article](https://www.baeldung.com/spring-rest-template-error-handling) for further examples.","title":"How to print complete error message when logging an exception generated by RestTemplate?","body":"<p><a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/RestTemplate.java#L138\" rel=\"noreferrer\">By default</a>, <code>RestTemplate</code> uses <a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L53\" rel=\"noreferrer\"><code>DefaultErrorHandler</code></a> for processing errors.</p>\n<p>In the implementation of this class, the different <code>handleError</code> methods - see for instance <a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L165-L192\" rel=\"noreferrer\">this</a> - rely on the <a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L128-L163\" rel=\"noreferrer\"><code>getErrorMessage</code> method</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n  * Return error message with details from the response body, possibly truncated:\n  * &lt;pre&gt;\n  * 404 Not Found: [{'id': 123, 'message': 'my very long... (500 bytes)]\n  * &lt;/pre&gt;\n  */\nprivate String getErrorMessage(\n    int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\n\n\n  String preface = rawStatusCode + &quot; &quot; + statusText + &quot;: &quot;;\n  if (ObjectUtils.isEmpty(responseBody)) {\n    return preface + &quot;[no body]&quot;;\n  }\n\n\n  if (charset == null) {\n    charset = StandardCharsets.UTF_8;\n  }\n  int maxChars = 200;\n\n\n  if (responseBody.length &lt; maxChars * 2) {\n    return preface + &quot;[&quot; + new String(responseBody, charset) + &quot;]&quot;;\n  }\n\n\n  try {\n    Reader reader = new InputStreamReader(new ByteArrayInputStream(responseBody), charset);\n    CharBuffer buffer = CharBuffer.allocate(maxChars);\n    reader.read(buffer);\n    reader.close();\n    buffer.flip();\n    return preface + &quot;[&quot; + buffer.toString() + &quot;... (&quot; + responseBody.length + &quot; bytes)]&quot;;\n  }\n  catch (IOException ex) {\n    // should never happen\n    throw new IllegalStateException(ex);\n  }\n}\n</code></pre>\n<p>As you can see, this is method the one that actually truncates the message.</p>\n<p>In order to provide the full message, you can your own provided <a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-web/src/main/java/org/springframework/web/client/ResponseErrorHandler.java#L32\" rel=\"noreferrer\"><code>ResponseErrorHandler</code></a> implementation.</p>\n<p>For instance, reusing the code implement in <code>DefaultErrorHandler</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.lang.Nullable;\nimport org.springframework.util.ObjectUtils;\nimport org.springframework.web.client.DefaultResponseErrorHandler;\nimport org.springframework.web.client.HttpClientErrorException;\nimport org.springframework.web.client.HttpServerErrorException;\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\n\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\n  \n  // This overloaded method version is only available since Spring 5.0\n  // For previous versions of the library you can override\n  // handleError(ClientHttpResponse response) instead\n  @Override\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\n    String statusText = response.getStatusText();\n    HttpHeaders headers = response.getHeaders();\n    byte[] body = getResponseBody(response);\n    Charset charset = getCharset(response);\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\n\n    switch (statusCode.series()) {\n      case CLIENT_ERROR:\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\n      case SERVER_ERROR:\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\n      default:\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\n    }\n  }\n\n  /**\n   * Return error message with details from the response body:\n   * &lt;pre&gt;\n   * 404 Not Found: [{'id': 123, 'message': 'actual mesage']\n   * &lt;/pre&gt;\n   *\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\n   */\n  private String getErrorMessage(\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\n\n    String preface = rawStatusCode + &quot; &quot; + statusText + &quot;: &quot;;\n    if (ObjectUtils.isEmpty(responseBody)) {\n      return preface + &quot;[no body]&quot;;\n    }\n\n    if (charset == null) {\n      charset = StandardCharsets.UTF_8;\n    }\n\n    // return the message without truncation\n    return preface + &quot;[&quot; + new String(responseBody, charset) + &quot;]&quot;;\n  }\n}\n</code></pre>\n<p>Then, configure <code>RestTemplate</code> to use this custom <code>ResponseErrorHandler</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.extern.slf4j.Slf4j;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.web.client.HttpClientErrorException;\nimport org.springframework.web.client.RestTemplate;\n\n@Slf4j\npublic class RestTemplateTest {\n\n    @Test\n    void shouldPrintErrorForRestTemplate() {\n        RestTemplate restTemplate = new RestTemplate();\n        ResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\n        restTemplate.setErrorHandler(errorHandler);\n\n        try {\n            restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\n        } catch (Exception e) {\n            log.error(&quot;Error calling REST API&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>Please, see <a href=\"https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling\">this related SO question</a> or <a href=\"https://www.baeldung.com/spring-rest-template-error-handling\" rel=\"noreferrer\">this article</a> for further examples.</p>\n"}],"owner":{"account_id":1979094,"reputation":3912,"user_id":1776132,"display_name":"Smile"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":69527775,"answer_count":2,"score":5,"last_activity_date":1634188076,"creation_date":1633583431,"question_id":69475757,"body_markdown":"We have a Spring-Boot (2.3.10.RELEASE) based application which calls many REST APIs using `RestTemplate`.\r\n\r\nIn case, any REST API returns any 4xx or 5xx HTTP error code along with message body, complete message body is not getting logged.\r\n\r\nHere is a minimum reproducible example:\r\n```java\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.web.client.HttpClientErrorException;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\n@Slf4j\r\npublic class RestTemplateTest {\r\n\r\n    @Test\r\n    void shouldPrintErrorForRestTemplate() {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        try {\r\n            restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error calling REST API&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\nOutput:\r\n```\r\n10:28:11.347 [main] ERROR com.smilep.java.webapp.RestTemplateTest - Error calling REST API\r\norg.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: [{\r\n  &quot;glossary&quot;: {\r\n    &quot;title&quot;: &quot;example glossary&quot;,\r\n    &quot;GlossDiv&quot;: {\r\n      &quot;title&quot;: &quot;S&quot;,\r\n      &quot;GlossList&quot;: {\r\n        &quot;GlossEntry&quot;: {\r\n          &quot;ID&quot;: &quot;SGML&quot;,\r\n          &quot;SortAs&quot;: &quot;SGML&quot;,\r\n          &quot;Glo... (593 bytes)]\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:113)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:184)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:125)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:780)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:738)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:672)\r\n\tat org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:340)\r\n\tat com.smilep.java.webapp.RestTemplateTest.shouldPrintErrorForRestTemplate(RestTemplateTest.java:15)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:212)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:208)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n```\r\n\r\nYou can notice response message is truncated with `&quot;Glo... (593 bytes)]` in above stack trace. How to log the complete error response body?\r\n\r\nI know I can do something like below to print the error response body but it will be too much of boilerplate code to be added in many classes (and also in other applications).\r\n```java\r\nif(e instanceof HttpClientErrorException) {\r\n    log.error(&quot;response body : &quot; + ((HttpClientErrorException) e).getResponseBodyAsString());\r\n}\r\n```\r\n\r\n1. Is there any way by which logging `Exception` object would log complete error response message body instead of truncating with `... (593 bytes)]`?\r\n\r\n2. Is there some default size limit in java after which it truncates any message in error log? If yes, how to change it?\r\n\r\n**Update :**\r\n\r\nAfter jccampanero&#39;s answer, I had raised [this](https://github.com/spring-projects/spring-framework/issues/27552) issue with Spring team to make this logging message size limit configurable. They have removed the limit altogether. This change should be available in some future version of Spring.","title":"How to print complete error message when logging an exception generated by RestTemplate?","body":"<p>We have a Spring-Boot (2.3.10.RELEASE) based application which calls many REST APIs using <code>RestTemplate</code>.</p>\n<p>In case, any REST API returns any 4xx or 5xx HTTP error code along with message body, complete message body is not getting logged.</p>\n<p>Here is a minimum reproducible example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.extern.slf4j.Slf4j;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.web.client.HttpClientErrorException;\nimport org.springframework.web.client.RestTemplate;\n\n@Slf4j\npublic class RestTemplateTest {\n\n    @Test\n    void shouldPrintErrorForRestTemplate() {\n        RestTemplate restTemplate = new RestTemplate();\n        try {\n            restTemplate.getForEntity(&quot;http://hellosmilep.free.beeceptor.com/error/notfound&quot;, String.class);\n        } catch (Exception e) {\n            log.error(&quot;Error calling REST API&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>10:28:11.347 [main] ERROR com.smilep.java.webapp.RestTemplateTest - Error calling REST API\norg.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: [{\n  &quot;glossary&quot;: {\n    &quot;title&quot;: &quot;example glossary&quot;,\n    &quot;GlossDiv&quot;: {\n      &quot;title&quot;: &quot;S&quot;,\n      &quot;GlossList&quot;: {\n        &quot;GlossEntry&quot;: {\n          &quot;ID&quot;: &quot;SGML&quot;,\n          &quot;SortAs&quot;: &quot;SGML&quot;,\n          &quot;Glo... (593 bytes)]\n    at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:113)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:184)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:125)\n    at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\n    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:780)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:738)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:672)\n    at org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:340)\n    at com.smilep.java.webapp.RestTemplateTest.shouldPrintErrorForRestTemplate(RestTemplateTest.java:15)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:212)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:208)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n<p>You can notice response message is truncated with <code>&quot;Glo... (593 bytes)]</code> in above stack trace. How to log the complete error response body?</p>\n<p>I know I can do something like below to print the error response body but it will be too much of boilerplate code to be added in many classes (and also in other applications).</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(e instanceof HttpClientErrorException) {\n    log.error(&quot;response body : &quot; + ((HttpClientErrorException) e).getResponseBodyAsString());\n}\n</code></pre>\n<ol>\n<li><p>Is there any way by which logging <code>Exception</code> object would log complete error response message body instead of truncating with <code>... (593 bytes)]</code>?</p>\n</li>\n<li><p>Is there some default size limit in java after which it truncates any message in error log? If yes, how to change it?</p>\n</li>\n</ol>\n<p><strong>Update :</strong></p>\n<p>After jccampanero's answer, I had raised <a href=\"https://github.com/spring-projects/spring-framework/issues/27552\" rel=\"nofollow noreferrer\">this</a> issue with Spring team to make this logging message size limit configurable. They have removed the limit altogether. This change should be available in some future version of Spring.</p>\n"},{"tags":["java","recursion","methods"],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634186984,"creation_date":1634186984,"answer_id":69565215,"question_id":69565203,"body_markdown":"You need to make two changes.\r\n\r\n 1. Decide what to return in the case where `x == y`, and add the appropriate `return` statement to the first branch.\r\n\r\n 2. Change `else if (x &lt; y) {` to `else {`.  You know that you&#39;ve exhausted all the possibilities, but the compiler doesn&#39;t.  This is a sure-fire way of telling the compiler that there&#39;s nowhere else to end up.\r\n\r\nUnless you do these two things, the compiler believes there&#39;s a possibility that it could run out of lines to execute in the method, without encountering a `return` statement.  That&#39;s not valid for a method that you&#39;ve declared as returning an `int`.","title":"How can I fix the error &quot;This method must return a result of type int&quot; without breaking the current code?","body":"<p>You need to make two changes.</p>\n<ol>\n<li><p>Decide what to return in the case where <code>x == y</code>, and add the appropriate <code>return</code> statement to the first branch.</p>\n</li>\n<li><p>Change <code>else if (x &lt; y) {</code> to <code>else {</code>.  You know that you've exhausted all the possibilities, but the compiler doesn't.  This is a sure-fire way of telling the compiler that there's nowhere else to end up.</p>\n</li>\n</ol>\n<p>Unless you do these two things, the compiler believes there's a possibility that it could run out of lines to execute in the method, without encountering a <code>return</code> statement.  That's not valid for a method that you've declared as returning an <code>int</code>.</p>\n"}],"owner":{"account_id":14727412,"reputation":51,"user_id":10635858,"display_name":"StockAZ89"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69565215,"answer_count":1,"score":1,"last_activity_date":1634187994,"creation_date":1634186789,"question_id":69565203,"body_markdown":"As far as I know, I understand this error. I know that within my program there is a situation where no conditions are met and the computer doesn&#39;t know what to do. That being said, I&#39;m not sure how to fix it properly without breaking the current code. I&#39;ve added a return 0 at the end of all the if statements, which gets rid of the error, but in some cases the 0 prints out which of course I don&#39;t want it to. I also tried putting it within an else statement at the very end as-well, but I still get the same error.\r\n\r\nAssignment instructions are as follows: &quot;If the two parameters are within 1 of each other, return the smaller number; Otherwise, subtract one from the larger parameter and add one to the smaller parameter and balance the result.&quot;\r\n\r\nHere is what I have: \r\n```\r\n    public static int balance (int x, int y) {\r\n    \tif(x == y) {\r\n    \t\tSystem.out.println(&quot;The values X and Y (&quot; + x +  &quot; and &quot; + y + &quot;) are already balanced; They are equal to each other!&quot;);\r\n    \t}\r\n    \t\r\n    \telse if(Math.abs(x-y) == 1) { //Checks to see if numbers are within 1 of each other (Math.abs because negative numbers don&#39;t matter in this case)\r\n    \t\tif(x &gt; y) {\r\n    \t\t\treturn y;\r\n    \t\t}\r\n    \t\telse return x;\r\n    \t}\r\n    \telse if(x &gt; y) {\r\n    \t\tx = x - 1; //X is larger so we subtract\r\n    \t\ty = y + 1; //Y is smaller so we add\r\n    \t\treturn balance(x,y); //Recursion happens\r\n    \t}\r\n    \telse if(x &lt; y) {\r\n    \t\ty = y - 1; //Y is larger so we subtract\r\n    \t\tx = x + 1; //X is smaller so we add\r\n    \t\treturn balance(x,y); //Recursion happens\r\n    \t}\r\n    }\r\n```\r\nThe calculations and everything on that side seem to work exactly like the instructions are asking. I just can&#39;t seem to get rid of the *&quot;This method must return a result of type int&quot;* error without having random values that are unneeded showing up in the console.","title":"How can I fix the error &quot;This method must return a result of type int&quot; without breaking the current code?","body":"<p>As far as I know, I understand this error. I know that within my program there is a situation where no conditions are met and the computer doesn't know what to do. That being said, I'm not sure how to fix it properly without breaking the current code. I've added a return 0 at the end of all the if statements, which gets rid of the error, but in some cases the 0 prints out which of course I don't want it to. I also tried putting it within an else statement at the very end as-well, but I still get the same error.</p>\n<p>Assignment instructions are as follows: &quot;If the two parameters are within 1 of each other, return the smaller number; Otherwise, subtract one from the larger parameter and add one to the smaller parameter and balance the result.&quot;</p>\n<p>Here is what I have:</p>\n<pre><code>    public static int balance (int x, int y) {\n        if(x == y) {\n            System.out.println(&quot;The values X and Y (&quot; + x +  &quot; and &quot; + y + &quot;) are already balanced; They are equal to each other!&quot;);\n        }\n        \n        else if(Math.abs(x-y) == 1) { //Checks to see if numbers are within 1 of each other (Math.abs because negative numbers don't matter in this case)\n            if(x &gt; y) {\n                return y;\n            }\n            else return x;\n        }\n        else if(x &gt; y) {\n            x = x - 1; //X is larger so we subtract\n            y = y + 1; //Y is smaller so we add\n            return balance(x,y); //Recursion happens\n        }\n        else if(x &lt; y) {\n            y = y - 1; //Y is larger so we subtract\n            x = x + 1; //X is smaller so we add\n            return balance(x,y); //Recursion happens\n        }\n    }\n</code></pre>\n<p>The calculations and everything on that side seem to work exactly like the instructions are asking. I just can't seem to get rid of the <em>&quot;This method must return a result of type int&quot;</em> error without having random values that are unneeded showing up in the console.</p>\n"},{"tags":["java","android","xml","android-studio","android-manifest"],"answers":[{"tags":[],"owner":{"account_id":13475094,"reputation":1945,"user_id":9722336,"display_name":"gtxtreme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634187731,"creation_date":1634187731,"answer_id":69565313,"question_id":69565212,"body_markdown":"You cannot use an `Intent` to start/create a `Fragment` much like you would for an `Activity`. A `Fragment` actually lives inside an `Activity` i.e. its lifecycle is bound to an `Activity`. To start a `Fragment` you have to use the `FragmentManager` that is available with the `Activity` instance\r\n\r\nThis error is coming up because Android thinks that your `InformationFragment` is an `Activity` rather than a `Fragment` and hence it is asking you if you have declared it in your `AndroidManifest.xml` file because as the rule says, you need to have each `Activity` in your app declared inside the `AndroidManifest.xml` file\r\n\r\nSo, now you can use something like [this](https://guides.codepath.com/android/creating-and-using-fragments), inside your **showInfoActivity**. Technically there are many solutions available as to what you could essentially do and that&#39;s why I linked you to all possible solutions rather than just writing them here","title":"Error: have you declared this activity in your AndroidManifest.xml? when trying to intent a class","body":"<p>You cannot use an <code>Intent</code> to start/create a <code>Fragment</code> much like you would for an <code>Activity</code>. A <code>Fragment</code> actually lives inside an <code>Activity</code> i.e. its lifecycle is bound to an <code>Activity</code>. To start a <code>Fragment</code> you have to use the <code>FragmentManager</code> that is available with the <code>Activity</code> instance</p>\n<p>This error is coming up because Android thinks that your <code>InformationFragment</code> is an <code>Activity</code> rather than a <code>Fragment</code> and hence it is asking you if you have declared it in your <code>AndroidManifest.xml</code> file because as the rule says, you need to have each <code>Activity</code> in your app declared inside the <code>AndroidManifest.xml</code> file</p>\n<p>So, now you can use something like <a href=\"https://guides.codepath.com/android/creating-and-using-fragments\" rel=\"nofollow noreferrer\">this</a>, inside your <strong>showInfoActivity</strong>. Technically there are many solutions available as to what you could essentially do and that's why I linked you to all possible solutions rather than just writing them here</p>\n"},{"tags":[],"owner":{"account_id":11667426,"reputation":643,"user_id":8543717,"display_name":"Rezaul Islam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634187942,"creation_date":1634187942,"answer_id":69565340,"question_id":69565212,"body_markdown":"You can not use ```Intent``` for navigate to ```Fragment``` from a ```Activity```.\r\nFor this reason you are getting this error. As, Intent receive 2 parameter ```Intent(FromActivity, ToActivity.class) ```. you are using fragment in 2nd parameter. We know that, when we create a activity then it it declared with ```AndroidManifest.xml``` file. Here, in your manifest file there are not any activity called ```InformationFragment```.\r\n\r\nYou can learn Android Navigation Component to easily communicate with Activity and fragments.\r\n\r\n","title":"Error: have you declared this activity in your AndroidManifest.xml? when trying to intent a class","body":"<p>You can not use <code>Intent</code> for navigate to <code>Fragment</code> from a <code>Activity</code>.\nFor this reason you are getting this error. As, Intent receive 2 parameter <code>Intent(FromActivity, ToActivity.class) </code>. you are using fragment in 2nd parameter. We know that, when we create a activity then it it declared with <code>AndroidManifest.xml</code> file. Here, in your manifest file there are not any activity called <code>InformationFragment</code>.</p>\n<p>You can learn Android Navigation Component to easily communicate with Activity and fragments.</p>\n"}],"owner":{"account_id":17974261,"reputation":3,"user_id":13062253,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69565313,"answer_count":2,"score":0,"last_activity_date":1634187942,"creation_date":1634186895,"question_id":69565212,"body_markdown":"Here&#39;s my code for clicking the button from my class **showInforActivity**:\r\n```\r\nbtnRegister.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(showInfoActivity.this, InformationFragment.class);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n```\r\nWhenever I click the button I got error ```Unable to find explicit activity class {com.example.drawerapplication/com.example.drawerapplication.ui.information.InformationFragment}; have you declared this activity in your AndroidManifest.xml?``` and it loads the previous class and layout instead of loading this \r\n **InformationFragment** class:\r\n```\r\npackage com.example.drawerapplication.ui.information;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport com.example.drawerapplication.databinding.FragmentInformationBinding;\r\n\r\npublic class InformationFragment extends Fragment {\r\n\r\n    private FragmentInformationBinding binding;\r\n\r\n    private EditText name, address, age, contact;\r\n    private Button btnAdd, btnViewData;\r\n    DatabaseHelper mDatabaseHelper;\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             ViewGroup container, Bundle savedInstanceState) {\r\n        binding = FragmentInformationBinding.inflate(inflater, container, false);\r\n        View root = binding.getRoot();\r\n\r\n        name = binding.name;\r\n        address = binding.address;\r\n        age = binding.age;\r\n        contact = binding.contact;\r\n\r\n        btnAdd = binding.add;\r\n        btnViewData = binding.viewdata;\r\n\r\n        mDatabaseHelper = new DatabaseHelper(getActivity());\r\n\r\n        btnAdd.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if (name.length() != 0 &amp;&amp; address.length() != 0\r\n                &amp;&amp; age.length() != 0 &amp;&amp; contact.length() != 0){\r\n\r\n                    mDatabaseHelper.addData(name.getText().toString(), address.getText().toString(),\r\n                            age.getText().toString().trim(), Long.valueOf(contact.getText().toString().trim()));\r\n                    toastMessages(&quot;Data Successfully Inserted!&quot;);\r\n\r\n                }else {\r\n                    toastMessages(&quot;Please complete all the requirements needed&quot;);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        btnViewData.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(getContext(), ListDataActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n\r\n    private void toastMessages(String message){\r\n        Toast.makeText(getContext(),message,Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n}\r\n```\r\nThe layout of this **InformationFragment** is **fragment_information**:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.ui.information.InformationFragment&quot;\r\n    android:layout_marginStart=&quot;10dp&quot;\r\n    android:layout_marginEnd=&quot;10dp&quot;&gt;\r\n...\r\n```\r\nHeres my **AndroidManifest file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.example.drawerapplication&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.DrawerApplication&quot;&gt;\r\n        &lt;activity android:name=&quot;.ui.information.ListDataActivity&quot;/&gt;\r\n        &lt;activity android:name=&quot;.ui.information.showInfoActivity&quot;/&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/Theme.DrawerApplication.NoActionBar&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt; \r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nI tried adding ```InformationFragment``` there however, it says ```Class referenced in the manifest, com.example.drawerapplication.InformationFragment, was not found in the project or the libraries```\r\n\r\n\r\nPlease let me know what I&#39;m missing or if you need more information. Thanks!","title":"Error: have you declared this activity in your AndroidManifest.xml? when trying to intent a class","body":"<p>Here's my code for clicking the button from my class <strong>showInforActivity</strong>:</p>\n<pre><code>btnRegister.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    Intent intent = new Intent(showInfoActivity.this, InformationFragment.class);\n                    startActivity(intent);\n                }\n            });\n</code></pre>\n<p>Whenever I click the button I got error <code>Unable to find explicit activity class {com.example.drawerapplication/com.example.drawerapplication.ui.information.InformationFragment}; have you declared this activity in your AndroidManifest.xml?</code> and it loads the previous class and layout instead of loading this\n<strong>InformationFragment</strong> class:</p>\n<pre><code>package com.example.drawerapplication.ui.information;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport com.example.drawerapplication.databinding.FragmentInformationBinding;\n\npublic class InformationFragment extends Fragment {\n\n    private FragmentInformationBinding binding;\n\n    private EditText name, address, age, contact;\n    private Button btnAdd, btnViewData;\n    DatabaseHelper mDatabaseHelper;\n\n    public View onCreateView(@NonNull LayoutInflater inflater,\n                             ViewGroup container, Bundle savedInstanceState) {\n        binding = FragmentInformationBinding.inflate(inflater, container, false);\n        View root = binding.getRoot();\n\n        name = binding.name;\n        address = binding.address;\n        age = binding.age;\n        contact = binding.contact;\n\n        btnAdd = binding.add;\n        btnViewData = binding.viewdata;\n\n        mDatabaseHelper = new DatabaseHelper(getActivity());\n\n        btnAdd.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (name.length() != 0 &amp;&amp; address.length() != 0\n                &amp;&amp; age.length() != 0 &amp;&amp; contact.length() != 0){\n\n                    mDatabaseHelper.addData(name.getText().toString(), address.getText().toString(),\n                            age.getText().toString().trim(), Long.valueOf(contact.getText().toString().trim()));\n                    toastMessages(&quot;Data Successfully Inserted!&quot;);\n\n                }else {\n                    toastMessages(&quot;Please complete all the requirements needed&quot;);\n                }\n\n            }\n        });\n\n        btnViewData.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent intent = new Intent(getContext(), ListDataActivity.class);\n                startActivity(intent);\n            }\n        });\n\n        return root;\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n\n    private void toastMessages(String message){\n        Toast.makeText(getContext(),message,Toast.LENGTH_SHORT).show();\n    }\n\n}\n</code></pre>\n<p>The layout of this <strong>InformationFragment</strong> is <strong>fragment_information</strong>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.ui.information.InformationFragment&quot;\n    android:layout_marginStart=&quot;10dp&quot;\n    android:layout_marginEnd=&quot;10dp&quot;&gt;\n...\n</code></pre>\n<p>Heres my **AndroidManifest file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.drawerapplication&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.DrawerApplication&quot;&gt;\n        &lt;activity android:name=&quot;.ui.information.ListDataActivity&quot;/&gt;\n        &lt;activity android:name=&quot;.ui.information.showInfoActivity&quot;/&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:theme=&quot;@style/Theme.DrawerApplication.NoActionBar&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt; \n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>I tried adding <code>InformationFragment</code> there however, it says <code>Class referenced in the manifest, com.example.drawerapplication.InformationFragment, was not found in the project or the libraries</code></p>\n<p>Please let me know what I'm missing or if you need more information. Thanks!</p>\n"},{"tags":["java","security","jboss","keytool","der"],"comments":[{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1517093336,"post_id":48473031,"comment_id":83955678,"body_markdown":"[java.io.IOException: Invalid keystore format using Tomcat server](https://stackoverflow.com/q/10071081/608639), [Tomcat 7 and invalid keystore format](https://stackoverflow.com/q/33196674/608639) and friends","body":"<a href=\"https://stackoverflow.com/q/10071081/608639\">java.io.IOException: Invalid keystore format using Tomcat server</a>, <a href=\"https://stackoverflow.com/q/33196674/608639\">Tomcat 7 and invalid keystore format</a> and friends"}],"answers":[{"tags":[],"owner":{"account_id":3474679,"reputation":371,"user_id":3117977,"display_name":"Jawad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581626111,"creation_date":1581626111,"answer_id":60216055,"question_id":48473031,"body_markdown":"One possibility to consider is the mismatch of keystore types.\r\n\r\nYou may check the keystore type of your existing keystore as follows:\r\n\r\n     keytool -list -keystore &lt;path/to/keystore&gt;\r\n\r\nThis should display the Keystore type value in the output like \r\n\r\n&gt; Keystore type: PKCS12\r\n\r\n\r\nThis may be different to the default keystore type (**JKS** in your case) that it is expecting \r\n\r\nIf so, use the appropriate keystoreType attribute in your tomcat server configuration to match your key store \r\n\r\n    &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n               maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n               clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;\r\n               keystoreType=&quot;PKCS12&quot;\r\n               keystoreFile=&quot;path/to/keystore&quot; keystorePass=&quot;changeit&quot; /&gt;\r\n\r\n","title":"Invalid keystore format: java.io.IOException: Invalid keystore format","body":"<p>One possibility to consider is the mismatch of keystore types.</p>\n\n<p>You may check the keystore type of your existing keystore as follows:</p>\n\n<pre><code> keytool -list -keystore &lt;path/to/keystore&gt;\n</code></pre>\n\n<p>This should display the Keystore type value in the output like </p>\n\n<blockquote>\n  <p>Keystore type: PKCS12</p>\n</blockquote>\n\n<p>This may be different to the default keystore type (<strong>JKS</strong> in your case) that it is expecting </p>\n\n<p>If so, use the appropriate keystoreType attribute in your tomcat server configuration to match your key store </p>\n\n<pre><code>&lt;Connector port=\"8443\" protocol=\"HTTP/1.1\" SSLEnabled=\"true\"\n           maxThreads=\"150\" scheme=\"https\" secure=\"true\"\n           clientAuth=\"false\" sslProtocol=\"TLS\"\n           keystoreType=\"PKCS12\"\n           keystoreFile=\"path/to/keystore\" keystorePass=\"changeit\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4728988,"reputation":442,"user_id":3825134,"display_name":"lord5et"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634187887,"creation_date":1634115144,"answer_id":69552473,"question_id":48473031,"body_markdown":"Run keytool with store type param:  \r\n\r\n    &quot;%JAVA_HOME%\\bin\\keytool&quot; -genkey -alias tomcat -keyalg RSA -storetype JKS\r\n\r\n","title":"Invalid keystore format: java.io.IOException: Invalid keystore format","body":"<p>Run keytool with store type param:</p>\n<pre><code>&quot;%JAVA_HOME%\\bin\\keytool&quot; -genkey -alias tomcat -keyalg RSA -storetype JKS\n</code></pre>\n"}],"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4796,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634187887,"creation_date":1517032246,"question_id":48473031,"body_markdown":"I have generated the certificate from the below command\r\n\r\n    Openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt -subj &quot;/CN=nginxsvc/O=nginxsvc&quot;\r\n\r\nand then in client machine import like this \r\n\r\n    keytool -import -file C:\\Code_Base\\Certificates\\NGINX_150\\tls.crt -storepass changeit -keystore &quot;C:\\Program Files\\Java\\jdk1.8.0_152\\jre\\lib\\security\\cacerts&quot; -alias nginxsvc\r\n\r\nand in Standalone.xml file of Jboss server added \r\n \r\n\r\n    &lt;connector name=&quot;https&quot; protocol=&quot;HTTP/1.1&quot; scheme=&quot;https&quot; socket-binding=&quot;https&quot; enable-lookups=&quot;false&quot; secure=&quot;true&quot;&gt;\r\n    \t\t\t    &lt;ssl name=&quot;ssl&quot; password=&quot;changeit&quot; certificate-key-file=&quot;C:\\Code_Base\\Certificates\\NGINX_150\\tls.key&quot;/&gt;\r\n    &lt;/connector&gt; \r\n\r\nBut when server starting i am getting\r\n\r\n&gt; 11:12:17,279 ERROR [org.apache.tomcat.util] (MSC service thread 1-3)\r\n&gt; JBWEB003003: Failed to load keystore type JKS with path\r\n&gt; C:\\Code_Base\\Certificates\\NGINX_150\\tls.key due to Invalid keystore\r\n&gt; format: java.io.IOException: Invalid keystore format \tat\r\n&gt; sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:658)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\r\n&gt; [rt.jar:1.8.0_152] \tat java.security.KeyStore.load(KeyStore.java:1445)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:350)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:265)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:480)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:417)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:180)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:973)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:174)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.catalina.connector.Connector.init(Connector.java:986)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\r\n&gt; [jboss-as-web-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21] \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; [rt.jar:1.8.0_152] \tat java.lang.Thread.run(Thread.java:748)\r\n&gt; [rt.jar:1.8.0_152]\r\n&gt; \r\n&gt; 11:12:17,283 ERROR [org.apache.coyote.http11.Http11Protocol] (MSC\r\n&gt; service thread 1-3) JBWEB003043: Error initializing endpoint:\r\n&gt; java.io.IOException: Invalid keystore format \tat\r\n&gt; sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:658)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\r\n&gt; [rt.jar:1.8.0_152] \tat java.security.KeyStore.load(KeyStore.java:1445)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:350)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:265)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:480)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:417)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:180)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:973)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:174)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.apache.catalina.connector.Connector.init(Connector.java:986)\r\n&gt; [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1] \tat\r\n&gt; org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\r\n&gt; [jboss-as-web-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21] \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; [rt.jar:1.8.0_152] \tat java.lang.Thread.run(Thread.java:748)\r\n&gt; [rt.jar:1.8.0_152]\r\n&gt; \r\n&gt; 11:12:17,289 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC\r\n&gt; service thread 1-2) JBWEB003001: Coyote HTTP/1.1 initializing on :\r\n&gt; http-/0.0.0.0:8080 11:12:17,297 INFO \r\n&gt; [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2)\r\n&gt; JBWEB003000: Coyote HTTP/1.1 starting on: http-/0.0.0.0:8080\r\n&gt; 11:12:17,311 ERROR [org.jboss.msc.service.fail] (MSC service thread\r\n&gt; 1-3) MSC000001: Failed to start service jboss.web.connector.https:\r\n&gt; org.jboss.msc.service.StartException in service\r\n&gt; jboss.web.connector.https: JBAS018007: Error starting web connector\r\n&gt; \tat\r\n&gt; org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:393)\r\n&gt; \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\r\n&gt; [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; [rt.jar:1.8.0_152] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; [rt.jar:1.8.0_152] \tat java.lang.Thread.run(Thread.java:748)\r\n&gt; [rt.jar:1.8.0_152] Caused by: LifecycleException:  JBWEB000023:\r\n&gt; Protocol handler initialization failed \tat\r\n&gt; org.apache.catalina.connector.Connector.init(Connector.java:989) \tat\r\n&gt; org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\r\n&gt; \t... 5 more\r\n\r\n","title":"Invalid keystore format: java.io.IOException: Invalid keystore format","body":"<p>I have generated the certificate from the below command</p>\n\n<pre><code>Openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt -subj \"/CN=nginxsvc/O=nginxsvc\"\n</code></pre>\n\n<p>and then in client machine import like this </p>\n\n<pre><code>keytool -import -file C:\\Code_Base\\Certificates\\NGINX_150\\tls.crt -storepass changeit -keystore \"C:\\Program Files\\Java\\jdk1.8.0_152\\jre\\lib\\security\\cacerts\" -alias nginxsvc\n</code></pre>\n\n<p>and in Standalone.xml file of Jboss server added </p>\n\n<pre><code>&lt;connector name=\"https\" protocol=\"HTTP/1.1\" scheme=\"https\" socket-binding=\"https\" enable-lookups=\"false\" secure=\"true\"&gt;\n                &lt;ssl name=\"ssl\" password=\"changeit\" certificate-key-file=\"C:\\Code_Base\\Certificates\\NGINX_150\\tls.key\"/&gt;\n&lt;/connector&gt; \n</code></pre>\n\n<p>But when server starting i am getting</p>\n\n<blockquote>\n  <p>11:12:17,279 ERROR [org.apache.tomcat.util] (MSC service thread 1-3)\n  JBWEB003003: Failed to load keystore type JKS with path\n  C:\\Code_Base\\Certificates\\NGINX_150\\tls.key due to Invalid keystore\n  format: java.io.IOException: Invalid keystore format  at\n  sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:658)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\n  [rt.jar:1.8.0_152]    at java.security.KeyStore.load(KeyStore.java:1445)\n  [rt.jar:1.8.0_152]    at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:350)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:265)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:480)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:417)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:180)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:973)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:174)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.catalina.connector.Connector.init(Connector.java:986)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\n  [jboss-as-web-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]    at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n  [rt.jar:1.8.0_152]    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n  [rt.jar:1.8.0_152]    at java.lang.Thread.run(Thread.java:748)\n  [rt.jar:1.8.0_152]</p>\n  \n  <p>11:12:17,283 ERROR [org.apache.coyote.http11.Http11Protocol] (MSC\n  service thread 1-3) JBWEB003043: Error initializing endpoint:\n  java.io.IOException: Invalid keystore format  at\n  sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:658)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\n  [rt.jar:1.8.0_152]    at\n  sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\n  [rt.jar:1.8.0_152]    at java.security.KeyStore.load(KeyStore.java:1445)\n  [rt.jar:1.8.0_152]    at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:350)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:265)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:480)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:417)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:180)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:973)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:174)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.apache.catalina.connector.Connector.init(Connector.java:986)\n  [jbossweb-7.5.7.Final-redhat-1.jar:7.5.7.Final-redhat-1]  at\n  org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\n  [jboss-as-web-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]    at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n  [rt.jar:1.8.0_152]    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n  [rt.jar:1.8.0_152]    at java.lang.Thread.run(Thread.java:748)\n  [rt.jar:1.8.0_152]</p>\n  \n  <p>11:12:17,289 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC\n  service thread 1-2) JBWEB003001: Coyote HTTP/1.1 initializing on :\n  http-/0.0.0.0:8080 11:12:17,297 INFO \n  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2)\n  JBWEB003000: Coyote HTTP/1.1 starting on: http-/0.0.0.0:8080\n  11:12:17,311 ERROR [org.jboss.msc.service.fail] (MSC service thread\n  1-3) MSC000001: Failed to start service jboss.web.connector.https:\n  org.jboss.msc.service.StartException in service\n  jboss.web.connector.https: JBAS018007: Error starting web connector\n    at\n  org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:393)\n    at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1980)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1913)\n  [jboss-msc-1.1.5.Final-redhat-1.jar:1.1.5.Final-redhat-1]     at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n  [rt.jar:1.8.0_152]    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n  [rt.jar:1.8.0_152]    at java.lang.Thread.run(Thread.java:748)\n  [rt.jar:1.8.0_152] Caused by: LifecycleException:  JBWEB000023:\n  Protocol handler initialization failed    at\n  org.apache.catalina.connector.Connector.init(Connector.java:989)  at\n  org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:318)\n    ... 5 more</p>\n</blockquote>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634187566,"creation_date":1634187566,"answer_id":69565289,"question_id":69354866,"body_markdown":"Hibernate doesn&#39;t do a join because there is a cycle in your entity graph and before Hibernate 6.0, the cycle is stopped as early as possible. In 6.0 we changed that to stop at the later i.e. you would get the left outer join.\r\n\r\nI don&#39;t know what you mean by &quot;associating these two entities&quot; or &quot;the result is only if the id exists&quot;, but if `LoanEc` is the only attribute in `LoanOrder`, or part of the id, then the entity won&#39;t be materialized if no `LoanEc` exists for a `LoanOrder`.","title":"Why Table association is not adding left outer join in hibernate","body":"<p>Hibernate doesn't do a join because there is a cycle in your entity graph and before Hibernate 6.0, the cycle is stopped as early as possible. In 6.0 we changed that to stop at the later i.e. you would get the left outer join.</p>\n<p>I don't know what you mean by &quot;associating these two entities&quot; or &quot;the result is only if the id exists&quot;, but if <code>LoanEc</code> is the only attribute in <code>LoanOrder</code>, or part of the id, then the entity won't be materialized if no <code>LoanEc</code> exists for a <code>LoanOrder</code>.</p>\n"}],"owner":{"account_id":10244422,"reputation":599,"user_id":7560684,"display_name":"VKP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69565289,"answer_count":1,"score":0,"last_activity_date":1634187566,"creation_date":1632793414,"question_id":69354866,"body_markdown":"i have a table and it associated to another table as one to one . In my service class i am calling findById(id). \r\n\r\n    @Entity\r\n    @Table(name = &quot;CRL_EC&quot;)\r\n    public class LoanOrder {\r\n        @OneToOne(fetch = FetchType.EAGER ,cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;loan_id&quot; , referencedColumnName = &quot;fLoanId&quot; ,insertable = false ,updatable = false)\r\n        LoanEc loanEc;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;LOAN_EC&quot;)\r\n    public class LoanEc {\r\n        @Id\r\n        Long fLoanId;\r\n  \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;fLoanId&quot;,referencedColumnName = &quot;loan_id&quot; )\r\n        LoanOrder loanOrder;\r\n    }\r\n\r\n\r\n    public interface ECRepository extends Repository&lt;LoanOrder,Long&gt;{\r\n        void save(LoanOrder loanOrder);\r\n    }\r\n\r\nWhen I am calling `findById(id)` through my ECRepository hibernate calling it as separate queries.\r\nIn console I see the queries as \r\n\r\n    select * from  LoanOrder where loan_id = ?\r\n    select * from LoanEc  where fLoanId = ?\r\n\r\nand the result is only if the id existss in second table(LoanEc). My expectation is \r\n\r\n    select * from LoanOrder  left outer join LoanEc  on loan_id = ? \r\n\r\nWhy its not associating these two entities ?\r\n","title":"Why Table association is not adding left outer join in hibernate","body":"<p>i have a table and it associated to another table as one to one . In my service class i am calling findById(id).</p>\n<pre><code>@Entity\n@Table(name = &quot;CRL_EC&quot;)\npublic class LoanOrder {\n    @OneToOne(fetch = FetchType.EAGER ,cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;loan_id&quot; , referencedColumnName = &quot;fLoanId&quot; ,insertable = false ,updatable = false)\n    LoanEc loanEc;\n}\n\n@Entity\n@Table(name = &quot;LOAN_EC&quot;)\npublic class LoanEc {\n    @Id\n    Long fLoanId;\n\n    @OneToOne\n    @JoinColumn(name = &quot;fLoanId&quot;,referencedColumnName = &quot;loan_id&quot; )\n    LoanOrder loanOrder;\n}\n\n\npublic interface ECRepository extends Repository&lt;LoanOrder,Long&gt;{\n    void save(LoanOrder loanOrder);\n}\n</code></pre>\n<p>When I am calling <code>findById(id)</code> through my ECRepository hibernate calling it as separate queries.\nIn console I see the queries as</p>\n<pre><code>select * from  LoanOrder where loan_id = ?\nselect * from LoanEc  where fLoanId = ?\n</code></pre>\n<p>and the result is only if the id existss in second table(LoanEc). My expectation is</p>\n<pre><code>select * from LoanOrder  left outer join LoanEc  on loan_id = ? \n</code></pre>\n<p>Why its not associating these two entities ?</p>\n"},{"tags":["java","cpu-architecture","dynamic-loading",".so"],"answers":[{"tags":[],"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1447336104,"creation_date":1447336104,"answer_id":33672940,"question_id":33672523,"body_markdown":"No.\r\n\r\nYou can not load a 32-bit library into the address space of a 64-bit process.","title":"Loading a 32bit .so library in a 64bit JVM","body":"<p>No.</p>\n\n<p>You can not load a 32-bit library into the address space of a 64-bit process.</p>\n"},{"tags":[],"owner":{"account_id":6365469,"reputation":113,"user_id":4939578,"display_name":"Gonzo Gonzales"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447337995,"creation_date":1447337615,"answer_id":33673469,"question_id":33672523,"body_markdown":"with this code you can check if you are on a 64bit pc and load the lybrary:\r\n\r\n    boolean is64bit = System.getProperty(&quot;sun.arch.data.model&quot;).contains(&quot;64&quot;);\r\n    if(is64bit){\r\n       try {\r\n           System.load(&quot;64Bit ibrary&quot;);\r\n       } catch (UnsatisfiedLinkError e) {\r\n           System.err.println(&quot;Native code library failed to load.\\n&quot; + e);\r\n       }\r\n    else{\r\n       try {\r\n            System.load(&quot;32Bit ibrary&quot;);\r\n        } catch (UnsatisfiedLinkError e) {\r\n          System.err.println(&quot;Native code library failed to load.\\n&quot; + e);\r\n        }\r\n    }","title":"Loading a 32bit .so library in a 64bit JVM","body":"<p>with this code you can check if you are on a 64bit pc and load the lybrary:</p>\n\n<pre><code>boolean is64bit = System.getProperty(\"sun.arch.data.model\").contains(\"64\");\nif(is64bit){\n   try {\n       System.load(\"64Bit ibrary\");\n   } catch (UnsatisfiedLinkError e) {\n       System.err.println(\"Native code library failed to load.\\n\" + e);\n   }\nelse{\n   try {\n        System.load(\"32Bit ibrary\");\n    } catch (UnsatisfiedLinkError e) {\n      System.err.println(\"Native code library failed to load.\\n\" + e);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":97864,"reputation":633,"user_id":265245,"accept_rate":58,"display_name":"Eduardo Z."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1986,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":33672940,"answer_count":2,"score":2,"last_activity_date":1634187392,"creation_date":1447334846,"question_id":33672523,"body_markdown":"We are developing a Java application to be run on Linux environments (Ubuntu for now) which communicates with a piece of hardware. Said hardware uses a .so library made available by the manufacturer for x86 architectures only.\r\n\r\nThe thing is, we would very much like to run this on a 64bit JVM. Loading the library in a x86 JVM works fine but we cannot load on the 64bit version. So, besides switching to a x86 JVM, are there any other ways to make this lib available to my 64 bit Java application? Is it possible, for instance, for me to write another os wrapper library in x64 that, in turn calls the x86 version so the JVM can load my 64 bit wrapper?","title":"Loading a 32bit .so library in a 64bit JVM","body":"<p>We are developing a Java application to be run on Linux environments (Ubuntu for now) which communicates with a piece of hardware. Said hardware uses a .so library made available by the manufacturer for x86 architectures only.</p>\n\n<p>The thing is, we would very much like to run this on a 64bit JVM. Loading the library in a x86 JVM works fine but we cannot load on the 64bit version. So, besides switching to a x86 JVM, are there any other ways to make this lib available to my 64 bit Java application? Is it possible, for instance, for me to write another os wrapper library in x64 that, in turn calls the x86 version so the JVM can load my 64 bit wrapper?</p>\n"},{"tags":["java","arrays","timeoutexception"],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1558507611,"creation_date":1558506825,"answer_id":56250641,"question_id":56249944,"body_markdown":"First of all, in case you don&#39;t realize it, `Terminated due to timeout` is not a compilation error, it means that your implementation is too slow. The challenge is not to implement any correct solution to the problem. The solution must also be efficient. Since your solution is inefficient, it fails for large inputs due to being too slow.\r\n\r\nSince the number of queries seems to be 2 orders of magnitude smaller than the length of the array (100K vs. 10M in the 3 test cases you posted), it would be more efficient to work just with the queries instead of actually updating the array.\r\n\r\nI&#39;m not going to give you an implementation, but I&#39;ll suggest an algorithm that should be more efficient than your current implementation.\r\n\r\nI suggest you process the queries as follows:\r\n\r\n1. Add the first query to a list of processed queries, which will contain queries with disjoint sub-array ranges. This list will be sorted by the first array index (you will keep it sorted by adding new elements in the proper position).\r\n\r\n2. For each query not processed yet, find all the processed queries that overlap it (you can do it using binary search to improve performence).\r\n \r\n* Split the current query in a way that the resulting queries will each be either fully contained in an existing processed query or not contained in each existing processed query.\r\n\r\n* For each of the queries created in the split:\r\n        - if their range is equal to the range of an existing processed query, add the value of the query to the processed query.\r\n        - If their range is not contained in any existing processed query, add that query as a new processed query.\r\n        - If their range is partially contained in an existing processed query, split the processed query. \r\n\r\nI&#39;m not sure if my explanation is clear enough. I&#39;ll show an example with the \r\n\r\n    1 5 3\r\n    4 8 7\r\n    6 9 1\r\n\r\ninput:\r\n\r\nAdd 1 5 3 to the list of processed queries.\r\n\r\nProcess 4 8 7: There is one processed query the overlaps it - 1 5 3.\r\n\r\nSplit 4 8 7 into two sub-queries : 4 5 7 and 6 8 7.\r\n\r\n4 5 7 is contained in 1 5 3, so split 1 5 3 into 1 3 3 and 4 5 3+7\r\n\r\n6 8 7 is not contained in any processed queries, so add it as is.\r\n\r\nNow the processed queries are:\r\n\r\n    1 3 3\r\n    4 5 10\r\n    6 8 7\r\n\r\nProcess 6 9 1: There is one processed query that overlaps it: 6 8 7.\r\n\r\nSplit 6 9 1 into two sub queries : 6 8 1 and 9 9 1.\r\n\r\n6 8 1 has the same range a 6 8 7, which will become 6 8 7+1\r\n\r\n9 9 1 is not contained in any processed queries, so add it as is.\r\n\r\nNow the processed queries are:\r\n\r\n    1 3 3\r\n    4 5 10\r\n    6 8 8\r\n    9 9 1\r\n\r\nAs you process the queries you keep track of the max processed query value, so after you process all the queries you know that the max value is 10.\r\n","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<p>First of all, in case you don't realize it, <code>Terminated due to timeout</code> is not a compilation error, it means that your implementation is too slow. The challenge is not to implement any correct solution to the problem. The solution must also be efficient. Since your solution is inefficient, it fails for large inputs due to being too slow.</p>\n\n<p>Since the number of queries seems to be 2 orders of magnitude smaller than the length of the array (100K vs. 10M in the 3 test cases you posted), it would be more efficient to work just with the queries instead of actually updating the array.</p>\n\n<p>I'm not going to give you an implementation, but I'll suggest an algorithm that should be more efficient than your current implementation.</p>\n\n<p>I suggest you process the queries as follows:</p>\n\n<ol>\n<li><p>Add the first query to a list of processed queries, which will contain queries with disjoint sub-array ranges. This list will be sorted by the first array index (you will keep it sorted by adding new elements in the proper position).</p></li>\n<li><p>For each query not processed yet, find all the processed queries that overlap it (you can do it using binary search to improve performence).</p>\n\n<ul>\n<li><p>Split the current query in a way that the resulting queries will each be either fully contained in an existing processed query or not contained in each existing processed query.</p></li>\n<li><p>For each of the queries created in the split:</p>\n\n<ul>\n<li>if their range is equal to the range of an existing processed query, add the value of the query to the processed query.</li>\n<li>If their range is not contained in any existing processed query, add that query as a new processed query.</li>\n<li>If their range is partially contained in an existing processed query, split the processed query. </li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p>I'm not sure if my explanation is clear enough. I'll show an example with the </p>\n\n<pre><code>1 5 3\n4 8 7\n6 9 1\n</code></pre>\n\n<p>input:</p>\n\n<p>Add 1 5 3 to the list of processed queries.</p>\n\n<p>Process 4 8 7: There is one processed query the overlaps it - 1 5 3.</p>\n\n<p>Split 4 8 7 into two sub-queries : 4 5 7 and 6 8 7.</p>\n\n<p>4 5 7 is contained in 1 5 3, so split 1 5 3 into 1 3 3 and 4 5 3+7</p>\n\n<p>6 8 7 is not contained in any processed queries, so add it as is.</p>\n\n<p>Now the processed queries are:</p>\n\n<pre><code>1 3 3\n4 5 10\n6 8 7\n</code></pre>\n\n<p>Process 6 9 1: There is one processed query that overlaps it: 6 8 7.</p>\n\n<p>Split 6 9 1 into two sub queries : 6 8 1 and 9 9 1.</p>\n\n<p>6 8 1 has the same range a 6 8 7, which will become 6 8 7+1</p>\n\n<p>9 9 1 is not contained in any processed queries, so add it as is.</p>\n\n<p>Now the processed queries are:</p>\n\n<pre><code>1 3 3\n4 5 10\n6 8 8\n9 9 1\n</code></pre>\n\n<p>As you process the queries you keep track of the max processed query value, so after you process all the queries you know that the max value is 10.</p>\n"},{"tags":[],"owner":{"account_id":1752540,"reputation":406,"user_id":1601309,"accept_rate":0,"display_name":"Kanahaiya"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1558965805,"creation_date":1558965805,"answer_id":56327605,"question_id":56249944,"body_markdown":"Brute-force solution is not going to work here due to the given time constraint.\r\nThat is the reason you will get the time out error.\r\n\r\nSo you need to optimize your code which can be done with the help of prefix sum array.\r\n \r\ninstead of adding k to all the elements within a range from a to b in an array, accumulate the difference array\r\n\r\nWhenever we add anything at any index into an array and apply prefix sum algorithm the same element will be added to every element till the end of the array.\r\n\r\nex- n=5, m=1, a=2 b=5 k=5  \r\n\r\n \r\n\r\n        i     0.....1.....2.....3.....4.....5.....6   //take array of size N+2 to avoid index out of bound\r\n      A[i]    0     0     0     0     0     0     0\r\n\r\nAdd k=5 to at a=2\r\n\r\nA[a]=A[a]+k  // start index from where k element should be added\r\n\r\n\r\n   \r\n\r\n         i    0.....1.....2.....3.....4.....5.....6 \r\n       A[i]   0     0     5     0     0     0     0\r\n\r\nnow apply prefix sum algorithm\r\n\r\n  \r\n\r\n         i    0.....1.....2.....3.....4.....5.....6 \r\n      A[i]    0     0     5     5     5     5     5\r\n      \r\nso you can see K=5 add to all the element till the end after applying prefix sum but we don&#39;t have to add k till the end. so to negate this effect we have to add -K also after b+1 index so that only from [a,b] range only will have K element addition effect.\r\n\r\nA[b+1]=A[b]-k  // to remove the effect of previously added k element after bth index.\r\nthat&#39;s why adding -k in the initial array along with +k.\r\n\r\n  \r\n\r\n        i    0.....1.....2.....3.....4.....5.....6 \r\n      A[i]   0     0     5     0     0     0    -5\r\n          \r\n\r\nNow apply prefix sum Array\r\n\r\n  \r\n\r\n        i    0.....1.....2.....3.....4.....5.....6 \r\n      A[i]   0     0     5     5     5     5     0\r\n      \r\n\r\nYou can see now K=5 got added from a=2 to b=5 which was expected.\r\nHere we are only updating two indices for every query so complexity will be O(1).\r\n      \r\nNow apply the same algorithm in the input\r\n\r\n             # 0.....1.....2.....3.....4.....5.....6    //taken array of size N+2 to avoid index out of bound\r\n    5 3      # 0     0     0     0     0     0     0\r\n    1 2 100  # 0    100    0   -100    0     0     0       \r\n    2 5 100  # 0    100   100  -100    0     0   -100\r\n    3 4 100  # 0    100   100    0     0  -100   -100\r\n\r\nTo calculate the max prefix sum, accumulate the difference array to &#119873; while taking the maximum accumulated prefix. \r\n\r\nAfter performing all the operation now apply prefix sum Array\r\n\r\n  \r\n\r\n        i      0.....1.....2.....3.....4.....5.....6 \r\n      A[i]     0     100   200  200   200   100    0\r\n\r\nNow you can traverse this array to find max which is 200.\r\ntraversing the array will take O(N) time and updating the two indices for each query will take O(1)* number of queries(m)\r\n\r\noverall complexity=O(N)+O(M) \r\n                  = O(N+M)\r\n\r\nit means = (10^7+10^5) which is less than 10^8 (per second)\r\n\r\n**Note:** If searching for **[video tutorial][1]** , you must check it out **[here][1]** for detailed explanation.\r\n\r\n\r\n  [1]: https://youtu.be/hDhf04AJIRs","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<p>Brute-force solution is not going to work here due to the given time constraint.\nThat is the reason you will get the time out error.</p>\n\n<p>So you need to optimize your code which can be done with the help of prefix sum array.</p>\n\n<p>instead of adding k to all the elements within a range from a to b in an array, accumulate the difference array</p>\n\n<p>Whenever we add anything at any index into an array and apply prefix sum algorithm the same element will be added to every element till the end of the array.</p>\n\n<p>ex- n=5, m=1, a=2 b=5 k=5  </p>\n\n<pre><code>    i     0.....1.....2.....3.....4.....5.....6   //take array of size N+2 to avoid index out of bound\n  A[i]    0     0     0     0     0     0     0\n</code></pre>\n\n<p>Add k=5 to at a=2</p>\n\n<p>A[a]=A[a]+k  // start index from where k element should be added</p>\n\n<pre><code>     i    0.....1.....2.....3.....4.....5.....6 \n   A[i]   0     0     5     0     0     0     0\n</code></pre>\n\n<p>now apply prefix sum algorithm</p>\n\n<pre><code>     i    0.....1.....2.....3.....4.....5.....6 \n  A[i]    0     0     5     5     5     5     5\n</code></pre>\n\n<p>so you can see K=5 add to all the element till the end after applying prefix sum but we don't have to add k till the end. so to negate this effect we have to add -K also after b+1 index so that only from [a,b] range only will have K element addition effect.</p>\n\n<p>A[b+1]=A[b]-k  // to remove the effect of previously added k element after bth index.\nthat's why adding -k in the initial array along with +k.</p>\n\n<pre><code>    i    0.....1.....2.....3.....4.....5.....6 \n  A[i]   0     0     5     0     0     0    -5\n</code></pre>\n\n<p>Now apply prefix sum Array</p>\n\n<pre><code>    i    0.....1.....2.....3.....4.....5.....6 \n  A[i]   0     0     5     5     5     5     0\n</code></pre>\n\n<p>You can see now K=5 got added from a=2 to b=5 which was expected.\nHere we are only updating two indices for every query so complexity will be O(1).</p>\n\n<p>Now apply the same algorithm in the input</p>\n\n<pre><code>         # 0.....1.....2.....3.....4.....5.....6    //taken array of size N+2 to avoid index out of bound\n5 3      # 0     0     0     0     0     0     0\n1 2 100  # 0    100    0   -100    0     0     0       \n2 5 100  # 0    100   100  -100    0     0   -100\n3 4 100  # 0    100   100    0     0  -100   -100\n</code></pre>\n\n<p>To calculate the max prefix sum, accumulate the difference array to 𝑁 while taking the maximum accumulated prefix. </p>\n\n<p>After performing all the operation now apply prefix sum Array</p>\n\n<pre><code>    i      0.....1.....2.....3.....4.....5.....6 \n  A[i]     0     100   200  200   200   100    0\n</code></pre>\n\n<p>Now you can traverse this array to find max which is 200.\ntraversing the array will take O(N) time and updating the two indices for each query will take O(1)* number of queries(m)</p>\n\n<p>overall complexity=O(N)+O(M) \n                  = O(N+M)</p>\n\n<p>it means = (10^7+10^5) which is less than 10^8 (per second)</p>\n\n<p><strong>Note:</strong> If searching for <strong><a href=\"https://youtu.be/hDhf04AJIRs\" rel=\"noreferrer\">video tutorial</a></strong> , you must check it out <strong><a href=\"https://youtu.be/hDhf04AJIRs\" rel=\"noreferrer\">here</a></strong> for detailed explanation.</p>\n"},{"tags":[],"owner":{"account_id":7500544,"reputation":322,"user_id":5699122,"accept_rate":100,"display_name":"Subhi"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1564116435,"creation_date":1564116435,"answer_id":57213337,"question_id":56249944,"body_markdown":"    import java.io.*;\r\n    import java.util.InputMismatchException;\r\n    import java.util.Random;\r\n    \r\n    public class Solution {\r\n        public static void main(String[] args) {\r\n    \r\n            InputStream inputStream = System.in;\r\n            InputReader in = new InputReader(inputStream);\r\n    \r\n            int n = in.readInt();\r\n            int m = in.readInt();\r\n    \r\n            long[] list = new long[n+3];\r\n    \r\n            while(m-- &gt; 0) {\r\n                int a = in.readInt();\r\n                int b = in.readInt();\r\n                long k = in.readLong();\r\n    \r\n                list[a] += k;\r\n                list[b+1] -= k;\r\n            }\r\n    \r\n            long max = 0;\r\n            long c = 0;\r\n            for (int i = 1; i &lt;= n; i++) {\r\n                c += list[i];\r\n                max = Math.max(max, c);\r\n            }\r\n            System.out.println(max);\r\n        }\r\n    }\r\n    \r\n    class InputReader {\r\n    \r\n        private InputStream stream;\r\n        private byte[] buf = new byte[1024];\r\n        private int curChar;\r\n        private int numChars;\r\n        private SpaceCharFilter filter;\r\n    \r\n        public InputReader(InputStream stream) {\r\n            this.stream = stream;\r\n        }\r\n    \r\n        public int read() {\r\n            if (numChars == -1)\r\n                throw new InputMismatchException();\r\n            if (curChar &gt;= numChars) {\r\n                curChar = 0;\r\n                try {\r\n                    numChars = stream.read(buf);\r\n                } catch (IOException e) {\r\n                    throw new InputMismatchException();\r\n                }\r\n                if (numChars &lt;= 0)\r\n                    return -1;\r\n            }\r\n            return buf[curChar++];\r\n        }\r\n    \r\n        public int peek() {\r\n            if (numChars == -1)\r\n                return -1;\r\n            if (curChar &gt;= numChars) {\r\n                curChar = 0;\r\n                try {\r\n                    numChars = stream.read(buf);\r\n                } catch (IOException e) {\r\n                    return -1;\r\n                }\r\n                if (numChars &lt;= 0)\r\n                    return -1;\r\n            }\r\n            return buf[curChar];\r\n        }\r\n    \r\n        public int readInt() {\r\n            int c = read();\r\n            while (isSpaceChar(c))\r\n                c = read();\r\n            int sgn = 1;\r\n            if (c == &#39;-&#39;) {\r\n                sgn = -1;\r\n                c = read();\r\n            }\r\n            int res = 0;\r\n            do {\r\n                if (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;)\r\n                    throw new InputMismatchException();\r\n                res *= 10;\r\n                res += c - &#39;0&#39;;\r\n                c = read();\r\n            } while (!isSpaceChar(c));\r\n            return res * sgn;\r\n        }\r\n    \r\n        public long readLong() {\r\n            int c = read();\r\n            while (isSpaceChar(c))\r\n                c = read();\r\n            int sgn = 1;\r\n            if (c == &#39;-&#39;) {\r\n                sgn = -1;\r\n                c = read();\r\n            }\r\n            long res = 0;\r\n            do {\r\n                if (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;)\r\n                    throw new InputMismatchException();\r\n                res *= 10;\r\n                res += c - &#39;0&#39;;\r\n                c = read();\r\n            } while (!isSpaceChar(c));\r\n            return res * sgn;\r\n        }\r\n    \r\n        public boolean isSpaceChar(int c) {\r\n            if (filter != null)\r\n                return filter.isSpaceChar(c);\r\n            return isWhitespace(c);\r\n        }\r\n    \r\n        public static boolean isWhitespace(int c) {\r\n            return c == &#39; &#39; || c == &#39;\\n&#39; || c == &#39;\\r&#39; || c == &#39;\\t&#39; || c == -1;\r\n        }\r\n    \r\n        public boolean isExhausted() {\r\n            int value;\r\n            while (isSpaceChar(value = peek()) &amp;&amp; value != -1)\r\n                read();\r\n            return value == -1;\r\n        }\r\n    \r\n        public interface SpaceCharFilter {\r\n            public boolean isSpaceChar(int ch);\r\n        }\r\n    }","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<pre><code>import java.io.*;\nimport java.util.InputMismatchException;\nimport java.util.Random;\n\npublic class Solution {\n    public static void main(String[] args) {\n\n        InputStream inputStream = System.in;\n        InputReader in = new InputReader(inputStream);\n\n        int n = in.readInt();\n        int m = in.readInt();\n\n        long[] list = new long[n+3];\n\n        while(m-- &gt; 0) {\n            int a = in.readInt();\n            int b = in.readInt();\n            long k = in.readLong();\n\n            list[a] += k;\n            list[b+1] -= k;\n        }\n\n        long max = 0;\n        long c = 0;\n        for (int i = 1; i &lt;= n; i++) {\n            c += list[i];\n            max = Math.max(max, c);\n        }\n        System.out.println(max);\n    }\n}\n\nclass InputReader {\n\n    private InputStream stream;\n    private byte[] buf = new byte[1024];\n    private int curChar;\n    private int numChars;\n    private SpaceCharFilter filter;\n\n    public InputReader(InputStream stream) {\n        this.stream = stream;\n    }\n\n    public int read() {\n        if (numChars == -1)\n            throw new InputMismatchException();\n        if (curChar &gt;= numChars) {\n            curChar = 0;\n            try {\n                numChars = stream.read(buf);\n            } catch (IOException e) {\n                throw new InputMismatchException();\n            }\n            if (numChars &lt;= 0)\n                return -1;\n        }\n        return buf[curChar++];\n    }\n\n    public int peek() {\n        if (numChars == -1)\n            return -1;\n        if (curChar &gt;= numChars) {\n            curChar = 0;\n            try {\n                numChars = stream.read(buf);\n            } catch (IOException e) {\n                return -1;\n            }\n            if (numChars &lt;= 0)\n                return -1;\n        }\n        return buf[curChar];\n    }\n\n    public int readInt() {\n        int c = read();\n        while (isSpaceChar(c))\n            c = read();\n        int sgn = 1;\n        if (c == '-') {\n            sgn = -1;\n            c = read();\n        }\n        int res = 0;\n        do {\n            if (c &lt; '0' || c &gt; '9')\n                throw new InputMismatchException();\n            res *= 10;\n            res += c - '0';\n            c = read();\n        } while (!isSpaceChar(c));\n        return res * sgn;\n    }\n\n    public long readLong() {\n        int c = read();\n        while (isSpaceChar(c))\n            c = read();\n        int sgn = 1;\n        if (c == '-') {\n            sgn = -1;\n            c = read();\n        }\n        long res = 0;\n        do {\n            if (c &lt; '0' || c &gt; '9')\n                throw new InputMismatchException();\n            res *= 10;\n            res += c - '0';\n            c = read();\n        } while (!isSpaceChar(c));\n        return res * sgn;\n    }\n\n    public boolean isSpaceChar(int c) {\n        if (filter != null)\n            return filter.isSpaceChar(c);\n        return isWhitespace(c);\n    }\n\n    public static boolean isWhitespace(int c) {\n        return c == ' ' || c == '\\n' || c == '\\r' || c == '\\t' || c == -1;\n    }\n\n    public boolean isExhausted() {\n        int value;\n        while (isSpaceChar(value = peek()) &amp;&amp; value != -1)\n            read();\n        return value == -1;\n    }\n\n    public interface SpaceCharFilter {\n        public boolean isSpaceChar(int ch);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8162401,"reputation":1,"user_id":6145994,"display_name":"Muhammad Amjad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1592574639,"creation_date":1592566019,"answer_id":62469264,"question_id":56249944,"body_markdown":"**solution in java for Array Manipulation hackerank  ...\r\ncode does not pass all the cases because of timeout need suggestions to improve**\r\n\r\n```  // Complete the arrayManipulation function below.\r\n    static long arrayManipulation(int n, int[][] queries) {\r\n      ArrayList&lt;Long&gt; list = new ArrayList&lt;Long&gt;(n);\r\n      for(int i=0; i&lt;n; i++){\r\n        list.add(i,0l);\r\n      }\r\n      for(int i=0; i&lt;queries.length; i++){\r\n        int s = queries[i][0];\r\n        int e = queries[i][1];\r\n        long k = queries[i][2];\r\n        int size = 0;\r\n        for(int j = s - 1; j&lt;e; j++){\r\n\r\n        list.set(j, list.get(j) + k);\r\n\r\n        }\r\n      }\r\n      long max  =Collections.max(list);\r\n      return max;\r\n\r\n    }","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<p><strong>solution in java for Array Manipulation hackerank  ...\ncode does not pass all the cases because of timeout need suggestions to improve</strong></p>\n\n<pre><code>    static long arrayManipulation(int n, int[][] queries) {\n      ArrayList&lt;Long&gt; list = new ArrayList&lt;Long&gt;(n);\n      for(int i=0; i&lt;n; i++){\n        list.add(i,0l);\n      }\n      for(int i=0; i&lt;queries.length; i++){\n        int s = queries[i][0];\n        int e = queries[i][1];\n        long k = queries[i][2];\n        int size = 0;\n        for(int j = s - 1; j&lt;e; j++){\n\n        list.set(j, list.get(j) + k);\n\n        }\n      }\n      long max  =Collections.max(list);\n      return max;\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1533884,"reputation":121,"user_id":1430413,"display_name":"Bharat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593148697,"creation_date":1593148697,"answer_id":62588449,"question_id":56249944,"body_markdown":"Implemented the solution in Java for this problem and its working efficiently. Please try if you needed.\r\n\r\n      public long arrayManipulation(int n, int[][] queries) \r\n      {\r\n        if(n==0 || queries==null || queries.length==0){\r\n            return -1;\r\n        }\r\n        long[] computation = new long[n];\r\n\r\n        for (int i = 0; i &lt; queries.length; i++) {\r\n        int a = queries[i][0] - 1;\r\n        int b = queries[i][1] - 1;\r\n        int k = queries[i][2];\r\n\r\n        computation[a] += k;\r\n        if (b + 1 &lt; n ) {\r\n            computation[b + 1] -= k;\r\n        }\r\n        }\r\n\r\n        long max = 0; long sum = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n        sum += computation[i];\r\n        max = Math.max(max, sum);\r\n        }\r\n\r\n        return max;\r\n    }","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<p>Implemented the solution in Java for this problem and its working efficiently. Please try if you needed.</p>\n<pre><code>  public long arrayManipulation(int n, int[][] queries) \n  {\n    if(n==0 || queries==null || queries.length==0){\n        return -1;\n    }\n    long[] computation = new long[n];\n\n    for (int i = 0; i &lt; queries.length; i++) {\n    int a = queries[i][0] - 1;\n    int b = queries[i][1] - 1;\n    int k = queries[i][2];\n\n    computation[a] += k;\n    if (b + 1 &lt; n ) {\n        computation[b + 1] -= k;\n    }\n    }\n\n    long max = 0; long sum = 0;\n    for (int i = 0; i &lt; n; i++) {\n    sum += computation[i];\n    max = Math.max(max, sum);\n    }\n\n    return max;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10735717,"reputation":109,"user_id":7900410,"display_name":"ASisic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596420341,"creation_date":1594567769,"answer_id":62863003,"question_id":56249944,"body_markdown":"    static long arrayManipulation(int n, int[][] queries)\r\n    {\r\n        // To Avoid &quot;Index was outside the bounds of the array.&quot; exception\r\n        long[] numbers = new long[n + 1];\r\n\r\n        for(int i = 0; i &lt; queries.length; i++)\r\n        {\r\n            int a = queries[i][0] - 1;\r\n            int b = queries[i][1];\r\n            int k = queries[i][2];\r\n\r\n            numbers[a] += k;\r\n            numbers[b] -= k;\r\n        }\r\n\r\n        // Calculate sum(s)\r\n        int max=0;\r\n        for(int i = 1; i &lt; numbers.length; i++)\r\n        {\r\n            numbers[i] += numbers[i - 1];\r\n            if(numbers[i]&gt;max)\r\n            {\r\n                 max=numbers[i];\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n\r\n  ","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<pre><code>static long arrayManipulation(int n, int[][] queries)\n{\n    // To Avoid &quot;Index was outside the bounds of the array.&quot; exception\n    long[] numbers = new long[n + 1];\n\n    for(int i = 0; i &lt; queries.length; i++)\n    {\n        int a = queries[i][0] - 1;\n        int b = queries[i][1];\n        int k = queries[i][2];\n\n        numbers[a] += k;\n        numbers[b] -= k;\n    }\n\n    // Calculate sum(s)\n    int max=0;\n    for(int i = 1; i &lt; numbers.length; i++)\n    {\n        numbers[i] += numbers[i - 1];\n        if(numbers[i]&gt;max)\n        {\n             max=numbers[i];\n        }\n    }\n\n    return max;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9519020,"reputation":41,"user_id":7074479,"display_name":"Javed Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634187243,"creation_date":1634187243,"answer_id":69565252,"question_id":56249944,"body_markdown":"    package arrayProblems;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import static java.util.Arrays.*;\r\n    \r\n    \r\n    public class ArrayManipuations {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tint n=10;\r\n    \t\tint[] arr = new int[n];\r\n    \t\tList&lt;List&lt;Integer&gt;&gt; nl = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n    \t\t  \r\n    \t\t  nl=asList(asList(1,5,3),asList(4,8,7),asList(6,9,1));\r\n    \t\t  \r\n    \t\t  for(int i=0;i&lt;nl.size();i++) {\r\n    \t\t\t  \r\n    \t\t\t  for(int j=nl.get(i).get(0);j&lt;=nl.get(i).get(1);j++) {\r\n    \t\t\t\t  arr[j-1]=arr[j-1]+nl.get(i).get(2);\r\n    \t\t\t  } \r\n    \t\t  }\r\n    \t\t  \r\n    \t\t  int max = Integer.MIN_VALUE;\r\n    \t\t  \r\n    \t\t  for(int k=0;k&lt;n;k++) {\r\n    \t\t\t  if(max&lt;arr[k]) {\r\n    \t\t\t\t  max = arr[k];\r\n    \t\t\t\t  arr[k]=max;\r\n    \t\t\t  }\r\n    \t\t  }\r\n    \t\t  \r\n    \t\t  System.out.print(max);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<pre><code>package arrayProblems;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport static java.util.Arrays.*;\n\n\npublic class ArrayManipuations {\n\n    public static void main(String[] args) {\n\n        int n=10;\n        int[] arr = new int[n];\n        List&lt;List&lt;Integer&gt;&gt; nl = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n          \n          nl=asList(asList(1,5,3),asList(4,8,7),asList(6,9,1));\n          \n          for(int i=0;i&lt;nl.size();i++) {\n              \n              for(int j=nl.get(i).get(0);j&lt;=nl.get(i).get(1);j++) {\n                  arr[j-1]=arr[j-1]+nl.get(i).get(2);\n              } \n          }\n          \n          int max = Integer.MIN_VALUE;\n          \n          for(int k=0;k&lt;n;k++) {\n              if(max&lt;arr[k]) {\n                  max = arr[k];\n                  arr[k]=max;\n              }\n          }\n          \n          System.out.print(max);\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":5206598,"reputation":2016,"user_id":4164297,"accept_rate":89,"display_name":"Dil."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15250,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":56250641,"answer_count":7,"score":5,"last_activity_date":1634187243,"creation_date":1558503357,"question_id":56249944,"body_markdown":"I am doing this Array Manipulation problem from hackerrank and it tells me compile error is ***Terminated due to timeout***.\n&lt;br/&gt;\n\nFor small arrays my method work perfectly. **This error only happens for bigger array values.** \n\nHere is the question link. [Question Here][1]\n\n&gt; Starting with a 1-indexed array of zeros and a list of operations, for each operation add a value to each of the array element between two given indices, inclusive. Once all operations have been performed, return the maximum value in your array.\n&gt;\n&gt; For example, the length of your array of zeros . Your list of queries is as follows:\n&gt;\n&gt;     a b k\n&gt;     1 5 3\n&gt;     4 8 7\n&gt;     6 9 1\n&gt;\n&gt; Add the values of  between the indices  and  inclusive:\n&gt;\n&gt;     index -&gt; 1 2 3  4  5 6 7 8 9 10\n&gt;             [0,0,0, 0, 0,0,0,0,0, 0]\n&gt;             [3,3,3, 3, 3,0,0,0,0, 0]\n&gt;             [3,3,3,10,10,7,7,7,0, 0]\n&gt;             [3,3,3,10,10,8,8,8,1, 0]\n&gt;\n&gt;    The largest value is  after all operations are performed.\n\n\nGiven below is my method.\n\n\n     static long arrayManipulation(int n, int[][] queries) {\n        long max = 0L;\n        long[] arr = new long[n];\n        for (int i = 0; i &lt; n; i++) {\n            arr[i] = 0L;\n        }\n        for (int i = 0; i &lt; queries.length; i++) {\n            int[] q = queries[i];\n            int start = q[0] - 1;\n            int end = q[1] - 1;\n            int val = q[2];\n            long tempMax = updateVal(start, end, val, arr);\n            if (tempMax &gt; max) {\n               max = tempMax;\n            }\n        }\n        return max;\n     }\n\n\n\n    static long updateVal(int start, int end, int val, long[] arr) {\n       long max = 0L;\n       for (int i = start; i &lt;= end; i++) {\n           arr[i] = arr[i] + val;\n           if (arr[i] &gt; max) {\n               max = arr[i];\n           }\n       }\n       return max;\n    }\n Given below are few test classes that doesn&#39;t work with my code.\n&lt;br/&gt;\n[Test1][2] [Test2][3] [Test3][4]\n\n\nPlease help me to figure this out. I searched for lots of answers based on java. &lt;br/&gt;\nBut I couldn&#39;t understand them.\n&lt;br/&gt;\nThis is my last resort. Please help.\n\n**Updated after Kanahaiya&#39;s answer**\n\n\n\n        static long arrayManipulation(int n, int[][] queries) {\n            long max = 0L;\n            int a, b, k;\n            int[] arr = new int[n + 2];\n            for (int i = 0; i &lt; queries.length; i++) {\n                a = queries[i][0];\n                b = queries[i][1];\n                k = queries[i][2];\n\n                for (int j = 0; j &lt; arr.length; j++) {\n                    if (j &gt;= a) {\n                        arr[j] = arr[j] + k;\n                    }\n                    if (j &gt; b) {\n                        arr[j] = arr[j] - k;\n                    }\n                }\n            }\n            Arrays.sort(arr);\n            max = arr[arr.length - 1];\n            return max;\n        }\n\n\n  [1]: https://www.hackerrank.com/challenges/crush/problem?h_l=interview&amp;playlist_slugs%5B%5D=interview-preparation-kit&amp;playlist_slugs%5B%5D=arrays\n  [2]: https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input11.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509431&amp;Signature=1jnxnicNhCTVzAeM62sspjyZtsw%3D&amp;response-content-type=text%2Fplain\n  [3]: https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input13.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509421&amp;Signature=rsYFImY%2F3%2FJ3UEYGQX0eHxNcLBQ%3D&amp;response-content-type=text%2Fplain\n  [4]: https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input12.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509422&amp;Signature=uK4UfXBLV%2B0TT6hGmyKmkMYypfs%3D&amp;response-content-type=text%2Fplain","title":"Array Manipulation : HackerRank Questions : JAVA","body":"<p>I am doing this Array Manipulation problem from hackerrank and it tells me compile error is <em><strong>Terminated due to timeout</strong></em>.\n<br/></p>\n<p>For small arrays my method work perfectly. <strong>This error only happens for bigger array values.</strong></p>\n<p>Here is the question link. <a href=\"https://www.hackerrank.com/challenges/crush/problem?h_l=interview&amp;playlist_slugs%5B%5D=interview-preparation-kit&amp;playlist_slugs%5B%5D=arrays\" rel=\"nofollow noreferrer\">Question Here</a></p>\n<blockquote>\n<p>Starting with a 1-indexed array of zeros and a list of operations, for each operation add a value to each of the array element between two given indices, inclusive. Once all operations have been performed, return the maximum value in your array.</p>\n<p>For example, the length of your array of zeros . Your list of queries is as follows:</p>\n<pre><code>a b k\n1 5 3\n4 8 7\n6 9 1\n</code></pre>\n<p>Add the values of  between the indices  and  inclusive:</p>\n<pre><code>index -&gt; 1 2 3  4  5 6 7 8 9 10\n        [0,0,0, 0, 0,0,0,0,0, 0]\n        [3,3,3, 3, 3,0,0,0,0, 0]\n        [3,3,3,10,10,7,7,7,0, 0]\n        [3,3,3,10,10,8,8,8,1, 0]\n</code></pre>\n<p>The largest value is  after all operations are performed.</p>\n</blockquote>\n<p>Given below is my method.</p>\n<pre><code> static long arrayManipulation(int n, int[][] queries) {\n    long max = 0L;\n    long[] arr = new long[n];\n    for (int i = 0; i &lt; n; i++) {\n        arr[i] = 0L;\n    }\n    for (int i = 0; i &lt; queries.length; i++) {\n        int[] q = queries[i];\n        int start = q[0] - 1;\n        int end = q[1] - 1;\n        int val = q[2];\n        long tempMax = updateVal(start, end, val, arr);\n        if (tempMax &gt; max) {\n           max = tempMax;\n        }\n    }\n    return max;\n }\n\n\n\nstatic long updateVal(int start, int end, int val, long[] arr) {\n   long max = 0L;\n   for (int i = start; i &lt;= end; i++) {\n       arr[i] = arr[i] + val;\n       if (arr[i] &gt; max) {\n           max = arr[i];\n       }\n   }\n   return max;\n}\n</code></pre>\n<p>Given below are few test classes that doesn't work with my code.\n<br/>\n<a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input11.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509431&amp;Signature=1jnxnicNhCTVzAeM62sspjyZtsw%3D&amp;response-content-type=text%2Fplain\" rel=\"nofollow noreferrer\">Test1</a> <a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input13.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509421&amp;Signature=rsYFImY%2F3%2FJ3UEYGQX0eHxNcLBQ%3D&amp;response-content-type=text%2Fplain\" rel=\"nofollow noreferrer\">Test2</a> <a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/1636/input12.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1558509422&amp;Signature=uK4UfXBLV%2B0TT6hGmyKmkMYypfs%3D&amp;response-content-type=text%2Fplain\" rel=\"nofollow noreferrer\">Test3</a></p>\n<p>Please help me to figure this out. I searched for lots of answers based on java. <br/>\nBut I couldn't understand them.\n<br/>\nThis is my last resort. Please help.</p>\n<p><strong>Updated after Kanahaiya's answer</strong></p>\n<pre><code>    static long arrayManipulation(int n, int[][] queries) {\n        long max = 0L;\n        int a, b, k;\n        int[] arr = new int[n + 2];\n        for (int i = 0; i &lt; queries.length; i++) {\n            a = queries[i][0];\n            b = queries[i][1];\n            k = queries[i][2];\n\n            for (int j = 0; j &lt; arr.length; j++) {\n                if (j &gt;= a) {\n                    arr[j] = arr[j] + k;\n                }\n                if (j &gt; b) {\n                    arr[j] = arr[j] - k;\n                }\n            }\n        }\n        Arrays.sort(arr);\n        max = arr[arr.length - 1];\n        return max;\n    }\n</code></pre>\n"},{"tags":["java","spring","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634157727,"creation_date":1634157727,"answer_id":69562073,"question_id":69561557,"body_markdown":"You need to get the value of the cell and user equals.\r\nhttps://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html\r\n \r\n\r\n    if (pedidoExcel.equals(teste.getStringCellValue()))\r\n                 return 1;","title":"Validation string with apache POI","body":"<p>You need to get the value of the cell and user equals.\n<a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html\" rel=\"nofollow noreferrer\">https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html</a></p>\n<pre><code>if (pedidoExcel.equals(teste.getStringCellValue()))\n             return 1;\n</code></pre>\n"}],"owner":{"account_id":20117620,"reputation":29,"user_id":14752674,"display_name":"johny campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69562073,"answer_count":1,"score":-1,"last_activity_date":1634186860,"creation_date":1634154692,"question_id":69561557,"body_markdown":"i need to do a validation, i need to know if the cell c3 there is the String &quot;Numero&quot;\r\n\r\nbut i get one error:\r\n\r\n    &gt; private int validaLinha(Row row) { String pedidoExcel = “Numero”;\r\n    &gt; \r\n    &gt;     Cell teste = row.getCell(new CellReference(&quot;C3&quot;).getCol());\r\n    &gt; \r\n    &gt;     try{\r\n    &gt;         if (teste == null || teste.getCellType() == Cell.CELL_TYPE_BLANK)\r\n    &gt;             return 0;\r\n    &gt; \r\n    &gt;         if (teste == pedidoExcel)\r\n    &gt;             return 1;\r\n    &gt; \r\n    &gt;     }catch (Exception e){\r\n    &gt;         return -1;\r\n    &gt;     }\r\n    }\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/svtW9.png","title":"Validation string with apache POI","body":"<p>i need to do a validation, i need to know if the cell c3 there is the String &quot;Numero&quot;</p>\n<p>but i get one error:</p>\n<pre><code>&gt; private int validaLinha(Row row) { String pedidoExcel = “Numero”;\n&gt; \n&gt;     Cell teste = row.getCell(new CellReference(&quot;C3&quot;).getCol());\n&gt; \n&gt;     try{\n&gt;         if (teste == null || teste.getCellType() == Cell.CELL_TYPE_BLANK)\n&gt;             return 0;\n&gt; \n&gt;         if (teste == pedidoExcel)\n&gt;             return 1;\n&gt; \n&gt;     }catch (Exception e){\n&gt;         return -1;\n&gt;     }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/svtW9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","datetime","iso8601"],"comments":[{"owner":{"account_id":220462,"reputation":177831,"user_id":477878,"display_name":"Joachim Isaksson"},"score":0,"creation_date":1634187289,"post_id":69565179,"comment_id":122959132,"body_markdown":"Try `2021-07-27T09:58:51.000+00:00`, which I think is the valid ISO format.","body":"Try <code>2021-07-27T09:58:51.000+00:00</code>, which I think is the valid ISO format."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634188514,"post_id":69565179,"comment_id":122959337,"body_markdown":"Does this answer your question? [Why can&#39;t OffsetDateTime parse &#39;2016-08-24T18:38:05.507+0000&#39; in Java 8](https://stackoverflow.com/questions/39133828/why-cant-offsetdatetime-parse-2016-08-24t183805-5070000-in-java-8). Does [this](https://stackoverflow.com/questions/18823627/java-string-to-datetime), [this](https://stackoverflow.com/questions/43360852/cannot-parse-string-in-iso-8601-format-lacking-colon-in-offset-to-java-8-date), [this](https://stackoverflow.com/questions/48230408/parse-and-retrieve-timezone-offset-from-date-time)?","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/39133828/why-cant-offsetdatetime-parse-2016-08-24t183805-5070000-in-java-8\">Why can&#39;t OffsetDateTime parse &#39;2016-08-24T18:38:05.507+0000&#39; in Java 8</a>. Does <a href=\"https://stackoverflow.com/questions/18823627/java-string-to-datetime\">this</a>, <a href=\"https://stackoverflow.com/questions/43360852/cannot-parse-string-in-iso-8601-format-lacking-colon-in-offset-to-java-8-date\">this</a>, <a href=\"https://stackoverflow.com/questions/48230408/parse-and-retrieve-timezone-offset-from-date-time\">this</a>?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634188749,"post_id":69565179,"comment_id":122959386,"body_markdown":"I’m unsure which original you find best. There’s also [this](https://stackoverflow.com/questions/48412345/convert-date-into-aest-using-java), [this](https://stackoverflow.com/questions/48666263/java-date-parsing-why-do-i-get-an-error), [this](https://stackoverflow.com/questions/53291240/java-to-mysql-i-need-convert-from-string-parametre-to-timestamp), [this](https://stackoverflow.com/questions/61269697/convert-a-string-to-zoneddatetime), [this](https://stackoverflow.com/questions/65844748/how-to-parse-zoneddatetime-with-milliseconds) and more.","body":"I’m unsure which original you find best. There’s also <a href=\"https://stackoverflow.com/questions/48412345/convert-date-into-aest-using-java\">this</a>, <a href=\"https://stackoverflow.com/questions/48666263/java-date-parsing-why-do-i-get-an-error\">this</a>, <a href=\"https://stackoverflow.com/questions/53291240/java-to-mysql-i-need-convert-from-string-parametre-to-timestamp\">this</a>, <a href=\"https://stackoverflow.com/questions/61269697/convert-a-string-to-zoneddatetime\">this</a>, <a href=\"https://stackoverflow.com/questions/65844748/how-to-parse-zoneddatetime-with-milliseconds\">this</a> and more."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634188824,"post_id":69565179,"comment_id":122959405,"body_markdown":"@JoachimIsaksson The string in the question is valid according to [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) too. The colon in the offset is optional.","body":"@JoachimIsaksson The string in the question is valid according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> too. The colon in the offset is optional."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634191145,"post_id":69565179,"comment_id":122959881,"body_markdown":"I unconditionally recommend parsing into an`OffsetDateTime` using the two-arg `OffsetDateTime.parse(CharSequence, DateTimeFormatter)` and a custom formatter like `new DateTimeFormatterBuilder().append(DateTimeFormatter.ISO_LOCAL_DATE_TIME).appendOffset(&quot;+HHmmss&quot;, &quot;+0000&quot;).toFormatter(Locale.ROOT)`.","body":"I unconditionally recommend parsing into an<code>OffsetDateTime</code> using the two-arg <code>OffsetDateTime.parse(CharSequence, DateTimeFormatter)</code> and a custom formatter like <code>new DateTimeFormatterBuilder().append(DateTimeFormatter.ISO_LOCA&zwnj;&#8203;L_DATE_TIME).appendO&zwnj;&#8203;ffset(&quot;+HHmmss&quot;, &quot;+0000&quot;).toFormatter(Locale.ROOT)</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1634191688,"post_id":69565179,"comment_id":122960011,"body_markdown":"[See the recommended way run live on IdeOne.com](https://ideone.com/KXbFCx).","body":"<a href=\"https://ideone.com/KXbFCx\" rel=\"nofollow noreferrer\">See the recommended way run live on IdeOne.com</a>."},{"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"score":1,"creation_date":1634203113,"post_id":69565179,"comment_id":122964080,"body_markdown":"@BobKuhar, very much the same problem what I am trying to solve","body":"@BobKuhar, very much the same problem what I am trying to solve"}],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634203384,"answer_count":0,"score":1,"last_activity_date":1634186496,"creation_date":1634186496,"question_id":69565179,"body_markdown":"Is `2021-07-27T09:58:51.000+0000` a right ISO 8601 format? Could not locate an online validator which claims to say if this is compliant or not.\r\n\r\nHad issues while parsing this date below are the ways tried and the result is below:\r\n\r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.time.DateTimeException;\r\n    import java.time.Instant;\r\n    import java.time.OffsetDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.format.DateTimeParseException;\r\n    import java.time.temporal.TemporalAccessor;\r\n    import java.util.Date;\r\n    \r\n    public class DateParser {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString s = &quot;2021-07-27T09:58:51.000+0000&quot;;\r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;Success 001: &quot; + OffsetDateTime.parse(s));\r\n    \t\t} catch (DateTimeParseException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: OffsetDateTime.parse: &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tDateFormat df1 = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;);\r\n    \t\t\tSystem.out.println(&quot;Success 002: &quot; + df1.parse(s));\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: SimpleDateFormat(\\&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ: &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tDateFormat df1 = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX&quot;);\r\n    \t\t\tSystem.out.println(&quot;Success 003: &quot; + df1.parse(s));\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: SimpleDateFormat(\\&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX\\&quot;): &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tTemporalAccessor ta = DateTimeFormatter.ISO_INSTANT.parse(s);\r\n    \t\t\tInstant i = Instant.from(ta);\r\n    \t\t\tSystem.out.println(&quot;Success 004: &quot; + Date.from(i));\r\n    \t\t} catch (DateTimeException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: TemporalAccessor: &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;Success 005: &quot; + javax.xml.bind.DatatypeConverter.parseDateTime(s));\r\n    \t\t} catch (IllegalArgumentException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: javax.xml.bind.DatatypeConverter: &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;Success 006: &quot; + org.apache.commons.lang3.time.DateUtils.parseDate(s,\r\n    \t\t\t\t\t&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;, &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX&quot;));\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: org.apache.commons.lang3.time.DateUtils: &quot; + e.getMessage());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;Success 007: &quot; + new org.joda.time.DateTime(s).toDate());\r\n    \t\t} catch (IllegalArgumentException e) {\r\n    \t\t\tSystem.err.println(&quot;Fail: org.joda.time.DateTime: &quot; + e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nResult\r\n\r\n    Fail: OffsetDateTime.parse: Text &#39;2021-07-27T09:58:51.000+0000&#39; could not be parsed at index 23\r\n    Success 002: Tue Jul 27 15:28:51 IST 2021\r\n    Fail: SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX&quot;): Unparseable date: &quot;2021-07-27T09:58:51.000+0000&quot;\r\n    Fail: TemporalAccessor: Text &#39;2021-07-27T09:58:51.000+0000&#39; could not be parsed at index 23\r\n    Fail: javax.xml.bind.DatatypeConverter: 2021-07-27T09:58:51.000+0000\r\n    Success 006: Tue Jul 27 15:28:51 IST 2021\r\n    Success 007: Tue Jul 27 15:28:51 IST 2021\r\n\r\nFrom the above result, could you suggest a recommended way of parsing the above kind of date and any other ISO date string?","title":"Parsing of ISO 8601 Date String in Java","body":"<p>Is <code>2021-07-27T09:58:51.000+0000</code> a right ISO 8601 format? Could not locate an online validator which claims to say if this is compliant or not.</p>\n<p>Had issues while parsing this date below are the ways tried and the result is below:</p>\n<pre><code>import java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.time.DateTimeException;\nimport java.time.Instant;\nimport java.time.OffsetDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\nimport java.time.temporal.TemporalAccessor;\nimport java.util.Date;\n\npublic class DateParser {\n    public static void main(String[] args) {\n        String s = &quot;2021-07-27T09:58:51.000+0000&quot;;\n        try {\n            System.out.println(&quot;Success 001: &quot; + OffsetDateTime.parse(s));\n        } catch (DateTimeParseException e) {\n            System.err.println(&quot;Fail: OffsetDateTime.parse: &quot; + e.getMessage());\n        }\n\n        try {\n            DateFormat df1 = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZ&quot;);\n            System.out.println(&quot;Success 002: &quot; + df1.parse(s));\n        } catch (ParseException e) {\n            System.err.println(&quot;Fail: SimpleDateFormat(\\&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZ: &quot; + e.getMessage());\n        }\n\n        try {\n            DateFormat df1 = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSXXX&quot;);\n            System.out.println(&quot;Success 003: &quot; + df1.parse(s));\n        } catch (ParseException e) {\n            System.err.println(&quot;Fail: SimpleDateFormat(\\&quot;yyyy-MM-dd'T'HH:mm:ss.SSSXXX\\&quot;): &quot; + e.getMessage());\n        }\n\n        try {\n            TemporalAccessor ta = DateTimeFormatter.ISO_INSTANT.parse(s);\n            Instant i = Instant.from(ta);\n            System.out.println(&quot;Success 004: &quot; + Date.from(i));\n        } catch (DateTimeException e) {\n            System.err.println(&quot;Fail: TemporalAccessor: &quot; + e.getMessage());\n        }\n\n        try {\n            System.out.println(&quot;Success 005: &quot; + javax.xml.bind.DatatypeConverter.parseDateTime(s));\n        } catch (IllegalArgumentException e) {\n            System.err.println(&quot;Fail: javax.xml.bind.DatatypeConverter: &quot; + e.getMessage());\n        }\n\n        try {\n            System.out.println(&quot;Success 006: &quot; + org.apache.commons.lang3.time.DateUtils.parseDate(s,\n                    &quot;yyyy-MM-dd'T'HH:mm:ss.SSSZ&quot;, &quot;yyyy-MM-dd'T'HH:mm:ss.SSSXXX&quot;));\n        } catch (ParseException e) {\n            System.err.println(&quot;Fail: org.apache.commons.lang3.time.DateUtils: &quot; + e.getMessage());\n        }\n\n        try {\n            System.out.println(&quot;Success 007: &quot; + new org.joda.time.DateTime(s).toDate());\n        } catch (IllegalArgumentException e) {\n            System.err.println(&quot;Fail: org.joda.time.DateTime: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Result</p>\n<pre><code>Fail: OffsetDateTime.parse: Text '2021-07-27T09:58:51.000+0000' could not be parsed at index 23\nSuccess 002: Tue Jul 27 15:28:51 IST 2021\nFail: SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSXXX&quot;): Unparseable date: &quot;2021-07-27T09:58:51.000+0000&quot;\nFail: TemporalAccessor: Text '2021-07-27T09:58:51.000+0000' could not be parsed at index 23\nFail: javax.xml.bind.DatatypeConverter: 2021-07-27T09:58:51.000+0000\nSuccess 006: Tue Jul 27 15:28:51 IST 2021\nSuccess 007: Tue Jul 27 15:28:51 IST 2021\n</code></pre>\n<p>From the above result, could you suggest a recommended way of parsing the above kind of date and any other ISO date string?</p>\n"},{"tags":["python","java","scala","apache-spark","cmd"],"comments":[{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1634226814,"post_id":69565171,"comment_id":122974208,"body_markdown":"I think you need to first of all specify what exactly you mean when you say &quot;as administrator&quot;. Usually this means running as yourself, but with an administrative token, not running as the user named administrator. Unless you can provide all of the information we need to be able to reproduce your specific problem, we cannot assist you to fix it. Please use the [edit] facility to make the required improvements to your question, so that we are better furnished to assist you.","body":"I think you need to first of all specify what exactly you mean when you say &quot;as administrator&quot;. Usually this means running as yourself, but with an administrative token, not running as the user named administrator. Unless you can provide all of the information we need to be able to reproduce your specific problem, we cannot assist you to fix it. Please use the <a href=\"https://stackoverflow.com/posts/69565171/edit\">edit</a> facility to make the required improvements to your question, so that we are better furnished to assist you."},{"owner":{"account_id":22778461,"reputation":31,"user_id":16934736,"display_name":"Abhay"},"score":0,"creation_date":1634549364,"post_id":69565171,"comment_id":123045490,"body_markdown":"right clicking cmd and running as adminstrator","body":"right clicking cmd and running as adminstrator"},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1634553544,"post_id":69565171,"comment_id":123047106,"body_markdown":"As I said then, when you do that, you do not become a different user. If something is not working for you without the privilege token, then it means that you do not have the required permissions to do it. `Access is denied` seems a fairly clear indication of that.","body":"As I said then, when you do that, you do not become a different user. If something is not working for you without the privilege token, then it means that you do not have the required permissions to do it. <code>Access is denied</code> seems a fairly clear indication of that."}],"owner":{"account_id":22778461,"reputation":31,"user_id":16934736,"display_name":"Abhay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634186422,"creation_date":1634186422,"question_id":69565171,"body_markdown":"I tried the following basic scala command (for apache spark) on cmd normally and got an error: -\r\n\r\n    val no = Array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\r\n    no.collect()\r\n\r\nERRROR:-\r\n\r\n    Exception in thread &quot;main&quot; java.io.FileNotFoundException: C:\\Users\\abhay.saini\\.scala_history (Access is denied)\r\n    \r\n    ERROR ShutdownHookManager: Exception while deleting Spark temp dir: C:\\Users\\abhay.saini\\AppData\\Local\\Temp\\spark-c774e989-eccc-4f2a-92f7-018f2cafa507\\repl-8e3a8237-a9fc-4101-99fc-153e4f584f1a\r\n    java.io.IOException: Failed to delete: C:\\Users\\abhay.saini\\AppData\\Local\\Temp\\spark-c774e989-eccc-4f2a-92f7-018f2cafa507\\repl-8e3a8237-a9fc-4101-99fc-153e4f584f1a\\$line15\\$read.class\r\n\r\nand it immediately comes out of the spark environment.\r\n\r\nHowever, while running the same thing on cmd (as administrator) it gives the correct output.\r\n\r\nWhat&#39;s the deal here ? Is it because of the environment variables ? (my user variables (python/spark/java home) are different from system variables) because &quot;running as admin&quot; means using system variables as opposed to user variables?","title":"What&#39;s the difference between opening spark-shell on cmd versus on &quot;opening cmd as adminstrator&quot;?","body":"<p>I tried the following basic scala command (for apache spark) on cmd normally and got an error: -</p>\n<pre><code>val no = Array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\nno.collect()\n</code></pre>\n<p>ERRROR:-</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.FileNotFoundException: C:\\Users\\abhay.saini\\.scala_history (Access is denied)\n\nERROR ShutdownHookManager: Exception while deleting Spark temp dir: C:\\Users\\abhay.saini\\AppData\\Local\\Temp\\spark-c774e989-eccc-4f2a-92f7-018f2cafa507\\repl-8e3a8237-a9fc-4101-99fc-153e4f584f1a\njava.io.IOException: Failed to delete: C:\\Users\\abhay.saini\\AppData\\Local\\Temp\\spark-c774e989-eccc-4f2a-92f7-018f2cafa507\\repl-8e3a8237-a9fc-4101-99fc-153e4f584f1a\\$line15\\$read.class\n</code></pre>\n<p>and it immediately comes out of the spark environment.</p>\n<p>However, while running the same thing on cmd (as administrator) it gives the correct output.</p>\n<p>What's the deal here ? Is it because of the environment variables ? (my user variables (python/spark/java home) are different from system variables) because &quot;running as admin&quot; means using system variables as opposed to user variables?</p>\n"},{"tags":["java","android","ionic-framework","capacitor"],"answers":[{"tags":[],"owner":{"account_id":2774298,"reputation":1156,"user_id":2904959,"accept_rate":88,"display_name":"1antares1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632407807,"creation_date":1632407807,"answer_id":69302096,"question_id":69289482,"body_markdown":"Try these steps to see:\r\n\r\n 1. Delete the Buildconfig.java\r\n 2. Refactor -&gt; Rename, error class.\r\n 3. Build -&gt; Rebuild Project!\r\n --\r\n\r\nAnd if not, share what you have in the file: build.gradle in the **defaultConfig** section and AndroidManifest from the **manifest** section.","title":"Custom Capacitor Plugin - add Android dependencies","body":"<p>Try these steps to see:</p>\n<ol>\n<li>Delete the Buildconfig.java</li>\n<li>Refactor -&gt; Rename, error class.</li>\n<li>Build -&gt; Rebuild Project!\n--</li>\n</ol>\n<p>And if not, share what you have in the file: build.gradle in the <strong>defaultConfig</strong> section and AndroidManifest from the <strong>manifest</strong> section.</p>\n"},{"tags":[],"owner":{"account_id":2348943,"reputation":5378,"user_id":2058333,"accept_rate":46,"display_name":"El Dude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634185688,"creation_date":1634185688,"answer_id":69565084,"question_id":69289482,"body_markdown":"I had to add \r\n```\r\nimplementation &quot;com.google.android.play:core:1.10.2&quot;\r\n```\r\n\r\nto my `build.grade` file.","title":"Custom Capacitor Plugin - add Android dependencies","body":"<p>I had to add</p>\n<pre><code>implementation &quot;com.google.android.play:core:1.10.2&quot;\n</code></pre>\n<p>to my <code>build.grade</code> file.</p>\n"}],"owner":{"account_id":2348943,"reputation":5378,"user_id":2058333,"accept_rate":46,"display_name":"El Dude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634185688,"creation_date":1632335060,"question_id":69289482,"body_markdown":"How can I add an Android build dependency to my custom capacitor plugin for app rate based on \r\n\r\nhttps://developer.android.com/guide/playcore/in-app-review/kotlin-java#java\r\n\r\nIt fails the build with not finding `com.google.android.play.core` so I wonder how can I add it as a dependency to the component build?\r\nBelow is the error\r\n\r\n\r\n```\r\n/AppRate.java:9: error: package com.google.android.play.core.review does not exist\r\nimport com.google.android.play.core.review.ReviewInfo;\r\n                                          ^\r\n/AppRate.java:10: error: package com.google.android.play.core.review does not exist\r\nimport com.google.android.play.core.review.ReviewManager;\r\n                                          ^\r\n/AppRate.java:11: error: package com.google.android.play.core.review does not exist\r\nimport com.google.android.play.core.review.ReviewManagerFactory;\r\n                                          ^\r\n/AppRate.java:12: error: package com.google.android.play.core.tasks does not exist\r\nimport com.google.android.play.core.tasks.Task;\r\n                                         ^\r\n/AppRate.java:17: error: class AppRate clashes with package of same name\r\npublic class AppRate extends Plugin {\r\n\r\n       ^\r\n/AppRate/BuildConfig.java:4: error: package me.url.AppRate clashes with class of same name\r\npackage me.url.AppRate;\r\n^\r\n/AppRate.java:21: error: cannot find symbol\r\n        Activity activity = this.cordova.getActivity();\r\n```\r\n\r\nI am also not sure about the clash error, but that is a separate topic I guess.\r\n\r\nNote - I tried integrating the ionic native plugins but had weird build issues. iOS now works with my custom plugin, fixing Android now.\r\n\r\n","title":"Custom Capacitor Plugin - add Android dependencies","body":"<p>How can I add an Android build dependency to my custom capacitor plugin for app rate based on</p>\n<p><a href=\"https://developer.android.com/guide/playcore/in-app-review/kotlin-java#java\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/playcore/in-app-review/kotlin-java#java</a></p>\n<p>It fails the build with not finding <code>com.google.android.play.core</code> so I wonder how can I add it as a dependency to the component build?\nBelow is the error</p>\n<pre><code>/AppRate.java:9: error: package com.google.android.play.core.review does not exist\nimport com.google.android.play.core.review.ReviewInfo;\n                                          ^\n/AppRate.java:10: error: package com.google.android.play.core.review does not exist\nimport com.google.android.play.core.review.ReviewManager;\n                                          ^\n/AppRate.java:11: error: package com.google.android.play.core.review does not exist\nimport com.google.android.play.core.review.ReviewManagerFactory;\n                                          ^\n/AppRate.java:12: error: package com.google.android.play.core.tasks does not exist\nimport com.google.android.play.core.tasks.Task;\n                                         ^\n/AppRate.java:17: error: class AppRate clashes with package of same name\npublic class AppRate extends Plugin {\n\n       ^\n/AppRate/BuildConfig.java:4: error: package me.url.AppRate clashes with class of same name\npackage me.url.AppRate;\n^\n/AppRate.java:21: error: cannot find symbol\n        Activity activity = this.cordova.getActivity();\n</code></pre>\n<p>I am also not sure about the clash error, but that is a separate topic I guess.</p>\n<p>Note - I tried integrating the ionic native plugins but had weird build issues. iOS now works with my custom plugin, fixing Android now.</p>\n"},{"tags":["java","import","package"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634183972,"post_id":69564813,"comment_id":122958641,"body_markdown":"You are talking about an `enum` declared inside a `class`, correct?","body":"You are talking about an <code>enum</code> declared inside a <code>class</code>, correct?"},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1634183994,"post_id":69564813,"comment_id":122958648,"body_markdown":"The real answer here is &quot;use an IDE that manages all this for you&quot;.","body":"The real answer here is &quot;use an IDE that manages all this for you&quot;."},{"owner":{"account_id":22924121,"reputation":3,"user_id":17059492,"display_name":"Steve"},"score":0,"creation_date":1634184187,"post_id":69564813,"comment_id":122958671,"body_markdown":"@StephenC Yes, the enum is inside the class that I already imported by the package but I have to declare it separately to fix the issue.","body":"@StephenC Yes, the enum is inside the class that I already imported by the package but I have to declare it separately to fix the issue."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634190386,"post_id":69564813,"comment_id":122959730,"body_markdown":"You can either import the nested enum (e.g. `import some.pkg.Class1.MyEnum;`), or you can refer to it qualified by the type name of the enclosing class.  But yes, `import some.pkg.*` on-demand imports the top level classes of `some.pkg` ... and nothing else.  Note that this is consistent with `import some.pkg.*;` not importing &quot;sub-packages&quot;.","body":"You can either import the nested enum (e.g. <code>import some.pkg.Class1.MyEnum;</code>), or you can refer to it qualified by the type name of the enclosing class.  But yes, <code>import some.pkg.*</code> on-demand imports the top level classes of <code>some.pkg</code> ... and nothing else.  Note that this is consistent with <code>import some.pkg.*;</code> not importing &quot;sub-packages&quot;."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634190698,"post_id":69564813,"comment_id":122959788,"body_markdown":"There is no fix for this.  It is working ... as designed.","body":"There is no fix for this.  It is working ... as designed."},{"owner":{"account_id":32581,"reputation":76091,"user_id":90527,"accept_rate":85,"display_name":"outis"},"score":0,"creation_date":1634223988,"post_id":69564813,"comment_id":122972860,"body_markdown":"Please read over &quot;[How do I ask a good question?](https://stackoverflow.com/help/how-to-ask)&quot;, especially the sections on code and on image use.","body":"Please read over &quot;<a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>&quot;, especially the sections on code and on image use."}],"answers":[{"tags":[],"owner":{"account_id":21921847,"reputation":84,"user_id":16204988,"display_name":"gauravmandall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634185470,"creation_date":1634185470,"answer_id":69565055,"question_id":69564813,"body_markdown":"**Is this Android Studio if yes then :**\r\n\r\nUse alt + enter to import classes in Android Studio\r\nor use IDE Features just go to File&gt;Setting&gt;Editor&gt;General&gt;Auto Import\r\n\r\nand configure as per your needs [see this][1]\r\n\r\n*If not go through your IDE settings*\r\n\r\n  [1]: https://i.stack.imgur.com/bx4ra.png","title":"Is there a way I can import all the classes without importing specific classes in this case?","body":"<p><strong>Is this Android Studio if yes then :</strong></p>\n<p>Use alt + enter to import classes in Android Studio\nor use IDE Features just go to File&gt;Setting&gt;Editor&gt;General&gt;Auto Import</p>\n<p>and configure as per your needs <a href=\"https://i.stack.imgur.com/bx4ra.png\" rel=\"nofollow noreferrer\">see this</a></p>\n<p><em>If not go through your IDE settings</em></p>\n"}],"owner":{"account_id":22924121,"reputation":3,"user_id":17059492,"display_name":"Steve"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634223813,"accepted_answer_id":69565055,"answer_count":1,"score":0,"last_activity_date":1634185470,"creation_date":1634182816,"question_id":69564813,"body_markdown":"In this case, I had to import a enum inside one of the files I have already imported by using *. I&#39;m forced to import it since it cannot resolve to a variable. Any suggestion to fix this? [Packages imported for now][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yhLgQ.png","title":"Is there a way I can import all the classes without importing specific classes in this case?","body":"<p>In this case, I had to import a enum inside one of the files I have already imported by using *. I'm forced to import it since it cannot resolve to a variable. Any suggestion to fix this? <a href=\"https://i.stack.imgur.com/yhLgQ.png\" rel=\"nofollow noreferrer\">Packages imported for now</a></p>\n"},{"tags":["java","amazon-web-services","amazon-sagemaker"],"owner":{"account_id":20938198,"reputation":161,"user_id":15382918,"display_name":"Matthew Metros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634184814,"creation_date":1634184814,"question_id":69564996,"body_markdown":"I am importing the tabula library and when I call this library&#39;s methods, I receive the following error in SageMaker.\r\n\r\n    JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\r\n\r\nHow can I install Java to SageMaker?\r\n\r\nBelow is my code:\r\n\r\n    import tabula\r\n    pdf_path = &quot;https://github.com/chezou/tabula-py/raw/master/tests/resources/data.pdf&quot;\r\n    dfs = tabula.read_pdf(pdf_path, stream=True)\r\n   \r\n\r\nOnce I enter in this code, I receive the error message that SageMaker does not have Java.\r\n\r\n\r\n\r\n","title":"Ensure Java is installed and PATH is set for `java` in Amazon SageMaker Jupyter Notebook","body":"<p>I am importing the tabula library and when I call this library's methods, I receive the following error in SageMaker.</p>\n<pre><code>JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\n</code></pre>\n<p>How can I install Java to SageMaker?</p>\n<p>Below is my code:</p>\n<pre><code>import tabula\npdf_path = &quot;https://github.com/chezou/tabula-py/raw/master/tests/resources/data.pdf&quot;\ndfs = tabula.read_pdf(pdf_path, stream=True)\n</code></pre>\n<p>Once I enter in this code, I receive the error message that SageMaker does not have Java.</p>\n"},{"tags":["java","android","oracle","flutter","dart"],"comments":[{"owner":{"account_id":5881877,"reputation":356,"user_id":9235734,"display_name":"Nilesh PS"},"score":0,"creation_date":1602860389,"post_id":64391576,"comment_id":113862555,"body_markdown":"Checkout https://stackoverflow.com/questions/16541627/javax-net-ssl-sslexception-received-fatal-alert-protocol-version","body":"Checkout <a href=\"https://stackoverflow.com/questions/16541627/javax-net-ssl-sslexception-received-fatal-alert-protocol-version\" title=\"javax net ssl sslexception received fatal alert protocol version\">stackoverflow.com/questions/16541627/&hellip;</a>"},{"owner":{"account_id":19694325,"reputation":127,"user_id":14418509,"display_name":"Static_Subhang"},"score":0,"creation_date":1602860566,"post_id":64391576,"comment_id":113862641,"body_markdown":"I have seen that , but it did not help me. Also i am a completly new to this.","body":"I have seen that , but it did not help me. Also i am a completly new to this."}],"answers":[{"tags":[],"owner":{"account_id":19694325,"reputation":127,"user_id":14418509,"display_name":"Static_Subhang"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634183880,"creation_date":1602862795,"answer_id":64392283,"question_id":64391576,"body_markdown":"This issue is resoleved.\r\n\r\nfirstly I updated my jdk from version 7 to 8 \r\nyou can also download that form here https://www.techspot.com/downloads/5198-java-jre.html\r\n\r\nthen afterwards change the JAVA_HOME path in your system environment variables .\r\n\r\nAfterwards i would suggest a cold shut-down and starting again this time Android studio will throw error saying license not accepted. \r\n\r\nOpen command prompt and run `flutter doctor`. \r\n\r\nIt will show you the exact issue and just accept all the licenses. \r\n\r\nAfter that you are good to go. ","title":"Android Studio throwing &quot;Exception in thread &quot;main&quot; javax.net.ssl.SSLException: Received fatal alert: protocol_version&quot;","body":"<p>This issue is resoleved.</p>\n<p>firstly I updated my jdk from version 7 to 8\nyou can also download that form here <a href=\"https://www.techspot.com/downloads/5198-java-jre.html\" rel=\"nofollow noreferrer\">https://www.techspot.com/downloads/5198-java-jre.html</a></p>\n<p>then afterwards change the JAVA_HOME path in your system environment variables .</p>\n<p>Afterwards i would suggest a cold shut-down and starting again this time Android studio will throw error saying license not accepted.</p>\n<p>Open command prompt and run <code>flutter doctor</code>.</p>\n<p>It will show you the exact issue and just accept all the licenses.</p>\n<p>After that you are good to go.</p>\n"}],"owner":{"account_id":19694325,"reputation":127,"user_id":14418509,"display_name":"Static_Subhang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2350,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":64392283,"answer_count":1,"score":3,"last_activity_date":1634183880,"creation_date":1602860170,"question_id":64391576,"body_markdown":"   I had formatted my system this morning only , after setting up all the path variables and completing all the setting still getting this error . \r\n\r\nDid not had this issue when i last formated , need help. \r\n\r\n\r\n    Exception in thread &quot;main&quot; javax.net.ssl.SSLException: Received fatal alert: protocol_version\r\n\tat sun.security.ssl.Alerts.getSSLException(Unknown Source)\r\n\tat sun.security.ssl.Alerts.getSSLException(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.recvAlert(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)\r\n\tat org.gradle.wrapper.Download.downloadInternal(Download.java:58)\r\n\tat org.gradle.wrapper.Download.download(Download.java:44)\r\n\tat org.gradle.wrapper.Install$1.call(Install.java:61)\r\n\tat org.gradle.wrapper.Install$1.call(Install.java:48)\r\n\tat org.gradle.wrapper.ExclusiveFileAccessManager.access(ExclusiveFileAccessManager.java:65)\r\n\tat org.gradle.wrapper.Install.createDist(Install.java:48)\r\n\tat org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:128)\r\n\tat org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\r\nException: Gradle task assembleDebug failed with exit code 1","title":"Android Studio throwing &quot;Exception in thread &quot;main&quot; javax.net.ssl.SSLException: Received fatal alert: protocol_version&quot;","body":"<p>I had formatted my system this morning only , after setting up all the path variables and completing all the setting still getting this error .</p>\n<p>Did not had this issue when i last formated , need help.</p>\n<pre><code>Exception in thread &quot;main&quot; javax.net.ssl.SSLException: Received fatal alert: protocol_version\nat sun.security.ssl.Alerts.getSSLException(Unknown Source)\nat sun.security.ssl.Alerts.getSSLException(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.recvAlert(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\nat sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)\nat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)\nat sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\nat sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)\nat org.gradle.wrapper.Download.downloadInternal(Download.java:58)\nat org.gradle.wrapper.Download.download(Download.java:44)\nat org.gradle.wrapper.Install$1.call(Install.java:61)\nat org.gradle.wrapper.Install$1.call(Install.java:48)\nat org.gradle.wrapper.ExclusiveFileAccessManager.access(ExclusiveFileAccessManager.java:65)\nat org.gradle.wrapper.Install.createDist(Install.java:48)\nat org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:128)\nat org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\n</code></pre>\n<p>Exception: Gradle task assembleDebug failed with exit code 1</p>\n"},{"tags":["java","int","set"],"comments":[{"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"score":3,"creation_date":1320638343,"post_id":8032579,"comment_id":9833903,"body_markdown":"try using addAll instead of add","body":"try using addAll instead of add"}],"answers":[{"tags":[],"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1320638501,"creation_date":1320638501,"answer_id":8032598,"question_id":8032579,"body_markdown":"You don&#39;t want a Set. As you have discovered, they do not have duplicate elements, by definition. You are looking for a **Multiset** (in fact, a SortedMultiset by the looks of it), also known as a **Bag**. Java doesn&#39;t have one out of the box, but there are open source implementations available, for example, [Google&#39;s][1].\r\n\r\n\r\n  [1]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html\r\n\r\nEDIT: Also, you want to do `setOne.addAll(setTwo)`, not one element at a time, as commented above, but that is the secondary problem.","title":"Adding elements from two Sets","body":"<p>You don't want a Set. As you have discovered, they do not have duplicate elements, by definition. You are looking for a <strong>Multiset</strong> (in fact, a SortedMultiset by the looks of it), also known as a <strong>Bag</strong>. Java doesn't have one out of the box, but there are open source implementations available, for example, <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html\" rel=\"nofollow\">Google's</a>.</p>\n\n<p>EDIT: Also, you want to do <code>setOne.addAll(setTwo)</code>, not one element at a time, as commented above, but that is the secondary problem.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1634183445,"creation_date":1320638641,"answer_id":8032613,"question_id":8032579,"body_markdown":"Use [`Set.addAll()`][1]\r\n\r\n    Set&lt;Integer&gt; one = new HashSet&lt;Integer&gt;();\r\n    Set&lt;Integer&gt; two = new HashSet&lt;Integer&gt;();\r\n    Set&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;(one);\r\n    newSet.addAll(two);\r\n\r\nAlso, you should type your constructors (as above).\r\n\r\nTo make this into a method, try this:\r\n\r\n    public static Set&lt;Integer&gt; addTwoSets(Set&lt;Integer&gt; one, Set&lt;Integer&gt; two) {\r\n        Set&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;(one);\r\n        newSet.addAll(two);\r\n        return newSet;\r\n    }\r\n\r\nLet&#39;s go nuts... here&#39;s a method that will take any number of collections of any type that extends the desired type, and merges them into one set:\r\n\r\n    public static &lt;T&gt; Set&lt;T&gt; merge(Collection&lt;? extends T&gt;... collections) {\r\n        Set&lt;T&gt; newSet = new HashSet&lt;T&gt;();\r\n        for (Collection&lt;? extends T&gt; collection : collections)\r\n            newSet.addAll(collection);\r\n        return newSet;\r\n    }\r\n\r\nOr Java 8+:\r\n\r\n    public static &lt;T&gt; Set&lt;T&gt; merge(Collection&lt;? extends T&gt;... collections) {\r\n        return Arrays.stream(collections).flatMap(Collection::stream).collect(toSet());\r\n    }\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29","title":"Adding elements from two Sets","body":"<p>Use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29\" rel=\"noreferrer\"><code>Set.addAll()</code></a></p>\n<pre><code>Set&lt;Integer&gt; one = new HashSet&lt;Integer&gt;();\nSet&lt;Integer&gt; two = new HashSet&lt;Integer&gt;();\nSet&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;(one);\nnewSet.addAll(two);\n</code></pre>\n<p>Also, you should type your constructors (as above).</p>\n<p>To make this into a method, try this:</p>\n<pre><code>public static Set&lt;Integer&gt; addTwoSets(Set&lt;Integer&gt; one, Set&lt;Integer&gt; two) {\n    Set&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;(one);\n    newSet.addAll(two);\n    return newSet;\n}\n</code></pre>\n<p>Let's go nuts... here's a method that will take any number of collections of any type that extends the desired type, and merges them into one set:</p>\n<pre><code>public static &lt;T&gt; Set&lt;T&gt; merge(Collection&lt;? extends T&gt;... collections) {\n    Set&lt;T&gt; newSet = new HashSet&lt;T&gt;();\n    for (Collection&lt;? extends T&gt; collection : collections)\n        newSet.addAll(collection);\n    return newSet;\n}\n</code></pre>\n<p>Or Java 8+:</p>\n<pre><code>public static &lt;T&gt; Set&lt;T&gt; merge(Collection&lt;? extends T&gt;... collections) {\n    return Arrays.stream(collections).flatMap(Collection::stream).collect(toSet());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1017785,"reputation":453,"user_id":1028942,"display_name":"Norman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320638661,"creation_date":1320638661,"answer_id":8032614,"question_id":8032579,"body_markdown":"Or alternately use a sorted ArrayList:\r\n\r\n    ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(one);\r\n    list.addAll(two);\r\n    Collections.sort(list);\r\n\r\n","title":"Adding elements from two Sets","body":"<p>Or alternately use a sorted ArrayList:</p>\n\n<pre><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(one);\nlist.addAll(two);\nCollections.sort(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6655393,"reputation":2561,"user_id":5136131,"display_name":"Positive Navid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484267520,"creation_date":1484267520,"answer_id":41625550,"question_id":8032579,"body_markdown":"As Bohemian [mentioned][1], the best answer is using Set.addAll(). Just keep in mind that, if you don&#39;t mind overwriting one of your sets, it&#39;s more efficient (at least from the point of view of the developer&#39;s time :P) to add one set directly to another set:\r\n\r\n    one.addAll(two);\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/8032613/5136131","title":"Adding elements from two Sets","body":"<p>As Bohemian <a href=\"https://stackoverflow.com/a/8032613/5136131\">mentioned</a>, the best answer is using Set.addAll(). Just keep in mind that, if you don't mind overwriting one of your sets, it's more efficient (at least from the point of view of the developer's time :P) to add one set directly to another set:</p>\n\n<pre><code>one.addAll(two);\n</code></pre>\n"}],"owner":{"account_id":947936,"reputation":377,"user_id":974776,"accept_rate":92,"display_name":"Macosx Iam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41047,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":8032613,"answer_count":4,"score":17,"last_activity_date":1634183445,"creation_date":1320638290,"question_id":8032579,"body_markdown":"How can I add elements from two sets?\r\n\r\n    If there&#39;s a set one (1, 3, 6, 8)\r\n    And a set two (2, 4, 6, 8)\r\n \r\nHow do I the elements from those two together?\r\n\r\n    Output should be (1, 2, 3, 4, 6, 8)\r\n \r\nHere&#39;s what I tried:\r\n  \r\n    Set&lt;Integer&gt; one = new HashSet();\r\n    one.add(1);\r\n    one.add(3);\r\n    // and so on\r\n    Set&lt;Integer&gt; two = new HashSet();\r\n    two.add(2);\r\n    two.add(4);\r\n    // and so on\r\n    Set&lt;Integer&gt; newSet = new HashSet();\r\n    newSet.add(one);\r\n    newSet.add(two);\r\n  \r\n    return newSet;\r\n\r\nAnd this doesn&#39;t work, as the add method works only for a single integer, not a collection of integer. Is there a method where I can add two sets together?\r\n\r\nI also have to return the set. How do I do that?","title":"Adding elements from two Sets","body":"<p>How can I add elements from two sets?</p>\n\n<pre><code>If there's a set one (1, 3, 6, 8)\nAnd a set two (2, 4, 6, 8)\n</code></pre>\n\n<p>How do I the elements from those two together?</p>\n\n<pre><code>Output should be (1, 2, 3, 4, 6, 8)\n</code></pre>\n\n<p>Here's what I tried:</p>\n\n<pre><code>Set&lt;Integer&gt; one = new HashSet();\none.add(1);\none.add(3);\n// and so on\nSet&lt;Integer&gt; two = new HashSet();\ntwo.add(2);\ntwo.add(4);\n// and so on\nSet&lt;Integer&gt; newSet = new HashSet();\nnewSet.add(one);\nnewSet.add(two);\n\nreturn newSet;\n</code></pre>\n\n<p>And this doesn't work, as the add method works only for a single integer, not a collection of integer. Is there a method where I can add two sets together?</p>\n\n<p>I also have to return the set. How do I do that?</p>\n"},{"tags":["java","android","kotlin","mvvm","viewmodel"],"answers":[{"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634180375,"creation_date":1634179062,"answer_id":69564461,"question_id":69564364,"body_markdown":"Your `OnClickListener` needs to be set outside of the `observer`.\r\nAt least from what I can tell you don&#39;t need to `observe` `userName` as the `queryBtn` is used to activate a `response`, and **NOT** the fact that `userName` was changed.\r\n\r\nBut you do want to `observe` the `response` as it is changed in the `ViewModel`, and needs to be displayed in `textResponse`.\r\n\r\nThe code below is **NOT** checked for correctness I just copied what you had and removed the unnecessary bits.\r\n\r\n\r\n\r\n    \r\n\r\n        findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\r\n              myViewModel.userName.value = findViewById&lt;EditText&gt;(R.id.nameText).getText().toString()\r\n              myViewModel.refreshData()\r\n        }\r\n        myViewModel.response.observe(this) {\r\n              findViewById&lt;TextView&gt;(R.id.textResponse).text = it\r\n        }","title":"How to use setOnClickLisenter in Android viewModels?","body":"<p>Your <code>OnClickListener</code> needs to be set outside of the <code>observer</code>.\nAt least from what I can tell you don't need to <code>observe</code> <code>userName</code> as the <code>queryBtn</code> is used to activate a <code>response</code>, and <strong>NOT</strong> the fact that <code>userName</code> was changed.</p>\n<p>But you do want to <code>observe</code> the <code>response</code> as it is changed in the <code>ViewModel</code>, and needs to be displayed in <code>textResponse</code>.</p>\n<p>The code below is <strong>NOT</strong> checked for correctness I just copied what you had and removed the unnecessary bits.</p>\n<pre><code>    findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\n          myViewModel.userName.value = findViewById&lt;EditText&gt;(R.id.nameText).getText().toString()\n          myViewModel.refreshData()\n    }\n    myViewModel.response.observe(this) {\n          findViewById&lt;TextView&gt;(R.id.textResponse).text = it\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1198166,"reputation":1484,"user_id":1169441,"display_name":"Varsha Kulkarni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634183347,"creation_date":1634183347,"answer_id":69564868,"question_id":69564364,"body_markdown":"\r\nMove this outside observer block\r\n```\r\nfindViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener { \r\n              myViewModel.userName.value = findViewById&lt;EditText&gt;(R.id.nameText).getText().toString()\r\n}\r\n```\r\nInside observer block, when user String is updated, call refresh data\r\n```\r\nmyViewModel.userName.observe(this) {\r\n      myViewModel.refreshData()\r\n  }\r\n```\r\nRemove `onClickListener` from `response` observer block.","title":"How to use setOnClickLisenter in Android viewModels?","body":"<p>Move this outside observer block</p>\n<pre><code>findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener { \n              myViewModel.userName.value = findViewById&lt;EditText&gt;(R.id.nameText).getText().toString()\n}\n</code></pre>\n<p>Inside observer block, when user String is updated, call refresh data</p>\n<pre><code>myViewModel.userName.observe(this) {\n      myViewModel.refreshData()\n  }\n</code></pre>\n<p>Remove <code>onClickListener</code> from <code>response</code> observer block.</p>\n"}],"owner":{"account_id":22979566,"reputation":1,"user_id":17106711,"display_name":"yeong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634183347,"creation_date":1634178092,"question_id":69564364,"body_markdown":"**RestActivity**\r\n\r\n```\r\npackage com.example.internet_ex\r\n\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.widget.Button\r\nimport android.widget.TextView\r\nimport androidx.lifecycle.*\r\nimport kotlinx.coroutines.launch\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.moshi.MoshiConverterFactory\r\nimport retrofit2.http.GET\r\nimport retrofit2.http.Path\r\nimport java.lang.StringBuilder\r\n\r\ndata class Owner(val login: String)\r\ndata class Repo(val name: String, val owner: Owner, val url: String)\r\ndata class Contributor(val login: String, val contributions: Int)\r\n\r\ninterface RestApi {\r\n    @GET(&quot;users/{user}/repos&quot;)\r\n    suspend fun listRepos(@Path(&quot;user&quot;) user: String): List&lt;Repo&gt;\r\n\r\n    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)\r\n    suspend fun contributors(\r\n        @Path(&quot;owner&quot;) owner: String,\r\n        @Path(&quot;repo&quot;) repo: String\r\n    ): List&lt;Contributor&gt;\r\n}\r\n\r\nclass MyViewModel : ViewModel() {\r\n    private val baseURL = &quot;https://api.github.com/&quot;\r\n    private lateinit var api: RestApi\r\n    val userName = MutableLiveData&lt;String&gt;()\r\n\r\n    val response = MutableLiveData&lt;String&gt;()\r\n\r\n\r\n    init {\r\n        retrofitInit()\r\n        refreshData()\r\n    }\r\n\r\n    fun refreshData() {\r\n        viewModelScope.launch {\r\n            try {\r\n                val repos = api.listRepos(userName.toString())\r\n                response.value = StringBuilder().apply {\r\n                    repos.forEach {\r\n                        append(it.name)\r\n                        append(&quot; - &quot;)\r\n                        append(it.owner.login)\r\n                        append(&quot;\\n&quot;)\r\n                    }\r\n                }.toString()\r\n            } catch (e: Exception) {\r\n                response.value = &quot;Failed to connect to the server&quot;\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun retrofitInit() {\r\n        val retrofit = Retrofit.Builder()\r\n            .baseUrl(baseURL)\r\n            .addConverterFactory(MoshiConverterFactory.create())\r\n\r\n            .build()\r\n\r\n        api = retrofit.create(RestApi::class.java)\r\n    }\r\n}\r\n\r\n\r\nclass RestActivity : AppCompatActivity() {\r\n    private lateinit var myViewModel: MyViewModel\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_rest)\r\n\r\n        myViewModel = ViewModelProvider(this).get(MyViewModel::class.java)\r\n//        problem\r\n        myViewModel.userName.observe(this) {\r\n            findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\r\n                myViewModel.userName.value = findViewById&lt;Button&gt;(R.id.nameText).toString()\r\n                myViewModel.refreshData()\r\n            }\r\n        }\r\n        myViewModel.response.observe(this) {\r\n            findViewById&lt;TextView&gt;(R.id.textResponse).text = it\r\n            findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n**activity_rest**\r\n~~~\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.RestActivity&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textResponse&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:layout_marginEnd=&quot;8dp&quot;\r\n        android:text=&quot;TextView&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/queryBtn&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/queryBtn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Query&quot;\r\n        app:layout_constraintStart_toEndOf=&quot;@+id/nameText&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/nameText&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n**activity_rest.xml**\r\n~~~\r\nI made a place where I commented that it was a problem because I wanted to change the ``userName`` in the ``ViewModel`` when I pressed ``queryBtn``, but it didn&#39;t work. I want to change the ``LiveData (userName)`` in the ViewModel using the ``setOnClickLisenter`` command, but I can&#39;t figure it out. And I would appreciate it if you could let me know what to study additionally.","title":"How to use setOnClickLisenter in Android viewModels?","body":"<p><strong>RestActivity</strong></p>\n<pre><code>package com.example.internet_ex\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.Button\nimport android.widget.TextView\nimport androidx.lifecycle.*\nimport kotlinx.coroutines.launch\nimport retrofit2.Retrofit\nimport retrofit2.converter.moshi.MoshiConverterFactory\nimport retrofit2.http.GET\nimport retrofit2.http.Path\nimport java.lang.StringBuilder\n\ndata class Owner(val login: String)\ndata class Repo(val name: String, val owner: Owner, val url: String)\ndata class Contributor(val login: String, val contributions: Int)\n\ninterface RestApi {\n    @GET(&quot;users/{user}/repos&quot;)\n    suspend fun listRepos(@Path(&quot;user&quot;) user: String): List&lt;Repo&gt;\n\n    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)\n    suspend fun contributors(\n        @Path(&quot;owner&quot;) owner: String,\n        @Path(&quot;repo&quot;) repo: String\n    ): List&lt;Contributor&gt;\n}\n\nclass MyViewModel : ViewModel() {\n    private val baseURL = &quot;https://api.github.com/&quot;\n    private lateinit var api: RestApi\n    val userName = MutableLiveData&lt;String&gt;()\n\n    val response = MutableLiveData&lt;String&gt;()\n\n\n    init {\n        retrofitInit()\n        refreshData()\n    }\n\n    fun refreshData() {\n        viewModelScope.launch {\n            try {\n                val repos = api.listRepos(userName.toString())\n                response.value = StringBuilder().apply {\n                    repos.forEach {\n                        append(it.name)\n                        append(&quot; - &quot;)\n                        append(it.owner.login)\n                        append(&quot;\\n&quot;)\n                    }\n                }.toString()\n            } catch (e: Exception) {\n                response.value = &quot;Failed to connect to the server&quot;\n            }\n        }\n    }\n\n    private fun retrofitInit() {\n        val retrofit = Retrofit.Builder()\n            .baseUrl(baseURL)\n            .addConverterFactory(MoshiConverterFactory.create())\n\n            .build()\n\n        api = retrofit.create(RestApi::class.java)\n    }\n}\n\n\nclass RestActivity : AppCompatActivity() {\n    private lateinit var myViewModel: MyViewModel\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_rest)\n\n        myViewModel = ViewModelProvider(this).get(MyViewModel::class.java)\n//        problem\n        myViewModel.userName.observe(this) {\n            findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\n                myViewModel.userName.value = findViewById&lt;Button&gt;(R.id.nameText).toString()\n                myViewModel.refreshData()\n            }\n        }\n        myViewModel.response.observe(this) {\n            findViewById&lt;TextView&gt;(R.id.textResponse).text = it\n            findViewById&lt;Button&gt;(R.id.queryBtn).setOnClickListener {\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>activity_rest</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.RestActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textResponse&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:layout_marginStart=&quot;8dp&quot;\n        android:layout_marginEnd=&quot;8dp&quot;\n        android:text=&quot;TextView&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/queryBtn&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/queryBtn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Query&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/nameText&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/nameText&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:ems=&quot;10&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n**activity_rest.xml**\n</code></pre>\n<p>I made a place where I commented that it was a problem because I wanted to change the <code>userName</code> in the <code>ViewModel</code> when I pressed <code>queryBtn</code>, but it didn't work. I want to change the <code>LiveData (userName)</code> in the ViewModel using the <code>setOnClickLisenter</code> command, but I can't figure it out. And I would appreciate it if you could let me know what to study additionally.</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8046,"page":1946,"page_size":100}
