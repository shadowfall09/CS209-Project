{"items":[{"tags":["java","amazon-web-services","aws-cdk","infrastructure-as-code","amazon-memory-db"],"comments":[{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":0,"creation_date":1642454082,"post_id":70746814,"comment_id":125070331,"body_markdown":"You would need to share you attempts and where you&#39;re getting stuck. Have you set up an example CDK application?","body":"You would need to share you attempts and where you&#39;re getting stuck. Have you set up an example CDK application?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1643036789,"post_id":70746814,"comment_id":125226651,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":17438193,"reputation":9,"user_id":12640815,"display_name":"CK30"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":517,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1642449266,"creation_date":1642449266,"question_id":70746814,"body_markdown":"I am new to AWS and I have to create a IAAC cdk containing 2 memory DB instances in a stack.\r\nI tried using the following example but it is written in python and I dont know that very well.\r\nhttps://github.com/ksmin23/my-aws-cdk-examples/blob/main/memorydb/app.py\r\n\r\nCan anyone help me with creating this cdk using java or share any examples in java.\r\nAny kind of help would be appreciated.\r\n ","title":"how to create aws cdk stack containing 2 memoryDB instances","body":"<p>I am new to AWS and I have to create a IAAC cdk containing 2 memory DB instances in a stack.\nI tried using the following example but it is written in python and I dont know that very well.\n<a href=\"https://github.com/ksmin23/my-aws-cdk-examples/blob/main/memorydb/app.py\" rel=\"nofollow noreferrer\">https://github.com/ksmin23/my-aws-cdk-examples/blob/main/memorydb/app.py</a></p>\n<p>Can anyone help me with creating this cdk using java or share any examples in java.\nAny kind of help would be appreciated.</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642449201,"creation_date":1642449201,"answer_id":70746801,"question_id":70743724,"body_markdown":"&gt; Do nested classes affect during multiple concurrent requests or in some other way?\r\n\r\nNo, the request body will be mapped to an instance of the `RequestData.UserDetails` or simply `UserDetails` if it is a separate class. If you don&#39;t store this is instance as a class attribute in your Controllers, Services, etc, there is no concurrent requests concern because each request to your Controller will have its own instance of such a class and multi-threading is not a problem because you are not storing state.\r\n\r\nThis means that having a nested class or a separate class is irrelevant to the fact that you have a threadsafe Controller, Service, etc or not. The important thing is to not store state on them.\r\n\r\nIn this case, having a nested class or a separate class is more a question of taste and organization than anything else.","title":"Are nested static classes similar to non-static classes for REST request-body?","body":"<blockquote>\n<p>Do nested classes affect during multiple concurrent requests or in some other way?</p>\n</blockquote>\n<p>No, the request body will be mapped to an instance of the <code>RequestData.UserDetails</code> or simply <code>UserDetails</code> if it is a separate class. If you don't store this is instance as a class attribute in your Controllers, Services, etc, there is no concurrent requests concern because each request to your Controller will have its own instance of such a class and multi-threading is not a problem because you are not storing state.</p>\n<p>This means that having a nested class or a separate class is irrelevant to the fact that you have a threadsafe Controller, Service, etc or not. The important thing is to not store state on them.</p>\n<p>In this case, having a nested class or a separate class is more a question of taste and organization than anything else.</p>\n"}],"owner":{"account_id":23967043,"reputation":23,"user_id":17956381,"display_name":"JulieTheCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70746801,"answer_count":1,"score":1,"last_activity_date":1642449201,"creation_date":1642433022,"question_id":70743724,"body_markdown":"I am using a Spring Boot to design REST API. I want to know what difference it will make while using nested classes in request body?\r\n\r\nREST Endpoint:\r\n\r\n    @PostMapping(&quot;/create&quot;)\r\n    public void (@RequestBody RequestData.UserDetails details) {}\r\n\r\nMy RequestData class:\r\n\r\n    public class RequestData {\r\n      public static final class UserDetails {\r\n         private String name;\r\n      }\r\n    }\r\n\r\nSo my question is which of the following class definations is safe?\r\n\r\n 1. Creating a seperate class for UserDetails to get requested data\r\n 2. Creating a nested class as stated above\r\n\r\nDo nested classes affect during multiple concurrent requests or in some other way?\r\n","title":"Are nested static classes similar to non-static classes for REST request-body?","body":"<p>I am using a Spring Boot to design REST API. I want to know what difference it will make while using nested classes in request body?</p>\n<p>REST Endpoint:</p>\n<pre><code>@PostMapping(&quot;/create&quot;)\npublic void (@RequestBody RequestData.UserDetails details) {}\n</code></pre>\n<p>My RequestData class:</p>\n<pre><code>public class RequestData {\n  public static final class UserDetails {\n     private String name;\n  }\n}\n</code></pre>\n<p>So my question is which of the following class definations is safe?</p>\n<ol>\n<li>Creating a seperate class for UserDetails to get requested data</li>\n<li>Creating a nested class as stated above</li>\n</ol>\n<p>Do nested classes affect during multiple concurrent requests or in some other way?</p>\n"},{"tags":["java","session","servlets","casting"],"comments":[{"owner":{"account_id":366031,"reputation":797,"user_id":711309,"accept_rate":100,"display_name":"a k"},"score":0,"creation_date":1305639884,"post_id":6031278,"comment_id":6974806,"body_markdown":"I am getting following Exception: java.lang.ClassCastException: app.models.User cannot be cast to java.lang.Integer","body":"I am getting following Exception: java.lang.ClassCastException: app.models.User cannot be cast to java.lang.Integer"},{"owner":{"account_id":366031,"reputation":797,"user_id":711309,"accept_rate":100,"display_name":"a k"},"score":0,"creation_date":1305639936,"post_id":6031278,"comment_id":6974825,"body_markdown":"I used this Integer userid = (Integer) session.getAttribute(&quot;user&quot;);","body":"I used this Integer userid = (Integer) session.getAttribute(&quot;user&quot;);"},{"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"score":0,"creation_date":1305640018,"post_id":6031278,"comment_id":6974856,"body_markdown":"@a k what&#39;s the return type of `user.getId()` ?","body":"@a k what&#39;s the return type of <code>user.getId()</code> ?"},{"owner":{"account_id":366031,"reputation":797,"user_id":711309,"accept_rate":100,"display_name":"a k"},"score":0,"creation_date":1305640154,"post_id":6031278,"comment_id":6974893,"body_markdown":"public int getId() {return id;}","body":"public int getId() {return id;}"},{"owner":{"account_id":366031,"reputation":797,"user_id":711309,"accept_rate":100,"display_name":"a k"},"score":0,"creation_date":1305640512,"post_id":6031278,"comment_id":6974990,"body_markdown":"public int getId() {return id;} and changed to Integer and its showing (java.lang.NullPointerException) now","body":"public int getId() {return id;} and changed to Integer and its showing (java.lang.NullPointerException) now"}],"answers":[{"tags":[],"owner":{"account_id":379682,"reputation":5538,"user_id":733213,"accept_rate":67,"display_name":"Mayank"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1305638202,"creation_date":1305638202,"answer_id":6031312,"question_id":6031278,"body_markdown":"I&#39;m not good at JAVA but I used to do it like  \r\n`Integer.parseInt(session.getAttribute(&quot;user&quot;).toString())`  \r\n\r\nTry once, but just be sure to `check null` for `session.getAttribute(&quot;user&quot;)` before calling `toString`","title":"Session attribute access and converting to int?","body":"<p>I'm not good at JAVA but I used to do it like<br>\n<code>Integer.parseInt(session.getAttribute(\"user\").toString())</code>  </p>\n\n<p>Try once, but just be sure to <code>check null</code> for <code>session.getAttribute(\"user\")</code> before calling <code>toString</code></p>\n"},{"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305638331,"creation_date":1305638331,"answer_id":6031348,"question_id":6031278,"body_markdown":"Try `int userid = (Integer) session.getAttribute(&quot;user&quot;);`","title":"Session attribute access and converting to int?","body":"<p>Try <code>int userid = (Integer) session.getAttribute(\"user\");</code></p>\n"},{"tags":[],"owner":{"account_id":301166,"reputation":503,"user_id":608721,"display_name":"Rob Parker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305638344,"creation_date":1305638344,"answer_id":6031350,"question_id":6031278,"body_markdown":"    Integer userid = Integer.parseInt(session.getAttribute(&quot;user&quot;));","title":"Session attribute access and converting to int?","body":"<pre><code>Integer userid = Integer.parseInt(session.getAttribute(\"user\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1305638346,"creation_date":1305638346,"answer_id":6031352,"question_id":6031278,"body_markdown":"Java has [`Integer`][1] wrapper class , you can store int value in an Object of `Integer` \r\n\r\n    //setting\r\n    Integer intObj = new Integer(intVal);\r\n    session.setAttribute(&quot;key&quot;,intObj);\r\n    //fetching\r\n    Integer intObj = (Integer) session.getAttribute(&quot;key&quot;);\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.6/docs/api/java/lang/Integer.html","title":"Session attribute access and converting to int?","body":"<p>Java has <a href=\"http://download.oracle.com/javase/1.6/docs/api/java/lang/Integer.html\" rel=\"nofollow\"><code>Integer</code></a> wrapper class , you can store int value in an Object of <code>Integer</code> </p>\n\n<pre><code>//setting\nInteger intObj = new Integer(intVal);\nsession.setAttribute(\"key\",intObj);\n//fetching\nInteger intObj = (Integer) session.getAttribute(\"key\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":96690,"reputation":37290,"user_id":262683,"display_name":"Costi Ciudatu"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1305642897,"creation_date":1305638356,"answer_id":6031358,"question_id":6031278,"body_markdown":"Even if you saved an `int`, that method expects an Object so your `int` will become an `Integer` due to auto-boxing. Try to cast it back to `Integer` and it should be fine:\r\n\r\n    int userid = (Integer) session.getAttribute(&quot;user&quot;);\r\n\r\n\r\nHowever, if the attribute is null you will get a `NullPointerException` here, so maybe it&#39;s better to go with `Integer` all the way:\r\n\r\n    Integer userid = (Integer) session.getAttribute(&quot;user&quot;);\r\n\r\nAfter this, you can safely check if `userid` is `null`.\r\n\r\n\r\n----------\r\n\r\n\r\nEDIT:\r\nIn response to your comments, here&#39;s what I mean by &quot;check for null&quot;.\r\n\r\n    Integer userid = (Integer) session.getAttribute(&quot;user&quot;);\r\n    User user = null;\r\n    if (userid != null) {\r\n        user = new UserDAO().getUser(userid);\r\n    }\r\n    // here user will be null if no userid has been stored on the session,\r\n    // and it wil be loaded from your persistence layer otherwise.\r\n    ","title":"Session attribute access and converting to int?","body":"<p>Even if you saved an <code>int</code>, that method expects an Object so your <code>int</code> will become an <code>Integer</code> due to auto-boxing. Try to cast it back to <code>Integer</code> and it should be fine:</p>\n\n<pre><code>int userid = (Integer) session.getAttribute(\"user\");\n</code></pre>\n\n<p>However, if the attribute is null you will get a <code>NullPointerException</code> here, so maybe it's better to go with <code>Integer</code> all the way:</p>\n\n<pre><code>Integer userid = (Integer) session.getAttribute(\"user\");\n</code></pre>\n\n<p>After this, you can safely check if <code>userid</code> is <code>null</code>.</p>\n\n<hr>\n\n<p>EDIT:\nIn response to your comments, here's what I mean by \"check for null\".</p>\n\n<pre><code>Integer userid = (Integer) session.getAttribute(\"user\");\nUser user = null;\nif (userid != null) {\n    user = new UserDAO().getUser(userid);\n}\n// here user will be null if no userid has been stored on the session,\n// and it wil be loaded from your persistence layer otherwise.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5819900,"reputation":1,"user_id":4588315,"display_name":"antmog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424443323,"creation_date":1424441444,"answer_id":28630966,"question_id":6031278,"body_markdown":"I used this:\r\n\r\n    Integer.parseInt(session.getAttribute(&quot;String&quot;).toString())\r\n\r\n","title":"Session attribute access and converting to int?","body":"<p>I used this:</p>\n\n<pre><code>Integer.parseInt(session.getAttribute(\"String\").toString())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5159717,"reputation":19,"user_id":4131816,"display_name":"mansoor Sntli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447236280,"creation_date":1447236280,"answer_id":33648225,"question_id":6031278,"body_markdown":"try this \r\n\r\n    int userid = Integer.parseInt(session.getAttribute(&quot;user&quot;).toString());","title":"Session attribute access and converting to int?","body":"<p>try this </p>\n\n<pre><code>int userid = Integer.parseInt(session.getAttribute(\"user\").toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9561593,"reputation":1,"user_id":7102215,"display_name":"Jasser Saanoun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478046472,"creation_date":1478046472,"answer_id":40370644,"question_id":6031278,"body_markdown":"try this, it worked for me: \r\n`HttpSession session = request.getSession(); \r\nif (session.getAttribute(&quot;user&quot;) != null) { \r\nuserid = ((Integer) session.getAttribute(&quot;user&quot;)).intValue(); } else { userid = 0; }`\r\n\r\n","title":"Session attribute access and converting to int?","body":"<p>try this, it worked for me: \n<code>HttpSession session = request.getSession(); \nif (session.getAttribute(\"user\") != null) { \nuserid = ((Integer) session.getAttribute(\"user\")).intValue(); } else { userid = 0; }</code></p>\n"},{"tags":[],"owner":{"account_id":11249374,"reputation":401,"user_id":8250946,"display_name":"vikash"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1503061244,"creation_date":1503053077,"answer_id":45754775,"question_id":6031278,"body_markdown":"Try this code :\r\n\r\n     int userId=Integer.parseInt((String)session.getAttribute(&quot;user&quot;));","title":"Session attribute access and converting to int?","body":"<p>Try this code :</p>\n\n<pre><code> int userId=Integer.parseInt((String)session.getAttribute(\"user\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3344401,"reputation":177,"user_id":2809836,"display_name":"Dimitris Maniatis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517920531,"creation_date":1517917016,"answer_id":48642168,"question_id":6031278,"body_markdown":"Multiplying two strings from session:\r\n\r\n    int z = Integer.parseInt((String)session.getAttribute(&quot;sintelestis&quot;));\r\n    int y = Integer.parseInt((String)session.getAttribute(&quot;_embadon_akinitou&quot;));\r\n    System.out.println(&quot;Ο Συνολικός Φόρος είναι: &quot;+ (z*y));","title":"Session attribute access and converting to int?","body":"<p>Multiplying two strings from session:</p>\n\n<pre><code>int z = Integer.parseInt((String)session.getAttribute(\"sintelestis\"));\nint y = Integer.parseInt((String)session.getAttribute(\"_embadon_akinitou\"));\nSystem.out.println(\"Ο Συνολικός Φόρος είναι: \"+ (z*y));\n</code></pre>\n"}],"owner":{"account_id":366031,"reputation":797,"user_id":711309,"accept_rate":100,"display_name":"a k"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69464,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":6031358,"answer_count":10,"score":10,"last_activity_date":1642449104,"creation_date":1305638039,"question_id":6031278,"body_markdown":"I have stored user id in Session using following command in Servlet:\r\n\r\n    HttpSession session = request.getSession();\r\n    session.setAttribute(&quot;user&quot;, user.getId());\r\n\r\nNow, I want to access that user id from another Servlet:\r\n\r\n    HttpSession session = request.getSession(false);\r\n    int userid = (int) session.getAttribute(&quot;user&quot;); // This is not working\r\n\r\n    OR\r\n\r\n    User user = new User();\r\n    user.setId(session.getAttribute(&quot;user&quot;)); This ain&#39;t possible (Object != int)\r\n\r\nQuestion: \r\n\r\n  1. How can I cast to int and send the id to DAO for SELECT statement","title":"Session attribute access and converting to int?","body":"<p>I have stored user id in Session using following command in Servlet:</p>\n\n<pre><code>HttpSession session = request.getSession();\nsession.setAttribute(\"user\", user.getId());\n</code></pre>\n\n<p>Now, I want to access that user id from another Servlet:</p>\n\n<pre><code>HttpSession session = request.getSession(false);\nint userid = (int) session.getAttribute(\"user\"); // This is not working\n\nOR\n\nUser user = new User();\nuser.setId(session.getAttribute(\"user\")); This ain't possible (Object != int)\n</code></pre>\n\n<p>Question: </p>\n\n<ol>\n<li>How can I cast to int and send the id to DAO for SELECT statement</li>\n</ol>\n"},{"tags":["java","eclipse","selenium","error-handling"],"comments":[{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":3,"creation_date":1642042263,"post_id":70690792,"comment_id":124969184,"body_markdown":"If you read the error message, it indicates that `C:\\chromedriver.exe` is expected to be found but is missing.","body":"If you read the error message, it indicates that <code>C:\\chromedriver.exe</code> is expected to be found but is missing."}],"answers":[{"tags":[],"owner":{"account_id":3057249,"reputation":1522,"user_id":2590615,"display_name":"de-jcup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642059356,"creation_date":1642059031,"answer_id":70692845,"question_id":70690792,"body_markdown":"```\r\n System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://chromedriver.exe&quot;);\r\n```\r\ndefines that the chrome driver binary is located at `C:\\chromedriver.exe`. But the exception says the file does not exists there.\r\n\r\nSo just download the chrome driver from https://chromedriver.chromium.org/downloads and move + rename it to  `C:\\chromedriver.exe` and it will work.","title":"Eclipse Error when trying to run in windows","body":"<pre><code> System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://chromedriver.exe&quot;);\n</code></pre>\n<p>defines that the chrome driver binary is located at <code>C:\\chromedriver.exe</code>. But the exception says the file does not exists there.</p>\n<p>So just download the chrome driver from <a href=\"https://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">https://chromedriver.chromium.org/downloads</a> and move + rename it to  <code>C:\\chromedriver.exe</code> and it will work.</p>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642077961,"creation_date":1642077961,"answer_id":70696860,"question_id":70690792,"body_markdown":"This error message...\r\n\r\n\tException in thread &quot;main&quot; java.lang.IllegalStateException: The driver executable must exist: C:\\chromedriver.exe\r\n\r\n...implies that the program was unable to find the [ChromeDriver](https://stackoverflow.com/questions/59909654/how-does-chrome-driver-interact-with-chrome-browser/59927747#59927747) executable in the specified location.\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nYou need to take care of a couple of things here as follows:\r\n\r\n- Ensure that you have downloaded the exact format of the _ChromeDriver_ binary from the [download location](https://chromedriver.storage.googleapis.com/index.html?path=2.39/) pertaining to your underlying OS among:\r\n\r\n  - _chromedriver_win32_: For _Windows OS_\r\n  - _chromedriver_mac64_: For _MAC OS X_\r\n  - _chromedriver_linux64_: For _Linux OS_\r\n \r\n- Instead of storing the [ChromeDriver](https://stackoverflow.com/questions/53727887/what-is-benefit-of-using-chromedriver-over-webdriver-if-we-are-using-only-chrome/53744026#53744026) executable within **`C:\\`** drive, keep it within a _directory_, e.g. _`C:\\BrowserDrivers\\`_. So effectively your line of code will be:\r\n\r\n\t  System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://BrowserDrivers//chromedriver.exe&quot;);\r\n\r\n- Ensure that _ChromeDriver_ binary have executable permission for the **non-administrator**  user.\r\n- Execute your _Test_ as a **non-administrator**  user.","title":"Eclipse Error when trying to run in windows","body":"<p>This error message...</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: The driver executable must exist: C:\\chromedriver.exe\n</code></pre>\n<p>...implies that the program was unable to find the <a href=\"https://stackoverflow.com/questions/59909654/how-does-chrome-driver-interact-with-chrome-browser/59927747#59927747\">ChromeDriver</a> executable in the specified location.</p>\n<hr />\n<h2>Solution</h2>\n<p>You need to take care of a couple of things here as follows:</p>\n<ul>\n<li><p>Ensure that you have downloaded the exact format of the <em>ChromeDriver</em> binary from the <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=2.39/\" rel=\"nofollow noreferrer\">download location</a> pertaining to your underlying OS among:</p>\n<ul>\n<li><em>chromedriver_win32</em>: For <em>Windows OS</em></li>\n<li><em>chromedriver_mac64</em>: For <em>MAC OS X</em></li>\n<li><em>chromedriver_linux64</em>: For <em>Linux OS</em></li>\n</ul>\n</li>\n<li><p>Instead of storing the <a href=\"https://stackoverflow.com/questions/53727887/what-is-benefit-of-using-chromedriver-over-webdriver-if-we-are-using-only-chrome/53744026#53744026\">ChromeDriver</a> executable within <strong><code>C:\\</code></strong> drive, keep it within a <em>directory</em>, e.g. <em><code>C:\\BrowserDrivers\\</code></em>. So effectively your line of code will be:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://BrowserDrivers//chromedriver.exe&quot;);\n</code></pre>\n</li>\n<li><p>Ensure that <em>ChromeDriver</em> binary have executable permission for the <strong>non-administrator</strong>  user.</p>\n</li>\n<li><p>Execute your <em>Test</em> as a <strong>non-administrator</strong>  user.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":23162878,"reputation":1,"user_id":17263282,"display_name":"tasnuba azad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1642449038,"creation_date":1642041554,"question_id":70690792,"body_markdown":"    Exception in thread &quot;main&quot; java.lang.IllegalStateException: The driver executable must exist: C:\\chromedriver.exe\r\n    \tat org.openqa.selenium.internal.Require$FileStateChecker.isFile(Require.java:315)\r\n    \tat org.openqa.selenium.remote.service.DriverService.checkExecutable(DriverService.java:144)\r\n    \tat org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:139)\r\n    \tat org.openqa.selenium.chrome.ChromeDriverService.access$000(ChromeDriverService.java:38)\r\n    \tat org.openqa.selenium.chrome.ChromeDriverService$Builder.findDefaultExecutable(ChromeDriverService.java:231)\r\n    \tat org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:434)\r\n    \tat org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:127)\r\n    \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:46)\r\n    \tat base.main(base.java:35)\r\n\r\n\r\n\r\nHi Guys was trying to do some practice but always this error comes up it will be really helpful if you guys can help me to understand the error. I tried setting up the selenium driver path but still error not going away. the code is on the bottom.Thank you in advance\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.concurrent.TimeUnit;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n\r\n    public class base {\r\n        public static void main(String[] args) throws InterruptedException {\r\n            // TODO Auto-generated method stub\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://chromedriver.exe&quot;);\r\n            WebDriver driver=new ChromeDriver();\r\n            //driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\r\n            WebDriverWait w =new WebDriverWait(driver,5);\r\n            String[] itemsNeeded= {&quot;Cucumber&quot;,&quot;Brocolli&quot;,&quot;Beetroot&quot;};\r\n            driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/&quot;);\r\n            Thread.sleep(3000);\r\n            addItems(driver,itemsNeeded);\r\n            driver.findElement(By.cssSelector(&quot;img[alt=&#39;Cart&#39;]&quot;)).click();\r\n            driver.findElement(By.xpath(&quot;//button[contains(text(),&#39;PROCEED TO CHECKOUT&#39;)]&quot;)).click();\r\n            w.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;input.promoCode&quot;)));\r\n            driver.findElement(By.cssSelector(&quot;input.promoCode&quot;)).sendKeys(&quot;rahulshettyacademy&quot;);\r\n            driver.findElement(By.cssSelector(&quot;button.promoBtn&quot;)).click();\r\n            //explicit wait\r\n            w.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;span.promoInfo&quot;)));\r\n            System.out.println(driver.findElement(By.cssSelector(&quot;span.promoInfo&quot;)).getText());\r\n        }\r\n        \r\n        public static  void addItems(WebDriver driver,String[] itemsNeeded)\r\n        {\r\n            int j=0;\r\n            List&lt;WebElement&gt; products=driver.findElements(By.cssSelector(&quot;h4.product-name&quot;));\r\n            for(int i=0;i&lt;products.size();i++)\r\n            {\r\n                //Brocolli - 1 Kg\r\n                //Brocolli,    1 kg\r\n                String[] name=products.get(i).getText().split(&quot;-&quot;);\r\n                String formattedName=name[0].trim();\r\n                //format it to get actual vegetable name\r\n                //convert array into array list for easy search\r\n                //  check whether name you extracted is present in arrayList or not-\r\n                List itemsNeededList = Arrays.asList(itemsNeeded);\r\n                if(itemsNeededList.contains(formattedName))\r\n                {\r\n                    j++;\r\n                    //click on Add to cart\r\n                    driver.findElements(By.xpath(&quot;//div[@class=&#39;product-action&#39;]/button&quot;)).get(i).click();\r\n                    if(j==itemsNeeded.length)\r\n                    {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Eclipse Error when trying to run in windows","body":"<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: The driver executable must exist: C:\\chromedriver.exe\n    at org.openqa.selenium.internal.Require$FileStateChecker.isFile(Require.java:315)\n    at org.openqa.selenium.remote.service.DriverService.checkExecutable(DriverService.java:144)\n    at org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:139)\n    at org.openqa.selenium.chrome.ChromeDriverService.access$000(ChromeDriverService.java:38)\n    at org.openqa.selenium.chrome.ChromeDriverService$Builder.findDefaultExecutable(ChromeDriverService.java:231)\n    at org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:434)\n    at org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:127)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:46)\n    at base.main(base.java:35)\n</code></pre>\n<p>Hi Guys was trying to do some practice but always this error comes up it will be really helpful if you guys can help me to understand the error. I tried setting up the selenium driver path but still error not going away. the code is on the bottom.Thank you in advance</p>\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.concurrent.TimeUnit;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class base {\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://chromedriver.exe&quot;);\n        WebDriver driver=new ChromeDriver();\n        //driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\n        WebDriverWait w =new WebDriverWait(driver,5);\n        String[] itemsNeeded= {&quot;Cucumber&quot;,&quot;Brocolli&quot;,&quot;Beetroot&quot;};\n        driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/&quot;);\n        Thread.sleep(3000);\n        addItems(driver,itemsNeeded);\n        driver.findElement(By.cssSelector(&quot;img[alt='Cart']&quot;)).click();\n        driver.findElement(By.xpath(&quot;//button[contains(text(),'PROCEED TO CHECKOUT')]&quot;)).click();\n        w.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;input.promoCode&quot;)));\n        driver.findElement(By.cssSelector(&quot;input.promoCode&quot;)).sendKeys(&quot;rahulshettyacademy&quot;);\n        driver.findElement(By.cssSelector(&quot;button.promoBtn&quot;)).click();\n        //explicit wait\n        w.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;span.promoInfo&quot;)));\n        System.out.println(driver.findElement(By.cssSelector(&quot;span.promoInfo&quot;)).getText());\n    }\n    \n    public static  void addItems(WebDriver driver,String[] itemsNeeded)\n    {\n        int j=0;\n        List&lt;WebElement&gt; products=driver.findElements(By.cssSelector(&quot;h4.product-name&quot;));\n        for(int i=0;i&lt;products.size();i++)\n        {\n            //Brocolli - 1 Kg\n            //Brocolli,    1 kg\n            String[] name=products.get(i).getText().split(&quot;-&quot;);\n            String formattedName=name[0].trim();\n            //format it to get actual vegetable name\n            //convert array into array list for easy search\n            //  check whether name you extracted is present in arrayList or not-\n            List itemsNeededList = Arrays.asList(itemsNeeded);\n            if(itemsNeededList.contains(formattedName))\n            {\n                j++;\n                //click on Add to cart\n                driver.findElements(By.xpath(&quot;//div[@class='product-action']/button&quot;)).get(i).click();\n                if(j==itemsNeeded.length)\n                {\n                    break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","api"],"comments":[{"owner":{"account_id":408579,"reputation":9103,"user_id":779340,"accept_rate":69,"display_name":"rascio"},"score":2,"creation_date":1642442373,"post_id":70744688,"comment_id":125066796,"body_markdown":"This could be related, I see the response seems to be a binary file, you are converting the response of the API into a String, hence you are imposing some convention on how to read the bytes, you can try to have the response as `byte[]` or as an `InputStream` without transforming any byte into a string","body":"This could be related, I see the response seems to be a binary file, you are converting the response of the API into a String, hence you are imposing some convention on how to read the bytes, you can try to have the response as <code>byte[]</code> or as an <code>InputStream</code> without transforming any byte into a string"},{"owner":{"account_id":23921174,"reputation":21,"user_id":17916993,"display_name":"Yeremy Alvarez"},"score":0,"creation_date":1642448962,"post_id":70744688,"comment_id":125068760,"body_markdown":"That was exactly my issue, thank you","body":"That was exactly my issue, thank you"}],"answers":[{"tags":[],"owner":{"account_id":23921174,"reputation":21,"user_id":17916993,"display_name":"Yeremy Alvarez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642449021,"creation_date":1642449021,"answer_id":70746774,"question_id":70744688,"body_markdown":"**Answer:**\r\nI changed the response entity type from String to byte []\r\n\r\n       ResponseEntity&lt;byte[]&gt; response = restTemplate.exchange(\r\n                builder.toUriString(),\r\n                HttpMethod.POST,\r\n                entity,\r\n                byte[].class);\r\n","title":"API response to file","body":"<p><strong>Answer:</strong>\nI changed the response entity type from String to byte []</p>\n<pre><code>   ResponseEntity&lt;byte[]&gt; response = restTemplate.exchange(\n            builder.toUriString(),\n            HttpMethod.POST,\n            entity,\n            byte[].class);\n</code></pre>\n"}],"owner":{"account_id":23921174,"reputation":21,"user_id":17916993,"display_name":"Yeremy Alvarez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":864,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642449021,"creation_date":1642437603,"question_id":70744688,"body_markdown":"I&#39;m receiving this response from an API and I&#39;m trying to convert it to a file in Java, but when the file is created it says that the file is corrupted.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ggvMW.png\r\nHere&#39;s the code that i&#39;m using.\r\n\r\n            UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(serverUrl)\r\n                .queryParam(&quot;fileID&quot;, fileID);\r\n\r\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        ResponseEntity&lt;?&gt; response = restTemplate.exchange(\r\n                builder.toUriString(),\r\n                HttpMethod.POST,\r\n                entity,\r\n                String.class);\r\n\r\n\r\n        System.out.println(&quot;Bytes de response body: &quot; + response.getBody());\r\n\r\n\r\n\r\n\r\n\r\n        saveFile(&quot;C:\\\\Users\\\\xxx\\\\Documents\\\\&quot; + fileName,body);\r\n\r\n    }\r\n\r\n    private static void saveFile(String path, String octetStream) throws IOException{\r\n        try(FileOutputStream fos = new FileOutputStream(path)){\r\n            fos.write(octetStream.getBytes());\r\n        }\r\nAny input will be appreciated.\r\n\r\nThanks.","title":"API response to file","body":"<p>I'm receiving this response from an API and I'm trying to convert it to a file in Java, but when the file is created it says that the file is corrupted.\n<a href=\"https://i.stack.imgur.com/ggvMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ggvMW.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's the code that i'm using.</p>\n<pre><code>        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(serverUrl)\n            .queryParam(&quot;fileID&quot;, fileID);\n\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n    ResponseEntity&lt;?&gt; response = restTemplate.exchange(\n            builder.toUriString(),\n            HttpMethod.POST,\n            entity,\n            String.class);\n\n\n    System.out.println(&quot;Bytes de response body: &quot; + response.getBody());\n\n\n\n\n\n    saveFile(&quot;C:\\\\Users\\\\xxx\\\\Documents\\\\&quot; + fileName,body);\n\n}\n\nprivate static void saveFile(String path, String octetStream) throws IOException{\n    try(FileOutputStream fos = new FileOutputStream(path)){\n        fos.write(octetStream.getBytes());\n    }\n</code></pre>\n<p>Any input will be appreciated.</p>\n<p>Thanks.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":6,"creation_date":1642448244,"post_id":70746617,"comment_id":125068559,"body_markdown":"`System.out.printf(&quot;Your score is: %.2f%%%n&quot;, average * 100);`","body":"<code>System.out.printf(&quot;Your score is: %.2f%%%n&quot;, average * 100);</code>"},{"owner":{"account_id":3580374,"reputation":108855,"user_id":2988730,"accept_rate":96,"display_name":"Mad Physicist"},"score":0,"creation_date":1642448338,"post_id":70746617,"comment_id":125068594,"body_markdown":"@JohnnyMopp. It may not be very satisfying, but that&#39;s an answer","body":"@JohnnyMopp. It may not be very satisfying, but that&#39;s an answer"},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1642448684,"post_id":70746617,"comment_id":125068688,"body_markdown":"Here&#39;s a link that can explain it in _way_ more depth than I could: [Class Formatter](https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)","body":"Here&#39;s a link that can explain it in <i>way</i> more depth than I could: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Class Formatter</a>"}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642448735,"creation_date":1642448735,"answer_id":70746728,"question_id":70746617,"body_markdown":"    DecimalFormat df = new DecimalFormat(&quot;#.##%&quot;);\r\n    df.format(0.8266666531562805);","title":"How do I turn a double into a percentage in Java?","body":"<pre><code>DecimalFormat df = new DecimalFormat(&quot;#.##%&quot;);\ndf.format(0.8266666531562805);\n</code></pre>\n"}],"owner":{"account_id":20854675,"reputation":19,"user_id":15318327,"display_name":"JennySoyer1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70746728,"answer_count":1,"score":0,"last_activity_date":1642448735,"creation_date":1642448137,"question_id":70746617,"body_markdown":"I have a double called average. If its output is 0.8266666531562805 how do I format it to display as 82.67%\r\n\r\nCurrent line: \r\n\r\n    System.out.println(&quot;Your score is: &quot; + average);","title":"How do I turn a double into a percentage in Java?","body":"<p>I have a double called average. If its output is 0.8266666531562805 how do I format it to display as 82.67%</p>\n<p>Current line:</p>\n<pre><code>System.out.println(&quot;Your score is: &quot; + average);\n</code></pre>\n"},{"tags":["java","spring","log4j","log4j2","underscore-java"],"comments":[{"owner":{"account_id":21257016,"reputation":11,"user_id":15638356,"display_name":"Goku"},"score":0,"creation_date":1642448540,"post_id":70746683,"comment_id":125068647,"body_markdown":"https://examples.javacodegeeks.com/enterprise-java/log4j/log4j-rolling-daily-file-example/\n\nI took help from this website but its for log4j1.X version and I need log4j2.X code.\n\n// Creates Pattern Layout\n        PatternLayout patternLayoutObj = new PatternLayout();\n        String conversionPattern = &quot;[%p] %d %c %M - %m%n&quot;;\n        patternLayoutObj.setConversionPattern(conversionPattern);\n  \n        // Create Daily Rolling Log File Appender\n        DailyRollingFileAppender rollingAppenderObj = new DailyRollingFileAppender();","body":"<a href=\"https://examples.javacodegeeks.com/enterprise-java/log4j/log4j-rolling-daily-file-example/\" rel=\"nofollow noreferrer\">examples.javacodegeeks.com/enterprise-java/log4j/&hellip;</a>  I took help from this website but its for log4j1.X version and I need log4j2.X code.  // Creates Pattern Layout         PatternLayout patternLayoutObj = new PatternLayout();         String conversionPattern = &quot;[%p] %d %c %M - %m%n&quot;;         patternLayoutObj.setConversionPattern(conversionPattern);            // Create Daily Rolling Log File Appender         DailyRollingFileAppender rollingAppenderObj = new DailyRollingFileAppender();"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1643224740,"post_id":70746683,"comment_id":125285733,"body_markdown":"Please [edit] your question instead of adding comments. Code is unreadable in comments. Also include the error you are getting.","body":"Please <a href=\"https://stackoverflow.com/posts/70746683/edit\">edit</a> your question instead of adding comments. Code is unreadable in comments. Also include the error you are getting."}],"owner":{"account_id":21257016,"reputation":11,"user_id":15638356,"display_name":"Goku"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642448551,"creation_date":1642448415,"question_id":70746683,"body_markdown":"I am trying to update my project from log4j1.2.17 to log4j2.17.\r\n\r\nI am getting 3 errors while doing this migration.\r\nI think we can do this using log4j.properties file or log4j.xml file or Programmatic way.\r\nI must have to follow Programmatic way.\r\n\r\n    String fileName = logFilePath + Constants.FILENAME;\r\n    \r\n    PatternLayout layout = new PatternLayout();\r\n    layout.setConversionPattern(Constants.PATTERN);\r\n    DailyRollingFileAppender appender = new DailyRollingFileAppender(layout, fileName, Constants.DATE_PATTERN);\r\n\r\nI am getting error in while changing dependency from 1.2.7 to 2.17 for log4j.\r\nAnyone help how to fix this problem?","title":"lo4j1.x to log4j2.x Programmatic way how to do?","body":"<p>I am trying to update my project from log4j1.2.17 to log4j2.17.</p>\n<p>I am getting 3 errors while doing this migration.\nI think we can do this using log4j.properties file or log4j.xml file or Programmatic way.\nI must have to follow Programmatic way.</p>\n<pre><code>String fileName = logFilePath + Constants.FILENAME;\n\nPatternLayout layout = new PatternLayout();\nlayout.setConversionPattern(Constants.PATTERN);\nDailyRollingFileAppender appender = new DailyRollingFileAppender(layout, fileName, Constants.DATE_PATTERN);\n</code></pre>\n<p>I am getting error in while changing dependency from 1.2.7 to 2.17 for log4j.\nAnyone help how to fix this problem?</p>\n"},{"tags":["java","spring","spring-boot","java-record"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1617369652,"post_id":66919894,"comment_id":118290781,"body_markdown":"Autowiring is for _services_, not request-specific data. A `record` should never be annotated `@Component`, semantically.","body":"Autowiring is for <i>services</i>, not request-specific data. A <code>record</code> should never be annotated <code>@Component</code>, semantically."},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1617370027,"post_id":66919894,"comment_id":118290916,"body_markdown":"@chrylis-cautiouslyoptimistic- this is not true, there are `@Component` with request scope defined in spring which could also be autowired. That is why Spring offers different component scopes","body":"@chrylis-cautiouslyoptimistic- this is not true, there are <code>@Component</code> with request scope defined in spring which could also be autowired. That is why Spring offers different component scopes"}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1617369721,"creation_date":1617369721,"answer_id":66919967,"question_id":66919894,"body_markdown":"Your case has nothing to do with records.\r\n\r\nHow will spring inject those values in parameters of constructor? Dependency injection can not be done in your case.\r\n\r\nYou can define a bean in your configurations manualy\r\n    \r\n    @Configuration\r\n    public class CustomConfigurations{\r\n    \r\n       @Bean\r\n       public Issue getIssue(){\r\n        return new Issue(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,);\r\n       }\r\n    } \r\n\r\nThis will make autowiring work.\r\n\r\nBut in the end it does not make any sense to autowire a `Issue`\r\n\r\nThis is a Pojo object created only for some specific request.","title":"How can a record data class be autowired in Spring?","body":"<p>Your case has nothing to do with records.</p>\n<p>How will spring inject those values in parameters of constructor? Dependency injection can not be done in your case.</p>\n<p>You can define a bean in your configurations manualy</p>\n<pre><code>@Configuration\npublic class CustomConfigurations{\n\n   @Bean\n   public Issue getIssue(){\n    return new Issue(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,);\n   }\n} \n</code></pre>\n<p>This will make autowiring work.</p>\n<p>But in the end it does not make any sense to autowire a <code>Issue</code></p>\n<p>This is a Pojo object created only for some specific request.</p>\n"}],"owner":{"account_id":20005341,"reputation":59,"user_id":14663516,"display_name":"hocu pocs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3195,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1642447390,"creation_date":1617369418,"question_id":66919894,"body_markdown":"I have Spring project with the following record.  I need it autowired in my classes, but I can&#39;t run the Spring Boot app anymore.\r\n\r\nThe reason:\r\n\r\n```lang-none\r\nParameter 0 of constructor in sk.eea.jira.rest.Issue required a bean of type &#39;java.lang.String&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;java.lang.String&#39; in your configuration.\r\n```\r\n\r\nRecord class:\r\n\r\n```lang-java\r\n@Component\r\npublic record Issue(String assignee,\r\n                    String created,\r\n                    String reporter,\r\n                    String resolution,\r\n                    String status,\r\n                    String summary,\r\n                    String updated,\r\n                    String key) {\r\n}\r\n``` \r\n\r\nHow can I autowire such records in Spring?","title":"How can a record data class be autowired in Spring?","body":"<p>I have Spring project with the following record.  I need it autowired in my classes, but I can't run the Spring Boot app anymore.</p>\n<p>The reason:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Parameter 0 of constructor in sk.eea.jira.rest.Issue required a bean of type 'java.lang.String' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'java.lang.String' in your configuration.\n</code></pre>\n<p>Record class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic record Issue(String assignee,\n                    String created,\n                    String reporter,\n                    String resolution,\n                    String status,\n                    String summary,\n                    String updated,\n                    String key) {\n}\n</code></pre>\n<p>How can I autowire such records in Spring?</p>\n"},{"tags":["java","spring-boot","swagger-ui","basic-authentication","bearer-token"],"answers":[{"tags":[],"owner":{"account_id":7036011,"reputation":23,"user_id":5390096,"display_name":"Anup"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642447327,"creation_date":1642446638,"answer_id":70746382,"question_id":70585441,"body_markdown":"I figured out the solution with custom solution. More details below.\r\n\r\n1) I had followed all the steps given at this thread - https://stackoverflow.com/a/46715492/5390096\r\n2) The issue was with the swagger-ui version 2.9.2 which does not pass client_id and client_password when the authentication form is submitted. I was keep getting bad request and after UI debugging and few more google searches, I found the issue.\r\n3) I created a customer controller which gets called on this form submission and then I internally make a call to my token uri by passing the client_id and client_secret\r\n4) If I bump the version to 3.0.0 then I get other conflict issues, didn&#39;t spend time fixing that.\r\n5) Other option I had was to migrate to openapi swagger-ui (new version of swagger-ui) but to save time and code refactoring, I chose to create a custom controller.","title":"Token based authentication with Springboot application and Swagger-UI where user logs in with username and password (basic authentication)","body":"<p>I figured out the solution with custom solution. More details below.</p>\n<ol>\n<li>I had followed all the steps given at this thread - <a href=\"https://stackoverflow.com/a/46715492/5390096\">https://stackoverflow.com/a/46715492/5390096</a></li>\n<li>The issue was with the swagger-ui version 2.9.2 which does not pass client_id and client_password when the authentication form is submitted. I was keep getting bad request and after UI debugging and few more google searches, I found the issue.</li>\n<li>I created a customer controller which gets called on this form submission and then I internally make a call to my token uri by passing the client_id and client_secret</li>\n<li>If I bump the version to 3.0.0 then I get other conflict issues, didn't spend time fixing that.</li>\n<li>Other option I had was to migrate to openapi swagger-ui (new version of swagger-ui) but to save time and code refactoring, I chose to create a custom controller.</li>\n</ol>\n"}],"owner":{"account_id":7036011,"reputation":23,"user_id":5390096,"display_name":"Anup"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":731,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642447327,"creation_date":1641332866,"question_id":70585441,"body_markdown":"Here is the scenario,\r\n1) A spring-boot application has rest endpoints that can only be invoked with the access token\r\n2) I want to add swagger-ui that accepts the user name and password\r\n3) The application should get these credentials and make a rest call to get the access token required to invoke rest endpoints (as stated in point 1)\r\n\r\nSpring-boot version: 2.3.2.RELEASE&lt;br/&gt;\r\nSwagger-ui version: 2.9.2\r\n\r\nHas anyone worked on a similar use case?\r\n\r\nHere is some of my config classes/methods.\r\n```\r\n@Configuration\r\n@EnableSwagger2\r\npublic class SpringFoxConfig {\r\n~~\r\n@Bean\r\n\tpublic Docket api() {\r\n\t\treturn new Docket(DocumentationType.SWAGGER_2)\r\n\t\t        .select()\r\n\t\t        .apis(RequestHandlerSelectors.basePackage(SpringbootApplication.class.getPackage().getName()))\r\n\t\t        .paths(PathSelectors.any())\r\n\t\t        .build()\r\n\t\t        .apiInfo(apiInfo())\r\n              *//.securitySchemes(Arrays.asList(new ApiKey(BEARER, AUTHORIZATION, HEADER))) &lt;&lt; currently I have this code but what I want is to have basic auth where user can enter his credentials*\r\n\t\t        .securitySchemes(Arrays.asList(new BasicAuth(&quot;basicAuth&quot;)))\r\n\t\t        .securityContexts(Arrays.asList(SecurityContext.builder()\r\n\t\t                .securityReferences(Arrays.asList(new SecurityReference(BEARER, new AuthorizationScope[] {})))\r\n\t\t                .forPaths(PathSelectors.any())\r\n\t\t                .build()));\r\n\t}\r\n~~\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n~~\r\n\t@Override\r\n\tpublic void configure(HttpSecurity http) throws Exception {\r\n\t\tExpressionUrlAuthorizationConfigurer&lt;HttpSecurity&gt;.ExpressionInterceptUrlRegistry registry = http.authorizeRequests();\r\n\r\n\t\tregistry.antMatchers(&quot;/actuator/health&quot;)\r\n\t\t        .permitAll()\r\n\t\t        .antMatchers(&quot;/actuator/info&quot;)\r\n\t\t        .permitAll()\r\n\t\t        .antMatchers(&quot;/swagger-ui.html&quot;)\r\n\t\t        .permitAll()\r\n\t\t        .anyRequest()\r\n\t\t        .authenticated();\r\n\t}\r\n~~\r\n}\r\n```","title":"Token based authentication with Springboot application and Swagger-UI where user logs in with username and password (basic authentication)","body":"<p>Here is the scenario,</p>\n<ol>\n<li>A spring-boot application has rest endpoints that can only be invoked with the access token</li>\n<li>I want to add swagger-ui that accepts the user name and password</li>\n<li>The application should get these credentials and make a rest call to get the access token required to invoke rest endpoints (as stated in point 1)</li>\n</ol>\n<p>Spring-boot version: 2.3.2.RELEASE<br/>\nSwagger-ui version: 2.9.2</p>\n<p>Has anyone worked on a similar use case?</p>\n<p>Here is some of my config classes/methods.</p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SpringFoxConfig {\n~~\n@Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.basePackage(SpringbootApplication.class.getPackage().getName()))\n                .paths(PathSelectors.any())\n                .build()\n                .apiInfo(apiInfo())\n              *//.securitySchemes(Arrays.asList(new ApiKey(BEARER, AUTHORIZATION, HEADER))) &lt;&lt; currently I have this code but what I want is to have basic auth where user can enter his credentials*\n                .securitySchemes(Arrays.asList(new BasicAuth(&quot;basicAuth&quot;)))\n                .securityContexts(Arrays.asList(SecurityContext.builder()\n                        .securityReferences(Arrays.asList(new SecurityReference(BEARER, new AuthorizationScope[] {})))\n                        .forPaths(PathSelectors.any())\n                        .build()));\n    }\n~~\n}\n</code></pre>\n<pre><code>@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n~~\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        ExpressionUrlAuthorizationConfigurer&lt;HttpSecurity&gt;.ExpressionInterceptUrlRegistry registry = http.authorizeRequests();\n\n        registry.antMatchers(&quot;/actuator/health&quot;)\n                .permitAll()\n                .antMatchers(&quot;/actuator/info&quot;)\n                .permitAll()\n                .antMatchers(&quot;/swagger-ui.html&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n    }\n~~\n}\n</code></pre>\n"},{"tags":["java","android","sqlite"],"answers":[{"tags":[],"owner":{"account_id":23882973,"reputation":1,"user_id":17883451,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642432151,"creation_date":1642432151,"answer_id":70743515,"question_id":70735062,"body_markdown":"Okay so now it works. I&#39;m not sure this is why, but I will post the changes I made.\r\n\r\nSo one problem was in myAdapter. In the mainLayout OnClick the &quot;name&quot; and &quot;age&quot; where different from the &quot;Name&quot; and &quot;Age&quot; in the UpdateActivity where I get data from Intent. The first letters of both &#39;age&#39; and &#39;name&#39; were not in CAPITALS.\r\nAnother thing I changed was the get(position) in the onBindHolder.\r\n\r\nNow the onBindHolder looks like this:\r\n\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, final int position) {\r\n        holder.id_txt.setText(String.valueOf(id.get(holder.getAdapterPosition())));\r\n        holder.name_txt.setText(String.valueOf(name.get(holder.getAdapterPosition())));\r\n        holder.age_txt.setText(String.valueOf(age.get(holder.getAdapterPosition())));\r\n\r\n\r\n        holder.mainLayout.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(v.getContext(), Update_Activity.class);\r\n                intent.putExtra(&quot;id&quot;, String.valueOf(id.get(holder.getAdapterPosition())));\r\n                intent.putExtra(&quot;Name&quot;, String.valueOf(name.get(holder.getAdapterPosition())));\r\n                intent.putExtra(&quot;Age&quot;, String.valueOf(age.get(holder.getAdapterPosition())));\r\n                v.getContext().startActivity(intent);\r\n                //activity.startActivityForResult(intent, 1);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\nHope it helps anyone","title":"How to get data from an item in a recyclerView and view it in a different activity on editTexts","body":"<p>Okay so now it works. I'm not sure this is why, but I will post the changes I made.</p>\n<p>So one problem was in myAdapter. In the mainLayout OnClick the &quot;name&quot; and &quot;age&quot; where different from the &quot;Name&quot; and &quot;Age&quot; in the UpdateActivity where I get data from Intent. The first letters of both 'age' and 'name' were not in CAPITALS.\nAnother thing I changed was the get(position) in the onBindHolder.</p>\n<p>Now the onBindHolder looks like this:</p>\n<pre><code>public void onBindViewHolder(@NonNull MyViewHolder holder, final int position) {\n    holder.id_txt.setText(String.valueOf(id.get(holder.getAdapterPosition())));\n    holder.name_txt.setText(String.valueOf(name.get(holder.getAdapterPosition())));\n    holder.age_txt.setText(String.valueOf(age.get(holder.getAdapterPosition())));\n\n\n    holder.mainLayout.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(v.getContext(), Update_Activity.class);\n            intent.putExtra(&quot;id&quot;, String.valueOf(id.get(holder.getAdapterPosition())));\n            intent.putExtra(&quot;Name&quot;, String.valueOf(name.get(holder.getAdapterPosition())));\n            intent.putExtra(&quot;Age&quot;, String.valueOf(age.get(holder.getAdapterPosition())));\n            v.getContext().startActivity(intent);\n            //activity.startActivityForResult(intent, 1);\n        }\n    });\n\n}\n</code></pre>\n<p>Hope it helps anyone</p>\n"}],"owner":{"account_id":23882973,"reputation":1,"user_id":17883451,"display_name":"Anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642446991,"creation_date":1642375756,"question_id":70735062,"body_markdown":"When the user logins an activity where the user can create their account opens (CreateProfileActivity). When the profile is created the user is redirected to the recyclerView activity where their profile info is displayed in a recyclerView. When user clicks on the item in recyclerView the Update Activity will open. I want their profile information from the recyclerView to load on the Update Activity. Please help.\r\n\r\nP.S. Since I haven&#39;t made the CreateProfile_Activity open only once, as I don&#39;t want the user to create more than one profile, So for now: I ran the app once and created an account and then I changed it so now when the user logins it opens the recyclerView_Activity.\r\n\r\nHere is the recyclerView_Activity\r\n\r\n    package com.example.insert_update_activity;\r\n    \r\n    import android.content.Intent;\r\n    import android.database.Cursor;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.recyclerview.widget.LinearLayoutManager;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class recyclerView_Activity extends AppCompatActivity {\r\n    \r\n       // Button insertBtn;\r\n        RecyclerView recyclerView;\r\n        DBHelper myDB;\r\n        ArrayList&lt;String&gt; temp_id, temp_name, temp_age;\r\n        myAdapter myAdapter;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_recycler_view);\r\n    \r\n            recyclerView = (RecyclerView) findViewById(R.id.recyclerView);\r\n     /*       insertBtn = (Button) findViewById(R.id.insertBtn);\r\n    \r\n            insertBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(recyclerView_Activity.this, Insert_Activity.class);\r\n                    startActivity(intent);\r\n                }\r\n            });*/\r\n    \r\n            myDB = new DBHelper(recyclerView_Activity.this);\r\n    \r\n            temp_id = new ArrayList&lt;&gt;();\r\n            temp_name = new ArrayList&lt;&gt;();\r\n            temp_age = new ArrayList&lt;&gt;();\r\n    \r\n            storeDataInArrays();\r\n    \r\n            myAdapter = new myAdapter(recyclerView_Activity.this, this, temp_id, temp_name, temp_age);\r\n            recyclerView.setAdapter(myAdapter);\r\n            recyclerView.setLayoutManager(new LinearLayoutManager(recyclerView_Activity.this));\r\n        }\r\n    \r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            if (requestCode == 1)\r\n            {\r\n                recreate();\r\n            }\r\n        }\r\n    \r\n        void storeDataInArrays() {\r\n            Cursor cursor = myDB.readData();  // Cursor cursor = myDB.readAllData();\r\n    \r\n            if (cursor.getCount() == 0)\r\n            {\r\n                Toast.makeText(recyclerView_Activity.this, &quot;No Data&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            else\r\n            {\r\n                while (cursor.moveToNext()) {\r\n    \r\n                    temp_id.add(cursor.getString(0));\r\n                    temp_name.add(cursor.getString(1));\r\n                    temp_age.add(cursor.getString(2));\r\n    \r\n    \r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nHere is the UpdateActivity\r\n\r\n    package com.example.insert_update_activity;\r\n    \r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    public class Update_Activity extends AppCompatActivity {\r\n    \r\n        EditText name, age;\r\n        Button updateBtn;\r\n        String id;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_update);\r\n    \r\n            name = (EditText) findViewById(R.id.edit_name);\r\n            age = (EditText) findViewById(R.id.edit_age);\r\n            updateBtn = (Button) findViewById(R.id.updateBtn);\r\n    \r\n            updateBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    String sName = name.getText().toString().trim();\r\n                    String sAge = age.getText().toString().trim();\r\n                    DBHelper db = new DBHelper(Update_Activity.this);\r\n    \r\n                    db.updateData(id, sName, sAge);\r\n    \r\n                    Intent intent = new Intent(Update_Activity.this, com.example.insert_update_activity.recyclerView_Activity.class);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n            getAndSetIntentData();\r\n    \r\n        }\r\n    \r\n        void getAndSetIntentData() {\r\n            if (getIntent().hasExtra(&quot;id&quot;) &amp;&amp; getIntent().hasExtra(&quot;Name&quot;) &amp;&amp; getIntent().hasExtra(&quot;Age&quot;))\r\n            {\r\n                // Getting data from Intent\r\n                id = getIntent().getStringExtra(&quot;id&quot;);\r\n                String NAME = getIntent().getStringExtra(&quot;Name&quot;);\r\n                String AGE = getIntent().getStringExtra(&quot;Age&quot;);\r\n    \r\n                // Setting Intent Data\r\n                name.setText(NAME);\r\n                age.setText(AGE);\r\n            }\r\n            else\r\n            {\r\n                Toast.makeText(Update_Activity.this, &quot;No Data&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\nHere is the DBHelper\r\n\r\n    package com.example.insert_update_activity;\r\n    \r\n    import android.content.ContentValues;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.annotation.Nullable;\r\n    \r\n    public class DBHelper extends SQLiteOpenHelper {\r\n    \r\n        private Context context;\r\n        private static final String DATABASE_NAME = &quot;Database.db&quot;;\r\n        private static final int DATABASE_VERSION = 1;\r\n    \r\n        // Create table\r\n        private static final String TABLE_TEMP = &quot;TEMPP&quot;;\r\n        private static final String COLUMN_ID = &quot;id&quot;;\r\n        private static final String COLUMN_NAME = &quot;name&quot;;\r\n        private static final String COLUMN_AGE = &quot;age&quot;;\r\n    \r\n        public DBHelper(@Nullable Context context) {\r\n            super(context, DATABASE_NAME, null, DATABASE_VERSION);\r\n            this.context = context;\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n            String profileQuery = &quot;CREATE TABLE &quot; + TABLE_TEMP +\r\n                    &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n                    COLUMN_NAME + &quot; TEXT, &quot; + COLUMN_AGE + &quot; INTEGER &quot; + &quot;)&quot;;\r\n            db.execSQL(profileQuery);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int i, int i1) {\r\n            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_TEMP);\r\n            onCreate(db);\r\n    \r\n    \r\n        }\r\n    \r\n        // Functions for TEMP TABLE ********************************************************************************************************************************************  PROFILE TEMP\r\n        public Boolean insertData(String name, String age) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(COLUMN_NAME, name);\r\n            cv.put(COLUMN_AGE, age);\r\n    \r\n            long result = db.insert(TABLE_TEMP, null, cv);\r\n    \r\n            if (result == -1) {\r\n                Toast.makeText(context, &quot;Failed to Insert&quot;, Toast.LENGTH_SHORT).show();\r\n                return  false;\r\n            } else {\r\n                Toast.makeText(context, &quot;Data Inserted Successfully!&quot;, Toast.LENGTH_SHORT).show();\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        Cursor readData() {\r\n            String query = &quot;SELECT * FROM &quot; + TABLE_TEMP;\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n    \r\n            Cursor cursor = null;\r\n    \r\n            if (db != null) {\r\n                cursor = db.rawQuery(query, null);\r\n            }\r\n            return cursor;\r\n        }\r\n    \r\n        // Update data using where clause;\r\n        public Boolean updateData(String row_id, String name, String age)\r\n        {\r\n            SQLiteDatabase db = this.getWritableDatabase(); // SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(COLUMN_NAME, name);\r\n            cv.put(COLUMN_AGE, age);\r\n    \r\n            long result = db.update(TABLE_TEMP, cv, COLUMN_ID + &quot; =? &quot;, new String[]{row_id});\r\n           \r\n            if (result == -1)\r\n            {\r\n                Toast.makeText(context, &quot;Failed to Update&quot;,  Toast.LENGTH_SHORT).show();\r\n                return false;\r\n            }\r\n            else\r\n            {\r\n                Toast.makeText(context, &quot;Successfully Updated!&quot;,  Toast.LENGTH_SHORT).show();\r\n                return true;\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\nHere is the Adapter\r\n\r\n    package com.example.insert_update_activity;\r\n    \r\n    import android.app.Activity;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TextView;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class myAdapter extends RecyclerView.Adapter&lt;myAdapter.MyViewHolder&gt; {\r\n    \r\n        private Context context;\r\n        Activity activity;\r\n        private ArrayList id, name, age;\r\n    \r\n        myAdapter(Activity activity, Context context, ArrayList id, ArrayList name, ArrayList age) {\r\n    \r\n            this.activity = activity;\r\n            this.context = context;\r\n            this.id = id;\r\n            this.name = name;\r\n            this.age = age;\r\n    \r\n        }\r\n        @NonNull\r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            LayoutInflater inflater = LayoutInflater.from(context);\r\n            View view = inflater.inflate(R.layout.my_row, parent, false);\r\n            return new MyViewHolder(view);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(@NonNull MyViewHolder holder, final int position) {\r\n            holder.id_txt.setText(String.valueOf(id.get(position)));\r\n            holder.name_txt.setText(String.valueOf(name.get(position)));\r\n            holder.age_txt.setText(String.valueOf(age.get(position)));\r\n            holder.mainLayout.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(context, Update_Activity.class);\r\n                    intent.putExtra(&quot;id&quot;, String.valueOf(id.get(position)));\r\n                    intent.putExtra(&quot;name&quot;, String.valueOf(name.get(position)));\r\n                    intent.putExtra(&quot;age&quot;, String.valueOf(age.get(position)));\r\n                    activity.startActivityForResult(intent, 1);\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n    \r\n            return id.size();\r\n        }\r\n    \r\n        public class MyViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n            TextView id_txt, name_txt, age_txt;\r\n            LinearLayout mainLayout;\r\n    \r\n            public MyViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n    \r\n                id_txt = itemView.findViewById(R.id.id_txt);\r\n                name_txt = itemView.findViewById(R.id.name_txt);\r\n                age_txt = itemView.findViewById(R.id.age_txt);\r\n                mainLayout = itemView.findViewById(R.id.mainLayout);\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nAnd here is the xml file my_row for the recyclerView\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:id=&quot;@+id/mainLayout&quot;&gt;\r\n    \r\n        &lt;androidx.cardview.widget.CardView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:outlineSpotShadowColor=&quot;#000000&quot;\r\n            app:cardElevation=&quot;3dp&quot;&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:padding=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/id_txt&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginRight=&quot;10dp&quot;\r\n                    android:text=&quot;1&quot;\r\n                    android:textColor=&quot;#9A9797&quot;\r\n                    android:textSize=&quot;35dp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/nameTitle&quot;\r\n                    android:layout_width=&quot;90dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginLeft=&quot;10dp&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:text=&quot;NAME:&quot;\r\n                    android:textColor=&quot;#000&quot;\r\n                    android:textSize=&quot;16sp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/ageTitle&quot;\r\n                    android:layout_width=&quot;90dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;AGE:&quot;\r\n                    android:textColor=&quot;#000&quot;\r\n                    android:textSize=&quot;16sp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;@+id/nameTitle&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/nameTitle&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/name_txt&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Name&quot;\r\n                    android:textSize=&quot;15sp&quot;\r\n                    app:layout_constraintStart_toEndOf=&quot;@+id/nameTitle&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;@+id/nameTitle&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/age_txt&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Age&quot;\r\n                    android:textSize=&quot;15sp&quot;\r\n                    app:layout_constraintStart_toEndOf=&quot;@+id/ageTitle&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/nameTitle&quot; /&gt;\r\n    \r\n    \r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nThe login activity is pretty simple. It just allows the user to login if username == &quot;User1&quot; and password == &quot;123456&quot;.\r\nThe CreateProfile_Activity just uses the insertData once","title":"How to get data from an item in a recyclerView and view it in a different activity on editTexts","body":"<p>When the user logins an activity where the user can create their account opens (CreateProfileActivity). When the profile is created the user is redirected to the recyclerView activity where their profile info is displayed in a recyclerView. When user clicks on the item in recyclerView the Update Activity will open. I want their profile information from the recyclerView to load on the Update Activity. Please help.</p>\n<p>P.S. Since I haven't made the CreateProfile_Activity open only once, as I don't want the user to create more than one profile, So for now: I ran the app once and created an account and then I changed it so now when the user logins it opens the recyclerView_Activity.</p>\n<p>Here is the recyclerView_Activity</p>\n<pre><code>package com.example.insert_update_activity;\n\nimport android.content.Intent;\nimport android.database.Cursor;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\npublic class recyclerView_Activity extends AppCompatActivity {\n\n   // Button insertBtn;\n    RecyclerView recyclerView;\n    DBHelper myDB;\n    ArrayList&lt;String&gt; temp_id, temp_name, temp_age;\n    myAdapter myAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_recycler_view);\n\n        recyclerView = (RecyclerView) findViewById(R.id.recyclerView);\n /*       insertBtn = (Button) findViewById(R.id.insertBtn);\n\n        insertBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(recyclerView_Activity.this, Insert_Activity.class);\n                startActivity(intent);\n            }\n        });*/\n\n        myDB = new DBHelper(recyclerView_Activity.this);\n\n        temp_id = new ArrayList&lt;&gt;();\n        temp_name = new ArrayList&lt;&gt;();\n        temp_age = new ArrayList&lt;&gt;();\n\n        storeDataInArrays();\n\n        myAdapter = new myAdapter(recyclerView_Activity.this, this, temp_id, temp_name, temp_age);\n        recyclerView.setAdapter(myAdapter);\n        recyclerView.setLayoutManager(new LinearLayoutManager(recyclerView_Activity.this));\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == 1)\n        {\n            recreate();\n        }\n    }\n\n    void storeDataInArrays() {\n        Cursor cursor = myDB.readData();  // Cursor cursor = myDB.readAllData();\n\n        if (cursor.getCount() == 0)\n        {\n            Toast.makeText(recyclerView_Activity.this, &quot;No Data&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else\n        {\n            while (cursor.moveToNext()) {\n\n                temp_id.add(cursor.getString(0));\n                temp_name.add(cursor.getString(1));\n                temp_age.add(cursor.getString(2));\n\n\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here is the UpdateActivity</p>\n<pre><code>package com.example.insert_update_activity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class Update_Activity extends AppCompatActivity {\n\n    EditText name, age;\n    Button updateBtn;\n    String id;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_update);\n\n        name = (EditText) findViewById(R.id.edit_name);\n        age = (EditText) findViewById(R.id.edit_age);\n        updateBtn = (Button) findViewById(R.id.updateBtn);\n\n        updateBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                String sName = name.getText().toString().trim();\n                String sAge = age.getText().toString().trim();\n                DBHelper db = new DBHelper(Update_Activity.this);\n\n                db.updateData(id, sName, sAge);\n\n                Intent intent = new Intent(Update_Activity.this, com.example.insert_update_activity.recyclerView_Activity.class);\n                startActivity(intent);\n            }\n        });\n        getAndSetIntentData();\n\n    }\n\n    void getAndSetIntentData() {\n        if (getIntent().hasExtra(&quot;id&quot;) &amp;&amp; getIntent().hasExtra(&quot;Name&quot;) &amp;&amp; getIntent().hasExtra(&quot;Age&quot;))\n        {\n            // Getting data from Intent\n            id = getIntent().getStringExtra(&quot;id&quot;);\n            String NAME = getIntent().getStringExtra(&quot;Name&quot;);\n            String AGE = getIntent().getStringExtra(&quot;Age&quot;);\n\n            // Setting Intent Data\n            name.setText(NAME);\n            age.setText(AGE);\n        }\n        else\n        {\n            Toast.makeText(Update_Activity.this, &quot;No Data&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n</code></pre>\n<p>Here is the DBHelper</p>\n<pre><code>package com.example.insert_update_activity;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.widget.Toast;\n\nimport androidx.annotation.Nullable;\n\npublic class DBHelper extends SQLiteOpenHelper {\n\n    private Context context;\n    private static final String DATABASE_NAME = &quot;Database.db&quot;;\n    private static final int DATABASE_VERSION = 1;\n\n    // Create table\n    private static final String TABLE_TEMP = &quot;TEMPP&quot;;\n    private static final String COLUMN_ID = &quot;id&quot;;\n    private static final String COLUMN_NAME = &quot;name&quot;;\n    private static final String COLUMN_AGE = &quot;age&quot;;\n\n    public DBHelper(@Nullable Context context) {\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\n        this.context = context;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String profileQuery = &quot;CREATE TABLE &quot; + TABLE_TEMP +\n                &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n                COLUMN_NAME + &quot; TEXT, &quot; + COLUMN_AGE + &quot; INTEGER &quot; + &quot;)&quot;;\n        db.execSQL(profileQuery);\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_TEMP);\n        onCreate(db);\n\n\n    }\n\n    // Functions for TEMP TABLE ********************************************************************************************************************************************  PROFILE TEMP\n    public Boolean insertData(String name, String age) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(COLUMN_NAME, name);\n        cv.put(COLUMN_AGE, age);\n\n        long result = db.insert(TABLE_TEMP, null, cv);\n\n        if (result == -1) {\n            Toast.makeText(context, &quot;Failed to Insert&quot;, Toast.LENGTH_SHORT).show();\n            return  false;\n        } else {\n            Toast.makeText(context, &quot;Data Inserted Successfully!&quot;, Toast.LENGTH_SHORT).show();\n            return true;\n        }\n    }\n\n    Cursor readData() {\n        String query = &quot;SELECT * FROM &quot; + TABLE_TEMP;\n        SQLiteDatabase db = this.getReadableDatabase();\n\n        Cursor cursor = null;\n\n        if (db != null) {\n            cursor = db.rawQuery(query, null);\n        }\n        return cursor;\n    }\n\n    // Update data using where clause;\n    public Boolean updateData(String row_id, String name, String age)\n    {\n        SQLiteDatabase db = this.getWritableDatabase(); // SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(COLUMN_NAME, name);\n        cv.put(COLUMN_AGE, age);\n\n        long result = db.update(TABLE_TEMP, cv, COLUMN_ID + &quot; =? &quot;, new String[]{row_id});\n       \n        if (result == -1)\n        {\n            Toast.makeText(context, &quot;Failed to Update&quot;,  Toast.LENGTH_SHORT).show();\n            return false;\n        }\n        else\n        {\n            Toast.makeText(context, &quot;Successfully Updated!&quot;,  Toast.LENGTH_SHORT).show();\n            return true;\n        }\n\n    }\n\n\n}\n</code></pre>\n<p>Here is the Adapter</p>\n<pre><code>package com.example.insert_update_activity;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\npublic class myAdapter extends RecyclerView.Adapter&lt;myAdapter.MyViewHolder&gt; {\n\n    private Context context;\n    Activity activity;\n    private ArrayList id, name, age;\n\n    myAdapter(Activity activity, Context context, ArrayList id, ArrayList name, ArrayList age) {\n\n        this.activity = activity;\n        this.context = context;\n        this.id = id;\n        this.name = name;\n        this.age = age;\n\n    }\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater inflater = LayoutInflater.from(context);\n        View view = inflater.inflate(R.layout.my_row, parent, false);\n        return new MyViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MyViewHolder holder, final int position) {\n        holder.id_txt.setText(String.valueOf(id.get(position)));\n        holder.name_txt.setText(String.valueOf(name.get(position)));\n        holder.age_txt.setText(String.valueOf(age.get(position)));\n        holder.mainLayout.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(context, Update_Activity.class);\n                intent.putExtra(&quot;id&quot;, String.valueOf(id.get(position)));\n                intent.putExtra(&quot;name&quot;, String.valueOf(name.get(position)));\n                intent.putExtra(&quot;age&quot;, String.valueOf(age.get(position)));\n                activity.startActivityForResult(intent, 1);\n            }\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n\n        return id.size();\n    }\n\n    public class MyViewHolder extends RecyclerView.ViewHolder {\n\n        TextView id_txt, name_txt, age_txt;\n        LinearLayout mainLayout;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            id_txt = itemView.findViewById(R.id.id_txt);\n            name_txt = itemView.findViewById(R.id.name_txt);\n            age_txt = itemView.findViewById(R.id.age_txt);\n            mainLayout = itemView.findViewById(R.id.mainLayout);\n\n        }\n    }\n}\n</code></pre>\n<p>And here is the xml file my_row for the recyclerView</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    android:id=&quot;@+id/mainLayout&quot;&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:outlineSpotShadowColor=&quot;#000000&quot;\n        app:cardElevation=&quot;3dp&quot;&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:padding=&quot;12dp&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/id_txt&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginRight=&quot;10dp&quot;\n                android:text=&quot;1&quot;\n                android:textColor=&quot;#9A9797&quot;\n                android:textSize=&quot;35dp&quot;\n                android:textStyle=&quot;bold&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/nameTitle&quot;\n                android:layout_width=&quot;90dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginLeft=&quot;10dp&quot;\n                android:layout_marginTop=&quot;10dp&quot;\n                android:text=&quot;NAME:&quot;\n                android:textColor=&quot;#000&quot;\n                android:textSize=&quot;16sp&quot;\n                android:textStyle=&quot;bold&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/ageTitle&quot;\n                android:layout_width=&quot;90dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;AGE:&quot;\n                android:textColor=&quot;#000&quot;\n                android:textSize=&quot;16sp&quot;\n                android:textStyle=&quot;bold&quot;\n                app:layout_constraintStart_toStartOf=&quot;@+id/nameTitle&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/nameTitle&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/name_txt&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Name&quot;\n                android:textSize=&quot;15sp&quot;\n                app:layout_constraintStart_toEndOf=&quot;@+id/nameTitle&quot;\n                app:layout_constraintTop_toTopOf=&quot;@+id/nameTitle&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/age_txt&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Age&quot;\n                android:textSize=&quot;15sp&quot;\n                app:layout_constraintStart_toEndOf=&quot;@+id/ageTitle&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/nameTitle&quot; /&gt;\n\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>The login activity is pretty simple. It just allows the user to login if username == &quot;User1&quot; and password == &quot;123456&quot;.\nThe CreateProfile_Activity just uses the insertData once</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1642445217,"post_id":70746117,"comment_id":125067689,"body_markdown":"Please show the full project setup (directory structure) or even better make an example project on Github or alike...","body":"Please show the full project setup (directory structure) or even better make an example project on Github or alike..."},{"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"score":0,"creation_date":1642445828,"post_id":70746117,"comment_id":125067860,"body_markdown":"I think this is testable/reproducible with any java project, this is using spring boot :)","body":"I think this is testable/reproducible with any java project, this is using spring boot :)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1642446157,"post_id":70746117,"comment_id":125067947,"body_markdown":"It&#39;s not the question if you think it&#39;s testable/reproducible with any java project, because I have hundreds of projects which work fine ...so please show the setup etc. otherwise I can not even guess... nor help...","body":"It&#39;s not the question if you think it&#39;s testable/reproducible with any java project, because I have hundreds of projects which work fine ...so please show the setup etc. otherwise I can not even guess... nor help..."},{"owner":{"account_id":16526510,"reputation":372,"user_id":11941108,"display_name":"Praveen"},"score":0,"creation_date":1642446389,"post_id":70746117,"comment_id":125068019,"body_markdown":"idk whether this works, but try deleting the `target` folder and recompile the project with maven again.","body":"idk whether this works, but try deleting the <code>target</code> folder and recompile the project with maven again."}],"answers":[{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642446834,"creation_date":1642446834,"answer_id":70746413,"question_id":70746117,"body_markdown":"I&#39;ve tried your example:\r\n\r\n    stockapp-spring-boot (master)$ mvn clean compile \r\n    [INFO] Scanning for projects...\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Build Order:\r\n    [INFO] \r\n    [INFO] stockapp-spring-boot                                               [pom]\r\n    [INFO] stockapp                                                           [jar]\r\n    [INFO] \r\n    [INFO] -------------&lt; it.raffaele.esposito:stockapp-spring-boot &gt;--------------\r\n    [INFO] Building stockapp-spring-boot 1.2.2-SNAPSHOT                       [1/2]\r\n    [INFO] --------------------------------[ pom ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ stockapp-spring-boot ---\r\n\r\n     ...\r\n\r\n    [INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ stockapp ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n    [INFO] Copying 14 resources\r\n    [INFO] The encoding used to copy filtered properties files have not been set. This means that the same encoding will be used to copy filtered properties files as when copying other filtered resources. This might not be what you want! Run your build with --debug to see which files might be affected. Read more at https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:3.2.0:copy-resources (Copy Vue frontend into Spring Boot target static folder) @ stockapp ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n    [INFO] Copying 8 resources\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ stockapp ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 27 source files to stockapp-spring-boot/stockapp/target/classes\r\n    [INFO] stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java: stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java uses or overrides a deprecated API.\r\n    [INFO] stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java: Recompile with -Xlint:deprecation for details.\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Summary for stockapp-spring-boot 1.2.2-SNAPSHOT:\r\n    [INFO] \r\n    [INFO] stockapp-spring-boot ............................... SUCCESS [  0.090 s]\r\n    [INFO] stockapp ........................................... SUCCESS [ 21.988 s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  22.339 s\r\n    [INFO] Finished at: 2022-01-17T20:12:05+01:00\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\nand no problems at all...","title":"Calling javac the way Maven does","body":"<p>I've tried your example:</p>\n<pre><code>stockapp-spring-boot (master)$ mvn clean compile \n[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Build Order:\n[INFO] \n[INFO] stockapp-spring-boot                                               [pom]\n[INFO] stockapp                                                           [jar]\n[INFO] \n[INFO] -------------&lt; it.raffaele.esposito:stockapp-spring-boot &gt;--------------\n[INFO] Building stockapp-spring-boot 1.2.2-SNAPSHOT                       [1/2]\n[INFO] --------------------------------[ pom ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ stockapp-spring-boot ---\n\n ...\n\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ stockapp ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 14 resources\n[INFO] The encoding used to copy filtered properties files have not been set. This means that the same encoding will be used to copy filtered properties files as when copying other filtered resources. This might not be what you want! Run your build with --debug to see which files might be affected. Read more at https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html\n[INFO] \n[INFO] --- maven-resources-plugin:3.2.0:copy-resources (Copy Vue frontend into Spring Boot target static folder) @ stockapp ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 8 resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ stockapp ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 27 source files to stockapp-spring-boot/stockapp/target/classes\n[INFO] stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java: stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java uses or overrides a deprecated API.\n[INFO] stockapp-spring-boot/stockapp/src/main/java/it/raffaele/esposito/app/service/MappingFunctions.java: Recompile with -Xlint:deprecation for details.\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary for stockapp-spring-boot 1.2.2-SNAPSHOT:\n[INFO] \n[INFO] stockapp-spring-boot ............................... SUCCESS [  0.090 s]\n[INFO] stockapp ........................................... SUCCESS [ 21.988 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  22.339 s\n[INFO] Finished at: 2022-01-17T20:12:05+01:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>and no problems at all...</p>\n"}],"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70746413,"answer_count":1,"score":2,"last_activity_date":1642446834,"creation_date":1642445049,"question_id":70746117,"body_markdown":"\r\nCalling `mvn clean compile -X`\r\n\r\nshows the following (few dependencies omitted to stay in question max char size):\r\n\r\n```\r\n[DEBUG]   (f) compileSourceRoots = [/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java]\r\n[DEBUG]   (f) compilerId = javac\r\n[DEBUG]   (f) debug = true\r\n[DEBUG]   (f) encoding = UTF-8\r\n[DEBUG]   (f) failOnError = true\r\n[DEBUG]   (f) failOnWarning = false\r\n[DEBUG]   (f) forceJavacCompilerUse = false\r\n[DEBUG]   (f) fork = false\r\n[DEBUG]   (f) generatedSourcesDirectory = /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations\r\n[DEBUG]   (f) mojoExecution = org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile {execution: default-compile}\r\n[DEBUG]   (f) optimize = false\r\n[DEBUG]   (f) outputDirectory = /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes\r\n[DEBUG]   (f) parameters = false\r\n[DEBUG]   (f) project = MavenProject: it.u1.u2:stockapp:1.2.2-SNAPSHOT @ /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/pom.xml\r\n[DEBUG]   (f) projectArtifact = it.u1.u2:stockapp:jar:1.2.2-SNAPSHOT\r\n[DEBUG]   (f) session = org.apache.maven.execution.MavenSession@633a2e99\r\n[DEBUG]   (f) showDeprecation = false\r\n[DEBUG]   (f) showWarnings = false\r\n[DEBUG]   (f) skipMultiThreadWarning = false\r\n[DEBUG]   (f) source = 11\r\n[DEBUG]   (f) staleMillis = 0\r\n[DEBUG]   (s) target = 11\r\n[DEBUG]   (f) useIncrementalCompilation = true\r\n[DEBUG]   (f) verbose = false\r\n[DEBUG] -- end configuration --\r\n[DEBUG] Using compiler &#39;javac&#39;.\r\n```\r\n\r\nand also\r\n```\r\n[DEBUG] Command line options:\r\n[DEBUG] -d /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/u/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/u/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/u/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/u/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/u/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/u/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/u/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/u/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/u/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/u/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/u/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/u/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/u/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/u/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/u/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/u/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/u/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/u/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/u/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/u/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/u/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/u/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 11 -source 11 -encoding UTF-8\r\n```\r\n\r\nSo I was under the impression that Maven makes this call using javac:\r\n\r\n```\r\njavac -d /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/u/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/u/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/u/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/u/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/u/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/u/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/u/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/u/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/u/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/u/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/u/.m2/repository/jakarta/transaction/jakarta.transaction-api/1.3.3/jakarta.transaction-api-1.3.3.jar:/Users/u/.m2/repository/jakarta/persistence/jakarta.persistence-api/2.2.3/jakarta.persistence-api-2.2.3.jar:/Users/u/.m2/repository/org/hibernate/hibernate-core/5.6.3.Final/hibernate-core-5.6.3.Final.jar:/Users/u/.m2/repository/org/jboss/logging/jboss-logging/3.4.2.Final/jboss-logging-3.4.2.Final.jar:/Users/u/.m2/repository/net/bytebuddy/byte-buddy/1.11.22/byte-buddy-1.11.22.jar:/Users/u/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/u/.m2/repository/org/jboss/jandex/2.2.3.Final/jandex-2.2.3.Final.jar:/Users/u/.m2/repository/com/fasterxml/classmate/1.5.1/classmate-1.5.1.jar:/Users/u/.m2/repository/org/hibernate/common/hibernate-commons-annotations/5.1.2.Final/hibernate-commons-annotations-5.1.2.Final.jar:/Users/u/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/Users/u/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/Users/u/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/u/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/u/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/u/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/u/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/u/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/u/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/u/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/u/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/u/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/u/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/u/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/u/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 11 -source 11 -encoding UTF-8\r\n```\r\n\r\n\r\nBut calling it on command line shows:\r\n```\r\nerror: no source files\r\n```\r\n\r\nany help on what it&#39;s wrong ?","title":"Calling javac the way Maven does","body":"<p>Calling <code>mvn clean compile -X</code></p>\n<p>shows the following (few dependencies omitted to stay in question max char size):</p>\n<pre><code>[DEBUG]   (f) compileSourceRoots = [/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java]\n[DEBUG]   (f) compilerId = javac\n[DEBUG]   (f) debug = true\n[DEBUG]   (f) encoding = UTF-8\n[DEBUG]   (f) failOnError = true\n[DEBUG]   (f) failOnWarning = false\n[DEBUG]   (f) forceJavacCompilerUse = false\n[DEBUG]   (f) fork = false\n[DEBUG]   (f) generatedSourcesDirectory = /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations\n[DEBUG]   (f) mojoExecution = org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile {execution: default-compile}\n[DEBUG]   (f) optimize = false\n[DEBUG]   (f) outputDirectory = /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes\n[DEBUG]   (f) parameters = false\n[DEBUG]   (f) project = MavenProject: it.u1.u2:stockapp:1.2.2-SNAPSHOT @ /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/pom.xml\n[DEBUG]   (f) projectArtifact = it.u1.u2:stockapp:jar:1.2.2-SNAPSHOT\n[DEBUG]   (f) session = org.apache.maven.execution.MavenSession@633a2e99\n[DEBUG]   (f) showDeprecation = false\n[DEBUG]   (f) showWarnings = false\n[DEBUG]   (f) skipMultiThreadWarning = false\n[DEBUG]   (f) source = 11\n[DEBUG]   (f) staleMillis = 0\n[DEBUG]   (s) target = 11\n[DEBUG]   (f) useIncrementalCompilation = true\n[DEBUG]   (f) verbose = false\n[DEBUG] -- end configuration --\n[DEBUG] Using compiler 'javac'.\n</code></pre>\n<p>and also</p>\n<pre><code>[DEBUG] Command line options:\n[DEBUG] -d /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/u/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/u/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/u/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/u/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/u/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/u/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/u/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/u/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/u/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/u/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/u/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/u/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/u/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/u/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/u/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/u/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/u/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/u/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/u/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/u/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/u/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/u/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 11 -source 11 -encoding UTF-8\n</code></pre>\n<p>So I was under the impression that Maven makes this call using javac:</p>\n<pre><code>javac -d /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/u/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/u/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/u/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/u/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/u/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/u/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/u/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/u/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/u/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/u/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/u/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/u/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/u/.m2/repository/jakarta/transaction/jakarta.transaction-api/1.3.3/jakarta.transaction-api-1.3.3.jar:/Users/u/.m2/repository/jakarta/persistence/jakarta.persistence-api/2.2.3/jakarta.persistence-api-2.2.3.jar:/Users/u/.m2/repository/org/hibernate/hibernate-core/5.6.3.Final/hibernate-core-5.6.3.Final.jar:/Users/u/.m2/repository/org/jboss/logging/jboss-logging/3.4.2.Final/jboss-logging-3.4.2.Final.jar:/Users/u/.m2/repository/net/bytebuddy/byte-buddy/1.11.22/byte-buddy-1.11.22.jar:/Users/u/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/u/.m2/repository/org/jboss/jandex/2.2.3.Final/jandex-2.2.3.Final.jar:/Users/u/.m2/repository/com/fasterxml/classmate/1.5.1/classmate-1.5.1.jar:/Users/u/.m2/repository/org/hibernate/common/hibernate-commons-annotations/5.1.2.Final/hibernate-commons-annotations-5.1.2.Final.jar:/Users/u/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/Users/u/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/Users/u/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/u/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/u/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/u/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/u/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/u/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/u/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/u/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/u/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/u/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/u/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/u/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/u/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/u/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/u/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/u/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/u/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/u/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/u/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/u/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/u/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 11 -source 11 -encoding UTF-8\n</code></pre>\n<p>But calling it on command line shows:</p>\n<pre><code>error: no source files\n</code></pre>\n<p>any help on what it's wrong ?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1642430279,"post_id":70743062,"comment_id":125062172,"body_markdown":"Did you ran the `mvn install` goal on your backend project?","body":"Did you ran the <code>mvn install</code> goal on your backend project?"},{"owner":{"account_id":18462998,"reputation":29,"user_id":13449975,"display_name":"torbj&#246;rn s&#246;dheim"},"score":0,"creation_date":1642436422,"post_id":70743062,"comment_id":125064703,"body_markdown":"I ran mvn: \nmvn clean compile \nmvn project \nand last on the Other project: \nmvn install:install-file -Dfile=C:\\tobbe\\eclipse\\ws_privat\\Other\\target\\Other-1.0.0-SNAPSHOT.jar -DgroupId=tobbe -DartifactId=Other -Dversion=1.0.0-SNAPSHOT -Dpackaging=jar\n\nDo I miss something?","body":"I ran mvn:  mvn clean compile  mvn project  and last on the Other project:  mvn install:install-file -Dfile=C:\\tobbe\\eclipse\\ws_privat\\Other\\target\\Other-1.0.0-S&zwnj;&#8203;NAPSHOT.jar -DgroupId=tobbe -DartifactId=Other -Dversion=1.0.0-SNAPSHOT -Dpackaging=jar  Do I miss something?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":1,"creation_date":1642451942,"post_id":70743062,"comment_id":125069636,"body_markdown":"Why not `mvn install` (without arguments) in the local m2 repository? This is where maven is looking for dependecies. When you trying to resolve the pom.","body":"Why not <code>mvn install</code> (without arguments) in the local m2 repository? This is where maven is looking for dependecies. When you trying to resolve the pom."}],"answers":[{"tags":[],"owner":{"account_id":7281264,"reputation":518,"user_id":5550951,"display_name":"johan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642446325,"creation_date":1642446325,"answer_id":70746337,"question_id":70743062,"body_markdown":"Maven is unable to find the a dependency containing the imported class, and it is most likely because a dependency is missing or incorrectly referenced in the POM.\r\n\r\nVerify that the dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;tobbe&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Stocks_Backend&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIs actually matching the [GAV][1] for the artifact installed by the project creating the required dependency, and that it is containing &quot;Exceptions.ElementSizeException&quot;.\r\n\r\nAlso consider using the few simple [Java naming conventions][1] when naming your packages, classes, methods, and other Java types.\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/mini/guide-naming-conventions.html","title":"Why is not class from other project found when compile with Maven?","body":"<p>Maven is unable to find the a dependency containing the imported class, and it is most likely because a dependency is missing or incorrectly referenced in the POM.</p>\n<p>Verify that the dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;tobbe&lt;/groupId&gt;\n    &lt;artifactId&gt;Stocks_Backend&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Is actually matching the <a href=\"https://maven.apache.org/guides/mini/guide-naming-conventions.html\" rel=\"nofollow noreferrer\">GAV</a> for the artifact installed by the project creating the required dependency, and that it is containing &quot;Exceptions.ElementSizeException&quot;.</p>\n<p>Also consider using the few simple <a href=\"https://maven.apache.org/guides/mini/guide-naming-conventions.html\" rel=\"nofollow noreferrer\">Java naming conventions</a> when naming your packages, classes, methods, and other Java types.</p>\n"}],"owner":{"account_id":18462998,"reputation":29,"user_id":13449975,"display_name":"torbj&#246;rn s&#246;dheim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70746337,"answer_count":1,"score":-1,"last_activity_date":1642446325,"creation_date":1642430110,"question_id":70743062,"body_markdown":"Below I describe more about the issue I have. \r\n\r\n**Description**\r\nI making a program using Spring REST Interface (see code below) and I have problem to compile code with Maven (see problem section). I have no problem to compile the code using my IDE Eclipse. \r\n\r\n**Problem**\r\nWhen I compile my code with Maven in command line in Windows \r\nI use *mvn clean compile* but then get the fault message: \r\n*[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project stocks-rest: Compilation failure: Compilation failure:\r\n[ERROR] /C:/tobbe/eclipse/student-services/src/main/java/Rest/StocksRestApi.java:[25,18] package Exceptions does not exist\r\n[ERROR] /C:/tobbe/eclipse/student-services/src/main/java/Rest/StocksRestApi.java:[83,184] cannot find symbol\r\n[ERROR]   symbol:   class ElementSizeException\r\n[ERROR]   location: class Rest.StocksRestApi*\r\n\r\nI have the jar in local reposity (m2) and it contain ElementSizeException.   \r\n\r\nFile structure where ElementSizeException is stored (other project): \r\n*C:\\tobbe\\eclipse\\ws_privat\\Other\\src\\main\\java\\Exceptions (Enums)\\ElementSizeException.java*\r\n\r\nMy code: \r\n```\r\n/**\r\n * Version 1.0.2\r\n */\r\npackage Rest;\r\n\r\nimport java.awt.AWTException;\r\nimport java.awt.HeadlessException;\r\nimport java.awt.datatransfer.UnsupportedFlavorException;\r\nimport java.io.IOException;\r\nimport java.lang.instrument.IllegalClassFormatException;\r\nimport java.net.MalformedURLException;\r\nimport java.util.List;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport Enums.Market;\r\nimport Enums.REA_Stock_State;\r\nimport Enums.Stock_State;\r\n**Fault**import Exceptions.ElementSizeException;\r\nimport REA.REAMain;\r\nimport REA.REAStock;\r\nimport Stocks.Logger;\r\n\r\n@SpringBootApplication\r\n@RestController\r\npublic class StocksRestApi \r\n{\r\n\tprivate Logger iLogger = null; \r\n\t\r\n\tpublic StocksRestApi()\r\n\t{\r\n\t\tiLogger = new Logger();   \r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) \r\n\t{\r\n\t\tSpringApplication.run(StocksRestApi.class, args);\r\n\t}\r\n\t\r\n\t@GetMapping(value=&quot;/rea&quot;)\r\n\tpublic String rea() throws HeadlessException, MalformedURLException, IOException, AWTException, InterruptedException, UnsupportedFlavorException, IllegalClassFormatException, **Fault**ElementSizeException \r\n    {\r\n\t\tList&lt;REAStock&gt; stocks = REAMain.doAnalyze(true, Market.LARGE_CAP_STHLM_KEYFIGURE, REA_Stock_State.REA_ANALYZE, Stock_State.UNKNOWN, iLogger); \r\n\t\tString allStocks = &quot;&quot;; \r\n\t\r\n\t\tfor(int index = 0; index &lt; stocks.size(); index++)\r\n\t\t{\r\n\t\t\t allStocks += index + 1 + &quot;. &quot; + stocks.get(index).getName() + &quot; &quot;; \r\n\t\t\t if(index &lt; 20)\r\n\t\t\t {\r\n\t\t\t\t allStocks += &quot;&lt;br&gt;&quot;; \r\n\t\t\t }\r\n\t\t\t if(index == 19)\r\n\t\t\t {\r\n\t\t\t\t allStocks += &quot;------------------------------&lt;br&gt;&quot;; \r\n\t\t\t }\r\n\t\t }\r\n\t\treturn allStocks;\r\n    }\r\n}\r\n\r\n```\r\n\r\npom.xml: \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;tobbe&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;stocks-rest&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    \t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    \t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;tobbe&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;Stocks_Backend&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n**Question**\r\nWhy do I get compilation fault and why is not ElementSizeException (other own project which jar is in m2 and contain functionaly) found when using Maven? ","title":"Why is not class from other project found when compile with Maven?","body":"<p>Below I describe more about the issue I have.</p>\n<p><strong>Description</strong>\nI making a program using Spring REST Interface (see code below) and I have problem to compile code with Maven (see problem section). I have no problem to compile the code using my IDE Eclipse.</p>\n<p><strong>Problem</strong>\nWhen I compile my code with Maven in command line in Windows\nI use <em>mvn clean compile</em> but then get the fault message:\n<em>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project stocks-rest: Compilation failure: Compilation failure:\n[ERROR] /C:/tobbe/eclipse/student-services/src/main/java/Rest/StocksRestApi.java:[25,18] package Exceptions does not exist\n[ERROR] /C:/tobbe/eclipse/student-services/src/main/java/Rest/StocksRestApi.java:[83,184] cannot find symbol\n[ERROR]   symbol:   class ElementSizeException\n[ERROR]   location: class Rest.StocksRestApi</em></p>\n<p>I have the jar in local reposity (m2) and it contain ElementSizeException.</p>\n<p>File structure where ElementSizeException is stored (other project):\n<em>C:\\tobbe\\eclipse\\ws_privat\\Other\\src\\main\\java\\Exceptions (Enums)\\ElementSizeException.java</em></p>\n<p>My code:</p>\n<pre><code>/**\n * Version 1.0.2\n */\npackage Rest;\n\nimport java.awt.AWTException;\nimport java.awt.HeadlessException;\nimport java.awt.datatransfer.UnsupportedFlavorException;\nimport java.io.IOException;\nimport java.lang.instrument.IllegalClassFormatException;\nimport java.net.MalformedURLException;\nimport java.util.List;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport Enums.Market;\nimport Enums.REA_Stock_State;\nimport Enums.Stock_State;\n**Fault**import Exceptions.ElementSizeException;\nimport REA.REAMain;\nimport REA.REAStock;\nimport Stocks.Logger;\n\n@SpringBootApplication\n@RestController\npublic class StocksRestApi \n{\n    private Logger iLogger = null; \n    \n    public StocksRestApi()\n    {\n        iLogger = new Logger();   \n    }\n    \n    public static void main(String[] args) \n    {\n        SpringApplication.run(StocksRestApi.class, args);\n    }\n    \n    @GetMapping(value=&quot;/rea&quot;)\n    public String rea() throws HeadlessException, MalformedURLException, IOException, AWTException, InterruptedException, UnsupportedFlavorException, IllegalClassFormatException, **Fault**ElementSizeException \n    {\n        List&lt;REAStock&gt; stocks = REAMain.doAnalyze(true, Market.LARGE_CAP_STHLM_KEYFIGURE, REA_Stock_State.REA_ANALYZE, Stock_State.UNKNOWN, iLogger); \n        String allStocks = &quot;&quot;; \n    \n        for(int index = 0; index &lt; stocks.size(); index++)\n        {\n             allStocks += index + 1 + &quot;. &quot; + stocks.get(index).getName() + &quot; &quot;; \n             if(index &lt; 20)\n             {\n                 allStocks += &quot;&lt;br&gt;&quot;; \n             }\n             if(index == 19)\n             {\n                 allStocks += &quot;------------------------------&lt;br&gt;&quot;; \n             }\n         }\n        return allStocks;\n    }\n}\n\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;tobbe&lt;/groupId&gt;\n    &lt;artifactId&gt;stocks-rest&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;tobbe&lt;/groupId&gt;\n        &lt;artifactId&gt;Stocks_Backend&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>Question</strong>\nWhy do I get compilation fault and why is not ElementSizeException (other own project which jar is in m2 and contain functionaly) found when using Maven?</p>\n"},{"tags":["java","ssl-certificate"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1642443233,"post_id":70745468,"comment_id":125067044,"body_markdown":"Java does this similar to a web browser: both have a list of trusted CAs. Both check whether the servers certificate is within the validity interval and signed by a trusted CA.","body":"Java does this similar to a web browser: both have a list of trusted CAs. Both check whether the servers certificate is within the validity interval and signed by a trusted CA."},{"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"score":0,"creation_date":1642443494,"post_id":70745468,"comment_id":125067135,"body_markdown":"@\nThomas Kl&#228;ger\nI see, but how does java do that? I know that java stores some certificates in its storage. But if it is not a Google, but a public API. For example, I installed java on y computer one year ago. New API was developed yesterday and their certificate was issued yesterday. How does java get this certificate for validation?","body":"@ Thomas Kl&#228;ger I see, but how does java do that? I know that java stores some certificates in its storage. But if it is not a Google, but a public API. For example, I installed java on y computer one year ago. New API was developed yesterday and their certificate was issued yesterday. How does java get this certificate for validation?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1642444230,"post_id":70745468,"comment_id":125067364,"body_markdown":"It doesn&#39;t matter at which point in time the certificate was issued -  as long as the certificate issuer (or one of its ancestor issuers) is in the list of trusted CAs. For example the certificate used here for stackoverflow.com: it was signed by &quot;R3, Let&#39;s Encrypt, US&quot; on January 4, 2022. The &quot;R3&quot; certificate itself was signed by &quot;XSRG Root X1, ...&quot; on September 4, 2020. As long as either the &quot;R3&quot; certificate or the &quot;XSRG Root X1&quot; (which was created in 2015) is in the CA list your Java application dating from 2016 can verify the &quot;stackoverflow.com&quot; certificate.","body":"It doesn&#39;t matter at which point in time the certificate was issued -  as long as the certificate issuer (or one of its ancestor issuers) is in the list of trusted CAs. For example the certificate used here for stackoverflow.com: it was signed by &quot;R3, Let&#39;s Encrypt, US&quot; on January 4, 2022. The &quot;R3&quot; certificate itself was signed by &quot;XSRG Root X1, ...&quot; on September 4, 2020. As long as either the &quot;R3&quot; certificate or the &quot;XSRG Root X1&quot; (which was created in 2015) is in the CA list your Java application dating from 2016 can verify the &quot;stackoverflow.com&quot; certificate."}],"answers":[{"tags":[],"owner":{"account_id":7302867,"reputation":299,"user_id":5564903,"display_name":"Stefan D."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642446227,"creation_date":1642443847,"answer_id":70745899,"question_id":70745468,"body_markdown":"In step 2 the server provides his server certificate. This is issued and signed by an official Certification Authority (CA, Root CA) like Baltimore Cypertrust, Entrust, DigiCert, Verisign, e.t.c. or a Intermediate Certification Authority (ICA) whereby the certificate of an ICA is issued and signed by a root CA.\r\n\r\nBefore a CA/ICS issues a certificate it verifies that the requestor (aka subject) of a certificate is that person or company is who he pretends to be and is owner of the domain name the certificate should be issued for.\r\n\r\nThis builds a so called trust chain, from the server certificate backwards to a trusted authority.\r\n\r\nIn step 3 is verified that the certificate of step 2 lead to a known CA/ICA. If so the certificate is accepted as trusted. For this Java provides a store with all valid root and intermediate certificates of the certification authorities.\r\n\r\nTo list it&#39;s content, open a command shell,  cange to the folder ```.../jre1.x.y_zzz/lib/security/``` and type ```../../bin/keytool.exe -keystore cacerts -list```. The question for a password can be skipped by pressing enter key. Now you get a list of all certificates which are stored in the default store.\r\n```\r\ndude@cs04n4 /cygdrive/c/Program Files/Java/jre1.8.0_301/lib/security\r\n$ ../../bin/keytool.exe -keystore cacerts -list\r\nKeystore-Kennwort eingeben:\r\n\r\n*****************  WARNING WARNING WARNING  *****************\r\n* Die Integrit&#228;t der Informationen, die in Ihrem Keystore gespeichert sind, *\r\n* wurde NICHT gepr&#252;ft. Um die Integrit&#228;t zu pr&#252;fen, *\r\n* m&#252;ssen Sie Ihr Keystore-Kennwort angeben.                  *\r\n*****************  WARNING WARNING WARNING  *****************\r\n\r\nKeystore-Typ: JKS\r\nKeystore-Provider: SUN\r\n\r\nKeystore enth▒lt 92 Eintr▒ge\r\n\r\nsslrooteccca [jdk], 31.07.2020, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 34:17:BB:06:CC:60:07:DA:1B:96:1C:92:0B:8A:B4:CE:3F:AD:82:0E:4A:A3:0B:9A:CB:C4:A7:4E:BD:CE:BC:65\r\ndigicertassuredidg3 [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 7E:37:CB:8B:4C:47:09:0C:AB:36:55:1B:A6:F4:5D:B8:40:68:0F:BA:16:6A:95:2D:B1:00:71:7F:43:05:3F:C2\r\nverisignuniversalrootca [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 23:99:56:11:27:A5:71:25:DE:8C:EF:EA:61:0D:DF:2F:A0:78:B5:C8:06:7F:4E:82:82:90:BF:B8:60:E8:4B:3C\r\ndigicerttrustedrootg4 [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 55:2F:7B:DC:F1:A7:AF:9E:6C:E6:72:01:7F:4F:12:AB:F7:72:40:C7:8E:76:1A:C2:03:D1:D9:D2:0A:C8:99:88\r\n...\r\nttelesecglobalrootclass2ca [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 91:E2:F5:78:8D:58:10:EB:A7:BA:58:73:7D:E1:54:8A:8E:CA:CD:01:45:98:BC:0B:14:3E:04:1B:17:05:25:52\r\naddtrustqualifiedca [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 80:95:21:08:05:DB:4B:BC:35:5E:44:28:D8:FD:6E:C2:CD:E3:AB:5F:B9:7A:99:42:98:8E:B8:F4:DC:D0:60:16\r\ndigicertglobalrootca [jdk], 25.08.2016, trustedCertEntry,\r\nZertifikat-Fingerprint (SHA-256): 43:48:A0:E9:44:4C:78:CB:26:5E:05:8D:5E:89:44:B4:D8:4F:96:62:BD:26:DB:25:7F:89:34:A4:43:C7:01:61\r\n\r\ndude@cs04n4 /cygdrive/c/Program Files/Java/jre1.8.0_301/lib/security\r\n\r\n```\r\n\r\nWhen seting up a SSL connection you can either choose to use this default trust store or to use your own. If you decide to use your own trust store you must create it and import the server / root certificates you trust.","title":"How does java http client validate Server&#39;s CA Certificate?","body":"<p>In step 2 the server provides his server certificate. This is issued and signed by an official Certification Authority (CA, Root CA) like Baltimore Cypertrust, Entrust, DigiCert, Verisign, e.t.c. or a Intermediate Certification Authority (ICA) whereby the certificate of an ICA is issued and signed by a root CA.</p>\n<p>Before a CA/ICS issues a certificate it verifies that the requestor (aka subject) of a certificate is that person or company is who he pretends to be and is owner of the domain name the certificate should be issued for.</p>\n<p>This builds a so called trust chain, from the server certificate backwards to a trusted authority.</p>\n<p>In step 3 is verified that the certificate of step 2 lead to a known CA/ICA. If so the certificate is accepted as trusted. For this Java provides a store with all valid root and intermediate certificates of the certification authorities.</p>\n<p>To list it's content, open a command shell,  cange to the folder <code>.../jre1.x.y_zzz/lib/security/</code> and type <code>../../bin/keytool.exe -keystore cacerts -list</code>. The question for a password can be skipped by pressing enter key. Now you get a list of all certificates which are stored in the default store.</p>\n<pre><code>dude@cs04n4 /cygdrive/c/Program Files/Java/jre1.8.0_301/lib/security\n$ ../../bin/keytool.exe -keystore cacerts -list\nKeystore-Kennwort eingeben:\n\n*****************  WARNING WARNING WARNING  *****************\n* Die Integrität der Informationen, die in Ihrem Keystore gespeichert sind, *\n* wurde NICHT geprüft. Um die Integrität zu prüfen, *\n* müssen Sie Ihr Keystore-Kennwort angeben.                  *\n*****************  WARNING WARNING WARNING  *****************\n\nKeystore-Typ: JKS\nKeystore-Provider: SUN\n\nKeystore enth▒lt 92 Eintr▒ge\n\nsslrooteccca [jdk], 31.07.2020, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 34:17:BB:06:CC:60:07:DA:1B:96:1C:92:0B:8A:B4:CE:3F:AD:82:0E:4A:A3:0B:9A:CB:C4:A7:4E:BD:CE:BC:65\ndigicertassuredidg3 [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 7E:37:CB:8B:4C:47:09:0C:AB:36:55:1B:A6:F4:5D:B8:40:68:0F:BA:16:6A:95:2D:B1:00:71:7F:43:05:3F:C2\nverisignuniversalrootca [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 23:99:56:11:27:A5:71:25:DE:8C:EF:EA:61:0D:DF:2F:A0:78:B5:C8:06:7F:4E:82:82:90:BF:B8:60:E8:4B:3C\ndigicerttrustedrootg4 [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 55:2F:7B:DC:F1:A7:AF:9E:6C:E6:72:01:7F:4F:12:AB:F7:72:40:C7:8E:76:1A:C2:03:D1:D9:D2:0A:C8:99:88\n...\nttelesecglobalrootclass2ca [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 91:E2:F5:78:8D:58:10:EB:A7:BA:58:73:7D:E1:54:8A:8E:CA:CD:01:45:98:BC:0B:14:3E:04:1B:17:05:25:52\naddtrustqualifiedca [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 80:95:21:08:05:DB:4B:BC:35:5E:44:28:D8:FD:6E:C2:CD:E3:AB:5F:B9:7A:99:42:98:8E:B8:F4:DC:D0:60:16\ndigicertglobalrootca [jdk], 25.08.2016, trustedCertEntry,\nZertifikat-Fingerprint (SHA-256): 43:48:A0:E9:44:4C:78:CB:26:5E:05:8D:5E:89:44:B4:D8:4F:96:62:BD:26:DB:25:7F:89:34:A4:43:C7:01:61\n\ndude@cs04n4 /cygdrive/c/Program Files/Java/jre1.8.0_301/lib/security\n\n</code></pre>\n<p>When seting up a SSL connection you can either choose to use this default trust store or to use your own. If you decide to use your own trust store you must create it and import the server / root certificates you trust.</p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642445147,"creation_date":1642445147,"answer_id":70746132,"question_id":70745468,"body_markdown":"The whole Public Key Infrastructure (PKI) is needed to tell whether the guy who sent you data is actually that guy and not some man-in-the-middle. For this there should be some 3d-party (whom you trust) who checks whether the owner of the website and creates and *signs* a certificate for him. You can check that the certificate is valid because it&#39;s signed by CA and you trust that CA.\r\n\r\nHow do you set up whom to trust? You need to store a list somewhere. In case of Java the storage of trusted authorities and their public keys is in the file `$JAVA_HOME/lib/security/cacerts`. This file originally came from Java installation and it contains major CA&#39;s with certificates (yes, they will get expired at some point). This file can be modified (CA certificates can be added or removed) with a [keytool][1] utility which comes with Java.\r\n\r\nNow it&#39;s a bit more complicated because CA have levels of certificates: there&#39;s a Root cert which is used to sign Intermediate certs, which then are used to sign site owner&#39;s certificate. When your Java code needs to communicate using TLS/SSL it needs to:\r\n\r\n1. Download site&#39;s certificate\r\n2. Check that it&#39;s signed by a trusted CA\r\n\r\nBut while site&#39;s cert is signed by Intermediate cert, we don&#39;t always store it in `cacerts`. Usually only the Root certificate is stored. In such case there are 2 choices - either add Intermediate cert to `cacerts` (bad solution) or the website&#39;s owner needs to set up a certificate chain which will include both his cert, the cert that signed him, the cert that signed that one and so on until it reacher the Root. In this set up as long as you can check any certificate in this chain - you will trust that website.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html","title":"How does java http client validate Server&#39;s CA Certificate?","body":"<p>The whole Public Key Infrastructure (PKI) is needed to tell whether the guy who sent you data is actually that guy and not some man-in-the-middle. For this there should be some 3d-party (whom you trust) who checks whether the owner of the website and creates and <em>signs</em> a certificate for him. You can check that the certificate is valid because it's signed by CA and you trust that CA.</p>\n<p>How do you set up whom to trust? You need to store a list somewhere. In case of Java the storage of trusted authorities and their public keys is in the file <code>$JAVA_HOME/lib/security/cacerts</code>. This file originally came from Java installation and it contains major CA's with certificates (yes, they will get expired at some point). This file can be modified (CA certificates can be added or removed) with a <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html\" rel=\"nofollow noreferrer\">keytool</a> utility which comes with Java.</p>\n<p>Now it's a bit more complicated because CA have levels of certificates: there's a Root cert which is used to sign Intermediate certs, which then are used to sign site owner's certificate. When your Java code needs to communicate using TLS/SSL it needs to:</p>\n<ol>\n<li>Download site's certificate</li>\n<li>Check that it's signed by a trusted CA</li>\n</ol>\n<p>But while site's cert is signed by Intermediate cert, we don't always store it in <code>cacerts</code>. Usually only the Root certificate is stored. In such case there are 2 choices - either add Intermediate cert to <code>cacerts</code> (bad solution) or the website's owner needs to set up a certificate chain which will include both his cert, the cert that signed him, the cert that signed that one and so on until it reacher the Root. In this set up as long as you can check any certificate in this chain - you will trust that website.</p>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3008,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1642446227,"creation_date":1642441370,"question_id":70745468,"body_markdown":"I am trying to understand SSL and reading different articles. All articles have pictures like this([picture source][1]):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThere are a lot of examples, but I want to understand **step 3**\r\nIf I use a browser, it&#39;s understandable. The browser has itself mechanism for validation. But what if I use my java client? For example, I have an application that makes requests to - `https://www.google.com/search?q=weather`. How can I validate Google&#39;s Certificate? Should I do that? Should I get this Certificate and add it to the trust store? Maybe I should add only not-public certificates to the trust store?\r\n\r\nCan anyone explain a chain of steps that java HTTP client makes for validation? (You can use any java HTTP client for explanation)\r\n\r\n  [1]: https://docs.solace.com/Configuring-and-Managing/Two-Way-SSL-Authentication.htm\r\n  [2]: https://i.stack.imgur.com/lUBOB.png","title":"How does java http client validate Server&#39;s CA Certificate?","body":"<p>I am trying to understand SSL and reading different articles. All articles have pictures like this(<a href=\"https://docs.solace.com/Configuring-and-Managing/Two-Way-SSL-Authentication.htm\" rel=\"nofollow noreferrer\">picture source</a>):</p>\n<p><a href=\"https://i.stack.imgur.com/lUBOB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lUBOB.png\" alt=\"enter image description here\" /></a></p>\n<p>There are a lot of examples, but I want to understand <strong>step 3</strong>\nIf I use a browser, it's understandable. The browser has itself mechanism for validation. But what if I use my java client? For example, I have an application that makes requests to - <code>https://www.google.com/search?q=weather</code>. How can I validate Google's Certificate? Should I do that? Should I get this Certificate and add it to the trust store? Maybe I should add only not-public certificates to the trust store?</p>\n<p>Can anyone explain a chain of steps that java HTTP client makes for validation? (You can use any java HTTP client for explanation)</p>\n"},{"tags":["java","completable-future"],"answers":[{"tags":[],"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1642445972,"creation_date":1583763431,"answer_id":60602429,"question_id":60579467,"body_markdown":"You can combine an [`handle()`][1] returning a `CompletableFuture` with a `thenCompose(x -&gt; x)`:\r\n\r\n    CompletableFuture&lt;String&gt; future2 = future.handle((result, error) -&gt; {\r\n      if (error != null)\r\n        return submit(&quot;failure&quot;); // Handle error by doing a different action with the same result (like a fallback)\r\n      else\r\n        return submit(result);\r\n    })\r\n    .thenCompose(x -&gt; x);\r\n\r\nUnfortunately, there is no way to avoid that last `thenCompose()`. See also [How to avoid invoking `CompletableFuture.thenCompose(x -&gt; x)`?][2] and my comment on it.\r\n\r\nEdit: for Java 12+ there is now `exceptionallyCompose()`, which I described as [an answer on this question’s duplicate target](https://stackoverflow.com/a/70746175/525036).\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#handle-java.util.function.BiFunction-\r\n  [2]: https://stackoverflow.com/q/51217350/525036","title":"CompletableFuture compose for exceptions","body":"<p>You can combine an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#handle-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\"><code>handle()</code></a> returning a <code>CompletableFuture</code> with a <code>thenCompose(x -&gt; x)</code>:</p>\n<pre><code>CompletableFuture&lt;String&gt; future2 = future.handle((result, error) -&gt; {\n  if (error != null)\n    return submit(&quot;failure&quot;); // Handle error by doing a different action with the same result (like a fallback)\n  else\n    return submit(result);\n})\n.thenCompose(x -&gt; x);\n</code></pre>\n<p>Unfortunately, there is no way to avoid that last <code>thenCompose()</code>. See also <a href=\"https://stackoverflow.com/q/51217350/525036\">How to avoid invoking <code>CompletableFuture.thenCompose(x -&gt; x)</code>?</a> and my comment on it.</p>\n<p>Edit: for Java 12+ there is now <code>exceptionallyCompose()</code>, which I described as <a href=\"https://stackoverflow.com/a/70746175/525036\">an answer on this question’s duplicate target</a>.</p>\n"},{"tags":[],"owner":{"account_id":4850659,"reputation":11,"user_id":3913029,"display_name":"user3913029"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623766022,"creation_date":1623766022,"answer_id":67987881,"question_id":60579467,"body_markdown":"You can make use of CompletableFuture.allOf(..), This is not the only solution but it is better.\r\n\r\n    public CompletableFuture&lt;String&gt; getSomeDataFromExternalIfPossible() {\r\n        var input = &quot;SomeKey&quot;;\r\n        CompletableFuture&lt;String&gt; externalDataFetchCFuture = getDataFromExternal(input);\r\n        return CompletableFuture.allOf(externalDataFetchCFuture)\r\n            .exceptionally(\r\n                ex -&gt; {\r\n                  // This exceptionally(...) is required as allOf(...) propagates exception thrown by any of the supplied futures\r\n                  // Log if you are interested in failed case of externalDataFetchCFuture\r\n                  return null;\r\n                })\r\n            .thenCompose(\r\n                unused -&gt; {\r\n                  // Check if externalDataFetchCFuture completed successfully and invoke other Async method if not\r\n                  if (!externalDataFetchCFuture.isCompletedExceptionally()) {\r\n                    // On externalDataFetchCFuture successful execution\r\n                    return externalDataFetchCFuture;\r\n                  } else {\r\n                    // On externalDataFetchCFuture failed execution\r\n                    // Fetching data from DB or from any other integration\r\n                    return getDataFromExternal2(input);\r\n                  }\r\n                });\r\n    }\r\n\r\n    private CompletableFuture&lt;String&gt; getDataFromExternal(String input) {\r\n      return CompletableFuture.completedFuture(&quot;abc&quot;);\r\n    }\r\n\r\n    private CompletableFuture&lt;String&gt; getDataFromExternal2(String input) {\r\n      return CompletableFuture.completedFuture(&quot;xyz&quot;);\r\n    }\r\n\r\n\r\n","title":"CompletableFuture compose for exceptions","body":"<p>You can make use of CompletableFuture.allOf(..), This is not the only solution but it is better.</p>\n<pre><code>public CompletableFuture&lt;String&gt; getSomeDataFromExternalIfPossible() {\n    var input = &quot;SomeKey&quot;;\n    CompletableFuture&lt;String&gt; externalDataFetchCFuture = getDataFromExternal(input);\n    return CompletableFuture.allOf(externalDataFetchCFuture)\n        .exceptionally(\n            ex -&gt; {\n              // This exceptionally(...) is required as allOf(...) propagates exception thrown by any of the supplied futures\n              // Log if you are interested in failed case of externalDataFetchCFuture\n              return null;\n            })\n        .thenCompose(\n            unused -&gt; {\n              // Check if externalDataFetchCFuture completed successfully and invoke other Async method if not\n              if (!externalDataFetchCFuture.isCompletedExceptionally()) {\n                // On externalDataFetchCFuture successful execution\n                return externalDataFetchCFuture;\n              } else {\n                // On externalDataFetchCFuture failed execution\n                // Fetching data from DB or from any other integration\n                return getDataFromExternal2(input);\n              }\n            });\n}\n\nprivate CompletableFuture&lt;String&gt; getDataFromExternal(String input) {\n  return CompletableFuture.completedFuture(&quot;abc&quot;);\n}\n\nprivate CompletableFuture&lt;String&gt; getDataFromExternal2(String input) {\n  return CompletableFuture.completedFuture(&quot;xyz&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1784,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1639839918,"accepted_answer_id":60602429,"answer_count":2,"score":1,"last_activity_date":1642445972,"creation_date":1583596774,"question_id":60579467,"body_markdown":"The `CompletableFuture` API allows us to use `thenCompose` to chain another future:\r\n\r\n```java\r\nCompletableFuture&lt;String&gt; future1 = submit(&quot;foo&quot;);\r\nCompletableFuture&lt;String&gt; future2 = future.thenCompose((result) -&gt; submit(result));\r\n```\r\n\r\nThis only works for successful responses though. Is there a way to do the same but also including exception handling?\r\n\r\nFor example:\r\n\r\n```java\r\nCompletableFuture&lt;String&gt; future1 = submit(&quot;foo&quot;);\r\nCompletableFuture&lt;String&gt; future2 = future.handleCompose((result, error) -&gt; {\r\n  if (error != null)\r\n    return submit(&quot;failure&quot;); // Handle error by doing a different action with the same result (like a fallback)\r\n  else\r\n    return submit(result);\r\n});\r\n```\r\n\r\nI know you can do something like `whenComplete`:\r\n\r\n```java\r\nCompletableFuture&lt;String&gt; future2 = new CompletableFuture&lt;&gt;();\r\nCompletableFuture&lt;String&gt; future1 = submit(&quot;foo&quot;);\r\nfuture.whenComplete((result, error) -&gt; {\r\n  CompletableFuture&lt;String&gt; tmp;\r\n  if (error != null)\r\n    tmp = submit(&quot;failure&quot;);\r\n  else\r\n    tmp = submit(result);\r\n  tmp.whenComplete((result2, error2) -&gt; {\r\n    if (error2 != null) future2.completeExceptionally(error2);\r\n    else future2.complete(result2);\r\n  });\r\n});\r\n```\r\n\r\nThis however loses the ability to cancel properly and seems like a very &quot;hacky&quot; solution compared to the success composition handling. Is there a good way that does not require making my own extension of the CompletableFuture class?\r\n\r\nThe problem is that I need to return a single future from my method and it should be capable to cancel the entire process at any point in time.","title":"CompletableFuture compose for exceptions","body":"<p>The <code>CompletableFuture</code> API allows us to use <code>thenCompose</code> to chain another future:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;String&gt; future1 = submit(\"foo\");\nCompletableFuture&lt;String&gt; future2 = future.thenCompose((result) -&gt; submit(result));\n</code></pre>\n\n<p>This only works for successful responses though. Is there a way to do the same but also including exception handling?</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;String&gt; future1 = submit(\"foo\");\nCompletableFuture&lt;String&gt; future2 = future.handleCompose((result, error) -&gt; {\n  if (error != null)\n    return submit(\"failure\"); // Handle error by doing a different action with the same result (like a fallback)\n  else\n    return submit(result);\n});\n</code></pre>\n\n<p>I know you can do something like <code>whenComplete</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;String&gt; future2 = new CompletableFuture&lt;&gt;();\nCompletableFuture&lt;String&gt; future1 = submit(\"foo\");\nfuture.whenComplete((result, error) -&gt; {\n  CompletableFuture&lt;String&gt; tmp;\n  if (error != null)\n    tmp = submit(\"failure\");\n  else\n    tmp = submit(result);\n  tmp.whenComplete((result2, error2) -&gt; {\n    if (error2 != null) future2.completeExceptionally(error2);\n    else future2.complete(result2);\n  });\n});\n</code></pre>\n\n<p>This however loses the ability to cancel properly and seems like a very \"hacky\" solution compared to the success composition handling. Is there a good way that does not require making my own extension of the CompletableFuture class?</p>\n\n<p>The problem is that I need to return a single future from my method and it should be capable to cancel the entire process at any point in time.</p>\n"},{"tags":["java","oracle","stored-procedures","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1642441902,"post_id":70745264,"comment_id":125066659,"body_markdown":"As there are multiple custom objects, the parameter needs to be set as an array. See the `UserListTypeHandler` in this [demo](https://github.com/harawata/mybatis-issues/tree/master/so-56834806).","body":"As there are multiple custom objects, the parameter needs to be set as an array. See the <code>UserListTypeHandler</code> in this <a href=\"https://github.com/harawata/mybatis-issues/tree/master/so-56834806\" rel=\"nofollow noreferrer\">demo</a>."},{"owner":{"account_id":14628237,"reputation":21,"user_id":10564929,"display_name":"scocuzza"},"score":0,"creation_date":1642445691,"post_id":70745264,"comment_id":125067821,"body_markdown":"When setting as an array i received this error\nCause: java.lang.ClassCastException: oracle.sql.StructDescriptor cannot be cast to oracle.sql.ArrayDescriptor\\n###\n\nupdating the typehandler above so you can see how i am setting as an array","body":"When setting as an array i received this error Cause: java.lang.ClassCastException: oracle.sql.StructDescriptor cannot be cast to oracle.sql.ArrayDescriptor\\n###  updating the typehandler above so you can see how i am setting as an array"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1642446588,"post_id":70745264,"comment_id":125068080,"body_markdown":"To receive multiple `INSERT_MEMBER_DETAILS` objects, the procedure must take a table type parameter, I think. See the `CreateDB.sql` in the demo. The original [answer](https://stackoverflow.com/a/56855497/1261766) might help as well.","body":"To receive multiple <code>INSERT_MEMBER_DETAILS</code> objects, the procedure must take a table type parameter, I think. See the <code>CreateDB.sql</code> in the demo. The original <a href=\"https://stackoverflow.com/a/56855497/1261766\">answer</a> might help as well."},{"owner":{"account_id":14628237,"reputation":21,"user_id":10564929,"display_name":"scocuzza"},"score":0,"creation_date":1642453435,"post_id":70745264,"comment_id":125070109,"body_markdown":"I see, but INSERT_MEMBER_DETAILS is not a table type parameter, it is an OBJECT - and that is what the stored procedure expects as the input..\n\nthere is no way i can satisy that in the typehandler ? or does the change have to be done on the SP to take a table type instead","body":"I see, but INSERT_MEMBER_DETAILS is not a table type parameter, it is an OBJECT - and that is what the stored procedure expects as the input..  there is no way i can satisy that in the typehandler ? or does the change have to be done on the SP to take a table type instead"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1642454810,"post_id":70745264,"comment_id":125070556,"body_markdown":"If the SP is defined to take single `INSERT_MEMBER_DETAILS` and you cannot change the SP definition, you can only pass one object at a time from the Java side. In the demo, `UserTypeHandler` is for single object. See how it&#39;s used in the mapper.","body":"If the SP is defined to take single <code>INSERT_MEMBER_DETAILS</code> and you cannot change the SP definition, you can only pass one object at a time from the Java side. In the demo, <code>UserTypeHandler</code> is for single object. See how it&#39;s used in the mapper."}],"owner":{"account_id":14628237,"reputation":21,"user_id":10564929,"display_name":"scocuzza"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":706,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642445886,"creation_date":1642440336,"question_id":70745264,"body_markdown":"My goal here is to successfully call the stored procedure while passing in the memberDetails which is a custom oracle object as seen in the screenshot, however it is complaining that the the column type is invalid even with the custom type handler i created to send it as an object \r\n\r\nerror i am receiving\r\nthe issue is only with the memberDetails input so i am removing the other inputs and outputs (for simplicity sake)\r\n```\r\nCause: java.sql.SQLException: Invalid column type\\n### The error may exist in mybatis/commission-insertmember-mapper.xml\\n### The error may involve insertmember.insertMemberSP-Inline\\n### The error occurred while setting parameters\\n### SQL: { CALL PKG_OLB.PRC_PREINSTALL_INSMBR_DETAILS(    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?   ) }\\n\r\n```\r\n\r\nmapper xml file\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;\r\n        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\r\n\r\n&lt;mapper namespace=&quot;gi.emp.billing.commission.insertmember&quot;&gt;\r\n\r\n    &lt;select id=&quot;insertMemberSP&quot; parameterType=&quot;InsertMemberEntity&quot; statementType=&quot;CALLABLE&quot;&gt;\r\n\t\t{ CALL PKG_OLB.PRC_PREINSTALL_INSMBR_DETAILS(\r\n\t\t\t//input\r\n            (other inputs...)\r\n\t\t\t**#{memberDetail, javaType=Object, jdbcType=JAVA_OBJECT, jdbcTypeName=INSERT_MEMBER_DETAILS, mode=IN, typeHandler=MemberDetailArrayTypeHandler}\r\n            //outputs\r\n\t\t\t(other outputs...)\r\n\t\t) }\r\n\t&lt;/select&gt;    \r\n\r\n&lt;/mapper&gt;\r\n```\r\n\r\ncustom type handler for memberDetails\r\n\r\n```\r\nimport java.sql.Array;\r\nimport java.sql.CallableStatement;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Struct;\r\nimport java.sql.Types;\r\nimport java.util.List;\r\n\r\nimport org.apache.ibatis.type.JdbcType;\r\nimport org.apache.ibatis.type.TypeHandler;\r\nimport oracle.jdbc.OracleConnection;\r\n\r\npublic class MemberDetailArrayTypeHandler implements TypeHandler {\r\n\r\n\t@Override\r\n\tpublic void setParameter(PreparedStatement preparedStatement, int i, Object o, JdbcType jdbcType)\r\n\t\t\tthrows SQLException {\r\n\t\tList&lt;MemberDetailEntity&gt; objects = (List&lt;MemberDetailEntity&gt;) o;\r\n\t\tConnection hikariCon = preparedStatement.getConnection();\r\n\t\tif (hikariCon.isWrapperFor(OracleConnection.class)) {\r\n\t\t\tOracleConnection connection = hikariCon.unwrap(OracleConnection.class);\r\n\t\t\tStruct[] structs = new Struct[objects.size()];\r\n\t\t\tfor (int index = 0; index &lt; objects.size(); index++) {\r\n\t\t\t\tMemberDetailEntity memberDetailEntity = objects.get(index);\r\n\t\t\t\tObject[] params = new Object[35];\r\n\t\t\t\tparams[0] = memberDetailEntity.getAdrdAddrType();\r\n\t\t\t\tparams[1] = memberDetailEntity.getBenCatNo();\r\n\t\t\t\tparams[2] = memberDetailEntity.getBgrpKey();\r\n\t\t\t\tparams[3] = memberDetailEntity.getBirthDt();\r\n\t\t\t\tparams[4] = memberDetailEntity.getCatalogNumber();\r\n\t\t\t\tparams[5] = memberDetailEntity.getCity();\r\n\t\t\t\tparams[6] = memberDetailEntity.getControlNumber();\r\n\t\t\t\tparams[7] = memberDetailEntity.getCountry();\r\n\t\t\t\tparams[8] = memberDetailEntity.getCtrId();\r\n\t\t\t\tparams[9] = memberDetailEntity.getEffectDt();\r\n\t\t\t\tparams[10] = memberDetailEntity.getEmail();\r\n\t\t\t\tparams[11] = memberDetailEntity.getFirstName();\r\n\t\t\t\tparams[12] = memberDetailEntity.getHours();\r\n\t\t\t\tparams[13] = memberDetailEntity.getJoinCoDt();\r\n\t\t\t\tparams[14] = memberDetailEntity.getJoinSchDt();\r\n\t\t\t\tparams[15] = memberDetailEntity.getLastName();\r\n\t\t\t\tparams[16] = memberDetailEntity.getLgDescript();\r\n\t\t\t\tparams[17] = memberDetailEntity.getLine1();\r\n\t\t\t\tparams[18] = memberDetailEntity.getLine2();\r\n\t\t\t\tparams[19] = memberDetailEntity.getLine3();\r\n\t\t\t\tparams[20] = memberDetailEntity.getMarStatCd();\r\n\t\t\t\tparams[21] = memberDetailEntity.getMbgpKey();\r\n\t\t\t\tparams[22] = memberDetailEntity.getMbstMbrStatCd();\r\n\t\t\t\tparams[23] = memberDetailEntity.getMiddleInitial();\r\n\t\t\t\tparams[24] = memberDetailEntity.getNamePrefix();\r\n\t\t\t\tparams[25] = memberDetailEntity.getNatlIdNo();\r\n\t\t\t\tparams[26] = memberDetailEntity.getPenEarnings();\r\n\t\t\t\tparams[27] = memberDetailEntity.getPhone();\r\n\t\t\t\tparams[28] = memberDetailEntity.getPhoneExt();\r\n\t\t\t\tparams[29] = memberDetailEntity.getPostCd();\r\n\t\t\t\tparams[30] = memberDetailEntity.getSalDescript();\r\n\t\t\t\tparams[31] = memberDetailEntity.getSexCd();\r\n\t\t\t\tparams[32] = memberDetailEntity.getSmokerCd();\r\n\t\t\t\tparams[33] = memberDetailEntity.getState();\r\n\t\t\t\tparams[34] = memberDetailEntity.getXpirDt();\r\n\t\t\t\tstructs[index] = connection.createStruct(&quot;INSERT_MEMBER_DETAILS&quot;, params);\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tpreparedStatement.setObject(i, structs, Types.JAVA_OBJECT);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Object getResult(ResultSet resultSet, String s) throws SQLException {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Object getResult(ResultSet resultSet, int i) throws SQLException {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Object getResult(CallableStatement callableStatement, int i) throws SQLException {\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\nwhen setting as an array\r\n```\r\nstructs[index] = connection.createStruct(&quot;INSERT_MEMBER_DETAILS&quot;, params);\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tArray oracleArray = ((OracleConnection) connection).createOracleArray(&quot;INSERT_MEMBER_DETAILS&quot;, structs);\r\n\t\t\tpreparedStatement.setArray(i, oracleArray);\r\n```\r\nreceive this error \r\n```\r\nCause: java.lang.ClassCastException: oracle.sql.StructDescriptor cannot be cast to oracle.sql.ArrayDescriptor\\n###\r\n```\r\nCustom Oracle Object \r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0iMaL.png\r\n  [2]: https://i.stack.imgur.com/hV75Z.png","title":"Calling Oracle Stored Procedure (using MyBatis) with Custom Object Input Parameter","body":"<p>My goal here is to successfully call the stored procedure while passing in the memberDetails which is a custom oracle object as seen in the screenshot, however it is complaining that the the column type is invalid even with the custom type handler i created to send it as an object</p>\n<p>error i am receiving\nthe issue is only with the memberDetails input so i am removing the other inputs and outputs (for simplicity sake)</p>\n<pre><code>Cause: java.sql.SQLException: Invalid column type\\n### The error may exist in mybatis/commission-insertmember-mapper.xml\\n### The error may involve insertmember.insertMemberSP-Inline\\n### The error occurred while setting parameters\\n### SQL: { CALL PKG_OLB.PRC_PREINSTALL_INSMBR_DETAILS(    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?,    ?   ) }\\n\n</code></pre>\n<p>mapper xml file</p>\n<pre><code>&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;\n        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\n\n&lt;mapper namespace=&quot;gi.emp.billing.commission.insertmember&quot;&gt;\n\n    &lt;select id=&quot;insertMemberSP&quot; parameterType=&quot;InsertMemberEntity&quot; statementType=&quot;CALLABLE&quot;&gt;\n        { CALL PKG_OLB.PRC_PREINSTALL_INSMBR_DETAILS(\n            //input\n            (other inputs...)\n            **#{memberDetail, javaType=Object, jdbcType=JAVA_OBJECT, jdbcTypeName=INSERT_MEMBER_DETAILS, mode=IN, typeHandler=MemberDetailArrayTypeHandler}\n            //outputs\n            (other outputs...)\n        ) }\n    &lt;/select&gt;    \n\n&lt;/mapper&gt;\n</code></pre>\n<p>custom type handler for memberDetails</p>\n<pre><code>import java.sql.Array;\nimport java.sql.CallableStatement;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Struct;\nimport java.sql.Types;\nimport java.util.List;\n\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.TypeHandler;\nimport oracle.jdbc.OracleConnection;\n\npublic class MemberDetailArrayTypeHandler implements TypeHandler {\n\n    @Override\n    public void setParameter(PreparedStatement preparedStatement, int i, Object o, JdbcType jdbcType)\n            throws SQLException {\n        List&lt;MemberDetailEntity&gt; objects = (List&lt;MemberDetailEntity&gt;) o;\n        Connection hikariCon = preparedStatement.getConnection();\n        if (hikariCon.isWrapperFor(OracleConnection.class)) {\n            OracleConnection connection = hikariCon.unwrap(OracleConnection.class);\n            Struct[] structs = new Struct[objects.size()];\n            for (int index = 0; index &lt; objects.size(); index++) {\n                MemberDetailEntity memberDetailEntity = objects.get(index);\n                Object[] params = new Object[35];\n                params[0] = memberDetailEntity.getAdrdAddrType();\n                params[1] = memberDetailEntity.getBenCatNo();\n                params[2] = memberDetailEntity.getBgrpKey();\n                params[3] = memberDetailEntity.getBirthDt();\n                params[4] = memberDetailEntity.getCatalogNumber();\n                params[5] = memberDetailEntity.getCity();\n                params[6] = memberDetailEntity.getControlNumber();\n                params[7] = memberDetailEntity.getCountry();\n                params[8] = memberDetailEntity.getCtrId();\n                params[9] = memberDetailEntity.getEffectDt();\n                params[10] = memberDetailEntity.getEmail();\n                params[11] = memberDetailEntity.getFirstName();\n                params[12] = memberDetailEntity.getHours();\n                params[13] = memberDetailEntity.getJoinCoDt();\n                params[14] = memberDetailEntity.getJoinSchDt();\n                params[15] = memberDetailEntity.getLastName();\n                params[16] = memberDetailEntity.getLgDescript();\n                params[17] = memberDetailEntity.getLine1();\n                params[18] = memberDetailEntity.getLine2();\n                params[19] = memberDetailEntity.getLine3();\n                params[20] = memberDetailEntity.getMarStatCd();\n                params[21] = memberDetailEntity.getMbgpKey();\n                params[22] = memberDetailEntity.getMbstMbrStatCd();\n                params[23] = memberDetailEntity.getMiddleInitial();\n                params[24] = memberDetailEntity.getNamePrefix();\n                params[25] = memberDetailEntity.getNatlIdNo();\n                params[26] = memberDetailEntity.getPenEarnings();\n                params[27] = memberDetailEntity.getPhone();\n                params[28] = memberDetailEntity.getPhoneExt();\n                params[29] = memberDetailEntity.getPostCd();\n                params[30] = memberDetailEntity.getSalDescript();\n                params[31] = memberDetailEntity.getSexCd();\n                params[32] = memberDetailEntity.getSmokerCd();\n                params[33] = memberDetailEntity.getState();\n                params[34] = memberDetailEntity.getXpirDt();\n                structs[index] = connection.createStruct(&quot;INSERT_MEMBER_DETAILS&quot;, params);\n                \n\n            }\n            preparedStatement.setObject(i, structs, Types.JAVA_OBJECT);\n        }\n    }\n\n    @Override\n    public Object getResult(ResultSet resultSet, String s) throws SQLException {\n        return null;\n    }\n\n    @Override\n    public Object getResult(ResultSet resultSet, int i) throws SQLException {\n        return null;\n    }\n\n    @Override\n    public Object getResult(CallableStatement callableStatement, int i) throws SQLException {\n        return null;\n    }\n}\n</code></pre>\n<p>when setting as an array</p>\n<pre><code>structs[index] = connection.createStruct(&quot;INSERT_MEMBER_DETAILS&quot;, params);\n                \n\n            }\n            Array oracleArray = ((OracleConnection) connection).createOracleArray(&quot;INSERT_MEMBER_DETAILS&quot;, structs);\n            preparedStatement.setArray(i, oracleArray);\n</code></pre>\n<p>receive this error</p>\n<pre><code>Cause: java.lang.ClassCastException: oracle.sql.StructDescriptor cannot be cast to oracle.sql.ArrayDescriptor\\n###\n</code></pre>\n<p>Custom Oracle Object\n<a href=\"https://i.stack.imgur.com/0iMaL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0iMaL.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/hV75Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hV75Z.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","java-8","completable-future"],"comments":[{"owner":{"account_id":389881,"reputation":53027,"user_id":749588,"accept_rate":65,"display_name":"Jean Logeart"},"score":0,"creation_date":1424559875,"post_id":28652291,"comment_id":45601996,"body_markdown":"What does &quot;is not correct&quot; mean? What behavior are you looking for?","body":"What does &quot;is not correct&quot; mean? What behavior are you looking for?"},{"owner":{"account_id":1307057,"reputation":5794,"user_id":1255825,"accept_rate":74,"display_name":"JasonG"},"score":0,"creation_date":1424568876,"post_id":28652291,"comment_id":45604003,"body_markdown":"That won&#39;t compile. You can&#39;t return a CompletableFuture&lt;U&gt;  in &lt;U&gt;handleAsync - you have to return U. I&#39;d like to be able to return a CompletableFuture&lt;U&gt; instead of a &lt;U&gt; in the exception case. I&#39;m looking for the equivalent to scala or play promise recoverWith (which is like exceptionally but with an asynchronous result in the Function).","body":"That won&#39;t compile. You can&#39;t return a CompletableFuture&lt;U&gt;  in &lt;U&gt;handleAsync - you have to return U. I&#39;d like to be able to return a CompletableFuture&lt;U&gt; instead of a &lt;U&gt; in the exception case. I&#39;m looking for the equivalent to scala or play promise recoverWith (which is like exceptionally but with an asynchronous result in the Function)."},{"owner":{"account_id":1307057,"reputation":5794,"user_id":1255825,"accept_rate":74,"display_name":"JasonG"},"score":0,"creation_date":1424569122,"post_id":28652291,"comment_id":45604053,"body_markdown":"I tried to clarify a bit in the question itself. Maybe I&#39;m not using handleAsync correctly but it doesn&#39;t mean &quot;and return an async result&quot;.","body":"I tried to clarify a bit in the question itself. Maybe I&#39;m not using handleAsync correctly but it doesn&#39;t mean &quot;and return an async result&quot;."},{"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"score":0,"creation_date":1442577049,"post_id":28652291,"comment_id":53149249,"body_markdown":"exceptionally will be called on the thread that executed they async ask originally. So it should be already asynchronous to your main thread of execution. Do you need to resubmit to a task executor? Or is it possible to just make the call again on the same thread? I.e.  return askPong(&quot;Ping&quot;).join() is still asynchronous inside an exceptionally block.","body":"exceptionally will be called on the thread that executed they async ask originally. So it should be already asynchronous to your main thread of execution. Do you need to resubmit to a task executor? Or is it possible to just make the call again on the same thread? I.e.  return askPong(&quot;Ping&quot;).join() is still asynchronous inside an exceptionally block."},{"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"score":0,"creation_date":1442577561,"post_id":28652291,"comment_id":53149572,"body_markdown":"I see your problem, you don&#39;t want to block the the thread that the error occured on while another askPong is executed on yet another thread. Unless you can specify the executor service used in askPong (you could then reuse the current thread - Executor exec = (Runnable r)  -&gt; r.run()).","body":"I see your problem, you don&#39;t want to block the the thread that the error occured on while another askPong is executed on yet another thread. Unless you can specify the executor service used in askPong (you could then reuse the current thread - Executor exec = (Runnable r)  -&gt; r.run())."}],"answers":[{"tags":[],"owner":{"account_id":4860165,"reputation":27613,"user_id":3920048,"display_name":"Misha"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1424587278,"creation_date":1424586835,"answer_id":28655228,"question_id":28652291,"body_markdown":"Is this what you are looking for?\r\n\r\n\taskPong(&quot;cause error&quot;)\r\n\t\t\t.handle( (pong, ex) -&gt; ex == null \r\n\t\t\t\t\t? CompletableFuture.completedFuture(pong) \r\n\t\t\t\t\t: askPong(&quot;Ping&quot;)\r\n\t\t\t).thenCompose(x -&gt; x);\r\n\r\n\r\nAlso, do not use the `...Async` methods unless you intend for the body of the supplied function to be executed asynchronously.  So when you do something like \r\n\r\n    .handleAsync((x, t) -&gt; {\r\n        if (t != null) {\r\n            return askPong(&quot;Ping&quot;);\r\n        } else {\r\n            return x;\r\n        })\r\n\r\nYou are asking for the `if-then-else` to be run in a separate thread.  Since `askPong` returns a `CompletableFuture`, there&#39;s probably no reason to run it asynchronously.","title":"CompletableFuture recoverWith equivalent? i.e. exceptionally but return CompletableFuture&lt;U&gt;","body":"<p>Is this what you are looking for?</p>\n\n<pre><code>askPong(\"cause error\")\n        .handle( (pong, ex) -&gt; ex == null \n                ? CompletableFuture.completedFuture(pong) \n                : askPong(\"Ping\")\n        ).thenCompose(x -&gt; x);\n</code></pre>\n\n<p>Also, do not use the <code>...Async</code> methods unless you intend for the body of the supplied function to be executed asynchronously.  So when you do something like </p>\n\n<pre><code>.handleAsync((x, t) -&gt; {\n    if (t != null) {\n        return askPong(\"Ping\");\n    } else {\n        return x;\n    })\n</code></pre>\n\n<p>You are asking for the <code>if-then-else</code> to be run in a separate thread.  Since <code>askPong</code> returns a <code>CompletableFuture</code>, there's probably no reason to run it asynchronously.</p>\n"},{"tags":[],"owner":{"account_id":1045108,"reputation":99,"user_id":1050291,"display_name":"Jeff Griffith"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1442241955,"creation_date":1442241129,"answer_id":32567441,"question_id":28652291,"body_markdown":"After a lot of frustration in trying to figure out the proper way of doing Scala&#39;s recoverWith in Java 8, I ended up just writing my own. I still don&#39;t know if this is the best approach, but I created something like:\r\n\r\n    public RecoveryChainAsync&lt;T&gt; recoverWith(Function&lt;Throwable,\r\n                                             CompletableFuture&lt;T&gt;&gt; fn);\r\nWith repeated calls to recoverWith, I queue up the functions inside the recovery chain and implement the recovery flow myself with &quot;handle&quot;. RecoveryChainAsync.getCompletableFuture() then returns a representative CompletableFuture for the entire chain. Hope this helps.\r\n","title":"CompletableFuture recoverWith equivalent? i.e. exceptionally but return CompletableFuture&lt;U&gt;","body":"<p>After a lot of frustration in trying to figure out the proper way of doing Scala's recoverWith in Java 8, I ended up just writing my own. I still don't know if this is the best approach, but I created something like:</p>\n\n<pre><code>public RecoveryChainAsync&lt;T&gt; recoverWith(Function&lt;Throwable,\n                                         CompletableFuture&lt;T&gt;&gt; fn);\n</code></pre>\n\n<p>With repeated calls to recoverWith, I queue up the functions inside the recovery chain and implement the recovery flow myself with \"handle\". RecoveryChainAsync.getCompletableFuture() then returns a representative CompletableFuture for the entire chain. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642445405,"creation_date":1642445405,"answer_id":70746175,"question_id":28652291,"body_markdown":"&gt; Jeopardy question of the day: `thenApply` is to `thenCompose` as `exceptionally` is to what?\r\n\r\nI know this was initially [tag:java-8], but, since [tag:java-12], the answer would be `exceptionallyCompose`:\r\n\r\n&gt; [`exceptionallyCompose[Async](Function&lt;Throwable,? extends CompletionStage&lt;T&gt;&gt; fn [, Executor executor])`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html#exceptionallyCompose(java.util.function.Function))\r\n&gt;\r\n&gt; Returns a new CompletionStage that, when this stage completes exceptionally, is composed using the results of the supplied function applied to this stage&#39;s exception.\r\n\r\nAs the JavaDoc indicates, the default implementation is:\r\n\r\n```\r\nreturn handle((r, ex) -&gt; (ex == null)\r\n              ? this\r\n              : fn.apply(ex))\r\n    .thenCompose(Function.identity());\r\n```\r\nThat is, using `handle()` to call the fallback, and `thenCompose()` to unwrap the resulting nested `CompletableFuture&lt;CompletableFuture&lt;T&gt;&gt;` – i.e., what you would have done in previous versions of Java (like in [Misha’s answer](https://stackoverflow.com/a/28655228/525036)), except you would have to replace `this` with `completedFuture(r)`.","title":"CompletableFuture recoverWith equivalent? i.e. exceptionally but return CompletableFuture&lt;U&gt;","body":"<blockquote>\n<p>Jeopardy question of the day: <code>thenApply</code> is to <code>thenCompose</code> as <code>exceptionally</code> is to what?</p>\n</blockquote>\n<p>I know this was initially <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a>, but, since <a href=\"/questions/tagged/java-12\" class=\"post-tag\" title=\"show questions tagged &#39;java-12&#39;\" rel=\"tag\">java-12</a>, the answer would be <code>exceptionallyCompose</code>:</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html#exceptionallyCompose(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>exceptionallyCompose[Async](Function&lt;Throwable,? extends CompletionStage&lt;T&gt;&gt; fn [, Executor executor])</code></a></p>\n<p>Returns a new CompletionStage that, when this stage completes exceptionally, is composed using the results of the supplied function applied to this stage's exception.</p>\n</blockquote>\n<p>As the JavaDoc indicates, the default implementation is:</p>\n<pre><code>return handle((r, ex) -&gt; (ex == null)\n              ? this\n              : fn.apply(ex))\n    .thenCompose(Function.identity());\n</code></pre>\n<p>That is, using <code>handle()</code> to call the fallback, and <code>thenCompose()</code> to unwrap the resulting nested <code>CompletableFuture&lt;CompletableFuture&lt;T&gt;&gt;</code> – i.e., what you would have done in previous versions of Java (like in <a href=\"https://stackoverflow.com/a/28655228/525036\">Misha’s answer</a>), except you would have to replace <code>this</code> with <code>completedFuture(r)</code>.</p>\n"}],"owner":{"account_id":1307057,"reputation":5794,"user_id":1255825,"accept_rate":74,"display_name":"JasonG"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4153,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":32567441,"answer_count":3,"score":10,"last_activity_date":1642445661,"creation_date":1424558798,"question_id":28652291,"body_markdown":"I don&#39;t see an obvious way to handle an exception with an asynchronous result.\r\n\r\nFor example, if I want to retry an async operation, I would expect something like this:\r\n\r\n    CompletionStage&lt;String&gt; cf = askPong(&quot;cause error&quot;).handleAsync((x, t) -&gt; {\r\n        if (t != null) {\r\n            return askPong(&quot;Ping&quot;);\r\n        } else {\r\n            return x;\r\n        }\r\n    });\r\n\r\nWhere askPong asks an actor:\r\n\r\n    public CompletionStage&lt;String&gt; askPong(String message){\r\n        Future sFuture = ask(actorRef, message, 1000);\r\n        final CompletionStage&lt;String&gt; cs = toJava(sFuture);\r\n        return cs;\r\n    } \r\n\r\nHowever `handleAsync` doesn&#39;t do what you think it does - it runs the callbacks on another thread asynchronously. Returning a `CompletionStage` here is not correct.\r\n\r\nJeopardy question of the day: `thenApply` is to `thenCompose` as `exceptionally` is to what?","title":"CompletableFuture recoverWith equivalent? i.e. exceptionally but return CompletableFuture&lt;U&gt;","body":"<p>I don't see an obvious way to handle an exception with an asynchronous result.</p>\n<p>For example, if I want to retry an async operation, I would expect something like this:</p>\n<pre><code>CompletionStage&lt;String&gt; cf = askPong(&quot;cause error&quot;).handleAsync((x, t) -&gt; {\n    if (t != null) {\n        return askPong(&quot;Ping&quot;);\n    } else {\n        return x;\n    }\n});\n</code></pre>\n<p>Where askPong asks an actor:</p>\n<pre><code>public CompletionStage&lt;String&gt; askPong(String message){\n    Future sFuture = ask(actorRef, message, 1000);\n    final CompletionStage&lt;String&gt; cs = toJava(sFuture);\n    return cs;\n} \n</code></pre>\n<p>However <code>handleAsync</code> doesn't do what you think it does - it runs the callbacks on another thread asynchronously. Returning a <code>CompletionStage</code> here is not correct.</p>\n<p>Jeopardy question of the day: <code>thenApply</code> is to <code>thenCompose</code> as <code>exceptionally</code> is to what?</p>\n"},{"tags":["java","spring","spring-boot","authentication","spring-security"],"comments":[{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":0,"creation_date":1642430343,"post_id":70742480,"comment_id":125062207,"body_markdown":"I am not sure about extending `BasicAuthenticationFilter` and using JWT. Maybe extend `OncePerRequestFilter`. Have you tried debugging to check if you code in filter is executing correctly and setting the authentication object? What is your security configuration?","body":"I am not sure about extending <code>BasicAuthenticationFilter</code> and using JWT. Maybe extend <code>OncePerRequestFilter</code>. Have you tried debugging to check if you code in filter is executing correctly and setting the authentication object? What is your security configuration?"},{"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"score":0,"creation_date":1642431157,"post_id":70742480,"comment_id":125062575,"body_markdown":"@Boris I added the config to the question, the thing is that it works completely fine for requests sent by my react frontend, therefore It must be something to do with the test maybe? Also when I put the 2 logins next to each other in the signUpAndLogin() they both work fine, I added to the question also. Thanks.","body":"@Boris I added the config to the question, the thing is that it works completely fine for requests sent by my react frontend, therefore It must be something to do with the test maybe? Also when I put the 2 logins next to each other in the signUpAndLogin() they both work fine, I added to the question also. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642443171,"creation_date":1642443171,"answer_id":70745773,"question_id":70742480,"body_markdown":"I think that this is the problem. In test you are doing this:\r\n\r\n```\r\nMvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\r\n        .contentType(MediaType.APPLICATION_JSON)\r\n        .content(content).header(&quot;Authorization&quot;, token2))\r\n    .andExpect(status().isOk())\r\n    .andReturn();\r\n```\r\n\r\n\r\nand in filter you are doing this:\r\n\r\n```\r\n        String header = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if (header == null || !header.startsWith(&quot;Bearer&quot;)) {\r\n\r\n            filterChain.doFilter(request, response);\r\n\r\n            return;\r\n        }\r\n```\r\n\r\nThe Authorisation in your request does not contain `Bearer` to start with. And because of that you are entering this condition. So you will not set authorisation in your request using:\r\n\r\n``` \r\nUsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\r\nSecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\r\nfilterChain.doFilter(request, response);\r\n```\r\n\r\nbefore going down the chain.\r\n\r\nTry this:\r\n\r\n\r\n```\r\nMvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\r\n        .contentType(MediaType.APPLICATION_JSON)\r\n        .content(content).header(&quot;Authorization&quot;, &quot;Bearer &quot; + token2))\r\n    .andExpect(status().isOk())\r\n    .andReturn();\r\n```\r\n\r\nAlso, be aware of this in your filter, because of space after `Bearer`\r\n```\r\n.parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\r\n```","title":"Logging in as a user and then logging in as another user not working in SpringBoot API integration tests, works fine on React frontend?","body":"<p>I think that this is the problem. In test you are doing this:</p>\n<pre><code>MvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\n        .contentType(MediaType.APPLICATION_JSON)\n        .content(content).header(&quot;Authorization&quot;, token2))\n    .andExpect(status().isOk())\n    .andReturn();\n</code></pre>\n<p>and in filter you are doing this:</p>\n<pre><code>        String header = request.getHeader(&quot;Authorization&quot;);\n\n        if (header == null || !header.startsWith(&quot;Bearer&quot;)) {\n\n            filterChain.doFilter(request, response);\n\n            return;\n        }\n</code></pre>\n<p>The Authorisation in your request does not contain <code>Bearer</code> to start with. And because of that you are entering this condition. So you will not set authorisation in your request using:</p>\n<pre><code>UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\nSecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\nfilterChain.doFilter(request, response);\n</code></pre>\n<p>before going down the chain.</p>\n<p>Try this:</p>\n<pre><code>MvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\n        .contentType(MediaType.APPLICATION_JSON)\n        .content(content).header(&quot;Authorization&quot;, &quot;Bearer &quot; + token2))\n    .andExpect(status().isOk())\n    .andReturn();\n</code></pre>\n<p>Also, be aware of this in your filter, because of space after <code>Bearer</code></p>\n<pre><code>.parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\n</code></pre>\n"}],"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1642444770,"creation_date":1642427536,"question_id":70742480,"body_markdown":"My SpringBoot application makes use of an authentication and authorization filter to accept a request to the &#39;/api/v1/login&#39; URL, check the credentials of the request, and add the bearer JWT token to the response header if successful.\r\n\r\nWhen I run both my API and seperate CORS React project, I am able to signup, login and access site features as one user before literally just clicking signup and login again (no logout necessary) and it works fine.\r\n\r\nHowever, in my integration tests I am calling one method to sign up multiple users and login as one which is successful, but when I try to send another login call within the joinLeague() test, the server responds with a 401 error:\r\n\r\nERROR MESSAGE: unauthorized.\r\n\r\nAuthorizationFilter:\r\n\r\n    public class AuthorizationFilter extends BasicAuthenticationFilter {\r\n    \r\n    public AuthorizationFilter(AuthenticationManager authenticationManager) { super(authenticationManager);}\r\n    \r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n    \r\n            throws IOException, ServletException {\r\n    \r\n            String header = request.getHeader(&quot;Authorization&quot;);\r\n            \r\n            if(header == null || !header.startsWith(&quot;Bearer&quot;)) {\r\n    \r\n            filterChain.doFilter(request,response);\r\n    \r\n            return;\r\n            }\r\n    \r\n            UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\r\n    \r\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n    \r\n            filterChain.doFilter(request,response);\r\n    \r\n            }\r\n    \r\n    \r\n    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\r\n            String token = request.getHeader(&quot;Authorization&quot;);\r\n            if(token != null) {\r\n    \r\n            String user = Jwts.parser().setSigningKey(&quot;SecretKeyToGenJWTs&quot;.getBytes())\r\n            .parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\r\n            .getBody()\r\n            .getSubject();\r\n    \r\n            if(user != null) {\r\n    \r\n            return new UsernamePasswordAuthenticationToken(user, null, new ArrayList&lt;&gt;());\r\n    \r\n            }\r\n            return null;\r\n            }\r\n            return null;\r\n            }\r\n    }\r\n\r\nAuthenticationFilter:\r\n\r\n      public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n        private String apiVersion = &quot;v1&quot;;\r\n\r\n        private AuthenticationManager authenticationManager;\r\n\r\n        public AuthenticationFilter(AuthenticationManager authenticationManager) {\r\n            this.authenticationManager = authenticationManager;\r\n            setFilterProcessesUrl(&quot;/api/v1/login&quot;);\r\n        }\r\n        @Override\r\n\r\n        public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\r\n            try {\r\n                com.example.gambit2.domain.User creds = new ObjectMapper().readValue(request.getInputStream(), com.example.gambit2.domain.User.class);\r\n                return authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(creds.getUsername(), creds.getPassword(),new ArrayList&lt;&gt;()));\r\n            }\r\n\r\n        catch(IOException e) {\r\n                throw new RuntimeException(&quot;Could not read request&quot; + e);\r\n            }\r\n\r\n        }\r\n        protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain, Authentication authentication)\r\n        {\r\n            String token = Jwts.builder()\r\n                    .setSubject(((User) authentication.getPrincipal()).getUsername())\r\n                    .setExpiration(new Date(System.currentTimeMillis() + 864_000_000))\r\n                    .signWith(SignatureAlgorithm.HS512, &quot;SecretKeyToGenJWTs&quot;.getBytes())\r\n                    .compact();\r\n            response.addHeader(&quot;Authorization&quot;,&quot;Bearer &quot; + token);\r\n        }\r\n    }\r\n\r\nTest:\r\n\r\n  \r\n\r\n    @Transactional\r\n        @Test\r\n        public void joinLeague() throws Exception {\r\n    \r\n            String token = signupAndLogin();\r\n    \r\n            System.out.println(token);\r\n    \r\n            createLeague(token);\r\n    \r\n            //Correctly grabs the right user.\r\n            User user = userRepository.findByUsername(username2);\r\n   \r\n    \r\n            System.out.println();\r\n            System.out.println(user.toString());\r\n            assertThat(user.getId() == 2);\r\n    \r\n            MvcResult mvcResult2 = mvc.perform(post(&quot;/api/v1/login&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .content(asJsonString(user)))\r\n                    .andReturn();\r\n            String token2 = mvcResult2.getResponse().getHeader(&quot;Authorization&quot;);\r\n            System.out.println(&quot;Bearer Token: USER 2 TEST&quot; + token2);\r\n            assertThat(token2);\r\n    \r\n            System.out.println();\r\n            System.out.println(token2);\r\n            System.out.println();\r\n    \r\n            String content = &quot;{\\&quot;username\\&quot;:\\&quot;pp\\&quot;, \\&quot;leagueId\\&quot;:\\&quot;1\\&quot;}&quot;;\r\n    \r\n            MvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .content(content).header(&quot;Authorization&quot;, token2))\r\n                    .andExpect(status().isOk())\r\n                    .andReturn();\r\n    \r\n            String jsonResult = mvcResult.getResponse().getContentAsString();\r\n    \r\n            System.out.println(jsonResult);\r\n    }\r\n\r\n    signupAndLogin() {\r\n     User user = new User(1L, username1, &quot;ExamplePass72-&quot;, &quot;London&quot;);\r\n\r\n        mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(asJsonString(user)))\r\n                .andExpect(status().isOk());\r\n\r\n        Optional&lt;User&gt; savedUser = userService.getUser(1L);\r\n        System.out.println(savedUser.get().getUserStats().get(0).toString());\r\n        \r\n\r\n        //2nd User\r\n        User user2 = new User(2L, username2, &quot;ExamplePass72-&quot;, &quot;London&quot;);\r\n\r\n\r\n\r\n        mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(asJsonString(user2)))\r\n                .andExpect(status().isOk());\r\n\r\n        Optional&lt;User&gt; savedUser2 = userService.getUser(2L);\r\n        System.out.println(savedUser2.toString());\r\n\r\n        //3rd User\r\n        User user3 = new User(3L, username3, &quot;ExamplePass72-&quot;, &quot;London&quot;);\r\n\r\n\r\n\r\n        mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(asJsonString(user3)))\r\n                .andExpect(status().isOk());\r\n\r\n        Optional&lt;User&gt; savedUser3 = userService.getUser(3L);\r\n        System.out.println(savedUser3.toString());\r\n\r\n        //LOGIN\r\n\r\n        MvcResult mvcResult = mvc.perform(post(&quot;/api/v1/login&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(asJsonString(user)))\r\n                .andExpect(status().isOk())\r\n                .andReturn();\r\n        String token = mvcResult.getResponse().getHeader(&quot;Authorization&quot;);\r\n\r\n        //PRINTS THE CORRECT BEARER TOKEN, EVERYTHING WORKS FINE.\r\n        System.out.println(&quot;Bearer Token: &quot; + token);\r\n\r\n        return token;\r\n    \r\n    }\r\n\r\nAlso if I put the 2nd login directly after the 1st login in the above method, it logs in fine and returns a different bearer token.\r\n\r\nAny help would be greatly appreciated, thanks.\r\n\r\nEdit: WebSecConfig:\r\n\r\n    \r\n    @EnableWebSecurity\r\n    public class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n    \r\n            private UserDetailsService userDetailsService;\r\n    \r\n            @Bean\r\n            public BCryptPasswordEncoder passwordEncoder() {\r\n                    return new BCryptPasswordEncoder();\r\n            }\r\n    \r\n            private static final String[] AUTH_WHITELIST = {\r\n                    &quot;/v2/api-docs&quot;,\r\n                    &quot;/swagger-resources&quot;,\r\n                    &quot;/swagger-resources/**&quot;,\r\n                    &quot;/configuration/ui&quot;,\r\n                    &quot;/configuration/security&quot;,\r\n                    &quot;/swagger-ui.html&quot;,\r\n                    &quot;/webjars/**&quot;,\r\n                    &quot;/api/v1/**&quot;\r\n            };\r\n    \r\n            public WebSecurityConfiguration(UserDetailsService userDetailsService) {\r\n                    this.userDetailsService = userDetailsService;\r\n    \r\n            }\r\n    \r\n            protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n    \r\n                    httpSecurity.cors().and().csrf().disable().authorizeRequests()\r\n    \r\n                            .antMatchers(AUTH_WHITELIST).permitAll()\r\n                            .antMatchers(HttpMethod.GET, &quot;/users/signup&quot;).permitAll()\r\n    \r\n                            .antMatchers(HttpMethod.POST, &quot;/users/signup&quot;).permitAll()\r\n                            .antMatchers(HttpMethod.GET, &quot;/login&quot;).permitAll()\r\n    \r\n                            .antMatchers(HttpMethod.POST, &quot;api/v1/login&quot;).permitAll()\r\n                            .anyRequest().authenticated()\r\n    \r\n                            .and().addFilter(new AuthenticationFilter(authenticationManager()))\r\n    \r\n                            .addFilter(new AuthorizationFilter(authenticationManager()))\r\n    \r\n                            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n                    httpSecurity.csrf().disable();\r\n            }\r\n    \r\n            public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n                    authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n            }\r\n    \r\n            @Bean\r\n            public CorsConfigurationSource corsConfigurationSource() {\r\n    \r\n                    final CorsConfiguration configuration = new CorsConfiguration();\r\n                    List&lt;String&gt; allowedOrigins = new ArrayList&lt;&gt;();\r\n                    allowedOrigins.add(&quot;http://localhost:8080&quot;);\r\n                    allowedOrigins.add(&quot;http://localhost:3000&quot;);\r\n                    configuration.setAllowedOrigins(allowedOrigins);\r\n                    configuration.setAllowedMethods(List.of(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n                    // setAllowCredentials(true) is important, otherwise:\r\n                    // The value of the &#39;Access-Control-Allow-Origin&#39; header in the response must not be the wildcard &#39;*&#39; when the request&#39;s credentials mode is &#39;include&#39;.\r\n                    configuration.setAllowCredentials(true);\r\n                    // setAllowedHeaders is important! Without it, OPTIONS preflight request\r\n                    // will fail with 403 Invalid CORS request\r\n                    configuration.setAllowedHeaders(List.of(&quot;Cache-Control&quot;, &quot;Content-Type&quot;, &quot;Authorization&quot;));\r\n                    // allow header &quot;Location&quot; to be read by clients to enable them to read the location of an uploaded group logo\r\n                    configuration.addExposedHeader(&quot;Authorization&quot;);\r\n                    final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n                    source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n                    return source;\r\n            }\r\n    \r\n    \r\n    \r\n            @Override\r\n            public void configure(WebSecurity web) throws Exception {\r\n                    web.ignoring().regexMatchers(&quot;^/users/signup$&quot;);\r\n            }\r\n    }\r\n\r\nWhen I test by putting this in the signUpAndLogin()\r\n\r\n    MvcResult mvcResult = mvc.perform(post(&quot;/api/v1/login&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .content(asJsonString(user)))\r\n                    .andExpect(status().isOk())\r\n                    .andReturn();\r\n            String token = mvcResult.getResponse().getHeader(&quot;Authorization&quot;);\r\n            System.out.println(&quot;Bearer Token: &quot; + token);\r\n    \r\n            MvcResult mvcResult2 = mvc.perform(post(&quot;/api/v1/login&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .content(asJsonString(user2)))\r\n                    .andExpect(status().isOk())\r\n                    .andReturn();\r\n            String token2 = mvcResult2.getResponse().getHeader(&quot;Authorization&quot;);\r\n            System.out.println(&quot;Bearer Token: &quot; + token2);\r\n            \r\n            \r\n            assertThat(!token2.equals(token));\r\n\r\nAs previously, but now with immediately logging in as user 2, it works fine and token 2 != token 1.\r\n\r\nThanks\r\n\r\nError:\r\n\r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Multiple representations of the same entity [com.example.gambit2.domain.User#1] are being merged. Managed: [com.example.gambit2.domain.User@1ec8afc4]; Detached: [com.example.gambit2.domain.User@4addfb95]; nested exception is java.lang.IllegalStateException: Multiple representations of the same entity [com.example.gambit2.domain.User#1] are being merged. Managed: [com.example.gambit2.domain.User@1ec8afc4]; Detached: [com.example.gambit2.domain.User@4addfb95]\r\n\r\n","title":"Logging in as a user and then logging in as another user not working in SpringBoot API integration tests, works fine on React frontend?","body":"<p>My SpringBoot application makes use of an authentication and authorization filter to accept a request to the '/api/v1/login' URL, check the credentials of the request, and add the bearer JWT token to the response header if successful.</p>\n<p>When I run both my API and seperate CORS React project, I am able to signup, login and access site features as one user before literally just clicking signup and login again (no logout necessary) and it works fine.</p>\n<p>However, in my integration tests I am calling one method to sign up multiple users and login as one which is successful, but when I try to send another login call within the joinLeague() test, the server responds with a 401 error:</p>\n<p>ERROR MESSAGE: unauthorized.</p>\n<p>AuthorizationFilter:</p>\n<pre><code>public class AuthorizationFilter extends BasicAuthenticationFilter {\n\npublic AuthorizationFilter(AuthenticationManager authenticationManager) { super(authenticationManager);}\n\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n\n        throws IOException, ServletException {\n\n        String header = request.getHeader(&quot;Authorization&quot;);\n        \n        if(header == null || !header.startsWith(&quot;Bearer&quot;)) {\n\n        filterChain.doFilter(request,response);\n\n        return;\n        }\n\n        UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\n\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\n        filterChain.doFilter(request,response);\n\n        }\n\n\nprivate UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\n        String token = request.getHeader(&quot;Authorization&quot;);\n        if(token != null) {\n\n        String user = Jwts.parser().setSigningKey(&quot;SecretKeyToGenJWTs&quot;.getBytes())\n        .parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\n        .getBody()\n        .getSubject();\n\n        if(user != null) {\n\n        return new UsernamePasswordAuthenticationToken(user, null, new ArrayList&lt;&gt;());\n\n        }\n        return null;\n        }\n        return null;\n        }\n}\n</code></pre>\n<p>AuthenticationFilter:</p>\n<pre><code>  public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private String apiVersion = &quot;v1&quot;;\n\n    private AuthenticationManager authenticationManager;\n\n    public AuthenticationFilter(AuthenticationManager authenticationManager) {\n        this.authenticationManager = authenticationManager;\n        setFilterProcessesUrl(&quot;/api/v1/login&quot;);\n    }\n    @Override\n\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n        try {\n            com.example.gambit2.domain.User creds = new ObjectMapper().readValue(request.getInputStream(), com.example.gambit2.domain.User.class);\n            return authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(creds.getUsername(), creds.getPassword(),new ArrayList&lt;&gt;()));\n        }\n\n    catch(IOException e) {\n            throw new RuntimeException(&quot;Could not read request&quot; + e);\n        }\n\n    }\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain, Authentication authentication)\n    {\n        String token = Jwts.builder()\n                .setSubject(((User) authentication.getPrincipal()).getUsername())\n                .setExpiration(new Date(System.currentTimeMillis() + 864_000_000))\n                .signWith(SignatureAlgorithm.HS512, &quot;SecretKeyToGenJWTs&quot;.getBytes())\n                .compact();\n        response.addHeader(&quot;Authorization&quot;,&quot;Bearer &quot; + token);\n    }\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>@Transactional\n    @Test\n    public void joinLeague() throws Exception {\n\n        String token = signupAndLogin();\n\n        System.out.println(token);\n\n        createLeague(token);\n\n        //Correctly grabs the right user.\n        User user = userRepository.findByUsername(username2);\n\n\n        System.out.println();\n        System.out.println(user.toString());\n        assertThat(user.getId() == 2);\n\n        MvcResult mvcResult2 = mvc.perform(post(&quot;/api/v1/login&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(asJsonString(user)))\n                .andReturn();\n        String token2 = mvcResult2.getResponse().getHeader(&quot;Authorization&quot;);\n        System.out.println(&quot;Bearer Token: USER 2 TEST&quot; + token2);\n        assertThat(token2);\n\n        System.out.println();\n        System.out.println(token2);\n        System.out.println();\n\n        String content = &quot;{\\&quot;username\\&quot;:\\&quot;pp\\&quot;, \\&quot;leagueId\\&quot;:\\&quot;1\\&quot;}&quot;;\n\n        MvcResult mvcResult = mvc.perform(post(&quot;http://localhost:8080/api/v1/leagues/join-league&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(content).header(&quot;Authorization&quot;, token2))\n                .andExpect(status().isOk())\n                .andReturn();\n\n        String jsonResult = mvcResult.getResponse().getContentAsString();\n\n        System.out.println(jsonResult);\n}\n\nsignupAndLogin() {\n User user = new User(1L, username1, &quot;ExamplePass72-&quot;, &quot;London&quot;);\n\n    mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .content(asJsonString(user)))\n            .andExpect(status().isOk());\n\n    Optional&lt;User&gt; savedUser = userService.getUser(1L);\n    System.out.println(savedUser.get().getUserStats().get(0).toString());\n    \n\n    //2nd User\n    User user2 = new User(2L, username2, &quot;ExamplePass72-&quot;, &quot;London&quot;);\n\n\n\n    mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .content(asJsonString(user2)))\n            .andExpect(status().isOk());\n\n    Optional&lt;User&gt; savedUser2 = userService.getUser(2L);\n    System.out.println(savedUser2.toString());\n\n    //3rd User\n    User user3 = new User(3L, username3, &quot;ExamplePass72-&quot;, &quot;London&quot;);\n\n\n\n    mvc.perform(post(&quot;http://localhost:8080/api/v1/users/signup&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .content(asJsonString(user3)))\n            .andExpect(status().isOk());\n\n    Optional&lt;User&gt; savedUser3 = userService.getUser(3L);\n    System.out.println(savedUser3.toString());\n\n    //LOGIN\n\n    MvcResult mvcResult = mvc.perform(post(&quot;/api/v1/login&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .content(asJsonString(user)))\n            .andExpect(status().isOk())\n            .andReturn();\n    String token = mvcResult.getResponse().getHeader(&quot;Authorization&quot;);\n\n    //PRINTS THE CORRECT BEARER TOKEN, EVERYTHING WORKS FINE.\n    System.out.println(&quot;Bearer Token: &quot; + token);\n\n    return token;\n\n}\n</code></pre>\n<p>Also if I put the 2nd login directly after the 1st login in the above method, it logs in fine and returns a different bearer token.</p>\n<p>Any help would be greatly appreciated, thanks.</p>\n<p>Edit: WebSecConfig:</p>\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n\n        private UserDetailsService userDetailsService;\n\n        @Bean\n        public BCryptPasswordEncoder passwordEncoder() {\n                return new BCryptPasswordEncoder();\n        }\n\n        private static final String[] AUTH_WHITELIST = {\n                &quot;/v2/api-docs&quot;,\n                &quot;/swagger-resources&quot;,\n                &quot;/swagger-resources/**&quot;,\n                &quot;/configuration/ui&quot;,\n                &quot;/configuration/security&quot;,\n                &quot;/swagger-ui.html&quot;,\n                &quot;/webjars/**&quot;,\n                &quot;/api/v1/**&quot;\n        };\n\n        public WebSecurityConfiguration(UserDetailsService userDetailsService) {\n                this.userDetailsService = userDetailsService;\n\n        }\n\n        protected void configure(HttpSecurity httpSecurity) throws Exception {\n\n                httpSecurity.cors().and().csrf().disable().authorizeRequests()\n\n                        .antMatchers(AUTH_WHITELIST).permitAll()\n                        .antMatchers(HttpMethod.GET, &quot;/users/signup&quot;).permitAll()\n\n                        .antMatchers(HttpMethod.POST, &quot;/users/signup&quot;).permitAll()\n                        .antMatchers(HttpMethod.GET, &quot;/login&quot;).permitAll()\n\n                        .antMatchers(HttpMethod.POST, &quot;api/v1/login&quot;).permitAll()\n                        .anyRequest().authenticated()\n\n                        .and().addFilter(new AuthenticationFilter(authenticationManager()))\n\n                        .addFilter(new AuthorizationFilter(authenticationManager()))\n\n                        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n                httpSecurity.csrf().disable();\n        }\n\n        public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n                authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n        }\n\n        @Bean\n        public CorsConfigurationSource corsConfigurationSource() {\n\n                final CorsConfiguration configuration = new CorsConfiguration();\n                List&lt;String&gt; allowedOrigins = new ArrayList&lt;&gt;();\n                allowedOrigins.add(&quot;http://localhost:8080&quot;);\n                allowedOrigins.add(&quot;http://localhost:3000&quot;);\n                configuration.setAllowedOrigins(allowedOrigins);\n                configuration.setAllowedMethods(List.of(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n                // setAllowCredentials(true) is important, otherwise:\n                // The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'.\n                configuration.setAllowCredentials(true);\n                // setAllowedHeaders is important! Without it, OPTIONS preflight request\n                // will fail with 403 Invalid CORS request\n                configuration.setAllowedHeaders(List.of(&quot;Cache-Control&quot;, &quot;Content-Type&quot;, &quot;Authorization&quot;));\n                // allow header &quot;Location&quot; to be read by clients to enable them to read the location of an uploaded group logo\n                configuration.addExposedHeader(&quot;Authorization&quot;);\n                final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n                source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n                return source;\n        }\n\n\n\n        @Override\n        public void configure(WebSecurity web) throws Exception {\n                web.ignoring().regexMatchers(&quot;^/users/signup$&quot;);\n        }\n}\n</code></pre>\n<p>When I test by putting this in the signUpAndLogin()</p>\n<pre><code>MvcResult mvcResult = mvc.perform(post(&quot;/api/v1/login&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(asJsonString(user)))\n                .andExpect(status().isOk())\n                .andReturn();\n        String token = mvcResult.getResponse().getHeader(&quot;Authorization&quot;);\n        System.out.println(&quot;Bearer Token: &quot; + token);\n\n        MvcResult mvcResult2 = mvc.perform(post(&quot;/api/v1/login&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(asJsonString(user2)))\n                .andExpect(status().isOk())\n                .andReturn();\n        String token2 = mvcResult2.getResponse().getHeader(&quot;Authorization&quot;);\n        System.out.println(&quot;Bearer Token: &quot; + token2);\n        \n        \n        assertThat(!token2.equals(token));\n</code></pre>\n<p>As previously, but now with immediately logging in as user 2, it works fine and token 2 != token 1.</p>\n<p>Thanks</p>\n<p>Error:</p>\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Multiple representations of the same entity [com.example.gambit2.domain.User#1] are being merged. Managed: [com.example.gambit2.domain.User@1ec8afc4]; Detached: [com.example.gambit2.domain.User@4addfb95]; nested exception is java.lang.IllegalStateException: Multiple representations of the same entity [com.example.gambit2.domain.User#1] are being merged. Managed: [com.example.gambit2.domain.User@1ec8afc4]; Detached: [com.example.gambit2.domain.User@4addfb95]\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","configuration","blacklist"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1642410000,"post_id":70738452,"comment_id":125054156,"body_markdown":"If you already have spring security write an expression that checks the IP-address. Basically an inverse check of what `hasIpAddress` does. You want a `notHasIpAddress`.","body":"If you already have spring security write an expression that checks the IP-address. Basically an inverse check of what <code>hasIpAddress</code> does. You want a <code>notHasIpAddress</code>."}],"answers":[{"tags":[],"owner":{"account_id":10297068,"reputation":1003,"user_id":7596874,"accept_rate":20,"display_name":"Rathan Naik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642411609,"creation_date":1642411280,"answer_id":70738999,"question_id":70738452,"body_markdown":"Have you tried using HandlerInterceptor interface? \r\n\r\nCombine with WebMvcConfigurerAdapter. \r\nThis should do the job.\r\n\r\nSomething like this, not exact working code here\r\n\r\n    //Call after request processing, but before the view is rendered (after controller method call)\r\n    @Override\r\n    public void postHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView) throws Exception {\r\n        String ip = IPAddressUtil.getClientIpAddress(httpServletRequest);\r\n        List&lt;BlackList&gt; blackLists = blackListDao.findByIp(ip);\r\n        if (blackLists == null || blackLists.size() == 0){\r\n            urlHandle(httpServletRequest, 5000, 10);\r\n        } else {\r\n             //Forced control jump\r\n             modelAndView.setViewName(&quot;/errorpage/error.html&quot;);\r\n        }\r\n    }\r\n\r\nBlackListDao class can be something like this\r\n\r\n    @Mapper\r\n    public interface BlackListDao {\r\n        //Find records by IP\r\n        List&lt;BlackList&gt; findByIp(String IP);\r\n        //Add record\r\n        int addBlackList(@Param(&quot;blackList&quot;) BlackList blackList);\r\n    }\r\n\r\nConfigure the Interceptor Webmvcconfigureradapter for spring MVC.\r\n\r\n\r\n\r\n    @Configuration\r\n    public class MyWebAppConfigurer extends WebMvcConfigurerAdapter {\r\n        @Bean // inject our interceptor as bean\r\n        public HandlerInterceptor getMyInterceptor(){\r\n        return new URLInterceptor();\r\n    }\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        //Multiple interceptors form an interceptor chain\r\n        //Addpathpatterns is used to add interception rules. Here we assume that all links after interception / URL\r\n        //Excludepathpatterns user exclusion\r\n    registry.addInterceptor(getMyInterceptor()).addPathPatterns(&quot;/url/**&quot;);\r\n                super.addInterceptors(registry);\r\n    }","title":"blacklisting a set of ipAdresses in a microservice created using java and SpringBoot framework","body":"<p>Have you tried using HandlerInterceptor interface?</p>\n<p>Combine with WebMvcConfigurerAdapter.\nThis should do the job.</p>\n<p>Something like this, not exact working code here</p>\n<pre><code>//Call after request processing, but before the view is rendered (after controller method call)\n@Override\npublic void postHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView) throws Exception {\n    String ip = IPAddressUtil.getClientIpAddress(httpServletRequest);\n    List&lt;BlackList&gt; blackLists = blackListDao.findByIp(ip);\n    if (blackLists == null || blackLists.size() == 0){\n        urlHandle(httpServletRequest, 5000, 10);\n    } else {\n         //Forced control jump\n         modelAndView.setViewName(&quot;/errorpage/error.html&quot;);\n    }\n}\n</code></pre>\n<p>BlackListDao class can be something like this</p>\n<pre><code>@Mapper\npublic interface BlackListDao {\n    //Find records by IP\n    List&lt;BlackList&gt; findByIp(String IP);\n    //Add record\n    int addBlackList(@Param(&quot;blackList&quot;) BlackList blackList);\n}\n</code></pre>\n<p>Configure the Interceptor Webmvcconfigureradapter for spring MVC.</p>\n<pre><code>@Configuration\npublic class MyWebAppConfigurer extends WebMvcConfigurerAdapter {\n    @Bean // inject our interceptor as bean\n    public HandlerInterceptor getMyInterceptor(){\n    return new URLInterceptor();\n}\n@Override\npublic void addInterceptors(InterceptorRegistry registry) {\n    //Multiple interceptors form an interceptor chain\n    //Addpathpatterns is used to add interception rules. Here we assume that all links after interception / URL\n    //Excludepathpatterns user exclusion\nregistry.addInterceptor(getMyInterceptor()).addPathPatterns(&quot;/url/**&quot;);\n            super.addInterceptors(registry);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642444693,"creation_date":1642435766,"answer_id":70744299,"question_id":70738452,"body_markdown":"The best way is to check it in the [`HttpFirewall`][1] which can check if a `HttpServletRequest` is potentially dangerous or not before allowing it to go through `FilterChainProxy`.\r\n\r\nBasically you need to override the default `StrictHttpFirewall` and add the logic to check if the source IP of the request is in the blacklist , something likes:\r\n\r\n``` java\r\npublic class MyFirewall extends StrictHttpFirewall {\r\n\r\n\tprivate Set&lt;String&gt; backlistIPs;\r\n\r\n\tpublic MyFirewall(Set&lt;String&gt; backlistIPs){\r\n\t\t this.backlistIPs = backlistIPs;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic FirewalledRequest getFirewalledRequest(HttpServletRequest request) throws RequestRejectedException {\r\n\t\t\r\n\t    String sourceIp = getClientIpAddress(request);\r\n\r\n\t    if(backlistIPs.contains(sourceIp)){\r\n\t      throw new RequestRejectedException(&quot;IP is blacklisted&quot;);\r\n\t    }\r\n\r\n\t\treturn super.getFirewalledRequest(request);\r\n\t}\r\n}\r\n```\r\n\r\n&lt;sub&gt;*Note : Refer [this][2] for how to implement getClientIpAddress()* &lt;/sub&gt; \r\n\r\nThen configure to use it :\r\n\r\n``` java\r\n@EnableWebSecurity\r\npublic class Config extends WebSecurityConfigurerAdapter {\r\n\t\r\n\t@Override\r\n\tpublic void configure(WebSecurity web) throws Exception {\r\n\t\tweb.httpFirewall(new MyFirewall(Set.of(&quot;123.123.123.123&quot; ,&quot;123.123.123.124&quot;));\r\n\t}\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/exploits/firewall.html#page-title\r\n  [2]: https://stackoverflow.com/questions/29910074/how-to-get-client-ip-address-in-java-httpservletrequest","title":"blacklisting a set of ipAdresses in a microservice created using java and SpringBoot framework","body":"<p>The best way is to check it in the <a href=\"https://docs.spring.io/spring-security/reference/servlet/exploits/firewall.html#page-title\" rel=\"nofollow noreferrer\"><code>HttpFirewall</code></a> which can check if a <code>HttpServletRequest</code> is potentially dangerous or not before allowing it to go through <code>FilterChainProxy</code>.</p>\n<p>Basically you need to override the default <code>StrictHttpFirewall</code> and add the logic to check if the source IP of the request is in the blacklist , something likes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyFirewall extends StrictHttpFirewall {\n\n    private Set&lt;String&gt; backlistIPs;\n\n    public MyFirewall(Set&lt;String&gt; backlistIPs){\n         this.backlistIPs = backlistIPs;\n    }\n\n    @Override\n    public FirewalledRequest getFirewalledRequest(HttpServletRequest request) throws RequestRejectedException {\n        \n        String sourceIp = getClientIpAddress(request);\n\n        if(backlistIPs.contains(sourceIp)){\n          throw new RequestRejectedException(&quot;IP is blacklisted&quot;);\n        }\n\n        return super.getFirewalledRequest(request);\n    }\n}\n</code></pre>\n<p><sub><em>Note : Refer <a href=\"https://stackoverflow.com/questions/29910074/how-to-get-client-ip-address-in-java-httpservletrequest\">this</a> for how to implement getClientIpAddress()</em> </sub></p>\n<p>Then configure to use it :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\npublic class Config extends WebSecurityConfigurerAdapter {\n    \n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.httpFirewall(new MyFirewall(Set.of(&quot;123.123.123.123&quot; ,&quot;123.123.123.124&quot;));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13034077,"reputation":19,"user_id":9419597,"display_name":"learnerNT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":858,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1642444693,"creation_date":1642408357,"question_id":70738452,"body_markdown":"I have a micro-service designed to interrogate devices of different types and Operating Systems, but for a set of reasons , I want to blacklist a handful of IPs . Is there a way I can achieve that?","title":"blacklisting a set of ipAdresses in a microservice created using java and SpringBoot framework","body":"<p>I have a micro-service designed to interrogate devices of different types and Operating Systems, but for a set of reasons , I want to blacklist a handful of IPs . Is there a way I can achieve that?</p>\n"},{"tags":["java","constructor","boolean"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1420728349,"post_id":27842581,"comment_id":44089235,"body_markdown":"You don&#39;t show the code from Main.","body":"You don&#39;t show the code from Main."},{"owner":{"account_id":739313,"reputation":11341,"user_id":705086,"accept_rate":74,"display_name":"Dima Tisnek"},"score":0,"creation_date":1420728913,"post_id":27842581,"comment_id":44089627,"body_markdown":"http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":80219,"reputation":34027,"user_id":226975,"accept_rate":80,"display_name":"Wyzard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420728349,"creation_date":1420728349,"answer_id":27842774,"question_id":27842581,"body_markdown":"A `boolean` variable is not an object, and you can&#39;t access it &quot;as&quot; an object.  If you want a reference to a `boolean` variable, you need to use a reference to the object that contains it.\r\n\r\nYou could define an interface:\r\n\r\n    public interface Testable {\r\n        boolean isTest();\r\n        void setTest(boolean test);\r\n    }\r\n\r\nThen you can make your `Main` class implement `Testable` in terms of its internal `test` flag, and make `BooleanFlipCounter` take a reference to a `Testable` object that it should manipulate.\r\n\r\n(Note that this requires you to create an *instance* of your `Main` class, or at least of something that implements the `Testable` interface.  If the `Main.test` flag is currently a static variable, consider making it non-static.  You can have your static `main` method just create a `new Main()` and call a method on it to do the real work.)","title":"How do I access a boolean from another class in the constructor of an object?","body":"<p>A <code>boolean</code> variable is not an object, and you can't access it \"as\" an object.  If you want a reference to a <code>boolean</code> variable, you need to use a reference to the object that contains it.</p>\n\n<p>You could define an interface:</p>\n\n<pre><code>public interface Testable {\n    boolean isTest();\n    void setTest(boolean test);\n}\n</code></pre>\n\n<p>Then you can make your <code>Main</code> class implement <code>Testable</code> in terms of its internal <code>test</code> flag, and make <code>BooleanFlipCounter</code> take a reference to a <code>Testable</code> object that it should manipulate.</p>\n\n<p>(Note that this requires you to create an <em>instance</em> of your <code>Main</code> class, or at least of something that implements the <code>Testable</code> interface.  If the <code>Main.test</code> flag is currently a static variable, consider making it non-static.  You can have your static <code>main</code> method just create a <code>new Main()</code> and call a method on it to do the real work.)</p>\n"}],"owner":{"account_id":3442937,"reputation":471,"user_id":2884427,"accept_rate":45,"display_name":"Schwaitz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2219,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1642443696,"creation_date":1420727705,"question_id":27842581,"body_markdown":"So I have a main class, and in this class I have a boolean called test. I want to be able to flip it either on or off after a certain amount of time, so I have a class called BooleanFlipCounter. Below\r\n\r\n    public class BooleanFlipCounter implements Runnable {\r\n    \tint seconds;\r\n    \tboolean booleanToFlip;\r\n    \tboolean setOnOrOff;\r\n    \r\n    \t// Seconds is seconds before flip.\r\n    \t// booleanToFlip is where you define where you use it which boolean to use.\r\n    \t// setOnOrOff is true or false, whether it flips it to on or off after a\r\n    \t// certain time.\r\n    \r\n    \tpublic BooleanFlipCounter(int secondss, boolean booleanToFlips,\t\r\n                                  boolean setOnOrOffs) {\r\n    \t\tseconds = secondss;\r\n    \t\tbooleanToFlip = booleanToFlips;\r\n    \t\tsetOnOrOff = setOnOrOffs;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\twhile (seconds &lt;= 0) {\r\n    \r\n    \t\t\tSystem.out.println(&quot;1: &quot; + booleanToFlip + &quot; : &quot; + setOnOrOff);\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(1000);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tseconds--;\r\n    \t\t\tSystem.out.println(&quot;Minused&quot;);\r\n    \r\n    \t\t}\r\n    \r\n    \t\tif (setOnOrOff == true) {\r\n    \t\t\tMain.test = true;\r\n    \t\t\tSystem.out.println(&quot;2: &quot; + booleanToFlip + &quot; : &quot; + setOnOrOff);\r\n    \t\t} else if (setOnOrOff == false) {\r\n    \t\t\tMain.test = false;\r\n    \t\t\tSystem.out.println(&quot;3: &quot; + booleanToFlip + &quot; : &quot; + setOnOrOff);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nI want to be able to access &quot;test&quot; when I create a new BooleanFlipCounter. How do I access it as the boolean object, and not as an actual boolean? If that makes any sence.","title":"How do I access a boolean from another class in the constructor of an object?","body":"<p>So I have a main class, and in this class I have a boolean called test. I want to be able to flip it either on or off after a certain amount of time, so I have a class called BooleanFlipCounter. Below</p>\n\n<pre><code>public class BooleanFlipCounter implements Runnable {\n    int seconds;\n    boolean booleanToFlip;\n    boolean setOnOrOff;\n\n    // Seconds is seconds before flip.\n    // booleanToFlip is where you define where you use it which boolean to use.\n    // setOnOrOff is true or false, whether it flips it to on or off after a\n    // certain time.\n\n    public BooleanFlipCounter(int secondss, boolean booleanToFlips, \n                              boolean setOnOrOffs) {\n        seconds = secondss;\n        booleanToFlip = booleanToFlips;\n        setOnOrOff = setOnOrOffs;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        while (seconds &lt;= 0) {\n\n            System.out.println(\"1: \" + booleanToFlip + \" : \" + setOnOrOff);\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            seconds--;\n            System.out.println(\"Minused\");\n\n        }\n\n        if (setOnOrOff == true) {\n            Main.test = true;\n            System.out.println(\"2: \" + booleanToFlip + \" : \" + setOnOrOff);\n        } else if (setOnOrOff == false) {\n            Main.test = false;\n            System.out.println(\"3: \" + booleanToFlip + \" : \" + setOnOrOff);\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>I want to be able to access \"test\" when I create a new BooleanFlipCounter. How do I access it as the boolean object, and not as an actual boolean? If that makes any sence.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":1,"creation_date":1642442731,"post_id":70745659,"comment_id":125066904,"body_markdown":"What happens if you put the `&lt;plugins&gt;` section as a child of `&lt;build&gt;` instead?  See [this post](https://stackoverflow.com/questions/10483180/what-is-pluginmanagement-in-mavens-pom-xml) for more details.  It&#39;s unclear if this is a parent pom.xml.","body":"What happens if you put the <code>&lt;plugins&gt;</code> section as a child of <code>&lt;build&gt;</code> instead?  See <a href=\"https://stackoverflow.com/questions/10483180/what-is-pluginmanagement-in-mavens-pom-xml\">this post</a> for more details.  It&#39;s unclear if this is a parent pom.xml."},{"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"score":0,"creation_date":1642443200,"post_id":70745659,"comment_id":125067037,"body_markdown":"it&#39;s the same..., the compiler plugin goal is bound by default so it&#39;s also fine to keep the configuration in &lt;pluginManagement&gt;","body":"it&#39;s the same..., the compiler plugin goal is bound by default so it&#39;s also fine to keep the configuration in &lt;pluginManagement&gt;"},{"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"score":0,"creation_date":1642443377,"post_id":70745659,"comment_id":125067093,"body_markdown":"If I lower it to 7 it does complain though about some lamda code I have...","body":"If I lower it to 7 it does complain though about some lamda code I have..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1642443425,"post_id":70745659,"comment_id":125067105,"body_markdown":"What you have posted is the debug output...The question what is the real problem here? Second you should define only version of maven-compiler-plugin in pluginManagement. The target/source should be defined as properties (https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html) and the encoding should be done only via a property and not specifically in a plugin (see first FAQ https://maven.apache.org/general.html)","body":"What you have posted is the debug output...The question what is the real problem here? Second you should define only version of maven-compiler-plugin in pluginManagement. The target/source should be defined as properties (<a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-compiler-plugin/examples/&hellip;</a>) and the encoding should be done only via a property and not specifically in a plugin (see first FAQ <a href=\"https://maven.apache.org/general.html\" rel=\"nofollow noreferrer\">maven.apache.org/general.html</a>)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1642443471,"post_id":70745659,"comment_id":125067126,"body_markdown":"Furthermore you don&#39;t use JDK 11 for building in Maven...either JAVA_HOME is not set correct or something else is wrong.","body":"Furthermore you don&#39;t use JDK 11 for building in Maven...either JAVA_HOME is not set correct or something else is wrong."},{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1642444397,"post_id":70745659,"comment_id":125067427,"body_markdown":"besides you actual problem, you&#39;re depending on log4j-2.17.0 which is [vulnerable as of 18/Dec/2021](https://www.cisa.gov/uscert/apache-log4j-vulnerability-guidance), [see also](https://logging.apache.org/log4j/2.x/security.html)","body":"besides you actual problem, you&#39;re depending on log4j-2.17.0 which is <a href=\"https://www.cisa.gov/uscert/apache-log4j-vulnerability-guidance\" rel=\"nofollow noreferrer\">vulnerable as of 18/Dec/2021</a>, <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">see also</a>"},{"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"score":0,"creation_date":1642445084,"post_id":70745659,"comment_id":125067649,"body_markdown":"This is just a test app :), thanks though","body":"This is just a test app :), thanks though"}],"answers":[{"tags":[],"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642443332,"creation_date":1642443332,"answer_id":70745805,"question_id":70745659,"body_markdown":"There is no specific Java 11 *syntax* in the provided code. There is a use of an API not present in JDK8, so if you try compiling this with JDK8 it will fail. But you are probably compiling with JAVA_HOME set to JDK11+.\r\n\r\nThe syntax difference would be something like:\r\n\r\n    final var stock = stockRepo.findById(id);","title":"Java level issue with Maven compilation","body":"<p>There is no specific Java 11 <em>syntax</em> in the provided code. There is a use of an API not present in JDK8, so if you try compiling this with JDK8 it will fail. But you are probably compiling with JAVA_HOME set to JDK11+.</p>\n<p>The syntax difference would be something like:</p>\n<pre><code>final var stock = stockRepo.findById(id);\n</code></pre>\n"}],"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70745805,"answer_count":1,"score":0,"last_activity_date":1642443604,"creation_date":1642442416,"question_id":70745659,"body_markdown":"I&#39;m facing a weird issue. In Maven I am setting the Java level to 1.8. In my code I have some Java 11 syntax, namely:\r\n\r\n```java\r\nfinal Optional&lt;Stock&gt; stock = stockRepo.findById(id);\r\nif (stock.isEmpty()) {\r\n    throw new StockNotFoundException(&quot;Stock not found, id: &quot; + id);\r\n}\r\n```\r\n\r\nThe code gets compiled just OK, I was expecting it to fail.\r\n\r\nIn the pom I have:\r\n```xml\r\n&lt;pluginManagement&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;source&gt;1.8&lt;/source&gt;\r\n                &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n...\r\n```\r\n\r\nMaven prints the following logs with -X option\r\n\r\n```none\r\n[DEBUG] Command line options:\r\n[DEBUG] -d /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/user/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/user/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/user/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/user/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/user/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/user/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/user/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/user/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/user/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/user/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/user/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/user/.m2/repository/jakarta/transaction/jakarta.transaction-api/1.3.3/jakarta.transaction-api-1.3.3.jar:/Users/user/.m2/repository/jakarta/persistence/jakarta.persistence-api/2.2.3/jakarta.persistence-api-2.2.3.jar:/Users/user/.m2/repository/org/hibernate/hibernate-core/5.6.3.Final/hibernate-core-5.6.3.Final.jar:/Users/user/.m2/repository/org/jboss/logging/jboss-logging/3.4.2.Final/jboss-logging-3.4.2.Final.jar:/Users/user/.m2/repository/net/bytebuddy/byte-buddy/1.11.22/byte-buddy-1.11.22.jar:/Users/user/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/user/.m2/repository/org/jboss/jandex/2.2.3.Final/jandex-2.2.3.Final.jar:/Users/user/.m2/repository/com/fasterxml/classmate/1.5.1/classmate-1.5.1.jar:/Users/user/.m2/repository/org/hibernate/common/hibernate-commons-annotations/5.1.2.Final/hibernate-commons-annotations-5.1.2.Final.jar:/Users/user/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/Users/user/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/Users/user/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/Users/user/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/user/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/user/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/user/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/user/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/user/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/user/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/user/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/user/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/user/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/user/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/user/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/user/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/user/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/user/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/user/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/user/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 1.8 -source 1.8 -encoding UTF-8\r\n```\r\n\r\nAny clue?","title":"Java level issue with Maven compilation","body":"<p>I'm facing a weird issue. In Maven I am setting the Java level to 1.8. In my code I have some Java 11 syntax, namely:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Optional&lt;Stock&gt; stock = stockRepo.findById(id);\nif (stock.isEmpty()) {\n    throw new StockNotFoundException(&quot;Stock not found, id: &quot; + id);\n}\n</code></pre>\n<p>The code gets compiled just OK, I was expecting it to fail.</p>\n<p>In the pom I have:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;pluginManagement&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n...\n</code></pre>\n<p>Maven prints the following logs with -X option</p>\n<pre class=\"lang-none prettyprint-override\"><code>[DEBUG] Command line options:\n[DEBUG] -d /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes -classpath /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/classes:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.6.2/spring-boot-starter-web-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter/2.6.2/spring-boot-starter-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot/2.6.2/spring-boot-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.6.2/spring-boot-autoconfigure-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.6.2/spring-boot-starter-logging-2.6.2.jar:/Users/user/.m2/repository/ch/qos/logback/logback-classic/1.2.9/logback-classic-1.2.9.jar:/Users/user/.m2/repository/ch/qos/logback/logback-core/1.2.9/logback-core-1.2.9.jar:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.17.0/log4j-to-slf4j-2.17.0.jar:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.0/log4j-api-2.17.0.jar:/Users/user/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/user/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/user/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.6.2/spring-boot-starter-json-2.6.2.jar:/Users/user/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.13.1/jackson-datatype-jdk8-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.1/jackson-datatype-jsr310-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.13.1/jackson-module-parameter-names-2.13.1.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.6.2/spring-boot-starter-tomcat-2.6.2.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.56/tomcat-embed-core-9.0.56.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.56/tomcat-embed-websocket-9.0.56.jar:/Users/user/.m2/repository/org/springframework/spring-web/5.3.14/spring-web-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-beans/5.3.14/spring-beans-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.3.14/spring-webmvc-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-context/5.3.14/spring-context-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-expression/5.3.14/spring-expression-5.3.14.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-security/2.6.2/spring-boot-starter-security-2.6.2.jar:/Users/user/.m2/repository/org/springframework/spring-aop/5.3.14/spring-aop-5.3.14.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-config/5.6.1/spring-security-config-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-core/5.6.1/spring-security-core-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-crypto/5.6.1/spring-security-crypto-5.6.1.jar:/Users/user/.m2/repository/org/springframework/security/spring-security-web/5.6.1/spring-security-web-5.6.1.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/2.6.2/spring-boot-starter-data-jpa-2.6.2.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-aop/2.6.2/spring-boot-starter-aop-2.6.2.jar:/Users/user/.m2/repository/org/aspectj/aspectjweaver/1.9.7/aspectjweaver-1.9.7.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/2.6.2/spring-boot-starter-jdbc-2.6.2.jar:/Users/user/.m2/repository/com/zaxxer/HikariCP/4.0.3/HikariCP-4.0.3.jar:/Users/user/.m2/repository/org/springframework/spring-jdbc/5.3.14/spring-jdbc-5.3.14.jar:/Users/user/.m2/repository/jakarta/transaction/jakarta.transaction-api/1.3.3/jakarta.transaction-api-1.3.3.jar:/Users/user/.m2/repository/jakarta/persistence/jakarta.persistence-api/2.2.3/jakarta.persistence-api-2.2.3.jar:/Users/user/.m2/repository/org/hibernate/hibernate-core/5.6.3.Final/hibernate-core-5.6.3.Final.jar:/Users/user/.m2/repository/org/jboss/logging/jboss-logging/3.4.2.Final/jboss-logging-3.4.2.Final.jar:/Users/user/.m2/repository/net/bytebuddy/byte-buddy/1.11.22/byte-buddy-1.11.22.jar:/Users/user/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/user/.m2/repository/org/jboss/jandex/2.2.3.Final/jandex-2.2.3.Final.jar:/Users/user/.m2/repository/com/fasterxml/classmate/1.5.1/classmate-1.5.1.jar:/Users/user/.m2/repository/org/hibernate/common/hibernate-commons-annotations/5.1.2.Final/hibernate-commons-annotations-5.1.2.Final.jar:/Users/user/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/Users/user/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/Users/user/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/Users/user/.m2/repository/org/springframework/data/spring-data-jpa/2.6.0/spring-data-jpa-2.6.0.jar:/Users/user/.m2/repository/org/springframework/data/spring-data-commons/2.6.0/spring-data-commons-2.6.0.jar:/Users/user/.m2/repository/org/springframework/spring-orm/5.3.14/spring-orm-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-tx/5.3.14/spring-tx-5.3.14.jar:/Users/user/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/user/.m2/repository/org/springframework/spring-aspects/5.3.14/spring-aspects-5.3.14.jar:/Users/user/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.6.2/spring-boot-starter-validation-2.6.2.jar:/Users/user/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.56/tomcat-embed-el-9.0.56.jar:/Users/user/.m2/repository/org/hibernate/validator/hibernate-validator/6.2.0.Final/hibernate-validator-6.2.0.Final.jar:/Users/user/.m2/repository/jakarta/validation/jakarta.validation-api/2.0.2/jakarta.validation-api-2.0.2.jar:/Users/user/.m2/repository/org/liquibase/liquibase-core/4.5.0/liquibase-core-4.5.0.jar:/Users/user/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/user/.m2/repository/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar:/Users/user/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.13.1/jackson-module-jaxb-annotations-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.1/jackson-annotations-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.1/jackson-core-2.13.1.jar:/Users/user/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar:/Users/user/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/user/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/user/.m2/repository/org/springframework/spring-core/5.3.14/spring-core-5.3.14.jar:/Users/user/.m2/repository/org/springframework/spring-jcl/5.3.14/spring-jcl-5.3.14.jar:/Users/user/.m2/repository/org/projectlombok/lombok/1.18.22/lombok-1.18.22.jar:/Users/user/.m2/repository/org/mapstruct/mapstruct-processor/1.3.1.Final/mapstruct-processor-1.3.1.Final.jar:/Users/user/.m2/repository/org/mapstruct/mapstruct/1.3.1.Final/mapstruct-1.3.1.Final.jar: -sourcepath /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/src/main/java:/Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations: -s /Users/user/Desktop/java_dev/projects/stockapp-spring-boot/stockapp/target/generated-sources/annotations -g -nowarn -target 1.8 -source 1.8 -encoding UTF-8\n</code></pre>\n<p>Any clue?</p>\n"},{"tags":["java","eclipse","ant"],"comments":[{"owner":{"account_id":24252,"reputation":1932,"user_id":61572,"display_name":"Ron"},"score":4,"creation_date":1298498052,"post_id":2738574,"comment_id":5713446,"body_markdown":"your string is too long, as you may realize.  as a hack you can split it into multiple strings in your source code and concatenate them.  this is what the eclipse java compiler is doing on your behalf.","body":"your string is too long, as you may realize.  as a hack you can split it into multiple strings in your source code and concatenate them.  this is what the eclipse java compiler is doing on your behalf."}],"answers":[{"tags":[],"owner":{"account_id":28119,"reputation":15396,"user_id":74772,"accept_rate":82,"display_name":"teabot"},"down_vote_count":3,"up_vote_count":50,"is_accepted":true,"score":47,"last_activity_date":1478154083,"creation_date":1272554986,"answer_id":2738598,"question_id":2738574,"body_markdown":"Someone is trying to send you a message :-) In the time you&#39;ve spend fiddling with compiler versions you could have loaded the data from a text file - which is probably where it belongs.\r\n\r\nCheck out:\r\n\r\n* [java.util.Properties][1]\r\n* [Apache Commons FileUtils.readFileToString()][2]\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Properties.html\r\n  [2]: https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#readFileToString(java.io.File)","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>Someone is trying to send you a message :-) In the time you've spend fiddling with compiler versions you could have loaded the data from a text file - which is probably where it belongs.</p>\n\n<p>Check out:</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/util/Properties.html\" rel=\"noreferrer\">java.util.Properties</a></li>\n<li><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#readFileToString(java.io.File)\" rel=\"noreferrer\">Apache Commons FileUtils.readFileToString()</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1272555210,"creation_date":1272555210,"answer_id":2738630,"question_id":2738574,"body_markdown":"Did you try [this][1]? Never tried it myself, but here is the relevant section:\r\n\r\nUsing the ant javac adapter\r\nThe Eclipse compiler can be used inside an Ant script using the javac adapter. In order to use the Eclipse compiler, you simply need to define the build.compiler property in your script. Here is a small example.\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;project name=&quot;compile&quot; default=&quot;main&quot; basedir=&quot;../.&quot;&gt;\r\n\r\n\t&lt;property name=&quot;build.compiler&quot; value=&quot;org.eclipse.jdt.core.JDTCompilerAdapter&quot;/&gt;\r\n\r\n\t&lt;property name=&quot;root&quot; value=&quot;${basedir}/src&quot;/&gt;\r\n\r\n\t&lt;property name=&quot;destdir&quot; value=&quot;d:/temp/bin&quot; /&gt;\r\n\r\n\t&lt;target name=&quot;main&quot;&gt;\r\n\t\t&lt;javac srcdir=&quot;${root}&quot; destdir=&quot;${destdir}&quot; debug=&quot;on&quot; nowarn=&quot;on&quot; extdirs=&quot;d:/extdirs&quot; source=&quot;1.4&quot;&gt;\r\n\t\t    &lt;classpath&gt;\r\n\t\t      &lt;pathelement location=&quot;${basedir}/../org.eclipse.jdt.core/bin&quot;/&gt;\r\n\t\t    &lt;/classpath&gt;\r\n\t\t&lt;/javac&gt;\t\t\r\n\t&lt;/target&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nI would really consider making your classes standards compatible. I believe the official limit is 65535, and the fact that Eclipse is more lenient is something that could change on you at the most inconvenient of times, and either way constantly having to get the project compiled with Eclipse can really start to limit you in too many ways.\r\n\r\n  [1]: http://www.jarvana.com/jarvana/view/org/eclipse/jdt/doc/isv/3.2.1-r321_v20060907/isv-3.2.1-r321_v20060907.jar!/guide/jdt_api_compile.htm","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>Did you try <a href=\"http://www.jarvana.com/jarvana/view/org/eclipse/jdt/doc/isv/3.2.1-r321_v20060907/isv-3.2.1-r321_v20060907.jar!/guide/jdt_api_compile.htm\" rel=\"nofollow noreferrer\">this</a>? Never tried it myself, but here is the relevant section:</p>\n\n<p>Using the ant javac adapter\nThe Eclipse compiler can be used inside an Ant script using the javac adapter. In order to use the Eclipse compiler, you simply need to define the build.compiler property in your script. Here is a small example.</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n &lt;project name=\"compile\" default=\"main\" basedir=\"../.\"&gt;\n\n&lt;property name=\"build.compiler\" value=\"org.eclipse.jdt.core.JDTCompilerAdapter\"/&gt;\n\n&lt;property name=\"root\" value=\"${basedir}/src\"/&gt;\n\n&lt;property name=\"destdir\" value=\"d:/temp/bin\" /&gt;\n\n&lt;target name=\"main\"&gt;\n    &lt;javac srcdir=\"${root}\" destdir=\"${destdir}\" debug=\"on\" nowarn=\"on\" extdirs=\"d:/extdirs\" source=\"1.4\"&gt;\n        &lt;classpath&gt;\n          &lt;pathelement location=\"${basedir}/../org.eclipse.jdt.core/bin\"/&gt;\n        &lt;/classpath&gt;\n    &lt;/javac&gt;        \n&lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>I would really consider making your classes standards compatible. I believe the official limit is 65535, and the fact that Eclipse is more lenient is something that could change on you at the most inconvenient of times, and either way constantly having to get the project compiled with Eclipse can really start to limit you in too many ways.</p>\n"},{"tags":[],"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1272628652,"creation_date":1272628652,"answer_id":2744297,"question_id":2738574,"body_markdown":"The length of a string constant in a class file is limited to 2^16 bytes in UTF-8 encoding, this should not be dependent on the compiler used. Perhaps you are using a different character set in your ant file than in eclipse, so that some characters need more bytes than before. Please check the `encoding` attribute of your `javac` task.","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>The length of a string constant in a class file is limited to 2^16 bytes in UTF-8 encoding, this should not be dependent on the compiler used. Perhaps you are using a different character set in your ant file than in eclipse, so that some characters need more bytes than before. Please check the <code>encoding</code> attribute of your <code>javac</code> task.</p>\n"},{"tags":[],"owner":{"account_id":1296354,"reputation":1669,"user_id":1247302,"accept_rate":94,"display_name":"mrswadge"},"down_vote_count":1,"up_vote_count":51,"is_accepted":false,"score":50,"last_activity_date":1379068293,"creation_date":1379068293,"answer_id":18784142,"question_id":2738574,"body_markdown":"I found I could use the apache commons lang [StringUtils.join( Object\\[\\] )][1] method to solve this.\r\n\r\n    public static final String CONSTANT = org.apache.commons.lang.StringUtils.join( new String[] {\r\n      &quot;This string is long&quot;, \r\n      &quot;really long...&quot;, \r\n      &quot;really, really LONG!!!&quot; \r\n    } );\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#join%28java.lang.Object%5B%5D%29","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>I found I could use the apache commons lang <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#join%28java.lang.Object%5B%5D%29\">StringUtils.join( Object[] )</a> method to solve this.</p>\n\n<pre><code>public static final String CONSTANT = org.apache.commons.lang.StringUtils.join( new String[] {\n  \"This string is long\", \n  \"really long...\", \n  \"really, really LONG!!!\" \n} );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4058725,"reputation":1358,"user_id":3335813,"accept_rate":0,"display_name":"Monis Majeed"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1437371709,"creation_date":1437371709,"answer_id":31509628,"question_id":2738574,"body_markdown":"\t\r\n\r\n      String theString2 = IOUtils.toString(new FileInputStream(new     \r\n      File(rootDir + &quot;/properties/filename.text&quot;)), &quot;UTF-8&quot;);","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<pre><code>  String theString2 = IOUtils.toString(new FileInputStream(new     \n  File(rootDir + \"/properties/filename.text\")), \"UTF-8\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1490563287,"creation_date":1489863630,"answer_id":42878612,"question_id":2738574,"body_markdown":"Another trick, if I&#39;m determined to put a long string in the source, is to avoid the compiler detecting it as a constant expression.\r\n    \r\n    String dummyVar = &quot;&quot;;\r\n    String longString = dummyVar +\r\n        &quot;This string is long\\n&quot; + \r\n        &quot;really long...\\n&quot; + \r\n        &quot;really, really LONG!!!&quot;;\r\n\r\nThis worked for a while, but if you keep going too far the next problem is a stack overflow in the compiler.  [This][1] describes the same problem and, if you&#39;re still determined, how to increase your stack - the problem seems to be the sheer size of the method now.  Again this wasn&#39;t a problem in Eclipse.\r\n\r\n\r\n  [1]: https://github.com/google/guava/issues/2234 &quot;this&quot;","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>Another trick, if I'm determined to put a long string in the source, is to avoid the compiler detecting it as a constant expression.</p>\n\n<pre><code>String dummyVar = \"\";\nString longString = dummyVar +\n    \"This string is long\\n\" + \n    \"really long...\\n\" + \n    \"really, really LONG!!!\";\n</code></pre>\n\n<p>This worked for a while, but if you keep going too far the next problem is a stack overflow in the compiler.  <a href=\"https://github.com/google/guava/issues/2234\" rel=\"nofollow noreferrer\" title=\"this\">This</a> describes the same problem and, if you're still determined, how to increase your stack - the problem seems to be the sheer size of the method now.  Again this wasn't a problem in Eclipse.</p>\n"},{"tags":[],"owner":{"account_id":200738,"reputation":369,"user_id":3137890,"display_name":"xevser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503316260,"creation_date":1503316260,"answer_id":45796412,"question_id":2738574,"body_markdown":"Add your string to values/strings.xml than call getResources.getString(R.string.yourstring)","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>Add your string to values/strings.xml than call getResources.getString(R.string.yourstring)</p>\n"},{"tags":[],"owner":{"account_id":6104920,"reputation":19,"user_id":4762878,"display_name":"Johjen K Mathew"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1515138850,"creation_date":1515138850,"answer_id":48109377,"question_id":2738574,"body_markdown":"You can try this,\r\n\r\n    public static final String CONSTANT = new StringBuilder(&quot;Your really long string&quot;).toString();\r\n\r\n","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>You can try this,</p>\n\n<pre><code>public static final String CONSTANT = new StringBuilder(\"Your really long string\").toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4834459,"reputation":2108,"user_id":3901630,"display_name":"Amol Suryawanshi"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1533562164,"creation_date":1533562164,"answer_id":51708807,"question_id":2738574,"body_markdown":"Nothing of above worked for me. I have created one text file with name test.txt and read this text file using below code\r\n\r\n    String content = new String(Files.readAllBytes(Paths.get(&quot;test.txt&quot;)));","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>Nothing of above worked for me. I have created one text file with name test.txt and read this text file using below code</p>\n\n<pre><code>String content = new String(Files.readAllBytes(Paths.get(\"test.txt\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1585573195,"creation_date":1585573195,"answer_id":60931084,"question_id":2738574,"body_markdown":"A workaround is to chunk your string using `new String()` (yikes) or `StringBuilder`, e.g.\r\n\r\n    String CONSTANT = new String(&quot;first chunk&quot;) \r\n                    + new String(&quot;second chunk&quot;) + ... \r\n                    + new String(&quot;...&quot;);\r\n\r\nOr\r\n\r\n    String CONSTANT = new StringBuilder(&quot;first chunk&quot;)\r\n                    .append(&quot;second chunk&quot;)\r\n                    .append(&quot;...&quot;)\r\n                    .toString();\r\n\r\nThese can be viable options if you&#39;re producing this string e.g. from a code generator. The workaround [documented in this answer][1] where string literals are concatenated no longer works with Java 11\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/42878612/521799","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>A workaround is to chunk your string using <code>new String()</code> (yikes) or <code>StringBuilder</code>, e.g.</p>\n\n<pre><code>String CONSTANT = new String(\"first chunk\") \n                + new String(\"second chunk\") + ... \n                + new String(\"...\");\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>String CONSTANT = new StringBuilder(\"first chunk\")\n                .append(\"second chunk\")\n                .append(\"...\")\n                .toString();\n</code></pre>\n\n<p>These can be viable options if you're producing this string e.g. from a code generator. The workaround <a href=\"https://stackoverflow.com/a/42878612/521799\">documented in this answer</a> where string literals are concatenated no longer works with Java 11</p>\n"},{"tags":[],"owner":{"account_id":10882247,"reputation":139,"user_id":8000756,"display_name":"Dan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1597418195,"creation_date":1597418195,"answer_id":63415515,"question_id":2738574,"body_markdown":"I was able to resolve this issue in a similar way like Lukas Eder.\r\n\r\n    String testXML = &quot;REALLY LONG STRING...............................&quot;;\r\n           textXML += &quot;SECOND PART OF REALLY LONG STRING..........&quot;;\r\n           textXML += &quot;THIRD PART OF REALLY LONG STRING............&quot;;\r\n\r\nJust split it up and add it together;","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>I was able to resolve this issue in a similar way like Lukas Eder.</p>\n<pre><code>String testXML = &quot;REALLY LONG STRING...............................&quot;;\n       textXML += &quot;SECOND PART OF REALLY LONG STRING..........&quot;;\n       textXML += &quot;THIRD PART OF REALLY LONG STRING............&quot;;\n</code></pre>\n<p>Just split it up and add it together;</p>\n"},{"tags":[],"owner":{"account_id":4660831,"reputation":99,"user_id":3775160,"display_name":"SumataPatil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642443589,"creation_date":1642443589,"answer_id":70745855,"question_id":2738574,"body_markdown":"permanent solution would be for this is getting long string from file specially when you are writing test case in **spring projects**.\r\nthe below one worked for me \r\n\r\n    File resource = new ClassPathResource(\r\n          &quot;data/employees.dat&quot;).getFile();\r\n        String employees = new String(\r\n          Files.readAllBytes(resource.toPath()));\r\n\r\n   ","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>permanent solution would be for this is getting long string from file specially when you are writing test case in <strong>spring projects</strong>.\nthe below one worked for me</p>\n<pre><code>File resource = new ClassPathResource(\n      &quot;data/employees.dat&quot;).getFile();\n    String employees = new String(\n      Files.readAllBytes(resource.toPath()));\n</code></pre>\n"}],"owner":{"account_id":41839,"reputation":1635,"user_id":121713,"accept_rate":75,"display_name":"Allan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137918,"favorite_count":0,"down_vote_count":0,"up_vote_count":65,"accepted_answer_id":2738598,"answer_count":12,"score":65,"last_activity_date":1642443589,"creation_date":1272554770,"question_id":2738574,"body_markdown":"I have a few really long strings in one class for initializing user information. When I compile in Eclipse, I don&#39;t get any errors or warnings, and the resulting .jar runs fine.\r\n\r\nRecently, I decided to create an ant build file to use. Whenever I compile the same class with ant, I get the &quot;constant string too long&quot; compile error. I&#39;ve tried a number of ways to set the java compiler executable in ant to make sure that I&#39;m using the exact same version as in Eclipse.\r\n\r\nI&#39;d rather figure out how to get the same successful compile I get in Eclipse in Ant than try to rework the code to dynamically concatenate the strings.","title":"Java &quot;constant string too long&quot; compile error. Only happens using Ant, not when using Eclipse","body":"<p>I have a few really long strings in one class for initializing user information. When I compile in Eclipse, I don't get any errors or warnings, and the resulting .jar runs fine.</p>\n\n<p>Recently, I decided to create an ant build file to use. Whenever I compile the same class with ant, I get the \"constant string too long\" compile error. I've tried a number of ways to set the java compiler executable in ant to make sure that I'm using the exact same version as in Eclipse.</p>\n\n<p>I'd rather figure out how to get the same successful compile I get in Eclipse in Ant than try to rework the code to dynamically concatenate the strings.</p>\n"},{"tags":["java","ignite"],"answers":[{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642443388,"creation_date":1642443388,"answer_id":70745816,"question_id":70743441,"body_markdown":"Can you show some more of your code? This should work. I tried this and it worked for example:\r\n\r\n            var cacheConfiguration = new CacheConfiguration&lt;Long,PersonImpl&gt;()\r\n                    .setName(&quot;PERSON&quot;)\r\n                    .setIndexedTypes(Long.class, PersonImpl.class);\r\n            var cache = ignite.&lt;Long,PersonImpl&gt;getOrCreateCache(cacheConfiguration);\r\n\r\n            var attr = new HashMap&lt;Integer,String&gt;();\r\n            attr.put(1,&quot;London&quot;);\r\n            attr.put(2,&quot;United Kingdom&quot;);\r\n            cache.put(1L, new PersonImpl(&quot;John&quot;, &quot;Smith&quot;, attr));\r\n\r\n            try (var cursor = cache.query(new SqlFieldsQuery(&quot;select attributes from PersonImpl where _key = ?&quot;).setArgs(1L))) {\r\n                for (var e : cursor) {\r\n                    System.out.println(e);\r\n                }\r\n            }\r\n","title":"Querying collection object using SqlFieldQuery in Apache Ignite","body":"<p>Can you show some more of your code? This should work. I tried this and it worked for example:</p>\n<pre><code>        var cacheConfiguration = new CacheConfiguration&lt;Long,PersonImpl&gt;()\n                .setName(&quot;PERSON&quot;)\n                .setIndexedTypes(Long.class, PersonImpl.class);\n        var cache = ignite.&lt;Long,PersonImpl&gt;getOrCreateCache(cacheConfiguration);\n\n        var attr = new HashMap&lt;Integer,String&gt;();\n        attr.put(1,&quot;London&quot;);\n        attr.put(2,&quot;United Kingdom&quot;);\n        cache.put(1L, new PersonImpl(&quot;John&quot;, &quot;Smith&quot;, attr));\n\n        try (var cursor = cache.query(new SqlFieldsQuery(&quot;select attributes from PersonImpl where _key = ?&quot;).setArgs(1L))) {\n            for (var e : cursor) {\n                System.out.println(e);\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":23369831,"reputation":1,"user_id":17440871,"display_name":"Krishna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642443388,"creation_date":1642431798,"question_id":70743441,"body_markdown":"Sample Class\r\n\r\n```\r\npublic class PersonImpl{\r\n   private String firstName;\r\n   private String lastName\r\n   private HashMap&lt;Integer,String&gt; attributes;\r\n}\r\n```\r\n\r\n\r\nWhile using sqlFields query, it works with firstName and lastName, but all attributes cannot be fetched with sqlFieldsQuery\r\n\r\nFor example, select firstName from PersonImpl gives the result, but select attributes from PersonImpl does not fetch results and gives error Failed to deserialize Object\r\n\r\nIs it not possible to fetch collections with ApacheIgnite.","title":"Querying collection object using SqlFieldQuery in Apache Ignite","body":"<p>Sample Class</p>\n<pre><code>public class PersonImpl{\n   private String firstName;\n   private String lastName\n   private HashMap&lt;Integer,String&gt; attributes;\n}\n</code></pre>\n<p>While using sqlFields query, it works with firstName and lastName, but all attributes cannot be fetched with sqlFieldsQuery</p>\n<p>For example, select firstName from PersonImpl gives the result, but select attributes from PersonImpl does not fetch results and gives error Failed to deserialize Object</p>\n<p>Is it not possible to fetch collections with ApacheIgnite.</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":14492583,"reputation":701,"user_id":10468291,"display_name":"Patrick Hooijer"},"score":0,"creation_date":1662288750,"post_id":70745179,"comment_id":129967431,"body_markdown":"By &quot;grouped by time&quot;, do you mean grouped by a time property in the Quote object, or do you mean grouped by the time it is received at your service? For the latter you can use [`Flux.window`](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#window-java.time.Duration-) to group your items.","body":"By &quot;grouped by time&quot;, do you mean grouped by a time property in the Quote object, or do you mean grouped by the time it is received at your service? For the latter you can use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#window-java.time.Duration-\" rel=\"nofollow noreferrer\"><code>Flux.window</code></a> to group your items."}],"answers":[{"tags":[],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642443306,"creation_date":1642443306,"answer_id":70745801,"question_id":70745179,"body_markdown":"I was able to solve this problem by subscribing to the `Flux&lt;Quote&gt;` stream from the streaming service, and then publishing to a Sink.  Like this:\r\n\r\n```\r\npublic class QuoteAggregatorService {\r\n\r\n    private Sinks.Many&lt;AggregateQuote&gt; aggregateSink = Sinks.many()\r\n                             .multicast()\r\n                             .onBackpressureBuffer();\r\n    private AggregateQuote aggregateQuote = new AggregateQuote();\r\n    private long groupTime = 0L;\r\n    private ProducerClient producerClient; // Spring reactive WebClient client to the streaming quote service\r\n\r\n\r\n    public Flux&lt;AggregateQuote&gt; getAggregateQuotes() {\r\n        producerClient.getQuotes(symbol)\r\n            .doOnNext(q -&gt; {\r\n                if (getGroupTime(q) &gt; groupTime) {\r\n                    emitQuote();\r\n                    aggregateQuote = new AggregateQuote();\r\n                    groupTime = getGroupTime(q); // rounds to nearest minute\r\n                }\r\n                aggregateQuote.processQuote(q); // updates the aggregate values including volume, open, high, low, etc.\r\n            })\r\n            .doOnComplete(() -&gt; {\r\n                emitQuote(); // have to emit the last aggregate quote on complete, otherwise it gets skipped\r\n                aggregateSink.tryEmitComplete(); // signals to the caller that the Flux has completed.\r\n            })\r\n            .subscribe();\r\n            return aggregateSink.asFlux();\r\n    }\r\n\r\n    private void emitQuote() {\r\n        aggregateSink.tryEmitNext(aggregateQuote);\r\n    }\r\n}\r\n```","title":"Grouping the Elements of a Flux by Time","body":"<p>I was able to solve this problem by subscribing to the <code>Flux&lt;Quote&gt;</code> stream from the streaming service, and then publishing to a Sink.  Like this:</p>\n<pre><code>public class QuoteAggregatorService {\n\n    private Sinks.Many&lt;AggregateQuote&gt; aggregateSink = Sinks.many()\n                             .multicast()\n                             .onBackpressureBuffer();\n    private AggregateQuote aggregateQuote = new AggregateQuote();\n    private long groupTime = 0L;\n    private ProducerClient producerClient; // Spring reactive WebClient client to the streaming quote service\n\n\n    public Flux&lt;AggregateQuote&gt; getAggregateQuotes() {\n        producerClient.getQuotes(symbol)\n            .doOnNext(q -&gt; {\n                if (getGroupTime(q) &gt; groupTime) {\n                    emitQuote();\n                    aggregateQuote = new AggregateQuote();\n                    groupTime = getGroupTime(q); // rounds to nearest minute\n                }\n                aggregateQuote.processQuote(q); // updates the aggregate values including volume, open, high, low, etc.\n            })\n            .doOnComplete(() -&gt; {\n                emitQuote(); // have to emit the last aggregate quote on complete, otherwise it gets skipped\n                aggregateSink.tryEmitComplete(); // signals to the caller that the Flux has completed.\n            })\n            .subscribe();\n            return aggregateSink.asFlux();\n    }\n\n    private void emitQuote() {\n        aggregateSink.tryEmitNext(aggregateQuote);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":505,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70745801,"answer_count":1,"score":0,"last_activity_date":1642443306,"creation_date":1642439958,"question_id":70745179,"body_markdown":"Suppose I have a real-time stock quote streaming service, which has an endpoint that returns a `Flux&lt;Quote&gt;`.  This is real-time streaming data, and it has content-type of `text/event-stream`.\r\n\r\nI want to create a service that subscribes to this data, and performs aggregate operations on groups of `Quote`s, such as the total volume, high, and low over the time period.  These groups will be grouped by time.  I also want this to be a real-time stream, which returns a summary of the quotes received per unit time, as each time period elapses.\r\n\r\nMy question is how do I do this?  I&#39;ve tried using `Flux::groupBy` and `Flux::collectList` or similar, but this waits for the stream to complete before emitting aggregate results for each time block.  In a continuous stream of quotes, this will result in my service never emitting anything.\r\n\r\n","title":"Grouping the Elements of a Flux by Time","body":"<p>Suppose I have a real-time stock quote streaming service, which has an endpoint that returns a <code>Flux&lt;Quote&gt;</code>.  This is real-time streaming data, and it has content-type of <code>text/event-stream</code>.</p>\n<p>I want to create a service that subscribes to this data, and performs aggregate operations on groups of <code>Quote</code>s, such as the total volume, high, and low over the time period.  These groups will be grouped by time.  I also want this to be a real-time stream, which returns a summary of the quotes received per unit time, as each time period elapses.</p>\n<p>My question is how do I do this?  I've tried using <code>Flux::groupBy</code> and <code>Flux::collectList</code> or similar, but this waits for the stream to complete before emitting aggregate results for each time block.  In a continuous stream of quotes, this will result in my service never emitting anything.</p>\n"},{"tags":["java","android","fragment"],"comments":[{"owner":{"account_id":8559696,"reputation":3348,"user_id":6414107,"display_name":"SaravInfern"},"score":1,"creation_date":1465619709,"post_id":37759734,"comment_id":62989013,"body_markdown":"implement an interface in your fragment and set the data in the interface inside the onclick method","body":"implement an interface in your fragment and set the data in the interface inside the onclick method"},{"owner":{"account_id":4526743,"reputation":2527,"user_id":3678308,"accept_rate":100,"display_name":"Muhammad Waleed"},"score":0,"creation_date":1465631411,"post_id":37759734,"comment_id":62991355,"body_markdown":"you should be used event bus.. https://github.com/greenrobot/EventBus","body":"you should be used event bus.. <a href=\"https://github.com/greenrobot/EventBus\" rel=\"nofollow noreferrer\">github.com/greenrobot/EventBus</a>"}],"answers":[{"tags":[],"owner":{"account_id":5692719,"reputation":30497,"user_id":4504191,"display_name":"kris larson"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1642442800,"creation_date":1465631256,"answer_id":37761276,"question_id":37759734,"body_markdown":"**Updated Answer:**\r\n\r\nWith Android architecture components, doing this is much simpler.\r\n\r\nThe recommended pattern is using a `ViewModel` with `LiveData` members.  Your fragments will register observers on the `LiveData` members which will automatically be coordinated with lifecycle events, e.g. unregistering in `onDestroy()` etc. https://developer.android.com/topic/libraries/architecture/livedata\r\n\r\nWhen using the Navigation component, you can pass data when navigating to a fragment:  https://developer.android.com/guide/navigation/navigation-pass-data\r\n\r\nYou can also return data from the navigated fragment:  https://developer.android.com/guide/navigation/navigation-programmatic\r\n\r\n\r\n-----\r\n\r\n**Old answer** (superseded by Architecture Components):\r\n\r\nSince the fragments can access the activity easily enough with `getActivity()`, I would make the activity be the central hub for dispatching updates.\r\n\r\nIt sounds like you already have the persistence part handled with the database and all you need is some update events.  So here goes:\r\n\r\n1. Define a listener interface. I usually do this as an inner interface within the activity:\r\n\r\n            public interface DataUpdateListener {\r\n                void onDataUpdate();\r\n            }\r\n\r\n2. Add a data structure to your activity to keep track of listeners:\r\n\r\n            private List&lt;DataUpdateListener&gt; mListeners;\r\n\r\n Don&#39;t forget to initialize in the constructor:\r\n\r\n                mListeners = new ArrayList&lt;&gt;();\r\n\r\n3. Add the register/unregister methods to the activity:\r\n\r\n            public synchronized void registerDataUpdateListener(DataUpdateListener listener) {\r\n                mListeners.add(listener);\r\n            }\r\n\r\n            public synchronized void unregisterDataUpdateListener(DataUpdateListener listener) {\r\n                mListeners.remove(listener);\r\n            }\r\n\r\n4. Add the event method to your activity:\r\n\r\n            public synchronized void dataUpdated() {\r\n                for (DataUpdateListener listener : mListeners) {\r\n                    listener.onDataUpdate();\r\n                }\r\n            }\r\n\r\n5. Have your fragments implement DataUpdateListener:\r\n\r\n        public class MyFragment extends Fragment implements DataUpdateListener {\r\n\r\n and implement the method\r\n\r\n            @Override\r\n            public void onDataUpdate() {\r\n                // put your UI update logic here\r\n            }\r\n\r\n6. Override `onAttach()` and `onDestroy()` in the fragments to register/unregister:\r\n\r\n            @Override\r\n            public void onAttach(Activity activity) {\r\n                super.onAttach(activity);\r\n                ((MainActivity) activity).registerDataUpdateListener(this);\r\n            }\r\n\r\n            @Override\r\n            public void onDestroy() {\r\n                super.onDestroy();\r\n                ((MainActivity) getActivity()).unregisterDataUpdateListener(this);\r\n            }\r\n\r\n7. Fire the event in your fragment&#39;s UI update event:\r\n\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int listIndex) {\r\n                database.add(listIndex,object);\r\n                database.remove(listIndex,object);\r\n                ((MainActivity) getActivity()).dataUpdated();\r\n            }","title":"Dynamically updating a fragment","body":"<p><strong>Updated Answer:</strong></p>\n<p>With Android architecture components, doing this is much simpler.</p>\n<p>The recommended pattern is using a <code>ViewModel</code> with <code>LiveData</code> members.  Your fragments will register observers on the <code>LiveData</code> members which will automatically be coordinated with lifecycle events, e.g. unregistering in <code>onDestroy()</code> etc. <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/livedata</a></p>\n<p>When using the Navigation component, you can pass data when navigating to a fragment:  <a href=\"https://developer.android.com/guide/navigation/navigation-pass-data\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/navigation/navigation-pass-data</a></p>\n<p>You can also return data from the navigated fragment:  <a href=\"https://developer.android.com/guide/navigation/navigation-programmatic\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/navigation/navigation-programmatic</a></p>\n<hr />\n<p><strong>Old answer</strong> (superseded by Architecture Components):</p>\n<p>Since the fragments can access the activity easily enough with <code>getActivity()</code>, I would make the activity be the central hub for dispatching updates.</p>\n<p>It sounds like you already have the persistence part handled with the database and all you need is some update events.  So here goes:</p>\n<ol>\n<li><p>Define a listener interface. I usually do this as an inner interface within the activity:</p>\n<pre><code>     public interface DataUpdateListener {\n         void onDataUpdate();\n     }\n</code></pre>\n</li>\n<li><p>Add a data structure to your activity to keep track of listeners:</p>\n<pre><code>     private List&lt;DataUpdateListener&gt; mListeners;\n</code></pre>\n</li>\n</ol>\n<p>Don't forget to initialize in the constructor:</p>\n<pre><code>            mListeners = new ArrayList&lt;&gt;();\n</code></pre>\n<ol start=\"3\">\n<li><p>Add the register/unregister methods to the activity:</p>\n<pre><code>     public synchronized void registerDataUpdateListener(DataUpdateListener listener) {\n         mListeners.add(listener);\n     }\n\n     public synchronized void unregisterDataUpdateListener(DataUpdateListener listener) {\n         mListeners.remove(listener);\n     }\n</code></pre>\n</li>\n<li><p>Add the event method to your activity:</p>\n<pre><code>     public synchronized void dataUpdated() {\n         for (DataUpdateListener listener : mListeners) {\n             listener.onDataUpdate();\n         }\n     }\n</code></pre>\n</li>\n<li><p>Have your fragments implement DataUpdateListener:</p>\n<pre><code> public class MyFragment extends Fragment implements DataUpdateListener {\n</code></pre>\n</li>\n</ol>\n<p>and implement the method</p>\n<pre><code>        @Override\n        public void onDataUpdate() {\n            // put your UI update logic here\n        }\n</code></pre>\n<ol start=\"6\">\n<li><p>Override <code>onAttach()</code> and <code>onDestroy()</code> in the fragments to register/unregister:</p>\n<pre><code>     @Override\n     public void onAttach(Activity activity) {\n         super.onAttach(activity);\n         ((MainActivity) activity).registerDataUpdateListener(this);\n     }\n\n     @Override\n     public void onDestroy() {\n         super.onDestroy();\n         ((MainActivity) getActivity()).unregisterDataUpdateListener(this);\n     }\n</code></pre>\n</li>\n<li><p>Fire the event in your fragment's UI update event:</p>\n<pre><code>     @Override\n     public void onClick(DialogInterface dialog, int listIndex) {\n         database.add(listIndex,object);\n         database.remove(listIndex,object);\n         ((MainActivity) getActivity()).dataUpdated();\n     }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":2399467,"reputation":55,"user_id":2097519,"display_name":"user2097519"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9669,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":37761276,"answer_count":1,"score":3,"last_activity_date":1642442800,"creation_date":1465617095,"question_id":37759734,"body_markdown":"I basically have a MainActivity that has multiple tabs. Each tab is a ShowListFragment and it extends Fragment. Now, each tab contains data that I fetch from a database. I have a MOVE-button that moves data from one tab to another in each Fragment: \r\n\r\n    @Override\r\n    public void onClick(DialogInterface dialog, int listIndex) {\r\n        database.add(listIndex,object);\r\n        database.remove(listIndex,object);\r\n    }\r\n\r\nThe fragment does not update directly, but after a few swipes in between the tabs (3 exactly). How do I force the Fragment to update instantaneous after I clicked the button? I don&#39;t want to manage it through onPageSelected in the ViewPager, since it does not update the fragment I&#39;m currently on, but after I&#39;ve swiped to the next fragment. And also I don&#39;t want to update the data after each swipe.  \r\n\r\nI know that I maybe need to use some kind of observer pattern like this: [https://stackoverflow.com/questions/1658702/how-do-i-make-a-class-extend-observable-when-it-has-extended-another-class-too][1]\r\nBut still, I&#39;m still not sure how to update the fragment directly, and how to apply the observer/event pattern in my application.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1658702/how-do-i-make-a-class-extend-observable-when-it-has-extended-another-class-too","title":"Dynamically updating a fragment","body":"<p>I basically have a MainActivity that has multiple tabs. Each tab is a ShowListFragment and it extends Fragment. Now, each tab contains data that I fetch from a database. I have a MOVE-button that moves data from one tab to another in each Fragment: </p>\n\n<pre><code>@Override\npublic void onClick(DialogInterface dialog, int listIndex) {\n    database.add(listIndex,object);\n    database.remove(listIndex,object);\n}\n</code></pre>\n\n<p>The fragment does not update directly, but after a few swipes in between the tabs (3 exactly). How do I force the Fragment to update instantaneous after I clicked the button? I don't want to manage it through onPageSelected in the ViewPager, since it does not update the fragment I'm currently on, but after I've swiped to the next fragment. And also I don't want to update the data after each swipe.  </p>\n\n<p>I know that I maybe need to use some kind of observer pattern like this: <a href=\"https://stackoverflow.com/questions/1658702/how-do-i-make-a-class-extend-observable-when-it-has-extended-another-class-too\">How do I make a Class extend Observable when it has extended another class too?</a>\nBut still, I'm still not sure how to update the fragment directly, and how to apply the observer/event pattern in my application.</p>\n"},{"tags":["java","hibernate","many-to-many"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642442487,"creation_date":1642442487,"answer_id":70745669,"question_id":70745291,"body_markdown":"You have to manually manage the relationship properly between `Project` and `Employee` before they are saved to DB. To facilitate it , you can create an instance method on `Employee` to encapsulate such logic rather than directly set the employee &#39;s project list.\r\n\r\n``` java\r\npublic class Employee {\r\n\t\r\n\tpublic void addProject(Project project){\r\n\t\tthis.projects.add(project);\r\n\t\tproject.getEmployees().add(this);\r\n\t}\r\n}\r\n```\r\n\r\nAnd manage their relationships by :\r\n\r\n``` java\r\nemployee1.addProject(project1);\r\nemployee1.addProject(project2);\r\n```\r\n\r\nOf course you can do it in other way round , which add an employee to a project : \r\n\r\n``` java\r\npublic class Project {\r\n\t\r\n\tpublic void addEmployee(Employee employee){\r\n\t\tthis.employees.add(employee);\r\n\t\temployee.getProjects().add(this);\r\n\t}\r\n}\r\n```\r\n\r\nAnd manage their relationship by : \r\n\r\n```\r\nproject1.addEmployee(employee1);\r\nproject2.addEmployee(employee1);\r\n```\r\n\r\nWhen you get `project3` , it just return you the `project1` instance from the `Session` as both `project1` and `project3` refer to the same ID. Since you do not manage `project1` &#39;s employees properly before , it has NULL employees list and hence you get `NullPointerException`.\r\n\r\n\r\nThe time when you execute it again , `project3` is loaded from the DB which hibernate already help to manage their relationship automatically and hence you do not get `NullPointerException`\r\n\r\nIf you do want to manage the relationship by yourself, you can call `session.refresh(employee1)` after the transaction is commit to force hibernate to refresh its latest state from the DB which should not solve the `NullPointerException` : \r\n\r\n``` java\r\n....\r\ntransaction.commit();\r\nsession.refresh(project1);\r\n\r\nProject project3 = session.get(Project.class, 3);\r\nSystem.out.println(project3.getProjectId() + &quot; &quot; + project3.getProjectName());\r\nfor(Employee employee : project3.getEmployees()){\r\n       System.out.println(employee.getEmployeeId()+&quot; &quot;+ employee.getEmployeeName());\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Output is different, is there any time lag for hibernate commands to get executed","body":"<p>You have to manually manage the relationship properly between <code>Project</code> and <code>Employee</code> before they are saved to DB. To facilitate it , you can create an instance method on <code>Employee</code> to encapsulate such logic rather than directly set the employee 's project list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Employee {\n    \n    public void addProject(Project project){\n        this.projects.add(project);\n        project.getEmployees().add(this);\n    }\n}\n</code></pre>\n<p>And manage their relationships by :</p>\n<pre class=\"lang-java prettyprint-override\"><code>employee1.addProject(project1);\nemployee1.addProject(project2);\n</code></pre>\n<p>Of course you can do it in other way round , which add an employee to a project :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Project {\n    \n    public void addEmployee(Employee employee){\n        this.employees.add(employee);\n        employee.getProjects().add(this);\n    }\n}\n</code></pre>\n<p>And manage their relationship by :</p>\n<pre><code>project1.addEmployee(employee1);\nproject2.addEmployee(employee1);\n</code></pre>\n<p>When you get <code>project3</code> , it just return you the <code>project1</code> instance from the <code>Session</code> as both <code>project1</code> and <code>project3</code> refer to the same ID. Since you do not manage <code>project1</code> 's employees properly before , it has NULL employees list and hence you get <code>NullPointerException</code>.</p>\n<p>The time when you execute it again , <code>project3</code> is loaded from the DB which hibernate already help to manage their relationship automatically and hence you do not get <code>NullPointerException</code></p>\n<p>If you do want to manage the relationship by yourself, you can call <code>session.refresh(employee1)</code> after the transaction is commit to force hibernate to refresh its latest state from the DB which should not solve the <code>NullPointerException</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>....\ntransaction.commit();\nsession.refresh(project1);\n\nProject project3 = session.get(Project.class, 3);\nSystem.out.println(project3.getProjectId() + &quot; &quot; + project3.getProjectName());\nfor(Employee employee : project3.getEmployees()){\n       System.out.println(employee.getEmployeeId()+&quot; &quot;+ employee.getEmployeeName());\n}\n</code></pre>\n"}],"owner":{"account_id":20906134,"reputation":483,"user_id":15358022,"display_name":"Dawson Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70745669,"answer_count":1,"score":0,"last_activity_date":1642442738,"creation_date":1642440431,"question_id":70745291,"body_markdown":"My Project class - \r\n```\r\n@Entity\r\npublic class Project {\r\n    @Id\r\n    private Integer projectId;\r\n\r\n    private String projectName;\r\n\r\n    @ManyToMany(mappedBy = &quot;projects&quot;)\r\n    private List&lt;Employee&gt; employees;\r\n}\r\n```\r\nMy Employee class - \r\n```\r\n@Entity\r\npublic class Employee {\r\n    @Id\r\n    private Integer employeeId;\r\n    private String employeeName;\r\n\r\n    @ManyToMany\r\n    private List&lt;Project&gt; projects;\r\n}\r\n```\r\nMy main class - \r\n```\r\nSessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\r\nEmployee employee1 = new Employee();\r\nemployee1.setEmployeeId(1);\r\nemployee1.setEmployeeName(&quot;Harry&quot;);\r\nEmployee employee2 = new Employee();\r\nemployee2.setEmployeeId(2);\r\nemployee2.setEmployeeName(&quot;Ron&quot;);\r\n\r\nProject project1 = new Project();\r\nproject1.setProjectId(3);\r\nproject1.setProjectName(&quot;ABC&quot;);\r\nProject project2 = new Project();\r\nproject2.setProjectId(4);\r\nproject2.setProjectName(&quot;DEF&quot;);\r\n\r\nList&lt;Project&gt; projectList = new ArrayList&lt;&gt;();\r\nprojectList.add(project1);\r\nprojectList.add(project2);\r\nemployee1.setProjects(projectList);\r\n\r\nSession session = sessionFactory.openSession();\r\nTransaction transaction = session.beginTransaction();\r\n\r\nsession.save(employee1);\r\nsession.save(employee2);\r\nsession.save(project1);\r\nsession.save(project2);\r\n\r\ntransaction.commit();\r\n\r\nProject project3 = session.get(Project.class, 3);\r\nSystem.out.println(project3.getProjectId() + &quot; &quot; + project3.getProjectName());\r\nfor(Employee employee : project3.getEmployees()){\r\n       System.out.println(employee.getEmployeeId()+&quot; &quot;+ employee.getEmployeeName());\r\n}\r\n\r\nsession.close();\r\nsessionFactory.close();\r\n```\r\nOn running the above code, employee1, employee2, project1, project2 are successfully saved into the database but I get a `NullPointerException` with `project3.getEmployees()`.\r\n\r\nBut the next time I run the code (with all the save commands commented), `project3.getEmployees()` is not null and contains Employee(employeeId=1, employeeName=&quot;Harry&quot;).\r\n\r\nIs there any time lag because of which the first time I get a `NullPointerException` with `project3.getEmployees()`?\r\n\r\nNote - `project3.getProjectId()` and `project3.getProjectName()` don&#39;t return null in either of the cases.","title":"Output is different, is there any time lag for hibernate commands to get executed","body":"<p>My Project class -</p>\n<pre><code>@Entity\npublic class Project {\n    @Id\n    private Integer projectId;\n\n    private String projectName;\n\n    @ManyToMany(mappedBy = &quot;projects&quot;)\n    private List&lt;Employee&gt; employees;\n}\n</code></pre>\n<p>My Employee class -</p>\n<pre><code>@Entity\npublic class Employee {\n    @Id\n    private Integer employeeId;\n    private String employeeName;\n\n    @ManyToMany\n    private List&lt;Project&gt; projects;\n}\n</code></pre>\n<p>My main class -</p>\n<pre><code>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\nEmployee employee1 = new Employee();\nemployee1.setEmployeeId(1);\nemployee1.setEmployeeName(&quot;Harry&quot;);\nEmployee employee2 = new Employee();\nemployee2.setEmployeeId(2);\nemployee2.setEmployeeName(&quot;Ron&quot;);\n\nProject project1 = new Project();\nproject1.setProjectId(3);\nproject1.setProjectName(&quot;ABC&quot;);\nProject project2 = new Project();\nproject2.setProjectId(4);\nproject2.setProjectName(&quot;DEF&quot;);\n\nList&lt;Project&gt; projectList = new ArrayList&lt;&gt;();\nprojectList.add(project1);\nprojectList.add(project2);\nemployee1.setProjects(projectList);\n\nSession session = sessionFactory.openSession();\nTransaction transaction = session.beginTransaction();\n\nsession.save(employee1);\nsession.save(employee2);\nsession.save(project1);\nsession.save(project2);\n\ntransaction.commit();\n\nProject project3 = session.get(Project.class, 3);\nSystem.out.println(project3.getProjectId() + &quot; &quot; + project3.getProjectName());\nfor(Employee employee : project3.getEmployees()){\n       System.out.println(employee.getEmployeeId()+&quot; &quot;+ employee.getEmployeeName());\n}\n\nsession.close();\nsessionFactory.close();\n</code></pre>\n<p>On running the above code, employee1, employee2, project1, project2 are successfully saved into the database but I get a <code>NullPointerException</code> with <code>project3.getEmployees()</code>.</p>\n<p>But the next time I run the code (with all the save commands commented), <code>project3.getEmployees()</code> is not null and contains Employee(employeeId=1, employeeName=&quot;Harry&quot;).</p>\n<p>Is there any time lag because of which the first time I get a <code>NullPointerException</code> with <code>project3.getEmployees()</code>?</p>\n<p>Note - <code>project3.getProjectId()</code> and <code>project3.getProjectName()</code> don't return null in either of the cases.</p>\n"},{"tags":["java","jvm","jvm-hotspot","jvm-codecache"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1637694621,"post_id":70086548,"comment_id":123893790,"body_markdown":"This sounds almost like a bug report. Consider reporting this to the OpenJDK project.","body":"This sounds almost like a bug report. Consider reporting this to the OpenJDK project."},{"owner":{"account_id":2264224,"reputation":219,"user_id":1993436,"display_name":"Josef"},"score":0,"creation_date":1638886353,"post_id":70086548,"comment_id":124202960,"body_markdown":"I asked in the mailing list, let&#39;s see what they will reply: https://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2021-December/051697.html","body":"I asked in the mailing list, let&#39;s see what they will reply: <a href=\"https://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2021-December/051697.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/hotspot-compiler-dev/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23968312,"reputation":61,"user_id":17957434,"display_name":"Lutz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1642442106,"creation_date":1642442106,"answer_id":70745590,"question_id":70086548,"body_markdown":"This is a short summary of my comments on the OpenJDK mailing list. My last comment there was on Jan 3rd, 2022.\r\n\r\n - There is no indication that the observed behaviour is caused by a bug.\r\n - All the logs and traces I saw show normal operation.\r\n - It is very likely that the CodeHeap size - before the JVM upgrade - was optimised to the max.\r\n - Some minor change in JIT code generation, e.g. slightly larger generated code size, has pushed CodeHeap management to the bad side of the tipping point.\r\n - The result is obvious: no steady state can be reached. There are permanent code sweeps and recompilations. \r\n - The CodeHeap segment for profiled methods is drained over time because all nmehtods become hot enough to be compiled at highest optimisation level. \r\n\r\nThe remedy? It sounds dumb and obvious at the same time: increase CodeCache space. Because a steady state is reached with a large enough CodeCache, it may be beneficial to disable segmented code cache. \r\n","title":"Java update from 11.0.11 to 11.0.13 changes JVM code cache behavior and results in more process cpu usage and strange profiled nmethods memory usage","body":"<p>This is a short summary of my comments on the OpenJDK mailing list. My last comment there was on Jan 3rd, 2022.</p>\n<ul>\n<li>There is no indication that the observed behaviour is caused by a bug.</li>\n<li>All the logs and traces I saw show normal operation.</li>\n<li>It is very likely that the CodeHeap size - before the JVM upgrade - was optimised to the max.</li>\n<li>Some minor change in JIT code generation, e.g. slightly larger generated code size, has pushed CodeHeap management to the bad side of the tipping point.</li>\n<li>The result is obvious: no steady state can be reached. There are permanent code sweeps and recompilations.</li>\n<li>The CodeHeap segment for profiled methods is drained over time because all nmehtods become hot enough to be compiled at highest optimisation level.</li>\n</ul>\n<p>The remedy? It sounds dumb and obvious at the same time: increase CodeCache space. Because a steady state is reached with a large enough CodeCache, it may be beneficial to disable segmented code cache.</p>\n"}],"owner":{"account_id":2264224,"reputation":219,"user_id":1993436,"display_name":"Josef"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2151,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1642442106,"creation_date":1637694539,"question_id":70086548,"body_markdown":"We run a complex clustered application with Java 11.0.11 and -XX:ReservedCodeCacheSize=375m with the same load profile attached 24/7 without any restarts.\r\n\r\nAfter we updated AdoptOpenJDK jdk-11.0.11+9 to Temurin jdk-11.0.13+8, both using -XX:ReservedCodeCacheSize=375m with no code changes in our app, just updating Java, we noticed the following changes:\r\n* process CPU usage increased from ~ 30% to ~ 35% running on a AWS [r5.8xlarge](https://instances.vantage.sh/?selected=r5.8xlarge) with 32 vCPUs, 256GB RAM and -Xms160G -Xmx160G, probably caused by high JVM Sweeper thread activity (see below)\r\n* JVM CodeHeap &#39;non-profiled nmethods&#39; (C2 optimized code) was filled up (used=176 MB, max=184 MB) as with Java 11.0.11 which is expected BUT\r\n* JVM CodeHeap &#39;profiled nmethods&#39; (C1 optimized code) was filled up (146 MB Used memory, 184 MB Maximum memory) shortly after process restart AND got cut down to ~ 40 MB after just 15 minutes and has stayed at this level since then (24 hours)\r\n\r\nJava **11.0.13** + -XX:ReservedCodeCacheSize=375m, timezone=UTC+1\r\n[![Java 11.0.13 + -XX:ReservedCodeCacheSize=375m][1]][1]\r\n\r\nvs\r\n\r\nJava **11.0.11** + -XX:ReservedCodeCacheSize=375m, timezone=UTC+1\r\n[![Java 11.0.11 + -XX:ReservedCodeCacheSize=375m][2]][2]\r\n\r\nThe next step was to increase the -XX:ReservedCodeCacheSize to 512m but after ~ 3 hours the JVM CodeHeap &#39;profiled nmethods&#39; (C1 optimized code) got cut down again to ~ 50 MB and even decreased further over time\r\n\r\nJava **11.0.13** + -XX:ReservedCodeCacheSize=512m, timezone=UTC+1\r\n[![Java 11.0.13 + -XX:ReservedCodeCacheSize=512m][3]][3]\r\n\r\nTherefore we decided to double -XX:ReservedCodeCacheSize to 1024m and for the last 7 days both CodeHeap areas have been stable\r\n* CodeHeap &#39;non-profiled nmethods&#39;: 405 MB Used memory, 405 MB Committed memory, 508 MB Maximum memory\r\n* CodeHeap &#39;profiled nmethods&#39;: 258 MB Used memory, 258 MB Committed memory, 508 MB Maximum memory\r\n\r\nJava **11.0.13** + -XX:ReservedCodeCacheSize=1024m is running stable for one week, timezone=UTC+1\r\n[![Java 11.0.13 + -XX:ReservedCodeCacheSize=1024m][4]][4]\r\n\r\nWe tried these changes on different nodes and also on one node and the result is always reproducible.\r\n\r\n---\r\n\r\nWith -XX:ReservedCodeCacheSize=375m the Linux perf tool shows high CPU usage for the Sweeper thread, which completely disappears with 1024m.\r\n\r\n    perf record -F 99 --output=perf-375m-uptime-21hours.data -ag -p &lt;PID&gt; sleep 60\r\n\r\n    +    4.82%     0.00%  Sweeper thread   libpthread-2.17.so                                                  [.] start_thread\r\n    +    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] thread_native_entry\r\n    +    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] Thread::call_run\r\n    +    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] JavaThread::thread_main_inner\r\n    +    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::sweeper_loop\r\n    +    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::possibly_sweep\r\n    +    4.79%     0.03%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::sweep_code_cache\r\n    +    4.24%     0.03%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::process_compiled_method\r\n    +    4.05%     0.00%  C2 CompilerThre  libpthread-2.17.so                                                  [.] start_thread\r\n    +    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] thread_native_entry\r\n    +    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] Thread::call_run\r\n    +    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] JavaThread::thread_main_inner\r\n    +    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] CompileBroker::compiler_thread_loop\r\n    +    4.04%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] CompileBroker::invoke_compiler_on_method\r\n    +    4.03%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] C2Compiler::compile_method\r\n    +    4.03%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] Compile::Compile\r\n    +    3.53%     0.68%  Sweeper thread   libjvm.so                                                           [.] CompiledMethod::cleanup_inline_caches_impl\r\n\r\nAs a result the CPU usage with Java 11.0.13 and -XX:ReservedCodeCacheSize=1024m is the same or slightly better than with Java 11.0.11 and -XX:ReservedCodeCacheSize=375m\r\n\r\n---\r\n\r\n\r\nDuring our investigation no helpful log lines were printed, e.g. we expected to see something like &quot;CodeCache is full. Compiler has been disabled.&quot;\r\n\r\n    jcmd &lt;PID&gt; VM.log what=codecache=info,sweep*=trace decorators=time,uptime,level,tags output=codecache-sweep.log\r\n\r\nAll charts in the picture use timezone UTC+1. All timestamps in the log files are UTC+0.\r\n\r\nThe colors are just intended to show changes over time.\r\n\r\n[codecache-sweep-375m.log.0][5]\r\nRegex for interesting start time: `\\[2021-11-22T10:2[5-9].+&#39;profiled nmethods&#39;` - A lot of sweeps per minute\r\n[![codecache-sweep-375m.log.0 picture][6]][6]\r\n\r\n[codecache-sweep-512m.log.0][7]\r\nRegex for interesting start time: `\\[2021-11-22T13:3[6-9].+&#39;profiled nmethods` - Still many sweeps per minute.\r\n[![codecache-sweep-512m.log.0 picture][8]][8]\r\n\r\n[codecache-sweep-1024m.log][9]\r\nAll fine, nothing special, avg 5 sweeps per day\r\n[![enter image description here][10]][10]\r\n\r\n---\r\n\r\nPlease be aware that a lot of changes in the code cache / code heap components were made in Java [11.0.12 (release notes)](https://foojay.io/java-11/?quarter=072021&amp;tab=component&amp;version=11.0.12): Search for *CodeHeap*\r\n - [JDK-8223444 Improve CodeHeap Free Space Management](https://bugs.openjdk.java.net/browse/JDK-8223444)\r\n - [JDK-8231460 Performance issue (CodeHeap) with large free blocks](https://bugs.openjdk.java.net/browse/JDK-8231460)\r\n - ...\r\n\r\nCan you please help us to understand the reasoning and implications of CodeHeap &#39;profiled nmethods&#39; shrinking down to a very low level and not increasing anymore?\r\n\r\n---\r\nUPDATE 2021-12-28\r\n\r\nRe-running 11.0.11 and 11.0.13 with -XX:ReservedCodeCacheSize=375m and `jcmd &lt;pid&gt; Compiler.CodeHeap_Analytics aggregate` every 5 seconds to collect more data for the OpenJDK team.\r\n\r\n[![Java 11.0.11 vs 11.0.13][11]][11]\r\n\r\n[zip with log and CodeHeap_Analytics data][12]\r\n\r\nThe much higher code sweeper invocations (with 11.0.13) can still be reproduced.\r\n\r\n\r\n    Java 11.0.11 2h uptime, sweeper invocations:\r\n    grep -F &#39;[codecache,sweep,start]&#39; codecache-sweep-11.0.11_375m.log* | wc -l\r\n    14.458\r\n\r\n    Java 11.0.13 2h uptime, sweeper invocations:\r\n    grep -F &#39;[codecache,sweep,start]&#39; codecache-sweep-11.0.13_375m.log* | wc -l\r\n    41.901\r\n\r\nFor detailed statistics please open the jcmd_compiler_codeheap_analytics_aggregate files from the [zip][12].\r\n\r\n[![Text diff jcmd_compiler_codeheap_analytics_aggregate_2021-12-28-191001.txt vs jcmd_compiler_codeheap_analytics_aggregate_2021-12-28-191000.txt][13]][13]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Wm7lN.jpg\r\n  [2]: https://i.stack.imgur.com/EAubz.jpg\r\n  [3]: https://i.stack.imgur.com/ZL392.jpg\r\n  [4]: https://i.stack.imgur.com/GpU53.jpg\r\n  [5]: https://drive.google.com/file/d/1GXrY8pBl-MoWKGePJzgngXV2gIcWjbFd/view?usp=sharing\r\n  [6]: https://i.stack.imgur.com/IIWnF.jpg\r\n  [7]: https://drive.google.com/file/d/1o6fR4h7f4cHgq9ZUCLTAEyl-bg84fesY/view?usp=sharing\r\n  [8]: https://i.stack.imgur.com/xtsKD.jpg\r\n  [9]: https://drive.google.com/file/d/1lngsxeyLxmDBM2JbOU9ZHFyAOGxHDxaM/view?usp=sharing\r\n  [10]: https://i.stack.imgur.com/V8uCC.jpg\r\n  [11]: https://i.stack.imgur.com/H454M.png\r\n  [12]: https://drive.google.com/file/d/1PLCo1XnKBHaGdGpVgzHraTy1pJxs4Id9/view?usp=sharing\r\n  [13]: https://i.stack.imgur.com/sRS1Q.png","title":"Java update from 11.0.11 to 11.0.13 changes JVM code cache behavior and results in more process cpu usage and strange profiled nmethods memory usage","body":"<p>We run a complex clustered application with Java 11.0.11 and -XX:ReservedCodeCacheSize=375m with the same load profile attached 24/7 without any restarts.</p>\n<p>After we updated AdoptOpenJDK jdk-11.0.11+9 to Temurin jdk-11.0.13+8, both using -XX:ReservedCodeCacheSize=375m with no code changes in our app, just updating Java, we noticed the following changes:</p>\n<ul>\n<li>process CPU usage increased from ~ 30% to ~ 35% running on a AWS <a href=\"https://instances.vantage.sh/?selected=r5.8xlarge\" rel=\"nofollow noreferrer\">r5.8xlarge</a> with 32 vCPUs, 256GB RAM and -Xms160G -Xmx160G, probably caused by high JVM Sweeper thread activity (see below)</li>\n<li>JVM CodeHeap 'non-profiled nmethods' (C2 optimized code) was filled up (used=176 MB, max=184 MB) as with Java 11.0.11 which is expected BUT</li>\n<li>JVM CodeHeap 'profiled nmethods' (C1 optimized code) was filled up (146 MB Used memory, 184 MB Maximum memory) shortly after process restart AND got cut down to ~ 40 MB after just 15 minutes and has stayed at this level since then (24 hours)</li>\n</ul>\n<p>Java <strong>11.0.13</strong> + -XX:ReservedCodeCacheSize=375m, timezone=UTC+1\n<a href=\"https://i.stack.imgur.com/Wm7lN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wm7lN.jpg\" alt=\"Java 11.0.13 + -XX:ReservedCodeCacheSize=375m\" /></a></p>\n<p>vs</p>\n<p>Java <strong>11.0.11</strong> + -XX:ReservedCodeCacheSize=375m, timezone=UTC+1\n<a href=\"https://i.stack.imgur.com/EAubz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EAubz.jpg\" alt=\"Java 11.0.11 + -XX:ReservedCodeCacheSize=375m\" /></a></p>\n<p>The next step was to increase the -XX:ReservedCodeCacheSize to 512m but after ~ 3 hours the JVM CodeHeap 'profiled nmethods' (C1 optimized code) got cut down again to ~ 50 MB and even decreased further over time</p>\n<p>Java <strong>11.0.13</strong> + -XX:ReservedCodeCacheSize=512m, timezone=UTC+1\n<a href=\"https://i.stack.imgur.com/ZL392.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZL392.jpg\" alt=\"Java 11.0.13 + -XX:ReservedCodeCacheSize=512m\" /></a></p>\n<p>Therefore we decided to double -XX:ReservedCodeCacheSize to 1024m and for the last 7 days both CodeHeap areas have been stable</p>\n<ul>\n<li>CodeHeap 'non-profiled nmethods': 405 MB Used memory, 405 MB Committed memory, 508 MB Maximum memory</li>\n<li>CodeHeap 'profiled nmethods': 258 MB Used memory, 258 MB Committed memory, 508 MB Maximum memory</li>\n</ul>\n<p>Java <strong>11.0.13</strong> + -XX:ReservedCodeCacheSize=1024m is running stable for one week, timezone=UTC+1\n<a href=\"https://i.stack.imgur.com/GpU53.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GpU53.jpg\" alt=\"Java 11.0.13 + -XX:ReservedCodeCacheSize=1024m\" /></a></p>\n<p>We tried these changes on different nodes and also on one node and the result is always reproducible.</p>\n<hr />\n<p>With -XX:ReservedCodeCacheSize=375m the Linux perf tool shows high CPU usage for the Sweeper thread, which completely disappears with 1024m.</p>\n<pre><code>perf record -F 99 --output=perf-375m-uptime-21hours.data -ag -p &lt;PID&gt; sleep 60\n\n+    4.82%     0.00%  Sweeper thread   libpthread-2.17.so                                                  [.] start_thread\n+    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] thread_native_entry\n+    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] Thread::call_run\n+    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] JavaThread::thread_main_inner\n+    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::sweeper_loop\n+    4.82%     0.00%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::possibly_sweep\n+    4.79%     0.03%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::sweep_code_cache\n+    4.24%     0.03%  Sweeper thread   libjvm.so                                                           [.] NMethodSweeper::process_compiled_method\n+    4.05%     0.00%  C2 CompilerThre  libpthread-2.17.so                                                  [.] start_thread\n+    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] thread_native_entry\n+    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] Thread::call_run\n+    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] JavaThread::thread_main_inner\n+    4.05%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] CompileBroker::compiler_thread_loop\n+    4.04%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] CompileBroker::invoke_compiler_on_method\n+    4.03%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] C2Compiler::compile_method\n+    4.03%     0.00%  C2 CompilerThre  libjvm.so                                                           [.] Compile::Compile\n+    3.53%     0.68%  Sweeper thread   libjvm.so                                                           [.] CompiledMethod::cleanup_inline_caches_impl\n</code></pre>\n<p>As a result the CPU usage with Java 11.0.13 and -XX:ReservedCodeCacheSize=1024m is the same or slightly better than with Java 11.0.11 and -XX:ReservedCodeCacheSize=375m</p>\n<hr />\n<p>During our investigation no helpful log lines were printed, e.g. we expected to see something like &quot;CodeCache is full. Compiler has been disabled.&quot;</p>\n<pre><code>jcmd &lt;PID&gt; VM.log what=codecache=info,sweep*=trace decorators=time,uptime,level,tags output=codecache-sweep.log\n</code></pre>\n<p>All charts in the picture use timezone UTC+1. All timestamps in the log files are UTC+0.</p>\n<p>The colors are just intended to show changes over time.</p>\n<p><a href=\"https://drive.google.com/file/d/1GXrY8pBl-MoWKGePJzgngXV2gIcWjbFd/view?usp=sharing\" rel=\"nofollow noreferrer\">codecache-sweep-375m.log.0</a>\nRegex for interesting start time: <code>\\[2021-11-22T10:2[5-9].+'profiled nmethods'</code> - A lot of sweeps per minute\n<a href=\"https://i.stack.imgur.com/IIWnF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IIWnF.jpg\" alt=\"codecache-sweep-375m.log.0 picture\" /></a></p>\n<p><a href=\"https://drive.google.com/file/d/1o6fR4h7f4cHgq9ZUCLTAEyl-bg84fesY/view?usp=sharing\" rel=\"nofollow noreferrer\">codecache-sweep-512m.log.0</a>\nRegex for interesting start time: <code>\\[2021-11-22T13:3[6-9].+'profiled nmethods</code> - Still many sweeps per minute.\n<a href=\"https://i.stack.imgur.com/xtsKD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xtsKD.jpg\" alt=\"codecache-sweep-512m.log.0 picture\" /></a></p>\n<p><a href=\"https://drive.google.com/file/d/1lngsxeyLxmDBM2JbOU9ZHFyAOGxHDxaM/view?usp=sharing\" rel=\"nofollow noreferrer\">codecache-sweep-1024m.log</a>\nAll fine, nothing special, avg 5 sweeps per day\n<a href=\"https://i.stack.imgur.com/V8uCC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V8uCC.jpg\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>Please be aware that a lot of changes in the code cache / code heap components were made in Java <a href=\"https://foojay.io/java-11/?quarter=072021&amp;tab=component&amp;version=11.0.12\" rel=\"nofollow noreferrer\">11.0.12 (release notes)</a>: Search for <em>CodeHeap</em></p>\n<ul>\n<li><a href=\"https://bugs.openjdk.java.net/browse/JDK-8223444\" rel=\"nofollow noreferrer\">JDK-8223444 Improve CodeHeap Free Space Management</a></li>\n<li><a href=\"https://bugs.openjdk.java.net/browse/JDK-8231460\" rel=\"nofollow noreferrer\">JDK-8231460 Performance issue (CodeHeap) with large free blocks</a></li>\n<li>...</li>\n</ul>\n<p>Can you please help us to understand the reasoning and implications of CodeHeap 'profiled nmethods' shrinking down to a very low level and not increasing anymore?</p>\n<hr />\n<p>UPDATE 2021-12-28</p>\n<p>Re-running 11.0.11 and 11.0.13 with -XX:ReservedCodeCacheSize=375m and <code>jcmd &lt;pid&gt; Compiler.CodeHeap_Analytics aggregate</code> every 5 seconds to collect more data for the OpenJDK team.</p>\n<p><a href=\"https://i.stack.imgur.com/H454M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H454M.png\" alt=\"Java 11.0.11 vs 11.0.13\" /></a></p>\n<p><a href=\"https://drive.google.com/file/d/1PLCo1XnKBHaGdGpVgzHraTy1pJxs4Id9/view?usp=sharing\" rel=\"nofollow noreferrer\">zip with log and CodeHeap_Analytics data</a></p>\n<p>The much higher code sweeper invocations (with 11.0.13) can still be reproduced.</p>\n<pre><code>Java 11.0.11 2h uptime, sweeper invocations:\ngrep -F '[codecache,sweep,start]' codecache-sweep-11.0.11_375m.log* | wc -l\n14.458\n\nJava 11.0.13 2h uptime, sweeper invocations:\ngrep -F '[codecache,sweep,start]' codecache-sweep-11.0.13_375m.log* | wc -l\n41.901\n</code></pre>\n<p>For detailed statistics please open the jcmd_compiler_codeheap_analytics_aggregate files from the <a href=\"https://drive.google.com/file/d/1PLCo1XnKBHaGdGpVgzHraTy1pJxs4Id9/view?usp=sharing\" rel=\"nofollow noreferrer\">zip</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/sRS1Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sRS1Q.png\" alt=\"Text diff jcmd_compiler_codeheap_analytics_aggregate_2021-12-28-191001.txt vs jcmd_compiler_codeheap_analytics_aggregate_2021-12-28-191000.txt\" /></a></p>\n"},{"tags":["java","memory"],"comments":[{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1642439102,"post_id":70744919,"comment_id":125065739,"body_markdown":"you may group your cars by brand before processing them ?","body":"you may group your cars by brand before processing them ?"},{"owner":{"account_id":19942283,"reputation":381,"user_id":14613787,"display_name":"Deepanshu Rathi"},"score":2,"creation_date":1642439142,"post_id":70744919,"comment_id":125065756,"body_markdown":"If you have only 2 options as brand, why not use ENUM?\nAbout instances of &quot;Ford&quot;, it depends on how you create Car Object, if you pass it as &quot;Ford&quot; each time, A new instance gets created","body":"If you have only 2 options as brand, why not use ENUM? About instances of &quot;Ford&quot;, it depends on how you create Car Object, if you pass it as &quot;Ford&quot; each time, A new instance gets created"},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1642439195,"post_id":70744919,"comment_id":125065775,"body_markdown":"Consider using a &quot;chunk size&quot; instead of managing 1million objects at once. You can also using an enumeration for brands ?","body":"Consider using a &quot;chunk size&quot; instead of managing 1million objects at once. You can also using an enumeration for brands ?"},{"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"score":1,"creation_date":1642439995,"post_id":70744919,"comment_id":125066065,"body_markdown":"The code in the example is hypothetical, to illustrate a question regarding memory management. The question is about how Java manages the String properties. I’m not looking for advice on how to improve the Java in the example, I want to understand the implications for memory.","body":"The code in the example is hypothetical, to illustrate a question regarding memory management. The question is about how Java manages the String properties. I’m not looking for advice on how to improve the Java in the example, I want to understand the implications for memory."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1642440833,"post_id":70744919,"comment_id":125066351,"body_markdown":"depends how the strings are being created - literals are automatically interned, so there is only one instance... strings from user input or database, or files are mostly not interned, so each is an own instance, but you can call the `intern()` method of the string yourself (using an `enum` would be more appropriate IMHO)","body":"depends how the strings are being created - literals are automatically interned, so there is only one instance... strings from user input or database, or files are mostly not interned, so each is an own instance, but you can call the <code>intern()</code> method of the string yourself (using an <code>enum</code> would be more appropriate IMHO)"},{"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"score":0,"creation_date":1642444628,"post_id":70744919,"comment_id":125067506,"body_markdown":"@user16320675 could you add an answer please? this is helpful","body":"@user16320675 could you add an answer please? this is helpful"}],"answers":[{"tags":[],"owner":{"account_id":81168,"reputation":234336,"user_id":229044,"accept_rate":83,"display_name":"user229044"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642440995,"creation_date":1642440995,"answer_id":70745396,"question_id":70744919,"body_markdown":"You can use [string interning][1] to ensure that each duplicate string points to the same memory.\r\n\r\nOtherwise, if you create 1,000,000 Strings and set them to the value &quot;Ford&quot;, you have created 1,000,000 copies of the bytes composing &quot;Ford&quot; in memory.\r\n\r\n[1]: https://stackoverflow.com/questions/10578984/what-is-java-string-interning","title":"Java pointer/reference memory cost","body":"<p>You can use <a href=\"https://stackoverflow.com/questions/10578984/what-is-java-string-interning\">string interning</a> to ensure that each duplicate string points to the same memory.</p>\n<p>Otherwise, if you create 1,000,000 Strings and set them to the value &quot;Ford&quot;, you have created 1,000,000 copies of the bytes composing &quot;Ford&quot; in memory.</p>\n"}],"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70745396,"answer_count":1,"score":0,"last_activity_date":1642442026,"creation_date":1642438655,"question_id":70744919,"body_markdown":"I have a Java object with 2 properties. One of this objects properties is a String. Virtually every instance of the object will have the same value (or one of 2 values) \r\n\r\nFor example:\r\n\r\n    public record Car (String modelId, String brand) {}\r\n\r\n\r\nIf I have millions of these objects, each with a different `modelId`, but with a `brand` = either `Ford` or `Volkswagen`, how does Java manage the `brand` property in terms of memory? \r\n\r\nI think(?) there is just one instance of the `Ford`, and `Volkswagen` String objects, and each `Car` will have a pointer or reference to those Strings - is this correct? \r\n\r\n**My main question**: Given we only have a pointer to the brand property, are the memory savings from removing the `brand` property fairly small? i.e. if I remove the `String brand` property from the `Car` I&#39;m not going to save much in terms of memory despite having millions of `Car` instances?\r\n\r\n**bonus point:** how much memory might I save by removing (?1 million) pointers from the memory stack?","title":"Java pointer/reference memory cost","body":"<p>I have a Java object with 2 properties. One of this objects properties is a String. Virtually every instance of the object will have the same value (or one of 2 values)</p>\n<p>For example:</p>\n<pre><code>public record Car (String modelId, String brand) {}\n</code></pre>\n<p>If I have millions of these objects, each with a different <code>modelId</code>, but with a <code>brand</code> = either <code>Ford</code> or <code>Volkswagen</code>, how does Java manage the <code>brand</code> property in terms of memory?</p>\n<p>I think(?) there is just one instance of the <code>Ford</code>, and <code>Volkswagen</code> String objects, and each <code>Car</code> will have a pointer or reference to those Strings - is this correct?</p>\n<p><strong>My main question</strong>: Given we only have a pointer to the brand property, are the memory savings from removing the <code>brand</code> property fairly small? i.e. if I remove the <code>String brand</code> property from the <code>Car</code> I'm not going to save much in terms of memory despite having millions of <code>Car</code> instances?</p>\n<p><strong>bonus point:</strong> how much memory might I save by removing (?1 million) pointers from the memory stack?</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":1,"creation_date":1642294071,"post_id":70721273,"comment_id":125033036,"body_markdown":"You are creating the `Gson` instance with `FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES`, however the property names in JSON are camel case. This might be the reason why deserialization of properties like `responseSummary` does not work because Gson is expecting `response_summary` (unless these fields are annotated with `@SerializedName`).","body":"You are creating the <code>Gson</code> instance with <code>FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES</code>, however the property names in JSON are camel case. This might be the reason why deserialization of properties like <code>responseSummary</code> does not work because Gson is expecting <code>response_summary</code> (unless these fields are annotated with <code>@SerializedName</code>)."},{"owner":{"account_id":3118514,"reputation":317,"user_id":2638788,"accept_rate":15,"display_name":"Tloz"},"score":1,"creation_date":1642361910,"post_id":70721273,"comment_id":125045137,"body_markdown":"Thanks @Marcono1234 ! That was the issue! Whoever downvoted this question has some serious issue -.- it was a genuine question and I provided quite an indepth amount of info","body":"Thanks @Marcono1234 ! That was the issue! Whoever downvoted this question has some serious issue -.- it was a genuine question and I provided quite an indepth amount of info"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1642441834,"post_id":70721273,"comment_id":125066646,"body_markdown":"Glad to hear to that this solved your issue. I have added it as proper answer now to avoid that this question appears as unanswered.","body":"Glad to hear to that this solved your issue. I have added it as proper answer now to avoid that this question appears as unanswered."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1642442067,"post_id":70721273,"comment_id":125066705,"body_markdown":"It&#39;s possible that the downvote was due to inadequate research to narrow the problem down. It&#39;s got nothing to do with the mocking part as far as I can see - you could easily have reproduced the problem in a [mcve] with a shorter piece of JSON. That would have been a clearer question.","body":"It&#39;s possible that the downvote was due to inadequate research to narrow the problem down. It&#39;s got nothing to do with the mocking part as far as I can see - you could easily have reproduced the problem in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with a shorter piece of JSON. That would have been a clearer question."}],"answers":[{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642441736,"creation_date":1642441736,"answer_id":70745533,"question_id":70721273,"body_markdown":"You are creating the Gson instance with `FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES`, however the property names in your JSON data are camel case. This might be the reason why deserialization of properties like `responseSummary` does not work because Gson is expecting `response_summary` (unless these fields are annotated with [`@SerializedName`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/SerializedName.html)).","title":"Why is gson not able to convert this properly","body":"<p>You are creating the Gson instance with <code>FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES</code>, however the property names in your JSON data are camel case. This might be the reason why deserialization of properties like <code>responseSummary</code> does not work because Gson is expecting <code>response_summary</code> (unless these fields are annotated with <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/SerializedName.html\" rel=\"nofollow noreferrer\"><code>@SerializedName</code></a>).</p>\n"}],"owner":{"account_id":3118514,"reputation":317,"user_id":2638788,"accept_rate":15,"display_name":"Tloz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":489,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1642441736,"creation_date":1642248509,"question_id":70721273,"body_markdown":"I have the following object in a json string:\r\n\r\n    {\r\n      &quot;links&quot;: {},\r\n      &quot;apiResponseInfo&quot;: null,\r\n      &quot;id&quot;: &quot;6a88e822-d0dd-41be-be05-da8e55b99501&quot;,\r\n      &quot;actionId&quot;: null,\r\n      &quot;amount&quot;: 0,\r\n      &quot;currency&quot;: null,\r\n      &quot;approved&quot;: false,\r\n      &quot;status&quot;: &quot;Declined&quot;,\r\n      &quot;authCode&quot;: &quot;auth code&quot;,\r\n      &quot;responseCode&quot;: &quot;30041&quot;,\r\n      &quot;responseSummary&quot;: &quot;Card is lost/stolen&quot;,\r\n      &quot;threeDS&quot;: null,\r\n      &quot;risk&quot;: null,\r\n      &quot;source&quot;: {\r\n        &quot;id&quot;: &quot;src_321435425&quot;,\r\n        &quot;type&quot;: &quot;card&quot;,\r\n        &quot;billingAddress&quot;: null,\r\n        &quot;phone&quot;: null,\r\n        &quot;expiryMonth&quot;: 0,\r\n        &quot;expiryYear&quot;: 0,\r\n        &quot;name&quot;: null,\r\n        &quot;scheme&quot;: null,\r\n        &quot;last4&quot;: null,\r\n        &quot;fingerprint&quot;: null,\r\n        &quot;bin&quot;: null,\r\n        &quot;cardType&quot;: null,\r\n        &quot;cardCategory&quot;: null,\r\n        &quot;issuer&quot;: null,\r\n        &quot;issuerCountry&quot;: null,\r\n        &quot;productId&quot;: null,\r\n        &quot;productType&quot;: null,\r\n        &quot;avsCheck&quot;: &quot;D&quot;,\r\n        &quot;cvvCheck&quot;: null,\r\n        &quot;payouts&quot;: null,\r\n        &quot;fastFunds&quot;: null,\r\n        &quot;paymentAccountReference&quot;: null\r\n      },\r\n      &quot;destination&quot;: null,\r\n      &quot;customer&quot;: null,\r\n      &quot;processedOn&quot;: null,\r\n      &quot;reference&quot;: null,\r\n      &quot;eci&quot;: null,\r\n      &quot;schemeId&quot;: null,\r\n      &quot;actionsLink&quot;: null,\r\n      &quot;captureLink&quot;: null,\r\n      &quot;voidLink&quot;: null,\r\n      &quot;selfLink&quot;: null\r\n    }\r\n\r\nI am using the sdk from [Checkout][1] (version 3.4.0). Currently writing some integration tests. Essentially I have a mock server and have stubbed the response that the sdk calls and when my code calls a method in that sdk. The above is my mocked response.\r\n\r\nBut I notice that my code is not getting the mocked response despite the logs telling me that my mock server is returning my mocked response based on the request the sdk attempted. What gets returned is just some fields populated (such as the `id` but not the `responseSummary` or `responseCode`) on the object.\r\n\r\nHaving debugged it further, I can see where the mismatch is occuring:\r\n\r\nThis method is in the SDK:\r\n\r\n    private &lt;T&gt; T deserialize(Transport.Response response, Class&lt;T&gt; responseType) {\r\n        T result = serializer.fromJson(response.getBody(), responseType);\r\n        //a few small business logic here but nothing special\r\n        return result;\r\n    }\r\n\r\nWhen I debug, I can see the `response` argument contains my mocked response which is good and the `responseType` argument is the correct class im expecting. But after the serialization, the `result` variable contains not the same fields as my mocked response.\r\nThe `serializer` object uses Gson to deserialise it.. nothing special (it using the gson.fromJson() method).. but I can see the gson is set up with a few configs:\r\n\r\n\r\n        private static final Gson DEFAULT_GSON = new GsonBuilder()\r\n            .registerTypeAdapter(LocalDate.class, (JsonSerializer&lt;LocalDate&gt;) (LocalDate date, Type typeOfSrc, JsonSerializationContext context) -&gt;\r\n                    new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE)))\r\n            .registerTypeAdapter(Instant.class, (JsonSerializer&lt;Instant&gt;) (Instant date, Type typeOfSrc, JsonSerializationContext context) -&gt;\r\n                    new JsonPrimitive(date.toString()))\r\n            .registerTypeAdapter(LocalDate.class, (JsonDeserializer&lt;LocalDate&gt;) (JsonElement json, Type typeOfSrc, JsonDeserializationContext context) -&gt;\r\n                    LocalDate.parse(json.getAsString(), DateTimeFormatter.ISO_LOCAL_DATE))\r\n            .registerTypeAdapter(Instant.class, (JsonDeserializer&lt;Instant&gt;) (JsonElement json, Type typeOfSrc, JsonDeserializationContext context) -&gt;\r\n                    Instant.parse(json.getAsString()))\r\n            .registerTypeAdapterFactory(RuntimeTypeAdapterFactory.of(ResponseSource.class, &quot;type&quot;, true, AlternativePaymentSourceResponse.class)\r\n                    .registerSubtype(CardSourceResponse.class, CardSource.TYPE_NAME))\r\n            .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\r\n            .create();\r\n\r\n Does anyone know where I can how i can overcome this or what I might be doing wrong?\r\n\r\n  [1]: https://www.checkout.com/","title":"Why is gson not able to convert this properly","body":"<p>I have the following object in a json string:</p>\n<pre><code>{\n  &quot;links&quot;: {},\n  &quot;apiResponseInfo&quot;: null,\n  &quot;id&quot;: &quot;6a88e822-d0dd-41be-be05-da8e55b99501&quot;,\n  &quot;actionId&quot;: null,\n  &quot;amount&quot;: 0,\n  &quot;currency&quot;: null,\n  &quot;approved&quot;: false,\n  &quot;status&quot;: &quot;Declined&quot;,\n  &quot;authCode&quot;: &quot;auth code&quot;,\n  &quot;responseCode&quot;: &quot;30041&quot;,\n  &quot;responseSummary&quot;: &quot;Card is lost/stolen&quot;,\n  &quot;threeDS&quot;: null,\n  &quot;risk&quot;: null,\n  &quot;source&quot;: {\n    &quot;id&quot;: &quot;src_321435425&quot;,\n    &quot;type&quot;: &quot;card&quot;,\n    &quot;billingAddress&quot;: null,\n    &quot;phone&quot;: null,\n    &quot;expiryMonth&quot;: 0,\n    &quot;expiryYear&quot;: 0,\n    &quot;name&quot;: null,\n    &quot;scheme&quot;: null,\n    &quot;last4&quot;: null,\n    &quot;fingerprint&quot;: null,\n    &quot;bin&quot;: null,\n    &quot;cardType&quot;: null,\n    &quot;cardCategory&quot;: null,\n    &quot;issuer&quot;: null,\n    &quot;issuerCountry&quot;: null,\n    &quot;productId&quot;: null,\n    &quot;productType&quot;: null,\n    &quot;avsCheck&quot;: &quot;D&quot;,\n    &quot;cvvCheck&quot;: null,\n    &quot;payouts&quot;: null,\n    &quot;fastFunds&quot;: null,\n    &quot;paymentAccountReference&quot;: null\n  },\n  &quot;destination&quot;: null,\n  &quot;customer&quot;: null,\n  &quot;processedOn&quot;: null,\n  &quot;reference&quot;: null,\n  &quot;eci&quot;: null,\n  &quot;schemeId&quot;: null,\n  &quot;actionsLink&quot;: null,\n  &quot;captureLink&quot;: null,\n  &quot;voidLink&quot;: null,\n  &quot;selfLink&quot;: null\n}\n</code></pre>\n<p>I am using the sdk from <a href=\"https://www.checkout.com/\" rel=\"nofollow noreferrer\">Checkout</a> (version 3.4.0). Currently writing some integration tests. Essentially I have a mock server and have stubbed the response that the sdk calls and when my code calls a method in that sdk. The above is my mocked response.</p>\n<p>But I notice that my code is not getting the mocked response despite the logs telling me that my mock server is returning my mocked response based on the request the sdk attempted. What gets returned is just some fields populated (such as the <code>id</code> but not the <code>responseSummary</code> or <code>responseCode</code>) on the object.</p>\n<p>Having debugged it further, I can see where the mismatch is occuring:</p>\n<p>This method is in the SDK:</p>\n<pre><code>private &lt;T&gt; T deserialize(Transport.Response response, Class&lt;T&gt; responseType) {\n    T result = serializer.fromJson(response.getBody(), responseType);\n    //a few small business logic here but nothing special\n    return result;\n}\n</code></pre>\n<p>When I debug, I can see the <code>response</code> argument contains my mocked response which is good and the <code>responseType</code> argument is the correct class im expecting. But after the serialization, the <code>result</code> variable contains not the same fields as my mocked response.\nThe <code>serializer</code> object uses Gson to deserialise it.. nothing special (it using the gson.fromJson() method).. but I can see the gson is set up with a few configs:</p>\n<pre><code>    private static final Gson DEFAULT_GSON = new GsonBuilder()\n        .registerTypeAdapter(LocalDate.class, (JsonSerializer&lt;LocalDate&gt;) (LocalDate date, Type typeOfSrc, JsonSerializationContext context) -&gt;\n                new JsonPrimitive(date.format(DateTimeFormatter.ISO_LOCAL_DATE)))\n        .registerTypeAdapter(Instant.class, (JsonSerializer&lt;Instant&gt;) (Instant date, Type typeOfSrc, JsonSerializationContext context) -&gt;\n                new JsonPrimitive(date.toString()))\n        .registerTypeAdapter(LocalDate.class, (JsonDeserializer&lt;LocalDate&gt;) (JsonElement json, Type typeOfSrc, JsonDeserializationContext context) -&gt;\n                LocalDate.parse(json.getAsString(), DateTimeFormatter.ISO_LOCAL_DATE))\n        .registerTypeAdapter(Instant.class, (JsonDeserializer&lt;Instant&gt;) (JsonElement json, Type typeOfSrc, JsonDeserializationContext context) -&gt;\n                Instant.parse(json.getAsString()))\n        .registerTypeAdapterFactory(RuntimeTypeAdapterFactory.of(ResponseSource.class, &quot;type&quot;, true, AlternativePaymentSourceResponse.class)\n                .registerSubtype(CardSourceResponse.class, CardSource.TYPE_NAME))\n        .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\n        .create();\n</code></pre>\n<p>Does anyone know where I can how i can overcome this or what I might be doing wrong?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642430058,"post_id":70743008,"comment_id":125062068,"body_markdown":"Can you share the code?","body":"Can you share the code?"},{"owner":{"account_id":22796783,"reputation":127,"user_id":16950216,"display_name":"Siddharth Bhattacharjee"},"score":1,"creation_date":1642430156,"post_id":70743008,"comment_id":125062114,"body_markdown":"Can you attach the java files, It looks like a java error, Possibly in java code somewhere, it is trying to int cast a long in the wrong way.","body":"Can you attach the java files, It looks like a java error, Possibly in java code somewhere, it is trying to int cast a long in the wrong way."},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":0,"creation_date":1642430544,"post_id":70743008,"comment_id":125062296,"body_markdown":"@SujalKumar I don&#39;t know which part of the code is causing the problem to share it.","body":"@SujalKumar I don&#39;t know which part of the code is causing the problem to share it."},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":0,"creation_date":1642430641,"post_id":70743008,"comment_id":125062349,"body_markdown":"@SiddharthBhattacharjee Actually I have no java code. The project is kotlin.","body":"@SiddharthBhattacharjee Actually I have no java code. The project is kotlin."},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642430678,"post_id":70743008,"comment_id":125062362,"body_markdown":"Does your release build have proguard enabled?","body":"Does your release build have proguard enabled?"},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":0,"creation_date":1642430792,"post_id":70743008,"comment_id":125062412,"body_markdown":"@SujalKumar Yes, it has. And the debug build does not have proguard enabled. Is it a problem with proguard?","body":"@SujalKumar Yes, it has. And the debug build does not have proguard enabled. Is it a problem with proguard?"},{"owner":{"account_id":22796783,"reputation":127,"user_id":16950216,"display_name":"Siddharth Bhattacharjee"},"score":1,"creation_date":1642430891,"post_id":70743008,"comment_id":125062460,"body_markdown":"@moghaf It would be helpful if you attach your kotlin classes then, It is very difficult to help without seeing any code.","body":"@moghaf It would be helpful if you attach your kotlin classes then, It is very difficult to help without seeing any code."},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642430925,"post_id":70743008,"comment_id":125062474,"body_markdown":"I am not completely sure but there might be a 3rd party library in your project which needs to be excluded from the proguard optimization to work properly. A similar thing happened to me few days ago and I added some rules in the proguard file and it worked.","body":"I am not completely sure but there might be a 3rd party library in your project which needs to be excluded from the proguard optimization to work properly. A similar thing happened to me few days ago and I added some rules in the proguard file and it worked."},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642430985,"post_id":70743008,"comment_id":125062503,"body_markdown":"For now, try to disable proguard and test release build in your device.","body":"For now, try to disable proguard and test release build in your device."},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":0,"creation_date":1642431222,"post_id":70743008,"comment_id":125062594,"body_markdown":"@SujalKumar Ok, I will try to exclude the libraries one by one to find out if there is any problem with them. But if it is a problem with the casting thing, shouldn&#39;t it encounter the exception in any android device?","body":"@SujalKumar Ok, I will try to exclude the libraries one by one to find out if there is any problem with them. But if it is a problem with the casting thing, shouldn&#39;t it encounter the exception in any android device?"},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642431346,"post_id":70743008,"comment_id":125062647,"body_markdown":"You got a point but I really can&#39;t predict without knowing the flow of the code.","body":"You got a point but I really can&#39;t predict without knowing the flow of the code."},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642431453,"post_id":70743008,"comment_id":125062682,"body_markdown":"All the information provided by you until now hints that the culprit is a 3rd party library.","body":"All the information provided by you until now hints that the culprit is a 3rd party library."},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":0,"creation_date":1642432075,"post_id":70743008,"comment_id":125062914,"body_markdown":"@SujalKumar After commenting out the proguard line in the build.gradle for release build apparently the problem is solved. I think you are right about the 3rd party libraries. I&#39;m going to exclude them one by one. Thanks.","body":"@SujalKumar After commenting out the proguard line in the build.gradle for release build apparently the problem is solved. I think you are right about the 3rd party libraries. I&#39;m going to exclude them one by one. Thanks."},{"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"score":1,"creation_date":1642441767,"post_id":70743008,"comment_id":125066632,"body_markdown":"@SujalKumar Your solution to disable proguard led me to remove proguard lines one by one(after library exclusion didn&#39;t solve the problem) to test if it gets to work and yes it worked. Thanks.","body":"@SujalKumar Your solution to disable proguard led me to remove proguard lines one by one(after library exclusion didn&#39;t solve the problem) to test if it gets to work and yes it worked. Thanks."},{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1642477600,"post_id":70743008,"comment_id":125074853,"body_markdown":"Nice to hear about that :)","body":"Nice to hear about that :)"}],"answers":[{"tags":[],"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642441630,"creation_date":1642441630,"answer_id":70745516,"question_id":70743008,"body_markdown":"For anyone who may have this problem, in my case, it has been solved by removing `-overloadaggressively` from the `proguard-rules.pro` file.","title":"Android java.lang.IllegalArgumentException &quot;Invalid primitive conversion from long to int&quot; Exception just in release build","body":"<p>For anyone who may have this problem, in my case, it has been solved by removing <code>-overloadaggressively</code> from the <code>proguard-rules.pro</code> file.</p>\n"}],"owner":{"account_id":1802513,"reputation":43,"user_id":1640475,"accept_rate":25,"display_name":"moghaf"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":904,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70745516,"answer_count":1,"score":1,"last_activity_date":1642441630,"creation_date":1642429907,"question_id":70743008,"body_markdown":"I&#39;m developing an android application using `kotlin` and everything was fine till now that I&#39;m getting the `java.lang.IllegalArgumentException: Invalid primitive conversion from long to int` exception on some android devices.\r\n\r\nThe exception is occurring just in the release build of the application and unfortunately, I have no clue how to debug or properly analyze the stack trace to get to know the exact problem.\r\n\r\nThe stack trace is as below:\r\n```\r\njava.lang.IllegalArgumentException: Invalid primitive conversion from long to int\r\n    at java.lang.reflect.Field.getInt(Field.java)\r\n    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:946)\r\n    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:360)\r\n    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1054)\r\n    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1384)\r\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1651)\r\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\r\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\r\n    at android.os.Parcel.writeSerializable(Parcel.java:1463)\r\n    at android.os.Parcel.writeValue(Parcel.java:1416)\r\n    at android.os.Parcel.writeArrayMapInternal(Parcel.java:686)\r\n    at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1376)\r\n    at android.os.Bundle.writeToParcel(Bundle.java:1079)\r\n    at android.os.Parcel.writeBundle(Parcel.java:711)\r\n    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:3216)\r\n    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3496)\r\n    at android.os.Handler.handleCallback(Handler.java:742)\r\n    at android.os.Handler.dispatchMessage(Handler.java:95)\r\n    at android.os.Looper.loop(Looper.java:157)\r\n    at android.app.ActivityThread.main(ActivityThread.java:5653)\r\n    at java.lang.reflect.Method.invoke(Method.java)\r\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:746)\r\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)\r\n```\r\n\r\nAny help would be appreciated. ","title":"Android java.lang.IllegalArgumentException &quot;Invalid primitive conversion from long to int&quot; Exception just in release build","body":"<p>I'm developing an android application using <code>kotlin</code> and everything was fine till now that I'm getting the <code>java.lang.IllegalArgumentException: Invalid primitive conversion from long to int</code> exception on some android devices.</p>\n<p>The exception is occurring just in the release build of the application and unfortunately, I have no clue how to debug or properly analyze the stack trace to get to know the exact problem.</p>\n<p>The stack trace is as below:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid primitive conversion from long to int\n    at java.lang.reflect.Field.getInt(Field.java)\n    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:946)\n    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:360)\n    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1054)\n    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1384)\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1651)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\n    at android.os.Parcel.writeSerializable(Parcel.java:1463)\n    at android.os.Parcel.writeValue(Parcel.java:1416)\n    at android.os.Parcel.writeArrayMapInternal(Parcel.java:686)\n    at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1376)\n    at android.os.Bundle.writeToParcel(Bundle.java:1079)\n    at android.os.Parcel.writeBundle(Parcel.java:711)\n    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:3216)\n    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3496)\n    at android.os.Handler.handleCallback(Handler.java:742)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:157)\n    at android.app.ActivityThread.main(ActivityThread.java:5653)\n    at java.lang.reflect.Method.invoke(Method.java)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:746)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)\n</code></pre>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","compare","equals"],"answers":[{"tags":[],"owner":{"account_id":23594916,"reputation":109,"user_id":17632159,"display_name":"roksui"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641977953,"creation_date":1641977050,"answer_id":70678544,"question_id":70678451,"body_markdown":"The most naive way would be to iterate over the values of the first map and check if there is an equal value in the second map.\r\n\r\nConsidering the two maps store keys and values of type String, the code looks something like this.\r\n\r\n```java\r\nfor (String s1 : map1.keySet()) {\r\n  for (String s2 : map2.keySet()) {\r\n    if (map1.get(s1).equals(map2.get(s2))) {\r\n      // print or do whatever with keys &amp; the value\r\n      // also, if you just need ONE match, then break out of inner loop here\r\n    }\r\n  }\r\n}\r\n```","title":"Comparing two hashmaps in java and showing the values","body":"<p>The most naive way would be to iterate over the values of the first map and check if there is an equal value in the second map.</p>\n<p>Considering the two maps store keys and values of type String, the code looks something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (String s1 : map1.keySet()) {\n  for (String s2 : map2.keySet()) {\n    if (map1.get(s1).equals(map2.get(s2))) {\n      // print or do whatever with keys &amp; the value\n      // also, if you just need ONE match, then break out of inner loop here\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21498421,"reputation":43,"user_id":15843067,"display_name":"CoffeeToCodette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642441572,"creation_date":1642441572,"answer_id":70745504,"question_id":70678451,"body_markdown":"You say that you want to store both values in MAP3. I then wonder which key you want to use. From your words, I assume that if the value of s1 and s2 are equal, then the keys s1 and s2 are equal, too. Otherwise, it would make no sense that a pair of values from map1 and map2 has &quot;a key&quot;.\r\nFurthermore, you mention a fourth map MAP_SAP in the if-statement. I guess you mean MAP1, otherwise you have to make sure that MAP_SAP really contains the key s1 you got from MAP1.\r\n\r\n```\r\n//initialize MAP3 before starting the loops\r\n\r\nfor (String  s1 : MAP1.keySet()){\r\n    for (String  s2 : MAP2.keySet()) {\r\n\r\n      if (MAP1.get(s1).equals(MAP2.get(s2))){\r\n\r\n         String key = s1; //or another key e.g. s1+s2\r\n         String value = MAP1.get(s1);\r\n\r\n         MAP3.put(key, value);\r\n      }\r\n    }\r\n}\r\n\r\nprint(&quot;eee:&quot;);\r\nfor (Map.Entry entry : MAP3.entrySet()){\r\n     System.out.println(&quot;Number: &quot; + entry.getValue() + &quot;, ID: &quot; + entry.getKey() );\r\n}\r\n//alternatively you can use \r\n// MAP3.forEach((key, value) -&gt; System.out.println(&quot;Number: &quot; + value + &quot;, ID: &quot; + key));\r\n&#180;&#180;&#180;","title":"Comparing two hashmaps in java and showing the values","body":"<p>You say that you want to store both values in MAP3. I then wonder which key you want to use. From your words, I assume that if the value of s1 and s2 are equal, then the keys s1 and s2 are equal, too. Otherwise, it would make no sense that a pair of values from map1 and map2 has &quot;a key&quot;.\nFurthermore, you mention a fourth map MAP_SAP in the if-statement. I guess you mean MAP1, otherwise you have to make sure that MAP_SAP really contains the key s1 you got from MAP1.</p>\n<pre><code>//initialize MAP3 before starting the loops\n\nfor (String  s1 : MAP1.keySet()){\n    for (String  s2 : MAP2.keySet()) {\n\n      if (MAP1.get(s1).equals(MAP2.get(s2))){\n\n         String key = s1; //or another key e.g. s1+s2\n         String value = MAP1.get(s1);\n\n         MAP3.put(key, value);\n      }\n    }\n}\n\nprint(&quot;eee:&quot;);\nfor (Map.Entry entry : MAP3.entrySet()){\n     System.out.println(&quot;Number: &quot; + entry.getValue() + &quot;, ID: &quot; + entry.getKey() );\n}\n//alternatively you can use \n// MAP3.forEach((key, value) -&gt; System.out.println(&quot;Number: &quot; + value + &quot;, ID: &quot; + key));\n´´´\n</code></pre>\n"}],"owner":{"account_id":23889630,"reputation":1,"user_id":17889450,"display_name":"pawlixo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":856,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1642441572,"creation_date":1641976582,"question_id":70678451,"body_markdown":"I would like to compare 2 hashmaps and if the values ​​are the same, list these values ​​along with the key. How can I do it, because the function `equals()` returns true or false :/\r\n\r\nThanks in advance for your help :D \r\n\r\n\r\nThe code below is unfortunately not working, why?\r\n\r\n    for (String  s1 : MAP1.keySet()) \r\n        {\r\n        for (String  s2 : MAP2.keySet()) \r\n        {\r\n          if (MAP_SAP.get(s1).equals(MAP2.get(s2))) \r\n            {\r\n             MAP3.put(key,value); // I believe that it has to be added otherwise\r\n    \r\n         \r\n                }\r\n            }\r\n     }\r\n      print(&quot;eee:&quot;);\r\n       for (Map.Entry entry : MAP3.entrySet())\r\n     {\r\n         \r\n      System.out.println(&quot;Numer: &quot; + entry.getValue() + &quot;, ID: &quot; + entry.getKey() );\r\n     } \r\n\r\n","title":"Comparing two hashmaps in java and showing the values","body":"<p>I would like to compare 2 hashmaps and if the values ​​are the same, list these values ​​along with the key. How can I do it, because the function <code>equals()</code> returns true or false :/</p>\n<p>Thanks in advance for your help :D</p>\n<p>The code below is unfortunately not working, why?</p>\n<pre><code>for (String  s1 : MAP1.keySet()) \n    {\n    for (String  s2 : MAP2.keySet()) \n    {\n      if (MAP_SAP.get(s1).equals(MAP2.get(s2))) \n        {\n         MAP3.put(key,value); // I believe that it has to be added otherwise\n\n     \n            }\n        }\n }\n  print(&quot;eee:&quot;);\n   for (Map.Entry entry : MAP3.entrySet())\n {\n     \n  System.out.println(&quot;Numer: &quot; + entry.getValue() + &quot;, ID: &quot; + entry.getKey() );\n } \n</code></pre>\n"},{"tags":["java","maven","tomcat","spring-boot"],"comments":[{"owner":{"account_id":5986997,"reputation":6892,"user_id":4704303,"display_name":"Monica Granbois"},"score":0,"creation_date":1461560640,"post_id":36832273,"comment_id":61235426,"body_markdown":"Possible duplicate of [Spring Boot - how to configure port](http://stackoverflow.com/questions/21083170/spring-boot-how-to-configure-port)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/21083170/spring-boot-how-to-configure-port\">Spring Boot - how to configure port</a>"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1461646887,"creation_date":1461560432,"answer_id":36832311,"question_id":36832273,"body_markdown":"[27.3.4 Customizing embedded servlet containers](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-customizing-embedded-containers) says (in part)\n\n&gt; Common servlet container settings can be configured using Spring Environment properties. Usually you would define the properties in your `application.properties` file.\n&gt;\n&gt; Common server settings include:\n&gt;\n&gt; *   Network settings: listen port for incoming HTTP requests (`server.port`), interface address to bind to `server.address`, etc.\n\nSo, create a `src/main/resources/application.properties` and add\n\n     server.port=${port:8081}\n\n(or whatever port you want).","title":"How to change port number for tomcat server using maven","body":"<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-customizing-embedded-containers\" rel=\"nofollow noreferrer\">27.3.4 Customizing embedded servlet containers</a> says (in part)</p>\n<blockquote>\n<p>Common servlet container settings can be configured using Spring Environment properties. Usually you would define the properties in your <code>application.properties</code> file.</p>\n<p>Common server settings include:</p>\n<ul>\n<li>Network settings: listen port for incoming HTTP requests (<code>server.port</code>), interface address to bind to <code>server.address</code>, etc.</li>\n</ul>\n</blockquote>\n<p>So, create a <code>src/main/resources/application.properties</code> and add</p>\n<pre><code> server.port=${port:8081}\n</code></pre>\n<p>(or whatever port you want).</p>\n"},{"tags":[],"owner":{"account_id":5373310,"reputation":343,"user_id":4281115,"accept_rate":0,"display_name":"Sumeet Tiwari"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1461563489,"creation_date":1461563489,"answer_id":36832920,"question_id":36832273,"body_markdown":"we can change in application.properties of spring boot application like this\r\n\r\nserver.port=${port:8080}","title":"How to change port number for tomcat server using maven","body":"<p>we can change in application.properties of spring boot application like this</p>\n\n<p>server.port=${port:8080}</p>\n"},{"tags":[],"owner":{"account_id":8097897,"reputation":24,"user_id":6101813,"display_name":"Sree Hari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461567119,"creation_date":1461567119,"answer_id":36833764,"question_id":36832273,"body_markdown":" - Go to( your Tomcat destination)\r\n - C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\conf\r\n - Inside conf you will find server.xml.\r\n - You can change the connector port to something like this.\r\n\r\nConnector port=&quot;8081&quot; (port number that you wish)\r\n","title":"How to change port number for tomcat server using maven","body":"<ul>\n<li>Go to( your Tomcat destination)</li>\n<li>C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\conf</li>\n<li>Inside conf you will find server.xml.</li>\n<li>You can change the connector port to something like this.</li>\n</ul>\n\n<p>Connector port=\"8081\" (port number that you wish)</p>\n"},{"tags":[],"owner":{"account_id":9162680,"reputation":3767,"user_id":6813506,"accept_rate":22,"display_name":"Rohit Gaikwad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642441344,"creation_date":1642441344,"answer_id":70745463,"question_id":36832273,"body_markdown":"Make sure that you do **`Update`** your Maven Project as well when a new `application.properties` file is created at `src/main/resources`. Otherwise, sometimes the changes may not get reflect at your end.  \r\n\r\n**Update Maven Project:**  \r\n`Right Click Your Maven Project` **-&gt;**  `Maven` **-&gt;** `Update Project`\r\n\r\n**Example port number setting in application.properties file:**\r\n\r\n    server.port = 4444\r\n\r\n**Note:**   \r\n Update Maven project may not be required each time you change the port.","title":"How to change port number for tomcat server using maven","body":"<p>Make sure that you do <strong><code>Update</code></strong> your Maven Project as well when a new <code>application.properties</code> file is created at <code>src/main/resources</code>. Otherwise, sometimes the changes may not get reflect at your end.</p>\n<p><strong>Update Maven Project:</strong><br />\n<code>Right Click Your Maven Project</code> <strong>-&gt;</strong>  <code>Maven</code> <strong>-&gt;</strong> <code>Update Project</code></p>\n<p><strong>Example port number setting in application.properties file:</strong></p>\n<pre><code>server.port = 4444\n</code></pre>\n<p><strong>Note:</strong><br />\nUpdate Maven project may not be required each time you change the port.</p>\n"}],"owner":{"account_id":4466046,"reputation":25,"user_id":3633663,"display_name":"Mercurial"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18277,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1642441344,"creation_date":1461560197,"question_id":36832273,"body_markdown":"I am writing a Rest service using spring mvc framework and maven. I am using tomcat server for now. My pom for the project is \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0     http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;\r\n    &lt;version&gt;0.1.0&lt;/version&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n          \r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n      \t\r\n        &lt;/plugins&gt;\r\n        \r\n    &lt;/build&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-releases&lt;/id&gt;\r\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-releases&lt;/id&gt;\r\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n    &lt;/project&gt;\r\nThis project uses tomcat server and runs on port 8080 by default. can anyone help me understand from where it picks up this configuration and how to change the port on which tomcat runs.\r\n\r\nMy preliminary analysis tells me there is some configuration done in spring.boot plugin that I need to override in my pom. Can anyone help me in overriding tomcat default port and run it on some other port.","title":"How to change port number for tomcat server using maven","body":"<p>I am writing a Rest service using spring mvc framework and maven. I am using tomcat server for now. My pom for the project is </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0     http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;org.springframework&lt;/groupId&gt;\n&lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;\n&lt;version&gt;0.1.0&lt;/version&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n\n&lt;/build&gt;\n\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-releases&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-releases&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This project uses tomcat server and runs on port 8080 by default. can anyone help me understand from where it picks up this configuration and how to change the port on which tomcat runs.</p>\n\n<p>My preliminary analysis tells me there is some configuration done in spring.boot plugin that I need to override in my pom. Can anyone help me in overriding tomcat default port and run it on some other port.</p>\n"},{"tags":["java","sql-server","android-studio","jtds"],"comments":[{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1642440760,"post_id":70745340,"comment_id":125066329,"body_markdown":"FYI, SQL Server isn&#39;t SSMS. SSMS stands for SQL Server Management Studio; which is an IDE for SQL Server.","body":"FYI, SQL Server isn&#39;t SSMS. SSMS stands for SQL Server Management Studio; which is an IDE for SQL Server."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1642455913,"post_id":70745340,"comment_id":125070883,"body_markdown":"Before you get too invested in this approach please consider the following: do you really want to put your SQL Server on the public internet so that mobile devices (and all and sundry) can access it directly? Almost always you want to put some kind of web API in front of your SQL Server and have your applications use that instead. This also helps to decouple from SQL Server so that you can move to or mix in other technologies on the backend.","body":"Before you get too invested in this approach please consider the following: do you really want to put your SQL Server on the public internet so that mobile devices (and all and sundry) can access it directly? Almost always you want to put some kind of web API in front of your SQL Server and have your applications use that instead. This also helps to decouple from SQL Server so that you can move to or mix in other technologies on the backend."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1642456105,"post_id":70745340,"comment_id":125070937,"body_markdown":"See also previous SO question/answer, [Java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver On Android](https://stackoverflow.com/questions/12295264/java-lang-classnotfoundexception-net-sourceforge-jtds-jdbc-driver-on-android).","body":"See also previous SO question/answer, <a href=\"https://stackoverflow.com/questions/12295264/java-lang-classnotfoundexception-net-sourceforge-jtds-jdbc-driver-on-android\">Java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver On Android</a>."}],"owner":{"account_id":23272049,"reputation":1,"user_id":17356736,"display_name":"Purple TaeTae"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642440875,"creation_date":1642440692,"question_id":70745340,"body_markdown":"I am new to Android and I am trying to connect Android Studio with Microsoft Sql Server using jtds-1.3.1. but I can&#39;t able to connect as it shows me the following error\r\n\r\n`E/java.lang.ClassNotFoundException:&#160;net.sourceforge.jtds.jdbc.Driver`\r\n\r\nI tried all the possible ways as from Google from youtube but still i cant able to solve it. Hope I can find a solution here\r\n\r\n","title":"How to solve java.lang.ClassNotFoundException:&#160;net.sourceforge.jtds.jdbc.Driver Error?","body":"<p>I am new to Android and I am trying to connect Android Studio with Microsoft Sql Server using jtds-1.3.1. but I can't able to connect as it shows me the following error</p>\n<p><code>E/java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver</code></p>\n<p>I tried all the possible ways as from Google from youtube but still i cant able to solve it. Hope I can find a solution here</p>\n"},{"tags":["java","android","callback","android-handler"],"answers":[{"tags":[],"owner":{"account_id":1919838,"reputation":28264,"user_id":1731626,"display_name":"Sergio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642368825,"creation_date":1642368825,"answer_id":70734376,"question_id":70734165,"body_markdown":"Please remove all conditions blocks where you are checking `start_button.isPressed()`, it doesn&#39;t work. You can use additional flag `isRunning` to indicate whether the clock is running or not:\r\n\r\n    private boolean isRunning;\r\n\r\n    start_button.setOnClickListener(view -&gt; {\r\n            if (isRunning) {\r\n                newHandler.removeCallbacks(updateTimerThread);\r\n                start_button.setText(&quot;Start&quot;);\r\n            } else {\r\n                start_time = SystemClock.uptimeMillis();\r\n                start_button.setText(&quot;Stop&quot;);\r\n                newHandler.post(updateTimerThread);\r\n            }\r\n            isRunning = !isRunning;\r\n        });","title":"I can not stop a Runnable using Handler in JAVA","body":"<p>Please remove all conditions blocks where you are checking <code>start_button.isPressed()</code>, it doesn't work. You can use additional flag <code>isRunning</code> to indicate whether the clock is running or not:</p>\n<pre><code>private boolean isRunning;\n\nstart_button.setOnClickListener(view -&gt; {\n        if (isRunning) {\n            newHandler.removeCallbacks(updateTimerThread);\n            start_button.setText(&quot;Start&quot;);\n        } else {\n            start_time = SystemClock.uptimeMillis();\n            start_button.setText(&quot;Stop&quot;);\n            newHandler.post(updateTimerThread);\n        }\n        isRunning = !isRunning;\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20634762,"reputation":66,"user_id":15148740,"display_name":"Joe Vienneau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642368834,"creation_date":1642368834,"answer_id":70734378,"question_id":70734165,"body_markdown":"Your timer needs some state. You could do something like this (add &#39;boolean isActive&#39;):\r\n\r\n```\r\n        Runnable updateTimerThread = new Runnable() {\r\n            boolean isActive = true;\r\n            @Override\r\n            public void run() {\r\n                if (isActive) {\r\n                    time_in_miliseconds = SystemClock.uptimeMillis() - start_time;\r\n                    update_time = time_in_miliseconds + prev_time;\r\n                    // ...\r\n                }\r\n                if (start_button.isPressed()) {\r\n                    isActive = !isActive;\r\n                    // Do some other stuff\r\n                }\r\n            }\r\n        };\r\n```\r\n\r\nOr maybe use the State Pattern.","title":"I can not stop a Runnable using Handler in JAVA","body":"<p>Your timer needs some state. You could do something like this (add 'boolean isActive'):</p>\n<pre><code>        Runnable updateTimerThread = new Runnable() {\n            boolean isActive = true;\n            @Override\n            public void run() {\n                if (isActive) {\n                    time_in_miliseconds = SystemClock.uptimeMillis() - start_time;\n                    update_time = time_in_miliseconds + prev_time;\n                    // ...\n                }\n                if (start_button.isPressed()) {\n                    isActive = !isActive;\n                    // Do some other stuff\n                }\n            }\n        };\n</code></pre>\n<p>Or maybe use the State Pattern.</p>\n"}],"owner":{"account_id":17262181,"reputation":3,"user_id":12499804,"display_name":"Mihai Cozma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70734376,"answer_count":2,"score":0,"last_activity_date":1642440500,"creation_date":1642366921,"question_id":70734165,"body_markdown":"I am trying to build a stopwatch and i have a button named start which starts the counting, after it starts the name of the button changes to stop and when i press stop i want to pause the counting, but when i am trying to run `newHandler.removeCallbacks(updateTimerThread);`the program continues counting, on the reset button this method works.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        Button start_button, reset_button;\r\n        TextView time_view;\r\n        long start_time = 0, time_in_miliseconds = 0, update_time = 0, prev_time = 0;\r\n        final Handler newHandler = new Handler();\r\n\r\n        Runnable updateTimerThread = new Runnable() {\r\n            private boolean isActive;\r\n            @Override\r\n            public void run() {\r\n\r\n                if(isActive)\r\n                {\r\n                    prev_time += time_in_miliseconds;\r\n                    newHandler.removeCallbacks(updateTimerThread);\r\n                    start_button.setText(&quot;Start&quot;);\r\n                    //time_view.setText(&quot;&quot;+save_hour+&quot;:&quot;+String.format(&quot;%2d&quot;,save_min)+&quot;:&quot;+String.format(&quot;%2d&quot;,save_sec)+&quot;.&quot;+String.format(&quot;%3d&quot;,save_centisec));\r\n                }\r\n                else\r\n                {\r\n                    time_in_miliseconds = SystemClock.uptimeMillis() - start_time;\r\n                    update_time = time_in_miliseconds + prev_time;\r\n                    int sec = (int) (update_time / 1000);\r\n                    int min = sec / 60;\r\n                    int hour = (int) sec / 3600;\r\n                    sec %= 60;\r\n                    int centisec = (int) (update_time / 10) % 100;\r\n                    time_view.setText(&quot;&quot;+hour+&quot;:&quot;+String.format(&quot;%2d&quot;,min)+&quot;:&quot;+String.format(&quot;%2d&quot;,sec)+&quot;.&quot;+String.format(&quot;%3d&quot;,centisec));\r\n                    newHandler.postDelayed(this, 10);\r\n                }\r\n                isActive = !isActive;\r\n            }\r\n        };\r\n\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n\r\n            start_button = (Button) findViewById(R.id.start_button);\r\n            reset_button = (Button) findViewById(R.id.reset_button);\r\n            time_view = (TextView) findViewById(R.id.time_view);\r\n\r\n            start_button.setOnClickListener(view -&gt; {\r\n                start_time = SystemClock.uptimeMillis();\r\n                start_button.setText(&quot;Stop&quot;);\r\n                newHandler.postDelayed(updateTimerThread,0);\r\n            });\r\n\r\n            reset_button.setOnClickListener(view -&gt; {\r\n                // Here the Runnable is stopped\r\n                newHandler.removeCallbacks(updateTimerThread);\r\n                start_time = 0;\r\n                prev_time = 0;\r\n                time_view.setText(&quot;0:0:0.0&quot;);\r\n                start_button.setText(&quot;Start&quot;);\r\n            });\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"I can not stop a Runnable using Handler in JAVA","body":"<p>I am trying to build a stopwatch and i have a button named start which starts the counting, after it starts the name of the button changes to stop and when i press stop i want to pause the counting, but when i am trying to run <code>newHandler.removeCallbacks(updateTimerThread);</code>the program continues counting, on the reset button this method works.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n\n    Button start_button, reset_button;\n    TextView time_view;\n    long start_time = 0, time_in_miliseconds = 0, update_time = 0, prev_time = 0;\n    final Handler newHandler = new Handler();\n\n    Runnable updateTimerThread = new Runnable() {\n        private boolean isActive;\n        @Override\n        public void run() {\n\n            if(isActive)\n            {\n                prev_time += time_in_miliseconds;\n                newHandler.removeCallbacks(updateTimerThread);\n                start_button.setText(\"Start\");\n                //time_view.setText(\"\"+save_hour+\":\"+String.format(\"%2d\",save_min)+\":\"+String.format(\"%2d\",save_sec)+\".\"+String.format(\"%3d\",save_centisec));\n            }\n            else\n            {\n                time_in_miliseconds = SystemClock.uptimeMillis() - start_time;\n                update_time = time_in_miliseconds + prev_time;\n                int sec = (int) (update_time / 1000);\n                int min = sec / 60;\n                int hour = (int) sec / 3600;\n                sec %= 60;\n                int centisec = (int) (update_time / 10) % 100;\n                time_view.setText(\"\"+hour+\":\"+String.format(\"%2d\",min)+\":\"+String.format(\"%2d\",sec)+\".\"+String.format(\"%3d\",centisec));\n                newHandler.postDelayed(this, 10);\n            }\n            isActive = !isActive;\n        }\n    };\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        start_button = (Button) findViewById(R.id.start_button);\n        reset_button = (Button) findViewById(R.id.reset_button);\n        time_view = (TextView) findViewById(R.id.time_view);\n\n        start_button.setOnClickListener(view -&gt; {\n            start_time = SystemClock.uptimeMillis();\n            start_button.setText(\"Stop\");\n            newHandler.postDelayed(updateTimerThread,0);\n        });\n\n        reset_button.setOnClickListener(view -&gt; {\n            // Here the Runnable is stopped\n            newHandler.removeCallbacks(updateTimerThread);\n            start_time = 0;\n            prev_time = 0;\n            time_view.setText(\"0:0:0.0\");\n            start_button.setText(\"Start\");\n        });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","recursion","matrix"],"comments":[{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":2,"creation_date":1642440061,"post_id":70745145,"comment_id":125066087,"body_markdown":"You can implement it with iteration, but you would have to maintain a stack yourself for the DFS-search to work. The recursive solution is probably much easier to understand.","body":"You can implement it with iteration, but you would have to maintain a stack yourself for the DFS-search to work. The recursive solution is probably much easier to understand."},{"owner":{"display_name":"user14215102"},"score":0,"creation_date":1642440697,"post_id":70745145,"comment_id":125066311,"body_markdown":"General principle: https://stackoverflow.com/questions/159590/way-to-go-from-recursion-to-iteration","body":"General principle: <a href=\"https://stackoverflow.com/questions/159590/way-to-go-from-recursion-to-iteration\" title=\"way to go from recursion to iteration\">stackoverflow.com/questions/159590/&hellip;</a>"}],"owner":{"account_id":21997973,"reputation":35,"user_id":16270131,"display_name":"c sharp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1642439830,"creation_date":1642439830,"question_id":70745145,"body_markdown":"I am looking at this article: https://www.geeksforgeeks.org/find-all-occurrences-of-the-word-in-a-matrix/?ref=lbp\r\n\r\nand it has this function\r\n```\r\nstatic void DFS(char mat[][], int row, int col,\r\n\t\tint prevRow, int prevCol, char[] word,\r\n\t\tString path, int index, int n)\r\n{\r\n\t// return if current character doesn&#39;t match with\r\n\t// the next character in the word\r\n\tif (index &gt; n || mat[row][col] != word[index])\r\n\t\treturn;\r\n\r\n\t// append current character position to path\r\n\tpath += (word[index]) + &quot;(&quot; + String.valueOf(row)\r\n\t\t\t+ &quot;, &quot; + String.valueOf(col) + &quot;) &quot;;\r\n\r\n\t// current character matches with the last character\r\n\t// in the word\r\n\tif (index == n)\r\n\t{\r\n\t\tSystem.out.print(path +&quot;\\n&quot;);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Recur for all connected neighbours\r\n\tfor (int k = 0; k &lt; 8; ++k)\r\n\t\tif (isvalid(row + rowNum[k], col + colNum[k],\r\n\t\t\t\t\tprevRow, prevCol))\r\n\r\n\t\t\tDFS(mat, row + rowNum[k], col + colNum[k],\r\n\t\t\t\trow, col, word, path, index + 1, n);\r\n```\r\nwhere it calls itself, is there a way around this?","title":"How to avoid recursion (i,e restarting function) in java","body":"<p>I am looking at this article: <a href=\"https://www.geeksforgeeks.org/find-all-occurrences-of-the-word-in-a-matrix/?ref=lbp\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/find-all-occurrences-of-the-word-in-a-matrix/?ref=lbp</a></p>\n<p>and it has this function</p>\n<pre><code>static void DFS(char mat[][], int row, int col,\n        int prevRow, int prevCol, char[] word,\n        String path, int index, int n)\n{\n    // return if current character doesn't match with\n    // the next character in the word\n    if (index &gt; n || mat[row][col] != word[index])\n        return;\n\n    // append current character position to path\n    path += (word[index]) + &quot;(&quot; + String.valueOf(row)\n            + &quot;, &quot; + String.valueOf(col) + &quot;) &quot;;\n\n    // current character matches with the last character\n    // in the word\n    if (index == n)\n    {\n        System.out.print(path +&quot;\\n&quot;);\n        return;\n    }\n\n    // Recur for all connected neighbours\n    for (int k = 0; k &lt; 8; ++k)\n        if (isvalid(row + rowNum[k], col + colNum[k],\n                    prevRow, prevCol))\n\n            DFS(mat, row + rowNum[k], col + colNum[k],\n                row, col, word, path, index + 1, n);\n</code></pre>\n<p>where it calls itself, is there a way around this?</p>\n"},{"tags":["java","maven","selenium"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1564951075,"creation_date":1564830504,"answer_id":57337759,"question_id":57325504,"body_markdown":"Given you have [`maven` tag][1] my expectation is that your project is being managed by Maven hence built by [Maven Compiler Plugin][2] so your IDE language level settings might derive from what is defined in the [pom.xml][3] \r\n\r\nI would recommend setting project language level in:\r\n\r\n1. [Maven pom.xml file][4] like:\r\n\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;    \r\n \r\n2. [In Idea on Project Properties page][5] you can choose the Language Level for each module\r\n\r\n    [![enter image description here][6]][6]\r\n\r\nMore information:\r\n\r\n - [Selenium Webdriver Tutorial with JAVA: How to set up a TestNG maven based project from scratch][7]\r\n - [stop IntelliJ IDEA to switch java language level every time the pom is reloaded (or change the default project language level)][8]\r\n\r\n\r\n  [1]: https://stackoverflow.com/tags/maven/info\r\n  [2]: http://maven.apache.org/plugins/maven-compiler-plugin/\r\n  [3]: https://maven.apache.org/guides/introduction/introduction-to-the-pom.html\r\n  [4]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\r\n  [5]: https://www.jetbrains.com/help/idea/project-page.html\r\n  [6]: https://i.stack.imgur.com/1MI0n.png\r\n  [7]: https://experitest.com/blogs/testng_framework_maven/\r\n  [8]: https://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-every-time-the-pom-is-reloaded/27037879","title":"&#39;Error: java: cannot access java.util.function.Function&#39; - while trying to use WebDriverWait","body":"<p>Given you have <a href=\"https://stackoverflow.com/tags/maven/info\"><code>maven</code> tag</a> my expectation is that your project is being managed by Maven hence built by <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"noreferrer\">Maven Compiler Plugin</a> so your IDE language level settings might derive from what is defined in the <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-pom.html\" rel=\"noreferrer\">pom.xml</a> </p>\n\n<p>I would recommend setting project language level in:</p>\n\n<ol>\n<li><p><a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"noreferrer\">Maven pom.xml file</a> like:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;    \n</code></pre></li>\n<li><p><a href=\"https://www.jetbrains.com/help/idea/project-page.html\" rel=\"noreferrer\">In Idea on Project Properties page</a> you can choose the Language Level for each module</p>\n\n<p><a href=\"https://i.stack.imgur.com/1MI0n.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1MI0n.png\" alt=\"enter image description here\"></a></p></li>\n</ol>\n\n<p>More information:</p>\n\n<ul>\n<li><a href=\"https://experitest.com/blogs/testng_framework_maven/\" rel=\"noreferrer\">Selenium Webdriver Tutorial with JAVA: How to set up a TestNG maven based project from scratch</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-every-time-the-pom-is-reloaded/27037879\">stop IntelliJ IDEA to switch java language level every time the pom is reloaded (or change the default project language level)</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":483363,"reputation":2176,"user_id":898358,"accept_rate":40,"display_name":"Rajnikant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642439536,"creation_date":1642439536,"answer_id":70745090,"question_id":57325504,"body_markdown":"I was having same problem, created project using JDK 11 but project setting was still using Language 7 (Ctrl + Shift + Alt + S) \r\n\r\nUsing selenium version 3.141.59\r\n\r\n**Below were my original settings**\r\n\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n**Got it fixed by** \r\n\r\n 1. Adding below to **pom.xml** inside build section but after pluginManagement\r\n\r\n        &lt;plugins&gt;&lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;8&lt;/source&gt;\r\n          &lt;target&gt;8&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n\r\n \r\n[![changes in pom.xml][3]][3]\r\n\r\n2. Change module setting by (File -&gt; Project Structure or using keyboard shortcut Ctrl + Alt + Shift + S) And change language level to 8 - Lambda, type annotation etc. as shown in below image\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WRndV.png\r\n  [2]: https://i.stack.imgur.com/miwJV.png\r\n  [3]: https://i.stack.imgur.com/y7ZUF.png\r\n  [4]: https://i.stack.imgur.com/nqPSF.png\r\n  [5]: https://i.stack.imgur.com/Q2vdq.png","title":"&#39;Error: java: cannot access java.util.function.Function&#39; - while trying to use WebDriverWait","body":"<p>I was having same problem, created project using JDK 11 but project setting was still using Language 7 (Ctrl + Shift + Alt + S)</p>\n<p>Using selenium version 3.141.59</p>\n<p><strong>Below were my original settings</strong></p>\n<p><a href=\"https://i.stack.imgur.com/WRndV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WRndV.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/miwJV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/miwJV.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Got it fixed by</strong></p>\n<ol>\n<li><p>Adding below to <strong>pom.xml</strong> inside build section but after pluginManagement</p>\n<pre><code>&lt;plugins&gt;&lt;plugin&gt;\n&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n&lt;version&gt;3.8.1&lt;/version&gt;\n&lt;configuration&gt;\n  &lt;source&gt;8&lt;/source&gt;\n  &lt;target&gt;8&lt;/target&gt;\n&lt;/configuration&gt;\n</code></pre>\n  \n\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/y7ZUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y7ZUF.png\" alt=\"changes in pom.xml\" /></a></p>\n<ol start=\"2\">\n<li>Change module setting by (File -&gt; Project Structure or using keyboard shortcut Ctrl + Alt + Shift + S) And change language level to 8 - Lambda, type annotation etc. as shown in below image</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/nqPSF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqPSF.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7742884,"reputation":53,"user_id":5861905,"display_name":"Simon S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15144,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":57337759,"answer_count":2,"score":5,"last_activity_date":1642439536,"creation_date":1564744908,"question_id":57325504,"body_markdown":"I&#39;m using Maven and Intellij, project set for jdk-12.0.2, maven in pom 1.8 and when trying to run this code :\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 5);\r\n    WebElement el =  wait.until(ExpectedConditions.elementToBeClickable(By.linkText(&quot;https://poczta.wp.pl&quot;)));\r\n\r\nI get :\r\n\r\n&gt; Error:(37, 30) java: cannot access java.util.function.Function   class\r\n&gt; file for java.util.function.Function not found\r\n\r\nPointing to &#39;wait&#39;\r\n\r\n\r\nTried changing maven in pom from 1.7 to 1.8. &gt; `Invalidate cache/Restart`","title":"&#39;Error: java: cannot access java.util.function.Function&#39; - while trying to use WebDriverWait","body":"<p>I'm using Maven and Intellij, project set for jdk-12.0.2, maven in pom 1.8 and when trying to run this code :</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 5);\nWebElement el =  wait.until(ExpectedConditions.elementToBeClickable(By.linkText(\"https://poczta.wp.pl\")));\n</code></pre>\n\n<p>I get :</p>\n\n<blockquote>\n  <p>Error:(37, 30) java: cannot access java.util.function.Function   class\n  file for java.util.function.Function not found</p>\n</blockquote>\n\n<p>Pointing to 'wait'</p>\n\n<p>Tried changing maven in pom from 1.7 to 1.8. > <code>Invalidate cache/Restart</code></p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"score":1,"creation_date":1642437869,"post_id":70744425,"comment_id":125065258,"body_markdown":"It would help others help you  if you can provide a minimal reproducible example.","body":"It would help others help you  if you can provide a minimal reproducible example."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1642438424,"post_id":70744425,"comment_id":125065480,"body_markdown":"It&#39;s not possible for a single partition to be divided between consumers. But what&#39;s the purpose of the second instance if all partitions only are read by one instance?","body":"It&#39;s not possible for a single partition to be divided between consumers. But what&#39;s the purpose of the second instance if all partitions only are read by one instance?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642438945,"creation_date":1642438945,"answer_id":70744978,"question_id":70744425,"body_markdown":"You should be able to set `partition.assignment.strategy`  property of the consumer to `org.apache.kafka.clients.consumer.StickyAssignor`\r\n\r\nIt&#39;s stated goal is \r\n&gt; Guarantees an assignment that is maximally balanced while **preserving as many existing partition assignments as possible.**\r\n\r\nI&#39;ve personally not used it, but if I understand it&#39;s purpose correctly, if you start another consumer in the same group, there would not be rebalancing until that first consumer dies. ","title":"Kafka partition rebalancing in spring for kafka","body":"<p>You should be able to set <code>partition.assignment.strategy</code>  property of the consumer to <code>org.apache.kafka.clients.consumer.StickyAssignor</code></p>\n<p>It's stated goal is</p>\n<blockquote>\n<p>Guarantees an assignment that is maximally balanced while <strong>preserving as many existing partition assignments as possible.</strong></p>\n</blockquote>\n<p>I've personally not used it, but if I understand it's purpose correctly, if you start another consumer in the same group, there would not be rebalancing until that first consumer dies.</p>\n"}],"owner":{"account_id":23864771,"reputation":81,"user_id":17867272,"display_name":"LearnThings"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1041,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642438945,"creation_date":1642436410,"question_id":70744425,"body_markdown":"I have a micro-service which is using spring for Kafka consumer using ```@KafkaListener```\r\nwith some group id. This application is deployed to the cloud with two instances in different regions.\r\n\r\nSo now i think the partition is divided among two consumers as they both have same group id. \r\n\r\nIs there any possible way to assign all the partitions to a single instance. I don&#39;t want partition  rebalance.\r\n\r\nHow to create customised offset using ConsumerRebalanceListener in spring kafka application ? \r\n","title":"Kafka partition rebalancing in spring for kafka","body":"<p>I have a micro-service which is using spring for Kafka consumer using <code>@KafkaListener</code>\nwith some group id. This application is deployed to the cloud with two instances in different regions.</p>\n<p>So now i think the partition is divided among two consumers as they both have same group id.</p>\n<p>Is there any possible way to assign all the partitions to a single instance. I don't want partition  rebalance.</p>\n<p>How to create customised offset using ConsumerRebalanceListener in spring kafka application ?</p>\n"},{"tags":["java","android","kotlin","testing","instrumented-test"],"owner":{"account_id":3431313,"reputation":103,"user_id":2875643,"display_name":"user2875643"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642438939,"creation_date":1642438939,"question_id":70744977,"body_markdown":"I&#39;m trying to run connected instrumented tests from the terminal, but some tests are failing since the dynamic module is not included in the target apk. When I run these tests from Android Studio then tests are successful.\r\n\r\nI&#39;m using the following task\r\n\r\n    ./gradlew app:connectedAndroidTask\r\n\r\nIs there some other task/flag/process that will include also dynamic modules?","title":"Run connected test from terminal with dynamic module (dynamic module is not included in the test)","body":"<p>I'm trying to run connected instrumented tests from the terminal, but some tests are failing since the dynamic module is not included in the target apk. When I run these tests from Android Studio then tests are successful.</p>\n<p>I'm using the following task</p>\n<pre><code>./gradlew app:connectedAndroidTask\n</code></pre>\n<p>Is there some other task/flag/process that will include also dynamic modules?</p>\n"},{"tags":["java","spring-boot","maven","sonatype","maven-dependency-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1603882271,"post_id":64570713,"comment_id":114174780,"body_markdown":"A maven plugin as dependency is simply wrong. Define a plugin in pluginManagement instead. Also show the command you have used and which JDK version, Maven version etc. you have used.","body":"A maven plugin as dependency is simply wrong. Define a plugin in pluginManagement instead. Also show the command you have used and which JDK version, Maven version etc. you have used."},{"owner":{"account_id":18694374,"reputation":185,"user_id":13628029,"display_name":"GKr297"},"score":0,"creation_date":1603882848,"post_id":64570713,"comment_id":114175036,"body_markdown":"I don&#39;t need a maven plugin , so I removed it. I am using mvn dependency:tree , jdk 11.0.5 and maven 3.5.4","body":"I don&#39;t need a maven plugin , so I removed it. I am using mvn dependency:tree , jdk 11.0.5 and maven 3.5.4"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1603885974,"post_id":64570713,"comment_id":114176394,"body_markdown":"Which version of maven-dependency-plugin have you used cause it is not part of the error output ...which is usually logged out ... best would be to use `mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.2:tree` to be sure to use the most recent version of the plugin....","body":"Which version of maven-dependency-plugin have you used cause it is not part of the error output ...which is usually logged out ... best would be to use <code>mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.2:tree</code> to be sure to use the most recent version of the plugin...."}],"answers":[{"tags":[],"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1603880468,"creation_date":1603880468,"answer_id":64570827,"question_id":64570713,"body_markdown":"Update Maven version, at least to 3.0.x+ or 3.1.x+ [see here][1]\r\n\r\n&gt; This error is caused by Maven 3.1-alpha-1 migration from Sonatype\r\n&gt; Aether to Eclipse Aether (MNG-5354), which is an incompatible change\r\n&gt; for some plugins.\r\n\r\nOther report [here][2] claim to use Maven 3.3.0, so in any case, try with latest stable maven first (you can get it from [here][3])\r\n\r\nSide question: are you developing maven plugin? Usually you shouldn&#39;t declare dependencies on plugins in your pom.xml\r\n\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/MAVEN/AetherClassNotFound\r\n  [2]: https://github.com/smoope/j2objc-maven-plugin/issues/1\r\n  [3]: http://maven.apache.org/download.cgi","title":"When I am trying to run mvn dependency:tree , I am getting : java.lang.NoClassDefFoundError: org/sonatype/aether/version/VersionConstraint","body":"<p>Update Maven version, at least to 3.0.x+ or 3.1.x+ <a href=\"https://cwiki.apache.org/confluence/display/MAVEN/AetherClassNotFound\" rel=\"nofollow noreferrer\">see here</a></p>\n<blockquote>\n<p>This error is caused by Maven 3.1-alpha-1 migration from Sonatype\nAether to Eclipse Aether (MNG-5354), which is an incompatible change\nfor some plugins.</p>\n</blockquote>\n<p>Other report <a href=\"https://github.com/smoope/j2objc-maven-plugin/issues/1\" rel=\"nofollow noreferrer\">here</a> claim to use Maven 3.3.0, so in any case, try with latest stable maven first (you can get it from <a href=\"http://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">here</a>)</p>\n<p>Side question: are you developing maven plugin? Usually you shouldn't declare dependencies on plugins in your pom.xml</p>\n"},{"tags":[],"owner":{"account_id":5003803,"reputation":2949,"user_id":5882375,"accept_rate":67,"display_name":"Alessandro Argentieri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642438878,"creation_date":1642438878,"answer_id":70744963,"question_id":64570713,"body_markdown":"You can solve by using an older version of the plugin as indicated by the [official page][1] recalled by the error log:\r\n\r\n    mvn org.apache.maven.plugins:maven-dependency-plugin:2.8:tree\r\n\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/MAVEN/AetherClassNotFound","title":"When I am trying to run mvn dependency:tree , I am getting : java.lang.NoClassDefFoundError: org/sonatype/aether/version/VersionConstraint","body":"<p>You can solve by using an older version of the plugin as indicated by the <a href=\"https://cwiki.apache.org/confluence/display/MAVEN/AetherClassNotFound\" rel=\"nofollow noreferrer\">official page</a> recalled by the error log:</p>\n<pre><code>mvn org.apache.maven.plugins:maven-dependency-plugin:2.8:tree\n</code></pre>\n"}],"owner":{"account_id":18694374,"reputation":185,"user_id":13628029,"display_name":"GKr297"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64570827,"answer_count":2,"score":1,"last_activity_date":1642438878,"creation_date":1603880062,"question_id":64570713,"body_markdown":"I have no idea why this is happening. I tried deleting my m2 repository as well.\r\n\r\nI tried with various versions of maven plugins(2.8) as well.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n        \r\n\r\nHere is the complete stacktrace :  \r\n\r\n\r\n\r\n     Error injecting: org.apache.maven.shared.dependency.graph.internal.Maven3DependencyGraphBuilder\r\n    java.lang.NoClassDefFoundError: org/sonatype/aether/version/VersionConstraint\r\n    at java.lang.Class.getDeclaredMethods0 (Native Method)\r\n    at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\r\n    at java.lang.Class.getDeclaredMethods (Class.java:1975)\r\n    at com.google.inject.spi.InjectionPoint.getDeclaredMethods (InjectionPoint.java:766)\r\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:683)\r\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\r\n    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies \r\n              (ConstructorBindingImpl.java:181)\r\n   \r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.sonatype.aether.version.VersionConstraint\r\n    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\r\n    at java.lang.Class.getDeclaredMethods0 (Native Method)\r\n    at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\r\n    at java.lang.Class.getDeclaredMethods (Class.java:1975)\r\n    at com.google.inject.spi.InjectionPoint.getDeclaredMethods (InjectionPoint.java:766)\r\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:683)\r\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\r\n  ","title":"When I am trying to run mvn dependency:tree , I am getting : java.lang.NoClassDefFoundError: org/sonatype/aether/version/VersionConstraint","body":"<p>I have no idea why this is happening. I tried deleting my m2 repository as well.</p>\n<p>I tried with various versions of maven plugins(2.8) as well.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n    \n</code></pre>\n<p>Here is the complete stacktrace :</p>\n<pre><code> Error injecting: org.apache.maven.shared.dependency.graph.internal.Maven3DependencyGraphBuilder\njava.lang.NoClassDefFoundError: org/sonatype/aether/version/VersionConstraint\nat java.lang.Class.getDeclaredMethods0 (Native Method)\nat java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\nat java.lang.Class.getDeclaredMethods (Class.java:1975)\nat com.google.inject.spi.InjectionPoint.getDeclaredMethods (InjectionPoint.java:766)\nat com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:683)\nat com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\nat com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies \n          (ConstructorBindingImpl.java:181)\n\n\nCaused by: java.lang.ClassNotFoundException: org.sonatype.aether.version.VersionConstraint\nat org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\nat java.lang.Class.getDeclaredMethods0 (Native Method)\nat java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\nat java.lang.Class.getDeclaredMethods (Class.java:1975)\nat com.google.inject.spi.InjectionPoint.getDeclaredMethods (InjectionPoint.java:766)\nat com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:683)\nat com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\n</code></pre>\n"},{"tags":["java","android","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":13321425,"reputation":127,"user_id":9615943,"display_name":"Francesco D&#39;Onorio De Meo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642438062,"creation_date":1642438062,"answer_id":70744779,"question_id":70744634,"body_markdown":"Could you post xml code please?\r\n\r\nI think the problem can be that in\r\n\r\n    public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\r\n        //update\r\n        NoteEntity note = mNotes.get(i);\r\n        TextView textView = viewHolder.mTextView;\r\n        textView.setText(note.getText());\r\n        Log.i(&quot;taozen&quot;, note.getText());\r\n\r\n    }\r\n\r\nbecause you are passing only one integer but I cannot try without code","title":"RecyclerView displaying only first index of three","body":"<p>Could you post xml code please?</p>\n<p>I think the problem can be that in</p>\n<pre><code>public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\n    //update\n    NoteEntity note = mNotes.get(i);\n    TextView textView = viewHolder.mTextView;\n    textView.setText(note.getText());\n    Log.i(&quot;taozen&quot;, note.getText());\n\n}\n</code></pre>\n<p>because you are passing only one integer but I cannot try without code</p>\n"},{"tags":[],"owner":{"account_id":12638560,"reputation":956,"user_id":9186913,"display_name":"raj kavadia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642438786,"creation_date":1642438786,"answer_id":70744943,"question_id":70744634,"body_markdown":"Check your recycler view Item list_item height. \r\n\r\nmake it wrap_content if it&#39;s set to match_parent.","title":"RecyclerView displaying only first index of three","body":"<p>Check your recycler view Item list_item height.</p>\n<p>make it wrap_content if it's set to match_parent.</p>\n"}],"owner":{"account_id":11075738,"reputation":39,"user_id":8132524,"display_name":"Marius Nicolae"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1642438786,"creation_date":1642437348,"question_id":70744634,"body_markdown":"i have a weird problem, I am trying to create a simple app, but i got stuck with recycleview and displaying items.\r\nMy problem is that i get only one text from the total three.\r\ngetItemCount() says that i have 3 items ... so i don&#39;t know why i get display of only 1 instead of 3 ...\r\n\r\nMainActivity:\r\n```\r\npackage com.example.myapplication;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.support.v7.widget.LinearLayoutManager;\r\nimport android.support.v7.widget.RecyclerView;\r\nimport android.util.Log;\r\n\r\nimport com.example.myapplication.model.NoteEntity;\r\nimport com.example.myapplication.ui.NotesAdapter;\r\nimport com.example.myapplication.utilities.SampleData;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\nimport butterknife.ButterKnife;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG = &quot;MainActivity&quot;;\r\n    @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n    @BindView(R.id.recyclerViewId) RecyclerView mRecyclerView;\r\n\r\n    private List&lt;NoteEntity&gt; notesData = new ArrayList&lt;&gt;();\r\n    private NotesAdapter mAdapter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity);\r\n\r\n        ButterKnife.bind(this);\r\n\r\n\r\n        notesData.addAll(SampleData.getNotes());\r\n        for (NoteEntity note: notesData) {\r\n            Log.i(TAG, note.toString());\r\n        }\r\n        initRecyclerView();\r\n    }\r\n\r\n    private void initRecyclerView() {\r\n        List&lt;NoteEntity&gt; entities = new ArrayList&lt;&gt;();\r\n        entities.addAll(SampleData.getNotes());\r\n        Log.i(TAG+&quot;2&quot;, entities.toString());\r\n\r\n        mAdapter = new NotesAdapter(entities, this);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        mRecyclerView.setHasFixedSize(true);\r\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nRecyclerView:\r\n``` \r\npackage com.example.myapplication.ui;\r\n\r\nimport android.content.Context;\r\nimport android.support.annotation.NonNull;\r\nimport android.support.v7.widget.RecyclerView;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.myapplication.R;\r\nimport com.example.myapplication.model.NoteEntity;\r\n\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\nimport butterknife.ButterKnife;\r\n\r\npublic class NotesAdapter extends RecyclerView.Adapter&lt;NotesAdapter.ViewHolder&gt; {\r\n\r\n    private List&lt;NoteEntity&gt; mNotes;\r\n    Context context;\r\n\r\n    public NotesAdapter(List&lt;NoteEntity&gt; mNotes, Context context) {\r\n        this.mNotes = mNotes;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\r\n        LayoutInflater inflater = LayoutInflater.from(viewGroup.getContext());\r\n        View view = inflater.inflate(R.layout.list_item, viewGroup, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\r\n        //update\r\n        NoteEntity note = mNotes.get(i);\r\n        TextView textView = viewHolder.mTextView;\r\n        textView.setText(note.getText());\r\n        Log.i(&quot;taozen&quot;, note.getText());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        Log.i(&quot;taozen&quot;, &quot;size: &quot; + mNotes.size());\r\n        return mNotes.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        @BindView(R.id.textView) TextView mTextView;\r\n        @BindView(R.id.item_layout_id) LinearLayout linearLayout;\r\n//        @BindView(R.id.btn_item) Button mButton;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            ButterKnife.bind(this, itemView);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nLOGS:\r\n2022-01-17 18:30:12.369 10336-10336/com.example.myapplication I/taozen: size: 3\r\n2022-01-17 18:30:12.375 10336-10336/com.example.myapplication I/taozen: A simple note\r\n\r\n\r\nAnd this are the items:\r\n\r\n```\r\nimport java.util.GregorianCalendar;\r\nimport java.util.List;\r\n\r\npublic class SampleData{\r\n    private static final String SAMPLE_TEXT_1 = &quot;A simple note&quot;;\r\n    private static final String SAMPLE_TEXT_2 = &quot;A note with a\\nline feed&quot;;\r\n    private static final String SAMPLE_TEXT_3 = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n&quot; +\r\n            &quot;Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?&quot;;\r\n\r\n    private static Date getDate(int diff){\r\n        GregorianCalendar cal = new GregorianCalendar();\r\n        cal.add(Calendar.MILLISECOND, diff);\r\n        return cal.getTime();\r\n    }\r\n    public static List&lt;NoteEntity&gt; getNotes(){\r\n        List&lt;NoteEntity&gt; notes = new ArrayList&lt;&gt;();\r\n        notes.add(new NoteEntity(1, getDate(0), SAMPLE_TEXT_1));\r\n        notes.add(new NoteEntity(2, getDate(-1), SAMPLE_TEXT_2));\r\n        notes.add(new NoteEntity(3, getDate(-2), SAMPLE_TEXT_3));\r\n        return notes;\r\n    }\r\n}\r\n``` \r\n Update!\r\nIt seems that when i get index 1 in my adapter i get the correct value, for example:\r\n```\r\n@Override\r\n    public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\r\n        //update\r\n        NoteEntity note = mNotes.get(1);\r\n        viewHolder.mTextView.setText(note.getText());\r\n        Log.i(&quot;taozen&quot;, note.getText());\r\n\r\n    }\r\n```\r\nSo the problem can be in my onBindViewHolder ?","title":"RecyclerView displaying only first index of three","body":"<p>i have a weird problem, I am trying to create a simple app, but i got stuck with recycleview and displaying items.\nMy problem is that i get only one text from the total three.\ngetItemCount() says that i have 3 items ... so i don't know why i get display of only 1 instead of 3 ...</p>\n<p>MainActivity:</p>\n<pre><code>package com.example.myapplication;\n\nimport android.annotation.SuppressLint;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.support.v7.widget.LinearLayoutManager;\nimport android.support.v7.widget.RecyclerView;\nimport android.util.Log;\n\nimport com.example.myapplication.model.NoteEntity;\nimport com.example.myapplication.ui.NotesAdapter;\nimport com.example.myapplication.utilities.SampleData;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    @SuppressLint(&quot;NonConstantResourceId&quot;)\n    @BindView(R.id.recyclerViewId) RecyclerView mRecyclerView;\n\n    private List&lt;NoteEntity&gt; notesData = new ArrayList&lt;&gt;();\n    private NotesAdapter mAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity);\n\n        ButterKnife.bind(this);\n\n\n        notesData.addAll(SampleData.getNotes());\n        for (NoteEntity note: notesData) {\n            Log.i(TAG, note.toString());\n        }\n        initRecyclerView();\n    }\n\n    private void initRecyclerView() {\n        List&lt;NoteEntity&gt; entities = new ArrayList&lt;&gt;();\n        entities.addAll(SampleData.getNotes());\n        Log.i(TAG+&quot;2&quot;, entities.toString());\n\n        mAdapter = new NotesAdapter(entities, this);\n        mRecyclerView.setAdapter(mAdapter);\n        mRecyclerView.setHasFixedSize(true);\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));\n    }\n\n\n}\n</code></pre>\n<p>RecyclerView:</p>\n<pre><code>package com.example.myapplication.ui;\n\nimport android.content.Context;\nimport android.support.annotation.NonNull;\nimport android.support.v7.widget.RecyclerView;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\n\nimport com.example.myapplication.R;\nimport com.example.myapplication.model.NoteEntity;\n\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\n\npublic class NotesAdapter extends RecyclerView.Adapter&lt;NotesAdapter.ViewHolder&gt; {\n\n    private List&lt;NoteEntity&gt; mNotes;\n    Context context;\n\n    public NotesAdapter(List&lt;NoteEntity&gt; mNotes, Context context) {\n        this.mNotes = mNotes;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n        LayoutInflater inflater = LayoutInflater.from(viewGroup.getContext());\n        View view = inflater.inflate(R.layout.list_item, viewGroup, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\n        //update\n        NoteEntity note = mNotes.get(i);\n        TextView textView = viewHolder.mTextView;\n        textView.setText(note.getText());\n        Log.i(&quot;taozen&quot;, note.getText());\n\n    }\n\n    @Override\n    public int getItemCount() {\n        Log.i(&quot;taozen&quot;, &quot;size: &quot; + mNotes.size());\n        return mNotes.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        @BindView(R.id.textView) TextView mTextView;\n        @BindView(R.id.item_layout_id) LinearLayout linearLayout;\n//        @BindView(R.id.btn_item) Button mButton;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            ButterKnife.bind(this, itemView);\n        }\n    }\n}\n\n</code></pre>\n<p>LOGS:\n2022-01-17 18:30:12.369 10336-10336/com.example.myapplication I/taozen: size: 3\n2022-01-17 18:30:12.375 10336-10336/com.example.myapplication I/taozen: A simple note</p>\n<p>And this are the items:</p>\n<pre><code>import java.util.GregorianCalendar;\nimport java.util.List;\n\npublic class SampleData{\n    private static final String SAMPLE_TEXT_1 = &quot;A simple note&quot;;\n    private static final String SAMPLE_TEXT_2 = &quot;A note with a\\nline feed&quot;;\n    private static final String SAMPLE_TEXT_3 = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n&quot; +\n            &quot;Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?&quot;;\n\n    private static Date getDate(int diff){\n        GregorianCalendar cal = new GregorianCalendar();\n        cal.add(Calendar.MILLISECOND, diff);\n        return cal.getTime();\n    }\n    public static List&lt;NoteEntity&gt; getNotes(){\n        List&lt;NoteEntity&gt; notes = new ArrayList&lt;&gt;();\n        notes.add(new NoteEntity(1, getDate(0), SAMPLE_TEXT_1));\n        notes.add(new NoteEntity(2, getDate(-1), SAMPLE_TEXT_2));\n        notes.add(new NoteEntity(3, getDate(-2), SAMPLE_TEXT_3));\n        return notes;\n    }\n}\n</code></pre>\n<p>Update!\nIt seems that when i get index 1 in my adapter i get the correct value, for example:</p>\n<pre><code>@Override\n    public void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\n        //update\n        NoteEntity note = mNotes.get(1);\n        viewHolder.mTextView.setText(note.getText());\n        Log.i(&quot;taozen&quot;, note.getText());\n\n    }\n</code></pre>\n<p>So the problem can be in my onBindViewHolder ?</p>\n"},{"tags":["java","android","splash-screen","android-12"],"comments":[{"owner":{"account_id":9518753,"reputation":1010,"user_id":7074278,"display_name":"SkypeDogg"},"score":1,"creation_date":1642065508,"post_id":70693736,"comment_id":124974449,"body_markdown":"Do you have crash message or stack trace?","body":"Do you have crash message or stack trace?"},{"owner":{"account_id":13298500,"reputation":41,"user_id":9600659,"display_name":"NACHIKETA CHAKRABORTY"},"score":0,"creation_date":1642067733,"post_id":70693736,"comment_id":124975319,"body_markdown":"it is working from Nogoat to Android 11. The app just stops without showing anything or recording crashes in Crashlytics. I cannot usb debug as I don&#39;t have Android 12.","body":"it is working from Nogoat to Android 11. The app just stops without showing anything or recording crashes in Crashlytics. I cannot usb debug as I don&#39;t have Android 12."},{"owner":{"account_id":9518753,"reputation":1010,"user_id":7074278,"display_name":"SkypeDogg"},"score":0,"creation_date":1642081825,"post_id":70693736,"comment_id":124980806,"body_markdown":"Have you tried emulator with API 31?","body":"Have you tried emulator with API 31?"},{"owner":{"account_id":13298500,"reputation":41,"user_id":9600659,"display_name":"NACHIKETA CHAKRABORTY"},"score":0,"creation_date":1642082434,"post_id":70693736,"comment_id":124981117,"body_markdown":"Yes Actually due to device limitations the emulator is not starting that is why unable to test there. Did you see any problem with my code?","body":"Yes Actually due to device limitations the emulator is not starting that is why unable to test there. Did you see any problem with my code?"},{"owner":{"account_id":9518753,"reputation":1010,"user_id":7074278,"display_name":"SkypeDogg"},"score":0,"creation_date":1642084097,"post_id":70693736,"comment_id":124981927,"body_markdown":"I assume you used `installSplashScreen(Activity)`?","body":"I assume you used <code>installSplashScreen(Activity)</code>?"},{"owner":{"account_id":13298500,"reputation":41,"user_id":9600659,"display_name":"NACHIKETA CHAKRABORTY"},"score":0,"creation_date":1642138390,"post_id":70693736,"comment_id":124996688,"body_markdown":"Yes I did use installSplashScreen","body":"Yes I did use installSplashScreen"},{"owner":{"account_id":13298500,"reputation":41,"user_id":9600659,"display_name":"NACHIKETA CHAKRABORTY"},"score":0,"creation_date":1642141968,"post_id":70693736,"comment_id":124997278,"body_markdown":"Error while Launching activity is the message shown while running on emulator","body":"Error while Launching activity is the message shown while running on emulator"}],"answers":[{"tags":[],"owner":{"account_id":3624104,"reputation":1576,"user_id":3022177,"display_name":"Vadim Caen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642437869,"creation_date":1642437869,"answer_id":70744737,"question_id":70693736,"body_markdown":"This attribute has to be a color, not a drawable (unless your drawable is a color) \r\n\r\n`&lt;item name=&quot;windowSplashScreenBackground&quot;&gt;@drawable/appback&lt;/item&gt;`","title":"Application Crashing in Splash Screen on Android 12","body":"<p>This attribute has to be a color, not a drawable (unless your drawable is a color)</p>\n<p><code>&lt;item name=&quot;windowSplashScreenBackground&quot;&gt;@drawable/appback&lt;/item&gt;</code></p>\n"}],"owner":{"account_id":13298500,"reputation":41,"user_id":9600659,"display_name":"NACHIKETA CHAKRABORTY"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1687,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70744737,"answer_count":1,"score":1,"last_activity_date":1642437869,"creation_date":1642063913,"question_id":70693736,"body_markdown":"Our app (live in playstore with over 10k downloads) has new Android 12 users who are facing crashes with custom splash screen activity where it is just checked if the user is logged in. The only possible reason for this crash can be the new Splash screen api introduced in Android 12. But even after integrating it, this does not workon android 12 mobile phone. Please help me navigate the problem in my code below.\r\n\r\nI am using the library:\r\n&gt; implementation &#39;androidx.core:core-splashscreen:1.0.0-alpha02&#39;\r\n\r\nAt splash.xml:\r\n```\r\n&lt;resources&gt;\r\n    &lt;style name=&quot;Theme.App.Starting&quot; parent=&quot;Theme.SplashScreen&quot;&gt;\r\n        &lt;item name=&quot;windowSplashScreenBackground&quot;&gt;@drawable/appback&lt;/item&gt;\r\n        &lt;item name=&quot;windowSplashScreenAnimatedIcon&quot;&gt;@drawable/applogo&lt;/item&gt;\r\n        &lt;item name=&quot;postSplashScreenTheme&quot;&gt;@style/Theme.AppName&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n&lt;/resources&gt;\r\n```\r\n\r\nDeclared theme at both application level and activity level using:\r\n&gt; android:theme=&quot;@style/Theme.App.Starting&quot;\r\n\r\nIn my home screen (User cannot visit homescreen without logging in), just above set contentView:\r\n```\r\nsplashScreen.setKeepVisibleCondition((SplashScreen.KeepOnScreenCondition) () -&gt; {\r\n            if (user_id.equals(&quot;&quot;)){\r\n                startActivity(new Intent(context,LoginActivity.class));\r\n                finish();\r\n            }\r\n            return true;\r\n        });\r\n```\r\n","title":"Application Crashing in Splash Screen on Android 12","body":"<p>Our app (live in playstore with over 10k downloads) has new Android 12 users who are facing crashes with custom splash screen activity where it is just checked if the user is logged in. The only possible reason for this crash can be the new Splash screen api introduced in Android 12. But even after integrating it, this does not workon android 12 mobile phone. Please help me navigate the problem in my code below.</p>\n<p>I am using the library:</p>\n<blockquote>\n<p>implementation 'androidx.core:core-splashscreen:1.0.0-alpha02'</p>\n</blockquote>\n<p>At splash.xml:</p>\n<pre><code>&lt;resources&gt;\n    &lt;style name=&quot;Theme.App.Starting&quot; parent=&quot;Theme.SplashScreen&quot;&gt;\n        &lt;item name=&quot;windowSplashScreenBackground&quot;&gt;@drawable/appback&lt;/item&gt;\n        &lt;item name=&quot;windowSplashScreenAnimatedIcon&quot;&gt;@drawable/applogo&lt;/item&gt;\n        &lt;item name=&quot;postSplashScreenTheme&quot;&gt;@style/Theme.AppName&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>Declared theme at both application level and activity level using:</p>\n<blockquote>\n<p>android:theme=&quot;@style/Theme.App.Starting&quot;</p>\n</blockquote>\n<p>In my home screen (User cannot visit homescreen without logging in), just above set contentView:</p>\n<pre><code>splashScreen.setKeepVisibleCondition((SplashScreen.KeepOnScreenCondition) () -&gt; {\n            if (user_id.equals(&quot;&quot;)){\n                startActivity(new Intent(context,LoginActivity.class));\n                finish();\n            }\n            return true;\n        });\n</code></pre>\n"},{"tags":["java","memory","memory-management","garbage-collection","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1642437439,"creation_date":1642437439,"answer_id":70744646,"question_id":70743022,"body_markdown":"You can use [the Management API], most notably the [`MemoryMXBean`].\r\n\r\nFor example\r\n\r\n```java\r\nimport java.lang.management.*;\r\n\r\nclass Memory {\r\n    public static void main(String[] args) {\r\n        MemoryMXBean m = ManagementFactory.getMemoryMXBean();\r\n        for(MemoryType type: MemoryType.values()) {\r\n            usage(type, type == MemoryType.HEAP?\r\n                m.getHeapMemoryUsage(): m.getNonHeapMemoryUsage());\r\n            System.out.println();\r\n            for(MemoryPoolMXBean mp: ManagementFactory.getMemoryPoolMXBeans())\r\n                if(mp.getType() == type) usage(mp.getName(), mp.getUsage());\r\n            System.out.println();\r\n        }\r\n    }\r\n  \r\n    private static void usage(Object header, MemoryUsage mu) {\r\n        long used = mu.getUsed(), max = mu.getMax();\r\n        System.out.printf(\r\n            max &gt; 0? &quot;%-30s %,d (%,d MiB) of %,d (%,d MiB)%n&quot;: &quot;%-30s %,d (%,d MiB)%n&quot;,\r\n            header, used, used &gt;&gt;&gt; 20, max, max &gt;&gt;&gt; 20);\r\n    }\r\n}\r\n```\r\n\r\n[Demo on Ideone]\r\n\r\n```none\r\nHeap memory                    2,820,696 (2 MiB) of 1,037,959,168 (989 MiB)\r\n\r\nTenured Gen                    0 (0 MiB) of 715,849,728 (682 MiB)\r\nEden Space                     4,231,056 (4 MiB) of 286,326,784 (273 MiB)\r\nSurvivor Space                 0 (0 MiB) of 35,782,656 (34 MiB)\r\n\r\nNon-heap memory                2,833,312 (2 MiB) of 352,321,536 (336 MiB)\r\n\r\nCodeHeap &#39;non-nmethods&#39;        1,079,040 (1 MiB) of 5,828,608 (5 MiB)\r\nMetaspace                      1,078,264 (1 MiB) of 67,108,864 (64 MiB)\r\nCodeHeap &#39;profiled nmethods&#39;   489,472 (0 MiB) of 122,912,768 (117 MiB)\r\nCompressed Class Space         114,560 (0 MiB) of 33,554,432 (32 MiB)\r\nCodeHeap &#39;non-profiled nmethods&#39; 89,856 (0 MiB) of 122,916,864 (117 MiB)\r\n```\r\n\r\nSee [this answer] for an example of how to get notifications about garbage collections and their results.\r\n\r\n\r\n[the Management API]: https://docs.oracle.com/en/java/javase/17/docs/api/java.management/java/lang/management/package-summary.html\r\n\r\n[`MemoryMXBean`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.management/java/lang/management/MemoryMXBean.html\r\n[Demo on Ideone]: https://ideone.com/8cPXAU\r\n[this answer]: https://stackoverflow.com/a/69974902/2711488","title":"How to get from Java YoungGen and OldGen?","body":"<p>You can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.management/java/lang/management/package-summary.html\" rel=\"noreferrer\">the Management API</a>, most notably the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.management/java/lang/management/MemoryMXBean.html\" rel=\"noreferrer\"><code>MemoryMXBean</code></a>.</p>\n<p>For example</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.management.*;\n\nclass Memory {\n    public static void main(String[] args) {\n        MemoryMXBean m = ManagementFactory.getMemoryMXBean();\n        for(MemoryType type: MemoryType.values()) {\n            usage(type, type == MemoryType.HEAP?\n                m.getHeapMemoryUsage(): m.getNonHeapMemoryUsage());\n            System.out.println();\n            for(MemoryPoolMXBean mp: ManagementFactory.getMemoryPoolMXBeans())\n                if(mp.getType() == type) usage(mp.getName(), mp.getUsage());\n            System.out.println();\n        }\n    }\n  \n    private static void usage(Object header, MemoryUsage mu) {\n        long used = mu.getUsed(), max = mu.getMax();\n        System.out.printf(\n            max &gt; 0? &quot;%-30s %,d (%,d MiB) of %,d (%,d MiB)%n&quot;: &quot;%-30s %,d (%,d MiB)%n&quot;,\n            header, used, used &gt;&gt;&gt; 20, max, max &gt;&gt;&gt; 20);\n    }\n}\n</code></pre>\n<p><a href=\"https://ideone.com/8cPXAU\" rel=\"noreferrer\">Demo on Ideone</a></p>\n<pre class=\"lang-none prettyprint-override\"><code>Heap memory                    2,820,696 (2 MiB) of 1,037,959,168 (989 MiB)\n\nTenured Gen                    0 (0 MiB) of 715,849,728 (682 MiB)\nEden Space                     4,231,056 (4 MiB) of 286,326,784 (273 MiB)\nSurvivor Space                 0 (0 MiB) of 35,782,656 (34 MiB)\n\nNon-heap memory                2,833,312 (2 MiB) of 352,321,536 (336 MiB)\n\nCodeHeap 'non-nmethods'        1,079,040 (1 MiB) of 5,828,608 (5 MiB)\nMetaspace                      1,078,264 (1 MiB) of 67,108,864 (64 MiB)\nCodeHeap 'profiled nmethods'   489,472 (0 MiB) of 122,912,768 (117 MiB)\nCompressed Class Space         114,560 (0 MiB) of 33,554,432 (32 MiB)\nCodeHeap 'non-profiled nmethods' 89,856 (0 MiB) of 122,916,864 (117 MiB)\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/69974902/2711488\">this answer</a> for an example of how to get notifications about garbage collections and their results.</p>\n"}],"owner":{"account_id":18278959,"reputation":203,"user_id":13308124,"display_name":"Thomazzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70744646,"answer_count":1,"score":4,"last_activity_date":1642437809,"creation_date":1642429981,"question_id":70743022,"body_markdown":"How can I get the value of the allocated and free memory of the following YoungGen (Eden, Survivor0,Survivor1), OldGen areas from Java?\r\n\r\nI see that the tomcat page displays this information, how can I get it from the java code?\r\n\r\nAbout `maxMemory()`, `totalMemory()`, `freeMemory()`, I know, But it is not entirely clear how to get the value of exactly memory areas, as Tomcat does, for example.","title":"How to get from Java YoungGen and OldGen?","body":"<p>How can I get the value of the allocated and free memory of the following YoungGen (Eden, Survivor0,Survivor1), OldGen areas from Java?</p>\n<p>I see that the tomcat page displays this information, how can I get it from the java code?</p>\n<p>About <code>maxMemory()</code>, <code>totalMemory()</code>, <code>freeMemory()</code>, I know, But it is not entirely clear how to get the value of exactly memory areas, as Tomcat does, for example.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1531575262,"post_id":51339972,"comment_id":89653463,"body_markdown":"Post your code in the question itself.","body":"Post your code in the question itself."},{"owner":{"account_id":3701688,"reputation":3357,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1531575345,"post_id":51339972,"comment_id":89653487,"body_markdown":"&quot;_Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers._&quot;","body":"&quot;<i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers.</i>&quot;"},{"owner":{"account_id":13188494,"reputation":2222,"user_id":9525603,"display_name":"Domenick"},"score":1,"creation_date":1531577358,"post_id":51339972,"comment_id":89654071,"body_markdown":"I am not sure if this is your issue but have you tried just making the endpoint &quot;/welcome&quot; instead of &quot;/welcome.html&quot;. I am not a pro when it comes to spring boot but I am not sure if you can actually map to `*.html`.","body":"I am not sure if this is your issue but have you tried just making the endpoint &quot;/welcome&quot; instead of &quot;/welcome.html&quot;. I am not a pro when it comes to spring boot but I am not sure if you can actually map to <code>*.html</code>."},{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":3,"creation_date":1531582107,"post_id":51339972,"comment_id":89655221,"body_markdown":"This is because of the package structure of your application. Your controller is in a completely different package, `com.javainuse.controllers`, than your application class which is in package `com.springbelluu.springboothelloworld`. Make sure the controller is in the same package or a subpackage of the app class, otherwise Spring is not going to find it. Or else add a `@ComponentScan()` annotation to the application class that refers to the package that contains the controller.","body":"This is because of the package structure of your application. Your controller is in a completely different package, <code>com.javainuse.controllers</code>, than your application class which is in package <code>com.springbelluu.springboothelloworld</code>. Make sure the controller is in the same package or a subpackage of the app class, otherwise Spring is not going to find it. Or else add a <code>@ComponentScan()</code> annotation to the application class that refers to the package that contains the controller."}],"answers":[{"tags":[],"owner":{"account_id":14027858,"reputation":4,"user_id":10132469,"display_name":"Narendrakumar232"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532513728,"creation_date":1532513728,"answer_id":51516377,"question_id":51339972,"body_markdown":"@BElluu ... your main application and Controller class are in different packages so componentscan is not working ...just check package level \r\n\r\n    package com.springbelluu.springboothelloworld;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class SpringbootHelloworldApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(SpringbootHelloworldApplication.class, args);\r\n        }\r\n    }\r\n    \r\n    \r\n    package com.javainuse.controllers;  \r\n     // use this package package com.springbelluu.springboothelloworld;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    @Controller\r\n    public class TestController {\r\n    \r\n        @RequestMapping(&quot;/welcome.html&quot;)\r\n        public ModelAndView firstPage() {\r\n            return new ModelAndView(&quot;welcome&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"SpringBoot - HelloWorld","body":"<p>@BElluu ... your main application and Controller class are in different packages so componentscan is not working ...just check package level </p>\n\n<pre><code>package com.springbelluu.springboothelloworld;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SpringbootHelloworldApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringbootHelloworldApplication.class, args);\n    }\n}\n\n\npackage com.javainuse.controllers;  \n // use this package package com.springbelluu.springboothelloworld;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\npublic class TestController {\n\n    @RequestMapping(\"/welcome.html\")\n    public ModelAndView firstPage() {\n        return new ModelAndView(\"welcome\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12042848,"reputation":331,"user_id":8809138,"display_name":"Putti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539735185,"creation_date":1539735185,"answer_id":52845595,"question_id":51339972,"body_markdown":"Go to below link by Spring Framework to create brand new Springboot Project:\r\n\r\nhttps://start.spring.io/\r\n\r\nor\r\n\r\n1.**Create a simple web application**\r\n\r\nNow you can create a web controller for a simple web application.\r\n\r\nsrc/main/java/hello/HelloController.java\r\n\r\npackage hello;\r\n\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@RestController\r\npublic class HelloController {\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n    public String index() {\r\n        return &quot;Greetings from Spring Boot!&quot;;\r\n    }\r\n\r\n}\r\n\r\n2. **Create an Application class**\r\n\r\n        Here you create an Application class with the components:\r\n\r\n        src/main/java/hello/Application.java\r\n \r\n         package hello;\r\n\r\n         import java.util.Arrays;\r\n         import org.springframework.boot.CommandLineRunner;\r\n         import org.springframework.boot.SpringApplication;\r\n         import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n         import org.springframework.context.ApplicationContext;\r\n         import org.springframework.context.annotation.Bean;\r\n\r\n         @SpringBootApplication\r\n         public class Application {\r\n\r\n         public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n          }\r\n\r\n          @Bean\r\n          public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\r\n             return args -&gt; {\r\n            System.out.println(&quot;Let&#39;s inspect the beans provided by Spring Boot:&quot;);\r\n\r\n            String[] beanNames = ctx.getBeanDefinitionNames();\r\n            Arrays.sort(beanNames);\r\n                for (String beanName : beanNames) {\r\n                    System.out.println(beanName);\r\n                 }\r\n              };\r\n            }\r\n          }","title":"SpringBoot - HelloWorld","body":"<p>Go to below link by Spring Framework to create brand new Springboot Project:</p>\n\n<p><a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a></p>\n\n<p>or</p>\n\n<p>1.<strong>Create a simple web application</strong></p>\n\n<p>Now you can create a web controller for a simple web application.</p>\n\n<p>src/main/java/hello/HelloController.java</p>\n\n<p>package hello;</p>\n\n<p>import org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.bind.annotation.RequestMapping;</p>\n\n<p>@RestController\npublic class HelloController {</p>\n\n<pre><code>@RequestMapping(\"/\")\npublic String index() {\n    return \"Greetings from Spring Boot!\";\n}\n</code></pre>\n\n<p>}</p>\n\n<ol start=\"2\">\n<li><p><strong>Create an Application class</strong></p>\n\n<pre><code>Here you create an Application class with the components:\n\nsrc/main/java/hello/Application.java\n\n package hello;\n\n import java.util.Arrays;\n import org.springframework.boot.CommandLineRunner;\n import org.springframework.boot.SpringApplication;\n import org.springframework.boot.autoconfigure.SpringBootApplication;\n import org.springframework.context.ApplicationContext;\n import org.springframework.context.annotation.Bean;\n\n @SpringBootApplication\n public class Application {\n\n public static void main(String[] args) {\n    SpringApplication.run(Application.class, args);\n  }\n\n  @Bean\n  public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n     return args -&gt; {\n    System.out.println(\"Let's inspect the beans provided by Spring Boot:\");\n\n    String[] beanNames = ctx.getBeanDefinitionNames();\n    Arrays.sort(beanNames);\n        for (String beanName : beanNames) {\n            System.out.println(beanName);\n         }\n      };\n    }\n  }\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1674326,"reputation":1,"user_id":1540175,"display_name":"farooq rahu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1553670969,"creation_date":1553670969,"answer_id":55371707,"question_id":51339972,"body_markdown":"Your issue has been fixed you can view the changes at my commit.\r\n\r\nhttps://github.com/farooqrahu/ElenXHello/commits/master","title":"SpringBoot - HelloWorld","body":"<p>Your issue has been fixed you can view the changes at my commit.</p>\n\n<p><a href=\"https://github.com/farooqrahu/ElenXHello/commits/master\" rel=\"nofollow noreferrer\">https://github.com/farooqrahu/ElenXHello/commits/master</a></p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1553673191,"creation_date":1553673191,"answer_id":55372221,"question_id":51339972,"body_markdown":"For starters if you want to get starter with Spring Boot I strongly suggest **NOT** to use JSP. There are quite [some limitations][1] when using JSP, one of them is it doesn&#39;t work with jar packaging. Secondly it is a dated technology and doesn&#39;t receive much attention/updates anymore apart from keeping if functional in newer JEE versions. It is better to use something like [Thymeleaf][2].\r\n\r\nNext you are using snapshots versions for a version of Spring Boot that already is at `2.1.3.RELEASE` (at the moment of writing). \r\n\r\nThat being said change your `pom.xml` to the following (fix version, remove JSP stuff and replace with Thymeleaf). \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.springbelluu&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springboot-helloworld&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;springboot-helloworld&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;10&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;    \r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**NOTE:** Because you now use a final version you don&#39;t need all the repositories in your `pom.xml` anymore!.\r\n\r\nNow delete your JSP and create a `welcome.html` in `src/main/resources/templates/`. (You can actually remove your `webapp` directory in full.\r\n\r\n```\r\n&lt;html&gt;\r\n&lt;body&gt;\r\n&lt;h1&gt;Welcome! Spring Boot for ElenX&lt;/h1&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nThe setup you now have is more modern and easier to work with then JSP. \r\n\r\nIn your `application.properties` remove the `spring.mvc.view` properties as Spring Boot will automatically configure Thymeleaf with correct settings. \r\n\r\n[1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-jsp-limitations\r\n[2]: https://www.thymeleaf.org/","title":"SpringBoot - HelloWorld","body":"<p>For starters if you want to get starter with Spring Boot I strongly suggest <strong>NOT</strong> to use JSP. There are quite <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-jsp-limitations\" rel=\"nofollow noreferrer\">some limitations</a> when using JSP, one of them is it doesn't work with jar packaging. Secondly it is a dated technology and doesn't receive much attention/updates anymore apart from keeping if functional in newer JEE versions. It is better to use something like <a href=\"https://www.thymeleaf.org/\" rel=\"nofollow noreferrer\">Thymeleaf</a>.</p>\n\n<p>Next you are using snapshots versions for a version of Spring Boot that already is at <code>2.1.3.RELEASE</code> (at the moment of writing). </p>\n\n<p>That being said change your <code>pom.xml</code> to the following (fix version, remove JSP stuff and replace with Thymeleaf). </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.springbelluu&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot-helloworld&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;springboot-helloworld&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;10&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;    \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>NOTE:</strong> Because you now use a final version you don't need all the repositories in your <code>pom.xml</code> anymore!.</p>\n\n<p>Now delete your JSP and create a <code>welcome.html</code> in <code>src/main/resources/templates/</code>. (You can actually remove your <code>webapp</code> directory in full.</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome! Spring Boot for ElenX&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The setup you now have is more modern and easier to work with then JSP. </p>\n\n<p>In your <code>application.properties</code> remove the <code>spring.mvc.view</code> properties as Spring Boot will automatically configure Thymeleaf with correct settings. </p>\n"},{"tags":[],"owner":{"account_id":14070518,"reputation":1,"user_id":10164121,"display_name":"Vikash Vishwakarma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573662323,"creation_date":1573661929,"answer_id":58841303,"question_id":51339972,"body_markdown":"       Here is SpringBoot Main class file Noting Changed Here.  \r\n        -----------------------------------------\r\n\r\n        package com.Encee.SpringBoot_HelloWorld;\r\n\r\n        import org.springframework.boot.SpringApplication;\r\n        import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n        @SpringBootApplication\r\n        public class SpringBootHelloWorldApplication {\r\n         public static void main(String[] args) {\r\n        SpringApplication.run(SpringBootHelloWorldApplication.class, args);\r\n        }\r\n\r\n         }\r\n\r\n        Here is controller package class \r\n        -----------------------------------------\r\n        package com.Encee.SpringBoot_HelloWorld.controller;\r\n\r\n        import org.springframework.web.bind.annotation.RequestMapping;\r\n        import org.springframework.web.bind.annotation.RestController;\r\n\r\n        @RestController\r\n\r\n        public class Controller {\r\n\t        @RequestMapping(&quot;/hello.html&quot;)\r\n           public String hello() {\r\n            \treturn &quot;Hello World&quot;;\r\n            }\r\n        }\r\n\r\n        -----------------------------------------        \r\n        Now Main file run as Java Application will get your output.\r\n         SCREEN SHOT\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SsRce.png","title":"SpringBoot - HelloWorld","body":"<pre><code>   Here is SpringBoot Main class file Noting Changed Here.  \n    -----------------------------------------\n\n    package com.Encee.SpringBoot_HelloWorld;\n\n    import org.springframework.boot.SpringApplication;\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\n\n    @SpringBootApplication\n    public class SpringBootHelloWorldApplication {\n     public static void main(String[] args) {\n    SpringApplication.run(SpringBootHelloWorldApplication.class, args);\n    }\n\n     }\n\n    Here is controller package class \n    -----------------------------------------\n    package com.Encee.SpringBoot_HelloWorld.controller;\n\n    import org.springframework.web.bind.annotation.RequestMapping;\n    import org.springframework.web.bind.annotation.RestController;\n\n    @RestController\n\n    public class Controller {\n        @RequestMapping(\"/hello.html\")\n       public String hello() {\n            return \"Hello World\";\n        }\n    }\n\n    -----------------------------------------        \n    Now Main file run as Java Application will get your output.\n     SCREEN SHOT\n</code></pre>\n"}],"owner":{"account_id":13958307,"reputation":401,"user_id":10080042,"display_name":"BElluu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":605,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"accepted_answer_id":55372221,"answer_count":5,"score":-3,"last_activity_date":1642437471,"creation_date":1531575049,"question_id":51339972,"body_markdown":"I want to create a simple hello world app with SpringBoot where localhost:8080/welcome.html will show us Hello World.\r\n\r\nI think I did all good but I can&#39;t see HelloWorld, just Whitelabel error page.\r\n\r\nThis is the link to my repo. If someone could check what is wrong I will be very happy!\r\nhttps://github.com/BElluu/ElenXHello\r\n\r\nPOM.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.springbelluu&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;springboot-helloworld&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;springboot-helloworld&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;10&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \r\n    \t&lt;pluginRepositories&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t&lt;/pluginRepositories&gt;\r\n    \r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nSpringbootHelloworldApplication.java\r\n\r\n    package com.springbelluu.springboothelloworld;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class SpringbootHelloworldApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringbootHelloworldApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nTestController.java\r\n\r\n    package com.javainuse.controllers;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    @Controller\r\n    public class TestController {\r\n    \r\n    \t@RequestMapping(&quot;/welcome.html&quot;)\r\n    \tpublic ModelAndView firstPage() {\r\n    \t\treturn new ModelAndView(&quot;welcome&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\napplication.properties\r\n\r\n    spring.mvc.view.prefix:/WEB-INF/jsp/\r\n    spring.mvc.view.suffix:.jsp\r\n\r\n","title":"SpringBoot - HelloWorld","body":"<p>I want to create a simple hello world app with SpringBoot where localhost:8080/welcome.html will show us Hello World.</p>\n\n<p>I think I did all good but I can't see HelloWorld, just Whitelabel error page.</p>\n\n<p>This is the link to my repo. If someone could check what is wrong I will be very happy!\n<a href=\"https://github.com/BElluu/ElenXHello\" rel=\"nofollow noreferrer\">https://github.com/BElluu/ElenXHello</a></p>\n\n<p>POM.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.springbelluu&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot-helloworld&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;springboot-helloworld&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;10&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n\n<p>SpringbootHelloworldApplication.java</p>\n\n<pre><code>package com.springbelluu.springboothelloworld;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SpringbootHelloworldApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringbootHelloworldApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>TestController.java</p>\n\n<pre><code>package com.javainuse.controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\npublic class TestController {\n\n    @RequestMapping(\"/welcome.html\")\n    public ModelAndView firstPage() {\n        return new ModelAndView(\"welcome\");\n    }\n\n}\n</code></pre>\n\n<p>application.properties</p>\n\n<pre><code>spring.mvc.view.prefix:/WEB-INF/jsp/\nspring.mvc.view.suffix:.jsp\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","colors","android-drawable"],"answers":[{"tags":[],"owner":{"account_id":194533,"reputation":20280,"user_id":436938,"display_name":"Sergey Glotov"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1439304617,"creation_date":1439304617,"answer_id":31945077,"question_id":31944501,"body_markdown":"It&#39;s sort of caching. From the [Android docs][1]:\r\n\r\n&gt; if you instantiate two Drawable objects from the same image resource, then change a property (such as the alpha) for one of the Drawables, then it will also affect the other. So when dealing with multiple instances of an image resource, instead of directly transforming the Drawable, you should perform a tween animation.\r\n\r\n[Drawable.mutate()][2] after creating should fix the issue.\r\n\r\n&gt; A mutable drawable is guaranteed to not share its state with any other drawable. This is especially useful when you need to modify properties of drawables loaded from resources. By default, all drawables instances loaded from the same resource share a common state; if you modify the state of one instance, all the other instances will receive the same modification.\r\n\r\nSomething like this:\r\n\r\n    Drawable box = ContextCompat.getDrawable(context, R.drawable.markbox).mutate();\r\n    Drawable boxBorder = ContextCompat.getDrawable(context, R.drawable.markbox_border).mutate();\r\n\r\n  [1]: http://developer.android.com/guide/topics/graphics/2d-graphics.html#drawables-from-images\r\n  [2]: https://developer.android.com/reference/android/graphics/drawable/Drawable.html#mutate()","title":"Changing color of single drawable in RecyclerView will change all drawables","body":"<p>It's sort of caching. From the <a href=\"http://developer.android.com/guide/topics/graphics/2d-graphics.html#drawables-from-images\" rel=\"noreferrer\">Android docs</a>:</p>\n\n<blockquote>\n  <p>if you instantiate two Drawable objects from the same image resource, then change a property (such as the alpha) for one of the Drawables, then it will also affect the other. So when dealing with multiple instances of an image resource, instead of directly transforming the Drawable, you should perform a tween animation.</p>\n</blockquote>\n\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/Drawable.html#mutate()\" rel=\"noreferrer\">Drawable.mutate()</a> after creating should fix the issue.</p>\n\n<blockquote>\n  <p>A mutable drawable is guaranteed to not share its state with any other drawable. This is especially useful when you need to modify properties of drawables loaded from resources. By default, all drawables instances loaded from the same resource share a common state; if you modify the state of one instance, all the other instances will receive the same modification.</p>\n</blockquote>\n\n<p>Something like this:</p>\n\n<pre><code>Drawable box = ContextCompat.getDrawable(context, R.drawable.markbox).mutate();\nDrawable boxBorder = ContextCompat.getDrawable(context, R.drawable.markbox_border).mutate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2391396,"reputation":22048,"user_id":2091181,"display_name":"Jorge Casariego"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476201576,"creation_date":1476201576,"answer_id":39981645,"question_id":31944501,"body_markdown":"Thanks to Sergey that guided me to the solution. I share what I did in onBindViewHolder method.\r\n\r\n    final Drawable drawable = ContextCompat.getDrawable(mContext, R.drawable.ic_icon).mutate();\r\n    \r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\r\n        holder.image.setBackground(drawable);\r\n    } else {\r\n        holder.image.setBackgroundDrawable(drawable);\r\n    }","title":"Changing color of single drawable in RecyclerView will change all drawables","body":"<p>Thanks to Sergey that guided me to the solution. I share what I did in onBindViewHolder method.</p>\n\n<pre><code>final Drawable drawable = ContextCompat.getDrawable(mContext, R.drawable.ic_icon).mutate();\n\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\n    holder.image.setBackground(drawable);\n} else {\n    holder.image.setBackgroundDrawable(drawable);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615134448,"creation_date":1615134448,"answer_id":66518752,"question_id":31944501,"body_markdown":"**TL;DR.** If you are worried about performance and still want some caching, use `TintedIconCache` - a single class you can [grab from this gist][1].\r\n\r\n    TintedIconCache cache = TintedIconCache.getInstance();\r\n    Drawable coloredIcon = cache.fetchTintedIcon(context, R.drawable.ic, R.color.color));\r\n\r\n## How `TintedIconCache` works?\r\n\r\nIt manages a cache such that only one instance of a uniquely tinted drawable is kept into memory. It should be *fast*, and *memory efficient*.\r\n\r\n    // Get an instance\r\n    TintedIconCache cache = TintedIconCache.getInstance();\r\n    \r\n    // Will be fetched from the resources\r\n    Drawable backIcon = cache.fetchTintedIcon(context, R.drawable.icon, R.color.black));\r\n    \r\n    // Will be fetched from the resources as well\r\n    Drawable bleuIcon = cache.fetchTintedIcon(context, R.drawable.icon, R.color.bleu));\r\n       \r\n    // Will be fetched from the cache!!!\r\n    Drawable backIconTwo = cache.fetchTintedIcon(context, R.drawable.icon, R.color.back));\r\n\r\nCheck [this answer][2] for more details.\r\n\r\n-------\r\nConsider looking at the [gist][1] to see how it works under the hood.\r\n\r\n\r\n  [1]: https://gist.github.com/AnixPasBesoin/1b29fc61c85698526ab902974f7c0aa1\r\n  [2]: https://stackoverflow.com/a/66479081/3503855","title":"Changing color of single drawable in RecyclerView will change all drawables","body":"<p><strong>TL;DR.</strong> If you are worried about performance and still want some caching, use <code>TintedIconCache</code> - a single class you can <a href=\"https://gist.github.com/AnixPasBesoin/1b29fc61c85698526ab902974f7c0aa1\" rel=\"nofollow noreferrer\">grab from this gist</a>.</p>\n<pre><code>TintedIconCache cache = TintedIconCache.getInstance();\nDrawable coloredIcon = cache.fetchTintedIcon(context, R.drawable.ic, R.color.color));\n</code></pre>\n<h2>How <code>TintedIconCache</code> works?</h2>\n<p>It manages a cache such that only one instance of a uniquely tinted drawable is kept into memory. It should be <em>fast</em>, and <em>memory efficient</em>.</p>\n<pre><code>// Get an instance\nTintedIconCache cache = TintedIconCache.getInstance();\n\n// Will be fetched from the resources\nDrawable backIcon = cache.fetchTintedIcon(context, R.drawable.icon, R.color.black));\n\n// Will be fetched from the resources as well\nDrawable bleuIcon = cache.fetchTintedIcon(context, R.drawable.icon, R.color.bleu));\n   \n// Will be fetched from the cache!!!\nDrawable backIconTwo = cache.fetchTintedIcon(context, R.drawable.icon, R.color.back));\n</code></pre>\n<p>Check <a href=\"https://stackoverflow.com/a/66479081/3503855\">this answer</a> for more details.</p>\n<hr />\n<p>Consider looking at the <a href=\"https://gist.github.com/AnixPasBesoin/1b29fc61c85698526ab902974f7c0aa1\" rel=\"nofollow noreferrer\">gist</a> to see how it works under the hood.</p>\n"}],"owner":{"account_id":5045083,"reputation":463,"user_id":4051366,"accept_rate":56,"display_name":"Tom Kuschka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4252,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":31945077,"answer_count":3,"score":15,"last_activity_date":1642437397,"creation_date":1439303199,"question_id":31944501,"body_markdown":"I just tried to change the color of my drawable inside my row depending on a value but instead of one drawable the adapter changed all of them.\r\n\r\nHere is my Adapter:\r\n\r\n    public class ReportAdapter extends RecyclerView.Adapter&lt;ReportAdapter.ReportViewHolder&gt; {\r\n\r\n        DataBaseHelper dataBase;\r\n\r\n        private LayoutInflater inflater;\r\n        List&lt;ChoosedSubject&gt; data = Collections.emptyList();\r\n        Context context;\r\n        OnItemClickListener itemClickListener;\r\n\r\n        public ReportAdapter(Context context, List&lt;ChoosedSubject&gt; data, OnItemClickListener itemClickListener) {\r\n            inflater = LayoutInflater.from(context);\r\n            this.data = data;\r\n            this.context = context;\r\n            this.itemClickListener = itemClickListener;\r\n        }\r\n\r\n        @Override\r\n        public ReportViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            View view = inflater.inflate(R.layout.report_cell, parent, false);\r\n            ReportViewHolder holder = new ReportViewHolder(view);\r\n\r\n            dataBase = new DataBaseHelper(context);\r\n\r\n            return holder;\r\n        }\r\n\r\n        //Set Data inside RecyclerView\r\n        @Override\r\n        public void onBindViewHolder(ReportViewHolder holder, int position) {\r\n            ChoosedSubject current = data.get(position);\r\n            Grades grades = new Grades(context);\r\n\r\n            Resources resources = context.getResources();\r\n            int iconColor;\r\n            Drawable icon;\r\n\r\n            icon = ContextCompat.getDrawable(context, dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedIcon());\r\n\r\n            if (dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedIcon() != R.drawable.subject_default) {\r\n                iconColor = resources.getColor(dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedColor());\r\n                icon.setColorFilter(iconColor, PorterDuff.Mode.SRC_IN);\r\n                holder.icon.setBackground(icon);\r\n            } else {\r\n                holder.icon.setImageResource(R.drawable.subject_default);\r\n            }\r\n\r\n            holder.subject.setText(current.getName().toString());\r\n\r\n            NumberFormat formatter = NumberFormat.getNumberInstance();\r\n            formatter.setMinimumFractionDigits(0);\r\n            formatter.setMaximumFractionDigits(0);\r\n            String output = formatter.format(dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getAverage());\r\n\r\n            int formattedValue = Integer.valueOf(output);\r\n\r\n\r\n            //CHANGING COLOR DEPENDING ON VALUE\r\n            int boxColor = 0;\r\n            Drawable box = ContextCompat.getDrawable(context, R.drawable.markbox);\r\n            Drawable boxBorder = ContextCompat.getDrawable(context, R.drawable.markbox_border);\r\n\r\n            if (formattedValue &gt;= 10) {\r\n                boxColor = resources.getColor(R.color.positive);\r\n            } else if (formattedValue &gt;= 4 &amp;&amp; formattedValue &lt;= 9) {\r\n                boxColor = resources.getColor(R.color.neutral);\r\n            } else if (formattedValue &lt; 4) {\r\n                boxColor = resources.getColor(R.color.negative);\r\n\r\n            }\r\n\r\n            box.setAlpha(204);\r\n            box.setColorFilter(boxColor, PorterDuff.Mode.SRC_IN);\r\n            boxBorder.setColorFilter(boxColor, PorterDuff.Mode.SRC_IN);\r\n\r\n            holder.markbox.setImageDrawable(box);\r\n            holder.markboxBorder.setImageDrawable(boxBorder);\r\n\r\n\r\n            holder.average.setText(output);\r\n            holder.average.setTypeface(EasyFonts.robotoBlack(context));\r\n        }\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return data.size();\r\n        }\r\n\r\n\r\n        public class ReportViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n\r\n            TextView subject;\r\n            ImageView icon;\r\n            ImageView markbox;\r\n            ImageView markboxBorder;\r\n            TextView average;\r\n\r\n            public ReportViewHolder(View itemView) {\r\n                super(itemView);\r\n                subject = (TextView) itemView.findViewById(R.id.report_subject);\r\n                icon = (ImageView) itemView.findViewById(R.id.report_icon);\r\n                markbox = (ImageView) itemView.findViewById(R.id.report_markbox);\r\n                markboxBorder = (ImageView) itemView.findViewById(R.id.report_markbox_border);\r\n                average = (TextView) itemView.findViewById(R.id.report_average);\r\n\r\n                itemView.setOnClickListener(this);\r\n            }\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n                itemClickListener.onItemClick(v, this.getAdapterPosition());\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\nKnows anybody what to do? Thank you for your help!!!","title":"Changing color of single drawable in RecyclerView will change all drawables","body":"<p>I just tried to change the color of my drawable inside my row depending on a value but instead of one drawable the adapter changed all of them.</p>\n\n<p>Here is my Adapter:</p>\n\n<pre><code>public class ReportAdapter extends RecyclerView.Adapter&lt;ReportAdapter.ReportViewHolder&gt; {\n\n    DataBaseHelper dataBase;\n\n    private LayoutInflater inflater;\n    List&lt;ChoosedSubject&gt; data = Collections.emptyList();\n    Context context;\n    OnItemClickListener itemClickListener;\n\n    public ReportAdapter(Context context, List&lt;ChoosedSubject&gt; data, OnItemClickListener itemClickListener) {\n        inflater = LayoutInflater.from(context);\n        this.data = data;\n        this.context = context;\n        this.itemClickListener = itemClickListener;\n    }\n\n    @Override\n    public ReportViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = inflater.inflate(R.layout.report_cell, parent, false);\n        ReportViewHolder holder = new ReportViewHolder(view);\n\n        dataBase = new DataBaseHelper(context);\n\n        return holder;\n    }\n\n    //Set Data inside RecyclerView\n    @Override\n    public void onBindViewHolder(ReportViewHolder holder, int position) {\n        ChoosedSubject current = data.get(position);\n        Grades grades = new Grades(context);\n\n        Resources resources = context.getResources();\n        int iconColor;\n        Drawable icon;\n\n        icon = ContextCompat.getDrawable(context, dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedIcon());\n\n        if (dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedIcon() != R.drawable.subject_default) {\n            iconColor = resources.getColor(dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getChoosedColor());\n            icon.setColorFilter(iconColor, PorterDuff.Mode.SRC_IN);\n            holder.icon.setBackground(icon);\n        } else {\n            holder.icon.setImageResource(R.drawable.subject_default);\n        }\n\n        holder.subject.setText(current.getName().toString());\n\n        NumberFormat formatter = NumberFormat.getNumberInstance();\n        formatter.setMinimumFractionDigits(0);\n        formatter.setMaximumFractionDigits(0);\n        String output = formatter.format(dataBase.getSpecificChoosedSubjectAppendingToName(current.getName()).get(0).getAverage());\n\n        int formattedValue = Integer.valueOf(output);\n\n\n        //CHANGING COLOR DEPENDING ON VALUE\n        int boxColor = 0;\n        Drawable box = ContextCompat.getDrawable(context, R.drawable.markbox);\n        Drawable boxBorder = ContextCompat.getDrawable(context, R.drawable.markbox_border);\n\n        if (formattedValue &gt;= 10) {\n            boxColor = resources.getColor(R.color.positive);\n        } else if (formattedValue &gt;= 4 &amp;&amp; formattedValue &lt;= 9) {\n            boxColor = resources.getColor(R.color.neutral);\n        } else if (formattedValue &lt; 4) {\n            boxColor = resources.getColor(R.color.negative);\n\n        }\n\n        box.setAlpha(204);\n        box.setColorFilter(boxColor, PorterDuff.Mode.SRC_IN);\n        boxBorder.setColorFilter(boxColor, PorterDuff.Mode.SRC_IN);\n\n        holder.markbox.setImageDrawable(box);\n        holder.markboxBorder.setImageDrawable(boxBorder);\n\n\n        holder.average.setText(output);\n        holder.average.setTypeface(EasyFonts.robotoBlack(context));\n    }\n\n    @Override\n    public int getItemCount() {\n        return data.size();\n    }\n\n\n    public class ReportViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n\n        TextView subject;\n        ImageView icon;\n        ImageView markbox;\n        ImageView markboxBorder;\n        TextView average;\n\n        public ReportViewHolder(View itemView) {\n            super(itemView);\n            subject = (TextView) itemView.findViewById(R.id.report_subject);\n            icon = (ImageView) itemView.findViewById(R.id.report_icon);\n            markbox = (ImageView) itemView.findViewById(R.id.report_markbox);\n            markboxBorder = (ImageView) itemView.findViewById(R.id.report_markbox_border);\n            average = (TextView) itemView.findViewById(R.id.report_average);\n\n            itemView.setOnClickListener(this);\n        }\n\n        @Override\n        public void onClick(View v) {\n            itemClickListener.onItemClick(v, this.getAdapterPosition());\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Knows anybody what to do? Thank you for your help!!!</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":23271322,"reputation":145,"user_id":17356111,"display_name":"Devck - DC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642437390,"creation_date":1642437390,"answer_id":70744641,"question_id":70744461,"body_markdown":"It is probably because you need to add the cascade in order to let him save in cascade\r\n\r\n```@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)```\r\n\r\nand also, I am not sure if you are using a LAZY fetchType in purpose, but if at any point you have problems loading some data (I mean, if it is bringing to you just null data) it may be because of it, in that case you will have to use EAGER instead of LAZY","title":"SpringBoot JPA - Many To One relation mapped between User and UserStats, but when I get the User from Repo, has no UserStats entities?","body":"<p>It is probably because you need to add the cascade in order to let him save in cascade</p>\n<p><code>@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)</code></p>\n<p>and also, I am not sure if you are using a LAZY fetchType in purpose, but if at any point you have problems loading some data (I mean, if it is bringing to you just null data) it may be because of it, in that case you will have to use EAGER instead of LAZY</p>\n"}],"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70744641,"answer_count":1,"score":1,"last_activity_date":1642437390,"creation_date":1642436630,"question_id":70744461,"body_markdown":"I have a domain entity User, and because I needed to create 2 separate sets of stats for each user for competitive and non-competitive game, it has a OneToMany relation with UserStats and each User should contain 2 UserStat objects in a List&lt;UserStat&gt; userStats object.\r\n\r\nHowever, when I call userRepo.findAllBy(SomeCondition) the returned List&lt;User&gt; contains User objects but those User object don&#39;t contain the UserStat objects?\r\n\r\nUser Class:\r\n\r\n    @Entity(name = &quot;User&quot;)\r\n    @Table(name = &quot;user&quot;)\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class User implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        @Column(name = &quot;username&quot;, unique = true)\r\n        private String username;\r\n    \r\n        @Column(name = &quot;password&quot;)\r\n        private String password;\r\n    \r\n        private String name;\r\n        private String email;\r\n        private String location;\r\n    \r\n        @JsonIgnore\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\r\n        private List&lt;UserStats&gt; userStats;\r\n    }\r\n\r\n\r\nUSER STATS CLASS:\r\n\r\n    @Entity()\r\n    @Table(name = &quot;userStats&quot;)\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class UserStats {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long userStatsId;\r\n    \r\n        private Integer victories;\r\n        private Integer draws;\r\n        private Integer defeats;\r\n    private boolean isLeagueUserStats;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;user_id&quot;)\r\n        private User user;\r\n    }\r\n\r\nUserService SignUp METHOD:\r\n\r\n        public void signUpUser(User user) {\r\n            user.setPassword(bCryptPasswordEncoder.encode(user.getPassword()));\r\n    \r\n   \r\n            User savedUser = userRepository.save(user);\r\n    \r\n            List&lt;UserStats&gt; userStatsList = new ArrayList&lt;&gt;();\r\n    \r\n            UserStats userStats = new UserStats(0, 0, 0,  false, savedUser);\r\n            UserStats leagueUserStats = new UserStats(0, 0, 0, true, savedUser);\r\n    \r\n            userStatsRepository.save(userStats);\r\n            userStatsRepository.save(leagueUserStats);\r\n    \r\n            userStatsList.add(userStats);\r\n            userStatsList.add(leagueUserStats);\r\n    \r\n            user.setUserStats(userStatsList);\r\n    \r\n            User savedUser2 = userRepository.save(user);\r\n    \r\n    }\r\n\r\nHow can I make it so that when I save a User entity it also save&#39;s it&#39;s contained UserStats? How can I make it so when you retrieve User objects from the repository that they contain userStats list?\r\n\r\nThanks","title":"SpringBoot JPA - Many To One relation mapped between User and UserStats, but when I get the User from Repo, has no UserStats entities?","body":"<p>I have a domain entity User, and because I needed to create 2 separate sets of stats for each user for competitive and non-competitive game, it has a OneToMany relation with UserStats and each User should contain 2 UserStat objects in a List userStats object.</p>\n<p>However, when I call userRepo.findAllBy(SomeCondition) the returned List contains User objects but those User object don't contain the UserStat objects?</p>\n<p>User Class:</p>\n<pre><code>@Entity(name = &quot;User&quot;)\n@Table(name = &quot;user&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;username&quot;, unique = true)\n    private String username;\n\n    @Column(name = &quot;password&quot;)\n    private String password;\n\n    private String name;\n    private String email;\n    private String location;\n\n    @JsonIgnore\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\n    private List&lt;UserStats&gt; userStats;\n}\n</code></pre>\n<p>USER STATS CLASS:</p>\n<pre><code>@Entity()\n@Table(name = &quot;userStats&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UserStats {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long userStatsId;\n\n    private Integer victories;\n    private Integer draws;\n    private Integer defeats;\nprivate boolean isLeagueUserStats;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User user;\n}\n</code></pre>\n<p>UserService SignUp METHOD:</p>\n<pre><code>    public void signUpUser(User user) {\n        user.setPassword(bCryptPasswordEncoder.encode(user.getPassword()));\n\n\n        User savedUser = userRepository.save(user);\n\n        List&lt;UserStats&gt; userStatsList = new ArrayList&lt;&gt;();\n\n        UserStats userStats = new UserStats(0, 0, 0,  false, savedUser);\n        UserStats leagueUserStats = new UserStats(0, 0, 0, true, savedUser);\n\n        userStatsRepository.save(userStats);\n        userStatsRepository.save(leagueUserStats);\n\n        userStatsList.add(userStats);\n        userStatsList.add(leagueUserStats);\n\n        user.setUserStats(userStatsList);\n\n        User savedUser2 = userRepository.save(user);\n\n}\n</code></pre>\n<p>How can I make it so that when I save a User entity it also save's it's contained UserStats? How can I make it so when you retrieve User objects from the repository that they contain userStats list?</p>\n<p>Thanks</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":2869366,"reputation":16311,"user_id":2463035,"accept_rate":84,"display_name":"Vasiliy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433691271,"creation_date":1433691271,"answer_id":30695357,"question_id":30695288,"body_markdown":"You should not manipulate UI elements on any thread except the main UI thread.\r\n\r\nSo, in your case you got two choices: either use `runOnUIThread(Runnable)`, or use `AsyncTask` and do UI manipulations in `onPostExecute()`.\r\n\r\nI&#39;d go with `AsyncTask` - it is intended for this kind of scenarios.","title":"Editing TextView outside the UI Thread","body":"<p>You should not manipulate UI elements on any thread except the main UI thread.</p>\n\n<p>So, in your case you got two choices: either use <code>runOnUIThread(Runnable)</code>, or use <code>AsyncTask</code> and do UI manipulations in <code>onPostExecute()</code>.</p>\n\n<p>I'd go with <code>AsyncTask</code> - it is intended for this kind of scenarios.</p>\n"},{"tags":[],"owner":{"account_id":2065639,"reputation":28794,"user_id":1841194,"accept_rate":93,"display_name":"frogatto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433691275,"creation_date":1433691275,"answer_id":30695358,"question_id":30695288,"body_markdown":"UI manipulation must be done in main/ui thread. You have two options for this case:\r\n\r\n - You have a reference to your Activity object.\r\n        \r\n        myActivity.runOnUiThread(...);\r\n\r\n - Bind a handler to the main thread and:\r\n\r\n        // Main thread\r\n        Handler handler = new Handler();\r\n\r\n        // Another thread\r\n        handler.post(new Runnable(){...});","title":"Editing TextView outside the UI Thread","body":"<p>UI manipulation must be done in main/ui thread. You have two options for this case:</p>\n\n<ul>\n<li><p>You have a reference to your Activity object.</p>\n\n<pre><code>myActivity.runOnUiThread(...);\n</code></pre></li>\n<li><p>Bind a handler to the main thread and:</p>\n\n<pre><code>// Main thread\nHandler handler = new Handler();\n\n// Another thread\nhandler.post(new Runnable(){...});\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3345612,"reputation":16643,"user_id":2810825,"accept_rate":70,"display_name":"Gil Moshayof"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433691309,"creation_date":1433691309,"answer_id":30695368,"question_id":30695288,"body_markdown":"You&#39;re not allowed to touch Views on any thread other than the UI thread.\r\n\r\nTo solve this, try the following:\r\n\r\n    void mostrarFrases(final int pos){\r\n    \r\n        runOnUiThread(new Runnable() {\r\n          public void run() {\r\n            Mostrar = (TextView) findViewById(R.id.Texto);\r\n            Mostrar.setText(Frases[pos*2+1], 0, Frases[pos*2+1].length);\r\n         }});\r\n    }","title":"Editing TextView outside the UI Thread","body":"<p>You're not allowed to touch Views on any thread other than the UI thread.</p>\n\n<p>To solve this, try the following:</p>\n\n<pre><code>void mostrarFrases(final int pos){\n\n    runOnUiThread(new Runnable() {\n      public void run() {\n        Mostrar = (TextView) findViewById(R.id.Texto);\n        Mostrar.setText(Frases[pos*2+1], 0, Frases[pos*2+1].length);\n     }});\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1468666332,"creation_date":1433691346,"answer_id":30695376,"question_id":30695288,"body_markdown":"**Rule:** You cannot manipulate UI elements outside the UI thread.\r\n\r\nHere is the proper way to do things:\r\n\r\n    //Asuming that your activiy is named MainActivity\r\n\r\n            new Thread(new Runnable() {\r\n                public void run() {\r\n                    try {\r\n                        pos = Calculo.Calcular();\r\n                        //Manipulate your UI elements as following\r\n                        MainActivity.this.runOnUiThread(new Runnable() {\r\n                            public void run() {\r\n                                mostrarFrases(pos);\r\n                            }\r\n                        });\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }).start();\r\n        }","title":"Editing TextView outside the UI Thread","body":"<p><strong>Rule:</strong> You cannot manipulate UI elements outside the UI thread.</p>\n\n<p>Here is the proper way to do things:</p>\n\n<pre><code>//Asuming that your activiy is named MainActivity\n\n        new Thread(new Runnable() {\n            public void run() {\n                try {\n                    pos = Calculo.Calcular();\n                    //Manipulate your UI elements as following\n                    MainActivity.this.runOnUiThread(new Runnable() {\n                        public void run() {\n                            mostrarFrases(pos);\n                        }\n                    });\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }).start();\n    }\n</code></pre>\n"}],"owner":{"account_id":5605619,"reputation":118,"user_id":4440343,"accept_rate":75,"display_name":"woske"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":30695376,"answer_count":4,"score":0,"last_activity_date":1642437330,"creation_date":1433690888,"question_id":30695288,"body_markdown":"I have the below code:\r\n\r\n    \t\t\tnew Thread(new Runnable(){\r\n    \t\t\t\tpublic void run(){\r\n\t\t    \t\t\ttry {\r\n\t\t\t\t\t\t\tpos = Calculo.Calcular();\r\n\t\t\t\t\t\t\tmostrarFrases(pos);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}).start();\r\n\r\nwhere mostrarFrases is:\r\n\r\n    void mostrarFrases(int pos){\r\n    \t\r\n\t    Mostrar = (TextView) findViewById(R.id.Texto);\r\n\t    Mostrar.setText(Frases[pos*2+1], 0, Frases[pos*2+1].length);\r\n    }\r\n\r\nIt works if i haven&#39;t any thread but without it does not work. I need thread because i need to wait until Calculo.Calcular() finish its work.","title":"Editing TextView outside the UI Thread","body":"<p>I have the below code:</p>\n\n<pre><code>            new Thread(new Runnable(){\n                public void run(){\n                    try {\n                        pos = Calculo.Calcular();\n                        mostrarFrases(pos);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }).start();\n</code></pre>\n\n<p>where mostrarFrases is:</p>\n\n<pre><code>void mostrarFrases(int pos){\n\n    Mostrar = (TextView) findViewById(R.id.Texto);\n    Mostrar.setText(Frases[pos*2+1], 0, Frases[pos*2+1].length);\n}\n</code></pre>\n\n<p>It works if i haven't any thread but without it does not work. I need thread because i need to wait until Calculo.Calcular() finish its work.</p>\n"},{"tags":["java","amazon-web-services"],"comments":[{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1642438266,"post_id":70744470,"comment_id":125065429,"body_markdown":"Are you making more calls inside the `for` loop? There&#39;s just a single API call in the code you posted.","body":"Are you making more calls inside the <code>for</code> loop? There&#39;s just a single API call in the code you posted."}],"answers":[{"tags":[],"owner":{"account_id":23897984,"reputation":2653,"user_id":17896613,"display_name":"Kaustubh Khavnekar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642437259,"creation_date":1642437259,"answer_id":70744608,"question_id":70744470,"body_markdown":"From the [AWS Certificates Manager Limits page][1]:\r\n\r\n## API rate quotas&lt;a name=&quot;api-rate-limits&quot;&gt;&lt;/a&gt;\r\n\r\nThe following quotas apply to the ACM API for each region and account\\. ACM throttles API requests at different quotas depending on the API operation\\. Throttling means that ACM rejects an otherwise valid request because the request exceeds the operation&#39;s quota for the number of requests per second\\. When a request is throttled, ACM returns a `ThrottlingException` error\\. The following table lists each API operation and the quota at which ACM throttles requests for that operation\\. \r\n\r\n**Requests\\-per\\-second quota for each ACM API operation**\r\n\r\n\r\n****  \r\n\r\n| API call | Requests per second | \r\n| --- | --- | \r\n|  `AddTagsToCertificate`  |  5  | \r\n|  `DeleteCertificate`  |  10  | \r\n|  `DescribeCertificate`  |  10  | \r\n|  `ExportCertificate`  |  5  | \r\n|  `GetAccountConfiguration`  |  1  | \r\n| `GetCertificate` |  10  | \r\n|  `ImportCertificate`  |  1  | \r\n|  `ListCertificates`  |  1  | \r\n|  `ListTagsForCertificate`  |  10  | \r\n|  `PutAccountConfiguration`  |  1  | \r\n|  `RemoveTagsFromCertificate`  |  5  | \r\n| `RenewCertificate` |  5  | \r\n|  `RequestCertificate`  |  5  | \r\n|  `ResendValidationEmail`  |  1  | \r\n|  `UpdateCertificateOptions`  |  5  | \r\n\r\nYou can resolve this by putting a sleep or wait between each request.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/acm/latest/userguide/acm-limits.html#api-rate-limits","title":"Rate Exceeding/Throttling Issue on AWS services","body":"<p>From the <a href=\"https://docs.aws.amazon.com/acm/latest/userguide/acm-limits.html#api-rate-limits\" rel=\"nofollow noreferrer\">AWS Certificates Manager Limits page</a>:</p>\n<h2>API rate quotas</h2>\n<p>The following quotas apply to the ACM API for each region and account. ACM throttles API requests at different quotas depending on the API operation. Throttling means that ACM rejects an otherwise valid request because the request exceeds the operation's quota for the number of requests per second. When a request is throttled, ACM returns a <code>ThrottlingException</code> error. The following table lists each API operation and the quota at which ACM throttles requests for that operation.</p>\n<p><strong>Requests-per-second quota for each ACM API operation</strong></p>\n<hr />\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>API call</th>\n<th>Requests per second</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>AddTagsToCertificate</code></td>\n<td>5</td>\n</tr>\n<tr>\n<td><code>DeleteCertificate</code></td>\n<td>10</td>\n</tr>\n<tr>\n<td><code>DescribeCertificate</code></td>\n<td>10</td>\n</tr>\n<tr>\n<td><code>ExportCertificate</code></td>\n<td>5</td>\n</tr>\n<tr>\n<td><code>GetAccountConfiguration</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code>GetCertificate</code></td>\n<td>10</td>\n</tr>\n<tr>\n<td><code>ImportCertificate</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code>ListCertificates</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code>ListTagsForCertificate</code></td>\n<td>10</td>\n</tr>\n<tr>\n<td><code>PutAccountConfiguration</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code>RemoveTagsFromCertificate</code></td>\n<td>5</td>\n</tr>\n<tr>\n<td><code>RenewCertificate</code></td>\n<td>5</td>\n</tr>\n<tr>\n<td><code>RequestCertificate</code></td>\n<td>5</td>\n</tr>\n<tr>\n<td><code>ResendValidationEmail</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code>UpdateCertificateOptions</code></td>\n<td>5</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>You can resolve this by putting a sleep or wait between each request.</p>\n"}],"owner":{"account_id":8013069,"reputation":1135,"user_id":6044191,"accept_rate":59,"display_name":"Ihsan Haikal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70744608,"answer_count":1,"score":1,"last_activity_date":1642437259,"creation_date":1642436666,"question_id":70744470,"body_markdown":"I recently came across the Rate Exceeding/Throttling issues on multiple AWS services with a simple code such as follow:\r\n\r\n     AWSCertificateManager cm = AWSCertificateManagerClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).withCredentials(new AWSStaticCredentialsProvider(credentials)).build();\r\n        \r\n     for(CertificateSummary certificateSummary : cm.listCertificates(new ListCertificatesRequest()).getCertificateSummaryList()){\r\n        \t\t\r\n        ....\r\n        \r\n        }\r\n\r\n\r\nwith the error message like this: \r\n\r\n&gt; Rate exceeded (Service: AWSCertificateManager; Status Code: 400; Error\r\n&gt; Code: ThrottlingException; Request ID:\r\n&gt; 61866e5f-f74a-46cc-9557-8b36f75cc7b1; Proxy: null)\r\n\r\nBut I am not sure why it was triggered in the first place. Any idea on how to resolve this?","title":"Rate Exceeding/Throttling Issue on AWS services","body":"<p>I recently came across the Rate Exceeding/Throttling issues on multiple AWS services with a simple code such as follow:</p>\n<pre><code> AWSCertificateManager cm = AWSCertificateManagerClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).withCredentials(new AWSStaticCredentialsProvider(credentials)).build();\n    \n for(CertificateSummary certificateSummary : cm.listCertificates(new ListCertificatesRequest()).getCertificateSummaryList()){\n            \n    ....\n    \n    }\n</code></pre>\n<p>with the error message like this:</p>\n<blockquote>\n<p>Rate exceeded (Service: AWSCertificateManager; Status Code: 400; Error\nCode: ThrottlingException; Request ID:\n61866e5f-f74a-46cc-9557-8b36f75cc7b1; Proxy: null)</p>\n</blockquote>\n<p>But I am not sure why it was triggered in the first place. Any idea on how to resolve this?</p>\n"},{"tags":["java","android","realm","realm-java"],"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":2,"creation_date":1489657154,"post_id":42830130,"comment_id":72770281,"body_markdown":"https://realm.io/docs/java/latest/api/io/realm/RealmQuery.html#findAllSorted-java.lang.String:A-io.realm.Sort:A-","body":"<a href=\"https://realm.io/docs/java/latest/api/io/realm/RealmQuery.html#findAllSorted-java.lang.String:A-io.realm.Sort:A-\" rel=\"nofollow noreferrer\">realm.io/docs/java/latest/api/io/realm/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1490013167,"creation_date":1489657916,"answer_id":42830525,"question_id":42830130,"body_markdown":"You&#39;re basically trying to sort a `realmList` depending on multiple parameters.\r\nHere&#39;s the way to go:\r\n\r\n    String[] fields = {&quot;name&quot;,&quot;fromDate&quot;,&quot;currentDate&quot;,&quot;toDate&quot;};\r\n    Sort[] howToSort = {Sort.ASCENDING, Sort.ASCENDING, Sort.ASCENDING, Sort.ASCENDING};\r\n\r\nAnd then, you simply do a usual realm selection:\r\n\r\n    realm.where(YourRealmObject.class).findAllSorted(fileds, howToSort);\r\n\r\nAs @EpicPandaForce commented, please check the [docs][1].\r\n\r\n\r\n  [1]: https://realm.io/docs/java/latest/api/io/realm/RealmQuery.html#findAllSorted-java.lang.String:A-io.realm.Sort:A-","title":"Android realm sorting list of objects","body":"<p>You're basically trying to sort a <code>realmList</code> depending on multiple parameters.\nHere's the way to go:</p>\n\n<pre><code>String[] fields = {\"name\",\"fromDate\",\"currentDate\",\"toDate\"};\nSort[] howToSort = {Sort.ASCENDING, Sort.ASCENDING, Sort.ASCENDING, Sort.ASCENDING};\n</code></pre>\n\n<p>And then, you simply do a usual realm selection:</p>\n\n<pre><code>realm.where(YourRealmObject.class).findAllSorted(fileds, howToSort);\n</code></pre>\n\n<p>As @EpicPandaForce commented, please check the <a href=\"https://realm.io/docs/java/latest/api/io/realm/RealmQuery.html#findAllSorted-java.lang.String:A-io.realm.Sort:A-\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"},{"tags":[],"owner":{"account_id":3661982,"reputation":3096,"user_id":3051503,"display_name":"Muhaiminur Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533016676,"creation_date":1533016676,"answer_id":51606292,"question_id":42830130,"body_markdown":"You can try this way..\r\n\r\n    RealmResults&lt;Notification_History&gt;notification_histories=realm.where(Notification_History.class).findAll().sort(&quot;notification_count&quot;);","title":"Android realm sorting list of objects","body":"<p>You can try this way..</p>\n\n<pre><code>RealmResults&lt;Notification_History&gt;notification_histories=realm.where(Notification_History.class).findAll().sort(\"notification_count\");\n</code></pre>\n"}],"owner":{"account_id":3838239,"reputation":13,"user_id":3182081,"display_name":"Alexander"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":42830525,"answer_count":2,"score":1,"last_activity_date":1642437213,"creation_date":1489656879,"question_id":42830130,"body_markdown":"How I can sort list of **RealmObjects** by two parametrs? For example first param is **name** (Need to sort it alphabetically), second parameter is a bit complicated and related to 3 dates: I have a range dates (for example **fromDate** **currentDate** and **toDate**). Need to put to the head of the list all items wich happening today. Also do not forget about alphabetically sorting.","title":"Android realm sorting list of objects","body":"<p>How I can sort list of <strong>RealmObjects</strong> by two parametrs? For example first param is <strong>name</strong> (Need to sort it alphabetically), second parameter is a bit complicated and related to 3 dates: I have a range dates (for example <strong>fromDate</strong> <strong>currentDate</strong> and <strong>toDate</strong>). Need to put to the head of the list all items wich happening today. Also do not forget about alphabetically sorting.</p>\n"},{"tags":["java","android","android-volley","jsonobjectrequest"],"comments":[{"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"score":0,"creation_date":1486384305,"post_id":42066860,"comment_id":71306921,"body_markdown":"Take a look at the answer I posted. It should help you out.","body":"Take a look at the answer I posted. It should help you out."}],"answers":[{"tags":[],"owner":{"account_id":6958242,"reputation":718,"user_id":5338595,"display_name":"rohitanand"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486382350,"creation_date":1486382350,"answer_id":42067271,"question_id":42066860,"body_markdown":"First Create your JsonObject like\r\n\r\n        JSONObject js = new JSONObject();\r\n        try {\r\n            js.put(&quot;email&quot;, &quot;adasda&quot;);\r\n            js.put(&quot;address&quot;, &quot;adasd&quot;);\r\n            js.put(&quot;pincode&quot;, &quot;adadasd&quot;);\r\n\r\n        }catch (JSONException e) {\r\n                e.printStackTrace();\r\n        }\r\n\r\n\r\nThen your JSON request, take a careful look at get headers.\r\n\r\n        JsonObjectRequest jsonObjReq = new JsonObjectRequest(\r\n        Request.Method.POST,url, js,\r\n        new Response.Listener&lt;JSONObject&gt;() {\r\n            @Override\r\n            public void onResponse(JSONObject response) {\r\n                Log.d(TAG, response.toString());\r\n\r\n                msgResponse.setText(response.toString());\r\n                hideProgressDialog();\r\n            }\r\n        }, new Response.ErrorListener() {\r\n\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                VolleyLog.d(TAG, &quot;Error: &quot; + error.getMessage());\r\n                hideProgressDialog();\r\n            }\r\n        }) {\r\n\r\n    /**\r\n     * Passing some request headers\r\n     * */\r\n    @Override\r\n    public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n         HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\r\n         headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=utf-8&quot;);\r\n        return headers;\r\n    }\r\n\r\n","title":"Having trouble while consuming PHP Api via Volley library Android","body":"<p>First Create your JsonObject like</p>\n\n<pre><code>    JSONObject js = new JSONObject();\n    try {\n        js.put(\"email\", \"adasda\");\n        js.put(\"address\", \"adasd\");\n        js.put(\"pincode\", \"adadasd\");\n\n    }catch (JSONException e) {\n            e.printStackTrace();\n    }\n</code></pre>\n\n<p>Then your JSON request, take a careful look at get headers.</p>\n\n<pre><code>    JsonObjectRequest jsonObjReq = new JsonObjectRequest(\n    Request.Method.POST,url, js,\n    new Response.Listener&lt;JSONObject&gt;() {\n        @Override\n        public void onResponse(JSONObject response) {\n            Log.d(TAG, response.toString());\n\n            msgResponse.setText(response.toString());\n            hideProgressDialog();\n        }\n    }, new Response.ErrorListener() {\n\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            VolleyLog.d(TAG, \"Error: \" + error.getMessage());\n            hideProgressDialog();\n        }\n    }) {\n\n/**\n * Passing some request headers\n * */\n@Override\npublic Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n     HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\n     headers.put(\"Content-Type\", \"application/json; charset=utf-8\");\n    return headers;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6617826,"reputation":39,"user_id":5110503,"display_name":"Vishal Singh"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1486383155,"creation_date":1486383155,"answer_id":42067519,"question_id":42066860,"body_markdown":" private void getWalletDetails(){\r\n\r\n        final ProgressDialog  pDialog;  // = new ProgressDialog(mcontext);\r\n        StringRequest stringRequest;\r\n\r\n        pDialog = GifDialog.ctor(mcontext);\r\n        pDialog.show();\r\n\r\n        stringRequest = new StringRequest(Request.Method.POST, place your url,\r\n                new Response.Listener&lt;String&gt;() {\r\n                    @Override\r\n                    public void onResponse(String s) {\r\n                        //Disimissing the progress dialog\r\n                        pDialog.dismiss();\r\n                        //Showing toast message of the response\r\n\r\n                        try {\r\n\r\n                            JSONObject jsonObject = new JSONObject(s);\r\n       \r\n                            totbal.setText(&quot;\\u20B9 &quot;+jsonObject.getString(&quot;avail_balance&quot;));\r\n                            JSONArray jsonArray = jsonObject.getJSONArray(&quot;tx_detail&quot;);\r\n\r\n                            for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n\r\n                                JSONObject object = jsonArray.getJSONObject(i);\r\n                                mode = new Model_Wallet_Transaction();\r\n                                mode.setStr1(object.getString(&quot;date&quot;));\r\n                                mode.setStr4(object.getString(&quot;insert_time&quot;));\r\n                                mode.setStr2(object.getString(&quot;name&quot;));\r\n                         \r\n                                mode.setStr3(object.getString(&quot;transaction_id_no&quot;));\r\n                                mode.setAmount(object.getString(&quot;amount&quot;));\r\n                                mode.setTxtype(object.getString(&quot;tx_type&quot;));\r\n                                modlist.add(mode);\r\n                            }\r\n                            // Collections.sort(modlist, new StringDateComparator());\r\n                            adp = new CustomAdapter_Wallet_Transaction(getApplicationContext(), modlist);\r\n                            list.setAdapter(adp);\r\n\r\n                        } catch (Exception e) {\r\n\r\n                            Log.e(&quot;Error&quot;, e.toString());\r\n                        }\r\n                        // Toast.makeText(Wallet_Transaction.this, s, Toast.LENGTH_LONG).show();\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError volleyError) {\r\n                        //Dismissing the progress dialog\r\n                        pDialog.dismiss();\r\n                        //Showing toast\r\n                        //Toast.makeText(Wallet_Transaction.this, volleyError.getMessage().toString(), Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n                }) {\r\n\r\n            @Override\r\n            protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n\r\n                //Creating parameters\r\n                Map&lt;String, String&gt; params = new Hashtable&lt;String, String&gt;();\r\n                //Adding parameters\r\n                params.put(&quot;user_id&quot;, UserId);           \r\n                params.put(&quot;deviceId&quot;, DeviceId);\r\n             \r\n                return params;\r\n            }\r\n        };\r\n\r\n        //Creating a Request Queue\r\n        RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n        //Adding request to the queue\r\n        requestQueue.add(stringRequest);\r\n    }","title":"Having trouble while consuming PHP Api via Volley library Android","body":"<p>private void getWalletDetails(){</p>\n\n<pre><code>    final ProgressDialog  pDialog;  // = new ProgressDialog(mcontext);\n    StringRequest stringRequest;\n\n    pDialog = GifDialog.ctor(mcontext);\n    pDialog.show();\n\n    stringRequest = new StringRequest(Request.Method.POST, place your url,\n            new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String s) {\n                    //Disimissing the progress dialog\n                    pDialog.dismiss();\n                    //Showing toast message of the response\n\n                    try {\n\n                        JSONObject jsonObject = new JSONObject(s);\n\n                        totbal.setText(\"\\u20B9 \"+jsonObject.getString(\"avail_balance\"));\n                        JSONArray jsonArray = jsonObject.getJSONArray(\"tx_detail\");\n\n                        for (int i = 0; i &lt; jsonArray.length(); i++) {\n\n                            JSONObject object = jsonArray.getJSONObject(i);\n                            mode = new Model_Wallet_Transaction();\n                            mode.setStr1(object.getString(\"date\"));\n                            mode.setStr4(object.getString(\"insert_time\"));\n                            mode.setStr2(object.getString(\"name\"));\n\n                            mode.setStr3(object.getString(\"transaction_id_no\"));\n                            mode.setAmount(object.getString(\"amount\"));\n                            mode.setTxtype(object.getString(\"tx_type\"));\n                            modlist.add(mode);\n                        }\n                        // Collections.sort(modlist, new StringDateComparator());\n                        adp = new CustomAdapter_Wallet_Transaction(getApplicationContext(), modlist);\n                        list.setAdapter(adp);\n\n                    } catch (Exception e) {\n\n                        Log.e(\"Error\", e.toString());\n                    }\n                    // Toast.makeText(Wallet_Transaction.this, s, Toast.LENGTH_LONG).show();\n                }\n            },\n            new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError volleyError) {\n                    //Dismissing the progress dialog\n                    pDialog.dismiss();\n                    //Showing toast\n                    //Toast.makeText(Wallet_Transaction.this, volleyError.getMessage().toString(), Toast.LENGTH_LONG).show();\n                }\n\n            }) {\n\n        @Override\n        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n\n            //Creating parameters\n            Map&lt;String, String&gt; params = new Hashtable&lt;String, String&gt;();\n            //Adding parameters\n            params.put(\"user_id\", UserId);           \n            params.put(\"deviceId\", DeviceId);\n\n            return params;\n        }\n    };\n\n    //Creating a Request Queue\n    RequestQueue requestQueue = Volley.newRequestQueue(this);\n    //Adding request to the queue\n    requestQueue.add(stringRequest);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1532511507,"creation_date":1486383945,"answer_id":42067774,"question_id":42066860,"body_markdown":"&gt; Easy cheesy lemon squeezy!\r\n\r\n# Some code\r\n\r\n    HashMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n    params.put(&quot;id&quot;, &quot;300&quot;);\r\n    params.put(&quot;address&quot;, &quot;Mars&quot;);\r\n    params.put(&quot;pincode&quot;, &quot;***&quot;);\r\n    params.put(&quot;name&quot;, &quot;Jon Skeet&quot;);\r\n    params.put(&quot;mobile&quot;, &quot;911&quot;);\r\n    JsonObjectRequest request = new JsonObjectRequest(\r\n                                /*URL*/, \r\n                                new JSONObject(params),\r\n                                new Response.Listener&lt;JSONObject&gt;(){/*...*/});","title":"Having trouble while consuming PHP Api via Volley library Android","body":"<blockquote>\n  <p>Easy cheesy lemon squeezy!</p>\n</blockquote>\n\n<h1>Some code</h1>\n\n<pre><code>HashMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\nparams.put(\"id\", \"300\");\nparams.put(\"address\", \"Mars\");\nparams.put(\"pincode\", \"***\");\nparams.put(\"name\", \"Jon Skeet\");\nparams.put(\"mobile\", \"911\");\nJsonObjectRequest request = new JsonObjectRequest(\n                            /*URL*/, \n                            new JSONObject(params),\n                            new Response.Listener&lt;JSONObject&gt;(){/*...*/});\n</code></pre>\n"}],"owner":{"account_id":9603400,"reputation":9068,"user_id":7130121,"accept_rate":63,"display_name":"Abhishek Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42067774,"answer_count":3,"score":0,"last_activity_date":1642437166,"creation_date":1486381083,"question_id":42066860,"body_markdown":"I am able to consume api via volley library which use normal get post method but my php team just changed my api which accept json . i know there is is `JsonObjectrequest` in `volley` but i don&#39;t know how to put parameters in `JsonObjectRequest. Any help is appriciated. \r\n\r\n**PHP API**\r\n\r\n    &lt;?php \r\n    if($_SERVER[&#39;REQUEST_METHOD&#39;]==&#39;POST&#39;){\r\n    $data_back = json_decode(file_get_contents(&#39;php://input&#39;));\r\n    header(&quot;Content-type: application/json&quot;);\r\n    require &quot;conn.php&quot;;\r\n    $id = $data_back-&gt;{&quot;id&quot;};\r\n    $address = $data_back-&gt;{&quot;address&quot;};\r\n    $pincode = $data_back-&gt;{&quot;pincode&quot;};\r\n    $name = $data_back-&gt;{&quot;name&quot;};\r\n    $mobile = $data_back-&gt;{&quot;mobile&quot;};\r\n\r\n    $sql = &quot;UPDATE tbl_addressbook SET name = &#39;$name&#39;, address = &#39;$address&#39;, pincode = &#39;$pincode&#39;, mobile = &#39;$mobile&#39; WHERE  id = $id&quot;;\r\n\r\n    if(mysqli_query($conn,$sql)){\r\n        echo &#39;Address Book Updated Successfully&#39;;\r\n    }\r\n    else{\r\n       echo &#39;Could Not Update Your Address Book&#39;;\r\n      }\r\n    }\r\n    ?&gt; \r\n\r\n**Volley Request**\r\n\r\n    StringRequest stringRequest=new StringRequest(Request.Method.POST, Config.UPDATE_ADDRESS_BOOK,\r\n                                    new Response.Listener&lt;String&gt;() {\r\n                                        @Override\r\n                                        public void onResponse(String response) {\r\n                                            Toast.makeText(mContext,&quot;Address Changed&quot;,Toast.LENGTH_LONG).show();\r\n                                            list.set(getAdapterPosition(),new AddressBookModel(bookModel.getId(),\r\n                                                    etName.getText().toString(),\r\n                                                    etAddress.getText().toString(),\r\n                                                    etPinCode.getText().toString(),\r\n                                                    etPhone.getText().toString(),\r\n                                                    bookModel.getDefAddress()));\r\n                                            d.dismiss();\r\n                                            progress.dismiss();\r\n                                            ((Activity)mContext).runOnUiThread(new Runnable() {\r\n                                                @Override\r\n                                                public void run() {\r\n                                                    notifyDataSetChanged();\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    }, new Response.ErrorListener() {\r\n                                @Override\r\n                                public void onErrorResponse(VolleyError error) {\r\n                                    Toast.makeText(mContext,&quot;Something Went Wrong \\n ttry again later&quot;,Toast.LENGTH_LONG).show();\r\n                                }\r\n                            }){\r\n                                @Override\r\n                                protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                                    Map&lt;String, String&gt; map=new HashMap&lt;String, String&gt;();\r\n                                    map.put(&quot;id&quot;,bookModel.getId());\r\n                                    map.put(&quot;name&quot;,etName.getText().toString());\r\n                                    map.put(&quot;address&quot;,etAddress.getText().toString());\r\n                                    map.put(&quot;pincode&quot;,etPinCode.getText().toString());\r\n                                    map.put(&quot;phone&quot;,etPhone.getText().toString());\r\n                                    return checkParams(map);\r\n                                }\r\n                                private Map&lt;String, String&gt; checkParams(Map&lt;String, String&gt; map){\r\n                                    Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = map.entrySet().iterator();\r\n                                    while (it.hasNext()) {\r\n                                        Map.Entry&lt;String, String&gt; pairs = (Map.Entry&lt;String, String&gt;)it.next();\r\n                                        if(pairs.getValue()==null){\r\n                                            map.put(pairs.getKey(), &quot;&quot;);\r\n                                        }\r\n                                    }\r\n                                    return map;\r\n                                }\r\n                            };\r\n                            VolleySingleton.getInstance(mContext).addToRequestQueue(stringRequest);","title":"Having trouble while consuming PHP Api via Volley library Android","body":"<p>I am able to consume api via volley library which use normal get post method but my php team just changed my api which accept json . i know there is is <code>JsonObjectrequest</code> in <code>volley</code> but i don't know how to put parameters in `JsonObjectRequest. Any help is appriciated. </p>\n\n<p><strong>PHP API</strong></p>\n\n<pre><code>&lt;?php \nif($_SERVER['REQUEST_METHOD']=='POST'){\n$data_back = json_decode(file_get_contents('php://input'));\nheader(\"Content-type: application/json\");\nrequire \"conn.php\";\n$id = $data_back-&gt;{\"id\"};\n$address = $data_back-&gt;{\"address\"};\n$pincode = $data_back-&gt;{\"pincode\"};\n$name = $data_back-&gt;{\"name\"};\n$mobile = $data_back-&gt;{\"mobile\"};\n\n$sql = \"UPDATE tbl_addressbook SET name = '$name', address = '$address', pincode = '$pincode', mobile = '$mobile' WHERE  id = $id\";\n\nif(mysqli_query($conn,$sql)){\n    echo 'Address Book Updated Successfully';\n}\nelse{\n   echo 'Could Not Update Your Address Book';\n  }\n}\n?&gt; \n</code></pre>\n\n<p><strong>Volley Request</strong></p>\n\n<pre><code>StringRequest stringRequest=new StringRequest(Request.Method.POST, Config.UPDATE_ADDRESS_BOOK,\n                                new Response.Listener&lt;String&gt;() {\n                                    @Override\n                                    public void onResponse(String response) {\n                                        Toast.makeText(mContext,\"Address Changed\",Toast.LENGTH_LONG).show();\n                                        list.set(getAdapterPosition(),new AddressBookModel(bookModel.getId(),\n                                                etName.getText().toString(),\n                                                etAddress.getText().toString(),\n                                                etPinCode.getText().toString(),\n                                                etPhone.getText().toString(),\n                                                bookModel.getDefAddress()));\n                                        d.dismiss();\n                                        progress.dismiss();\n                                        ((Activity)mContext).runOnUiThread(new Runnable() {\n                                            @Override\n                                            public void run() {\n                                                notifyDataSetChanged();\n                                            }\n                                        });\n                                    }\n                                }, new Response.ErrorListener() {\n                            @Override\n                            public void onErrorResponse(VolleyError error) {\n                                Toast.makeText(mContext,\"Something Went Wrong \\n ttry again later\",Toast.LENGTH_LONG).show();\n                            }\n                        }){\n                            @Override\n                            protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                                Map&lt;String, String&gt; map=new HashMap&lt;String, String&gt;();\n                                map.put(\"id\",bookModel.getId());\n                                map.put(\"name\",etName.getText().toString());\n                                map.put(\"address\",etAddress.getText().toString());\n                                map.put(\"pincode\",etPinCode.getText().toString());\n                                map.put(\"phone\",etPhone.getText().toString());\n                                return checkParams(map);\n                            }\n                            private Map&lt;String, String&gt; checkParams(Map&lt;String, String&gt; map){\n                                Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = map.entrySet().iterator();\n                                while (it.hasNext()) {\n                                    Map.Entry&lt;String, String&gt; pairs = (Map.Entry&lt;String, String&gt;)it.next();\n                                    if(pairs.getValue()==null){\n                                        map.put(pairs.getKey(), \"\");\n                                    }\n                                }\n                                return map;\n                            }\n                        };\n                        VolleySingleton.getInstance(mContext).addToRequestQueue(stringRequest);\n</code></pre>\n"},{"tags":["java","android","android-mediaplayer","android-resources","android-audiomanager"],"answers":[{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1489223363,"creation_date":1439938464,"answer_id":32083899,"question_id":32083579,"body_markdown":"Here&#39;s a step by step short tutorial:\r\n\r\n - 1st - Create a &quot;raw&quot; directory in your res folder. \r\n - 2nd - Put your mp3 file inside that directory (res/raw/mySong.mp3).\r\n - 3rd - In your onCreate method put the following code:\r\n\r\n        MediaPlayer mp = MediaPlayer.create(this,R.raw.mySong);\r\n        mp.start();\r\n\r\nIf you want to access an external file:\r\n\r\n    MediaPlayer mp = MediaPlayer.create(this, Uri.parse(Environment.getExternalStorageDirectory().getPath()+ &quot;/Music/mySong.mp3&quot;)););\r\n    mp.start();\r\n\r\nAnd ofc, don&#39;t forget the permissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;","title":"Audio File Path On Android Device","body":"<p>Here's a step by step short tutorial:</p>\n\n<ul>\n<li>1st - Create a \"raw\" directory in your res folder. </li>\n<li>2nd - Put your mp3 file inside that directory (res/raw/mySong.mp3).</li>\n<li><p>3rd - In your onCreate method put the following code:</p>\n\n<pre><code>MediaPlayer mp = MediaPlayer.create(this,R.raw.mySong);\nmp.start();\n</code></pre></li>\n</ul>\n\n<p>If you want to access an external file:</p>\n\n<pre><code>MediaPlayer mp = MediaPlayer.create(this, Uri.parse(Environment.getExternalStorageDirectory().getPath()+ \"/Music/mySong.mp3\")););\nmp.start();\n</code></pre>\n\n<p>And ofc, don't forget the permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6249043,"reputation":1533,"user_id":4859813,"accept_rate":75,"display_name":"Mark F"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489228723,"creation_date":1489228723,"answer_id":42734159,"question_id":32083579,"body_markdown":"I made a short video [here][1] showing how you can set a piece of audio already stored on your phone to a MediaPlayer object. Hope it helps.\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=6-y4Ecuo2WQ&amp;t=1s\r\n","title":"Audio File Path On Android Device","body":"<p>I made a short video <a href=\"https://www.youtube.com/watch?v=6-y4Ecuo2WQ&amp;t=1s\" rel=\"nofollow noreferrer\">here</a> showing how you can set a piece of audio already stored on your phone to a MediaPlayer object. Hope it helps.</p>\n"}],"owner":{"account_id":6249043,"reputation":1533,"user_id":4859813,"accept_rate":75,"display_name":"Mark F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3281,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32083899,"answer_count":2,"score":1,"last_activity_date":1642437029,"creation_date":1439936679,"question_id":32083579,"body_markdown":"I have an mp3 file on my *Galaxy S6* called `song`. I have a simple app with one `Button` that when clicked, I&#39;d like my song file to play. \r\n\r\nHow can I get the path of that song and assign in to my `MediaPlayer` object?.","title":"Audio File Path On Android Device","body":"<p>I have an mp3 file on my <em>Galaxy S6</em> called <code>song</code>. I have a simple app with one <code>Button</code> that when clicked, I'd like my song file to play.</p>\n<p>How can I get the path of that song and assign in to my <code>MediaPlayer</code> object?.</p>\n"},{"tags":["java","android","image","zooming"],"comments":[{"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"score":0,"creation_date":1485119975,"post_id":41795962,"comment_id":70780672,"body_markdown":"I posted you an answer you might take a look at.","body":"I posted you an answer you might take a look at."},{"owner":{"account_id":6649069,"reputation":2559,"user_id":5131929,"accept_rate":79,"display_name":"unos baghaii"},"score":0,"creation_date":1485155660,"post_id":41795962,"comment_id":70789749,"body_markdown":"@anix-pasbesoin . sure, I will  test it and post the say the result here","body":"@anix-pasbesoin . sure, I will  test it and post the say the result here"}],"answers":[{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1635705224,"creation_date":1485119797,"answer_id":41796257,"question_id":41795962,"body_markdown":"I would recommend these two libraries:\r\n\r\n1. [PhotoView][1]\r\n\r\n2. [ImageViewZoom][2]\r\n\r\nFor PhotoView, you just have to create an `attacher` and &quot;attach&quot; it to your `ImageView`.\r\n\r\n### Some code\r\n\r\n    // After getting your imageImage view, attach it like the following\r\n    PhotoViewAttacher yourAttacher = new PhotoViewAttacher(yourImageView);\r\n\r\nWith just this code, you&#39;ll be able to zoom in/out/whatever on `yourImageView`. Check the links above for more details.\r\n\r\n# EDIT\r\nInstagram has changed a lot since this answer was posted, and the libraries I recommended above might not provide the experience you are looking for.\r\n\r\n  [1]: https://github.com/chrisbanes/PhotoView\r\n  [2]: https://github.com/sephiroth74/ImageViewZoom","title":"Zoom ImageView in android like Instagram","body":"<p>I would recommend these two libraries:</p>\n<ol>\n<li><p><a href=\"https://github.com/chrisbanes/PhotoView\" rel=\"nofollow noreferrer\">PhotoView</a></p>\n</li>\n<li><p><a href=\"https://github.com/sephiroth74/ImageViewZoom\" rel=\"nofollow noreferrer\">ImageViewZoom</a></p>\n</li>\n</ol>\n<p>For PhotoView, you just have to create an <code>attacher</code> and &quot;attach&quot; it to your <code>ImageView</code>.</p>\n<h3>Some code</h3>\n<pre><code>// After getting your imageImage view, attach it like the following\nPhotoViewAttacher yourAttacher = new PhotoViewAttacher(yourImageView);\n</code></pre>\n<p>With just this code, you'll be able to zoom in/out/whatever on <code>yourImageView</code>. Check the links above for more details.</p>\n<h1>EDIT</h1>\n<p>Instagram has changed a lot since this answer was posted, and the libraries I recommended above might not provide the experience you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":6649069,"reputation":2559,"user_id":5131929,"accept_rate":79,"display_name":"unos baghaii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485289131,"creation_date":1485289131,"answer_id":41838239,"question_id":41795962,"body_markdown":"thanks \r\n\r\nI have added this to my gradle.build\r\n\r\n     compile &#39;it.sephiroth.android.library.imagezoom:imagezoom:2.2.5&#39;\r\n\r\nand then using this view\r\n\r\n      &lt;it.sephiroth.android.library.imagezoom.ImageViewTouch\r\n        android:id=&quot;@+id/mp3Image&quot;\r\n        android:adjustViewBounds=&quot;true&quot;\r\n        android:layout_width=&quot;346dp&quot;\r\n        android:layout_height=&quot;356dp&quot;\r\n        android:scaleType=&quot;fitCenter&quot; /&gt;\r\n\r\nand the below code, the zoom came to my app \r\n\r\n       myImage = (ImageViewTouch) findViewById(R.id.mp3Image);\r\n        myImage.setDisplayType(ImageViewTouchBase.DisplayType.FIT_IF_BIGGER);","title":"Zoom ImageView in android like Instagram","body":"<p>thanks </p>\n\n<p>I have added this to my gradle.build</p>\n\n<pre><code> compile 'it.sephiroth.android.library.imagezoom:imagezoom:2.2.5'\n</code></pre>\n\n<p>and then using this view</p>\n\n<pre><code>  &lt;it.sephiroth.android.library.imagezoom.ImageViewTouch\n    android:id=\"@+id/mp3Image\"\n    android:adjustViewBounds=\"true\"\n    android:layout_width=\"346dp\"\n    android:layout_height=\"356dp\"\n    android:scaleType=\"fitCenter\" /&gt;\n</code></pre>\n\n<p>and the below code, the zoom came to my app </p>\n\n<pre><code>   myImage = (ImageViewTouch) findViewById(R.id.mp3Image);\n    myImage.setDisplayType(ImageViewTouchBase.DisplayType.FIT_IF_BIGGER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2419491,"reputation":819,"user_id":2112832,"display_name":"Ciro Mine"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1577977381,"creation_date":1511287689,"answer_id":47419848,"question_id":41795962,"body_markdown":"I recommend [Zoomy][1], very simple and functional. \r\n\r\nJust add the following to your current `ImageView`:\r\n```java\r\nZoomy.Builder builder = new Zoomy.Builder(this).target(mZoomableView);\r\nbuilder.register();\r\n```\r\n\r\n\r\n  [1]: https://github.com/imablanco/Zoomy","title":"Zoom ImageView in android like Instagram","body":"<p>I recommend <a href=\"https://github.com/imablanco/Zoomy\" rel=\"noreferrer\">Zoomy</a>, very simple and functional. </p>\n\n<p>Just add the following to your current <code>ImageView</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Zoomy.Builder builder = new Zoomy.Builder(this).target(mZoomableView);\nbuilder.register();\n</code></pre>\n"}],"owner":{"account_id":6649069,"reputation":2559,"user_id":5131929,"accept_rate":79,"display_name":"unos baghaii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11993,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":41796257,"answer_count":3,"score":14,"last_activity_date":1642436841,"creation_date":1485117972,"question_id":41795962,"body_markdown":"\t\r\nHow can I zoom ImageView like Instagram. I mean changing the size of imageview, not zooming the image inside the Imageview.\r\n\r\nFor zooming the image inside the Imageview, there are a lot of samples but I want something like Instagram image zooming\r\n\r\nAny code or hint? Thanks.","title":"Zoom ImageView in android like Instagram","body":"<p>How can I zoom ImageView like Instagram. I mean changing the size of imageview, not zooming the image inside the Imageview.</p>\n\n<p>For zooming the image inside the Imageview, there are a lot of samples but I want something like Instagram image zooming</p>\n\n<p>Any code or hint? Thanks.</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1642436735,"post_id":70744288,"comment_id":125064824,"body_markdown":"`UNKNOWN_TOPIC_OR_PARTITION` is not an exception causing event. This is expected behavior. Use `@Bean NewTopic` if you want to create them before the consumer starts","body":"<code>UNKNOWN_TOPIC_OR_PARTITION</code> is not an exception causing event. This is expected behavior. Use <code>@Bean NewTopic</code> if you want to create them before the consumer starts"},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":1,"creation_date":1642438175,"post_id":70744288,"comment_id":125065388,"body_markdown":"i dont want the topic to auto create.   I just want to capture this error and report it.","body":"i dont want the topic to auto create.   I just want to capture this error and report it."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1642438323,"post_id":70744288,"comment_id":125065448,"body_markdown":"Alright, then you need to use an `AdminClient.describeTopics` call to properly capture unknown topics (and/or partitions) rather than a consumer with its error handler.","body":"Alright, then you need to use an <code>AdminClient.describeTopics</code> call to properly capture unknown topics (and/or partitions) rather than a consumer with its error handler."},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1642439551,"post_id":70744288,"comment_id":125065881,"body_markdown":"side note, we are using julie to create topics so a consumer with an unknown topic is an error case for us.  It gets really hairy trying to do that, because with the kafka listener annotation it needs to be done in the init/postcontruct method of our consumer/listener service which isnt a good place to be calling out","body":"side note, we are using julie to create topics so a consumer with an unknown topic is an error case for us.  It gets really hairy trying to do that, because with the kafka listener annotation it needs to be done in the init/postcontruct method of our consumer/listener service which isnt a good place to be calling out"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1642439867,"post_id":70744288,"comment_id":125066016,"body_markdown":"Like I said, you&#39;ll need to check the topic existence separately. If they exist, then you can [manually start the listeners](https://docs.spring.io/spring-kafka/reference/html/#kafkalistener-lifecycle)","body":"Like I said, you&#39;ll need to check the topic existence separately. If they exist, then you can <a href=\"https://docs.spring.io/spring-kafka/reference/html/#kafkalistener-lifecycle\" rel=\"nofollow noreferrer\">manually start the listeners</a>"},{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1642517270,"post_id":70744288,"comment_id":125088000,"body_markdown":"The error handler is only for handling errors processing received records; this error occurs way before that.","body":"The error handler is only for handling errors processing received records; this error occurs way before that."}],"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1920,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642436754,"creation_date":1642435722,"question_id":70744288,"body_markdown":"we have a specific case we want to handle with an email logger (instead of just to the console). When our consumers/listeners are referencing a non-existent topic.\r\n\r\ncontainer factory configuration:\r\n\t\r\n\r\n    @Bean\r\n    \tpublic ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; kafkaListenerContainerFactory() {\r\n    \t\tConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n    \t\tfactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerStringObjectProperties(), new StringDeserializer(),\r\n    \t\t\t\tnew JsonDeserializer&lt;&gt;(EventUtils.createObjectMapper())));\r\n    \r\n    \t\tKafkaErrorHandler kafkaErrorHandler = new KafkaErrorHandler();\r\n    \t\tfactory.setCommonErrorHandler(kafkaErrorHandler);\r\n    \t\treturn factory;\r\n    \t}\r\n\r\n\r\nError Handler:\r\n\r\n    public class KafkaErrorHandler implements CommonErrorHandler {\r\n    \tprivate static final Log logger = LogFactory.getLog(KafkaErrorHandler.class);\r\n    \t@Autowired(required = false)\r\n    \tEmailLogger emailLogger;\r\n    \r\n    \t/**\r\n    \t * {@inheritDoc}\r\n    \t */\r\n    \t@Override\r\n    \tpublic void handleRecord(Exception thrownException, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\r\n    \t\tlogger.error(&quot;error&quot;, thrownException);\r\n    \r\n    \t\tCommonErrorHandler.super.handleRecord(thrownException, record, consumer, container);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * {@inheritDoc}\r\n    \t */\r\n    \t@Override\r\n    \tpublic void handleBatch(Exception thrownException, ConsumerRecords&lt;?, ?&gt; data, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container,\r\n    \t\t\tRunnable invokeListener) {\r\n    \t\tlogger.error(&quot;error&quot;, thrownException);\r\n    \r\n    \t\tCommonErrorHandler.super.handleBatch(thrownException, data, consumer, container, invokeListener);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * {@inheritDoc}\r\n    \t */\r\n    \t@Override\r\n    \tpublic void handleRemaining(Exception thrownException, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\r\n    \t\tlogger.error(&quot;error&quot;, thrownException);\r\n    \r\n    \t\tCommonErrorHandler.super.handleRemaining(thrownException, records, consumer, container);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * {@inheritDoc}\r\n    \t */\r\n    \t@Override\r\n    \tpublic void handleOtherException(Exception thrownException, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container, boolean batchListener) {\r\n    \t\tString msg = &quot;Error from kafka!&quot;;\r\n    \t\tlogger.error(msg, thrownException);\r\n    \t\tif (null != emailLogger) {\r\n    \t\t\temailLogger.reportError(getClass().getName(), msg, thrownException);\r\n    \t\t}\r\n    \r\n    \t\tCommonErrorHandler.super.handleOtherException(thrownException, consumer, container, batchListener);\r\n    \t}\r\n    \t\r\n    }\r\n\r\nlistener:\r\n\r\n    @KafkaListener(topics = &quot;#{&#39;${kafka.topics.events}&#39;.split(&#39;,&#39;)}&quot;, groupId = &quot;${application.group}&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n    \tpublic void relayEvents(@Payload(required = false) Event event) {\r\n    \t\ttry {\r\n    \t\t\teventPublisher.publishEvent(event);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlogger.error(&quot;Failed to publish event to spring application event publisher&quot;, e);\r\n    \t\t}\r\n    \t}\r\n\r\nBut when I start the service and the topic doesnt exist, it only prints to the console.  None of my breakpoints in the KafkaErrorHandler are hit nor is it logged via the logger statements I have there!\r\n\r\nerror when topic doesnt exist:\r\n\r\n&gt; 08:06:41.206\r\n&gt; [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\r\n&gt; WARN  org.apache.kafka.clients.consumer.internals.Fetcher - [Consumer\r\n&gt; clientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Received unknown\r\n&gt; topic or partition error in fetch for partition\r\n&gt; myapp2.settings.events-0 08:06:41.279\r\n&gt; [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\r\n&gt; WARN  org.apache.kafka.clients.consumer.internals.Fetcher - [Consumer\r\n&gt; clientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Received unknown\r\n&gt; topic or partition error in fetch for partition\r\n&gt; myapp2.settings.events-0 08:06:41.343\r\n&gt; [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\r\n&gt; WARN  org.apache.kafka.clients.NetworkClient - [Consumer\r\n&gt; clientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Error while\r\n&gt; fetching metadata with correlation id 201 :\r\n&gt; {myapp2.settings.events=UNKNOWN_TOPIC_OR_PARTITION}","title":"kafka error handler not being called when topic doesnt exist for listener","body":"<p>we have a specific case we want to handle with an email logger (instead of just to the console). When our consumers/listeners are referencing a non-existent topic.</p>\n<p>container factory configuration:</p>\n<pre><code>@Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; kafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerStringObjectProperties(), new StringDeserializer(),\n                new JsonDeserializer&lt;&gt;(EventUtils.createObjectMapper())));\n\n        KafkaErrorHandler kafkaErrorHandler = new KafkaErrorHandler();\n        factory.setCommonErrorHandler(kafkaErrorHandler);\n        return factory;\n    }\n</code></pre>\n<p>Error Handler:</p>\n<pre><code>public class KafkaErrorHandler implements CommonErrorHandler {\n    private static final Log logger = LogFactory.getLog(KafkaErrorHandler.class);\n    @Autowired(required = false)\n    EmailLogger emailLogger;\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public void handleRecord(Exception thrownException, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\n        logger.error(&quot;error&quot;, thrownException);\n\n        CommonErrorHandler.super.handleRecord(thrownException, record, consumer, container);\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public void handleBatch(Exception thrownException, ConsumerRecords&lt;?, ?&gt; data, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container,\n            Runnable invokeListener) {\n        logger.error(&quot;error&quot;, thrownException);\n\n        CommonErrorHandler.super.handleBatch(thrownException, data, consumer, container, invokeListener);\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public void handleRemaining(Exception thrownException, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\n        logger.error(&quot;error&quot;, thrownException);\n\n        CommonErrorHandler.super.handleRemaining(thrownException, records, consumer, container);\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public void handleOtherException(Exception thrownException, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container, boolean batchListener) {\n        String msg = &quot;Error from kafka!&quot;;\n        logger.error(msg, thrownException);\n        if (null != emailLogger) {\n            emailLogger.reportError(getClass().getName(), msg, thrownException);\n        }\n\n        CommonErrorHandler.super.handleOtherException(thrownException, consumer, container, batchListener);\n    }\n    \n}\n</code></pre>\n<p>listener:</p>\n<pre><code>@KafkaListener(topics = &quot;#{'${kafka.topics.events}'.split(',')}&quot;, groupId = &quot;${application.group}&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\n    public void relayEvents(@Payload(required = false) Event event) {\n        try {\n            eventPublisher.publishEvent(event);\n        } catch (Exception e) {\n            logger.error(&quot;Failed to publish event to spring application event publisher&quot;, e);\n        }\n    }\n</code></pre>\n<p>But when I start the service and the topic doesnt exist, it only prints to the console.  None of my breakpoints in the KafkaErrorHandler are hit nor is it logged via the logger statements I have there!</p>\n<p>error when topic doesnt exist:</p>\n<blockquote>\n<p>08:06:41.206\n[org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\nWARN  org.apache.kafka.clients.consumer.internals.Fetcher - [Consumer\nclientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Received unknown\ntopic or partition error in fetch for partition\nmyapp2.settings.events-0 08:06:41.279\n[org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\nWARN  org.apache.kafka.clients.consumer.internals.Fetcher - [Consumer\nclientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Received unknown\ntopic or partition error in fetch for partition\nmyapp2.settings.events-0 08:06:41.343\n[org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1]\nWARN  org.apache.kafka.clients.NetworkClient - [Consumer\nclientId=consumer-myapp-cloud-1, groupId=myapp-cloud] Error while\nfetching metadata with correlation id 201 :\n{myapp2.settings.events=UNKNOWN_TOPIC_OR_PARTITION}</p>\n</blockquote>\n"},{"tags":["java","android","firebase","geofire"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1642432930,"post_id":70739119,"comment_id":125063324,"body_markdown":"If you encounter problems, it&#39;s best to create a [MCVE](https://stackoverflow.com/help/mcve) when posting a question. You posted almost **500 (five hundred)** lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.","body":"If you encounter problems, it&#39;s best to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> when posting a question. You posted almost <b>500 (five hundred)</b> lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped."},{"owner":{"account_id":23963825,"reputation":1,"user_id":17953596,"display_name":"alien_killer"},"score":0,"creation_date":1642436658,"post_id":70739119,"comment_id":125064793,"body_markdown":"I have updated the question, thank you very much.","body":"I have updated the question, thank you very much."}],"owner":{"account_id":23963825,"reputation":1,"user_id":17953596,"display_name":"alien_killer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642436630,"creation_date":1642411819,"question_id":70739119,"body_markdown":"The application aims to track the user location and encrypt the location and save the location into firebase by using geofire. Geofence was also being used in this application to set an area as the restricted area.\r\n\r\nThe following code is used to set the user location into firebase by using geofire:\r\n\r\n    private void settingGeoFire() {\r\n        String firebaseAuth = FirebaseAuth.getInstance().getUid();\r\n        myLocationRef = FirebaseDatabase.getInstance().getReference(&quot;User_Location/&quot;+firebaseAuth);\r\n        myLocationRef.child(&quot;userID&quot;).setValue(firebaseAuth);\r\n        geoFire = new GeoFire(myLocationRef);\r\n\r\n    }\r\n\r\nThe following code is used to retrieve the location from firebase, encrypt and send it back to firebase:\r\n\r\n    private void getLocationFromFirebaseAndEncrypt(){\r\n\r\n        String userID = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n        location = FirebaseDatabase.getInstance().getReference(&quot;User_Location&quot;).child(userID).child(&quot;You&quot;).child(&quot;l&quot;);\r\n\r\n        location.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                try {\r\n                    if (dataSnapshot.getValue() != null) {\r\n                        Double d1 = (Double) dataSnapshot.child(&quot;0&quot;).getValue();\r\n                        Double d2 = (Double) dataSnapshot.child(&quot;1&quot;).getValue();\r\n\r\n                        String latitude = String.valueOf(d1);\r\n                        String longitude = String.valueOf(d2);\r\n\r\n                        Log.d(&quot;LatLong&quot;, latitude + &quot;, &quot; + longitude); //Check the values\r\n\r\n\r\n                        //encrypt\r\n                        LocationEncryption locationEncryption = new LocationEncryption();\r\n                        String encryptedLatitude = null;\r\n                        String encryptedLongitude = null;\r\n\r\n                        encryptedLatitude = locationEncryption.encrypt(latitude);\r\n                        encryptedLongitude = locationEncryption.encrypt(longitude);\r\n\r\n                        uploadDataToFirebase(location, encryptedLatitude, encryptedLongitude);\r\n\r\n                        Log.d(&quot;Encrypted&quot;, encryptedLatitude + &quot;, &quot; + encryptedLongitude); //Check the values\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    }\r\n                    else {\r\n                        Toast.makeText(getBaseContext(), &quot;NULL&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }catch (Exception e)\r\n                {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    private void uploadDataToFirebase(DatabaseReference location, String encryptedLatitude, String encryptedLongitude) {\r\n\r\n        EncryptedData encryptedData = new EncryptedData(encryptedLatitude, encryptedLongitude);\r\n        location.child(&quot;0&quot;).setValue(encryptedLatitude);\r\n        location.child(&quot;1&quot;).setValue(encryptedLongitude);\r\n\r\n\r\n    }\r\n\r\nThe following code is used to set up geofence and geoquery when user get into the geofencing area:\r\n\r\n    private void addCircleArea() {\r\n        if(geoQuery != null){\r\n            geoQuery.removeGeoQueryEventListener(this);\r\n            geoQuery.removeAllListeners();\r\n        }\r\n\r\n        for(LatLng latLng : dangerousArea){\r\n            mMap.addCircle(new CircleOptions().center(latLng).radius(100).strokeColor(Color.RED).fillColor(Color.rgb(255,200,200)).strokeWidth(1.0f));\r\n\r\n            //create GeoQuery when user in dangerous area\r\n            geoQuery = geoFire.queryAtLocation(new GeoLocation(latLng.latitude, latLng.longitude), 0.1f);\r\n            geoQuery.addGeoQueryEventListener(MapsActivity.this);\r\n\r\n        }\r\n\r\n    }\r\n\r\nWhen the user&#39;s current location is outside the geofence (outside the red circle on the map), the code runs smoothly without any error. But when the user&#39;s location is inside a geofence area (red circle on the map), the app crashed and an error occurs. The error is shown below:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: assignment.yeo.location, PID: 27523\r\n    java.lang.AssertionError: Got Datasnapshot without location with key You\r\n        at com.firebase.geofire.GeoQuery.childAdded(GeoQuery.java:275)\r\n        at com.firebase.geofire.GeoQuery.access$000(GeoQuery.java:41)\r\n        at com.firebase.geofire.GeoQuery$1.onChildAdded(GeoQuery.java:62)\r\n        at com.google.firebase.database.core.ChildEventRegistration.fireEvent(ChildEventRegistration.java:79)\r\n        at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n        at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n\r\nAny solution for it? Thank you very much. \r\n\r\n","title":"How to solve the error &quot;java.lang.AssertionError: Got Datasnapshot without location with key You&quot; in Android Studio with Java","body":"<p>The application aims to track the user location and encrypt the location and save the location into firebase by using geofire. Geofence was also being used in this application to set an area as the restricted area.</p>\n<p>The following code is used to set the user location into firebase by using geofire:</p>\n<pre><code>private void settingGeoFire() {\n    String firebaseAuth = FirebaseAuth.getInstance().getUid();\n    myLocationRef = FirebaseDatabase.getInstance().getReference(&quot;User_Location/&quot;+firebaseAuth);\n    myLocationRef.child(&quot;userID&quot;).setValue(firebaseAuth);\n    geoFire = new GeoFire(myLocationRef);\n\n}\n</code></pre>\n<p>The following code is used to retrieve the location from firebase, encrypt and send it back to firebase:</p>\n<pre><code>private void getLocationFromFirebaseAndEncrypt(){\n\n    String userID = FirebaseAuth.getInstance().getCurrentUser().getUid();\n    location = FirebaseDatabase.getInstance().getReference(&quot;User_Location&quot;).child(userID).child(&quot;You&quot;).child(&quot;l&quot;);\n\n    location.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            try {\n                if (dataSnapshot.getValue() != null) {\n                    Double d1 = (Double) dataSnapshot.child(&quot;0&quot;).getValue();\n                    Double d2 = (Double) dataSnapshot.child(&quot;1&quot;).getValue();\n\n                    String latitude = String.valueOf(d1);\n                    String longitude = String.valueOf(d2);\n\n                    Log.d(&quot;LatLong&quot;, latitude + &quot;, &quot; + longitude); //Check the values\n\n\n                    //encrypt\n                    LocationEncryption locationEncryption = new LocationEncryption();\n                    String encryptedLatitude = null;\n                    String encryptedLongitude = null;\n\n                    encryptedLatitude = locationEncryption.encrypt(latitude);\n                    encryptedLongitude = locationEncryption.encrypt(longitude);\n\n                    uploadDataToFirebase(location, encryptedLatitude, encryptedLongitude);\n\n                    Log.d(&quot;Encrypted&quot;, encryptedLatitude + &quot;, &quot; + encryptedLongitude); //Check the values\n\n\n\n\n\n\n\n\n                }\n                else {\n                    Toast.makeText(getBaseContext(), &quot;NULL&quot;, Toast.LENGTH_SHORT).show();\n                }\n\n            }catch (Exception e)\n            {\n                e.printStackTrace();\n            }\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n\n\n    });\n\n}\n\nprivate void uploadDataToFirebase(DatabaseReference location, String encryptedLatitude, String encryptedLongitude) {\n\n    EncryptedData encryptedData = new EncryptedData(encryptedLatitude, encryptedLongitude);\n    location.child(&quot;0&quot;).setValue(encryptedLatitude);\n    location.child(&quot;1&quot;).setValue(encryptedLongitude);\n\n\n}\n</code></pre>\n<p>The following code is used to set up geofence and geoquery when user get into the geofencing area:</p>\n<pre><code>private void addCircleArea() {\n    if(geoQuery != null){\n        geoQuery.removeGeoQueryEventListener(this);\n        geoQuery.removeAllListeners();\n    }\n\n    for(LatLng latLng : dangerousArea){\n        mMap.addCircle(new CircleOptions().center(latLng).radius(100).strokeColor(Color.RED).fillColor(Color.rgb(255,200,200)).strokeWidth(1.0f));\n\n        //create GeoQuery when user in dangerous area\n        geoQuery = geoFire.queryAtLocation(new GeoLocation(latLng.latitude, latLng.longitude), 0.1f);\n        geoQuery.addGeoQueryEventListener(MapsActivity.this);\n\n    }\n\n}\n</code></pre>\n<p>When the user's current location is outside the geofence (outside the red circle on the map), the code runs smoothly without any error. But when the user's location is inside a geofence area (red circle on the map), the app crashed and an error occurs. The error is shown below:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: assignment.yeo.location, PID: 27523\njava.lang.AssertionError: Got Datasnapshot without location with key You\n    at com.firebase.geofire.GeoQuery.childAdded(GeoQuery.java:275)\n    at com.firebase.geofire.GeoQuery.access$000(GeoQuery.java:41)\n    at com.firebase.geofire.GeoQuery$1.onChildAdded(GeoQuery.java:62)\n    at com.google.firebase.database.core.ChildEventRegistration.fireEvent(ChildEventRegistration.java:79)\n    at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\n    at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:223)\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>Any solution for it? Thank you very much.</p>\n"},{"tags":["java","unit-testing","spring-retry"],"comments":[{"owner":{"account_id":14242449,"reputation":2057,"user_id":10288420,"display_name":"drowny"},"score":0,"creation_date":1536603800,"post_id":52262230,"comment_id":91474665,"body_markdown":"Your code has a lots of compile error, please fix them all.","body":"Your code has a lots of compile error, please fix them all."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536616386,"creation_date":1536604207,"answer_id":52263542,"question_id":52262230,"body_markdown":"`@EnableRetry` has to be on a `@Configuration` class; you have it on a `@Service` bean.\r\n\r\n__EDIT__\r\n\r\nHere&#39;s a quick hack to get you started; I haven&#39;t tested it but it should be close...\r\n\r\n    @RunWith(SpringRunner.class)\r\n    public class So52262230ApplicationTests {\r\n    \r\n    \tprivate MyOperations myOperations;\r\n    \r\n    \t@Autowired\r\n    \tParam1 param1;\r\n    \r\n    \t@Autowired\r\n    \tParam2 param2AnotherOperation;\r\n    \r\n    \t@Autowired\r\n    \tMyOperations myoperations;\r\n    \r\n    \t@Test\r\n    \tpublic void testmyMethodWithFailure_ShouldRetry3TimesThenThrowException() {\r\n    \t\tMyException exception1 = new MyException(&quot;exception 1&quot;);\r\n    \t\tMyException exception2 = new MyException(&quot;exception 2&quot;);\r\n    \t\tMyException exception3 = new MyException(&quot;exception 3&quot;);\r\n    \r\n    \t\tMockito.doThrow(exception1).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n    \t\tMockito.doThrow(exception2).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n    \t\tMockito.doThrow(exception3).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n    \r\n    \t\tThrowable writingException = catchThrowable(() -&gt; myOperations.myMethod(firstParam, secondParam));\r\n    \r\n    \t\tMockito.verify(param2AnotherOperation, times(3)).itsMethod(firstParam, secondParam);\r\n    \t}\r\n    \r\n    \t@Configuration\r\n    \t@EnableRetry\r\n    \tpublic static class Config {\r\n    \r\n    \t\t@Bean\r\n    \t\tpublic Param1 param1() {\r\n    \t\t\t//return a mock\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Bean\r\n    \t\tpublic Param2 param2() {\r\n    \t\t\t//return a mock\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Bean\r\n    \t\tpublic MyOperations myOperations() {\r\n    \t\t\treturn new MyOperations(param1(), param2());\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"testing Spring Retry throws an error: wanted * times, but was 1 time","body":"<p><code>@EnableRetry</code> has to be on a <code>@Configuration</code> class; you have it on a <code>@Service</code> bean.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's a quick hack to get you started; I haven't tested it but it should be close...</p>\n\n<pre><code>@RunWith(SpringRunner.class)\npublic class So52262230ApplicationTests {\n\n    private MyOperations myOperations;\n\n    @Autowired\n    Param1 param1;\n\n    @Autowired\n    Param2 param2AnotherOperation;\n\n    @Autowired\n    MyOperations myoperations;\n\n    @Test\n    public void testmyMethodWithFailure_ShouldRetry3TimesThenThrowException() {\n        MyException exception1 = new MyException(\"exception 1\");\n        MyException exception2 = new MyException(\"exception 2\");\n        MyException exception3 = new MyException(\"exception 3\");\n\n        Mockito.doThrow(exception1).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n        Mockito.doThrow(exception2).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n        Mockito.doThrow(exception3).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n\n        Throwable writingException = catchThrowable(() -&gt; myOperations.myMethod(firstParam, secondParam));\n\n        Mockito.verify(param2AnotherOperation, times(3)).itsMethod(firstParam, secondParam);\n    }\n\n    @Configuration\n    @EnableRetry\n    public static class Config {\n\n        @Bean\n        public Param1 param1() {\n            //return a mock\n        }\n\n        @Bean\n        public Param2 param2() {\n            //return a mock\n        }\n\n        @Bean\n        public MyOperations myOperations() {\n            return new MyOperations(param1(), param2());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6305411,"reputation":63,"user_id":4898612,"display_name":"shazwashere"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642436493,"creation_date":1642436493,"answer_id":70744441,"question_id":52262230,"body_markdown":"Like pointed out, for your retries to work, you need Spring to help you with that meaning you should be picking your bean from the Spring Context; so you will have to remove the explicit instantiation of the `MyOperations` class. Also, your dependencies to the MyOperations class need to be inserted into the SpringContext (so they can be bound together in the context itself) and this can be done by annotation your mocked beans with `@MockBean`. This will replace actual beans in the SpringContext with these mock beans. With all these in place, you will be able to leverage Spring&#39;s features like `@Retryable` in your test. \r\n\r\nSo, something like:\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n public class MyOperationsTest\r\n\r\n @MockBean // pushed 1st mocked dependency to Spring context\r\n Param1 param1;\r\n\r\n @MockBean // pushed 2nd mocked dependency to Spring context\r\n Param2 param2AnotherOperation; \r\n\r\n @Autowired //Getting the hydrated bean for class under test from context\r\n private MyOperations myOperations;\r\n\r\n @Before \r\n public void setUp(){\r\n // No manual instantiation required; picking bean from context\r\n //    myOperations = new MyOperations(param1, param2AnotherOperation);     \r\n...\r\n }\r\n\r\n... continue with tests ...\r\n","title":"testing Spring Retry throws an error: wanted * times, but was 1 time","body":"<p>Like pointed out, for your retries to work, you need Spring to help you with that meaning you should be picking your bean from the Spring Context; so you will have to remove the explicit instantiation of the <code>MyOperations</code> class. Also, your dependencies to the MyOperations class need to be inserted into the SpringContext (so they can be bound together in the context itself) and this can be done by annotation your mocked beans with <code>@MockBean</code>. This will replace actual beans in the SpringContext with these mock beans. With all these in place, you will be able to leverage Spring's features like <code>@Retryable</code> in your test.</p>\n<p>So, something like:</p>\n<pre><code>@RunWith(SpringRunner.class)\n public class MyOperationsTest\n\n @MockBean // pushed 1st mocked dependency to Spring context\n Param1 param1;\n\n @MockBean // pushed 2nd mocked dependency to Spring context\n Param2 param2AnotherOperation; \n\n @Autowired //Getting the hydrated bean for class under test from context\n private MyOperations myOperations;\n\n @Before \n public void setUp(){\n // No manual instantiation required; picking bean from context\n //    myOperations = new MyOperations(param1, param2AnotherOperation);     \n...\n }\n\n... continue with tests ...\n</code></pre>\n"}],"owner":{"account_id":198060,"reputation":2345,"user_id":442506,"accept_rate":51,"display_name":"toosensitive"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5750,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1642436493,"creation_date":1536598100,"question_id":52262230,"body_markdown":"I use **spring retry** and want to unit test it. \r\nbut could not get unit test working. \r\nSee My code &amp; test below.  \r\nWhen I run the test, it says expected `3 times` but was `1 time`. \r\nI must miss something. thanks \r\n\r\n     @RunWith(SpringJUnit4ClassRunner.class)\r\n     public class MyOperationsTest\r\n     private MyOperations myOperations;\r\n     @mock \r\n     Param1 param1;\r\n     @mock \r\n     Param2 param2AnotherOperation; \r\n\r\n     @Before \r\n     public void setUp(){\r\n         myOperations = new MyOperations(param1, param2AnotherOperation);     \r\n     }\r\n     @Test\r\n        public void testmyMethodWithFailure_ShouldRetry3TimesThenThrowException() {\r\n            MyException exception1 = new MyException (&quot;exception 1&quot;);\r\n            MyException exception2 = new MyException (&quot;exception 2&quot;);\r\n            MyException exception3 = new MyException (&quot;exception 3&quot;);\r\n    \r\n            Mockito.doThrow(exception1).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n            Mockito.doThrow(exception2).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n            Mockito.doThrow(exception3).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\r\n    \r\n            Throwable writingException =\r\n                    catchThrowable(() -&gt; myOperations.myMethod(firstParam, secondParam));\r\n    \r\n            Mockito.verify(param2AnotherOperation, times(3)).itsMethod(firstParam, secondParam);\r\n        }\r\n    \t\r\n    \r\n**in MyOperations class** \r\n    \t\r\n    @Service\r\n    @EnableRetry\r\n    \tpublic class MyOperations{\r\n        Param1 param1;\r\n        Param2AnotherOperation param2AnotherOperation\r\n    \tpublic MyOperations(Param1 param1, Param2AnotherOperation param2AnotherOperation) {\r\n            this.param1 = param1;\r\n            this.param2AnotherOperation = param2AnotherOperation;\r\n}\r\n\r\n        @Retryable(value = {MyExceptoin.class},\r\n                maxAttemptsExpression = &quot;3&quot;,\r\n                backoff = @Backoff(delayExpression = &quot;#{@retryInterval}&quot;))\r\n    \t\t\tpublic void myMethod(firstParam, secondParam){\r\n    \t\t\ttry {                  \r\n    \t\t\t\tparam2AnotherOperation.itsMethod(firstParam, secondParam);\r\n                    ...                    \r\n    \t\t\t}\r\n    \t\t\tcatch(Exception ex){\r\n    \t\t\t\tthrow new MyExceptoin(ex);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\r\n    \t}\r\n\r\n\r\n\r\n","title":"testing Spring Retry throws an error: wanted * times, but was 1 time","body":"<p>I use <strong>spring retry</strong> and want to unit test it. \nbut could not get unit test working. \nSee My code &amp; test below.<br>\nWhen I run the test, it says expected <code>3 times</code> but was <code>1 time</code>. \nI must miss something. thanks </p>\n\n<pre><code> @RunWith(SpringJUnit4ClassRunner.class)\n public class MyOperationsTest\n private MyOperations myOperations;\n @mock \n Param1 param1;\n @mock \n Param2 param2AnotherOperation; \n\n @Before \n public void setUp(){\n     myOperations = new MyOperations(param1, param2AnotherOperation);     \n }\n @Test\n    public void testmyMethodWithFailure_ShouldRetry3TimesThenThrowException() {\n        MyException exception1 = new MyException (\"exception 1\");\n        MyException exception2 = new MyException (\"exception 2\");\n        MyException exception3 = new MyException (\"exception 3\");\n\n        Mockito.doThrow(exception1).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n        Mockito.doThrow(exception2).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n        Mockito.doThrow(exception3).when(param2AnotherOperation).itsMethod(firstParam, secondParam);\n\n        Throwable writingException =\n                catchThrowable(() -&gt; myOperations.myMethod(firstParam, secondParam));\n\n        Mockito.verify(param2AnotherOperation, times(3)).itsMethod(firstParam, secondParam);\n    }\n</code></pre>\n\n<p><strong>in MyOperations class</strong> </p>\n\n<pre><code>@Service\n@EnableRetry\n    public class MyOperations{\n    Param1 param1;\n    Param2AnotherOperation param2AnotherOperation\n    public MyOperations(Param1 param1, Param2AnotherOperation param2AnotherOperation) {\n        this.param1 = param1;\n        this.param2AnotherOperation = param2AnotherOperation;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>    @Retryable(value = {MyExceptoin.class},\n            maxAttemptsExpression = \"3\",\n            backoff = @Backoff(delayExpression = \"#{@retryInterval}\"))\n            public void myMethod(firstParam, secondParam){\n            try {                  \n                param2AnotherOperation.itsMethod(firstParam, secondParam);\n                ...                    \n            }\n            catch(Exception ex){\n                throw new MyExceptoin(ex);\n            }\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1439880239,"post_id":32065313,"comment_id":52028154,"body_markdown":"Do you mean like `removeAll()`?","body":"Do you mean like <code>removeAll()</code>?"},{"owner":{"account_id":1491271,"reputation":332,"user_id":1398302,"accept_rate":50,"display_name":"Borodin.Mik"},"score":0,"creation_date":1439886291,"post_id":32065313,"comment_id":52031653,"body_markdown":"http://stackoverflow.com/questions/9933403/subtracting-one-arraylist-from-another-arraylist if you don&#39;t want to modify the origin list","body":"<a href=\"http://stackoverflow.com/questions/9933403/subtracting-one-arraylist-from-another-arraylist\" title=\"subtracting one arraylist from another arraylist\">stackoverflow.com/questions/9933403/&hellip;</a> if you don&#39;t want to modify the origin list"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1439880227,"creation_date":1439880227,"answer_id":32065335,"question_id":32065313,"body_markdown":"There&#39;s `list1.removeAll(list2)`\r\n\r\n    /**\r\n     * Removes from this list all of its elements that are contained in the\r\n     * specified collection (optional operation).\r\n     *\r\n     * @param c collection containing elements to be removed from this list\r\n     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call\r\n     * @throws UnsupportedOperationException if the &lt;tt&gt;removeAll&lt;/tt&gt; operation\r\n     *         is not supported by this list\r\n     * @throws ClassCastException if the class of an element of this list\r\n     *         is incompatible with the specified collection (optional)\r\n     * @throws NullPointerException if this list contains a null element and the\r\n     *         specified collection does not permit null elements (optional),\r\n     *         or if the specified collection is null\r\n     * @see #remove(Object)\r\n     * @see #contains(Object)\r\n     */\r\n    boolean removeAll(Collection&lt;?&gt; c);","title":"Any Method which does the function opposite to that of retain all?","body":"<p>There's <code>list1.removeAll(list2)</code></p>\n\n<pre><code>/**\n * Removes from this list all of its elements that are contained in the\n * specified collection (optional operation).\n *\n * @param c collection containing elements to be removed from this list\n * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call\n * @throws UnsupportedOperationException if the &lt;tt&gt;removeAll&lt;/tt&gt; operation\n *         is not supported by this list\n * @throws ClassCastException if the class of an element of this list\n *         is incompatible with the specified collection (optional)\n * @throws NullPointerException if this list contains a null element and the\n *         specified collection does not permit null elements (optional),\n *         or if the specified collection is null\n * @see #remove(Object)\n * @see #contains(Object)\n */\nboolean removeAll(Collection&lt;?&gt; c);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6144936,"reputation":810,"user_id":4791162,"display_name":"Olivier Royo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642436313,"creation_date":1642436313,"answer_id":70744397,"question_id":32065313,"body_markdown":"If you want to use the same logic as retainAll, and don&#39;t modify your 2 original lists, you can go for :\r\n\r\n    Collection retained = CollectionUtils.removeAll(list1,list2)\r\n\r\nOr if you are sure that list2 contains only items from list1\r\n\r\n    Collection retained = CollectionUtils.disjunction(list1,list2)\r\n\r\nOr\r\n\r\n    Collection retained = ListUtils.subtract(list1,list2)","title":"Any Method which does the function opposite to that of retain all?","body":"<p>If you want to use the same logic as retainAll, and don't modify your 2 original lists, you can go for :</p>\n<pre><code>Collection retained = CollectionUtils.removeAll(list1,list2)\n</code></pre>\n<p>Or if you are sure that list2 contains only items from list1</p>\n<pre><code>Collection retained = CollectionUtils.disjunction(list1,list2)\n</code></pre>\n<p>Or</p>\n<pre><code>Collection retained = ListUtils.subtract(list1,list2)\n</code></pre>\n"}],"owner":{"account_id":6530374,"reputation":447,"user_id":5051683,"accept_rate":34,"display_name":"MRavindran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7188,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1642436313,"creation_date":1439880154,"question_id":32065313,"body_markdown":"I have two lists like \r\n\r\n    List&lt;String&gt; list1 = new ArrayList&lt;String&gt;(Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\r\n    List&lt;String&gt; list2 = new ArrayList&lt;String&gt;(Arrays.asList(&quot;A&quot;));\r\n\r\n`List&lt;String&gt; result = list1.(SomeMethod)(list2)` must return `result = {&quot;B&quot;,&quot;C&quot;}`\r\n\r\nIs such method is available?","title":"Any Method which does the function opposite to that of retain all?","body":"<p>I have two lists like </p>\n\n<pre><code>List&lt;String&gt; list1 = new ArrayList&lt;String&gt;(Arrays.asList(\"A\", \"B\", \"C\"));\nList&lt;String&gt; list2 = new ArrayList&lt;String&gt;(Arrays.asList(\"A\"));\n</code></pre>\n\n<p><code>List&lt;String&gt; result = list1.(SomeMethod)(list2)</code> must return <code>result = {\"B\",\"C\"}</code></p>\n\n<p>Is such method is available?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":2,"creation_date":1642434998,"post_id":70743821,"comment_id":125064187,"body_markdown":"You are not showing us your actual attempt at drawing &quot;MF&quot; so we can&#39;t say why you can&#39;t connect the lines. Don&#39;t just give us your homework.","body":"You are not showing us your actual attempt at drawing &quot;MF&quot; so we can&#39;t say why you can&#39;t connect the lines. Don&#39;t just give us your homework."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1642435642,"post_id":70743821,"comment_id":125064429,"body_markdown":"Your two lines aren&#39;t starting or ending at the same points, so why are you expecting them to connect? One of the zeros in the second line should be 100 or 140","body":"Your two lines aren&#39;t starting or ending at the same points, so why are you expecting them to connect? One of the zeros in the second line should be 100 or 140"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1643212449,"post_id":70743821,"comment_id":125280509,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642436286,"creation_date":1642435243,"answer_id":70744184,"question_id":70743821,"body_markdown":"You can take advantage of `drawString`:\r\n    \r\n     g.drawImage (image, 30,30, this);\r\n\t //set font size (optional)\r\n\t Font font = g.getFont().deriveFont( 20.0f ); \r\n\t g.setFont( font );\r\n     g.drawString(&quot;MF&quot;, 150, 100);\r\n\r\nIf you want to draw it line by line :\r\n\r\n\t//draw M\r\n\tg.drawLine(150,100,150,140); //from top left vertically down\r\n\tg.drawLine(150,100,165,115); //from top left diagonally dowm\r\n\tg.drawLine(165,115,180,100); //continue diagonally up\r\n\tg.drawLine(180,100,180,140); //continue vertically down\r\n    //todo draw F\r\n\r\nFrom the documentation: \r\n\r\n&gt; Draws a line, using the current color, between the points (x1, y1) and\r\n&gt; (x2, y2)in this graphics context&#39;s coordinate system.\r\n\r\nso `g.drawLine(150,0,150,0)` draws a line between the same points (point 150,0  to point 150,0) which means it draws a **point** rather than a line. \r\n\r\n","title":"drawLine to write text MF","body":"<p>You can take advantage of <code>drawString</code>:</p>\n<pre><code> g.drawImage (image, 30,30, this);\n //set font size (optional)\n Font font = g.getFont().deriveFont( 20.0f ); \n g.setFont( font );\n g.drawString(&quot;MF&quot;, 150, 100);\n</code></pre>\n<p>If you want to draw it line by line :</p>\n<pre><code>//draw M\ng.drawLine(150,100,150,140); //from top left vertically down\ng.drawLine(150,100,165,115); //from top left diagonally dowm\ng.drawLine(165,115,180,100); //continue diagonally up\ng.drawLine(180,100,180,140); //continue vertically down\n//todo draw F\n</code></pre>\n<p>From the documentation:</p>\n<blockquote>\n<p>Draws a line, using the current color, between the points (x1, y1) and\n(x2, y2)in this graphics context's coordinate system.</p>\n</blockquote>\n<p>so <code>g.drawLine(150,0,150,0)</code> draws a line between the same points (point 150,0  to point 150,0) which means it draws a <strong>point</strong> rather than a line.</p>\n"}],"owner":{"account_id":23951647,"reputation":9,"user_id":17943129,"display_name":"Mateo Flores"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1642436286,"creation_date":1642433513,"question_id":70743821,"body_markdown":"I am trying to make the letters MF using drawLine, but is struggling to connect the lines\r\n\r\n    public void paintComponent (Graphics g)\r\n    {\r\n        // Render the image.\r\n\t    g.drawImage (image, 30,30, this);\r\n\r\n        // INSERT YOUR CODE HERE:\r\n\t    // Do your graffitti here. For example,\r\n\t    g.drawLine(150,100,150,140);\r\n\t    g.drawLine(150,0,150,0);\r\n    }","title":"drawLine to write text MF","body":"<p>I am trying to make the letters MF using drawLine, but is struggling to connect the lines</p>\n<pre><code>public void paintComponent (Graphics g)\n{\n    // Render the image.\n    g.drawImage (image, 30,30, this);\n\n    // INSERT YOUR CODE HERE:\n    // Do your graffitti here. For example,\n    g.drawLine(150,100,150,140);\n    g.drawLine(150,0,150,0);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1642410216,"post_id":70738756,"comment_id":125054224,"body_markdown":"In situations like this I often used a separate &quot;executor&quot; service that got a lambda for execution. Calls might then look like this: `executor.executeInNewTx(() -&gt; doAction1());` etc. The executor service would then have the `@Transactional` annotations etc. - In essence the problem is you need to cross a service boundary for the automatic transaction handling (i.e. interceptors) to kick in. Another option might be to split your service into multiple portions but having such an executor service makes life easier.","body":"In situations like this I often used a separate &quot;executor&quot; service that got a lambda for execution. Calls might then look like this: <code>executor.executeInNewTx(() -&gt; doAction1());</code> etc. The executor service would then have the <code>@Transactional</code> annotations etc. - In essence the problem is you need to cross a service boundary for the automatic transaction handling (i.e. interceptors) to kick in. Another option might be to split your service into multiple portions but having such an executor service makes life easier."},{"owner":{"account_id":338582,"reputation":3286,"user_id":667535,"display_name":"Robin"},"score":0,"creation_date":1642416319,"post_id":70738756,"comment_id":125056502,"body_markdown":"Could you elaborate what you mean with &quot;some method to use two or more transactions&quot;? Normally, transaction context is associated with the current thread, so there&#39;s always _one_ active transaction per thread only. In addition, your 1st approach&#39;s doActions() won&#39;t create any tx as these are intra class calls (see e.g. [this question](https://stackoverflow.com/questions/56193642))","body":"Could you elaborate what you mean with &quot;some method to use two or more transactions&quot;? Normally, transaction context is associated with the current thread, so there&#39;s always <i>one</i> active transaction per thread only. In addition, your 1st approach&#39;s doActions() won&#39;t create any tx as these are intra class calls (see e.g. <a href=\"https://stackoverflow.com/questions/56193642\">this question</a>)"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1642436121,"creation_date":1642434611,"answer_id":70744055,"question_id":70738756,"body_markdown":"Yes. I agree it is ugly. You can create a service that is just responsible to execute some codes in a transaction . Same idea as `TransactionTemplate` but it uses `@Transational` to manage the transaction.\r\n\r\n``` java\r\n@Service\r\npublic class TransactionExecutor {\r\n\r\n\t@Transactional(propagation = Propagation.REQUIRED)\r\n\tpublic &lt;T&gt; T execute(Supplier&lt;T&gt; action) {\r\n\t\treturn action.get();\r\n\t}\r\n\r\n\t@Transactional(propagation = Propagation.REQUIRED)\r\n\tpublic void execute(Runnable action) {\r\n\t\taction.run();\r\n\t}\r\n\r\n\t@Transactional(propagation = Propagation.REQUIRES_NEW)\r\n\tpublic &lt;T&gt; T executeInNewTx(Supplier&lt;T&gt; action) {\r\n\t\treturn action.get();\r\n\t}\r\n\r\n\t@Transactional(propagation = Propagation.REQUIRES_NEW)\r\n\tpublic void executeInNewTx(Runnable action) {\r\n\t\taction.run();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd then inject it to use it :\r\n\r\n``` java\r\n@Service\r\npublic class FooService {\r\n\t\r\n\t@Autowired\r\n\tprivate TransactionExecutor txExecutor;\r\n\r\n\r\n\tpublic void doActions() {\r\n\t    txExecutor.execute(()-&gt;doAction1());\r\n\t    txExecutor.execute(()-&gt;doAction2());\r\n\t}\r\n\r\n\tvoid doAction1() { ... }\r\n\r\n\tvoid doAction2() { ... }\r\n\r\n}\r\n```","title":"Proper way to use multiple transactions in a single class","body":"<p>Yes. I agree it is ugly. You can create a service that is just responsible to execute some codes in a transaction . Same idea as <code>TransactionTemplate</code> but it uses <code>@Transational</code> to manage the transaction.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class TransactionExecutor {\n\n    @Transactional(propagation = Propagation.REQUIRED)\n    public &lt;T&gt; T execute(Supplier&lt;T&gt; action) {\n        return action.get();\n    }\n\n    @Transactional(propagation = Propagation.REQUIRED)\n    public void execute(Runnable action) {\n        action.run();\n    }\n\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public &lt;T&gt; T executeInNewTx(Supplier&lt;T&gt; action) {\n        return action.get();\n    }\n\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void executeInNewTx(Runnable action) {\n        action.run();\n    }\n\n}\n</code></pre>\n<p>And then inject it to use it :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class FooService {\n    \n    @Autowired\n    private TransactionExecutor txExecutor;\n\n\n    public void doActions() {\n        txExecutor.execute(()-&gt;doAction1());\n        txExecutor.execute(()-&gt;doAction2());\n    }\n\n    void doAction1() { ... }\n\n    void doAction2() { ... }\n\n}\n</code></pre>\n"}],"owner":{"account_id":121787,"reputation":11660,"user_id":315129,"accept_rate":93,"display_name":"vbezhenar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3797,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70744055,"answer_count":1,"score":4,"last_activity_date":1642436121,"creation_date":1642409985,"question_id":70738756,"body_markdown":"I&#39;m using Spring Boot. I can use `@Transactional` to force transaction on a method. Sometimes I need for some method to use two or more transactions.\r\n\r\nNaive approach wouldn&#39;t work:\r\n\r\n```java\r\npublic void doActions() {\r\n    doAction1();\r\n    doAction2();\r\n}\r\n\r\n@Transactional\r\nvoid doAction1() { ... }\r\n\r\n@Transactional\r\nvoid doAction2() { ... }\r\n```\r\n\r\nbecause Spring uses proxies to implement transactions.\r\n\r\nUsually I&#39;ve used the following approach:\r\n\r\n```java\r\n@Autowired\r\nprivate ThisService self;\r\n\r\npublic void doActions() {\r\n    self.doAction1();\r\n    self.doAction2();\r\n}\r\n\r\n@Transactional\r\nvoid doAction1() { ... }\r\n\r\n@Transactional\r\nvoid doAction2() { ... }\r\n```\r\n\r\nIt worked, but in Spring 2.6.0 this circular dependency causes application to fail to start with scary error unless I set spring.main.allow-circular-references to true.\r\n\r\nI don&#39;t really understand the reason why circular references are bad. But apparently Spring Boot developers want to discourage this kind of design, so, I guess, I better follow their advice.\r\n\r\nAnother approach is to use transaction manager and programmatically call transaction api:\r\n\r\n```java\r\n@Autowired\r\nprivate TransactionTemplate transactionTemplate;\r\n\r\npublic void doActions() {\r\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\r\n            @Override\r\n            protected void doInTransactionWithoutResult(@NonNull TransactionStatus status) {\r\n                doAction1();\r\n            }\r\n        });\r\n        transactionTemplate.execute(status -&gt; {\r\n            doAction2();\r\n            return null;\r\n        });\r\n```\r\n\r\nIt works but it&#39;s a little bit verbose and ugly in my opinion.\r\n\r\nIs there any other approaches I missed? Should I just set spring.main.allow-circular-references to true? I&#39;m afraid that developers will make those circular references thing unsupported in the future and I&#39;d need to rework my application because of that.\r\n","title":"Proper way to use multiple transactions in a single class","body":"<p>I'm using Spring Boot. I can use <code>@Transactional</code> to force transaction on a method. Sometimes I need for some method to use two or more transactions.</p>\n<p>Naive approach wouldn't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void doActions() {\n    doAction1();\n    doAction2();\n}\n\n@Transactional\nvoid doAction1() { ... }\n\n@Transactional\nvoid doAction2() { ... }\n</code></pre>\n<p>because Spring uses proxies to implement transactions.</p>\n<p>Usually I've used the following approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate ThisService self;\n\npublic void doActions() {\n    self.doAction1();\n    self.doAction2();\n}\n\n@Transactional\nvoid doAction1() { ... }\n\n@Transactional\nvoid doAction2() { ... }\n</code></pre>\n<p>It worked, but in Spring 2.6.0 this circular dependency causes application to fail to start with scary error unless I set spring.main.allow-circular-references to true.</p>\n<p>I don't really understand the reason why circular references are bad. But apparently Spring Boot developers want to discourage this kind of design, so, I guess, I better follow their advice.</p>\n<p>Another approach is to use transaction manager and programmatically call transaction api:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate TransactionTemplate transactionTemplate;\n\npublic void doActions() {\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n            @Override\n            protected void doInTransactionWithoutResult(@NonNull TransactionStatus status) {\n                doAction1();\n            }\n        });\n        transactionTemplate.execute(status -&gt; {\n            doAction2();\n            return null;\n        });\n</code></pre>\n<p>It works but it's a little bit verbose and ugly in my opinion.</p>\n<p>Is there any other approaches I missed? Should I just set spring.main.allow-circular-references to true? I'm afraid that developers will make those circular references thing unsupported in the future and I'd need to rework my application because of that.</p>\n"},{"tags":["java","plugins","server","minecraft"],"comments":[{"owner":{"account_id":9744171,"reputation":138,"user_id":7224691,"display_name":"Ben"},"score":0,"creation_date":1617701189,"post_id":66962380,"comment_id":118370928,"body_markdown":"Are you saving the config on plugin shutdown (i.e. from the config stored in memory)? That may be overriding your changes on restart. Also there&#39;s a easier way to get the main config (config.yml) which will also handle loading default, using `JavaPlugin.#getConfig()`, i.e. `plugin.getConfig()` in your case.","body":"Are you saving the config on plugin shutdown (i.e. from the config stored in memory)? That may be overriding your changes on restart. Also there&#39;s a easier way to get the main config (config.yml) which will also handle loading default, using <code>JavaPlugin.#getConfig()</code>, i.e. <code>plugin.getConfig()</code> in your case."},{"owner":{"account_id":19517341,"reputation":65,"user_id":14279930,"display_name":"Fender Selim"},"score":0,"creation_date":1617707953,"post_id":66962380,"comment_id":118373894,"body_markdown":"Ok so your first question, does this have anything to do with the issue? ```@Override\n    public void onEnable()\n    {\n\n        FileCreate();\n\n        \n        this.getConfig().options().copyDefaults(true);\n        this.saveConfig();\n    }\n\n    @Override\n    public void onDisable()\n    {\n        getServer().getConsoleSender().sendMessage(ChatColor.GRAY + &quot;[&quot; + \n        getName() + &quot;] &quot; + ChatColor.RED + &quot;Plugin is disabled&quot;);\n    }```this is the on enable and on disable methods","body":"Ok so your first question, does this have anything to do with the issue? <code>@Override     public void onEnable()     {          FileCreate();                   this.getConfig().options().copyDefaults(true);         this.saveConfig();     }      @Override     public void onDisable()     {         getServer().getConsoleSender().sendMessage(ChatColor.GRAY + &quot;[&quot; +          getName() + &quot;] &quot; + ChatColor.RED + &quot;Plugin is disabled&quot;);     }</code>this is the on enable and on disable methods"},{"owner":{"account_id":9744171,"reputation":138,"user_id":7224691,"display_name":"Ben"},"score":0,"creation_date":1617759356,"post_id":66962380,"comment_id":118393561,"body_markdown":"Ah, no that looks fine. I&#39;d add that to the question details though for future readers. Might be worth reposting on bukkit/spigot forums as well.","body":"Ah, no that looks fine. I&#39;d add that to the question details though for future readers. Might be worth reposting on bukkit/spigot forums as well."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642435857,"creation_date":1642435857,"answer_id":70744318,"question_id":66962380,"body_markdown":"This issue appear because you can overriding lines at startup. More exactly, when adding default lines.\r\n\r\nThis will just add a default value, but not overriding:\r\n```\r\nCustomConfig.get().addDefault(&quot;Name1&quot;, &quot;&#167;dHis&quot;);\r\n```\r\nIt&#39;s this that change everything:\r\n```\r\nCustomConfig.get().createSection(&quot;Archive&quot;);\r\n```\r\nYou should keep using `addDefault()`. For section just use `addDefault(&quot;mysection.key&quot;, &quot;myval&quot;)`, and so, in your case:\r\n```\r\nCustomConfig.get().addDefault(&quot;Archive.Name&quot;, &quot;Archive&quot;);\r\n```","title":"Minecraft plugin config.yml sections doesn&#39;t save","body":"<p>This issue appear because you can overriding lines at startup. More exactly, when adding default lines.</p>\n<p>This will just add a default value, but not overriding:</p>\n<pre><code>CustomConfig.get().addDefault(&quot;Name1&quot;, &quot;§dHis&quot;);\n</code></pre>\n<p>It's this that change everything:</p>\n<pre><code>CustomConfig.get().createSection(&quot;Archive&quot;);\n</code></pre>\n<p>You should keep using <code>addDefault()</code>. For section just use <code>addDefault(&quot;mysection.key&quot;, &quot;myval&quot;)</code>, and so, in your case:</p>\n<pre><code>CustomConfig.get().addDefault(&quot;Archive.Name&quot;, &quot;Archive&quot;);\n</code></pre>\n"}],"owner":{"account_id":19517341,"reputation":65,"user_id":14279930,"display_name":"Fender Selim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70744318,"answer_count":1,"score":0,"last_activity_date":1642435857,"creation_date":1617680112,"question_id":66962380,"body_markdown":"I am writing a Minecraft plugin based on spigot coding. \r\nBut there I have the following issue, I am trying to edit a configuration file through the plugin, but when I attempt to store the information the data is not stored. As an example when I change `name` from `Archive` to `Archive Stats` and reload the server. Then the configuration `name` returns to `Archive`.\r\n\r\n```\r\nArchive:\r\n  Material:\r\n    ==: org.bukkit.inventory.ItemStack\r\n    v: 2586\r\n    type: BOOKSHELF\r\n  ArchiveAtStart: false\r\n  Name: Archive\r\n```\r\nwhen I change the name to &quot;Archive Stats&quot;\r\n```\r\nArchive:\r\n  Material:\r\n    ==: org.bukkit.inventory.ItemStack\r\n    v: 2586\r\n    type: BOOKSHELF\r\n  ArchiveAtStart: false\r\n  Name: Archive Stats\r\n```\r\nand reloaded the server, it still changes back to &quot;Archive&quot;\r\n```\r\nArchive:\r\n  Material:\r\n    ==: org.bukkit.inventory.ItemStack\r\n    v: 2586\r\n    type: BOOKSHELF\r\n  ArchiveAtStart: false\r\n  Name: Archive\r\n```\r\nso here are the 2 codes to show:\r\n1. The class\r\n```\r\npackage com.Fender.Bedrock.files;\r\n\r\nimport com.Fender.Bedrock.Bedrock;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.configuration.InvalidConfigurationException;\r\nimport org.bukkit.configuration.file.FileConfiguration;\r\nimport org.bukkit.configuration.file.YamlConfiguration;\r\n\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\n\r\npublic class CustomConfig\r\n{\r\n\r\n    private static Bedrock plugin;\r\n    public static File file;\r\n    private static FileConfiguration customFile;\r\n\r\n    public static void setup(Bedrock plugin1)\r\n    {\r\n\r\n        plugin = plugin1;\r\n\r\n        file = new File(plugin.getDataFolder(), &quot;config.yml&quot;);\r\n\r\n\r\n        if(!file.exists())\r\n        {\r\n            try {\r\n                file.createNewFile();\r\n            }catch (IOException e){\r\n\r\n            }\r\n        }\r\n\r\n        customFile = new YamlConfiguration();\r\n        save();\r\n\r\n\r\n        try{customFile.load(file);}\r\n        catch (IOException | InvalidConfigurationException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public static FileConfiguration get()\r\n    {\r\n\r\n        return customFile;\r\n    }\r\n\r\n\r\n    public static void save()\r\n    {\r\n        try\r\n        {\r\n            customFile.save(file);\r\n        }catch (IOException e)\r\n        {\r\n            System.out.print(&quot;Couldn&#39;t save file!&quot;);\r\n        }\r\n    }\r\n\r\n    public static void load()\r\n    {\r\n        try\r\n        {\r\n            try {\r\n                try {\r\n                    customFile.load(file);\r\n                }catch (InvalidConfigurationException i){\r\n                    System.out.print(&quot;Couldn&#39;t load file!&quot;);\r\n                }\r\n            }catch (FileNotFoundException f)\r\n            {\r\n                System.out.print(&quot;Couldn&#39;t load file!&quot;);\r\n            }\r\n        }catch (IOException e)\r\n        {\r\n            System.out.print(&quot;Couldn&#39;t load file!&quot;);\r\n        }\r\n    }\r\n\r\n    public static void reload()\r\n    {\r\n        customFile = YamlConfiguration.loadConfiguration(file);\r\n    }\r\n\r\n    public boolean exists()\r\n    {\r\n        if(file.exists()){\r\n            return true;\r\n        }else\r\n            {\r\n                return false;\r\n            }\r\n    }\r\n}\r\n\r\n```\r\n2. The method for the main class\r\n```\r\npublic void FileCreate()\r\n    {\r\n        CustomConfig.setup(this);\r\n        CustomConfig.reload();\r\n        {\r\n            CustomConfig.get().addDefault(&quot;Name1&quot;, &quot;&#167;dHis&quot;);\r\n            CustomConfig.get().addDefault(&quot;Place&quot;, 1);\r\n\r\n            CustomConfig.get().createSection(&quot;Archive&quot;);\r\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;Material&quot;, itemStack);\r\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;ArchiveAtStart&quot;, false);\r\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;Name&quot;, &quot;Archive&quot;);\r\n\r\n            CustomConfig.get().createSection(&quot;noob&quot;).addDefault(&quot;help&quot;, false);\r\n        }\r\n        CustomConfig.get().options().copyHeader(true);\r\n        CustomConfig.get().options().copyDefaults(true);\r\n        CustomConfig.save();\r\n        //saveResource(&quot;config.yml&quot;, false);\r\n        this.saveDefaultConfig();\r\n    }\r\n```\r\nFinally, this is my plugin main method :\r\n```\r\n@Override\r\npublic void onEnable() {\r\n     FileCreate();\r\n     this.getConfig().options().copyDefaults(true);\r\n     this.saveConfig();\r\n}\r\n```","title":"Minecraft plugin config.yml sections doesn&#39;t save","body":"<p>I am writing a Minecraft plugin based on spigot coding.\nBut there I have the following issue, I am trying to edit a configuration file through the plugin, but when I attempt to store the information the data is not stored. As an example when I change <code>name</code> from <code>Archive</code> to <code>Archive Stats</code> and reload the server. Then the configuration <code>name</code> returns to <code>Archive</code>.</p>\n<pre><code>Archive:\n  Material:\n    ==: org.bukkit.inventory.ItemStack\n    v: 2586\n    type: BOOKSHELF\n  ArchiveAtStart: false\n  Name: Archive\n</code></pre>\n<p>when I change the name to &quot;Archive Stats&quot;</p>\n<pre><code>Archive:\n  Material:\n    ==: org.bukkit.inventory.ItemStack\n    v: 2586\n    type: BOOKSHELF\n  ArchiveAtStart: false\n  Name: Archive Stats\n</code></pre>\n<p>and reloaded the server, it still changes back to &quot;Archive&quot;</p>\n<pre><code>Archive:\n  Material:\n    ==: org.bukkit.inventory.ItemStack\n    v: 2586\n    type: BOOKSHELF\n  ArchiveAtStart: false\n  Name: Archive\n</code></pre>\n<p>so here are the 2 codes to show:</p>\n<ol>\n<li>The class</li>\n</ol>\n<pre><code>package com.Fender.Bedrock.files;\n\nimport com.Fender.Bedrock.Bedrock;\nimport org.bukkit.Bukkit;\nimport org.bukkit.configuration.InvalidConfigurationException;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\n\npublic class CustomConfig\n{\n\n    private static Bedrock plugin;\n    public static File file;\n    private static FileConfiguration customFile;\n\n    public static void setup(Bedrock plugin1)\n    {\n\n        plugin = plugin1;\n\n        file = new File(plugin.getDataFolder(), &quot;config.yml&quot;);\n\n\n        if(!file.exists())\n        {\n            try {\n                file.createNewFile();\n            }catch (IOException e){\n\n            }\n        }\n\n        customFile = new YamlConfiguration();\n        save();\n\n\n        try{customFile.load(file);}\n        catch (IOException | InvalidConfigurationException e)\n        {\n            e.printStackTrace();\n        }\n\n    }\n\n    public static FileConfiguration get()\n    {\n\n        return customFile;\n    }\n\n\n    public static void save()\n    {\n        try\n        {\n            customFile.save(file);\n        }catch (IOException e)\n        {\n            System.out.print(&quot;Couldn't save file!&quot;);\n        }\n    }\n\n    public static void load()\n    {\n        try\n        {\n            try {\n                try {\n                    customFile.load(file);\n                }catch (InvalidConfigurationException i){\n                    System.out.print(&quot;Couldn't load file!&quot;);\n                }\n            }catch (FileNotFoundException f)\n            {\n                System.out.print(&quot;Couldn't load file!&quot;);\n            }\n        }catch (IOException e)\n        {\n            System.out.print(&quot;Couldn't load file!&quot;);\n        }\n    }\n\n    public static void reload()\n    {\n        customFile = YamlConfiguration.loadConfiguration(file);\n    }\n\n    public boolean exists()\n    {\n        if(file.exists()){\n            return true;\n        }else\n            {\n                return false;\n            }\n    }\n}\n\n</code></pre>\n<ol start=\"2\">\n<li>The method for the main class</li>\n</ol>\n<pre><code>public void FileCreate()\n    {\n        CustomConfig.setup(this);\n        CustomConfig.reload();\n        {\n            CustomConfig.get().addDefault(&quot;Name1&quot;, &quot;§dHis&quot;);\n            CustomConfig.get().addDefault(&quot;Place&quot;, 1);\n\n            CustomConfig.get().createSection(&quot;Archive&quot;);\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;Material&quot;, itemStack);\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;ArchiveAtStart&quot;, false);\n            CustomConfig.get().getConfigurationSection(&quot;Archive&quot;).addDefault(&quot;Name&quot;, &quot;Archive&quot;);\n\n            CustomConfig.get().createSection(&quot;noob&quot;).addDefault(&quot;help&quot;, false);\n        }\n        CustomConfig.get().options().copyHeader(true);\n        CustomConfig.get().options().copyDefaults(true);\n        CustomConfig.save();\n        //saveResource(&quot;config.yml&quot;, false);\n        this.saveDefaultConfig();\n    }\n</code></pre>\n<p>Finally, this is my plugin main method :</p>\n<pre><code>@Override\npublic void onEnable() {\n     FileCreate();\n     this.getConfig().options().copyDefaults(true);\n     this.saveConfig();\n}\n</code></pre>\n"},{"tags":["java","android","api","retrofit"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1642438380,"post_id":70744091,"comment_id":125065466,"body_markdown":"Not enough info here to debug.  Where are you setting vaccinationInfoList body ==null?  Because in that case it won&#39;t be set.  Also, what is the response from the server?  Is the server sending down an array of size 1 regardless?","body":"Not enough info here to debug.  Where are you setting vaccinationInfoList body ==null?  Because in that case it won&#39;t be set.  Also, what is the response from the server?  Is the server sending down an array of size 1 regardless?"},{"owner":{"account_id":16690811,"reputation":64,"user_id":12063473,"display_name":"NamNgo-2810"},"score":0,"creation_date":1642463462,"post_id":70744091,"comment_id":125072617,"body_markdown":"No, I tested with Postman and receive the value of that attribute is null, not the empty array list","body":"No, I tested with Postman and receive the value of that attribute is null, not the empty array list"}],"answers":[{"tags":[],"owner":{"account_id":19193743,"reputation":264,"user_id":14022951,"display_name":"A Sarshar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642435382,"creation_date":1642435382,"answer_id":70744215,"question_id":70744091,"body_markdown":"If you have access and can change api response  so change response from `null` to empty array list `[]`\r\n\r\nIf not You can use `com.google.gson.JsonElement`","title":"Android API get attribute as list or null","body":"<p>If you have access and can change api response  so change response from <code>null</code> to empty array list <code>[]</code></p>\n<p>If not You can use <code>com.google.gson.JsonElement</code></p>\n"}],"owner":{"account_id":16690811,"reputation":64,"user_id":12063473,"display_name":"NamNgo-2810"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642435382,"creation_date":1642434773,"question_id":70744091,"body_markdown":"I&#39;m creating an API that return Vaccination Info of people. The code below is that I&#39;m getting list of vaccination IDs. If people injected 1 or more, the API working fine, I get a list as expected. Vice versa, if they haven&#39;t injected, the data on server is null. In that case, when I make an API call I will get the error that vaccinationInfoList is null, but it&#39;s still have the size 1. I tried as below to locate the error but it&#39;s cannot catch any exception. \r\n```\r\ntry {\r\n    Response&lt;List&lt;Vaccination_info&gt;&gt; res = call.execute();\r\n    Log.v(&quot;RES&quot; , String.valueOf(res));\r\n    if (res.body() != null){\r\n        try {\r\n            vaccinationInfoList = res.body();\r\n        }\r\n        catch (Exception n){\r\n            Log.v(&quot;ExceptionN&quot; , String.valueOf(n));\r\n        }\r\n    } else {\r\n            Log.v(&quot;NULL&quot; , &quot;NULL&quot;);\r\n     }\r\n\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n\r\nLog.v(&quot;VACC&quot;, String.valueOf(vaccinationInfoList.size()));\r\n```\r\nCan someone recommend me a solution or a different aproach? Thanks so much","title":"Android API get attribute as list or null","body":"<p>I'm creating an API that return Vaccination Info of people. The code below is that I'm getting list of vaccination IDs. If people injected 1 or more, the API working fine, I get a list as expected. Vice versa, if they haven't injected, the data on server is null. In that case, when I make an API call I will get the error that vaccinationInfoList is null, but it's still have the size 1. I tried as below to locate the error but it's cannot catch any exception.</p>\n<pre><code>try {\n    Response&lt;List&lt;Vaccination_info&gt;&gt; res = call.execute();\n    Log.v(&quot;RES&quot; , String.valueOf(res));\n    if (res.body() != null){\n        try {\n            vaccinationInfoList = res.body();\n        }\n        catch (Exception n){\n            Log.v(&quot;ExceptionN&quot; , String.valueOf(n));\n        }\n    } else {\n            Log.v(&quot;NULL&quot; , &quot;NULL&quot;);\n     }\n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n\nLog.v(&quot;VACC&quot;, String.valueOf(vaccinationInfoList.size()));\n</code></pre>\n<p>Can someone recommend me a solution or a different aproach? Thanks so much</p>\n"},{"tags":["java","jdbc","connection","resultset"],"comments":[{"owner":{"account_id":59115,"reputation":10766,"user_id":176897,"display_name":"tetsuo"},"score":0,"creation_date":1348499966,"post_id":1039419,"comment_id":16930759,"body_markdown":"http://stackoverflow.com/questions/4507440/must-jdbc-resultsets-and-statements-be-closed-separately-although-the-connection","body":"<a href=\"http://stackoverflow.com/questions/4507440/must-jdbc-resultsets-and-statements-be-closed-separately-although-the-connection\" title=\"must jdbc resultsets and statements be closed separately although the connection\">stackoverflow.com/questions/4507440/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":28119,"reputation":15396,"user_id":74772,"accept_rate":82,"display_name":"teabot"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1642433836,"creation_date":1245861801,"answer_id":1039543,"question_id":1039419,"body_markdown":"Personally I&#39;d use a pool as this will take care of all of the resource management for you. If your connection requirements change then you can easily modify the pool configuration.  With a pool in place you can open/close connections and prepared statements according to best-practice and leave the resource management to the pool.\r\n\r\nTypically, when using a pool:\r\n\r\n - closing a connection will actually just return it to the pool\r\n - the act of preparing a statement will either retrieve a previously prepared statement from the Connection&#39;s statement cache, or if one is not available, create a new statement and cache it for later use.\r\n - the act of closing a PreparedStatement will actually just return it to the connection&#39;s statement cache.\r\n\r\nFurthermore - depending on the pool implementation - it may be able to notify you when there are resource leaks making it easier to identify these sorts of problems in your code.\r\n\r\nTake a look at the source of an example implementation like [DBCP][1] - it&#39;s quite interesting to see how they work.\r\n\r\n\r\n  [1]: http://commons.apache.org/dbcp/","title":"When to close Connection, Statement, PreparedStatement and ResultSet in JDBC","body":"<p>Personally I'd use a pool as this will take care of all of the resource management for you. If your connection requirements change then you can easily modify the pool configuration.  With a pool in place you can open/close connections and prepared statements according to best-practice and leave the resource management to the pool.</p>\n<p>Typically, when using a pool:</p>\n<ul>\n<li>closing a connection will actually just return it to the pool</li>\n<li>the act of preparing a statement will either retrieve a previously prepared statement from the Connection's statement cache, or if one is not available, create a new statement and cache it for later use.</li>\n<li>the act of closing a PreparedStatement will actually just return it to the connection's statement cache.</li>\n</ul>\n<p>Furthermore - depending on the pool implementation - it may be able to notify you when there are resource leaks making it easier to identify these sorts of problems in your code.</p>\n<p>Take a look at the source of an example implementation like <a href=\"http://commons.apache.org/dbcp/\" rel=\"nofollow noreferrer\">DBCP</a> - it's quite interesting to see how they work.</p>\n"},{"tags":[],"owner":{"account_id":4787547,"reputation":5568,"user_id":3867574,"accept_rate":43,"display_name":"Serg M Ten"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1480602540,"creation_date":1480602540,"answer_id":40913181,"question_id":1039419,"body_markdown":"**1.** Even if you have a single client, a connection pool may still be beneficial. Connecting to the database may take a significant time so doing it very often may slow down your application with slow network requests. Moreover as @teabot explains, a pool may help identifying if any connection is not being closed.\r\n\r\n**2.** It is not a good idea to open a connection and leave it open forever for two reasons. First the connection may die if there is a temporary network interruption. The longer it is open the more likely that it is dead when required. Second, a failed transaction may leave the connection in a state not suitable for continuing operation. The best is usually to open a few connections, reuse them for five or ten minutes, then recycle them.\r\n\r\n**3.** Depending on the database and the driver, the connection may have a prepared statement cache. Even if using a different connection, the RDBMS usually caches statements that are exactly the same including it parameters. Therefore SELECT * FROM table WHERE value=? as a prepared statement will be cached across connections, but if you specify the parameter value like SELECT * FROM table WHERE value=&#39;your_data&#39; then probably it won&#39;t be cached server side.\r\n\r\n**4.** As explained in 3, depends on the RDBMS implementation, do a benchmark.\r\n\r\n**5.** There is no need to close and prepare again a statement which is going to be reused with different parameters. Just set again the parameters and execute.\r\n\r\nFor multiple clients, the database will always have a concurrent connection limit which is not usually any big number. If all the clients go through a webapp then a pool like DBCP is all right. But obviously it&#39;s undesirable to create a pool for each client with several connections open permanently.\r\n","title":"When to close Connection, Statement, PreparedStatement and ResultSet in JDBC","body":"<p><strong>1.</strong> Even if you have a single client, a connection pool may still be beneficial. Connecting to the database may take a significant time so doing it very often may slow down your application with slow network requests. Moreover as @teabot explains, a pool may help identifying if any connection is not being closed.</p>\n\n<p><strong>2.</strong> It is not a good idea to open a connection and leave it open forever for two reasons. First the connection may die if there is a temporary network interruption. The longer it is open the more likely that it is dead when required. Second, a failed transaction may leave the connection in a state not suitable for continuing operation. The best is usually to open a few connections, reuse them for five or ten minutes, then recycle them.</p>\n\n<p><strong>3.</strong> Depending on the database and the driver, the connection may have a prepared statement cache. Even if using a different connection, the RDBMS usually caches statements that are exactly the same including it parameters. Therefore SELECT * FROM table WHERE value=? as a prepared statement will be cached across connections, but if you specify the parameter value like SELECT * FROM table WHERE value='your_data' then probably it won't be cached server side.</p>\n\n<p><strong>4.</strong> As explained in 3, depends on the RDBMS implementation, do a benchmark.</p>\n\n<p><strong>5.</strong> There is no need to close and prepare again a statement which is going to be reused with different parameters. Just set again the parameters and execute.</p>\n\n<p>For multiple clients, the database will always have a concurrent connection limit which is not usually any big number. If all the clients go through a webapp then a pool like DBCP is all right. But obviously it's undesirable to create a pool for each client with several connections open permanently.</p>\n"}],"owner":{"reputation":33700,"user_id":117039,"accept_rate":71,"display_name":"5YrsLaterDBA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17521,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"answer_count":2,"score":36,"last_activity_date":1642435026,"creation_date":1245860551,"question_id":1039419,"body_markdown":"Few questions on JDBC coding:\r\n\r\n1. For a single client application, do we need a Connection pool?\r\n2. Is it a good idea to create a `Connection` at the beginning and keep it alive without close it until application exit? Why?\r\n3. `PreparedStatement` is associated with `Connection`, if my connection is not closed after each query, why not keep the `PreparedStatement` alive and reuse it in other methods?\r\n4. if we create `PreparedStatement` each query, does the database knows it is the same `PreparedStatement` and ignore unnecessary actions after the first time?\r\n5. `PreparedStatement` is not create once and reuse many times statement? If yes, why need to close it each time?\r\n\r\nI know the call to `close()` will release the resource. But If we know we are going to use it later, why release it and then request it again later?\r\n\r\nHow about a multi-client application? We need a connection pool and so we need to create and close Connection, `Statement`, and `PreparedStatement` each time?\r\n","title":"When to close Connection, Statement, PreparedStatement and ResultSet in JDBC","body":"<p>Few questions on JDBC coding:</p>\n<ol>\n<li>For a single client application, do we need a Connection pool?</li>\n<li>Is it a good idea to create a <code>Connection</code> at the beginning and keep it alive without close it until application exit? Why?</li>\n<li><code>PreparedStatement</code> is associated with <code>Connection</code>, if my connection is not closed after each query, why not keep the <code>PreparedStatement</code> alive and reuse it in other methods?</li>\n<li>if we create <code>PreparedStatement</code> each query, does the database knows it is the same <code>PreparedStatement</code> and ignore unnecessary actions after the first time?</li>\n<li><code>PreparedStatement</code> is not create once and reuse many times statement? If yes, why need to close it each time?</li>\n</ol>\n<p>I know the call to <code>close()</code> will release the resource. But If we know we are going to use it later, why release it and then request it again later?</p>\n<p>How about a multi-client application? We need a connection pool and so we need to create and close Connection, <code>Statement</code>, and <code>PreparedStatement</code> each time?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1343868307,"post_id":11769555,"comment_id":15629777,"body_markdown":"You need more backslashes in the first parameter. It may seem a bit counter-intuitive, but if you think about, it will make sense.","body":"You need more backslashes in the first parameter. It may seem a bit counter-intuitive, but if you think about, it will make sense."},{"owner":{"display_name":"user166390"},"score":4,"creation_date":1343868632,"post_id":11769555,"comment_id":15629837,"body_markdown":"To write a literal \\ in the regex, use `&quot;\\\\\\\\&quot;` The first &quot;double up&quot; is to escape the slash in the string *literal* (so the resulting string *value* is \\\\\\). Then the first slash escapes the second *in* the regexp engine so it will match a \\ character. Fun, eh?","body":"To write a literal \\ in the regex, use <code>&quot;\\\\\\\\&quot;</code> The first &quot;double up&quot; is to escape the slash in the string <i>literal</i> (so the resulting string <i>value</i> is \\\\&#41;. Then the first slash escapes the second <i>in</i> the regexp engine so it will match a \\ character. Fun, eh?"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":1,"creation_date":1343873064,"post_id":11769555,"comment_id":15630634,"body_markdown":"Sounds like you&#39;re trying to decode a string that may contain escape sequences, where backslash is the escape character. What should the output of your decoder be when the input contains backslash-backslash-quote? Make sure you write a test for that case.","body":"Sounds like you&#39;re trying to decode a string that may contain escape sequences, where backslash is the escape character. What should the output of your decoder be when the input contains backslash-backslash-quote? Make sure you write a test for that case."}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1642433866,"creation_date":1343868354,"answer_id":11769570,"question_id":11769555,"body_markdown":"If you ***don&#39;t need any of regex mechanisms like predefined character classes \\d, quantifiers etc.*** instead of `replaceAll` which expects regex use `replace` which expects literals  \r\n\r\n    str = str.replace(&quot;\\\\\\&quot;&quot;,&quot;\\&quot;&quot;);\r\n\r\nBoth methods will replace *all* occurrences of targets, but `replace` will treat targets literally.\r\n\r\n---\r\nBUT if you really ***must*** use regex you are looking for\r\n\r\n    str = str.replaceAll(&quot;\\\\\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)\r\n\r\n`\\` is special character in regex (used for instance to create `\\d` - character class representing digits). To make regex treat `\\` as normal character you need to place another `\\` before it to turn off its special meaning (you need to escape it). So regex which we are trying to create is `\\\\`.  \r\n\r\nBut to create string literal representing text `\\\\` so you could pass it to regex engine you need to write it as four `\\` (`&quot;\\\\\\\\&quot;`), because `\\` is also special character in String literals (part of code written using `&quot;...&quot;`) since it can be used for instance as `\\t` to represent tabulator.\r\nThat is why you also need to escape `\\` there.\r\n\r\nIn short you need to escape `\\` twice:\r\n\r\n - in regex `\\\\`\r\n - and then in String literal `&quot;\\\\\\\\&quot;`","title":"Regular expression to match a backslash followed by a quote","body":"<p>If you <em><strong>don't need any of regex mechanisms like predefined character classes \\d, quantifiers etc.</strong></em> instead of <code>replaceAll</code> which expects regex use <code>replace</code> which expects literals</p>\n<pre><code>str = str.replace(&quot;\\\\\\&quot;&quot;,&quot;\\&quot;&quot;);\n</code></pre>\n<p>Both methods will replace <em>all</em> occurrences of targets, but <code>replace</code> will treat targets literally.</p>\n<hr />\n<p>BUT if you really <em><strong>must</strong></em> use regex you are looking for</p>\n<pre><code>str = str.replaceAll(&quot;\\\\\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)\n</code></pre>\n<p><code>\\</code> is special character in regex (used for instance to create <code>\\d</code> - character class representing digits). To make regex treat <code>\\</code> as normal character you need to place another <code>\\</code> before it to turn off its special meaning (you need to escape it). So regex which we are trying to create is <code>\\\\</code>.</p>\n<p>But to create string literal representing text <code>\\\\</code> so you could pass it to regex engine you need to write it as four <code>\\</code> (<code>&quot;\\\\\\\\&quot;</code>), because <code>\\</code> is also special character in String literals (part of code written using <code>&quot;...&quot;</code>) since it can be used for instance as <code>\\t</code> to represent tabulator.\nThat is why you also need to escape <code>\\</code> there.</p>\n<p>In short you need to escape <code>\\</code> twice:</p>\n<ul>\n<li>in regex <code>\\\\</code></li>\n<li>and then in String literal <code>&quot;\\\\\\\\&quot;</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1343869531,"creation_date":1343869531,"answer_id":11769677,"question_id":11769555,"body_markdown":"You don&#39;t need a regular expression.\n\n    str.replace(&quot;\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)\n\nshould work just fine.\n\nThe `replace` method takes two substrings and replaces all non-overlapping occurrences of the first with the second.  Per the [javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29):\n\n&gt;     public String replace(CharSequence target,\n&gt;                           CharSequence replacement)\n&gt;\n&gt; Replaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence. The replacement proceeds from the beginning of the string to the end, for example, replacing `&quot;aa&quot;` with `&quot;b&quot;` in the string `&quot;aaa&quot;` will result in `&quot;ba&quot;` rather than `&quot;ab&quot;`.","title":"Regular expression to match a backslash followed by a quote","body":"<p>You don't need a regular expression.</p>\n<pre><code>str.replace(&quot;\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)\n</code></pre>\n<p>should work just fine.</p>\n<p>The <code>replace</code> method takes two substrings and replaces all non-overlapping occurrences of the first with the second.  Per the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\">javadoc</a>:</p>\n<blockquote>\n<pre><code>public String replace(CharSequence target,\n                      CharSequence replacement)\n</code></pre>\n<p>Replaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence. The replacement proceeds from the beginning of the string to the end, for example, replacing <code>&quot;aa&quot;</code> with <code>&quot;b&quot;</code> in the string <code>&quot;aaa&quot;</code> will result in <code>&quot;ba&quot;</code> rather than <code>&quot;ab&quot;</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1707996,"reputation":672,"user_id":1566675,"display_name":"godspeedlee"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1343869565,"creation_date":1343869565,"answer_id":11769681,"question_id":11769555,"body_markdown":"try this: `str.replaceAll(&quot;\\\\\\\\\\&quot;&quot;, &quot;\\\\\\&quot;&quot;)` &lt;BR&gt;\r\nbecause Java will replace `\\`  twice:\r\n\r\n(1) `\\\\\\\\\\&quot;` --&gt; `\\\\&quot;` (for string) &lt;BR&gt;\r\n(2) `\\\\&quot;` --&gt; `\\&quot;` (for regex)","title":"Regular expression to match a backslash followed by a quote","body":"<p>try this: <code>str.replaceAll(\"\\\\\\\\\\\"\", \"\\\\\\\"\")</code> <BR>\nbecause Java will replace <code>\\</code>  twice:</p>\n\n<p>(1) <code>\\\\\\\\\\\"</code> --> <code>\\\\\"</code> (for string) <BR>\n(2) <code>\\\\\"</code> --> <code>\\\"</code> (for regex)</p>\n"}],"owner":{"account_id":1712276,"reputation":2332,"user_id":1570058,"accept_rate":54,"display_name":"Simo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67597,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":11769570,"answer_count":3,"score":25,"last_activity_date":1642435009,"creation_date":1343868183,"question_id":11769555,"body_markdown":"How to write a regular expression to match this `\\&quot;` (a backslash then a quote)? Assume I have a string like this: \r\n\r\n    &lt;a href=\\&quot;google.com\\&quot;&gt; click to search &lt;/a&gt;\r\n\r\nI need to replace all the `\\&quot;` with a `&quot;`, so the result would look like:\r\n\r\n    &lt;a href=&quot;google.com&quot;&gt; click to search &lt;/a&gt;\r\n\r\nThis one does not work: `str.replaceAll(&quot;\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)` because it only matches the quote. Not sure how to get around with the backslash. I could have removed the backslash first, but there are other backslashes in my string.","title":"Regular expression to match a backslash followed by a quote","body":"<p>How to write a regular expression to match this <code>\\&quot;</code> (a backslash then a quote)? Assume I have a string like this:</p>\n<pre><code>&lt;a href=\\&quot;google.com\\&quot;&gt; click to search &lt;/a&gt;\n</code></pre>\n<p>I need to replace all the <code>\\&quot;</code> with a <code>&quot;</code>, so the result would look like:</p>\n<pre><code>&lt;a href=&quot;google.com&quot;&gt; click to search &lt;/a&gt;\n</code></pre>\n<p>This one does not work: <code>str.replaceAll(&quot;\\\\\\&quot;&quot;, &quot;\\&quot;&quot;)</code> because it only matches the quote. Not sure how to get around with the backslash. I could have removed the backslash first, but there are other backslashes in my string.</p>\n"},{"tags":["java","mocking","mockito","assert","hamcrest"],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1455279931,"creation_date":1455279931,"answer_id":35362626,"question_id":35362377,"body_markdown":"Well, you should try to let assertThat do the work for you.\r\n\r\n    Set&lt;WhateverPropertyTypeYouAreUsing&gt; expectedSet = Collections.singleton( ... create a property object with that id/value);\r\n\r\n    assertThat(mySet, is(expectedSet))\r\n\r\nThe restriction here: that assumes that your set contains only that one property value.\r\n\r\nOtherwise, you can go for:\r\n\r\n    assertThat(mySet.contains(someProperty), is(true))\r\n\r\n(probably with an additional message to better describe a failing assert).\r\n\r\nPrereq: your property class should be implementing equals() in a reasonable manner.\r\n","title":"How to assert that Set has item with exact property with hamcrest","body":"<p>Well, you should try to let assertThat do the work for you.</p>\n\n<pre><code>Set&lt;WhateverPropertyTypeYouAreUsing&gt; expectedSet = Collections.singleton( ... create a property object with that id/value);\n\nassertThat(mySet, is(expectedSet))\n</code></pre>\n\n<p>The restriction here: that assumes that your set contains only that one property value.</p>\n\n<p>Otherwise, you can go for:</p>\n\n<pre><code>assertThat(mySet.contains(someProperty), is(true))\n</code></pre>\n\n<p>(probably with an additional message to better describe a failing assert).</p>\n\n<p>Prereq: your property class should be implementing equals() in a reasonable manner.</p>\n"},{"tags":[],"owner":{"account_id":16138129,"reputation":197,"user_id":11650063,"display_name":"Mamadou Ouologuem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638448189,"creation_date":1638448189,"answer_id":70199496,"question_id":35362377,"body_markdown":"Another approach will be:\r\n\r\n`assertTrue(mySet.contains(someProperty);`\r\n","title":"How to assert that Set has item with exact property with hamcrest","body":"<p>Another approach will be:</p>\n<p><code>assertTrue(mySet.contains(someProperty);</code></p>\n"},{"tags":[],"owner":{"account_id":18687,"reputation":1624,"user_id":43046,"accept_rate":65,"display_name":"andresp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642434995,"creation_date":1642434995,"answer_id":70744135,"question_id":35362377,"body_markdown":"Your original code is fine. Your problem is probably due to some version conflict. By the way, you should be using Hamcrest&#39;s `assertThat` (`import static org.hamcrest.MatcherAssert.assertThat`), instead of JUnit&#39;s.","title":"How to assert that Set has item with exact property with hamcrest","body":"<p>Your original code is fine. Your problem is probably due to some version conflict. By the way, you should be using Hamcrest's <code>assertThat</code> (<code>import static org.hamcrest.MatcherAssert.assertThat</code>), instead of JUnit's.</p>\n"}],"owner":{"account_id":7826969,"reputation":183,"user_id":5918210,"display_name":"Szympek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6235,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":35362626,"answer_count":3,"score":6,"last_activity_date":1642434995,"creation_date":1455279128,"question_id":35362377,"body_markdown":"i&#39;ve been trying assert that my Set has collection with given property with hamcrest, using this [solution][1], but i have :\r\n\r\n&gt; java.lang.NoSuchMethodError:\r\n&gt; org.hamcrest.Matcher.describeMismatch(Ljava/lang/Object;Lorg/hamcrest/Description;)V\r\n&gt; \tat org.hamcrest.Condition$Matched.matching(Condition.java:52)\r\n\r\nimports:\r\n\r\n    import static org.hamcrest.Matchers.contains;\r\n    import static org.hamcrest.Matchers.equalTo;\r\n    import static org.hamcrest.Matchers.hasProperty;\r\n    import static org.junit.Assert.assertThat;\r\n\r\ncode:\r\n\r\n    assertThat(mySet, contains(hasProperty(&quot;id&quot;, equalTo(&quot;expectedId&quot;))));\r\n\t\r\nhave You any ideas how to assert it well ?\r\n\r\n  [1]: https://stackoverflow.com/questions/12166415/how-do-i-assert-a-list-contains-elements-with-a-certain-property","title":"How to assert that Set has item with exact property with hamcrest","body":"<p>i've been trying assert that my Set has collection with given property with hamcrest, using this <a href=\"https://stackoverflow.com/questions/12166415/how-do-i-assert-a-list-contains-elements-with-a-certain-property\">solution</a>, but i have :</p>\n\n<blockquote>\n  <p>java.lang.NoSuchMethodError:\n  org.hamcrest.Matcher.describeMismatch(Ljava/lang/Object;Lorg/hamcrest/Description;)V\n    at org.hamcrest.Condition$Matched.matching(Condition.java:52)</p>\n</blockquote>\n\n<p>imports:</p>\n\n<pre><code>import static org.hamcrest.Matchers.contains;\nimport static org.hamcrest.Matchers.equalTo;\nimport static org.hamcrest.Matchers.hasProperty;\nimport static org.junit.Assert.assertThat;\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>assertThat(mySet, contains(hasProperty(\"id\", equalTo(\"expectedId\"))));\n</code></pre>\n\n<p>have You any ideas how to assert it well ?</p>\n"},{"tags":["java","sql","google-cloud-platform"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1642434645,"post_id":70743998,"comment_id":125064043,"body_markdown":"Okay, well you&#39;ve got part of the code there... where are you stuck?","body":"Okay, well you&#39;ve got part of the code there... where are you stuck?"},{"owner":{"account_id":23967201,"reputation":1,"user_id":17956509,"display_name":"Kemel_251"},"score":0,"creation_date":1642434803,"post_id":70743998,"comment_id":125064100,"body_markdown":"Sorry, it&#180;s my first time asking in stack overflow. I want to get the data from the JSON I upload in the bucket. How can I do it with that public static class GCSEvent {]???","body":"Sorry, it&#180;s my first time asking in stack overflow. I want to get the data from the JSON I upload in the bucket. How can I do it with that public static class GCSEvent {]???"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1642434926,"post_id":70743998,"comment_id":125064152,"body_markdown":"Okay, if the problem isn&#39;t actually related to the SQL insertion, I suggest you take that part out of the question. There&#39;s sample code in https://cloud.google.com/functions/docs/calling/storage#functions-calling-storage-java that logs the bucket, object name etc in response to a Storage trigger.","body":"Okay, if the problem isn&#39;t actually related to the SQL insertion, I suggest you take that part out of the question. There&#39;s sample code in <a href=\"https://cloud.google.com/functions/docs/calling/storage#functions-calling-storage-java\" rel=\"nofollow noreferrer\">cloud.google.com/functions/docs/calling/&hellip;</a> that logs the bucket, object name etc in response to a Storage trigger."},{"owner":{"account_id":23967201,"reputation":1,"user_id":17956509,"display_name":"Kemel_251"},"score":0,"creation_date":1642435017,"post_id":70743998,"comment_id":125064193,"body_markdown":"Okay, thank you so much :)","body":"Okay, thank you so much :)"},{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1642449022,"post_id":70743998,"comment_id":125068769,"body_markdown":"download the file, read the file, parse the JSON, build your query, run your query on the database. It&#39;s the main steps that you have to implement.","body":"download the file, read the file, parse the JSON, build your query, run your query on the database. It&#39;s the main steps that you have to implement."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1643212507,"post_id":70743998,"comment_id":125280530,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":23967201,"reputation":1,"user_id":17956509,"display_name":"Kemel_251"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642434825,"creation_date":1642434312,"question_id":70743998,"body_markdown":"I&#39;m trying to upload a JSON to a cloud bucket to trigger one cloud function to upload the JSON&#39;s data to a SQL table. I would like to know how to upload bucket data with an INSERT INTO query once GCSEvent is triggered.\r\n\r\n\r\n```\r\npackage com.example;\r\n\r\nimport com.example.Example.GCSEvent;\r\nimport com.google.cloud.functions.BackgroundFunction;\r\nimport com.google.cloud.functions.Context;\r\nimport java.util.logging.Logger;\r\nimport com.zaxxer.hikari.HikariConfig;\r\nimport com.zaxxer.hikari.HikariDataSource;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\n\r\npublic class Example implements BackgroundFunction&lt;GCSEvent&gt; {\r\n  private static final Logger logger = Logger.getLogger(Example.class.getName());\r\n\r\n  @Override\r\n  public void accept(GCSEvent event, Context context) {\r\n    logger.info(&quot;Processing file: &quot; + event.name);\r\n    HikariConfig config = new HikariConfig();\r\n    config.setJdbcUrl(String.format(&quot;jdbc:mysql:///%s&quot;, &quot;***&quot;));\r\n    config.setUsername(&quot;root&quot;);\r\n    config.setPassword(&quot;&quot;);\r\n    config.addDataSourceProperty(&quot;socketFactory&quot;, &quot;com.google.cloud.sql.mysql.SocketFactory&quot;);\r\n    config.addDataSourceProperty(&quot;cloudSqlInstance&quot;, &quot;***&quot;);\r\n  }\r\n\r\n  public static class GCSEvent {\r\n    String bucket;\r\n    String name;\r\n    String metageneration;\r\n  }\r\n}\r\n```","title":"How can I upload data from Java Cloud Function to SQL table?","body":"<p>I'm trying to upload a JSON to a cloud bucket to trigger one cloud function to upload the JSON's data to a SQL table. I would like to know how to upload bucket data with an INSERT INTO query once GCSEvent is triggered.</p>\n<pre><code>package com.example;\n\nimport com.example.Example.GCSEvent;\nimport com.google.cloud.functions.BackgroundFunction;\nimport com.google.cloud.functions.Context;\nimport java.util.logging.Logger;\nimport com.zaxxer.hikari.HikariConfig;\nimport com.zaxxer.hikari.HikariDataSource;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class Example implements BackgroundFunction&lt;GCSEvent&gt; {\n  private static final Logger logger = Logger.getLogger(Example.class.getName());\n\n  @Override\n  public void accept(GCSEvent event, Context context) {\n    logger.info(&quot;Processing file: &quot; + event.name);\n    HikariConfig config = new HikariConfig();\n    config.setJdbcUrl(String.format(&quot;jdbc:mysql:///%s&quot;, &quot;***&quot;));\n    config.setUsername(&quot;root&quot;);\n    config.setPassword(&quot;&quot;);\n    config.addDataSourceProperty(&quot;socketFactory&quot;, &quot;com.google.cloud.sql.mysql.SocketFactory&quot;);\n    config.addDataSourceProperty(&quot;cloudSqlInstance&quot;, &quot;***&quot;);\n  }\n\n  public static class GCSEvent {\n    String bucket;\n    String name;\n    String metageneration;\n  }\n}\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":10371181,"reputation":19,"user_id":7648831,"display_name":"Azim Uddin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642434450,"creation_date":1642434450,"answer_id":70744025,"question_id":70722816,"body_markdown":"I have found a solution for this.\r\nHere is the solution to this.\r\n\r\nHere are the imports.\r\n```\r\nimport static org.springframework.data.mongodb.core.aggregation.ComparisonOperators.Eq.valueOf;\r\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\r\nimport org.springframework.data.mongodb.core.aggregation.AggregationResults;\r\nimport org.springframework.data.mongodb.core.aggregation.ArrayOperators.Filter;\r\nimport org.springframework.data.mongodb.core.query.Criteria;\r\n```\r\n\r\n```\r\nAggregation aggregation = Aggregation.newAggregation(\r\n\t\t\t\tAggregation.match(new Criteria(&quot;organizationId&quot;).is(orgId)),\r\n\t\t\t\tAggregation.project(&quot;domains&quot;)\r\n\t\t\t\t\t\t.and(Filter.filter(&quot;domains&quot;).as(&quot;domains&quot;).by(valueOf(&quot;domains.activeInd&quot;).equalToValue(true)))\r\n\t\t\t\t\t\t.as(&quot;domains&quot;)\r\n\t\t);\r\n\r\nAggregationResults&lt;outputclass&gt; resultObject = mongoTemplate.aggregate(aggregation, &quot;collection_name&quot;,\r\n\t\t\t\toutputclass.class);\r\nList&lt;outputclass&gt; resultList=resultObject.getMappedResults();\r\n```\r\nThis works only with mongoTemplate.\r\n and if you don&#39;t know how to configure mongo template then here it is \r\n```\r\nMongoTemplate mongoTemplate= new MongoTemplate(mongoClientObject, dbName);\r\n```\r\n","title":"Java Spring-boot code for aggregate operation with projection and filter in MongoDB","body":"<p>I have found a solution for this.\nHere is the solution to this.</p>\n<p>Here are the imports.</p>\n<pre><code>import static org.springframework.data.mongodb.core.aggregation.ComparisonOperators.Eq.valueOf;\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.aggregation.AggregationResults;\nimport org.springframework.data.mongodb.core.aggregation.ArrayOperators.Filter;\nimport org.springframework.data.mongodb.core.query.Criteria;\n</code></pre>\n<pre><code>Aggregation aggregation = Aggregation.newAggregation(\n                Aggregation.match(new Criteria(&quot;organizationId&quot;).is(orgId)),\n                Aggregation.project(&quot;domains&quot;)\n                        .and(Filter.filter(&quot;domains&quot;).as(&quot;domains&quot;).by(valueOf(&quot;domains.activeInd&quot;).equalToValue(true)))\n                        .as(&quot;domains&quot;)\n        );\n\nAggregationResults&lt;outputclass&gt; resultObject = mongoTemplate.aggregate(aggregation, &quot;collection_name&quot;,\n                outputclass.class);\nList&lt;outputclass&gt; resultList=resultObject.getMappedResults();\n</code></pre>\n<p>This works only with mongoTemplate.\nand if you don't know how to configure mongo template then here it is</p>\n<pre><code>MongoTemplate mongoTemplate= new MongoTemplate(mongoClientObject, dbName);\n</code></pre>\n"}],"owner":{"account_id":10371181,"reputation":19,"user_id":7648831,"display_name":"Azim Uddin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2715,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70744025,"answer_count":1,"score":0,"last_activity_date":1642434450,"creation_date":1642260516,"question_id":70722816,"body_markdown":"I have a Mongo query that should be converted to Java Spring-boot code,\r\n\r\nQuery\r\n```\r\ndb.orgConfigData.aggregate([\r\n    {&quot;$match&quot; : { &quot;organizationId&quot;: 339975}},\r\n    {$project: {\r\n        \r\ndomains:{\r\n$filter: {\r\ninput: &quot;$domains&quot;,\r\nas : &quot;domains&quot;,\r\ncond: {$eq: [&quot;$$domains.activeInd&quot;, true]}\r\n}\r\n}}\r\n}])\r\n\r\n```\r\nI have tried using the below code for the beginning  but got stuck on how to add a filter in the projection in java spring \r\n\r\n```\r\nMatchOperation matchStage = Aggregation.match(new Criteria(&quot;organizationId&quot;).is(orgId));\r\nProjectionOperation projectStage = Aggregation.project(?);\r\n```\r\n\r\ncan someone help me with the code for the above query?\r\nThanks in advance.\r\n","title":"Java Spring-boot code for aggregate operation with projection and filter in MongoDB","body":"<p>I have a Mongo query that should be converted to Java Spring-boot code,</p>\n<p>Query</p>\n<pre><code>db.orgConfigData.aggregate([\n    {&quot;$match&quot; : { &quot;organizationId&quot;: 339975}},\n    {$project: {\n        \ndomains:{\n$filter: {\ninput: &quot;$domains&quot;,\nas : &quot;domains&quot;,\ncond: {$eq: [&quot;$$domains.activeInd&quot;, true]}\n}\n}}\n}])\n\n</code></pre>\n<p>I have tried using the below code for the beginning  but got stuck on how to add a filter in the projection in java spring</p>\n<pre><code>MatchOperation matchStage = Aggregation.match(new Criteria(&quot;organizationId&quot;).is(orgId));\nProjectionOperation projectStage = Aggregation.project(?);\n</code></pre>\n<p>can someone help me with the code for the above query?\nThanks in advance.</p>\n"},{"tags":["java","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1642430893,"post_id":70742867,"comment_id":125062462,"body_markdown":"if still stuck follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"if still stuck follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"},{"owner":{"account_id":16464176,"reputation":173,"user_id":11894598,"display_name":"abdul khan"},"score":0,"creation_date":1642434258,"post_id":70742867,"comment_id":125063889,"body_markdown":"Hi @PeterThomas : Really sorry the solution that suggested did not worked in my case as I want to set the environment variables at runtime which I am setting in karate-config.js and use it java custom java code.","body":"Hi @PeterThomas : Really sorry the solution that suggested did not worked in my case as I want to set the environment variables at runtime which I am setting in karate-config.js and use it java custom java code."},{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1642434611,"post_id":70742867,"comment_id":125064032,"body_markdown":"I have only one extra comment. the system property name is `karate.env`. if that doesn&#39;t work, try passing parameters to java code from karate, there are plenty of examples if you search and read the docs","body":"I have only one extra comment. the system property name is <code>karate.env</code>. if that doesn&#39;t work, try passing parameters to java code from karate, there are plenty of examples if you search and read the docs"}],"owner":{"account_id":16464176,"reputation":173,"user_id":11894598,"display_name":"abdul khan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1642430879,"answer_count":0,"score":1,"last_activity_date":1642434418,"creation_date":1642429326,"question_id":70742867,"body_markdown":"I am setting the environment variable using karate-config.js if its null: \r\n\r\n \r\n\r\n     if (!env) {\r\n        env = &#39;sit&#39;;\r\n      }\r\n\r\nI am able to fetch env value in karate feature file, however my test case requirement is to pick the excel data based on environment\r\n\r\nWhen I am using the below code to read the file name based on env, I am getting null as env\r\n\r\n  \r\n\r\n    file= file.replace(&quot;RequestData.xlsx&quot;,&quot;RequestData-&quot;+System.getProperty(&quot;env&quot;)+&quot;.xlsx&quot;);\r\n\r\n","title":"How to set System Environment Variables from karate-config.js and read in java class","body":"<p>I am setting the environment variable using karate-config.js if its null:</p>\n<pre><code> if (!env) {\n    env = 'sit';\n  }\n</code></pre>\n<p>I am able to fetch env value in karate feature file, however my test case requirement is to pick the excel data based on environment</p>\n<p>When I am using the below code to read the file name based on env, I am getting null as env</p>\n<pre><code>file= file.replace(&quot;RequestData.xlsx&quot;,&quot;RequestData-&quot;+System.getProperty(&quot;env&quot;)+&quot;.xlsx&quot;);\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1642421133,"post_id":70739507,"comment_id":125058303,"body_markdown":"[mcve] please - demonstrating what _exactly_ you want to achieve and how it doesn&#39;t work.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please - demonstrating what <i>exactly</i> you want to achieve and how it doesn&#39;t work."},{"owner":{"account_id":1831939,"reputation":903,"user_id":1663157,"accept_rate":72,"display_name":"Nomistake"},"score":0,"creation_date":1642592352,"post_id":70739507,"comment_id":125110136,"body_markdown":"James_D anwsered it correctly, thus my question was clear enough.","body":"James_D anwsered it correctly, thus my question was clear enough."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1642434198,"creation_date":1642429914,"answer_id":70743009,"question_id":70739507,"body_markdown":"The scene and the canvas it contains *are* positioned immediately below the title bar. The problem is the way you have positioned the text in the canvas.\r\n\r\nThe text is positioned in the canvas according to the coordinates provided and the current values of the `GraphicsContext`&#39;s `textAlign` property (which determines how the `x` coordinate is used) and `textBaseline` property (which determines how the `y` coordinate is used). See the &quot;Text Attributes&quot; section of the attributes table in the [documentation](https://openjfx.io/javadoc/16/javafx.graphics/javafx/scene/canvas/GraphicsContext.html).\r\n\r\nThe default `textBaseline` property is `VPos.BASELINE`, which means the *baseline* of the text will be positioned with the provided y-coordinate, which is `0` in your case. Thus the text baseline will be at `0` (the top of the canvas), and most of the text (everything except any descenders) will be above the top of the canvas and not be visible.\r\n\r\nTo position the *top* of the text at the y-coordinate `0`, set the `textBaseline` to `TOP`:\r\n\r\n    gc.setTextBaseline(VPos.TOP);\r\n    gc.strokeText(String.format(&quot;%d&quot;,test), 0, 0);\r\n\r\n","title":"Positioning Canvas in relation to the title bar of the window","body":"<p>The scene and the canvas it contains <em>are</em> positioned immediately below the title bar. The problem is the way you have positioned the text in the canvas.</p>\n<p>The text is positioned in the canvas according to the coordinates provided and the current values of the <code>GraphicsContext</code>'s <code>textAlign</code> property (which determines how the <code>x</code> coordinate is used) and <code>textBaseline</code> property (which determines how the <code>y</code> coordinate is used). See the &quot;Text Attributes&quot; section of the attributes table in the <a href=\"https://openjfx.io/javadoc/16/javafx.graphics/javafx/scene/canvas/GraphicsContext.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>The default <code>textBaseline</code> property is <code>VPos.BASELINE</code>, which means the <em>baseline</em> of the text will be positioned with the provided y-coordinate, which is <code>0</code> in your case. Thus the text baseline will be at <code>0</code> (the top of the canvas), and most of the text (everything except any descenders) will be above the top of the canvas and not be visible.</p>\n<p>To position the <em>top</em> of the text at the y-coordinate <code>0</code>, set the <code>textBaseline</code> to <code>TOP</code>:</p>\n<pre><code>gc.setTextBaseline(VPos.TOP);\ngc.strokeText(String.format(&quot;%d&quot;,test), 0, 0);\n</code></pre>\n"}],"owner":{"account_id":1831939,"reputation":903,"user_id":1663157,"accept_rate":72,"display_name":"Nomistake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1642493406,"accepted_answer_id":70743009,"answer_count":1,"score":-1,"last_activity_date":1642434198,"creation_date":1642413673,"question_id":70739507,"body_markdown":"I have a graphic context:\r\n\r\n    gc.strokeText(String.format(&quot;%d&quot;,test), 0, 0);\r\n\r\nI add this to the stage like this:\r\n\r\n    p.getChildren().addAll(canvas);\r\n\r\nI get this result:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhat can i do, or is there a way to prevent the canvas to start behind title bar?\r\n(I can do this by setting the start position x,y, but that seems a oncomfortabel solution)\r\n\r\nIs there a way to set the canvas just below the title bar, no matter how high this title bar is.\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P1Ip8.png","title":"Positioning Canvas in relation to the title bar of the window","body":"<p>I have a graphic context:</p>\n<pre><code>gc.strokeText(String.format(&quot;%d&quot;,test), 0, 0);\n</code></pre>\n<p>I add this to the stage like this:</p>\n<pre><code>p.getChildren().addAll(canvas);\n</code></pre>\n<p>I get this result:</p>\n<p><a href=\"https://i.stack.imgur.com/P1Ip8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P1Ip8.png\" alt=\"enter image description here\" /></a></p>\n<p>What can i do, or is there a way to prevent the canvas to start behind title bar?\n(I can do this by setting the start position x,y, but that seems a oncomfortabel solution)</p>\n<p>Is there a way to set the canvas just below the title bar, no matter how high this title bar is.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1642433466,"post_id":70743680,"comment_id":125063570,"body_markdown":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data) and indicate the exact data you want to get.","body":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a> and indicate the exact data you want to get."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1642434288,"post_id":70743680,"comment_id":125063902,"body_markdown":"In addition to what Alex asked, please: 1) Edit your question to include the output of the `Log` statements in your code. 2) Implement `onCancelled` as you&#39;re ignoring potential errors. At its minimum it should be: `public void onCancelled(@NonNull DatabaseError databaseError) { throw databaseError.toException(); }`.","body":"In addition to what Alex asked, please: 1) Edit your question to include the output of the <code>Log</code> statements in your code. 2) Implement <code>onCancelled</code> as you&#39;re ignoring potential errors. At its minimum it should be: <code>public void onCancelled(@NonNull DatabaseError databaseError) { throw databaseError.toException(); }</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1643211361,"post_id":70743680,"comment_id":125279949,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":21105999,"reputation":1,"user_id":15514979,"display_name":"Abdullah Khan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642434179,"creation_date":1642432807,"question_id":70743680,"body_markdown":"Just trying to get url the url that I have stored in that node. It is a audio file url that I have stored in the storage.\r\n \r\n```\r\nValueEventListener changeListener = new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(DataSnapshot snapshot) {\r\n        String change = snapshot.getValue(String.class);\r\n        if(snapshot.hasChildren()){\r\n            if(snapshot.hasChild(&quot;song&quot;)){\r\n                String song_url = (String) snapshot.child(&quot;song&quot;).getValue();\r\n               \r\n                Log.d(&quot;tansen&quot;,&quot;[SUCCESS] url: &quot;+song_url);\r\n            }\r\n            else{\r\n                Log.d(&quot;tansen&quot;,&quot;[FAILURE] snapshot.hasChild()&quot;);\r\n            }\r\n        }\r\n        else{\r\n            Log.d(&quot;tansen&quot;,&quot;[FAILURE] snapshot.hasChildren()&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(DatabaseError error) {\r\n\r\n    }\r\n};\r\nFirebaseDatabase database = FirebaseDatabase.getInstance();\r\nDatabaseReference dbRef = database.getReference(&quot;/tansen-37eb3-default-rtdb/song&quot;);\r\ndbRef.addValueEventListener(changeListener);\r\n```\r\n","title":"Unable to read data from Firebase Realtime database","body":"<p>Just trying to get url the url that I have stored in that node. It is a audio file url that I have stored in the storage.</p>\n<pre><code>ValueEventListener changeListener = new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot snapshot) {\n        String change = snapshot.getValue(String.class);\n        if(snapshot.hasChildren()){\n            if(snapshot.hasChild(&quot;song&quot;)){\n                String song_url = (String) snapshot.child(&quot;song&quot;).getValue();\n               \n                Log.d(&quot;tansen&quot;,&quot;[SUCCESS] url: &quot;+song_url);\n            }\n            else{\n                Log.d(&quot;tansen&quot;,&quot;[FAILURE] snapshot.hasChild()&quot;);\n            }\n        }\n        else{\n            Log.d(&quot;tansen&quot;,&quot;[FAILURE] snapshot.hasChildren()&quot;);\n        }\n    }\n\n    @Override\n    public void onCancelled(DatabaseError error) {\n\n    }\n};\nFirebaseDatabase database = FirebaseDatabase.getInstance();\nDatabaseReference dbRef = database.getReference(&quot;/tansen-37eb3-default-rtdb/song&quot;);\ndbRef.addValueEventListener(changeListener);\n</code></pre>\n"},{"tags":["java","apache-camel","activemq"],"comments":[{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":2,"creation_date":1600412619,"post_id":63950509,"comment_id":113085255,"body_markdown":"Did you disable caching and reduce the pre-fetch, as shown in the documentation you linked? Respecting message priorities with slow consumers is often a challenge, because the priority selection and caching mechanisms are somewhat in conflict with one another.","body":"Did you disable caching and reduce the pre-fetch, as shown in the documentation you linked? Respecting message priorities with slow consumers is often a challenge, because the priority selection and caching mechanisms are somewhat in conflict with one another."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1600413379,"post_id":63950509,"comment_id":113085545,"body_markdown":"Yes I set :\nprioritizedMessages=&quot;true&quot; useCache=&quot;false&quot; queuePrefetch=&quot;1&quot;\nI also noticed this old parameter that I kept expireMessagesPeriod=&quot;0&quot;","body":"Yes I set : prioritizedMessages=&quot;true&quot; useCache=&quot;false&quot; queuePrefetch=&quot;1&quot; I also noticed this old parameter that I kept expireMessagesPeriod=&quot;0&quot;"},{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":1,"creation_date":1600415215,"post_id":63950509,"comment_id":113086307,"body_markdown":"With the documented settings, I find I can produce a thousand messages with priority 4, then one with priority 9, no consumers running. Then I connect a consumer, and I get the priority-9 message first. Do you see a different sequence of events with this test? Does the problem depend on some particular pattern of production and consumption in your system? The priority mechanism does seem to be basically working for me.","body":"With the documented settings, I find I can produce a thousand messages with priority 4, then one with priority 9, no consumers running. Then I connect a consumer, and I get the priority-9 message first. Do you see a different sequence of events with this test? Does the problem depend on some particular pattern of production and consumption in your system? The priority mechanism does seem to be basically working for me."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1600422498,"post_id":63950509,"comment_id":113089875,"body_markdown":"I did your test. publish low prio message, publish high prio message. Start consumers.\nIn this case indeed it worked well.\nI let the system run to consume all high prio messages. After that  the queue still contained thousands of low prio messages. I added then few high prio messages. It worked but only after a while. I had to wait about 30 minutes. I have to see if it can be related to some kahadb timings / checkpoints or something else. Thanks for you help in any case","body":"I did your test. publish low prio message, publish high prio message. Start consumers. In this case indeed it worked well. I let the system run to consume all high prio messages. After that  the queue still contained thousands of low prio messages. I added then few high prio messages. It worked but only after a while. I had to wait about 30 minutes. I have to see if it can be related to some kahadb timings / checkpoints or something else. Thanks for you help in any case"},{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":1,"creation_date":1600423358,"post_id":63950509,"comment_id":113090268,"body_markdown":"I suspect it&#39;s just the result of paging behaviour. You might need set `maxPageSize` for the queue to a much lower of much higher value. Depending on the circumstances, either might help, for different reasons. Or just use different queues for different priorities ;)","body":"I suspect it&#39;s just the result of paging behaviour. You might need set <code>maxPageSize</code> for the queue to a much lower of much higher value. Depending on the circumstances, either might help, for different reasons. Or just use different queues for different priorities ;)"},{"owner":{"account_id":2672970,"reputation":331,"user_id":2309920,"display_name":"Viral Lalakia"},"score":0,"creation_date":1600513152,"post_id":63950509,"comment_id":113115552,"body_markdown":"@greg, you have reduced `queuePrefetch` as per KevinBoone&#39;s suggestion and you are using `queuePrefetch=1`. I would suggest to use `queuePrefetch=0`. I have had similar issue in the past where I was using `queuePrefetch=1` which was the reason behind each consumer working on a task and having one more message lined up for that particular consumer only. This pre-fetched message will be the next message for that consumer regardless new high priority message in the queue. So if you have 1000 consumers, each will have one message pre-fetched and new high priority message won&#39;t be picked up ASAP.","body":"@greg, you have reduced <code>queuePrefetch</code> as per KevinBoone&#39;s suggestion and you are using <code>queuePrefetch=1</code>. I would suggest to use <code>queuePrefetch=0</code>. I have had similar issue in the past where I was using <code>queuePrefetch=1</code> which was the reason behind each consumer working on a task and having one more message lined up for that particular consumer only. This pre-fetched message will be the next message for that consumer regardless new high priority message in the queue. So if you have 1000 consumers, each will have one message pre-fetched and new high priority message won&#39;t be picked up ASAP."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1601637590,"post_id":63950509,"comment_id":113474843,"body_markdown":"Thanks I will try with 0 !!","body":"Thanks I will try with 0 !!"}],"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642434157,"creation_date":1600411173,"question_id":63950509,"body_markdown":"I push the messages in a  queue with different priorities. I can see that the JMSpriority header is correctly set using the ActiveMQ web interface. \r\n\r\nHere is my test. I first push big amount of messages with low priority in the queue. We have a slow consumer &quot;pattern&quot; so all messages starts to accumulates and are properly enqueued. KahaDB is used for storage.\r\nThen I push high priority messages.\r\n\r\nThe issue is that as long as I don&#39;t click on the queue to display the messages in the activeMQ web interface the messages are not sorted, and high priority messages are not dispatched to the consumers. As soon as I click on the queue, I immediately see a page refresh that results in the proper sorting, seeing high priority message on the top. This messages will be then dispatched asap and &quot;disappear&quot; from the enqueued message list, as expected.\r\n\r\nSo obviously there is something wrong somewhere since prioritisation involve this manual step. I I used the configuration as described here https://activemq.apache.org/how-can-i-support-priority-queues.\r\n\r\nI already think about a workaround using JMX to force a queue sort, but really I&#39;d like to avoid this !\r\n\r\nI&#39;am using AMQ version 5.15, spring and camel.","title":"ActiveMQ prioritisation strange behaviour","body":"<p>I push the messages in a  queue with different priorities. I can see that the JMSpriority header is correctly set using the ActiveMQ web interface.</p>\n<p>Here is my test. I first push big amount of messages with low priority in the queue. We have a slow consumer &quot;pattern&quot; so all messages starts to accumulates and are properly enqueued. KahaDB is used for storage.\nThen I push high priority messages.</p>\n<p>The issue is that as long as I don't click on the queue to display the messages in the activeMQ web interface the messages are not sorted, and high priority messages are not dispatched to the consumers. As soon as I click on the queue, I immediately see a page refresh that results in the proper sorting, seeing high priority message on the top. This messages will be then dispatched asap and &quot;disappear&quot; from the enqueued message list, as expected.</p>\n<p>So obviously there is something wrong somewhere since prioritisation involve this manual step. I I used the configuration as described here <a href=\"https://activemq.apache.org/how-can-i-support-priority-queues\" rel=\"nofollow noreferrer\">https://activemq.apache.org/how-can-i-support-priority-queues</a>.</p>\n<p>I already think about a workaround using JMX to force a queue sort, but really I'd like to avoid this !</p>\n<p>I'am using AMQ version 5.15, spring and camel.</p>\n"},{"tags":["java","jaxb"],"answers":[{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1503432508,"creation_date":1377546996,"answer_id":18452018,"question_id":18451870,"body_markdown":"When marshalling to an `OutputStream` using a combination of the following produces the expected output.\r\n\r\n        marshaller.setProperty(&quot;com.sun.xml.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&quot;);\r\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n\r\nThe problem you are seeing occurs when you marshal to a `Writer`, which appears to be a bug in the JAXB reference implementation.  You can raise an issue at the link below:\r\n\r\n  - https://java.net/jira/browse/JAXB/\r\n\r\n---\r\n\r\nYou could always do:\r\n\r\n    JAXBContext context;\r\n\r\n    try {\r\n        context = JAXBContext.newInstance(heartbeat.getClass());\r\n        StringWriter writer = new StringWriter();\r\n        writer.append(&quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&quot;);\r\n        Marshaller marshaller = context.createMarshaller();\r\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n\r\n        heartbeat.setHeader(header);\r\n        heartbeat.setHeartbeatEvent(event);\r\n\r\n        marshaller.marshal(heartbeat, writer);\r\n        String stringXML = writer.toString();\r\n        return stringXML;\r\n\r\n    } catch (JAXBException e) {\r\n        throw new RuntimeException(&quot;Problems generating XML in specified &quot;\r\n                + &quot;encoding, underlying problem is &quot; + e.getMessage(),\r\n                e);\r\n    }\r\n\r\n\r\n---\r\n\r\n[**EclipseLink JAXB (MOXy)**][1] also supports the `com.sun.xml.bind.xmlHeaders` and it works correctly when marshalling to a `Writer` (I&#39;m the MOXy lead)\r\n\r\n  - http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html\r\n\r\n\r\n  [1]: http://www.eclipse.org/eclipselink/#moxy","title":"Altering the XML header produced by the JAXB marshaller","body":"<p>When marshalling to an <code>OutputStream</code> using a combination of the following produces the expected output.</p>\n\n<pre><code>    marshaller.setProperty(\"com.sun.xml.bind.xmlHeaders\", \"&lt;?xml version=\\\"1.0\\\"?&gt;\");\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n</code></pre>\n\n<p>The problem you are seeing occurs when you marshal to a <code>Writer</code>, which appears to be a bug in the JAXB reference implementation.  You can raise an issue at the link below:</p>\n\n<ul>\n<li><a href=\"https://java.net/jira/browse/JAXB/\" rel=\"noreferrer\">https://java.net/jira/browse/JAXB/</a></li>\n</ul>\n\n<hr>\n\n<p>You could always do:</p>\n\n<pre><code>JAXBContext context;\n\ntry {\n    context = JAXBContext.newInstance(heartbeat.getClass());\n    StringWriter writer = new StringWriter();\n    writer.append(\"&lt;?xml version=\\\"1.0\\\"?&gt;\");\n    Marshaller marshaller = context.createMarshaller();\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n\n    heartbeat.setHeader(header);\n    heartbeat.setHeartbeatEvent(event);\n\n    marshaller.marshal(heartbeat, writer);\n    String stringXML = writer.toString();\n    return stringXML;\n\n} catch (JAXBException e) {\n    throw new RuntimeException(\"Problems generating XML in specified \"\n            + \"encoding, underlying problem is \" + e.getMessage(),\n            e);\n}\n</code></pre>\n\n<hr>\n\n<p><a href=\"http://www.eclipse.org/eclipselink/#moxy\" rel=\"noreferrer\"><strong>EclipseLink JAXB (MOXy)</strong></a> also supports the <code>com.sun.xml.bind.xmlHeaders</code> and it works correctly when marshalling to a <code>Writer</code> (I'm the MOXy lead)</p>\n\n<ul>\n<li><a href=\"http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6480648,"reputation":119,"user_id":5017767,"display_name":"Gopi Krishna"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443717653,"creation_date":1443717168,"answer_id":32892565,"question_id":18451870,"body_markdown":"This worked for me\r\n&gt; `marshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, \r\n&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;);`","title":"Altering the XML header produced by the JAXB marshaller","body":"<p>This worked for me</p>\n\n<blockquote>\n  <p><code>marshaller.setProperty(\"com.sun.xml.internal.bind.xmlHeaders\", \n  \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\");</code></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1826042,"reputation":31,"user_id":3256398,"display_name":"plejaden"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642434080,"creation_date":1642432759,"answer_id":70743671,"question_id":18451870,"body_markdown":"In JAXB 3.0.1 the above mentioned constants cause a PropertyException:\r\n\r\n     jakarta.xml.bind.PropertyException: name: com.sun.xml.bind.xmlDeclaration value: false\r\n\r\nIn this case, the XML preamble can be configured with these marshaller constants:\r\n\r\n    marshaller.setProperty(&quot;org.glassfish.jaxb.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot; ?&gt;&quot;);\r\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n\r\n - https://eclipse-ee4j.github.io/jaxb-ri/3.0.0/docs/ch05.html","title":"Altering the XML header produced by the JAXB marshaller","body":"<p>In JAXB 3.0.1 the above mentioned constants cause a PropertyException:</p>\n<pre><code> jakarta.xml.bind.PropertyException: name: com.sun.xml.bind.xmlDeclaration value: false\n</code></pre>\n<p>In this case, the XML preamble can be configured with these marshaller constants:</p>\n<pre><code>marshaller.setProperty(&quot;org.glassfish.jaxb.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot; ?&gt;&quot;);\nmarshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n</code></pre>\n<ul>\n<li><a href=\"https://eclipse-ee4j.github.io/jaxb-ri/3.0.0/docs/ch05.html\" rel=\"nofollow noreferrer\">https://eclipse-ee4j.github.io/jaxb-ri/3.0.0/docs/ch05.html</a></li>\n</ul>\n"}],"owner":{"account_id":1944634,"reputation":2303,"user_id":1750067,"accept_rate":69,"display_name":"JME"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38660,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":18452018,"answer_count":3,"score":11,"last_activity_date":1642434080,"creation_date":1377546447,"question_id":18451870,"body_markdown":"I am currently using the following code to marshal an object into an xml string\r\n\r\n        JAXBContext context;\r\n        \r\n        try {\r\n            context = JAXBContext.newInstance(heartbeat.getClass());\r\n            StringWriter writer = new StringWriter();\r\n            Marshaller marshaller = context.createMarshaller();\r\n            \r\n            heartbeat.setHeader(header);\r\n            heartbeat.setHeartbeatEvent(event);\r\n            \r\n            marshaller.marshal(heartbeat, writer);\r\n            String stringXML = writer.toString();\r\n            return stringXML;\r\n    \r\n        } catch (JAXBException e) {\r\n\t\t\tthrow new RuntimeException(&quot;Problems generating XML in specified &quot;\r\n\t\t\t\t\t+ &quot;encoding, underlying problem is &quot; + e.getMessage(),\r\n\t\t\t\t\te);\r\n        }\r\n\r\nWhich produces the following header\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n\r\nMy desired output is the following\r\n\r\n    &lt;?xml version=\\&quot;1.0\\&quot;?&gt;\r\n\r\nBy adding this to the marshaller\r\n\r\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);\r\n    marshaller.setProperty(&quot;com.sun.xml.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&quot;);\r\n \r\nI receive\r\n \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;?xml version=&quot;1.0&quot;?&gt;\r\n\r\nand changing the JAXB_FRAGMENT property to TRUE removes the header entirely. I have been following the https://stackoverflow.com/questions/277996/jaxb-remove-standalone-yes-from-generated-xml thread attempting to solve the problem but I have had no luck so far. Can someone please give me some insight on how to get my desired header from the JAXB marshaller?\r\n","title":"Altering the XML header produced by the JAXB marshaller","body":"<p>I am currently using the following code to marshal an object into an xml string</p>\n\n<pre><code>    JAXBContext context;\n\n    try {\n        context = JAXBContext.newInstance(heartbeat.getClass());\n        StringWriter writer = new StringWriter();\n        Marshaller marshaller = context.createMarshaller();\n\n        heartbeat.setHeader(header);\n        heartbeat.setHeartbeatEvent(event);\n\n        marshaller.marshal(heartbeat, writer);\n        String stringXML = writer.toString();\n        return stringXML;\n\n    } catch (JAXBException e) {\n        throw new RuntimeException(\"Problems generating XML in specified \"\n                + \"encoding, underlying problem is \" + e.getMessage(),\n                e);\n    }\n</code></pre>\n\n<p>Which produces the following header</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n</code></pre>\n\n<p>My desired output is the following</p>\n\n<pre><code>&lt;?xml version=\\\"1.0\\\"?&gt;\n</code></pre>\n\n<p>By adding this to the marshaller</p>\n\n<pre><code>marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.FALSE);\nmarshaller.setProperty(\"com.sun.xml.bind.xmlHeaders\", \"&lt;?xml version=\\\"1.0\\\"?&gt;\");\n</code></pre>\n\n<p>I receive</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;&lt;?xml version=\"1.0\"?&gt;\n</code></pre>\n\n<p>and changing the JAXB_FRAGMENT property to TRUE removes the header entirely. I have been following the <a href=\"https://stackoverflow.com/questions/277996/jaxb-remove-standalone-yes-from-generated-xml\">JAXB - Remove &#39;standalone=&quot;yes&quot;&#39; from generated XML</a> thread attempting to solve the problem but I have had no luck so far. Can someone please give me some insight on how to get my desired header from the JAXB marshaller?</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642433671,"creation_date":1642433671,"answer_id":70743856,"question_id":70743763,"body_markdown":"There are several ways of solving this, popular options are:\r\n\r\n1. Don&#39;t do a separate SELECT, just issue a DELETE. And if you get OptimisticLockException from Hibernate, then you know for sure the record didn&#39;t exist. It looks like you&#39;re using Spring Data, you can either create a `@Modifying` method for this or just use `repo.getOne()` instead of `repo.findXxx()`.\r\n2. Use Repeatable Read isolation level - the database should return an error if another transaction updated the record concurrently. Eg. here are [PostgreSQL docs][1] (technically in PG this is a Snapshot isolation level though).\r\n3. Use pessimistic locking with `select .. for update`, this will not allow DML operations to proceed with the row until it&#39;s unlocked (transaction is finished).\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/transaction-iso.html#XACT-REPEATABLE-READ","title":"How can I prevent Race Condition","body":"<p>There are several ways of solving this, popular options are:</p>\n<ol>\n<li>Don't do a separate SELECT, just issue a DELETE. And if you get OptimisticLockException from Hibernate, then you know for sure the record didn't exist. It looks like you're using Spring Data, you can either create a <code>@Modifying</code> method for this or just use <code>repo.getOne()</code> instead of <code>repo.findXxx()</code>.</li>\n<li>Use Repeatable Read isolation level - the database should return an error if another transaction updated the record concurrently. Eg. here are <a href=\"https://www.postgresql.org/docs/current/transaction-iso.html#XACT-REPEATABLE-READ\" rel=\"nofollow noreferrer\">PostgreSQL docs</a> (technically in PG this is a Snapshot isolation level though).</li>\n<li>Use pessimistic locking with <code>select .. for update</code>, this will not allow DML operations to proceed with the row until it's unlocked (transaction is finished).</li>\n</ol>\n"}],"owner":{"account_id":22184313,"reputation":3,"user_id":16427502,"display_name":"Mannualky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642433671,"creation_date":1642433222,"question_id":70743763,"body_markdown":"How can I prevent Race Condition in this method:\r\n\r\n    @Lock\r\n     public boolean delete(int id) {\r\n        someEntity byId = someRepository.findById(id).orElseThrow(() -&gt; new NotFoundException());\r\n        someRepository.delete(byId);\r\n        return true;\r\n    }\r\n\r\nI have done @Lock\r\n\r\n    @Aspect\r\n    @Component\r\n    @EnableAspectJAutoProxy\r\n    public class LockAspect {\r\n        private final ReentrantLock reentrantLock;\r\n\r\n    public LockAspect() {\r\n        reentrantLock = new ReentrantLock();\r\n    }\r\n\r\n    @Around(&quot;@annotation(com.example.aspect.Lock)&quot;)\r\n    public void aroundDelete(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {\r\n        reentrantLock.lock();\r\n        try {\r\n            proceedingJoinPoint.proceed();\r\n        } finally {\r\n            reentrantLock.unlock();\r\n        }\r\n    }\r\n\r\nBut this lock only blocks the app not really solves the problem the same with \r\n\r\nAlso I was thing about `@Transactional(isolation=Isolation.REPEATABLE_READ)` or `@Transactional(isolation= Isolation.SERIALIZABLE)` annotation above the `delete` method  but I&#39;m not sure if that will solve the problem. It is spring app.","title":"How can I prevent Race Condition","body":"<p>How can I prevent Race Condition in this method:</p>\n<pre><code>@Lock\n public boolean delete(int id) {\n    someEntity byId = someRepository.findById(id).orElseThrow(() -&gt; new NotFoundException());\n    someRepository.delete(byId);\n    return true;\n}\n</code></pre>\n<p>I have done @Lock</p>\n<pre><code>@Aspect\n@Component\n@EnableAspectJAutoProxy\npublic class LockAspect {\n    private final ReentrantLock reentrantLock;\n\npublic LockAspect() {\n    reentrantLock = new ReentrantLock();\n}\n\n@Around(&quot;@annotation(com.example.aspect.Lock)&quot;)\npublic void aroundDelete(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {\n    reentrantLock.lock();\n    try {\n        proceedingJoinPoint.proceed();\n    } finally {\n        reentrantLock.unlock();\n    }\n}\n</code></pre>\n<p>But this lock only blocks the app not really solves the problem the same with</p>\n<p>Also I was thing about <code>@Transactional(isolation=Isolation.REPEATABLE_READ)</code> or <code>@Transactional(isolation= Isolation.SERIALIZABLE)</code> annotation above the <code>delete</code> method  but I'm not sure if that will solve the problem. It is spring app.</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":143938,"reputation":6057,"user_id":352636,"accept_rate":97,"display_name":"Stephen"},"score":2,"creation_date":1281617978,"post_id":3467860,"comment_id":3617435,"body_markdown":"Yesterday&#39;s date in what format? As a Calendar object? As a string? As a util.Date? As a sql.Date?","body":"Yesterday&#39;s date in what format? As a Calendar object? As a string? As a util.Date? As a sql.Date?"}],"answers":[{"tags":[],"owner":{"account_id":1059,"reputation":8462,"user_id":1406,"accept_rate":85,"display_name":"Thierry Roy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1281617998,"creation_date":1281617998,"answer_id":3467881,"question_id":3467860,"body_markdown":"Use [Joda-Time][1]:\r\n\r\n    new org.joda.time.DateTime().minusDays(1).toDate();\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>Use <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow noreferrer\">Joda-Time</a>:</p>\n\n<pre><code>new org.joda.time.DateTime().minusDays(1).toDate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":160547,"reputation":7975,"user_id":380691,"accept_rate":86,"display_name":"Shawn D."},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1281618378,"creation_date":1281618378,"answer_id":3467933,"question_id":3467860,"body_markdown":"Can&#39;t you do something like \r\n\r\n    new Date( new Date().getTime() - 86400000 );\r\n\r\nto get the current time, subtract the # of milliseconds in a day, and build a new date object from that?","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>Can't you do something like </p>\n\n<pre><code>new Date( new Date().getTime() - 86400000 );\n</code></pre>\n\n<p>to get the current time, subtract the # of milliseconds in a day, and build a new date object from that?</p>\n"},{"tags":[],"owner":{"account_id":143938,"reputation":6057,"user_id":352636,"accept_rate":97,"display_name":"Stephen"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1281619747,"creation_date":1281618485,"answer_id":3467949,"question_id":3467860,"body_markdown":"Assuming you want a `java.util.Date` object (since you used `getTime()` in your question and that returns a `java.util.Date`), you could do:\r\n\r\n    // Get yesterday&#39;s date. System.currentTimeMillis() returns the\r\n    // number of milliseconds between the epoch and today, and the\r\n    // 86400000 is the number of milliseconds in a day.\r\n    new Date(System.currentTimeMillis() - 86400000);\r\n\r\n\r\nOops, didn&#39;t see your first day of the month query before. I came up with the following to get that using `util.Date`, but I think this is about the time you want to switch to using `Joda` or `Calendar`... (dear SO, please don&#39;t vote me down for the horrendousness of the following...)\r\n\r\n    // This will return the day of the week as an integer, 0 to 6.\r\n    new Date(System.currentTimeMillis() - ((new Date().getDate()-1) * 86400000)).getDay();","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>Assuming you want a <code>java.util.Date</code> object (since you used <code>getTime()</code> in your question and that returns a <code>java.util.Date</code>), you could do:</p>\n\n<pre><code>// Get yesterday's date. System.currentTimeMillis() returns the\n// number of milliseconds between the epoch and today, and the\n// 86400000 is the number of milliseconds in a day.\nnew Date(System.currentTimeMillis() - 86400000);\n</code></pre>\n\n<p>Oops, didn't see your first day of the month query before. I came up with the following to get that using <code>util.Date</code>, but I think this is about the time you want to switch to using <code>Joda</code> or <code>Calendar</code>... (dear SO, please don't vote me down for the horrendousness of the following...)</p>\n\n<pre><code>// This will return the day of the week as an integer, 0 to 6.\nnew Date(System.currentTimeMillis() - ((new Date().getDate()-1) * 86400000)).getDay();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1281630520,"creation_date":1281629752,"answer_id":3469745,"question_id":3467860,"body_markdown":"If it really has to be a one-liner and it doesn&#39;t matter if the code is understandable, I think the following statement should work:\r\n\r\n    Date yesterday = new SimpleDateFormat(&quot;yyyyMMdd&quot;).parse(\r\n        &quot;&quot;+(Integer.parseInt(new SimpleDateFormat(&quot;yyyyMMdd&quot;).format(new Date()))-1));\r\n\r\nIt formats the current date as &quot;yyyyMMdd&quot;, e.g. &quot;20100812&quot; for today, parses it as an int: 20100812, subtracts one: 20100811, and then parses the date &quot;20100811&quot; using the previous format. It will also work if today is the first of a month, since the 0th of a month is parsed by a lenient DateFormat as the last day of the previous month.\r\n\r\nThe format &quot;yyyyDDD&quot; ought to work as well (D being day of year).\r\n\r\nFor the first day of the current month, you can use a similar trick:\r\n\r\n    Date firstday = new SimpleDateFormat(&quot;yyyyMMdd&quot;).parse(\r\n        new SimpleDateFormat(&quot;yyyyMM&quot;).format(new Date())+&quot;01&quot;);","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>If it really has to be a one-liner and it doesn't matter if the code is understandable, I think the following statement should work:</p>\n\n<pre><code>Date yesterday = new SimpleDateFormat(\"yyyyMMdd\").parse(\n    \"\"+(Integer.parseInt(new SimpleDateFormat(\"yyyyMMdd\").format(new Date()))-1));\n</code></pre>\n\n<p>It formats the current date as \"yyyyMMdd\", e.g. \"20100812\" for today, parses it as an int: 20100812, subtracts one: 20100811, and then parses the date \"20100811\" using the previous format. It will also work if today is the first of a month, since the 0th of a month is parsed by a lenient DateFormat as the last day of the previous month.</p>\n\n<p>The format \"yyyyDDD\" ought to work as well (D being day of year).</p>\n\n<p>For the first day of the current month, you can use a similar trick:</p>\n\n<pre><code>Date firstday = new SimpleDateFormat(\"yyyyMMdd\").parse(\n    new SimpleDateFormat(\"yyyyMM\").format(new Date())+\"01\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":706131,"reputation":9,"user_id":610260,"display_name":"Shalini Pabreja"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1326533529,"creation_date":1297277985,"answer_id":4949230,"question_id":3467860,"body_markdown":"This should be done as follows:\r\n\r\n    Calendar cal = Calendar.getInstance();\r\n    cal .add(Calendar.DAY_OF_MONTH,-1);\r\n    cal .getTime();\r\n\r\nWhen you are doing this:\r\n\r\n    Calendar.getInstance().add(Calendar.DAY_OF_MONTH,-1).getTime()\r\n\r\nYou are essentially asking a method (`add()`) that returns void to run `.getTime()`. That can&#39;t work.\r\n","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>This should be done as follows:</p>\n\n<pre><code>Calendar cal = Calendar.getInstance();\ncal .add(Calendar.DAY_OF_MONTH,-1);\ncal .getTime();\n</code></pre>\n\n<p>When you are doing this:</p>\n\n<pre><code>Calendar.getInstance().add(Calendar.DAY_OF_MONTH,-1).getTime()\n</code></pre>\n\n<p>You are essentially asking a method (<code>add()</code>) that returns void to run <code>.getTime()</code>. That can't work.</p>\n"},{"tags":[],"owner":{"account_id":5858289,"reputation":1,"user_id":4614873,"display_name":"Andres Arenas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425048271,"creation_date":1425045987,"answer_id":28766972,"question_id":3467860,"body_markdown":"This is what I use in JasperReports:\r\n\r\n    // Today\r\n    new java.util.Date().format(&#39;yyyy-MM-dd&#39;)\r\n    // Yesterday\r\n    new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()-1)\r\n\r\n    // First Day of current month\r\n    new java.util.Date().format(&#39;yyyy&#39;) + &quot;-&quot; + new java.util.Date().format(&#39;MM&#39;) + &quot;-01&quot;\r\n\r\nI prefer to use the ISO format `YYYY-MM-DD` because is recognized everywhere and avoid the regional formats confusion (`dd/mm` position on the date field).","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>This is what I use in JasperReports:</p>\n\n<pre><code>// Today\nnew java.util.Date().format('yyyy-MM-dd')\n// Yesterday\nnew SimpleDateFormat(\"yyyy-MM-dd\").format(new Date()-1)\n\n// First Day of current month\nnew java.util.Date().format('yyyy') + \"-\" + new java.util.Date().format('MM') + \"-01\"\n</code></pre>\n\n<p>I prefer to use the ISO format <code>YYYY-MM-DD</code> because is recognized everywhere and avoid the regional formats confusion (<code>dd/mm</code> position on the date field).</p>\n"},{"tags":[],"owner":{"account_id":8886975,"reputation":21,"user_id":6634937,"display_name":"Darko Margetic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642433614,"creation_date":1642432717,"answer_id":70743657,"question_id":3467860,"body_markdown":"    //Yesterday\t(LocalDate)\r\n    java.time.LocalDate.now().minusDays(1)\r\n    \r\n    //Yesterday\t(java.sql.Date)\r\n    java.sql.Date.valueOf( java.time.LocalDate.now().minusDays(1) )\r\n    \r\n    //Yesterday\t(java.util.Date)\r\n    java.util.Date.from( java.time.LocalDate.now().minusDays(1).atStartOfDay(java.time.ZoneId.systemDefault()).toInstant() )\r\n    \r\n    \r\n    //First day of current month (LocalDate)\r\n    java.time.LocalDate.now().withDayOfMonth(1)\r\n    \r\n    //First day of current month (java.sql.Date)\r\n    java.sql.Date.valueOf( java.time.LocalDate.now().withDayOfMonth(1) )\r\n    \r\n    //First day of current month (java.util.Date)\r\n    java.util.Date.from( java.time.LocalDate.now().withDayOfMonth(1).atStartOfDay(java.time.ZoneId.systemDefault()).toInstant() )\r\n\r\n","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<pre><code>//Yesterday (LocalDate)\njava.time.LocalDate.now().minusDays(1)\n\n//Yesterday (java.sql.Date)\njava.sql.Date.valueOf( java.time.LocalDate.now().minusDays(1) )\n\n//Yesterday (java.util.Date)\njava.util.Date.from( java.time.LocalDate.now().minusDays(1).atStartOfDay(java.time.ZoneId.systemDefault()).toInstant() )\n\n\n//First day of current month (LocalDate)\njava.time.LocalDate.now().withDayOfMonth(1)\n\n//First day of current month (java.sql.Date)\njava.sql.Date.valueOf( java.time.LocalDate.now().withDayOfMonth(1) )\n\n//First day of current month (java.util.Date)\njava.util.Date.from( java.time.LocalDate.now().withDayOfMonth(1).atStartOfDay(java.time.ZoneId.systemDefault()).toInstant() )\n</code></pre>\n"}],"owner":{"account_id":116255,"reputation":847,"user_id":304910,"accept_rate":67,"display_name":"chun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9121,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":3469745,"answer_count":7,"score":5,"last_activity_date":1642433614,"creation_date":1281617864,"question_id":3467860,"body_markdown":"i am using a reporting tools which only support one line expression\r\n\r\nBy example I want to get the Date of yesterday \r\n\r\nthe class Calendar has a add method, but it returns void so\r\n\r\n    Calendar.getInstance().add(Calendar.DAY_OF_MONTH,-1).getTime()\r\n\r\ndidn&#39;t work\r\n\r\ndon&#39;t know how to get this done\r\n\r\nThanks","title":"Only one expression to get the Date of yesterday and the first day of month","body":"<p>i am using a reporting tools which only support one line expression</p>\n\n<p>By example I want to get the Date of yesterday </p>\n\n<p>the class Calendar has a add method, but it returns void so</p>\n\n<pre><code>Calendar.getInstance().add(Calendar.DAY_OF_MONTH,-1).getTime()\n</code></pre>\n\n<p>didn't work</p>\n\n<p>don't know how to get this done</p>\n\n<p>Thanks</p>\n"},{"tags":["java","swing","netbeans"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1642257949,"post_id":70722096,"comment_id":125025313,"body_markdown":"If I have to guess, it would be an encoding issue in the operating system.   Netbeans is probably using the proper encoding (For example UTF_16) in its settings","body":"If I have to guess, it would be an encoding issue in the operating system.   Netbeans is probably using the proper encoding (For example UTF_16) in its settings"},{"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"score":0,"creation_date":1642258186,"post_id":70722096,"comment_id":125025372,"body_markdown":"How do I change the encoding in NetBeans","body":"How do I change the encoding in NetBeans"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1642258317,"post_id":70722096,"comment_id":125025412,"body_markdown":"Why do you want to change NetBeans..it is working properly there..  You need to see how you are working with Strings in your java code (Used for translations), are you doing any encoding specifically, for example new String (..., UTF-16), or are you depending on the OS encoding?\n\nPlease see https://stackoverflow.com/questions/4133195/how-to-change-file-encoding-in-netbeans for netbeans..  Also if you are using Maven, or Gradle, then you can set resource encoding there as well","body":"Why do you want to change NetBeans..it is working properly there..  You need to see how you are working with Strings in your java code (Used for translations), are you doing any encoding specifically, for example new String (..., UTF-16), or are you depending on the OS encoding?  Please see <a href=\"https://stackoverflow.com/questions/4133195/how-to-change-file-encoding-in-netbeans\" title=\"how to change file encoding in netbeans\">stackoverflow.com/questions/4133195/&hellip;</a> for netbeans..  Also if you are using Maven, or Gradle, then you can set resource encoding there as well"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1642258685,"post_id":70722096,"comment_id":125025507,"body_markdown":"@SMA If it’s the same characters appearing in reverse order, it has nothing to do with UTF-16 or any other charset.  It’s more likely the [ComponentOrientation](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Container.html#applyComponentOrientation(java.awt.ComponentOrientation)).","body":"@SMA If it’s the same characters appearing in reverse order, it has nothing to do with UTF-16 or any other charset.  It’s more likely the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Container.html#applyComponentOrientation(java.awt.ComponentOrientation)\" rel=\"nofollow noreferrer\">ComponentOrientation</a>."},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1642259067,"post_id":70722096,"comment_id":125025592,"body_markdown":"@VGR You might be correct, however that would be strange if the ComponentOrientation acts different in Netbeans vs OS...it would be interesting to find out, but you make a valid point","body":"@VGR You might be correct, however that would be strange if the ComponentOrientation acts different in Netbeans vs OS...it would be interesting to find out, but you make a valid point"},{"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"score":0,"creation_date":1642259452,"post_id":70722096,"comment_id":125025679,"body_markdown":"@VGR You are right, but what is the solution?","body":"@VGR You are right, but what is the solution?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1642259713,"post_id":70722096,"comment_id":125025749,"body_markdown":"Try adding this right before you call `pack()` on your Frame:  `frame.applyComponentOrientation(ComponentOrientation.getOrientation(Locale.getDefault()));`  (I assume the default locale of everyone running an Arabic application will be a right-to-left locale.)","body":"Try adding this right before you call <code>pack()</code> on your Frame:  <code>frame.applyComponentOrientation(ComponentOrientation.getOrie&zwnj;&#8203;ntation(Locale.getDe&zwnj;&#8203;fault()));</code>  (I assume the default locale of everyone running an Arabic application will be a right-to-left locale.)"},{"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"score":0,"creation_date":1642259824,"post_id":70722096,"comment_id":125025771,"body_markdown":"But guys, have you noticed that some of the JLabel are reversed and some are not, and this is strange and confusing in the matter","body":"But guys, have you noticed that some of the JLabel are reversed and some are not, and this is strange and confusing in the matter"},{"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"score":0,"creation_date":1642260162,"post_id":70722096,"comment_id":125025844,"body_markdown":"@VGR I put the code in formWindowOpened it shows me an error in the word frame which is at the beginning","body":"@VGR I put the code in formWindowOpened it shows me an error in the word frame which is at the beginning"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1642261004,"post_id":70722096,"comment_id":125026043,"body_markdown":"Replace `frame` with the variable which contains your Frame or JFrame.  If you are extending Frame or JFrame directly, use `this`.","body":"Replace <code>frame</code> with the variable which contains your Frame or JFrame.  If you are extending Frame or JFrame directly, use <code>this</code>."},{"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"score":0,"creation_date":1642261402,"post_id":70722096,"comment_id":125026168,"body_markdown":"JFrame.applyComponentOrientation(ComponentOrientation.getOrientation(Locale.getDefault()));\n        // Frame name is orders\n        orders.applyComponentOrientation(ComponentOrientation.getOrientation(Locale.getDefault()));\n\n\nWrite it in the first way, or the second way, or the other way, because the two give me an error, knowing that the name of the frame is orders","body":"JFrame.applyComponentOrientation(ComponentOrientation.getOri&zwnj;&#8203;entation(Locale.getD&zwnj;&#8203;efault()));         // Frame name is orders         orders.applyComponentOrientation(ComponentOrientation.getOri&zwnj;&#8203;entation(Locale.getD&zwnj;&#8203;efault()));   Write it in the first way, or the second way, or the other way, because the two give me an error, knowing that the name of the frame is orders"}],"answers":[{"tags":[],"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642431706,"creation_date":1642431706,"answer_id":70743421,"question_id":70722096,"body_markdown":"Well guys, I finally discovered the error which is the font type. I put the font type in NetBeans **(Times New Roman)**\r\nAnd I discovered that NetBeans supports this type of font, but Windows does not support it, so it makes the sheep inverted and only this problem and I hope that no one will fall into this slander after me: and it is better to use this type of font **(Tahoma)** because all devices support it And it does not show any problem, thank you","title":"Arabic text reversed when I build the project in NetBeans","body":"<p>Well guys, I finally discovered the error which is the font type. I put the font type in NetBeans <strong>(Times New Roman)</strong>\nAnd I discovered that NetBeans supports this type of font, but Windows does not support it, so it makes the sheep inverted and only this problem and I hope that no one will fall into this slander after me: and it is better to use this type of font <strong>(Tahoma)</strong> because all devices support it And it does not show any problem, thank you</p>\n"}],"owner":{"account_id":20534299,"reputation":39,"user_id":17113149,"display_name":"Youssef Ahmed"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":353,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":70743421,"answer_count":1,"score":1,"last_activity_date":1642433238,"creation_date":1642255145,"question_id":70722096,"body_markdown":"When I run my project under NetBeans it works, and the Arabic text is formatted correctly. But when I build the project and send it to the client, the Arabic text is reversed.\r\n\r\nThe same thing also happens to me. When I open the jar file of the project, I see that the language is reversed. I need a solution knowing that Arabic words are written inside jLabel.\r\n\r\nWhen I run the project from within NetBeans, these are the correct results:\r\n\r\n![NetBeans Run Result][1]\r\n\r\nAnd these are the incorrect results when I open the jar file after building the project:\r\n\r\n![jar File Result After Building The Project][2]\r\n\r\n  [1]: https://i.stack.imgur.com/JklT0.jpg\r\n  [2]: https://i.stack.imgur.com/ToK4b.jpg\r\n\r\n\r\n","title":"Arabic text reversed when I build the project in NetBeans","body":"<p>When I run my project under NetBeans it works, and the Arabic text is formatted correctly. But when I build the project and send it to the client, the Arabic text is reversed.</p>\n<p>The same thing also happens to me. When I open the jar file of the project, I see that the language is reversed. I need a solution knowing that Arabic words are written inside jLabel.</p>\n<p>When I run the project from within NetBeans, these are the correct results:</p>\n<p><img src=\"https://i.stack.imgur.com/JklT0.jpg\" alt=\"NetBeans Run Result\" /></p>\n<p>And these are the incorrect results when I open the jar file after building the project:</p>\n<p><img src=\"https://i.stack.imgur.com/ToK4b.jpg\" alt=\"jar File Result After Building The Project\" /></p>\n"},{"tags":["java","gif","stddraw"],"comments":[{"owner":{"account_id":124071,"reputation":2551,"user_id":318937,"accept_rate":72,"display_name":"Jubstuff"},"score":0,"creation_date":1543700566,"post_id":53575083,"comment_id":94014868,"body_markdown":"Hi @TheProgrammeur! It would be great if you could write us in the question what you tried so far, so that people can help you on your specific issue :)","body":"Hi @TheProgrammeur! It would be great if you could write us in the question what you tried so far, so that people can help you on your specific issue :)"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1543740575,"post_id":53575083,"comment_id":94021040,"body_markdown":"What on earth is `stdDraw`? Which GUI component toolkit is being used (e.g. Swing, AWT, Java-FX..)? For better help sooner, [edit] to add a [MCVE] or [Short, Self Contained, Correct Example](http://www.sscce.org/).","body":"What on earth is <code>stdDraw</code>? Which GUI component toolkit is being used (e.g. Swing, AWT, Java-FX..)? For better help sooner, <a href=\"https://stackoverflow.com/posts/53575083/edit\">edit</a> to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://www.sscce.org/\" rel=\"nofollow noreferrer\">Short, Self Contained, Correct Example</a>."},{"owner":{"account_id":14862745,"reputation":1,"user_id":10732963,"display_name":"TheProgrammeur"},"score":0,"creation_date":1543788410,"post_id":53575083,"comment_id":94033632,"body_markdown":"&lt;pre&gt;\nStdDraw.setCanvasSize(700, 700);\nStdDraw.enableDoubleBuffering();\nStdDraw.picture(0.5, 0.5, &quot;./image/planet.gif&quot;);\nStdDraw.show();\n&lt;code&gt;\n\nThis doesn&#39;t work but if I put a &#39;.jpg&#39; it&#39;s good why ?","body":"&lt;pre&gt; StdDraw.setCanvasSize(700, 700); StdDraw.enableDoubleBuffering(); StdDraw.picture(0.5, 0.5, &quot;./image/planet.gif&quot;); StdDraw.show(); &lt;code&gt;  This doesn&#39;t work but if I put a &#39;.jpg&#39; it&#39;s good why ?"},{"owner":{"account_id":12430311,"reputation":101,"user_id":10227439,"display_name":"Orion"},"score":0,"creation_date":1546368767,"post_id":53575083,"comment_id":94833273,"body_markdown":"@Andrew it&#39;s a library developed by Princeton for educational purposes https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html","body":"@Andrew it&#39;s a library developed by Princeton for educational purposes <a href=\"https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html\" rel=\"nofollow noreferrer\">introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1546368929,"post_id":53575083,"comment_id":94833314,"body_markdown":"*&quot;This doesn&#39;t work but ..&quot;* Tip: Add @Jubstuff (or whoever, the `@` is important) to *notify* the person of a new comment.","body":"<i>&quot;This doesn&#39;t work but ..&quot;</i> Tip: Add @Jubstuff (or whoever, the <code>@</code> is important) to <i>notify</i> the person of a new comment."}],"answers":[{"tags":[],"owner":{"account_id":486952,"reputation":271,"user_id":2104705,"display_name":"Wojciech Domalewski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642433228,"creation_date":1642433228,"answer_id":70743764,"question_id":53575083,"body_markdown":"All you need to show a gif is a single declaration, where xPos and yPos are image coordinates with respect to lower left corner of window.\r\n\r\n    \r\n    StdDraw.picture(xPos,yPos, &quot;image.gif&quot;);\r\n\r\nI hope you know that default coordinates of the right top corner are (1, 1).\r\n\r\nImage should be saved in project&#39;s home directory.","title":"StdDraw - Java - Show a gif","body":"<p>All you need to show a gif is a single declaration, where xPos and yPos are image coordinates with respect to lower left corner of window.</p>\n<pre><code>StdDraw.picture(xPos,yPos, &quot;image.gif&quot;);\n</code></pre>\n<p>I hope you know that default coordinates of the right top corner are (1, 1).</p>\n<p>Image should be saved in project's home directory.</p>\n"}],"owner":{"account_id":14862745,"reputation":1,"user_id":10732963,"display_name":"TheProgrammeur"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642433228,"creation_date":1543698655,"question_id":53575083,"body_markdown":"I&#39;m making a game and I want show a gif with the stdDraw method but this doesn&#39;t work. So if someone can explain me a method to show a gif with stdDraw, this will be cool !","title":"StdDraw - Java - Show a gif","body":"<p>I'm making a game and I want show a gif with the stdDraw method but this doesn't work. So if someone can explain me a method to show a gif with stdDraw, this will be cool !</p>\n"},{"tags":["java","spring-boot","spring-mvc","logging","microservices"],"answers":[{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642433132,"creation_date":1642433132,"answer_id":70743747,"question_id":70743551,"body_markdown":"It&#39;s a little unclear what your current log setup is, but I&#39;ll assume you&#39;ve got a vanilla out of the box spring boot logging (using default logback impl, no logging config in place).\r\n\r\nFirst, the ref doc for this is found here: https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-logging.html\r\n\r\nWhat you&#39;re trying to do is customize the pattern or layout.  The docs for doing this in logback (the spring boot default logging impl) are here: https://logback.qos.ch/manual/layouts.html\r\n\r\nThe easiest way is to add the property `logging.pattern.console` to your application.properties.  Note that if you have an additional logging config in your app (e.g. there&#39;s a file named `logback.xml` or similar in your app) this won&#39;t work.\r\n\r\nThe default console pattern for spring boot is, I believe,\r\n\r\n    %d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${sys:PID} --- [%15.15t] %-40.40logger{1.} : %m%n%wEx\r\n\r\nSo to Add what you want would be something like:\r\n\r\n    logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${sys:PID} --- [%15.15t] %-40.40logger{1.} : Amigo %m%n%wEx\r\n\r\nNote, I haven&#39;t tested this so you may need to fiddle a bit.","title":"Trying to append a string as prefix to all existing loggers for SpringBoot application","body":"<p>It's a little unclear what your current log setup is, but I'll assume you've got a vanilla out of the box spring boot logging (using default logback impl, no logging config in place).</p>\n<p>First, the ref doc for this is found here: <a href=\"https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-logging.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-logging.html</a></p>\n<p>What you're trying to do is customize the pattern or layout.  The docs for doing this in logback (the spring boot default logging impl) are here: <a href=\"https://logback.qos.ch/manual/layouts.html\" rel=\"nofollow noreferrer\">https://logback.qos.ch/manual/layouts.html</a></p>\n<p>The easiest way is to add the property <code>logging.pattern.console</code> to your application.properties.  Note that if you have an additional logging config in your app (e.g. there's a file named <code>logback.xml</code> or similar in your app) this won't work.</p>\n<p>The default console pattern for spring boot is, I believe,</p>\n<pre><code>%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${sys:PID} --- [%15.15t] %-40.40logger{1.} : %m%n%wEx\n</code></pre>\n<p>So to Add what you want would be something like:</p>\n<pre><code>logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${sys:PID} --- [%15.15t] %-40.40logger{1.} : Amigo %m%n%wEx\n</code></pre>\n<p>Note, I haven't tested this so you may need to fiddle a bit.</p>\n"}],"owner":{"account_id":13566887,"reputation":1,"user_id":9786648,"display_name":"Latha Voggu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":788,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642433132,"creation_date":1642432294,"question_id":70743551,"body_markdown":"I am being new to the spring-boot application, I have a scenario where I need to add a string as a prefix for existing loggers in the current application. I tried [this solution][1], but it didn&#39;t work for me. Can anyone help me out with this?\r\n\r\nex: logger.info(&quot;Started Test Application...&quot;) ==&gt; Started Test Application...\r\nneed to add a string of &quot;Amigo&quot; as a prefix   ==&gt; Amigo Started Test Application...\r\n\r\nmostly I wanted to add that string to all existing logs at one go. any simple solution instead of adding manually to all loggers.\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/47670234/adding-string-prefix-to-every-log-message-in-spring-mvc-log4j","title":"Trying to append a string as prefix to all existing loggers for SpringBoot application","body":"<p>I am being new to the spring-boot application, I have a scenario where I need to add a string as a prefix for existing loggers in the current application. I tried <a href=\"https://stackoverflow.com/questions/47670234/adding-string-prefix-to-every-log-message-in-spring-mvc-log4j\">this solution</a>, but it didn't work for me. Can anyone help me out with this?</p>\n<p>ex: logger.info(&quot;Started Test Application...&quot;) ==&gt; Started Test Application...\nneed to add a string of &quot;Amigo&quot; as a prefix   ==&gt; Amigo Started Test Application...</p>\n<p>mostly I wanted to add that string to all existing logs at one go. any simple solution instead of adding manually to all loggers.</p>\n"},{"tags":["java","android","google-play","admob","google-play-services"],"answers":[{"tags":[],"owner":{"account_id":989472,"reputation":11851,"user_id":1007169,"display_name":"Mattias Isegran Bergander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444606584,"creation_date":1444606584,"answer_id":33071286,"question_id":33071159,"body_markdown":"You need to add a rule for the Ad view, set it to &quot;below&quot; the gl surface view.\r\n    \r\n    \r\n    int id = 173; //random number\r\n    mGLSurfaceView.setId(id);\r\n    params.addRule(RelativeLayout.BELOW, id);\r\n\r\nIf using API level 17+ you can use:\r\n\r\n    View.generateViewId()\r\n\r\nOr reserve that number in xml.","title":"admob ad banner overlapping my game screen android","body":"<p>You need to add a rule for the Ad view, set it to \"below\" the gl surface view.</p>\n\n<pre><code>int id = 173; //random number\nmGLSurfaceView.setId(id);\nparams.addRule(RelativeLayout.BELOW, id);\n</code></pre>\n\n<p>If using API level 17+ you can use:</p>\n\n<pre><code>View.generateViewId()\n</code></pre>\n\n<p>Or reserve that number in xml.</p>\n"}],"owner":{"account_id":5393986,"reputation":21,"user_id":4295709,"accept_rate":33,"display_name":"Randa Lethpha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642433067,"creation_date":1444605658,"question_id":33071159,"body_markdown":"i successfully integrated admob ads but i have an issue about placing banner ad under the screen of the game without overlapping the view of my game my current problem is like the picture [Pic 1][1] and i want it to be like this picture \r\n\r\nThanks\r\n[Cute Baby Girl Names][2]\r\n[Pic2][3]\r\n\r\nNB:im using java admob code this is my code \r\n\r\n    package com.xxxx.xxxxx;\r\n    import org.cocos2d.actions.CCActionManager;\r\n    import org.cocos2d.layers.CCScene;\r\n    import org.cocos2d.nodes.CCDirector;\r\n    import org.cocos2d.nodes.CCSpriteFrameCache;\r\n    import org.cocos2d.nodes.CCTextureCache;\r\n    import org.cocos2d.opengl.CCGLSurfaceView;\r\n    import org.cocos2d.sound.SoundEngine;\r\n    import com.google.android.gms.ads.AdRequest;\r\n    import com.google.android.gms.ads.AdSize;\r\n    import com.google.android.gms.ads.AdView;\r\n    import com.google.android.gms.ads.InterstitialAd;\r\n    import com.ideastudio.incroyableAventuresAlaadin.R;\r\n    import android.app.Activity;\r\n    import android.app.AlertDialog;\r\n    import android.app.AlertDialog.Builder;\r\n    import android.content.DialogInterface;\r\n    import android.os.Bundle;\r\n    import android.util.DisplayMetrics;\r\n    import android.view.KeyEvent;\r\n    import android.view.ViewGroup.LayoutParams;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.view.WindowManager;\r\n    import android.widget.RelativeLayout;\r\n\r\n    public class xxxxxx extends Activity{\r\n\t/** Called when the activity is first created. */\r\n\t\r\n\tpublic static xxxxx app;\r\n\t\r\n\tpublic static CCGLSurfaceView mGLSurfaceView;\r\n\tprivate boolean isCreated = false; \r\n\r\n\tprivate static final String AD_UNIT_ID = &quot;ca-app-pub-xxxxxxxx&quot;;\r\n\tprivate static final String AD_INTERSTITIAL_UNIT_ID = &quot;ca-app-pub-xxxxx&quot;;\r\n\t\r\n\t/** The interstitial ad. */\r\n\tprivate InterstitialAd interstitialAd;\r\n\tprivate AdView adView = null;\r\n\r\n\t@Override\r\n\tpublic void onCreate(Bundle savedInstanceState) {\r\n\t\tif( !isCreated ){\r\n\t\t\tisCreated = true;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tapp = this;\r\n\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\trequestWindowFeature(Window.FEATURE_NO_TITLE);\r\n\t\tgetWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n\t\t\t\tWindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\t\tRelativeLayout layout = new RelativeLayout(this);\r\n\t\tlayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));\r\n\t\t\r\n\t\t\r\n\t\tmGLSurfaceView = new CCGLSurfaceView(this);\r\n\t\t\r\n\t\t\r\n\t\t// Create the adView\r\n\t\tadView = new AdView(this);\r\n\t\tadView.setAdSize(AdSize.BANNER);\r\n\t\tadView.setAdUnitId(AD_UNIT_ID);\r\n\r\n\t\t// Add the adView to it\r\n\t\tRelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(\r\n\t\t\t\tLayoutParams.WRAP_CONTENT,\r\n\t\t\t\tLayoutParams.WRAP_CONTENT);\r\n\t\tparams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM ,RelativeLayout.TRUE);\r\n        params.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);\r\n\t\tadView.setLayoutParams(params);\r\n\t\t\r\n\t\tlayout.addView(mGLSurfaceView);\r\n\t\tlayout.addView(adView);\r\n\t\t\r\n\t\tsetContentView(layout);\r\n\t\t\r\n\t\t\r\n\t\t// Create an ad request. Check logcat output for the hashed device ID to\r\n\t    // get test ads on a physical device.\r\n\t \t\tAdRequest adRequest = new AdRequest.Builder().build();\r\n\t \t\tadView.loadAd(adRequest);\r\n    \r\n \t\t//-----------------------------------------------------Interstitial Add\r\n \t\t// Create an Interstitial ad.\r\n \t    interstitialAd = new InterstitialAd(this);\r\n \t    interstitialAd.setAdUnitId(AD_INTERSTITIAL_UNIT_ID);\r\n \t\t // Load the interstitial ad.\r\n \t    AdRequest interstitialAdRequest = new AdRequest.Builder().build();\r\n \t    interstitialAd.loadAd(interstitialAdRequest);\r\n \t    \r\n \t    /////////////////////////////////////////////////////////////////////////////\r\n\t\tCommon.game_initialize();\r\n\t\tgetScaledCoordinate();\r\n\t\tCCDirector.sharedDirector().attachInView(mGLSurfaceView); \r\n\r\n\t\t// attach the OpenGL view to a window\r\n\t\tCommon.sound_engine = SoundEngine.sharedEngine();\r\n\t\tloadSound();\r\n\r\n\t\tCCScene scene = CCScene.node();\r\n\t\tscene.addChild(new HelloWorldLayer(), 1);\r\n\t\tCCDirector.sharedDirector().runWithScene(scene);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onStart() {\r\n\t\tsuper.onStart();\r\n\t}\r\n\r\n\t@Override    \r\n\tpublic void onPause() {\r\n\t\tif (adView != null) {\r\n\t\t      adView.pause();\r\n\t\t    }\r\n\t\t\r\n\t\t\r\n\t\tsuper.onPause();\r\n\r\n\t\tMediaGlobal._shared().pauseMusic();\r\n\r\n\t\tif(GameLayer.sharedGameLayer() != null){\r\n\t\t\tGameLayer.sharedGameLayer().onPause(null);\r\n\t\t}\r\n\t\tCCDirector.sharedDirector().pause();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onResume() {\r\n\t\tsuper.onResume();\r\n\r\n        if (adView != null) {\r\n\t        adView.resume();\r\n\t      }\r\n        \r\n\t\tMediaGlobal._shared().resumeMusic();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onDestroy() {\r\n\t\t\r\n\t\tif (adView != null) {\r\n\t  \t      adView.destroy();\r\n\t  \t    }\r\n\t  \t    \r\n\t\t\r\n\t\tisCreated = false;\r\n\r\n\t\tMediaGlobal._shared().stopMusic();\r\n\t\tCommon.sound_engine.realesAllEffects();\r\n\r\n\t\tsuper.onDestroy();\r\n\t\tCCDirector.sharedDirector().end();       \r\n\r\n\t\tCCTextureCache.sharedTextureCache().removeAllTextures();\r\n\t\tCCTextureCache.sharedTextureCache().removeAllTextures();\r\n\t\tCCSpriteFrameCache.sharedSpriteFrameCache().removeAllSpriteFrames();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean onKeyDown(int keyCode, KeyEvent event) {\r\n\t\tif(keyCode == KeyEvent.KEYCODE_BACK){\r\n\t\t\texitGameDialog();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn super.onKeyDown(keyCode, event);\r\n\t}\r\n\r\n\tpublic void exitGameDialog() {\r\n\t\tBuilder builder = new AlertDialog.Builder(FlyingPanda.this)\r\n\t\t\t\t.setIcon(R.drawable.icon)\r\n\t\t\t\t.setTitle(&quot;Quitter le jeu?&quot;)\r\n\t\t\t\t.setMessage(&quot;Est-vous s&#251;r?&quot;)\r\n\t\t\t\t.setNegativeButton(&quot;Non&quot;, new DialogInterface.OnClickListener() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void onClick(DialogInterface dialog, int whichButton) {\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.setPositiveButton(&quot;Oui&quot;,\r\n\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\r\n\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog,\r\n\t\t\t\t\t\t\t\t\tint whichButton) {\r\n\t\t\t\t\t\t\t\tCCActionManager.sharedManager()\r\n\t\t\t\t\t\t\t\t\t\t.removeAllActions();\r\n\t\t\t\t\t\t\t\tCCDirector.sharedDirector().end();\r\n\t\t\t\t\t\t\t\tfinish();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\tbuilder.create().show();\r\n\t}\r\n\r\n\tprivate void loadSound() {\r\n\t\tSoundEngine.purgeSharedEngine();\r\n\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.bomb);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.bounce);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.death);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.fly);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.gamebg);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.gameover);\r\n\t\tCommon.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.jumppad);\r\n\t}\r\n\r\n\tprivate void getScaledCoordinate() {\r\n\t\tDisplayMetrics displayMetrics = new DisplayMetrics();\r\n\t\tgetWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n\r\n\t\tCommon.SCREEN_WIDTH = displayMetrics.widthPixels;\r\n\t\tCommon.SCREEN_HEIGHT = displayMetrics.heightPixels;\r\n\t\tCommon.kXForIPhone = Common.SCREEN_WIDTH / 480.0f;\r\n\t\tCommon.kYForIPhone = Common.SCREEN_HEIGHT / 320.0f;\r\n\t}\r\n\r\n\r\n    // Admob Setting\r\n \t////////////////////////////////////////////////////////////////////////////////\r\n\r\n \tpublic void setHideAdView(final boolean bHide) {\r\n \t\trunOnUiThread(new Runnable() {\r\n \t\t    public void run() {\r\n \t\t    \tif(bHide) {\r\n \t\t\t\t\tadView.setVisibility(View.INVISIBLE);\r\n \t\t\t\t}\r\n \t\t\t\telse {\r\n \t\t\t\t\tadView.setVisibility(View.VISIBLE);\r\n \t\t\t\t}\r\n \t\t    }\r\n \t\t});\r\n \t\t\r\n \t\t\r\n \t}\r\n\r\n \tpublic void showInterstitialAds()\r\n \t{\r\n \t\trunOnUiThread(new Runnable() {\r\n \t\t    public void run() {\r\n\r\n \t\t \t    // Load the interstitial ad.\r\n \t\t \t    AdRequest interstitialAdRequest = new AdRequest.Builder().build();\r\n \t\t \t    interstitialAd.loadAd(interstitialAdRequest);\r\n \t\t \t\t\r\n \t\t\t\tinterstitialAd.show();\r\n \t\t    }\r\n \t\t});\r\n \t}\r\n\t\r\n      }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/HI9by.png\r\n  [2]: https://www.mygirlynames.com/\r\n  [3]: http://i.stack.imgur.com/niGH6.png","title":"admob ad banner overlapping my game screen android","body":"<p>i successfully integrated admob ads but i have an issue about placing banner ad under the screen of the game without overlapping the view of my game my current problem is like the picture <a href=\"https://i.stack.imgur.com/HI9by.png\" rel=\"nofollow noreferrer\">Pic 1</a> and i want it to be like this picture</p>\n<p>Thanks\n<a href=\"https://www.mygirlynames.com/\" rel=\"nofollow noreferrer\">Cute Baby Girl Names</a>\n<a href=\"https://i.stack.imgur.com/niGH6.png\" rel=\"nofollow noreferrer\">Pic2</a></p>\n<p>NB:im using java admob code this is my code</p>\n<pre><code>package com.xxxx.xxxxx;\nimport org.cocos2d.actions.CCActionManager;\nimport org.cocos2d.layers.CCScene;\nimport org.cocos2d.nodes.CCDirector;\nimport org.cocos2d.nodes.CCSpriteFrameCache;\nimport org.cocos2d.nodes.CCTextureCache;\nimport org.cocos2d.opengl.CCGLSurfaceView;\nimport org.cocos2d.sound.SoundEngine;\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.AdSize;\nimport com.google.android.gms.ads.AdView;\nimport com.google.android.gms.ads.InterstitialAd;\nimport com.ideastudio.incroyableAventuresAlaadin.R;\nimport android.app.Activity;\nimport android.app.AlertDialog;\nimport android.app.AlertDialog.Builder;\nimport android.content.DialogInterface;\nimport android.os.Bundle;\nimport android.util.DisplayMetrics;\nimport android.view.KeyEvent;\nimport android.view.ViewGroup.LayoutParams;\nimport android.view.View;\nimport android.view.Window;\nimport android.view.WindowManager;\nimport android.widget.RelativeLayout;\n\npublic class xxxxxx extends Activity{\n/** Called when the activity is first created. */\n\npublic static xxxxx app;\n\npublic static CCGLSurfaceView mGLSurfaceView;\nprivate boolean isCreated = false; \n\nprivate static final String AD_UNIT_ID = &quot;ca-app-pub-xxxxxxxx&quot;;\nprivate static final String AD_INTERSTITIAL_UNIT_ID = &quot;ca-app-pub-xxxxx&quot;;\n\n/** The interstitial ad. */\nprivate InterstitialAd interstitialAd;\nprivate AdView adView = null;\n\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    if( !isCreated ){\n        isCreated = true;\n    } else {\n        return;\n    }\n    \n    app = this;\n\n    super.onCreate(savedInstanceState);\n    requestWindowFeature(Window.FEATURE_NO_TITLE);\n    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\n\n    RelativeLayout layout = new RelativeLayout(this);\n    layout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));\n    \n    \n    mGLSurfaceView = new CCGLSurfaceView(this);\n    \n    \n    // Create the adView\n    adView = new AdView(this);\n    adView.setAdSize(AdSize.BANNER);\n    adView.setAdUnitId(AD_UNIT_ID);\n\n    // Add the adView to it\n    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(\n            LayoutParams.WRAP_CONTENT,\n            LayoutParams.WRAP_CONTENT);\n    params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM ,RelativeLayout.TRUE);\n    params.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);\n    adView.setLayoutParams(params);\n    \n    layout.addView(mGLSurfaceView);\n    layout.addView(adView);\n    \n    setContentView(layout);\n    \n    \n    // Create an ad request. Check logcat output for the hashed device ID to\n    // get test ads on a physical device.\n        AdRequest adRequest = new AdRequest.Builder().build();\n        adView.loadAd(adRequest);\n\n    //-----------------------------------------------------Interstitial Add\n    // Create an Interstitial ad.\n    interstitialAd = new InterstitialAd(this);\n    interstitialAd.setAdUnitId(AD_INTERSTITIAL_UNIT_ID);\n     // Load the interstitial ad.\n    AdRequest interstitialAdRequest = new AdRequest.Builder().build();\n    interstitialAd.loadAd(interstitialAdRequest);\n    \n    /////////////////////////////////////////////////////////////////////////////\n    Common.game_initialize();\n    getScaledCoordinate();\n    CCDirector.sharedDirector().attachInView(mGLSurfaceView); \n\n    // attach the OpenGL view to a window\n    Common.sound_engine = SoundEngine.sharedEngine();\n    loadSound();\n\n    CCScene scene = CCScene.node();\n    scene.addChild(new HelloWorldLayer(), 1);\n    CCDirector.sharedDirector().runWithScene(scene);\n}\n\n@Override\npublic void onStart() {\n    super.onStart();\n}\n\n@Override    \npublic void onPause() {\n    if (adView != null) {\n          adView.pause();\n        }\n    \n    \n    super.onPause();\n\n    MediaGlobal._shared().pauseMusic();\n\n    if(GameLayer.sharedGameLayer() != null){\n        GameLayer.sharedGameLayer().onPause(null);\n    }\n    CCDirector.sharedDirector().pause();\n}\n\n@Override\npublic void onResume() {\n    super.onResume();\n\n    if (adView != null) {\n        adView.resume();\n      }\n    \n    MediaGlobal._shared().resumeMusic();\n}\n\n@Override\npublic void onDestroy() {\n    \n    if (adView != null) {\n          adView.destroy();\n        }\n        \n    \n    isCreated = false;\n\n    MediaGlobal._shared().stopMusic();\n    Common.sound_engine.realesAllEffects();\n\n    super.onDestroy();\n    CCDirector.sharedDirector().end();       \n\n    CCTextureCache.sharedTextureCache().removeAllTextures();\n    CCTextureCache.sharedTextureCache().removeAllTextures();\n    CCSpriteFrameCache.sharedSpriteFrameCache().removeAllSpriteFrames();\n}\n\n@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n    if(keyCode == KeyEvent.KEYCODE_BACK){\n        exitGameDialog();\n        return false;\n    }\n    return super.onKeyDown(keyCode, event);\n}\n\npublic void exitGameDialog() {\n    Builder builder = new AlertDialog.Builder(FlyingPanda.this)\n            .setIcon(R.drawable.icon)\n            .setTitle(&quot;Quitter le jeu?&quot;)\n            .setMessage(&quot;Est-vous sûr?&quot;)\n            .setNegativeButton(&quot;Non&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialog, int whichButton) {\n                }\n            })\n            .setPositiveButton(&quot;Oui&quot;,\n                    new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog,\n                                int whichButton) {\n                            CCActionManager.sharedManager()\n                                    .removeAllActions();\n                            CCDirector.sharedDirector().end();\n                            finish();\n                        }\n                    });\n    builder.create().show();\n}\n\nprivate void loadSound() {\n    SoundEngine.purgeSharedEngine();\n\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.bomb);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.bounce);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.death);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.fly);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.gamebg);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.gameover);\n    Common.sound_engine.preloadEffect(CCDirector.sharedDirector().getActivity().getApplication(), R.raw.jumppad);\n}\n\nprivate void getScaledCoordinate() {\n    DisplayMetrics displayMetrics = new DisplayMetrics();\n    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\n\n    Common.SCREEN_WIDTH = displayMetrics.widthPixels;\n    Common.SCREEN_HEIGHT = displayMetrics.heightPixels;\n    Common.kXForIPhone = Common.SCREEN_WIDTH / 480.0f;\n    Common.kYForIPhone = Common.SCREEN_HEIGHT / 320.0f;\n}\n\n\n// Admob Setting\n////////////////////////////////////////////////////////////////////////////////\n\npublic void setHideAdView(final boolean bHide) {\n    runOnUiThread(new Runnable() {\n        public void run() {\n            if(bHide) {\n                adView.setVisibility(View.INVISIBLE);\n            }\n            else {\n                adView.setVisibility(View.VISIBLE);\n            }\n        }\n    });\n    \n    \n}\n\npublic void showInterstitialAds()\n{\n    runOnUiThread(new Runnable() {\n        public void run() {\n\n            // Load the interstitial ad.\n            AdRequest interstitialAdRequest = new AdRequest.Builder().build();\n            interstitialAd.loadAd(interstitialAdRequest);\n            \n            interstitialAd.show();\n        }\n    });\n}\n\n  }\n</code></pre>\n"},{"tags":["java","multithreading","collections","java.util.concurrent"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1642201170,"post_id":70717426,"comment_id":125016927,"body_markdown":"The simple answer is performance, `synchronisation` has a cost, even the [JavaDocs (for `Vector`)](https://docs.oracle.com/javase/10/docs/api/java/util/Vector.html) suggest using `ArrayList` where thread safety is not an issue - *&quot;Vector is synchronized. If a thread-safe implementation is not needed, it is recommended to use ArrayList in place of Vector.&quot;*","body":"The simple answer is performance, <code>synchronisation</code> has a cost, even the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Vector.html\" rel=\"nofollow noreferrer\">JavaDocs (for <code>Vector</code>)</a> suggest using <code>ArrayList</code> where thread safety is not an issue - <i>&quot;Vector is synchronized. If a thread-safe implementation is not needed, it is recommended to use ArrayList in place of Vector.&quot;</i>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1642201213,"post_id":70717426,"comment_id":125016939,"body_markdown":"You might also find [Why are synchronize expensive in Java?](https://stackoverflow.com/questions/1671089/why-are-synchronize-expensive-in-java) useful","body":"You might also find <a href=\"https://stackoverflow.com/questions/1671089/why-are-synchronize-expensive-in-java\">Why are synchronize expensive in Java?</a> useful"},{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":0,"creation_date":1642201312,"post_id":70717426,"comment_id":125016961,"body_markdown":"Part of the issue is that `Collections.synchronizedList` does not create a new synchronized list, it simply wraps the existing `ArrayList` functions with a mutex. Try using `Vector` instead. It might be a bit faster. However, it will probably end up being a little slower.","body":"Part of the issue is that <code>Collections.synchronizedList</code> does not create a new synchronized list, it simply wraps the existing <code>ArrayList</code> functions with a mutex. Try using <code>Vector</code> instead. It might be a bit faster. However, it will probably end up being a little slower."},{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":2,"creation_date":1642201440,"post_id":70717426,"comment_id":125016994,"body_markdown":"The JVM also uses a system of biasing locks to a single thread. This lets it pretend a synchronized object is not synchronized when it is only accessed from a single thread. However, this comes with the downside of being slower than a regular lock if it later needs to be accessed by another thread. This optimization is likely why you don&#39;t see a large difference in performance.","body":"The JVM also uses a system of biasing locks to a single thread. This lets it pretend a synchronized object is not synchronized when it is only accessed from a single thread. However, this comes with the downside of being slower than a regular lock if it later needs to be accessed by another thread. This optimization is likely why you don&#39;t see a large difference in performance."},{"owner":{"account_id":15892507,"reputation":193,"user_id":13874918,"display_name":"al pal"},"score":0,"creation_date":1642205367,"post_id":70717426,"comment_id":125017650,"body_markdown":"@Locke I am using preview version of JDK19 and seems that biased locking has been disabled since jdk15 (https://quarkus.io/blog/biased-locking-help/). The interesting thing is that if I use 2 threads it wouldn&#39;t degrade the performance at all!","body":"@Locke I am using preview version of JDK19 and seems that biased locking has been disabled since jdk15 (<a href=\"https://quarkus.io/blog/biased-locking-help/\" rel=\"nofollow noreferrer\">quarkus.io/blog/biased-locking-help</a>). The interesting thing is that if I use 2 threads it wouldn&#39;t degrade the performance at all!"},{"owner":{"account_id":15892507,"reputation":193,"user_id":13874918,"display_name":"al pal"},"score":0,"creation_date":1642206605,"post_id":70717426,"comment_id":125017821,"body_markdown":"@Locke I even tried it with HashMap. And with multiple threads(tried up to 7 threads on my 10 core Mac), the performance gets not worse but better as opposed to non-synchronized single thread case!","body":"@Locke I even tried it with HashMap. And with multiple threads(tried up to 7 threads on my 10 core Mac), the performance gets not worse but better as opposed to non-synchronized single thread case!"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1642234432,"post_id":70717426,"comment_id":125020855,"body_markdown":"@alpal &quot;_I have run the following code to measure the time and performance difference between adding elements to ArrayList vs synchronized version of it, and surprisingly haven&#39;t find any significant difference!_&quot; this is a very arrogant statement and kind of laughable considering that this has been analyzed and benchmarked by probably thousands of software engineers and all of them concluded the opposite. And you ended your statement with an exclamation point! LOL","body":"@alpal &quot;<i>I have run the following code to measure the time and performance difference between adding elements to ArrayList vs synchronized version of it, and surprisingly haven&#39;t find any significant difference!</i>&quot; this is a very arrogant statement and kind of laughable considering that this has been analyzed and benchmarked by probably thousands of software engineers and all of them concluded the opposite. And you ended your statement with an exclamation point! LOL"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642432906,"creation_date":1642215038,"answer_id":70718524,"question_id":70717426,"body_markdown":"`synchronization`, when it is actually used, really does cost. However, hotspot is pretty decent at realizing that a mutex isn&#39;t actually doing anything useful and eliminating it. That&#39;s what you&#39;re seeing.\r\n\r\nSo, why isn&#39;t `ArrayList` just synchronized out of the box / why isn&#39;t the advice &#39;use Vector, not ArrayList&#39;? Many separate reasons:\r\n\r\n1. Most important take-home reason (the rest is just historic peculiarity): Because a synchronized list is mostly useless. See below.\r\n\r\n2. __Modern day__ JVMs are pretty good at eliminating synchronized where it doesn&#39;t do anything. Which is why you are having a hard time using simple timing code to see any difference. But that wasn&#39;t always the case. ArrayList was introduced in java 1.2. Vector (a synchronized arraylist with a different API) is older than that: 1.0. ArrayList was introduced for 2 separate reasons: Partly to clean up that API, and partly because &#39;synchronize it!&#39; was slow. __NOW__ it is no longer slow, but Java 1.2 is [23 years old](https://en.wikipedia.org/wiki/Java_version_history). Rerun your code on java 1.2 if you can find it anywhere and report back to me :)\r\n3. Everything about Vector is deprecated, obsolete, and non-idiomatic. Part of that is simply &#39;because&#39;. 23 years ago, the advice &#39;use ArrayList, not Vector&#39; was correct for a bunch of reasons. Including &quot;Because it is faster&quot; (even if that is no longer true today). Now the reason to use ArrayList and not Vector is mostly: &quot;Because ArrayList is what everybody is familiar with, Vector is not, when in rome act like romans, don&#39;t rock the boat for no reason whatsoever&quot;. This shows up in all sorts of pragmatic ways: The name &#39;Vector&#39; is now being reused in the java ecosystem for something completely different (accessing hardware registers that aren&#39;t exactly 64-bit, part of Project Panama), for example.\r\n\r\n---\r\n\r\nWhy is a synchronized list mostly useless?\r\n\r\na non-synchronized (&#39;thread safe&#39;) implementation breaks completely; the spec says: Anything can happen. A synchronized (&#39;thread safe&#39;) implementation does not break completely; instead, you get 1 of a permutation of options, with no guarantees whatsoever about which ones are more or less likely. __That&#39;s not really more useful than utter chaos, though!__ For example, if I write this code:\r\n\r\n```\r\nList a = new Vector&lt;String&gt;();\r\nThread x = new Thread(() -&gt; a.add(&quot;Hello&quot;));\r\nThread y = new Thread(() -&gt; a.add(&quot;World&quot;));\r\nx.start();\r\ny.start();\r\nx.join();\r\ny.join();\r\nSystem.out.println(a);\r\n```\r\n\r\nThen it is legal for this app to print `[Hello, World]`, but it is also legal for this app to print `[World, Hello]`. __There is no way to know__, and a VM is free to always return the one, or always return the other, or flip a coin, or make it depend on the phase of the moon. Vector is synchronized and this is still useless to me. Nobody wants to write algorithms that need to deal with a combinatory explosion of permutations!!\r\n\r\nWith ArrayList, however, which is not &#39;thread safe&#39;, it gets much much worse. There are way more permutations here. The JVM can do any of these without breaking spec:\r\n\r\n* [Hello, World]\r\n* [World, Hello]\r\n* [Hello]\r\n* [World]\r\n* [null, Hello]\r\n* [World, World]\r\n* []\r\n* [WhatTheHeckReally]\r\n* pause, play the macarena over the speaker system, then crash.\r\n\r\nAnything goes - the spec says the behaviour is unspecified. In practice, the first 4 are all entirely possible.\r\n\r\nAvoiding this mess is good, but the permutations that the synchronized Vector offers is just.. less bad. But still bad, so who cares? You want this code to be 100% reliable: You want code to do the same thing every time (unless I _want_ randomness, but then use `java.util.Random` which has specs that explicitly spell out how it is random. Threads are free to be non-random, so if you MUST have randomness, you can&#39;t use that either).\r\n\r\nIn order to make stuff reliable, the operation needs to be either done by the object itself (you call ONE method and that is the only interaction your thread does with it), or, you need external locks.\r\n\r\nFor example, if I want put &#39;1&#39; in a hashmap for a key that isn&#39;t htere yet, and increment the number if it is, this code __DOES NOT WORK__:\r\n\r\n```\r\nMap&lt;String, Integer&gt; myMap = Collections.synchronizedMap(new HashMap&lt;&gt;());\r\n\r\n...\r\n\r\nString k = ...;\r\nif (myMap.containsKey(k)) myMap.put(k, myMap.get(k) + 1);\r\nelse myMap.put(k, 1);\r\n```\r\n\r\nSeems fine? Nope, broken:\r\n\r\n* Thread 1 calls myMap.containsKey and sees the answer is `false`.\r\n* Thread 1 so happens to get pre-empted and freezes right there, after the if, before the `put`.\r\n* Thread 2 runs, and increments for the same key. It, too, finds `myMap,containsKey` returning false. It therefore runs `myMap.put(k, 1)`.\r\n* Thread 1 continues running, and runs.. `myMap.put(k, 1)`\r\n* The map now contains `k = 1`, even though `incrementFor(k)` was run __twice__. Your app is broken.\r\n\r\nSee? Synchronization? It was completely useless here. What you want is either a lock:\r\n\r\n```\r\nsynchronized (something) {\r\n  String k = ...;\r\n  if (myMap.containsKey(k)) myMap.put(k, myMap.get(k) + 1);\r\n  else myMap.put(k, 1);\r\n}\r\n```\r\n\r\nand this is completely fine - no matter how had you try running `incrementFor(k)` simultaneously, it&#39;ll dutifully count every invocation, or, better yet, we ask the map to do it for us, to have a map that just _has_ an increment function or similar. `HashMap` does not. I guess `Collections.synchronizedList` could return an object that has extra methods, but as the name suggest, that implementation then neccessarily uses locking, and there are more efficient ways to do it.\r\n\r\nThis task is better done with `ConcurrentHashMap`, and using the right method:\r\n\r\n```\r\nConcurrentHashMap&lt;String, Integer&gt; myMap = new ConcurrentHashMap&lt;&gt;();\r\n\r\n...\r\n\r\nmyMap.merge(k, 1, (a, b) -&gt; a + b);\r\n```\r\n\r\nThat does it in __one__ call. (merge is the same as `.put(k, 1)` if k isn&#39;t in the map already, but if it is, it is the same as `.put(k, RESULT)` where RESULT is the result of running `a + b` where a is &#39;what was in the map&#39; and &#39;b&#39; is the value you are trying to add (So, 1, in this case).\r\n\r\nA non-synchronized list can still mess up a single call, but if your &#39;job&#39; involves more than one call, a synchronized one in the sense of e.g. `Collections.synchronizedMap` or `j.u.Vector` __cannot__ safely do this.\r\n\r\nAnd that&#39;s, in the end, why the advice is to not use synchronized stuff - even though it is probably not really a performance issue, there is almost no point in doing it. If you actually have concurrency needs it is unlikely that synchronizing the thing internally is going to help you, and in the case where it does, it&#39;s somewhat likely that some more specific type in the `java.util.concurrent` package can do it faster (because when concurrency _IS_ happening, `synchronized` most definitely is not free at all).\r\n\r\n","title":"Why not to use synchronized ArrayList even in single thread cases?","body":"<p><code>synchronization</code>, when it is actually used, really does cost. However, hotspot is pretty decent at realizing that a mutex isn't actually doing anything useful and eliminating it. That's what you're seeing.</p>\n<p>So, why isn't <code>ArrayList</code> just synchronized out of the box / why isn't the advice 'use Vector, not ArrayList'? Many separate reasons:</p>\n<ol>\n<li><p>Most important take-home reason (the rest is just historic peculiarity): Because a synchronized list is mostly useless. See below.</p>\n</li>\n<li><p><strong>Modern day</strong> JVMs are pretty good at eliminating synchronized where it doesn't do anything. Which is why you are having a hard time using simple timing code to see any difference. But that wasn't always the case. ArrayList was introduced in java 1.2. Vector (a synchronized arraylist with a different API) is older than that: 1.0. ArrayList was introduced for 2 separate reasons: Partly to clean up that API, and partly because 'synchronize it!' was slow. <strong>NOW</strong> it is no longer slow, but Java 1.2 is <a href=\"https://en.wikipedia.org/wiki/Java_version_history\" rel=\"nofollow noreferrer\">23 years old</a>. Rerun your code on java 1.2 if you can find it anywhere and report back to me :)</p>\n</li>\n<li><p>Everything about Vector is deprecated, obsolete, and non-idiomatic. Part of that is simply 'because'. 23 years ago, the advice 'use ArrayList, not Vector' was correct for a bunch of reasons. Including &quot;Because it is faster&quot; (even if that is no longer true today). Now the reason to use ArrayList and not Vector is mostly: &quot;Because ArrayList is what everybody is familiar with, Vector is not, when in rome act like romans, don't rock the boat for no reason whatsoever&quot;. This shows up in all sorts of pragmatic ways: The name 'Vector' is now being reused in the java ecosystem for something completely different (accessing hardware registers that aren't exactly 64-bit, part of Project Panama), for example.</p>\n</li>\n</ol>\n<hr />\n<p>Why is a synchronized list mostly useless?</p>\n<p>a non-synchronized ('thread safe') implementation breaks completely; the spec says: Anything can happen. A synchronized ('thread safe') implementation does not break completely; instead, you get 1 of a permutation of options, with no guarantees whatsoever about which ones are more or less likely. <strong>That's not really more useful than utter chaos, though!</strong> For example, if I write this code:</p>\n<pre><code>List a = new Vector&lt;String&gt;();\nThread x = new Thread(() -&gt; a.add(&quot;Hello&quot;));\nThread y = new Thread(() -&gt; a.add(&quot;World&quot;));\nx.start();\ny.start();\nx.join();\ny.join();\nSystem.out.println(a);\n</code></pre>\n<p>Then it is legal for this app to print <code>[Hello, World]</code>, but it is also legal for this app to print <code>[World, Hello]</code>. <strong>There is no way to know</strong>, and a VM is free to always return the one, or always return the other, or flip a coin, or make it depend on the phase of the moon. Vector is synchronized and this is still useless to me. Nobody wants to write algorithms that need to deal with a combinatory explosion of permutations!!</p>\n<p>With ArrayList, however, which is not 'thread safe', it gets much much worse. There are way more permutations here. The JVM can do any of these without breaking spec:</p>\n<ul>\n<li>[Hello, World]</li>\n<li>[World, Hello]</li>\n<li>[Hello]</li>\n<li>[World]</li>\n<li>[null, Hello]</li>\n<li>[World, World]</li>\n<li>[]</li>\n<li>[WhatTheHeckReally]</li>\n<li>pause, play the macarena over the speaker system, then crash.</li>\n</ul>\n<p>Anything goes - the spec says the behaviour is unspecified. In practice, the first 4 are all entirely possible.</p>\n<p>Avoiding this mess is good, but the permutations that the synchronized Vector offers is just.. less bad. But still bad, so who cares? You want this code to be 100% reliable: You want code to do the same thing every time (unless I <em>want</em> randomness, but then use <code>java.util.Random</code> which has specs that explicitly spell out how it is random. Threads are free to be non-random, so if you MUST have randomness, you can't use that either).</p>\n<p>In order to make stuff reliable, the operation needs to be either done by the object itself (you call ONE method and that is the only interaction your thread does with it), or, you need external locks.</p>\n<p>For example, if I want put '1' in a hashmap for a key that isn't htere yet, and increment the number if it is, this code <strong>DOES NOT WORK</strong>:</p>\n<pre><code>Map&lt;String, Integer&gt; myMap = Collections.synchronizedMap(new HashMap&lt;&gt;());\n\n...\n\nString k = ...;\nif (myMap.containsKey(k)) myMap.put(k, myMap.get(k) + 1);\nelse myMap.put(k, 1);\n</code></pre>\n<p>Seems fine? Nope, broken:</p>\n<ul>\n<li>Thread 1 calls myMap.containsKey and sees the answer is <code>false</code>.</li>\n<li>Thread 1 so happens to get pre-empted and freezes right there, after the if, before the <code>put</code>.</li>\n<li>Thread 2 runs, and increments for the same key. It, too, finds <code>myMap,containsKey</code> returning false. It therefore runs <code>myMap.put(k, 1)</code>.</li>\n<li>Thread 1 continues running, and runs.. <code>myMap.put(k, 1)</code></li>\n<li>The map now contains <code>k = 1</code>, even though <code>incrementFor(k)</code> was run <strong>twice</strong>. Your app is broken.</li>\n</ul>\n<p>See? Synchronization? It was completely useless here. What you want is either a lock:</p>\n<pre><code>synchronized (something) {\n  String k = ...;\n  if (myMap.containsKey(k)) myMap.put(k, myMap.get(k) + 1);\n  else myMap.put(k, 1);\n}\n</code></pre>\n<p>and this is completely fine - no matter how had you try running <code>incrementFor(k)</code> simultaneously, it'll dutifully count every invocation, or, better yet, we ask the map to do it for us, to have a map that just <em>has</em> an increment function or similar. <code>HashMap</code> does not. I guess <code>Collections.synchronizedList</code> could return an object that has extra methods, but as the name suggest, that implementation then neccessarily uses locking, and there are more efficient ways to do it.</p>\n<p>This task is better done with <code>ConcurrentHashMap</code>, and using the right method:</p>\n<pre><code>ConcurrentHashMap&lt;String, Integer&gt; myMap = new ConcurrentHashMap&lt;&gt;();\n\n...\n\nmyMap.merge(k, 1, (a, b) -&gt; a + b);\n</code></pre>\n<p>That does it in <strong>one</strong> call. (merge is the same as <code>.put(k, 1)</code> if k isn't in the map already, but if it is, it is the same as <code>.put(k, RESULT)</code> where RESULT is the result of running <code>a + b</code> where a is 'what was in the map' and 'b' is the value you are trying to add (So, 1, in this case).</p>\n<p>A non-synchronized list can still mess up a single call, but if your 'job' involves more than one call, a synchronized one in the sense of e.g. <code>Collections.synchronizedMap</code> or <code>j.u.Vector</code> <strong>cannot</strong> safely do this.</p>\n<p>And that's, in the end, why the advice is to not use synchronized stuff - even though it is probably not really a performance issue, there is almost no point in doing it. If you actually have concurrency needs it is unlikely that synchronizing the thing internally is going to help you, and in the case where it does, it's somewhat likely that some more specific type in the <code>java.util.concurrent</code> package can do it faster (because when concurrency <em>IS</em> happening, <code>synchronized</code> most definitely is not free at all).</p>\n"},{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642234977,"creation_date":1642225327,"answer_id":70719138,"question_id":70717426,"body_markdown":"If you get weird benchmark results, the first thing you need to do is to verify your benchmark. And your benchmark is flawed for quite a few reasons. \r\n- no proper warmup. It is not only the typical JIT warmup, but biased locking is disabled the first few seconds on JVM startup.\r\n- insufficient number of iterations\r\n- in theory the code could be optimized out due to dead code elimination\r\n\r\nSo I rewrote your benchmark using JMH: a micro benchmarking framework.\r\n\r\n    package com;\r\n    \r\n    import org.openjdk.jmh.annotations.Benchmark;\r\n    import org.openjdk.jmh.annotations.BenchmarkMode;\r\n    import org.openjdk.jmh.annotations.Fork;\r\n    import org.openjdk.jmh.annotations.Measurement;\r\n    import org.openjdk.jmh.annotations.Mode;\r\n    import org.openjdk.jmh.annotations.OperationsPerInvocation;\r\n    import org.openjdk.jmh.annotations.OutputTimeUnit;\r\n    import org.openjdk.jmh.annotations.Scope;\r\n    import org.openjdk.jmh.annotations.State;\r\n    import org.openjdk.jmh.annotations.Warmup;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.stream.IntStream;\r\n    \r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    @State(Scope.Benchmark)\r\n    @OperationsPerInvocation(SyncArrayListBenchmark.OPERATIONS_PER_INVOCATION)\r\n    public class SyncArrayListBenchmark {\r\n    \r\n        public static final int OPERATIONS_PER_INVOCATION = 100_000_000;\r\n    \r\n    \r\n        @Benchmark\r\n        public int arrayList() {\r\n            List&lt;Integer&gt; l1 = new ArrayList&lt;&gt;(OPERATIONS_PER_INVOCATION);\r\n    \r\n            IntStream.range(0, OPERATIONS_PER_INVOCATION).sequential().forEach(i -&gt; l1.add(i));\r\n    \r\n            return l1.size();\r\n        }\r\n    \r\n        @Benchmark\r\n        public int synchronized_arrayList() {\r\n            List&lt;Integer&gt; l1 = Collections.synchronizedList(new ArrayList&lt;&gt;(OPERATIONS_PER_INVOCATION));\r\n    \r\n            IntStream.range(0, OPERATIONS_PER_INVOCATION).sequential().forEach(i -&gt; l1.add(i));\r\n    \r\n            return l1.size();\r\n        }\r\n    }\r\n\r\n\r\nThe results of running with JDK 11:\r\n\r\n\r\n    Benchmark                                      Mode  Cnt  Score   Error  Units\r\n    SyncArrayListBenchmark.arrayList               avgt   25  4.986 &#177; 0.100  ns/op\r\n    SyncArrayListBenchmark.synchronized_arrayList  avgt   25  6.447 &#177; 0.104  ns/op\r\n\r\n\r\nThe results of running with JDK 17:\r\n\r\n    Benchmark                                      Mode  Cnt   Score   Error  Units\r\n    SyncArrayListBenchmark.arrayList               avgt   25   6.819 &#177; 0.300  ns/op\r\n    SyncArrayListBenchmark.synchronized_arrayList  avgt   25  10.374 &#177; 0.427  ns/op\r\n\r\nConclusion:\r\n\r\nAs you can see, the impact of synchronized ArrayList is significant.\r\n\r\nWith JDK 11, the average latency is 29% higher even though biased locking is used. \r\n\r\n\r\nWith JDK 17, the impact of synchronized ArrayList is even worse since on average latency the benchmark is 52% higher.  With JDK 15, biased locking has been disabled by default and is about to be removed completely. So it is likely to be a contributing factor.\r\n\r\nWhat is &#39;interesting&#39; is that the synchronized version of JDK 11 is faster than the unsynchronized version of 17. I&#39;m not sure what the cause is; perhaps related to GC changes. \r\n\r\nI leave that as an exercise to the reader. JMH has some great profilers. The first thing I would do is to get rid of allocations and thereby excluding the garbage collector.","title":"Why not to use synchronized ArrayList even in single thread cases?","body":"<p>If you get weird benchmark results, the first thing you need to do is to verify your benchmark. And your benchmark is flawed for quite a few reasons.</p>\n<ul>\n<li>no proper warmup. It is not only the typical JIT warmup, but biased locking is disabled the first few seconds on JVM startup.</li>\n<li>insufficient number of iterations</li>\n<li>in theory the code could be optimized out due to dead code elimination</li>\n</ul>\n<p>So I rewrote your benchmark using JMH: a micro benchmarking framework.</p>\n<pre><code>package com;\n\nimport org.openjdk.jmh.annotations.Benchmark;\nimport org.openjdk.jmh.annotations.BenchmarkMode;\nimport org.openjdk.jmh.annotations.Fork;\nimport org.openjdk.jmh.annotations.Measurement;\nimport org.openjdk.jmh.annotations.Mode;\nimport org.openjdk.jmh.annotations.OperationsPerInvocation;\nimport org.openjdk.jmh.annotations.OutputTimeUnit;\nimport org.openjdk.jmh.annotations.Scope;\nimport org.openjdk.jmh.annotations.State;\nimport org.openjdk.jmh.annotations.Warmup;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.concurrent.TimeUnit;\nimport java.util.stream.IntStream;\n\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@State(Scope.Benchmark)\n@OperationsPerInvocation(SyncArrayListBenchmark.OPERATIONS_PER_INVOCATION)\npublic class SyncArrayListBenchmark {\n\n    public static final int OPERATIONS_PER_INVOCATION = 100_000_000;\n\n\n    @Benchmark\n    public int arrayList() {\n        List&lt;Integer&gt; l1 = new ArrayList&lt;&gt;(OPERATIONS_PER_INVOCATION);\n\n        IntStream.range(0, OPERATIONS_PER_INVOCATION).sequential().forEach(i -&gt; l1.add(i));\n\n        return l1.size();\n    }\n\n    @Benchmark\n    public int synchronized_arrayList() {\n        List&lt;Integer&gt; l1 = Collections.synchronizedList(new ArrayList&lt;&gt;(OPERATIONS_PER_INVOCATION));\n\n        IntStream.range(0, OPERATIONS_PER_INVOCATION).sequential().forEach(i -&gt; l1.add(i));\n\n        return l1.size();\n    }\n}\n</code></pre>\n<p>The results of running with JDK 11:</p>\n<pre><code>Benchmark                                      Mode  Cnt  Score   Error  Units\nSyncArrayListBenchmark.arrayList               avgt   25  4.986 ± 0.100  ns/op\nSyncArrayListBenchmark.synchronized_arrayList  avgt   25  6.447 ± 0.104  ns/op\n</code></pre>\n<p>The results of running with JDK 17:</p>\n<pre><code>Benchmark                                      Mode  Cnt   Score   Error  Units\nSyncArrayListBenchmark.arrayList               avgt   25   6.819 ± 0.300  ns/op\nSyncArrayListBenchmark.synchronized_arrayList  avgt   25  10.374 ± 0.427  ns/op\n</code></pre>\n<p>Conclusion:</p>\n<p>As you can see, the impact of synchronized ArrayList is significant.</p>\n<p>With JDK 11, the average latency is 29% higher even though biased locking is used.</p>\n<p>With JDK 17, the impact of synchronized ArrayList is even worse since on average latency the benchmark is 52% higher.  With JDK 15, biased locking has been disabled by default and is about to be removed completely. So it is likely to be a contributing factor.</p>\n<p>What is 'interesting' is that the synchronized version of JDK 11 is faster than the unsynchronized version of 17. I'm not sure what the cause is; perhaps related to GC changes.</p>\n<p>I leave that as an exercise to the reader. JMH has some great profilers. The first thing I would do is to get rid of allocations and thereby excluding the garbage collector.</p>\n"}],"owner":{"account_id":15892507,"reputation":193,"user_id":13874918,"display_name":"al pal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":888,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70719138,"answer_count":2,"score":0,"last_activity_date":1642432906,"creation_date":1642200859,"question_id":70717426,"body_markdown":"I have run the following code to measure the time and performance difference between adding elements to ArrayList vs synchronized version of it, and surprisingly haven&#39;t find any significant difference! And by significant I mean the difference doesn&#39;t give you any information on which you can prefer one to another!  \r\n\r\nAnd my question is that if performance wise they are almost the same then why are they even providing the non-synchronized version in the first place? And why not to use the synchronized version for both multi-thread and single-thread cases? \r\n\r\nFYI, as can be seen I didn&#39;t warmed up JVM, and also I understand that garbage collection will most probably run in between iterations to free up old arrays, but I don&#39;t think that matters since we have it for both cases and also even if you run it for just one iteration you would get the same result!\r\n```lang-java\r\n    int size = 100_000_000;\r\n    long totalTime = 0;\r\n    for(int j=0; j&lt;20; j++) {\r\n        List&lt;Integer&gt; l1 = new ArrayList&lt;&gt;(size);\r\n        //List&lt;Integer&gt; l1 = Collections.synchronizedList(new ArrayList&lt;&gt;(size));\r\n\r\n        long t1 = System.nanoTime();\r\n\r\n        IntStream.range(0, size).sequential().forEach(i -&gt; l1.add(i));\r\n\r\n        long t2 = System.nanoTime();\r\n        totalTime += t2-t1;\r\n    }\r\n    System.out.println(&quot;time (ms):&quot; + TimeUnit.NANOSECONDS.toMillis(totalTime/20));\r\n```","title":"Why not to use synchronized ArrayList even in single thread cases?","body":"<p>I have run the following code to measure the time and performance difference between adding elements to ArrayList vs synchronized version of it, and surprisingly haven't find any significant difference! And by significant I mean the difference doesn't give you any information on which you can prefer one to another!</p>\n<p>And my question is that if performance wise they are almost the same then why are they even providing the non-synchronized version in the first place? And why not to use the synchronized version for both multi-thread and single-thread cases?</p>\n<p>FYI, as can be seen I didn't warmed up JVM, and also I understand that garbage collection will most probably run in between iterations to free up old arrays, but I don't think that matters since we have it for both cases and also even if you run it for just one iteration you would get the same result!</p>\n<pre class=\"lang-java prettyprint-override\"><code>    int size = 100_000_000;\n    long totalTime = 0;\n    for(int j=0; j&lt;20; j++) {\n        List&lt;Integer&gt; l1 = new ArrayList&lt;&gt;(size);\n        //List&lt;Integer&gt; l1 = Collections.synchronizedList(new ArrayList&lt;&gt;(size));\n\n        long t1 = System.nanoTime();\n\n        IntStream.range(0, size).sequential().forEach(i -&gt; l1.add(i));\n\n        long t2 = System.nanoTime();\n        totalTime += t2-t1;\n    }\n    System.out.println(&quot;time (ms):&quot; + TimeUnit.NANOSECONDS.toMillis(totalTime/20));\n</code></pre>\n"},{"tags":["java","pointers","arraylist"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1642425619,"post_id":70741982,"comment_id":125060057,"body_markdown":"It stores the reference to those objects. &quot;Pointer&quot; is not a term you usually use in Java. See also [&quot;Is Java pass-by-reference or pass-by-value&quot;](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)","body":"It stores the reference to those objects. &quot;Pointer&quot; is not a term you usually use in Java. See also <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">&quot;Is Java pass-by-reference or pass-by-value&quot;</a>"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1642425655,"post_id":70741982,"comment_id":125060073,"body_markdown":"&quot;Pointer&quot;, &quot;Reference&quot;... potayto potahto. Same meaning in broad strokes, just in java we call it &#39;a reference&#39;.","body":"&quot;Pointer&quot;, &quot;Reference&quot;... potayto potahto. Same meaning in broad strokes, just in java we call it &#39;a reference&#39;."},{"owner":{"display_name":"user17788823"},"score":0,"creation_date":1642428331,"post_id":70741982,"comment_id":125061328,"body_markdown":"My doubt was why is that we have two pointers pointing to an object. For example poppa po-+int to object while pointer present at index location 1 points to same object.","body":"My doubt was why is that we have two pointers pointing to an object. For example poppa po-+int to object while pointer present at index location 1 points to same object."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642432836,"creation_date":1642428058,"answer_id":70742590,"question_id":70741982,"body_markdown":"&gt; `Bear momma = new Bear();`\r\n\r\nThis code is shorthand for this:\r\n\r\n```\r\nBear momma; [1]\r\nnew Bear(); [2]\r\nmomma = that thing; [3]\r\n```\r\n\r\nThe first line creates a new variable, and names it momma. In java, __all__ variables are tiny. Think post-it note with a title. So, this grabs a post-it note, writes a title on it, and leaves it blank.\r\n\r\nThe second line makes an entire bear, which is considerably larger than a post-it note. Remember that: If you want a new bear, `new Bear()` needs to be executed by you or somebody else&#39;s code.\r\n\r\nThe third line simply writes the __address__ of where the bear lives on your post-it.\r\n\r\nPost-its are tiny; they have enough room for a primitive (`int`, `long`, `byte`, `double`, `float`, `short`, `boolean`, `character` - that&#39;s all the primitives, hardcoded in the language).. or an address.\r\n\r\nWhenever you call a method, you make a _copy_ of your postit (postits are small and you have plenty) and hand the copy to the method. When the method is done, it tosses those postits in the trash.\r\n\r\nLet&#39;s try some stuff. Let&#39;s say bears have a `setName` method.\r\n\r\n```\r\nBear bear1 = new Bear();\r\nBear bear2 = bear1;\r\nbear1.setName(&quot;Bruno&quot;);\r\nSystem.out.println(bear2.getName());\r\n```\r\n\r\nThis will print Bruno! - we have 2 postits, both with the same address on it. There is only one bear.\r\n\r\n---\r\n\r\n```\r\nBear bear = new Bear();\r\nbear.setName(&quot;Bruno&quot;);\r\ntest(bear);\r\nSystem.out.println(bear.getName());\r\n\r\npublic void test(Bear bear) {\r\n  bear.setName(&quot;Brenda&quot;);\r\n}\r\n```\r\n\r\nThis will print &quot;Brenda&quot;. We made a new bear, then we have a post-it with the address to this bear. Then we make a copy of this postit, hand it to the test method. The method then follows the address on the post it (`.` is java for: Follow (&quot;Dereference&quot; is the official term) and tells the bear it finds there what its name is.\r\n\r\n---\r\n\r\n```\r\nprivate static final Bear brenda = new Bear(&quot;brenda&quot;);\r\n\r\n...\r\n\r\nBear bear = new Bear();\r\nbear1.setName(&quot;Bruno&quot;);\r\ntest(bear);\r\nSystem.out.println(bear1.getName());\r\n\r\npublic void test(Bear bear) {\r\n  bear = brenda;\r\n}\r\n```\r\n\r\nThis prints Bruno! You may have expected Brenda. Remember, `=` in java is: &quot;Wipe out your postit and copy over the address of this postit&quot;.\r\n\r\nThe main code hands a copy of a postit to the test method. This test method then wipes this postit out, writes the address of another bear on it, and then tosses the note in the trash. The `test` method does nothing useful here.\r\n\r\n---\r\n\r\nArrayLists are lists of postits. Not lists of bears - that would require an entire zoo, much too unwieldy.\r\n\r\n```\r\nBear bear = new Bear();\r\nList&lt;Bear&gt; bears = new ArrayList&lt;Bear&gt;();\r\nbears.add(bear);\r\ntest(bears);\r\nSystem.out.println(bears.get(0));\r\n\r\npublic void test(List&lt;Bear&gt; bears) {\r\n  bears.clear();\r\n  bears.add(brenda);\r\n}\r\n```\r\n\r\nThe above code&#39;s test method removes the postit with the first bear&#39;s address on it from the list, then adds a new postit with brenda&#39;s address on it. The main code then gets a copy of the first postit from the list. Which will have the address of brenda. (Why a copy? Everything is a copy, all the time. Java is copying millions of postits. From a CPU perspective it&#39;s just copying a single number around).\r\n\r\n---\r\n\r\n```\r\nBear bear = new Bear(&quot;bruno&quot;);\r\nbear = new Bear(&quot;brenda&quot;);\r\n```\r\n\r\nThis makes a new bear, writes on your one post-it note its address.\r\n\r\nIt then makes another bear (we now have 2 bears). It then scratches out the address to bruno and writes the address to brenda on it.\r\n\r\nWhat happens to bruno? Bruno is lost in the woods. There are now zero post-its in the world with Bruno&#39;s address on it, so this information (where bruno lives) is lost. Bruno is still around, but we don&#39;t know where. The forest is vast, it doesn&#39;t matter, we&#39;ll never run into him.\r\n\r\nEventually, the garbage collector will get rid of bruno entirely. Poor bruno.\r\n","title":"For the code given what will be stored in ArrayList? What are shallow pointers in Java?","body":"<blockquote>\n<p><code>Bear momma = new Bear();</code></p>\n</blockquote>\n<p>This code is shorthand for this:</p>\n<pre><code>Bear momma; [1]\nnew Bear(); [2]\nmomma = that thing; [3]\n</code></pre>\n<p>The first line creates a new variable, and names it momma. In java, <strong>all</strong> variables are tiny. Think post-it note with a title. So, this grabs a post-it note, writes a title on it, and leaves it blank.</p>\n<p>The second line makes an entire bear, which is considerably larger than a post-it note. Remember that: If you want a new bear, <code>new Bear()</code> needs to be executed by you or somebody else's code.</p>\n<p>The third line simply writes the <strong>address</strong> of where the bear lives on your post-it.</p>\n<p>Post-its are tiny; they have enough room for a primitive (<code>int</code>, <code>long</code>, <code>byte</code>, <code>double</code>, <code>float</code>, <code>short</code>, <code>boolean</code>, <code>character</code> - that's all the primitives, hardcoded in the language).. or an address.</p>\n<p>Whenever you call a method, you make a <em>copy</em> of your postit (postits are small and you have plenty) and hand the copy to the method. When the method is done, it tosses those postits in the trash.</p>\n<p>Let's try some stuff. Let's say bears have a <code>setName</code> method.</p>\n<pre><code>Bear bear1 = new Bear();\nBear bear2 = bear1;\nbear1.setName(&quot;Bruno&quot;);\nSystem.out.println(bear2.getName());\n</code></pre>\n<p>This will print Bruno! - we have 2 postits, both with the same address on it. There is only one bear.</p>\n<hr />\n<pre><code>Bear bear = new Bear();\nbear.setName(&quot;Bruno&quot;);\ntest(bear);\nSystem.out.println(bear.getName());\n\npublic void test(Bear bear) {\n  bear.setName(&quot;Brenda&quot;);\n}\n</code></pre>\n<p>This will print &quot;Brenda&quot;. We made a new bear, then we have a post-it with the address to this bear. Then we make a copy of this postit, hand it to the test method. The method then follows the address on the post it (<code>.</code> is java for: Follow (&quot;Dereference&quot; is the official term) and tells the bear it finds there what its name is.</p>\n<hr />\n<pre><code>private static final Bear brenda = new Bear(&quot;brenda&quot;);\n\n...\n\nBear bear = new Bear();\nbear1.setName(&quot;Bruno&quot;);\ntest(bear);\nSystem.out.println(bear1.getName());\n\npublic void test(Bear bear) {\n  bear = brenda;\n}\n</code></pre>\n<p>This prints Bruno! You may have expected Brenda. Remember, <code>=</code> in java is: &quot;Wipe out your postit and copy over the address of this postit&quot;.</p>\n<p>The main code hands a copy of a postit to the test method. This test method then wipes this postit out, writes the address of another bear on it, and then tosses the note in the trash. The <code>test</code> method does nothing useful here.</p>\n<hr />\n<p>ArrayLists are lists of postits. Not lists of bears - that would require an entire zoo, much too unwieldy.</p>\n<pre><code>Bear bear = new Bear();\nList&lt;Bear&gt; bears = new ArrayList&lt;Bear&gt;();\nbears.add(bear);\ntest(bears);\nSystem.out.println(bears.get(0));\n\npublic void test(List&lt;Bear&gt; bears) {\n  bears.clear();\n  bears.add(brenda);\n}\n</code></pre>\n<p>The above code's test method removes the postit with the first bear's address on it from the list, then adds a new postit with brenda's address on it. The main code then gets a copy of the first postit from the list. Which will have the address of brenda. (Why a copy? Everything is a copy, all the time. Java is copying millions of postits. From a CPU perspective it's just copying a single number around).</p>\n<hr />\n<pre><code>Bear bear = new Bear(&quot;bruno&quot;);\nbear = new Bear(&quot;brenda&quot;);\n</code></pre>\n<p>This makes a new bear, writes on your one post-it note its address.</p>\n<p>It then makes another bear (we now have 2 bears). It then scratches out the address to bruno and writes the address to brenda on it.</p>\n<p>What happens to bruno? Bruno is lost in the woods. There are now zero post-its in the world with Bruno's address on it, so this information (where bruno lives) is lost. Bruno is still around, but we don't know where. The forest is vast, it doesn't matter, we'll never run into him.</p>\n<p>Eventually, the garbage collector will get rid of bruno entirely. Poor bruno.</p>\n"}],"owner":{"display_name":"user17788823"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70742590,"answer_count":1,"score":-1,"last_activity_date":1642432836,"creation_date":1642425280,"question_id":70741982,"body_markdown":"Suppose we have three Bear objects: momma, poppa, and baby. We create a &quot;bears&quot; ArrayList and add pointers to the three bears to the ArrayList.\r\n\r\n```\r\n// Create three bears \r\nBear momma = new Bear();\r\nBear poppa = new Bear(); \r\nBear baby = new Bear(); \r\n \r\n// Create an ArrayList, add the three Bear pointers \r\nArrayList bears = new ArrayList();\r\nbears.add(momma); \r\nbears.add(poppa);\r\nbears.add(baby);\r\n```\r\n\r\nThe above code produces the memory structure shown in the document.\r\n\r\nNotice that the line bears.add(momma) does not add a copy of the momma Bear object to the ArrayList. Instead, it just adds a pointer to the momma Bear object to the ArrayList. It is common in Java to have such &quot;shallow&quot; pointers to an object – there is one object with many pointers spread around pointing to it.\r\n\r\nFor memory structure please refer to the diagram on page 3 of the document given below:\r\n[Document][1]\r\n\r\n\r\n  [1]: https://web.stanford.edu/class/archive/cs/cs108/cs108.1082/106a-java-handouts/HO49ArrayList.pdf\r\n\r\nMy doubts,\r\n\r\n1)Can someone explain what the above paragraph is trying to say?\r\n\r\n2) What is the meaning of shallow pointer in java as stated in the document?\r\n\r\n3) what is exactly stored in the ArrayList. In the image showing the structure, it is shown that there are two pointers to each element in ArrayList.\r\n\r\nFrom my knowledge, ArrayLists can only store reference variables to objects. However, what is the pointer that points from inside the blocks in the ArrayList.\r\n\r\nWhat is it that is stored in ArrayLists?\r\n","title":"For the code given what will be stored in ArrayList? What are shallow pointers in Java?","body":"<p>Suppose we have three Bear objects: momma, poppa, and baby. We create a &quot;bears&quot; ArrayList and add pointers to the three bears to the ArrayList.</p>\n<pre><code>// Create three bears \nBear momma = new Bear();\nBear poppa = new Bear(); \nBear baby = new Bear(); \n \n// Create an ArrayList, add the three Bear pointers \nArrayList bears = new ArrayList();\nbears.add(momma); \nbears.add(poppa);\nbears.add(baby);\n</code></pre>\n<p>The above code produces the memory structure shown in the document.</p>\n<p>Notice that the line bears.add(momma) does not add a copy of the momma Bear object to the ArrayList. Instead, it just adds a pointer to the momma Bear object to the ArrayList. It is common in Java to have such &quot;shallow&quot; pointers to an object – there is one object with many pointers spread around pointing to it.</p>\n<p>For memory structure please refer to the diagram on page 3 of the document given below:\n<a href=\"https://web.stanford.edu/class/archive/cs/cs108/cs108.1082/106a-java-handouts/HO49ArrayList.pdf\" rel=\"nofollow noreferrer\">Document</a></p>\n<p>My doubts,</p>\n<p>1)Can someone explain what the above paragraph is trying to say?</p>\n<ol start=\"2\">\n<li><p>What is the meaning of shallow pointer in java as stated in the document?</p>\n</li>\n<li><p>what is exactly stored in the ArrayList. In the image showing the structure, it is shown that there are two pointers to each element in ArrayList.</p>\n</li>\n</ol>\n<p>From my knowledge, ArrayLists can only store reference variables to objects. However, what is the pointer that points from inside the blocks in the ArrayList.</p>\n<p>What is it that is stored in ArrayLists?</p>\n"},{"tags":["java","list","linked-list","nodes","dynamic-data"],"answers":[{"tags":[],"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642420499,"creation_date":1642420499,"answer_id":70740939,"question_id":70740913,"body_markdown":"you need a Null check at\r\n\r\n\r\n    while (c.compareTo(n.data) &lt; 0) {\r\n                n = n.next;\r\n    }\r\n\r\nThis must be\r\n\r\n    while (n != null &amp;&amp; c.compareTo(n.data) &lt; 0) {\r\n                n = n.next;\r\n    }\r\n\r\n\r\nThis would still fail at the next line, as the handling is missing. In case you hit the end of list, you need to figure out where to insert the new node, after creating it.","title":"How can I add elements into a linked list alphabetically?","body":"<p>you need a Null check at</p>\n<pre><code>while (c.compareTo(n.data) &lt; 0) {\n            n = n.next;\n}\n</code></pre>\n<p>This must be</p>\n<pre><code>while (n != null &amp;&amp; c.compareTo(n.data) &lt; 0) {\n            n = n.next;\n}\n</code></pre>\n<p>This would still fail at the next line, as the handling is missing. In case you hit the end of list, you need to figure out where to insert the new node, after creating it.</p>\n"}],"owner":{"account_id":20028751,"reputation":83,"user_id":17944655,"display_name":"Miles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642432721,"creation_date":1642420329,"question_id":70740913,"body_markdown":"I&#39;m trying to add nodes of a `Car` object into a linked list, but instead of sorting the input and then creating the list, I want to insert the inputs to the correct spot while they are being taken.\r\n\r\nI&#39;ve tried this using this method but there&#39;s a very strange bug that I am unable to resolve.\r\n\r\nHere&#39;s my Car class with the `compareTo` method I&#39;m using for this:\r\n\r\n```\r\npublic class Car implements Comparable&lt;Car&gt;{\r\n    String ID;\r\n    int regYear;\r\n    public Car(String id, int reg){\r\n        ID = id;\r\n        regYear = reg;\r\n    }\r\n    public int compareTo(Car c2){\r\n        return ID.compareTo(c2.ID);\r\n    }\r\n    public String toString(){\r\n        return &quot;ID: &quot; + ID + &quot;, Reg Year&quot; + regYear;\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s the linked list class:\r\n```\r\npublic class MyLinkedList {\r\n\r\n    Node start;\r\n\r\n    public void add(Car c) {\r\n        Node node = new Node(c);\r\n        if (start == null) {\r\n            start = node;\r\n        } else {\r\n            Node n = start;\r\n\r\n            while (c.compareTo(n.data) &lt; 0) {\r\n                n = n.next;\r\n            }\r\n            n.next = node;\r\n        }\r\n    }\r\n```\r\n\r\nNow if I add two unsorted elements, let&#39;s say one with ID `B` first and one with ID `A` second, I get this: \r\n\r\n&gt;    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot read field &quot;data&quot; because &quot;n&quot; is null\r\nreferring to the n.data in the while loop.\r\n\r\nIf I add two already sorted elements, ID `A` first and ID `B` second, everything&#39;s just fine.\r\n\r\nIf I add elements `A C B D`, it only adds `A` and `D` to the list and ignores `C` and `B` since they are unsorted.\r\n\r\nWhat am I missing?","title":"How can I add elements into a linked list alphabetically?","body":"<p>I'm trying to add nodes of a <code>Car</code> object into a linked list, but instead of sorting the input and then creating the list, I want to insert the inputs to the correct spot while they are being taken.</p>\n<p>I've tried this using this method but there's a very strange bug that I am unable to resolve.</p>\n<p>Here's my Car class with the <code>compareTo</code> method I'm using for this:</p>\n<pre><code>public class Car implements Comparable&lt;Car&gt;{\n    String ID;\n    int regYear;\n    public Car(String id, int reg){\n        ID = id;\n        regYear = reg;\n    }\n    public int compareTo(Car c2){\n        return ID.compareTo(c2.ID);\n    }\n    public String toString(){\n        return &quot;ID: &quot; + ID + &quot;, Reg Year&quot; + regYear;\n    }\n}\n</code></pre>\n<p>Here's the linked list class:</p>\n<pre><code>public class MyLinkedList {\n\n    Node start;\n\n    public void add(Car c) {\n        Node node = new Node(c);\n        if (start == null) {\n            start = node;\n        } else {\n            Node n = start;\n\n            while (c.compareTo(n.data) &lt; 0) {\n                n = n.next;\n            }\n            n.next = node;\n        }\n    }\n</code></pre>\n<p>Now if I add two unsorted elements, let's say one with ID <code>B</code> first and one with ID <code>A</code> second, I get this:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot read field &quot;data&quot; because &quot;n&quot; is null\nreferring to the n.data in the while loop.</p>\n</blockquote>\n<p>If I add two already sorted elements, ID <code>A</code> first and ID <code>B</code> second, everything's just fine.</p>\n<p>If I add elements <code>A C B D</code>, it only adds <code>A</code> and <code>D</code> to the list and ignores <code>C</code> and <code>B</code> since they are unsorted.</p>\n<p>What am I missing?</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-config","spring-cloud-config-server"],"answers":[{"tags":[],"owner":{"account_id":7193224,"reputation":634,"user_id":5492826,"accept_rate":25,"display_name":"emrekgn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642432696,"creation_date":1642431119,"answer_id":70743269,"question_id":70740341,"body_markdown":"OK, I finally found it! \\\r\nApparently, we need to explicitly specify the subdirectories with an *application placeholder* in the `spring.cloud.config.server.native.search-locations` property which is IMO vaguely described [here in docs](https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_server.html#_file_system_backend):\r\n\r\n&gt; The search locations can contain placeholders for {application}, {profile}, and {label}. In this way, you can segregate the directories in the path and choose a strategy that makes sense for you (such as subdirectory per application or subdirectory per profile).\r\n\r\nSo, in my case, I had to define the `search-locations` as this:\r\n```yml\r\nspring:\r\n  cloud:\r\n    config:\r\n      server:\r\n        native:\r\n         search-locations:\r\n          - /path/to/config/repo\r\n          - /path/to/config/repo/{application}\r\n```\r\n\r\nNow it can properly serve both *application-specific and profile-specific* config properties.\r\n\r\nAlthough this suffices for my case, I still have no clue why the file-based and the git-based approaches differ so much (i.e. why should we explicitly set subdirectories for application-specific configs in a file-based approach whereas it can automatically serve them in the git-based approach?)","title":"Spring Cloud Config Server does not serve application-specific properties in native mode","body":"<p>OK, I finally found it! <br />\nApparently, we need to explicitly specify the subdirectories with an <em>application placeholder</em> in the <code>spring.cloud.config.server.native.search-locations</code> property which is IMO vaguely described <a href=\"https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_server.html#_file_system_backend\" rel=\"nofollow noreferrer\">here in docs</a>:</p>\n<blockquote>\n<p>The search locations can contain placeholders for {application}, {profile}, and {label}. In this way, you can segregate the directories in the path and choose a strategy that makes sense for you (such as subdirectory per application or subdirectory per profile).</p>\n</blockquote>\n<p>So, in my case, I had to define the <code>search-locations</code> as this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    config:\n      server:\n        native:\n         search-locations:\n          - /path/to/config/repo\n          - /path/to/config/repo/{application}\n</code></pre>\n<p>Now it can properly serve both <em>application-specific and profile-specific</em> config properties.</p>\n<p>Although this suffices for my case, I still have no clue why the file-based and the git-based approaches differ so much (i.e. why should we explicitly set subdirectories for application-specific configs in a file-based approach whereas it can automatically serve them in the git-based approach?)</p>\n"}],"owner":{"account_id":7193224,"reputation":634,"user_id":5492826,"accept_rate":25,"display_name":"emrekgn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70743269,"answer_count":1,"score":0,"last_activity_date":1642432696,"creation_date":1642417699,"question_id":70740341,"body_markdown":"I have a Spring Cloud Config Server v3.0.5 which serves configuration properties from a Git repository like this:\r\n\r\n```bash\r\n|\r\n|-- foo-service/\r\n|   |-- application.yml\r\n|-- bar-service/\r\n|   |-- application.yml\r\n|-- application-common.yml\r\n|-- application-kafka.yml\r\n|-- ...\r\n```\r\n\r\nAs you can see, there is a sub-directory for each microservice that contains application-specific configurations and some common configurations in the root directory that we can fetch by profiles (common, kafka etc.)\r\n\r\nSo, for example, we can fetch *application-specific and/or profile-specific config properties* like this: \r\n```bash\r\n# Successfully returns application-specific properties\r\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application.yml\r\n# Successfully returns application-specific + common + kafka properties\r\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application,common,kafka.yml\r\n```\r\n\r\nBut, during development, we&#39;d like to use a native file-based repository so that we don&#39;t need to commit every config change and test it locally easily.\r\n\r\nSo, in the config server, I&#39;ve set active profiles to `native` and also set `spring.cloud.config.server.native.search-locations` to the same repository path.\r\n\r\nBut when I try to fetch application-specific configurations (i.e. config files in sub-directories), it returns empty:\r\n\r\n```bash\r\n# This returns empty response:\r\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application.yml\r\n{}\r\n\r\n# This returns only profile-specific configs but **omits** foo-service applcations configs:\r\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application,common,kafka.yml\r\n...\r\n```\r\n\r\nWhat am I missing here? Why can&#39;t it also return application-specific properties? Do I have to set yet another configuration for the config server?\r\n\r\nAny help is appreciated. Thanks.","title":"Spring Cloud Config Server does not serve application-specific properties in native mode","body":"<p>I have a Spring Cloud Config Server v3.0.5 which serves configuration properties from a Git repository like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>|\n|-- foo-service/\n|   |-- application.yml\n|-- bar-service/\n|   |-- application.yml\n|-- application-common.yml\n|-- application-kafka.yml\n|-- ...\n</code></pre>\n<p>As you can see, there is a sub-directory for each microservice that contains application-specific configurations and some common configurations in the root directory that we can fetch by profiles (common, kafka etc.)</p>\n<p>So, for example, we can fetch <em>application-specific and/or profile-specific config properties</em> like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># Successfully returns application-specific properties\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application.yml\n# Successfully returns application-specific + common + kafka properties\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application,common,kafka.yml\n</code></pre>\n<p>But, during development, we'd like to use a native file-based repository so that we don't need to commit every config change and test it locally easily.</p>\n<p>So, in the config server, I've set active profiles to <code>native</code> and also set <code>spring.cloud.config.server.native.search-locations</code> to the same repository path.</p>\n<p>But when I try to fetch application-specific configurations (i.e. config files in sub-directories), it returns empty:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># This returns empty response:\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application.yml\n{}\n\n# This returns only profile-specific configs but **omits** foo-service applcations configs:\ncurl http://&lt;CONFIG_SERVICE_URL&gt;/foo-service-application,common,kafka.yml\n...\n</code></pre>\n<p>What am I missing here? Why can't it also return application-specific properties? Do I have to set yet another configuration for the config server?</p>\n<p>Any help is appreciated. Thanks.</p>\n"},{"tags":["java","if-statement","flow-control"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1642427834,"post_id":70742520,"comment_id":125061071,"body_markdown":"you only initialize y in conditional blocks. your compiler will not go and check all your conditions to see if all scenario&#39;s are covered.","body":"you only initialize y in conditional blocks. your compiler will not go and check all your conditions to see if all scenario&#39;s are covered."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1642427867,"post_id":70742520,"comment_id":125061091,"body_markdown":"Convert that series of `if`s to `if-else if-else`","body":"Convert that series of <code>if</code>s to <code>if-else if-else</code>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1642427897,"post_id":70742520,"comment_id":125061110,"body_markdown":"a simple `int y = 0;` solves the issue. The compiler does not know that your 3 `if`s cover all the cases.","body":"a simple <code>int y = 0;</code> solves the issue. The compiler does not know that your 3 <code>if</code>s cover all the cases."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1642428327,"post_id":70742520,"comment_id":125061325,"body_markdown":"The essential thing to understand: a compiler isn&#39;t a human. Albeit the compiler **could** figure out here that there is no path to the print *without* assigning a value to y ... well, it just doesn&#39;t.","body":"The essential thing to understand: a compiler isn&#39;t a human. Albeit the compiler <b>could</b> figure out here that there is no path to the print <i>without</i> assigning a value to y ... well, it just doesn&#39;t."},{"owner":{"account_id":23964060,"reputation":13,"user_id":17953803,"display_name":"vichakshana deegau"},"score":0,"creation_date":1642428828,"post_id":70742520,"comment_id":125061532,"body_markdown":"@FedericoklezCulloca, thanks. it worked in if , else if and else series. but I relly need to understand why it works in if, if else , else and doesn&#39;t work in if series. because all the scenarios were covered in if series.","body":"@FedericoklezCulloca, thanks. it worked in if , else if and else series. but I relly need to understand why it works in if, if else , else and doesn&#39;t work in if series. because all the scenarios were covered in if series."},{"owner":{"account_id":23964060,"reputation":13,"user_id":17953803,"display_name":"vichakshana deegau"},"score":0,"creation_date":1642429167,"post_id":70742520,"comment_id":125061687,"body_markdown":"@Stultuske thanks. but when I used if, else if, else it executed. if compiler doesn&#39;t check all of that cases, how did it execute?  That&#39;s what I&#39;m looking answers for.","body":"@Stultuske thanks. but when I used if, else if, else it executed. if compiler doesn&#39;t check all of that cases, how did it execute?  That&#39;s what I&#39;m looking answers for."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1642429234,"post_id":70742520,"comment_id":125061716,"body_markdown":"@vichakshanadeegau because that&#39;s how [the language is defined](https://docs.oracle.com/javase/specs/jls/se17/html/jls-16.html). In particular see example 16-2. The compiler does not consider the possible values of `num`, only the structure of your code.","body":"@vichakshanadeegau because that&#39;s how <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-16.html\" rel=\"nofollow noreferrer\">the language is defined</a>. In particular see example 16-2. The compiler does not consider the possible values of <code>num</code>, only the structure of your code."},{"owner":{"account_id":23964060,"reputation":13,"user_id":17953803,"display_name":"vichakshana deegau"},"score":0,"creation_date":1642429414,"post_id":70742520,"comment_id":125061777,"body_markdown":"@GhostCat, thanks, then how did it executed when using a if, else if and else?","body":"@GhostCat, thanks, then how did it executed when using a if, else if and else?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1642429648,"post_id":70742520,"comment_id":125061881,"body_markdown":"@vichakshanadeegau because of the difference between if and else. Now: if ( a &gt; x || a == x || a &lt; x ) -&gt; this also covers all the possibilities, but the compiler won&#39;t know. if ( a &gt; x ) { doOneThing(); } else { } -&gt; always covers everything","body":"@vichakshanadeegau because of the difference between if and else. Now: if ( a &gt; x || a == x || a &lt; x ) -&gt; this also covers all the possibilities, but the compiler won&#39;t know. if ( a &gt; x ) { doOneThing(); } else { } -&gt; always covers everything"},{"owner":{"account_id":23964060,"reputation":13,"user_id":17953803,"display_name":"vichakshana deegau"},"score":0,"creation_date":1642430248,"post_id":70742520,"comment_id":125062156,"body_markdown":"@Stultuske strait to the point.. :-) thanks it helped a lot.","body":"@Stultuske strait to the point.. :-) thanks it helped a lot."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642432129,"creation_date":1642428136,"answer_id":70742606,"question_id":70742520,"body_markdown":"Before accessing a variable it must be initialized.\r\n\r\nStatic and instance variables are initialed implicitly even if you are not providing a value while declaring them. But with local variables, it&#39;s not the case, they must be assigned explicitly before you can use them.\r\n\r\nYou are not using **else** statement and it&#39;s not obvious to the compile that you&#39;ve covered all possible cases.\r\n\r\nTry this instead, you&#39;ll see that now variable **y** changes accordingly to the user input:\r\n```\r\n        int y;\r\n        if (num &lt; 100) {\r\n            y=100;\r\n        }\r\n        else if (num &gt; 100) {\r\n            y=200;\r\n        }\r\n        else {\r\n            y=300;\r\n        }\r\n```","title":"Compiler thinks variable is not assigned, but if statements cover all values","body":"<p>Before accessing a variable it must be initialized.</p>\n<p>Static and instance variables are initialed implicitly even if you are not providing a value while declaring them. But with local variables, it's not the case, they must be assigned explicitly before you can use them.</p>\n<p>You are not using <strong>else</strong> statement and it's not obvious to the compile that you've covered all possible cases.</p>\n<p>Try this instead, you'll see that now variable <strong>y</strong> changes accordingly to the user input:</p>\n<pre><code>        int y;\n        if (num &lt; 100) {\n            y=100;\n        }\n        else if (num &gt; 100) {\n            y=200;\n        }\n        else {\n            y=300;\n        }\n</code></pre>\n"}],"owner":{"account_id":23964060,"reputation":13,"user_id":17953803,"display_name":"vichakshana deegau"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1642428219,"accepted_answer_id":70742606,"answer_count":1,"score":0,"last_activity_date":1642432129,"creation_date":1642427740,"question_id":70742520,"body_markdown":"In this code there is a compile time error. \r\n\r\n&gt; &quot;Example.java:17: error: variable y might not have been initialized&quot;. \r\n\r\nCan anyone explain what&#39;s the reason for this error and how to fix it? \r\n\r\n    import java.util.*;\r\n    class Example{\r\n      public static void main (String args[]){\r\n        Scanner input=new Scanner(System.in);\r\n        System.out.println(&quot;Input an integer : &quot;);\r\n        int num=input.nextInt();\r\n        int y;\r\n        if(num&gt;100){\r\n          y=200;\r\n        }\r\n        if(num&lt;100){\r\n          y=200;\r\n        }\r\n        if(num==100){\r\n          y=200;\r\n        }\r\n        System.out.println(y);\r\n        \r\n      }\r\n    }\r\n\r\n","title":"Compiler thinks variable is not assigned, but if statements cover all values","body":"<p>In this code there is a compile time error.</p>\n<blockquote>\n<p>&quot;Example.java:17: error: variable y might not have been initialized&quot;.</p>\n</blockquote>\n<p>Can anyone explain what's the reason for this error and how to fix it?</p>\n<pre><code>import java.util.*;\nclass Example{\n  public static void main (String args[]){\n    Scanner input=new Scanner(System.in);\n    System.out.println(&quot;Input an integer : &quot;);\n    int num=input.nextInt();\n    int y;\n    if(num&gt;100){\n      y=200;\n    }\n    if(num&lt;100){\n      y=200;\n    }\n    if(num==100){\n      y=200;\n    }\n    System.out.println(y);\n    \n  }\n}\n</code></pre>\n"},{"tags":["java","compression","gzip"],"answers":[{"tags":[],"owner":{"account_id":3902605,"reputation":6480,"user_id":3230038,"accept_rate":68,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1399889524,"creation_date":1399889524,"answer_id":23606319,"question_id":23606047,"body_markdown":"your missing code will be something like\r\n\r\n    byte[] buffer = new byte[1024];\r\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n    \r\n    int len;\r\n    while ((len = gzipper.read(buffer)) &gt; 0) {\r\n        out.write(buffer, 0, len);\r\n    }\r\n    \r\n    gzipper.close();\r\n    out.close();\r\n    return out.toByteArray();\r\n\r\n","title":"Decompressing a byte[] using GzipInputStream","body":"<p>your missing code will be something like</p>\n\n<pre><code>byte[] buffer = new byte[1024];\nByteArrayOutputStream out = new ByteArrayOutputStream();\n\nint len;\nwhile ((len = gzipper.read(buffer)) &gt; 0) {\n    out.write(buffer, 0, len);\n}\n\ngzipper.close();\nout.close();\nreturn out.toByteArray();\n</code></pre>\n"}],"owner":{"account_id":423386,"reputation":3269,"user_id":802742,"accept_rate":84,"display_name":"Joshua Kissoon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12196,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":23606319,"answer_count":1,"score":7,"last_activity_date":1642432028,"creation_date":1399888731,"question_id":23606047,"body_markdown":"I have a class that compresses and decompresses a byte array; \r\n\r\n\r\n    public class Compressor\r\n    {\r\n        public static byte[] compress(final byte[] input) throws IOException\r\n        {\r\n            try (ByteArrayOutputStream bout = new ByteArrayOutputStream();\r\n                    GZIPOutputStream gzipper = new GZIPOutputStream(bout))\r\n            {\r\n                gzipper.write(input, 0, input.length);\r\n                gzipper.close();\r\n\r\n                return bout.toByteArray();\r\n            }\r\n        }\r\n\r\n        public static byte[] decompress(final byte[] input) throws IOException\r\n        {\r\n            try (ByteArrayInputStream bin = new ByteArrayInputStream(input);\r\n                    GZIPInputStream gzipper = new GZIPInputStream(bin))\r\n            {\r\n                // Not sure where to go here\r\n            }\r\n        }\r\n    }\r\n\r\nHow do I decompress the input and return a byte array?\r\n\r\n**Note:** I don&#39;t want to do any conversion to strings because of character encoding issues.","title":"Decompressing a byte[] using GzipInputStream","body":"<p>I have a class that compresses and decompresses a byte array; </p>\n\n<pre><code>public class Compressor\n{\n    public static byte[] compress(final byte[] input) throws IOException\n    {\n        try (ByteArrayOutputStream bout = new ByteArrayOutputStream();\n                GZIPOutputStream gzipper = new GZIPOutputStream(bout))\n        {\n            gzipper.write(input, 0, input.length);\n            gzipper.close();\n\n            return bout.toByteArray();\n        }\n    }\n\n    public static byte[] decompress(final byte[] input) throws IOException\n    {\n        try (ByteArrayInputStream bin = new ByteArrayInputStream(input);\n                GZIPInputStream gzipper = new GZIPInputStream(bin))\n        {\n            // Not sure where to go here\n        }\n    }\n}\n</code></pre>\n\n<p>How do I decompress the input and return a byte array?</p>\n\n<p><strong>Note:</strong> I don't want to do any conversion to strings because of character encoding issues.</p>\n"},{"tags":["java","localization","numbers","string-formatting"],"comments":[{"owner":{"account_id":320193,"reputation":7715,"user_id":638344,"accept_rate":75,"display_name":"Chris"},"score":2,"creation_date":1354885896,"post_id":13763700,"comment_id":18919176,"body_markdown":"why don&#39;t you parse your &quot;String-Number&quot; into a number first and do the formatting with number formatter afterwards?","body":"why don&#39;t you parse your &quot;String-Number&quot; into a number first and do the formatting with number formatter afterwards?"},{"owner":{"account_id":281804,"reputation":438,"user_id":578319,"display_name":"wziska"},"score":0,"creation_date":1354886737,"post_id":13763700,"comment_id":18919555,"body_markdown":"My &quot;String-Number&quot; can be a string containing number, so I can&#39;t parse it to number.","body":"My &quot;String-Number&quot; can be a string containing number, so I can&#39;t parse it to number."}],"answers":[{"tags":[],"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1642431901,"creation_date":1354885976,"answer_id":13763815,"question_id":13763700,"body_markdown":"From the [documentation][1], you have to:\r\n\r\n - supply a locale (as you are doing in your example)\r\n - include the &#39;`,`&#39; flag to **show locale-specific grouping separators** \r\n\r\nSo your example would become:\r\n\r\n    String.format(Locale.GERMAN, &quot;%,d&quot;, 1234567890) \r\n\r\nNote the additional &#39;`,`&#39; flag before the &#39;d&#39;.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax","title":"java String.format: numbers with localization","body":"<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax\" rel=\"noreferrer\">documentation</a>, you have to:</p>\n<ul>\n<li>supply a locale (as you are doing in your example)</li>\n<li>include the '<code>,</code>' flag to <strong>show locale-specific grouping separators</strong></li>\n</ul>\n<p>So your example would become:</p>\n<pre><code>String.format(Locale.GERMAN, &quot;%,d&quot;, 1234567890) \n</code></pre>\n<p>Note the additional '<code>,</code>' flag before the 'd'.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1354886335,"creation_date":1354886335,"answer_id":13763905,"question_id":13763700,"body_markdown":"An alternative to `String.format()` is to use MessageFormat:\r\n\r\n    MessageFormat format = new MessageFormat(&quot;The number is {0, number}&quot;, Locale.GERMAN);\r\n    String s = format.format(new Object[] {number});","title":"java String.format: numbers with localization","body":"<p>An alternative to <code>String.format()</code> is to use MessageFormat:</p>\n\n<pre><code>MessageFormat format = new MessageFormat(\"The number is {0, number}\", Locale.GERMAN);\nString s = format.format(new Object[] {number});\n</code></pre>\n"}],"owner":{"account_id":281804,"reputation":438,"user_id":578319,"display_name":"wziska"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24259,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":13763815,"answer_count":2,"score":21,"last_activity_date":1642431959,"creation_date":1354885576,"question_id":13763700,"body_markdown":"Is it possible to localize numbers in `String.format` call the same way as `NumberFormat.format` does?\r\n\r\nI&#39;ve expected it simply to use\r\n\r\n    String.format(locale, &quot;%d&quot;, number)\r\n\r\nbut this doesn&#39;t return the same result as `NumberFormat`. For example:\r\n\r\n    String.format(Locale.GERMAN, &quot;%d&quot;, 1234567890) \r\n\r\ngives: &quot;1234567890&quot;, while \r\n\r\n    NumberFormat.getNumberInstance(Locale.GERMAN).format(1234567890)\r\n\r\ngives: &quot;1.234.567.890&quot;\r\n\r\nIf it can&#39;t be done, what&#39;s recommended way for localizing text including numbers?\r\n","title":"java String.format: numbers with localization","body":"<p>Is it possible to localize numbers in <code>String.format</code> call the same way as <code>NumberFormat.format</code> does?</p>\n<p>I've expected it simply to use</p>\n<pre><code>String.format(locale, &quot;%d&quot;, number)\n</code></pre>\n<p>but this doesn't return the same result as <code>NumberFormat</code>. For example:</p>\n<pre><code>String.format(Locale.GERMAN, &quot;%d&quot;, 1234567890) \n</code></pre>\n<p>gives: &quot;1234567890&quot;, while</p>\n<pre><code>NumberFormat.getNumberInstance(Locale.GERMAN).format(1234567890)\n</code></pre>\n<p>gives: &quot;1.234.567.890&quot;</p>\n<p>If it can't be done, what's recommended way for localizing text including numbers?</p>\n"},{"tags":["java","spring","spring-boot","type-conversion"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1642431704,"post_id":70743394,"comment_id":125062769,"body_markdown":"You cannot, you can only validate after conversions.","body":"You cannot, you can only validate after conversions."},{"owner":{"account_id":1709457,"reputation":956,"user_id":1567785,"accept_rate":62,"display_name":"Don_Quijote"},"score":0,"creation_date":1642431917,"post_id":70743394,"comment_id":125062855,"body_markdown":"But if I need to - do I need to put the validation to the converter?","body":"But if I need to - do I need to put the validation to the converter?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1642432035,"post_id":70743394,"comment_id":125062898,"body_markdown":"No because you simply cannot. Next to that you shouldn&#39;t mix concerns, a converter converts, not validates.","body":"No because you simply cannot. Next to that you shouldn&#39;t mix concerns, a converter converts, not validates."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1642432268,"post_id":70743394,"comment_id":125063018,"body_markdown":"`@Valid` is what you might put on incoming entities in your controller or at fields of the incoming entities.","body":"<code>@Valid</code> is what you might put on incoming entities in your controller or at fields of the incoming entities."}],"owner":{"account_id":1709457,"reputation":956,"user_id":1567785,"accept_rate":62,"display_name":"Don_Quijote"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642431579,"creation_date":1642431579,"question_id":70743394,"body_markdown":"I am using spring boot converter for REST controller but I need to validate data before converting it. \r\n\r\nI tried to put `@Valid` annotation to converter&#39;s `convert` method but got this:\r\n\r\n&gt; nested exception is javax.validation.ConstraintDeclarationException:\r\n&gt; HV000151: A method overriding another method must not redefine the\r\n&gt; parameter constraint configuration, but method\r\n&gt; MyCustomConverter#convert(String) redefines the configuration of\r\n&gt; Converter#convert(Object)\r\n\r\nWhat&#39;s the best way to implement this validation?","title":"Spring boot converter validation - were to put it and how?","body":"<p>I am using spring boot converter for REST controller but I need to validate data before converting it.</p>\n<p>I tried to put <code>@Valid</code> annotation to converter's <code>convert</code> method but got this:</p>\n<blockquote>\n<p>nested exception is javax.validation.ConstraintDeclarationException:\nHV000151: A method overriding another method must not redefine the\nparameter constraint configuration, but method\nMyCustomConverter#convert(String) redefines the configuration of\nConverter#convert(Object)</p>\n</blockquote>\n<p>What's the best way to implement this validation?</p>\n"},{"tags":["java","sockets","datainputstream","dataoutputstream"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1642431495,"post_id":70741523,"comment_id":125062695,"body_markdown":"You need to flush after sending the file, right now, likely the server still has a partial unflushed buffer, while the client is waiting for more data. As an aside, in your client, don&#39;t flush inside the loop, flush *after* the loop.","body":"You need to flush after sending the file, right now, likely the server still has a partial unflushed buffer, while the client is waiting for more data. As an aside, in your client, don&#39;t flush inside the loop, flush <i>after</i> the loop."}],"owner":{"account_id":14816440,"reputation":21,"user_id":10700302,"display_name":"Sven Nijkamp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642431459,"creation_date":1642423258,"question_id":70741523,"body_markdown":"I&#39;m trying to setup a server-client file transfer where one user sends a file to the server, and the server sends that file to another user (users in this case are instances of the Client.java class).\r\n\r\nFrom the first client to the server, everything goes as it should, but then the server should send a long, which is the file size, and then send the actual file. The client then should read that long as the file size, and then read and write the file, but with reading the file size something goes wrong. \r\n\r\nAnyone that can spot what goes wrong?\r\n\r\nClient class:\r\n```\r\nprivate void SEND() {\r\n    try {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Please enter the full path of the file:&quot;);\r\n        String path = scanner.nextLine();\r\n\r\n        LIST();\r\n        System.out.println(&quot;To who do you want to send the file? &quot;);\r\n        String receiver = scanner.nextLine();\r\n        message.setBody(receiver);\r\n\r\n        message.setHeader(&quot;SEND&quot;);\r\n\r\n        writer.println(message.getHeader() + &quot; &quot; + message.getUsername() + &quot; &quot; + message.getBody());\r\n\r\n        int bytes = 0;\r\n        File file = new File(path);\r\n        FileInputStream fileInputStream;\r\n        fileInputStream = new FileInputStream(file);\r\n\r\n        byte[] byteArray = new byte[(int) file.length()];\r\n        // send file size\r\n        dataOutputStream.writeLong(byteArray.length);\r\n        // break file into chunks\r\n        byte[] buffer = new byte[4 * 1024];\r\n        while ((bytes = fileInputStream.read(buffer)) != -1) {\r\n            dataOutputStream.write(buffer, 0, bytes);\r\n            dataOutputStream.flush();\r\n        }\r\n        fileInputStream.close();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n\r\npublic void RECEIVE() {\r\n    try {\r\n        long size = dataInputStream.readLong();\r\n        Scanner scanner = new Scanner(System.in);\r\n        char choice = scanner.next().charAt(0);\r\n\r\n        while (!(choice == &#39;y&#39;) &amp;&amp; !(choice == &#39;n&#39;)) {\r\n            System.out.println(&quot;incorrect option, please enter y/n&quot;);\r\n            choice = scanner.next().charAt(0);\r\n        }\r\n\r\n\r\n        if (choice == &#39;y&#39;) {\r\n            System.out.println(&quot;Downloading file...&quot;);\r\n            int bytes = 0;\r\n            FileOutputStream fileOutputStream = new FileOutputStream(FILE_STORE_PLACE);\r\n            System.out.println(size);\r\n            byte[] buffer = new byte[4 * 1024];\r\n            while (size &gt; 0 &amp;&amp; (bytes = dataInputStream.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {\r\n                fileOutputStream.write(buffer, 0, bytes);\r\n                size -= bytes;      // read upto file size\r\n            }\r\n            System.out.println(&quot;File received&quot;);\r\n            fileOutputStream.close();\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nServer class:\r\n```\r\n// User sends their file to the server, which then reads al its contents and puts them in a file\r\npublic void SEND(String[] messageSplit) {\r\n    try {\r\n        int bytes = 0;\r\n        long size = dataInputStream.readLong();     // read file size\r\n        System.out.println(size);\r\n        byte[] buffer = new byte[4 * 1024];\r\n\r\n        ClientHandler receiver = findConnectedUser(messageSplit[2]);\r\n\r\n        promptReceiver(receiver, size);\r\n        receiver.dataOutputStream.writeLong(size);\r\n        receiver.dataOutputStream.flush();\r\n        //write incoming data to the receiver\r\n        while (size &gt; 0 &amp;&amp; (bytes = dataInputStream.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {\r\n            receiver.dataOutputStream.write(buffer, 0, bytes);\r\n            size -= bytes;      // read upto file size\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n\r\npublic void promptReceiver(ClientHandler client, long size) {\r\n    client.writer.println(&quot;would like to send you a file, do you want to receive this file? (&quot; + size + &quot; bytes) (type y/n)&quot;);\r\n}\r\n\r\npublic ClientHandler findConnectedUser(String username) {\r\n    for (ClientHandler client : connectedUsers) {\r\n        if (client.getUsername().equals(username)) {\r\n            return client;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n```\r\n","title":"DataInputStream not getting the right value","body":"<p>I'm trying to setup a server-client file transfer where one user sends a file to the server, and the server sends that file to another user (users in this case are instances of the Client.java class).</p>\n<p>From the first client to the server, everything goes as it should, but then the server should send a long, which is the file size, and then send the actual file. The client then should read that long as the file size, and then read and write the file, but with reading the file size something goes wrong.</p>\n<p>Anyone that can spot what goes wrong?</p>\n<p>Client class:</p>\n<pre><code>private void SEND() {\n    try {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the full path of the file:&quot;);\n        String path = scanner.nextLine();\n\n        LIST();\n        System.out.println(&quot;To who do you want to send the file? &quot;);\n        String receiver = scanner.nextLine();\n        message.setBody(receiver);\n\n        message.setHeader(&quot;SEND&quot;);\n\n        writer.println(message.getHeader() + &quot; &quot; + message.getUsername() + &quot; &quot; + message.getBody());\n\n        int bytes = 0;\n        File file = new File(path);\n        FileInputStream fileInputStream;\n        fileInputStream = new FileInputStream(file);\n\n        byte[] byteArray = new byte[(int) file.length()];\n        // send file size\n        dataOutputStream.writeLong(byteArray.length);\n        // break file into chunks\n        byte[] buffer = new byte[4 * 1024];\n        while ((bytes = fileInputStream.read(buffer)) != -1) {\n            dataOutputStream.write(buffer, 0, bytes);\n            dataOutputStream.flush();\n        }\n        fileInputStream.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n\npublic void RECEIVE() {\n    try {\n        long size = dataInputStream.readLong();\n        Scanner scanner = new Scanner(System.in);\n        char choice = scanner.next().charAt(0);\n\n        while (!(choice == 'y') &amp;&amp; !(choice == 'n')) {\n            System.out.println(&quot;incorrect option, please enter y/n&quot;);\n            choice = scanner.next().charAt(0);\n        }\n\n\n        if (choice == 'y') {\n            System.out.println(&quot;Downloading file...&quot;);\n            int bytes = 0;\n            FileOutputStream fileOutputStream = new FileOutputStream(FILE_STORE_PLACE);\n            System.out.println(size);\n            byte[] buffer = new byte[4 * 1024];\n            while (size &gt; 0 &amp;&amp; (bytes = dataInputStream.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {\n                fileOutputStream.write(buffer, 0, bytes);\n                size -= bytes;      // read upto file size\n            }\n            System.out.println(&quot;File received&quot;);\n            fileOutputStream.close();\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Server class:</p>\n<pre><code>// User sends their file to the server, which then reads al its contents and puts them in a file\npublic void SEND(String[] messageSplit) {\n    try {\n        int bytes = 0;\n        long size = dataInputStream.readLong();     // read file size\n        System.out.println(size);\n        byte[] buffer = new byte[4 * 1024];\n\n        ClientHandler receiver = findConnectedUser(messageSplit[2]);\n\n        promptReceiver(receiver, size);\n        receiver.dataOutputStream.writeLong(size);\n        receiver.dataOutputStream.flush();\n        //write incoming data to the receiver\n        while (size &gt; 0 &amp;&amp; (bytes = dataInputStream.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {\n            receiver.dataOutputStream.write(buffer, 0, bytes);\n            size -= bytes;      // read upto file size\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n\npublic void promptReceiver(ClientHandler client, long size) {\n    client.writer.println(&quot;would like to send you a file, do you want to receive this file? (&quot; + size + &quot; bytes) (type y/n)&quot;);\n}\n\npublic ClientHandler findConnectedUser(String username) {\n    for (ClientHandler client : connectedUsers) {\n        if (client.getUsername().equals(username)) {\n            return client;\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","bluetooth","android-mediasession"],"owner":{"account_id":15287741,"reputation":143,"user_id":11030252,"display_name":"Viktor Pesic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":894,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1642431412,"creation_date":1642354285,"question_id":70732484,"body_markdown":"I am trying to read Bluetooth Headphone&#39;s buttons input and I successfully made it so the play button next button and back button works but volume up and down won&#39;t work.\r\nSo when I click play, it processed in onPlay(), but when I click next(hold volume up button) or back(hold volume down button) it is caught in onMediaButtonEvent()\r\nJust pressing volume up and down not working.\r\n\r\n     public class BluetoothListener extends Service {\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n    private MediaSessionCompat.Callback callback = new MediaSessionCompat.Callback()\r\n    {\r\n        @Override\r\n        public void onPlay() {\r\n            super.onPlay();\r\n            Toast.makeText(getApplication(),&quot;Play Button is pressed!&quot;,Toast.LENGTH_SHORT).show();\r\n            Log.d(&quot;RACKU&quot;,&quot;racku&quot;);\r\n        }\r\n\r\n\r\n\r\n        @Override\r\n        public boolean onMediaButtonEvent(Intent mediaButtonEvent) {\r\n            String intentAction = mediaButtonEvent.getAction();\r\n            if (Intent.ACTION_MEDIA_BUTTON.equals(intentAction))\r\n            {\r\n                KeyEvent event = mediaButtonEvent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);\r\n                if (event != null)\r\n                {\r\n\r\n\r\n                    int action = event.getAction();\r\n                    if (action == KeyEvent.ACTION_DOWN) {\r\n                        switch (event.getKeyCode()) {\r\n                            case KeyEvent.KEYCODE_MEDIA_FAST_FORWARD:\r\n                                Toast.makeText(getApplication(),&quot;Fast forward is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_MEDIA_NEXT:\r\n                                Toast.makeText(getApplication(),&quot;Next is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE:\r\n                                Toast.makeText(getApplication(),&quot;Play is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_MEDIA_PREVIOUS:\r\n                                Toast.makeText(getApplication(),&quot;Previous is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_MEDIA_REWIND:\r\n                                Toast.makeText(getApplication(),&quot;Rewind is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_MEDIA_STOP:\r\n                                Toast.makeText(getApplication(),&quot;Stop Button is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_VOLUME_UP:\r\n                                Toast.makeText(getApplication(),&quot;Volume up is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                            case KeyEvent.KEYCODE_VOLUME_DOWN:\r\n                                Toast.makeText(getApplication(),&quot;Volume down is pressed!&quot;, Toast.LENGTH_SHORT).show();\r\n                                return true;\r\n                        }\r\n                        return false;\r\n\r\n                    }\r\n                }\r\n            }\r\n            return super.onMediaButtonEvent(mediaButtonEvent);\r\n        }\r\n    };\r\n\r\n    private MediaSessionCompat mediaSession;\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        mediaSession = new MediaSessionCompat(this, &quot;MEDIA&quot;);\r\n        mediaSession.setCallback(callback);\r\n        mediaSession.setFlags(MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS | MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);\r\n        PlaybackStateCompat.Builder mStateBuilder = new PlaybackStateCompat.Builder()\r\n                .setActions(\r\n                        PlaybackStateCompat.ACTION_PLAY |\r\n                                PlaybackStateCompat.ACTION_PAUSE |\r\n                                PlaybackStateCompat.ACTION_SKIP_TO_PREVIOUS |\r\n                                PlaybackStateCompat.ACTION_SKIP_TO_NEXT |\r\n                                PlaybackStateCompat.ACTION_PLAY_PAUSE);\r\n\r\n        mediaSession.setPlaybackState(mStateBuilder.build());\r\n        mediaSession.setActive(true);\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        mediaSession.release();\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        MediaButtonReceiver.handleIntent(mediaSession, intent);\r\n        return super.onStartCommand(intent, flags, startId);\r\n    }\r\n     }\r\nAndroid manifest:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.hp&quot;&gt;\r\n    \r\n    \r\n    \r\n        &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.Hp&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n        \r\n    \r\n            &lt;receiver android:name=&quot;androidx.media.session.MediaButtonReceiver&quot; android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.media.VOLUME_CHANGED_ACTION&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n    \r\n            &lt;service android:name=&quot;BluetoothListener&quot; android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.media.VOLUME_CHANGED_ACTION&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/service&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\n","title":"Bluetooth headphone&#39;s buttons listener android, Play next and back works but volume up and down dont","body":"<p>I am trying to read Bluetooth Headphone's buttons input and I successfully made it so the play button next button and back button works but volume up and down won't work.\nSo when I click play, it processed in onPlay(), but when I click next(hold volume up button) or back(hold volume down button) it is caught in onMediaButtonEvent()\nJust pressing volume up and down not working.</p>\n<pre><code> public class BluetoothListener extends Service {\n\n@Nullable\n@Override\npublic IBinder onBind(Intent intent) {\n    return null;\n}\nprivate MediaSessionCompat.Callback callback = new MediaSessionCompat.Callback()\n{\n    @Override\n    public void onPlay() {\n        super.onPlay();\n        Toast.makeText(getApplication(),&quot;Play Button is pressed!&quot;,Toast.LENGTH_SHORT).show();\n        Log.d(&quot;RACKU&quot;,&quot;racku&quot;);\n    }\n\n\n\n    @Override\n    public boolean onMediaButtonEvent(Intent mediaButtonEvent) {\n        String intentAction = mediaButtonEvent.getAction();\n        if (Intent.ACTION_MEDIA_BUTTON.equals(intentAction))\n        {\n            KeyEvent event = mediaButtonEvent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);\n            if (event != null)\n            {\n\n\n                int action = event.getAction();\n                if (action == KeyEvent.ACTION_DOWN) {\n                    switch (event.getKeyCode()) {\n                        case KeyEvent.KEYCODE_MEDIA_FAST_FORWARD:\n                            Toast.makeText(getApplication(),&quot;Fast forward is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_MEDIA_NEXT:\n                            Toast.makeText(getApplication(),&quot;Next is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE:\n                            Toast.makeText(getApplication(),&quot;Play is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_MEDIA_PREVIOUS:\n                            Toast.makeText(getApplication(),&quot;Previous is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_MEDIA_REWIND:\n                            Toast.makeText(getApplication(),&quot;Rewind is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_MEDIA_STOP:\n                            Toast.makeText(getApplication(),&quot;Stop Button is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_VOLUME_UP:\n                            Toast.makeText(getApplication(),&quot;Volume up is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                        case KeyEvent.KEYCODE_VOLUME_DOWN:\n                            Toast.makeText(getApplication(),&quot;Volume down is pressed!&quot;, Toast.LENGTH_SHORT).show();\n                            return true;\n                    }\n                    return false;\n\n                }\n            }\n        }\n        return super.onMediaButtonEvent(mediaButtonEvent);\n    }\n};\n\nprivate MediaSessionCompat mediaSession;\n\n@Override\npublic void onCreate() {\n    mediaSession = new MediaSessionCompat(this, &quot;MEDIA&quot;);\n    mediaSession.setCallback(callback);\n    mediaSession.setFlags(MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS | MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);\n    PlaybackStateCompat.Builder mStateBuilder = new PlaybackStateCompat.Builder()\n            .setActions(\n                    PlaybackStateCompat.ACTION_PLAY |\n                            PlaybackStateCompat.ACTION_PAUSE |\n                            PlaybackStateCompat.ACTION_SKIP_TO_PREVIOUS |\n                            PlaybackStateCompat.ACTION_SKIP_TO_NEXT |\n                            PlaybackStateCompat.ACTION_PLAY_PAUSE);\n\n    mediaSession.setPlaybackState(mStateBuilder.build());\n    mediaSession.setActive(true);\n}\n\n@Override\npublic void onDestroy() {\n    mediaSession.release();\n}\n\n@Override\npublic int onStartCommand(Intent intent, int flags, int startId) {\n    MediaButtonReceiver.handleIntent(mediaSession, intent);\n    return super.onStartCommand(intent, flags, startId);\n}\n }\n</code></pre>\n<p>Android manifest:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.hp&quot;&gt;\n\n\n\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Hp&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n    \n\n        &lt;receiver android:name=&quot;androidx.media.session.MediaButtonReceiver&quot; android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\n                &lt;action android:name=&quot;android.media.VOLUME_CHANGED_ACTION&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n        &lt;service android:name=&quot;BluetoothListener&quot; android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\n                &lt;action android:name=&quot;android.media.VOLUME_CHANGED_ACTION&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","neo4j"],"owner":{"account_id":8343340,"reputation":11,"user_id":6267972,"display_name":"bipin yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642431353,"creation_date":1642159333,"question_id":70709831,"body_markdown":"*We are using neo4j and postgres together in our. application. There are so many use cases where we need to do transaction for neo4j and postgres atomically. So we have used the ChainedTransactionManager with both Jpa and neo4j transactionManager.*\r\n\r\nNeo4j Server version : 4.4.0\r\nBelow are the neo4j dependencies in the code:\r\n\r\n```\r\n    |         +--- org.neo4j:neo4j-ogm-core:3.2.16\r\n    |         |    +--- org.neo4j:neo4j-ogm-api:3.2.16\r\n    |         |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.9.9 -&gt; 2.11.2 (*)\r\n    |         |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.9.9 -&gt; 2.11.2 (*)\r\n    |         |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.9 -&gt; 2.11.2 (*)\r\n    |         |    |    \\--- org.slf4j:slf4j-api:1.7.25 -&gt; 1.7.30\r\n    |         |    +--- org.apache.commons:commons-lang3:3.8 -&gt; 3.7\r\n    |         |    \\--- io.github.classgraph:classgraph:4.8.86\r\n    |         +--- org.neo4j:neo4j-ogm-api:3.2.16 (*)\r\n    |         +--- org.neo4j:neo4j-ogm-bolt-driver:3.2.16\r\n    |         |    +--- org.neo4j:neo4j-ogm-api:3.2.16 (*)\r\n    |         |    \\--- org.neo4j.driver:neo4j-java-driver:4.0.2\r\n```\r\n\r\nWith this some time in our application we have seen below issue even though we are not doing neo4j transaction.\r\n\r\n``` java\r\n    import javax.persistence.EntityManagerFactory;\r\n    import org.neo4j.ogm.config.Configuration;\r\n    import org.neo4j.ogm.session.SessionFactory;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Primary;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.data.neo4j.repository.config.EnableNeo4jRepositories;\r\n    import org.springframework.data.neo4j.transaction.Neo4jTransactionManager;\r\n    import org.springframework.data.transaction.ChainedTransactionManager;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\n    @org.springframework.context.annotation.Configuration\r\n\r\n    @EnableNeo4jRepositories(basePackages = &quot;com.fb.logistics.network.masterdata.repository.graph&quot;)\r\n    @EnableJpaRepositories(basePackages = {&quot;com.fb.logistics.network.availability.repository&quot;,\r\n            &quot;com.fb.logistics.network.itinerary.repository&quot;,\r\n            &quot;com.fb.logistics.network.traversalpath.repository&quot;,\r\n            &quot;com.fb.logistics.network.common.repository&quot;,\r\n            &quot;com.fb.logistics.network.masterdata.repository.relational&quot;})\r\n    @EntityScan(basePackages = {&quot;com.fb.logistics.network&quot;})\r\n    @EnableTransactionManagement\r\n    public class DatabaseConfiguration {\r\n\r\n        @Value(&quot;${com.neo4j.uri}&quot;)\r\n        private String uri;\r\n\r\n        @Value(&quot;${com.neo4j.username}&quot;)\r\n        private String username;\r\n\r\n        @Value(&quot;${com.neo4j.password}&quot;)\r\n        private String password;\r\n\r\n        @Value(&quot;${com.neo4j.auth.enabled}&quot;)\r\n        private boolean authEnabled;\r\n\r\n        @Bean\r\n        public SessionFactory sessionFactory(Configuration configuration) {\r\n            return new SessionFactory(configuration, &quot;com.fb.logistics.network.masterdata&quot;);\r\n        }\r\n\r\n        @Bean\r\n        public Configuration configuration() {\r\n            Configuration.Builder builder = new Configuration.Builder();\r\n            builder.uri(uri);\r\n            if (authEnabled) {\r\n                builder.credentials(username, password);\r\n            }\r\n            return builder.build();\r\n        }\r\n\r\n\r\n        @Bean(&quot;neo4jTransactionManager&quot;)\r\n        public Neo4jTransactionManager transactionManager(SessionFactory sessionFactory) {\r\n            return new Neo4jTransactionManager(sessionFactory);\r\n        }\r\n\r\n        @Bean(&quot;jpaTransactionManager&quot;)\r\n        public JpaTransactionManager jpaTransactionManager(EntityManagerFactory entityManagerFactory) {\r\n            return new JpaTransactionManager(entityManagerFactory);\r\n        }\r\n\r\n        @Bean(name = &quot;transactionManager&quot;)\r\n        @Primary\r\n        public ChainedTransactionManager chainedTransactionManager(Neo4jTransactionManager neo4jTransactionManager,\r\n                                                                   JpaTransactionManager jpaTransactionManager) {\r\n            return new ChainedTransactionManager(neo4jTransactionManager, jpaTransactionManager);\r\n        }\r\n    }\r\n```\r\n\r\nBelow is the stacktrace which we have seen while doing some postgres transaction commit:\r\n\r\n```\r\n    org.springframework.transaction.HeuristicCompletionException: Heuristic completion: outcome state is mixed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Server at neo4j-core-xxx-69.test-iti-123.neo4j.io:7687 is no longer available; nested exception is org.neo4j.ogm.exception.TransactionException: Server at server-orch-0037.neo4j.io:7687 is no longer available\r\n    \tat org.springframework.data.transaction.ChainedTransactionManager.commit(ChainedTransactionManager.java:177)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n    \tat com.fb.logistics.network.itinerary.handler.cron.impl.ComputeItineraryCronHandler$$EnhancerBySpringCGLIB$$6d7bb9f1.execute(&lt;generated&gt;)\r\n    \tat com.fb.logistics.network.itinerary.service.impl.ItineraryGenerationServiceImpl.generateItineraries(ItineraryGenerationServiceImpl.java:58)\r\n    \tat com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.process(CiCronEventsTimeoutWrapper.java:117)\r\n    \tat com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.handleEvent(CiCronEventsTimeoutWrapper.java:112)\r\n    \tat com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.lambda$execute$0(CiCronEventsTimeoutWrapper.java:81)\r\n    \tat com.fb.logistics.event.AggregateEventConsumer.executeServiceLogic(AggregateEventConsumer.java:164)\r\n    \tat com.fb.logistics.event.AggregateEventConsumer.invokeIdempotentConsumer(AggregateEventConsumer.java:157)\r\n    \tat com.fb.logistics.event.AggregateEventConsumer.execute(AggregateEventConsumer.java:118)\r\n    \tat com.fb.logistics.event.AggregateEventConsumer.accept(AggregateEventConsumer.java:93)\r\n    \tat com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.execute(CiCronEventsTimeoutWrapper.java:85)\r\n    \tat com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.processEvent(CiCronEventsTimeoutWrapper.java:56)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.execute(MethodExecutionAction.java:116)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.executeWithArgs(MethodExecutionAction.java:93)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.execute(MethodExecutionAction.java:78)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.GenericCommand$1.execute(GenericCommand.java:48)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.AbstractHystrixCommand.process(AbstractHystrixCommand.java:145)\r\n    \tat com.netflix.hystrix.contrib.javanica.command.GenericCommand.run(GenericCommand.java:45)\r\n    \tat com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302)\r\n    \tat com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298)\r\n    \tat rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46)\r\n    \tat rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\r\n    \tat datadog.trace.instrumentation.rxjava.TracedOnSubscribe.call(TracedOnSubscribe.java:47)\r\n    \tat datadog.trace.instrumentation.rxjava.TracedOnSubscribe.call(TracedOnSubscribe.java:14)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\r\n    \tat rx.Observable.unsafeSubscribe(Observable.java:10327)\r\n    \tat rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51)\r\n    \tat rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35)\r\n    \tat rx.Observable.unsafeSubscribe(Observable.java:10327)\r\n    \tat rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41)\r\n    \tat rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\r\n    \tat rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\r\n    \tat rx.Observable.unsafeSubscribe(Observable.java:10327)\r\n    \tat rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100)\r\n    \tat com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56)\r\n    \tat com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47)\r\n    \tat com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69)\r\n    \tat rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available; nested exception is org.neo4j.ogm.exception.TransactionException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\r\n    \tat org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:140)\r\n    \tat org.springframework.data.neo4j.transaction.Neo4jTransactionManager.doCommit(Neo4jTransactionManager.java:305)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n    \tat org.springframework.data.transaction.MultiTransactionStatus.commit(MultiTransactionStatus.java:74)\r\n    \tat org.springframework.data.transaction.ChainedTransactionManager.commit(ChainedTransactionManager.java:150)\r\n    \t... 58 common frames omitted\r\n    Caused by: org.neo4j.ogm.exception.TransactionException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\r\n    \tat org.neo4j.ogm.drivers.bolt.transaction.BoltTransaction.commit(BoltTransaction.java:111)\r\n    \tat org.springframework.data.neo4j.transaction.Neo4jTransactionManager.doCommit(Neo4jTransactionManager.java:288)\r\n    \t... 62 common frames omitted\r\n    Caused by: org.neo4j.driver.exceptions.SessionExpiredException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\r\n    \tat org.neo4j.driver.internal.util.Futures.blockingGet(Futures.java:143)\r\n    \tat org.neo4j.driver.internal.InternalTransaction.commit(InternalTransaction.java:39)\r\n    \tat org.neo4j.ogm.drivers.bolt.transaction.BoltTransaction.commit(BoltTransaction.java:96)\r\n    \t... 63 common frames omitted\r\n    \tSuppressed: org.neo4j.driver.internal.util.ErrorUtil$InternalExceptionCause: null\r\n    \t\tat org.neo4j.driver.internal.handlers.RoutingResponseHandler.handledServiceUnavailableException(RoutingResponseHandler.java:109)\r\n    \t\tat org.neo4j.driver.internal.handlers.RoutingResponseHandler.handledError(RoutingResponseHandler.java:90)\r\n    \t\tat org.neo4j.driver.internal.handlers.RoutingResponseHandler.onFailure(RoutingResponseHandler.java:62)\r\n    \t\tat org.neo4j.driver.internal.async.inbound.InboundMessageDispatcher.handleChannelError(InboundMessageDispatcher.java:161)\r\n    \t\tat org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.fail(ChannelErrorHandler.java:99)\r\n    \t\tat org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.channelInactive(ChannelErrorHandler.java:77)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1106)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \t\tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \t\t... 1 common frames omitted\r\n    Caused by: org.neo4j.driver.exceptions.ServiceUnavailableException: Connection to the database terminated. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.\r\n    \tat org.neo4j.driver.internal.util.ErrorUtil.newConnectionTerminatedError(ErrorUtil.java:53)\r\n    \tat org.neo4j.driver.internal.util.ErrorUtil.newConnectionTerminatedError(ErrorUtil.java:46)\r\n    \tat org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.channelInactive(ChannelErrorHandler.java:76)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1106)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat org.neo4j.driver.internal.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \t... 1 common frames omitted\r\n\r\n```\r\n","title":"Heuristic completion: outcome state is mixed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException","body":"<p><em>We are using neo4j and postgres together in our. application. There are so many use cases where we need to do transaction for neo4j and postgres atomically. So we have used the ChainedTransactionManager with both Jpa and neo4j transactionManager.</em></p>\n<p>Neo4j Server version : 4.4.0\nBelow are the neo4j dependencies in the code:</p>\n<pre><code>    |         +--- org.neo4j:neo4j-ogm-core:3.2.16\n    |         |    +--- org.neo4j:neo4j-ogm-api:3.2.16\n    |         |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.9.9 -&gt; 2.11.2 (*)\n    |         |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.9.9 -&gt; 2.11.2 (*)\n    |         |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.9 -&gt; 2.11.2 (*)\n    |         |    |    \\--- org.slf4j:slf4j-api:1.7.25 -&gt; 1.7.30\n    |         |    +--- org.apache.commons:commons-lang3:3.8 -&gt; 3.7\n    |         |    \\--- io.github.classgraph:classgraph:4.8.86\n    |         +--- org.neo4j:neo4j-ogm-api:3.2.16 (*)\n    |         +--- org.neo4j:neo4j-ogm-bolt-driver:3.2.16\n    |         |    +--- org.neo4j:neo4j-ogm-api:3.2.16 (*)\n    |         |    \\--- org.neo4j.driver:neo4j-java-driver:4.0.2\n</code></pre>\n<p>With this some time in our application we have seen below issue even though we are not doing neo4j transaction.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import javax.persistence.EntityManagerFactory;\n    import org.neo4j.ogm.config.Configuration;\n    import org.neo4j.ogm.session.SessionFactory;\n    import org.springframework.beans.factory.annotation.Value;\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\n    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.Primary;\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n    import org.springframework.data.neo4j.repository.config.EnableNeo4jRepositories;\n    import org.springframework.data.neo4j.transaction.Neo4jTransactionManager;\n    import org.springframework.data.transaction.ChainedTransactionManager;\n    import org.springframework.orm.jpa.JpaTransactionManager;\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\n\n    @org.springframework.context.annotation.Configuration\n\n    @EnableNeo4jRepositories(basePackages = &quot;com.fb.logistics.network.masterdata.repository.graph&quot;)\n    @EnableJpaRepositories(basePackages = {&quot;com.fb.logistics.network.availability.repository&quot;,\n            &quot;com.fb.logistics.network.itinerary.repository&quot;,\n            &quot;com.fb.logistics.network.traversalpath.repository&quot;,\n            &quot;com.fb.logistics.network.common.repository&quot;,\n            &quot;com.fb.logistics.network.masterdata.repository.relational&quot;})\n    @EntityScan(basePackages = {&quot;com.fb.logistics.network&quot;})\n    @EnableTransactionManagement\n    public class DatabaseConfiguration {\n\n        @Value(&quot;${com.neo4j.uri}&quot;)\n        private String uri;\n\n        @Value(&quot;${com.neo4j.username}&quot;)\n        private String username;\n\n        @Value(&quot;${com.neo4j.password}&quot;)\n        private String password;\n\n        @Value(&quot;${com.neo4j.auth.enabled}&quot;)\n        private boolean authEnabled;\n\n        @Bean\n        public SessionFactory sessionFactory(Configuration configuration) {\n            return new SessionFactory(configuration, &quot;com.fb.logistics.network.masterdata&quot;);\n        }\n\n        @Bean\n        public Configuration configuration() {\n            Configuration.Builder builder = new Configuration.Builder();\n            builder.uri(uri);\n            if (authEnabled) {\n                builder.credentials(username, password);\n            }\n            return builder.build();\n        }\n\n\n        @Bean(&quot;neo4jTransactionManager&quot;)\n        public Neo4jTransactionManager transactionManager(SessionFactory sessionFactory) {\n            return new Neo4jTransactionManager(sessionFactory);\n        }\n\n        @Bean(&quot;jpaTransactionManager&quot;)\n        public JpaTransactionManager jpaTransactionManager(EntityManagerFactory entityManagerFactory) {\n            return new JpaTransactionManager(entityManagerFactory);\n        }\n\n        @Bean(name = &quot;transactionManager&quot;)\n        @Primary\n        public ChainedTransactionManager chainedTransactionManager(Neo4jTransactionManager neo4jTransactionManager,\n                                                                   JpaTransactionManager jpaTransactionManager) {\n            return new ChainedTransactionManager(neo4jTransactionManager, jpaTransactionManager);\n        }\n    }\n</code></pre>\n<p>Below is the stacktrace which we have seen while doing some postgres transaction commit:</p>\n<pre><code>    org.springframework.transaction.HeuristicCompletionException: Heuristic completion: outcome state is mixed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Server at neo4j-core-xxx-69.test-iti-123.neo4j.io:7687 is no longer available; nested exception is org.neo4j.ogm.exception.TransactionException: Server at server-orch-0037.neo4j.io:7687 is no longer available\n        at org.springframework.data.transaction.ChainedTransactionManager.commit(ChainedTransactionManager.java:177)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n        at com.fb.logistics.network.itinerary.handler.cron.impl.ComputeItineraryCronHandler$$EnhancerBySpringCGLIB$$6d7bb9f1.execute(&lt;generated&gt;)\n        at com.fb.logistics.network.itinerary.service.impl.ItineraryGenerationServiceImpl.generateItineraries(ItineraryGenerationServiceImpl.java:58)\n        at com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.process(CiCronEventsTimeoutWrapper.java:117)\n        at com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.handleEvent(CiCronEventsTimeoutWrapper.java:112)\n        at com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.lambda$execute$0(CiCronEventsTimeoutWrapper.java:81)\n        at com.fb.logistics.event.AggregateEventConsumer.executeServiceLogic(AggregateEventConsumer.java:164)\n        at com.fb.logistics.event.AggregateEventConsumer.invokeIdempotentConsumer(AggregateEventConsumer.java:157)\n        at com.fb.logistics.event.AggregateEventConsumer.execute(AggregateEventConsumer.java:118)\n        at com.fb.logistics.event.AggregateEventConsumer.accept(AggregateEventConsumer.java:93)\n        at com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.execute(CiCronEventsTimeoutWrapper.java:85)\n        at com.fb.logistics.network.itinerary.messaging.listener.CiCronEventsTimeoutWrapper.processEvent(CiCronEventsTimeoutWrapper.java:56)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.execute(MethodExecutionAction.java:116)\n        at com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.executeWithArgs(MethodExecutionAction.java:93)\n        at com.netflix.hystrix.contrib.javanica.command.MethodExecutionAction.execute(MethodExecutionAction.java:78)\n        at com.netflix.hystrix.contrib.javanica.command.GenericCommand$1.execute(GenericCommand.java:48)\n        at com.netflix.hystrix.contrib.javanica.command.AbstractHystrixCommand.process(AbstractHystrixCommand.java:145)\n        at com.netflix.hystrix.contrib.javanica.command.GenericCommand.run(GenericCommand.java:45)\n        at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302)\n        at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298)\n        at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46)\n        at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n        at datadog.trace.instrumentation.rxjava.TracedOnSubscribe.call(TracedOnSubscribe.java:47)\n        at datadog.trace.instrumentation.rxjava.TracedOnSubscribe.call(TracedOnSubscribe.java:14)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n        at rx.Observable.unsafeSubscribe(Observable.java:10327)\n        at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51)\n        at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35)\n        at rx.Observable.unsafeSubscribe(Observable.java:10327)\n        at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41)\n        at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48)\n        at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n        at rx.Observable.unsafeSubscribe(Observable.java:10327)\n        at rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100)\n        at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56)\n        at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47)\n        at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69)\n        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n    Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available; nested exception is org.neo4j.ogm.exception.TransactionException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\n        at org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:140)\n        at org.springframework.data.neo4j.transaction.Neo4jTransactionManager.doCommit(Neo4jTransactionManager.java:305)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n        at org.springframework.data.transaction.MultiTransactionStatus.commit(MultiTransactionStatus.java:74)\n        at org.springframework.data.transaction.ChainedTransactionManager.commit(ChainedTransactionManager.java:150)\n        ... 58 common frames omitted\n    Caused by: org.neo4j.ogm.exception.TransactionException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\n        at org.neo4j.ogm.drivers.bolt.transaction.BoltTransaction.commit(BoltTransaction.java:111)\n        at org.springframework.data.neo4j.transaction.Neo4jTransactionManager.doCommit(Neo4jTransactionManager.java:288)\n        ... 62 common frames omitted\n    Caused by: org.neo4j.driver.exceptions.SessionExpiredException: Server at neo4j-core-d8c94312-69.production-orch-0037.neo4j.io:7687 is no longer available\n        at org.neo4j.driver.internal.util.Futures.blockingGet(Futures.java:143)\n        at org.neo4j.driver.internal.InternalTransaction.commit(InternalTransaction.java:39)\n        at org.neo4j.ogm.drivers.bolt.transaction.BoltTransaction.commit(BoltTransaction.java:96)\n        ... 63 common frames omitted\n        Suppressed: org.neo4j.driver.internal.util.ErrorUtil$InternalExceptionCause: null\n            at org.neo4j.driver.internal.handlers.RoutingResponseHandler.handledServiceUnavailableException(RoutingResponseHandler.java:109)\n            at org.neo4j.driver.internal.handlers.RoutingResponseHandler.handledError(RoutingResponseHandler.java:90)\n            at org.neo4j.driver.internal.handlers.RoutingResponseHandler.onFailure(RoutingResponseHandler.java:62)\n            at org.neo4j.driver.internal.async.inbound.InboundMessageDispatcher.handleChannelError(InboundMessageDispatcher.java:161)\n            at org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.fail(ChannelErrorHandler.java:99)\n            at org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.channelInactive(ChannelErrorHandler.java:77)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n            at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1106)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818)\n            at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\n            at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\n            at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)\n            at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\n            at org.neo4j.driver.internal.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n            at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n            ... 1 common frames omitted\n    Caused by: org.neo4j.driver.exceptions.ServiceUnavailableException: Connection to the database terminated. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.\n        at org.neo4j.driver.internal.util.ErrorUtil.newConnectionTerminatedError(ErrorUtil.java:53)\n        at org.neo4j.driver.internal.util.ErrorUtil.newConnectionTerminatedError(ErrorUtil.java:46)\n        at org.neo4j.driver.internal.async.inbound.ChannelErrorHandler.channelInactive(ChannelErrorHandler.java:76)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)\n        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1106)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818)\n        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\n        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\n        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)\n        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\n        at org.neo4j.driver.internal.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        ... 1 common frames omitted\n\n</code></pre>\n"},{"tags":["java","api","testing","rest-assured","pojo"],"answers":[{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642426246,"creation_date":1642426246,"answer_id":70742188,"question_id":70742030,"body_markdown":"Not sure if I understood correctly. So maybe this answer goes in the totally wrong direction.\r\n\r\nIf you have lots of Classes and member variables, to streamline handling, you could introduce a level of abstraction.\r\nAs an example: \r\n - instead of a class and its member variables, you could have a HashMap that stores [variable name] as key, and [variable value] as value.\r\n - for multiple object of the same class, instantiate multiple HashMaps\r\n - maybe hold all those produced HashMaps in a Collection like a List\r\n - maybe even have an &#39;outer&#39; HashMap, that maps [class name] to [collection]\r\n - in the end it might look like this: HashMap[class name -&gt; Collection], Collection contains multiple &#39;object&#39; HashMaps. Object HashMaps map their [member variable name] to the [meber variable value]\r\n\r\nNow, to the JSON part: Google&#39;s GSON already has classes in place that do exactly that (object abstraction), so you now have an easy bridge between JSON and Java.\r\n\r\nAnd then you bring it all together and only write ONE serializer and ONE deserializer for ALL classes you wanna handle.\r\n","title":"Can we deal with JSON data directly instead of creating POJO classes while creating Rest Assured framework?","body":"<p>Not sure if I understood correctly. So maybe this answer goes in the totally wrong direction.</p>\n<p>If you have lots of Classes and member variables, to streamline handling, you could introduce a level of abstraction.\nAs an example:</p>\n<ul>\n<li>instead of a class and its member variables, you could have a HashMap that stores [variable name] as key, and [variable value] as value.</li>\n<li>for multiple object of the same class, instantiate multiple HashMaps</li>\n<li>maybe hold all those produced HashMaps in a Collection like a List</li>\n<li>maybe even have an 'outer' HashMap, that maps [class name] to [collection]</li>\n<li>in the end it might look like this: HashMap[class name -&gt; Collection], Collection contains multiple 'object' HashMaps. Object HashMaps map their [member variable name] to the [meber variable value]</li>\n</ul>\n<p>Now, to the JSON part: Google's GSON already has classes in place that do exactly that (object abstraction), so you now have an easy bridge between JSON and Java.</p>\n<p>And then you bring it all together and only write ONE serializer and ONE deserializer for ALL classes you wanna handle.</p>\n"},{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642431307,"creation_date":1642431307,"answer_id":70743326,"question_id":70742030,"body_markdown":"In the end, you still have to put value to POJO or any kinds of object (Map, List, JSON objects...) to create a json payload. I don&#39;t like the idea manipulating data directly, it&#39;s so rigid.\r\nTo make your work less tedious, some techniques can be applied:\r\n\r\n- Create inner classes if you don&#39;t want to create too many POJO classes separatly.\r\n- Use Builder pattern (Intellij suggestion or @Builder annotation in lombok) to create POJO instance more straightforward (comparing to basic Setter).\r\n- Create POJO instance with default value for each property, then only the property that matters.\r\n- Separate the creation of POJO object in other packages, like `PersonFactory` to build `Person` instance. It will help make test cleaner.","title":"Can we deal with JSON data directly instead of creating POJO classes while creating Rest Assured framework?","body":"<p>In the end, you still have to put value to POJO or any kinds of object (Map, List, JSON objects...) to create a json payload. I don't like the idea manipulating data directly, it's so rigid.\nTo make your work less tedious, some techniques can be applied:</p>\n<ul>\n<li>Create inner classes if you don't want to create too many POJO classes separatly.</li>\n<li>Use Builder pattern (Intellij suggestion or @Builder annotation in lombok) to create POJO instance more straightforward (comparing to basic Setter).</li>\n<li>Create POJO instance with default value for each property, then only the property that matters.</li>\n<li>Separate the creation of POJO object in other packages, like <code>PersonFactory</code> to build <code>Person</code> instance. It will help make test cleaner.</li>\n</ul>\n"}],"owner":{"account_id":11066069,"reputation":45,"user_id":8125854,"display_name":"saurabh "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1642431307,"creation_date":1642425491,"question_id":70742030,"body_markdown":"I have seen in many Rest Assured frameworks that we create POJO classes for Serialization &amp; deserialization but let&#39;s say we have to automate more than 50-70 APIs thus, creating POJO classes for all seems tedious work so can we deal with JSON objects and data directly? We can get rid of getters and setters by using Lombok annotations but still, we will have to set variables. just curious about what should be the best practice we can follow?","title":"Can we deal with JSON data directly instead of creating POJO classes while creating Rest Assured framework?","body":"<p>I have seen in many Rest Assured frameworks that we create POJO classes for Serialization &amp; deserialization but let's say we have to automate more than 50-70 APIs thus, creating POJO classes for all seems tedious work so can we deal with JSON objects and data directly? We can get rid of getters and setters by using Lombok annotations but still, we will have to set variables. just curious about what should be the best practice we can follow?</p>\n"},{"tags":["java","junit","reflection","annotations"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1642295060,"post_id":70726617,"comment_id":125033139,"body_markdown":"Use `getClass()` in the constructor?","body":"Use <code>getClass()</code> in the constructor?"},{"owner":{"account_id":10830839,"reputation":61,"user_id":7965289,"display_name":"Ganesh Budhathoki"},"score":0,"creation_date":1642295087,"post_id":70726617,"comment_id":125033146,"body_markdown":"could polymorphism be a possible answer? what if you define start() in your subclass MyTest and pass class name from there? Although that way you might have to define it in every Test class you write.","body":"could polymorphism be a possible answer? what if you define start() in your subclass MyTest and pass class name from there? Although that way you might have to define it in every Test class you write."},{"owner":{"account_id":45983,"reputation":1557,"user_id":135740,"accept_rate":74,"display_name":"CaptainHastings"},"score":0,"creation_date":1642296141,"post_id":70726617,"comment_id":125033247,"body_markdown":"Ganesh,  what you are suggesting will work (although can&#39;t use polymorphism as @BeforeAll can only be used in static methods). However, I was hoping I wouldn&#39;t have to do this for every test (which could be hundreds)","body":"Ganesh,  what you are suggesting will work (although can&#39;t use polymorphism as @BeforeAll can only be used in static methods). However, I was hoping I wouldn&#39;t have to do this for every test (which could be hundreds)"},{"owner":{"account_id":45983,"reputation":1557,"user_id":135740,"accept_rate":74,"display_name":"CaptainHastings"},"score":0,"creation_date":1642296375,"post_id":70726617,"comment_id":125033270,"body_markdown":"@johannes Kuhn Can&#39;t use this reference when calling super(..) but can do this MethodHandles.lookup().lookupClass(). But still would like to do it via reflexion though.","body":"@johannes Kuhn Can&#39;t use this reference when calling super(..) but can do this MethodHandles.lookup().lookupClass(). But still would like to do it via reflexion though."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1642344309,"post_id":70726617,"comment_id":125040674,"body_markdown":"I mean in the constructor of `MyAbstractClass`: `public MyAbstractClass() {Class&lt;?&gt; clazz = getClass(); ...}`.","body":"I mean in the constructor of <code>MyAbstractClass</code>: <code>public MyAbstractClass() {Class&lt;?&gt; clazz = getClass(); ...}</code>."},{"owner":{"account_id":45983,"reputation":1557,"user_id":135740,"accept_rate":74,"display_name":"CaptainHastings"},"score":0,"creation_date":1642345247,"post_id":70726617,"comment_id":125040930,"body_markdown":"I need to get the name of the subclass (MyTest) in the superclass (MyAbstractClass). If I do what you mention, I will get MyAbstractClass in MyAbstractClass.","body":"I need to get the name of the subclass (MyTest) in the superclass (MyAbstractClass). If I do what you mention, I will get MyAbstractClass in MyAbstractClass."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1642384106,"post_id":70726617,"comment_id":125049134,"body_markdown":"Nope, you will get `MyTest`. [Example](https://ideone.com/ZbSrUm).","body":"Nope, you will get <code>MyTest</code>. <a href=\"https://ideone.com/ZbSrUm\" rel=\"nofollow noreferrer\">Example</a>."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642431232,"creation_date":1642430519,"answer_id":70743138,"question_id":70726617,"body_markdown":"The presence of the `@BeforeAll` annotation suggests you are using JUnit&#160;5. In this case, you can use.\r\n\r\n```java\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.TestInfo;\r\n\r\npublic class MyAbstractClass {\r\n    @BeforeAll\r\n    public static void start(TestInfo ti) {\r\n        Config cfg=readConfig(ti.getTestClass().orElseThrow(IllegalStateException::new));\r\n        //Use config to do one time set-up\r\n    }\r\n\r\n    private static Config readConfig(Class&lt;?&gt; testClass) {\r\n         MyAnnotation ann = testClass.getAnnotation(MyAnnotation.class);\r\n         return new Config(ann.host(), ann.port());\r\n    }\r\n}\r\n```\r\n\r\nSee also the [`TestInfo` API documentation].\r\n\r\nThis is not “Reflection Magic” but a feature provided by JUnit itself, but it’s also only JUnit which knows that the invocation of a `static` method annotated with `@BeforeAll` is associated with a particular test class it is going to process.\r\n\r\n[`TestInfo` API documentation]: https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInfo.html","title":"Reading custom annotation for JUNIT","body":"<p>The presence of the <code>@BeforeAll</code> annotation suggests you are using JUnit 5. In this case, you can use.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.TestInfo;\n\npublic class MyAbstractClass {\n    @BeforeAll\n    public static void start(TestInfo ti) {\n        Config cfg=readConfig(ti.getTestClass().orElseThrow(IllegalStateException::new));\n        //Use config to do one time set-up\n    }\n\n    private static Config readConfig(Class&lt;?&gt; testClass) {\n         MyAnnotation ann = testClass.getAnnotation(MyAnnotation.class);\n         return new Config(ann.host(), ann.port());\n    }\n}\n</code></pre>\n<p>See also the <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInfo.html\" rel=\"nofollow noreferrer\"><code>TestInfo</code> API documentation</a>.</p>\n<p>This is not “Reflection Magic” but a feature provided by JUnit itself, but it’s also only JUnit which knows that the invocation of a <code>static</code> method annotated with <code>@BeforeAll</code> is associated with a particular test class it is going to process.</p>\n"}],"owner":{"account_id":45983,"reputation":1557,"user_id":135740,"accept_rate":74,"display_name":"CaptainHastings"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70743138,"answer_count":1,"score":0,"last_activity_date":1642431232,"creation_date":1642294236,"question_id":70726617,"body_markdown":"I have a custom annotation which I use as config to start off one time set-up for Junit.\r\n\r\n\r\n    @Target(TYPE) @Retention(RUNTIME)\r\n    public @interface MyAnnotation{\r\n       String host();\r\n       int port();\r\n    }\r\n\r\nTest class:\r\n\r\n    @MyAnnotation(host=&quot;0.0.0.0&quot;, port=4567)\r\n    public class MyTest extends MyAbstractClass{\r\n       @Test\r\n       public void myTest(){\r\n          //do testy things\r\n       }   \r\n    }\r\n\r\nSuperclass:\r\n\r\n    public class MyAbstractClass{\r\n    \r\n       @BeforeAll\r\n       public static void start(){\r\n        Config cfg = readConfig();\r\n        //Use config to do one time set-up\r\n       }\r\n    \r\n       private static Config readConfig(){\r\n          MyAnnotation ann = MyTest.class.getAnnotation(MyAnnotation.class);\r\n          return new Config(ann.host(), ann.port());\r\n       }\r\n    }\r\n\r\nSo currently, I hardcode the name of the test class (**MyTest**) in **readConfig(..)**.\r\nThis won&#39;t work when I add a second test class.\r\n\r\nOne way to solve it is:\r\n \r\n\r\n - Add another @BeforeAll method in MyTest which will call the @BeforeAll in super-class and pass the class name as a param.\r\n\r\nHowever, I am curious if I can read the name of the **executing** subclass in the superclass via some reflexion magic.\r\nAny ideas are most welcome.\r\n\r\nThanks","title":"Reading custom annotation for JUNIT","body":"<p>I have a custom annotation which I use as config to start off one time set-up for Junit.</p>\n<pre><code>@Target(TYPE) @Retention(RUNTIME)\npublic @interface MyAnnotation{\n   String host();\n   int port();\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>@MyAnnotation(host=&quot;0.0.0.0&quot;, port=4567)\npublic class MyTest extends MyAbstractClass{\n   @Test\n   public void myTest(){\n      //do testy things\n   }   \n}\n</code></pre>\n<p>Superclass:</p>\n<pre><code>public class MyAbstractClass{\n\n   @BeforeAll\n   public static void start(){\n    Config cfg = readConfig();\n    //Use config to do one time set-up\n   }\n\n   private static Config readConfig(){\n      MyAnnotation ann = MyTest.class.getAnnotation(MyAnnotation.class);\n      return new Config(ann.host(), ann.port());\n   }\n}\n</code></pre>\n<p>So currently, I hardcode the name of the test class (<strong>MyTest</strong>) in <strong>readConfig(..)</strong>.\nThis won't work when I add a second test class.</p>\n<p>One way to solve it is:</p>\n<ul>\n<li>Add another @BeforeAll method in MyTest which will call the @BeforeAll in super-class and pass the class name as a param.</li>\n</ul>\n<p>However, I am curious if I can read the name of the <strong>executing</strong> subclass in the superclass via some reflexion magic.\nAny ideas are most welcome.</p>\n<p>Thanks</p>\n"},{"tags":["java","xml","xsd","jaxb"],"owner":{"account_id":9242054,"reputation":145,"user_id":6865098,"display_name":"jeff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1639191349,"answer_count":0,"score":1,"last_activity_date":1642430982,"creation_date":1639183518,"question_id":70311829,"body_markdown":"I want to add xmlns:xsi and xsi:noNamespaceSchemaLocation in an xml root element.  \r\nI need something like this:\r\n\r\n    &lt;Product xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;product_1.xsd&quot;&gt;\r\n\r\ni tried using the code below:\r\n\r\n    JAXBContext contextObj = JAXBContext.newInstance(Product.class);\r\n    Marshaller marshallerObj = contextObj.createMarshaller();\r\n    marshallerObj.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n    marshallerObj.setProperty(Marshaller.JAXB_NO_NAMESPACE_SCHEMA_LOCATION, &quot;product_1.xsd&quot;);\r\n\r\nThe code, however, generated this output:\r\n\r\n    &lt;IMARKET xsi:noNamespaceSchemaLocation=&quot;product_1.xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n\r\nWhy is it getting reversed? Is there any way to maintain the order?\r\n","title":"add namespace information in xml root element","body":"<p>I want to add xmlns:xsi and xsi:noNamespaceSchemaLocation in an xml root element.<br />\nI need something like this:</p>\n<pre><code>&lt;Product xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;product_1.xsd&quot;&gt;\n</code></pre>\n<p>i tried using the code below:</p>\n<pre><code>JAXBContext contextObj = JAXBContext.newInstance(Product.class);\nMarshaller marshallerObj = contextObj.createMarshaller();\nmarshallerObj.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\nmarshallerObj.setProperty(Marshaller.JAXB_NO_NAMESPACE_SCHEMA_LOCATION, &quot;product_1.xsd&quot;);\n</code></pre>\n<p>The code, however, generated this output:</p>\n<pre><code>&lt;IMARKET xsi:noNamespaceSchemaLocation=&quot;product_1.xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n</code></pre>\n<p>Why is it getting reversed? Is there any way to maintain the order?</p>\n"},{"tags":["java","maven-compiler-plugin","intellij-idea2017"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1510906408,"post_id":47346038,"comment_id":81643767,"body_markdown":"by removing the compilerArgs?","body":"by removing the compilerArgs?"},{"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"score":0,"creation_date":1510906500,"post_id":47346038,"comment_id":81643805,"body_markdown":"@Stultuske This is not a good solution. You see, I need this attribute and it is supported by maven compiler plugin 3.0. `mvn clean compile` takes it. Intellj does not.","body":"@Stultuske This is not a good solution. You see, I need this attribute and it is supported by maven compiler plugin 3.0. <code>mvn clean compile</code> takes it. Intellj does not."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1510906626,"post_id":47346038,"comment_id":81643871,"body_markdown":"whether it&#39;s a good solution or not, your error message is saying that either you&#39;ve used a tag you&#39;re not allowed to use, or you&#39;ve used it in the wrong place. leaving it there won&#39;t solve the issue neither","body":"whether it&#39;s a good solution or not, your error message is saying that either you&#39;ve used a tag you&#39;re not allowed to use, or you&#39;ve used it in the wrong place. leaving it there won&#39;t solve the issue neither"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1510906692,"post_id":47346038,"comment_id":81643909,"body_markdown":"ok, and are you sure that&#39;s the version your intellij instance uses?","body":"ok, and are you sure that&#39;s the version your intellij instance uses?"},{"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"score":0,"creation_date":1510906740,"post_id":47346038,"comment_id":81643938,"body_markdown":"No, I am not, but I am am not really sure how intellij and maven integrates.","body":"No, I am not, but I am am not really sure how intellij and maven integrates."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1510906828,"post_id":47346038,"comment_id":81643991,"body_markdown":"you can tell intellij to use your local maven setup, instead of the embedded one","body":"you can tell intellij to use your local maven setup, instead of the embedded one"},{"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"score":0,"creation_date":1511511391,"post_id":47346038,"comment_id":81892217,"body_markdown":"@Stultuske seems you was right all along xD. There were some versioning issues. Thank you anyway.","body":"@Stultuske seems you was right all along xD. There were some versioning issues. Thank you anyway."}],"answers":[{"tags":[],"owner":{"account_id":7611917,"reputation":2415,"user_id":5772498,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1510907008,"creation_date":1510906752,"answer_id":47346131,"question_id":47346038,"body_markdown":"I suggest you try maven-compiler-plugin version 3.7.0.\r\n\r\nIf you stay on version 3.0, update your setup so it looks like this example: http://maven.apache.org/plugins-archives/maven-compiler-plugin-3.0/examples/pass-compiler-arguments.html\r\n\r\nIf you can go up to 3.7.0, take a look at this example (which is very similar to your code):\r\nhttps://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html#","title":"How to solve Element compilerArgs is not allowed here Error in maven compiler plugin?","body":"<p>I suggest you try maven-compiler-plugin version 3.7.0.</p>\n\n<p>If you stay on version 3.0, update your setup so it looks like this example: <a href=\"http://maven.apache.org/plugins-archives/maven-compiler-plugin-3.0/examples/pass-compiler-arguments.html\" rel=\"noreferrer\">http://maven.apache.org/plugins-archives/maven-compiler-plugin-3.0/examples/pass-compiler-arguments.html</a></p>\n\n<p>If you can go up to 3.7.0, take a look at this example (which is very similar to your code):\n<a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html#\" rel=\"noreferrer\">https://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html#</a></p>\n"},{"tags":[],"owner":{"account_id":2874479,"reputation":789,"user_id":2466971,"display_name":"gleitonfranco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621385666,"creation_date":1621385666,"answer_id":67595617,"question_id":47346038,"body_markdown":"Changing the tag name to compilerArguments or another allowed by the IDE may work.","title":"How to solve Element compilerArgs is not allowed here Error in maven compiler plugin?","body":"<p>Changing the tag name to compilerArguments or another allowed by the IDE may work.</p>\n"},{"tags":[],"owner":{"account_id":7427874,"reputation":374,"user_id":5649810,"display_name":"lubrum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625861204,"creation_date":1625861204,"answer_id":68322227,"question_id":47346038,"body_markdown":"I was with almost the same problem. \r\n\r\nI was with jdk 16, maven compiler 3.8.1 and IntelliJ version 2021.1.3.\r\n\r\nAfter any changes in pom.xml, a small icon on the right showed to me (**Load Maven Changes**). After clicking that button, the issue was solved. ","title":"How to solve Element compilerArgs is not allowed here Error in maven compiler plugin?","body":"<p>I was with almost the same problem.</p>\n<p>I was with jdk 16, maven compiler 3.8.1 and IntelliJ version 2021.1.3.</p>\n<p>After any changes in pom.xml, a small icon on the right showed to me (<strong>Load Maven Changes</strong>). After clicking that button, the issue was solved.</p>\n"},{"tags":[],"owner":{"account_id":9057807,"reputation":319,"user_id":6745434,"display_name":"Gitesh kumar Jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642430758,"creation_date":1642430758,"answer_id":70743182,"question_id":47346038,"body_markdown":"This is how I solved it without making any changes into the pom.xml\r\n\r\n    mvn clean compile -Dmaven.compiler.forceJavacCompilerUse=true\r\n\r\nThis will highlight the actual compilation error in the console to solve.","title":"How to solve Element compilerArgs is not allowed here Error in maven compiler plugin?","body":"<p>This is how I solved it without making any changes into the pom.xml</p>\n<pre><code>mvn clean compile -Dmaven.compiler.forceJavacCompilerUse=true\n</code></pre>\n<p>This will highlight the actual compilation error in the console to solve.</p>\n"}],"owner":{"account_id":3468356,"reputation":4510,"user_id":2903371,"accept_rate":92,"display_name":"patrik"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13628,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47346131,"answer_count":4,"score":2,"last_activity_date":1642430758,"creation_date":1510906366,"question_id":47346038,"body_markdown":"I am using the maven compiler plugin 3.0 and I get the error &quot;Element compilerArgs is not allowed here&quot;. This seems to work for command line but I get this Error in the IDE,.I use IDEA 2017.2 community edition. There is likely some schema missing somewhere, but I am not sure. Does anyone have a good way to solve issues like this, that is not to send a bug report to JetBrains and wait for a fix?\r\n    \r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;1.7&lt;/source&gt;\r\n            &lt;target&gt;1.7&lt;/target&gt;\r\n            &lt;fork&gt;true&lt;/fork&gt;\r\n            &lt;compilerArgs&gt;\r\n                &lt;arg&gt;-DspecificArg&lt;/arg&gt;\r\n            &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"How to solve Element compilerArgs is not allowed here Error in maven compiler plugin?","body":"<p>I am using the maven compiler plugin 3.0 and I get the error \"Element compilerArgs is not allowed here\". This seems to work for command line but I get this Error in the IDE,.I use IDEA 2017.2 community edition. There is likely some schema missing somewhere, but I am not sure. Does anyone have a good way to solve issues like this, that is not to send a bug report to JetBrains and wait for a fix?</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.7&lt;/source&gt;\n        &lt;target&gt;1.7&lt;/target&gt;\n        &lt;fork&gt;true&lt;/fork&gt;\n        &lt;compilerArgs&gt;\n            &lt;arg&gt;-DspecificArg&lt;/arg&gt;\n        &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","sql","string","date","date-formatting"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1642084638,"post_id":70698289,"comment_id":124982162,"body_markdown":"&quot;SQL Date values do not have a time component&quot; is mentioned 6 times in the official javadoc of that class: https://docs.oracle.com/javase/7/docs/api/java/sql/Date.html - That&#39;s why your first source for debugging should always be to look at the official documentation!","body":"&quot;SQL Date values do not have a time component&quot; is mentioned 6 times in the official javadoc of that class: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/Date.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/sql/Date.html</a> - That&#39;s why your first source for debugging should always be to look at the official documentation!"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1642140446,"post_id":70698289,"comment_id":124997009,"body_markdown":"I don&#39;t think you should be using a `java.sql.Date` if you want a class that can store information about *something like this `2022-01-13 14:33:07.996`*. A `java.sql.Date` simply has year, month of year and day of month as its attributes, nothing more, no time of day, no hours, minutes, seconds or smaller (if you don&#39;t believe it, read [a document that contains a remarkable set of the words *deprecated* and *deprecation*](https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html)). You&#39;ll be best adviced using one of the solutions provided by @BasilBorque.","body":"I don&#39;t think you should be using a <code>java.sql.Date</code> if you want a class that can store information about <i>something like this <code>2022-01-13 14:33:07.996</code></i>. A <code>java.sql.Date</code> simply has year, month of year and day of month as its attributes, nothing more, no time of day, no hours, minutes, seconds or smaller (if you don&#39;t believe it, read <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html\" rel=\"nofollow noreferrer\">a document that contains a remarkable set of the words <i>deprecated</i> and <i>deprecation</i></a>). You&#39;ll be best adviced using one of the solutions provided by @BasilBorque."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642430361,"creation_date":1642089514,"answer_id":70699492,"question_id":70698289,"body_markdown":"# tl;dr\r\n\r\nTo write date-time values to a database, use appropriate objects, not text. For a date-only value, use `LocalDate`.\r\n\r\n    myPreparedStatement\r\n    .setObject(\r\n        … ,\r\n        LocalDateTime\r\n        .parse( &quot;2022-01-13 14:33:07.996&quot;.replace( &quot; &quot; , &quot;T&quot; ) )\r\n        .toLocalDate()\r\n    )\r\n\r\n# Avoid legacy date-time classes\r\n\r\nYou are using terrible date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310. \r\n\r\n# Date-only\r\n\r\nYou said: \r\n\r\n&gt; 2022-01-13 14:33:07.996 in java sql date format\r\n\r\nThat is a contradiction. A `java.sql.Date` object represents a date-only, not a date with time-of-day. \r\n\r\n# `java.time.LocalDateTime`\r\n\r\nParse your input string as a `LocalDateTime` because it lacks any indicator of time zone or offset. Replace the SPACE in the middle with a `T` to comply with the [ISO 8601][1] standard. \r\n\r\n    String input = &quot;2022-01-13 14:33:07.996&quot;.replace( &quot; &quot; , &quot;T&quot; ) ;\r\n    LocalDateTime ldt = LocalDateTime.parse( input ) ;\r\n\r\n# `java.time.LocalDate`\r\n\r\nExtract the date portion.\r\n\r\n    LocalDate ld = ldt.toLocalDate() ;\r\n\r\n# Database access\r\n\r\nWrite to database.\r\n\r\n    myPreparedStatement.setObject( … , ld ) ;\r\n\r\nRetrieve from database.\r\n\r\n    LocalDate ld = myResultSet.getObject( … , LocalDate.class ) ;\r\n\r\nThese matters have been covered many many times already on Stack Overflow. Search to learn more.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601","title":"convert string date to sql date format","body":"<h1>tl;dr</h1>\n<p>To write date-time values to a database, use appropriate objects, not text. For a date-only value, use <code>LocalDate</code>.</p>\n<pre><code>myPreparedStatement\n.setObject(\n    … ,\n    LocalDateTime\n    .parse( &quot;2022-01-13 14:33:07.996&quot;.replace( &quot; &quot; , &quot;T&quot; ) )\n    .toLocalDate()\n)\n</code></pre>\n<h1>Avoid legacy date-time classes</h1>\n<p>You are using terrible date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<h1>Date-only</h1>\n<p>You said:</p>\n<blockquote>\n<p>2022-01-13 14:33:07.996 in java sql date format</p>\n</blockquote>\n<p>That is a contradiction. A <code>java.sql.Date</code> object represents a date-only, not a date with time-of-day.</p>\n<h1><code>java.time.LocalDateTime</code></h1>\n<p>Parse your input string as a <code>LocalDateTime</code> because it lacks any indicator of time zone or offset. Replace the SPACE in the middle with a <code>T</code> to comply with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard.</p>\n<pre><code>String input = &quot;2022-01-13 14:33:07.996&quot;.replace( &quot; &quot; , &quot;T&quot; ) ;\nLocalDateTime ldt = LocalDateTime.parse( input ) ;\n</code></pre>\n<h1><code>java.time.LocalDate</code></h1>\n<p>Extract the date portion.</p>\n<pre><code>LocalDate ld = ldt.toLocalDate() ;\n</code></pre>\n<h1>Database access</h1>\n<p>Write to database.</p>\n<pre><code>myPreparedStatement.setObject( … , ld ) ;\n</code></pre>\n<p>Retrieve from database.</p>\n<pre><code>LocalDate ld = myResultSet.getObject( … , LocalDate.class ) ;\n</code></pre>\n<p>These matters have been covered many many times already on Stack Overflow. Search to learn more.</p>\n"}],"owner":{"account_id":18133122,"reputation":29,"user_id":13187998,"display_name":"gbeto Jean-Jos&#233;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70699492,"answer_count":1,"score":-1,"last_activity_date":1642430361,"creation_date":1642084177,"question_id":70698289,"body_markdown":"I want to convert this string &quot;2022-01-13 14:33:07.996&quot; to java sql date. I have read the answers and I have converted the string to java util date and then to java sql date. I just don&#39;t know how to get the full date in java sql date format\r\n\r\n```\r\nString dateStart = &quot;2022-01-13 14:33:07.996&quot;;\r\n         DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); \r\n\t\t Date date1 = dateFormat.parse(dateStart);\r\n\t\t java.util.Date utilDate = date1;\r\n\t\t java.sql.Date sqlDate = new java.sql.Date(date1.getTime());\r\nSystem.out.println(sqlDate);\r\n\r\n```\r\n\r\nin out put i get this\r\n\r\n```\r\n2022-01-13\r\n\r\n```\r\nbut I want something like this ```2022-01-13 14:33:07.996``` in java sql date format\r\n","title":"convert string date to sql date format","body":"<p>I want to convert this string &quot;2022-01-13 14:33:07.996&quot; to java sql date. I have read the answers and I have converted the string to java util date and then to java sql date. I just don't know how to get the full date in java sql date format</p>\n<pre><code>String dateStart = &quot;2022-01-13 14:33:07.996&quot;;\n         DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;); \n         Date date1 = dateFormat.parse(dateStart);\n         java.util.Date utilDate = date1;\n         java.sql.Date sqlDate = new java.sql.Date(date1.getTime());\nSystem.out.println(sqlDate);\n\n</code></pre>\n<p>in out put i get this</p>\n<pre><code>2022-01-13\n\n</code></pre>\n<p>but I want something like this <code>2022-01-13 14:33:07.996</code> in java sql date format</p>\n"},{"tags":["java","file","rabbitmq","messaging"],"comments":[{"owner":{"account_id":318361,"reputation":5787,"user_id":635549,"accept_rate":100,"display_name":"galath"},"score":0,"creation_date":1437985151,"post_id":31648066,"comment_id":51241968,"body_markdown":"Hello and welcome to StackOverflow. Please take some time to read the [help page](http://stackoverflow.com/help), especially the sections named &quot;What topics can I ask about here?&quot; and &quot;What types of questions should I avoid asking?&quot;. And more importantly, please read the [Stack Overflow question checklist](http://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist). You might also want to learn about [Minimal, Complete, and Verifiable Examples](http://stackoverflow.com/help/mcve).","body":"Hello and welcome to StackOverflow. Please take some time to read the <a href=\"http://stackoverflow.com/help\">help page</a>, especially the sections named &quot;What topics can I ask about here?&quot; and &quot;What types of questions should I avoid asking?&quot;. And more importantly, please read the <a href=\"http://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist\">Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."},{"owner":{"account_id":2431730,"reputation":1425,"user_id":2122484,"accept_rate":75,"display_name":"Naveen Ramawat"},"score":0,"creation_date":1437985214,"post_id":31648066,"comment_id":51241992,"body_markdown":"Convert file byte data in base64 encoded string. Base64 encoding is standard to convert byte data to string and vice-versa,","body":"Convert file byte data in base64 encoded string. Base64 encoding is standard to convert byte data to string and vice-versa,"}],"answers":[{"tags":[],"owner":{"account_id":3551875,"reputation":835,"user_id":2966556,"display_name":"Manmay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642429889,"creation_date":1437989413,"answer_id":31649509,"question_id":31648066,"body_markdown":"You can convert the file content into byte array and send the byte[] as below.\r\n\r\n```\r\nbyte[] fileData = // get content from file as byte[]  [Refer Here][1]\r\nString fileType  = // get file type from file\r\n\r\nMessage message = MessageBuilder.withBody(fileData).setHeader(&quot;ContentType&quot;, fileType).build();\r\n\r\nrabbitTemplate.send(&quot;exchnage name&quot;, &quot;routing key&quot;, message); \r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/858980/file-to-byte-in-java","title":"How to send and receive file with Java RabbitMQ?","body":"<p>You can convert the file content into byte array and send the byte[] as below.</p>\n<pre><code>byte[] fileData = // get content from file as byte[]  [Refer Here][1]\nString fileType  = // get file type from file\n\nMessage message = MessageBuilder.withBody(fileData).setHeader(&quot;ContentType&quot;, fileType).build();\n\nrabbitTemplate.send(&quot;exchnage name&quot;, &quot;routing key&quot;, message); \n</code></pre>\n"}],"owner":{"account_id":6689807,"reputation":23,"user_id":5159633,"display_name":"Kamila Dini Nabilati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9864,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":31649509,"answer_count":1,"score":0,"last_activity_date":1642429889,"creation_date":1437984974,"question_id":31648066,"body_markdown":"How to send file with Java RabbitMQ?\r\nEspecially using message converter. \r\n\r\nI&#39;m using Spring Framework, can send String or ArrayList but can&#39;t send File. I&#39;m only use `convertAndSend` and `convertAndReceive` to send File but get : \r\n\r\n    org.springframework.amqp.AmqpIOException: java.io.FileNotFoundException\r\n\r\nI don&#39;t know how to use message converter. The code from &lt;a href=&quot;https://github.com/spring-projects/spring-amqp-samples/tree/master/helloworld/src/main/java/org/springframework/amqp/helloworld/async&quot;&gt;here&lt;/a&gt; and change some class :\r\n\r\nHelloWorldHandler.java\r\n\r\n    package org.springframework.amqp.helloworld.async;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n\r\n    import org.springframework.amqp.core.Message;\r\n\r\n    public class HelloWorldHandler {\r\n\t\r\n\t    public void handleMessage(File message) throws IOException {\r\n\t\t    BufferedReader br = new BufferedReader(new FileReader(message));\r\n\t\t    System.out.println(br.readLine());\r\n\t    }\r\n    }\r\n\r\nProducerConfiguration.java\r\n\r\n    package org.springframework.amqp.helloworld.async;\r\n\r\n    import java.io.File;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n\r\n    import org.springframework.amqp.rabbit.connection.CachingConnectionFactory;\r\n    import org.springframework.amqp.rabbit.connection.ConnectionFactory;\r\n    import org.springframework.amqp.rabbit.core.RabbitTemplate;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.config.BeanPostProcessor;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.scheduling.annotation.Scheduled;\r\n    import org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor;\r\n\r\n    @Configuration\r\n    public class ProducerConfiguration {\r\n\r\n\t    protected final String helloWorldQueueName = &quot;hello.world.queue&quot;;\r\n\r\n\t    @Bean\r\n\t    public RabbitTemplate rabbitTemplate() {\r\n\t\t    RabbitTemplate template = new RabbitTemplate(connectionFactory());\r\n\t\t    template.setRoutingKey(this.helloWorldQueueName);\r\n\t\t    return template;\r\n\t    }\r\n\r\n\t    @Bean\r\n\t    public ConnectionFactory connectionFactory() {\r\n\t\t    CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;x.x.x.x&quot;);\r\n\t\t    connectionFactory.setUsername(&quot;username&quot;);\r\n\t\t    connectionFactory.setPassword(&quot;password&quot;);\r\n\t\t    return connectionFactory;\r\n\t    }\r\n\r\n\t    @Bean\r\n\t    public ScheduledProducer scheduledProducer() {\r\n\t\t    return new ScheduledProducer();\r\n\t    }\r\n\r\n\t    @Bean\r\n\t    public BeanPostProcessor postProcessor() {\r\n\t\t    return new ScheduledAnnotationBeanPostProcessor();\r\n\t    }\r\n\r\n\r\n\t    static class ScheduledProducer {\r\n\r\n\t\t    @Autowired\r\n\t\t    private volatile RabbitTemplate rabbitTemplate;\r\n\r\n\t\t    private final AtomicInteger counter = new AtomicInteger();\r\n\r\n\t\t    @Scheduled(fixedRate = 3000)\r\n\t\t    public void sendMessage() {\r\n\t\t\t    rabbitTemplate.convertAndSend(new File(&quot;test.txt&quot;));\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\n","title":"How to send and receive file with Java RabbitMQ?","body":"<p>How to send file with Java RabbitMQ?\nEspecially using message converter. </p>\n\n<p>I'm using Spring Framework, can send String or ArrayList but can't send File. I'm only use <code>convertAndSend</code> and <code>convertAndReceive</code> to send File but get : </p>\n\n<pre><code>org.springframework.amqp.AmqpIOException: java.io.FileNotFoundException\n</code></pre>\n\n<p>I don't know how to use message converter. The code from <a href=\"https://github.com/spring-projects/spring-amqp-samples/tree/master/helloworld/src/main/java/org/springframework/amqp/helloworld/async\" rel=\"nofollow\">here</a> and change some class :</p>\n\n<p>HelloWorldHandler.java</p>\n\n<pre><code>package org.springframework.amqp.helloworld.async;\n\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\nimport org.springframework.amqp.core.Message;\n\npublic class HelloWorldHandler {\n\n    public void handleMessage(File message) throws IOException {\n        BufferedReader br = new BufferedReader(new FileReader(message));\n        System.out.println(br.readLine());\n    }\n}\n</code></pre>\n\n<p>ProducerConfiguration.java</p>\n\n<pre><code>package org.springframework.amqp.helloworld.async;\n\nimport java.io.File;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nimport org.springframework.amqp.rabbit.connection.CachingConnectionFactory;\nimport org.springframework.amqp.rabbit.connection.ConnectionFactory;\nimport org.springframework.amqp.rabbit.core.RabbitTemplate;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.scheduling.annotation.Scheduled;\nimport org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor;\n\n@Configuration\npublic class ProducerConfiguration {\n\n    protected final String helloWorldQueueName = \"hello.world.queue\";\n\n    @Bean\n    public RabbitTemplate rabbitTemplate() {\n        RabbitTemplate template = new RabbitTemplate(connectionFactory());\n        template.setRoutingKey(this.helloWorldQueueName);\n        return template;\n    }\n\n    @Bean\n    public ConnectionFactory connectionFactory() {\n        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(\"x.x.x.x\");\n        connectionFactory.setUsername(\"username\");\n        connectionFactory.setPassword(\"password\");\n        return connectionFactory;\n    }\n\n    @Bean\n    public ScheduledProducer scheduledProducer() {\n        return new ScheduledProducer();\n    }\n\n    @Bean\n    public BeanPostProcessor postProcessor() {\n        return new ScheduledAnnotationBeanPostProcessor();\n    }\n\n\n    static class ScheduledProducer {\n\n        @Autowired\n        private volatile RabbitTemplate rabbitTemplate;\n\n        private final AtomicInteger counter = new AtomicInteger();\n\n        @Scheduled(fixedRate = 3000)\n        public void sendMessage() {\n            rabbitTemplate.convertAndSend(new File(\"test.txt\"));\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","postgresql","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18098038,"reputation":1240,"user_id":13156126,"display_name":"fladdimir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642429355,"creation_date":1642429355,"answer_id":70742873,"question_id":70742534,"body_markdown":"The `AUTO` generation strategy of hibernate is `SEQUENCE`, which creates and uses _one common database sequence for all entities_.\r\n\r\nTo get the behavior you want, you can specify a dedicated sequence for each table, e.g. as described here: https://stackoverflow.com/a/4561233  \r\nNote that hibernate may be configured to reserve multiple IDs at once for performance reasons, so even with a dedicated sequence per entity, there might still be gaps in the IDs.\r\n\r\n---\r\n\r\nTo reduce the setup effort (and the chance of having ID gaps), you could also switch to `IDENTITY`, which internally also creates and uses a dedicated sequence for the table. However, the entity id is then only assigned upon insert, so there are possible perfomance drawbacks (since hibernate cannot delay the inserts e.g. until the end of a transaction).\r\n\r\nhttps://thorben-janssen.com/jpa-generate-primary-keys/","title":"How to solve problem with common auto_increment id for all tables","body":"<p>The <code>AUTO</code> generation strategy of hibernate is <code>SEQUENCE</code>, which creates and uses <em>one common database sequence for all entities</em>.</p>\n<p>To get the behavior you want, you can specify a dedicated sequence for each table, e.g. as described here: <a href=\"https://stackoverflow.com/a/4561233\">https://stackoverflow.com/a/4561233</a><br />\nNote that hibernate may be configured to reserve multiple IDs at once for performance reasons, so even with a dedicated sequence per entity, there might still be gaps in the IDs.</p>\n<hr />\n<p>To reduce the setup effort (and the chance of having ID gaps), you could also switch to <code>IDENTITY</code>, which internally also creates and uses a dedicated sequence for the table. However, the entity id is then only assigned upon insert, so there are possible perfomance drawbacks (since hibernate cannot delay the inserts e.g. until the end of a transaction).</p>\n<p><a href=\"https://thorben-janssen.com/jpa-generate-primary-keys/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/jpa-generate-primary-keys/</a></p>\n"}],"owner":{"account_id":23560994,"reputation":27,"user_id":17602358,"display_name":"freedman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642429355,"creation_date":1642427807,"question_id":70742534,"body_markdown":"I have many tables, but they have common auto increment. For example, I create my first user it has id 1, then I create a message it has id 2, then I create a comment to message and it has id 3 but it should have id = 1 cause I don&#39;t have any other comments or messages\r\n\r\nMy user:\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    \r\n    @AllArgsConstructor\r\n    @Table(name = &quot;usr&quot;)\r\n    public class User {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;username&quot;)\r\n        private String username;\r\n    \r\n        @Column(name = &quot;password&quot;)\r\n        private String password;\r\n    \r\n        @Column(name = &quot;first_name&quot;)\r\n        private String firstName;\r\n    \r\n        @Column(name = &quot;last_name&quot;)\r\n        private String lastName;\r\n    \r\n        @Column(name = &quot;role&quot;)\r\n        private Role role;\r\n    \r\n        @Column(name = &quot;email&quot;)\r\n        private String email;\r\n    \r\n        @Column(name = &quot;status&quot;)\r\n        private Status status;\r\n    \r\n    //    @OneToMany(mappedBy = &quot;author&quot;)\r\n    //    private List&lt;Message&gt; messages;\r\n    \r\n    //    @OneToMany(mappedBy = &quot;author&quot;)\r\n    //    private List&lt;Comment&gt; comments;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;gender_id&quot;)\r\n        private Gender gender;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;address_id&quot;)\r\n        private Address address;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(\r\n                name = &quot;user_subscriptions&quot;,\r\n                joinColumns =  @JoinColumn(name = &quot;channel_id&quot;) ,\r\n                inverseJoinColumns =  @JoinColumn(name = &quot;subscriber_id&quot;))\r\n        private Set&lt;User&gt; subscribers;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(\r\n                name = &quot;user_subscriptions&quot;,\r\n                joinColumns =  @JoinColumn(name = &quot;subscriber_id&quot;) ,\r\n                inverseJoinColumns =  @JoinColumn(name = &quot;channel_id&quot;))\r\n        private Set&lt;User&gt; subscriptions;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;file_id&quot;)\r\n        private FileEntity fileEntity;\r\n    \r\n    }\r\n\r\nMy message:\r\n \r\n\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Table(name = &quot;message&quot;)\r\n    public class Message {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Integer id;\r\n    \r\n        @Column(name = &quot;text&quot;)\r\n        private String text;\r\n    \r\n        @Column(name = &quot;tag&quot;)\r\n        private String tag;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;user_id&quot;)\r\n        private User author;\r\n    \r\n        @Column(name = &quot;header&quot;)\r\n        private String header;\r\n    \r\n        @Column(name = &quot;like_count&quot;)\r\n        private Integer likeCount = 0;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(\r\n                name = &quot;message_likes&quot;,\r\n                joinColumns = { @JoinColumn(name = &quot;message_id&quot;) },\r\n                inverseJoinColumns = { @JoinColumn(name = &quot;user_id&quot;)}\r\n        )\r\n        private Set&lt;User&gt; likes;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;file_id&quot;)\r\n        private FileEntity fileEntity;\r\n    \r\n    \r\n    }\r\n\r\nMy comment:\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;comment&quot;)\r\n    public class Comment {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;header&quot;)\r\n        private String header;\r\n    \r\n        @Column(name = &quot;text&quot;)\r\n        private String text;\r\n    \r\n        @Column(name = &quot;like_count&quot;)\r\n        private Integer likeCount = 0;\r\n    \r\n        @ManyToOne()\r\n        @JoinColumn(name = &quot;user_id&quot;)\r\n        private User author;\r\n    \r\n        @ManyToOne()\r\n        @JoinColumn(name = &quot;message_id&quot;)\r\n        private Message message;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(\r\n                name = &quot;comment_likes&quot;,\r\n                joinColumns = { @JoinColumn(name = &quot;comment_id&quot;) },\r\n                inverseJoinColumns = { @JoinColumn(name = &quot;user_id&quot;)}\r\n        )\r\n        private Set&lt;User&gt; likes;\r\n    }\r\nI would appreciate any help.\r\n\r\n","title":"How to solve problem with common auto_increment id for all tables","body":"<p>I have many tables, but they have common auto increment. For example, I create my first user it has id 1, then I create a message it has id 2, then I create a comment to message and it has id 3 but it should have id = 1 cause I don't have any other comments or messages</p>\n<p>My user:</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n\n@AllArgsConstructor\n@Table(name = &quot;usr&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;username&quot;)\n    private String username;\n\n    @Column(name = &quot;password&quot;)\n    private String password;\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Column(name = &quot;role&quot;)\n    private Role role;\n\n    @Column(name = &quot;email&quot;)\n    private String email;\n\n    @Column(name = &quot;status&quot;)\n    private Status status;\n\n//    @OneToMany(mappedBy = &quot;author&quot;)\n//    private List&lt;Message&gt; messages;\n\n//    @OneToMany(mappedBy = &quot;author&quot;)\n//    private List&lt;Comment&gt; comments;\n\n    @OneToOne\n    @JoinColumn(name = &quot;gender_id&quot;)\n    private Gender gender;\n\n    @OneToOne\n    @JoinColumn(name = &quot;address_id&quot;)\n    private Address address;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;user_subscriptions&quot;,\n            joinColumns =  @JoinColumn(name = &quot;channel_id&quot;) ,\n            inverseJoinColumns =  @JoinColumn(name = &quot;subscriber_id&quot;))\n    private Set&lt;User&gt; subscribers;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;user_subscriptions&quot;,\n            joinColumns =  @JoinColumn(name = &quot;subscriber_id&quot;) ,\n            inverseJoinColumns =  @JoinColumn(name = &quot;channel_id&quot;))\n    private Set&lt;User&gt; subscriptions;\n\n    @OneToOne\n    @JoinColumn(name = &quot;file_id&quot;)\n    private FileEntity fileEntity;\n\n}\n</code></pre>\n<p>My message:</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;message&quot;)\npublic class Message {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n\n    @Column(name = &quot;text&quot;)\n    private String text;\n\n    @Column(name = &quot;tag&quot;)\n    private String tag;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User author;\n\n    @Column(name = &quot;header&quot;)\n    private String header;\n\n    @Column(name = &quot;like_count&quot;)\n    private Integer likeCount = 0;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;message_likes&quot;,\n            joinColumns = { @JoinColumn(name = &quot;message_id&quot;) },\n            inverseJoinColumns = { @JoinColumn(name = &quot;user_id&quot;)}\n    )\n    private Set&lt;User&gt; likes;\n\n    @OneToOne\n    @JoinColumn(name = &quot;file_id&quot;)\n    private FileEntity fileEntity;\n\n\n}\n</code></pre>\n<p>My comment:</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;comment&quot;)\npublic class Comment {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;header&quot;)\n    private String header;\n\n    @Column(name = &quot;text&quot;)\n    private String text;\n\n    @Column(name = &quot;like_count&quot;)\n    private Integer likeCount = 0;\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User author;\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;message_id&quot;)\n    private Message message;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;comment_likes&quot;,\n            joinColumns = { @JoinColumn(name = &quot;comment_id&quot;) },\n            inverseJoinColumns = { @JoinColumn(name = &quot;user_id&quot;)}\n    )\n    private Set&lt;User&gt; likes;\n}\n</code></pre>\n<p>I would appreciate any help.</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-test","java-module"],"comments":[{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":1,"creation_date":1642340872,"post_id":70730327,"comment_id":125039763,"body_markdown":"@xerx593 I&#39;m sorry, it should be `src/test/java` as you noted. I have updated the post accordingly.","body":"@xerx593 I&#39;m sorry, it should be <code>src&#47;test&#47;java</code> as you noted. I have updated the post accordingly."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642340959,"post_id":70730327,"comment_id":125039787,"body_markdown":"phew... i am glad it was only a typo! :-) next issue: final field constructor of that bean (it is too early!) (cause/root of the error message)","body":"phew... i am glad it was only a typo! :-) next issue: final field constructor of that bean (it is too early!) (cause/root of the error message)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642341044,"post_id":70730327,"comment_id":125039808,"body_markdown":"..and last: you can(*should*!) have `src/main/java/module-info.java`**+** `src/test/java/module-info.java` ;);)  (or does your &quot;main requires junit&quot; (e.g.)?)","body":"..and last: you can(<i>should</i>!) have <code>src&#47;main&#47;java&#47;module-info.java</code>**+** <code>src&#47;test&#47;java&#47;module-info.java</code> ;);)  (or does your &quot;main requires junit&quot; (e.g.)?)"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1642341231,"post_id":70730327,"comment_id":125039844,"body_markdown":"I&#39;m not sure I follow? Adding `@SpringApplication` implies (according to its JavaDoc) that &quot;Indicates a configuration class that declares one or more @Bean methods and also triggers auto-configuration and component scanning. This is a convenience annotation that is equivalent to declaring @Configuration, @EnableAutoConfiguration and @ComponentScan.&quot;","body":"I&#39;m not sure I follow? Adding <code>@SpringApplication</code> implies (according to its JavaDoc) that &quot;Indicates a configuration class that declares one or more @Bean methods and also triggers auto-configuration and component scanning. This is a convenience annotation that is equivalent to declaring @Configuration, @EnableAutoConfiguration and @ComponentScan.&quot;"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1642341458,"post_id":70730327,"comment_id":125039917,"body_markdown":"And by &quot;too early&quot;, why does dependency injection work when starting the app from the `main` method? And why does it work when executing the tests without the `module-info.java` files? It should be &quot;equally early&quot; in those cases?","body":"And by &quot;too early&quot;, why does dependency injection work when starting the app from the <code>main</code> method? And why does it work when executing the tests without the <code>module-info.java</code> files? It should be &quot;equally early&quot; in those cases?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642341483,"post_id":70730327,"comment_id":125039922,"body_markdown":"yes, all true, good, but not contradicting with the fact that it is &quot;too early&quot;(..for the details, we can crawl the source code, but I assume/it sounds plausible to me: we should not &quot;constuctor inject&quot; (final field) on a &quot;root configuration&quot;...we have alternatives)","body":"yes, all true, good, but not contradicting with the fact that it is &quot;too early&quot;(..for the details, we can crawl the source code, but I assume/it sounds plausible to me: we should not &quot;constuctor inject&quot; (final field) on a &quot;root configuration&quot;...we have alternatives)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642341584,"post_id":70730327,"comment_id":125039951,"body_markdown":"In Spring: @Configuration is also a &quot;@Bean&quot; ...and like any &quot;defautl configuration&quot; it has default scope.: singleton....one object is created (by spring) when it is accessed...and we get the same object whenever we access it again...)","body":"In Spring: @Configuration is also a &quot;@Bean&quot; ...and like any &quot;defautl configuration&quot; it has default scope.: singleton....one object is created (by spring) when it is accessed...and we get the same object whenever we access it again...)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642341870,"post_id":70730327,"comment_id":125040030,"body_markdown":"I assume: removing `final` (and constructor), adding `@Autowired`, will already fix... alternatively: make `ApplkicationConfig` &quot;a child&quot; of &quot;SpringBootApp&quot; (`Second`) ((static) inner class), alternatively: declare it (@Bean) directly in `Second`","body":"I assume: removing <code>final</code> (and constructor), adding <code>@Autowired</code>, will already fix... alternatively: make <code>ApplkicationConfig</code> &quot;a child&quot; of &quot;SpringBootApp&quot; (<code>Second</code>) ((static) inner class), alternatively: declare it (@Bean) directly in <code>Second</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642342717,"post_id":70730327,"comment_id":125040256,"body_markdown":"How can `Second` &quot;@Import&quot; `ApplicationConfigurtaion` before knowing `First` i.e. being created??","body":"How can <code>Second</code> &quot;@Import&quot; <code>ApplicationConfigurtaion</code> before knowing <code>First</code> i.e. being created??"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1642342992,"post_id":70730327,"comment_id":125040336,"body_markdown":"so we can tackle the &quot;import&quot; (inner config/bean e.g.), or the &quot;before knowing vs. being created&quot; (field injection/ one of the above)","body":"so we can tackle the &quot;import&quot; (inner config/bean e.g.), or the &quot;before knowing vs. being created&quot; (field injection/ one of the above)"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1642429267,"post_id":70730327,"comment_id":125061727,"body_markdown":"in the end, I created a separate `Application` class with the `@SpringBootApplication` annotation, see my [answer](https://stackoverflow.com/a/70742794/303598). However, that still does not answer why the code worked in the first place when before the `module-info.java` were created","body":"in the end, I created a separate <code>Application</code> class with the <code>@SpringBootApplication</code> annotation, see my <a href=\"https://stackoverflow.com/a/70742794/303598\">answer</a>. However, that still does not answer why the code worked in the first place when before the <code>module-info.java</code> were created"}],"answers":[{"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642429283,"creation_date":1642428964,"answer_id":70742794,"question_id":70730327,"body_markdown":"Based on the feedback in the comments by @xerx593, I have implemented a workaround in which I have pulled out the `@SpringBootApplication` class to a separate `Application` class and updated the test accordingly:\r\n\r\n```bash\r\n  |\r\n  +-- second\r\n  |     + pom.xml\r\n  |     + src/main/java/module-info.java\r\n  |     + src/main/java/com.example.second/Application.java\r\n  |     + src/main/java/com.example.second/ApplicationConfig.java\r\n  |     + src/main/java/com.example.second/Second.java\r\n  |     + src/test/java/com.example.second/ApplicationTest.java\r\n```\r\n\r\n_Application.java_\r\n```java\r\npackage com.example.second;\r\n\r\nimport java.util.Arrays;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\n\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\n_ApplicationConfig.java_\r\n```java\r\npackage com.example.second;\r\n\r\nimport com.example.first.First;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ApplicationConfig {\r\n\r\n    @Bean\r\n    First first() {\r\n        return new First();\r\n    }\r\n}\r\n```\r\n\r\n_Second.java_\r\n```java\r\npackage com.example.second;\r\n\r\nimport com.example.first.First;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class Second {\r\n\r\n    private final First first;\r\n\r\n    public Second(First first) {\r\n        this.first = first;\r\n    }\r\n}\r\n```\r\n\r\n_ApplicationTest.java_\r\n```java\r\npackage com.example.second;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\n\r\n@SpringBootTest(classes = Application.class)\r\nclass ApplicationTest {\r\n\r\n    @Test\r\n    void contextLoads() {\r\n    }\r\n}\r\n```\r\n","title":"NoSuchBeanDefinitionException / UnsatisfiedDependencyException when testing Spring Boot app with Java modules","body":"<p>Based on the feedback in the comments by @xerx593, I have implemented a workaround in which I have pulled out the <code>@SpringBootApplication</code> class to a separate <code>Application</code> class and updated the test accordingly:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>  |\n  +-- second\n  |     + pom.xml\n  |     + src/main/java/module-info.java\n  |     + src/main/java/com.example.second/Application.java\n  |     + src/main/java/com.example.second/ApplicationConfig.java\n  |     + src/main/java/com.example.second/Second.java\n  |     + src/test/java/com.example.second/ApplicationTest.java\n</code></pre>\n<p><em>Application.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport java.util.Arrays;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p><em>ApplicationConfig.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport com.example.first.First;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    First first() {\n        return new First();\n    }\n}\n</code></pre>\n<p><em>Second.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport com.example.first.First;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class Second {\n\n    private final First first;\n\n    public Second(First first) {\n        this.first = first;\n    }\n}\n</code></pre>\n<p><em>ApplicationTest.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest(classes = Application.class)\nclass ApplicationTest {\n\n    @Test\n    void contextLoads() {\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70742794,"answer_count":1,"score":1,"last_activity_date":1642429283,"creation_date":1642338574,"question_id":70730327,"body_markdown":"How can I mitigate that the `NoSuchBeanDefinitionException` and the related `UnsatisfiedDependencyException` occur when testing a multimode Spring Boot app that has been configured with Java 9 modules?\r\n\r\n\r\nAfter adding `module-info.java` files to my multi module project, my Spring Boot application test started to fail:\r\n\r\n_test failure_\r\n```txt\r\ncontextLoads  Time elapsed: 0 s  &lt;&lt;&lt; ERROR!\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \r\n   Error creating bean with name &#39;second&#39;: \r\n   Unsatisfied dependency expressed through constructor parameter 0; \r\n   nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: \r\n   No qualifying bean of type &#39;com.example.first.First&#39; available: \r\n   expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: \r\n   No qualifying bean of type &#39;com.example.first.First&#39; available: \r\n   expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n```\r\n\r\n\r\n_folder structure_ \r\n```bash\r\nparent\r\n  |\r\n  + pom.xml\r\n  |\r\n  +-- first\r\n  |     + pom.xml\r\n  |     + src/main/java/module-info.java\r\n  |     + src/main/java/com.example.first/First.java\r\n  |\r\n  +-- second\r\n  |     + pom.xml\r\n  |     + src/main/java/module-info.java\r\n  |     + src/main/java/com.example.second/ApplicationConfig.java\r\n  |     + src/main/java/com.example.second/Second.java\r\n  |     + src/test/java/com.example.second/SecondTest.java\r\n```\r\n\r\n### Parent Module\r\n\r\nA Maven parent module containing just the parent pom file.\r\n\r\n_pom.xml_\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.2&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n                &lt;artifactId&gt;first&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n                &lt;artifactId&gt;second&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;first&lt;/module&gt;\r\n        &lt;module&gt;second&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n### First Module\r\n\r\nA simple Java module that only contains a single Java class and that does have any Spring dependencies.\r\n\r\n_pom.xml_\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;first&lt;/artifactId&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n_First.java_\r\n```java\r\npackage com.example.first;\r\n\r\npublic class First {\r\n}\r\n```\r\n\r\n_first module-info.java_\r\n```java\r\nmodule com.example.first {\r\n    exports com.example.first;\r\n\r\n    opens com.example.first;\r\n}\r\n```\r\n\r\n### Second Module\r\n\r\nThe application module that depends on the first module in addition to the required Spring dependencies. It its responsible for configuring Spring beans, running the application, etc.\r\n\r\n_pom.xml_\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;second&lt;/artifactId&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;first&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n_Second.java_ \r\n```java\r\npackage com.example.second;\r\n\r\nimport com.example.first.First;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Second {\r\n\r\n    private final First first;\r\n\r\n    public Second(First first) {\r\n        this.first = first;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApplicationConfig.class, args);\r\n        System.out.println(&quot;started&quot;);\r\n    }\r\n}\r\n```\r\n\r\n_ApplicationConfig.java_ \r\n```java\r\npackage com.example.second;\r\n\r\nimport com.example.first.First;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ApplicationConfig {\r\n\r\n    @Bean\r\n    First first() {\r\n        return new First();\r\n    }\r\n}\r\n```\r\n\r\n_SecondTest.java_\r\n```java\r\npackage com.example.second;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\n\r\n@SpringBootTest\r\nclass SecondTest {\r\n\r\n    @Test\r\n    void contextLoads() {\r\n    }\r\n}\r\n```\r\n\r\n\r\n### Observations\r\n\r\n- The test fail regardless if I use Maven, e.g. `mvn test` or if I attempt to debug them from within my IDE.\r\n- It is possible to start the application invoking the `Second#main()`, both from within the IDE as well as from command line using `java -jar second/target/second-0.1.0-SNAPSHOT.jar` so dependency injection and auto wiring works in this case (the jar file has to be built without tests in this case since they are failing, e.g. `mvn package -DskipTests=true`) so the `First` bean is created and autowired correctly in this case.\r\n- The test pass if both `module-info.java` files are deleted, so the error seem to be related to Java modules","title":"NoSuchBeanDefinitionException / UnsatisfiedDependencyException when testing Spring Boot app with Java modules","body":"<p>How can I mitigate that the <code>NoSuchBeanDefinitionException</code> and the related <code>UnsatisfiedDependencyException</code> occur when testing a multimode Spring Boot app that has been configured with Java 9 modules?</p>\n<p>After adding <code>module-info.java</code> files to my multi module project, my Spring Boot application test started to fail:</p>\n<p><em>test failure</em></p>\n<pre><code>contextLoads  Time elapsed: 0 s  &lt;&lt;&lt; ERROR!\njava.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \n   Error creating bean with name 'second': \n   Unsatisfied dependency expressed through constructor parameter 0; \n   nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: \n   No qualifying bean of type 'com.example.first.First' available: \n   expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: \n   No qualifying bean of type 'com.example.first.First' available: \n   expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p><em>folder structure</em></p>\n<pre class=\"lang-sh prettyprint-override\"><code>parent\n  |\n  + pom.xml\n  |\n  +-- first\n  |     + pom.xml\n  |     + src/main/java/module-info.java\n  |     + src/main/java/com.example.first/First.java\n  |\n  +-- second\n  |     + pom.xml\n  |     + src/main/java/module-info.java\n  |     + src/main/java/com.example.second/ApplicationConfig.java\n  |     + src/main/java/com.example.second/Second.java\n  |     + src/test/java/com.example.second/SecondTest.java\n</code></pre>\n<h3>Parent Module</h3>\n<p>A Maven parent module containing just the parent pom file.</p>\n<p><em>pom.xml</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.2&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;parent&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.example&lt;/groupId&gt;\n                &lt;artifactId&gt;first&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.example&lt;/groupId&gt;\n                &lt;artifactId&gt;second&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;first&lt;/module&gt;\n        &lt;module&gt;second&lt;/module&gt;\n    &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n<h3>First Module</h3>\n<p>A simple Java module that only contains a single Java class and that does have any Spring dependencies.</p>\n<p><em>pom.xml</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;first&lt;/artifactId&gt;\n&lt;/project&gt;\n</code></pre>\n<p><em>First.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.first;\n\npublic class First {\n}\n</code></pre>\n<p><em>first module-info.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>module com.example.first {\n    exports com.example.first;\n\n    opens com.example.first;\n}\n</code></pre>\n<h3>Second Module</h3>\n<p>The application module that depends on the first module in addition to the required Spring dependencies. It its responsible for configuring Spring beans, running the application, etc.</p>\n<p><em>pom.xml</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;second&lt;/artifactId&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;first&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><em>Second.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport com.example.first.First;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Second {\n\n    private final First first;\n\n    public Second(First first) {\n        this.first = first;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApplicationConfig.class, args);\n        System.out.println(&quot;started&quot;);\n    }\n}\n</code></pre>\n<p><em>ApplicationConfig.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport com.example.first.First;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    First first() {\n        return new First();\n    }\n}\n</code></pre>\n<p><em>SecondTest.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.second;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass SecondTest {\n\n    @Test\n    void contextLoads() {\n    }\n}\n</code></pre>\n<h3>Observations</h3>\n<ul>\n<li>The test fail regardless if I use Maven, e.g. <code>mvn test</code> or if I attempt to debug them from within my IDE.</li>\n<li>It is possible to start the application invoking the <code>Second#main()</code>, both from within the IDE as well as from command line using <code>java -jar second/target/second-0.1.0-SNAPSHOT.jar</code> so dependency injection and auto wiring works in this case (the jar file has to be built without tests in this case since they are failing, e.g. <code>mvn package -DskipTests=true</code>) so the <code>First</code> bean is created and autowired correctly in this case.</li>\n<li>The test pass if both <code>module-info.java</code> files are deleted, so the error seem to be related to Java modules</li>\n</ul>\n"},{"tags":["java","collections","conventions"],"answers":[{"tags":[],"owner":{"account_id":329612,"reputation":71055,"user_id":653230,"display_name":"WhiteFang34"},"down_vote_count":0,"up_vote_count":406,"is_accepted":true,"score":406,"last_activity_date":1302427559,"creation_date":1302427205,"answer_id":5610838,"question_id":5610822,"body_markdown":"You can use [`Collections.list()`][1] to convert an `Enumeration` to a `List` in one line:\r\n\r\n    List&lt;T&gt; list = Collections.list(enumeration);\r\n\r\nThere&#39;s no similar method to get a `Set`, however you can still do it one line:\r\n\r\n    Set&lt;T&gt; set = new HashSet&lt;T&gt;(Collections.list(enumeration));\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#list%28java.util.Enumeration%29","title":"Convert Enumeration to a Set/List","body":"<p>You can use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#list%28java.util.Enumeration%29\"><code>Collections.list()</code></a> to convert an <code>Enumeration</code> to a <code>List</code> in one line:</p>\n\n<pre><code>List&lt;T&gt; list = Collections.list(enumeration);\n</code></pre>\n\n<p>There's no similar method to get a <code>Set</code>, however you can still do it one line:</p>\n\n<pre><code>Set&lt;T&gt; set = new HashSet&lt;T&gt;(Collections.list(enumeration));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39812,"reputation":9161,"user_id":115018,"accept_rate":100,"display_name":"Nate W."},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1555090682,"creation_date":1302427226,"answer_id":5610841,"question_id":5610822,"body_markdown":"How about this: [Collections.list(Enumeration&lt;T&gt; e)][1] returns an `ArrayList&lt;T&gt;`\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-","title":"Convert Enumeration to a Set/List","body":"<p>How about this: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-\" rel=\"noreferrer\">Collections.list(Enumeration e)</a> returns an <code>ArrayList&lt;T&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":4635520,"reputation":192,"user_id":3756878,"display_name":"S_intg"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1433410368,"creation_date":1433410067,"answer_id":30640057,"question_id":5610822,"body_markdown":"I needed same thing and this solution work fine, hope it can help someone also\r\n\r\n    Enumeration[] array = Enumeration.values();\r\n    List&lt;Enumeration&gt; list = Arrays.asList(array);\r\n\r\nthen you can get the .name() of your enumeration.","title":"Convert Enumeration to a Set/List","body":"<p>I needed same thing and this solution work fine, hope it can help someone also</p>\n\n<pre><code>Enumeration[] array = Enumeration.values();\nList&lt;Enumeration&gt; list = Arrays.asList(array);\n</code></pre>\n\n<p>then you can get the .name() of your enumeration.</p>\n"},{"tags":[],"owner":{"account_id":9969649,"reputation":520,"user_id":7376172,"display_name":"Timur Levadny"},"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1494356852,"creation_date":1483562819,"answer_id":41472950,"question_id":5610822,"body_markdown":"If you need `Set` rather than `List`, you can use [EnumSet.allOf()][1].\r\n\r\n    Set&lt;EnumerationClass&gt; set = EnumSet.allOf(EnumerationClass.class);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html#allOf(java.lang.Class)\r\n\r\n**Update**: JakeRobb is right. My answer is about java.lang.Enum instead of java.util.Enumeration. Sorry for unrelated answer.","title":"Convert Enumeration to a Set/List","body":"<p>If you need <code>Set</code> rather than <code>List</code>, you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html#allOf(java.lang.Class)\" rel=\"noreferrer\">EnumSet.allOf()</a>.</p>\n\n<pre><code>Set&lt;EnumerationClass&gt; set = EnumSet.allOf(EnumerationClass.class);\n</code></pre>\n\n<p><strong>Update</strong>: JakeRobb is right. My answer is about java.lang.Enum instead of java.util.Enumeration. Sorry for unrelated answer.</p>\n"},{"tags":[],"owner":{"account_id":476761,"reputation":24593,"user_id":887836,"accept_rate":96,"display_name":"Alexander Oh"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1492519895,"creation_date":1492519164,"answer_id":43472429,"question_id":5610822,"body_markdown":"When using guava (See [doc][1]) there is `Iterators.forEnumeration`. Given an `Enumeration x` you can do the following:\r\n\r\nto get a immutable Set:\r\n\r\n    ImmutableSet.copyOf(Iterators.forEnumeration(x));\r\n\r\nto get a immutable List:\r\n\r\n    ImmutableList.copyOf(Iterators.forEnumeration(x));\r\n\r\n\r\nto get a hashSet:\r\n\r\n\r\n    Sets.newHashSet(Iterators.forEnumeration(x));\r\n\r\n\r\n[1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterators.html#forEnumeration-java.util.Enumeration-","title":"Convert Enumeration to a Set/List","body":"<p>When using guava (See <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterators.html#forEnumeration-java.util.Enumeration-\" rel=\"noreferrer\">doc</a>) there is <code>Iterators.forEnumeration</code>. Given an <code>Enumeration x</code> you can do the following:</p>\n\n<p>to get a immutable Set:</p>\n\n<pre><code>ImmutableSet.copyOf(Iterators.forEnumeration(x));\n</code></pre>\n\n<p>to get a immutable List:</p>\n\n<pre><code>ImmutableList.copyOf(Iterators.forEnumeration(x));\n</code></pre>\n\n<p>to get a hashSet:</p>\n\n<pre><code>Sets.newHashSet(Iterators.forEnumeration(x));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3253983,"reputation":1481,"user_id":2743585,"display_name":"wi2ard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617204240,"creation_date":1617202319,"answer_id":66890193,"question_id":5610822,"body_markdown":"There&#39;s also in Apache commons-collections\r\n`EnumerationUtils.toList(enumeration)`","title":"Convert Enumeration to a Set/List","body":"<p>There's also in Apache commons-collections\n<code>EnumerationUtils.toList(enumeration)</code></p>\n"}],"owner":{"account_id":49962,"reputation":4212,"user_id":148926,"accept_rate":84,"display_name":"Anton Kraievyi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140639,"favorite_count":0,"down_vote_count":0,"up_vote_count":226,"accepted_answer_id":5610838,"answer_count":6,"score":226,"last_activity_date":1642429116,"creation_date":1302427072,"question_id":5610822,"body_markdown":"Is there some one-liner bridge method to dump a given *Enumeration* to `java.util.List` or `java.util.Set`?\r\n\r\nSomething built-in like `Arrays.asList()` or `Collection.toArray()` should exist somewhere, but I&#39;m unable to find that in my IntelliJ debugger&#39;s evaluator window (and Google/SO results, too).","title":"Convert Enumeration to a Set/List","body":"<p>Is there some one-liner bridge method to dump a given <em>Enumeration</em> to <code>java.util.List</code> or <code>java.util.Set</code>?</p>\n<p>Something built-in like <code>Arrays.asList()</code> or <code>Collection.toArray()</code> should exist somewhere, but I'm unable to find that in my IntelliJ debugger's evaluator window (and Google/SO results, too).</p>\n"},{"tags":["java","tic-tac-toe"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1642384845,"post_id":70735688,"comment_id":125049215,"body_markdown":"*&quot;I am trying to repeat it using the switch case at the very end&quot;* -- that isn&#39;t going to work. You repeat anything in Java with a ***loop***, here a while loop. The switch statement can be used to check user input and change the loop control condition, but won&#39;t loop by itself. Also, side issue is that you&#39;re comparing Strings wrong, not `==` but rather `.equals`","body":"<i>&quot;I am trying to repeat it using the switch case at the very end&quot;</i> -- that isn&#39;t going to work. You repeat anything in Java with a <b><i>loop</i></b>, here a while loop. The switch statement can be used to check user input and change the loop control condition, but won&#39;t loop by itself. Also, side issue is that you&#39;re comparing Strings wrong, not <code>==</code> but rather <code>.equals</code>"},{"owner":{"account_id":23944983,"reputation":9,"user_id":17937449,"display_name":"Sarah Mcwilliams"},"score":0,"creation_date":1642434707,"post_id":70735688,"comment_id":125064070,"body_markdown":"Noted about the string issue, thanks. The other day i was trying to use a while loop in Main right after the static variables and before the checkWinner method and the console said that &quot;while(true) {&quot; and &quot;static String checkWinner&quot; are illegal starts of type. I am not sure what that means or why i cannot use the while loop.","body":"Noted about the string issue, thanks. The other day i was trying to use a while loop in Main right after the static variables and before the checkWinner method and the console said that &quot;while(true) {&quot; and &quot;static String checkWinner&quot; are illegal starts of type. I am not sure what that means or why i cannot use the while loop."}],"owner":{"account_id":23944983,"reputation":9,"user_id":17937449,"display_name":"Sarah Mcwilliams"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1642429013,"creation_date":1642383892,"question_id":70735688,"body_markdown":"preface: I&#39;m a beginner so the solution may be obvious and I&#39;m not seeing it. I am making a tic tac toe program and I want to make it where the game can be played over and over. I have an idea of how I think it should go but I&#39;m not sure how to implement it. any help or criticism is welcome. (I am trying to repeat it using the switch case at the very end)\r\nFULL CODE:\r\n\r\n    import java.util.*;\r\n    import java.util.Random;\r\n    public class Main {\r\n\r\n    static String[] board;\r\n    static String turn;\r\n    static int counterX=0;\r\n    static int counterO=0;\r\n    static String continuePlaying;\r\n  \r\n     static String checkWinner()\r\n    {\r\n        for (int a = 0; a &lt; 8; a++) {\r\n            String line = null;\r\n  \r\n            switch (a) {\r\n            case 0:\r\n                line = board[0] + board[1] + board[2];\r\n                break;\r\n            case 1:\r\n                line = board[3] + board[4] + board[5];\r\n                break;\r\n            case 2:\r\n                line = board[6] + board[7] + board[8];\r\n                break;\r\n            case 3:\r\n                line = board[0] + board[3] + board[6];\r\n                break;\r\n            case 4:\r\n                line = board[1] + board[4] + board[7];\r\n                break;\r\n            case 5:\r\n                line = board[2] + board[5] + board[8];\r\n                break;\r\n            case 6:\r\n                line = board[0] + board[4] + board[8];\r\n                break;\r\n            case 7:\r\n                line = board[2] + board[4] + board[6];\r\n                break;\r\n            }\r\n            \r\n            //For X winner\r\n            if (line.equals(&quot;XXX&quot;)) {\r\n                return &quot;X&quot;;\r\n            }\r\n              \r\n            // For O winner\r\n            else if (line.equals(&quot;OOO&quot;)) {\r\n                return &quot;O&quot;;\r\n            }\r\n        }\r\n          \r\n        for (int a = 0; a &lt; 9; a++) {\r\n            if (Arrays.asList(board).contains(\r\n                    String.valueOf(a + 1))) {\r\n                break;\r\n            }\r\n            else if (a == 8) {\r\n                return &quot;draw&quot;;\r\n            }\r\n        }\r\n  \r\n       \r\n       // To enter the X Or O at the exact place on board.\r\n        System.out.println(\r\n            turn + &quot;&#39;s turn; enter a slot number to place &quot;\r\n            + turn + &quot; in:&quot;);\r\n        return null;\r\n    }\r\n    \r\n    static void printBoard()\r\n    {\r\n        System.out.println(&quot;|---|---|---|&quot;);\r\n        System.out.println(&quot;| &quot; + board[0] + &quot; | &quot;\r\n                           + board[1] + &quot; | &quot; + board[2]\r\n                           + &quot; |&quot;);\r\n        System.out.println(&quot;|-----------|&quot;);\r\n        System.out.println(&quot;| &quot; + board[3] + &quot; | &quot;\r\n                           + board[4] + &quot; | &quot; + board[5]\r\n                           + &quot; |&quot;);\r\n        System.out.println(&quot;|-----------|&quot;);\r\n        System.out.println(&quot;| &quot; + board[6] + &quot; | &quot;\r\n                           + board[7] + &quot; | &quot; + board[8]\r\n                           + &quot; |&quot;);\r\n        System.out.println(&quot;|---|---|---|&quot;);\r\n    }\r\n \r\n    public static void main(String[] args)\r\n    {\r\n        Scanner in = new Scanner(System.in);\r\n        board = new String[9];\r\n     final int min=0;\r\n     final int max=1;\r\n     int num = (int)Math.floor(Math.random()*(max-min+1)+min);\r\n      //random number between 0-1\r\n      if (num==min){\r\n            System.out.println(\r\n                &quot;X will play first. Enter a slot number to place X in:&quot;);\r\n                turn=&quot;X&quot;;}else{\r\n                      System.out.println(\r\n                &quot;O will play first. Enter a slot number to place O in:&quot;);\r\n                turn=&quot;O&quot;;\r\n                }\r\n            String winner = null;\r\n\r\n  \r\n        for (int a = 0; a &lt; 9; a++) {\r\n            board[a] = String.valueOf(a + 1);\r\n        }\r\n  \r\n        System.out.println(&quot;Welcome to 3x3 Tic Tac Toe.&quot;);\r\n        printBoard();\r\n  \r\n\r\n\r\n  \r\n        while (winner == null) {\r\n            int numInput;\r\n            \r\n           // Exception handling.\r\n           // numInput will take input from user like from 1 to 9.\r\n           // If it is not in range from 1 to 9.\r\n           // then it will show you an error &quot;Invalid input.&quot;\r\n            try {\r\n                numInput = in.nextInt();\r\n                if (!(numInput &gt; 0 &amp;&amp; numInput &lt;= 9)) {\r\n                    System.out.println(\r\n                        &quot;Invalid input; re-enter slot number:&quot;);\r\n                    continue;\r\n                }\r\n            }\r\n            catch (InputMismatchException e) {\r\n                System.out.println(\r\n                    &quot;Invalid input; re-enter slot number:&quot;);\r\n                continue;\r\n            }\r\n              \r\n            // This game has two player x and O.\r\n            // Here is the logic to decide the turn.\r\n            if (board[numInput - 1].equals(\r\n                    String.valueOf(numInput))) {\r\n                board[numInput - 1] = turn;\r\n  \r\n                if (turn.equals(&quot;X&quot;)) {\r\n                    turn = &quot;O&quot;;\r\n                }\r\n                else {\r\n                    turn = &quot;X&quot;;\r\n                }\r\n  \r\n                printBoard();\r\n                winner = checkWinner();\r\n            }\r\n            else {\r\n                System.out.println(\r\n                    &quot;Slot already taken; re-enter slot number:&quot;);\r\n            }\r\n        }\r\n\r\n        if (winner.equalsIgnoreCase(&quot;draw&quot;)) {\r\n            System.out.println(\r\n                &quot;It&#39;s a draw! Thanks for playing.&quot;);\r\n        }\r\n        \r\n        else {\r\n            System.out.println(\r\n                &quot;Congratulations! &quot; + winner\r\n                + &quot;&#39;s have won! Thanks for playing.&quot;);\r\n              \r\n    \r\n        }\r\n        if (winner==&quot;X&quot;) {\r\n          counterX++;\r\n        System.out.println(&quot;X&#39;s have &quot;+ counterX + &quot;(s) wins.&quot;);\r\n         System.out.println(&quot;Os have &quot;+ counterO + &quot;(s) wins.&quot;);\r\n        }\r\n        else if (winner==&quot;O&quot;){\r\n          counterO++;\r\n        System.out.println(&quot;X&#39;s have &quot;+ counterX + &quot;(s) wins.&quot;);\r\n         System.out.println(&quot;Os have &quot;+ counterO + &quot;(s) wins.&quot;);\r\n        }\r\n      System.out.println(&quot;Continue playing? Enter 1 to continue or 0 to end.&quot;);\r\n      int play=in.nextInt();\r\n      switch(play) {\r\n        case 0:\r\n          continuePlaying = &quot;N&quot;;\r\n          java.lang.System.exit(0); \r\n            break;\r\n        case 1:\r\n         continuePlaying = &quot;Y&quot;;\r\n          break;\r\n      }\r\n        }\r\n    }","title":"trying to loop or create a new board- tic tac toe java program","body":"<p>preface: I'm a beginner so the solution may be obvious and I'm not seeing it. I am making a tic tac toe program and I want to make it where the game can be played over and over. I have an idea of how I think it should go but I'm not sure how to implement it. any help or criticism is welcome. (I am trying to repeat it using the switch case at the very end)\nFULL CODE:</p>\n<pre><code>import java.util.*;\nimport java.util.Random;\npublic class Main {\n\nstatic String[] board;\nstatic String turn;\nstatic int counterX=0;\nstatic int counterO=0;\nstatic String continuePlaying;\n\n static String checkWinner()\n{\n    for (int a = 0; a &lt; 8; a++) {\n        String line = null;\n\n        switch (a) {\n        case 0:\n            line = board[0] + board[1] + board[2];\n            break;\n        case 1:\n            line = board[3] + board[4] + board[5];\n            break;\n        case 2:\n            line = board[6] + board[7] + board[8];\n            break;\n        case 3:\n            line = board[0] + board[3] + board[6];\n            break;\n        case 4:\n            line = board[1] + board[4] + board[7];\n            break;\n        case 5:\n            line = board[2] + board[5] + board[8];\n            break;\n        case 6:\n            line = board[0] + board[4] + board[8];\n            break;\n        case 7:\n            line = board[2] + board[4] + board[6];\n            break;\n        }\n        \n        //For X winner\n        if (line.equals(&quot;XXX&quot;)) {\n            return &quot;X&quot;;\n        }\n          \n        // For O winner\n        else if (line.equals(&quot;OOO&quot;)) {\n            return &quot;O&quot;;\n        }\n    }\n      \n    for (int a = 0; a &lt; 9; a++) {\n        if (Arrays.asList(board).contains(\n                String.valueOf(a + 1))) {\n            break;\n        }\n        else if (a == 8) {\n            return &quot;draw&quot;;\n        }\n    }\n\n   \n   // To enter the X Or O at the exact place on board.\n    System.out.println(\n        turn + &quot;'s turn; enter a slot number to place &quot;\n        + turn + &quot; in:&quot;);\n    return null;\n}\n\nstatic void printBoard()\n{\n    System.out.println(&quot;|---|---|---|&quot;);\n    System.out.println(&quot;| &quot; + board[0] + &quot; | &quot;\n                       + board[1] + &quot; | &quot; + board[2]\n                       + &quot; |&quot;);\n    System.out.println(&quot;|-----------|&quot;);\n    System.out.println(&quot;| &quot; + board[3] + &quot; | &quot;\n                       + board[4] + &quot; | &quot; + board[5]\n                       + &quot; |&quot;);\n    System.out.println(&quot;|-----------|&quot;);\n    System.out.println(&quot;| &quot; + board[6] + &quot; | &quot;\n                       + board[7] + &quot; | &quot; + board[8]\n                       + &quot; |&quot;);\n    System.out.println(&quot;|---|---|---|&quot;);\n}\n\npublic static void main(String[] args)\n{\n    Scanner in = new Scanner(System.in);\n    board = new String[9];\n final int min=0;\n final int max=1;\n int num = (int)Math.floor(Math.random()*(max-min+1)+min);\n  //random number between 0-1\n  if (num==min){\n        System.out.println(\n            &quot;X will play first. Enter a slot number to place X in:&quot;);\n            turn=&quot;X&quot;;}else{\n                  System.out.println(\n            &quot;O will play first. Enter a slot number to place O in:&quot;);\n            turn=&quot;O&quot;;\n            }\n        String winner = null;\n\n\n    for (int a = 0; a &lt; 9; a++) {\n        board[a] = String.valueOf(a + 1);\n    }\n\n    System.out.println(&quot;Welcome to 3x3 Tic Tac Toe.&quot;);\n    printBoard();\n\n\n\n\n    while (winner == null) {\n        int numInput;\n        \n       // Exception handling.\n       // numInput will take input from user like from 1 to 9.\n       // If it is not in range from 1 to 9.\n       // then it will show you an error &quot;Invalid input.&quot;\n        try {\n            numInput = in.nextInt();\n            if (!(numInput &gt; 0 &amp;&amp; numInput &lt;= 9)) {\n                System.out.println(\n                    &quot;Invalid input; re-enter slot number:&quot;);\n                continue;\n            }\n        }\n        catch (InputMismatchException e) {\n            System.out.println(\n                &quot;Invalid input; re-enter slot number:&quot;);\n            continue;\n        }\n          \n        // This game has two player x and O.\n        // Here is the logic to decide the turn.\n        if (board[numInput - 1].equals(\n                String.valueOf(numInput))) {\n            board[numInput - 1] = turn;\n\n            if (turn.equals(&quot;X&quot;)) {\n                turn = &quot;O&quot;;\n            }\n            else {\n                turn = &quot;X&quot;;\n            }\n\n            printBoard();\n            winner = checkWinner();\n        }\n        else {\n            System.out.println(\n                &quot;Slot already taken; re-enter slot number:&quot;);\n        }\n    }\n\n    if (winner.equalsIgnoreCase(&quot;draw&quot;)) {\n        System.out.println(\n            &quot;It's a draw! Thanks for playing.&quot;);\n    }\n    \n    else {\n        System.out.println(\n            &quot;Congratulations! &quot; + winner\n            + &quot;'s have won! Thanks for playing.&quot;);\n          \n\n    }\n    if (winner==&quot;X&quot;) {\n      counterX++;\n    System.out.println(&quot;X's have &quot;+ counterX + &quot;(s) wins.&quot;);\n     System.out.println(&quot;Os have &quot;+ counterO + &quot;(s) wins.&quot;);\n    }\n    else if (winner==&quot;O&quot;){\n      counterO++;\n    System.out.println(&quot;X's have &quot;+ counterX + &quot;(s) wins.&quot;);\n     System.out.println(&quot;Os have &quot;+ counterO + &quot;(s) wins.&quot;);\n    }\n  System.out.println(&quot;Continue playing? Enter 1 to continue or 0 to end.&quot;);\n  int play=in.nextInt();\n  switch(play) {\n    case 0:\n      continuePlaying = &quot;N&quot;;\n      java.lang.System.exit(0); \n        break;\n    case 1:\n     continuePlaying = &quot;Y&quot;;\n      break;\n  }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-restcontroller","spring-boot-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1642417053,"post_id":70740000,"comment_id":125056753,"body_markdown":"You are writing a full integration test, that is what `@SpringBootTest` is. What you want is to use `@WebMvcTest` for your specific controller instead.","body":"You are writing a full integration test, that is what <code>@SpringBootTest</code> is. What you want is to use <code>@WebMvcTest</code> for your specific controller instead."}],"answers":[{"tags":[],"owner":{"account_id":14713804,"reputation":620,"user_id":10811865,"display_name":"SirHawrk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642417316,"creation_date":1642417316,"answer_id":70740253,"question_id":70740000,"body_markdown":"I feel like there are two different questions in this one.\r\n\r\nFirst your problem is, that your entire SpringBootApplication is started because you are using ```@SpringBootTest``` use ```@WebMvcTest``` instead. You also &quot;need&quot; to use \r\n\r\n    @LocalServerPort \r\n    private int port;\r\n\r\nto actually access the port you add with `(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)`\r\n\r\n\r\nYour second problem \r\n\r\n&gt; On top of that, the data is not being flushed after executing each class, so the first one works fine and the rest throw a @Unique exception because the data is already there.\r\n\r\nCan easily be fixed by annotating your test with `@Transactional` tho I don&#39;t believe this to be the solution for your actual problem.\r\n\r\n","title":"How can I run a REST Controller test without loading data.sql?","body":"<p>I feel like there are two different questions in this one.</p>\n<p>First your problem is, that your entire SpringBootApplication is started because you are using <code>@SpringBootTest</code> use <code>@WebMvcTest</code> instead. You also &quot;need&quot; to use</p>\n<pre><code>@LocalServerPort \nprivate int port;\n</code></pre>\n<p>to actually access the port you add with <code>(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</code></p>\n<p>Your second problem</p>\n<blockquote>\n<p>On top of that, the data is not being flushed after executing each class, so the first one works fine and the rest throw a @Unique exception because the data is already there.</p>\n</blockquote>\n<p>Can easily be fixed by annotating your test with <code>@Transactional</code> tho I don't believe this to be the solution for your actual problem.</p>\n"},{"tags":[],"owner":{"account_id":16750375,"reputation":23,"user_id":12169711,"display_name":"andresdt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642428632,"creation_date":1642428632,"answer_id":70742719,"question_id":70740000,"body_markdown":"Thanks both for your answers. I had to do the following changes:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@WebMvcTest(controllers = GameController.class)\r\npublic class GameControllerTest {\r\n\r\n\t@Autowired\r\n\tMockMvc mockMvc;\r\n\r\n\t@MockBean\r\n\tprivate GameService gameService;\r\n\r\n    // I also have to mock all the services called from gameService:\r\n\r\n\t@MockBean\r\n\tprivate UserService userService;\r\n\r\n\t@MockBean\r\n\tprivate PlayerService playerService;\r\n\r\n\t@MockBean\r\n\tprivate DataSource dataSource; \r\n\r\n    // (...)\r\n```\r\n\r\nI didn&#39;t know that I also had to mock the services that were not called directly by the service. This way, `@WebMvcTest` works as expected.","title":"How can I run a REST Controller test without loading data.sql?","body":"<p>Thanks both for your answers. I had to do the following changes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@WebMvcTest(controllers = GameController.class)\npublic class GameControllerTest {\n\n    @Autowired\n    MockMvc mockMvc;\n\n    @MockBean\n    private GameService gameService;\n\n    // I also have to mock all the services called from gameService:\n\n    @MockBean\n    private UserService userService;\n\n    @MockBean\n    private PlayerService playerService;\n\n    @MockBean\n    private DataSource dataSource; \n\n    // (...)\n</code></pre>\n<p>I didn't know that I also had to mock the services that were not called directly by the service. This way, <code>@WebMvcTest</code> works as expected.</p>\n"}],"owner":{"account_id":16750375,"reputation":23,"user_id":12169711,"display_name":"andresdt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70742719,"answer_count":2,"score":0,"last_activity_date":1642428632,"creation_date":1642416034,"question_id":70740000,"body_markdown":"I&#39;m developing a Spring Boot application and I&#39;m having some trouble setting up RESTController tests. The problem is that, when I run the test classes individually, they all work. However, when I try to run all the test classes at once, only the first one works and the others throw `java.lang.IllegalStateException: Failed to load ApplicationContext`. I have been debugging this and the problematic line is the following:\r\n\r\n`INSERT INTO users(username,password, email) VALUES (&#39;admin&#39;,&#39;$2a$10$bicbzJTFskk8.sHWJauxCu2RzDIqXk/zCxQDZ5ByLQw0m0lQ6l2Pa&#39;, &#39;admin@mail.com&#39;) [23505-200]\r\nCaused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:spring-boot/target/classes/db/hsqldb/data.sql]: INSERT INTO users(username,password, email) VALUES (&#39;admin&#39;,&#39;$2a$10$bicbzJTFskk8.sHWJauxCu2RzDIqXk/zCxQDZ5ByLQw0m0lQ6l2Pa&#39;, &#39;admin@mail.com&#39;); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: &quot;PUBLIC.PRIMARY_KEY_4D ON PUBLIC.USERS(USERNAME) VALUES 1&quot;; SQL statement:\r\n`\r\n\r\nThis leads me to think that the `data.sql` script is being executed on every test (which I believe should not be the case since my controller tests shouldn&#39;t rely on DB data). On top of that, the data is not being flushed after executing each class, so the first one works fine and the rest throw a `@Unique` exception because the data is already there.\r\n\r\nMy REST controller tests look like this:\r\n\r\n```java\r\n@DirtiesContext(classMode = ClassMode.BEFORE_CLASS)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@AutoConfigureMockMvc(addFilters = false)\r\npublic class GameControllerTest {\r\n\r\n    @Autowired\r\n    MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    GameService gameService;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        Game game1 = new Game();\r\n        game1.setId(1);\r\n\r\n        Game game2 = new Game();\r\n        game2.setId(2);\r\n\r\n        Lobby lobby = new Lobby();\r\n\r\n        when(gameService.findAll()).thenReturn(List.of(game1, game2));\r\n        when(gameService.createFromLobby(lobby)).thenReturn(game1);\r\n        when(gameService.gameCount()).thenReturn(List.of(game1, game2).size());\r\n        when(gameService.findGameById(1)).thenReturn(game1);\r\n\r\n    }\r\n\r\n    @Test\r\n    void testGetAllGames() throws Exception {\r\n        mockMvc.perform(get(&quot;/games&quot;)).andExpect(status().isOk()).andExpect(jsonPath(&quot;$&quot;, hasSize(2)))\r\n                .andExpect(jsonPath(&quot;$[0].id&quot;, is(1)))\r\n                .andExpect(jsonPath(&quot;$[1].id&quot;, is(2)));\r\n    }\r\n```\r\n\r\nAs you can see, I also tried to use `@DirtiesContext(classMode = ClassMode.BEFORE_CLASS)` but it does not fix the problem.","title":"How can I run a REST Controller test without loading data.sql?","body":"<p>I'm developing a Spring Boot application and I'm having some trouble setting up RESTController tests. The problem is that, when I run the test classes individually, they all work. However, when I try to run all the test classes at once, only the first one works and the others throw <code>java.lang.IllegalStateException: Failed to load ApplicationContext</code>. I have been debugging this and the problematic line is the following:</p>\n<p><code>INSERT INTO users(username,password, email) VALUES ('admin','$2a$10$bicbzJTFskk8.sHWJauxCu2RzDIqXk/zCxQDZ5ByLQw0m0lQ6l2Pa', 'admin@mail.com') [23505-200] Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:spring-boot/target/classes/db/hsqldb/data.sql]: INSERT INTO users(username,password, email) VALUES ('admin','$2a$10$bicbzJTFskk8.sHWJauxCu2RzDIqXk/zCxQDZ5ByLQw0m0lQ6l2Pa', 'admin@mail.com'); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: &quot;PUBLIC.PRIMARY_KEY_4D ON PUBLIC.USERS(USERNAME) VALUES 1&quot;; SQL statement: </code></p>\n<p>This leads me to think that the <code>data.sql</code> script is being executed on every test (which I believe should not be the case since my controller tests shouldn't rely on DB data). On top of that, the data is not being flushed after executing each class, so the first one works fine and the rest throw a <code>@Unique</code> exception because the data is already there.</p>\n<p>My REST controller tests look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DirtiesContext(classMode = ClassMode.BEFORE_CLASS)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc(addFilters = false)\npublic class GameControllerTest {\n\n    @Autowired\n    MockMvc mockMvc;\n\n    @MockBean\n    GameService gameService;\n\n    @BeforeEach\n    void setup() {\n        Game game1 = new Game();\n        game1.setId(1);\n\n        Game game2 = new Game();\n        game2.setId(2);\n\n        Lobby lobby = new Lobby();\n\n        when(gameService.findAll()).thenReturn(List.of(game1, game2));\n        when(gameService.createFromLobby(lobby)).thenReturn(game1);\n        when(gameService.gameCount()).thenReturn(List.of(game1, game2).size());\n        when(gameService.findGameById(1)).thenReturn(game1);\n\n    }\n\n    @Test\n    void testGetAllGames() throws Exception {\n        mockMvc.perform(get(&quot;/games&quot;)).andExpect(status().isOk()).andExpect(jsonPath(&quot;$&quot;, hasSize(2)))\n                .andExpect(jsonPath(&quot;$[0].id&quot;, is(1)))\n                .andExpect(jsonPath(&quot;$[1].id&quot;, is(2)));\n    }\n</code></pre>\n<p>As you can see, I also tried to use <code>@DirtiesContext(classMode = ClassMode.BEFORE_CLASS)</code> but it does not fix the problem.</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":11052429,"reputation":478,"user_id":10089200,"display_name":"Shout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642428508,"creation_date":1642428508,"answer_id":70742689,"question_id":70725001,"body_markdown":"I&#39;ve found out that I have to put `maven { url &#39;https://jitpack.io&#39; }` inside a `settings.gradle` file, not the `top-level build` one and it works now. ","title":"How to add StompProtocolAndroid to Android Studio gradle?","body":"<p>I've found out that I have to put <code>maven { url 'https://jitpack.io' }</code> inside a <code>settings.gradle</code> file, not the <code>top-level build</code> one and it works now.</p>\n"}],"owner":{"account_id":11052429,"reputation":478,"user_id":10089200,"display_name":"Shout"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70742689,"answer_count":1,"score":0,"last_activity_date":1642428508,"creation_date":1642277047,"question_id":70725001,"body_markdown":"I&#39;m new to java and its build scripts. I&#39;ve already got a spring boot messaging service with `stomp` and `sockjs`. I want to send and receive messages from an android app. I&#39;d like to use https://github.com/NaikSoftware/StompProtocolAndroid for the stomp client. I have problems setting it up, though. \r\n\r\nI followed the steps described on that side, but it&#39;s kinda outdated. The server example linked there https://github.com/NaikSoftware/stomp-protocol-example-server has one `build.gradle` file and on my android studio there are two files, so I&#39;m kinda confused where to put them properties. \r\n\r\nI have cleaned android studio project with default `build.gradle` files. They look like this:\r\n\r\nfirst file:\r\n```gradle\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &quot;com.android.tools.build:gradle:7.0.4&quot;\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\nsecond file:\r\n```gradle\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.chatapp&quot;\r\n        minSdk 21\r\n        targetSdk 32\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.2&#39;\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}\r\n```\r\n\r\nand I added `maven { url &quot;https://jitpack.io&quot; }` to the first file right under `mavenCentral()`\r\n\r\nand `implementation &#39;com.github.NaikSoftware:StompProtocolAndroid:{latest version}&#39;` to the second file in the `dependencies` scope.\r\n\r\nIt syncs properly with a warning: `Failed to resolve: com.githubAffected Modules: &lt;a href=&quot;someLongPath/app/build.gradle&quot;&gt;app&lt;/a&gt;`\r\n\r\nbut when I build I get whole bunch of errors:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried to open them links but it returns &quot;error 404&quot; which means that these websites don&#39;t exist. \r\n\r\nI also googled this error: `Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.`\r\n\r\nI found some &quot;fixes&quot;, but they don&#39;t work for me, probably they&#39;re also outdated.\r\n\r\nHow can I add this library to my android app?\r\n\r\n  [1]: https://i.stack.imgur.com/OWP4k.png","title":"How to add StompProtocolAndroid to Android Studio gradle?","body":"<p>I'm new to java and its build scripts. I've already got a spring boot messaging service with <code>stomp</code> and <code>sockjs</code>. I want to send and receive messages from an android app. I'd like to use <a href=\"https://github.com/NaikSoftware/StompProtocolAndroid\" rel=\"nofollow noreferrer\">https://github.com/NaikSoftware/StompProtocolAndroid</a> for the stomp client. I have problems setting it up, though.</p>\n<p>I followed the steps described on that side, but it's kinda outdated. The server example linked there <a href=\"https://github.com/NaikSoftware/stomp-protocol-example-server\" rel=\"nofollow noreferrer\">https://github.com/NaikSoftware/stomp-protocol-example-server</a> has one <code>build.gradle</code> file and on my android studio there are two files, so I'm kinda confused where to put them properties.</p>\n<p>I have cleaned android studio project with default <code>build.gradle</code> files. They look like this:</p>\n<p>first file:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:7.0.4&quot;\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>second file:</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdk 32\n\n    defaultConfig {\n        applicationId &quot;com.example.chatapp&quot;\n        minSdk 21\n        targetSdk 32\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.2'\n    implementation 'com.android.volley:volley:1.2.1'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>and I added <code>maven { url &quot;https://jitpack.io&quot; }</code> to the first file right under <code>mavenCentral()</code></p>\n<p>and <code>implementation 'com.github.NaikSoftware:StompProtocolAndroid:{latest version}'</code> to the second file in the <code>dependencies</code> scope.</p>\n<p>It syncs properly with a warning: <code>Failed to resolve: com.githubAffected Modules: &lt;a href=&quot;someLongPath/app/build.gradle&quot;&gt;app&lt;/a&gt;</code></p>\n<p>but when I build I get whole bunch of errors:</p>\n<p><a href=\"https://i.stack.imgur.com/OWP4k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OWP4k.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to open them links but it returns &quot;error 404&quot; which means that these websites don't exist.</p>\n<p>I also googled this error: <code>Could not resolve all files for configuration ':app:debugRuntimeClasspath'.</code></p>\n<p>I found some &quot;fixes&quot;, but they don't work for me, probably they're also outdated.</p>\n<p>How can I add this library to my android app?</p>\n"},{"tags":["java","spring","amazon-web-services","amazon-s3","aws-lambda"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":2,"creation_date":1582151854,"post_id":60310267,"comment_id":106683581,"body_markdown":"I&#39;m not understanding what you&#39;re asking.  You mention Lambda and API Gateway but I don&#39;t see anything related to that.  Your link is just a S3 upload and your code seems to be trying to *output* a file and then put that file to S3.","body":"I&#39;m not understanding what you&#39;re asking.  You mention Lambda and API Gateway but I don&#39;t see anything related to that.  Your link is just a S3 upload and your code seems to be trying to <i>output</i> a file and then put that file to S3."},{"owner":{"account_id":12010931,"reputation":474,"user_id":8787628,"display_name":"Llama"},"score":0,"creation_date":1582155416,"post_id":60310267,"comment_id":106684578,"body_markdown":"Yep. Trying to put a file to s3 as clearly stated in the title. The file successfully uploads to s3 but the it is blank","body":"Yep. Trying to put a file to s3 as clearly stated in the title. The file successfully uploads to s3 but the it is blank"}],"answers":[{"tags":[],"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582153344,"creation_date":1582152164,"answer_id":60310425,"question_id":60310267,"body_markdown":"You&#39;re using an output stream as input to the upload request. Just use File, and include content type, for example:\r\n\r\n    File file = new File(fileName);\r\n    PutObjectRequest request = new PutObjectRequest(&quot;bucketname&quot;, &quot;keyname&quot;, file);\r\n    ObjectMetadata metadata = new ObjectMetadata();\r\n    metadata.setContentType(&quot;application/pdf&quot;);\r\n    request.setMetadata(metadata);\r\n    s3Client.putObject(request);","title":"AWS Lambda and S3 - uploaded pdf file is blank","body":"<p>You're using an output stream as input to the upload request. Just use File, and include content type, for example:</p>\n\n<pre><code>File file = new File(fileName);\nPutObjectRequest request = new PutObjectRequest(\"bucketname\", \"keyname\", file);\nObjectMetadata metadata = new ObjectMetadata();\nmetadata.setContentType(\"application/pdf\");\nrequest.setMetadata(metadata);\ns3Client.putObject(request);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12010931,"reputation":474,"user_id":8787628,"display_name":"Llama"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1607982992,"creation_date":1582906100,"answer_id":60455420,"question_id":60310267,"body_markdown":"Turns out that this will do this trick. Its all about encoding, thanks to the help of @KunLun. In my scenario, file is the multipart file (pdf) that is passed to aws via a POST to the url.\r\n\r\n - server gets a file with this byte -&gt; 0010 (this will not be\r\n   interpreted right, because a standard byte has 8 bits)\r\n - so, we encode it in base 64 -&gt; doesn&#39;t matter what result, decode it\r\n   to get a standard byte -&gt; 0000 0010 (now this is a standard byte and\r\n   is interpreted right by aws)\r\n - This source here helped a lot as well --&gt;\r\n   https://www.javaworld.com/article/3240006/base64-encoding-and-decoding-in-java-8.html?page=2\r\n\r\n \r\n```\r\n\r\n            Base64.Encoder enc = Base64.getEncoder();\r\n            byte[] encbytes = enc.encode(file.getBytes());\r\n            for (int i = 0; i &lt; encbytes.length; i++)\r\n            {\r\n                System.out.printf(&quot;%c&quot;, (char) encbytes[i]);\r\n                if (i != 0 &amp;&amp; i % 4 == 0)\r\n                    System.out.print(&#39; &#39;);\r\n            }\r\n            Base64.Decoder dec = Base64.getDecoder();\r\n            byte[] barray2 = dec.decode(encbytes);\r\n            InputStream fis = new ByteArrayInputStream(barray2);\r\n    \r\n            PutObjectResult objectResult = s3client.putObject(&quot;xxx&quot;, \r\n            file.getOriginalFilename(), fis, data);\r\n\r\n\r\n``` \r\nAnother very important piece to include is that the API Gateway settings must be properly configured to support binary data types. AWS Console --&gt; API Gateway --&gt; Settings --&gt; include what I have below in the attached photo\r\n[![ ][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EPcd7.png","title":"AWS Lambda and S3 - uploaded pdf file is blank","body":"<p>Turns out that this will do this trick. Its all about encoding, thanks to the help of @KunLun. In my scenario, file is the multipart file (pdf) that is passed to aws via a POST to the url.</p>\n<ul>\n<li>server gets a file with this byte -&gt; 0010 (this will not be\ninterpreted right, because a standard byte has 8 bits)</li>\n<li>so, we encode it in base 64 -&gt; doesn't matter what result, decode it\nto get a standard byte -&gt; 0000 0010 (now this is a standard byte and\nis interpreted right by aws)</li>\n<li>This source here helped a lot as well --&gt;\n<a href=\"https://www.javaworld.com/article/3240006/base64-encoding-and-decoding-in-java-8.html?page=2\" rel=\"nofollow noreferrer\">https://www.javaworld.com/article/3240006/base64-encoding-and-decoding-in-java-8.html?page=2</a></li>\n</ul>\n<pre><code>\n            Base64.Encoder enc = Base64.getEncoder();\n            byte[] encbytes = enc.encode(file.getBytes());\n            for (int i = 0; i &lt; encbytes.length; i++)\n            {\n                System.out.printf(&quot;%c&quot;, (char) encbytes[i]);\n                if (i != 0 &amp;&amp; i % 4 == 0)\n                    System.out.print(' ');\n            }\n            Base64.Decoder dec = Base64.getDecoder();\n            byte[] barray2 = dec.decode(encbytes);\n            InputStream fis = new ByteArrayInputStream(barray2);\n    \n            PutObjectResult objectResult = s3client.putObject(&quot;xxx&quot;, \n            file.getOriginalFilename(), fis, data);\n\n\n</code></pre>\n<p>Another very important piece to include is that the API Gateway settings must be properly configured to support binary data types. AWS Console --&gt; API Gateway --&gt; Settings --&gt; include what I have below in the attached photo\n<a href=\"https://i.stack.imgur.com/EPcd7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EPcd7.png\" alt=\" \" /></a></p>\n"},{"tags":[],"owner":{"account_id":9400120,"reputation":473,"user_id":7795583,"display_name":"Marjun Villegas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642428385,"creation_date":1642428385,"answer_id":70742662,"question_id":60310267,"body_markdown":"When you are uploading files using FORM-DATA from client to server-side, The server will get that file as base64. So, you have to decode it in order to get the actual file to be uploaded to your aws S3 bucket.\r\n\r\nQuick reference using nodeJS.\r\n\r\n    const decodedFile = Buffer.from(&lt;--add your encode base64 file --&gt;, &#39;base64&#39;); \r\n\r\nThat [const decodedFile] is going to be your value for the {Body} params for s3.\r\nYou can do the same concept or logic to any programming language out there!\r\n\r\nThank you.","title":"AWS Lambda and S3 - uploaded pdf file is blank","body":"<p>When you are uploading files using FORM-DATA from client to server-side, The server will get that file as base64. So, you have to decode it in order to get the actual file to be uploaded to your aws S3 bucket.</p>\n<p>Quick reference using nodeJS.</p>\n<pre><code>const decodedFile = Buffer.from(&lt;--add your encode base64 file --&gt;, 'base64'); \n</code></pre>\n<p>That [const decodedFile] is going to be your value for the {Body} params for s3.\nYou can do the same concept or logic to any programming language out there!</p>\n<p>Thank you.</p>\n"}],"owner":{"account_id":12010931,"reputation":474,"user_id":8787628,"display_name":"Llama"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5049,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":60455420,"answer_count":3,"score":3,"last_activity_date":1642428385,"creation_date":1582151232,"question_id":60310267,"body_markdown":" I have a pretty simple function that uploads a PDF file to an AWS S3  (https://codedestine.com/aws-s3-putobject-java/) using AWS Lambda with Amazon \r\n API Gateway.\r\n\r\nI try to upload a PDF file which has 2 pages with text. After upload, the PDF file(on AWS S3) has 2 blank pages.\r\n\r\nThis is the method I use to upload the PDF file on AWS S3.\r\n\r\n```\r\npublic static void uploadFile2(MultipartFile mpFile, String fileName) throws IOException{\r\n   \r\n    String dirPath = System.getProperty(&quot;java.io.tmpdir&quot;, &quot;/tmp&quot;);\r\n    File file = new File(dirPath  + &quot;/&quot; + fileName);\r\n\r\n    OutputStream ops = new FileOutputStream(file);\r\n    ops.write(mpFile.getBytes());\r\n\r\n    s3client.putObject(&quot;fakebucketname&quot;, fileName, file);\r\n\r\n}\r\n```\r\n\r\nWhy the uploaded PDF file is blank?","title":"AWS Lambda and S3 - uploaded pdf file is blank","body":"<p>I have a pretty simple function that uploads a PDF file to an AWS S3  (<a href=\"https://codedestine.com/aws-s3-putobject-java/\" rel=\"nofollow noreferrer\">https://codedestine.com/aws-s3-putobject-java/</a>) using AWS Lambda with Amazon\nAPI Gateway.</p>\n<p>I try to upload a PDF file which has 2 pages with text. After upload, the PDF file(on AWS S3) has 2 blank pages.</p>\n<p>This is the method I use to upload the PDF file on AWS S3.</p>\n<pre><code>public static void uploadFile2(MultipartFile mpFile, String fileName) throws IOException{\n   \n    String dirPath = System.getProperty(&quot;java.io.tmpdir&quot;, &quot;/tmp&quot;);\n    File file = new File(dirPath  + &quot;/&quot; + fileName);\n\n    OutputStream ops = new FileOutputStream(file);\n    ops.write(mpFile.getBytes());\n\n    s3client.putObject(&quot;fakebucketname&quot;, fileName, file);\n\n}\n</code></pre>\n<p>Why the uploaded PDF file is blank?</p>\n"},{"tags":["java","swing","jformattedtextfield"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1438925618,"post_id":31870342,"comment_id":51659076,"body_markdown":"*&quot;Also clearing this textfield with releaseNoTextField.setText(&quot;&quot;) is not working, is there another way to do this ?&quot;* - Have you tried `setValue(null)`?","body":"<i>&quot;Also clearing this textfield with releaseNoTextField.setText(&quot;&quot;) is not working, is there another way to do this ?&quot;</i> - Have you tried <code>setValue(null)</code>?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1438925626,"post_id":31870342,"comment_id":51659080,"body_markdown":"What means `is not working`?","body":"What means <code>is not working</code>?"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1438925939,"post_id":31870342,"comment_id":51659227,"body_markdown":"I &quot;think&quot; it&#39;s a requirement between the `JFormattedTextField`, `NumberFormatter` and `NumberFormat` that `&quot;&quot;` is not a valid number, therefore it&#39;s rejecting your attempt to remove the last character.  This requirement is been enforced by `numberFormatter.setAllowsInvalid`.  If you don&#39;t really care about the format of the value, but simply restricting the user&#39;s input, you could use a `JTextField` and `DocumentFilter`","body":"I &quot;think&quot; it&#39;s a requirement between the <code>JFormattedTextField</code>, <code>NumberFormatter</code> and <code>NumberFormat</code> that <code>&quot;&quot;</code> is not a valid number, therefore it&#39;s rejecting your attempt to remove the last character.  This requirement is been enforced by <code>numberFormatter.setAllowsInvalid</code>.  If you don&#39;t really care about the format of the value, but simply restricting the user&#39;s input, you could use a <code>JTextField</code> and <code>DocumentFilter</code>"},{"owner":{"account_id":4229929,"reputation":349,"user_id":3462473,"accept_rate":52,"display_name":"user3462473"},"score":0,"creation_date":1438931479,"post_id":31870342,"comment_id":51661495,"body_markdown":"@MadProgrammer  is there any way I can prompt the error after user leaves the field along with clearing the text ?","body":"@MadProgrammer  is there any way I can prompt the error after user leaves the field along with clearing the text ?"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1438933255,"post_id":31870342,"comment_id":51662401,"body_markdown":"If you&#39;re using `setAllowsInvalid(true)`, then the field should be reset after the user leaves the field. normally, I&#39;d use an `InputVerifier`, but I&#39;m not sure that would suitable for a `JFormattedTextField`","body":"If you&#39;re using <code>setAllowsInvalid(true)</code>, then the field should be reset after the user leaves the field. normally, I&#39;d use an <code>InputVerifier</code>, but I&#39;m not sure that would suitable for a <code>JFormattedTextField</code>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1438933307,"post_id":31870342,"comment_id":51662428,"body_markdown":"Actually, I lie, apparently you can use a `InputVerifer`, have a look at the [JavaDocs](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html) for an example","body":"Actually, I lie, apparently you can use a <code>InputVerifer</code>, have a look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html\" rel=\"nofollow noreferrer\">JavaDocs</a> for an example"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1438938132,"post_id":31870342,"comment_id":51665445,"body_markdown":"@user3462473 [for more infor... read](http://stackoverflow.com/q/7378821/714968)","body":"@user3462473 <a href=\"http://stackoverflow.com/q/7378821/714968\">for more infor... read</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1639945654,"creation_date":1438926309,"answer_id":31870538,"question_id":31870342,"body_markdown":"&gt; I have a JFormattedTextField which accepts number of 8 digits only, but when I try to clear the textfield with backspace button it doesnt delete first character of number (same behavior with delete button too), I have to presee Esc key to delete this character each time.\r\n\r\nThis is a restriction been applied by `numberFormatter.setAllowsInvalid(false);` which sees a blank `String` (`&quot;&quot;`) as not been a valid numerical value.  If you use `numberFormatter.setAllowsInvalid(true);` you can remove all the characters, but you can also enter any value you like.  \r\n\r\nThe field will be validated AFTER the user leaves the field though.\r\n\r\nIf you don&#39;t care about the value been formatted (`12, 345, 678`), then you could use a `DocumentFilter` applied to a plain `JTextField` an implement the logic you require within it.  See [Implementing a Document Filter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter) and [DocumentFilter Examples](https://www.javatips.net/api/javax.swing.text.documentfilter) for more details.\r\n\r\n&gt; Also clearing this textfield with releaseNoTextField.setText(&quot;&quot;) is not working, is there another way to do this ?\r\n\r\nYou should (always) be using `setValue` for `JFormattedTextField` and you should true `setValue(null)` to clear the field","title":"Clearing contents of JFormattedTextField not working?","body":"<blockquote>\n<p>I have a JFormattedTextField which accepts number of 8 digits only, but when I try to clear the textfield with backspace button it doesnt delete first character of number (same behavior with delete button too), I have to presee Esc key to delete this character each time.</p>\n</blockquote>\n<p>This is a restriction been applied by <code>numberFormatter.setAllowsInvalid(false);</code> which sees a blank <code>String</code> (<code>&quot;&quot;</code>) as not been a valid numerical value.  If you use <code>numberFormatter.setAllowsInvalid(true);</code> you can remove all the characters, but you can also enter any value you like.</p>\n<p>The field will be validated AFTER the user leaves the field though.</p>\n<p>If you don't care about the value been formatted (<code>12, 345, 678</code>), then you could use a <code>DocumentFilter</code> applied to a plain <code>JTextField</code> an implement the logic you require within it.  See <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter\" rel=\"nofollow noreferrer\">Implementing a Document Filter</a> and <a href=\"https://www.javatips.net/api/javax.swing.text.documentfilter\" rel=\"nofollow noreferrer\">DocumentFilter Examples</a> for more details.</p>\n<blockquote>\n<p>Also clearing this textfield with releaseNoTextField.setText(&quot;&quot;) is not working, is there another way to do this ?</p>\n</blockquote>\n<p>You should (always) be using <code>setValue</code> for <code>JFormattedTextField</code> and you should true <code>setValue(null)</code> to clear the field</p>\n"},{"tags":[],"owner":{"account_id":11130371,"reputation":21,"user_id":8170522,"display_name":"Hana Ziquel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1497620053,"creation_date":1497618933,"answer_id":44590204,"question_id":31870342,"body_markdown":"`releaseNoTextField.setFocusLostBehavior(javax.swing.JFormattedTextField.COMMIT);`","title":"Clearing contents of JFormattedTextField not working?","body":"<p><code>releaseNoTextField.setFocusLostBehavior(javax.swing.JFormattedTextField.COMMIT);</code></p>\n"},{"tags":[],"owner":{"account_id":22823593,"reputation":11,"user_id":16973152,"display_name":"Till Woitendorf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642428067,"creation_date":1642428067,"answer_id":70742594,"question_id":31870342,"body_markdown":"What if you don&#39;t want to allow invalid input but the empty textfield shall be still allowed ? Just overwrite the stringToValue()-method from the NumberFormatter\r\n\r\n    NumberFormat intFormat = NumberFormat.getIntegerInstance();\r\n    intFormat.setGroupingUsed(false);\r\n    NumberFormatter numberFormatter = new NumberFormatter(intFormat){\r\n    \t@Override\r\n    \tpublic Object stringToValue(String text) throws ParseException {\r\n    \t\tif (text.length() == 0)\r\n    \t\t\treturn null;\r\n    \t\treturn super.stringToValue(text);\r\n    \t}\r\n    };\r\n    numberFormatter.setValueClass(Integer.class); \r\n    numberFormatter.setAllowsInvalid(false);\r\n    numberFormatter.setMinimum(0);\r\n    numberFormatter.setMaximum(99999999);","title":"Clearing contents of JFormattedTextField not working?","body":"<p>What if you don't want to allow invalid input but the empty textfield shall be still allowed ? Just overwrite the stringToValue()-method from the NumberFormatter</p>\n<pre><code>NumberFormat intFormat = NumberFormat.getIntegerInstance();\nintFormat.setGroupingUsed(false);\nNumberFormatter numberFormatter = new NumberFormatter(intFormat){\n    @Override\n    public Object stringToValue(String text) throws ParseException {\n        if (text.length() == 0)\n            return null;\n        return super.stringToValue(text);\n    }\n};\nnumberFormatter.setValueClass(Integer.class); \nnumberFormatter.setAllowsInvalid(false);\nnumberFormatter.setMinimum(0);\nnumberFormatter.setMaximum(99999999);\n</code></pre>\n"}],"owner":{"account_id":4229929,"reputation":349,"user_id":3462473,"accept_rate":52,"display_name":"user3462473"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3661,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":31870538,"answer_count":3,"score":4,"last_activity_date":1642428067,"creation_date":1438925444,"question_id":31870342,"body_markdown":"1. I have a `JFormattedTextField` which accepts number of 8 digits only, but when I try to clear the textfield with backspace button it doesnt delete first character of number (same behavior with delete button too), I have to presee Esc key to delete this character each time.\r\n\r\n        NumberFormat intFormat = NumberFormat.getIntegerInstance();\r\n\t\tintFormat.setGroupingUsed(false);\r\n\t\tNumberFormatter numberFormatter = new NumberFormatter(intFormat);\r\n\t\tnumberFormatter.setValueClass(Integer.class); \r\n\t\tnumberFormatter.setAllowsInvalid(false);\r\n\t\tnumberFormatter.setMinimum(0);\r\n\t\tnumberFormatter.setMaximum(99999999);\r\n\t\t\r\n\t\treleaseNoTextField = new JFormattedTextField(numberFormatter);\r\n\r\nwhat&#39;s the problem here ?\r\n\r\n2. Also clearing this textfield with `releaseNoTextField.setText(&quot;&quot;)` is not working, is there another way to do this ?\r\n\t\t","title":"Clearing contents of JFormattedTextField not working?","body":"<ol>\n<li><p>I have a <code>JFormattedTextField</code> which accepts number of 8 digits only, but when I try to clear the textfield with backspace button it doesnt delete first character of number (same behavior with delete button too), I have to presee Esc key to delete this character each time.</p>\n\n<pre><code>NumberFormat intFormat = NumberFormat.getIntegerInstance();\nintFormat.setGroupingUsed(false);\nNumberFormatter numberFormatter = new NumberFormatter(intFormat);\nnumberFormatter.setValueClass(Integer.class); \nnumberFormatter.setAllowsInvalid(false);\nnumberFormatter.setMinimum(0);\nnumberFormatter.setMaximum(99999999);\n\nreleaseNoTextField = new JFormattedTextField(numberFormatter);\n</code></pre></li>\n</ol>\n\n<p>what's the problem here ?</p>\n\n<ol start=\"2\">\n<li>Also clearing this textfield with <code>releaseNoTextField.setText(\"\")</code> is not working, is there another way to do this ?</li>\n</ol>\n"},{"tags":["java","maven","apache-poi","classpath","pdfbox"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642253913,"post_id":70721936,"comment_id":125024399,"body_markdown":"Why do you need the PDFbox source code as a full fledged project? Maven can download the source code for the dependencies, and if you debug your project and you step into PDFbox code, you should be able to step through it. No need to have it as project locally. This should also solve your versioning problems.","body":"Why do you need the PDFbox source code as a full fledged project? Maven can download the source code for the dependencies, and if you debug your project and you step into PDFbox code, you should be able to step through it. No need to have it as project locally. This should also solve your versioning problems."},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1642254863,"post_id":70721936,"comment_id":125024620,"body_markdown":"@dunni First of all, it would only solve my versioning problems if I wanted to use the same version as the library uses. I would rather use the current version. Second, this is a general problem and question, i.e., not just about this specific situation. Same type of problem exists if I want to use two libraries which depend on different versions of a third library.","body":"@dunni First of all, it would only solve my versioning problems if I wanted to use the same version as the library uses. I would rather use the current version. Second, this is a general problem and question, i.e., not just about this specific situation. Same type of problem exists if I want to use two libraries which depend on different versions of a third library."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":1,"creation_date":1642254993,"post_id":70721936,"comment_id":125024641,"body_markdown":"Ok, but i still don&#39;t understand the real problem. If you have 2 libraries, which depend on different versions of the third library, in your application runtime classpath you only end up with one version of the third library, and that&#39;s the one you want to debug, right? Maven will not put both versions of the 3rd party library in the resulting classpath.","body":"Ok, but i still don&#39;t understand the real problem. If you have 2 libraries, which depend on different versions of the third library, in your application runtime classpath you only end up with one version of the third library, and that&#39;s the one you want to debug, right? Maven will not put both versions of the 3rd party library in the resulting classpath."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642255159,"post_id":70721936,"comment_id":125024684,"body_markdown":"The reason why i&#39;m asking for clarification is, that your question currently sounds to me like an https://en.wikipedia.org/wiki/XY_problem","body":"The reason why i&#39;m asking for clarification is, that your question currently sounds to me like an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/XY_problem</a>"},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1642255693,"post_id":70721936,"comment_id":125024815,"body_markdown":"I want to use two libraries in my application, PDFBox (so I can do some things with PDFs) and POI (so I can do some things with Word docs). I want to use the current version of PDFBox, to have the latest code and security fixes or whatever. The pom.xml for the current version of POI, however, specifies a previous version of PDFBox. So it puts the previous version on the classpath, and I cannot step through current-version source with it, as it is not the version being used.","body":"I want to use two libraries in my application, PDFBox (so I can do some things with PDFs) and POI (so I can do some things with Word docs). I want to use the current version of PDFBox, to have the latest code and security fixes or whatever. The pom.xml for the current version of POI, however, specifies a previous version of PDFBox. So it puts the previous version on the classpath, and I cannot step through current-version source with it, as it is not the version being used."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642255814,"post_id":70721936,"comment_id":125024845,"body_markdown":"But it should only put the previous version on the classpath in the case, where you removed the direct dependency to PDFBox and added it as project. Otherwise Maven should resolve both versions and only put one on the classpath. You could check that with `mvn dependency:tree`. The older PDFBox version, which is brought in by POI, should then have a remark like &quot;omitted for conflict with...&quot;.","body":"But it should only put the previous version on the classpath in the case, where you removed the direct dependency to PDFBox and added it as project. Otherwise Maven should resolve both versions and only put one on the classpath. You could check that with <code>mvn dependency:tree</code>. The older PDFBox version, which is brought in by POI, should then have a remark like &quot;omitted for conflict with...&quot;."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642255852,"post_id":70721936,"comment_id":125024855,"body_markdown":"If that doesn&#39;t work, then you have a problem with Maven (or the Eclipse integration), because Maven is able to deal with such situations and will resolve it usually correctly.","body":"If that doesn&#39;t work, then you have a problem with Maven (or the Eclipse integration), because Maven is able to deal with such situations and will resolve it usually correctly."},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1642256878,"post_id":70721936,"comment_id":125025067,"body_markdown":"So, if instead of making it an eclipse project, I just put a dependency in my application pom for the current version, it won&#39;t load the previous version? What happens when the POI library calls a method that has changed (or been deleted) in the new version? If Maven just fails to load it, I don&#39;t understand why there aren&#39;t failed applications all over the place. This would also mean it is not possible to change the library,","body":"So, if instead of making it an eclipse project, I just put a dependency in my application pom for the current version, it won&#39;t load the previous version? What happens when the POI library calls a method that has changed (or been deleted) in the new version? If Maven just fails to load it, I don&#39;t understand why there aren&#39;t failed applications all over the place. This would also mean it is not possible to change the library,"},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642257005,"post_id":70721936,"comment_id":125025099,"body_markdown":"Correct, Maven will use the version that you put directly as dependency. If POI doesn&#39;t work with this version, then you have to downgrade your version to make it work. Maven doesn&#39;t &quot;fail&quot; to load it, this is expected behaviour (since you cannot have 2 versions of the same library on the classpath, as you already noticed). Not sure what you mean with your last sentence.","body":"Correct, Maven will use the version that you put directly as dependency. If POI doesn&#39;t work with this version, then you have to downgrade your version to make it work. Maven doesn&#39;t &quot;fail&quot; to load it, this is expected behaviour (since you cannot have 2 versions of the same library on the classpath, as you already noticed). Not sure what you mean with your last sentence."},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1642258127,"post_id":70721936,"comment_id":125025357,"body_markdown":"ok, thanks -- I do not understand how large modern applications deal with this in general. POI loaded 61 libraries as maven dependencies, I don&#39;t see how an application with a list of dependencies of any size keeps from having version conflicts. And I can downgrade my own use in this case; when the conflict is between two libraries you want to use, that isn&#39;t possible. I figured since we have this tool for managing the elaborate dependencies we end up with, that someone had used classloaders or something so the actual dependencies could be honored. Thanks for the help.","body":"ok, thanks -- I do not understand how large modern applications deal with this in general. POI loaded 61 libraries as maven dependencies, I don&#39;t see how an application with a list of dependencies of any size keeps from having version conflicts. And I can downgrade my own use in this case; when the conflict is between two libraries you want to use, that isn&#39;t possible. I figured since we have this tool for managing the elaborate dependencies we end up with, that someone had used classloaders or something so the actual dependencies could be honored. Thanks for the help."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642335397,"post_id":70721936,"comment_id":125038642,"body_markdown":"From experience i can tell you, that version and dependency management can be a pain in large projects. But if you hit indeed a point where you need two different versions, then creating a separate application for a specific usecase is usually easier than managing classloaders within an application.","body":"From experience i can tell you, that version and dependency management can be a pain in large projects. But if you hit indeed a point where you need two different versions, then creating a separate application for a specific usecase is usually easier than managing classloaders within an application."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1642427775,"post_id":70721936,"comment_id":125061048,"body_markdown":"You can also exclude (see &quot;&lt;exclusions&gt;&quot; ) the 2.0.24 dependency in the POI dependency segment of the pom.xml.","body":"You can also exclude (see &quot;&lt;exclusions&gt;&quot; ) the 2.0.24 dependency in the POI dependency segment of the pom.xml."},{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1642551506,"post_id":70721936,"comment_id":125099634,"body_markdown":"I&#39;ve added the PDFBox dependency to POI because of PPT/WMF/EMF rendering and we usually upgrade that dependency. So no need to downgrade in your case, as you don&#39;t use that feature anyway. The heap of other dependencies come from Batik. Look at the 5.2.0 pom.xml and you&#39;ll see a lot of optional dependencies. Exclude those and run your tests. Also in the JPMS context, those are marked static/optional.","body":"I&#39;ve added the PDFBox dependency to POI because of PPT/WMF/EMF rendering and we usually upgrade that dependency. So no need to downgrade in your case, as you don&#39;t use that feature anyway. The heap of other dependencies come from Batik. Look at the 5.2.0 pom.xml and you&#39;ll see a lot of optional dependencies. Exclude those and run your tests. Also in the JPMS context, those are marked static/optional."}],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642427858,"creation_date":1642253751,"question_id":70721936,"body_markdown":"I have a Java application for which I&#39;m using PDFBox; the latest stable release of PDFBox is 2.0.25. I want to step through PDFBox code after my project calls it. \r\n\r\nI have downloaded the PDFBox source, imported it as a Maven project into an eclipse workspace, and put that project on the build path for the application project. I removed the PDFBox dependency from the pom.xml for my application, and did Maven update and clean rebuild for things.\r\n\r\nHowever, another part of my application uses POI, and it also depends on PDFBox, specifically 2.0.24. So the PDFBox 2.0.24 jar is in the &#39;referenced libraries&#39; for the application, and I&#39;ve verified that sometimes, when a PDFBox reference is made, it uses the 2.0.24 from the referenced libraries instead of my local 2.0.25 library.\r\n\r\nObviously in strict classpath terms this is problematic -- a classloader will run down the list of available full pathnames until it finds one, and it isn&#39;t evaluating library versions. I know this can theoretically be done, on a runtime level, with classloaders, but don&#39;t know how to apply that in my situation. How can this get resolved correctly in the general case? The general case wouldn&#39;t have to be a debugging situation, it could be 2 (or more) libraries attempting to use different versions of a common library just to get their work done.\r\n\r\nIn my current situation, I&#39;ve tried putting a PDFBox dependency before the POI dependency in the dependency list in the pom.xml. I don&#39;t know any other way to influence which jar the runtime might use. Is there some way to specify that the POI code use a different classloader or something?","title":"How can I debug my specific version of an open-source lib when there&#39;s a maven dependency for a previous version of that lib","body":"<p>I have a Java application for which I'm using PDFBox; the latest stable release of PDFBox is 2.0.25. I want to step through PDFBox code after my project calls it.</p>\n<p>I have downloaded the PDFBox source, imported it as a Maven project into an eclipse workspace, and put that project on the build path for the application project. I removed the PDFBox dependency from the pom.xml for my application, and did Maven update and clean rebuild for things.</p>\n<p>However, another part of my application uses POI, and it also depends on PDFBox, specifically 2.0.24. So the PDFBox 2.0.24 jar is in the 'referenced libraries' for the application, and I've verified that sometimes, when a PDFBox reference is made, it uses the 2.0.24 from the referenced libraries instead of my local 2.0.25 library.</p>\n<p>Obviously in strict classpath terms this is problematic -- a classloader will run down the list of available full pathnames until it finds one, and it isn't evaluating library versions. I know this can theoretically be done, on a runtime level, with classloaders, but don't know how to apply that in my situation. How can this get resolved correctly in the general case? The general case wouldn't have to be a debugging situation, it could be 2 (or more) libraries attempting to use different versions of a common library just to get their work done.</p>\n<p>In my current situation, I've tried putting a PDFBox dependency before the POI dependency in the dependency list in the pom.xml. I don't know any other way to influence which jar the runtime might use. Is there some way to specify that the POI code use a different classloader or something?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8317,"page":1675,"page_size":100}
