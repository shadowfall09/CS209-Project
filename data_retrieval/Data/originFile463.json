{"items":[{"tags":["java","java.util.concurrent"],"comments":[{"owner":{"account_id":6583624,"reputation":2702,"user_id":5087125,"display_name":"pvg"},"score":0,"creation_date":1450234398,"post_id":34303094,"comment_id":56348460,"body_markdown":"Isn&#39;t that just a convenience method? You can make your own ForkJoinPool with a thread factory that does the naming for you.","body":"Isn&#39;t that just a convenience method? You can make your own ForkJoinPool with a thread factory that does the naming for you."},{"owner":{"account_id":1319532,"reputation":1012,"user_id":1443529,"accept_rate":83,"display_name":"cpz"},"score":0,"creation_date":1450234791,"post_id":34303094,"comment_id":56348563,"body_markdown":"Oops, don&#39;t know but somehow missed this. https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean- Yup, as you said that was my thought too but failed to notice mentioned constructor.","body":"Oops, don&#39;t know but somehow missed this. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/concurrent/&hellip;</a> Yup, as you said that was my thought too but failed to notice mentioned constructor."}],"answers":[{"comments":[{"owner":{"account_id":1319532,"reputation":1012,"user_id":1443529,"accept_rate":83,"display_name":"cpz"},"score":0,"creation_date":1465456382,"post_id":36120445,"comment_id":62910815,"body_markdown":"I had already updated the question, method suggested is same as what I had done in the end. thanks","body":"I had already updated the question, method suggested is same as what I had done in the end. thanks"}],"tags":[],"owner":{"account_id":1201625,"reputation":6769,"user_id":1172174,"accept_rate":80,"display_name":"Gus"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1458513037,"creation_date":1458513037,"answer_id":36120445,"question_id":34303094,"body_markdown":"(Answering your update)\r\n\r\nThe following should allow you full control over the threads produced by your `ForkJoinPool`s. In my case I wanted to be able to do &quot;dangerous&quot; stuff like access system properties. The default implementation uses `java.util.concurrent.ForkJoinWorkerThread.InnocuousForkJoinWorkerThread` which has a security manager and zero permissions.\r\n\r\n    public class MyForkJoinThreadFactory implements ForkJoinPool.ForkJoinWorkerThreadFactory {\r\n      @Override\r\n      public ForkJoinWorkerThread newThread(ForkJoinPool pool) {\r\n        return new NotSoInnocuousWorkerThread(pool);\r\n      }\r\n    }\r\n\r\nand the worker thread (that now has all the same permissions as the rest of your application is this like this, plus whatever else you wanted....\r\n\r\n    public class NotSoInnocuousWorkerThread extends ForkJoinWorkerThread {\r\n      protected NotSoInnocuousWorkerThread(ForkJoinPool pool) {\r\n        super(pool);\r\n      }\r\n    }\r\n\r\nAnd you need to either pass the following property or set it in your code like this:\r\n\r\n    System.setProperty(&quot;java.util.concurrent.ForkJoinPool.common.threadFactory&quot;, \r\n                       MyForkJoinThreadFactory.class.getName());","title":"Is it not possible to supply a thread facory or name pattern to ForkJoinPool?","body":"<p>(Answering your update)</p>\n\n<p>The following should allow you full control over the threads produced by your <code>ForkJoinPool</code>s. In my case I wanted to be able to do \"dangerous\" stuff like access system properties. The default implementation uses <code>java.util.concurrent.ForkJoinWorkerThread.InnocuousForkJoinWorkerThread</code> which has a security manager and zero permissions.</p>\n\n<pre><code>public class MyForkJoinThreadFactory implements ForkJoinPool.ForkJoinWorkerThreadFactory {\n  @Override\n  public ForkJoinWorkerThread newThread(ForkJoinPool pool) {\n    return new NotSoInnocuousWorkerThread(pool);\n  }\n}\n</code></pre>\n\n<p>and the worker thread (that now has all the same permissions as the rest of your application is this like this, plus whatever else you wanted....</p>\n\n<pre><code>public class NotSoInnocuousWorkerThread extends ForkJoinWorkerThread {\n  protected NotSoInnocuousWorkerThread(ForkJoinPool pool) {\n    super(pool);\n  }\n}\n</code></pre>\n\n<p>And you need to either pass the following property or set it in your code like this:</p>\n\n<pre><code>System.setProperty(\"java.util.concurrent.ForkJoinPool.common.threadFactory\", \n                   MyForkJoinThreadFactory.class.getName());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1517948683,"post_id":38026502,"comment_id":84300669,"body_markdown":"Looks good except for the fact that `Executors.newWorkStealingPool()` sets the last argument (`async`) to `true`. You should probably do the same.","body":"Looks good except for the fact that <code>Executors.newWorkStealingPool()</code> sets the last argument (<code>async</code>) to <code>true</code>. You should probably do the same."},{"owner":{"account_id":954654,"reputation":1013,"user_id":980178,"display_name":"Morten Haraldsen"},"score":0,"creation_date":1518162408,"post_id":38026502,"comment_id":84400314,"body_markdown":"Nice catch. In general, the [documentation](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean-) for the async parameter is:\n\n&gt; if true, establishes local first-in-first-out scheduling mode for forked tasks &gt; that are never joined. This mode may be more appropriate than default \n&gt; locally stack-based mode in applications in which worker threads only \n&gt; process event-style asynchronous tasks. For default value, use false.","body":"Nice catch. In general, the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean-\" rel=\"nofollow noreferrer\">documentation</a> for the async parameter is:  &gt; if true, establishes local first-in-first-out scheduling mode for forked tasks &gt; that are never joined. This mode may be more appropriate than default  &gt; locally stack-based mode in applications in which worker threads only  &gt; process event-style asynchronous tasks. For default value, use false."},{"owner":{"account_id":2005139,"reputation":649,"user_id":1795240,"display_name":"k.liakos"},"score":4,"creation_date":1641457087,"post_id":38026502,"comment_id":124810466,"body_markdown":"I tried an example, and worker.getPoolIndex() always returns zero.","body":"I tried an example, and worker.getPoolIndex() always returns zero."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1655870046,"post_id":38026502,"comment_id":128431403,"body_markdown":"@k.liakos you are correct. I don&#39;t think you can invoke `worker.getPoolIndex()` before the pool has started. In any case, you could create a static `AtomicLong` field and generate IDs using `AtomicLong.getAndIncrement()`.","body":"@k.liakos you are correct. I don&#39;t think you can invoke <code>worker.getPoolIndex()</code> before the pool has started. In any case, you could create a static <code>AtomicLong</code> field and generate IDs using <code>AtomicLong.getAndIncrement()</code>."}],"tags":[],"owner":{"account_id":954654,"reputation":1013,"user_id":980178,"display_name":"Morten Haraldsen"},"comment_count":4,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1683035788,"creation_date":1466843169,"answer_id":38026502,"question_id":34303094,"body_markdown":"This seems to be the minimum required code, reusing the existing default factory:\r\n\r\n    final ForkJoinWorkerThreadFactory factory = new ForkJoinWorkerThreadFactory() {\r\n\t\t@Override\t\t\t\r\n        public ForkJoinWorkerThread newThread(ForkJoinPool pool) {\r\n            final ForkJoinWorkerThread worker = ForkJoinPool.defaultForkJoinWorkerThreadFactory.newThread(pool);\r\n\t\t\tworker.setName(&quot;my-thread-prefix-name-&quot; + worker.getPoolIndex());\r\n\t\t\treturn worker;\r\n\t\t}\r\n\t};\r\n\t\t\r\n\tforkJoinPool = new ForkJoinPool(Runtime.getRuntime().availableProcessors(), factory, null, false); ","title":"Is it not possible to supply a thread facory or name pattern to ForkJoinPool?","body":"<p>This seems to be the minimum required code, reusing the existing default factory:</p>\n<pre><code>final ForkJoinWorkerThreadFactory factory = new ForkJoinWorkerThreadFactory() {\n    @Override           \n    public ForkJoinWorkerThread newThread(ForkJoinPool pool) {\n        final ForkJoinWorkerThread worker = ForkJoinPool.defaultForkJoinWorkerThreadFactory.newThread(pool);\n        worker.setName(&quot;my-thread-prefix-name-&quot; + worker.getPoolIndex());\n        return worker;\n    }\n};\n    \nforkJoinPool = new ForkJoinPool(Runtime.getRuntime().availableProcessors(), factory, null, false); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1168666,"reputation":871,"user_id":1146365,"accept_rate":56,"display_name":"mr.M"},"score":1,"creation_date":1603274200,"post_id":61275515,"comment_id":113982774,"body_markdown":"the OP mentioned Java, not Kotlin.","body":"the OP mentioned Java, not Kotlin."},{"owner":{"account_id":1843009,"reputation":7936,"user_id":1672027,"accept_rate":94,"display_name":"Matt Klein"},"score":1,"creation_date":1603294303,"post_id":61275515,"comment_id":113993202,"body_markdown":"Thanks for the down vote explanation. When searching for how to do this in Kotlin this question is near the top of the results so this answer still seems valuable to me.","body":"Thanks for the down vote explanation. When searching for how to do this in Kotlin this question is near the top of the results so this answer still seems valuable to me."},{"owner":{"account_id":1843009,"reputation":7936,"user_id":1672027,"accept_rate":94,"display_name":"Matt Klein"},"score":1,"creation_date":1603294615,"post_id":61275515,"comment_id":113993374,"body_markdown":"And the OP does not mention Java, they ask about ForkJoinPool which is a JVM class usable from Java, Kotlin, Scala, etc.","body":"And the OP does not mention Java, they ask about ForkJoinPool which is a JVM class usable from Java, Kotlin, Scala, etc."},{"owner":{"account_id":1168666,"reputation":871,"user_id":1146365,"accept_rate":56,"display_name":"mr.M"},"score":1,"creation_date":1603351722,"post_id":61275515,"comment_id":114011094,"body_markdown":"there is the Java tag for this question","body":"there is the Java tag for this question"},{"owner":{"account_id":1843009,"reputation":7936,"user_id":1672027,"accept_rate":94,"display_name":"Matt Klein"},"score":1,"creation_date":1603489795,"post_id":61275515,"comment_id":114064196,"body_markdown":"There is also a `java.util.concurrent` tag, which is usable from all the JVM languages, like Kotlin. I don&#39;t see how having a Kotlin answer for something from the [Java Class Library](https://en.wikipedia.org/wiki/Java_Class_Library), which is available to all JVM languages, is negative in any way.","body":"There is also a <code>java.util.concurrent</code> tag, which is usable from all the JVM languages, like Kotlin. I don&#39;t see how having a Kotlin answer for something from the <a href=\"https://en.wikipedia.org/wiki/Java_Class_Library\" rel=\"nofollow noreferrer\">Java Class Library</a>, which is available to all JVM languages, is negative in any way."},{"owner":{"account_id":1168666,"reputation":871,"user_id":1146365,"accept_rate":56,"display_name":"mr.M"},"score":0,"creation_date":1603551721,"post_id":61275515,"comment_id":114076178,"body_markdown":"let&#39;s write the examples for Scala/Groovy/Closure as well then","body":"let&#39;s write the examples for Scala/Groovy/Closure as well then"},{"owner":{"account_id":1536289,"reputation":1554,"user_id":1432247,"accept_rate":100,"display_name":"Adwait Kumar"},"score":2,"creation_date":1603953280,"post_id":61275515,"comment_id":114200077,"body_markdown":"@mr.M I think you meant Clojure.","body":"@mr.M I think you meant Clojure."}],"tags":[],"owner":{"account_id":1843009,"reputation":7936,"user_id":1672027,"accept_rate":94,"display_name":"Matt Klein"},"comment_count":7,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1587138240,"creation_date":1587138240,"answer_id":61275515,"question_id":34303094,"body_markdown":"Here is @Morten Haraldsen&#39;s answer ported to Kotlin:\r\n\r\n```\r\nval forkJoinPool =\r\n    ForkJoinPool.ForkJoinWorkerThreadFactory { pool -&gt;\r\n        ForkJoinPool.defaultForkJoinWorkerThreadFactory.newThread(pool).apply {\r\n            name = &quot;my-thread-prefix-name-$poolIndex&quot;\r\n        }\r\n    }.let { factory -&gt; ForkJoinPool(Runtime.getRuntime().availableProcessors(), factory, null, true) }\r\n\r\n```","title":"Is it not possible to supply a thread facory or name pattern to ForkJoinPool?","body":"<p>Here is @Morten Haraldsen's answer ported to Kotlin:</p>\n\n<pre><code>val forkJoinPool =\n    ForkJoinPool.ForkJoinWorkerThreadFactory { pool -&gt;\n        ForkJoinPool.defaultForkJoinWorkerThreadFactory.newThread(pool).apply {\n            name = \"my-thread-prefix-name-$poolIndex\"\n        }\n    }.let { factory -&gt; ForkJoinPool(Runtime.getRuntime().availableProcessors(), factory, null, true) }\n\n</code></pre>\n"}],"owner":{"account_id":1319532,"reputation":1012,"user_id":1443529,"accept_rate":83,"display_name":"cpz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11562,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":38026502,"answer_count":3,"score":19,"last_activity_date":1683035788,"creation_date":1450233759,"question_id":34303094,"body_markdown":"I would like to set name for threads of the ForkJoinPool used by work stealing pool, supplied by\r\n\r\n    ExecutorService newWorkStealingPool(int parallelism)\r\n\r\nor\r\n\r\n    ExecutorService newWorkStealingPool()\r\n\r\nSo far I could not find a way to set custom names on threads used by this `ExecutorService`, is there a way?\r\n\r\n`newWorkStealingPool()` basically supplies a `ForkJoinPool`, but `ForkJoinPool` also doesn&#39;t have a public constructor with supplied name pattern.\r\n\r\n**update**:\r\nI have now found this constructor of\r\n[`ForkJoinPool`][1] which takes a thread factory `ForkJoinPool.ForkJoinWorkerThreadFactory`. But factory should return a `ForkJoinWorkerThread`, which doesn&#39;t have a public constructor. So I guess I will have to subclass `ForkJoinWorkerThread`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean-","title":"Is it not possible to supply a thread facory or name pattern to ForkJoinPool?","body":"<p>I would like to set name for threads of the ForkJoinPool used by work stealing pool, supplied by</p>\n\n<pre><code>ExecutorService newWorkStealingPool(int parallelism)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ExecutorService newWorkStealingPool()\n</code></pre>\n\n<p>So far I could not find a way to set custom names on threads used by this <code>ExecutorService</code>, is there a way?</p>\n\n<p><code>newWorkStealingPool()</code> basically supplies a <code>ForkJoinPool</code>, but <code>ForkJoinPool</code> also doesn't have a public constructor with supplied name pattern.</p>\n\n<p><strong>update</strong>:\nI have now found this constructor of\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html#ForkJoinPool-int-java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory-java.lang.Thread.UncaughtExceptionHandler-boolean-\" rel=\"noreferrer\"><code>ForkJoinPool</code></a> which takes a thread factory <code>ForkJoinPool.ForkJoinWorkerThreadFactory</code>. But factory should return a <code>ForkJoinWorkerThread</code>, which doesn't have a public constructor. So I guess I will have to subclass <code>ForkJoinWorkerThread</code>.</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683033243,"post_id":76155231,"comment_id":134301940,"body_markdown":"it&#39;s not saying that class is missing, it&#39;s saying a certain method is missing. A likely cause is that you have several versions of this method, and the wrong one is being loaded. Or you are calling it with the wrong parameters for this version of the library","body":"it&#39;s not saying that class is missing, it&#39;s saying a certain method is missing. A likely cause is that you have several versions of this method, and the wrong one is being loaded. Or you are calling it with the wrong parameters for this version of the library"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1683035603,"post_id":76155231,"comment_id":134302574,"body_markdown":"Considering that Eureka comes from Spring Cloud, it would be very helpful if you show which Spring Cloud version you&#39;re using (look in `pom.xml` for `spring-cloud-dependencies` and add this to your question).","body":"Considering that Eureka comes from Spring Cloud, it would be very helpful if you show which Spring Cloud version you&#39;re using (look in <code>pom.xml</code> for <code>spring-cloud-dependencies</code> and add this to your question)."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683035784,"creation_date":1683035368,"answer_id":76155531,"question_id":76155231,"body_markdown":"The problem you are facing is one of compatibility issues regarding Spring Boot and Spring Cloud. There&#39;s a compatibility matrix demonstrating which pairs of version you should use: https://stackoverflow.com/questions/42659920/is-there-a-compatibility-matrix-of-spring-boot-and-spring-cloud\r\n\r\nTry updating the versions of your dependencies according to it. I&#39;d recommend to use Spring BOM instead of explicitly defined parent, because use you can import multiple BOMs (in this case for Spring Boot and Spring Cloud) using compatibility matrix, but your project can have only one parent.\r\n\r\nIn your case it should be\r\n```xml\r\n&lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n             &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;2022.0.2&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.6&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n\r\n```","title":"NoSuchMethodException: ConfigDataEnvironmentPostProcessor.&lt;init&gt;() with Spring Boot 3.0.6 and Netflix Eureka","body":"<p>The problem you are facing is one of compatibility issues regarding Spring Boot and Spring Cloud. There's a compatibility matrix demonstrating which pairs of version you should use: <a href=\"https://stackoverflow.com/questions/42659920/is-there-a-compatibility-matrix-of-spring-boot-and-spring-cloud\">Is there a compatibility matrix of Spring-boot and Spring-cloud?</a></p>\n<p>Try updating the versions of your dependencies according to it. I'd recommend to use Spring BOM instead of explicitly defined parent, because use you can import multiple BOMs (in this case for Spring Boot and Spring Cloud) using compatibility matrix, but your project can have only one parent.</p>\n<p>In your case it should be</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n             &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;2022.0.2&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;3.0.6&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n</code></pre>\n"}],"owner":{"account_id":333852,"reputation":1165,"user_id":659922,"accept_rate":56,"display_name":"J.E.Y"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683035784,"creation_date":1683033071,"question_id":76155231,"body_markdown":"These are the relevant pom setting:\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.6&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    ....\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nwhen trying to run the code below from IntelliJ:\r\n\r\n    @EnableEurekaServer\r\n    @SpringBootApplication\r\n    public class ServiceRegistrationAndDiscoveryServiceApplication {\r\n      public static void main(String[] args) {\r\n        SpringApplication.run(ServiceRegistrationAndDiscoveryServiceApplication.class, args);\r\n      }\r\n    }\r\nit throws error like:\r\n\r\n    Caused by: java.lang.NoSuchMethodException: org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.&lt;init&gt;()\r\n\r\nit seems straightforward but I have no way of finding the jar that contains this class. The [document][1] didn&#39;t say how it&#39;s bundled. A plausible dependency is:\r\n\r\n           &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nbut looking into its inside, it didn&#39;t have the said class even the package name didn&#39;t match. \r\n\r\nWhere is this mysterical jar?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/config/package-summary.html","title":"NoSuchMethodException: ConfigDataEnvironmentPostProcessor.&lt;init&gt;() with Spring Boot 3.0.6 and Netflix Eureka","body":"<p>These are the relevant pom setting:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.6&lt;/version&gt;\n&lt;/parent&gt;\n....\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>when trying to run the code below from IntelliJ:</p>\n<pre><code>@EnableEurekaServer\n@SpringBootApplication\npublic class ServiceRegistrationAndDiscoveryServiceApplication {\n  public static void main(String[] args) {\n    SpringApplication.run(ServiceRegistrationAndDiscoveryServiceApplication.class, args);\n  }\n}\n</code></pre>\n<p>it throws error like:</p>\n<pre><code>Caused by: java.lang.NoSuchMethodException: org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.&lt;init&gt;()\n</code></pre>\n<p>it seems straightforward but I have no way of finding the jar that contains this class. The <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/config/package-summary.html\" rel=\"nofollow noreferrer\">document</a> didn't say how it's bundled. A plausible dependency is:</p>\n<pre><code>       &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>but looking into its inside, it didn't have the said class even the package name didn't match.</p>\n<p>Where is this mysterical jar?</p>\n"},{"tags":["java","spring","spring-kafka"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1683037321,"post_id":76155565,"comment_id":134303048,"body_markdown":"I don&#39;t see any problems with your logic. So, what is wrong with having that `publisher` business service which is going to call `KafkaTemplate.send()` ?","body":"I don&#39;t see any problems with your logic. So, what is wrong with having that <code>publisher</code> business service which is going to call <code>KafkaTemplate.send()</code> ?"},{"owner":{"account_id":11273864,"reputation":23,"user_id":8268465,"display_name":"code_capo"},"score":0,"creation_date":1683038414,"post_id":76155565,"comment_id":134303338,"body_markdown":"I guess I was curious to know how you could delegate the payload to another service class and invoke the method over there. Just to make the separations very clear and keep the consumer only consuming the message and doing the transformation","body":"I guess I was curious to know how you could delegate the payload to another service class and invoke the method over there. Just to make the separations very clear and keep the consumer only consuming the message and doing the transformation"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1683039360,"post_id":76155565,"comment_id":134303610,"body_markdown":"The way you have it no is OK. There is also a feature via `@SendTo` which is going to use a return of this `@KafkaListener` as a body for record to produce for the topic. But that one is mostly designed for replies: https://docs.spring.io/spring-kafka/reference/html/#annotation-send-to","body":"The way you have it no is OK. There is also a feature via <code>@SendTo</code> which is going to use a return of this <code>@KafkaListener</code> as a body for record to produce for the topic. But that one is mostly designed for replies: <a href=\"https://docs.spring.io/spring-kafka/reference/html/#annotation-send-to\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#annotation-send-&zwnj;&#8203;to</a>"}],"owner":{"account_id":11273864,"reputation":23,"user_id":8268465,"display_name":"code_capo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683035584,"creation_date":1683035584,"question_id":76155565,"body_markdown":"I am implementing a kafka consumer using spring kafka and its @KafkaListener annotation on a void method\r\n\r\nI essentially need to do some transformation and then publish the message back out to the topic\r\n\r\nHowever I want to create a construct so I don&#39;t publish to a topic inside the consumer. I want to delegate the payload to another class and then invoke the publisher within the delegated class there\r\n\r\nHere is an example\r\n\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport org.springframework.kafka.annotation.KafkaListener;\r\nimport org.springframework.messaging.handler.annotation.Payload;\r\n\r\nclass Scratch {\r\n    public static void main(String[] args) {\r\n        \r\n    }\r\n\r\n    @KafkaListener(id = &quot;ID&quot;, topics = &quot;REQUEST-TOPIC&quot;)\r\n    public void getPartArrangementViaPartRoutingArrangement(@Payload String content) {\r\n        \r\n\r\n        try {\r\n\r\n            // omitted code implementation for mapping and transformation\r\n            String partConfigIdsToSend = &quot;Transformed&quot; + content;\r\n            \r\n            // send a message on another topic directly inside the consumer, is there a way we can delegate this into another class\r\n            publisher.sendPartConfigs(partConfigIdsToSend);\r\n\r\n\r\n        } catch (JsonProcessingException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        \r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nLike to delegate the producer into another class and not invoke directly inside the consumer","title":"Decouple business logic from a kafka consumer","body":"<p>I am implementing a kafka consumer using spring kafka and its @KafkaListener annotation on a void method</p>\n<p>I essentially need to do some transformation and then publish the message back out to the topic</p>\n<p>However I want to create a construct so I don't publish to a topic inside the consumer. I want to delegate the payload to another class and then invoke the publisher within the delegated class there</p>\n<p>Here is an example</p>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport org.springframework.kafka.annotation.KafkaListener;\nimport org.springframework.messaging.handler.annotation.Payload;\n\nclass Scratch {\n    public static void main(String[] args) {\n        \n    }\n\n    @KafkaListener(id = &quot;ID&quot;, topics = &quot;REQUEST-TOPIC&quot;)\n    public void getPartArrangementViaPartRoutingArrangement(@Payload String content) {\n        \n\n        try {\n\n            // omitted code implementation for mapping and transformation\n            String partConfigIdsToSend = &quot;Transformed&quot; + content;\n            \n            // send a message on another topic directly inside the consumer, is there a way we can delegate this into another class\n            publisher.sendPartConfigs(partConfigIdsToSend);\n\n\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(e);\n        }\n        \n    }\n}\n</code></pre>\n<p>Like to delegate the producer into another class and not invoke directly inside the consumer</p>\n"},{"tags":["java","android","android-custom-view","event-listener"],"comments":[{"owner":{"account_id":2450365,"reputation":13659,"user_id":2136812,"accept_rate":47,"display_name":"Lena Bru"},"score":0,"creation_date":1581700236,"post_id":60230546,"comment_id":106536752,"body_markdown":"please show more code from myCustomView,you need to invoke the listener when clicking the view, do you do it?","body":"please show more code from myCustomView,you need to invoke the listener when clicking the view, do you do it?"},{"owner":{"account_id":3310440,"reputation":169,"user_id":2784097,"accept_rate":62,"display_name":"apolloneo"},"score":0,"creation_date":1581701258,"post_id":60230546,"comment_id":106537136,"body_markdown":"@LenaBru Nothing more code related there. If you mean the custom view with regular button, let&#39;s say it&#39;s myCustomView2, all I did is declare the button, private Button myRegularBtn, assign the view from layout, myRegularBtn = findViewById(R.id.button1), and connect/pass the OnClickListener to it, public void setMyRegularBtnOnClickListener(OnClickListener o){myRegularBtn.setOnClickListener(o);} \nAnd that&#39;s it. That&#39;s why I thought the OnCheckedChangeListener would work in the same way.","body":"@LenaBru Nothing more code related there. If you mean the custom view with regular button, let&#39;s say it&#39;s myCustomView2, all I did is declare the button, private Button myRegularBtn, assign the view from layout, myRegularBtn = findViewById(R.id.button1), and connect/pass the OnClickListener to it, public void setMyRegularBtnOnClickListener(OnClickListener o){myRegularBtn.setOnClickListener(o);}  And that&#39;s it. That&#39;s why I thought the OnCheckedChangeListener would work in the same way."}],"answers":[{"tags":[],"owner":{"account_id":2450365,"reputation":13659,"user_id":2136812,"accept_rate":47,"display_name":"Lena Bru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581703489,"creation_date":1581703489,"answer_id":60231443,"question_id":60230546,"body_markdown":"You need to call your CheckedChangeListener yourself\r\n\r\ni.e lister.onCheckedChange(isChecked)\r\n\r\nIt would work out of the box only if you extend the CheckBox view.","title":"How to pass a CheckedChange Listener to a custom view","body":"<p>You need to call your CheckedChangeListener yourself</p>\n\n<p>i.e lister.onCheckedChange(isChecked)</p>\n\n<p>It would work out of the box only if you extend the CheckBox view.</p>\n"},{"tags":[],"owner":{"account_id":3310440,"reputation":169,"user_id":2784097,"accept_rate":62,"display_name":"apolloneo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683035353,"creation_date":1581951405,"answer_id":60265092,"question_id":60230546,"body_markdown":"Okay, I find the solution. The reason causes the custom listener stop working in the custom class is the XML file layout. In the past, all my successful experiences are build on the LinearLayout. I missed that in my original problem description. the new custom view XML file I used ConstraintLayout, instead of LinearLayout. This causes the &#39;abnormal&#39; inflate behavior that use to work with the LinearLayout.\r\n\r\nIn LinearLayout custom view class, init() function, I used\r\n\r\n    inflate(getContext(), R.layout.my_ll_custom_view,this);\r\nThis won&#39;t work with the constraintlayout. I have to use following code,\r\n\r\n    View rootView = LayoutInflater.from(context).inflate(R.layout.my_cl_custom_view, this, false);\r\n    ConstraintSet constraintSet = new ConstraintSet();\r\n    this.addView(rootView);\r\n    ConstraintLayout.LayoutParams clp = new \r\n    ConstraintLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, \r\n    ViewGroup.LayoutParams.WRAP_CONTENT);\r\n    rootView.setLayoutParams(clp);\r\n    constraintSet.clone(this);\r\n    constraintSet.connect(rootView.getId(), ConstraintSet.LEFT, this.getId(), ConstraintSet.LEFT, 0);\r\n    constraintSet.connect(rootView.getId(), ConstraintSet.RIGHT, this.getId(), ConstraintSet.RIGHT, 0);\r\n    constraintSet.connect(rootView.getId(), ConstraintSet.TOP, this.getId(), ConstraintSet.TOP, 0);\r\n    constraintSet.connect(rootView.getId(), ConstraintSet.BOTTOM, this.getId(), ConstraintSet.BOTTOM, 0);\r\nMore details can be found in https://jordan-dixon.com/2017/12/30/custom-views-with-constraint-layout-and-kotlin/\r\n\r\nI read this blog to figure this out. and I appreciate it.","title":"How to pass a CheckedChange Listener to a custom view","body":"<p>Okay, I find the solution. The reason causes the custom listener stop working in the custom class is the XML file layout. In the past, all my successful experiences are build on the LinearLayout. I missed that in my original problem description. the new custom view XML file I used ConstraintLayout, instead of LinearLayout. This causes the 'abnormal' inflate behavior that use to work with the LinearLayout.</p>\n<p>In LinearLayout custom view class, init() function, I used</p>\n<pre><code>inflate(getContext(), R.layout.my_ll_custom_view,this);\n</code></pre>\n<p>This won't work with the constraintlayout. I have to use following code,</p>\n<pre><code>View rootView = LayoutInflater.from(context).inflate(R.layout.my_cl_custom_view, this, false);\nConstraintSet constraintSet = new ConstraintSet();\nthis.addView(rootView);\nConstraintLayout.LayoutParams clp = new \nConstraintLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, \nViewGroup.LayoutParams.WRAP_CONTENT);\nrootView.setLayoutParams(clp);\nconstraintSet.clone(this);\nconstraintSet.connect(rootView.getId(), ConstraintSet.LEFT, this.getId(), ConstraintSet.LEFT, 0);\nconstraintSet.connect(rootView.getId(), ConstraintSet.RIGHT, this.getId(), ConstraintSet.RIGHT, 0);\nconstraintSet.connect(rootView.getId(), ConstraintSet.TOP, this.getId(), ConstraintSet.TOP, 0);\nconstraintSet.connect(rootView.getId(), ConstraintSet.BOTTOM, this.getId(), ConstraintSet.BOTTOM, 0);\n</code></pre>\n<p>More details can be found in <a href=\"https://jordan-dixon.com/2017/12/30/custom-views-with-constraint-layout-and-kotlin/\" rel=\"nofollow noreferrer\">https://jordan-dixon.com/2017/12/30/custom-views-with-constraint-layout-and-kotlin/</a></p>\n<p>I read this blog to figure this out. and I appreciate it.</p>\n"}],"owner":{"account_id":3310440,"reputation":169,"user_id":2784097,"accept_rate":62,"display_name":"apolloneo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60265092,"answer_count":2,"score":0,"last_activity_date":1683035374,"creation_date":1581699192,"question_id":60230546,"body_markdown":"I made a custom view with 3 toggle buttons. In my custom view class I set\r\n\r\n    public void setMyToggleButton1OnCheckedChangedListener(CompoundButton.OnCheckedChangeListener o) {\r\n        myToggleButton1.setOnCheckedChangeListener(o);\r\n    }\r\n\r\nbut when I try to handle this even in my main activity, it looks like this event never been triggered. In the main activity I tried\r\n\r\n    myCustomView.setMyToggleButton1OnCheckedChangedListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    //TODO something here\r\n                }\r\n                else {\r\n                    //TODO something here\r\n                }\r\n            }\r\n        });\r\n\r\nI did try my other custom view with regular button and pass the standard button click event to it with the same method. I don&#39;t understand what makes it different to pass a standard button click event to custom view and passing a toggle button checkedchange event listener to a custom view.\r\n\r\nPS: Here is what I did for regular button and its OnClickListener. This one works as I expected, that&#39;s why I try to replicate it to Toggle Button and the OnCheckedChangeListener.\r\n\r\nin myCustomView2 (the custom view contains regular buttons)\r\n\r\n    public class myCustomView2 extends ConstraintLayout{\r\n        private Button myRegBtn1;\r\n        ...\r\n        public myCustomView2(Context context) {\r\n            this(context, null);\r\n        }\r\n\r\n        public myCustomView2(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n             setAttributes(context, attrs);\r\n        }\r\n\r\n        public myCustomView2(Context context, AttributeSet attrs, int defStyleAttr) {\r\n            super(context, attrs, defStyleAttr);\r\n            setAttributes(context, attrs);\r\n            init(context);\r\n        }\r\n        \r\n        private void init(Context context) {\r\n            myRegBtn = findViewById(R.id.btn1);\r\n            ...\r\n        }\r\n        \r\n        private void setAttributes(Context context, AttributeSet attrs) {\r\n            ...\r\n        }\r\n  \r\n        public void setMyRegBtnOnClickListener(OnClickListener o) {\r\n            myRegBtn.setOnClickListener(o);\r\n        }\r\n    }\r\n\r\nIn my mainActivity, \r\n    \r\n    public class myMainActivity extends AppCompatActivity{\r\n        private MyCustomView2 myCustomView2;\r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            ...\r\n            myCustomView2.setMyRegBtnOnClickListener(new View.OnClickListener(){\r\n                @Override\r\n                public void onClick(View view) {\r\n                    //TODO: some code execute here when button clicked\r\n                }\r\n            });\r\n        ...\r\n    }","title":"How to pass a CheckedChange Listener to a custom view","body":"<p>I made a custom view with 3 toggle buttons. In my custom view class I set</p>\n<pre><code>public void setMyToggleButton1OnCheckedChangedListener(CompoundButton.OnCheckedChangeListener o) {\n    myToggleButton1.setOnCheckedChangeListener(o);\n}\n</code></pre>\n<p>but when I try to handle this even in my main activity, it looks like this event never been triggered. In the main activity I tried</p>\n<pre><code>myCustomView.setMyToggleButton1OnCheckedChangedListener(new CompoundButton.OnCheckedChangeListener() {\n        @Override\n        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n            if (isChecked) {\n                //TODO something here\n            }\n            else {\n                //TODO something here\n            }\n        }\n    });\n</code></pre>\n<p>I did try my other custom view with regular button and pass the standard button click event to it with the same method. I don't understand what makes it different to pass a standard button click event to custom view and passing a toggle button checkedchange event listener to a custom view.</p>\n<p>PS: Here is what I did for regular button and its OnClickListener. This one works as I expected, that's why I try to replicate it to Toggle Button and the OnCheckedChangeListener.</p>\n<p>in myCustomView2 (the custom view contains regular buttons)</p>\n<pre><code>public class myCustomView2 extends ConstraintLayout{\n    private Button myRegBtn1;\n    ...\n    public myCustomView2(Context context) {\n        this(context, null);\n    }\n\n    public myCustomView2(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n         setAttributes(context, attrs);\n    }\n\n    public myCustomView2(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        setAttributes(context, attrs);\n        init(context);\n    }\n    \n    private void init(Context context) {\n        myRegBtn = findViewById(R.id.btn1);\n        ...\n    }\n    \n    private void setAttributes(Context context, AttributeSet attrs) {\n        ...\n    }\n\n    public void setMyRegBtnOnClickListener(OnClickListener o) {\n        myRegBtn.setOnClickListener(o);\n    }\n}\n</code></pre>\n<p>In my mainActivity,</p>\n<pre><code>public class myMainActivity extends AppCompatActivity{\n    private MyCustomView2 myCustomView2;\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        ...\n        myCustomView2.setMyRegBtnOnClickListener(new View.OnClickListener(){\n            @Override\n            public void onClick(View view) {\n                //TODO: some code execute here when button clicked\n            }\n        });\n    ...\n}\n</code></pre>\n"},{"tags":["java","time","datetimeformatter"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1682663521,"post_id":76126814,"comment_id":134254014,"body_markdown":"the format is not dependent on &#39;what time it is&#39;. It depends on what you need to get. what type is rtime?","body":"the format is not dependent on &#39;what time it is&#39;. It depends on what you need to get. what type is rtime?"},{"owner":{"account_id":5607526,"reputation":81,"user_id":4441516,"display_name":"Steve"},"score":0,"creation_date":1682663726,"post_id":76126814,"comment_id":134254043,"body_markdown":"rtime is a String. I have a method that takes epoch time as argument my goal is to get the epoch time using zdt.toInstant().toEpochMilli()","body":"rtime is a String. I have a method that takes epoch time as argument my goal is to get the epoch time using zdt.toInstant().toEpochMilli()"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1682664873,"post_id":76126814,"comment_id":134254288,"body_markdown":"I copied and ran your code, it works fine here. as @user16320675 suggests, check your locale.","body":"I copied and ran your code, it works fine here. as @user16320675 suggests, check your locale."},{"owner":{"account_id":5607526,"reputation":81,"user_id":4441516,"display_name":"Steve"},"score":0,"creation_date":1682665521,"post_id":76126814,"comment_id":134254429,"body_markdown":"It is working fine now after adding `Locale.ROOT`. Thanks guys for the help.","body":"It is working fine now after adding <code>Locale.ROOT</code>. Thanks guys for the help."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682668058,"post_id":76126814,"comment_id":134254929,"body_markdown":"This can’t be right. You are catching `DateTimeParseException`, but your output reports a `java.text.ParseException`. That output cannot come from that code.","body":"This can’t be right. You are catching <code>DateTimeParseException</code>, but your output reports a <code>java.text.ParseException</code>. That output cannot come from that code."}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682665286,"creation_date":1682665286,"answer_id":76127008,"question_id":76126814,"body_markdown":"There are two major problems in your `DateTimeFormatter`:\r\n\r\n - the missing `Locale`, which may cause the `Locale.getDefault()` to be used and that one may not know the abbreviation (e.g. a `Locale.ITALIAN` would expect `gen` instead of `Jan`)\r\n - the wrong pattern letter for the time zone (the `String` contains an outdated offset notation, *hours from GMT*)\r\n\r\nYou can parse it like this:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\tString rtime = &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;;\r\n\ttry {\r\n\t\tDateTimeFormatter formatter = \r\n\t\t\t\tDateTimeFormatter.ofPattern(&quot;MMM dd uuuu HH:mm:ss VV&quot;, Locale.ENGLISH);\r\n\t\tSystem.out.println(&quot;formatter: &quot; + formatter);\r\n\t\tZonedDateTime zdt = ZonedDateTime.parse(rtime, formatter);\r\n\t\tSystem.out.println(zdt);\r\n\t} catch (DateTimeParseException e) {\r\n\t\tSystem.err.println(&quot;Failed to parse device time [&quot; + rtime + &quot;] &quot;);\r\n\t}\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n2019-01-17T03:38:06Z[GMT]\r\n```\r\n\r\nYou can use a different `DateTimeFormatter` in order to create different output.\r\n\r\n---\r\n\r\nIn case you have influence on the input `String`s, you may be best adviced removing the `GMT` from it and only use `+00:00`, which can be used to create an `OffsetDateTime`.","title":"How to choose a pattern for java.time.format.DateTimeFormatter when the time is of this format: &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;","body":"<p>There are two major problems in your <code>DateTimeFormatter</code>:</p>\n<ul>\n<li>the missing <code>Locale</code>, which may cause the <code>Locale.getDefault()</code> to be used and that one may not know the abbreviation (e.g. a <code>Locale.ITALIAN</code> would expect <code>gen</code> instead of <code>Jan</code>)</li>\n<li>the wrong pattern letter for the time zone (the <code>String</code> contains an outdated offset notation, <em>hours from GMT</em>)</li>\n</ul>\n<p>You can parse it like this:</p>\n<pre><code>public static void main(String[] args) {\n    String rtime = &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;;\n    try {\n        DateTimeFormatter formatter = \n                DateTimeFormatter.ofPattern(&quot;MMM dd uuuu HH:mm:ss VV&quot;, Locale.ENGLISH);\n        System.out.println(&quot;formatter: &quot; + formatter);\n        ZonedDateTime zdt = ZonedDateTime.parse(rtime, formatter);\n        System.out.println(zdt);\n    } catch (DateTimeParseException e) {\n        System.err.println(&quot;Failed to parse device time [&quot; + rtime + &quot;] &quot;);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2019-01-17T03:38:06Z[GMT]\n</code></pre>\n<p>You can use a different <code>DateTimeFormatter</code> in order to create different output.</p>\n<hr />\n<p>In case you have influence on the input <code>String</code>s, you may be best adviced removing the <code>GMT</code> from it and only use <code>+00:00</code>, which can be used to create an <code>OffsetDateTime</code>.</p>\n"}],"owner":{"account_id":5607526,"reputation":81,"user_id":4441516,"display_name":"Steve"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1683034987,"answer_count":1,"score":0,"last_activity_date":1683035166,"creation_date":1682663407,"question_id":76126814,"body_markdown":"I have the following code:\r\n```Java\r\ntry {\r\n\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MMM dd yyyy HH:mm:ss &#39;GMT&#39;xxx&quot;);\r\n\tlogger.debug(&quot;formatter: &quot; + formatter);\r\n\tZonedDateTime zdt = ZonedDateTime.parse(rtime, formatter);\r\n} catch (DateTimeParseException e) {\r\n\tif (logger.isDebugEnabled()) {\r\n\t\tlogger.debug(&quot;Failed to parse device time [&quot; + rtime + &quot;] &quot;, e);\r\n\t}\r\n}\r\n```\r\n\r\n`rtime` here is `Jan 17 2019 03:38:06 GMT+00:00`\r\n\r\nDebug is printing out \r\n\r\n```none\r\nformatter: Text(MonthOfYear,SHORT)&#39; &#39;Value(DayOfMonth,2)&#39; &#39;Value(YearOfEra,4,19,EXCEEDS_PAD)&#39; &#39;Value(HourOfDay,2)&#39;:&#39;Value(MinuteOfHour,2)&#39;:&#39;Value(SecondOfMinute,2)&#39; &#39;&#39;GMT&#39;Offset(+HH:MM,&#39;+00:00&#39;)`\r\n```\r\n\r\nThe error is : \r\n\r\n```none\r\nFailed to parse device time [Jan 17 2019 03:38:06 GMT+00:00] \r\njava.text.ParseException: Unparseable date: &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;\r\n```\r\nI tried a few patterns and it is always failing.  \r\nCould someone help?\r\n\r\n\r\n\r\n","title":"How to choose a pattern for java.time.format.DateTimeFormatter when the time is of this format: &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;","body":"<p>I have the following code:</p>\n<pre><code>try {\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MMM dd yyyy HH:mm:ss 'GMT'xxx&quot;);\n    logger.debug(&quot;formatter: &quot; + formatter);\n    ZonedDateTime zdt = ZonedDateTime.parse(rtime, formatter);\n} catch (DateTimeParseException e) {\n    if (logger.isDebugEnabled()) {\n        logger.debug(&quot;Failed to parse device time [&quot; + rtime + &quot;] &quot;, e);\n    }\n}\n</code></pre>\n<p><code>rtime</code> here is <code>Jan 17 2019 03:38:06 GMT+00:00</code></p>\n<p>Debug is printing out</p>\n<pre class=\"lang-none prettyprint-override\"><code>formatter: Text(MonthOfYear,SHORT)' 'Value(DayOfMonth,2)' 'Value(YearOfEra,4,19,EXCEEDS_PAD)' 'Value(HourOfDay,2)':'Value(MinuteOfHour,2)':'Value(SecondOfMinute,2)' ''GMT'Offset(+HH:MM,'+00:00')`\n</code></pre>\n<p>The error is :</p>\n<pre class=\"lang-none prettyprint-override\"><code>Failed to parse device time [Jan 17 2019 03:38:06 GMT+00:00] \njava.text.ParseException: Unparseable date: &quot;Jan 17 2019 03:38:06 GMT+00:00&quot;\n</code></pre>\n<p>I tried a few patterns and it is always failing.<br />\nCould someone help?</p>\n"},{"tags":["java","spring-boot","micrometer","spring-autoconfiguration"],"answers":[{"comments":[{"owner":{"account_id":4744566,"reputation":653,"user_id":3836226,"display_name":"Anil Maddukuri"},"score":0,"creation_date":1662031872,"post_id":73534403,"comment_id":129914918,"body_markdown":"I already have it as a dependency. But it still is not working.","body":"I already have it as a dependency. But it still is not working."},{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1662517906,"post_id":73534403,"comment_id":130021389,"body_markdown":"It might not be on your classpath (in your jar, etc.)","body":"It might not be on your classpath (in your jar, etc.)"},{"owner":{"account_id":4744566,"reputation":653,"user_id":3836226,"display_name":"Anil Maddukuri"},"score":0,"creation_date":1663737977,"post_id":73534403,"comment_id":130307090,"body_markdown":"It is there. I double checked. Anyway we had downgrade the spring framework to make this work","body":"It is there. I double checked. Anyway we had downgrade the spring framework to make this work"},{"owner":{"account_id":10092343,"reputation":424,"user_id":7458914,"accept_rate":86,"display_name":"excelsiorious"},"score":0,"creation_date":1671923601,"post_id":73534403,"comment_id":132198296,"body_markdown":"Helped for me to see the `traceId` and `correlationId`: `2022-12-25T02:12:13.991+03:00  INFO [Sender,63a7874db0f29789c75af5dda9c24af4,c75af5dda9c24af4] `","body":"Helped for me to see the <code>traceId</code> and <code>correlationId</code>: <code>2022-12-25T02:12:13.991+03:00  INFO [Sender,63a7874db0f29789c75af5dda9c24af4,c75af5dda9c24af4] </code>"},{"owner":{"account_id":23524,"reputation":28912,"user_id":59015,"accept_rate":69,"display_name":"Marty Pitt"},"score":0,"creation_date":1674235787,"post_id":73534403,"comment_id":132678727,"body_markdown":"Note that it must be `spring-boot-starter-actuator` (as the answer points out), and not `spring-boot-actuator`, which looks really similar, but will leave you scratching your head for a good while.","body":"Note that it must be <code>spring-boot-starter-actuator</code> (as the answer points out), and not <code>spring-boot-actuator</code>, which looks really similar, but will leave you scratching your head for a good while."}],"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"comment_count":5,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1661805338,"creation_date":1661805338,"answer_id":73534403,"question_id":73472639,"body_markdown":"You need `spring-boot-starter-actuator` on your classpath.","title":"required a bean of type &#39;io.micrometer.core.instrument.MeterRegistry&#39; that could not be found","body":"<p>You need <code>spring-boot-starter-actuator</code> on your classpath.</p>\n"},{"tags":[],"owner":{"account_id":20755160,"reputation":1,"user_id":15241772,"display_name":"korolkevich7"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683035166,"creation_date":1683035166,"answer_id":76155502,"question_id":73472639,"body_markdown":"You have problem with your configuration, because of double &quot;management.metrics&quot;. Move metrics.enabled in the first block.","title":"required a bean of type &#39;io.micrometer.core.instrument.MeterRegistry&#39; that could not be found","body":"<p>You have problem with your configuration, because of double &quot;management.metrics&quot;. Move metrics.enabled in the first block.</p>\n"}],"owner":{"account_id":4744566,"reputation":653,"user_id":3836226,"display_name":"Anil Maddukuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8231,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683035166,"creation_date":1661341871,"question_id":73472639,"body_markdown":"Recently we upgraded spring-boot version to 2.7.2 and spring framework version to 5.3.22. Since then we are seeing this error in one of the apps \r\n\r\n&quot;required a bean of type &#39;io.micrometer.core.instrument.MeterRegistry&#39; that could not be found.&quot;\r\n\r\nSpring documentation says that if there is a dependency called micrometer-registry-&lt;?&gt; then it will autowire the required MeterRegistry. We do have that dependency in out project. But it is not happening.\r\n\r\nWe do have the following properties in application.yml. But actuator is also not working\r\n\r\n    management:\r\n      metrics:\r\n        export:\r\n          statsd:\r\n            enabled: true\r\n            flavor: datadog\r\n            host: localhost\r\n            port: 8125\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &quot;*&quot;\r\n      metrics:\r\n        enabled: true\r\nCan some one please tell me what i am missing here?","title":"required a bean of type &#39;io.micrometer.core.instrument.MeterRegistry&#39; that could not be found","body":"<p>Recently we upgraded spring-boot version to 2.7.2 and spring framework version to 5.3.22. Since then we are seeing this error in one of the apps</p>\n<p>&quot;required a bean of type 'io.micrometer.core.instrument.MeterRegistry' that could not be found.&quot;</p>\n<p>Spring documentation says that if there is a dependency called micrometer-registry-&lt;?&gt; then it will autowire the required MeterRegistry. We do have that dependency in out project. But it is not happening.</p>\n<p>We do have the following properties in application.yml. But actuator is also not working</p>\n<pre><code>management:\n  metrics:\n    export:\n      statsd:\n        enabled: true\n        flavor: datadog\n        host: localhost\n        port: 8125\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n  metrics:\n    enabled: true\n</code></pre>\n<p>Can some one please tell me what i am missing here?</p>\n"},{"tags":["java","android-studio","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1683026400,"post_id":76154297,"comment_id":134300352,"body_markdown":"What do you mean by &quot;why my user is not save inside the group&quot;?","body":"What do you mean by &quot;why my user is not save inside the group&quot;?"},{"owner":{"account_id":28481524,"reputation":1,"user_id":21795406,"display_name":"Muhammad Anees"},"score":0,"creation_date":1683027157,"post_id":76154297,"comment_id":134300506,"body_markdown":"i create a group know i add user in my group but my user is store out side","body":"i create a group know i add user in my group but my user is store out side"}],"owner":{"account_id":28481524,"reputation":1,"user_id":21795406,"display_name":"Muhammad Anees"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683035103,"creation_date":1683026076,"question_id":76154297,"body_markdown":"I have a issue. I store data inside the group i create whatsapp group. Now I add user inside the group, but my user data is display out side in firebase Realtime .\r\n\r\n       \r\n            holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n\r\n                    GroupRef.child(groupId).child(&quot;Members&quot;).child(list_user_id)\r\n                            .setValue(true).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                    if (task.isSuccessful()) {\r\n                                        GroupRef.child(groupId).child(&quot;Members&quot;).child(list_user_id)\r\n                                                .setValue(&quot;Saved&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                    @Override\r\n                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                        if (task.isSuccessful()) {\r\n                                                            AddMemberRequest.child(groupId).child(&quot;Members&quot;).child(list_user_id)\r\n                                                                    .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                                        @Override\r\n                                                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                                            if (task.isSuccessful()) {\r\n                                                                                AddMemberRequest.child(groupId).child(&quot;Members&quot;).child(list_user_id)\r\n                                                                                                            .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                                                            @Override\r\n                                                                                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                                                                if (task.isSuccessful()) {\r\n                                                                                                    Toast.makeText(getApplicationContext(), &quot;New Member Saved&quot;, Toast.LENGTH_SHORT).show();\r\n                                                                                                }\r\n                                                                                            }\r\n                                                                                        });\r\n                                                                            }\r\n                                                                        }\r\n                                                                    });\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                    }\r\n                                }\r\n                            });\r\n                }\r\n            });\r\n        }\r\n\r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n        }\r\n    });\r\n    }\r\n    }\r\n\r\ni just want to store store users inside the groups\r\n","title":"why my user is not save inside the group , my data is displaying out side the group","body":"<p>I have a issue. I store data inside the group i create whatsapp group. Now I add user inside the group, but my user data is display out side in firebase Realtime .</p>\n<pre><code>        holder.itemView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                GroupRef.child(groupId).child(&quot;Members&quot;).child(list_user_id)\n                        .setValue(true).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                if (task.isSuccessful()) {\n                                    GroupRef.child(groupId).child(&quot;Members&quot;).child(list_user_id)\n                                            .setValue(&quot;Saved&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                @Override\n                                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                    if (task.isSuccessful()) {\n                                                        AddMemberRequest.child(groupId).child(&quot;Members&quot;).child(list_user_id)\n                                                                .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                                    @Override\n                                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                                        if (task.isSuccessful()) {\n                                                                            AddMemberRequest.child(groupId).child(&quot;Members&quot;).child(list_user_id)\n                                                                                                        .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                                                        @Override\n                                                                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                                                            if (task.isSuccessful()) {\n                                                                                                Toast.makeText(getApplicationContext(), &quot;New Member Saved&quot;, Toast.LENGTH_SHORT).show();\n                                                                                            }\n                                                                                        }\n                                                                                    });\n                                                                        }\n                                                                    }\n                                                                });\n                                                    }\n                                                }\n                                            });\n                                }\n                            }\n                        });\n            }\n        });\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n    }\n});\n}\n}\n</code></pre>\n<p>i just want to store store users inside the groups</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"score":0,"creation_date":1682799091,"post_id":76127430,"comment_id":134273055,"body_markdown":"What is the type of `Quarter-Range`? String, array of struct, something else? Can you for instance provide the result of `printSchema()`?","body":"What is the type of <code>Quarter-Range</code>? String, array of struct, something else? Can you for instance provide the result of <code>printSchema()</code>?"},{"owner":{"account_id":28442798,"reputation":1,"user_id":21761934,"display_name":"usr90"},"score":0,"creation_date":1682856231,"post_id":76127430,"comment_id":134277833,"body_markdown":"The type is String.","body":"The type is String."}],"answers":[{"comments":[{"owner":{"account_id":28442798,"reputation":1,"user_id":21761934,"display_name":"usr90"},"score":0,"creation_date":1683008311,"post_id":76138240,"comment_id":134296996,"body_markdown":"Hello @M_S, Thanks for your help. I have added the right set of input which is being passed in the data-frame. It was the Typo and I missed the &quot;3Y&quot;.\nI have gone through your comment and I appreciate your help. One thing I just wanted to ask, why this extra set of &quot;[ ]&quot; are appearing while doing the explode and split? Tough I have used Explode_outer to keep the null value but it is not working as per the expected output (where the test case is not expecting any extra [ ]). Could you please help on this ?","body":"Hello @M_S, Thanks for your help. I have added the right set of input which is being passed in the data-frame. It was the Typo and I missed the &quot;3Y&quot;. I have gone through your comment and I appreciate your help. One thing I just wanted to ask, why this extra set of &quot;[ ]&quot; are appearing while doing the explode and split? Tough I have used Explode_outer to keep the null value but it is not working as per the expected output (where the test case is not expecting any extra [ ]). Could you please help on this ?"},{"owner":{"account_id":26241395,"reputation":3478,"user_id":19915660,"display_name":"M_S"},"score":0,"creation_date":1683015128,"post_id":76138240,"comment_id":134298180,"body_markdown":"Its returning [] because it is array with one element which is empty. You can swap it manually to null (check my updated answer) if this is ok for you. If you want to have empty space on .show(), then i think that you need convert array to string and handle it during conversion","body":"Its returning [] because it is array with one element which is empty. You can swap it manually to null (check my updated answer) if this is ok for you. If you want to have empty space on .show(), then i think that you need convert array to string and handle it during conversion"},{"owner":{"account_id":28442798,"reputation":1,"user_id":21761934,"display_name":"usr90"},"score":0,"creation_date":1683022220,"post_id":76138240,"comment_id":134299599,"body_markdown":"Hi.. agreed I need to cast to string but my doubt was with extra pair of &quot;[ ]&quot;, appearing in every row. The expected results  are having only a valid pair of brackets e.g.[0D-6M],[6M-18M]  but this code is returning &quot;[[0D-6M], [6M-18M]]&quot;.","body":"Hi.. agreed I need to cast to string but my doubt was with extra pair of &quot;[ ]&quot;, appearing in every row. The expected results  are having only a valid pair of brackets e.g.[0D-6M],[6M-18M]  but this code is returning &quot;[[0D-6M], [6M-18M]]&quot;."},{"owner":{"account_id":26241395,"reputation":3478,"user_id":19915660,"display_name":"M_S"},"score":0,"creation_date":1683035202,"post_id":76138240,"comment_id":134302467,"body_markdown":"Ok, thank you for clarification, now i think i understand it. Please check my updated answer. Now i used concat_ws to transform array into string, you dont have extra brackets and empty column is handled as in your expected answer","body":"Ok, thank you for clarification, now i think i understand it. Please check my updated answer. Now i used concat_ws to transform array into string, you dont have extra brackets and empty column is handled as in your expected answer"}],"tags":[],"owner":{"account_id":26241395,"reputation":3478,"user_id":19915660,"display_name":"M_S"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683035100,"creation_date":1682799655,"answer_id":76138240,"question_id":76127430,"body_markdown":"I am not sure if your example is correct\r\n\r\nYour sample solution has few small typos, but when i adjusted it and executed, the output was not the same as output pasted by you\r\n\r\nIn your output you have record for Y3 but it does not exist in input-data. It is also not produced by your example after adjustments.\r\n\r\nIf i understand it correctly, in your input you have strings and collect_set is not returning what you expect. I think that inside your explode you should use split instead of array\r\n\r\nHere is my example in Scala (core logic in Java will look similar):\r\n\r\n    import org.apache.spark.sql.functions._\r\n    \r\n    val inputData = Seq(\r\n      (&quot;/equity/dividends[DIV|4Y]&quot;, &quot;&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M]&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M],[6M-18M]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|3Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[6M-18M]&quot;)\r\n    )\r\n    \r\n    val df = inputData.toDF(&quot;market_Year&quot;, &quot;Quarter-Range&quot;)\r\n    val aggregatedDf = df\r\n      .withColumn(&quot;Quarter-Range&quot;, explode(split(col(&quot;Quarter-Range&quot;), &quot;,&quot;)))\r\n      .groupBy(&quot;market_Year&quot;)\r\n      .agg(\r\n        collect_set(&quot;Quarter-Range&quot;)\r\n          .as(&quot;Quarter-Range&quot;)\r\n      )\r\n    \r\n    aggregatedDf\r\n      .withColumn(&quot;Quarter-Range&quot;, concat_ws(&quot;,&quot;, col(&quot;Quarter-Range&quot;)))\r\n      .show(truncate = false)\r\n\r\n\r\n\r\nThe ouput is:\r\n\r\n    +-------------------------+----------------+\r\n    |market_Year              |Quarter-Range   |\r\n    +-------------------------+----------------+\r\n    |/equity/dividends[DIV|4Y]|                |\r\n    |/equity/dividends[DIV|1Y]|[0D-6M],[6M-18M]|\r\n    |/equity/dividends[DIV|2Y]|[18M-2Y]        |\r\n    |/equity/dividends[DIV|3Y]|[18M-2Y]        |\r\n    +-------------------------+----------------+","title":"Arranging the columns in Spark dataframe by Iterating through the column value","body":"<p>I am not sure if your example is correct</p>\n<p>Your sample solution has few small typos, but when i adjusted it and executed, the output was not the same as output pasted by you</p>\n<p>In your output you have record for Y3 but it does not exist in input-data. It is also not produced by your example after adjustments.</p>\n<p>If i understand it correctly, in your input you have strings and collect_set is not returning what you expect. I think that inside your explode you should use split instead of array</p>\n<p>Here is my example in Scala (core logic in Java will look similar):</p>\n<pre><code>import org.apache.spark.sql.functions._\n\nval inputData = Seq(\n  (&quot;/equity/dividends[DIV|4Y]&quot;, &quot;&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M]&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M],[6M-18M]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|3Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[6M-18M]&quot;)\n)\n\nval df = inputData.toDF(&quot;market_Year&quot;, &quot;Quarter-Range&quot;)\nval aggregatedDf = df\n  .withColumn(&quot;Quarter-Range&quot;, explode(split(col(&quot;Quarter-Range&quot;), &quot;,&quot;)))\n  .groupBy(&quot;market_Year&quot;)\n  .agg(\n    collect_set(&quot;Quarter-Range&quot;)\n      .as(&quot;Quarter-Range&quot;)\n  )\n\naggregatedDf\n  .withColumn(&quot;Quarter-Range&quot;, concat_ws(&quot;,&quot;, col(&quot;Quarter-Range&quot;)))\n  .show(truncate = false)\n</code></pre>\n<p>The ouput is:</p>\n<pre><code>+-------------------------+----------------+\n|market_Year              |Quarter-Range   |\n+-------------------------+----------------+\n|/equity/dividends[DIV|4Y]|                |\n|/equity/dividends[DIV|1Y]|[0D-6M],[6M-18M]|\n|/equity/dividends[DIV|2Y]|[18M-2Y]        |\n|/equity/dividends[DIV|3Y]|[18M-2Y]        |\n+-------------------------+----------------+\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24158120,"reputation":120,"user_id":18122075,"display_name":"Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683025150,"creation_date":1683024818,"answer_id":76154117,"question_id":76127430,"body_markdown":"i have make dataframe as string of all columns.\r\n\r\n    val inputData = Seq(\r\n      (&quot;/equity/dividends[DIV|4Y]&quot;, &quot;&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M]&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M],[6M-18M]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|3Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\r\n      (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[6M-18M]&quot;)\r\n    )\r\n    \r\n    val df = inputData.toDF(&quot;market_Year&quot;, &quot;Quarter-Range&quot;)\r\n\r\nFirst to Flatten data and just process the data on second line\r\n\r\n    val dfx = df.withColumn(&quot;Quarter-Range&quot;,explode(split($&quot;Quarter-Range&quot;,&quot;,&quot;)))\r\n    val dfg = dfx.groupBy(&quot;market_Year&quot;).agg(concat_ws(&quot;,&quot;, collect_set(when($&quot;Quarter-Range&quot;.isNotNull, $&quot;Quarter-Range&quot;))).as(&quot;Quarter-Range&quot;))\r\n\r\nOutput look like\r\n\r\n    +-------------------------+----------------+\r\n    |market_Year              |Quarter-Range   |\r\n    +-------------------------+----------------+\r\n    |/equity/dividends[DIV|1Y]|[0D-6M],[6M-18M]|\r\n    |/equity/dividends[DIV|2Y]|[18M-2Y]        |\r\n    |/equity/dividends[DIV|3Y]|[18M-2Y]        |\r\n    |/equity/dividends[DIV|4Y]|null            |\r\n    +-------------------------+----------------+\r\n","title":"Arranging the columns in Spark dataframe by Iterating through the column value","body":"<p>i have make dataframe as string of all columns.</p>\n<pre><code>val inputData = Seq(\n  (&quot;/equity/dividends[DIV|4Y]&quot;, &quot;&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M]&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[0D-6M],[6M-18M]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|3Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|2Y]&quot;, &quot;[18M-2Y]&quot;),\n  (&quot;/equity/dividends[DIV|1Y]&quot;, &quot;[6M-18M]&quot;)\n)\n\nval df = inputData.toDF(&quot;market_Year&quot;, &quot;Quarter-Range&quot;)\n</code></pre>\n<p>First to Flatten data and just process the data on second line</p>\n<pre><code>val dfx = df.withColumn(&quot;Quarter-Range&quot;,explode(split($&quot;Quarter-Range&quot;,&quot;,&quot;)))\nval dfg = dfx.groupBy(&quot;market_Year&quot;).agg(concat_ws(&quot;,&quot;, collect_set(when($&quot;Quarter-Range&quot;.isNotNull, $&quot;Quarter-Range&quot;))).as(&quot;Quarter-Range&quot;))\n</code></pre>\n<p>Output look like</p>\n<pre><code>+-------------------------+----------------+\n|market_Year              |Quarter-Range   |\n+-------------------------+----------------+\n|/equity/dividends[DIV|1Y]|[0D-6M],[6M-18M]|\n|/equity/dividends[DIV|2Y]|[18M-2Y]        |\n|/equity/dividends[DIV|3Y]|[18M-2Y]        |\n|/equity/dividends[DIV|4Y]|null            |\n+-------------------------+----------------+\n</code></pre>\n"}],"owner":{"account_id":28442798,"reputation":1,"user_id":21761934,"display_name":"usr90"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683035100,"creation_date":1682668701,"question_id":76127430,"body_markdown":"Not sure if this question has been asked already but I could not find the solution so I am posting the question.\r\nI have a spark data frame which has the below input value:\r\n\r\n     +----------------------------------------------+-------------------------------------+\r\n    |                        market_Year           |       Quarter-Range                 |\r\n    +----------------------------------------------+-------------------------------------+\r\n    |/equity/dividends[DIV|4Y]                     |    null\r\n\t|/equity/dividends[DIV|1Y]                     |    [0D-6M]                          |\r\n    |/equity/dividends[DIV|1Y]                     |    [0D-6M],[6M-18M]                 |\r\n    |/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\r\n    |/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\r\n    |/equity/dividends[DIV|3Y]                     |    [18M-2Y]                         |\r\n    |/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\r\n    |/equity/dividends[DIV|1Y]                     |    [6M-18M]                         |\r\n    +----------------------------------------------+-------------------------------------+\r\n    \r\nI am looking for the output which should be:\r\n    \r\n    +----------------------------------------------+-------------------------------------+\r\n    |                        market_Year           |                Quarter-Range        |\r\n    +----------------------------------------------+-------------------------------------+\r\n    |/equity/dividends[DIV|1Y]                     |  [0D-6M],[6M-18M]                   |\r\n    |/equity/dividends[DIV|2Y]                     |  [18M-2Y]                           |\r\n    |/equity/dividends[DIV|3Y]                     |  [18M-2Y]                           |\r\n    |/equity/dividends[DIV|4Y]                     |                                     |\r\n    +----------------------------------------------+-------------------------------------+\r\n    \r\nIf anyone can help me to achieve this output without using UDF will be a great help.\r\n    \r\nThanks in advance \r\n    \r\n    \r\n    \r\n    Dataset&lt;Row&gt;   DF_to = printdf.withColumn(&quot;Quarter-Range&quot;, explode(array(&quot;Quarter-Range))).groupBy(col(market_Year))\r\n                    .agg(collect_set(&quot;Quarter-Range&quot;).distinct();\r\n    \r\nI am getting this output:\r\n    \r\n    +----------------------------------------------+-------------------------------------+\r\n    |                        market_Year           |          Quarter-Range              |\r\n    +----------------------------------------------+-------------------------------------+\r\n    |/equity/dividends[DIV|1Y]                     |[[0D-6M],[6M-18M], [0D-6M], [6M-18M]]|\r\n    |/equity/dividends[DIV|2Y]                     |                           [[18M-2Y]]|\r\n    |/equity/dividends[DIV|3Y]                     |                           [[18M-2Y]]|\r\n    |/equity/dividends[DIV|4Y]                     |                                   []|\r\n    +----------------------------------------------+-------------------------------------+\r\n","title":"Arranging the columns in Spark dataframe by Iterating through the column value","body":"<p>Not sure if this question has been asked already but I could not find the solution so I am posting the question.\nI have a spark data frame which has the below input value:</p>\n<pre><code> +----------------------------------------------+-------------------------------------+\n|                        market_Year           |       Quarter-Range                 |\n+----------------------------------------------+-------------------------------------+\n|/equity/dividends[DIV|4Y]                     |    null\n|/equity/dividends[DIV|1Y]                     |    [0D-6M]                          |\n|/equity/dividends[DIV|1Y]                     |    [0D-6M],[6M-18M]                 |\n|/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\n|/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\n|/equity/dividends[DIV|3Y]                     |    [18M-2Y]                         |\n|/equity/dividends[DIV|2Y]                     |    [18M-2Y]                         |\n|/equity/dividends[DIV|1Y]                     |    [6M-18M]                         |\n+----------------------------------------------+-------------------------------------+\n</code></pre>\n<p>I am looking for the output which should be:</p>\n<pre><code>+----------------------------------------------+-------------------------------------+\n|                        market_Year           |                Quarter-Range        |\n+----------------------------------------------+-------------------------------------+\n|/equity/dividends[DIV|1Y]                     |  [0D-6M],[6M-18M]                   |\n|/equity/dividends[DIV|2Y]                     |  [18M-2Y]                           |\n|/equity/dividends[DIV|3Y]                     |  [18M-2Y]                           |\n|/equity/dividends[DIV|4Y]                     |                                     |\n+----------------------------------------------+-------------------------------------+\n</code></pre>\n<p>If anyone can help me to achieve this output without using UDF will be a great help.</p>\n<p>Thanks in advance</p>\n<pre><code>Dataset&lt;Row&gt;   DF_to = printdf.withColumn(&quot;Quarter-Range&quot;, explode(array(&quot;Quarter-Range))).groupBy(col(market_Year))\n                .agg(collect_set(&quot;Quarter-Range&quot;).distinct();\n</code></pre>\n<p>I am getting this output:</p>\n<pre><code>+----------------------------------------------+-------------------------------------+\n|                        market_Year           |          Quarter-Range              |\n+----------------------------------------------+-------------------------------------+\n|/equity/dividends[DIV|1Y]                     |[[0D-6M],[6M-18M], [0D-6M], [6M-18M]]|\n|/equity/dividends[DIV|2Y]                     |                           [[18M-2Y]]|\n|/equity/dividends[DIV|3Y]                     |                           [[18M-2Y]]|\n|/equity/dividends[DIV|4Y]                     |                                   []|\n+----------------------------------------------+-------------------------------------+\n</code></pre>\n"},{"tags":["java","junit","junit5","spring-test"],"answers":[{"comments":[{"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"score":0,"creation_date":1611827978,"post_id":65934713,"comment_id":116577536,"body_markdown":"So what I should do now, using @BeforeAll and there put BookService and BookRepository?","body":"So what I should do now, using @BeforeAll and there put BookService and BookRepository?"},{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1611844665,"post_id":65934713,"comment_id":116585717,"body_markdown":"MrFisherman is using Spring. Thus, the last comment is bad advice. In an integration test using Spring Boot, one would rather have the Spring-managed components injected into the test class instance -- for example using `@Autowired`.","body":"MrFisherman is using Spring. Thus, the last comment is bad advice. In an integration test using Spring Boot, one would rather have the Spring-managed components injected into the test class instance -- for example using <code>@Autowired</code>."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1611846434,"post_id":65934713,"comment_id":116586672,"body_markdown":"@SamBrannen D&#39;oh, yes, of course - I&#39;ve deleted my comment (which suggested to use `@Before` method that initializes them).","body":"@SamBrannen D&#39;oh, yes, of course - I&#39;ve deleted my comment (which suggested to use <code>@Before</code> method that initializes them)."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611827700,"creation_date":1611827700,"answer_id":65934713,"question_id":65934665,"body_markdown":"It _is_ parameterized. How is the test framework supposed to create a new instance of the `BookServiceTest` class?\r\n\r\nOrdinarily, test classes have a no-args constructor (at which point, the framework can just create a new instance without needing any additional information, such as &#39;how do I obtain an instance of bookService to pass to this constructor?&#39;).\r\n","title":"Why do I have ParameterResolutionException when I don&#39;t even use parametrized test?","body":"<p>It <em>is</em> parameterized. How is the test framework supposed to create a new instance of the <code>BookServiceTest</code> class?</p>\n<p>Ordinarily, test classes have a no-args constructor (at which point, the framework can just create a new instance without needing any additional information, such as 'how do I obtain an instance of bookService to pass to this constructor?').</p>\n"},{"tags":[],"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1611844993,"creation_date":1611844993,"answer_id":65939369,"question_id":65934665,"body_markdown":"In JUnit Jupiter, a `ParameterResolutionException` is thrown whenever a test class constructor, lifecycle method (such as `@BeforeEach`), or test method declares a parameter that cannot be resolved by one of the registered `ParameterResolver` extensions.\r\n\r\nThus, a `ParameterResolutionException` can be thrown even when you are not using a `@ParameterizedTest` method.\r\n\r\nWhen using `@SpringBootTest`, the `SpringExtension` is automatically registered for you. The `SpringExtension` implements the `ParameterResolver` extension API from JUnit Jupiter so that you can have beans from your `ApplicationContext` injected into constructors and methods in your test class.\r\n\r\nThe easiest way to solve your issue is to annotate the `BookServiceTest` constructor with `@Autowired`.\r\n\r\nFor more information and alternative approaches, check out the [Dependency Injection with `SpringExtension`][1] section of the Spring reference docs.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-junit-jupiter-di","title":"Why do I have ParameterResolutionException when I don&#39;t even use parametrized test?","body":"<p>In JUnit Jupiter, a <code>ParameterResolutionException</code> is thrown whenever a test class constructor, lifecycle method (such as <code>@BeforeEach</code>), or test method declares a parameter that cannot be resolved by one of the registered <code>ParameterResolver</code> extensions.</p>\n<p>Thus, a <code>ParameterResolutionException</code> can be thrown even when you are not using a <code>@ParameterizedTest</code> method.</p>\n<p>When using <code>@SpringBootTest</code>, the <code>SpringExtension</code> is automatically registered for you. The <code>SpringExtension</code> implements the <code>ParameterResolver</code> extension API from JUnit Jupiter so that you can have beans from your <code>ApplicationContext</code> injected into constructors and methods in your test class.</p>\n<p>The easiest way to solve your issue is to annotate the <code>BookServiceTest</code> constructor with <code>@Autowired</code>.</p>\n<p>For more information and alternative approaches, check out the <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-junit-jupiter-di\" rel=\"noreferrer\">Dependency Injection with <code>SpringExtension</code></a> section of the Spring reference docs.</p>\n"},{"tags":[],"owner":{"account_id":273044,"reputation":718,"user_id":564413,"display_name":"blandger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683034922,"creation_date":1683034922,"answer_id":76155475,"question_id":65934665,"body_markdown":"That error happens on junit5 test with **jboss Weld container** initialization as well. If you don&#39;t have an additional annotation on test the **@ParameterizedTest** method fails. Pls use **@ExplicitParamInjection** to fix it.\r\n\r\n    @EnableWeld\r\n    @ExplicitParamInjection // that should be put to prevent error in test run\r\n    class MyCustomTest {\r\n    \r\n        @WeldSetup\r\n        public WeldInitiator weld = WeldInitiator.from()...........build();\r\n    \r\n        @CsvSource(value = {1, 2, 3})\r\n        @ParameterizedTest\r\n        void getEventsByFilter(int inputValue) {\r\n           // do some stuff with inputValue\r\n        }\r\n    }\r\n}\r\n\r\n","title":"Why do I have ParameterResolutionException when I don&#39;t even use parametrized test?","body":"<p>That error happens on junit5 test with <strong>jboss Weld container</strong> initialization as well. If you don't have an additional annotation on test the <strong>@ParameterizedTest</strong> method fails. Pls use <strong>@ExplicitParamInjection</strong> to fix it.</p>\n<pre><code>@EnableWeld\n@ExplicitParamInjection // that should be put to prevent error in test run\nclass MyCustomTest {\n\n    @WeldSetup\n    public WeldInitiator weld = WeldInitiator.from()...........build();\n\n    @CsvSource(value = {1, 2, 3})\n    @ParameterizedTest\n    void getEventsByFilter(int inputValue) {\n       // do some stuff with inputValue\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12277,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":65939369,"answer_count":3,"score":4,"last_activity_date":1683034922,"creation_date":1611827506,"question_id":65934665,"body_markdown":"I want to write a test for my BookService. This is that test. I don&#39;t know why I get the below error all the time:\r\n\r\n```\r\norg.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter \r\n[com.mrfisherman.library.service.domain.BookService bookService] in constructor \r\n[public com.mrfisherman.library.service.domain.BookServiceTest(com.mrfisherman.library.service.domain.BookService,\r\ncom.mrfisherman.library.persistence.repository.BookRepository)].\r\n```\r\nAs you can see I don&#39;t use parametrized tests here. Thank you in advance!\r\n    \r\n\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\r\n    class BookServiceTest {\r\n    \r\n        private final BookService bookService;\r\n        private final BookRepository bookRepository;\r\n    \r\n        public BookServiceTest(BookService bookService, BookRepository bookRepository) {\r\n            this.bookService = bookService;\r\n            this.bookRepository = bookRepository;\r\n        }\r\n    \r\n        @Test\r\n        void saveBook() {\r\n            //given\r\n            Book book = new Book();\r\n            book.setTitle(&quot;Book 1&quot;);\r\n            book.setPublishYear(1990);\r\n            book.setType(BookFormat.REAL);\r\n            book.setIsbn(&quot;1234567890&quot;);\r\n            book.setDescription(&quot;Very good book&quot;);\r\n            book.setNumberOfPages(190);\r\n            book.setSummary(&quot;Very short summary&quot;);\r\n            book.setCategories(Set.of(new Category(&quot;horror&quot;), new Category(&quot;drama&quot;)));\r\n    \r\n            //when\r\n            bookService.saveBook(book);\r\n    \r\n            //then\r\n            Optional&lt;Book&gt; loaded = bookRepository.findById(book.getId());\r\n            assertThat(loaded).isPresent();\r\n    \r\n        }\r\n    }","title":"Why do I have ParameterResolutionException when I don&#39;t even use parametrized test?","body":"<p>I want to write a test for my BookService. This is that test. I don't know why I get the below error all the time:</p>\n<pre><code>org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter \n[com.mrfisherman.library.service.domain.BookService bookService] in constructor \n[public com.mrfisherman.library.service.domain.BookServiceTest(com.mrfisherman.library.service.domain.BookService,\ncom.mrfisherman.library.persistence.repository.BookRepository)].\n</code></pre>\n<p>As you can see I don't use parametrized tests here. Thank you in advance!</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\nclass BookServiceTest {\n\n    private final BookService bookService;\n    private final BookRepository bookRepository;\n\n    public BookServiceTest(BookService bookService, BookRepository bookRepository) {\n        this.bookService = bookService;\n        this.bookRepository = bookRepository;\n    }\n\n    @Test\n    void saveBook() {\n        //given\n        Book book = new Book();\n        book.setTitle(&quot;Book 1&quot;);\n        book.setPublishYear(1990);\n        book.setType(BookFormat.REAL);\n        book.setIsbn(&quot;1234567890&quot;);\n        book.setDescription(&quot;Very good book&quot;);\n        book.setNumberOfPages(190);\n        book.setSummary(&quot;Very short summary&quot;);\n        book.setCategories(Set.of(new Category(&quot;horror&quot;), new Category(&quot;drama&quot;)));\n\n        //when\n        bookService.saveBook(book);\n\n        //then\n        Optional&lt;Book&gt; loaded = bookRepository.findById(book.getId());\n        assertThat(loaded).isPresent();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","api"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683023693,"post_id":76153896,"comment_id":134299846,"body_markdown":"1. Is it &quot;community Edition&quot; and the warning says x time &quot;Unused property&quot;!? 2. `datasource.name` is not &quot;database specific&quot; but spring/sql client specific (you can choose it freely&quot; https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data.spring.datasource.name :)","body":"1. Is it &quot;community Edition&quot; and the warning says x time &quot;Unused property&quot;!? 2. <code>datasource.name</code> is not &quot;database specific&quot; but spring/sql client specific (you can choose it freely&quot; <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data.spring.datasource.name\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a> :)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683024159,"post_id":76153896,"comment_id":134299928,"body_markdown":"and for 1. : If so, then you have to live with/can ignore the gray/warnings ... https://www.jetbrains.com/products/compare/?product=idea&amp;product=idea-ce , https://intellij-support.jetbrains.com/hc/en-us/community/posts/360003254100-IntelliJ-Community-Edition-and-Spring-Boot- , https://intellij-support.jetbrains.com/hc/en-us/community/posts/6018317773074-Intellij-idea-community-edition-with-Spring-boot- , https://stackoverflow.com/questions/58055770/spring-boot-project-in-intellij-community-edition","body":"and for 1. : If so, then you have to live with/can ignore the gray/warnings ... <a href=\"https://www.jetbrains.com/products/compare/?product=idea&amp;product=idea-ce\" rel=\"nofollow noreferrer\">jetbrains.com/products/compare/&hellip;</a> , <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360003254100-IntelliJ-Community-Edition-and-Spring-Boot-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a> , <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/6018317773074-Intellij-idea-community-edition-with-Spring-boot-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a> , <a href=\"https://stackoverflow.com/questions/58055770/spring-boot-project-in-intellij-community-edition\" title=\"spring boot project in intellij community edition\">stackoverflow.com/questions/58055770/&hellip;</a>"},{"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"score":0,"creation_date":1683024180,"post_id":76153896,"comment_id":134299934,"body_markdown":"@xerx593 yes its community edition","body":"@xerx593 yes its community edition"},{"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"score":0,"creation_date":1683025482,"post_id":76153896,"comment_id":134300175,"body_markdown":"@xerx593 problem is not to live with warning , if i have to change database name ,then its still using previous database name only.Although in log its will be using new database name","body":"@xerx593 problem is not to live with warning , if i have to change database name ,then its still using previous database name only.Although in log its will be using new database name"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1683033996,"post_id":76153896,"comment_id":134302141,"body_markdown":"Db name in this screenshot is (after localhost:3306/...) test ! (in url/other properties...see 1. link)","body":"Db name in this screenshot is (after localhost:3306/...) test ! (in url/other properties...see 1. link)"}],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683034764,"creation_date":1683022813,"question_id":76153896,"body_markdown":"I am trying to develop spring boot server but I am encountering two problems \r\n1) everything in application.properties is greyed out \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YFZ7B.png\r\n\r\n2) Changing the database name is not affecting any API response. For example, I have an API which get user from the database **&quot;testewe&quot;**, so if I change the database name to anything else and then hit the API, it will return the same user which are present in testwe database, although in reality the later database does not even exist.\r\n\r\nDependency added \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.concious&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;dummapp&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;dummapp&lt;/name&gt;\r\n\t&lt;description&gt;NA&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--s3 dependencies--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.12.454&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--s3 dependencies--&gt;\r\n\r\n\t\t&lt;!--scalar dependency--&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2&lt;/version&gt;\r\n\t\t\t&lt;type&gt;jar&lt;/type&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--scalar dependency--&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nI have tried almost every solution from the internet, but none of them seems to work. Please help me resolve the issue.\r\n\r\n","title":"application.properties is greyed out in IntelliJ","body":"<p>I am trying to develop spring boot server but I am encountering two problems</p>\n<ol>\n<li>everything in application.properties is greyed out</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/YFZ7B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YFZ7B.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>Changing the database name is not affecting any API response. For example, I have an API which get user from the database <strong>&quot;testewe&quot;</strong>, so if I change the database name to anything else and then hit the API, it will return the same user which are present in testwe database, although in reality the later database does not even exist.</li>\n</ol>\n<p>Dependency added</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.concious&lt;/groupId&gt;\n    &lt;artifactId&gt;dummapp&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;dummapp&lt;/name&gt;\n    &lt;description&gt;NA&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--s3 dependencies--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n            &lt;version&gt;1.12.454&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--s3 dependencies--&gt;\n\n        &lt;!--scalar dependency--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\n            &lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\n            &lt;version&gt;4.2&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--scalar dependency--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I have tried almost every solution from the internet, but none of them seems to work. Please help me resolve the issue.</p>\n"},{"tags":["java","selenium-webdriver","cucumber"],"comments":[{"owner":{"account_id":22260524,"reputation":119,"user_id":16492009,"display_name":"Ziv"},"score":0,"creation_date":1683036676,"post_id":76154981,"comment_id":134302865,"body_markdown":"Maybe you can parse this?\nhttps://api.bseindia.com/BseIndiaAPI/api/MktRGainerLoserData/w?GLtype=gainer&amp;IndxGrp=AllMkt&amp;IndxGrpval=AllMkt&amp;orderby=all\nNote : Check if the website allows web crawlers to scrape data.","body":"Maybe you can parse this? <a href=\"https://api.bseindia.com/BseIndiaAPI/api/MktRGainerLoserData/w?GLtype=gainer&amp;IndxGrp=AllMkt&amp;IndxGrpval=AllMkt&amp;orderby=all\" rel=\"nofollow noreferrer\">api.bseindia.com/BseIndiaAPI/api/MktRGainerLoserData/&hellip;</a> Note : Check if the website allows web crawlers to scrape data."}],"owner":{"account_id":28482371,"reputation":1,"user_id":21796144,"display_name":"A G D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683034734,"creation_date":1683031551,"question_id":76154981,"body_markdown":"The scenario is: In bseindia.com in gainers page I need to get  the count of total number of rows present in all the pages. and write them in excel sheet for 5th, 10th, likewise.\r\n\r\n```java\r\nList&lt;WebElement&gt; allrows= driver.findElements(By.xpath(&quot;//tr[@class=&#39;ng-scope&#39;]&quot;));\r\nint si=allrows.size();\r\nSystem.out.println(&quot;Number of rows:&quot;+si);\r\n\r\nfor(int i=0; i&lt;si; i++) {\r\n\tWebElement option=allrows.get(i);\r\n\tString te=option.getText();\r\n\tSystem.out.println(te);\t\t\r\n}\r\n\r\ndata = new ArrayList&lt;String&gt;();\r\nfor (int i = 4; i &lt; allrows.size(); i += 5) {\r\n\tWebElement row = allrows.get(i);\r\n\tList&lt;WebElement&gt; cells = row.findElements(By.tagName(&quot;td&quot;));\r\n\tString value = cells.get(0).getText(); \r\n\tdata.add(value);\r\n}\r\n```","title":"Fetch the total number of rows displayed in all pages","body":"<p>The scenario is: In bseindia.com in gainers page I need to get  the count of total number of rows present in all the pages. and write them in excel sheet for 5th, 10th, likewise.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;WebElement&gt; allrows= driver.findElements(By.xpath(&quot;//tr[@class='ng-scope']&quot;));\nint si=allrows.size();\nSystem.out.println(&quot;Number of rows:&quot;+si);\n\nfor(int i=0; i&lt;si; i++) {\n    WebElement option=allrows.get(i);\n    String te=option.getText();\n    System.out.println(te);     \n}\n\ndata = new ArrayList&lt;String&gt;();\nfor (int i = 4; i &lt; allrows.size(); i += 5) {\n    WebElement row = allrows.get(i);\n    List&lt;WebElement&gt; cells = row.findElements(By.tagName(&quot;td&quot;));\n    String value = cells.get(0).getText(); \n    data.add(value);\n}\n</code></pre>\n"},{"tags":["java","spring","keycloak","openid-connect","reverse-proxy"],"owner":{"account_id":18989815,"reputation":176,"user_id":13859333,"display_name":"Yusuf Ipek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683034721,"creation_date":1682940985,"question_id":76146609,"body_markdown":"I want to integrate keycloak with the cloud-iam.com (Keycloak Identity and Access Management as a Service) hoster into my backend application (java spring). My backend app is behind a reverse proxy and all external requests from the backend go through the reverse proxy. I integrated keycloak into my backend and now I have the following issue. I set the `auth-server-url` to my reverse proxy URL and my application is also able to retrieve the well-known document through the reverse-proxy, but all the URLs in the well-known document like token endpoint and authorization endpoint point to the cloud-iam.com URLs and then my backend tries to call directly the cloud-iam.com endpoints, which are then blocked by the firewall. \r\n\r\n**I have the following questions:**\r\n\r\n 1. I would like to know, if there is a possibility to change all the URLs in the well-known document to point to my reverse-proxy URL? If yes where do I have to change it?\r\n 2. Do I have to make some changes on my backend application to replace the base URLs in the well-known document?\r\n 3. Is maybe a configuration on my reverse-proxy required?\r\n 4. Is a configuration on my tomcat server required? \r\n\r\nAny help is welcome.\r\n\r\n","title":"Cloud-iam Keycloak not working with reverse-proxy","body":"<p>I want to integrate keycloak with the cloud-iam.com (Keycloak Identity and Access Management as a Service) hoster into my backend application (java spring). My backend app is behind a reverse proxy and all external requests from the backend go through the reverse proxy. I integrated keycloak into my backend and now I have the following issue. I set the <code>auth-server-url</code> to my reverse proxy URL and my application is also able to retrieve the well-known document through the reverse-proxy, but all the URLs in the well-known document like token endpoint and authorization endpoint point to the cloud-iam.com URLs and then my backend tries to call directly the cloud-iam.com endpoints, which are then blocked by the firewall.</p>\n<p><strong>I have the following questions:</strong></p>\n<ol>\n<li>I would like to know, if there is a possibility to change all the URLs in the well-known document to point to my reverse-proxy URL? If yes where do I have to change it?</li>\n<li>Do I have to make some changes on my backend application to replace the base URLs in the well-known document?</li>\n<li>Is maybe a configuration on my reverse-proxy required?</li>\n<li>Is a configuration on my tomcat server required?</li>\n</ol>\n<p>Any help is welcome.</p>\n"},{"tags":["java","android","xml","android-studio","mobile-development"],"answers":[{"comments":[{"owner":{"account_id":24198507,"reputation":23,"user_id":18156649,"display_name":"amine ech"},"score":0,"creation_date":1683036600,"post_id":76155382,"comment_id":134302849,"body_markdown":"Thank for the answer, can I store arrays of strings too using SharedPreferences or just simple strings ?","body":"Thank for the answer, can I store arrays of strings too using SharedPreferences or just simple strings ?"},{"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"score":0,"creation_date":1683037733,"post_id":76155382,"comment_id":134303162,"body_markdown":"It does look like you can. https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences.\nBut maybe you can share some of your code, so that I can get a better idea of what you are attempting.","body":"It does look like you can. <a href=\"https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences\" title=\"save arraylist to sharedpreferences\">stackoverflow.com/questions/7057845/&hellip;</a>. But maybe you can share some of your code, so that I can get a better idea of what you are attempting."},{"owner":{"account_id":24198507,"reputation":23,"user_id":18156649,"display_name":"amine ech"},"score":0,"creation_date":1683096144,"post_id":76155382,"comment_id":134312113,"body_markdown":"the problem is that I am just guthering information about wether it can be done or not, I am just a beginner in android studio, thanks anyway !","body":"the problem is that I am just guthering information about wether it can be done or not, I am just a beginner in android studio, thanks anyway !"},{"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"score":0,"creation_date":1683143922,"post_id":76155382,"comment_id":134322996,"body_markdown":"If you found the information I proved helpful please consider upvoting or marking this answer as the solution.","body":"If you found the information I proved helpful please consider upvoting or marking this answer as the solution."}],"tags":[],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683034635,"creation_date":1683034196,"answer_id":76155382,"question_id":76152852,"body_markdown":"How I would go about this is to first have a shared preferences, with all the optional user defined values.\r\nHere is a helper class that can give you an idea of what I&#39;m talking about.\r\n(Documentation for Shared Preferences here: https://developer.android.com/reference/android/content/SharedPreferences)\r\n\r\n    public class UserDefinedValuesHelper {\r\n\r\n    public static String VALUES = &quot;VALUES&quot;;\r\n\r\n    // Define your values as Static String for easy access\r\n    public static String EXAMPLEVALUEKEYNAME = &quot;EXAMPLEVALUEKEYNAME&quot;;\r\n\r\n        public UserDefinedValuesHelper (Context context) {\r\n            definedValues = context.getSharedPreferences(VALUES, MODE_PRIVATE);\r\n        }\r\n\r\n        public void saveValueString(String key, String value) {\r\n            SharedPreferences.Editor editor = definedValues.edit();\r\n            editor.putString(key, value);\r\n            editor.apply();\r\n        }\r\n\r\n        //Create getters for all your values\r\n        public String getExampleKeyName() {\r\n            return definedValues.getString(EXAMPLEVALUEKEYNAME, R.string.examplestring);\r\n    //the first parameter of definedValues.getString is the Key. If it is null than the second parameter is the default value and is returned.\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\nExamples of using the helper in another class\r\n\r\n     //instantiate userDefinedValuesHelper at top of class\r\n     UserDefinedValuesHelper userDefinedValuesHelper;\r\n\r\n     //define userDefinedValuesHelper onCreate/initialize of class\r\n     userDefinedValuesHelper = new UserDefinedValuesHelper(this);\r\n\r\n\r\n    //Saving to userDefinedValuesHelper\r\n    userDefinedValuesHelper.saveValueString(userDefinedValuesHelper.EXAMPLEVALUEKEYNAME, &quot;myStringValueHere&quot;);\r\n\r\n    //Getting String value\r\n    String myStringValue = userDefinedValuesHelper.getExampleKeyName();","title":"Can I change strings.xml file content dynamically from the application without having to access the strings.xml file in android studio?","body":"<p>How I would go about this is to first have a shared preferences, with all the optional user defined values.\nHere is a helper class that can give you an idea of what I'm talking about.\n(Documentation for Shared Preferences here: <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/content/SharedPreferences</a>)</p>\n<pre><code>public class UserDefinedValuesHelper {\n\npublic static String VALUES = &quot;VALUES&quot;;\n\n// Define your values as Static String for easy access\npublic static String EXAMPLEVALUEKEYNAME = &quot;EXAMPLEVALUEKEYNAME&quot;;\n\n    public UserDefinedValuesHelper (Context context) {\n        definedValues = context.getSharedPreferences(VALUES, MODE_PRIVATE);\n    }\n\n    public void saveValueString(String key, String value) {\n        SharedPreferences.Editor editor = definedValues.edit();\n        editor.putString(key, value);\n        editor.apply();\n    }\n\n    //Create getters for all your values\n    public String getExampleKeyName() {\n        return definedValues.getString(EXAMPLEVALUEKEYNAME, R.string.examplestring);\n//the first parameter of definedValues.getString is the Key. If it is null than the second parameter is the default value and is returned.\n\n    }\n\n\n}\n</code></pre>\n<p>Examples of using the helper in another class</p>\n<pre><code> //instantiate userDefinedValuesHelper at top of class\n UserDefinedValuesHelper userDefinedValuesHelper;\n\n //define userDefinedValuesHelper onCreate/initialize of class\n userDefinedValuesHelper = new UserDefinedValuesHelper(this);\n\n\n//Saving to userDefinedValuesHelper\nuserDefinedValuesHelper.saveValueString(userDefinedValuesHelper.EXAMPLEVALUEKEYNAME, &quot;myStringValueHere&quot;);\n\n//Getting String value\nString myStringValue = userDefinedValuesHelper.getExampleKeyName();\n</code></pre>\n"}],"owner":{"account_id":24198507,"reputation":23,"user_id":18156649,"display_name":"amine ech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76155382,"answer_count":1,"score":1,"last_activity_date":1683034635,"creation_date":1683014573,"question_id":76152852,"body_markdown":"I have a `strings.xml` file that contains `pre-defined lists`. I want the user to have control over those `lists`. In other words, the user should be able to change the content of the `pre-defined list`, is there a way in android-studio/java to achieve that?\r\n\r\nI tried to see if I could change the file content in my MainActivity but without success.\r\n\r\nIs there a way to `dynamically` make pre-defined lists of content editable if it&#39;s impossible?\r\n\r\nAny help or thoughts would be appreciated! ","title":"Can I change strings.xml file content dynamically from the application without having to access the strings.xml file in android studio?","body":"<p>I have a <code>strings.xml</code> file that contains <code>pre-defined lists</code>. I want the user to have control over those <code>lists</code>. In other words, the user should be able to change the content of the <code>pre-defined list</code>, is there a way in android-studio/java to achieve that?</p>\n<p>I tried to see if I could change the file content in my MainActivity but without success.</p>\n<p>Is there a way to <code>dynamically</code> make pre-defined lists of content editable if it's impossible?</p>\n<p>Any help or thoughts would be appreciated!</p>\n"},{"tags":["java","mysql","spring","spring-boot"],"comments":[{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":1,"creation_date":1494140947,"post_id":43828705,"comment_id":74694938,"body_markdown":"do you get any exception or stack trace. suppose you take a look at sample projects [here](https://github.com/spring-projects/spring-boot)","body":"do you get any exception or stack trace. suppose you take a look at sample projects <a href=\"https://github.com/spring-projects/spring-boot\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1494141027,"post_id":43828705,"comment_id":74694959,"body_markdown":"what s the package where your User class is in?","body":"what s the package where your User class is in?"}],"answers":[{"tags":[],"owner":{"account_id":6456733,"reputation":1883,"user_id":5404976,"accept_rate":50,"display_name":"Vinit Solanki"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494144455,"creation_date":1494144455,"answer_id":43829213,"question_id":43828705,"body_markdown":"Why you are using org.hibernate.dialect.PostgreSQLDialect. you need to update dialect as per your database, update these two properties. \r\n\r\n    spring.datasource.driverClassName=com.mysql.jdbc.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect","title":"No tables created in the MySQL database in Spring Boot application","body":"<p>Why you are using org.hibernate.dialect.PostgreSQLDialect. you need to update dialect as per your database, update these two properties. </p>\n\n<pre><code>spring.datasource.driverClassName=com.mysql.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27423478,"reputation":1,"user_id":20921455,"display_name":"Sahana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672812560,"creation_date":1672767389,"answer_id":74996772,"question_id":43828705,"body_markdown":"In your main class, try adding \r\n\r\n    @EntityScan(basePackages = {&quot;packagename_where_entity_class_is_present&quot;})\r\n\r\n \r\nHope it works!\r\n\r\nOR\r\n\r\nYou can try reordering the packages i.e. for example, if your main class is in the package com.main, then let your entity class be in the package com.main.entity","title":"No tables created in the MySQL database in Spring Boot application","body":"<p>In your main class, try adding</p>\n<pre><code>@EntityScan(basePackages = {&quot;packagename_where_entity_class_is_present&quot;})\n</code></pre>\n<p>Hope it works!</p>\n<p>OR</p>\n<p>You can try reordering the packages i.e. for example, if your main class is in the package com.main, then let your entity class be in the package com.main.entity</p>\n"},{"tags":[],"owner":{"account_id":28482893,"reputation":1,"user_id":21796599,"display_name":"user21796599"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683034209,"creation_date":1683034209,"answer_id":76155386,"question_id":43828705,"body_markdown":"yes, check your entity class and application class(where the main function is present ) if both are in different packages then move your entity class to the package where the application class is present.","title":"No tables created in the MySQL database in Spring Boot application","body":"<p>yes, check your entity class and application class(where the main function is present ) if both are in different packages then move your entity class to the package where the application class is present.</p>\n"}],"owner":{"display_name":"user5359726"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3345,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1683034209,"creation_date":1494140422,"question_id":43828705,"body_markdown":"Here is my Application.java:\r\n    \r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude =\r\n        {JpaRepositoriesAutoConfiguration.class})\r\n    @ComponentScan\r\n    @SpringBootApplication\r\n    public class UserFrontApplication {\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(UserFrontApplication.class, args);\r\n        }\r\n    }\r\n\r\nContents of application.properties:\r\n\r\n    spring.datasource.driverClassName=org.gjt.mm.mysql.Driver\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/mydb\r\n    spring.datasource.username=root\r\n    spring.datasource.password=password\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\r\n    spring.jpa.show-sql=false\r\n    spring.jpa.hibernate.ddl-auto=create\r\n\r\npom.xml:\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.userFront&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;userfront&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;UserFront&lt;/name&gt;\r\n\t&lt;description&gt;User frontend for online banking&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.38&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.4.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.5.6-Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.3.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nThe application runs fine but no tables are created.\r\n\r\nUser class that has to be stored in database:\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    public class User {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;userId&quot;, nullable = false, updatable = false)\r\n        private Long userId;\r\n    }\r\n","title":"No tables created in the MySQL database in Spring Boot application","body":"<p>Here is my Application.java:</p>\n\n<pre><code>@Configuration\n@EnableAutoConfiguration(exclude =\n    {JpaRepositoriesAutoConfiguration.class})\n@ComponentScan\n@SpringBootApplication\npublic class UserFrontApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(UserFrontApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>Contents of application.properties:</p>\n\n<pre><code>spring.datasource.driverClassName=org.gjt.mm.mysql.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/mydb\nspring.datasource.username=root\nspring.datasource.password=password\n\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.show-sql=false\nspring.jpa.hibernate.ddl-auto=create\n</code></pre>\n\n<p>pom.xml:</p>\n\n<p>\nhttp://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0</p>\n\n<pre><code>&lt;groupId&gt;com.userFront&lt;/groupId&gt;\n&lt;artifactId&gt;userfront&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;UserFront&lt;/name&gt;\n&lt;description&gt;User frontend for online banking&lt;/description&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.38&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;4.1.4.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.5.6-Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.2.3.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>The application runs fine but no tables are created.</p>\n\n<p>User class that has to be stored in database:</p>\n\n<pre><code>@Entity\n@Table(name = \"user\")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"userId\", nullable = false, updatable = false)\n    private Long userId;\n}\n</code></pre>\n"},{"tags":["java","spring","ip"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1653484150,"post_id":72378142,"comment_id":127863342,"body_markdown":"Which IP address? You are already calling a URL so you already know the location?","body":"Which IP address? You are already calling a URL so you already know the location?"},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1653484661,"post_id":72378142,"comment_id":127863567,"body_markdown":"@M.Deinum IP address of a client so my own. Since a proxy is being used I just wanted to sysout the ip","body":"@M.Deinum IP address of a client so my own. Since a proxy is being used I just wanted to sysout the ip"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1653484870,"post_id":72378142,"comment_id":127863657,"body_markdown":"A client in this context isn&#39;t really clear. Also what has a proxy to do with getting the IP address? `InetAddress.getLocalHost()` will give you the machine IP-address, that might and probably will not, be the IP address used externally!.","body":"A client in this context isn&#39;t really clear. Also what has a proxy to do with getting the IP address? <code>InetAddress.getLocalHost()</code> will give you the machine IP-address, that might and probably will not, be the IP address used externally!."},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1653485471,"post_id":72378142,"comment_id":127863924,"body_markdown":"@M.Deinum I edited my question to be more clear about what the problem is. Thank you for the quick responses!","body":"@M.Deinum I edited my question to be more clear about what the problem is. Thank you for the quick responses!"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1653487216,"post_id":72378142,"comment_id":127864737,"body_markdown":"You need to whitelist the ip-address of your gateway/proxy. Adding your machines ip-address won&#39;t change a thing as that will be in internal ip-address (generally starting iwth 10.x or 192.x).","body":"You need to whitelist the ip-address of your gateway/proxy. Adding your machines ip-address won&#39;t change a thing as that will be in internal ip-address (generally starting iwth 10.x or 192.x)."}],"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683033834,"creation_date":1653483606,"question_id":72378142,"body_markdown":"Since I wasn&#39;t able to find any code snippet doing this and also have difficulties finding this on my own I have to ask the community. I consume a REST service and therefore use this code:\r\n\r\n    WebClient\r\n            .builder()\r\n            .baseUrl(baseUrl)\r\n            .build()\r\n            .get()\r\n            .accept(MediaType.APPLICATION_JSON)\r\n            .header(HEADER_NAME_APIKEY, apiKey)\r\n            .header(HEADER_NAME_REALM_MANDANT, realmMandant)\r\n            .retrieve()\r\n            .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; Mono.just(new RuntimeException(String.format(&quot;A client error occured: %s&quot;, clientResponse.statusCode()))))\r\n            .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; Mono.just(new RuntimeException(String.format(&quot;A server error occured: %s&quot;, clientResponse.statusCode()))))\r\n            .bodyToMono(new ParameterizedTypeReference&lt;List&lt;Message&gt;&gt;() {})\r\n            .block()\r\n\r\nWhen sending a GET request I end up getting a Connection timeout. After talking to a person on the other side of the endpoint I have been told that the IP needs to be whitelisted before I can consume this service so I am now trying to figure out the IP address of a client/my machine since I try to send this request from my local machine.\r\n\r\nSince there is also a proxy on our side I am now unsure which IP I should get whitelisted on the other side. Opening cmd and executing ipconfig to find the IP seems not right to me. Possible way would be maybe to resolve the hostname of the proxy to an IP. I thought that obtaining the IP programmatically right before firing the GET request would be the best solution. So here I am, a bit clueless what to do next.\r\n\r\nHow can I obtain the IP address using this WebClient object? Is it the right direction I picked or should I stick to resolving the proxy hostname to an IP?\r\n","title":"Obtain IP address of a client using Spring Webflux","body":"<p>Since I wasn't able to find any code snippet doing this and also have difficulties finding this on my own I have to ask the community. I consume a REST service and therefore use this code:</p>\n<pre><code>WebClient\n        .builder()\n        .baseUrl(baseUrl)\n        .build()\n        .get()\n        .accept(MediaType.APPLICATION_JSON)\n        .header(HEADER_NAME_APIKEY, apiKey)\n        .header(HEADER_NAME_REALM_MANDANT, realmMandant)\n        .retrieve()\n        .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; Mono.just(new RuntimeException(String.format(&quot;A client error occured: %s&quot;, clientResponse.statusCode()))))\n        .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; Mono.just(new RuntimeException(String.format(&quot;A server error occured: %s&quot;, clientResponse.statusCode()))))\n        .bodyToMono(new ParameterizedTypeReference&lt;List&lt;Message&gt;&gt;() {})\n        .block()\n</code></pre>\n<p>When sending a GET request I end up getting a Connection timeout. After talking to a person on the other side of the endpoint I have been told that the IP needs to be whitelisted before I can consume this service so I am now trying to figure out the IP address of a client/my machine since I try to send this request from my local machine.</p>\n<p>Since there is also a proxy on our side I am now unsure which IP I should get whitelisted on the other side. Opening cmd and executing ipconfig to find the IP seems not right to me. Possible way would be maybe to resolve the hostname of the proxy to an IP. I thought that obtaining the IP programmatically right before firing the GET request would be the best solution. So here I am, a bit clueless what to do next.</p>\n<p>How can I obtain the IP address using this WebClient object? Is it the right direction I picked or should I stick to resolving the proxy hostname to an IP?</p>\n"},{"tags":["java","maven","ssl","java-11"],"answers":[{"comments":[{"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"score":0,"creation_date":1623011543,"post_id":61197424,"comment_id":119950355,"body_markdown":"how to apply that in gradle?","body":"how to apply that in gradle?"},{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":1,"creation_date":1623061016,"post_id":61197424,"comment_id":119961791,"body_markdown":"No idea, I tend to avoid using gradle altogether…","body":"No idea, I tend to avoid using gradle altogether…"},{"owner":{"account_id":1227394,"reputation":3921,"user_id":1192702,"accept_rate":75,"display_name":"alaster"},"score":1,"creation_date":1626439210,"post_id":61197424,"comment_id":120899942,"body_markdown":"You might want to include these packages as well\n`&lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.provider=ALL-UNNAMED&lt;/arg&gt;`\n`&lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.pkcs=ALL-UNNAMED&lt;/arg&gt;`\n`&lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.util=ALL-UNNAMED&lt;/arg&gt;`","body":"You might want to include these packages as well <code>&lt;arg&gt;--add-exports&lt;&#47;arg&gt;&lt;arg&gt;java.base&#47;sun.security.provider&zwnj;&#8203;=ALL-UNNAMED&lt;&#47;arg&gt;</code> <code>&lt;arg&gt;--add-exports&lt;&#47;arg&gt;&lt;arg&gt;java.base&#47;sun.security.pkcs=ALL&zwnj;&#8203;-UNNAMED&lt;&#47;arg&gt;</code> <code>&lt;arg&gt;--add-exports&lt;&#47;arg&gt;&lt;arg&gt;java.base&#47;sun.security.util=ALL&zwnj;&#8203;-UNNAMED&lt;&#47;arg&gt;</code>"},{"owner":{"account_id":390867,"reputation":3923,"user_id":751200,"accept_rate":56,"display_name":"kolobok"},"score":2,"creation_date":1631185023,"post_id":61197424,"comment_id":122157321,"body_markdown":"@dimirsen For gradle it&#39;s:\n`compileJava {\n    options.compilerArgs &lt;&lt; &#39;--add-exports=java.base/sun.security.x509=ALL-UNNAMED&#39;\n}`","body":"@dimirsen For gradle it&#39;s: <code>compileJava {     options.compilerArgs &lt;&lt; &#39;--add-exports=java.base&#47;sun.security.x509=ALL-UNNAMED&#39; }</code>"},{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":4,"creation_date":1647016728,"post_id":61197424,"comment_id":126274863,"body_markdown":"and... it stopped working with JDK17","body":"and... it stopped working with JDK17"}],"tags":[],"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"comment_count":5,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1643976552,"creation_date":1586814762,"answer_id":61197424,"question_id":61149455,"body_markdown":"It turns out that presumably it has to do with the fact that builds produced by newer JDK (9+) Versions won&#39;t be executable under JDK8:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;source&gt;9&lt;/source&gt;\r\n        &lt;target&gt;9&lt;/target&gt;\r\n        &lt;release combine.self=&quot;override&quot;&gt;&lt;/release&gt;\r\n        &lt;compilerArgs&gt;\r\n            &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n        &lt;/compilerArgs&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Access `sun.security.x509` in JDK 11 without modules?","body":"<p>It turns out that presumably it has to do with the fact that builds produced by newer JDK (9+) Versions won't be executable under JDK8:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;9&lt;/source&gt;\n        &lt;target&gt;9&lt;/target&gt;\n        &lt;release combine.self=&quot;override&quot;&gt;&lt;/release&gt;\n        &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n        &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10853331,"reputation":327,"user_id":7980462,"display_name":"Дима Годиков"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637237858,"creation_date":1637237858,"answer_id":70019697,"question_id":61149455,"body_markdown":"To include `sun.security.[somePackage]` classes in gradle you may add:\r\n\r\n```\r\ntasks.withType(AbstractCompile) {\r\n    options.compilerArgs += [&quot;--add-exports&quot;, &quot;java.base/sun.security.util=ALL-UNNAMED&quot;]\r\n    options.compilerArgs += [&quot;--add-exports&quot;, &quot;java.base/sun.security.pkcs=ALL-UNNAMED&quot;]\r\n}","title":"Access `sun.security.x509` in JDK 11 without modules?","body":"<p>To include <code>sun.security.[somePackage]</code> classes in gradle you may add:</p>\n<pre><code>tasks.withType(AbstractCompile) {\n    options.compilerArgs += [&quot;--add-exports&quot;, &quot;java.base/sun.security.util=ALL-UNNAMED&quot;]\n    options.compilerArgs += [&quot;--add-exports&quot;, &quot;java.base/sun.security.pkcs=ALL-UNNAMED&quot;]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":273044,"reputation":718,"user_id":564413,"display_name":"blandger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683032882,"creation_date":1683032882,"answer_id":76155201,"question_id":61149455,"body_markdown":"I had a junit5 test with sun.security.x509 code inside. Test failed with such error although I had a &#39;maven-compiler-plugin&#39; configured with additional compile parameters above.\r\nI could fix test (**on graalvm jdk 17**) by adding additional config parameter to &#39;maven-surefire-plugin&#39; like below.\r\n\r\n    &lt;plugin&gt;\r\n         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;argLine&gt;--add-opens java.base/sun.security.x509=ALL-UNNAMED&lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\n","title":"Access `sun.security.x509` in JDK 11 without modules?","body":"<p>I had a junit5 test with sun.security.x509 code inside. Test failed with such error although I had a 'maven-compiler-plugin' configured with additional compile parameters above.\nI could fix test (<strong>on graalvm jdk 17</strong>) by adding additional config parameter to 'maven-surefire-plugin' like below.</p>\n<pre><code>&lt;plugin&gt;\n     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;argLine&gt;--add-opens java.base/sun.security.x509=ALL-UNNAMED&lt;/argLine&gt;\n        &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14400,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":61197424,"answer_count":3,"score":13,"last_activity_date":1683032882,"creation_date":1586556860,"question_id":61149455,"body_markdown":"(tl,dr at the end)\r\nWe have a small method that generates self-signed SSL certificate and it obviously depends on `sun.security.x509`. Currently we are still building it using JDK8 because of that, even though the rest of the codebase (it&#39;s only small, single library) is build using JDK11 and run with JVM11.\r\n\r\nUnfortunately there aren&#39;t replacement in the main JDK, as per (and `CertificateFactory` has little to nothing with generating certificates, contrary to what it&#39;s javadoc states…):\r\n\r\n* https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8165481\r\n* https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8058778\r\n\r\nOne option would be to use BouncyCastle, but that&#39;s additional 4MB that we really don&#39;t need, especially for such small task so I was pondering ways to access it while \r\n\r\nFrom what I saw, the package and required classes are still package and relevant classes are still there (see [`sun.security.x509` on github](https://github.com/AdoptOpenJDK/openjdk-jdk/tree/master/src/java.base/share/classes/sun/security/x509) but when building it (using maven) I get error:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project: Compilation failure: Compilation failure:\r\n[ERROR] OldSelfSignedCertificateGenerator.java:[20,25] package sun.security.x509 does not exist\r\n[ERROR] OldSelfSignedCertificateGenerator.java:[71,45] cannot find symbol\r\n[ERROR]   symbol:   class X509CertInfo\r\n[ERROR]   location: class OldSelfSignedCertificateGenerator\r\n```\r\n\r\nI was searching a bit and adding:\r\n```\r\n&lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n```\r\nto `maven-compiler-plugin` and it somewhat worked - I only get `WARNING` not regarding `sun.security.x509` package:\r\n```\r\n[WARNING] OldSelfSignedCertificateGenerator.java:[20,25] sun.security.x509.AlgorithmId is internal proprietary API and may be removed in a future release\r\n```\r\n\r\nBUT! Now it seems I entered (unwillingly!) module system and it complains about access to other, basic Java classes (and one more our dependency):\r\n```\r\n[ERROR] CertificateUtil.java:[35,17] package java.util.logging is not visible\r\n  (package java.util.logging is declared in module java.logging, but module java.base does not read it)\r\n```\r\n\r\nI tried adding `java.logging` module in the same manner to exports but without much success. It also seems that I would have to convert both this library and it&#39;s dependency to module system, which is not really desired.\r\n\r\nThe question is somewhat related to https://stackoverflow.com/questions/39143858/how-to-generate-a-self-signed-certificate-using-only-jdk-supported-classes\r\n\r\n------\r\n\r\ntl,dr;\r\nis there a way to compile library using `sun.security.x509` package under JDK 11 without module system? Some simple switch?","title":"Access `sun.security.x509` in JDK 11 without modules?","body":"<p>(tl,dr at the end)\nWe have a small method that generates self-signed SSL certificate and it obviously depends on <code>sun.security.x509</code>. Currently we are still building it using JDK8 because of that, even though the rest of the codebase (it's only small, single library) is build using JDK11 and run with JVM11.</p>\n\n<p>Unfortunately there aren't replacement in the main JDK, as per (and <code>CertificateFactory</code> has little to nothing with generating certificates, contrary to what it's javadoc states…):</p>\n\n<ul>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8165481\" rel=\"noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8165481</a></li>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8058778\" rel=\"noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8058778</a></li>\n</ul>\n\n<p>One option would be to use BouncyCastle, but that's additional 4MB that we really don't need, especially for such small task so I was pondering ways to access it while </p>\n\n<p>From what I saw, the package and required classes are still package and relevant classes are still there (see <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk/tree/master/src/java.base/share/classes/sun/security/x509\" rel=\"noreferrer\"><code>sun.security.x509</code> on github</a> but when building it (using maven) I get error:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project: Compilation failure: Compilation failure:\n[ERROR] OldSelfSignedCertificateGenerator.java:[20,25] package sun.security.x509 does not exist\n[ERROR] OldSelfSignedCertificateGenerator.java:[71,45] cannot find symbol\n[ERROR]   symbol:   class X509CertInfo\n[ERROR]   location: class OldSelfSignedCertificateGenerator\n</code></pre>\n\n<p>I was searching a bit and adding:</p>\n\n<pre><code>&lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n</code></pre>\n\n<p>to <code>maven-compiler-plugin</code> and it somewhat worked - I only get <code>WARNING</code> not regarding <code>sun.security.x509</code> package:</p>\n\n<pre><code>[WARNING] OldSelfSignedCertificateGenerator.java:[20,25] sun.security.x509.AlgorithmId is internal proprietary API and may be removed in a future release\n</code></pre>\n\n<p>BUT! Now it seems I entered (unwillingly!) module system and it complains about access to other, basic Java classes (and one more our dependency):</p>\n\n<pre><code>[ERROR] CertificateUtil.java:[35,17] package java.util.logging is not visible\n  (package java.util.logging is declared in module java.logging, but module java.base does not read it)\n</code></pre>\n\n<p>I tried adding <code>java.logging</code> module in the same manner to exports but without much success. It also seems that I would have to convert both this library and it's dependency to module system, which is not really desired.</p>\n\n<p>The question is somewhat related to <a href=\"https://stackoverflow.com/questions/39143858/how-to-generate-a-self-signed-certificate-using-only-jdk-supported-classes\">How to generate a self-signed certificate using only JDK supported classes?</a></p>\n\n<hr>\n\n<p>tl,dr;\nis there a way to compile library using <code>sun.security.x509</code> package under JDK 11 without module system? Some simple switch?</p>\n"},{"tags":["java","spring-boot","hibernate","decorator"],"owner":{"account_id":14938156,"reputation":67,"user_id":10932409,"display_name":"Luca Nitti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683032411,"creation_date":1683032411,"question_id":76155123,"body_markdown":"In my project i created two mappedSuperclass.\r\nOne called Base Entity where i have 4 common field (creationUser,updateUser, creationTime and updateTime) plus the logic to update the field on update end persist. And another one called BaseAccessoryEntity that i use for all those table that have the same structure.\r\nThere is a way  to create a decorator that can i use for all my class instead of extend the baseclass?\r\n\r\n","title":"Spring boot create custom decorator to add field and ID","body":"<p>In my project i created two mappedSuperclass.\nOne called Base Entity where i have 4 common field (creationUser,updateUser, creationTime and updateTime) plus the logic to update the field on update end persist. And another one called BaseAccessoryEntity that i use for all those table that have the same structure.\nThere is a way  to create a decorator that can i use for all my class instead of extend the baseclass?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1088492,"reputation":43453,"user_id":1083663,"accept_rate":69,"display_name":"GOTO 0"},"score":57,"creation_date":1379938172,"post_id":18958747,"comment_id":27999520,"body_markdown":"Your pattern means (a digit exactly once) followed by (nothing exactly twice).","body":"Your pattern means (a digit exactly once) followed by (nothing exactly twice)."},{"owner":{"account_id":326033,"reputation":326,"user_id":647570,"display_name":"Jeremy"},"score":3,"creation_date":1379938211,"post_id":18958747,"comment_id":27999545,"body_markdown":"If it helps, both `pcregrep` and *Mathematica* give errors for this regex like `pcregrep: Error in command-line regex at offset 8: nothing to repeat`.  I would either just use `{m*n}`, or I would use `(?:\\\\d{1}){2}`, which is unambiguous.","body":"If it helps, both <code>pcregrep</code> and <i>Mathematica</i> give errors for this regex like <code>pcregrep: Error in command-line regex at offset 8: nothing to repeat</code>.  I would either just use <code>{m*n}</code>, or I would use <code>(?:\\\\d{1}){2}</code>, which is unambiguous."},{"owner":{"account_id":290794,"reputation":22442,"user_id":592540,"accept_rate":82,"display_name":"Carlos Campderr&#243;s"},"score":1,"creation_date":1379944814,"post_id":18958747,"comment_id":28003466,"body_markdown":"I don&#39;t understand why can&#39;t you just use `\\d{2}`? Is there any difference in what you are trying to achieve?","body":"I don&#39;t understand why can&#39;t you just use <code>\\d{2}</code>? Is there any difference in what you are trying to achieve?"},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":5,"creation_date":1379945165,"post_id":18958747,"comment_id":28003712,"body_markdown":"@CarlosCampderr&#243;s Well, the only thing I&#39;m really trying to achieve is a better understanding of regex. The problem is more theoretical, I&#39;m interested in finding out why it works the way it does as opposed to finding a regex that works for the example.","body":"@CarlosCampderr&#243;s Well, the only thing I&#39;m really trying to achieve is a better understanding of regex. The problem is more theoretical, I&#39;m interested in finding out why it works the way it does as opposed to finding a regex that works for the example."},{"owner":{"account_id":1300809,"reputation":56627,"user_id":1250772,"accept_rate":45,"display_name":"Kaz"},"score":0,"creation_date":1379981521,"post_id":18958747,"comment_id":28020698,"body_markdown":"@GOTO0 If that is indeed the interpretation, it is very counter-intuitive. You see R{1} is a regex, correct? And so R{1}{2} applies {2} to a regex. It either means (R{1}){2}, or else it must mean R({1}{2}) which is nonsense, because this associativity treats the  `{1}` operator as a unit to which the `{2}` operator is applied. That associativity could work if there is semantic a rule for combining these operators.","body":"@GOTO0 If that is indeed the interpretation, it is very counter-intuitive. You see R{1} is a regex, correct? And so R{1}{2} applies {2} to a regex. It either means (R{1}){2}, or else it must mean R({1}{2}) which is nonsense, because this associativity treats the  <code>{1}</code> operator as a unit to which the <code>{2}</code> operator is applied. That associativity could work if there is semantic a rule for combining these operators."},{"owner":{"account_id":1088492,"reputation":43453,"user_id":1083663,"accept_rate":69,"display_name":"GOTO 0"},"score":2,"creation_date":1380033986,"post_id":18958747,"comment_id":28043118,"body_markdown":"@Kaz Not at all: curly repetitions in Java only apply to single nodes (including empty nodes) or groups, not to other repetitions. You can create that pattern and inspect its `matchRoot` with a debugger if you don&#39;t believe me. A look at the source code of the method [`Pattern.closure`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/regex/Pattern.java#3028) will also provide you with some insights.","body":"@Kaz Not at all: curly repetitions in Java only apply to single nodes (including empty nodes) or groups, not to other repetitions. You can create that pattern and inspect its <code>matchRoot</code> with a debugger if you don&#39;t believe me. A look at the source code of the method <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/regex/Pattern.java#3028\" rel=\"nofollow noreferrer\"><code>Pattern.closure</code></a> will also provide you with some insights."}],"answers":[{"tags":[],"owner":{"account_id":47312,"reputation":9659,"user_id":140070,"accept_rate":92,"display_name":"IProblemFactory"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1683032265,"creation_date":1379938125,"answer_id":18958888,"question_id":18958747,"body_markdown":"I am guessing that in definition of `{}` is something like &quot;look back to find valid expression (excluding myself - `{}`&quot;, so in your example there is nothing between `}` and `{`. \r\n\r\nAnyway, if you wrap it in parenthesis it will work as you expected: http://refiddle.co/gv6. \r\n\r\n```\r\n/([0-9]{1}){2}/gim\r\n```","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>I am guessing that in definition of <code>{}</code> is something like &quot;look back to find valid expression (excluding myself - <code>{}</code>&quot;, so in your example there is nothing between <code>}</code> and <code>{</code>.</p>\n<p>Anyway, if you wrap it in parenthesis it will work as you expected: <a href=\"http://refiddle.co/gv6\" rel=\"nofollow noreferrer\">http://refiddle.co/gv6</a>.</p>\n<pre><code>/([0-9]{1}){2}/gim\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1300809,"reputation":56627,"user_id":1250772,"accept_rate":45,"display_name":"Kaz"},"score":0,"creation_date":1379981693,"post_id":18958894,"comment_id":28020740,"body_markdown":"If `\\d{1}{2}` does not mean `(\\d{1}){2}`, then what does it mean? If the associativity is not left to right, then it must be right to left, and so it means `\\d({1}{2})`, which is meaningless unless we define what it means to clump two of these braced operators.","body":"If <code>\\d{1}{2}</code> does not mean <code>(\\d{1}){2}</code>, then what does it mean? If the associativity is not left to right, then it must be right to left, and so it means <code>\\d({1}{2})</code>, which is meaningless unless we define what it means to clump two of these braced operators."},{"owner":{"account_id":21597,"reputation":57565,"user_id":52598,"accept_rate":100,"display_name":"Lieven Keersmaekers"},"score":0,"creation_date":1380000460,"post_id":18958894,"comment_id":28024821,"body_markdown":"@Kaz - OP&#39;s test show that the second duplication symbol is not evaluated using Java&#39;s regular expression engine. I believe piet.t is right on the mark that every implementation can do as it pleases.","body":"@Kaz - OP&#39;s test show that the second duplication symbol is not evaluated using Java&#39;s regular expression engine. I believe piet.t is right on the mark that every implementation can do as it pleases."},{"owner":{"account_id":206351,"reputation":6070,"user_id":455581,"accept_rate":78,"display_name":"fncomp"},"score":5,"creation_date":1380052114,"post_id":18958894,"comment_id":28053783,"body_markdown":"Wouldn&#39;t `^(:?\\d{1}){2}$` be a more precise reproduction of the intent? (In order to avoid capturing.)","body":"Wouldn&#39;t <code>^(:?\\d{1}){2}$</code> be a more precise reproduction of the intent? (In order to avoid capturing.)"},{"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"score":2,"creation_date":1380105368,"post_id":18958894,"comment_id":28072919,"body_markdown":"@fncomp - It would, that&#39;s also what I used. Small typo though - it should be `(?: )`","body":"@fncomp - It would, that&#39;s also what I used. Small typo though - it should be <code>(?: )</code>"},{"owner":{"account_id":21597,"reputation":57565,"user_id":52598,"accept_rate":100,"display_name":"Lieven Keersmaekers"},"score":0,"creation_date":1380108936,"post_id":18958894,"comment_id":28074878,"body_markdown":"@fncomp - I&#39;ve been dabbling over that myself. It&#39;s better performance wise but it&#39;s not as concise. As intent goes, the outcome is the same so that didn&#39;t bother me. I have added your comment to the answer for completeness.","body":"@fncomp - I&#39;ve been dabbling over that myself. It&#39;s better performance wise but it&#39;s not as concise. As intent goes, the outcome is the same so that didn&#39;t bother me. I have added your comment to the answer for completeness."},{"owner":{"account_id":206351,"reputation":6070,"user_id":455581,"accept_rate":78,"display_name":"fncomp"},"score":0,"creation_date":1380131116,"post_id":18958894,"comment_id":28088839,"body_markdown":"@Kobi Ah, I always seem to do that when I don&#39;t test my groups. `^(?:\\d{1}){2}$`","body":"@Kobi Ah, I always seem to do that when I don&#39;t test my groups. <code>^(?:\\d{1}){2}$</code>"}],"tags":[],"owner":{"account_id":21597,"reputation":57565,"user_id":52598,"accept_rate":100,"display_name":"Lieven Keersmaekers"},"comment_count":6,"down_vote_count":1,"up_vote_count":77,"is_accepted":true,"score":76,"last_activity_date":1404335273,"creation_date":1379938150,"answer_id":18958894,"question_id":18958747,"body_markdown":"When I input your regex in RegexBuddy using the Java regex syntax, it displays following message\r\n\r\n&gt; Quantifiers must be preceded by a token that can be repeated &#171;{2}&#187;\r\n\r\nChanging the regex to explicitly use a grouping `^(\\d{1}){2}` solves that error and works as you expect.\r\n\r\n\r\n----------\r\n\r\n\r\nI assume that the java regex engine simply neglects the error/expression and works with what has been compiled so far. \r\n\r\n**Edit**\r\n\r\nThe reference to the [IEEE-Standard][1] in [@piet.t&#39;s answer][2] seems to support that assumption.\r\n\r\n**Edit 2** *(kudos to @fncomp)*\r\n\r\nFor completeness, one would typically use `(?:)`to avoid capturing the group. The complete regex then becomes `^(?:\\d{1}){2}` \r\n\r\n  [1]: http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html\r\n  [2]: https://stackoverflow.com/a/18958937/52598","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>When I input your regex in RegexBuddy using the Java regex syntax, it displays following message</p>\n\n<blockquote>\n  <p>Quantifiers must be preceded by a token that can be repeated «{2}»</p>\n</blockquote>\n\n<p>Changing the regex to explicitly use a grouping <code>^(\\d{1}){2}</code> solves that error and works as you expect.</p>\n\n<hr>\n\n<p>I assume that the java regex engine simply neglects the error/expression and works with what has been compiled so far. </p>\n\n<p><strong>Edit</strong></p>\n\n<p>The reference to the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html\" rel=\"nofollow noreferrer\">IEEE-Standard</a> in <a href=\"https://stackoverflow.com/a/18958937/52598\">@piet.t's answer</a> seems to support that assumption.</p>\n\n<p><strong>Edit 2</strong> <em>(kudos to @fncomp)</em></p>\n\n<p>For completeness, one would typically use <code>(?:)</code>to avoid capturing the group. The complete regex then becomes <code>^(?:\\d{1}){2}</code> </p>\n"},{"tags":[],"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379938236,"creation_date":1379938236,"answer_id":18958930,"question_id":18958747,"body_markdown":"At first I was surprised this doesn&#39;t throw a `PatternSyntaxException`.\r\n\r\nI can&#39;t base my answer on any facts, so this is just an educated guess:\r\n\r\n    &quot;\\\\d{1}&quot;    // matches a single digit\r\n    &quot;\\\\d{1}{2}&quot; // matches a single digit followed by two empty strings\r\n\r\n\r\n","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>At first I was surprised this doesn't throw a <code>PatternSyntaxException</code>.</p>\n\n<p>I can't base my answer on any facts, so this is just an educated guess:</p>\n\n<pre><code>\"\\\\d{1}\"    // matches a single digit\n\"\\\\d{1}{2}\" // matches a single digit followed by two empty strings\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":1,"creation_date":1379939348,"post_id":18958937,"comment_id":28000079,"body_markdown":"+1, but do you know if Java officially complies with this standard?","body":"+1, but do you know if Java officially complies with this standard?"},{"owner":{"account_id":978407,"reputation":4348,"user_id":998759,"accept_rate":100,"display_name":"STT LCU"},"score":2,"creation_date":1379939595,"post_id":18958937,"comment_id":28000222,"body_markdown":"yes because the output result is valid by standard, ie: it can do anything at all.","body":"yes because the output result is valid by standard, ie: it can do anything at all."},{"owner":{"account_id":1723373,"reputation":70790,"user_id":1578604,"accept_rate":100,"display_name":"Jerry"},"score":2,"creation_date":1379941669,"post_id":18958937,"comment_id":28001445,"body_markdown":"@Dukeling I believe so as well. Notice `System.out.println(&quot;&quot;.matches(&quot;^{1}$&quot;));` returns `true` as well. My bet is that if Java cannot find a valid pattern to repeat, it will repeat `null` instead of throwing an error (which matches anywhere in a string). Also, you used a Ruby based regex tester for Java!?","body":"@Dukeling I believe so as well. Notice <code>System.out.println(&quot;&quot;.matches(&quot;^{1}$&quot;));</code> returns <code>true</code> as well. My bet is that if Java cannot find a valid pattern to repeat, it will repeat <code>null</code> instead of throwing an error (which matches anywhere in a string). Also, you used a Ruby based regex tester for Java!?"},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":3,"creation_date":1379942131,"post_id":18958937,"comment_id":28001758,"body_markdown":"@STTLCU Well, there&#39;s a difference between officially and not officially complying or not complying. Officially complying means it can be cited as a source, otherwise it&#39;s still a nice reference, but doesn&#39;t necessarily explain why Java does what it does.","body":"@STTLCU Well, there&#39;s a difference between officially and not officially complying or not complying. Officially complying means it can be cited as a source, otherwise it&#39;s still a nice reference, but doesn&#39;t necessarily explain why Java does what it does."},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":0,"creation_date":1379942432,"post_id":18958937,"comment_id":28001952,"body_markdown":"@Jerry I just used a Ruby-based regex tester as a matter of curiosity to see what other regex engines do, nothing more.","body":"@Jerry I just used a Ruby-based regex tester as a matter of curiosity to see what other regex engines do, nothing more."},{"owner":{"account_id":1723373,"reputation":70790,"user_id":1578604,"accept_rate":100,"display_name":"Jerry"},"score":0,"creation_date":1379943120,"post_id":18958937,"comment_id":28002394,"body_markdown":"@Dukeling Oh, okay, out of all the languages out there, I wouldn&#39;t have thought of testing it in Java! xD C# and Python would&#39;ve been my first try.","body":"@Dukeling Oh, okay, out of all the languages out there, I wouldn&#39;t have thought of testing it in Java! xD C# and Python would&#39;ve been my first try."},{"owner":{"account_id":1300809,"reputation":56627,"user_id":1250772,"accept_rate":45,"display_name":"Kaz"},"score":1,"creation_date":1379981810,"post_id":18958937,"comment_id":28020761,"body_markdown":"There is UB in regex because the specs, in large part, standardize what is out there, and what is out there is software implementations whose regression test suites have coverage holes. You get UB when there are cases nobody has tested, and everyone&#39;s code does something else. The spec writers come along, make a note of the situation and say things like &quot;this document does not give a requirement for such and such case&quot;.","body":"There is UB in regex because the specs, in large part, standardize what is out there, and what is out there is software implementations whose regression test suites have coverage holes. You get UB when there are cases nobody has tested, and everyone&#39;s code does something else. The spec writers come along, make a note of the situation and say things like &quot;this document does not give a requirement for such and such case&quot;."},{"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"score":0,"creation_date":1380008766,"post_id":18958937,"comment_id":28028176,"body_markdown":"@Jerry - Good point! But in your pattern, `{1}` is applied to `^`. You can confirm it using `^{0}` - the anchor is ignored: http://fiddle.re/9zhan . Still, you were right, it seems `&quot;{1}&quot;` is a valid pattern in Java.","body":"@Jerry - Good point! But in your pattern, <code>{1}</code> is applied to <code>^</code>. You can confirm it using <code>^{0}</code> - the anchor is ignored: <a href=\"http://fiddle.re/9zhan\" rel=\"nofollow noreferrer\">fiddle.re/9zhan</a> . Still, you were right, it seems <code>&quot;{1}&quot;</code> is a valid pattern in Java."},{"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"score":0,"creation_date":1380009348,"post_id":18958937,"comment_id":28028472,"body_markdown":"@Jerry Of course, `matches()` cannot work for that pattern and string. `find` and `replace` show how the pattern is parsed: as if `^{0}` wasn&#39;t there at all.","body":"@Jerry Of course, <code>matches()</code> cannot work for that pattern and string. <code>find</code> and <code>replace</code> show how the pattern is parsed: as if <code>^{0}</code> wasn&#39;t there at all."},{"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"score":0,"creation_date":1380016430,"post_id":18958937,"comment_id":28032073,"body_markdown":"@Jerry - We&#39;re probably agreeing but talking about different things... I&#39;m talking about my example: `matches(&quot;World&quot;)` would return `false` for `&quot;Hello World&quot;`, because it expect a whole match - from start to end, like `^World$`. `find(&quot;World&quot;)` does return a match. `find(&quot;^{0}World&quot;)` also returns a match, showing that `{0}` works on `^`.","body":"@Jerry - We&#39;re probably agreeing but talking about different things... I&#39;m talking about my example: <code>matches(&quot;World&quot;)</code> would return <code>false</code> for <code>&quot;Hello World&quot;</code>, because it expect a whole match - from start to end, like <code>^World$</code>. <code>find(&quot;World&quot;)</code> does return a match. <code>find(&quot;^{0}World&quot;)</code> also returns a match, showing that <code>{0}</code> works on <code>^</code>."},{"owner":{"account_id":1723373,"reputation":70790,"user_id":1578604,"accept_rate":100,"display_name":"Jerry"},"score":0,"creation_date":1380017754,"post_id":18958937,"comment_id":28032958,"body_markdown":"@Kobi Oops, sorry, I think I was going astray there xD Thanks!","body":"@Kobi Oops, sorry, I think I was going astray there xD Thanks!"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":3,"creation_date":1429611493,"post_id":18958937,"comment_id":47669242,"body_markdown":"I&#39;m quite sure this standard is for POSIX BRE and ERE, and it has **nothing** to do with Java regex. Java doesn&#39;t even claim to support ERE or BRE! If anything, Unicode Regular Expression http://unicode.org/reports/tr18/ should be cited here.","body":"I&#39;m quite sure this standard is for POSIX BRE and ERE, and it has <b>nothing</b> to do with Java regex. Java doesn&#39;t even claim to support ERE or BRE! If anything, Unicode Regular Expression <a href=\"http://unicode.org/reports/tr18/\" rel=\"nofollow noreferrer\">unicode.org/reports/tr18</a> should be cited here."}],"tags":[],"owner":{"account_id":3150862,"reputation":11755,"user_id":2664350,"display_name":"piet.t"},"comment_count":12,"down_vote_count":4,"up_vote_count":112,"is_accepted":false,"score":108,"last_activity_date":1379938256,"creation_date":1379938256,"answer_id":18958937,"question_id":18958747,"body_markdown":"[IEEE-Standard 1003.1][1] says:\r\n\r\n&gt; The behavior of multiple adjacent duplication symbols ( &#39;*&#39; and intervals) produces undefined results.\r\n\r\nSo every implementation can do as it pleases, just don&#39;t rely on anything specific...\r\n\r\n\r\n  [1]: http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html\">IEEE-Standard 1003.1</a> says:</p>\n\n<blockquote>\n  <p>The behavior of multiple adjacent duplication symbols ( '*' and intervals) produces undefined results.</p>\n</blockquote>\n\n<p>So every implementation can do as it pleases, just don't rely on anything specific...</p>\n"},{"tags":[],"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379938342,"creation_date":1379938342,"answer_id":18958960,"question_id":18958747,"body_markdown":"I have never seen the `{m}{n}` syntax anywhere. It seems that the regex engine on this Rubular page applies the `{2}` quantifier to the smallest possible token before that - which is `\\\\d{1}`. To mimick this in Java (or most other regex engines, it would seem), you need to group the `\\\\d{1}` like so:\r\n\r\n    ^(\\\\d{1}){2}$\r\n\r\nSee it [in action here][1].\r\n\r\n\r\n  [1]: http://regex101.com/r/zW2xX5","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>I have never seen the <code>{m}{n}</code> syntax anywhere. It seems that the regex engine on this Rubular page applies the <code>{2}</code> quantifier to the smallest possible token before that - which is <code>\\\\d{1}</code>. To mimick this in Java (or most other regex engines, it would seem), you need to group the <code>\\\\d{1}</code> like so:</p>\n\n<pre><code>^(\\\\d{1}){2}$\n</code></pre>\n\n<p>See it <a href=\"http://regex101.com/r/zW2xX5\" rel=\"nofollow\">in action here</a>.</p>\n"},{"comments":[{"owner":{"account_id":1356059,"reputation":1246,"user_id":1294423,"accept_rate":100,"display_name":"Gavin S. Yancey"},"score":0,"creation_date":1645574581,"post_id":18975475,"comment_id":125907001,"body_markdown":"Seems like a Java bug that it doesn&#39;t throw an exception when compiling the pattern.","body":"Seems like a Java bug that it doesn&#39;t throw an exception when compiling the pattern."}],"tags":[],"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1404329766,"creation_date":1380007778,"answer_id":18975475,"question_id":18958747,"body_markdown":"Scientific approach:  \r\n&lt;sup&gt;click on the patterns to see the example on regexplanet.com, and **click on the green Java button**.&lt;/sup&gt;\r\n\r\n* You&#39;ve already showed [`\\d{1}{2}`](http://fiddle.re/9jvju) matches `&quot;1&quot;`, and doesn&#39;t match `&quot;12&quot;`, so we *know* it isn&#39;t interpreted as `(?:\\d{1}){2}`.\r\n* Still, 1 is a boring number, and `{1}` *might* be optimized away, lets try something more interesting:  \r\n[`\\d{2}{3}`](http://fiddle.re/xf0b0). This still only matches two characters (not six), `{3}` is ignored.\r\n* Ok. There&#39;s an easy way to see what a regex engine does. Does it capture?  \r\nLets try [`(\\d{1})({2})`](http://fiddle.re/b9kup). Oddly, this works. The second group, `$2`, captures the empty string.\r\n* So why do we need the first group? How about [`({1})`](http://fiddle.re/75dnn)? Still works.\r\n* And just [`{1}`](http://fiddle.re/x5man)? No problem there.   \r\n  It looks like Java is being a little weird here.\r\n* Great! So `{1}` is valid. We know [Java expands `*` and `+` to `{0,0x7FFFFFFF}` and `{1,0x7FFFFFFF}`](https://stackoverflow.com/a/1537370/7586), so will `*` or `+` work? No:\r\n\r\n &gt; Dangling meta character &#39;+&#39; near index 0  \r\n &gt; \\+  \r\n &gt; ^\r\n\r\n The validation must come before `*` and `+` are expanded.\r\n \r\nI didn&#39;t find anything in the spec that explains that, it *looks* like a quantifier must come at least after a character, brackets, or parentheses.\r\n\r\nMost of these patterns are considered invalid by other regex flavors, and for a good reason - they do not make sense.  ","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>Scientific approach:<br>\n<sup>click on the patterns to see the example on regexplanet.com, and <strong>click on the green Java button</strong>.</sup></p>\n\n<ul>\n<li>You've already showed <a href=\"http://fiddle.re/9jvju\" rel=\"nofollow noreferrer\"><code>\\d{1}{2}</code></a> matches <code>\"1\"</code>, and doesn't match <code>\"12\"</code>, so we <em>know</em> it isn't interpreted as <code>(?:\\d{1}){2}</code>.</li>\n<li>Still, 1 is a boring number, and <code>{1}</code> <em>might</em> be optimized away, lets try something more interesting:<br>\n<a href=\"http://fiddle.re/xf0b0\" rel=\"nofollow noreferrer\"><code>\\d{2}{3}</code></a>. This still only matches two characters (not six), <code>{3}</code> is ignored.</li>\n<li>Ok. There's an easy way to see what a regex engine does. Does it capture?<br>\nLets try <a href=\"http://fiddle.re/b9kup\" rel=\"nofollow noreferrer\"><code>(\\d{1})({2})</code></a>. Oddly, this works. The second group, <code>$2</code>, captures the empty string.</li>\n<li>So why do we need the first group? How about <a href=\"http://fiddle.re/75dnn\" rel=\"nofollow noreferrer\"><code>({1})</code></a>? Still works.</li>\n<li>And just <a href=\"http://fiddle.re/x5man\" rel=\"nofollow noreferrer\"><code>{1}</code></a>? No problem there.<br>\nIt looks like Java is being a little weird here.</li>\n<li><p>Great! So <code>{1}</code> is valid. We know <a href=\"https://stackoverflow.com/a/1537370/7586\">Java expands <code>*</code> and <code>+</code> to <code>{0,0x7FFFFFFF}</code> and <code>{1,0x7FFFFFFF}</code></a>, so will <code>*</code> or <code>+</code> work? No:</p>\n\n<blockquote>\n  <p>Dangling meta character '+' near index 0<br>\n  +<br>\n  ^</p>\n</blockquote>\n\n<p>The validation must come before <code>*</code> and <code>+</code> are expanded.</p></li>\n</ul>\n\n<p>I didn't find anything in the spec that explains that, it <em>looks</em> like a quantifier must come at least after a character, brackets, or parentheses.</p>\n\n<p>Most of these patterns are considered invalid by other regex flavors, and for a good reason - they do not make sense.  </p>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429619062,"creation_date":1429615286,"answer_id":29770754,"question_id":18958747,"body_markdown":"## Compiled structure of the regex\r\n\r\n[Kobi&#39;s answer](https://stackoverflow.com/a/18975475) is spot on about the behavior of Java regex (Sun/Oracle implementation) for the case `&quot;^\\\\d{1}{2}$&quot;`, or `&quot;{1}&quot;`.\r\n\r\nBelow is the internal compiled structure of `&quot;^\\\\d{1}{2}$&quot;`:\r\n\r\n    ^\\d{1}{2}$\r\n    Begin. \\A or default ^\r\n    Curly. Greedy quantifier {1,1}\r\n      Ctype. POSIX (US-ASCII): DIGIT\r\n      Node. Accept match\r\n    Curly. Greedy quantifier {2,2}\r\n      Slice. (length=0)\r\n        \r\n      Node. Accept match\r\n    Dollar(multiline=false). \\Z or default $\r\n    java.util.regex.Pattern$LastNode\r\n    Node. Accept match\r\n\r\n\r\n## Looking at the source code\r\n\r\n**From my investigation, the bug is probably due to that fact that `{` is not properly checked in the private method `sequence()`.**\r\n\r\nThe method `sequence()` calls to the `atom()` to parse the atom, then attach quantifier to the atom by calling `closure()`, and chains all atoms-with-closure together into one sequence.\r\n\r\nFor example, given this regex:\r\n\r\n    ^\\d{4}a(bc|gh)+d*$\r\n\r\nThen the top-level call to `sequence()` will receive the compiled nodes for `^`, `\\d{4}`, `a`, `(bc|gh)+`, `d*`, `$` and chain them together.\r\n\r\nWith that idea in mind, let us look at the source code of `sequence()`, copied from [OpenJDK 8-b132](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/regex/Pattern.java#Pattern.sequence%28java.util.regex.Pattern.Node%29) (Oracle uses the same code base):\r\n\r\n    @SuppressWarnings(&quot;fallthrough&quot;)\r\n    /**\r\n     * Parsing of sequences between alternations.\r\n     */\r\n    private Node sequence(Node end) {\r\n        Node head = null;\r\n        Node tail = null;\r\n        Node node = null;\r\n    LOOP:\r\n        for (;;) {\r\n            int ch = peek();\r\n            switch (ch) {\r\n            case &#39;(&#39;:\r\n                // Because group handles its own closure,\r\n                // we need to treat it differently\r\n                node = group0();\r\n                // Check for comment or flag group\r\n                if (node == null)\r\n                    continue;\r\n                if (head == null)\r\n                    head = node;\r\n                else\r\n                    tail.next = node;\r\n                // Double return: Tail was returned in root\r\n                tail = root;\r\n                continue;\r\n            case &#39;[&#39;:\r\n                node = clazz(true);\r\n                break;\r\n            case &#39;\\\\&#39;:\r\n                ch = nextEscaped();\r\n                if (ch == &#39;p&#39; || ch == &#39;P&#39;) {\r\n                    boolean oneLetter = true;\r\n                    boolean comp = (ch == &#39;P&#39;);\r\n                    ch = next(); // Consume { if present\r\n                    if (ch != &#39;{&#39;) {\r\n                        unread();\r\n                    } else {\r\n                        oneLetter = false;\r\n                    }\r\n                    node = family(oneLetter, comp);\r\n                } else {\r\n                    unread();\r\n                    node = atom();\r\n                }\r\n                break;\r\n            case &#39;^&#39;:\r\n                next();\r\n                if (has(MULTILINE)) {\r\n                    if (has(UNIX_LINES))\r\n                        node = new UnixCaret();\r\n                    else\r\n                        node = new Caret();\r\n                } else {\r\n                    node = new Begin();\r\n                }\r\n                break;\r\n            case &#39;$&#39;:\r\n                next();\r\n                if (has(UNIX_LINES))\r\n                    node = new UnixDollar(has(MULTILINE));\r\n                else\r\n                    node = new Dollar(has(MULTILINE));\r\n                break;\r\n            case &#39;.&#39;:\r\n                next();\r\n                if (has(DOTALL)) {\r\n                    node = new All();\r\n                } else {\r\n                    if (has(UNIX_LINES))\r\n                        node = new UnixDot();\r\n                    else {\r\n                        node = new Dot();\r\n                    }\r\n                }\r\n                break;\r\n            case &#39;|&#39;:\r\n            case &#39;)&#39;:\r\n                break LOOP;\r\n            case &#39;]&#39;: // Now interpreting dangling ] and } as literals\r\n            case &#39;}&#39;:\r\n                node = atom();\r\n                break;\r\n            case &#39;?&#39;:\r\n            case &#39;*&#39;:\r\n            case &#39;+&#39;:\r\n                next();\r\n                throw error(&quot;Dangling meta character &#39;&quot; + ((char)ch) + &quot;&#39;&quot;);\r\n            case 0:\r\n                if (cursor &gt;= patternLength) {\r\n                    break LOOP;\r\n                }\r\n                // Fall through\r\n            default:\r\n                node = atom();\r\n                break;\r\n            }\r\n\r\n            node = closure(node);\r\n\r\n            if (head == null) {\r\n                head = tail = node;\r\n            } else {\r\n                tail.next = node;\r\n                tail = node;\r\n            }\r\n        }\r\n        if (head == null) {\r\n            return end;\r\n        }\r\n        tail.next = end;\r\n        root = tail;      //double return\r\n        return head;\r\n    }\r\n\r\nTake note of the line `throw error(&quot;Dangling meta character &#39;&quot; + ((char)ch) + &quot;&#39;&quot;);`. This is where the error is thrown if `+`, `*`, `?` are dangling and is not part of a preceding token. As you can see, `{` is not among the cases to throw error. In fact, it is not present in the list of cases in `sequence()`, and the compilation process will go by `default` case directly to `atom()`.\r\n\r\n    @SuppressWarnings(&quot;fallthrough&quot;)\r\n    /**\r\n     * Parse and add a new Single or Slice.\r\n     */\r\n    private Node atom() {\r\n        int first = 0;\r\n        int prev = -1;\r\n        boolean hasSupplementary = false;\r\n        int ch = peek();\r\n        for (;;) {\r\n            switch (ch) {\r\n            case &#39;*&#39;:\r\n            case &#39;+&#39;:\r\n            case &#39;?&#39;:\r\n            case &#39;{&#39;:\r\n                if (first &gt; 1) {\r\n                    cursor = prev;    // Unwind one character\r\n                    first--;\r\n                }\r\n                break;\r\n            // Irrelevant cases omitted\r\n            // [...]\r\n            }\r\n            break;\r\n        }\r\n        if (first == 1) {\r\n            return newSingle(buffer[0]);\r\n        } else {\r\n            return newSlice(buffer, first, hasSupplementary);\r\n        }\r\n    }\r\n\r\nWhen the process enters `atom()`, since it encounters `{` right away, it breaks from `switch` and `for` loop, and **a new slice with length 0** is created (the length comes from `first`, which is 0).\r\n\r\nWhen this slice is returned, the quantifier is parsed by `closure()`, resulting in what we see.\r\n\r\n**Comparing the source code of Java 1.4.0, Java 5 and Java 8, there doesn&#39;t seem to be much changes in the source code of `sequence()` and `atom()`. It seems this bug has been there since the beginning.**\r\n\r\n## Standard for regular expression\r\n\r\nThe [top-voted answer](https://stackoverflow.com/a/18958937) citing [IEEE-Standard 1003.1](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html) (or POSIX standard) is irrelevant to the discussion, since Java **does not implement** BRE and ERE.\r\n\r\nThere are many syntax resulting in undefined behavior according to the standard, but is well-defined behavior across many other regex flavors (though whether they agree or not is another matter). For example, `\\d` is undefined according to the standard, but it matches digits (ASCII/Unicode) in many regex flavors.\r\n\r\nSadly, there is no other standard on regular expression syntax.\r\n\r\nThere is, however, a standard on Unicode Regular Expression, which focuses on features a Unicode regex engine should have. Java `Pattern` class more or less implements Level 1 support as described in [UTS #18: Unicode Regular Expression](http://www.unicode.org/reports/tr18/) and RL2.1 (albeit extremely buggy).","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<h2>Compiled structure of the regex</h2>\n\n<p><a href=\"https://stackoverflow.com/a/18975475\">Kobi's answer</a> is spot on about the behavior of Java regex (Sun/Oracle implementation) for the case <code>\"^\\\\d{1}{2}$\"</code>, or <code>\"{1}\"</code>.</p>\n\n<p>Below is the internal compiled structure of <code>\"^\\\\d{1}{2}$\"</code>:</p>\n\n<pre><code>^\\d{1}{2}$\nBegin. \\A or default ^\nCurly. Greedy quantifier {1,1}\n  Ctype. POSIX (US-ASCII): DIGIT\n  Node. Accept match\nCurly. Greedy quantifier {2,2}\n  Slice. (length=0)\n\n  Node. Accept match\nDollar(multiline=false). \\Z or default $\njava.util.regex.Pattern$LastNode\nNode. Accept match\n</code></pre>\n\n<h2>Looking at the source code</h2>\n\n<p><strong>From my investigation, the bug is probably due to that fact that <code>{</code> is not properly checked in the private method <code>sequence()</code>.</strong></p>\n\n<p>The method <code>sequence()</code> calls to the <code>atom()</code> to parse the atom, then attach quantifier to the atom by calling <code>closure()</code>, and chains all atoms-with-closure together into one sequence.</p>\n\n<p>For example, given this regex:</p>\n\n<pre><code>^\\d{4}a(bc|gh)+d*$\n</code></pre>\n\n<p>Then the top-level call to <code>sequence()</code> will receive the compiled nodes for <code>^</code>, <code>\\d{4}</code>, <code>a</code>, <code>(bc|gh)+</code>, <code>d*</code>, <code>$</code> and chain them together.</p>\n\n<p>With that idea in mind, let us look at the source code of <code>sequence()</code>, copied from <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/regex/Pattern.java#Pattern.sequence%28java.util.regex.Pattern.Node%29\" rel=\"nofollow noreferrer\">OpenJDK 8-b132</a> (Oracle uses the same code base):</p>\n\n<pre><code>@SuppressWarnings(\"fallthrough\")\n/**\n * Parsing of sequences between alternations.\n */\nprivate Node sequence(Node end) {\n    Node head = null;\n    Node tail = null;\n    Node node = null;\nLOOP:\n    for (;;) {\n        int ch = peek();\n        switch (ch) {\n        case '(':\n            // Because group handles its own closure,\n            // we need to treat it differently\n            node = group0();\n            // Check for comment or flag group\n            if (node == null)\n                continue;\n            if (head == null)\n                head = node;\n            else\n                tail.next = node;\n            // Double return: Tail was returned in root\n            tail = root;\n            continue;\n        case '[':\n            node = clazz(true);\n            break;\n        case '\\\\':\n            ch = nextEscaped();\n            if (ch == 'p' || ch == 'P') {\n                boolean oneLetter = true;\n                boolean comp = (ch == 'P');\n                ch = next(); // Consume { if present\n                if (ch != '{') {\n                    unread();\n                } else {\n                    oneLetter = false;\n                }\n                node = family(oneLetter, comp);\n            } else {\n                unread();\n                node = atom();\n            }\n            break;\n        case '^':\n            next();\n            if (has(MULTILINE)) {\n                if (has(UNIX_LINES))\n                    node = new UnixCaret();\n                else\n                    node = new Caret();\n            } else {\n                node = new Begin();\n            }\n            break;\n        case '$':\n            next();\n            if (has(UNIX_LINES))\n                node = new UnixDollar(has(MULTILINE));\n            else\n                node = new Dollar(has(MULTILINE));\n            break;\n        case '.':\n            next();\n            if (has(DOTALL)) {\n                node = new All();\n            } else {\n                if (has(UNIX_LINES))\n                    node = new UnixDot();\n                else {\n                    node = new Dot();\n                }\n            }\n            break;\n        case '|':\n        case ')':\n            break LOOP;\n        case ']': // Now interpreting dangling ] and } as literals\n        case '}':\n            node = atom();\n            break;\n        case '?':\n        case '*':\n        case '+':\n            next();\n            throw error(\"Dangling meta character '\" + ((char)ch) + \"'\");\n        case 0:\n            if (cursor &gt;= patternLength) {\n                break LOOP;\n            }\n            // Fall through\n        default:\n            node = atom();\n            break;\n        }\n\n        node = closure(node);\n\n        if (head == null) {\n            head = tail = node;\n        } else {\n            tail.next = node;\n            tail = node;\n        }\n    }\n    if (head == null) {\n        return end;\n    }\n    tail.next = end;\n    root = tail;      //double return\n    return head;\n}\n</code></pre>\n\n<p>Take note of the line <code>throw error(\"Dangling meta character '\" + ((char)ch) + \"'\");</code>. This is where the error is thrown if <code>+</code>, <code>*</code>, <code>?</code> are dangling and is not part of a preceding token. As you can see, <code>{</code> is not among the cases to throw error. In fact, it is not present in the list of cases in <code>sequence()</code>, and the compilation process will go by <code>default</code> case directly to <code>atom()</code>.</p>\n\n<pre><code>@SuppressWarnings(\"fallthrough\")\n/**\n * Parse and add a new Single or Slice.\n */\nprivate Node atom() {\n    int first = 0;\n    int prev = -1;\n    boolean hasSupplementary = false;\n    int ch = peek();\n    for (;;) {\n        switch (ch) {\n        case '*':\n        case '+':\n        case '?':\n        case '{':\n            if (first &gt; 1) {\n                cursor = prev;    // Unwind one character\n                first--;\n            }\n            break;\n        // Irrelevant cases omitted\n        // [...]\n        }\n        break;\n    }\n    if (first == 1) {\n        return newSingle(buffer[0]);\n    } else {\n        return newSlice(buffer, first, hasSupplementary);\n    }\n}\n</code></pre>\n\n<p>When the process enters <code>atom()</code>, since it encounters <code>{</code> right away, it breaks from <code>switch</code> and <code>for</code> loop, and <strong>a new slice with length 0</strong> is created (the length comes from <code>first</code>, which is 0).</p>\n\n<p>When this slice is returned, the quantifier is parsed by <code>closure()</code>, resulting in what we see.</p>\n\n<p><strong>Comparing the source code of Java 1.4.0, Java 5 and Java 8, there doesn't seem to be much changes in the source code of <code>sequence()</code> and <code>atom()</code>. It seems this bug has been there since the beginning.</strong></p>\n\n<h2>Standard for regular expression</h2>\n\n<p>The <a href=\"https://stackoverflow.com/a/18958937\">top-voted answer</a> citing <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html\" rel=\"nofollow noreferrer\">IEEE-Standard 1003.1</a> (or POSIX standard) is irrelevant to the discussion, since Java <strong>does not implement</strong> BRE and ERE.</p>\n\n<p>There are many syntax resulting in undefined behavior according to the standard, but is well-defined behavior across many other regex flavors (though whether they agree or not is another matter). For example, <code>\\d</code> is undefined according to the standard, but it matches digits (ASCII/Unicode) in many regex flavors.</p>\n\n<p>Sadly, there is no other standard on regular expression syntax.</p>\n\n<p>There is, however, a standard on Unicode Regular Expression, which focuses on features a Unicode regex engine should have. Java <code>Pattern</code> class more or less implements Level 1 support as described in <a href=\"http://www.unicode.org/reports/tr18/\" rel=\"nofollow noreferrer\">UTS #18: Unicode Regular Expression</a> and RL2.1 (albeit extremely buggy).</p>\n"}],"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3640,"favorite_count":0,"down_vote_count":1,"up_vote_count":79,"accepted_answer_id":18958894,"answer_count":7,"score":78,"last_activity_date":1683032265,"creation_date":1379937711,"question_id":18958747,"body_markdown":"So, some way or another (playing around), I found myself with a regex like `\\d{1}{2}`.\r\n\r\nLogically, to me, it should mean:\r\n\r\n&gt;(A digit exactly once) exactly twice, i.e. a digit exactly twice.\r\n\r\nBut it, in fact, appears to just mean &quot;a digit exactly once&quot; (thus ignoring the `{2}`).\r\n\r\n    String regex = &quot;^\\\\d{1}{2}$&quot;; // ^$ to make those not familiar with &#39;matches&#39; happy\r\n    System.out.println(&quot;1&quot;.matches(regex)); // true\r\n    System.out.println(&quot;12&quot;.matches(regex)); // false\r\n\r\nSimilar results can be seen using `{n}{m,n}` or similar.\r\n\r\nWhy does this happen? Is it explicitly stated in regex / Java documentation somewhere or is it just a decision Java developers made on-the-fly or is it maybe a bug?\r\n\r\nOr is it in fact not ignored and it actually means something else entirely?\r\n\r\nNot that it matters much, but it&#39;s not across-the-board regex behaviour, [Rubular](http://www.rubular.com/r/eefKxje4nf) does what I expect.\r\n\r\nNote - the title is mainly for searchability for users who want to know how it works (not why).","title":"How does {m}{n} (&quot;exactly n times&quot; twice) work?","body":"<p>So, some way or another (playing around), I found myself with a regex like <code>\\d{1}{2}</code>.</p>\n\n<p>Logically, to me, it should mean:</p>\n\n<blockquote>\n  <p>(A digit exactly once) exactly twice, i.e. a digit exactly twice.</p>\n</blockquote>\n\n<p>But it, in fact, appears to just mean \"a digit exactly once\" (thus ignoring the <code>{2}</code>).</p>\n\n<pre><code>String regex = \"^\\\\d{1}{2}$\"; // ^$ to make those not familiar with 'matches' happy\nSystem.out.println(\"1\".matches(regex)); // true\nSystem.out.println(\"12\".matches(regex)); // false\n</code></pre>\n\n<p>Similar results can be seen using <code>{n}{m,n}</code> or similar.</p>\n\n<p>Why does this happen? Is it explicitly stated in regex / Java documentation somewhere or is it just a decision Java developers made on-the-fly or is it maybe a bug?</p>\n\n<p>Or is it in fact not ignored and it actually means something else entirely?</p>\n\n<p>Not that it matters much, but it's not across-the-board regex behaviour, <a href=\"http://www.rubular.com/r/eefKxje4nf\">Rubular</a> does what I expect.</p>\n\n<p>Note - the title is mainly for searchability for users who want to know how it works (not why).</p>\n"},{"tags":["java","spring-boot","api"],"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1683014528,"post_id":76152647,"comment_id":134298059,"body_markdown":"What does the requested URL look like in your Postman request?","body":"What does the requested URL look like in your Postman request?"},{"owner":{"account_id":21033065,"reputation":1,"user_id":16477289,"display_name":"Aadhil "},"score":0,"creation_date":1683015023,"post_id":76152647,"comment_id":134298157,"body_markdown":"looks like this .    http://localhost:8080/api/postService/getPost","body":"looks like this .    <a href=\"http://localhost:8080/api/postService/getPost\" rel=\"nofollow noreferrer\">localhost:8080/api/postService/getPost</a>"}],"owner":{"account_id":21033065,"reputation":1,"user_id":16477289,"display_name":"Aadhil "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683032249,"creation_date":1683012852,"question_id":76152647,"body_markdown":"I was trying to connect to Postman, but I received an error message that says &quot;error: Not Found, path: /api/postService/getPost&quot;. Apache Cassandra is also running perfectly, and I have created a keyspace too.Here is my controller class . can anyone find me the solution?\r\n\r\n```\r\npackage com.example.foodapiController;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.UUID;\r\n\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.example.foodapiEntity.Post;\r\nimport com.example.foodapiPostService.*;\r\n\r\n@CrossOrigin\r\n@RestController\r\n@RequestMapping(&quot;/api/postService&quot;)\r\npublic class PostController {\r\n\t\r\n\t@Autowired\r\n\tPostService postService;\r\n\r\n\t@PostMapping(&quot;/save&quot;)\r\n\tpublic ArrayList&lt;Post&gt; submitPost(@RequestBody Post body){\r\n\t\tArrayList&lt;Post&gt; result=postService.submitPostToDB(body);\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/getPost&quot;)\r\n\tpublic ArrayList&lt;Post&gt; retrieveAllPost(){\r\n\t\tArrayList&lt;Post&gt; result=postService.retrivePostFromDB();\r\n\t\tresult.sort((e1, e2) -&gt; e2.getDateTime().compareTo(e1.getDateTime()));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t@DeleteMapping(&quot;/delete/{postId}&quot;)\r\n\tpublic ArrayList&lt;Post&gt; deleteParticularPost(@PathVariable(&quot;postId&quot;) UUID postID){\r\n\t\tArrayList&lt;Post&gt; result=postService.deletePostFromDB(postID);\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t\r\n}\r\n```","title":"Postman output &quot;&quot;error&quot;: &quot;Not Found&quot;, &quot;path&quot;: &quot;/api/postService/getPost&quot;","body":"<p>I was trying to connect to Postman, but I received an error message that says &quot;error: Not Found, path: /api/postService/getPost&quot;. Apache Cassandra is also running perfectly, and I have created a keyspace too.Here is my controller class . can anyone find me the solution?</p>\n<pre><code>package com.example.foodapiController;\n\nimport java.util.ArrayList;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.UUID;\n\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.example.foodapiEntity.Post;\nimport com.example.foodapiPostService.*;\n\n@CrossOrigin\n@RestController\n@RequestMapping(&quot;/api/postService&quot;)\npublic class PostController {\n    \n    @Autowired\n    PostService postService;\n\n    @PostMapping(&quot;/save&quot;)\n    public ArrayList&lt;Post&gt; submitPost(@RequestBody Post body){\n        ArrayList&lt;Post&gt; result=postService.submitPostToDB(body);\n        return result;\n    }\n    \n    @GetMapping(&quot;/getPost&quot;)\n    public ArrayList&lt;Post&gt; retrieveAllPost(){\n        ArrayList&lt;Post&gt; result=postService.retrivePostFromDB();\n        result.sort((e1, e2) -&gt; e2.getDateTime().compareTo(e1.getDateTime()));\n        return result;\n    }\n    \n    @DeleteMapping(&quot;/delete/{postId}&quot;)\n    public ArrayList&lt;Post&gt; deleteParticularPost(@PathVariable(&quot;postId&quot;) UUID postID){\n        ArrayList&lt;Post&gt; result=postService.deletePostFromDB(postID);\n        return result;\n    }\n    \n    \n}\n</code></pre>\n"},{"tags":["java","spring","amazon-web-services","docker"],"comments":[{"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"score":0,"creation_date":1683120318,"post_id":76154028,"comment_id":134317642,"body_markdown":"Perhaps you&#39;re looking for CloudFormation or using the AWS CDK?","body":"Perhaps you&#39;re looking for CloudFormation or using the AWS CDK?"}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683032091,"creation_date":1683032091,"answer_id":76155074,"question_id":76154028,"body_markdown":"One solution is to use [Amazon ECS][1]. That is, create a Docker image from your Spring Boot project. Then, you can deploy your Docker image to Docker Hub, which is a hosted repository service. Finally, configure AWS Fargate to import the Docker image located on Docker Hub into a container, as shown in the following illustration.\r\n\r\n[![enter image description here][2]][2] \r\n\r\nHere is step by step for this [use case][3]. \r\n\r\n\r\n  [1]: https://aws.amazon.com/ecs/\r\n  [2]: https://i.stack.imgur.com/o46dx.png\r\n  [3]: https://scottscloudcommunity.blogspot.com/2022/10/deploying-java-web-application-to.html","title":"How to deploy Spring application with several services launching by Docker in AWS?","body":"<p>One solution is to use <a href=\"https://aws.amazon.com/ecs/\" rel=\"nofollow noreferrer\">Amazon ECS</a>. That is, create a Docker image from your Spring Boot project. Then, you can deploy your Docker image to Docker Hub, which is a hosted repository service. Finally, configure AWS Fargate to import the Docker image located on Docker Hub into a container, as shown in the following illustration.</p>\n<p><a href=\"https://i.stack.imgur.com/o46dx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o46dx.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is step by step for this <a href=\"https://scottscloudcommunity.blogspot.com/2022/10/deploying-java-web-application-to.html\" rel=\"nofollow noreferrer\">use case</a>.</p>\n"}],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683120329,"answer_count":1,"score":0,"last_activity_date":1683032091,"creation_date":1683023978,"question_id":76154028,"body_markdown":"I created simple Spring Boot app that depends on several services launching in Docker (Cashe, MessageBroker, Database ...). In future I want to add some other services, my custom or from Docker images. How can I deploy this stack of services in AWS?\r\nIn tutorials there are only examples of connecting to RDS.","title":"How to deploy Spring application with several services launching by Docker in AWS?","body":"<p>I created simple Spring Boot app that depends on several services launching in Docker (Cashe, MessageBroker, Database ...). In future I want to add some other services, my custom or from Docker images. How can I deploy this stack of services in AWS?\nIn tutorials there are only examples of connecting to RDS.</p>\n"},{"tags":["java","mysql","hibernate"],"owner":{"account_id":7167700,"reputation":23,"user_id":5476291,"display_name":"alipali737"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683031930,"creation_date":1683028347,"question_id":76154554,"body_markdown":"I am trying to create a Unidirectional foreign key mapping between two classes in hibernate.\r\n\r\nI wish to have the `InventoryItem` object contain a reference to a `Car` object using a foreign key.\r\n\r\nFor simplicity these are how the classes are setup:\r\n\r\n```\r\npublic class InventoryItem {\r\n    private Long id;\r\n    private Car vehicle;\r\n```\r\n\r\n```\r\npublic class Car {\r\n    private Long id;\r\n```\r\n\r\nI have the following xml files setup:\r\n```\r\n&lt;hibernate-mapping&gt;\r\n    &lt;class name = &quot;com.leasecompany.carleasingsystem.database.data.inventoryItem.InventoryItem&quot; table = &quot;inventory_items&quot;&gt;\r\n        &lt;id name = &quot;id&quot; column=&quot;id&quot; type=&quot;long&quot;&gt;\r\n            &lt;generator class=&quot;identity&quot; /&gt;\r\n        &lt;/id&gt;\r\n        &lt;one-to-one name=&quot;vehicle&quot; class=&quot;com.leasecompany.carleasingsystem.database.data.car.Car&quot; constrained=&quot;true&quot; lazy=&quot;false&quot; cascade=&quot;all&quot;/&gt;\r\n    &lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\n```\r\n&lt;hibernate-mapping&gt;\r\n    &lt;class name = &quot;com.leasecompany.carleasingsystem.database.data.car.Car&quot; table = &quot;cars&quot;&gt;\r\n        &lt;id name = &quot;id&quot; column=&quot;id&quot; type=&quot;long&quot;&gt;\r\n            &lt;generator class=&quot;identity&quot; /&gt;\r\n        &lt;/id&gt;\r\n    &lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\nIt seems to have created some kind of link but it appears to be using the wrong column as the foreign key value as I am getting:\r\n\r\n`No row with the given identifier exists: [com.leasecompany.carleasingsystem.database.data.car.Car#1]`\r\n\r\nIt seems to be trying to find a Car with ID 1 instead of the value in vehicle_id (which is 199)\r\n\r\nSample Car Record:\r\n- id = 199\r\n\r\nSample InventoryItem Record:\r\n- id = 1\r\n- vehicle_id = 199\r\n\r\nI can get it to work if I use a `&lt;many-to-one&gt;` with the `column` attribute set.\r\n\r\nEdit:\r\n- doing some research shows that somehow I can use the formula section of a `&lt;one-to-one&gt;` to use a different column ","title":"Mapping unidirectional foreign keys in hibernate xml","body":"<p>I am trying to create a Unidirectional foreign key mapping between two classes in hibernate.</p>\n<p>I wish to have the <code>InventoryItem</code> object contain a reference to a <code>Car</code> object using a foreign key.</p>\n<p>For simplicity these are how the classes are setup:</p>\n<pre><code>public class InventoryItem {\n    private Long id;\n    private Car vehicle;\n</code></pre>\n<pre><code>public class Car {\n    private Long id;\n</code></pre>\n<p>I have the following xml files setup:</p>\n<pre><code>&lt;hibernate-mapping&gt;\n    &lt;class name = &quot;com.leasecompany.carleasingsystem.database.data.inventoryItem.InventoryItem&quot; table = &quot;inventory_items&quot;&gt;\n        &lt;id name = &quot;id&quot; column=&quot;id&quot; type=&quot;long&quot;&gt;\n            &lt;generator class=&quot;identity&quot; /&gt;\n        &lt;/id&gt;\n        &lt;one-to-one name=&quot;vehicle&quot; class=&quot;com.leasecompany.carleasingsystem.database.data.car.Car&quot; constrained=&quot;true&quot; lazy=&quot;false&quot; cascade=&quot;all&quot;/&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<pre><code>&lt;hibernate-mapping&gt;\n    &lt;class name = &quot;com.leasecompany.carleasingsystem.database.data.car.Car&quot; table = &quot;cars&quot;&gt;\n        &lt;id name = &quot;id&quot; column=&quot;id&quot; type=&quot;long&quot;&gt;\n            &lt;generator class=&quot;identity&quot; /&gt;\n        &lt;/id&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>It seems to have created some kind of link but it appears to be using the wrong column as the foreign key value as I am getting:</p>\n<p><code>No row with the given identifier exists: [com.leasecompany.carleasingsystem.database.data.car.Car#1]</code></p>\n<p>It seems to be trying to find a Car with ID 1 instead of the value in vehicle_id (which is 199)</p>\n<p>Sample Car Record:</p>\n<ul>\n<li>id = 199</li>\n</ul>\n<p>Sample InventoryItem Record:</p>\n<ul>\n<li>id = 1</li>\n<li>vehicle_id = 199</li>\n</ul>\n<p>I can get it to work if I use a <code>&lt;many-to-one&gt;</code> with the <code>column</code> attribute set.</p>\n<p>Edit:</p>\n<ul>\n<li>doing some research shows that somehow I can use the formula section of a <code>&lt;one-to-one&gt;</code> to use a different column</li>\n</ul>\n"},{"tags":["java","maven","maven-surefire-plugin","tagging"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681904516,"post_id":76052998,"comment_id":134131363,"body_markdown":"Hello, Does mvn command run the tests if you don&#39;t use the tags at all?","body":"Hello, Does mvn command run the tests if you don&#39;t use the tags at all?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1681907940,"post_id":76052998,"comment_id":134132294,"body_markdown":"The naming convention for surefireplugin is that unit tests are named like `*Test.java` which integration tests are executed by maven-failsafe-plugin which are named like `*IT.java`... so if this test is a unit test you should name it accordingly...","body":"The naming convention for surefireplugin is that unit tests are named like <code>*Test.java</code> which integration tests are executed by maven-failsafe-plugin which are named like <code>*IT.java</code>... so if this test is a unit test you should name it accordingly..."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1681908712,"post_id":76052998,"comment_id":134132500,"body_markdown":"BTW: Upgrade surefire plugin to most recent version (3.0.0 https://maven.apache.org/plugins/)","body":"BTW: Upgrade surefire plugin to most recent version (3.0.0 <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>)"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681913004,"creation_date":1681913004,"answer_id":76055466,"question_id":76052998,"body_markdown":"By default, the Surefire Plugin will automatically include all test classes with the following wildcard patterns:\r\n\r\n  - &quot;**/Test*.java&quot; - includes all of its subdirectories and all Java filenames that start with &quot;Test&quot;.\r\n  - &quot;**/*Test.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;Test&quot;.\r\n  - &quot;**/*Tests.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;Tests&quot;.\r\n  - &quot;**/*TestCase.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;TestCase&quot;.\r\n\r\nYour test class do not follow the default wildcard patterns. Either rename it or specify in the plugin configuration.\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;includes&gt;\r\n          &lt;include&gt;ReservationApiIT.java&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Maven Test Execution by Tags with JUNIT5 and Surefire","body":"<p>By default, the Surefire Plugin will automatically include all test classes with the following wildcard patterns:</p>\n<ul>\n<li>&quot;**/Test*.java&quot; - includes all of its subdirectories and all Java filenames that start with &quot;Test&quot;.</li>\n<li>&quot;**/*Test.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;Test&quot;.</li>\n<li>&quot;**/*Tests.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;Tests&quot;.</li>\n<li>&quot;**/*TestCase.java&quot; - includes all of its subdirectories and all Java filenames that end with &quot;TestCase&quot;.</li>\n</ul>\n<p>Your test class do not follow the default wildcard patterns. Either rename it or specify in the plugin configuration.</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;includes&gt;\n      &lt;include&gt;ReservationApiIT.java&lt;/include&gt;\n    &lt;/includes&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":28348043,"reputation":3,"user_id":21679916,"display_name":"employeeDB"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76055466,"answer_count":1,"score":0,"last_activity_date":1683031824,"creation_date":1681897218,"question_id":76052998,"body_markdown":"I have test and tagged the tests by the @Tag annotation from the _org.junit.jupiter.api_ package.\r\n\r\nThis is the pom.xml\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;groups&gt;one&lt;/groups&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n```\r\n@Tag(&quot;one&quot;)\r\npublic class BubblegumApiIT {\r\n   // SOME TEST CODE\r\n}\r\n```\r\n\r\n\r\nNow I want to execute just the tests that are tagged by &quot;one&quot;. When I configure the JUNIT with Intellj (_instead of &#39;CLASS&#39; I use &#39;TAGS&#39;_) **it works.**\r\nHowever, the equivalent _mvn_ command **does not work.**\r\n\r\nThe equivalent maven command would be _mvn -Dgroups=one test_ or?\r\n\r\nBut I am executing exactly 0 tests then.\r\n\r\nAnybody had this issue before?\r\n","title":"Maven Test Execution by Tags with JUNIT5 and Surefire","body":"<p>I have test and tagged the tests by the @Tag annotation from the <em>org.junit.jupiter.api</em> package.</p>\n<p>This is the pom.xml</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M5&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;groups&gt;one&lt;/groups&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<pre><code>@Tag(&quot;one&quot;)\npublic class BubblegumApiIT {\n   // SOME TEST CODE\n}\n</code></pre>\n<p>Now I want to execute just the tests that are tagged by &quot;one&quot;. When I configure the JUNIT with Intellj (<em>instead of 'CLASS' I use 'TAGS'</em>) <strong>it works.</strong>\nHowever, the equivalent <em>mvn</em> command <strong>does not work.</strong></p>\n<p>The equivalent maven command would be <em>mvn -Dgroups=one test</em> or?</p>\n<p>But I am executing exactly 0 tests then.</p>\n<p>Anybody had this issue before?</p>\n"},{"tags":["java","logging","slf4j"],"comments":[{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":1,"creation_date":1302894781,"post_id":5681218,"comment_id":6486841,"body_markdown":"Did you not find those in the SL4J documentation website? http://www.slf4j.org/docs.html","body":"Did you not find those in the SL4J documentation website? <a href=\"http://www.slf4j.org/docs.html\" rel=\"nofollow noreferrer\">slf4j.org/docs.html</a>"},{"owner":{"account_id":336440,"reputation":5114,"user_id":664080,"display_name":"moritz"},"score":0,"creation_date":1302895136,"post_id":5681218,"comment_id":6486916,"body_markdown":"I don&#39;t get what you want to achieve, do you want to use slf4j&#39;s logger in the code and java.logging for output the logging or the other way?","body":"I don&#39;t get what you want to achieve, do you want to use slf4j&#39;s logger in the code and java.logging for output the logging or the other way?"},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":0,"creation_date":1302895271,"post_id":5681218,"comment_id":6486943,"body_markdown":"slf4j&#39;s API, java.util.logging for the underlying implementation, that works fine so far, but I don&#39;t know how to configure java.util.logging via either the slf4j API or a .properties file or a JVM `-D` parameter.","body":"slf4j&#39;s API, java.util.logging for the underlying implementation, that works fine so far, but I don&#39;t know how to configure java.util.logging via either the slf4j API or a .properties file or a JVM <code>-D</code> parameter."},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":0,"creation_date":1302895300,"post_id":5681218,"comment_id":6486948,"body_markdown":"...where I would rather use .properties files and not configure it programmatically.","body":"...where I would rather use .properties files and not configure it programmatically."}],"answers":[{"comments":[{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":0,"creation_date":1302895183,"post_id":5681306,"comment_id":6486926,"body_markdown":"&quot;the slf4j site is down right now so I cannot check the manual page or the FAQ)&quot; -- exactly. I have slf4j-api-*.jar and slf4j-jdk14-*.jar in my classpath, I just don&#39;t know how to &quot;do the magic listed in the javadoc&quot; to get it to redirect to a file instead of stdout.","body":"&quot;the slf4j site is down right now so I cannot check the manual page or the FAQ)&quot; -- exactly. I have slf4j-api-<i>.jar and slf4j-jdk14-</i>.jar in my classpath, I just don&#39;t know how to &quot;do the magic listed in the javadoc&quot; to get it to redirect to a file instead of stdout."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1302895304,"post_id":5681306,"comment_id":6486949,"body_markdown":"If you get log messages to your console, it means that the logging system works correctly.  You then need to configure it _COMPLETELY AS YOU WOULD OTHERWISE_ to have anything work differently.  I.e. for jdk logging you need to do exactly the same work with properties and for log4j you need to provide a log4j.xml file telling it what to do.","body":"If you get log messages to your console, it means that the logging system works correctly.  You then need to configure it <i>COMPLETELY AS YOU WOULD OTHERWISE</i> to have anything work differently.  I.e. for jdk logging you need to do exactly the same work with properties and for log4j you need to provide a log4j.xml file telling it what to do."},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":0,"creation_date":1302895458,"post_id":5681306,"comment_id":6486990,"body_markdown":"OK, then I guess my question becomes where&#39;s the docs on jdk14 logging configuration.","body":"OK, then I guess my question becomes where&#39;s the docs on jdk14 logging configuration."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1302895882,"post_id":5681306,"comment_id":6487100,"body_markdown":"Here perhaps? http://download.oracle.com/javase/1.4.2/docs/guide/util/logging/overview.html#1.8","body":"Here perhaps? <a href=\"http://download.oracle.com/javase/1.4.2/docs/guide/util/logging/overview.html#1.8\" rel=\"nofollow noreferrer\">download.oracle.com/javase/1.4.2/docs/guide/util/logging/&hellip;</a>"},{"owner":{"account_id":49802,"reputation":46805,"user_id":148423,"accept_rate":74,"display_name":"Joe"},"score":0,"creation_date":1443638574,"post_id":5681306,"comment_id":53578497,"body_markdown":"@Thorbj&#248;rnRavnAndersen that link is broken.","body":"@Thorbj&#248;rnRavnAndersen that link is broken."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1518440906,"post_id":5681306,"comment_id":84494325,"body_markdown":"@Joe Probably EOL&#39;ed by Oracle.  For Java 8 it is at https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html#a1.8","body":"@Joe Probably EOL&#39;ed by Oracle.  For Java 8 it is at <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html#a1.8\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/logging/&hellip;</a>"}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":6,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1341574135,"creation_date":1302894990,"answer_id":5681306,"question_id":5681218,"body_markdown":"There is no configuration in the slf4j layer.  It is just an API, which the backend must provide the implementation for (more or less).\r\n\r\nTo use java.util.logging as the slf4j backend, you must have slf4j-jdk14-mumle.jar from the slf4j distribution on your classpath, and do the magic listed in the javadoc to enable it.  If not you will have a runtime error saying there is no slf4j implementation active.","title":"slf4j + java.util.logging: how to configure?","body":"<p>There is no configuration in the slf4j layer.  It is just an API, which the backend must provide the implementation for (more or less).</p>\n\n<p>To use java.util.logging as the slf4j backend, you must have slf4j-jdk14-mumle.jar from the slf4j distribution on your classpath, and do the magic listed in the javadoc to enable it.  If not you will have a runtime error saying there is no slf4j implementation active.</p>\n"},{"comments":[{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":8,"creation_date":1360629232,"post_id":5681314,"comment_id":20767176,"body_markdown":"...and of course, to actually _answer the original question_ (why is everyone up-voting non-answers?): one can of course use `java.util.logging` as the logging implementation by putting `slf4j-jdk14-{slf4j-version}.jar` in the classpath instead of any other `slf4j-{binding}.jar`; then set the j.u.l. config using the `-Djava.util.logging.config.file` property.  (I _would_ downvote, but won&#39;t since I also prefer logback :-) . But I also like _answers_ .)","body":"...and of course, to actually <i>answer the original question</i> (why is everyone up-voting non-answers?): one can of course use <code>java.util.logging</code> as the logging implementation by putting <code>slf4j-jdk14-{slf4j-version}.jar</code> in the classpath instead of any other <code>slf4j-{binding}.jar</code>; then set the j.u.l. config using the <code>-Djava.util.logging.config.file</code> property.  (I <i>would</i> downvote, but won&#39;t since I also prefer logback :-) . But I also like <i>answers</i> .)"}],"tags":[],"owner":{"account_id":37273,"reputation":2636,"user_id":106527,"display_name":"jabbie"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1302895070,"creation_date":1302895070,"answer_id":5681314,"question_id":5681218,"body_markdown":"You don&#39;t configure SLF4J - you need to bind and configure the provider. I use Logback, which was built specifically for SLF4J. You could also use log4j. See the relevant entry in the manual: http://www.slf4j.org/manual.html#binding","title":"slf4j + java.util.logging: how to configure?","body":"<p>You don't configure SLF4J - you need to bind and configure the provider. I use Logback, which was built specifically for SLF4J. You could also use log4j. See the relevant entry in the manual: <a href=\"http://www.slf4j.org/manual.html#binding\" rel=\"nofollow\">http://www.slf4j.org/manual.html#binding</a></p>\n"},{"comments":[{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":5,"creation_date":1360628747,"post_id":5681370,"comment_id":20767053,"body_markdown":"Although I agree, this doesn&#39;t answer the question. To warrant the up-votes, include something like: similar to logback using `java -Dlogback.configurationFile=/path/to/config.xml`, j.u.l. can use: `java -Djava.util.logging.config.file=myLoggingConfig` w/ either a [properties file](http://stackoverflow.com/questions/805701/load-java-util-logging-config-file-for-default-initialization) or [class](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/LogManager.html) . Logback by default uses `logback.xml` from the classpath; j.u.l uses `logging.properties` from your Java install dir.","body":"Although I agree, this doesn&#39;t answer the question. To warrant the up-votes, include something like: similar to logback using <code>java -Dlogback.configurationFile=&#47;path&#47;to&#47;config.xml</code>, j.u.l. can use: <code>java -Djava.util.logging.config.file=myLoggingConfig</code> w/ either a <a href=\"http://stackoverflow.com/questions/805701/load-java-util-logging-config-file-for-default-initialization\">properties file</a> or <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/LogManager.html\" rel=\"nofollow noreferrer\">class</a> . Logback by default uses <code>logback.xml</code> from the classpath; j.u.l uses <code>logging.properties</code> from your Java install dir."}],"tags":[],"owner":{"account_id":57987,"reputation":29516,"user_id":173677,"accept_rate":83,"display_name":"Vladislav Rastrusny"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1302895403,"creation_date":1302895403,"answer_id":5681370,"question_id":5681218,"body_markdown":"I&#39;ve dropped Java logging on the same purpose and went for logback. There is nothing to do to configure logback with SLF4J actually. Just put logback.xml to the root of the jar with logback configuration and put logback-XX.jar on classpath.\r\n\r\n    &lt;configuration&gt;\r\n    \r\n      &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;!-- encoders are assigned the type\r\n             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\r\n        &lt;encoder&gt;\r\n          &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n      &lt;/appender&gt;\r\n    \r\n      &lt;root level=&quot;warn&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n      &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\nThis is a config for logging to console, but logback manual has more examples.","title":"slf4j + java.util.logging: how to configure?","body":"<p>I've dropped Java logging on the same purpose and went for logback. There is nothing to do to configure logback with SLF4J actually. Just put logback.xml to the root of the jar with logback configuration and put logback-XX.jar on classpath.</p>\n\n<pre><code>&lt;configuration&gt;\n\n  &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n    &lt;!-- encoders are assigned the type\n         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=\"warn\"&gt;\n    &lt;appender-ref ref=\"STDOUT\" /&gt;\n  &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>This is a config for logging to console, but logback manual has more examples.</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":4,"creation_date":1302898003,"post_id":5681450,"comment_id":6487687,"body_markdown":"There is one distinct advantage of using j.u.l, namely that it is easy to use across classloaders.  We use it to propagate log messages out of a web application (WAR) into the servlet containers logs.","body":"There is one distinct advantage of using j.u.l, namely that it is easy to use across classloaders.  We use it to propagate log messages out of a web application (WAR) into the servlet containers logs."}],"tags":[],"owner":{"account_id":336440,"reputation":5114,"user_id":664080,"display_name":"moritz"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1683031070,"creation_date":1302895829,"answer_id":5681450,"question_id":5681218,"body_markdown":"See [this tutorial on jul](http://www.javapractices.com/topic/TopicAction.do?Id=143):\r\n\r\n&gt;java -Djava.util.logging.config.file=myLoggingConfigFilePath \r\n\r\nBut I would recommend to go for [Logback](http://logback.qos.ch/)\r\n\r\nAlso see an official [&quot;Java logging overview&quot;](https://docs.oracle.com/en/java/javase/20/core/java-logging-overview.html).","title":"slf4j + java.util.logging: how to configure?","body":"<p>See <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=143\" rel=\"nofollow noreferrer\">this tutorial on jul</a>:</p>\n<blockquote>\n<p>java -Djava.util.logging.config.file=myLoggingConfigFilePath</p>\n</blockquote>\n<p>But I would recommend to go for <a href=\"http://logback.qos.ch/\" rel=\"nofollow noreferrer\">Logback</a></p>\n<p>Also see an official <a href=\"https://docs.oracle.com/en/java/javase/20/core/java-logging-overview.html\" rel=\"nofollow noreferrer\">&quot;Java logging overview&quot;</a>.</p>\n"},{"comments":[{"owner":{"account_id":4187371,"reputation":4966,"user_id":3430807,"accept_rate":60,"display_name":"Andreas"},"score":0,"creation_date":1498249776,"post_id":18923296,"comment_id":76441742,"body_markdown":"Are you specifying a path to use? If so, can you clarify why it works and in which version of tomcat?","body":"Are you specifying a path to use? If so, can you clarify why it works and in which version of tomcat?"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1498251372,"post_id":18923296,"comment_id":76442422,"body_markdown":"@Andreas wherever your webapps folder lives.  This was with tomcat 6 I believe but I think it doesn&#39;t matter, since it&#39;s more of a log4j thing. Cheers!","body":"@Andreas wherever your webapps folder lives.  This was with tomcat 6 I believe but I think it doesn&#39;t matter, since it&#39;s more of a log4j thing. Cheers!"}],"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1569252333,"creation_date":1379701021,"answer_id":18923296,"question_id":5681218,"body_markdown":"Sometimes it appears you can get away with editing your file with a filename like this\r\n\r\n`tomcat-directory/webapps/your_app_name/WEB-INF/classes/log4j.properties`\r\n\r\n (standard log4j config file).  Worked for me anyway.","title":"slf4j + java.util.logging: how to configure?","body":"<p>Sometimes it appears you can get away with editing your file with a filename like this</p>\n\n<p><code>tomcat-directory/webapps/your_app_name/WEB-INF/classes/log4j.properties</code></p>\n\n<p>(standard log4j config file).  Worked for me anyway.</p>\n"},{"tags":[],"owner":{"account_id":2013934,"reputation":867,"user_id":1801684,"display_name":"ylu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536528203,"creation_date":1404870176,"answer_id":24644167,"question_id":5681218,"body_markdown":"Basically, you just need to have slf4j-api.1.7.7.jar and slf4j-jdk14.1.7.7.jar on your classpath. And then create a logging.properties file for your application and set System properties\r\n-Djava.util.logging.config.file={path_to_logging.properties}\r\n\r\ncheck [this tutorial](http://jkssweetlife.com/configure-slf4j-working-various-logging-frameworks/) out which gives you examples how to configure slf4j with different logging frameworks such as java logger, log4j, logback etc.","title":"slf4j + java.util.logging: how to configure?","body":"<p>Basically, you just need to have slf4j-api.1.7.7.jar and slf4j-jdk14.1.7.7.jar on your classpath. And then create a logging.properties file for your application and set System properties\n-Djava.util.logging.config.file={path_to_logging.properties}</p>\n\n<p>check <a href=\"http://jkssweetlife.com/configure-slf4j-working-various-logging-frameworks/\" rel=\"nofollow noreferrer\">this tutorial</a> out which gives you examples how to configure slf4j with different logging frameworks such as java logger, log4j, logback etc.</p>\n"}],"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73740,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":5681450,"answer_count":6,"score":44,"last_activity_date":1683031070,"creation_date":1302894320,"question_id":5681218,"body_markdown":"I&#39;m trying to use slf4j + java.util.logging. I know how to set up the Java source code to do this via `logger = LoggerFactory.getLogger(...)` and `logger.warn(&#39;...&#39;`) or whatever.\r\n\r\n**But where&#39;s the documentation for setting up the configuration in slf4j?** I&#39;m very confused... I have the log4j manual and am familiar w/ the very basics of logging adapters, but I&#39;m just not sure how to get this to work with slf4j + java.util.logging.\r\n\r\nnamely:\r\n\r\n- which .properties file and/or JVM `-D` command-line argument do I need to specify to point it at my configuration file?\r\n\r\n- where&#39;s the documentation for the configuration file for java.util.logging?\r\n\r\n- does using slf4j cause any change in my configuration file? (i.e. something that I would have to declare differently, vs. just using java.util.logging or log4j directly)","title":"slf4j + java.util.logging: how to configure?","body":"<p>I'm trying to use slf4j + java.util.logging. I know how to set up the Java source code to do this via <code>logger = LoggerFactory.getLogger(...)</code> and <code>logger.warn('...'</code>) or whatever.</p>\n\n<p><strong>But where's the documentation for setting up the configuration in slf4j?</strong> I'm very confused... I have the log4j manual and am familiar w/ the very basics of logging adapters, but I'm just not sure how to get this to work with slf4j + java.util.logging.</p>\n\n<p>namely:</p>\n\n<ul>\n<li><p>which .properties file and/or JVM <code>-D</code> command-line argument do I need to specify to point it at my configuration file?</p></li>\n<li><p>where's the documentation for the configuration file for java.util.logging?</p></li>\n<li><p>does using slf4j cause any change in my configuration file? (i.e. something that I would have to declare differently, vs. just using java.util.logging or log4j directly)</p></li>\n</ul>\n"},{"tags":["java","class","reflection","package-private"],"comments":[{"owner":{"account_id":211572,"reputation":3111,"user_id":463824,"accept_rate":50,"display_name":"Shiva Kumar"},"score":0,"creation_date":1361498978,"post_id":15015675,"comment_id":21097029,"body_markdown":"setAccesible is defined on Constructor, Method or Field and not on Class. Use getConstructor API on class to get its constructor","body":"setAccesible is defined on Constructor, Method or Field and not on Class. Use getConstructor API on class to get its constructor"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1361499092,"post_id":15015675,"comment_id":21097050,"body_markdown":"But where is the problem? Why you want to use reflection? Can&#39;t you just use `new full.package.name.of.YourClass()`? Are all constructors package/private?","body":"But where is the problem? Why you want to use reflection? Can&#39;t you just use <code>new full.package.name.of.YourClass()</code>? Are all constructors package/private?"},{"owner":{"account_id":2327081,"reputation":1278,"user_id":2041324,"accept_rate":70,"display_name":"Josh Sobel"},"score":2,"creation_date":1361499164,"post_id":15015675,"comment_id":21097065,"body_markdown":"no not if the class im using is in a different package","body":"no not if the class im using is in a different package"}],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1361499604,"creation_date":1361499303,"answer_id":15015756,"question_id":15015675,"body_markdown":"`Class.forName` should work. If the class is within a package hierarchy list in the `&quot;package.access&quot;` security property, then you will need to perform the operation with the appropriate privilege (usually all permissions; or don&#39;t have a security manager).\r\n\r\nIf you are trying to use `Class.newInstance`, don&#39;t. `Class.newInstance` handles exceptions poorly. Instead get a `Constructor` and call `newInstance` on that. It&#39;s difficult to see what you are having problems with without the exception trace.\r\n\r\nAs ever, most but not all uses of reflection are bad ideas.","title":"Accessing non-visible classes with reflection","body":"<p><code>Class.forName</code> should work. If the class is within a package hierarchy list in the <code>\"package.access\"</code> security property, then you will need to perform the operation with the appropriate privilege (usually all permissions; or don't have a security manager).</p>\n\n<p>If you are trying to use <code>Class.newInstance</code>, don't. <code>Class.newInstance</code> handles exceptions poorly. Instead get a <code>Constructor</code> and call <code>newInstance</code> on that. It's difficult to see what you are having problems with without the exception trace.</p>\n\n<p>As ever, most but not all uses of reflection are bad ideas.</p>\n"},{"comments":[{"owner":{"account_id":6800535,"reputation":764,"user_id":5233978,"display_name":"Mahesh Bhuva"},"score":0,"creation_date":1534168216,"post_id":15015865,"comment_id":90601934,"body_markdown":"What if class A would be default public/package private? Then also can we load it using Class.forName in different package?","body":"What if class A would be default public/package private? Then also can we load it using Class.forName in different package?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":3,"creation_date":1534168641,"post_id":15015865,"comment_id":90602228,"body_markdown":"@MaheshBhuva Yes (at least with standard settings, I am not reflection guru so I can&#39;t tell if there are ways to prevent it). `Class.forName` returns class *literal*, which is instance of `Class` holding metainformation *about* specified class. But if we would like to access some methods/fields from it we may need to invoke `setAccessible(true)` on instances of those `Method`s or `Field`s.","body":"@MaheshBhuva Yes (at least with standard settings, I am not reflection guru so I can&#39;t tell if there are ways to prevent it). <code>Class.forName</code> returns class <i>literal</i>, which is instance of <code>Class</code> holding metainformation <i>about</i> specified class. But if we would like to access some methods/fields from it we may need to invoke <code>setAccessible(true)</code> on instances of those <code>Method</code>s or <code>Field</code>s."}],"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":2,"down_vote_count":1,"up_vote_count":78,"is_accepted":true,"score":77,"last_activity_date":1683031033,"creation_date":1361500101,"answer_id":15015865,"question_id":15015675,"body_markdown":"**nested class** - class defined within other class (includes static and non-static classes)  \r\n**inner class** - non-static nested class (instance of inner class can only be created via instance of outer class)\r\n&lt;/sub&gt;\r\n\r\n## non-nested (top level) classes\r\n\r\nBased on your question we know that constructor you want to access is not public. So your class may look like this (`A` class is in some package different than ours)\r\n\r\n    package package1;\r\n    \r\n    public class A {\r\n    \tA(){\r\n    \t\tSystem.out.println(&quot;this is non-public constructor&quot;);\r\n    \t}\r\n    }\r\n\r\nTo create instance of this class we need to get to constructor we want to invoke, and make it accessible. When it is done we can use `Constructor#newInstance(arguments)` to create instance.\r\n\r\n\tClass&lt;?&gt; c = Class.forName(&quot;package1.A&quot;);\r\n    //full package name --------^^^^^^^^^^\r\n    //or simpler without Class.forName:\r\n\t//Class&lt;package1.A&gt; c = package1.A.class;\r\n\r\n\t//In our case we need to use\r\n\tConstructor&lt;?&gt; constructor = c.getDeclaredConstructor();\r\n    //note: getConstructor() can return only public constructors\r\n    //so we needed to search for any Declared constructor\r\n\r\n    //now we need to make this constructor accessible\r\n\tconstructor.setAccessible(true);//ABRACADABRA!\r\n\r\n\tObject o = constructor.newInstance();\r\n\r\n---\r\n## nested and inner classes\r\n\r\nIf you want to access nested (static and non-static) Class with `Class.forName` you need to use syntax:\r\n\r\n\tClass&lt;?&gt; clazz = Class.forName(&quot;package1.Outer$Nested&quot;);\r\n\r\n`Outer$Nested` says that `Nested` class is declared within `Outer` class. Nested classes are very similar to methods, they have access to all members of its outer class (including private ones). \r\n\r\nBut we need to remember that instance of inner class to exists requires instance of its outer class. Normally we create them via:\r\n\r\n    Outer outer = new Outer();\r\n    Outer.Inner inner = outer.new Inner();\r\n\r\nso as you see each instance of Inner class have some information about its outer class (reference to that outer instance is stored in `this$0` field, more info: https://stackoverflow.com/questions/28462849/what-does-it-mean-if-a-variable-has-the-name-this0-in-intellij-idea-while-deb/28462949#28462949)\r\n\r\nSo while creating instance of `Inner` class with `Constructor#newInstance()` you need to pass as first argument reference to instance of `Outer` class (to simulate `outer.new Inner()` behavior).\r\n\r\nHere is an example.\r\n\r\nin package1\r\n\r\n\tpackage package1;\r\n\t\r\n\tpublic class Outer {\r\n\t\tclass Inner{\r\n\t\t\tInner(){\r\n\t\t\t\tSystem.out.println(&quot;non-public constructor of inner class&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nin package2 \r\n\r\n\tpackage package2;\r\n\t\r\n\timport package1.Outer;\r\n\timport java.lang.reflect.Constructor;\r\n\t\r\n\tpublic class Test {\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\r\n\t\t\tOuter outerObject = new Outer();\r\n\t\r\n\t\t\tClass&lt;?&gt; innerClazz = Class.forName(&quot;package1.Outer$Inner&quot;);\r\n\t\r\n\t\t\t// constructor of inner class as first argument need instance of\r\n\t\t\t// Outer class, so we need to select such constructor\r\n\t\t\tConstructor&lt;?&gt; constructor = innerClazz.getDeclaredConstructor(Outer.class);\r\n\r\n\t\t\t//we need to make constructor accessible \r\n\t\t\tconstructor.setAccessible(true);\r\n\r\n\t\t\t//and pass instance of Outer class as first argument\r\n\t\t\tObject o = constructor.newInstance(outerObject);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;we created object of class: &quot;+o.getClass().getName());\r\n\t\r\n\t\t}\r\n\t}\r\n\r\n## static-nested classes\r\n\r\nInstances of static-nested classes don&#39;t require instance of Outer class (since they are static). So in their case we don&#39;t need to look for constructor with `Outer.class` as first argument. And we don&#39;t need to pass instance of outer class as first argument. In other words code will be same as for non-nested (top-level) class (maybe except the fact that you would need to add use `$` instead of `.` in class name to when referring to nested classes in `Class.forName()` like `Class.forName(&quot;some.package.Outer$Nested1$NestedNested&quot;)`).","title":"Accessing non-visible classes with reflection","body":"<p><strong>nested class</strong> - class defined within other class (includes static and non-static classes)<br />\n<strong>inner class</strong> - non-static nested class (instance of inner class can only be created via instance of outer class)\n</p>\n<h2>non-nested (top level) classes</h2>\n<p>Based on your question we know that constructor you want to access is not public. So your class may look like this (<code>A</code> class is in some package different than ours)</p>\n<pre><code>package package1;\n\npublic class A {\n    A(){\n        System.out.println(&quot;this is non-public constructor&quot;);\n    }\n}\n</code></pre>\n<p>To create instance of this class we need to get to constructor we want to invoke, and make it accessible. When it is done we can use <code>Constructor#newInstance(arguments)</code> to create instance.</p>\n<pre><code>Class&lt;?&gt; c = Class.forName(&quot;package1.A&quot;);\n//full package name --------^^^^^^^^^^\n//or simpler without Class.forName:\n//Class&lt;package1.A&gt; c = package1.A.class;\n\n//In our case we need to use\nConstructor&lt;?&gt; constructor = c.getDeclaredConstructor();\n//note: getConstructor() can return only public constructors\n//so we needed to search for any Declared constructor\n\n//now we need to make this constructor accessible\nconstructor.setAccessible(true);//ABRACADABRA!\n\nObject o = constructor.newInstance();\n</code></pre>\n<hr />\n<h2>nested and inner classes</h2>\n<p>If you want to access nested (static and non-static) Class with <code>Class.forName</code> you need to use syntax:</p>\n<pre><code>Class&lt;?&gt; clazz = Class.forName(&quot;package1.Outer$Nested&quot;);\n</code></pre>\n<p><code>Outer$Nested</code> says that <code>Nested</code> class is declared within <code>Outer</code> class. Nested classes are very similar to methods, they have access to all members of its outer class (including private ones).</p>\n<p>But we need to remember that instance of inner class to exists requires instance of its outer class. Normally we create them via:</p>\n<pre><code>Outer outer = new Outer();\nOuter.Inner inner = outer.new Inner();\n</code></pre>\n<p>so as you see each instance of Inner class have some information about its outer class (reference to that outer instance is stored in <code>this$0</code> field, more info: <a href=\"https://stackoverflow.com/questions/28462849/what-does-it-mean-if-a-variable-has-the-name-this0-in-intellij-idea-while-deb/28462949#28462949\">What does it mean if a variable has the name &quot;this$0&quot; in IntelliJ IDEA while debugging Java?</a>)</p>\n<p>So while creating instance of <code>Inner</code> class with <code>Constructor#newInstance()</code> you need to pass as first argument reference to instance of <code>Outer</code> class (to simulate <code>outer.new Inner()</code> behavior).</p>\n<p>Here is an example.</p>\n<p>in package1</p>\n<pre><code>package package1;\n\npublic class Outer {\n    class Inner{\n        Inner(){\n            System.out.println(&quot;non-public constructor of inner class&quot;);\n        }\n    }\n}\n</code></pre>\n<p>in package2</p>\n<pre><code>package package2;\n\nimport package1.Outer;\nimport java.lang.reflect.Constructor;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n\n        Outer outerObject = new Outer();\n\n        Class&lt;?&gt; innerClazz = Class.forName(&quot;package1.Outer$Inner&quot;);\n\n        // constructor of inner class as first argument need instance of\n        // Outer class, so we need to select such constructor\n        Constructor&lt;?&gt; constructor = innerClazz.getDeclaredConstructor(Outer.class);\n\n        //we need to make constructor accessible \n        constructor.setAccessible(true);\n\n        //and pass instance of Outer class as first argument\n        Object o = constructor.newInstance(outerObject);\n        \n        System.out.println(&quot;we created object of class: &quot;+o.getClass().getName());\n\n    }\n}\n</code></pre>\n<h2>static-nested classes</h2>\n<p>Instances of static-nested classes don't require instance of Outer class (since they are static). So in their case we don't need to look for constructor with <code>Outer.class</code> as first argument. And we don't need to pass instance of outer class as first argument. In other words code will be same as for non-nested (top-level) class (maybe except the fact that you would need to add use <code>$</code> instead of <code>.</code> in class name to when referring to nested classes in <code>Class.forName()</code> like <code>Class.forName(&quot;some.package.Outer$Nested1$NestedNested&quot;)</code>).</p>\n"},{"tags":[],"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380171813,"creation_date":1380171813,"answer_id":19019774,"question_id":15015675,"body_markdown":"We recently released a library that helps a lot to access private fields, methods and inner classes through reflection : [BoundBox](https://github.com/stephanenicolas/boundbox)\r\n\r\nFor a class like \r\n\r\n    public class Outer {\r\n        private static class Inner {\r\n            private int foo() {return 2;}\r\n        }\r\n    }\r\n\r\n\r\nIt provides a syntax like : \r\n\r\n    Outer outer = new Outer();\r\n    Object inner = BoundBoxOfOuter.boundBox_new_Inner();\r\n    new BoundBoxOfOuter.BoundBoxOfInner(inner).foo();\r\n\r\nThe only thing you have to do to create the BoundBox class is to write `@BoundBox(boundClass=Outer.class)` and the `BoundBoxOfOuter` class will be instantly generated.\r\n","title":"Accessing non-visible classes with reflection","body":"<p>We recently released a library that helps a lot to access private fields, methods and inner classes through reflection : <a href=\"https://github.com/stephanenicolas/boundbox\" rel=\"nofollow\">BoundBox</a></p>\n\n<p>For a class like </p>\n\n<pre><code>public class Outer {\n    private static class Inner {\n        private int foo() {return 2;}\n    }\n}\n</code></pre>\n\n<p>It provides a syntax like : </p>\n\n<pre><code>Outer outer = new Outer();\nObject inner = BoundBoxOfOuter.boundBox_new_Inner();\nnew BoundBoxOfOuter.BoundBoxOfInner(inner).foo();\n</code></pre>\n\n<p>The only thing you have to do to create the BoundBox class is to write <code>@BoundBox(boundClass=Outer.class)</code> and the <code>BoundBoxOfOuter</code> class will be instantly generated.</p>\n"},{"tags":[],"owner":{"account_id":1994057,"reputation":61,"user_id":1787370,"display_name":"Vik_Technologist"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473607546,"creation_date":1416988382,"answer_id":27143815,"question_id":15015675,"body_markdown":"I had requirement to copy the value of field from older version of object if the value is null in latest version.  We had these 2 options. \r\n        \r\nCore Java : \r\n\r\n    for (Field f : object.getClass().getSuperclass().getDeclaredFields()) {\r\n        f.setAccessible(true);\r\n      System.out.println(f.getName());\r\n      if (f.get(object) == null){\r\n        f.set(object, f.get(oldObject));\r\n      }\r\n    }\r\n\r\nUsing Spring [org.springframework.beans.BeanWrapper] :\r\n\r\n    BeanWrapper bw = new BeanWrapperImpl(object);\r\n    PropertyDescriptor[] data = bw.getPropertyDescriptors();\r\n    for (PropertyDescriptor propertyDescriptor : data) {\r\n      System.out.println(propertyDescriptor.getName());\r\n      Object propertyValue = bw.getPropertyValue(propertyDescriptor.getName());\r\n      if(propertyValue == null )\r\n        bw.setPropertyValue( new PropertyValue(propertyDescriptor.getName(),&quot;newValue&quot;));\r\n    }\r\n        \t","title":"Accessing non-visible classes with reflection","body":"<p>I had requirement to copy the value of field from older version of object if the value is null in latest version.  We had these 2 options. </p>\n\n<p>Core Java : </p>\n\n<pre><code>for (Field f : object.getClass().getSuperclass().getDeclaredFields()) {\n    f.setAccessible(true);\n  System.out.println(f.getName());\n  if (f.get(object) == null){\n    f.set(object, f.get(oldObject));\n  }\n}\n</code></pre>\n\n<p>Using Spring [org.springframework.beans.BeanWrapper] :</p>\n\n<pre><code>BeanWrapper bw = new BeanWrapperImpl(object);\nPropertyDescriptor[] data = bw.getPropertyDescriptors();\nfor (PropertyDescriptor propertyDescriptor : data) {\n  System.out.println(propertyDescriptor.getName());\n  Object propertyValue = bw.getPropertyValue(propertyDescriptor.getName());\n  if(propertyValue == null )\n    bw.setPropertyValue( new PropertyValue(propertyDescriptor.getName(),\"newValue\"));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4928931,"reputation":2728,"user_id":3969362,"display_name":"Slion"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617962233,"creation_date":1617962233,"answer_id":67018973,"question_id":15015675,"body_markdown":"Had to do something similar on Android here is what I came up with:\r\n\r\n    /**\r\n     * To fix issues with wrong edge-to-edge bottom sheet top padding and status bar icon color…\r\n     * …we need to call [BottomSheetDialog.EdgeToEdgeCallback.setPaddingForPosition] which is a private function from a private class.\r\n     * See: https://github.com/material-components/material-components-android/issues/2165\r\n     */\r\n    fun adjustBottomSheet(aDialog : BottomSheetDialog) {\r\n        // Get our private class\r\n        val classEdgeToEdgeCallback = Class.forName(&quot;com.google.android.material.bottomsheet.BottomSheetDialog\\$EdgeToEdgeCallback&quot;)\r\n        // Get our private method\r\n        val methodSetPaddingForPosition: Method = classEdgeToEdgeCallback.getDeclaredMethod(&quot;setPaddingForPosition&quot;, View::class.java)\r\n        methodSetPaddingForPosition.isAccessible = true\r\n        // Get private field containing our EdgeToEdgeCallback instance\r\n        val fieldEdgeToEdgeCallback = BottomSheetDialog::class.java.getDeclaredField(&quot;edgeToEdgeCallback&quot;)\r\n        fieldEdgeToEdgeCallback.isAccessible = true\r\n        // Get our bottom sheet view field\r\n        val fieldBottomField = BottomSheetDialog::class.java.getDeclaredField(&quot;bottomSheet&quot;)\r\n        fieldBottomField.isAccessible = true\r\n        // Eventually call setPaddingForPosition from EdgeToEdgeCallback instance passing bottom sheet view as parameter\r\n        methodSetPaddingForPosition.invoke(fieldEdgeToEdgeCallback.get(aDialog),fieldBottomField.get(aDialog))\r\n    }\r\n\r\nAlso you may want to make sure proguard does not discard the method you are trying to access:\r\n\r\n    # Needed for now to fix our bottom sheet issue from \r\n    com.google.android.material:material:1.4.0-alpha02\r\n    -keep class com.google.android.material.bottomsheet.BottomSheetDialog$EdgeToEdgeCallback {\r\n        private void setPaddingForPosition(android.view.View);\r\n    }\r\n","title":"Accessing non-visible classes with reflection","body":"<p>Had to do something similar on Android here is what I came up with:</p>\n<pre><code>/**\n * To fix issues with wrong edge-to-edge bottom sheet top padding and status bar icon color…\n * …we need to call [BottomSheetDialog.EdgeToEdgeCallback.setPaddingForPosition] which is a private function from a private class.\n * See: https://github.com/material-components/material-components-android/issues/2165\n */\nfun adjustBottomSheet(aDialog : BottomSheetDialog) {\n    // Get our private class\n    val classEdgeToEdgeCallback = Class.forName(&quot;com.google.android.material.bottomsheet.BottomSheetDialog\\$EdgeToEdgeCallback&quot;)\n    // Get our private method\n    val methodSetPaddingForPosition: Method = classEdgeToEdgeCallback.getDeclaredMethod(&quot;setPaddingForPosition&quot;, View::class.java)\n    methodSetPaddingForPosition.isAccessible = true\n    // Get private field containing our EdgeToEdgeCallback instance\n    val fieldEdgeToEdgeCallback = BottomSheetDialog::class.java.getDeclaredField(&quot;edgeToEdgeCallback&quot;)\n    fieldEdgeToEdgeCallback.isAccessible = true\n    // Get our bottom sheet view field\n    val fieldBottomField = BottomSheetDialog::class.java.getDeclaredField(&quot;bottomSheet&quot;)\n    fieldBottomField.isAccessible = true\n    // Eventually call setPaddingForPosition from EdgeToEdgeCallback instance passing bottom sheet view as parameter\n    methodSetPaddingForPosition.invoke(fieldEdgeToEdgeCallback.get(aDialog),fieldBottomField.get(aDialog))\n}\n</code></pre>\n<p>Also you may want to make sure proguard does not discard the method you are trying to access:</p>\n<pre><code># Needed for now to fix our bottom sheet issue from \ncom.google.android.material:material:1.4.0-alpha02\n-keep class com.google.android.material.bottomsheet.BottomSheetDialog$EdgeToEdgeCallback {\n    private void setPaddingForPosition(android.view.View);\n}\n</code></pre>\n"}],"owner":{"account_id":2327081,"reputation":1278,"user_id":2041324,"accept_rate":70,"display_name":"Josh Sobel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55404,"favorite_count":0,"down_vote_count":0,"up_vote_count":65,"accepted_answer_id":15015865,"answer_count":5,"score":65,"last_activity_date":1683031033,"creation_date":1361498746,"question_id":15015675,"body_markdown":"I am trying to get an instance of a non-visible class, AKA package private class, using reflection.  I was wondering if there was a way to switch the modifiers to make it public and then access it using `Class.forName`.  When I try that now it stops me saying I can&#39;t do it.  Unfortunately there is no `setAccesible` method of the `Class` class.","title":"Accessing non-visible classes with reflection","body":"<p>I am trying to get an instance of a non-visible class, AKA package private class, using reflection.  I was wondering if there was a way to switch the modifiers to make it public and then access it using <code>Class.forName</code>.  When I try that now it stops me saying I can't do it.  Unfortunately there is no <code>setAccesible</code> method of the <code>Class</code> class.</p>\n"},{"tags":["java","java-8","struts2","jakarta-migration"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683009005,"post_id":76152075,"comment_id":134297116,"body_markdown":"Well yes.  When you migrate from Java-EE to Jakarta-EE, you need to change `javax.servlet.*` to `jakarta.servlet.*`.   In your source code.  And if are using libraries that depend on the `javax.servlet.*` APIs, then you need new versions of those too.","body":"Well yes.  When you migrate from Java-EE to Jakarta-EE, you need to change <code>javax.servlet.*</code> to <code>jakarta.servlet.*</code>.   In your source code.  And if are using libraries that depend on the <code>javax.servlet.*</code> APIs, then you need new versions of those too."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1683009265,"post_id":76152075,"comment_id":134297161,"body_markdown":"And ... as of the latest Apache Struts release ... they do NOT support Jakarta; see https://issues.apache.org/jira/projects/WW/issues/WW-5141.  So, I think you are stuck on Tomcat 9.x until the Struts project catches up.","body":"And ... as of the latest Apache Struts release ... they do NOT support Jakarta; see <a href=\"https://issues.apache.org/jira/projects/WW/issues/WW-5141\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/WW/issues/WW-5141</a>.  So, I think you are stuck on Tomcat 9.x until the Struts project catches up."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683030926,"post_id":76152075,"comment_id":134301312,"body_markdown":"Struts2 6.0.x does not support Jakarta EE 9, so neither does Struts2 2.3.30. You cannot upgrade to Tomcat 10, or you need to get rid of your dependency on struts 2.","body":"Struts2 6.0.x does not support Jakarta EE 9, so neither does Struts2 2.3.30. You cannot upgrade to Tomcat 10, or you need to get rid of your dependency on struts 2."}],"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683022053,"answer_count":0,"score":0,"last_activity_date":1683030976,"creation_date":1683007082,"question_id":76152075,"body_markdown":"i&#39;m using struts 2(version 2.3.30), jdk 8, tomcat 10, (jakarta).\r\n\r\nGetting the errors while using\r\n\r\n    HttpServletResponse response = ServletActionContext.getResponse();\r\n\r\neventually, this is using import org.apache.struts2.ServletActionContext which I belive is causing the error\r\n\r\n    Multiple markers at this line\r\n    \t- The method getResponse() from the type ServletActionContext refers to the missing type HttpServletResponse\r\n    \t- The type javax.servlet.http.HttpServletResponse cannot be resolved. It is indirectly referenced from required .class files\r\n    \t- The type javax.servlet.http.HttpServletResponse cannot be resolved. It is indirectly referenced from required type org.apache.struts2.ServletActionContext \r\n\r\nI tried using Jakarta plugin &quot;https://github.com/apache/struts-extras/blob/master/struts2-secure-jakarta-multipart-parser-plugin/README.md&quot;\r\nbut didn&#39;t able to resolve I&#39;m currently upgrading my project to tomcat 10 and jdk 8 from tomcat 7 and jdk 7.","title":"not able to use HttpServletResponse","body":"<p>i'm using struts 2(version 2.3.30), jdk 8, tomcat 10, (jakarta).</p>\n<p>Getting the errors while using</p>\n<pre><code>HttpServletResponse response = ServletActionContext.getResponse();\n</code></pre>\n<p>eventually, this is using import org.apache.struts2.ServletActionContext which I belive is causing the error</p>\n<pre><code>Multiple markers at this line\n    - The method getResponse() from the type ServletActionContext refers to the missing type HttpServletResponse\n    - The type javax.servlet.http.HttpServletResponse cannot be resolved. It is indirectly referenced from required .class files\n    - The type javax.servlet.http.HttpServletResponse cannot be resolved. It is indirectly referenced from required type org.apache.struts2.ServletActionContext \n</code></pre>\n<p>I tried using Jakarta plugin &quot;https://github.com/apache/struts-extras/blob/master/struts2-secure-jakarta-multipart-parser-plugin/README.md&quot;\nbut didn't able to resolve I'm currently upgrading my project to tomcat 10 and jdk 8 from tomcat 7 and jdk 7.</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1683014154,"post_id":76152780,"comment_id":134297991,"body_markdown":"Can you replace first the  `&amp;`  sign by `&amp;amp;`, and after successful mapping replace it back?","body":"Can you replace first the  <code>&amp;</code>  sign by <code>&amp;amp;</code>, and after successful mapping replace it back?"},{"owner":{"account_id":8396062,"reputation":595,"user_id":6303083,"accept_rate":50,"display_name":"Salman Shaikh"},"score":0,"creation_date":1683027428,"post_id":76152780,"comment_id":134300558,"body_markdown":"@Reporter the suggested solution works if I take my input XML as string first, encode it and then try to push/map in the XML. Here my problem is my API is directly taking input as XML only, so I want a solution where XMLElement itself handles such scenario","body":"@Reporter the suggested solution works if I take my input XML as string first, encode it and then try to push/map in the XML. Here my problem is my API is directly taking input as XML only, so I want a solution where XMLElement itself handles such scenario"},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1683028361,"post_id":76152780,"comment_id":134300731,"body_markdown":"Because you havn&#39;t posted an example of your xml, from a far view using the &amp; sign as value is actually wrong. Most parsers complaines about it. Generating a valid xml, &amp; signs must be replaced by &amp;amp; .","body":"Because you havn&#39;t posted an example of your xml, from a far view using the &amp; sign as value is actually wrong. Most parsers complaines about it. Generating a valid xml, &amp; signs must be replaced by &amp;amp; ."},{"owner":{"account_id":8396062,"reputation":595,"user_id":6303083,"accept_rate":50,"display_name":"Salman Shaikh"},"score":0,"creation_date":1683028443,"post_id":76152780,"comment_id":134300752,"body_markdown":"@Reporter so can we conclude that special characters should be escaped before giving to XML Mapper and there is no function/feature/library which will do this for me? Initially I thought since my variable is String the address one, XML take the entire string and map it to the String Variable or Tag","body":"@Reporter so can we conclude that special characters should be escaped before giving to XML Mapper and there is no function/feature/library which will do this for me? Initially I thought since my variable is String the address one, XML take the entire string and map it to the String Variable or Tag"},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1683028582,"post_id":76152780,"comment_id":134300778,"body_markdown":"Yes, I think so.","body":"Yes, I think so."}],"owner":{"account_id":8396062,"reputation":595,"user_id":6303083,"accept_rate":50,"display_name":"Salman Shaikh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683030877,"answer_count":0,"score":0,"last_activity_date":1683030937,"creation_date":1683013980,"question_id":76152780,"body_markdown":"I have defined the following Child Element Model for my XML:\r\n\r\n    package com.xmlmapper.www.model;\r\n    \r\n    import javax.xml.bind.annotation.XmlElement;\r\n    \r\n    import org.apache.axis.description.ElementDesc;\r\n    import org.apache.axis.description.FieldDesc;\r\n    \r\n    public class ApplicantAddressDetails  implements java.io.Serializable {\r\n        private java.lang.String addressSegmentTag;\r\n    \r\n        private java.lang.String length;\r\n    \r\n        private java.lang.String tag;\r\n    \r\n        private java.lang.String addressLine1FieldLength;\r\n    \r\n        private java.lang.String addressLine1;\r\n    \r\n        private java.lang.String addressLine2FieldLength;\r\n    \r\n        private java.lang.String addressLine2;\r\n    \r\n        private java.lang.String addressLine3FieldLength;\r\n    \r\n        private java.lang.String addressLine3;\r\n    \r\n        private java.lang.String addressLine4FieldLength;\r\n    \r\n        private java.lang.String addressLine4;\r\n    \r\n        private java.lang.String addressLine5FieldLength;\r\n    \r\n        private java.lang.String addressLine5;\r\n    \r\n        private java.lang.String stateCode;\r\n    \r\n        private java.lang.String pinCodeFieldLength;\r\n    \r\n        private java.lang.String pinCode;\r\n    \r\n        private java.lang.String addressCategory;\r\n    \r\n        public ApplicantAddressDetails() {\r\n        }\r\n    ........//next section of  code\t\r\n    }\r\n\r\n\r\nIf my address has **&amp;** keyword then my XML is not getting mapped.\r\nWhat needs to be done so that XML can be mapped automatically?\r\nWhat are all other characters for which I can face such errors?","title":"XML Escaping Issue","body":"<p>I have defined the following Child Element Model for my XML:</p>\n<pre><code>package com.xmlmapper.www.model;\n\nimport javax.xml.bind.annotation.XmlElement;\n\nimport org.apache.axis.description.ElementDesc;\nimport org.apache.axis.description.FieldDesc;\n\npublic class ApplicantAddressDetails  implements java.io.Serializable {\n    private java.lang.String addressSegmentTag;\n\n    private java.lang.String length;\n\n    private java.lang.String tag;\n\n    private java.lang.String addressLine1FieldLength;\n\n    private java.lang.String addressLine1;\n\n    private java.lang.String addressLine2FieldLength;\n\n    private java.lang.String addressLine2;\n\n    private java.lang.String addressLine3FieldLength;\n\n    private java.lang.String addressLine3;\n\n    private java.lang.String addressLine4FieldLength;\n\n    private java.lang.String addressLine4;\n\n    private java.lang.String addressLine5FieldLength;\n\n    private java.lang.String addressLine5;\n\n    private java.lang.String stateCode;\n\n    private java.lang.String pinCodeFieldLength;\n\n    private java.lang.String pinCode;\n\n    private java.lang.String addressCategory;\n\n    public ApplicantAddressDetails() {\n    }\n........//next section of  code \n}\n</code></pre>\n<p>If my address has <strong>&amp;</strong> keyword then my XML is not getting mapped.\nWhat needs to be done so that XML can be mapped automatically?\nWhat are all other characters for which I can face such errors?</p>\n"},{"tags":["java","nested-lists","json-deserialization","objectmapper","json-view"],"answers":[{"tags":[],"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683030690,"creation_date":1683026396,"answer_id":76154334,"question_id":76154230,"body_markdown":"There are two problems here. The first problem is based in `com.fasterxml.jackson.databind.deser.impl.MethodProperty` not reading the property value if a read method is present. So the deserialization for nested objects always starts with a `null` value and therefore constructs a new instance first.\r\n\r\nThe other problem is handling the collection elements that are already part of the list.\r\n\r\nTo solve the first problem do the following:\r\n - create an `com.fasterxml.jackson.databind.deser.SettableBeanProperty` implementation that does read the property value if a read method is present and then use that value as the basis for deserialization:\r\n```\r\npublic class DeepUpdatingMethodProperty extends SettableBeanProperty {\r\n\r\n    private final MethodProperty delegate;\r\n    private final Method propertyReader;\r\n\r\n    public DeepUpdatingMethodProperty(MethodProperty src, Method propertyReader) {\r\n        super(src);\r\n        this.delegate = src;\r\n        this.propertyReader = propertyReader;\r\n    }\r\n\r\n    @Override\r\n    public SettableBeanProperty withValueDeserializer(JsonDeserializer&lt;?&gt; deser) {\r\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withValueDeserializer(deser), propertyReader);\r\n    }\r\n\r\n    @Override\r\n    public SettableBeanProperty withName(PropertyName newName) {\r\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withName(newName), propertyReader);\r\n    }\r\n\r\n    @Override\r\n    public SettableBeanProperty withNullProvider(NullValueProvider nva) {\r\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withNullProvider(nva), propertyReader);\r\n    }\r\n\r\n    @Override\r\n    public AnnotatedMember getMember() {\r\n        return delegate.getMember();\r\n    }\r\n\r\n    @Override\r\n    public &lt;A extends Annotation&gt; A getAnnotation(Class&lt;A&gt; acls) {\r\n        return delegate.getAnnotation(acls);\r\n    }\r\n\r\n    @Override\r\n    public void deserializeAndSet(JsonParser p, DeserializationContext ctxt, Object instance) throws IOException {\r\n        deserializeSetAndReturn(p, ctxt, instance);\r\n    }\r\n\r\n    @Override\r\n    public Object deserializeSetAndReturn(JsonParser p, DeserializationContext ctxt, Object instance)\r\n            throws IOException {\r\n        if (instance != null &amp;&amp; !p.hasToken(JsonToken.VALUE_NULL)) {\r\n            Object readValue;\r\n            try {\r\n                readValue = readValueFromInstance(instance);\r\n            } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {\r\n                _throwAsIOE(p, e, instance);\r\n                return instance;\r\n            }\r\n            if (readValue != null) {\r\n                return deepUpdateDeserializeSetAndReturn(p, ctxt, instance, readValue);\r\n            }\r\n        }\r\n        return delegate.deserializeSetAndReturn(p, ctxt, instance);\r\n    }\r\n\r\n    private Object deepUpdateDeserializeSetAndReturn(JsonParser p, DeserializationContext ctxt, Object instance,\r\n            Object readValue) throws IOException, JacksonException, JsonMappingException {\r\n        Object value;\r\n        if (_valueTypeDeserializer == null) {\r\n            value = _valueDeserializer.deserialize(p, ctxt, readValue);\r\n            if (value == null) {\r\n                if (NullsConstantProvider.isSkipper(_nullProvider)) {\r\n                    return instance;\r\n                }\r\n                value = _nullProvider.getNullValue(ctxt);\r\n            }\r\n        } else {\r\n            value = _valueDeserializer.deserializeWithType(p, ctxt, _valueTypeDeserializer, readValue);\r\n        }\r\n        return setAndReturn(instance, value);\r\n    }\r\n\r\n    private Object readValueFromInstance(Object instance)\r\n            throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {\r\n        return propertyReader.invoke(instance);\r\n    }\r\n\r\n    @Override\r\n    public void set(Object instance, Object value) throws IOException {\r\n        delegate.set(instance, value);\r\n    }\r\n\r\n    @Override\r\n    public Object setAndReturn(Object instance, Object value) throws IOException {\r\n        return delegate.setAndReturn(instance, value);\r\n    }\r\n}\r\n```\r\n - Use a `com.fasterxml.jackson.databind.deser.BeanDeserializerModifier` to modify the properties of a `com.fasterxml.jackson.databind.deser.BeanDeserializer` to use the above implementation if a property read method is present\r\n```\r\npublic class DeepUpdatingDeserializerModifier extends BeanDeserializerModifier {\r\n    \r\n    @Override\r\n    public JsonDeserializer&lt;?&gt; modifyDeserializer(DeserializationConfig config, BeanDescription beanDesc,\r\n            JsonDeserializer&lt;?&gt; deserializer) {\r\n        if(deserializer instanceof BeanDeserializer beanDeserializer) {\r\n            enableDeepUpdateForReadableProperties(beanDesc, beanDeserializer);\r\n        }\r\n        return deserializer;\r\n    }\r\n\r\n    private void enableDeepUpdateForReadableProperties(BeanDescription beanDesc, BeanDeserializer beanDeserializer) {\r\n        Iterator&lt;SettableBeanProperty&gt; iter = beanDeserializer.properties();\r\n        while(iter.hasNext()) {\r\n            SettableBeanProperty property = iter.next();\r\n            if (property instanceof MethodProperty methodProperty) {\r\n                Method propertyReader = getPropertyReader(methodProperty, beanDesc);\r\n                if (propertyReader != null) {\r\n                    DeepUpdatingMethodProperty adoptedProperty = new DeepUpdatingMethodProperty(methodProperty, propertyReader);\r\n                    beanDeserializer.replaceProperty(methodProperty, adoptedProperty);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private static Method getPropertyReader(MethodProperty src, BeanDescription beanDesc) {\r\n        BeanInfo beanInfo;\r\n        Class&lt;?&gt; propertyRawClass = beanDesc.getBeanClass();\r\n        try {\r\n            beanInfo = Introspector.getBeanInfo(propertyRawClass);\r\n        } catch (IntrospectionException e) {\r\n            throw new IllegalStateException(MessageFormat.format(&quot;Could not introspect {0}.&quot;, propertyRawClass), e);\r\n        }\r\n        return Arrays.asList(beanInfo.getPropertyDescriptors()).stream()\r\n                .filter(e -&gt; Objects.equals(src.getName(), e.getName())).map(PropertyDescriptor::getReadMethod)\r\n                .findFirst().orElse(null);\r\n    }\r\n}\r\n```\r\nNote that this will only work for method properties and not for constructor properties for example.\r\n\r\nRegarding the second problem I changed collection deserialization to something different so that instead of a plain json representation I have something like this to deserialize the collection from:\r\n```\r\n{\r\n    &quot;someListProperty&quot;: {\r\n        &quot;collectionModifications&quot;: [{\r\n                &quot;_type&quot;: &quot;removeIf&quot;,\r\n                &quot;predicate&quot;: {\r\n                    &quot;_type&quot;: &quot;hasPropertyWithValue&quot;,\r\n                    &quot;property&quot;: &quot;foo&quot;,\r\n                    &quot;valueMatcher&quot;: {\r\n                        &quot;_type&quot;: &quot;or&quot;,\r\n                        &quot;matchers&quot;: [{\r\n                                &quot;_type&quot;: &quot;equalTo&quot;,\r\n                                &quot;value&quot;: &quot;foobar&quot;\r\n                            }, {\r\n                                &quot;_type&quot;: &quot;startsWith&quot;,\r\n                                &quot;prefix&quot;: &quot;foo.&quot;\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            }, {\r\n                &quot;_type&quot;: &quot;add&quot;,\r\n                &quot;elements&quot;: [{\r\n                        &quot;foo&quot;: &quot;bar&quot;\r\n                    }, {\r\n                        &quot;foo&quot;: &quot;baz&quot;\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\nThe above example will remove values with property `foo` equal to `foobar` or starting with `foo.` from the list first and then add the values specified in `elements`. You could implement your own `com.fasterxml.jackson.databind.deser.std.CollectionDeserializer` based on your needs. However I found that working with maps instead of lists is easier in such cases but I hadn&#39;t such a use case in my example yet. In your example you could use the `name` property as the map key.\r\n","title":"Objectmapper.readerforupdating not working for nested objects","body":"<p>There are two problems here. The first problem is based in <code>com.fasterxml.jackson.databind.deser.impl.MethodProperty</code> not reading the property value if a read method is present. So the deserialization for nested objects always starts with a <code>null</code> value and therefore constructs a new instance first.</p>\n<p>The other problem is handling the collection elements that are already part of the list.</p>\n<p>To solve the first problem do the following:</p>\n<ul>\n<li>create an <code>com.fasterxml.jackson.databind.deser.SettableBeanProperty</code> implementation that does read the property value if a read method is present and then use that value as the basis for deserialization:</li>\n</ul>\n<pre><code>public class DeepUpdatingMethodProperty extends SettableBeanProperty {\n\n    private final MethodProperty delegate;\n    private final Method propertyReader;\n\n    public DeepUpdatingMethodProperty(MethodProperty src, Method propertyReader) {\n        super(src);\n        this.delegate = src;\n        this.propertyReader = propertyReader;\n    }\n\n    @Override\n    public SettableBeanProperty withValueDeserializer(JsonDeserializer&lt;?&gt; deser) {\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withValueDeserializer(deser), propertyReader);\n    }\n\n    @Override\n    public SettableBeanProperty withName(PropertyName newName) {\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withName(newName), propertyReader);\n    }\n\n    @Override\n    public SettableBeanProperty withNullProvider(NullValueProvider nva) {\n        return new DeepUpdatingMethodProperty((MethodProperty) delegate.withNullProvider(nva), propertyReader);\n    }\n\n    @Override\n    public AnnotatedMember getMember() {\n        return delegate.getMember();\n    }\n\n    @Override\n    public &lt;A extends Annotation&gt; A getAnnotation(Class&lt;A&gt; acls) {\n        return delegate.getAnnotation(acls);\n    }\n\n    @Override\n    public void deserializeAndSet(JsonParser p, DeserializationContext ctxt, Object instance) throws IOException {\n        deserializeSetAndReturn(p, ctxt, instance);\n    }\n\n    @Override\n    public Object deserializeSetAndReturn(JsonParser p, DeserializationContext ctxt, Object instance)\n            throws IOException {\n        if (instance != null &amp;&amp; !p.hasToken(JsonToken.VALUE_NULL)) {\n            Object readValue;\n            try {\n                readValue = readValueFromInstance(instance);\n            } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {\n                _throwAsIOE(p, e, instance);\n                return instance;\n            }\n            if (readValue != null) {\n                return deepUpdateDeserializeSetAndReturn(p, ctxt, instance, readValue);\n            }\n        }\n        return delegate.deserializeSetAndReturn(p, ctxt, instance);\n    }\n\n    private Object deepUpdateDeserializeSetAndReturn(JsonParser p, DeserializationContext ctxt, Object instance,\n            Object readValue) throws IOException, JacksonException, JsonMappingException {\n        Object value;\n        if (_valueTypeDeserializer == null) {\n            value = _valueDeserializer.deserialize(p, ctxt, readValue);\n            if (value == null) {\n                if (NullsConstantProvider.isSkipper(_nullProvider)) {\n                    return instance;\n                }\n                value = _nullProvider.getNullValue(ctxt);\n            }\n        } else {\n            value = _valueDeserializer.deserializeWithType(p, ctxt, _valueTypeDeserializer, readValue);\n        }\n        return setAndReturn(instance, value);\n    }\n\n    private Object readValueFromInstance(Object instance)\n            throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {\n        return propertyReader.invoke(instance);\n    }\n\n    @Override\n    public void set(Object instance, Object value) throws IOException {\n        delegate.set(instance, value);\n    }\n\n    @Override\n    public Object setAndReturn(Object instance, Object value) throws IOException {\n        return delegate.setAndReturn(instance, value);\n    }\n}\n</code></pre>\n<ul>\n<li>Use a <code>com.fasterxml.jackson.databind.deser.BeanDeserializerModifier</code> to modify the properties of a <code>com.fasterxml.jackson.databind.deser.BeanDeserializer</code> to use the above implementation if a property read method is present</li>\n</ul>\n<pre><code>public class DeepUpdatingDeserializerModifier extends BeanDeserializerModifier {\n    \n    @Override\n    public JsonDeserializer&lt;?&gt; modifyDeserializer(DeserializationConfig config, BeanDescription beanDesc,\n            JsonDeserializer&lt;?&gt; deserializer) {\n        if(deserializer instanceof BeanDeserializer beanDeserializer) {\n            enableDeepUpdateForReadableProperties(beanDesc, beanDeserializer);\n        }\n        return deserializer;\n    }\n\n    private void enableDeepUpdateForReadableProperties(BeanDescription beanDesc, BeanDeserializer beanDeserializer) {\n        Iterator&lt;SettableBeanProperty&gt; iter = beanDeserializer.properties();\n        while(iter.hasNext()) {\n            SettableBeanProperty property = iter.next();\n            if (property instanceof MethodProperty methodProperty) {\n                Method propertyReader = getPropertyReader(methodProperty, beanDesc);\n                if (propertyReader != null) {\n                    DeepUpdatingMethodProperty adoptedProperty = new DeepUpdatingMethodProperty(methodProperty, propertyReader);\n                    beanDeserializer.replaceProperty(methodProperty, adoptedProperty);\n                }\n            }\n        }\n    }\n\n    private static Method getPropertyReader(MethodProperty src, BeanDescription beanDesc) {\n        BeanInfo beanInfo;\n        Class&lt;?&gt; propertyRawClass = beanDesc.getBeanClass();\n        try {\n            beanInfo = Introspector.getBeanInfo(propertyRawClass);\n        } catch (IntrospectionException e) {\n            throw new IllegalStateException(MessageFormat.format(&quot;Could not introspect {0}.&quot;, propertyRawClass), e);\n        }\n        return Arrays.asList(beanInfo.getPropertyDescriptors()).stream()\n                .filter(e -&gt; Objects.equals(src.getName(), e.getName())).map(PropertyDescriptor::getReadMethod)\n                .findFirst().orElse(null);\n    }\n}\n</code></pre>\n<p>Note that this will only work for method properties and not for constructor properties for example.</p>\n<p>Regarding the second problem I changed collection deserialization to something different so that instead of a plain json representation I have something like this to deserialize the collection from:</p>\n<pre><code>{\n    &quot;someListProperty&quot;: {\n        &quot;collectionModifications&quot;: [{\n                &quot;_type&quot;: &quot;removeIf&quot;,\n                &quot;predicate&quot;: {\n                    &quot;_type&quot;: &quot;hasPropertyWithValue&quot;,\n                    &quot;property&quot;: &quot;foo&quot;,\n                    &quot;valueMatcher&quot;: {\n                        &quot;_type&quot;: &quot;or&quot;,\n                        &quot;matchers&quot;: [{\n                                &quot;_type&quot;: &quot;equalTo&quot;,\n                                &quot;value&quot;: &quot;foobar&quot;\n                            }, {\n                                &quot;_type&quot;: &quot;startsWith&quot;,\n                                &quot;prefix&quot;: &quot;foo.&quot;\n                            }\n                        ]\n                    }\n                }\n            }, {\n                &quot;_type&quot;: &quot;add&quot;,\n                &quot;elements&quot;: [{\n                        &quot;foo&quot;: &quot;bar&quot;\n                    }, {\n                        &quot;foo&quot;: &quot;baz&quot;\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre>\n<p>The above example will remove values with property <code>foo</code> equal to <code>foobar</code> or starting with <code>foo.</code> from the list first and then add the values specified in <code>elements</code>. You could implement your own <code>com.fasterxml.jackson.databind.deser.std.CollectionDeserializer</code> based on your needs. However I found that working with maps instead of lists is easier in such cases but I hadn't such a use case in my example yet. In your example you could use the <code>name</code> property as the map key.</p>\n"}],"owner":{"account_id":5547531,"reputation":13,"user_id":4401722,"display_name":"Eni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683030690,"creation_date":1683025635,"question_id":76154230,"body_markdown":"I have a problem with Objectmapper.readerforupdating using different write permissions with the help of views, it is working fine on main entity but not on nested objects. I have the following example:\r\n\r\n```\r\npublic class A {\r\n\r\n    @JsonView(value={WritePermission.Admin})\r\n    private String name;\r\n    \r\n    @JsonView(value={WritePermission.User})\r\n    private String property;\r\n    \r\n    @JsonView(value={WritePermission.User})\r\n    private List&lt;B&gt; list;\r\n}\r\n\r\npublic class B {\r\n    @JsonView(value={WritePermission.Admin})\r\n    private String name;\r\n    \r\n    @JsonView(value={WritePermission.User})\r\n    private String property;\r\n    \r\n}\r\n\r\npublic class WritePermission {\r\n    public WritePermission() {\r\n    }\r\n   \r\n     public static class Admin extends WritePermission.User {\r\n        public Admin() {\r\n        }\r\n    }\r\n\r\n    public static class User {\r\n        public User() {\r\n        }\r\n    }\r\n}    \r\n```\r\n\r\nFor deserialization I use this: objectMapper.readerForUpdating(initialEntityOfAClass).withView(WritePermission.User.class).forType(A.class).readValue(json)\r\nand also tried with this but I get the same result:\r\nObjectReader objectReader = objectMapper.readerForUpdating(initialEntityOfAClass);\r\n\r\nWhen I want to deserialize a json with a User write role, I would like to overwrite only the attributes where I have permission, this works fine for attributes from class A (in the name attribute remains the old value cuz I do not have the rights to update, property attribute is updated) but it does not work for the list of B items - instead of changing the B objects just like for A (name remains old value, property is updated from json) creates new objects for the list of B and name remains null because as a User I do not have a permission to write values to name attribute. If I set @JsonMerge on the B list, instead of merge I am getting the old (the ones where the name is already set but property not changed) and the newly created objects (the ones where the property changed but with name=null) in one list... Can anyone help me here, please?","title":"Objectmapper.readerforupdating not working for nested objects","body":"<p>I have a problem with Objectmapper.readerforupdating using different write permissions with the help of views, it is working fine on main entity but not on nested objects. I have the following example:</p>\n<pre><code>public class A {\n\n    @JsonView(value={WritePermission.Admin})\n    private String name;\n    \n    @JsonView(value={WritePermission.User})\n    private String property;\n    \n    @JsonView(value={WritePermission.User})\n    private List&lt;B&gt; list;\n}\n\npublic class B {\n    @JsonView(value={WritePermission.Admin})\n    private String name;\n    \n    @JsonView(value={WritePermission.User})\n    private String property;\n    \n}\n\npublic class WritePermission {\n    public WritePermission() {\n    }\n   \n     public static class Admin extends WritePermission.User {\n        public Admin() {\n        }\n    }\n\n    public static class User {\n        public User() {\n        }\n    }\n}    \n</code></pre>\n<p>For deserialization I use this: objectMapper.readerForUpdating(initialEntityOfAClass).withView(WritePermission.User.class).forType(A.class).readValue(json)\nand also tried with this but I get the same result:\nObjectReader objectReader = objectMapper.readerForUpdating(initialEntityOfAClass);</p>\n<p>When I want to deserialize a json with a User write role, I would like to overwrite only the attributes where I have permission, this works fine for attributes from class A (in the name attribute remains the old value cuz I do not have the rights to update, property attribute is updated) but it does not work for the list of B items - instead of changing the B objects just like for A (name remains old value, property is updated from json) creates new objects for the list of B and name remains null because as a User I do not have a permission to write values to name attribute. If I set @JsonMerge on the B list, instead of merge I am getting the old (the ones where the name is already set but property not changed) and the newly created objects (the ones where the property changed but with name=null) in one list... Can anyone help me here, please?</p>\n"},{"tags":["java","lambda","java-8","method-reference"],"answers":[{"comments":[{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1457618657,"post_id":35914912,"comment_id":59495619,"body_markdown":"one small query. You have written :   Supplier&lt;String&gt; supplier = t2::method; and provided the comment as :  // the supplier is bound to t1   . Is it typo error Or am I not understanding properly?","body":"one small query. You have written :   Supplier&lt;String&gt; supplier = t2::method; and provided the comment as :  // the supplier is bound to t1   . Is it typo error Or am I not understanding properly?"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1457618686,"creation_date":1457608623,"answer_id":35914912,"question_id":35914775,"body_markdown":"Basically, unbound receivers allow you to use instance methods as if they were static methods with a first parameter of the declaring type - so you can use them as functions by passing in whatever instance you want. With a bound receiver, the &quot;target&quot; instance is effectively part of the function.\r\n\r\nAn example might make this clearer:\r\n\r\n    import java.util.function.*;\r\n    \r\n    public class Test {\r\n        \r\n        private final String name;\r\n        \r\n        public Test(String name) {\r\n            this.name = name;\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            Test t1 = new Test(&quot;t1&quot;);\r\n            Test t2 = new Test(&quot;t2&quot;);\r\n            \r\n            Supplier&lt;String&gt; supplier = t2::method;\r\n            Function&lt;Test, String&gt; function = Test::method;\r\n\r\n            // No need to say which instance to call it on -\r\n            // the supplier is bound to t2            \r\n            System.out.println(supplier.get());\r\n\r\n            // The function is unbound, so you need to specify\r\n            // which instance to call it on\r\n            System.out.println(function.apply(t1));\r\n            System.out.println(function.apply(t2));\r\n        }\r\n        \r\n        public String method() {\r\n            return name;\r\n        }\r\n    }","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>Basically, unbound receivers allow you to use instance methods as if they were static methods with a first parameter of the declaring type - so you can use them as functions by passing in whatever instance you want. With a bound receiver, the \"target\" instance is effectively part of the function.</p>\n\n<p>An example might make this clearer:</p>\n\n<pre><code>import java.util.function.*;\n\npublic class Test {\n\n    private final String name;\n\n    public Test(String name) {\n        this.name = name;\n    }\n\n    public static void main(String[] args) {\n        Test t1 = new Test(\"t1\");\n        Test t2 = new Test(\"t2\");\n\n        Supplier&lt;String&gt; supplier = t2::method;\n        Function&lt;Test, String&gt; function = Test::method;\n\n        // No need to say which instance to call it on -\n        // the supplier is bound to t2            \n        System.out.println(supplier.get());\n\n        // The function is unbound, so you need to specify\n        // which instance to call it on\n        System.out.println(function.apply(t1));\n        System.out.println(function.apply(t2));\n    }\n\n    public String method() {\n        return name;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457608669,"creation_date":1457608669,"answer_id":35914930,"question_id":35914775,"body_markdown":"When you want the method to be executed for a specific instance of some class, you use a bound receiver. \r\n\r\nFor example :\r\n\r\n    Stream.of(&quot;x&quot;,&quot;y&quot;).forEach(System.out::println);\r\n\r\nwill execute `println` on a sepcific instance of `PrintStream` - the `System.out` instance. Therefore `System.out.println(&quot;x&quot;)` and `System.out.println(&quot;y&quot;)` will be executed as a result of passing that method reference to `forEach`.\r\n\r\nOn the other hand, if you want the method to be executed for an unspecified instance of a class, you can use a unbound receiver.\r\n\r\nFor example :\r\n\r\n    Stream.of(&quot;x&quot;,&quot;y&quot;,&quot;&quot;).filter(String::isEmpty);\r\n\r\nwill execute `isEmpty()` on each of the `String` instances of the Stream - i.e. `&quot;x&quot;.isEmpty()`, `&quot;y&quot;.isEmpty()` and `&quot;&quot;.isEmpty()`.","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>When you want the method to be executed for a specific instance of some class, you use a bound receiver. </p>\n\n<p>For example :</p>\n\n<pre><code>Stream.of(\"x\",\"y\").forEach(System.out::println);\n</code></pre>\n\n<p>will execute <code>println</code> on a sepcific instance of <code>PrintStream</code> - the <code>System.out</code> instance. Therefore <code>System.out.println(\"x\")</code> and <code>System.out.println(\"y\")</code> will be executed as a result of passing that method reference to <code>forEach</code>.</p>\n\n<p>On the other hand, if you want the method to be executed for an unspecified instance of a class, you can use a unbound receiver.</p>\n\n<p>For example :</p>\n\n<pre><code>Stream.of(\"x\",\"y\",\"\").filter(String::isEmpty);\n</code></pre>\n\n<p>will execute <code>isEmpty()</code> on each of the <code>String</code> instances of the Stream - i.e. <code>\"x\".isEmpty()</code>, <code>\"y\".isEmpty()</code> and <code>\"\".isEmpty()</code>.</p>\n"},{"comments":[{"owner":{"account_id":3780741,"reputation":93,"user_id":3140293,"display_name":"Randomizer"},"score":0,"creation_date":1598146427,"post_id":35915104,"comment_id":112362267,"body_markdown":"Can an unBound receiver ever be a method that takes parameter(s)?","body":"Can an unBound receiver ever be a method that takes parameter(s)?"},{"owner":{"account_id":4316093,"reputation":3757,"user_id":3525886,"accept_rate":75,"display_name":"Johnny Willer"},"score":0,"creation_date":1598259108,"post_id":35915104,"comment_id":112388965,"body_markdown":"if the method is called from the lambda argument, and the parameter is also lambda argument then yes. See the second example `ClassName::instanceMethod`","body":"if the method is called from the lambda argument, and the parameter is also lambda argument then yes. See the second example <code>ClassName::instanceMethod</code>"},{"owner":{"account_id":318931,"reputation":2979,"user_id":636398,"accept_rate":50,"display_name":"Ida"},"score":0,"creation_date":1663826420,"post_id":35915104,"comment_id":130331193,"body_markdown":"For unbound receivers, &quot;... supplied as one of the lambda&#39;s parameters&quot;: should &quot;one of&quot; be changed to &quot;the first of&quot;?","body":"For unbound receivers, &quot;... supplied as one of the lambda&#39;s parameters&quot;: should &quot;one of&quot; be changed to &quot;the first of&quot;?"}],"tags":[],"owner":{"account_id":4316093,"reputation":3757,"user_id":3525886,"accept_rate":75,"display_name":"Johnny Willer"},"comment_count":3,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1683030645,"creation_date":1457609125,"answer_id":35915104,"question_id":35914775,"body_markdown":"The idea of the unbound receiver such as `String::length` is you&#39;re referring to a method of an object that **will be supplied as one of the lambda&#39;s parameters**. For example, the lambda expression `(String s) -&gt; s.toUpperCase()` can be rewritten as `String::toUpperCase`. \r\n\r\nBut bounded refers to a situation when you&#39;re calling a method in a\r\nlambda to an **external object that already exists**. For example, the lambda expression `() -&gt;\r\nexpensiveTransaction.getValue()` can be rewritten as `expensiveTransaction::getValue`.\r\n\r\nSituations for three different ways of method reference \r\n\r\n- `(args) -&gt; ClassName.staticMethod(args)`\r\ncan be `ClassName::staticMethod` // This is static (you can think as unBound also)\r\n\r\n- `(arg0, rest) -&gt; arg0.instanceMethod(rest)`\r\ncan be `ClassName::instanceMethod` (`arg0` is of type `ClassName`) // This is unbound\r\n\r\n- `(args) -&gt; expr.instanceMethod(args)`\r\ncan be `expr::instanceMethod` // This is bound\r\n\r\nAnswer retrieved from *Java 8 in Action* book","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>The idea of the unbound receiver such as <code>String::length</code> is you're referring to a method of an object that <strong>will be supplied as one of the lambda's parameters</strong>. For example, the lambda expression <code>(String s) -&gt; s.toUpperCase()</code> can be rewritten as <code>String::toUpperCase</code>.</p>\n<p>But bounded refers to a situation when you're calling a method in a\nlambda to an <strong>external object that already exists</strong>. For example, the lambda expression <code>() -&gt; expensiveTransaction.getValue()</code> can be rewritten as <code>expensiveTransaction::getValue</code>.</p>\n<p>Situations for three different ways of method reference</p>\n<ul>\n<li><p><code>(args) -&gt; ClassName.staticMethod(args)</code>\ncan be <code>ClassName::staticMethod</code> // This is static (you can think as unBound also)</p>\n</li>\n<li><p><code>(arg0, rest) -&gt; arg0.instanceMethod(rest)</code>\ncan be <code>ClassName::instanceMethod</code> (<code>arg0</code> is of type <code>ClassName</code>) // This is unbound</p>\n</li>\n<li><p><code>(args) -&gt; expr.instanceMethod(args)</code>\ncan be <code>expr::instanceMethod</code> // This is bound</p>\n</li>\n</ul>\n<p>Answer retrieved from <em>Java 8 in Action</em> book</p>\n"},{"comments":[{"owner":{"account_id":5974803,"reputation":565,"user_id":4696064,"display_name":"Gabriel Hernandez"},"score":0,"creation_date":1537465139,"post_id":50893121,"comment_id":91804493,"body_markdown":"I still would like to know what is the equivalence of method reference for a map merge , for ex. see this question https://stackoverflow.com/questions/52430447/how-to-use-method-reference-in-java-8-for-map-merge","body":"I still would like to know what is the equivalence of method reference for a map merge , for ex. see this question <a href=\"https://stackoverflow.com/questions/52430447/how-to-use-method-reference-in-java-8-for-map-merge\" title=\"how to use method reference in java 8 for map merge\">stackoverflow.com/questions/52430447/&hellip;</a>"}],"tags":[],"owner":{"account_id":970000,"reputation":1787,"user_id":992706,"accept_rate":63,"display_name":"Bharath"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667227822,"creation_date":1529200952,"answer_id":50893121,"question_id":35914775,"body_markdown":"Along with the excellent answers from above. \r\nThanks to the wonderful explanation by joshua bloch, effective java third edition. I was finally able to wrap my head around what bounded and unbounded reference means. \r\n\r\n\r\n\r\n&gt; In bounded reference, the receiving object is specified in the method\r\n&gt; reference. Bound references are similar in nature to static\r\n&gt; references: the function object takes the same arguments as the\r\n&gt; referenced method.\r\n&gt; \r\n&gt; In unbound references, the receiving object is specified when the\r\n&gt; function object is applied, via an additional parameter before the\r\n&gt; method’s declared parameters. Unbound references are often used as\r\n&gt; mapping and filter functions in stream pipelines\r\n&gt; \r\n&gt; Finally, there are two kinds of constructor references, for classes\r\n&gt; and arrays. Constructor references serve as factory objects.\r\n\r\n    Type of Method Ref |    Example              |    Lambda Equivalent\r\n    ───────────────────┼─────────────────────────┼───────────────────────────────\r\n    Static             | Integer::parseInt       |  str -&gt; Integer.parseInt(str)\r\n    Bound              | Instant.now()::isAfter  |  Instant then = Instant.now(); \r\n                       |                         |  t -&gt; then.isAfter(t)\r\n    Unbound            | String::toLowerCase     |  str -&gt; str.toLowerCase()\r\n    Class Constructor  | TreeMap&lt;K,V&gt;::new       |  () -&gt; new TreeMap\r\n    Array Constructor  | int[]::new              |  len -&gt; new int[len]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>Along with the excellent answers from above.\nThanks to the wonderful explanation by joshua bloch, effective java third edition. I was finally able to wrap my head around what bounded and unbounded reference means.</p>\n<blockquote>\n<p>In bounded reference, the receiving object is specified in the method\nreference. Bound references are similar in nature to static\nreferences: the function object takes the same arguments as the\nreferenced method.</p>\n<p>In unbound references, the receiving object is specified when the\nfunction object is applied, via an additional parameter before the\nmethod’s declared parameters. Unbound references are often used as\nmapping and filter functions in stream pipelines</p>\n<p>Finally, there are two kinds of constructor references, for classes\nand arrays. Constructor references serve as factory objects.</p>\n</blockquote>\n<pre><code>Type of Method Ref |    Example              |    Lambda Equivalent\n───────────────────┼─────────────────────────┼───────────────────────────────\nStatic             | Integer::parseInt       |  str -&gt; Integer.parseInt(str)\nBound              | Instant.now()::isAfter  |  Instant then = Instant.now(); \n                   |                         |  t -&gt; then.isAfter(t)\nUnbound            | String::toLowerCase     |  str -&gt; str.toLowerCase()\nClass Constructor  | TreeMap&lt;K,V&gt;::new       |  () -&gt; new TreeMap\nArray Constructor  | int[]::new              |  len -&gt; new int[len]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":427657,"reputation":2580,"user_id":809536,"accept_rate":80,"display_name":"ZiglioUK"},"score":0,"creation_date":1543622568,"post_id":53566533,"comment_id":93998783,"body_markdown":"I guess it could have been Brian Goetz but I can&#39;t remember sorry","body":"I guess it could have been Brian Goetz but I can&#39;t remember sorry"},{"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"score":3,"creation_date":1601663670,"post_id":53566533,"comment_id":113486104,"body_markdown":"Devoxx FR - Effective Java, Third Edition Keepin&#39; it Effective (J. Bloch) - https://youtu.be/hSfylUXhpkA?t=833","body":"Devoxx FR - Effective Java, Third Edition Keepin&#39; it Effective (J. Bloch) - <a href=\"https://youtu.be/hSfylUXhpkA?t=833\" rel=\"nofollow noreferrer\">youtu.be/hSfylUXhpkA?t=833</a>"}],"tags":[],"owner":{"account_id":427657,"reputation":2580,"user_id":809536,"accept_rate":80,"display_name":"ZiglioUK"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1543622561,"creation_date":1543622561,"answer_id":53566533,"question_id":35914775,"body_markdown":"I&#39;ve captured this from a recent presentation\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/DSnZ5.png","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>I've captured this from a recent presentation</p>\n\n<p><a href=\"https://i.stack.imgur.com/DSnZ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DSnZ5.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":11904778,"reputation":375,"user_id":8711684,"display_name":"Ray Eldath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565638463,"creation_date":1565638463,"answer_id":57467263,"question_id":35914775,"body_markdown":"Here&#39;s an example:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    // unbound\r\n    UnaryOperator&lt;String&gt; u = String::toUpperCase;\r\n    System.out.println(u.apply(&quot;hello&quot;));\r\n    \r\n    // bound\r\n    String a = &quot;hello&quot;;\r\n    Supplier&lt;String&gt; r = a::toUpperCase;\r\n    System.out.println(r.get());\r\n}\r\n```\r\n\r\nwhich will output two lines of `HELLO`.","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>Here's an example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    // unbound\n    UnaryOperator&lt;String&gt; u = String::toUpperCase;\n    System.out.println(u.apply(\"hello\"));\n\n    // bound\n    String a = \"hello\";\n    Supplier&lt;String&gt; r = a::toUpperCase;\n    System.out.println(r.get());\n}\n</code></pre>\n\n<p>which will output two lines of <code>HELLO</code>.</p>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682247140,"creation_date":1682247140,"answer_id":76084414,"question_id":35914775,"body_markdown":"A very good article i found [here](https://www.infoworld.com/article/2946534/java-101-the-essential-java-language-features-tour-part-7.html):\r\n\r\n### References to bound non-static methods\r\nA bound non-static method reference refers to a non-static method that&#39;s bound to a receiver object. Its syntax is objectName::instanceMethodName, where objectName identifies the receiver and instanceMethodName identifies the instance method. An example is s::trim. Listing 2 demonstrates a bound non-static method reference.\r\n\r\nListing 2. MRDemo version 2: A bound non-static method reference\r\n\r\n    import java.util.function.Supplier;\r\n    \r\n    public class MRDemo\r\n    {\r\n       public static void main(String[] args)\r\n       {\r\n          String s = &quot;The quick brown fox jumped over the lazy dog&quot;;\r\n          print(s::length);\r\n          print(() -&gt; s.length());\r\n          print(new Supplier&lt;Integer&gt;()\r\n          {\r\n             @Override\r\n             public Integer get()\r\n             {\r\n                return s.length(); // closes over s\r\n             }\r\n          });\r\n       }\r\n    \r\n       public static void print(Supplier&lt;Integer&gt; supplier)\r\n       {\r\n          System.out.println(supplier.get());\r\n       }\r\n    }\r\n\r\nListing 2&#39;s main() method assigns a string to String variable s and then invokes the print() class method with functionality to obtain the string&#39;s length as this method&#39;s argument. print() is invoked in method reference (s::length -- length() is bound to s), equivalent lambda, and equivalent anonymous class contexts.\r\n\r\nI&#39;ve defined print() to use the java.util.function.Supplier predefined functional interface, whose get() method returns a supplier of results. In this case, the Supplier instance passed to print() implements its get() method to return s.length(); print() outputs this length.\r\n\r\ns::length introduces a closure that closes over s. You can see this more clearly in the lambda example. Because the lambda has no arguments, the value of s is only available from the enclosing scope. Therefore, the lambda body is a closure that closes over s. The anonymous class example makes this even clearer.\r\n\r\nCompile Listing 2 and run the application. You&#39;ll observe the following output:\r\n\r\n\r\n    44\r\n    44\r\n    44\r\n\r\n### References to unbound non-static methods\r\nAn unbound non-static method reference refers to a non-static method that&#39;s not bound to a receiver object. Its syntax is className::instanceMethodName, where className identifies the class that declares the instance method and instanceMethodName identifies the instance method. An example is String::toLowerCase.\r\n\r\nString::toLowerCase is an unbound non-static method reference that identifies the non-static String toLowerCase() method of the String class. However, because a non-static method still requires a receiver object (in this example a String object, which is used to invoke toLowerCase() via the method reference), the receiver object is created by the virtual machine. toLowerCase() will be invoked on this object. String::toLowerCase specifies a method that takes a single String argument, which is the receiver object, and returns a String result. String::toLowerCase() is equivalent to lambda (String s) -&gt; { return s.toLowerCase(); }.\r\n\r\nListing 3 demonstrates this unbound non-static method reference.\r\n\r\nListing 3. MRDemo version 3: Unbound non-static method reference\r\n\r\n    import java.util.function.Function;\r\n    \r\n    public class MRDemo\r\n    {\r\n       public static void main(String[] args)\r\n       {\r\n          print(String::toLowerCase, &quot;STRING TO LOWERCASE&quot;);\r\n          print(s -&gt; s.toLowerCase(), &quot;STRING TO LOWERCASE&quot;);\r\n          print(new Function&lt;String, String&gt;()\r\n          {\r\n             @Override\r\n             public String apply(String s) // receives argument in parameter s;\r\n             {                             // doesn&#39;t need to close over s\r\n                return s.toLowerCase();\r\n             }\r\n          }, &quot;STRING TO LOWERCASE&quot;);\r\n       }\r\n    \r\n       public static void print(Function&lt;String, String&gt; function, String\r\n    s)\r\n       {\r\n          System.out.println(function.apply(s));\r\n       }\r\n    }\r\n\r\nListing 3&#39;s main() method invokes the print() class method with functionality to convert a string to lowercase along with the string to be converted as the method&#39;s arguments. print() is invoked in method reference (String::toLowerCase -- toLowerCase() isn&#39;t bound to a user-specified object), equivalent lambda, and equivalent anonymous class contexts.\r\n\r\nI&#39;ve defined print() to use the java.util.function.Function predefined functional interface, which represents a function that accepts one argument and produces a result. In this case, the Function instance passed to print() implements its R apply(T t) method to return s.toLowerCase(); print() outputs this string.\r\n\r\nAlthough the String part of String::toLowerCase makes it look like a class is being referenced, only an instance of this class is referenced. The anonymous class example makes this fact more obvious. Note that the anonymous class example shows that the lambda receives an argument; it doesn&#39;t close over parameter s and is therefore not a closure.\r\n\r\nCompile Listing 3 and run the application. You&#39;ll observe the following output:\r\n\r\n\r\n    string to lowercase\r\n    string to lowercase\r\n    string to lowercase\r\n\r\n","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>A very good article i found <a href=\"https://www.infoworld.com/article/2946534/java-101-the-essential-java-language-features-tour-part-7.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n<h3>References to bound non-static methods</h3>\n<p>A bound non-static method reference refers to a non-static method that's bound to a receiver object. Its syntax is objectName::instanceMethodName, where objectName identifies the receiver and instanceMethodName identifies the instance method. An example is s::trim. Listing 2 demonstrates a bound non-static method reference.</p>\n<p>Listing 2. MRDemo version 2: A bound non-static method reference</p>\n<pre><code>import java.util.function.Supplier;\n\npublic class MRDemo\n{\n   public static void main(String[] args)\n   {\n      String s = &quot;The quick brown fox jumped over the lazy dog&quot;;\n      print(s::length);\n      print(() -&gt; s.length());\n      print(new Supplier&lt;Integer&gt;()\n      {\n         @Override\n         public Integer get()\n         {\n            return s.length(); // closes over s\n         }\n      });\n   }\n\n   public static void print(Supplier&lt;Integer&gt; supplier)\n   {\n      System.out.println(supplier.get());\n   }\n}\n</code></pre>\n<p>Listing 2's main() method assigns a string to String variable s and then invokes the print() class method with functionality to obtain the string's length as this method's argument. print() is invoked in method reference (s::length -- length() is bound to s), equivalent lambda, and equivalent anonymous class contexts.</p>\n<p>I've defined print() to use the java.util.function.Supplier predefined functional interface, whose get() method returns a supplier of results. In this case, the Supplier instance passed to print() implements its get() method to return s.length(); print() outputs this length.</p>\n<p>s::length introduces a closure that closes over s. You can see this more clearly in the lambda example. Because the lambda has no arguments, the value of s is only available from the enclosing scope. Therefore, the lambda body is a closure that closes over s. The anonymous class example makes this even clearer.</p>\n<p>Compile Listing 2 and run the application. You'll observe the following output:</p>\n<pre><code>44\n44\n44\n</code></pre>\n<h3>References to unbound non-static methods</h3>\n<p>An unbound non-static method reference refers to a non-static method that's not bound to a receiver object. Its syntax is className::instanceMethodName, where className identifies the class that declares the instance method and instanceMethodName identifies the instance method. An example is String::toLowerCase.</p>\n<p>String::toLowerCase is an unbound non-static method reference that identifies the non-static String toLowerCase() method of the String class. However, because a non-static method still requires a receiver object (in this example a String object, which is used to invoke toLowerCase() via the method reference), the receiver object is created by the virtual machine. toLowerCase() will be invoked on this object. String::toLowerCase specifies a method that takes a single String argument, which is the receiver object, and returns a String result. String::toLowerCase() is equivalent to lambda (String s) -&gt; { return s.toLowerCase(); }.</p>\n<p>Listing 3 demonstrates this unbound non-static method reference.</p>\n<p>Listing 3. MRDemo version 3: Unbound non-static method reference</p>\n<pre><code>import java.util.function.Function;\n\npublic class MRDemo\n{\n   public static void main(String[] args)\n   {\n      print(String::toLowerCase, &quot;STRING TO LOWERCASE&quot;);\n      print(s -&gt; s.toLowerCase(), &quot;STRING TO LOWERCASE&quot;);\n      print(new Function&lt;String, String&gt;()\n      {\n         @Override\n         public String apply(String s) // receives argument in parameter s;\n         {                             // doesn't need to close over s\n            return s.toLowerCase();\n         }\n      }, &quot;STRING TO LOWERCASE&quot;);\n   }\n\n   public static void print(Function&lt;String, String&gt; function, String\ns)\n   {\n      System.out.println(function.apply(s));\n   }\n}\n</code></pre>\n<p>Listing 3's main() method invokes the print() class method with functionality to convert a string to lowercase along with the string to be converted as the method's arguments. print() is invoked in method reference (String::toLowerCase -- toLowerCase() isn't bound to a user-specified object), equivalent lambda, and equivalent anonymous class contexts.</p>\n<p>I've defined print() to use the java.util.function.Function predefined functional interface, which represents a function that accepts one argument and produces a result. In this case, the Function instance passed to print() implements its R apply(T t) method to return s.toLowerCase(); print() outputs this string.</p>\n<p>Although the String part of String::toLowerCase makes it look like a class is being referenced, only an instance of this class is referenced. The anonymous class example makes this fact more obvious. Note that the anonymous class example shows that the lambda receives an argument; it doesn't close over parameter s and is therefore not a closure.</p>\n<p>Compile Listing 3 and run the application. You'll observe the following output:</p>\n<pre><code>string to lowercase\nstring to lowercase\nstring to lowercase\n</code></pre>\n"}],"owner":{"account_id":1141338,"reputation":6503,"user_id":1125151,"accept_rate":34,"display_name":"Harmeet Singh Taara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9156,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":35915104,"answer_count":7,"score":20,"last_activity_date":1683030645,"creation_date":1457608259,"question_id":35914775,"body_markdown":"I am trying to use Java 8 method references in my code. There are four types of method references available. \r\n\r\n 1. Static method reference.\r\n 2. Instance method (bound receiver).\r\n 3. Instance method (unbound receiver).\r\n 4. Constructor reference.\r\n\r\nWith _static method reference_ and _constructor reference_ I have no problem, but _instance method (bound receiver)_ and _instance method (unbound receiver)_ really confused me. In _bound_ receiver, we are using an object reference variable for calling a method like: \r\n\r\n    objectRef::Instance Method\r\n\r\nIn _unbound_ receiver we are using class name for calling a method like: \r\n\r\n    ClassName::Instance Method.\r\n\r\nI have the following question: \r\n\r\n 1. What is the need for different types of method references for instance methods?\r\n 2. What is the difference between _bound_ and _unbound_ receiver method references?\r\n 3. Where should we use _bound_ receiver and where should we use _unbound_ receiver?\r\n\r\nI also found the explanation of _bound_ and _unbound_ receiver from [Java 8 language features books][1], but was still confused with the actual concept. \r\n\r\n\r\n  [1]: https://books.google.co.in/books?id=TnU_BAAAQBAJ&amp;pg=PA154&amp;lpg=PA154&amp;dq=java%208%20method%20reference%20unbound%20and%20bound&amp;source=bl&amp;ots=VZt9o58Bwg&amp;sig=KucWWaGHAfcCoir3Sks3WWsUx-s&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwjBuKe09bXLAhXCj44KHWiZAYAQ6AEISTAH#v=onepage&amp;q=java%208%20method%20reference%20unbound%20and%20bound&amp;f=false","title":"Difference between method reference Bound Receiver and Unbound Receiver","body":"<p>I am trying to use Java 8 method references in my code. There are four types of method references available.</p>\n<ol>\n<li>Static method reference.</li>\n<li>Instance method (bound receiver).</li>\n<li>Instance method (unbound receiver).</li>\n<li>Constructor reference.</li>\n</ol>\n<p>With <em>static method reference</em> and <em>constructor reference</em> I have no problem, but <em>instance method (bound receiver)</em> and <em>instance method (unbound receiver)</em> really confused me. In <em>bound</em> receiver, we are using an object reference variable for calling a method like:</p>\n<pre><code>objectRef::Instance Method\n</code></pre>\n<p>In <em>unbound</em> receiver we are using class name for calling a method like:</p>\n<pre><code>ClassName::Instance Method.\n</code></pre>\n<p>I have the following question:</p>\n<ol>\n<li>What is the need for different types of method references for instance methods?</li>\n<li>What is the difference between <em>bound</em> and <em>unbound</em> receiver method references?</li>\n<li>Where should we use <em>bound</em> receiver and where should we use <em>unbound</em> receiver?</li>\n</ol>\n<p>I also found the explanation of <em>bound</em> and <em>unbound</em> receiver from <a href=\"https://books.google.co.in/books?id=TnU_BAAAQBAJ&amp;pg=PA154&amp;lpg=PA154&amp;dq=java%208%20method%20reference%20unbound%20and%20bound&amp;source=bl&amp;ots=VZt9o58Bwg&amp;sig=KucWWaGHAfcCoir3Sks3WWsUx-s&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwjBuKe09bXLAhXCj44KHWiZAYAQ6AEISTAH#v=onepage&amp;q=java%208%20method%20reference%20unbound%20and%20bound&amp;f=false\" rel=\"nofollow noreferrer\">Java 8 language features books</a>, but was still confused with the actual concept.</p>\n"},{"tags":["java","method-reference"],"owner":{"account_id":28478303,"reputation":1,"user_id":21792630,"display_name":"Ranjith Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683029592,"answer_count":0,"score":0,"last_activity_date":1683030406,"creation_date":1683009384,"question_id":76152288,"body_markdown":"    Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees=\r\n\t    \t\t\temployeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\r\n\r\n\r\ngetGender is not static method in Employee class, but here it is reference with class name the code works fine.\r\n\r\nAs far as I know in method referencing, static method should be referenced with class name and non-static method should be referenced with variable name as emp::getGender\r\n\r\nCan some help me to understand how it is behaving here?\r\n\r\nWhen non-static method is referenced with class name and it is not throwing error, can some please explain.","title":"In method reference, not-static method is referenced with class name, it is confusing. Can some help me to understand","body":"<pre><code>Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees=\n                employeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\n</code></pre>\n<p>getGender is not static method in Employee class, but here it is reference with class name the code works fine.</p>\n<p>As far as I know in method referencing, static method should be referenced with class name and non-static method should be referenced with variable name as emp::getGender</p>\n<p>Can some help me to understand how it is behaving here?</p>\n<p>When non-static method is referenced with class name and it is not throwing error, can some please explain.</p>\n"},{"tags":["java","arrays","arraylist","user-input","user-defined-functions"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1683020770,"post_id":76153551,"comment_id":134299318,"body_markdown":"You are giving us a vague, badly formatted, description of what you expect, and you want us to write the code for you?","body":"You are giving us a vague, badly formatted, description of what you expect, and you want us to write the code for you?"}],"answers":[{"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683028391,"post_id":76153758,"comment_id":134300736,"body_markdown":"please don&#39;t just spoonfeed code.","body":"please don&#39;t just spoonfeed code."}],"tags":[],"owner":{"account_id":15531552,"reputation":118,"user_id":12393728,"display_name":"Mykola"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1683029941,"creation_date":1683021720,"answer_id":76153758,"question_id":76153551,"body_markdown":"You should create an infinite loop with `while`, and create the condition for `break;`. Use Scanner to read input by the method `nextInt()` for ArrayList elements and `nextInt()` for string &quot;yes&quot;.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Scanner;\r\n    \r\n    public class UserInputArrayList {\r\n        public static void main(String[] args) {\r\n            ArrayList&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();\r\n            Scanner scanner = new Scanner(System.in);\r\n    \r\n            while (true) {\r\n                System.out.println(&quot;Enter an integer to add to the ArrayList:&quot;);\r\n                int input = scanner.nextInt();\r\n                numbers.add(input);\r\n    \r\n                System.out.println(&quot;Is the input for ArrayList done? (Type &#39;yes&#39; to finish, anything else to continue)&quot;);\r\n                String done = scanner.next();\r\n                if (done.equalsIgnoreCase(&quot;yes&quot;)) {\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            System.out.println(&quot;The ArrayList data entered by the user:&quot;);\r\n            for (int number : numbers) {\r\n                System.out.println(number);\r\n            }\r\n    \r\n            scanner.close();\r\n        }\r\n    }","title":"Pass User Input to the ArrayList and display the output","body":"<p>You should create an infinite loop with <code>while</code>, and create the condition for <code>break;</code>. Use Scanner to read input by the method <code>nextInt()</code> for ArrayList elements and <code>nextInt()</code> for string &quot;yes&quot;.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class UserInputArrayList {\n    public static void main(String[] args) {\n        ArrayList&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();\n        Scanner scanner = new Scanner(System.in);\n\n        while (true) {\n            System.out.println(&quot;Enter an integer to add to the ArrayList:&quot;);\n            int input = scanner.nextInt();\n            numbers.add(input);\n\n            System.out.println(&quot;Is the input for ArrayList done? (Type 'yes' to finish, anything else to continue)&quot;);\n            String done = scanner.next();\n            if (done.equalsIgnoreCase(&quot;yes&quot;)) {\n                break;\n            }\n        }\n\n        System.out.println(&quot;The ArrayList data entered by the user:&quot;);\n        for (int number : numbers) {\n            System.out.println(number);\n        }\n\n        scanner.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23448076,"reputation":37,"user_id":17504599,"display_name":"Jeevan Jitu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1683046968,"accepted_answer_id":76153758,"answer_count":1,"score":-2,"last_activity_date":1683029941,"creation_date":1683019926,"question_id":76153551,"body_markdown":"I Need Help In Programming Where The ArrayList Should Take The User Input Of Integer Type And Store them . The Size Cannot Be Specified  by user Priorly and It Should Take As Many Elements As the user can Add. It Should Ask If The Inputs For ArrayList Is Done. If Given Yes It Should End And Display The ArrayList Data Entered By The User. If Other Than Yes It Should Still Continue To Take The Input To Add Elements In Arraylist. Please Help ","title":"Pass User Input to the ArrayList and display the output","body":"<p>I Need Help In Programming Where The ArrayList Should Take The User Input Of Integer Type And Store them . The Size Cannot Be Specified  by user Priorly and It Should Take As Many Elements As the user can Add. It Should Ask If The Inputs For ArrayList Is Done. If Given Yes It Should End And Display The ArrayList Data Entered By The User. If Other Than Yes It Should Still Continue To Take The Input To Add Elements In Arraylist. Please Help</p>\n"},{"tags":["java","eclipse","maven","jakarta-ee","tomcat"],"comments":[{"owner":{"account_id":2680659,"reputation":10169,"user_id":2316112,"accept_rate":70,"display_name":"Philipp Sander"},"score":1,"creation_date":1387367484,"post_id":20657346,"comment_id":30926029,"body_markdown":"take a look in the &quot;Markers&quot; view. this may help","body":"take a look in the &quot;Markers&quot; view. this may help"},{"owner":{"account_id":30276,"reputation":58105,"user_id":82474,"accept_rate":81,"display_name":"Eric Wilson"},"score":0,"creation_date":1387367581,"post_id":20657346,"comment_id":30926102,"body_markdown":"It would be nice to have no false warnings/errors in Eclipse/Maven projects, but I&#39;ve never found that to be an attainable goal.","body":"It would be nice to have no false warnings/errors in Eclipse/Maven projects, but I&#39;ve never found that to be an attainable goal."},{"owner":{"account_id":3136816,"reputation":1373,"user_id":2653173,"accept_rate":55,"display_name":"Andrea Catania"},"score":0,"creation_date":1387367868,"post_id":20657346,"comment_id":30926309,"body_markdown":"@PhilippSander in &quot;Markers&quot; I have it: Description\tResource\tPath\tLocation\tType\nBuild path specifies execution environment J2SE-1.4. There are no JREs installed in the workspace that are strictly compatible with this environment. \ttestM3\t\tBuild path\tJRE System Library Problem","body":"@PhilippSander in &quot;Markers&quot; I have it: Description\tResource\tPath\tLocation\tType Build path specifies execution environment J2SE-1.4. There are no JREs installed in the workspace that are strictly compatible with this environment. \ttestM3\t\tBuild path\tJRE System Library Problem"},{"owner":{"account_id":2680659,"reputation":10169,"user_id":2316112,"accept_rate":70,"display_name":"Philipp Sander"},"score":0,"creation_date":1387367921,"post_id":20657346,"comment_id":30926343,"body_markdown":"there you have it ;-)","body":"there you have it ;-)"},{"owner":{"account_id":30276,"reputation":58105,"user_id":82474,"accept_rate":81,"display_name":"Eric Wilson"},"score":0,"creation_date":1387368068,"post_id":20657346,"comment_id":30926439,"body_markdown":"Maybe you need to add the maven compiler plugin to your `pom.xml` specifying a more modern JRE? (1.6 or 1.7)","body":"Maybe you need to add the maven compiler plugin to your <code>pom.xml</code> specifying a more modern JRE? (1.6 or 1.7)"},{"owner":{"account_id":3136816,"reputation":1373,"user_id":2653173,"accept_rate":55,"display_name":"Andrea Catania"},"score":0,"creation_date":1387369701,"post_id":20657346,"comment_id":30927436,"body_markdown":"@ericwilson ok i have to specify new maven compiler, but I need to use tomcat maven plugin...","body":"@ericwilson ok i have to specify new maven compiler, but I need to use tomcat maven plugin..."},{"owner":{"account_id":3136816,"reputation":1373,"user_id":2653173,"accept_rate":55,"display_name":"Andrea Catania"},"score":0,"creation_date":1387370027,"post_id":20657346,"comment_id":30927649,"body_markdown":"I funded this http://stackoverflow.com/questions/7404790/how-to-add-repository-for-tomcat-maven-plugin but the answer&#39;s links are not found can you help me?","body":"I funded this <a href=\"http://stackoverflow.com/questions/7404790/how-to-add-repository-for-tomcat-maven-plugin\" title=\"how to add repository for tomcat maven plugin\">stackoverflow.com/questions/7404790/&hellip;</a> but the answer&#39;s links are not found can you help me?"}],"answers":[{"tags":[],"owner":{"account_id":5108182,"reputation":1,"user_id":4095684,"display_name":"Prabu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683029446,"creation_date":1683029446,"answer_id":76154695,"question_id":20657346,"body_markdown":"In my case same warning has come.  [warning][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hs3I4.png\r\n\r\n\r\nThere was warning appeared in the project folder. So the build path problem.  Go to Project ---&gt;  properties. Check any misconfiguration there. In my case, incompatible between jdk and jre. So I replaced it as soon as the warning disappears.  \r\n\r\n\r\nPlease check your built path configuration","title":"Warning when create maven project","body":"<p>In my case same warning has come.  <a href=\"https://i.stack.imgur.com/hs3I4.png\" rel=\"nofollow noreferrer\">warning</a></p>\n<p>There was warning appeared in the project folder. So the build path problem.  Go to Project ---&gt;  properties. Check any misconfiguration there. In my case, incompatible between jdk and jre. So I replaced it as soon as the warning disappears.</p>\n<p>Please check your built path configuration</p>\n"}],"owner":{"account_id":3136816,"reputation":1373,"user_id":2653173,"accept_rate":55,"display_name":"Andrea Catania"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683029446,"creation_date":1387367282,"question_id":20657346,"body_markdown":"When I create a simply maven web project in my package explorer, I have a little icon with a warning but i haven&#39;t warning in &quot;Error Log&quot; (the project name is **testM2**)\r\n\r\n\r\nI followed this video: [http://www.youtube.com/watch?v=YeC7XQho-O0][1]\r\n\r\nHere the picture:\r\n\r\n![the warning say][2]\r\n.\r\n\r\nwhat is the problem? I just create new project, have you an idea?\r\n\r\n\r\n  [1]: http://www.youtube.com/watch?v=YeC7XQho-O0\r\n  [2]: http://i.stack.imgur.com/PNv6k.png","title":"Warning when create maven project","body":"<p>When I create a simply maven web project in my package explorer, I have a little icon with a warning but i haven't warning in \"Error Log\" (the project name is <strong>testM2</strong>)</p>\n\n<p>I followed this video: <a href=\"http://www.youtube.com/watch?v=YeC7XQho-O0\" rel=\"nofollow noreferrer\">http://www.youtube.com/watch?v=YeC7XQho-O0</a></p>\n\n<p>Here the picture:</p>\n\n<p><img src=\"https://i.stack.imgur.com/PNv6k.png\" alt=\"the warning say\">\n.</p>\n\n<p>what is the problem? I just create new project, have you an idea?</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":0,"creation_date":1682672004,"post_id":76119565,"comment_id":134255751,"body_markdown":"I don&#39;t understand why `Hibernate.unproxy(proxy, Dog.class)` doesn&#39;t do what you need.","body":"I don&#39;t understand why <code>Hibernate.unproxy(proxy, Dog.class)</code> doesn&#39;t do what you need."},{"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"score":0,"creation_date":1683026542,"post_id":76119565,"comment_id":134300384,"body_markdown":"Thank you for your question! It does exactly what I need, but I don&#39;t think I should have to do it. I also don&#39;t have to explicitly call `Hibernate.unproxy()` if I want to access a value of the `dog` variable. That&#39;s why I thought there might be a smarter solution to this.","body":"Thank you for your question! It does exactly what I need, but I don&#39;t think I should have to do it. I also don&#39;t have to explicitly call <code>Hibernate.unproxy()</code> if I want to access a value of the <code>dog</code> variable. That&#39;s why I thought there might be a smarter solution to this."},{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":0,"creation_date":1683029172,"post_id":76119565,"comment_id":134300903,"body_markdown":"You have to do it when the association is fetched lazily, since we cannot determine the type of the associated entity without fetching it. On the other hand, if you fetch the association eagerly (which you usually *should*), then you don&#39;t need to do it.","body":"You have to do it when the association is fetched lazily, since we cannot determine the type of the associated entity without fetching it. On the other hand, if you fetch the association eagerly (which you usually <i>should</i>), then you don&#39;t need to do it."},{"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"score":0,"creation_date":1683099377,"post_id":76119565,"comment_id":134312795,"body_markdown":"That&#39;s the thing, in most cases (like accessing some variable inside `dog`) Hibernate just unproxies the object itself. But somehow casting the variable is no such case. And I just wanted to know why. I know how I could fix it, but especially with the Single-Table-Inheritance pattern I used, I could see this as a problem that may affect many. \nNot sure I agree with &quot;you usually should fetch associations eagerly&quot;.","body":"That&#39;s the thing, in most cases (like accessing some variable inside <code>dog</code>) Hibernate just unproxies the object itself. But somehow casting the variable is no such case. And I just wanted to know why. I know how I could fix it, but especially with the Single-Table-Inheritance pattern I used, I could see this as a problem that may affect many.  Not sure I agree with &quot;you usually should fetch associations eagerly&quot;."},{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":1,"creation_date":1683111970,"post_id":76119565,"comment_id":134315533,"body_markdown":"Well I just explained why. Because Hibernate doesn&#39;t know the concrete type until it fetches the association. There&#39;s no imaginable way to &quot;fix&quot; this, it&#39;s just a completely logical and inevitable restriction we have to live with.","body":"Well I just explained why. Because Hibernate doesn&#39;t know the concrete type until it fetches the association. There&#39;s no imaginable way to &quot;fix&quot; this, it&#39;s just a completely logical and inevitable restriction we have to live with."},{"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"score":0,"creation_date":1683179507,"post_id":76119565,"comment_id":134327283,"body_markdown":"Never looked at it from that point, you&#39;re right. There is no way for Hibernate to know that `instanceof` is called.","body":"Never looked at it from that point, you&#39;re right. There is no way for Hibernate to know that <code>instanceof</code> is called."}],"answers":[{"tags":[],"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683029303,"creation_date":1683029303,"answer_id":76154676,"question_id":76119565,"body_markdown":"You can avoid the need to use `Hibernate.unproxy()` by fetching the association eagerly using a query with `join fetch`, or whatever.\r\n","title":"Hibernate unproxy on cast or instanceOf","body":"<p>You can avoid the need to use <code>Hibernate.unproxy()</code> by fetching the association eagerly using a query with <code>join fetch</code>, or whatever.</p>\n"}],"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683029303,"creation_date":1682592986,"question_id":76119565,"body_markdown":"I have an inherited entity like so:\r\n\r\n    @Entity\r\n    public abstract class Animal {}\r\n    \r\n    @DiscriminatorValue(&quot;Dog&quot;)\r\n    public class Dog extends Animal{ private String name; }\r\n\r\n    @DiscriminatorValue(&quot;Cat&quot;)\r\n    public class Cat extends Animal { private String color;}\r\n\r\nThe animal is used in other instances like this:\r\n\r\n    @Entity\r\n    public class Bowl {\r\n\r\n    private Animal belongsTo;\r\n\r\n    }\r\n\r\nWhen I load the Bowl from the database, I want to select different things depending if it `belongsTo` is a Cat or a Dog.\r\n\r\nBut `(bowl.getBelongsTo() instanceOf Cat)` does not work because at this point `bowl.getBelongsTo()` is neither of class Cat nor Dog, it is of class `Animal$HibernateProxy`. \r\n\r\nFor just checking the instanceOf, `Hibernate.getClass()` would be a good option (although developers might still forget about using this and the error only becomes present at runtime).   \r\nBut often times we want to cast like this:  \r\n\r\n    // check or just assert that it is a Dog\r\n\r\n    Dog d = (Dog) bowl.getBelongsTo();\r\n\r\nThis results in an error because the HibernateProxy object cannot be cast to `Dog`. \r\n\r\n\r\n**Question:**  \r\nIs there a smart way to tell Hibernate to unproxy itself when it is needed for casting?\r\n","title":"Hibernate unproxy on cast or instanceOf","body":"<p>I have an inherited entity like so:</p>\n<pre><code>@Entity\npublic abstract class Animal {}\n\n@DiscriminatorValue(&quot;Dog&quot;)\npublic class Dog extends Animal{ private String name; }\n\n@DiscriminatorValue(&quot;Cat&quot;)\npublic class Cat extends Animal { private String color;}\n</code></pre>\n<p>The animal is used in other instances like this:</p>\n<pre><code>@Entity\npublic class Bowl {\n\nprivate Animal belongsTo;\n\n}\n</code></pre>\n<p>When I load the Bowl from the database, I want to select different things depending if it <code>belongsTo</code> is a Cat or a Dog.</p>\n<p>But <code>(bowl.getBelongsTo() instanceOf Cat)</code> does not work because at this point <code>bowl.getBelongsTo()</code> is neither of class Cat nor Dog, it is of class <code>Animal$HibernateProxy</code>.</p>\n<p>For just checking the instanceOf, <code>Hibernate.getClass()</code> would be a good option (although developers might still forget about using this and the error only becomes present at runtime).<br />\nBut often times we want to cast like this:</p>\n<pre><code>// check or just assert that it is a Dog\n\nDog d = (Dog) bowl.getBelongsTo();\n</code></pre>\n<p>This results in an error because the HibernateProxy object cannot be cast to <code>Dog</code>.</p>\n<p><strong>Question:</strong><br />\nIs there a smart way to tell Hibernate to unproxy itself when it is needed for casting?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1606917,"reputation":6193,"user_id":1486834,"accept_rate":80,"display_name":"Kuba Wyrostek"},"score":0,"creation_date":1436878273,"post_id":31406990,"comment_id":50787810,"body_markdown":"Do you have a list of entities that can be found in your data or it should take care of all possible entities?","body":"Do you have a list of entities that can be found in your data or it should take care of all possible entities?"}],"answers":[{"tags":[],"owner":{"account_id":1606917,"reputation":6193,"user_id":1486834,"accept_rate":80,"display_name":"Kuba Wyrostek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683028953,"creation_date":1436878746,"answer_id":31407327,"question_id":31406990,"body_markdown":"The solution here will *probably* be lookahead assertions. That means a split should match `&amp;` character only if it is not a start of entity. Problem here is that I am not sure whether your data can contain text, that can be mistakenly taken as an entity (basically any stuff ending with `;`). But let&#39;s assume for now it does not. This is how such split with negative lookahead pattern could look:\r\n\r\n    /(?!&amp;apos;)[&amp;/\\.\\s-]/\r\n\r\nNote this is a case with only `&amp;apos;` entity. You probably would like to extend possible entity list or provide pattern that matches all valid entities.","title":"Regex: Want to change case of letter following one of a set, except HTML entity","body":"<p>The solution here will <em>probably</em> be lookahead assertions. That means a split should match <code>&amp;</code> character only if it is not a start of entity. Problem here is that I am not sure whether your data can contain text, that can be mistakenly taken as an entity (basically any stuff ending with <code>;</code>). But let's assume for now it does not. This is how such split with negative lookahead pattern could look:</p>\n<pre><code>/(?!&amp;apos;)[&amp;/\\.\\s-]/\n</code></pre>\n<p>Note this is a case with only <code>&amp;apos;</code> entity. You probably would like to extend possible entity list or provide pattern that matches all valid entities.</p>\n"},{"comments":[{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1436879896,"post_id":31407687,"comment_id":50789093,"body_markdown":"4th paragraph in the question specifically mentions that lowercasing the entire text is not acceptable. I also don&#39;t see how a group could (or should) start with `;` character. That said - good answer, I was starting to write something similar, and the problems should be easily fixable.","body":"4th paragraph in the question specifically mentions that lowercasing the entire text is not acceptable. I also don&#39;t see how a group could (or should) start with <code>;</code> character. That said - good answer, I was starting to write something similar, and the problems should be easily fixable."},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1436880412,"post_id":31407687,"comment_id":50789534,"body_markdown":"Oh, and HTML entities according to w3 can also be referred by `#NUMBER` instead of a name (like `&amp;#60;`), regex should reflect that too.","body":"Oh, and HTML entities according to w3 can also be referred by <code>#NUMBER</code> instead of a name (like <code>&amp;#60;</code>), regex should reflect that too."},{"owner":{"account_id":1318923,"reputation":9011,"user_id":1265182,"accept_rate":100,"display_name":"Shar1er80"},"score":0,"creation_date":1436880667,"post_id":31407687,"comment_id":50789749,"body_markdown":"@Deltharis Thanks for the catch!  Updated answer.","body":"@Deltharis Thanks for the catch!  Updated answer."},{"owner":{"account_id":2557665,"reputation":748,"user_id":3430623,"accept_rate":45,"display_name":"dexter"},"score":0,"creation_date":1436900088,"post_id":31407687,"comment_id":50802906,"body_markdown":"Very happy with this solution. Works like a charm. I had to make a minor change: htmlEntity.substring(0, semicolonIndex) should be  htmlEntity.substring(0, semicolonIndex+1)","body":"Very happy with this solution. Works like a charm. I had to make a minor change: htmlEntity.substring(0, semicolonIndex) should be  htmlEntity.substring(0, semicolonIndex+1)"},{"owner":{"account_id":1318923,"reputation":9011,"user_id":1265182,"accept_rate":100,"display_name":"Shar1er80"},"score":0,"creation_date":1436900189,"post_id":31407687,"comment_id":50802968,"body_markdown":"@dexter Glad to have helped.  Kindly click the check mark to my answer so your question is solved.","body":"@dexter Glad to have helped.  Kindly click the check mark to my answer so your question is solved."}],"tags":[],"owner":{"account_id":1318923,"reputation":9011,"user_id":1265182,"accept_rate":100,"display_name":"Shar1er80"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1436887749,"creation_date":1436879631,"answer_id":31407687,"question_id":31406990,"body_markdown":"This pattern seems to handle your situation\r\n\r\n    &quot;\\\\w+|&amp;#?\\\\w+;\\\\w*&quot;\r\n\r\nThere may be some edge cases, but we can adjust accordingly as they come up.\r\n\r\nPattern Breakdown:\r\n\r\n - `\\\\w+` - Match any word\r\n - `&amp;#?\\\\w+;\\\\w*` - Match an HTML entity\r\n\r\nCode Sample:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String[] lines = {\r\n            &quot;rythm&amp;blues&quot;,\r\n            &quot;.. DON&amp;apos;T WEAR WHITE/LIVE&quot;\r\n        };\r\n                \r\n        Pattern pattern = Pattern.compile(&quot;\\\\w+|&amp;#?\\\\w+;\\\\w*&quot;);\r\n        for (int i = 0; i &lt; lines.length; i++) {\r\n            Matcher matcher = pattern.matcher(lines[i]);\r\n            while (matcher.find()) {\r\n                if (matcher.group().startsWith(&quot;&amp;&quot;)) {\r\n                    // Handle HTML entities \r\n                    \r\n                    // There are letters after the semi-colon that \r\n                    // need to be lower case\r\n                    if (!matcher.group().endsWith(&quot;;&quot;)) {\r\n                        String htmlEntity = matcher.group();\r\n                        int semicolonIndex = htmlEntity.indexOf(&quot;;&quot;);\r\n                        lines[i] = lines[i].replace(htmlEntity,\r\n                                htmlEntity.substring(0, semicolonIndex) +\r\n                                        htmlEntity.substring(semicolonIndex + 1)\r\n                                                .toLowerCase());\r\n                    }\r\n                } else {\r\n                    // Uppercase the first letter of the word and lowercase\r\n                    // the rest of the word\r\n                    lines[i] = lines[i].replace(matcher.group(), \r\n                            Character.toUpperCase(matcher.group().charAt(0)) + \r\n                                    matcher.group().substring(1).toLowerCase());\r\n                }\r\n            }\r\n        }\r\n        \r\n        System.out.println(Arrays.toString(lines));\r\n    }\r\n\r\nResults:\r\n\r\n    [Rythm&amp;Blues, .. Don&amp;apos;t Wear White/Live]","title":"Regex: Want to change case of letter following one of a set, except HTML entity","body":"<p>This pattern seems to handle your situation</p>\n\n<pre><code>\"\\\\w+|&amp;#?\\\\w+;\\\\w*\"\n</code></pre>\n\n<p>There may be some edge cases, but we can adjust accordingly as they come up.</p>\n\n<p>Pattern Breakdown:</p>\n\n<ul>\n<li><code>\\\\w+</code> - Match any word</li>\n<li><code>&amp;#?\\\\w+;\\\\w*</code> - Match an HTML entity</li>\n</ul>\n\n<p>Code Sample:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    String[] lines = {\n        \"rythm&amp;blues\",\n        \".. DON&amp;apos;T WEAR WHITE/LIVE\"\n    };\n\n    Pattern pattern = Pattern.compile(\"\\\\w+|&amp;#?\\\\w+;\\\\w*\");\n    for (int i = 0; i &lt; lines.length; i++) {\n        Matcher matcher = pattern.matcher(lines[i]);\n        while (matcher.find()) {\n            if (matcher.group().startsWith(\"&amp;\")) {\n                // Handle HTML entities \n\n                // There are letters after the semi-colon that \n                // need to be lower case\n                if (!matcher.group().endsWith(\";\")) {\n                    String htmlEntity = matcher.group();\n                    int semicolonIndex = htmlEntity.indexOf(\";\");\n                    lines[i] = lines[i].replace(htmlEntity,\n                            htmlEntity.substring(0, semicolonIndex) +\n                                    htmlEntity.substring(semicolonIndex + 1)\n                                            .toLowerCase());\n                }\n            } else {\n                // Uppercase the first letter of the word and lowercase\n                // the rest of the word\n                lines[i] = lines[i].replace(matcher.group(), \n                        Character.toUpperCase(matcher.group().charAt(0)) + \n                                matcher.group().substring(1).toLowerCase());\n            }\n        }\n    }\n\n    System.out.println(Arrays.toString(lines));\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>[Rythm&amp;Blues, .. Don&amp;apos;t Wear White/Live]\n</code></pre>\n"}],"owner":{"account_id":2557665,"reputation":748,"user_id":3430623,"accept_rate":45,"display_name":"dexter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1683028953,"creation_date":1436877911,"question_id":31406990,"body_markdown":"**Examples:**\r\n\r\n    rythm&amp;blues                   -&gt; Rythm&amp;Blues  \r\n    .. DON&amp;apos;T WEAR WHITE/LIVE -&gt; Don&amp;apos;t Wear White/Live\r\n\r\nFirst I convert the whole string to lowercase (because I want to have only Uppercase at the start of a word).\r\n\r\nI currently do this by using a split pattern: `[&amp;/\\\\.\\\\s-]` \r\nAnd then I convert the parts&#39; first letter to Uppercase.\r\n\r\nIt works well, except, that it also converts HTML entities of course:\r\nE.g. `don&amp;apos;t` is converted to `don&amp;Apos;t` but that entity should be left alone.\r\n\r\nWhile writing this I discover an additional problem... the initial conversion to lowercase potentially messes up some HTML entities as well. So, the entities should be totally left alone. (E.g. `&amp;Ccedil;` is not the same as `&amp;ccedil;`)\r\n\r\nAn HTML entity is probably matched like this: `&amp;[a-z][A-Z][a-z]{1,5};`\r\n\r\nI am thinking of doing something with groups, but unfortunately I find it very hard to figure out.","title":"Regex: Want to change case of letter following one of a set, except HTML entity","body":"<p><strong>Examples:</strong></p>\n\n<pre><code>rythm&amp;blues                   -&gt; Rythm&amp;Blues  \n.. DON&amp;apos;T WEAR WHITE/LIVE -&gt; Don&amp;apos;t Wear White/Live\n</code></pre>\n\n<p>First I convert the whole string to lowercase (because I want to have only Uppercase at the start of a word).</p>\n\n<p>I currently do this by using a split pattern: <code>[&amp;/\\\\.\\\\s-]</code> \nAnd then I convert the parts' first letter to Uppercase.</p>\n\n<p>It works well, except, that it also converts HTML entities of course:\nE.g. <code>don&amp;apos;t</code> is converted to <code>don&amp;Apos;t</code> but that entity should be left alone.</p>\n\n<p>While writing this I discover an additional problem... the initial conversion to lowercase potentially messes up some HTML entities as well. So, the entities should be totally left alone. (E.g. <code>&amp;Ccedil;</code> is not the same as <code>&amp;ccedil;</code>)</p>\n\n<p>An HTML entity is probably matched like this: <code>&amp;[a-z][A-Z][a-z]{1,5};</code></p>\n\n<p>I am thinking of doing something with groups, but unfortunately I find it very hard to figure out.</p>\n"},{"tags":["java","replication","ehcache"],"answers":[{"tags":[],"owner":{"account_id":3644469,"reputation":784,"user_id":3037847,"display_name":"Ricardo Machado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683028180,"creation_date":1683028180,"answer_id":76154538,"question_id":72697805,"body_markdown":"I believe it&#39;s the port for the TCP connection of your remote stub object. \r\n\r\nIf you do not specify a port, it will get a random TCP port for each stub object when trying to comunicate data between servers.","title":"What is remoteObjectPort in enCache","body":"<p>I believe it's the port for the TCP connection of your remote stub object.</p>\n<p>If you do not specify a port, it will get a random TCP port for each stub object when trying to comunicate data between servers.</p>\n"}],"owner":{"account_id":1882483,"reputation":1026,"user_id":1702343,"accept_rate":41,"display_name":"theimpatientcoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683028180,"creation_date":1655801341,"question_id":72697805,"body_markdown":"I have been following the ehCache documentation regarding replication on https://www.ehcache.org/documentation/2.8/replication/rmi-replicated-caching.html\r\n\r\nEhCache is already implemented in our project, but going through the code base, I am seeing at multiple places regarding `remoteObjectPort` being added in properties while configuring the listener. \r\n\r\nHere is our code to add peer information to the `peerProviderConfig`\r\n\r\n\r\n       FactoryConfiguration peerProviderConfig = new FactoryConfiguration();\r\n       peerProviderConfig.setClass(RMICacheManagerPeerProviderFactory.class\r\n                        .getName());\r\n\r\n       for (CacheHost remoteHost : remoteHosts) {\r\n            // create a RMI URL\r\n            rmiUrls += separator\r\n            createRmiUrl(remoteHost, cacheName);\r\n            separator = &quot;|&quot;;\r\n        }\r\n\r\n         // and set it in configuration\r\n         peerProviderConfig.setProperties(&quot;peerDiscovery=manual, rmiUrls=&quot; + rmiUrls);\r\n\r\nI understand this piece of code. This will build and append the url for all the peers. \r\nThe `createRmiUrl()` method returns url as follows: `//&lt;hostname&gt;:&lt;hostport&gt;/cacheName`\r\n\r\nFor all the hosts, the `hostport` is same that is `40001`. This means that on all the different hosts, ehCache will be running on port `40001`. According to my understanding following things happen:\r\n\r\n1. Whenever a peer comes alive, it will start the ehCache on port 40001\r\n2. It will also configure all the peers in the cluster as we are using `manual discovery`\r\n3. It will listen for some events and then update/ replicate its own data in the cache. \r\n\r\nIs my understanding right? \r\n\r\nOur `PeerListenerProperties` are as follows:\r\n\r\n       String peerListenerProps = &quot;port=&quot; + rmiPort;\r\n       peerListenerProps += &quot;, remoteObjectPort=40002&quot;;\r\n       peerListenerProps += &quot;, socketTimeoutMillis=&quot; + socketTimeoutMillis;\r\n\r\n       FactoryConfiguration peerListenerConfig = new FactoryConfiguration();\r\n       peerListenerConfig.setClass(RMICacheManagerPeerListenerFactory.class.getName());\r\n       peerListenerConfig.setProperties(peerListenerProps);\r\n\r\nSo in the listener properties, we are adding `port = rmiPort` (which is `40001` and the same will be used by all the peers/hosts). What I don&#39;t understand is what is the usage of `remoteObjectPort` in the listener properties? ","title":"What is remoteObjectPort in enCache","body":"<p>I have been following the ehCache documentation regarding replication on <a href=\"https://www.ehcache.org/documentation/2.8/replication/rmi-replicated-caching.html\" rel=\"nofollow noreferrer\">https://www.ehcache.org/documentation/2.8/replication/rmi-replicated-caching.html</a></p>\n<p>EhCache is already implemented in our project, but going through the code base, I am seeing at multiple places regarding <code>remoteObjectPort</code> being added in properties while configuring the listener.</p>\n<p>Here is our code to add peer information to the <code>peerProviderConfig</code></p>\n<pre><code>   FactoryConfiguration peerProviderConfig = new FactoryConfiguration();\n   peerProviderConfig.setClass(RMICacheManagerPeerProviderFactory.class\n                    .getName());\n\n   for (CacheHost remoteHost : remoteHosts) {\n        // create a RMI URL\n        rmiUrls += separator\n        createRmiUrl(remoteHost, cacheName);\n        separator = &quot;|&quot;;\n    }\n\n     // and set it in configuration\n     peerProviderConfig.setProperties(&quot;peerDiscovery=manual, rmiUrls=&quot; + rmiUrls);\n</code></pre>\n<p>I understand this piece of code. This will build and append the url for all the peers.\nThe <code>createRmiUrl()</code> method returns url as follows: <code>//&lt;hostname&gt;:&lt;hostport&gt;/cacheName</code></p>\n<p>For all the hosts, the <code>hostport</code> is same that is <code>40001</code>. This means that on all the different hosts, ehCache will be running on port <code>40001</code>. According to my understanding following things happen:</p>\n<ol>\n<li>Whenever a peer comes alive, it will start the ehCache on port 40001</li>\n<li>It will also configure all the peers in the cluster as we are using <code>manual discovery</code></li>\n<li>It will listen for some events and then update/ replicate its own data in the cache.</li>\n</ol>\n<p>Is my understanding right?</p>\n<p>Our <code>PeerListenerProperties</code> are as follows:</p>\n<pre><code>   String peerListenerProps = &quot;port=&quot; + rmiPort;\n   peerListenerProps += &quot;, remoteObjectPort=40002&quot;;\n   peerListenerProps += &quot;, socketTimeoutMillis=&quot; + socketTimeoutMillis;\n\n   FactoryConfiguration peerListenerConfig = new FactoryConfiguration();\n   peerListenerConfig.setClass(RMICacheManagerPeerListenerFactory.class.getName());\n   peerListenerConfig.setProperties(peerListenerProps);\n</code></pre>\n<p>So in the listener properties, we are adding <code>port = rmiPort</code> (which is <code>40001</code> and the same will be used by all the peers/hosts). What I don't understand is what is the usage of <code>remoteObjectPort</code> in the listener properties?</p>\n"},{"tags":["java","apache-flink"],"owner":{"account_id":27573860,"reputation":11,"user_id":21044502,"display_name":"slyzen_coder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683027761,"creation_date":1674143710,"question_id":75174928,"body_markdown":"I am using Flink 1.15 and trying to use the user defined Aggregation function with Table Api. Can&#39;t seem to get it to work, getting the error. StreamTaskException: cannot load user class IValueAccumulator. class not resolvable through given class loader.\r\n\r\nHere is the Aggregation function:\r\n\r\n```\r\n\r\nimport java.util.Optional;\r\nimport org.apache.flink.table.api.DataTypes;\r\nimport org.apache.flink.table.catalog.DataTypeFactory;\r\nimport org.apache.flink.table.functions.AggregateFunction;\r\nimport org.apache.flink.table.types.DataType;\r\nimport org.apache.flink.table.types.inference.InputTypeStrategies;\r\nimport org.apache.flink.table.types.inference.TypeInference;\r\nimport org.apache.flink.types.Row;\r\n\r\n\r\npublic final class IValueAggregation extends AggregateFunction&lt;Row, IValueAccumulator&gt; {\r\n          \r\n    @Override\r\n    public Row getValue(IValueAccumulator accumulator) {\r\n        return Row.of(accumulator.value);\r\n    }\r\n\r\n    @Override\r\n    public IValueAccumulator createAccumulator() {\r\n        return new IValueAccumulator();\r\n    }\r\n\r\n     /**\r\n     * Declares the {@link TypeInference} of this function. It specifies:\r\n     *\r\n     * &lt;ul&gt;\r\n     *   &lt;li&gt;which argument types are supported when calling this function,\r\n     *   &lt;li&gt;which {@link DataType#getConversionClass()} should be used when calling the JVM method\r\n     *       {@link #accumulate(Accumulator, Object, LocalDate)} during runtime,\r\n     *   &lt;li&gt;a similar strategy how to derive an accumulator type,\r\n     *   &lt;li&gt;and a similar strategy how to derive the output type.\r\n     * &lt;/ul&gt;\r\n     */\r\n    @Override\r\n    public TypeInference getTypeInference(DataTypeFactory typeFactory) {\r\n        return TypeInference.newBuilder()\r\n                // accept a signature (ANY, DATE) both with default conversion classes,\r\n                // the input type strategy is mostly used to produce nicer validation exceptions\r\n                // during planning, implementers can decide to skip it if they are fine with failing\r\n                // at a later stage during code generation when the runtime method is checked\r\n                .inputTypeStrategy(\r\n                        InputTypeStrategies.sequence(\r\n                                InputTypeStrategies.explicit(DataTypes.FLOAT())))\r\n                // let the accumulator data type depend on the first input argument\r\n                .accumulatorTypeStrategy(\r\n                        callContext -&gt; {\r\n                            //final DataType argDataType = callContext.getArgumentDataTypes().get(0);\r\n                            final DataType accDataType =\r\n                                    DataTypes.STRUCTURED(\r\n                                        IValueAccumulator.class,\r\n                                            DataTypes.FIELD(&quot;value&quot;, DataTypes.FLOAT()));\r\n                            return Optional.of(accDataType);\r\n                        })\r\n                // let the output data type depend on the first input argument\r\n                .outputTypeStrategy(\r\n                        callContext -&gt; {\r\n                            //final DataType argDataType = callContext.getArgumentDataTypes().get(0);\r\n                            final DataType outputDataType =\r\n                                    DataTypes.ROW(\r\n                                            DataTypes.FIELD(&quot;value&quot;, DataTypes.FLOAT()));\r\n                            return Optional.of(outputDataType);\r\n                        })\r\n                .build();\r\n    }\r\n    public void accumulate(IValueAccumulator accumulator, Float signal_value) {        \r\n        accumulator.value += signal_value;\r\n    }\r\n\r\n    public void resetAccumulator(IValueAccumulator accumulator) {\r\n        accumulator.value = 0.0F;\r\n    }\r\n    \r\n}\r\n```\r\n\r\nHere is the accumulator class:\r\n\r\n```\r\npublic class IValueAccumulator {\r\n    public Float value;\r\n}\r\n\r\n```\r\n\r\nWhere I register the aggregation function\r\n\r\n```\r\ntableEnv.createTemporaryFunction(&quot;InstantSum&quot;, IValueAggregation.class);\r\n\r\n```\r\n\r\nWhere the aggregation function is called with windowing and groupby:\r\n\r\n```\r\nvar windowedResult = mergedStreamTable\r\n                                    .where($(&quot;merged_stream_id&quot;).isEqual(currentMergedStreamId))\r\n                                    .window(Tumble.over(lit(10).minutes())\r\n                                    .on($(&quot;rowtime&quot;))\r\n                                    .as(&quot;w&quot;)) // define window\r\n                                    .groupBy($(&quot;signal_type&quot;), $(&quot;signal_name&quot;), $(&quot;w&quot;)) \r\n                                    .aggregate(call(&quot;InstantSum&quot;, $(&quot;signal_value&quot;)).as(&quot;sum_signal_value&quot;))\r\n                                    .select($(&quot;signal_type&quot;), $(&quot;signal_name&quot;), $(&quot;sum_signal_value&quot;), $(&quot;w&quot;).start().as(&quot;window_start&quot;), $(&quot;w&quot;).end().as(&quot;window_end&quot;));\r\n```\r\n\r\n\r\n","title":"Flink Aggregation Function not working, getting StreamTaskException: cannot load user class Accumulator","body":"<p>I am using Flink 1.15 and trying to use the user defined Aggregation function with Table Api. Can't seem to get it to work, getting the error. StreamTaskException: cannot load user class IValueAccumulator. class not resolvable through given class loader.</p>\n<p>Here is the Aggregation function:</p>\n<pre><code>\nimport java.util.Optional;\nimport org.apache.flink.table.api.DataTypes;\nimport org.apache.flink.table.catalog.DataTypeFactory;\nimport org.apache.flink.table.functions.AggregateFunction;\nimport org.apache.flink.table.types.DataType;\nimport org.apache.flink.table.types.inference.InputTypeStrategies;\nimport org.apache.flink.table.types.inference.TypeInference;\nimport org.apache.flink.types.Row;\n\n\npublic final class IValueAggregation extends AggregateFunction&lt;Row, IValueAccumulator&gt; {\n          \n    @Override\n    public Row getValue(IValueAccumulator accumulator) {\n        return Row.of(accumulator.value);\n    }\n\n    @Override\n    public IValueAccumulator createAccumulator() {\n        return new IValueAccumulator();\n    }\n\n     /**\n     * Declares the {@link TypeInference} of this function. It specifies:\n     *\n     * &lt;ul&gt;\n     *   &lt;li&gt;which argument types are supported when calling this function,\n     *   &lt;li&gt;which {@link DataType#getConversionClass()} should be used when calling the JVM method\n     *       {@link #accumulate(Accumulator, Object, LocalDate)} during runtime,\n     *   &lt;li&gt;a similar strategy how to derive an accumulator type,\n     *   &lt;li&gt;and a similar strategy how to derive the output type.\n     * &lt;/ul&gt;\n     */\n    @Override\n    public TypeInference getTypeInference(DataTypeFactory typeFactory) {\n        return TypeInference.newBuilder()\n                // accept a signature (ANY, DATE) both with default conversion classes,\n                // the input type strategy is mostly used to produce nicer validation exceptions\n                // during planning, implementers can decide to skip it if they are fine with failing\n                // at a later stage during code generation when the runtime method is checked\n                .inputTypeStrategy(\n                        InputTypeStrategies.sequence(\n                                InputTypeStrategies.explicit(DataTypes.FLOAT())))\n                // let the accumulator data type depend on the first input argument\n                .accumulatorTypeStrategy(\n                        callContext -&gt; {\n                            //final DataType argDataType = callContext.getArgumentDataTypes().get(0);\n                            final DataType accDataType =\n                                    DataTypes.STRUCTURED(\n                                        IValueAccumulator.class,\n                                            DataTypes.FIELD(&quot;value&quot;, DataTypes.FLOAT()));\n                            return Optional.of(accDataType);\n                        })\n                // let the output data type depend on the first input argument\n                .outputTypeStrategy(\n                        callContext -&gt; {\n                            //final DataType argDataType = callContext.getArgumentDataTypes().get(0);\n                            final DataType outputDataType =\n                                    DataTypes.ROW(\n                                            DataTypes.FIELD(&quot;value&quot;, DataTypes.FLOAT()));\n                            return Optional.of(outputDataType);\n                        })\n                .build();\n    }\n    public void accumulate(IValueAccumulator accumulator, Float signal_value) {        \n        accumulator.value += signal_value;\n    }\n\n    public void resetAccumulator(IValueAccumulator accumulator) {\n        accumulator.value = 0.0F;\n    }\n    \n}\n</code></pre>\n<p>Here is the accumulator class:</p>\n<pre><code>public class IValueAccumulator {\n    public Float value;\n}\n\n</code></pre>\n<p>Where I register the aggregation function</p>\n<pre><code>tableEnv.createTemporaryFunction(&quot;InstantSum&quot;, IValueAggregation.class);\n\n</code></pre>\n<p>Where the aggregation function is called with windowing and groupby:</p>\n<pre><code>var windowedResult = mergedStreamTable\n                                    .where($(&quot;merged_stream_id&quot;).isEqual(currentMergedStreamId))\n                                    .window(Tumble.over(lit(10).minutes())\n                                    .on($(&quot;rowtime&quot;))\n                                    .as(&quot;w&quot;)) // define window\n                                    .groupBy($(&quot;signal_type&quot;), $(&quot;signal_name&quot;), $(&quot;w&quot;)) \n                                    .aggregate(call(&quot;InstantSum&quot;, $(&quot;signal_value&quot;)).as(&quot;sum_signal_value&quot;))\n                                    .select($(&quot;signal_type&quot;), $(&quot;signal_name&quot;), $(&quot;sum_signal_value&quot;), $(&quot;w&quot;).start().as(&quot;window_start&quot;), $(&quot;w&quot;).end().as(&quot;window_end&quot;));\n</code></pre>\n"},{"tags":["java","unit-testing","testing","pact","pact-java"],"comments":[{"owner":{"account_id":337103,"reputation":12857,"user_id":665163,"display_name":"J_A_X"},"score":0,"creation_date":1480979352,"post_id":40984580,"comment_id":69179643,"body_markdown":"Hey Joel, great to hear you&#39;ve been using Pact.  Can you please elaborate on what you mean by &#39;component&#39; as this is not terminology that we use for Pact.  Also, if you can provide code examples of both options, that would be great to easily decipher what you mean.  Cheers.","body":"Hey Joel, great to hear you&#39;ve been using Pact.  Can you please elaborate on what you mean by &#39;component&#39; as this is not terminology that we use for Pact.  Also, if you can provide code examples of both options, that would be great to easily decipher what you mean.  Cheers."},{"owner":{"account_id":8480305,"reputation":239,"user_id":6360199,"accept_rate":0,"display_name":"Joel Andersson"},"score":0,"creation_date":1481014283,"post_id":40984580,"comment_id":69191072,"body_markdown":"Hi, a component is a microservice or a module in a larger service application. We took the definition of &#39;component from Martin Fowlers http://martinfowler.com/articles/microservice-testing/.","body":"Hi, a component is a microservice or a module in a larger service application. We took the definition of &#39;component from Martin Fowlers <a href=\"http://martinfowler.com/articles/microservice-testing/\" rel=\"nofollow noreferrer\">martinfowler.com/articles/microservice-testing</a>."}],"answers":[{"comments":[{"owner":{"account_id":8480305,"reputation":239,"user_id":6360199,"accept_rate":0,"display_name":"Joel Andersson"},"score":0,"creation_date":1481016891,"post_id":40987798,"comment_id":69192614,"body_markdown":"Thanks Beth, good point with the chaining aspect when stubbing. I guess that what I&#39;m after is some &quot;rule&quot; of how we should scope the tests so that we can create a common &quot;test strategy/best practice&quot; for all developers. We&#39;re a little afraid that if we allow everyone to do what they feel is most appropriate in each situation we will soon have a lot of different flavors of the provider tests. Emphasizing the chaining aspect may be one way to make sure we don&#39;t get any holes in the testing web even though we allow flexibility of where to stub.","body":"Thanks Beth, good point with the chaining aspect when stubbing. I guess that what I&#39;m after is some &quot;rule&quot; of how we should scope the tests so that we can create a common &quot;test strategy/best practice&quot; for all developers. We&#39;re a little afraid that if we allow everyone to do what they feel is most appropriate in each situation we will soon have a lot of different flavors of the provider tests. Emphasizing the chaining aspect may be one way to make sure we don&#39;t get any holes in the testing web even though we allow flexibility of where to stub."}],"tags":[],"owner":{"account_id":442166,"reputation":1333,"user_id":832671,"display_name":"Beth Skurrie"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1480998179,"creation_date":1480998179,"answer_id":40987798,"question_id":40984580,"body_markdown":"This is a question that comes up often, and my answer is &quot;do what makes sense for each service&quot;. The first microservices that pact was used for were so small and simple that it was easiest to just test the whole service without any mocks or stubs. The only difference between a call to the real service and a call in the verification test was that we used sqlite for the tests. Of course, we stubbed calls to downstream services. \r\n\r\nIf it&#39;s more complex to set up real data than it is to stub, then I&#39;d use stubs. **However**! If you are going to do this, then you need to make sure that the calls you stub are verified in the same way that pact works. Use some sort of shared fixture, and make sure that for every call that you stub in a pact provider test, you have a matching test to ensure the behaviour is as you expect it to be. It&#39;s like you&#39;re chaining collaboration/contract tests together like this: \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kxT3g.jpg","title":"What should be the scope of a Pact provider test?","body":"<p>This is a question that comes up often, and my answer is \"do what makes sense for each service\". The first microservices that pact was used for were so small and simple that it was easiest to just test the whole service without any mocks or stubs. The only difference between a call to the real service and a call in the verification test was that we used sqlite for the tests. Of course, we stubbed calls to downstream services. </p>\n\n<p>If it's more complex to set up real data than it is to stub, then I'd use stubs. <strong>However</strong>! If you are going to do this, then you need to make sure that the calls you stub are verified in the same way that pact works. Use some sort of shared fixture, and make sure that for every call that you stub in a pact provider test, you have a matching test to ensure the behaviour is as you expect it to be. It's like you're chaining collaboration/contract tests together like this: \n<a href=\"https://i.stack.imgur.com/kxT3g.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kxT3g.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":337103,"reputation":12857,"user_id":665163,"display_name":"J_A_X"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1481165583,"creation_date":1481165583,"answer_id":41030979,"question_id":40984580,"body_markdown":"I say go with Option 2.\r\n\r\nThe reason is because the whole *raison d&#39;etre* for Pact is to have confidence in your code change - that won&#39;t break the consumer, or that if it does, find a way to manage that change (versioning) while still keeping the interactions intact.\r\n\r\nTo be fully confident, you must use as much of the &#39;real&#39; code as possible, while the data can be mocked or real, it doesn&#39;t really matter at that point.  Remember that you want to be able to test as much of the production code before deploying it.\r\n\r\nThe way I use it, I have 2 types of tests, unit tests and Pact tests.  The unit tests make sure that my code doesn&#39;t break on stupid mistakes or bad inputs, which is great for mocking dependencies, while the Pact tests are used to test the interactions between the consumer and the provider and that my code change doesn&#39;t affect the request or the data format.  You could potentially mock dependencies here, but that might leave something open to breaking in production because that dependency might affect the request or data.\r\n\r\nIn the end though, it&#39;s all up to preference on how you use Pact, as long as you use it to test out the contracts between consumer and provider.","title":"What should be the scope of a Pact provider test?","body":"<p>I say go with Option 2.</p>\n\n<p>The reason is because the whole <em>raison d'etre</em> for Pact is to have confidence in your code change - that won't break the consumer, or that if it does, find a way to manage that change (versioning) while still keeping the interactions intact.</p>\n\n<p>To be fully confident, you must use as much of the 'real' code as possible, while the data can be mocked or real, it doesn't really matter at that point.  Remember that you want to be able to test as much of the production code before deploying it.</p>\n\n<p>The way I use it, I have 2 types of tests, unit tests and Pact tests.  The unit tests make sure that my code doesn't break on stupid mistakes or bad inputs, which is great for mocking dependencies, while the Pact tests are used to test the interactions between the consumer and the provider and that my code change doesn't affect the request or the data format.  You could potentially mock dependencies here, but that might leave something open to breaking in production because that dependency might affect the request or data.</p>\n\n<p>In the end though, it's all up to preference on how you use Pact, as long as you use it to test out the contracts between consumer and provider.</p>\n"},{"tags":[],"owner":{"account_id":8480305,"reputation":239,"user_id":6360199,"accept_rate":0,"display_name":"Joel Andersson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481722553,"creation_date":1481722553,"answer_id":41143992,"question_id":40984580,"body_markdown":"We have decided on option 2. That is we should strive towards including as much real code as possible in the provider tests. The primary reason was that to achieve test symmetry from the mocked spring beans in a complementary component test would be more complicated than to have a slightly more complicated provider test as a result of using option 2.\r\n\r\nThanks for your inputs! ","title":"What should be the scope of a Pact provider test?","body":"<p>We have decided on option 2. That is we should strive towards including as much real code as possible in the provider tests. The primary reason was that to achieve test symmetry from the mocked spring beans in a complementary component test would be more complicated than to have a slightly more complicated provider test as a result of using option 2.</p>\n\n<p>Thanks for your inputs! </p>\n"},{"tags":[],"owner":{"account_id":40307,"reputation":3297,"user_id":116810,"accept_rate":80,"display_name":"Kimball Robinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683027201,"creation_date":1683027201,"answer_id":76154431,"question_id":40984580,"body_markdown":"**We abandoned Pact.**\r\n\r\nIn my experience, pact solves some very specific problems that we didn&#39;t have. \r\n Like using a sledgehammer to drive a nail into the wall.\r\n\r\n**Back to your question:**\r\n\r\nPact is basically an attempt at creating a **shared mock** -- a declared request and response -- that is trustworthy *because* it is shared.  It solves the problem of untrustworthy mocks by having both client and service use the same declarations.  If you are further mocking out your service to verify *those* mocks, then you&#39;re just sidestepping what pact is about.\r\n\r\nThe problem with mocks is they aren&#39;t trustworthy. They&#39;re incomplete, they go out of date, and it can be hard to tell if they&#39;re correct just by looking at them; capturing realistic API output isn&#39;t feasible (manual capture, automated replay).\r\n\r\nThe typical mitigation strategy for untrusted mocks or mock data is to run another integration test that doesn&#39;t use the mock, with some shared validation code.\r\n\r\nSo, I would say, the whole point of pact is to have option #2.\r\n\r\n**Why I don&#39;t like pact**\r\n\r\nI would point out that pact does not solve all integration testing problems by any stretch.  The OP and some answers call this out. It seems like a heavy-handed approach to gatekeeping your environments, and probably indicates a lack of discipline/standards with those CICD quality gates - just one opinion here.\r\n\r\nI feel like pact is selling a solution most don&#39;t need.\r\n\r\n**Here&#39;s how I would describe the use case for needing pact.io (must fit all of these)**\r\n\r\n* HTTP Rest interactions are king (ignore events &amp; streams)\r\n* Fairly mainstream tech stacks with good pact language support\r\n* You don&#39;t mind a custom API specification DSL - ignore jsonschema.org or OAS, etc.\r\n* Your mocks aren&#39;t trustworthy unless they are shared and verified regularly.\r\n  * Rapidly changing API, rapidly evolving consumer needs\r\n  * API is not versioned or backward compatible - probably implying a high degree of coupling between client/service (maybe an architectural problem)\r\n* Consumers are driving the API changes (probably a rich UI)\r\n* Communication/coordination about API changes is difficult (maybe even dysfunctional):\r\n  * The API exposes the gory guts, entrails of your app model are spilling out, so every time the model changes, the API does too, whether you want it to or not.\r\n  * You have an organizational communication problem and want to solve it with high-tech dependency tracking tools, etc.\r\n  * You don&#39;t mind pact taking control of dependency tracking and verification; being the gatekeeper\r\n* You can&#39;t trust your dev/stage environment(s) -- they&#39;re too unstable, the service mesh too complex without fault tolerance, and creating an alt-stage or pre-prod environment is out of the question.\r\n\r\n* You can&#39;t validate your dev builds against stage instances in a meaningful way\r\n* You can&#39;t create shared integration tests due to high complexity and heavy build/test turnaround times.\r\n* It&#39;s worth teams spending huge amounts of time to understand pact, pact hooks, pact dependency tracking, can-i-deploy, and pact test design.  And it&#39;s worth continuing to pay that cost for every new hire, and for every employee to spend extra time wrapping their head around the hidden intricacices of pact every 6-12 months.\r\n\r\nOk, so I am a bit turned off by Pact in general.  Jaded?  I feel a bit wary of any claims that most implementations of XYZ tech failed because they don&#39;t have a top-down directive to use the technology.\r\n\r\n\r\n**Suggesting alternatives**\r\n* If you want to verify contracts, look into OAS/Swagger or json-schema.org contract verification (a more standard and supported DSL), or into 3rd party solutions/services that will mock both client and server interactions for you (even with record/replay),\r\n* Look at &quot;Conway&#39;s Law&quot; and how your teams are split up\r\n* In case it&#39;s not already clear, I&#39;m betting most orgs that need pact, actually need ...\r\n   * Better API versioning rules, \r\n   * Planned lifetime of APIs, with backward compatible API versions \r\n   * Stage environment quality gates or a secondary stage (pre-prod)\r\n   * Communication &amp; awareness of client dependencies\r\n   * Cross-team communication/dependency tracking is an issue that management isn&#39;t managing, and that teams don&#39;t have sufficient logging to track.\r\n   * Architectural problems need solving (probably a distributed monolith owing to rapid growth without architectural foresight?  Or something like that...)\r\n\r\n","title":"What should be the scope of a Pact provider test?","body":"<p><strong>We abandoned Pact.</strong></p>\n<p>In my experience, pact solves some very specific problems that we didn't have.\nLike using a sledgehammer to drive a nail into the wall.</p>\n<p><strong>Back to your question:</strong></p>\n<p>Pact is basically an attempt at creating a <strong>shared mock</strong> -- a declared request and response -- that is trustworthy <em>because</em> it is shared.  It solves the problem of untrustworthy mocks by having both client and service use the same declarations.  If you are further mocking out your service to verify <em>those</em> mocks, then you're just sidestepping what pact is about.</p>\n<p>The problem with mocks is they aren't trustworthy. They're incomplete, they go out of date, and it can be hard to tell if they're correct just by looking at them; capturing realistic API output isn't feasible (manual capture, automated replay).</p>\n<p>The typical mitigation strategy for untrusted mocks or mock data is to run another integration test that doesn't use the mock, with some shared validation code.</p>\n<p>So, I would say, the whole point of pact is to have option #2.</p>\n<p><strong>Why I don't like pact</strong></p>\n<p>I would point out that pact does not solve all integration testing problems by any stretch.  The OP and some answers call this out. It seems like a heavy-handed approach to gatekeeping your environments, and probably indicates a lack of discipline/standards with those CICD quality gates - just one opinion here.</p>\n<p>I feel like pact is selling a solution most don't need.</p>\n<p><strong>Here's how I would describe the use case for needing pact.io (must fit all of these)</strong></p>\n<ul>\n<li><p>HTTP Rest interactions are king (ignore events &amp; streams)</p>\n</li>\n<li><p>Fairly mainstream tech stacks with good pact language support</p>\n</li>\n<li><p>You don't mind a custom API specification DSL - ignore jsonschema.org or OAS, etc.</p>\n</li>\n<li><p>Your mocks aren't trustworthy unless they are shared and verified regularly.</p>\n<ul>\n<li>Rapidly changing API, rapidly evolving consumer needs</li>\n<li>API is not versioned or backward compatible - probably implying a high degree of coupling between client/service (maybe an architectural problem)</li>\n</ul>\n</li>\n<li><p>Consumers are driving the API changes (probably a rich UI)</p>\n</li>\n<li><p>Communication/coordination about API changes is difficult (maybe even dysfunctional):</p>\n<ul>\n<li>The API exposes the gory guts, entrails of your app model are spilling out, so every time the model changes, the API does too, whether you want it to or not.</li>\n<li>You have an organizational communication problem and want to solve it with high-tech dependency tracking tools, etc.</li>\n<li>You don't mind pact taking control of dependency tracking and verification; being the gatekeeper</li>\n</ul>\n</li>\n<li><p>You can't trust your dev/stage environment(s) -- they're too unstable, the service mesh too complex without fault tolerance, and creating an alt-stage or pre-prod environment is out of the question.</p>\n</li>\n<li><p>You can't validate your dev builds against stage instances in a meaningful way</p>\n</li>\n<li><p>You can't create shared integration tests due to high complexity and heavy build/test turnaround times.</p>\n</li>\n<li><p>It's worth teams spending huge amounts of time to understand pact, pact hooks, pact dependency tracking, can-i-deploy, and pact test design.  And it's worth continuing to pay that cost for every new hire, and for every employee to spend extra time wrapping their head around the hidden intricacices of pact every 6-12 months.</p>\n</li>\n</ul>\n<p>Ok, so I am a bit turned off by Pact in general.  Jaded?  I feel a bit wary of any claims that most implementations of XYZ tech failed because they don't have a top-down directive to use the technology.</p>\n<p><strong>Suggesting alternatives</strong></p>\n<ul>\n<li>If you want to verify contracts, look into OAS/Swagger or json-schema.org contract verification (a more standard and supported DSL), or into 3rd party solutions/services that will mock both client and server interactions for you (even with record/replay),</li>\n<li>Look at &quot;Conway's Law&quot; and how your teams are split up</li>\n<li>In case it's not already clear, I'm betting most orgs that need pact, actually need ...\n<ul>\n<li>Better API versioning rules,</li>\n<li>Planned lifetime of APIs, with backward compatible API versions</li>\n<li>Stage environment quality gates or a secondary stage (pre-prod)</li>\n<li>Communication &amp; awareness of client dependencies</li>\n<li>Cross-team communication/dependency tracking is an issue that management isn't managing, and that teams don't have sufficient logging to track.</li>\n<li>Architectural problems need solving (probably a distributed monolith owing to rapid growth without architectural foresight?  Or something like that...)</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":8480305,"reputation":239,"user_id":6360199,"accept_rate":0,"display_name":"Joel Andersson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2795,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":4,"score":20,"last_activity_date":1683027201,"creation_date":1480977183,"question_id":40984580,"body_markdown":"My organization started to use Pact for creating/verifying contracts between REST services/micro services written in Java about half a year ago.\r\nWe have a hard time deciding what the appropriate scope or grasp of a provider test should be and would love some input from the experience of other pact users out there. \r\n\r\nBasically the discussion evolves around where to mock/stub in the provider tests. In a service you would have to mock external calls to other services at least but you have the option of mocking closer to the REST resource class as well.\r\n\r\nWe boiled it down to two options:\r\n\r\n**1.** The first option is that a provider test should be a strict contract test and only exercise the provider service&#39;s REST resource class, mocking/stubbing out the service classes/orchestrators etc. used from there. This contract test would be augmented with component tests that would test the parts stubbed/mocked by the provider test.\r\n\r\n**2.** The second option is to use the provider test as a component test that would exercise the entire service component for each request. Only transitive external calls to other components would be mocked/stubbed.\r\n\r\n**These are thoughts of pro&#39;s for each option**\r\n\r\n**Pro&#39;s for option 1:** \r\n\r\n - Tests will be simpler to implement and will get a smaller footprint  \r\n   =&gt; higher degree of isolation. \r\n - We probably need other component tests anyway to cover use cases typically not covered in the consumer&#39;s\r\n   expectancies (error flows    etc). This way we wouldn&#39;t mix different\r\n   kinds of component tests    (Pact and other) in one bag, making the test suite easier to understand.\r\n\r\n**Pro&#39;s for option 2:**\r\n\r\n - Tests are exercising more of the &quot;real&quot; code =&gt; less risk for test\r\n   bugs due to bad mocking/stubbing.\r\n\r\nI would be really interested to hear how your provider tests typically look in this regard. Is there a best practice?\r\n\r\nClarifying what we mean by &quot;Component&quot;:\r\nA component is a microservice or a module in a larger service application. We took the definition of &#39;component from Martin Fowlers http://martinfowler.com/articles/microservice-testing/.\r\n\r\nA provider service/component typically has a REST endpoint in a  Jersey resource class. This endpoint is the provider endpoint for a Pact provider test. An Example: \r\n\r\n    @Path(&quot;/customer&quot;)\r\n    public class CustomerResource {\r\n    \r\n        @Autowired private CustomerOrchestrator customerOrchestrator;\r\n    \r\n        @GET\r\n        @Path(&quot;/{customerId}&quot;)\r\n        @Produces(MediaType.APPLICATION_JSON)\r\n        public Response get(@PathParam(&quot;customerId&quot;) String id) {\r\n            CustomerId customerId = CustomerIdValidator.validate(id);\r\n            return Response.ok(toJson(customerOrchestrator.getCustomer(customerId))).build();\r\n        }\r\n\r\nIn the above example the @Autowired (we use spring) CustomerOrchestrator could either be mocked when running the provider test or you could inject the real &quot;Impl&quot; class. If you choose to inject the real &quot;CustomerOrchestratorImpl.class&quot; it would have additional @Autowired bean dependencies that in turn may have other... etc. Finally the dependencies will end up either in a DAO-object that will make a database call or a REST client that will perform HTTP calls to other downstream services/components.\r\n\r\nIf we were to adopt my &quot;option 1&quot; solution in the above example we would mock the customerOrchestrator field in the CustomerResource and if we were adopting &quot;option 2&quot; we would inject Impl-classes (the real classes) for each dependency in the CustomerResource dependency graph and create mocked database entries and mocked downstream services instead.\r\n\r\nAs a side note I should mention that we rarely actually use a real database in provider tests. In the cases where we adopted &quot;option 2&quot; we have mocked the DAO-class layer instead of mocking the actual database data to reduce the number of moving parts in the test.\r\n\r\nWe have created a &quot;test framework&quot; that automatically mocks any Autowired dependency that is not explicitly declared in the spring context so stubbing/mocking is a light weight process for us. This is an excerpt of a provider test that exercises the CustomerResource and initiates the stubbed CustomerOrchestrator bean:\r\n\r\n    @RunWith(PactRunner.class)\r\n    @Provider(&quot;customer-rest-api&quot;)\r\n    @PactCachedLoader(CustomerProviderContractTest.class)\r\n    public class CustomerProviderContractTest {\r\n    \r\n        @ClassRule\r\n        public static PactJerseyWebbAppDescriptorRule webAppRule = buildWebAppDescriptorRule();\r\n    \r\n        @Rule\r\n        public PactJerseyTestRule jersyTestRule = new PactJerseyTestRule(webAppRule.appDescriptor);\r\n    \r\n        @TestTarget public final Target target = new HttpTarget(jersyTestRule.port);\r\n    \r\n        private static PactJerseyWebbAppDescriptorRule buildWebAppDescriptorRule() {\r\n            return PactJerseyWebbAppDescriptorRule.Builder.getBuilder()\r\n                .withContextConfigLocation(&quot;classpath:applicationContext-test.xml&quot;)\r\n                .withRestResourceClazzes(CustomerResource.class)\r\n                .withPackages(&quot;api.rest.customer&quot;)\r\n                .build();\r\n        }\r\n    \r\n        @State(&quot;that customer with id 1111111 exists&quot;)\r\n        public void state1() throws Exception {\r\n            CustomerOrchestrator customerOrchestratorStub = SpringApplicationContext.getBean(CustomerOrchestrator.class)\r\n           when(customerOrchestratorStub.getCustomer(eq(&quot;1111111&quot;))).thenReturn(createMockedCustomer(&quot;1111111));\r\n    \r\n        }\r\n        ...\r\n\r\n","title":"What should be the scope of a Pact provider test?","body":"<p>My organization started to use Pact for creating/verifying contracts between REST services/micro services written in Java about half a year ago.\nWe have a hard time deciding what the appropriate scope or grasp of a provider test should be and would love some input from the experience of other pact users out there. </p>\n\n<p>Basically the discussion evolves around where to mock/stub in the provider tests. In a service you would have to mock external calls to other services at least but you have the option of mocking closer to the REST resource class as well.</p>\n\n<p>We boiled it down to two options:</p>\n\n<p><strong>1.</strong> The first option is that a provider test should be a strict contract test and only exercise the provider service's REST resource class, mocking/stubbing out the service classes/orchestrators etc. used from there. This contract test would be augmented with component tests that would test the parts stubbed/mocked by the provider test.</p>\n\n<p><strong>2.</strong> The second option is to use the provider test as a component test that would exercise the entire service component for each request. Only transitive external calls to other components would be mocked/stubbed.</p>\n\n<p><strong>These are thoughts of pro's for each option</strong></p>\n\n<p><strong>Pro's for option 1:</strong> </p>\n\n<ul>\n<li>Tests will be simpler to implement and will get a smaller footprint<br>\n=> higher degree of isolation. </li>\n<li>We probably need other component tests anyway to cover use cases typically not covered in the consumer's\nexpectancies (error flows    etc). This way we wouldn't mix different\nkinds of component tests    (Pact and other) in one bag, making the test suite easier to understand.</li>\n</ul>\n\n<p><strong>Pro's for option 2:</strong></p>\n\n<ul>\n<li>Tests are exercising more of the \"real\" code => less risk for test\nbugs due to bad mocking/stubbing.</li>\n</ul>\n\n<p>I would be really interested to hear how your provider tests typically look in this regard. Is there a best practice?</p>\n\n<p>Clarifying what we mean by \"Component\":\nA component is a microservice or a module in a larger service application. We took the definition of 'component from Martin Fowlers <a href=\"http://martinfowler.com/articles/microservice-testing/\" rel=\"noreferrer\">http://martinfowler.com/articles/microservice-testing/</a>.</p>\n\n<p>A provider service/component typically has a REST endpoint in a  Jersey resource class. This endpoint is the provider endpoint for a Pact provider test. An Example: </p>\n\n<pre><code>@Path(\"/customer\")\npublic class CustomerResource {\n\n    @Autowired private CustomerOrchestrator customerOrchestrator;\n\n    @GET\n    @Path(\"/{customerId}\")\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response get(@PathParam(\"customerId\") String id) {\n        CustomerId customerId = CustomerIdValidator.validate(id);\n        return Response.ok(toJson(customerOrchestrator.getCustomer(customerId))).build();\n    }\n</code></pre>\n\n<p>In the above example the @Autowired (we use spring) CustomerOrchestrator could either be mocked when running the provider test or you could inject the real \"Impl\" class. If you choose to inject the real \"CustomerOrchestratorImpl.class\" it would have additional @Autowired bean dependencies that in turn may have other... etc. Finally the dependencies will end up either in a DAO-object that will make a database call or a REST client that will perform HTTP calls to other downstream services/components.</p>\n\n<p>If we were to adopt my \"option 1\" solution in the above example we would mock the customerOrchestrator field in the CustomerResource and if we were adopting \"option 2\" we would inject Impl-classes (the real classes) for each dependency in the CustomerResource dependency graph and create mocked database entries and mocked downstream services instead.</p>\n\n<p>As a side note I should mention that we rarely actually use a real database in provider tests. In the cases where we adopted \"option 2\" we have mocked the DAO-class layer instead of mocking the actual database data to reduce the number of moving parts in the test.</p>\n\n<p>We have created a \"test framework\" that automatically mocks any Autowired dependency that is not explicitly declared in the spring context so stubbing/mocking is a light weight process for us. This is an excerpt of a provider test that exercises the CustomerResource and initiates the stubbed CustomerOrchestrator bean:</p>\n\n<pre><code>@RunWith(PactRunner.class)\n@Provider(\"customer-rest-api\")\n@PactCachedLoader(CustomerProviderContractTest.class)\npublic class CustomerProviderContractTest {\n\n    @ClassRule\n    public static PactJerseyWebbAppDescriptorRule webAppRule = buildWebAppDescriptorRule();\n\n    @Rule\n    public PactJerseyTestRule jersyTestRule = new PactJerseyTestRule(webAppRule.appDescriptor);\n\n    @TestTarget public final Target target = new HttpTarget(jersyTestRule.port);\n\n    private static PactJerseyWebbAppDescriptorRule buildWebAppDescriptorRule() {\n        return PactJerseyWebbAppDescriptorRule.Builder.getBuilder()\n            .withContextConfigLocation(\"classpath:applicationContext-test.xml\")\n            .withRestResourceClazzes(CustomerResource.class)\n            .withPackages(\"api.rest.customer\")\n            .build();\n    }\n\n    @State(\"that customer with id 1111111 exists\")\n    public void state1() throws Exception {\n        CustomerOrchestrator customerOrchestratorStub = SpringApplicationContext.getBean(CustomerOrchestrator.class)\n       when(customerOrchestratorStub.getCustomer(eq(\"1111111\"))).thenReturn(createMockedCustomer(\"1111111));\n\n    }\n    ...\n</code></pre>\n"},{"tags":["java","java-native-interface"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1447250277,"post_id":33652091,"comment_id":55077391,"body_markdown":"Doesn&#39;t it tell you _which_ directory or file is missing?","body":"Doesn&#39;t it tell you <i>which</i> directory or file is missing?"},{"owner":{"account_id":7281015,"reputation":76,"user_id":5550782,"display_name":"crackcraft"},"score":0,"creation_date":1447259202,"post_id":33652091,"comment_id":55083461,"body_markdown":"No. It is a result of perror","body":"No. It is a result of perror"}],"answers":[{"comments":[{"owner":{"account_id":2996877,"reputation":2143,"user_id":2543253,"display_name":"user2543253"},"score":0,"creation_date":1447420304,"post_id":33687153,"comment_id":55158391,"body_markdown":"To add to this: you can check for an existing Java VM with `JNI_GetCreatedJavaVMs` and reuse the one found.","body":"To add to this: you can check for an existing Java VM with <code>JNI_GetCreatedJavaVMs</code> and reuse the one found."},{"owner":{"account_id":11687350,"reputation":363,"user_id":13947194,"display_name":"user13947194"},"score":0,"creation_date":1692104920,"post_id":33687153,"comment_id":135577089,"body_markdown":"JNI is BS. Then how does Java propose you add fresh options? How doe Java propose two users of the JVM will not add options that conflict in what they are trying to do?","body":"JNI is BS. Then how does Java propose you add fresh options? How doe Java propose two users of the JVM will not add options that conflict in what they are trying to do?"}],"tags":[],"owner":{"account_id":7281015,"reputation":76,"user_id":5550782,"display_name":"crackcraft"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683026539,"creation_date":1447396574,"answer_id":33687153,"question_id":33652091,"body_markdown":"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#destroy_java_vm\r\n&gt; ... The JDK/JRE still does not support VM unloading, however. \r\n\r\nIn addition, OpenJDK&#39;s bug report [JDK-4712793](https://bugs.openjdk.org/browse/JDK-4712793) &quot;JNI : Failure in JNI_CreateJavaVM() after calling DestroyJavaVM()&quot; states:\r\n \r\n&gt; ... As of JDK/JRE 1.2 , creation of multiple VMs in a single process is not supported.&quot;\r\n&gt; \r\n&gt; The last line implies that that once a VM is created and destroyed, one\r\ncannot start another VM. A simple test case was used to reproduce the problem as specified in the pseudo-code, and the JNI_CreateJavaVM correctly returns !JNI_OK.\r\n","title":"Is it possible to re-create JVM?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#destroy_java_vm\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#destroy_java_vm</a></p>\n<blockquote>\n<p>... The JDK/JRE still does not support VM unloading, however.</p>\n</blockquote>\n<p>In addition, OpenJDK's bug report <a href=\"https://bugs.openjdk.org/browse/JDK-4712793\" rel=\"nofollow noreferrer\">JDK-4712793</a> &quot;JNI : Failure in JNI_CreateJavaVM() after calling DestroyJavaVM()&quot; states:</p>\n<blockquote>\n<p>... As of JDK/JRE 1.2 , creation of multiple VMs in a single process is not supported.&quot;</p>\n<p>The last line implies that that once a VM is created and destroyed, one\ncannot start another VM. A simple test case was used to reproduce the problem as specified in the pseudo-code, and the JNI_CreateJavaVM correctly returns !JNI_OK.</p>\n</blockquote>\n"}],"owner":{"account_id":7281015,"reputation":76,"user_id":5550782,"display_name":"crackcraft"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1683026539,"creation_date":1447250223,"question_id":33652091,"body_markdown":"I have quite simple code that creates a JVM instance and destroys it.\r\n\r\n    status = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\r\n    ...\r\n    status = (*jvm)-&gt;DestroyJavaVM(jvm);\r\n    ...\r\nIt works OK, JVM is operational, statuses are successful.\r\n\r\nBut when I try to execute it once again, it fails with a strange error &quot;No such file or directory&quot;. In the same manner for oracle and open jdk of different versions. Could anybody explain it?\r\n\r\nFull sample code:\r\nhttps://github.com/crackcraft/create_destoy_jvm\r\n","title":"Is it possible to re-create JVM?","body":"<p>I have quite simple code that creates a JVM instance and destroys it.</p>\n\n<pre><code>status = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n...\nstatus = (*jvm)-&gt;DestroyJavaVM(jvm);\n...\n</code></pre>\n\n<p>It works OK, JVM is operational, statuses are successful.</p>\n\n<p>But when I try to execute it once again, it fails with a strange error \"No such file or directory\". In the same manner for oracle and open jdk of different versions. Could anybody explain it?</p>\n\n<p>Full sample code:\n<a href=\"https://github.com/crackcraft/create_destoy_jvm\" rel=\"nofollow\">https://github.com/crackcraft/create_destoy_jvm</a></p>\n"},{"tags":["java","stringbuffer"],"comments":[{"owner":{"account_id":7332862,"reputation":2002,"user_id":5585182,"accept_rate":62,"display_name":"Albert Bos"},"score":0,"creation_date":1448313431,"post_id":33880756,"comment_id":55526066,"body_markdown":"Why is it necessary to do it in `StringBuffer`? Doesn&#39;t  `stringBuffer.toString().replaceAll(regex, substr);` do the job?","body":"Why is it necessary to do it in <code>StringBuffer</code>? Doesn&#39;t  <code>stringBuffer.toString().replaceAll(regex, substr);</code> do the job?"}],"answers":[{"comments":[{"owner":{"account_id":2008878,"reputation":15778,"user_id":1797912,"accept_rate":60,"display_name":"Chriki"},"score":0,"creation_date":1448985508,"post_id":33880939,"comment_id":55804436,"body_markdown":"Glad it helped! You can also mark this answer as accepted (with the green check mark) and/or mark it as useful (using the up arrow) :-)","body":"Glad it helped! You can also mark this answer as accepted (with the green check mark) and/or mark it as useful (using the up arrow) :-)"}],"tags":[],"owner":{"account_id":2008878,"reputation":15778,"user_id":1797912,"accept_rate":60,"display_name":"Chriki"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1448313744,"creation_date":1448313744,"answer_id":33880939,"question_id":33880756,"body_markdown":"There is no such method on `StringBuffer`. Perhaps the following will help:\r\n\r\n    StringBuffer str1 = new StringBuffer(&quot;whatever&quot;);\r\n    // to get a String result:\r\n    String str2 = str1.toString().replaceAll(regex, substr);\r\n    // to get a StringBuffer result:\r\n    StringBuffer str3 = new StringBuffer(str2);","title":"How to use replaceAll() method in StringBuffer?","body":"<p>There is no such method on <code>StringBuffer</code>. Perhaps the following will help:</p>\n\n<pre><code>StringBuffer str1 = new StringBuffer(\"whatever\");\n// to get a String result:\nString str2 = str1.toString().replaceAll(regex, substr);\n// to get a StringBuffer result:\nStringBuffer str3 = new StringBuffer(str2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18308320,"reputation":41,"user_id":13331711,"display_name":"bill tsi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683026487,"creation_date":1683017640,"answer_id":76153241,"question_id":33880756,"body_markdown":"This solution is a bit more optimized, as it does not create new strings or string buffers.\r\nSuppose you want to replace str1 with str2.\r\n\r\n\r\n    \r\n    StringBuffer strBuf = new StringBuffer(&quot;yourString&quot;);\r\n    int startIndex = strBuf.indexOf(str1);\r\n    while(startIndex != -1){\r\n        strBuf.replace(start, start + str1.length(), str2);\r\n        start = strBuf.indexOf(str1, start + str1.length());\r\n    }\r\n\r\nWith this method, you find the index of each occurance of str1 in your buffer and replace it one by one with str2. The method indexOf(String str, int index), returns the index of the first occurance of str starting from index.\r\n\r\n\r\n\r\n","title":"How to use replaceAll() method in StringBuffer?","body":"<p>This solution is a bit more optimized, as it does not create new strings or string buffers.\nSuppose you want to replace str1 with str2.</p>\n<pre><code>StringBuffer strBuf = new StringBuffer(&quot;yourString&quot;);\nint startIndex = strBuf.indexOf(str1);\nwhile(startIndex != -1){\n    strBuf.replace(start, start + str1.length(), str2);\n    start = strBuf.indexOf(str1, start + str1.length());\n}\n</code></pre>\n<p>With this method, you find the index of each occurance of str1 in your buffer and replace it one by one with str2. The method indexOf(String str, int index), returns the index of the first occurance of str starting from index.</p>\n"}],"owner":{"account_id":7060208,"reputation":59,"user_id":5405773,"display_name":"Ashokkumar Kandaswamy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12866,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1683026487,"creation_date":1448312951,"question_id":33880756,"body_markdown":"I need to replace multiple words in a string buffer. So I am looking for a `replaceAll` method in `StringBuffer`.\r\n\r\nSo do we have it in `StringBuffer`?\r\n\r\nString method:\r\n\r\n    str2 = str1.replaceAll(regex, substr);\r\n    // (This is String method, I need like this in StringBuffer)\r\n","title":"How to use replaceAll() method in StringBuffer?","body":"<p>I need to replace multiple words in a string buffer. So I am looking for a <code>replaceAll</code> method in <code>StringBuffer</code>.</p>\n\n<p>So do we have it in <code>StringBuffer</code>?</p>\n\n<p>String method:</p>\n\n<pre><code>str2 = str1.replaceAll(regex, substr);\n// (This is String method, I need like this in StringBuffer)\n</code></pre>\n"},{"tags":["java","spring","kubernetes","out-of-memory"],"answers":[{"comments":[{"owner":{"account_id":7758338,"reputation":533,"user_id":5871863,"accept_rate":50,"display_name":"Norbert Koch"},"score":0,"creation_date":1683026318,"post_id":76154295,"comment_id":134300335,"body_markdown":"the OOMKilled is a state from k8s. The JVM does not terminates, but the container. A Heap Dump would never be written, because the JVM Limits are not reached. The JVM limits are below the pod limits. k8s is terminating the container because of too high ram consumption.\nI aggree with you, the throttling is not the only solution, nevertheless I cannot see the real reason for that behavior.","body":"the OOMKilled is a state from k8s. The JVM does not terminates, but the container. A Heap Dump would never be written, because the JVM Limits are not reached. The JVM limits are below the pod limits. k8s is terminating the container because of too high ram consumption. I aggree with you, the throttling is not the only solution, nevertheless I cannot see the real reason for that behavior."},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683031063,"post_id":76154295,"comment_id":134301364,"body_markdown":"@NorbertKoch I see. Thanks for the hint. Would you mind sharing the name of the image (and the build file, e.g. Dockerfile) of your container? Are there other processes running in the container that also consume memory?","body":"@NorbertKoch I see. Thanks for the hint. Would you mind sharing the name of the image (and the build file, e.g. Dockerfile) of your container? Are there other processes running in the container that also consume memory?"},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683031186,"post_id":76154295,"comment_id":134301393,"body_markdown":"If you can easily recreate the peak/OOM case, can you exec into the container and run the following diagnostics and provide their outputs (just before the container gets killed)?\n\n# garbage collection statistics\n`jstat -gc 1`\n\n# show the 3 memory intensive processes\n`ps aux | sort -rnk 4 | head -3`\n\n# show the total virtual memory used by those processes\n`ps aux | sort -rnk 4 | head -3 | awk &#39;{print $2}&#39; | xargs -I{} cat /proc/{}/status | grep VmSize`","body":"If you can easily recreate the peak/OOM case, can you exec into the container and run the following diagnostics and provide their outputs (just before the container gets killed)?  # garbage collection statistics <code>jstat -gc 1</code>  # show the 3 memory intensive processes <code>ps aux | sort -rnk 4 | head -3</code>  # show the total virtual memory used by those processes <code>ps aux | sort -rnk 4 | head -3 | awk &#39;{print $2}&#39; | xargs -I{} cat &#47;proc&#47;{}&#47;status | grep VmSize</code>"},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683031307,"post_id":76154295,"comment_id":134301427,"body_markdown":"What is the output of `kubectl get events | grep Warning` after the container gets killed?","body":"What is the output of <code>kubectl get events | grep Warning</code> after the container gets killed?"},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683032111,"post_id":76154295,"comment_id":134301623,"body_markdown":"Btw different java images may have different versions of the JVM and its components, and different default configuration settings especially in terms of memory consumption and memory management. It&#39;ld be worth trying to run the tests with different images also..","body":"Btw different java images may have different versions of the JVM and its components, and different default configuration settings especially in terms of memory consumption and memory management. It&#39;ld be worth trying to run the tests with different images also.."},{"owner":{"account_id":7758338,"reputation":533,"user_id":5871863,"accept_rate":50,"display_name":"Norbert Koch"},"score":0,"creation_date":1683032914,"post_id":76154295,"comment_id":134301845,"body_markdown":"Thanks @KenanG&#252;ler. I&#39;m currently on it to reproduce the issue. But it takes some time, then I will provide the requested information. Docker base image is: `eclipse-temurin:17-jre-alpine` with some permission stuff and the jar file as entrypoint. I provide all information immediatly after I gathered to reproduce the behavior manually.","body":"Thanks @KenanG&#252;ler. I&#39;m currently on it to reproduce the issue. But it takes some time, then I will provide the requested information. Docker base image is: <code>eclipse-temurin:17-jre-alpine</code> with some permission stuff and the jar file as entrypoint. I provide all information immediatly after I gathered to reproduce the behavior manually."},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683043898,"post_id":76154295,"comment_id":134304737,"body_markdown":"The output of `kubectl top pod -n POD_NAMESPACE POD_NAME` would be of interest, if you have the [Kubernetes Metrics Server](https://github.com/kubernetes-sigs/metrics-server) installed on the cluster - again just before the container gets killed.","body":"The output of <code>kubectl top pod -n POD_NAMESPACE POD_NAME</code> would be of interest, if you have the <a href=\"https://github.com/kubernetes-sigs/metrics-server\" rel=\"nofollow noreferrer\">Kubernetes Metrics Server</a> installed on the cluster - again just before the container gets killed."},{"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"score":0,"creation_date":1683046239,"post_id":76154295,"comment_id":134305285,"body_markdown":"The `ps` related commands I provided might not work on `eclipse-temurin:17-jre-alpine`. You can use `ps a -o pid,vsz,rss,args | head -4 | tail -3 | sort -rnk 3` to retrieve *RSS* and *VSZ* related info though. Also if you are not able to reproduce this manually/easily, I&#39;ld mount a temporary volume into the container (`emptyDir` would also do) and start the diagnostic relevant commands in the background (using `setsid` and `watch` may help) and redirect their output to a file (in the mounted volume). They&#39;ld run until the container eventually gets killed...","body":"The <code>ps</code> related commands I provided might not work on <code>eclipse-temurin:17-jre-alpine</code>. You can use <code>ps a -o pid,vsz,rss,args | head -4 | tail -3 | sort -rnk 3</code> to retrieve <i>RSS</i> and <i>VSZ</i> related info though. Also if you are not able to reproduce this manually/easily, I&#39;ld mount a temporary volume into the container (<code>emptyDir</code> would also do) and start the diagnostic relevant commands in the background (using <code>setsid</code> and <code>watch</code> may help) and redirect their output to a file (in the mounted volume). They&#39;ld run until the container eventually gets killed..."}],"tags":[],"owner":{"account_id":17980794,"reputation":1888,"user_id":13067200,"display_name":"Kenan G&#252;ler"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683026063,"creation_date":1683026063,"answer_id":76154295,"question_id":76153774,"body_markdown":"It is possible for CPU throttling to indirectly cause memory issues by making garbage collection in the JVM less efficient or escalate an already inefficient memory usage, as such it may result in slower response times for your application, leading to more requests being queued up and more memory being used making the application store more objects in memory while waiting for requests to be processed.\r\n\r\nThe JVM flags that you have set are a good starting point. To further investigate any memory leaks you might want to use the followings to dump the heap on an OOM and analyze the dump with a tool like Java VisualVM to find the root cause.\r\n\r\n```\r\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/heapdump.bin\r\n```\r\n\r\n&gt; Throttling is an expected behavior for peaks to slow down. \r\n\r\nYes, but I would consider CPU throttling more of a handbrake here and not the only *solution*. Instead I would implement an appropriate mechanism (like rate limiting, request queuing, circuit breakers, or backpressure throttling) either in the application or at the load balancer/reverse proxy level to prevent queues from forming.","title":"Can CPU Throttling results in OOMKilled states in k8s?","body":"<p>It is possible for CPU throttling to indirectly cause memory issues by making garbage collection in the JVM less efficient or escalate an already inefficient memory usage, as such it may result in slower response times for your application, leading to more requests being queued up and more memory being used making the application store more objects in memory while waiting for requests to be processed.</p>\n<p>The JVM flags that you have set are a good starting point. To further investigate any memory leaks you might want to use the followings to dump the heap on an OOM and analyze the dump with a tool like Java VisualVM to find the root cause.</p>\n<pre><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/heapdump.bin\n</code></pre>\n<blockquote>\n<p>Throttling is an expected behavior for peaks to slow down.</p>\n</blockquote>\n<p>Yes, but I would consider CPU throttling more of a handbrake here and not the only <em>solution</em>. Instead I would implement an appropriate mechanism (like rate limiting, request queuing, circuit breakers, or backpressure throttling) either in the application or at the load balancer/reverse proxy level to prevent queues from forming.</p>\n"}],"owner":{"account_id":7758338,"reputation":533,"user_id":5871863,"accept_rate":50,"display_name":"Norbert Koch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683026100,"creation_date":1683021867,"question_id":76153774,"body_markdown":"My pod is running in k8s and restarts every 20-30 hours, caused by an `OOMKilled` error, here are the configured limits:\r\n\r\n      limits:\r\n        cpu: 600m\r\n        memory: 1536Mi\r\n      requests:\r\n        cpu: 150m\r\n        memory: 1536Mi\r\n\r\nIn the container is a JVM (Spring Boot) running with the following Options:\r\n\r\n    -Xms256m -Xmx1G -Xdebug -XX:+UseG1GC -XX:MinHeapFreeRatio=15 -XX:MaxHeapFreeRatio=26\r\n\r\n**Analysis of the JVM Metrics**\r\n\r\nFrom my point of view, I can see, that there is a load peak, but not high enough to reach the memory limits, however the CPU Usage increases rapidly:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**Analysis of the Pod Metrics**\r\n\r\n Let me show you the metrics of the pod provided by k8s:\r\n[![enter image description here][2]][2]\r\n\r\nMemory increases much more than in the JVM shows. CPU Throttling is active. But I do not find the root cause. It seems that the container reaches the Limits and not the JVM, but why? Can CPU throttling causes Memory issues? Throttling is an expected behavior for peaks to slow down. I do not expect any memory issues in that case.\r\n\r\n  [1]: https://i.stack.imgur.com/SRbds.png\r\n  [2]: https://i.stack.imgur.com/D8ZqM.png","title":"Can CPU Throttling results in OOMKilled states in k8s?","body":"<p>My pod is running in k8s and restarts every 20-30 hours, caused by an <code>OOMKilled</code> error, here are the configured limits:</p>\n<pre><code>  limits:\n    cpu: 600m\n    memory: 1536Mi\n  requests:\n    cpu: 150m\n    memory: 1536Mi\n</code></pre>\n<p>In the container is a JVM (Spring Boot) running with the following Options:</p>\n<pre><code>-Xms256m -Xmx1G -Xdebug -XX:+UseG1GC -XX:MinHeapFreeRatio=15 -XX:MaxHeapFreeRatio=26\n</code></pre>\n<p><strong>Analysis of the JVM Metrics</strong></p>\n<p>From my point of view, I can see, that there is a load peak, but not high enough to reach the memory limits, however the CPU Usage increases rapidly:\n<a href=\"https://i.stack.imgur.com/SRbds.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SRbds.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Analysis of the Pod Metrics</strong></p>\n<p>Let me show you the metrics of the pod provided by k8s:\n<a href=\"https://i.stack.imgur.com/D8ZqM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D8ZqM.png\" alt=\"enter image description here\" /></a></p>\n<p>Memory increases much more than in the JVM shows. CPU Throttling is active. But I do not find the root cause. It seems that the container reaches the Limits and not the JVM, but why? Can CPU throttling causes Memory issues? Throttling is an expected behavior for peaks to slow down. I do not expect any memory issues in that case.</p>\n"},{"tags":["java","tomcat","memory-leaks"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682336860,"post_id":76091336,"comment_id":134193977,"body_markdown":"What is your garbage collection scheme you added into setenv.sh in tomcat? Did you assign a G1 garbage collector? Or did you call System or runtime gc() ,of I might add would be unhelpful if it were associated with a thread that is simply shutting down!","body":"What is your garbage collection scheme you added into setenv.sh in tomcat? Did you assign a G1 garbage collector? Or did you call System or runtime gc() ,of I might add would be unhelpful if it were associated with a thread that is simply shutting down!"},{"owner":{"account_id":9000207,"reputation":282,"user_id":6709113,"display_name":"Sergio Otero Lopez"},"score":0,"creation_date":1682339600,"post_id":76091336,"comment_id":134194526,"body_markdown":"I was using the default GC (Parallel?), but i&#39;ve tried G1 and the leak is still present. For what i know, analyzing with MAT does not need a previous GC because it computes object visibility, but i also clicked on &quot;Perform GC&quot; within VisualVM. Also, you can call manual GC to free memory before it&#39;s needed, but you shouldn&#39;t get an OutOfMemory when reloading several times if it&#39;s not really retained by something outside the app classloader created by Tomcat","body":"I was using the default GC (Parallel?), but i&#39;ve tried G1 and the leak is still present. For what i know, analyzing with MAT does not need a previous GC because it computes object visibility, but i also clicked on &quot;Perform GC&quot; within VisualVM. Also, you can call manual GC to free memory before it&#39;s needed, but you shouldn&#39;t get an OutOfMemory when reloading several times if it&#39;s not really retained by something outside the app classloader created by Tomcat"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682340168,"post_id":76091336,"comment_id":134194662,"body_markdown":"I&#39;d then take a very careful look at the server startup command line environments for everything configured, particularly the -Xms  -Xmx  -Xss.see that they are calculated properly. You may want to take a look in this could help also, it&#39;s very tough at this time, and the early docs on server memory alloc were beaten around by data loss from crashes beyond my control but not dangerous in the docs.   https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=drivesdk","body":"I&#39;d then take a very careful look at the server startup command line environments for everything configured, particularly the -Xms  -Xmx  -Xss.see that they are calculated properly. You may want to take a look in this could help also, it&#39;s very tough at this time, and the early docs on server memory alloc were beaten around by data loss from crashes beyond my control but not dangerous in the docs.   <a href=\"https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=drivesdk\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3720263,"reputation":1076,"user_id":3095500,"display_name":"utrucceh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683026080,"creation_date":1683026080,"answer_id":76154299,"question_id":76091336,"body_markdown":"Don&#39;t lost your time for fix it, it is an very old bug, which is not fixing. Even if you use `redoploy` it is not helping. So use `restart` or shift to another alternatives like `payara` or `glassfish`. \r\n\r\nMore details for this bug: https://stackoverflow.com/questions/41718907/memory-leak-when-redeploying-application-in-tomcat","title":"Tomcat and MemoryAnalyzer don&#39;t show any problem but an application does not get Garbage Collected","body":"<p>Don't lost your time for fix it, it is an very old bug, which is not fixing. Even if you use <code>redoploy</code> it is not helping. So use <code>restart</code> or shift to another alternatives like <code>payara</code> or <code>glassfish</code>.</p>\n<p>More details for this bug: <a href=\"https://stackoverflow.com/questions/41718907/memory-leak-when-redeploying-application-in-tomcat\">Memory leak when redeploying application in Tomcat</a></p>\n"}],"owner":{"account_id":9000207,"reputation":282,"user_id":6709113,"display_name":"Sergio Otero Lopez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683026080,"creation_date":1682335193,"question_id":76091336,"body_markdown":"I&#39;ve been attempting to solve all memory leaks that prevent an application from reloading successfully on tomcat.\r\n\r\nI first started with Tomcat logs saying the application had a thread that didn&#39;t stop (Eclipse EMF Reference Cleaner had to be disabled with org.eclipse.emf.common.util.ReferenceClearingQueue=false).\r\n\r\nThen solving 2 ThreadLocals not properly handled on some libraries (updating them solved it).\r\n\r\nThen, with the help of Eclipse Memory Analyzer (MAT) i found that the classloader was being retained by a JVM shutdownhook that Log4J2 uses (https://stackoverflow.com/questions/30657619/programmatically-disabling-shutdown-hook-in-log4j-2).\r\n\r\nAnd now i don&#39;t get any Tomcat warning and MAT can&#39;t find any references to my classes other than weak/soft, but it still does not get Gargage Collected.\r\n\r\nWith MAT i can confirm that all my classes are retained twice:\r\n\r\n[![MAT Histogram][1]][1]\r\n[![Merge Shortests Paths to GC Roots exclude all Weak/Soft/Phatom references][2]][2]\r\n\r\nI have updated to latests Tomcat 9.0.74 and Eclipse Adoptium jdk-8.0.372.7-hotspot, but nothing has changed.\r\n\r\nTomcat logs don&#39;t show anything relevant on app restart (they did before solving thread locals and thread stopping)\r\n\r\n    abr 24, 2023 12:19:41 PM org.apache.catalina.core.StandardContext reload\r\n    INFORMACI&#211;N: Ha comenzado la recarga de Contexto [/test]\r\n    abr 24, 2023 12:19:41 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate destroy\r\n    INFORMACI&#211;N: WSSERVLET15: el servlet de JAX-WS se ha destruido\r\n    abr 24, 2023 12:19:41 PM com.sun.xml.ws.server.WSEndpointImpl closeManagedObjectManager\r\n    INFORMACI&#211;N: Closing Metro monitoring root: com.sun.metro:pp=/,type=WSEndpoint,name=/test-TestServerImplService-TestServerImplPort\r\n    abr 24, 2023 12:19:41 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextDestroyed\r\n    INFORMACI&#211;N: WSSERVLET13: el listener de contexto de JAX-WS se ha destruido\r\n    \r\n    abr 24, 2023 12:20:06 PM org.apache.jasper.servlet.TldScanner scanJars\r\n    INFORMACI&#211;N: Al menos un JAR, que se ha explorado buscando TLDs, a&#250;n no conten&#237;a TLDs. Activar historial de depuraci&#243;n para este historiador para una completa lista de los JARs que fueron explorados y de los que nos se hall&#243; TLDs. Saltarse JARs no necesarios durante la exploraci&#243;n puede dar lugar a una mejora de tiempo significativa en el arranque y compilaci&#243;n de JSP .\r\n    abr 24, 2023 12:20:17 PM com.sun.xml.ws.server.MonitorBase createRoot\r\n    INFORMACI&#211;N: Metro monitoring rootname successfully set to: com.sun.metro:pp=/,type=WSEndpoint,name=/test-TestServerImplService-TestServerImplPort\r\n    abr 24, 2023 12:20:18 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate &lt;init&gt;\r\n    INFORMACI&#211;N: WSSERVLET14: inicializando el servlet de JAX-WS\r\n    abr 24, 2023 12:20:20 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized\r\n    INFORMACI&#211;N: WSSERVLET12: inicializando el listener de contexto de JAX-WS\r\n    abr 24, 2023 12:20:20 PM org.apache.catalina.core.StandardContext reload\r\n    INFORMACI&#211;N: Se ha completado la recarga de este Contexto\r\n\r\n  [1]: https://i.stack.imgur.com/ipuro.png\r\n  [2]: https://i.stack.imgur.com/Ia1YG.png\r\n\r\n","title":"Tomcat and MemoryAnalyzer don&#39;t show any problem but an application does not get Garbage Collected","body":"<p>I've been attempting to solve all memory leaks that prevent an application from reloading successfully on tomcat.</p>\n<p>I first started with Tomcat logs saying the application had a thread that didn't stop (Eclipse EMF Reference Cleaner had to be disabled with org.eclipse.emf.common.util.ReferenceClearingQueue=false).</p>\n<p>Then solving 2 ThreadLocals not properly handled on some libraries (updating them solved it).</p>\n<p>Then, with the help of Eclipse Memory Analyzer (MAT) i found that the classloader was being retained by a JVM shutdownhook that Log4J2 uses (<a href=\"https://stackoverflow.com/questions/30657619/programmatically-disabling-shutdown-hook-in-log4j-2\">Programmatically disabling shutdown hook in log4j 2</a>).</p>\n<p>And now i don't get any Tomcat warning and MAT can't find any references to my classes other than weak/soft, but it still does not get Gargage Collected.</p>\n<p>With MAT i can confirm that all my classes are retained twice:</p>\n<p><a href=\"https://i.stack.imgur.com/ipuro.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ipuro.png\" alt=\"MAT Histogram\" /></a>\n<a href=\"https://i.stack.imgur.com/Ia1YG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ia1YG.png\" alt=\"Merge Shortests Paths to GC Roots exclude all Weak/Soft/Phatom references\" /></a></p>\n<p>I have updated to latests Tomcat 9.0.74 and Eclipse Adoptium jdk-8.0.372.7-hotspot, but nothing has changed.</p>\n<p>Tomcat logs don't show anything relevant on app restart (they did before solving thread locals and thread stopping)</p>\n<pre><code>abr 24, 2023 12:19:41 PM org.apache.catalina.core.StandardContext reload\nINFORMACIÓN: Ha comenzado la recarga de Contexto [/test]\nabr 24, 2023 12:19:41 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate destroy\nINFORMACIÓN: WSSERVLET15: el servlet de JAX-WS se ha destruido\nabr 24, 2023 12:19:41 PM com.sun.xml.ws.server.WSEndpointImpl closeManagedObjectManager\nINFORMACIÓN: Closing Metro monitoring root: com.sun.metro:pp=/,type=WSEndpoint,name=/test-TestServerImplService-TestServerImplPort\nabr 24, 2023 12:19:41 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextDestroyed\nINFORMACIÓN: WSSERVLET13: el listener de contexto de JAX-WS se ha destruido\n\nabr 24, 2023 12:20:06 PM org.apache.jasper.servlet.TldScanner scanJars\nINFORMACIÓN: Al menos un JAR, que se ha explorado buscando TLDs, aún no contenía TLDs. Activar historial de depuración para este historiador para una completa lista de los JARs que fueron explorados y de los que nos se halló TLDs. Saltarse JARs no necesarios durante la exploración puede dar lugar a una mejora de tiempo significativa en el arranque y compilación de JSP .\nabr 24, 2023 12:20:17 PM com.sun.xml.ws.server.MonitorBase createRoot\nINFORMACIÓN: Metro monitoring rootname successfully set to: com.sun.metro:pp=/,type=WSEndpoint,name=/test-TestServerImplService-TestServerImplPort\nabr 24, 2023 12:20:18 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate &lt;init&gt;\nINFORMACIÓN: WSSERVLET14: inicializando el servlet de JAX-WS\nabr 24, 2023 12:20:20 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized\nINFORMACIÓN: WSSERVLET12: inicializando el listener de contexto de JAX-WS\nabr 24, 2023 12:20:20 PM org.apache.catalina.core.StandardContext reload\nINFORMACIÓN: Se ha completado la recarga de este Contexto\n</code></pre>\n"},{"tags":["java","spring","authentication"],"comments":[{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1683032285,"post_id":76154296,"comment_id":134301680,"body_markdown":"How do you call you `/hi` end point ?\nTry that `curl POST http://[URL]/hi`","body":"How do you call you <code>&#47;hi</code> end point ? Try that <code>curl POST http:&#47;&#47;[URL]&#47;hi</code>"},{"owner":{"account_id":28481507,"reputation":1,"user_id":21795390,"display_name":"B20DCCN483 - Nguyễn Đức Nhật"},"score":0,"creation_date":1683034934,"post_id":76154296,"comment_id":134302417,"body_markdown":"thank you, i think my brower sent a request with Get instead Post for /hi, i solved it with postman :3","body":"thank you, i think my brower sent a request with Get instead Post for /hi, i solved it with postman :3"},{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1683037604,"post_id":76154296,"comment_id":134303129,"body_markdown":"Browser always send `GET` when you provide just a URL.","body":"Browser always send <code>GET</code> when you provide just a URL."}],"owner":{"account_id":28481507,"reputation":1,"user_id":21795390,"display_name":"B20DCCN483 - Nguyễn Đức Nhật"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683026076,"creation_date":1683026076,"question_id":76154296,"body_markdown":"&quot;I&#39;m using Spring Security for authentication and authorization on my web application, and want to allow access to a POST method that doesn&#39;t require authentication. I&#39;ve configured it, but it&#39;s still asking for authentication when call that method My code is like this, I have configured to allow access to /hi without requiring authentication:\r\n\r\n```\r\n@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\r\n\t\treturn http.csrf().disable()\r\n\t\t\t\t.authorizeHttpRequests()\r\n\t\t\t\t.requestMatchers(&quot;/hello&quot;).permitAll()\r\n\t\t\t\t.requestMatchers(HttpMethod.POST, &quot;/hi&quot;).permitAll()\r\n\t\t\t\t.and()\r\n\t\t\t\t.authorizeHttpRequests()\r\n\t\t\t\t.requestMatchers( &quot;/authenticate&quot;).authenticated()\t\t\t\t.and().formLogin()\r\n\t\t\t\t.and().logout()\r\n\t\t\t\t.and().build();\r\n\t\t\r\n\t}\r\n```\r\n\r\n```\r\n@RestController\r\n@CrossOrigin\r\npublic class loginController {\r\n\t\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic String hello() {\r\n\t\treturn &quot;hello&quot;;\r\n\t}\r\n\t\r\n\t@PostMapping(&quot;/hi&quot;)\r\n\tpublic String hi() {\r\n\t\treturn &quot;hi&quot;;\r\n\t}\r\n@PostMapping(&quot;/authenticate&quot;)\r\n\tpublic String authenticateAndGetToken(@RequestBody AuthRequest authRequest) {\r\n\t\treturn jwtService.generateToken(authRequest.getUsername());\r\n\t}\r\n\r\n}\r\n```\r\nWhy am I still being asked for authentication when calling the POST /hi method? Is there a way to allow access to this POST method without requiring authentication? Thank you!&quot;\r\n\r\ni tried to access /hello and success but with /hi no, i am trying to be able to access /hi","title":"I can&#39;t access Post method even though I have configured spring security","body":"<p>&quot;I'm using Spring Security for authentication and authorization on my web application, and want to allow access to a POST method that doesn't require authentication. I've configured it, but it's still asking for authentication when call that method My code is like this, I have configured to allow access to /hi without requiring authentication:</p>\n<pre><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\n        return http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/hello&quot;).permitAll()\n                .requestMatchers(HttpMethod.POST, &quot;/hi&quot;).permitAll()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers( &quot;/authenticate&quot;).authenticated()              .and().formLogin()\n                .and().logout()\n                .and().build();\n        \n    }\n</code></pre>\n<pre><code>@RestController\n@CrossOrigin\npublic class loginController {\n    \n    @GetMapping(&quot;/hello&quot;)\n    public String hello() {\n        return &quot;hello&quot;;\n    }\n    \n    @PostMapping(&quot;/hi&quot;)\n    public String hi() {\n        return &quot;hi&quot;;\n    }\n@PostMapping(&quot;/authenticate&quot;)\n    public String authenticateAndGetToken(@RequestBody AuthRequest authRequest) {\n        return jwtService.generateToken(authRequest.getUsername());\n    }\n\n}\n</code></pre>\n<p>Why am I still being asked for authentication when calling the POST /hi method? Is there a way to allow access to this POST method without requiring authentication? Thank you!&quot;</p>\n<p>i tried to access /hello and success but with /hi no, i am trying to be able to access /hi</p>\n"},{"tags":["java","android","path","homescreen","android-launcher"],"comments":[{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":0,"creation_date":1433762468,"post_id":30707770,"comment_id":49472976,"body_markdown":"describe your problem more details","body":"describe your problem more details"},{"owner":{"account_id":6351558,"reputation":207,"user_id":4930454,"accept_rate":36,"display_name":"Amit"},"score":0,"creation_date":1433762634,"post_id":30707770,"comment_id":49473066,"body_markdown":"My problem is that I can&#39;t think of away to get the path of a folder in the home screen. Let&#39;s say i have a folder with some applications in it that I see it on the home screen.I want to get the path of the folder.","body":"My problem is that I can&#39;t think of away to get the path of a folder in the home screen. Let&#39;s say i have a folder with some applications in it that I see it on the home screen.I want to get the path of the folder."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1433763476,"post_id":30707770,"comment_id":49473563,"body_markdown":"Home screens do not have to offer any sort of &quot;folder&quot; concept. There are hundreds, perhaps thousands, of home screen implementations for Android.","body":"Home screens do not have to offer any sort of &quot;folder&quot; concept. There are hundreds, perhaps thousands, of home screen implementations for Android."}],"answers":[{"comments":[{"owner":{"account_id":6351558,"reputation":207,"user_id":4930454,"accept_rate":36,"display_name":"Amit"},"score":0,"creation_date":1433763298,"post_id":30708079,"comment_id":49473443,"body_markdown":"Thank you for the explanation.","body":"Thank you for the explanation."}],"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1683026052,"creation_date":1433763230,"answer_id":30708079,"question_id":30707770,"body_markdown":"Assuming you are talking about the default Android Launcher (which can be replaced) you are making on major mistake:\r\n\r\nYou assume that Android home screen works like the Windows Desktop - which is wrong.\r\n\r\nIn Android the is no such think like a desktop folder, therefore the &quot;home screen directory&quot; does not exist.\r\n\r\nThe apps on the home screen are usually database entries managed by the launcher which is itself an app. ","title":"Is there a way to find the home screen directory?","body":"<p>Assuming you are talking about the default Android Launcher (which can be replaced) you are making on major mistake:</p>\n<p>You assume that Android home screen works like the Windows Desktop - which is wrong.</p>\n<p>In Android the is no such think like a desktop folder, therefore the &quot;home screen directory&quot; does not exist.</p>\n<p>The apps on the home screen are usually database entries managed by the launcher which is itself an app.</p>\n"}],"owner":{"account_id":6351558,"reputation":207,"user_id":4930454,"accept_rate":36,"display_name":"Amit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6798,"favorite_count":0,"down_vote_count":5,"up_vote_count":3,"closed_date":1433767707,"accepted_answer_id":30708079,"answer_count":1,"score":-2,"last_activity_date":1683026052,"creation_date":1433762302,"question_id":30707770,"body_markdown":"How can I get the path of a folder in the home screen?\r\n\r\nMy problem is that I can&#39;t think of away to get the path of a folder in the home screen. Let&#39;s say i have a folder with some applications in it that I see it on the home screen.I want to get the path of the folder.\r\n","title":"Is there a way to find the home screen directory?","body":"<p>How can I get the path of a folder in the home screen?</p>\n\n<p>My problem is that I can't think of away to get the path of a folder in the home screen. Let's say i have a folder with some applications in it that I see it on the home screen.I want to get the path of the folder.</p>\n"},{"tags":["java","android","image","frame-rate","android-camerax"],"answers":[{"tags":[],"owner":{"account_id":3456687,"reputation":648,"user_id":2895045,"display_name":"Orcun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683025666,"creation_date":1683025666,"answer_id":76154237,"question_id":75964729,"body_markdown":"Might be too late but for anyone struggling with this, I remember it was possible via Camera2Interop Extender. Can be set like this:\r\n\r\n    val ext = Camera2Interop.Extender(imageAnalysisConfig)\r\n        ext.setCaptureRequestOption(CaptureRequest.CONTROL_MODE, CaptureRequest.CONTROL_MODE_AUTO)\r\n        ext.setCaptureRequestOption(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, Range&lt;Int&gt;(30, 30))\r\n\r\n\r\nwhere `imageAnalysisConfig` is:\r\n\r\n    val imageAnalysisConfig = ImageAnalysis.Builder()\r\n            .setTargetResolution(Size(PREVIEW_HEIGHT, PREVIEW_WIDTH))\r\n            .apply {\r\n                setImageQueueDepth(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n            }\r\n","title":"How to set frame rate with Android CameraX ImageAnalysis?","body":"<p>Might be too late but for anyone struggling with this, I remember it was possible via Camera2Interop Extender. Can be set like this:</p>\n<pre><code>val ext = Camera2Interop.Extender(imageAnalysisConfig)\n    ext.setCaptureRequestOption(CaptureRequest.CONTROL_MODE, CaptureRequest.CONTROL_MODE_AUTO)\n    ext.setCaptureRequestOption(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, Range&lt;Int&gt;(30, 30))\n</code></pre>\n<p>where <code>imageAnalysisConfig</code> is:</p>\n<pre><code>val imageAnalysisConfig = ImageAnalysis.Builder()\n        .setTargetResolution(Size(PREVIEW_HEIGHT, PREVIEW_WIDTH))\n        .apply {\n            setImageQueueDepth(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n        }\n</code></pre>\n"}],"owner":{"account_id":26014557,"reputation":1,"user_id":19723044,"display_name":"Hoakin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":638,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683025666,"creation_date":1680950316,"question_id":75964729,"body_markdown":"I would like to increase the FPS that image analysis is able to get. I logged it on the console and it tops at about 10 FPS. How can I get it to 30 FPS?\r\n\r\n```\r\nvoid bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\r\n\r\n        final String TAG = &quot;FPSCounter&quot;;\r\n        final long[] startTime = {System.currentTimeMillis()};\r\n        final int[] frameCount = {0};\r\n\r\n        new Timer().scheduleAtFixedRate(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                long elapsedTime = System.currentTimeMillis() - startTime[0];\r\n                double fps = (double) frameCount[0] / (elapsedTime / 1000.0);\r\n                Log.d(TAG, &quot;FPS: &quot; + String.format(&quot;%.2f&quot;, fps));\r\n                frameCount[0] = 0;\r\n                startTime[0] = System.currentTimeMillis();\r\n            }\r\n        }, 1000, 1000);\r\n\r\n        Preview preview = new Preview.Builder().build();\r\n        ImageAnalysis imageAnalysis = new ImageAnalysis.Builder()\r\n                .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n                .build();\r\n\r\n        imageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), image -&gt; {\r\n            // This method will be called every time a new frame is available\r\n            // You can use the &#39;image&#39; object to get the current frame\r\n\r\n            frameCount[0] = frameCount[0] + 1;\r\n\r\n            image.close();\r\n        });\r\n\r\n        CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                .requireLensFacing(CameraSelector.LENS_FACING_BACK)\r\n                .build();\r\n\r\n        previewView = (PreviewView) findViewById(R.id.previewView);\r\n\r\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n\r\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner) this, cameraSelector, preview, imageAnalysis);\r\n    }\r\n```\r\n\r\nI have read that there is no consistent way in setting the FPS in CameraX Image Analysis but I am hoping someone would be able to help me. Thank you!","title":"How to set frame rate with Android CameraX ImageAnalysis?","body":"<p>I would like to increase the FPS that image analysis is able to get. I logged it on the console and it tops at about 10 FPS. How can I get it to 30 FPS?</p>\n<pre><code>void bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\n\n        final String TAG = &quot;FPSCounter&quot;;\n        final long[] startTime = {System.currentTimeMillis()};\n        final int[] frameCount = {0};\n\n        new Timer().scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run() {\n                long elapsedTime = System.currentTimeMillis() - startTime[0];\n                double fps = (double) frameCount[0] / (elapsedTime / 1000.0);\n                Log.d(TAG, &quot;FPS: &quot; + String.format(&quot;%.2f&quot;, fps));\n                frameCount[0] = 0;\n                startTime[0] = System.currentTimeMillis();\n            }\n        }, 1000, 1000);\n\n        Preview preview = new Preview.Builder().build();\n        ImageAnalysis imageAnalysis = new ImageAnalysis.Builder()\n                .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n                .build();\n\n        imageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), image -&gt; {\n            // This method will be called every time a new frame is available\n            // You can use the 'image' object to get the current frame\n\n            frameCount[0] = frameCount[0] + 1;\n\n            image.close();\n        });\n\n        CameraSelector cameraSelector = new CameraSelector.Builder()\n                .requireLensFacing(CameraSelector.LENS_FACING_BACK)\n                .build();\n\n        previewView = (PreviewView) findViewById(R.id.previewView);\n\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner) this, cameraSelector, preview, imageAnalysis);\n    }\n</code></pre>\n<p>I have read that there is no consistent way in setting the FPS in CameraX Image Analysis but I am hoping someone would be able to help me. Thank you!</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":19918290,"reputation":95,"user_id":16002438,"display_name":"GregGott"},"score":0,"creation_date":1683023158,"post_id":76153836,"comment_id":134299749,"body_markdown":"Maybe [this](https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql) can help you.","body":"Maybe <a href=\"https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql\">this</a> can help you."}],"owner":{"account_id":24154267,"reputation":13,"user_id":18118704,"display_name":"Comet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683024957,"answer_count":0,"score":0,"last_activity_date":1683024922,"creation_date":1683022320,"question_id":76153836,"body_markdown":"I&#39;m learning about Java JDBC and I want to connect with MySQL. I&#39;ve added a connection driver, updated JDK and MySQL to the newest versions, set up MySQL online, but I still get an error about a Communications link failure. Here is my code:\r\n\r\n```java\r\npackage jdbcConnection;\r\n\r\nimport java.sql.*;\r\n\r\npublic class ConnectionTest {\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\t\t\tConnection con = DriverManager.getConnection(&quot;jdbc:mysql://localhost::3306/tree&quot;,&quot;root&quot;,&quot;pass&quot;);\r\n\t\t\tStatement stmt = con.createStatement();\r\n\t\t\tSystem.out.println(&quot;Inserting records&quot;);\r\n\t\t\tString sql = &quot;Insert into fruit values(43)&quot;;\r\n\t\t\tstmt.executeUpdate(sql);\r\n\t\t\tcon.close();\r\n\t\t}\r\n\t\tcatch(Exception e) {\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThis is the error: \r\n\r\n```none\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n```","title":"I can&#39;t connect MySQL using MySQLConnector (Communications link failure )","body":"<p>I'm learning about Java JDBC and I want to connect with MySQL. I've added a connection driver, updated JDK and MySQL to the newest versions, set up MySQL online, but I still get an error about a Communications link failure. Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package jdbcConnection;\n\nimport java.sql.*;\n\npublic class ConnectionTest {\n    public static void main(String[] args) {\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            Connection con = DriverManager.getConnection(&quot;jdbc:mysql://localhost::3306/tree&quot;,&quot;root&quot;,&quot;pass&quot;);\n            Statement stmt = con.createStatement();\n            System.out.println(&quot;Inserting records&quot;);\n            String sql = &quot;Insert into fruit values(43)&quot;;\n            stmt.executeUpdate(sql);\n            con.close();\n        }\n        catch(Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n<p>This is the error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n</code></pre>\n"},{"tags":["java","java-nio"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1682696159,"post_id":76131108,"comment_id":134261278,"body_markdown":"No, there&#39;s no way to check if a different program is writing to a file.  You can skip processing the file with the latest creation date.","body":"No, there&#39;s no way to check if a different program is writing to a file.  You can skip processing the file with the latest creation date."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":3,"creation_date":1682696503,"post_id":76131108,"comment_id":134261348,"body_markdown":"You can avoid much of the conflict by having the producer of files write to &quot;xyz.abc.tmp&quot; and rename after completion to &quot;xyz.abc&quot;, then make your Java app scan only for &quot;.abc&quot; and ignore &quot;.tmp&quot; files.","body":"You can avoid much of the conflict by having the producer of files write to &quot;xyz.abc.tmp&quot; and rename after completion to &quot;xyz.abc&quot;, then make your Java app scan only for &quot;.abc&quot; and ignore &quot;.tmp&quot; files."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1682696614,"post_id":76131108,"comment_id":134261381,"body_markdown":"You *can* check whether a file is still opened by another process. However, as you say yourself there is no platform agnostic way of doing this, and you probably have to drop into JNI to accomplish this (at least on some platforms; on Linux you might get away with procfs, ignoring potential race conditions resulting from this).","body":"You <i>can</i> check whether a file is still opened by another process. However, as you say yourself there is no platform agnostic way of doing this, and you probably have to drop into JNI to accomplish this (at least on some platforms; on Linux you might get away with procfs, ignoring potential race conditions resulting from this)."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1682696667,"post_id":76131108,"comment_id":134261392,"body_markdown":"The easiest way would be to use a tool like [`flock`](https://www.man7.org/linux/man-pages/man2/flock.2.html) to communicate between the two processes, but that requires the writing process to collaborate with you and agree to hold the lock. Do you have any control over that process?","body":"The easiest way would be to use a tool like <a href=\"https://www.man7.org/linux/man-pages/man2/flock.2.html\" rel=\"nofollow noreferrer\"><code>flock</code></a> to communicate between the two processes, but that requires the writing process to collaborate with you and agree to hold the lock. Do you have any control over that process?"},{"owner":{"account_id":25505086,"reputation":49,"user_id":19297684,"display_name":"MKRabbit"},"score":0,"creation_date":1683019237,"post_id":76131108,"comment_id":134298994,"body_markdown":"@SilvioMayolo Unfortunately, I do not have any control over the producer.","body":"@SilvioMayolo Unfortunately, I do not have any control over the producer."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682715339,"creation_date":1682715339,"answer_id":76133229,"question_id":76131108,"body_markdown":"There is no reliable and OS independent way for Java to get this solved.\r\n\r\nOther platforms that need to solve this problem (e.g. Apache Camel) use various strategies (some of them already mentioned in the comments to your question):\r\n* rename the file after it was completely written\r\n* create the file in a different folder and move it to the folder that Java is watching\r\n* create an additional trigger file that Java can watch when the original file to process is ready\r\n* create a time based schedule, e.g. your file is always created at 0:00 and 12:00 of a day, the creation takes maximum one hour, then you can instruct Java to do the processing at 2:00 and 14:00\r\n* set up other means of process synchronization\r\n\r\nThere is no general solution that fits all individual problems.","title":"Only copy a file after it is being done written to","body":"<p>There is no reliable and OS independent way for Java to get this solved.</p>\n<p>Other platforms that need to solve this problem (e.g. Apache Camel) use various strategies (some of them already mentioned in the comments to your question):</p>\n<ul>\n<li>rename the file after it was completely written</li>\n<li>create the file in a different folder and move it to the folder that Java is watching</li>\n<li>create an additional trigger file that Java can watch when the original file to process is ready</li>\n<li>create a time based schedule, e.g. your file is always created at 0:00 and 12:00 of a day, the creation takes maximum one hour, then you can instruct Java to do the processing at 2:00 and 14:00</li>\n<li>set up other means of process synchronization</li>\n</ul>\n<p>There is no general solution that fits all individual problems.</p>\n"},{"tags":[],"owner":{"account_id":25505086,"reputation":49,"user_id":19297684,"display_name":"MKRabbit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683024769,"creation_date":1683024769,"answer_id":76154110,"question_id":76131108,"body_markdown":"After looking around for a bit, I believe I found a workaround for my situation. I tested out *copyFile* method from  ```org.apache.commons.io.FileUtils```. This method throws an IOException if the length of copied file is not the same as the original file. Source: https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%20java.io.File)\r\n\r\nSo something like this:\r\n```\r\ntry {\r\n  org.apache.commons.io.FileUtils.copyFile(&quot;srcFile.txt&quot;, &quot;destFile.txt&quot;);\r\n} catch (IOException e) {\r\n  LOGGER.error(&quot;IOException: &quot;, e);\r\n\r\n  retryThisMethod();\r\n}\r\n```\r\nIf an IOException is thrown, I initiate a retry for the copy.","title":"Only copy a file after it is being done written to","body":"<p>After looking around for a bit, I believe I found a workaround for my situation. I tested out <em>copyFile</em> method from  <code>org.apache.commons.io.FileUtils</code>. This method throws an IOException if the length of copied file is not the same as the original file. Source: <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%20java.io.File)\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%20java.io.File)</a></p>\n<p>So something like this:</p>\n<pre><code>try {\n  org.apache.commons.io.FileUtils.copyFile(&quot;srcFile.txt&quot;, &quot;destFile.txt&quot;);\n} catch (IOException e) {\n  LOGGER.error(&quot;IOException: &quot;, e);\n\n  retryThisMethod();\n}\n</code></pre>\n<p>If an IOException is thrown, I initiate a retry for the copy.</p>\n"}],"owner":{"account_id":25505086,"reputation":49,"user_id":19297684,"display_name":"MKRabbit"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683024769,"creation_date":1682695882,"question_id":76131108,"body_markdown":"I have a non-Java program writing files to a directory. My Java program then copies these files to a different directory. Is there a way for Java to check if the last file is fully written to before being copied? This is because when I copy the files, the last file is still being written/processed to by the other program and the Java copy results in only a partial copy of it. \r\n\r\nI have looked at doing something like this (Taken from answer here: https://stackoverflow.com/a/17603619/19297684):\r\n```\r\nboolean success = potentiallyIncompleteFile.renameTo(stagingAreaFile);\r\n```\r\n where the program attempts to rename the last file. However, this is not platform agnostic. ","title":"Only copy a file after it is being done written to","body":"<p>I have a non-Java program writing files to a directory. My Java program then copies these files to a different directory. Is there a way for Java to check if the last file is fully written to before being copied? This is because when I copy the files, the last file is still being written/processed to by the other program and the Java copy results in only a partial copy of it.</p>\n<p>I have looked at doing something like this (Taken from answer here: <a href=\"https://stackoverflow.com/a/17603619/19297684\">https://stackoverflow.com/a/17603619/19297684</a>):</p>\n<pre><code>boolean success = potentiallyIncompleteFile.renameTo(stagingAreaFile);\n</code></pre>\n<p>where the program attempts to rename the last file. However, this is not platform agnostic.</p>\n"},{"tags":["java","android","tensorflow","tensor","yolov5"],"owner":{"account_id":20111159,"reputation":1,"user_id":14747529,"display_name":"Yasmine_BA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683024471,"creation_date":1683024471,"question_id":76154083,"body_markdown":"i&#39;m getting this error when i try to run my tflite model of yolov5 with a modified architecture on android studio (app mobile).\r\nI/zygote: After code cache collection, code=106KB, data=61KB\r\nE/AndroidRuntime: FATAL EXCEPTION: inference\r\n    Process: org.tensorflow.lite.examples.detection, PID: 6210\r\n    java.lang.IllegalArgumentException: Cannot copy from a TensorFlowLite tensor (StatefulPartitionedCall:0) with 7616000 bytes to a Java Buffer with 1411200 bytes.\r\n        at org.tensorflow.lite.Tensor.throwIfDstShapeIsIncompatible(Tensor.java:472)\r\n        at org.tensorflow.lite.Tensor.copyTo(Tensor.java:252)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:175)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:360)\r\n        at org.tensorflow.lite.examples.detection.tflite.YoloV5Classifier.recognizeImage(YoloV5Classifier.java:391)\r\n        at org.tensorflow.lite.examples.detection.DetectorActivity$2.run(DetectorActivity.java:246)\r\n        at android.os.Handler.handleCallback(Handler.java:790)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)\r\n\r\n\r\n\r\n\r\nCan somone help me to slove this problem?","title":"Cannot copy from a TensorFlowLite tensor (StatefulPartitionedCall:0) with 7616000 bytes to a Java Buffer with 1411200 bytes","body":"<p>i'm getting this error when i try to run my tflite model of yolov5 with a modified architecture on android studio (app mobile).\nI/zygote: After code cache collection, code=106KB, data=61KB\nE/AndroidRuntime: FATAL EXCEPTION: inference\nProcess: org.tensorflow.lite.examples.detection, PID: 6210\njava.lang.IllegalArgumentException: Cannot copy from a TensorFlowLite tensor (StatefulPartitionedCall:0) with 7616000 bytes to a Java Buffer with 1411200 bytes.\nat org.tensorflow.lite.Tensor.throwIfDstShapeIsIncompatible(Tensor.java:472)\nat org.tensorflow.lite.Tensor.copyTo(Tensor.java:252)\nat org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:175)\nat org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:360)\nat org.tensorflow.lite.examples.detection.tflite.YoloV5Classifier.recognizeImage(YoloV5Classifier.java:391)\nat org.tensorflow.lite.examples.detection.DetectorActivity$2.run(DetectorActivity.java:246)\nat android.os.Handler.handleCallback(Handler.java:790)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:164)\nat android.os.HandlerThread.run(HandlerThread.java:65)</p>\n<p>Can somone help me to slove this problem?</p>\n"},{"tags":["java","selenium-webdriver","automation","automated-tests"],"comments":[{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":2,"creation_date":1683028649,"post_id":76154075,"comment_id":134300791,"body_markdown":"The whole point of a captcha is that you cannot automate around or bypass it.  If this is your system, make the captcha only appear in production, while you automate against the dev environments.  If this is not your system, then the site owners have added the captcha precisely to stop you from doing this.","body":"The whole point of a captcha is that you cannot automate around or bypass it.  If this is your system, make the captcha only appear in production, while you automate against the dev environments.  If this is not your system, then the site owners have added the captcha precisely to stop you from doing this."}],"owner":{"account_id":28481250,"reputation":1,"user_id":21795174,"display_name":"Rony"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683024445,"creation_date":1683024445,"question_id":76154075,"body_markdown":"\r\nI tried this but I can&#39;t bypass the CAPTCHA \r\n\r\n  // clicked on captcha\r\n\r\n        WebDriverWait wait = new WebDriverWait(driver,25);\r\n\r\n        wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(\r\n                By.xpath(&quot;//iframe[starts-with(@name, &#39;a-&#39;) and starts-with(@src, &#39;https://www.google.com/recaptcha&#39;)]&quot;)));\r\n\r\n        wait.until(ExpectedConditions.elementToBeClickable(\r\n                By.xpath(&quot;//div[@class=&#39;recaptcha-checkbox-border&#39;]&quot;))).click();\r\n","title":"How do you automate the testing of CAPTCHA using WebDriver?","body":"<p>I tried this but I can't bypass the CAPTCHA</p>\n<p>// clicked on captcha</p>\n<pre><code>    WebDriverWait wait = new WebDriverWait(driver,25);\n\n    wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(\n            By.xpath(&quot;//iframe[starts-with(@name, 'a-') and starts-with(@src, 'https://www.google.com/recaptcha')]&quot;)));\n\n    wait.until(ExpectedConditions.elementToBeClickable(\n            By.xpath(&quot;//div[@class='recaptcha-checkbox-border']&quot;))).click();\n</code></pre>\n"},{"tags":["java","json","xml"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1522228507,"post_id":49530476,"comment_id":86066873,"body_markdown":"I&#39;d consider `xslt` tbh, don&#39;t know how efficient that is though. I&#39;d assume most efficient Java solution would be using a SAX parser.","body":"I&#39;d consider <code>xslt</code> tbh, don&#39;t know how efficient that is though. I&#39;d assume most efficient Java solution would be using a SAX parser."},{"owner":{"account_id":1430778,"reputation":3528,"user_id":1353243,"accept_rate":64,"display_name":"thar45"},"score":0,"creation_date":1522228575,"post_id":49530476,"comment_id":86066932,"body_markdown":"[possibly  a duplicate](https://stackoverflow.com/questions/1823264/quickest-way-to-convert-xml-to-json-in-java)","body":"<a href=\"https://stackoverflow.com/questions/1823264/quickest-way-to-convert-xml-to-json-in-java\">possibly  a duplicate</a>"},{"owner":{"account_id":3921522,"reputation":3021,"user_id":3243499,"accept_rate":78,"display_name":"user3243499"},"score":0,"creation_date":1522228818,"post_id":49530476,"comment_id":86067084,"body_markdown":"@gks: Mate, please read the question carefully. I am not asking how to convert xml to json, rather, how to convert xml to json WITHOUT attributes and in an EFFICIENT way. Please check your reference link and let me know how it is a duplicate. Thank you so much,","body":"@gks: Mate, please read the question carefully. I am not asking how to convert xml to json, rather, how to convert xml to json WITHOUT attributes and in an EFFICIENT way. Please check your reference link and let me know how it is a duplicate. Thank you so much,"},{"owner":{"account_id":3921522,"reputation":3021,"user_id":3243499,"accept_rate":78,"display_name":"user3243499"},"score":0,"creation_date":1522228926,"post_id":49530476,"comment_id":86067192,"body_markdown":"@daniu: Just a small side question: do you know how to use the APG parser for ABNF grammars in JAVA?","body":"@daniu: Just a small side question: do you know how to use the APG parser for ABNF grammars in JAVA?"}],"answers":[{"tags":[],"owner":{"account_id":5634947,"reputation":571,"user_id":4460698,"display_name":"Harsh Mehta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522241095,"creation_date":1522241095,"answer_id":49534927,"question_id":49530476,"body_markdown":"The simplest way to convert XML to JSON would be...\r\n\r\n - First create/map java object from XML using JAXB.\r\n - Then create JSONObject from the converted java object using any library like `org.json,` or `gson` etc.","title":"What is the neat and efficient way to convert XML to JSON without attributes in Java?","body":"<p>The simplest way to convert XML to JSON would be...</p>\n\n<ul>\n<li>First create/map java object from XML using JAXB.</li>\n<li>Then create JSONObject from the converted java object using any library like <code>org.json,</code> or <code>gson</code> etc.</li>\n</ul>\n"}],"owner":{"account_id":3921522,"reputation":3021,"user_id":3243499,"accept_rate":78,"display_name":"user3243499"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683024395,"creation_date":1522228339,"question_id":49530476,"body_markdown":"I want to convert an XML document to a JSON object without the XML attributes. For example:\r\n\r\nXML:\r\n\r\n    &lt;root id=&quot;120&quot;&gt;\r\n    &lt;child1 id=&quot;21&quot;&gt;val1&lt;child1&gt;\r\n    &lt;child2 id=&quot;22&quot;&gt;val2&lt;child2&gt;\r\n    &lt;/root&gt;\r\n\r\nDesired JSON:\r\n\r\n    {\r\n        &quot;root&quot;:{\r\n            &quot;child1&quot;: val1,\r\n            &quot;child2&quot;: val2\r\n        }\r\n    }\r\n\r\n\r\nConverting the XML to JSONObject, then removing each attributes seems like complex and less efficient way. Is there any recommended library or technique to achieve the same in less code and efficient way in Java?\r\n","title":"What is the neat and efficient way to convert XML to JSON without attributes in Java?","body":"<p>I want to convert an XML document to a JSON object without the XML attributes. For example:</p>\n<p>XML:</p>\n<pre><code>&lt;root id=&quot;120&quot;&gt;\n&lt;child1 id=&quot;21&quot;&gt;val1&lt;child1&gt;\n&lt;child2 id=&quot;22&quot;&gt;val2&lt;child2&gt;\n&lt;/root&gt;\n</code></pre>\n<p>Desired JSON:</p>\n<pre><code>{\n    &quot;root&quot;:{\n        &quot;child1&quot;: val1,\n        &quot;child2&quot;: val2\n    }\n}\n</code></pre>\n<p>Converting the XML to JSONObject, then removing each attributes seems like complex and less efficient way. Is there any recommended library or technique to achieve the same in less code and efficient way in Java?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677565576,"creation_date":1677564617,"answer_id":75588404,"question_id":75588327,"body_markdown":"The problem is not with `CompanyAccessRights` but with that both:\r\n- `Company` contains reference to `CompanyEmploymentSettings` and\r\n- `CompanyEmploymentSettings` contains reference to `Company`\r\n\r\nThe lomboks `@EqualsAndHashCode` is calculating the hashcode by calling the `hashCode()` method on all the complex type fields, so the problem is that `CompanyEmploymentSettings.hashCode()` is calling the `Company.hashCode()` and then the `Company.hashCode()` is calling the `CompanyEmploymentSettings.hashCode()` and again, and again, until you use all the stack memory - the StackOverflowException.\r\n\r\nTo fix this, you can remove one of those fields or you can mark these fields with `@EqualsAndHashCode.Exclude` to exclude this field in hashCode calculations","title":"JPA Hibernate One-to-One relationship Error","body":"<p>The problem is not with <code>CompanyAccessRights</code> but with that both:</p>\n<ul>\n<li><code>Company</code> contains reference to <code>CompanyEmploymentSettings</code> and</li>\n<li><code>CompanyEmploymentSettings</code> contains reference to <code>Company</code></li>\n</ul>\n<p>The lomboks <code>@EqualsAndHashCode</code> is calculating the hashcode by calling the <code>hashCode()</code> method on all the complex type fields, so the problem is that <code>CompanyEmploymentSettings.hashCode()</code> is calling the <code>Company.hashCode()</code> and then the <code>Company.hashCode()</code> is calling the <code>CompanyEmploymentSettings.hashCode()</code> and again, and again, until you use all the stack memory - the StackOverflowException.</p>\n<p>To fix this, you can remove one of those fields or you can mark these fields with <code>@EqualsAndHashCode.Exclude</code> to exclude this field in hashCode calculations</p>\n"},{"tags":[],"owner":{"account_id":25866694,"reputation":191,"user_id":19598245,"display_name":"Phil Ku"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677564678,"creation_date":1677564678,"answer_id":75588408,"question_id":75588327,"body_markdown":"Try using `fetch = FetchType.LAZY` for `@OneToOne` relationship;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;company_access_rights&quot;)\r\n    private  CompanyAccessRights companyAccessRights;\r\n\r\nHope it can solve your problem.","title":"JPA Hibernate One-to-One relationship Error","body":"<p>Try using <code>fetch = FetchType.LAZY</code> for <code>@OneToOne</code> relationship;</p>\n<pre><code>@OneToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;company_access_rights&quot;)\nprivate  CompanyAccessRights companyAccessRights;\n</code></pre>\n<p>Hope it can solve your problem.</p>\n"}],"owner":{"account_id":25867539,"reputation":1,"user_id":19598941,"display_name":"sakshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683024327,"answer_count":2,"score":0,"last_activity_date":1683022840,"creation_date":1677563817,"question_id":75588327,"body_markdown":"I am trying to Implement OneToOne Relationship bw 3 entities but facing this hashcode related error. I have 3 classes in 2 classes i am trying access that one entity.","title":"JPA Hibernate One-to-One relationship Error","body":"<p>I am trying to Implement OneToOne Relationship bw 3 entities but facing this hashcode related error. I have 3 classes in 2 classes i am trying access that one entity.</p>\n"},{"tags":["java","temporary-files"],"comments":[{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":6,"creation_date":1415692874,"post_id":26860167,"comment_id":42280976,"body_markdown":"Use `File f = File.createTempFile(prefix, extension)`. It will be placed in the temp dir. And with `f.deleteOnExit()` it will be automatically deleted on exit.","body":"Use <code>File f = File.createTempFile(prefix, extension)</code>. It will be placed in the temp dir. And with <code>f.deleteOnExit()</code> it will be automatically deleted on exit."},{"owner":{"account_id":6784256,"reputation":997,"user_id":5223579,"display_name":"Johannes"},"score":4,"creation_date":1494785938,"post_id":26860167,"comment_id":74964657,"body_markdown":"Delete on Exit will not delete the file, if the vm exits with an exception.","body":"Delete on Exit will not delete the file, if the vm exits with an exception."},{"owner":{"account_id":1185016,"reputation":3876,"user_id":1159167,"accept_rate":75,"display_name":"Ricardo"},"score":0,"creation_date":1669858758,"post_id":26860167,"comment_id":131741133,"body_markdown":"Use `Files.createTempFile(&quot;tempfiles&quot;, &quot;.tmp&quot;)` instead, for enhanced security; check 2nd most voted answer.","body":"Use <code>Files.createTempFile(&quot;tempfiles&quot;, &quot;.tmp&quot;)</code> instead, for enhanced security; check 2nd most voted answer."}],"answers":[{"comments":[{"owner":{"account_id":317318,"reputation":1234,"user_id":633940,"accept_rate":70,"display_name":"Squeazer"},"score":3,"creation_date":1415693054,"post_id":26860215,"comment_id":42281050,"body_markdown":"Just FYI, you dont need to worry about having a unique prefix / suffix, since Java will create a random String of numbers in between.","body":"Just FYI, you dont need to worry about having a unique prefix / suffix, since Java will create a random String of numbers in between."},{"owner":{"account_id":762934,"reputation":8611,"user_id":785494,"accept_rate":43,"display_name":"SRobertJames"},"score":4,"creation_date":1415693414,"post_id":26860215,"comment_id":42281195,"body_markdown":"Super! Any problem doing a normal `tempFile.delete()` in addition to the `deleteOnExit` (since I don&#39;t want to have hordes of temp files hanging around before exit)?","body":"Super! Any problem doing a normal <code>tempFile.delete()</code> in addition to the <code>deleteOnExit</code> (since I don&#39;t want to have hordes of temp files hanging around before exit)?"},{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":3,"creation_date":1415693499,"post_id":26860215,"comment_id":42281238,"body_markdown":"No, you can do it either way.","body":"No, you can do it either way."},{"owner":{"account_id":1358954,"reputation":19779,"user_id":1296707,"accept_rate":50,"display_name":"Markus W Mahlberg"},"score":1,"creation_date":1415693582,"post_id":26860215,"comment_id":42281270,"body_markdown":"@SRobertJames:No problems. The thing is that the _creation_ of tempfiles with predictable names imposes security problems. Once they are created in a safe way with proper permissions, they don&#39;t.","body":"@SRobertJames:No problems. The thing is that the <i>creation</i> of tempfiles with predictable names imposes security problems. Once they are created in a safe way with proper permissions, they don&#39;t."},{"owner":{"account_id":10437818,"reputation":1023,"user_id":7695546,"display_name":"Peter Gerber"},"score":7,"creation_date":1502480900,"post_id":26860215,"comment_id":78245026,"body_markdown":"I wouldn&#39;t consider this safe, the created file is world-readable and it resides in the tmp directory which tends to be accessible to any user.","body":"I wouldn&#39;t consider this safe, the created file is world-readable and it resides in the tmp directory which tends to be accessible to any user."},{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1502697346,"post_id":26860215,"comment_id":78296982,"body_markdown":"Yes, this is just the standard. You can set the temp directory, for this vm, to a safer directory, like this: `System.setProperty(&quot;java.io.tmpdir&quot;, &quot;/somewhere/outside/mywarfile&quot;);` And set access right to the vm user only.","body":"Yes, this is just the standard. You can set the temp directory, for this vm, to a safer directory, like this: <code>System.setProperty(&quot;java.io.tmpdir&quot;, &quot;&#47;somewhere&#47;outside&#47;mywarfile&quot;);</code> And set access right to the vm user only."},{"owner":{"account_id":1185016,"reputation":3876,"user_id":1159167,"accept_rate":75,"display_name":"Ricardo"},"score":0,"creation_date":1669858602,"post_id":26860215,"comment_id":131741113,"body_markdown":"[CWE-379](https://cwe.mitre.org/data/definitions/379) states that this is not secure, because it creates a temporary file in a directory whose permissions allow unintended actors to determine the file&#39;s existence or otherwise read and modify the contents of that file.","body":"<a href=\"https://cwe.mitre.org/data/definitions/379\" rel=\"nofollow noreferrer\">CWE-379</a> states that this is not secure, because it creates a temporary file in a directory whose permissions allow unintended actors to determine the file&#39;s existence or otherwise read and modify the contents of that file."}],"tags":[],"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"comment_count":7,"down_vote_count":1,"up_vote_count":215,"is_accepted":true,"score":214,"last_activity_date":1498726250,"creation_date":1415692957,"answer_id":26860215,"question_id":26860167,"body_markdown":"Use [`File.createTempFile()`](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29).\r\n\r\n    File tempFile = File.createTempFile(&quot;prefix-&quot;, &quot;-suffix&quot;);\r\n    //File tempFile = File.createTempFile(&quot;MyAppName-&quot;, &quot;.tmp&quot;);\r\n    tempFile.deleteOnExit();\r\n\r\nWill create a file in the temp dir, like:\r\n\r\n&gt; prefix-6340763779352094442-suffix\r\n","title":"What is a safe way to create a Temp file in Java?","body":"<p>Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>File.createTempFile()</code></a>.</p>\n\n<pre><code>File tempFile = File.createTempFile(\"prefix-\", \"-suffix\");\n//File tempFile = File.createTempFile(\"MyAppName-\", \".tmp\");\ntempFile.deleteOnExit();\n</code></pre>\n\n<p>Will create a file in the temp dir, like:</p>\n\n<blockquote>\n  <p>prefix-6340763779352094442-suffix</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":1,"creation_date":1507737353,"post_id":26860425,"comment_id":80333046,"body_markdown":"I prefer NIO, which doesn&#39;t require a prefix.","body":"I prefer NIO, which doesn&#39;t require a prefix."}],"tags":[],"owner":{"account_id":23949,"reputation":63054,"user_id":60518,"accept_rate":59,"display_name":"Tim B&#252;the"},"comment_count":1,"down_vote_count":0,"up_vote_count":69,"is_accepted":false,"score":69,"last_activity_date":1683022795,"creation_date":1415693892,"answer_id":26860425,"question_id":26860167,"body_markdown":"Since Java 7 there is the new file API &quot;NIO2&quot; which contains new methods for creating temp files and directories. See \r\n\r\n* [createTempDirectory][1] \r\n* [createTempDirectory][2] \r\n* [createTempFile][3] \r\n* [createTempFile][4]\r\n\r\ne.g.\r\n\r\n    Path tempDir = Files.createTempDirectory(&quot;tempfiles&quot;);\r\n\r\nor \r\n\r\n    Path tempFile = Files.createTempFile(&quot;tempfiles&quot;, &quot;.tmp&quot;);\r\n\r\n**Security notice:**\r\n\r\nAn important difference between `File.createTempFile()` and `Files.createTempFile` is also that the latter has more secure permission defaults. \r\n\r\n&gt; When no file attributes are specified, then the resulting file may\r\n&gt; have more restrictive access permissions to files created by the\r\n&gt; `File.createTempFile(String,String,File)` method.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.lang.String,%20java.nio.file.attribute.FileAttribute...)\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempFile(java.nio.file.Path,%20java.lang.String,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\r\n  [4]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempFile(java.lang.String,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)","title":"What is a safe way to create a Temp file in Java?","body":"<p>Since Java 7 there is the new file API &quot;NIO2&quot; which contains new methods for creating temp files and directories. See</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">createTempDirectory</a></li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">createTempDirectory</a></li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempFile(java.nio.file.Path,%20java.lang.String,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">createTempFile</a></li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempFile(java.lang.String,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">createTempFile</a></li>\n</ul>\n<p>e.g.</p>\n<pre><code>Path tempDir = Files.createTempDirectory(&quot;tempfiles&quot;);\n</code></pre>\n<p>or</p>\n<pre><code>Path tempFile = Files.createTempFile(&quot;tempfiles&quot;, &quot;.tmp&quot;);\n</code></pre>\n<p><strong>Security notice:</strong></p>\n<p>An important difference between <code>File.createTempFile()</code> and <code>Files.createTempFile</code> is also that the latter has more secure permission defaults.</p>\n<blockquote>\n<p>When no file attributes are specified, then the resulting file may\nhave more restrictive access permissions to files created by the\n<code>File.createTempFile(String,String,File)</code> method.</p>\n</blockquote>\n"}],"owner":{"account_id":762934,"reputation":8611,"user_id":785494,"accept_rate":43,"display_name":"SRobertJames"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151637,"favorite_count":0,"down_vote_count":0,"up_vote_count":170,"accepted_answer_id":26860215,"answer_count":2,"score":170,"last_activity_date":1683022795,"creation_date":1415692763,"question_id":26860167,"body_markdown":"I&#39;m looking for a **safe** way to create a temp file in Java.  By safe, I mean the following:\r\n\r\n* Name should be unique, even under potential race conditions (e.g. another Thread calls the same func at the same time, or another process runs this code simultaneously)\r\n* File should be private, even under potential race conditions (e.g. another user tries to chmod file at high rate)\r\n* I can tell it to delete the file, without me having to do a generic delete, and risk deleting the wrong file\r\n* Ideally, should ensure file is deleted, even if exception is thrown before I get the chance to\r\n* File should default to a sane location (e.g. the JVM specified tmp dir, defaulting to the system temp dir)\r\n","title":"What is a safe way to create a Temp file in Java?","body":"<p>I'm looking for a <strong>safe</strong> way to create a temp file in Java.  By safe, I mean the following:</p>\n\n<ul>\n<li>Name should be unique, even under potential race conditions (e.g. another Thread calls the same func at the same time, or another process runs this code simultaneously)</li>\n<li>File should be private, even under potential race conditions (e.g. another user tries to chmod file at high rate)</li>\n<li>I can tell it to delete the file, without me having to do a generic delete, and risk deleting the wrong file</li>\n<li>Ideally, should ensure file is deleted, even if exception is thrown before I get the chance to</li>\n<li>File should default to a sane location (e.g. the JVM specified tmp dir, defaulting to the system temp dir)</li>\n</ul>\n"},{"tags":["java","git","jenkins","ssl-certificate"],"comments":[{"owner":{"account_id":4160936,"reputation":1,"user_id":3411072,"display_name":"scriptkid12345"},"score":0,"creation_date":1683156709,"post_id":76153892,"comment_id":134325028,"body_markdown":"I sort of fixed the issue by removing all Git related plugins and reinstalling them. Hope it does not come back again","body":"I sort of fixed the issue by removing all Git related plugins and reinstalling them. Hope it does not come back again"}],"owner":{"account_id":4160936,"reputation":1,"user_id":3411072,"display_name":"scriptkid12345"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683022775,"creation_date":1683022775,"question_id":76153892,"body_markdown":"I have a jenkins installation running currently with version 2.332.2 using java 11.0.14.1 . While attempting connections to git repositories(via github branch source plugin) it showed an error for PKIX path building failed, which I figured out with the help of stackoverflow that it was about jre not recognizing the ssl certificates for github. This is already solved on various posts and i was able to download the cer file from my browser and import it into the cacerts file. It started working on day 1. \r\nDay 2 , it agains starts showing the same error and even after attempting import of certificate again, it did not work. I tried importing with the same alias and it showed that it already exists. I tried with using a different alias as well and it got imported successfully but to no avail. \r\nOne of the existing posts suggested a hack to install a plugin skip-certificates-check to disable this entirely and since our jenkins is operating in closed company network only, I installed it and it worked for me on day 2. \r\nDay 3 , the error has popped up again, the certificates are still there , the plugin is still there but the ghost of pkix is back to haunt me. \r\nI have run out of options other than using a complete new jenkins installation.\r\n\r\nThe error shown:\r\n\r\n```\r\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n\tat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\r\n\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\r\nCaused: sun.security.validator.ValidatorException: PKIX path building failed\r\n\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\r\n\tat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\r\n\tat java.base/sun.security.validator.Validator.validate(Validator.java:264)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1341)\r\nCaused: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:352)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:295)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:290)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175)\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:182)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1501)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1411)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:451)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:422)\r\n\tat okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\r\n\tat okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\r\n\tat okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\r\n\tat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\r\n\tat okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\r\n\tat okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\r\n\tat okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\r\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$UnexpectedException.lambda$static$0(ObsoleteUrlFactory.java:1365)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\r\n\tat org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$OkHttpURLConnection.getResponse(ObsoleteUrlFactory.java:671)\r\n\tat org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$OkHttpURLConnection.getResponseCode(ObsoleteUrlFactory.java:702)\r\n\tat org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$DelegatingHttpsURLConnection.getResponseCode(ObsoleteUrlFactory.java:1064)\r\n\tat org.kohsuke.github.internal.GitHubConnectorHttpConnectorAdapter.send(GitHubConnectorHttpConnectorAdapter.java:87)\r\n\tat org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:384)\r\nCaused: org.kohsuke.github.HttpException: Server returned HTTP response code: -1, message: &#39;null&#39; for URL: https://api.github.com/rate_limit\r\n\tat org.kohsuke.github.GitHubClient.interpretApiError(GitHubClient.java:548)\r\n\tat org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:399)\r\n\tat org.kohsuke.github.GitHubClient.getRateLimit(GitHubClient.java:230)\r\n\tat org.kohsuke.github.GitHubClient.rateLimit(GitHubClient.java:285)\r\n\tat org.kohsuke.github.GitHubRateLimitChecker.checkRateLimit(GitHubRateLimitChecker.java:124)\r\n\tat org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:383)\r\n\tat org.kohsuke.github.GitHubClient.fetch(GitHubClient.java:121)\r\n\tat org.kohsuke.github.GitHubClient.checkApiUrlValidity(GitHubClient.java:323)\r\n\tat org.kohsuke.github.GitHub.checkApiUrlValidity(GitHub.java:1244)\r\n\tat org.jenkinsci.plugins.github_branch_source.ApiRateLimitChecker.verifyConnection(ApiRateLimitChecker.java:199)\r\n\tat org.jenkinsci.plugins.github_branch_source.Connector$GitHubConnection.verifyConnection(Connector.java:794)\r\n\tat org.jenkinsci.plugins.github_branch_source.Connector.connect(Connector.java:447)\r\n\tat org.jenkinsci.plugins.github_branch_source.GitHubSCMSource.retrieveActions(GitHubSCMSource.java:1999)\r\n\tat jenkins.scm.api.SCMSource.fetchActions(SCMSource.java:848)\r\n\tat jenkins.branch.MultiBranchProject.computeChildren(MultiBranchProject.java:597)\r\n\tat com.cloudbees.hudson.plugins.folder.computed.ComputedFolder.updateChildren(ComputedFolder.java:278)\r\n\tat com.cloudbees.hudson.plugins.folder.computed.FolderComputation.run(FolderComputation.java:166)\r\n\tat jenkins.branch.MultiBranchProject$BranchIndexing.run(MultiBranchProject.java:1031)\r\n\tat hudson.model.ResourceController.execute(ResourceController.java:101)\r\n\tat hudson.model.Executor.run(Executor.java:442)\r\n```\r\n\r\n\r\n\r\nThe cacerts file I update resides under the java.home path that is shown under System Information in Manage Jenkins , and it worked for me once, so I am quite positive the path is correct.\r\nInstalling the skip-certificate-check-plugin also worked for me for a day. \r\nAlso the machine/jenkins remained on the entire time and nothing was restarted across my day 1,2,3. So I am not sure at what point it really breaks. \r\nSince I am using a multi branch pipeline Project, switching to cli version of git would require creating an entire unit in itself to scan for git changes via cli, trigger projects, and have no idea about how to create new projects for a new branch detected on git repo. That&#39;s why not inclined towards using git cli via execute shell. ","title":"While doing git checkout in Jenkins, The error around SSL certificates &quot;PKIX path building failed&quot; keeps coming back every day even after being fixed","body":"<p>I have a jenkins installation running currently with version 2.332.2 using java 11.0.14.1 . While attempting connections to git repositories(via github branch source plugin) it showed an error for PKIX path building failed, which I figured out with the help of stackoverflow that it was about jre not recognizing the ssl certificates for github. This is already solved on various posts and i was able to download the cer file from my browser and import it into the cacerts file. It started working on day 1.\nDay 2 , it agains starts showing the same error and even after attempting import of certificate again, it did not work. I tried importing with the same alias and it showed that it already exists. I tried with using a different alias as well and it got imported successfully but to no avail.\nOne of the existing posts suggested a hack to install a plugin skip-certificates-check to disable this entirely and since our jenkins is operating in closed company network only, I installed it and it worked for me on day 2.\nDay 3 , the error has popped up again, the certificates are still there , the plugin is still there but the ghost of pkix is back to haunt me.\nI have run out of options other than using a complete new jenkins installation.</p>\n<p>The error shown:</p>\n<pre><code>sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n    at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n    at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\n    at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\nCaused: sun.security.validator.ValidatorException: PKIX path building failed\n    at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\n    at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\n    at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129)\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1341)\nCaused: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:352)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:295)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:290)\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357)\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232)\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:182)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1501)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1411)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:451)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:422)\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\n    at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\n    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\n    at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\n    at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$UnexpectedException.lambda$static$0(ObsoleteUrlFactory.java:1365)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\n    at org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$OkHttpURLConnection.getResponse(ObsoleteUrlFactory.java:671)\n    at org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$OkHttpURLConnection.getResponseCode(ObsoleteUrlFactory.java:702)\n    at org.kohsuke.github.extras.okhttp3.ObsoleteUrlFactory$DelegatingHttpsURLConnection.getResponseCode(ObsoleteUrlFactory.java:1064)\n    at org.kohsuke.github.internal.GitHubConnectorHttpConnectorAdapter.send(GitHubConnectorHttpConnectorAdapter.java:87)\n    at org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:384)\nCaused: org.kohsuke.github.HttpException: Server returned HTTP response code: -1, message: 'null' for URL: https://api.github.com/rate_limit\n    at org.kohsuke.github.GitHubClient.interpretApiError(GitHubClient.java:548)\n    at org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:399)\n    at org.kohsuke.github.GitHubClient.getRateLimit(GitHubClient.java:230)\n    at org.kohsuke.github.GitHubClient.rateLimit(GitHubClient.java:285)\n    at org.kohsuke.github.GitHubRateLimitChecker.checkRateLimit(GitHubRateLimitChecker.java:124)\n    at org.kohsuke.github.GitHubClient.sendRequest(GitHubClient.java:383)\n    at org.kohsuke.github.GitHubClient.fetch(GitHubClient.java:121)\n    at org.kohsuke.github.GitHubClient.checkApiUrlValidity(GitHubClient.java:323)\n    at org.kohsuke.github.GitHub.checkApiUrlValidity(GitHub.java:1244)\n    at org.jenkinsci.plugins.github_branch_source.ApiRateLimitChecker.verifyConnection(ApiRateLimitChecker.java:199)\n    at org.jenkinsci.plugins.github_branch_source.Connector$GitHubConnection.verifyConnection(Connector.java:794)\n    at org.jenkinsci.plugins.github_branch_source.Connector.connect(Connector.java:447)\n    at org.jenkinsci.plugins.github_branch_source.GitHubSCMSource.retrieveActions(GitHubSCMSource.java:1999)\n    at jenkins.scm.api.SCMSource.fetchActions(SCMSource.java:848)\n    at jenkins.branch.MultiBranchProject.computeChildren(MultiBranchProject.java:597)\n    at com.cloudbees.hudson.plugins.folder.computed.ComputedFolder.updateChildren(ComputedFolder.java:278)\n    at com.cloudbees.hudson.plugins.folder.computed.FolderComputation.run(FolderComputation.java:166)\n    at jenkins.branch.MultiBranchProject$BranchIndexing.run(MultiBranchProject.java:1031)\n    at hudson.model.ResourceController.execute(ResourceController.java:101)\n    at hudson.model.Executor.run(Executor.java:442)\n</code></pre>\n<p>The cacerts file I update resides under the java.home path that is shown under System Information in Manage Jenkins , and it worked for me once, so I am quite positive the path is correct.\nInstalling the skip-certificate-check-plugin also worked for me for a day.\nAlso the machine/jenkins remained on the entire time and nothing was restarted across my day 1,2,3. So I am not sure at what point it really breaks.\nSince I am using a multi branch pipeline Project, switching to cli version of git would require creating an entire unit in itself to scan for git changes via cli, trigger projects, and have no idea about how to create new projects for a new branch detected on git repo. That's why not inclined towards using git cli via execute shell.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4009185,"reputation":347,"user_id":3303078,"accept_rate":62,"display_name":"swinters"},"score":0,"creation_date":1550078224,"post_id":54675873,"comment_id":96141080,"body_markdown":"What line is &quot;line 15&quot; that is causing this error?","body":"What line is &quot;line 15&quot; that is causing this error?"}],"answers":[{"tags":[],"owner":{"account_id":203641,"reputation":2744,"user_id":451420,"accept_rate":81,"display_name":"luthier"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1550078192,"creation_date":1550078192,"answer_id":54675956,"question_id":54675873,"body_markdown":"You are doing `return res.add(...);`, and the `add` method returns a boolean value (in fact, I just checked out of curiosity, and it seems to always return `true`). \r\n\r\nIf you want to return the List, just do:\r\n\r\n```\r\nres.add(...);\r\nreturn res;\r\n```","title":"error: incompatible types: boolean cannot be converted to List&lt;String&gt;","body":"<p>You are doing <code>return res.add(...);</code>, and the <code>add</code> method returns a boolean value (in fact, I just checked out of curiosity, and it seems to always return <code>true</code>). </p>\n\n<p>If you want to return the List, just do:</p>\n\n<pre><code>res.add(...);\nreturn res;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":434437,"reputation":15453,"user_id":820410,"accept_rate":60,"display_name":"Pankaj Singhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550078608,"creation_date":1550078279,"answer_id":54675977,"question_id":54675873,"body_markdown":"[`List.add()`](https://docs.oracle.com/javase/7/docs/api/java/util/List.html#add(E)) returns a boolean value.\r\n\r\n&gt; returns true if this collection changed as a result of the call\r\n\r\nSince, you are returning `res.add()`, it is returning `boolean` from the function. But, Your function definition says defines the return type to be `List&lt;String&gt;`. Hence, the error.\r\n\r\nYou should return the list at the end of the function.\r\n\r\n    public List&lt;String&gt; findMissingRanges(int[] nums, int lower, int upper) \r\n    {\r\n        List&lt;String&gt; res=new ArrayList&lt;String&gt;();\r\n        //Do operations on res\r\n        return res;\r\n    }","title":"error: incompatible types: boolean cannot be converted to List&lt;String&gt;","body":"<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/List.html#add(E)\" rel=\"nofollow noreferrer\"><code>List.add()</code></a> returns a boolean value.</p>\n\n<blockquote>\n  <p>returns true if this collection changed as a result of the call</p>\n</blockquote>\n\n<p>Since, you are returning <code>res.add()</code>, it is returning <code>boolean</code> from the function. But, Your function definition says defines the return type to be <code>List&lt;String&gt;</code>. Hence, the error.</p>\n\n<p>You should return the list at the end of the function.</p>\n\n<pre><code>public List&lt;String&gt; findMissingRanges(int[] nums, int lower, int upper) \n{\n    List&lt;String&gt; res=new ArrayList&lt;String&gt;();\n    //Do operations on res\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3118610,"reputation":481,"user_id":2638862,"display_name":"nldoty"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550078335,"creation_date":1550078335,"answer_id":54675998,"question_id":54675873,"body_markdown":"Your method type returns `List` but when you call `res.add` you&#39;re not returning the list - instead, you&#39;re returning the value &#39;true&#39; because that&#39;s what adding to a list returns, as per the docs. \r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/List.html#add(E)","title":"error: incompatible types: boolean cannot be converted to List&lt;String&gt;","body":"<p>Your method type returns <code>List</code> but when you call <code>res.add</code> you're not returning the list - instead, you're returning the value 'true' because that's what adding to a list returns, as per the docs. \n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/List.html#add(E)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/List.html#add(E)</a></p>\n"}],"owner":{"account_id":15326969,"reputation":31,"user_id":11057834,"display_name":"Rinkle seth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16164,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1683022447,"creation_date":1550077904,"question_id":54675873,"body_markdown":"I am getting the below error.\r\n```none\r\nLine 15: error: incompatible types: boolean cannot be converted to List&lt;String&gt;\r\n```\r\ninteger.toString() returns a `String` instance and I am adding that to a list of Strings. \r\nWhy does it give boolean cannot be converted to error. Because return value is `String` and value I want to add is also a `String`.\r\n\r\n```java\r\n\r\nclass Solution {\r\n    public List&lt;String&gt; findMissingRanges(int[] nums, int lower, int upper) {\r\n        List&lt;String&gt; res = new ArrayList&lt;String&gt;();\r\n        if (nums.length == 0) {\r\n            if (upper - lower == 2) {\r\n                // String a=Integer.toString(lower+1);\r\n                // res.add(a);\r\n                res.add(Integer.toString(123));\r\n            } else if (upper - lower &gt; 2) {\r\n\r\n                return res.add(Integer.toString(lower) + &quot;&gt;&quot; + Integer.toString(upper));\r\n            }\r\n        }\r\n\r\n        int r = upper;\r\n        boolean flag = false;\r\n        for (int i = 0; i &lt; nums.length; i++) {\r\n\r\n            if (i == 0 &amp;&amp; nums[i] - lower &gt;= 2 &amp;&amp; res.size() == 0) {\r\n                upper = nums[i];\r\n                flag = true;\r\n            } else if (i != nums.length - 1) {\r\n                upper = nums[i + 1];\r\n                lower = nums[i];\r\n            }\r\n            if (i == nums.length - 1) {\r\n                lower = nums[i];\r\n                upper = r;\r\n            }\r\n            if (upper - lower == 2) {\r\n                // int temp=lower+1;\r\n                Integer temp = new Integer(lower + 1);\r\n                res.add(temp.toString());\r\n                if (i == 0 &amp;&amp; flag == true) {\r\n                    i--;\r\n                    flag = false;\r\n                }\r\n            } else if (upper - lower &gt; 2) {\r\n                int a = lower + 1;\r\n                if (i == 0 &amp;&amp; flag == true) {\r\n                    i--;\r\n                    a = lower;\r\n                    flag = false;\r\n                }\r\n                int b = (i == nums.length - 1) ? upper : upper - 1;\r\n                String subRes = a + &quot;-&gt;&quot; + b;\r\n                res.add(subRes);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```\r\n","title":"error: incompatible types: boolean cannot be converted to List&lt;String&gt;","body":"<p>I am getting the below error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Line 15: error: incompatible types: boolean cannot be converted to List&lt;String&gt;\n</code></pre>\n<p>integer.toString() returns a <code>String</code> instance and I am adding that to a list of Strings.\nWhy does it give boolean cannot be converted to error. Because return value is <code>String</code> and value I want to add is also a <code>String</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Solution {\n    public List&lt;String&gt; findMissingRanges(int[] nums, int lower, int upper) {\n        List&lt;String&gt; res = new ArrayList&lt;String&gt;();\n        if (nums.length == 0) {\n            if (upper - lower == 2) {\n                // String a=Integer.toString(lower+1);\n                // res.add(a);\n                res.add(Integer.toString(123));\n            } else if (upper - lower &gt; 2) {\n\n                return res.add(Integer.toString(lower) + &quot;&gt;&quot; + Integer.toString(upper));\n            }\n        }\n\n        int r = upper;\n        boolean flag = false;\n        for (int i = 0; i &lt; nums.length; i++) {\n\n            if (i == 0 &amp;&amp; nums[i] - lower &gt;= 2 &amp;&amp; res.size() == 0) {\n                upper = nums[i];\n                flag = true;\n            } else if (i != nums.length - 1) {\n                upper = nums[i + 1];\n                lower = nums[i];\n            }\n            if (i == nums.length - 1) {\n                lower = nums[i];\n                upper = r;\n            }\n            if (upper - lower == 2) {\n                // int temp=lower+1;\n                Integer temp = new Integer(lower + 1);\n                res.add(temp.toString());\n                if (i == 0 &amp;&amp; flag == true) {\n                    i--;\n                    flag = false;\n                }\n            } else if (upper - lower &gt; 2) {\n                int a = lower + 1;\n                if (i == 0 &amp;&amp; flag == true) {\n                    i--;\n                    a = lower;\n                    flag = false;\n                }\n                int b = (i == nums.length - 1) ? upper : upper - 1;\n                String subRes = a + &quot;-&gt;&quot; + b;\n                res.add(subRes);\n            }\n        }\n        return res;\n    }\n}\n</code></pre>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":434849,"reputation":9817,"user_id":821110,"accept_rate":95,"display_name":"W.K.S"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462976025,"creation_date":1462975571,"answer_id":37165111,"question_id":37164936,"body_markdown":"You can use a regex to find all the quotation marks at the beginning and at the end of the string and replace them with `&quot;&quot;`.\r\n\r\n\r\n    myString.replaceAll(&quot;^\\&quot;*|\\&quot;*$&quot;,&quot;&quot;);\r\n\r\nTry it on [ideone][1].\r\n\r\n\r\n  [1]: http://ideone.com/7SPslf","title":"Erase quotation mark at the end and the beginning","body":"<p>You can use a regex to find all the quotation marks at the beginning and at the end of the string and replace them with <code>\"\"</code>.</p>\n\n<pre><code>myString.replaceAll(\"^\\\"*|\\\"*$\",\"\");\n</code></pre>\n\n<p>Try it on <a href=\"http://ideone.com/7SPslf\" rel=\"nofollow\">ideone</a>.</p>\n"},{"tags":[],"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683022167,"creation_date":1462975625,"answer_id":37165141,"question_id":37164936,"body_markdown":" You can do that with a Regex: \r\n\r\n    String rawString = myString.replaceAll(&quot;[&#39;\\&quot;](.+)[&#39;\\&quot;]&quot;, &quot;$1&quot;);\r\n\r\n    &quot;a text&quot;\r\n    &quot;another text&quot;\r\n    &quot;a text with &quot;nested&quot; quotation&quot;\r\n\r\nwill return:\r\n\r\n    a text\r\n    a greater text\r\n    a text with &quot;nested&quot; quotation\r\n\r\n\r\nOr you can simply remove all quotation marks from the string: \r\n\r\n    String rawString = myString.replaceAll(&quot;[&#39;\\&quot;]+&quot;, &quot;&quot;);\r\n\r\n","title":"Erase quotation mark at the end and the beginning","body":"<p>You can do that with a Regex:</p>\n<pre><code>String rawString = myString.replaceAll(&quot;['\\&quot;](.+)['\\&quot;]&quot;, &quot;$1&quot;);\n\n&quot;a text&quot;\n&quot;another text&quot;\n&quot;a text with &quot;nested&quot; quotation&quot;\n</code></pre>\n<p>will return:</p>\n<pre><code>a text\na greater text\na text with &quot;nested&quot; quotation\n</code></pre>\n<p>Or you can simply remove all quotation marks from the string:</p>\n<pre><code>String rawString = myString.replaceAll(&quot;['\\&quot;]+&quot;, &quot;&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6605202,"reputation":2980,"user_id":5102206,"accept_rate":58,"display_name":"Ralf Wickum"},"score":0,"creation_date":1462976595,"post_id":37165225,"comment_id":61866449,"body_markdown":"One of my csv file is apprx. 7 MB with 73.000 lines. To open and read that on my Android takes me more than 5 minutes. Would I gain any speed advantages from that library ?","body":"One of my csv file is apprx. 7 MB with 73.000 lines. To open and read that on my Android takes me more than 5 minutes. Would I gain any speed advantages from that library ?"},{"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"score":0,"creation_date":1462977368,"post_id":37165225,"comment_id":61867058,"body_markdown":"Apache Commons CSV is also a good option: https://commons.apache.org/proper/commons-csv/","body":"Apache Commons CSV is also a good option: <a href=\"https://commons.apache.org/proper/commons-csv/\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-csv</a>"}],"tags":[],"owner":{"account_id":7448533,"reputation":41,"user_id":5664036,"display_name":"Jan-Espen Oversand"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462975842,"creation_date":1462975842,"answer_id":37165225,"question_id":37164936,"body_markdown":"Have you considered using something like opencsv to read the csv-files?\r\n\r\nhttp://opencsv.sourceforge.net/\r\n\r\n(also available in maven central)\r\n\r\nUsing a library to read the csv-files may be of convenience, but it will probably handle encoded double quotes in the strings as well.","title":"Erase quotation mark at the end and the beginning","body":"<p>Have you considered using something like opencsv to read the csv-files?</p>\n\n<p><a href=\"http://opencsv.sourceforge.net/\" rel=\"nofollow\">http://opencsv.sourceforge.net/</a></p>\n\n<p>(also available in maven central)</p>\n\n<p>Using a library to read the csv-files may be of convenience, but it will probably handle encoded double quotes in the strings as well.</p>\n"}],"owner":{"account_id":6605202,"reputation":2980,"user_id":5102206,"accept_rate":58,"display_name":"Ralf Wickum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1683022167,"creation_date":1462975146,"question_id":37164936,"body_markdown":"After read a cvs file, I have a lot of \r\n&gt; &quot;\r\n\r\nquotation marks. At least all the fields begin with double quotation marks and end with two as well. It might also happen, that in between there are also further quotation marks, as in following example:\r\n\r\n&gt; &quot;&quot;Entry in &quot;cvs&quot; file&quot;&quot;\r\n\r\nCurrently I remove them by:\r\n\r\n    String raw_string = myString.replace(&quot;\\&quot;&quot;, &quot;&quot;);\r\n\r\nor \r\n\r\n    String raw_string = myString.substring(1, mystring.length() -1);\r\n\r\nsince it is the first and last charachter.. \r\n\r\n**What is more efficient? \r\nAre there other more efficient methods?**\r\n","title":"Erase quotation mark at the end and the beginning","body":"<p>After read a cvs file, I have a lot of </p>\n\n<blockquote>\n  <p>\"</p>\n</blockquote>\n\n<p>quotation marks. At least all the fields begin with double quotation marks and end with two as well. It might also happen, that in between there are also further quotation marks, as in following example:</p>\n\n<blockquote>\n  <p>\"\"Entry in \"cvs\" file\"\"</p>\n</blockquote>\n\n<p>Currently I remove them by:</p>\n\n<pre><code>String raw_string = myString.replace(\"\\\"\", \"\");\n</code></pre>\n\n<p>or </p>\n\n<pre><code>String raw_string = myString.substring(1, mystring.length() -1);\n</code></pre>\n\n<p>since it is the first and last charachter.. </p>\n\n<p><strong>What is more efficient? \nAre there other more efficient methods?</strong></p>\n"},{"tags":["javascript","java","regex","syntax"],"answers":[{"comments":[{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1466631989,"post_id":37978758,"comment_id":63403547,"body_markdown":"Note that the original OP pattern matches  a `,` that is not followed with 0+ characters other than `[` followed with `]`. Perhaps, a safer pattern would look like `&quot;,(?![^\\\\[\\\\]]*])&quot;`, but a CSV parser should work best for such strings.","body":"Note that the original OP pattern matches  a <code>,</code> that is not followed with 0+ characters other than <code>[</code> followed with <code>]</code>. Perhaps, a safer pattern would look like <code>&quot;,(?![^\\\\[\\\\]]*])&quot;</code>, but a CSV parser should work best for such strings."},{"owner":{"account_id":5989886,"reputation":119,"user_id":4706242,"display_name":"helfo"},"score":0,"creation_date":1466717956,"post_id":37978758,"comment_id":63448745,"body_markdown":"The RegEx you posted &quot;,(?![^\\\\[\\\\]]*])&quot; works fine if there is only one pair of brackets, ex. var=[some,list,here] but if there are any other brackets inside those brackets the RegEx will break ex. var=[some,list,here[something]]. Do you know how this can be fixed?","body":"The RegEx you posted &quot;,(?![^\\&#91;\\&#93;]*])&quot; works fine if there is only one pair of brackets, ex. var=[some,list,here] but if there are any other brackets inside those brackets the RegEx will break ex. var=[some,list,here[something]]. Do you know how this can be fixed?"},{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1466718056,"post_id":37978758,"comment_id":63448782,"body_markdown":"Yes and no, depends on the string itself. One thing is certain: you cannot use a Java regex  to match nested constructs.","body":"Yes and no, depends on the string itself. One thing is certain: you cannot use a Java regex  to match nested constructs."},{"owner":{"account_id":5989886,"reputation":119,"user_id":4706242,"display_name":"helfo"},"score":0,"creation_date":1466718566,"post_id":37978758,"comment_id":63448991,"body_markdown":"are you sure about that?","body":"are you sure about that?"},{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1466718653,"post_id":37978758,"comment_id":63449028,"body_markdown":"Java regex does not support recursion in regular expressions. It is a fact. Nor does it support balanced constructs as .NET regexes.","body":"Java regex does not support recursion in regular expressions. It is a fact. Nor does it support balanced constructs as .NET regexes."}],"tags":[],"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1466720588,"creation_date":1466631678,"answer_id":37978758,"question_id":37978665,"body_markdown":"# Update for nested square bracket support\n\nSince you need to also support nested square brackets, and the comma should be ignored inside the square brackets, you need a simple parser to collect the chunks of text you need.\n\n    public static List&lt;String&gt; splitWithCommaOutsideBrackets(String input) {\n        int BracketCount = 0;\n        int start = 0;\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\n        for(int i=0; i&lt;input.length(); i++) {\n            switch(input.charAt(i)) {\n            case &#39;,&#39;:\n                if(BracketCount == 0) {\n                    result.add(input.substring(start, i).trim());// Trims the item!\n                    start = i+1;\n                }\n                break;\n            case &#39;[&#39;:\n                BracketCount++;\n                break;\n            case &#39;]&#39;:\n                BracketCount--;\n                if(BracketCount &lt; 0) \n                    return result; // The BracketCount shows the [ and ] number is unbalanced\n                break;\n            }\n        }\n        if (BracketCount &gt; 0)\n            return result; // Missing closing ]\n        result.add(input.substring(start).trim()); // Trims the item!\n        return result;\n    }\n\nAnd use it as\n\n    String s = &quot;ex1 , [ex2 , ex3 ] , [ hh3 , rt5 , w3 [ bn7 ] ] , ex 4 , ex 4, [ex , ex ]&quot;;\n    List&lt;String&gt; res = splitWithCommaOutsideBrackets(s);\n    for (String t: res) {\n        System.out.println(t);\n    } \n\nOutput of the [sample Java code][1]:\n\n    ex1\n    [ex2 , ex3 ]\n    [ hh3 , rt5 , w3 [ bn7 ] ]\n    ex 4\n    ex 4\n    [ex , ex ]\n\nNote that trimming items is not necessary.\n\nAlso, where I `return result`, you may want to add code throwing an exception rather than returning the `result` as it is at that moment.\n\n# Original answer\n\nIn Java character classes, `]` and `[` must be escaped, unlike in JavaScript where you only have to escape `]` symbol (inside the character class). \n\n    String pat = &quot;,(?![^\\\\[]*])&quot;;\n                        ^^\n\nHere is an [IDEONE demo][2]:\n\n    String s = &quot;ex1 , [ex2 , ex3 ] , ex 4 , ex 4, [ex , ex ]&quot;;\n    String pat = &quot;,(?![^\\\\[]*])&quot;;\n    String[] result = s.split(pat);\n    System.out.println(Arrays.toString(result));\n\nNote that neither in Java, nor in JS, the `]`, outside the character class, does not have to be escaped.\n\n\n  [1]: http://ideone.com/Z2c85b\n  [2]: http://ideone.com/fiBbad","title":"Convert RegEx from JavaScript to Java","body":"<h1>Update for nested square bracket support</h1>\n<p>Since you need to also support nested square brackets, and the comma should be ignored inside the square brackets, you need a simple parser to collect the chunks of text you need.</p>\n<pre><code>public static List&lt;String&gt; splitWithCommaOutsideBrackets(String input) {\n    int BracketCount = 0;\n    int start = 0;\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    for(int i=0; i&lt;input.length(); i++) {\n        switch(input.charAt(i)) {\n        case ',':\n            if(BracketCount == 0) {\n                result.add(input.substring(start, i).trim());// Trims the item!\n                start = i+1;\n            }\n            break;\n        case '[':\n            BracketCount++;\n            break;\n        case ']':\n            BracketCount--;\n            if(BracketCount &lt; 0) \n                return result; // The BracketCount shows the [ and ] number is unbalanced\n            break;\n        }\n    }\n    if (BracketCount &gt; 0)\n        return result; // Missing closing ]\n    result.add(input.substring(start).trim()); // Trims the item!\n    return result;\n}\n</code></pre>\n<p>And use it as</p>\n<pre><code>String s = &quot;ex1 , [ex2 , ex3 ] , [ hh3 , rt5 , w3 [ bn7 ] ] , ex 4 , ex 4, [ex , ex ]&quot;;\nList&lt;String&gt; res = splitWithCommaOutsideBrackets(s);\nfor (String t: res) {\n    System.out.println(t);\n} \n</code></pre>\n<p>Output of the <a href=\"http://ideone.com/Z2c85b\" rel=\"nofollow noreferrer\">sample Java code</a>:</p>\n<pre><code>ex1\n[ex2 , ex3 ]\n[ hh3 , rt5 , w3 [ bn7 ] ]\nex 4\nex 4\n[ex , ex ]\n</code></pre>\n<p>Note that trimming items is not necessary.</p>\n<p>Also, where I <code>return result</code>, you may want to add code throwing an exception rather than returning the <code>result</code> as it is at that moment.</p>\n<h1>Original answer</h1>\n<p>In Java character classes, <code>]</code> and <code>[</code> must be escaped, unlike in JavaScript where you only have to escape <code>]</code> symbol (inside the character class).</p>\n<pre><code>String pat = &quot;,(?![^\\\\[]*])&quot;;\n                    ^^\n</code></pre>\n<p>Here is an <a href=\"http://ideone.com/fiBbad\" rel=\"nofollow noreferrer\">IDEONE demo</a>:</p>\n<pre><code>String s = &quot;ex1 , [ex2 , ex3 ] , ex 4 , ex 4, [ex , ex ]&quot;;\nString pat = &quot;,(?![^\\\\[]*])&quot;;\nString[] result = s.split(pat);\nSystem.out.println(Arrays.toString(result));\n</code></pre>\n<p>Note that neither in Java, nor in JS, the <code>]</code>, outside the character class, does not have to be escaped.</p>\n"}],"owner":{"account_id":5989886,"reputation":119,"user_id":4706242,"display_name":"helfo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":829,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":37978758,"answer_count":1,"score":2,"last_activity_date":1683022130,"creation_date":1466631279,"question_id":37978665,"body_markdown":"OK, so I am trying to split a String by &quot;, &quot; which are not inside &#39;[&#39; or &#39;]&#39;. I have a working RegEx for JavaScript but have been unable to convert it to Java syntax.\r\n\r\nJS RegEX: \r\n\r\n\r\n    /,(?![^[]*])/g\r\n    \r\nExample sentence: \r\n\r\n    ex1 , [ex2 , ex3 ] , ex 4 , ex 4, [ex , ex ]\r\n\r\nWhen I try and use the RegEx in Java (under Eclipse) I get an error saying:\r\n\r\n&gt; Unclosed character class near index 10\r\n,(?![^[]*])\r\n\r\nAll I did was remove the &#39;/&#39; at the beginning and the &quot;/g&quot; at the end and I have been unable to translate the Syntax. \r\n\r\nWhat would be the best way to achieve this?","title":"Convert RegEx from JavaScript to Java","body":"<p>OK, so I am trying to split a String by &quot;, &quot; which are not inside '[' or ']'. I have a working RegEx for JavaScript but have been unable to convert it to Java syntax.</p>\n<p>JS RegEX:</p>\n<pre><code>/,(?![^[]*])/g\n</code></pre>\n<p>Example sentence:</p>\n<pre><code>ex1 , [ex2 , ex3 ] , ex 4 , ex 4, [ex , ex ]\n</code></pre>\n<p>When I try and use the RegEx in Java (under Eclipse) I get an error saying:</p>\n<blockquote>\n<p>Unclosed character class near index 10\n,(?![^[]*])</p>\n</blockquote>\n<p>All I did was remove the '/' at the beginning and the &quot;/g&quot; at the end and I have been unable to translate the Syntax.</p>\n<p>What would be the best way to achieve this?</p>\n"},{"tags":["java","junit","junit5","parameterized-unit-test"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1682934977,"post_id":76146029,"comment_id":134286077,"body_markdown":"*Configuration error: You must configure at least one set of arguments for this @ParameterizedTest* the message sounds pretty clear. *testData* returns an empty stream","body":"<i>Configuration error: You must configure at least one set of arguments for this @ParameterizedTest</i> the message sounds pretty clear. <i>testData</i> returns an empty stream"},{"owner":{"account_id":28470678,"reputation":13,"user_id":21786039,"display_name":"ScrewTheWest"},"score":0,"creation_date":1682935076,"post_id":76146029,"comment_id":134286094,"body_markdown":"@Jens `@MethodSource(&quot;testData&quot;)` is already there. `testData` returns  `Stream&lt;Arguments&gt;`. What additional set of arguments needs to be configured there?","body":"@Jens <code>@MethodSource(&quot;testData&quot;)</code> is already there. <code>testData</code> returns  <code>Stream&lt;Arguments&gt;</code>. What additional set of arguments needs to be configured there?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1682937806,"post_id":76146029,"comment_id":134286493,"body_markdown":"Have you tried to debug if you get a Stream with atleast one argument?","body":"Have you tried to debug if you get a Stream with atleast one argument?"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683022111,"creation_date":1683020212,"answer_id":76153588,"question_id":76146029,"body_markdown":"I believe the `testData()` is throwing an exception. To simplify the question, try running this test: you&#39;ll a similar exception with the same message:\r\n\r\n```java\r\nstatic Stream&lt;Arguments&gt; testData() throws Exception {\r\n\tif(true)\r\n\t\tthrow new RuntimeException(&quot;&quot;);\r\n\treturn Stream.of(\r\n\t\t\targuments(&quot;a&quot;, 1),\r\n\t\t\targuments(&quot;b&quot;, 2),\r\n\t\t\targuments(&quot;c&quot;, 3)\r\n\t);\r\n}\r\n\r\n@ParameterizedTest\r\n@MethodSource(&quot;testData&quot;)\r\npublic void givenInputData_whenModifyJwt_thenReturnCorrectResult(final String str, final int nr) {\r\n\tSystem.out.println(str + nr);\r\n    // ==&gt; Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\r\n}\r\n```\r\n\r\nIn order to make it more visible, you can catch the error and *fail* the test:\r\n\r\n```java\r\nstatic Stream&lt;Arguments&gt; testData() {\r\n\ttry {\r\n\t\t// preparing test arguments \r\n        // return Stream.of(...);\r\n\t} catch (Exception e) {\r\n\t\tAssertions.fail(&quot;testData() threw exception while setting up the test. &quot;, e);\r\n\t\treturn Stream.empty();\r\n\t}\r\n}\r\n```\r\nAs a result, you&#39;ll have a failed test with a better error message.","title":"How to fix the error &quot;Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation&quot;?","body":"<p>I believe the <code>testData()</code> is throwing an exception. To simplify the question, try running this test: you'll a similar exception with the same message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Stream&lt;Arguments&gt; testData() throws Exception {\n    if(true)\n        throw new RuntimeException(&quot;&quot;);\n    return Stream.of(\n            arguments(&quot;a&quot;, 1),\n            arguments(&quot;b&quot;, 2),\n            arguments(&quot;c&quot;, 3)\n    );\n}\n\n@ParameterizedTest\n@MethodSource(&quot;testData&quot;)\npublic void givenInputData_whenModifyJwt_thenReturnCorrectResult(final String str, final int nr) {\n    System.out.println(str + nr);\n    // ==&gt; Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\n}\n</code></pre>\n<p>In order to make it more visible, you can catch the error and <em>fail</em> the test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Stream&lt;Arguments&gt; testData() {\n    try {\n        // preparing test arguments \n        // return Stream.of(...);\n    } catch (Exception e) {\n        Assertions.fail(&quot;testData() threw exception while setting up the test. &quot;, e);\n        return Stream.empty();\n    }\n}\n</code></pre>\n<p>As a result, you'll have a failed test with a better error message.</p>\n"}],"owner":{"account_id":28470678,"reputation":13,"user_id":21786039,"display_name":"ScrewTheWest"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":840,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76153588,"answer_count":1,"score":1,"last_activity_date":1683022111,"creation_date":1682934820,"question_id":76146029,"body_markdown":"I have the following parameterized JUnit5 test that is supposed to take input data from the method `testData`\r\n\r\n```\r\nimport com.nimbusds.jose.JOSEException;\r\nimport com.nimbusds.jose.JWSHeader;\r\nimport com.nimbusds.jose.JWSSigner;\r\nimport com.nimbusds.jose.crypto.MACSigner;\r\nimport com.nimbusds.jwt.JWTClaimsSet;\r\nimport com.nimbusds.jwt.SignedJWT;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.Arguments;\r\nimport org.junit.jupiter.params.provider.MethodSource;\r\nimport org.springframework.http.ResponseEntity;\r\n\r\nimport java.util.stream.Stream;\r\n\r\nimport static com.nimbusds.jose.JWSAlgorithm.HS256;\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.params.provider.Arguments.arguments;\r\nimport static org.springframework.http.HttpStatus.BAD_REQUEST;\r\nimport static org.springframework.http.HttpStatus.UNAUTHORIZED;\r\nimport static org.springframework.http.ResponseEntity.status;\r\n\r\nclass JwtModifierControllerValidationTest {\r\n    private final static String SECRET_KEY = &quot;xG5Zamg9VHr0al0ob+LDsnMxEdLFNvOiPCiV8Cq3xgM=&quot;;\r\n\r\n    static Stream&lt;Arguments&gt; testData() throws JOSEException {\r\n        final JWSSigner signer = new MACSigner(SECRET_KEY);\r\n        final SignedJWT inputJwt1 = new SignedJWT(new JWSHeader(HS256),\r\n                new JWTClaimsSet.Builder()\r\n                        .subject(&quot;test&quot;)\r\n                        .build()\r\n        );\r\n        inputJwt1.sign(signer);\r\n\r\n        final String validAuthHeader = String.format(&quot;Bearer %s&quot;, inputJwt1.serialize());\r\n\r\n        final String invalidAuthHeader = validAuthHeader.substring(0, validAuthHeader.length() - 2);\r\n\r\n        return Stream.of(\r\n                arguments(validAuthHeader, &quot;&quot;,\r\n                        status(BAD_REQUEST).body(&quot;Empty expiration date parameter&quot;)),\r\n                arguments(validAuthHeader, &quot;YYY-adsf-1&quot;,\r\n                        status(BAD_REQUEST).body(&quot;Invalid expiration date parameter&quot;)),\r\n                arguments(&quot;&quot;, &quot;2023-05-01&quot;,\r\n                        status(BAD_REQUEST).body(&quot;Empty token&quot;)),\r\n                arguments(invalidAuthHeader, &quot;2023-05-01&quot;,\r\n                        status(UNAUTHORIZED).body(&quot;Invalid token&quot;))\r\n        );\r\n    }\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;testData&quot;)\r\n    public void givenInputData_whenModifyJwt_thenReturnCorrectResult(final String authorizationHeader, final String newExpirationDate, final ResponseEntity&lt;String&gt; expectedResult) {\r\n        // Given\r\n        final JwtModifierController sut = new JwtModifierController();\r\n        sut.secretKey = SECRET_KEY;\r\n\r\n        // When\r\n        final ResponseEntity&lt;String&gt; actualResult = sut.modifyJwt(authorizationHeader,\r\n                newExpirationDate);\r\n\r\n        // Then\r\n        assertEquals(expectedResult, actualResult);\r\n    }\r\n}\r\n```\r\n\r\nThe `pom.xml` file contains the following:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.2&lt;/version&gt;\r\n        &lt;relativePath /&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;...&lt;/groupId&gt;\r\n    &lt;artifactId&gt;...&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;13&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;13&lt;/maven.compiler.target&gt;\r\n        &lt;jjwt.version&gt;0.11.5&lt;/jjwt.version&gt;\r\n        &lt;junit.version&gt;5.9.3&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.32&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\r\n            &lt;version&gt;9.31&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-platform-commons&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.3&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nWhen I run the test I get the following error:\r\n\r\n```\r\njava.lang.AbstractMethodError: Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation of the resolved method &#39;abstract org.junit.jupiter.api.extension.ExecutableInvoker getExecutableInvoker()&#39; of interface org.junit.jupiter.api.extension.ExtensionContext.\r\n\r\n\tat org.junit.jupiter.params.provider.MethodArgumentsProvider.lambda$provideArguments$2(MethodArgumentsProvider.java:60)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1621)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1621)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\r\n\tat org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:107)\r\n\tat org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:42)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1507)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1507)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\tSuppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\r\n\t\tat org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:299)\r\n\t\tat org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\r\n\t\tat java.base/java.util.stream.AbstractPipeline.close(AbstractPipeline.java:323)\r\n\t\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\r\n\t\t... 54 more\r\n\r\n```\r\n\r\n\r\n\r\nBefore that I was getting the error `java.lang.NoSuchMethodError: &#39;boolean org.junit.platform.commons.util.CollectionUtils.isConvertibleToStream(java.lang.Class)&#39;` which I fixed by adding the following dependency:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-platform-commons&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.3&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nHow can I make the above test run?","title":"How to fix the error &quot;Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation&quot;?","body":"<p>I have the following parameterized JUnit5 test that is supposed to take input data from the method <code>testData</code></p>\n<pre><code>import com.nimbusds.jose.JOSEException;\nimport com.nimbusds.jose.JWSHeader;\nimport com.nimbusds.jose.JWSSigner;\nimport com.nimbusds.jose.crypto.MACSigner;\nimport com.nimbusds.jwt.JWTClaimsSet;\nimport com.nimbusds.jwt.SignedJWT;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.Arguments;\nimport org.junit.jupiter.params.provider.MethodSource;\nimport org.springframework.http.ResponseEntity;\n\nimport java.util.stream.Stream;\n\nimport static com.nimbusds.jose.JWSAlgorithm.HS256;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.params.provider.Arguments.arguments;\nimport static org.springframework.http.HttpStatus.BAD_REQUEST;\nimport static org.springframework.http.HttpStatus.UNAUTHORIZED;\nimport static org.springframework.http.ResponseEntity.status;\n\nclass JwtModifierControllerValidationTest {\n    private final static String SECRET_KEY = &quot;xG5Zamg9VHr0al0ob+LDsnMxEdLFNvOiPCiV8Cq3xgM=&quot;;\n\n    static Stream&lt;Arguments&gt; testData() throws JOSEException {\n        final JWSSigner signer = new MACSigner(SECRET_KEY);\n        final SignedJWT inputJwt1 = new SignedJWT(new JWSHeader(HS256),\n                new JWTClaimsSet.Builder()\n                        .subject(&quot;test&quot;)\n                        .build()\n        );\n        inputJwt1.sign(signer);\n\n        final String validAuthHeader = String.format(&quot;Bearer %s&quot;, inputJwt1.serialize());\n\n        final String invalidAuthHeader = validAuthHeader.substring(0, validAuthHeader.length() - 2);\n\n        return Stream.of(\n                arguments(validAuthHeader, &quot;&quot;,\n                        status(BAD_REQUEST).body(&quot;Empty expiration date parameter&quot;)),\n                arguments(validAuthHeader, &quot;YYY-adsf-1&quot;,\n                        status(BAD_REQUEST).body(&quot;Invalid expiration date parameter&quot;)),\n                arguments(&quot;&quot;, &quot;2023-05-01&quot;,\n                        status(BAD_REQUEST).body(&quot;Empty token&quot;)),\n                arguments(invalidAuthHeader, &quot;2023-05-01&quot;,\n                        status(UNAUTHORIZED).body(&quot;Invalid token&quot;))\n        );\n    }\n\n    @ParameterizedTest\n    @MethodSource(&quot;testData&quot;)\n    public void givenInputData_whenModifyJwt_thenReturnCorrectResult(final String authorizationHeader, final String newExpirationDate, final ResponseEntity&lt;String&gt; expectedResult) {\n        // Given\n        final JwtModifierController sut = new JwtModifierController();\n        sut.secretKey = SECRET_KEY;\n\n        // When\n        final ResponseEntity&lt;String&gt; actualResult = sut.modifyJwt(authorizationHeader,\n                newExpirationDate);\n\n        // Then\n        assertEquals(expectedResult, actualResult);\n    }\n}\n</code></pre>\n<p>The <code>pom.xml</code> file contains the following:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;...&lt;/groupId&gt;\n    &lt;artifactId&gt;...&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;13&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;13&lt;/maven.compiler.target&gt;\n        &lt;jjwt.version&gt;0.11.5&lt;/jjwt.version&gt;\n        &lt;junit.version&gt;5.9.3&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.32&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n            &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\n            &lt;version&gt;9.31&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-platform-commons&lt;/artifactId&gt;\n            &lt;version&gt;1.9.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>When I run the test I get the following error:</p>\n<pre><code>java.lang.AbstractMethodError: Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation of the resolved method 'abstract org.junit.jupiter.api.extension.ExecutableInvoker getExecutableInvoker()' of interface org.junit.jupiter.api.extension.ExtensionContext.\n\n    at org.junit.jupiter.params.provider.MethodArgumentsProvider.lambda$provideArguments$2(MethodArgumentsProvider.java:60)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\n    at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1621)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\n    at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1621)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\n    at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:107)\n    at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:42)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1507)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1507)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n    Suppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\n        at org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:299)\n        at org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\n        at java.base/java.util.stream.AbstractPipeline.close(AbstractPipeline.java:323)\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\n        ... 54 more\n\n</code></pre>\n<p>Before that I was getting the error <code>java.lang.NoSuchMethodError: 'boolean org.junit.platform.commons.util.CollectionUtils.isConvertibleToStream(java.lang.Class)'</code> which I fixed by adding the following dependency:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-platform-commons&lt;/artifactId&gt;\n            &lt;version&gt;1.9.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>How can I make the above test run?</p>\n"},{"tags":["java","prometheus","open-telemetry","jaeger"],"comments":[{"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"score":0,"creation_date":1672739764,"post_id":74991374,"comment_id":132337759,"body_markdown":"this java agent is only available for java based components. hence adding that tag is necessary for this type of question. otherwise this post will be language agnostic which is not the intent.","body":"this java agent is only available for java based components. hence adding that tag is necessary for this type of question. otherwise this post will be language agnostic which is not the intent."}],"answers":[{"tags":[],"owner":{"account_id":9047280,"reputation":304,"user_id":6739028,"display_name":"Igor Morozov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674423305,"creation_date":1674423305,"answer_id":75204086,"question_id":74991374,"body_markdown":"The bind address for the prometheus exporter is `&quot;collector:6666&quot;`. This means that the created server will accept requests only on port `6666` and only from host `collector`. However, the host of Prometheus is different.\r\nIt&#39;s better to bind to &quot;any address&quot;, e.g. `&quot;0.0.0.0:6666&quot;`.\r\n\r\nAlso, you can use `prometheusremotewrite` exporter instead of `prometheus`. This way you will be able to see problems in the collector logs.","title":"Prometheus is not reading OTEL data","body":"<p>The bind address for the prometheus exporter is <code>&quot;collector:6666&quot;</code>. This means that the created server will accept requests only on port <code>6666</code> and only from host <code>collector</code>. However, the host of Prometheus is different.\nIt's better to bind to &quot;any address&quot;, e.g. <code>&quot;0.0.0.0:6666&quot;</code>.</p>\n<p>Also, you can use <code>prometheusremotewrite</code> exporter instead of <code>prometheus</code>. This way you will be able to see problems in the collector logs.</p>\n"},{"tags":[],"owner":{"account_id":4548,"reputation":3902,"user_id":6896,"accept_rate":82,"display_name":"tronda"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675151809,"creation_date":1675090051,"answer_id":75286030,"question_id":74991374,"body_markdown":"The Monitor tab in Jaeger requires you to set up the [spanmetric processor][1]. This processor will look at spans sent to the OpenTelemetry Collector and if the `span.kind` is `server` it will create metrics for the duration of the spans, keep it in memory until Prometheus scrapes the metrics endpoint - typically on port `8889`. The Jaeger UI can then collect these metrics from Prometheus. \r\n\r\nWithout the spanmetrics processor - You will not be able to see any data in Jaeger&#39;s Monitor tab. \r\n\r\nLook at the [service performance monitoring documentation][2] on setting up the Monitor tab as it describes these details. \r\n\r\n\r\n  [1]: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/spanmetricsprocessor\r\n  [2]: https://www.jaegertracing.io/docs/1.41/spm/","title":"Prometheus is not reading OTEL data","body":"<p>The Monitor tab in Jaeger requires you to set up the <a href=\"https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/spanmetricsprocessor\" rel=\"nofollow noreferrer\">spanmetric processor</a>. This processor will look at spans sent to the OpenTelemetry Collector and if the <code>span.kind</code> is <code>server</code> it will create metrics for the duration of the spans, keep it in memory until Prometheus scrapes the metrics endpoint - typically on port <code>8889</code>. The Jaeger UI can then collect these metrics from Prometheus.</p>\n<p>Without the spanmetrics processor - You will not be able to see any data in Jaeger's Monitor tab.</p>\n<p>Look at the <a href=\"https://www.jaegertracing.io/docs/1.41/spm/\" rel=\"nofollow noreferrer\">service performance monitoring documentation</a> on setting up the Monitor tab as it describes these details.</p>\n"},{"tags":[],"owner":{"account_id":2367781,"reputation":911,"user_id":2073149,"display_name":"Michael B."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683021974,"creation_date":1682885282,"answer_id":76143303,"question_id":74991374,"body_markdown":"I&#39;ve run in the same issue, using the [opentelemetry demo](https://github.com/open-telemetry/opentelemetry-demo/tree/471204eec5031dffcb241c143822d7e4905abc75) as base.\r\n\r\nIt is a bit misleading and confusing (for people like me, who just started with OTEL).\r\n\r\nThere are multiple `spanmetrics` &quot;plugins&quot; whose produced data is incompatible between them.\r\n\r\n- (deprecated) spanmetrics PROCESSOR\r\n   - creates `calls_total` and `latency_bucket`\r\n- (incompatible) spanmetrics CONNECTOR\r\n   - creates `calls` and `duration_bucket`\r\n\r\nThe PROCESSOR produces data in `prometheus` that is compatible with `jaeger` = my &quot;Monitor&quot; tab in Jaeger UI now shows metrics.\r\n\r\nThe CONNECTOR uses a new format, which is compatible with the example [Grafana Dashboards](https://github.com/open-telemetry/opentelemetry-demo/blob/471204eec5031dffcb241c143822d7e4905abc75/src/grafana/provisioning/dashboards/general/spanmetrics-dashboard.json#L948) included in the demo folder (thus i don&#39;t want to change them).\r\n\r\n&gt; it should be possible to change the general exporting format of the CONNECTOR, but how that works... I don&#39;t know yet\r\n\r\nThis config is a bit simplified, see comments for the &quot;what&quot; spanmetrics is used where:\r\n\r\n```yaml\r\nreceivers:\r\n    otlp:\r\n        protocols:\r\n            grpc:\r\n\r\nexporters:\r\n    otlp:\r\n        endpoint: &quot;jaeger:4317&quot;\r\n        tls:\r\n            insecure: true\r\n    logging:\r\n    prometheus:\r\n        # this prometheus is used by `spanmetrics` CONNECTOR + PROCESSOR\r\n        endpoint: &quot;otelcol:9464&quot;\r\n        # these configs apply to the `spanmetrics` CONNECTOR\r\n        resource_to_telemetry_conversion:\r\n            enabled: true\r\n        enable_open_metrics: true # even with `false`, the data wasn&#39;t compatible with `jaeger`\r\n\r\nprocessors:\r\n    batch:\r\n    # deprecated spanmetrics PROCESSOR, used for compatibility with Jaeger Metrics\r\n    spanmetrics:\r\n        metrics_exporter: prometheus\r\n\r\nconnectors:\r\n    # new spanmetrics CONNECTOR\r\n    spanmetrics:\r\n\r\nservice:\r\n    pipelines:\r\n        traces:\r\n            receivers: [ otlp ]\r\n            processors: [ batch, spanmetrics ] # configuring spanmetrics PROCESSOR (deprecated)\r\n            exporters: [ otlp, spanmetrics ] # configuring spanmetrics CONNECTOR (not compatible w/ jaeger)\r\n        metrics:\r\n            receivers: [ redis, otlp, spanmetrics ] # configuring spanmetrics CONNECTOR as source of &quot;metrics&quot; (not compatible w/ jaeger)\r\n            processors: [ batch ]\r\n            exporters: [ prometheus ]\r\n\r\n```","title":"Prometheus is not reading OTEL data","body":"<p>I've run in the same issue, using the <a href=\"https://github.com/open-telemetry/opentelemetry-demo/tree/471204eec5031dffcb241c143822d7e4905abc75\" rel=\"nofollow noreferrer\">opentelemetry demo</a> as base.</p>\n<p>It is a bit misleading and confusing (for people like me, who just started with OTEL).</p>\n<p>There are multiple <code>spanmetrics</code> &quot;plugins&quot; whose produced data is incompatible between them.</p>\n<ul>\n<li>(deprecated) spanmetrics PROCESSOR\n<ul>\n<li>creates <code>calls_total</code> and <code>latency_bucket</code></li>\n</ul>\n</li>\n<li>(incompatible) spanmetrics CONNECTOR\n<ul>\n<li>creates <code>calls</code> and <code>duration_bucket</code></li>\n</ul>\n</li>\n</ul>\n<p>The PROCESSOR produces data in <code>prometheus</code> that is compatible with <code>jaeger</code> = my &quot;Monitor&quot; tab in Jaeger UI now shows metrics.</p>\n<p>The CONNECTOR uses a new format, which is compatible with the example <a href=\"https://github.com/open-telemetry/opentelemetry-demo/blob/471204eec5031dffcb241c143822d7e4905abc75/src/grafana/provisioning/dashboards/general/spanmetrics-dashboard.json#L948\" rel=\"nofollow noreferrer\">Grafana Dashboards</a> included in the demo folder (thus i don't want to change them).</p>\n<blockquote>\n<p>it should be possible to change the general exporting format of the CONNECTOR, but how that works... I don't know yet</p>\n</blockquote>\n<p>This config is a bit simplified, see comments for the &quot;what&quot; spanmetrics is used where:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>receivers:\n    otlp:\n        protocols:\n            grpc:\n\nexporters:\n    otlp:\n        endpoint: &quot;jaeger:4317&quot;\n        tls:\n            insecure: true\n    logging:\n    prometheus:\n        # this prometheus is used by `spanmetrics` CONNECTOR + PROCESSOR\n        endpoint: &quot;otelcol:9464&quot;\n        # these configs apply to the `spanmetrics` CONNECTOR\n        resource_to_telemetry_conversion:\n            enabled: true\n        enable_open_metrics: true # even with `false`, the data wasn't compatible with `jaeger`\n\nprocessors:\n    batch:\n    # deprecated spanmetrics PROCESSOR, used for compatibility with Jaeger Metrics\n    spanmetrics:\n        metrics_exporter: prometheus\n\nconnectors:\n    # new spanmetrics CONNECTOR\n    spanmetrics:\n\nservice:\n    pipelines:\n        traces:\n            receivers: [ otlp ]\n            processors: [ batch, spanmetrics ] # configuring spanmetrics PROCESSOR (deprecated)\n            exporters: [ otlp, spanmetrics ] # configuring spanmetrics CONNECTOR (not compatible w/ jaeger)\n        metrics:\n            receivers: [ redis, otlp, spanmetrics ] # configuring spanmetrics CONNECTOR as source of &quot;metrics&quot; (not compatible w/ jaeger)\n            processors: [ batch ]\n            exporters: [ prometheus ]\n\n</code></pre>\n"}],"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1016,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1683021974,"creation_date":1672738103,"question_id":74991374,"body_markdown":"I have configured docker compose for open telemetry collector, prometheus and jaeger and send data via otel agent. Jaeger is working fine but prometheus is not showing any metrics despite collector receiving metrics data.\r\n\r\nFollowing is my configuration:\r\n\r\ndocker-compose.yml:\r\n\r\n    # docker-compose.yml file\r\n    version: &quot;3.5&quot;\r\n    services:\r\n      jaeger:\r\n        container_name: jaeger\r\n        hostname: jaeger\r\n        networks:\r\n          - backend\r\n        image: jaegertracing/all-in-one:latest\r\n        volumes:\r\n          - &quot;./jaeger-ui.json:/etc/jaeger/jaeger-ui.json&quot;\r\n        command: --query.ui-config /etc/jaeger/jaeger-ui.json\r\n        environment:\r\n          - METRICS_STORAGE_TYPE=prometheus\r\n          - PROMETHEUS_SERVER_URL=http://prometheus:9090\r\n        ports:\r\n          - &quot;14250:14250&quot;\r\n          - &quot;14268:14268&quot;\r\n          - &quot;6831:6831/udp&quot;\r\n          - &quot;16686:16686&quot;\r\n          - &quot;16685:16685&quot;\r\n      collector:\r\n        container_name: collector\r\n        hostname: collector\r\n        networks:\r\n          - backend\r\n        image: otel/opentelemetry-collector-contrib:latest\r\n        volumes:\r\n          - &quot;./otel-collector-config.yml:/etc/otelcol/otel-collector-config.yml&quot;\r\n        command: --config /etc/otelcol/otel-collector-config.yml\r\n        ports:\r\n          - &quot;5555:5555&quot;\r\n          - &quot;6666:6666&quot;\r\n        depends_on:\r\n          - jaeger\r\n      prometheus:\r\n        container_name: prometheus\r\n        hostname: prometheus\r\n        networks:\r\n          - backend\r\n        image: prom/prometheus:latest\r\n        volumes:\r\n          - &quot;./prometheus.yml:/etc/prometheus/prometheus.yml&quot;\r\n        ports:\r\n          - &quot;9090:9090&quot;\r\n    networks:\r\n      backend:\r\n\r\notel-collector-config.yml:\r\n\r\n    receivers:\r\n      otlp:\r\n        protocols:\r\n          grpc:\r\n            endpoint: 0.0.0.0:5555\r\n    processors:\r\n      batch:\r\n        timeout: 1s\r\n        send_batch_size: 1\r\n    exporters:\r\n      prometheus:\r\n        endpoint: &quot;collector:6666&quot;\r\n      jaeger:\r\n        endpoint: &quot;jaeger:14250&quot; # using the docker-compose name of the jaeger container\r\n        tls:\r\n          insecure: true\r\n    service:\r\n      pipelines:\r\n        traces:\r\n          receivers: [ otlp ]\r\n          processors: [ batch ]\r\n          exporters: [ jaeger ]\r\n        metrics:\r\n          receivers: [ otlp ]\r\n          processors: [ batch ]\r\n          exporters: [ prometheus ]\r\n\r\nprometheus.yml:\r\n\r\n    global:\r\n      scrape_interval: 1s # Set the scrape interval to every 15 seconds. Default is every 1 minute.\r\n      evaluation_interval: 1s # Evaluate rules every 15 seconds. The default is every 1 minute.\r\n      # scrape_timeout is set to the global default (10s).\r\n    scrape_configs:\r\n      - job_name: collector\r\n        scrape_interval: 1s\r\n        static_configs:\r\n          - targets: [ &#39;collector:6666&#39; ] # using the name of the OpenTelemetryCollector container defined in the docker compose file\r\n\r\nFollowing is my tracer.properties config used for otel agent for java:\r\n\r\n    otel.traces.exporter=otlp,logging\r\n    otel.metrics.exporter=otlp\r\n    otel.logs.exporter=none\r\n    otel.service.name=service1\r\n    otel.exporter.otlp.endpoint=http://0.0.0.0:5555\r\n    otel.exporter.otlp.protocol=grpc\r\n    otel.traces.sampler=always_on\r\n    otel.metric.export.interval=1000\r\n\r\nI can get trace data in jaeger without any issues:\r\n[![enter image description here][1]][1]\r\n\r\nHowever metrics is not working:\r\n[![enter image description here][2]][2]\r\n\r\nI am also unable to see any metrics data in prometheus:\r\n[![enter image description here][3]][3]\r\n\r\nWhat config am I missing for this to work? Also please specify how to optimize this for production.\r\n\r\n  [1]: https://i.stack.imgur.com/YcPuq.png\r\n  [2]: https://i.stack.imgur.com/kfjrS.png\r\n  [3]: https://i.stack.imgur.com/lPvOZ.png","title":"Prometheus is not reading OTEL data","body":"<p>I have configured docker compose for open telemetry collector, prometheus and jaeger and send data via otel agent. Jaeger is working fine but prometheus is not showing any metrics despite collector receiving metrics data.</p>\n<p>Following is my configuration:</p>\n<p>docker-compose.yml:</p>\n<pre><code># docker-compose.yml file\nversion: &quot;3.5&quot;\nservices:\n  jaeger:\n    container_name: jaeger\n    hostname: jaeger\n    networks:\n      - backend\n    image: jaegertracing/all-in-one:latest\n    volumes:\n      - &quot;./jaeger-ui.json:/etc/jaeger/jaeger-ui.json&quot;\n    command: --query.ui-config /etc/jaeger/jaeger-ui.json\n    environment:\n      - METRICS_STORAGE_TYPE=prometheus\n      - PROMETHEUS_SERVER_URL=http://prometheus:9090\n    ports:\n      - &quot;14250:14250&quot;\n      - &quot;14268:14268&quot;\n      - &quot;6831:6831/udp&quot;\n      - &quot;16686:16686&quot;\n      - &quot;16685:16685&quot;\n  collector:\n    container_name: collector\n    hostname: collector\n    networks:\n      - backend\n    image: otel/opentelemetry-collector-contrib:latest\n    volumes:\n      - &quot;./otel-collector-config.yml:/etc/otelcol/otel-collector-config.yml&quot;\n    command: --config /etc/otelcol/otel-collector-config.yml\n    ports:\n      - &quot;5555:5555&quot;\n      - &quot;6666:6666&quot;\n    depends_on:\n      - jaeger\n  prometheus:\n    container_name: prometheus\n    hostname: prometheus\n    networks:\n      - backend\n    image: prom/prometheus:latest\n    volumes:\n      - &quot;./prometheus.yml:/etc/prometheus/prometheus.yml&quot;\n    ports:\n      - &quot;9090:9090&quot;\nnetworks:\n  backend:\n</code></pre>\n<p>otel-collector-config.yml:</p>\n<pre><code>receivers:\n  otlp:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:5555\nprocessors:\n  batch:\n    timeout: 1s\n    send_batch_size: 1\nexporters:\n  prometheus:\n    endpoint: &quot;collector:6666&quot;\n  jaeger:\n    endpoint: &quot;jaeger:14250&quot; # using the docker-compose name of the jaeger container\n    tls:\n      insecure: true\nservice:\n  pipelines:\n    traces:\n      receivers: [ otlp ]\n      processors: [ batch ]\n      exporters: [ jaeger ]\n    metrics:\n      receivers: [ otlp ]\n      processors: [ batch ]\n      exporters: [ prometheus ]\n</code></pre>\n<p>prometheus.yml:</p>\n<pre><code>global:\n  scrape_interval: 1s # Set the scrape interval to every 15 seconds. Default is every 1 minute.\n  evaluation_interval: 1s # Evaluate rules every 15 seconds. The default is every 1 minute.\n  # scrape_timeout is set to the global default (10s).\nscrape_configs:\n  - job_name: collector\n    scrape_interval: 1s\n    static_configs:\n      - targets: [ 'collector:6666' ] # using the name of the OpenTelemetryCollector container defined in the docker compose file\n</code></pre>\n<p>Following is my tracer.properties config used for otel agent for java:</p>\n<pre><code>otel.traces.exporter=otlp,logging\notel.metrics.exporter=otlp\notel.logs.exporter=none\notel.service.name=service1\notel.exporter.otlp.endpoint=http://0.0.0.0:5555\notel.exporter.otlp.protocol=grpc\notel.traces.sampler=always_on\notel.metric.export.interval=1000\n</code></pre>\n<p>I can get trace data in jaeger without any issues:\n<a href=\"https://i.stack.imgur.com/YcPuq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YcPuq.png\" alt=\"enter image description here\" /></a></p>\n<p>However metrics is not working:\n<a href=\"https://i.stack.imgur.com/kfjrS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kfjrS.png\" alt=\"enter image description here\" /></a></p>\n<p>I am also unable to see any metrics data in prometheus:\n<a href=\"https://i.stack.imgur.com/lPvOZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lPvOZ.png\" alt=\"enter image description here\" /></a></p>\n<p>What config am I missing for this to work? Also please specify how to optimize this for production.</p>\n"},{"tags":["java","maven","google-app-engine"],"comments":[{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1682942152,"post_id":76146632,"comment_id":134287154,"body_markdown":"Likely a duplicate: https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception and https://stackoverflow.com/questions/52502189/java-11-package-javax-xml-bind-does-not-exist?noredirect=1&amp;lq=1","body":"Likely a duplicate: <a href=\"https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception\" title=\"how to resolve java lang noclassdeffounderror javax xml bind jaxbexception\">stackoverflow.com/questions/43574426/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/52502189/java-11-package-javax-xml-bind-does-not-exist?noredirect=1&amp;lq=1\" title=\"java 11 package javax xml bind does not exist\">stackoverflow.com/questions/52502189/&hellip;</a>"},{"owner":{"account_id":6467423,"reputation":121,"user_id":5008813,"accept_rate":86,"display_name":"Tim Cobra"},"score":0,"creation_date":1682951046,"post_id":76146632,"comment_id":134288914,"body_markdown":"Thanks! I have added those dependencies and still no joy. I&#39;ve updated the main post to show the updated POM and the new errors","body":"Thanks! I have added those dependencies and still no joy. I&#39;ve updated the main post to show the updated POM and the new errors"},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":2,"creation_date":1682954347,"post_id":76146632,"comment_id":134289593,"body_markdown":"You have fundamentally changed the question. Initially, it was about missing JAXB classes. All traces of that have been removed. It&#39;s a new error message now. This is not how StackOverflow works. Go to a forum / discussion / chat room if you want to work that way. BTW: The solution for the current error message can easily be found with Google search.","body":"You have fundamentally changed the question. Initially, it was about missing JAXB classes. All traces of that have been removed. It&#39;s a new error message now. This is not how StackOverflow works. Go to a forum / discussion / chat room if you want to work that way. BTW: The solution for the current error message can easily be found with Google search."},{"owner":{"account_id":6467423,"reputation":121,"user_id":5008813,"accept_rate":86,"display_name":"Tim Cobra"},"score":0,"creation_date":1682957480,"post_id":76146632,"comment_id":134290274,"body_markdown":"The question still remains the same &quot;migrating Google appengine from Java 8 to 11&quot; and trying to get the local server to work using mvn appengine:run","body":"The question still remains the same &quot;migrating Google appengine from Java 8 to 11&quot; and trying to get the local server to work using mvn appengine:run"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1683039929,"post_id":76146632,"comment_id":134303746,"body_markdown":"@TimCobra you should consider spending some time learning how to use stack overflow properly.   You get better help far way.","body":"@TimCobra you should consider spending some time learning how to use stack overflow properly.   You get better help far way."}],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683021936,"creation_date":1683021936,"answer_id":76153792,"question_id":76146632,"body_markdown":"The version of objectweb Glassfish uses to manipulate class files is too old to parse the classfiles of the version of Java you want to use.\r\n\r\nIn other words, your current version of your platform does not support Java 11.\r\n","title":"Problem migrating appengine from Java 8 to 11","body":"<p>The version of objectweb Glassfish uses to manipulate class files is too old to parse the classfiles of the version of Java you want to use.</p>\n<p>In other words, your current version of your platform does not support Java 11.</p>\n"}],"owner":{"account_id":6467423,"reputation":121,"user_id":5008813,"accept_rate":86,"display_name":"Tim Cobra"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":433,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1683021936,"creation_date":1682941252,"question_id":76146632,"body_markdown":"I have a legacy Google Cloud appengine using Java 8 which I need to migrate to Java 11. As per [this guide][1] I plan to &quot;Migrate to Java 11/17 with bundled services&quot;, so I have not migrated my appengine-web.xml to app.yaml. Instead I have simply done the following:\r\n1. Downloaded Java 11 and updated the JAVA_HOME path\r\n2. Updated the appengine-web.xml to `&lt;runtime&gt;java11&lt;/runtime&gt;`\r\n3. Updated the pom.xml for maven-complier-plugin: `&lt;source&gt;11&lt;/source&gt; &lt;target&gt;11&lt;/target&gt;`\r\n\r\nI haven&#39;t tried to deploy yet using `mvn appengin:deploy` , but I get the following error when trying to run the local server: `mvn appengine:run` \r\n\r\nLocalhost:8080 then obviously fails with a 503 Service Unavailable.\r\n\r\nAny idea why this is failing to start the dev server in Java 11.\r\n\r\nI have added the suggested dependencies to my POM files, but this then give further Java errors:\r\n\r\n    [exec] [INFO] GCLOUD: SEVERE: javax.servlet.ServletContext log: unavailable\r\n         [exec] [INFO] GCLOUD: java.lang.IllegalArgumentException\r\n         [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:170)\r\n         [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:153)\r\n         [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:424)\r\n         [exec] [INFO] GCLOUD: at org.glassfish.jersey.server.internal.scanning.AnnotationAcceptingListener.process(AnnotationAcceptingListener.java:170)\r\n\r\nand then:\r\n\r\n     [exec] [INFO] GCLOUD: 2023-05-01 15:09:16.040:WARN:oejw.WebAppContext:main: Failed startup of context c.g.a.t.d.j.DevAppEngineWebAppContext@108531c2{/,file:///C:/Users/revda/OneDrive/Documents/Timtest/CardServer/server/target/cardgamesserver-1.0/,UNAVAILABLE}{C:\\Users\\revda\\OneDrive\\Documents\\Timtest\\CardServer\\server\\target\\cardgamesserver-1.0}\r\n     [exec] [INFO] GCLOUD: javax.servlet.ServletException: Card Game Server==org.glassfish.jersey.servlet.ServletContainer@f3e13e41{jsp=null,order=1,inst=true,async=false,src=DESCRIPTOR:file:///C:/Users/revda/OneDrive/Documents/Timtest/CardServer/server/target/cardgamesserver-1.0/WEB-INF/web.xml,STARTED}\r\n     [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:650)\r\n     [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:415)\r\n     [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHandler.lambda$initialize$0(ServletHandler.java:731)\r\n     [exec] [INFO] GCLOUD: at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\r\n\r\nThanks!\r\nTim\r\n\r\npom.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n    \r\n        &lt;groupId&gt;com.myhouse.cards&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cardserver&lt;/artifactId&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;appengine.app.version&gt;1&lt;/appengine.app.version&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;prerequisites&gt;\r\n            &lt;maven&gt;3.6.1&lt;/maven&gt;\r\n        &lt;/prerequisites&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n           &lt;!-- API, java.xml.bind module --&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n              &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n              &lt;version&gt;2.3.2&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;!-- Runtime, com.sun.xml.bind module --&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n              &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n              &lt;version&gt;2.3.2&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n            &lt;!-- Compile/runtime dependencies --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n                &lt;artifactId&gt;appengine-api-1.0-sdk&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9.90&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.17&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\r\n                &lt;version&gt;2.17&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;com.googlecode.objectify&lt;/groupId&gt;\r\n                &lt;artifactId&gt;objectify&lt;/artifactId&gt;\r\n                &lt;version&gt;5.1.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;!-- for hot reload of the web application--&gt;\r\n            &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/classes&lt;/outputDirectory&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\r\n                                &lt;goal&gt;display-plugin-updates&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;version&gt;3.2&lt;/version&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;11&lt;/source&gt;\r\n                        &lt;target&gt;11&lt;/target&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \t  \t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;projectId&gt;cardserver&lt;/projectId&gt;\r\n    \t\t\t\t\t&lt;version&gt;1&lt;/version&gt;\r\n    \t\t\t\t\t&lt;cloudSdkVersion&gt;350.0.0&lt;/cloudSdkVersion&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n  [1]: https://cloud.google.com/appengine/docs/standard/java-gen2/java-differences\r\n\r\n\r\n","title":"Problem migrating appengine from Java 8 to 11","body":"<p>I have a legacy Google Cloud appengine using Java 8 which I need to migrate to Java 11. As per <a href=\"https://cloud.google.com/appengine/docs/standard/java-gen2/java-differences\" rel=\"nofollow noreferrer\">this guide</a> I plan to &quot;Migrate to Java 11/17 with bundled services&quot;, so I have not migrated my appengine-web.xml to app.yaml. Instead I have simply done the following:</p>\n<ol>\n<li>Downloaded Java 11 and updated the JAVA_HOME path</li>\n<li>Updated the appengine-web.xml to <code>&lt;runtime&gt;java11&lt;/runtime&gt;</code></li>\n<li>Updated the pom.xml for maven-complier-plugin: <code>&lt;source&gt;11&lt;/source&gt; &lt;target&gt;11&lt;/target&gt;</code></li>\n</ol>\n<p>I haven't tried to deploy yet using <code>mvn appengin:deploy</code> , but I get the following error when trying to run the local server: <code>mvn appengine:run</code></p>\n<p>Localhost:8080 then obviously fails with a 503 Service Unavailable.</p>\n<p>Any idea why this is failing to start the dev server in Java 11.</p>\n<p>I have added the suggested dependencies to my POM files, but this then give further Java errors:</p>\n<pre><code>[exec] [INFO] GCLOUD: SEVERE: javax.servlet.ServletContext log: unavailable\n     [exec] [INFO] GCLOUD: java.lang.IllegalArgumentException\n     [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:170)\n     [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:153)\n     [exec] [INFO] GCLOUD: at jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:424)\n     [exec] [INFO] GCLOUD: at org.glassfish.jersey.server.internal.scanning.AnnotationAcceptingListener.process(AnnotationAcceptingListener.java:170)\n</code></pre>\n<p>and then:</p>\n<pre><code> [exec] [INFO] GCLOUD: 2023-05-01 15:09:16.040:WARN:oejw.WebAppContext:main: Failed startup of context c.g.a.t.d.j.DevAppEngineWebAppContext@108531c2{/,file:///C:/Users/revda/OneDrive/Documents/Timtest/CardServer/server/target/cardgamesserver-1.0/,UNAVAILABLE}{C:\\Users\\revda\\OneDrive\\Documents\\Timtest\\CardServer\\server\\target\\cardgamesserver-1.0}\n [exec] [INFO] GCLOUD: javax.servlet.ServletException: Card Game Server==org.glassfish.jersey.servlet.ServletContainer@f3e13e41{jsp=null,order=1,inst=true,async=false,src=DESCRIPTOR:file:///C:/Users/revda/OneDrive/Documents/Timtest/CardServer/server/target/cardgamesserver-1.0/WEB-INF/web.xml,STARTED}\n [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:650)\n [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:415)\n [exec] [INFO] GCLOUD: at org.eclipse.jetty.servlet.ServletHandler.lambda$initialize$0(ServletHandler.java:731)\n [exec] [INFO] GCLOUD: at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\n</code></pre>\n<p>Thanks!\nTim</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n\n    &lt;groupId&gt;com.myhouse.cards&lt;/groupId&gt;\n    &lt;artifactId&gt;cardserver&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;appengine.app.version&gt;1&lt;/appengine.app.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;prerequisites&gt;\n        &lt;maven&gt;3.6.1&lt;/maven&gt;\n    &lt;/prerequisites&gt;\n\n    &lt;dependencies&gt;\n       &lt;!-- API, java.xml.bind module --&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n          &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n          &lt;version&gt;2.3.2&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;!-- Runtime, com.sun.xml.bind module --&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n          &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n          &lt;version&gt;2.3.2&lt;/version&gt;\n      &lt;/dependency&gt;\n        &lt;!-- Compile/runtime dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-1.0-sdk&lt;/artifactId&gt;\n            &lt;version&gt;1.9.90&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n            &lt;version&gt;2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\n            &lt;version&gt;2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.objectify&lt;/groupId&gt;\n            &lt;artifactId&gt;objectify&lt;/artifactId&gt;\n            &lt;version&gt;5.1.5&lt;/version&gt;\n        &lt;/dependency&gt;   \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;!-- for hot reload of the web application--&gt;\n        &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/classes&lt;/outputDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\n                            &lt;goal&gt;display-plugin-updates&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;version&gt;3.2&lt;/version&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\n                &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;projectId&gt;cardserver&lt;/projectId&gt;\n                    &lt;version&gt;1&lt;/version&gt;\n                    &lt;cloudSdkVersion&gt;350.0.0&lt;/cloudSdkVersion&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jooq","renovate"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680079238,"creation_date":1680079238,"answer_id":75874927,"question_id":75870524,"body_markdown":"If you turn on the [`&lt;generatedAnnotation&gt;` flag][1] to produce a `@Generated` annotation, you can quickly compare its jOOQ version value with the `Constants.VERSION` value of the jOOQ library:\r\n\r\n### `@Generated` annotation example:\r\n\r\n```java\r\n@Generated(\r\n    value = {\r\n        &quot;https://www.jooq.org&quot;,\r\n        &quot;jOOQ version:3.19.0-SNAPSHOT&quot;\r\n    },\r\n    comments = &quot;This class is generated by jOOQ&quot;\r\n)\r\n```\r\n\r\n### `Constants` content:\r\n\r\n```java$\r\npublic final class Constants {\r\n    // ...\r\n\r\n    public static final String VERSION        = &quot;3.19.0-SNAPSHOT&quot;;\r\n}\r\n```\r\n\r\nI&#39;m not sure if there&#39;s any automated way of doing this already, but it should be simple to quickly script this in Gradle. If you&#39;re using this [third party plugin][2], you might be able to leverage its Gradle task dependency integration to automate this further, without introspecting actual generated code.\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-generate/codegen-generate-annotations/\r\n  [2]: https://github.com/etiennestuder/gradle-jooq-plugin","title":"How to configure Renovate to run generateJooq gradle task when jOOQ version is updated?","body":"<p>If you turn on the <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-generate/codegen-generate-annotations/\" rel=\"nofollow noreferrer\"><code>&lt;generatedAnnotation&gt;</code> flag</a> to produce a <code>@Generated</code> annotation, you can quickly compare its jOOQ version value with the <code>Constants.VERSION</code> value of the jOOQ library:</p>\n<h3><code>@Generated</code> annotation example:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(\n    value = {\n        &quot;https://www.jooq.org&quot;,\n        &quot;jOOQ version:3.19.0-SNAPSHOT&quot;\n    },\n    comments = &quot;This class is generated by jOOQ&quot;\n)\n</code></pre>\n<h3><code>Constants</code> content:</h3>\n<pre><code>public final class Constants {\n    // ...\n\n    public static final String VERSION        = &quot;3.19.0-SNAPSHOT&quot;;\n}\n</code></pre>\n<p>I'm not sure if there's any automated way of doing this already, but it should be simple to quickly script this in Gradle. If you're using this <a href=\"https://github.com/etiennestuder/gradle-jooq-plugin\" rel=\"nofollow noreferrer\">third party plugin</a>, you might be able to leverage its Gradle task dependency integration to automate this further, without introspecting actual generated code.</p>\n"}],"owner":{"account_id":23122472,"reputation":1,"user_id":17228807,"display_name":"Szymon Gołębiowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683021648,"creation_date":1680033111,"question_id":75870524,"body_markdown":"I would like to run the `generateJooq` gradle task automatically whenever Renovate updates the **jOOQ** version.\r\n\r\nI use **jOOQ** in my Java project. When Renovate updates it, the library&#39;s version is changed, but all auto-generated jOOQ classes are not refreshed. Renovate creates a commit that changes the library but doesn&#39;t change the code. As a result, the code is generated when I run first `generateJooq` or `build` after jOOQ&#39;s update. It&#39;s inconvenient because database changes are added to some next commit which has nothing to do with the database. It would be more concise if auto-generated classes are updated in Renovate&#39;s commit.\r\n\r\nThe problem would be solved e.g. if the gradle task `generateJooq` is run whenever Renovate updates **jOOQ**. I haven&#39;t found such an option in Renovate&#39;s documentation.","title":"How to configure Renovate to run generateJooq gradle task when jOOQ version is updated?","body":"<p>I would like to run the <code>generateJooq</code> gradle task automatically whenever Renovate updates the <strong>jOOQ</strong> version.</p>\n<p>I use <strong>jOOQ</strong> in my Java project. When Renovate updates it, the library's version is changed, but all auto-generated jOOQ classes are not refreshed. Renovate creates a commit that changes the library but doesn't change the code. As a result, the code is generated when I run first <code>generateJooq</code> or <code>build</code> after jOOQ's update. It's inconvenient because database changes are added to some next commit which has nothing to do with the database. It would be more concise if auto-generated classes are updated in Renovate's commit.</p>\n<p>The problem would be solved e.g. if the gradle task <code>generateJooq</code> is run whenever Renovate updates <strong>jOOQ</strong>. I haven't found such an option in Renovate's documentation.</p>\n"},{"tags":["java","android","xml","string","escaping"],"answers":[{"tags":[],"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1386938587,"creation_date":1386938587,"answer_id":20566850,"question_id":20566815,"body_markdown":"You have to escape those symbols for XML.\r\n\r\nhttps://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters\r\n\r\n","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>You have to escape those symbols for XML.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters\">What characters do I need to escape in XML documents?</a></p>\n"},{"comments":[{"owner":{"account_id":13903,"reputation":393623,"user_id":28169,"accept_rate":88,"display_name":"unwind"},"score":0,"creation_date":1386938638,"post_id":20566852,"comment_id":30761379,"body_markdown":"Doesn&#39;t this entierly miss the point of the &quot;less than or equal&quot; sign being used, ≤ ?","body":"Doesn&#39;t this entierly miss the point of the &quot;less than or equal&quot; sign being used, ≤ ?"},{"owner":{"account_id":13903,"reputation":393623,"user_id":28169,"accept_rate":88,"display_name":"unwind"},"score":0,"creation_date":1386938683,"post_id":20566852,"comment_id":30761408,"body_markdown":"@peter.petrov Ah, I guess the OP&#39;s errors are only from the use of regular &lt;.","body":"@peter.petrov Ah, I guess the OP&#39;s errors are only from the use of regular &lt;."},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":1,"creation_date":1386938756,"post_id":20566852,"comment_id":30761450,"body_markdown":"I think I answered first on this question btw :) @kocko Isn&#39;t this &amp;le; actually &amp;lt; ?!","body":"I think I answered first on this question btw :) @kocko Isn&#39;t this &amp;le; actually &amp;lt; ?!"},{"owner":{"account_id":2661790,"reputation":757,"user_id":2301281,"accept_rate":71,"display_name":"user2301281"},"score":0,"creation_date":1386939508,"post_id":20566852,"comment_id":30761892,"body_markdown":"it shown &quot;unescaped &amp; or nonterminated character/entity reference&quot; error. when i use &quot;&amp;lt&quot;","body":"it shown &quot;unescaped &amp; or nonterminated character/entity reference&quot; error. when i use &quot;&amp;lt&quot;"},{"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"score":2,"creation_date":1386939536,"post_id":20566852,"comment_id":30761916,"body_markdown":"you will have to add a colon ( `;` ) after it.","body":"you will have to add a colon ( <code>;</code> ) after it."}],"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"comment_count":5,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1683021247,"creation_date":1386938589,"answer_id":20566852,"question_id":20566815,"body_markdown":"You will have to escape those symbols as following:\r\n\r\n - `&lt;` will be `&amp;lt;`\r\n - `&gt;` will be `&amp;gt;`\r\n\r\nThe `≤` character doesn&#39;t need escaping.\r\n ","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>You will have to escape those symbols as following:</p>\n<ul>\n<li><code>&lt;</code> will be <code>&amp;lt;</code></li>\n<li><code>&gt;</code> will be <code>&amp;gt;</code></li>\n</ul>\n<p>The <code>≤</code> character doesn't need escaping.</p>\n"},{"tags":[],"owner":{"account_id":2069643,"reputation":18925,"user_id":1844392,"accept_rate":65,"display_name":"Piyush"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1386938650,"creation_date":1386938650,"answer_id":20566877,"question_id":20566815,"body_markdown":"Use this:\r\n\r\n    &lt;   &amp;lt;\r\n    &gt;   &amp;gt;","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>Use this:</p>\n\n<pre><code>&lt;   &amp;lt;\n&gt;   &amp;gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1386947295,"post_id":20566898,"comment_id":30766747,"body_markdown":"why it has +1? \\uxxxx is not for xml","body":"why it has +1? \\uxxxx is not for xml"}],"tags":[],"owner":{"account_id":1104972,"reputation":9652,"user_id":1096567,"accept_rate":100,"display_name":"Lovis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386948724,"creation_date":1386938736,"answer_id":20566898,"question_id":20566815,"body_markdown":"Use Unicode sequences for special characters.\r\n \r\nYou can find some of them here: http://jrgraphix.net/r/Unicode/2200-22FF\r\n\r\nUse it like this:\r\n\r\n    \\u2264\r\n\r\nwill be converted to `≤`","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>Use Unicode sequences for special characters.</p>\n\n<p>You can find some of them here: <a href=\"http://jrgraphix.net/r/Unicode/2200-22FF\" rel=\"nofollow\">http://jrgraphix.net/r/Unicode/2200-22FF</a></p>\n\n<p>Use it like this:</p>\n\n<pre><code>\\u2264\n</code></pre>\n\n<p>will be converted to <code>≤</code></p>\n"},{"tags":[],"owner":{"account_id":1677144,"reputation":5507,"user_id":1542395,"accept_rate":91,"display_name":"Xander"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1398974610,"creation_date":1386938783,"answer_id":20566914,"question_id":20566815,"body_markdown":"As said, for the `&lt;` and `&gt;`, you can use this:\r\n\r\n    &lt;   &amp;lt;\r\n    &gt;   &amp;gt;\r\n\r\nYou need to do this because the `&lt;` and `&gt;` aren&#39;t allowed in XML, so you need to `escape` them. You do that by typing: `&amp;` + `specific code for your character` + `;`, when you show this string, this will be recognized as being the special character (`&lt;` or `&gt;`).\r\n\r\nYou also wanted the `smaller or equal` sign (≤), which is afaik allowed in XML, so just use `≤`.\r\n\r\nThese are the characters you have to escape:\r\n\r\n    &quot;   =   &amp;quot;\r\n    &#39;   =   &amp;apos;\r\n    &lt;   =   &amp;lt;\r\n    &gt;   =   &amp;gt;\r\n    &amp;   =   &amp;amp;","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>As said, for the <code>&lt;</code> and <code>&gt;</code>, you can use this:</p>\n\n<pre><code>&lt;   &amp;lt;\n&gt;   &amp;gt;\n</code></pre>\n\n<p>You need to do this because the <code>&lt;</code> and <code>&gt;</code> aren't allowed in XML, so you need to <code>escape</code> them. You do that by typing: <code>&amp;</code> + <code>specific code for your character</code> + <code>;</code>, when you show this string, this will be recognized as being the special character (<code>&lt;</code> or <code>&gt;</code>).</p>\n\n<p>You also wanted the <code>smaller or equal</code> sign (≤), which is afaik allowed in XML, so just use <code>≤</code>.</p>\n\n<p>These are the characters you have to escape:</p>\n\n<pre><code>\"   =   &amp;quot;\n'   =   &amp;apos;\n&lt;   =   &amp;lt;\n&gt;   =   &amp;gt;\n&amp;   =   &amp;amp;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3249271,"reputation":977,"user_id":2740014,"accept_rate":89,"display_name":"int lawl is over 9000"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386938901,"creation_date":1386938901,"answer_id":20566948,"question_id":20566815,"body_markdown":"use\r\n\r\n[https://stackoverflow.com/a/4301267/2740014][1]\r\n\r\nto escape the strings and then put them into your xml.\r\n\r\n    StringEscapeUtils.escapeXml(stringHere);\r\n\r\nIs the needed thing i think.\r\n\r\n[1]: https://stackoverflow.com/a/4301267/2740014","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>use</p>\n\n<p><a href=\"https://stackoverflow.com/a/4301267/2740014\">https://stackoverflow.com/a/4301267/2740014</a></p>\n\n<p>to escape the strings and then put them into your xml.</p>\n\n<pre><code>StringEscapeUtils.escapeXml(stringHere);\n</code></pre>\n\n<p>Is the needed thing i think.</p>\n"},{"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":1,"creation_date":1386947323,"post_id":20567137,"comment_id":30766757,"body_markdown":"why it has +1? \\uxxxx is not for xml","body":"why it has +1? \\uxxxx is not for xml"},{"owner":{"account_id":1104972,"reputation":9652,"user_id":1096567,"accept_rate":100,"display_name":"Lovis"},"score":0,"creation_date":1386947542,"post_id":20567137,"comment_id":30766901,"body_markdown":"@Selvin this is tagged android, and in strings.xml it 100% works PLUS its the only way to do it with some special chars, like &quot;non breaking-hyphen&quot; \\uXXXX is even SUGGESTED BY LINT (e.g if you type &quot;...&quot;)","body":"@Selvin this is tagged android, and in strings.xml it 100% works PLUS its the only way to do it with some special chars, like &quot;non breaking-hyphen&quot; \\uXXXX is even SUGGESTED BY LINT (e.g if you type &quot;...&quot;)"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":1,"creation_date":1386947750,"post_id":20567137,"comment_id":30767059,"body_markdown":"sure the only way .... `&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;root&gt;&lt;test name=&quot;&amp;#8209;&quot;/&gt;&lt;/root&gt;` xml notation is &amp;#XXXX; or &amp;#xHHHH;","body":"sure the only way .... <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;root&gt;&lt;test name=&quot;&amp;#8209;&quot;&#47;&gt;&lt;&#47;root&gt;</code> xml notation is &amp;#XXXX; or &amp;#xHHHH;"},{"owner":{"account_id":1104972,"reputation":9652,"user_id":1096567,"accept_rate":100,"display_name":"Lovis"},"score":0,"creation_date":1386947929,"post_id":20567137,"comment_id":30767175,"body_markdown":"@selvin yes you&#39;re right (plus I just saw, that lint is not suggesting it anymore) BUT still, why is it thing working, if its not for xml?","body":"@selvin yes you&#39;re right (plus I just saw, that lint is not suggesting it anymore) BUT still, why is it thing working, if its not for xml?"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1386947986,"post_id":20567137,"comment_id":30767216,"body_markdown":"from The Source http://www.w3.org/TR/REC-xml/#dt-charref ... there is no single word about \\u notation","body":"from The Source <a href=\"http://www.w3.org/TR/REC-xml/#dt-charref\" rel=\"nofollow noreferrer\">w3.org/TR/REC-xml/#dt-charref</a> ... there is no single word about \\u notation"},{"owner":{"account_id":1104972,"reputation":9652,"user_id":1096567,"accept_rate":100,"display_name":"Lovis"},"score":0,"creation_date":1386948257,"post_id":20567137,"comment_id":30767380,"body_markdown":"I still don&#39;t see why it&#39;s _wrong_. It answers the question and works in android. (why? Probably because the string is first parsed and _then_ translated)","body":"I still don&#39;t see why it&#39;s <i>wrong</i>. It answers the question and works in android. (why? Probably because the string is first parsed and <i>then</i> translated)"}],"tags":[],"owner":{"account_id":3106249,"reputation":6417,"user_id":2628956,"accept_rate":100,"display_name":"Rakesh KR"},"comment_count":6,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1386948711,"creation_date":1386939502,"answer_id":20567137,"question_id":20566815,"body_markdown":"Use Unicode \r\n\r\nFor    `&lt;`  use  `\\u003c`&lt;br&gt;\r\nFor    `&gt;` `\\u003e` and &lt;br&gt;\r\nFor    `≤` `\\u2264`\r\n \r\nFor getting unicode of any String use the following method\r\n\r\n    public static String getUnicode(String input){\r\n\t\tString output = &quot;&quot;;\r\n\t\tfor(char c:input.toCharArray()){\r\n\t\t\toutput +=&quot;\\\\u&quot; + Integer.toHexString(c|0x10000).substring(1) ;\r\n\t\t}\r\n\t\treturn output;\r\n\t}","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>Use Unicode </p>\n\n<p>For    <code>&lt;</code>  use  <code>\\u003c</code><br>\nFor    <code>&gt;</code> <code>\\u003e</code> and <br>\nFor    <code>≤</code> <code>\\u2264</code></p>\n\n<p>For getting unicode of any String use the following method</p>\n\n<pre><code>public static String getUnicode(String input){\n    String output = \"\";\n    for(char c:input.toCharArray()){\n        output +=\"\\\\u\" + Integer.toHexString(c|0x10000).substring(1) ;\n    }\n    return output;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1387316065,"creation_date":1387316065,"answer_id":20645139,"question_id":20566815,"body_markdown":"Just my 2 cents: guava 15 introduced Escapers, especially for this situations:\r\n\r\n     Escaper escaper = XmlEscapers.xmlAttributeEscaper();\r\n     String result = escaper.escape(&quot;&lt;&gt;&quot;);\r\n     System.out.println(result); // &amp;lt;&amp;gt;","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>Just my 2 cents: guava 15 introduced Escapers, especially for this situations:</p>\n\n<pre><code> Escaper escaper = XmlEscapers.xmlAttributeEscaper();\n String result = escaper.escape(\"&lt;&gt;\");\n System.out.println(result); // &amp;lt;&amp;gt;\n</code></pre>\n"}],"owner":{"account_id":2661790,"reputation":757,"user_id":2301281,"accept_rate":71,"display_name":"user2301281"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17349,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":20566852,"answer_count":8,"score":11,"last_activity_date":1683021247,"creation_date":1386938493,"question_id":20566815,"body_markdown":"I want to create a string `&lt;res&gt;` in android as below:\r\n\r\n    &lt;string name=&quot;bmi0&quot;&gt;0: BMI≤18.5&lt;/string&gt;\r\n    &lt;string name=&quot;bmi1&quot;&gt;1: 18.5&lt;BMI≤24&lt;/string&gt;\r\n    &lt;string name=&quot;bmi2&quot;&gt;2: 24&lt;BMI≤27&lt;/string&gt;\r\n\r\nBut i shown the error of &quot;Tag start is not closed&quot;. \r\n\r\nI tried to put a `\\` symbol in front, but it doesn&#39;t work, it has shown the same error.\r\n\r\n    &lt;string name=&quot;bmi0&quot;&gt;0: BMI\\≤18.5&lt;/string&gt;\r\n    &lt;string name=&quot;bmi1&quot;&gt;1: 18.5&lt;BMI\\≤24&lt;/string&gt;\r\n    &lt;string name=&quot;bmi2&quot;&gt;2: 24&lt;BMI\\≤27&lt;/string&gt;\r\n\r\nHow to escape the special XML symbols ?\r\n\r\n","title":"How to escape the &lt; and ≤ symbols in xml?","body":"<p>I want to create a string <code>&lt;res&gt;</code> in android as below:</p>\n\n<pre><code>&lt;string name=\"bmi0\"&gt;0: BMI≤18.5&lt;/string&gt;\n&lt;string name=\"bmi1\"&gt;1: 18.5&lt;BMI≤24&lt;/string&gt;\n&lt;string name=\"bmi2\"&gt;2: 24&lt;BMI≤27&lt;/string&gt;\n</code></pre>\n\n<p>But i shown the error of \"Tag start is not closed\". </p>\n\n<p>I tried to put a <code>\\</code> symbol in front, but it doesn't work, it has shown the same error.</p>\n\n<pre><code>&lt;string name=\"bmi0\"&gt;0: BMI\\≤18.5&lt;/string&gt;\n&lt;string name=\"bmi1\"&gt;1: 18.5&lt;BMI\\≤24&lt;/string&gt;\n&lt;string name=\"bmi2\"&gt;2: 24&lt;BMI\\≤27&lt;/string&gt;\n</code></pre>\n\n<p>How to escape the special XML symbols ?</p>\n"},{"tags":["java","regex","arabic"],"comments":[{"owner":{"display_name":"user7856770"},"score":0,"creation_date":1493766064,"post_id":43748400,"comment_id":74540171,"body_markdown":"This is what worked with me with string variable `.replaceAll(&quot;(.)\\\\1{1,}&quot;, &quot;$1&quot;)` but I do not know how to apply it to the filter?","body":"This is what worked with me with string variable <code>.replaceAll(&quot;(.)\\\\1{1,}&quot;, &quot;$1&quot;)</code> but I do not know how to apply it to the filter?"}],"answers":[{"comments":[{"owner":{"display_name":"user7856770"},"score":0,"creation_date":1493768018,"post_id":43748584,"comment_id":74540622,"body_markdown":"but how can I use this with the filter :(","body":"but how can I use this with the filter :("},{"owner":{"account_id":6752660,"reputation":591,"user_id":5202215,"accept_rate":61,"display_name":"Yonah Karp"},"score":0,"creation_date":1493774736,"post_id":43748584,"comment_id":74541953,"body_markdown":"@Nour_em added to the answer :) hope this helps!","body":"@Nour_em added to the answer :) hope this helps!"},{"owner":{"display_name":"user7856770"},"score":0,"creation_date":1493809863,"post_id":43748584,"comment_id":74557841,"body_markdown":"thanks a lot for your help,  but it did not work with me :|. I wonder if I did something wrong I don&#39;t know! I only added `[]` to the regex to be like this `[/(.)(?&lt;=\\1{2,})/ig]` as what I did for the rest of regexes but it did nothing the repeated letters still unremoved!","body":"thanks a lot for your help,  but it did not work with me :|. I wonder if I did something wrong I don&#39;t know! I only added <code>[]</code> to the regex to be like this <code>[&#47;(.)(?&lt;=\\1{2,})&#47;ig]</code> as what I did for the rest of regexes but it did nothing the repeated letters still unremoved!"},{"owner":{"account_id":6752660,"reputation":591,"user_id":5202215,"accept_rate":61,"display_name":"Yonah Karp"},"score":0,"creation_date":1493832013,"post_id":43748584,"comment_id":74573990,"body_markdown":"@Nour_em, why not use the loop then?","body":"@Nour_em, why not use the loop then?"}],"tags":[],"owner":{"account_id":6752660,"reputation":591,"user_id":5202215,"accept_rate":61,"display_name":"Yonah Karp"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683020819,"creation_date":1493766349,"answer_id":43748584,"question_id":43748400,"body_markdown":"I would more readily use a loop\r\n\r\n    String str = &quot;hello&quot;\r\n\r\n    char prevChar = &#39; &#39;;\r\n    String result = &quot;&quot;;\r\n    for(char ch : str.toCharArray()){\r\n        if(ch != prevChar)\r\n             result += &quot;&quot;+ch //concat casts to string for us\r\n        prevChar = ch\r\n    }\r\n\r\nwould return `helo` (with the repeated `l` removed)\r\n\r\n**EDIT:**\r\n\r\nIf you would like to use a filter, the correct regex should be \r\n\r\n`/(.)(?&lt;=\\1{2,})/ig`\r\n\r\n- The first group, `(.)` captures any character\r\n- The next group `(?&lt;=\\1{2,})` is broken down as follows:\r\n - `\\1` captures the character specified in the first group (`(.)`)\r\n - `{2,}` captures any group that repeats twice\r\n - the `?&lt;=` is a look behind, which basically says we want to check the next term (`\\1`) exists, but we don&#39;t wish to capture it.\r\n\r\nSo we&#39;re left with only `{2,}` which is captured, which is what you want\r\n\r\n\r\nFor more help, try these Stack Overflow links\r\n\r\n- https://stackoverflow.com/questions/1660694/regular-expression-to-match-any-character-being-repeated-more-than-10-times\r\n\r\n- https://stackoverflow.com/questions/10768924/match-sequence-using-regex-after-a-specified-character\r\n\r\nBest of luck!\r\n\r\n  [1]: http://refiddle.com","title":"regex- Remove repeated letters in Arabic text by StringToWordVector filter","body":"<p>I would more readily use a loop</p>\n<pre><code>String str = &quot;hello&quot;\n\nchar prevChar = ' ';\nString result = &quot;&quot;;\nfor(char ch : str.toCharArray()){\n    if(ch != prevChar)\n         result += &quot;&quot;+ch //concat casts to string for us\n    prevChar = ch\n}\n</code></pre>\n<p>would return <code>helo</code> (with the repeated <code>l</code> removed)</p>\n<p><strong>EDIT:</strong></p>\n<p>If you would like to use a filter, the correct regex should be</p>\n<p><code>/(.)(?&lt;=\\1{2,})/ig</code></p>\n<ul>\n<li>The first group, <code>(.)</code> captures any character</li>\n<li>The next group <code>(?&lt;=\\1{2,})</code> is broken down as follows:</li>\n<li><code>\\1</code> captures the character specified in the first group (<code>(.)</code>)</li>\n<li><code>{2,}</code> captures any group that repeats twice</li>\n<li>the <code>?&lt;=</code> is a look behind, which basically says we want to check the next term (<code>\\1</code>) exists, but we don't wish to capture it.</li>\n</ul>\n<p>So we're left with only <code>{2,}</code> which is captured, which is what you want</p>\n<p>For more help, try these Stack Overflow links</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/1660694/regular-expression-to-match-any-character-being-repeated-more-than-10-times\">Regular expression to match any character being repeated more than 10 times</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/10768924/match-sequence-using-regex-after-a-specified-character\">Match Sequence using RegEx After a Specified Character</a></p>\n</li>\n</ul>\n<p>Best of luck!</p>\n"}],"owner":{"display_name":"user7856770"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683020819,"creation_date":1493765170,"question_id":43748400,"body_markdown":"I want to remove repeated Arabic letters in my text. How can I do this using regex in Java? I&#39;ve tried different regex but it removes all the Arabic letters from my text! help plz. \r\nBTW, I am using regex with StringToWordVector filter like what happening in [here][1]     \r\n\r\nThis how I applied it:\r\n`filter.setStopwordsHandler(new RegExStopwords(&quot;([^\\\\u1F600-\\\\u1F6FF\\\\s].*|[A-Za-z0-9].*|[٠-٩].*|[\\\\u0617-\\\\u061A\\\\u064B-\\\\u0652].*|[ؐ-ًؚٟ].*|[/(آ|إ|أ)/g, &#39;ا&#39;]|[/(ة)/g, &#39;ه&#39;]|[/(ئ|ؤ)/g, &#39;ء&#39;]|[/(ى)/g, &#39;ي&#39;]|[/([^\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0660-\\\\u0669])/g, &#39;&#39;]&quot;));` So I tried the answers mentioned with .replaceAll() function but it did not work with me, or actually I did not know how to fit them in my code correctly.\r\n\r\n\r\n  [1]: http://www.giombetti.com/2016/03/06/using-a-regular-expression-to-specify-stop-words-in-weka-machine-learning-from-java/","title":"regex- Remove repeated letters in Arabic text by StringToWordVector filter","body":"<p>I want to remove repeated Arabic letters in my text. How can I do this using regex in Java? I've tried different regex but it removes all the Arabic letters from my text! help plz. \nBTW, I am using regex with StringToWordVector filter like what happening in <a href=\"http://www.giombetti.com/2016/03/06/using-a-regular-expression-to-specify-stop-words-in-weka-machine-learning-from-java/\" rel=\"nofollow noreferrer\">here</a>     </p>\n\n<p>This how I applied it:\n<code>filter.setStopwordsHandler(new RegExStopwords(\"([^\\\\u1F600-\\\\u1F6FF\\\\s].*|[A-Za-z0-9].*|[٠-٩].*|[\\\\u0617-\\\\u061A\\\\u064B-\\\\u0652].*|[ؐ-ًؚٟ].*|[/(آ|إ|أ)/g, 'ا']|[/(ة)/g, 'ه']|[/(ئ|ؤ)/g, 'ء']|[/(ى)/g, 'ي']|[/([^\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0660-\\\\u0669])/g, '']\"));</code> So I tried the answers mentioned with .replaceAll() function but it did not work with me, or actually I did not know how to fit them in my code correctly.</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":2653232,"reputation":4799,"user_id":2294428,"display_name":"StephaneM"},"score":1,"creation_date":1528200443,"post_id":50699629,"comment_id":88408597,"body_markdown":"You should try to match the string between `[` and `]` instead of matching `.*`. I do not provide a regex for that as I do not know the format of this part, but a \\w may work.","body":"You should try to match the string between <code>[</code> and <code>]</code> instead of matching <code>.*</code>. I do not provide a regex for that as I do not know the format of this part, but a \\w may work."}],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1528200446,"creation_date":1528200446,"answer_id":50699724,"question_id":50699629,"body_markdown":"You are close try to change `.*?(?=})` with `\\\\[.*?\\\\]` like so :\r\n\r\n    String replacedMapStr = mapStr.replaceAll(&quot;(?&lt;=SNMP_COMMUNITY=)\\\\[.*?\\\\]&quot;, &quot;[****]&quot;);\r\n                                                                   ^^^^^^^^^    ^    ^\r\n\r\nOutput\r\n\r\n    {5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[****], SNMP_TRAP_IP=[1.1.1.1]}}","title":"regex to mask certain field","body":"<p>You are close try to change <code>.*?(?=})</code> with <code>\\\\[.*?\\\\]</code> like so :</p>\n\n<pre><code>String replacedMapStr = mapStr.replaceAll(\"(?&lt;=SNMP_COMMUNITY=)\\\\[.*?\\\\]\", \"[****]\");\n                                                               ^^^^^^^^^    ^    ^\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[****], SNMP_TRAP_IP=[1.1.1.1]}}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2986490,"reputation":1381,"user_id":3897333,"display_name":"Paul Stelian"},"score":0,"creation_date":1528201574,"post_id":50699903,"comment_id":88409407,"body_markdown":"I think at least some regex implementations won&#39;t actually need that backslash and can parse [^]] correctly. GNU Grep for one.","body":"I think at least some regex implementations won&#39;t actually need that backslash and can parse [^]] correctly. GNU Grep for one."}],"tags":[],"owner":{"account_id":1228505,"reputation":3079,"user_id":1529843,"display_name":"Cargo23"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683020560,"creation_date":1528201053,"answer_id":50699903,"question_id":50699629,"body_markdown":"I love all the different answers to regex questions, here is mine, with explanation:\r\n\r\n```\r\nreplacedMapStr = mapStr.replaceAll(&quot;SNMP_COMMUNITY=\\[[^\\]]*\\]&quot;, &quot;SNMP_COMMUNITY=[****]&quot;);\r\n```\r\n\r\nThe regex in in parts:\r\n\r\n* SNMP_COMMUNITY=\r\n * Literally these characters in a row\r\n* \\\\[\r\n * A left bracket\r\n* [^\\\\]]*\r\n * This is the magic to avoiding using `?`.  This is a negated character class that contains a right bracket.  The meaning here is &quot;Any number of characters that aren&#39;t right brackets.  So you can see that the scanner will simply move forward until it finds a right bracket.  The backslash is in there to show that we mean a right bracket character and not to end the character class.\r\n* \\]\r\n * The right bracket","title":"regex to mask certain field","body":"<p>I love all the different answers to regex questions, here is mine, with explanation:</p>\n<pre><code>replacedMapStr = mapStr.replaceAll(&quot;SNMP_COMMUNITY=\\[[^\\]]*\\]&quot;, &quot;SNMP_COMMUNITY=[****]&quot;);\n</code></pre>\n<p>The regex in in parts:</p>\n<ul>\n<li>SNMP_COMMUNITY=</li>\n<li>Literally these characters in a row</li>\n<li>\\[</li>\n<li>A left bracket</li>\n<li>[^\\]]*</li>\n<li>This is the magic to avoiding using <code>?</code>.  This is a negated character class that contains a right bracket.  The meaning here is &quot;Any number of characters that aren't right brackets.  So you can see that the scanner will simply move forward until it finds a right bracket.  The backslash is in there to show that we mean a right bracket character and not to end the character class.</li>\n<li>]</li>\n<li>The right bracket</li>\n</ul>\n"}],"owner":{"account_id":3653684,"reputation":596,"user_id":3045238,"display_name":"Hiccup"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":50699724,"answer_count":2,"score":1,"last_activity_date":1683020560,"creation_date":1528200156,"question_id":50699629,"body_markdown":"I have string like below :\r\n\r\n    {5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[public], SNMP_TRAP_IP=[1.1.1.1]}}\r\n\r\nI want a final string :\r\n\r\n    {5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[****], SNMP_TRAP_IP=[1.1.1.1]}}\r\n\r\nI am trying String :\r\n\r\n    replacedMapStr = mapStr.replaceAll(&quot;(?&lt;=SNMP_COMMUNITY=).*?(?=})&quot;, &quot;****&quot;);\r\n\r\nbut it is truncating all character after  `SNMP_COMMUNITY`\r\n\r\nI want to mask the value of `SNMP_COMMUNITY` field. `SNMP_COMMUNITY` can have any value.\r\n","title":"regex to mask certain field","body":"<p>I have string like below :</p>\n\n<pre><code>{5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[public], SNMP_TRAP_IP=[1.1.1.1]}}\n</code></pre>\n\n<p>I want a final string :</p>\n\n<pre><code>{5b4888ad-53cc-4fa8-9e0f-dbb339b238fd={NETFLOW_IP=[1.1.1.1, 2.2.2.2], SNMP_COMMUNITY=[****], SNMP_TRAP_IP=[1.1.1.1]}}\n</code></pre>\n\n<p>I am trying String :</p>\n\n<pre><code>replacedMapStr = mapStr.replaceAll(\"(?&lt;=SNMP_COMMUNITY=).*?(?=})\", \"****\");\n</code></pre>\n\n<p>but it is truncating all character after  <code>SNMP_COMMUNITY</code></p>\n\n<p>I want to mask the value of <code>SNMP_COMMUNITY</code> field. <code>SNMP_COMMUNITY</code> can have any value.</p>\n"},{"tags":["c#","java","xml","xpath"],"comments":[{"owner":{"account_id":22115,"reputation":15568,"user_id":54283,"accept_rate":100,"display_name":"Jon W"},"score":0,"creation_date":1251387369,"post_id":1341847,"comment_id":1176781,"body_markdown":"so is SomeValue a C# variable?","body":"so is SomeValue a C# variable?"},{"owner":{"account_id":47661,"reputation":3514,"user_id":141282,"accept_rate":73,"display_name":"Prabhu"},"score":0,"creation_date":1252498344,"post_id":1341847,"comment_id":1240305,"body_markdown":"Yes. It is a C# Variable.&quot;ListObject[@Title=&#39;&quot; + SomeValue +&quot;&#39;]&quot;. This is how I have written the expression","body":"Yes. It is a C# Variable.&quot;ListObject[@Title=&#39;&quot; + SomeValue +&quot;&#39;]&quot;. This is how I have written the expression"}],"answers":[{"comments":[{"owner":{"account_id":21534,"reputation":59456,"user_id":52443,"display_name":"Welbog"},"score":0,"creation_date":1251389214,"post_id":1341973,"comment_id":1176968,"body_markdown":"That&#39;s not how you escape characters in XML.","body":"That&#39;s not how you escape characters in XML."},{"owner":{"account_id":10305,"reputation":95008,"user_id":19403,"accept_rate":59,"display_name":"Robert Rossney"},"score":2,"creation_date":1251581047,"post_id":1341973,"comment_id":1188636,"body_markdown":"That&#39;s true.  But an XPath query isn&#39;t XML text, and at any rate he&#39;s not escaping the quotation marks for XPath anyway, he&#39;s escaping them for C#.  The actual, literal XPath is ListObject[@Title=&quot;SomeValue&quot;]","body":"That&#39;s true.  But an XPath query isn&#39;t XML text, and at any rate he&#39;s not escaping the quotation marks for XPath anyway, he&#39;s escaping them for C#.  The actual, literal XPath is ListObject[@Title=&quot;SomeValue&quot;]"},{"owner":{"account_id":1607854,"reputation":7760,"user_id":1487529,"accept_rate":95,"display_name":"Elmue"},"score":0,"creation_date":1391220592,"post_id":1341973,"comment_id":32444458,"body_markdown":"You did not understand the quesion. The XPath syntax does NOT allow the backslash character for escaping.","body":"You did not understand the quesion. The XPath syntax does NOT allow the backslash character for escaping."}],"tags":[],"owner":{"account_id":25659,"reputation":6073,"user_id":66109,"display_name":"48klocs"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1251388207,"creation_date":1251388207,"answer_id":1341973,"question_id":1341847,"body_markdown":"If you&#39;re not going to have any double-quotes in SomeValue, you can use escaped double-quotes to specify the value you&#39;re searching for in your XPath search string.\r\n\r\n    ListObject[@Title=\\&quot;SomeValue\\&quot;]\r\n\r\n","title":"Apostrophe (&#39;) in XPath query","body":"<p>If you're not going to have any double-quotes in SomeValue, you can use escaped double-quotes to specify the value you're searching for in your XPath search string.</p>\n\n<pre><code>ListObject[@Title=\\\"SomeValue\\\"]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":21534,"reputation":59456,"user_id":52443,"display_name":"Welbog"},"score":0,"creation_date":1251389176,"post_id":1342020,"comment_id":1176964,"body_markdown":"You shouldn&#39;t even have to treat XML as a plain string. Things like escaping and unescaping are abstracted away for you by the built-in XML libraries. You&#39;re reinventing the wheel here.","body":"You shouldn&#39;t even have to treat XML as a plain string. Things like escaping and unescaping are abstracted away for you by the built-in XML libraries. You&#39;re reinventing the wheel here."},{"owner":{"account_id":39926,"reputation":30711,"user_id":115413,"accept_rate":88,"display_name":"Christian Hayter"},"score":6,"creation_date":1251391405,"post_id":1342020,"comment_id":1177231,"body_markdown":"If you could point me to a BCL class that abstracts away the process of building an XPath query string, I would gladly ditch these functions.","body":"If you could point me to a BCL class that abstracts away the process of building an XPath query string, I would gladly ditch these functions."},{"owner":{"account_id":106420,"reputation":11945,"user_id":283505,"accept_rate":76,"display_name":"Flynn1179"},"score":0,"creation_date":1419696242,"post_id":1342020,"comment_id":43752609,"body_markdown":"Such as `System.Security.SecurityElement.Escape(value)`? (in C#)","body":"Such as <code>System.Security.SecurityElement.Escape(value)</code>? (in C#)"},{"owner":{"account_id":2201325,"reputation":100099,"user_id":1945651,"accept_rate":86,"display_name":"JLRishe"},"score":1,"creation_date":1419863923,"post_id":1342020,"comment_id":43794875,"body_markdown":"@ChristianHayter I&#39;m very late to the party here, but the point you&#39;ve missed (and that I think Welbog was trying to make) is that XPath has the concept of variables, which are immune to these string delimeter problems. So the best practice is to make use of them. .NET does provide a mechanism for using variables in XPath and I&#39;ve provided an example of how to do so [here](http://stackoverflow.com/a/19704008/1945651).","body":"@ChristianHayter I&#39;m very late to the party here, but the point you&#39;ve missed (and that I think Welbog was trying to make) is that XPath has the concept of variables, which are immune to these string delimeter problems. So the best practice is to make use of them. .NET does provide a mechanism for using variables in XPath and I&#39;ve provided an example of how to do so <a href=\"http://stackoverflow.com/a/19704008/1945651\">here</a>."},{"owner":{"account_id":39926,"reputation":30711,"user_id":115413,"accept_rate":88,"display_name":"Christian Hayter"},"score":1,"creation_date":1419942609,"post_id":1342020,"comment_id":43822837,"body_markdown":"@JLRishe: I hadn&#39;t looked at this question for years; I have not written any XPath queries at all since LINQ to XML came out. :-) Parameterising the data values is always the best solution to any string injection problem, so I have upvoted both your answers. Thanks very much.","body":"@JLRishe: I hadn&#39;t looked at this question for years; I have not written any XPath queries at all since LINQ to XML came out. :-) Parameterising the data values is always the best solution to any string injection problem, so I have upvoted both your answers. Thanks very much."},{"owner":{"account_id":1066600,"reputation":20369,"user_id":1067003,"accept_rate":62,"display_name":"hanshenrik"},"score":0,"creation_date":1509629780,"post_id":1342020,"comment_id":81101675,"body_markdown":"the exception is not necessary, you can work around it [by using concat(), see Robert Rossney&#39;s answer](https://stackoverflow.com/a/1352556/1067003)","body":"the exception is not necessary, you can work around it <a href=\"https://stackoverflow.com/a/1352556/1067003\">by using concat(), see Robert Rossney&#39;s answer</a>"}],"tags":[],"owner":{"account_id":39926,"reputation":30711,"user_id":115413,"accept_rate":88,"display_name":"Christian Hayter"},"comment_count":6,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1251449954,"creation_date":1251388565,"answer_id":1342020,"question_id":1341847,"body_markdown":"**EDIT:** After a heavy unit testing session, and checking the [XPath Standards][1], I have revised my function as follows:\r\n\r\n    public static string ToXPath(string value) {\r\n\r\n        const string apostrophe = &quot;&#39;&quot;;\r\n        const string quote = &quot;\\&quot;&quot;;\r\n\r\n        if(value.Contains(quote)) {\r\n            if(value.Contains(apostrophe)) {\r\n                throw new XPathException(&quot;Illegal XPath string literal.&quot;);\r\n            } else {\r\n                return apostrophe + value + apostrophe;\r\n            }\r\n        } else {\r\n            return quote + value + quote;\r\n        }\r\n    }\r\n\r\nIt appears that XPath doesn&#39;t have a character escaping system at all, it&#39;s quite primitive really. Evidently my original code only worked by coincidence. My apologies for misleading anyone!\r\n\r\n**Original answer below for reference only - please ignore**\r\n\r\nFor safety, make sure that any occurrence of all 5 predefined XML entities in your XPath string are escaped, e.g.\r\n\r\n    public static string ToXPath(string value) {\r\n        return &quot;&#39;&quot; + XmlEncode(value) + &quot;&#39;&quot;;\r\n    }\r\n\r\n    public static string XmlEncode(string value) {\r\n        StringBuilder text = new StringBuilder(value);\r\n        text.Replace(&quot;&amp;&quot;, &quot;&amp;amp;&quot;);\r\n        text.Replace(&quot;&#39;&quot;, &quot;&amp;apos;&quot;);\r\n        text.Replace(@&quot;&quot;&quot;&quot;, &quot;&amp;quot;&quot;);\r\n        text.Replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;);\r\n        text.Replace(&quot;&gt;&quot;, &quot;&amp;gt;&quot;);\r\n        return text.ToString();\r\n    }\r\n\r\nI have done this before and it works fine. If it doesn&#39;t work for you, maybe there is some additional context to the problem that you need to make us aware of.\r\n\r\n  [1]: http://www.w3.org/TR/xpath#exprlex","title":"Apostrophe (&#39;) in XPath query","body":"<p><strong>EDIT:</strong> After a heavy unit testing session, and checking the <a href=\"http://www.w3.org/TR/xpath#exprlex\" rel=\"noreferrer\">XPath Standards</a>, I have revised my function as follows:</p>\n\n<pre><code>public static string ToXPath(string value) {\n\n    const string apostrophe = \"'\";\n    const string quote = \"\\\"\";\n\n    if(value.Contains(quote)) {\n        if(value.Contains(apostrophe)) {\n            throw new XPathException(\"Illegal XPath string literal.\");\n        } else {\n            return apostrophe + value + apostrophe;\n        }\n    } else {\n        return quote + value + quote;\n    }\n}\n</code></pre>\n\n<p>It appears that XPath doesn't have a character escaping system at all, it's quite primitive really. Evidently my original code only worked by coincidence. My apologies for misleading anyone!</p>\n\n<p><strong>Original answer below for reference only - please ignore</strong></p>\n\n<p>For safety, make sure that any occurrence of all 5 predefined XML entities in your XPath string are escaped, e.g.</p>\n\n<pre><code>public static string ToXPath(string value) {\n    return \"'\" + XmlEncode(value) + \"'\";\n}\n\npublic static string XmlEncode(string value) {\n    StringBuilder text = new StringBuilder(value);\n    text.Replace(\"&amp;\", \"&amp;amp;\");\n    text.Replace(\"'\", \"&amp;apos;\");\n    text.Replace(@\"\"\"\", \"&amp;quot;\");\n    text.Replace(\"&lt;\", \"&amp;lt;\");\n    text.Replace(\"&gt;\", \"&amp;gt;\");\n    return text.ToString();\n}\n</code></pre>\n\n<p>I have done this before and it works fine. If it doesn't work for you, maybe there is some additional context to the problem that you need to make us aware of.</p>\n"},{"comments":[{"owner":{"account_id":10305,"reputation":95008,"user_id":19403,"accept_rate":59,"display_name":"Robert Rossney"},"score":10,"creation_date":1251842847,"post_id":1352556,"comment_id":1202757,"body_markdown":"Please do.  I actually have no use for it myself; I only did this because at first I found the problem interesting and then as I dug in its difficulty started to annoy me.  My ADHD is your gain.","body":"Please do.  I actually have no use for it myself; I only did this because at first I found the problem interesting and then as I dug in its difficulty started to annoy me.  My ADHD is your gain."},{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":0,"creation_date":1301010417,"post_id":1352556,"comment_id":6143381,"body_markdown":"How is about &quot;\\n&quot;? I have doubt new lines could cause problems too.","body":"How is about &quot;\\n&quot;? I have doubt new lines could cause problems too."},{"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"score":0,"creation_date":1398180797,"post_id":1352556,"comment_id":35529109,"body_markdown":"@kan no, it&#39;s perfectly fine for a string literal in XPath to contain a newline character.  The _only_ restriction is that single quoted literals can&#39;t contain single quotes and double quoted literals can&#39;t contain double quotes.","body":"@kan no, it&#39;s perfectly fine for a string literal in XPath to contain a newline character.  The <i>only</i> restriction is that single quoted literals can&#39;t contain single quotes and double quoted literals can&#39;t contain double quotes."},{"owner":{"account_id":2201325,"reputation":100099,"user_id":1945651,"accept_rate":86,"display_name":"JLRishe"},"score":1,"creation_date":1419864244,"post_id":1352556,"comment_id":43795006,"body_markdown":"_&quot;This is surprisingly difficult to do.&quot;_ It&#39;s only surprisingly difficult to do if you go about it the wrong way (by trying to cobble strings together). If you use one of the right approaches, it&#39;s pretty simple.","body":"<i>&quot;This is surprisingly difficult to do.&quot;</i> It&#39;s only surprisingly difficult to do if you go about it the wrong way (by trying to cobble strings together). If you use one of the right approaches, it&#39;s pretty simple."},{"owner":{"account_id":2301356,"reputation":147,"user_id":2021590,"accept_rate":100,"display_name":"Dadapeer Pvg"},"score":0,"creation_date":1442385116,"post_id":1352556,"comment_id":53054852,"body_markdown":"Hi @RobertRossney I&#39;m facing the same problem, i have my search string as &quot;???&quot; and &quot;+&quot;. I&#39;m able to find all except these two. Can you please suggest something for the same.","body":"Hi @RobertRossney I&#39;m facing the same problem, i have my search string as &quot;???&quot; and &quot;+&quot;. I&#39;m able to find all except these two. Can you please suggest something for the same."},{"owner":{"account_id":1066600,"reputation":20369,"user_id":1067003,"accept_rate":62,"display_name":"hanshenrik"},"score":0,"creation_date":1502045875,"post_id":1352556,"comment_id":78030984,"body_markdown":"awesome work @RobertRossney ! btw, i did a PHP port of this code, if anyone is interested: https://gist.github.com/divinity76/64b0c12bcafc2150efa8ca87d2ccee52","body":"awesome work @RobertRossney ! btw, i did a PHP port of this code, if anyone is interested: <a href=\"https://gist.github.com/divinity76/64b0c12bcafc2150efa8ca87d2ccee52\" rel=\"nofollow noreferrer\">gist.github.com/divinity76/64b0c12bcafc2150efa8ca87d2ccee52</a>"},{"owner":{"account_id":1066600,"reputation":20369,"user_id":1067003,"accept_rate":62,"display_name":"hanshenrik"},"score":0,"creation_date":1658514160,"post_id":1352556,"comment_id":129078881,"body_markdown":"pretty sure this can be shortened to a &lt;strike&gt;sweet&lt;/strike&gt; one-liner, eg PHP: ```function xpath_quote($str){ return &#39;concat(\\&#39;&#39;.implode(&#39;\\&#39;, &quot;\\&#39;&quot;, \\&#39;&#39;, explode(&#39;\\&#39;&#39;, $value)).&#39;\\&#39;)&#39;; }``` - generates less efficient, longer xpaths in most situations, but the code is short&lt;strike&gt;&amp;sweet&lt;/strike&gt;: https://3v4l.org/rDa1L","body":"pretty sure this can be shortened to a &lt;strike&gt;sweet&lt;/strike&gt; one-liner, eg PHP: <code>function xpath_quote($str){ return &#39;concat(\\&#39;&#39;.implode(&#39;\\&#39;, &quot;\\&#39;&quot;, \\&#39;&#39;, explode(&#39;\\&#39;&#39;, $value)).&#39;\\&#39;)&#39;; }</code> - generates less efficient, longer xpaths in most situations, but the code is short&lt;strike&gt;&amp;sweet&lt;/strike&gt;: <a href=\"https://3v4l.org/rDa1L\" rel=\"nofollow noreferrer\">3v4l.org/rDa1L</a>"}],"tags":[],"owner":{"account_id":10305,"reputation":95008,"user_id":19403,"accept_rate":59,"display_name":"Robert Rossney"},"comment_count":7,"down_vote_count":1,"up_vote_count":60,"is_accepted":true,"score":59,"last_activity_date":1500604112,"creation_date":1251585251,"answer_id":1352556,"question_id":1341847,"body_markdown":"This is surprisingly difficult to do.\r\n\r\nTake a look at the [XPath Recommendation][1], and you&#39;ll see that it defines a literal as:\r\n\r\n    Literal ::=   &#39;&quot;&#39; [^&quot;]* &#39;&quot;&#39;\t\r\n                | &quot;&#39;&quot; [^&#39;]* &quot;&#39;&quot;\r\n\r\nWhich is to say, string literals in XPath expressions can contain apostrophes or double quotes but not both.\r\n\r\nYou can&#39;t use escaping to get around this.  A literal like this:\r\n\r\n    &#39;Some&amp;apos;Value&#39;\r\n\r\nwill match this XML text:\r\n\r\n    Some&amp;amp;apos;Value\r\n\r\nThis does mean that it&#39;s possible for there to be a piece of XML text that you can&#39;t generate an XPath literal to match, e.g.:\r\n\r\n    &lt;elm att=&quot;&amp;quot;&amp;apos&quot;/&gt;\r\n\r\nBut that doesn&#39;t mean it&#39;s impossible to match that text with XPath, it&#39;s just tricky.  In any case where the value you&#39;re trying to match contains both single and double quotes, you can construct an expression that uses `concat` to produce the text that it&#39;s going to match:\r\n\r\n    elm[@att=concat(&#39;&quot;&#39;, &quot;&#39;&quot;)]\r\n\r\nSo that leads us to this, which is a lot more complicated than I&#39;d like it to be:\r\n\r\n    /// &lt;summary&gt;\r\n    /// Produce an XPath literal equal to the value if possible; if not, produce\r\n    /// an XPath expression that will match the value.\r\n    /// \r\n    /// Note that this function will produce very long XPath expressions if a value\r\n    /// contains a long run of double quotes.\r\n    /// &lt;/summary&gt;\r\n    /// &lt;param name=&quot;value&quot;&gt;The value to match.&lt;/param&gt;\r\n    /// &lt;returns&gt;If the value contains only single or double quotes, an XPath\r\n    /// literal equal to the value.  If it contains both, an XPath expression,\r\n    /// using concat(), that evaluates to the value.&lt;/returns&gt;\r\n    static string XPathLiteral(string value)\r\n    {\r\n        // if the value contains only single or double quotes, construct\r\n        // an XPath literal\r\n        if (!value.Contains(&quot;\\&quot;&quot;))\r\n        {\r\n            return &quot;\\&quot;&quot; + value + &quot;\\&quot;&quot;;\r\n        }\r\n        if (!value.Contains(&quot;&#39;&quot;))\r\n        {\r\n            return &quot;&#39;&quot; + value + &quot;&#39;&quot;;\r\n        }\r\n\r\n        // if the value contains both single and double quotes, construct an\r\n        // expression that concatenates all non-double-quote substrings with\r\n        // the quotes, e.g.:\r\n        //\r\n        //    concat(&quot;foo&quot;, &#39;&quot;&#39;, &quot;bar&quot;)\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.Append(&quot;concat(&quot;);\r\n        string[] substrings = value.Split(&#39;\\&quot;&#39;);\r\n        for (int i = 0; i &lt; substrings.Length; i++ )\r\n        {\r\n            bool needComma = (i&gt;0);\r\n            if (substrings[i] != &quot;&quot;)\r\n            {\r\n                if (i &gt; 0)\r\n                {\r\n                    sb.Append(&quot;, &quot;);\r\n                }\r\n                sb.Append(&quot;\\&quot;&quot;);\r\n                sb.Append(substrings[i]);\r\n                sb.Append(&quot;\\&quot;&quot;);\r\n                needComma = true;\r\n            }\r\n            if (i &lt; substrings.Length - 1)\r\n            {\r\n                if (needComma)\r\n                {\r\n                    sb.Append(&quot;, &quot;);                    \r\n                }\r\n                sb.Append(&quot;&#39;\\&quot;&#39;&quot;);\r\n            }\r\n            \r\n        }\r\n        sb.Append(&quot;)&quot;);\r\n        return sb.ToString();\r\n    }\r\n\r\nAnd yes, I tested it with all the edge cases.  That&#39;s why the logic is so stupidly complex:\r\n\r\n        foreach (string s in new[]\r\n        {\r\n            &quot;foo&quot;,              // no quotes\r\n            &quot;\\&quot;foo&quot;,            // double quotes only\r\n            &quot;&#39;foo&quot;,             // single quotes only\r\n            &quot;&#39;foo\\&quot;bar&quot;,        // both; double quotes in mid-string\r\n            &quot;&#39;foo\\&quot;bar\\&quot;baz&quot;,   // multiple double quotes in mid-string\r\n            &quot;&#39;foo\\&quot;&quot;,           // string ends with double quotes\r\n            &quot;&#39;foo\\&quot;\\&quot;&quot;,         // string ends with run of double quotes\r\n            &quot;\\&quot;&#39;foo&quot;,           // string begins with double quotes\r\n            &quot;\\&quot;\\&quot;&#39;foo&quot;,         // string begins with run of double quotes\r\n            &quot;&#39;foo\\&quot;\\&quot;bar&quot;       // run of double quotes in mid-string\r\n        })\r\n        {\r\n            Console.Write(s);\r\n            Console.Write(&quot; = &quot;);\r\n            Console.WriteLine(XPathLiteral(s));\r\n            XmlElement elm = d.CreateElement(&quot;test&quot;);\r\n            d.DocumentElement.AppendChild(elm);\r\n            elm.SetAttribute(&quot;value&quot;, s);\r\n\r\n            string xpath = &quot;/root/test[@value = &quot; + XPathLiteral(s) + &quot;]&quot;;\r\n            if (d.SelectSingleNode(xpath) == elm)\r\n            {\r\n                Console.WriteLine(&quot;OK&quot;);\r\n            }\r\n            else\r\n            {\r\n                Console.WriteLine(&quot;Should have found a match for {0}, and didn&#39;t.&quot;, s);\r\n            }\r\n        }\r\n        Console.ReadKey();\r\n    }\r\n\r\n\r\n  [1]: http://www.w3.org/TR/xpath","title":"Apostrophe (&#39;) in XPath query","body":"<p>This is surprisingly difficult to do.</p>\n\n<p>Take a look at the <a href=\"http://www.w3.org/TR/xpath\" rel=\"noreferrer\">XPath Recommendation</a>, and you'll see that it defines a literal as:</p>\n\n<pre><code>Literal ::=   '\"' [^\"]* '\"' \n            | \"'\" [^']* \"'\"\n</code></pre>\n\n<p>Which is to say, string literals in XPath expressions can contain apostrophes or double quotes but not both.</p>\n\n<p>You can't use escaping to get around this.  A literal like this:</p>\n\n<pre><code>'Some&amp;apos;Value'\n</code></pre>\n\n<p>will match this XML text:</p>\n\n<pre><code>Some&amp;amp;apos;Value\n</code></pre>\n\n<p>This does mean that it's possible for there to be a piece of XML text that you can't generate an XPath literal to match, e.g.:</p>\n\n<pre><code>&lt;elm att=\"&amp;quot;&amp;apos\"/&gt;\n</code></pre>\n\n<p>But that doesn't mean it's impossible to match that text with XPath, it's just tricky.  In any case where the value you're trying to match contains both single and double quotes, you can construct an expression that uses <code>concat</code> to produce the text that it's going to match:</p>\n\n<pre><code>elm[@att=concat('\"', \"'\")]\n</code></pre>\n\n<p>So that leads us to this, which is a lot more complicated than I'd like it to be:</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Produce an XPath literal equal to the value if possible; if not, produce\n/// an XPath expression that will match the value.\n/// \n/// Note that this function will produce very long XPath expressions if a value\n/// contains a long run of double quotes.\n/// &lt;/summary&gt;\n/// &lt;param name=\"value\"&gt;The value to match.&lt;/param&gt;\n/// &lt;returns&gt;If the value contains only single or double quotes, an XPath\n/// literal equal to the value.  If it contains both, an XPath expression,\n/// using concat(), that evaluates to the value.&lt;/returns&gt;\nstatic string XPathLiteral(string value)\n{\n    // if the value contains only single or double quotes, construct\n    // an XPath literal\n    if (!value.Contains(\"\\\"\"))\n    {\n        return \"\\\"\" + value + \"\\\"\";\n    }\n    if (!value.Contains(\"'\"))\n    {\n        return \"'\" + value + \"'\";\n    }\n\n    // if the value contains both single and double quotes, construct an\n    // expression that concatenates all non-double-quote substrings with\n    // the quotes, e.g.:\n    //\n    //    concat(\"foo\", '\"', \"bar\")\n    StringBuilder sb = new StringBuilder();\n    sb.Append(\"concat(\");\n    string[] substrings = value.Split('\\\"');\n    for (int i = 0; i &lt; substrings.Length; i++ )\n    {\n        bool needComma = (i&gt;0);\n        if (substrings[i] != \"\")\n        {\n            if (i &gt; 0)\n            {\n                sb.Append(\", \");\n            }\n            sb.Append(\"\\\"\");\n            sb.Append(substrings[i]);\n            sb.Append(\"\\\"\");\n            needComma = true;\n        }\n        if (i &lt; substrings.Length - 1)\n        {\n            if (needComma)\n            {\n                sb.Append(\", \");                    \n            }\n            sb.Append(\"'\\\"'\");\n        }\n\n    }\n    sb.Append(\")\");\n    return sb.ToString();\n}\n</code></pre>\n\n<p>And yes, I tested it with all the edge cases.  That's why the logic is so stupidly complex:</p>\n\n<pre><code>    foreach (string s in new[]\n    {\n        \"foo\",              // no quotes\n        \"\\\"foo\",            // double quotes only\n        \"'foo\",             // single quotes only\n        \"'foo\\\"bar\",        // both; double quotes in mid-string\n        \"'foo\\\"bar\\\"baz\",   // multiple double quotes in mid-string\n        \"'foo\\\"\",           // string ends with double quotes\n        \"'foo\\\"\\\"\",         // string ends with run of double quotes\n        \"\\\"'foo\",           // string begins with double quotes\n        \"\\\"\\\"'foo\",         // string begins with run of double quotes\n        \"'foo\\\"\\\"bar\"       // run of double quotes in mid-string\n    })\n    {\n        Console.Write(s);\n        Console.Write(\" = \");\n        Console.WriteLine(XPathLiteral(s));\n        XmlElement elm = d.CreateElement(\"test\");\n        d.DocumentElement.AppendChild(elm);\n        elm.SetAttribute(\"value\", s);\n\n        string xpath = \"/root/test[@value = \" + XPathLiteral(s) + \"]\";\n        if (d.SelectSingleNode(xpath) == elm)\n        {\n            Console.WriteLine(\"OK\");\n        }\n        else\n        {\n            Console.WriteLine(\"Should have found a match for {0}, and didn't.\", s);\n        }\n    }\n    Console.ReadKey();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":63034,"reputation":4640,"user_id":186850,"accept_rate":71,"display_name":"Gyuri"},"score":0,"creation_date":1259024938,"post_id":1787177,"comment_id":1674146,"body_markdown":"BTW, this solution might solve your problem, too, that pretty much states the same thing as you do:\nhttp://stackoverflow.com/questions/642125/encoding-xpath-expressions-with-both-single-and-double-quotes","body":"BTW, this solution might solve your problem, too, that pretty much states the same thing as you do: <a href=\"http://stackoverflow.com/questions/642125/encoding-xpath-expressions-with-both-single-and-double-quotes\" title=\"encoding xpath expressions with both single and double quotes\">stackoverflow.com/questions/642125/&hellip;</a>"},{"owner":{"account_id":1607854,"reputation":7760,"user_id":1487529,"accept_rate":95,"display_name":"Elmue"},"score":0,"creation_date":1391220447,"post_id":1787177,"comment_id":32444427,"body_markdown":"You did not understand the question.","body":"You did not understand the question."}],"tags":[],"owner":{"account_id":63034,"reputation":4640,"user_id":186850,"accept_rate":71,"display_name":"Gyuri"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1259024760,"creation_date":1259024760,"answer_id":1787177,"question_id":1341847,"body_markdown":"I had this problem a while back and seemingly the simplest, but not the fastest solution is that you add a new node into the XML document that has an attribute with the value &#39;SomeValue&#39;, then look for that attribute value using a simple xpath search. After the you&#39;re finished with the operation, you can delete the &quot;temporary node&quot; from the XML document.\r\n\r\nThis way, the whole comparison happens &quot;inside&quot;, so you don&#39;t have to construct the weird XPath query.\r\n\r\nI seem to remember that in order to speed things up, you should be adding the temp value to the root node.\r\n\r\nGood luck...","title":"Apostrophe (&#39;) in XPath query","body":"<p>I had this problem a while back and seemingly the simplest, but not the fastest solution is that you add a new node into the XML document that has an attribute with the value 'SomeValue', then look for that attribute value using a simple xpath search. After the you're finished with the operation, you can delete the \"temporary node\" from the XML document.</p>\n\n<p>This way, the whole comparison happens \"inside\", so you don't have to construct the weird XPath query.</p>\n\n<p>I seem to remember that in order to speed things up, you should be adding the temp value to the root node.</p>\n\n<p>Good luck...</p>\n"},{"tags":[],"owner":{"account_id":455015,"reputation":4764,"user_id":852971,"accept_rate":95,"display_name":"Cody S"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1342820362,"creation_date":1342811035,"answer_id":11585487,"question_id":1341847,"body_markdown":"I ported Robert&#39;s answer to Java (tested in 1.6):\r\n\r\n    /// &lt;summary&gt;\r\n    /// Produce an XPath literal equal to the value if possible; if not, produce\r\n    /// an XPath expression that will match the value.\r\n    ///\r\n    /// Note that this function will produce very long XPath expressions if a value\r\n    /// contains a long run of double quotes.\r\n    /// &lt;/summary&gt;\r\n    /// &lt;param name=&quot;value&quot;&gt;The value to match.&lt;/param&gt;\r\n    /// &lt;returns&gt;If the value contains only single or double quotes, an XPath\r\n    /// literal equal to the value.  If it contains both, an XPath expression,\r\n    /// using concat(), that evaluates to the value.&lt;/returns&gt;\r\n    public static String XPathLiteral(String value) {\r\n        if(!value.contains(&quot;\\&quot;&quot;) &amp;&amp; !value.contains(&quot;&#39;&quot;)) {\r\n            return &quot;&#39;&quot; + value + &quot;&#39;&quot;;\r\n        }\r\n        // if the value contains only single or double quotes, construct\r\n        // an XPath literal\r\n        if (!value.contains(&quot;\\&quot;&quot;)) {\r\n            System.out.println(&quot;Doesn&#39;t contain Quotes&quot;);\r\n            String s = &quot;\\&quot;&quot; + value + &quot;\\&quot;&quot;;\r\n            System.out.println(s);\r\n            return s;\r\n        }\r\n        if (!value.contains(&quot;&#39;&quot;)) {\r\n            System.out.println(&quot;Doesn&#39;t contain apostophes&quot;);\r\n            String s =  &quot;&#39;&quot; + value + &quot;&#39;&quot;;\r\n            System.out.println(s);\r\n            return s;\r\n        }\r\n\r\n        // if the value contains both single and double quotes, construct an\r\n        // expression that concatenates all non-double-quote substrings with\r\n        // the quotes, e.g.:\r\n        //\r\n        //    concat(&quot;foo&quot;, &#39;&quot;&#39;, &quot;bar&quot;)\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(&quot;concat(&quot;);\r\n        String[] substrings = value.split(&quot;\\&quot;&quot;);\r\n        for (int i = 0; i &lt; substrings.length; i++) {\r\n            boolean needComma = (i &gt; 0);\r\n            if (!substrings[i].equals(&quot;&quot;)) {\r\n                if (i &gt; 0) {\r\n                    sb.append(&quot;, &quot;);\r\n                }\r\n                sb.append(&quot;\\&quot;&quot;);\r\n                sb.append(substrings[i]);\r\n                sb.append(&quot;\\&quot;&quot;);\r\n                needComma = true;\r\n            }\r\n            if (i &lt; substrings.length - 1) {\r\n                if (needComma) {\r\n                    sb.append(&quot;, &quot;);\r\n                }\r\n                sb.append(&quot;&#39;\\&quot;&#39;&quot;);\r\n            }\r\n            System.out.println(&quot;Step &quot; + i + &quot;: &quot; + sb.toString());\r\n        }\r\n        //This stuff is because Java is being stupid about splitting strings\r\n        if(value.endsWith(&quot;\\&quot;&quot;)) {\r\n            sb.append(&quot;, &#39;\\&quot;&#39;&quot;);\r\n        }\r\n        //The code works if the string ends in a apos\r\n        /*else if(value.endsWith(&quot;&#39;&quot;)) {\r\n            sb.append(&quot;, \\&quot;&#39;\\&quot;&quot;);\r\n        }*/\r\n        sb.append(&quot;)&quot;);\r\n        String s = sb.toString();\r\n        System.out.println(s);\r\n        return s;\r\n    }\r\n\r\nHope this helps somebody!","title":"Apostrophe (&#39;) in XPath query","body":"<p>I ported Robert's answer to Java (tested in 1.6):</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Produce an XPath literal equal to the value if possible; if not, produce\n/// an XPath expression that will match the value.\n///\n/// Note that this function will produce very long XPath expressions if a value\n/// contains a long run of double quotes.\n/// &lt;/summary&gt;\n/// &lt;param name=\"value\"&gt;The value to match.&lt;/param&gt;\n/// &lt;returns&gt;If the value contains only single or double quotes, an XPath\n/// literal equal to the value.  If it contains both, an XPath expression,\n/// using concat(), that evaluates to the value.&lt;/returns&gt;\npublic static String XPathLiteral(String value) {\n    if(!value.contains(\"\\\"\") &amp;&amp; !value.contains(\"'\")) {\n        return \"'\" + value + \"'\";\n    }\n    // if the value contains only single or double quotes, construct\n    // an XPath literal\n    if (!value.contains(\"\\\"\")) {\n        System.out.println(\"Doesn't contain Quotes\");\n        String s = \"\\\"\" + value + \"\\\"\";\n        System.out.println(s);\n        return s;\n    }\n    if (!value.contains(\"'\")) {\n        System.out.println(\"Doesn't contain apostophes\");\n        String s =  \"'\" + value + \"'\";\n        System.out.println(s);\n        return s;\n    }\n\n    // if the value contains both single and double quotes, construct an\n    // expression that concatenates all non-double-quote substrings with\n    // the quotes, e.g.:\n    //\n    //    concat(\"foo\", '\"', \"bar\")\n    StringBuilder sb = new StringBuilder();\n    sb.append(\"concat(\");\n    String[] substrings = value.split(\"\\\"\");\n    for (int i = 0; i &lt; substrings.length; i++) {\n        boolean needComma = (i &gt; 0);\n        if (!substrings[i].equals(\"\")) {\n            if (i &gt; 0) {\n                sb.append(\", \");\n            }\n            sb.append(\"\\\"\");\n            sb.append(substrings[i]);\n            sb.append(\"\\\"\");\n            needComma = true;\n        }\n        if (i &lt; substrings.length - 1) {\n            if (needComma) {\n                sb.append(\", \");\n            }\n            sb.append(\"'\\\"'\");\n        }\n        System.out.println(\"Step \" + i + \": \" + sb.toString());\n    }\n    //This stuff is because Java is being stupid about splitting strings\n    if(value.endsWith(\"\\\"\")) {\n        sb.append(\", '\\\"'\");\n    }\n    //The code works if the string ends in a apos\n    /*else if(value.endsWith(\"'\")) {\n        sb.append(\", \\\"'\\\"\");\n    }*/\n    sb.append(\")\");\n    String s = sb.toString();\n    System.out.println(s);\n    return s;\n}\n</code></pre>\n\n<p>Hope this helps somebody!</p>\n"},{"comments":[{"owner":{"account_id":12046,"reputation":188205,"user_id":23528,"accept_rate":71,"display_name":"Daniel A. White"},"score":0,"creation_date":1366116831,"post_id":12629400,"comment_id":22880211,"body_markdown":"fyi yours does not pass all of his tests.","body":"fyi yours does not pass all of his tests."},{"owner":{"account_id":12046,"reputation":188205,"user_id":23528,"accept_rate":71,"display_name":"Daniel A. White"},"score":0,"creation_date":1366116895,"post_id":12629400,"comment_id":22880251,"body_markdown":"change your add to the parts to quote the string.","body":"change your add to the parts to quote the string."},{"owner":{"account_id":55680,"reputation":3586,"user_id":166815,"accept_rate":50,"display_name":"Jonathan Gilbert"},"score":0,"creation_date":1368134884,"post_id":12629400,"comment_id":23633187,"body_markdown":"Thanks, not sure how I missed that. Fixed. :-)","body":"Thanks, not sure how I missed that. Fixed. :-)"},{"owner":{"account_id":1607854,"reputation":7760,"user_id":1487529,"accept_rate":95,"display_name":"Elmue"},"score":0,"creation_date":1391219951,"post_id":12629400,"comment_id":32444331,"body_markdown":"Hello Your code is 1000 times better than the original but still more clumsy than required. Instead of first adding a string which you later remove it would be easier:\n\nString[] split = value.Split(&#39;&quot;&#39;);\nfor (int i=0; i&lt;split.length; i++)\n{\n    if (i&gt;0) parts.Add(&quot;&#39;\\&quot;&#39;&quot;);\n\n    if (split[i].Length &gt; 0)\n       parts.Add(&#39;&quot;&#39; + split[i] + &#39;&quot;&#39;);\n}","body":"Hello Your code is 1000 times better than the original but still more clumsy than required. Instead of first adding a string which you later remove it would be easier:  String[] split = value.Split(&#39;&quot;&#39;); for (int i=0; i&lt;split.length; i++) {     if (i&gt;0) parts.Add(&quot;&#39;\\&quot;&#39;&quot;);      if (split[i].Length &gt; 0)        parts.Add(&#39;&quot;&#39; + split[i] + &#39;&quot;&#39;); }"},{"owner":{"account_id":55680,"reputation":3586,"user_id":166815,"accept_rate":50,"display_name":"Jonathan Gilbert"},"score":0,"creation_date":1391536782,"post_id":12629400,"comment_id":32561986,"body_markdown":"@Elmue That&#39;s a matter of personal taste, I suppose. I find that clunkier than removing the final string. There&#39;s no significant difference in performance, of course. Another way to implement it might be to add a &#39;&quot;&#39; *before* each entry, and then use an inline LINQ expression instead of having a separate .Remove statement:\n\n`foreach (var str in value.Split(&#39;&quot;&#39;))  \n{  \n  parts.Add(&quot;&#39;\\&quot;&#39;&quot;);  \n  if (!string.IsNullOrEmpty(str))  \n    parts.Add(&#39;&quot;&#39; + str + &#39;&quot;&#39;);  \n}  \n      \nreturn &quot;concat(&quot; + string.Join(&quot;,&quot;, parts.Skip(1)) + &quot;)&quot;;`","body":"@Elmue That&#39;s a matter of personal taste, I suppose. I find that clunkier than removing the final string. There&#39;s no significant difference in performance, of course. Another way to implement it might be to add a &#39;&quot;&#39; <i>before</i> each entry, and then use an inline LINQ expression instead of having a separate .Remove statement:  <code>foreach (var str in value.Split(&#39;&quot;&#39;))   {     parts.Add(&quot;&#39;\\&quot;&#39;&quot;);     if (!string.IsNullOrEmpty(str))       parts.Add(&#39;&quot;&#39; + str + &#39;&quot;&#39;);   }          return &quot;concat(&quot; + string.Join(&quot;,&quot;, parts.Skip(1)) + &quot;)&quot;;</code>"},{"owner":{"account_id":55680,"reputation":3586,"user_id":166815,"accept_rate":50,"display_name":"Jonathan Gilbert"},"score":0,"creation_date":1391537057,"post_id":12629400,"comment_id":32562158,"body_markdown":"@Elmue Thanks for the compliment, by the way :-)","body":"@Elmue Thanks for the compliment, by the way :-)"}],"tags":[],"owner":{"account_id":55680,"reputation":3586,"user_id":166815,"accept_rate":50,"display_name":"Jonathan Gilbert"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1368134860,"creation_date":1348777161,"answer_id":12629400,"question_id":1341847,"body_markdown":"Here is an alternative to Robert Rossney&#39;s StringBuilder approach, perhaps more intuitive:\r\n\r\n\t\t/// &lt;summary&gt;\r\n\t\t/// Produce an XPath literal equal to the value if possible; if not, produce\r\n\t\t/// an XPath expression that will match the value.\r\n\t\t/// \r\n\t\t/// Note that this function will produce very long XPath expressions if a value\r\n\t\t/// contains a long run of double quotes.\r\n\t\t/// \r\n\t\t/// From: http://stackoverflow.com/questions/1341847/special-character-in-xpath-query\r\n\t\t/// &lt;/summary&gt;\r\n\t\t/// &lt;param name=&quot;value&quot;&gt;The value to match.&lt;/param&gt;\r\n\t\t/// &lt;returns&gt;If the value contains only single or double quotes, an XPath\r\n\t\t/// literal equal to the value.  If it contains both, an XPath expression,\r\n\t\t/// using concat(), that evaluates to the value.&lt;/returns&gt;\r\n\t\tpublic static string XPathLiteral(string value)\r\n\t\t{\r\n\t\t\t// If the value contains only single or double quotes, construct\r\n\t\t\t// an XPath literal\r\n\t\t\tif (!value.Contains(&quot;\\&quot;&quot;))\r\n\t\t\t\treturn &quot;\\&quot;&quot; + value + &quot;\\&quot;&quot;;\r\n\r\n\t\t\tif (!value.Contains(&quot;&#39;&quot;))\r\n\t\t\t\treturn &quot;&#39;&quot; + value + &quot;&#39;&quot;;\r\n\r\n\t\t\t// If the value contains both single and double quotes, construct an\r\n\t\t\t// expression that concatenates all non-double-quote substrings with\r\n\t\t\t// the quotes, e.g.:\r\n\t\t\t//\r\n\t\t\t//    concat(&quot;foo&quot;,&#39;&quot;&#39;,&quot;bar&quot;)\r\n\r\n\t\t\tList&lt;string&gt; parts = new List&lt;string&gt;();\r\n\r\n\t\t\t// First, put a &#39;&quot;&#39; after each component in the string.\r\n\t\t\tforeach (var str in value.Split(&#39;&quot;&#39;))\r\n\t\t\t{\r\n\t\t\t\tif (!string.IsNullOrEmpty(str))\r\n\t\t\t\t\tparts.Add(&#39;&quot;&#39; + str + &#39;&quot;&#39;); // (edited -- thanks Daniel :-)\r\n\r\n\t\t\t\tparts.Add(&quot;&#39;\\&quot;&#39;&quot;);\r\n\t\t\t}\r\n\r\n\t\t\t// Then remove the extra &#39;&quot;&#39; after the last component.\r\n\t\t\tparts.RemoveAt(parts.Count - 1);\r\n\r\n\t\t\t// Finally, put it together into a concat() function call.\r\n\t\t\treturn &quot;concat(&quot; + string.Join(&quot;,&quot;, parts) + &quot;)&quot;;\r\n\t\t}\r\n","title":"Apostrophe (&#39;) in XPath query","body":"<p>Here is an alternative to Robert Rossney's StringBuilder approach, perhaps more intuitive:</p>\n\n<pre><code>    /// &lt;summary&gt;\n    /// Produce an XPath literal equal to the value if possible; if not, produce\n    /// an XPath expression that will match the value.\n    /// \n    /// Note that this function will produce very long XPath expressions if a value\n    /// contains a long run of double quotes.\n    /// \n    /// From: http://stackoverflow.com/questions/1341847/special-character-in-xpath-query\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"value\"&gt;The value to match.&lt;/param&gt;\n    /// &lt;returns&gt;If the value contains only single or double quotes, an XPath\n    /// literal equal to the value.  If it contains both, an XPath expression,\n    /// using concat(), that evaluates to the value.&lt;/returns&gt;\n    public static string XPathLiteral(string value)\n    {\n        // If the value contains only single or double quotes, construct\n        // an XPath literal\n        if (!value.Contains(\"\\\"\"))\n            return \"\\\"\" + value + \"\\\"\";\n\n        if (!value.Contains(\"'\"))\n            return \"'\" + value + \"'\";\n\n        // If the value contains both single and double quotes, construct an\n        // expression that concatenates all non-double-quote substrings with\n        // the quotes, e.g.:\n        //\n        //    concat(\"foo\",'\"',\"bar\")\n\n        List&lt;string&gt; parts = new List&lt;string&gt;();\n\n        // First, put a '\"' after each component in the string.\n        foreach (var str in value.Split('\"'))\n        {\n            if (!string.IsNullOrEmpty(str))\n                parts.Add('\"' + str + '\"'); // (edited -- thanks Daniel :-)\n\n            parts.Add(\"'\\\"'\");\n        }\n\n        // Then remove the extra '\"' after the last component.\n        parts.RemoveAt(parts.Count - 1);\n\n        // Finally, put it together into a concat() function call.\n        return \"concat(\" + string.Join(\",\", parts) + \")\";\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2201325,"reputation":100099,"user_id":1945651,"accept_rate":86,"display_name":"JLRishe"},"score":0,"creation_date":1419864131,"post_id":23223738,"comment_id":43794961,"body_markdown":"This _is_ by far the best approach. +1","body":"This <i>is</i> by far the best approach. +1"}],"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1398180294,"creation_date":1398180294,"answer_id":23223738,"question_id":1341847,"body_markdown":"By far the best approach to this problem is to use the facilities provided by your XPath library to declare an XPath-level variable that you can reference in the expression.  The variable value can then be any string in the host programming language, and isn&#39;t subject to the restrictions of XPath string literals.  For example, in Java with `javax.xml.xpath`:\r\n\r\n    XPathFactory xpf = XPathFactory.newInstance();\r\n    final Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();\r\n    xpf.setXPathVariableResolver(new XPathVariableResolver() {\r\n      public Object resolveVariable(QName name) {\r\n        return variables.get(name.getLocalPart());\r\n      }\r\n    });\r\n\r\n    XPath xpath = xpf.newXPath();\r\n    XPathExpression expr = xpath.compile(&quot;ListObject[@Title=$val]&quot;);\r\n    variables.put(&quot;val&quot;, someValue);\r\n    NodeList nodes = (NodeList)expr.evaluate(someNode, XPathConstants.NODESET);\r\n\r\nFor C# `XPathNavigator` you would define a custom `XsltContext` [as described in this MSDN article][1] (you&#39;d only need the variable-related parts of this example, not the extension functions).\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/dd567715%28v=vs.110%29.aspx","title":"Apostrophe (&#39;) in XPath query","body":"<p>By far the best approach to this problem is to use the facilities provided by your XPath library to declare an XPath-level variable that you can reference in the expression.  The variable value can then be any string in the host programming language, and isn't subject to the restrictions of XPath string literals.  For example, in Java with <code>javax.xml.xpath</code>:</p>\n\n<pre><code>XPathFactory xpf = XPathFactory.newInstance();\nfinal Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();\nxpf.setXPathVariableResolver(new XPathVariableResolver() {\n  public Object resolveVariable(QName name) {\n    return variables.get(name.getLocalPart());\n  }\n});\n\nXPath xpath = xpf.newXPath();\nXPathExpression expr = xpath.compile(\"ListObject[@Title=$val]\");\nvariables.put(\"val\", someValue);\nNodeList nodes = (NodeList)expr.evaluate(someNode, XPathConstants.NODESET);\n</code></pre>\n\n<p>For C# <code>XPathNavigator</code> you would define a custom <code>XsltContext</code> <a href=\"http://msdn.microsoft.com/en-us/library/dd567715%28v=vs.110%29.aspx\">as described in this MSDN article</a> (you'd only need the variable-related parts of this example, not the extension functions).</p>\n"},{"tags":[],"owner":{"account_id":4375152,"reputation":1,"user_id":3568383,"display_name":"Shivanand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398336879,"creation_date":1398335499,"answer_id":23266365,"question_id":1341847,"body_markdown":"You can fix this issue by using `double quotes` instead of `single quotes` in the `XPath` expression. \r\n\r\nFor ex: \r\n   \r\n    element.XPathSelectElements(String.Format(&quot;//group[@title=\\&quot;{0}\\&quot;]&quot;, &quot;Man&#39;s&quot;));","title":"Apostrophe (&#39;) in XPath query","body":"<p>You can fix this issue by using <code>double quotes</code> instead of <code>single quotes</code> in the <code>XPath</code> expression. </p>\n\n<p>For ex: </p>\n\n<pre><code>element.XPathSelectElements(String.Format(\"//group[@title=\\\"{0}\\\"]\", \"Man's\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4606658,"reputation":21,"user_id":3735951,"display_name":"Fortune"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1402615773,"creation_date":1402615773,"answer_id":24195498,"question_id":1341847,"body_markdown":"You can quote an XPath string by using search and replace.\r\n\r\nIn F#\r\n\r\n    let quoteString (s : string) =\r\n        if      not (s.Contains &quot;&#39;&quot; ) then sprintf &quot;&#39;%s&#39;&quot;   s\r\n        else if not (s.Contains &quot;\\&quot;&quot;) then sprintf &quot;\\&quot;%s\\&quot;&quot; s\r\n        else &quot;concat(&#39;&quot; + s.Replace (&quot;&#39;&quot;, &quot;&#39;, \\&quot;&#39;\\&quot;, &#39;&quot;) + &quot;&#39;)&quot;\r\n\r\nI haven&#39;t tested it extensively, but seems to work.","title":"Apostrophe (&#39;) in XPath query","body":"<p>You can quote an XPath string by using search and replace.</p>\n\n<p>In F#</p>\n\n<pre><code>let quoteString (s : string) =\n    if      not (s.Contains \"'\" ) then sprintf \"'%s'\"   s\n    else if not (s.Contains \"\\\"\") then sprintf \"\\\"%s\\\"\" s\n    else \"concat('\" + s.Replace (\"'\", \"', \\\"'\\\", '\") + \"')\"\n</code></pre>\n\n<p>I haven't tested it extensively, but seems to work.</p>\n"},{"comments":[{"owner":{"account_id":12497406,"reputation":191,"user_id":9096919,"display_name":"Jtbs"},"score":0,"creation_date":1654745942,"post_id":27690826,"comment_id":128166635,"body_markdown":"I think you have an excellent point, and this is an excellent alternative.","body":"I think you have an excellent point, and this is an excellent alternative."}],"tags":[],"owner":{"account_id":2201325,"reputation":100099,"user_id":1945651,"accept_rate":86,"display_name":"JLRishe"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1419942578,"creation_date":1419863709,"answer_id":27690826,"question_id":1341847,"body_markdown":"Most of the answers here focus on how to use string manipulation to cobble together an XPath that uses string delimiters in a valid way.\r\n\r\nI would say the best practice is not to rely on such complicated and potentially fragile methods.\r\n\r\nThe following applies to .NET since this question is tagged with C#. Ian Roberts has provided what I think is the best solution for when you&#39;re using XPath in Java.\r\n\r\nNowadays, you can use Linq-to-Xml to query XML documents in a way that allows you to use your variables in the query directly. This is not XPath, but the purpose is the same.\r\n\r\nFor the example given in OP, you could query the nodes you want like this:\r\n\r\n    var value = &quot;Some value with &#39;apostrophes&#39; and \\&quot;quotes\\&quot;&quot;;\r\n\r\n    // doc is an instance of XElement or XDocument\r\n    IEnumerable&lt;XElement&gt; nodes = \r\n                          doc.Descendants(&quot;ListObject&quot;)\r\n                             .Where(lo =&gt; (string)lo.Attribute(&quot;Title&quot;) == value);\r\n\r\nor to use the query comprehension syntax:\r\n\r\n    IEnumerable&lt;XElement&gt; nodes = from lo in doc.Descendants(&quot;ListObject&quot;)\r\n                                  where (string)lo.Attribute(&quot;Title&quot;) == value\r\n                                  select lo;\r\n\r\n\r\n\r\n.NET also provides a way to use XPath variables in your XPath queries. Sadly, it&#39;s not easy to do this out of the box, but with a simple helper class that I provide in [this other SO answer](https://stackoverflow.com/a/19704008/1945651), it&#39;s quite easy.\r\n\r\nYou can use it like this:\r\n\r\n    var value = &quot;Some value with &#39;apostrophes&#39; and \\&quot;quotes\\&quot;&quot;;\r\n\r\n    var variableContext = new VariableContext { { &quot;matchValue&quot;, value } };\r\n    // ixn is an instance of IXPathNavigable\r\n    XPathNodeIterator nodes = ixn.CreateNavigator()\r\n                                 .SelectNodes(&quot;ListObject[@Title = $matchValue]&quot;, \r\n                                              variableContext);","title":"Apostrophe (&#39;) in XPath query","body":"<p>Most of the answers here focus on how to use string manipulation to cobble together an XPath that uses string delimiters in a valid way.</p>\n\n<p>I would say the best practice is not to rely on such complicated and potentially fragile methods.</p>\n\n<p>The following applies to .NET since this question is tagged with C#. Ian Roberts has provided what I think is the best solution for when you're using XPath in Java.</p>\n\n<p>Nowadays, you can use Linq-to-Xml to query XML documents in a way that allows you to use your variables in the query directly. This is not XPath, but the purpose is the same.</p>\n\n<p>For the example given in OP, you could query the nodes you want like this:</p>\n\n<pre><code>var value = \"Some value with 'apostrophes' and \\\"quotes\\\"\";\n\n// doc is an instance of XElement or XDocument\nIEnumerable&lt;XElement&gt; nodes = \n                      doc.Descendants(\"ListObject\")\n                         .Where(lo =&gt; (string)lo.Attribute(\"Title\") == value);\n</code></pre>\n\n<p>or to use the query comprehension syntax:</p>\n\n<pre><code>IEnumerable&lt;XElement&gt; nodes = from lo in doc.Descendants(\"ListObject\")\n                              where (string)lo.Attribute(\"Title\") == value\n                              select lo;\n</code></pre>\n\n<p>.NET also provides a way to use XPath variables in your XPath queries. Sadly, it's not easy to do this out of the box, but with a simple helper class that I provide in <a href=\"https://stackoverflow.com/a/19704008/1945651\">this other SO answer</a>, it's quite easy.</p>\n\n<p>You can use it like this:</p>\n\n<pre><code>var value = \"Some value with 'apostrophes' and \\\"quotes\\\"\";\n\nvar variableContext = new VariableContext { { \"matchValue\", value } };\n// ixn is an instance of IXPathNavigable\nXPathNodeIterator nodes = ixn.CreateNavigator()\n                             .SelectNodes(\"ListObject[@Title = $matchValue]\", \n                                          variableContext);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12497406,"reputation":191,"user_id":9096919,"display_name":"Jtbs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654752677,"creation_date":1654752677,"answer_id":72555138,"question_id":1341847,"body_markdown":"I really like [Robert&#39;s answer][1], but I feel like the code could be a little denser. \r\n\r\n\r\n        \r\n    using System.Linq;\r\n    \r\n    namespace Humig.Csp.Common\r\n    {\r\n        public static class XpathHelpers\r\n        {\r\n            public static string XpathLiteralEncode(string literalValue)\r\n            {\r\n                return string.IsNullOrEmpty(literalValue)\r\n                    ? &quot;&#39;&#39;&quot;\r\n                    : !literalValue.Contains(&quot;\\&quot;&quot;)\r\n                    ? $&quot;\\&quot;{literalValue}\\&quot;&quot;\r\n                    : !literalValue.Contains(&quot;&#39;&quot;)\r\n                    ? $&quot;&#39;{literalValue}&#39;&quot;\r\n                    : $&quot;concat({string.Join(&quot;,&#39;\\&quot;&#39;,&quot;, literalValue.Split(&#39;&quot;&#39;).Select(k =&gt; $&quot;\\&quot;{k}\\&quot;&quot;))})&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\nI have also created a unit test with all the test cases:\r\n\r\n    using HtmlAgilityPack;\r\n    using Microsoft.VisualStudio.TestTools.UnitTesting;\r\n    \r\n    namespace Humig.Csp.Common.Tests\r\n    {\r\n        [TestClass()]\r\n        public class XpathHelpersTests\r\n        {\r\n    \r\n            [DataRow(&quot;foo&quot;)]   // no quotes\r\n            [DataRow(&quot;\\&quot;foo&quot;)]   // double quotes only\r\n            [DataRow(&quot;&#39;foo&quot;)]   // single quotes only\r\n            [DataRow(&quot;&#39;foo\\&quot;bar&quot;)]   // both; double quotes in mid-string\r\n            [DataRow(&quot;&#39;foo\\&quot;bar\\&quot;baz&quot;)]   // multiple double quotes in mid-string\r\n            [DataRow(&quot;&#39;foo\\&quot;&quot;)]   // string ends with double quotes\r\n            [DataRow(&quot;&#39;foo\\&quot;\\&quot;&quot;)]   // string ends with run of double quotes\r\n            [DataRow(&quot;\\&quot;&#39;foo&quot;)]   // string begins with double quotes\r\n            [DataRow(&quot;\\&quot;\\&quot;&#39;foo&quot;)]   // string begins with run of double quotes\r\n            [DataRow(&quot;&#39;foo\\&quot;\\&quot;bar&quot;)]   // run of double quotes in mid-string\r\n            [TestMethod()]\r\n            public void XpathLiteralEncodeTest(string attrValue)\r\n            {\r\n                var doc = new HtmlDocument();\r\n                var hnode = doc.CreateElement(&quot;html&quot;);\r\n                var body = doc.CreateElement(&quot;body&quot;);\r\n                var div = doc.CreateElement(&quot;div&quot;);\r\n                div.Attributes.Add(&quot;data-test&quot;, attrValue);\r\n                doc.DocumentNode.AppendChild(hnode);\r\n                hnode.AppendChild(body);\r\n                body.AppendChild(div);\r\n                var literalOut = XpathHelpers.XpathLiteralEncode(attrValue);\r\n                string xpath = $&quot;/html/body/div[@data-test = {literalOut}]&quot;;\r\n                var result = doc.DocumentNode.SelectSingleNode(xpath);\r\n                Assert.AreEqual(div, result, $&quot;did not find a match for {attrValue}&quot;);\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/1352556/9096919","title":"Apostrophe (&#39;) in XPath query","body":"<p>I really like <a href=\"https://stackoverflow.com/a/1352556/9096919\">Robert's answer</a>, but I feel like the code could be a little denser.</p>\n<pre><code>using System.Linq;\n\nnamespace Humig.Csp.Common\n{\n    public static class XpathHelpers\n    {\n        public static string XpathLiteralEncode(string literalValue)\n        {\n            return string.IsNullOrEmpty(literalValue)\n                ? &quot;''&quot;\n                : !literalValue.Contains(&quot;\\&quot;&quot;)\n                ? $&quot;\\&quot;{literalValue}\\&quot;&quot;\n                : !literalValue.Contains(&quot;'&quot;)\n                ? $&quot;'{literalValue}'&quot;\n                : $&quot;concat({string.Join(&quot;,'\\&quot;',&quot;, literalValue.Split('&quot;').Select(k =&gt; $&quot;\\&quot;{k}\\&quot;&quot;))})&quot;;\n        }\n    }\n}\n</code></pre>\n<p>I have also created a unit test with all the test cases:</p>\n<pre><code>using HtmlAgilityPack;\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\n\nnamespace Humig.Csp.Common.Tests\n{\n    [TestClass()]\n    public class XpathHelpersTests\n    {\n\n        [DataRow(&quot;foo&quot;)]   // no quotes\n        [DataRow(&quot;\\&quot;foo&quot;)]   // double quotes only\n        [DataRow(&quot;'foo&quot;)]   // single quotes only\n        [DataRow(&quot;'foo\\&quot;bar&quot;)]   // both; double quotes in mid-string\n        [DataRow(&quot;'foo\\&quot;bar\\&quot;baz&quot;)]   // multiple double quotes in mid-string\n        [DataRow(&quot;'foo\\&quot;&quot;)]   // string ends with double quotes\n        [DataRow(&quot;'foo\\&quot;\\&quot;&quot;)]   // string ends with run of double quotes\n        [DataRow(&quot;\\&quot;'foo&quot;)]   // string begins with double quotes\n        [DataRow(&quot;\\&quot;\\&quot;'foo&quot;)]   // string begins with run of double quotes\n        [DataRow(&quot;'foo\\&quot;\\&quot;bar&quot;)]   // run of double quotes in mid-string\n        [TestMethod()]\n        public void XpathLiteralEncodeTest(string attrValue)\n        {\n            var doc = new HtmlDocument();\n            var hnode = doc.CreateElement(&quot;html&quot;);\n            var body = doc.CreateElement(&quot;body&quot;);\n            var div = doc.CreateElement(&quot;div&quot;);\n            div.Attributes.Add(&quot;data-test&quot;, attrValue);\n            doc.DocumentNode.AppendChild(hnode);\n            hnode.AppendChild(body);\n            body.AppendChild(div);\n            var literalOut = XpathHelpers.XpathLiteralEncode(attrValue);\n            string xpath = $&quot;/html/body/div[@data-test = {literalOut}]&quot;;\n            var result = doc.DocumentNode.SelectSingleNode(xpath);\n            Assert.AreEqual(div, result, $&quot;did not find a match for {attrValue}&quot;);\n\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":47661,"reputation":3514,"user_id":141282,"accept_rate":73,"display_name":"Prabhu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45236,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":1352556,"answer_count":11,"score":42,"last_activity_date":1683020487,"creation_date":1251387072,"question_id":1341847,"body_markdown":"I use the following `XPATH Query` to list the object under a site. `ListObject[@Title=&#39;SomeValue&#39;]`. SomeValue is dynamic. This query works as long as SomeValue does not have an apostrophe (&#39;). Tried using escape sequence also. Didn&#39;t work. \r\n\r\nWhat am I doing wrong?","title":"Apostrophe (&#39;) in XPath query","body":"<p>I use the following <code>XPATH Query</code> to list the object under a site. <code>ListObject[@Title='SomeValue']</code>. SomeValue is dynamic. This query works as long as SomeValue does not have an apostrophe ('). Tried using escape sequence also. Didn't work. </p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","vert.x"],"answers":[{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682719676,"creation_date":1682719676,"answer_id":76133551,"question_id":76124183,"body_markdown":"When using `setInstances()` Vert.x will immediately start all instances &quot;at the same time&quot; (they nominally get started by different contexts with different worker threads, so multiple instances should not interact except using well defined non-vert.x multi-threading semantics).\r\n\r\nThat being said, there&#39;s nothing wrong with deploying multiple instances at different times, for example by registering for `onSuccess()` on the first `deployVerticle()` and call the second deploy from there - Vert.x doesn&#39;t care which verticles you deploy, as long as you never try to deploy the same instance multiple times.\r\n\r\nSo this should work fine:\r\n\r\n```\r\nvertx.deployVerticle(&quot;myverticle&quot;).onSuccess(v -&gt; \r\n    vertx.deployVerticle(&quot;myverticle&quot;)).\r\n```\r\n","title":"Vert.x: Is there a difference between deploying a verticle n times vs setInstances(n)?","body":"<p>When using <code>setInstances()</code> Vert.x will immediately start all instances &quot;at the same time&quot; (they nominally get started by different contexts with different worker threads, so multiple instances should not interact except using well defined non-vert.x multi-threading semantics).</p>\n<p>That being said, there's nothing wrong with deploying multiple instances at different times, for example by registering for <code>onSuccess()</code> on the first <code>deployVerticle()</code> and call the second deploy from there - Vert.x doesn't care which verticles you deploy, as long as you never try to deploy the same instance multiple times.</p>\n<p>So this should work fine:</p>\n<pre><code>vertx.deployVerticle(&quot;myverticle&quot;).onSuccess(v -&gt; \n    vertx.deployVerticle(&quot;myverticle&quot;)).\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"score":0,"creation_date":1683089262,"post_id":76153607,"comment_id":134311171,"body_markdown":"thanks for pointing to this! Is this also a problem if I plan my verticles to be worker verticles? The resource itself does all the processing work, so I need one for each verticle. (I could also copy the sharedResource in the verticle constructor but that is not straightforward). If I deploy the verticles one after another, can I somehow make sure they get in the same WorkerPool? Is this even desirable?","body":"thanks for pointing to this! Is this also a problem if I plan my verticles to be worker verticles? The resource itself does all the processing work, so I need one for each verticle. (I could also copy the sharedResource in the verticle constructor but that is not straightforward). If I deploy the verticles one after another, can I somehow make sure they get in the same WorkerPool? Is this even desirable?"},{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":1,"creation_date":1683119614,"post_id":76153607,"comment_id":134317432,"body_markdown":"Worker verticles are also assigned an event loop which manages IO events. Only your verticle callbacks are invoked on worker threads. And for advice on how to design your verticles, I would recommend asking to one of the Vert.x community channels","body":"Worker verticles are also assigned an event loop which manages IO events. Only your verticle callbacks are invoked on worker threads. And for advice on how to design your verticles, I would recommend asking to one of the Vert.x community channels"},{"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"score":0,"creation_date":1683264117,"post_id":76153607,"comment_id":134343057,"body_markdown":"Thanks for clearing this up! Can I specify the event loop thread a verticle should be deployed on? Then I could spread the verticles manually. If I have 3 event loops and want to deploy 4 verticles sequentially I could do 1-&gt;1 2-&gt;2 3-&gt;3 4-&gt;1... (verticle -&gt; event loop)","body":"Thanks for clearing this up! Can I specify the event loop thread a verticle should be deployed on? Then I could spread the verticles manually. If I have 3 event loops and want to deploy 4 verticles sequentially I could do 1-&gt;1 2-&gt;2 3-&gt;3 4-&gt;1... (verticle -&gt; event loop)"},{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":1,"creation_date":1683296722,"post_id":76153607,"comment_id":134349707,"body_markdown":"No, you can&#39;t do this.","body":"No, you can&#39;t do this."},{"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"score":0,"creation_date":1683878755,"post_id":76153607,"comment_id":134436949,"body_markdown":"another update: while it&#39;s may not guaranteed that the verticle instances use different event loops the different verticles are still launched on different event-loops in a round robin fashion","body":"another update: while it&#39;s may not guaranteed that the verticle instances use different event loops the different verticles are still launched on different event-loops in a round robin fashion"}],"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683020383,"creation_date":1683020383,"answer_id":76153607,"question_id":76124183,"body_markdown":"There is a major difference: when you deploy several instances by configuring `DeploymentOptions`, Vert.x guarantees the verticle instances use different event loops (provided there are more event loops than instances to deploy).\r\n\r\nIf you have to create a specific resource that is shared by all verticle instances, you could create it in the main method of your application and then use the `deploy` method which takes a `Supplier` argument:\r\n\r\n    var sharedResource = setupSharedResource();\r\n    DeploymentOptions options = new DeploymentOptions().setInstances(2);\r\n    vertx.deployVerticle(() -&gt; new com.mycompany.MyVerticle(sharedResource), options);","title":"Vert.x: Is there a difference between deploying a verticle n times vs setInstances(n)?","body":"<p>There is a major difference: when you deploy several instances by configuring <code>DeploymentOptions</code>, Vert.x guarantees the verticle instances use different event loops (provided there are more event loops than instances to deploy).</p>\n<p>If you have to create a specific resource that is shared by all verticle instances, you could create it in the main method of your application and then use the <code>deploy</code> method which takes a <code>Supplier</code> argument:</p>\n<pre><code>var sharedResource = setupSharedResource();\nDeploymentOptions options = new DeploymentOptions().setInstances(2);\nvertx.deployVerticle(() -&gt; new com.mycompany.MyVerticle(sharedResource), options);\n</code></pre>\n"}],"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76153607,"answer_count":2,"score":0,"last_activity_date":1683020383,"creation_date":1682625511,"question_id":76124183,"body_markdown":"Is there a major between doing\r\n\r\n    DeploymentOptions options = new DeploymentOptions().setInstances(2);\r\n    vertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;, options);\r\n\r\nand \r\n\r\n    vertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;);\r\n    vertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;);\r\n\r\n?\r\n\r\nThe [docs](https://vertx.io/docs/vertx-core/java/#_specifying_number_of_verticle_instances) only mention the first approach. \r\n\r\nIn the `MyVerticle#start` method I read a file which creates a lock. So deploying with `.setInstances(2)` will cause an `IOException`. I want to deploy the next verticle only if the future of the first is completed.\r\n\r\nAre there any downsides of the second approach?","title":"Vert.x: Is there a difference between deploying a verticle n times vs setInstances(n)?","body":"<p>Is there a major between doing</p>\n<pre><code>DeploymentOptions options = new DeploymentOptions().setInstances(2);\nvertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;, options);\n</code></pre>\n<p>and</p>\n<pre><code>vertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;);\nvertx.deployVerticle(&quot;com.mycompany.MyVerticle&quot;);\n</code></pre>\n<p>?</p>\n<p>The <a href=\"https://vertx.io/docs/vertx-core/java/#_specifying_number_of_verticle_instances\" rel=\"nofollow noreferrer\">docs</a> only mention the first approach.</p>\n<p>In the <code>MyVerticle#start</code> method I read a file which creates a lock. So deploying with <code>.setInstances(2)</code> will cause an <code>IOException</code>. I want to deploy the next verticle only if the future of the first is completed.</p>\n<p>Are there any downsides of the second approach?</p>\n"},{"tags":["java","windows","code-signing-certificate","launch4j"],"owner":{"account_id":6189825,"reputation":1,"user_id":4822808,"display_name":"Nadeem Usmani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683020321,"creation_date":1683020321,"question_id":76153598,"body_markdown":"I wanted to ask if a standard code signing certificate is enough to sign your launch4j application wrapping a Java Jar and not get a SmartScreen error in Windows 11.  Some say if we use standard code signing certificate we don&#39;t get error after some time. Is it consistent and how many installs will it require to go away.\r\n\r\nI&#39;ve tried self signed certificate but they still give error even thought they don&#39;t mention unknown publisher.","title":"How much time does it take to trust the Standard Code Signing Certificate by windows 11?","body":"<p>I wanted to ask if a standard code signing certificate is enough to sign your launch4j application wrapping a Java Jar and not get a SmartScreen error in Windows 11.  Some say if we use standard code signing certificate we don't get error after some time. Is it consistent and how many installs will it require to go away.</p>\n<p>I've tried self signed certificate but they still give error even thought they don't mention unknown publisher.</p>\n"},{"tags":["java","gradle","intellij-idea"],"comments":[{"owner":{"account_id":26147408,"reputation":5,"user_id":19835853,"display_name":"Nibowaka"},"score":0,"creation_date":1683018567,"post_id":76153338,"comment_id":134298868,"body_markdown":"I apologise I have it ....I didn&#39;t run program from main ....That was the reason....When I run program from main everything work correctly","body":"I apologise I have it ....I didn&#39;t run program from main ....That was the reason....When I run program from main everything work correctly"},{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":2,"creation_date":1683018593,"post_id":76153338,"comment_id":134298872,"body_markdown":"Hard to help you without minimal, reproducible example","body":"Hard to help you without minimal, reproducible example"},{"owner":{"account_id":26147408,"reputation":5,"user_id":19835853,"display_name":"Nibowaka"},"score":0,"creation_date":1683130397,"post_id":76153338,"comment_id":134320335,"body_markdown":"Thank you I solved it.....I working on simple bot chat on Hyperskill....and the problem was that i wasn&#39;t on the right part of code....Thank you for your interest","body":"Thank you I solved it.....I working on simple bot chat on Hyperskill....and the problem was that i wasn&#39;t on the right part of code....Thank you for your interest"}],"owner":{"account_id":26147408,"reputation":5,"user_id":19835853,"display_name":"Nibowaka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683019662,"creation_date":1683018370,"question_id":76153338,"body_markdown":"I have one problem with IntelliJ \r\nI have program in Java(grade) I have good program with scanners. Program run correctly but don&#39;t as input data for scanner....What can I do? It is something with setting of IntelliJ?\r\nProcess finished with exit code 0 but don&#39;t ask for inert data....\r\n\r\nI suppose it is something with IntelliJ? ","title":"Running program in IntelliJ J problems with insert data to scanner","body":"<p>I have one problem with IntelliJ\nI have program in Java(grade) I have good program with scanners. Program run correctly but don't as input data for scanner....What can I do? It is something with setting of IntelliJ?\nProcess finished with exit code 0 but don't ask for inert data....</p>\n<p>I suppose it is something with IntelliJ?</p>\n"},{"tags":["java","postgresql","pgjdbc-ng"],"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683019380,"creation_date":1683005180,"question_id":76151940,"body_markdown":"I am using com.impossibl.pgjdbc-ng package to listen to postgres channel which notifies on every insert/update of a table.\r\n\r\nMy java code is :\r\n\r\n```\r\nPGDataSource dataSource1 = new PGDataSource();\r\n// credentials\r\n\r\nPGDataSource dataSource2 = new PGDataSource();\r\n// credentails\r\n\r\nPGNotificationListener listener = new PGNotificationListener() {\r\n\t@Override\r\n\tpublic void notification(int processId, java.lang.String channelName, java.lang.String payload) {\r\n\t\tSystem.out.println(payload);\r\n\r\n\t\ttry (PGConnection connection2 = (PGConnection) dataSource2.getConnection()) {\r\n\t\t\t\r\n\t\t\t//update database2\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n try (PGConnection connection1 = (PGConnection) dataSource1.getConnection()) {\r\n\tStatement statement = connection.createStatement();\r\n\tstatement.execute(&quot;LISTEN my_channel_name&quot;);\r\n\tstatement.close();\r\n\tconnection.addNotificationListener(listener);\r\n\t\r\n\t// infinite loop to keep connection active\r\n\twhile (true) {\r\n\t\tThread.sleep(500);\r\n\t}\r\n} catch (Exception e) {\r\n\te.printStackTrace();\r\n\tSystem.err.println(e);\r\n}\r\n\r\n```\r\n\r\nCode is working and I am able to listen to the notices on the channel but I am encountering the following error very frequently\r\n\r\n\r\n```\r\ncom.impossibl.postgres.jdbc.PGSQLSimpleException: Connection Error: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\r\n\tat com.impossibl.postgres.jdbc.ErrorUtils.makeSQLException(ErrorUtils.java:138)\r\n\tat com.impossibl.postgres.jdbc.ConnectionUtil.createConnection(ConnectionUtil.java:326)\r\n\tat com.impossibl.postgres.jdbc.AbstractDataSource.createConnection(AbstractDataSource.java:125)\r\n\tat com.impossibl.postgres.jdbc.PGDataSource.getConnection(PGDataSource.java:71)\r\n\tat com.impossibl.postgres.jdbc.PGDataSource.getConnection(PGDataSource.java:63)\r\n\tat nic.oad.AttendanceReconciliation.service.LeaveReconciliation$1.notification(LeaveReconciliation.java:73)\r\n\tat com.impossibl.postgres.jdbc.PGDirectConnection.reportNotification(PGDirectConnection.java:1514)\r\n\tat com.impossibl.postgres.jdbc.PGDirectConnection.connectionNotificationReceived(PGDirectConnection.java:1448)\r\n\tat com.impossibl.postgres.system.BasicContext$ServerConnectionListener.notificationReceived(BasicContext.java:133)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory$DefaultHandler.notification(ServerConnectionFactory.java:556)\r\n\tat com.impossibl.postgres.protocol.v30.MessageDispatchHandler.receiveNotification(MessageDispatchHandler.java:417)\r\n\tat com.impossibl.postgres.protocol.v30.MessageDispatchHandler.parseAndDispatch(MessageDispatchHandler.java:307)\r\n\tat com.impossibl.postgres.protocol.v30.MessageDispatchHandler.dispatch(MessageDispatchHandler.java:221)\r\n\tat com.impossibl.postgres.protocol.v30.MessageDispatchHandler.channelRead(MessageDispatchHandler.java:152)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:426)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:278)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1408)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:682)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:617)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:534)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:906)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.io.IOException: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory.translateConnectionException(ServerConnectionFactory.java:493)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:251)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:143)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:124)\r\n\tat com.impossibl.postgres.system.BasicContext.&lt;init&gt;(BasicContext.java:213)\r\n\tat com.impossibl.postgres.jdbc.PGDirectConnection.&lt;init&gt;(PGDirectConnection.java:236)\r\n\tat com.impossibl.postgres.jdbc.ConnectionUtil.createConnection(ConnectionUtil.java:317)\r\n\t... 34 more\r\nCaused by: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\r\n\tat io.netty.util.concurrent.DefaultPromise.checkDeadLock(DefaultPromise.java:386)\r\n\tat io.netty.channel.DefaultChannelPromise.checkDeadLock(DefaultChannelPromise.java:159)\r\n\tat io.netty.util.concurrent.DefaultPromise.awaitUninterruptibly(DefaultPromise.java:236)\r\n\tat io.netty.channel.DefaultChannelPromise.awaitUninterruptibly(DefaultChannelPromise.java:137)\r\n\tat io.netty.channel.DefaultChannelPromise.awaitUninterruptibly(DefaultChannelPromise.java:30)\r\n\tat io.netty.util.concurrent.DefaultPromise.syncUninterruptibly(DefaultPromise.java:335)\r\n\tat io.netty.channel.DefaultChannelPromise.syncUninterruptibly(DefaultChannelPromise.java:125)\r\n\tat io.netty.channel.DefaultChannelPromise.syncUninterruptibly(DefaultChannelPromise.java:30)\r\n\tat com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:153)\r\n\t... 39 more\r\n```\r\n\r\nAnyone please suggest how to resolve this issue.","title":"PGSQLSimpleException: Connection Error: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise","body":"<p>I am using com.impossibl.pgjdbc-ng package to listen to postgres channel which notifies on every insert/update of a table.</p>\n<p>My java code is :</p>\n<pre><code>PGDataSource dataSource1 = new PGDataSource();\n// credentials\n\nPGDataSource dataSource2 = new PGDataSource();\n// credentails\n\nPGNotificationListener listener = new PGNotificationListener() {\n    @Override\n    public void notification(int processId, java.lang.String channelName, java.lang.String payload) {\n        System.out.println(payload);\n\n        try (PGConnection connection2 = (PGConnection) dataSource2.getConnection()) {\n            \n            //update database2\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n};\n\n try (PGConnection connection1 = (PGConnection) dataSource1.getConnection()) {\n    Statement statement = connection.createStatement();\n    statement.execute(&quot;LISTEN my_channel_name&quot;);\n    statement.close();\n    connection.addNotificationListener(listener);\n    \n    // infinite loop to keep connection active\n    while (true) {\n        Thread.sleep(500);\n    }\n} catch (Exception e) {\n    e.printStackTrace();\n    System.err.println(e);\n}\n\n</code></pre>\n<p>Code is working and I am able to listen to the notices on the channel but I am encountering the following error very frequently</p>\n<pre><code>com.impossibl.postgres.jdbc.PGSQLSimpleException: Connection Error: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\n    at com.impossibl.postgres.jdbc.ErrorUtils.makeSQLException(ErrorUtils.java:138)\n    at com.impossibl.postgres.jdbc.ConnectionUtil.createConnection(ConnectionUtil.java:326)\n    at com.impossibl.postgres.jdbc.AbstractDataSource.createConnection(AbstractDataSource.java:125)\n    at com.impossibl.postgres.jdbc.PGDataSource.getConnection(PGDataSource.java:71)\n    at com.impossibl.postgres.jdbc.PGDataSource.getConnection(PGDataSource.java:63)\n    at nic.oad.AttendanceReconciliation.service.LeaveReconciliation$1.notification(LeaveReconciliation.java:73)\n    at com.impossibl.postgres.jdbc.PGDirectConnection.reportNotification(PGDirectConnection.java:1514)\n    at com.impossibl.postgres.jdbc.PGDirectConnection.connectionNotificationReceived(PGDirectConnection.java:1448)\n    at com.impossibl.postgres.system.BasicContext$ServerConnectionListener.notificationReceived(BasicContext.java:133)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory$DefaultHandler.notification(ServerConnectionFactory.java:556)\n    at com.impossibl.postgres.protocol.v30.MessageDispatchHandler.receiveNotification(MessageDispatchHandler.java:417)\n    at com.impossibl.postgres.protocol.v30.MessageDispatchHandler.parseAndDispatch(MessageDispatchHandler.java:307)\n    at com.impossibl.postgres.protocol.v30.MessageDispatchHandler.dispatch(MessageDispatchHandler.java:221)\n    at com.impossibl.postgres.protocol.v30.MessageDispatchHandler.channelRead(MessageDispatchHandler.java:152)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:426)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:278)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1408)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:682)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:617)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:534)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:906)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.io.IOException: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.translateConnectionException(ServerConnectionFactory.java:493)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:251)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:143)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:124)\n    at com.impossibl.postgres.system.BasicContext.&lt;init&gt;(BasicContext.java:213)\n    at com.impossibl.postgres.jdbc.PGDirectConnection.&lt;init&gt;(PGDirectConnection.java:236)\n    at com.impossibl.postgres.jdbc.ConnectionUtil.createConnection(ConnectionUtil.java:317)\n    ... 34 more\nCaused by: io.netty.util.concurrent.BlockingOperationException: DefaultChannelPromise@78b0832e(incomplete)\n    at io.netty.util.concurrent.DefaultPromise.checkDeadLock(DefaultPromise.java:386)\n    at io.netty.channel.DefaultChannelPromise.checkDeadLock(DefaultChannelPromise.java:159)\n    at io.netty.util.concurrent.DefaultPromise.awaitUninterruptibly(DefaultPromise.java:236)\n    at io.netty.channel.DefaultChannelPromise.awaitUninterruptibly(DefaultChannelPromise.java:137)\n    at io.netty.channel.DefaultChannelPromise.awaitUninterruptibly(DefaultChannelPromise.java:30)\n    at io.netty.util.concurrent.DefaultPromise.syncUninterruptibly(DefaultPromise.java:335)\n    at io.netty.channel.DefaultChannelPromise.syncUninterruptibly(DefaultChannelPromise.java:125)\n    at io.netty.channel.DefaultChannelPromise.syncUninterruptibly(DefaultChannelPromise.java:30)\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.connect(ServerConnectionFactory.java:153)\n    ... 39 more\n</code></pre>\n<p>Anyone please suggest how to resolve this issue.</p>\n"},{"tags":["java","vert.x"],"answers":[{"comments":[{"owner":{"account_id":8286631,"reputation":901,"user_id":6229548,"accept_rate":100,"display_name":"Mattia Dinosaur"},"score":0,"creation_date":1683113607,"post_id":76153470,"comment_id":134315861,"body_markdown":"i try to it later","body":"i try to it later"},{"owner":{"account_id":8286631,"reputation":901,"user_id":6229548,"accept_rate":100,"display_name":"Mattia Dinosaur"},"score":0,"creation_date":1683214177,"post_id":76153470,"comment_id":134335555,"body_markdown":"from `testContext.succeeding` to  ` testContext.asyncAssertSuccess`  , it work for me ,i found the real problem is `No suitable driver`","body":"from <code>testContext.succeeding</code> to  ` testContext.asyncAssertSuccess`  , it work for me ,i found the real problem is <code>No suitable driver</code>"}],"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683019377,"creation_date":1683019377,"answer_id":76153470,"question_id":76139393,"body_markdown":"Perhaps there is a DB connectivity which cannot be reported within the 1 second sleep time.\r\n\r\nAnyway, when testing asynchronous code, you must use the `TestContext` to make sure the test is not finished too early:\r\n\r\n    @RunWith(VertxUnitRunner.class)\r\n    public class TestMainVerticle {\r\n      Vertx vertx = Vertx.vertx();\r\n      @Test\r\n      public void test(TestContext testContext)throws Exception{\r\n        var config =  MainVerticle.getDbConfig();\r\n        JDBCPool pool = JDBCPool.pool(vertx, config);\r\n        System.out.println(&quot;a&quot;);  // print a\r\n        pool.query(&quot;select 1 from test&quot;).execute(testContext.succeeding(event -&gt; {\r\n          System.out.println(&quot;b&quot;);\r\n        }));\r\n      }\r\n    }\r\n\r\n","title":"How to use junit to test db query in vert.x","body":"<p>Perhaps there is a DB connectivity which cannot be reported within the 1 second sleep time.</p>\n<p>Anyway, when testing asynchronous code, you must use the <code>TestContext</code> to make sure the test is not finished too early:</p>\n<pre><code>@RunWith(VertxUnitRunner.class)\npublic class TestMainVerticle {\n  Vertx vertx = Vertx.vertx();\n  @Test\n  public void test(TestContext testContext)throws Exception{\n    var config =  MainVerticle.getDbConfig();\n    JDBCPool pool = JDBCPool.pool(vertx, config);\n    System.out.println(&quot;a&quot;);  // print a\n    pool.query(&quot;select 1 from test&quot;).execute(testContext.succeeding(event -&gt; {\n      System.out.println(&quot;b&quot;);\n    }));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":8286631,"reputation":901,"user_id":6229548,"accept_rate":100,"display_name":"Mattia Dinosaur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76153470,"answer_count":1,"score":-1,"last_activity_date":1683019377,"creation_date":1682825270,"question_id":76139393,"body_markdown":"I want to test the code of query database.\r\nI reading the [doc](https://vertx.io/docs/vertx-junit5/java/),and write such code.\r\n\r\n\r\n\r\n\r\n```\r\n\r\n@RunWith(VertxUnitRunner.class)\r\npublic class TestMainVerticle {\r\n  Vertx vertx = Vertx.vertx();\r\n  @Test\r\n  public void test(TestContext testContext)throws Exception{\r\n    var config =  MainVerticle.getDbConfig();\r\n    JDBCPool pool = JDBCPool.pool(vertx, config);\r\n    System.out.println(&quot;a&quot;);  // print a\r\n    pool.query(&quot;select 1 from test&quot;).execute(event -&gt; {\r\n      System.out.println(&quot;b&quot;);  // not execute to here\r\n    });\r\n    Thread.sleep(1000);\r\n  }\r\n}\r\n\r\n```\r\nBut when i run it  ,it just print the   \r\n**a** in the consule ,it seems not run to the pont **b**\r\n\r\n\r\n## My question is \r\nHow to test Db query in `vert.x` with `junit` \r\n","title":"How to use junit to test db query in vert.x","body":"<p>I want to test the code of query database.\nI reading the <a href=\"https://vertx.io/docs/vertx-junit5/java/\" rel=\"nofollow noreferrer\">doc</a>,and write such code.</p>\n<pre><code>\n@RunWith(VertxUnitRunner.class)\npublic class TestMainVerticle {\n  Vertx vertx = Vertx.vertx();\n  @Test\n  public void test(TestContext testContext)throws Exception{\n    var config =  MainVerticle.getDbConfig();\n    JDBCPool pool = JDBCPool.pool(vertx, config);\n    System.out.println(&quot;a&quot;);  // print a\n    pool.query(&quot;select 1 from test&quot;).execute(event -&gt; {\n      System.out.println(&quot;b&quot;);  // not execute to here\n    });\n    Thread.sleep(1000);\n  }\n}\n\n</code></pre>\n<p>But when i run it  ,it just print the<br />\n<strong>a</strong> in the consule ,it seems not run to the pont <strong>b</strong></p>\n<h2>My question is</h2>\n<p>How to test Db query in <code>vert.x</code> with <code>junit</code></p>\n"},{"tags":["java","kotlin","intellij-plugin","ktor"],"answers":[{"comments":[{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678481790,"post_id":75700617,"comment_id":133547670,"body_markdown":"Sorry my bad. I was testing ktor server too . and it was similar to client exception either. I edited that . can you please check it again?","body":"Sorry my bad. I was testing ktor server too . and it was similar to client exception either. I edited that . can you please check it again?"},{"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"score":0,"creation_date":1678489611,"post_id":75700617,"comment_id":133549057,"body_markdown":"can you please add your build.gradle to question?","body":"can you please add your build.gradle to question?"},{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678527684,"post_id":75700617,"comment_id":133552608,"body_markdown":"Sure. I added build.gradle.kts","body":"Sure. I added build.gradle.kts"},{"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"score":0,"creation_date":1678532869,"post_id":75700617,"comment_id":133553301,"body_markdown":"please try to change the ktor version to val ktorVersion = &quot;2.0.1&quot;\nI&#39;m not ready to paint the reasons yet, but I think it will help","body":"please try to change the ktor version to val ktorVersion = &quot;2.0.1&quot; I&#39;m not ready to paint the reasons yet, but I think it will help"},{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678533647,"post_id":75700617,"comment_id":133553398,"body_markdown":"I did that .it doesn&#39;t work","body":"I did that .it doesn&#39;t work"},{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678533820,"post_id":75700617,"comment_id":133553429,"body_markdown":"Maybe its because of gradle version that I am using? can you give me your gradle version ? I am totally confused! I also tested on a fresh intelij idea template but it have same problem too!","body":"Maybe its because of gradle version that I am using? can you give me your gradle version ? I am totally confused! I also tested on a fresh intelij idea template but it have same problem too!"},{"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"score":1,"creation_date":1678540001,"post_id":75700617,"comment_id":133554306,"body_markdown":"i use 7.4.2 https://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nmy example in github: https://github.com/Corexis/demo1","body":"i use 7.4.2 <a href=\"https://services.gradle.org/distributions/gradle-7.4.2-bin.zip\" rel=\"nofollow noreferrer\">services.gradle.org/distributions/gradle-7.4.2-bin.zip</a> my example in github: <a href=\"https://github.com/Corexis/demo1\" rel=\"nofollow noreferrer\">github.com/Corexis/demo1</a>"},{"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"score":0,"creation_date":1678540735,"post_id":75700617,"comment_id":133554412,"body_markdown":"using this example i also tried your versions of kotlin and\nideaPlugin","body":"using this example i also tried your versions of kotlin and ideaPlugin"},{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678592668,"post_id":75700617,"comment_id":133562594,"body_markdown":"I build and ran your demo. but this exception thrown when I pressed &quot;greeting/hello action&quot;  : on Exception in thread &quot;DefaultDispatcher-worker-3&quot; java.lang.NoClassDefFoundError: Could not initialize class kotlinx.coroutines.CoroutineExceptionHandlerImplKt","body":"I build and ran your demo. but this exception thrown when I pressed &quot;greeting/hello action&quot;  : on Exception in thread &quot;DefaultDispatcher-worker-3&quot; java.lang.NoClassDefFoundError: Could not initialize class kotlinx.coroutines.CoroutineExceptionHandlerImplKt"},{"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"score":1,"creation_date":1678732831,"post_id":75700617,"comment_id":133587454,"body_markdown":"its really strange, https://i.imgur.com/2B5BEB3.png proof that it works for me. I will try to look for reasons and answer why this happens, but until then this answer will be useless. I will leave it to leave available the history of our attempts. I sincerely apologize for not being able to help quickly.","body":"its really strange, <a href=\"https://i.imgur.com/2B5BEB3.png\" rel=\"nofollow noreferrer\">i.imgur.com/2B5BEB3.png</a> proof that it works for me. I will try to look for reasons and answer why this happens, but until then this answer will be useless. I will leave it to leave available the history of our attempts. I sincerely apologize for not being able to help quickly."},{"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"score":0,"creation_date":1678781718,"post_id":75700617,"comment_id":133595425,"body_markdown":"Thats OK thanks. I found a temporary solution and added to question","body":"Thats OK thanks. I found a temporary solution and added to question"}],"tags":[],"owner":{"account_id":17015482,"reputation":61,"user_id":12312794,"display_name":"John Doe"},"comment_count":11,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678479654,"creation_date":1678479219,"answer_id":75700617,"question_id":75694002,"body_markdown":"In my opinion it is possible to use the ktor client in idea plugins.\r\n \r\nI was able to run the ktor client websocket inside the plugin without any problems and it read and logged incoming messages here is my code:\r\n\r\n```kotlin\r\n\r\nval ktorClient = HttpClient(CIO) {\r\n    install(WebSockets)\r\n}\r\n\r\nclass PluginAction : DumbAwareAction() {\r\n\r\n    override fun actionPerformed(event: AnActionEvent) {\r\n\r\n        CoroutineScope(SupervisorJob() + Dispatchers.IO).launch {\r\n\r\n            ktorClient.webSocket(\r\n                method = HttpMethod.Get,\r\n                host = &quot;localhost&quot;,\r\n                path = &quot;/path&quot;,\r\n            ) {\r\n                while (true) {\r\n                    val incoming = (incoming.receive() as Frame.Text).readText()\r\n                    thisLogger().info(&quot;incoming: $incoming&quot;)\r\n                }\r\n            }\r\n        }\r\n        ktorClient.close()\r\n    }\r\n}\r\n```\r\n\r\nbuild.gradle.kts:\r\n\r\n```kotlin\r\nval ktorVersion = &quot;2.2.2&quot;\r\n\r\ndependencies {\r\n    implementation(&quot;io.ktor:ktor-client-core:$ktorVersion&quot;)\r\n    implementation(&quot;io.ktor:ktor-client-cio:$ktorVersion&quot;)\r\n    implementation(&quot;io.ktor:ktor-client-websockets:$ktorVersion&quot;)\r\n}\r\n```\r\n\r\nJudging by your log ```io.ktor.server.engine.ApplicationEngineEnvironmentBuilder```, you tried to use the ktor server module\r\nwhich crashed due to missing settings.\r\n\r\nBased on your question, you need exactly the client.\r\n\r\nalso you missed the engine, i used СIO\r\n\r\n```val ktorClient = HttpClient(CIO) {...}```\r\n\r\nSee also: \r\n\r\n[Setup ktor websocket client][1] \r\n\r\n[Client webSockets code example][2]\r\n\r\n\r\n  [1]: https://ktor.io/docs/websocket-client.html\r\n  [2]: https://github.com/ktorio/ktor-documentation/tree/2.2.3/codeSnippets/snippets/client-websockets","title":"Problem with ktor client in Intellij Idea plugin development?","body":"<p>In my opinion it is possible to use the ktor client in idea plugins.</p>\n<p>I was able to run the ktor client websocket inside the plugin without any problems and it read and logged incoming messages here is my code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>\nval ktorClient = HttpClient(CIO) {\n    install(WebSockets)\n}\n\nclass PluginAction : DumbAwareAction() {\n\n    override fun actionPerformed(event: AnActionEvent) {\n\n        CoroutineScope(SupervisorJob() + Dispatchers.IO).launch {\n\n            ktorClient.webSocket(\n                method = HttpMethod.Get,\n                host = &quot;localhost&quot;,\n                path = &quot;/path&quot;,\n            ) {\n                while (true) {\n                    val incoming = (incoming.receive() as Frame.Text).readText()\n                    thisLogger().info(&quot;incoming: $incoming&quot;)\n                }\n            }\n        }\n        ktorClient.close()\n    }\n}\n</code></pre>\n<p>build.gradle.kts:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val ktorVersion = &quot;2.2.2&quot;\n\ndependencies {\n    implementation(&quot;io.ktor:ktor-client-core:$ktorVersion&quot;)\n    implementation(&quot;io.ktor:ktor-client-cio:$ktorVersion&quot;)\n    implementation(&quot;io.ktor:ktor-client-websockets:$ktorVersion&quot;)\n}\n</code></pre>\n<p>Judging by your log <code>io.ktor.server.engine.ApplicationEngineEnvironmentBuilder</code>, you tried to use the ktor server module\nwhich crashed due to missing settings.</p>\n<p>Based on your question, you need exactly the client.</p>\n<p>also you missed the engine, i used СIO</p>\n<p><code>val ktorClient = HttpClient(CIO) {...}</code></p>\n<p>See also:</p>\n<p><a href=\"https://ktor.io/docs/websocket-client.html\" rel=\"nofollow noreferrer\">Setup ktor websocket client</a></p>\n<p><a href=\"https://github.com/ktorio/ktor-documentation/tree/2.2.3/codeSnippets/snippets/client-websockets\" rel=\"nofollow noreferrer\">Client webSockets code example</a></p>\n"},{"tags":[],"owner":{"account_id":505477,"reputation":130,"user_id":1376280,"display_name":"MadeInChina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683019262,"creation_date":1683019262,"answer_id":76153449,"question_id":75694002,"body_markdown":"same issue, gradle config below\r\n\r\n    dependencies {\r\n        implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-swing:1.6.4&quot;)\r\n        implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4&quot;)\r\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.21&quot;)\r\n    \r\n        implementation(&quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.5.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-serialization-kotlinx-json:2.3.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-serialization-jvm:2.3.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-client-cio:2.3.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-client-core:2.3.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-client-auth:2.3.0&quot;)\r\n        implementation(&quot;io.ktor:ktor-client-content-negotiation:2.3.0&quot;)\r\n    }\r\n\r\nand fixed by \r\n\r\n    configurations.all {\r\n        exclude(&quot;org.slf4j&quot;, &quot;slf4j-api&quot;)\r\n    }\r\n\r\n","title":"Problem with ktor client in Intellij Idea plugin development?","body":"<p>same issue, gradle config below</p>\n<pre><code>dependencies {\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-swing:1.6.4&quot;)\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.21&quot;)\n\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.5.0&quot;)\n    implementation(&quot;io.ktor:ktor-serialization-kotlinx-json:2.3.0&quot;)\n    implementation(&quot;io.ktor:ktor-serialization-jvm:2.3.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-cio:2.3.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-core:2.3.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-auth:2.3.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-content-negotiation:2.3.0&quot;)\n}\n</code></pre>\n<p>and fixed by</p>\n<pre><code>configurations.all {\n    exclude(&quot;org.slf4j&quot;, &quot;slf4j-api&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":14398683,"reputation":505,"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683019262,"creation_date":1678438663,"question_id":75694002,"body_markdown":"I am developing a plugin for IntelliJ Idea \r\nI want to use Ktor Client to use `websocket` feature\r\n```\r\nval client = HttpClient(CIO) {\r\n    install(WebSockets)\r\n}\r\n```\r\n\r\nwhen I send a websocket request \r\n```kotlin\r\nclient.webSocket(...)\r\n```\r\nthis exception will be thrown\r\n```\r\njava.lang.LinkageError: loader constraint violation: when resolving method &#39;org.slf4j.ILoggerFactory org.slf4j.impl.StaticLoggerBinder.getLoggerFactory()&#39; the class loader com.intellij.ide.plugins.cl.PluginClassLoader @a02df19 of the current class, org/slf4j/LoggerFactory, and the class loader com.intellij.util.lang.PathClassLoader @2ac1fdc4 for the method&#39;s defining class, org/slf4j/impl/StaticLoggerBinder, have different Class objects for the type org/slf4j/ILoggerFactory used in the signature (org.slf4j.LoggerFactory is in unnamed module of loader com.intellij.ide.plugins.cl.PluginClassLoader @a02df19, parent loader &#39;bootstrap&#39;; org.slf4j.impl.StaticLoggerBinder is in unnamed module of loader com.intellij.util.lang.PathClassLoader @2ac1fdc4)\r\n\tat org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:423)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\r\n\tat io.ktor.util.logging.KtorSimpleLoggerJvmKt.KtorSimpleLogger(KtorSimpleLoggerJvm.kt:10)\r\n\tat io.ktor.client.plugins.websocket.WebSocketsKt.&lt;clinit&gt;(WebSockets.kt:22)\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invokeSuspend(WebSockets.kt:162)\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceedWith(SuspendFunctionGun.kt:88)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invokeSuspend(HttpCallValidator.kt:126)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invokeSuspend(HttpRequestLifecycle.kt:35)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.execute$ktor_utils(SuspendFunctionGun.kt:98)\r\n\tat io.ktor.util.pipeline.Pipeline.execute(Pipeline.kt:77)\r\n\tat io.ktor.client.HttpClient.execute$ktor_client_core(HttpClient.kt:191)\r\n\tat io.ktor.client.statement.HttpStatement.executeUnsafe(HttpStatement.kt:108)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:243)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:119)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:137)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket$default(builders.kt:132)\r\n\tat ir.amirab.debugboard.ideaplugin.Backend$initiateWebsocket$1.invokeSuspend(Backend.kt:70)\r\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\r\njava.lang.NoClassDefFoundError: Could not initialize class io.ktor.client.plugins.websocket.WebSocketsKt\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invokeSuspend(WebSockets.kt:162)\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\r\n\tat io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceedWith(SuspendFunctionGun.kt:88)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invokeSuspend(HttpCallValidator.kt:126)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\r\n\tat io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invokeSuspend(HttpRequestLifecycle.kt:35)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\r\n\tat io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\r\n\tat io.ktor.util.pipeline.SuspendFunctionGun.execute$ktor_utils(SuspendFunctionGun.kt:98)\r\n\tat io.ktor.util.pipeline.Pipeline.execute(Pipeline.kt:77)\r\n\tat io.ktor.client.HttpClient.execute$ktor_client_core(HttpClient.kt:191)\r\n\tat io.ktor.client.statement.HttpStatement.executeUnsafe(HttpStatement.kt:108)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:243)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:119)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:137)\r\n\tat io.ktor.client.plugins.websocket.BuildersKt.webSocket$default(builders.kt:132)\r\n\tat ir.amirab.debugboard.ideaplugin.Backend$initiateWebsocket$1.invokeSuspend(Backend.kt:70)\r\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\r\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\r\n```\r\n\r\nI also test ktor server. it also give me same Exception!\r\nMy question is \r\n- Is it valid to use `ktor` in idea plugins?\r\n- If thats ok then what I have to do to fix this?\r\n\r\nI used these versions\r\n```\r\nkotlinVersion = &quot;1.8.0&quot;\r\nideaPluginVersion = &quot;1.13.1&quot;\r\nktorVersion = &quot;2.2.2&quot;\r\n```\r\nhere is my full build.gradle.kts\r\n```kotlin\r\nplugins {\r\n    id(&quot;java&quot;)\r\n    id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.8.0&quot;\r\n    id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.1&quot;\r\n}\r\n\r\ngroup = &quot;com.example&quot;\r\nversion = &quot;1.0-SNAPSHOT&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\n// Configure Gradle IntelliJ Plugin\r\n// Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\r\nintellij {\r\n    version.set(&quot;2022.1.4&quot;)\r\n    type.set(&quot;IC&quot;) // Target IDE Platform\r\n\r\n    plugins.set(listOf(/* Plugin Dependencies */))\r\n}\r\n\r\n\r\ndependencies {\r\n    val ktorVersion = &quot;2.2.2&quot;\r\n    implementation(&quot;io.ktor:ktor-client-core:$ktorVersion&quot;)\r\n    implementation(&quot;io.ktor:ktor-client-cio:$ktorVersion&quot;)\r\n    implementation(&quot;io.ktor:ktor-client-websockets:$ktorVersion&quot;)\r\n}\r\n\r\ntasks {\r\n    // Set the JVM compatibility versions\r\n    withType&lt;JavaCompile&gt; {\r\n        sourceCompatibility = &quot;11&quot;\r\n        targetCompatibility = &quot;11&quot;\r\n    }\r\n    withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt; {\r\n        kotlinOptions.jvmTarget = &quot;11&quot;\r\n    }\r\n\r\n    patchPluginXml {\r\n        sinceBuild.set(&quot;221&quot;)\r\n        untilBuild.set(&quot;231.*&quot;)\r\n    }\r\n\r\n    signPlugin {\r\n        certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\r\n        privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\r\n        password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\r\n    }\r\n\r\n    publishPlugin {\r\n        token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n##### UPDATE:\r\nit seems when I add ktor dependencies \r\n```\r\norg.slf4j.LoggerFactory.getILoggerFactory()\r\n```\r\nthis code will throw that exception even if I don&#39;t use ktor at all!\r\n\r\n#### UPDATE:\r\nI temporary add this \r\n```kotlin \r\nconfigurations.all { \r\n    exclude(&quot;org.slf4j&quot;, &quot;slf4j-api&quot;)\r\n}\r\n```\r\n to build.gradle.kts and fixed my problem but I don&#39;t know is it practical but at least works!\r\n\r\n","title":"Problem with ktor client in Intellij Idea plugin development?","body":"<p>I am developing a plugin for IntelliJ Idea\nI want to use Ktor Client to use <code>websocket</code> feature</p>\n<pre><code>val client = HttpClient(CIO) {\n    install(WebSockets)\n}\n</code></pre>\n<p>when I send a websocket request</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>client.webSocket(...)\n</code></pre>\n<p>this exception will be thrown</p>\n<pre><code>java.lang.LinkageError: loader constraint violation: when resolving method 'org.slf4j.ILoggerFactory org.slf4j.impl.StaticLoggerBinder.getLoggerFactory()' the class loader com.intellij.ide.plugins.cl.PluginClassLoader @a02df19 of the current class, org/slf4j/LoggerFactory, and the class loader com.intellij.util.lang.PathClassLoader @2ac1fdc4 for the method's defining class, org/slf4j/impl/StaticLoggerBinder, have different Class objects for the type org/slf4j/ILoggerFactory used in the signature (org.slf4j.LoggerFactory is in unnamed module of loader com.intellij.ide.plugins.cl.PluginClassLoader @a02df19, parent loader 'bootstrap'; org.slf4j.impl.StaticLoggerBinder is in unnamed module of loader com.intellij.util.lang.PathClassLoader @2ac1fdc4)\n    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:423)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\n    at io.ktor.util.logging.KtorSimpleLoggerJvmKt.KtorSimpleLogger(KtorSimpleLoggerJvm.kt:10)\n    at io.ktor.client.plugins.websocket.WebSocketsKt.&lt;clinit&gt;(WebSockets.kt:22)\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invokeSuspend(WebSockets.kt:162)\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceedWith(SuspendFunctionGun.kt:88)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invokeSuspend(HttpCallValidator.kt:126)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invokeSuspend(HttpRequestLifecycle.kt:35)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.util.pipeline.SuspendFunctionGun.execute$ktor_utils(SuspendFunctionGun.kt:98)\n    at io.ktor.util.pipeline.Pipeline.execute(Pipeline.kt:77)\n    at io.ktor.client.HttpClient.execute$ktor_client_core(HttpClient.kt:191)\n    at io.ktor.client.statement.HttpStatement.executeUnsafe(HttpStatement.kt:108)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:243)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:119)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:137)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket$default(builders.kt:132)\n    at ir.amirab.debugboard.ideaplugin.Backend$initiateWebsocket$1.invokeSuspend(Backend.kt:70)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\njava.lang.NoClassDefFoundError: Could not initialize class io.ktor.client.plugins.websocket.WebSocketsKt\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invokeSuspend(WebSockets.kt:162)\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\n    at io.ktor.client.plugins.websocket.WebSockets$Plugin$install$1.invoke(WebSockets.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceedWith(SuspendFunctionGun.kt:88)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invokeSuspend(HttpCallValidator.kt:126)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\n    at io.ktor.client.plugins.HttpCallValidator$Companion$install$1.invoke(HttpCallValidator.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invokeSuspend(HttpRequestLifecycle.kt:35)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\n    at io.ktor.client.plugins.HttpRequestLifecycle$Plugin$install$1.invoke(HttpRequestLifecycle.kt)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:120)\n    at io.ktor.util.pipeline.SuspendFunctionGun.proceed(SuspendFunctionGun.kt:78)\n    at io.ktor.util.pipeline.SuspendFunctionGun.execute$ktor_utils(SuspendFunctionGun.kt:98)\n    at io.ktor.util.pipeline.Pipeline.execute(Pipeline.kt:77)\n    at io.ktor.client.HttpClient.execute$ktor_client_core(HttpClient.kt:191)\n    at io.ktor.client.statement.HttpStatement.executeUnsafe(HttpStatement.kt:108)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:243)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:119)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket(builders.kt:137)\n    at io.ktor.client.plugins.websocket.BuildersKt.webSocket$default(builders.kt:132)\n    at ir.amirab.debugboard.ideaplugin.Backend$initiateWebsocket$1.invokeSuspend(Backend.kt:70)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\n</code></pre>\n<p>I also test ktor server. it also give me same Exception!\nMy question is</p>\n<ul>\n<li>Is it valid to use <code>ktor</code> in idea plugins?</li>\n<li>If thats ok then what I have to do to fix this?</li>\n</ul>\n<p>I used these versions</p>\n<pre><code>kotlinVersion = &quot;1.8.0&quot;\nideaPluginVersion = &quot;1.13.1&quot;\nktorVersion = &quot;2.2.2&quot;\n</code></pre>\n<p>here is my full build.gradle.kts</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;java&quot;)\n    id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.8.0&quot;\n    id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.1&quot;\n}\n\ngroup = &quot;com.example&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n    mavenCentral()\n}\n\n// Configure Gradle IntelliJ Plugin\n// Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\nintellij {\n    version.set(&quot;2022.1.4&quot;)\n    type.set(&quot;IC&quot;) // Target IDE Platform\n\n    plugins.set(listOf(/* Plugin Dependencies */))\n}\n\n\ndependencies {\n    val ktorVersion = &quot;2.2.2&quot;\n    implementation(&quot;io.ktor:ktor-client-core:$ktorVersion&quot;)\n    implementation(&quot;io.ktor:ktor-client-cio:$ktorVersion&quot;)\n    implementation(&quot;io.ktor:ktor-client-websockets:$ktorVersion&quot;)\n}\n\ntasks {\n    // Set the JVM compatibility versions\n    withType&lt;JavaCompile&gt; {\n        sourceCompatibility = &quot;11&quot;\n        targetCompatibility = &quot;11&quot;\n    }\n    withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt; {\n        kotlinOptions.jvmTarget = &quot;11&quot;\n    }\n\n    patchPluginXml {\n        sinceBuild.set(&quot;221&quot;)\n        untilBuild.set(&quot;231.*&quot;)\n    }\n\n    signPlugin {\n        certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\n        privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\n        password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\n    }\n\n    publishPlugin {\n        token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\n    }\n}\n\n</code></pre>\n<h5>UPDATE:</h5>\n<p>it seems when I add ktor dependencies</p>\n<pre><code>org.slf4j.LoggerFactory.getILoggerFactory()\n</code></pre>\n<p>this code will throw that exception even if I don't use ktor at all!</p>\n<h4>UPDATE:</h4>\n<p>I temporary add this</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>configurations.all { \n    exclude(&quot;org.slf4j&quot;, &quot;slf4j-api&quot;)\n}\n</code></pre>\n<p>to build.gradle.kts and fixed my problem but I don't know is it practical but at least works!</p>\n"},{"tags":["java","jpa","named-query"],"answers":[{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1261499022,"creation_date":1261499022,"answer_id":1947445,"question_id":1947323,"body_markdown":"You must pass in a list of strings, not a single string. JPA doesn&#39;t parse your values, you must split them yourself.","title":"JPA setParameter when dealing with &quot;NOT IN (:param)&quot;","body":"<p>You must pass in a list of strings, not a single string. JPA doesn't parse your values, you must split them yourself.</p>\n"},{"comments":[{"owner":{"account_id":39603,"reputation":2007,"user_id":114308,"accept_rate":50,"display_name":"rafa.ferreira"},"score":0,"creation_date":1261501011,"post_id":1947450,"comment_id":1858500,"body_markdown":"KLE: from where did you get this 2 bullets ?","body":"KLE: from where did you get this 2 bullets ?"},{"owner":{"account_id":49175,"reputation":23807,"user_id":146347,"accept_rate":100,"display_name":"KLE"},"score":1,"creation_date":1261506372,"post_id":1947450,"comment_id":1859149,"body_markdown":"@Castanho The **bullet numbers 1 and 2?** Just write &#39;1.&#39; on a new line, preceeded by an empty line. [The numbers are calculated automatically, you can write &#39;1.&#39; for all of them : Wiki style]. When writing a question or answer, the right column gives you so many options... ;-)","body":"@Castanho The <b>bullet numbers 1 and 2?</b> Just write &#39;1.&#39; on a new line, preceeded by an empty line. [The numbers are calculated automatically, you can write &#39;1.&#39; for all of them : Wiki style]. When writing a question or answer, the right column gives you so many options... ;-)"},{"owner":{"account_id":364237,"reputation":2712,"user_id":708510,"accept_rate":0,"display_name":"Jeff_Alieffson"},"score":1,"creation_date":1548336509,"post_id":1947450,"comment_id":95510909,"body_markdown":"In EclipseLink you must write list param without brackets, otherwise you will get an exception &quot;You have attempted to set a value of type class java.util.Vector for parameter with expected type of bla.. bla..&quot;. Write this way:\n&quot;select * from Cars where Cars.color NOT IN :color_params&quot;","body":"In EclipseLink you must write list param without brackets, otherwise you will get an exception &quot;You have attempted to set a value of type class java.util.Vector for parameter with expected type of bla.. bla..&quot;. Write this way: &quot;select * from Cars where Cars.color NOT IN :color_params&quot;"}],"tags":[],"owner":{"account_id":49175,"reputation":23807,"user_id":146347,"accept_rate":100,"display_name":"KLE"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1261499757,"creation_date":1261499047,"answer_id":1947450,"question_id":1947323,"body_markdown":"You are supposed to pass a List.\r\n\r\n    List&lt;String&gt; colors = ....;\r\n    String query = &quot;select * from Cars where Cars.color NOT IN (:color_params)&quot;;\r\n    Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\r\n    params.put(&quot;color_params&quot;, colors);\r\n    // ... execute the query with the param.\r\n\r\nYou could also do:\r\n\r\n    query.setParameter(&quot;color_params&quot;, colors);\r\n\r\n------------\r\n\r\nAs a general rule, it is often prefered to pass parameters to a fixed query, instead of customizing the String. The advantages could be:\r\n\r\n1. **Reduced parsing**: JPA implementation (at least Hibernate) have a hard work parsing each query. So the parsed query goes into a cache, to be reused. If the query string is build at runtime from parameters, it might never be twice the same, so a lot of time, computing power and cache memory are lost. But if you use the same query string with different parameters, bingo : fast, low memory use, low cpu requirement.\r\n2. **Prevent SQL injection**. This guarantee is offered if you use parameters. If you build your query string with the parameters, you have to provide yourself this guarantee ...!\r\n","title":"JPA setParameter when dealing with &quot;NOT IN (:param)&quot;","body":"<p>You are supposed to pass a List.</p>\n\n<pre><code>List&lt;String&gt; colors = ....;\nString query = \"select * from Cars where Cars.color NOT IN (:color_params)\";\nMap&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\nparams.put(\"color_params\", colors);\n// ... execute the query with the param.\n</code></pre>\n\n<p>You could also do:</p>\n\n<pre><code>query.setParameter(\"color_params\", colors);\n</code></pre>\n\n<hr>\n\n<p>As a general rule, it is often prefered to pass parameters to a fixed query, instead of customizing the String. The advantages could be:</p>\n\n<ol>\n<li><strong>Reduced parsing</strong>: JPA implementation (at least Hibernate) have a hard work parsing each query. So the parsed query goes into a cache, to be reused. If the query string is build at runtime from parameters, it might never be twice the same, so a lot of time, computing power and cache memory are lost. But if you use the same query string with different parameters, bingo : fast, low memory use, low cpu requirement.</li>\n<li><strong>Prevent SQL injection</strong>. This guarantee is offered if you use parameters. If you build your query string with the parameters, you have to provide yourself this guarantee ...!</li>\n</ol>\n"}],"owner":{"account_id":39603,"reputation":2007,"user_id":114308,"accept_rate":50,"display_name":"rafa.ferreira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39564,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":1947450,"answer_count":2,"score":8,"last_activity_date":1683019236,"creation_date":1261497922,"question_id":1947323,"body_markdown":"I&#39;m trying to set a parameter in my query, for example:\r\n\r\n    select * from Cars where Cars.color NOT IN (:color_params)\r\n\r\n\r\nAnd when I&#39;m adding the parameter in my JavaClass is like:\r\n\r\n    ...\r\n    query.setParameter(&quot;color_params&quot;, &quot;RED,BLUE&quot;);\r\n    ...\r\n\r\nAnd this is not working, is only working with **only one parameter**.&lt;br&gt;\r\nI&#39;ve tried with `&quot;&#39;RED&#39;,&#39;BLUE&#39;&quot;`\r\nand is not working to.\r\n\r\nIf I put my parameters in the query is working for example:\r\n\r\n    select * from Cars where Cars.color NOT IN (&#39;RED&#39;,&#39;BLUE&#39;)\r\n\r\n\r\nWhat I&#39;m doing wrong?\r\n","title":"JPA setParameter when dealing with &quot;NOT IN (:param)&quot;","body":"<p>I'm trying to set a parameter in my query, for example:</p>\n<pre><code>select * from Cars where Cars.color NOT IN (:color_params)\n</code></pre>\n<p>And when I'm adding the parameter in my JavaClass is like:</p>\n<pre><code>...\nquery.setParameter(&quot;color_params&quot;, &quot;RED,BLUE&quot;);\n...\n</code></pre>\n<p>And this is not working, is only working with <strong>only one parameter</strong>.<br>\nI've tried with <code>&quot;'RED','BLUE'&quot;</code>\nand is not working to.</p>\n<p>If I put my parameters in the query is working for example:</p>\n<pre><code>select * from Cars where Cars.color NOT IN ('RED','BLUE')\n</code></pre>\n<p>What I'm doing wrong?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","hibernate-mapping"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1682709375,"post_id":76131524,"comment_id":134263846,"body_markdown":"If your function is not related to a table respective entity then don&#39;t use NamedStoredProcudureQuery annotation. Use Procedure annotation instead. If you share the function code then I can provide a Java code example.","body":"If your function is not related to a table respective entity then don&#39;t use NamedStoredProcudureQuery annotation. Use Procedure annotation instead. If you share the function code then I can provide a Java code example."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682715217,"post_id":76131524,"comment_id":134264869,"body_markdown":"https://howtodoinjava.com/hibernate/jpa-21-namedstoredprocedurequery-annotation-example/","body":"<a href=\"https://howtodoinjava.com/hibernate/jpa-21-namedstoredprocedurequery-annotation-example/\" rel=\"nofollow noreferrer\">howtodoinjava.com/hibernate/&hellip;</a>"},{"owner":{"account_id":6085757,"reputation":1307,"user_id":4749871,"accept_rate":80,"display_name":"Ant&#243;nio Quadrado"},"score":0,"creation_date":1683016283,"post_id":76131524,"comment_id":134298382,"body_markdown":"@Mar-Z Not sure if I understood what you mean. I cannot provide the postgres function code but it&#39;s a function called with arguments which should have the results mapped to an entity.","body":"@Mar-Z Not sure if I understood what you mean. I cannot provide the postgres function code but it&#39;s a function called with arguments which should have the results mapped to an entity."}],"answers":[{"comments":[{"owner":{"account_id":6085757,"reputation":1307,"user_id":4749871,"accept_rate":80,"display_name":"Ant&#243;nio Quadrado"},"score":0,"creation_date":1683038510,"post_id":76153423,"comment_id":134303359,"body_markdown":"To be honest, I am not sure if this is could be a solution or not. I am fairly new to JPA and I am trying to improve a project that I inherited. My main concern here is that we are using this &quot;false&quot; entity in some generic implementations that I am not sure could deal with an object that it&#39;s not an JPA entity in the same. I will have to give it a try and see what results I get.","body":"To be honest, I am not sure if this is could be a solution or not. I am fairly new to JPA and I am trying to improve a project that I inherited. My main concern here is that we are using this &quot;false&quot; entity in some generic implementations that I am not sure could deal with an object that it&#39;s not an JPA entity in the same. I will have to give it a try and see what results I get."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683019080,"creation_date":1683019080,"answer_id":76153423,"question_id":76131524,"body_markdown":"What I meant is that if you have no table in the database then you should not use the entity class for results. Because in Spring Boot JPA each entity needs a database table.\r\n\r\nIf your database function has a complex data structure for results (not primitive like number or string) then you should define a POJO class (like entity but not annotated as entity). And use it for the function call. Something like this:\r\n\r\n    @Procedure(procedureName = &quot;get_employee_data&quot;)\r\n    Employee getEmloyeeData(Integer emloyeeId);\r\n\r\nPlease note: more configuration could be needed depending on your function output parameters definition. ","title":"Hibernate - Is it possible to have an entity based in a function result instead of a table?","body":"<p>What I meant is that if you have no table in the database then you should not use the entity class for results. Because in Spring Boot JPA each entity needs a database table.</p>\n<p>If your database function has a complex data structure for results (not primitive like number or string) then you should define a POJO class (like entity but not annotated as entity). And use it for the function call. Something like this:</p>\n<pre><code>@Procedure(procedureName = &quot;get_employee_data&quot;)\nEmployee getEmloyeeData(Integer emloyeeId);\n</code></pre>\n<p>Please note: more configuration could be needed depending on your function output parameters definition.</p>\n"}],"owner":{"account_id":6085757,"reputation":1307,"user_id":4749871,"accept_rate":80,"display_name":"Ant&#243;nio Quadrado"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683019080,"creation_date":1682699286,"question_id":76131524,"body_markdown":"I am using Hibernate 6 with SpringBoot 3 and I am trying to have an entity based in a function result rather than a table. From my research I was led to believe that something like the following would be valid:\r\n\r\n    @Entity\r\n    @NamedStoredProcedureQuery(\r\n        name = &quot;myFunction&quot;,\r\n        procedureName = &quot;my_function&quot;,\r\n        resultClasses = MyEntity.class,\r\n        parameters = {\r\n            @StoredProcedureParameter(name = &quot;param1&quot;, type = String.class, mode = ParameterMode.IN),\r\n            @StoredProcedureParameter(name = &quot;param2&quot;, type = Integer.class, mode = ParameterMode.IN),\r\n        }\r\n    )\r\n    public class MyEntity {\r\n        // entity fields and methods\r\n    }\r\n\r\nBut If I try to run the application I get the following:\r\n\r\n&gt; Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [MyEntity]\r\n\r\nI continued my research and later I tried something along the lines of:\r\n\r\n    @Entity\r\n    @NamedStoredProcedureQuery(\r\n      name = &quot;getEmployeeData&quot;,\r\n      procedureName = &quot;get_employee_data&quot;,\r\n      parameters = {\r\n        @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;p_employee_id&quot;, type = Integer.class),\r\n      },\r\n      resultSetMappings = &quot;employeeDataMapping&quot;\r\n    )\r\n    @SqlResultSetMapping(\r\n      name = &quot;employeeDataMapping&quot;,\r\n      classes = {\r\n        @ConstructorResult(\r\n          targetClass = Employee.class,\r\n          columns = {\r\n            @ColumnResult(name = &quot;id&quot;, type = Integer.class),\r\n            @ColumnResult(name = &quot;name&quot;, type = String.class),\r\n            @ColumnResult(name = &quot;age&quot;, type = Integer.class),\r\n            @ColumnResult(name = &quot;salary&quot;, type = BigDecimal.class),\r\n          }\r\n        )\r\n      }\r\n    )\r\n    public class Employee {\r\n      @Id\r\n      private Integer id;\r\n      \r\n      private String name;\r\n      \r\n      private Integer age;\r\n      \r\n      private BigDecimal salary;\r\n      \r\n    }\r\n\r\nThe result was exactly the same.\r\n\r\nFew notes:\r\n\r\n- The table does not exist, all I have to work with is this parameterized function in the db\r\n- Currently we have in place a very sketchy hack where we use `@Subselect` in conjunction with `@Filter` and an `Interceptor` to edit the `PreparedStatement` to be able to have this entity usable\r\n- My goal is to remove this hack and actually use the tools the framework provides but at this point I am wondering if this is in fact possible \r\n\r\nAny idea, advice or clue regarding the matter?\r\n\r\nThank you","title":"Hibernate - Is it possible to have an entity based in a function result instead of a table?","body":"<p>I am using Hibernate 6 with SpringBoot 3 and I am trying to have an entity based in a function result rather than a table. From my research I was led to believe that something like the following would be valid:</p>\n<pre><code>@Entity\n@NamedStoredProcedureQuery(\n    name = &quot;myFunction&quot;,\n    procedureName = &quot;my_function&quot;,\n    resultClasses = MyEntity.class,\n    parameters = {\n        @StoredProcedureParameter(name = &quot;param1&quot;, type = String.class, mode = ParameterMode.IN),\n        @StoredProcedureParameter(name = &quot;param2&quot;, type = Integer.class, mode = ParameterMode.IN),\n    }\n)\npublic class MyEntity {\n    // entity fields and methods\n}\n</code></pre>\n<p>But If I try to run the application I get the following:</p>\n<blockquote>\n<p>Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [MyEntity]</p>\n</blockquote>\n<p>I continued my research and later I tried something along the lines of:</p>\n<pre><code>@Entity\n@NamedStoredProcedureQuery(\n  name = &quot;getEmployeeData&quot;,\n  procedureName = &quot;get_employee_data&quot;,\n  parameters = {\n    @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;p_employee_id&quot;, type = Integer.class),\n  },\n  resultSetMappings = &quot;employeeDataMapping&quot;\n)\n@SqlResultSetMapping(\n  name = &quot;employeeDataMapping&quot;,\n  classes = {\n    @ConstructorResult(\n      targetClass = Employee.class,\n      columns = {\n        @ColumnResult(name = &quot;id&quot;, type = Integer.class),\n        @ColumnResult(name = &quot;name&quot;, type = String.class),\n        @ColumnResult(name = &quot;age&quot;, type = Integer.class),\n        @ColumnResult(name = &quot;salary&quot;, type = BigDecimal.class),\n      }\n    )\n  }\n)\npublic class Employee {\n  @Id\n  private Integer id;\n  \n  private String name;\n  \n  private Integer age;\n  \n  private BigDecimal salary;\n  \n}\n</code></pre>\n<p>The result was exactly the same.</p>\n<p>Few notes:</p>\n<ul>\n<li>The table does not exist, all I have to work with is this parameterized function in the db</li>\n<li>Currently we have in place a very sketchy hack where we use <code>@Subselect</code> in conjunction with <code>@Filter</code> and an <code>Interceptor</code> to edit the <code>PreparedStatement</code> to be able to have this entity usable</li>\n<li>My goal is to remove this hack and actually use the tools the framework provides but at this point I am wondering if this is in fact possible</li>\n</ul>\n<p>Any idea, advice or clue regarding the matter?</p>\n<p>Thank you</p>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683018875,"creation_date":1683018875,"answer_id":76153406,"question_id":76153077,"body_markdown":"There is no fixed rule. \r\n\r\nUnder the hood, OptQuest is making those decisions for you and it accounts for many different factors (max runs, number of replications, number of parallel processors available). They do not publish how this is done so you are stuck with a black-box.\r\n\r\nAlso note that the sequence will vary between experiments, even if everything stays fixed. NEVER rely on sequence of execution :)\r\n\r\nIf you ever need to have control over this, you&#39;d need to design a `CustomExperiment` and explicitly tell it how to vary your params for you. But that is not trivial...","title":"In which order do parameters change in ParametersVariation?","body":"<p>There is no fixed rule.</p>\n<p>Under the hood, OptQuest is making those decisions for you and it accounts for many different factors (max runs, number of replications, number of parallel processors available). They do not publish how this is done so you are stuck with a black-box.</p>\n<p>Also note that the sequence will vary between experiments, even if everything stays fixed. NEVER rely on sequence of execution :)</p>\n<p>If you ever need to have control over this, you'd need to design a <code>CustomExperiment</code> and explicitly tell it how to vary your params for you. But that is not trivial...</p>\n"}],"owner":{"account_id":27527886,"reputation":55,"user_id":21006896,"display_name":"FroggyJoggy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683018875,"creation_date":1683016371,"question_id":76153077,"body_markdown":"I am using AnyLogic and doing a ParameterVariation.\r\nI am currently interested in the way AnyLogic changes the parameters.\r\nLets say I have 3 parameters: \r\n\r\n`p_numbers`, `p_zipcode` and `p_floor` \r\n\r\n`p_numbers` is set that it starts at 1 and ends at 5 by a range of 1.\r\n\r\n`p_zipcode` is set that it starts at 1 and ends at 3 by a range of 1.\r\n\r\n`p_floor` is set that it starts at 1 and ends at 4 by a range of 1.\r\n\r\nSo is there a rule how the parameters get updated after one iteration?\r\n\r\nI know that it is possible to print it out in excel which I am currently doing but the experiment is going to run probably until tomorrow so I am just curious.","title":"In which order do parameters change in ParametersVariation?","body":"<p>I am using AnyLogic and doing a ParameterVariation.\nI am currently interested in the way AnyLogic changes the parameters.\nLets say I have 3 parameters:</p>\n<p><code>p_numbers</code>, <code>p_zipcode</code> and <code>p_floor</code></p>\n<p><code>p_numbers</code> is set that it starts at 1 and ends at 5 by a range of 1.</p>\n<p><code>p_zipcode</code> is set that it starts at 1 and ends at 3 by a range of 1.</p>\n<p><code>p_floor</code> is set that it starts at 1 and ends at 4 by a range of 1.</p>\n<p>So is there a rule how the parameters get updated after one iteration?</p>\n<p>I know that it is possible to print it out in excel which I am currently doing but the experiment is going to run probably until tomorrow so I am just curious.</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":14795454,"reputation":2021,"user_id":10685211,"display_name":"Musab Dogan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683018265,"creation_date":1683018265,"answer_id":76153325,"question_id":76152975,"body_markdown":"You can use the [script fields][1].\r\n\r\n    POST my_index/_bulk\r\n    { &quot;index&quot;: { &quot;_id&quot;: &quot;1&quot; } }\r\n    { &quot;my_boolean_field&quot;: true }\r\n    { &quot;index&quot;: { &quot;_id&quot;: &quot;2&quot; } }\r\n    { &quot;my_boolean_field&quot;: false }\r\n    { &quot;index&quot;: { &quot;_id&quot;: &quot;3&quot; } }\r\n    { &quot;my_boolean_field&quot;: true }\r\n    { &quot;index&quot;: { &quot;_id&quot;: &quot;4&quot; } }\r\n    { &quot;my_boolean_field&quot;: null }\r\n    \r\n    GET my_index/_search\r\n    {\r\n      &quot;query&quot;: {\r\n        &quot;match_all&quot;: {}\r\n      },\r\n      &quot;script_fields&quot;: {\r\n        &quot;translated_bool&quot;: {\r\n          &quot;script&quot;: {\r\n            &quot;lang&quot;: &quot;painless&quot;,\r\n            &quot;source&quot;: &quot;doc[&#39;my_boolean_field&#39;].size() == 0 ? &#39;No&#39; : (doc[&#39;my_boolean_field&#39;].value == true ? &#39;Yes&#39; : &#39;No&#39;)&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/7.10/search-fields.html#script-fields\r\n  [2]: https://i.stack.imgur.com/BlsAS.png","title":"Translate result to Yes or No while querying boolean field in elastisearch","body":"<p>You can use the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.10/search-fields.html#script-fields\" rel=\"nofollow noreferrer\">script fields</a>.</p>\n<pre><code>POST my_index/_bulk\n{ &quot;index&quot;: { &quot;_id&quot;: &quot;1&quot; } }\n{ &quot;my_boolean_field&quot;: true }\n{ &quot;index&quot;: { &quot;_id&quot;: &quot;2&quot; } }\n{ &quot;my_boolean_field&quot;: false }\n{ &quot;index&quot;: { &quot;_id&quot;: &quot;3&quot; } }\n{ &quot;my_boolean_field&quot;: true }\n{ &quot;index&quot;: { &quot;_id&quot;: &quot;4&quot; } }\n{ &quot;my_boolean_field&quot;: null }\n\nGET my_index/_search\n{\n  &quot;query&quot;: {\n    &quot;match_all&quot;: {}\n  },\n  &quot;script_fields&quot;: {\n    &quot;translated_bool&quot;: {\n      &quot;script&quot;: {\n        &quot;lang&quot;: &quot;painless&quot;,\n        &quot;source&quot;: &quot;doc['my_boolean_field'].size() == 0 ? 'No' : (doc['my_boolean_field'].value == true ? 'Yes' : 'No')&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BlsAS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BlsAS.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":976472,"reputation":1964,"user_id":997482,"accept_rate":46,"display_name":"Lalit Chattar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76153325,"answer_count":1,"score":0,"last_activity_date":1683018265,"creation_date":1683015543,"question_id":76152975,"body_markdown":"I am new to elastic search. I am having field mapping which is of type boolean and indexed data is true or false. When I query data, It returns true or false but I want to translate it to Yes if the value is true and No if the value is false or empty. \r\n\r\nI searched on Google and found the runtime-mapping method https://www.elastic.co/guide/en/elasticsearch/reference/current/boolean.html but we are using ES 7.10.2 (JAVA) version which does not support this method. \r\n\r\nAny other way without changing indexed data we can get Yes or No value in the query result?\r\n\r\n","title":"Translate result to Yes or No while querying boolean field in elastisearch","body":"<p>I am new to elastic search. I am having field mapping which is of type boolean and indexed data is true or false. When I query data, It returns true or false but I want to translate it to Yes if the value is true and No if the value is false or empty.</p>\n<p>I searched on Google and found the runtime-mapping method <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/boolean.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/boolean.html</a> but we are using ES 7.10.2 (JAVA) version which does not support this method.</p>\n<p>Any other way without changing indexed data we can get Yes or No value in the query result?</p>\n"},{"tags":["java","selenium","xpath"],"answers":[{"comments":[{"owner":{"account_id":5254406,"reputation":1108,"user_id":4197679,"accept_rate":79,"display_name":"Ashok kumar Ganesan"},"score":0,"creation_date":1635840873,"post_id":37542997,"comment_id":123393261,"body_markdown":"In my case, the text I get is dynamic either with single quotes or without. How would we handle dynamically","body":"In my case, the text I get is dynamic either with single quotes or without. How would we handle dynamically"}],"tags":[],"owner":{"account_id":8279362,"reputation":741,"user_id":6224544,"display_name":"k.s. Karthik"},"comment_count":1,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1530019227,"creation_date":1464690007,"answer_id":37542997,"question_id":37542773,"body_markdown":"Use the xpath as shown below:\r\n\r\n    driver.findElements(By.xpath(&quot;//input[contains(@text,\\&quot;WE&#39;d\\&quot;)]&quot;));\r\n\r\nHope this helps.","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>Use the xpath as shown below:</p>\n\n<pre><code>driver.findElements(By.xpath(\"//input[contains(@text,\\\"WE'd\\\")]\"));\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":3592606,"reputation":88565,"user_id":2998271,"accept_rate":100,"display_name":"har07"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1464690018,"creation_date":1464690018,"answer_id":37543002,"question_id":37542773,"body_markdown":"You have to use double-quotes as your *XPath string literal delimiter*, since XPath 1.0 doesn&#39;t provide a way of escaping quotes. In addition to that, you can escape the double-quotes in Java, to avoid it from conflicting with your *Java string delimiter*, which also use double-quotes :\r\n\r\n    driver.findelements(By.xpath(&quot;//input[@text=\\&quot;WE&#39;d like to hear from you\\&quot;]&quot;))","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>You have to use double-quotes as your <em>XPath string literal delimiter</em>, since XPath 1.0 doesn't provide a way of escaping quotes. In addition to that, you can escape the double-quotes in Java, to avoid it from conflicting with your <em>Java string delimiter</em>, which also use double-quotes :</p>\n\n<pre><code>driver.findelements(By.xpath(\"//input[@text=\\\"WE'd like to hear from you\\\"]\"))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11554585,"reputation":71,"user_id":8466128,"display_name":"Moin"},"score":0,"creation_date":1507204953,"post_id":46581821,"comment_id":80123056,"body_markdown":"if the above solution doesn&#39;t work then use the below solution using escape sequence.\n\nxpath: //li[.=\\&quot;Manager of Workflow Initiator&#39;s Manager\\&quot;]\n\nHere we are treating the whole text as a string.","body":"if the above solution doesn&#39;t work then use the below solution using escape sequence.  xpath: //li[.=\\&quot;Manager of Workflow Initiator&#39;s Manager\\&quot;]  Here we are treating the whole text as a string."},{"owner":{"account_id":343766,"reputation":7643,"user_id":675682,"display_name":"Karen Zilles"},"score":0,"creation_date":1661278301,"post_id":46581821,"comment_id":129732669,"body_markdown":"This is a great general solution that can be used for a function that will escape arbitrary strings that might contain single and double quotes.","body":"This is a great general solution that can be used for a function that will escape arbitrary strings that might contain single and double quotes."}],"tags":[],"owner":{"account_id":11554585,"reputation":71,"user_id":8466128,"display_name":"Moin"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1539594286,"creation_date":1507194672,"answer_id":46581821,"question_id":37542773,"body_markdown":"The Escape character usage does not serve the purpose. I tried the concatenation function and it worked like a charm. Please see the below xpath.\r\n\r\n&gt;tag: li Manager of Workflow Initiator&#39;s Manager /li\r\n\r\nConcatenate function and split the string as –\r\n\r\n    concat(&#39;Manager of Workflow Initiator&#39;,&quot;&#39;&quot;,&#39;s Manager&#39;)\r\n\r\n**Single quote** is kept in **double quote** while other characters are kept in single quotes..\r\n\r\nSo XPath looks as –\r\n\r\n    //li[.=concat(&#39;Manager of Workflow Initiator&#39;,&quot;&#39;&quot;,&#39;s Manager&#39;)]","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>The Escape character usage does not serve the purpose. I tried the concatenation function and it worked like a charm. Please see the below xpath.</p>\n\n<blockquote>\n  <p>tag: li Manager of Workflow Initiator's Manager /li</p>\n</blockquote>\n\n<p>Concatenate function and split the string as –</p>\n\n<pre><code>concat('Manager of Workflow Initiator',\"'\",'s Manager')\n</code></pre>\n\n<p><strong>Single quote</strong> is kept in <strong>double quote</strong> while other characters are kept in single quotes..</p>\n\n<p>So XPath looks as –</p>\n\n<pre><code>//li[.=concat('Manager of Workflow Initiator',\"'\",'s Manager')]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11554585,"reputation":71,"user_id":8466128,"display_name":"Moin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539594294,"creation_date":1507205017,"answer_id":46585161,"question_id":37542773,"body_markdown":"if the above solution doesn&#39;t work then use the below solution using escape sequence.\r\n\r\n    xpath: //li[.=\\&quot;Manager of Workflow Initiator&#39;s Manager\\&quot;]\r\n\r\nHere we are treating the whole text as a string using the escape character","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>if the above solution doesn't work then use the below solution using escape sequence.</p>\n\n<pre><code>xpath: //li[.=\\\"Manager of Workflow Initiator's Manager\\\"]\n</code></pre>\n\n<p>Here we are treating the whole text as a string using the escape character</p>\n"},{"tags":[],"owner":{"account_id":17949252,"reputation":1,"user_id":13042729,"display_name":"3ven"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584549936,"creation_date":1584549463,"answer_id":60743827,"question_id":37542773,"body_markdown":"I Encountered a similar situation where I need to write an xpath for an element shown below:\r\n\r\n**Element:**\r\n\r\n    &lt;img src=&quot;webwb/pzspacer.gif!!.gif&quot; class=&quot;inactvIcon&quot; data-ctl=&quot;[&quot;DatePicker&quot;]&quot; style=&quot;cursor:pointer;&quot;&gt;\r\n\r\nI was able to grep the element using below Xpath, where I used the backslash to escape the characters [ and  &quot;.\r\n\r\n**Xpath** : `//img[@data-ctl=&#39;\\[\\&quot;DatePicker\\&quot;\\]&#39;]`\r\n\r\nHope this helps.","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>I Encountered a similar situation where I need to write an xpath for an element shown below:</p>\n\n<p><strong>Element:</strong></p>\n\n<pre><code>&lt;img src=\"webwb/pzspacer.gif!!.gif\" class=\"inactvIcon\" data-ctl=\"[\"DatePicker\"]\" style=\"cursor:pointer;\"&gt;\n</code></pre>\n\n<p>I was able to grep the element using below Xpath, where I used the backslash to escape the characters [ and  \".</p>\n\n<p><strong>Xpath</strong> : <code>//img[@data-ctl='\\[\\\"DatePicker\\\"\\]']</code></p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":6380598,"reputation":2929,"user_id":4950185,"accept_rate":64,"display_name":"Gayan Kavirathne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622821783,"creation_date":1622821783,"answer_id":67840271,"question_id":37542773,"body_markdown":"None of the above approaches cover a situation where both Quote and Apostrophe cos exist. I&#39;ve created a function for that,\r\n\r\n    driver.findElements(By.xpath(String.format(&quot;//input[contains(@text,%s))]&quot;),escapeQuotes(textVal));\r\n\r\nImplemenatation of the escape Quote.\r\n\r\n    private String escapeQuotes(String text) {\r\n\r\n\t\t// If we don&#39;t have any Quote then enquote string in Quote\r\n\t\tif (!text.contains(&quot;\\&quot;&quot;)) {\r\n\t\t\treturn String.format(&quot;\\&quot;%s\\&quot;&quot;, text);\r\n\t\t}\r\n\r\n\t\t// If we have some Quote but no Apostrophe then enquote in Apostrophe\r\n\t\tif (!text.contains(&quot;&#39;&quot;)) {\r\n\t\t\treturn String.format(&quot;&#39;%s&#39;&quot;, text);\r\n\t\t}\r\n\r\n\t\t// If input is like Administr&quot;ati&#39;on then we have both &quot; and &#39; in the string so must use Concat\r\n\t\t// we will be building the xPath like below and let the browser xPath evaluation to handle the concatenation\r\n\t\t// output : concat(&#39;Administr\\&quot;&#39;,\\&quot;ati&#39;on\\&quot;)\r\n\t\tStringBuilder sb = new StringBuilder(&quot;concat(&quot;);\r\n\r\n\t\t// Looking for &quot; as they are LESS likely than &#39;\r\n\t\tint lastPos = 0;\r\n\t\tint nextPos = text.indexOf(&quot;\\&quot;&quot;);\r\n\t\twhile (nextPos != -1) {\r\n\t\t\t// If this is not the first time through the loop then seperate arguments with ,\r\n\t\t\tif (lastPos != 0) {\r\n\t\t\t\tsb.append(&quot;,&quot;);\r\n\t\t\t}\r\n\r\n\t\t\tsb.append(String.format(&quot;\\&quot;%s\\&quot;,&#39;\\&quot;&#39;&quot;, text.substring(lastPos, nextPos - lastPos)));\r\n\t\t\tlastPos = ++nextPos;\r\n\r\n\t\t\t// Find next occurrence\r\n\t\t\tnextPos = text.indexOf(&quot;\\&quot;&quot;, lastPos);\r\n\t\t}\r\n\r\n\t\tsb.append(String.format(&quot;,\\&quot;%s\\&quot;)&quot;, text.substring(lastPos)));\r\n\t\treturn sb.toString();\r\n\t}\r\n\r\n","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>None of the above approaches cover a situation where both Quote and Apostrophe cos exist. I've created a function for that,</p>\n<pre><code>driver.findElements(By.xpath(String.format(&quot;//input[contains(@text,%s))]&quot;),escapeQuotes(textVal));\n</code></pre>\n<p>Implemenatation of the escape Quote.</p>\n<pre><code>private String escapeQuotes(String text) {\n\n    // If we don't have any Quote then enquote string in Quote\n    if (!text.contains(&quot;\\&quot;&quot;)) {\n        return String.format(&quot;\\&quot;%s\\&quot;&quot;, text);\n    }\n\n    // If we have some Quote but no Apostrophe then enquote in Apostrophe\n    if (!text.contains(&quot;'&quot;)) {\n        return String.format(&quot;'%s'&quot;, text);\n    }\n\n    // If input is like Administr&quot;ati'on then we have both &quot; and ' in the string so must use Concat\n    // we will be building the xPath like below and let the browser xPath evaluation to handle the concatenation\n    // output : concat('Administr\\&quot;',\\&quot;ati'on\\&quot;)\n    StringBuilder sb = new StringBuilder(&quot;concat(&quot;);\n\n    // Looking for &quot; as they are LESS likely than '\n    int lastPos = 0;\n    int nextPos = text.indexOf(&quot;\\&quot;&quot;);\n    while (nextPos != -1) {\n        // If this is not the first time through the loop then seperate arguments with ,\n        if (lastPos != 0) {\n            sb.append(&quot;,&quot;);\n        }\n\n        sb.append(String.format(&quot;\\&quot;%s\\&quot;,'\\&quot;'&quot;, text.substring(lastPos, nextPos - lastPos)));\n        lastPos = ++nextPos;\n\n        // Find next occurrence\n        nextPos = text.indexOf(&quot;\\&quot;&quot;, lastPos);\n    }\n\n    sb.append(String.format(&quot;,\\&quot;%s\\&quot;)&quot;, text.substring(lastPos)));\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6840219,"reputation":3832,"user_id":5260872,"display_name":"Nishan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683018120,"creation_date":1683018120,"answer_id":76153302,"question_id":37542773,"body_markdown":"I&#39;m working with c# and Selenium, only way that worked for me was by splitting the string at (&#39;) and combine them using `concat` function. This is a small method I used to achieve my goal.\r\n\r\nThis method takes two input parameters: `inputString` and `originalXpath`. \r\n\r\nIf `inputString` does not contain any single quotes, the method simply returns the `originalXpath` string formatted with the `inputString` parameter using the `string.Format()` method. \r\n\r\nIf `inputString` does contain single quotes, the method replaces each single quote with `&#39;, &quot;&#39;&quot;, &#39;` using the `Replace()` method and concatenates the resulting string with the `concat()` function. It then replaces the placeholder `&#39; {0} &#39;` in the `originalXpath` string with the `replacementString` created in the previous step using the `Replace()` method. Finally, the method returns the resulting string. \r\n\r\nIn summary, this method formats an XPath string with an input parameter, using a `concat()` function to handle cases where the input parameter contains single quotes.\r\n\r\n    using System;\r\n    using System.Linq;\r\n    \t\t\t\t\t\r\n    public class Program\r\n    {\r\n    \tpublic static void Main()\r\n    \t{\r\n    \t\tstring originalXpath = &quot;//div[contains(., &#39;{0}&#39;)]&quot;;\r\n    \t\tstring inputString = &quot;bjhe&#39;bf83785*^{}^$#%!&#39;edferferf&#39;034**()&quot;;\r\n    \t\tstring output = FormatWithConcat(inputString, originalXpath);\r\n    \t\tConsole.WriteLine(output); \r\n    \t\t// Output: //div[contains(., concat(&#39;bjhe&#39;, &quot;&#39;&quot;, &#39;bf83785*^{}^$#%!&#39;, &quot;&#39;&quot;, &#39;edferferf&#39;, &quot;&#39;&quot;, &#39;034**()&#39;))]\r\n    \t}\r\n    \t\r\n    \tprivate static string FormatWithConcat(string inputString, string originalXpath)\r\n    \t{\r\n    \t\tif (!inputString.Contains(&#39;\\&#39;&#39;))\r\n    \t\t{\r\n    \t\t\treturn string.Format(originalXpath, inputString);\r\n    \t\t}\r\n    \t\t\r\n    \t\tstring replacementString = &quot;concat(&#39;&quot; + inputString.Replace(&quot;&#39;&quot;, &quot;&#39;, \\&quot;&#39;\\&quot;, &#39;&quot;) + &quot;&#39;)&quot;; // Replace single quotes and concatenate with &#39;concat&#39; function\r\n    \t\tstring finalString = originalXpath.Replace(&quot;&#39;{0}&#39;&quot;, replacementString); // Replace the placeholder &#39;{0}&#39; in the original XPath with the replacement string\r\n    \t\treturn finalString;\r\n    \t}\r\n    }\r\n\r\nEquivalent Java code is:\r\n\r\n    public static String FormatWithConcat(String inputString, String originalXpath) {\r\n        if (!inputString.contains(&quot;&#39;&quot;)) {\r\n            return String.format(originalXpath, inputString);\r\n        }\r\n    \r\n        String replacementString = &quot;concat(&#39;&quot; + inputString.replaceAll(&quot;&#39;&quot;, &quot;&#39;, \\&quot;&#39;\\&quot;, &#39;&quot;) + &quot;&#39;)&quot;;\r\n        String finalString = originalXpath.replace(&quot;&#39;{0}&#39;&quot;, replacementString);\r\n        return finalString;\r\n    }\r\n\r\n[.NET Fiddle][1]\r\n\r\n\r\n  [1]: https://dotnetfiddle.net/yC48Ww","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>I'm working with c# and Selenium, only way that worked for me was by splitting the string at (') and combine them using <code>concat</code> function. This is a small method I used to achieve my goal.</p>\n<p>This method takes two input parameters: <code>inputString</code> and <code>originalXpath</code>.</p>\n<p>If <code>inputString</code> does not contain any single quotes, the method simply returns the <code>originalXpath</code> string formatted with the <code>inputString</code> parameter using the <code>string.Format()</code> method.</p>\n<p>If <code>inputString</code> does contain single quotes, the method replaces each single quote with <code>', &quot;'&quot;, '</code> using the <code>Replace()</code> method and concatenates the resulting string with the <code>concat()</code> function. It then replaces the placeholder <code>' {0} '</code> in the <code>originalXpath</code> string with the <code>replacementString</code> created in the previous step using the <code>Replace()</code> method. Finally, the method returns the resulting string.</p>\n<p>In summary, this method formats an XPath string with an input parameter, using a <code>concat()</code> function to handle cases where the input parameter contains single quotes.</p>\n<pre><code>using System;\nusing System.Linq;\n                    \npublic class Program\n{\n    public static void Main()\n    {\n        string originalXpath = &quot;//div[contains(., '{0}')]&quot;;\n        string inputString = &quot;bjhe'bf83785*^{}^$#%!'edferferf'034**()&quot;;\n        string output = FormatWithConcat(inputString, originalXpath);\n        Console.WriteLine(output); \n        // Output: //div[contains(., concat('bjhe', &quot;'&quot;, 'bf83785*^{}^$#%!', &quot;'&quot;, 'edferferf', &quot;'&quot;, '034**()'))]\n    }\n    \n    private static string FormatWithConcat(string inputString, string originalXpath)\n    {\n        if (!inputString.Contains('\\''))\n        {\n            return string.Format(originalXpath, inputString);\n        }\n        \n        string replacementString = &quot;concat('&quot; + inputString.Replace(&quot;'&quot;, &quot;', \\&quot;'\\&quot;, '&quot;) + &quot;')&quot;; // Replace single quotes and concatenate with 'concat' function\n        string finalString = originalXpath.Replace(&quot;'{0}'&quot;, replacementString); // Replace the placeholder '{0}' in the original XPath with the replacement string\n        return finalString;\n    }\n}\n</code></pre>\n<p>Equivalent Java code is:</p>\n<pre><code>public static String FormatWithConcat(String inputString, String originalXpath) {\n    if (!inputString.contains(&quot;'&quot;)) {\n        return String.format(originalXpath, inputString);\n    }\n\n    String replacementString = &quot;concat('&quot; + inputString.replaceAll(&quot;'&quot;, &quot;', \\&quot;'\\&quot;, '&quot;) + &quot;')&quot;;\n    String finalString = originalXpath.replace(&quot;'{0}'&quot;, replacementString);\n    return finalString;\n}\n</code></pre>\n<p><a href=\"https://dotnetfiddle.net/yC48Ww\" rel=\"nofollow noreferrer\">.NET Fiddle</a></p>\n"}],"owner":{"account_id":5901955,"reputation":310,"user_id":4645172,"accept_rate":67,"display_name":"dolittle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47014,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":37542997,"answer_count":7,"score":24,"last_activity_date":1683018120,"creation_date":1464689404,"question_id":37542773,"body_markdown":"I need to use apostrophe (&#39;) in my xpath expression which i need to use in finding elements using webdriver\r\n\r\ni need to use below Xpath expression \r\n\r\n    //input[@text=&quot;WE&#39;d like to hear from you&quot;]\r\n\r\nwhile using the above expression in find elements function i am replacing double quotes with single quotes\r\n\r\n    driver.findelements(By.xpath(&quot;//input[@text=&#39;WE&#39;d like to hear from you&#39;]&quot;))\r\n\r\n","title":"How to use apostrophe (&#39;) in xpath while finding element using webdriver?","body":"<p>I need to use apostrophe (') in my xpath expression which i need to use in finding elements using webdriver</p>\n\n<p>i need to use below Xpath expression </p>\n\n<pre><code>//input[@text=\"WE'd like to hear from you\"]\n</code></pre>\n\n<p>while using the above expression in find elements function i am replacing double quotes with single quotes</p>\n\n<pre><code>driver.findelements(By.xpath(\"//input[@text='WE'd like to hear from you']\"))\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1843558,"reputation":7606,"user_id":1672458,"accept_rate":71,"display_name":"vaindil"},"score":0,"creation_date":1347733877,"post_id":12439947,"comment_id":16727105,"body_markdown":"No, it doesn&#39;t have a single error.","body":"No, it doesn&#39;t have a single error."},{"owner":{"account_id":1843558,"reputation":7606,"user_id":1672458,"accept_rate":71,"display_name":"vaindil"},"score":0,"creation_date":1347734301,"post_id":12439947,"comment_id":16727194,"body_markdown":"It&#39;s building automatically. I disabled the automatic building and then built it manually, but I still am unable to run it as a Java application.","body":"It&#39;s building automatically. I disabled the automatic building and then built it manually, but I still am unable to run it as a Java application."}],"answers":[{"comments":[{"owner":{"account_id":1843558,"reputation":7606,"user_id":1672458,"accept_rate":71,"display_name":"vaindil"},"score":1,"creation_date":1347734177,"post_id":12439989,"comment_id":16727165,"body_markdown":"When I right-click and hover over Run As, it says (none applicable).","body":"When I right-click and hover over Run As, it says (none applicable)."},{"owner":{"account_id":1776054,"reputation":835,"user_id":1619832,"accept_rate":70,"display_name":"gdfbarbosa"},"score":0,"creation_date":1347734299,"post_id":12439989,"comment_id":16727193,"body_markdown":"Check in project properties if it has the facet Java Application. Right-click the project and type Facet. Are you sure it is a Java project? Try creating a new Java Project and try again.","body":"Check in project properties if it has the facet Java Application. Right-click the project and type Facet. Are you sure it is a Java project? Try creating a new Java Project and try again."},{"owner":{"account_id":1843558,"reputation":7606,"user_id":1672458,"accept_rate":71,"display_name":"vaindil"},"score":0,"creation_date":1347734602,"post_id":12439989,"comment_id":16727242,"body_markdown":"Creating a new project did it. Thank you!","body":"Creating a new project did it. Thank you!"},{"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"score":0,"creation_date":1347735629,"post_id":12439989,"comment_id":16727445,"body_markdown":"Can&#39;t see anything to do with Facets in project properties in Eclipse Helios and Juno... where am I supposed to be looking?","body":"Can&#39;t see anything to do with Facets in project properties in Eclipse Helios and Juno... where am I supposed to be looking?"},{"owner":{"account_id":1776054,"reputation":835,"user_id":1619832,"accept_rate":70,"display_name":"gdfbarbosa"},"score":0,"creation_date":1347738101,"post_id":12439989,"comment_id":16727774,"body_markdown":"I was wrong about facets. Facets are only applicable when we are talking about Dynamic Web Projects using WTP.","body":"I was wrong about facets. Facets are only applicable when we are talking about Dynamic Web Projects using WTP."}],"tags":[],"owner":{"account_id":1776054,"reputation":835,"user_id":1619832,"accept_rate":70,"display_name":"gdfbarbosa"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1347733906,"creation_date":1347733906,"answer_id":12439989,"question_id":12439947,"body_markdown":"Have you clicked with the right button and choose &quot;run as&quot; option, Java Application? It should work just fine in any environment.","title":"Can&#39;t get application to run in Eclipse","body":"<p>Have you clicked with the right button and choose \"run as\" option, Java Application? It should work just fine in any environment.</p>\n"},{"tags":[],"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683017759,"creation_date":1683017759,"answer_id":76153257,"question_id":12439947,"body_markdown":"In my case, in `eclipse sts` when selected file in project explorer is `.html` file, `run as` show `none applicable`. change to select `.java` file which contains `public static void main`, `run as` shows option `Java Application`, the problem is solved. [reference](https://coderanch.com/t/442912/ide/applicable-Eclipse-IDE)","title":"Can&#39;t get application to run in Eclipse","body":"<p>In my case, in <code>eclipse sts</code> when selected file in project explorer is <code>.html</code> file, <code>run as</code> show <code>none applicable</code>. change to select <code>.java</code> file which contains <code>public static void main</code>, <code>run as</code> shows option <code>Java Application</code>, the problem is solved. <a href=\"https://coderanch.com/t/442912/ide/applicable-Eclipse-IDE\" rel=\"nofollow noreferrer\">reference</a></p>\n"}],"owner":{"account_id":1843558,"reputation":7606,"user_id":1672458,"accept_rate":71,"display_name":"vaindil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11558,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":12439989,"answer_count":2,"score":0,"last_activity_date":1683017759,"creation_date":1347733562,"question_id":12439947,"body_markdown":"I have the below code put in Eclipse, and I cannot get Eclipse to let me run it as a Java application. I was able to do so on the computer on which I wrote it, but I&#39;ve tried twice since on two different computers and neither has the option. I&#39;ve tried to set a manual configuration to do it and I&#39;ve tried `Alt+Shift+X`, but neither worked. I can run Java applications on all of these computers normally, just not this one for some reason.\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Donor {\r\n\t\r\n\tpublic String name;\r\n\tpublic int age;\r\n\tpublic double donation;\r\n\t\r\n\t    Donor() {\r\n\t\t\r\n\t\t//Initialized to these values for debugging\r\n\t\tname = &quot;NoName&quot;;\r\n\t\tage = 0;\r\n\t\tdonation = 0;\r\n\t\t\r\n\t    }\r\n\t\r\n\t    Donor(String nameinit, int ageinit, double donationinit) {\r\n\t\t\r\n\t\tname = nameinit;\r\n\t\tage = ageinit;\r\n\t\tdonation = donationinit;\r\n\t\t\r\n\t    }\r\n\t\r\n\t    public String toString() {\r\n\t\t\r\n\t\tString str = &quot;&quot;;\r\n\t\t\r\n\t\tstr += String.format(&quot;%s-30%i-6$%d-20&quot;, name, age, donation);\r\n\t\t\r\n\t\treturn str;\r\n\t\t\r\n\t    }\r\n\t\r\n\t    public static void main(String[] args) {\r\n\t\t\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tString nameinit = null;\r\n\t\tint ageinit = -1;\r\n\t\tdouble donationinit = -1;\r\n\t\tString outp = null;\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter the donor&#39;s name: &quot;);\r\n\t\tnameinit = input.nextLine();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter the donor&#39;s age: &quot;);\r\n\t\tageinit = input.nextInt();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter the donation amount: &quot;);\r\n\t\tdonationinit = input.nextDouble();\r\n\t\t\r\n\t\tDonor d = new Donor(nameinit, ageinit, donationinit);\r\n\t\toutp = d.toString();\r\n\t\t\r\n\t\tSystem.out.printf(&quot;%s30 %s6 %s10&quot;, &quot;Name&quot;, &quot;Age&quot;, &quot;Donation&quot;);\r\n\t\tSystem.out.print(&quot;\\n&quot; + outp);\r\n\t\t\r\n\t\tinput.close();\r\n\t\t\r\n\t    }\r\n\r\n    }","title":"Can&#39;t get application to run in Eclipse","body":"<p>I have the below code put in Eclipse, and I cannot get Eclipse to let me run it as a Java application. I was able to do so on the computer on which I wrote it, but I've tried twice since on two different computers and neither has the option. I've tried to set a manual configuration to do it and I've tried <code>Alt+Shift+X</code>, but neither worked. I can run Java applications on all of these computers normally, just not this one for some reason.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Donor {\n\npublic String name;\npublic int age;\npublic double donation;\n\n    Donor() {\n\n    //Initialized to these values for debugging\n    name = \"NoName\";\n    age = 0;\n    donation = 0;\n\n    }\n\n    Donor(String nameinit, int ageinit, double donationinit) {\n\n    name = nameinit;\n    age = ageinit;\n    donation = donationinit;\n\n    }\n\n    public String toString() {\n\n    String str = \"\";\n\n    str += String.format(\"%s-30%i-6$%d-20\", name, age, donation);\n\n    return str;\n\n    }\n\n    public static void main(String[] args) {\n\n    Scanner input = new Scanner(System.in);\n    String nameinit = null;\n    int ageinit = -1;\n    double donationinit = -1;\n    String outp = null;\n\n    System.out.print(\"Enter the donor's name: \");\n    nameinit = input.nextLine();\n\n    System.out.print(\"Enter the donor's age: \");\n    ageinit = input.nextInt();\n\n    System.out.print(\"Enter the donation amount: \");\n    donationinit = input.nextDouble();\n\n    Donor d = new Donor(nameinit, ageinit, donationinit);\n    outp = d.toString();\n\n    System.out.printf(\"%s30 %s6 %s10\", \"Name\", \"Age\", \"Donation\");\n    System.out.print(\"\\n\" + outp);\n\n    input.close();\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","vaadin"],"answers":[{"comments":[{"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"score":0,"creation_date":1684095230,"post_id":76153242,"comment_id":134462975,"body_markdown":"O @Leif Astrand, you can believe I&#39;m just seeing this your wonderfully correct answer. Thank you so much. Apparently, I got help with it on discord and just moved on from there. However, thank you again...for this answer is actually correct. It&#39;s same as what I got from discord. thanks man!","body":"O @Leif Astrand, you can believe I&#39;m just seeing this your wonderfully correct answer. Thank you so much. Apparently, I got help with it on discord and just moved on from there. However, thank you again...for this answer is actually correct. It&#39;s same as what I got from discord. thanks man!"}],"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683017658,"creation_date":1683017658,"answer_id":76153242,"question_id":76131470,"body_markdown":"In the case of playing and pausing, there are corresponding methods on the DOM element (inherited from [`HTMLMediaElement`][1]). You can call such methods straight from the server-side `Element` API using the `callJsFunction` method, e.g. `getElement().callJsFunction(&quot;play&quot;)`.\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement#instance_methods","title":"How to define methods: play() and pause() in Vaadin video","body":"<p>In the case of playing and pausing, there are corresponding methods on the DOM element (inherited from <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement#instance_methods\" rel=\"nofollow noreferrer\"><code>HTMLMediaElement</code></a>). You can call such methods straight from the server-side <code>Element</code> API using the <code>callJsFunction</code> method, e.g. <code>getElement().callJsFunction(&quot;play&quot;)</code>.</p>\n"}],"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683017658,"creation_date":1682698780,"question_id":76131470,"body_markdown":"I created a custom class annotated with @tag(&#39;video&#39;) in my vaadin application.\r\nNeeded attributes like poster, controls, autoplay, src, width etc. have been defined and all working perfectly.\r\nNow I need to define play() and pause() methods for the class, so I could use them programmatically. \r\n\r\nNote: the class serves as video like &lt;video&gt; in html.\r\n\r\n    @Tag(&quot;video&quot;)\r\n    public class Video extends Component implements ClickNotifier{\r\n\r\n    protected String getVideoSourceAttributeName() {\r\n    return VideoAttributes.Source;\r\n    }\r\n\r\n    public void setWidth(String width) {\r\n    this.getElement().setAttribute(VideoAttributes.Width, width);\r\n    }\r\n\r\n    public void setHeight(String height) {\r\n    this.getElement().setAttribute(VideoAttributes.Height, height);\r\n    }\r\n\r\n    private interface VideoAttributes {\r\n        String Controls = &quot;controls&quot;;\r\n        String Source = &quot;src&quot;;\r\n        String CurrentTime = &quot;currentTime&quot;;\r\n        String AutoPlay = &quot;autoplay&quot;;\r\n        String Loop = &quot;loop&quot;;\r\n        String Preload = &quot;preload&quot;;\r\n        String Poster = &quot;poster&quot;;\r\n        String Width = &quot;width&quot;;\r\n        String Height = &quot;height&quot;;\r\n    }\r\n\r\n\r\n    public interface functions {\r\n\r\n    }\r\n\r\n    }","title":"How to define methods: play() and pause() in Vaadin video","body":"<p>I created a custom class annotated with @tag('video') in my vaadin application.\nNeeded attributes like poster, controls, autoplay, src, width etc. have been defined and all working perfectly.\nNow I need to define play() and pause() methods for the class, so I could use them programmatically.</p>\n<p>Note: the class serves as video like  in html.</p>\n<pre><code>@Tag(&quot;video&quot;)\npublic class Video extends Component implements ClickNotifier{\n\nprotected String getVideoSourceAttributeName() {\nreturn VideoAttributes.Source;\n}\n\npublic void setWidth(String width) {\nthis.getElement().setAttribute(VideoAttributes.Width, width);\n}\n\npublic void setHeight(String height) {\nthis.getElement().setAttribute(VideoAttributes.Height, height);\n}\n\nprivate interface VideoAttributes {\n    String Controls = &quot;controls&quot;;\n    String Source = &quot;src&quot;;\n    String CurrentTime = &quot;currentTime&quot;;\n    String AutoPlay = &quot;autoplay&quot;;\n    String Loop = &quot;loop&quot;;\n    String Preload = &quot;preload&quot;;\n    String Poster = &quot;poster&quot;;\n    String Width = &quot;width&quot;;\n    String Height = &quot;height&quot;;\n}\n\n\npublic interface functions {\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","tomcat7","java-7","java-17","tomcat10"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":2,"creation_date":1683010825,"post_id":76152200,"comment_id":134297418,"body_markdown":"It seems that you are using an older version of the Spring Framework (before 6.0) together with Tomcat 10.1. That doesn&#39;t work because Spring Framework before 6.0 requires the class `javax.servlet.Servlet`, but Tomcat 10.1 only provides `jakarta.servlet.Servlet`. You need to upgrade your Spring Framework version to 6.0.8","body":"It seems that you are using an older version of the Spring Framework (before 6.0) together with Tomcat 10.1. That doesn&#39;t work because Spring Framework before 6.0 requires the class <code>javax.servlet.Servlet</code>, but Tomcat 10.1 only provides <code>jakarta.servlet.Servlet</code>. You need to upgrade your Spring Framework version to 6.0.8"}],"owner":{"account_id":28479227,"reputation":1,"user_id":21793421,"display_name":"Harsh Jani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683017441,"creation_date":1683008395,"question_id":76152200,"body_markdown":"I am upgrading my project from \r\njava-7 to java-17 \r\nand\r\ntomcat-7 to tomcat-10\r\n\r\nI am getting this two exception \r\n\r\n\r\n\r\n&gt; java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class jakarta.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @f20570f; jakarta.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @1ddc4ec2)\r\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1071)\r\n\r\n\r\n\r\n\r\n&gt; SEVERE: Servlet.service() for servlet [jsp] threw exception\r\norg.apache.jasper.JasperException: /WEB-INF/jsp/fileNotFound.jsp (line: [3], column: [0]) Failed to load or instantiate TagLibraryValidator class: [org.apache.taglibs.standard.tlv.JstlCoreTLV]\r\n\r\n\r\n\r\nmy project structure \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried all possible number of solution provided by many form but not solved. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fn9xX.png","title":"Upgrading project java-7 to java-17 and tomcat-7 to tomcat-10","body":"<p>I am upgrading my project from\njava-7 to java-17\nand\ntomcat-7 to tomcat-10</p>\n<p>I am getting this two exception</p>\n<blockquote>\n<p>java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class jakarta.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @f20570f; jakarta.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @1ddc4ec2)\nat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1071)</p>\n</blockquote>\n<blockquote>\n<p>SEVERE: Servlet.service() for servlet [jsp] threw exception\norg.apache.jasper.JasperException: /WEB-INF/jsp/fileNotFound.jsp (line: [3], column: [0]) Failed to load or instantiate TagLibraryValidator class: [org.apache.taglibs.standard.tlv.JstlCoreTLV]</p>\n</blockquote>\n<p>my project structure</p>\n<p><a href=\"https://i.stack.imgur.com/fn9xX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fn9xX.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried all possible number of solution provided by many form but not solved.</p>\n"},{"tags":["java","debugging","google-app-engine","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":1676448,"reputation":1651,"user_id":1541896,"accept_rate":83,"display_name":"Alma Alma"},"score":1,"creation_date":1342870252,"post_id":11591748,"comment_id":15340365,"body_markdown":"Hmmm.... That sounds logical... :) I&#39;ll try to figure out how was it built, but since I&#39;m not the one who compiled the code (it&#39;s Google) I don&#39;t really know how shall I do that. Any suggestions on this?","body":"Hmmm.... That sounds logical... :) I&#39;ll try to figure out how was it built, but since I&#39;m not the one who compiled the code (it&#39;s Google) I don&#39;t really know how shall I do that. Any suggestions on this?"},{"owner":{"account_id":1676448,"reputation":1651,"user_id":1541896,"accept_rate":83,"display_name":"Alma Alma"},"score":0,"creation_date":1342870712,"post_id":11591748,"comment_id":15340462,"body_markdown":"OK... I just found your other answer related to how to see whether debug information is available... You&#39;re really a helpful guy! :) I&#39;ll give it a try.","body":"OK... I just found your other answer related to how to see whether debug information is available... You&#39;re really a helpful guy! :) I&#39;ll give it a try."},{"owner":{"account_id":1676448,"reputation":1651,"user_id":1541896,"accept_rate":83,"display_name":"Alma Alma"},"score":0,"creation_date":1342871712,"post_id":11591748,"comment_id":15340632,"body_markdown":"So. I tried the `javap -v` command which successfully disassembled the class. Now what I see just assured my previous suspicion. The disassembled file says `LineNumberTable: line 481: 0` which is exactly the line number of the method header where I put my breakpoint in (I put it on the next line). So it seems that the class and the source is in sync (which is not a big surprise anyway).","body":"So. I tried the <code>javap -v</code> command which successfully disassembled the class. Now what I see just assured my previous suspicion. The disassembled file says <code>LineNumberTable: line 481: 0</code> which is exactly the line number of the method header where I put my breakpoint in (I put it on the next line). So it seems that the class and the source is in sync (which is not a big surprise anyway)."},{"owner":{"account_id":2112167,"reputation":1537,"user_id":1991295,"accept_rate":60,"display_name":"async"},"score":3,"creation_date":1399299547,"post_id":11591748,"comment_id":35991415,"body_markdown":"This didn&#39;t work for me. In fact, I have NEVER used the &quot;-g&quot; flag in IDEA and most of the times I was able to debug my code.","body":"This didn&#39;t work for me. In fact, I have NEVER used the &quot;-g&quot; flag in IDEA and most of the times I was able to debug my code."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683017063,"post_id":11591748,"comment_id":134298557,"body_markdown":"@async and others, clearly there are multiple possible causes for this problem.  If my suggestion doesn&#39;t help, try some of the other suggestions.","body":"@async and others, clearly there are multiple possible causes for this problem.  If my suggestion doesn&#39;t help, try some of the other suggestions."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":5,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1683017150,"creation_date":1342869958,"answer_id":11591748,"question_id":11591662,"body_markdown":"I found some other cases where people reported that IDEA says &quot;No executable code found&quot;.  A common pattern is that they were trying to debug code that has been built without debug information.  Check that you are compiling with the &quot;-g&quot; flag (or equivalent) set.  Use `javap` to see if there is debug information in the `.class` file(s).","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I found some other cases where people reported that IDEA says &quot;No executable code found&quot;.  A common pattern is that they were trying to debug code that has been built without debug information.  Check that you are compiling with the &quot;-g&quot; flag (or equivalent) set.  Use <code>javap</code> to see if there is debug information in the <code>.class</code> file(s).</p>\n"},{"tags":[],"owner":{"account_id":3119605,"reputation":21,"user_id":2639652,"display_name":"kiwi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375302879,"creation_date":1375302879,"answer_id":17980447,"question_id":11591662,"body_markdown":"I had a similar problem and it was caused by a mistake in my Tomcat configuration, under the Deployment tab, the &quot;Deploy at the server startup&quot;.  I had accidentally changed it to a very similar project with &quot;:war exploded&quot;.  When I changed it back, it worked fine.  ","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I had a similar problem and it was caused by a mistake in my Tomcat configuration, under the Deployment tab, the \"Deploy at the server startup\".  I had accidentally changed it to a very similar project with \":war exploded\".  When I changed it back, it worked fine.  </p>\n"},{"comments":[{"owner":{"account_id":1132853,"reputation":2896,"user_id":1118527,"accept_rate":83,"display_name":"Lama"},"score":0,"creation_date":1428401315,"post_id":23252609,"comment_id":47137037,"body_markdown":"is there a way to invalidate caches without deleting the local history?","body":"is there a way to invalidate caches without deleting the local history?"},{"owner":{"account_id":2168940,"reputation":1763,"user_id":1921440,"accept_rate":100,"display_name":"Manos Pasgiannis"},"score":1,"creation_date":1468584906,"post_id":23252609,"comment_id":64200031,"body_markdown":"Terminate the server from the task manager solved it in my case. Seems that intellij can&#39;t always terminate my server successfully","body":"Terminate the server from the task manager solved it in my case. Seems that intellij can&#39;t always terminate my server successfully"},{"owner":{"account_id":2431775,"reputation":566,"user_id":2122524,"display_name":"user2122524"},"score":1,"creation_date":1557508743,"post_id":23252609,"comment_id":98802498,"body_markdown":"I tried all the steps from Intellilj, but it didn&#39;t work. Finally, I tried running -&gt; mvn clean install from the command line and it fixed the problem","body":"I tried all the steps from Intellilj, but it didn&#39;t work. Finally, I tried running -&gt; mvn clean install from the command line and it fixed the problem"},{"owner":{"account_id":21543568,"reputation":5915,"user_id":15880865,"display_name":"Richard Onslow Roper"},"score":0,"creation_date":1663954203,"post_id":23252609,"comment_id":130369055,"body_markdown":"Rebuilding worked","body":"Rebuilding worked"},{"owner":{"account_id":4153002,"reputation":139,"user_id":3404905,"display_name":"chethan bhounsley g"},"score":0,"creation_date":1678785184,"post_id":23252609,"comment_id":133596283,"body_markdown":"I had a similar problem, issue was my source code was changed w.r.t jar deployed, so it was showing this error when I reverted back everything was fine","body":"I had a similar problem, issue was my source code was changed w.r.t jar deployed, so it was showing this error when I reverted back everything was fine"}],"tags":[],"owner":{"account_id":938834,"reputation":1564,"user_id":967288,"display_name":"Matthew Chen"},"comment_count":5,"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1398278340,"creation_date":1398278340,"answer_id":23252609,"question_id":11591662,"body_markdown":"I had similar problems and various attempts has been applied. Below is my usual steps:\r\n\r\n1. If you are using Maven dependencies, go to Maven Projects -&gt; refresh\r\n2. If that does not work, Try top menu --&gt; Build --&gt; Rebuild Project\r\n3. If that still doesn&#39;t work, try top menu --&gt; File --&gt; Invalidate Cache/Restart\r\n4. If that still doesn&#39;t work, then $CATALINA_BASE/bin/catalina.sh stop, then start\r\n\r\nAfter this, usually it covers 99% of the problems. Otherwise, Probably you will have to examine some other possibilities.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I had similar problems and various attempts has been applied. Below is my usual steps:</p>\n\n<ol>\n<li>If you are using Maven dependencies, go to Maven Projects -> refresh</li>\n<li>If that does not work, Try top menu --> Build --> Rebuild Project</li>\n<li>If that still doesn't work, try top menu --> File --> Invalidate Cache/Restart</li>\n<li>If that still doesn't work, then $CATALINA_BASE/bin/catalina.sh stop, then start</li>\n</ol>\n\n<p>After this, usually it covers 99% of the problems. Otherwise, Probably you will have to examine some other possibilities.</p>\n"},{"comments":[{"owner":{"account_id":3333488,"reputation":7021,"user_id":3459110,"display_name":"user3459110"},"score":4,"creation_date":1414505045,"post_id":26609978,"comment_id":41832463,"body_markdown":"This looks more like a comment.","body":"This looks more like a comment."}],"tags":[],"owner":{"account_id":3590159,"reputation":29,"user_id":2996409,"display_name":"Alexey Taran"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1414503939,"creation_date":1414503939,"answer_id":26609978,"question_id":11591662,"body_markdown":"Please, make sure you have not run Proguard. It helped me.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>Please, make sure you have not run Proguard. It helped me.</p>\n"},{"comments":[{"owner":{"account_id":415316,"reputation":8582,"user_id":790053,"accept_rate":62,"display_name":"Sergio"},"score":0,"creation_date":1439477355,"post_id":26848905,"comment_id":51887365,"body_markdown":"I have exactly the same situation :(\nWhen I change the line I can put the breakpoint!","body":"I have exactly the same situation :( When I change the line I can put the breakpoint!"}],"tags":[],"owner":{"account_id":3811826,"reputation":729,"user_id":3162418,"accept_rate":65,"display_name":"vaibhav.g"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1556008131,"creation_date":1415638542,"answer_id":26848905,"question_id":11591662,"body_markdown":"I had faced similar problem while debugging in intellij. I wasn&#39;t able to put breakpoint at one of the code snippet, then i changed the line number of the code and after that i was able to put breakpoint. Looks like a bug in intellij or some caching issue.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I had faced similar problem while debugging in intellij. I wasn't able to put breakpoint at one of the code snippet, then i changed the line number of the code and after that i was able to put breakpoint. Looks like a bug in intellij or some caching issue.</p>\n"},{"comments":[{"owner":{"account_id":1172561,"reputation":5924,"user_id":1149398,"accept_rate":100,"display_name":"sud007"},"score":0,"creation_date":1586532381,"post_id":29599061,"comment_id":108168589,"body_markdown":"This fixed it for me.","body":"This fixed it for me."}],"tags":[],"owner":{"account_id":6131600,"reputation":71,"user_id":4781583,"display_name":"Rahul Chintakunta"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1428906546,"creation_date":1428906546,"answer_id":29599061,"question_id":11591662,"body_markdown":"Menu --&gt; File --&gt; Invalidate Cache/Restart\r\n\r\nThis worked for me under IntelliJ 13.0.2","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>Menu --> File --> Invalidate Cache/Restart</p>\n\n<p>This worked for me under IntelliJ 13.0.2</p>\n"},{"tags":[],"owner":{"account_id":1976638,"reputation":2858,"user_id":1774291,"accept_rate":75,"display_name":"PeterS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433332413,"creation_date":1433332413,"answer_id":30619371,"question_id":11591662,"body_markdown":"If you are using some servers they will go into &quot;low memory mode&quot;, that means they will not debug for you, no matter what options or caches you invalidate.\r\n\r\nYou should stop your server, increase the memory settings on the options that are passed to java and restart your server. Check logs to ensure you don&#39;t get a report such as &quot;running in low memory mode&quot;. ","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>If you are using some servers they will go into \"low memory mode\", that means they will not debug for you, no matter what options or caches you invalidate.</p>\n\n<p>You should stop your server, increase the memory settings on the options that are passed to java and restart your server. Check logs to ensure you don't get a report such as \"running in low memory mode\". </p>\n"},{"tags":[],"owner":{"account_id":2041969,"reputation":133,"user_id":1822894,"accept_rate":70,"display_name":"raka"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1436231299,"creation_date":1436231299,"answer_id":31258169,"question_id":11591662,"body_markdown":"Had same issue, figured out that the version of code on the server and the one I&#39;m debugging are different. After synching the code the issue was resolved.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>Had same issue, figured out that the version of code on the server and the one I'm debugging are different. After synching the code the issue was resolved.</p>\n"},{"tags":[],"owner":{"account_id":4733666,"reputation":1817,"user_id":3828593,"accept_rate":57,"display_name":"Vic Torious"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441272452,"creation_date":1441272452,"answer_id":32371813,"question_id":11591662,"body_markdown":"In my case I killed all running processes on the device and disconnected and reconnected it.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>In my case I killed all running processes on the device and disconnected and reconnected it.</p>\n"},{"tags":[],"owner":{"account_id":1259089,"reputation":730,"user_id":1217913,"display_name":"Willa"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457472027,"creation_date":1457097648,"answer_id":35797157,"question_id":11591662,"body_markdown":"The question is rather old but I thought my experience might help someone in the future. In my case I was trying to debug code that was not compiled with debug information. I am using maven in which the original parent pom file before modification looked something like below in the build section.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;build&gt;\r\n    \t&lt;pluginManagement&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t   \t  &lt;target&gt;${javaCompilerVersion}&lt;/target&gt;\r\n    \t\t\t  &lt;source&gt;${javaCompilerVersion}&lt;/source&gt;\r\n    \t\t\t  &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t        &lt;/configuration&gt;\r\n    \t    &lt;/plugin&gt;\r\n            &lt;!--More plugins...--&gt;\r\n         &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n\r\nI changed the above section to make it look like below.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;build&gt;\r\n    \t&lt;pluginManagement&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t   \t  &lt;target&gt;${javaCompilerVersion}&lt;/target&gt;\r\n    \t\t\t  &lt;source&gt;${javaCompilerVersion}&lt;/source&gt;\r\n    \t\t\t  &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                  &lt;debug&gt;true&lt;/debug&gt;\r\n                  &lt;debuglevel&gt;lines,vars,source&lt;/debuglevel&gt;\r\n    \t        &lt;/configuration&gt;\r\n    \t    &lt;/plugin&gt;\r\n            &lt;!--More plugins...--&gt;\r\n         &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n\r\nNote the added `&lt;debug&gt;` and `&lt;debuglevel&gt;` elements. debuglevel element can take any combination of the three arguments separated by commas.\r\n\r\nAfter compiling with this change I finally managed to put break points in IDEA.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>The question is rather old but I thought my experience might help someone in the future. In my case I was trying to debug code that was not compiled with debug information. I am using maven in which the original parent pom file before modification looked something like below in the build section.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;configuration&gt;\n              &lt;target&gt;${javaCompilerVersion}&lt;/target&gt;\n              &lt;source&gt;${javaCompilerVersion}&lt;/source&gt;\n              &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;!--More plugins...--&gt;\n     &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>I changed the above section to make it look like below.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;configuration&gt;\n              &lt;target&gt;${javaCompilerVersion}&lt;/target&gt;\n              &lt;source&gt;${javaCompilerVersion}&lt;/source&gt;\n              &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n              &lt;debug&gt;true&lt;/debug&gt;\n              &lt;debuglevel&gt;lines,vars,source&lt;/debuglevel&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;!--More plugins...--&gt;\n     &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Note the added <code>&lt;debug&gt;</code> and <code>&lt;debuglevel&gt;</code> elements. debuglevel element can take any combination of the three arguments separated by commas.</p>\n\n<p>After compiling with this change I finally managed to put break points in IDEA.</p>\n"},{"tags":[],"owner":{"account_id":8734553,"reputation":41,"user_id":6533597,"display_name":"Joseph"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1467292229,"creation_date":1467292229,"answer_id":38124146,"question_id":11591662,"body_markdown":"The essence of the problem is that the JVM executes a class file (either simple class or a class loaded from jar from the class path) which DOES NOT MATCH the source being used by debugger.\r\nOnce this is understood, the solution is simple: make sure that the source represents the class being executed.\r\nSo, to fix the problem you can refresh-synchronize sources to classes, etc.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>The essence of the problem is that the JVM executes a class file (either simple class or a class loaded from jar from the class path) which DOES NOT MATCH the source being used by debugger.\nOnce this is understood, the solution is simple: make sure that the source represents the class being executed.\nSo, to fix the problem you can refresh-synchronize sources to classes, etc.</p>\n"},{"tags":[],"owner":{"account_id":5801466,"reputation":1,"user_id":4575512,"display_name":"eldad marciano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468324959,"creation_date":1468324959,"answer_id":38328376,"question_id":11591662,"body_markdown":"I had the same issue using debug configuration in my case Tomcat.\r\nI tried all above, but nothing.\r\nwhen I just reconfigured the Tomcat (debug &gt; edit configuration &gt; remove the tomcat &gt; add it again from scratch) it was finally working :)","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I had the same issue using debug configuration in my case Tomcat.\nI tried all above, but nothing.\nwhen I just reconfigured the Tomcat (debug > edit configuration > remove the tomcat > add it again from scratch) it was finally working :)</p>\n"},{"comments":[{"owner":{"account_id":5271111,"reputation":1420,"user_id":4209304,"accept_rate":39,"display_name":"btrballin"},"score":0,"creation_date":1612396753,"post_id":42157843,"comment_id":116757581,"body_markdown":"This resolved my problem. I was using another maven project containing the code I wanted to debug as a dependency for my main Spring project. Since the code that needs to be debugged isn&#39;t executing directly, but rather as a dependency for another project that does, this was causing some issues with the debugging. After recompiling the java file with my breakpoints, it was running as expected without having to restart the main project again!","body":"This resolved my problem. I was using another maven project containing the code I wanted to debug as a dependency for my main Spring project. Since the code that needs to be debugged isn&#39;t executing directly, but rather as a dependency for another project that does, this was causing some issues with the debugging. After recompiling the java file with my breakpoints, it was running as expected without having to restart the main project again!"},{"owner":{"account_id":3066113,"reputation":791,"user_id":2597758,"accept_rate":71,"display_name":"WebViewer"},"score":0,"creation_date":1672391190,"post_id":42157843,"comment_id":132280536,"body_markdown":"This option is not available in Android Studio (2021.3).","body":"This option is not available in Android Studio (2021.3)."}],"tags":[],"owner":{"account_id":6755857,"reputation":121,"user_id":5840230,"display_name":"reubot"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1486724717,"creation_date":1486724717,"answer_id":42157843,"question_id":11591662,"body_markdown":"I was able to fix this problem by recompiling the class in question:\r\nBuild - &gt; Recompile (filename.java)","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I was able to fix this problem by recompiling the class in question:\nBuild - > Recompile (filename.java)</p>\n"},{"tags":[],"owner":{"account_id":1671980,"reputation":511,"user_id":1538281,"display_name":"Vaishali Kulkarni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497378628,"creation_date":1497378628,"answer_id":44528973,"question_id":11591662,"body_markdown":"Check your disc space and free up some memory. If you are running low on disc space, even if your server is not on &quot;low memory mode&quot;, intelliJ would not allocate the space to cache the classes required for debugging. As a result it won&#39;t allow you to set the break-point.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>Check your disc space and free up some memory. If you are running low on disc space, even if your server is not on \"low memory mode\", intelliJ would not allocate the space to cache the classes required for debugging. As a result it won't allow you to set the break-point.</p>\n"},{"tags":[],"owner":{"account_id":1873979,"reputation":467,"user_id":1695612,"accept_rate":27,"display_name":"Godrules500"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538484534,"creation_date":1538484534,"answer_id":52608692,"question_id":11591662,"body_markdown":"I was working on an Intellij Plugin and when the sandbox Intellij popped up, what finally fixed my issue was, once the sandbox intellij popped up, I rebuilt from there.\r\n\r\nAfter that I built both my Intellij and the sandbox Intellij and they synced finally.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I was working on an Intellij Plugin and when the sandbox Intellij popped up, what finally fixed my issue was, once the sandbox intellij popped up, I rebuilt from there.</p>\n\n<p>After that I built both my Intellij and the sandbox Intellij and they synced finally.</p>\n"},{"tags":[],"owner":{"account_id":15360171,"reputation":61,"user_id":11081295,"display_name":"Dmitrii Skomorokhov"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1553793540,"creation_date":1553793540,"answer_id":55403490,"question_id":11591662,"body_markdown":"I had same issue. I don&#39;t know why, but for me helped to add any modification in code, such as adding or removing comment. Strange, but it resolved my issue","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I had same issue. I don't know why, but for me helped to add any modification in code, such as adding or removing comment. Strange, but it resolved my issue</p>\n"},{"tags":[],"owner":{"account_id":8621597,"reputation":115,"user_id":6456330,"display_name":"Anshu Shekhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1577201752,"creation_date":1577196900,"answer_id":59470064,"question_id":11591662,"body_markdown":"In my case i was **debugging remotely**, found out that the version of code on the remote server and **Intellij** was not in sync. I re-build the latest code locally, placed the same change on remote server and it worked for me.  \r\nYou can try out few more possible solutions that could be specific to your problems suggested by **JetBrains**.\r\n[Impossible to debug &quot;Warning: no executable code found at line.&quot;][1]\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/206159549-Impossible-to-debug-Warning-no-executable-code-found-at-line-","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>In my case i was <strong>debugging remotely</strong>, found out that the version of code on the remote server and <strong>Intellij</strong> was not in sync. I re-build the latest code locally, placed the same change on remote server and it worked for me.<br>\nYou can try out few more possible solutions that could be specific to your problems suggested by <strong>JetBrains</strong>.\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206159549-Impossible-to-debug-Warning-no-executable-code-found-at-line-\" rel=\"nofollow noreferrer\">Impossible to debug \"Warning: no executable code found at line.\"</a></p>\n"},{"tags":[],"owner":{"account_id":18872526,"reputation":4027,"user_id":13766744,"display_name":"Iv&#225;n Yoed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630123376,"creation_date":1630123376,"answer_id":68961282,"question_id":11591662,"body_markdown":"Simply by stopping the debugging process and reinitiating it. In my case, simple as that.","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>Simply by stopping the debugging process and reinitiating it. In my case, simple as that.</p>\n"}],"owner":{"account_id":1676448,"reputation":1651,"user_id":1541896,"accept_rate":83,"display_name":"Alma Alma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73262,"favorite_count":0,"down_vote_count":1,"up_vote_count":77,"answer_count":18,"score":76,"last_activity_date":1683017150,"creation_date":1342869188,"question_id":11591662,"body_markdown":"I&#39;m trying to put breakpoints into the GoogleAppEngine sources (SDK 1.7.0) but IDEA Ultimate (11.0.2) just keeps telling me `Warning: No executable code found at line 482 in class com.google.appengine.api.memcache.AsyncMemcacheServiceImpl`.\r\n\r\nI get this error message both when I run the code from unit tests and when I start up the development server.\r\n\r\nIt&#39;s quite annoying. Anyway, my sources are in an external (relative to both the IDEA home and the project home) directory, and my jar files are under the App engine SDK lib dir.\r\n\r\nMy jar files are added as a project library to the module, and my sources are attached to this library. I was playing around with module dependencies as well, but without any luck. Finally, I decided to put this library into Compile scope, but that was a bad idea since the SDK provides these jars at runtime, so I decided to fall back to Provided scope.\r\n\r\nI also played with the export checkbox on the module dependencies tab, but I think this is irrelevant, according to the [web help][1], export is only important when you have dependent modules and you want to make your library available in these modules as well.\r\n\r\nAnyway, this question arose [4 years ago][2] also. So I&#39;m wondering now whether it is really so hard to solve this issue?\r\n\r\nI&#39;m very disappointed now. I hadn&#39;t had any problems with IDEA so far...I saw that this problem [arose to other people][3] as well, so this is not unique I guess.\r\n\r\nAny help is appreciated.\r\n\r\n\r\n----------\r\nI edited my question due to my `javap` experiments below: It seems that the classes and the sources are **NOT** out of sync. I checked out the 1.7.0 related revision from SVN, and I&#39;m using the 1.7.0 SDK, so these should not be out of sync at all.\r\n\r\n  [1]: http://www.jetbrains.com/idea/webhelp/dependencies-tab.html\r\n  [2]: http://devnet.jetbrains.net/thread/276796\r\n  [3]: https://stackoverflow.com/questions/11199282/set-a-breakpoint-inside-a-library-jar-in-intellij","title":"Cannot set Java breakpoint in Intellij IDEA","body":"<p>I'm trying to put breakpoints into the GoogleAppEngine sources (SDK 1.7.0) but IDEA Ultimate (11.0.2) just keeps telling me <code>Warning: No executable code found at line 482 in class com.google.appengine.api.memcache.AsyncMemcacheServiceImpl</code>.</p>\n<p>I get this error message both when I run the code from unit tests and when I start up the development server.</p>\n<p>It's quite annoying. Anyway, my sources are in an external (relative to both the IDEA home and the project home) directory, and my jar files are under the App engine SDK lib dir.</p>\n<p>My jar files are added as a project library to the module, and my sources are attached to this library. I was playing around with module dependencies as well, but without any luck. Finally, I decided to put this library into Compile scope, but that was a bad idea since the SDK provides these jars at runtime, so I decided to fall back to Provided scope.</p>\n<p>I also played with the export checkbox on the module dependencies tab, but I think this is irrelevant, according to the <a href=\"http://www.jetbrains.com/idea/webhelp/dependencies-tab.html\" rel=\"nofollow noreferrer\">web help</a>, export is only important when you have dependent modules and you want to make your library available in these modules as well.</p>\n<p>Anyway, this question arose <a href=\"http://devnet.jetbrains.net/thread/276796\" rel=\"nofollow noreferrer\">4 years ago</a> also. So I'm wondering now whether it is really so hard to solve this issue?</p>\n<p>I'm very disappointed now. I hadn't had any problems with IDEA so far...I saw that this problem <a href=\"https://stackoverflow.com/questions/11199282/set-a-breakpoint-inside-a-library-jar-in-intellij\">arose to other people</a> as well, so this is not unique I guess.</p>\n<p>Any help is appreciated.</p>\n<hr />\n<p>I edited my question due to my <code>javap</code> experiments below: It seems that the classes and the sources are <strong>NOT</strong> out of sync. I checked out the 1.7.0 related revision from SVN, and I'm using the 1.7.0 SDK, so these should not be out of sync at all.</p>\n"},{"tags":["java","csv","exe"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1669325638,"post_id":74566351,"comment_id":131623791,"body_markdown":"Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)\n(including csv files). You could have the best of both worlds: read a file provided by the user, else your own csv as resource in the jar","body":"Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a> (including csv files). You could have the best of both worlds: read a file provided by the user, else your own csv as resource in the jar"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683016365,"creation_date":1669327523,"answer_id":74566617,"question_id":74566351,"body_markdown":"You can include the CSV (and any other file) into the jar. A jar file is just a zip archive - you can verify that by renaming it and opening it with any archive viewer.\r\n\r\nNow at runtime the file is read-only, and you have to access it via the classpath, not via the filesystem. Here is an example how to access a text file - and any other file also needs to be opened as stream:\r\nhttps://stackoverflow.com/questions/1464291/how-to-really-read-text-file-from-classpath-in-java\r\n\r\nThese files that you add to the jar are called resources, and as @g00se already mentioned: Here is how to do it in\r\n- [Netbeans][1]\r\n- [Eclipse][2]\r\n- [Maven][3]\r\n\r\n\r\n  [1]: https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\r\n  [2]: https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\r\n  [3]: https://maven.apache.org/guides/getting-started/index.html#how-do-i-add-resources-to-my-jar","title":"Is there a way to include a csv file within a java program?","body":"<p>You can include the CSV (and any other file) into the jar. A jar file is just a zip archive - you can verify that by renaming it and opening it with any archive viewer.</p>\n<p>Now at runtime the file is read-only, and you have to access it via the classpath, not via the filesystem. Here is an example how to access a text file - and any other file also needs to be opened as stream:\n<a href=\"https://stackoverflow.com/questions/1464291/how-to-really-read-text-file-from-classpath-in-java\">How to read text file from classpath in Java?</a></p>\n<p>These files that you add to the jar are called resources, and as @g00se already mentioned: Here is how to do it in</p>\n<ul>\n<li><a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a></li>\n<li><a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a></li>\n<li><a href=\"https://maven.apache.org/guides/getting-started/index.html#how-do-i-add-resources-to-my-jar\" rel=\"nofollow noreferrer\">Maven</a></li>\n</ul>\n"}],"owner":{"account_id":27039119,"reputation":13,"user_id":20594201,"display_name":"TheDomo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":632,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74566617,"answer_count":1,"score":0,"last_activity_date":1683016365,"creation_date":1669325367,"question_id":74566351,"body_markdown":"I am attempting to create a standalone app and the app uses a local csv file to pull data from. I was hoping to send this app to friends for a niche use but I have realized that should the csv not be included, there is no way of me finding out where they stored the data and the file path for it. I need the csv to be included in the jar file with the code still reading it.\r\n\r\nI have tried a file reader loop and importing the file directly to the project but neither have succeeded so far. I am not looking to use OpenCSV unless it is the last option as I would have to rewrite about half the code.","title":"Is there a way to include a csv file within a java program?","body":"<p>I am attempting to create a standalone app and the app uses a local csv file to pull data from. I was hoping to send this app to friends for a niche use but I have realized that should the csv not be included, there is no way of me finding out where they stored the data and the file path for it. I need the csv to be included in the jar file with the code still reading it.</p>\n<p>I have tried a file reader loop and importing the file directly to the project but neither have succeeded so far. I am not looking to use OpenCSV unless it is the last option as I would have to rewrite about half the code.</p>\n"},{"tags":["java","selenium-webdriver","popup"],"comments":[{"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"score":0,"creation_date":1683015816,"post_id":76152776,"comment_id":134298300,"body_markdown":"Are you getting &quot;Couldn’t sign you in,This browser or app may not be secure message?","body":"Are you getting &quot;Couldn’t sign you in,This browser or app may not be secure message?"},{"owner":{"account_id":23766170,"reputation":21,"user_id":17780910,"display_name":"Bug Hunter"},"score":0,"creation_date":1683016270,"post_id":76152776,"comment_id":134298378,"body_markdown":"No it is asking for password and I am unable to interact with password popup","body":"No it is asking for password and I am unable to interact with password popup"}],"owner":{"account_id":23766170,"reputation":21,"user_id":17780910,"display_name":"Bug Hunter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683016346,"creation_date":1683013966,"question_id":76152776,"body_markdown":"   \r\n\r\n   \r\n\r\n  I have successfully registered on airbnb website using a username and email now since I have already registered on airbnb the website is asking for password and I am unable to interact with this pop up earlier successfully handled the first pop up with google sign up as I used gmail to create a user .Now I will have to login using password please have a look \r\n            \r\n        \r\n        package Practice;\r\n        import org.junit.Assert;\r\n        import org.openqa.selenium.*;\r\n        import org.openqa.selenium.chrome.ChromeDriver;\r\n        import org.openqa.selenium.Alert;\r\n        import org.openqa.selenium.chrome.ChromeOptions;\r\n        import org.openqa.selenium.firefox.FirefoxDriver;\r\n        import org.openqa.selenium.interactions.Actions;\r\n        import org.openqa.selenium.support.ui.ExpectedConditions;\r\n        import org.openqa.selenium.support.ui.WebDriverWait;\r\n        import java.util.ArrayList;\r\n        import java.time.Duration;\r\n        import java.util.Iterator;\r\n        import java.util.Set;\r\n        import java.util.concurrent.TimeUnit;\r\n        import org.openqa.selenium.support.ui.WebDriverWait;\r\n        import org.openqa.selenium.support.ui.ExpectedConditions;\r\n        import org.openqa.selenium.support.ui.Select;\r\n        \r\n        \r\n        public class Airbnbmumbai\r\n        {\r\n            public static void main(String[]args) throws InterruptedException {\r\n                System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;path to chromedriver&quot;);\r\n                ChromeOptions ops = new ChromeOptions();\r\n                ops.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                ChromeDriver driver = new ChromeDriver(ops);\r\n                driver.get(&quot;https://www.airbnb.co.in/&quot;);\r\n                driver.manage().window().maximize();\r\n                driver.navigate().forward();\r\n                Thread.sleep(1000);\r\n                // Clicking on trending //\r\n                driver.findElement(By.xpath(&quot;//div[@class=\\&quot;f19g2zq0 dir dir-ltr\\&quot;]&quot;)).click();\r\n                driver.navigate().forward();\r\n                Thread.sleep(2000);\r\n                // Getting the title of the page on starting of the page //\r\n                System.out.println(&quot;Page title is : &quot; + driver.getTitle());\r\n                driver.findElement(By.xpath(&quot;//input[@name=\\&quot;query\\&quot;]&quot;)).sendKeys(&quot;Mumbai&quot;);\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;//div[@class=\\&quot;_r1t6ga\\&quot;]&quot;)).click();\r\n                driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;_1gazwvry notranslate\\&quot;])[4]&quot;)).click();\r\n                driver.navigate().forward();\r\n                driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[1]/div/div/div/header/div/div[2]/div[2]/div/div/div/form/div[2]/div/div[3]/div[4]/div/div/section/div/div/div/div/div[2]/div[1]/div/div[1]/div/div/div/div/div[2]/div[2]/div/div[3]/div/table/tbody/tr[5]/td[4]/div&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;//div[@class=\\&quot;p1kudodg dir dir-ltr\\&quot;]&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;(//span[@class=\\&quot;i98ho2o dir dir-ltr\\&quot;])[2]&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[1]/div/div/div/header/div/div[2]/div[2]/div/div/div/form/div[2]/div/div[5]/div[2]/div/div/div/section/div/div/div/div[2]/div[2]/div/button[2]/span&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;//span[@class=\\&quot;t1l18xbv dir dir-ltr\\&quot;]&quot;)).click();\r\n                driver.navigate().forward();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[2]/main/div[2]/div/div[2]/div/div/div/div/div[1]/div/div/div/div/div[2]&quot;)).click();\r\n                System.out.println(&quot;Page title is : &quot; + driver.getTitle());\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[2]/main/div[2]/div/div[2]/div/div/div/div/div[7]/div/div[2]/div/div/div/div[1]&quot;)).click();\r\n                // Now will work on the second window //\r\n                ArrayList&lt;String&gt; tabs2 = new ArrayList&lt;String&gt;(driver.getWindowHandles());\r\n                driver.switchTo().window(tabs2.get(1));\r\n                    // Clicking on see all photos //\r\n                System.out.println(&quot;Page title is : &quot; + driver.getTitle());\r\n                Thread.sleep(4000);\r\n                driver.navigate().forward();\r\n                JavascriptExecutor js = (JavascriptExecutor) driver;\r\n                js.executeScript(&quot;window.scrollBy(0,450)&quot;, &quot;&quot;);\r\n                // Clicking on reserve //\r\n             driver.findElement(By.xpath(&quot;(//span[@class=\\&quot;t12u7nq4 dir dir-ltr\\&quot;])[2]&quot;)).click();\r\n             Thread.sleep(4000);\r\n             driver.navigate().forward();\r\n                js.executeScript(&quot;window.scrollBy(0,450)&quot;, &quot;&quot;);\r\n                // Signup with google //\r\n                driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;_1u21f56\\&quot;])[2]&quot;)).click();\r\n                String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\r\n                String subWindowHandler = null;\r\n                Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\r\n                Iterator&lt;String&gt; iterator = handles.iterator();\r\n                while (iterator.hasNext()){\r\n                    subWindowHandler = iterator.next();\r\n                }\r\n                driver.switchTo().window(subWindowHandler); // switch to popup window\r\n        \r\n                // Now you are in the popup window, perform necessary actions here\r\n                Thread.sleep(2000);\r\n                driver.navigate().forward();\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;identifierId\\&quot;]&quot;)).sendKeys(&quot;username&quot;);\r\n                Thread.sleep(2000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;identifierNext\\&quot;]/div/button/span&quot;)).click();\r\n                Thread.sleep(4000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;password\\&quot;]/div[1]/div/div[1]/input&quot;)).sendKeys(&quot;Password&quot;);\r\n                Thread.sleep(2000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;passwordNext\\&quot;]/div/button/span&quot;)).click();\r\n                // Since the user is already registered so entering password here //\r\n                System.out.println(&quot;Page title is : &quot; + driver.getTitle());\r\n                // Handling the pop up again //\r\n                driver.manage().timeouts().implicitlyWait(4,TimeUnit.SECONDS);\r\n                driver.navigate().forward();\r\n                \r\n                driver.findElement(By.name(&quot;password&quot;)).sendKeys(&quot;Mypassword&quot;);\r\n        \r\n                }\r\n            }\r\n\r\n","title":"Multiple popup handling using java selenium on a travel website","body":"<p>I have successfully registered on airbnb website using a username and email now since I have already registered on airbnb the website is asking for password and I am unable to interact with this pop up earlier successfully handled the first pop up with google sign up as I used gmail to create a user .Now I will have to login using password please have a look</p>\n<pre><code>    package Practice;\n    import org.junit.Assert;\n    import org.openqa.selenium.*;\n    import org.openqa.selenium.chrome.ChromeDriver;\n    import org.openqa.selenium.Alert;\n    import org.openqa.selenium.chrome.ChromeOptions;\n    import org.openqa.selenium.firefox.FirefoxDriver;\n    import org.openqa.selenium.interactions.Actions;\n    import org.openqa.selenium.support.ui.ExpectedConditions;\n    import org.openqa.selenium.support.ui.WebDriverWait;\n    import java.util.ArrayList;\n    import java.time.Duration;\n    import java.util.Iterator;\n    import java.util.Set;\n    import java.util.concurrent.TimeUnit;\n    import org.openqa.selenium.support.ui.WebDriverWait;\n    import org.openqa.selenium.support.ui.ExpectedConditions;\n    import org.openqa.selenium.support.ui.Select;\n    \n    \n    public class Airbnbmumbai\n    {\n        public static void main(String[]args) throws InterruptedException {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;path to chromedriver&quot;);\n            ChromeOptions ops = new ChromeOptions();\n            ops.addArguments(&quot;--remote-allow-origins=*&quot;);\n            ChromeDriver driver = new ChromeDriver(ops);\n            driver.get(&quot;https://www.airbnb.co.in/&quot;);\n            driver.manage().window().maximize();\n            driver.navigate().forward();\n            Thread.sleep(1000);\n            // Clicking on trending //\n            driver.findElement(By.xpath(&quot;//div[@class=\\&quot;f19g2zq0 dir dir-ltr\\&quot;]&quot;)).click();\n            driver.navigate().forward();\n            Thread.sleep(2000);\n            // Getting the title of the page on starting of the page //\n            System.out.println(&quot;Page title is : &quot; + driver.getTitle());\n            driver.findElement(By.xpath(&quot;//input[@name=\\&quot;query\\&quot;]&quot;)).sendKeys(&quot;Mumbai&quot;);\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//div[@class=\\&quot;_r1t6ga\\&quot;]&quot;)).click();\n            driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;_1gazwvry notranslate\\&quot;])[4]&quot;)).click();\n            driver.navigate().forward();\n            driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[1]/div/div/div/header/div/div[2]/div[2]/div/div/div/form/div[2]/div/div[3]/div[4]/div/div/section/div/div/div/div/div[2]/div[1]/div/div[1]/div/div/div/div/div[2]/div[2]/div/div[3]/div/table/tbody/tr[5]/td[4]/div&quot;)).click();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//div[@class=\\&quot;p1kudodg dir dir-ltr\\&quot;]&quot;)).click();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;(//span[@class=\\&quot;i98ho2o dir dir-ltr\\&quot;])[2]&quot;)).click();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[1]/div/div/div/header/div/div[2]/div[2]/div/div/div/form/div[2]/div/div[5]/div[2]/div/div/div/section/div/div/div/div[2]/div[2]/div/button[2]/span&quot;)).click();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//span[@class=\\&quot;t1l18xbv dir dir-ltr\\&quot;]&quot;)).click();\n            driver.navigate().forward();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[2]/main/div[2]/div/div[2]/div/div/div/div/div[1]/div/div/div/div/div[2]&quot;)).click();\n            System.out.println(&quot;Page title is : &quot; + driver.getTitle());\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;/html/body/div[5]/div/div/div[1]/div/div[2]/div/div/div/div/div/div[2]/main/div[2]/div/div[2]/div/div/div/div/div[7]/div/div[2]/div/div/div/div[1]&quot;)).click();\n            // Now will work on the second window //\n            ArrayList&lt;String&gt; tabs2 = new ArrayList&lt;String&gt;(driver.getWindowHandles());\n            driver.switchTo().window(tabs2.get(1));\n                // Clicking on see all photos //\n            System.out.println(&quot;Page title is : &quot; + driver.getTitle());\n            Thread.sleep(4000);\n            driver.navigate().forward();\n            JavascriptExecutor js = (JavascriptExecutor) driver;\n            js.executeScript(&quot;window.scrollBy(0,450)&quot;, &quot;&quot;);\n            // Clicking on reserve //\n         driver.findElement(By.xpath(&quot;(//span[@class=\\&quot;t12u7nq4 dir dir-ltr\\&quot;])[2]&quot;)).click();\n         Thread.sleep(4000);\n         driver.navigate().forward();\n            js.executeScript(&quot;window.scrollBy(0,450)&quot;, &quot;&quot;);\n            // Signup with google //\n            driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;_1u21f56\\&quot;])[2]&quot;)).click();\n            String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\n            String subWindowHandler = null;\n            Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\n            Iterator&lt;String&gt; iterator = handles.iterator();\n            while (iterator.hasNext()){\n                subWindowHandler = iterator.next();\n            }\n            driver.switchTo().window(subWindowHandler); // switch to popup window\n    \n            // Now you are in the popup window, perform necessary actions here\n            Thread.sleep(2000);\n            driver.navigate().forward();\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//*[@id=\\&quot;identifierId\\&quot;]&quot;)).sendKeys(&quot;username&quot;);\n            Thread.sleep(2000);\n            driver.navigate().forward();\n            driver.findElement(By.xpath(&quot;//*[@id=\\&quot;identifierNext\\&quot;]/div/button/span&quot;)).click();\n            Thread.sleep(4000);\n            driver.navigate().forward();\n            driver.findElement(By.xpath(&quot;//*[@id=\\&quot;password\\&quot;]/div[1]/div/div[1]/input&quot;)).sendKeys(&quot;Password&quot;);\n            Thread.sleep(2000);\n            driver.navigate().forward();\n            driver.findElement(By.xpath(&quot;//*[@id=\\&quot;passwordNext\\&quot;]/div/button/span&quot;)).click();\n            // Since the user is already registered so entering password here //\n            System.out.println(&quot;Page title is : &quot; + driver.getTitle());\n            // Handling the pop up again //\n            driver.manage().timeouts().implicitlyWait(4,TimeUnit.SECONDS);\n            driver.navigate().forward();\n            \n            driver.findElement(By.name(&quot;password&quot;)).sendKeys(&quot;Mypassword&quot;);\n    \n            }\n        }\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1683017187,"post_id":76153038,"comment_id":134298577,"body_markdown":"Eclipse 2021-03 is four releases behind. Please upgrade. If your issue persist, delete the error log (the errors shown in your screenshot are a couple of days old), reproduce the issue and if any, select the error, hit Ctrl+C and paste it into your question formatted as _Sample Code_ (please show the complete error, not only the stack trace). Have you installed additional plugins?","body":"Eclipse 2021-03 is four releases behind. Please upgrade. If your issue persist, delete the error log (the errors shown in your screenshot are a couple of days old), reproduce the issue and if any, select the error, hit Ctrl+C and paste it into your question formatted as <i>Sample Code</i> (please show the complete error, not only the stack trace). Have you installed additional plugins?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1683020297,"post_id":76153038,"comment_id":134299218,"body_markdown":"@howlger Regarding the errors being a couple of days old - they were new when the screenshot has been originally added (the post was in the [staging ground](/help/what-is-staging-ground) before being published).","body":"@howlger Regarding the errors being a couple of days old - they were new when the screenshot has been originally added (the post was in the <a href=\"/help/what-is-staging-ground\">staging ground</a> before being published)."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1683027255,"post_id":76153038,"comment_id":134300523,"body_markdown":"@dan1st Thanks for the info. I didn&#39;t know about that. The staging ground seems not be helpful here: outdated software for no reason, no exact description to reproduce, cropped screenshot and incomplete error message.","body":"@dan1st Thanks for the info. I didn&#39;t know about that. The staging ground seems not be helpful here: outdated software for no reason, no exact description to reproduce, cropped screenshot and incomplete error message."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1683038865,"post_id":76153038,"comment_id":134303452,"body_markdown":"@howlger It&#39;s 2023, so that&#39;s *8* releases behind.","body":"@howlger It&#39;s 2023, so that&#39;s <i>8</i> releases behind."}],"owner":{"account_id":22369550,"reputation":1,"user_id":16584813,"display_name":"VR4"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683016339,"creation_date":1683016084,"question_id":76153038,"body_markdown":"I was programming correctly in Eclipse IDE for Enterprise Java and Web Developers - 2021-03 and one day, suddenly, control+click to access variable, method or class references stopped working.\r\n\r\nNow I&#39;m using F3 to access them, but I prefer control+click because it&#39;s more comfortable.\r\n\r\nI&#39;ve tried touching the hyperlink options but nothing I&#39;ve tried works.\r\n\r\nHere is the image of error log window when I use control+click:\r\n![image](https://i.stack.imgur.com/dZMeH.png)\r\n\r\nAnd here below is the error when I click twice for accessing some element.\r\n\r\n```none\r\njava.lang.IllegalStateException: Conflicting handlers: {[org.eclipse.ui.internal.handlers.PinEditorHandler@169043e3,  for &#39;org.eclipse.ui.window.pinEditor&#39;,  in WorkbenchContext, activeWhen=AndExpression [children=[WithExpression [variable=activeEditorId, children=[&lt;instanceof value=&quot;java.lang.String&quot;/&gt;]], &lt;test property=&quot;reuseEditor&quot; plug-in activation: lazy/&gt;]], active=true, sourcePriority=1074003968, participating=true]} vs {[org.eclipse.ui.internal.handlers.PinEditorHandler,  for &#39;org.eclipse.ui.window.pinEditor&#39;,  in WorkbenchContext, activeWhen=AndExpression [children=[WithExpression [variable=activeEditorId, children=[&lt;instanceof value=&quot;java.lang.String&quot;/&gt;]], &lt;test property=&quot;reuseEditor&quot; plug-in activation: lazy/&gt;]], active=true, sourcePriority=1074003968, participating=true]} in: PartImpl (org.eclipse.e4.ui.compatibility.editor)  removeOnHide org.eclipse.jdt.ui.CompilationUnitEditorContext\r\n\tat org.eclipse.ui.internal.handlers.LegacyHandlerService$HandlerSelectionFunction.compute(LegacyHandlerService.java:145)\r\n\tat org.eclipse.e4.core.internal.contexts.ValueComputation.get(ValueComputation.java:70)\r\n\tat org.eclipse.e4.core.internal.contexts.EclipseContext.internalGet(EclipseContext.java:250)\r\n\tat org.eclipse.e4.core.internal.contexts.EclipseContext.get(EclipseContext.java:237)\r\n\tat org.eclipse.e4.core.commands.internal.HandlerServiceImpl.lookUpHandler(HandlerServiceImpl.java:103)\r\n\tat org.eclipse.e4.core.commands.internal.HandlerServiceHandler.setEnabled(HandlerServiceHandler.java:75)\r\n\tat org.eclipse.core.commands.Command.setEnabled(Command.java:856)\r\n\tat org.eclipse.e4.core.commands.internal.HandlerServiceImpl.canExecute(HandlerServiceImpl.java:179)\r\n\tat org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.canExecuteItem(HandledContributionItem.java:459)\r\n\tat org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem$1.run(AbstractContributionItem.java:516)\r\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\r\n\tat org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.updateItemEnablement(AbstractContributionItem.java:557)\r\n\tat org.eclipse.e4.ui.workbench.renderers.swt.ToolItemUpdater.run(ToolItemUpdater.java:87)\r\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:4124)\r\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:3256)\r\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(Native Method)\r\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3624)\r\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1157)\r\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\r\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1046)\r\n\tat org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)\r\n\tat org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:644)\r\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\r\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:551)\r\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:156)\r\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:152)\r\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:653)\r\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:590)\r\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1461)\r\n```\r\n\r\n","title":"Why control+click doesn&#180;t work in Eclipse?","body":"<p>I was programming correctly in Eclipse IDE for Enterprise Java and Web Developers - 2021-03 and one day, suddenly, control+click to access variable, method or class references stopped working.</p>\n<p>Now I'm using F3 to access them, but I prefer control+click because it's more comfortable.</p>\n<p>I've tried touching the hyperlink options but nothing I've tried works.</p>\n<p>Here is the image of error log window when I use control+click:\n<img src=\"https://i.stack.imgur.com/dZMeH.png\" alt=\"image\" /></p>\n<p>And here below is the error when I click twice for accessing some element.</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: Conflicting handlers: {[org.eclipse.ui.internal.handlers.PinEditorHandler@169043e3,  for 'org.eclipse.ui.window.pinEditor',  in WorkbenchContext, activeWhen=AndExpression [children=[WithExpression [variable=activeEditorId, children=[&lt;instanceof value=&quot;java.lang.String&quot;/&gt;]], &lt;test property=&quot;reuseEditor&quot; plug-in activation: lazy/&gt;]], active=true, sourcePriority=1074003968, participating=true]} vs {[org.eclipse.ui.internal.handlers.PinEditorHandler,  for 'org.eclipse.ui.window.pinEditor',  in WorkbenchContext, activeWhen=AndExpression [children=[WithExpression [variable=activeEditorId, children=[&lt;instanceof value=&quot;java.lang.String&quot;/&gt;]], &lt;test property=&quot;reuseEditor&quot; plug-in activation: lazy/&gt;]], active=true, sourcePriority=1074003968, participating=true]} in: PartImpl (org.eclipse.e4.ui.compatibility.editor)  removeOnHide org.eclipse.jdt.ui.CompilationUnitEditorContext\n    at org.eclipse.ui.internal.handlers.LegacyHandlerService$HandlerSelectionFunction.compute(LegacyHandlerService.java:145)\n    at org.eclipse.e4.core.internal.contexts.ValueComputation.get(ValueComputation.java:70)\n    at org.eclipse.e4.core.internal.contexts.EclipseContext.internalGet(EclipseContext.java:250)\n    at org.eclipse.e4.core.internal.contexts.EclipseContext.get(EclipseContext.java:237)\n    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.lookUpHandler(HandlerServiceImpl.java:103)\n    at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.setEnabled(HandlerServiceHandler.java:75)\n    at org.eclipse.core.commands.Command.setEnabled(Command.java:856)\n    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.canExecute(HandlerServiceImpl.java:179)\n    at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.canExecuteItem(HandledContributionItem.java:459)\n    at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem$1.run(AbstractContributionItem.java:516)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\n    at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.updateItemEnablement(AbstractContributionItem.java:557)\n    at org.eclipse.e4.ui.workbench.renderers.swt.ToolItemUpdater.run(ToolItemUpdater.java:87)\n    at org.eclipse.swt.widgets.Display.runTimer(Display.java:4124)\n    at org.eclipse.swt.widgets.Display.messageProc(Display.java:3256)\n    at org.eclipse.swt.internal.win32.OS.DispatchMessage(Native Method)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3624)\n    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1157)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\n    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1046)\n    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)\n    at org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:644)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:551)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:156)\n    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:152)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:653)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:590)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1461)\n</code></pre>\n"},{"tags":["java","recursion","flood-fill"],"answers":[{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682234269,"creation_date":1682233956,"answer_id":76083564,"question_id":76065184,"body_markdown":"#### The algorithm cannot just scan and change the array in one pass!   \r\n\r\n---\r\n\r\n*Negative* example, how it does **not work**!  \r\n\r\nJust one row (one-dimensional) and using `W` and `L` instead of `░` and `█`. Lets start with `WLLL` and work left to right:  \r\n`0` is Water &amp;rarr; nothing done: `WLLL`  \r\n`1` is Land and has neighbor Water &amp;rarr; changed to Water: `WWLL`  \r\n`2` is Land and (now) has neighbor Water &amp;rarr; changed to Water:`WWWL`  \r\n`3` same as above:  `WWWW`  \r\nat the end of one iteration the whole row is Water.\r\n\r\nThis will not happen if working right to left:  \r\n`3` is Land but no Water neighbor &amp;rarr; nothing changed: `WLLL`  \r\n`2` is Land but no Water neighbor &amp;rarr; nothing changed: `WLLL`  \r\n`1` is Land with Water neighbor &amp;rarr; changed to Water: `WWLL`  \r\n`0` is Water &amp;rarr; nothing changed: `WWLL`  \r\nnow only only Land was changed to Water.\r\n\r\nSimilar will also happen with subsequent rows, two-dimensional map.\r\n\r\n---\r\n\r\nSome suggestions:  \r\n- use a temporary array to hold the old, new, or changed state; or\r\n- use a third value to mark cells that will change (e.g. SWAMP); or\r\n- ... ?\r\n\r\n---\r\n\r\nPseudocode first option, using a boolean array to hold the values to be changed:\r\n````\r\nchange = new boolean[][]\r\n\r\n// first pass\r\nfor i : rows\r\n  for j : columns\r\n    change[i][j] = map[i][j] is LAND and nearWater\r\n\r\n// second pass\r\nfor i : rows\r\n  for j : columns\r\n    if change[i][j]\r\n      map[i][j] = WATER\r\n````\r\n&lt;sub&gt;obviously using correct dimensions, indices, methods, ...&lt;/sub&gt;  \r\n&lt;sup&gt;This is a single iteration, it must be repeated until the map is not further changed.&lt;/sup&gt;\r\n\r\n---\r\n\r\nPseudocode second option, using a third value in map, to denote the values to be changed:\r\n````\r\nSWAMP = &#39;#&#39;\r\n\r\n// first pass\r\nfor i : rows\r\n  for j : columns\r\n    if map[i][j] is LAND and nearWater\r\n      map[i][j] = SWAMP\r\n\r\n// second pass\r\nfor i : rows\r\n  for j : columns\r\n    if map[i][j] is SWAMP\r\n      map[i][j] = WATER\r\n````\r\nNote: `nearWater` should not consider SWAMP as being WATER!  \r\n&lt;sub&gt;obviously using correct dimensions, indices, methods, ...&lt;/sub&gt;  \r\n&lt;sup&gt;This is a single iteration, it must be repeated until the map is not further changed.&lt;/sup&gt;\r\n\r\n---\r\n\r\nThis is not the algorithm called [Flood Fill](https://en.wikipedia.org/wiki/Flood_fill)!  \r\nThe *Flood Fill* algorithm usually starts at a single position and *floods* its neighbors recursively - it usually does not scan the whole map.\r\n","title":"FloodFill implementation in recursive manner","body":"<h4>The algorithm cannot just scan and change the array in one pass!</h4>\n<hr />\n<p><em>Negative</em> example, how it does <strong>not work</strong>!</p>\n<p>Just one row (one-dimensional) and using <code>W</code> and <code>L</code> instead of <code>░</code> and <code>█</code>. Lets start with <code>WLLL</code> and work left to right:<br />\n<code>0</code> is Water → nothing done: <code>WLLL</code><br />\n<code>1</code> is Land and has neighbor Water → changed to Water: <code>WWLL</code><br />\n<code>2</code> is Land and (now) has neighbor Water → changed to Water:<code>WWWL</code><br />\n<code>3</code> same as above:  <code>WWWW</code><br />\nat the end of one iteration the whole row is Water.</p>\n<p>This will not happen if working right to left:<br />\n<code>3</code> is Land but no Water neighbor → nothing changed: <code>WLLL</code><br />\n<code>2</code> is Land but no Water neighbor → nothing changed: <code>WLLL</code><br />\n<code>1</code> is Land with Water neighbor → changed to Water: <code>WWLL</code><br />\n<code>0</code> is Water → nothing changed: <code>WWLL</code><br />\nnow only only Land was changed to Water.</p>\n<p>Similar will also happen with subsequent rows, two-dimensional map.</p>\n<hr />\n<p>Some suggestions:</p>\n<ul>\n<li>use a temporary array to hold the old, new, or changed state; or</li>\n<li>use a third value to mark cells that will change (e.g. SWAMP); or</li>\n<li>... ?</li>\n</ul>\n<hr />\n<p>Pseudocode first option, using a boolean array to hold the values to be changed:</p>\n<pre><code>change = new boolean[][]\n\n// first pass\nfor i : rows\n  for j : columns\n    change[i][j] = map[i][j] is LAND and nearWater\n\n// second pass\nfor i : rows\n  for j : columns\n    if change[i][j]\n      map[i][j] = WATER\n</code></pre>\n<p><sub>obviously using correct dimensions, indices, methods, ...</sub><br />\n<sup>This is a single iteration, it must be repeated until the map is not further changed.</sup></p>\n<hr />\n<p>Pseudocode second option, using a third value in map, to denote the values to be changed:</p>\n<pre><code>SWAMP = '#'\n\n// first pass\nfor i : rows\n  for j : columns\n    if map[i][j] is LAND and nearWater\n      map[i][j] = SWAMP\n\n// second pass\nfor i : rows\n  for j : columns\n    if map[i][j] is SWAMP\n      map[i][j] = WATER\n</code></pre>\n<p>Note: <code>nearWater</code> should not consider SWAMP as being WATER!<br />\n<sub>obviously using correct dimensions, indices, methods, ...</sub><br />\n<sup>This is a single iteration, it must be repeated until the map is not further changed.</sup></p>\n<hr />\n<p>This is not the algorithm called <a href=\"https://en.wikipedia.org/wiki/Flood_fill\" rel=\"nofollow noreferrer\">Flood Fill</a>!<br />\nThe <em>Flood Fill</em> algorithm usually starts at a single position and <em>floods</em> its neighbors recursively - it usually does not scan the whole map.</p>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683016116,"creation_date":1682000515,"question_id":76065184,"body_markdown":"  Flood fill means that it takes initial rectangular area containing land and water cells and imitates flooding it:\r\neach flood step water cell converts neighbour land cells (up, left, right and down) to water.\r\n\r\nIt takes some steps to completely flood an area and after that algorithm stops.\r\nWe must implement FloodFill in recursive manner and make flood method call itself until all the area becomes water.\r\n\r\nBut something goes wrong. What is my problem?\r\n\r\n\r\n    class RecursiveFloodFill implements FloodFill {\r\n        private char[][] grid;\r\n\r\n      @Override\r\n    public void flood(final String map, final FloodLogger logger) {\r\n        logger.log(map);\r\n        String newMap = floodStep(map);\r\n        if (!newMap.equals(map)) {\r\n            flood(newMap, logger);\r\n        }\r\n    }\r\n\r\n    private String floodStep(final String map) {\r\n        char[][] area = stringToArea(map);\r\n        char[][] newArea = new char[area.length][area[0].length];\r\n        for (int row = 0; row &lt; area.length; row++) {\r\n            System.arraycopy(area[row], 0, newArea[row], 0, area[row].length);\r\n        }\r\n\r\n        for (int row = 0; row &lt; area.length; row++) {\r\n            for (int col = 0; col &lt; area[row].length; col++) {\r\n                if (area[row][col] == WATER) {\r\n                        newArea[row - 1][col] = WATER;\r\n                        newArea[row + 1][col] = WATER;\r\n                        newArea[row][col - 1] = WATER;\r\n                        newArea[row][col + 1] = WATER;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return areaToString(newArea);\r\n    }","title":"FloodFill implementation in recursive manner","body":"<p>Flood fill means that it takes initial rectangular area containing land and water cells and imitates flooding it:\neach flood step water cell converts neighbour land cells (up, left, right and down) to water.</p>\n<p>It takes some steps to completely flood an area and after that algorithm stops.\nWe must implement FloodFill in recursive manner and make flood method call itself until all the area becomes water.</p>\n<p>But something goes wrong. What is my problem?</p>\n<pre><code>class RecursiveFloodFill implements FloodFill {\n    private char[][] grid;\n\n  @Override\npublic void flood(final String map, final FloodLogger logger) {\n    logger.log(map);\n    String newMap = floodStep(map);\n    if (!newMap.equals(map)) {\n        flood(newMap, logger);\n    }\n}\n\nprivate String floodStep(final String map) {\n    char[][] area = stringToArea(map);\n    char[][] newArea = new char[area.length][area[0].length];\n    for (int row = 0; row &lt; area.length; row++) {\n        System.arraycopy(area[row], 0, newArea[row], 0, area[row].length);\n    }\n\n    for (int row = 0; row &lt; area.length; row++) {\n        for (int col = 0; col &lt; area[row].length; col++) {\n            if (area[row][col] == WATER) {\n                    newArea[row - 1][col] = WATER;\n                    newArea[row + 1][col] = WATER;\n                    newArea[row][col - 1] = WATER;\n                    newArea[row][col + 1] = WATER;\n                }\n            }\n        }\n    }\n    return areaToString(newArea);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"owner":{"account_id":28472726,"reputation":1,"user_id":21787816,"display_name":"Sanjay karakoti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683016044,"creation_date":1683016044,"question_id":76153033,"body_markdown":"DispatcherClass not found exception while using  jakarta (web.XML)\r\n\r\nI tried but got dispatcher class not found exception . Can anybody help me how to configure dispatcher servlet.(spring MVC 6.0) using web.xml while using the jakarta latest version.","title":"how to configure a dispatcher servlet using web.xml with jakarta latest version(6.0)","body":"<p>DispatcherClass not found exception while using  jakarta (web.XML)</p>\n<p>I tried but got dispatcher class not found exception . Can anybody help me how to configure dispatcher servlet.(spring MVC 6.0) using web.xml while using the jakarta latest version.</p>\n"},{"tags":["java","sql-server","schemaspy"],"owner":{"account_id":28480123,"reputation":1,"user_id":21794211,"display_name":"user21794211"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683015959,"answer_count":0,"score":0,"last_activity_date":1683015935,"creation_date":1683015602,"question_id":76152983,"body_markdown":"Getting an error while setting up SchemaSpy\r\n\r\n&gt; Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;PKIX path building failed:  \r\n&gt; sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;. ClientConnectionId:2cabc4bd-ace9-4dd2-956f-4496ddf7bf0e\r\n&gt; \r\n&gt; Caused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed:  \r\n&gt; sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nPoint to note that I have SQL installed on diff VM and using schemaspy from App server","title":"SchemaSpy error - KIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException","body":"<p>Getting an error while setting up SchemaSpy</p>\n<blockquote>\n<p>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;PKIX path building failed:<br />\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;. ClientConnectionId:2cabc4bd-ace9-4dd2-956f-4496ddf7bf0e</p>\n<p>Caused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed:<br />\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n</blockquote>\n<p>Point to note that I have SQL installed on diff VM and using schemaspy from App server</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1682040391,"post_id":76069283,"comment_id":134157061,"body_markdown":"The error tells you what you need to do. Read it again carefully.","body":"The error tells you what you need to do. Read it again carefully."},{"owner":{"account_id":28365505,"reputation":23,"user_id":21694874,"display_name":"user21694874"},"score":0,"creation_date":1682041255,"post_id":76069283,"comment_id":134157146,"body_markdown":"But I am not able to find the 1.5 version in the project sdk dropdown, sorry I am new so don&#39;t know much about it.","body":"But I am not able to find the 1.5 version in the project sdk dropdown, sorry I am new so don&#39;t know much about it."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1682041688,"post_id":76069283,"comment_id":134157197,"body_markdown":"Upgrade language version in maven file\nSee https://www.baeldung.com/maven-java-versionsection 2.1  - Does it look familiar?","body":"Upgrade language version in maven file See <a href=\"https://www.baeldung.com/maven-java-versionsection\" rel=\"nofollow noreferrer\">baeldung.com/maven-java-versionsection</a> 2.1  - Does it look familiar?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1682057033,"post_id":76069283,"comment_id":134158666,"body_markdown":"You JDK 20 tells you that you can&#39;t compile targeted to JDK 5 (which is by the way ancient old) ... you have to use more recent versions means you should use `&lt;maven.compiler.release&gt;20&lt;/maven.compiler.release&gt;` or maybe something like `&lt;maven.compiler.release&gt;8&lt;/maven.compiler.release&gt;` or alike...","body":"You JDK 20 tells you that you can&#39;t compile targeted to JDK 5 (which is by the way ancient old) ... you have to use more recent versions means you should use <code>&lt;maven.compiler.release&gt;20&lt;&#47;maven.compiler.release&gt;</code> or maybe something like <code>&lt;maven.compiler.release&gt;8&lt;&#47;maven.compiler.release&gt;</code> or alike..."}],"answers":[{"tags":[],"owner":{"account_id":15484486,"reputation":54,"user_id":11170876,"display_name":"Muhammad Faisal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682043038,"creation_date":1682043038,"answer_id":76069421,"question_id":76069283,"body_markdown":"You need to install jdk 1.8 that is the most using jdk. \r\n\r\nYou are trying to run this program with java 1.5, that is deprecated in most of the IDEs. ","title":"Maven exception thrown while running the program","body":"<p>You need to install jdk 1.8 that is the most using jdk.</p>\n<p>You are trying to run this program with java 1.5, that is deprecated in most of the IDEs.</p>\n"},{"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683015137,"creation_date":1682060737,"answer_id":76070712,"question_id":76069283,"body_markdown":"I think first you have to remove\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;5&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;5&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\nAnd try something like:\r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;java.version&gt;20&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\nLittle more explanations:\r\n`java.version` is setting which java you version would like to use. But there are two things to consider:\r\n   - Which JDK(s) or JVM(s) you have installed on your computer\r\n   - Which one of them is linked to your project. \r\n\r\nNow In `Intellij` (your IDE) you can go to root project folder then right click and go to the `Open Module Settings`. Then in the popup window on the left side you will see `Project` click on it. You will see `SDK` and `Language Level` options. They should be the same as `java.version`. You should select also the corresponding version. In the `SDK` you can select the path to particular `JDK` - `Java Development Kit` or `JVM` - `Java Virtual Machine`.\r\n\r\nGood luck to all\r\n\r\nReply: -\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/goyf4.png\r\n  [2]: https://i.stack.imgur.com/utztU.png\r\n\r\nAre you talking about this?\r\n`In this window please look at the left side menu on the top there is Project (just below Project Settigs). Click on this`\r\n\r\nWhat do you mean by same as java.version?\r\n`When you click on Project you will see. Please read one more time my previous answer`\r\n\r\nI have currently jdk 20. Please let me know what changes you need over here.\r\n\r\n","title":"Maven exception thrown while running the program","body":"<p>I think first you have to remove</p>\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;5&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;5&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>And try something like:</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;20&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Little more explanations:\n<code>java.version</code> is setting which java you version would like to use. But there are two things to consider:</p>\n<ul>\n<li>Which JDK(s) or JVM(s) you have installed on your computer</li>\n<li>Which one of them is linked to your project.</li>\n</ul>\n<p>Now In <code>Intellij</code> (your IDE) you can go to root project folder then right click and go to the <code>Open Module Settings</code>. Then in the popup window on the left side you will see <code>Project</code> click on it. You will see <code>SDK</code> and <code>Language Level</code> options. They should be the same as <code>java.version</code>. You should select also the corresponding version. In the <code>SDK</code> you can select the path to particular <code>JDK</code> - <code>Java Development Kit</code> or <code>JVM</code> - <code>Java Virtual Machine</code>.</p>\n<p>Good luck to all</p>\n<p>Reply: -\n<a href=\"https://i.stack.imgur.com/goyf4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/goyf4.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/utztU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/utztU.png\" alt=\"enter image description here\" /></a></p>\n<p>Are you talking about this?\n<code>In this window please look at the left side menu on the top there is Project (just below Project Settigs). Click on this</code></p>\n<p>What do you mean by same as java.version?\n<code>When you click on Project you will see. Please read one more time my previous answer</code></p>\n<p>I have currently jdk 20. Please let me know what changes you need over here.</p>\n"}],"owner":{"account_id":28365505,"reputation":23,"user_id":21694874,"display_name":"user21694874"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1683015137,"creation_date":1682040278,"question_id":76069283,"body_markdown":"When I am trying to run the program, I am getting Maven exception, something to do with the version. Can anyone please help with how to configure the version here?\r\n\r\n![enter image description here](https://i.stack.imgur.com/CeucJ.png)\r\n\r\npom.xml file:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.imalittletester&lt;/groupId&gt;\r\n  &lt;artifactId&gt;DemoMaven1&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;DemoMaven1&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;5&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;5&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nI am trying to run a Java program.","title":"Maven exception thrown while running the program","body":"<p>When I am trying to run the program, I am getting Maven exception, something to do with the version. Can anyone please help with how to configure the version here?</p>\n<p><img src=\"https://i.stack.imgur.com/CeucJ.png\" alt=\"enter image description here\" /></p>\n<p>pom.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.imalittletester&lt;/groupId&gt;\n  &lt;artifactId&gt;DemoMaven1&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;DemoMaven1&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;5&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;5&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I am trying to run a Java program.</p>\n"},{"tags":["java","spring-boot","testing","mockito"],"comments":[{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682986294,"post_id":76150695,"comment_id":134294967,"body_markdown":"AFIK  running test with @RunWith(SpringRunner.class) would not instantiate Mockito. you probably need something like MockitoAnnotations.initMocks(this); call in the setup/before test method.\n\nalso check this out https://stackoverflow.com/questions/48589893/autowire-mockmvc-spring-data-rest","body":"AFIK  running test with @RunWith(SpringRunner.class) would not instantiate Mockito. you probably need something like MockitoAnnotations.initMocks(this); call in the setup/before test method.  also check this out <a href=\"https://stackoverflow.com/questions/48589893/autowire-mockmvc-spring-data-rest\" title=\"autowire mockmvc spring data rest\">stackoverflow.com/questions/48589893/&hellip;</a>"},{"owner":{"account_id":1771189,"reputation":32923,"user_id":1615903,"display_name":"1615903"},"score":0,"creation_date":1683022694,"post_id":76150695,"comment_id":134299676,"body_markdown":"I changed the comment to an answer instead.","body":"I changed the comment to an answer instead."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1683024753,"post_id":76150695,"comment_id":134300048,"body_markdown":"Does this answer your question? [Why are my mocked methods not called when executing a unit test?](https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test) (definitely a dupe)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test\">Why are my mocked methods not called when executing a unit test?</a> (definitely a dupe)"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683093943,"post_id":76152764,"comment_id":134311746,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76152764/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28476774,"reputation":11,"user_id":21791329,"display_name":"Matt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683013835,"creation_date":1683013835,"answer_id":76152764,"question_id":76150695,"body_markdown":"Autowiring the TestService solved my problem.","title":"Spring Boot Mockito @MockBean does not change the return value","body":"<p>Autowiring the TestService solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":1771189,"reputation":32923,"user_id":1615903,"display_name":"1615903"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683015063,"creation_date":1683015063,"answer_id":76152911,"question_id":76150695,"body_markdown":"`TestService` in your controller is not a spring bean, you are instantiating it directly: \r\n\r\n    public TestService testService = new testServiceImpl();. \r\n\r\nAutowire it instead.","title":"Spring Boot Mockito @MockBean does not change the return value","body":"<p><code>TestService</code> in your controller is not a spring bean, you are instantiating it directly:</p>\n<pre><code>public TestService testService = new testServiceImpl();. \n</code></pre>\n<p>Autowire it instead.</p>\n"}],"owner":{"account_id":28476774,"reputation":11,"user_id":21791329,"display_name":"Matt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1683110058,"answer_count":2,"score":1,"last_activity_date":1683015063,"creation_date":1682981958,"question_id":76150695,"body_markdown":"I have working Spring Boot app and want to test the API endpoints. I am running my test with SpringRunner, using @MockBean annotation and doReturn...when. But still, I am getting the original reponse and the mocking has no effect.\r\n\r\nCode from my app:\r\n```\r\npublic TestService testService = new testServiceImpl();\r\n\r\n@GetMapping(&quot;/test&quot;)\r\n\tpublic String test() {\r\n\t\treturn testService.greet();\r\n\t}\r\n```\r\n\r\nTestService:\r\n\r\n```\r\n@Service\r\npublic class TestServiceImpl implements TestService {\r\n    public String greet() {\r\n        return &quot;Hello&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAnd my test app:\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@WebMvcTest(ExampleApplication.class)\r\nclass ExampleApplicationTests {\r\n\t@Autowired\r\n\tMockMvc mockMvc;\r\n\r\n\t@MockBean\r\n\tprivate TestServiceImpl testService;\r\n\r\n\t@Test\r\n\tvoid test() throws Exception{\r\n\t\tdoReturn(&quot;Hi&quot;).when(testService).greet();\r\n\r\n\t\tmockMvc.perform(MockMvcRequestBuilders\r\n\t\t\t\t.get(&quot;/test&quot;)\r\n\t\t\t\t.contentType(MediaType.APPLICATION_JSON))\r\n\t\t\t\t.andExpect(status().isOk())\r\n\t\t\t\t.andExpect(jsonPath(&quot;$&quot;, notNullValue()))\r\n\t\t\t\t.andExpect(jsonPath(&quot;$&quot;, is(&quot;Hi&quot;)));\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nThis test fails as I get Hello as a response.\r\n\r\n\r\n\r\n\r\nI have tried if the mocking works inside the test and it does.\r\n\r\n```\r\nassert testService.greet().equals(&quot;Hi&quot;);\r\n```\r\n\r\nSo the problem must be in using it outside my test class.\r\n","title":"Spring Boot Mockito @MockBean does not change the return value","body":"<p>I have working Spring Boot app and want to test the API endpoints. I am running my test with SpringRunner, using @MockBean annotation and doReturn...when. But still, I am getting the original reponse and the mocking has no effect.</p>\n<p>Code from my app:</p>\n<pre><code>public TestService testService = new testServiceImpl();\n\n@GetMapping(&quot;/test&quot;)\n    public String test() {\n        return testService.greet();\n    }\n</code></pre>\n<p>TestService:</p>\n<pre><code>@Service\npublic class TestServiceImpl implements TestService {\n    public String greet() {\n        return &quot;Hello&quot;;\n    }\n}\n</code></pre>\n<p>And my test app:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest(ExampleApplication.class)\nclass ExampleApplicationTests {\n    @Autowired\n    MockMvc mockMvc;\n\n    @MockBean\n    private TestServiceImpl testService;\n\n    @Test\n    void test() throws Exception{\n        doReturn(&quot;Hi&quot;).when(testService).greet();\n\n        mockMvc.perform(MockMvcRequestBuilders\n                .get(&quot;/test&quot;)\n                .contentType(MediaType.APPLICATION_JSON))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(&quot;$&quot;, notNullValue()))\n                .andExpect(jsonPath(&quot;$&quot;, is(&quot;Hi&quot;)));\n    }\n\n}\n\n</code></pre>\n<p>This test fails as I get Hello as a response.</p>\n<p>I have tried if the mocking works inside the test and it does.</p>\n<pre><code>assert testService.greet().equals(&quot;Hi&quot;);\n</code></pre>\n<p>So the problem must be in using it outside my test class.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":2466481,"reputation":2619,"user_id":2149453,"display_name":"Himeshgiri gosvami"},"score":1,"creation_date":1682926846,"post_id":8799439,"comment_id":134285102,"body_markdown":"If you owns the code base, you should create one public method, which calls private method. if you did not owns the code and you still have to write test for private method (really!), then use powermock. https://github.com/powermock/powermock/wiki/MockPrivate","body":"If you owns the code base, you should create one public method, which calls private method. if you did not owns the code and you still have to write test for private method (really!), then use powermock. <a href=\"https://github.com/powermock/powermock/wiki/MockPrivate\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/wiki/MockPrivate</a>"}],"answers":[{"comments":[{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":6,"creation_date":1326182031,"post_id":8799471,"comment_id":10978879,"body_markdown":"The only legitimate reason is to test a part of a legacy system. If you begin to test private/package-private method, you expose your object internals. Doing so usually results in poor refactorable code. PRefer composition so you can achieve testability, with all the goodness of an object oriented system.","body":"The only legitimate reason is to test a part of a legacy system. If you begin to test private/package-private method, you expose your object internals. Doing so usually results in poor refactorable code. PRefer composition so you can achieve testability, with all the goodness of an object oriented system."},{"owner":{"account_id":9036,"reputation":3625,"user_id":16515,"accept_rate":100,"display_name":"Roland Schneider"},"score":1,"creation_date":1326227286,"post_id":8799471,"comment_id":10993939,"body_markdown":"Agreed - that would be the preferred way. However, if you really want to test private methods with mockito, this is the only (typesafe) option you have. My answer was a bit hasty though, I should have pointed out the risks, like you and the others have done it.","body":"Agreed - that would be the preferred way. However, if you really want to test private methods with mockito, this is the only (typesafe) option you have. My answer was a bit hasty though, I should have pointed out the risks, like you and the others have done it."},{"owner":{"account_id":2741190,"reputation":1942,"user_id":2362720,"display_name":"Andrew Feng"},"score":0,"creation_date":1485305261,"post_id":8799471,"comment_id":70868238,"body_markdown":"This is my preferred way. There is nothing wrong to expose object internal in package-private level; and unit test is white-box testing, you need to know the internal for testing.","body":"This is my preferred way. There is nothing wrong to expose object internal in package-private level; and unit test is white-box testing, you need to know the internal for testing."}],"tags":[],"owner":{"account_id":9036,"reputation":3625,"user_id":16515,"accept_rate":100,"display_name":"Roland Schneider"},"comment_count":3,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1326177353,"creation_date":1326177353,"answer_id":8799471,"question_id":8799439,"body_markdown":"Put your test in the same package, but a different source folder (src/main/java vs. src/test/java) and make those methods package-private. Imo testability is more important than privacy.","title":"Testing Private method using mockito","body":"<p>Put your test in the same package, but a different source folder (src/main/java vs. src/test/java) and make those methods package-private. Imo testability is more important than privacy.</p>\n"},{"comments":[{"owner":{"account_id":994008,"reputation":1130,"user_id":1010444,"accept_rate":80,"display_name":"eggmatters"},"score":44,"creation_date":1578522264,"post_id":8799482,"comment_id":105470435,"body_markdown":"There is a fatal assumption made by that statement: &gt;Mocking private methods is a hint that there is something wrong with OO understanding. If I&#39;m testing a public method, and it calls private methods, I would want to mock private method returns. Going by the above assumption obviates the need to even _implement_ private methods. How is that a poor understanding of OO?","body":"There is a fatal assumption made by that statement: &gt;Mocking private methods is a hint that there is something wrong with OO understanding. If I&#39;m testing a public method, and it calls private methods, I would want to mock private method returns. Going by the above assumption obviates the need to even <i>implement</i> private methods. How is that a poor understanding of OO?"},{"owner":{"account_id":7981643,"reputation":1304,"user_id":6022740,"display_name":"Jason Glez"},"score":8,"creation_date":1581128340,"post_id":8799482,"comment_id":106337938,"body_markdown":"@eggmatters According to Baeldung &quot;Mocking techniques should be applied to the external dependencies of the class and not to the class itself.\nIf mocking of private methods is essential for testing our classes, it usually indicates a bad design.&quot;\nHere is a cool thread about it https://softwareengineering.stackexchange.com/questions/100959/how-do-you-unit-test-private-methods","body":"@eggmatters According to Baeldung &quot;Mocking techniques should be applied to the external dependencies of the class and not to the class itself. If mocking of private methods is essential for testing our classes, it usually indicates a bad design.&quot; Here is a cool thread about it <a href=\"https://softwareengineering.stackexchange.com/questions/100959/how-do-you-unit-test-private-methods\" title=\"how do you unit test private methods\">softwareengineering.stackexchange.com/questions/100959/&hellip;</a>"},{"owner":{"account_id":4028316,"reputation":169,"user_id":3423146,"display_name":"Alexander Stohr"},"score":1,"creation_date":1618559425,"post_id":8799482,"comment_id":118642687,"body_markdown":"if you see object as the thing to test it might be right.\nbut if you want to test functionality then the functions are the thing you want to go for. functions are for modularisation and having a module would mean to verify it first to a sane degree before verifying anything that uses it - this eases and improves overall testing results quality.","body":"if you see object as the thing to test it might be right. but if you want to test functionality then the functions are the thing you want to go for. functions are for modularisation and having a module would mean to verify it first to a sane degree before verifying anything that uses it - this eases and improves overall testing results quality."},{"owner":{"account_id":5494271,"reputation":2925,"user_id":4365948,"accept_rate":80,"display_name":"Heschoon"},"score":3,"creation_date":1633361530,"post_id":8799482,"comment_id":122733469,"body_markdown":"The OO &#39;trick&#39; to test private method logic is to actually to create new classes having those private methods as public methods. This way you can unit test your new more granular classes, testing the previously private logic. Complex private method logic can indeed be a sign that your class has more than one responsibility and might be better broken down in more granular classes.","body":"The OO &#39;trick&#39; to test private method logic is to actually to create new classes having those private methods as public methods. This way you can unit test your new more granular classes, testing the previously private logic. Complex private method logic can indeed be a sign that your class has more than one responsibility and might be better broken down in more granular classes."}],"tags":[],"owner":{"account_id":43539,"reputation":79200,"user_id":127320,"accept_rate":87,"display_name":"Aravind Yarram"},"comment_count":4,"down_vote_count":0,"up_vote_count":156,"is_accepted":false,"score":156,"last_activity_date":1454518178,"creation_date":1326177425,"answer_id":8799482,"question_id":8799439,"body_markdown":"Not possible through mockito. From their [wiki][1]\r\n\r\n&gt; Why Mockito doesn&#39;t mock private methods?\r\n&gt; \r\n&gt; Firstly, we are not dogmatic about mocking private methods. We just\r\n&gt; don&#39;t care about private methods because from the standpoint of\r\n&gt; testing private methods don&#39;t exist. Here are a couple of reasons\r\n&gt; Mockito doesn&#39;t mock private methods:\r\n&gt; \r\n&gt; It requires hacking of classloaders that is never bullet proof and it\r\n&gt; changes the api (you must use custom test runner, annotate the class,\r\n&gt; etc.). \r\n&gt; \r\n&gt; It is very easy to work around - just change the visibility of method\r\n&gt; from private to package-protected (or protected). \r\n&gt; \r\n&gt; It requires me to spend time implementing &amp; maintaining it. And it\r\n&gt; does not make sense given point #2 and a fact that it is already\r\n&gt; implemented in different tool (powermock). \r\n&gt; \r\n&gt; Finally... Mocking private methods is a hint that there is something\r\n&gt; wrong with OO understanding. In OO you want objects (or roles) to\r\n&gt; collaborate, not methods. Forget about pascal &amp; procedural code. Think\r\n&gt; in objects.\r\n\r\n  [1]: https://github.com/mockito/mockito/wiki/Mockito-And-Private-Methods","title":"Testing Private method using mockito","body":"<p>Not possible through mockito. From their <a href=\"https://github.com/mockito/mockito/wiki/Mockito-And-Private-Methods\">wiki</a></p>\n\n<blockquote>\n  <p>Why Mockito doesn't mock private methods?</p>\n  \n  <p>Firstly, we are not dogmatic about mocking private methods. We just\n  don't care about private methods because from the standpoint of\n  testing private methods don't exist. Here are a couple of reasons\n  Mockito doesn't mock private methods:</p>\n  \n  <p>It requires hacking of classloaders that is never bullet proof and it\n  changes the api (you must use custom test runner, annotate the class,\n  etc.). </p>\n  \n  <p>It is very easy to work around - just change the visibility of method\n  from private to package-protected (or protected). </p>\n  \n  <p>It requires me to spend time implementing &amp; maintaining it. And it\n  does not make sense given point #2 and a fact that it is already\n  implemented in different tool (powermock). </p>\n  \n  <p>Finally... Mocking private methods is a hint that there is something\n  wrong with OO understanding. In OO you want objects (or roles) to\n  collaborate, not methods. Forget about pascal &amp; procedural code. Think\n  in objects.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":479869,"reputation":5332,"user_id":892788,"accept_rate":90,"display_name":"diyoda_"},"score":30,"creation_date":1496786233,"post_id":8799554,"comment_id":75800669,"body_markdown":"I am confused with this answer. This is mocking, But the title is testing the private methods","body":"I am confused with this answer. This is mocking, But the title is testing the private methods"},{"owner":{"account_id":7788750,"reputation":3132,"user_id":5892553,"accept_rate":54,"display_name":"Rito"},"score":0,"creation_date":1509136931,"post_id":8799554,"comment_id":80913646,"body_markdown":"I have used Powermock to mock the private method, but how can I test the private method with Powermock. Where, I can pass some input and expect some output from the method and then verify the output?","body":"I have used Powermock to mock the private method, but how can I test the private method with Powermock. Where, I can pass some input and expect some output from the method and then verify the output?"},{"owner":{"account_id":6244197,"reputation":903,"user_id":4856761,"accept_rate":100,"display_name":"Talha"},"score":0,"creation_date":1521543159,"post_id":8799554,"comment_id":85765269,"body_markdown":"You cant.You mock input output, you cannot test the real functionality.","body":"You cant.You mock input output, you cannot test the real functionality."},{"owner":{"account_id":10901643,"reputation":336,"user_id":8906919,"display_name":"devaga"},"score":0,"creation_date":1610444165,"post_id":8799554,"comment_id":116127947,"body_markdown":"@diyoda_ The author wants to verify the method is called, that that has to be done by mocking. You can verify mocks only unfortunately.","body":"@diyoda_ The author wants to verify the method is called, that that has to be done by mocking. You can verify mocks only unfortunately."}],"tags":[],"owner":{"account_id":963389,"reputation":11798,"user_id":987244,"accept_rate":75,"display_name":"shift66"},"comment_count":4,"down_vote_count":4,"up_vote_count":105,"is_accepted":true,"score":101,"last_activity_date":1455128672,"creation_date":1326177820,"answer_id":8799554,"question_id":8799439,"body_markdown":"You can&#39;t do that with Mockito but you can use [Powermock][1] to extend Mockito and mock private methods. Powermock supports Mockito. [Here][2]&#39;s an example.\r\n\r\n\r\n  [1]: https://github.com/jayway/powermock\r\n  [2]: https://github.com/jayway/powermock/wiki/MockPrivate","title":"Testing Private method using mockito","body":"<p>You can't do that with Mockito but you can use <a href=\"https://github.com/jayway/powermock\" rel=\"noreferrer\">Powermock</a> to extend Mockito and mock private methods. Powermock supports Mockito. <a href=\"https://github.com/jayway/powermock/wiki/MockPrivate\" rel=\"noreferrer\">Here</a>'s an example.</p>\n"},{"comments":[{"owner":{"account_id":327113,"reputation":2593,"user_id":649283,"accept_rate":67,"display_name":"supertonsky"},"score":34,"creation_date":1361958786,"post_id":8799950,"comment_id":21258600,"body_markdown":"A valid point. However, isn&#39;t it the reason for using a private modifier for methods is because you simply want to chop down codes that are too lengthy and/or repetitive? Separating it as another class is like you&#39;re promoting those lines of codes to be first class citizens which won&#39;t get reused anywhere else because it was meant specifically to partition lengthy codes and to prevent repeating lines of codes. If you&#39;re going to separate it to another class it just doesn&#39;t feel right; you would easily get class explosion.","body":"A valid point. However, isn&#39;t it the reason for using a private modifier for methods is because you simply want to chop down codes that are too lengthy and/or repetitive? Separating it as another class is like you&#39;re promoting those lines of codes to be first class citizens which won&#39;t get reused anywhere else because it was meant specifically to partition lengthy codes and to prevent repeating lines of codes. If you&#39;re going to separate it to another class it just doesn&#39;t feel right; you would easily get class explosion."},{"owner":{"account_id":1060224,"reputation":4167,"user_id":1062015,"accept_rate":81,"display_name":"Jaco Van Niekerk"},"score":2,"creation_date":1362029740,"post_id":8799950,"comment_id":21292758,"body_markdown":"Noted supertonsky, I was referring to the general case.  I agree that in the above case it should not be in a separate class. (+1 on your comment though - it is a very valid point you&#39;re making on promoting private members)","body":"Noted supertonsky, I was referring to the general case.  I agree that in the above case it should not be in a separate class. (+1 on your comment though - it is a very valid point you&#39;re making on promoting private members)"},{"owner":{"account_id":219528,"reputation":431,"user_id":476480,"display_name":"LuddyPants"},"score":6,"creation_date":1390851247,"post_id":8799950,"comment_id":32261508,"body_markdown":"@supertonsky, I have been unable to find any satisfactory response to this problem. There are several reasons why I might use private members and very often they do not indicate a code smell and I would benefit greatly from testing them. People seem to brush this off by saying &quot;just don&#39;t do it&quot;.","body":"@supertonsky, I have been unable to find any satisfactory response to this problem. There are several reasons why I might use private members and very often they do not indicate a code smell and I would benefit greatly from testing them. People seem to brush this off by saying &quot;just don&#39;t do it&quot;."},{"owner":{"account_id":54040,"reputation":3797,"user_id":161644,"accept_rate":30,"display_name":"John Lockwood"},"score":3,"creation_date":1394641807,"post_id":8799950,"comment_id":33983090,"body_markdown":"Sorry, I opted to downvote based on &quot;If you &#39;want&#39; to test private methods, it may indicate you need to downvote your design&quot;. OK, fair enough, but one of the reasons to be testing at all is because, under a deadline when you don&#39;t have time to be rethinking the design, you&#39;re trying to safely implement a change that needs to be made to a private method.  In an ideal world would that private method not need to be changed because the design would be perfect?  Sure, but in a perfect world, but it&#39;s moot because in a perfect world who needs tests, it all just works. :)","body":"Sorry, I opted to downvote based on &quot;If you &#39;want&#39; to test private methods, it may indicate you need to downvote your design&quot;. OK, fair enough, but one of the reasons to be testing at all is because, under a deadline when you don&#39;t have time to be rethinking the design, you&#39;re trying to safely implement a change that needs to be made to a private method.  In an ideal world would that private method not need to be changed because the design would be perfect?  Sure, but in a perfect world, but it&#39;s moot because in a perfect world who needs tests, it all just works. :)"},{"owner":{"account_id":1060224,"reputation":4167,"user_id":1062015,"accept_rate":81,"display_name":"Jaco Van Niekerk"},"score":2,"creation_date":1394699460,"post_id":8799950,"comment_id":34009278,"body_markdown":"@John. Point taken, your downvote warranted (+1). Thanks for the comment as well - I agree with you on the point you make.  In such cases I can see one of two options: Either the method is made package-private or protected and unit tests written as usual; or (and this is tongue-in-cheek and bad practice) a main method is quickly written to make sure it still works.  However, my response was based on a scenario of NEW code being written and not refactoring when you may not be able to tamper with the original design.","body":"@John. Point taken, your downvote warranted (+1). Thanks for the comment as well - I agree with you on the point you make.  In such cases I can see one of two options: Either the method is made package-private or protected and unit tests written as usual; or (and this is tongue-in-cheek and bad practice) a main method is quickly written to make sure it still works.  However, my response was based on a scenario of NEW code being written and not refactoring when you may not be able to tamper with the original design."},{"owner":{"account_id":15726942,"reputation":186,"user_id":11352813,"display_name":"Luke"},"score":2,"creation_date":1566242821,"post_id":8799950,"comment_id":101587319,"body_markdown":"Moving methods to their own class, or making them public, just for the sake of enabling functionality in a testing suite is definitely bad practice. And &quot;You&#39;re not suppose to test private methods.&quot; I strongly disagree. Private methods have their own complexity and are therefore completely reasonable to test.","body":"Moving methods to their own class, or making them public, just for the sake of enabling functionality in a testing suite is definitely bad practice. And &quot;You&#39;re not suppose to test private methods.&quot; I strongly disagree. Private methods have their own complexity and are therefore completely reasonable to test."},{"owner":{"account_id":1058549,"reputation":8394,"user_id":1060686,"accept_rate":84,"display_name":"NotGaeL"},"score":1,"creation_date":1601482509,"post_id":8799950,"comment_id":113424194,"body_markdown":"THis. A private method is not part of a contract and therefore should not be a concern of a unit test. Unit testing private methods or in other words to write private method dependant unit tests _is_ a bad practice.","body":"THis. A private method is not part of a contract and therefore should not be a concern of a unit test. Unit testing private methods or in other words to write private method dependant unit tests <i>is</i> a bad practice."}],"tags":[],"owner":{"account_id":1060224,"reputation":4167,"user_id":1062015,"accept_rate":81,"display_name":"Jaco Van Niekerk"},"comment_count":7,"down_vote_count":10,"up_vote_count":16,"is_accepted":false,"score":6,"last_activity_date":1326180957,"creation_date":1326180957,"answer_id":8799950,"question_id":8799439,"body_markdown":"You&#39;re not suppose to test private methods.  Only non-private methods needs to be tested as these should call the private methods anyway.  If you &quot;want&quot; to test private methods, it may indicate that you need to rethink your design:\r\n\r\nAm I using proper dependency injection?\r\nDo I possibly needs to move the private methods into a separate class and rather test that?\r\nMust these methods be private?  ...can&#39;t they be default or protected rather?\r\n\r\nIn the above instance, the two methods that are called &quot;randomly&quot; may actually need to be placed in a class of their own, tested and then injected into the class above.","title":"Testing Private method using mockito","body":"<p>You're not suppose to test private methods.  Only non-private methods needs to be tested as these should call the private methods anyway.  If you \"want\" to test private methods, it may indicate that you need to rethink your design:</p>\n\n<p>Am I using proper dependency injection?\nDo I possibly needs to move the private methods into a separate class and rather test that?\nMust these methods be private?  ...can't they be default or protected rather?</p>\n\n<p>In the above instance, the two methods that are called \"randomly\" may actually need to be placed in a class of their own, tested and then injected into the class above.</p>\n"},{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1326237048,"creation_date":1326237048,"answer_id":8811913,"question_id":8799439,"body_markdown":"Think about this in terms of behaviour, not in terms of what methods there are.  The method called `method` has a particular behaviour if `b` is true.  It has different behaviour if `b` is false.  This means you should write two different tests for `method`; one for each case.  So instead of having three method-oriented tests (one for `method`, one for `method1`, one for `method2`, you have two behaviour-oriented tests.\r\n\r\nRelated to this (I suggested this in another SO thread recently, and got called a four-letter word as a result, so feel free to take this with a grain of salt); I find it helpful to choose test names that reflect the behaviour that I&#39;m testing, rather than the name of the method.  So don&#39;t call your tests `testMethod()`, `testMethod1()`, `testMethod2()` and so forth.  I like names like `calculatedPriceIsBasePricePlusTax()` or `taxIsExcludedWhenExcludeIsTrue()` that indicate what behaviour I&#39;m testing; then within each test method, test only the indicated behaviour.  Most such behaviours will involve just one call to a public method, but may involve many calls to private methods.\r\n\r\nHope this helps.","title":"Testing Private method using mockito","body":"<p>Think about this in terms of behaviour, not in terms of what methods there are.  The method called <code>method</code> has a particular behaviour if <code>b</code> is true.  It has different behaviour if <code>b</code> is false.  This means you should write two different tests for <code>method</code>; one for each case.  So instead of having three method-oriented tests (one for <code>method</code>, one for <code>method1</code>, one for <code>method2</code>, you have two behaviour-oriented tests.</p>\n\n<p>Related to this (I suggested this in another SO thread recently, and got called a four-letter word as a result, so feel free to take this with a grain of salt); I find it helpful to choose test names that reflect the behaviour that I'm testing, rather than the name of the method.  So don't call your tests <code>testMethod()</code>, <code>testMethod1()</code>, <code>testMethod2()</code> and so forth.  I like names like <code>calculatedPriceIsBasePricePlusTax()</code> or <code>taxIsExcludedWhenExcludeIsTrue()</code> that indicate what behaviour I'm testing; then within each test method, test only the indicated behaviour.  Most such behaviours will involve just one call to a public method, but may involve many calls to private methods.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":20907,"reputation":3436,"user_id":50388,"accept_rate":100,"display_name":"Reji"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1326832852,"creation_date":1326832852,"answer_id":8901454,"question_id":8799439,"body_markdown":"\r\n I don&#39;t really understand your need to test the private method. The root problem is that your public method has void as return type, and hence you are not able to test your public method. Hence you are forced to test your private method. Is my guess correct??\r\n\r\nA few possible solutions (AFAIK):\r\n\r\n1. Mocking your private methods, but still you won&#39;t be &quot;actually&quot; testing your methods. \r\n\r\n2. Verify the state of object used in the method. MOSTLY methods either do some processing of the input values and return an output, or change the state of the objects. Testing the objects for the desired state can also be employed. \r\n\r\n    &gt;     public class A{\r\n    &gt;     \r\n    &gt;     SomeClass classObj = null;\r\n    &gt;     \r\n    &gt;     public void publicMethod(){\r\n    &gt;        privateMethod();\r\n    &gt;     }\r\n    &gt;\r\n    &gt;     private void privateMethod(){\r\n    &gt;          classObj = new SomeClass();\r\n    &gt;     }\r\n    &gt;     \r\n    &gt;     }\r\n    [Here you can test for the private method, by checking the state change of the classObj from null to not null.]\r\n\r\n3. Refactor your code a little (Hope this is not a legacy code). My funda of writing a method is that, one should always return something (a int/ a boolean). The returned value MAY or MAY NOT be used by the implementation, but it will SURELY BE used by the test \r\n\r\n    code.\r\n    \r\n    \r\n        public class A\r\n        { \r\n            public int method(boolean b)\r\n            {\r\n                  int nReturn = 0;\r\n                  if (b == true)\r\n                       nReturn = method1();\r\n                  else\r\n                       nReturn = method2();\r\n            }\r\n        \r\n            private int method1() {}\r\n        \r\n            private int method2() {}\r\n        \r\n        }\r\n\r\n\r\n\r\n","title":"Testing Private method using mockito","body":"<p>I don't really understand your need to test the private method. The root problem is that your public method has void as return type, and hence you are not able to test your public method. Hence you are forced to test your private method. Is my guess correct??</p>\n\n<p>A few possible solutions (AFAIK):</p>\n\n<ol>\n<li><p>Mocking your private methods, but still you won't be \"actually\" testing your methods. </p></li>\n<li><p>Verify the state of object used in the method. MOSTLY methods either do some processing of the input values and return an output, or change the state of the objects. Testing the objects for the desired state can also be employed. </p>\n\n<blockquote>\n<pre><code>public class A{\n\nSomeClass classObj = null;\n\npublic void publicMethod(){\n   privateMethod();\n}\n\nprivate void privateMethod(){\n     classObj = new SomeClass();\n}\n\n}\n</code></pre>\n  \n  <p>[Here you can test for the private method, by checking the state change of the classObj from null to not null.]</p>\n</blockquote></li>\n<li><p>Refactor your code a little (Hope this is not a legacy code). My funda of writing a method is that, one should always return something (a int/ a boolean). The returned value MAY or MAY NOT be used by the implementation, but it will SURELY BE used by the test </p>\n\n<p>code.</p>\n\n<pre><code>public class A\n{ \n    public int method(boolean b)\n    {\n          int nReturn = 0;\n          if (b == true)\n               nReturn = method1();\n          else\n               nReturn = method2();\n    }\n\n    private int method1() {}\n\n    private int method2() {}\n\n}\n</code></pre></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":3662161,"reputation":313,"user_id":3051642,"accept_rate":27,"display_name":"Xavier"},"score":0,"creation_date":1504349668,"post_id":14401015,"comment_id":78986066,"body_markdown":"Your link is only pointing to the power mock repo  @Mindaugas","body":"Your link is only pointing to the power mock repo  @Mindaugas"},{"owner":{"account_id":1289848,"reputation":3311,"user_id":1242148,"accept_rate":100,"display_name":"Mindaugas Jaraminas"},"score":0,"creation_date":1504505765,"post_id":14401015,"comment_id":79022202,"body_markdown":"@Xavier true. You can use it if you like in your project.","body":"@Xavier true. You can use it if you like in your project."},{"owner":{"account_id":117108,"reputation":1849,"user_id":306819,"accept_rate":65,"display_name":"siddhusingh"},"score":1,"creation_date":1505058900,"post_id":14401015,"comment_id":79246972,"body_markdown":"Wonderful !!! so well explained with these simple example almost everything :) Because the purpose is just to test the code and not what all the framework provides :)","body":"Wonderful !!! so well explained with these simple example almost everything :) Because the purpose is just to test the code and not what all the framework provides :)"},{"owner":{"account_id":201265,"reputation":5239,"user_id":447607,"accept_rate":75,"display_name":"user447607"},"score":1,"creation_date":1517503418,"post_id":14401015,"comment_id":84131632,"body_markdown":"Please update this. Whitebox is no longer part of the public API.","body":"Please update this. Whitebox is no longer part of the public API."}],"tags":[],"owner":{"account_id":1289848,"reputation":3311,"user_id":1242148,"accept_rate":100,"display_name":"Mindaugas Jaraminas"},"comment_count":4,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1504505650,"creation_date":1358519296,"answer_id":14401015,"question_id":8799439,"body_markdown":"Here is a small example how to do it with [powermock][1]\r\n\r\n    public class Hello {\r\n        private Hello obj;\r\n        private Integer method1(Long id) {\r\n            return id + 10;\r\n        }\r\n    } \r\n\r\nTo test **method1** use code:\r\n\r\n    Hello testObj = new Hello();\r\n    Integer result = Whitebox.invokeMethod(testObj, &quot;method1&quot;, new Long(10L));\r\n\r\nTo set private object **obj** use this:\r\n\r\n    Hello testObj = new Hello();\r\n    Hello newObject = new Hello();\r\n    Whitebox.setInternalState(testObj, &quot;obj&quot;, newObject);\r\n\r\n\r\n  [1]: https://github.com/jayway/powermock","title":"Testing Private method using mockito","body":"<p>Here is a small example how to do it with <a href=\"https://github.com/jayway/powermock\" rel=\"noreferrer\">powermock</a></p>\n\n<pre><code>public class Hello {\n    private Hello obj;\n    private Integer method1(Long id) {\n        return id + 10;\n    }\n} \n</code></pre>\n\n<p>To test <strong>method1</strong> use code:</p>\n\n<pre><code>Hello testObj = new Hello();\nInteger result = Whitebox.invokeMethod(testObj, \"method1\", new Long(10L));\n</code></pre>\n\n<p>To set private object <strong>obj</strong> use this:</p>\n\n<pre><code>Hello testObj = new Hello();\nHello newObject = new Hello();\nWhitebox.setInternalState(testObj, \"obj\", newObject);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1257768,"reputation":436,"user_id":1216866,"display_name":"Abdullah Choudhury"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1460517061,"creation_date":1460517061,"answer_id":36587868,"question_id":8799439,"body_markdown":"I was able to test a private method inside using mockito using reflection.\r\nHere is the example, tried to name it such that it makes sense\r\n\r\n    //Service containing the mock method is injected with mockObjects\r\n\r\n\t@InjectMocks\r\n\tprivate ServiceContainingPrivateMethod serviceContainingPrivateMethod;\r\n\r\n    //Using reflection to change accessibility of the private method\r\n\r\n\tClass&lt;?&gt;[] params = new Class&lt;?&gt;[]{PrivateMethodParameterOne.class, PrivateMethodParameterTwo.class};\r\n        Method m = serviceContainingPrivateMethod .getClass().getDeclaredMethod(&quot;privateMethod&quot;, params);\r\n\t\t//making private method accessible\r\n        m.setAccessible(true); \r\n        assertNotNull(m.invoke(serviceContainingPrivateMethod, privateMethodParameterOne, privateMethodParameterTwo).equals(null));\r\n       \r\n\r\n\r\n","title":"Testing Private method using mockito","body":"<p>I was able to test a private method inside using mockito using reflection.\nHere is the example, tried to name it such that it makes sense</p>\n\n<pre><code>//Service containing the mock method is injected with mockObjects\n\n@InjectMocks\nprivate ServiceContainingPrivateMethod serviceContainingPrivateMethod;\n\n//Using reflection to change accessibility of the private method\n\nClass&lt;?&gt;[] params = new Class&lt;?&gt;[]{PrivateMethodParameterOne.class, PrivateMethodParameterTwo.class};\n    Method m = serviceContainingPrivateMethod .getClass().getDeclaredMethod(\"privateMethod\", params);\n    //making private method accessible\n    m.setAccessible(true); \n    assertNotNull(m.invoke(serviceContainingPrivateMethod, privateMethodParameterOne, privateMethodParameterTwo).equals(null));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3222171,"reputation":1361,"user_id":3192775,"accept_rate":33,"display_name":"Tim"},"score":0,"creation_date":1565729740,"post_id":52455922,"comment_id":101441512,"body_markdown":"ReflectionTestUtils.invokeMethod(student, &quot;saveOrUpdate&quot;, &quot;argument1&quot;, &quot;argument2&quot;, &quot;argument3&quot; ); \nThe last argument of invokeMethod, uses Vargs which can take multiple arguments that needs to passed to the private method. it works.","body":"ReflectionTestUtils.invokeMethod(student, &quot;saveOrUpdate&quot;, &quot;argument1&quot;, &quot;argument2&quot;, &quot;argument3&quot; );  The last argument of invokeMethod, uses Vargs which can take multiple arguments that needs to passed to the private method. it works."},{"owner":{"account_id":5416397,"reputation":1423,"user_id":4311428,"display_name":"maxeh"},"score":3,"creation_date":1567945475,"post_id":52455922,"comment_id":102111322,"body_markdown":"This answer should have more upvotes, by far the easiest way to test private methods.","body":"This answer should have more upvotes, by far the easiest way to test private methods."},{"owner":{"account_id":10110007,"reputation":963,"user_id":7471307,"accept_rate":57,"display_name":"Artanis Zeratul"},"score":0,"creation_date":1666143488,"post_id":52455922,"comment_id":130864037,"body_markdown":"what about knowing if a private method has been called?","body":"what about knowing if a private method has been called?"},{"owner":{"account_id":2660107,"reputation":4547,"user_id":2300013,"accept_rate":100,"display_name":"AR1"},"score":0,"creation_date":1666357697,"post_id":52455922,"comment_id":130924255,"body_markdown":"@ArtanisZeratul it depends on your use case. In general if you want to know if a private method has been called, then you can use Mockito Verify. If you need better examples, please post a question and we&#39;ll take it there.","body":"@ArtanisZeratul it depends on your use case. In general if you want to know if a private method has been called, then you can use Mockito Verify. If you need better examples, please post a question and we&#39;ll take it there."}],"tags":[],"owner":{"account_id":2660107,"reputation":4547,"user_id":2300013,"accept_rate":100,"display_name":"AR1"},"comment_count":4,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1683015033,"creation_date":1537613243,"answer_id":52455922,"question_id":8799439,"body_markdown":"While Mockito doesn&#39;t provide that capability, you can achieve the same result using Mockito + the JUnit ReflectionUtils class or the Spring [ReflectionTestUtils][1] class. Please see an example below taken from [here][2] explaining how to invoke a private method:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class ComTurretaSpringReflectionReflectiontestutilsApplicationTests {\r\n \r\n        @Test\r\n        public void test01()\r\n        {\r\n            Student student = new Student();\r\n            student.setName(&quot;James Dean&quot;);\r\n \r\n            System.out.println(&quot;Before: &quot; + student.toString());\r\n            ReflectionTestUtils.setField(student, &quot;internalCode&quot;, 1343243);\r\n \r\n            System.out.println(&quot;After: &quot; + student.toString());\r\n \r\n            ReflectionTestUtils.invokeMethod(student, &quot;saveOrUpdate&quot;, &quot;From Unit test&quot;);\r\n        }\r\n    }\r\n\r\nComplete examples with ReflectionTestUtils and Mockito can be found in the book [Mockito for Spring][3].\r\n\r\nOfficial documentation [Spring Testing][4]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html\r\n  [2]: https://turreta.com/2017/12/27/easy-reflection-using-spring-reflectiontestutils/\r\n  [3]: https://www.amazon.com/Mockito-Spring-Sujoy-Acharya-ebook/dp/B00U1D9WSW\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#unit-testing-utilities","title":"Testing Private method using mockito","body":"<p>While Mockito doesn't provide that capability, you can achieve the same result using Mockito + the JUnit ReflectionUtils class or the Spring <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html\" rel=\"nofollow noreferrer\">ReflectionTestUtils</a> class. Please see an example below taken from <a href=\"https://turreta.com/2017/12/27/easy-reflection-using-spring-reflectiontestutils/\" rel=\"nofollow noreferrer\">here</a> explaining how to invoke a private method:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class ComTurretaSpringReflectionReflectiontestutilsApplicationTests {\n\n    @Test\n    public void test01()\n    {\n        Student student = new Student();\n        student.setName(&quot;James Dean&quot;);\n\n        System.out.println(&quot;Before: &quot; + student.toString());\n        ReflectionTestUtils.setField(student, &quot;internalCode&quot;, 1343243);\n\n        System.out.println(&quot;After: &quot; + student.toString());\n\n        ReflectionTestUtils.invokeMethod(student, &quot;saveOrUpdate&quot;, &quot;From Unit test&quot;);\n    }\n}\n</code></pre>\n<p>Complete examples with ReflectionTestUtils and Mockito can be found in the book <a href=\"https://rads.stackoverflow.com/amzn/click/com/B00U1D9WSW\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Mockito for Spring</a>.</p>\n<p>Official documentation <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#unit-testing-utilities\" rel=\"nofollow noreferrer\">Spring Testing</a></p>\n"},{"comments":[{"owner":{"account_id":48346,"reputation":157,"user_id":143628,"display_name":"Stefan"},"score":0,"creation_date":1674587438,"post_id":53000598,"comment_id":132744718,"body_markdown":"This should be the accepted answer to the (edited) question...","body":"This should be the accepted answer to the (edited) question..."}],"tags":[],"owner":{"account_id":7529236,"reputation":2430,"user_id":5718107,"display_name":"Fan Jin"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1540521068,"creation_date":1540521068,"answer_id":53000598,"question_id":8799439,"body_markdown":"There is actually a way to test methods from a private member with Mockito. Let&#39;s say you have a class like this:\r\n\r\n    public class A {\r\n        private SomeOtherClass someOtherClass;\r\n        A() {\r\n            someOtherClass = new SomeOtherClass();\r\n        }\r\n        public void method(boolean b){\r\n            if (b == true)\r\n                someOtherClass.method1();\r\n            else\r\n                someOtherClass.method2();\r\n        }\r\n    \r\n    }\r\n    \r\n    public class SomeOtherClass {\r\n        public void method1() {}\r\n        public void method2() {}\r\n    }\r\n\r\nIf you want to test `a.method` will invoke a method from `SomeOtherClass`, you can write something like below.\r\n\r\n    @Test\r\n    public void testPrivateMemberMethodCalled() {\r\n        A a = new A();\r\n        SomeOtherClass someOtherClass = Mockito.spy(new SomeOtherClass());\r\n        ReflectionTestUtils.setField( a, &quot;someOtherClass&quot;, someOtherClass);\r\n        a.method( true );\r\n    \r\n        Mockito.verify( someOtherClass, Mockito.times( 1 ) ).method1();\r\n    }\r\n\r\n`ReflectionTestUtils.setField();` will stub the private member with something you can spy on.","title":"Testing Private method using mockito","body":"<p>There is actually a way to test methods from a private member with Mockito. Let's say you have a class like this:</p>\n\n<pre><code>public class A {\n    private SomeOtherClass someOtherClass;\n    A() {\n        someOtherClass = new SomeOtherClass();\n    }\n    public void method(boolean b){\n        if (b == true)\n            someOtherClass.method1();\n        else\n            someOtherClass.method2();\n    }\n\n}\n\npublic class SomeOtherClass {\n    public void method1() {}\n    public void method2() {}\n}\n</code></pre>\n\n<p>If you want to test <code>a.method</code> will invoke a method from <code>SomeOtherClass</code>, you can write something like below.</p>\n\n<pre><code>@Test\npublic void testPrivateMemberMethodCalled() {\n    A a = new A();\n    SomeOtherClass someOtherClass = Mockito.spy(new SomeOtherClass());\n    ReflectionTestUtils.setField( a, \"someOtherClass\", someOtherClass);\n    a.method( true );\n\n    Mockito.verify( someOtherClass, Mockito.times( 1 ) ).method1();\n}\n</code></pre>\n\n<p><code>ReflectionTestUtils.setField();</code> will stub the private member with something you can spy on.</p>\n"},{"comments":[{"owner":{"account_id":7081530,"reputation":159,"user_id":5419780,"display_name":"Manish"},"score":1,"creation_date":1615441681,"post_id":59802435,"comment_id":117693059,"body_markdown":"The above mentioned work perfectly. Thank you","body":"The above mentioned work perfectly. Thank you"},{"owner":{"account_id":1661378,"reputation":1660,"user_id":1529616,"accept_rate":46,"display_name":"velocity"},"score":1,"creation_date":1679230189,"post_id":59802435,"comment_id":133680359,"body_markdown":"Hi, Mockito-core:5.1.1 and mockito-all:1.10.9 there is no such method when(Object, String), can you please specify what dependencies you used ?","body":"Hi, Mockito-core:5.1.1 and mockito-all:1.10.9 there is no such method when(Object, String), can you please specify what dependencies you used ?"}],"tags":[],"owner":{"account_id":9743748,"reputation":340,"user_id":7224392,"display_name":"Singh Arun"},"comment_count":2,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1579412973,"creation_date":1579364230,"answer_id":59802435,"question_id":8799439,"body_markdown":"1. By using reflection, private methods can be called from test classes.\r\nIn this case,\r\n\r\n  \r\n\r\n      //test method will be like this ...\r\n \r\n\r\n        public class TestA {\r\n          \r\n          @Test\r\n            public void testMethod() {\r\n        \r\n            A a= new A();\r\n        \tMethod privateMethod = A.class.getDeclaredMethod(&quot;method1&quot;, null);\r\n            privateMethod.setAccessible(true);\r\n            // invoke the private method for test\r\n            privateMethod.invoke(A, null);\r\n        \r\n            }\r\n        }\r\n\r\n2. If the private method calls any other private method, then we need to spy the object and stub the another method.The test class will be like ...\r\n\r\n\r\n    //test method will be like this ...\r\n\r\n\r\n        public class TestA {\r\n          \r\n          @Test\r\n            public void testMethod() {\r\n        \r\n            A a= new A();\r\n            A spyA = spy(a);\r\n        \tMethod privateMethod = A.class.getDeclaredMethod(&quot;method1&quot;, null);\r\n            privateMethod.setAccessible(true);\r\n            doReturn(&quot;Test&quot;).when(spyA, &quot;method2&quot;); // if private method2 is returning string data\r\n            // invoke the private method for test\r\n            privateMethod.invoke(spyA , null);\r\n        \r\n            }\r\n        }\r\n\r\n**The approach is to combine reflection and spying the object.\r\n**method1 and **method2 are private methods and method1 calls method2.\r\n\r\n\r\n","title":"Testing Private method using mockito","body":"<ol>\n<li><p>By using reflection, private methods can be called from test classes.\nIn this case,</p>\n\n<p>//test method will be like this ...</p>\n\n<pre><code>public class TestA {\n\n  @Test\n    public void testMethod() {\n\n    A a= new A();\n    Method privateMethod = A.class.getDeclaredMethod(\"method1\", null);\n    privateMethod.setAccessible(true);\n    // invoke the private method for test\n    privateMethod.invoke(A, null);\n\n    }\n}\n</code></pre></li>\n<li><p>If the private method calls any other private method, then we need to spy the object and stub the another method.The test class will be like ...</p>\n\n<p>//test method will be like this ...</p>\n\n<pre><code>public class TestA {\n\n  @Test\n    public void testMethod() {\n\n    A a= new A();\n    A spyA = spy(a);\n    Method privateMethod = A.class.getDeclaredMethod(\"method1\", null);\n    privateMethod.setAccessible(true);\n    doReturn(\"Test\").when(spyA, \"method2\"); // if private method2 is returning string data\n    // invoke the private method for test\n    privateMethod.invoke(spyA , null);\n\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>**The approach is to combine reflection and spying the object.\n**method1 and **method2 are private methods and method1 calls method2.</p>\n"},{"tags":[],"owner":{"account_id":4190858,"reputation":1,"user_id":3433503,"display_name":"milensky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596810294,"creation_date":1596726181,"answer_id":63286450,"question_id":8799439,"body_markdown":"In cases where the private method is not void and the return value is used as a parameter to an external dependency&#39;s method, you can mock the dependency and use an `ArgumentCaptor` to capture the return value.\r\nFor example: \r\n\r\n    ArgumentCaptor&lt;ByteArrayOutputStream&gt; csvOutputCaptor = ArgumentCaptor.forClass(ByteArrayOutputStream.class);\r\n    //Do your thing..\r\n    verify(this.awsService).uploadFile(csvOutputCaptor.capture());\r\n    ....\r\n    assertEquals(csvOutputCaptor.getValue().toString(), &quot;blabla&quot;);\r\n\r\n","title":"Testing Private method using mockito","body":"<p>In cases where the private method is not void and the return value is used as a parameter to an external dependency's method, you can mock the dependency and use an <code>ArgumentCaptor</code> to capture the return value.\nFor example:</p>\n<pre><code>ArgumentCaptor&lt;ByteArrayOutputStream&gt; csvOutputCaptor = ArgumentCaptor.forClass(ByteArrayOutputStream.class);\n//Do your thing..\nverify(this.awsService).uploadFile(csvOutputCaptor.capture());\n....\nassertEquals(csvOutputCaptor.getValue().toString(), &quot;blabla&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"score":0,"creation_date":1669470729,"post_id":69438719,"comment_id":131650110,"body_markdown":"This should be a comment","body":"This should be a comment"},{"owner":{"account_id":5494271,"reputation":2925,"user_id":4365948,"accept_rate":80,"display_name":"Heschoon"},"score":0,"creation_date":1669640511,"post_id":69438719,"comment_id":131681051,"body_markdown":"@downvoteit I&#39;m just giving credit to aravind, not commenting his work","body":"@downvoteit I&#39;m just giving credit to aravind, not commenting his work"}],"tags":[],"owner":{"account_id":5494271,"reputation":2925,"user_id":4365948,"accept_rate":80,"display_name":"Heschoon"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633363074,"creation_date":1633361826,"answer_id":69438719,"question_id":8799439,"body_markdown":"Building on @aravind-yarram&#39;s answer: Not possible through mockito. From their [wiki][1]\r\n\r\n\r\n  [1]: https://github.com/mockito/mockito/wiki/Mockito-And-Private-Methods\r\n\r\nSo what&#39;s the OO way of testing private methods? Private methods with complex logic might be a sign that your class is violating the principle of single responsibility and that some of the logic should be moved to a new class.\r\n\r\nIndeed, by extracting those private methods to public methods of more granular classes, you can unit test them without breaking the encapsulation of your original class.","title":"Testing Private method using mockito","body":"<p>Building on @aravind-yarram's answer: Not possible through mockito. From their <a href=\"https://github.com/mockito/mockito/wiki/Mockito-And-Private-Methods\" rel=\"nofollow noreferrer\">wiki</a></p>\n<p>So what's the OO way of testing private methods? Private methods with complex logic might be a sign that your class is violating the principle of single responsibility and that some of the logic should be moved to a new class.</p>\n<p>Indeed, by extracting those private methods to public methods of more granular classes, you can unit test them without breaking the encapsulation of your original class.</p>\n"}],"owner":{"account_id":288369,"reputation":7565,"user_id":588747,"accept_rate":65,"display_name":"Nageswaran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":596613,"favorite_count":0,"down_vote_count":2,"up_vote_count":160,"accepted_answer_id":8799554,"answer_count":13,"score":158,"last_activity_date":1683015033,"creation_date":1326177191,"question_id":8799439,"body_markdown":"&lt;!-- language: lang-java --&gt;\r\n\r\n    public class A {\r\n    \r\n        public void method(boolean b){\r\n              if (b == true)\r\n                   method1();\r\n              else\r\n                   method2();\r\n        }\r\n    \r\n        private void method1() {}\r\n        private void method2() {}\r\n    }\r\n    \r\n    public class TestA {\r\n    \r\n        @Test\r\n        public void testMethod() {\r\n          A a = mock(A.class);\r\n          a.method(true);\r\n          //how to test like    verify(a).method1();\r\n        }\r\n    }\r\n\r\n\r\nHow to test private method is called or not, and how to test private method using mockito?","title":"Testing Private method using mockito","body":"<pre class=\"lang-java prettyprint-override\"><code>public class A {\n\n    public void method(boolean b){\n          if (b == true)\n               method1();\n          else\n               method2();\n    }\n\n    private void method1() {}\n    private void method2() {}\n}\n\npublic class TestA {\n\n    @Test\n    public void testMethod() {\n      A a = mock(A.class);\n      a.method(true);\n      //how to test like    verify(a).method1();\n    }\n}\n</code></pre>\n<p>How to test private method is called or not, and how to test private method using mockito?</p>\n"},{"tags":["java","spring","spring-boot","quartz-scheduler","quartz"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1683016429,"post_id":76152841,"comment_id":134298410,"body_markdown":"Not sure if `storeDurably(boolean jobDurability)` in `JobBuilder` can help?","body":"Not sure if <code>storeDurably(boolean jobDurability)</code> in <code>JobBuilder</code> can help?"},{"owner":{"account_id":11312373,"reputation":271,"user_id":8295173,"display_name":"Mehdi Varse"},"score":0,"creation_date":1683195046,"post_id":76152841,"comment_id":134330533,"body_markdown":"This cannot help me. What I would like to know is under what scenario this happens.","body":"This cannot help me. What I would like to know is under what scenario this happens."}],"owner":{"account_id":11312373,"reputation":271,"user_id":8295173,"display_name":"Mehdi Varse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683014903,"creation_date":1683014477,"question_id":76152841,"body_markdown":"I have many jobs in quartz, in spring boot. these methods have @Transactional annotation and I can&#39;t use a try-catch block. when I run the project, after a while, the scheduler fails and all data in the QRTZ_TRIGGERS table remove and all the jobs cancel and I have to restart the application to start jobs again. how can I avoid deleting these data?","title":"Quartz JobScheduler Delete Triggers on Exception in Spring boot","body":"<p>I have many jobs in quartz, in spring boot. these methods have @Transactional annotation and I can't use a try-catch block. when I run the project, after a while, the scheduler fails and all data in the QRTZ_TRIGGERS table remove and all the jobs cancel and I have to restart the application to start jobs again. how can I avoid deleting these data?</p>\n"},{"tags":["java","templates","thymeleaf"],"comments":[{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1683047584,"post_id":76152853,"comment_id":134305605,"body_markdown":"I don&#39;t think this is possible... does Angular not work with `&amp;#39;`?","body":"I don&#39;t think this is possible... does Angular not work with <code>&amp;#39;</code>?"}],"owner":{"account_id":15459498,"reputation":1949,"user_id":11152509,"display_name":"Georgian Stan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683014578,"creation_date":1683014578,"question_id":76152853,"body_markdown":"Is it possible to escape quotes for HTML templates in Thymleaf?\r\n\r\nWhen generating HTML files for an Angular application, Thymleaf is using the Unicode value for a quoate `&amp;#39;` istead of using the UTF-8 character.\r\n\r\nFor example:\r\nThe Thymleaf template is the following:\r\n```java\r\n&lt;my-component th:fragment=&quot;componentField (field)&quot; th:[colors]=&quot;${field.colors}&quot;&gt;&lt;/my-component&gt;\r\n```\r\n**Expected** - \r\nThe expected result is:\r\n```html\r\n&lt;my-component [colors]=&quot;[{ type: &#39;RED&#39;}]&quot;&gt;&lt;/my-component&gt;\r\n```\r\n**Actual** - \r\nThe actual result is:\r\n```html\r\n&lt;my-component [colors]=&quot;[{ type: &amp;#39;RED&amp;#39;}]&quot;&gt;&lt;/my-component&gt;\r\n```","title":"Thymleaf escape quotes for HTML template","body":"<p>Is it possible to escape quotes for HTML templates in Thymleaf?</p>\n<p>When generating HTML files for an Angular application, Thymleaf is using the Unicode value for a quoate <code>&amp;#39;</code> istead of using the UTF-8 character.</p>\n<p>For example:\nThe Thymleaf template is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;my-component th:fragment=&quot;componentField (field)&quot; th:[colors]=&quot;${field.colors}&quot;&gt;&lt;/my-component&gt;\n</code></pre>\n<p><strong>Expected</strong> -\nThe expected result is:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;my-component [colors]=&quot;[{ type: 'RED'}]&quot;&gt;&lt;/my-component&gt;\n</code></pre>\n<p><strong>Actual</strong> -\nThe actual result is:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;my-component [colors]=&quot;[{ type: &amp;#39;RED&amp;#39;}]&quot;&gt;&lt;/my-component&gt;\n</code></pre>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":0,"creation_date":1395942163,"post_id":22694884,"comment_id":34578636,"body_markdown":"`count()` is a terminal operation so you can&#39;t do that. The stream can&#39;t be used after.","body":"<code>count()</code> is a terminal operation so you can&#39;t do that. The stream can&#39;t be used after."},{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":0,"creation_date":1395942248,"post_id":22694884,"comment_id":34578703,"body_markdown":"Ok, thanks @ZouZou. I wasn&#39;t entirely certain what that method did. Why is there no `Stream::size` ?","body":"Ok, thanks @ZouZou. I wasn&#39;t entirely certain what that method did. Why is there no <code>Stream::size</code> ?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":10,"creation_date":1395942308,"post_id":22694884,"comment_id":34578750,"body_markdown":"@ryvantage Because a stream can only be used once: calculating its size means &quot;iterating&quot; over it and after that you can&#39;t use the stream any longer.","body":"@ryvantage Because a stream can only be used once: calculating its size means &quot;iterating&quot; over it and after that you can&#39;t use the stream any longer."},{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":4,"creation_date":1395942603,"post_id":22694884,"comment_id":34578930,"body_markdown":"Wow. That one comment helped me understand `Stream`s so much more than I did before...","body":"Wow. That one comment helped me understand <code>Stream</code>s so much more than I did before..."},{"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":4,"creation_date":1511886164,"post_id":22694884,"comment_id":82029401,"body_markdown":"This is when you realize that you had needed to use a `LinkedHashSet` (assuming you want insertion order preserved) or a `HashSet` all along. If your collection is only used to find a single user id, then why are you collecting all the other items? If there is a potential that you will always need to find some user id which also needs to be unique, then why use a list and not a set? You are programming backwards. Use the right collection for the job and save yourself this headache","body":"This is when you realize that you had needed to use a <code>LinkedHashSet</code> (assuming you want insertion order preserved) or a <code>HashSet</code> all along. If your collection is only used to find a single user id, then why are you collecting all the other items? If there is a potential that you will always need to find some user id which also needs to be unique, then why use a list and not a set? You are programming backwards. Use the right collection for the job and save yourself this headache"},{"owner":{"account_id":39578,"reputation":1895,"user_id":1450778,"accept_rate":75,"display_name":"David Nouls"},"score":0,"creation_date":1622722840,"post_id":22694884,"comment_id":119876822,"body_markdown":"The solution can consume a large list and only at the end it will realize there are too many. In order to avoid this you could use .limit(2) before the collect statement.","body":"The solution can consume a large list and only at the end it will realize there are too many. In order to avoid this you could use .limit(2) before the collect statement."},{"owner":{"account_id":2938544,"reputation":1521,"user_id":3362350,"display_name":"Jacob Zimmerman"},"score":0,"creation_date":1668200812,"post_id":22694884,"comment_id":131356333,"body_markdown":"@ryvantage Plus, Streams can potentially be infinite in length.","body":"@ryvantage Plus, Streams can potentially be infinite in length."}],"answers":[{"comments":[{"owner":{"account_id":23949,"reputation":63054,"user_id":60518,"accept_rate":59,"display_name":"Tim B&#252;the"},"score":43,"creation_date":1446131397,"post_id":22695031,"comment_id":54625449,"body_markdown":"Guava&#39;s `Iterables.getOnlyElement` would shorten these solutions and provide better error messages. Just as a tip for fellow readers who already use Google Guava.","body":"Guava&#39;s <code>Iterables.getOnlyElement</code> would shorten these solutions and provide better error messages. Just as a tip for fellow readers who already use Google Guava."},{"owner":{"account_id":2863588,"reputation":11468,"user_id":2458310,"display_name":"denov"},"score":2,"creation_date":1464125720,"post_id":22695031,"comment_id":62353780,"body_markdown":"i wrapped this idea up into a class - https://gist.github.com/denov/a7eac36a3cda041f8afeabcef09d16fc","body":"i wrapped this idea up into a class - <a href=\"https://gist.github.com/denov/a7eac36a3cda041f8afeabcef09d16fc\" rel=\"nofollow noreferrer\">gist.github.com/denov/a7eac36a3cda041f8afeabcef09d16fc</a>"},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":2,"creation_date":1470228112,"post_id":22695031,"comment_id":64861600,"body_markdown":"The custom collector still collects all the items, which is `O(n)`, isn&#39;t there a way to shortcut it? Get a single item can be done in 1 step, checking if another one exists is also 1 step, no matter how many more items are in the filtered stream.","body":"The custom collector still collects all the items, which is <code>O(n)</code>, isn&#39;t there a way to shortcut it? Get a single item can be done in 1 step, checking if another one exists is also 1 step, no matter how many more items are in the filtered stream."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":0,"creation_date":1490835251,"post_id":22695031,"comment_id":73294461,"body_markdown":"It&#39;s too bad Guava can&#39;t add some of these useful utilities... it&#39;s not the first time where a method has been in Guava for Iterable or Iterator, but there has been no built-in way to do the same thing for Stream. :(","body":"It&#39;s too bad Guava can&#39;t add some of these useful utilities... it&#39;s not the first time where a method has been in Guava for Iterable or Iterator, but there has been no built-in way to do the same thing for Stream. :("},{"owner":{"account_id":1060118,"reputation":497,"user_id":1061929,"display_name":"bjmi"},"score":0,"creation_date":1516591735,"post_id":22695031,"comment_id":83735723,"body_markdown":"Inspired by all these nice answers, what about this collector version (brevity) ? \n`Collectors.collectingAndThen(toList(), Iterables::getOnlyElement)`","body":"Inspired by all these nice answers, what about this collector version (brevity) ?  <code>Collectors.collectingAndThen(toList(), Iterables::getOnlyElement)</code>"},{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":1,"creation_date":1526574372,"post_id":22695031,"comment_id":87808402,"body_markdown":"@LonelyNeuron Please don&#39;t edit my code. It puts me in a situation where I need to validate my entire answer, which I have written four years ago, and I simply don&#39;t have the time for it right now.","body":"@LonelyNeuron Please don&#39;t edit my code. It puts me in a situation where I need to validate my entire answer, which I have written four years ago, and I simply don&#39;t have the time for it right now."},{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":0,"creation_date":1526574558,"post_id":22695031,"comment_id":87808498,"body_markdown":"I didn&#39;t change the spirit of your answer. Apart from one name, nothing changed. The first problem is that the answer is structured poorly by using &quot;Update&quot; blocks: https://meta.stackexchange.com/a/127655/316262","body":"I didn&#39;t change the spirit of your answer. Apart from one name, nothing changed. The first problem is that the answer is structured poorly by using &quot;Update&quot; blocks: <a href=\"https://meta.stackexchange.com/a/127655/316262\">meta.stackexchange.com/a/127655/316262</a>"},{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":0,"creation_date":1526574732,"post_id":22695031,"comment_id":87808601,"body_markdown":"You have one code block which is completely unnecessary, since you improved on it with the next iteration. it should be removed. The last example you gave is the best one. It should be on top, as readers want to find good answers quickly. Please review the edits I made and you will see that they preserve the spirit of your answer and enhance the structuring. Also, SO was built on the idea of improving other posts by editing them. Please refrain from asking others to not edit your posts and don&#39;t roll back good edits","body":"You have one code block which is completely unnecessary, since you improved on it with the next iteration. it should be removed. The last example you gave is the best one. It should be on top, as readers want to find good answers quickly. Please review the edits I made and you will see that they preserve the spirit of your answer and enhance the structuring. Also, SO was built on the idea of improving other posts by editing them. Please refrain from asking others to not edit your posts and don&#39;t roll back good edits"},{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":0,"creation_date":1526575038,"post_id":22695031,"comment_id":87808774,"body_markdown":"Please also read [this post](https://meta.stackoverflow.com/questions/367885/users-stating-that-they-do-not-want-their-posts-to-be-edited) and [the accepted answer](https://meta.stackoverflow.com/a/367886/4298200) on asking others not to edit your posts","body":"Please also read <a href=\"https://meta.stackoverflow.com/questions/367885/users-stating-that-they-do-not-want-their-posts-to-be-edited\">this post</a> and <a href=\"https://meta.stackoverflow.com/a/367886/4298200\">the accepted answer</a> on asking others not to edit your posts"},{"owner":{"account_id":35417,"reputation":1065761,"user_id":100297,"display_name":"Martijn Pieters"},"score":2,"creation_date":1527174085,"post_id":22695031,"comment_id":88037463,"body_markdown":"@skiwi: Lonely&#39;s edit was helpful and correct, so I re-instated it after review. People visiting this answer today don&#39;t care about how you came to the answer, they don&#39;t need to see the old version and new version and an *Updated* section. That makes your answer more confusing and less helpful. It is much better to put posts in a *final state*, and if people want to see how it all played out they can view the post history.","body":"@skiwi: Lonely&#39;s edit was helpful and correct, so I re-instated it after review. People visiting this answer today don&#39;t care about how you came to the answer, they don&#39;t need to see the old version and new version and an <i>Updated</i> section. That makes your answer more confusing and less helpful. It is much better to put posts in a <i>final state</i>, and if people want to see how it all played out they can view the post history."},{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":0,"creation_date":1527179639,"post_id":22695031,"comment_id":88040819,"body_markdown":"@MartijnPieters But the code that is now in the answer is not the code that I have written, it has been changed. I&#39;m personally fine with changes in the answer structure and text, but as I said I don&#39;t have time to review the changes to the code. And ultimately it&#39;s my name under the answer and I&#39;d like to keep it that way. I&#39;d prefer if the changes to the actual code (signature, names, etc.) would be reverted.","body":"@MartijnPieters But the code that is now in the answer is not the code that I have written, it has been changed. I&#39;m personally fine with changes in the answer structure and text, but as I said I don&#39;t have time to review the changes to the code. And ultimately it&#39;s my name under the answer and I&#39;d like to keep it that way. I&#39;d prefer if the changes to the actual code (signature, names, etc.) would be reverted."},{"owner":{"account_id":35417,"reputation":1065761,"user_id":100297,"display_name":"Martijn Pieters"},"score":2,"creation_date":1527180481,"post_id":22695031,"comment_id":88041274,"body_markdown":"@skiwi: The code in the answer is *absolutely* what you have written. All the editor did was clean up your post, only *removing* an earlier version of the `singletonCollector()` definition obsoleted by the version that remains in the post, and renaming it to `toSingleton()`. My Java stream expertise is a bit rusty, but the renaming looks helpful to me. Reviewing this change took me 2 minutes, tops. If you don&#39;t have time to review edits, can I suggest that you ask someone else to do this in future, perhaps in the [Java chat room](https://chat.stackoverflow.com/rooms/info/139/java)?","body":"@skiwi: The code in the answer is <i>absolutely</i> what you have written. All the editor did was clean up your post, only <i>removing</i> an earlier version of the <code>singletonCollector()</code> definition obsoleted by the version that remains in the post, and renaming it to <code>toSingleton()</code>. My Java stream expertise is a bit rusty, but the renaming looks helpful to me. Reviewing this change took me 2 minutes, tops. If you don&#39;t have time to review edits, can I suggest that you ask someone else to do this in future, perhaps in the <a href=\"https://chat.stackoverflow.com/rooms/info/139/java\">Java chat room</a>?"},{"owner":{"account_id":3849703,"reputation":435,"user_id":3190174,"accept_rate":75,"display_name":"Javo"},"score":12,"creation_date":1544108024,"post_id":22695031,"comment_id":94166547,"body_markdown":"I have to say that I really don&#39;t like the name toSingleton, since that is misleading. It is not a singleton it returns, which I consider to be a reserved word in programming. This is a &#39;single element&#39;, or &#39;one instance&#39;.","body":"I have to say that I really don&#39;t like the name toSingleton, since that is misleading. It is not a singleton it returns, which I consider to be a reserved word in programming. This is a &#39;single element&#39;, or &#39;one instance&#39;."},{"owner":{"account_id":5699126,"reputation":1030,"user_id":4504727,"display_name":"IPP Nerd"},"score":0,"creation_date":1607356068,"post_id":22695031,"comment_id":115239881,"body_markdown":"Great! In kotlin it&#39;s called single(). To provide more exception details throw new IllegalStateException(String.format(&quot;%d elements&quot;, list.size()));","body":"Great! In kotlin it&#39;s called single(). To provide more exception details throw new IllegalStateException(String.format(&quot;%d elements&quot;, list.size()));"},{"owner":{"account_id":39578,"reputation":1895,"user_id":1450778,"accept_rate":75,"display_name":"David Nouls"},"score":0,"creation_date":1622535688,"post_id":22695031,"comment_id":119813111,"body_markdown":"This solution is not ideal, it collects all of the items and then fails if there are more than one. A better approach would be to have a fully custom collector that stops as soon as more than one items is processed.","body":"This solution is not ideal, it collects all of the items and then fails if there are more than one. A better approach would be to have a fully custom collector that stops as soon as more than one items is processed."},{"owner":{"account_id":8793652,"reputation":740,"user_id":6572357,"display_name":"D&#225;niel Somogyi"},"score":0,"creation_date":1635930558,"post_id":22695031,"comment_id":123420642,"body_markdown":"@TWiStErRob Does that actually bother? I mean, you _expect_ to have one and only one element. If you will get multiple, I guess it won&#39;t be so many, that an O(n) operation is a problem.","body":"@TWiStErRob Does that actually bother? I mean, you <i>expect</i> to have one and only one element. If you will get multiple, I guess it won&#39;t be so many, that an O(n) operation is a problem."},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":0,"creation_date":1635931284,"post_id":22695031,"comment_id":123420946,"body_markdown":"@D&#225;nielSomogyi We&#39;re expecting one item *after* `filter`, before `filter` there could be millions/billions. If you look at the answer at the time of me writing that comment, you&#39;ll see it was doing collect *before* `filter` (`collectingAndThen`), so it does matter; or maybe just wasn&#39;t clear that it was supposed to be applied *after* a `filter`.","body":"@D&#225;nielSomogyi We&#39;re expecting one item <i>after</i> <code>filter</code>, before <code>filter</code> there could be millions/billions. If you look at the answer at the time of me writing that comment, you&#39;ll see it was doing collect <i>before</i> <code>filter</code> (<code>collectingAndThen</code>), so it does matter; or maybe just wasn&#39;t clear that it was supposed to be applied <i>after</i> a <code>filter</code>."},{"owner":{"account_id":8793652,"reputation":740,"user_id":6572357,"display_name":"D&#225;niel Somogyi"},"score":0,"creation_date":1635938475,"post_id":22695031,"comment_id":123423713,"body_markdown":"@TWiStErRob ohh, sure, mb, I was way too focused on the collecting itself. So actually, you want to filter, and after the second element passing through the filtering abort with an error. This avoids filtering the other god-knows-how-many elements. To answer your question: I guess the solution by reduction (e.g. by @assylias) would do that, or you use 3rd party packages like guava. You also could use a for-loop...","body":"@TWiStErRob ohh, sure, mb, I was way too focused on the collecting itself. So actually, you want to filter, and after the second element passing through the filtering abort with an error. This avoids filtering the other god-knows-how-many elements. To answer your question: I guess the solution by reduction (e.g. by @assylias) would do that, or you use 3rd party packages like guava. You also could use a for-loop..."},{"owner":{"account_id":279146,"reputation":5158,"user_id":574147,"display_name":"Fabio Bonfante"},"score":1,"creation_date":1645526531,"post_id":22695031,"comment_id":125888907,"body_markdown":"Using reduce is the most effective and compact way to do this https://stackoverflow.com/a/52006240/574147","body":"Using reduce is the most effective and compact way to do this <a href=\"https://stackoverflow.com/a/52006240/574147\">stackoverflow.com/a/52006240/574147</a>"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1649766640,"post_id":22695031,"comment_id":126954799,"body_markdown":".NET LINQ exposes a very simple to use `.Single` method - the fact that Java **still** does not have this natively built-in after **18** versions is so absurd to me.","body":".NET LINQ exposes a very simple to use <code>.Single</code> method - the fact that Java <b>still</b> does not have this natively built-in after <b>18</b> versions is so absurd to me."},{"owner":{"account_id":434325,"reputation":61,"user_id":820227,"display_name":"Hiroshi_U"},"score":1,"creation_date":1659689546,"post_id":22695031,"comment_id":129358796,"body_markdown":"As @FabioBonfante said, reduce will be more elegant and efficient.","body":"As @FabioBonfante said, reduce will be more elegant and efficient."}],"tags":[],"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"comment_count":21,"down_vote_count":5,"up_vote_count":301,"is_accepted":true,"score":296,"last_activity_date":1659974042,"creation_date":1395941583,"answer_id":22695031,"question_id":22694884,"body_markdown":"### Create a custom [`Collector`][1]\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, T&gt; toSingleton() {\r\n        return Collectors.collectingAndThen(\r\n                Collectors.toList(),\r\n                list -&gt; {\r\n                    if (list.size() != 1) {\r\n                        throw new IllegalStateException();\r\n                    }\r\n                    return list.get(0);\r\n                }\r\n        );\r\n    }\r\n\r\nWe use [`Collectors.collectingAndThen`][2] to construct our desired `Collector` by \r\n\r\n1. Collecting our objects in a `List` with the `Collectors.toList()` collector.\r\n2. Applying an extra finisher at the end, that returns the single element — or throws an `IllegalStateException` if `list.size != 1`.\r\n\r\nUsed as:\r\n\r\n    User resultUser = users.stream()\r\n            .filter(user -&gt; user.getId() &gt; 0)\r\n            .collect(toSingleton());\r\n\r\nYou can then customize this `Collector` as much as you want, for example give the exception as argument in the constructor, tweak it to allow two values, and more.\r\n\r\n### An alternative — arguably less elegant — solution:\r\n\r\nYou can use a &#39;workaround&#39; that involves `peek()` and an `AtomicInteger`, but really you shouldn&#39;t be using that.\r\n\r\nWhat you could do instead is just collecting it in a `List`, like this:\r\n\r\n    LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\r\n    users.add(new User(1, &quot;User1&quot;));\r\n    users.add(new User(2, &quot;User2&quot;));\r\n    users.add(new User(3, &quot;User3&quot;));\r\n    List&lt;User&gt; resultUserList = users.stream()\r\n            .filter(user -&gt; user.getId() == 1)\r\n            .collect(Collectors.toList());\r\n    if (resultUserList.size() != 1) {\r\n        throw new IllegalStateException();\r\n    }\r\n    User resultUser = resultUserList.get(0);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-","title":"Filter Java Stream to 1 and only 1 element","body":"<h3>Create a custom <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"noreferrer\"><code>Collector</code></a></h3>\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, T&gt; toSingleton() {\n    return Collectors.collectingAndThen(\n            Collectors.toList(),\n            list -&gt; {\n                if (list.size() != 1) {\n                    throw new IllegalStateException();\n                }\n                return list.get(0);\n            }\n    );\n}\n</code></pre>\n<p>We use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-\" rel=\"noreferrer\"><code>Collectors.collectingAndThen</code></a> to construct our desired <code>Collector</code> by</p>\n<ol>\n<li>Collecting our objects in a <code>List</code> with the <code>Collectors.toList()</code> collector.</li>\n<li>Applying an extra finisher at the end, that returns the single element — or throws an <code>IllegalStateException</code> if <code>list.size != 1</code>.</li>\n</ol>\n<p>Used as:</p>\n<pre><code>User resultUser = users.stream()\n        .filter(user -&gt; user.getId() &gt; 0)\n        .collect(toSingleton());\n</code></pre>\n<p>You can then customize this <code>Collector</code> as much as you want, for example give the exception as argument in the constructor, tweak it to allow two values, and more.</p>\n<h3>An alternative — arguably less elegant — solution:</h3>\n<p>You can use a 'workaround' that involves <code>peek()</code> and an <code>AtomicInteger</code>, but really you shouldn't be using that.</p>\n<p>What you could do instead is just collecting it in a <code>List</code>, like this:</p>\n<pre><code>LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, &quot;User1&quot;));\nusers.add(new User(2, &quot;User2&quot;));\nusers.add(new User(3, &quot;User3&quot;));\nList&lt;User&gt; resultUserList = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .collect(Collectors.toList());\nif (resultUserList.size() != 1) {\n    throw new IllegalStateException();\n}\nUser resultUser = resultUserList.get(0);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":1,"creation_date":1395945373,"post_id":22695141,"comment_id":34580585,"body_markdown":"I would add an identity element (`null`) to prevent using `get()`. Sadly your `reduce` is not working as you think it does, consider a `Stream` that has `null` elements in it, maybe you think that you covered it, but I can be `[User#1, null, User#2, null, User#3]`, now it will not throw an exception I think, unless I&#39;m mistaken here.","body":"I would add an identity element (<code>null</code>) to prevent using <code>get()</code>. Sadly your <code>reduce</code> is not working as you think it does, consider a <code>Stream</code> that has <code>null</code> elements in it, maybe you think that you covered it, but I can be <code>[User#1, null, User#2, null, User#3]</code>, now it will not throw an exception I think, unless I&#39;m mistaken here."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1395945460,"post_id":22695141,"comment_id":34580631,"body_markdown":"@Skiwi if there are null elements the filter will throw a NPE first.","body":"@Skiwi if there are null elements the filter will throw a NPE first."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1478252305,"post_id":22695141,"comment_id":68087476,"body_markdown":"Since you know that the stream can’t pass `null` to the reduction function, removing the identity value argument would render the entire dealing with `null` in the function obsolete: `reduce( (u,v) -&gt; { throw new IllegalStateException(&quot;More than one ID found&quot;); } )` does the job and even better, it already returns an `Optional`, eliding the necessity for calling `Optional.ofNullable` on the result.","body":"Since you know that the stream can’t pass <code>null</code> to the reduction function, removing the identity value argument would render the entire dealing with <code>null</code> in the function obsolete: <code>reduce( (u,v) -&gt; { throw new IllegalStateException(&quot;More than one ID found&quot;); } )</code> does the job and even better, it already returns an <code>Optional</code>, eliding the necessity for calling <code>Optional.ofNullable</code> on the result."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":3,"down_vote_count":2,"up_vote_count":29,"is_accepted":false,"score":27,"last_activity_date":1481700868,"creation_date":1395941836,"answer_id":22695141,"question_id":22694884,"body_markdown":"###Update \r\n\r\nNice suggestion in comment from @Holger:\r\n\r\n    Optional&lt;User&gt; match = users.stream()\r\n                  .filter((user) -&gt; user.getId() &gt; 1)\r\n                  .reduce((u, v) -&gt; { throw new IllegalStateException(&quot;More than one ID found&quot;) });\r\n\r\n###Original answer\r\n\r\nThe exception is thrown by `Optional#get`, but if you have more than one element that won&#39;t help. You could collect the users in a collection that only accepts one item, for example:\r\n\r\n    User match = users.stream().filter((user) -&gt; user.getId() &gt; 1)\r\n                      .collect(toCollection(() -&gt; new ArrayBlockingQueue&lt;User&gt;(1)))\r\n                      .poll();\r\n\r\nwhich throws a `java.lang.IllegalStateException: Queue full`, but that feels too hacky.\r\n\r\nOr you could use a reduction combined with an optional:\r\n\r\n    User match = Optional.ofNullable(users.stream().filter((user) -&gt; user.getId() &gt; 1)\r\n                    .reduce(null, (u, v) -&gt; {\r\n                        if (u != null &amp;&amp; v != null)\r\n                            throw new IllegalStateException(&quot;More than one ID found&quot;);\r\n                        else return u == null ? v : u;\r\n                    })).get();\r\n\r\nThe reduction essentially returns:\r\n\r\n- null if no user is found\r\n- the user if only one is found\r\n- throws an exception if more than one is found\r\n\r\nThe result is then wrapped in an optional.\r\n\r\nBut the simplest solution would probably be to just collect to a collection, check that its size is 1 and get the only element.","title":"Filter Java Stream to 1 and only 1 element","body":"<h3>Update</h3>\n\n<p>Nice suggestion in comment from @Holger:</p>\n\n<pre><code>Optional&lt;User&gt; match = users.stream()\n              .filter((user) -&gt; user.getId() &gt; 1)\n              .reduce((u, v) -&gt; { throw new IllegalStateException(\"More than one ID found\") });\n</code></pre>\n\n<h3>Original answer</h3>\n\n<p>The exception is thrown by <code>Optional#get</code>, but if you have more than one element that won't help. You could collect the users in a collection that only accepts one item, for example:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &gt; 1)\n                  .collect(toCollection(() -&gt; new ArrayBlockingQueue&lt;User&gt;(1)))\n                  .poll();\n</code></pre>\n\n<p>which throws a <code>java.lang.IllegalStateException: Queue full</code>, but that feels too hacky.</p>\n\n<p>Or you could use a reduction combined with an optional:</p>\n\n<pre><code>User match = Optional.ofNullable(users.stream().filter((user) -&gt; user.getId() &gt; 1)\n                .reduce(null, (u, v) -&gt; {\n                    if (u != null &amp;&amp; v != null)\n                        throw new IllegalStateException(\"More than one ID found\");\n                    else return u == null ? v : u;\n                })).get();\n</code></pre>\n\n<p>The reduction essentially returns:</p>\n\n<ul>\n<li>null if no user is found</li>\n<li>the user if only one is found</li>\n<li>throws an exception if more than one is found</li>\n</ul>\n\n<p>The result is then wrapped in an optional.</p>\n\n<p>But the simplest solution would probably be to just collect to a collection, check that its size is 1 and get the only element.</p>\n"},{"comments":[{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":0,"creation_date":1395952631,"post_id":22695424,"comment_id":34585297,"body_markdown":"@skiwi&#39;s singletonCollector was smaller and easier to follow than this, that&#39;s why I gave him the check. But good to see consensus in the answer: a custom `Collector` was the way to go.","body":"@skiwi&#39;s singletonCollector was smaller and easier to follow than this, that&#39;s why I gave him the check. But good to see consensus in the answer: a custom <code>Collector</code> was the way to go."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1395952818,"post_id":22695424,"comment_id":34585386,"body_markdown":"Fair enough.  I was primarily aiming for speed, not conciseness.","body":"Fair enough.  I was primarily aiming for speed, not conciseness."},{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":1,"creation_date":1395953132,"post_id":22695424,"comment_id":34585581,"body_markdown":"Yeah? Why is yours faster?","body":"Yeah? Why is yours faster?"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1395953542,"post_id":22695424,"comment_id":34585825,"body_markdown":"Mostly because allocating an all-up `List` is more expensive than a single mutable reference.","body":"Mostly because allocating an all-up <code>List</code> is more expensive than a single mutable reference."},{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":0,"creation_date":1396031333,"post_id":22695424,"comment_id":34624976,"body_markdown":"I was unable to get yours to compile","body":"I was unable to get yours to compile"},{"owner":{"account_id":352190,"reputation":173,"user_id":689119,"display_name":"nezda"},"score":0,"creation_date":1425221872,"post_id":22695424,"comment_id":45864411,"body_markdown":"Compiles (and works great!) with change `AtomicReference::new` → `AtomicReference&lt;E&gt;::new`","body":"Compiles (and works great!) with change <code>AtomicReference::new</code> → <code>AtomicReference&lt;E&gt;::new</code>"},{"owner":{"account_id":78072,"reputation":19350,"user_id":222438,"accept_rate":90,"display_name":"jlb"},"score":0,"creation_date":1439899128,"post_id":22695424,"comment_id":52040089,"body_markdown":"Still having compile problems - Eclipse tells me &quot;The method compareAndSet(capture#8-of ? extends Object, capture#8-of ? extends Object) in the type AtomicReference&lt;capture#8-of ? extends Object&gt; is not applicable for the arguments (null, E)&quot; for `!ref.compareAndSet(null, (E) e)`. If i don&#39;t cast to `E` in the 2nd argument, i get &quot;The method compareAndSet(E, E) in the type AtomicReference&lt;E&gt; is not applicable for the arguments (null, Object)&quot;. For some reason the generics aren&#39;t being picked up properly. Wish it was working though, this is a great answer!","body":"Still having compile problems - Eclipse tells me &quot;The method compareAndSet(capture#8-of ? extends Object, capture#8-of ? extends Object) in the type AtomicReference&lt;capture#8-of ? extends Object&gt; is not applicable for the arguments (null, E)&quot; for <code>!ref.compareAndSet(null, (E) e)</code>. If i don&#39;t cast to <code>E</code> in the 2nd argument, i get &quot;The method compareAndSet(E, E) in the type AtomicReference&lt;E&gt; is not applicable for the arguments (null, Object)&quot;. For some reason the generics aren&#39;t being picked up properly. Wish it was working though, this is a great answer!"},{"owner":{"account_id":25463,"reputation":19710,"user_id":65458,"accept_rate":88,"display_name":"Piotr Findeisen"},"score":2,"creation_date":1502951935,"post_id":22695424,"comment_id":78413864,"body_markdown":"@LouisWasserman, the final update sentence about `MoreCollectors.onlyElement()` should actually be first (and perhaps the only :) )","body":"@LouisWasserman, the final update sentence about <code>MoreCollectors.onlyElement()</code> should actually be first (and perhaps the only :) )"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1659735793,"post_id":22695424,"comment_id":129373806,"body_markdown":"Why not `return Collectors.reducing((a, b) -&gt; { throw new IllegalArgumentException(); })`?","body":"Why not <code>return Collectors.reducing((a, b) -&gt; { throw new IllegalArgumentException(); })</code>?"}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":9,"down_vote_count":1,"up_vote_count":93,"is_accepted":false,"score":92,"last_activity_date":1536141722,"creation_date":1395942676,"answer_id":22695424,"question_id":22694884,"body_markdown":"[Guava][1] provides [`MoreCollectors.onlyElement()`][2] which does the right thing here.  But if you have to do it yourself, you could roll your own `Collector` for this:\r\n\r\n    &lt;E&gt; Collector&lt;E, ?, Optional&lt;E&gt;&gt; getOnly() {\r\n      return Collector.of(\r\n        AtomicReference::new,\r\n        (ref, e) -&gt; {\r\n          if (!ref.compareAndSet(null, e)) {\r\n             throw new IllegalArgumentException(&quot;Multiple values&quot;);\r\n          }\r\n        },\r\n        (ref1, ref2) -&gt; {\r\n          if (ref1.get() == null) {\r\n            return ref2;\r\n          } else if (ref2.get() != null) {\r\n            throw new IllegalArgumentException(&quot;Multiple values&quot;);\r\n          } else {\r\n            return ref1;\r\n          }\r\n        },\r\n        ref -&gt; Optional.ofNullable(ref.get()),\r\n        Collector.Characteristics.UNORDERED);\r\n    }\r\n\r\n...or using your own `Holder` type instead of `AtomicReference`.  You can reuse that `Collector` as much as you like.\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: http://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--","title":"Filter Java Stream to 1 and only 1 element","body":"<p><a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> provides <a href=\"http://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--\" rel=\"noreferrer\"><code>MoreCollectors.onlyElement()</code></a> which does the right thing here.  But if you have to do it yourself, you could roll your own <code>Collector</code> for this:</p>\n\n<pre><code>&lt;E&gt; Collector&lt;E, ?, Optional&lt;E&gt;&gt; getOnly() {\n  return Collector.of(\n    AtomicReference::new,\n    (ref, e) -&gt; {\n      if (!ref.compareAndSet(null, e)) {\n         throw new IllegalArgumentException(\"Multiple values\");\n      }\n    },\n    (ref1, ref2) -&gt; {\n      if (ref1.get() == null) {\n        return ref2;\n      } else if (ref2.get() != null) {\n        throw new IllegalArgumentException(\"Multiple values\");\n      } else {\n        return ref1;\n      }\n    },\n    ref -&gt; Optional.ofNullable(ref.get()),\n    Collector.Characteristics.UNORDERED);\n}\n</code></pre>\n\n<p>...or using your own <code>Holder</code> type instead of <code>AtomicReference</code>.  You can reuse that <code>Collector</code> as much as you like.</p>\n"},{"comments":[{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":3,"creation_date":1396031368,"post_id":22706286,"comment_id":34624992,"body_markdown":"It was said that `count()` is not good to use because it is a terminal operation.","body":"It was said that <code>count()</code> is not good to use because it is a terminal operation."},{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":0,"creation_date":1536142221,"post_id":22706286,"comment_id":91314880,"body_markdown":"If this really is a quote, please add your sources","body":"If this really is a quote, please add your sources"}],"tags":[],"owner":{"account_id":3037387,"reputation":5468,"user_id":2575134,"display_name":"pardeep131085"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1536672646,"creation_date":1395990191,"answer_id":22706286,"question_id":22694884,"body_markdown":"Have you tried this\r\n\r\n    long c = users.stream().filter((user) -&gt; user.getId() == 1).count();\r\n    if(c &gt; 1){\r\n        throw new IllegalStateException();\r\n    }\r\n\r\n---\r\n\r\n    long count()\r\n    Returns the count of elements in this stream. This is a special case of a reduction and is equivalent to:\r\n    \r\n         return mapToLong(e -&gt; 1L).sum();\r\n     \r\n    This is a terminal operation.\r\n\r\nSource: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"Filter Java Stream to 1 and only 1 element","body":"<p>Have you tried this</p>\n\n<pre><code>long c = users.stream().filter((user) -&gt; user.getId() == 1).count();\nif(c &gt; 1){\n    throw new IllegalStateException();\n}\n</code></pre>\n\n<hr>\n\n<pre><code>long count()\nReturns the count of elements in this stream. This is a special case of a reduction and is equivalent to:\n\n     return mapToLong(e -&gt; 1L).sum();\n\nThis is a terminal operation.\n</code></pre>\n\n<p>Source: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html</a></p>\n"},{"comments":[{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":7,"creation_date":1396031477,"post_id":22717262,"comment_id":34625059,"body_markdown":"What&#39;s the point of `limit(2)` in this solution? What difference would it make whether the resulting list was 2 or 100? If it&#39;s greater than 1.","body":"What&#39;s the point of <code>limit(2)</code> in this solution? What difference would it make whether the resulting list was 2 or 100? If it&#39;s greater than 1."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":25,"creation_date":1396063441,"post_id":22717262,"comment_id":34636083,"body_markdown":"It stops immediately if it finds a second match. This is what all the fancy collectors do, just using more code. :-)","body":"It stops immediately if it finds a second match. This is what all the fancy collectors do, just using more code. :-)"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":11,"creation_date":1452515718,"post_id":22717262,"comment_id":57189021,"body_markdown":"How about adding `Collectors.collectingAndThen(toList(), l -&gt; { if (l.size() == 1) return l.get(0); throw new RuntimeException(); })`","body":"How about adding <code>Collectors.collectingAndThen(toList(), l -&gt; { if (l.size() == 1) return l.get(0); throw new RuntimeException(); })</code>"},{"owner":{"account_id":322284,"reputation":16565,"user_id":641627,"display_name":"alexbt"},"score":1,"creation_date":1513626094,"post_id":22717262,"comment_id":82716039,"body_markdown":"Javadoc says this about limit&#39;s param: `maxSize: the number of elements the stream should be limited to`. So, shouldn&#39;t it be `.limit(1)` instead of `.limit(2)` ?","body":"Javadoc says this about limit&#39;s param: <code>maxSize: the number of elements the stream should be limited to</code>. So, shouldn&#39;t it be <code>.limit(1)</code> instead of <code>.limit(2)</code> ?"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":10,"creation_date":1513628305,"post_id":22717262,"comment_id":82716996,"body_markdown":"@alexbt The problem statement is to ensure that there is exactly one (no more, no fewer) matching element. After my code, one can test `result.size()` to make sure it equals 1. If it&#39;s 2, then there&#39;s more than one match, so it&#39;s an error. If the code instead did `limit(1)`, more than one match would result in a single element, which can&#39;t be distinguished from there being exactly one match. This would miss an error case the OP was concerned about.","body":"@alexbt The problem statement is to ensure that there is exactly one (no more, no fewer) matching element. After my code, one can test <code>result.size()</code> to make sure it equals 1. If it&#39;s 2, then there&#39;s more than one match, so it&#39;s an error. If the code instead did <code>limit(1)</code>, more than one match would result in a single element, which can&#39;t be distinguished from there being exactly one match. This would miss an error case the OP was concerned about."},{"owner":{"account_id":322284,"reputation":16565,"user_id":641627,"display_name":"alexbt"},"score":0,"creation_date":1513631188,"post_id":22717262,"comment_id":82718304,"body_markdown":"@StuartMarks Ah, got it, I don&#39;t know why I assumed `limit(...)` would throw when it goes beyond the limit. thanks","body":"@StuartMarks Ah, got it, I don&#39;t know why I assumed <code>limit(...)</code> would throw when it goes beyond the limit. thanks"}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":6,"down_vote_count":7,"up_vote_count":104,"is_accepted":false,"score":97,"last_activity_date":1683014052,"creation_date":1396021163,"answer_id":22717262,"question_id":22694884,"body_markdown":"The other answers that involve writing a custom [`Collector`][1] are probably more efficient (such as [Louis Wasserman&#39;s][2], +1), but if you want brevity, I&#39;d suggest the following:\r\n\r\n    List&lt;User&gt; result = users.stream()\r\n        .filter(user -&gt; user.getId() == 1)\r\n        .limit(2)\r\n        .collect(Collectors.toList());\r\n\r\nThen verify the size of the result list.\r\n\r\n    if (result.size() != 1) {\r\n      throw new IllegalStateException(&quot;Expected exactly one user but got &quot; + result);\r\n    }\r\n    User user = result.get(0);\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\r\n  [2]: https://stackoverflow.com/a/22695424/1441122","title":"Filter Java Stream to 1 and only 1 element","body":"<p>The other answers that involve writing a custom <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"nofollow noreferrer\"><code>Collector</code></a> are probably more efficient (such as <a href=\"https://stackoverflow.com/a/22695424/1441122\">Louis Wasserman's</a>, +1), but if you want brevity, I'd suggest the following:</p>\n<pre><code>List&lt;User&gt; result = users.stream()\n    .filter(user -&gt; user.getId() == 1)\n    .limit(2)\n    .collect(Collectors.toList());\n</code></pre>\n<p>Then verify the size of the result list.</p>\n<pre><code>if (result.size() != 1) {\n  throw new IllegalStateException(&quot;Expected exactly one user but got &quot; + result);\n}\nUser user = result.get(0);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1843851,"reputation":3637,"user_id":1672678,"display_name":"anre"},"score":6,"creation_date":1461852802,"post_id":23848844,"comment_id":61396487,"body_markdown":"Guava&#39;s method: Iterators.getOnlyElement(Iterator&lt;T&gt; iterator).","body":"Guava&#39;s method: Iterators.getOnlyElement(Iterator&lt;T&gt; iterator)."}],"tags":[],"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"comment_count":1,"down_vote_count":2,"up_vote_count":37,"is_accepted":false,"score":35,"last_activity_date":1619375545,"creation_date":1400959588,"answer_id":23848844,"question_id":22694884,"body_markdown":"The &quot;escape hatch&quot; operation that lets you do weird things that are not otherwise supported by streams is to ask for an `Iterator`:\r\n\r\n    Iterator&lt;T&gt; it = users.stream().filter((user) -&gt; user.getId() &lt; 0).iterator();\r\n    if (!it.hasNext()) {\r\n        throw new NoSuchElementException();\r\n    } else {\r\n        result = it.next();\r\n        if (it.hasNext()) {\r\n            throw new TooManyElementsException();\r\n        }\r\n    }\r\n\r\n\r\nGuava has a convenience method to take an `Iterator` and get the only element, throwing if there are zero or multiple elements, which could replace the bottom n-1 lines here.","title":"Filter Java Stream to 1 and only 1 element","body":"<p>The &quot;escape hatch&quot; operation that lets you do weird things that are not otherwise supported by streams is to ask for an <code>Iterator</code>:</p>\n<pre><code>Iterator&lt;T&gt; it = users.stream().filter((user) -&gt; user.getId() &lt; 0).iterator();\nif (!it.hasNext()) {\n    throw new NoSuchElementException();\n} else {\n    result = it.next();\n    if (it.hasNext()) {\n        throw new TooManyElementsException();\n    }\n}\n</code></pre>\n<p>Guava has a convenience method to take an <code>Iterator</code> and get the only element, throwing if there are zero or multiple elements, which could replace the bottom n-1 lines here.</p>\n"},{"tags":[],"owner":{"account_id":248187,"reputation":22658,"user_id":523391,"display_name":"prunge"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1431482488,"creation_date":1431482488,"answer_id":30204384,"question_id":22694884,"body_markdown":"An alternative is to use reduction:\r\n(this example uses strings but could easily apply to any object type including `User`)\r\n\r\n    List&lt;String&gt; list = ImmutableList.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;, &quot;two&quot;);\r\n    String match = list.stream().filter(&quot;two&quot;::equals).reduce(thereCanBeOnlyOne()).get();\r\n    //throws NoSuchElementException if there are no matching elements - &quot;zero&quot;\r\n    //throws RuntimeException if duplicates are found - &quot;two&quot;\r\n    //otherwise returns the match - &quot;one&quot;\r\n    ...\r\n\r\n    //Reduction operator that throws RuntimeException if there are duplicates\r\n    private static &lt;T&gt; BinaryOperator&lt;T&gt; thereCanBeOnlyOne()\r\n    {\r\n        return (a, b) -&gt; {throw new RuntimeException(&quot;Duplicate elements found: &quot; + a + &quot; and &quot; + b);};\r\n    }\r\n\r\nSo for the case with `User` you would have:\r\n\r\n    User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).reduce(thereCanBeOnlyOne()).get();\r\n    ","title":"Filter Java Stream to 1 and only 1 element","body":"<p>An alternative is to use reduction:\n(this example uses strings but could easily apply to any object type including <code>User</code>)</p>\n\n<pre><code>List&lt;String&gt; list = ImmutableList.of(\"one\", \"two\", \"three\", \"four\", \"five\", \"two\");\nString match = list.stream().filter(\"two\"::equals).reduce(thereCanBeOnlyOne()).get();\n//throws NoSuchElementException if there are no matching elements - \"zero\"\n//throws RuntimeException if duplicates are found - \"two\"\n//otherwise returns the match - \"one\"\n...\n\n//Reduction operator that throws RuntimeException if there are duplicates\nprivate static &lt;T&gt; BinaryOperator&lt;T&gt; thereCanBeOnlyOne()\n{\n    return (a, b) -&gt; {throw new RuntimeException(\"Duplicate elements found: \" + a + \" and \" + b);};\n}\n</code></pre>\n\n<p>So for the case with <code>User</code> you would have:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).reduce(thereCanBeOnlyOne()).get();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":266404,"reputation":1784,"user_id":553952,"accept_rate":93,"display_name":"arin"},"score":12,"creation_date":1496854355,"post_id":34663949,"comment_id":75835835,"body_markdown":"I like the initial approach in this answer. For customization purposes, it is possible to convert the last `get()` to `orElseThrow()`","body":"I like the initial approach in this answer. For customization purposes, it is possible to convert the last <code>get()</code> to <code>orElseThrow()</code>"},{"owner":{"account_id":29802,"reputation":11140,"user_id":80779,"accept_rate":90,"display_name":"LordOfThePigs"},"score":7,"creation_date":1516703859,"post_id":34663949,"comment_id":83786996,"body_markdown":"I like the brevity of this one, and the fact that it avoid creating an un-necessary List instance each time it is called.","body":"I like the brevity of this one, and the fact that it avoid creating an un-necessary List instance each time it is called."},{"owner":{"account_id":2392650,"reputation":2659,"user_id":2092205,"display_name":"Matthew Wise"},"score":1,"creation_date":1607604182,"post_id":34663949,"comment_id":115328212,"body_markdown":"In case your use case allows for the stream to be empty, omit the `.get()` on the end of the chain and then you&#39;ll get an `Optional` which will either be empty in case the stream is empty or will be populated with the single element.","body":"In case your use case allows for the stream to be empty, omit the <code>.get()</code> on the end of the chain and then you&#39;ll get an <code>Optional</code> which will either be empty in case the stream is empty or will be populated with the single element."},{"owner":{"account_id":2799979,"reputation":202,"user_id":6319698,"display_name":"Tomasz S"},"score":0,"creation_date":1624963915,"post_id":34663949,"comment_id":120495292,"body_markdown":"I don&#39;t think its a good solution since in an error message we will have only first two elements which are invalid and we will not include value of more than two of them.","body":"I don&#39;t think its a good solution since in an error message we will have only first two elements which are invalid and we will not include value of more than two of them."},{"owner":{"account_id":4183802,"reputation":309,"user_id":3428029,"display_name":"phe"},"score":0,"creation_date":1631520400,"post_id":34663949,"comment_id":122234381,"body_markdown":"It is a great solution due to its brevity and comprehensibility.","body":"It is a great solution due to its brevity and comprehensibility."},{"owner":{"account_id":27038,"reputation":8221,"user_id":70918,"accept_rate":93,"display_name":"Migol"},"score":0,"creation_date":1635153723,"post_id":34663949,"comment_id":123210111,"body_markdown":"Downvoting for a hacky solution on reducer as it provides misinformation - it will always show 2 values even if there is a lot more.","body":"Downvoting for a hacky solution on reducer as it provides misinformation - it will always show 2 values even if there is a lot more."},{"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"score":2,"creation_date":1648730762,"post_id":34663949,"comment_id":126702350,"body_markdown":"Caution: `Stream#reduce(...)` does behave differently than `Stream#collect(Collectors.reducing(...))`: Both make the stream return an `Optional`, however `Stream#reduce` will throw an NPE nevertheless when returning `null` inside the binary operator. So the code in the answer works, but it wont if you mix up the two code pieces","body":"Caution: <code>Stream#reduce(...)</code> does behave differently than <code>Stream#collect(Collectors.reducing(...))</code>: Both make the stream return an <code>Optional</code>, however <code>Stream#reduce</code> will throw an NPE nevertheless when returning <code>null</code> inside the binary operator. So the code in the answer works, but it wont if you mix up the two code pieces"}],"tags":[],"owner":{"account_id":130073,"reputation":21988,"user_id":329063,"accept_rate":75,"display_name":"glts"},"comment_count":7,"down_vote_count":2,"up_vote_count":177,"is_accepted":false,"score":175,"last_activity_date":1452982263,"creation_date":1452196299,"answer_id":34663949,"question_id":22694884,"body_markdown":"For the sake of completeness, here is the ‘one-liner’ corresponding to @prunge’s excellent answer:\r\n\r\n    User user1 = users.stream()\r\n            .filter(user -&gt; user.getId() == 1)\r\n            .reduce((a, b) -&gt; {\r\n                throw new IllegalStateException(&quot;Multiple elements: &quot; + a + &quot;, &quot; + b);\r\n            })\r\n            .get();\r\n\r\nThis obtains the sole matching element from the stream, throwing\r\n\r\n*   `NoSuchElementException` in case the stream is empty, or\r\n*   `IllegalStateException` in case the stream contains more than one matching element.\r\n\r\nA variation of this approach avoids throwing an exception early and instead represents the result as an `Optional` containing either the sole element, or nothing (empty) if there are zero or multiple elements:\r\n\r\n    Optional&lt;User&gt; user1 = users.stream()\r\n            .filter(user -&gt; user.getId() == 1)\r\n            .collect(Collectors.reducing((a, b) -&gt; null));\r\n","title":"Filter Java Stream to 1 and only 1 element","body":"<p>For the sake of completeness, here is the ‘one-liner’ corresponding to @prunge’s excellent answer:</p>\n\n<pre><code>User user1 = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .reduce((a, b) -&gt; {\n            throw new IllegalStateException(\"Multiple elements: \" + a + \", \" + b);\n        })\n        .get();\n</code></pre>\n\n<p>This obtains the sole matching element from the stream, throwing</p>\n\n<ul>\n<li><code>NoSuchElementException</code> in case the stream is empty, or</li>\n<li><code>IllegalStateException</code> in case the stream contains more than one matching element.</li>\n</ul>\n\n<p>A variation of this approach avoids throwing an exception early and instead represents the result as an <code>Optional</code> containing either the sole element, or nothing (empty) if there are zero or multiple elements:</p>\n\n<pre><code>Optional&lt;User&gt; user1 = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .collect(Collectors.reducing((a, b) -&gt; null));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":0,"creation_date":1523643993,"post_id":34665668,"comment_id":86661819,"body_markdown":"Correct answer, initialializing a blocking stream or collection is probably not very cheap (in terms of resources) though.","body":"Correct answer, initialializing a blocking stream or collection is probably not very cheap (in terms of resources) though."}],"tags":[],"owner":{"account_id":4093298,"reputation":4962,"user_id":3360759,"display_name":"frhack"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1452203787,"creation_date":1452202810,"answer_id":34665668,"question_id":22694884,"body_markdown":"We can use [RxJava][1] (very powerful [reactive extension][2] library)\r\n\r\n    LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\r\n    users.add(new User(1, &quot;User1&quot;));\r\n    users.add(new User(2, &quot;User2&quot;));\r\n    users.add(new User(3, &quot;User3&quot;));\r\n\r\n    User userFound =  Observable.from(users)\r\n                      .filter((user) -&gt; user.getId() == 1)\r\n                      .single().toBlocking().first();\r\n    \r\nThe *single* [operator][3] throws an exception if no user or more then one user is found. \r\n\r\n\r\n  [1]: https://github.com/ReactiveX/RxJava\r\n  [2]: http://reactivex.io/\r\n  [3]: http://reactivex.io/documentation/operators.html","title":"Filter Java Stream to 1 and only 1 element","body":"<p>We can use <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"nofollow\">RxJava</a> (very powerful <a href=\"http://reactivex.io/\" rel=\"nofollow\">reactive extension</a> library)</p>\n\n<pre><code>LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, \"User1\"));\nusers.add(new User(2, \"User2\"));\nusers.add(new User(3, \"User3\"));\n\nUser userFound =  Observable.from(users)\n                  .filter((user) -&gt; user.getId() == 1)\n                  .single().toBlocking().first();\n</code></pre>\n\n<p>The <em>single</em> <a href=\"http://reactivex.io/documentation/operators.html\" rel=\"nofollow\">operator</a> throws an exception if no user or more then one user is found. </p>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536141985,"creation_date":1452492510,"answer_id":34715168,"question_id":22694884,"body_markdown":"If you don&#39;t mind using a 3rd party library, [`SequenceM`](http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/7.1.0/com/aol/cyclops/sequence/SequenceM.html) from [cyclops-streams](https://github.com/aol/cyclops/tree/master/cyclops-streams) (and [`LazyFutureStream`](http://static.javadoc.io/com.aol.simplereact/simple-react/0.99.6/com/aol/simple/react/stream/traits/LazyFutureStream.html) from [simple-react](https://github.com/aol/simple-react)) both a have single &amp; singleOptional operators. \r\n\r\n`singleOptional()` throws an exception if there are `0` or more than `1` elements in the `Stream`, otherwise it returns the single value.\r\n\r\n    String result = SequenceM.of(&quot;x&quot;)\r\n                              .single();\r\n\r\n    SequenceM.of().single(); // NoSuchElementException\r\n\r\n    SequenceM.of(1, 2, 3).single(); // NoSuchElementException\r\n\r\n    String result = LazyFutureStream.fromStream(Stream.of(&quot;x&quot;))\r\n                              .single();\r\n\r\n`singleOptional()` returns `Optional.empty()` if there are no values or more than one value in the `Stream`.\r\n\r\n    Optional&lt;String&gt; result = SequenceM.fromStream(Stream.of(&quot;x&quot;))\r\n                              .singleOptional(); \r\n    //Optional[&quot;x&quot;]\r\n\r\n    Optional&lt;String&gt; result = SequenceM.of().singleOptional(); \r\n    // Optional.empty\r\n\r\n    Optional&lt;String&gt; result =  SequenceM.of(1, 2, 3).singleOptional(); \r\n    // Optional.empty\r\n\r\n---\r\n\r\nDisclosure - I am the author of both libraries.","title":"Filter Java Stream to 1 and only 1 element","body":"<p>If you don't mind using a 3rd party library, <a href=\"http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/7.1.0/com/aol/cyclops/sequence/SequenceM.html\" rel=\"nofollow noreferrer\"><code>SequenceM</code></a> from <a href=\"https://github.com/aol/cyclops/tree/master/cyclops-streams\" rel=\"nofollow noreferrer\">cyclops-streams</a> (and <a href=\"http://static.javadoc.io/com.aol.simplereact/simple-react/0.99.6/com/aol/simple/react/stream/traits/LazyFutureStream.html\" rel=\"nofollow noreferrer\"><code>LazyFutureStream</code></a> from <a href=\"https://github.com/aol/simple-react\" rel=\"nofollow noreferrer\">simple-react</a>) both a have single &amp; singleOptional operators. </p>\n\n<p><code>singleOptional()</code> throws an exception if there are <code>0</code> or more than <code>1</code> elements in the <code>Stream</code>, otherwise it returns the single value.</p>\n\n<pre><code>String result = SequenceM.of(\"x\")\n                          .single();\n\nSequenceM.of().single(); // NoSuchElementException\n\nSequenceM.of(1, 2, 3).single(); // NoSuchElementException\n\nString result = LazyFutureStream.fromStream(Stream.of(\"x\"))\n                          .single();\n</code></pre>\n\n<p><code>singleOptional()</code> returns <code>Optional.empty()</code> if there are no values or more than one value in the <code>Stream</code>.</p>\n\n<pre><code>Optional&lt;String&gt; result = SequenceM.fromStream(Stream.of(\"x\"))\n                          .singleOptional(); \n//Optional[\"x\"]\n\nOptional&lt;String&gt; result = SequenceM.of().singleOptional(); \n// Optional.empty\n\nOptional&lt;String&gt; result =  SequenceM.of(1, 2, 3).singleOptional(); \n// Optional.empty\n</code></pre>\n\n<hr>\n\n<p>Disclosure - I am the author of both libraries.</p>\n"},{"comments":[{"owner":{"account_id":112612,"reputation":89615,"user_id":296974,"accept_rate":100,"display_name":"glglgl"},"score":1,"creation_date":1495832679,"post_id":39385411,"comment_id":75432683,"body_markdown":"Fine solution! And if you do `.collect(Collectors.toMap(user -&gt; &quot;&quot;, Function.identity())).get(&quot;&quot;)`, you have a more generic behaviour.","body":"Fine solution! And if you do <code>.collect(Collectors.toMap(user -&gt; &quot;&quot;, Function.identity())).get(&quot;&quot;)</code>, you have a more generic behaviour."}],"tags":[],"owner":{"account_id":7421,"reputation":20226,"user_id":12890,"accept_rate":83,"display_name":"Arne Burmeister"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473321445,"creation_date":1473321132,"answer_id":39385411,"question_id":22694884,"body_markdown":"As `Collectors.toMap(keyMapper, valueMapper)` uses a throwing merger to handle multiple entries with the same key it is easy:\r\n\r\n    List&lt;User&gt; users = new LinkedList&lt;&gt;();\r\n    users.add(new User(1, &quot;User1&quot;));\r\n    users.add(new User(2, &quot;User2&quot;));\r\n    users.add(new User(3, &quot;User3&quot;));\r\n    \r\n    int id = 1;\r\n    User match = Optional.ofNullable(users.stream()\r\n      .filter(user -&gt; user.getId() == id)\r\n      .collect(Collectors.toMap(User::getId, Function.identity()))\r\n      .get(id)).get();\r\n\r\nYou will get a `IllegalStateException` for duplicate keys. But at the end I am not sure if the code would not be even more readable using an `if`.\r\n","title":"Filter Java Stream to 1 and only 1 element","body":"<p>As <code>Collectors.toMap(keyMapper, valueMapper)</code> uses a throwing merger to handle multiple entries with the same key it is easy:</p>\n\n<pre><code>List&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, \"User1\"));\nusers.add(new User(2, \"User2\"));\nusers.add(new User(3, \"User3\"));\n\nint id = 1;\nUser match = Optional.ofNullable(users.stream()\n  .filter(user -&gt; user.getId() == id)\n  .collect(Collectors.toMap(User::getId, Function.identity()))\n  .get(id)).get();\n</code></pre>\n\n<p>You will get a <code>IllegalStateException</code> for duplicate keys. But at the end I am not sure if the code would not be even more readable using an <code>if</code>.</p>\n"},{"comments":[{"owner":{"account_id":136350,"reputation":1526,"user_id":339785,"display_name":"qerub"},"score":2,"creation_date":1481550994,"post_id":40556381,"comment_id":69409024,"body_markdown":"Note for other users: `MoreCollectors` is part of the yet unreleased (as of 2016-12) unreleased version 21.","body":"Note for other users: <code>MoreCollectors</code> is part of the yet unreleased (as of 2016-12) unreleased version 21."},{"owner":{"account_id":4567927,"reputation":5819,"user_id":3708462,"accept_rate":57,"display_name":"Emdadul Sawon"},"score":4,"creation_date":1500878852,"post_id":40556381,"comment_id":77510955,"body_markdown":"This answer should go upper.","body":"This answer should go upper."}],"tags":[],"owner":{"account_id":872008,"reputation":1000,"user_id":4966559,"display_name":"trevorade"},"comment_count":2,"down_vote_count":1,"up_vote_count":83,"is_accepted":false,"score":82,"last_activity_date":1628855767,"creation_date":1478899188,"answer_id":40556381,"question_id":22694884,"body_markdown":"Use Guava&#39;s [`MoreCollectors.onlyElement()`][2] ([Source Code][1]).\r\n\r\nIt does what you want and throws an `IllegalArgumentException` if the stream consists of two or more elements, and a `NoSuchElementException` if the stream is empty.\r\n\r\n### Usage:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import static com.google.common.collect.MoreCollectors.onlyElement;\r\n    \r\n    User match =\r\n        users.stream().filter((user) -&gt; user.getId() &lt; 0).collect(onlyElement());\r\n\r\n\r\n  [1]: https://github.com/google/guava/blob/73e382fa877f80994817a136b0adcc4365ccd904/guava/src/com/google/common/collect/MoreCollectors.java#L83\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--","title":"Filter Java Stream to 1 and only 1 element","body":"<p>Use Guava's <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--\" rel=\"noreferrer\"><code>MoreCollectors.onlyElement()</code></a> (<a href=\"https://github.com/google/guava/blob/73e382fa877f80994817a136b0adcc4365ccd904/guava/src/com/google/common/collect/MoreCollectors.java#L83\" rel=\"noreferrer\">Source Code</a>).</p>\n<p>It does what you want and throws an <code>IllegalArgumentException</code> if the stream consists of two or more elements, and a <code>NoSuchElementException</code> if the stream is empty.</p>\n<h3>Usage:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.google.common.collect.MoreCollectors.onlyElement;\n\nUser match =\n    users.stream().filter((user) -&gt; user.getId() &lt; 0).collect(onlyElement());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":216968,"reputation":2250,"user_id":472522,"accept_rate":62,"display_name":"Hans"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1536141708,"creation_date":1485288960,"answer_id":41838193,"question_id":22694884,"body_markdown":"[Guava][1] has a `Collector` for this called [`MoreCollectors.onlyElement()`][2].\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--","title":"Filter Java Stream to 1 and only 1 element","body":"<p><a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> has a <code>Collector</code> for this called <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MoreCollectors.html#onlyElement--\" rel=\"noreferrer\"><code>MoreCollectors.onlyElement()</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":71092,"reputation":3112,"user_id":205629,"display_name":"simon04"},"score":0,"creation_date":1515148203,"post_id":43994779,"comment_id":83198933,"body_markdown":"Neat! `onlyOne()` throws `IllegalStateException` for &gt;1 elements, and NoSuchElementException` (in `Optional::get`) for 0 elements.","body":"Neat! <code>onlyOne()</code> throws <code>IllegalStateException</code> for &gt;1 elements, and NoSuchElementException` (in <code>Optional::get</code>) for 0 elements."},{"owner":{"account_id":294884,"reputation":1540,"user_id":599011,"accept_rate":74,"display_name":"Xavier Dury"},"score":0,"creation_date":1530001744,"post_id":43994779,"comment_id":89067969,"body_markdown":"@simon04 You could overload the methods to take a `Supplier` of `(Runtime)Exception`.","body":"@simon04 You could overload the methods to take a <code>Supplier</code> of <code>(Runtime)Exception</code>."}],"tags":[],"owner":{"account_id":294884,"reputation":1540,"user_id":599011,"accept_rate":74,"display_name":"Xavier Dury"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1494918935,"creation_date":1494918935,"answer_id":43994779,"question_id":22694884,"body_markdown":"I am using those two collectors:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; zeroOrOne() {\r\n        return Collectors.reducing((a, b) -&gt; {\r\n            throw new IllegalStateException(&quot;More than one value was returned&quot;);\r\n        });\r\n\t}\r\n\t\r\n\tpublic static &lt;T&gt; Collector&lt;T, ?, T&gt; onlyOne() {\r\n\t\treturn Collectors.collectingAndThen(zeroOrOne(), Optional::get);\r\n\t}","title":"Filter Java Stream to 1 and only 1 element","body":"<p>I am using those two collectors:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; zeroOrOne() {\n    return Collectors.reducing((a, b) -&gt; {\n        throw new IllegalStateException(\"More than one value was returned\");\n    });\n}\n\npublic static &lt;T&gt; Collector&lt;T, ?, T&gt; onlyOne() {\n    return Collectors.collectingAndThen(zeroOrOne(), Optional::get);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1628856555,"creation_date":1527180541,"answer_id":50514439,"question_id":22694884,"body_markdown":"### Using a [`Collector`][1]:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; singleElementCollector() {\r\n        return Collectors.collectingAndThen(\r\n                Collectors.toList(),\r\n                list -&gt; list.size() == 1 ? Optional.of(list.get(0)) : Optional.empty()\r\n        );\r\n    }\r\n\r\n---\r\n\r\n### Usage:\r\n\r\n    Optional&lt;User&gt; result = users.stream()\r\n            .filter((user) -&gt; user.getId() &lt; 0)\r\n            .collect(singleElementCollector());\r\n\r\n---\r\n\r\nWe return an [`Optional`][2], since we usually can&#39;t assume the `Collection` to contain exactly one element. If you already know this is the case, call:\r\n\r\n    User user = result.orElseThrow();\r\n\r\nThis puts the burden of handeling the error on the caller - as it should.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html","title":"Filter Java Stream to 1 and only 1 element","body":"<h3>Using a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"nofollow noreferrer\"><code>Collector</code></a>:</h3>\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; singleElementCollector() {\n    return Collectors.collectingAndThen(\n            Collectors.toList(),\n            list -&gt; list.size() == 1 ? Optional.of(list.get(0)) : Optional.empty()\n    );\n}\n</code></pre>\n<hr />\n<h3>Usage:</h3>\n<pre><code>Optional&lt;User&gt; result = users.stream()\n        .filter((user) -&gt; user.getId() &lt; 0)\n        .collect(singleElementCollector());\n</code></pre>\n<hr />\n<p>We return an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\"><code>Optional</code></a>, since we usually can't assume the <code>Collection</code> to contain exactly one element. If you already know this is the case, call:</p>\n<pre><code>User user = result.orElseThrow();\n</code></pre>\n<p>This puts the burden of handeling the error on the caller - as it should.</p>\n"},{"comments":[{"owner":{"account_id":29802,"reputation":11140,"user_id":80779,"accept_rate":90,"display_name":"LordOfThePigs"},"score":4,"creation_date":1625146405,"post_id":52006240,"comment_id":120554397,"body_markdown":"This is clearly the most elegant of the solutions on this page.","body":"This is clearly the most elegant of the solutions on this page."},{"owner":{"account_id":279146,"reputation":5158,"user_id":574147,"display_name":"Fabio Bonfante"},"score":0,"creation_date":1662020021,"post_id":52006240,"comment_id":129910708,"body_markdown":"@LordOfThePigs Thanks, given that there&#39;s also an answer from Brian Goetz on this page, it means really a lot ;-)","body":"@LordOfThePigs Thanks, given that there&#39;s also an answer from Brian Goetz on this page, it means really a lot ;-)"}],"tags":[],"owner":{"account_id":279146,"reputation":5158,"user_id":574147,"display_name":"Fabio Bonfante"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1551350149,"creation_date":1535119622,"answer_id":52006240,"question_id":22694884,"body_markdown":"### Using reduce\r\nThis is the simpler and flexible way I found (based on @prunge answer)\r\n\r\n    Optional&lt;User&gt; user = users.stream()\r\n            .filter(user -&gt; user.getId() == 1)\r\n            .reduce((a, b) -&gt; {\r\n                throw new IllegalStateException(&quot;Multiple elements: &quot; + a + &quot;, &quot; + b);\r\n            })\r\n\r\nThis way you obtain:\r\n\r\n- the Optional&lt;User&gt; - as always with your object or `Optional.empty()` if not present\r\n- the Exception (with eventually YOUR custom type/message) if there&#39;s more than one element  ","title":"Filter Java Stream to 1 and only 1 element","body":"<h3>Using reduce</h3>\n\n<p>This is the simpler and flexible way I found (based on @prunge answer)</p>\n\n<pre><code>Optional&lt;User&gt; user = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .reduce((a, b) -&gt; {\n            throw new IllegalStateException(\"Multiple elements: \" + a + \", \" + b);\n        })\n</code></pre>\n\n<p>This way you obtain:</p>\n\n<ul>\n<li>the Optional - as always with your object or <code>Optional.empty()</code> if not present</li>\n<li>the Exception (with eventually YOUR custom type/message) if there's more than one element  </li>\n</ul>\n"},{"comments":[{"owner":{"account_id":16249442,"reputation":4026,"user_id":11733759,"display_name":"lczapski"},"score":14,"creation_date":1568284748,"post_id":57904796,"comment_id":102229761,"body_markdown":"It find only first but the case was also to throw Exception when it is more than one","body":"It find only first but the case was also to throw Exception when it is more than one"},{"owner":{"account_id":5796625,"reputation":4590,"user_id":4800355,"accept_rate":67,"display_name":"Radek Postołowicz"},"score":0,"creation_date":1655822738,"post_id":57904796,"comment_id":128419751,"body_markdown":"This is bad practice. It leads to nondeterministic behavior if there are 2 or more objects. Whole JDK&#39;s `findFirst` is bad idea.","body":"This is bad practice. It leads to nondeterministic behavior if there are 2 or more objects. Whole JDK&#39;s <code>findFirst</code> is bad idea."},{"owner":{"account_id":2938544,"reputation":1521,"user_id":3362350,"display_name":"Jacob Zimmerman"},"score":0,"creation_date":1668201477,"post_id":57904796,"comment_id":131356465,"body_markdown":"@RadekPostołowicz 1) Isn&#39;t it only nondeterministic if it&#39;s a parallel stream? 2) If there are multiple items that fit the filter, how often do you care which one it is? (Calling it &#39;first&#39; was probably the bad idea) 3) None of that applies to this post, because of what lczapski said.","body":"@RadekPostołowicz 1) Isn&#39;t it only nondeterministic if it&#39;s a parallel stream? 2) If there are multiple items that fit the filter, how often do you care which one it is? (Calling it &#39;first&#39; was probably the bad idea) 3) None of that applies to this post, because of what lczapski said."},{"owner":{"account_id":5796625,"reputation":4590,"user_id":4800355,"accept_rate":67,"display_name":"Radek Postołowicz"},"score":0,"creation_date":1668426796,"post_id":57904796,"comment_id":131394422,"body_markdown":"It&#39;s nondeterministic because it selects first element while there might be many. Without explicit sorting, it&#39;s just randomly picking first one.","body":"It&#39;s nondeterministic because it selects first element while there might be many. Without explicit sorting, it&#39;s just randomly picking first one."}],"tags":[],"owner":{"account_id":7474296,"reputation":711,"user_id":5681172,"display_name":"pilladooo"},"comment_count":4,"down_vote_count":11,"up_vote_count":33,"is_accepted":false,"score":22,"last_activity_date":1568284157,"creation_date":1568284157,"answer_id":57904796,"question_id":22694884,"body_markdown":"I think this way is more simple:\r\n\r\n    User resultUser = users.stream()\r\n        .filter(user -&gt; user.getId() &gt; 0)\r\n        .findFirst().get();","title":"Filter Java Stream to 1 and only 1 element","body":"<p>I think this way is more simple:</p>\n\n<pre><code>User resultUser = users.stream()\n    .filter(user -&gt; user.getId() &gt; 0)\n    .findFirst().get();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10167202,"reputation":3755,"user_id":7508700,"display_name":"David Buck"},"score":6,"creation_date":1585396567,"post_id":60900641,"comment_id":107746924,"body_markdown":"While this code may solve the question, [including an explanation](https://meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"https://meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":9175490,"reputation":571,"user_id":6821228,"display_name":"Nitin"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1585396558,"creation_date":1585395526,"answer_id":60900641,"question_id":22694884,"body_markdown":"```\r\nUser match = users.stream().filter((user) -&gt; user.getId()== 1).findAny().orElseThrow(()-&gt; new IllegalArgumentException());\r\n```","title":"Filter Java Stream to 1 and only 1 element","body":"<pre><code>User match = users.stream().filter((user) -&gt; user.getId()== 1).findAny().orElseThrow(()-&gt; new IllegalArgumentException());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":39578,"reputation":1895,"user_id":1450778,"accept_rate":75,"display_name":"David Nouls"},"score":1,"creation_date":1622535197,"post_id":63864341,"comment_id":119812924,"body_markdown":"This solution does not detect the case where there are multiple values in the stream. So it goes unnoticed.","body":"This solution does not detect the case where there are multiple values in the stream. So it goes unnoticed."},{"owner":{"account_id":3557255,"reputation":5224,"user_id":2970705,"display_name":"JavAlex"},"score":0,"creation_date":1622627685,"post_id":63864341,"comment_id":119844073,"body_markdown":"Actually, I only wanted to get the first element in the stream.","body":"Actually, I only wanted to get the first element in the stream."},{"owner":{"account_id":39578,"reputation":1895,"user_id":1450778,"accept_rate":75,"display_name":"David Nouls"},"score":1,"creation_date":1622722691,"post_id":63864341,"comment_id":119876743,"body_markdown":"The original question wanted the one and only one. The accepted answer throws an exception instead.","body":"The original question wanted the one and only one. The accepted answer throws an exception instead."},{"owner":{"account_id":29802,"reputation":11140,"user_id":80779,"accept_rate":90,"display_name":"LordOfThePigs"},"score":1,"creation_date":1625146286,"post_id":63864341,"comment_id":120554339,"body_markdown":"Yeah... If you want to do exactly the same, you can just do `stream.findFirst().orElse(null)` which is completely equivalent and a lot more readable that what you are doing here.","body":"Yeah... If you want to do exactly the same, you can just do <code>stream.findFirst().orElse(null)</code> which is completely equivalent and a lot more readable that what you are doing here."}],"tags":[],"owner":{"account_id":3557255,"reputation":5224,"user_id":2970705,"display_name":"JavAlex"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1599940283,"creation_date":1599940283,"answer_id":63864341,"question_id":22694884,"body_markdown":"Inspired by @skiwi, I solved it the following way:\r\n\r\n    public static &lt;T&gt; T toSingleton(Stream&lt;T&gt; stream) {\r\n        List&lt;T&gt; list = stream.limit(1).collect(Collectors.toList());\r\n        if (list.isEmpty()) {\r\n            return null;\r\n        } else {\r\n            return list.get(0);\r\n        }\r\n    }\r\n\r\nAnd then:\r\n\r\n    User user = toSingleton(users.stream().filter(...).map(...));","title":"Filter Java Stream to 1 and only 1 element","body":"<p>Inspired by @skiwi, I solved it the following way:</p>\n<pre><code>public static &lt;T&gt; T toSingleton(Stream&lt;T&gt; stream) {\n    List&lt;T&gt; list = stream.limit(1).collect(Collectors.toList());\n    if (list.isEmpty()) {\n        return null;\n    } else {\n        return list.get(0);\n    }\n}\n</code></pre>\n<p>And then:</p>\n<pre><code>User user = toSingleton(users.stream().filter(...).map(...));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13018292,"reputation":463,"user_id":9408664,"display_name":"Overpass"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602680043,"creation_date":1602680043,"answer_id":64353738,"question_id":22694884,"body_markdown":"If you don&#39;t use Guava or Kotlin, here&#39;s a solution based on @skiwi and @Neuron answers.\r\n\r\n    users.stream().collect(single(user -&gt; user.getId() == 1));\r\nor\r\n\r\n    users.stream().collect(optional(user -&gt; user.getId() == 1));\r\nwhere `single` and `optional` are statically imported functions returning corresponding collectors.\r\n\r\nI reasoned it would look more succinct if the filtering logic had been moved inside the collector. Also nothing would break in the code if you happened to delete the string with `.filter`.\r\n\r\nThe gist for the code https://gist.github.com/overpas/ccc39b75f17a1c65682c071045c1a079","title":"Filter Java Stream to 1 and only 1 element","body":"<p>If you don't use Guava or Kotlin, here's a solution based on @skiwi and @Neuron answers.</p>\n<pre><code>users.stream().collect(single(user -&gt; user.getId() == 1));\n</code></pre>\n<p>or</p>\n<pre><code>users.stream().collect(optional(user -&gt; user.getId() == 1));\n</code></pre>\n<p>where <code>single</code> and <code>optional</code> are statically imported functions returning corresponding collectors.</p>\n<p>I reasoned it would look more succinct if the filtering logic had been moved inside the collector. Also nothing would break in the code if you happened to delete the string with <code>.filter</code>.</p>\n<p>The gist for the code <a href=\"https://gist.github.com/overpas/ccc39b75f17a1c65682c071045c1a079\" rel=\"nofollow noreferrer\">https://gist.github.com/overpas/ccc39b75f17a1c65682c071045c1a079</a></p>\n"},{"tags":[],"owner":{"account_id":4313292,"reputation":118,"user_id":3523856,"display_name":"Aelaf"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1628499033,"creation_date":1628499033,"answer_id":68709279,"question_id":22694884,"body_markdown":"     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(1);\r\n        list.add(2);\r\n        list.add(3);\r\n    Integer value  = list.stream().filter((x-&gt;x.intValue()==8)).findFirst().orElse(null);\r\n\r\n*I have used Integer type instead of primitive* as it will have null pointer exception.  you just have to handle this exception... looks succinct, I think ;)   \r\n","title":"Filter Java Stream to 1 and only 1 element","body":"<pre><code> List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    list.add(1);\n    list.add(2);\n    list.add(3);\nInteger value  = list.stream().filter((x-&gt;x.intValue()==8)).findFirst().orElse(null);\n</code></pre>\n<p><em>I have used Integer type instead of primitive</em> as it will have null pointer exception.  you just have to handle this exception... looks succinct, I think ;)</p>\n"},{"tags":[],"owner":{"account_id":2072373,"reputation":724,"user_id":1846528,"display_name":"M-sAnNan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641335039,"creation_date":1640691933,"answer_id":70506578,"question_id":22694884,"body_markdown":"Tried a sample code for my self and here is the solution for that.\r\n\r\n    User user = Stream.of(new User(2), new User(2), new User(1), new User(2))\r\n                .filter(u -&gt; u.getAge() == 2).findFirst().get();\r\nand the user class\r\n\r\n    class User {\r\n        private int age;\r\n\r\n    public User(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n     }\r\n    }\r\n","title":"Filter Java Stream to 1 and only 1 element","body":"<p>Tried a sample code for my self and here is the solution for that.</p>\n<pre><code>User user = Stream.of(new User(2), new User(2), new User(1), new User(2))\n            .filter(u -&gt; u.getAge() == 2).findFirst().get();\n</code></pre>\n<p>and the user class</p>\n<pre><code>class User {\n    private int age;\n\npublic User(int age) {\n    this.age = age;\n}\n\npublic int getAge() {\n    return age;\n}\n\npublic void setAge(int age) {\n    this.age = age;\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8148643,"reputation":151,"user_id":6136489,"display_name":"Nicolas Mafra"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1641309240,"creation_date":1641309240,"answer_id":70580994,"question_id":22694884,"body_markdown":"**Using Reduce and Optional**\r\n\r\nFrom [Fabio Bonfante][1] response:\r\n\r\n    public &lt;T&gt; T getOneExample(Collection&lt;T&gt; collection) {\r\n        return collection.stream()\r\n            .filter(x -&gt; /* do some filter */)\r\n            .reduce((x,y)-&gt; {throw new IllegalStateException(&quot;multiple&quot;);})\r\n            .orElseThrow(() -&gt; new NoSuchElementException(&quot;none&quot;));\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/52006240/6136489","title":"Filter Java Stream to 1 and only 1 element","body":"<p><strong>Using Reduce and Optional</strong></p>\n<p>From <a href=\"https://stackoverflow.com/a/52006240/6136489\">Fabio Bonfante</a> response:</p>\n<pre><code>public &lt;T&gt; T getOneExample(Collection&lt;T&gt; collection) {\n    return collection.stream()\n        .filter(x -&gt; /* do some filter */)\n        .reduce((x,y)-&gt; {throw new IllegalStateException(&quot;multiple&quot;);})\n        .orElseThrow(() -&gt; new NoSuchElementException(&quot;none&quot;));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19458961,"reputation":1,"user_id":14233633,"display_name":"Kalpesh Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644556173,"creation_date":1644556173,"answer_id":71075614,"question_id":22694884,"body_markdown":"\tpublic List&lt;state&gt; getAllActiveState() {\r\n\t\tList&lt;Master&gt; master = masterRepository.getActiveExamMasters();\r\n\t\tMaster activeMaster = new Master();\r\n\t\ttry {\r\n\t\t\tactiveMaster = master.stream().filter(status -&gt; status.getStatus() == true).reduce((u, v) -&gt; {\r\n\t\t\t\tthrow new IllegalStateException();\r\n\t\t\t}).get();\r\n\t\t\treturn stateRepository.getAllStateActiveId(activeMaster.getId());\r\n\t\t} catch (IllegalStateException e) {\r\n\t\t\tlogger.info(&quot;:More than one status found TRUE in Master&quot;);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n1) In this above code, As per the condition if its find more than one true in the list then it will through the exception.\r\n2) When it through the error will showing custom message because it easy maintain the logs on server side.\r\n3) From Nth number of element present in list just want only one element have true condition if in list there are more than one elements having true status at that moment it will through an exception.\r\n4) after getting all the this we using get(); to taking that one element from list and stored it into another object. \r\n5) If you want you added optional like `Optional&lt;activeMaster &gt; = master.stream().filter(status -&gt; status.getStatus() == true).reduce((u, v) -&gt; {throw new IllegalStateException();}).get();`\r\n","title":"Filter Java Stream to 1 and only 1 element","body":"<pre><code>public List&lt;state&gt; getAllActiveState() {\n    List&lt;Master&gt; master = masterRepository.getActiveExamMasters();\n    Master activeMaster = new Master();\n    try {\n        activeMaster = master.stream().filter(status -&gt; status.getStatus() == true).reduce((u, v) -&gt; {\n            throw new IllegalStateException();\n        }).get();\n        return stateRepository.getAllStateActiveId(activeMaster.getId());\n    } catch (IllegalStateException e) {\n        logger.info(&quot;:More than one status found TRUE in Master&quot;);\n        return null;\n    }\n}\n</code></pre>\n<ol>\n<li>In this above code, As per the condition if its find more than one true in the list then it will through the exception.</li>\n<li>When it through the error will showing custom message because it easy maintain the logs on server side.</li>\n<li>From Nth number of element present in list just want only one element have true condition if in list there are more than one elements having true status at that moment it will through an exception.</li>\n<li>after getting all the this we using get(); to taking that one element from list and stored it into another object.</li>\n<li>If you want you added optional like <code>Optional&lt;activeMaster &gt; = master.stream().filter(status -&gt; status.getStatus() == true).reduce((u, v) -&gt; {throw new IllegalStateException();}).get();</code></li>\n</ol>\n"}],"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364850,"favorite_count":0,"down_vote_count":2,"up_vote_count":334,"accepted_answer_id":22695031,"answer_count":24,"score":332,"last_activity_date":1683014052,"creation_date":1395941132,"question_id":22694884,"body_markdown":"I am trying to use Java 8 [`Stream`][1]s to find elements in a `LinkedList`. I want to guarantee, however, that there is one and only one match to the filter criteria.\r\n\r\nTake this code:\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\r\n        users.add(new User(1, &quot;User1&quot;));\r\n        users.add(new User(2, &quot;User2&quot;));\r\n        users.add(new User(3, &quot;User3&quot;));\r\n        \r\n        User match = users.stream().filter((user) -&gt; user.getId() == 1).findAny().get();\r\n        System.out.println(match.toString());\r\n    }\r\n    \r\n---\r\n\r\n    static class User {\r\n\r\n        @Override\r\n        public String toString() {\r\n            return id + &quot; - &quot; + username;\r\n        }\r\n        \r\n        int id;\r\n        String username;\r\n\r\n        public User() {\r\n        }\r\n\r\n        public User(int id, String username) {\r\n            this.id = id;\r\n            this.username = username;\r\n        }\r\n\r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n\r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n\r\n        public int getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\nThis code finds a `User` based on their ID. But there are no guarantees how many `User`s matched the filter.\r\n\r\nChanging the filter line to:\r\n\r\n    User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).findAny().get();\r\n\r\nWill throw a `NoSuchElementException` (good!)\r\n\r\nI would like it to throw an error if there are multiple matches, though. Is there a way to do this?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"Filter Java Stream to 1 and only 1 element","body":"<p>I am trying to use Java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\"><code>Stream</code></a>s to find elements in a <code>LinkedList</code>. I want to guarantee, however, that there is one and only one match to the filter criteria.</p>\n\n<p>Take this code:</p>\n\n<pre><code>public static void main(String[] args) {\n\n    LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\n    users.add(new User(1, \"User1\"));\n    users.add(new User(2, \"User2\"));\n    users.add(new User(3, \"User3\"));\n\n    User match = users.stream().filter((user) -&gt; user.getId() == 1).findAny().get();\n    System.out.println(match.toString());\n}\n</code></pre>\n\n<hr>\n\n<pre><code>static class User {\n\n    @Override\n    public String toString() {\n        return id + \" - \" + username;\n    }\n\n    int id;\n    String username;\n\n    public User() {\n    }\n\n    public User(int id, String username) {\n        this.id = id;\n        this.username = username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public int getId() {\n        return id;\n    }\n}\n</code></pre>\n\n<p>This code finds a <code>User</code> based on their ID. But there are no guarantees how many <code>User</code>s matched the filter.</p>\n\n<p>Changing the filter line to:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).findAny().get();\n</code></pre>\n\n<p>Will throw a <code>NoSuchElementException</code> (good!)</p>\n\n<p>I would like it to throw an error if there are multiple matches, though. Is there a way to do this?</p>\n"},{"tags":["java","mysql","spring-boot","nullpointerexception","grpc"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683009824,"post_id":76152279,"comment_id":134297252,"body_markdown":"Your class `PersonDetailImpl` is not marked with any annotation like `@Component` or `@Service` or something, so Spring IOC won&#39;t instantiate &amp; initialize it.","body":"Your class <code>PersonDetailImpl</code> is not marked with any annotation like <code>@Component</code> or <code>@Service</code> or something, so Spring IOC won&#39;t instantiate &amp; initialize it."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683010288,"post_id":76152279,"comment_id":134297344,"body_markdown":"Also, please copy-paste the formatted code, error stack-trace, etc. instead of attaching an image. It is much easier to search and copy-paste details from the question.","body":"Also, please copy-paste the formatted code, error stack-trace, etc. instead of attaching an image. It is much easier to search and copy-paste details from the question."},{"owner":{"account_id":23584704,"reputation":11,"user_id":17623297,"display_name":"Sku"},"score":0,"creation_date":1683010313,"post_id":76152279,"comment_id":134297345,"body_markdown":"@ishan tried with service and component annotation. But still it&#39;s not working.","body":"@ishan tried with service and component annotation. But still it&#39;s not working."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683010923,"post_id":76152279,"comment_id":134297428,"body_markdown":"How is `PersonDetailImpl` object injected in `PersonsDetailsGrpc` class?  Copy-paste that code piece also (as formatted text, not image)","body":"How is <code>PersonDetailImpl</code> object injected in <code>PersonsDetailsGrpc</code> class?  Copy-paste that code piece also (as formatted text, not image)"},{"owner":{"account_id":3330839,"reputation":1207,"user_id":2799824,"display_name":"Rafael Souza"},"score":0,"creation_date":1692578062,"post_id":76152279,"comment_id":135638214,"body_markdown":"I have the same problem has anyone found a solution?","body":"I have the same problem has anyone found a solution?"}],"owner":{"account_id":23584704,"reputation":11,"user_id":17623297,"display_name":"Sku"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683013890,"creation_date":1683009309,"question_id":76152279,"body_markdown":" ![Repository null error][1]  \r\n![Grpc implementation][2]\r\n\r\nI have implemented GRPC in springboot application and getting error null and trying to connect with MySQL. \r\nIn personDetailImpl i have autowired the repository. And trying to fetch the data from database in impl class. But getting error. \r\n[ &quot; Can not invoke this.repository.methodname because this.repository is null. &quot; ]\r\n\r\nCan anyone have a solution how can we connect grpc with MySQL by autowiring repository. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pol9c.jpg\r\n  [2]: https://i.stack.imgur.com/RNj7x.jpg","title":"Getting &quot; can not invoke this.repositoryname is null&quot; in grpc implementation with springboot","body":"<p><img src=\"https://i.stack.imgur.com/pol9c.jpg\" alt=\"Repository null error\" /><br />\n<img src=\"https://i.stack.imgur.com/RNj7x.jpg\" alt=\"Grpc implementation\" /></p>\n<p>I have implemented GRPC in springboot application and getting error null and trying to connect with MySQL.\nIn personDetailImpl i have autowired the repository. And trying to fetch the data from database in impl class. But getting error.\n[ &quot; Can not invoke this.repository.methodname because this.repository is null. &quot; ]</p>\n<p>Can anyone have a solution how can we connect grpc with MySQL by autowiring repository.</p>\n"},{"tags":["java","windows","maven"],"comments":[{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":1,"creation_date":1505214809,"post_id":46174411,"comment_id":79311872,"body_markdown":"Yes, you need to configure your pom.xml by yourself. Check google on how to do it - it is pretty easy","body":"Yes, you need to configure your pom.xml by yourself. Check google on how to do it - it is pretty easy"},{"owner":{"account_id":11746369,"reputation":79,"user_id":8597018,"accept_rate":60,"display_name":"cactus"},"score":0,"creation_date":1505226660,"post_id":46174411,"comment_id":79320685,"body_markdown":"where I should put it?","body":"where I should put it?"},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1505227762,"post_id":46174411,"comment_id":79321545,"body_markdown":"From nullpointer&#39;s answer -&gt; https://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project","body":"From nullpointer&#39;s answer -&gt; <a href=\"https://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project\" rel=\"nofollow noreferrer\">maven.apache.org/guides/getting-started/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":11746369,"reputation":79,"user_id":8597018,"accept_rate":60,"display_name":"cactus"},"score":0,"creation_date":1505227095,"post_id":46174502,"comment_id":79321017,"body_markdown":"do you mean I need to project first?","body":"do you mean I need to project first?"},{"owner":{"account_id":2176672,"reputation":651,"user_id":1927202,"display_name":"Turgay Celik"},"score":0,"creation_date":1505485057,"post_id":46174502,"comment_id":79447345,"body_markdown":"Are you trying to (1) just compile an already existing project or (2) create a new one? If (1) the project will already have a pom file if it is a maven project, if (2) yes, you need to create a pom.xml. don&#39;t do it yourself, use new maven project feature of your favorite IDE (e.g. IntelliJ Idea or Eclipse).","body":"Are you trying to (1) just compile an already existing project or (2) create a new one? If (1) the project will already have a pom file if it is a maven project, if (2) yes, you need to create a pom.xml. don&#39;t do it yourself, use new maven project feature of your favorite IDE (e.g. IntelliJ Idea or Eclipse)."}],"tags":[],"owner":{"account_id":2176672,"reputation":651,"user_id":1927202,"display_name":"Turgay Celik"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1505213467,"creation_date":1505213467,"answer_id":46174502,"question_id":46174411,"body_markdown":"It seems that the current directory that you execute the mvn command does not include a pom.xml\r\nJust change your current dir to where your pom resides and execute mvn command there.","title":"The goal you specified requires a project to execute but there is no POM in this directory","body":"<p>It seems that the current directory that you execute the mvn command does not include a pom.xml\nJust change your current dir to where your pom resides and execute mvn command there.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1505213665,"creation_date":1505213665,"answer_id":46174570,"question_id":46174411,"body_markdown":"The command to find the version of `maven` is \r\n\r\n    mvn -X -version \r\n\r\nthough `-X` is a debug option and is redundant here. \r\n\r\nIn case you want to execute a project.\r\n\r\n&gt; do I need to set pom.xml by myself? How and where?\r\n\r\nYou create a `pom.xml` within a maven based project at the top level directory. The [first maven project sample ](https://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project) shall help you further here.","title":"The goal you specified requires a project to execute but there is no POM in this directory","body":"<p>The command to find the version of <code>maven</code> is </p>\n\n<pre><code>mvn -X -version \n</code></pre>\n\n<p>though <code>-X</code> is a debug option and is redundant here. </p>\n\n<p>In case you want to execute a project.</p>\n\n<blockquote>\n  <p>do I need to set pom.xml by myself? How and where?</p>\n</blockquote>\n\n<p>You create a <code>pom.xml</code> within a maven based project at the top level directory. The <a href=\"https://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project\" rel=\"nofollow noreferrer\">first maven project sample </a> shall help you further here.</p>\n"},{"tags":[],"owner":{"account_id":27890380,"reputation":11,"user_id":21296891,"display_name":"Raj Kumar Ram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683013845,"creation_date":1683013845,"answer_id":76152766,"question_id":46174411,"body_markdown":"1. Install Maven (download apache-maven-3.9.1-bin.zip)\r\n2. Ungip apache-maven-3.9.1-bin.zip\r\n3. Set the environment variable\r\n    export M2_HOME=/Applications/apache-maven-3.9.1\r\n    export PATH=$PATH:$M2_HOME/bin\r\n4. mvn -X -version \r\n5. Go to your project location where pom.xml is there\r\n6. mvn clean\r\n[INFO] BUILD SUCCESS\r\n7. mvn compile \r\n[INFO] BUILD SUCCESS\r\n8. mvn test\r\n    \r\n       \r\n\r\n","title":"The goal you specified requires a project to execute but there is no POM in this directory","body":"<ol>\n<li>Install Maven (download apache-maven-3.9.1-bin.zip)</li>\n<li>Ungip apache-maven-3.9.1-bin.zip</li>\n<li>Set the environment variable\nexport M2_HOME=/Applications/apache-maven-3.9.1\nexport PATH=$PATH:$M2_HOME/bin</li>\n<li>mvn -X -version</li>\n<li>Go to your project location where pom.xml is there</li>\n<li>mvn clean\n[INFO] BUILD SUCCESS</li>\n<li>mvn compile\n[INFO] BUILD SUCCESS</li>\n<li>mvn test</li>\n</ol>\n"}],"owner":{"account_id":11746369,"reputation":79,"user_id":8597018,"accept_rate":60,"display_name":"cactus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23749,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":46174570,"answer_count":3,"score":3,"last_activity_date":1683013845,"creation_date":1505213229,"question_id":46174411,"body_markdown":"I&#39;m facing below exception:\r\n\r\n&gt; org.apache.maven.lifecycle.MissingProjectException: The goal you specified requires a project to execute but there is no POM in this directory (C:\\). Please verify you invoked Maven from the correct directory.\r\n\r\nConsole log:\r\n\r\n    [DEBUG] Reading global settings from C:\\Program Files\\apache-maven-3.2.5\\conf\\settings.xml \r\n    [DEBUG] Reading user settings from C:\\Users\\user_aaa\\.m2\\settings.xml \r\n    [DEBUG] Using local repository at C:\\path\\to\\local\\repo \r\n    [DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10.0 for C:\\path\\to\\local\\repo \r\n    [INFO] Scanning for projects... \r\n    [DEBUG] Extension realms for project org.apache.maven:standalone-pom:pom:1: (none) \r\n    [DEBUG] Looking up lifecyle mappings for packaging pom from ClassRealm[plexus.core, parent: null]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 0.078 s \r\n    [INFO] Finished at: 2017-09-12T17:05:08+08:00 \r\n    [INFO] Final Memory: 5M/123M \r\n    [INFO] ------------------------------------------------------------------------ \r\n    [ERROR] The goal you specified requires a project to execute but there is no POM in this directory (C:\\). Please verify you invoked Maven from the correct directory. -&gt; [Help 1] org.apache.maven.lifecycle.MissingProjectException: The goal you specified requires a project to execute but there is no POM in this directory (C:\\). Please verify you invoked Maven from the correct directory.\r\n\r\nMaven version info:\r\n\r\n    C:\\&gt;mvn -X version \r\n    Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-15T01:29:23+08:00) \r\n    Maven home: C:\\Program Files\\apache-maven-3.2.5 \r\n    Java version: 1.8.0_144, vendor: Oracle Corporation\r\n    Java home: C:\\Program Files\\Java\\jdk1.8.0_144\\jre \r\n    Default locale: en_US, platform encoding: MS950_HKSCS\r\n    OS name: &quot;windows 8.1&quot;, version: &quot;6.3&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;\r\n\r\nDo I need to set `pom.xml` by myself? How and where? Did I install Maven correctly in Windows?","title":"The goal you specified requires a project to execute but there is no POM in this directory","body":"<p>I'm facing below exception:</p>\n\n<blockquote>\n  <p>org.apache.maven.lifecycle.MissingProjectException: The goal you specified requires a project to execute but there is no POM in this directory (C:). Please verify you invoked Maven from the correct directory.</p>\n</blockquote>\n\n<p>Console log:</p>\n\n<pre><code>[DEBUG] Reading global settings from C:\\Program Files\\apache-maven-3.2.5\\conf\\settings.xml \n[DEBUG] Reading user settings from C:\\Users\\user_aaa\\.m2\\settings.xml \n[DEBUG] Using local repository at C:\\path\\to\\local\\repo \n[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10.0 for C:\\path\\to\\local\\repo \n[INFO] Scanning for projects... \n[DEBUG] Extension realms for project org.apache.maven:standalone-pom:pom:1: (none) \n[DEBUG] Looking up lifecyle mappings for packaging pom from ClassRealm[plexus.core, parent: null]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE \n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 0.078 s \n[INFO] Finished at: 2017-09-12T17:05:08+08:00 \n[INFO] Final Memory: 5M/123M \n[INFO] ------------------------------------------------------------------------ \n[ERROR] The goal you specified requires a project to execute but there is no POM in this directory (C:\\). Please verify you invoked Maven from the correct directory. -&gt; [Help 1] org.apache.maven.lifecycle.MissingProjectException: The goal you specified requires a project to execute but there is no POM in this directory (C:\\). Please verify you invoked Maven from the correct directory.\n</code></pre>\n\n<p>Maven version info:</p>\n\n<pre><code>C:\\&gt;mvn -X version \nApache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-15T01:29:23+08:00) \nMaven home: C:\\Program Files\\apache-maven-3.2.5 \nJava version: 1.8.0_144, vendor: Oracle Corporation\nJava home: C:\\Program Files\\Java\\jdk1.8.0_144\\jre \nDefault locale: en_US, platform encoding: MS950_HKSCS\nOS name: \"windows 8.1\", version: \"6.3\", arch: \"amd64\", family: \"dos\"\n</code></pre>\n\n<p>Do I need to set <code>pom.xml</code> by myself? How and where? Did I install Maven correctly in Windows?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683013654,"creation_date":1683013654,"answer_id":76152745,"question_id":76152245,"body_markdown":"I can&#39;t reproduce the issue. Spring Boot aborts startup if an exception during the initialization of the database occurs. Unless you have configured it to continue on error. Using this property:\r\n\r\n    spring.sql.init.continue-on-error=true\r\n\r\nWhat could happen is that your database driver did not throw any exception at all. In that case Spring Boot won&#39;t notice the error.","title":"How to say Hibernate to throw Exceptions?","body":"<p>I can't reproduce the issue. Spring Boot aborts startup if an exception during the initialization of the database occurs. Unless you have configured it to continue on error. Using this property:</p>\n<pre><code>spring.sql.init.continue-on-error=true\n</code></pre>\n<p>What could happen is that your database driver did not throw any exception at all. In that case Spring Boot won't notice the error.</p>\n"}],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683013654,"creation_date":1683008890,"question_id":76152245,"body_markdown":"I am using Spring Boot 3.0.4 with Hibernate. Now I have noticed a problem. I have already created a bug report https://jira.mariadb.org/browse/MCOL-5444. But what I wonder more is that Hibernate / Spring Boot does not abort the start when SQL errors occur. \r\n\r\nIn the concrete case it is so, that a table in MariaDB was not created. But the application starts normally, you only see the error in the log if you search for it.\r\n\r\nBut what is even worse, when I create an object which should be saved in this table and save it with `save()`, there is not even an execution. Nothing at all. So I cannot determine that the record was not saved at all. Can I set somewhere that Hibernate should throw exceptions here?","title":"How to say Hibernate to throw Exceptions?","body":"<p>I am using Spring Boot 3.0.4 with Hibernate. Now I have noticed a problem. I have already created a bug report <a href=\"https://jira.mariadb.org/browse/MCOL-5444\" rel=\"nofollow noreferrer\">https://jira.mariadb.org/browse/MCOL-5444</a>. But what I wonder more is that Hibernate / Spring Boot does not abort the start when SQL errors occur.</p>\n<p>In the concrete case it is so, that a table in MariaDB was not created. But the application starts normally, you only see the error in the log if you search for it.</p>\n<p>But what is even worse, when I create an object which should be saved in this table and save it with <code>save()</code>, there is not even an execution. Nothing at all. So I cannot determine that the record was not saved at all. Can I set somewhere that Hibernate should throw exceptions here?</p>\n"},{"tags":["java","servlets","junit","aem","junit5"],"comments":[{"owner":{"account_id":11074819,"reputation":1673,"user_id":8131885,"display_name":"Alexander Berndt"},"score":0,"creation_date":1682869265,"post_id":76140218,"comment_id":134279548,"body_markdown":"It explains the Error pretty detailed, and is on ProfileServletTest.java Line 52. I assume it is when(httpClients.custom().setConnectionManager(cm).build()).thenReturn(closeableHttpClient); This chain of calls requires a mock for each function call.","body":"It explains the Error pretty detailed, and is on ProfileServletTest.java Line 52. I assume it is when(httpClients.custom().setConnectionManager(cm).build()).&zwnj;&#8203;thenReturn(closeable&zwnj;&#8203;HttpClient); This chain of calls requires a mock for each function call."},{"owner":{"account_id":28461576,"reputation":13,"user_id":21778229,"display_name":"tech boy"},"score":0,"creation_date":1682878567,"post_id":76140218,"comment_id":134280770,"body_markdown":"@AlexanderBerndt I am not sure what I am missing here?","body":"@AlexanderBerndt I am not sure what I am missing here?"}],"answers":[{"tags":[],"owner":{"account_id":11074819,"reputation":1673,"user_id":8131885,"display_name":"Alexander Berndt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683013648,"creation_date":1683013648,"answer_id":76152742,"question_id":76140218,"body_markdown":"The mocking of the http-client building had 2 main issues:\r\n\r\n1. All steps of the builder-chain have to be mocked (return self)\r\n2. The static method HttpClients.custom() is harder to mock with Mockito\r\n\r\nHere is a working version of your JUnit Test, with some comments:\r\n\r\n   \r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    import static org.mockito.ArgumentMatchers.any;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    import io.wcm.testing.mock.aem.junit5.AemContext;\r\n    import io.wcm.testing.mock.aem.junit5.AemContextExtension;\r\n    import java.io.IOException;\r\n    import org.apache.http.client.ResponseHandler;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClientBuilder;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.MockedStatic;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.junit.jupiter.MockitoExtension;\r\n    \r\n    @ExtendWith(AemContextExtension.class)\r\n    @ExtendWith(MockitoExtension.class)\r\n    class ProfileServletTest {\r\n    \r\n      private final AemContext aemContext = new AemContext();\r\n    \r\n      @Mock\r\n      private HttpClientBuilder httpClientBuilder;\r\n      @Mock\r\n      private CloseableHttpClient closeableHttpClient;\r\n    \r\n      private ProfileServlet profileServlet;\r\n    \r\n      @BeforeEach\r\n      void setUp() throws IOException {\r\n        aemContext.build().resource(&quot;/content/sample-aem/profile&quot;, &quot;jcr:title&quot;, &quot;Profile&quot;);\r\n        aemContext.currentResource(&quot;/content/sample-aem/profile&quot;);\r\n        aemContext.requestPathInfo().setExtension(&quot;json&quot;);\r\n    \r\n        // Mock every step of the builder-chain\r\n        when(httpClientBuilder.setConnectionManager(any())).thenReturn(httpClientBuilder);\r\n        when(httpClientBuilder.build()).thenReturn(closeableHttpClient);\r\n    \r\n        // execute() already returns a String\r\n        when(closeableHttpClient.execute(any(HttpGet.class), any(ResponseHandler.class)))\r\n            .thenReturn(&quot;{&#39;result&#39;:&#39;ok&#39;}&quot;);\r\n    \r\n        // use AEM-Mockups to register/inject/activate services\r\n        this.profileServlet = aemContext.registerInjectActivateService(ProfileServlet.class,\r\n            &quot;baseUrl&quot;, &quot;https://api.baseurl.com/&quot;, &quot;userid&quot;, &quot;12345&quot;);\r\n      }\r\n    \r\n      @Test\r\n      void doGet() throws IOException {\r\n        // Static methods are NOT easy to mock\r\n        try (MockedStatic&lt;HttpClients&gt; httpClientsMock = Mockito.mockStatic(HttpClients.class)) {\r\n          httpClientsMock.when(HttpClients::custom).thenReturn(httpClientBuilder);\r\n    \r\n          profileServlet.doGet(aemContext.request(), aemContext.response());\r\n          assertEquals(&quot;{&#39;result&#39;:&#39;ok&#39;}&quot;, aemContext.response().getOutputAsString());\r\n        }\r\n      }\r\n    }\r\n","title":"Error while executing AEM sling servlet junit5 test case","body":"<p>The mocking of the http-client building had 2 main issues:</p>\n<ol>\n<li>All steps of the builder-chain have to be mocked (return self)</li>\n<li>The static method HttpClients.custom() is harder to mock with Mockito</li>\n</ol>\n<p>Here is a working version of your JUnit Test, with some comments:</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\n\nimport io.wcm.testing.mock.aem.junit5.AemContext;\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\nimport java.io.IOException;\nimport org.apache.http.client.ResponseHandler;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.http.impl.client.HttpClients;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.Mock;\nimport org.mockito.MockedStatic;\nimport org.mockito.Mockito;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\n@ExtendWith(AemContextExtension.class)\n@ExtendWith(MockitoExtension.class)\nclass ProfileServletTest {\n\n  private final AemContext aemContext = new AemContext();\n\n  @Mock\n  private HttpClientBuilder httpClientBuilder;\n  @Mock\n  private CloseableHttpClient closeableHttpClient;\n\n  private ProfileServlet profileServlet;\n\n  @BeforeEach\n  void setUp() throws IOException {\n    aemContext.build().resource(&quot;/content/sample-aem/profile&quot;, &quot;jcr:title&quot;, &quot;Profile&quot;);\n    aemContext.currentResource(&quot;/content/sample-aem/profile&quot;);\n    aemContext.requestPathInfo().setExtension(&quot;json&quot;);\n\n    // Mock every step of the builder-chain\n    when(httpClientBuilder.setConnectionManager(any())).thenReturn(httpClientBuilder);\n    when(httpClientBuilder.build()).thenReturn(closeableHttpClient);\n\n    // execute() already returns a String\n    when(closeableHttpClient.execute(any(HttpGet.class), any(ResponseHandler.class)))\n        .thenReturn(&quot;{'result':'ok'}&quot;);\n\n    // use AEM-Mockups to register/inject/activate services\n    this.profileServlet = aemContext.registerInjectActivateService(ProfileServlet.class,\n        &quot;baseUrl&quot;, &quot;https://api.baseurl.com/&quot;, &quot;userid&quot;, &quot;12345&quot;);\n  }\n\n  @Test\n  void doGet() throws IOException {\n    // Static methods are NOT easy to mock\n    try (MockedStatic&lt;HttpClients&gt; httpClientsMock = Mockito.mockStatic(HttpClients.class)) {\n      httpClientsMock.when(HttpClients::custom).thenReturn(httpClientBuilder);\n\n      profileServlet.doGet(aemContext.request(), aemContext.response());\n      assertEquals(&quot;{'result':'ok'}&quot;, aemContext.response().getOutputAsString());\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":28461576,"reputation":13,"user_id":21778229,"display_name":"tech boy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76152742,"answer_count":1,"score":1,"last_activity_date":1683013648,"creation_date":1682842785,"question_id":76140218,"body_markdown":"I have written below AEM servlet and junit5 test case but I am getting error while executing junit5 test case\r\n\r\n```\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.client.utils.URIBuilder;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.apache.http.impl.conn.PoolingHttpClientConnectionManager;\r\nimport org.apache.sling.api.SlingHttpServletRequest;\r\nimport org.apache.sling.api.SlingHttpServletResponse;\r\nimport org.apache.sling.api.servlets.SlingSafeMethodsServlet;\r\nimport org.apache.sling.servlets.annotations.SlingServletResourceTypes;\r\nimport org.osgi.service.component.annotations.Activate;\r\nimport org.osgi.service.component.annotations.Component;\r\nimport org.osgi.service.metatype.annotations.AttributeDefinition;\r\nimport org.osgi.service.metatype.annotations.Designate;\r\nimport org.osgi.service.metatype.annotations.ObjectClassDefinition;\r\nimport javax.servlet.Servlet;\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@Component(service = { Servlet.class })\r\n@SlingServletResourceTypes(\r\n    resourceTypes = { &quot;sample-aem/components/content/profile&quot; },\r\n    methods = { &quot;GET&quot; },\r\n    extensions = { &quot;json&quot; })\r\n@Designate(ocd = TestServlet.Configuration.class)\r\npublic class TestServlet extends SlingSafeMethodsServlet {\r\n\r\n    private Configuration configuration;\r\n    private PoolingHttpClientConnectionManager poolingHttpClientConnectionManager;\r\n    protected CloseableHttpClient closeableHttpClient;\r\n\r\n    @Activate\r\n    void activate(final Configuration config) {\r\n        this.configuration = config;\r\n        poolingHttpClientConnectionManager = new PoolingHttpClientConnectionManager();\r\n        poolingHttpClientConnectionManager.setMaxTotal(35);\r\n        poolingHttpClientConnectionManager.setDefaultMaxPerRoute(2);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void doGet(SlingHttpServletRequest request,SlingHttpServletResponse response) throws IOException {\r\n        response.setContentType(&quot;text/plain&quot;);\r\n        response.setCharacterEncoding(&quot;utf-8&quot;);\r\n        HttpGet httpGet = null;\r\n        URI uri = null;\r\n        String finalResponse = null;\r\n        try {\r\n            closeableHttpClient = HttpClients.custom().setConnectionManager(poolingHttpClientConnectionManager).build();\r\n            uri = new URIBuilder(configuration.baseUrl()+configuration.userid()).build();\r\n            httpGet = new HttpGet(uri);\r\n            finalResponse = getCloseableHttpClient().execute(httpGet, new CustomResponseHandler());\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        } finally {\r\n            if (httpGet != null) {\r\n                httpGet.releaseConnection();\r\n            }\r\n        }\r\n        response.getWriter().write(finalResponse);\r\n    }\r\n\r\n    private CloseableHttpClient getCloseableHttpClient() {\r\n        this.poolingHttpClientConnectionManager.closeExpiredConnections();\r\n        this.poolingHttpClientConnectionManager.closeIdleConnections(5, TimeUnit.MINUTES);\r\n        return closeableHttpClient;\r\n    }\r\n\r\n    @ObjectClassDefinition\r\n    public @interface Configuration {\r\n        @AttributeDefinition(\r\n            name = &quot;Base Url&quot;,\r\n            description = &quot;API server base url&quot;\r\n        )\r\n        String baseUrl() default &quot;https://api.baseurl.com/&quot;;\r\n        @AttributeDefinition(\r\n            name = &quot;userid&quot;,\r\n            description = &quot;Unique user id.&quot;\r\n        )\r\n        String userid() default &quot;12345&quot;;\r\n    }\r\n}\r\n```\r\n\r\nBelow is the helper class\r\n\r\n\r\n```\r\nimport org.apache.http.HttpEntity;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.StatusLine;\r\nimport org.apache.http.client.ResponseHandler;\r\nimport org.apache.http.client.methods.CloseableHttpResponse;\r\nimport org.apache.http.util.EntityUtils;\r\nimport java.io.IOException;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class CustomResponseHandler implements ResponseHandler&lt;String&gt; {\r\n\r\n\t@Override\r\n\tpublic String handleResponse(HttpResponse response) throws IOException {\r\n\t\ttry {\r\n\t\t\tStatusLine statusLine = response.getStatusLine();\r\n\t\t\tint statusCode = statusLine.getStatusCode();\r\n\t\t\tif (statusCode == 201) {\r\n\t\t\t\tString entityId = response.getFirstHeader(&quot;uniqueid&quot;).getValue();\r\n\t\t\t\tPattern pattern = Pattern.compile(&quot;\\\\((.*)\\\\)&quot;);\r\n\t\t\t\tMatcher m = pattern.matcher(entityId);\r\n\t\t\t\tif (m.find()) {\r\n\t\t\t\t\treturn m.group(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn entityId;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tHttpEntity entity = response.getEntity();\r\n\t\t\t\tString body = entity != null ? EntityUtils.toString(entity) : null;\r\n\t\t\t\treturn body;\r\n\t\t\t}\r\n\t\t} finally {\r\n            ((CloseableHttpResponse) response).close();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\nI have written Sling Servlet junit5 testcase and added all required dependency in POM file and my junit5 test are working but below is the Junit5 test class throwing error while executing. Seems I have done something wrong while mocking the object\r\n\r\n\r\n```\r\n\r\nimport io.wcm.testing.mock.aem.junit5.AemContext;\r\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\r\nimport org.apache.http.ProtocolVersion;\r\nimport org.apache.http.client.methods.CloseableHttpResponse;\r\nimport org.apache.http.entity.StringEntity;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.apache.http.impl.conn.PoolingHttpClientConnectionManager;\r\nimport org.apache.http.message.BasicStatusLine;\r\nimport org.apache.sling.testing.mock.sling.servlet.MockSlingHttpServletRequest;\r\nimport org.apache.sling.testing.mock.sling.servlet.MockSlingHttpServletResponse;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.Mock;\r\n\r\nimport java.io.IOException;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\nimport static org.mockito.ArgumentMatchers.any;\r\nimport static org.mockito.Mockito.mock;\r\nimport static org.mockito.Mockito.when;\r\n\r\n@ExtendWith(AemContextExtension.class)\r\nclass ProfileServletTest {\r\n\r\n    AemContext aemContext = new AemContext();\r\n    ProfileServlet profileServlet = new ProfileServlet();\r\n    MockSlingHttpServletRequest request;\r\n    MockSlingHttpServletResponse response;\r\n\r\n    @Mock\r\n    private PoolingHttpClientConnectionManager cm;\r\n    @Mock\r\n    private CloseableHttpClient closeableHttpClient;\r\n    @Mock\r\n    CloseableHttpResponse closeableHttpResponse;\r\n    @Mock\r\n    private HttpClients httpClients;\r\n    \r\n    @BeforeEach\r\n    void setUp() throws IOException {\r\n        aemContext.build().resource(&quot;/content/sample-aem/profile&quot;,&quot;jcr:title&quot;,&quot;Profile&quot;);\r\n        aemContext.currentResource(&quot;/content/sample-aem/profile&quot;);\r\n        aemContext.requestPathInfo().setExtension(&quot;json&quot;);\r\n        ProfileServlet.Configuration configuration = mock(ProfileServlet.Configuration.class);\r\n        when(configuration.baseUrl()).thenReturn(&quot;https://api.baseurl.com/&quot;);\r\n        when(configuration.userid()).thenReturn(&quot;12345&quot;);\r\n        when(httpClients.custom().setConnectionManager(cm).build()).thenReturn(closeableHttpClient);\r\n        when(closeableHttpClient.execute(any())).thenReturn(closeableHttpResponse);\r\n        when(closeableHttpResponse.getEntity()).thenReturn(new StringEntity(&quot;{&#39;result&#39;:&#39;ok&#39;}&quot;));\r\n        when(closeableHttpResponse.getStatusLine()).thenReturn(new BasicStatusLine(new ProtocolVersion(&quot;http&quot;,1,1),200,&quot;OK&quot;));\r\n        profileServlet.activate(configuration);\r\n        request = aemContext.request();\r\n        response = aemContext.response();\r\n    }\r\n\r\n    @Test\r\n    void doGet() throws IOException {\r\n        profileServlet.doGet(request,response);\r\n        assertEquals(&quot;{&#39;result&#39;:&#39;ok&#39;}&quot;,response.getOutputAsString());\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\ngetting below error\r\n\r\n\r\n```\r\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \r\nwhen() requires an argument which has to be &#39;a method call on a mock&#39;.\r\nFor example:\r\n    when(mock.getArticles()).thenReturn(articles);\r\n\r\nAlso, this error might show up because:\r\n1. you stub either of: final/private/equals()/hashCode() methods.\r\n   Those methods *cannot* be stubbed/verified.\r\n   Mocking methods declared on non-public parent classes is not supported.\r\n2. inside when() you don&#39;t call method on mock but on some other object.\r\n\r\n\r\n\tat aem.core.servlets.ProfileServletTest.setUp(ProfileServletTest.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)\r\n```\r\n\r\n\r\n","title":"Error while executing AEM sling servlet junit5 test case","body":"<p>I have written below AEM servlet and junit5 test case but I am getting error while executing junit5 test case</p>\n<pre><code>import org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.utils.URIBuilder;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.impl.conn.PoolingHttpClientConnectionManager;\nimport org.apache.sling.api.SlingHttpServletRequest;\nimport org.apache.sling.api.SlingHttpServletResponse;\nimport org.apache.sling.api.servlets.SlingSafeMethodsServlet;\nimport org.apache.sling.servlets.annotations.SlingServletResourceTypes;\nimport org.osgi.service.component.annotations.Activate;\nimport org.osgi.service.component.annotations.Component;\nimport org.osgi.service.metatype.annotations.AttributeDefinition;\nimport org.osgi.service.metatype.annotations.Designate;\nimport org.osgi.service.metatype.annotations.ObjectClassDefinition;\nimport javax.servlet.Servlet;\nimport java.io.IOException;\nimport java.net.URI;\nimport java.util.concurrent.TimeUnit;\n\n@Component(service = { Servlet.class })\n@SlingServletResourceTypes(\n    resourceTypes = { &quot;sample-aem/components/content/profile&quot; },\n    methods = { &quot;GET&quot; },\n    extensions = { &quot;json&quot; })\n@Designate(ocd = TestServlet.Configuration.class)\npublic class TestServlet extends SlingSafeMethodsServlet {\n\n    private Configuration configuration;\n    private PoolingHttpClientConnectionManager poolingHttpClientConnectionManager;\n    protected CloseableHttpClient closeableHttpClient;\n\n    @Activate\n    void activate(final Configuration config) {\n        this.configuration = config;\n        poolingHttpClientConnectionManager = new PoolingHttpClientConnectionManager();\n        poolingHttpClientConnectionManager.setMaxTotal(35);\n        poolingHttpClientConnectionManager.setDefaultMaxPerRoute(2);\n    }\n\n\n    @Override\n    protected void doGet(SlingHttpServletRequest request,SlingHttpServletResponse response) throws IOException {\n        response.setContentType(&quot;text/plain&quot;);\n        response.setCharacterEncoding(&quot;utf-8&quot;);\n        HttpGet httpGet = null;\n        URI uri = null;\n        String finalResponse = null;\n        try {\n            closeableHttpClient = HttpClients.custom().setConnectionManager(poolingHttpClientConnectionManager).build();\n            uri = new URIBuilder(configuration.baseUrl()+configuration.userid()).build();\n            httpGet = new HttpGet(uri);\n            finalResponse = getCloseableHttpClient().execute(httpGet, new CustomResponseHandler());\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        } finally {\n            if (httpGet != null) {\n                httpGet.releaseConnection();\n            }\n        }\n        response.getWriter().write(finalResponse);\n    }\n\n    private CloseableHttpClient getCloseableHttpClient() {\n        this.poolingHttpClientConnectionManager.closeExpiredConnections();\n        this.poolingHttpClientConnectionManager.closeIdleConnections(5, TimeUnit.MINUTES);\n        return closeableHttpClient;\n    }\n\n    @ObjectClassDefinition\n    public @interface Configuration {\n        @AttributeDefinition(\n            name = &quot;Base Url&quot;,\n            description = &quot;API server base url&quot;\n        )\n        String baseUrl() default &quot;https://api.baseurl.com/&quot;;\n        @AttributeDefinition(\n            name = &quot;userid&quot;,\n            description = &quot;Unique user id.&quot;\n        )\n        String userid() default &quot;12345&quot;;\n    }\n}\n</code></pre>\n<p>Below is the helper class</p>\n<pre><code>import org.apache.http.HttpEntity;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.StatusLine;\nimport org.apache.http.client.ResponseHandler;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.util.EntityUtils;\nimport java.io.IOException;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class CustomResponseHandler implements ResponseHandler&lt;String&gt; {\n\n    @Override\n    public String handleResponse(HttpResponse response) throws IOException {\n        try {\n            StatusLine statusLine = response.getStatusLine();\n            int statusCode = statusLine.getStatusCode();\n            if (statusCode == 201) {\n                String entityId = response.getFirstHeader(&quot;uniqueid&quot;).getValue();\n                Pattern pattern = Pattern.compile(&quot;\\\\((.*)\\\\)&quot;);\n                Matcher m = pattern.matcher(entityId);\n                if (m.find()) {\n                    return m.group(1);\n                } else {\n                    return entityId;\n                }\n            } else {\n                HttpEntity entity = response.getEntity();\n                String body = entity != null ? EntityUtils.toString(entity) : null;\n                return body;\n            }\n        } finally {\n            ((CloseableHttpResponse) response).close();\n        }\n    }\n}\n</code></pre>\n<p>I have written Sling Servlet junit5 testcase and added all required dependency in POM file and my junit5 test are working but below is the Junit5 test class throwing error while executing. Seems I have done something wrong while mocking the object</p>\n<pre><code>\nimport io.wcm.testing.mock.aem.junit5.AemContext;\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\nimport org.apache.http.ProtocolVersion;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.impl.conn.PoolingHttpClientConnectionManager;\nimport org.apache.http.message.BasicStatusLine;\nimport org.apache.sling.testing.mock.sling.servlet.MockSlingHttpServletRequest;\nimport org.apache.sling.testing.mock.sling.servlet.MockSlingHttpServletResponse;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.Mock;\n\nimport java.io.IOException;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n@ExtendWith(AemContextExtension.class)\nclass ProfileServletTest {\n\n    AemContext aemContext = new AemContext();\n    ProfileServlet profileServlet = new ProfileServlet();\n    MockSlingHttpServletRequest request;\n    MockSlingHttpServletResponse response;\n\n    @Mock\n    private PoolingHttpClientConnectionManager cm;\n    @Mock\n    private CloseableHttpClient closeableHttpClient;\n    @Mock\n    CloseableHttpResponse closeableHttpResponse;\n    @Mock\n    private HttpClients httpClients;\n    \n    @BeforeEach\n    void setUp() throws IOException {\n        aemContext.build().resource(&quot;/content/sample-aem/profile&quot;,&quot;jcr:title&quot;,&quot;Profile&quot;);\n        aemContext.currentResource(&quot;/content/sample-aem/profile&quot;);\n        aemContext.requestPathInfo().setExtension(&quot;json&quot;);\n        ProfileServlet.Configuration configuration = mock(ProfileServlet.Configuration.class);\n        when(configuration.baseUrl()).thenReturn(&quot;https://api.baseurl.com/&quot;);\n        when(configuration.userid()).thenReturn(&quot;12345&quot;);\n        when(httpClients.custom().setConnectionManager(cm).build()).thenReturn(closeableHttpClient);\n        when(closeableHttpClient.execute(any())).thenReturn(closeableHttpResponse);\n        when(closeableHttpResponse.getEntity()).thenReturn(new StringEntity(&quot;{'result':'ok'}&quot;));\n        when(closeableHttpResponse.getStatusLine()).thenReturn(new BasicStatusLine(new ProtocolVersion(&quot;http&quot;,1,1),200,&quot;OK&quot;));\n        profileServlet.activate(configuration);\n        request = aemContext.request();\n        response = aemContext.response();\n    }\n\n    @Test\n    void doGet() throws IOException {\n        profileServlet.doGet(request,response);\n        assertEquals(&quot;{'result':'ok'}&quot;,response.getOutputAsString());\n    }\n}\n\n</code></pre>\n<p>getting below error</p>\n<pre><code>org.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n\n\n    at aem.core.servlets.ProfileServletTest.setUp(ProfileServletTest.java:52)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)\n</code></pre>\n"},{"tags":["java","android","jodatime"],"comments":[{"owner":{"account_id":83894,"reputation":2385,"user_id":234910,"accept_rate":69,"display_name":"Mikkel R. Lund"},"score":1,"creation_date":1556008081,"post_id":9153294,"comment_id":98281864,"body_markdown":"It is always a *very* bad idea to subtract a &quot;small unit&quot; from the end of time intervals. Time intervals have their start included and their end excluded. Checking if a (date)time is included in the interval you do: start &lt;= time &amp;&amp; time &lt; end. Otherwise you end up with a small amount of values (actually in the interval) that suddenly get excluded. Think about the last second in your case. 23:59:59.5 is not in that interval. Using small units just makes the number of excluded values small, but doesn&#39;t remove the problem. Using the right comparison does.","body":"It is always a <i>very</i> bad idea to subtract a &quot;small unit&quot; from the end of time intervals. Time intervals have their start included and their end excluded. Checking if a (date)time is included in the interval you do: start &lt;= time &amp;&amp; time &lt; end. Otherwise you end up with a small amount of values (actually in the interval) that suddenly get excluded. Think about the last second in your case. 23:59:59.5 is not in that interval. Using small units just makes the number of excluded values small, but doesn&#39;t remove the problem. Using the right comparison does."}],"answers":[{"comments":[{"owner":{"account_id":323244,"reputation":11569,"user_id":643141,"display_name":"Hauke Ingmar Schmidt"},"score":5,"creation_date":1328482438,"post_id":9153601,"comment_id":11511134,"body_markdown":"`setXxx` by convention has no return type in Java so it wouldn&#39;t allow chaining. This here reminds of the builder pattern (which originally would not work on an existing object).","body":"<code>setXxx</code> by convention has no return type in Java so it wouldn&#39;t allow chaining. This here reminds of the builder pattern (which originally would not work on an existing object)."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1328495292,"post_id":9153601,"comment_id":11512892,"body_markdown":"Indeed.  This lets you string the calls together, rather than having them all on different lines, and gets you all the benefits of immutable objects.","body":"Indeed.  This lets you string the calls together, rather than having them all on different lines, and gets you all the benefits of immutable objects."},{"owner":{"account_id":252590,"reputation":6115,"user_id":530734,"display_name":"Peter Svensson"},"score":0,"creation_date":1328508464,"post_id":9153601,"comment_id":11514541,"body_markdown":"I think the &quot;pattern&quot; is called &quot;Fluent interface&quot; http://martinfowler.com/bliki/FluentInterface.html - gives a lot of benefits in readability and clarity in my opinion.","body":"I think the &quot;pattern&quot; is called &quot;Fluent interface&quot; <a href=\"http://martinfowler.com/bliki/FluentInterface.html\" rel=\"nofollow noreferrer\">martinfowler.com/bliki/FluentInterface.html</a> - gives a lot of benefits in readability and clarity in my opinion."},{"owner":{"account_id":17393,"reputation":61637,"user_id":38896,"accept_rate":80,"display_name":"JodaStephen"},"score":3,"creation_date":1328609814,"post_id":9153601,"comment_id":11541371,"body_markdown":"I wrote up the &quot;with&quot; verb in 2006 - http://blog.joda.org/2006/05/immutable-pojos-improving-on_6406.html and updated that in 2011 - http://blog.joda.org/2011/08/common-java-method-names.html . Immutable setters are very different from normal setters in terms of how you use them (you must use the return value).","body":"I wrote up the &quot;with&quot; verb in 2006 - <a href=\"http://blog.joda.org/2006/05/immutable-pojos-improving-on_6406.html\" rel=\"nofollow noreferrer\">blog.joda.org/2006/05/immutable-pojos-improving-on_6406.html</a> and updated that in 2011 - <a href=\"http://blog.joda.org/2011/08/common-java-method-names.html\" rel=\"nofollow noreferrer\">blog.joda.org/2011/08/common-java-method-names.html</a> . Immutable setters are very different from normal setters in terms of how you use them (you must use the return value)."},{"owner":{"account_id":999916,"reputation":2488,"user_id":1015034,"display_name":"le0diaz"},"score":1,"creation_date":1453847660,"post_id":9153601,"comment_id":57777332,"body_markdown":"@TheRueger response is the best answer. This one is correct but has the the worst performance of current answers as it creates many objects in each withXXX method.  d.millisOfDay().withMaximumValue(); is the one to accomplish the best posible way.","body":"@TheRueger response is the best answer. This one is correct but has the the worst performance of current answers as it creates many objects in each withXXX method.  d.millisOfDay().withMaximumValue(); is the one to accomplish the best posible way."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":0,"creation_date":1493688618,"post_id":9153601,"comment_id":74501219,"body_markdown":"Wouldn&#39;t these potentially fail with an exception if the local timezone had a daylight savings time change that prevented the specified times existing?","body":"Wouldn&#39;t these potentially fail with an exception if the local timezone had a daylight savings time change that prevented the specified times existing?"}],"tags":[],"owner":{"account_id":252590,"reputation":6115,"user_id":530734,"display_name":"Peter Svensson"},"comment_count":6,"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1328480304,"creation_date":1328480304,"answer_id":9153601,"question_id":9153294,"body_markdown":"How about:\r\n\r\n\r\n    private LocalDateTime calcNextSunday(LocalDateTime d) {\r\n        return d.withHourOfDay(23).withMinuteOfHour(59).withSecondOfMinute(59).withDayOfWeek(DateTimeConstants.SUNDAY);\r\n    }\r\n\r\n    private LocalDateTime calcPreviousMonday(final LocalDateTime d) {\r\n        return d.withHourOfDay(0).withMinuteOfHour(0).withSecondOfMinute(0).withDayOfWeek(DateTimeConstants.MONDAY);\r\n    }","title":"Jodatime start of day and end of day","body":"<p>How about:</p>\n\n<pre><code>private LocalDateTime calcNextSunday(LocalDateTime d) {\n    return d.withHourOfDay(23).withMinuteOfHour(59).withSecondOfMinute(59).withDayOfWeek(DateTimeConstants.SUNDAY);\n}\n\nprivate LocalDateTime calcPreviousMonday(final LocalDateTime d) {\n    return d.withHourOfDay(0).withMinuteOfHour(0).withSecondOfMinute(0).withDayOfWeek(DateTimeConstants.MONDAY);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14012,"reputation":11499,"user_id":28482,"accept_rate":69,"display_name":"Touko"},"score":52,"creation_date":1361280401,"post_id":9174474,"comment_id":20998232,"body_markdown":"Beginning of the day can also be got with _d.withTimeAtStartOfDay()_","body":"Beginning of the day can also be got with <i>d.withTimeAtStartOfDay()</i>"},{"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"score":16,"creation_date":1383221920,"post_id":9174474,"comment_id":29272508,"body_markdown":"`withTimeAtStartOfDay()` is not available for `LocalDateTime`, but it is available for [`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay())","body":"<code>withTimeAtStartOfDay()</code> is not available for <code>LocalDateTime</code>, but it is available for <a href=\"http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay()\" rel=\"nofollow noreferrer\"><code>DateTime</code></a>"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1396002825,"post_id":9174474,"comment_id":34606133,"body_markdown":"+1. One note: `LocalDateTime is immutable, so there are no set methods. Instead, this method returns a new instance with the value of millis of day changed.` So you have to assign the result to some variable.","body":"+1. One note: <code>LocalDateTime is immutable, so there are no set methods. Instead, this method returns a new instance with the value of millis of day changed.</code> So you have to assign the result to some variable."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1396255450,"post_id":9174474,"comment_id":34690400,"body_markdown":"Oh, I&#39;m sorry. I have just noticed that I addressed my above note to the author of Joda-Time. Quite confusing. Sorry, sir.","body":"Oh, I&#39;m sorry. I have just noticed that I addressed my above note to the author of Joda-Time. Quite confusing. Sorry, sir."},{"owner":{"account_id":173533,"reputation":9578,"user_id":402281,"accept_rate":58,"display_name":"Feuermurmel"},"score":8,"creation_date":1409043660,"post_id":9174474,"comment_id":39806343,"body_markdown":"Keep in mind that with this method, you&#39;re missing one millisecond of each day. I&#39;d suggest using `d.plusDays(1).withTime(0, 0, 0, 0)` for the end of that day.","body":"Keep in mind that with this method, you&#39;re missing one millisecond of each day. I&#39;d suggest using <code>d.plusDays(1).withTime(0, 0, 0, 0)</code> for the end of that day."},{"owner":{"account_id":151653,"reputation":1689,"user_id":365675,"accept_rate":48,"display_name":"yetanothercoder"},"score":0,"creation_date":1418732150,"post_id":9174474,"comment_id":43438863,"body_markdown":"@Touko where is `withTimeAtStartOfDay()`? there is no such in LocalDateTime","body":"@Touko where is <code>withTimeAtStartOfDay()</code>? there is no such in LocalDateTime"},{"owner":{"account_id":256670,"reputation":16061,"user_id":537554,"display_name":"ryenus"},"score":6,"creation_date":1436783580,"post_id":9174474,"comment_id":50739822,"body_markdown":"better to use `plusDays(1).withTime(0,0,0,0)` approach as @Feuermurmel pointed out, as it works with leap seconds, as for 2015-06-30T23:59:60","body":"better to use <code>plusDays(1).withTime(0,0,0,0)</code> approach as @Feuermurmel pointed out, as it works with leap seconds, as for 2015-06-30T23:59:60"},{"owner":{"account_id":1967071,"reputation":1336,"user_id":1767021,"accept_rate":76,"display_name":"deldev"},"score":8,"creation_date":1464182653,"post_id":9174474,"comment_id":62379663,"body_markdown":"Pay attention the daylightsaving. Better to use `d.millisOfDay().withMaximumValue();`","body":"Pay attention the daylightsaving. Better to use <code>d.millisOfDay().withMaximumValue();</code>"},{"owner":{"account_id":2800556,"reputation":2198,"user_id":2408879,"display_name":"makata"},"score":0,"creation_date":1678513694,"post_id":9174474,"comment_id":133551218,"body_markdown":"This will throw `IllegalInstantException` on some instances of daytime saving. Eg, on Lebanon daytime saving occured on March 26th, 2023 at 0:00 and the clocks are then set one hour forward. We can&#39;t have `DateTime(2023,3,26)withTime(0,0,0,0)`","body":"This will throw <code>IllegalInstantException</code> on some instances of daytime saving. Eg, on Lebanon daytime saving occured on March 26th, 2023 at 0:00 and the clocks are then set one hour forward. We can&#39;t have <code>DateTime(2023,3,26)withTime(0,0,0,0)</code>"}],"tags":[],"owner":{"account_id":17393,"reputation":61637,"user_id":38896,"accept_rate":80,"display_name":"JodaStephen"},"comment_count":9,"down_vote_count":3,"up_vote_count":159,"is_accepted":false,"score":156,"last_activity_date":1328609991,"creation_date":1328609991,"answer_id":9174474,"question_id":9153294,"body_markdown":"You can use the `withTime` method:\r\n\r\n     d.withTime(0, 0, 0, 0);\r\n     d.withTime(23, 59, 59, 999);\r\n\r\nSame as Peter&#39;s answer, but shorter.\r\n","title":"Jodatime start of day and end of day","body":"<p>You can use the <code>withTime</code> method:</p>\n\n<pre><code> d.withTime(0, 0, 0, 0);\n d.withTime(23, 59, 59, 999);\n</code></pre>\n\n<p>Same as Peter's answer, but shorter.</p>\n"},{"comments":[{"owner":{"account_id":999916,"reputation":2488,"user_id":1015034,"display_name":"le0diaz"},"score":16,"creation_date":1453847496,"post_id":32134093,"comment_id":57777262,"body_markdown":"This should be the accepted answer, as compared with the other answers is the best in terms of performance (less objects created as DateTime is inmutable). The method withMaximunValue Documentation even says is the best way to accomplish what the question is asking","body":"This should be the accepted answer, as compared with the other answers is the best in terms of performance (less objects created as DateTime is inmutable). The method withMaximunValue Documentation even says is the best way to accomplish what the question is asking"},{"owner":{"account_id":187852,"reputation":723,"user_id":426209,"accept_rate":75,"display_name":"Yichuan Wang"},"score":0,"creation_date":1477606603,"post_id":32134093,"comment_id":67848454,"body_markdown":"What is the difference with `getMaximumValueOverall`?","body":"What is the difference with <code>getMaximumValueOverall</code>?"}],"tags":[],"owner":{"account_id":3864969,"reputation":2538,"user_id":3318446,"display_name":"TheRueger"},"comment_count":2,"down_vote_count":0,"up_vote_count":100,"is_accepted":false,"score":100,"last_activity_date":1683013514,"creation_date":1440139870,"answer_id":32134093,"question_id":9153294,"body_markdown":"A simple way is:\r\n\r\n    d.millisOfDay().withMaximumValue();","title":"Jodatime start of day and end of day","body":"<p>A simple way is:</p>\n<pre><code>d.millisOfDay().withMaximumValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":363179,"reputation":1122,"user_id":706768,"display_name":"GreeneCreations"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555341203,"creation_date":1548349506,"answer_id":54351942,"question_id":9153294,"body_markdown":"For those coming here looking for the answer for &quot;js-joda&quot;, you have two options depending on what you&#39;re looking to accomplish\r\n\r\n**Option 1: You want the start of the day in the same timezone**\r\n\r\nSince you&#39;ve chosen to calculate your times based on an instant in time in relation to a timezone, you should use ZonedDateTime:\r\n\r\n```\r\nimport { ZonedDateTime, LocalDate, ZoneId, DateTimeFormatter} from &quot;js-joda&quot;;\r\nimport &#39;js-joda-timezone&#39;;\r\n\r\nconst nowInNewYorkCity = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;))\r\nconst startOfTodayInNYC = nowInNewYorkCity.truncatedTo(ChronoUnit.DAYS);\r\nconsole.log(startOfTodayInNYC.toString()) // Prints &quot;2019-04-15T00:00-04:00[America/New_York]&quot;\r\n// And if you want to print it in ISO format\r\nconsole.log(startOfTodayInNYC.format(DateTimeFormatter.ISO_INSTANT)) // &quot;2019-04-14T04:00:00Z&quot;\r\n```\r\n\r\n**Option 2: You know the exact day that you want to get the time for**\r\n\r\nThen you can use the following methods off of LocalDate to derive the relative time (i.e. ZonedDateTime) you&#39;d like:\r\n\r\n        atStartOfDay(): LocalDateTime\r\n        atStartOfDay(zone: ZoneId): ZonedDateTime\r\n        atStartOfDayWithZone(zone: ZoneId): ZonedDateTime\r\n\r\n**Option 3: I want just the day the instant occurred on**\r\n\r\nNotice with this code, you get the day that it would be relative to where you are. So for those in New York City, it&#39;s &quot;2019-04-14&quot; and for those in London it would be &quot;2019-04-15&quot; (which is great!) because the instant in time was during the period of time where it&#39;s actually tomorrow in London (&quot;2019-04-15T00:00:05Z&quot;). Pretend that you were calling someone in London from NYC, and the Londoner would say, &quot;geez, why are you calling me so early... it&#39;s 5 seconds past midnight.&quot;\r\n\r\n```\r\nimport { ZonedDateTime, LocalDate, ZoneId} from &quot;js-joda&quot;;\r\nimport &#39;js-joda-timezone&#39;;\r\n\r\nconst aTimeWhenLondonIsAlreadyInTomorrow = &quot;2019-04-15T00:00:05.000Z&quot;;\r\nconst inBetweenTimeInLondon = ZonedDateTime.parse(aTimeWhenLondonIsAlreadyInTomorrow);\r\nconst inBetweenTimeInNYC = inBetweenTimeInLondon.withZoneSameInstant(ZoneId.of(&quot;America/New_York&quot;))\r\nconst dayInLondon = inBetweenTimeInLondon.toLocalDate();\r\nconst dayInNYC = inBetweenTimeInNYC.toLocalDate();\r\nconsole.log(inBetweenTimeInLondon.toString()); // &quot;2019-04-15T00:00:05Z&quot;\r\nconsole.log(dayInLondon.toString()); // &quot;2019-04-15&quot;\r\nconsole.log(inBetweenTimeInNYC.toString()) // &quot;2019-04-14T20:00:05-04:00[America/New_York]&quot;\r\nconsole.log(dayInNYC.toString()); // &quot;2019-04-14&quot;\r\n```\r\n\r\nReferences: https://js-joda.github.io/js-joda/class/src/LocalDate.js~LocalDate.html#instance-method-atStartOfDayWithZone","title":"Jodatime start of day and end of day","body":"<p>For those coming here looking for the answer for \"js-joda\", you have two options depending on what you're looking to accomplish</p>\n\n<p><strong>Option 1: You want the start of the day in the same timezone</strong></p>\n\n<p>Since you've chosen to calculate your times based on an instant in time in relation to a timezone, you should use ZonedDateTime:</p>\n\n<pre><code>import { ZonedDateTime, LocalDate, ZoneId, DateTimeFormatter} from \"js-joda\";\nimport 'js-joda-timezone';\n\nconst nowInNewYorkCity = ZonedDateTime.now(ZoneId.of(\"America/New_York\"))\nconst startOfTodayInNYC = nowInNewYorkCity.truncatedTo(ChronoUnit.DAYS);\nconsole.log(startOfTodayInNYC.toString()) // Prints \"2019-04-15T00:00-04:00[America/New_York]\"\n// And if you want to print it in ISO format\nconsole.log(startOfTodayInNYC.format(DateTimeFormatter.ISO_INSTANT)) // \"2019-04-14T04:00:00Z\"\n</code></pre>\n\n<p><strong>Option 2: You know the exact day that you want to get the time for</strong></p>\n\n<p>Then you can use the following methods off of LocalDate to derive the relative time (i.e. ZonedDateTime) you'd like:</p>\n\n<pre><code>    atStartOfDay(): LocalDateTime\n    atStartOfDay(zone: ZoneId): ZonedDateTime\n    atStartOfDayWithZone(zone: ZoneId): ZonedDateTime\n</code></pre>\n\n<p><strong>Option 3: I want just the day the instant occurred on</strong></p>\n\n<p>Notice with this code, you get the day that it would be relative to where you are. So for those in New York City, it's \"2019-04-14\" and for those in London it would be \"2019-04-15\" (which is great!) because the instant in time was during the period of time where it's actually tomorrow in London (\"2019-04-15T00:00:05Z\"). Pretend that you were calling someone in London from NYC, and the Londoner would say, \"geez, why are you calling me so early... it's 5 seconds past midnight.\"</p>\n\n<pre><code>import { ZonedDateTime, LocalDate, ZoneId} from \"js-joda\";\nimport 'js-joda-timezone';\n\nconst aTimeWhenLondonIsAlreadyInTomorrow = \"2019-04-15T00:00:05.000Z\";\nconst inBetweenTimeInLondon = ZonedDateTime.parse(aTimeWhenLondonIsAlreadyInTomorrow);\nconst inBetweenTimeInNYC = inBetweenTimeInLondon.withZoneSameInstant(ZoneId.of(\"America/New_York\"))\nconst dayInLondon = inBetweenTimeInLondon.toLocalDate();\nconst dayInNYC = inBetweenTimeInNYC.toLocalDate();\nconsole.log(inBetweenTimeInLondon.toString()); // \"2019-04-15T00:00:05Z\"\nconsole.log(dayInLondon.toString()); // \"2019-04-15\"\nconsole.log(inBetweenTimeInNYC.toString()) // \"2019-04-14T20:00:05-04:00[America/New_York]\"\nconsole.log(dayInNYC.toString()); // \"2019-04-14\"\n</code></pre>\n\n<p>References: <a href=\"https://js-joda.github.io/js-joda/class/src/LocalDate.js~LocalDate.html#instance-method-atStartOfDayWithZone\" rel=\"nofollow noreferrer\">https://js-joda.github.io/js-joda/class/src/LocalDate.js~LocalDate.html#instance-method-atStartOfDayWithZone</a></p>\n"},{"tags":[],"owner":{"account_id":541510,"reputation":2306,"user_id":910095,"display_name":"Nikola Mihajlović"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558856232,"creation_date":1558856232,"answer_id":56311588,"question_id":9153294,"body_markdown":"```kotlin\r\nbegin = d\r\n    // Go to previous or same Sunday\r\n    .with(TemporalAdjusters.previousOrSame(DayOfWeek.SUNDAY))\r\n    // Beginning of day\r\n    .truncatedTo(ChronoUnit.DAYS)\r\n\r\nend = d\r\n    // Go to next Sunday\r\n    .with(TemporalAdjusters.next(DayOfWeek.SUNDAY))\r\n    // Beginning of day\r\n    .truncatedTo(ChronoUnit.DAYS)\r\n```\r\n\r\nI also think it is a bad idea to represent the end of week interval with *small amount of time* before the actual, exclusive end. It is better to treat begin as inclusive, and end as exclusive instead (when doing comparisons etc.).","title":"Jodatime start of day and end of day","body":"<pre><code>begin = d\n    // Go to previous or same Sunday\n    .with(TemporalAdjusters.previousOrSame(DayOfWeek.SUNDAY))\n    // Beginning of day\n    .truncatedTo(ChronoUnit.DAYS)\n\nend = d\n    // Go to next Sunday\n    .with(TemporalAdjusters.next(DayOfWeek.SUNDAY))\n    // Beginning of day\n    .truncatedTo(ChronoUnit.DAYS)\n</code></pre>\n\n<p>I also think it is a bad idea to represent the end of week interval with <em>small amount of time</em> before the actual, exclusive end. It is better to treat begin as inclusive, and end as exclusive instead (when doing comparisons etc.).</p>\n"},{"tags":[],"owner":{"account_id":1499204,"reputation":5419,"user_id":1404407,"accept_rate":100,"display_name":"Cory Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589414156,"creation_date":1589414156,"answer_id":61786900,"question_id":9153294,"body_markdown":"With Kotlin you could write an extension function:\r\n\r\n    fun DateTime.withTimeAtEndOfDay() : DateTime = this.withTime(23,59,59,999)\r\n\r\nThis would allow you to write:\r\n\r\n    d.withDayOfWeek(DateTimeConstants.SUNDAY).withTimeAtEndOfDay()","title":"Jodatime start of day and end of day","body":"<p>With Kotlin you could write an extension function:</p>\n\n<pre><code>fun DateTime.withTimeAtEndOfDay() : DateTime = this.withTime(23,59,59,999)\n</code></pre>\n\n<p>This would allow you to write:</p>\n\n<pre><code>d.withDayOfWeek(DateTimeConstants.SUNDAY).withTimeAtEndOfDay()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":411142,"reputation":34094,"user_id":783412,"accept_rate":100,"display_name":"hd1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683013432,"creation_date":1683013327,"answer_id":76152703,"question_id":9153294,"body_markdown":"```\r\nDateTime.now().withTimeAtStartOfDay(); // start of day\r\nDateTime.now().plusDays(1).withTimeAtStartOfDay().minusSeconds(1); // end of day\r\n```","title":"Jodatime start of day and end of day","body":"<pre><code>DateTime.now().withTimeAtStartOfDay(); // start of day\nDateTime.now().plusDays(1).withTimeAtStartOfDay().minusSeconds(1); // end of day\n</code></pre>\n"}],"owner":{"account_id":343582,"reputation":99139,"user_id":675383,"accept_rate":94,"display_name":"nhaarman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54884,"favorite_count":0,"down_vote_count":1,"up_vote_count":52,"accepted_answer_id":9153601,"answer_count":7,"score":51,"last_activity_date":1683013514,"creation_date":1328478092,"question_id":9153294,"body_markdown":"I want to create an interval between the beginning of the week, and the end of the current week.\n\nI have the following code, borrowed from [this answer][1]:\n\n    private LocalDateTime calcNextSunday(LocalDateTime d) {\n        if (d.getDayOfWeek() &gt; DateTimeConstants.SUNDAY) {\n            d = d.plusWeeks(1);\n        }\n        return d.withDayOfWeek(DateTimeConstants.SUNDAY);\n    }\n   \n    private LocalDateTime calcPreviousMonday(LocalDateTime d) {\n        if (d.getDayOfWeek() &lt; DateTimeConstants.MONDAY) {\n            d = d.minusWeeks(1);\n        }\n        return d.withDayOfWeek(DateTimeConstants.MONDAY);\n    }\n\nBut now I want the Monday `LocalDateTime` to  be at 00:00:00, and the Sunday `LocalDateTime` at 23:59:59. How would I do this?\n\n  [1]: https://stackoverflow.com/a/1636213/675383","title":"Jodatime start of day and end of day","body":"<p>I want to create an interval between the beginning of the week, and the end of the current week.</p>\n<p>I have the following code, borrowed from <a href=\"https://stackoverflow.com/a/1636213/675383\">this answer</a>:</p>\n<pre><code>private LocalDateTime calcNextSunday(LocalDateTime d) {\n    if (d.getDayOfWeek() &gt; DateTimeConstants.SUNDAY) {\n        d = d.plusWeeks(1);\n    }\n    return d.withDayOfWeek(DateTimeConstants.SUNDAY);\n}\n\nprivate LocalDateTime calcPreviousMonday(LocalDateTime d) {\n    if (d.getDayOfWeek() &lt; DateTimeConstants.MONDAY) {\n        d = d.minusWeeks(1);\n    }\n    return d.withDayOfWeek(DateTimeConstants.MONDAY);\n}\n</code></pre>\n<p>But now I want the Monday <code>LocalDateTime</code> to  be at 00:00:00, and the Sunday <code>LocalDateTime</code> at 23:59:59. How would I do this?</p>\n"},{"tags":["java","ubuntu","jco","sapjco3"],"comments":[{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":0,"creation_date":1473916621,"post_id":39502678,"comment_id":66324260,"body_markdown":"Is that the entire error message? Which steps did you perform to compile and run your application, what messages did you get?","body":"Is that the entire error message? Which steps did you perform to compile and run your application, what messages did you get?"}],"answers":[{"tags":[],"owner":{"account_id":5820683,"reputation":117,"user_id":4588880,"accept_rate":50,"display_name":"Pandawan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473916669,"creation_date":1473916669,"answer_id":39503587,"question_id":39502678,"body_markdown":"I don&#39;t know if you&#39;ve already done this but:\r\n\r\n    export LD_LIBRARY_PATH=/home/zain/sapjco\r\n    export CLASSPATH=/home/zain/sapjco/sapjco3.jar\r\n\r\nonly work in the current bash instance, which means that if you ever close that terminal window then that export path will be gone. One way to keep it is to add it to your ~/.profile\r\n\r\nthen you can just run this `source ~/.bashrc ` in order to refresh your bash window.\r\n\r\nDon&#39;t know if that helped since I have never coded Java in Ubuntu, only on Mac with Eclipse/Idea. Anyways, if that&#39;s not how to do it, then there&#39;s a problem with the way you imported your sapjco3.jar to your project. ","title":"error: package com.sap.conn.jco does not exist on ubuntu","body":"<p>I don't know if you've already done this but:</p>\n\n<pre><code>export LD_LIBRARY_PATH=/home/zain/sapjco\nexport CLASSPATH=/home/zain/sapjco/sapjco3.jar\n</code></pre>\n\n<p>only work in the current bash instance, which means that if you ever close that terminal window then that export path will be gone. One way to keep it is to add it to your ~/.profile</p>\n\n<p>then you can just run this <code>source ~/.bashrc</code> in order to refresh your bash window.</p>\n\n<p>Don't know if that helped since I have never coded Java in Ubuntu, only on Mac with Eclipse/Idea. Anyways, if that's not how to do it, then there's a problem with the way you imported your sapjco3.jar to your project. </p>\n"},{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482959279,"creation_date":1482959279,"answer_id":41369716,"question_id":39502678,"body_markdown":"You also need to use your CLASSPATH environment variable and pass it as classpath argument to your JVM instance that shall run your project.\r\n\r\nBut I don&#39;t think that you are really at the step of running your project, you must be already failing to compile your class testjco. (By the way, I recommend to follow the common Java naming conventions and let all class names start with an uppercase letter.)\r\n\r\nYou are importing the package &lt;code&gt;com.sap.conn.jco&lt;/code&gt; which belongs to the SAP Java Connector 3.0 (sapjco3.jar), but in your code you use the JCo API from package &lt;code&gt;com.sap.mw.jco&lt;/code&gt; of the outdated SAP Java Connector 2.0/2.1 (sapjco.jar). That does not work and cannot be compiled.","title":"error: package com.sap.conn.jco does not exist on ubuntu","body":"<p>You also need to use your CLASSPATH environment variable and pass it as classpath argument to your JVM instance that shall run your project.</p>\n\n<p>But I don't think that you are really at the step of running your project, you must be already failing to compile your class testjco. (By the way, I recommend to follow the common Java naming conventions and let all class names start with an uppercase letter.)</p>\n\n<p>You are importing the package <code>com.sap.conn.jco</code> which belongs to the SAP Java Connector 3.0 (sapjco3.jar), but in your code you use the JCo API from package <code>com.sap.mw.jco</code> of the outdated SAP Java Connector 2.0/2.1 (sapjco.jar). That does not work and cannot be compiled.</p>\n"}],"owner":{"account_id":3666037,"reputation":3,"user_id":3054447,"display_name":"zain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683013144,"creation_date":1473909959,"question_id":39502678,"body_markdown":"I already install JCo3 for linux.\r\n\r\nI&#39;m using ubuntu 16.04 x86_64 and java-8-oracle\r\n\r\nAs the documentation said, I need to add LD_LIBRARY_PATH and CLASSPATH to JCo directory.\r\n```\r\nexport LD_LIBRARY_PATH=/home/zain/sapjco\r\nexport CLASSPATH=/home/zain/sapjco/sapjco3.jar\r\n```\r\nthen create simple JCo connection test, but when I run my project I got error\r\n&gt;error: package com.sap.conn.jco does not exist\r\n\r\nIs there any particular step I missed?\r\n\r\nCode:\r\n\r\n    import com.sap.conn.jco.*;\r\n    public class testjco {\r\n         public static void main(String[] args) {\r\n              JCO.Client mConnection;\r\n              try {\r\n                        mConnection = JCO.createClient(&quot;301&quot;, // SAP client\r\n                                                             &quot;somecoolguy&quot;, // userid\r\n                                                              &quot;****&quot;, // password\r\n                                                              &quot;EN&quot;, // language\r\n                                                              &quot;XXX&quot;, // application server host name\r\n                                                              &quot;00&quot;); // system number\r\n                   mConnection.connect();\r\n                   System.out.println(mConnection.getAttributes());\r\n                   mConnection.disconnect();\r\n              } catch (Exception ex) {\r\n                   ex.printStackTrace();\r\n                   System.exit(1);\r\n              }\r\n         }\r\n    }\r\n","title":"error: package com.sap.conn.jco does not exist on ubuntu","body":"<p>I already install JCo3 for linux.</p>\n<p>I'm using ubuntu 16.04 x86_64 and java-8-oracle</p>\n<p>As the documentation said, I need to add LD_LIBRARY_PATH and CLASSPATH to JCo directory.</p>\n<pre><code>export LD_LIBRARY_PATH=/home/zain/sapjco\nexport CLASSPATH=/home/zain/sapjco/sapjco3.jar\n</code></pre>\n<p>then create simple JCo connection test, but when I run my project I got error</p>\n<blockquote>\n<p>error: package com.sap.conn.jco does not exist</p>\n</blockquote>\n<p>Is there any particular step I missed?</p>\n<p>Code:</p>\n<pre><code>import com.sap.conn.jco.*;\npublic class testjco {\n     public static void main(String[] args) {\n          JCO.Client mConnection;\n          try {\n                    mConnection = JCO.createClient(&quot;301&quot;, // SAP client\n                                                         &quot;somecoolguy&quot;, // userid\n                                                          &quot;****&quot;, // password\n                                                          &quot;EN&quot;, // language\n                                                          &quot;XXX&quot;, // application server host name\n                                                          &quot;00&quot;); // system number\n               mConnection.connect();\n               System.out.println(mConnection.getAttributes());\n               mConnection.disconnect();\n          } catch (Exception ex) {\n               ex.printStackTrace();\n               System.exit(1);\n          }\n     }\n}\n</code></pre>\n"},{"tags":["java","cpu-word","aspose","aspose.words"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1683006730,"post_id":76151969,"comment_id":134296772,"body_markdown":"Consider using a template document instead with a footer containing the line numb, thus let Word do line numbering for you.","body":"Consider using a template document instead with a footer containing the line numb, thus let Word do line numbering for you."}],"answers":[{"tags":[],"owner":{"account_id":11398698,"reputation":1809,"user_id":8356224,"display_name":"Alexey Noskov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683013040,"creation_date":1683013040,"answer_id":76152673,"question_id":76151969,"body_markdown":"As you know there is no concept of page or line in MS Word documents due to their flow nature. The consumer applications build document layout on the fly, the same does Aspose.Words using it&#39;s own layout engine. [`LayoutCollector`][1] and [`LayoutEnumerator`][2] classes provides a limited access to document layout information. unfortunately, there is no direct way to get the line index of some node using these classes. However, you can get layout entity of `LayoutEntityType.LINE` type of a particular node. For example, the following code demonstrates the basic technique of splitting document content into lines:\r\n```java\r\nDocument doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\r\n\r\n// Split all Run nodes in the document to make them not more than one word.\r\nIterable&lt;Run&gt; runs = doc.getChildNodes(NodeType.RUN, true);\r\nfor (Run r : runs)\r\n{\r\n    Run current = r;\r\n    while (current.getText().indexOf(&#39; &#39;) &gt;= 0)\r\n        current = SplitRun(current, current.getText().indexOf(&#39; &#39;) + 1);\r\n}\r\n\r\n// Wrap all runs in the document with bookmarks to make it possible to work with LayoutCollector and LayoutEnumerator\r\nruns = doc.getChildNodes(NodeType.RUN, true);\r\n\r\nArrayList&lt;String&gt; tmpBookmakrs = new ArrayList&lt;String&gt;();\r\nint bkIndex = 0;\r\nfor (Run r : runs)\r\n{\r\n    // LayoutCollector and LayoutEnumerator does nto work with nodes in header/footer or in textboxes.\r\n    if (r.getAncestor(NodeType.HEADER_FOOTER) != null || r.getAncestor(NodeType.SHAPE) != null)\r\n        continue;\r\n\r\n    BookmarkStart start = new BookmarkStart(doc, &quot;r&quot; + bkIndex);\r\n    BookmarkEnd end = new BookmarkEnd(doc, start.getName());\r\n\r\n    r.getParentNode().insertBefore(start, r);\r\n    r.getParentNode().insertAfter(end, r);\r\n\r\n    tmpBookmakrs.add(start.getName());\r\n    bkIndex++;\r\n}\r\n\r\n// Now we can use collector and enumerator to get runs per line in MS Word document.\r\nLayoutCollector collector = new LayoutCollector(doc);\r\nLayoutEnumerator enumerator = new LayoutEnumerator(doc);\r\n\r\nObject currentLine = null;\r\nfor (String bkName : tmpBookmakrs)\r\n{\r\n    Bookmark bk = doc.getRange().getBookmarks().get(bkName);\r\n\r\n    enumerator.setCurrent(collector.getEntity(bk.getBookmarkStart()));\r\n    while (enumerator.getType() != LayoutEntityType.LINE)\r\n        enumerator.moveParent();\r\n\r\n    if (currentLine != enumerator.getCurrent())\r\n    {\r\n        currentLine = enumerator.getCurrent();\r\n\r\n        System.out.println();\r\n        System.out.println(&quot;-------=========Start Of Line=========-------&quot;);\r\n    }\r\n\r\n    if (bk.getBookmarkStart().getNextSibling().getNodeType() == NodeType.RUN)\r\n        System.out.print(((Run)bk.getBookmarkStart().getNextSibling()).getText());\r\n}\r\n```\r\n```java\r\nprivate static Run SplitRun(Run run, int position)\r\n{\r\n    Run afterRun = (Run)run.deepClone(true);\r\n    run.getParentNode().insertAfter(afterRun, run);\r\n    afterRun.setText(run.getText().substring(position));\r\n    run.setText(run.getText().substring(0, position));\r\n    return afterRun;\r\n}\r\n```\r\n\r\n  [1]: https://reference.aspose.com/words/java/com.aspose.words/layoutcollector/\r\n  [2]: https://reference.aspose.com/words/java/com.aspose.words/layoutenumerator/","title":"how can i get start line number of an element in word document using Aspose words library in java","body":"<p>As you know there is no concept of page or line in MS Word documents due to their flow nature. The consumer applications build document layout on the fly, the same does Aspose.Words using it's own layout engine. <a href=\"https://reference.aspose.com/words/java/com.aspose.words/layoutcollector/\" rel=\"nofollow noreferrer\"><code>LayoutCollector</code></a> and <a href=\"https://reference.aspose.com/words/java/com.aspose.words/layoutenumerator/\" rel=\"nofollow noreferrer\"><code>LayoutEnumerator</code></a> classes provides a limited access to document layout information. unfortunately, there is no direct way to get the line index of some node using these classes. However, you can get layout entity of <code>LayoutEntityType.LINE</code> type of a particular node. For example, the following code demonstrates the basic technique of splitting document content into lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\n\n// Split all Run nodes in the document to make them not more than one word.\nIterable&lt;Run&gt; runs = doc.getChildNodes(NodeType.RUN, true);\nfor (Run r : runs)\n{\n    Run current = r;\n    while (current.getText().indexOf(' ') &gt;= 0)\n        current = SplitRun(current, current.getText().indexOf(' ') + 1);\n}\n\n// Wrap all runs in the document with bookmarks to make it possible to work with LayoutCollector and LayoutEnumerator\nruns = doc.getChildNodes(NodeType.RUN, true);\n\nArrayList&lt;String&gt; tmpBookmakrs = new ArrayList&lt;String&gt;();\nint bkIndex = 0;\nfor (Run r : runs)\n{\n    // LayoutCollector and LayoutEnumerator does nto work with nodes in header/footer or in textboxes.\n    if (r.getAncestor(NodeType.HEADER_FOOTER) != null || r.getAncestor(NodeType.SHAPE) != null)\n        continue;\n\n    BookmarkStart start = new BookmarkStart(doc, &quot;r&quot; + bkIndex);\n    BookmarkEnd end = new BookmarkEnd(doc, start.getName());\n\n    r.getParentNode().insertBefore(start, r);\n    r.getParentNode().insertAfter(end, r);\n\n    tmpBookmakrs.add(start.getName());\n    bkIndex++;\n}\n\n// Now we can use collector and enumerator to get runs per line in MS Word document.\nLayoutCollector collector = new LayoutCollector(doc);\nLayoutEnumerator enumerator = new LayoutEnumerator(doc);\n\nObject currentLine = null;\nfor (String bkName : tmpBookmakrs)\n{\n    Bookmark bk = doc.getRange().getBookmarks().get(bkName);\n\n    enumerator.setCurrent(collector.getEntity(bk.getBookmarkStart()));\n    while (enumerator.getType() != LayoutEntityType.LINE)\n        enumerator.moveParent();\n\n    if (currentLine != enumerator.getCurrent())\n    {\n        currentLine = enumerator.getCurrent();\n\n        System.out.println();\n        System.out.println(&quot;-------=========Start Of Line=========-------&quot;);\n    }\n\n    if (bk.getBookmarkStart().getNextSibling().getNodeType() == NodeType.RUN)\n        System.out.print(((Run)bk.getBookmarkStart().getNextSibling()).getText());\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>private static Run SplitRun(Run run, int position)\n{\n    Run afterRun = (Run)run.deepClone(true);\n    run.getParentNode().insertAfter(afterRun, run);\n    afterRun.setText(run.getText().substring(position));\n    run.setText(run.getText().substring(0, position));\n    return afterRun;\n}\n</code></pre>\n"}],"owner":{"account_id":27071726,"reputation":303,"user_id":20622284,"display_name":"lemon chow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683013040,"creation_date":1683005591,"question_id":76151969,"body_markdown":"i am using NodeCollection and LayoutCollector to get text and start pagenumber:\r\n```java\r\nDocument doc = new Document(&quot;input.docx&quot;);\r\nLayoutCollector layoutCollector = new LayoutCollector(document);\r\nNodeCollection nodes = doc.getChildNodes(NodeType.ANY, true);\r\nfor (Node node : (Iterable&lt;Node&gt;)nodes)\r\n{\r\n    System.out.println(&quot;Start PageNumber : &quot; + layoutCollector.startPageIndex((node));\r\n    switch (node.getNodeType())\r\n    {\r\n        case NodeType.PARAGRAPH:\r\n            System.out.println(node.getText());\r\n            break;\r\n    }\r\n}\r\n```\r\nhere i want to get start line number of node along with page number. How can i achieve it ","title":"how can i get start line number of an element in word document using Aspose words library in java","body":"<p>i am using NodeCollection and LayoutCollector to get text and start pagenumber:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document doc = new Document(&quot;input.docx&quot;);\nLayoutCollector layoutCollector = new LayoutCollector(document);\nNodeCollection nodes = doc.getChildNodes(NodeType.ANY, true);\nfor (Node node : (Iterable&lt;Node&gt;)nodes)\n{\n    System.out.println(&quot;Start PageNumber : &quot; + layoutCollector.startPageIndex((node));\n    switch (node.getNodeType())\n    {\n        case NodeType.PARAGRAPH:\n            System.out.println(node.getText());\n            break;\n    }\n}\n</code></pre>\n<p>here i want to get start line number of node along with page number. How can i achieve it</p>\n"},{"tags":["java","jco","idoc","sapjco3"],"answers":[{"comments":[{"owner":{"account_id":1454033,"reputation":1777,"user_id":1800890,"accept_rate":71,"display_name":"Sudheera"},"score":0,"creation_date":1484235479,"post_id":41615026,"comment_id":70435638,"body_markdown":"edited: should be &#39;msg_server.exe&#39;. My services file is fine. How ever I could solve this issue by adding r ```rdisp/msserv = 3``` to  C:\\usr\\sap\\NSP\\SYS\\profile\\NSP_XXXXXX00_hostnam file. I&#39;m not sure why.","body":"edited: should be &#39;msg_server.exe&#39;. My services file is fine. How ever I could solve this issue by adding r <code>rdisp&#47;msserv = 3</code> to  C:\\usr\\sap\\NSP\\SYS\\profile\\NSP_XXXXXX00_hostnam file. I&#39;m not sure why."},{"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"score":0,"creation_date":1484244013,"post_id":41615026,"comment_id":70441277,"body_markdown":"`rdisp/msserv` specifies the message server service name at SAP system side. IMHO it should be set to the value `sapmsNSP`. I have doubts that your change has something to do with the previous error message. Maybe the value &#39;3&#39; is ignored and some default is used instead which results in using port 3600 now. Please check which port is configured for `sapmsNSP` in the services file on the SAP system host(s).","body":"<code>rdisp&#47;msserv</code> specifies the message server service name at SAP system side. IMHO it should be set to the value <code>sapmsNSP</code>. I have doubts that your change has something to do with the previous error message. Maybe the value &#39;3&#39; is ignored and some default is used instead which results in using port 3600 now. Please check which port is configured for <code>sapmsNSP</code> in the services file on the SAP system host(s)."}],"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484229437,"creation_date":1484229437,"answer_id":41615026,"question_id":41611687,"body_markdown":"The error message says that no running process on host 192.168.56.101 listens to the port 3600. This means that either the SAP message server process is listening to a different port or it is simply not running at all.\r\n\r\nIf you can do a group logon with an SAP GUI to the ABAP system NSP, your services file should be configured correctly. By the way, the SAP message server process is usually named msg_server.exe on Windows - not message_server.exe. If you changed your services file you should at least get a different error message at the DETAIL error message part showing the modified port number. Otherwise you failed to change the services file (not saved? no carriage return after the last line?) or you did not restart your JCo server program after changing the services file.","title":"JCo IDoc server cannot receive messages due to port issue","body":"<p>The error message says that no running process on host 192.168.56.101 listens to the port 3600. This means that either the SAP message server process is listening to a different port or it is simply not running at all.</p>\n\n<p>If you can do a group logon with an SAP GUI to the ABAP system NSP, your services file should be configured correctly. By the way, the SAP message server process is usually named msg_server.exe on Windows - not message_server.exe. If you changed your services file you should at least get a different error message at the DETAIL error message part showing the modified port number. Otherwise you failed to change the services file (not saved? no carriage return after the last line?) or you did not restart your JCo server program after changing the services file.</p>\n"}],"owner":{"account_id":1454033,"reputation":1777,"user_id":1800890,"accept_rate":71,"display_name":"Sudheera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1568,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683012873,"creation_date":1484219440,"question_id":41611687,"body_markdown":"I have a java based IDoc listening server which is built using JCo 3. When I started it and sent a IDoc from the sap system it gives me an exception in below trace.\r\n\r\nAs it says, I thought this is due to unavailability of message server and logged in to SAP machine and using `netstat` checked the opened ports.\r\n\r\nPort 3600 was not listening but port 7200 is reported to be opened by `msg_server.exe`. I have set my JCo server side machine&#39;s `/etc/services` file to `sapmsNSP\t3600/tcp` but even if I changed it to 7200 it gives me exception saying internal error.\r\n\r\nTrace:\r\n&gt; ```\r\n&gt;    com.sap.conn.idoc.IDocRuntimeException: Failed to resolve repository reference @MYDESTINATION\r\n&gt;    \tat com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer$IDocRepositoryMapBox$IDocRepositoryReference.getRepository(DefaultJCoIDocServer.java:245)\r\n&gt;    \tat com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer$IDocRepositoryMapBox.getRepository(DefaultJCoIDocServer.java:397)\r\n&gt;    \tat com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer.getIDocRepository(DefaultJCoIDocServer.java:128)\r\n&gt;    \tat com.sap.conn.idoc.jco.rt.DefaultJCoIDocServerWorker$IDocDispatcher.createIDocDocumentListArray(DefaultJCoIDocServerWorker.java:445)\r\n&gt;    \tat com.sap.conn.idoc.jco.rt.DefaultJCoIDocServerWorker$IDocDispatcher.handleRequest(DefaultJCoIDocServerWorker.java:209)\r\n&gt;    \tat com.sap.conn.jco.rt.DefaultServerWorker.dispatchRequest(DefaultServerWorker.java:148)\r\n&gt;    \tat com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.dispatchRequest(MiddlewareJavaRfc.java:3680)\r\n&gt;    \tat com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.executePlayback(MiddlewareJavaRfc.java:3158)\r\n&gt;    \tat com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.playbackTRfc(MiddlewareJavaRfc.java:2981)\r\n&gt;    \tat com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.handletRfcRequest(MiddlewareJavaRfc.java:2875)\r\n&gt;    \tat com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.listen(MiddlewareJavaRfc.java:2674)\r\n&gt;    \tat com.sap.conn.jco.rt.DefaultServerWorker.dispatch(DefaultServerWorker.java:275)\r\n&gt;    \tat com.sap.conn.jco.rt.DefaultServerWorker.loop(DefaultServerWorker.java:356)\r\n&gt;    \tat com.sap.conn.jco.rt.DefaultServerWorker.run(DefaultServerWorker.java:232)\r\n&gt;    \tat java.lang.Thread.run(Thread.java:745)\r\n&gt;    Caused by: com.sap.conn.jco.JCoException: (102) JCO_ERROR_COMMUNICATION: Connect to message server host failed\r\n&gt;    Connection parameters: TYPE=B DEST=MYDESTINATION MSHOST=192.168.56.101 R3NAME=NSP GROUP=PUBLIC PCS=1\r\n&gt;    \r\n&gt;    ERROR       partner &#39;192.168.56.101:sapmsNSP&#39; not reached\r\n&gt;    TIME        Thu Jan 12 16:19:21 2017\r\n&gt;    RELEASE     721\r\n&gt;    COMPONENT   NI (network interface)\r\n&gt;    VERSION     40\r\n&gt;    RC          -10\r\n&gt;    MODULE      nixxi.cpp\r\n&gt;    LINE        3283\r\n&gt;    DETAIL      NiPConnect2: 192.168.56.101:3600\r\n&gt;    SYSTEM CALL connect\r\n&gt;    ERRNO       61\r\n&gt;    ERRNO TEXT  Connection refused\r\n&gt;    COUNTER     1\r\n&gt; ```\r\n","title":"JCo IDoc server cannot receive messages due to port issue","body":"<p>I have a java based IDoc listening server which is built using JCo 3. When I started it and sent a IDoc from the sap system it gives me an exception in below trace.</p>\n<p>As it says, I thought this is due to unavailability of message server and logged in to SAP machine and using <code>netstat</code> checked the opened ports.</p>\n<p>Port 3600 was not listening but port 7200 is reported to be opened by <code>msg_server.exe</code>. I have set my JCo server side machine's <code>/etc/services</code> file to <code>sapmsNSP   3600/tcp</code> but even if I changed it to 7200 it gives me exception saying internal error.</p>\n<p>Trace:</p>\n<blockquote>\n<pre><code>   com.sap.conn.idoc.IDocRuntimeException: Failed to resolve repository reference @MYDESTINATION\n      at com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer$IDocRepositoryMapBox$IDocRepositoryReference.getRepository(DefaultJCoIDocServer.java:245)\n      at com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer$IDocRepositoryMapBox.getRepository(DefaultJCoIDocServer.java:397)\n      at com.sap.conn.idoc.jco.rt.DefaultJCoIDocServer.getIDocRepository(DefaultJCoIDocServer.java:128)\n      at com.sap.conn.idoc.jco.rt.DefaultJCoIDocServerWorker$IDocDispatcher.createIDocDocumentListArray(DefaultJCoIDocServerWorker.java:445)\n      at com.sap.conn.idoc.jco.rt.DefaultJCoIDocServerWorker$IDocDispatcher.handleRequest(DefaultJCoIDocServerWorker.java:209)\n      at com.sap.conn.jco.rt.DefaultServerWorker.dispatchRequest(DefaultServerWorker.java:148)\n      at com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.dispatchRequest(MiddlewareJavaRfc.java:3680)\n      at com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.executePlayback(MiddlewareJavaRfc.java:3158)\n      at com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.playbackTRfc(MiddlewareJavaRfc.java:2981)\n      at com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.handletRfcRequest(MiddlewareJavaRfc.java:2875)\n      at com.sap.conn.jco.rt.MiddlewareJavaRfc$JavaRfcServer.listen(MiddlewareJavaRfc.java:2674)\n      at com.sap.conn.jco.rt.DefaultServerWorker.dispatch(DefaultServerWorker.java:275)\n      at com.sap.conn.jco.rt.DefaultServerWorker.loop(DefaultServerWorker.java:356)\n      at com.sap.conn.jco.rt.DefaultServerWorker.run(DefaultServerWorker.java:232)\n      at java.lang.Thread.run(Thread.java:745)\n   Caused by: com.sap.conn.jco.JCoException: (102) JCO_ERROR_COMMUNICATION: Connect to message server host failed\n   Connection parameters: TYPE=B DEST=MYDESTINATION MSHOST=192.168.56.101 R3NAME=NSP GROUP=PUBLIC PCS=1\n   \n   ERROR       partner '192.168.56.101:sapmsNSP' not reached\n   TIME        Thu Jan 12 16:19:21 2017\n   RELEASE     721\n   COMPONENT   NI (network interface)\n   VERSION     40\n   RC          -10\n   MODULE      nixxi.cpp\n   LINE        3283\n   DETAIL      NiPConnect2: 192.168.56.101:3600\n   SYSTEM CALL connect\n   ERRNO       61\n   ERRNO TEXT  Connection refused\n   COUNTER     1\n</code></pre>\n</blockquote>\n"},{"tags":["java","eclipse","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494365966,"creation_date":1494365966,"answer_id":43880291,"question_id":43865600,"body_markdown":"You have to put the name of your destination into    `JCoDestinationManager.getDestination(&quot;YourDestName&quot;)`. If using the default JCo infrastructure implementations, then you need to create a property text file named `YourDestName.jcoDestination` in the current working directory. This file must contain all your logon parameters like `jco.client.ashost=hostname.in.your.domain`. Valid and required properties are described in the JavaDoc of interface `com.sap.conn.jco.ext.DestinationDataProvider`.","title":"JCO_ERROR_RESOURCE: Destination does not exist","body":"<p>You have to put the name of your destination into    <code>JCoDestinationManager.getDestination(\"YourDestName\")</code>. If using the default JCo infrastructure implementations, then you need to create a property text file named <code>YourDestName.jcoDestination</code> in the current working directory. This file must contain all your logon parameters like <code>jco.client.ashost=hostname.in.your.domain</code>. Valid and required properties are described in the JavaDoc of interface <code>com.sap.conn.jco.ext.DestinationDataProvider</code>.</p>\n"}],"owner":{"account_id":10067843,"reputation":1,"user_id":7442460,"display_name":"Mihir Rupapara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4526,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683012663,"creation_date":1494320775,"question_id":43865600,"body_markdown":"I am using below Java code for SAP connectivity and I don&#39;t know what to put into `getDestination()` method. Please guide me how to find value of destination or what to put into it?\r\n\r\n   ```java\r\n    createDestinationDataFile(&quot;ABAP_AS_WITHOUT_POOLs&quot;, connectProperties);\r\n    try {\r\n                JCoDestination destination = JCoDestinationManager.getDestination(&quot;**********&quot;);\t\t//Doubt\r\n                System.out.println(&quot;Attributes:&quot;);\r\n                System.out.println(destination.getAttributes());\r\n                destination.ping();\r\n            } catch (JCoException e) {\r\n                e.printStackTrace();\r\n            }\r\n   ```\r\n","title":"JCO_ERROR_RESOURCE: Destination does not exist","body":"<p>I am using below Java code for SAP connectivity and I don't know what to put into <code>getDestination()</code> method. Please guide me how to find value of destination or what to put into it?</p>\n<pre class=\"lang-java prettyprint-override\"><code> createDestinationDataFile(&quot;ABAP_AS_WITHOUT_POOLs&quot;, connectProperties);\n try {\n             JCoDestination destination = JCoDestinationManager.getDestination(&quot;**********&quot;);        //Doubt\n             System.out.println(&quot;Attributes:&quot;);\n             System.out.println(destination.getAttributes());\n             destination.ping();\n         } catch (JCoException e) {\n             e.printStackTrace();\n         }\n</code></pre>\n"},{"tags":["java","eclipse","sapjco3"],"comments":[{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":1,"creation_date":1494438739,"post_id":43897417,"comment_id":74832923,"body_markdown":"What exactly is the problem? &quot;It&#39;s not working&quot; is not an accurate problem description.","body":"What exactly is the problem? &quot;It&#39;s not working&quot; is not an accurate problem description."},{"owner":{"account_id":3186035,"reputation":373,"user_id":2691625,"display_name":"Ardeshana Milan"},"score":1,"creation_date":1494444521,"post_id":43897417,"comment_id":74836309,"body_markdown":"Please check http://stackoverflow.com/help/mcve","body":"Please check <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"},{"owner":{"account_id":10067843,"reputation":1,"user_id":7442460,"display_name":"Mihir Rupapara"},"score":0,"creation_date":1494487740,"post_id":43897417,"comment_id":74851456,"body_markdown":"Giving this Exception: com.sap.conn.jco.AbapException: (126) TABLE_NOT_AVAILABLE: TABLE_NOT_AVAILABLE Message 300 of class DA type E..........@vwegert","body":"Giving this Exception: com.sap.conn.jco.AbapException: (126) TABLE_NOT_AVAILABLE: TABLE_NOT_AVAILABLE Message 300 of class DA type E..........@vwegert"},{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":1,"creation_date":1494488988,"post_id":43897417,"comment_id":74852305,"body_markdown":"Small wonder, since you are calling the function module without specifying a table...","body":"Small wonder, since you are calling the function module without specifying a table..."},{"owner":{"account_id":10067843,"reputation":1,"user_id":7442460,"display_name":"Mihir Rupapara"},"score":0,"creation_date":1494498575,"post_id":43897417,"comment_id":74858924,"body_markdown":"destination = JCoDestinationManager.getDestination(&quot;ABAP_AS_WITH_POOL&quot;);\n        JCoFunction function = destination.getRepository().getFunction(&quot;RFC_READ_TABLE&quot;);   \n        function.execute(destination); // This line of code is throwing error            \n                                                                                             \n                                                                                             \nJCoStructure returnStructure = function.getExportParameterList().getStructure(&quot;RETURN&quot;);       .............@vwegert Thanks...","body":"destination = JCoDestinationManager.getDestination(&quot;ABAP_AS_WITH_POOL&quot;);         JCoFunction function = destination.getRepository().getFunction(&quot;RFC_READ_TABLE&quot;);            function.execute(destination); // This line of code is throwing error                                                                                                                                                                                                         JCoStructure returnStructure = function.getExportParameterList().getStructure(&quot;RETURN&quot;);       .............@vwegert Thanks..."}],"owner":{"account_id":10067843,"reputation":1,"user_id":7442460,"display_name":"Mihir Rupapara"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":557,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683012414,"creation_date":1494431631,"question_id":43897417,"body_markdown":"I am using `RFC_READ_TABLE` function to retrieve list of tables:\r\n\r\n```java\r\ndestination = JCoDestinationManager.getDestination(&quot;ABAP_AS_WITH_POOL&quot;);\r\nJCoFunction function = destination.getRepository().getFunction(&quot;RFC_READ_TABLE&quot;);\r\nfunction.execute(destination); // This line of code is throwing error\r\nJCoStructure returnStructure = function.getExportParameterList().getStructure(&quot;RETURN&quot;);\r\n```\r\n\r\nBut it&#39;s returning me null value, could you help me?\r\n\r\nGiving this Exception:\r\n&gt; com.sap.conn.jco.AbapException: (126) TABLE_NOT_AVAILABLE: TABLE_NOT_AVAILABLE Message 300 of class DA type E\r\n\r\nComplete code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EcKlR.png\r\n","title":"RFC_READ_TABLE returns NULL","body":"<p>I am using <code>RFC_READ_TABLE</code> function to retrieve list of tables:</p>\n<pre class=\"lang-java prettyprint-override\"><code>destination = JCoDestinationManager.getDestination(&quot;ABAP_AS_WITH_POOL&quot;);\nJCoFunction function = destination.getRepository().getFunction(&quot;RFC_READ_TABLE&quot;);\nfunction.execute(destination); // This line of code is throwing error\nJCoStructure returnStructure = function.getExportParameterList().getStructure(&quot;RETURN&quot;);\n</code></pre>\n<p>But it's returning me null value, could you help me?</p>\n<p>Giving this Exception:</p>\n<blockquote>\n<p>com.sap.conn.jco.AbapException: (126) TABLE_NOT_AVAILABLE: TABLE_NOT_AVAILABLE Message 300 of class DA type E</p>\n</blockquote>\n<p>Complete code:</p>\n<p><a href=\"https://i.stack.imgur.com/EcKlR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EcKlR.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","datetime"],"comments":[{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":3,"creation_date":1492546612,"post_id":43481389,"comment_id":74018677,"body_markdown":"A `Date` object is not immutable. It has `setHours()/setMinutes()`, etc. I&#39;d suggest looking at the Javadocs for Date.","body":"A <code>Date</code> object is not immutable. It has <code>setHours()&#47;setMinutes()</code>, etc. I&#39;d suggest looking at the Javadocs for Date."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1492546739,"post_id":43481389,"comment_id":74018742,"body_markdown":"@KevinO &quot;It has setHours()/setMinutes(), etc&quot; [which have been deprecated since Java 1.1](https://docs.oracle.com/javase/7/docs/api/java/util/Date.html#setHours(int)).","body":"@KevinO &quot;It has setHours()/setMinutes(), etc&quot; <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Date.html#setHours(int)\" rel=\"nofollow noreferrer\">which have been deprecated since Java 1.1</a>."},{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":1,"creation_date":1492546884,"post_id":43481389,"comment_id":74018816,"body_markdown":"@AndyTurner, true enough, but doesn&#39;t mean the approach won&#39;t address the particular question. Heck, I&#39;d argue using a `Date` object itself is mostly deprecated at this point. One can go through other gyrations if desired, using Calendar, or LocalDateTime if so desired. But the question as stated may be directly addressed using the deprecated methods.","body":"@AndyTurner, true enough, but doesn&#39;t mean the approach won&#39;t address the particular question. Heck, I&#39;d argue using a <code>Date</code> object itself is mostly deprecated at this point. One can go through other gyrations if desired, using Calendar, or LocalDateTime if so desired. But the question as stated may be directly addressed using the deprecated methods."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1492547995,"post_id":43481389,"comment_id":74019461,"body_markdown":"@KevinO Just because you *can* do it using deprecated methods doesn’t mean it’s good advice.","body":"@KevinO Just because you <i>can</i> do it using deprecated methods doesn’t mean it’s good advice."}],"answers":[{"comments":[{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":0,"creation_date":1492548955,"post_id":43481724,"comment_id":74020020,"body_markdown":"A perfectly good solution as long as the OP does not require a `Date` object. The OP&#39;s question, as written, specifically indicates Date.","body":"A perfectly good solution as long as the OP does not require a <code>Date</code> object. The OP&#39;s question, as written, specifically indicates Date."},{"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"score":0,"creation_date":1492549004,"post_id":43481724,"comment_id":74020060,"body_markdown":"@KevinO with Date he can do `Date.toInstant()` and replace the Instant.now()","body":"@KevinO with Date he can do <code>Date.toInstant()</code> and replace the Instant.now()"},{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":0,"creation_date":1492550260,"post_id":43481724,"comment_id":74020705,"body_markdown":"&quot;Work with&quot; is not equivalent to limited to. In other words, if the OP *can* use objects other than just a `Date` object, the approach is fine. If the OP *cannot* use other objects, this approach doesn&#39;t answer the question. I think the solution is great, and a good reference, but it may not directly answer the question.","body":"&quot;Work with&quot; is not equivalent to limited to. In other words, if the OP <i>can</i> use objects other than just a <code>Date</code> object, the approach is fine. If the OP <i>cannot</i> use other objects, this approach doesn&#39;t answer the question. I think the solution is great, and a good reference, but it may not directly answer the question."},{"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"score":0,"creation_date":1492550429,"post_id":43481724,"comment_id":74020787,"body_markdown":"@KevinO I agree with you, if he can only use Date then you already answered the question, use the deprecated setHours and setMinutes. If he is able to use other objects then he can use this solution.","body":"@KevinO I agree with you, if he can only use Date then you already answered the question, use the deprecated setHours and setMinutes. If he is able to use other objects then he can use this solution."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1492551211,"post_id":43481724,"comment_id":74021121,"body_markdown":"A `LocalDateTime` object purposely has no time zone nor any offset. So you are throwing away valuable information. Teaching the use of `OffsetDateTime` here is more appropriate.","body":"A <code>LocalDateTime</code> object purposely has no time zone nor any offset. So you are throwing away valuable information. Teaching the use of <code>OffsetDateTime</code> here is more appropriate."},{"owner":{"account_id":8657163,"reputation":75,"user_id":6481042,"accept_rate":83,"display_name":"JavaPassion"},"score":0,"creation_date":1492554990,"post_id":43481724,"comment_id":74022555,"body_markdown":"I am using localDateTime1.withTime(localDateTime.getHourOfDay(), localDateTime.getMinuteOfHour(), localDateTime.getSecondOfMinute(), 000); So it should get the hour, min and sec from localDateTime and set it to localDateTime1 right? but i don&#39;t see it is setting it correctly on localDateTime1.","body":"I am using localDateTime1.withTime(localDateTime.getHourOfDay(), localDateTime.getMinuteOfHour(), localDateTime.getSecondOfMinute(), 000); So it should get the hour, min and sec from localDateTime and set it to localDateTime1 right? but i don&#39;t see it is setting it correctly on localDateTime1."}],"tags":[],"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1492549011,"creation_date":1492547703,"answer_id":43481724,"question_id":43481389,"body_markdown":"Using Java 8 you can do the following \r\n\r\n    LocalDateTime oldDate = LocalDateTime.ofInstant(Instant.now(), ZoneOffset.UTC);\r\n\r\n    // Thread.sleep(2000);\r\n\r\n    LocalDateTime replaced = LocalDateTime.ofInstant(Instant.now(), ZoneOffset.UTC)\r\n                                 .withHour(oldDate.getHour())\r\n                                 .withMinute(oldDate.getMinute())\r\n                                 .withSecond(oldDate.getSecond())\r\n                                 .withNano(oldDate.getNano());\r\n\r\n        System.out.printf(&quot;Old date: %s  Replaced date: %s&quot;, oldDate, replaced);\r\n\r\n\r\n**Note** \r\n\r\nIf you need to work with `Date` objects, you can\r\n\r\n    dateObject.toInstant();\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--\r\n\r\nThis example uses Instant.now() so it is easy to test. If you uncomment line with the `Thread.sleep()` you will see the dates that are printed out will be the same even though the sleep would have caused the dates to be different.\r\n\r\n","title":"Replace Time Part in Date Object in Java","body":"<p>Using Java 8 you can do the following </p>\n\n<pre><code>LocalDateTime oldDate = LocalDateTime.ofInstant(Instant.now(), ZoneOffset.UTC);\n\n// Thread.sleep(2000);\n\nLocalDateTime replaced = LocalDateTime.ofInstant(Instant.now(), ZoneOffset.UTC)\n                             .withHour(oldDate.getHour())\n                             .withMinute(oldDate.getMinute())\n                             .withSecond(oldDate.getSecond())\n                             .withNano(oldDate.getNano());\n\n    System.out.printf(\"Old date: %s  Replaced date: %s\", oldDate, replaced);\n</code></pre>\n\n<p><strong>Note</strong> </p>\n\n<p>If you need to work with <code>Date</code> objects, you can</p>\n\n<pre><code>dateObject.toInstant();\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--</a></p>\n\n<p>This example uses Instant.now() so it is easy to test. If you uncomment line with the <code>Thread.sleep()</code> you will see the dates that are printed out will be the same even though the sleep would have caused the dates to be different.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492556331,"creation_date":1492551009,"answer_id":43482532,"question_id":43481389,"body_markdown":"Do you realize that `java.util.Date` objects are always in UTC? So you won&#39;t be trading time-of-day in Montr&#233;al or Kolkata. If UTC is what you want, read on, else edit your Question.\n\nAvoid the troublesome old legacy date-time classes, now supplanted by the java.time classes. The `java.util.Date` class is replaced by `Instant` as a point on the timeline in UTC.\n\n    Instant instantNew = newUtilDate.toInstant();\n    Instant instantOld = oldUtilDate.toInstant();\n\nConvert to `OffsetDateTime` objects to enable working with parts. \n\n    OffsetDateTime odtNew = instantNew.atOffset( ZoneOffset.UTC );\n    OffsetDateTime odtOld = instantOld.atOffset( ZoneOffset.UTC );\n\nNow you can extract the date portion or the time-of-day portion and intermix.\n\n    LocalDate ld = odtNew.toLocalDate() ;\n    LocalTime lt = odtOld.toLocalTime() ;\n    OffsetDateTime odtMix = OffsetDateTime.of( ld , lt , ZoneOffset.UTC );\n\nBest to avoid the legacy classes. But if you really need a `java.util.Date` as your result, extract an `Instant` and convert.\n\n    java.util.Date d = java.util.Date.from( odtMix.toInstant() );","title":"Replace Time Part in Date Object in Java","body":"<p>Do you realize that <code>java.util.Date</code> objects are always in UTC? So you won't be trading time-of-day in Montréal or Kolkata. If UTC is what you want, read on, else edit your Question.</p>\n\n<p>Avoid the troublesome old legacy date-time classes, now supplanted by the java.time classes. The <code>java.util.Date</code> class is replaced by <code>Instant</code> as a point on the timeline in UTC.</p>\n\n<pre><code>Instant instantNew = newUtilDate.toInstant();\nInstant instantOld = oldUtilDate.toInstant();\n</code></pre>\n\n<p>Convert to <code>OffsetDateTime</code> objects to enable working with parts. </p>\n\n<pre><code>OffsetDateTime odtNew = instantNew.atOffset( ZoneOffset.UTC );\nOffsetDateTime odtOld = instantOld.atOffset( ZoneOffset.UTC );\n</code></pre>\n\n<p>Now you can extract the date portion or the time-of-day portion and intermix.</p>\n\n<pre><code>LocalDate ld = odtNew.toLocalDate() ;\nLocalTime lt = odtOld.toLocalTime() ;\nOffsetDateTime odtMix = OffsetDateTime.of( ld , lt , ZoneOffset.UTC );\n</code></pre>\n\n<p>Best to avoid the legacy classes. But if you really need a <code>java.util.Date</code> as your result, extract an <code>Instant</code> and convert.</p>\n\n<pre><code>java.util.Date d = java.util.Date.from( odtMix.toInstant() );\n</code></pre>\n"}],"owner":{"account_id":8657163,"reputation":75,"user_id":6481042,"accept_rate":83,"display_name":"JavaPassion"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1762,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":43481724,"answer_count":2,"score":0,"last_activity_date":1683012156,"creation_date":1492546432,"question_id":43481389,"body_markdown":"I have two date objects and I have to replace just the time part on the `newTimestamp` date object with the time in `oldTimestamp` date object:\r\n\r\n    Date oldTimestamp = new Date();\r\n    Date newTimestamp = new Date();\r\n\r\nI am using \r\n\r\n    newTimestamp.withTime(oldTimestamp.getHourOfDay(), oldTimestamp.getMinuteOfHour(), oldTimestamp.getSecondOfMinute(), 000);\r\n\r\n \r\nSo it should get the hour, min, and sec from oldTimestamp and set it to newTimestamp right? but I don&#39;t see it setting it correctly on `newTimestamp`.","title":"Replace Time Part in Date Object in Java","body":"<p>I have two date objects and I have to replace just the time part on the <code>newTimestamp</code> date object with the time in <code>oldTimestamp</code> date object:</p>\n<pre><code>Date oldTimestamp = new Date();\nDate newTimestamp = new Date();\n</code></pre>\n<p>I am using</p>\n<pre><code>newTimestamp.withTime(oldTimestamp.getHourOfDay(), oldTimestamp.getMinuteOfHour(), oldTimestamp.getSecondOfMinute(), 000);\n</code></pre>\n<p>So it should get the hour, min, and sec from oldTimestamp and set it to newTimestamp right? but I don't see it setting it correctly on <code>newTimestamp</code>.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9762,"page":463,"page_size":100}
