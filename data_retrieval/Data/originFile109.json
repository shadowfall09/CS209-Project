{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1698070288,"post_id":77343757,"comment_id":136355114,"body_markdown":"Questions like this do better on [codereview.se]. At least I would hope so, but you&#39;ve already gotten two answers to this off-topic (on SO) question :-(","body":"Questions like this do better on <a href=\"https://codereview.stackexchange.com\">Code Review</a>. At least I would hope so, but you&#39;ve already gotten two answers to this off-topic (on SO) question :-("}],"answers":[{"tags":[],"owner":{"account_id":11733063,"reputation":156,"user_id":8587847,"display_name":"Md Alif Al Amin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698052273,"creation_date":1698052273,"answer_id":77343969,"question_id":77343757,"body_markdown":"Using a static menu is not wrong but if you want more controls on each of the options, Then I will suggest you to write your own menu class. here is a sample class what you can expect: \r\n\r\n    public class Menu {\r\n        private String[] menuOptions;\r\n        private Scanner input;\r\n        private boolean quitProgram;\r\n    \r\n        public Menu(String[] menuOptions, Scanner input) {\r\n            this.menuOptions = menuOptions;\r\n            this.input = input;\r\n        }\r\n    \r\n        public void runMenu() {\r\n            do {\r\n                for (String option : menuOptions) {\r\n                    System.out.println(option);\r\n                }\r\n                System.out.print(&quot;Enter an option: &quot;);\r\n                int choice = input.nextInt();\r\n                input.nextLine();  // Consume the newline character\r\n                processOption(choice);\r\n            } while (!quitProgram);\r\n        }\r\n    \r\n        private void processOption(int choice) {\r\n            // Logic to handle the chosen option\r\n        }\r\n    }\r\nhere are some suggestions,\r\nyour code is not well-separated. The Menu class combines the responsibilities of displaying menus, handling user input, and controlling program flow. It&#39;s generally a good practice to separate these concerns.\r\n\r\n 1. Displaying menus could be separated into a dedicated UI class.\r\n 2. Handling user input could be moved to a separate input-handling class. \r\n 3. The Menu class should primarily focus on controlling the flow of the\r\n    program based on user input.\r\n\r\nBy separating these concerns, you make the code more modular, maintainable, and easier to extend. \r\n\r\nHope it helps :)\r\n","title":"Practices for implementing a Menu class in Java","body":"<p>Using a static menu is not wrong but if you want more controls on each of the options, Then I will suggest you to write your own menu class. here is a sample class what you can expect:</p>\n<pre><code>public class Menu {\n    private String[] menuOptions;\n    private Scanner input;\n    private boolean quitProgram;\n\n    public Menu(String[] menuOptions, Scanner input) {\n        this.menuOptions = menuOptions;\n        this.input = input;\n    }\n\n    public void runMenu() {\n        do {\n            for (String option : menuOptions) {\n                System.out.println(option);\n            }\n            System.out.print(&quot;Enter an option: &quot;);\n            int choice = input.nextInt();\n            input.nextLine();  // Consume the newline character\n            processOption(choice);\n        } while (!quitProgram);\n    }\n\n    private void processOption(int choice) {\n        // Logic to handle the chosen option\n    }\n}\n</code></pre>\n<p>here are some suggestions,\nyour code is not well-separated. The Menu class combines the responsibilities of displaying menus, handling user input, and controlling program flow. It's generally a good practice to separate these concerns.</p>\n<ol>\n<li>Displaying menus could be separated into a dedicated UI class.</li>\n<li>Handling user input could be moved to a separate input-handling class.</li>\n<li>The Menu class should primarily focus on controlling the flow of the\nprogram based on user input.</li>\n</ol>\n<p>By separating these concerns, you make the code more modular, maintainable, and easier to extend.</p>\n<p>Hope it helps :)</p>\n"}],"owner":{"account_id":29313591,"reputation":19,"user_id":22458828,"display_name":"Kerem Tazedal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1698078207,"answer_count":1,"score":-1,"last_activity_date":1698052273,"creation_date":1698050242,"question_id":77343757,"body_markdown":"I&#39;m working on a Java program where I have implemented a Menu class with static methods to manage menu options. Is this considered a good practice in Java programming? Here&#39;s my code:\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.InputMismatchException;\r\nimport java.util.Scanner;\r\n\r\npublic class Menu {\r\n    public static Scanner input = new Scanner(System.in);\r\n    public static boolean quitProgram = false;\r\n\r\n    static String[] customerMenuOptions = {&quot;\\n1. Search the catalog.&quot;,\r\n            &quot;2. Browse the catalog.&quot;,\r\n            &quot;3. Log in as Administrator.&quot;,\r\n            &quot;4. Exit the program&quot;};\r\n    static String[] employeeMenuOptions = {&quot;\\n1. Add a product.&quot;,\r\n            &quot;2. Search the catalog.&quot;,\r\n            &quot;3. Browse the catalog.&quot;,\r\n            &quot;4. Remove a product.&quot;,\r\n            &quot;5. Exit the program&quot;};\r\n    static String[] catalogOptions = {&quot;1. Browse the catalog.&quot;,\r\n            &quot;2. Search the catalog.&quot;,\r\n            &quot;3. Go back to the main menu.&quot;};\r\n\r\n    public static void menu(String[] args) {\r\n\r\n    }\r\n\r\n    public static void showIntroduction() {\r\n        System.out.println(&quot;Welcome to the Fruit and Vegetable program.&quot;);\r\n        System.out.print(&quot;Please enter any key to continue to the meny.&quot;);\r\n        String employeeInput = input.nextLine();\r\n    }\r\n\r\n    public static void runCustomerInterface() {\r\n        do {\r\n            for (String listOfMenuOptions : customerMenuOptions) {\r\n                System.out.println(listOfMenuOptions);\r\n            }\r\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\r\n\r\n            try {\r\n                customerMenu();\r\n\r\n            } catch (InputMismatchException e) {\r\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\r\n                input.nextLine();\r\n            }\r\n\r\n        } while (!quitProgram);\r\n    }\r\n\r\n    public static void customerMenu() {\r\n        int employeeInput = input.nextInt();\r\n        input.nextLine();\r\n\r\n        switch (employeeInput) {\r\n            case 1 -&gt; Catalog.searchTheCatalog();\r\n            case 2 -&gt; Catalog.browseTheCatalog();\r\n            case 3 -&gt; logInAsAdmin();\r\n            case 4 -&gt; quitProgram = true;\r\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\r\n        }\r\n    }\r\n\r\n    public static void runAdminInterface() {\r\n        do {\r\n            for (String listOfMenuOptions : employeeMenuOptions) {\r\n                System.out.println(listOfMenuOptions);\r\n            }\r\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\r\n\r\n            try {\r\n                employeeMenu();\r\n\r\n            } catch (InputMismatchException e) {\r\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\r\n                input.nextLine();\r\n            }\r\n\r\n        } while (!quitProgram);\r\n    }\r\n\r\n    private static void logInAsAdmin() {\r\n        File userNames = new File(&quot;usernames.txt&quot;);\r\n        File passwords = new File(&quot;passwords.txt&quot;);\r\n\r\n        System.out.println(&quot;\\nWelcome to the login menu.&quot;);\r\n        System.out.print(&quot;Please enter username: &quot;);\r\n        String username = input.nextLine();\r\n        System.out.print(&quot;Please enter password: &quot;);\r\n        String password = input.nextLine();\r\n\r\n        try {\r\n            Scanner userNamesFile = new Scanner(userNames);\r\n            Scanner userPasswordFile = new Scanner(passwords);\r\n            while (userNamesFile.hasNext() &amp;&amp; userPasswordFile.hasNext()) {\r\n                String userExist = userNamesFile.nextLine();\r\n                String passExist = userPasswordFile.nextLine();\r\n                if (userExist.equals(username) &amp;&amp; passExist.equals(password)) {\r\n                    System.out.print(&quot;\\nWelcome to the employee platform.&quot;);\r\n                    runAdminInterface();\r\n                }\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;File not found&quot;);\r\n        }\r\n    }\r\n\r\n    public static void printQuitProgramMessage() {\r\n        System.out.println(&quot;\\nThank you for using the Fruit and Vegetable program.&quot;);\r\n        System.out.println(&quot;All credit goes to Kerem Incorporated.&quot;);\r\n    }\r\n\r\n    public static void employeeMenu() {\r\n        int employeeInput = input.nextInt();\r\n        input.nextLine();\r\n\r\n        switch (employeeInput) {\r\n            case 1 -&gt; Catalog.addFruitOrVegetableToCatalog();\r\n            case 2 -&gt; Catalog.searchTheCatalog();\r\n            case 3 -&gt; Catalog.browseTheCatalog();\r\n            case 4 -&gt; Catalog.removeProduct();\r\n            case 5 -&gt; quitProgram = true;\r\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nMy primary concerns are:\r\n\r\nObject-Oriented Approach: Is it a best practice to use static methods for a Menu class in Java? I&#39;ve heard that Java is an object-oriented language, and I&#39;m wondering if there&#39;s a more object-oriented way to implement the menu.\r\n\r\nSeparation of Concerns: Is this code maintaining a clean separation of concerns? Right now, my Menu class is responsible for displaying menus, handling user input, and directing control flow to different parts of the program. \r\n\r\nI appreciate any insights or suggestions on improving this code structure.","title":"Practices for implementing a Menu class in Java","body":"<p>I'm working on a Java program where I have implemented a Menu class with static methods to manage menu options. Is this considered a good practice in Java programming? Here's my code:</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.InputMismatchException;\nimport java.util.Scanner;\n\npublic class Menu {\n    public static Scanner input = new Scanner(System.in);\n    public static boolean quitProgram = false;\n\n    static String[] customerMenuOptions = {&quot;\\n1. Search the catalog.&quot;,\n            &quot;2. Browse the catalog.&quot;,\n            &quot;3. Log in as Administrator.&quot;,\n            &quot;4. Exit the program&quot;};\n    static String[] employeeMenuOptions = {&quot;\\n1. Add a product.&quot;,\n            &quot;2. Search the catalog.&quot;,\n            &quot;3. Browse the catalog.&quot;,\n            &quot;4. Remove a product.&quot;,\n            &quot;5. Exit the program&quot;};\n    static String[] catalogOptions = {&quot;1. Browse the catalog.&quot;,\n            &quot;2. Search the catalog.&quot;,\n            &quot;3. Go back to the main menu.&quot;};\n\n    public static void menu(String[] args) {\n\n    }\n\n    public static void showIntroduction() {\n        System.out.println(&quot;Welcome to the Fruit and Vegetable program.&quot;);\n        System.out.print(&quot;Please enter any key to continue to the meny.&quot;);\n        String employeeInput = input.nextLine();\n    }\n\n    public static void runCustomerInterface() {\n        do {\n            for (String listOfMenuOptions : customerMenuOptions) {\n                System.out.println(listOfMenuOptions);\n            }\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\n\n            try {\n                customerMenu();\n\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\n                input.nextLine();\n            }\n\n        } while (!quitProgram);\n    }\n\n    public static void customerMenu() {\n        int employeeInput = input.nextInt();\n        input.nextLine();\n\n        switch (employeeInput) {\n            case 1 -&gt; Catalog.searchTheCatalog();\n            case 2 -&gt; Catalog.browseTheCatalog();\n            case 3 -&gt; logInAsAdmin();\n            case 4 -&gt; quitProgram = true;\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\n        }\n    }\n\n    public static void runAdminInterface() {\n        do {\n            for (String listOfMenuOptions : employeeMenuOptions) {\n                System.out.println(listOfMenuOptions);\n            }\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\n\n            try {\n                employeeMenu();\n\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\n                input.nextLine();\n            }\n\n        } while (!quitProgram);\n    }\n\n    private static void logInAsAdmin() {\n        File userNames = new File(&quot;usernames.txt&quot;);\n        File passwords = new File(&quot;passwords.txt&quot;);\n\n        System.out.println(&quot;\\nWelcome to the login menu.&quot;);\n        System.out.print(&quot;Please enter username: &quot;);\n        String username = input.nextLine();\n        System.out.print(&quot;Please enter password: &quot;);\n        String password = input.nextLine();\n\n        try {\n            Scanner userNamesFile = new Scanner(userNames);\n            Scanner userPasswordFile = new Scanner(passwords);\n            while (userNamesFile.hasNext() &amp;&amp; userPasswordFile.hasNext()) {\n                String userExist = userNamesFile.nextLine();\n                String passExist = userPasswordFile.nextLine();\n                if (userExist.equals(username) &amp;&amp; passExist.equals(password)) {\n                    System.out.print(&quot;\\nWelcome to the employee platform.&quot;);\n                    runAdminInterface();\n                }\n            }\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;File not found&quot;);\n        }\n    }\n\n    public static void printQuitProgramMessage() {\n        System.out.println(&quot;\\nThank you for using the Fruit and Vegetable program.&quot;);\n        System.out.println(&quot;All credit goes to Kerem Incorporated.&quot;);\n    }\n\n    public static void employeeMenu() {\n        int employeeInput = input.nextInt();\n        input.nextLine();\n\n        switch (employeeInput) {\n            case 1 -&gt; Catalog.addFruitOrVegetableToCatalog();\n            case 2 -&gt; Catalog.searchTheCatalog();\n            case 3 -&gt; Catalog.browseTheCatalog();\n            case 4 -&gt; Catalog.removeProduct();\n            case 5 -&gt; quitProgram = true;\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\n        }\n    }\n}\n</code></pre>\n<p>My primary concerns are:</p>\n<p>Object-Oriented Approach: Is it a best practice to use static methods for a Menu class in Java? I've heard that Java is an object-oriented language, and I'm wondering if there's a more object-oriented way to implement the menu.</p>\n<p>Separation of Concerns: Is this code maintaining a clean separation of concerns? Right now, my Menu class is responsible for displaying menus, handling user input, and directing control flow to different parts of the program.</p>\n<p>I appreciate any insights or suggestions on improving this code structure.</p>\n"},{"tags":["java","spring-boot","ssl","tomcat","sslcontext-kickstart"],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698052112,"creation_date":1697708816,"question_id":77322685,"body_markdown":"I am trying to configure the ssl configuration of a spring boot with a tomcat embedded server. Spring Boot is by default provided with a tomcat. SSL can be configured with the application properties such as keystore path, truststore path etc. I don&#39;t want to configure it with properties, so I just want to configure it programatically. I have developed my [own ssl library][1] which I want to use as it has couple of additional feature which I need use. In the past I attempted to configure it but failed, so I switch to either using spring boot with jetty or netty to configure my server ssl programatically. However it was still in my mind to give it another try. Today I am still failing to configure it programatically, maybe someone can help me out.\r\n\r\nMy stacktrace is:\r\n```\r\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)\r\n\tat org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:43)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)\r\n\t... 14 more\r\nCaused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\r\n\tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:238)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:282)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:213)\r\n\t... 16 more\r\nCaused by: org.apache.catalina.LifecycleException: Protocol handler start failed\r\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1077)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:234)\r\n\t... 18 more\r\nCaused by: java.lang.IllegalArgumentException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:107)\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71)\r\n\tat org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:235)\r\n\tat org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1227)\r\n\tat org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1313)\r\n\tat org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:617)\r\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1074)\r\n\t... 20 more\r\nCaused by: java.io.IOException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\r\n\tat org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:312)\r\n\tat org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247)\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:105)\r\n\t... 26 more\r\n```\r\n\r\nMy code looks like this:\r\n```java\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ServerConfig {\r\n\r\n    @Bean\r\n    public ServletWebServerFactory servletContainer(SSLConnectorCustomizer sslConnectorCustomizer) {\r\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();\r\n        tomcat.addConnectorCustomizers(sslConnectorCustomizer);\r\n        return tomcat;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class SSLConfig {\r\n\r\n    @Bean\r\n    public SSLFactory sslFactory(@Value(&quot;${ssl.keystore-path}&quot;) String keyStorePath,\r\n                                 @Value(&quot;${ssl.keystore-password}&quot;) char[] keyStorePassword,\r\n                                 @Value(&quot;${ssl.truststore-path}&quot;) String trustStorePath,\r\n                                 @Value(&quot;${ssl.truststore-password}&quot;) char[] trustStorePassword,\r\n                                 @Value(&quot;${ssl.client-auth}&quot;) boolean isClientAuthenticationRequired) {\r\n\r\n        return SSLFactory.builder()\r\n                .withSwappableIdentityMaterial()\r\n                .withSwappableTrustMaterial()\r\n                .withIdentityMaterial(keyStorePath, keyStorePassword)\r\n                .withTrustMaterial(trustStorePath, trustStorePassword)\r\n                .withDefaultTrustMaterial()\r\n                .withSystemTrustMaterial()\r\n                .withNeedClientAuthentication(isClientAuthenticationRequired)\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport nl.altindag.ssl.util.KeyStoreUtils;\r\nimport org.apache.catalina.connector.Connector;\r\nimport org.apache.coyote.http11.AbstractHttp11Protocol;\r\nimport org.apache.tomcat.util.net.SSLHostConfig;\r\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate;\r\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate.Type;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport javax.net.ssl.SSLParameters;\r\nimport javax.net.ssl.X509TrustManager;\r\nimport java.security.KeyStore;\r\n\r\n@Configuration\r\npublic class SSLConnectorCustomizer implements TomcatConnectorCustomizer {\r\n\r\n    private final SSLFactory sslFactory;\r\n\r\n    public SSLConnectorCustomizer(SSLFactory sslFactory) {\r\n        this.sslFactory = sslFactory;\r\n    }\r\n\r\n    @Override\r\n    public void customize(Connector connector) {\r\n        connector.setScheme(&quot;https&quot;);\r\n        connector.setSecure(true);\r\n        connector.setPort(8444);\r\n\r\n        AbstractHttp11Protocol&lt;?&gt; protocol = (AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler();\r\n        configureSsl(protocol);\r\n    }\r\n\r\n    private void configureSsl(AbstractHttp11Protocol&lt;?&gt; protocol) {\r\n        protocol.setSSLEnabled(true);\r\n\r\n        SSLHostConfig sslHostConfig = new SSLHostConfig();\r\n        sslHostConfig.setSslProtocol(&quot;TLS&quot;);\r\n        sslHostConfig.setHostName(protocol.getDefaultSSLHostConfigName());\r\n\r\n        configureSslClientAuth(sslHostConfig);\r\n\r\n        KeyStore trustStore = sslFactory.getTrustManager()\r\n                .map(X509TrustManager::getAcceptedIssuers)\r\n                .map(KeyStoreUtils::createTrustStore)\r\n                .orElseThrow();\r\n        sslHostConfig.setTrustStore(trustStore);\r\n\r\n        SSLHostConfigCertificate certificate = new SSLHostConfigCertificate(sslHostConfig, Type.UNDEFINED);\r\n        certificate.setSslContext(new SSLContextWrapper(sslFactory));\r\n        sslFactory.getKeyManager().ifPresent(certificate::setCertificateKeyManager);\r\n        sslHostConfig.addCertificate(certificate);\r\n\r\n        String ciphers = String.join(&quot;,&quot;, sslFactory.getCiphers());\r\n        sslHostConfig.setCiphers(ciphers);\r\n\r\n        String protocols = String.join(&quot;,&quot;, sslFactory.getProtocols());\r\n        sslHostConfig.setProtocols(protocols);\r\n\r\n        protocol.addSslHostConfig(sslHostConfig);\r\n    }\r\n\r\n    private void configureSslClientAuth(SSLHostConfig config) {\r\n        String clientAuth;\r\n        SSLParameters sslParameters = sslFactory.getSslParameters();\r\n        if (sslParameters.getNeedClientAuth()) {\r\n            clientAuth = &quot;required&quot;;\r\n        } else if (sslParameters.getWantClientAuth()) {\r\n            clientAuth = &quot;optional&quot;;\r\n        } else {\r\n            clientAuth = &quot;none&quot;;\r\n        }\r\n\r\n        config.setCertificateVerification(clientAuth);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport org.apache.tomcat.util.net.SSLContext;\r\n\r\nimport javax.net.ssl.KeyManager;\r\nimport javax.net.ssl.SSLEngine;\r\nimport javax.net.ssl.SSLParameters;\r\nimport javax.net.ssl.SSLServerSocketFactory;\r\nimport javax.net.ssl.SSLSessionContext;\r\nimport javax.net.ssl.TrustManager;\r\nimport java.security.SecureRandom;\r\nimport java.security.cert.X509Certificate;\r\n\r\npublic final class SSLContextWrapper implements SSLContext {\r\n\r\n    private final SSLFactory sslFactory;\r\n\r\n    public SSLContextWrapper(SSLFactory sslFactory) {\r\n        this.sslFactory = sslFactory;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void init(KeyManager[] kms, TrustManager[] tms, SecureRandom sr) {\r\n        // not needed to initialize as it is already initialized\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public SSLSessionContext getServerSessionContext() {\r\n        return sslFactory.getSslContext().getServerSessionContext();\r\n    }\r\n\r\n    @Override\r\n    public SSLEngine createSSLEngine() {\r\n        return sslFactory.getSSLEngine();\r\n    }\r\n\r\n    @Override\r\n    public SSLServerSocketFactory getServerSocketFactory() {\r\n        return sslFactory.getSslServerSocketFactory();\r\n    }\r\n\r\n    @Override\r\n    public SSLParameters getSupportedSSLParameters() {\r\n        return sslFactory.getSslParameters();\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getCertificateChain(String alias) {\r\n        return sslFactory.getKeyManager()\r\n                .map(keyManager -&gt; keyManager.getCertificateChain(&quot;server&quot;))\r\n                .orElseThrow();\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getAcceptedIssuers() {\r\n        return sslFactory.getTrustedCertificates().toArray(new X509Certificate[0]);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am not able to share the keystores as a file here, so I converted them to a base64 encoded string. So if you want to give it a try on your side you can decode and create the binary file out of it.\r\n\r\n**identity.jks**\r\n```\r\nMIIOcwIBAzCCDiwGCSqGSIb3DQEHAaCCDh0Egg4ZMIIOFTCCBWEGCSqGSIb3DQEH\r\nAaCCBVIEggVOMIIFSjCCBUYGCyqGSIb3DQEMCgECoIIE8zCCBO8wKQYKKoZIhvcN\r\nAQwBAzAbBBTU8ZeqKOoF7Pmc7PrK1Q9hRT8FRAIDAMNQBIIEwEI/jcEKkEnevxHl\r\nqODLeIHtT72gr+S34JT99nUeSOyqdWko7mN7ilZQ84scJmdvQoaJYHnjG7hLPxpi\r\nghEYFwMyA5ZRcpdqKoRnCyI1SBzeNI1xho5pxpjukivLdXLBxmPrykNpawtkBNgN\r\n6oamN7wI437IsnunvtBMrjohQZlvf0/5X4DBaBlxXB3T+ZjpQcqdGfA7LTNsdlHt\r\nF2/pzolJYc8BFBBEGMFNBb3NPQ91tBANPvDMIaaEEbY5G7zJX+BAKqnN3DmUrfEa\r\nUNyjYdCd8apDfHV6SezuKle5nDz4KGpnsTfwANSDGLiy9SKo4Tv+E1nUMtA24yb4\r\n54L0CfCnoTTtNaqGRJ0KM6a3xH92ImjD6KaOHlMjwUrlOcT6HOzQk5Mknvjv8B/B\r\n1rixVlC69ctySSMH3eZG6vdcV267ZR3L1wHZSCtuXbCHgylbvGY1N/5JCWbY7poT\r\neQ45SSsDxz1tgy4Hv6lrjrQ+c1+fm7aCYmFEH3iT/xpX0BdD+eqQ8enzbPOuYvL7\r\n1HsQo8f1XIzt6QHnGqvZ3QUKJ+fJLqr7DiHwVW1wt3S3Dea7SCyy+UmM5bo/RlUG\r\ncldEc6mkTCAxrl3BMM8H0ShMg3WyNkaF/CnZJhUAHC/DYzyax0UVJk8/Q/i9qjnY\r\nbhO2E0fCe97T48wPVswMG4LuE0IHKbHr6nBaX4hhZcf3CBjtJvKdfFvGwtswylqY\r\npFm8JWZiEqNmZN6nRP7EY8xkmnRIp6LN4ve0i3vkBolN35G58kjwXjSKFirlGuJV\r\nAz6k+r0EjqQrHsj6oteVT7tAI6BzxodnY5mooMrAtnttYS7vl3MIXkpYBzwe0KFM\r\n2NWXwLug5QvQ0uAEdX9aPR/ly7SP5XzQpQKdiixvAQRZ2Zxtfo32wGqVQawbKEKE\r\npfVsQK9agx7ofGbUiztVXYem9jVq/gvzAro1XFH94Pt+Lg1iVmi2LZt6mljHH/eC\r\namMzqG7td3G1hKU3sKYUaIVgbyJw+LSlXbrcbV5vsLepOFV+lH9SxoXJzzdxYrAs\r\ncw033weLwLTkQUPgSjYy0XTKIZqIRZM5oKDT6wEzN1QqvQJe59O6N3fl1bH9uZuj\r\nYF1iuxLKtdb/aawhtckp3iREpqTYbIZQEM4cDrPyElkbBUw34kj/TYnRE0ooorDI\r\nL5yP3WTaawLlsLFPlwnIqS4bjQCkfb8PPBVJSmk+v2K16rSlxnu2zjINe1gVbeLl\r\ngsuKL1IWC7yBdbE0sqVVgi9TiSzZglNMQIaLuA+wmY8U7jHz697NTeWL/XUnf5+T\r\nrMmYjQo0GWLDJq1mOmaSUxKo0kx20go0dMfONIiRaKlfFvxpIF9aLhfSGSFWMs3g\r\niwd+9Jzencx/gtm8Rb9U1oDMEyc6GwU5JHiwmDLQ5e1P6jsZPTLGdiUSQd6tdU+u\r\nPs+0nCVwawaH9O1grDwHRKQcw7Dy+LKCjy3PSzbEPValY7MmjJmLA/jSQ0kUAr9j\r\nB+XVG0QyqBSluBUmlOafhdnRh8nkldIiTZiWdfUMTPg2hJGdFqlZA+kMI6O9V4aW\r\nyw/jlHR8U076MC1vdrSf+ysQK/GF0ipcvndH1Ci3o/3qgUNGYiJyoh2jH5FAnsJl\r\nYeoBlcwxQDAbBgkqhkiG9w0BCRQxDh4MAHMAZQByAHYAZQByMCEGCSqGSIb3DQEJ\r\nFTEUBBJUaW1lIDE2MjAwOTg5NDEwNDIwggisBgkqhkiG9w0BBwagggidMIIImQIB\r\nADCCCJIGCSqGSIb3DQEHATApBgoqhkiG9w0BDAEGMBsEFF7A5A+E84WmDPd2Cys2\r\nPDdJB5ZGAgMAw1CAgghYNQ5VqiEWhLWXChJB10sg9tTGj69Yw0jU1bBJKaK10xOv\r\napPElDnkb13sDk+Wt15VcF6i9uvvmEXjakfsWCT4VmR0coiNLCtqBCmIXTlSzKcN\r\nYiTAWt//LMVyXQvsPyxai7/TFrHnUjYPlMYTEjZZsRtSiaAGKSeS0zY0vw8/fkvE\r\nFuuz3k95NsuWCuxBMsSBzTAFhxmcjggShG9RBSzW0zjf4tyGULEi8vs7qXF4Ky42\r\nVUDiiQ25WP135+BM04eNGHREQMWzKBcl5udJCheHxOevZRBB9M74d/d2PYT3QnnG\r\nFodcHz20lX2L7c7KpE1CvfA1PND3EFVh+6X4ZOB3fJMIriSnzogDPYB34BIvSLcG\r\njUx2CmdnM2FTrWLb1Tx77Dp0R6lONaHmJmruJWesVwGdZHVRTdszggw802vDySxD\r\n5H16ONWXmag2w94KAogWN/ijFYFloKS55cNhWCYZ5fLrmQIilDq13DujcENce8dk\r\n81x86/b/gEW98bhxAZLA59niQWRULJjESLvRTF7I8dgKnE2Hinnjc/hLctNfLgIV\r\nEq0xw2Y7QpVtX+Vown66fLADD9bxWPQUHHZmlnIejCW1wibzEsCBtYlFSmX7MqYH\r\nr5gtx8fLveqCasGuPHCZQ9sJNrhKQG+RbOKZqAP9wexvks3U1YwApYhcSEAmQDEs\r\n/efxoPFBFsrRHhmoTLpWzMzptSw8/AJ1V1BFZZ2QIh4l2a97Bz7ho00QGD9BYL0C\r\n1qtvM1RnVJUYtIR2l7Rj0lH9s7DfH4ha5dE/Vxx+PeRO0NBy7hC3wgFKp4tpQAgi\r\ntYaKCjGlCA+FK7avWdIfB6NZjSuTSyv6JitkjVPY00Fh05OpB/r0OGX1FXYEWmxs\r\nusUD4WGk0zTAUaex5Ji4qpW9g7xWo/8phkoiAxdLmrAam4pJHS8ihy7VSr0HHT88\r\nyo0t/AclEgwgX/ZzW9ewvLJ5na7wbH+ES6cWYK/8GTS9KYVK5QztL7FHEbptQoNT\r\n0w9MEqcFHgFqZdYxkzGvVY+/3pd3B5PxfX3c+ncLfDrLRhgPJE8wvlX3PSzsJ9kp\r\nENGgWRJhp7t6GGcrJzLcoHD8uRF3T1MRpIkH9+a7P1WMF2TWXbz0b5TfgERQte49\r\nY+MLg0evEj2pMUA323NCjc3EkraVJkMeGcwIWOJUIeT91nKRQ8YjV6DOQV9ChYIB\r\nNkkqmKaL5vNP+kRVo/JeLsFEpi3x/GkahGWB5qN5FUdsAbRRMT0ZmD+LujSvczlZ\r\nftyf40h9umSSlmlvuF+SH2j18Wd0/1Ky+dITFEM7OK2tiNVNdWOXXgU0skO3wkjt\r\nfhV41y4R+usENPX2lPxqO/VDRPAvvsCOY3/Ugwsg8Fkedx1A7JhPzcJ4HrYDfI3z\r\ncNDt5x0oPsDIYwJTOnrj/WXdUaVA56447ajBpRnkS8dSswWQmrRUBbw6V1h4V6Gz\r\n/m4MPklkFSM7Yv8+10/8IyC4vFR4YCCyGD3/BB3JsRtw5woWwGMuwhZp/PD32bHk\r\nfZC8OWBNLbYT1UTXyNLaZjzpk/aUrrXP5vzDUR5DxhBtNalce2vY45RHinf9Urcp\r\n2TVV7rHQRlFjfF4TPv3+iq8m1u7QWfVBsmKKWSpQsu9qcJAvsWmnQ+ry9dW+fqJY\r\nXC9bwAijaZgJcUbGjtTRXyaZaoxXNL0ZO7QOkhX901a1WBAzYTh8IYR761nCzTAG\r\nA3JEKpwm328IGVitnc2ca2KZ36I/0rcUNBKI3A56OMUryInwBEhlJ2rAEYAPEZf/\r\nZvyiez7iZ5nlzTCKzfDH94qaiRoY6F1npWYOXCgn29ycw2kU+NCHX+pG6sDfCmxr\r\n2FVcUREQ3U0wkaH5vnxqViehAd8x9jr1x2TTekbRbtcbZktO7ps0LMFeDGr2nx0p\r\n4nr2rc9qs0Rl4LaoeMO4Cr96joClsobewAu11/wWby/+1YcPLypa22ScBbz5BB9V\r\nPK6DCWKcGiR/rfK2pJI1OYxHfzDLMV44PvLU+KsdTwJTXUSUv3upIxn2i+VoHGA4\r\ne2dx4OdLxhAGwpNBDaV2/IHjUQypezErAaXrE3J0fT4Xrp+QaCy/CBvuNTrSjzyz\r\nytUGZQXgS85K5VSybexokXDxoZ/Nlx8SyK+wwrXv4XVGFa/CBw+VLRTnICq0j3qS\r\nvbTJw/EM585Z6kyqRfEUDArPPugVrEtVdfSbtXrxDxbOzuCYFn/yCcebgHF85MdB\r\nj0j84lVyH0yQb9xSFlyd4JInLJEZDhtufEBLMKxyMSYQnyWPqcjWh1waDXd5ZeFw\r\n1gCj79kTYBeXbJ01glGyr0V9EEWKDVhdr9TBvbbdmUNhyp8iLoa7G2TC8VAjY9JQ\r\nt8vklzswwHhoVomvW8bsyd9HZ2kfDMZ77wzqUaYO9X6blTlDw4mPdxPO0IhHM7JJ\r\np9shRidzBFA1xL1aSWPSpjYx0qiajKpK/uNKJnyrrbAkYTt+DpEAv5qB9nvAFbmJ\r\nn49CYsTxqyqVRiSElFPXN3Rf0qnLH4fXn4fl26jRRdHkZV96+f1AII+g3b+JIgZK\r\ngjyWcKRReL+mbgcgaw6xj5mdSvDnz9YCilRSPMaI8+rZDJCemS2VHSVhD8yM+3n0\r\n1BoBx322uKJPhlQ9Qjl38pHf4l2gOIepnzV9/juyAe+hGOrbUn/IRm8eB+4SWI9+\r\nDU6coVcdYP9PIljU7OPFrl7G6aBUNe2O464MfQKbINxhyCPvFbCL8ph50xpHjy1G\r\nk/IzrLByjfQqM9G2gngLwIz0Frwbgr3hS5Z/VvEUmdAXmKt6xwx28kNAij16lU1E\r\nVjsc76TbsbZXejkEH3b4ukXEd/BwSHFDMNNXp1n/s07rvESorhDzMD4wITAJBgUr\r\nDgMCGgUABBQ2jDd+DUe7kqihYR6vB53AVXPxQAQU3cqWrZq06vBkZs/IL2rnCJli\r\nO3MCAwGGoA==\r\n```\r\n\r\n**truststore.jks**\r\n```\r\nMIIEjgIBAzCCBEcGCSqGSIb3DQEHAaCCBDgEggQ0MIIEMDCCBCwGCSqGSIb3DQEH\r\nBqCCBB0wggQZAgEAMIIEEgYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQUCQPL\r\nV1YP9wunGMWFyv1BwcRTIAACAwDDUICCA9jrocMHqNhm8aHENyLPmEi8qSuSPdut\r\n++OBZvYRI5Bb2fFwye3dsoo9xEcSpDTcjp3cCiPPnGzcaWyvOvyTFtGr7AuUISte\r\nqI2bfHd+bR1e7KhC4a8xZDhpsn7TmYTOHGhHJi7W4Yaw6UbgYhzfE++KpqNMfWBk\r\nt4/4V2n3BNzShtxXDBw9CmT1Fdcv1lJ1j5YWKdgD0/p59ccEZHtiUvY6QOROBfjq\r\noI6kkMzW/mDJqQDKowLsW2O/UbPaRC1B8Ew0NSlHWhxaU347UFsotW8iKuXVnei0\r\ngPiPfBFSuZ24MFaz6XENgEZcnNCJBeeK/MGma8i1rOADKbEaErzvlwBNm8BWtlC3\r\nIx4akym2XSy3pqFJrP+1cJJONwsI766IL72PUyXTBRtKEaqSd6jZZGkiyTPsiiK6\r\nG3apckGnKpgJLyR6hrUd2SC8bwf92waRne9VihA0O4CovO9G0ab6ud02bEISVQAt\r\n/n+lnU6FmjK3tGy1P/Kpx1vomkmZkdWqE56dvAQv5DRV7EZQ9TJU8FoAyP4E5RWD\r\n1AQi7uDA233e1Wv4rYzWhwm/0XeFsdKw/N3rjmeNilgG4/KwSFFkl53fNECDDEmS\r\nczcEkA99JU6nJBCuFF8kn0yVXTh+8ezgdSiT8LIUtqbldzKR8uMXFlzCMOCdJc21\r\ncBC7DX9LA+Dz/pkcEj1smtDDSv+zM+DbEA4iJZBlF68xqiZzhrWcmbdtSKN5iUN/\r\nkkLELUUjO76OIdxXILW2GHLHSe01fbqpHeY9NC732WmF329+ucODzCq9BjxARpAm\r\nbCEX8tbcOrCqm3947JuSbgW6CxzDd2gzmYoE6d4LSfWLRgQ4SdLpgieVhfbsunBk\r\nlnvCrnsa/VAQnEMZEzWCgvRAcuRs6bPvUXXFPwrz8OvQoPmdDRA4uWYfhEZZJjq4\r\nuRGQRt+Bf4v5H1e2yzxSfRKlecJlhpVMyZtNsWTaNgZFX+c1SfzXXZGGMgLBEh9t\r\nwLFdDWA848eXP97te7boqusR/UTXd6hLDmU5bb5NmjzY92aEK3LfIeLhFlKjWQKF\r\nFooNxvKA/jyqUt/LxffAxK4co8ivyLzOMdHsPsqTjpkqjro5RgnYJTJWhBLMois5\r\nsJej6EphOUzBMeEwgdlEs3pbT3/yp8QrhYKUG2HjkUVE2GKVwWNcjRfguGGK8MYC\r\nB3ztnwPeAblpaPi4aQY55maYGXR3SPTAX2MVGScBfL8GhDZGr/yf7441wi6YntOH\r\nCYts3VW/0zHAXNTaycdUTSMg9f7O312aYrk59Hd5Yfiw1StzMtdJMnMxlOdgTP33\r\nw+wwPjAhMAkGBSsOAwIaBQAEFDdfecmJ7H2HFI93DLhyZ4r8Mx2iBBT/uNLzzuIO\r\nSZI0e5jSFcFmOoYSvwIDAYag\r\n```\r\n\r\nThese two base64 encoded strings can be tranformed into binary files with the snippet bellow. Please make sure to replace the empty content with the above base64 encoded strings.\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardOpenOption;\r\nimport java.util.Base64;\r\n\r\npublic class Base64DecoderUtils {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String identityContentAsBase64Encoded = &quot;&quot;;\r\n        String trustStoreContentAsBase64Encoded = &quot;&quot;;\r\n        \r\n        Path identityPath = Paths.get(&quot;/path/to/identity.jks&quot;);\r\n        Path trustStorePath = Paths.get(&quot;/path/to/truststore.jks&quot;);\r\n        \r\n        byte[] decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, identityContentAsBase64Encoded.split(System.lineSeparator())));\r\n        Files.write(identityPath, decoded, StandardOpenOption.CREATE);\r\n\r\n        decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, trustStoreContentAsBase64Encoded.split(System.lineSeparator())));\r\n        Files.write(trustStorePath, decoded, StandardOpenOption.CREATE);\r\n    }\r\n}\r\n```\r\n\r\nThe password of these to files are: **secret**\r\n\r\nmy application property file is:\r\n```yml\r\nserver:\r\n  port: 8443\r\n\r\nssl:\r\n  client-auth: true\r\n  keystore-path: identity.jks\r\n  keystore-password: secret\r\n  truststore-path: truststore.jks\r\n  truststore-password: secret\r\n```\r\n\r\nI am using the following dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;8.1.7&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n# Update 2023-10-23\r\n\r\nThe supplied configuration such as keymanager or sslcontext is being ignored. It seems like it was never the intention of the developers/maintainers to allow such custom configuration. I opened a pull request here to enable it in tomcat: https://github.com/apache/tomcat/pull/673\r\n\r\nHowever I don&#39;t know whether the maintainers will allow that kind of option to configure the server with a custom sslcontext.\r\n\r\n\r\n  [1]: https://github.com/Hakky54/sslcontext-kickstart","title":"Configuring SSL programatically of a Spring Boot server with Tomcat is failing","body":"<p>I am trying to configure the ssl configuration of a spring boot with a tomcat embedded server. Spring Boot is by default provided with a tomcat. SSL can be configured with the application properties such as keystore path, truststore path etc. I don't want to configure it with properties, so I just want to configure it programatically. I have developed my <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">own ssl library</a> which I want to use as it has couple of additional feature which I need use. In the past I attempted to configure it but failed, so I switch to either using spring boot with jetty or netty to configure my server ssl programatically. However it was still in my mind to give it another try. Today I am still failing to configure it programatically, maybe someone can help me out.</p>\n<p>My stacktrace is:</p>\n<pre><code>Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)\n    at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:43)\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)\n    ... 14 more\nCaused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:238)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:282)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:213)\n    ... 16 more\nCaused by: org.apache.catalina.LifecycleException: Protocol handler start failed\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1077)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:234)\n    ... 18 more\nCaused by: java.lang.IllegalArgumentException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:107)\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71)\n    at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:235)\n    at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1227)\n    at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1313)\n    at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:617)\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1074)\n    ... 20 more\nCaused by: java.io.IOException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\n    at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:312)\n    at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247)\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:105)\n    ... 26 more\n</code></pre>\n<p>My code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ServerConfig {\n\n    @Bean\n    public ServletWebServerFactory servletContainer(SSLConnectorCustomizer sslConnectorCustomizer) {\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();\n        tomcat.addConnectorCustomizers(sslConnectorCustomizer);\n        return tomcat;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class SSLConfig {\n\n    @Bean\n    public SSLFactory sslFactory(@Value(&quot;${ssl.keystore-path}&quot;) String keyStorePath,\n                                 @Value(&quot;${ssl.keystore-password}&quot;) char[] keyStorePassword,\n                                 @Value(&quot;${ssl.truststore-path}&quot;) String trustStorePath,\n                                 @Value(&quot;${ssl.truststore-password}&quot;) char[] trustStorePassword,\n                                 @Value(&quot;${ssl.client-auth}&quot;) boolean isClientAuthenticationRequired) {\n\n        return SSLFactory.builder()\n                .withSwappableIdentityMaterial()\n                .withSwappableTrustMaterial()\n                .withIdentityMaterial(keyStorePath, keyStorePassword)\n                .withTrustMaterial(trustStorePath, trustStorePassword)\n                .withDefaultTrustMaterial()\n                .withSystemTrustMaterial()\n                .withNeedClientAuthentication(isClientAuthenticationRequired)\n                .build();\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport nl.altindag.ssl.util.KeyStoreUtils;\nimport org.apache.catalina.connector.Connector;\nimport org.apache.coyote.http11.AbstractHttp11Protocol;\nimport org.apache.tomcat.util.net.SSLHostConfig;\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate;\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate.Type;\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.X509TrustManager;\nimport java.security.KeyStore;\n\n@Configuration\npublic class SSLConnectorCustomizer implements TomcatConnectorCustomizer {\n\n    private final SSLFactory sslFactory;\n\n    public SSLConnectorCustomizer(SSLFactory sslFactory) {\n        this.sslFactory = sslFactory;\n    }\n\n    @Override\n    public void customize(Connector connector) {\n        connector.setScheme(&quot;https&quot;);\n        connector.setSecure(true);\n        connector.setPort(8444);\n\n        AbstractHttp11Protocol&lt;?&gt; protocol = (AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler();\n        configureSsl(protocol);\n    }\n\n    private void configureSsl(AbstractHttp11Protocol&lt;?&gt; protocol) {\n        protocol.setSSLEnabled(true);\n\n        SSLHostConfig sslHostConfig = new SSLHostConfig();\n        sslHostConfig.setSslProtocol(&quot;TLS&quot;);\n        sslHostConfig.setHostName(protocol.getDefaultSSLHostConfigName());\n\n        configureSslClientAuth(sslHostConfig);\n\n        KeyStore trustStore = sslFactory.getTrustManager()\n                .map(X509TrustManager::getAcceptedIssuers)\n                .map(KeyStoreUtils::createTrustStore)\n                .orElseThrow();\n        sslHostConfig.setTrustStore(trustStore);\n\n        SSLHostConfigCertificate certificate = new SSLHostConfigCertificate(sslHostConfig, Type.UNDEFINED);\n        certificate.setSslContext(new SSLContextWrapper(sslFactory));\n        sslFactory.getKeyManager().ifPresent(certificate::setCertificateKeyManager);\n        sslHostConfig.addCertificate(certificate);\n\n        String ciphers = String.join(&quot;,&quot;, sslFactory.getCiphers());\n        sslHostConfig.setCiphers(ciphers);\n\n        String protocols = String.join(&quot;,&quot;, sslFactory.getProtocols());\n        sslHostConfig.setProtocols(protocols);\n\n        protocol.addSslHostConfig(sslHostConfig);\n    }\n\n    private void configureSslClientAuth(SSLHostConfig config) {\n        String clientAuth;\n        SSLParameters sslParameters = sslFactory.getSslParameters();\n        if (sslParameters.getNeedClientAuth()) {\n            clientAuth = &quot;required&quot;;\n        } else if (sslParameters.getWantClientAuth()) {\n            clientAuth = &quot;optional&quot;;\n        } else {\n            clientAuth = &quot;none&quot;;\n        }\n\n        config.setCertificateVerification(clientAuth);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport org.apache.tomcat.util.net.SSLContext;\n\nimport javax.net.ssl.KeyManager;\nimport javax.net.ssl.SSLEngine;\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.SSLServerSocketFactory;\nimport javax.net.ssl.SSLSessionContext;\nimport javax.net.ssl.TrustManager;\nimport java.security.SecureRandom;\nimport java.security.cert.X509Certificate;\n\npublic final class SSLContextWrapper implements SSLContext {\n\n    private final SSLFactory sslFactory;\n\n    public SSLContextWrapper(SSLFactory sslFactory) {\n        this.sslFactory = sslFactory;\n    }\n\n\n    @Override\n    public void init(KeyManager[] kms, TrustManager[] tms, SecureRandom sr) {\n        // not needed to initialize as it is already initialized\n    }\n\n    @Override\n    public void destroy() {\n\n    }\n\n    @Override\n    public SSLSessionContext getServerSessionContext() {\n        return sslFactory.getSslContext().getServerSessionContext();\n    }\n\n    @Override\n    public SSLEngine createSSLEngine() {\n        return sslFactory.getSSLEngine();\n    }\n\n    @Override\n    public SSLServerSocketFactory getServerSocketFactory() {\n        return sslFactory.getSslServerSocketFactory();\n    }\n\n    @Override\n    public SSLParameters getSupportedSSLParameters() {\n        return sslFactory.getSslParameters();\n    }\n\n    @Override\n    public X509Certificate[] getCertificateChain(String alias) {\n        return sslFactory.getKeyManager()\n                .map(keyManager -&gt; keyManager.getCertificateChain(&quot;server&quot;))\n                .orElseThrow();\n    }\n\n    @Override\n    public X509Certificate[] getAcceptedIssuers() {\n        return sslFactory.getTrustedCertificates().toArray(new X509Certificate[0]);\n    }\n\n}\n</code></pre>\n<p>I am not able to share the keystores as a file here, so I converted them to a base64 encoded string. So if you want to give it a try on your side you can decode and create the binary file out of it.</p>\n<p><strong>identity.jks</strong></p>\n<pre><code>MIIOcwIBAzCCDiwGCSqGSIb3DQEHAaCCDh0Egg4ZMIIOFTCCBWEGCSqGSIb3DQEH\nAaCCBVIEggVOMIIFSjCCBUYGCyqGSIb3DQEMCgECoIIE8zCCBO8wKQYKKoZIhvcN\nAQwBAzAbBBTU8ZeqKOoF7Pmc7PrK1Q9hRT8FRAIDAMNQBIIEwEI/jcEKkEnevxHl\nqODLeIHtT72gr+S34JT99nUeSOyqdWko7mN7ilZQ84scJmdvQoaJYHnjG7hLPxpi\nghEYFwMyA5ZRcpdqKoRnCyI1SBzeNI1xho5pxpjukivLdXLBxmPrykNpawtkBNgN\n6oamN7wI437IsnunvtBMrjohQZlvf0/5X4DBaBlxXB3T+ZjpQcqdGfA7LTNsdlHt\nF2/pzolJYc8BFBBEGMFNBb3NPQ91tBANPvDMIaaEEbY5G7zJX+BAKqnN3DmUrfEa\nUNyjYdCd8apDfHV6SezuKle5nDz4KGpnsTfwANSDGLiy9SKo4Tv+E1nUMtA24yb4\n54L0CfCnoTTtNaqGRJ0KM6a3xH92ImjD6KaOHlMjwUrlOcT6HOzQk5Mknvjv8B/B\n1rixVlC69ctySSMH3eZG6vdcV267ZR3L1wHZSCtuXbCHgylbvGY1N/5JCWbY7poT\neQ45SSsDxz1tgy4Hv6lrjrQ+c1+fm7aCYmFEH3iT/xpX0BdD+eqQ8enzbPOuYvL7\n1HsQo8f1XIzt6QHnGqvZ3QUKJ+fJLqr7DiHwVW1wt3S3Dea7SCyy+UmM5bo/RlUG\ncldEc6mkTCAxrl3BMM8H0ShMg3WyNkaF/CnZJhUAHC/DYzyax0UVJk8/Q/i9qjnY\nbhO2E0fCe97T48wPVswMG4LuE0IHKbHr6nBaX4hhZcf3CBjtJvKdfFvGwtswylqY\npFm8JWZiEqNmZN6nRP7EY8xkmnRIp6LN4ve0i3vkBolN35G58kjwXjSKFirlGuJV\nAz6k+r0EjqQrHsj6oteVT7tAI6BzxodnY5mooMrAtnttYS7vl3MIXkpYBzwe0KFM\n2NWXwLug5QvQ0uAEdX9aPR/ly7SP5XzQpQKdiixvAQRZ2Zxtfo32wGqVQawbKEKE\npfVsQK9agx7ofGbUiztVXYem9jVq/gvzAro1XFH94Pt+Lg1iVmi2LZt6mljHH/eC\namMzqG7td3G1hKU3sKYUaIVgbyJw+LSlXbrcbV5vsLepOFV+lH9SxoXJzzdxYrAs\ncw033weLwLTkQUPgSjYy0XTKIZqIRZM5oKDT6wEzN1QqvQJe59O6N3fl1bH9uZuj\nYF1iuxLKtdb/aawhtckp3iREpqTYbIZQEM4cDrPyElkbBUw34kj/TYnRE0ooorDI\nL5yP3WTaawLlsLFPlwnIqS4bjQCkfb8PPBVJSmk+v2K16rSlxnu2zjINe1gVbeLl\ngsuKL1IWC7yBdbE0sqVVgi9TiSzZglNMQIaLuA+wmY8U7jHz697NTeWL/XUnf5+T\nrMmYjQo0GWLDJq1mOmaSUxKo0kx20go0dMfONIiRaKlfFvxpIF9aLhfSGSFWMs3g\niwd+9Jzencx/gtm8Rb9U1oDMEyc6GwU5JHiwmDLQ5e1P6jsZPTLGdiUSQd6tdU+u\nPs+0nCVwawaH9O1grDwHRKQcw7Dy+LKCjy3PSzbEPValY7MmjJmLA/jSQ0kUAr9j\nB+XVG0QyqBSluBUmlOafhdnRh8nkldIiTZiWdfUMTPg2hJGdFqlZA+kMI6O9V4aW\nyw/jlHR8U076MC1vdrSf+ysQK/GF0ipcvndH1Ci3o/3qgUNGYiJyoh2jH5FAnsJl\nYeoBlcwxQDAbBgkqhkiG9w0BCRQxDh4MAHMAZQByAHYAZQByMCEGCSqGSIb3DQEJ\nFTEUBBJUaW1lIDE2MjAwOTg5NDEwNDIwggisBgkqhkiG9w0BBwagggidMIIImQIB\nADCCCJIGCSqGSIb3DQEHATApBgoqhkiG9w0BDAEGMBsEFF7A5A+E84WmDPd2Cys2\nPDdJB5ZGAgMAw1CAgghYNQ5VqiEWhLWXChJB10sg9tTGj69Yw0jU1bBJKaK10xOv\napPElDnkb13sDk+Wt15VcF6i9uvvmEXjakfsWCT4VmR0coiNLCtqBCmIXTlSzKcN\nYiTAWt//LMVyXQvsPyxai7/TFrHnUjYPlMYTEjZZsRtSiaAGKSeS0zY0vw8/fkvE\nFuuz3k95NsuWCuxBMsSBzTAFhxmcjggShG9RBSzW0zjf4tyGULEi8vs7qXF4Ky42\nVUDiiQ25WP135+BM04eNGHREQMWzKBcl5udJCheHxOevZRBB9M74d/d2PYT3QnnG\nFodcHz20lX2L7c7KpE1CvfA1PND3EFVh+6X4ZOB3fJMIriSnzogDPYB34BIvSLcG\njUx2CmdnM2FTrWLb1Tx77Dp0R6lONaHmJmruJWesVwGdZHVRTdszggw802vDySxD\n5H16ONWXmag2w94KAogWN/ijFYFloKS55cNhWCYZ5fLrmQIilDq13DujcENce8dk\n81x86/b/gEW98bhxAZLA59niQWRULJjESLvRTF7I8dgKnE2Hinnjc/hLctNfLgIV\nEq0xw2Y7QpVtX+Vown66fLADD9bxWPQUHHZmlnIejCW1wibzEsCBtYlFSmX7MqYH\nr5gtx8fLveqCasGuPHCZQ9sJNrhKQG+RbOKZqAP9wexvks3U1YwApYhcSEAmQDEs\n/efxoPFBFsrRHhmoTLpWzMzptSw8/AJ1V1BFZZ2QIh4l2a97Bz7ho00QGD9BYL0C\n1qtvM1RnVJUYtIR2l7Rj0lH9s7DfH4ha5dE/Vxx+PeRO0NBy7hC3wgFKp4tpQAgi\ntYaKCjGlCA+FK7avWdIfB6NZjSuTSyv6JitkjVPY00Fh05OpB/r0OGX1FXYEWmxs\nusUD4WGk0zTAUaex5Ji4qpW9g7xWo/8phkoiAxdLmrAam4pJHS8ihy7VSr0HHT88\nyo0t/AclEgwgX/ZzW9ewvLJ5na7wbH+ES6cWYK/8GTS9KYVK5QztL7FHEbptQoNT\n0w9MEqcFHgFqZdYxkzGvVY+/3pd3B5PxfX3c+ncLfDrLRhgPJE8wvlX3PSzsJ9kp\nENGgWRJhp7t6GGcrJzLcoHD8uRF3T1MRpIkH9+a7P1WMF2TWXbz0b5TfgERQte49\nY+MLg0evEj2pMUA323NCjc3EkraVJkMeGcwIWOJUIeT91nKRQ8YjV6DOQV9ChYIB\nNkkqmKaL5vNP+kRVo/JeLsFEpi3x/GkahGWB5qN5FUdsAbRRMT0ZmD+LujSvczlZ\nftyf40h9umSSlmlvuF+SH2j18Wd0/1Ky+dITFEM7OK2tiNVNdWOXXgU0skO3wkjt\nfhV41y4R+usENPX2lPxqO/VDRPAvvsCOY3/Ugwsg8Fkedx1A7JhPzcJ4HrYDfI3z\ncNDt5x0oPsDIYwJTOnrj/WXdUaVA56447ajBpRnkS8dSswWQmrRUBbw6V1h4V6Gz\n/m4MPklkFSM7Yv8+10/8IyC4vFR4YCCyGD3/BB3JsRtw5woWwGMuwhZp/PD32bHk\nfZC8OWBNLbYT1UTXyNLaZjzpk/aUrrXP5vzDUR5DxhBtNalce2vY45RHinf9Urcp\n2TVV7rHQRlFjfF4TPv3+iq8m1u7QWfVBsmKKWSpQsu9qcJAvsWmnQ+ry9dW+fqJY\nXC9bwAijaZgJcUbGjtTRXyaZaoxXNL0ZO7QOkhX901a1WBAzYTh8IYR761nCzTAG\nA3JEKpwm328IGVitnc2ca2KZ36I/0rcUNBKI3A56OMUryInwBEhlJ2rAEYAPEZf/\nZvyiez7iZ5nlzTCKzfDH94qaiRoY6F1npWYOXCgn29ycw2kU+NCHX+pG6sDfCmxr\n2FVcUREQ3U0wkaH5vnxqViehAd8x9jr1x2TTekbRbtcbZktO7ps0LMFeDGr2nx0p\n4nr2rc9qs0Rl4LaoeMO4Cr96joClsobewAu11/wWby/+1YcPLypa22ScBbz5BB9V\nPK6DCWKcGiR/rfK2pJI1OYxHfzDLMV44PvLU+KsdTwJTXUSUv3upIxn2i+VoHGA4\ne2dx4OdLxhAGwpNBDaV2/IHjUQypezErAaXrE3J0fT4Xrp+QaCy/CBvuNTrSjzyz\nytUGZQXgS85K5VSybexokXDxoZ/Nlx8SyK+wwrXv4XVGFa/CBw+VLRTnICq0j3qS\nvbTJw/EM585Z6kyqRfEUDArPPugVrEtVdfSbtXrxDxbOzuCYFn/yCcebgHF85MdB\nj0j84lVyH0yQb9xSFlyd4JInLJEZDhtufEBLMKxyMSYQnyWPqcjWh1waDXd5ZeFw\n1gCj79kTYBeXbJ01glGyr0V9EEWKDVhdr9TBvbbdmUNhyp8iLoa7G2TC8VAjY9JQ\nt8vklzswwHhoVomvW8bsyd9HZ2kfDMZ77wzqUaYO9X6blTlDw4mPdxPO0IhHM7JJ\np9shRidzBFA1xL1aSWPSpjYx0qiajKpK/uNKJnyrrbAkYTt+DpEAv5qB9nvAFbmJ\nn49CYsTxqyqVRiSElFPXN3Rf0qnLH4fXn4fl26jRRdHkZV96+f1AII+g3b+JIgZK\ngjyWcKRReL+mbgcgaw6xj5mdSvDnz9YCilRSPMaI8+rZDJCemS2VHSVhD8yM+3n0\n1BoBx322uKJPhlQ9Qjl38pHf4l2gOIepnzV9/juyAe+hGOrbUn/IRm8eB+4SWI9+\nDU6coVcdYP9PIljU7OPFrl7G6aBUNe2O464MfQKbINxhyCPvFbCL8ph50xpHjy1G\nk/IzrLByjfQqM9G2gngLwIz0Frwbgr3hS5Z/VvEUmdAXmKt6xwx28kNAij16lU1E\nVjsc76TbsbZXejkEH3b4ukXEd/BwSHFDMNNXp1n/s07rvESorhDzMD4wITAJBgUr\nDgMCGgUABBQ2jDd+DUe7kqihYR6vB53AVXPxQAQU3cqWrZq06vBkZs/IL2rnCJli\nO3MCAwGGoA==\n</code></pre>\n<p><strong>truststore.jks</strong></p>\n<pre><code>MIIEjgIBAzCCBEcGCSqGSIb3DQEHAaCCBDgEggQ0MIIEMDCCBCwGCSqGSIb3DQEH\nBqCCBB0wggQZAgEAMIIEEgYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQUCQPL\nV1YP9wunGMWFyv1BwcRTIAACAwDDUICCA9jrocMHqNhm8aHENyLPmEi8qSuSPdut\n++OBZvYRI5Bb2fFwye3dsoo9xEcSpDTcjp3cCiPPnGzcaWyvOvyTFtGr7AuUISte\nqI2bfHd+bR1e7KhC4a8xZDhpsn7TmYTOHGhHJi7W4Yaw6UbgYhzfE++KpqNMfWBk\nt4/4V2n3BNzShtxXDBw9CmT1Fdcv1lJ1j5YWKdgD0/p59ccEZHtiUvY6QOROBfjq\noI6kkMzW/mDJqQDKowLsW2O/UbPaRC1B8Ew0NSlHWhxaU347UFsotW8iKuXVnei0\ngPiPfBFSuZ24MFaz6XENgEZcnNCJBeeK/MGma8i1rOADKbEaErzvlwBNm8BWtlC3\nIx4akym2XSy3pqFJrP+1cJJONwsI766IL72PUyXTBRtKEaqSd6jZZGkiyTPsiiK6\nG3apckGnKpgJLyR6hrUd2SC8bwf92waRne9VihA0O4CovO9G0ab6ud02bEISVQAt\n/n+lnU6FmjK3tGy1P/Kpx1vomkmZkdWqE56dvAQv5DRV7EZQ9TJU8FoAyP4E5RWD\n1AQi7uDA233e1Wv4rYzWhwm/0XeFsdKw/N3rjmeNilgG4/KwSFFkl53fNECDDEmS\nczcEkA99JU6nJBCuFF8kn0yVXTh+8ezgdSiT8LIUtqbldzKR8uMXFlzCMOCdJc21\ncBC7DX9LA+Dz/pkcEj1smtDDSv+zM+DbEA4iJZBlF68xqiZzhrWcmbdtSKN5iUN/\nkkLELUUjO76OIdxXILW2GHLHSe01fbqpHeY9NC732WmF329+ucODzCq9BjxARpAm\nbCEX8tbcOrCqm3947JuSbgW6CxzDd2gzmYoE6d4LSfWLRgQ4SdLpgieVhfbsunBk\nlnvCrnsa/VAQnEMZEzWCgvRAcuRs6bPvUXXFPwrz8OvQoPmdDRA4uWYfhEZZJjq4\nuRGQRt+Bf4v5H1e2yzxSfRKlecJlhpVMyZtNsWTaNgZFX+c1SfzXXZGGMgLBEh9t\nwLFdDWA848eXP97te7boqusR/UTXd6hLDmU5bb5NmjzY92aEK3LfIeLhFlKjWQKF\nFooNxvKA/jyqUt/LxffAxK4co8ivyLzOMdHsPsqTjpkqjro5RgnYJTJWhBLMois5\nsJej6EphOUzBMeEwgdlEs3pbT3/yp8QrhYKUG2HjkUVE2GKVwWNcjRfguGGK8MYC\nB3ztnwPeAblpaPi4aQY55maYGXR3SPTAX2MVGScBfL8GhDZGr/yf7441wi6YntOH\nCYts3VW/0zHAXNTaycdUTSMg9f7O312aYrk59Hd5Yfiw1StzMtdJMnMxlOdgTP33\nw+wwPjAhMAkGBSsOAwIaBQAEFDdfecmJ7H2HFI93DLhyZ4r8Mx2iBBT/uNLzzuIO\nSZI0e5jSFcFmOoYSvwIDAYag\n</code></pre>\n<p>These two base64 encoded strings can be tranformed into binary files with the snippet bellow. Please make sure to replace the empty content with the above base64 encoded strings.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\nimport java.util.Base64;\n\npublic class Base64DecoderUtils {\n\n    public static void main(String[] args) throws IOException {\n        String identityContentAsBase64Encoded = &quot;&quot;;\n        String trustStoreContentAsBase64Encoded = &quot;&quot;;\n        \n        Path identityPath = Paths.get(&quot;/path/to/identity.jks&quot;);\n        Path trustStorePath = Paths.get(&quot;/path/to/truststore.jks&quot;);\n        \n        byte[] decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, identityContentAsBase64Encoded.split(System.lineSeparator())));\n        Files.write(identityPath, decoded, StandardOpenOption.CREATE);\n\n        decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, trustStoreContentAsBase64Encoded.split(System.lineSeparator())));\n        Files.write(trustStorePath, decoded, StandardOpenOption.CREATE);\n    }\n}\n</code></pre>\n<p>The password of these to files are: <strong>secret</strong></p>\n<p>my application property file is:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8443\n\nssl:\n  client-auth: true\n  keystore-path: identity.jks\n  keystore-password: secret\n  truststore-path: truststore.jks\n  truststore-password: secret\n</code></pre>\n<p>I am using the following dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;8.1.7&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;2.7.5&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;2.7.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h1>Update 2023-10-23</h1>\n<p>The supplied configuration such as keymanager or sslcontext is being ignored. It seems like it was never the intention of the developers/maintainers to allow such custom configuration. I opened a pull request here to enable it in tomcat: <a href=\"https://github.com/apache/tomcat/pull/673\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/pull/673</a></p>\n<p>However I don't know whether the maintainers will allow that kind of option to configure the server with a custom sslcontext.</p>\n"},{"tags":["java","logging","spring-cloud-feign","feign"],"comments":[{"owner":{"account_id":454686,"reputation":1461,"user_id":852412,"display_name":"Sigrist"},"score":0,"creation_date":1492716260,"post_id":42751269,"comment_id":74109442,"body_markdown":"Do you have any configuration file for the SLF4J that may be ignoring the logs for the MyClient class?","body":"Do you have any configuration file for the SLF4J that may be ignoring the logs for the MyClient class?"},{"owner":{"account_id":1211515,"reputation":949,"user_id":1179948,"accept_rate":100,"display_name":"Igor Bljahhin"},"score":1,"creation_date":1498466917,"post_id":42751269,"comment_id":76492691,"body_markdown":"In my Spring Boot app Feign&#39;s logging is configured in application.yml as ```logging.level.com.mycompany.admintool.external.persons.resource.CustomerResource: DEBUG```","body":"In my Spring Boot app Feign&#39;s logging is configured in application.yml as <code>logging.level.com.mycompany.admintool.external.persons.resou&zwnj;&#8203;rce.CustomerResource&zwnj;&#8203;: DEBUG</code>"},{"owner":{"account_id":4373010,"reputation":801,"user_id":3566757,"display_name":"Ali M"},"score":0,"creation_date":1517609660,"post_id":42751269,"comment_id":84180457,"body_markdown":"I&#39;m having the same problem here. did you find any solution?","body":"I&#39;m having the same problem here. did you find any solution?"}],"answers":[{"tags":[],"owner":{"account_id":3527180,"reputation":587,"user_id":2947937,"display_name":"Stimp"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1525122741,"creation_date":1525122741,"answer_id":50108265,"question_id":42751269,"body_markdown":"You may also need to configure your log4j logging level for `feign` to DEBUG.  If you are using spring boot, what worked for me is:\r\n\r\n    curl -X POST http://localhost/loggers/feign -H &#39;Content-Type: application/json&#39; -d &#39;{&quot;configuredLevel&quot;: &quot;DEBUG&quot;}&#39;","title":"Feign logging not working when alter level","body":"<p>You may also need to configure your log4j logging level for <code>feign</code> to DEBUG.  If you are using spring boot, what worked for me is:</p>\n\n<pre><code>curl -X POST http://localhost/loggers/feign -H 'Content-Type: application/json' -d '{\"configuredLevel\": \"DEBUG\"}'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":542210,"reputation":660,"user_id":910978,"accept_rate":50,"display_name":"whatacold"},"score":0,"creation_date":1534075564,"post_id":50858978,"comment_id":90572365,"body_markdown":"It can also be set by `@Bean` , see https://github.com/spring-cloud/spring-cloud-netflix/issues/1769","body":"It can also be set by <code>@Bean</code> , see <a href=\"https://github.com/spring-cloud/spring-cloud-netflix/issues/1769\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-netflix/issues/1769</a>"}],"tags":[],"owner":{"account_id":2343711,"reputation":1519,"user_id":2054487,"accept_rate":62,"display_name":"Maverick"},"comment_count":1,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1528983761,"creation_date":1528983761,"answer_id":50858978,"question_id":42751269,"body_markdown":"You need to configure logging in application.properties as below:\r\n\r\n    logging.level.&lt;package path&gt;.MyClient=DEBUG\r\n\r\nIf you&#39;re using application.yml then:\r\n\r\n    logging.level.&lt;package path&gt;.MyClient: DEBUG\r\n\r\nThe log level can be set to tell Feign how much to log. \r\n\r\nOptions are:\r\n\r\n - NONE, No logging (DEFAULT)\r\n - BASIC, Log only the request method and URL and the response status code and execution time\r\n - HEADERS, Log the basic information along with request and response headers\r\n - FULL, Log the headers, body, and metadata for both requests and responses\r\n\r\nExample:\r\n\r\n    logLevel(feign.Logger.Level.NONE)\r\n    or\r\n    logLevel(feign.Logger.Level.BASIC)\r\n    or\r\n    logLevel(feign.Logger.Level.HEADERS)\r\n    or\r\n    logLevel(feign.Logger.Level.FULL)\r\n\r\n\r\nFor more details, you can refer [this][1]\r\n\r\n\r\n  [1]: http://projects.spring.io/spring-cloud/spring-cloud.html#_feign_logging","title":"Feign logging not working when alter level","body":"<p>You need to configure logging in application.properties as below:</p>\n\n<pre><code>logging.level.&lt;package path&gt;.MyClient=DEBUG\n</code></pre>\n\n<p>If you're using application.yml then:</p>\n\n<pre><code>logging.level.&lt;package path&gt;.MyClient: DEBUG\n</code></pre>\n\n<p>The log level can be set to tell Feign how much to log. </p>\n\n<p>Options are:</p>\n\n<ul>\n<li>NONE, No logging (DEFAULT)</li>\n<li>BASIC, Log only the request method and URL and the response status code and execution time</li>\n<li>HEADERS, Log the basic information along with request and response headers</li>\n<li>FULL, Log the headers, body, and metadata for both requests and responses</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>logLevel(feign.Logger.Level.NONE)\nor\nlogLevel(feign.Logger.Level.BASIC)\nor\nlogLevel(feign.Logger.Level.HEADERS)\nor\nlogLevel(feign.Logger.Level.FULL)\n</code></pre>\n\n<p>For more details, you can refer <a href=\"http://projects.spring.io/spring-cloud/spring-cloud.html#_feign_logging\" rel=\"noreferrer\">this</a></p>\n"},{"comments":[{"owner":{"account_id":1158046,"reputation":2465,"user_id":1138137,"accept_rate":67,"display_name":"Alper Akture"},"score":0,"creation_date":1571884544,"post_id":55063617,"comment_id":103389997,"body_markdown":"fyi: This worked for me. I am using logback, and not getting any output in my unit test. I had `feignBuilder.logLevel(Logger.Level.FULL)` but not a logger specified. Adding `feignBuilder.logger(new Slf4JLogger());` then I get output.","body":"fyi: This worked for me. I am using logback, and not getting any output in my unit test. I had <code>feignBuilder.logLevel(Logger.Level.FULL)</code> but not a logger specified. Adding <code>feignBuilder.logger(new Slf4JLogger());</code> then I get output."},{"owner":{"account_id":5073492,"reputation":140,"user_id":4071806,"display_name":"Steve Sether"},"score":0,"creation_date":1623091294,"post_id":55063617,"comment_id":119975264,"body_markdown":"Thank you!  Finally an answer that doesn&#39;t lead me down Yet Another Rabbit Hole, and let me see what&#39;s going on without further searches.  One of my complaints about modern software development is that we&#39;ve added endless layer upon endless layer.  Just configuring debugging leads you down several potential rabbit holes of &quot;ok, where do I put THAT file&quot; and &quot;Ok, where do I find THAT library&quot;, and &quot;Ok, which class am I supposed to import for THAT object where nobody specified the import&quot;.  Or &quot;Ok, where do I add THAT annotation&quot;.  This example is simple, complete, and easy.","body":"Thank you!  Finally an answer that doesn&#39;t lead me down Yet Another Rabbit Hole, and let me see what&#39;s going on without further searches.  One of my complaints about modern software development is that we&#39;ve added endless layer upon endless layer.  Just configuring debugging leads you down several potential rabbit holes of &quot;ok, where do I put THAT file&quot; and &quot;Ok, where do I find THAT library&quot;, and &quot;Ok, which class am I supposed to import for THAT object where nobody specified the import&quot;.  Or &quot;Ok, where do I add THAT annotation&quot;.  This example is simple, complete, and easy."}],"tags":[],"owner":{"account_id":948742,"reputation":733,"user_id":975386,"display_name":"Jean-Alexis Aufauvre"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1552049464,"creation_date":1552049464,"answer_id":55063617,"question_id":42751269,"body_markdown":"    private void setup() {\r\n        //...\r\n        feignBuilder.logger(new MyLogger());\r\n        feignBuilder.logLevel(Logger.Level.FULL);\r\n    }\r\n\r\n    private static class MyLogger extends Logger {\r\n        @Override\r\n        protected void log(String s, String s1, Object... objects) {\r\n            System.out.println(String.format(s + s1, objects)); // Change me!\r\n        }\r\n    }","title":"Feign logging not working when alter level","body":"<pre><code>private void setup() {\n    //...\n    feignBuilder.logger(new MyLogger());\n    feignBuilder.logLevel(Logger.Level.FULL);\n}\n\nprivate static class MyLogger extends Logger {\n    @Override\n    protected void log(String s, String s1, Object... objects) {\n        System.out.println(String.format(s + s1, objects)); // Change me!\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4846874,"reputation":119,"user_id":3910282,"display_name":"roma2341"},"score":0,"creation_date":1672311052,"post_id":55293530,"comment_id":132264028,"body_markdown":"You should remove Configuration annotation from UserClientConfig, because it works well without Configuration. But @Configuration can apply beans application-wide and break you application if for example you add jackson beans there.","body":"You should remove Configuration annotation from UserClientConfig, because it works well without Configuration. But @Configuration can apply beans application-wide and break you application if for example you add jackson beans there."}],"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1553233366,"creation_date":1553233366,"answer_id":55293530,"question_id":42751269,"body_markdown":"This is how i was able to log using Custom Config class \r\n\r\n**Note** Feign logging only responds to the DEBUG level.\r\n\r\n**Config Class**\r\n\r\n    @Configuration\r\n    public class UserClientConfig {\r\n    \r\n        @Bean\r\n        Logger.Level feignLoggerLevel() {\r\n            return Logger.Level.HEADERS;\r\n        }\r\n    } \r\n\r\n**Client**\r\n\r\n    @FeignClient(name = &quot;User&quot;, url = &quot;http://localhost:8080&quot;,configuration=UserClientConfig.class)\r\n    public interface UserClient {\r\n    \r\n        @RequestMapping(method = RequestMethod.GET, value = &quot;/user&quot;)\r\n        List&lt;User&gt; getAllUsers();    \r\n        \r\n    }\r\n\r\napplication.properties \r\n\r\n    logging.level.&lt;pcakgepath&gt;.UserClient: DEBUG\r\n\r\n","title":"Feign logging not working when alter level","body":"<p>This is how i was able to log using Custom Config class </p>\n\n<p><strong>Note</strong> Feign logging only responds to the DEBUG level.</p>\n\n<p><strong>Config Class</strong></p>\n\n<pre><code>@Configuration\npublic class UserClientConfig {\n\n    @Bean\n    Logger.Level feignLoggerLevel() {\n        return Logger.Level.HEADERS;\n    }\n} \n</code></pre>\n\n<p><strong>Client</strong></p>\n\n<pre><code>@FeignClient(name = \"User\", url = \"http://localhost:8080\",configuration=UserClientConfig.class)\npublic interface UserClient {\n\n    @RequestMapping(method = RequestMethod.GET, value = \"/user\")\n    List&lt;User&gt; getAllUsers();    \n\n}\n</code></pre>\n\n<p>application.properties </p>\n\n<pre><code>logging.level.&lt;pcakgepath&gt;.UserClient: DEBUG\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"score":1,"creation_date":1594642210,"post_id":56181660,"comment_id":111187049,"body_markdown":"Following this answer, I managed to increase the logging level adding these lines to my application.properties:\n\n`feign.client.config.&lt;fiegn-client-name or default&gt;.loggerLevel=full` and\n`logging.level.&lt;package&gt;.&lt;feign-client-interface&gt;=DEBUG`","body":"Following this answer, I managed to increase the logging level adding these lines to my application.properties:  <code>feign.client.config.&lt;fiegn-client-name or default&gt;.loggerLevel=full</code> and <code>logging.level.&lt;package&gt;.&lt;feign-client-interface&gt;=DEBUG</code>"},{"owner":{"account_id":10463908,"reputation":1211,"user_id":7785738,"display_name":"Artem Ptushkin"},"score":1,"creation_date":1622735683,"post_id":56181660,"comment_id":119883179,"body_markdown":"Important note, where the name is the value of `@FeignClient(name = &quot;fiegn-client-name&quot;)` parameter","body":"Important note, where the name is the value of <code>@FeignClient(name = &quot;fiegn-client-name&quot;)</code> parameter"},{"owner":{"account_id":2698527,"reputation":2274,"user_id":2622079,"accept_rate":57,"display_name":"fan"},"score":0,"creation_date":1698051124,"post_id":56181660,"comment_id":136351389,"body_markdown":"As of Spring Boot 3 at least, the config is under spring i.e.,\nspring: \n  feign:\n    client:\n      config:\n        default:\n          connectTimeout: 5000\n          readTimeout: 5000\n          loggerLevel: basic","body":"As of Spring Boot 3 at least, the config is under spring i.e., spring:    feign:     client:       config:         default:           connectTimeout: 5000           readTimeout: 5000           loggerLevel: basic"}],"tags":[],"owner":{"account_id":5199669,"reputation":808,"user_id":4159559,"display_name":"Roland"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1698051905,"creation_date":1558078229,"answer_id":56181660,"question_id":42751269,"body_markdown":"First you need to set the logging level for your feign client class to `DEBUG`, as Maverick already mentioned in his answer.\r\n\r\nThen if you use Spring Boot, beside the option to create `@Configuration` classes as Niraj already mentioned in his answer, you can configure each client individually in you application properties/yml config file:\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    openfeign:\r\n      client:\r\n        config:\r\n          the_name_of_your_feign_client:\r\n            connectTimeout: 5000\r\n            readTimeout: 5000\r\n            loggerLevel: basic\r\n```\r\n\r\nOr use default instead of `the_name_of_your_feign_client` to configure all your feign clients in the same way:\r\n\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    openfeign:\r\n      client:\r\n        config:\r\n          default:\r\n            connectTimeout: 5000\r\n            readTimeout: 5000\r\n            loggerLevel: basic\r\n```\r\nThis should be valid for Spring Boot 3.\r\nFor older version the path would be:\r\n```yaml\r\nfeign:\r\n    client:\r\n        config:\r\n            the_name_of_your_feign_client:\r\n```\r\n","title":"Feign logging not working when alter level","body":"<p>First you need to set the logging level for your feign client class to <code>DEBUG</code>, as Maverick already mentioned in his answer.</p>\n<p>Then if you use Spring Boot, beside the option to create <code>@Configuration</code> classes as Niraj already mentioned in his answer, you can configure each client individually in you application properties/yml config file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          the_name_of_your_feign_client:\n            connectTimeout: 5000\n            readTimeout: 5000\n            loggerLevel: basic\n</code></pre>\n<p>Or use default instead of <code>the_name_of_your_feign_client</code> to configure all your feign clients in the same way:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          default:\n            connectTimeout: 5000\n            readTimeout: 5000\n            loggerLevel: basic\n</code></pre>\n<p>This should be valid for Spring Boot 3.\nFor older version the path would be:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>feign:\n    client:\n        config:\n            the_name_of_your_feign_client:\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5940200,"reputation":721,"user_id":4671737,"accept_rate":50,"display_name":"Tony Murphy"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1578558357,"creation_date":1578504768,"answer_id":59651045,"question_id":42751269,"body_markdown":"I hadn&#39;t set a client, and my client calls were failing, and logging wasn&#39;t working.. once I added OkHttpClient and changed logback.xml file, worked fine\r\n\r\n        MyApi myApi = Feign.builder()\r\n                .client(new OkHttpClient())\r\n                .decoder(new JacksonDecoder())\r\n                .encoder(new JacksonEncoder())\r\n                .logger(new Slf4jLogger())\r\n                .logLevel(feign.Logger.Level.FULL)\r\n                .target(MyApi.class, &quot;http://localhost:8082&quot;);\r\n\r\nthis is logback.xml\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;%d %green([%thread]) %highlight(%level) %logger{50} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;logger name=&quot;feign.Logger&quot; level=&quot;DEBUG&quot; /&gt;\r\n        &lt;root level=&quot;INFO&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;","title":"Feign logging not working when alter level","body":"<p>I hadn't set a client, and my client calls were failing, and logging wasn't working.. once I added OkHttpClient and changed logback.xml file, worked fine</p>\n\n<pre><code>    MyApi myApi = Feign.builder()\n            .client(new OkHttpClient())\n            .decoder(new JacksonDecoder())\n            .encoder(new JacksonEncoder())\n            .logger(new Slf4jLogger())\n            .logLevel(feign.Logger.Level.FULL)\n            .target(MyApi.class, \"http://localhost:8082\");\n</code></pre>\n\n<p>this is logback.xml</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"&gt;\n            &lt;pattern&gt;%d %green([%thread]) %highlight(%level) %logger{50} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;logger name=\"feign.Logger\" level=\"DEBUG\" /&gt;\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"STDOUT\"/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19878904,"reputation":186,"user_id":14563324,"display_name":"hitesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628251913,"creation_date":1628251913,"answer_id":68681380,"question_id":42751269,"body_markdown":"Below code changes worked for me in kotlin: \r\n```\r\nimport feign.Logger\r\nimport org.springframework.context.annotation.Bean\r\nimport org.springframework.context.annotation.Configuration\r\n\r\n@Configuration\r\nclass FeignLoggingConfiguration {\r\n\r\n    @Bean\r\n    fun feignLoggerLevel(): Logger.Level {\r\n        return Logger.Level.HEADERS\r\n    }\r\n}\r\n```\r\n\r\nadd this configuration class in client: \r\n```\r\n@FeignClient(name = &quot;yourClient&quot;, url = &quot;\\${base-url}&quot;, configuration = [FeignLoggingConfiguration::class])\r\ninterface yourClient \r\n\r\n```\r\n\r\n**Note:**  please make sure logging level for `yourClient` class is DEBUG\r\n\r\nLoggin level supported by feign : \r\n\r\nNONE, No logging (DEFAULT)\r\n\r\nBASIC, Log only the request method and URL and the response status code and execution time\r\n\r\nHEADERS, Log the basic information along with request and response headers\r\n\r\nFULL, Log the headers, body, and metadata for both requests and responses","title":"Feign logging not working when alter level","body":"<p>Below code changes worked for me in kotlin:</p>\n<pre><code>import feign.Logger\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\n\n@Configuration\nclass FeignLoggingConfiguration {\n\n    @Bean\n    fun feignLoggerLevel(): Logger.Level {\n        return Logger.Level.HEADERS\n    }\n}\n</code></pre>\n<p>add this configuration class in client:</p>\n<pre><code>@FeignClient(name = &quot;yourClient&quot;, url = &quot;\\${base-url}&quot;, configuration = [FeignLoggingConfiguration::class])\ninterface yourClient \n\n</code></pre>\n<p><strong>Note:</strong>  please make sure logging level for <code>yourClient</code> class is DEBUG</p>\n<p>Loggin level supported by feign :</p>\n<p>NONE, No logging (DEFAULT)</p>\n<p>BASIC, Log only the request method and URL and the response status code and execution time</p>\n<p>HEADERS, Log the basic information along with request and response headers</p>\n<p>FULL, Log the headers, body, and metadata for both requests and responses</p>\n"},{"tags":[],"owner":{"account_id":3414783,"reputation":3286,"user_id":2863995,"accept_rate":57,"display_name":"Arnold Galovics"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638562510,"creation_date":1638562510,"answer_id":70220179,"question_id":42751269,"body_markdown":"I&#39;m kinda late from here but let me try to help fellow people finding this thread.\r\n\r\nThere are two things we have to distinguish. Feign logging when using plain Feign and when using it with Spring Cloud OpenFeign.\r\n\r\nWith plain Feign, you gotta do a few things do make things work:\r\n\r\n 1. You have to set the log level for your client\r\n 2. You have to configure the appropriate log adapter of your choice\r\n 3. You have to set the `feign` logger to `DEBUG`\r\n\r\nLet me show you how to do it:\r\n\r\n    Feign.builder()\r\n         .logLevel(Logger.Level.FULL)\r\n         .logger(new Slf4jLogger())\r\n         .target(MyClient.class, &quot;http://localhost:8081&quot;);\r\n\r\nIn this particular case, I&#39;m using SLF4J as the logging adapter. This configuration took care of step 1 and 2. \r\nNow let&#39;s configure the logger. And don&#39;t forget, this may vary depending on your logging setup, I&#39;ll show you one with Spring Boot:\r\n\r\n`application.properties`:\r\n\r\n    logging.level.feign=DEBUG\r\n\r\nBut this could be done with plain Logback in your `logback.xml`, log4j, whatever logging system you have. The only important thing is to configure the `feign` named logger to `DEBUG`.\r\n\r\nThis is due to the fact that the Feign library logs everything with the `feign` logger and not with the class name of the target clients.\r\n\r\nWith Spring Cloud OpenFeign, it changes a little bit because Spring uses the client&#39;s class name to set up the logger.\r\n\r\nFor this case, we only have to do 2 things - if you&#39;re using the `@FeignClient` annotation.\r\n\r\n 1. Configure the log level for the clients\r\n 2. Configure the appropriate client logger to `DEBUG`\r\n\r\nThe first can be done this way:\r\n\r\n    @Configuration\r\n    public class FeignConfiguration {\r\n        @Bean\r\n        public Logger.Level loggerLevel() {\r\n            return Logger.Level.FULL;\r\n        }\r\n    }\r\n\r\nThis will configure the log level for all the Feign clients unless you use a specific configuration in the `@FeignClient` annotation.\r\n\r\nSecond thing, enable `DEBUG` logging for the client&#39;s class/package.\r\n\r\n`application.properties`:\r\n\r\n    logging.level.com.example.MyClient=DEBUG\r\n\r\nIf you&#39;re struggling with Feign configuration, you might wanna take a look at my [articles][1] or [my course][2].\r\n \r\nCheers.\r\n\r\n\r\n  [1]: https://arnoldgalovics.com/tag/feign/?utm_source=stackoverflow&amp;utm_medium=post&amp;utm_campaign=tag-feign\r\n  [2]: https://www.udemy.com/course/mastering-microservice-communication-with-spring-cloud-feign/?referralCode=437693FE520ABDF6F4E3","title":"Feign logging not working when alter level","body":"<p>I'm kinda late from here but let me try to help fellow people finding this thread.</p>\n<p>There are two things we have to distinguish. Feign logging when using plain Feign and when using it with Spring Cloud OpenFeign.</p>\n<p>With plain Feign, you gotta do a few things do make things work:</p>\n<ol>\n<li>You have to set the log level for your client</li>\n<li>You have to configure the appropriate log adapter of your choice</li>\n<li>You have to set the <code>feign</code> logger to <code>DEBUG</code></li>\n</ol>\n<p>Let me show you how to do it:</p>\n<pre><code>Feign.builder()\n     .logLevel(Logger.Level.FULL)\n     .logger(new Slf4jLogger())\n     .target(MyClient.class, &quot;http://localhost:8081&quot;);\n</code></pre>\n<p>In this particular case, I'm using SLF4J as the logging adapter. This configuration took care of step 1 and 2.\nNow let's configure the logger. And don't forget, this may vary depending on your logging setup, I'll show you one with Spring Boot:</p>\n<p><code>application.properties</code>:</p>\n<pre><code>logging.level.feign=DEBUG\n</code></pre>\n<p>But this could be done with plain Logback in your <code>logback.xml</code>, log4j, whatever logging system you have. The only important thing is to configure the <code>feign</code> named logger to <code>DEBUG</code>.</p>\n<p>This is due to the fact that the Feign library logs everything with the <code>feign</code> logger and not with the class name of the target clients.</p>\n<p>With Spring Cloud OpenFeign, it changes a little bit because Spring uses the client's class name to set up the logger.</p>\n<p>For this case, we only have to do 2 things - if you're using the <code>@FeignClient</code> annotation.</p>\n<ol>\n<li>Configure the log level for the clients</li>\n<li>Configure the appropriate client logger to <code>DEBUG</code></li>\n</ol>\n<p>The first can be done this way:</p>\n<pre><code>@Configuration\npublic class FeignConfiguration {\n    @Bean\n    public Logger.Level loggerLevel() {\n        return Logger.Level.FULL;\n    }\n}\n</code></pre>\n<p>This will configure the log level for all the Feign clients unless you use a specific configuration in the <code>@FeignClient</code> annotation.</p>\n<p>Second thing, enable <code>DEBUG</code> logging for the client's class/package.</p>\n<p><code>application.properties</code>:</p>\n<pre><code>logging.level.com.example.MyClient=DEBUG\n</code></pre>\n<p>If you're struggling with Feign configuration, you might wanna take a look at my <a href=\"https://arnoldgalovics.com/tag/feign/?utm_source=stackoverflow&amp;utm_medium=post&amp;utm_campaign=tag-feign\" rel=\"nofollow noreferrer\">articles</a> or <a href=\"https://www.udemy.com/course/mastering-microservice-communication-with-spring-cloud-feign/?referralCode=437693FE520ABDF6F4E3\" rel=\"nofollow noreferrer\">my course</a>.</p>\n<p>Cheers.</p>\n"},{"tags":[],"owner":{"account_id":10594228,"reputation":1,"user_id":11942232,"display_name":"user11942232"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673444403,"creation_date":1673444403,"answer_id":75083952,"question_id":42751269,"body_markdown":"U can put log level in bootstrap/application property it will give u all the debug logs for your spring boot application \r\nfor example:-\r\nlogging.leve.root=debug","title":"Feign logging not working when alter level","body":"<p>U can put log level in bootstrap/application property it will give u all the debug logs for your spring boot application\nfor example:-\nlogging.leve.root=debug</p>\n"}],"owner":{"account_id":97808,"reputation":4702,"user_id":265119,"accept_rate":31,"display_name":"Magick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81627,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"answer_count":9,"score":43,"last_activity_date":1698051905,"creation_date":1489342665,"question_id":42751269,"body_markdown":"I&#39;m trying to get logging working for each request from a Feign rest client.\r\n\r\nHowever I cannot get the logging to work, while &#39;standard&#39; Slf4j logging does work.\r\n\r\nI have the following:\r\n\r\n    public MyClient() {\r\n        initConnectionProperties();\r\n        this.service = Feign.builder()\r\n            .contract(new JAXRSContract())\r\n            .decoder(getJacksonDecoder())\r\n            .encoder(getJacksonEncoder())\r\n            .requestInterceptor(new BasicAuthRequestInterceptor(user, password))\r\n            .logger(new Slf4jLogger(MyClient.class)) //not working\r\n            .logLevel(feign.Logger.Level.BASIC)\r\n            .target(MyClient.class, this.url);\r\n        logger.info(&quot;Connection parameters: url = &quot; + url + &quot;, user = &quot; + user); // working\r\n    }","title":"Feign logging not working when alter level","body":"<p>I'm trying to get logging working for each request from a Feign rest client.</p>\n<p>However I cannot get the logging to work, while 'standard' Slf4j logging does work.</p>\n<p>I have the following:</p>\n<pre><code>public MyClient() {\n    initConnectionProperties();\n    this.service = Feign.builder()\n        .contract(new JAXRSContract())\n        .decoder(getJacksonDecoder())\n        .encoder(getJacksonEncoder())\n        .requestInterceptor(new BasicAuthRequestInterceptor(user, password))\n        .logger(new Slf4jLogger(MyClient.class)) //not working\n        .logLevel(feign.Logger.Level.BASIC)\n        .target(MyClient.class, this.url);\n    logger.info(&quot;Connection parameters: url = &quot; + url + &quot;, user = &quot; + user); // working\n}\n</code></pre>\n"},{"tags":["java","android","sockets","mirroring"],"answers":[{"tags":[],"owner":{"account_id":474397,"reputation":1849,"user_id":884052,"display_name":"Ajeet47"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389244887,"creation_date":1389244887,"answer_id":21012178,"question_id":21011724,"body_markdown":"it possible but difficult to implement, instead you can use VNC implemention on android .\r\n\r\n1) https://code.google.com/p/fastdroid-vnc/\r\n\r\nor \r\n\r\n2) http://code.google.com/p/android-vnc-server/\r\n\r\nor \r\n\r\nsearch android VNC server porting.\r\n","title":"screen mirroring in android","body":"<p>it possible but difficult to implement, instead you can use VNC implemention on android .</p>\n\n<p>1) <a href=\"https://code.google.com/p/fastdroid-vnc/\" rel=\"nofollow\">https://code.google.com/p/fastdroid-vnc/</a></p>\n\n<p>or </p>\n\n<p>2) <a href=\"http://code.google.com/p/android-vnc-server/\" rel=\"nofollow\">http://code.google.com/p/android-vnc-server/</a></p>\n\n<p>or </p>\n\n<p>search android VNC server porting.</p>\n"},{"comments":[{"owner":{"account_id":10088210,"reputation":141,"user_id":7456015,"accept_rate":0,"display_name":"Ankit Kamboj"},"score":0,"creation_date":1527165865,"post_id":41502551,"comment_id":88031549,"body_markdown":"I have downloaded it. But it is not working. Plz check.","body":"I have downloaded it. But it is not working. Plz check."},{"owner":{"account_id":4717983,"reputation":521,"user_id":3816668,"accept_rate":14,"display_name":"Rajesh"},"score":0,"creation_date":1532081472,"post_id":41502551,"comment_id":89850377,"body_markdown":"@Phaneendra Kasalanati, thanks for sample.its working fine for me.is it possible to perform actions on the mirrored screen?","body":"@Phaneendra Kasalanati, thanks for sample.its working fine for me.is it possible to perform actions on the mirrored screen?"},{"owner":{"account_id":18005943,"reputation":351,"user_id":13086711,"display_name":"rajithShetty"},"score":0,"creation_date":1664091745,"post_id":41502551,"comment_id":130388626,"body_markdown":"does this support control of one screen to another?","body":"does this support control of one screen to another?"}],"tags":[],"owner":{"account_id":6324969,"reputation":398,"user_id":4911707,"display_name":"Phaneendra Kasalanati"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1483694663,"creation_date":1483694663,"answer_id":41502551,"question_id":21011724,"body_markdown":"The same way I implemented Android screen mirroring which are connected in same network. Code is available @ https://github.com/phaneendrak5757/ScreenMirroring","title":"screen mirroring in android","body":"<p>The same way I implemented Android screen mirroring which are connected in same network. Code is available @ <a href=\"https://github.com/phaneendrak5757/ScreenMirroring\" rel=\"nofollow noreferrer\">https://github.com/phaneendrak5757/ScreenMirroring</a></p>\n"}],"owner":{"account_id":1010883,"reputation":277,"user_id":1023478,"accept_rate":11,"display_name":"Ankith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11818,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698051820,"creation_date":1389242518,"question_id":21011724,"body_markdown":"I want to implement screen mirroring in Android platform.\r\n\r\nI am thinking to follow this approach, is there any better way for the same:\r\n\r\n1. Open socket connection Android and PC.  \r\n2. Capture screen or take screenshot at regular intervals and send it through socket.  \r\n3. Display the received image in Canvas\r\n\r\nLanguage: Java, Socket programming\r\n\r\n**My questions**\r\n\r\n1. Is there any other better way to implement the above feature?  \r\n2. How do I capture screen in Android Platform?","title":"screen mirroring in android","body":"<p>I want to implement screen mirroring in Android platform.</p>\n\n<p>I am thinking to follow this approach, is there any better way for the same:</p>\n\n<ol>\n<li>Open socket connection Android and PC.  </li>\n<li>Capture screen or take screenshot at regular intervals and send it through socket.  </li>\n<li>Display the received image in Canvas</li>\n</ol>\n\n<p>Language: Java, Socket programming</p>\n\n<p><strong>My questions</strong></p>\n\n<ol>\n<li>Is there any other better way to implement the above feature?  </li>\n<li>How do I capture screen in Android Platform?</li>\n</ol>\n"},{"tags":["java","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":1386466,"reputation":417,"user_id":1318411,"display_name":"sen4ik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1579311246,"creation_date":1579310934,"answer_id":59796785,"question_id":59780811,"body_markdown":"I found an answer by looking at logged rest-assured issue [here][1].\r\n\r\nI just had to make sure I am not using STRICT mode (which is the default):\r\n```\r\n.config(RestAssuredConfig.config().httpClient(HttpClientConfig.httpClientConfig().httpMultipartMode(HttpMultipartMode.BROWSER_COMPATIBLE))\r\n```\r\n\r\n\r\n  [1]: https://github.com/rest-assured/rest-assured/issues/844","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>I found an answer by looking at logged rest-assured issue <a href=\"https://github.com/rest-assured/rest-assured/issues/844\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I just had to make sure I am not using STRICT mode (which is the default):</p>\n\n<pre><code>.config(RestAssuredConfig.config().httpClient(HttpClientConfig.httpClientConfig().httpMultipartMode(HttpMultipartMode.BROWSER_COMPATIBLE))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2853559,"reputation":1838,"user_id":2450219,"accept_rate":83,"display_name":"ITurchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698051537,"creation_date":1698051537,"answer_id":77343891,"question_id":59780811,"body_markdown":"Another solution (HttpMultipartMode.BROWSER_COMPATIBLE didn&#39;t work for me)\r\n\r\nJust use MultiPartSpecBuilder with specified charset\r\n\r\n    .multiPart(MultiPartSpecBuilder(DocumentStatus.Действующий.name)\r\n        .controlName(&quot;status&quot;).mimeType(&quot;text&quot;)\r\n        .charset(Charsets.UTF_8)\r\n        .build())","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>Another solution (HttpMultipartMode.BROWSER_COMPATIBLE didn't work for me)</p>\n<p>Just use MultiPartSpecBuilder with specified charset</p>\n<pre><code>.multiPart(MultiPartSpecBuilder(DocumentStatus.Действующий.name)\n    .controlName(&quot;status&quot;).mimeType(&quot;text&quot;)\n    .charset(Charsets.UTF_8)\n    .build())\n</code></pre>\n"}],"owner":{"account_id":1386466,"reputation":417,"user_id":1318411,"display_name":"sen4ik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1640,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59796785,"answer_count":2,"score":2,"last_activity_date":1698051537,"creation_date":1579231841,"question_id":59780811,"body_markdown":"I am sending POST call to an endpoint with file that does have Cyrillic characters in the filename. I have tried setting encoding to UTF-8 in every place I knew about.\r\n\r\n```\r\nRestAssured.config = RestAssured.config()\r\n        .encoderConfig(encoderConfig().defaultContentCharset(&quot;UTF-8&quot;))\r\n        .encoderConfig(encoderConfig().defaultCharsetForContentType(&quot;UTF-8&quot;, &quot;multipart/form-data&quot;))\r\n        .multiPartConfig(multiPartConfig().defaultCharset(&quot;UTF-8&quot;))\r\n        .decoderConfig(decoderConfig().defaultContentCharset(&quot;UTF-8&quot;))\r\n        .decoderConfig(decoderConfig().defaultCharsetForContentType(&quot;UTF-8&quot;, &quot;multipart/form-data&quot;));\r\n\r\nRequestSpecification rs = given()\r\n        .baseUri(baseUrl)\r\n        .header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n        .header(getAuthHeader())\r\n        .config(RestAssured.config)\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(file)\r\n                        .controlName(&quot;file&quot;)\r\n                        .mimeType(&quot;audio/mpeg&quot;)\r\n                        .fileName(file.getName())\r\n                        .charset(&quot;UTF-8&quot;)\r\n                        .build()\r\n        )\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(categoryId)\r\n                        .controlName(&quot;categoryId&quot;)\r\n                        .build()\r\n        )\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(fileTitle)\r\n                        .charset(Charsets.UTF_8)\r\n                        .controlName(&quot;fileTitle&quot;)\r\n                        .build()\r\n        )\r\n        .log().everything();\r\n\r\nrs\r\n    .when()\r\n        .post(FilePaths.add.value)\r\n    .then()\r\n        .log().everything()\r\n        .statusCode(201)\r\n        .contentType(ContentType.JSON);\r\n```\r\n\r\nWhen I am debugging an API code, I can see that in above case content-disposition header comes with Cyrillic characters replaced with question mark: `form-data; name=&quot;file&quot;; filename=&quot;??????.mp3&quot;`. \r\n\r\nWhen I make same call with Postman, it works just fine. The only difference I see between rest-assured call and Postman call is the content-disposition header.\r\n\r\nAny idea what needs to be tweaked for rest-assured configuration?","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>I am sending POST call to an endpoint with file that does have Cyrillic characters in the filename. I have tried setting encoding to UTF-8 in every place I knew about.</p>\n\n<pre><code>RestAssured.config = RestAssured.config()\n        .encoderConfig(encoderConfig().defaultContentCharset(\"UTF-8\"))\n        .encoderConfig(encoderConfig().defaultCharsetForContentType(\"UTF-8\", \"multipart/form-data\"))\n        .multiPartConfig(multiPartConfig().defaultCharset(\"UTF-8\"))\n        .decoderConfig(decoderConfig().defaultContentCharset(\"UTF-8\"))\n        .decoderConfig(decoderConfig().defaultCharsetForContentType(\"UTF-8\", \"multipart/form-data\"));\n\nRequestSpecification rs = given()\n        .baseUri(baseUrl)\n        .header(\"Content-Type\", \"multipart/form-data\")\n        .header(getAuthHeader())\n        .config(RestAssured.config)\n        .multiPart(\n                new MultiPartSpecBuilder(file)\n                        .controlName(\"file\")\n                        .mimeType(\"audio/mpeg\")\n                        .fileName(file.getName())\n                        .charset(\"UTF-8\")\n                        .build()\n        )\n        .multiPart(\n                new MultiPartSpecBuilder(categoryId)\n                        .controlName(\"categoryId\")\n                        .build()\n        )\n        .multiPart(\n                new MultiPartSpecBuilder(fileTitle)\n                        .charset(Charsets.UTF_8)\n                        .controlName(\"fileTitle\")\n                        .build()\n        )\n        .log().everything();\n\nrs\n    .when()\n        .post(FilePaths.add.value)\n    .then()\n        .log().everything()\n        .statusCode(201)\n        .contentType(ContentType.JSON);\n</code></pre>\n\n<p>When I am debugging an API code, I can see that in above case content-disposition header comes with Cyrillic characters replaced with question mark: <code>form-data; name=\"file\"; filename=\"??????.mp3\"</code>. </p>\n\n<p>When I make same call with Postman, it works just fine. The only difference I see between rest-assured call and Postman call is the content-disposition header.</p>\n\n<p>Any idea what needs to be tweaked for rest-assured configuration?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","keycloak"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697782810,"post_id":77327028,"comment_id":136325334,"body_markdown":"instead of `.requestMatchers(&quot;auth/**&quot;).permitAll()` write `.requestMatchers(&quot;/auth/**&quot;).permitAll()`. You forgot to add `/` before `auth`.","body":"instead of <code>.requestMatchers(&quot;auth&#47;**&quot;).permitAll()</code> write <code>.requestMatchers(&quot;&#47;auth&#47;**&quot;).permitAll()</code>. You forgot to add <code>&#47;</code> before <code>auth</code>."}],"answers":[{"comments":[{"owner":{"account_id":19261826,"reputation":1,"user_id":14077540,"display_name":"Vinicius Finger"},"score":1,"creation_date":1697801738,"post_id":77327674,"comment_id":136328657,"body_markdown":"Hey lptrk, thanks for you answer! I already tested this but does&#39;nt works. In my auth controller I only have a post mapping on /auth.","body":"Hey lptrk, thanks for you answer! I already tested this but does&#39;nt works. In my auth controller I only have a post mapping on /auth."}],"tags":[],"owner":{"account_id":29712283,"reputation":1,"user_id":22771622,"display_name":"lptrk"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697760744,"creation_date":1697760744,"answer_id":77327674,"question_id":77327028,"body_markdown":"Did you check the Controller?\r\nThere may be a chance you didn&#39;t add the RequestMapping to the URL in RequestMatchers:\r\n\r\nMaybe  `&quot;api/v1/auth/**&quot;`\r\n\r\ninsted of `&quot;auth/**&quot;`\r\n\r\nDepending of your RequestMapping","title":"Spring Security 6 .permitAll() not working","body":"<p>Did you check the Controller?\nThere may be a chance you didn't add the RequestMapping to the URL in RequestMatchers:</p>\n<p>Maybe  <code>&quot;api/v1/auth/**&quot;</code></p>\n<p>insted of <code>&quot;auth/**&quot;</code></p>\n<p>Depending of your RequestMapping</p>\n"},{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1697810133,"post_id":77330708,"comment_id":136330209,"body_markdown":"Are you sure you want to keep sessions? OAuth2 resource servers are usually configured as stateless, which removes the need for CSRF protection (you could completely disable CSRF protection in this filter-chain).","body":"Are you sure you want to keep sessions? OAuth2 resource servers are usually configured as stateless, which removes the need for CSRF protection (you could completely disable CSRF protection in this filter-chain)."}],"tags":[],"owner":{"account_id":19261826,"reputation":1,"user_id":14077540,"display_name":"Vinicius Finger"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698051254,"creation_date":1697802651,"answer_id":77330708,"question_id":77327028,"body_markdown":"I solved the problem! In my security filter chain I needed to ignore the /auth in CSRF config:\r\n```java\r\nreturn http\r\n       .cors(Customizer.withDefaults())\r\n       .csrf(csrf -&gt; csrf\r\n\t\t\t.csrfTokenRequestHandler(csrfRequestHandler)\r\n\t\t\t.ignoringRequestMatchers(&quot;/auth/**&quot;)\r\n\t\t\t.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\r\n       .authorizeHttpRequests(requests -&gt; requests\r\n\t\t\t.requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll()\r\n\t\t\t.anyRequest().authenticated())\r\n       .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n\t\t\t.jwt(jwt -&gt; jwt\r\n\t\t\t\t.jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\r\n       .build();\r\n```","title":"Spring Security 6 .permitAll() not working","body":"<p>I solved the problem! In my security filter chain I needed to ignore the /auth in CSRF config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return http\n       .cors(Customizer.withDefaults())\n       .csrf(csrf -&gt; csrf\n            .csrfTokenRequestHandler(csrfRequestHandler)\n            .ignoringRequestMatchers(&quot;/auth/**&quot;)\n            .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\n       .authorizeHttpRequests(requests -&gt; requests\n            .requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll()\n            .anyRequest().authenticated())\n       .oauth2ResourceServer(oauth2 -&gt; oauth2\n            .jwt(jwt -&gt; jwt\n                .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\n       .build();\n</code></pre>\n"}],"owner":{"account_id":19261826,"reputation":1,"user_id":14077540,"display_name":"Vinicius Finger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77330708,"answer_count":2,"score":0,"last_activity_date":1698051254,"creation_date":1697748698,"question_id":77327028,"body_markdown":"I&#39;m bulding an API using Java 21, Spring boot 3 and spring security 6 authenticating in keycloak 22.\r\n\r\nI have this code that configure my spring security:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        CsrfTokenRequestAttributeHandler csrfRequestHandler = new CsrfTokenRequestAttributeHandler();\r\n        csrfRequestHandler.setCsrfRequestAttributeName(&quot;_csrf&quot;);\r\n    \r\n        return http\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(csrf -&gt; csrf\r\n                        .csrfTokenRequestHandler(csrfRequestHandler)\r\n                        .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\r\n                .authorizeHttpRequests(requests -&gt; requests\r\n                        .requestMatchers(&quot;auth/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwt -&gt; jwt\r\n                                .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\r\n    \r\n                .build();\r\n    }\r\n\r\n\r\nI also have this configuration pointing to my Keycloak to validate the token.\r\n`\r\nsecurity:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: &#39;http://localhost:8080/realms/core-creare&#39;\r\n`\r\n\r\nI&#39;m trying to bypass authentication in the path &quot;/auth&quot;, but the .permitAll() its not working. When I do a post request in &quot;/auth&quot;, return as 401 unauthorized.","title":"Spring Security 6 .permitAll() not working","body":"<p>I'm bulding an API using Java 21, Spring boot 3 and spring security 6 authenticating in keycloak 22.</p>\n<p>I have this code that configure my spring security:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    CsrfTokenRequestAttributeHandler csrfRequestHandler = new CsrfTokenRequestAttributeHandler();\n    csrfRequestHandler.setCsrfRequestAttributeName(&quot;_csrf&quot;);\n\n    return http\n            .cors(Customizer.withDefaults())\n            .csrf(csrf -&gt; csrf\n                    .csrfTokenRequestHandler(csrfRequestHandler)\n                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\n            .authorizeHttpRequests(requests -&gt; requests\n                    .requestMatchers(&quot;auth/**&quot;).permitAll()\n                    .anyRequest().authenticated())\n            .oauth2ResourceServer(oauth2 -&gt; oauth2\n                    .jwt(jwt -&gt; jwt\n                            .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\n\n            .build();\n}\n</code></pre>\n<p>I also have this configuration pointing to my Keycloak to validate the token.\n<code>security: oauth2: resourceserver: jwt: issuer-uri: 'http://localhost:8080/realms/core-creare'</code></p>\n<p>I'm trying to bypass authentication in the path &quot;/auth&quot;, but the .permitAll() its not working. When I do a post request in &quot;/auth&quot;, return as 401 unauthorized.</p>\n"},{"tags":["java","amazon-web-services","amazon-elasticache","aws-java-sdk"],"answers":[{"comments":[{"owner":{"account_id":6756948,"reputation":1523,"user_id":5205011,"accept_rate":47,"display_name":"davidb"},"score":0,"creation_date":1698044271,"post_id":77342502,"comment_id":136350340,"body_markdown":"So I tried adding `:PerNode` to all metric names but that did not help. I also checked IAM permissions and `cloudwatch:GetMetricStatistics` is added to the policy. I also tried running AWS cli with the same parameters and time frame but I got an empty list as well. I reckon if the permissions were incorrect I would get an error stating this? I had permission errors before and got permission errors printed out back then. Time format I&#39;m using is `2023-10-10T07:00:00Z`","body":"So I tried adding <code>:PerNode</code> to all metric names but that did not help. I also checked IAM permissions and <code>cloudwatch:GetMetricStatistics</code> is added to the policy. I also tried running AWS cli with the same parameters and time frame but I got an empty list as well. I reckon if the permissions were incorrect I would get an error stating this? I had permission errors before and got permission errors printed out back then. Time format I&#39;m using is <code>2023-10-10T07:00:00Z</code>"}],"tags":[],"owner":{"account_id":6676906,"reputation":1323,"user_id":8747361,"display_name":"Chaitanya Chitturi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031755,"creation_date":1698031755,"answer_id":77342502,"question_id":77327973,"body_markdown":"Did you check your IAM? \r\nMake sure that your AWS IAM user or role, which is used to create the Amazon CloudWatch client, has the necessary permissions to read the Elasticache metrics from CloudWatch. Verify the IAM policies attached to the user or role to ensure it has permission for cloudwatch:GetMetricStatistics.\r\n\r\nFrom a quick review of your code, I can&#39;t see any obvious errors, but I do notice a potential issue with the &quot;MetricName&quot; in the getSumMetricValue and getAverageMetricValue methods.\r\n\r\nYou are specifying metric names like &quot;SwapUsage&quot; and &quot;CurrConnections&quot; in your code, but Elasticache metrics are usually reported with metric names like &quot;SwapUsage:PerNode&quot; and &quot;CurrConnections:PerNode.&quot; These are examples, and the actual metric names might have additional suffixes to differentiate between different nodes.","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>Did you check your IAM?\nMake sure that your AWS IAM user or role, which is used to create the Amazon CloudWatch client, has the necessary permissions to read the Elasticache metrics from CloudWatch. Verify the IAM policies attached to the user or role to ensure it has permission for cloudwatch:GetMetricStatistics.</p>\n<p>From a quick review of your code, I can't see any obvious errors, but I do notice a potential issue with the &quot;MetricName&quot; in the getSumMetricValue and getAverageMetricValue methods.</p>\n<p>You are specifying metric names like &quot;SwapUsage&quot; and &quot;CurrConnections&quot; in your code, but Elasticache metrics are usually reported with metric names like &quot;SwapUsage:PerNode&quot; and &quot;CurrConnections:PerNode.&quot; These are examples, and the actual metric names might have additional suffixes to differentiate between different nodes.</p>\n"},{"tags":[],"owner":{"account_id":6756948,"reputation":1523,"user_id":5205011,"accept_rate":47,"display_name":"davidb"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1698051156,"creation_date":1698051156,"answer_id":77343851,"question_id":77327973,"body_markdown":"Ok, so I found out what was wrong. I had a look at AWS metrics in Cloudwatch metrics(not from Elasticache Metrics tab) and it turned out that each node in Elasticache is treated as `CacheClusterId`, where I thought each node was `CacheNodeId`. So I had a cluster with 3 nodes and each node has its own `CacheClusterId`, and under that you have `CacheNodeId` like 001. In the code above I only had to change `CacheNodeId` to `CacheClusterId` and it worked like a charm. ","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>Ok, so I found out what was wrong. I had a look at AWS metrics in Cloudwatch metrics(not from Elasticache Metrics tab) and it turned out that each node in Elasticache is treated as <code>CacheClusterId</code>, where I thought each node was <code>CacheNodeId</code>. So I had a cluster with 3 nodes and each node has its own <code>CacheClusterId</code>, and under that you have <code>CacheNodeId</code> like 001. In the code above I only had to change <code>CacheNodeId</code> to <code>CacheClusterId</code> and it worked like a charm.</p>\n"}],"owner":{"account_id":6756948,"reputation":1523,"user_id":5205011,"accept_rate":47,"display_name":"davidb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77343851,"answer_count":2,"score":3,"last_activity_date":1698051156,"creation_date":1697767909,"question_id":77327973,"body_markdown":"I am trying to retrieve some Elasticache metrics from CloudWatch using Java SDK 1.x. I have several classes for multiple services, and they all work, except for Elasticache. This class is passed a list of Elasticache nodes, along with start and end times. For each node, I&#39;m attempting to retrieve some metrics from Elasticache with a 30-minute period. However, for some reason, I keep getting values of 0.0 for each metric. I have confirmed that the metrics are not empty in the AWS console. Here&#39;s my code:\r\n\r\n    public class ElastiCacheCWMetricsRetriever {\r\n        private final AmazonCloudWatch cloudWatchClient;\r\n    \r\n        public ElastiCacheCWMetricsRetriever(AmazonCloudWatch cloudWatchClient) {\r\n            this.cloudWatchClient = cloudWatchClient;\r\n        }\r\n    \r\n    \r\n        public Map&lt;String, Map&lt;String, Object&gt;&gt; getElastiCacheMetrics(List&lt;String&gt; nodeNames, \r\n            String startTimeStr, String endTimeStr) {\r\n            Map&lt;String, Map&lt;String, Object&gt;&gt; elastiCacheMetricsMap = new HashMap&lt;&gt;();\r\n    \r\n            try {\r\n                SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;);\r\n                Date startTime = dateFormat.parse(startTimeStr);\r\n                Date endTime = dateFormat.parse(endTimeStr);\r\n    \r\n                for (String nodeName : nodeNames) {\r\n                    Map&lt;String, Object&gt; nodeMetrics = new HashMap&lt;&gt;();\r\n    \r\n                    nodeMetrics.put(&quot;SwapUsage&quot;, getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;SwapUsage&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\r\n                    Double SwapUsage = getSumMetricValue(&quot;AWS/ElastiCache&quot;, &quot;SwapUsage&quot;, \r\n                        &quot;CacheNodeId&quot;, nodeName, startTime, endTime);\r\n                    System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + \r\n                        String.valueOf(SwapUsage));\r\n    \r\n                    nodeMetrics.put(&quot;CurrentConnections&quot;, getSumMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;CurrConnections&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\r\n    \r\n                    nodeMetrics.put(&quot;DatabaseMemoryUsagePercentage&quot;, \r\n                    getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;DatabaseMemoryUsagePercentage&quot;, \r\n                        &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\r\n    \r\n                    nodeMetrics.put(&quot;EngineCPUUtilization&quot;, \r\n                         getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;EngineCPUUtilization&quot;, \r\n                         &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\r\n    \r\n                    Double EngineCPUUtil = getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;EngineCPUUtilization&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0;\r\n                    System.out.println(&quot;EngineCPUUtilization for &quot; + nodeName + &quot; is &quot; + String.valueOf(EngineCPUUtil));\r\n                    elastiCacheMetricsMap.put(nodeName, nodeMetrics);\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\r\n            }   \r\n            return elastiCacheMetricsMap;\r\n        }\r\n    \r\n         private double getAverageMetricValue(String namespace, String metricName, String \r\n             dimensionName, String dimensionValue, Date startTime, Date endTime) {\r\n             int period = calculatePeriod(startTime, endTime);\r\n             return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Average&quot;);\r\n         }\r\n    \r\n        private double getSumMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime) {\r\n            int period = calculatePeriod(startTime, endTime);\r\n            return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Sum&quot;);\r\n        }\r\n    \r\n        private double getMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime, int period, String statistic) {\r\n            try {\r\n                GetMetricStatisticsRequest request = new GetMetricStatisticsRequest()\r\n                    .withNamespace(namespace)\r\n                    .withMetricName(metricName)\r\n                    .withDimensions(new Dimension().withName(dimensionName).withValue(dimensionValue))\r\n                    .withStartTime(startTime)\r\n                    .withEndTime(endTime)\r\n                    .withPeriod(period)\r\n                    .withStatistics(statistic);\r\n    \r\n                GetMetricStatisticsResult result = cloudWatchClient.getMetricStatistics(request);\r\n                System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());\r\n                return result.getDatapoints().isEmpty() ? 0 : result.getDatapoints().get(0).getAverage();\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\r\n                return 0;\r\n            }\r\n        }\r\n    \r\n    \r\n        private int calculatePeriod(Date startTime, Date endTime) {\r\n            long diffInSeconds = (endTime.getTime() - startTime.getTime()) / 1000;\r\n            int periods = (int) Math.ceil(diffInSeconds / 1800);\r\n    \r\n            return (periods &gt; 0) ? 1800 : 60;\r\n        }\r\n    }\r\n\r\nI am using `System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + String.valueOf(SwapUsage));` for troubleshooting. I am not sure where to look next. Any ideas/suggestions?\r\n\r\n\r\nEDIT: So I tested this some more and I added this line `System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());` inside `getMetricValue`. The result I am getting is `Result for scrsquy-001 is {Label: EngineCPUUtilization,Datapoints: []}`. Why is it empty and how can I get this to work?","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>I am trying to retrieve some Elasticache metrics from CloudWatch using Java SDK 1.x. I have several classes for multiple services, and they all work, except for Elasticache. This class is passed a list of Elasticache nodes, along with start and end times. For each node, I'm attempting to retrieve some metrics from Elasticache with a 30-minute period. However, for some reason, I keep getting values of 0.0 for each metric. I have confirmed that the metrics are not empty in the AWS console. Here's my code:</p>\n<pre><code>public class ElastiCacheCWMetricsRetriever {\n    private final AmazonCloudWatch cloudWatchClient;\n\n    public ElastiCacheCWMetricsRetriever(AmazonCloudWatch cloudWatchClient) {\n        this.cloudWatchClient = cloudWatchClient;\n    }\n\n\n    public Map&lt;String, Map&lt;String, Object&gt;&gt; getElastiCacheMetrics(List&lt;String&gt; nodeNames, \n        String startTimeStr, String endTimeStr) {\n        Map&lt;String, Map&lt;String, Object&gt;&gt; elastiCacheMetricsMap = new HashMap&lt;&gt;();\n\n        try {\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n            Date startTime = dateFormat.parse(startTimeStr);\n            Date endTime = dateFormat.parse(endTimeStr);\n\n            for (String nodeName : nodeNames) {\n                Map&lt;String, Object&gt; nodeMetrics = new HashMap&lt;&gt;();\n\n                nodeMetrics.put(&quot;SwapUsage&quot;, getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;SwapUsage&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\n                Double SwapUsage = getSumMetricValue(&quot;AWS/ElastiCache&quot;, &quot;SwapUsage&quot;, \n                    &quot;CacheNodeId&quot;, nodeName, startTime, endTime);\n                System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + \n                    String.valueOf(SwapUsage));\n\n                nodeMetrics.put(&quot;CurrentConnections&quot;, getSumMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;CurrConnections&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\n\n                nodeMetrics.put(&quot;DatabaseMemoryUsagePercentage&quot;, \n                getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;DatabaseMemoryUsagePercentage&quot;, \n                    &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\n\n                nodeMetrics.put(&quot;EngineCPUUtilization&quot;, \n                     getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;EngineCPUUtilization&quot;, \n                     &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\n\n                Double EngineCPUUtil = getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;EngineCPUUtilization&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0;\n                System.out.println(&quot;EngineCPUUtilization for &quot; + nodeName + &quot; is &quot; + String.valueOf(EngineCPUUtil));\n                elastiCacheMetricsMap.put(nodeName, nodeMetrics);\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\n        }   \n        return elastiCacheMetricsMap;\n    }\n\n     private double getAverageMetricValue(String namespace, String metricName, String \n         dimensionName, String dimensionValue, Date startTime, Date endTime) {\n         int period = calculatePeriod(startTime, endTime);\n         return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Average&quot;);\n     }\n\n    private double getSumMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime) {\n        int period = calculatePeriod(startTime, endTime);\n        return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Sum&quot;);\n    }\n\n    private double getMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime, int period, String statistic) {\n        try {\n            GetMetricStatisticsRequest request = new GetMetricStatisticsRequest()\n                .withNamespace(namespace)\n                .withMetricName(metricName)\n                .withDimensions(new Dimension().withName(dimensionName).withValue(dimensionValue))\n                .withStartTime(startTime)\n                .withEndTime(endTime)\n                .withPeriod(period)\n                .withStatistics(statistic);\n\n            GetMetricStatisticsResult result = cloudWatchClient.getMetricStatistics(request);\n            System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());\n            return result.getDatapoints().isEmpty() ? 0 : result.getDatapoints().get(0).getAverage();\n        } catch (Exception e) {\n            System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\n            return 0;\n        }\n    }\n\n\n    private int calculatePeriod(Date startTime, Date endTime) {\n        long diffInSeconds = (endTime.getTime() - startTime.getTime()) / 1000;\n        int periods = (int) Math.ceil(diffInSeconds / 1800);\n\n        return (periods &gt; 0) ? 1800 : 60;\n    }\n}\n</code></pre>\n<p>I am using <code>System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + String.valueOf(SwapUsage));</code> for troubleshooting. I am not sure where to look next. Any ideas/suggestions?</p>\n<p>EDIT: So I tested this some more and I added this line <code>System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());</code> inside <code>getMetricValue</code>. The result I am getting is <code>Result for scrsquy-001 is {Label: EngineCPUUtilization,Datapoints: []}</code>. Why is it empty and how can I get this to work?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":6410870,"reputation":1742,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1698064391,"post_id":77343782,"comment_id":136353785,"body_markdown":"Please take a look at [how to ask](https://stackoverflow.com/help/how-to-ask) and ask a concrete question.","body":"Please take a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and ask a concrete question."}],"owner":{"account_id":29733358,"reputation":1,"user_id":22787439,"display_name":"refer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698050572,"creation_date":1698050478,"question_id":77343782,"body_markdown":"I&#39;m contributing to open source library and got lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot; for this code:\r\n\r\n  @Override\r\n    public void onBindViewHolder(@NonNull MyHolder myHolder, int i) {\r\n\r\n\r\n\r\n        myHolder.recipeTitle.setText(mData.get(i).getRecipeName());\r\n        myHolder.img_recipe_thumbnail.setImageResource(mData.get(i).getThumbnail());\r\n        myHolder.cardView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(mContext,RecipeActivity.class);\r\n\r\n                intent.putExtra(&quot;RecipeName&quot;,mData.get(i).getRecipeName());\r\n                intent.putExtra(&quot;RecipeIngredients&quot;,mData.get(i).getRecipeIngredients());\r\n                intent.putExtra(&quot;RecipeMethodTitle&quot;,mData.get(i).getRecipeMethodTitle());\r\n                intent.putExtra(&quot;Recipe&quot;,mData.get(i).getRecipe());\r\n                intent.putExtra(&quot;Thumbnail&quot;,mData.get(i).getThumbnail());\r\n\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n    }","title":"Lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot;","body":"<p>I'm contributing to open source library and got lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot; for this code:</p>\n<p>@Override\npublic void onBindViewHolder(@NonNull MyHolder myHolder, int i) {</p>\n<pre><code>    myHolder.recipeTitle.setText(mData.get(i).getRecipeName());\n    myHolder.img_recipe_thumbnail.setImageResource(mData.get(i).getThumbnail());\n    myHolder.cardView.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(mContext,RecipeActivity.class);\n\n            intent.putExtra(&quot;RecipeName&quot;,mData.get(i).getRecipeName());\n            intent.putExtra(&quot;RecipeIngredients&quot;,mData.get(i).getRecipeIngredients());\n            intent.putExtra(&quot;RecipeMethodTitle&quot;,mData.get(i).getRecipeMethodTitle());\n            intent.putExtra(&quot;Recipe&quot;,mData.get(i).getRecipe());\n            intent.putExtra(&quot;Thumbnail&quot;,mData.get(i).getThumbnail());\n\n            mContext.startActivity(intent);\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","android","camera","surfaceview","android-camera2"],"owner":{"account_id":11226516,"reputation":1868,"user_id":8235983,"accept_rate":81,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698050563,"creation_date":1698050563,"question_id":77343789,"body_markdown":"I created a custom surface view for camera, to take a picture when button is clicked but it always reset to `onCaptureFailed`\r\n\r\nHere is my full code https://codeshare.io/VZAAm3\r\n\r\n    public void captureImage() {\r\n            // Capture an image when the custom button is clicked\r\n            if (cameraDevice != null) {\r\n                try {\r\n                    int width = previewSize.getWidth();\r\n                    int height = previewSize.getHeight();\r\n                    CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraDevice.getId());\r\n                    StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\r\n                    if(map != null) {\r\n                        Size[] outputSizes = map.getOutputSizes(ImageFormat.JPEG);\r\n                        if (outputSizes != null &amp;&amp; outputSizes.length &gt; 0) {\r\n                            width = outputSizes[0].getWidth();\r\n                            height = outputSizes[0].getHeight();\r\n                        }\r\n                    }\r\n    \r\n                    try (ImageReader cameraImageReader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1)) {\r\n                      List&lt;Surface&gt; outputSurface = new ArrayList&lt;&gt;(2);\r\n                      outputSurface.add(cameraImageReader.getSurface());\r\n                      outputSurface.add(new Surface(cameraPreview.getSurfaceTexture()));\r\n    \r\n                        final CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\r\n                        captureBuilder.addTarget(cameraImageReader.getSurface());\r\n                        captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\r\n    \r\n                        //Check orientation base on device\r\n                        int rotation = getWindowManager().getDefaultDisplay().getRotation();\r\n                        captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));\r\n    \r\n                        cameraDevice.createCaptureSession(outputSurface, new CameraCaptureSession.StateCallback() {\r\n                            @Override\r\n                            public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                                try {\r\n                                    session.capture(captureBuilder.build(), new CameraCaptureSession.CaptureCallback() {\r\n                                        @Override\r\n                                        public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\r\n                                            super.onCaptureCompleted(session, request, result);\r\n                                            cameraImageReader.setOnImageAvailableListener(imageReaderListener, null);\r\n                                            Log.e(&quot;Capture&quot;, &quot;Captured&quot;);\r\n                                        }\r\n    \r\n                                        @Override\r\n                                        public void onCaptureFailed(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull CaptureFailure failure) {\r\n                                            super.onCaptureFailed(session, request, failure);\r\n                                            int reason = failure.getReason();\r\n                                            int sequenceId = failure.getSequenceId();\r\n                                            Log.e(&quot;Capture&quot;, &quot;Capture failed with reason: &quot; + reason + &quot;, sequenceId: &quot; + sequenceId);\r\n                                        }\r\n                                    }, null);\r\n                                } catch (CameraAccessException e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n    \r\n                            @Override\r\n                            public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {\r\n    \r\n                            }\r\n                        }, null);\r\n                    } catch (CameraAccessException e) {\r\n                        // Handle camera access exception\r\n                    }\r\n                } catch (CameraAccessException e) {\r\n                    // Handle camera access exception\r\n                }\r\n            }\r\n        }","title":"Android custom camera surfaceview always fail to take picture","body":"<p>I created a custom surface view for camera, to take a picture when button is clicked but it always reset to <code>onCaptureFailed</code></p>\n<p>Here is my full code <a href=\"https://codeshare.io/VZAAm3\" rel=\"nofollow noreferrer\">https://codeshare.io/VZAAm3</a></p>\n<pre><code>public void captureImage() {\n        // Capture an image when the custom button is clicked\n        if (cameraDevice != null) {\n            try {\n                int width = previewSize.getWidth();\n                int height = previewSize.getHeight();\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraDevice.getId());\n                StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\n                if(map != null) {\n                    Size[] outputSizes = map.getOutputSizes(ImageFormat.JPEG);\n                    if (outputSizes != null &amp;&amp; outputSizes.length &gt; 0) {\n                        width = outputSizes[0].getWidth();\n                        height = outputSizes[0].getHeight();\n                    }\n                }\n\n                try (ImageReader cameraImageReader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1)) {\n                  List&lt;Surface&gt; outputSurface = new ArrayList&lt;&gt;(2);\n                  outputSurface.add(cameraImageReader.getSurface());\n                  outputSurface.add(new Surface(cameraPreview.getSurfaceTexture()));\n\n                    final CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\n                    captureBuilder.addTarget(cameraImageReader.getSurface());\n                    captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\n\n                    //Check orientation base on device\n                    int rotation = getWindowManager().getDefaultDisplay().getRotation();\n                    captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));\n\n                    cameraDevice.createCaptureSession(outputSurface, new CameraCaptureSession.StateCallback() {\n                        @Override\n                        public void onConfigured(@NonNull CameraCaptureSession session) {\n                            try {\n                                session.capture(captureBuilder.build(), new CameraCaptureSession.CaptureCallback() {\n                                    @Override\n                                    public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\n                                        super.onCaptureCompleted(session, request, result);\n                                        cameraImageReader.setOnImageAvailableListener(imageReaderListener, null);\n                                        Log.e(&quot;Capture&quot;, &quot;Captured&quot;);\n                                    }\n\n                                    @Override\n                                    public void onCaptureFailed(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull CaptureFailure failure) {\n                                        super.onCaptureFailed(session, request, failure);\n                                        int reason = failure.getReason();\n                                        int sequenceId = failure.getSequenceId();\n                                        Log.e(&quot;Capture&quot;, &quot;Capture failed with reason: &quot; + reason + &quot;, sequenceId: &quot; + sequenceId);\n                                    }\n                                }, null);\n                            } catch (CameraAccessException e) {\n                                e.printStackTrace();\n                            }\n                        }\n\n                        @Override\n                        public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {\n\n                        }\n                    }, null);\n                } catch (CameraAccessException e) {\n                    // Handle camera access exception\n                }\n            } catch (CameraAccessException e) {\n                // Handle camera access exception\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","batch-file","runtime.exec"],"answers":[{"comments":[{"owner":{"account_id":17059,"reputation":14009,"user_id":37804,"accept_rate":94,"display_name":"Amara"},"score":0,"creation_date":1236278082,"post_id":615971,"comment_id":428802,"body_markdown":"Thank you. It still doesn&#39;t work - that piece of code doesn&#39;t even execute in my app. I&#39;ll try the other option you presented. Thanks again.","body":"Thank you. It still doesn&#39;t work - that piece of code doesn&#39;t even execute in my app. I&#39;ll try the other option you presented. Thanks again."},{"owner":{"account_id":17059,"reputation":14009,"user_id":37804,"accept_rate":94,"display_name":"Amara"},"score":0,"creation_date":1236278233,"post_id":615971,"comment_id":428818,"body_markdown":"When I try the second alternative it gives me this error: Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;scons&quot;: CreateProcess error=2, The system cannot find the file specified","body":"When I try the second alternative it gives me this error: Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;scons&quot;: CreateProcess error=2, The system cannot find the file specified"},{"owner":{"account_id":17059,"reputation":14009,"user_id":37804,"accept_rate":94,"display_name":"Amara"},"score":0,"creation_date":1236279264,"post_id":615971,"comment_id":428899,"body_markdown":"No I don&#39;t have Cygwin terminal. I use Windows Command terminal. It&#39;s strange - I don&#39;t know why it wouldn&#39;t work. It completely baffles me.","body":"No I don&#39;t have Cygwin terminal. I use Windows Command terminal. It&#39;s strange - I don&#39;t know why it wouldn&#39;t work. It completely baffles me."}],"tags":[],"owner":{"account_id":1273,"reputation":187678,"user_id":1694,"accept_rate":95,"display_name":"Eli Courtwright"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1236278471,"creation_date":1236277710,"answer_id":615971,"question_id":615948,"body_markdown":"The executable used to run batch scripts is `cmd.exe` which uses the `/c` flag to specify the name of the batch file to run:\r\n\r\n    Runtime.getRuntime().exec(new String[]{&quot;cmd.exe&quot;, &quot;/c&quot;, &quot;build.bat&quot;});\r\n\r\nTheoretically you should also be able to run Scons in this manner, though I haven&#39;t tested this:\r\n\r\n    Runtime.getRuntime().exec(new String[]{&quot;scons&quot;, &quot;-Q&quot;, &quot;implicit-deps-changed&quot;, &quot;build\\file_load_type&quot;, &quot;export\\file_load_type&quot;});\r\n\r\nEDIT: Amara, you say that this isn&#39;t working.  The error you listed is the error you&#39;d get when running Java from a Cygwin terminal on a Windows box; is this what you&#39;re doing?  The problem with that is that Windows and Cygwin have different paths, so the Windows version of Java won&#39;t find the scons executable on your Cygwin path.  I can explain further if this turns out to be your problem.","title":"How do I run a batch file from my Java Application?","body":"<p>The executable used to run batch scripts is <code>cmd.exe</code> which uses the <code>/c</code> flag to specify the name of the batch file to run:</p>\n\n<pre><code>Runtime.getRuntime().exec(new String[]{\"cmd.exe\", \"/c\", \"build.bat\"});\n</code></pre>\n\n<p>Theoretically you should also be able to run Scons in this manner, though I haven't tested this:</p>\n\n<pre><code>Runtime.getRuntime().exec(new String[]{\"scons\", \"-Q\", \"implicit-deps-changed\", \"build\\file_load_type\", \"export\\file_load_type\"});\n</code></pre>\n\n<p>EDIT: Amara, you say that this isn't working.  The error you listed is the error you'd get when running Java from a Cygwin terminal on a Windows box; is this what you're doing?  The problem with that is that Windows and Cygwin have different paths, so the Windows version of Java won't find the scons executable on your Cygwin path.  I can explain further if this turns out to be your problem.</p>\n"},{"comments":[{"owner":{"account_id":920174,"reputation":3438,"user_id":951984,"accept_rate":50,"display_name":"nanospeck"},"score":0,"creation_date":1405327111,"post_id":616014,"comment_id":38366003,"body_markdown":"For me it says Windows cannot find &quot;build.bat&quot;. So where should I put this file? Or how should I give the path. Any suggestions?","body":"For me it says Windows cannot find &quot;build.bat&quot;. So where should I put this file? Or how should I give the path. Any suggestions?"},{"owner":{"account_id":3452675,"reputation":661,"user_id":2891948,"accept_rate":24,"display_name":"viveksinghggits"},"score":1,"creation_date":1467102251,"post_id":616014,"comment_id":63579213,"body_markdown":"lets say I have an array of commands and then iterating that array to execute all the commands\nfor(i=0 to commands.length){\nRuntime.getRuntime().exec(&quot;cmd /c start buil.bat&quot;);\n}\nthen for every iteration(for every command) a command window is getting opened which is obvious. How can avoid that I mean executing all the commands on one window.","body":"lets say I have an array of commands and then iterating that array to execute all the commands for(i=0 to commands.length){ Runtime.getRuntime().exec(&quot;cmd /c start buil.bat&quot;); } then for every iteration(for every command) a command window is getting opened which is obvious. How can avoid that I mean executing all the commands on one window."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1506408768,"post_id":616014,"comment_id":79796485,"body_markdown":"We have some code which is directly calling &quot;gradlew.bat&quot; without putting &quot;cmd /c&quot; stuff in front of it, and that code is working somehow. So I guess either Java or Windows fixed part of the problem at some point. If we try to exec &quot;gradlew&quot;, that fails though, so clearly the &quot;.bat&quot; is still needed on the end.","body":"We have some code which is directly calling &quot;gradlew.bat&quot; without putting &quot;cmd /c&quot; stuff in front of it, and that code is working somehow. So I guess either Java or Windows fixed part of the problem at some point. If we try to exec &quot;gradlew&quot;, that fails though, so clearly the &quot;.bat&quot; is still needed on the end."},{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1542930143,"post_id":616014,"comment_id":93751840,"body_markdown":"`Win+R` (Runtime) can execute batch files directly.","body":"<code>Win+R</code> (Runtime) can execute batch files directly."}],"tags":[],"owner":{"account_id":15832,"reputation":7189,"user_id":33857,"accept_rate":84,"display_name":"Paulo Guedes"},"comment_count":4,"down_vote_count":1,"up_vote_count":192,"is_accepted":true,"score":191,"last_activity_date":1502146385,"creation_date":1236278147,"answer_id":616014,"question_id":615948,"body_markdown":"Batch files are not an executable.  They need an application to run them (i.e. cmd).\r\n\r\nOn UNIX, the script file has shebang (#!) at the start of a file to specify the program that executes it.  Double-clicking in Windows is performed by Windows Explorer.  `CreateProcess` does not know anything about that.\r\n\r\n    Runtime.\r\n       getRuntime().\r\n       exec(&quot;cmd /c start \\&quot;\\&quot; build.bat&quot;);\r\n\r\nNote: With the `start \\&quot;\\&quot;` command, a separate command window will be opened with a blank title and any output from the batch file will be displayed there.  It should also work with just `cmd /c build.bat&quot;, in which case the output can be read from the sub-process in Java if desired.","title":"How do I run a batch file from my Java Application?","body":"<p>Batch files are not an executable.  They need an application to run them (i.e. cmd).</p>\n\n<p>On UNIX, the script file has shebang (#!) at the start of a file to specify the program that executes it.  Double-clicking in Windows is performed by Windows Explorer.  <code>CreateProcess</code> does not know anything about that.</p>\n\n<pre><code>Runtime.\n   getRuntime().\n   exec(\"cmd /c start \\\"\\\" build.bat\");\n</code></pre>\n\n<p>Note: With the <code>start \\\"\\\"</code> command, a separate command window will be opened with a blank title and any output from the batch file will be displayed there.  It should also work with just `cmd /c build.bat\", in which case the output can be read from the sub-process in Java if desired.</p>\n"},{"comments":[{"owner":{"account_id":18772,"reputation":6760,"user_id":43365,"accept_rate":94,"display_name":"Dan Polites"},"score":2,"creation_date":1263164254,"post_id":616028,"comment_id":1964340,"body_markdown":"Why is the ProcessBuilder the way to go in Java 5/6?","body":"Why is the ProcessBuilder the way to go in Java 5/6?"},{"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"score":2,"creation_date":1263210730,"post_id":616028,"comment_id":1967250,"body_markdown":"Interesting choice to resurrect an old post ... ProcessBuilder offers more control, specifically the ability to easily redirect stderr to stdout. I also find the setup more intuitive, but that&#39;s a personal pref","body":"Interesting choice to resurrect an old post ... ProcessBuilder offers more control, specifically the ability to easily redirect stderr to stdout. I also find the setup more intuitive, but that&#39;s a personal pref"}],"tags":[],"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1236278340,"creation_date":1236278340,"answer_id":616028,"question_id":615948,"body_markdown":"[ProcessBuilder][1] is the Java 5/6 way to run external processes.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html","title":"How do I run a batch file from my Java Application?","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html\" rel=\"noreferrer\">ProcessBuilder</a> is the Java 5/6 way to run external processes.</p>\n"},{"comments":[{"owner":{"account_id":1364481,"reputation":421,"user_id":1301216,"accept_rate":14,"display_name":"Baruch Atta"},"score":2,"creation_date":1499882287,"post_id":7952126,"comment_id":77102449,"body_markdown":"It would be useful to comment this code and tell us why  and what the InputStream is reading, and why I care.  \nAlso, the code for the batch file  is running nicely, but I cannot get it to raise an error Exception.","body":"It would be useful to comment this code and tell us why  and what the InputStream is reading, and why I care.   Also, the code for the batch file  is running nicely, but I cannot get it to raise an error Exception."},{"owner":{"account_id":2254005,"reputation":183,"user_id":1985604,"display_name":"John Fisher"},"score":2,"creation_date":1504734901,"post_id":7952126,"comment_id":79131898,"body_markdown":"It&#39;d drive me nuts to have such a confusing variable name as &quot;is&quot; in my code.","body":"It&#39;d drive me nuts to have such a confusing variable name as &quot;is&quot; in my code."}],"tags":[],"owner":{"account_id":1008666,"reputation":201,"user_id":1021730,"display_name":"Isha"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1321286852,"creation_date":1320054985,"answer_id":7952126,"question_id":615948,"body_markdown":"    Runtime runtime = Runtime.getRuntime();\r\n    try {\r\n        Process p1 = runtime.exec(&quot;cmd /c start D:\\\\temp\\\\a.bat&quot;);\r\n        InputStream is = p1.getInputStream();\r\n        int i = 0;\r\n        while( (i = is.read() ) != -1) {\r\n            System.out.print((char)i);\r\n        }\r\n    } catch(IOException ioException) {\r\n        System.out.println(ioException.getMessage() );\r\n    }","title":"How do I run a batch file from my Java Application?","body":"<pre><code>Runtime runtime = Runtime.getRuntime();\ntry {\n    Process p1 = runtime.exec(\"cmd /c start D:\\\\temp\\\\a.bat\");\n    InputStream is = p1.getInputStream();\n    int i = 0;\n    while( (i = is.read() ) != -1) {\n        System.out.print((char)i);\n    }\n} catch(IOException ioException) {\n    System.out.println(ioException.getMessage() );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1063592,"reputation":231,"user_id":1064687,"display_name":"Juan Carlos Alp&#237;zar"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1322173372,"creation_date":1322170843,"answer_id":8262728,"question_id":615948,"body_markdown":"Sometimes the thread execution process time is higher than JVM thread waiting process time, it use to happen when the process you&#39;re invoking takes some time to be processed, use the waitFor() command as follows:\r\n\r\n    try{\t\r\n\t\tProcess p = Runtime.getRuntime().exec(&quot;file location here, don&#39;t forget using / instead of \\\\ to make it interoperable&quot;);\r\n\t\tp.waitFor();\r\n\t\t\r\n\t}catch( IOException ex ){\r\n\t\t//Validate the case the file can&#39;t be accesed (not enought permissions)\r\n\t\t\r\n\t}catch( InterruptedException ex ){\r\n\t\t//Validate the case the process is being stopped by some external situation\t\t\r\n\t\t\r\n\t}\r\n\r\nThis way the JVM will stop until the process you&#39;re invoking is done before it continue with the thread execution stack.","title":"How do I run a batch file from my Java Application?","body":"<p>Sometimes the thread execution process time is higher than JVM thread waiting process time, it use to happen when the process you're invoking takes some time to be processed, use the waitFor() command as follows:</p>\n\n<pre><code>try{    \n    Process p = Runtime.getRuntime().exec(\"file location here, don't forget using / instead of \\\\ to make it interoperable\");\n    p.waitFor();\n\n}catch( IOException ex ){\n    //Validate the case the file can't be accesed (not enought permissions)\n\n}catch( InterruptedException ex ){\n    //Validate the case the process is being stopped by some external situation     \n\n}\n</code></pre>\n\n<p>This way the JVM will stop until the process you're invoking is done before it continue with the thread execution stack.</p>\n"},{"comments":[{"owner":{"account_id":157881,"reputation":3901,"user_id":376128,"accept_rate":77,"display_name":"Smamatti"},"score":11,"creation_date":1349893266,"post_id":12825694,"comment_id":17350037,"body_markdown":"The question was already answered with a working solution. You should offer only solutions you know are working and describe why you think your solution might be better.","body":"The question was already answered with a working solution. You should offer only solutions you know are working and describe why you think your solution might be better."}],"tags":[],"owner":{"account_id":1925156,"reputation":141,"user_id":1735800,"display_name":"Abbia"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1349893346,"creation_date":1349892729,"answer_id":12825694,"question_id":615948,"body_markdown":"To run batch files using java if that&#39;s you&#39;re talking about...\r\n\r\n    String path=&quot;cmd /c start d:\\\\sample\\\\sample.bat&quot;;\r\n    Runtime rn=Runtime.getRuntime();\r\n    Process pr=rn.exec(path);`\r\n\r\nThis should do it.","title":"How do I run a batch file from my Java Application?","body":"<p>To run batch files using java if that's you're talking about...</p>\n\n<pre><code>String path=\"cmd /c start d:\\\\sample\\\\sample.bat\";\nRuntime rn=Runtime.getRuntime();\nProcess pr=rn.exec(path);`\n</code></pre>\n\n<p>This should do it.</p>\n"},{"comments":[{"owner":{"account_id":2894090,"reputation":51,"user_id":2482254,"display_name":"Suren"},"score":1,"creation_date":1371127154,"post_id":17087187,"comment_id":24715345,"body_markdown":"add this ==&gt;                                                 BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));\n\t\t\t   String line = reader.readLine();\n\t\t\t\t   \n\t\t\t   while (line != null) {\n\t\t\t\t   System.out.println(line);\n\t\t\t\t   line = reader.readLine();\n\t\t\t}","body":"add this ==&gt;                                                 BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream())); \t\t\t   String line = reader.readLine(); \t\t\t\t    \t\t\t   while (line != null) { \t\t\t\t   System.out.println(line); \t\t\t\t   line = reader.readLine(); \t\t\t}"}],"tags":[],"owner":{"account_id":2894090,"reputation":51,"user_id":2482254,"display_name":"Suren"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1391465567,"creation_date":1371126872,"answer_id":17087187,"question_id":615948,"body_markdown":"&lt;!-- language: java --&gt;\r\n\r\n    Process p = Runtime.getRuntime().exec( \r\n      new String[]{&quot;cmd&quot;, &quot;/C&quot;, &quot;orgreg.bat&quot;},\r\n      null, \r\n      new File(&quot;D://TEST//home//libs//&quot;));\r\n\r\ntested with jdk1.5 and jdk1.6\r\n\r\nThis was working fine for me, hope it helps others too.\r\nto get this i have struggled more days. :(","title":"How do I run a batch file from my Java Application?","body":"<pre class=\"lang-java prettyprint-override\"><code>Process p = Runtime.getRuntime().exec( \n  new String[]{\"cmd\", \"/C\", \"orgreg.bat\"},\n  null, \n  new File(\"D://TEST//home//libs//\"));\n</code></pre>\n\n<p>tested with jdk1.5 and jdk1.6</p>\n\n<p>This was working fine for me, hope it helps others too.\nto get this i have struggled more days. :(</p>\n"},{"comments":[{"owner":{"account_id":11335055,"reputation":410,"user_id":8311201,"accept_rate":100,"display_name":"Amal lal T L"},"score":0,"creation_date":1537447728,"post_id":28986612,"comment_id":91793929,"body_markdown":"what does the /c meant by?","body":"what does the /c meant by?"}],"tags":[],"owner":{"account_id":5921080,"reputation":11,"user_id":4658396,"display_name":"bharath"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426078465,"creation_date":1426076817,"answer_id":28986612,"question_id":615948,"body_markdown":"The following is working fine:\r\n\r\n    String path=&quot;cmd /c start d:\\\\sample\\\\sample.bat&quot;;\r\n    Runtime rn=Runtime.getRuntime();\r\n    Process pr=rn.exec(path);\r\n","title":"How do I run a batch file from my Java Application?","body":"<p>The following is working fine:</p>\n\n<pre><code>String path=\"cmd /c start d:\\\\sample\\\\sample.bat\";\nRuntime rn=Runtime.getRuntime();\nProcess pr=rn.exec(path);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7628857,"reputation":309,"user_id":5784553,"accept_rate":62,"display_name":"Ben Jost"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465422455,"creation_date":1465421580,"answer_id":37713311,"question_id":615948,"body_markdown":"I had the same issue. However sometimes CMD failed to run my files.\r\nThat&#39;s why i create a temp.bat on my desktop, next this temp.bat is going to run my file, and next the temp file is going to be deleted.\r\n\r\nI know this is a bigger code, however worked for me in 100% when even Runtime.getRuntime().exec() failed.\r\n\r\n    // creating a string for the Userprofile (either C:\\Admin or whatever)\r\n    String userprofile = System.getenv(&quot;USERPROFILE&quot;);\r\n    \r\n    BufferedWriter writer = null;\r\n            try {\r\n                //create a temporary file\r\n                File logFile = new File(userprofile+&quot;\\\\Desktop\\\\temp.bat&quot;);   \r\n                writer = new BufferedWriter(new FileWriter(logFile));\r\n\r\n                // Here comes the lines for the batch file!\r\n                // First line is @echo off\r\n                // Next line is the directory of our file\r\n                // Then we open our file in that directory and exit the cmd\r\n                // To seperate each line, please use \\r\\n\r\n                writer.write(&quot;cd %ProgramFiles(x86)%\\\\SOME_FOLDER \\r\\nstart xyz.bat \\r\\nexit&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    // Close the writer regardless of what happens...\r\n                    writer.close();\r\n                } catch (Exception e) {\r\n                }\r\n            \r\n            }\r\n            \r\n            // running our temp.bat file\r\n            Runtime rt = Runtime.getRuntime();\r\n            try {\r\n                \r\n                Process pr = rt.exec(&quot;cmd /c start \\&quot;\\&quot; \\&quot;&quot;+userprofile+&quot;\\\\Desktop\\\\temp.bat&quot; );\r\n                pr.getOutputStream().close();\r\n            } catch (IOException ex) {\r\n                Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);\r\n    \r\n            }\r\n            // deleting our temp file\r\n            File databl = new File(userprofile+&quot;\\\\Desktop\\\\temp.bat&quot;);\r\n            databl.delete();","title":"How do I run a batch file from my Java Application?","body":"<p>I had the same issue. However sometimes CMD failed to run my files.\nThat's why i create a temp.bat on my desktop, next this temp.bat is going to run my file, and next the temp file is going to be deleted.</p>\n\n<p>I know this is a bigger code, however worked for me in 100% when even Runtime.getRuntime().exec() failed.</p>\n\n<pre><code>// creating a string for the Userprofile (either C:\\Admin or whatever)\nString userprofile = System.getenv(\"USERPROFILE\");\n\nBufferedWriter writer = null;\n        try {\n            //create a temporary file\n            File logFile = new File(userprofile+\"\\\\Desktop\\\\temp.bat\");   \n            writer = new BufferedWriter(new FileWriter(logFile));\n\n            // Here comes the lines for the batch file!\n            // First line is @echo off\n            // Next line is the directory of our file\n            // Then we open our file in that directory and exit the cmd\n            // To seperate each line, please use \\r\\n\n            writer.write(\"cd %ProgramFiles(x86)%\\\\SOME_FOLDER \\r\\nstart xyz.bat \\r\\nexit\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                // Close the writer regardless of what happens...\n                writer.close();\n            } catch (Exception e) {\n            }\n\n        }\n\n        // running our temp.bat file\n        Runtime rt = Runtime.getRuntime();\n        try {\n\n            Process pr = rt.exec(\"cmd /c start \\\"\\\" \\\"\"+userprofile+\"\\\\Desktop\\\\temp.bat\" );\n            pr.getOutputStream().close();\n        } catch (IOException ex) {\n            Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);\n\n        }\n        // deleting our temp file\n        File databl = new File(userprofile+\"\\\\Desktop\\\\temp.bat\");\n        databl.delete();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10155336,"reputation":329,"user_id":7500593,"display_name":"رامي عبد الله"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515863063,"creation_date":1515863063,"answer_id":48242200,"question_id":615948,"body_markdown":"This code will execute two commands.bat that exist in the path C:/folders/folder.\r\n\r\n    Runtime.getRuntime().exec(&quot;cd C:/folders/folder &amp; call commands.bat&quot;);","title":"How do I run a batch file from my Java Application?","body":"<p>This code will execute two commands.bat that exist in the path C:/folders/folder.</p>\n\n<pre><code>Runtime.getRuntime().exec(\"cd C:/folders/folder &amp; call commands.bat\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178169,"reputation":15302,"user_id":409958,"accept_rate":86,"display_name":"rolling_codes"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521050924,"creation_date":1521050924,"answer_id":49284911,"question_id":615948,"body_markdown":"To expand on [@Isha&#39;s anwser](https://stackoverflow.com/a/7952126/409958) you could just do the following to get the returned output (post-facto not in rea-ltime) of the script that was run:\r\n\r\n    try {\r\n        Process process = Runtime.getRuntime().exec(&quot;cmd /c start D:\\\\temp\\\\a.bat&quot;);\r\n        System.out.println(process.getText());\r\n    } catch(IOException e) {\r\n        e.printStackTrace();\r\n    }","title":"How do I run a batch file from my Java Application?","body":"<p>To expand on <a href=\"https://stackoverflow.com/a/7952126/409958\">@Isha's anwser</a> you could just do the following to get the returned output (post-facto not in rea-ltime) of the script that was run:</p>\n\n<pre><code>try {\n    Process process = Runtime.getRuntime().exec(\"cmd /c start D:\\\\temp\\\\a.bat\");\n    System.out.println(process.getText());\n} catch(IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":19065920,"reputation":1431,"user_id":13921023,"display_name":"Ran Marciano"},"score":0,"creation_date":1616614700,"post_id":66786144,"comment_id":118061507,"body_markdown":"Please don&#39;t post only code as an answer, but also provide an explanation of what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes.","body":"Please don&#39;t post only code as an answer, but also provide an explanation of what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes."}],"tags":[],"owner":{"account_id":19883552,"reputation":33,"user_id":14671518,"display_name":"taing hong"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616606502,"creation_date":1616606502,"answer_id":66786144,"question_id":615948,"body_markdown":"    import java.io.IOException;\r\n    \r\n    public class TestBatch {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t{\r\n    \t\t\ttry {\r\n    \t\t        String[] command = {&quot;cmd.exe&quot;, &quot;/C&quot;, &quot;Start&quot;, &quot;C:\\\\temp\\\\runtest.bat&quot;};\r\n    \t\t        Process p =  Runtime.getRuntime().exec(command);           \r\n    \t\t    } catch (IOException ex) {\r\n    \t\t    }\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }","title":"How do I run a batch file from my Java Application?","body":"<pre><code>import java.io.IOException;\n\npublic class TestBatch {\n\n    public static void main(String[] args) {\n        {\n            try {\n                String[] command = {&quot;cmd.exe&quot;, &quot;/C&quot;, &quot;Start&quot;, &quot;C:\\\\temp\\\\runtest.bat&quot;};\n                Process p =  Runtime.getRuntime().exec(command);           \n            } catch (IOException ex) {\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2985164,"reputation":5188,"user_id":2534191,"accept_rate":25,"display_name":"Yuriy N."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698049662,"creation_date":1698049662,"answer_id":77343688,"question_id":615948,"body_markdown":"When you execute your batch file from Java (or, I guess, any other language) it runs from `Windows/System32/` directory where  `cmd.exe` is. \r\n\r\nTo make it run from its own directory add `cd /D &quot;%~dp0&quot;` to the beginning of your batch file. \r\n\r\nLike this: \r\n\r\n    cd /D &quot;%~dp0&quot;\r\n    ffmpeg -f concat -safe 0 -i list.txt -c copy output.mp3","title":"How do I run a batch file from my Java Application?","body":"<p>When you execute your batch file from Java (or, I guess, any other language) it runs from <code>Windows/System32/</code> directory where  <code>cmd.exe</code> is.</p>\n<p>To make it run from its own directory add <code>cd /D &quot;%~dp0&quot;</code> to the beginning of your batch file.</p>\n<p>Like this:</p>\n<pre><code>cd /D &quot;%~dp0&quot;\nffmpeg -f concat -safe 0 -i list.txt -c copy output.mp3\n</code></pre>\n"}],"owner":{"account_id":17059,"reputation":14009,"user_id":37804,"accept_rate":94,"display_name":"Amara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":333057,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":616014,"answer_count":13,"score":120,"last_activity_date":1698049662,"creation_date":1236277465,"question_id":615948,"body_markdown":"In my Java application, I want to run a batch file that calls &quot;`scons -Q implicit-deps-changed build\\file_load_type export\\file_load_type`&quot;\r\n\r\nIt seems that I can&#39;t even get my batch file to execute. I&#39;m out of ideas. \r\n\r\nThis is what I have in Java:\r\n\r\n    Runtime.\r\n       getRuntime().\r\n       exec(&quot;build.bat&quot;, null, new File(&quot;.&quot;));\r\n\r\nPreviously, I had a Python Sconscript file that I wanted to run but since that didn&#39;t work I decided I would call the script via a batch file but that method has not been successful as of yet. ","title":"How do I run a batch file from my Java Application?","body":"<p>In my Java application, I want to run a batch file that calls \"<code>scons -Q implicit-deps-changed build\\file_load_type export\\file_load_type</code>\"</p>\n\n<p>It seems that I can't even get my batch file to execute. I'm out of ideas. </p>\n\n<p>This is what I have in Java:</p>\n\n<pre><code>Runtime.\n   getRuntime().\n   exec(\"build.bat\", null, new File(\".\"));\n</code></pre>\n\n<p>Previously, I had a Python Sconscript file that I wanted to run but since that didn't work I decided I would call the script via a batch file but that method has not been successful as of yet. </p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1697734511,"post_id":77325629,"comment_id":136320189,"body_markdown":"[The documentation of ConcurrentHashMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html) actually has an example of this.","body":"<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">The documentation of ConcurrentHashMap</a> actually has an example of this."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1697753249,"post_id":77325629,"comment_id":136322958,"body_markdown":"`Character key-&gt;key` is not proper lambda syntax.","body":"<code>Character key-&gt;key</code> is not proper lambda syntax."}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697734035,"creation_date":1697734035,"answer_id":77325688,"question_id":77325629,"body_markdown":"I would use utilize [`Collectors.toMap(Function, Function, BinaryOperator)`][1] which takes a `mergeFunction` parameter that you can use to calculate the frequencies. In order to use this approach, you need to map your int stream to a generic stream using [`IntStream.mapToObj(IntFunction)`][2].\r\n\r\nHere&#39;s an example:\r\n\r\n\tString input = &quot;aabbbcdd&quot;;\r\n\tMap&lt;Character, Integer&gt; frequencies = input.chars().mapToObj(i -&gt; (char) i)\r\n\t\t\t.collect(Collectors.toMap(c -&gt; c, c -&gt; 1, (t, u) -&gt; t + u));\r\n\tSystem.out.println(frequencies);\r\n\r\nOutput:\r\n\r\n    {a=2, b=3, c=1, d=2}\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>I would use utilize <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"nofollow noreferrer\"><code>Collectors.toMap(Function, Function, BinaryOperator)</code></a> which takes a <code>mergeFunction</code> parameter that you can use to calculate the frequencies. In order to use this approach, you need to map your int stream to a generic stream using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-\" rel=\"nofollow noreferrer\"><code>IntStream.mapToObj(IntFunction)</code></a>.</p>\n<p>Here's an example:</p>\n<pre><code>String input = &quot;aabbbcdd&quot;;\nMap&lt;Character, Integer&gt; frequencies = input.chars().mapToObj(i -&gt; (char) i)\n        .collect(Collectors.toMap(c -&gt; c, c -&gt; 1, (t, u) -&gt; t + u));\nSystem.out.println(frequencies);\n</code></pre>\n<p>Output:</p>\n<pre><code>{a=2, b=3, c=1, d=2}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9797553,"reputation":88,"user_id":7260006,"display_name":"Thai Hoc Ha Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697734441,"creation_date":1697734441,"answer_id":77325723,"question_id":77325629,"body_markdown":"\r\nFirst: .map() will return IntStream =&gt; should use mapToObject\r\n\r\nSecond: you are missing parentheses for: Character key-&gt;key\r\n\r\n    s.chars().mapToObj(i-&gt;(char)i).collect(Collectors.toMap((Character key)-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\r\n\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>First: .map() will return IntStream =&gt; should use mapToObject</p>\n<p>Second: you are missing parentheses for: Character key-&gt;key</p>\n<pre><code>s.chars().mapToObj(i-&gt;(char)i).collect(Collectors.toMap((Character key)-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697736648,"post_id":77325864,"comment_id":136320574,"body_markdown":"thanks but I think this would be slower","body":"thanks but I think this would be slower"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":4,"creation_date":1697737200,"post_id":77325864,"comment_id":136320671,"body_markdown":"@curiousengineer: why do you think that?  It isn&#39;t.","body":"@curiousengineer: why do you think that?  It isn&#39;t."},{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697749035,"post_id":77325864,"comment_id":136322438,"body_markdown":"Because you are unwrapping the `Long` object into `Integer` again vs directly being able to get to `Integer`. The value part of the map","body":"Because you are unwrapping the <code>Long</code> object into <code>Integer</code> again vs directly being able to get to <code>Integer</code>. The value part of the map"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697753712,"post_id":77325864,"comment_id":136323003,"body_markdown":"You’re unwrapping the Long once per Map entry, not as part of the counting process.  Any effect on performance is negligible.","body":"You’re unwrapping the Long once per Map entry, not as part of the counting process.  Any effect on performance is negligible."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697795058,"post_id":77325864,"comment_id":136327424,"body_markdown":"@curiousengineer your approach is boxing *every* intermediate result into an `Integer` whereas this answer’s solution only boxes the final counts. The performance differences, if you’re able to measure them, will depend on the actual input string. If performance really matters for character frequency, you wouldn’t use a `Map&lt;Character, Integer&gt;` for this task in the first place.","body":"@curiousengineer your approach is boxing <i>every</i> intermediate result into an <code>Integer</code> whereas this answer’s solution only boxes the final counts. The performance differences, if you’re able to measure them, will depend on the actual input string. If performance really matters for character frequency, you wouldn’t use a <code>Map&lt;Character, Integer&gt;</code> for this task in the first place."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697815568,"post_id":77325864,"comment_id":136331345,"body_markdown":"@curiousengineer, you&#39;re correct, this would be slower.","body":"@curiousengineer, you&#39;re correct, this would be slower."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697735966,"creation_date":1697735966,"answer_id":77325864,"question_id":77325629,"body_markdown":"Use [Collectors.counting](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()), and wrap it in [collectingAndThen](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)) to transform each Long value into an Integer value:\r\n\r\n    Map&lt;Character, Integer&gt; frequencies =\r\n        s.chars().mapToObj(c -&gt; (char) c).collect(\r\n            Collectors.groupingBy(c -&gt; c,\r\n                Collectors.collectingAndThen(\r\n                    Collectors.counting(), Long::intValue)));\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()\" rel=\"nofollow noreferrer\">Collectors.counting</a>, and wrap it in <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)\" rel=\"nofollow noreferrer\">collectingAndThen</a> to transform each Long value into an Integer value:</p>\n<pre><code>Map&lt;Character, Integer&gt; frequencies =\n    s.chars().mapToObj(c -&gt; (char) c).collect(\n        Collectors.groupingBy(c -&gt; c,\n            Collectors.collectingAndThen(\n                Collectors.counting(), Long::intValue)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697749189,"post_id":77325981,"comment_id":136322473,"body_markdown":"Yes, I also feel that many times they are just slower","body":"Yes, I also feel that many times they are just slower"}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697798884,"creation_date":1697737024,"answer_id":77325981,"question_id":77325629,"body_markdown":"Try it like this. Use `toMap` with a constant of `1` and then add one for each occurrence of the character. \r\n```\r\nString s = &quot;zwdddaaaaacbb&quot;;\r\n        Map&lt;Character, Integer&gt; frequencies = s.chars()\r\n                .mapToObj(chr -&gt; (char) chr)\r\n                .collect(Collectors.toMap(chr -&gt; chr, a -&gt; 1, Integer::sum));\r\n        \r\nfrequencies.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\na=5\r\nb=2\r\nc=1\r\nd=3\r\nw=1\r\nz=1\r\n```\r\nNote that if you collect to a `Map&lt;Character,Long&gt;` you can do it as follows:\r\n```\r\nMap&lt;Character, Long&gt; frequencies = s.chars().mapToObj(c -&gt; (char) c)\r\n   .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\r\n```\r\nAnd streams are not always the most efficient solution.  Here is one that uses a loop and the `Map.merge` method.\r\n```\r\nMap&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\r\nfor (char c : s.toCharArray()) {\r\n     frequencies.merge(Character.valueOf((char) c), 1, Integer::sum);\r\n}\r\nfrequencies.entrySet().forEach(System.out::println);\r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Try it like this. Use <code>toMap</code> with a constant of <code>1</code> and then add one for each occurrence of the character.</p>\n<pre><code>String s = &quot;zwdddaaaaacbb&quot;;\n        Map&lt;Character, Integer&gt; frequencies = s.chars()\n                .mapToObj(chr -&gt; (char) chr)\n                .collect(Collectors.toMap(chr -&gt; chr, a -&gt; 1, Integer::sum));\n        \nfrequencies.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>a=5\nb=2\nc=1\nd=3\nw=1\nz=1\n</code></pre>\n<p>Note that if you collect to a <code>Map&lt;Character,Long&gt;</code> you can do it as follows:</p>\n<pre><code>Map&lt;Character, Long&gt; frequencies = s.chars().mapToObj(c -&gt; (char) c)\n   .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\n</code></pre>\n<p>And streams are not always the most efficient solution.  Here is one that uses a loop and the <code>Map.merge</code> method.</p>\n<pre><code>Map&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\nfor (char c : s.toCharArray()) {\n     frequencies.merge(Character.valueOf((char) c), 1, Integer::sum);\n}\nfrequencies.entrySet().forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1697812194,"post_id":77326057,"comment_id":136330667,"body_markdown":"I like this even more than my own answer! +1","body":"I like this even more than my own answer! +1"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697815306,"post_id":77326057,"comment_id":136331294,"body_markdown":"@CardinalSystem, I had to look it up, actually.  I don&#39;t use _streams_ often; I would have used a _loop_ here.","body":"@CardinalSystem, I had to look it up, actually.  I don&#39;t use <i>streams</i> often; I would have used a <i>loop</i> here."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697737726,"creation_date":1697737726,"answer_id":77326057,"question_id":77325629,"body_markdown":"Use the _[groupingBy](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector))_ and _[counting](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#counting())_ methods.\r\n\r\n```java\r\nString s  = &quot;zwdacb&quot;;\r\nMap&lt;Character, Long&gt; m\r\n    = s.chars()\r\n       .mapToObj(x -&gt; (char) x)\r\n       .collect(Collectors.groupingBy(x -&gt; x, Collectors.counting()));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{a=1, b=1, c=1, d=1, w=1, z=1}\r\n```\r\n\r\nHere is a relevant question and answer.\\\r\n_[StackOverflow &amp;ndash; How to count frequency of characters in a string?](https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string)_","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">groupingBy</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#counting()\" rel=\"nofollow noreferrer\">counting</a></em> methods.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s  = &quot;zwdacb&quot;;\nMap&lt;Character, Long&gt; m\n    = s.chars()\n       .mapToObj(x -&gt; (char) x)\n       .collect(Collectors.groupingBy(x -&gt; x, Collectors.counting()));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{a=1, b=1, c=1, d=1, w=1, z=1}\n</code></pre>\n<p>Here is a relevant question and answer.<br />\n<em><a href=\"https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string\">StackOverflow – How to count frequency of characters in a string?</a></em></p>\n"},{"comments":[{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697756734,"post_id":77327304,"comment_id":136323311,"body_markdown":"Borque, great reply, but I am unclear on the difference here between simply saying `chars()` vs `codePoints` to get the stream. Please help with that as well in your response","body":"Borque, great reply, but I am unclear on the difference here between simply saying <code>chars()</code> vs <code>codePoints</code> to get the stream. Please help with that as well in your response"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697769375,"post_id":77327304,"comment_id":136324325,"body_markdown":"@curiousengineer I appended a chunk at the end of the Answer, substituting `.chars()` for `.codePoints()`. That code will get erroneous results for most characters, for those beyond the [BMP](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane).","body":"@curiousengineer I appended a chunk at the end of the Answer, substituting <code>.chars()</code> for <code>.codePoints()</code>. That code will get erroneous results for most characters, for those beyond the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">BMP</a>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1697770723,"post_id":77327304,"comment_id":136324424,"body_markdown":"@curiousengineer As noted in my Answer, [just try](https://ideone.com/QoICHe): `&quot;&#128567;&quot;.length()`. Compare to `&quot;&#128567;&quot;.codePoints().count()`. Avoid `char`.","body":"@curiousengineer As noted in my Answer, <a href=\"https://ideone.com/QoICHe\" rel=\"nofollow noreferrer\">just try</a>: <code>&quot;😷&quot;.length()</code>. Compare to <code>&quot;😷&quot;.codePoints().count()</code>. Avoid <code>char</code>."},{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697773033,"post_id":77327304,"comment_id":136324580,"body_markdown":"I understand now, thanks for the nuanced clarification. Many people know stuff, but are bad at explaining things. You have a knack for both","body":"I understand now, thanks for the nuanced clarification. Many people know stuff, but are bad at explaining things. You have a knack for both"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1697795277,"post_id":77327304,"comment_id":136327464,"body_markdown":"And now try with `&quot;&#127987;️‍&#127752;&quot;`…","body":"And now try with <code>&quot;🏳️‍🌈&quot;</code>…"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697769701,"creation_date":1697752804,"answer_id":77327304,"question_id":77325629,"body_markdown":"## tl;dr\r\n\r\nUse code points, not `char`. \r\n\r\n```java\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \r\n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                Function.identity ( ) ,  // Code point.\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \r\n                        )\r\n                );\r\n```\r\n\r\n## Code point\r\n\r\nUnfortunately, the `char` type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, `char` is physically incapable of representing most characters. Example: try `&quot;&#128567;&quot;.length()`. \r\n\r\nInstead, use [code point][1] integer numbers to work with individual characters. \r\n\r\nHere is an code point savvy version of the `Collectors.toMap` approach seen in the Answers [by WJS][2] and by [Cardinal System][3]. \r\n\r\nAs the key in our map, we use [`Integer`][4] to represent each code point. \r\n\r\nThe [`IntStream`][5] returned by [`String#codePoints`][6] yields a series of `int` primitive values, one per code point found in the input string. We convert each code point from an `int` primitive to a `Integer` object as we need an object rather than a primitive to be a key. The `int` to `Integer` conversion is performed by the call to [`.boxed()`][7]. \r\n\r\n```java\r\nString input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                \r\n                .boxed ( )\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                ( Integer codePoint ) -&gt; codePoint ,\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum\r\n                        )\r\n                );\r\n\r\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\r\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\r\n```\r\n\r\n## `Function.identity`\r\n\r\nThat first argument to `toMap` is saying for every code point, just use that code point. A shorter way of doing that is [`Function.identity()`][8]. \r\n\r\n```java\r\nString input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \r\n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                Function.identity ( ) ,  // Code point.\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \r\n                        )\r\n                );\r\n\r\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\r\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\r\n```\r\n\r\n## Result\r\n\r\nWhen run:\r\n\r\n```none\r\nfrequencies = {97=5, 98=2, 99=1, 100=3, 128567=1, 119=1, 122=1, 129436=2}\r\na = 5\r\nb = 2\r\nc = 1\r\nd = 3\r\n&#128567; = 1\r\nw = 1\r\nz = 1\r\n&#129436; = 2\r\n```\r\n\r\nIn contrast, if we changed `.codePoints()` to `.chars()`, we get incorrect results:\r\n\r\n```none\r\nfrequencies = {97=5, 98=2, 99=1, 100=3, 119=1, 56887=1, 122=1, 56732=2, 55357=1, 55358=2}\r\na = 5\r\nb = 2\r\nc = 1\r\nd = 3\r\nw = 1\r\n? = 1\r\nz = 1\r\n? = 2\r\n? = 1\r\n? = 2\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Code_point\r\n  [2]: https://stackoverflow.com/a/77325981/642706\r\n  [3]: https://stackoverflow.com/a/77325688/642706\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Integer.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/String.html#codePoints()\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html#boxed()\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/function/Function.html#identity()","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<h2>tl;dr</h2>\n<p>Use code points, not <code>char</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\n                .collect (\n                        Collectors.toMap (\n                                Function.identity ( ) ,  // Code point.\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \n                        )\n                );\n</code></pre>\n<h2>Code point</h2>\n<p>Unfortunately, the <code>char</code> type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, <code>char</code> is physically incapable of representing most characters. Example: try <code>&quot;😷&quot;.length()</code>.</p>\n<p>Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers to work with individual characters.</p>\n<p>Here is an code point savvy version of the <code>Collectors.toMap</code> approach seen in the Answers <a href=\"https://stackoverflow.com/a/77325981/642706\">by WJS</a> and by <a href=\"https://stackoverflow.com/a/77325688/642706\">Cardinal System</a>.</p>\n<p>As the key in our map, we use <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a> to represent each code point.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> returned by <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/String.html#codePoints()\" rel=\"nofollow noreferrer\"><code>String#codePoints</code></a> yields a series of <code>int</code> primitive values, one per code point found in the input string. We convert each code point from an <code>int</code> primitive to a <code>Integer</code> object as we need an object rather than a primitive to be a key. The <code>int</code> to <code>Integer</code> conversion is performed by the call to <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html#boxed()\" rel=\"nofollow noreferrer\"><code>.boxed()</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\nMap &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                \n                .boxed ( )\n                .collect (\n                        Collectors.toMap (\n                                ( Integer codePoint ) -&gt; codePoint ,\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum\n                        )\n                );\n\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\n</code></pre>\n<h2><code>Function.identity</code></h2>\n<p>That first argument to <code>toMap</code> is saying for every code point, just use that code point. A shorter way of doing that is <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/function/Function.html#identity()\" rel=\"nofollow noreferrer\"><code>Function.identity()</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\nMap &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\n                .collect (\n                        Collectors.toMap (\n                                Function.identity ( ) ,  // Code point.\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \n                        )\n                );\n\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\n</code></pre>\n<h2>Result</h2>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>frequencies = {97=5, 98=2, 99=1, 100=3, 128567=1, 119=1, 122=1, 129436=2}\na = 5\nb = 2\nc = 1\nd = 3\n😷 = 1\nw = 1\nz = 1\n🦜 = 2\n</code></pre>\n<p>In contrast, if we changed <code>.codePoints()</code> to <code>.chars()</code>, we get incorrect results:</p>\n<pre class=\"lang-none prettyprint-override\"><code>frequencies = {97=5, 98=2, 99=1, 100=3, 119=1, 56887=1, 122=1, 56732=2, 55357=1, 55358=2}\na = 5\nb = 2\nc = 1\nd = 3\nw = 1\n? = 1\nz = 1\n? = 2\n? = 1\n? = 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697843405,"creation_date":1697775207,"answer_id":77328294,"question_id":77325629,"body_markdown":"If you are open to using a third-party library, you could use [Eclipse Collections][1] `CharAdapter` or `CodePointAdapter` classes, and create either a `CharBag` or `IntBag` to count the characters by simply calling `toBag` on either adapter. While this answer doesn&#39;t use Streams, the advantage here, aside from being more concise, is that there is no boxing of `char` as `Character` instances or `int` as `Integer` instances. Everything remains either as `char` or `int` primitive values.\r\n\r\nBut before you continue using chars or codePoints with Strings in Java, you should read this blog from Cay Horstmann: [Stop using char in Java. And Code Points.][2]\r\n\r\nIf you&#39;re still convinced you want to use chars or codePoints, here are some examples with Eclipse Collections.\r\n\r\nHere&#39;s a char example.\r\n\r\n    @Test\r\n    public void chars()\r\n    {\r\n        String input = &quot;abacab&quot;;\r\n        CharAdapter chars = Strings.asChars(input);\r\n        CharBag counts = chars.toBag();\r\n    \r\n        MutableCharBag expected = CharBags.mutable.empty();\r\n        expected.addOccurrences(&#39;a&#39;, 3);\r\n        expected.addOccurrences(&#39;b&#39;, 2);\r\n        expected.addOccurrences(&#39;c&#39;, 1);    \r\n        Assertions.assertEquals(expected, counts);\r\n\r\n        CharAdapter output = Strings.toChars(counts.toSortedList().toArray());\r\n        Assertions.assertEquals(Strings.asChars(&quot;aaabbc&quot;), output);\r\n    }\r\n\r\nHere&#39;s a code point example.\r\n\r\n    @Test\r\n    public void codePoints()\r\n    {\r\n        // Using the example input from Basil Bourque&#39;s answer\r\n        String input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\n        CodePointAdapter codePoints = Strings.asCodePoints(input);\r\n        IntBag counts = codePoints.toBag();\r\n\r\n        MutableIntBag expected = IntBags.mutable.empty();\r\n        expected.addOccurrences(97, 5);\r\n        expected.addOccurrences(98, 2);\r\n        expected.addOccurrences(99, 1);\r\n        expected.addOccurrences(100, 3);\r\n        expected.addOccurrences(128567, 1);\r\n        expected.addOccurrences(119, 1);\r\n        expected.addOccurrences(122, 1);\r\n        expected.addOccurrences(129436, 2);\r\n        Assertions.assertEquals(expected, counts);\r\n\r\n        CodePointAdapter output = Strings.toCodePoints(counts.toSortedList().toArray());\r\n        Assertions.assertEquals(Strings.asCodePoints(&quot;aaaaabbcdddwz&#128567;&#129436;&#129436;&quot;), output);\r\n    }\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n  [2]: https://horstmann.com/unblog/2023-10-03/index.html","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>If you are open to using a third-party library, you could use <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a> <code>CharAdapter</code> or <code>CodePointAdapter</code> classes, and create either a <code>CharBag</code> or <code>IntBag</code> to count the characters by simply calling <code>toBag</code> on either adapter. While this answer doesn't use Streams, the advantage here, aside from being more concise, is that there is no boxing of <code>char</code> as <code>Character</code> instances or <code>int</code> as <code>Integer</code> instances. Everything remains either as <code>char</code> or <code>int</code> primitive values.</p>\n<p>But before you continue using chars or codePoints with Strings in Java, you should read this blog from Cay Horstmann: <a href=\"https://horstmann.com/unblog/2023-10-03/index.html\" rel=\"nofollow noreferrer\">Stop using char in Java. And Code Points.</a></p>\n<p>If you're still convinced you want to use chars or codePoints, here are some examples with Eclipse Collections.</p>\n<p>Here's a char example.</p>\n<pre><code>@Test\npublic void chars()\n{\n    String input = &quot;abacab&quot;;\n    CharAdapter chars = Strings.asChars(input);\n    CharBag counts = chars.toBag();\n\n    MutableCharBag expected = CharBags.mutable.empty();\n    expected.addOccurrences('a', 3);\n    expected.addOccurrences('b', 2);\n    expected.addOccurrences('c', 1);    \n    Assertions.assertEquals(expected, counts);\n\n    CharAdapter output = Strings.toChars(counts.toSortedList().toArray());\n    Assertions.assertEquals(Strings.asChars(&quot;aaabbc&quot;), output);\n}\n</code></pre>\n<p>Here's a code point example.</p>\n<pre><code>@Test\npublic void codePoints()\n{\n    // Using the example input from Basil Bourque's answer\n    String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\n    CodePointAdapter codePoints = Strings.asCodePoints(input);\n    IntBag counts = codePoints.toBag();\n\n    MutableIntBag expected = IntBags.mutable.empty();\n    expected.addOccurrences(97, 5);\n    expected.addOccurrences(98, 2);\n    expected.addOccurrences(99, 1);\n    expected.addOccurrences(100, 3);\n    expected.addOccurrences(128567, 1);\n    expected.addOccurrences(119, 1);\n    expected.addOccurrences(122, 1);\n    expected.addOccurrences(129436, 2);\n    Assertions.assertEquals(expected, counts);\n\n    CodePointAdapter output = Strings.toCodePoints(counts.toSortedList().toArray());\n    Assertions.assertEquals(Strings.asCodePoints(&quot;aaaaabbcdddwz😷🦜🦜&quot;), output);\n}\n</code></pre>\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1698049613,"creation_date":1697784887,"answer_id":77328854,"question_id":77325629,"body_markdown":"Here is another way of producing the desired result:\r\n\r\n    Map&lt;Character, Integer&gt; result = Stream.of(s.split(&quot;&quot;))\r\n                                           .collect(groupingBy(\r\n    \t\t\t\t\t\t\t                      e -&gt; Character.valueOf(e.charAt(0)), \r\n    \t\t\t\t\t\t\t\t                  summingInt(e -&gt; 1)\r\n                                            ));\r\n\r\nNOTE: Prior to Java version 8, use `s.split(&quot;(?!^)&quot;)` (to return a `String []` of individual characters as strings).\r\n\r\nThe `Stream#collect` method can take different grouping collectors as parameter. The one used here is [Collectors#groupingBy][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\r\n\r\n&lt;hr&gt;\r\n\r\nThis also produces the result by using the `IntStream#collect` method:\r\n\r\n    Map&lt;Character, Integer&gt; result =\r\n        s.chars()\r\n             .collect(\r\n                 () -&gt; new HashMap&lt;&gt;(),\r\n                 (m, k) -&gt; m.merge((char) k, 1, (v, x) -&gt; v + x),\r\n                 (m1, m2) -&gt; m1.putAll(m2)\r\n              );\r\n\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Here is another way of producing the desired result:</p>\n<pre><code>Map&lt;Character, Integer&gt; result = Stream.of(s.split(&quot;&quot;))\n                                       .collect(groupingBy(\n                                                  e -&gt; Character.valueOf(e.charAt(0)), \n                                                  summingInt(e -&gt; 1)\n                                        ));\n</code></pre>\n<p>NOTE: Prior to Java version 8, use <code>s.split(&quot;(?!^)&quot;)</code> (to return a <code>String []</code> of individual characters as strings).</p>\n<p>The <code>Stream#collect</code> method can take different grouping collectors as parameter. The one used here is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">Collectors#groupingBy</a></p>\n<hr>\n<p>This also produces the result by using the <code>IntStream#collect</code> method:</p>\n<pre><code>Map&lt;Character, Integer&gt; result =\n    s.chars()\n         .collect(\n             () -&gt; new HashMap&lt;&gt;(),\n             (m, k) -&gt; m.merge((char) k, 1, (v, x) -&gt; v + x),\n             (m1, m2) -&gt; m1.putAll(m2)\n          );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697789731,"creation_date":1697789731,"answer_id":77329320,"question_id":77325629,"body_markdown":"Using plain Java:\r\n```java\r\npublic static Map&lt;Character, Long&gt; histogram(String str) {\r\n    Map&lt;Character, Long&gt; map = new HashMap&lt;&gt;();\r\n\r\n    for (int i = 0; i &lt; str.length(); i++) {\r\n        char ch = str.charAt(i);\r\n        map.put(ch, map.getOrDefault(ch, 0L) + 1);\r\n    }\r\n\r\n    return Collections.unmodifiableMap(map);\r\n}\r\n```\r\n\r\nUsing Stream:\r\n```java\r\npublic static Map&lt;Character, Long&gt; histogram(String str) {\r\n    return IntStream.range(0, str.length())\r\n            .mapToObj(str::charAt)\r\n            .collect(Collectors.groupingBy(Function.identity(),\r\n                                           Collectors.counting()));\r\n}\r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Using plain Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;Character, Long&gt; histogram(String str) {\n    Map&lt;Character, Long&gt; map = new HashMap&lt;&gt;();\n\n    for (int i = 0; i &lt; str.length(); i++) {\n        char ch = str.charAt(i);\n        map.put(ch, map.getOrDefault(ch, 0L) + 1);\n    }\n\n    return Collections.unmodifiableMap(map);\n}\n</code></pre>\n<p>Using Stream:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;Character, Long&gt; histogram(String str) {\n    return IntStream.range(0, str.length())\n            .mapToObj(str::charAt)\n            .collect(Collectors.groupingBy(Function.identity(),\n                                           Collectors.counting()));\n}\n</code></pre>\n"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1697800620,"answer_count":9,"score":0,"last_activity_date":1698049613,"creation_date":1697733383,"question_id":77325629,"body_markdown":"I want the map to have key as `Character` and value as `Integer`, value represents the frequency of the character.\r\n\r\nThe below code won&#39;t compile because I am probably using the wrong signature for the `.toMap`\r\n\r\n```\r\nString s  = &quot;zwdacb&quot;;\r\n\r\n// Snippet to get a map\r\ns.chars().map(i-&gt;(char)i).collect(Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\r\n```\r\n\r\nCompiler gives this error:\r\n```\r\nCandidates for method call Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv) are:  \r\n  \r\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;)   \r\n\r\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;, BinaryOperator&lt;Object&gt;)   \r\n\r\nCollector&lt;T, ?, M&gt; toMap(Function&lt;? super T, ? extends K&gt;, Function&lt;? super T, ? extends U&gt;, BinaryOperator&lt;U&gt;, Supplier&lt;M&gt;) \r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>I want the map to have key as <code>Character</code> and value as <code>Integer</code>, value represents the frequency of the character.</p>\n<p>The below code won't compile because I am probably using the wrong signature for the <code>.toMap</code></p>\n<pre><code>String s  = &quot;zwdacb&quot;;\n\n// Snippet to get a map\ns.chars().map(i-&gt;(char)i).collect(Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\n</code></pre>\n<p>Compiler gives this error:</p>\n<pre><code>Candidates for method call Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv) are:  \n  \nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;)   \n\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;, BinaryOperator&lt;Object&gt;)   \n\nCollector&lt;T, ?, M&gt; toMap(Function&lt;? super T, ? extends K&gt;, Function&lt;? super T, ? extends U&gt;, BinaryOperator&lt;U&gt;, Supplier&lt;M&gt;) \n</code></pre>\n"},{"tags":["java","exchangewebservices","ewsjavaapi"],"owner":{"account_id":26888371,"reputation":1,"user_id":20467558,"display_name":"niubi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698049298,"creation_date":1698049183,"question_id":77343642,"body_markdown":"1\r\n\r\nI am using Pull Notification and EWS to have synchronization of appointments with Exchange 2010 server and my application. It works find, I am able to pull notification whenever user create, modify or delete an appointment.\r\n\r\nUsers have auto archive in their Microsoft Outlook, the auto archive can delete or move appointments in their calendar in Outlook, and notification fired and Pull Notification gets the message and process accordingly, this is correct.\r\n\r\nWhat I want to ask is, is there a way EWS can check whether the appointment (delete or modify or move) is archive\r\n\r\nThanks.\r\n\r\n\r\n\r\n\r\n\r\n\r\nThe following code is how I use EWS Java-API, i think i can get archiveTag from Appointment,but it not work,The APPOINTMENT class has no way to get ArchiveTag\r\n```java\r\n       PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties);\r\n        propertySet.add(AppointmentSchema.Recurrence);\r\n        propertySet.add(AppointmentSchema.ICalUid);\r\n        //there is no archive propertySet with AppointmentSchema\r\n        ExchangeService service2 = getExchangeService(&quot;*****&quot;, &quot;****&quot;);\r\n      \r\n       Appointment appointment2 = Appointment.bind(service2,new ItemId(&quot;::&quot;),propertySet);\r\n\r\n```","title":"java -EWS-api calendar archive","body":"<p>1</p>\n<p>I am using Pull Notification and EWS to have synchronization of appointments with Exchange 2010 server and my application. It works find, I am able to pull notification whenever user create, modify or delete an appointment.</p>\n<p>Users have auto archive in their Microsoft Outlook, the auto archive can delete or move appointments in their calendar in Outlook, and notification fired and Pull Notification gets the message and process accordingly, this is correct.</p>\n<p>What I want to ask is, is there a way EWS can check whether the appointment (delete or modify or move) is archive</p>\n<p>Thanks.</p>\n<p>The following code is how I use EWS Java-API, i think i can get archiveTag from Appointment,but it not work,The APPOINTMENT class has no way to get ArchiveTag</p>\n<pre class=\"lang-java prettyprint-override\"><code>       PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties);\n        propertySet.add(AppointmentSchema.Recurrence);\n        propertySet.add(AppointmentSchema.ICalUid);\n        //there is no archive propertySet with AppointmentSchema\n        ExchangeService service2 = getExchangeService(&quot;*****&quot;, &quot;****&quot;);\n      \n       Appointment appointment2 = Appointment.bind(service2,new ItemId(&quot;::&quot;),propertySet);\n\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":29195976,"reputation":29,"user_id":22367071,"display_name":"Rodrick Zadrozny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698048685,"creation_date":1698048685,"answer_id":77343588,"question_id":49009070,"body_markdown":"I guess you haven&#39;t set up a Repository for this entity, like this:\r\n```\r\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n\r\npublic interface CityRepository extends ElasticsearchRepository&lt;City, String&gt; {\r\n\r\n}\r\n```","title":"Spring-data-elasticsearch @CompletionField does not create field with type &quot;complete&quot;","body":"<p>I guess you haven't set up a Repository for this entity, like this:</p>\n<pre><code>import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\npublic interface CityRepository extends ElasticsearchRepository&lt;City, String&gt; {\n\n}\n</code></pre>\n"}],"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1226,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1698048685,"creation_date":1519735596,"question_id":49009070,"body_markdown":"I am using `Spring-data-elasticsearch` and there `ElasticsearchTemplate` functions.\r\n\r\nI try to create an index by using the `@CompletionField` annotation on a `Completion` field named `suggest`. \r\n\r\n    @Document(indexName = &quot;city&quot;, type = &quot;city&quot;)\r\n    public class City {\r\n        \r\n        @Id\r\n        private String id;\r\n        \r\n        @Field\r\n        private String name;\r\n        \r\n        @CompletionField\r\n        private Completion suggest;\r\n    }\r\nThe `@CompletionField` annotation should be used to for the suggest-complete functions of elasticsearch. Like described in the java-doc:\r\n\r\n    /**\r\n     * Based on the reference doc - http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-suggesters-completion.html\r\n     *\r\n     * @author Mewes Kochheim\r\n     */\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.FIELD)\r\n    @Documented\r\n    @Inherited\r\n    public @interface CompletionField {\r\n\r\nIn the [elasticsearch docs][1] they say, that the field should have a type `complete` to use the suggest-complete functions.\r\n\r\n**But if I create my index unfortunately the field `suggest` has not the type `complete` instead it hast the type `keyword`. Which gives me an error when I try to query a suggest query.**\r\n\r\n    CompletionSuggestionBuilder s = SuggestBuilders.completionSuggestion(&quot;suggest&quot;).prefix(text, Fuzziness.ONE);\r\n    SuggestBuilder b = new SuggestBuilder().addSuggestion(&quot;test-suggest&quot;, s);\r\n    SearchResponse response = elasticsearchTemplate.suggest(b, &quot;city&quot;);\r\n\r\nException:\r\n\r\n    java.lang.IllegalArgumentException: no mapping found for field [suggest]\r\n\r\nAll my code is based on the spring-data-elasticsearch git repository. \r\n\r\n[ElasticsearchTemplateCompletionTests.java][2]\r\n\r\n[CompletionAnnotatedEntity.java][3]\r\n\r\nDo I miss any configuration in my `City` document or any other annotation? \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-suggesters-completion.html#completion-suggester-mapping\r\n  [2]: https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/ElasticsearchTemplateCompletionTests.java\r\n  [3]: https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/CompletionAnnotatedEntity.java","title":"Spring-data-elasticsearch @CompletionField does not create field with type &quot;complete&quot;","body":"<p>I am using <code>Spring-data-elasticsearch</code> and there <code>ElasticsearchTemplate</code> functions.</p>\n\n<p>I try to create an index by using the <code>@CompletionField</code> annotation on a <code>Completion</code> field named <code>suggest</code>. </p>\n\n<pre><code>@Document(indexName = \"city\", type = \"city\")\npublic class City {\n\n    @Id\n    private String id;\n\n    @Field\n    private String name;\n\n    @CompletionField\n    private Completion suggest;\n}\n</code></pre>\n\n<p>The <code>@CompletionField</code> annotation should be used to for the suggest-complete functions of elasticsearch. Like described in the java-doc:</p>\n\n<pre><code>/**\n * Based on the reference doc - http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-suggesters-completion.html\n *\n * @author Mewes Kochheim\n */\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\n@Documented\n@Inherited\npublic @interface CompletionField {\n</code></pre>\n\n<p>In the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-suggesters-completion.html#completion-suggester-mapping\" rel=\"noreferrer\">elasticsearch docs</a> they say, that the field should have a type <code>complete</code> to use the suggest-complete functions.</p>\n\n<p><strong>But if I create my index unfortunately the field <code>suggest</code> has not the type <code>complete</code> instead it hast the type <code>keyword</code>. Which gives me an error when I try to query a suggest query.</strong></p>\n\n<pre><code>CompletionSuggestionBuilder s = SuggestBuilders.completionSuggestion(\"suggest\").prefix(text, Fuzziness.ONE);\nSuggestBuilder b = new SuggestBuilder().addSuggestion(\"test-suggest\", s);\nSearchResponse response = elasticsearchTemplate.suggest(b, \"city\");\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: no mapping found for field [suggest]\n</code></pre>\n\n<p>All my code is based on the spring-data-elasticsearch git repository. </p>\n\n<p><a href=\"https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/ElasticsearchTemplateCompletionTests.java\" rel=\"noreferrer\">ElasticsearchTemplateCompletionTests.java</a></p>\n\n<p><a href=\"https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/CompletionAnnotatedEntity.java\" rel=\"noreferrer\">CompletionAnnotatedEntity.java</a></p>\n\n<p>Do I miss any configuration in my <code>City</code> document or any other annotation? </p>\n"},{"tags":["java","ftp","ftp-client","apache-commons-net"],"comments":[{"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1565073549,"post_id":57369232,"comment_id":101225618,"body_markdown":"I guess that this is your related question, posted using a different account: [Can the FTP client control FTP server time-out settings?](https://stackoverflow.com/q/57352335/850848)","body":"I guess that this is your related question, posted using a different account: <a href=\"https://stackoverflow.com/q/57352335/850848\">Can the FTP client control FTP server time-out settings?</a>"}],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698048352,"creation_date":1565073483,"answer_id":57370215,"question_id":57369232,"body_markdown":"There&#39;s nothing that will do it for you, the comment you have quoted is clear about that.\r\n\r\nYou have to code it yourself:  \r\nRead the stream and while doing that, in regular intervals, call the [`FTPClient.sendNoOp`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#sendNoOp()).","title":"FTPClient - Send Noop to a FTP server in a stream method","body":"<p>There's nothing that will do it for you, the comment you have quoted is clear about that.</p>\n<p>You have to code it yourself:<br />\nRead the stream and while doing that, in regular intervals, call the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#sendNoOp()\" rel=\"nofollow noreferrer\"><code>FTPClient.sendNoOp</code></a>.</p>\n"}],"owner":{"account_id":16454328,"reputation":27,"user_id":11886918,"display_name":"puregyu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1086,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57370215,"answer_count":1,"score":1,"last_activity_date":1698048352,"creation_date":1565067783,"question_id":57369232,"body_markdown":"I&#39;m using `FTPClient` (Apache Commons Net)\r\n\r\nI know that `FTPClient` provides two methods to avoid the idle state of the FTP server:\r\n\r\n 1. `ftpClient.setControlKeepAliveTimeout(300)` &amp;ndash; Send a noop every five minutes\r\n 2. `ftpClient.sendNoOp()` &amp;ndash; send a noop a one-time event\r\n\r\nI tried to use `setControlKeepAliveTimeout()`\r\n\r\nBut the official FTPClient document On `setControlKeepAliveTimeout`....\r\n\r\n&gt; Please note: this does not apply to the methods where the user is\r\n&gt; responsible for writing or reading the data stream, i.e.\r\n&gt; `retrieveFileStream(String)`, `storeFileStream*(String)` and the other\r\n&gt; `xxxFileStream` methods\r\n\r\nMy program uses only `retrieveFileStream`, which is not applied to `setControlKeepAliveTimeout` .\r\n\r\nIs there no way to operate the noop repeatedly in a stream method, not a one-time event, like a `sendNoOp`?","title":"FTPClient - Send Noop to a FTP server in a stream method","body":"<p>I'm using <code>FTPClient</code> (Apache Commons Net)</p>\n\n<p>I know that <code>FTPClient</code> provides two methods to avoid the idle state of the FTP server:</p>\n\n<ol>\n<li><code>ftpClient.setControlKeepAliveTimeout(300)</code> &ndash; Send a noop every five minutes</li>\n<li><code>ftpClient.sendNoOp()</code> &ndash; send a noop a one-time event</li>\n</ol>\n\n<p>I tried to use <code>setControlKeepAliveTimeout()</code></p>\n\n<p>But the official FTPClient document On <code>setControlKeepAliveTimeout</code>....</p>\n\n<blockquote>\n  <p>Please note: this does not apply to the methods where the user is\n  responsible for writing or reading the data stream, i.e.\n  <code>retrieveFileStream(String)</code>, <code>storeFileStream*(String)</code> and the other\n  <code>xxxFileStream</code> methods</p>\n</blockquote>\n\n<p>My program uses only <code>retrieveFileStream</code>, which is not applied to <code>setControlKeepAliveTimeout</code> .</p>\n\n<p>Is there no way to operate the noop repeatedly in a stream method, not a one-time event, like a <code>sendNoOp</code>?</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698048326,"creation_date":1578660830,"answer_id":59682115,"question_id":59681644,"body_markdown":"Apache Commons Net [`FTPClient.retrieveFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,java.io.OutputStream)) does not work with any local files directly. It takes [`OutputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html) as a parameter and blindly writes the downloaded data to it.\r\n\r\nIt is up to the `OutputStream`, what it does with the data.\r\n\r\nIf you use [`FileOutputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html), it will overwrite the existing file *immediately* – even *before* you actually call `FTPClient.retrieveFile`.\r\n\r\nIf you need any other behavior, you have to code it.","title":"Whether the Apache FTPClient.retrieveFile method creates temporary file","body":"<p>Apache Commons Net <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,java.io.OutputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.retrieveFile</code></a> does not work with any local files directly. It takes <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html\" rel=\"nofollow noreferrer\"><code>OutputStream</code></a> as a parameter and blindly writes the downloaded data to it.</p>\n<p>It is up to the <code>OutputStream</code>, what it does with the data.</p>\n<p>If you use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html\" rel=\"nofollow noreferrer\"><code>FileOutputStream</code></a>, it will overwrite the existing file <em>immediately</em> – even <em>before</em> you actually call <code>FTPClient.retrieveFile</code>.</p>\n<p>If you need any other behavior, you have to code it.</p>\n"}],"owner":{"account_id":15412186,"reputation":13,"user_id":12653322,"display_name":"Ксения Ивашкина"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59682115,"answer_count":1,"score":1,"last_activity_date":1698048326,"creation_date":1578659091,"question_id":59681644,"body_markdown":"I am using Apache `FTPClient` for the Android. I download files from the server and overwrite them instead of local ones. I need to make sure that the files were downloaded correctly. Will the method `FTPClient.retrieveFile` work for me? Does it check the correctness of the file or just overwrite it immediately? I. e. if the broken file was downloaded (for example the Internet disconnect), then on the local device I will receive old version of the file or broken?","title":"Whether the Apache FTPClient.retrieveFile method creates temporary file","body":"<p>I am using Apache <code>FTPClient</code> for the Android. I download files from the server and overwrite them instead of local ones. I need to make sure that the files were downloaded correctly. Will the method <code>FTPClient.retrieveFile</code> work for me? Does it check the correctness of the file or just overwrite it immediately? I. e. if the broken file was downloaded (for example the Internet disconnect), then on the local device I will receive old version of the file or broken?</p>\n"},{"tags":["java","selenium-webdriver","fluentwait"],"comments":[{"owner":{"account_id":4057546,"reputation":138,"user_id":6453997,"accept_rate":33,"display_name":"John Smith"},"score":0,"creation_date":1698048042,"post_id":77343239,"comment_id":136350904,"body_markdown":"Just set it to implicit wait, usually implicit is better anyway","body":"Just set it to implicit wait, usually implicit is better anyway"}],"answers":[{"comments":[{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698052165,"post_id":77343559,"comment_id":136351597,"body_markdown":"Thank you for the brilliant response back! It turns out it was doing exactly what I&#39;d told it to do. But your answer forced me to go and find it!\n\nI was doing a scroll to element within a try catch block, and outputting the trace every time. So it makes sense as to what it was doing. The wait was doing exactly as it should","body":"Thank you for the brilliant response back! It turns out it was doing exactly what I&#39;d told it to do. But your answer forced me to go and find it!  I was doing a scroll to element within a try catch block, and outputting the trace every time. So it makes sense as to what it was doing. The wait was doing exactly as it should"}],"tags":[],"owner":{"account_id":13688997,"reputation":658,"user_id":9877340,"display_name":"kenneth"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698048294,"creation_date":1698048294,"answer_id":77343559,"question_id":77343239,"body_markdown":"I have little to no experience in FluentWaits, but there are several causes for Selenium not finding an element with NoSuchElementException. You might want to use WebDriverWait instead of FluentWait, since it&#39;s giving you a lot of options to choose from. Using these options the correct way helps you find the element the right way.\r\n\r\nLet&#39;s first initialize a WebDriverWait, simple:\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 30);\r\n\r\nThe enormous amount of ExpectedConditions are given in [this documentation](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html). But I would advise you two of the most frequently and simple ones you can use:\r\n\r\n1. **visibilityOfElementLocated**(By locator)\r\n\r\nThis one is my preffered way, since it&#39;s checking (1) if the element exists and (2) it&#39;s visible in the window/viewport. That way you have most guarantee you can interact with the element.\r\n\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By locator));\r\n\r\n2. **presenceOfElementLocated**(By locator)\r\n\r\nIf you come across `TimeoutException` or `NoSuchElementException`, this would be a good choice. Since it&#39;s now scanning the entire DOM and it doesn&#39;t need to be visible in your screen. You might have issues when interacting with the element like `click()`, but it&#39;s your best choice if you need to just see if the element exists.\r\n\r\n    wait.until(ExpectedConditions.presenceOfElementLocated(By locator));\r\n\r\n**Solution** When having issues with NoSuchElementException, choose for Waits where you will see if the element Exists.","title":"Selenium NoSuchElementException when waiting","body":"<p>I have little to no experience in FluentWaits, but there are several causes for Selenium not finding an element with NoSuchElementException. You might want to use WebDriverWait instead of FluentWait, since it's giving you a lot of options to choose from. Using these options the correct way helps you find the element the right way.</p>\n<p>Let's first initialize a WebDriverWait, simple:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 30);\n</code></pre>\n<p>The enormous amount of ExpectedConditions are given in <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html\" rel=\"nofollow noreferrer\">this documentation</a>. But I would advise you two of the most frequently and simple ones you can use:</p>\n<ol>\n<li><strong>visibilityOfElementLocated</strong>(By locator)</li>\n</ol>\n<p>This one is my preffered way, since it's checking (1) if the element exists and (2) it's visible in the window/viewport. That way you have most guarantee you can interact with the element.</p>\n<pre><code>wait.until(ExpectedConditions.visibilityOfElementLocated(By locator));\n</code></pre>\n<ol start=\"2\">\n<li><strong>presenceOfElementLocated</strong>(By locator)</li>\n</ol>\n<p>If you come across <code>TimeoutException</code> or <code>NoSuchElementException</code>, this would be a good choice. Since it's now scanning the entire DOM and it doesn't need to be visible in your screen. You might have issues when interacting with the element like <code>click()</code>, but it's your best choice if you need to just see if the element exists.</p>\n<pre><code>wait.until(ExpectedConditions.presenceOfElementLocated(By locator));\n</code></pre>\n<p><strong>Solution</strong> When having issues with NoSuchElementException, choose for Waits where you will see if the element Exists.</p>\n"}],"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77343559,"answer_count":1,"score":1,"last_activity_date":1698048294,"creation_date":1698044909,"question_id":77343239,"body_markdown":"I&#39;m getting the what seems fairly common `NoSuchElementException` when waiting on an element to load in the DOM. I&#39;ve used a fluent wait and ignored it but it still seems to be happening. Tests are passing, it does eventually locate the element. \r\n\r\nCode:\r\n\r\n     Wait&lt;WebDriver&gt; wait = new FluentWait&lt;&gt;(driver)\r\n                    .withTimeout(Duration.ofSeconds(15))\r\n                    .pollingEvery(Duration.ofMillis(500))\r\n                    .ignoring(ElementNotInteractableException.class, NoSuchElementException.class);\r\n\r\nStack:\r\n\r\n    org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[class=&quot;fsrAbandonButton&quot;]&quot;}\r\n      (Session info: headless chrome=118.0.5993.88)\r\n\r\nI&#39;m confused as to why it would still output this error when I&#39;m explicitly telling it to ignore this?","title":"Selenium NoSuchElementException when waiting","body":"<p>I'm getting the what seems fairly common <code>NoSuchElementException</code> when waiting on an element to load in the DOM. I've used a fluent wait and ignored it but it still seems to be happening. Tests are passing, it does eventually locate the element.</p>\n<p>Code:</p>\n<pre><code> Wait&lt;WebDriver&gt; wait = new FluentWait&lt;&gt;(driver)\n                .withTimeout(Duration.ofSeconds(15))\n                .pollingEvery(Duration.ofMillis(500))\n                .ignoring(ElementNotInteractableException.class, NoSuchElementException.class);\n</code></pre>\n<p>Stack:</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[class=&quot;fsrAbandonButton&quot;]&quot;}\n  (Session info: headless chrome=118.0.5993.88)\n</code></pre>\n<p>I'm confused as to why it would still output this error when I'm explicitly telling it to ignore this?</p>\n"},{"tags":["java","android","android-studio","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698048249,"creation_date":1651089555,"answer_id":72034615,"question_id":72034438,"body_markdown":"Your error handling is wrong.\r\n\r\nThe [`FTPClient.login`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String)) does not *throw an exception*, when the credentials are wrong. It *returns* a `false`. You do not test for that. Your code carries on, trying to work with not authorized session instead, all of which will obviously fail too.\r\n\r\nBut as the same is true for [`FTPClient.storeFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)), which also just returns `false`, your code basically does not notice any errors.\r\n\r\n","title":"Apache Commons Net FTP does not throw any exception on wrong credentials","body":"<p>Your error handling is wrong.</p>\n<p>The <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.login</code></a> does not <em>throw an exception</em>, when the credentials are wrong. It <em>returns</em> a <code>false</code>. You do not test for that. Your code carries on, trying to work with not authorized session instead, all of which will obviously fail too.</p>\n<p>But as the same is true for <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code></a>, which also just returns <code>false</code>, your code basically does not notice any errors.</p>\n"}],"owner":{"account_id":8387433,"reputation":25,"user_id":6297365,"display_name":"Logic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72034615,"answer_count":1,"score":1,"last_activity_date":1698048249,"creation_date":1651088545,"question_id":72034438,"body_markdown":"I just managed to upload some files to an FTP server using Apache Commons Net FTP. When I use everything as it should be it works fine, I mean, the file uploading is working, but when I use, for example, a wrong password for the FTP account, obviously the files don&#39;t get uploaded to the server, but I don&#39;t get an error message either. In other words: I don&#39;t know how to show the error. I tried to show with a toast the `e.getMessage()` from the `Exception` but nothing is shown. Is there any documentation that would help me? Or am I missing something you could help me with? thank you!\r\n\r\nThis is my code:\r\n\r\n```\r\n@Override\r\nprotected Void doInBackground(Void... voids) {\r\n    FTPClient ftpClient=new FTPClient();\r\n    try {\r\n        ftpClient.connect(fserver);\r\n        ftpClient.login(fusername,fpassword);\r\n        ftpClient.enterLocalPassiveMode();\r\n\r\n        dirArch = new ArrayList&lt;&gt;();\r\n        for (int k=0;k&lt;adapter.getSelected().size();k++){\r\n            dirArch.add(adapter.getSelected().get(k).getArch());\r\n        }\r\n        for (String archTXT : dirArch){\r\n            File fileX =new File(stringFolder,archTXT);\r\n            InputStream inputStream=new FileInputStream(fileX);\r\n            ftpClient.storeFile(archTXT,inputStream);\r\n            inputStream.close();\r\n            pbPorc=pbPorc+pbSum;\r\n            pb1.setProgress(pbPorc);\r\n            pb2.setProgress(pbPorc);\r\n        }\r\n        ftpClient.logout();\r\n        ftpClient.disconnect();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n        Toast.makeText(ExportTracks.this,e.getMessage(),Toast.LENGTH_LONG).show();\r\n    }\r\n    return null;\r\n}\r\n```","title":"Apache Commons Net FTP does not throw any exception on wrong credentials","body":"<p>I just managed to upload some files to an FTP server using Apache Commons Net FTP. When I use everything as it should be it works fine, I mean, the file uploading is working, but when I use, for example, a wrong password for the FTP account, obviously the files don't get uploaded to the server, but I don't get an error message either. In other words: I don't know how to show the error. I tried to show with a toast the <code>e.getMessage()</code> from the <code>Exception</code> but nothing is shown. Is there any documentation that would help me? Or am I missing something you could help me with? thank you!</p>\n<p>This is my code:</p>\n<pre><code>@Override\nprotected Void doInBackground(Void... voids) {\n    FTPClient ftpClient=new FTPClient();\n    try {\n        ftpClient.connect(fserver);\n        ftpClient.login(fusername,fpassword);\n        ftpClient.enterLocalPassiveMode();\n\n        dirArch = new ArrayList&lt;&gt;();\n        for (int k=0;k&lt;adapter.getSelected().size();k++){\n            dirArch.add(adapter.getSelected().get(k).getArch());\n        }\n        for (String archTXT : dirArch){\n            File fileX =new File(stringFolder,archTXT);\n            InputStream inputStream=new FileInputStream(fileX);\n            ftpClient.storeFile(archTXT,inputStream);\n            inputStream.close();\n            pbPorc=pbPorc+pbSum;\n            pb1.setProgress(pbPorc);\n            pb2.setProgress(pbPorc);\n        }\n        ftpClient.logout();\n        ftpClient.disconnect();\n    } catch (IOException e) {\n        e.printStackTrace();\n        Toast.makeText(ExportTracks.this,e.getMessage(),Toast.LENGTH_LONG).show();\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1698048158,"creation_date":1523255522,"answer_id":49726800,"question_id":49711631,"body_markdown":"Use [`FTPClient.mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()) (recommended, if the server supports it) or\r\n[`FTPClient.listFiles`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()) to retrieve list of files. And then filter them according to your needs.\r\n\r\nThe following example downloads all files matching a regular expression `.*\\.jpg`:\r\n\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n    \r\n    Pattern pattern = Pattern.compile(&quot;.*\\\\.jpg&quot;);\r\n    Stream&lt;FTPFile&gt; matchingFiles =\r\n        Arrays.stream(remoteFiles).filter(\r\n            (FTPFile remoteFile) -&gt; pattern.matcher(remoteFile.getName()).matches());\r\n    \r\n    for (Iterator&lt;FTPFile&gt; iter = matchingFiles.iterator(); iter.hasNext(); ) {\r\n    \tFTPFile remoteFile = iter.next();\r\n        System.out.println(&quot;Found file &quot; + remoteFile.getName() + &quot;, downloading ...&quot;);\r\n    \r\n        File localFile = new File(localPath + &quot;\\\\&quot; + remoteFile.getName());\r\n        \r\n        OutputStream outputStream =\r\n            new BufferedOutputStream(new FileOutputStream(localFile));\r\n        if (ftpClient.retrieveFile(remotePath + &quot;/&quot; + remoteFile.getName(), outputStream))\r\n        {\r\n            System.out.println(\r\n                &quot;File &quot; + remoteFile.getName() + &quot; downloaded successfully.&quot;);\r\n        }\r\n        outputStream.close();\r\n    }\r\n\r\n","title":"Download a files from FTP matching a wildcard using Java Apache Commons Net","body":"<p>Use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()\" rel=\"nofollow noreferrer\"><code>FTPClient.mlistDir</code></a> (recommended, if the server supports it) or\n<a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()\" rel=\"nofollow noreferrer\"><code>FTPClient.listFiles</code></a> to retrieve list of files. And then filter them according to your needs.</p>\n<p>The following example downloads all files matching a regular expression <code>.*\\.jpg</code>:</p>\n<pre><code>FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n\nPattern pattern = Pattern.compile(&quot;.*\\\\.jpg&quot;);\nStream&lt;FTPFile&gt; matchingFiles =\n    Arrays.stream(remoteFiles).filter(\n        (FTPFile remoteFile) -&gt; pattern.matcher(remoteFile.getName()).matches());\n\nfor (Iterator&lt;FTPFile&gt; iter = matchingFiles.iterator(); iter.hasNext(); ) {\n    FTPFile remoteFile = iter.next();\n    System.out.println(&quot;Found file &quot; + remoteFile.getName() + &quot;, downloading ...&quot;);\n\n    File localFile = new File(localPath + &quot;\\\\&quot; + remoteFile.getName());\n    \n    OutputStream outputStream =\n        new BufferedOutputStream(new FileOutputStream(localFile));\n    if (ftpClient.retrieveFile(remotePath + &quot;/&quot; + remoteFile.getName(), outputStream))\n    {\n        System.out.println(\n            &quot;File &quot; + remoteFile.getName() + &quot; downloaded successfully.&quot;);\n    }\n    outputStream.close();\n}\n</code></pre>\n"}],"owner":{"account_id":12239260,"reputation":144,"user_id":8932774,"display_name":"Karthik Deepan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3225,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1698048158,"creation_date":1523132524,"question_id":49711631,"body_markdown":"Basically I need to download list of matching files for the search from a FTP server.  I have the code to download a specific file from a FTP server.  But I need to download all the matching files with my wildcard search.  How is that possible in Java?\r\n\r\nHere is code for file downloading of a specific filename, from a FTP server - \r\n\r\n    import java.io.BufferedOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import org.apache.commons.net.ftp.FTP;\r\n    import org.apache.commons.net.ftp.FTPClient;\r\n    import org.apache.commons.net.ftp.FTPFile;\r\n    public class FTPDownloadFileDemowithoutmodandfilefilter {\r\n        public static void main(String[] args) {\r\n            String server = &quot;test.rebex.net&quot;;\r\n            int port = 21;\r\n            String user = &quot;demo&quot;;\r\n            String pass = &quot;password&quot;;\r\n            FTPClient ftpClient = new FTPClient();\r\n            try {\r\n                ftpClient.connect(server, port);\r\n                ftpClient.login(user, pass);\r\n                ftpClient.enterLocalPassiveMode();\r\n                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n               \r\n                File localFile = new File(&quot;C:\\\\project\\\\readme1.txt&quot;);\r\n                FTPFile remoteFile = ftpClient.mdtmFile(&quot;/readme.txt&quot;);\r\n                if (remoteFile != null)\r\n                {\r\n                    OutputStream outputStream =\r\n                        new BufferedOutputStream(new FileOutputStream(localFile));\r\n                    if (ftpClient.retrieveFile(remoteFile.getName(), outputStream))\r\n                    {\r\n                        System.out.println(&quot;File downloaded successfully.&quot;);\r\n                    }\r\n                    outputStream.close();\r\n    \r\n                    localFile.setLastModified(remoteFile.getTimestamp().getTimeInMillis());\r\n                }\r\n                \r\n            } catch (IOException ex) {\r\n                System.out.println(&quot;Error: &quot; + ex.getMessage());\r\n                ex.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (ftpClient.isConnected()) {\r\n                        ftpClient.logout();\r\n                        ftpClient.disconnect();\r\n                    }\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n    \r\n    }","title":"Download a files from FTP matching a wildcard using Java Apache Commons Net","body":"<p>Basically I need to download list of matching files for the search from a FTP server.  I have the code to download a specific file from a FTP server.  But I need to download all the matching files with my wildcard search.  How is that possible in Java?</p>\n\n<p>Here is code for file downloading of a specific filename, from a FTP server - </p>\n\n<pre><code>import java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport org.apache.commons.net.ftp.FTP;\nimport org.apache.commons.net.ftp.FTPClient;\nimport org.apache.commons.net.ftp.FTPFile;\npublic class FTPDownloadFileDemowithoutmodandfilefilter {\n    public static void main(String[] args) {\n        String server = \"test.rebex.net\";\n        int port = 21;\n        String user = \"demo\";\n        String pass = \"password\";\n        FTPClient ftpClient = new FTPClient();\n        try {\n            ftpClient.connect(server, port);\n            ftpClient.login(user, pass);\n            ftpClient.enterLocalPassiveMode();\n            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n\n            File localFile = new File(\"C:\\\\project\\\\readme1.txt\");\n            FTPFile remoteFile = ftpClient.mdtmFile(\"/readme.txt\");\n            if (remoteFile != null)\n            {\n                OutputStream outputStream =\n                    new BufferedOutputStream(new FileOutputStream(localFile));\n                if (ftpClient.retrieveFile(remoteFile.getName(), outputStream))\n                {\n                    System.out.println(\"File downloaded successfully.\");\n                }\n                outputStream.close();\n\n                localFile.setLastModified(remoteFile.getTimestamp().getTimeInMillis());\n            }\n\n        } catch (IOException ex) {\n            System.out.println(\"Error: \" + ex.getMessage());\n            ex.printStackTrace();\n        } finally {\n            try {\n                if (ftpClient.isConnected()) {\n                    ftpClient.logout();\n                    ftpClient.disconnect();\n                }\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n}\n</code></pre>\n"},{"tags":["java","tomcat","tomcat7","tomcat8"],"comments":[{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1343322256,"post_id":11656596,"comment_id":15474871,"body_markdown":"Please post your attempted configuration. It&#39;s hard to guess why it&#39;s not working when you don&#39;t post what you&#39;ve tried.","body":"Please post your attempted configuration. It&#39;s hard to guess why it&#39;s not working when you don&#39;t post what you&#39;ve tried."},{"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"score":0,"creation_date":1343394920,"post_id":11656596,"comment_id":15497477,"body_markdown":"I&#39;ve added the line i&#39;am using in context.xml. Sorry and thanks","body":"I&#39;ve added the line i&#39;am using in context.xml. Sorry and thanks"},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1343421198,"post_id":11656596,"comment_id":15509002,"body_markdown":"Do you want to disable scanning of all JAR files entirely? You have no `.tld` files that need to be auto-discovered and you don&#39;t use any annotations?","body":"Do you want to disable scanning of all JAR files entirely? You have no <code>.tld</code> files that need to be auto-discovered and you don&#39;t use any annotations?"},{"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"score":0,"creation_date":1343926786,"post_id":11656596,"comment_id":15650106,"body_markdown":"I removed the entry from web.xml and the issue stoped. Still wanting to disable JarScanner from Context.xml (for prototyiping purposes)","body":"I removed the entry from web.xml and the issue stoped. Still wanting to disable JarScanner from Context.xml (for prototyiping purposes)"}],"answers":[{"comments":[{"owner":{"account_id":1167427,"reputation":24342,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"score":0,"creation_date":1515755998,"post_id":27974133,"comment_id":83431893,"body_markdown":"Is that the global context.xml file located at `/etc/tomcat8/context.xml`?   Can jar scanning be disabled on a web-app by web-app basis by instead placing the configuration in your web app&#39;s war file in `WEB-INF/web.xml`?","body":"Is that the global context.xml file located at <code>&#47;etc&#47;tomcat8&#47;context.xml</code>?   Can jar scanning be disabled on a web-app by web-app basis by instead placing the configuration in your web app&#39;s war file in <code>WEB-INF&#47;web.xml</code>?"},{"owner":{"account_id":1228608,"reputation":1107,"user_id":1193657,"display_name":"Talijanac"},"score":3,"creation_date":1518092249,"post_id":27974133,"comment_id":84367813,"body_markdown":"It can be disabled on web-app by bassis by using application META-INF/context.xml file","body":"It can be disabled on web-app by bassis by using application META-INF/context.xml file"}],"tags":[],"owner":{"account_id":55444,"reputation":5230,"user_id":166062,"display_name":"Lari Hotari"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1687152456,"creation_date":1421360691,"answer_id":27974133,"question_id":11656596,"body_markdown":"You should add the JarScanner element as a child of the root Context element in the context.xml file.\r\n\r\nI have this kind of META-INF/context.xml file in the war file for disabling the JarScanner:\r\n\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Context&gt;\r\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;/&gt;\r\n&lt;/Context&gt;\r\n```","title":"How to disable Tomcat JARScanner","body":"<p>You should add the JarScanner element as a child of the root Context element in the context.xml file.</p>\n<p>I have this kind of META-INF/context.xml file in the war file for disabling the JarScanner:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Context&gt;\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;/&gt;\n&lt;/Context&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":423223,"reputation":5101,"user_id":802482,"accept_rate":67,"display_name":"Black"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1698047777,"creation_date":1590839654,"answer_id":62102049,"question_id":11656596,"body_markdown":"you can disable the JarScanner globally for user-defined patterns by opening the file at\r\n\r\n    %TOMCAT_HOME%/conf/catalina.properties\r\n\r\nand add a filename pattern to `tomcat.util.scan.StandardJarScanFilter.jarsToSkip` list.\r\nFor example, if you want to disable jar scanning completely you could add:\r\n\r\n    tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\\\r\n    *.jar,\\\r\n\r\nNOTE: this may of course lead to issues if you&#39;re employing JSTL, as templates won&#39;t be found by the scanner\r\n","title":"How to disable Tomcat JARScanner","body":"<p>you can disable the JarScanner globally for user-defined patterns by opening the file at</p>\n<pre><code>%TOMCAT_HOME%/conf/catalina.properties\n</code></pre>\n<p>and add a filename pattern to <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip</code> list.\nFor example, if you want to disable jar scanning completely you could add:</p>\n<pre><code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\\\n*.jar,\\\n</code></pre>\n<p>NOTE: this may of course lead to issues if you're employing JSTL, as templates won't be found by the scanner</p>\n"},{"tags":[],"owner":{"account_id":7730752,"reputation":92,"user_id":5853985,"display_name":"Shaheed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649066108,"creation_date":1649066108,"answer_id":71735242,"question_id":11656596,"body_markdown":"  in your java app add this :\r\n  \r\n\r\n    @Bean\r\n    public TomcatServletWebServerFactory tomcatServletFactory() {\r\n        return new TomcatServletWebServerFactory() {\r\n            @Override\r\n            protected void postProcessContext(final Context context) {\r\n                ((StandardJarScanner) context.getJarScanner()).setScanManifest(false);\r\n            }\r\n        };\r\n    }","title":"How to disable Tomcat JARScanner","body":"<p>in your java app add this :</p>\n<pre><code>@Bean\npublic TomcatServletWebServerFactory tomcatServletFactory() {\n    return new TomcatServletWebServerFactory() {\n        @Override\n        protected void postProcessContext(final Context context) {\n            ((StandardJarScanner) context.getJarScanner()).setScanManifest(false);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661628723,"creation_date":1661628723,"answer_id":73513872,"question_id":11656596,"body_markdown":"This is what I did for Spring Boot. \r\n\r\nBasically, append a new ignored jar file to the existing list of jars to ignore. This way, you don&#39;t totally disable the scanner, affecting who knows what else.\r\n\r\n    @Configuration\r\n    public class Config {\r\n\r\n\t\t@Bean\r\n\t\tpublic ServletWebServerFactory servletContainer() {\r\n\t\t\treturn new TomcatServletWebServerFactory() {\r\n\t\t\t\t@Override\r\n\t\t\t\tprotected void postProcessContext(Context context) {\r\n\t\t\t\t\t// db2 puts a ref to pdq.jar in the manifest, and tomcat then tries to find it, but it doesn&#39;t exist.\r\n\t\t\t\t\t// The jar isn&#39;t needed, so we just disable looking for it. You could also remove it from the manifest,\r\n\t\t\t\t\t// but that prob needs to be done after the build process.\r\n\t\t\t\t\tJarScanFilter jarScanFilter = context.getJarScanner().getJarScanFilter();\r\n\t\t\t\t\tif (jarScanFilter instanceof StandardJarScanFilter) {\r\n\t\t\t\t\t\tStandardJarScanFilter filter = (StandardJarScanFilter) jarScanFilter;\r\n\t\t\t\t\t\tString oldTldSkip = filter.getTldSkip();\r\n\t\t\t\t\t\tString newTldSkip = oldTldSkip == null || oldTldSkip.trim().isEmpty() ? &quot;pdq.jar&quot; : oldTldSkip + &quot;,pdq.jar&quot;;\r\n\t\t\t\t\t\tfilter.setTldSkip(newTldSkip);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogger.warn(&quot;Unable to disable the tomcat jar scanner for pdq.jar. You may see a FileNotFound exception complaining of not finding a db2 pdq.jar file. You can probably ignore the error. Ref: https://stackoverflow.com/questions/11656596/how-to-disable-tomcat-jarscanner&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n    }","title":"How to disable Tomcat JARScanner","body":"<p>This is what I did for Spring Boot.</p>\n<p>Basically, append a new ignored jar file to the existing list of jars to ignore. This way, you don't totally disable the scanner, affecting who knows what else.</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public ServletWebServerFactory servletContainer() {\n        return new TomcatServletWebServerFactory() {\n            @Override\n            protected void postProcessContext(Context context) {\n                // db2 puts a ref to pdq.jar in the manifest, and tomcat then tries to find it, but it doesn't exist.\n                // The jar isn't needed, so we just disable looking for it. You could also remove it from the manifest,\n                // but that prob needs to be done after the build process.\n                JarScanFilter jarScanFilter = context.getJarScanner().getJarScanFilter();\n                if (jarScanFilter instanceof StandardJarScanFilter) {\n                    StandardJarScanFilter filter = (StandardJarScanFilter) jarScanFilter;\n                    String oldTldSkip = filter.getTldSkip();\n                    String newTldSkip = oldTldSkip == null || oldTldSkip.trim().isEmpty() ? &quot;pdq.jar&quot; : oldTldSkip + &quot;,pdq.jar&quot;;\n                    filter.setTldSkip(newTldSkip);\n                } else {\n                    logger.warn(&quot;Unable to disable the tomcat jar scanner for pdq.jar. You may see a FileNotFound exception complaining of not finding a db2 pdq.jar file. You can probably ignore the error. Ref: https://stackoverflow.com/questions/11656596/how-to-disable-tomcat-jarscanner&quot;);\n                }\n            }\n        };\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21146,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":27974133,"answer_count":4,"score":9,"last_activity_date":1698047777,"creation_date":1343242312,"question_id":11656596,"body_markdown":"**How:** To disable Tomcat JARScanner?  \r\n**Why:** To stop Tomcat scan every .jar in my LIB folder. \r\n\r\n\r\nAccording to [documentation][1] it says that it is possible to disable it within context.xml. But it seems to not be working. (May be I am missing something)\r\nI made an exhaustive search in forums and could not find the solution. \r\n\r\n\r\nThis is in context.xml (not working yet):\r\n\r\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;&gt;&lt;/JarScanner&gt;\r\n\r\nThanks in advance. \r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html","title":"How to disable Tomcat JARScanner","body":"<p><strong>How:</strong> To disable Tomcat JARScanner?<br>\n<strong>Why:</strong> To stop Tomcat scan every .jar in my LIB folder. </p>\n\n<p>According to <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html\" rel=\"nofollow noreferrer\">documentation</a> it says that it is possible to disable it within context.xml. But it seems to not be working. (May be I am missing something)\nI made an exhaustive search in forums and could not find the solution. </p>\n\n<p>This is in context.xml (not working yet):</p>\n\n<pre><code>&lt;JarScanner scanClassPath=\"false\" scanAllFiles=\"false\" scanAllDirectories=\"false\"&gt;&lt;/JarScanner&gt;\n</code></pre>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","android","gradle","github-actions"],"owner":{"account_id":5505460,"reputation":449,"user_id":4373421,"display_name":"Cheolho Jeon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698047548,"creation_date":1698040482,"question_id":77342875,"body_markdown":"I&#39;m building &amp; running my android unit tests on Github actions.\r\n\r\nMy gradle build logs says:\r\n\r\n~~~none\r\n&gt; Task :app:hiltJavaCompileDebug\r\nThe Daemon will expire after the build after running out of JVM Metaspace.\r\nThe project memory settings are likely not configured or are configured to an insufficient value.\r\nThe daemon will restart for the next build, which may increase subsequent build times.\r\nThese settings can be adjusted by setting &#39;org.gradle.jvmargs&#39; in &#39;gradle.properties&#39;.\r\nThe currently configured max heap space is &#39;4 GiB&#39; and the configured max metaspace is &#39;256 MiB&#39;.\r\nFor more information on how to set these values, visit the user guide at https://docs.gradle.org/8.0/userguide/build_environment.html#configuring_jvm_memory\r\nTo disable this warning, set &#39;org.gradle.daemon.performance.disable-logging=true&#39;.\r\nDaemon will be stopped at the end of the build after running out of JVM Metaspace\r\n~~~\r\n\r\nBut that&#39;s not true - I&#39;ve set the memory as below: (`gradle.properties`)\r\n~~~none\r\norg.gradle.jvmargs=-Xmx6g -Dfile.encoding=UTF-8 -XX:+UseParallelGC -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError\r\n~~~\r\n\r\nMy Github Actions settings are as below:\r\n``` yml\r\n      - name: Run tests\r\n        uses: gradle/gradle-build-action@v2\r\n        with:\r\n          cache-read-only: false\r\n          arguments: &quot;${{ env.command }}&quot;\r\n```\r\n(where `env.command` is very long command with test names)\r\n\r\nAnyone encountered similar problems?","title":"Github Action&#39;s Gradle complains memory settings not configured - I did","body":"<p>I'm building &amp; running my android unit tests on Github actions.</p>\n<p>My gradle build logs says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Task :app:hiltJavaCompileDebug\nThe Daemon will expire after the build after running out of JVM Metaspace.\nThe project memory settings are likely not configured or are configured to an insufficient value.\nThe daemon will restart for the next build, which may increase subsequent build times.\nThese settings can be adjusted by setting 'org.gradle.jvmargs' in 'gradle.properties'.\nThe currently configured max heap space is '4 GiB' and the configured max metaspace is '256 MiB'.\nFor more information on how to set these values, visit the user guide at https://docs.gradle.org/8.0/userguide/build_environment.html#configuring_jvm_memory\nTo disable this warning, set 'org.gradle.daemon.performance.disable-logging=true'.\nDaemon will be stopped at the end of the build after running out of JVM Metaspace\n</code></pre>\n<p>But that's not true - I've set the memory as below: (<code>gradle.properties</code>)</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.gradle.jvmargs=-Xmx6g -Dfile.encoding=UTF-8 -XX:+UseParallelGC -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError\n</code></pre>\n<p>My Github Actions settings are as below:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>      - name: Run tests\n        uses: gradle/gradle-build-action@v2\n        with:\n          cache-read-only: false\n          arguments: &quot;${{ env.command }}&quot;\n</code></pre>\n<p>(where <code>env.command</code> is very long command with test names)</p>\n<p>Anyone encountered similar problems?</p>\n"},{"tags":["java","alpine-linux","openjdk-17"],"answers":[{"comments":[{"owner":{"account_id":6307461,"reputation":365,"user_id":4900133,"display_name":"enthusiast"},"score":0,"creation_date":1645538137,"post_id":71218829,"comment_id":125893643,"body_markdown":"Thanks @Stephen C.\nI will have a word with one of the alpine developers to see if we can consider this as a production ready package. But thanks for looking into and giving some more insights around the tracking repo. Much appreciated!","body":"Thanks @Stephen C. I will have a word with one of the alpine developers to see if we can consider this as a production ready package. But thanks for looking into and giving some more insights around the tracking repo. Much appreciated!"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1645538546,"creation_date":1645522310,"answer_id":71218829,"question_id":71217570,"body_markdown":"The first page you linked *explains* why the Alpine build has been removed:\r\n\r\n&gt; &quot;*The Alpine Linux build previously available on this page was removed as of the first JDK 17 release candidate. It is not production-ready because it has not been tested thoroughly enough to be considered a GA build. Please use the early-access JDK 18 Alpine Linux build in its place.&quot;*\r\n\r\n&gt; Does this means alpine uses an early access build?\r\n\r\nI doubt it.\r\n\r\n&gt; Not GA? \r\n\r\nWell, the GA builds were deemed to be not &quot;GA quality&quot; ... due to lack of testing.\r\n\r\nBut if you compare the build name (e.g. 17.0.2_p8-r1) with the tags in the OpenJDK repo ([here][1]), it looks like the Alpine builds are tracking the 17u updates.  Indeed, it looks they are what the GA builds *would have been* ... if the team had been willing to apply the &quot;GA&quot; label to them.\r\n\r\nThis is moot if you follow the recommendation of the OpenJDK site and use the early-access JDK 18 Alpine Linux build instead.  Presumably they recommend this because they think it is *better quality* ... despite being early access!\r\n\r\n\r\n&gt; How can we confirm this?\r\n\r\nYou could contact the person responsible for creating the Alpine builds.  Or you could look at the evidence yourself.\r\n\r\n  [1]: https://github.com/openjdk/jdk17u/tags","title":"OpenJDK 17 Alpine build availability","body":"<p>The first page you linked <em>explains</em> why the Alpine build has been removed:</p>\n<blockquote>\n<p>&quot;<em>The Alpine Linux build previously available on this page was removed as of the first JDK 17 release candidate. It is not production-ready because it has not been tested thoroughly enough to be considered a GA build. Please use the early-access JDK 18 Alpine Linux build in its place.&quot;</em></p>\n</blockquote>\n<blockquote>\n<p>Does this means alpine uses an early access build?</p>\n</blockquote>\n<p>I doubt it.</p>\n<blockquote>\n<p>Not GA?</p>\n</blockquote>\n<p>Well, the GA builds were deemed to be not &quot;GA quality&quot; ... due to lack of testing.</p>\n<p>But if you compare the build name (e.g. 17.0.2_p8-r1) with the tags in the OpenJDK repo (<a href=\"https://github.com/openjdk/jdk17u/tags\" rel=\"nofollow noreferrer\">here</a>), it looks like the Alpine builds are tracking the 17u updates.  Indeed, it looks they are what the GA builds <em>would have been</em> ... if the team had been willing to apply the &quot;GA&quot; label to them.</p>\n<p>This is moot if you follow the recommendation of the OpenJDK site and use the early-access JDK 18 Alpine Linux build instead.  Presumably they recommend this because they think it is <em>better quality</em> ... despite being early access!</p>\n<blockquote>\n<p>How can we confirm this?</p>\n</blockquote>\n<p>You could contact the person responsible for creating the Alpine builds.  Or you could look at the evidence yourself.</p>\n"},{"tags":[],"owner":{"account_id":26233832,"reputation":21,"user_id":19909316,"display_name":"RonyRyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698047202,"creation_date":1698047202,"answer_id":77343455,"question_id":71217570,"body_markdown":"Search JDK\r\n==========\r\nYou just need to search either openjdk or specific openjdk17\r\n\r\n```bash\r\napk search openjdk\r\n```\r\n&gt; **Or**\r\n\r\n```bash\r\napk search openjdk17\r\n```\r\n\r\n&gt; **Then just install after checking your favorite on the list, which on our case is openjdk17.**\r\n\r\n```bash\r\napk add openjdk17\r\n```\r\n\r\n### Hope it helps! ###\r\n\r\n&lt;hr/&gt; \r\n\r\n# Configure to work on terminal #\r\n\r\n&gt; Ensure nano is installed through `apk add nano` then open bash source file but for this case we will use zsh.\r\n\r\n```bash\r\nnano  ~/.zshrc\r\n```\r\n&gt; Paste the following on the end of file.\r\n\r\n```bash\r\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\r\nexport PATH=$PATH:$JAVA_HOME/bin\r\n\r\nexport LD_LIBRARY_PATH=$JAVA_HOME/lib/server\r\n```\r\n\r\n&gt; Restart zsh to save the changes. Thats all, next run java files on Alpine wsl.\r\n\r\n```bash\r\nsource ~/.bashrc\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"OpenJDK 17 Alpine build availability","body":"<h1>Search JDK</h1>\n<p>You just need to search either openjdk or specific openjdk17</p>\n<pre class=\"lang-bash prettyprint-override\"><code>apk search openjdk\n</code></pre>\n<blockquote>\n<p><strong>Or</strong></p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>apk search openjdk17\n</code></pre>\n<blockquote>\n<p><strong>Then just install after checking your favorite on the list, which on our case is openjdk17.</strong></p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>apk add openjdk17\n</code></pre>\n<h3>Hope it helps!</h3>\n<hr/> \n<h1>Configure to work on terminal</h1>\n<blockquote>\n<p>Ensure nano is installed through <code>apk add nano</code> then open bash source file but for this case we will use zsh.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>nano  ~/.zshrc\n</code></pre>\n<blockquote>\n<p>Paste the following on the end of file.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>export JAVA_HOME=/usr/lib/jvm/java-17-openjdk\nexport PATH=$PATH:$JAVA_HOME/bin\n\nexport LD_LIBRARY_PATH=$JAVA_HOME/lib/server\n</code></pre>\n<blockquote>\n<p>Restart zsh to save the changes. Thats all, next run java files on Alpine wsl.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>source ~/.bashrc\n</code></pre>\n"}],"owner":{"account_id":6307461,"reputation":365,"user_id":4900133,"display_name":"enthusiast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9236,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71218829,"answer_count":2,"score":3,"last_activity_date":1698047202,"creation_date":1645515908,"question_id":71217570,"body_markdown":"It looks like &lt;https://jdk.java.net/17/&gt; says alpine build is not available, but the alpine repo has a package. &lt;https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre&gt;\r\n\r\nAny idea why this happens? Does this means alpine uses an early access build? not GA? How can we confirm this?","title":"OpenJDK 17 Alpine build availability","body":"<p>It looks like <a href=\"https://jdk.java.net/17/\" rel=\"nofollow noreferrer\">https://jdk.java.net/17/</a> says alpine build is not available, but the alpine repo has a package. <a href=\"https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre\" rel=\"nofollow noreferrer\">https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre</a></p>\n<p>Any idea why this happens? Does this means alpine uses an early access build? not GA? How can we confirm this?</p>\n"},{"tags":["java","akamai"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663772685,"post_id":73801424,"comment_id":130318984,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1663772126,"post_id":73801670,"comment_id":130318768,"body_markdown":"&quot;recaptcha&quot;: and &quot;sitekey&quot;: say it!","body":"&quot;recaptcha&quot;: and &quot;sitekey&quot;: say it!"},{"owner":{"account_id":22039344,"reputation":1704,"user_id":16305340,"display_name":"abdo Salm"},"score":0,"creation_date":1664218420,"post_id":73801670,"comment_id":130416539,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/73801670/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26402489,"reputation":31,"user_id":20052755,"display_name":"TOMMASO26175"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666019374,"creation_date":1663767172,"answer_id":73801670,"question_id":73801424,"body_markdown":"This means that Akamai (the provider that zalando uses for bot protection), has detected and stopped your request because it detected you as a bot. To avoid this &quot;stop&quot; you **MUST** send a `valid _abck cookie, generated by passing sensor data to the zalando akamai endpoint`( you can find using chrome devtools and analyzing the requests )","title":"Akamai Bypass (Java)","body":"<p>This means that Akamai (the provider that zalando uses for bot protection), has detected and stopped your request because it detected you as a bot. To avoid this &quot;stop&quot; you <strong>MUST</strong> send a <code>valid _abck cookie, generated by passing sensor data to the zalando akamai endpoint</code>( you can find using chrome devtools and analyzing the requests )</p>\n"}],"owner":{"account_id":19477475,"reputation":11,"user_id":14248605,"display_name":"Bryan Jeetun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":829,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698046652,"creation_date":1663766211,"question_id":73801424,"body_markdown":"I am writing a bot to auto purchase items on a website (zalando).\r\nEverything goes well from login to adding items to shopping cart but at the very end it doesn&#39;t work anyomore. It sends this error: \r\n```{  &quot;edge_error&quot;: &quot;halt&quot;,  &quot;ref_id&quot;: &quot;18.57c51102.1663765843.299fc0e&quot;,  &quot;wait&quot;: 60,  &quot;feedback&quot;: {    &quot;email&quot;: true,    &quot;url&quot;: &quot;&quot;,    &quot;recaptcha&quot;: {      &quot;enabled&quot;: false,      &quot;type&quot;: 0,      &quot;sitekey&quot;: &quot;&quot;    }  }}```\r\n\r\nI think it has something to do with their protection or just me missing a header or cookie or a delay... I honestly have no clue anymore\r\nThis is the code I use in the end (to checkout and generate a paypal link (post response)):\r\n\r\n\r\n    public void makePostJsonRequest(WebDriver driver, String eTag, String checkoutID)\r\n    {\r\n        retrieveCookiesMap(driver);\r\n        HttpClient httpClient = new DefaultHttpClient();\r\n        try {\r\n            HttpPost postRequest = new HttpPost(&quot;https://www.zalando.be/api/checkout/buy-now&quot;);\r\n            postRequest.setHeader(&quot;authority&quot;, &quot;www.zalando.be&quot;);\r\n            postRequest.setHeader(&quot;accept&quot;, &quot;application/json&quot;);\r\n            postRequest.setHeader(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\r\n            postRequest.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);\r\n            postRequest.setHeader(&quot;cookie&quot;, &quot;language-preference=nl;&quot; +\r\n                    &quot; Zalando-Client-Id=&quot; + cookiesMap.get(&quot;Zalando-Client-Id&quot;) + &quot;;&quot; +\r\n                    &quot; ncx=f;&quot; +\r\n                    &quot; _gcl_au=&quot; + cookiesMap.get(&quot;_gcl_au&quot;) + &quot;;&quot; +\r\n                    &quot; sqt_cap=&quot; + cookiesMap.get(&quot;sqt_cap&quot;) + &quot;;&quot; +\r\n                    &quot; _ga=&quot; + cookiesMap.get(&quot;_ga&quot;) + &quot;;&quot; +\r\n                    &quot; _gid=&quot; + cookiesMap.get(&quot;_gid&quot;) + &quot;;&quot; +\r\n                    &quot; bm_sz=&quot; + cookiesMap.get(&quot;bm_sz&quot;) + &quot;;&quot; +\r\n                    &quot; ak_bms=&quot; + cookiesMap.get(&quot;ak_bms&quot;) + &quot;;&quot; +\r\n                    &quot; _gat_zalga=1;&quot; +\r\n                    &quot; mpulseinject=false;&quot; +\r\n                    &quot; frsx=&quot; + cookiesMap.get(&quot;frsx&quot;) + &quot;;&quot; +\r\n                    &quot; zsa=&quot; + cookiesMap.get(&quot;zsa&quot;) + &quot;;&quot; +\r\n                    &quot; zsr=&quot; + cookiesMap.get(&quot;zsr&quot;) + &quot;;&quot; +\r\n                    &quot; zsi=&quot; + cookiesMap.get(&quot;zsi&quot;) + &quot;;&quot; +\r\n                    &quot; bm_sv=&quot; + cookiesMap.get(&quot;bm_sv&quot;) + &quot;;&quot; +\r\n                    &quot; _abck=&quot; + cookiesMap.get(&quot;_abck&quot;) + &quot;;&quot;);\r\n            postRequest.setHeader(&quot;origin&quot;, &quot;https://www.zalando.be&quot;);\r\n            postRequest.setHeader(&quot;referer&quot;, &quot;https://www.zalando.be/checkout/confirm&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua&quot;, &quot;\\&quot;Chromium\\&quot;;v=\\&quot;104\\&quot;, \\&quot; Not A;Brand\\&quot;;v=\\&quot;99\\&quot;, \\&quot;Google Chrome\\&quot;;v=\\&quot;104\\&quot;&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua-mobile&quot;, &quot;?0&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua-platform&quot;, &quot;\\&quot;Linux\\&quot;&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-dest&quot;, &quot;empty&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-mode&quot;, &quot;cors&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-site&quot;, &quot;same-origin&quot;);\r\n            postRequest.setHeader(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;);\r\n            postRequest.setHeader(&quot;x-xsrf-token&quot;, cookiesMap.get(&quot;frsx&quot;));\r\n            postRequest.setHeader(&quot;x-zalando-checkout-app&quot;, &quot;web&quot;);\r\n            postRequest.setHeader(&quot;x-zalando-footer-mode&quot;, &quot;desktop&quot;);\r\n            postRequest.setHeader(&quot;x-zalando-header-mode&quot;, &quot;desktop&quot;);\r\n            eTag = StringUtils.chop(eTag);\r\n            eTag += &quot;\\\\&quot;;\r\n\r\n            String jsonString = &quot;{\\&quot;checkoutId\\&quot;:\\&quot;&quot; + checkoutID + &quot;\\&quot;,&quot; +\r\n                    &quot;\\&quot;eTag\\&quot;:&quot; + &quot;\\&quot;\\\\&quot; + eTag + &quot;\\&quot;&quot; + &quot;\\&quot;&quot; + &quot;}&quot;;\r\n\r\n            System.out.println(jsonString);\r\n\r\n            StringEntity entity = new StringEntity(jsonString);\r\n\r\n            postRequest.setEntity(entity);\r\n\r\n            long startTime = System.currentTimeMillis();\r\n            HttpResponse response = httpClient.execute(postRequest);\r\n            long elapsedTime = System.currentTimeMillis() - startTime;\r\n            System.out.println(&quot;Time taken : &quot;+elapsedTime+&quot;ms&quot;);\r\n\r\n            InputStream is = response.getEntity().getContent();\r\n            Reader reader = new InputStreamReader(is);\r\n            BufferedReader bufferedReader = new BufferedReader(reader);\r\n            StringBuilder builder = new StringBuilder();\r\n            while (true) {\r\n                try {\r\n                    String line = bufferedReader.readLine();\r\n                    if (line != null) {\r\n                        builder.append(line);\r\n                    } else {\r\n                        break;\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            System.out.println(builder.toString());\r\n            System.out.println(&quot;****************&quot;);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n","title":"Akamai Bypass (Java)","body":"<p>I am writing a bot to auto purchase items on a website (zalando).\nEverything goes well from login to adding items to shopping cart but at the very end it doesn't work anyomore. It sends this error:\n<code>{  &quot;edge_error&quot;: &quot;halt&quot;,  &quot;ref_id&quot;: &quot;18.57c51102.1663765843.299fc0e&quot;,  &quot;wait&quot;: 60,  &quot;feedback&quot;: {    &quot;email&quot;: true,    &quot;url&quot;: &quot;&quot;,    &quot;recaptcha&quot;: {      &quot;enabled&quot;: false,      &quot;type&quot;: 0,      &quot;sitekey&quot;: &quot;&quot;    }  }}</code></p>\n<p>I think it has something to do with their protection or just me missing a header or cookie or a delay... I honestly have no clue anymore\nThis is the code I use in the end (to checkout and generate a paypal link (post response)):</p>\n<pre><code>public void makePostJsonRequest(WebDriver driver, String eTag, String checkoutID)\n{\n    retrieveCookiesMap(driver);\n    HttpClient httpClient = new DefaultHttpClient();\n    try {\n        HttpPost postRequest = new HttpPost(&quot;https://www.zalando.be/api/checkout/buy-now&quot;);\n        postRequest.setHeader(&quot;authority&quot;, &quot;www.zalando.be&quot;);\n        postRequest.setHeader(&quot;accept&quot;, &quot;application/json&quot;);\n        postRequest.setHeader(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\n        postRequest.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);\n        postRequest.setHeader(&quot;cookie&quot;, &quot;language-preference=nl;&quot; +\n                &quot; Zalando-Client-Id=&quot; + cookiesMap.get(&quot;Zalando-Client-Id&quot;) + &quot;;&quot; +\n                &quot; ncx=f;&quot; +\n                &quot; _gcl_au=&quot; + cookiesMap.get(&quot;_gcl_au&quot;) + &quot;;&quot; +\n                &quot; sqt_cap=&quot; + cookiesMap.get(&quot;sqt_cap&quot;) + &quot;;&quot; +\n                &quot; _ga=&quot; + cookiesMap.get(&quot;_ga&quot;) + &quot;;&quot; +\n                &quot; _gid=&quot; + cookiesMap.get(&quot;_gid&quot;) + &quot;;&quot; +\n                &quot; bm_sz=&quot; + cookiesMap.get(&quot;bm_sz&quot;) + &quot;;&quot; +\n                &quot; ak_bms=&quot; + cookiesMap.get(&quot;ak_bms&quot;) + &quot;;&quot; +\n                &quot; _gat_zalga=1;&quot; +\n                &quot; mpulseinject=false;&quot; +\n                &quot; frsx=&quot; + cookiesMap.get(&quot;frsx&quot;) + &quot;;&quot; +\n                &quot; zsa=&quot; + cookiesMap.get(&quot;zsa&quot;) + &quot;;&quot; +\n                &quot; zsr=&quot; + cookiesMap.get(&quot;zsr&quot;) + &quot;;&quot; +\n                &quot; zsi=&quot; + cookiesMap.get(&quot;zsi&quot;) + &quot;;&quot; +\n                &quot; bm_sv=&quot; + cookiesMap.get(&quot;bm_sv&quot;) + &quot;;&quot; +\n                &quot; _abck=&quot; + cookiesMap.get(&quot;_abck&quot;) + &quot;;&quot;);\n        postRequest.setHeader(&quot;origin&quot;, &quot;https://www.zalando.be&quot;);\n        postRequest.setHeader(&quot;referer&quot;, &quot;https://www.zalando.be/checkout/confirm&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua&quot;, &quot;\\&quot;Chromium\\&quot;;v=\\&quot;104\\&quot;, \\&quot; Not A;Brand\\&quot;;v=\\&quot;99\\&quot;, \\&quot;Google Chrome\\&quot;;v=\\&quot;104\\&quot;&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua-mobile&quot;, &quot;?0&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua-platform&quot;, &quot;\\&quot;Linux\\&quot;&quot;);\n        postRequest.setHeader(&quot;sec-fetch-dest&quot;, &quot;empty&quot;);\n        postRequest.setHeader(&quot;sec-fetch-mode&quot;, &quot;cors&quot;);\n        postRequest.setHeader(&quot;sec-fetch-site&quot;, &quot;same-origin&quot;);\n        postRequest.setHeader(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;);\n        postRequest.setHeader(&quot;x-xsrf-token&quot;, cookiesMap.get(&quot;frsx&quot;));\n        postRequest.setHeader(&quot;x-zalando-checkout-app&quot;, &quot;web&quot;);\n        postRequest.setHeader(&quot;x-zalando-footer-mode&quot;, &quot;desktop&quot;);\n        postRequest.setHeader(&quot;x-zalando-header-mode&quot;, &quot;desktop&quot;);\n        eTag = StringUtils.chop(eTag);\n        eTag += &quot;\\\\&quot;;\n\n        String jsonString = &quot;{\\&quot;checkoutId\\&quot;:\\&quot;&quot; + checkoutID + &quot;\\&quot;,&quot; +\n                &quot;\\&quot;eTag\\&quot;:&quot; + &quot;\\&quot;\\\\&quot; + eTag + &quot;\\&quot;&quot; + &quot;\\&quot;&quot; + &quot;}&quot;;\n\n        System.out.println(jsonString);\n\n        StringEntity entity = new StringEntity(jsonString);\n\n        postRequest.setEntity(entity);\n\n        long startTime = System.currentTimeMillis();\n        HttpResponse response = httpClient.execute(postRequest);\n        long elapsedTime = System.currentTimeMillis() - startTime;\n        System.out.println(&quot;Time taken : &quot;+elapsedTime+&quot;ms&quot;);\n\n        InputStream is = response.getEntity().getContent();\n        Reader reader = new InputStreamReader(is);\n        BufferedReader bufferedReader = new BufferedReader(reader);\n        StringBuilder builder = new StringBuilder();\n        while (true) {\n            try {\n                String line = bufferedReader.readLine();\n                if (line != null) {\n                    builder.append(line);\n                } else {\n                    break;\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(builder.toString());\n        System.out.println(&quot;****************&quot;);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":25785912,"reputation":52,"user_id":19530736,"display_name":"CuriousCat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698045764,"creation_date":1698045764,"answer_id":77343321,"question_id":77096172,"body_markdown":"Apparently, when the tables were restored (possibly recreated), the id was not created to auto-increment and even as a primary key. So, I modified the columns and that fixed the issue.","title":"How to fix the database returned no natively generated identity value","body":"<p>Apparently, when the tables were restored (possibly recreated), the id was not created to auto-increment and even as a primary key. So, I modified the columns and that fixed the issue.</p>\n"}],"owner":{"account_id":25785912,"reputation":52,"user_id":19530736,"display_name":"CuriousCat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343321,"answer_count":1,"score":0,"last_activity_date":1698046063,"creation_date":1694600350,"question_id":77096172,"body_markdown":"I keep getting the error above whenever I am trying to save. I am using MySQL and Springboot with Hibernate. An incident occurred — production tables were restored. After this whenever there is action that calls .save() the error is thrown. It was worthy to note that the DBA administrator revoked DDL right from the user as a short-term strategy.\r\n\r\nThe tables have auto-increment in them and this is a sample of one of the models.\r\n\r\n\r\n    public class Pojo implements Serializable {\r\n        \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @JsonIgnore\r\n        private Long id;\r\n\r\nI would not know what else could be causing the error. I have read through other similar problems, none is able to solve the problem at hand.\r\n","title":"How to fix the database returned no natively generated identity value","body":"<p>I keep getting the error above whenever I am trying to save. I am using MySQL and Springboot with Hibernate. An incident occurred — production tables were restored. After this whenever there is action that calls .save() the error is thrown. It was worthy to note that the DBA administrator revoked DDL right from the user as a short-term strategy.</p>\n<p>The tables have auto-increment in them and this is a sample of one of the models.</p>\n<pre><code>public class Pojo implements Serializable {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonIgnore\n    private Long id;\n</code></pre>\n<p>I would not know what else could be causing the error. I have read through other similar problems, none is able to solve the problem at hand.</p>\n"},{"tags":["java","intellij-idea","keyboard-shortcuts","code-snippets","live-templates"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1349081591,"post_id":12669948,"comment_id":17097022,"body_markdown":"I use `iter` + `&lt;tab&gt;` and select `map.entrySet()` Do you need to create a new template to do this? If so you can look at how this one is implemented already.","body":"I use <code>iter</code> + <code>&lt;tab&gt;</code> and select <code>map.entrySet()</code> Do you need to create a new template to do this? If so you can look at how this one is implemented already."}],"answers":[{"tags":[],"owner":{"account_id":1427644,"reputation":47321,"user_id":1350762,"display_name":"maba"},"comment_count":0,"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1349081574,"creation_date":1349081574,"answer_id":12670127,"question_id":12669948,"body_markdown":"It is easier if you just type `iter` and then &lt;kbd&gt;Tab&lt;/kbd&gt;.\r\n\r\nYou will get a drop-down and there you can choose `map.entrySet()` and it will give you:\r\n\r\n    for (Map.Entry&lt;String, Object&gt; stringObjectEntry : map.entrySet()) {\r\n           \r\n    }\r\n","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>It is easier if you just type <code>iter</code> and then <kbd>Tab</kbd>.</p>\n\n<p>You will get a drop-down and there you can choose <code>map.entrySet()</code> and it will give you:</p>\n\n<pre><code>for (Map.Entry&lt;String, Object&gt; stringObjectEntry : map.entrySet()) {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":527903,"reputation":2938,"user_id":1605852,"display_name":"Sivabalan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1496843378,"creation_date":1438161241,"answer_id":31696121,"question_id":12669948,"body_markdown":"To view a list of live template available: `Ctrl + J` and then &lt;kbd&gt;Tab&lt;/kbd&gt;.\r\n\r\nFrom there you will have list of live template, **iter** (for each loop) will be on the list.","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>To view a list of live template available: <code>Ctrl + J</code> and then <kbd>Tab</kbd>.</p>\n\n<p>From there you will have list of live template, <strong>iter</strong> (for each loop) will be on the list.</p>\n"},{"tags":[],"owner":{"account_id":17181260,"reputation":1,"user_id":12436650,"display_name":"Madcode"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579524398,"creation_date":1579524398,"answer_id":59823611,"question_id":12669948,"body_markdown":"I wrote this, it works in 1 step. I also like having the `key` and `value` in there already, but those can be omitted:\r\n\r\n    for (Map.Entry&lt;$KEY_TYPE$, $VALUE_TYPE$&gt; $PAIR$ : $ITERABLE_TYPE$.entrySet()) {\r\n        $KEY_TYPE$ key = $PAIR$.getKey();\r\n        $VALUE_TYPE$ value = $PAIR$.getValue();\r\n        $END$\r\n    }\r\n\r\nVariables:\r\n\r\n- KEY_TYPE: `guessElementType(iterableVariable())`\r\n- VALUE_TYPE: `regularExpression(typeOfVariable(ITERABLE_TYPE),&quot;^.*,(.*)&gt;$&quot;, &quot;$1&quot;)`\r\n- PAIR: `suggestVariableName()`\r\n- ITERABLE_TYPE: `variableOfType(&quot;java.util.Map&quot;)`\r\n\r\nThe [large amount of variables and functions](https://www.jetbrains.com/help/idea/template-variables.html) make the Live Templates a powerful tool. In VALUE_TYPE, I am using a regular expression to get the `ValueType` out of `Map&lt;KeyType, ValueType&gt;`. I tried a lot of &quot;cleaner&quot; approaches, but none worked.\r\n\r\n","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>I wrote this, it works in 1 step. I also like having the <code>key</code> and <code>value</code> in there already, but those can be omitted:</p>\n\n<pre><code>for (Map.Entry&lt;$KEY_TYPE$, $VALUE_TYPE$&gt; $PAIR$ : $ITERABLE_TYPE$.entrySet()) {\n    $KEY_TYPE$ key = $PAIR$.getKey();\n    $VALUE_TYPE$ value = $PAIR$.getValue();\n    $END$\n}\n</code></pre>\n\n<p>Variables:</p>\n\n<ul>\n<li>KEY_TYPE: <code>guessElementType(iterableVariable())</code></li>\n<li>VALUE_TYPE: <code>regularExpression(typeOfVariable(ITERABLE_TYPE),\"^.*,(.*)&gt;$\", \"$1\")</code></li>\n<li>PAIR: <code>suggestVariableName()</code></li>\n<li>ITERABLE_TYPE: <code>variableOfType(\"java.util.Map\")</code></li>\n</ul>\n\n<p>The <a href=\"https://www.jetbrains.com/help/idea/template-variables.html\" rel=\"nofollow noreferrer\">large amount of variables and functions</a> make the Live Templates a powerful tool. In VALUE_TYPE, I am using a regular expression to get the <code>ValueType</code> out of <code>Map&lt;KeyType, ValueType&gt;</code>. I tried a lot of \"cleaner\" approaches, but none worked.</p>\n"},{"tags":[],"owner":{"account_id":1329158,"reputation":139,"user_id":1273403,"display_name":"sagaofsilence"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698045297,"creation_date":1698045297,"answer_id":77343273,"question_id":12669948,"body_markdown":"It is easier if you just type `itm` and then `Tab`.\r\n\r\n     for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\r\n         String key = entry.getKey();\r\n         List&lt;String&gt; value = entry.getValue();   \r\n     }","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>It is easier if you just type <code>itm</code> and then <code>Tab</code>.</p>\n<pre><code> for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\n     String key = entry.getKey();\n     List&lt;String&gt; value = entry.getValue();   \n }\n</code></pre>\n"}],"owner":{"account_id":182362,"reputation":15840,"user_id":416996,"accept_rate":85,"display_name":"Jama A."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6858,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":12670127,"answer_count":4,"score":19,"last_activity_date":1698045297,"creation_date":1349080798,"question_id":12669948,"body_markdown":"We can iterate through collection easily by pressing &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;T&lt;/kbd&gt;, ![][1]\r\n\r\nAnd then I wanted to create such template for iterating through map:\r\nI wrote these lines to *template text* box:\r\n\r\n    for (Map.Entry&lt;$ELEMENT_TYPE$&gt; $VAR$ : $SELECTION$.entrySet()) {\r\n      $END$\r\n    }\r\n     \r\nNow it is generating these codes:\r\n \r\n   \r\n\r\n     HashMap&lt;String,Object&gt; map=new HashMap&lt;String,Object&gt;();\r\n        for (Map.Entry&lt;Object&gt; objectEntry : map.entrySet()) {\r\n                        \r\n        }\r\n \r\n\r\n   \r\n `Map.Entry&lt;Object&gt;` should be `Map.Entry&lt;String,Object&gt;`. I cannot find a way to introduce variable correctly. How can I do that?\r\n\r\n  [1]: http://i.stack.imgur.com/EjE8Q.png","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>We can iterate through collection easily by pressing <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>, <img src=\"https://i.stack.imgur.com/EjE8Q.png\" alt=\"\"></p>\n\n<p>And then I wanted to create such template for iterating through map:\nI wrote these lines to <em>template text</em> box:</p>\n\n<pre><code>for (Map.Entry&lt;$ELEMENT_TYPE$&gt; $VAR$ : $SELECTION$.entrySet()) {\n  $END$\n}\n</code></pre>\n\n<p>Now it is generating these codes:</p>\n\n<pre><code> HashMap&lt;String,Object&gt; map=new HashMap&lt;String,Object&gt;();\n    for (Map.Entry&lt;Object&gt; objectEntry : map.entrySet()) {\n\n    }\n</code></pre>\n\n<p><code>Map.Entry&lt;Object&gt;</code> should be <code>Map.Entry&lt;String,Object&gt;</code>. I cannot find a way to introduce variable correctly. How can I do that?</p>\n"},{"tags":["java","android","datetime-format"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697807046,"post_id":77330981,"comment_id":136329596,"body_markdown":"So your problem is that `ε` is displayed (instead of `έ`) ?","body":"So your problem is that <code>ε</code> is displayed (instead of <code>έ</code>) ?"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697807206,"post_id":77330981,"comment_id":136329626,"body_markdown":"@Abra No, read again please carefully because I describe my problem. It&#39;s about the meaning of the words, I want November but I get November&#39;s.","body":"@Abra No, read again please carefully because I describe my problem. It&#39;s about the meaning of the words, I want November but I get November&#39;s."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1697808758,"post_id":77330981,"comment_id":136329930,"body_markdown":"have you tried `&quot;LLLL yyyy&quot;` ? From the [documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html): &quot;Pattern letters &#39;L&#39;, &#39;c&#39;, and &#39;q&#39; specify the stand-alone form of the text styles.&quot; (and I would even prefer `&quot;LLLL uuuu&quot;` {for the year, see documentation} )","body":"have you tried <code>&quot;LLLL yyyy&quot;</code> ? From the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">documentation</a>: &quot;Pattern letters &#39;L&#39;, &#39;c&#39;, and &#39;q&#39; specify the stand-alone form of the text styles.&quot; (and I would even prefer <code>&quot;LLLL uuuu&quot;</code> {for the year, see documentation} )"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697810104,"post_id":77330981,"comment_id":136330204,"body_markdown":"@user85421 unfortunately for me no, I get this result https://ibb.co/Ykb7nYb","body":"@user85421 unfortunately for me no, I get this result <a href=\"https://ibb.co/Ykb7nYb\" rel=\"nofollow noreferrer\">ibb.co/Ykb7nYb</a>"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1698044086,"post_id":77330981,"comment_id":136350310,"body_markdown":"@user85421 I don&#39;t know your code seems right, when i put as format &quot;LLLL yyyy&quot; I get back &quot;10 2023&quot; and when I put &quot;MMMM yyyy&quot; I get back text in the wrong way as I told in my question&#39;s headline.","body":"@user85421 I don&#39;t know your code seems right, when i put as format &quot;LLLL yyyy&quot; I get back &quot;10 2023&quot; and when I put &quot;MMMM yyyy&quot; I get back text in the wrong way as I told in my question&#39;s headline."}],"answers":[{"comments":[{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697810078,"post_id":77331403,"comment_id":136330199,"body_markdown":"I forgot to mentioned this format, I get this result with &quot;LLLL yyyy&quot; https://ibb.co/Ykb7nYb","body":"I forgot to mentioned this format, I get this result with &quot;LLLL yyyy&quot; <a href=\"https://ibb.co/Ykb7nYb\" rel=\"nofollow noreferrer\">ibb.co/Ykb7nYb</a>"},{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1697810273,"post_id":77331403,"comment_id":136330240,"body_markdown":"It prints for me : Νοέμβριος 2023 with this input : LocalDate.of(2023, 11,1))\nsomewhere you are getting month int value","body":"It prints for me : Νοέμβριος 2023 with this input : LocalDate.of(2023, 11,1)) somewhere you are getting month int value"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697810395,"post_id":77331403,"comment_id":136330264,"body_markdown":"the date variable that is parametrized in method coming through LocalDate.now(), and then for next and previous month date.plusMonths(1); and minusMonths(1); . Is it maybe a reason that I get wrong result?","body":"the date variable that is parametrized in method coming through LocalDate.now(), and then for next and previous month date.plusMonths(1); and minusMonths(1); . Is it maybe a reason that I get wrong result?"},{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1697810464,"post_id":77331403,"comment_id":136330281,"body_markdown":"I think plus/minus operation is causing problem","body":"I think plus/minus operation is causing problem"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697810500,"post_id":77331403,"comment_id":136330290,"body_markdown":"and LocalDate.now() also maybe ?","body":"and LocalDate.now() also maybe ?"},{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1697810529,"post_id":77331403,"comment_id":136330300,"body_markdown":"No it works properly","body":"No it works properly"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1698050041,"post_id":77331403,"comment_id":136351219,"body_markdown":"It indeed [works properly](https://ideone.com/nfRuMP).","body":"It indeed <a href=\"https://ideone.com/nfRuMP\" rel=\"nofollow noreferrer\">works properly</a>."},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1698051698,"post_id":77331403,"comment_id":136351510,"body_markdown":"Also my problem is in Android Programming. Android has grandle declaration and Java properties to be modyfied. You provide me just Java code without taking into account these rules. Show me the same code in an android studio project to be accurate.","body":"Also my problem is in Android Programming. Android has grandle declaration and Java properties to be modyfied. You provide me just Java code without taking into account these rules. Show me the same code in an android studio project to be accurate."}],"tags":[],"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697809278,"creation_date":1697809278,"answer_id":77331403,"question_id":77330981,"body_markdown":"this code will work for you :\r\n\r\n    public static String monthYearFromDate(LocalDate date)\r\n    {\r\n        Locale greekLocale = new Locale(&quot;el&quot;,&quot;GR&quot;);\r\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n                .appendPattern(&quot;LLLL yyyy&quot;)\r\n                .toFormatter(greekLocale);\r\n        return formatter.format(date);\r\n    }\r\n\r\nIf you got confused I would suggest you to read JDK docs","title":"datetimeformatter doesnt return the expected output of month value in greek locale","body":"<p>this code will work for you :</p>\n<pre><code>public static String monthYearFromDate(LocalDate date)\n{\n    Locale greekLocale = new Locale(&quot;el&quot;,&quot;GR&quot;);\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n            .appendPattern(&quot;LLLL yyyy&quot;)\n            .toFormatter(greekLocale);\n    return formatter.format(date);\n}\n</code></pre>\n<p>If you got confused I would suggest you to read JDK docs</p>\n"}],"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698045007,"creation_date":1697805467,"question_id":77330981,"body_markdown":"I am building a calendar so for every month i show i want in the top to show the month following by the year like: &quot;November 2023&quot;, the application is in greek so in greek the same result I expect is: &quot;Νοέμβριος 2023&quot;. I made a method and the output i get is &quot;Νοεμβρίου 2023&quot;, this output in english is like November&#39;s 2023, in free translation. I know that maybe a solution is via an MapList that based the wrong value I give the true I want. I want to know if there is another way faster, because i cant find any built in way. \r\n\r\n\r\nI think for greek programmers maybe is easier to help me, but appreciate any help by every programmer that had similar problem in his native language.\r\n \r\n\r\n       public static String monthYearFromDate(LocalDate date) \r\n        {\r\n            Locale greekLocale = new Locale(&quot;el&quot;);\r\n            DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n                    .appendPattern(&quot;MMMM yyyy&quot;)\r\n                    .toFormatter(greekLocale);\r\n    \r\n            return date.format(formatter);\r\n        }\r\n\r\n[![This is the wrong format.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X8Ewh.jpg","title":"datetimeformatter doesnt return the expected output of month value in greek locale","body":"<p>I am building a calendar so for every month i show i want in the top to show the month following by the year like: &quot;November 2023&quot;, the application is in greek so in greek the same result I expect is: &quot;Νοέμβριος 2023&quot;. I made a method and the output i get is &quot;Νοεμβρίου 2023&quot;, this output in english is like November's 2023, in free translation. I know that maybe a solution is via an MapList that based the wrong value I give the true I want. I want to know if there is another way faster, because i cant find any built in way.</p>\n<p>I think for greek programmers maybe is easier to help me, but appreciate any help by every programmer that had similar problem in his native language.</p>\n<pre><code>   public static String monthYearFromDate(LocalDate date) \n    {\n        Locale greekLocale = new Locale(&quot;el&quot;);\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n                .appendPattern(&quot;MMMM yyyy&quot;)\n                .toFormatter(greekLocale);\n\n        return date.format(formatter);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/X8Ewh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X8Ewh.jpg\" alt=\"This is the wrong format.\" /></a></p>\n"},{"tags":["java","terminal","osx-mavericks"],"comments":[{"owner":{"account_id":3579901,"reputation":4963,"user_id":2988360,"accept_rate":77,"display_name":"PKlumpp"},"score":0,"creation_date":1400058626,"post_id":23650193,"comment_id":36322724,"body_markdown":"execute java commands or os commands?","body":"execute java commands or os commands?"},{"owner":{"account_id":2447660,"reputation":3251,"user_id":2134587,"accept_rate":28,"display_name":"Gobi M"},"score":0,"creation_date":1400058717,"post_id":23650193,"comment_id":36322789,"body_markdown":"os commands like rm filename","body":"os commands like rm filename"},{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":1,"creation_date":1400058904,"post_id":23650193,"comment_id":36322938,"body_markdown":"It is absolutely the same as for Linux, you should look at this answer: http://stackoverflow.com/a/15356548/1828937","body":"It is absolutely the same as for Linux, you should look at this answer: <a href=\"http://stackoverflow.com/a/15356548/1828937\">stackoverflow.com/a/15356548/1828937</a>"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698045421,"post_id":23650193,"comment_id":136350511,"body_markdown":"Do you really need to open a terminal window or do you need to display the output and accept input from the console?","body":"Do you really need to open a terminal window or do you need to display the output and accept input from the console?"}],"answers":[{"comments":[{"owner":{"account_id":6838363,"reputation":1184,"user_id":5295219,"display_name":"SaiPawan"},"score":4,"creation_date":1479107664,"post_id":23650641,"comment_id":68402338,"body_markdown":"Runtime.getRuntime().exec(&quot;/bin/bash -c  /Applications/Utilities/Terminal.app&quot;); I am doing like this but not able to open terminal","body":"Runtime.getRuntime().exec(&quot;/bin/bash -c  /Applications/Utilities/Terminal.app&quot;); I am doing like this but not able to open terminal"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698045200,"post_id":23650641,"comment_id":136350474,"body_markdown":"Yes: this will execute the command, but it will not open a terminal window","body":"Yes: this will execute the command, but it will not open a terminal window"}],"tags":[],"owner":{"account_id":4462273,"reputation":38,"user_id":3630759,"display_name":"SongLing Dong"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1460031650,"creation_date":1400059668,"answer_id":23650641,"question_id":23650193,"body_markdown":"You need to run it using bash executable like this:\r\n\r\n    Runtime.getRuntime().exec(&quot;/bin/bash -c **YouTerminalSoftWareName**&quot;);\r\n\r\nYouTerminalSoftWareName must be absolute path or aready in your PATH environment variable","title":"How to open Terminal and execute command using java code in OSX","body":"<p>You need to run it using bash executable like this:</p>\n\n<pre><code>Runtime.getRuntime().exec(\"/bin/bash -c **YouTerminalSoftWareName**\");\n</code></pre>\n\n<p>YouTerminalSoftWareName must be absolute path or aready in your PATH environment variable</p>\n"},{"tags":[],"owner":{"account_id":9509982,"reputation":1,"user_id":7068224,"display_name":"Jitu Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549341520,"creation_date":1549340035,"answer_id":54527603,"question_id":23650193,"body_markdown":"Use Apple Script Editor to open Terminal and run your code.\r\n\r\nFor Example :\r\n\r\n    String action1 = jsonDriver.readApplicationDetails(&quot;OFF&quot;);\r\n    Runtime runtime = Runtime.getRuntime();\r\n    String applescriptCommand = &quot;tell application \\&quot;Terminal\\&quot;\\n&quot; + \r\n             &quot;activate\\n&quot; + &quot;delay 1\\n&quot; + &quot;tell application \\&quot;System Events\\&quot;\\n&quot; + \r\n             &quot;keystroke \\&quot;&quot; + action1 + &quot;\\&quot;\\n&quot; + &quot;end tell\\n&quot; + &quot;end tell&quot;; \r\n    String[] args1 = { &quot;osascript&quot;, &quot;-e&quot;, applescriptCommand };\r\n    Process process = runtime.exec(args1);\r\n    Thread.sleep(5000);\r\n\r\n","title":"How to open Terminal and execute command using java code in OSX","body":"<p>Use Apple Script Editor to open Terminal and run your code.</p>\n\n<p>For Example :</p>\n\n<pre><code>String action1 = jsonDriver.readApplicationDetails(\"OFF\");\nRuntime runtime = Runtime.getRuntime();\nString applescriptCommand = \"tell application \\\"Terminal\\\"\\n\" + \n         \"activate\\n\" + \"delay 1\\n\" + \"tell application \\\"System Events\\\"\\n\" + \n         \"keystroke \\\"\" + action1 + \"\\\"\\n\" + \"end tell\\n\" + \"end tell\"; \nString[] args1 = { \"osascript\", \"-e\", applescriptCommand };\nProcess process = runtime.exec(args1);\nThread.sleep(5000);\n</code></pre>\n"}],"owner":{"account_id":2447660,"reputation":3251,"user_id":2134587,"accept_rate":28,"display_name":"Gobi M"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10696,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698044870,"creation_date":1400058452,"question_id":23650193,"body_markdown":"How to launch terminal and execute some commands using java code in MAC?\r\n\r\nSimilar question i have found for LINUX OS from below link.\r\n\r\nhttps://stackoverflow.com/questions/15356405/how-to-run-a-command-at-terminal-from-java-program","title":"How to open Terminal and execute command using java code in OSX","body":"<p>How to launch terminal and execute some commands using java code in MAC?</p>\n\n<p>Similar question i have found for LINUX OS from below link.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15356405/how-to-run-a-command-at-terminal-from-java-program\">how to run a command at terminal from java program?</a></p>\n"},{"tags":["python","java","maven","graalvm"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697629528,"post_id":77315830,"comment_id":136303308,"body_markdown":"The word _&quot;crash&quot;_  has a specific meaning (terminating abruptly), and in this case Maven didn&#39;t _&quot;crash&quot;_, it exited with an error because a precondition of a plugin wasn&#39;t met (i.e. _&quot;You must set JAVA_HOME to a GraalVM with Python installed.&quot;_), and that plugin reported the error to Maven, and then Maven reported that error to you.","body":"The word <i>&quot;crash&quot;</i>  has a specific meaning (terminating abruptly), and in this case Maven didn&#39;t <i>&quot;crash&quot;</i>, it exited with an error because a precondition of a plugin wasn&#39;t met (i.e. <i>&quot;You must set JAVA_HOME to a GraalVM with Python installed.&quot;</i>), and that plugin reported the error to Maven, and then Maven reported that error to you."},{"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"score":0,"creation_date":1697630507,"post_id":77315830,"comment_id":136303512,"body_markdown":"It was my first time to ask question. I sometimes am not well aware of exact terminology. Thank you for correction.","body":"It was my first time to ask question. I sometimes am not well aware of exact terminology. Thank you for correction."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1697645436,"post_id":77315830,"comment_id":136306937,"body_markdown":"“ You must set JAVA_HOME to a GraalVM with Python installed.” - sounds like you can’t skip that step.","body":"“ You must set JAVA_HOME to a GraalVM with Python installed.” - sounds like you can’t skip that step."}],"answers":[{"tags":[],"owner":{"account_id":125486,"reputation":2893,"user_id":321302,"accept_rate":100,"display_name":"Steves"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698044729,"creation_date":1698044729,"answer_id":77343221,"question_id":77315830,"body_markdown":"The latest release of GraalVM (GraalVM for JDK21) changes how languages are deployed. There is no `gu` (Graal Updater) and GraalPy is not installed into the GraalVM installation, but instead it is published on Mavencentral. The `pom.xml` script in the article assumes older version of GraalVM. We will update the article. \r\n\r\nFor the time being, this is a new article about the changes:\r\n\r\nhttps://medium.com/graalvm/truffle-unchained-13887b77b62c\r\n\r\nyou&#39;d have to modify `pom.xml` from the old GraalPy article accordingly. Another alternative is to use the new GraalPy&#39;s `standalone` tool to generate a skeleton of Java app:\r\n\r\nhttps://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application","title":"How to install GraalVM with Python?","body":"<p>The latest release of GraalVM (GraalVM for JDK21) changes how languages are deployed. There is no <code>gu</code> (Graal Updater) and GraalPy is not installed into the GraalVM installation, but instead it is published on Mavencentral. The <code>pom.xml</code> script in the article assumes older version of GraalVM. We will update the article.</p>\n<p>For the time being, this is a new article about the changes:</p>\n<p><a href=\"https://medium.com/graalvm/truffle-unchained-13887b77b62c\" rel=\"nofollow noreferrer\">https://medium.com/graalvm/truffle-unchained-13887b77b62c</a></p>\n<p>you'd have to modify <code>pom.xml</code> from the old GraalPy article accordingly. Another alternative is to use the new GraalPy's <code>standalone</code> tool to generate a skeleton of Java app:</p>\n<p><a href=\"https://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application\" rel=\"nofollow noreferrer\">https://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application</a></p>\n"}],"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343221,"answer_count":1,"score":0,"last_activity_date":1698044729,"creation_date":1697627975,"question_id":77315830,"body_markdown":"I wanted to test the [GraalVM project](https://github.com/hpi-swa-lab/graalpython-java-example). I firstly installed [graalvm-jdk-21.0.1+12.1](https://www.graalvm.org/downloads/); however, in the step where I had to run the command &#39;&quot;${JAVA_HOME}&quot;/bin/gu install python&#39;, I run into trouble.  There was no /bin/gu file inside the &quot;graalvm-jdk-21.0.1+12.1&quot; directory.\r\n\r\nI then installed [graalvm-jdk-17.0.9+11.1](https://www.graalvm.org/downloads/) which contained /bin/gu file. But this time I run into another issue which was:\r\n[Python not available](https://i.stack.imgur.com/RhCbr.png)\r\n\r\nI tried to skip this step and run &quot;mvn compile&quot; and it gave the error below:\r\n`\r\n```\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.623 s\r\n[INFO] Finished at: 2023-10-18T15:08:57+04:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0-M3:enforce (enforce-graalvm-python) on project PygalExample: org.apache.maven.plugins.enforcer.RequireFilesExist failed with message:\r\n[ERROR] You must set JAVA_HOME to a GraalVM with Python installed.\r\n[ERROR] Some required files are missing:\r\n[ERROR] /home/eshqin/Downloads/graalvm-jdk-17_linux-x64_bin/graalvm-jdk-17.0.9+11.1/bin/graalpython\r\n[ERROR] \r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n````\r\n\r\nHow can I solve this issue and replicate the test? When I run &quot;mvn clean install&quot; it also fails.\r\n\r\nMy operating system is Ubuntu 20.04\r\n\r\nI would like this project to be compiled and run successfully.","title":"How to install GraalVM with Python?","body":"<p>I wanted to test the <a href=\"https://github.com/hpi-swa-lab/graalpython-java-example\" rel=\"nofollow noreferrer\">GraalVM project</a>. I firstly installed <a href=\"https://www.graalvm.org/downloads/\" rel=\"nofollow noreferrer\">graalvm-jdk-21.0.1+12.1</a>; however, in the step where I had to run the command '&quot;${JAVA_HOME}&quot;/bin/gu install python', I run into trouble.  There was no /bin/gu file inside the &quot;graalvm-jdk-21.0.1+12.1&quot; directory.</p>\n<p>I then installed <a href=\"https://www.graalvm.org/downloads/\" rel=\"nofollow noreferrer\">graalvm-jdk-17.0.9+11.1</a> which contained /bin/gu file. But this time I run into another issue which was:\n<a href=\"https://i.stack.imgur.com/RhCbr.png\" rel=\"nofollow noreferrer\">Python not available</a></p>\n<p>I tried to skip this step and run &quot;mvn compile&quot; and it gave the error below:\n`</p>\n<pre><code>[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.623 s\n[INFO] Finished at: 2023-10-18T15:08:57+04:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0-M3:enforce (enforce-graalvm-python) on project PygalExample: org.apache.maven.plugins.enforcer.RequireFilesExist failed with message:\n[ERROR] You must set JAVA_HOME to a GraalVM with Python installed.\n[ERROR] Some required files are missing:\n[ERROR] /home/eshqin/Downloads/graalvm-jdk-17_linux-x64_bin/graalvm-jdk-17.0.9+11.1/bin/graalpython\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n\n</code></pre>\n<p>How can I solve this issue and replicate the test? When I run &quot;mvn clean install&quot; it also fails.</p>\n<p>My operating system is Ubuntu 20.04</p>\n<p>I would like this project to be compiled and run successfully.</p>\n"},{"tags":["java","visual-studio-code","syntax-highlighting"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697986917,"post_id":77340403,"comment_id":136345381,"body_markdown":"This seems like a bug. You should report it to the Visual Code project.","body":"This seems like a bug. You should report it to the Visual Code project."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1697987489,"post_id":77340403,"comment_id":136345437,"body_markdown":"One line method `IntStream.of(7, 1, 2, 3, 4, 5, 6).mapToObj(val -&gt; DayOfWeek.of(val).getDisplayName(TextStyle.FULL, Locale.ENGLISH) + &quot;s Temperature:&quot;).forEachOrdered(sb -&gt; System.out.printf(&quot;%-23s %d%n&quot;, sb, ThreadLocalRandom.current().nextInt(100)));`","body":"One line method <code>IntStream.of(7, 1, 2, 3, 4, 5, 6).mapToObj(val -&gt; DayOfWeek.of(val).getDisplayName(TextStyle.FULL, Locale.ENGLISH) + &quot;s Temperature:&quot;).forEachOrdered(sb -&gt; System.out.printf(&quot;%-23s %d%n&quot;, sb, ThreadLocalRandom.current().nextInt(100)));</code>"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1697987772,"post_id":77340403,"comment_id":136345467,"body_markdown":"first report it at the Java extension Repo, what do the TextMate Scopes tell you of the different colored pieces","body":"first report it at the Java extension Repo, what do the TextMate Scopes tell you of the different colored pieces"},{"owner":{"account_id":29728572,"reputation":1,"user_id":22783845,"display_name":"MossBorb"},"score":0,"creation_date":1697988024,"post_id":77340403,"comment_id":136345494,"body_markdown":"I have fixed the issue by renaming the Main.java file to WeatherApp.java and I am unsure why the issue existed when the file was named Main.java. I had also allowed something to refactor the code, but I will also report to Visual Code Project.","body":"I have fixed the issue by renaming the Main.java file to WeatherApp.java and I am unsure why the issue existed when the file was named Main.java. I had also allowed something to refactor the code, but I will also report to Visual Code Project."},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1698006390,"post_id":77340403,"comment_id":136347468,"body_markdown":"1) if you raise an issue ticket, please ping me with a link to it. 2) please edit this question post to add the code in a code block so we can copy and paste to reproduce the issue. 3) potentially related on reddit: https://www.reddit.com/r/vscode/comments/16szhue/how_can_i_fix_the_issue_with_color_coding_on_line/","body":"1) if you raise an issue ticket, please ping me with a link to it. 2) please edit this question post to add the code in a code block so we can copy and paste to reproduce the issue. 3) potentially related on reddit: <a href=\"https://www.reddit.com/r/vscode/comments/16szhue/how_can_i_fix_the_issue_with_color_coding_on_line/\" rel=\"nofollow noreferrer\">reddit.com/r/vscode/comments/16szhue/&hellip;</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698044279,"post_id":77340403,"comment_id":136350341,"body_markdown":"Can you paste your code? Please see \n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Can you paste your code? Please see   <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":29728572,"reputation":1,"user_id":22783845,"display_name":"MossBorb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698044542,"creation_date":1697985676,"question_id":77340403,"body_markdown":"Overview of incorrect syntax highlighting\r\n![](https://i.stack.imgur.com/BCqRg.jpg)\r\n\r\nLines 24, 25 show incorrect syntax highlighting which is effected by how many new empty lines I have in-between the last declared variable, and  \r\nSystem out println function.\r\n\r\nIn the image above, there is one empty space between line 22 and 24. If I have three empty lines the syntax highlighting returns to normal.\r\n\r\nShowing that syntax highlighting corrects it&#39;s self with three spaces between code lines\r\n\r\n![Showing that syntax highlighting corrects it&#39;s self with three spaces between code lines](https://i.stack.imgur.com/X7RQ0.jpg)\r\n\r\nSee below three images where syntax highlighting remains inconsistent while writing out         System out println\r\n\r\nImage of System\r\n\r\n![Image of System][1]\r\n\r\nImage of System out\r\n\r\n![Image of System out](https://i.stack.imgur.com/WRIhl.png)\r\n\r\nImage of system out println incorrectly highlighted\r\n\r\n![Image of system out println incorrectly highlighted][2]\r\n\r\nI have tried uninstalling any packages that help with syntax highlighting in VsCode, and reinstalling them, however problem persists.\r\n\r\nI am hoping the syntax highlighting remains consistent\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tzte1.png\r\n  [2]: https://i.stack.imgur.com/YvkmP.png","title":"VsCode&#39;s syntax highlighting incorrect colors syntax for Java Development","body":"<p>Overview of incorrect syntax highlighting\n<img src=\"https://i.stack.imgur.com/BCqRg.jpg\" alt=\"\" /></p>\n<p>Lines 24, 25 show incorrect syntax highlighting which is effected by how many new empty lines I have in-between the last declared variable, and<br />\nSystem out println function.</p>\n<p>In the image above, there is one empty space between line 22 and 24. If I have three empty lines the syntax highlighting returns to normal.</p>\n<p>Showing that syntax highlighting corrects it's self with three spaces between code lines</p>\n<p><img src=\"https://i.stack.imgur.com/X7RQ0.jpg\" alt=\"Showing that syntax highlighting corrects it's self with three spaces between code lines\" /></p>\n<p>See below three images where syntax highlighting remains inconsistent while writing out         System out println</p>\n<p>Image of System</p>\n<p><img src=\"https://i.stack.imgur.com/Tzte1.png\" alt=\"Image of System\" /></p>\n<p>Image of System out</p>\n<p><img src=\"https://i.stack.imgur.com/WRIhl.png\" alt=\"Image of System out\" /></p>\n<p>Image of system out println incorrectly highlighted</p>\n<p><img src=\"https://i.stack.imgur.com/YvkmP.png\" alt=\"Image of system out println incorrectly highlighted\" /></p>\n<p>I have tried uninstalling any packages that help with syntax highlighting in VsCode, and reinstalling them, however problem persists.</p>\n<p>I am hoping the syntax highlighting remains consistent</p>\n"},{"tags":["java","spring-boot","postman","resttemplate"],"comments":[{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1698036292,"post_id":77342557,"comment_id":136349468,"body_markdown":"Share your postman response details. How much time it is taking","body":"Share your postman response details. How much time it is taking"},{"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"score":0,"creation_date":1698044580,"post_id":77342557,"comment_id":136350387,"body_markdown":"This is my response details on postman when hitting the targeted url directly (https://i.imgur.com/neC4HOZ.png) it only take me 570ms","body":"This is my response details on postman when hitting the targeted url directly (<a href=\"https://i.imgur.com/neC4HOZ.png\" rel=\"nofollow noreferrer\">i.imgur.com/neC4HOZ.png</a>) it only take me 570ms"},{"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"score":0,"creation_date":1698053838,"post_id":77342557,"comment_id":136351928,"body_markdown":"Is it possible there is a firewall that block from http localhost request to https url?","body":"Is it possible there is a firewall that block from http localhost request to https url?"}],"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698044429,"creation_date":1698033082,"question_id":77342557,"body_markdown":"I am currently trying to use a service to send a WhatsApp message.  \r\nHere is **my snippet** of code:\r\n\r\n```java\r\nString url = &quot;https://[service-url].com/[rest-of-the-path]&quot;\r\nString username = &quot;username&quot;\r\nString password = &quot;password&quot;\r\nString auth = username + &quot;:&quot; + password\r\nString encoded = Base64.getEncoder().encodeToString(auth.getBytes(StandardCharsets.UTF_8));\r\nHttpHeaders headers = new HttpHeaders(){{\r\n     set(&quot;Authorization&quot;, &quot;Basic &quot; + encoded);\r\n}};\r\nRestTemplate restTemplate = new RestTemplate();\r\nSimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\r\nrequestFactory.setConnectTimeout(5000);\r\nrequestFactory.setReadTimeout(5000);\r\nrestTemplate.setRequestFactory(requestFactory);\r\nString result = restTemplate.postForObject(url, headers, String.class);\r\n```\r\nWhen I run this program, the code got an error with the message of connection timed out error when it tries to `postForObject`. I tried to googled and it says that firewall/proxy could be the issues. However, if that is the case - When I tried using the same url with the same username and password as the basic authentication on Postman, I got the result that I desired. If it is indeed due to the proxy issues, shouldn&#39;t Postman give me the same error? So I believe that the error might be somewhere else that I am not aware of.  \r\n\r\nCan someone points out where did I go wrong on this one?\r\n\r\n**Edit:** I have tried various alternative like using `Unirest` or `HttpUrlConnection` it gives me the same problem which is connection timed out whenever it tries to connect to the url. There was some article suggest that the service could be overloaded so it got a timeout error but I tried doing it through my java localhost and hit directly to the url through postman at almost similar time - the java localhost gives me an error meanwhile when I hit directly to the url through postman it works as intended\r\n            \r\n**Edit** I forgot to mention that I am using java 8 and for some reasons, I can&#39;t upgrade to to later version","title":"RestTemplate on Java got timeout error but on Postman it is okay","body":"<p>I am currently trying to use a service to send a WhatsApp message.<br />\nHere is <strong>my snippet</strong> of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String url = &quot;https://[service-url].com/[rest-of-the-path]&quot;\nString username = &quot;username&quot;\nString password = &quot;password&quot;\nString auth = username + &quot;:&quot; + password\nString encoded = Base64.getEncoder().encodeToString(auth.getBytes(StandardCharsets.UTF_8));\nHttpHeaders headers = new HttpHeaders(){{\n     set(&quot;Authorization&quot;, &quot;Basic &quot; + encoded);\n}};\nRestTemplate restTemplate = new RestTemplate();\nSimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\nrequestFactory.setConnectTimeout(5000);\nrequestFactory.setReadTimeout(5000);\nrestTemplate.setRequestFactory(requestFactory);\nString result = restTemplate.postForObject(url, headers, String.class);\n</code></pre>\n<p>When I run this program, the code got an error with the message of connection timed out error when it tries to <code>postForObject</code>. I tried to googled and it says that firewall/proxy could be the issues. However, if that is the case - When I tried using the same url with the same username and password as the basic authentication on Postman, I got the result that I desired. If it is indeed due to the proxy issues, shouldn't Postman give me the same error? So I believe that the error might be somewhere else that I am not aware of.</p>\n<p>Can someone points out where did I go wrong on this one?</p>\n<p><strong>Edit:</strong> I have tried various alternative like using <code>Unirest</code> or <code>HttpUrlConnection</code> it gives me the same problem which is connection timed out whenever it tries to connect to the url. There was some article suggest that the service could be overloaded so it got a timeout error but I tried doing it through my java localhost and hit directly to the url through postman at almost similar time - the java localhost gives me an error meanwhile when I hit directly to the url through postman it works as intended</p>\n<p><strong>Edit</strong> I forgot to mention that I am using java 8 and for some reasons, I can't upgrade to to later version</p>\n"},{"tags":["java","java-stream"],"owner":{"account_id":7402211,"reputation":21,"user_id":13296173,"display_name":"EMED"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698042248,"answer_count":0,"score":0,"last_activity_date":1698044401,"creation_date":1698042098,"question_id":77342999,"body_markdown":"The order of the intermiediate operations is not being followed. I have code snippet below\r\n      \r\n         Integer[] arr = {5,4,3,2,7,8,9,0,6};\r\n         List&lt;Integer&gt; lst = Stream.of(arr)\r\n        .filter(e -&gt; (e % 2) == 0)\r\n        .peek(System.out::println) \r\n        .limit(3)              \r\n        .collect(Collectors.toList());\r\n\r\noutput is \r\n\r\n         4\r\n         2\r\n         8\r\n\r\nSince peek(System.out::println) is applied before limit, I expected it to print all even numbers and after that it should apply limit and get list of 3 items. \r\n\r\nWhy is that it println is called for 3 items only. Should the order of my functions on stream not matter ?\r\n\r\n","title":"Order of intermediate operations in Java Stream pipeline","body":"<p>The order of the intermiediate operations is not being followed. I have code snippet below</p>\n<pre><code>     Integer[] arr = {5,4,3,2,7,8,9,0,6};\n     List&lt;Integer&gt; lst = Stream.of(arr)\n    .filter(e -&gt; (e % 2) == 0)\n    .peek(System.out::println) \n    .limit(3)              \n    .collect(Collectors.toList());\n</code></pre>\n<p>output is</p>\n<pre><code>     4\n     2\n     8\n</code></pre>\n<p>Since peek(System.out::println) is applied before limit, I expected it to print all even numbers and after that it should apply limit and get list of 3 items.</p>\n<p>Why is that it println is called for 3 items only. Should the order of my functions on stream not matter ?</p>\n"},{"tags":["java","servlets","zip","response-headers","zipoutputstream"],"answers":[{"tags":[],"owner":{"account_id":9585668,"reputation":3895,"user_id":7123519,"accept_rate":95,"display_name":"Sebastian Nielsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658317821,"creation_date":1658317821,"answer_id":73051125,"question_id":73048971,"body_markdown":"Solved it by changing `zos.setUseZip64(Zip64Mode.Always);` to `zos.setUseZip64(Zip64Mode.AsNeeded);`","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<p>Solved it by changing <code>zos.setUseZip64(Zip64Mode.Always);</code> to <code>zos.setUseZip64(Zip64Mode.AsNeeded);</code></p>\n"},{"tags":[],"owner":{"account_id":6690978,"reputation":31,"user_id":5160488,"display_name":"mariusi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698044142,"creation_date":1698044142,"answer_id":77343161,"question_id":73048971,"body_markdown":"    zout.setUseZip64(Zip64Mode.AlwaysWithCompatibility);\r\n\r\nhas worked for me.","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<pre><code>zout.setUseZip64(Zip64Mode.AlwaysWithCompatibility);\n</code></pre>\n<p>has worked for me.</p>\n"}],"owner":{"account_id":9585668,"reputation":3895,"user_id":7123519,"accept_rate":95,"display_name":"Sebastian Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":951,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698044142,"creation_date":1658308836,"question_id":73048971,"body_markdown":"I am zipping (using zip64) a number of files and then returning it in a response to the user.\r\n\r\n```java\r\n\r\n         response.setContentType(&quot;application/zip&quot;);  // Doesn&#39;t seem like this makes any difference?\r\n         response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + getZipFileName(survey) + &quot;.zip&quot;);  // Doesn&#39;t seem like this makes any difference?\r\n\r\n         // Remove caching prevention\r\n         response.setHeader(&quot;Pragma&quot;, &quot;&quot;);\r\n         response.setHeader(&quot;Cache-Control&quot;, &quot;&quot;);\r\n\r\n         response.setHeader(&quot;Connection&quot;, &quot;keep-alive&quot;);\r\n\r\n\r\n      ServletOutputStream responseOutputStream = response.getOutputStream();\r\n\r\n         ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n         ZipArchiveOutputStream zos = new ZipArchiveOutputStream(bos);\r\n\r\n         zos.setUseZip64(Zip64Mode.Always);  \r\n\r\n         try {\r\n\r\n            for (RespondentUploadedFile file : filesNotFromDeletedVariables) {\r\n               String fileName = buildFileName(file);\r\n\r\n               ZipArchiveEntry entry = new ZipArchiveEntry(fileName);\r\n               zos.putArchiveEntry(entry); // Writes the header for an archive entry to the outputstream\r\n\r\n               byte[] fileData = file.getRamFile().getData();\r\n               zos.write(fileData);\r\n\r\n               zos.closeArchiveEntry();\r\n            }\r\n\r\n         } catch (Exception e) {\r\n            ...             // We never get in here\r\n         } finally {\r\n            zos.close();\r\n         }\r\n\r\n         responseOutputStream.write(bos.toByteArray());\r\n         responseOutputStream.flush(); // tried adding / removing this ... no difference\r\n\r\n\r\n      } catch (Exception e) {\r\n         response.sendError(SC_INTERNAL_SERVER_ERROR);    // We never get here\r\n      }\r\n``` \r\n\r\nIf I just click on the downloaded zip file, then I get no errors/warnings.\r\n\r\nIf I try to extract the zip file, then I get the warning as shown here:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nInside the extracted folder, everything is fine and as expected ... so what&#39;s going on? How can I get rid of this warning as to not confuse any user when nothing is wrong. \r\n\r\n\r\n----\r\n\r\nI thought it might have something to do with the `.setContentType` and `.setHeader`, but to my surprise, there is no difference in terms of behavior if I change those as you can see here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n----\r\n\r\nI suspect it might have somthing to do with the fact that I am dealing with [zip64](https://en.wikipedia.org/wiki/ZIP_(file_format)#ZIP64), but something is perceiving it as just a zip?\r\n\r\n  [1]: https://i.stack.imgur.com/4rF7a.png\r\n  [2]: https://i.stack.imgur.com/42VaN.png","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<p>I am zipping (using zip64) a number of files and then returning it in a response to the user.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n         response.setContentType(&quot;application/zip&quot;);  // Doesn't seem like this makes any difference?\n         response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + getZipFileName(survey) + &quot;.zip&quot;);  // Doesn't seem like this makes any difference?\n\n         // Remove caching prevention\n         response.setHeader(&quot;Pragma&quot;, &quot;&quot;);\n         response.setHeader(&quot;Cache-Control&quot;, &quot;&quot;);\n\n         response.setHeader(&quot;Connection&quot;, &quot;keep-alive&quot;);\n\n\n      ServletOutputStream responseOutputStream = response.getOutputStream();\n\n         ByteArrayOutputStream bos = new ByteArrayOutputStream();\n         ZipArchiveOutputStream zos = new ZipArchiveOutputStream(bos);\n\n         zos.setUseZip64(Zip64Mode.Always);  \n\n         try {\n\n            for (RespondentUploadedFile file : filesNotFromDeletedVariables) {\n               String fileName = buildFileName(file);\n\n               ZipArchiveEntry entry = new ZipArchiveEntry(fileName);\n               zos.putArchiveEntry(entry); // Writes the header for an archive entry to the outputstream\n\n               byte[] fileData = file.getRamFile().getData();\n               zos.write(fileData);\n\n               zos.closeArchiveEntry();\n            }\n\n         } catch (Exception e) {\n            ...             // We never get in here\n         } finally {\n            zos.close();\n         }\n\n         responseOutputStream.write(bos.toByteArray());\n         responseOutputStream.flush(); // tried adding / removing this ... no difference\n\n\n      } catch (Exception e) {\n         response.sendError(SC_INTERNAL_SERVER_ERROR);    // We never get here\n      }\n</code></pre>\n<p>If I just click on the downloaded zip file, then I get no errors/warnings.</p>\n<p>If I try to extract the zip file, then I get the warning as shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/4rF7a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4rF7a.png\" alt=\"enter image description here\" /></a></p>\n<p>Inside the extracted folder, everything is fine and as expected ... so what's going on? How can I get rid of this warning as to not confuse any user when nothing is wrong.</p>\n<hr />\n<p>I thought it might have something to do with the <code>.setContentType</code> and <code>.setHeader</code>, but to my surprise, there is no difference in terms of behavior if I change those as you can see here:</p>\n<p><a href=\"https://i.stack.imgur.com/42VaN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/42VaN.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>I suspect it might have somthing to do with the fact that I am dealing with <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)#ZIP64\" rel=\"nofollow noreferrer\">zip64</a>, but something is perceiving it as just a zip?</p>\n"},{"tags":["java","jmeter","windows-10"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698026783,"post_id":77341065,"comment_id":136348903,"body_markdown":"Read jmeter documentation instead of random YouTube tutorials. Also what your Windows installation shows as icons is not related to jmeter but to whatever you installed on Windows. You seem to not understand your Windows installation.","body":"Read jmeter documentation instead of random YouTube tutorials. Also what your Windows installation shows as icons is not related to jmeter but to whatever you installed on Windows. You seem to not understand your Windows installation."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698043869,"creation_date":1698043869,"answer_id":77343134,"question_id":77341065,"body_markdown":"It looks like an issue with your [Windows file associations][1]. The `ApacheJMeter.jar` file is there but your operating system considers it as an archive and it makes sense because [.jar files][2] are basically [.zip archives][3]. \r\n\r\nAnyway you&#39;re not supposed to launch `ApacheJMeter.jar` file directly, you should use `jmeter.bat` wrapper script because it does some checks and sets some parameters which are necessary to properly initialize and run JMeter. \r\n\r\n[![enter image description here][4]][4]\r\n\r\nIn general I would recommend following [official JMeter documentation][5] which states:\r\n\r\n&gt;To run JMeter, run the jmeter.bat (for Windows) or jmeter (for Unix) file. These files are found in the bin directory.\r\n\r\nIf you need a little more detailed instructions check out [JMeter Installation: How to Get Started][6] article \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/shell/fa-intro\r\n  [2]: https://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html\r\n  [3]: https://en.wikipedia.org/wiki/ZIP_(file_format)\r\n  [4]: https://i.stack.imgur.com/imKNy.png\r\n  [5]: https://jmeter.apache.org/usermanual/get-started.html#install\r\n  [6]: https://www.blazemeter.com/blog/jmeter-installation","title":"Unable to see the Executable JAR File in the apache JMeter bin folder","body":"<p>It looks like an issue with your <a href=\"https://learn.microsoft.com/en-us/windows/win32/shell/fa-intro\" rel=\"nofollow noreferrer\">Windows file associations</a>. The <code>ApacheJMeter.jar</code> file is there but your operating system considers it as an archive and it makes sense because <a href=\"https://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html\" rel=\"nofollow noreferrer\">.jar files</a> are basically <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)\" rel=\"nofollow noreferrer\">.zip archives</a>.</p>\n<p>Anyway you're not supposed to launch <code>ApacheJMeter.jar</code> file directly, you should use <code>jmeter.bat</code> wrapper script because it does some checks and sets some parameters which are necessary to properly initialize and run JMeter.</p>\n<p><a href=\"https://i.stack.imgur.com/imKNy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/imKNy.png\" alt=\"enter image description here\" /></a></p>\n<p>In general I would recommend following <a href=\"https://jmeter.apache.org/usermanual/get-started.html#install\" rel=\"nofollow noreferrer\">official JMeter documentation</a> which states:</p>\n<blockquote>\n<p>To run JMeter, run the jmeter.bat (for Windows) or jmeter (for Unix) file. These files are found in the bin directory.</p>\n</blockquote>\n<p>If you need a little more detailed instructions check out <a href=\"https://www.blazemeter.com/blog/jmeter-installation\" rel=\"nofollow noreferrer\">JMeter Installation: How to Get Started</a> article</p>\n"}],"owner":{"account_id":23740498,"reputation":75,"user_id":22054564,"display_name":"The Massacre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343134,"answer_count":1,"score":0,"last_activity_date":1698043869,"creation_date":1697996726,"question_id":77341065,"body_markdown":"Following this YouTube [tutorial][1],\r\n\r\n- I have downloaded the Apache JMeter 5.6.2, extracted in the downloads folder.\r\n- Placed that extracted folder in the C drive - Program Files directory.\r\n- Opened to bin folder &gt; I cannot see the executable Jar File as shown in the video to open the J Meter.\r\n[![Youtube Video Screenshot][2]][2]\r\n\r\n\r\n But I can see the Jar file named as Apache J Meter, it is not showing the Java SE environment option to open the application:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThe ApacheJMeter file icon also showing as winrar symbol for me but in the video it is shown as Java application logo.\r\n\r\nHow to resolve this issue and install the ApacheJMeter perfectly in Windows System?\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=A55CV8EwKw4&amp;t=7s\r\n  [2]: https://i.stack.imgur.com/VxZgc.png\r\n  [3]: https://i.stack.imgur.com/67y7z.png","title":"Unable to see the Executable JAR File in the apache JMeter bin folder","body":"<p>Following this YouTube <a href=\"https://www.youtube.com/watch?v=A55CV8EwKw4&amp;t=7s\" rel=\"nofollow noreferrer\">tutorial</a>,</p>\n<ul>\n<li>I have downloaded the Apache JMeter 5.6.2, extracted in the downloads folder.</li>\n<li>Placed that extracted folder in the C drive - Program Files directory.</li>\n<li>Opened to bin folder &gt; I cannot see the executable Jar File as shown in the video to open the J Meter.\n<a href=\"https://i.stack.imgur.com/VxZgc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxZgc.png\" alt=\"Youtube Video Screenshot\" /></a></li>\n</ul>\n<p>But I can see the Jar file named as Apache J Meter, it is not showing the Java SE environment option to open the application:</p>\n<p><a href=\"https://i.stack.imgur.com/67y7z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/67y7z.png\" alt=\"enter image description here\" /></a></p>\n<p>The ApacheJMeter file icon also showing as winrar symbol for me but in the video it is shown as Java application logo.</p>\n<p>How to resolve this issue and install the ApacheJMeter perfectly in Windows System?</p>\n"},{"tags":["java","mysql","hibernate","jboss7.x"],"comments":[{"owner":{"account_id":200609,"reputation":2282,"user_id":446552,"accept_rate":78,"display_name":"sherif"},"score":2,"creation_date":1337984543,"post_id":10761910,"comment_id":13989180,"body_markdown":"may be this helps https://community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=t","body":"may be this helps <a href=\"https://community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=t\" rel=\"nofollow noreferrer\">community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=&zwnj;&#8203;t</a>"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1337985556,"post_id":10761910,"comment_id":13989381,"body_markdown":"Thanks, I read it before posting here - no solution there. I also read documentation which is mentioned in your link, but still no clue what is wrong.","body":"Thanks, I read it before posting here - no solution there. I also read documentation which is mentioned in your link, but still no clue what is wrong."},{"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"score":0,"creation_date":1337988337,"post_id":10761910,"comment_id":13989887,"body_markdown":"Is it working without the container? Test in a main class? Is mysql running on the default port, since you did not specified it?","body":"Is it working without the container? Test in a main class? Is mysql running on the default port, since you did not specified it?"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1338021746,"post_id":10761910,"comment_id":13993794,"body_markdown":"Port is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!","body":"Port is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!"},{"owner":{"account_id":87165,"reputation":3549,"user_id":241899,"accept_rate":92,"display_name":"Vitaly Olegovitch"},"score":0,"creation_date":1338055323,"post_id":10761910,"comment_id":14000117,"body_markdown":"Your `standalone.xml` looks correct. What Hibernate version are you using?","body":"Your <code>standalone.xml</code> looks correct. What Hibernate version are you using?"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1338061074,"post_id":10761910,"comment_id":14001091,"body_markdown":"Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy:\n\n.org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found\n\nIn Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!","body":"Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy:  .org.hibernate.service.classloading.spi.ClassLoadingExceptio&zwnj;&#8203;n: Specified JDBC Driver com.mysql.jdbc.Driver class not found  In Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!"}],"answers":[{"comments":[{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1337986674,"post_id":10762179,"comment_id":13989588,"body_markdown":"There is no such a folder in JBoss 7. Instead I tried to put the library under standalone/lib and standalone/deployments (that is equal to install driver as a deployment) - both are not working.","body":"There is no such a folder in JBoss 7. Instead I tried to put the library under standalone/lib and standalone/deployments (that is equal to install driver as a deployment) - both are not working."}],"tags":[],"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1337988425,"creation_date":1337986079,"answer_id":10762179,"question_id":10761910,"body_markdown":"Place the jdbc sql in the library folder: jboss/server/default/lib\r\n\r\nhttps://stackoverflow.com/questions/8418625/jboss-mysql-no-suitable-driver-found-for-jdbc","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>Place the jdbc sql in the library folder: jboss/server/default/lib</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8418625/jboss-mysql-no-suitable-driver-found-for-jdbc\">Jboss mysql - No suitable driver found for jdbc</a></p>\n"},{"comments":[{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1365883023,"post_id":10762841,"comment_id":22801264,"body_markdown":"Your quote is from the document &#39;Getting Started with JBoss 4.0&#39;. This question is about JBoss 7.1. The two are very different indeed (JBoss 7 doesn&#39;t have the concept of servers), and this advice does not apply.","body":"Your quote is from the document &#39;Getting Started with JBoss 4.0&#39;. This question is about JBoss 7.1. The two are very different indeed (JBoss 7 doesn&#39;t have the concept of servers), and this advice does not apply."}],"tags":[],"owner":{"account_id":30319,"reputation":90360,"user_id":82609,"accept_rate":84,"display_name":"Sebastien Lorber"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1337993652,"creation_date":1337993652,"answer_id":10762841,"question_id":10761910,"body_markdown":"Normally your jboss configuration should have a lib folder in which you can put your jdbc driver:\r\n\r\n&gt; 8.2.2. Installing the JDBC Driver and Deploying the DataSource\r\n&gt; \r\n&gt; To make the JDBC driver classes available to JBoss, copy the file\r\n&gt; mysql-connector-java-3.0.15-ga-bin.jar from the Connector/J\r\n&gt; distribution to the lib directory in the default server configuration\r\n&gt; (assuming that is the configuration you’re running, of course). Then\r\n&gt; create a file in the deploy directory called mysql-ds.xml with the\r\n&gt; following datasource configuration. The database user name and\r\n&gt; password corresponds the MySql user we created in the previous\r\n&gt; section.\r\n\r\nhttp://docs.jboss.org/jbossas/getting_started/v4/html/db.html\r\n\r\n\r\nIf it doesn&#39;t work, you can still put the driver in lib/ext/ folder of your jdk, but it&#39;s not the appropriate usage.","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>Normally your jboss configuration should have a lib folder in which you can put your jdbc driver:</p>\n\n<blockquote>\n  <p>8.2.2. Installing the JDBC Driver and Deploying the DataSource</p>\n  \n  <p>To make the JDBC driver classes available to JBoss, copy the file\n  mysql-connector-java-3.0.15-ga-bin.jar from the Connector/J\n  distribution to the lib directory in the default server configuration\n  (assuming that is the configuration you’re running, of course). Then\n  create a file in the deploy directory called mysql-ds.xml with the\n  following datasource configuration. The database user name and\n  password corresponds the MySql user we created in the previous\n  section.</p>\n</blockquote>\n\n<p><a href=\"http://docs.jboss.org/jbossas/getting_started/v4/html/db.html\" rel=\"nofollow\">http://docs.jboss.org/jbossas/getting_started/v4/html/db.html</a></p>\n\n<p>If it doesn't work, you can still put the driver in lib/ext/ folder of your jdk, but it's not the appropriate usage.</p>\n"},{"tags":[],"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1338075388,"creation_date":1338075388,"answer_id":10770576,"question_id":10761910,"body_markdown":"If anybody is facing a similar problem, here is a solution:\r\n\r\n- check stuff people mentioned under my question here;\r\n- if this do not work, check if hibernate libraries are from the same bundle (the newest is 4.1.3, JBoss 7.1.1 has 4.0.1);\r\n- make sure you do not duplicate connector and hibernate libraries in class-path and Manifest.mf dependencies (that was cause of my issue)\r\n\r\nThanks to everyone who replied here, you were very helpful!","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>If anybody is facing a similar problem, here is a solution:</p>\n\n<ul>\n<li>check stuff people mentioned under my question here;</li>\n<li>if this do not work, check if hibernate libraries are from the same bundle (the newest is 4.1.3, JBoss 7.1.1 has 4.0.1);</li>\n<li>make sure you do not duplicate connector and hibernate libraries in class-path and Manifest.mf dependencies (that was cause of my issue)</li>\n</ul>\n\n<p>Thanks to everyone who replied here, you were very helpful!</p>\n"},{"tags":[],"owner":{"account_id":3841313,"reputation":103,"user_id":3184289,"display_name":"Pravin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1393715198,"creation_date":1393715198,"answer_id":22121610,"question_id":10761910,"body_markdown":"\r\n\r\n    Step 1:\r\n    \r\n    You create one folder in jboss-as-7.1.1.Final\\modules\\com\r\n    \r\n     create mysql folder&gt;&gt;\r\n    \r\n     create main folder&gt;&gt;\r\n    \r\n     create module.xml file&gt;&gt;\r\n    \r\n     put mysql connector jar file (mysql-connector-java-5.1.10-bin)\r\n    \r\n    \r\n    Step 2:\r\n    \r\n     add line on this location jboss-as-7.1.1.Final\\modules\\org\\hibernate\\main\\module\r\n     \r\n      &lt;module name=&quot;com.mysql&quot;/&gt; \r\n\r\n\r\n","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<pre><code>Step 1:\n\nYou create one folder in jboss-as-7.1.1.Final\\modules\\com\n\n create mysql folder&gt;&gt;\n\n create main folder&gt;&gt;\n\n create module.xml file&gt;&gt;\n\n put mysql connector jar file (mysql-connector-java-5.1.10-bin)\n\n\nStep 2:\n\n add line on this location jboss-as-7.1.1.Final\\modules\\org\\hibernate\\main\\module\n\n  &lt;module name=\"com.mysql\"/&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043869,"creation_date":1698043869,"answer_id":77343133,"question_id":10761910,"body_markdown":"It seems jboss is using hibernate from its own module which does not have the visibility to see com.mysql driver.\r\n\r\nFirst configured mysql connector as a module in JBoss7.1 modules\r\n\r\nThen you need to added dependency in hibernate module provided by JBOSS\r\n\r\nPath for module.xml should be `${JBOSS_HOME}/modules/system/layers/base/org/hibernate/main`\r\n\r\n```\r\n\r\n&lt;!-- Represents the Hibernate 4.0.x module--&gt;\r\n&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.hibernate&quot;&gt;\r\n    &lt;resources&gt;\r\n        &lt;resource-root path=&quot;hibernate-core-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;resource-root path=&quot;hibernate-entitymanager-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;resource-root path=&quot;hibernate-infinispan-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;!-- Insert resources here --&gt;\r\n    &lt;/resources&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;module name=&quot;asm.asm&quot;/&gt;\r\n        &lt;module name=&quot;javax.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.persistence.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.transaction.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.validation.api&quot;/&gt;\r\n        &lt;module name=&quot;org.antlr&quot;/&gt;\r\n        &lt;module name=&quot;org.apache.commons.collections&quot;/&gt;\r\n        &lt;module name=&quot;org.dom4j&quot;/&gt;\r\n        &lt;module name=&quot;org.infinispan&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.javassist&quot;/&gt;\r\n        &lt;module name=&quot;org.jboss.as.jpa.hibernate&quot; slot=&quot;4&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.jboss.logging&quot;/&gt;\r\n        &lt;module name=&quot;org.hibernate.envers&quot; services=&quot;import&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.hibernate.commons-annotations&quot;/&gt;\r\n        \r\n        &lt;module name=&quot;com.mysql&quot;/&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n```","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>It seems jboss is using hibernate from its own module which does not have the visibility to see com.mysql driver.</p>\n<p>First configured mysql connector as a module in JBoss7.1 modules</p>\n<p>Then you need to added dependency in hibernate module provided by JBOSS</p>\n<p>Path for module.xml should be <code>${JBOSS_HOME}/modules/system/layers/base/org/hibernate/main</code></p>\n<pre><code>\n&lt;!-- Represents the Hibernate 4.0.x module--&gt;\n&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.hibernate&quot;&gt;\n    &lt;resources&gt;\n        &lt;resource-root path=&quot;hibernate-core-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;resource-root path=&quot;hibernate-entitymanager-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;resource-root path=&quot;hibernate-infinispan-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;!-- Insert resources here --&gt;\n    &lt;/resources&gt;\n\n    &lt;dependencies&gt;\n        &lt;module name=&quot;asm.asm&quot;/&gt;\n        &lt;module name=&quot;javax.api&quot;/&gt;\n        &lt;module name=&quot;javax.persistence.api&quot;/&gt;\n        &lt;module name=&quot;javax.transaction.api&quot;/&gt;\n        &lt;module name=&quot;javax.validation.api&quot;/&gt;\n        &lt;module name=&quot;org.antlr&quot;/&gt;\n        &lt;module name=&quot;org.apache.commons.collections&quot;/&gt;\n        &lt;module name=&quot;org.dom4j&quot;/&gt;\n        &lt;module name=&quot;org.infinispan&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.javassist&quot;/&gt;\n        &lt;module name=&quot;org.jboss.as.jpa.hibernate&quot; slot=&quot;4&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.jboss.logging&quot;/&gt;\n        &lt;module name=&quot;org.hibernate.envers&quot; services=&quot;import&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.hibernate.commons-annotations&quot;/&gt;\n        \n        &lt;module name=&quot;com.mysql&quot;/&gt;\n    &lt;/dependencies&gt;\n\n</code></pre>\n"}],"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11767,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1698043869,"creation_date":1337983843,"question_id":10761910,"body_markdown":"I was looking for an answer but didn&#39;t find solution.\r\nI&#39;m developing simple web-app using JSF2 and Hibernate. This is first time I&#39;m using Hibernate and I&#39;m facing many problems with configuration. My current issue is:\r\nI configured mysql connector as a module in JBoss7.1 modules. Then I created datasource and added mysql-connector-java-5.1.20-bin.jar to the classpath (It is in WEB-INF/lib directory in .war). After starting JBoss I&#39;m getting following logs:\r\n\r\n    23:44:07,497 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)\r\n    23:44:07,603 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\r\n    ...\r\n    23:44:20,348 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\r\n    23:44:21,532 INFO  \r\n    ...\r\n    [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost/testdb]\r\n    23:44:21,535 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000046: Connection properties: {user=root}\r\n    23:44:21,556 WARN  [org.hibernate.engine.jdbc.internal.JdbcServicesImpl] (MSC service thread 1-3) HHH000342: Could not obtain connection to query metadata : No suitable driver found for jdbc:mysql://localhost/testdb\r\n\r\nAnd then application is deployed and server starts successfully. When I try to invoke method trying to persist some data I obtain  \r\n\r\n    org.hibernate.exception.JDBCConnectionException: Could not open connection\r\n    and\r\n    java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\r\n\r\nI&#39;m sure the mysql-connector-java-5.1.20-bin.jar is in the WEB-INF/lib directory in war file. Any ideas what am I missing here? MySQL server wersion is 5.1.63, but I don&#39;t think it is relevant here. \r\nThank&#39;s a lot in advance!\r\n\r\nedit:\r\nPort is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!\r\n\r\nMy standalone.xml file:\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    \r\n    &lt;server xmlns=&quot;urn:jboss:domain:1.2&quot;&gt;\r\n    \r\n        &lt;extensions&gt;\r\n            &lt;extension module=&quot;org.jboss.as.clustering.infinispan&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.configadmin&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.connector&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.deployment-scanner&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.ee&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.ejb3&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jaxrs&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jdr&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jmx&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jpa&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.logging&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.mail&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.naming&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.osgi&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.pojo&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.remoting&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.sar&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.security&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.threads&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.transactions&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.web&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.webservices&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.weld&quot;/&gt;\r\n        &lt;/extensions&gt;\r\n    \r\n        &lt;management&gt;\r\n            &lt;security-realms&gt;\r\n                &lt;security-realm name=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-realm&gt;\r\n                &lt;security-realm name=&quot;ApplicationRealm&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;properties path=&quot;application-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-realm&gt;\r\n            &lt;/security-realms&gt;\r\n            &lt;management-interfaces&gt;\r\n                &lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;socket-binding native=&quot;management-native&quot;/&gt;\r\n                &lt;/native-interface&gt;\r\n                &lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;socket-binding http=&quot;management-http&quot;/&gt;\r\n                &lt;/http-interface&gt;\r\n            &lt;/management-interfaces&gt;\r\n        &lt;/management&gt;\r\n    \r\n        &lt;profile&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:logging:1.1&quot;&gt;\r\n                &lt;console-handler name=&quot;CONSOLE&quot;&gt;\r\n                    &lt;level name=&quot;INFO&quot;/&gt;\r\n                    &lt;formatter&gt;\r\n                        &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;\r\n                    &lt;/formatter&gt;\r\n                &lt;/console-handler&gt;\r\n                &lt;periodic-rotating-file-handler name=&quot;FILE&quot;&gt;\r\n                    &lt;formatter&gt;\r\n                        &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;\r\n                    &lt;/formatter&gt;\r\n                    &lt;file relative-to=&quot;jboss.server.log.dir&quot; path=&quot;server.log&quot;/&gt;\r\n                    &lt;suffix value=&quot;.yyyy-MM-dd&quot;/&gt;\r\n                    &lt;append value=&quot;true&quot;/&gt;\r\n                &lt;/periodic-rotating-file-handler&gt;\r\n                &lt;logger category=&quot;com.arjuna&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;org.apache.tomcat.util.modeler&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;sun.rmi&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;jacorb&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;jacorb.config&quot;&gt;\r\n                    &lt;level name=&quot;ERROR&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;root-logger&gt;\r\n                    &lt;level name=&quot;INFO&quot;/&gt;\r\n                    &lt;handlers&gt;\r\n                        &lt;handler name=&quot;CONSOLE&quot;/&gt;\r\n                        &lt;handler name=&quot;FILE&quot;/&gt;\r\n                    &lt;/handlers&gt;\r\n                &lt;/root-logger&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:configadmin:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:datasources:1.0&quot;&gt;\r\n                &lt;datasources&gt;\r\n                    &lt;datasource jndi-name=&quot;java:jboss/datasources/testDS&quot; pool-name=&quot;testDS&quot;&gt;\r\n                        &lt;connection-url&gt;jdbc:mysql://localhost:3306/testdb&lt;/connection-url&gt;\r\n                        &lt;driver&gt;mysql&lt;/driver&gt;\r\n                        &lt;pool&gt;\r\n                            &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\r\n                            &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;\r\n                            &lt;prefill&gt;true&lt;/prefill&gt;\r\n                        &lt;/pool&gt;\r\n                        &lt;security&gt;\r\n                            &lt;user-name&gt;root&lt;/user-name&gt;\r\n                        &lt;/security&gt;\r\n                    &lt;/datasource&gt;\r\n                    &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n                        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;\r\n                        &lt;driver&gt;h2&lt;/driver&gt;\r\n                        &lt;security&gt;\r\n                            &lt;user-name&gt;sa&lt;/user-name&gt;\r\n                            &lt;password&gt;sa&lt;/password&gt;\r\n                        &lt;/security&gt;\r\n                    &lt;/datasource&gt;\r\n                    &lt;drivers&gt;\r\n                        &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\r\n                            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\r\n                        &lt;/driver&gt;\r\n                        &lt;driver name=&quot;mysql&quot; module=&quot;com.mysql&quot;/&gt;\r\n                    &lt;/drivers&gt;\r\n                &lt;/datasources&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:deployment-scanner:1.1&quot;&gt;\r\n                &lt;deployment-scanner path=&quot;deployments&quot; relative-to=&quot;jboss.server.base.dir&quot; scan-interval=&quot;5000&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:ee:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:ejb3:1.2&quot;&gt;\r\n                &lt;session-bean&gt;\r\n                    &lt;stateless&gt;\r\n                        &lt;bean-instance-pool-ref pool-name=&quot;slsb-strict-max-pool&quot;/&gt;\r\n                    &lt;/stateless&gt;\r\n                    &lt;stateful default-access-timeout=&quot;5000&quot; cache-ref=&quot;simple&quot;/&gt;\r\n                    &lt;singleton default-access-timeout=&quot;5000&quot;/&gt;\r\n                &lt;/session-bean&gt;\r\n                &lt;pools&gt;\r\n                    &lt;bean-instance-pools&gt;\r\n                        &lt;strict-max-pool name=&quot;slsb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                        &lt;strict-max-pool name=&quot;mdb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                    &lt;/bean-instance-pools&gt;\r\n                &lt;/pools&gt;\r\n                &lt;caches&gt;\r\n                    &lt;cache name=&quot;simple&quot; aliases=&quot;NoPassivationCache&quot;/&gt;\r\n                    &lt;cache name=&quot;passivating&quot; passivation-store-ref=&quot;file&quot; aliases=&quot;SimpleStatefulCache&quot;/&gt;\r\n                &lt;/caches&gt;\r\n                &lt;passivation-stores&gt;\r\n                    &lt;file-passivation-store name=&quot;file&quot;/&gt;\r\n                &lt;/passivation-stores&gt;\r\n                &lt;async thread-pool-name=&quot;default&quot;/&gt;\r\n                &lt;timer-service thread-pool-name=&quot;default&quot;&gt;\r\n                    &lt;data-store path=&quot;timer-service-data&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;\r\n                &lt;/timer-service&gt;\r\n                &lt;remote connector-ref=&quot;remoting-connector&quot; thread-pool-name=&quot;default&quot;/&gt;\r\n                &lt;thread-pools&gt;\r\n                    &lt;thread-pool name=&quot;default&quot;&gt;\r\n                        &lt;max-threads count=&quot;10&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;100&quot; unit=&quot;milliseconds&quot;/&gt;\r\n                    &lt;/thread-pool&gt;\r\n                &lt;/thread-pools&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:infinispan:1.2&quot; default-cache-container=&quot;hibernate&quot;&gt;\r\n                &lt;cache-container name=&quot;hibernate&quot; default-cache=&quot;local-query&quot;&gt;\r\n                    &lt;local-cache name=&quot;entity&quot;&gt;\r\n                        &lt;transaction mode=&quot;NON_XA&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;10000&quot;/&gt;\r\n                        &lt;expiration max-idle=&quot;100000&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                    &lt;local-cache name=&quot;local-query&quot;&gt;\r\n                        &lt;transaction mode=&quot;NONE&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;10000&quot;/&gt;\r\n                        &lt;expiration max-idle=&quot;100000&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                    &lt;local-cache name=&quot;timestamps&quot;&gt;\r\n                        &lt;transaction mode=&quot;NONE&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;NONE&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                &lt;/cache-container&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jaxrs:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jca:1.1&quot;&gt;\r\n                &lt;archive-validation enabled=&quot;true&quot; fail-on-error=&quot;true&quot; fail-on-warn=&quot;false&quot;/&gt;\r\n                &lt;bean-validation enabled=&quot;true&quot;/&gt;\r\n                &lt;default-workmanager&gt;\r\n                    &lt;short-running-threads&gt;\r\n                        &lt;core-threads count=&quot;50&quot;/&gt;\r\n                        &lt;queue-length count=&quot;50&quot;/&gt;\r\n                        &lt;max-threads count=&quot;50&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;10&quot; unit=&quot;seconds&quot;/&gt;\r\n                    &lt;/short-running-threads&gt;\r\n                    &lt;long-running-threads&gt;\r\n                        &lt;core-threads count=&quot;50&quot;/&gt;\r\n                        &lt;queue-length count=&quot;50&quot;/&gt;\r\n                        &lt;max-threads count=&quot;50&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;10&quot; unit=&quot;seconds&quot;/&gt;\r\n                    &lt;/long-running-threads&gt;\r\n                &lt;/default-workmanager&gt;\r\n                &lt;cached-connection-manager/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jdr:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;\r\n                &lt;show-model value=&quot;true&quot;/&gt;\r\n                &lt;remoting-connector/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jpa:1.0&quot;&gt;\r\n                &lt;jpa default-datasource=&quot;&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:mail:1.0&quot;&gt;\r\n                &lt;mail-session jndi-name=&quot;java:jboss/mail/Default&quot;&gt;\r\n                    &lt;smtp-server outbound-socket-binding-ref=&quot;mail-smtp&quot;/&gt;\r\n                &lt;/mail-session&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:naming:1.1&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:osgi:1.2&quot; activation=&quot;lazy&quot;&gt;\r\n                &lt;properties&gt;\r\n                    &lt;property name=&quot;org.osgi.framework.startlevel.beginning&quot;&gt;\r\n                        1\r\n                    &lt;/property&gt;\r\n                &lt;/properties&gt;\r\n                &lt;capabilities&gt;\r\n                    &lt;capability name=&quot;javax.servlet.api:v25&quot;/&gt;\r\n                    &lt;capability name=&quot;javax.transaction.api&quot;/&gt;\r\n                    &lt;capability name=&quot;org.apache.felix.log&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.jboss.osgi.logging&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.apache.felix.configadmin&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.jboss.as.osgi.configadmin&quot; startlevel=&quot;1&quot;/&gt;\r\n                &lt;/capabilities&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:pojo:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;\r\n                &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:resource-adapters:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:sar:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:security:1.1&quot;&gt;\r\n                &lt;security-domains&gt;\r\n                    &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authentication&gt;\r\n                            &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                            &lt;/login-module&gt;\r\n                            &lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\r\n                                &lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\r\n                                &lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\r\n                                &lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\r\n                                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                            &lt;/login-module&gt;\r\n                        &lt;/authentication&gt;\r\n                    &lt;/security-domain&gt;\r\n                    &lt;security-domain name=&quot;jboss-web-policy&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authorization&gt;\r\n                            &lt;policy-module code=&quot;Delegating&quot; flag=&quot;required&quot;/&gt;\r\n                        &lt;/authorization&gt;\r\n                    &lt;/security-domain&gt;\r\n                    &lt;security-domain name=&quot;jboss-ejb-policy&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authorization&gt;\r\n                            &lt;policy-module code=&quot;Delegating&quot; flag=&quot;required&quot;/&gt;\r\n                        &lt;/authorization&gt;\r\n                    &lt;/security-domain&gt;\r\n                &lt;/security-domains&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.1&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:transactions:1.1&quot;&gt;\r\n                &lt;core-environment&gt;\r\n                    &lt;process-id&gt;\r\n                        &lt;uuid/&gt;\r\n                    &lt;/process-id&gt;\r\n                &lt;/core-environment&gt;\r\n                &lt;recovery-environment socket-binding=&quot;txn-recovery-environment&quot; status-socket-binding=&quot;txn-status-manager&quot;/&gt;\r\n                &lt;coordinator-environment default-timeout=&quot;300&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:web:1.1&quot; default-virtual-server=&quot;default-host&quot; native=&quot;false&quot;&gt;\r\n                &lt;connector name=&quot;http&quot; protocol=&quot;HTTP/1.1&quot; scheme=&quot;http&quot; socket-binding=&quot;http&quot;/&gt;\r\n                &lt;virtual-server name=&quot;default-host&quot; enable-welcome-root=&quot;true&quot;&gt;\r\n                    &lt;alias name=&quot;localhost&quot;/&gt;\r\n                    &lt;alias name=&quot;example.com&quot;/&gt;\r\n                &lt;/virtual-server&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:webservices:1.1&quot;&gt;\r\n                &lt;modify-wsdl-address&gt;true&lt;/modify-wsdl-address&gt;\r\n                &lt;wsdl-host&gt;${jboss.bind.address:127.0.0.1}&lt;/wsdl-host&gt;\r\n                &lt;endpoint-config name=&quot;Standard-Endpoint-Config&quot;/&gt;\r\n                &lt;endpoint-config name=&quot;Recording-Endpoint-Config&quot;&gt;\r\n                    &lt;pre-handler-chain name=&quot;recording-handlers&quot; protocol-bindings=&quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;&gt;\r\n                        &lt;handler name=&quot;RecordingHandler&quot; class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;/&gt;\r\n                    &lt;/pre-handler-chain&gt;\r\n                &lt;/endpoint-config&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:weld:1.0&quot;/&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;interfaces&gt;\r\n            &lt;interface name=&quot;management&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n            &lt;interface name=&quot;public&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n            &lt;interface name=&quot;unsecure&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address.unsecure:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n        &lt;/interfaces&gt;\r\n    \r\n        &lt;socket-binding-group name=&quot;standard-sockets&quot; default-interface=&quot;public&quot; port-offset=&quot;${jboss.socket.binding.port-offset:0}&quot;&gt;\r\n            &lt;socket-binding name=&quot;management-native&quot; interface=&quot;management&quot; port=&quot;${jboss.management.native.port:9999}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;management-http&quot; interface=&quot;management&quot; port=&quot;${jboss.management.http.port:9990}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;management-https&quot; interface=&quot;management&quot; port=&quot;${jboss.management.https.port:9443}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;ajp&quot; port=&quot;8009&quot;/&gt;\r\n            &lt;socket-binding name=&quot;http&quot; port=&quot;8080&quot;/&gt;\r\n            &lt;socket-binding name=&quot;https&quot; port=&quot;8443&quot;/&gt;\r\n            &lt;socket-binding name=&quot;osgi-http&quot; interface=&quot;management&quot; port=&quot;8090&quot;/&gt;\r\n            &lt;socket-binding name=&quot;remoting&quot; port=&quot;4447&quot;/&gt;\r\n            &lt;socket-binding name=&quot;txn-recovery-environment&quot; port=&quot;4712&quot;/&gt;\r\n            &lt;socket-binding name=&quot;txn-status-manager&quot; port=&quot;4713&quot;/&gt;\r\n            &lt;outbound-socket-binding name=&quot;mail-smtp&quot;&gt;\r\n                &lt;remote-destination host=&quot;localhost&quot; port=&quot;25&quot;/&gt;\r\n            &lt;/outbound-socket-binding&gt;\r\n        &lt;/socket-binding-group&gt;\r\n    \r\n        &lt;deployments&gt;\r\n            &lt;deployment name=&quot;jboss-as-helloworld-jsf.war&quot; runtime-name=&quot;jboss-as-helloworld-jsf.war&quot;&gt;\r\n                &lt;content sha1=&quot;87e5656e4c0b15f7864df9e68328d290999a1144&quot;/&gt;\r\n            &lt;/deployment&gt;\r\n        &lt;/deployments&gt;\r\n    &lt;/server&gt;\r\n\r\n\r\nI&#39;m using Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy: .org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found In Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>I was looking for an answer but didn't find solution.\nI'm developing simple web-app using JSF2 and Hibernate. This is first time I'm using Hibernate and I'm facing many problems with configuration. My current issue is:\nI configured mysql connector as a module in JBoss7.1 modules. Then I created datasource and added mysql-connector-java-5.1.20-bin.jar to the classpath (It is in WEB-INF/lib directory in .war). After starting JBoss I'm getting following logs:</p>\n\n<pre><code>23:44:07,497 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)\n23:44:07,603 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\n...\n23:44:20,348 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\n23:44:21,532 INFO  \n...\n[org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost/testdb]\n23:44:21,535 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000046: Connection properties: {user=root}\n23:44:21,556 WARN  [org.hibernate.engine.jdbc.internal.JdbcServicesImpl] (MSC service thread 1-3) HHH000342: Could not obtain connection to query metadata : No suitable driver found for jdbc:mysql://localhost/testdb\n</code></pre>\n\n<p>And then application is deployed and server starts successfully. When I try to invoke method trying to persist some data I obtain  </p>\n\n<pre><code>org.hibernate.exception.JDBCConnectionException: Could not open connection\nand\njava.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\n</code></pre>\n\n<p>I'm sure the mysql-connector-java-5.1.20-bin.jar is in the WEB-INF/lib directory in war file. Any ideas what am I missing here? MySQL server wersion is 5.1.63, but I don't think it is relevant here. \nThank's a lot in advance!</p>\n\n<p>edit:\nPort is OK, I checked everything two times;-) BUT, now I'm really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!</p>\n\n<p>My standalone.xml file:\n    </p>\n\n<pre><code>&lt;server xmlns=\"urn:jboss:domain:1.2\"&gt;\n\n    &lt;extensions&gt;\n        &lt;extension module=\"org.jboss.as.clustering.infinispan\"/&gt;\n        &lt;extension module=\"org.jboss.as.configadmin\"/&gt;\n        &lt;extension module=\"org.jboss.as.connector\"/&gt;\n        &lt;extension module=\"org.jboss.as.deployment-scanner\"/&gt;\n        &lt;extension module=\"org.jboss.as.ee\"/&gt;\n        &lt;extension module=\"org.jboss.as.ejb3\"/&gt;\n        &lt;extension module=\"org.jboss.as.jaxrs\"/&gt;\n        &lt;extension module=\"org.jboss.as.jdr\"/&gt;\n        &lt;extension module=\"org.jboss.as.jmx\"/&gt;\n        &lt;extension module=\"org.jboss.as.jpa\"/&gt;\n        &lt;extension module=\"org.jboss.as.logging\"/&gt;\n        &lt;extension module=\"org.jboss.as.mail\"/&gt;\n        &lt;extension module=\"org.jboss.as.naming\"/&gt;\n        &lt;extension module=\"org.jboss.as.osgi\"/&gt;\n        &lt;extension module=\"org.jboss.as.pojo\"/&gt;\n        &lt;extension module=\"org.jboss.as.remoting\"/&gt;\n        &lt;extension module=\"org.jboss.as.sar\"/&gt;\n        &lt;extension module=\"org.jboss.as.security\"/&gt;\n        &lt;extension module=\"org.jboss.as.threads\"/&gt;\n        &lt;extension module=\"org.jboss.as.transactions\"/&gt;\n        &lt;extension module=\"org.jboss.as.web\"/&gt;\n        &lt;extension module=\"org.jboss.as.webservices\"/&gt;\n        &lt;extension module=\"org.jboss.as.weld\"/&gt;\n    &lt;/extensions&gt;\n\n    &lt;management&gt;\n        &lt;security-realms&gt;\n            &lt;security-realm name=\"ManagementRealm\"&gt;\n                &lt;authentication&gt;\n                    &lt;properties path=\"mgmt-users.properties\" relative-to=\"jboss.server.config.dir\"/&gt;\n                &lt;/authentication&gt;\n            &lt;/security-realm&gt;\n            &lt;security-realm name=\"ApplicationRealm\"&gt;\n                &lt;authentication&gt;\n                    &lt;properties path=\"application-users.properties\" relative-to=\"jboss.server.config.dir\"/&gt;\n                &lt;/authentication&gt;\n            &lt;/security-realm&gt;\n        &lt;/security-realms&gt;\n        &lt;management-interfaces&gt;\n            &lt;native-interface security-realm=\"ManagementRealm\"&gt;\n                &lt;socket-binding native=\"management-native\"/&gt;\n            &lt;/native-interface&gt;\n            &lt;http-interface security-realm=\"ManagementRealm\"&gt;\n                &lt;socket-binding http=\"management-http\"/&gt;\n            &lt;/http-interface&gt;\n        &lt;/management-interfaces&gt;\n    &lt;/management&gt;\n\n    &lt;profile&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:logging:1.1\"&gt;\n            &lt;console-handler name=\"CONSOLE\"&gt;\n                &lt;level name=\"INFO\"/&gt;\n                &lt;formatter&gt;\n                    &lt;pattern-formatter pattern=\"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n\"/&gt;\n                &lt;/formatter&gt;\n            &lt;/console-handler&gt;\n            &lt;periodic-rotating-file-handler name=\"FILE\"&gt;\n                &lt;formatter&gt;\n                    &lt;pattern-formatter pattern=\"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n\"/&gt;\n                &lt;/formatter&gt;\n                &lt;file relative-to=\"jboss.server.log.dir\" path=\"server.log\"/&gt;\n                &lt;suffix value=\".yyyy-MM-dd\"/&gt;\n                &lt;append value=\"true\"/&gt;\n            &lt;/periodic-rotating-file-handler&gt;\n            &lt;logger category=\"com.arjuna\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"org.apache.tomcat.util.modeler\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"sun.rmi\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"jacorb\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"jacorb.config\"&gt;\n                &lt;level name=\"ERROR\"/&gt;\n            &lt;/logger&gt;\n            &lt;root-logger&gt;\n                &lt;level name=\"INFO\"/&gt;\n                &lt;handlers&gt;\n                    &lt;handler name=\"CONSOLE\"/&gt;\n                    &lt;handler name=\"FILE\"/&gt;\n                &lt;/handlers&gt;\n            &lt;/root-logger&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:configadmin:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:datasources:1.0\"&gt;\n            &lt;datasources&gt;\n                &lt;datasource jndi-name=\"java:jboss/datasources/testDS\" pool-name=\"testDS\"&gt;\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/testdb&lt;/connection-url&gt;\n                    &lt;driver&gt;mysql&lt;/driver&gt;\n                    &lt;pool&gt;\n                        &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\n                        &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;\n                        &lt;prefill&gt;true&lt;/prefill&gt;\n                    &lt;/pool&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;root&lt;/user-name&gt;\n                    &lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;datasource jndi-name=\"java:jboss/datasources/ExampleDS\" pool-name=\"ExampleDS\" enabled=\"true\" use-java-context=\"true\"&gt;\n                    &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;\n                    &lt;driver&gt;h2&lt;/driver&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;sa&lt;/user-name&gt;\n                        &lt;password&gt;sa&lt;/password&gt;\n                    &lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;drivers&gt;\n                    &lt;driver name=\"h2\" module=\"com.h2database.h2\"&gt;\n                        &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\n                    &lt;/driver&gt;\n                    &lt;driver name=\"mysql\" module=\"com.mysql\"/&gt;\n                &lt;/drivers&gt;\n            &lt;/datasources&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:deployment-scanner:1.1\"&gt;\n            &lt;deployment-scanner path=\"deployments\" relative-to=\"jboss.server.base.dir\" scan-interval=\"5000\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:ee:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:ejb3:1.2\"&gt;\n            &lt;session-bean&gt;\n                &lt;stateless&gt;\n                    &lt;bean-instance-pool-ref pool-name=\"slsb-strict-max-pool\"/&gt;\n                &lt;/stateless&gt;\n                &lt;stateful default-access-timeout=\"5000\" cache-ref=\"simple\"/&gt;\n                &lt;singleton default-access-timeout=\"5000\"/&gt;\n            &lt;/session-bean&gt;\n            &lt;pools&gt;\n                &lt;bean-instance-pools&gt;\n                    &lt;strict-max-pool name=\"slsb-strict-max-pool\" max-pool-size=\"20\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/&gt;\n                    &lt;strict-max-pool name=\"mdb-strict-max-pool\" max-pool-size=\"20\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/&gt;\n                &lt;/bean-instance-pools&gt;\n            &lt;/pools&gt;\n            &lt;caches&gt;\n                &lt;cache name=\"simple\" aliases=\"NoPassivationCache\"/&gt;\n                &lt;cache name=\"passivating\" passivation-store-ref=\"file\" aliases=\"SimpleStatefulCache\"/&gt;\n            &lt;/caches&gt;\n            &lt;passivation-stores&gt;\n                &lt;file-passivation-store name=\"file\"/&gt;\n            &lt;/passivation-stores&gt;\n            &lt;async thread-pool-name=\"default\"/&gt;\n            &lt;timer-service thread-pool-name=\"default\"&gt;\n                &lt;data-store path=\"timer-service-data\" relative-to=\"jboss.server.data.dir\"/&gt;\n            &lt;/timer-service&gt;\n            &lt;remote connector-ref=\"remoting-connector\" thread-pool-name=\"default\"/&gt;\n            &lt;thread-pools&gt;\n                &lt;thread-pool name=\"default\"&gt;\n                    &lt;max-threads count=\"10\"/&gt;\n                    &lt;keepalive-time time=\"100\" unit=\"milliseconds\"/&gt;\n                &lt;/thread-pool&gt;\n            &lt;/thread-pools&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:infinispan:1.2\" default-cache-container=\"hibernate\"&gt;\n            &lt;cache-container name=\"hibernate\" default-cache=\"local-query\"&gt;\n                &lt;local-cache name=\"entity\"&gt;\n                    &lt;transaction mode=\"NON_XA\"/&gt;\n                    &lt;eviction strategy=\"LRU\" max-entries=\"10000\"/&gt;\n                    &lt;expiration max-idle=\"100000\"/&gt;\n                &lt;/local-cache&gt;\n                &lt;local-cache name=\"local-query\"&gt;\n                    &lt;transaction mode=\"NONE\"/&gt;\n                    &lt;eviction strategy=\"LRU\" max-entries=\"10000\"/&gt;\n                    &lt;expiration max-idle=\"100000\"/&gt;\n                &lt;/local-cache&gt;\n                &lt;local-cache name=\"timestamps\"&gt;\n                    &lt;transaction mode=\"NONE\"/&gt;\n                    &lt;eviction strategy=\"NONE\"/&gt;\n                &lt;/local-cache&gt;\n            &lt;/cache-container&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jaxrs:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jca:1.1\"&gt;\n            &lt;archive-validation enabled=\"true\" fail-on-error=\"true\" fail-on-warn=\"false\"/&gt;\n            &lt;bean-validation enabled=\"true\"/&gt;\n            &lt;default-workmanager&gt;\n                &lt;short-running-threads&gt;\n                    &lt;core-threads count=\"50\"/&gt;\n                    &lt;queue-length count=\"50\"/&gt;\n                    &lt;max-threads count=\"50\"/&gt;\n                    &lt;keepalive-time time=\"10\" unit=\"seconds\"/&gt;\n                &lt;/short-running-threads&gt;\n                &lt;long-running-threads&gt;\n                    &lt;core-threads count=\"50\"/&gt;\n                    &lt;queue-length count=\"50\"/&gt;\n                    &lt;max-threads count=\"50\"/&gt;\n                    &lt;keepalive-time time=\"10\" unit=\"seconds\"/&gt;\n                &lt;/long-running-threads&gt;\n            &lt;/default-workmanager&gt;\n            &lt;cached-connection-manager/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jdr:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jmx:1.1\"&gt;\n            &lt;show-model value=\"true\"/&gt;\n            &lt;remoting-connector/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jpa:1.0\"&gt;\n            &lt;jpa default-datasource=\"\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:mail:1.0\"&gt;\n            &lt;mail-session jndi-name=\"java:jboss/mail/Default\"&gt;\n                &lt;smtp-server outbound-socket-binding-ref=\"mail-smtp\"/&gt;\n            &lt;/mail-session&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:naming:1.1\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:osgi:1.2\" activation=\"lazy\"&gt;\n            &lt;properties&gt;\n                &lt;property name=\"org.osgi.framework.startlevel.beginning\"&gt;\n                    1\n                &lt;/property&gt;\n            &lt;/properties&gt;\n            &lt;capabilities&gt;\n                &lt;capability name=\"javax.servlet.api:v25\"/&gt;\n                &lt;capability name=\"javax.transaction.api\"/&gt;\n                &lt;capability name=\"org.apache.felix.log\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.jboss.osgi.logging\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.apache.felix.configadmin\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.jboss.as.osgi.configadmin\" startlevel=\"1\"/&gt;\n            &lt;/capabilities&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:pojo:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:remoting:1.1\"&gt;\n            &lt;connector name=\"remoting-connector\" socket-binding=\"remoting\" security-realm=\"ApplicationRealm\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:resource-adapters:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:sar:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:security:1.1\"&gt;\n            &lt;security-domains&gt;\n                &lt;security-domain name=\"other\" cache-type=\"default\"&gt;\n                    &lt;authentication&gt;\n                        &lt;login-module code=\"Remoting\" flag=\"optional\"&gt;\n                            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n                        &lt;/login-module&gt;\n                        &lt;login-module code=\"RealmUsersRoles\" flag=\"required\"&gt;\n                            &lt;module-option name=\"usersProperties\" value=\"${jboss.server.config.dir}/application-users.properties\"/&gt;\n                            &lt;module-option name=\"rolesProperties\" value=\"${jboss.server.config.dir}/application-roles.properties\"/&gt;\n                            &lt;module-option name=\"realm\" value=\"ApplicationRealm\"/&gt;\n                            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n                        &lt;/login-module&gt;\n                    &lt;/authentication&gt;\n                &lt;/security-domain&gt;\n                &lt;security-domain name=\"jboss-web-policy\" cache-type=\"default\"&gt;\n                    &lt;authorization&gt;\n                        &lt;policy-module code=\"Delegating\" flag=\"required\"/&gt;\n                    &lt;/authorization&gt;\n                &lt;/security-domain&gt;\n                &lt;security-domain name=\"jboss-ejb-policy\" cache-type=\"default\"&gt;\n                    &lt;authorization&gt;\n                        &lt;policy-module code=\"Delegating\" flag=\"required\"/&gt;\n                    &lt;/authorization&gt;\n                &lt;/security-domain&gt;\n            &lt;/security-domains&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:threads:1.1\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:transactions:1.1\"&gt;\n            &lt;core-environment&gt;\n                &lt;process-id&gt;\n                    &lt;uuid/&gt;\n                &lt;/process-id&gt;\n            &lt;/core-environment&gt;\n            &lt;recovery-environment socket-binding=\"txn-recovery-environment\" status-socket-binding=\"txn-status-manager\"/&gt;\n            &lt;coordinator-environment default-timeout=\"300\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:web:1.1\" default-virtual-server=\"default-host\" native=\"false\"&gt;\n            &lt;connector name=\"http\" protocol=\"HTTP/1.1\" scheme=\"http\" socket-binding=\"http\"/&gt;\n            &lt;virtual-server name=\"default-host\" enable-welcome-root=\"true\"&gt;\n                &lt;alias name=\"localhost\"/&gt;\n                &lt;alias name=\"example.com\"/&gt;\n            &lt;/virtual-server&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:webservices:1.1\"&gt;\n            &lt;modify-wsdl-address&gt;true&lt;/modify-wsdl-address&gt;\n            &lt;wsdl-host&gt;${jboss.bind.address:127.0.0.1}&lt;/wsdl-host&gt;\n            &lt;endpoint-config name=\"Standard-Endpoint-Config\"/&gt;\n            &lt;endpoint-config name=\"Recording-Endpoint-Config\"&gt;\n                &lt;pre-handler-chain name=\"recording-handlers\" protocol-bindings=\"##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM\"&gt;\n                    &lt;handler name=\"RecordingHandler\" class=\"org.jboss.ws.common.invocation.RecordingServerHandler\"/&gt;\n                &lt;/pre-handler-chain&gt;\n            &lt;/endpoint-config&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:weld:1.0\"/&gt;\n    &lt;/profile&gt;\n\n    &lt;interfaces&gt;\n        &lt;interface name=\"management\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address.management:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n        &lt;interface name=\"public\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n        &lt;interface name=\"unsecure\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address.unsecure:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n    &lt;/interfaces&gt;\n\n    &lt;socket-binding-group name=\"standard-sockets\" default-interface=\"public\" port-offset=\"${jboss.socket.binding.port-offset:0}\"&gt;\n        &lt;socket-binding name=\"management-native\" interface=\"management\" port=\"${jboss.management.native.port:9999}\"/&gt;\n        &lt;socket-binding name=\"management-http\" interface=\"management\" port=\"${jboss.management.http.port:9990}\"/&gt;\n        &lt;socket-binding name=\"management-https\" interface=\"management\" port=\"${jboss.management.https.port:9443}\"/&gt;\n        &lt;socket-binding name=\"ajp\" port=\"8009\"/&gt;\n        &lt;socket-binding name=\"http\" port=\"8080\"/&gt;\n        &lt;socket-binding name=\"https\" port=\"8443\"/&gt;\n        &lt;socket-binding name=\"osgi-http\" interface=\"management\" port=\"8090\"/&gt;\n        &lt;socket-binding name=\"remoting\" port=\"4447\"/&gt;\n        &lt;socket-binding name=\"txn-recovery-environment\" port=\"4712\"/&gt;\n        &lt;socket-binding name=\"txn-status-manager\" port=\"4713\"/&gt;\n        &lt;outbound-socket-binding name=\"mail-smtp\"&gt;\n            &lt;remote-destination host=\"localhost\" port=\"25\"/&gt;\n        &lt;/outbound-socket-binding&gt;\n    &lt;/socket-binding-group&gt;\n\n    &lt;deployments&gt;\n        &lt;deployment name=\"jboss-as-helloworld-jsf.war\" runtime-name=\"jboss-as-helloworld-jsf.war\"&gt;\n            &lt;content sha1=\"87e5656e4c0b15f7864df9e68328d290999a1144\"/&gt;\n        &lt;/deployment&gt;\n    &lt;/deployments&gt;\n&lt;/server&gt;\n</code></pre>\n\n<p>I'm using Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy: .org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found In Jboss's logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!</p>\n"},{"tags":["java","esper"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698144235,"post_id":77343009,"comment_id":136365102,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":29732556,"reputation":1,"user_id":22786779,"display_name":"Vikas M"},"score":0,"creation_date":1698209356,"post_id":77343112,"comment_id":136374607,"body_markdown":"Thank You for Answering. But with values how can I fetch my Data Store I would be needing the keys even right.","body":"Thank You for Answering. But with values how can I fetch my Data Store I would be needing the keys even right."},{"owner":{"account_id":29732556,"reputation":1,"user_id":22786779,"display_name":"Vikas M"},"score":0,"creation_date":1698209837,"post_id":77343112,"comment_id":136374636,"body_markdown":"Thank you For answering.\n\nPlease Ignore my previous Comment.\n\nI have gone through the provided example.\nWe are getting only the values but how we know for which keys they are mapped to.\n\nCan anyone provide me some working example?\n\nI want to get the values from Cache like Redis or EhCache etc.","body":"Thank you For answering.  Please Ignore my previous Comment.  I have gone through the provided example. We are getting only the values but how we know for which keys they are mapped to.  Can anyone provide me some working example?  I want to get the values from Cache like Redis or EhCache etc."}],"tags":[],"owner":{"account_id":4438616,"reputation":816,"user_id":3613754,"display_name":"user3613754"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043677,"creation_date":1698043677,"answer_id":77343112,"question_id":77343009,"body_markdown":"The keys will depend on the EPL query. When the query has, for example, &quot;...where key1=value&quot;, the keys that are passed will have the value. There is an example that comes with the distribution.\r\n","title":"Esper VirtualDataWindowLookup","body":"<p>The keys will depend on the EPL query. When the query has, for example, &quot;...where key1=value&quot;, the keys that are passed will have the value. There is an example that comes with the distribution.</p>\n"}],"owner":{"account_id":29732556,"reputation":1,"user_id":22786779,"display_name":"Vikas M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698043677,"creation_date":1698042216,"question_id":77343009,"body_markdown":"Hash anyone used Esper VirtualDataWindowLookup . I want to use Cache has my store and do not know how to integrate with VirtaulDataWindows.\r\n\r\nCan anyone help me in this regards\r\n\r\nI have tried implementing it but the keys are random","title":"Esper VirtualDataWindowLookup","body":"<p>Hash anyone used Esper VirtualDataWindowLookup . I want to use Cache has my store and do not know how to integrate with VirtaulDataWindows.</p>\n<p>Can anyone help me in this regards</p>\n<p>I have tried implementing it but the keys are random</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043677,"creation_date":1698043677,"answer_id":77343111,"question_id":77336085,"body_markdown":"In this case you should use\r\n\r\n    spring:\r\n      profiles:\r\n        active: some-env\r\nMore details about it you can find in [documentation][1]\r\n\r\nAbout \r\n\r\n    spring:\r\n      config:\r\n        activate:\r\n          on-profile: some-env\r\n\r\nAlso all that you need is described in [documentation][2] (can be used to mark a configuration file segment profile-specific.)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment","title":"Migrating to spring.config.activate.on-profile in Spring Boot 3","body":"<p>In this case you should use</p>\n<pre><code>spring:\n  profiles:\n    active: some-env\n</code></pre>\n<p>More details about it you can find in <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>About</p>\n<pre><code>spring:\n  config:\n    activate:\n      on-profile: some-env\n</code></pre>\n<p>Also all that you need is described in <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\" rel=\"nofollow noreferrer\">documentation</a> (can be used to mark a configuration file segment profile-specific.)</p>\n"}],"owner":{"account_id":3428378,"reputation":337,"user_id":2873514,"accept_rate":75,"display_name":"soso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698043677,"creation_date":1697893275,"question_id":77336085,"body_markdown":"I am in the process of migrating an old Spring Boot application from 2.3.5.RELEASE to version 3.1.2 and attempting to update a module that uses configuration file format to align with the new profile activation mechanism introduced in Spring Boot 2.4. Previously, I was using spring.profiles to activate different configurations based on the active profile. However, in the new version, it seems that spring.config.activate.on-profile is the recommended approach.\r\n\r\nHere is an excerpt from my original configuration file (src/test/resources/example/auto-loaded/config-file.yaml):\r\n\r\n```\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: default value\r\n\r\n---\r\nspring:\r\n  profiles: some-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-env\r\n\r\n---\r\nspring:\r\n  profiles: some-other-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-other-env\r\n    some-other-env-property: expected not to be loaded\r\n\r\n```\r\nI attempted to migrate this to the new format as follows:\r\n\r\n```\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: default value\r\n\r\n---\r\nspring:\r\n  config:\r\n    activate:\r\n      on-profile: some-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-env\r\n\r\n---\r\nspring:\r\n  config:\r\n    activate:\r\n      on-profile: some-other-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-other-env\r\n    some-other-env-property: expected not to be loaded\r\n\r\n```\r\nAfter updating the configuration file, I am not seeing the expected behavior when activating the profiles some-env and some-other-env. The properties don&#39;t seem to be loaded or overridden as they were before the migration.\r\n\r\nHere are my questions:\r\n\r\nIs my updated configuration file format correct according to the new profile activation mechanism in Spring Boot 3?\r\nAre there additional steps needed to ensure that the profile-specific configurations are loaded and applied correctly?\r\nmore details can be found here https://github.com/negadras/config-properties (test class DefaultConfigLoaderTest and DefaultConfigLoaderWithProfileTest)\r\n","title":"Migrating to spring.config.activate.on-profile in Spring Boot 3","body":"<p>I am in the process of migrating an old Spring Boot application from 2.3.5.RELEASE to version 3.1.2 and attempting to update a module that uses configuration file format to align with the new profile activation mechanism introduced in Spring Boot 2.4. Previously, I was using spring.profiles to activate different configurations based on the active profile. However, in the new version, it seems that spring.config.activate.on-profile is the recommended approach.</p>\n<p>Here is an excerpt from my original configuration file (src/test/resources/example/auto-loaded/config-file.yaml):</p>\n<pre><code>auto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: default value\n\n---\nspring:\n  profiles: some-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-env\n\n---\nspring:\n  profiles: some-other-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-other-env\n    some-other-env-property: expected not to be loaded\n\n</code></pre>\n<p>I attempted to migrate this to the new format as follows:</p>\n<pre><code>auto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: default value\n\n---\nspring:\n  config:\n    activate:\n      on-profile: some-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-env\n\n---\nspring:\n  config:\n    activate:\n      on-profile: some-other-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-other-env\n    some-other-env-property: expected not to be loaded\n\n</code></pre>\n<p>After updating the configuration file, I am not seeing the expected behavior when activating the profiles some-env and some-other-env. The properties don't seem to be loaded or overridden as they were before the migration.</p>\n<p>Here are my questions:</p>\n<p>Is my updated configuration file format correct according to the new profile activation mechanism in Spring Boot 3?\nAre there additional steps needed to ensure that the profile-specific configurations are loaded and applied correctly?\nmore details can be found here <a href=\"https://github.com/negadras/config-properties\" rel=\"nofollow noreferrer\">https://github.com/negadras/config-properties</a> (test class DefaultConfigLoaderTest and DefaultConfigLoaderWithProfileTest)</p>\n"},{"tags":["java","spring-boot","caching","configuration","hazelcast"],"comments":[{"owner":{"account_id":25660752,"reputation":1,"user_id":19426520,"display_name":"Ritesh Kumar"},"score":0,"creation_date":1697786622,"post_id":77329019,"comment_id":136325939,"body_markdown":"Even doing second level cache to false,  not resolving the issue","body":"Even doing second level cache to false,  not resolving the issue"}],"answers":[{"tags":[],"owner":{"account_id":5639587,"reputation":412,"user_id":4463900,"display_name":"Or&#231;un &#199;olak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043333,"creation_date":1698043333,"answer_id":77343085,"question_id":77329019,"body_markdown":"My guess is there is a version conflict. You seem to be using **hazelcast-4.1.6** according to exception stack trace\r\n\r\n\r\nThis pom.xml works for me. It should bring in hazelcast **5.X**. Just make sure that you are **not using** hazelcast **4.X** somehow\r\n\r\n```xml\r\n&lt;parent&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n  &lt;version&gt;3.1.3&lt;/version&gt;\r\n  &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;\r\n```\r\n\r\nAnd\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n  &lt;artifactId&gt;hazelcast-hibernate53&lt;/artifactId&gt;\r\n  &lt;version&gt;5.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Node failed to start! HazelCast","body":"<p>My guess is there is a version conflict. You seem to be using <strong>hazelcast-4.1.6</strong> according to exception stack trace</p>\n<p>This pom.xml works for me. It should bring in hazelcast <strong>5.X</strong>. Just make sure that you are <strong>not using</strong> hazelcast <strong>4.X</strong> somehow</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n  &lt;version&gt;3.1.3&lt;/version&gt;\n  &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>And</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n  &lt;artifactId&gt;hazelcast-hibernate53&lt;/artifactId&gt;\n  &lt;version&gt;5.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":25660752,"reputation":1,"user_id":19426520,"display_name":"Ritesh Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1698043333,"creation_date":1697786513,"question_id":77329019,"body_markdown":"`\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [com/prospecta/mdo/notification/config/MultiTenantDatasourceConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat com.prospecta.mdo.notification.MdoNotificationApplication.main(MdoNotificationApplication.java:33) ~[classes/:na]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\t... 15 common frames omitted\r\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.getService(SessionFactoryServiceRegistryImpl.java:98) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:246) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\t... 19 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Cache provider not started\r\n\tat org.hibernate.cache.spi.AbstractRegionFactory.verifyStarted(AbstractRegionFactory.java:65) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.spi.support.RegionFactoryTemplate.buildTimestampsRegion(RegionFactoryTemplate.java:66) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.internal.EnabledCaching.&lt;init&gt;(EnabledCaching.java:85) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:33) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:24) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.spi.SessionFactoryServiceInitiator.initiateService(SessionFactoryServiceInitiator.java:30) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.initiateService(SessionFactoryServiceRegistryImpl.java:62) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 28 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Node failed to start!\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceImpl.&lt;init&gt;(HazelcastInstanceImpl.java:125) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.constructHazelcastInstance(HazelcastInstanceFactory.java:211) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:190) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:128) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.core.Hazelcast.newHazelcastInstance(Hazelcast.java:57) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.hibernate.instance.HazelcastInstanceLoader.loadInstance(HazelcastInstanceLoader.java:79) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\r\n\tat com.hazelcast.hibernate.AbstractHazelcastCacheRegionFactory.prepareForUse(AbstractHazelcastCacheRegionFactory.java:147) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\r\n\tat org.hibernate.cache.spi.AbstractRegionFactory.start(AbstractRegionFactory.java:91) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.internal.EnabledCaching.&lt;init&gt;(EnabledCaching.java:82) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 33 common frames omitted\r\n\r\n`\r\n\r\n\r\nPropeties file\r\n\r\nspring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER\r\n\r\nspring.jpa.properties.hibernate.cache.use_second_level_cache=true\r\n\r\nspring.jpa.properties.javax.persistence.sharedCache.mode=ENABLE_SELECTIVE\r\n\r\nspring.jpa.properties.hibernate.cache.use_query_cache=true\r\n\r\nspring.jpa.properties.hibernate.cache.region.factory_class=com.hazelcast.hibernate.HazelcastCacheRegionFactory\r\n\r\nMy application is not getting up\r\n\r\n","title":"Node failed to start! HazelCast","body":"<p>`\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [com/prospecta/mdo/notification/config/MultiTenantDatasourceConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\nat com.prospecta.mdo.notification.MdoNotificationApplication.main(MdoNotificationApplication.java:33) ~[classes/:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\n... 15 common frames omitted\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.getService(SessionFactoryServiceRegistryImpl.java:98) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:246) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\n... 19 common frames omitted\nCaused by: java.lang.IllegalStateException: Cache provider not started\nat org.hibernate.cache.spi.AbstractRegionFactory.verifyStarted(AbstractRegionFactory.java:65) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.spi.support.RegionFactoryTemplate.buildTimestampsRegion(RegionFactoryTemplate.java:66) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.internal.EnabledCaching.(EnabledCaching.java:85) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:33) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:24) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.spi.SessionFactoryServiceInitiator.initiateService(SessionFactoryServiceInitiator.java:30) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.initiateService(SessionFactoryServiceRegistryImpl.java:62) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n... 28 common frames omitted\nCaused by: java.lang.IllegalStateException: Node failed to start!\nat com.hazelcast.instance.impl.HazelcastInstanceImpl.(HazelcastInstanceImpl.java:125) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.constructHazelcastInstance(HazelcastInstanceFactory.java:211) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:190) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:128) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.core.Hazelcast.newHazelcastInstance(Hazelcast.java:57) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.hibernate.instance.HazelcastInstanceLoader.loadInstance(HazelcastInstanceLoader.java:79) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\nat com.hazelcast.hibernate.AbstractHazelcastCacheRegionFactory.prepareForUse(AbstractHazelcastCacheRegionFactory.java:147) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\nat org.hibernate.cache.spi.AbstractRegionFactory.start(AbstractRegionFactory.java:91) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.internal.EnabledCaching.(EnabledCaching.java:82) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n... 33 common frames omitted</p>\n<p>`</p>\n<p>Propeties file</p>\n<p>spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER</p>\n<p>spring.jpa.properties.hibernate.cache.use_second_level_cache=true</p>\n<p>spring.jpa.properties.javax.persistence.sharedCache.mode=ENABLE_SELECTIVE</p>\n<p>spring.jpa.properties.hibernate.cache.use_query_cache=true</p>\n<p>spring.jpa.properties.hibernate.cache.region.factory_class=com.hazelcast.hibernate.HazelcastCacheRegionFactory</p>\n<p>My application is not getting up</p>\n"},{"tags":["java","user-interface","javafx","scenebuilder","javafx-11"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1697796148,"post_id":77329935,"comment_id":136327635,"body_markdown":"You may have a better chance of assistance if you provide a [mcve] of what you already have, even if it doesn’t currently function as you wish it to.","body":"You may have a better chance of assistance if you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you already have, even if it doesn’t currently function as you wish it to."},{"owner":{"account_id":4498992,"reputation":735,"user_id":3658055,"display_name":"Birdasaur"},"score":1,"creation_date":1697819943,"post_id":77329935,"comment_id":136332046,"body_markdown":"To get the desired effect I can see two paths... Create a custom control or extend the JavaFX Menu Nodes. Creating a custom control will present the challenge of getting the overlay logic correct. Extending the Menu nodes will be a matter of setting the graphic assigned to each MenuItem to a small custom node which is reactive in the way you want. Both ways seem like the same amount of total work, though admittedly reusing the Menu components probably gets you a functional though incomplete capability quicker.","body":"To get the desired effect I can see two paths... Create a custom control or extend the JavaFX Menu Nodes. Creating a custom control will present the challenge of getting the overlay logic correct. Extending the Menu nodes will be a matter of setting the graphic assigned to each MenuItem to a small custom node which is reactive in the way you want. Both ways seem like the same amount of total work, though admittedly reusing the Menu components probably gets you a functional though incomplete capability quicker."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1697825908,"post_id":77329935,"comment_id":136333006,"body_markdown":"See if any of the ideas [here](https://stackoverflow.com/questions/76420533/how-to-slide-a-vbox-open-and-close-in-javafx/76424415#76424415) can help.","body":"See if any of the ideas <a href=\"https://stackoverflow.com/questions/76420533/how-to-slide-a-vbox-open-and-close-in-javafx/76424415#76424415\">here</a> can help."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1697859029,"creation_date":1697842912,"answer_id":77334133,"question_id":77329935,"body_markdown":"Simplistically, you can use a [`MenuButton`][1] with a [`popupSide`][2] of `Side.TOP`.  *It may not be exactly what you are after.* In particular, there is no &quot;Toggle when Hovered&quot; functionality.\r\n\r\nThe example does not *exactly* match how the Windows button and menus are working.  The Windows start button has lots of stuff going on (and I think it can also be configured to work different ways).  You probably don&#39;t want all of that functionality.  For example, the Windows button displays two menus side by side on pressing the button, one with the icons for various actions and another with an alphabetical application list.  The UI is optimized to be able to display both unless you hover on the icons on left side, in which case it removes the right alphabetical list and displays the text for the icons instead.  But if you only need to display one menu list (likely) then you may as well display both the icons and text for the left side menu at the same time, which is what the example I provided does. \r\n\r\n[![MenuButton][3]][3]\r\n\r\nMy example is in code, but most of the stuff will translate to FXML and SceneBuilder if you wish to use that.  Most of the icons I used are provided in [this question](https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915).\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Side;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.MenuButton;\r\n    import javafx.scene.control.MenuItem;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.paint.*;\r\n    import javafx.stage.Stage;\r\n    import org.jetbrains.annotations.NotNull;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    public class MenuApp extends Application {\r\n        private static final String CSS = &quot;data:text/css,.root { -fx-base: #3c3f4a; -fx-font-size: 18px; }&quot;;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            StackPane content = new StackPane();\r\n            content.setPrefSize(400, 300);\r\n            content.setBackground(createGradient());\r\n    \r\n            MenuButton windowsMenuButton = new MenuButton(\r\n                    null,\r\n                    createImageView(&quot;Dragon-icon.png&quot;)\r\n            );\r\n            MenuItem documents = new MenuItem(\r\n                    &quot;Documents&quot;,\r\n                    createImageView(&quot;Medusa-icon.png&quot;)\r\n            );\r\n            MenuItem pictures = new MenuItem(\r\n                    &quot;Pictures&quot;,\r\n                    createImageView(&quot;Unicorn-icon.png&quot;)\r\n            );\r\n            MenuItem settings = new MenuItem(\r\n                    &quot;Settings&quot;,\r\n                    createImageView(&quot;Treant-icon.png&quot;)\r\n            );\r\n            MenuItem power = new MenuItem(\r\n                    &quot;Power&quot;,\r\n                    createImageView(&quot;spaceShip.png&quot;)\r\n            );\r\n            windowsMenuButton.getItems().addAll(documents, pictures, settings, power);\r\n            windowsMenuButton.setPopupSide(Side.TOP);\r\n\r\n            HBox bottomBar = new HBox(windowsMenuButton);\r\n    \r\n            BorderPane borderPane = new BorderPane();\r\n            borderPane.setCenter(content);\r\n            borderPane.setBottom(bottomBar);\r\n            borderPane.getStylesheets().add(CSS);\r\n    \r\n            stage.setScene(new Scene(borderPane));\r\n            stage.show();\r\n        }\r\n    \r\n        @NotNull\r\n        private static Background createGradient() {\r\n            return Background.fill(\r\n                    new LinearGradient(\r\n                            0, 0, 1, 0,\r\n                            true,\r\n                            CycleMethod.NO_CYCLE,\r\n                            new Stop(0, Color.LIGHTBLUE),\r\n                            new Stop(1, Color.PALEGREEN)\r\n                    )\r\n            );\r\n        }\r\n    \r\n        @NotNull\r\n        private static ImageView createImageView(String iconFilename) {\r\n            return new ImageView(\r\n                    new Image(\r\n                            Objects.requireNonNull(\r\n                                    MenuApp.class.getResource(\r\n                                            iconFilename\r\n                                    )\r\n                            ).toExternalForm(),\r\n                            48, 48, true, true\r\n                    )\r\n            );\r\n        }\r\n    }\r\n\r\nWhen I tried this, there was a slight bug for JavaFX 21, OS X, in that the pop-up menu did not appear in the correct location the very first time I clicked on it (it displayed fine on subsequent clicks).  Your outcome may vary depending on your JavaFX version.\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html\r\n  [2]: https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html#popupSideProperty()\r\n  [3]: https://i.stack.imgur.com/hClU0.png\r\n","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p>Simplistically, you can use a <a href=\"https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html\" rel=\"nofollow noreferrer\"><code>MenuButton</code></a> with a <a href=\"https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html#popupSideProperty()\" rel=\"nofollow noreferrer\"><code>popupSide</code></a> of <code>Side.TOP</code>.  <em>It may not be exactly what you are after.</em> In particular, there is no &quot;Toggle when Hovered&quot; functionality.</p>\n<p>The example does not <em>exactly</em> match how the Windows button and menus are working.  The Windows start button has lots of stuff going on (and I think it can also be configured to work different ways).  You probably don't want all of that functionality.  For example, the Windows button displays two menus side by side on pressing the button, one with the icons for various actions and another with an alphabetical application list.  The UI is optimized to be able to display both unless you hover on the icons on left side, in which case it removes the right alphabetical list and displays the text for the icons instead.  But if you only need to display one menu list (likely) then you may as well display both the icons and text for the left side menu at the same time, which is what the example I provided does.</p>\n<p><a href=\"https://i.stack.imgur.com/hClU0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hClU0.png\" alt=\"MenuButton\" /></a></p>\n<p>My example is in code, but most of the stuff will translate to FXML and SceneBuilder if you wish to use that.  Most of the icons I used are provided in <a href=\"https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915\">this question</a>.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Side;\nimport javafx.scene.Scene;\nimport javafx.scene.control.MenuButton;\nimport javafx.scene.control.MenuItem;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.*;\nimport javafx.stage.Stage;\nimport org.jetbrains.annotations.NotNull;\n\nimport java.util.Objects;\n\npublic class MenuApp extends Application {\n    private static final String CSS = &quot;data:text/css,.root { -fx-base: #3c3f4a; -fx-font-size: 18px; }&quot;;\n\n    @Override\n    public void start(Stage stage) {\n        StackPane content = new StackPane();\n        content.setPrefSize(400, 300);\n        content.setBackground(createGradient());\n\n        MenuButton windowsMenuButton = new MenuButton(\n                null,\n                createImageView(&quot;Dragon-icon.png&quot;)\n        );\n        MenuItem documents = new MenuItem(\n                &quot;Documents&quot;,\n                createImageView(&quot;Medusa-icon.png&quot;)\n        );\n        MenuItem pictures = new MenuItem(\n                &quot;Pictures&quot;,\n                createImageView(&quot;Unicorn-icon.png&quot;)\n        );\n        MenuItem settings = new MenuItem(\n                &quot;Settings&quot;,\n                createImageView(&quot;Treant-icon.png&quot;)\n        );\n        MenuItem power = new MenuItem(\n                &quot;Power&quot;,\n                createImageView(&quot;spaceShip.png&quot;)\n        );\n        windowsMenuButton.getItems().addAll(documents, pictures, settings, power);\n        windowsMenuButton.setPopupSide(Side.TOP);\n\n        HBox bottomBar = new HBox(windowsMenuButton);\n\n        BorderPane borderPane = new BorderPane();\n        borderPane.setCenter(content);\n        borderPane.setBottom(bottomBar);\n        borderPane.getStylesheets().add(CSS);\n\n        stage.setScene(new Scene(borderPane));\n        stage.show();\n    }\n\n    @NotNull\n    private static Background createGradient() {\n        return Background.fill(\n                new LinearGradient(\n                        0, 0, 1, 0,\n                        true,\n                        CycleMethod.NO_CYCLE,\n                        new Stop(0, Color.LIGHTBLUE),\n                        new Stop(1, Color.PALEGREEN)\n                )\n        );\n    }\n\n    @NotNull\n    private static ImageView createImageView(String iconFilename) {\n        return new ImageView(\n                new Image(\n                        Objects.requireNonNull(\n                                MenuApp.class.getResource(\n                                        iconFilename\n                                )\n                        ).toExternalForm(),\n                        48, 48, true, true\n                )\n        );\n    }\n}\n</code></pre>\n<p>When I tried this, there was a slight bug for JavaFX 21, OS X, in that the pop-up menu did not appear in the correct location the very first time I clicked on it (it displayed fine on subsequent clicks).  Your outcome may vary depending on your JavaFX version.</p>\n"},{"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698042803,"creation_date":1698042803,"answer_id":77343057,"question_id":77329935,"body_markdown":"**Solution** \r\n\r\nStep 1:\r\nCreate the complete view inclusive the opened content as scene. Use a BorderLayout as root node, put a vbox into left and into center. Put the content and the menu into this vboxes. \r\n\r\nStep 2:\r\nBoth vboxes need an ID / must be annotated with @FXML, so that you can access them in the controller.\r\n\r\nStep 3: \r\nOn initialize, hide the content-vbox and set an onHoverListener to the menu-vbox. I think this is done like this \r\n`menuVbox.hoverProperty().addListener(...)`.\r\n\r\nStep 4: \r\nAdd functionality to the listener. On hover, show the element, otherwise hide the element. \r\n\r\nTip:\r\nUse computed sizes. Check if the stages resizes automatically. If not, resize the stage in the listener manually.","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p><strong>Solution</strong></p>\n<p>Step 1:\nCreate the complete view inclusive the opened content as scene. Use a BorderLayout as root node, put a vbox into left and into center. Put the content and the menu into this vboxes.</p>\n<p>Step 2:\nBoth vboxes need an ID / must be annotated with @FXML, so that you can access them in the controller.</p>\n<p>Step 3:\nOn initialize, hide the content-vbox and set an onHoverListener to the menu-vbox. I think this is done like this\n<code>menuVbox.hoverProperty().addListener(...)</code>.</p>\n<p>Step 4:\nAdd functionality to the listener. On hover, show the element, otherwise hide the element.</p>\n<p>Tip:\nUse computed sizes. Check if the stages resizes automatically. If not, resize the stage in the listener manually.</p>\n"}],"owner":{"account_id":29580923,"reputation":9,"user_id":22670733,"display_name":"Haris Veerabadran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1698042803,"creation_date":1697795400,"question_id":77329935,"body_markdown":"So in windows 10 you have the windows menu with the icons on the left side:\r\n\r\n[![left][1]][1]\r\n\r\nWhen Hover the left side the menu expands and text is show\r\n\r\n[![expanded][2]][2]\r\n\r\nThe expanded part is overlaying the content. \r\n\r\nIn my application I want to create that kind of design using Javafx and SceneBuilder.  \r\n\r\nI managed to design the button like when I hover the button it will expand and show the text but, I don&#39;t know how to expand the whole pane which contain the button. I put my buttons in VBox and give the same condition which I gave for my button expand design but, it doesn&#39;t work.\r\n\r\nAny help would be appreciated, especially examples.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XFmce.png\r\n  [2]: https://i.stack.imgur.com/Lu1RE.png","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p>So in windows 10 you have the windows menu with the icons on the left side:</p>\n<p><a href=\"https://i.stack.imgur.com/XFmce.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XFmce.png\" alt=\"left\" /></a></p>\n<p>When Hover the left side the menu expands and text is show</p>\n<p><a href=\"https://i.stack.imgur.com/Lu1RE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lu1RE.png\" alt=\"expanded\" /></a></p>\n<p>The expanded part is overlaying the content.</p>\n<p>In my application I want to create that kind of design using Javafx and SceneBuilder.</p>\n<p>I managed to design the button like when I hover the button it will expand and show the text but, I don't know how to expand the whole pane which contain the button. I put my buttons in VBox and give the same condition which I gave for my button expand design but, it doesn't work.</p>\n<p>Any help would be appreciated, especially examples.</p>\n"},{"tags":["java","spring-boot","redis","redis-sentinel","redisson"],"comments":[{"owner":{"account_id":8794729,"reputation":15307,"user_id":6572971,"display_name":"Alien"},"score":0,"creation_date":1544172471,"post_id":53665923,"comment_id":94189738,"body_markdown":".addSentinelAddress(&quot;redis://localhost:26379&quot;)\n                    .addSentinelAddress(&quot;redis://localhost:26379&quot;); both lines are same..change 2nd line port to 26378","body":".addSentinelAddress(&quot;redis://localhost:26379&quot;)                     .addSentinelAddress(&quot;redis://localhost:26379&quot;); both lines are same..change 2nd line port to 26378"},{"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"score":0,"creation_date":1544173129,"post_id":53665923,"comment_id":94190061,"body_markdown":"that&#39;s a typo in posting the question, I tried using different ports, different formats like - localhost:26379, 127.0.0.1:26379, redis://127.0.0.1:26379, none works","body":"that&#39;s a typo in posting the question, I tried using different ports, different formats like - localhost:26379, 127.0.0.1:26379, redis://127.0.0.1:26379, none works"}],"answers":[{"comments":[{"owner":{"account_id":399098,"reputation":10383,"user_id":764206,"display_name":"Nikita Koksharov"},"score":0,"creation_date":1546016123,"post_id":53737171,"comment_id":94761138,"body_markdown":"https://github.com/redisson/redisson/issues/1736 issue already fixed in 2.15.0 / 3.10.0 versions.","body":"<a href=\"https://github.com/redisson/redisson/issues/1736\" rel=\"nofollow noreferrer\">github.com/redisson/redisson/issues/1736</a> issue already fixed in 2.15.0 / 3.10.0 versions."},{"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"score":1,"creation_date":1546329130,"post_id":53737171,"comment_id":94825245,"body_markdown":"great to hear, would have been great if you can cater to issues on github first and then on SO.","body":"great to hear, would have been great if you can cater to issues on github first and then on SO."}],"tags":[],"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1544595671,"creation_date":1544595671,"answer_id":53737171,"question_id":53665923,"body_markdown":"Redisson doesn&#39;t seem to be working with localhost addresses. When I replaced the sentinel nodes addresses with the ones hosted on AWS, it worked fine.\r\n\r\nRedisson, in my opinion, is a very immature client. Consider using lettuce or jedis.\r\n\r\nSee the bug filed at https://github.com/redisson/redisson/issues/1736\r\nwhich doesn&#39;t allow it to shut down.\r\n\r\nMost of the problems I faced were when I used the sentinel mode. Cluster mode I have not tried. Works fine in single mode.\r\n\r\nAlso, they don&#39;t cater to bugs or issues filed on github for months which is obvious as they have a pro and paid version, so you are on your own.\r\n\r\nI won&#39;t recommend using Redisson as of now.","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>Redisson doesn't seem to be working with localhost addresses. When I replaced the sentinel nodes addresses with the ones hosted on AWS, it worked fine.</p>\n\n<p>Redisson, in my opinion, is a very immature client. Consider using lettuce or jedis.</p>\n\n<p>See the bug filed at <a href=\"https://github.com/redisson/redisson/issues/1736\" rel=\"nofollow noreferrer\">https://github.com/redisson/redisson/issues/1736</a>\nwhich doesn't allow it to shut down.</p>\n\n<p>Most of the problems I faced were when I used the sentinel mode. Cluster mode I have not tried. Works fine in single mode.</p>\n\n<p>Also, they don't cater to bugs or issues filed on github for months which is obvious as they have a pro and paid version, so you are on your own.</p>\n\n<p>I won't recommend using Redisson as of now.</p>\n"},{"tags":[],"owner":{"account_id":11624596,"reputation":1170,"user_id":8514772,"display_name":"Pradipta Sarma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618479891,"creation_date":1618479891,"answer_id":67106086,"question_id":53665923,"body_markdown":"Make sure you run both `redis-server` as well as `redis-sentinal &lt;config&gt;`.\r\nOnce done, check which port sentinal is running at. It could also be 5000, it was in my case. Then pass `&quot;redis://localhost:5000&quot;` to `addSentinelAddress`.","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>Make sure you run both <code>redis-server</code> as well as <code>redis-sentinal &lt;config&gt;</code>.\nOnce done, check which port sentinal is running at. It could also be 5000, it was in my case. Then pass <code>&quot;redis://localhost:5000&quot;</code> to <code>addSentinelAddress</code>.</p>\n"},{"tags":[],"owner":{"account_id":399098,"reputation":10383,"user_id":764206,"display_name":"Nikita Koksharov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698042451,"creation_date":1698042451,"answer_id":77343025,"question_id":53665923,"body_markdown":"You need to set `checkSentinelsList = false` setting.\r\n\r\n","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>You need to set <code>checkSentinelsList = false</code> setting.</p>\n"}],"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5321,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":53737171,"answer_count":3,"score":0,"last_activity_date":1698042451,"creation_date":1544171970,"question_id":53665923,"body_markdown":"I am using Sentinel mode for Redis. I am using Redisson Client version 3.9.1\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.redisson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;redisson-spring-data-20&lt;/artifactId&gt;\r\n            &lt;version&gt;${redisson-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.redisson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;redisson&lt;/artifactId&gt;\r\n            &lt;version&gt;${redisson-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nThe configuration of Sentinel using Redisson:\r\n\r\n    @EnableCaching\r\n    public class RedisCache {\r\n    \r\n        @Autowired\r\n        private ObjectMapper objectMapper;\r\n    \r\n        @Bean\r\n        public RedissonClient redissonClient() {\r\n            Config config = new Config();\r\n            config.setCodec(new JsonJacksonCodec(objectMapper));\r\n    \r\n            config.useSentinelServers()\r\n                        .setMasterName(&quot;redis-master&quot;)\r\n                        .addSentinelAddress(&quot;redis://localhost:26378&quot;)\r\n                        .addSentinelAddress(&quot;redis://localhost:26379&quot;);\r\n    \r\n            return Redisson.create(config);\r\n        }\r\n    \r\n        @Bean\r\n        public RedissonConnectionFactory redissonConnectionFactory(RedissonClient redisson) {\r\n            return new RedissonConnectionFactory(redisson);\r\n        }\r\n    }\r\n\r\n\r\nI am running two sentinel servers and one Redis master with no slave.\r\nThis is just a setup on my local environment.  \r\nOutput of some commands:  \r\n\r\n    redis-cli -p 26379\r\n    127.0.0.1:26379&gt; SENTINEL get-master-addr-by-name redis-master\r\n    1) &quot;127.0.0.1&quot;\r\n    2) &quot;6379&quot;\r\n    redis-cli -p 26378\r\n    127.0.0.1:26378&gt; SENTINEL get-master-addr-by-name redis-master\r\n    1) &quot;127.0.0.1&quot;\r\n    2) &quot;6379&quot;\r\n\r\nWhenever I am running my Spring Boot Application, I get the following error:\r\n\r\n \r\n\r\n           Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;redissonClient&#39; defined in class path resource [xxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method &#39;redissonClient&#39; threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\r\n    \r\n    ......\r\n    \r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:317)\r\n                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:315)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:204)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:226)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:214)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans (ServletContextInitializerBeans.java:91)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt; (ServletContextInitializerBeans.java:80)\r\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans (ServletWebServerApplicationContext.java:250)\r\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize (ServletWebServerApplicationContext.java:237)\r\n                at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup (TomcatStarter.java:54)\r\n                at org.apache.catalina.core.StandardContext.startInternal (StandardContext.java:5245)\r\n                at org.apache.catalina.util.LifecycleBase.start (LifecycleBase.java:150)\r\n                at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1420)\r\n                at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1410)\r\n                at java.util.concurrent.FutureTask.run (FutureTask.java:266)\r\n                at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)\r\n                at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)\r\n                at java.lang.Thread.run (Thread.java:748)\r\n            [INFO] ------------------------------------------------------------------------\r\n            [INFO] BUILD FAILURE\r\n            [INFO] ------------------------------------------------------------------------\r\n            [INFO] Total time: 22.566 s\r\n            [INFO] Finished at: 2018-12-07T13:44:14+05:30\r\n            [INFO] ------------------------------------------------------------------------\r\n            [ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) on project xxx: An exception occurred while running. null: InvocationTargetException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat: Error creating bean with name &#39;servletEndpointRegistrar&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/endpoint/web/ServletEndpointManagementContextConfiguration$WebMvcServletEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.ServletEndpointRegistrar]: Factory method &#39;servletEndpointRegistrar&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;healthEndpoint&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/health/HealthEndpointConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.health.HealthEndpoint]: Factory method &#39;healthEndpoint&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.actuate.autoconfigure.redis.RedisHealthIndicatorConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;redissonConnectionFactory&#39; defined in class path resource [xxxxxxx/cache/impl/redis/config/RedisCache.class]: Unsatisfied dependency expressed through method &#39;redissonConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;redissonClient&#39; defined in class path resource [xxxxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method &#39;redissonClient&#39; threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\r\n\r\nHow do I resolve this error?\r\n\r\nPS: I have tried master-slave configuration also, with one sentinel attached to the host and other one attached to the slave, but the error remains the same. I have tried sentinels running on different local machines with different private IPs, but the error remains the same.\r\nTried with 3 sentinel servers, no benefits.\r\n\r\n","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>I am using Sentinel mode for Redis. I am using Redisson Client version 3.9.1</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n        &lt;artifactId&gt;redisson-spring-data-20&lt;/artifactId&gt;\n        &lt;version&gt;${redisson-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n        &lt;artifactId&gt;redisson&lt;/artifactId&gt;\n        &lt;version&gt;${redisson-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>The configuration of Sentinel using Redisson:</p>\n\n<pre><code>@EnableCaching\npublic class RedisCache {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Bean\n    public RedissonClient redissonClient() {\n        Config config = new Config();\n        config.setCodec(new JsonJacksonCodec(objectMapper));\n\n        config.useSentinelServers()\n                    .setMasterName(\"redis-master\")\n                    .addSentinelAddress(\"redis://localhost:26378\")\n                    .addSentinelAddress(\"redis://localhost:26379\");\n\n        return Redisson.create(config);\n    }\n\n    @Bean\n    public RedissonConnectionFactory redissonConnectionFactory(RedissonClient redisson) {\n        return new RedissonConnectionFactory(redisson);\n    }\n}\n</code></pre>\n\n<p>I am running two sentinel servers and one Redis master with no slave.\nThis is just a setup on my local environment.<br>\nOutput of some commands:  </p>\n\n<pre><code>redis-cli -p 26379\n127.0.0.1:26379&gt; SENTINEL get-master-addr-by-name redis-master\n1) \"127.0.0.1\"\n2) \"6379\"\nredis-cli -p 26378\n127.0.0.1:26378&gt; SENTINEL get-master-addr-by-name redis-master\n1) \"127.0.0.1\"\n2) \"6379\"\n</code></pre>\n\n<p>Whenever I am running my Spring Boot Application, I get the following error:</p>\n\n<pre><code>       Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [xxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\n\n......\n\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:317)\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:315)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:204)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:226)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:214)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans (ServletContextInitializerBeans.java:91)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt; (ServletContextInitializerBeans.java:80)\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans (ServletWebServerApplicationContext.java:250)\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize (ServletWebServerApplicationContext.java:237)\n            at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup (TomcatStarter.java:54)\n            at org.apache.catalina.core.StandardContext.startInternal (StandardContext.java:5245)\n            at org.apache.catalina.util.LifecycleBase.start (LifecycleBase.java:150)\n            at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1420)\n            at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1410)\n            at java.util.concurrent.FutureTask.run (FutureTask.java:266)\n            at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)\n            at java.lang.Thread.run (Thread.java:748)\n        [INFO] ------------------------------------------------------------------------\n        [INFO] BUILD FAILURE\n        [INFO] ------------------------------------------------------------------------\n        [INFO] Total time: 22.566 s\n        [INFO] Finished at: 2018-12-07T13:44:14+05:30\n        [INFO] ------------------------------------------------------------------------\n        [ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) on project xxx: An exception occurred while running. null: InvocationTargetException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat: Error creating bean with name 'servletEndpointRegistrar' defined in class path resource [org/springframework/boot/actuate/autoconfigure/endpoint/web/ServletEndpointManagementContextConfiguration$WebMvcServletEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.ServletEndpointRegistrar]: Factory method 'servletEndpointRegistrar' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'healthEndpoint' defined in class path resource [org/springframework/boot/actuate/autoconfigure/health/HealthEndpointConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.health.HealthEndpoint]: Factory method 'healthEndpoint' threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.actuate.autoconfigure.redis.RedisHealthIndicatorConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConnectionFactory' defined in class path resource [xxxxxxx/cache/impl/redis/config/RedisCache.class]: Unsatisfied dependency expressed through method 'redissonConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [xxxxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\n</code></pre>\n\n<p>How do I resolve this error?</p>\n\n<p>PS: I have tried master-slave configuration also, with one sentinel attached to the host and other one attached to the slave, but the error remains the same. I have tried sentinels running on different local machines with different private IPs, but the error remains the same.\nTried with 3 sentinel servers, no benefits.</p>\n"},{"tags":["java","android","performance","kotlin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697465669,"post_id":77302697,"comment_id":136279913,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1697467327,"post_id":77302697,"comment_id":136280281,"body_markdown":"`When I opens any activity` Any? You said you had only one activity. Dont understand.","body":"<code>When I opens any activity</code> Any? You said you had only one activity. Dont understand."},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697533552,"post_id":77302697,"comment_id":136288612,"body_markdown":"Yes, I&#39;ve single activity but I&#39;m trying to share an image from one of my fragment and for that I need to start an activity","body":"Yes, I&#39;ve single activity but I&#39;m trying to share an image from one of my fragment and for that I need to start an activity"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697548288,"post_id":77302697,"comment_id":136291574,"body_markdown":"Which activity? Your activity is already running. Your fragment is in an activity that runs. Still don&#39;t understand.","body":"Which activity? Your activity is already running. Your fragment is in an activity that runs. Still don&#39;t understand."},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697563547,"post_id":77302697,"comment_id":136294655,"body_markdown":"Yes, my activity is already running and my fragments are within this activity and as per the requirement I&#39;m trying to open another activity from one of my fragment","body":"Yes, my activity is already running and my fragments are within this activity and as per the requirement I&#39;m trying to open another activity from one of my fragment"}],"answers":[{"comments":[{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697533787,"post_id":77303202,"comment_id":136288654,"body_markdown":"Thanks for your valuable answer.\nLet me try this and will get back to you","body":"Thanks for your valuable answer. Let me try this and will get back to you"},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697538518,"post_id":77303202,"comment_id":136289643,"body_markdown":"I&#39;ve integrated leak canary and it&#39;s not showing any critical voilations which can impact this sluggish behavior of my app","body":"I&#39;ve integrated leak canary and it&#39;s not showing any critical voilations which can impact this sluggish behavior of my app"},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697538569,"post_id":77303202,"comment_id":136289652,"body_markdown":"I&#39;ve also turned on the proguard to obfuscate but the issue is still there","body":"I&#39;ve also turned on the proguard to obfuscate but the issue is still there"},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697538628,"post_id":77303202,"comment_id":136289664,"body_markdown":"I cannot move my code to separate activities its a production code and my app is already live.\nUnable to do these big updates","body":"I cannot move my code to separate activities its a production code and my app is already live. Unable to do these big updates"},{"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"score":0,"creation_date":1697541257,"post_id":77303202,"comment_id":136290161,"body_markdown":"Then I would go with more low level profiling tools. In the past there was ```MAT```, but nowadays it is integrated within a studio. Please take a look specific android official docs about memory profiling (https://developer.android.com/studio/profile/) - you have to figure out where is the most memory is consumed which will give you a clue where are possible problems might be. Also take a look on method tracing ```Debug.startMethodTracing()``` to further narrow down your bottle necks in performance.","body":"Then I would go with more low level profiling tools. In the past there was <code>MAT</code>, but nowadays it is integrated within a studio. Please take a look specific android official docs about memory profiling (<a href=\"https://developer.android.com/studio/profile/\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile</a>) - you have to figure out where is the most memory is consumed which will give you a clue where are possible problems might be. Also take a look on method tracing <code>Debug.startMethodTracing()</code> to further narrow down your bottle necks in performance."}],"tags":[],"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697469988,"creation_date":1697469988,"answer_id":77303202,"question_id":77302697,"body_markdown":"Please turn on ```StrictMode``` and add ```LeakCanary``` to evaluate the most obvious issues with your performance. \r\n\r\nAfter that try to to turn on Proguard to obfuscate and strip code from not relevant things. \r\n\r\nIf performance still will be an issue, consider to move code into separate activities or to try ```compose``` if you have specific requirements. ","title":"In Single Activity Architecture, If I start an activity multiple times from any of my fragment, my app is becoming slow","body":"<p>Please turn on <code>StrictMode</code> and add <code>LeakCanary</code> to evaluate the most obvious issues with your performance.</p>\n<p>After that try to to turn on Proguard to obfuscate and strip code from not relevant things.</p>\n<p>If performance still will be an issue, consider to move code into separate activities or to try <code>compose</code> if you have specific requirements.</p>\n"}],"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698042330,"creation_date":1697465533,"question_id":77302697,"body_markdown":"I&#39;ve an activity in which I&#39;ve almost 20 fragments. App is working perfectly fine but :\r\n\r\n1. When I opens any activity (either implicit or explicit) from a fragment and press back, my app is gradually becoming slow (UI is lagging mostly on scrolling). \r\n\r\nSluggish behavior of the app increases on the basis of repeating the step 1 again &amp; again \r\n \r\nWhile doing RCA, I was thinking that this might be happening because of some specific heavy activity or fragment so, I&#39;ve created a sample activity which I&#39;ve tried opening from different fragments but the issue is still there and it is not related to a specific activity or fragment it is related to all over the app\r\n\r\n\r\nNeed an expert opinion how to resolved this issue\r\n\r\nTried multiple things :\r\n- Removed unused resources\r\n- Used coroutines for heavy tasks\r\n- Network cache api\r\n- Profiler is not showing anything wired \r\netc etc..\r\n\r\nAlso, I&#39;d like to mention an amazing thing happened to me :\r\nMy app is live on playstore since an year ago and it was working perfectly fine!\r\n\r\nAlmost a month ago, suddenly, the app has started this sluggish behavior without publishing any update on playstore\r\n\r\n**Fix :**\r\n - Resolved this issue by just making this boolean &quot;false&quot;\r\n\r\n       &lt;meta-data android:name=&quot;com.facebook.sdk.AutoInitEnabled&quot;\r\n                android:value=&quot;false&quot;/&gt;\r\n\r\n","title":"In Single Activity Architecture, If I start an activity multiple times from any of my fragment, my app is becoming slow","body":"<p>I've an activity in which I've almost 20 fragments. App is working perfectly fine but :</p>\n<ol>\n<li>When I opens any activity (either implicit or explicit) from a fragment and press back, my app is gradually becoming slow (UI is lagging mostly on scrolling).</li>\n</ol>\n<p>Sluggish behavior of the app increases on the basis of repeating the step 1 again &amp; again</p>\n<p>While doing RCA, I was thinking that this might be happening because of some specific heavy activity or fragment so, I've created a sample activity which I've tried opening from different fragments but the issue is still there and it is not related to a specific activity or fragment it is related to all over the app</p>\n<p>Need an expert opinion how to resolved this issue</p>\n<p>Tried multiple things :</p>\n<ul>\n<li>Removed unused resources</li>\n<li>Used coroutines for heavy tasks</li>\n<li>Network cache api</li>\n<li>Profiler is not showing anything wired\netc etc..</li>\n</ul>\n<p>Also, I'd like to mention an amazing thing happened to me :\nMy app is live on playstore since an year ago and it was working perfectly fine!</p>\n<p>Almost a month ago, suddenly, the app has started this sluggish behavior without publishing any update on playstore</p>\n<p><strong>Fix :</strong></p>\n<ul>\n<li><p>Resolved this issue by just making this boolean &quot;false&quot;</p>\n<pre><code>&lt;meta-data android:name=&quot;com.facebook.sdk.AutoInitEnabled&quot;\n         android:value=&quot;false&quot;/&gt;\n</code></pre>\n</li>\n</ul>\n"},{"tags":["java","authentication","jwt"],"answers":[{"tags":[],"owner":{"account_id":29683667,"reputation":1,"user_id":22749777,"display_name":"alip8"},"comment_count":0,"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1697464577,"creation_date":1697461702,"answer_id":77302242,"question_id":77301662,"body_markdown":"You have two servers, if you want to keep the status of the Token consistent in the two servers, it is recommended to use middleware nosql to store the user&#39;s status in the database. It is recommended to use redis (fast response, kv structure is enough to deal with your situation), and store the login information in redis. Then add a layer of filter to redis when the user requests to obtain the status, if not, to generate the token stored in redis, if there is a direct release and parse the Token to get the user&#39;s information","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>You have two servers, if you want to keep the status of the Token consistent in the two servers, it is recommended to use middleware nosql to store the user's status in the database. It is recommended to use redis (fast response, kv structure is enough to deal with your situation), and store the login information in redis. Then add a layer of filter to redis when the user requests to obtain the status, if not, to generate the token stored in redis, if there is a direct release and parse the Token to get the user's information</p>\n"},{"comments":[{"owner":{"account_id":31951,"reputation":1955,"user_id":88105,"display_name":"Jaromir Hamala"},"score":0,"creation_date":1697724095,"post_id":77307455,"comment_id":136317949,"body_markdown":"this is correct. you can use a thumbprint to validate the integrity of a (public) key, but it&#39;s insufficient for signature verification.","body":"this is correct. you can use a thumbprint to validate the integrity of a (public) key, but it&#39;s insufficient for signature verification."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697927913,"post_id":77307455,"comment_id":136341356,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77307455/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23584006,"reputation":3,"user_id":17622679,"display_name":"meg1311"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1698042295,"creation_date":1697532571,"answer_id":77307455,"question_id":77301662,"body_markdown":"I found out that it&#39;s not possible to validate signature using thumbprint. The public key only can do the job. So instead of or in addition to sharing thumbprints the two servers (S1 and S2) will have to publish the public key as well which will be used for JWT token signature. ","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>I found out that it's not possible to validate signature using thumbprint. The public key only can do the job. So instead of or in addition to sharing thumbprints the two servers (S1 and S2) will have to publish the public key as well which will be used for JWT token signature.</p>\n"}],"owner":{"account_id":23584006,"reputation":3,"user_id":17622679,"display_name":"meg1311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1698051627,"accepted_answer_id":77307455,"answer_count":2,"score":-2,"last_activity_date":1698042295,"creation_date":1697456503,"question_id":77301662,"body_markdown":"There is 1 client (C1) and 2 servers (S1 and S2). Both servers have their own self-signed certificates and have published their respective certificate thumbprint such that one can access the thumbprint of another. C1 interacts with S1 and gets a JWT token signed by S1&#39;s self-signed certificate. Now C1 interacts with S2 using the JWT token it received from S1. How does S2 validate the signature of the JWT token using the thumbprint of S1 in Java?","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>There is 1 client (C1) and 2 servers (S1 and S2). Both servers have their own self-signed certificates and have published their respective certificate thumbprint such that one can access the thumbprint of another. C1 interacts with S1 and gets a JWT token signed by S1's self-signed certificate. Now C1 interacts with S2 using the JWT token it received from S1. How does S2 validate the signature of the JWT token using the thumbprint of S1 in Java?</p>\n"},{"tags":["java","spring","spring-data-jpa","geometry","postgis"],"comments":[{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685035898,"post_id":75638770,"comment_id":134608695,"body_markdown":"Can you please provide the full setup that solved your issue? i&#39;m facing simillar errors","body":"Can you please provide the full setup that solved your issue? i&#39;m facing simillar errors"}],"answers":[{"comments":[{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685015210,"post_id":75647932,"comment_id":134603445,"body_markdown":"hello, your solution doesn&#39;t work for me.. I&#39;m getting the following error message: &quot;Caused by: org.locationtech.jts.io.ParseException: Unknown WKB type {some int less than 1000 that is changes depending on the point}\nat org.locationtech.jts.io.WKBReader.readGeometry(WKBReader.java:282)\nat org.locationtech.jts.io.WKBReader.read(WKBReader.java:191)\nat org.locationtech.jts.io.WKBReader.read(WKBReader.java:159)\nat com.path.myConverter.convertToEntityAttribute(MyConverter.java:43)&quot; I can insert a point but can&#39;t pull it back into an Entity","body":"hello, your solution doesn&#39;t work for me.. I&#39;m getting the following error message: &quot;Caused by: org.locationtech.jts.io.ParseException: Unknown WKB type {some int less than 1000 that is changes depending on the point} at org.locationtech.jts.io.WKBReader.readGeometry(WKBReader.jav&zwnj;&#8203;a:282) at org.locationtech.jts.io.WKBReader.read(WKBReader.java:191) at org.locationtech.jts.io.WKBReader.read(WKBReader.java:159) at com.path.myConverter.convertToEntityAttribute(MyConverter.ja&zwnj;&#8203;va:43)&quot; I can insert a point but can&#39;t pull it back into an Entity"},{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685110520,"post_id":75647932,"comment_id":134620120,"body_markdown":"? can you please post the full setup that solved this issue?","body":"? can you please post the full setup that solved this issue?"},{"owner":{"account_id":27936475,"reputation":21,"user_id":21333381,"display_name":"Pedro Augusto Almeida Duarte"},"score":0,"creation_date":1685113219,"post_id":75647932,"comment_id":134620760,"body_markdown":"@DarkLeader in my application, i was not trying to pull it back into an entity. However, i tried it now and i received a similar error. Searching a bit, i believe that the problem is because postgres saves geometries in &quot;bytea&quot; format or similar, so we have problems to read it. I&#39;ll try to find a solution. If you have any progress, let me know, please :)","body":"@DarkLeader in my application, i was not trying to pull it back into an entity. However, i tried it now and i received a similar error. Searching a bit, i believe that the problem is because postgres saves geometries in &quot;bytea&quot; format or similar, so we have problems to read it. I&#39;ll try to find a solution. If you have any progress, let me know, please :)"},{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685114294,"post_id":75647932,"comment_id":134621006,"body_markdown":"@PedroAugustoAlmeidaDuarte thanks for the reply! I&#39;ll keep at it and post a solution if I manage to solve it.","body":"@PedroAugustoAlmeidaDuarte thanks for the reply! I&#39;ll keep at it and post a solution if I manage to solve it."},{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685336437,"post_id":75647932,"comment_id":134642193,"body_markdown":"@PedroAugustoAlmeidaDuarte hey, have a look at this post: https://stackoverflow.com/questions/76321056/how-to-insert-select-a-point-from-postgres-geometry-type-in-spring-boot-3#comment134603476_76321056 still didn&#39;t find a solution that can pull and save an entity but this post has a solution that can pull an entity but can&#39;t save it. maybe you can use it to find a solution for both.","body":"@PedroAugustoAlmeidaDuarte hey, have a look at this post: <a href=\"https://stackoverflow.com/questions/76321056/how-to-insert-select-a-point-from-postgres-geometry-type-in-spring-boot-3#comment134603476_76321056\" title=\"how to insert select a point from postgres geometry type in spring boot 3%23comment134603476_76321056\">stackoverflow.com/questions/76321056/&hellip;</a> still didn&#39;t find a solution that can pull and save an entity but this post has a solution that can pull an entity but can&#39;t save it. maybe you can use it to find a solution for both."},{"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"score":0,"creation_date":1685361944,"post_id":75647932,"comment_id":134645645,"body_markdown":"@DarkLeader  fix, Last time it was my problem,This time the work was good","body":"@DarkLeader  fix, Last time it was my problem,This time the work was good"},{"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"score":0,"creation_date":1685362041,"post_id":75647932,"comment_id":134645660,"body_markdown":"I&#39;m used to mybatis, jpa is not taken into account，I&#39;m sorry","body":"I&#39;m used to mybatis, jpa is not taken into account，I&#39;m sorry"},{"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"score":0,"creation_date":1685362177,"post_id":75647932,"comment_id":134645679,"body_markdown":"@DarkLeader There are also some methods that are not implemented and you need to decide for yourself","body":"@DarkLeader There are also some methods that are not implemented and you need to decide for yourself"},{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685372859,"post_id":75647932,"comment_id":134647774,"body_markdown":"thanks! But I&#39;m using Spring boot 3 and @Type is deprecated so &quot;type = ...&quot; raises error that type is not recognized. In addition UserType interface doesn&#39;t have a method public int[] sqlTypes","body":"thanks! But I&#39;m using Spring boot 3 and @Type is deprecated so &quot;type = ...&quot; raises error that type is not recognized. In addition UserType interface doesn&#39;t have a method public int[] sqlTypes"},{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685372977,"post_id":75647932,"comment_id":134647799,"body_markdown":"And your nullSafeGet has the wrong definition, paramters wise for Spring boot 3","body":"And your nullSafeGet has the wrong definition, paramters wise for Spring boot 3"},{"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"score":0,"creation_date":1685409354,"post_id":75647932,"comment_id":134652323,"body_markdown":"@DarkLeader i used Spring boot 2.7, Sring boot3 needs to be tested yourself :)","body":"@DarkLeader i used Spring boot 2.7, Sring boot3 needs to be tested yourself :)"}],"tags":[],"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"comment_count":11,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698042139,"creation_date":1678086241,"answer_id":75647932,"question_id":75638770,"body_markdown":"# JPA （SpringBoot 2.7）\r\n1. You can try this AttributeConverter interface implementation. Geometry in postgis storage format is WKB.\r\n\r\n2. add @Type(type = &quot;org.example.GeometryType&quot;) in pojo field\r\n\r\n3. There are also some methods that are not implemented \r\n\r\n```java\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.geotools.geometry.jts.WKBReader;\r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\r\nimport org.hibernate.usertype.UserType;\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.WKBWriter;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.Serializable;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\nimport java.util.Objects;\r\nimport java.util.Optional;\r\n\r\n/**\r\n * @author Arjen10\r\n * @date 2023/5/29 下午7:48\r\n */\r\n@Slf4j\r\npublic class GeometryType implements UserType {\r\n\r\n    private static final int[] TYPES = new int[] {Types.BINARY};\r\n\r\n    @Override\r\n    public int[] sqlTypes() {\r\n        return TYPES;\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Geometry&gt; returnedClass() {\r\n        return Geometry.class;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o, Object o1) throws HibernateException {\r\n        return Objects.equals(o, o1);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode(Object o) throws HibernateException {\r\n        return Objects.hashCode(o);\r\n    }\r\n\r\n    @Override\r\n    public Object nullSafeGet(ResultSet rs, String[] strings, SharedSessionContractImplementor sc, Object o) throws HibernateException, SQLException {\r\n        if (rs.wasNull()) {\r\n            return null;\r\n        }\r\n        String wkbString = rs.getString(strings[0]);\r\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\r\n        try {\r\n            return new WKBReader().read(bytes);\r\n        } catch (ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void nullSafeSet(PreparedStatement ps, Object o, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\r\n        if (Objects.isNull(o)) {\r\n            ps.setNull(i, Types.BINARY);\r\n            return;\r\n        }\r\n        Geometry geometry = (Geometry) o;\r\n        byte[] write = new WKBWriter().write(geometry);\r\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\r\n            ps.setBinaryStream(i, is);\r\n        } catch (IOException | NullPointerException e) {\r\n            throw new SQLException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Object deepCopy(Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public boolean isMutable() {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public Serializable disassemble(Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Object assemble(Serializable serializable, Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Object replace(Object o, Object o1, Object o2) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n}\r\n```\r\n\r\n# myBatis\r\n\r\n```java\r\nimport com.baomidou.mybatisplus.core.toolkit.StringUtils;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.ibatis.type.BaseTypeHandler;\r\nimport org.apache.ibatis.type.JdbcType;\r\nimport org.geotools.geometry.jts.WKBReader;\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.WKBWriter;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.sql.CallableStatement;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.Optional;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\n/**\r\n * @author Arjen10\r\n * @date 2022/8/30 11:30\r\n */\r\n@Slf4j\r\npublic class GeometryTypeHandler extends BaseTypeHandler&lt;Geometry&gt; {\r\n\r\n    private static final WKBWriter WKB_WRITER = new WKBWriter();\r\n\r\n    private static final WKBReader WKB_READER = new WKBReader();\r\n\r\n    private static final ReentrantLock WRITE_LOCK = new ReentrantLock();\r\n\r\n    private static final ReentrantLock READ_LOCK = new ReentrantLock();\r\n\r\n    @Override\r\n    public void setNonNullParameter(PreparedStatement ps, int i, Geometry geometry, JdbcType jdbcType)\r\n            throws SQLException {\r\n        byte[] write;\r\n        WRITE_LOCK.lock();\r\n        try {\r\n            //PostGIS 矢量数据存储方式为WKB\r\n            write = WKB_WRITER.write(geometry);\r\n        } catch (Exception e) {\r\n            throw new SQLException(e);\r\n        } finally {\r\n            WRITE_LOCK.unlock();\r\n        }\r\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\r\n            ps.setBinaryStream(i, is);\r\n        } catch (IOException | NullPointerException e) {\r\n            throw new SQLException(e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(ResultSet rs, String s) throws SQLException {\r\n        return getGeometry(rs.getString(s));\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(ResultSet rs, int i) throws SQLException {\r\n        return getGeometry(rs.getString(i));\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(CallableStatement cs, int i) throws SQLException {\r\n        return getGeometry(cs.getString(i));\r\n    }\r\n\r\n    private static Geometry getGeometry(String wkbString) throws SQLException {\r\n        if (StringUtils.isEmpty(wkbString)) {\r\n            return null;\r\n        }\r\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\r\n        READ_LOCK.lock();\r\n        try {\r\n            return WKB_READER.read(bytes);\r\n        } catch (ParseException e) {\r\n            throw new SQLException(e);\r\n        } finally {\r\n            READ_LOCK.unlock();\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<h1>JPA （SpringBoot 2.7）</h1>\n<ol>\n<li><p>You can try this AttributeConverter interface implementation. Geometry in postgis storage format is WKB.</p>\n</li>\n<li><p>add @Type(type = &quot;org.example.GeometryType&quot;) in pojo field</p>\n</li>\n<li><p>There are also some methods that are not implemented</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.extern.slf4j.Slf4j;\nimport org.geotools.geometry.jts.WKBReader;\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.Serializable;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\nimport java.util.Objects;\nimport java.util.Optional;\n\n/**\n * @author Arjen10\n * @date 2023/5/29 下午7:48\n */\n@Slf4j\npublic class GeometryType implements UserType {\n\n    private static final int[] TYPES = new int[] {Types.BINARY};\n\n    @Override\n    public int[] sqlTypes() {\n        return TYPES;\n    }\n\n    @Override\n    public Class&lt;Geometry&gt; returnedClass() {\n        return Geometry.class;\n    }\n\n    @Override\n    public boolean equals(Object o, Object o1) throws HibernateException {\n        return Objects.equals(o, o1);\n    }\n\n    @Override\n    public int hashCode(Object o) throws HibernateException {\n        return Objects.hashCode(o);\n    }\n\n    @Override\n    public Object nullSafeGet(ResultSet rs, String[] strings, SharedSessionContractImplementor sc, Object o) throws HibernateException, SQLException {\n        if (rs.wasNull()) {\n            return null;\n        }\n        String wkbString = rs.getString(strings[0]);\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\n        try {\n            return new WKBReader().read(bytes);\n        } catch (ParseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement ps, Object o, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\n        if (Objects.isNull(o)) {\n            ps.setNull(i, Types.BINARY);\n            return;\n        }\n        Geometry geometry = (Geometry) o;\n        byte[] write = new WKBWriter().write(geometry);\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n    }\n\n    @Override\n    public Object deepCopy(Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public boolean isMutable() {\n        return false;\n    }\n\n    @Override\n    public Serializable disassemble(Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public Object assemble(Serializable serializable, Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public Object replace(Object o, Object o1, Object o2) throws HibernateException {\n        return null;\n    }\n\n}\n</code></pre>\n<h1>myBatis</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import com.baomidou.mybatisplus.core.toolkit.StringUtils;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.geotools.geometry.jts.WKBReader;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Optional;\nimport java.util.concurrent.locks.ReentrantLock;\n\n/**\n * @author Arjen10\n * @date 2022/8/30 11:30\n */\n@Slf4j\npublic class GeometryTypeHandler extends BaseTypeHandler&lt;Geometry&gt; {\n\n    private static final WKBWriter WKB_WRITER = new WKBWriter();\n\n    private static final WKBReader WKB_READER = new WKBReader();\n\n    private static final ReentrantLock WRITE_LOCK = new ReentrantLock();\n\n    private static final ReentrantLock READ_LOCK = new ReentrantLock();\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, Geometry geometry, JdbcType jdbcType)\n            throws SQLException {\n        byte[] write;\n        WRITE_LOCK.lock();\n        try {\n            //PostGIS 矢量数据存储方式为WKB\n            write = WKB_WRITER.write(geometry);\n        } catch (Exception e) {\n            throw new SQLException(e);\n        } finally {\n            WRITE_LOCK.unlock();\n        }\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n\n    }\n\n    @Override\n    public Geometry getNullableResult(ResultSet rs, String s) throws SQLException {\n        return getGeometry(rs.getString(s));\n    }\n\n    @Override\n    public Geometry getNullableResult(ResultSet rs, int i) throws SQLException {\n        return getGeometry(rs.getString(i));\n    }\n\n    @Override\n    public Geometry getNullableResult(CallableStatement cs, int i) throws SQLException {\n        return getGeometry(cs.getString(i));\n    }\n\n    private static Geometry getGeometry(String wkbString) throws SQLException {\n        if (StringUtils.isEmpty(wkbString)) {\n            return null;\n        }\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\n        READ_LOCK.lock();\n        try {\n            return WKB_READER.read(bytes);\n        } catch (ParseException e) {\n            throw new SQLException(e);\n        } finally {\n            READ_LOCK.unlock();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692121379,"creation_date":1685466887,"answer_id":76367151,"question_id":75638770,"body_markdown":"This solution is based on Arjen&#39;s solution with some changes for it to work with Spring boot 3.\r\n\r\nfile GeometryType :\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.engine.spi.SharedSessionContractImplementor;\r\n    import org.hibernate.usertype.UserType;\r\n    import org.locationtech.jts.geom.Geometry;\r\n    import org.locationtech.jts.io.WKBReader;\r\n    import org.locationtech.jts.io.WKBWriter;\r\n\r\n    import java.io.*;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Types;\r\n    import java.util.Objects;\r\n\r\n    @Slf4j\r\n    public class GeometryType implements UserType&lt;Geometry&gt; {\r\n\r\n        @Override\r\n        public int getSqlType() {\r\n            return Types.BINARY;\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;Geometry&gt; returnedClass() {\r\n            return Geometry.class;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Geometry o,Geometry o1) throws HibernateException {\r\n            return Objects.equals(o, o1);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode(Geometry o) throws HibernateException {\r\n            return Objects.hashCode(o);\r\n        }\r\n\r\n        @Override\r\n        public Geometry nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session, Object owner) throws SQLException   {\r\n            if (rs.wasNull()) {\r\n                return null;\r\n            }\r\n            try {\r\n                String string = rs.getString(position);\r\n                if (string == null) {\r\n                    return null;\r\n                }\r\n                final byte[] bytes = WKBReader.hexToBytes(string);\r\n                return new WKBReader().read(bytes);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void nullSafeSet(PreparedStatement ps, Geometry geometry, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\r\n            if (Objects.isNull(geometry)) {\r\n                ps.setNull(i, Types.BINARY);\r\n                return;\r\n            }\r\n            byte[] write = new WKBWriter().write(geometry);\r\n            try (InputStream is = new ByteArrayInputStream(write)) {\r\n                ps.setBinaryStream(i, is);\r\n            } catch (IOException | NullPointerException e) {\r\n                throw new SQLException(e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public Geometry deepCopy(Geometry geometry) throws HibernateException {\r\n            if (Objects.isNull(geometry)) {\r\n                return null;\r\n            }\r\n            return geometry.copy();\r\n        }\r\n\r\n        @Override\r\n        public boolean isMutable() {\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public Serializable disassemble(Geometry o) throws HibernateException {\r\n            return o;\r\n        }\r\n\r\n        @Override\r\n        public Geometry assemble(Serializable serializable, Object o) throws HibernateException {\r\n            return deepCopy((Geometry) serializable);\r\n        }\r\n\r\n        @Override\r\n        public Geometry replace(Geometry original, Geometry o1, Object o2) throws HibernateException {\r\n            return deepCopy(original);\r\n        }\r\n\r\n    }\r\n\r\n\r\nnow inside the entity use: @Type(GeometryType.class) for the geometry field.\r\n\r\n\r\nI&#39;m not sure if the implementation of all the functions is correct (meaning I / you might encounter an error along the line) but I managed to save an entity that has a locationtech.jts.jeom.Geometry field to postgres and managed to pull the entity back from the database.","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<p>This solution is based on Arjen's solution with some changes for it to work with Spring boot 3.</p>\n<p>file GeometryType :</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.WKBReader;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.*;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\nimport java.util.Objects;\n\n@Slf4j\npublic class GeometryType implements UserType&lt;Geometry&gt; {\n\n    @Override\n    public int getSqlType() {\n        return Types.BINARY;\n    }\n\n    @Override\n    public Class&lt;Geometry&gt; returnedClass() {\n        return Geometry.class;\n    }\n\n    @Override\n    public boolean equals(Geometry o,Geometry o1) throws HibernateException {\n        return Objects.equals(o, o1);\n    }\n\n    @Override\n    public int hashCode(Geometry o) throws HibernateException {\n        return Objects.hashCode(o);\n    }\n\n    @Override\n    public Geometry nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session, Object owner) throws SQLException   {\n        if (rs.wasNull()) {\n            return null;\n        }\n        try {\n            String string = rs.getString(position);\n            if (string == null) {\n                return null;\n            }\n            final byte[] bytes = WKBReader.hexToBytes(string);\n            return new WKBReader().read(bytes);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement ps, Geometry geometry, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\n        if (Objects.isNull(geometry)) {\n            ps.setNull(i, Types.BINARY);\n            return;\n        }\n        byte[] write = new WKBWriter().write(geometry);\n        try (InputStream is = new ByteArrayInputStream(write)) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n    }\n\n    @Override\n    public Geometry deepCopy(Geometry geometry) throws HibernateException {\n        if (Objects.isNull(geometry)) {\n            return null;\n        }\n        return geometry.copy();\n    }\n\n    @Override\n    public boolean isMutable() {\n        return false;\n    }\n\n    @Override\n    public Serializable disassemble(Geometry o) throws HibernateException {\n        return o;\n    }\n\n    @Override\n    public Geometry assemble(Serializable serializable, Object o) throws HibernateException {\n        return deepCopy((Geometry) serializable);\n    }\n\n    @Override\n    public Geometry replace(Geometry original, Geometry o1, Object o2) throws HibernateException {\n        return deepCopy(original);\n    }\n\n}\n</code></pre>\n<p>now inside the entity use: @Type(GeometryType.class) for the geometry field.</p>\n<p>I'm not sure if the implementation of all the functions is correct (meaning I / you might encounter an error along the line) but I managed to save an entity that has a locationtech.jts.jeom.Geometry field to postgres and managed to pull the entity back from the database.</p>\n"}],"owner":{"account_id":27936475,"reputation":21,"user_id":21333381,"display_name":"Pedro Augusto Almeida Duarte"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2181,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76367151,"answer_count":2,"score":1,"last_activity_date":1698042139,"creation_date":1677965282,"question_id":75638770,"body_markdown":"I created a map using leaflet and i&#39;m trying to send point / multipolygon drawns to my postgres database using spring data JPA. The server initially receives a string geoJSON ( converted to org.locationtech.jts.geom.MultiPolygon and org.locationtech.jts.geom.Point by the follow deserialize methods ).\r\nObs: I took care that the geojson string is always valid\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport org.locationtech.jts.geom.MultiPolygon;\r\nimport java.io.IOException;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\r\n\r\npublic class MultiPolygonDeserializer extends JsonDeserializer&lt;MultiPolygon&gt; {\r\n\r\n    @Override\r\n    public MultiPolygon deserialize(JsonParser parser, DeserializationContext context) throws IOException {\r\n        String geoJson = parser.getValueAsString();\r\n        GeoJsonReader reader = new GeoJsonReader();\r\n        try {\r\n            return (MultiPolygon) reader.read(geoJson);\r\n        } catch (ParseException e) {\r\n            throw new IOException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport org.locationtech.jts.geom.Point;\r\nimport java.io.IOException;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\r\n\r\npublic class PointDeserializer extends JsonDeserializer&lt;Point&gt; {\r\n\r\n    @Override\r\n    public Point deserialize(JsonParser parser, DeserializationContext context) throws IOException {\r\n        String geoJson = parser.getValueAsString();\r\n        GeoJsonReader reader = new GeoJsonReader();\r\n        try {\r\n            return (Point) reader.read(geoJson);\r\n        } catch (ParseException e) {\r\n            throw new IOException(e);\r\n        }\r\n    }\r\n}\r\n```\r\nThey apparently work fine, returning, for example:\r\nMULTIPOLYGON (((-42.538033 -19.461896, -42.542667 -19.489894, -42.487564 -19.478404, -42.538033 -19.461896))) \r\nand \r\nPOINT (-42.5270802 -19.4777807)\r\n\r\n\r\nAnd this is my model:\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.pedro.geoPartners.util.MultiPolygonDeserializer;\r\nimport com.pedro.geoPartners.util.PointDeserializer;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport java.util.UUID;\r\nimport org.locationtech.jts.geom.MultiPolygon;\r\nimport org.locationtech.jts.geom.Point;\r\n\r\n\r\n/**\r\n *\r\n * @author pedro\r\n */\r\n@Entity\r\npublic class Partner {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private UUID id;\r\n\r\n    private String tradingName;\r\n    private String ownerName;\r\n    private String document;\r\n\r\n    @Column(columnDefinition = &quot;geometry(Point,4326)&quot;)\r\n    @JsonDeserialize(using = PointDeserializer.class)\r\n    private Point address;\r\n\r\n    @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;)\r\n    @JsonDeserialize(using = MultiPolygonDeserializer.class)\r\n    private MultiPolygon coverageArea;\r\n\r\n    public UUID getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(UUID id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTradingName() {\r\n        return tradingName;\r\n    }\r\n\r\n    public void setTradingName(String tradingName) {\r\n        this.tradingName = tradingName;\r\n    }\r\n\r\n    public String getOwnerName() {\r\n        return ownerName;\r\n    }\r\n\r\n    public void setOwnerName(String ownerName) {\r\n        this.ownerName = ownerName;\r\n    }\r\n\r\n    public String getDocument() {\r\n        return document;\r\n    }\r\n\r\n    public void setDocument(String document) {\r\n        this.document = document;\r\n    }\r\n\r\n    public Point getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(Point address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public MultiPolygon getCoverageArea() {\r\n        return coverageArea;\r\n    }\r\n\r\n    public void setCoverageArea(MultiPolygon coverageArea) {\r\n        this.coverageArea = coverageArea;\r\n    }\r\n```\r\n\r\nHowever, when i try to save a Partner in db, i receive: \r\n\r\n\r\n```\r\n2023-03-04T17:51:39.152-03:00  WARN 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: XX000\r\n2023-03-04T17:51:39.152-03:00 ERROR 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: Invalid endian flag value encountered.\r\n2023-03-04T17:51:39.152-03:00  INFO 116266 --- [nio-8080-exec-1] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\r\n2023-03-04T17:51:39.157-03:00 ERROR 116266 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: could not execute statement] with root cause\r\n\r\norg.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]...\r\n```\r\n\r\n* I tried numerous implementantios of &quot;JPA Attribute Converters&quot; and always same error. Moreover, i read somewhere ( not sure )  that  MultiPolygon and Point locationtech can be directly inserted in @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;) and  @Column(columnDefinition = &quot;geometry(Point,4326)&quot;).\r\n\r\n*Also read about hibernate @Type... but apparently doens&#39;t works ( deprecated?) in hibernate spatial version 5.4.32\r\n\r\n*Only for have sure, i tried to set coverageArea and address null before try to save in db, and it saves correctly.\r\n\r\nMy application properties: \r\n\r\n```\r\nspring.jpa.database=POSTGRESQL\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/GeoPartners?useTimeZone=true&amp;serverTimezone=UTC&amp;autoReconnect=true&amp;useSSL=false\r\nspring.datasource.username=postgres\r\nspring.datasource.password=:)\r\nspring.datasource.testWhileIdle=true\r\nspring.datasource.validationQuery=SELECT 1\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\r\nspring.sql.init.mode=ALWAYS\r\nspring.jpa.defer-datasource-initialization=true\r\nhibernate.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect\r\n```\r\n\r\nMy pom.xml:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.3&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.pedro&lt;/groupId&gt;\r\n    &lt;artifactId&gt;geoPartners&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;name&gt;geoPartners&lt;/name&gt;\r\n    &lt;description&gt;update of &amp;quot;JavaWebProject&amp;quot;, implementing new features and Front-end&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.32.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.locationtech.jts.io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jts-io-common&lt;/artifactId&gt;\r\n            &lt;version&gt;1.19.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgis-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;osgeo-alt&lt;/id&gt;\r\n            &lt;url&gt;https://repo.osgeo.org/repository/release/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;geomajas&lt;/id&gt;\r\n            &lt;name&gt;Geomajas Maven Repository&lt;/name&gt;\r\n            &lt;url&gt;http://maven.geomajas.org/(http://maven.geomajas.org/)&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nIts my first question here, sorry if i made a mistake or forget something. Thank You\r\n\r\n\r\nTried to save a &quot;Partner&quot; ( model )  in a postgres db with JpaRepository &quot;save&quot;. Expected to save all attributes but always receive same error (org.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.) when i try to save a MultiPolygon or/and Point.","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<p>I created a map using leaflet and i'm trying to send point / multipolygon drawns to my postgres database using spring data JPA. The server initially receives a string geoJSON ( converted to org.locationtech.jts.geom.MultiPolygon and org.locationtech.jts.geom.Point by the follow deserialize methods ).\nObs: I took care that the geojson string is always valid</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport org.locationtech.jts.geom.MultiPolygon;\nimport java.io.IOException;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\n\npublic class MultiPolygonDeserializer extends JsonDeserializer&lt;MultiPolygon&gt; {\n\n    @Override\n    public MultiPolygon deserialize(JsonParser parser, DeserializationContext context) throws IOException {\n        String geoJson = parser.getValueAsString();\n        GeoJsonReader reader = new GeoJsonReader();\n        try {\n            return (MultiPolygon) reader.read(geoJson);\n        } catch (ParseException e) {\n            throw new IOException(e);\n        }\n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport org.locationtech.jts.geom.Point;\nimport java.io.IOException;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\n\npublic class PointDeserializer extends JsonDeserializer&lt;Point&gt; {\n\n    @Override\n    public Point deserialize(JsonParser parser, DeserializationContext context) throws IOException {\n        String geoJson = parser.getValueAsString();\n        GeoJsonReader reader = new GeoJsonReader();\n        try {\n            return (Point) reader.read(geoJson);\n        } catch (ParseException e) {\n            throw new IOException(e);\n        }\n    }\n}\n</code></pre>\n<p>They apparently work fine, returning, for example:\nMULTIPOLYGON (((-42.538033 -19.461896, -42.542667 -19.489894, -42.487564 -19.478404, -42.538033 -19.461896)))\nand\nPOINT (-42.5270802 -19.4777807)</p>\n<p>And this is my model:</p>\n<pre><code>import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.pedro.geoPartners.util.MultiPolygonDeserializer;\nimport com.pedro.geoPartners.util.PointDeserializer;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport java.util.UUID;\nimport org.locationtech.jts.geom.MultiPolygon;\nimport org.locationtech.jts.geom.Point;\n\n\n/**\n *\n * @author pedro\n */\n@Entity\npublic class Partner {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n\n    private String tradingName;\n    private String ownerName;\n    private String document;\n\n    @Column(columnDefinition = &quot;geometry(Point,4326)&quot;)\n    @JsonDeserialize(using = PointDeserializer.class)\n    private Point address;\n\n    @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;)\n    @JsonDeserialize(using = MultiPolygonDeserializer.class)\n    private MultiPolygon coverageArea;\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getTradingName() {\n        return tradingName;\n    }\n\n    public void setTradingName(String tradingName) {\n        this.tradingName = tradingName;\n    }\n\n    public String getOwnerName() {\n        return ownerName;\n    }\n\n    public void setOwnerName(String ownerName) {\n        this.ownerName = ownerName;\n    }\n\n    public String getDocument() {\n        return document;\n    }\n\n    public void setDocument(String document) {\n        this.document = document;\n    }\n\n    public Point getAddress() {\n        return address;\n    }\n\n    public void setAddress(Point address) {\n        this.address = address;\n    }\n\n    public MultiPolygon getCoverageArea() {\n        return coverageArea;\n    }\n\n    public void setCoverageArea(MultiPolygon coverageArea) {\n        this.coverageArea = coverageArea;\n    }\n</code></pre>\n<p>However, when i try to save a Partner in db, i receive:</p>\n<pre><code>2023-03-04T17:51:39.152-03:00  WARN 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: XX000\n2023-03-04T17:51:39.152-03:00 ERROR 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: Invalid endian flag value encountered.\n2023-03-04T17:51:39.152-03:00  INFO 116266 --- [nio-8080-exec-1] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\n2023-03-04T17:51:39.157-03:00 ERROR 116266 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: could not execute statement] with root cause\n\norg.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]...\n</code></pre>\n<ul>\n<li>I tried numerous implementantios of &quot;JPA Attribute Converters&quot; and always same error. Moreover, i read somewhere ( not sure )  that  MultiPolygon and Point locationtech can be directly inserted in @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;) and  @Column(columnDefinition = &quot;geometry(Point,4326)&quot;).</li>\n</ul>\n<p>*Also read about hibernate @Type... but apparently doens't works ( deprecated?) in hibernate spatial version 5.4.32</p>\n<p>*Only for have sure, i tried to set coverageArea and address null before try to save in db, and it saves correctly.</p>\n<p>My application properties:</p>\n<pre><code>spring.jpa.database=POSTGRESQL\nspring.datasource.url=jdbc:postgresql://localhost:5432/GeoPartners?useTimeZone=true&amp;serverTimezone=UTC&amp;autoReconnect=true&amp;useSSL=false\nspring.datasource.username=postgres\nspring.datasource.password=:)\nspring.datasource.testWhileIdle=true\nspring.datasource.validationQuery=SELECT 1\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\nspring.sql.init.mode=ALWAYS\nspring.jpa.defer-datasource-initialization=true\nhibernate.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect\n</code></pre>\n<p>My pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.pedro&lt;/groupId&gt;\n    &lt;artifactId&gt;geoPartners&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;geoPartners&lt;/name&gt;\n    &lt;description&gt;update of &amp;quot;JavaWebProject&amp;quot;, implementing new features and Front-end&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\n            &lt;version&gt;5.4.32.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.locationtech.jts.io&lt;/groupId&gt;\n            &lt;artifactId&gt;jts-io-common&lt;/artifactId&gt;\n            &lt;version&gt;1.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgis&lt;/groupId&gt;\n            &lt;artifactId&gt;postgis-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;1.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;osgeo-alt&lt;/id&gt;\n            &lt;url&gt;https://repo.osgeo.org/repository/release/&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;geomajas&lt;/id&gt;\n            &lt;name&gt;Geomajas Maven Repository&lt;/name&gt;\n            &lt;url&gt;http://maven.geomajas.org/(http://maven.geomajas.org/)&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Its my first question here, sorry if i made a mistake or forget something. Thank You</p>\n<p>Tried to save a &quot;Partner&quot; ( model )  in a postgres db with JpaRepository &quot;save&quot;. Expected to save all attributes but always receive same error (org.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.) when i try to save a MultiPolygon or/and Point.</p>\n"},{"tags":["java","php","android-studio"],"comments":[{"owner":{"account_id":1129881,"reputation":11551,"user_id":1116230,"display_name":"Nico Haase"},"score":0,"creation_date":1698043411,"post_id":77342987,"comment_id":136350206,"body_markdown":"What is a &quot;gagal&quot; response? How is this problem related to PHP or Android Studio?","body":"What is a &quot;gagal&quot; response? How is this problem related to PHP or Android Studio?"},{"owner":{"account_id":29360244,"reputation":1,"user_id":22495119,"display_name":"Ahmad Fauzan"},"score":0,"creation_date":1698043880,"post_id":77342987,"comment_id":136350281,"body_markdown":"I added a toast to the else logic section by displaying the words &quot;gagal&quot; which means failure in English and the &quot;gagal&quot; toast section is what appears when I try to post data","body":"I added a toast to the else logic section by displaying the words &quot;gagal&quot; which means failure in English and the &quot;gagal&quot; toast section is what appears when I try to post data"},{"owner":{"account_id":1129881,"reputation":11551,"user_id":1116230,"display_name":"Nico Haase"},"score":0,"creation_date":1698045650,"post_id":77342987,"comment_id":136350544,"body_markdown":"Please add all clarification to your question by editing it, along with your attempts to resolve the problem","body":"Please add all clarification to your question by editing it, along with your attempts to resolve the problem"}],"owner":{"account_id":29360244,"reputation":1,"user_id":22495119,"display_name":"Ahmad Fauzan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041974,"creation_date":1698041974,"question_id":77342987,"body_markdown":"I want to connect my project calling the database connector with retrofit, but I always get a &quot;gagal&quot; response in the else(fail) section, can anyone correct the code I made? \r\nNote : In the PHP section, when I tested using Postman, the data was able to be posted.\r\n\r\n\r\npublic class incomingItemActivity extends AppCompatActivity {\r\n    String item,quantity;\r\n\r\n    TextInputEditText etNama;\r\n    TextInputEditText etQuantity;\r\n    TextInputEditText etTanggal;\r\n    Button button;\r\n    private ResponseItemDatang respon;\r\n\r\n    private ModelItemDatang dataItem;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_incoming_item);\r\n        getSupportActionBar().setTitle(&quot;FORM BARANG&quot;);\r\n\r\n        //etNama\r\n        etNama = findViewById(R.id.NamaItemET);\r\n        //etQuantity\r\n        etQuantity = findViewById(R.id.QuantityItemET);\r\n\r\n        //button + panggilAPI\r\n        button = findViewById(R.id.simpan);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                setAPI();\r\n            }\r\n        });\r\n        //DatePicker\r\n        etTanggal = findViewById(R.id.Date);\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DAY_OF_MONTH);\r\n\r\n        etTanggal.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                DatePickerDialog dialog = new DatePickerDialog(incomingItemActivity.this, new DatePickerDialog.OnDateSetListener() {\r\n                    @Override\r\n                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                        month = month + 1;\r\n                        String date = dayOfMonth + &quot;/&quot; + month + &quot;/&quot; + year;\r\n                        etTanggal.setText(date);\r\n                    }\r\n                }, year, month, day);\r\n                dialog.show();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setAPI() {\r\n        APInterface apInterface = APIclient.getAPIclient().create(APInterface.class);\r\n        Call&lt;ResponseItemDatang&gt; call  = apInterface.tambahItem(item,quantity);\r\n        call.enqueue(new Callback&lt;ResponseItemDatang&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseItemDatang&gt; call, Response&lt;ResponseItemDatang&gt; response) {\r\n                if (response.isSuccessful()){\r\n                    ResponseItemDatang itemDatang = response.body();\r\n                    etNama.setText(itemDatang.getItem());\r\n                    etQuantity.setText(itemDatang.getQuantity());\r\n\r\n                    Intent intent = new Intent(incomingItemActivity.this, MainActivity.class);\r\n                    startActivity(intent);\r\n                    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-dd-mm hh:mm:ss&quot;);\r\n                    try {\r\n                        Date Time = dateFormat.parse(respon.getTanggal());\r\n                        etTanggal.setText(dataItem.getDate().substring(11, 16) + &quot;|&quot; + dateFormat.format(Time));\r\n                    } catch (ParseException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }else {\r\n                    Toast.makeText(incomingItemActivity.this, &quot;gagal&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;ResponseItemDatang&gt; call, Throwable t) {\r\n\r\n            }\r\n        });\r\n    }\r\n}","title":"Call retrofit api for post data","body":"<p>I want to connect my project calling the database connector with retrofit, but I always get a &quot;gagal&quot; response in the else(fail) section, can anyone correct the code I made?\nNote : In the PHP section, when I tested using Postman, the data was able to be posted.</p>\n<p>public class incomingItemActivity extends AppCompatActivity {\nString item,quantity;</p>\n<pre><code>TextInputEditText etNama;\nTextInputEditText etQuantity;\nTextInputEditText etTanggal;\nButton button;\nprivate ResponseItemDatang respon;\n\nprivate ModelItemDatang dataItem;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_incoming_item);\n    getSupportActionBar().setTitle(&quot;FORM BARANG&quot;);\n\n    //etNama\n    etNama = findViewById(R.id.NamaItemET);\n    //etQuantity\n    etQuantity = findViewById(R.id.QuantityItemET);\n\n    //button + panggilAPI\n    button = findViewById(R.id.simpan);\n    button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            setAPI();\n        }\n    });\n    //DatePicker\n    etTanggal = findViewById(R.id.Date);\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DAY_OF_MONTH);\n\n    etTanggal.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            DatePickerDialog dialog = new DatePickerDialog(incomingItemActivity.this, new DatePickerDialog.OnDateSetListener() {\n                @Override\n                public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n                    month = month + 1;\n                    String date = dayOfMonth + &quot;/&quot; + month + &quot;/&quot; + year;\n                    etTanggal.setText(date);\n                }\n            }, year, month, day);\n            dialog.show();\n        }\n    });\n}\n\nprivate void setAPI() {\n    APInterface apInterface = APIclient.getAPIclient().create(APInterface.class);\n    Call&lt;ResponseItemDatang&gt; call  = apInterface.tambahItem(item,quantity);\n    call.enqueue(new Callback&lt;ResponseItemDatang&gt;() {\n        @Override\n        public void onResponse(Call&lt;ResponseItemDatang&gt; call, Response&lt;ResponseItemDatang&gt; response) {\n            if (response.isSuccessful()){\n                ResponseItemDatang itemDatang = response.body();\n                etNama.setText(itemDatang.getItem());\n                etQuantity.setText(itemDatang.getQuantity());\n\n                Intent intent = new Intent(incomingItemActivity.this, MainActivity.class);\n                startActivity(intent);\n                SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-dd-mm hh:mm:ss&quot;);\n                try {\n                    Date Time = dateFormat.parse(respon.getTanggal());\n                    etTanggal.setText(dataItem.getDate().substring(11, 16) + &quot;|&quot; + dateFormat.format(Time));\n                } catch (ParseException e) {\n                    throw new RuntimeException(e);\n                }\n            }else {\n                Toast.makeText(incomingItemActivity.this, &quot;gagal&quot;, Toast.LENGTH_SHORT).show();\n            }\n\n        }\n\n        @Override\n        public void onFailure(Call&lt;ResponseItemDatang&gt; call, Throwable t) {\n\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","sockets","ssl","server","serversocket"],"comments":[{"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":4,"creation_date":1698042251,"post_id":77342968,"comment_id":136350043,"body_markdown":"RSA is only intended and suitable to encrypt small amount of data, like the keys for symmetric encryption like AES. It is therefore used as part of [hybrid encryption](https://en.wikipedia.org/wiki/Hybrid_cryptosystem). Given that you are using Socket it looks like you want to protect communication. In this case use the established and widely used TLS as provided by SSLSocket instead of inventing your own.","body":"RSA is only intended and suitable to encrypt small amount of data, like the keys for symmetric encryption like AES. It is therefore used as part of <a href=\"https://en.wikipedia.org/wiki/Hybrid_cryptosystem\" rel=\"nofollow noreferrer\">hybrid encryption</a>. Given that you are using Socket it looks like you want to protect communication. In this case use the established and widely used TLS as provided by SSLSocket instead of inventing your own."},{"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"score":0,"creation_date":1698042643,"post_id":77342968,"comment_id":136350106,"body_markdown":"So, can I replace `Socket` with `SSLSocket` and communication will be protected?","body":"So, can I replace <code>Socket</code> with <code>SSLSocket</code> and communication will be protected?"},{"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"score":0,"creation_date":1698042699,"post_id":77342968,"comment_id":136350112,"body_markdown":"Can I transfer large data with SSLSocket?","body":"Can I transfer large data with SSLSocket?"},{"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":4,"creation_date":1698042860,"post_id":77342968,"comment_id":136350136,"body_markdown":"*&quot;Can I transfer large data with SSLSocket? &quot;* - Yes, there is no limit. *&quot;can I replace Socket with SSLSocket and communication will be protected?&quot;* - basically yes, but SSLSocket needs additional setup like a certificate on the server side in order to properly protect the communication. There are zillions of examples out there to help you.","body":"<i>&quot;Can I transfer large data with SSLSocket? &quot;</i> - Yes, there is no limit. <i>&quot;can I replace Socket with SSLSocket and communication will be protected?&quot;</i> - basically yes, but SSLSocket needs additional setup like a certificate on the server side in order to properly protect the communication. There are zillions of examples out there to help you."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1698052376,"post_id":77342968,"comment_id":136351641,"body_markdown":"For the record, the reason that RSA is limited to small chunks of data is that encoding and decoding is relatively expensive.  Block ciphers with symmetric keys are orders of magnitude cheaper.  (I couldn&#39;t quickly an actual comparison.  Benchmarking studies typically *don&#39;t even bother measuring* the performance of public key algorithms.)","body":"For the record, the reason that RSA is limited to small chunks of data is that encoding and decoding is relatively expensive.  Block ciphers with symmetric keys are orders of magnitude cheaper.  (I couldn&#39;t quickly an actual comparison.  Benchmarking studies typically <i>don&#39;t even bother measuring</i> the performance of public key algorithms.)"}],"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041782,"creation_date":1698041782,"question_id":77342968,"body_markdown":"I am making a server in java using `ServerSocket` and `Socket` class. I wanted it encrypted so I used `RSA` encryption to encrypt and decrypt data in form of Strings. I got into a problem. The problem is that I can only encrypt maximum 500 bytes of data with 4096 key size and around 240 bytes with 2048 key size. Also I use `Scanner` and `PrintWriter` for reading and sending data. I found there is class `SSL` but I am not really sure if it can replace `Socket`. I tried sending large data by breaking it into pieces and then sending it but I don&#39;t really think it is really efficient. Please can anyone guide me how to make encrypted communication in server.\r\n\r\nI want to find a way to encrypt my communication in server.","title":"How to make Encrypted Connection in Java","body":"<p>I am making a server in java using <code>ServerSocket</code> and <code>Socket</code> class. I wanted it encrypted so I used <code>RSA</code> encryption to encrypt and decrypt data in form of Strings. I got into a problem. The problem is that I can only encrypt maximum 500 bytes of data with 4096 key size and around 240 bytes with 2048 key size. Also I use <code>Scanner</code> and <code>PrintWriter</code> for reading and sending data. I found there is class <code>SSL</code> but I am not really sure if it can replace <code>Socket</code>. I tried sending large data by breaking it into pieces and then sending it but I don't really think it is really efficient. Please can anyone guide me how to make encrypted communication in server.</p>\n<p>I want to find a way to encrypt my communication in server.</p>\n"},{"tags":["java","guava"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1698041270,"post_id":77342913,"comment_id":136349906,"body_markdown":"https://guava.dev/releases/22.0/api/docs/com/google/common/collect/Tables.html#newCustomTable-java.util.Map-com.google.common.base.Supplier-","body":"<a href=\"https://guava.dev/releases/22.0/api/docs/com/google/common/collect/Tables.html#newCustomTable-java.util.Map-com.google.common.base.Supplier-\" rel=\"nofollow noreferrer\">guava.dev/releases/22.0/api/docs/com/google/common/collect/&hellip;</a>"},{"owner":{"account_id":2221535,"reputation":412,"user_id":1960799,"accept_rate":70,"display_name":"Michael"},"score":0,"creation_date":1698041595,"post_id":77342913,"comment_id":136349944,"body_markdown":"@shmosel. thanks for reply, the backingMap must be empty according the api :(","body":"@shmosel. thanks for reply, the backingMap must be empty according the api :("},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1698042790,"post_id":77342913,"comment_id":136350128,"body_markdown":"Indeed. Weird that it doesn&#39;t mention that till the `@throws` section. And that it accepts a map instance instead of a supplier.","body":"Indeed. Weird that it doesn&#39;t mention that till the <code>@throws</code> section. And that it accepts a map instance instead of a supplier."}],"owner":{"account_id":2221535,"reputation":412,"user_id":1960799,"accept_rate":70,"display_name":"Michael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041049,"creation_date":1698041049,"question_id":77342913,"body_markdown":"Suppose I have an existing Map&lt;Integer, Map&lt;Integer, String&gt;&gt; which contains items, I want to construct a com.google.common.collect.Table from that map for there&#39;s unnecessary data copy","title":"Is possible to construct a com.google.common.collect.Table from an existing map?","body":"<p>Suppose I have an existing Map&lt;Integer, Map&lt;Integer, String&gt;&gt; which contains items, I want to construct a com.google.common.collect.Table from that map for there's unnecessary data copy</p>\n"},{"tags":["java","while-loop","sentinel"],"comments":[{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":3,"creation_date":1354224296,"post_id":13634992,"comment_id":18703365,"body_markdown":"Show us the code that you tried?","body":"Show us the code that you tried?"},{"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"score":0,"creation_date":1354227576,"post_id":13634992,"comment_id":18704786,"body_markdown":"there i added what i have so far..","body":"there i added what i have so far.."}],"answers":[{"comments":[{"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"score":0,"creation_date":1354228879,"post_id":13635929,"comment_id":18705300,"body_markdown":"does it matter if the sentinel value is a name or could it be something like # like what i have","body":"does it matter if the sentinel value is a name or could it be something like # like what i have"},{"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"score":1,"creation_date":1354229386,"post_id":13635929,"comment_id":18705513,"body_markdown":"yes thank you very much i know my code is a mess im new to this :)","body":"yes thank you very much i know my code is a mess im new to this :)"},{"owner":{"account_id":1468618,"reputation":466,"user_id":1380776,"accept_rate":73,"display_name":"joval"},"score":0,"creation_date":1354304283,"post_id":13635929,"comment_id":18732262,"body_markdown":"The sentinel value is not a name, it&#39;s a `#` as you wrote.","body":"The sentinel value is not a name, it&#39;s a <code>#</code> as you wrote."}],"tags":[],"owner":{"account_id":1468618,"reputation":466,"user_id":1380776,"accept_rate":73,"display_name":"joval"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1354228499,"creation_date":1354228101,"answer_id":13635929,"question_id":13634992,"body_markdown":"    do {\r\n        name = reader.next();\r\n    } while (name.lastIndexOf(SENTINEL) == -1);\r\n\r\n\r\nI assume that name cannot contain the sentinel in it. In other case, change &lt;code&gt;== -1&lt;/code&gt; to\r\n    \r\n    != length(name) - 1\r\n\r\nPS. You&#39;re declaring &lt;code&gt;String name&lt;/code&gt; twice.\r\n\r\nPS2. Even better condition:\r\n    \r\n    while (!name.endsWith(String.valueOf(SENTINEL));\r\n\r\n","title":"Using sentinel-controlled loop","body":"<pre><code>do {\n    name = reader.next();\n} while (name.lastIndexOf(SENTINEL) == -1);\n</code></pre>\n\n<p>I assume that name cannot contain the sentinel in it. In other case, change <code>== -1</code> to</p>\n\n<pre><code>!= length(name) - 1\n</code></pre>\n\n<p>PS. You're declaring <code>String name</code> twice.</p>\n\n<p>PS2. Even better condition:</p>\n\n<pre><code>while (!name.endsWith(String.valueOf(SENTINEL));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1773603"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587888314,"creation_date":1587888314,"answer_id":61437591,"question_id":13634992,"body_markdown":"**The use of sentinel for loop:**\r\n\r\n&gt; In a sentinel controlled loop the change part depends on data from the user. It is awkward to do this inside a for statement. So the change part is omitted from the for statement and put in a convenient location.\r\n\r\n    import java.util.Scanner;\r\n\r\n    class EvalSqrt\r\n    {\r\n      public static void main (String[] args )\r\n      {\r\n        Scanner scan = new Scanner( System.in );\r\n        double x;\r\n\r\n        System.out.print(&quot;Enter a value for x or -1 to exit: &quot;)  ;\r\n        x = scan.nextDouble();\r\n\r\n        for (    ; x &gt;= 0.0 ;   )  \r\n        {\r\n          System.out.println( &quot;Square root of &quot; + x + &quot; is &quot; + Math.sqrt( x ) ); \r\n\r\n          System.out.print(&quot;Enter a value for x or -1 to exit: &quot;)  ;\r\n          x =  scan.nextDouble();\r\n        }\r\n      }\r\n    }\r\nFor more details: https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html","title":"Using sentinel-controlled loop","body":"<p><strong>The use of sentinel for loop:</strong></p>\n\n<blockquote>\n  <p>In a sentinel controlled loop the change part depends on data from the user. It is awkward to do this inside a for statement. So the change part is omitted from the for statement and put in a convenient location.</p>\n</blockquote>\n\n<pre><code>import java.util.Scanner;\n\nclass EvalSqrt\n{\n  public static void main (String[] args )\n  {\n    Scanner scan = new Scanner( System.in );\n    double x;\n\n    System.out.print(\"Enter a value for x or -1 to exit: \")  ;\n    x = scan.nextDouble();\n\n    for (    ; x &gt;= 0.0 ;   )  \n    {\n      System.out.println( \"Square root of \" + x + \" is \" + Math.sqrt( x ) ); \n\n      System.out.print(\"Enter a value for x or -1 to exit: \")  ;\n      x =  scan.nextDouble();\n    }\n  }\n}\n</code></pre>\n\n<p>For more details: <a href=\"https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html\" rel=\"nofollow noreferrer\">https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html</a></p>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643228820,"creation_date":1643228820,"answer_id":70869847,"question_id":13634992,"body_markdown":"&gt; an exercise asking to have a user prompt a name and echoes that name\r\n&gt; to the screen until user enters a sentinel value.\r\n\r\nI would expect to see something more like:\r\n\r\n      public static void main(String[] args) {\r\n        Scanner reader = new Scanner(System.in);\r\n        String SENTINEL = &quot;stop&quot;;\r\n        String name;\r\n        do { \r\n          System.out.print(&quot;Enter a name (&#39;&quot; + SENTINEL + &quot;&#39; to quit): &quot;); \r\n          name = reader.nextLine();\r\n          if (!name.equals(SENTINEL)) {\r\n            System.out.println(name);\r\n          }\r\n        } while (!name.equals(SENTINEL));\r\n        System.out.println(&quot;Goodbye!&quot;);\r\n      } ","title":"Using sentinel-controlled loop","body":"<blockquote>\n<p>an exercise asking to have a user prompt a name and echoes that name\nto the screen until user enters a sentinel value.</p>\n</blockquote>\n<p>I would expect to see something more like:</p>\n<pre><code>  public static void main(String[] args) {\n    Scanner reader = new Scanner(System.in);\n    String SENTINEL = &quot;stop&quot;;\n    String name;\n    do { \n      System.out.print(&quot;Enter a name ('&quot; + SENTINEL + &quot;' to quit): &quot;); \n      name = reader.nextLine();\n      if (!name.equals(SENTINEL)) {\n        System.out.println(name);\n      }\n    } while (!name.equals(SENTINEL));\n    System.out.println(&quot;Goodbye!&quot;);\n  } \n</code></pre>\n"}],"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14449,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1698040995,"creation_date":1354224238,"question_id":13634992,"body_markdown":"I&#39;m having trouble with an exercise asking to have a user prompt a name and echoes that name to the screen until user enters a sentinel value. I understand this is a sentinel-controlled loop but I&#39;m stuck on the fact that I&#39;m dealing with entering a name instead of an integer. I tried to follow a program in my book which only explains how to use a sentinel value with integers but not with String &quot;name&quot;. I tried looking up this answer and saw something like name.equals(&quot;stop&quot;) if it even applies to this. and looked it up on the APIs and still didn&#39;t find it helpful. I would like to see how it applies as a whole.  \r\nNote: here is what I have done so far and I want to know how far off I am.\r\n\r\n    import java.util.*;\r\n\r\n    public class SentinelControlledLoop {\r\n\r\n        static Scanner console = new Scanner(System.in);\r\n        static final int SENTINEL = #;\r\n\r\n        public static void main (String[] args) {\r\n\t\t\r\n\t\t    String name;\r\n\t\t    System.out.println(&quot;Enter a name &quot; + &quot;ending with &quot; + SENTINEL); \r\n\t\t    String name = reader.next();\r\n\r\n\t\t    while (!name.equals(“stop”)) {\r\n\t\t        name = reader.next();\r\n\t\t    }\r\n\r\n\r\n\r\n\t\t","title":"Using sentinel-controlled loop","body":"<p>I'm having trouble with an exercise asking to have a user prompt a name and echoes that name to the screen until user enters a sentinel value. I understand this is a sentinel-controlled loop but I'm stuck on the fact that I'm dealing with entering a name instead of an integer. I tried to follow a program in my book which only explains how to use a sentinel value with integers but not with String \"name\". I tried looking up this answer and saw something like name.equals(\"stop\") if it even applies to this. and looked it up on the APIs and still didn't find it helpful. I would like to see how it applies as a whole.<br>\nNote: here is what I have done so far and I want to know how far off I am.</p>\n\n<pre><code>import java.util.*;\n\npublic class SentinelControlledLoop {\n\n    static Scanner console = new Scanner(System.in);\n    static final int SENTINEL = #;\n\n    public static void main (String[] args) {\n\n        String name;\n        System.out.println(\"Enter a name \" + \"ending with \" + SENTINEL); \n        String name = reader.next();\n\n        while (!name.equals(“stop”)) {\n            name = reader.next();\n        }\n</code></pre>\n"},{"tags":["java","netbeans","glassfish","java-21"],"answers":[{"comments":[{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1696890149,"post_id":77213961,"comment_id":136208314,"body_markdown":"This is not entirely true. Although Netbeans 19 officially supports only GlassFish 7.0.6, it also works well with GlassFish 7.0.9 without issues, unless you&#39;re using Java 21. If you use Java 20 or older, Netbeans works with GlassFish 7.0.9. However, Netbeans allows to select a JDK to run GlassFish, and it allows to use only JDK 11-20 with GlassFish. The next release of Netbeans will support GlassFish on Java 21 too: https://github.com/apache/netbeans/pull/6542. GlassFish runs well on Java 21, the release notes only states that the full TCK cannot run on Java 21, only a subset of it.","body":"This is not entirely true. Although Netbeans 19 officially supports only GlassFish 7.0.6, it also works well with GlassFish 7.0.9 without issues, unless you&#39;re using Java 21. If you use Java 20 or older, Netbeans works with GlassFish 7.0.9. However, Netbeans allows to select a JDK to run GlassFish, and it allows to use only JDK 11-20 with GlassFish. The next release of Netbeans will support GlassFish on Java 21 too: <a href=\"https://github.com/apache/netbeans/pull/6542\" rel=\"nofollow noreferrer\">github.com/apache/netbeans/pull/6542</a>. GlassFish runs well on Java 21, the release notes only states that the full TCK cannot run on Java 21, only a subset of it."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1697489205,"post_id":77213961,"comment_id":136283859,"body_markdown":"@OndroMih As far as I can tell all the information in your comment is repeating what was already provided in my answer, and I was careful to distinguish between officially supported use and combinations that might work. What did I write that is _&quot;not entirely true&quot;_?","body":"@OndroMih As far as I can tell all the information in your comment is repeating what was already provided in my answer, and I was careful to distinguish between officially supported use and combinations that might work. What did I write that is <i>&quot;not entirely true&quot;</i>?"},{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1697626674,"post_id":77213961,"comment_id":136302781,"body_markdown":"HI, maybe I misunderstood. But you wrote:\n&quot;NetBeans explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.&quot;. This is not true. Netbeans 19 actually allows you to use GlassFish 7.0.9 with Java 19 or older, it just reports it&#39;s a 7.0.6 version. Netbeans 19 doesn&#39;t permit to run any GlassFish version with Java 21, even 7.0.6. And if you look at https://glassfish.org/download_gf7.html, you&#39;ll see that GlassFish runs on Java 21, just some tests don&#39;t run on Java 21.","body":"HI, maybe I misunderstood. But you wrote: &quot;NetBeans explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.&quot;. This is not true. Netbeans 19 actually allows you to use GlassFish 7.0.9 with Java 19 or older, it just reports it&#39;s a 7.0.6 version. Netbeans 19 doesn&#39;t permit to run any GlassFish version with Java 21, even 7.0.6. And if you look at <a href=\"https://glassfish.org/download_gf7.html\" rel=\"nofollow noreferrer\">glassfish.org/download_gf7.html</a>, you&#39;ll see that GlassFish runs on Java 21, just some tests don&#39;t run on Java 21."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1697771067,"post_id":77213961,"comment_id":136324453,"body_markdown":"@OndroMih OK, no you didn&#39;t misunderstand, and I have edited my answer to change some references to _&quot;NetBeans&quot;_ to _&quot;NetBeans 21&quot;_ for accuracy and clarity. But with respect to GlassFish 7.0.9 running on JDK 21, I&#39;m going by the GlassFish documentation which states (from your link) _&quot;the TCK as a whole is not JDK 21 compatible yet&quot;_. I interpret that to imply that GlassFish 7.0.9 is not currently supported under JDK 21. (How can it be? Some tests not running on JDK21 is not a trivial issue.) However, if that&#39;s not the case then the documentation needs to be updated to clarify the situation.","body":"@OndroMih OK, no you didn&#39;t misunderstand, and I have edited my answer to change some references to <i>&quot;NetBeans&quot;</i> to <i>&quot;NetBeans 21&quot;</i> for accuracy and clarity. But with respect to GlassFish 7.0.9 running on JDK 21, I&#39;m going by the GlassFish documentation which states (from your link) <i>&quot;the TCK as a whole is not JDK 21 compatible yet&quot;</i>. I interpret that to imply that GlassFish 7.0.9 is not currently supported under JDK 21. (How can it be? Some tests not running on JDK21 is not a trivial issue.) However, if that&#39;s not the case then the documentation needs to be updated to clarify the situation."},{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1697924074,"post_id":77213961,"comment_id":136341129,"body_markdown":"I agree, GlassFish documentation isn&#39;t clear. But the whole Jakarta EE TCK cannot be executed on Java 21, because some tests require Java features dropped in Java 21. That doesn&#39;t mean that GlassFish doesn&#39;t run or isn&#39;t supported on Java 21. It only means that it cannot be certified as Jakarta EE 10 server with Java 21. GlassFish runs just fine on Java 21, it can even be compiled with Java 21, it&#39;s just not documented very well.","body":"I agree, GlassFish documentation isn&#39;t clear. But the whole Jakarta EE TCK cannot be executed on Java 21, because some tests require Java features dropped in Java 21. That doesn&#39;t mean that GlassFish doesn&#39;t run or isn&#39;t supported on Java 21. It only means that it cannot be certified as Jakarta EE 10 server with Java 21. GlassFish runs just fine on Java 21, it can even be compiled with Java 21, it&#39;s just not documented very well."},{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1697930199,"post_id":77213961,"comment_id":136341478,"body_markdown":"I asked the GlassFish team to update the documentation. It now says GlassFish 7.0.9 &quot;compiles and runs on JDK 11 to JDK 21&quot;.","body":"I asked the GlassFish team to update the documentation. It now says GlassFish 7.0.9 &quot;compiles and runs on JDK 11 to JDK 21&quot;."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1698041179,"post_id":77213961,"comment_id":136349894,"body_markdown":"@OndroMih Yes, I see that change, and I think I now understand the situation. Also, FYI I have updated the _Solution_ section of my answer since there is [new NetBeans Bug Report #6542](https://github.com/apache/netbeans/pull/6542) which confirms that support for the latest versions of the JDK and GlassFish will be included in NetBeans 20., due for release in the second half of November.","body":"@OndroMih Yes, I see that change, and I think I now understand the situation. Also, FYI I have updated the <i>Solution</i> section of my answer since there is <a href=\"https://github.com/apache/netbeans/pull/6542\" rel=\"nofollow noreferrer\">new NetBeans Bug Report #6542</a> which confirms that support for the latest versions of the JDK and GlassFish will be included in NetBeans 20., due for release in the second half of November."}],"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698040930,"creation_date":1696233330,"answer_id":77213961,"question_id":77210369,"body_markdown":"**TLDR**:\r\n\r\nYou can&#39;t start GlassFish 7.0.9 within NetBeans 19 when running JDK 21. That combination is simply not supported. As you have discovered, the most recent GlassFish release that NetBeans 19 supports is GlassFish 7.0.6 when using JDK +21.\r\n\r\n**Solution:**\r\n\r\n&lt;strike&gt;Wait for the next quarterly release of NetBeans, which will almost certainly support GlassFish 7.0.9 and JDK 21.&lt;/strike&gt;\r\n\r\nWait for the next quarterly release of NetBeans (NetBeans 20), which will support GlassFish 7.0.9 and JDK 21. NetBeans Bug Report [Add support for GlassFish 7.0.7, 7.0.8, and 7.0.9 #6542](https://github.com/apache/netbeans/pull/6542) documents this planned enhancement.\r\n\r\n\r\n**Workaround**:\r\n\r\nAs you point out, you can run GlassFish 7.0.9 outside of NetBeans 19, and manually deploy your applications to the GlassFish server via its Admin Console. That&#39;s tedious, but straightforward, and may be appropriate since there have been quite a few fixes and enhancements since GlassFish 7.0.6. \r\n\r\n**Explanation**:\r\n\r\nThese are the release dates for the software products you are using:\r\n- NetBeans 19 was released on September 1, 2023.\r\n- JDK 21 was released on September 19, 2023.\r\n- GlassFish 7.0.9 was released on September 29, 2023.\r\n\r\nThat&#39;s a lot of cutting edge technology. To state the obvious, NetBeans 19 necessarily cannot be expected to offer formal support for products released after its own release date, because those products cannot have been fully tested. Therefore, NetBeans 19 does not formally support JDK 21 or GlassFish 7.0.9. From the [Release Notes for NetBeans 19][1]:\r\n\r\n&gt; _The Apache NetBeans 19 binary releases require JDK 11+, and officially\r\n&gt; support running on JDK 11, 17 and 20_.\r\n\r\nSimilarly, [GlassFish 7.0.9 is not formally supported under JDK 21][2], and its Release Notes explicitly state that:\r\n\r\n&gt; _This release prepares GlassFish for the upcoming JDK 21; it compiles\r\n&gt; and passes all internal tests using OpenJDK 21ea35. Several TCKs\r\n&gt; passed on JDK 21 as well, but the TCK as a whole is not JDK 21\r\n&gt; compatible yet._\r\n\r\nSo even if NetBeans 19 did support GlassFish 7.0.9, GlassFish itself might not work, and definitely would not be supported, when using JDK 21.\r\n\r\nNotes:\r\n\r\n- The readme for GlassFish 7.0.6 states: _&quot;Eclipse GlassFish 7.0.9 requires JDK 11 or newer.&quot;_. Based on its own Release Notes I think that&#39;s misleading/wrong, and it should instead state _&quot;Eclipse GlassFish 7.0.9 requires a JDK between JDK 11 and JDK 20.&quot;_.\r\n- There is a distinction between software releases not being supported and software releases not being permitted. For example, NetBeans 19 does not formally support JDK 21, but you can still use it at your own risk. In contrast, NetBeans 19 explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.\r\n\r\n\r\n  [1]: https://netbeans.apache.org/download/nb19/\r\n  [2]: https://glassfish.org/download.html","title":"How to register and start glassfish 7.0.9 from netbeans 19 IDE","body":"<p><strong>TLDR</strong>:</p>\n<p>You can't start GlassFish 7.0.9 within NetBeans 19 when running JDK 21. That combination is simply not supported. As you have discovered, the most recent GlassFish release that NetBeans 19 supports is GlassFish 7.0.6 when using JDK +21.</p>\n<p><strong>Solution:</strong></p>\n<p><strike>Wait for the next quarterly release of NetBeans, which will almost certainly support GlassFish 7.0.9 and JDK 21.</strike></p>\n<p>Wait for the next quarterly release of NetBeans (NetBeans 20), which will support GlassFish 7.0.9 and JDK 21. NetBeans Bug Report <a href=\"https://github.com/apache/netbeans/pull/6542\" rel=\"nofollow noreferrer\">Add support for GlassFish 7.0.7, 7.0.8, and 7.0.9 #6542</a> documents this planned enhancement.</p>\n<p><strong>Workaround</strong>:</p>\n<p>As you point out, you can run GlassFish 7.0.9 outside of NetBeans 19, and manually deploy your applications to the GlassFish server via its Admin Console. That's tedious, but straightforward, and may be appropriate since there have been quite a few fixes and enhancements since GlassFish 7.0.6.</p>\n<p><strong>Explanation</strong>:</p>\n<p>These are the release dates for the software products you are using:</p>\n<ul>\n<li>NetBeans 19 was released on September 1, 2023.</li>\n<li>JDK 21 was released on September 19, 2023.</li>\n<li>GlassFish 7.0.9 was released on September 29, 2023.</li>\n</ul>\n<p>That's a lot of cutting edge technology. To state the obvious, NetBeans 19 necessarily cannot be expected to offer formal support for products released after its own release date, because those products cannot have been fully tested. Therefore, NetBeans 19 does not formally support JDK 21 or GlassFish 7.0.9. From the <a href=\"https://netbeans.apache.org/download/nb19/\" rel=\"nofollow noreferrer\">Release Notes for NetBeans 19</a>:</p>\n<blockquote>\n<p><em>The Apache NetBeans 19 binary releases require JDK 11+, and officially\nsupport running on JDK 11, 17 and 20</em>.</p>\n</blockquote>\n<p>Similarly, <a href=\"https://glassfish.org/download.html\" rel=\"nofollow noreferrer\">GlassFish 7.0.9 is not formally supported under JDK 21</a>, and its Release Notes explicitly state that:</p>\n<blockquote>\n<p><em>This release prepares GlassFish for the upcoming JDK 21; it compiles\nand passes all internal tests using OpenJDK 21ea35. Several TCKs\npassed on JDK 21 as well, but the TCK as a whole is not JDK 21\ncompatible yet.</em></p>\n</blockquote>\n<p>So even if NetBeans 19 did support GlassFish 7.0.9, GlassFish itself might not work, and definitely would not be supported, when using JDK 21.</p>\n<p>Notes:</p>\n<ul>\n<li>The readme for GlassFish 7.0.6 states: <em>&quot;Eclipse GlassFish 7.0.9 requires JDK 11 or newer.&quot;</em>. Based on its own Release Notes I think that's misleading/wrong, and it should instead state <em>&quot;Eclipse GlassFish 7.0.9 requires a JDK between JDK 11 and JDK 20.&quot;</em>.</li>\n<li>There is a distinction between software releases not being supported and software releases not being permitted. For example, NetBeans 19 does not formally support JDK 21, but you can still use it at your own risk. In contrast, NetBeans 19 explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.</li>\n</ul>\n"}],"owner":{"account_id":2042955,"reputation":1341,"user_id":1823710,"accept_rate":59,"display_name":"qualebs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698040930,"creation_date":1696161157,"question_id":77210369,"body_markdown":"I have done a fresh installation of JDK 21 installed Netbeans 19 IDE.\r\n`java --version` gives the output `java 21 2023-09-19 LTS\r\nJava(TM) SE Runtime Environment (build 21+35-LTS-2513)\r\nJava HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing)\r\n` \r\nIn then I started netbeans and created a new project &gt; servers clicked add server &gt; then from the list I can only see chose netbeans 7.0.6 as the latest version. But my I had already downloaded glassfish 7.0.9 and netbeans can see detect it from the glassfish directory so I click next to add. Problem is that netbeans still sees it as glassfish 7.0.6. When i try to run my project I get an error `Could not find Java SE Development Kit to start GlassFish Server,`But in the `glassfish/bin` directory I can start glassfish with the command `./asadmin start-domain domain1` \r\n\r\nHow do I properly register glassfish 7.0.9 to netbeans and is it even supported. I have also confirmed that the JDK platform is properly added as shown in the attached image. [![enter image description here](https://i.stack.imgur.com/HmmSd.png)](https://i.stack.imgur.com/HmmSd.png)\r\n\r\nIn summary I have tried all versions of glassfish 7.x.x in netbeans. I have downloaded a stand alone instance and tried to register it to netbeans. I downgraded to netbeans 18 with jdk 17 and followed the same exact steps and the server worked.","title":"How to register and start glassfish 7.0.9 from netbeans 19 IDE","body":"<p>I have done a fresh installation of JDK 21 installed Netbeans 19 IDE.\n<code>java --version</code> gives the output <code>java 21 2023-09-19 LTS Java(TM) SE Runtime Environment (build 21+35-LTS-2513) Java HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing) </code>\nIn then I started netbeans and created a new project &gt; servers clicked add server &gt; then from the list I can only see chose netbeans 7.0.6 as the latest version. But my I had already downloaded glassfish 7.0.9 and netbeans can see detect it from the glassfish directory so I click next to add. Problem is that netbeans still sees it as glassfish 7.0.6. When i try to run my project I get an error <code>Could not find Java SE Development Kit to start GlassFish Server,</code>But in the <code>glassfish/bin</code> directory I can start glassfish with the command <code>./asadmin start-domain domain1</code></p>\n<p>How do I properly register glassfish 7.0.9 to netbeans and is it even supported. I have also confirmed that the JDK platform is properly added as shown in the attached image. <a href=\"https://i.stack.imgur.com/HmmSd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HmmSd.png\" alt=\"enter image description here\" /></a></p>\n<p>In summary I have tried all versions of glassfish 7.x.x in netbeans. I have downloaded a stand alone instance and tried to register it to netbeans. I downgraded to netbeans 18 with jdk 17 and followed the same exact steps and the server worked.</p>\n"},{"tags":["java","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1698069775,"post_id":77342832,"comment_id":136354994,"body_markdown":"What you are suggesting makes no sense; there is a separate listener container for each topic; they are independent. Please provide an [MCRE](https://stackoverflow.com/help/minimal-reproducible-example) that exhibits this behavior. Also `maxAttempts` is total attempts (including the first) so 4 retries only.","body":"What you are suggesting makes no sense; there is a separate listener container for each topic; they are independent. Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCRE</a> that exhibits this behavior. Also <code>maxAttempts</code> is total attempts (including the first) so 4 retries only."}],"owner":{"account_id":22922007,"reputation":5,"user_id":17057696,"display_name":"Vasily"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698040437,"creation_date":1698039648,"question_id":77342832,"body_markdown":"**KafkaProducerConfiguration.java:**\r\n```\r\n@Configuration\r\npublic class KafkaProducerConfiguration {\r\n\r\n    @Bean\r\n    public ProducerFactory&lt;String, String&gt; producerFactory(KafkaProperties kafkaProperties) {\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(kafkaProperties.buildProducerProperties());\r\n    }\r\n\r\n    @Bean\r\n    public KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer(ProducerFactory&lt;String, String&gt; producerFactory) {\r\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\r\n\r\n        kafkaTemplate.setObservationEnabled(true);\r\n\r\n        return kafkaTemplate;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**KafkaConsumerConfiguration.java:**\r\n```\r\n@Configuration\r\npublic class KafkaConsumerConfiguration {\r\n\r\n    @Value(&quot;${spring.kafka.consumer.bootstrap-servers}&quot;)\r\n    private String kafkaBootstrapServer;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\r\n    private String kafkaGroupId;\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, String&gt; applicationIdConsumerFactory() {\r\n        Map&lt;String, Object&gt; kafkaConsumerConfigurationProperties = Map.ofEntries(\r\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapServer),\r\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId)\r\n        );\r\n\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerConfigurationProperties, new StringDeserializer(), new StringDeserializer());\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; applicationIdKafkaListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n\r\n        factory.getContainerProperties().setObservationEnabled(true);\r\n        factory.setConsumerFactory(applicationIdConsumerFactory());\r\n\r\n        return factory;\r\n    }\r\n}\r\n```\r\n**KafkaRetryConfiguration.java:**\r\n\r\n```\r\n@Configuration\r\n@EnableKafkaRetryTopic\r\npublic class KafkaRetryConfiguration {\r\n\r\n    @Bean\r\n    public RetryTopicConfiguration applicationIdRetryTopic(@Value(&quot;${application.kafka.topic}&quot;) String topic,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.attempts}&quot;) Integer attempts,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.delay}&quot;) Integer delay,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.multiplier}&quot;) Integer multiplier,\r\n                                                               KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer) {\r\n        return RetryTopicConfigurationBuilder\r\n                .newInstance()\r\n                .maxAttempts(attempts)\r\n                .exponentialBackoff(delay, multiplier, delay * (long) Math.pow(multiplier, attempts - 1))\r\n                .notRetryOn(List.of(\r\n                        DeserializationException.class, MessageConversionException.class, MethodArgumentResolutionException.class,\r\n                        NoSuchMethodException.class, ClassCastException.class, java.lang.IllegalStateException.class\r\n                ))\r\n                .includeTopics(Collections.singletonList(topic))\r\n                .create(applicationIdKafkaProducer);\r\n    }\r\n}\r\n```\r\n\r\n**application.properties:**\r\n```\r\nspring.kafka.properties.security.protocol=PLAINTEXT\r\nspring.kafka.consumer.bootstrap-servers=http://localhost:9092\r\nspring.kafka.consumer.group-id=refusal-application-filter-group\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\n\r\napplication.kafka.topic=RAF.APPLICATION.IN\r\napplication.kafka.topic.retry.attempts=5\r\napplication.kafka.topic.retry.delay=2400\r\napplication.kafka.topic.retry.multiplier=5\r\n```\r\n\r\n**@KafkaListener method:**\r\n```\r\n    @KafkaListener(\r\n            id = &quot;${spring.kafka.consumer.group-id}&quot;,\r\n            topics = &quot;${application.kafka.topic}&quot;,\r\n            containerFactory = &quot;applicationIdKafkaListenerContainerFactory&quot;\r\n    )\r\n    public void listenApplicationId(@Header(&quot;kafka_original-topic&quot;) String topic,\r\n                                    @Header(&quot;retry_topic-attempts&quot;) Integer attempt,\r\n                                    @Headers MessageHeaders messageHeaders,\r\n                                    String applicationId) throws CustomWrongResponseException {\r\n        log.info(&quot;Message &#39;{}&#39; was received from topic {}, attempt: {}&quot;, applicationId, topic, attempt);\r\n\r\n        try {\r\n            applicationService.sendApplication(applicationId);\r\n\r\n            log.info(&quot;Processing message &#39;{}&#39; from topic {} is finished&quot;, applicationId, topic);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Process message id &#39;{}&#39; from topic {} is violated:&quot;, applicationId, topic, e);\r\n\r\n            throw e;\r\n        }\r\n    }\r\n```\r\n\r\n**Created topics** (there is one partition everywhere):\r\n```\r\nRAF.APPLICATION.IN-0\r\nRAF.APPLICATION.IN-dlt-0\r\nRAF.APPLICATION.IN-retry-2400-0\r\nRAF.APPLICATION.IN-retry-12000-0\r\nRAF.APPLICATION.IN-retry-60000-0\r\nRAF.APPLICATION.IN-retry-300000-0\r\n```\r\n**Environment:** Java 17, Spring Boot 3.0.6, WildFly 28.0.0, Kafka 2.13 - 3.3.2\r\n\r\nMy goal - consumer reading message from topic `RAF.APPLICATION.IN-0` without big delay (&lt; 1 second, in first time).\r\nBut for some reason consumer reading first retry-topic `RAF.APPLICATION.IN-retry-2400-0` instead main-topic `RAF.APPLICATION.IN-0`.\r\nAccordingly, a delay of 2.4 seconds is obtained.\r\n\r\n**Logs:**\r\n\r\n```\r\n2023-10-23 07:57:34.013 INFO  [default task-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=3357f33254026b7b] ru.naysav.raf.service.ApplicationService: Message &#39;39f78426-8dee-4629-9759-000000000022&#39; successfully produce to topic RAF.APPLICATION.IN\r\n...\r\n2023-10-23 07:57:34.709 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=0e34de57c8add6cf] org.apache.kafka.clients.consumer.KafkaConsumer: [Consumer clientId=consumer-refusal-application-filter-group-retry-2400-1, groupId=refusal-application-filter-group-retry-2400] Seeking to offset 0 for partition RAF.APPLICATION.IN-retry-2400-0\r\n2023-10-23 07:57:36.628 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=eff2518344cd8116] ru.naysav.raf.api.listener.ApplicationIdListener: Message &#39;39f78426-8dee-4629-9759-000000000022&#39; was received from topic RAF.APPLICATION.IN, attempt: 2\r\n```\r\nAt the same time, there is a message in the main-topic `RAF.APPLICATION.IN-0`:\r\n[Offset explorer screen](https://i.stack.imgur.com/3Suy0.png)\r\n\r\n**Additionally: topic `RAF.APPLICATION.IN-retry-1500000-0` was not created, although 5 attempts were indicated**\r\n","title":"Read message lag in Spring Kafka: consumer starts read message from retry topic instead main topic","body":"<p><strong>KafkaProducerConfiguration.java:</strong></p>\n<pre><code>@Configuration\npublic class KafkaProducerConfiguration {\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory(KafkaProperties kafkaProperties) {\n        return new DefaultKafkaProducerFactory&lt;&gt;(kafkaProperties.buildProducerProperties());\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer(ProducerFactory&lt;String, String&gt; producerFactory) {\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\n\n        kafkaTemplate.setObservationEnabled(true);\n\n        return kafkaTemplate;\n    }\n}\n</code></pre>\n<p><strong>KafkaConsumerConfiguration.java:</strong></p>\n<pre><code>@Configuration\npublic class KafkaConsumerConfiguration {\n\n    @Value(&quot;${spring.kafka.consumer.bootstrap-servers}&quot;)\n    private String kafkaBootstrapServer;\n\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\n    private String kafkaGroupId;\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; applicationIdConsumerFactory() {\n        Map&lt;String, Object&gt; kafkaConsumerConfigurationProperties = Map.ofEntries(\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapServer),\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId)\n        );\n\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerConfigurationProperties, new StringDeserializer(), new StringDeserializer());\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; applicationIdKafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n\n        factory.getContainerProperties().setObservationEnabled(true);\n        factory.setConsumerFactory(applicationIdConsumerFactory());\n\n        return factory;\n    }\n}\n</code></pre>\n<p><strong>KafkaRetryConfiguration.java:</strong></p>\n<pre><code>@Configuration\n@EnableKafkaRetryTopic\npublic class KafkaRetryConfiguration {\n\n    @Bean\n    public RetryTopicConfiguration applicationIdRetryTopic(@Value(&quot;${application.kafka.topic}&quot;) String topic,\n                                                               @Value(&quot;${application.kafka.topic.retry.attempts}&quot;) Integer attempts,\n                                                               @Value(&quot;${application.kafka.topic.retry.delay}&quot;) Integer delay,\n                                                               @Value(&quot;${application.kafka.topic.retry.multiplier}&quot;) Integer multiplier,\n                                                               KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer) {\n        return RetryTopicConfigurationBuilder\n                .newInstance()\n                .maxAttempts(attempts)\n                .exponentialBackoff(delay, multiplier, delay * (long) Math.pow(multiplier, attempts - 1))\n                .notRetryOn(List.of(\n                        DeserializationException.class, MessageConversionException.class, MethodArgumentResolutionException.class,\n                        NoSuchMethodException.class, ClassCastException.class, java.lang.IllegalStateException.class\n                ))\n                .includeTopics(Collections.singletonList(topic))\n                .create(applicationIdKafkaProducer);\n    }\n}\n</code></pre>\n<p><strong>application.properties:</strong></p>\n<pre><code>spring.kafka.properties.security.protocol=PLAINTEXT\nspring.kafka.consumer.bootstrap-servers=http://localhost:9092\nspring.kafka.consumer.group-id=refusal-application-filter-group\nspring.kafka.consumer.auto-offset-reset=earliest\n\napplication.kafka.topic=RAF.APPLICATION.IN\napplication.kafka.topic.retry.attempts=5\napplication.kafka.topic.retry.delay=2400\napplication.kafka.topic.retry.multiplier=5\n</code></pre>\n<p><strong>@KafkaListener method:</strong></p>\n<pre><code>    @KafkaListener(\n            id = &quot;${spring.kafka.consumer.group-id}&quot;,\n            topics = &quot;${application.kafka.topic}&quot;,\n            containerFactory = &quot;applicationIdKafkaListenerContainerFactory&quot;\n    )\n    public void listenApplicationId(@Header(&quot;kafka_original-topic&quot;) String topic,\n                                    @Header(&quot;retry_topic-attempts&quot;) Integer attempt,\n                                    @Headers MessageHeaders messageHeaders,\n                                    String applicationId) throws CustomWrongResponseException {\n        log.info(&quot;Message '{}' was received from topic {}, attempt: {}&quot;, applicationId, topic, attempt);\n\n        try {\n            applicationService.sendApplication(applicationId);\n\n            log.info(&quot;Processing message '{}' from topic {} is finished&quot;, applicationId, topic);\n        } catch (Exception e) {\n            log.error(&quot;Process message id '{}' from topic {} is violated:&quot;, applicationId, topic, e);\n\n            throw e;\n        }\n    }\n</code></pre>\n<p><strong>Created topics</strong> (there is one partition everywhere):</p>\n<pre><code>RAF.APPLICATION.IN-0\nRAF.APPLICATION.IN-dlt-0\nRAF.APPLICATION.IN-retry-2400-0\nRAF.APPLICATION.IN-retry-12000-0\nRAF.APPLICATION.IN-retry-60000-0\nRAF.APPLICATION.IN-retry-300000-0\n</code></pre>\n<p><strong>Environment:</strong> Java 17, Spring Boot 3.0.6, WildFly 28.0.0, Kafka 2.13 - 3.3.2</p>\n<p>My goal - consumer reading message from topic <code>RAF.APPLICATION.IN-0</code> without big delay (&lt; 1 second, in first time).\nBut for some reason consumer reading first retry-topic <code>RAF.APPLICATION.IN-retry-2400-0</code> instead main-topic <code>RAF.APPLICATION.IN-0</code>.\nAccordingly, a delay of 2.4 seconds is obtained.</p>\n<p><strong>Logs:</strong></p>\n<pre><code>2023-10-23 07:57:34.013 INFO  [default task-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=3357f33254026b7b] ru.naysav.raf.service.ApplicationService: Message '39f78426-8dee-4629-9759-000000000022' successfully produce to topic RAF.APPLICATION.IN\n...\n2023-10-23 07:57:34.709 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=0e34de57c8add6cf] org.apache.kafka.clients.consumer.KafkaConsumer: [Consumer clientId=consumer-refusal-application-filter-group-retry-2400-1, groupId=refusal-application-filter-group-retry-2400] Seeking to offset 0 for partition RAF.APPLICATION.IN-retry-2400-0\n2023-10-23 07:57:36.628 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=eff2518344cd8116] ru.naysav.raf.api.listener.ApplicationIdListener: Message '39f78426-8dee-4629-9759-000000000022' was received from topic RAF.APPLICATION.IN, attempt: 2\n</code></pre>\n<p>At the same time, there is a message in the main-topic <code>RAF.APPLICATION.IN-0</code>:\n<a href=\"https://i.stack.imgur.com/3Suy0.png\" rel=\"nofollow noreferrer\">Offset explorer screen</a></p>\n<p><strong>Additionally: topic <code>RAF.APPLICATION.IN-retry-1500000-0</code> was not created, although 5 attempts were indicated</strong></p>\n"},{"tags":["java","spring","spring-boot","websocket"],"answers":[{"tags":[],"owner":{"account_id":19573912,"reputation":793,"user_id":14324416,"display_name":"jacky-neo"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609742936,"creation_date":1609742936,"answer_id":65558679,"question_id":65554969,"body_markdown":"I find your code has some error:\r\n1) if you use WebSocket() as client, you should comment withSocktJS() in WebSocketConfig. and like it\r\n``` java\r\n@Configuration\r\n@EnableWebSocket\r\npublic class WebSocketConfig2 implements WebSocketConfigurer {\r\n\r\n    @Override\r\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\r\n                .addInterceptors(new CustomInterceptor())\r\n                .setAllowedOrigins(&quot;*&quot;)\r\n                .setHandshakeHandler(new DefaultHandshakeHandler())\r\n//                .withSockJS()\r\n        ;\r\n    }\r\n}\r\n\r\n```\r\n\r\n2. Your client js code is wrong. there is no ws. You should use exampleSocket to send. like as below\r\n``` javascript\r\n\t            var exampleSocket = new WebSocket(&quot;ws://localhost:8081/ws&quot;, &quot;protocolOne&quot;);\r\n           \t\texampleSocket.onopen = function(ws) {\r\n                    console.log(&#39;-----------------&#39;, ws);\r\n\t\t\t\t\t// Web Socket is connected, send data using send()\r\n\t\t\t\t\texampleSocket.send(&quot;Message to send&quot;);\r\n\t\t\t\t\talert(&quot;Message is sent...&quot;);\r\n           \t\t};\r\n\r\n```\r\n\r\n3. You point a protocol called &#39;protocolOne&#39; when sending websocket in client, you should return it back in CustomInterceptor. You can do as below.\r\n``` java\r\npublic class CustomInterceptor implements HandshakeInterceptor {\r\n    @Override\r\n    public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\r\n        if(serverHttpRequest.getHeaders() == null )\r\n            return ;\r\n        if(serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;) == null)\r\n            return ;\r\n        String protocol = (String) serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;).get(0);\r\n        if(protocol == null)\r\n            return ;\r\n\r\n        serverHttpResponse.getHeaders().add(&quot;Sec-WebSocket-Protocol&quot;, protocol);\r\n\r\n    }\r\n\r\n}\r\n\r\n```","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>I find your code has some error:</p>\n<ol>\n<li>if you use WebSocket() as client, you should comment withSocktJS() in WebSocketConfig. and like it</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig2 implements WebSocketConfigurer {\n\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\n                .addInterceptors(new CustomInterceptor())\n                .setAllowedOrigins(&quot;*&quot;)\n                .setHandshakeHandler(new DefaultHandshakeHandler())\n//                .withSockJS()\n        ;\n    }\n}\n\n</code></pre>\n<ol start=\"2\">\n<li>Your client js code is wrong. there is no ws. You should use exampleSocket to send. like as below</li>\n</ol>\n<pre class=\"lang-js prettyprint-override\"><code>                var exampleSocket = new WebSocket(&quot;ws://localhost:8081/ws&quot;, &quot;protocolOne&quot;);\n                exampleSocket.onopen = function(ws) {\n                    console.log('-----------------', ws);\n                    // Web Socket is connected, send data using send()\n                    exampleSocket.send(&quot;Message to send&quot;);\n                    alert(&quot;Message is sent...&quot;);\n                };\n\n</code></pre>\n<ol start=\"3\">\n<li>You point a protocol called 'protocolOne' when sending websocket in client, you should return it back in CustomInterceptor. You can do as below.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomInterceptor implements HandshakeInterceptor {\n    @Override\n    public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\n        return true;\n    }\n\n    @Override\n    public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\n        if(serverHttpRequest.getHeaders() == null )\n            return ;\n        if(serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;) == null)\n            return ;\n        String protocol = (String) serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;).get(0);\n        if(protocol == null)\n            return ;\n\n        serverHttpResponse.getHeaders().add(&quot;Sec-WebSocket-Protocol&quot;, protocol);\n\n    }\n\n}\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698086781,"post_id":77342863,"comment_id":136358185,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77342863/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29666459,"reputation":1,"user_id":22736854,"display_name":"frankenstein"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698040113,"creation_date":1698040113,"answer_id":77342863,"question_id":65554969,"body_markdown":"there is an issue in your client side code, yu don&#39;t need to pass ws, instead make it http\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tLFBV.png\r\nheere you can see that http followed by localhost and port if not you rdefault port and then path that you have configured","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>there is an issue in your client side code, yu don't need to pass ws, instead make it http\n<a href=\"https://i.stack.imgur.com/tLFBV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>heere you can see that http followed by localhost and port if not you rdefault port and then path that you have configured</p>\n"}],"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5002,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698040113,"creation_date":1609708204,"question_id":65554969,"body_markdown":"I am trying to implement websockets. My code:\r\n\r\nIn spring security i allow the path w/e authentitcation\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf()\r\n                .disable()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/register&quot;,&quot;/login&quot;,&quot;/testAuth&quot;,&quot;/web&quot;,&quot;/ws&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\nAnd config for ws\r\n\r\n    @Configuration\r\n    @EnableWebSocket\r\n    public class WebSocketConfig implements WebSocketConfigurer {\r\n    \r\n    \r\n        @Override\r\n        public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n            registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\r\n                    .addInterceptors(new CustomInterceptor())\r\n                    .setAllowedOrigins(&quot;*&quot;)\r\n                    .setHandshakeHandler(new DefaultHandshakeHandler())\r\n                    .withSockJS();\r\n        }\r\n    }\r\n`\r\n  \r\n\r\n      public class CustomInterceptor implements HandshakeInterceptor {\r\n            @Override\r\n            public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\r\n                return true;\r\n            }\r\n        \r\n            @Override\r\n            public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\r\n        \r\n            }\r\n        }\r\n\r\nAs client i use simple js code:\r\n\r\n    var exampleSocket = new WebSocket(&quot;ws://localhost:8080/ws&quot;, &quot;protocolOne&quot;);\r\n               exampleSocket.onopen = function() {\r\n                  \r\n                  // Web Socket is connected, send data using send()\r\n                  ws.send(&quot;Message to send&quot;);\r\n                  alert(&quot;Message is sent...&quot;);\r\n               };\r\n\r\nHowever i recieve error:\r\n\r\n&gt; WebSocket connection to &#39;ws://localhost:8080/ws&#39; failed: Error during\r\n&gt; WebSocket handshake: Unexpected response code: 400\r\n\r\nWhat is causing this? Everything should be correct. Thanks for answer\r\n\r\n","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>I am trying to implement websockets. My code:</p>\n<p>In spring security i allow the path w/e authentitcation</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity.csrf()\n            .disable()\n            .authorizeRequests()\n            .antMatchers(&quot;/register&quot;,&quot;/login&quot;,&quot;/testAuth&quot;,&quot;/web&quot;,&quot;/ws&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .exceptionHandling()\n            .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n            .and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n<p>And config for ws</p>\n<pre><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig implements WebSocketConfigurer {\n\n\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\n                .addInterceptors(new CustomInterceptor())\n                .setAllowedOrigins(&quot;*&quot;)\n                .setHandshakeHandler(new DefaultHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>`</p>\n<pre><code>  public class CustomInterceptor implements HandshakeInterceptor {\n        @Override\n        public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\n            return true;\n        }\n    \n        @Override\n        public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\n    \n        }\n    }\n</code></pre>\n<p>As client i use simple js code:</p>\n<pre><code>var exampleSocket = new WebSocket(&quot;ws://localhost:8080/ws&quot;, &quot;protocolOne&quot;);\n           exampleSocket.onopen = function() {\n              \n              // Web Socket is connected, send data using send()\n              ws.send(&quot;Message to send&quot;);\n              alert(&quot;Message is sent...&quot;);\n           };\n</code></pre>\n<p>However i recieve error:</p>\n<blockquote>\n<p>WebSocket connection to 'ws://localhost:8080/ws' failed: Error during\nWebSocket handshake: Unexpected response code: 400</p>\n</blockquote>\n<p>What is causing this? Everything should be correct. Thanks for answer</p>\n"},{"tags":["java","xml","xpath","namespaces"],"comments":[{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1697801029,"post_id":77329916,"comment_id":136328535,"body_markdown":"I would rather think that you overlooked the default namespace declaration `xmlns=&quot;http://www.w3.org/2005/Atom&quot;` on the root element that is also in scope for `entry` to your attempt with `//entry` doesn&#39;t select anything as it selects `entry` elements in no namespace.","body":"I would rather think that you overlooked the default namespace declaration <code>xmlns=&quot;http:&#47;&#47;www.w3.org&#47;2005&#47;Atom&quot;</code> on the root element that is also in scope for <code>entry</code> to your attempt with <code>&#47;&#47;entry</code> doesn&#39;t select anything as it selects <code>entry</code> elements in no namespace."},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1697801155,"post_id":77329916,"comment_id":136328558,"body_markdown":"And of course the problem with `//*[local-name()=&#39;Modified&#39;]` is that it looks through the whole context document so you want `.//d:Modified` or `.//*[local-name() = &#39;Modified&#39;]`, if you prefer that hack.","body":"And of course the problem with <code>&#47;&#47;*[local-name()=&#39;Modified&#39;]</code> is that it looks through the whole context document so you want <code>.&#47;&#47;d:Modified</code> or <code>.&#47;&#47;*[local-name() = &#39;Modified&#39;]</code>, if you prefer that hack."},{"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"score":0,"creation_date":1697805420,"post_id":77329916,"comment_id":136329324,"body_markdown":"@MartinHonnen : I tried adding the default namespace, but maybe I did it wrong. Can you maybe give me an example for how that would look in this case? This whole namespace thing is very confusing for me.","body":"@MartinHonnen : I tried adding the default namespace, but maybe I did it wrong. Can you maybe give me an example for how that would look in this case? This whole namespace thing is very confusing for me."}],"answers":[{"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1697812852,"post_id":77331046,"comment_id":136330789,"body_markdown":"You should be able to use `String searchString =  &quot;.//*[local-name()=&#39;Modified&#39;]&quot;;`","body":"You should be able to use <code>String searchString =  &quot;.&#47;&#47;*[local-name()=&#39;Modified&#39;]&quot;;</code>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1697812910,"post_id":77331046,"comment_id":136330806,"body_markdown":"In fact, you should be able to use `String searchString =  &quot;.//d:Modified&quot;;`","body":"In fact, you should be able to use <code>String searchString =  &quot;.&#47;&#47;d:Modified&quot;;</code>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1697813170,"post_id":77331046,"comment_id":136330870,"body_markdown":"But I wouldn&#39;t expect `//entry` to select anything (because the element is in a namespace) and I certainly wouldn&#39;t expect `//entries` to select anything (because there&#39;s no such element). I suspect that in your frustration you are making little mistakes: try sleeping on it overnight.","body":"But I wouldn&#39;t expect <code>&#47;&#47;entry</code> to select anything (because the element is in a namespace) and I certainly wouldn&#39;t expect <code>&#47;&#47;entries</code> to select anything (because there&#39;s no such element). I suspect that in your frustration you are making little mistakes: try sleeping on it overnight."},{"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"score":0,"creation_date":1698038548,"post_id":77331046,"comment_id":136349635,"body_markdown":"@MichaelKay I made a mistake in the post, the XPath for getting the entries is `/feed/entry`, and that works just fine for getting all the entries. However, the `.//d:Modified` XPath always returns an empty result. Meanwhile, the XPath `&quot;.//*[local-name()=&#39;Modified&#39;]&quot;` seems to work and eliminates the need to search out the entryId, so thanks for that! =^,^=","body":"@MichaelKay I made a mistake in the post, the XPath for getting the entries is <code>&#47;feed&#47;entry</code>, and that works just fine for getting all the entries. However, the <code>.&#47;&#47;d:Modified</code> XPath always returns an empty result. Meanwhile, the XPath <code>&quot;.&#47;&#47;*[local-name()=&#39;Modified&#39;]&quot;</code> seems to work and eliminates the need to search out the entryId, so thanks for that! =^,^="}],"tags":[],"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698039638,"creation_date":1697806083,"answer_id":77331046,"question_id":77329916,"body_markdown":"For the record, I have now found something that works. I don&#39;t think it&#39;s ideal, but it _does_ get the job done.\r\n\r\nBasically, what I now do is rely on the fact that I can read the ID from a node once I have it, and then use that ID to build a complete XPath with the namespace-ignore-hack.\r\n\r\nThe whole mess looks somewhat like this:\r\n```\r\npublic String getTargetNodeModified(XPathNodes entries) {\r\n\tNode targetEntry = getTargetNode(entries);\r\n\tString targetEntryId = evaluteXpath(latestEntry, &quot;*&quot;, String.class);\r\n\tString searchString = String.format(\r\n        &quot;//entry[id=&#39;%s&#39;]//*[local-name()=&#39;Modified&#39;]&quot;,\r\n        targetEntryId\r\n    );\r\n\treturn evaluteXpath(targetEntry, searchString, String.class);\r\n}\r\n\r\npublic &lt;T&gt; T evaluteXpath(Object object, String xPathString, Class&lt;T&gt; type) {\r\n\tXPathExpression xPathExpression = xPath.compile(xPathString);\r\n\treturn xPathExpression.evaluateExpression(object, type);\r\n}\t\r\n```\r\n\r\nAgain, I find it very funky that I need to add the `//entry[id=&#39;%s&#39;]` when I&#39;m basing my search on the `targetEntry`, but apparently that&#39;s how it works.\r\n\r\nIf anyone can think of a cleaner solution for this mess, please post it here.\r\n\r\n---\r\nEDIT:\r\n\r\nThanks to one of @Michael Kay &#39;s comments below, I was now able to simplify it to this:\r\n\r\n```\r\npublic String getTargetNodeModified(XPathNodes entries) {\r\n\tNode targetEntry = getTargetNode(entries);\r\n\treturn evaluteXpath(targetEntry, &quot;.//*[local-name()=&#39;Modified&#39;]&quot;, String.class);\r\n}\r\n```","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>For the record, I have now found something that works. I don't think it's ideal, but it <em>does</em> get the job done.</p>\n<p>Basically, what I now do is rely on the fact that I can read the ID from a node once I have it, and then use that ID to build a complete XPath with the namespace-ignore-hack.</p>\n<p>The whole mess looks somewhat like this:</p>\n<pre><code>public String getTargetNodeModified(XPathNodes entries) {\n    Node targetEntry = getTargetNode(entries);\n    String targetEntryId = evaluteXpath(latestEntry, &quot;*&quot;, String.class);\n    String searchString = String.format(\n        &quot;//entry[id='%s']//*[local-name()='Modified']&quot;,\n        targetEntryId\n    );\n    return evaluteXpath(targetEntry, searchString, String.class);\n}\n\npublic &lt;T&gt; T evaluteXpath(Object object, String xPathString, Class&lt;T&gt; type) {\n    XPathExpression xPathExpression = xPath.compile(xPathString);\n    return xPathExpression.evaluateExpression(object, type);\n}   \n</code></pre>\n<p>Again, I find it very funky that I need to add the <code>//entry[id='%s']</code> when I'm basing my search on the <code>targetEntry</code>, but apparently that's how it works.</p>\n<p>If anyone can think of a cleaner solution for this mess, please post it here.</p>\n<hr />\n<p>EDIT:</p>\n<p>Thanks to one of @Michael Kay 's comments below, I was now able to simplify it to this:</p>\n<pre><code>public String getTargetNodeModified(XPathNodes entries) {\n    Node targetEntry = getTargetNode(entries);\n    return evaluteXpath(targetEntry, &quot;.//*[local-name()='Modified']&quot;, String.class);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"score":0,"creation_date":1698036833,"post_id":77333859,"comment_id":136349506,"body_markdown":"But that still does not eliminate the need for the ID. Ideally, what I want to search for is just `//d:Modified` as I iterate over the nodes. I&#39;ll edit my question to make this clear. I tried adjusting my code with the `MyNamespaceContext` and then search for `//b:Modified`, which did not find anything, and when I adjusted my iterator to use `/a:feed/a:entry` to search for the entries, it no longer found any entries at all.","body":"But that still does not eliminate the need for the ID. Ideally, what I want to search for is just <code>&#47;&#47;d:Modified</code> as I iterate over the nodes. I&#39;ll edit my question to make this clear. I tried adjusting my code with the <code>MyNamespaceContext</code> and then search for <code>&#47;&#47;b:Modified</code>, which did not find anything, and when I adjusted my iterator to use <code>&#47;a:feed&#47;a:entry</code> to search for the entries, it no longer found any entries at all."}],"tags":[],"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697837382,"creation_date":1697837382,"answer_id":77333859,"question_id":77329916,"body_markdown":"I think your problem stems from not realizing that the namespace prefixes in the input document does not have to match the prefixes used in the XPath expression. As long as the prefixes resolves to the same Namespace URIs, everything should be ok. Here&#39;s an example:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Document doc = ....\r\n\r\n        XPathFactory xpf = XPathFactory.newDefaultInstance();\r\n\r\n        XPath xp = xpf.newXPath();\r\n        xp.setNamespaceContext(new MyNamespaceContext());\r\n        String template = &quot;//a:entry[a:id=&#39;%s&#39;]//b:Modified&quot;;\r\n        String expr = String.format(template, &quot;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&quot;);\r\n        Element m = (Element) xp.evaluate(expr, doc, XPathConstants.NODE);\r\n        if (m != null) {\r\n            System.out.println(m.getTextContent());\r\n        }\r\n    }\r\n\r\n    static class MyNamespaceContext implements NamespaceContext {\r\n\r\n        private final Map&lt;String, String&gt; mappings = Map.of(\r\n                &quot;a&quot;, &quot;http://www.w3.org/2005/Atom&quot;,\r\n                &quot;b&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;,\r\n                &quot;c&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;\r\n                );\r\n\r\n        @Override\r\n        public String getNamespaceURI(String prefix) {\r\n            return mappings.get(prefix);\r\n        }\r\n        \r\n        // other methods returns null\r\n    }\r\n\r\nExecuting this against your sample prints:\r\n\r\n    2023-10-16T06:46:11Z\r\n","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>I think your problem stems from not realizing that the namespace prefixes in the input document does not have to match the prefixes used in the XPath expression. As long as the prefixes resolves to the same Namespace URIs, everything should be ok. Here's an example:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Document doc = ....\n\n    XPathFactory xpf = XPathFactory.newDefaultInstance();\n\n    XPath xp = xpf.newXPath();\n    xp.setNamespaceContext(new MyNamespaceContext());\n    String template = &quot;//a:entry[a:id='%s']//b:Modified&quot;;\n    String expr = String.format(template, &quot;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&quot;);\n    Element m = (Element) xp.evaluate(expr, doc, XPathConstants.NODE);\n    if (m != null) {\n        System.out.println(m.getTextContent());\n    }\n}\n\nstatic class MyNamespaceContext implements NamespaceContext {\n\n    private final Map&lt;String, String&gt; mappings = Map.of(\n            &quot;a&quot;, &quot;http://www.w3.org/2005/Atom&quot;,\n            &quot;b&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;,\n            &quot;c&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;\n            );\n\n    @Override\n    public String getNamespaceURI(String prefix) {\n        return mappings.get(prefix);\n    }\n    \n    // other methods returns null\n}\n</code></pre>\n<p>Executing this against your sample prints:</p>\n<pre><code>2023-10-16T06:46:11Z\n</code></pre>\n"}],"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77331046,"answer_count":2,"score":0,"last_activity_date":1698039638,"creation_date":1697795158,"question_id":77329916,"body_markdown":"I have an XML file of which I want to address a certain element in Java using an XPath. The problem is that the element is in the d:-namespace, and everything I have tried to add the namespace to the XPath according to the topics on this that I have found did not work. Is the d:-namespace a special namespace that follows different rules?\r\n\r\nFor reference, here is the XML I am trying to work with:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;feed xml:base=&quot;https://company.com/organisation/_api/&quot;\r\n\txmlns=&quot;http://www.w3.org/2005/Atom&quot;\r\n\txmlns:d=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;\r\n\txmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;&gt;\r\n\t&lt;entry m:etag=&quot;&amp;quot;3&amp;quot;&quot;&gt;\r\n\t\t&lt;id&gt;067d7924-2a19-4094-b588-347b0869a19c&lt;/id&gt;\r\n\t\t&lt;content type=&quot;application/xml&quot;&gt;\r\n\t\t\t&lt;m:properties&gt;\r\n\t\t\t\t&lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-06T11:02:47Z&lt;/d:Modified&gt;\r\n\t\t\t&lt;/m:properties&gt;\r\n\t\t&lt;/content&gt;\r\n\t&lt;/entry&gt;\r\n\t&lt;entry m:etag=&quot;&amp;quot;6&amp;quot;&quot;&gt;\r\n\t\t&lt;id&gt;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&lt;/id&gt;\r\n\t\t&lt;content type=&quot;application/xml&quot;&gt;\r\n\t\t\t&lt;m:properties&gt;\r\n\t\t\t\t&lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-16T06:46:11Z&lt;/d:Modified&gt;\r\n\t\t\t&lt;/m:properties&gt;\r\n\t\t&lt;/content&gt;\r\n\t&lt;/entry&gt;\r\n&lt;/feed&gt;\r\n```\r\n\r\nEffectively, I am first getting a list of both entries as `XPathNodes` via the XPath `/feed/entry`, then iterate over them and trying to get the Modified dates via the XPath `//d:Modified`. In theory, that should work, but in practice, it always returns me an empty string.\r\n\r\nI have tried the following for adding the namespace to the XPath, but without any success so far:\r\n\r\nOption A (the answer I found on other threads):\r\n\r\n```\r\n        XPathFactory xf = XPathFactory.newInstance();\r\n        XPath xpath = XPathFactory.newInstance().newXPath();\r\n        xpath.setNamespaceContext(new NamespaceContext() {\r\n            @Override\r\n            public String getNamespaceURI(String prefix) {\r\n                if (&quot;d&quot;.equals(prefix)) {\r\n                    return &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;;\r\n                }\r\n                return null; // Return null for other prefixes\r\n            }\r\n\r\n            @Override\r\n            public String getPrefix(String namespaceURI) {\r\n                throw new UnsupportedOperationException();\r\n            }\r\n\r\n            @Override\r\n            public Iterator&lt;String&gt; getPrefixes(String namespaceURI) {\r\n                throw new UnsupportedOperationException();\r\n            }\r\n        });\r\n```\r\nOption B (something I tried myself):\r\n```\r\n\t\tXPathFactory xf = XPathFactory.newInstance();\r\n\t\tSimpleNamespaceContext namespaceContext = new SimpleNamespaceContext();\r\n\t\tnamespaceContext.bindNamespaceUri(&quot;d&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;);\r\n\t\txPath = xf.newXPath();\r\n\t\txPath.setNamespaceContext(namespaceContext);\r\n```\r\n\r\nOption C (if I do it like that, the code I use to get the entries no longer works and the XPathNodes contains 0 entries)\r\n```\r\n\t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\t\tfactory.setNamespaceAware(true);\r\n\t\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n```\r\n\r\nI have also tried accessing it via the XPath `//*[local-name()=&#39;Modified&#39;]`, but the problem with that is that even if I am already in one specific entry, it still returns to me the Modified nodes of *both* entries (which confused me at first until I realized that all nodes apparently still contain the entire document tree). If I try to access something inside the nodes such as the id (via `//id`), it works nicely and returns just that one correct node. It just doesn&#39;t work with anything in that weird d:-namespace, and I have no idea why.\r\n\r\nCan anyone tell me what I am doing wrong here?\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nTo clarify, my aim is to find all entries, iterate over them and get their &quot;Modified&quot; dates so I can work with that. In essence, this is how I imagine that should look like, but I tried and it doesn&#39;t work that way, forcing me to use the workaround with the node ID and the namespace breaking.\r\n```\r\nNode getMostRecentNode(){\r\n\tDocument document = getDocument();\r\n\tXPathNodes entries = evaluteXpath(itemsDocument, &quot;/feed/entry&quot;, XPathNodes.class);\r\n\tfor (int index = 1; index &lt; entries.size(); index++) {\r\n\t\tNode entry = entries.get(index);\r\n\t\tString modifiedString = evaluteXpath(entry, &quot;//d:Modified&quot;, String.class);\r\n\t\t[...logic for getting most recent node ...]\r\n\t}\r\n}\r\n```\r\nIs this something that could work if I got the namespaces right? Or do I already have an error in my understanding of how XPaths work at this stage?","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>I have an XML file of which I want to address a certain element in Java using an XPath. The problem is that the element is in the d:-namespace, and everything I have tried to add the namespace to the XPath according to the topics on this that I have found did not work. Is the d:-namespace a special namespace that follows different rules?</p>\n<p>For reference, here is the XML I am trying to work with:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;feed xml:base=&quot;https://company.com/organisation/_api/&quot;\n    xmlns=&quot;http://www.w3.org/2005/Atom&quot;\n    xmlns:d=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;\n    xmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;&gt;\n    &lt;entry m:etag=&quot;&amp;quot;3&amp;quot;&quot;&gt;\n        &lt;id&gt;067d7924-2a19-4094-b588-347b0869a19c&lt;/id&gt;\n        &lt;content type=&quot;application/xml&quot;&gt;\n            &lt;m:properties&gt;\n                &lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-06T11:02:47Z&lt;/d:Modified&gt;\n            &lt;/m:properties&gt;\n        &lt;/content&gt;\n    &lt;/entry&gt;\n    &lt;entry m:etag=&quot;&amp;quot;6&amp;quot;&quot;&gt;\n        &lt;id&gt;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&lt;/id&gt;\n        &lt;content type=&quot;application/xml&quot;&gt;\n            &lt;m:properties&gt;\n                &lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-16T06:46:11Z&lt;/d:Modified&gt;\n            &lt;/m:properties&gt;\n        &lt;/content&gt;\n    &lt;/entry&gt;\n&lt;/feed&gt;\n</code></pre>\n<p>Effectively, I am first getting a list of both entries as <code>XPathNodes</code> via the XPath <code>/feed/entry</code>, then iterate over them and trying to get the Modified dates via the XPath <code>//d:Modified</code>. In theory, that should work, but in practice, it always returns me an empty string.</p>\n<p>I have tried the following for adding the namespace to the XPath, but without any success so far:</p>\n<p>Option A (the answer I found on other threads):</p>\n<pre><code>        XPathFactory xf = XPathFactory.newInstance();\n        XPath xpath = XPathFactory.newInstance().newXPath();\n        xpath.setNamespaceContext(new NamespaceContext() {\n            @Override\n            public String getNamespaceURI(String prefix) {\n                if (&quot;d&quot;.equals(prefix)) {\n                    return &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;;\n                }\n                return null; // Return null for other prefixes\n            }\n\n            @Override\n            public String getPrefix(String namespaceURI) {\n                throw new UnsupportedOperationException();\n            }\n\n            @Override\n            public Iterator&lt;String&gt; getPrefixes(String namespaceURI) {\n                throw new UnsupportedOperationException();\n            }\n        });\n</code></pre>\n<p>Option B (something I tried myself):</p>\n<pre><code>        XPathFactory xf = XPathFactory.newInstance();\n        SimpleNamespaceContext namespaceContext = new SimpleNamespaceContext();\n        namespaceContext.bindNamespaceUri(&quot;d&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;);\n        xPath = xf.newXPath();\n        xPath.setNamespaceContext(namespaceContext);\n</code></pre>\n<p>Option C (if I do it like that, the code I use to get the entries no longer works and the XPathNodes contains 0 entries)</p>\n<pre><code>        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n        factory.setNamespaceAware(true);\n        DocumentBuilder builder = factory.newDocumentBuilder();\n</code></pre>\n<p>I have also tried accessing it via the XPath <code>//*[local-name()='Modified']</code>, but the problem with that is that even if I am already in one specific entry, it still returns to me the Modified nodes of <em>both</em> entries (which confused me at first until I realized that all nodes apparently still contain the entire document tree). If I try to access something inside the nodes such as the id (via <code>//id</code>), it works nicely and returns just that one correct node. It just doesn't work with anything in that weird d:-namespace, and I have no idea why.</p>\n<p>Can anyone tell me what I am doing wrong here?</p>\n<hr />\n<p>EDIT:</p>\n<p>To clarify, my aim is to find all entries, iterate over them and get their &quot;Modified&quot; dates so I can work with that. In essence, this is how I imagine that should look like, but I tried and it doesn't work that way, forcing me to use the workaround with the node ID and the namespace breaking.</p>\n<pre><code>Node getMostRecentNode(){\n    Document document = getDocument();\n    XPathNodes entries = evaluteXpath(itemsDocument, &quot;/feed/entry&quot;, XPathNodes.class);\n    for (int index = 1; index &lt; entries.size(); index++) {\n        Node entry = entries.get(index);\n        String modifiedString = evaluteXpath(entry, &quot;//d:Modified&quot;, String.class);\n        [...logic for getting most recent node ...]\n    }\n}\n</code></pre>\n<p>Is this something that could work if I got the namespaces right? Or do I already have an error in my understanding of how XPaths work at this stage?</p>\n"},{"tags":["java","spring-boot","google-cloud-pubsub","spring-cloud-gcp"],"answers":[{"comments":[{"owner":{"account_id":375036,"reputation":3318,"user_id":725619,"accept_rate":53,"display_name":"RKodakandla"},"score":0,"creation_date":1698061640,"post_id":77342798,"comment_id":136353247,"body_markdown":"there is no `shutdown()` method on `PublisherFactory`. https://github.com/GoogleCloudPlatform/spring-cloud-gcp/blob/main/spring-cloud-gcp-pubsub/src/main/java/com/google/cloud/spring/pubsub/support/PublisherFactory.java","body":"there is no <code>shutdown()</code> method on <code>PublisherFactory</code>. <a href=\"https://github.com/GoogleCloudPlatform/spring-cloud-gcp/blob/main/spring-cloud-gcp-pubsub/src/main/java/com/google/cloud/spring/pubsub/support/PublisherFactory.java\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/spring-cloud-gcp/blob/main/&hellip;</a>"}],"tags":[],"owner":{"account_id":11733063,"reputation":156,"user_id":8587847,"display_name":"Md Alif Al Amin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698039061,"creation_date":1698039061,"answer_id":77342798,"question_id":77342398,"body_markdown":"You have to explicitly shutdown ***ManagedChannel*** instances when they are no longer needed. To close the channels to release resources.\r\n\r\nWhile using Spring Cloud GCP to work with Pub/Sub.you can explicitly shut down the **PubSubTemplate** and the associated channel when they are no longer needed. You can define a @PreDestroy method in your ***MessagePublisher*** bean to handle the shutdown, here is the code:\r\n\r\n    @PreDestroy\r\n    public void shutdown() {\r\n        log.info(&quot;Shutting down PubSubTemplate and its channels...&quot;);\r\n        pubSubTemplate.getPublisherFactory().shutdown();\r\n    }\r\n\r\n\r\nThe @PreDestroy method is called when the Spring container is shutting down and can be used to perform cleanup tasks like closing resources.\r\n\r\n","title":"How to fix &quot;Previous Channel was not shutdown properly error&quot; when trying to publish multiple messages to GCP Pubsub topic","body":"<p>You have to explicitly shutdown <em><strong>ManagedChannel</strong></em> instances when they are no longer needed. To close the channels to release resources.</p>\n<p>While using Spring Cloud GCP to work with Pub/Sub.you can explicitly shut down the <strong>PubSubTemplate</strong> and the associated channel when they are no longer needed. You can define a @PreDestroy method in your <em><strong>MessagePublisher</strong></em> bean to handle the shutdown, here is the code:</p>\n<pre><code>@PreDestroy\npublic void shutdown() {\n    log.info(&quot;Shutting down PubSubTemplate and its channels...&quot;);\n    pubSubTemplate.getPublisherFactory().shutdown();\n}\n</code></pre>\n<p>The @PreDestroy method is called when the Spring container is shutting down and can be used to perform cleanup tasks like closing resources.</p>\n"}],"owner":{"account_id":375036,"reputation":3318,"user_id":725619,"accept_rate":53,"display_name":"RKodakandla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698039061,"creation_date":1698029122,"question_id":77342398,"body_markdown":"I&#39;m trying to publish messages to GCP pubsub topic using Spring Boot framework. Occasionally running into errors where it says managed channel was not shutdown but I&#39;m not sure where exactly I need to shut it down. \r\n\r\n**GCPPublisherConfig.java**\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class GCPPublisherConfig {\r\n    \r\n        private final AppProperties appProperties;\r\n    \r\n        @Bean\r\n        public PublisherFactory publisherFactory(CredentialsProvider defaultCredentialsProvider) {\r\n            DefaultPublisherFactory factory = new DefaultPublisherFactory(() -&gt; appProperties.getPubsubProjectId());\r\n            factory.setEnableMessageOrdering(true);\r\n            factory.setCredentialsProvider(defaultCredentialsProvider);\r\n            return factory;\r\n        }\r\n    \r\n        @Bean\r\n        public PubSubTemplate pubSubTemplate(\r\n                PublisherFactory publisherFactory, SubscriberFactory subscriberFactory) {\r\n            return new PubSubTemplate(publisherFactory, subscriberFactory);\r\n        }\r\n    \r\n    }\r\n\r\n**MessagePublisher.java**\r\n\r\n    @RequiredArgsConstructor\r\n    @Component\r\n    public class MessagePublisher {\r\n    \r\n        private final PubSubTemplate pubSubTemplate;\r\n        private final AppProperties appProperties;\r\n        private final Gson gson;\r\n    \r\n        public Mono&lt;String&gt; publishMessageToGcpTopic(Message message, String orderingKey){\r\n            log.info(&quot;publishing message to pubsub topic&quot;);\r\n    \r\n            PubsubMessage msgToPublish = PubsubMessage.newBuilder()\r\n                    .setData(ByteString.copyFromUtf8(gson.toJson(message)))\r\n                    .setOrderingKey(orderingKey)\r\n                    .build();\r\n    \r\n            return Mono.fromFuture(\r\n                    this.pubSubTemplate\r\n                    .publish(appProperties.getPubsubTopicId(), msgToPublish)\r\n                    .exceptionally(ex -&gt; {\r\n                        log.error(&quot;error when publishing messaging to gcp&quot;, ex);\r\n                        return &quot;0&quot;;\r\n                    }));\r\n        }\r\n    }\r\n\r\n**AppService.java**\r\n\r\n    @Override\r\n        public Flux&lt;Integer&gt; getData(){\r\n          // this is not the actual service logic. I have created this sample logic to reproduce the error.\r\n               return Flux.range(1, 1000)\r\n                        .map(it -&gt; {\r\n                            log.info(&quot;number - {}&quot;, it);\r\n                            return it;\r\n                        });\r\n        };\r\n\r\n**AppController.java**\r\n\r\n    @GetMapping(&quot;/publish/messages&quot;)\r\n        public Mono&lt;Boolean&gt; testMessages(){\r\n    \r\n            return appService.getData()\r\n                    .flatMap(it -&gt; {\r\n                        EdslMessage edslMessage = EdslMessage.builder().build();\r\n                        messagePublisher.publishMessageToGcpTopic(edslMessage, it);\r\n                        return Mono.just(true);\r\n                    })\r\n                    .switchIfEmpty(Mono.defer(() -&gt; {\r\n                        log.warn(&quot;No entries found for date less than current date&quot;);\r\n                        return Mono.just(false);\r\n                   }))\r\n                    .reduce((a, b) -&gt; a &amp;&amp; b);\r\n    }\r\n\r\n**Error Stacktrace**\r\n\r\n    [ctor-http-nio-3] i.g.i.ManagedChannelOrphanWrapper        : *~*~*~ Previous channel ManagedChannelImpl{logId=571, target=pubsub.googleapis.com:443} was not shutdown properly!!! ~*~*~*\r\n        Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.\r\n    \r\n    java.lang.RuntimeException: ManagedChannel allocation site\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.&lt;init&gt;(ManagedChannelOrphanWrapper.java:102)\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:60)\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:51)\r\n    \tat io.grpc.internal.ManagedChannelImplBuilder.build(ManagedChannelImplBuilder.java:631)\r\n    \tat io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:297)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createSingleChannel(InstantiatingGrpcChannelProvider.java:391)\r\n    \tat com.google.api.gax.grpc.ChannelPool.&lt;init&gt;(ChannelPool.java:107)\r\n    \tat com.google.api.gax.grpc.ChannelPool.create(ChannelPool.java:85)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createChannel(InstantiatingGrpcChannelProvider.java:237)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.getTransportChannel(InstantiatingGrpcChannelProvider.java:231)\r\n    \tat com.google.api.gax.rpc.ClientContext.create(ClientContext.java:236)\r\n    \tat com.google.cloud.pubsub.v1.stub.GrpcPublisherStub.create(GrpcPublisherStub.java:203)\r\n    \tat com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:201)\r\n    \tat com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:91)\r\n    \tat com.google.cloud.pubsub.v1.Publisher$Builder.build(Publisher.java:881)\r\n    \tat com.google.cloud.spring.pubsub.support.DefaultPublisherFactory.createPublisher(DefaultPublisherFactory.java:186)\r\n    \tat com.google.cloud.spring.pubsub.core.publisher.PubSubPublisherTemplate.publish(PubSubPublisherTemplate.java:94)\r\n    \tat com.google.cloud.spring.pubsub.core.PubSubTemplate.publish(PubSubTemplate.java:120)\r\n    \tat org.ascension.swe.myaccount.careteambuilder.replay.MessagePublisher.publishMessageToGcpTopic(MessagePublisher.java:33)\r\n    \tat org.ascension.swe.myaccount.careteambuilder.replay.TestController.lambda$testMessages$1(TestController.java:54)\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:386)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxRange$RangeSubscription.slowPath(FluxRange.java:156)\r\n    \tat reactor.core.publisher.FluxRange$RangeSubscription.request(FluxRange.java:111)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\r\n    \tat reactor.core.publisher.FluxRange.subscribe(FluxRange.java:69)\r\n    \tat reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83)\r\n    \tat reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57)\r\n    \tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\r\n    \tat reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:293)\r\n    \tat reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:474)\r\n    \tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n    \tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\r\n    \tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\r\n    \tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\r\n    \tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\r\n    \tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\r\n    \tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n    \tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413)\r\n    \tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\r\n    \tat reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:651)\r\n    \tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:276)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n\r\n","title":"How to fix &quot;Previous Channel was not shutdown properly error&quot; when trying to publish multiple messages to GCP Pubsub topic","body":"<p>I'm trying to publish messages to GCP pubsub topic using Spring Boot framework. Occasionally running into errors where it says managed channel was not shutdown but I'm not sure where exactly I need to shut it down.</p>\n<p><strong>GCPPublisherConfig.java</strong></p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class GCPPublisherConfig {\n\n    private final AppProperties appProperties;\n\n    @Bean\n    public PublisherFactory publisherFactory(CredentialsProvider defaultCredentialsProvider) {\n        DefaultPublisherFactory factory = new DefaultPublisherFactory(() -&gt; appProperties.getPubsubProjectId());\n        factory.setEnableMessageOrdering(true);\n        factory.setCredentialsProvider(defaultCredentialsProvider);\n        return factory;\n    }\n\n    @Bean\n    public PubSubTemplate pubSubTemplate(\n            PublisherFactory publisherFactory, SubscriberFactory subscriberFactory) {\n        return new PubSubTemplate(publisherFactory, subscriberFactory);\n    }\n\n}\n</code></pre>\n<p><strong>MessagePublisher.java</strong></p>\n<pre><code>@RequiredArgsConstructor\n@Component\npublic class MessagePublisher {\n\n    private final PubSubTemplate pubSubTemplate;\n    private final AppProperties appProperties;\n    private final Gson gson;\n\n    public Mono&lt;String&gt; publishMessageToGcpTopic(Message message, String orderingKey){\n        log.info(&quot;publishing message to pubsub topic&quot;);\n\n        PubsubMessage msgToPublish = PubsubMessage.newBuilder()\n                .setData(ByteString.copyFromUtf8(gson.toJson(message)))\n                .setOrderingKey(orderingKey)\n                .build();\n\n        return Mono.fromFuture(\n                this.pubSubTemplate\n                .publish(appProperties.getPubsubTopicId(), msgToPublish)\n                .exceptionally(ex -&gt; {\n                    log.error(&quot;error when publishing messaging to gcp&quot;, ex);\n                    return &quot;0&quot;;\n                }));\n    }\n}\n</code></pre>\n<p><strong>AppService.java</strong></p>\n<pre><code>@Override\n    public Flux&lt;Integer&gt; getData(){\n      // this is not the actual service logic. I have created this sample logic to reproduce the error.\n           return Flux.range(1, 1000)\n                    .map(it -&gt; {\n                        log.info(&quot;number - {}&quot;, it);\n                        return it;\n                    });\n    };\n</code></pre>\n<p><strong>AppController.java</strong></p>\n<pre><code>@GetMapping(&quot;/publish/messages&quot;)\n    public Mono&lt;Boolean&gt; testMessages(){\n\n        return appService.getData()\n                .flatMap(it -&gt; {\n                    EdslMessage edslMessage = EdslMessage.builder().build();\n                    messagePublisher.publishMessageToGcpTopic(edslMessage, it);\n                    return Mono.just(true);\n                })\n                .switchIfEmpty(Mono.defer(() -&gt; {\n                    log.warn(&quot;No entries found for date less than current date&quot;);\n                    return Mono.just(false);\n               }))\n                .reduce((a, b) -&gt; a &amp;&amp; b);\n}\n</code></pre>\n<p><strong>Error Stacktrace</strong></p>\n<pre><code>[ctor-http-nio-3] i.g.i.ManagedChannelOrphanWrapper        : *~*~*~ Previous channel ManagedChannelImpl{logId=571, target=pubsub.googleapis.com:443} was not shutdown properly!!! ~*~*~*\n    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.\n\njava.lang.RuntimeException: ManagedChannel allocation site\n    at io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.&lt;init&gt;(ManagedChannelOrphanWrapper.java:102)\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:60)\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:51)\n    at io.grpc.internal.ManagedChannelImplBuilder.build(ManagedChannelImplBuilder.java:631)\n    at io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:297)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createSingleChannel(InstantiatingGrpcChannelProvider.java:391)\n    at com.google.api.gax.grpc.ChannelPool.&lt;init&gt;(ChannelPool.java:107)\n    at com.google.api.gax.grpc.ChannelPool.create(ChannelPool.java:85)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createChannel(InstantiatingGrpcChannelProvider.java:237)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.getTransportChannel(InstantiatingGrpcChannelProvider.java:231)\n    at com.google.api.gax.rpc.ClientContext.create(ClientContext.java:236)\n    at com.google.cloud.pubsub.v1.stub.GrpcPublisherStub.create(GrpcPublisherStub.java:203)\n    at com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:201)\n    at com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:91)\n    at com.google.cloud.pubsub.v1.Publisher$Builder.build(Publisher.java:881)\n    at com.google.cloud.spring.pubsub.support.DefaultPublisherFactory.createPublisher(DefaultPublisherFactory.java:186)\n    at com.google.cloud.spring.pubsub.core.publisher.PubSubPublisherTemplate.publish(PubSubPublisherTemplate.java:94)\n    at com.google.cloud.spring.pubsub.core.PubSubTemplate.publish(PubSubTemplate.java:120)\n    at org.ascension.swe.myaccount.careteambuilder.replay.MessagePublisher.publishMessageToGcpTopic(MessagePublisher.java:33)\n    at org.ascension.swe.myaccount.careteambuilder.replay.TestController.lambda$testMessages$1(TestController.java:54)\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:386)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxRange$RangeSubscription.slowPath(FluxRange.java:156)\n    at reactor.core.publisher.FluxRange$RangeSubscription.request(FluxRange.java:111)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxRange.subscribe(FluxRange.java:69)\n    at reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83)\n    at reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:293)\n    at reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:474)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\n    at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\n    at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413)\n    at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\n    at reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:651)\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:276)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n"},{"tags":["java","spring","spring-cloud-gateway"],"owner":{"account_id":21290524,"reputation":53,"user_id":15667610,"display_name":"Camille Ferrous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698038258,"creation_date":1697968481,"question_id":77339452,"body_markdown":"I just started learning spring cloud gateway. I have created a custom GlobalFilter to check the access-key in the request header.The official Spring Cloud Gateway documentation states that a GlobalFilter does not require any configuration and can be activated simply by adding the @Component annotation. I followed this method, but it did not work.\r\nwhen i send a request to gateway ,it just redirect it to backend without filtering it .\r\n\r\nmy springboot version is 3.1.4 and\r\npom.xml is following:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-gateway-webflux&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-gateway-server&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nhere is ApiApplication code :\r\n```\r\n@RestController\r\n@SpringBootApplication\r\npublic class ApiApplication {\r\n\r\n    private String home=&quot;http://localhost:8080&quot;;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(ApiApplication.class);\r\n\r\n\r\n    @GetMapping(&quot;/test&quot;)\r\n    public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; proxy(ProxyExchange&lt;byte[]&gt; proxy){\r\n        return proxy.uri(home + &quot;/cves&quot;).get();\r\n    }\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApiApplication.class, args);}\r\n```\r\nhere is my custom filter code :\r\n\r\n```\r\n@Component\r\npublic class ApiKeyFilter implements GlobalFilter, Ordered {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(ApiKeyFilter.class);\r\n    \r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        String apiKey = exchange.getRequest().getHeaders().getFirst(&quot;access-key&quot;);\r\n        System.out.println(apiKey);\r\n        log.info(&quot;ApiKeyFilter is being called&quot;);\r\n        if (!isValid(apiKey)) {\r\n            exchange.getResponse().setStatusCode(HttpStatusCode.valueOf(HttpStatus.UNAUTHORIZED));\r\n            return exchange.getResponse().setComplete();\r\n        }\r\n    \r\n        return chain.filter(exchange);\r\n    }\r\n    \r\n    private boolean isValid(String apiKey) {\r\n        return &quot;123&quot;.equals(apiKey);\r\n    }\r\n    \r\n    @Override\r\n    public int getOrder() {\r\n        return -100;\r\n    }\r\n}\r\n```\r\nhere is application.yml :\r\n```\r\nspring: cloud: gateway: discovery: locator: enabled: false\r\n```\r\n\r\nAfter starting Spring Boot, I printed out the loaded beans and noticed that ApiKeyFilter had been loaded. However, when I added a breakpoint to its filter method for debugging, I discovered that the program did not enter the filter method at all. In addition, I also tried debugging the default GlobalFilters of Spring Cloud Gateway, such as RemoveCachedBodyFilter, and found that it was not taking effect either.\r\nIf there is any other information you need from me, I would be happy to provide it. Thank you very much for your help.","title":"spring cloud gateway GlobalFilter doesn&#39;t work","body":"<p>I just started learning spring cloud gateway. I have created a custom GlobalFilter to check the access-key in the request header.The official Spring Cloud Gateway documentation states that a GlobalFilter does not require any configuration and can be activated simply by adding the @Component annotation. I followed this method, but it did not work.\nwhen i send a request to gateway ,it just redirect it to backend without filtering it .</p>\n<p>my springboot version is 3.1.4 and\npom.xml is following:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gateway-webflux&lt;/artifactId&gt;\n    &lt;version&gt;4.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gateway-server&lt;/artifactId&gt;\n    &lt;version&gt;4.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>here is ApiApplication code :</p>\n<pre><code>@RestController\n@SpringBootApplication\npublic class ApiApplication {\n\n    private String home=&quot;http://localhost:8080&quot;;\n\n    private static final Logger logger = LoggerFactory.getLogger(ApiApplication.class);\n\n\n    @GetMapping(&quot;/test&quot;)\n    public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; proxy(ProxyExchange&lt;byte[]&gt; proxy){\n        return proxy.uri(home + &quot;/cves&quot;).get();\n    }\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);}\n</code></pre>\n<p>here is my custom filter code :</p>\n<pre><code>@Component\npublic class ApiKeyFilter implements GlobalFilter, Ordered {\n\n    private static final Logger log = LoggerFactory.getLogger(ApiKeyFilter.class);\n    \n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        String apiKey = exchange.getRequest().getHeaders().getFirst(&quot;access-key&quot;);\n        System.out.println(apiKey);\n        log.info(&quot;ApiKeyFilter is being called&quot;);\n        if (!isValid(apiKey)) {\n            exchange.getResponse().setStatusCode(HttpStatusCode.valueOf(HttpStatus.UNAUTHORIZED));\n            return exchange.getResponse().setComplete();\n        }\n    \n        return chain.filter(exchange);\n    }\n    \n    private boolean isValid(String apiKey) {\n        return &quot;123&quot;.equals(apiKey);\n    }\n    \n    @Override\n    public int getOrder() {\n        return -100;\n    }\n}\n</code></pre>\n<p>here is application.yml :</p>\n<pre><code>spring: cloud: gateway: discovery: locator: enabled: false\n</code></pre>\n<p>After starting Spring Boot, I printed out the loaded beans and noticed that ApiKeyFilter had been loaded. However, when I added a breakpoint to its filter method for debugging, I discovered that the program did not enter the filter method at all. In addition, I also tried debugging the default GlobalFilters of Spring Cloud Gateway, such as RemoveCachedBodyFilter, and found that it was not taking effect either.\nIf there is any other information you need from me, I would be happy to provide it. Thank you very much for your help.</p>\n"},{"tags":["java","rest","httprequest","java-http-client"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1642902411,"post_id":70817285,"comment_id":125196366,"body_markdown":"Always use a synchronous call, unless you have a specific reason not to.  It’s simpler and easier to follow.  An asynchronous call might make sense when you want to make sure the current thread does not get held up due the speed of the network, such as when making a call from a Swing and JavaFX application.","body":"Always use a synchronous call, unless you have a specific reason not to.  It’s simpler and easier to follow.  An asynchronous call might make sense when you want to make sure the current thread does not get held up due the speed of the network, such as when making a call from a Swing and JavaFX application."},{"owner":{"account_id":9443476,"reputation":481,"user_id":12645782,"display_name":"Kotaka Danski"},"score":0,"creation_date":1642922010,"post_id":70817285,"comment_id":125198699,"body_markdown":"@VGR All right. A synchronous call is indeed so much easier to implement. Especially since my task is to provide an API, not a GUI or Console app, I guess it would really be an overkill. Thanks.","body":"@VGR All right. A synchronous call is indeed so much easier to implement. Especially since my task is to provide an API, not a GUI or Console app, I guess it would really be an overkill. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":234929,"reputation":909,"user_id":501399,"accept_rate":83,"display_name":"vadipp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698037741,"creation_date":1698037741,"answer_id":77342737,"question_id":70817285,"body_markdown":"1. Async HTTP requests are good in case you need to make many requests in parallel, because you are saving on native thread overhead. This is especially true, if it takes a long time to receive the response from the server. (However, if you are using Virtual threads released in Java 21, this is becoming less relevant).\r\n1. Async requests might be good if you need to make several HTTP requests in parallel, and return any first response that you get, while cancelling other requests.\r\n1. You will have to make async requests, if you are writing code inside an async context already, for example, an asynchronous Spring controller method.","title":"Java HttpClient synchronous vs asynchronous request","body":"<ol>\n<li>Async HTTP requests are good in case you need to make many requests in parallel, because you are saving on native thread overhead. This is especially true, if it takes a long time to receive the response from the server. (However, if you are using Virtual threads released in Java 21, this is becoming less relevant).</li>\n<li>Async requests might be good if you need to make several HTTP requests in parallel, and return any first response that you get, while cancelling other requests.</li>\n<li>You will have to make async requests, if you are writing code inside an async context already, for example, an asynchronous Spring controller method.</li>\n</ol>\n"}],"owner":{"account_id":9443476,"reputation":481,"user_id":12645782,"display_name":"Kotaka Danski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":672,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698037741,"creation_date":1642886825,"question_id":70817285,"body_markdown":"The Java `HttpClient` can send either a synchronous or an asynchronous request. The synchronous method blocks until a response has been received, while the asynchronous does not. But what does this mean for a developer? Generally speaking, I assume that asynchronous should be more efficient. Yet, the fact that synchronous requests exist, means that there are usages for them as well. So the question is:\r\nWhen should I send a synchronous request and when should I send an asynchronous? \r\nMy assumption is there is no specific rule on this but there should be some well-known cases, when one is a particularly better option than the other. \r\n&lt;br&gt; In my current case, I am trying to write an app for searching articles from a web API, which has paging. However, my question is not just about this particular case. I&#39;d like to receive some general tips on how to chose one of the two approaches, as well. ","title":"Java HttpClient synchronous vs asynchronous request","body":"<p>The Java <code>HttpClient</code> can send either a synchronous or an asynchronous request. The synchronous method blocks until a response has been received, while the asynchronous does not. But what does this mean for a developer? Generally speaking, I assume that asynchronous should be more efficient. Yet, the fact that synchronous requests exist, means that there are usages for them as well. So the question is:\nWhen should I send a synchronous request and when should I send an asynchronous?\nMy assumption is there is no specific rule on this but there should be some well-known cases, when one is a particularly better option than the other.\n<br> In my current case, I am trying to write an app for searching articles from a web API, which has paging. However, my question is not just about this particular case. I'd like to receive some general tips on how to chose one of the two approaches, as well.</p>\n"},{"tags":["java","selenium-webdriver","testng","jxl"],"comments":[{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393352318,"post_id":22021793,"comment_id":33383974,"body_markdown":"Well, from this code it looks like you know how data providers work.  All you need to do is give it a 3-D array of String, and it will pass the innermost array to the test.","body":"Well, from this code it looks like you know how data providers work.  All you need to do is give it a 3-D array of String, and it will pass the innermost array to the test."},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393381162,"post_id":22021793,"comment_id":33398031,"body_markdown":"Iam new to this can you please help me in doing this,","body":"Iam new to this can you please help me in doing this,"},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393417037,"post_id":22021793,"comment_id":33416310,"body_markdown":"Hi MrTi, Can you please help me, or give a link to solve this, iam striuck here, Not able to proceed further.","body":"Hi MrTi, Can you please help me, or give a link to solve this, iam striuck here, Not able to proceed further."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393424538,"post_id":22021793,"comment_id":33421991,"body_markdown":"I&#39;m personally against giving out code.  However, I am not against helping you.  Do you understand how arrays work?  If not, there are plenty of resources to help you there.  If you do, what exactly don&#39;t you understand?","body":"I&#39;m personally against giving out code.  However, I am not against helping you.  Do you understand how arrays work?  If not, there are plenty of resources to help you there.  If you do, what exactly don&#39;t you understand?"},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393432206,"post_id":22021793,"comment_id":33427953,"body_markdown":"Hi Thanks for Replying, i was trying to give like this   @DataProvider(name = &quot;DP1&quot;)\npublic Object[][][] createData1() throws Exception{\n  \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\n    return (retObjArr);\n   \n}                                                                   public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n    Object[][][] tabArray=null;","body":"Hi Thanks for Replying, i was trying to give like this   @DataProvider(name = &quot;DP1&quot;) public Object[][][] createData1() throws Exception{   \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);     return (retObjArr);     }                                                                   public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{     Object[][][] tabArray=null;"},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393432453,"post_id":22021793,"comment_id":33428168,"body_markdown":"Please add the code to your description above.  What error is being thrown?","body":"Please add the code to your description above.  What error is being thrown?"}],"answers":[{"comments":[{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393434202,"post_id":22048051,"comment_id":33429577,"body_markdown":"what i understood for the edited code return should be return {{tabArray}}; ? but this is giving error.  ( Syntax error, insert &quot;;&quot; to complete BlockStatements ) sorry iam learning completely new to this.","body":"what i understood for the edited code return should be return {{tabArray}}; ? but this is giving error.  ( Syntax error, insert &quot;;&quot; to complete BlockStatements ) sorry iam learning completely new to this."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393434258,"post_id":22048051,"comment_id":33429620,"body_markdown":"Put a semicolon at the end of the line.  I would recommend learning java before trying to modify code.","body":"Put a semicolon at the end of the line.  I would recommend learning java before trying to modify code."},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393434591,"post_id":22048051,"comment_id":33429871,"body_markdown":"Thanks i will do that ( learning Java) but my doubt is  Object[][][] getTableArray is three dimensional array and Object[][] tabArray is two dimensional array that is causing problem i think so any how i have put semicolon for return {{tabArray}}; but still the same error.","body":"Thanks i will do that ( learning Java) but my doubt is  Object[][][] getTableArray is three dimensional array and Object[][] tabArray is two dimensional array that is causing problem i think so any how i have put semicolon for return {{tabArray}}; but still the same error."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393434782,"post_id":22048051,"comment_id":33430004,"body_markdown":"You are really creating a 4-D array.  Your function can return an `Object[][]` though, because an Object can be anything.  Same error, as in, `insert &quot;;&quot;`?","body":"You are really creating a 4-D array.  Your function can return an <code>Object[][]</code> though, because an Object can be anything.  Same error, as in, <code>insert &quot;;&quot;</code>?"},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393435303,"post_id":22048051,"comment_id":33430330,"body_markdown":"Find the line that is throwing the error, and add a semicolon.  Anyways, my solution will work.  If you get errors, please google them, and figure out what is happening.  If you are still having problems, spend some time learning Java.  You really shouldn&#39;t be modifying code you don&#39;t understand.","body":"Find the line that is throwing the error, and add a semicolon.  Anyways, my solution will work.  If you get errors, please google them, and figure out what is happening.  If you are still having problems, spend some time learning Java.  You really shouldn&#39;t be modifying code you don&#39;t understand."},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393435549,"post_id":22048051,"comment_id":33430458,"body_markdown":"Thank you very Much for your time, i will try myself Thanks once again :)","body":"Thank you very Much for your time, i will try myself Thanks once again :)"}],"tags":[],"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393433706,"creation_date":1393433706,"answer_id":22048051,"question_id":22021793,"body_markdown":"This is how a `@DataProvider` works, assuming I have the following array:\r\n\r\n    [[value1, value2],\r\n     [value3, value4],\r\n     [value5, value6]]\r\n\r\nNote that there are 3 rows and 2 columns.  The Test will be run 3 times, and passed in 2 values each time.  It doesn&#39;t matter what the value is.\r\n\r\nNow, if you want the test to only be run once, your array should look like this:\r\n\r\n    [[value1]]\r\n\r\nWe can make `value1` to be whatever we want it to be, so if `value1` is the array above, then it will pass in the entire array to the dataProvider.  Thus, your return statement should return `{{tabArray}}`\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>This is how a <code>@DataProvider</code> works, assuming I have the following array:</p>\n\n<pre><code>[[value1, value2],\n [value3, value4],\n [value5, value6]]\n</code></pre>\n\n<p>Note that there are 3 rows and 2 columns.  The Test will be run 3 times, and passed in 2 values each time.  It doesn't matter what the value is.</p>\n\n<p>Now, if you want the test to only be run once, your array should look like this:</p>\n\n<pre><code>[[value1]]\n</code></pre>\n\n<p>We can make <code>value1</code> to be whatever we want it to be, so if <code>value1</code> is the array above, then it will pass in the entire array to the dataProvider.  Thus, your return statement should return <code>{{tabArray}}</code></p>\n"},{"tags":[],"owner":{"account_id":5693312,"reputation":387,"user_id":4500645,"accept_rate":67,"display_name":"thekevinmonster"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424466434,"creation_date":1424464300,"answer_id":28637667,"question_id":22021793,"body_markdown":"Looking at your code, you are trying to create a dataprovider function that returns Object[][][]. You cannot do that; the dataprovider function must return either Object[][] (a two dimensional array of any Object), or an Iterator&lt;Object[]&gt; which will perform the same function but in a slightly different way.\r\n\r\nYou can certainly nest another array inside of the 2D array that is returned; that is why it is Object[][] and not a specific type. \r\n\r\nAlso make sure you construct your return result correctly. For example, you can&#39;t do the following because that does not construct the Object[][] array:\r\n\r\n    return {{myArray}};\r\n\r\nInstead, you would do this:\r\n\r\n    return new Object[][]{{myArray}};\r\n\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>Looking at your code, you are trying to create a dataprovider function that returns Object[][][]. You cannot do that; the dataprovider function must return either Object[][] (a two dimensional array of any Object), or an Iterator which will perform the same function but in a slightly different way.</p>\n\n<p>You can certainly nest another array inside of the 2D array that is returned; that is why it is Object[][] and not a specific type. </p>\n\n<p>Also make sure you construct your return result correctly. For example, you can't do the following because that does not construct the Object[][] array:</p>\n\n<pre><code>return {{myArray}};\n</code></pre>\n\n<p>Instead, you would do this:</p>\n\n<pre><code>return new Object[][]{{myArray}};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424467432,"creation_date":1424467049,"answer_id":28638371,"question_id":22021793,"body_markdown":"I think [jxl][1] is harder than it needs to be.  I wrote an example of a TestNG DataProvider [reading Excel data][2] using [Apache MetaModel][3] (which recently became a full fledged Apache project) , and you can find that [here][4].\r\n\r\n    public static Object[][] getCsvData( File csvFile ) \r\n    \t{\t\r\n    \t\tCsvConfiguration conf = new CsvConfiguration( 1 );\r\n    \t\tDataContext csvContext = DataContextFactory.createCsvDataContext( csvFile, conf );\r\n    \t\tSchema schema = csvContext.getDefaultSchema();\r\n    \t\tTable[] tables = schema.getTables();\r\n    \t\tTable table = tables[0]; // a representation of the csv file name including extension\r\n    \t\tDataSet dataSet = csvContext.query()\r\n    \t\t\t\t.from( table )\r\n    \t\t\t\t.selectAll()\r\n    \t\t\t\t.where(&quot;run&quot;).eq(&quot;Y&quot;)\r\n    \t\t\t\t.execute();\r\n    \t\tList&lt;Row&gt; rows = dataSet.toRows();\r\n    \t\tObject[][] myArray = get2ArgArrayFromRows( rows );\r\n    \t\treturn myArray;\r\n    \t}\r\n\r\nAnd second part of that:\r\n\r\n    public static Object[][] get2ArgArrayFromRows( List&lt;Row&gt; rows ) {\r\n    \t\tObject[][] myArray = new Object[rows.size()][2];\r\n    \t\tint i = 0;\r\n    \t\tSelectItem[] cols = rows.get(0).getSelectItems();\r\n    \t\tfor ( Row r : rows ) {\r\n    \t\t\tObject[] data = r.getValues();\r\n    \t\t\tfor ( int j = 0; j &lt; cols.length; j++ ) {\r\n    \t\t\t\tif ( data[j] == null ) data[j] = &quot;&quot;; // force empty string where there are NULL values\r\n    \t\t\t}\r\n    \t\t\tmyArray[i][0] = cols;\r\n    \t\t\tmyArray[i][1] = data;\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t\tlogger.info( &quot;Row count: &quot; + rows.size() );\r\n    \t\tlogger.info( &quot;Column names: &quot; + Arrays.toString( cols ) );\r\n    \t\treturn myArray;\r\n    \t}\r\n\r\nAnd an example of a test that uses this DataProvider:\r\n\r\n    @Test( dataProvider = &quot;csv&quot; )\r\n    public void testPrintCsvRowToLog( SelectItem[] cols, Object[] data ) {\r\n        String theCols = Joiner.on(&quot;|&quot;).join( cols );\r\n    \tString aRow = Joiner.on(&quot;|&quot;).join( data );\r\n    \tlogger.info( theCols ); \r\n        logger.info( aRow ); \r\n    }\r\n\r\n\r\n  [1]: http://jexcelapi.sourceforge.net/\r\n  [2]: https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java\r\n  [3]: http://metamodel.apache.org/\r\n  [4]: https://github.com/djangofan/MetaModelExample\r\n  [5]: https://github.com/djangofan/MetaModelExample\r\n  [6]: https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>I think <a href=\"http://jexcelapi.sourceforge.net/\" rel=\"nofollow\">jxl</a> is harder than it needs to be.  I wrote an example of a TestNG DataProvider <a href=\"https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java\" rel=\"nofollow\">reading Excel data</a> using <a href=\"http://metamodel.apache.org/\" rel=\"nofollow\">Apache MetaModel</a> (which recently became a full fledged Apache project) , and you can find that <a href=\"https://github.com/djangofan/MetaModelExample\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>public static Object[][] getCsvData( File csvFile ) \n    {   \n        CsvConfiguration conf = new CsvConfiguration( 1 );\n        DataContext csvContext = DataContextFactory.createCsvDataContext( csvFile, conf );\n        Schema schema = csvContext.getDefaultSchema();\n        Table[] tables = schema.getTables();\n        Table table = tables[0]; // a representation of the csv file name including extension\n        DataSet dataSet = csvContext.query()\n                .from( table )\n                .selectAll()\n                .where(\"run\").eq(\"Y\")\n                .execute();\n        List&lt;Row&gt; rows = dataSet.toRows();\n        Object[][] myArray = get2ArgArrayFromRows( rows );\n        return myArray;\n    }\n</code></pre>\n\n<p>And second part of that:</p>\n\n<pre><code>public static Object[][] get2ArgArrayFromRows( List&lt;Row&gt; rows ) {\n        Object[][] myArray = new Object[rows.size()][2];\n        int i = 0;\n        SelectItem[] cols = rows.get(0).getSelectItems();\n        for ( Row r : rows ) {\n            Object[] data = r.getValues();\n            for ( int j = 0; j &lt; cols.length; j++ ) {\n                if ( data[j] == null ) data[j] = \"\"; // force empty string where there are NULL values\n            }\n            myArray[i][0] = cols;\n            myArray[i][1] = data;\n            i++;\n        }\n        logger.info( \"Row count: \" + rows.size() );\n        logger.info( \"Column names: \" + Arrays.toString( cols ) );\n        return myArray;\n    }\n</code></pre>\n\n<p>And an example of a test that uses this DataProvider:</p>\n\n<pre><code>@Test( dataProvider = \"csv\" )\npublic void testPrintCsvRowToLog( SelectItem[] cols, Object[] data ) {\n    String theCols = Joiner.on(\"|\").join( cols );\n    String aRow = Joiner.on(\"|\").join( data );\n    logger.info( theCols ); \n    logger.info( aRow ); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14878716,"reputation":133,"user_id":10744050,"display_name":"Rajan Domala"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1580214535,"creation_date":1580214535,"answer_id":59948803,"question_id":22021793,"body_markdown":"You cannot use TestNg Parameter and Dataprovider for @Test annotation.\r\n\r\nBetter to use DataProvider annotation for BeforeTest/Beforeclass annotation and Use @Parameter annotataion for @Test annotation","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>You cannot use TestNg Parameter and Dataprovider for @Test annotation.</p>\n\n<p>Better to use DataProvider annotation for BeforeTest/Beforeclass annotation and Use @Parameter annotataion for @Test annotation</p>\n"}],"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17912,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1698037590,"creation_date":1393349574,"question_id":22021793,"body_markdown":"I&#39;m conducting Automation testing using Selenium Webdriver,  this code is for TestNg `dataprovider`, Summary:  I am taking data from Excel sheet to data,\r\nit&#39;s working fine.   When I&#39;m debugging the code, I&#39;m getting TestData as `testGoogle1(String search1, String Search2)`  for 1st Iteration it `Search1 = Webdriver, Search2 = Qtp, so on,,,,`\r\nWhat I want is that it should directly return the array of values something like `testGoogle1(String search[])` so that in the `@Test` itself I can add my function iterate all the rows and columns and test them.\r\n\r\nCan anyone please give me the idea how to write it.\r\n\r\n\r\nTest Data sheet\r\n\r\n![Test Data ][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/nrHpW.jpg\r\n\r\nhere is my code\r\n\r\n    package ExcelTest;\r\n    import com.thoughtworks.selenium.*;\r\n    import static org.testng.AssertJUnit.*;\r\n    import java.io.IOException;\r\n    import jxl.Cell;\r\n    import jxl.CellType;\r\n    import jxl.Sheet;\r\n    import jxl.Workbook;\r\n    import jxl.read.biff.BiffException;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.testng.annotations.AfterClass;\r\n    import org.testng.annotations.BeforeTest;   \r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;   \r\n    import org.testng.annotations.AfterTest;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.util.Iterator;\r\n    import jxl.*;\r\n    \r\n    \r\n    public class Sample{\r\n    \r\n    \t  WebDriver driver;\r\n    \r\n    \t    @BeforeTest\r\n    \t    public void startTest(){\r\n    \t        driver = Startup.basic();\r\n    \t    } \r\n    \t\r\n    \t\r\n    @DataProvider(name = &quot;DP1&quot;)\r\n    public Object[][] createData1() throws Exception{\r\n      \t Object[][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\r\n        return(retObjArr);\r\n       \r\n    }\r\n    \r\n    @Test (dataProvider = &quot;DP1&quot;)\r\n    public void testGoogle1(String search1, String Search2) throws Exception{\r\n    //selenium.open(&quot;http://www.google.co.in/&quot;);\r\n    //\tdriver.get(&quot;http://www.google.co.in/&quot;);\r\n    \t\r\n    \t//String hello = search.length;\r\n    //for(int i=0; i&lt; search.length ;i++)\r\n    //{\r\n    System.out.println(&quot;param   &quot; +search);\r\n    Thread.sleep(3000);\r\n    System.out.println(&quot;Opened&quot;);\r\n    WebElement element = driver.findElement(By.name(&quot;q&quot;));\r\n    element.sendKeys(search);\r\n    element.submit();\r\n    System.out.println(&quot;Clicked&quot;);\r\n    }\r\n    //}\r\n    \r\n    @AfterClass\r\n    public void tearDown() throws Exception {\r\n    //selenium.stop();\r\n    }\r\n    \r\n    \r\n    public String[][] getTableArray(String xlFilePath,String sheetName) throws Exception{\r\n           \r\n    \tString[][] tabArray=null;\r\n            \r\n                  \r\n          File inputWorkbook = new File(xlFilePath);\r\n            Workbook w;\r\n            int startRow,startCol, endRow, endCol,ci,cj;\r\n            try {\r\n            \t//w = Workbook.\r\n                w =\tWorkbook.getWorkbook(inputWorkbook);\r\n                // Get the first sheet\r\n                Sheet sheet = w.getSheet(sheetName);\r\n                // Loop over first 10 column and lines\r\n                endRow = sheet.getRows();\r\n                endCol = sheet.getColumns();\r\n                tabArray=new String[endRow-1][endCol-1];\r\n                \r\n                ci=0;\r\n    \r\n                for (int i=1;i&lt;endRow;i++,ci++){\r\n                    cj=0;\r\n                    for (int j=1;j&lt;endCol;j++,cj++){\r\n                \t  \r\n                \t  Cell cell = sheet.getCell(j, i);\r\n                \ttabArray[ci][cj] = cell.getContents(); \r\n                \t  \r\n                    }\r\n                //    System.out.println(&quot;&quot;);\r\n                }\r\n                //file.close();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        \r\n                              \r\n            \r\n            \r\n           return(tabArray);\r\n        }\r\n        \r\n    }\r\n\r\nCan anyone please share any idea ?\r\nThanks\r\n \r\nEdited Code: \r\n\r\n    public class Sample{\r\n    \r\n    \t  WebDriver driver;\r\n    \r\n    \t    @BeforeTest\r\n    \t    public void startTest(){\r\n    \t        driver = Startup.basic();\r\n    \t    } \r\n    \t\r\n    \t\r\n    @DataProvider(name = &quot;DP1&quot;)\r\n    public Object[][][] createData1() throws Exception{\r\n      \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\r\n        return (retObjArr);\r\n       \r\n    }\r\n    \r\n    @Test (dataProvider = &quot;DP1&quot;)\r\n    public void testGoogle1(String search, String het) throws Exception{\r\n    \r\n    System.out.println(&quot;param   &quot; +search);\r\n    Thread.sleep(3000);\r\n    System.out.println(&quot;Opened&quot;);\r\n    WebElement element = driver.findElement(By.name(&quot;q&quot;));\r\n    element.sendKeys(search);\r\n    element.submit();\r\n    System.out.println(&quot;Clicked&quot;);\r\n    }\r\n    //}\r\n    \r\n    @AfterClass\r\n    public void tearDown() throws Exception {\r\n    //selenium.stop();\r\n    }\r\n    \r\n    \r\n    public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\r\n           \r\n    \tObject[][] tabArray=null;\r\n            \r\n                  \r\n          File inputWorkbook = new File(xlFilePath);\r\n            Workbook w;\r\n            int startRow,startCol, endRow, endCol,ci,cj,ck;\r\n            try {\r\n            \t//w = Workbook.\r\n                w =\tWorkbook.getWorkbook(inputWorkbook);\r\n                // Get the first sheet\r\n                Sheet sheet = w.getSheet(sheetName);\r\n                // Loop over first 10 column and lines\r\n                endRow = sheet.getRows();\r\n                endCol = sheet.getColumns();\r\n                tabArray=new String[endRow-1][endCol-1];\r\n                \r\n                ci=0;\r\n    \r\n                for (int i=1;i&lt;endRow;i++,ci++){\r\n                    cj=0;\r\n                    \r\n                    for (int j=1;j&lt;endCol;j++,cj++){\r\n                \t  \r\n                \t  Cell cell = sheet.getCell(j, i);\r\n                \ttabArray[ci][cj] = cell.getContents(); \r\n                \t  \r\n                    }\r\n                //    System.out.println(&quot;&quot;);\r\n                }\r\n                //file.close();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n                              \r\n        \r\n            \r\n           return(tabArray);  /// Here Getting the error **Type mismatch: cannot convert from Object[][] to Object[][][]**\r\n        }\r\n        \r\n    }\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>I'm conducting Automation testing using Selenium Webdriver,  this code is for TestNg <code>dataprovider</code>, Summary:  I am taking data from Excel sheet to data,\nit's working fine.   When I'm debugging the code, I'm getting TestData as <code>testGoogle1(String search1, String Search2)</code>  for 1st Iteration it <code>Search1 = Webdriver, Search2 = Qtp, so on,,,,</code>\nWhat I want is that it should directly return the array of values something like <code>testGoogle1(String search[])</code> so that in the <code>@Test</code> itself I can add my function iterate all the rows and columns and test them.</p>\n\n<p>Can anyone please give me the idea how to write it.</p>\n\n<p>Test Data sheet</p>\n\n<p><img src=\"https://i.stack.imgur.com/nrHpW.jpg\" alt=\"Test Data \"></p>\n\n<p>here is my code</p>\n\n<pre><code>package ExcelTest;\nimport com.thoughtworks.selenium.*;\nimport static org.testng.AssertJUnit.*;\nimport java.io.IOException;\nimport jxl.Cell;\nimport jxl.CellType;\nimport jxl.Sheet;\nimport jxl.Workbook;\nimport jxl.read.biff.BiffException;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.testng.annotations.AfterClass;\nimport org.testng.annotations.BeforeTest;   \nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;   \nimport org.testng.annotations.AfterTest;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.util.Iterator;\nimport jxl.*;\n\n\npublic class Sample{\n\n      WebDriver driver;\n\n        @BeforeTest\n        public void startTest(){\n            driver = Startup.basic();\n        } \n\n\n@DataProvider(name = \"DP1\")\npublic Object[][] createData1() throws Exception{\n     Object[][] retObjArr=getTableArray(\"G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls\",\"DataPool\");\n    return(retObjArr);\n\n}\n\n@Test (dataProvider = \"DP1\")\npublic void testGoogle1(String search1, String Search2) throws Exception{\n//selenium.open(\"http://www.google.co.in/\");\n//  driver.get(\"http://www.google.co.in/\");\n\n    //String hello = search.length;\n//for(int i=0; i&lt; search.length ;i++)\n//{\nSystem.out.println(\"param   \" +search);\nThread.sleep(3000);\nSystem.out.println(\"Opened\");\nWebElement element = driver.findElement(By.name(\"q\"));\nelement.sendKeys(search);\nelement.submit();\nSystem.out.println(\"Clicked\");\n}\n//}\n\n@AfterClass\npublic void tearDown() throws Exception {\n//selenium.stop();\n}\n\n\npublic String[][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n\n    String[][] tabArray=null;\n\n\n      File inputWorkbook = new File(xlFilePath);\n        Workbook w;\n        int startRow,startCol, endRow, endCol,ci,cj;\n        try {\n            //w = Workbook.\n            w = Workbook.getWorkbook(inputWorkbook);\n            // Get the first sheet\n            Sheet sheet = w.getSheet(sheetName);\n            // Loop over first 10 column and lines\n            endRow = sheet.getRows();\n            endCol = sheet.getColumns();\n            tabArray=new String[endRow-1][endCol-1];\n\n            ci=0;\n\n            for (int i=1;i&lt;endRow;i++,ci++){\n                cj=0;\n                for (int j=1;j&lt;endCol;j++,cj++){\n\n                  Cell cell = sheet.getCell(j, i);\n                tabArray[ci][cj] = cell.getContents(); \n\n                }\n            //    System.out.println(\"\");\n            }\n            //file.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n\n\n\n\n       return(tabArray);\n    }\n\n}\n</code></pre>\n\n<p>Can anyone please share any idea ?\nThanks</p>\n\n<p>Edited Code: </p>\n\n<pre><code>public class Sample{\n\n      WebDriver driver;\n\n        @BeforeTest\n        public void startTest(){\n            driver = Startup.basic();\n        } \n\n\n@DataProvider(name = \"DP1\")\npublic Object[][][] createData1() throws Exception{\n     Object[][][] retObjArr=getTableArray(\"G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls\",\"DataPool\");\n    return (retObjArr);\n\n}\n\n@Test (dataProvider = \"DP1\")\npublic void testGoogle1(String search, String het) throws Exception{\n\nSystem.out.println(\"param   \" +search);\nThread.sleep(3000);\nSystem.out.println(\"Opened\");\nWebElement element = driver.findElement(By.name(\"q\"));\nelement.sendKeys(search);\nelement.submit();\nSystem.out.println(\"Clicked\");\n}\n//}\n\n@AfterClass\npublic void tearDown() throws Exception {\n//selenium.stop();\n}\n\n\npublic Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n\n    Object[][] tabArray=null;\n\n\n      File inputWorkbook = new File(xlFilePath);\n        Workbook w;\n        int startRow,startCol, endRow, endCol,ci,cj,ck;\n        try {\n            //w = Workbook.\n            w = Workbook.getWorkbook(inputWorkbook);\n            // Get the first sheet\n            Sheet sheet = w.getSheet(sheetName);\n            // Loop over first 10 column and lines\n            endRow = sheet.getRows();\n            endCol = sheet.getColumns();\n            tabArray=new String[endRow-1][endCol-1];\n\n            ci=0;\n\n            for (int i=1;i&lt;endRow;i++,ci++){\n                cj=0;\n\n                for (int j=1;j&lt;endCol;j++,cj++){\n\n                  Cell cell = sheet.getCell(j, i);\n                tabArray[ci][cj] = cell.getContents(); \n\n                }\n            //    System.out.println(\"\");\n            }\n            //file.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n\n\n\n       return(tabArray);  /// Here Getting the error **Type mismatch: cannot convert from Object[][] to Object[][][]**\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jvm","jit"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1698051449,"post_id":77342723,"comment_id":136351459,"body_markdown":"Replace “info” with “debug”. I don’t think that the old option `-XX:+PrintCompilation` is relevant to the unified logging configuration.","body":"Replace “info” with “debug”. I don’t think that the old option <code>-XX:+PrintCompilation</code> is relevant to the unified logging configuration."},{"owner":{"account_id":17675286,"reputation":1,"user_id":12830366,"display_name":"FlyChenKai"},"score":0,"creation_date":1698059651,"post_id":77342723,"comment_id":136352874,"body_markdown":"You&#39;re right. I just need to replace “info” with “debug”.\nMy service records the logs rightly now. Thank you very much!","body":"You&#39;re right. I just need to replace “info” with “debug”. My service records the logs rightly now. Thank you very much!"}],"owner":{"account_id":17675286,"reputation":1,"user_id":12830366,"display_name":"FlyChenKai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698037526,"creation_date":1698037349,"question_id":77342723,"body_markdown":"For printing Java JIT compilation logs, I have now used some jvm parameters.But there is no content in the compilation.log.\r\n\r\nThe jvm parameters I have now used:\r\n```\r\n-XX:+PrintCompilation -Xlog:compilation*=info:file=compilation.log:time,uptime,level,tags\r\n```\r\nI want to print the JIT logs with the timestamp.\r\n\r\nThank you for your help first!","title":"How can I print JIT compilation logs to the specified log file in Java 11/17?","body":"<p>For printing Java JIT compilation logs, I have now used some jvm parameters.But there is no content in the compilation.log.</p>\n<p>The jvm parameters I have now used:</p>\n<pre><code>-XX:+PrintCompilation -Xlog:compilation*=info:file=compilation.log:time,uptime,level,tags\n</code></pre>\n<p>I want to print the JIT logs with the timestamp.</p>\n<p>Thank you for your help first!</p>\n"},{"tags":["java","hibernate","grails","groovy","grails-orm"],"comments":[{"owner":{"account_id":1701455,"reputation":299,"user_id":1561397,"display_name":"kaefert"},"score":1,"creation_date":1435838045,"post_id":1692871,"comment_id":50373115,"body_markdown":"I ran into the same exception, for me it was caused by having the same attribute twice in the inheritance path of my entity class","body":"I ran into the same exception, for me it was caused by having the same attribute twice in the inheritance path of my entity class"},{"owner":{"account_id":1291135,"reputation":2869,"user_id":2587343,"display_name":"Vlastimil Ovč&#225;č&#237;k"},"score":0,"creation_date":1453982854,"post_id":1692871,"comment_id":57844766,"body_markdown":"I ran into the same problem as @kaefert (i.e. the same property more than once in inheritance path), but I got the exception only when the same criteria was run twice (calling `list()` twice). Tricky.","body":"I ran into the same problem as @kaefert (i.e. the same property more than once in inheritance path), but I got the exception only when the same criteria was run twice (calling <code>list()</code> twice). Tricky."}],"answers":[{"comments":[{"owner":{"account_id":41025,"reputation":10135,"user_id":119139,"accept_rate":67,"display_name":"nightingale2k1"},"score":4,"creation_date":1257755782,"post_id":1694236,"comment_id":1575504,"body_markdown":"found the problem. \n\nI did a mistake by typing person.relatedPerson = anotherPerson ; somewhere in the code .... doh.","body":"found the problem.   I did a mistake by typing person.relatedPerson = anotherPerson ; somewhere in the code .... doh."},{"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"score":17,"creation_date":1513667828,"post_id":1694236,"comment_id":82729271,"body_markdown":"yes, but why hibernate treats this as a problem? An entity has a collection like a ManyToMany field, and the value is set by looking up from another entity.","body":"yes, but why hibernate treats this as a problem? An entity has a collection like a ManyToMany field, and the value is set by looking up from another entity."},{"owner":{"account_id":12901406,"reputation":413,"user_id":9330112,"display_name":"jakub-adamczewski"},"score":0,"creation_date":1670253515,"post_id":1694236,"comment_id":131827466,"body_markdown":"Look for that type of issues vary carefully, my case was quite hard to find.\nIn my code I had few entities, of types A, B, C, D.\nThere are relations between them\nA oneToOne B\nB oneToMany C - collection of Cs is fetched lazily there\nC oneToMany D - collection of Ds is fetched eagerly there\n\nIn code there was a call using collection of Cs.\nBecause of that call, collection of Cs was fetched, and some of them had same references to collections of Ds.\nThen instance of A was saved, which also saved B, with collection of Cs (and in some cases Cs had reference to same Ds collection).","body":"Look for that type of issues vary carefully, my case was quite hard to find. In my code I had few entities, of types A, B, C, D. There are relations between them A oneToOne B B oneToMany C - collection of Cs is fetched lazily there C oneToMany D - collection of Ds is fetched eagerly there  In code there was a call using collection of Cs. Because of that call, collection of Cs was fetched, and some of them had same references to collections of Ds. Then instance of A was saved, which also saved B, with collection of Cs (and in some cases Cs had reference to same Ds collection)."}],"tags":[],"owner":{"account_id":44712,"reputation":99796,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"comment_count":3,"down_vote_count":0,"up_vote_count":93,"is_accepted":true,"score":93,"last_activity_date":1453979768,"creation_date":1257624286,"answer_id":1694236,"question_id":1692871,"body_markdown":"Hibernate shows this error when you attempt to persist more than one entity instance sharing the **same** collection reference (i.e. the collection identity in contrast with collection equality).\r\n\r\nNote that it means the same **collection**, not collection element - in other words `relatedPersons` on both `person` and `anotherPerson` must be the same. Perhaps you&#39;re resetting that collection after entities are loaded? Or you&#39;ve initialized both references with the same collection instance?","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Hibernate shows this error when you attempt to persist more than one entity instance sharing the <strong>same</strong> collection reference (i.e. the collection identity in contrast with collection equality).</p>\n\n<p>Note that it means the same <strong>collection</strong>, not collection element - in other words <code>relatedPersons</code> on both <code>person</code> and <code>anotherPerson</code> must be the same. Perhaps you're resetting that collection after entities are loaded? Or you've initialized both references with the same collection instance?</p>\n"},{"comments":[{"owner":{"account_id":191954,"reputation":2273,"user_id":432836,"accept_rate":82,"display_name":"vacuum"},"score":0,"creation_date":1348239911,"post_id":7972414,"comment_id":16874546,"body_markdown":"what class should implement clone() ?","body":"what class should implement clone() ?"},{"owner":{"account_id":196134,"reputation":28676,"user_id":439427,"accept_rate":82,"display_name":"Rubens Mariuzzo"},"score":0,"creation_date":1432238110,"post_id":7972414,"comment_id":48855412,"body_markdown":"@vacuum, the domain model.","body":"@vacuum, the domain model."},{"owner":{"account_id":1710594,"reputation":2861,"user_id":1568755,"accept_rate":34,"display_name":"vashishth"},"score":0,"creation_date":1469615162,"post_id":7972414,"comment_id":64606978,"body_markdown":"what would be the solution here?","body":"what would be the solution here?"},{"owner":{"account_id":2139550,"reputation":1499,"user_id":1898576,"accept_rate":61,"display_name":"Bhushan"},"score":5,"creation_date":1520845727,"post_id":7972414,"comment_id":85466263,"body_markdown":"@vashishth Earlier, I was doing `entity1.setCollection(entity2.getCollection())`.\nI solved it by `entity1.setCollection(new HashSet(entity2.getCollection()))`","body":"@vashishth Earlier, I was doing <code>entity1.setCollection(entity2.getCollection())</code>. I solved it by <code>entity1.setCollection(new HashSet(entity2.getCollection()))</code>"},{"owner":{"account_id":300481,"reputation":24692,"user_id":607637,"accept_rate":78,"display_name":"gtiwari333"},"score":0,"creation_date":1528316384,"post_id":7972414,"comment_id":88465726,"body_markdown":"Thanks for the checklist. In my case I was doing `BeanUtils.copyProperties(oldRec, newRec)` in &#39;clone()` method. I updated the `BeanUtils.copyProperties` to skip the newly added `ManyToMany` field as `BeanUtils.copyProperties(oldRec, newRec, newCollectionField)`.","body":"Thanks for the checklist. In my case I was doing <code>BeanUtils.copyProperties(oldRec, newRec)</code> in &#39;clone()` method. I updated the <code>BeanUtils.copyProperties</code> to skip the newly added <code>ManyToMany</code> field as <code>BeanUtils.copyProperties(oldRec, newRec, newCollectionField)</code>."},{"owner":{"account_id":1456294,"reputation":4735,"user_id":1371792,"accept_rate":71,"display_name":"GreenROBO"},"score":0,"creation_date":1643031608,"post_id":7972414,"comment_id":125224352,"body_markdown":"@Bhushan - Got helped from your comment. Thanks","body":"@Bhushan - Got helped from your comment. Thanks"}],"tags":[],"owner":{"account_id":116442,"reputation":1022,"user_id":305327,"display_name":"dgt"},"comment_count":6,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1432238038,"creation_date":1320178949,"answer_id":7972414,"question_id":1692871,"body_markdown":"I had the same problem. In my case, the issue was that someone used BeanUtils to copy the properties of one entity to another, so we ended up having two entities referencing the same collection.\r\n\r\nGiven that I spent some time investigating this issue, I would recommend the following checklist:\r\n\r\n - Look for scenarios like `entity1.setCollection(entity2.getCollection())` and `getCollection` returns the internal reference to the collection (if getCollection() returns a new instance of the collection, then you don&#39;t need to worry).\r\n\r\n - Look if `clone()` has been implemented correctly.\r\n\r\n - Look for `BeanUtils.copyProperties(entity1, entity2)`.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I had the same problem. In my case, the issue was that someone used BeanUtils to copy the properties of one entity to another, so we ended up having two entities referencing the same collection.</p>\n\n<p>Given that I spent some time investigating this issue, I would recommend the following checklist:</p>\n\n<ul>\n<li><p>Look for scenarios like <code>entity1.setCollection(entity2.getCollection())</code> and <code>getCollection</code> returns the internal reference to the collection (if getCollection() returns a new instance of the collection, then you don't need to worry).</p></li>\n<li><p>Look if <code>clone()</code> has been implemented correctly.</p></li>\n<li><p>Look for <code>BeanUtils.copyProperties(entity1, entity2)</code>.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1258953,"reputation":737,"user_id":1217799,"display_name":"Mirimas"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1454496555,"creation_date":1347009078,"answer_id":12315104,"question_id":1692871,"body_markdown":"Explanation on practice. If you try to save your object, e.g.:\r\n\r\n    Set&lt;Folder&gt; folders = message.getFolders();\r\n       folders.remove(inputFolder);\r\n       folders.add(trashFolder);\r\n       message.setFiles(folders);\r\n    MESSAGESDAO.getMessageDAO().save(message);\r\n\r\nyou don&#39;t need to set updated object to a parent object:\r\n\r\n    message.setFiles(folders);\r\n\r\nSimple save your parent object like:\r\n\r\n    Set&lt;Folder&gt; folders = message.getFolders();\r\n       folders.remove(inputFolder);\r\n       folders.add(trashFolder);\r\n       // Not set updated object here\r\n    MESSAGESDAO.getMessageDAO().save(message);","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Explanation on practice. If you try to save your object, e.g.:</p>\n\n<pre><code>Set&lt;Folder&gt; folders = message.getFolders();\n   folders.remove(inputFolder);\n   folders.add(trashFolder);\n   message.setFiles(folders);\nMESSAGESDAO.getMessageDAO().save(message);\n</code></pre>\n\n<p>you don't need to set updated object to a parent object:</p>\n\n<pre><code>message.setFiles(folders);\n</code></pre>\n\n<p>Simple save your parent object like:</p>\n\n<pre><code>Set&lt;Folder&gt; folders = message.getFolders();\n   folders.remove(inputFolder);\n   folders.add(trashFolder);\n   // Not set updated object here\nMESSAGESDAO.getMessageDAO().save(message);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1816124,"reputation":507,"user_id":1651169,"display_name":"ichalos"},"score":3,"creation_date":1573201573,"post_id":38002065,"comment_id":103812073,"body_markdown":"I am sorry, but this is not really helpful as it&#39;s just a simple mistake on your side.","body":"I am sorry, but this is not really helpful as it&#39;s just a simple mistake on your side."}],"tags":[],"owner":{"account_id":5263557,"reputation":127,"user_id":4204338,"accept_rate":100,"display_name":"John Lopez"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466716894,"creation_date":1466716894,"answer_id":38002065,"question_id":1692871,"body_markdown":"In my case, I was copying and pasting code from my other classes, so I did not notice that the getter code was bad written:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;credito&quot;)\r\n    public Set getConceptoses() {\r\n        return this.letrases;\r\n    }\r\n\r\n    public void setConceptoses(Set conceptoses) {\r\n        this.conceptoses = conceptoses;\r\n    }\r\n\r\nAll references ***conceptoses*** but if you look at the get says ***letrases***","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>In my case, I was copying and pasting code from my other classes, so I did not notice that the getter code was bad written:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY, mappedBy = \"credito\")\npublic Set getConceptoses() {\n    return this.letrases;\n}\n\npublic void setConceptoses(Set conceptoses) {\n    this.conceptoses = conceptoses;\n}\n</code></pre>\n\n<p>All references <strong><em>conceptoses</em></strong> but if you look at the get says <strong><em>letrases</em></strong></p>\n"},{"tags":[],"owner":{"account_id":4160185,"reputation":1657,"user_id":3410465,"accept_rate":40,"display_name":"Diego87"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1470844597,"creation_date":1470844597,"answer_id":38878295,"question_id":1692871,"body_markdown":"Reading online the cause of this error can be also an **hibernate bug**, as **workaround** that it seems to work, it is to put a:\r\n\r\n    session.clear()\r\n\r\nYou must to put the clear after getting data and before commit and close, see example:\r\n\r\n    //getting data\r\n    SrReq sr = (SrReq) crit.uniqueResult();\r\n    SrSalesDetailDTO dt=SrSalesDetailMapper.INSTANCE.map(sr);\r\n    //CLEAR            \r\n    session.clear();\r\n    //close session\r\n    session.getTransaction().commit();\r\n    session.close();\r\n    return dt;\r\n\r\n**I use this solution for select to database, for update or insert i don&#39;t know if this solution can work or can cause problems.**\r\n\r\nMy problem is equal at 100% of this: http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Reading online the cause of this error can be also an <strong>hibernate bug</strong>, as <strong>workaround</strong> that it seems to work, it is to put a:</p>\n\n<pre><code>session.clear()\n</code></pre>\n\n<p>You must to put the clear after getting data and before commit and close, see example:</p>\n\n<pre><code>//getting data\nSrReq sr = (SrReq) crit.uniqueResult();\nSrSalesDetailDTO dt=SrSalesDetailMapper.INSTANCE.map(sr);\n//CLEAR            \nsession.clear();\n//close session\nsession.getTransaction().commit();\nsession.close();\nreturn dt;\n</code></pre>\n\n<p><strong>I use this solution for select to database, for update or insert i don't know if this solution can work or can cause problems.</strong></p>\n\n<p>My problem is equal at 100% of this: <a href=\"http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html\" rel=\"noreferrer\">http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html</a></p>\n"},{"tags":[],"owner":{"account_id":4213442,"reputation":421,"user_id":3450440,"display_name":"raji"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1524357855,"creation_date":1500985724,"answer_id":45303327,"question_id":1692871,"body_markdown":"I too got the same issue, someone used `BeanUtils.copyProperties(source, target)`. Here both source and target, are using the same collection as attribute. \r\n\r\nSo i just used the deep copy as below..\r\n\r\n[How to Clone Collection in Java - Deep copy of ArrayList and HashSet](http://javarevisited.blogspot.com/2014/03/how-to-clone-collection-in-java-deep-copy-vs-shallow.html)","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I too got the same issue, someone used <code>BeanUtils.copyProperties(source, target)</code>. Here both source and target, are using the same collection as attribute. </p>\n\n<p>So i just used the deep copy as below..</p>\n\n<p><a href=\"http://javarevisited.blogspot.com/2014/03/how-to-clone-collection-in-java-deep-copy-vs-shallow.html\" rel=\"nofollow noreferrer\">How to Clone Collection in Java - Deep copy of ArrayList and HashSet</a></p>\n"},{"comments":[{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":1,"creation_date":1520876889,"post_id":45543657,"comment_id":85486577,"body_markdown":"This is unnecessarily hard to read because class names are lower case and the code contains unnecessary assignments.","body":"This is unnecessarily hard to read because class names are lower case and the code contains unnecessary assignments."}],"tags":[],"owner":{"account_id":9967151,"reputation":61,"user_id":7374504,"display_name":"Tarun"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1524361838,"creation_date":1502098323,"answer_id":45543657,"question_id":1692871,"body_markdown":"Consider an entity:\r\n\r\n    public class Foo{\r\n    private&lt;user&gt; user;\r\n    /* with getters and setters */\r\n    }\r\n\r\nAnd consider an Business Logic class:\r\n\r\n    class Foo1{\r\n    List&lt;User&gt; user = new ArrayList&lt;&gt;();\r\n    user = foo.getUser();\r\n    }\r\n\r\nHere the user and `foo.getUser()` share the same reference. But saving the two references creates a conflict. \r\n\r\nThe proper usage should be:\r\n\r\n    class Foo1 {\r\n    List&lt;User&gt; user = new ArrayList&lt;&gt;();\r\n    user.addAll(foo.getUser);\r\n    }\r\n\r\nThis avoids the conflict.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Consider an entity:</p>\n\n<pre><code>public class Foo{\nprivate&lt;user&gt; user;\n/* with getters and setters */\n}\n</code></pre>\n\n<p>And consider an Business Logic class:</p>\n\n<pre><code>class Foo1{\nList&lt;User&gt; user = new ArrayList&lt;&gt;();\nuser = foo.getUser();\n}\n</code></pre>\n\n<p>Here the user and <code>foo.getUser()</code> share the same reference. But saving the two references creates a conflict. </p>\n\n<p>The proper usage should be:</p>\n\n<pre><code>class Foo1 {\nList&lt;User&gt; user = new ArrayList&lt;&gt;();\nuser.addAll(foo.getUser);\n}\n</code></pre>\n\n<p>This avoids the conflict.</p>\n"},{"tags":[],"owner":{"account_id":5537559,"reputation":1,"user_id":4395304,"display_name":"Dinesh Angolkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520876996,"creation_date":1516298375,"answer_id":48327591,"question_id":1692871,"body_markdown":"I faced similar exception in my application. After looking into the stacktrace it was clear that exception was thrown within a `FlushEntityEventListener` class.\r\n\r\nIn Hibernate 4.3.7 the `MSLocalSessionFactory` bean no longer supports the `eventListeners` property. Hence, one has to explicitly fetch the service registry from individual Hibernate session beans and then set the required custom event listeners.\r\n\r\nIn the process of adding custom event listeners we need to make sure the corresponding default event listeners are removed from the respective Hibernate session.\r\n\r\nIf the default event listener is not removed then the case arises of two event listeners registered against same event. In this case while iterating over these listeners, against first listeners any collections in the session will be flagged as reached and while processing the same collection against second listener would throw this Hibernate exception.\r\n\r\nSo, make sure that when registering custom listeners corresponding default listeners are removed from registry.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I faced similar exception in my application. After looking into the stacktrace it was clear that exception was thrown within a <code>FlushEntityEventListener</code> class.</p>\n\n<p>In Hibernate 4.3.7 the <code>MSLocalSessionFactory</code> bean no longer supports the <code>eventListeners</code> property. Hence, one has to explicitly fetch the service registry from individual Hibernate session beans and then set the required custom event listeners.</p>\n\n<p>In the process of adding custom event listeners we need to make sure the corresponding default event listeners are removed from the respective Hibernate session.</p>\n\n<p>If the default event listener is not removed then the case arises of two event listeners registered against same event. In this case while iterating over these listeners, against first listeners any collections in the session will be flagged as reached and while processing the same collection against second listener would throw this Hibernate exception.</p>\n\n<p>So, make sure that when registering custom listeners corresponding default listeners are removed from registry.</p>\n"},{"tags":[],"owner":{"account_id":8826227,"reputation":7898,"user_id":6594394,"accept_rate":40,"display_name":"simibac"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589964561,"creation_date":1589964561,"answer_id":61908895,"question_id":1692871,"body_markdown":"My problem was that I had setup an `@ManyToOne` relationship. Maybe if the answers above don&#39;t fix your problem you might want to check the relationship that was mentioned in the error message.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>My problem was that I had setup an <code>@ManyToOne</code> relationship. Maybe if the answers above don't fix your problem you might want to check the relationship that was mentioned in the error message.</p>\n"},{"comments":[{"owner":{"account_id":957028,"reputation":15143,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1594733841,"post_id":62895123,"comment_id":111225051,"body_markdown":"Could you please edit to make this a little more readable?","body":"Could you please edit to make this a little more readable?"}],"tags":[],"owner":{"account_id":19075603,"reputation":1,"user_id":13928948,"display_name":"afsaneh"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594739415,"creation_date":1594729397,"answer_id":62895123,"question_id":1692871,"body_markdown":"In a ***one to many*** and ***many to one*** relationship this error will occur. If you attempt to devote same instance from ***many to one*** entity to more than one instance from ***one to many*** entity. \r\n\r\nFor example, each person can have many books but each of these books can be owned by only one person if you consider more than one owner for a book this issue is raised.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>In a <em><strong>one to many</strong></em> and <em><strong>many to one</strong></em> relationship this error will occur. If you attempt to devote same instance from <em><strong>many to one</strong></em> entity to more than one instance from <em><strong>one to many</strong></em> entity.</p>\n<p>For example, each person can have many books but each of these books can be owned by only one person if you consider more than one owner for a book this issue is raised.</p>\n"},{"comments":[{"owner":{"account_id":12705257,"reputation":399,"user_id":9230755,"display_name":"Artem Namednev"},"score":0,"creation_date":1640362150,"post_id":63177801,"comment_id":124578049,"body_markdown":"You saved my day. I had the same issue, but because of non-unique composite key for many-to-many relation. Thanks a lot! Where can I read about this Hibernate feature?","body":"You saved my day. I had the same issue, but because of non-unique composite key for many-to-many relation. Thanks a lot! Where can I read about this Hibernate feature?"}],"tags":[],"owner":{"account_id":3206624,"reputation":63,"user_id":2707582,"display_name":"MetallFoX"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1596128615,"creation_date":1596127837,"answer_id":63177801,"question_id":1692871,"body_markdown":"I have experienced a great example of reproducing such a problem.\r\nMaybe my experience will help someone one day.\r\n\r\n## Short version ##\r\nCheck that your @Embedded Id of container has no possible collisions.\r\n\r\n## Long version ##\r\nWhen Hibernate instantiates collection wrapper, it searches for already instantiated collection by CollectionKey in internal Map.\r\n\r\nFor Entity with @Embedded id, CollectionKey wraps EmbeddedComponentType and uses @Embedded Id properties for equality checks and hashCode calculation.\r\n\r\nSo if you have two entities with equal @Embedded Ids, Hibernate will instantiate and put new collection by the first key and will find same collection for the second key.\r\nSo two entities with same @Embedded Id will be populated with same collection.\r\n\r\n## Example ##\r\nSuppose you have Account entity which has lazy set of loans.\r\nAnd Account has @Embedded Id consists of several parts(columns).\r\n\r\n    @Entity\r\n    @Table(schema = &quot;SOME&quot;, name = &quot;ACCOUNT&quot;)\r\n    public class Account {\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;account&quot;)\r\n        private Set&lt;Loan&gt; loans;\r\n    \r\n        @Embedded\r\n        private AccountId accountId;\r\n\r\n        ...\r\n    }\r\n\r\n    @Embeddable\r\n    public class AccountId {\r\n        @Column(name = &quot;X&quot;)\r\n        private Long x;\r\n        \r\n        @Column(name = &quot;BRANCH&quot;)\r\n        private String branchId;\r\n        \r\n        @Column(name = &quot;Z&quot;)\r\n        private String z;\r\n\r\n        ...\r\n    }\r\n\r\nThen suppose that Account has additional property mapped by @Embedded Id but has relation to other entity Branch.\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;BRANCH&quot;)\r\n    @MapsId(&quot;accountId.branchId&quot;)\r\n    @NotFound(action = NotFoundAction.IGNORE)//Look at this!\r\n    private Branch branch;\r\n\r\nIt could happen that you have no FK for Account to Brunch relation id DB so Account.BRANCH column can have any value not presented in Branch table.\r\n\r\nAccording to `@NotFound(action = NotFoundAction.IGNORE)` if value is not present in related table, Hibernate will load **null** value for the property.\r\n\r\nIf X and Y columns of two Accounts are same(which is fine), but BRANCH is different and not presented in Branch table, hibernate will load **null** for both and Embedded Ids will be equal.\r\n\r\nSo two CollectionKey objects will be equal and will have same hashCode for different Accounts.\r\n\r\n    result = {CollectionKey@34809} &quot;CollectionKey[Account.loans#Account@43deab74]&quot;\r\n     role = &quot;Account.loans&quot;\r\n     key = {Account@26451} \r\n     keyType = {EmbeddedComponentType@21355} \r\n     factory = {SessionFactoryImpl@21356} \r\n     hashCode = 1187125168\r\n     entityMode = {EntityMode@17415} &quot;pojo&quot;\r\n    \r\n    result = {CollectionKey@35653} &quot;CollectionKey[Account.loans#Account@33470aa]&quot;\r\n     role = &quot;Account.loans&quot;\r\n     key = {Account@35225} \r\n     keyType = {EmbeddedComponentType@21355} \r\n     factory = {SessionFactoryImpl@21356} \r\n     hashCode = 1187125168\r\n     entityMode = {EntityMode@17415} &quot;pojo&quot;\r\n\r\nBecause of this, Hibernate will load same PesistentSet for two entities.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I have experienced a great example of reproducing such a problem.\nMaybe my experience will help someone one day.</p>\n<h2>Short version</h2>\n<p>Check that your @Embedded Id of container has no possible collisions.</p>\n<h2>Long version</h2>\n<p>When Hibernate instantiates collection wrapper, it searches for already instantiated collection by CollectionKey in internal Map.</p>\n<p>For Entity with @Embedded id, CollectionKey wraps EmbeddedComponentType and uses @Embedded Id properties for equality checks and hashCode calculation.</p>\n<p>So if you have two entities with equal @Embedded Ids, Hibernate will instantiate and put new collection by the first key and will find same collection for the second key.\nSo two entities with same @Embedded Id will be populated with same collection.</p>\n<h2>Example</h2>\n<p>Suppose you have Account entity which has lazy set of loans.\nAnd Account has @Embedded Id consists of several parts(columns).</p>\n<pre><code>@Entity\n@Table(schema = &quot;SOME&quot;, name = &quot;ACCOUNT&quot;)\npublic class Account {\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;account&quot;)\n    private Set&lt;Loan&gt; loans;\n\n    @Embedded\n    private AccountId accountId;\n\n    ...\n}\n\n@Embeddable\npublic class AccountId {\n    @Column(name = &quot;X&quot;)\n    private Long x;\n    \n    @Column(name = &quot;BRANCH&quot;)\n    private String branchId;\n    \n    @Column(name = &quot;Z&quot;)\n    private String z;\n\n    ...\n}\n</code></pre>\n<p>Then suppose that Account has additional property mapped by @Embedded Id but has relation to other entity Branch.</p>\n<pre><code>@ManyToOne(fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;BRANCH&quot;)\n@MapsId(&quot;accountId.branchId&quot;)\n@NotFound(action = NotFoundAction.IGNORE)//Look at this!\nprivate Branch branch;\n</code></pre>\n<p>It could happen that you have no FK for Account to Brunch relation id DB so Account.BRANCH column can have any value not presented in Branch table.</p>\n<p>According to <code>@NotFound(action = NotFoundAction.IGNORE)</code> if value is not present in related table, Hibernate will load <strong>null</strong> value for the property.</p>\n<p>If X and Y columns of two Accounts are same(which is fine), but BRANCH is different and not presented in Branch table, hibernate will load <strong>null</strong> for both and Embedded Ids will be equal.</p>\n<p>So two CollectionKey objects will be equal and will have same hashCode for different Accounts.</p>\n<pre><code>result = {CollectionKey@34809} &quot;CollectionKey[Account.loans#Account@43deab74]&quot;\n role = &quot;Account.loans&quot;\n key = {Account@26451} \n keyType = {EmbeddedComponentType@21355} \n factory = {SessionFactoryImpl@21356} \n hashCode = 1187125168\n entityMode = {EntityMode@17415} &quot;pojo&quot;\n\nresult = {CollectionKey@35653} &quot;CollectionKey[Account.loans#Account@33470aa]&quot;\n role = &quot;Account.loans&quot;\n key = {Account@35225} \n keyType = {EmbeddedComponentType@21355} \n factory = {SessionFactoryImpl@21356} \n hashCode = 1187125168\n entityMode = {EntityMode@17415} &quot;pojo&quot;\n</code></pre>\n<p>Because of this, Hibernate will load same PesistentSet for two entities.</p>\n"},{"tags":[],"owner":{"account_id":8736620,"reputation":449,"user_id":6535053,"display_name":"FooBar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597868202,"creation_date":1597868202,"answer_id":63494380,"question_id":1692871,"body_markdown":"Posting here because it&#39;s taken me over 2 weeks to get to the bottom of this, and I *still* haven&#39;t fully resolved it.\r\n\r\nThere is a *chance*, that you&#39;re also just running into [this bug which has been around since 2017 and hasn&#39;t been addressed][1].\r\n\r\nI honestly have no clue how to get around this bug. I&#39;m posting here for my sanity and hopefully to shave a couple weeks of your googling. I&#39;d love any input anyone may have, but my particular &quot;answer&quot; to this problem was not listed in *any* of the above answers.\r\n\r\n  [1]: https://hibernate.atlassian.net/browse/HHH-11605","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Posting here because it's taken me over 2 weeks to get to the bottom of this, and I <em>still</em> haven't fully resolved it.</p>\n<p>There is a <em>chance</em>, that you're also just running into <a href=\"https://hibernate.atlassian.net/browse/HHH-11605\" rel=\"nofollow noreferrer\">this bug which has been around since 2017 and hasn't been addressed</a>.</p>\n<p>I honestly have no clue how to get around this bug. I'm posting here for my sanity and hopefully to shave a couple weeks of your googling. I'd love any input anyone may have, but my particular &quot;answer&quot; to this problem was not listed in <em>any</em> of the above answers.</p>\n"},{"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648124749,"creation_date":1648124749,"answer_id":71602528,"question_id":1692871,"body_markdown":"I had to replace the following collection initilization:\r\n\r\n    challenge.setGoals(memberChallenge.getGoals());\r\n\r\nwith \r\n\r\n\t\tchallenge.setGoals(memberChallenge.getGoals()\r\n\t\t\t\t\t\t\t\t\t\t  .stream()\r\n\t\t\t\t\t\t\t\t\t\t  .map(dmo -&gt; {\r\n\t\t\t\t\t\t\t\t\t\t\t  final ChallengeGoal goal = new ChallengeGoalImpl();\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setMemberChallenge(challenge);\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setGoalDate(dmo.getGoalDate());\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setGoalValue(dmo.getGoalValue());\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t  return goal;\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t  .collect(Collectors.toList()));\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I had to replace the following collection initilization:</p>\n<pre><code>challenge.setGoals(memberChallenge.getGoals());\n</code></pre>\n<p>with</p>\n<pre><code>    challenge.setGoals(memberChallenge.getGoals()\n                                      .stream()\n                                      .map(dmo -&gt; {\n                                          final ChallengeGoal goal = new ChallengeGoalImpl();\n                                          goal.setMemberChallenge(challenge);\n                                          goal.setGoalDate(dmo.getGoalDate());\n                                          goal.setGoalValue(dmo.getGoalValue());\n\n                                          return goal;\n                                      })\n                                      .collect(Collectors.toList()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13249424,"reputation":61,"user_id":9567391,"display_name":"PankajTekwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664210601,"creation_date":1664210601,"answer_id":73857315,"question_id":1692871,"body_markdown":"I changed \r\n\r\n\r\n\r\n    @OneToMany( cascade= CascadeType.ALL)\r\n        \r\n    @JoinColumn(\r\n                name = &quot;some_id&quot;,\r\n                referencedColumnName = &quot;some_id&quot;\r\n        )\r\n    \r\n    to\r\n    \r\n    @OneToMany(mappedBy = &quot;some_id&quot;, cascade= CascadeType.ALL)\r\n\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I changed</p>\n<pre><code>@OneToMany( cascade= CascadeType.ALL)\n    \n@JoinColumn(\n            name = &quot;some_id&quot;,\n            referencedColumnName = &quot;some_id&quot;\n    )\n\nto\n\n@OneToMany(mappedBy = &quot;some_id&quot;, cascade= CascadeType.ALL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10791884,"reputation":53,"user_id":7940628,"display_name":"emolano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673365965,"creation_date":1673365965,"answer_id":75072530,"question_id":1692871,"body_markdown":"You&#39;re using pointers(indirectly), so sometimes you&#39;re copying the memory address instead of the object/collection you want. Hibernate checks this and throw that error. Here&#39;s what can you do:\r\n\r\n 1. Don&#39;t copy the object/collection;\r\n 2. Initiate a new empty one;\r\n 3. Make a function to copy it&#39;s content and call it;\r\n\r\nFor example: \r\n\r\n    public Entity copyEntity(Entity e){\r\n        Entity copy = new Entity();\r\n        e.copy(name);\r\n        e.setCollection2(null);\r\n        e.setCollection3(copyCollection(e.getCollection3());\r\n        return copy;\r\n    }","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>You're using pointers(indirectly), so sometimes you're copying the memory address instead of the object/collection you want. Hibernate checks this and throw that error. Here's what can you do:</p>\n<ol>\n<li>Don't copy the object/collection;</li>\n<li>Initiate a new empty one;</li>\n<li>Make a function to copy it's content and call it;</li>\n</ol>\n<p>For example:</p>\n<pre><code>public Entity copyEntity(Entity e){\n    Entity copy = new Entity();\n    e.copy(name);\n    e.setCollection2(null);\n    e.setCollection3(copyCollection(e.getCollection3());\n    return copy;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27604474,"reputation":1,"user_id":21068920,"display_name":"SS KK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694517519,"creation_date":1694349076,"answer_id":77076106,"question_id":1692871,"body_markdown":"I was getting same error. And in my case, I had an incorrect relationship between my parent and child entities. I had `@OneToMany`, and changing it to `@ManyToMany` solved my problem.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I was getting same error. And in my case, I had an incorrect relationship between my parent and child entities. I had <code>@OneToMany</code>, and changing it to <code>@ManyToMany</code> solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698037060,"creation_date":1698037060,"answer_id":77342709,"question_id":1692871,"body_markdown":"It basically means that JPA doesn&#39;t want to save the exact same instance again, just being associated (set) to another object. Create a deep copy instead, and you should be fine.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>It basically means that JPA doesn't want to save the exact same instance again, just being associated (set) to another object. Create a deep copy instead, and you should be fine.</p>\n"}],"owner":{"account_id":41025,"reputation":10135,"user_id":119139,"accept_rate":67,"display_name":"nightingale2k1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152852,"favorite_count":0,"down_vote_count":1,"up_vote_count":85,"accepted_answer_id":1694236,"answer_count":17,"score":84,"last_activity_date":1698037060,"creation_date":1257596846,"question_id":1692871,"body_markdown":"I got this error message:\r\n\r\n&gt; error: Found shared references to a collection: Person.relatedPersons\r\n\r\nWhen I tried to execute `addToRelatedPersons(anotherPerson)`:\r\n\r\n    person.addToRelatedPersons(anotherPerson);\r\n    anotherPerson.addToRelatedPersons(person);\r\n    \r\n    anotherPerson.save();\r\n    person.save();\r\n\r\nMy domain:\r\n\r\n    Person {\r\n    \r\n     static hasMany = [relatedPersons:Person];\r\n    \r\n    }\r\n\r\nany idea why this happens ?\r\n\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I got this error message:</p>\n\n<blockquote>\n  <p>error: Found shared references to a collection: Person.relatedPersons</p>\n</blockquote>\n\n<p>When I tried to execute <code>addToRelatedPersons(anotherPerson)</code>:</p>\n\n<pre><code>person.addToRelatedPersons(anotherPerson);\nanotherPerson.addToRelatedPersons(person);\n\nanotherPerson.save();\nperson.save();\n</code></pre>\n\n<p>My domain:</p>\n\n<pre><code>Person {\n\n static hasMany = [relatedPersons:Person];\n\n}\n</code></pre>\n\n<p>any idea why this happens ?</p>\n"},{"tags":["java","pdf","barcode","aspose.pdf","adobe-javascript"],"comments":[{"owner":{"account_id":5335569,"reputation":4676,"user_id":4254700,"display_name":"joelgeraci"},"score":0,"creation_date":1492974273,"post_id":43568719,"comment_id":74200693,"body_markdown":"Dynamic barcodes in PDF are actually calculated text fields with special appearances. In order to give you an answer, I&#39;ll need to know if you want the text value of the barcode to be tab delimited or XML and if you want the field names to be included.","body":"Dynamic barcodes in PDF are actually calculated text fields with special appearances. In order to give you an answer, I&#39;ll need to know if you want the text value of the barcode to be tab delimited or XML and if you want the field names to be included."},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1492975357,"post_id":43568719,"comment_id":74201054,"body_markdown":"Hei Joel, I don&#39;t need the text value to be displayed under the barcode. Can you provide me some hints for both situations (tab delimited/xml)? Also, it would be nice to include field names into generated barcode information. Thank you","body":"Hei Joel, I don&#39;t need the text value to be displayed under the barcode. Can you provide me some hints for both situations (tab delimited/xml)? Also, it would be nice to include field names into generated barcode information. Thank you"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493148049,"post_id":43568719,"comment_id":74287380,"body_markdown":"In order to accomplish this requirement, you can get user input, pass this information to Aspose.Barcode for Java to generate barcode image and then add this image to PDF file using Aspose.Pdf for Java.\nPlease check https://docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcode\nand\nhttps://docs.aspose.com/display/pdfjava/Add%2C+Delete+and+Extract+Images+from+the+PDF+file#Add,DeleteandExtractImagesfromthePDFfile-AddImagetoExistingPDFFile","body":"In order to accomplish this requirement, you can get user input, pass this information to Aspose.Barcode for Java to generate barcode image and then add this image to PDF file using Aspose.Pdf for Java. Please check <a href=\"https://docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcode\" rel=\"nofollow noreferrer\">docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcod&zwnj;&#8203;e</a> and <a href=\"https://docs.aspose.com/display/pdfjava/Add%2C+Delete+and+Extract+Images+from+the+PDF+file#Add,DeleteandExtractImagesfromthePDFfile-AddImagetoExistingPDFFile\" rel=\"nofollow noreferrer\">docs.aspose.com/display/pdfjava/&hellip;</a>"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493186645,"post_id":43568719,"comment_id":74300999,"body_markdown":"Thank you for your reply @codewarior, but I need to trigger the generate and regenerate barcode events from Javascript. After the PDF document was generated with Aspose (PDF+Barcode), I won&#39;t be able to &quot;touch&quot; it. any idea?","body":"Thank you for your reply @codewarior, but I need to trigger the generate and regenerate barcode events from Javascript. After the PDF document was generated with Aspose (PDF+Barcode), I won&#39;t be able to &quot;touch&quot; it. any idea?"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493267630,"post_id":43568719,"comment_id":74345385,"body_markdown":"As per my understanding, you need to generate Barcode through JavaScript trigger/event ? Therefore you need the API to work with JavaScript.\nPlease share the details, so I can comment further.","body":"As per my understanding, you need to generate Barcode through JavaScript trigger/event ? Therefore you need the API to work with JavaScript. Please share the details, so I can comment further."},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493276956,"post_id":43568719,"comment_id":74349414,"body_markdown":"Hello again, @codewarior. \nI went a little further and found a solution to generate a barcode as a byte array in Javascript. Now, I need to &quot;draw&quot; that byte array on the pdf dynamically (triggered by Javascript validation event). On the other hand I found out that I can&#39;t use trusted functions inside document JS. You can see that at [link](http://imgur.com/a/08g1F)","body":"Hello again, @codewarior.  I went a little further and found a solution to generate a barcode as a byte array in Javascript. Now, I need to &quot;draw&quot; that byte array on the pdf dynamically (triggered by Javascript validation event). On the other hand I found out that I can&#39;t use trusted functions inside document JS. You can see that at <a href=\"http://imgur.com/a/08g1F\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493385812,"post_id":43568719,"comment_id":74408714,"body_markdown":"Hi Marius, In order to add BarCode image to PDF file, first you need to save it in Image format and then use following code to add the image to PDF file using Aspose.Pdf for Java\n[Java]\nDocument doc = new Document();\nPage page = doc.getPages().add();\nImage image = new Image();\nimage.getMargin().setLeft(100);\nimage.setFile(&quot;c:/input.PNG&quot;);\npage.getParagraphs().add(image);\ndoc.save(&quot;c:/sample.pdf&quot;);","body":"Hi Marius, In order to add BarCode image to PDF file, first you need to save it in Image format and then use following code to add the image to PDF file using Aspose.Pdf for Java [Java] Document doc = new Document(); Page page = doc.getPages().add(); Image image = new Image(); image.getMargin().setLeft(100); image.setFile(&quot;c:/input.PNG&quot;); page.getParagraphs().add(image); doc.save(&quot;c:/sample.pdf&quot;);"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493828585,"post_id":43568719,"comment_id":74572035,"body_markdown":"Hello again @codewarior, I need you to tell me if there is a way to generate a PDF417 barcode using the Javascript API provided by Adobe. I successfully managed to generate PDF417 barcode using Aspose.Barcode and then import the resulting image on a button field added dynamically with JS.\nBelow is the workflow I want to achieve:\nI have a textfield A, a button B and another button BC. When I press the B button, I want to get A&#39;s value and then generate an image with a coresponding PDF417 barcode value, which I will then set as buttonIcon for the BC button. Thank you for your patience, Marius","body":"Hello again @codewarior, I need you to tell me if there is a way to generate a PDF417 barcode using the Javascript API provided by Adobe. I successfully managed to generate PDF417 barcode using Aspose.Barcode and then import the resulting image on a button field added dynamically with JS. Below is the workflow I want to achieve: I have a textfield A, a button B and another button BC. When I press the B button, I want to get A&#39;s value and then generate an image with a coresponding PDF417 barcode value, which I will then set as buttonIcon for the BC button. Thank you for your patience, Marius"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493902146,"post_id":43568719,"comment_id":74606971,"body_markdown":"Hi Marius, as per my understanding, you have managed to accomplish the requirement of PDF417 Barcode generation using Aspose.Barcode and have been able to place the image as icon over button and now you are looking for same functionality using API provided by Adobe ?","body":"Hi Marius, as per my understanding, you have managed to accomplish the requirement of PDF417 Barcode generation using Aspose.Barcode and have been able to place the image as icon over button and now you are looking for same functionality using API provided by Adobe ?"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493905272,"post_id":43568719,"comment_id":74609464,"body_markdown":"Exactly. Is anything I can do to generate the barcode with Java, when I click a button from Pdf (Javascript). Or is there a way to generate a barcode field directly from Javascript? I tried adding a field as text and then set it&#39;s cFieldType to &quot;barcode&quot;, but nothing happened. Thanks","body":"Exactly. Is anything I can do to generate the barcode with Java, when I click a button from Pdf (Javascript). Or is there a way to generate a barcode field directly from Javascript? I tried adding a field as text and then set it&#39;s cFieldType to &quot;barcode&quot;, but nothing happened. Thanks"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1494016956,"post_id":43568719,"comment_id":74666388,"body_markdown":"Hi Marius, I am afraid Aspose.BarCode does not provide the feature requested above. But you can explore the Aspose,BarCode REST API and it can be useful.\nhttps://www.aspose.com/products/barcode/cloud","body":"Hi Marius, I am afraid Aspose.BarCode does not provide the feature requested above. But you can explore the Aspose,BarCode REST API and it can be useful. <a href=\"https://www.aspose.com/products/barcode/cloud\" rel=\"nofollow noreferrer\">aspose.com/products/barcode/cloud</a>"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1494151430,"post_id":43568719,"comment_id":74697568,"body_markdown":"Hi all, do you know any method of adding a PDF417 barcode into a form programmatically, using only Javascript? I tried the following https://jsfiddle.net/5wjdqL2t/ , but I only get a gray rectangle, saying &quot;Barcode Render Error&quot;. Using the Prepare Form, I am able to insert a valid barcode and work with it, but I need to do that programmatically. Thanks","body":"Hi all, do you know any method of adding a PDF417 barcode into a form programmatically, using only Javascript? I tried the following <a href=\"https://jsfiddle.net/5wjdqL2t/\" rel=\"nofollow noreferrer\">jsfiddle.net/5wjdqL2t</a> , but I only get a gray rectangle, saying &quot;Barcode Render Error&quot;. Using the Prepare Form, I am able to insert a valid barcode and work with it, but I need to do that programmatically. Thanks"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1494276799,"post_id":43568719,"comment_id":74749999,"body_markdown":"Hi, If you consider using Aspose.Barcode, you can generate Barcode image and then add it to PDF file using Aspose.Pdf for Cloud API.\n\nExample code is shared over https://gist.github.com/aspose-pdf/12c062ac4f2dfa4cd833a5227405bb99#file-examples-dotnet-csharp-form-fields-updateformfield-1-cs","body":"Hi, If you consider using Aspose.Barcode, you can generate Barcode image and then add it to PDF file using Aspose.Pdf for Cloud API.  Example code is shared over <a href=\"https://gist.github.com/aspose-pdf/12c062ac4f2dfa4cd833a5227405bb99#file-examples-dotnet-csharp-form-fields-updateformfield-1-cs\" rel=\"nofollow noreferrer\">gist.github.com/aspose-pdf/&hellip;</a>"}],"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698036922,"creation_date":1492934199,"question_id":43568719,"body_markdown":"I&#39;m trying to generate some editable PDF using Java. For that I&#39;m using the Aspose.PDF library ([Aspose.PDF Java][1]), which exposes some nice methods, which allow me to generate a document, like the one below, but only at runtime.\r\n[![GeneratedTexts][2]][2]  \r\nI need to know if there is a way to add (or edit) a TextBoxField barcode when the user fills the given text fields with data. I would like to use the text field validation event and regenerate the barcode, just like in the workflow described below.\r\n[![PDF Generate diagram][3]][3]  \r\nAny suggestion would be appreciated!\r\n\r\n  [1]: https://www.aspose.com/products/pdf/java\r\n  [2]: https://i.stack.imgur.com/gvS5I.png\r\n  [3]: https://i.stack.imgur.com/uTa36.png","title":"Editable PDF with dynamic barcode generation","body":"<p>I'm trying to generate some editable PDF using Java. For that I'm using the Aspose.PDF library (<a href=\"https://www.aspose.com/products/pdf/java\" rel=\"nofollow noreferrer\">Aspose.PDF Java</a>), which exposes some nice methods, which allow me to generate a document, like the one below, but only at runtime.\n<a href=\"https://i.stack.imgur.com/gvS5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvS5I.png\" alt=\"GeneratedTexts\"></a><br>\nI need to know if there is a way to add (or edit) a TextBoxField barcode when the user fills the given text fields with data. I would like to use the text field validation event and regenerate the barcode, just like in the workflow described below.\n<a href=\"https://i.stack.imgur.com/uTa36.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uTa36.png\" alt=\"PDF Generate diagram\"></a><br>\nAny suggestion would be appreciated!</p>\n"},{"tags":["java","sorting","merge","compare","swap"],"comments":[{"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"score":0,"creation_date":1430328515,"post_id":29950160,"comment_id":48022010,"body_markdown":"Are you trying to get the total counts of swaps and compares after all of the recursive calls are completed?","body":"Are you trying to get the total counts of swaps and compares after all of the recursive calls are completed?"},{"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"score":0,"creation_date":1430328656,"post_id":29950160,"comment_id":48022095,"body_markdown":"Yea I am trying to sysout the results to understand how each sorting method works.","body":"Yea I am trying to sysout the results to understand how each sorting method works."}],"answers":[{"comments":[{"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"score":0,"creation_date":1430342795,"post_id":29950946,"comment_id":48030500,"body_markdown":"I tried this solution previously myself but i get several cannot be referenced from a static context errors.","body":"I tried this solution previously myself but i get several cannot be referenced from a static context errors."},{"owner":{"account_id":5495336,"reputation":1198,"user_id":4366670,"display_name":"Rezwan Azfar Haleem"},"score":0,"creation_date":1430346255,"post_id":29950946,"comment_id":48032004,"body_markdown":"Change the method header to static. Also change the variables to static.","body":"Change the method header to static. Also change the variables to static."},{"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"score":0,"creation_date":1430358844,"post_id":29950946,"comment_id":48036076,"body_markdown":"I&#39;m still having trouble now I have it to output the merge but I get the sysout of each loop. I want a simple compare count and swapcount once everything is done.","body":"I&#39;m still having trouble now I have it to output the merge but I get the sysout of each loop. I want a simple compare count and swapcount once everything is done."}],"tags":[],"owner":{"account_id":5495336,"reputation":1198,"user_id":4366670,"display_name":"Rezwan Azfar Haleem"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430329788,"creation_date":1430329788,"answer_id":29950946,"question_id":29950160,"body_markdown":"Make a global variable or a field within the class which holds the merge and merge sort methods. This will allow the methods to increment to the variable. If you declare inside the method it will stay as a local variable and each recursive call will produce different local variables of the same name but belonging to the different recursive method calls. Therefore your code should look like:\r\n\r\n    public class ClassWithMergeMethodInside\r\n    {\r\n        int swapCount;\r\n        int compCount;\r\n        \r\n        public void mergeSort(int[] a, int howMany) {\r\n            //Since merge sort begins here you may initiliaze the variables here\r\n            swapCount = 0;\r\n            compCount = 0;\r\n            if (a.length &gt;= 2) {\r\n                // split array into two halves\r\n                int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n                int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n\r\n\r\n                // sort the two halves\r\n                mergeSort(left,howMany);\r\n                mergeSort(right, howMany);\r\n        \r\n                // merge the sorted halves into a sorted whole\r\n                merge(a, left, right);\r\n    \r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        // Merges the left/right elements into a sorted result.\r\n        // Precondition: left/right are sorted\r\n        public static void merge(int[] result, int[] left, \r\n                                               int[] right) {\r\n            int i1 = 0;   // index into left array\r\n            int i2 = 0;   // index into right array\r\n            //Will not declare counter variables here\r\n            for (int i = 0; i &lt; result.length; i++) {\r\n                compCount++;\r\n                if (i2 &gt;= right.length ||\r\n                   (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n                    result[i] = left[i1];    // take from left\r\n                    i1++;\r\n                   swapCount++;\r\n                } else {\r\n                    result[i] = right[i2];   // take from right\r\n                    i2++;\r\n                   swapCount++;\r\n                }\r\n            }\r\n           //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n        }\r\n    }","title":"Merge Sort count number of swaps and compares","body":"<p>Make a global variable or a field within the class which holds the merge and merge sort methods. This will allow the methods to increment to the variable. If you declare inside the method it will stay as a local variable and each recursive call will produce different local variables of the same name but belonging to the different recursive method calls. Therefore your code should look like:</p>\n\n<pre><code>public class ClassWithMergeMethodInside\n{\n    int swapCount;\n    int compCount;\n\n    public void mergeSort(int[] a, int howMany) {\n        //Since merge sort begins here you may initiliaze the variables here\n        swapCount = 0;\n        compCount = 0;\n        if (a.length &gt;= 2) {\n            // split array into two halves\n            int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n            int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n            // sort the two halves\n            mergeSort(left,howMany);\n            mergeSort(right, howMany);\n\n            // merge the sorted halves into a sorted whole\n            merge(a, left, right);\n\n        }\n    }\n\n\n\n\n    // Merges the left/right elements into a sorted result.\n    // Precondition: left/right are sorted\n    public static void merge(int[] result, int[] left, \n                                           int[] right) {\n        int i1 = 0;   // index into left array\n        int i2 = 0;   // index into right array\n        //Will not declare counter variables here\n        for (int i = 0; i &lt; result.length; i++) {\n            compCount++;\n            if (i2 &gt;= right.length ||\n               (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n                result[i] = left[i1];    // take from left\n                i1++;\n               swapCount++;\n            } else {\n                result[i] = right[i2];   // take from right\n                i2++;\n               swapCount++;\n            }\n        }\n       //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430329856,"creation_date":1430329856,"answer_id":29950962,"question_id":29950160,"body_markdown":"I think the most elegant solution is to simulate pass-by-reference by using an `int` wrapper class.  Everything in Java is pass-by-value, but if you don&#39;t change the reference that an Object reference points to, you can simulate pass-by-reference for recursive calls.\r\n\r\n\r\nHere is an example:\r\n\r\n    import java.util.Arrays; \r\n    \r\n    public class TestMain\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        int[] array = new int[]{6, 2, 1, 4, 5, 3};\r\n        \r\n        IntWrapper countCompare = new IntWrapper();\r\n        IntWrapper countSwap = new IntWrapper();\r\n        \r\n        \r\n        \r\n        MergeSort mSort = new MergeSort();\r\n        \r\n        mSort.mergeSort(array, countCompare, countSwap);\r\n        \r\n        System.out.println(&quot;Compares: &quot; + countCompare.val);\r\n        \r\n        System.out.println(&quot;Swaps: &quot; + countSwap.val);\r\n        \r\n        for (int i = 0; i &lt; array.length; i++){\r\n        \tSystem.out.print(String.format(&quot;%-3d&quot;, array[i]));\r\n        }\r\n      }\r\n      \r\n      \r\n    }\r\n    \r\n    public class IntWrapper{\r\n       int val = 0; \r\n    }\r\n    \r\n    public class MergeSort\r\n    {\r\n       \r\n      \r\n        public void mergeSort(int[] a, IntWrapper compares, IntWrapper swaps) {\r\n    \r\n    \r\n          if (a.length &gt;= 2) {\r\n              // split array into two halves\r\n              int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n              int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n    \r\n    \r\n              // sort the two halves\r\n              mergeSort(left, compares, swaps);\r\n              mergeSort(right, compares, swaps);\r\n    \r\n              // merge the sorted halves into a sorted whole\r\n              merge(a, left, right, compares, swaps);\r\n    \r\n          }\r\n      }\r\n    \r\n    \r\n    \r\n    \r\n      // Merges the left/right elements into a sorted result.\r\n      // Precondition: left/right are sorted\r\n      public static void merge(int[] result, int[] left, int[] right, IntWrapper compares, IntWrapper swaps) {\r\n          int i1 = 0;   // index into left array\r\n          int i2 = 0;   // index into right array\r\n         //int compCount = 0;\r\n         //int swapCount = 0;  \r\n          for (int i = 0; i &lt; result.length; i++) {\r\n              //compCount++;\r\n              compares.val++;\r\n              if (i2 &gt;= right.length ||\r\n                 (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n                  result[i] = left[i1];    // take from left\r\n                  i1++;\r\n                 //swapCount++;\r\n                 swaps.val++;\r\n              } else {\r\n                  result[i] = right[i2];   // take from right\r\n                  i2++;\r\n                 //swapCount++;\r\n                 swaps.val++;\r\n              }\r\n          }\r\n         //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n      }\r\n    }\r\n\r\nOutput:\r\n\r\n    Compares: 16\r\n    Swaps: 16\r\n    1  2  3  4  5  6  \r\n\r\n","title":"Merge Sort count number of swaps and compares","body":"<p>I think the most elegant solution is to simulate pass-by-reference by using an <code>int</code> wrapper class.  Everything in Java is pass-by-value, but if you don't change the reference that an Object reference points to, you can simulate pass-by-reference for recursive calls.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>import java.util.Arrays; \n\npublic class TestMain\n{\n  public static void main(String[] args)\n  {\n    int[] array = new int[]{6, 2, 1, 4, 5, 3};\n\n    IntWrapper countCompare = new IntWrapper();\n    IntWrapper countSwap = new IntWrapper();\n\n\n\n    MergeSort mSort = new MergeSort();\n\n    mSort.mergeSort(array, countCompare, countSwap);\n\n    System.out.println(\"Compares: \" + countCompare.val);\n\n    System.out.println(\"Swaps: \" + countSwap.val);\n\n    for (int i = 0; i &lt; array.length; i++){\n        System.out.print(String.format(\"%-3d\", array[i]));\n    }\n  }\n\n\n}\n\npublic class IntWrapper{\n   int val = 0; \n}\n\npublic class MergeSort\n{\n\n\n    public void mergeSort(int[] a, IntWrapper compares, IntWrapper swaps) {\n\n\n      if (a.length &gt;= 2) {\n          // split array into two halves\n          int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n          int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n          // sort the two halves\n          mergeSort(left, compares, swaps);\n          mergeSort(right, compares, swaps);\n\n          // merge the sorted halves into a sorted whole\n          merge(a, left, right, compares, swaps);\n\n      }\n  }\n\n\n\n\n  // Merges the left/right elements into a sorted result.\n  // Precondition: left/right are sorted\n  public static void merge(int[] result, int[] left, int[] right, IntWrapper compares, IntWrapper swaps) {\n      int i1 = 0;   // index into left array\n      int i2 = 0;   // index into right array\n     //int compCount = 0;\n     //int swapCount = 0;  \n      for (int i = 0; i &lt; result.length; i++) {\n          //compCount++;\n          compares.val++;\n          if (i2 &gt;= right.length ||\n             (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n              result[i] = left[i1];    // take from left\n              i1++;\n             //swapCount++;\n             swaps.val++;\n          } else {\n              result[i] = right[i2];   // take from right\n              i2++;\n             //swapCount++;\n             swaps.val++;\n          }\n      }\n     //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Compares: 16\nSwaps: 16\n1  2  3  4  5  6  \n</code></pre>\n"}],"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9748,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698034070,"creation_date":1430327142,"question_id":29950160,"body_markdown":"I have this existing code that I need to add a swap and compare counter for. So far I believe I have the counts correctly however I cannot get the output to no display a loop of each swap.\r\n\r\n    public void mergeSort(int[] a, int howMany) {\r\n\t\t\r\n\t\t\r\n\t    if (a.length &gt;= 2) {\r\n\t        // split array into two halves\r\n\t        int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n\t        int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n\r\n\t\r\n\t        // sort the two halves\r\n\t        mergeSort(left,howMany);\r\n\t        mergeSort(right, howMany);\r\n\r\n\t        // merge the sorted halves into a sorted whole\r\n\t        merge(a, left, right);\r\n           \r\n\t    }\r\n\t}\r\n\r\n\t\r\n\r\n\t\r\n\t// Merges the left/right elements into a sorted result.\r\n\t// Precondition: left/right are sorted\r\n\tpublic static void merge(int[] result, int[] left, \r\n\t                                       int[] right) {\r\n\t    int i1 = 0;   // index into left array\r\n\t    int i2 = 0;   // index into right array\r\n       int compCount = 0;\r\n       int swapCount = 0;  \r\n\t    for (int i = 0; i &lt; result.length; i++) {\r\n            compCount++;\r\n\t        if (i2 &gt;= right.length ||\r\n\t           (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n\t            result[i] = left[i1];    // take from left\r\n\t            i1++;\r\n               swapCount++;\r\n\t        } else {\r\n\t            result[i] = right[i2];   // take from right\r\n\t            i2++;\r\n               swapCount++;\r\n\t        }\r\n\t    }\r\n       //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n\t}","title":"Merge Sort count number of swaps and compares","body":"<p>I have this existing code that I need to add a swap and compare counter for. So far I believe I have the counts correctly however I cannot get the output to no display a loop of each swap.</p>\n\n<pre><code>public void mergeSort(int[] a, int howMany) {\n\n\n    if (a.length &gt;= 2) {\n        // split array into two halves\n        int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n        int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n        // sort the two halves\n        mergeSort(left,howMany);\n        mergeSort(right, howMany);\n\n        // merge the sorted halves into a sorted whole\n        merge(a, left, right);\n\n    }\n}\n\n\n\n\n// Merges the left/right elements into a sorted result.\n// Precondition: left/right are sorted\npublic static void merge(int[] result, int[] left, \n                                       int[] right) {\n    int i1 = 0;   // index into left array\n    int i2 = 0;   // index into right array\n   int compCount = 0;\n   int swapCount = 0;  \n    for (int i = 0; i &lt; result.length; i++) {\n        compCount++;\n        if (i2 &gt;= right.length ||\n           (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n            result[i] = left[i1];    // take from left\n            i1++;\n           swapCount++;\n        } else {\n            result[i] = right[i2];   // take from right\n            i2++;\n           swapCount++;\n        }\n    }\n   //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n}\n</code></pre>\n"},{"tags":["java","json","jackson","spring-jms"],"comments":[{"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"score":0,"creation_date":1603715537,"post_id":64428070,"comment_id":114114589,"body_markdown":"I don&#39;t see how it can use your jmsListenerQueueFactory method because you have given it your own method  signature. So that method is likely not getting called, so the error handler is not set.","body":"I don&#39;t see how it can use your jmsListenerQueueFactory method because you have given it your own method  signature. So that method is likely not getting called, so the error handler is not set."},{"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"score":0,"creation_date":1603731949,"post_id":64428070,"comment_id":114123078,"body_markdown":"If you are referring to the method parameters of the factory, these are beans injected by type via Spring.","body":"If you are referring to the method parameters of the factory, these are beans injected by type via Spring."}],"answers":[{"comments":[{"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"score":0,"creation_date":1603730769,"post_id":64540337,"comment_id":114122508,"body_markdown":"So this was exactly it. So I admit I simplified my code a little bit. My bean was actually annotated with a name: `@Bean(name = &quot;queue-listener-factory&quot;)` HOWEVER! In my `@JmsListener` I was *not* referencing this Bean name. \n\n\nI added `containerFactory = &quot;queue-listener-factory&quot;` to my `@JmsListener` annotation and now everything works as expected!","body":"So this was exactly it. So I admit I simplified my code a little bit. My bean was actually annotated with a name: <code>@Bean(name = &quot;queue-listener-factory&quot;)</code> HOWEVER! In my <code>@JmsListener</code> I was <i>not</i> referencing this Bean name.    I added <code>containerFactory = &quot;queue-listener-factory&quot;</code> to my <code>@JmsListener</code> annotation and now everything works as expected!"},{"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"score":0,"creation_date":1603731145,"post_id":64540337,"comment_id":114122709,"body_markdown":"Also, for anyone reading in the future: this answer is the exact solution to the question as literally asked.","body":"Also, for anyone reading in the future: this answer is the exact solution to the question as literally asked."}],"tags":[],"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1603726812,"creation_date":1603726812,"answer_id":64540337,"question_id":64428070,"body_markdown":"Looks like ConditionalOnMissingBean autoconfiguration is on [bean name]( https://github.com/spring-projects/spring-boot/blob/v2.3.4.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jms/JmsAnnotationDrivenConfiguration.java#L76)\r\n\r\nSo you should have something like this.\r\n\r\n  \r\n\r\n    @Bean\r\n      public JmsListenerContainerFactory&lt;?&gt; jmsListenerContainerFactory(ConnectionFactory connectionFactory,\r\n          DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\r\n        DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n        factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\r\n        configurer.configure(factory, connectionFactory);\r\n        return factory;\r\n      }","title":"Spring JMS MappingJackson2MessageConverter - No way to handle errors","body":"<p>Looks like ConditionalOnMissingBean autoconfiguration is on <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.3.4.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jms/JmsAnnotationDrivenConfiguration.java#L76\" rel=\"nofollow noreferrer\">bean name</a></p>\n<p>So you should have something like this.</p>\n<pre><code>@Bean\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerContainerFactory(ConnectionFactory connectionFactory,\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\n    configurer.configure(factory, connectionFactory);\n    return factory;\n  }\n</code></pre>\n"}],"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1847,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64540337,"answer_count":1,"score":1,"last_activity_date":1698034001,"creation_date":1603113122,"question_id":64428070,"body_markdown":"I am using Spring JMS, and I am using the `MappingJackson2MessageConverter` to pass along messages between various components. \r\n\r\nMy core problem is that when the `MappingJackson2MessageConverter` experiences an internal deserialization error, when deserializing a String into some Object, these exceptions are not raised in any way that I can respond to them. My Error Handler logic never gets called, and no exceptions are thrown that I have access to. These deserialization errors appear to be completely swallowed and, while they are logged in the console, I am offered no chance to perform custom logic in response to them.\r\n\r\nI define my `MappingJackson2MessageConverter` bean as follows:\r\n\r\n```  \r\n  @Bean\r\n  public MessageConverter jacksonJmsMessageConverter() {\r\n    MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();\r\n    converter.setTargetType(MessageType.TEXT);\r\n    converter.setTypeIdPropertyName(&quot;_type&quot;);\r\n    return converter;\r\n  }\r\n```\r\n\r\nI define a JMS Listener factory as follows:\r\n\r\n```  \r\n  @Bean\r\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerQueueFactory(ConnectionFactory connectionFactory,\r\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\r\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\r\n    configurer.configure(factory, connectionFactory);\r\n\r\n    return factory;\r\n  }\r\n```\r\n\r\nOf importance in the above line is the `setErrorHandler` call. I have defined a simple `ErrorHandler` object that is attempting to catch errors that my `@JmsListener` methods may throw. This simple error handler looks like this:\r\n\r\n```\r\n  public class JmsErrorHandler implements ErrorHandler {\r\n\r\n  @Override\r\n  public void handleError(Throwable t) {\r\n    System.out.println(&quot;WE HAVE THE ERROR!&quot;);\r\n  }\r\n}\r\n```\r\n\r\nMy listener is also simple, as follows:\r\n\r\n```\r\n  @JmsListener(id = MY_ID, destination = MY_DEST)\r\n  public void processMessage(MyPojoMessage myPojoMessage) {\r\n     // This code is obviously never reached, since the serialization error occurs. \r\n```\r\n\r\nOverall, this is a very simple and basic setup. Now when I send an invalid message, that Jackson will *fail* to parse, I get the following errors in my console:\r\n\r\n```\r\n19-10-2020 09:05:33.933 [35m[DefaultMessageListenerContainer-1][0;39m [31mWARN [0;39m o.s.j.l.DefaultMessageListenerContainer.invokeErrorHandler - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n\r\norg.springframework.jms.listener.adapter.ListenerExecutionFailedException: Listener method &#39;public void com.example.processMessage(com.example.MyPojoMessage)&#39; threw exception; nested exception is org.springframework.jms.support.converter.MessageConversionException: Failed to convert JSON message content; nested exception is com.fasterxml.jackson.databind.JsonMappingException\r\n```\r\n\r\nThis exception is expected - since I provide an invalid payload that Jackson cannot serialize. However, there is seemingly *no way* for me to configure the code to actually catch this exception in a way I can respond to it. I am setting the Error Handler in the above code. Yet the logs complain that `no ErrorHandler has been set` which seems wrong. \r\n\r\nI see no other ways to get a reference to this Jackson inner exception. Is there any way?","title":"Spring JMS MappingJackson2MessageConverter - No way to handle errors","body":"<p>I am using Spring JMS, and I am using the <code>MappingJackson2MessageConverter</code> to pass along messages between various components.</p>\n<p>My core problem is that when the <code>MappingJackson2MessageConverter</code> experiences an internal deserialization error, when deserializing a String into some Object, these exceptions are not raised in any way that I can respond to them. My Error Handler logic never gets called, and no exceptions are thrown that I have access to. These deserialization errors appear to be completely swallowed and, while they are logged in the console, I am offered no chance to perform custom logic in response to them.</p>\n<p>I define my <code>MappingJackson2MessageConverter</code> bean as follows:</p>\n<pre><code>  @Bean\n  public MessageConverter jacksonJmsMessageConverter() {\n    MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();\n    converter.setTargetType(MessageType.TEXT);\n    converter.setTypeIdPropertyName(&quot;_type&quot;);\n    return converter;\n  }\n</code></pre>\n<p>I define a JMS Listener factory as follows:</p>\n<pre><code>  @Bean\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerQueueFactory(ConnectionFactory connectionFactory,\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\n    configurer.configure(factory, connectionFactory);\n\n    return factory;\n  }\n</code></pre>\n<p>Of importance in the above line is the <code>setErrorHandler</code> call. I have defined a simple <code>ErrorHandler</code> object that is attempting to catch errors that my <code>@JmsListener</code> methods may throw. This simple error handler looks like this:</p>\n<pre><code>  public class JmsErrorHandler implements ErrorHandler {\n\n  @Override\n  public void handleError(Throwable t) {\n    System.out.println(&quot;WE HAVE THE ERROR!&quot;);\n  }\n}\n</code></pre>\n<p>My listener is also simple, as follows:</p>\n<pre><code>  @JmsListener(id = MY_ID, destination = MY_DEST)\n  public void processMessage(MyPojoMessage myPojoMessage) {\n     // This code is obviously never reached, since the serialization error occurs. \n</code></pre>\n<p>Overall, this is a very simple and basic setup. Now when I send an invalid message, that Jackson will <em>fail</em> to parse, I get the following errors in my console:</p>\n<pre><code>19-10-2020 09:05:33.933 [35m[DefaultMessageListenerContainer-1][0;39m [31mWARN [0;39m o.s.j.l.DefaultMessageListenerContainer.invokeErrorHandler - Execution of JMS message listener failed, and no ErrorHandler has been set.\n\norg.springframework.jms.listener.adapter.ListenerExecutionFailedException: Listener method 'public void com.example.processMessage(com.example.MyPojoMessage)' threw exception; nested exception is org.springframework.jms.support.converter.MessageConversionException: Failed to convert JSON message content; nested exception is com.fasterxml.jackson.databind.JsonMappingException\n</code></pre>\n<p>This exception is expected - since I provide an invalid payload that Jackson cannot serialize. However, there is seemingly <em>no way</em> for me to configure the code to actually catch this exception in a way I can respond to it. I am setting the Error Handler in the above code. Yet the logs complain that <code>no ErrorHandler has been set</code> which seems wrong.</p>\n<p>I see no other ways to get a reference to this Jackson inner exception. Is there any way?</p>\n"},{"tags":["java","kotlin","kotlin-java-interop"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698033996,"creation_date":1698033996,"answer_id":77342586,"question_id":77342585,"body_markdown":"I couldn&#39;t find an annotation like that, but a workaround would be to write extension functions in Kotlin that act as wrappers for the Java methods. The Java methods can be marked `@kotlin.Deprecated` (not `@java.lang.Deprecated`!).\r\n\r\n```java\r\nimport kotlin.Deprecated;\r\nimport kotlin.ReplaceWith;\r\n\r\npublic class Foo {\r\n\r\n    @Deprecated(\r\n            message = &quot;Use doFoo instead&quot;,\r\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\r\n            // should add the package in which the wrapper extension functions resides into &quot;imports = {}&quot;\r\n    )\r\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\r\n    @Deprecated(\r\n            message = &quot;Use doFoo instead&quot;,\r\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\r\n    )\r\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\r\n}\r\n```\r\n\r\n```kotlin\r\n@Suppress(&quot;DEPRECATION&quot;)\r\n@JvmName(&quot;doFooWithStrings&quot;) // ironically the wrapper functions also need different JVM names\r\n@JvmSynthetic\r\nfun Foo.doFoo(list: List&lt;String&gt;) {\r\n    doFooWithStrings(list)\r\n}\r\n\r\n@Suppress(&quot;DEPRECATION&quot;)\r\n@JvmName(&quot;doFooWithInts&quot;)\r\n@JvmSynthetic\r\nfun Foo.doFoo(list: List&lt;Int&gt;) {\r\n    doFooWithInts(list)\r\n}\r\n```","title":"How to make two Java methods have the same name in Kotlin?","body":"<p>I couldn't find an annotation like that, but a workaround would be to write extension functions in Kotlin that act as wrappers for the Java methods. The Java methods can be marked <code>@kotlin.Deprecated</code> (not <code>@java.lang.Deprecated</code>!).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import kotlin.Deprecated;\nimport kotlin.ReplaceWith;\n\npublic class Foo {\n\n    @Deprecated(\n            message = &quot;Use doFoo instead&quot;,\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\n            // should add the package in which the wrapper extension functions resides into &quot;imports = {}&quot;\n    )\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\n    @Deprecated(\n            message = &quot;Use doFoo instead&quot;,\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\n    )\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Suppress(&quot;DEPRECATION&quot;)\n@JvmName(&quot;doFooWithStrings&quot;) // ironically the wrapper functions also need different JVM names\n@JvmSynthetic\nfun Foo.doFoo(list: List&lt;String&gt;) {\n    doFooWithStrings(list)\n}\n\n@Suppress(&quot;DEPRECATION&quot;)\n@JvmName(&quot;doFooWithInts&quot;)\n@JvmSynthetic\nfun Foo.doFoo(list: List&lt;Int&gt;) {\n    doFooWithInts(list)\n}\n</code></pre>\n"}],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698033996,"creation_date":1698033996,"question_id":77342585,"body_markdown":"In Kotlin, one can use the `@JvmName` annotation to allow Java to refer to a declaration using a different name. For example, if two Kotlin methods have the same erasure.\r\n\r\n```kotlin\r\n@JvmName(&quot;doFooWithStrings&quot;)\r\nfun doFoo(list: List&lt;String&gt;) {\r\n    ...\r\n}\r\n\r\n@JvmName(&quot;doFooWithInts&quot;)\r\nfun doFoo(list: List&lt;Int&gt;) {\r\n   ...\r\n}\r\n```\r\n\r\nI want to do the opposite - I have two Java methods with different names, because they have the same erasure otherwise. I want these methods to have the same name in Kotlin.\r\n\r\n```java\r\npublic class Foo {\r\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\r\n\r\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\r\n}\r\n```\r\n\r\n```kotlin\r\n// I want users to use doFoo to refer to both of the above in Kotin\r\ndoFoo(listOf(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)) // calls doFooWithStrings\r\ndoFoo(listOf(1, 2, 3)) // calls doFooWithInts\r\n```\r\n\r\nIs there any annotation that allows me to specify a `KotlinName` or something like that? The original Java method names should ideally not be accessible from Kotlin, or at least, show a warning so that people are discouraged from using them.","title":"How to make two Java methods have the same name in Kotlin?","body":"<p>In Kotlin, one can use the <code>@JvmName</code> annotation to allow Java to refer to a declaration using a different name. For example, if two Kotlin methods have the same erasure.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@JvmName(&quot;doFooWithStrings&quot;)\nfun doFoo(list: List&lt;String&gt;) {\n    ...\n}\n\n@JvmName(&quot;doFooWithInts&quot;)\nfun doFoo(list: List&lt;Int&gt;) {\n   ...\n}\n</code></pre>\n<p>I want to do the opposite - I have two Java methods with different names, because they have the same erasure otherwise. I want these methods to have the same name in Kotlin.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\n\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// I want users to use doFoo to refer to both of the above in Kotin\ndoFoo(listOf(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)) // calls doFooWithStrings\ndoFoo(listOf(1, 2, 3)) // calls doFooWithInts\n</code></pre>\n<p>Is there any annotation that allows me to specify a <code>KotlinName</code> or something like that? The original Java method names should ideally not be accessible from Kotlin, or at least, show a warning so that people are discouraged from using them.</p>\n"},{"tags":["java","rest","postman","spring-boot-3"],"answers":[{"tags":[],"owner":{"account_id":6881862,"reputation":541,"user_id":5288331,"accept_rate":50,"display_name":"Digital"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697986701,"creation_date":1697986701,"answer_id":77340471,"question_id":77334500,"body_markdown":"After spending a lot of time I figured out that spring webflux doesn&#39;t support  MultipartFile, so to process the multipart data in a streaming fashion I need to use Flux&lt;Part&gt;, so the solution is\r\n\r\n    @PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\r\n    public ResponseEntity upload(@RequestPart(value = &quot;file&quot;) Flux&lt;Part&gt; file) {\r\n        log.info(&quot;upload :: file : {}.&quot;, file);\r\n        &lt;-- Logic goes here --&gt;\r\n    }","title":"@RequestPart MultipartFile not working with spring boot 3.1.4","body":"<p>After spending a lot of time I figured out that spring webflux doesn't support  MultipartFile, so to process the multipart data in a streaming fashion I need to use Flux, so the solution is</p>\n<pre><code>@PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\npublic ResponseEntity upload(@RequestPart(value = &quot;file&quot;) Flux&lt;Part&gt; file) {\n    log.info(&quot;upload :: file : {}.&quot;, file);\n    &lt;-- Logic goes here --&gt;\n}\n</code></pre>\n"}],"owner":{"account_id":6881862,"reputation":541,"user_id":5288331,"accept_rate":50,"display_name":"Digital"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698032417,"creation_date":1697853629,"question_id":77334500,"body_markdown":"I have below rest endpoint in my application with spring boot version as 3.1.4 and Java 17\r\n\r\n    @PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\r\n    public ResponseEntity upload(@RequestPart(value = &quot;file&quot;) MultipartFile file) {\r\n        log.info(&quot;upload :: file : {}.&quot;, file);\r\n        return null;\r\n    }\r\n\r\nBut when I tried invoking this endpoint from postman and with curl command getting the error as below\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-10-21T01:47:26.217+00:00&quot;,\r\n        &quot;path&quot;: &quot;/upload&quot;,\r\n        &quot;status&quot;: 400,\r\n        &quot;error&quot;: &quot;Bad Request&quot;,\r\n        &quot;requestId&quot;: &quot;6db7d61&quot;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAny help much appreciated. Thanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nDFlp.png","title":"@RequestPart MultipartFile not working with spring boot 3.1.4","body":"<p>I have below rest endpoint in my application with spring boot version as 3.1.4 and Java 17</p>\n<pre><code>@PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\npublic ResponseEntity upload(@RequestPart(value = &quot;file&quot;) MultipartFile file) {\n    log.info(&quot;upload :: file : {}.&quot;, file);\n    return null;\n}\n</code></pre>\n<p>But when I tried invoking this endpoint from postman and with curl command getting the error as below</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-10-21T01:47:26.217+00:00&quot;,\n    &quot;path&quot;: &quot;/upload&quot;,\n    &quot;status&quot;: 400,\n    &quot;error&quot;: &quot;Bad Request&quot;,\n    &quot;requestId&quot;: &quot;6db7d61&quot;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/nDFlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDFlp.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help much appreciated. Thanks.</p>\n"},{"tags":["java","svg","pdfbox","graphics2d"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1698047022,"post_id":77341604,"comment_id":136350751,"body_markdown":"don&#39;t forget to update pdfbox to 2.0.29.","body":"don&#39;t forget to update pdfbox to 2.0.29."}],"answers":[{"comments":[{"owner":{"account_id":29730474,"reputation":15,"user_id":22785241,"display_name":"ChristophDaniel"},"score":0,"creation_date":1698046610,"post_id":77341765,"comment_id":136350682,"body_markdown":"This works really great. Thank you.","body":"This works really great. Thank you."}],"tags":[],"owner":{"account_id":29730588,"reputation":16,"user_id":22785332,"display_name":"Steffan Kastner"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698010083,"creation_date":1698010061,"answer_id":77341765,"question_id":77341604,"body_markdown":"try this:\r\n\r\n    diagram.getRoot().addAttribute(&quot;fill&quot;, AnimationElement.AT_CSS, colorLight);+","title":"Changing color when rendering SVG in PDFBox","body":"<p>try this:</p>\n<pre><code>diagram.getRoot().addAttribute(&quot;fill&quot;, AnimationElement.AT_CSS, colorLight);+\n</code></pre>\n"}],"owner":{"account_id":29730474,"reputation":15,"user_id":22785241,"display_name":"ChristophDaniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77341765,"answer_count":1,"score":0,"last_activity_date":1698032264,"creation_date":1698006845,"question_id":77341604,"body_markdown":"Does anybody know how to change color when rendering SVG into PDF with *pdfbox* ?\r\n\r\nI am using following code:\r\n```java\r\nFile svgFile = new File(&quot;roots.svg&quot;);\r\n\r\nSVGUniverse svgUniverse = new SVGUniverse();\r\nSVGDiagram diagram = svgUniverse.getDiagram(svgUniverse.loadSVG(svgFile.toURL()));\r\n\r\nPdfBoxGraphics2D graphics = new PdfBoxGraphics2D(document, 32, 32);\r\ngraphics.setColor(Color.green);\r\n\r\ntry {\r\n    diagram.render(graphics);\r\n} catch (SVGException e) {\r\n    e.printStackTrace();\r\n} finally {\r\n    graphics.dispose();\r\n}\r\n\r\nPDFormXObject xform = graphics.getXFormObject();\r\n\r\ntry (PDPageContentStream contentWriter = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, false)) {\r\n    AffineTransform transform = AffineTransform.getTranslateInstance(0, 0);\r\n    transform.scale(2,2);\r\n    xform.setMatrix(transform);\r\n    contentWriter.setNonStrokingColor(Color.green);\r\n    contentWriter.setStrokingColor(Color.green);\r\n    contentWriter.drawForm(xform);\r\n}\r\n```\r\nWith following dependencies:\r\n```none\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.25&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.weblookandfeel&lt;/groupId&gt;\r\n    &lt;artifactId&gt;svg-salamander&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1.2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBut the Icon appears black instead of green.\r\n\r\nThanks in advance to everybody!\r\n```java\r\ncontentWriter.setNonStrokingColor(Color.green);\r\ncontentWriter.setStrokingColor(Color.green);\r\n```\r\nChanges nothing.\r\n","title":"Changing color when rendering SVG in PDFBox","body":"<p>Does anybody know how to change color when rendering SVG into PDF with <em>pdfbox</em> ?</p>\n<p>I am using following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File svgFile = new File(&quot;roots.svg&quot;);\n\nSVGUniverse svgUniverse = new SVGUniverse();\nSVGDiagram diagram = svgUniverse.getDiagram(svgUniverse.loadSVG(svgFile.toURL()));\n\nPdfBoxGraphics2D graphics = new PdfBoxGraphics2D(document, 32, 32);\ngraphics.setColor(Color.green);\n\ntry {\n    diagram.render(graphics);\n} catch (SVGException e) {\n    e.printStackTrace();\n} finally {\n    graphics.dispose();\n}\n\nPDFormXObject xform = graphics.getXFormObject();\n\ntry (PDPageContentStream contentWriter = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, false)) {\n    AffineTransform transform = AffineTransform.getTranslateInstance(0, 0);\n    transform.scale(2,2);\n    xform.setMatrix(transform);\n    contentWriter.setNonStrokingColor(Color.green);\n    contentWriter.setStrokingColor(Color.green);\n    contentWriter.drawForm(xform);\n}\n</code></pre>\n<p>With following dependencies:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n    &lt;version&gt;2.0.25&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.weblookandfeel&lt;/groupId&gt;\n    &lt;artifactId&gt;svg-salamander&lt;/artifactId&gt;\n    &lt;version&gt;1.1.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But the Icon appears black instead of green.</p>\n<p>Thanks in advance to everybody!</p>\n<pre class=\"lang-java prettyprint-override\"><code>contentWriter.setNonStrokingColor(Color.green);\ncontentWriter.setStrokingColor(Color.green);\n</code></pre>\n<p>Changes nothing.</p>\n"},{"tags":["java","android","json","http-post","esp32"],"comments":[{"owner":{"account_id":29098058,"reputation":267,"user_id":22290531,"display_name":"ChipChop Gizmo"},"score":0,"creation_date":1697956530,"post_id":77338714,"comment_id":136342798,"body_markdown":"I would first try and print the entire &quot;request&quot; to see how it&#39;s formed or to be more precise how ESPAsyncWebServer.h is formatting the &quot;args&quot; key:values. You may find that the json is already split in args to something like request-&gt;arg(&quot;username&quot;), request-&gt;arg(&quot;user_id&quot;)","body":"I would first try and print the entire &quot;request&quot; to see how it&#39;s formed or to be more precise how ESPAsyncWebServer.h is formatting the &quot;args&quot; key:values. You may find that the json is already split in args to something like request-&gt;arg(&quot;username&quot;), request-&gt;arg(&quot;user_id&quot;)"},{"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"score":0,"creation_date":1698030201,"post_id":77338714,"comment_id":136349092,"body_markdown":"I tried your suggestion and didnt work either... but I just found an alternative way to do it and it works now... I am using WebServer.h now and havent had any issues... its a bit simlpler to use as well.","body":"I tried your suggestion and didnt work either... but I just found an alternative way to do it and it works now... I am using WebServer.h now and havent had any issues... its a bit simlpler to use as well."}],"answers":[{"tags":[],"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031743,"creation_date":1698031527,"answer_id":77342489,"question_id":77338714,"body_markdown":"For some reason the following libraries always gave me an empty string when trying to send something from the mobile app to the esp32:\r\nESP8266WebServer\r\nAsyncWebServer_ESP32_W5500\r\nESPAsyncWebServer\r\nESPAsyncWebSrv\r\n\r\nNote: these worked when communicating with something else like a flask server in python... I still don&#39;t know what the issue is with the mobile app.\r\n\r\nThis one worked perfectly with both the mobile app and the flask server... I didn&#39;t really change anything of what I was doing except for minor sintax changes for the following library:\r\nWebServer\r\n\r\n\r\nHere is how it looks:\r\n\r\n    #include &lt;ArduinoJson.h&gt;\r\n    #include &lt;WiFi.h&gt;\r\n    #include &lt;WebServer.h&gt;\r\n    \r\n    String ssid = &quot;wifi_ssid&quot;;\r\n    String password = &quot;wifi_password&quot;;\r\n    WebServer server(80);\r\n    \r\n    void setup(){\r\n    \r\n        Serial.print(&quot;Connecting to Wifi...&quot;);\r\n        \r\n        // Connect to Wi-Fi\r\n        WiFi.begin(ssid, password);\r\n        while (WiFi.status() != WL_CONNECTED) {\r\n        \r\n            Serial.print(&quot;.&quot;);\r\n            delay(1000);\r\n        \r\n        }\r\n        \r\n        server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\r\n        server.begin();\r\n    \r\n    }\r\n    \r\n    void handleBrewCoffee() {\r\n    \r\n        if (server.hasArg(&quot;plain&quot;)) {\r\n    \r\n            String recipeReceived = server.arg(&quot;plain&quot;);\r\n            Serial.println(&quot;Received JSON data:&quot;);\r\n            Serial.println(recipeReceived);\r\n            DynamicJsonDocument jsonDoc(1024);\r\n            DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\r\n    \r\n            if (error) {\r\n    \r\n                Serial.print(&quot;Failed to parse JSON: &quot;);\r\n                Serial.println(error.c_str());\r\n                recipeReceived = &quot;not&quot;;\r\n        \r\n            } else{\r\n    \r\n                const char* username = jsonDoc[&quot;username&quot;];\r\n                //same for the rest\r\n        \r\n                Serial.println(&quot;Coffee Information:&quot;);\r\n                Serial.print(&quot;username: &quot;); Serial.println(username);\r\n                //same for the rest\r\n          \r\n                recipeReceived = &quot;Coffee Received&quot;;\r\n    \r\n            }\r\n    \r\n            server.send(200, &quot;text/plain&quot;, recipeReceived);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Every time I send data from android app to esp32 module, it arrives as an &quot;EmptyInput&quot;","body":"<p>For some reason the following libraries always gave me an empty string when trying to send something from the mobile app to the esp32:\nESP8266WebServer\nAsyncWebServer_ESP32_W5500\nESPAsyncWebServer\nESPAsyncWebSrv</p>\n<p>Note: these worked when communicating with something else like a flask server in python... I still don't know what the issue is with the mobile app.</p>\n<p>This one worked perfectly with both the mobile app and the flask server... I didn't really change anything of what I was doing except for minor sintax changes for the following library:\nWebServer</p>\n<p>Here is how it looks:</p>\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;WebServer.h&gt;\n\nString ssid = &quot;wifi_ssid&quot;;\nString password = &quot;wifi_password&quot;;\nWebServer server(80);\n\nvoid setup(){\n\n    Serial.print(&quot;Connecting to Wifi...&quot;);\n    \n    // Connect to Wi-Fi\n    WiFi.begin(ssid, password);\n    while (WiFi.status() != WL_CONNECTED) {\n    \n        Serial.print(&quot;.&quot;);\n        delay(1000);\n    \n    }\n    \n    server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\n    server.begin();\n\n}\n\nvoid handleBrewCoffee() {\n\n    if (server.hasArg(&quot;plain&quot;)) {\n\n        String recipeReceived = server.arg(&quot;plain&quot;);\n        Serial.println(&quot;Received JSON data:&quot;);\n        Serial.println(recipeReceived);\n        DynamicJsonDocument jsonDoc(1024);\n        DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\n\n        if (error) {\n\n            Serial.print(&quot;Failed to parse JSON: &quot;);\n            Serial.println(error.c_str());\n            recipeReceived = &quot;not&quot;;\n    \n        } else{\n\n            const char* username = jsonDoc[&quot;username&quot;];\n            //same for the rest\n    \n            Serial.println(&quot;Coffee Information:&quot;);\n            Serial.print(&quot;username: &quot;); Serial.println(username);\n            //same for the rest\n      \n            recipeReceived = &quot;Coffee Received&quot;;\n\n        }\n\n        server.send(200, &quot;text/plain&quot;, recipeReceived);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698031743,"creation_date":1697951048,"question_id":77338714,"body_markdown":"I need to send data in json format from the android app to the esp32 wifi module (&quot;arduino&quot;).\r\n\r\nThe android app succesfully sends the data in proper json format... the esp32 module knows its receiving something but it always arrives as an empty input and gives me an error due to it.\r\n\r\nOn the other hand, when I send/receive data from a flask server to the esp32 module it works fine. Same with sending/receiving data from flask server to android app... Any suggestions or am I doing something wrong between the two? \r\n\r\n\r\nThis is part of a &quot;big project&quot; for class and has over 2 months of work into it, so I really need this to work here. Thanks!\r\n\r\nI have tried sending simple strings like &quot;hey&quot;, where the content type is set as &quot;plain&quot; and it still arrives as an empty string to the esp32...\r\n\r\n\r\n**I have the following in the esp32 module:**\r\n\r\n```\r\n#include &lt;ArduinoJson.h&gt;\r\n#include &lt;WiFi.h&gt;\r\n#include &lt;ESPAsyncWebServer.h&gt;\r\n#include &lt;HTTPClient.h&gt;\r\n#include &quot;AsyncJson.h&quot;\r\n\r\nconst char* ssid = &quot;wifi_ssid&quot;;                //changed these for the post\r\nconst char* password = &quot;wifi_password&quot;;        //changed these for the post\r\nconst unsigned long connectionTimeout = 10000;\r\n\r\nAsyncWebServer server(80);\r\n\r\nvoid setup() {\r\n  Serial.begin(115200);\r\n\r\n  Serial.print(&quot;Connecting to Wifi...&quot;);\r\n\r\n  // Connect to Wi-Fi\r\n  WiFi.begin(ssid, password);\r\n  while (WiFi.status() != WL_CONNECTED) {\r\n    Serial.print(&quot;.&quot;);\r\n    delay(1000);\r\n  }\r\n  Serial.print(&quot;Connected to WiFi. IP address: &quot;);\r\n  Serial.println(WiFi.localIP());\r\n\r\n  //other code stuff...\r\n\r\n  // Start server\r\n  //other server.on() stuff...\r\n  server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\r\n  \r\n  server.begin();\r\n}\r\n\r\nvoid handleBrewCoffee(AsyncWebServerRequest *request) {\r\n  if (request != nullptr) {\r\n\r\n    String clientIPAddress = request-&gt;client()-&gt;remoteIP().toString();\r\n\r\n    // Here I receive the data and print it\r\n    String recipeReceived = request-&gt;arg(&quot;application/json&quot;);\r\n    Serial.print(&quot;\\n&quot; + clientIPAddress);\r\n    Serial.print(&quot; sent string: &quot;);\r\n    Serial.println(recipeReceived);\r\n\r\n    DynamicJsonDocument jsonDoc(16386);\r\n    DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\r\n\r\n    //This is where I get the EmptyInput error\r\n    if (error) {\r\n      Serial.print(&quot;Failed to parse JSON: &quot;);\r\n      Serial.println(error.c_str());\r\n      recipeReceived = &quot;not: &quot; + clientIPAddress;\r\n\r\n    } else{\r\n        //Extracting json data\r\n        const char* username = jsonDoc[&quot;username&quot;];\r\n        const char* user_ip = jsonDoc[&quot;user_ip&quot;];\r\n        const char* user_id = jsonDoc[&quot;user_id&quot;];\r\n        const char* name = jsonDoc[&quot;name&quot;];\r\n        //I do rest of the data likewise\r\n\r\n        // Print the coffee information\r\n        Serial.println(&quot;\\nCoffee Information:&quot;);\r\n        Serial.print(&quot;username: &quot;); Serial.println(username);\r\n        Serial.print(&quot;user_id: &quot;); Serial.println(user_id);\r\n        Serial.print(&quot;Coffee Name: &quot;); Serial.println(name);\r\n        //I do rest of the data likewise\r\n        \r\n        recipeReceived = &quot;Coffee Received&quot;;\r\n      }\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n**This is the function in my android app (from android studio) that sends the data:**\r\n\r\n```\r\n    public String makeServiceCallPostJSON(String reqUrl, String username, String user_ip, int user_id, String name, more params...) {\r\n\r\n        String response = null;\r\n        try {\r\n\r\n            //This url is the same as the esp32 with its proper endpoint\r\n            URL url = new URL(reqUrl);\r\n\r\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n\r\n            JSONObject jsonParams = new JSONObject();\r\n            jsonParams.put(&quot;username&quot;, username);\r\n            jsonParams.put(&quot;user_ip&quot;, user_ip);\r\n            jsonParams.put(&quot;user_id&quot;, user_id);\r\n            jsonParams.put(&quot;name&quot;, name);\r\n            //I do rest likewise\r\n\r\n\r\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n            conn.setDoOutput(true);\r\n            conn.setDoInput(true);\r\n            System.out.println(jsonParams.toString());\r\n\r\n            conn.getOutputStream().write(jsonParams.toString().getBytes(&quot;UTF-8&quot;));\r\n\r\n            // read the response\r\n            InputStream in = new BufferedInputStream(conn.getInputStream());\r\n\r\n            // Convert the InputStream in a String\r\n            response = convertStreamToString(in);\r\n\r\n            System.out.println(&quot;This is what i got... &quot; + response);\r\n\r\n        } catch (MalformedURLException e) {\r\n            Log.e(TAG, &quot;MalformedURLException: &quot; + e.getMessage());\r\n        } catch (ProtocolException e) {\r\n            Log.e(TAG, &quot;ProtocolException: &quot; + e.getMessage());\r\n        } catch (IOException e) {\r\n            Log.e(TAG, &quot;IOException: &quot; + e.getMessage());\r\n        } catch (Exception e) {\r\n            Log.e(TAG, &quot;Exception: &quot; + e.getMessage());\r\n        }\r\n        return response;\r\n    }\r\n```\r\n\r\n**This is the output I get in the esp32 module**\r\n&gt; ###.###.#.### (client address) Sent string: \r\n&gt; Failed to parse JSON: EmptyInput\r\n\r\n\r\n\r\n**These are the prints I get in android studio&#39;s Logcat**\r\n&gt; {&quot;username&quot;:&quot;guest&quot;,&quot;user_ip&quot;:&quot;###.###.#.###&quot;,&quot;user_id&quot;:1,&quot;name&quot;:&quot;Coffee B&quot;, ...} \r\n&gt; This is what i got... not\r\n\r\n\r\nThe user_ip is the same as the client address printed in the esp32 output. Which further proofs its &quot;receiving&quot; something even if its empty...","title":"Every time I send data from android app to esp32 module, it arrives as an &quot;EmptyInput&quot;","body":"<p>I need to send data in json format from the android app to the esp32 wifi module (&quot;arduino&quot;).</p>\n<p>The android app succesfully sends the data in proper json format... the esp32 module knows its receiving something but it always arrives as an empty input and gives me an error due to it.</p>\n<p>On the other hand, when I send/receive data from a flask server to the esp32 module it works fine. Same with sending/receiving data from flask server to android app... Any suggestions or am I doing something wrong between the two?</p>\n<p>This is part of a &quot;big project&quot; for class and has over 2 months of work into it, so I really need this to work here. Thanks!</p>\n<p>I have tried sending simple strings like &quot;hey&quot;, where the content type is set as &quot;plain&quot; and it still arrives as an empty string to the esp32...</p>\n<p><strong>I have the following in the esp32 module:</strong></p>\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;ESPAsyncWebServer.h&gt;\n#include &lt;HTTPClient.h&gt;\n#include &quot;AsyncJson.h&quot;\n\nconst char* ssid = &quot;wifi_ssid&quot;;                //changed these for the post\nconst char* password = &quot;wifi_password&quot;;        //changed these for the post\nconst unsigned long connectionTimeout = 10000;\n\nAsyncWebServer server(80);\n\nvoid setup() {\n  Serial.begin(115200);\n\n  Serial.print(&quot;Connecting to Wifi...&quot;);\n\n  // Connect to Wi-Fi\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED) {\n    Serial.print(&quot;.&quot;);\n    delay(1000);\n  }\n  Serial.print(&quot;Connected to WiFi. IP address: &quot;);\n  Serial.println(WiFi.localIP());\n\n  //other code stuff...\n\n  // Start server\n  //other server.on() stuff...\n  server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\n  \n  server.begin();\n}\n\nvoid handleBrewCoffee(AsyncWebServerRequest *request) {\n  if (request != nullptr) {\n\n    String clientIPAddress = request-&gt;client()-&gt;remoteIP().toString();\n\n    // Here I receive the data and print it\n    String recipeReceived = request-&gt;arg(&quot;application/json&quot;);\n    Serial.print(&quot;\\n&quot; + clientIPAddress);\n    Serial.print(&quot; sent string: &quot;);\n    Serial.println(recipeReceived);\n\n    DynamicJsonDocument jsonDoc(16386);\n    DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\n\n    //This is where I get the EmptyInput error\n    if (error) {\n      Serial.print(&quot;Failed to parse JSON: &quot;);\n      Serial.println(error.c_str());\n      recipeReceived = &quot;not: &quot; + clientIPAddress;\n\n    } else{\n        //Extracting json data\n        const char* username = jsonDoc[&quot;username&quot;];\n        const char* user_ip = jsonDoc[&quot;user_ip&quot;];\n        const char* user_id = jsonDoc[&quot;user_id&quot;];\n        const char* name = jsonDoc[&quot;name&quot;];\n        //I do rest of the data likewise\n\n        // Print the coffee information\n        Serial.println(&quot;\\nCoffee Information:&quot;);\n        Serial.print(&quot;username: &quot;); Serial.println(username);\n        Serial.print(&quot;user_id: &quot;); Serial.println(user_id);\n        Serial.print(&quot;Coffee Name: &quot;); Serial.println(name);\n        //I do rest of the data likewise\n        \n        recipeReceived = &quot;Coffee Received&quot;;\n      }\n  }\n}\n\n</code></pre>\n<p><strong>This is the function in my android app (from android studio) that sends the data:</strong></p>\n<pre><code>    public String makeServiceCallPostJSON(String reqUrl, String username, String user_ip, int user_id, String name, more params...) {\n\n        String response = null;\n        try {\n\n            //This url is the same as the esp32 with its proper endpoint\n            URL url = new URL(reqUrl);\n\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n            conn.setRequestMethod(&quot;POST&quot;);\n\n            JSONObject jsonParams = new JSONObject();\n            jsonParams.put(&quot;username&quot;, username);\n            jsonParams.put(&quot;user_ip&quot;, user_ip);\n            jsonParams.put(&quot;user_id&quot;, user_id);\n            jsonParams.put(&quot;name&quot;, name);\n            //I do rest likewise\n\n\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            System.out.println(jsonParams.toString());\n\n            conn.getOutputStream().write(jsonParams.toString().getBytes(&quot;UTF-8&quot;));\n\n            // read the response\n            InputStream in = new BufferedInputStream(conn.getInputStream());\n\n            // Convert the InputStream in a String\n            response = convertStreamToString(in);\n\n            System.out.println(&quot;This is what i got... &quot; + response);\n\n        } catch (MalformedURLException e) {\n            Log.e(TAG, &quot;MalformedURLException: &quot; + e.getMessage());\n        } catch (ProtocolException e) {\n            Log.e(TAG, &quot;ProtocolException: &quot; + e.getMessage());\n        } catch (IOException e) {\n            Log.e(TAG, &quot;IOException: &quot; + e.getMessage());\n        } catch (Exception e) {\n            Log.e(TAG, &quot;Exception: &quot; + e.getMessage());\n        }\n        return response;\n    }\n</code></pre>\n<p><strong>This is the output I get in the esp32 module</strong></p>\n<blockquote>\n<p>###.###.#.### (client address) Sent string:\nFailed to parse JSON: EmptyInput</p>\n</blockquote>\n<p><strong>These are the prints I get in android studio's Logcat</strong></p>\n<blockquote>\n<p>{&quot;username&quot;:&quot;guest&quot;,&quot;user_ip&quot;:&quot;###.###.#.###&quot;,&quot;user_id&quot;:1,&quot;name&quot;:&quot;Coffee B&quot;, ...}\nThis is what i got... not</p>\n</blockquote>\n<p>The user_ip is the same as the client address printed in the esp32 output. Which further proofs its &quot;receiving&quot; something even if its empty...</p>\n"},{"tags":["java","spring-boot","gradle","heroku"],"comments":[{"owner":{"account_id":12937672,"reputation":1290,"user_id":9354495,"display_name":"yuppie-flu"},"score":0,"creation_date":1673819200,"post_id":75128503,"comment_id":132577362,"body_markdown":"It looks like your configuration is setting Java 8 as the target, instead of Java 17. Can you share your `build.gradle`? Or check for any properties with `8` or `1.8` there.","body":"It looks like your configuration is setting Java 8 as the target, instead of Java 17. Can you share your <code>build.gradle</code>? Or check for any properties with <code>8</code> or <code>1.8</code> there."},{"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"score":0,"creation_date":1673819572,"post_id":75128503,"comment_id":132577421,"body_markdown":"Updated the post with the file. I couldn&#39;t find anywhere v8 or 1.8 :\\","body":"Updated the post with the file. I couldn&#39;t find anywhere v8 or 1.8 :\\"},{"owner":{"account_id":12937672,"reputation":1290,"user_id":9354495,"display_name":"yuppie-flu"},"score":1,"creation_date":1673820542,"post_id":75128503,"comment_id":132577561,"body_markdown":"The `build.gradle` looks correct. Then my only guess would be that your configuration for heroku to use Java 17 didn&#39;t apply, because Heroku docs say the default Java version is 8: https://devcenter.heroku.com/articles/java-support#specifying-a-java-version","body":"The <code>build.gradle</code> looks correct. Then my only guess would be that your configuration for heroku to use Java 17 didn&#39;t apply, because Heroku docs say the default Java version is 8: <a href=\"https://devcenter.heroku.com/articles/java-support#specifying-a-java-version\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a>"},{"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"score":0,"creation_date":1673856938,"post_id":75128503,"comment_id":132582508,"body_markdown":"Yes this worked, i have missed that in docs. Thank you !","body":"Yes this worked, i have missed that in docs. Thank you !"}],"answers":[{"tags":[],"owner":{"account_id":19598896,"reputation":153,"user_id":14344214,"display_name":"Ricardo Costa"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1688541146,"creation_date":1688541146,"answer_id":76617878,"question_id":75128503,"body_markdown":"If you are using InteliJ you need to go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle and change the Gradle JVM to be the 17.\r\n\r\nCheers","title":"Spring boot gradle build fails","body":"<p>If you are using InteliJ you need to go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle and change the Gradle JVM to be the 17.</p>\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031578,"creation_date":1698031578,"answer_id":77342493,"question_id":75128503,"body_markdown":"The Java version being invoked may not match.\r\n  \r\nYou might check version output from `java --version`  and any java environment variables, such as `JAVA_HOME` to make sure it matches JDK v17.   \r\nAlso, make sure the java being executed is a JDK installation and not just a java runtime.  \r\n \r\nI was getting this error on GitHub actions when running `ubuntu-latest` which at the time uses JVM 20.  \r\n\r\nI explicitly configured JDK 17, and the error was resolved.  \r\n\r\nExample GitHub action config - \r\n```\r\njobs:\r\n  build:\r\n    name: Build\r\n    runs-on: ubuntu-latest \r\n    steps:\r\n      - uses: actions/checkout@v2\r\n\r\n      - uses: actions/setup-java@v3\r\n        with:\r\n          distribution: &#39;temurin&#39; # See &#39;Supported distributions&#39; for available options\r\n          java-version: &#39;17&#39;\r\n\r\n      - name: Build Jar\r\n        run: ./gradlew build \r\n```","title":"Spring boot gradle build fails","body":"<p>The Java version being invoked may not match.</p>\n<p>You might check version output from <code>java --version</code>  and any java environment variables, such as <code>JAVA_HOME</code> to make sure it matches JDK v17.<br />\nAlso, make sure the java being executed is a JDK installation and not just a java runtime.</p>\n<p>I was getting this error on GitHub actions when running <code>ubuntu-latest</code> which at the time uses JVM 20.</p>\n<p>I explicitly configured JDK 17, and the error was resolved.</p>\n<p>Example GitHub action config -</p>\n<pre><code>jobs:\n  build:\n    name: Build\n    runs-on: ubuntu-latest \n    steps:\n      - uses: actions/checkout@v2\n\n      - uses: actions/setup-java@v3\n        with:\n          distribution: 'temurin' # See 'Supported distributions' for available options\n          java-version: '17'\n\n      - name: Build Jar\n        run: ./gradlew build \n</code></pre>\n"}],"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4617,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698031578,"creation_date":1673817869,"question_id":75128503,"body_markdown":"When i try to build the project i am getting this error (while deploying to heroku). Its my first Spring boot app and honestly i can&#39;t find any solution to this issue. My Jdk is v.17\r\n\r\n```\r\nremote:        A problem occurred configuring root project &#39;demo&#39;.\r\nremote:        &gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\nremote:           &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.1.\r\nremote:             Required by:\r\nremote:                 project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.1\r\nremote:              &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.1 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.6&#39; but:\r\nremote:                  - Variant &#39;apiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;javadocElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\r\nremote:                      - Other compatible attributes:\r\nremote:                          - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\nremote:                          - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;mavenOptionalApiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;mavenOptionalRuntimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;runtimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;sourcesElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\r\nremote:                      - Other compatible attributes:\r\nremote:                          - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\nremote:                          - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n\r\n```\r\n\r\nEDIT:\r\n\r\nHere is the build.gradle file configuration. Perhaps some dependency is not compatible?\r\n\r\n```\r\nplugins {\r\n    id &#39;java-library&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.1&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation group: &#39;com.opencsv&#39;, name: &#39;opencsv&#39;, version: &#39;5.7.1&#39;\r\n    implementation group: &#39;org.modelmapper&#39;, name: &#39;modelmapper&#39;, version: &#39;3.1.1&#39;\r\n\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```","title":"Spring boot gradle build fails","body":"<p>When i try to build the project i am getting this error (while deploying to heroku). Its my first Spring boot app and honestly i can't find any solution to this issue. My Jdk is v.17</p>\n<pre><code>remote:        A problem occurred configuring root project 'demo'.\nremote:        &gt; Could not resolve all files for configuration ':classpath'.\nremote:           &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.1.\nremote:             Required by:\nremote:                 project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.1\nremote:              &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.1 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6' but:\nremote:                  - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'javadocElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\nremote:                      - Other compatible attributes:\nremote:                          - Doesn't say anything about its target Java version (required compatibility with Java 8)\nremote:                          - Doesn't say anything about its elements (required them packaged as a jar)\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'mavenOptionalApiElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'mavenOptionalRuntimeElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'runtimeElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'sourcesElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\nremote:                      - Other compatible attributes:\nremote:                          - Doesn't say anything about its target Java version (required compatibility with Java 8)\nremote:                          - Doesn't say anything about its elements (required them packaged as a jar)\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n\n</code></pre>\n<p>EDIT:</p>\n<p>Here is the build.gradle file configuration. Perhaps some dependency is not compatible?</p>\n<pre><code>plugins {\n    id 'java-library'\n    id 'org.springframework.boot' version '3.0.1'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compileOnly 'org.projectlombok:lombok'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation group: 'com.opencsv', name: 'opencsv', version: '5.7.1'\n    implementation group: 'org.modelmapper', name: 'modelmapper', version: '3.1.1'\n\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n"},{"tags":["java","spring-mvc"],"answers":[{"comments":[{"owner":{"account_id":152408,"reputation":6071,"user_id":366916,"accept_rate":50,"display_name":"bharathi"},"score":0,"creation_date":1536217628,"post_id":52192122,"comment_id":91345765,"body_markdown":"Is there any solution for for the above issue.","body":"Is there any solution for for the above issue."},{"owner":{"account_id":4205783,"reputation":3,"user_id":3444717,"accept_rate":75,"display_name":"Kush Khandelwal"},"score":0,"creation_date":1536307816,"post_id":52192122,"comment_id":91384737,"body_markdown":"Although I have never tried it but, you&#39;ll have to create a custom ThreadPoolTaskExecutor for your application.\nSee this - \nhttps://stackoverflow.com/questions/23732089/how-to-enable-request-scope-in-async-task-executor#33337838\nAnd if there are not that many objects, you can pass them around your code.","body":"Although I have never tried it but, you&#39;ll have to create a custom ThreadPoolTaskExecutor for your application. See this -  <a href=\"https://stackoverflow.com/questions/23732089/how-to-enable-request-scope-in-async-task-executor#33337838\" title=\"how to enable request scope in async task executor%2333337838\">stackoverflow.com/questions/23732089/&hellip;</a> And if there are not that many objects, you can pass them around your code."}],"tags":[],"owner":{"account_id":4205783,"reputation":3,"user_id":3444717,"accept_rate":75,"display_name":"Kush Khandelwal"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536175388,"creation_date":1536175388,"answer_id":52192122,"question_id":52189445,"body_markdown":"In my case it happened when I created a bean at request level and tried to access it from another thread created using @Async annotation. The bean information was stored in the thread local of the original thread only.\r\n\r\nAre you using something created and stored in the thread local of the base thread in the function or subsequent functions after @Async notification?\r\n\r\n@Async creates another thread but doesn&#39;t copy the thread local of the original thread which causes the issue.\r\n\r\nSee this - https://jira.spring.io/browse/SPR-6873","title":"Getting java.lang.IllegalStateException: No thread-bound request found","body":"<p>In my case it happened when I created a bean at request level and tried to access it from another thread created using @Async annotation. The bean information was stored in the thread local of the original thread only.</p>\n\n<p>Are you using something created and stored in the thread local of the base thread in the function or subsequent functions after @Async notification?</p>\n\n<p>@Async creates another thread but doesn't copy the thread local of the original thread which causes the issue.</p>\n\n<p>See this - <a href=\"https://jira.spring.io/browse/SPR-6873\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/SPR-6873</a></p>\n"}],"owner":{"account_id":152408,"reputation":6071,"user_id":366916,"accept_rate":50,"display_name":"bharathi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12174,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698030100,"creation_date":1536163710,"question_id":52189445,"body_markdown":"I am getting below error when I try to use @Async annotation.\r\n\r\n    java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\r\nCode:\r\n\r\n   \r\n\r\n    @Async\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void triggerEmailCommunication(List&lt;String&gt; eventCode, Integer authorizationId, Integer claimId,\r\n\t\t\tboolean callMethod) {\r\n\t\tMap&lt;String, Object&gt; emailBody = new HashMap&lt;&gt;();\r\n\t\ttry {\r\n\r\n\t\t\tif (callMethod) {\r\n\t\t\t\tLOGGER.info(&quot;Communication async flow triggerEmailCommunication method starts.&quot;);\r\n\t\t\t\temailBody = emailBodyObject(authorizationId, claimId, eventCode);\r\n      }\r\n\r\n\r\n    private Map&lt;String, Object&gt; emailBodyObject(Integer authorizationId, Integer claimId, List&lt;String&gt; eventCode)\r\n\t\t\tthrows CareBusinessServiceException {\r\n\t\tLOGGER.info(&quot;EmailBodyObject method starts.&quot;);\r\n\t\tMap&lt;String, Object&gt; emailBody = new HashMap&lt;String, Object&gt;();\r\n\t\tEmailClaimDetailsVO emailClaimDetails = new EmailClaimDetailsVO();\r\n\t\tClaimAuthorizationVO claimAuthVO = new ClaimAuthorizationVO();\r\n\t\tClaim claim = new Claim();\r\n\t\tAuthorization authorization = new Authorization();\r\n\t\tList&lt;String&gt; rejectReasonList = new ArrayList&lt;&gt;();\r\n\t\tProvider provider = new Provider();\r\n\t\tString providerName = null;\r\n\t\tString claimIntimationNbr = null;\r\n\t\tString authorizationNbr = null;\r\n\t\tSimpleDateFormat formatter = new SimpleDateFormat(AmhiConstants.DATE_FORMAT_DD_MM_YYYY);\r\n\t\ttry {\r\n\t\t\tInteger claimIntimationId = null;\r\n\t\t\tif (null != claimId) {\r\n\t\t\t\tclaim = enableBusinessService.retrieveClaimDetails(claimId);\r\n         } catch(Exception e) {\r\n         }\r\n    }\r\n\r\nDAO Layer\r\n\r\n   \r\n\r\n    @Override\r\n\tpublic Claim retrieveClaimIdRecord(Integer claimId) {\r\n\t\tCriteriaBuilder builder = manager.getCriteriaBuilder();\r\n\t\tCriteriaQuery&lt;Claim&gt; criteriaQuery = builder.createQuery(Claim.class);\r\n\t\tRoot&lt;Claim&gt; root = criteriaQuery.from(Claim.class);\r\n\t\tArrayList&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\r\n\t\tconditions.add(builder.equal(root.get(Claim_.claimId), claimId));\r\n\t\tcriteriaQuery.select(root).where(conditions.toArray(new Predicate[] {}));\r\n\t\tjavax.persistence.Query query = manager.createQuery(criteriaQuery);\r\n\t\tList&lt;Claim&gt; claims = query.getResultList();\r\n\t\tif(CollectionUtils.isNotEmpty(claims)){\r\n\t\t\treturn claims.get(0);\r\n\t\t}\r\n\t\treturn new Claim();\r\n\t}\r\n\r\nThe value is getting retrieved from DB. But I am getting above exception as mentioned.\r\n\r\n","title":"Getting java.lang.IllegalStateException: No thread-bound request found","body":"<p>I am getting below error when I try to use @Async annotation.</p>\n\n<pre><code>java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>@Async\n@Override\n@Transactional\npublic void triggerEmailCommunication(List&lt;String&gt; eventCode, Integer authorizationId, Integer claimId,\n        boolean callMethod) {\n    Map&lt;String, Object&gt; emailBody = new HashMap&lt;&gt;();\n    try {\n\n        if (callMethod) {\n            LOGGER.info(\"Communication async flow triggerEmailCommunication method starts.\");\n            emailBody = emailBodyObject(authorizationId, claimId, eventCode);\n  }\n\n\nprivate Map&lt;String, Object&gt; emailBodyObject(Integer authorizationId, Integer claimId, List&lt;String&gt; eventCode)\n        throws CareBusinessServiceException {\n    LOGGER.info(\"EmailBodyObject method starts.\");\n    Map&lt;String, Object&gt; emailBody = new HashMap&lt;String, Object&gt;();\n    EmailClaimDetailsVO emailClaimDetails = new EmailClaimDetailsVO();\n    ClaimAuthorizationVO claimAuthVO = new ClaimAuthorizationVO();\n    Claim claim = new Claim();\n    Authorization authorization = new Authorization();\n    List&lt;String&gt; rejectReasonList = new ArrayList&lt;&gt;();\n    Provider provider = new Provider();\n    String providerName = null;\n    String claimIntimationNbr = null;\n    String authorizationNbr = null;\n    SimpleDateFormat formatter = new SimpleDateFormat(AmhiConstants.DATE_FORMAT_DD_MM_YYYY);\n    try {\n        Integer claimIntimationId = null;\n        if (null != claimId) {\n            claim = enableBusinessService.retrieveClaimDetails(claimId);\n     } catch(Exception e) {\n     }\n}\n</code></pre>\n\n<p>DAO Layer</p>\n\n<pre><code>@Override\npublic Claim retrieveClaimIdRecord(Integer claimId) {\n    CriteriaBuilder builder = manager.getCriteriaBuilder();\n    CriteriaQuery&lt;Claim&gt; criteriaQuery = builder.createQuery(Claim.class);\n    Root&lt;Claim&gt; root = criteriaQuery.from(Claim.class);\n    ArrayList&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\n    conditions.add(builder.equal(root.get(Claim_.claimId), claimId));\n    criteriaQuery.select(root).where(conditions.toArray(new Predicate[] {}));\n    javax.persistence.Query query = manager.createQuery(criteriaQuery);\n    List&lt;Claim&gt; claims = query.getResultList();\n    if(CollectionUtils.isNotEmpty(claims)){\n        return claims.get(0);\n    }\n    return new Claim();\n}\n</code></pre>\n\n<p>The value is getting retrieved from DB. But I am getting above exception as mentioned.</p>\n"},{"tags":["java","google-analytics-4"],"owner":{"account_id":2704775,"reputation":61,"user_id":2334598,"display_name":"KarelH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698029825,"creation_date":1681407098,"question_id":76008311,"body_markdown":"we are using GA4 to monitor all installed application in our customers. And we need to know, which version is there. Our app is web app (WAR) in Tomcat.\r\n\r\nEach page which is generated and sended to client browser contains this gtag script.\r\n\r\n`gtag(&#39;config&#39;, &#39;OUR-COMON-GA4-ID&#39;, {&#39;app_version&#39;: &#39;1.0.1&#39;});`\r\n\r\nThere we put additional config information (https://developers.google.com/tag-platform/gtagjs/reference#config) and this additional information is in GA4 joined to each logged event.\r\n\r\nI need to help with reading this additional information, using official JAVA library for acces GA4 so that I can determine for each event the version of the application that generated it.\r\n\r\nDoes anybody know how to read events additional parameters via API\r\n\r\nThanks a lot\r\n\r\nI try to add new dimension\r\n\r\n    addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\r\n\r\nbut it does not works.\r\n\r\nI get error\r\nINVALID_ARGUMENT: Field event_params.app_version is not a valid dimension.\r\n\r\nwithout this dimension event_params.app_version I am able to read data successfully\r\n\r\n```\r\nstatic void sampleRunReport(String propertyId, String credentialsJsonPath) throws Exception {\r\n\t// [START analyticsdata_json_credentials_initialize]\r\n\t// Explicitly use service account credentials by specifying\r\n\t// the private key file.\r\n\tGoogleCredentials credentials =\r\n\t\tGoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\r\n\r\n\tBetaAnalyticsDataSettings betaAnalyticsDataSettings =\r\n\t\tBetaAnalyticsDataSettings.newBuilder()\r\n\t\t\t.setCredentialsProvider(FixedCredentialsProvider.create(credentials))\r\n\t\t\t.build();\r\n\r\n\ttry (BetaAnalyticsDataClient analyticsData =\r\n\t\tBetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\r\n\t  // [END analyticsdata_json_credentials_initialize]\r\n\r\n\t  // [START analyticsdata_json_credentials_run_report]\r\n\t  RunReportRequest request =\r\n\t\t  RunReportRequest.newBuilder()\r\n\t\t\t  .setProperty(&quot;properties/&quot; + propertyId)\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;pagePath&quot;))\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\r\n\t\t\t  .addMetrics(Metric.newBuilder().setName(&quot;sessions&quot;))\r\n\t\t\t  .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-03-31&quot;).setEndDate(&quot;2023-04-02&quot;))\r\n\t\t\t  .addOrderBys(OrderBy.newBuilder().setDimension(DimensionOrderBy.newBuilder().setDimensionName(&quot;date&quot;))).build();\r\n\r\n\t  // Make the request.\r\n\t  RunReportResponse response = analyticsData.runReport(request);\r\n\t  // [END analyticsdata_json_credentials_run_report]\r\n\r\n\t  //READ RESPONSE\r\n```\r\n\r\nDoes anobody know how to read it ?\r\n\r\nThank a lot.","title":"Google Analytics 4 (GA4) - reading events include custom properties","body":"<p>we are using GA4 to monitor all installed application in our customers. And we need to know, which version is there. Our app is web app (WAR) in Tomcat.</p>\n<p>Each page which is generated and sended to client browser contains this gtag script.</p>\n<p><code>gtag('config', 'OUR-COMON-GA4-ID', {'app_version': '1.0.1'});</code></p>\n<p>There we put additional config information (<a href=\"https://developers.google.com/tag-platform/gtagjs/reference#config\" rel=\"nofollow noreferrer\">https://developers.google.com/tag-platform/gtagjs/reference#config</a>) and this additional information is in GA4 joined to each logged event.</p>\n<p>I need to help with reading this additional information, using official JAVA library for acces GA4 so that I can determine for each event the version of the application that generated it.</p>\n<p>Does anybody know how to read events additional parameters via API</p>\n<p>Thanks a lot</p>\n<p>I try to add new dimension</p>\n<pre><code>addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\n</code></pre>\n<p>but it does not works.</p>\n<p>I get error\nINVALID_ARGUMENT: Field event_params.app_version is not a valid dimension.</p>\n<p>without this dimension event_params.app_version I am able to read data successfully</p>\n<pre><code>static void sampleRunReport(String propertyId, String credentialsJsonPath) throws Exception {\n    // [START analyticsdata_json_credentials_initialize]\n    // Explicitly use service account credentials by specifying\n    // the private key file.\n    GoogleCredentials credentials =\n        GoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\n\n    BetaAnalyticsDataSettings betaAnalyticsDataSettings =\n        BetaAnalyticsDataSettings.newBuilder()\n            .setCredentialsProvider(FixedCredentialsProvider.create(credentials))\n            .build();\n\n    try (BetaAnalyticsDataClient analyticsData =\n        BetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\n      // [END analyticsdata_json_credentials_initialize]\n\n      // [START analyticsdata_json_credentials_run_report]\n      RunReportRequest request =\n          RunReportRequest.newBuilder()\n              .setProperty(&quot;properties/&quot; + propertyId)\n              .addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\n              .addDimensions(Dimension.newBuilder().setName(&quot;pagePath&quot;))\n              .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\n              .addMetrics(Metric.newBuilder().setName(&quot;sessions&quot;))\n              .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-03-31&quot;).setEndDate(&quot;2023-04-02&quot;))\n              .addOrderBys(OrderBy.newBuilder().setDimension(DimensionOrderBy.newBuilder().setDimensionName(&quot;date&quot;))).build();\n\n      // Make the request.\n      RunReportResponse response = analyticsData.runReport(request);\n      // [END analyticsdata_json_credentials_run_report]\n\n      //READ RESPONSE\n</code></pre>\n<p>Does anobody know how to read it ?</p>\n<p>Thank a lot.</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answers":[{"tags":[],"owner":{"account_id":27529235,"reputation":437,"user_id":21008053,"display_name":"subasri_"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698029699,"creation_date":1698029699,"answer_id":77342429,"question_id":77339996,"body_markdown":"Directly invoking the `main` method and expecting the entire flow to happen on its own is not essentially unit testing. Unit tests are written to test/verify the smallest piece of executable code (units) in an isolated manner. Meaning that you test every flow in a method individually separating it from the external behaviors. This isolation is commonly done using test doubles ([mocks][1])\r\n\r\nI suggest you understand the fundamentals right by referring to the official documentations and other resources available\r\n\r\n  [1]: https://site.mockito.org/","title":"How to test java input and expected Output with Junit 4","body":"<p>Directly invoking the <code>main</code> method and expecting the entire flow to happen on its own is not essentially unit testing. Unit tests are written to test/verify the smallest piece of executable code (units) in an isolated manner. Meaning that you test every flow in a method individually separating it from the external behaviors. This isolation is commonly done using test doubles (<a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">mocks</a>)</p>\n<p>I suggest you understand the fundamentals right by referring to the official documentations and other resources available</p>\n"}],"owner":{"account_id":19635074,"reputation":1,"user_id":14372488,"display_name":"mlhb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698029699,"creation_date":1697978879,"question_id":77339996,"body_markdown":"# How to test Java input/output\r\n\r\nHello, \r\n\r\nI have the following problem: I have a class, which handles the user interaction (Input/Output) and I need to write Junit4 tests for it. \r\n\r\nThe class I want to test looks something like this:\r\n```java\r\npackage program;\r\n// imports\r\npublic class UserInteraction {\r\n\tprivate Program program;\r\n\r\n    private UserInteraction(){\r\n        program = new Program();\r\n    }\r\n\r\n\t// Menu display\r\n\tprivate void start() {\r\n\t\twhile (!program.getProgramStarted) {\r\n\t\t\tString input = readInput();\r\n\t\t\tswitch (input) {\r\n\t\t\tcase &quot;1&quot;:\r\n\t\t\t\taddUser();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;2&quot;:\r\n\t\t\t\tdeleteUser();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;3&quot;:\r\n\t\t\t\t// ...\r\n\t\t\tdefault:\r\n\t\t\t\tSystem.err.println(&quot;Unknown option&quot;);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void addUser() {\r\n\t\t// Output\r\n\t\tString username = readInput();\r\n\t\tprogram.addUser(username);\r\n\t\tSystem.out.println(&quot;User &quot; + username + &quot;added&quot;);\r\n\t}\r\n\r\n\tprivate void deleteUser() {\r\n\t\t// Output\r\n\t\tString username = readInput();\r\n\t\tprogram.deleteUser(username);\r\n\t\tSystem.out.println(&quot;User &quot; + username + &quot;deleted&quot;);\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;resource&quot;)\r\n\tprivate String readInput() {\r\n\t\treturn (new Scanner(System.in)).nextLine();\r\n\t}\r\n\r\n\tpublic void main(String[] args) {\r\n\t\tUserInteraction ui = new UserInteraction();\r\n\t\tui.start();\r\n\t}\r\n\r\n}\r\n```\r\nAnd the program class looks something like this: \r\n```java\r\npackage program;\r\n// imports\r\npublic class Program {\r\n    // fields\r\n    private User currentUser;\r\n\tprivate List&lt;User&gt; user = new ArrayList&lt;User&gt;();\r\n\t// constructor\r\n\r\n\tpublic void addUser(String name) throws Exception {\r\n\t\tif (user.size() &gt;= 6) {\r\n\t\t\tthrow new Exception();\r\n\t\t}\r\n\t\tint newID = user.size() + 1;\r\n\t\tuser.add(new User(name, newID));\r\n\t}\r\n\r\n\tpublic String[] getALlUser() {\r\n\t\tint counter = 0;\r\n\t\tString[] userArray = new String[user.size()];\r\n\r\n\t\tfor (User s : user) {\r\n\t\t\tuserArray[counter++] = s.toString();\r\n\t\t}\r\n\t\treturn userArray;\r\n\t}\r\n}\r\n```\r\nNow, for example, I want to test, if the following Input is handled correctly:\r\n```\r\n1\r\nJohn\r\n=&gt; User John added\r\n```\r\nFor this purpose I wrote a Junit test that looks like this:\r\n```java\r\npackage tests;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.InputStream;\r\nimport java.io.PrintStream;\r\n\r\nimport org.junit.After;\r\nimport org.junit.Test;\r\n\r\nimport program.*;\r\n\r\npublic class UserInteractionTest {\r\n\r\n\tprivate final InputStream originalIn = System.in;\r\n\tprivate final PrintStream originalOut = System.out;\r\n\tprivate Program program;\r\n\r\n\t@After\r\n\tpublic void restoreStreams() {\r\n\t\tSystem.setIn(originalIn);\r\n\t\tSystem.setOut(originalOut);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCreateUser() throws Exception {\r\n\t\tString input = &quot;1\\nJohn\\n&quot;;\r\n\t\tByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\r\n\t\tSystem.setIn(in);\r\n\t\tByteArrayOutputStream outContent = new ByteArrayOutputStream();\r\n\t\tSystem.setOut(new PrintStream(outContent)); // Leitet System.out um\r\n\r\n\t\tprogram = new Program();\r\n\t\ttry {\r\n\t\t\tprogram.main(null);\r\n\t\t} finally {\r\n\t\t\tSystem.setIn(originalIn);\r\n\t\t}\r\n\t\tString expectedOutput = &quot;User John added&quot;;\r\n\t\tassertTrue(&quot;Output not found&quot;, outContent.toString().contains(expectedOutput));\r\n\t}\r\n\r\n}\r\n\r\n```\r\nThe input (&quot;1\\n&quot;) is made, however after that, no input is inserted, so the test hangs.\r\nDoes anyone know how to solve this problem? Or, perhaps a better way to test/validate the input/output of my Java program?\r\n\r\nThanks in advance!\r\n\r\nI tried various modifications to the input Stream, like using `System.lineSeparator()` instead of `\\n`, but the problem persists.\r\n\r\n","title":"How to test java input and expected Output with Junit 4","body":"<h1>How to test Java input/output</h1>\n<p>Hello,</p>\n<p>I have the following problem: I have a class, which handles the user interaction (Input/Output) and I need to write Junit4 tests for it.</p>\n<p>The class I want to test looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package program;\n// imports\npublic class UserInteraction {\n    private Program program;\n\n    private UserInteraction(){\n        program = new Program();\n    }\n\n    // Menu display\n    private void start() {\n        while (!program.getProgramStarted) {\n            String input = readInput();\n            switch (input) {\n            case &quot;1&quot;:\n                addUser();\n                break;\n            case &quot;2&quot;:\n                deleteUser();\n                break;\n            case &quot;3&quot;:\n                // ...\n            default:\n                System.err.println(&quot;Unknown option&quot;);\n                break;\n            }\n        }\n    }\n\n    private void addUser() {\n        // Output\n        String username = readInput();\n        program.addUser(username);\n        System.out.println(&quot;User &quot; + username + &quot;added&quot;);\n    }\n\n    private void deleteUser() {\n        // Output\n        String username = readInput();\n        program.deleteUser(username);\n        System.out.println(&quot;User &quot; + username + &quot;deleted&quot;);\n    }\n\n    @SuppressWarnings(&quot;resource&quot;)\n    private String readInput() {\n        return (new Scanner(System.in)).nextLine();\n    }\n\n    public void main(String[] args) {\n        UserInteraction ui = new UserInteraction();\n        ui.start();\n    }\n\n}\n</code></pre>\n<p>And the program class looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package program;\n// imports\npublic class Program {\n    // fields\n    private User currentUser;\n    private List&lt;User&gt; user = new ArrayList&lt;User&gt;();\n    // constructor\n\n    public void addUser(String name) throws Exception {\n        if (user.size() &gt;= 6) {\n            throw new Exception();\n        }\n        int newID = user.size() + 1;\n        user.add(new User(name, newID));\n    }\n\n    public String[] getALlUser() {\n        int counter = 0;\n        String[] userArray = new String[user.size()];\n\n        for (User s : user) {\n            userArray[counter++] = s.toString();\n        }\n        return userArray;\n    }\n}\n</code></pre>\n<p>Now, for example, I want to test, if the following Input is handled correctly:</p>\n<pre><code>1\nJohn\n=&gt; User John added\n</code></pre>\n<p>For this purpose I wrote a Junit test that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package tests;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\nimport java.io.PrintStream;\n\nimport org.junit.After;\nimport org.junit.Test;\n\nimport program.*;\n\npublic class UserInteractionTest {\n\n    private final InputStream originalIn = System.in;\n    private final PrintStream originalOut = System.out;\n    private Program program;\n\n    @After\n    public void restoreStreams() {\n        System.setIn(originalIn);\n        System.setOut(originalOut);\n    }\n\n    @Test\n    public void testCreateUser() throws Exception {\n        String input = &quot;1\\nJohn\\n&quot;;\n        ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\n        System.setIn(in);\n        ByteArrayOutputStream outContent = new ByteArrayOutputStream();\n        System.setOut(new PrintStream(outContent)); // Leitet System.out um\n\n        program = new Program();\n        try {\n            program.main(null);\n        } finally {\n            System.setIn(originalIn);\n        }\n        String expectedOutput = &quot;User John added&quot;;\n        assertTrue(&quot;Output not found&quot;, outContent.toString().contains(expectedOutput));\n    }\n\n}\n\n</code></pre>\n<p>The input (&quot;1\\n&quot;) is made, however after that, no input is inserted, so the test hangs.\nDoes anyone know how to solve this problem? Or, perhaps a better way to test/validate the input/output of my Java program?</p>\n<p>Thanks in advance!</p>\n<p>I tried various modifications to the input Stream, like using <code>System.lineSeparator()</code> instead of <code>\\n</code>, but the problem persists.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1697786706,"post_id":77328074,"comment_id":136325951,"body_markdown":"`authenticationJwtTokenFilter` this is not from the spring security documentation, why are you using JWTs as sessions, why have you written custom security and not read the spring documentation on how to actually build security?","body":"<code>authenticationJwtTokenFilter</code> this is not from the spring security documentation, why are you using JWTs as sessions, why have you written custom security and not read the spring documentation on how to actually build security?"},{"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"score":0,"creation_date":1697792144,"post_id":77328074,"comment_id":136326902,"body_markdown":"please post your JwtTokenFilter  code","body":"please post your JwtTokenFilter  code"},{"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"score":0,"creation_date":1698023796,"post_id":77328074,"comment_id":136348718,"body_markdown":"@Toerktumlare Your question is excellent. I&#39;m doing this project to get a better grasp of Spring Security, and I&#39;ll check the official documentation for your hints","body":"@Toerktumlare Your question is excellent. I&#39;m doing this project to get a better grasp of Spring Security, and I&#39;ll check the official documentation for your hints"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1698042265,"post_id":77328074,"comment_id":136350046,"body_markdown":"If you are learning, dont read poor blogposts.","body":"If you are learning, dont read poor blogposts."},{"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"score":0,"creation_date":1698110115,"post_id":77328074,"comment_id":136360979,"body_markdown":"I just graduated from university and work a year, there are many need me to further study and master, once again, thank you for your teaching","body":"I just graduated from university and work a year, there are many need me to further study and master, once again, thank you for your teaching"}],"answers":[{"tags":[],"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698028841,"creation_date":1698028841,"answer_id":77342380,"question_id":77328074,"body_markdown":"All right, it&#39;s so crazy bug .and I&#39;ve fixed it perfectly\r\n\r\nI tried a lot, When I copy the reference project to my project ,it run successfully, then I found that my SecConfig path is: **/config/security/SecConfig.java**, the other I copied to my project is **/config/security/config/SecurityConfig.java**.\r\n\r\nAfter continuous attempts to compare and query information, I found that the configuration file takes effect only in ralative path **/config**\r\n\r\nMy problem has been solved perfectly. thanks for all!\r\n","title":"Security exceptionHandling cant register successfully,Filter has somthing wrong","body":"<p>All right, it's so crazy bug .and I've fixed it perfectly</p>\n<p>I tried a lot, When I copy the reference project to my project ,it run successfully, then I found that my SecConfig path is: <strong>/config/security/SecConfig.java</strong>, the other I copied to my project is <strong>/config/security/config/SecurityConfig.java</strong>.</p>\n<p>After continuous attempts to compare and query information, I found that the configuration file takes effect only in ralative path <strong>/config</strong></p>\n<p>My problem has been solved perfectly. thanks for all!</p>\n"}],"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77342380,"answer_count":1,"score":-1,"last_activity_date":1698028841,"creation_date":1697770371,"question_id":77328074,"body_markdown":"```\r\n&lt;spring-boot.version&gt;3.1.3&lt;/spring-boot.version&gt;\r\n\r\n-------SecConfig---------\r\n\r\n@Autowired\r\nprivate AnonymousAuthenticationHandler anonymousAuthenticationHandler;\r\n@Bean\r\npublic JwtTokenFilter authenticationJwtTokenFilter() {\r\n    return new JwtTokenFilter();\r\n}\r\n...\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n   ...\r\nhttp.exceptionHandling((exception) -&gt; exception.authenticationEntryPoint(anonymousAuthenticationHandler))\r\n    .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\r\n        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n        .requestMatchers(HttpMethod.POST, &quot;/web/authenticate&quot;).permitAll()\r\n        .requestMatchers(&quot;/error&quot;).permitAll()\r\n        .anyRequest().authenticated())\r\n   .addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n   ...\r\n\r\n-------AnonymousAuthenticationHandler ---------\r\n@Component\r\npublic class AnonymousAuthenticationHandler implements AuthenticationEntryPoint {\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response,\r\n            AuthenticationException authException) throws IOException, ServletException {\r\n\r\n        ResponseUtil.out(Result.error().code(ResultCode.NO_AUTH).message(&quot;匿名用户无权限访问！&quot;));\r\n    }\r\n}\r\n}\r\n```\r\nWhen I initiate a request, the request is successfully entered **authenticationJwtTokenFilter**, but when the request not auth, it cant into my **anonymousAuthenticationHandler**, when I check the type of chainFilter, discover its type seems a bit problematic. For example, its type is **ApplicationFinterConfig** instead of **FilterChainProxy** and my filterChains just own seven filter\r\n\r\n# My project\r\n[enter image description here](https://i.stack.imgur.com/LyimU.png)\r\n\r\n# Other project[click here for check the code](https://github.com/markvivv/springboot-security-jwt-example)\r\n[enter image description here](https://i.stack.imgur.com/IUp0Q.png)\r\n\r\n\r\n\r\n\r\nMy configuration is not much different from his configuration\r\nWhat is the cause of this problem and how can I modify my code\r\n\r\n    public class JwtTokenFilter extends OncePerRequestFilter {\r\n    //获取登录请求地址\r\n    @Value(&quot;${request.login.url}&quot;)\r\n    private String loginUrl;\r\n\r\n    //获取登录请求地址\r\n    @Value(&quot;${request.logout.url}&quot;)\r\n    private String logoutUrl;\r\n\r\n    @Value(&quot;${jwt.expire}&quot;)\r\n    private int expire;\r\n\r\n    @Autowired\r\n    private LoginFailureHandler loginFailureHandler;\r\n\r\n    @Autowired\r\n    private SecurityUserDetailsService securityUserDetailsService;\r\n\r\n    @Autowired\r\n    private RedisUtil redisUtil;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        try {\r\n            // 如果是登录或者登出接口，直接放行\r\n            String requestURI = request.getRequestURI();\r\n            if (requestURI.equals(loginUrl) || requestURI.equals(logoutUrl)) {\r\n                filterChain.doFilter(request, response);\r\n            }\r\n            // 从request获取token\r\n            validToken(request);\r\n        } catch (AuthenticationException e) {\r\n            loginFailureHandler.onAuthenticationFailure(request, response, e);\r\n            logger.error(&quot;Cannot set user authentication!&quot;, e);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private void validToken(HttpServletRequest request) throws AuthenticationException, ValidateException {\r\n        //从头部获取token信息\r\n        String token = request.getHeader(&quot;X-token&quot;);\r\n        //如果请求头部没有获取到token，则从请求的参数中进行获取\r\n        if (ObjUtil.isEmpty(token)) {\r\n            token = request.getParameter(&quot;X-token&quot;);\r\n        }\r\n        //如果请求参数中也不存在token信息，则抛出异常\r\n        if (ObjUtil.isEmpty(token)) {\r\n            throw new CustomAuthException(&quot;token不存在&quot;);\r\n        }\r\n        //判断redis中是否存在该token\r\n        String tokenKey = &quot;&quot;;\r\n        String redisToken = (String) RedisUtil.string.builder().build().get(tokenKey);\r\n\r\n        //如果redis里面没有token,说明该token失效\r\n        if (ObjUtil.isEmpty(redisToken)) {\r\n            throw new CustomAuthException(&quot;token已过期&quot;);\r\n        }\r\n        // 如果token和Redis中的token不一致，则验证失败\r\n        if (!token.equals(redisToken)) {\r\n            throw new CustomAuthException(&quot;token与记录不一致&quot;);\r\n        }\r\n        //如果存在token，则从token中解析出用户名\r\n        JWT jwt = new JWT();\r\n        try {\r\n            JWTUtil.verify(token, &quot;signer&quot;.getBytes());\r\n            JWTValidator.of(token).validateDate(DateUtil.date());\r\n            jwt = JWTUtil.parseToken(token);\r\n        } catch (ValidateException e) {\r\n            throw new CustomAuthException(&quot;token已过期&quot;);\r\n        }\r\n        \r\n        //获取用户信息\r\n        UserDetails user = JSONUtil.toBean(jwt.getPayload(&quot;user&quot;).toString(), User.class);\r\n        //获取权限列表\r\n        user = securityUserDetailsService.loadUserByUsername(user.getUsername());\r\n\r\n        //如果用户为空，则解析失败\r\n        if (ObjUtil.isEmpty(user)) {\r\n            throw new CustomAuthException(&quot;token中不存在用户信息&quot;);\r\n        }\r\n        //此处需要获取token过期时间，如果过期时间剩下预设时间的1/4，则为用户续期token，时间为预设的1/2\r\n        long expired = redisUtil.getExpired(tokenKey);\r\n        if (expired &lt; expire / 4) {\r\n            redisUtil.expire(tokenKey, expire / 2);\r\n        }\r\n\r\n        //创建身份验证对象\r\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user, null,\r\n                user.getAuthorities());\r\n        authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n        //设置到Spring Security上下文\r\n        SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\r\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n    }\r\n}    \r\n\r\n    @Component\r\n    public class LoginFailureHandler implements AuthenticationFailureHandler {\r\n    @Override\r\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\r\n            AuthenticationException exception) throws IOException, ServletException {\r\n        //设置客户端响应编码格式\r\n        response.setContentType(&quot;application/json;charset=UTF-8&quot;);\r\n        //获取输出流\r\n        ServletOutputStream outputStream = response.getOutputStream();\r\n        //提示信息\r\n        String message = null;\r\n        //判断异常类型\r\n        if (exception instanceof AccountExpiredException) {\r\n            message = &quot;账户过期,登录失败！&quot;;\r\n        } else if (exception instanceof BadCredentialsException) {\r\n            message = &quot;用户名或密码错误,登录失败！&quot;;\r\n        } else if (exception instanceof CredentialsExpiredException) {\r\n            message = &quot;密码过期,登录失败！&quot;;\r\n        } else if (exception instanceof DisabledException) {\r\n            message = &quot;账户被禁用,登录失败！ &quot;;\r\n        } else if (exception instanceof LockedException) {\r\n            message = &quot;账户被锁,登录失败！&quot;;\r\n        } else if (exception instanceof InternalAuthenticationServiceException) {\r\n            message = &quot;账户不存在,登录失败！ &quot;;\r\n        } else if (exception instanceof CustomAuthException) {\r\n            message = exception.getMessage();\r\n        } else {\r\n            message = &quot;登录失败！&quot;;\r\n        }\r\n        //将错误信息转换成JSON\r\n\r\n        ResponseUtil.out(Result.error().code(ResultCode.ERROR).message(message));\r\n    }\r\n\r\nthis is my **JwtTokenFilter**, In addition, I also provided the **LoginFailureHandler** for you. The **CustomAuthException** is extends AuthenticationException. Are you aware of any potential problems in my code? @DingHao. thanks","title":"Security exceptionHandling cant register successfully,Filter has somthing wrong","body":"<pre><code>&lt;spring-boot.version&gt;3.1.3&lt;/spring-boot.version&gt;\n\n-------SecConfig---------\n\n@Autowired\nprivate AnonymousAuthenticationHandler anonymousAuthenticationHandler;\n@Bean\npublic JwtTokenFilter authenticationJwtTokenFilter() {\n    return new JwtTokenFilter();\n}\n...\n@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n   ...\nhttp.exceptionHandling((exception) -&gt; exception.authenticationEntryPoint(anonymousAuthenticationHandler))\n    .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\n        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n        .requestMatchers(HttpMethod.POST, &quot;/web/authenticate&quot;).permitAll()\n        .requestMatchers(&quot;/error&quot;).permitAll()\n        .anyRequest().authenticated())\n   .addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n   ...\n\n-------AnonymousAuthenticationHandler ---------\n@Component\npublic class AnonymousAuthenticationHandler implements AuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n\n        ResponseUtil.out(Result.error().code(ResultCode.NO_AUTH).message(&quot;匿名用户无权限访问！&quot;));\n    }\n}\n}\n</code></pre>\n<p>When I initiate a request, the request is successfully entered <strong>authenticationJwtTokenFilter</strong>, but when the request not auth, it cant into my <strong>anonymousAuthenticationHandler</strong>, when I check the type of chainFilter, discover its type seems a bit problematic. For example, its type is <strong>ApplicationFinterConfig</strong> instead of <strong>FilterChainProxy</strong> and my filterChains just own seven filter</p>\n<h1>My project</h1>\n<p><a href=\"https://i.stack.imgur.com/LyimU.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<h1>Other project<a href=\"https://github.com/markvivv/springboot-security-jwt-example\" rel=\"nofollow noreferrer\">click here for check the code</a></h1>\n<p><a href=\"https://i.stack.imgur.com/IUp0Q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>My configuration is not much different from his configuration\nWhat is the cause of this problem and how can I modify my code</p>\n<pre><code>public class JwtTokenFilter extends OncePerRequestFilter {\n//获取登录请求地址\n@Value(&quot;${request.login.url}&quot;)\nprivate String loginUrl;\n\n//获取登录请求地址\n@Value(&quot;${request.logout.url}&quot;)\nprivate String logoutUrl;\n\n@Value(&quot;${jwt.expire}&quot;)\nprivate int expire;\n\n@Autowired\nprivate LoginFailureHandler loginFailureHandler;\n\n@Autowired\nprivate SecurityUserDetailsService securityUserDetailsService;\n\n@Autowired\nprivate RedisUtil redisUtil;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n    try {\n        // 如果是登录或者登出接口，直接放行\n        String requestURI = request.getRequestURI();\n        if (requestURI.equals(loginUrl) || requestURI.equals(logoutUrl)) {\n            filterChain.doFilter(request, response);\n        }\n        // 从request获取token\n        validToken(request);\n    } catch (AuthenticationException e) {\n        loginFailureHandler.onAuthenticationFailure(request, response, e);\n        logger.error(&quot;Cannot set user authentication!&quot;, e);\n    }\n    filterChain.doFilter(request, response);\n}\n\nprivate void validToken(HttpServletRequest request) throws AuthenticationException, ValidateException {\n    //从头部获取token信息\n    String token = request.getHeader(&quot;X-token&quot;);\n    //如果请求头部没有获取到token，则从请求的参数中进行获取\n    if (ObjUtil.isEmpty(token)) {\n        token = request.getParameter(&quot;X-token&quot;);\n    }\n    //如果请求参数中也不存在token信息，则抛出异常\n    if (ObjUtil.isEmpty(token)) {\n        throw new CustomAuthException(&quot;token不存在&quot;);\n    }\n    //判断redis中是否存在该token\n    String tokenKey = &quot;&quot;;\n    String redisToken = (String) RedisUtil.string.builder().build().get(tokenKey);\n\n    //如果redis里面没有token,说明该token失效\n    if (ObjUtil.isEmpty(redisToken)) {\n        throw new CustomAuthException(&quot;token已过期&quot;);\n    }\n    // 如果token和Redis中的token不一致，则验证失败\n    if (!token.equals(redisToken)) {\n        throw new CustomAuthException(&quot;token与记录不一致&quot;);\n    }\n    //如果存在token，则从token中解析出用户名\n    JWT jwt = new JWT();\n    try {\n        JWTUtil.verify(token, &quot;signer&quot;.getBytes());\n        JWTValidator.of(token).validateDate(DateUtil.date());\n        jwt = JWTUtil.parseToken(token);\n    } catch (ValidateException e) {\n        throw new CustomAuthException(&quot;token已过期&quot;);\n    }\n    \n    //获取用户信息\n    UserDetails user = JSONUtil.toBean(jwt.getPayload(&quot;user&quot;).toString(), User.class);\n    //获取权限列表\n    user = securityUserDetailsService.loadUserByUsername(user.getUsername());\n\n    //如果用户为空，则解析失败\n    if (ObjUtil.isEmpty(user)) {\n        throw new CustomAuthException(&quot;token中不存在用户信息&quot;);\n    }\n    //此处需要获取token过期时间，如果过期时间剩下预设时间的1/4，则为用户续期token，时间为预设的1/2\n    long expired = redisUtil.getExpired(tokenKey);\n    if (expired &lt; expire / 4) {\n        redisUtil.expire(tokenKey, expire / 2);\n    }\n\n    //创建身份验证对象\n    UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user, null,\n            user.getAuthorities());\n    authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n    //设置到Spring Security上下文\n    SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\n    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n}\n</code></pre>\n<p>}</p>\n<pre><code>@Component\npublic class LoginFailureHandler implements AuthenticationFailureHandler {\n@Override\npublic void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\n        AuthenticationException exception) throws IOException, ServletException {\n    //设置客户端响应编码格式\n    response.setContentType(&quot;application/json;charset=UTF-8&quot;);\n    //获取输出流\n    ServletOutputStream outputStream = response.getOutputStream();\n    //提示信息\n    String message = null;\n    //判断异常类型\n    if (exception instanceof AccountExpiredException) {\n        message = &quot;账户过期,登录失败！&quot;;\n    } else if (exception instanceof BadCredentialsException) {\n        message = &quot;用户名或密码错误,登录失败！&quot;;\n    } else if (exception instanceof CredentialsExpiredException) {\n        message = &quot;密码过期,登录失败！&quot;;\n    } else if (exception instanceof DisabledException) {\n        message = &quot;账户被禁用,登录失败！ &quot;;\n    } else if (exception instanceof LockedException) {\n        message = &quot;账户被锁,登录失败！&quot;;\n    } else if (exception instanceof InternalAuthenticationServiceException) {\n        message = &quot;账户不存在,登录失败！ &quot;;\n    } else if (exception instanceof CustomAuthException) {\n        message = exception.getMessage();\n    } else {\n        message = &quot;登录失败！&quot;;\n    }\n    //将错误信息转换成JSON\n\n    ResponseUtil.out(Result.error().code(ResultCode.ERROR).message(message));\n}\n</code></pre>\n<p>this is my <strong>JwtTokenFilter</strong>, In addition, I also provided the <strong>LoginFailureHandler</strong> for you. The <strong>CustomAuthException</strong> is extends AuthenticationException. Are you aware of any potential problems in my code? @DingHao. thanks</p>\n"},{"tags":["java","inheritance","composition"],"comments":[{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":1,"creation_date":1697991223,"post_id":77340743,"comment_id":136345832,"body_markdown":"This question might be a better fit for [Software Engineering SE](https://softwareengineering.stackexchange.com).","body":"This question might be a better fit for <a href=\"https://softwareengineering.stackexchange.com\">Software Engineering SE</a>."},{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":2,"creation_date":1697991778,"post_id":77340743,"comment_id":136345895,"body_markdown":"Does this answer your question? [Does inheritance increase coupling?](https://stackoverflow.com/questions/29187277/does-inheritance-increase-coupling)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29187277/does-inheritance-increase-coupling\">Does inheritance increase coupling?</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697998570,"post_id":77340743,"comment_id":136346685,"body_markdown":"When using inheritance, changes to the superclass (like renaming of the class or its public methods) require updating the subclass and all code that uses it.  With composition, any changes to the depedency affect only the composing class.","body":"When using inheritance, changes to the superclass (like renaming of the class or its public methods) require updating the subclass and all code that uses it.  With composition, any changes to the depedency affect only the composing class."},{"owner":{"account_id":4617439,"reputation":488,"user_id":3743424,"accept_rate":9,"display_name":"cobby"},"score":0,"creation_date":1698001082,"post_id":77340743,"comment_id":136346946,"body_markdown":"@VGR how is that different to using composition? In that case I would have to change all wrapper classes that act as the subtype as well. (name of base class field or method names)","body":"@VGR how is that different to using composition? In that case I would have to change all wrapper classes that act as the subtype as well. (name of base class field or method names)"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1698001803,"post_id":77340743,"comment_id":136347002,"body_markdown":"Probably.  But not code all over the place in the application.  The “damage” is pretty localized.","body":"Probably.  But not code all over the place in the application.  The “damage” is pretty localized."}],"answers":[{"comments":[{"owner":{"account_id":4617439,"reputation":488,"user_id":3743424,"accept_rate":9,"display_name":"cobby"},"score":0,"creation_date":1698047971,"post_id":77342368,"comment_id":136350894,"body_markdown":"Can you exemplify your argument on an inheritance example thatis actually turned into a composition example? In yours the composition example has nothing to do with the inheritance example. How can I do ArrayList&lt;Dog&gt; x = new Kennel() in the composition example?","body":"Can you exemplify your argument on an inheritance example thatis actually turned into a composition example? In yours the composition example has nothing to do with the inheritance example. How can I do ArrayList&lt;Dog&gt; x = new Kennel() in the composition example?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1698068184,"post_id":77342368,"comment_id":136354609,"body_markdown":"@cobby you&#39;re mistaken - my 2 snippets _are_ what you&#39;re asking for: An inheritance example (`class Kennel extends ArrayList&lt;Dog&gt;`) turned into its equivalent composition example (`class Kennel { private final ArrayList&lt;Dog&gt; = new ArrayList&lt;Dog&gt;(); /* wrapper methods here */ }`). _How can I do ArrayList&lt;Dog&gt; x = new Kennel() in the composition example?_ - __you can&#39;t__. That&#39;s what composition means.","body":"@cobby you&#39;re mistaken - my 2 snippets <i>are</i> what you&#39;re asking for: An inheritance example (<code>class Kennel extends ArrayList&lt;Dog&gt;</code>) turned into its equivalent composition example (<code>class Kennel { private final ArrayList&lt;Dog&gt; = new ArrayList&lt;Dog&gt;(); &#47;* wrapper methods here *&#47; }</code>). <i>How can I do ArrayList&lt;Dog&gt; x = new Kennel() in the composition example?</i> - <b>you can&#39;t</b>. That&#39;s what composition means."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698028365,"creation_date":1698028365,"answer_id":77342368,"question_id":77340743,"body_markdown":"&gt; I don&#39;t expose any implementation details to the subclass, right?\r\n\r\nYou are. The fact that your `Dog` class extends `Animal` is _itself_ exposing an implementation detail.\r\n\r\nImagine the following 2 very similar takes on the same idea: A class representing a dog kennel.\r\n\r\n## Take 1 - composition\r\n\r\n```\r\nclass Kennel implements Iterable&lt;Dog&gt; {\r\n  private final List&lt;Dog&gt; dogs = new ArrayList&lt;Dog&gt;();\r\n\r\n  public int size() { return dogs.size(); }\r\n  public void addDog(Dog dog) { dogs.add(dog); }\r\n  @Override public Iterator&lt;Dog&gt; iterator() { return dogs.iterator(); }\r\n}\r\n```\r\n\r\n## Take 2 - inheritance\r\n\r\n```\r\nclass Kennel extends ArrayList&lt;Dog&gt; {}\r\n```\r\n\r\nYes, one advantage of take 2 is that it&#39;s way less code. But, take 2 relinquishes a lot of control over your API to the authors of ArrayList, and limits any future changes.\r\n\r\nFor example:\r\n\r\n* In take 2, if you later decide to switch to an `ArrayDeque` instead, you cannot actually do that. Some code out there might have written `ArrayList&lt;Dog&gt; x = new Kennel();` and when you make that change, that code would now no longer compile. When you change your API such that it is possible for code to exist that used to work but now no longer compiles / work, that&#39;s called a __backwards incompatible change__ and you can&#39;t release that without upping the major version number, not something you&#39;d want to do likely. In contrast, in take 1, you can just do that. No users of your code would ever know about it.\r\n\r\n* In take 2, you get all the methods ArrayList exposes &#39;for free&#39; and it is indeed vastly less typing. However, you get __all of them__ and you do not get to pick and choose. For example, your Kennel class will now also have the `ensureCapacity` method. Even if you ask users of Kennel to disregard the inheritance chain, that method just doesn&#39;t make sense except for a very limited set of lists. You&#39;ve now tightly bound your Kennel class to work like that. For example, if you replace it with LinkedList instead, where `ensureCapacity` fundamentally does not make any sense, you&#39;re more or less force to do this:\r\n\r\n```\r\nclass Kennel extends LinkedList&lt;Dog&gt; { // used to be ArrayList\r\n  public void ensureCapacity(int cap) {\r\n    // do nothing - linkedlists don&#39;t work like that\r\n  }\r\n}\r\n```\r\n\r\nThis is, other than changing the inheritance, &#39;not breaking anything&#39; - anything that already existed that called `ensureCapacity` (which was a `public` method on your `Kennel` class, after all) continues to work, more or less. But having to add and maintain this do-nothing method that remains for historic reasons is just bizarre.\r\n\r\nIn contrast, take 1 doesn&#39;t suffer from this problem either.\r\n\r\n## So what&#39;s the lesson?\r\n\r\nYou may be drawing the conclusion from the above that inheritance is always wrong.\r\n\r\nNot so.\r\n\r\nThe actual lesson is: Inheritance __must make semantic sense__. Remember, if you write `class Foo extends Bar` you&#39;re saying: All instances of Foo are also instances of Bar. Just, more specific takes on the idea.\r\n\r\nSaying `all Kennels are also ArrayList&lt;Dog&gt; objects` is pushing it. That&#39;s not an obvious true thing.\r\n\r\nContrast `class Dog extends Animal`. That&#39;s saying: All dogs are also animals; just more specific takes on the idea. Which is trivially true, and is a sensible thing to write.\r\n\r\nMoving away from the tired old chestnut of dogs and animals, `class ArrayList extends AbstractList` is effectively the same thing: Yes, all arraylists are abstractlists. Yes, it&#39;s okay that this is now hardcoded into the spec of ArrayList for life. It&#39;d be weird if ever it wasn&#39;t.\r\n\r\nThat&#39;s perhaps the easiest way to do it: Can you imagine `Kennel` to exist sensibly as __not__ being a subclass of `ArrayList&lt;Dog&gt;`? If you can, that very strongly suggests it shouldn&#39;t ever be. I cannot imagine `Dog` to exist sensibly as __not__ being a subtype of `Animal`. That just doesn&#39;t make sense. Dogs __are__ animals. That&#39;s inherent to the thing you are modeling. It&#39;s not an implementation detail - it&#39;s a detail of the very concept that this code is merely a software representation for.\r\n\r\nTo determine if something makes semantic sense, getting into implementation anything is always wrong. It doesn&#39;t matter if the thousand-kilometer-overview design of a Kennel so happens to look rather suspiciously similar to `List&lt;Dog&gt;`. All that matters is if the semantic notion of &#39;the concept &quot;Kennel&quot; inherently screams &#39;that is a more specific take on the concept &quot;List&lt;Dog&gt;&quot;&#39;. It just is not. Hence `class Kennel extends ArrayList&lt;Dog&gt;`, while perhaps initially convenient, has no business being in a properly written API.\r\n","title":"How does inheritance lead to higher coupling than composition?","body":"<blockquote>\n<p>I don't expose any implementation details to the subclass, right?</p>\n</blockquote>\n<p>You are. The fact that your <code>Dog</code> class extends <code>Animal</code> is <em>itself</em> exposing an implementation detail.</p>\n<p>Imagine the following 2 very similar takes on the same idea: A class representing a dog kennel.</p>\n<h2>Take 1 - composition</h2>\n<pre><code>class Kennel implements Iterable&lt;Dog&gt; {\n  private final List&lt;Dog&gt; dogs = new ArrayList&lt;Dog&gt;();\n\n  public int size() { return dogs.size(); }\n  public void addDog(Dog dog) { dogs.add(dog); }\n  @Override public Iterator&lt;Dog&gt; iterator() { return dogs.iterator(); }\n}\n</code></pre>\n<h2>Take 2 - inheritance</h2>\n<pre><code>class Kennel extends ArrayList&lt;Dog&gt; {}\n</code></pre>\n<p>Yes, one advantage of take 2 is that it's way less code. But, take 2 relinquishes a lot of control over your API to the authors of ArrayList, and limits any future changes.</p>\n<p>For example:</p>\n<ul>\n<li><p>In take 2, if you later decide to switch to an <code>ArrayDeque</code> instead, you cannot actually do that. Some code out there might have written <code>ArrayList&lt;Dog&gt; x = new Kennel();</code> and when you make that change, that code would now no longer compile. When you change your API such that it is possible for code to exist that used to work but now no longer compiles / work, that's called a <strong>backwards incompatible change</strong> and you can't release that without upping the major version number, not something you'd want to do likely. In contrast, in take 1, you can just do that. No users of your code would ever know about it.</p>\n</li>\n<li><p>In take 2, you get all the methods ArrayList exposes 'for free' and it is indeed vastly less typing. However, you get <strong>all of them</strong> and you do not get to pick and choose. For example, your Kennel class will now also have the <code>ensureCapacity</code> method. Even if you ask users of Kennel to disregard the inheritance chain, that method just doesn't make sense except for a very limited set of lists. You've now tightly bound your Kennel class to work like that. For example, if you replace it with LinkedList instead, where <code>ensureCapacity</code> fundamentally does not make any sense, you're more or less force to do this:</p>\n</li>\n</ul>\n<pre><code>class Kennel extends LinkedList&lt;Dog&gt; { // used to be ArrayList\n  public void ensureCapacity(int cap) {\n    // do nothing - linkedlists don't work like that\n  }\n}\n</code></pre>\n<p>This is, other than changing the inheritance, 'not breaking anything' - anything that already existed that called <code>ensureCapacity</code> (which was a <code>public</code> method on your <code>Kennel</code> class, after all) continues to work, more or less. But having to add and maintain this do-nothing method that remains for historic reasons is just bizarre.</p>\n<p>In contrast, take 1 doesn't suffer from this problem either.</p>\n<h2>So what's the lesson?</h2>\n<p>You may be drawing the conclusion from the above that inheritance is always wrong.</p>\n<p>Not so.</p>\n<p>The actual lesson is: Inheritance <strong>must make semantic sense</strong>. Remember, if you write <code>class Foo extends Bar</code> you're saying: All instances of Foo are also instances of Bar. Just, more specific takes on the idea.</p>\n<p>Saying <code>all Kennels are also ArrayList&lt;Dog&gt; objects</code> is pushing it. That's not an obvious true thing.</p>\n<p>Contrast <code>class Dog extends Animal</code>. That's saying: All dogs are also animals; just more specific takes on the idea. Which is trivially true, and is a sensible thing to write.</p>\n<p>Moving away from the tired old chestnut of dogs and animals, <code>class ArrayList extends AbstractList</code> is effectively the same thing: Yes, all arraylists are abstractlists. Yes, it's okay that this is now hardcoded into the spec of ArrayList for life. It'd be weird if ever it wasn't.</p>\n<p>That's perhaps the easiest way to do it: Can you imagine <code>Kennel</code> to exist sensibly as <strong>not</strong> being a subclass of <code>ArrayList&lt;Dog&gt;</code>? If you can, that very strongly suggests it shouldn't ever be. I cannot imagine <code>Dog</code> to exist sensibly as <strong>not</strong> being a subtype of <code>Animal</code>. That just doesn't make sense. Dogs <strong>are</strong> animals. That's inherent to the thing you are modeling. It's not an implementation detail - it's a detail of the very concept that this code is merely a software representation for.</p>\n<p>To determine if something makes semantic sense, getting into implementation anything is always wrong. It doesn't matter if the thousand-kilometer-overview design of a Kennel so happens to look rather suspiciously similar to <code>List&lt;Dog&gt;</code>. All that matters is if the semantic notion of 'the concept &quot;Kennel&quot; inherently screams 'that is a more specific take on the concept &quot;List&quot;'. It just is not. Hence <code>class Kennel extends ArrayList&lt;Dog&gt;</code>, while perhaps initially convenient, has no business being in a properly written API.</p>\n"}],"owner":{"account_id":4617439,"reputation":488,"user_id":3743424,"accept_rate":9,"display_name":"cobby"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1698028365,"creation_date":1697991050,"question_id":77340743,"body_markdown":"One major reason for using composition over inheritance is, that inheritance leads to higher coupling. How is that?\r\nAs long as I set my base class fields and methods to `private` I don&#39;t expose any implementation details to the subclass, right? So changes to to the base class won&#39;t affect my subclasses? With regards to public members I don&#39;t see any difference to composition. In both cases those are exposed to the subclass (in case of inheritance) or wrapper class (in the case of composition).\r\n\r\nCan anyone show me an example, where inheritance leads to higher coupling than composition when the members are set to private/public?","title":"How does inheritance lead to higher coupling than composition?","body":"<p>One major reason for using composition over inheritance is, that inheritance leads to higher coupling. How is that?\nAs long as I set my base class fields and methods to <code>private</code> I don't expose any implementation details to the subclass, right? So changes to to the base class won't affect my subclasses? With regards to public members I don't see any difference to composition. In both cases those are exposed to the subclass (in case of inheritance) or wrapper class (in the case of composition).</p>\n<p>Can anyone show me an example, where inheritance leads to higher coupling than composition when the members are set to private/public?</p>\n"},{"tags":["java","android","datetime","android-recyclerview","android-button"],"answers":[{"comments":[{"owner":{"account_id":29728588,"reputation":3,"user_id":22783858,"display_name":"Zach T"},"score":0,"creation_date":1698028767,"post_id":77342111,"comment_id":136349005,"body_markdown":"thank you for replying, I have begun tackling what you have suggested.  I believe I will try to implement a switch case with the TimeEntryAdapter and &#39;day&#39;TimeEntries for clockIn and clockOut times.  again, thanks for pointing me in the right direction, I hope to mark this as resolved soon.","body":"thank you for replying, I have begun tackling what you have suggested.  I believe I will try to implement a switch case with the TimeEntryAdapter and &#39;day&#39;TimeEntries for clockIn and clockOut times.  again, thanks for pointing me in the right direction, I hope to mark this as resolved soon."}],"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698019895,"creation_date":1698019895,"answer_id":77342111,"question_id":77340377,"body_markdown":"You never update the internal array list within the adapters -&gt; `private List&lt;TimeEntry&gt; timeEntries;`\r\n\r\nAdd function like this to the adapter.\r\n\r\n    public void addEntry(TimeEntry entry) {\r\n        timeEntries.add(entry);\r\n        //This is a bad solution, but for your code structure and experience it will do.\r\n        notifyDataSetChanged(); \r\n    }\r\n\r\n\r\n\r\nThat array list is what the recycler is showing if you never add to it, it never changes. \r\n\r\nWith that you have another problem if you are separating the views by day of the week, you need an adapter per recycler you can&#39;t reuse the same one, because it contains the list of what it is showing. If what it needs to show is different per recyclerView they can&#39;t be the same adapter.\r\n\r\ni.e. You can&#39;t do this\r\n\r\n            for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\r\n                clockedInRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\r\n                clockedInRecyclerViews[i].setAdapter(clockedInAdapter); //&lt;-- Bad\r\n            }\r\n\r\n\r\n","title":"How do I get the current time to populate in the RecyclerView when I press the clockInOut button?","body":"<p>You never update the internal array list within the adapters -&gt; <code>private List&lt;TimeEntry&gt; timeEntries;</code></p>\n<p>Add function like this to the adapter.</p>\n<pre><code>public void addEntry(TimeEntry entry) {\n    timeEntries.add(entry);\n    //This is a bad solution, but for your code structure and experience it will do.\n    notifyDataSetChanged(); \n}\n</code></pre>\n<p>That array list is what the recycler is showing if you never add to it, it never changes.</p>\n<p>With that you have another problem if you are separating the views by day of the week, you need an adapter per recycler you can't reuse the same one, because it contains the list of what it is showing. If what it needs to show is different per recyclerView they can't be the same adapter.</p>\n<p>i.e. You can't do this</p>\n<pre><code>        for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\n            clockedInRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\n            clockedInRecyclerViews[i].setAdapter(clockedInAdapter); //&lt;-- Bad\n        }\n</code></pre>\n"}],"owner":{"account_id":29728588,"reputation":3,"user_id":22783858,"display_name":"Zach T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77342111,"answer_count":1,"score":0,"last_activity_date":1698028270,"creation_date":1697985254,"question_id":77340377,"body_markdown":"Ive been teaching myself how to code for the last 2 months and decided I would attempt to make a time keeping app.  Ive checked everywhere in this code, I ran Logs, I even asked chatGPT, and for the life of me I cannot figure out why these times will not populate the RecyclerViews.\r\n\r\nI do not have enough space to paste the .xml file but can put it somewhere else if necessary or I can see if I can get away with just the relevant parts.\r\n\r\nHere are the relevant files:\r\n\r\nTimeClockActivity.java\r\n\r\n```\r\npublic class TimeClockActivity extends AppCompatActivity {\r\n\r\n    //declare Home Page Activity member variables (7txt_views, 3btn, 2edit_txt)\r\n\r\n    private Button toTimeEntryItemButton;\r\n    private Button backHomeButton;\r\n    private TextView timeClockTitleTextView;\r\n    private TextView hoursWorkedTodayTextView;\r\n    private TextView totalHoursWorkedTodayTextView;\r\n    private TextView hoursWorkedThisWeekTextView;\r\n    private TextView totalHoursWorkedWeekTextView;\r\n    private TextView projectedPayTextView;\r\n    private TextView totalProjectedPayTextView;\r\n    private TextView dateTimeDisplay;\r\n    private Calendar calendar;\r\n    private SimpleDateFormat dateFormat;\r\n    private SimpleDateFormat timeFormat;\r\n    private String date;\r\n    private Button clockInButton;\r\n    private Button clockInAtButton;\r\n    private TextView[] clockedInTextViews;\r\n    private TextView[] clockedOutTextViews;\r\n    private Switch[] lunchSwitches;\r\n    private boolean isClockIn = false;\r\n    private Map&lt;String, TimeEntry&gt; dayToTimeEntry = new HashMap&lt;&gt;();\r\n    private RecyclerView[] recyclerViews;\r\n    //    private TimeEntryAdapter[] adapters;\r\n    private TimeEntryAdapter clockedInAdapter;\r\n    private TimeEntryAdapter clockedOutAdapter;\r\n\r\n    List&lt;TimeEntry&gt; mondayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; tuesdayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; wednesdayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; thursdayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; fridayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; saturdayTimeEntries = new ArrayList&lt;&gt;();\r\n    List&lt;TimeEntry&gt; sundayTimeEntries = new ArrayList&lt;&gt;();\r\n\r\n\r\n\r\n\r\n    //    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_time_clock);\r\n\r\n\r\n        initializeViews();\r\n        initializeDateAndTime();\r\n        initializeRecyclerViews();\r\n        setClickListeners();\r\n\r\n        // Initialize adapters for each day of the week\r\n        TimeEntryAdapter mondayAdapter = new TimeEntryAdapter(mondayTimeEntries, &quot;Monday&quot;);\r\n        TimeEntryAdapter tuesdayAdapter = new TimeEntryAdapter(tuesdayTimeEntries, &quot;Tuesday&quot;);\r\n        TimeEntryAdapter wednesdayAdapter = new TimeEntryAdapter(wednesdayTimeEntries, &quot;Wednesday&quot;);\r\n        TimeEntryAdapter thursdayAdapter = new TimeEntryAdapter(thursdayTimeEntries, &quot;Thursday&quot;);\r\n        TimeEntryAdapter fridayAdapter = new TimeEntryAdapter(fridayTimeEntries, &quot;Friday&quot;);\r\n        TimeEntryAdapter saturdayAdapter = new TimeEntryAdapter(saturdayTimeEntries, &quot;Saturday&quot;);\r\n        TimeEntryAdapter sundayAdapter = new TimeEntryAdapter(sundayTimeEntries, &quot;Sunday&quot;);\r\n\r\n        // Set the adapters on their respective RecyclerViews\r\n        RecyclerView recyclerMondayClockedIn = findViewById(R.id.recycler_monday_clocked_in);\r\n        RecyclerView recyclerTuesdayClockedIn = findViewById(R.id.recycler_tuesday_clocked_in);\r\n        RecyclerView recyclerWednesdayClockedIn = findViewById(R.id.recycler_wednesday_clocked_in);\r\n        RecyclerView recyclerThursdayClockedIn = findViewById(R.id.recycler_thursday_clocked_in);\r\n        RecyclerView recyclerFridayClockedIn = findViewById(R.id.recycler_friday_clocked_in);\r\n        RecyclerView recyclerSaturdayClockedIn = findViewById(R.id.recycler_saturday_clocked_in);\r\n        RecyclerView recyclerSundayClockedIn = findViewById(R.id.recycler_sunday_clocked_in);\r\n\r\n        recyclerMondayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerTuesdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerWednesdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerThursdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerFridayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerSaturdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerSundayClockedIn.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        recyclerMondayClockedIn.setAdapter(mondayAdapter);\r\n        recyclerTuesdayClockedIn.setAdapter(tuesdayAdapter);\r\n        recyclerWednesdayClockedIn.setAdapter(wednesdayAdapter);\r\n        recyclerThursdayClockedIn.setAdapter(thursdayAdapter);\r\n        recyclerFridayClockedIn.setAdapter(fridayAdapter);\r\n        recyclerSaturdayClockedIn.setAdapter(saturdayAdapter);\r\n        recyclerSundayClockedIn.setAdapter(sundayAdapter);\r\n\r\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Sunday Time Entries count: &quot; + sundayTimeEntries.size());\r\n    }\r\n\r\n\r\n\r\n    // apply basic page instances\r\n    private void initializeViews() {\r\n\r\n        toTimeEntryItemButton = findViewById(R.id.btn_to_time_entry_item);\r\n        backHomeButton = findViewById(R.id.btn_to_home);\r\n        hoursWorkedTodayTextView = findViewById(R.id.tv_hours_worked_today_text);\r\n        totalHoursWorkedTodayTextView = findViewById(R.id.tv_hours_worked_today);\r\n        hoursWorkedThisWeekTextView = findViewById(R.id.tv_hours_worked_this_week_text);\r\n        totalHoursWorkedWeekTextView = findViewById(R.id.tv_hours_worked_this_week);\r\n        projectedPayTextView = findViewById(R.id.tv_projected_paycheck_text);\r\n        totalProjectedPayTextView = findViewById(R.id.tv_projected_paycheck);\r\n        dateTimeDisplay = findViewById(R.id.tv_date_and_time);\r\n        clockInButton = findViewById(R.id.btn_clock_in);\r\n        clockInAtButton = findViewById(R.id.btn_clock_in_at);\r\n        timeClockTitleTextView = findViewById(R.id.tv_time_clock_title);\r\n        lunchSwitches = new Switch[]{\r\n                findViewById(R.id.switch_monday_lunch),\r\n                findViewById(R.id.switch_tuesday_lunch),\r\n                findViewById(R.id.switch_wednesday_lunch),\r\n                findViewById(R.id.switch_thursday_lunch),\r\n                findViewById(R.id.switch_friday_lunch),\r\n                findViewById(R.id.switch_saturday_lunch),\r\n                findViewById(R.id.switch_sunday_lunch)\r\n        };\r\n    }\r\n\r\n    private void initializeDateAndTime() {\r\n        //apply the instances created for calendar and time\r\n        calendar = Calendar.getInstance();\r\n        dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm aa&quot;);\r\n        timeFormat = new SimpleDateFormat(&quot;HH:mm - E&quot;);\r\n        updateDateTimeDisplay();\r\n    }\r\n    private void updateDateTimeDisplay() {\r\n//        date = dateFormat.format(calendar.getTime());\r\n        String date = timeFormat.format(new Date());\r\n        dateTimeDisplay.setText(date);\r\n    }\r\n    private void initializeRecyclerViews() {\r\n        RecyclerView[] clockedInRecyclerViews = new RecyclerView[]{\r\n                findViewById(R.id.recycler_monday_clocked_in),\r\n                findViewById(R.id.recycler_tuesday_clocked_in),\r\n                findViewById(R.id.recycler_wednesday_clocked_in),\r\n                findViewById(R.id.recycler_thursday_clocked_in),\r\n                findViewById(R.id.recycler_friday_clocked_in),\r\n                findViewById(R.id.recycler_saturday_clocked_in),\r\n                findViewById(R.id.recycler_sunday_clocked_in)\r\n        };\r\n\r\n        LinearLayoutManager[] layoutManagerArrayClockedIn = new LinearLayoutManager[]{\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this)\r\n        };\r\n\r\n        for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\r\n            clockedInRecyclerViews[i].setLayoutManager(layoutManagerArrayClockedIn[i]);\r\n        }\r\n\r\n        RecyclerView[] clockedOutRecyclerViews = new RecyclerView[]{\r\n                findViewById(R.id.recycler_monday_clocked_out),\r\n                findViewById(R.id.recycler_tuesday_clocked_out),\r\n                findViewById(R.id.recycler_wednesday_clocked_out),\r\n                findViewById(R.id.recycler_thursday_clocked_out),\r\n                findViewById(R.id.recycler_friday_clocked_out),\r\n                findViewById(R.id.recycler_saturday_clocked_out),\r\n                findViewById(R.id.recycler_sunday_clocked_out)\r\n        };\r\n\r\n        LinearLayoutManager[] layoutManagerArrayClockedOut = new LinearLayoutManager[]{\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this),\r\n                new LinearLayoutManager(this)\r\n        };\r\n\r\n        for (int i = 0; i &lt; clockedOutRecyclerViews.length; i++) {\r\n            clockedOutRecyclerViews[i].setLayoutManager(layoutManagerArrayClockedOut[i]);\r\n        }\r\n\r\n        clockedInAdapter = new TimeEntryAdapter(new ArrayList&lt;&gt;(), &quot;clockedIn&quot;);\r\n        clockedOutAdapter = new TimeEntryAdapter(new ArrayList&lt;&gt;(), &quot;clockedOut&quot;);\r\n\r\n        for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\r\n            clockedInRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\r\n            clockedInRecyclerViews[i].setAdapter(clockedInAdapter);\r\n        }\r\n\r\n        for (int i = 0; i &lt; clockedOutRecyclerViews.length; i++) {\r\n            clockedOutRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\r\n            clockedOutRecyclerViews[i].setAdapter(clockedOutAdapter);\r\n        }\r\n    }\r\n\r\n    private void setClickListeners() {\r\n\r\n//      set button click ability for the &#39;back home&#39; button\r\n        backHomeButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onBackHomeClick(v);\r\n            }\r\n        });\r\n//      set button click ability for the &#39;clock in&#39; button\r\n        clockInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onClockInButtonClick(v);\r\n            }\r\n        });\r\n//        set button click ability for the &#39;to time entry item&#39; button\r\n        toTimeEntryItemButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onToTimeEntryItemButtonClick(v);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void onToTimeEntryItemButtonClick(View view) {\r\n        Intent intent = new Intent(this, TimeEntry.class);\r\n        startActivity(intent);\r\n    }\r\n\r\n\r\n    //  give the &#39;back home&#39; button some functionality\r\n    private void onBackHomeClick(View v) {\r\n        Intent intent = new Intent(this, HomePageActivity.class);\r\n        startActivity(intent);\r\n    }\r\n\r\n    // give the clock in button some functionality\r\n    public void onClockInButtonClick(View view) {\r\n        // Determine the current day\r\n\r\n        int dayOfTheWeek = calendar.get(Calendar.DAY_OF_WEEK);\r\n        String day = getDayName(dayOfTheWeek);\r\n\r\n        Log.d(&quot;Time ClockActivity&quot;, &quot;Clicked on day: &quot; + day);\r\n\r\n        // Get or create a TimeEntry for the current day\r\n        TimeEntry timeEntry = dayToTimeEntry.get(day);\r\n        if (timeEntry == null) {\r\n            timeEntry = new TimeEntry(day);\r\n            dayToTimeEntry.put(day, timeEntry);\r\n            Log.d(&quot;TimeClockActivity&quot;, &quot;Created new TimeEntry for day: &quot; + day);\r\n        }\r\n\r\n        // Add clock-in or clock-out time\r\n        String currentTime = timeFormat.format(new Date());\r\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Current time: &quot; + currentTime);\r\n        if (isClockIn) {\r\n            timeEntry.addClockInTime(currentTime);\r\n        } else {\r\n            timeEntry.addClockOutTime(currentTime);\r\n        }\r\n        \r\n        clockedInAdapter.setTimeEntries(getClockedInTimeEntries());\r\n        clockedOutAdapter.setTimeEntries(getClockedOutTimeEntries());\r\n        clockedInAdapter.notifyDataSetChanged();\r\n        clockedOutAdapter.notifyDataSetChanged();\r\n        // After updating the data\r\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Clocked in time entries: &quot; + getClockedInTimeEntries().size());\r\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Clocked out time entries: &quot; + getClockedOutTimeEntries().size());\r\n\r\n\r\n        toggleClockInOutButtonText();\r\n        isClockIn = !isClockIn;\r\n    }\r\n\r\n    private List&lt;TimeEntry&gt; getClockedInTimeEntries() {\r\n        List&lt;TimeEntry&gt; clockedInTimeEntries = new ArrayList&lt;&gt;();\r\n        for (TimeEntry timeEntry : dayToTimeEntry.values()) {\r\n            if (timeEntry.hasClockInTime() &amp;&amp; !timeEntry.hasClockOutTime()) {\r\n                clockedInTimeEntries.add(timeEntry);\r\n            }\r\n        }\r\n        return clockedInTimeEntries;\r\n    }\r\n\r\n    private List&lt;TimeEntry&gt; getClockedOutTimeEntries() {\r\n        List&lt;TimeEntry&gt; clockedOutTimeEntries = new ArrayList&lt;&gt;();\r\n        for (TimeEntry timeEntry : dayToTimeEntry.values()) {\r\n            if (timeEntry.hasClockOutTime()) {\r\n                clockedOutTimeEntries.add(timeEntry);\r\n            }\r\n        }\r\n        return clockedOutTimeEntries;\r\n    }\r\n\r\n    private void toggleClockInOutButtonText() {\r\n        if (isClockIn) {\r\n            clockInButton.setText(&quot;Clock In&quot;);\r\n\r\n        } else {\r\n            clockInButton.setText(&quot;Clock Out&quot;);\r\n\r\n        }\r\n    }\r\n\r\n    private String getDayName(int dayOfTheWeek) {\r\n        String day;\r\n        switch (dayOfTheWeek) {\r\n            case Calendar.SUNDAY:\r\n                day = &quot;Sunday&quot;;\r\n                break;\r\n            case Calendar.MONDAY:\r\n                day = &quot;Monday&quot;;\r\n                break;\r\n            case Calendar.TUESDAY:\r\n                day = &quot;Tuesday&quot;;\r\n                break;\r\n            case Calendar.WEDNESDAY:\r\n                day = &quot;Wednesday&quot;;\r\n                break;\r\n            case Calendar.THURSDAY:\r\n                day = &quot;Thursday&quot;;\r\n                break;\r\n            case Calendar.FRIDAY:\r\n                day = &quot;Friday&quot;;\r\n                break;\r\n            case Calendar.SATURDAY:\r\n                day = &quot;Saturday&quot;;\r\n                break;\r\n            default:\r\n                day = &quot;Unknown&quot;;\r\n                break;\r\n        }\r\n        return day;\r\n    }\r\n```\r\n\r\n\r\n\r\nTimeEntry.java\r\n\r\n\r\n```\r\npublic TimeEntry() {\r\n\r\n    }\r\n    public TimeEntry(String day) {\r\n        this.day = day;\r\n        this.clockInTime = null;\r\n        this.clockOutTime = null;\r\n        this.clockInTimes = new ArrayList&lt;&gt;();\r\n        this.clockOutTimes = new ArrayList&lt;&gt;();\r\n        setDayOfWeek();\r\n    }\r\n\r\n    public void setDayOfWeek() {\r\n        SimpleDateFormat inputFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\r\n        SimpleDateFormat outputFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\r\n        try {\r\n            Date date = inputFormat.parse(day);\r\n            dayOfWeek = outputFormat.format(date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    public String getClockInTime() {\r\n        return clockInTime;\r\n    }\r\n\r\n    public void setClockInTime(String clockInTime) {\r\n        this.clockInTime = clockInTime;\r\n    }\r\n\r\n    public String getClockOutTime() {\r\n        return clockOutTime;\r\n    }\r\n\r\n    public void setClockOutTime(String clockOutTime) {\r\n        this.clockOutTime = clockOutTime;\r\n    }\r\n\r\n    public boolean hasClockInTime() {\r\n        return clockInTime != null;\r\n    }\r\n\r\n    public boolean hasClockOutTime() {\r\n        return clockOutTime != null;\r\n    }\r\n\r\n    public List&lt;String&gt; getClockInTimes() {\r\n        return clockInTimes;\r\n    }\r\n\r\n    public List&lt;String&gt; getClockOutTimes() {\r\n        return clockOutTimes;\r\n    }\r\n\r\n    public String getDayOfWeek() {\r\n        return dayOfWeek;\r\n    }\r\n\r\n    public void addClockInTime(String clockInTime) {\r\n        Log.d(&quot;TimeEntry&quot;, &quot;Added clock-in time: &quot; + clockInTime);\r\n        clockInTimes.add(clockInTime);\r\n    }\r\n\r\n    public void addClockOutTime(String clockOutTime) {\r\n        Log.d(&quot;TimeEntry&quot;, &quot;Added clock-out time: &quot; + clockOutTime);\r\n        clockOutTimes.add(clockOutTime);\r\n    }\r\n\r\n    public void setDayOfWeek(String dayOfWeek) {\r\n        this.dayOfWeek = dayOfWeek;\r\n    }\r\n}\r\n```\r\n\r\nTimeEntryAdapter.java\r\n\r\n\r\n```\r\npublic class TimeEntryAdapter extends RecyclerView.Adapter&lt;TimeEntryAdapter.TimeEntryViewHolder&gt; {\r\n    private List&lt;TimeEntry&gt; timeEntries;\r\n    private String entryType;\r\n\r\n    // Constructor for the adapter\r\n    public TimeEntryAdapter(List&lt;TimeEntry&gt; timeEntries, String entryType) {\r\n        this.timeEntries = timeEntries;\r\n        this.entryType = entryType;\r\n    }\r\n    @NonNull\r\n    @Override\r\n    public TimeEntryViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.time_entry_item, parent, false);\r\n        return new TimeEntryViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull TimeEntryViewHolder holder, int position) {\r\n        TimeEntry timeEntry = timeEntries.get(position);\r\n\r\n        // Get references to the views within the item layout\r\n        TextView dayOfWeekTextView = holder.dayOfWeekTextView;\r\n        TextView clockedInTimeTextView = holder.clockedInTimeTextView;\r\n        TextView clockedOutTimeTextView = holder.clockedOutTimeTextView;\r\n\r\n        // Set data for the views based on the TimeEntry\r\n        dayOfWeekTextView.setText(timeEntry.getDayOfWeek()); // Set the day dynamically\r\n        clockedInTimeTextView.setText(&quot;Clock In: &quot; + timeEntry.getClockInTime()); // Set clock-in time dynamically\r\n        clockedOutTimeTextView.setText(&quot;Clock Out: &quot; + timeEntry.getClockOutTime()); // Set clock-out time dynamically\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return timeEntries.size();\r\n    }\r\n\r\n    public static class TimeEntryViewHolder extends RecyclerView.ViewHolder {\r\n        TextView dayOfWeekTextView;\r\n        TextView clockedInTimeTextView;\r\n        TextView clockedOutTimeTextView;\r\n\r\n        public TimeEntryViewHolder(View itemView) {\r\n            super(itemView);\r\n            dayOfWeekTextView = itemView.findViewById(R.id.dayOfWeekTextView);\r\n            clockedInTimeTextView = itemView.findViewById(R.id.clockedInTimeTextView);\r\n            clockedOutTimeTextView = itemView.findViewById(R.id.clockedOutTimeTextView);\r\n        }\r\n    }\r\n    public void setTimeEntries(List&lt;TimeEntry&gt; timeEntries) {\r\n        this.timeEntries = timeEntries;\r\n        notifyDataSetChanged();\r\n    }\r\n    public void addEntry(TimeEntry entry) {\r\n        timeEntries.add(entry);\r\n        notifyDataSetChanged();\r\n    }\r\n```\r\n\r\n\r\n\r\nI simply want to press the Clock In / Clock Out button and have it populate the correct Recyler View for the correct day and whether or not it is a clock in time or a clock out time.  I had it working just fine for TextViews, then decided &quot;well what if someone clocks in and out twice in the same day&quot;. And now I am talking crap to my computer.  Thanks in advance, let me know if more information is needed.","title":"How do I get the current time to populate in the RecyclerView when I press the clockInOut button?","body":"<p>Ive been teaching myself how to code for the last 2 months and decided I would attempt to make a time keeping app.  Ive checked everywhere in this code, I ran Logs, I even asked chatGPT, and for the life of me I cannot figure out why these times will not populate the RecyclerViews.</p>\n<p>I do not have enough space to paste the .xml file but can put it somewhere else if necessary or I can see if I can get away with just the relevant parts.</p>\n<p>Here are the relevant files:</p>\n<p>TimeClockActivity.java</p>\n<pre><code>public class TimeClockActivity extends AppCompatActivity {\n\n    //declare Home Page Activity member variables (7txt_views, 3btn, 2edit_txt)\n\n    private Button toTimeEntryItemButton;\n    private Button backHomeButton;\n    private TextView timeClockTitleTextView;\n    private TextView hoursWorkedTodayTextView;\n    private TextView totalHoursWorkedTodayTextView;\n    private TextView hoursWorkedThisWeekTextView;\n    private TextView totalHoursWorkedWeekTextView;\n    private TextView projectedPayTextView;\n    private TextView totalProjectedPayTextView;\n    private TextView dateTimeDisplay;\n    private Calendar calendar;\n    private SimpleDateFormat dateFormat;\n    private SimpleDateFormat timeFormat;\n    private String date;\n    private Button clockInButton;\n    private Button clockInAtButton;\n    private TextView[] clockedInTextViews;\n    private TextView[] clockedOutTextViews;\n    private Switch[] lunchSwitches;\n    private boolean isClockIn = false;\n    private Map&lt;String, TimeEntry&gt; dayToTimeEntry = new HashMap&lt;&gt;();\n    private RecyclerView[] recyclerViews;\n    //    private TimeEntryAdapter[] adapters;\n    private TimeEntryAdapter clockedInAdapter;\n    private TimeEntryAdapter clockedOutAdapter;\n\n    List&lt;TimeEntry&gt; mondayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; tuesdayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; wednesdayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; thursdayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; fridayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; saturdayTimeEntries = new ArrayList&lt;&gt;();\n    List&lt;TimeEntry&gt; sundayTimeEntries = new ArrayList&lt;&gt;();\n\n\n\n\n    //    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_time_clock);\n\n\n        initializeViews();\n        initializeDateAndTime();\n        initializeRecyclerViews();\n        setClickListeners();\n\n        // Initialize adapters for each day of the week\n        TimeEntryAdapter mondayAdapter = new TimeEntryAdapter(mondayTimeEntries, &quot;Monday&quot;);\n        TimeEntryAdapter tuesdayAdapter = new TimeEntryAdapter(tuesdayTimeEntries, &quot;Tuesday&quot;);\n        TimeEntryAdapter wednesdayAdapter = new TimeEntryAdapter(wednesdayTimeEntries, &quot;Wednesday&quot;);\n        TimeEntryAdapter thursdayAdapter = new TimeEntryAdapter(thursdayTimeEntries, &quot;Thursday&quot;);\n        TimeEntryAdapter fridayAdapter = new TimeEntryAdapter(fridayTimeEntries, &quot;Friday&quot;);\n        TimeEntryAdapter saturdayAdapter = new TimeEntryAdapter(saturdayTimeEntries, &quot;Saturday&quot;);\n        TimeEntryAdapter sundayAdapter = new TimeEntryAdapter(sundayTimeEntries, &quot;Sunday&quot;);\n\n        // Set the adapters on their respective RecyclerViews\n        RecyclerView recyclerMondayClockedIn = findViewById(R.id.recycler_monday_clocked_in);\n        RecyclerView recyclerTuesdayClockedIn = findViewById(R.id.recycler_tuesday_clocked_in);\n        RecyclerView recyclerWednesdayClockedIn = findViewById(R.id.recycler_wednesday_clocked_in);\n        RecyclerView recyclerThursdayClockedIn = findViewById(R.id.recycler_thursday_clocked_in);\n        RecyclerView recyclerFridayClockedIn = findViewById(R.id.recycler_friday_clocked_in);\n        RecyclerView recyclerSaturdayClockedIn = findViewById(R.id.recycler_saturday_clocked_in);\n        RecyclerView recyclerSundayClockedIn = findViewById(R.id.recycler_sunday_clocked_in);\n\n        recyclerMondayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerTuesdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerWednesdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerThursdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerFridayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerSaturdayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n        recyclerSundayClockedIn.setLayoutManager(new LinearLayoutManager(this));\n\n        recyclerMondayClockedIn.setAdapter(mondayAdapter);\n        recyclerTuesdayClockedIn.setAdapter(tuesdayAdapter);\n        recyclerWednesdayClockedIn.setAdapter(wednesdayAdapter);\n        recyclerThursdayClockedIn.setAdapter(thursdayAdapter);\n        recyclerFridayClockedIn.setAdapter(fridayAdapter);\n        recyclerSaturdayClockedIn.setAdapter(saturdayAdapter);\n        recyclerSundayClockedIn.setAdapter(sundayAdapter);\n\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Sunday Time Entries count: &quot; + sundayTimeEntries.size());\n    }\n\n\n\n    // apply basic page instances\n    private void initializeViews() {\n\n        toTimeEntryItemButton = findViewById(R.id.btn_to_time_entry_item);\n        backHomeButton = findViewById(R.id.btn_to_home);\n        hoursWorkedTodayTextView = findViewById(R.id.tv_hours_worked_today_text);\n        totalHoursWorkedTodayTextView = findViewById(R.id.tv_hours_worked_today);\n        hoursWorkedThisWeekTextView = findViewById(R.id.tv_hours_worked_this_week_text);\n        totalHoursWorkedWeekTextView = findViewById(R.id.tv_hours_worked_this_week);\n        projectedPayTextView = findViewById(R.id.tv_projected_paycheck_text);\n        totalProjectedPayTextView = findViewById(R.id.tv_projected_paycheck);\n        dateTimeDisplay = findViewById(R.id.tv_date_and_time);\n        clockInButton = findViewById(R.id.btn_clock_in);\n        clockInAtButton = findViewById(R.id.btn_clock_in_at);\n        timeClockTitleTextView = findViewById(R.id.tv_time_clock_title);\n        lunchSwitches = new Switch[]{\n                findViewById(R.id.switch_monday_lunch),\n                findViewById(R.id.switch_tuesday_lunch),\n                findViewById(R.id.switch_wednesday_lunch),\n                findViewById(R.id.switch_thursday_lunch),\n                findViewById(R.id.switch_friday_lunch),\n                findViewById(R.id.switch_saturday_lunch),\n                findViewById(R.id.switch_sunday_lunch)\n        };\n    }\n\n    private void initializeDateAndTime() {\n        //apply the instances created for calendar and time\n        calendar = Calendar.getInstance();\n        dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm aa&quot;);\n        timeFormat = new SimpleDateFormat(&quot;HH:mm - E&quot;);\n        updateDateTimeDisplay();\n    }\n    private void updateDateTimeDisplay() {\n//        date = dateFormat.format(calendar.getTime());\n        String date = timeFormat.format(new Date());\n        dateTimeDisplay.setText(date);\n    }\n    private void initializeRecyclerViews() {\n        RecyclerView[] clockedInRecyclerViews = new RecyclerView[]{\n                findViewById(R.id.recycler_monday_clocked_in),\n                findViewById(R.id.recycler_tuesday_clocked_in),\n                findViewById(R.id.recycler_wednesday_clocked_in),\n                findViewById(R.id.recycler_thursday_clocked_in),\n                findViewById(R.id.recycler_friday_clocked_in),\n                findViewById(R.id.recycler_saturday_clocked_in),\n                findViewById(R.id.recycler_sunday_clocked_in)\n        };\n\n        LinearLayoutManager[] layoutManagerArrayClockedIn = new LinearLayoutManager[]{\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this)\n        };\n\n        for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\n            clockedInRecyclerViews[i].setLayoutManager(layoutManagerArrayClockedIn[i]);\n        }\n\n        RecyclerView[] clockedOutRecyclerViews = new RecyclerView[]{\n                findViewById(R.id.recycler_monday_clocked_out),\n                findViewById(R.id.recycler_tuesday_clocked_out),\n                findViewById(R.id.recycler_wednesday_clocked_out),\n                findViewById(R.id.recycler_thursday_clocked_out),\n                findViewById(R.id.recycler_friday_clocked_out),\n                findViewById(R.id.recycler_saturday_clocked_out),\n                findViewById(R.id.recycler_sunday_clocked_out)\n        };\n\n        LinearLayoutManager[] layoutManagerArrayClockedOut = new LinearLayoutManager[]{\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this),\n                new LinearLayoutManager(this)\n        };\n\n        for (int i = 0; i &lt; clockedOutRecyclerViews.length; i++) {\n            clockedOutRecyclerViews[i].setLayoutManager(layoutManagerArrayClockedOut[i]);\n        }\n\n        clockedInAdapter = new TimeEntryAdapter(new ArrayList&lt;&gt;(), &quot;clockedIn&quot;);\n        clockedOutAdapter = new TimeEntryAdapter(new ArrayList&lt;&gt;(), &quot;clockedOut&quot;);\n\n        for (int i = 0; i &lt; clockedInRecyclerViews.length; i++) {\n            clockedInRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\n            clockedInRecyclerViews[i].setAdapter(clockedInAdapter);\n        }\n\n        for (int i = 0; i &lt; clockedOutRecyclerViews.length; i++) {\n            clockedOutRecyclerViews[i].setLayoutManager(new LinearLayoutManager(this));\n            clockedOutRecyclerViews[i].setAdapter(clockedOutAdapter);\n        }\n    }\n\n    private void setClickListeners() {\n\n//      set button click ability for the 'back home' button\n        backHomeButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                onBackHomeClick(v);\n            }\n        });\n//      set button click ability for the 'clock in' button\n        clockInButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                onClockInButtonClick(v);\n            }\n        });\n//        set button click ability for the 'to time entry item' button\n        toTimeEntryItemButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                onToTimeEntryItemButtonClick(v);\n            }\n        });\n\n    }\n\n    private void onToTimeEntryItemButtonClick(View view) {\n        Intent intent = new Intent(this, TimeEntry.class);\n        startActivity(intent);\n    }\n\n\n    //  give the 'back home' button some functionality\n    private void onBackHomeClick(View v) {\n        Intent intent = new Intent(this, HomePageActivity.class);\n        startActivity(intent);\n    }\n\n    // give the clock in button some functionality\n    public void onClockInButtonClick(View view) {\n        // Determine the current day\n\n        int dayOfTheWeek = calendar.get(Calendar.DAY_OF_WEEK);\n        String day = getDayName(dayOfTheWeek);\n\n        Log.d(&quot;Time ClockActivity&quot;, &quot;Clicked on day: &quot; + day);\n\n        // Get or create a TimeEntry for the current day\n        TimeEntry timeEntry = dayToTimeEntry.get(day);\n        if (timeEntry == null) {\n            timeEntry = new TimeEntry(day);\n            dayToTimeEntry.put(day, timeEntry);\n            Log.d(&quot;TimeClockActivity&quot;, &quot;Created new TimeEntry for day: &quot; + day);\n        }\n\n        // Add clock-in or clock-out time\n        String currentTime = timeFormat.format(new Date());\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Current time: &quot; + currentTime);\n        if (isClockIn) {\n            timeEntry.addClockInTime(currentTime);\n        } else {\n            timeEntry.addClockOutTime(currentTime);\n        }\n        \n        clockedInAdapter.setTimeEntries(getClockedInTimeEntries());\n        clockedOutAdapter.setTimeEntries(getClockedOutTimeEntries());\n        clockedInAdapter.notifyDataSetChanged();\n        clockedOutAdapter.notifyDataSetChanged();\n        // After updating the data\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Clocked in time entries: &quot; + getClockedInTimeEntries().size());\n        Log.d(&quot;TimeClockActivity&quot;, &quot;Clocked out time entries: &quot; + getClockedOutTimeEntries().size());\n\n\n        toggleClockInOutButtonText();\n        isClockIn = !isClockIn;\n    }\n\n    private List&lt;TimeEntry&gt; getClockedInTimeEntries() {\n        List&lt;TimeEntry&gt; clockedInTimeEntries = new ArrayList&lt;&gt;();\n        for (TimeEntry timeEntry : dayToTimeEntry.values()) {\n            if (timeEntry.hasClockInTime() &amp;&amp; !timeEntry.hasClockOutTime()) {\n                clockedInTimeEntries.add(timeEntry);\n            }\n        }\n        return clockedInTimeEntries;\n    }\n\n    private List&lt;TimeEntry&gt; getClockedOutTimeEntries() {\n        List&lt;TimeEntry&gt; clockedOutTimeEntries = new ArrayList&lt;&gt;();\n        for (TimeEntry timeEntry : dayToTimeEntry.values()) {\n            if (timeEntry.hasClockOutTime()) {\n                clockedOutTimeEntries.add(timeEntry);\n            }\n        }\n        return clockedOutTimeEntries;\n    }\n\n    private void toggleClockInOutButtonText() {\n        if (isClockIn) {\n            clockInButton.setText(&quot;Clock In&quot;);\n\n        } else {\n            clockInButton.setText(&quot;Clock Out&quot;);\n\n        }\n    }\n\n    private String getDayName(int dayOfTheWeek) {\n        String day;\n        switch (dayOfTheWeek) {\n            case Calendar.SUNDAY:\n                day = &quot;Sunday&quot;;\n                break;\n            case Calendar.MONDAY:\n                day = &quot;Monday&quot;;\n                break;\n            case Calendar.TUESDAY:\n                day = &quot;Tuesday&quot;;\n                break;\n            case Calendar.WEDNESDAY:\n                day = &quot;Wednesday&quot;;\n                break;\n            case Calendar.THURSDAY:\n                day = &quot;Thursday&quot;;\n                break;\n            case Calendar.FRIDAY:\n                day = &quot;Friday&quot;;\n                break;\n            case Calendar.SATURDAY:\n                day = &quot;Saturday&quot;;\n                break;\n            default:\n                day = &quot;Unknown&quot;;\n                break;\n        }\n        return day;\n    }\n</code></pre>\n<p>TimeEntry.java</p>\n<pre><code>public TimeEntry() {\n\n    }\n    public TimeEntry(String day) {\n        this.day = day;\n        this.clockInTime = null;\n        this.clockOutTime = null;\n        this.clockInTimes = new ArrayList&lt;&gt;();\n        this.clockOutTimes = new ArrayList&lt;&gt;();\n        setDayOfWeek();\n    }\n\n    public void setDayOfWeek() {\n        SimpleDateFormat inputFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\n        SimpleDateFormat outputFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\n        try {\n            Date date = inputFormat.parse(day);\n            dayOfWeek = outputFormat.format(date);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    public String getClockInTime() {\n        return clockInTime;\n    }\n\n    public void setClockInTime(String clockInTime) {\n        this.clockInTime = clockInTime;\n    }\n\n    public String getClockOutTime() {\n        return clockOutTime;\n    }\n\n    public void setClockOutTime(String clockOutTime) {\n        this.clockOutTime = clockOutTime;\n    }\n\n    public boolean hasClockInTime() {\n        return clockInTime != null;\n    }\n\n    public boolean hasClockOutTime() {\n        return clockOutTime != null;\n    }\n\n    public List&lt;String&gt; getClockInTimes() {\n        return clockInTimes;\n    }\n\n    public List&lt;String&gt; getClockOutTimes() {\n        return clockOutTimes;\n    }\n\n    public String getDayOfWeek() {\n        return dayOfWeek;\n    }\n\n    public void addClockInTime(String clockInTime) {\n        Log.d(&quot;TimeEntry&quot;, &quot;Added clock-in time: &quot; + clockInTime);\n        clockInTimes.add(clockInTime);\n    }\n\n    public void addClockOutTime(String clockOutTime) {\n        Log.d(&quot;TimeEntry&quot;, &quot;Added clock-out time: &quot; + clockOutTime);\n        clockOutTimes.add(clockOutTime);\n    }\n\n    public void setDayOfWeek(String dayOfWeek) {\n        this.dayOfWeek = dayOfWeek;\n    }\n}\n</code></pre>\n<p>TimeEntryAdapter.java</p>\n<pre><code>public class TimeEntryAdapter extends RecyclerView.Adapter&lt;TimeEntryAdapter.TimeEntryViewHolder&gt; {\n    private List&lt;TimeEntry&gt; timeEntries;\n    private String entryType;\n\n    // Constructor for the adapter\n    public TimeEntryAdapter(List&lt;TimeEntry&gt; timeEntries, String entryType) {\n        this.timeEntries = timeEntries;\n        this.entryType = entryType;\n    }\n    @NonNull\n    @Override\n    public TimeEntryViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.time_entry_item, parent, false);\n        return new TimeEntryViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull TimeEntryViewHolder holder, int position) {\n        TimeEntry timeEntry = timeEntries.get(position);\n\n        // Get references to the views within the item layout\n        TextView dayOfWeekTextView = holder.dayOfWeekTextView;\n        TextView clockedInTimeTextView = holder.clockedInTimeTextView;\n        TextView clockedOutTimeTextView = holder.clockedOutTimeTextView;\n\n        // Set data for the views based on the TimeEntry\n        dayOfWeekTextView.setText(timeEntry.getDayOfWeek()); // Set the day dynamically\n        clockedInTimeTextView.setText(&quot;Clock In: &quot; + timeEntry.getClockInTime()); // Set clock-in time dynamically\n        clockedOutTimeTextView.setText(&quot;Clock Out: &quot; + timeEntry.getClockOutTime()); // Set clock-out time dynamically\n    }\n\n    @Override\n    public int getItemCount() {\n        return timeEntries.size();\n    }\n\n    public static class TimeEntryViewHolder extends RecyclerView.ViewHolder {\n        TextView dayOfWeekTextView;\n        TextView clockedInTimeTextView;\n        TextView clockedOutTimeTextView;\n\n        public TimeEntryViewHolder(View itemView) {\n            super(itemView);\n            dayOfWeekTextView = itemView.findViewById(R.id.dayOfWeekTextView);\n            clockedInTimeTextView = itemView.findViewById(R.id.clockedInTimeTextView);\n            clockedOutTimeTextView = itemView.findViewById(R.id.clockedOutTimeTextView);\n        }\n    }\n    public void setTimeEntries(List&lt;TimeEntry&gt; timeEntries) {\n        this.timeEntries = timeEntries;\n        notifyDataSetChanged();\n    }\n    public void addEntry(TimeEntry entry) {\n        timeEntries.add(entry);\n        notifyDataSetChanged();\n    }\n</code></pre>\n<p>I simply want to press the Clock In / Clock Out button and have it populate the correct Recyler View for the correct day and whether or not it is a clock in time or a clock out time.  I had it working just fine for TextViews, then decided &quot;well what if someone clocks in and out twice in the same day&quot;. And now I am talking crap to my computer.  Thanks in advance, let me know if more information is needed.</p>\n"},{"tags":["java","ms-word","apache-poi"],"comments":[{"owner":{"account_id":19332777,"reputation":921,"user_id":14133995,"display_name":"Charles Kenyon"},"score":0,"creation_date":1698029028,"post_id":77342132,"comment_id":136349024,"body_markdown":"Are you confusing Word fields (Ctrl+F9) and Content Controls. The only field I know of with placeholder text is the Macrobutton field used as a prompt. https://www.addbalance.com/usersguide/fields.htm#Prompts","body":"Are you confusing Word fields (Ctrl+F9) and Content Controls. The only field I know of with placeholder text is the Macrobutton field used as a prompt. <a href=\"https://www.addbalance.com/usersguide/fields.htm#Prompts\" rel=\"nofollow noreferrer\">addbalance.com/usersguide/fields.htm#Prompts</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1698040535,"post_id":77342132,"comment_id":136349818,"body_markdown":"`xwpfDocument.getDocument().save(destFile);` saves the XML of document part `document.xml` into `destFile`. That is not a `*.docx` file then. I would do `FileOutputStream out = new FileOutputStream(destFile);xwpfDocument.write(out);out.close();` instead.","body":"<code>xwpfDocument.getDocument().save(destFile);</code> saves the XML of document part <code>document.xml</code> into <code>destFile</code>. That is not a <code>*.docx</code> file then. I would do <code>FileOutputStream out = new FileOutputStream(destFile);xwpfDocument.write(out);out.close&zwnj;&#8203;();</code> instead."},{"owner":{"account_id":9197152,"reputation":1142,"user_id":6835509,"display_name":"Vasanth Subramanian"},"score":0,"creation_date":1698040909,"post_id":77342132,"comment_id":136349864,"body_markdown":"@AxelRichter is correct. Created a sample code with his suggestion [here](https://github.com/vasant-techie/docx-poi.git)","body":"@AxelRichter is correct. Created a sample code with his suggestion <a href=\"https://github.com/vasant-techie/docx-poi.git\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":21599729,"reputation":1,"user_id":15928094,"display_name":"Havooc"},"score":0,"creation_date":1698048392,"post_id":77342132,"comment_id":136350958,"body_markdown":"It worked, thank you very much @AxelRichter","body":"It worked, thank you very much @AxelRichter"}],"owner":{"account_id":21599729,"reputation":1,"user_id":15928094,"display_name":"Havooc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698027771,"creation_date":1698020557,"question_id":77342132,"body_markdown":"I&#39;m trying to edit existing word document containing some placeholders, some of those are in code fields (those from Ctrl+F9) and I have no clue how to easily replace contents of these fields.\r\n\r\nI&#39;ve tried editing these placeholders to a new text directly in XMLObject of my document, but after saving the file I cannot open it - Word says that my file is corrupted and cannot be open.\r\n\r\n\r\nThis is what I&#39;ve tried while playing with Apache POI.\r\n\r\n```java\r\npublic void myFunc(List&lt;MyObject&gt; codeList) {\r\n        try(FileInputStream fis = new FileInputStream(destFile.getPath());\r\n            XWPFDocument xwpfDocument = new XWPFDocument(fis)){\r\n            XmlObject xmlObject = xwpfDocument.getDocument();\r\n            String xmlString = xmlObject.toString();\r\n            int currentIndex = 1;\r\n            for (MyObject current : codeList) {\r\n                for (int j = 0; j &lt; current.getCount(); j++, currentIndex++) {\r\n                    String currentTitlePlaceholder = &quot;ABCDEF00&quot; + String.format(&quot;%02d&quot;, currentIndex);\r\n                    String currentFieldCodePlaceholder = String.format(&quot;%013d&quot;, currentIndex);\r\n                    xmlString = xmlString.replace(currentFieldCodePlaceholder, current.getCode());\r\n                    xmlString = xmlString.replace(currentTitlePlaceholder, current.getTitle());\r\n                }\r\n            }\r\n            XmlObject newXmlObject = XmlObject.Factory.parse(xmlString);\r\n            xwpfDocument.getDocument().set(newXmlObject);\r\n            xwpfDocument.getDocument().save(destFile);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```","title":"How to edit code fields in word document using apache poi","body":"<p>I'm trying to edit existing word document containing some placeholders, some of those are in code fields (those from Ctrl+F9) and I have no clue how to easily replace contents of these fields.</p>\n<p>I've tried editing these placeholders to a new text directly in XMLObject of my document, but after saving the file I cannot open it - Word says that my file is corrupted and cannot be open.</p>\n<p>This is what I've tried while playing with Apache POI.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myFunc(List&lt;MyObject&gt; codeList) {\n        try(FileInputStream fis = new FileInputStream(destFile.getPath());\n            XWPFDocument xwpfDocument = new XWPFDocument(fis)){\n            XmlObject xmlObject = xwpfDocument.getDocument();\n            String xmlString = xmlObject.toString();\n            int currentIndex = 1;\n            for (MyObject current : codeList) {\n                for (int j = 0; j &lt; current.getCount(); j++, currentIndex++) {\n                    String currentTitlePlaceholder = &quot;ABCDEF00&quot; + String.format(&quot;%02d&quot;, currentIndex);\n                    String currentFieldCodePlaceholder = String.format(&quot;%013d&quot;, currentIndex);\n                    xmlString = xmlString.replace(currentFieldCodePlaceholder, current.getCode());\n                    xmlString = xmlString.replace(currentTitlePlaceholder, current.getTitle());\n                }\n            }\n            XmlObject newXmlObject = XmlObject.Factory.parse(xmlString);\n            xwpfDocument.getDocument().set(newXmlObject);\n            xwpfDocument.getDocument().save(destFile);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","oracle","testcontainers","spring-boot-testcontainers"],"owner":{"account_id":16223432,"reputation":3,"user_id":11714437,"display_name":"leugimlenipse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698027213,"creation_date":1698027213,"question_id":77342325,"body_markdown":"i&#39;m pretty new to using Testcontainers, and i&#39;m trying to integrate it into an existing Spring boot project with a basic configuration i found that works for my integration tests.\r\n\r\nI&#39;m using the gvenzl/oracle-xe image to create the container and recreate an existing database with a sql script using `.withCopyFileToContainer(MountableFile.forClasspathResource(&quot;testcontainers/init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);`\r\n\r\nSo far, the db initialization works. The problem is, the db i&#39;m creating has multiple schemas, which are being created in the container db, but once it is ready to use and everything has been created, it seems like i&#39;m not being able to access the tables/schemas.\r\n\r\nAccording to the answers in this issue, i understand that there is a default &quot;test&quot; user which, from my app&#39;s logs, is the one being used when connecting to the db:\r\n\r\n    22-10-2023 19:47:07 [main] INFO  &#128051; [gvenzl/oracle-xe:latest].tryStart - Container gvenzl/oracle-xe:latest started in PT2M52.8713929S\r\n\r\n    22-10-2023 19:47:07 [main] INFO  c.e.u.c.i.config.CommonTestContainer.start - Username: test\r\n\r\n    22-10-2023 19:47:07 [main] INFO  c.e.u.c.i.config.CommonTestContainer.start - Password: test\r\n\r\nI&#39;m not specifying the user/password when creating the container (i&#39;m not using .withUsername and .withPassword), and even when specifying them, the problem persists.\r\n\r\nI know that the schemas and tables are being created because i can query them logging into the db via the container&#39;s terminal with &quot;sys as sysdba/password&quot;. In my init scripts, i have tried excecuting a SQL block to grant privileges to the &#39;test&#39; user in all schemas and tables, but it still doesn&#39;t seem to work since i&#39;m still getting the same error message after trying to run the tests (upon initialization, the app tries do run a &#39;select&#39; query for an auditing service):\r\n\r\n    22-10-2023 19:47:42 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 942, SQLState: 42000\r\n\r\n    22-10-2023 19:47:42 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - ORA-00942: table or view does not exist\r\n\r\nSome things i&#39;m trying to figure out are:\r\n\r\n    When the script to grant privileges to the &quot;test&quot; user is excecuted, it seems to work properly since i&#39;m not getting any error logs.\r\n    When connecting to the db via the container&#39;s terminal and checking the user list, there is no &#39;test&#39; user, which is giving me a lot of confusion.\r\n\r\nSo, what could be happening for the default user not being able to access the db schemas/tables? And what other options to i have?","title":"Unable to access DB schemas/tables with default user (testcontainers)","body":"<p>i'm pretty new to using Testcontainers, and i'm trying to integrate it into an existing Spring boot project with a basic configuration i found that works for my integration tests.</p>\n<p>I'm using the gvenzl/oracle-xe image to create the container and recreate an existing database with a sql script using <code>.withCopyFileToContainer(MountableFile.forClasspathResource(&quot;testcontainers/init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);</code></p>\n<p>So far, the db initialization works. The problem is, the db i'm creating has multiple schemas, which are being created in the container db, but once it is ready to use and everything has been created, it seems like i'm not being able to access the tables/schemas.</p>\n<p>According to the answers in this issue, i understand that there is a default &quot;test&quot; user which, from my app's logs, is the one being used when connecting to the db:</p>\n<pre><code>22-10-2023 19:47:07 [main] INFO  🐳 [gvenzl/oracle-xe:latest].tryStart - Container gvenzl/oracle-xe:latest started in PT2M52.8713929S\n\n22-10-2023 19:47:07 [main] INFO  c.e.u.c.i.config.CommonTestContainer.start - Username: test\n\n22-10-2023 19:47:07 [main] INFO  c.e.u.c.i.config.CommonTestContainer.start - Password: test\n</code></pre>\n<p>I'm not specifying the user/password when creating the container (i'm not using .withUsername and .withPassword), and even when specifying them, the problem persists.</p>\n<p>I know that the schemas and tables are being created because i can query them logging into the db via the container's terminal with &quot;sys as sysdba/password&quot;. In my init scripts, i have tried excecuting a SQL block to grant privileges to the 'test' user in all schemas and tables, but it still doesn't seem to work since i'm still getting the same error message after trying to run the tests (upon initialization, the app tries do run a 'select' query for an auditing service):</p>\n<pre><code>22-10-2023 19:47:42 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 942, SQLState: 42000\n\n22-10-2023 19:47:42 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - ORA-00942: table or view does not exist\n</code></pre>\n<p>Some things i'm trying to figure out are:</p>\n<pre><code>When the script to grant privileges to the &quot;test&quot; user is excecuted, it seems to work properly since i'm not getting any error logs.\nWhen connecting to the db via the container's terminal and checking the user list, there is no 'test' user, which is giving me a lot of confusion.\n</code></pre>\n<p>So, what could be happening for the default user not being able to access the db schemas/tables? And what other options to i have?</p>\n"},{"tags":["java","arrays","eclipse","casting"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":2,"creation_date":1698025234,"post_id":77342256,"comment_id":136348812,"body_markdown":"values in array are doubles, but index is not double - index in array is integer","body":"values in array are doubles, but index is not double - index in array is integer"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1698031867,"post_id":77342256,"comment_id":136349193,"body_markdown":"That the error was inside a &quot;print statement&quot; is irrelevant. It would have occurred anywhere there was an attempt to use a `double` as an array index.","body":"That the error was inside a &quot;print statement&quot; is irrelevant. It would have occurred anywhere there was an attempt to use a <code>double</code> as an array index."}],"answers":[{"tags":[],"owner":{"account_id":236909,"reputation":8312,"user_id":504717,"accept_rate":56,"display_name":"Em Ae"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698025258,"creation_date":1698025258,"answer_id":77342261,"question_id":77342256,"body_markdown":"The problem is that you are iterating over your array with &quot;double&quot; variable. Array indices are of *integer* type\r\n\r\nChange your &quot;index&quot; variable type to int and it should be fine i.e., \r\n\r\n\r\n```java\r\npublic static void main(String[] args){\r\n\r\n    double [] array = {1.0,2.0,4.0,2.5,5.0};\r\n    for (int index = 0; index &lt;= array.length-1; index++){\r\n        System.out.println(array[index]);\r\n  }\r\n}\r\n\r\n```\r\n\r\nThere are other ways to iterate over array as well. HEre is one where you don&#39;t need special index. rather you need a variable (of the same type as array) to hold the value i.e., \r\n\r\n```\r\n    for (double val : array) {\r\n      System.out.println(val);\r\n    }\r\n```","title":"Why Do I Need to Cast Int To A Double Variable In A Print Statement If Its Already Declared/Initialized As A Double?","body":"<p>The problem is that you are iterating over your array with &quot;double&quot; variable. Array indices are of <em>integer</em> type</p>\n<p>Change your &quot;index&quot; variable type to int and it should be fine i.e.,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args){\n\n    double [] array = {1.0,2.0,4.0,2.5,5.0};\n    for (int index = 0; index &lt;= array.length-1; index++){\n        System.out.println(array[index]);\n  }\n}\n\n</code></pre>\n<p>There are other ways to iterate over array as well. HEre is one where you don't need special index. rather you need a variable (of the same type as array) to hold the value i.e.,</p>\n<pre><code>    for (double val : array) {\n      System.out.println(val);\n    }\n</code></pre>\n"}],"owner":{"account_id":26028402,"reputation":3,"user_id":19734996,"display_name":"A_Pickle"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1698025853,"accepted_answer_id":77342261,"answer_count":1,"score":-2,"last_activity_date":1698025790,"creation_date":1698025033,"question_id":77342256,"body_markdown":"I am trying to traverse an array in Java via a for loop, but for some reason it will only print the doubles in my list if I cast &#39;int&#39;. Otherwise I get a &quot;Type Mismatch: cannot convert double to int&quot; even though everything is a double and I never once attempt to convert any number to an int. I am a complete begginer to programming, so any and all help is greatly appreciated. Here is the code: \r\n\r\n```\r\npackage MyProgram1;\r\nimport cs1.Keyboard;\r\n\r\npublic class MyProgram1{\r\n\t\r\n\tpublic static void main(String[] args){\r\n\r\n\t\tdouble [] array = {1.0,2.0,4.0,2.5,5.0};\r\n\t\tfor (double index = 0.0; index &lt;= array.length-1.0; index++){\r\n                        \\\\The line below is what results in the error\r\n\t\t\tSystem.out.println(array[index]);\r\n                        }\r\n\t\r\n\t}\r\n}\r\n```\r\n\r\nI saw a suggestion (in eclipse) that said &quot;add cast to int&quot; and here is what that looks like: \r\n```\r\npackage MyProgram1;\r\nimport cs1.Keyboard;\r\n\r\npublic class MyProgram1{\r\n\t\r\n\tpublic static void main(String[] args){\r\n\t\tdouble [] array1 = {1.0,2.0,4.0,2.5,5.0};\r\n\t\tfor (double index = 0.0; index &lt;= array1.length-1.0; index++)\r\n\t\t\tSystem.out.println(array1[(int)index]);\r\n\r\n\t\t\t\r\n\t\r\n\t}\r\n}\r\n ````\r\n\r\nWorks perfectly and what prints is the following: \r\n```\r\n1.0\r\n2.0\r\n4.0\r\n2.5\r\n5.0\r\n```\r\nMy question is why? Why do I need to cast it, and when I do, why is everything printed as a double? Shouldn&#39;t the results be integers? \r\n\r\nAgain, any clarification is appreciated. ","title":"Why Do I Need to Cast Int To A Double Variable In A Print Statement If Its Already Declared/Initialized As A Double?","body":"<p>I am trying to traverse an array in Java via a for loop, but for some reason it will only print the doubles in my list if I cast 'int'. Otherwise I get a &quot;Type Mismatch: cannot convert double to int&quot; even though everything is a double and I never once attempt to convert any number to an int. I am a complete begginer to programming, so any and all help is greatly appreciated. Here is the code:</p>\n<pre><code>package MyProgram1;\nimport cs1.Keyboard;\n\npublic class MyProgram1{\n    \n    public static void main(String[] args){\n\n        double [] array = {1.0,2.0,4.0,2.5,5.0};\n        for (double index = 0.0; index &lt;= array.length-1.0; index++){\n                        \\\\The line below is what results in the error\n            System.out.println(array[index]);\n                        }\n    \n    }\n}\n</code></pre>\n<p>I saw a suggestion (in eclipse) that said &quot;add cast to int&quot; and here is what that looks like:</p>\n<pre><code>package MyProgram1;\nimport cs1.Keyboard;\n\npublic class MyProgram1{\n    \n    public static void main(String[] args){\n        double [] array1 = {1.0,2.0,4.0,2.5,5.0};\n        for (double index = 0.0; index &lt;= array1.length-1.0; index++)\n            System.out.println(array1[(int)index]);\n\n            \n    \n    }\n}\n</code></pre>\n<p>Works perfectly and what prints is the following:</p>\n<pre><code>1.0\n2.0\n4.0\n2.5\n5.0\n</code></pre>\n<p>My question is why? Why do I need to cast it, and when I do, why is everything printed as a double? Shouldn't the results be integers?</p>\n<p>Again, any clarification is appreciated.</p>\n"},{"tags":["java","generics","wildcard"],"answers":[{"comments":[{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":3,"creation_date":1376255261,"post_id":18176690,"comment_id":26631661,"body_markdown":"Is this not supposed to be a comment?","body":"Is this not supposed to be a comment?"},{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":2,"creation_date":1376255553,"post_id":18176690,"comment_id":26631738,"body_markdown":"@BuhakeSindi Sorry, what is unclear? Why -1? I think it answers the question.","body":"@BuhakeSindi Sorry, what is unclear? Why -1? I think it answers the question."}],"tags":[],"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1376255968,"creation_date":1376255232,"answer_id":18176690,"question_id":18176594,"body_markdown":"Wildcard method is also generic - you could call it with some range of types.\r\n\r\nThe `&lt;T&gt;` syntax defines a type variable name. If a type variable has any use (e.g. in method implementation or as a constraint for other type), then it makes sense to name it, otherwise you could use `?`, as anonymous variable. So, looks like just a short-cut.\r\n\r\nMoreover, the `?` syntax is not avoidable when you declare a field:\r\n\r\n    class NumberContainer\r\n    {\r\n     Set&lt;? extends Number&gt; numbers;\r\n    }","title":"When to use generic methods and when to use wild-card?","body":"<p>Wildcard method is also generic - you could call it with some range of types.</p>\n\n<p>The <code>&lt;T&gt;</code> syntax defines a type variable name. If a type variable has any use (e.g. in method implementation or as a constraint for other type), then it makes sense to name it, otherwise you could use <code>?</code>, as anonymous variable. So, looks like just a short-cut.</p>\n\n<p>Moreover, the <code>?</code> syntax is not avoidable when you declare a field:</p>\n\n<pre><code>class NumberContainer\n{\n Set&lt;? extends Number&gt; numbers;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":5,"creation_date":1376256593,"post_id":18176765,"comment_id":26632017,"body_markdown":"This is strange answer. It doesn&#39;t explain why you need to use `?` at all. You could rewrite it as `public static &lt;T1 extends Number, T2 extends Number&gt; void copy(List&lt;T1&gt; dest, List&lt;T2&gt; src) and in this case it become obvious what is going on.","body":"This is strange answer. It doesn&#39;t explain why you need to use <code>?</code> at all. You could rewrite it as `public static &lt;T1 extends Number, T2 extends Number&gt; void copy(List&lt;T1&gt; dest, List&lt;T2&gt; src) and in this case it become obvious what is going on."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1376256667,"post_id":18176765,"comment_id":26632035,"body_markdown":"@kan. Well that&#39;s the real issue. You can use type parameter to enforce same type, but you can&#39;t do that with wildcards. Using two different types for type parameter is different thing.","body":"@kan. Well that&#39;s the real issue. You can use type parameter to enforce same type, but you can&#39;t do that with wildcards. Using two different types for type parameter is different thing."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1376256786,"post_id":18176765,"comment_id":26632072,"body_markdown":"@kan. See my last two points for why you might need to use wildcards.","body":"@kan. See my last two points for why you might need to use wildcards."},{"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"score":0,"creation_date":1376256966,"post_id":18176765,"comment_id":26632122,"body_markdown":"Rohit what do you mean by type parameter supports upper bounds only?","body":"Rohit what do you mean by type parameter supports upper bounds only?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1376257063,"post_id":18176765,"comment_id":26632138,"body_markdown":"@benz. You can&#39;t define a lower bounds in a `List` using type parameter. `List&lt;T super Integer&gt;` isn&#39;t valid, and won&#39;t compile.","body":"@benz. You can&#39;t define a lower bounds in a <code>List</code> using type parameter. <code>List&lt;T super Integer&gt;</code> isn&#39;t valid, and won&#39;t compile."},{"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"score":0,"creation_date":1376257210,"post_id":18176765,"comment_id":26632176,"body_markdown":"This all is making me go back to foundation real difference between wild card and generic methods :)thanks rohit for your explanation","body":"This all is making me go back to foundation real difference between wild card and generic methods :)thanks rohit for your explanation"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":2,"creation_date":1376257321,"post_id":18176765,"comment_id":26632204,"body_markdown":"@benz. You&#39;re welcome :) I highly suggest you to go through the link I posted at the end. That is the best resource on Generics you would get.","body":"@benz. You&#39;re welcome :) I highly suggest you to go through the link I posted at the end. That is the best resource on Generics you would get."},{"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"score":0,"creation_date":1376257583,"post_id":18176765,"comment_id":26632264,"body_markdown":"Sure rohit I will completely go through it and bug you back with the question. Thank you so much for your precious time.","body":"Sure rohit I will completely go through it and bug you back with the question. Thank you so much for your precious time."},{"owner":{"account_id":145679,"reputation":1285,"user_id":355642,"accept_rate":53,"display_name":"jorgen.ringen"},"score":0,"creation_date":1467201420,"post_id":18176765,"comment_id":63631950,"body_markdown":"&quot;Type parameters support multiple bounds, wildcards don&#39;t.&quot;\n&quot;Wildcards support both upper and lower bounds, type parameters just support upper bounds.&quot;\n\nI didn&#39;t quite get this.. What do you mean by &quot;type parameters support multiple bounds&quot;? It just support upper, as you wrote in the next sentence.","body":"&quot;Type parameters support multiple bounds, wildcards don&#39;t.&quot; &quot;Wildcards support both upper and lower bounds, type parameters just support upper bounds.&quot;  I didn&#39;t quite get this.. What do you mean by &quot;type parameters support multiple bounds&quot;? It just support upper, as you wrote in the next sentence."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":6,"creation_date":1467223976,"post_id":18176765,"comment_id":63647948,"body_markdown":"@jorgen.ringen `&lt;T extends X &amp; Y&gt;` -&gt; multiple bounds.","body":"@jorgen.ringen <code>&lt;T extends X &amp; Y&gt;</code> -&gt; multiple bounds."},{"owner":{"account_id":1479215,"reputation":2511,"user_id":1388943,"accept_rate":48,"display_name":"stdout"},"score":0,"creation_date":1532523417,"post_id":18176765,"comment_id":90007627,"body_markdown":"&quot;If you have only one parameterized type argument, then you can use wildcard, although type parameter will also work.&quot; I think that statement is not always true especially when you have a generic method where you want to update, for example, the list you&#39;ve passed as an argument with items in the list (say, you want to re-add all the items again).","body":"&quot;If you have only one parameterized type argument, then you can use wildcard, although type parameter will also work.&quot; I think that statement is not always true especially when you have a generic method where you want to update, for example, the list you&#39;ve passed as an argument with items in the list (say, you want to re-add all the items again)."},{"owner":{"account_id":4293835,"reputation":399,"user_id":3509406,"accept_rate":0,"display_name":"user3509406"},"score":1,"creation_date":1541387540,"post_id":18176765,"comment_id":93186589,"body_markdown":"Then why is Java defined so that we can&#39;t use the super keyword for type parameter?","body":"Then why is Java defined so that we can&#39;t use the super keyword for type parameter?"}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":12,"down_vote_count":1,"up_vote_count":227,"is_accepted":true,"score":226,"last_activity_date":1698024115,"creation_date":1376255814,"answer_id":18176765,"question_id":18176594,"body_markdown":"There are certain places where wildcards and type parameters do the same thing. But there are also certain places where you have to use type parameters. \r\n\r\n1. If you want to enforce some relationship on the different types of method arguments, you can&#39;t do that with wildcards, you have to use type parameters. \r\n\r\nTaking your method as an example, suppose you want to ensure that the `src` and `dest` list passed to the `copy()` method should be of the same parameterized type, you can do it with type parameters like so:\r\n\r\n    public static &lt;T extends Number&gt; void copy(List&lt;T&gt; dest, List&lt;T&gt; src)\r\n\r\nHere, you are ensured that both `dest` and `src` have the same parameterized type for `List`. So, it&#39;s safe to copy elements from `src` to `dest`.\r\n\r\nBut, if you go on to change the method to use wildcards:\r\n\r\n    public static void copy(List&lt;? extends Number&gt; dest, List&lt;? extends Number&gt; src)\r\n\r\nit won&#39;t work as expected. In 2nd case, you can pass `List&lt;Integer&gt;` and `List&lt;Float&gt;` as `dest` and `src`. So, moving elements from `src` to `dest` wouldn&#39;t be type-safe anymore.\r\nIf you don&#39;t need such kind of relation, then you are free not to use type parameters at all.\r\n\r\nSome other differences between using wildcards and type parameters are:\r\n\r\n - If you have only one parameterized type argument, you can use a wildcard, although type parameter will also work.\r\n - Type parameters support multiple bounds, wildcards don&#39;t.\r\n - Wildcards support both upper and lower bounds, type parameters only support upper bounds. So, if you want to define a method that takes a `List` of type `Integer` or it&#39;s superclass, you can do:\r\n\r\n        public void print(List&lt;? super Integer&gt; list)  // OK\r\n\r\n  but you can&#39;t use a type parameter:\r\n\r\n         public &lt;T super Integer&gt; void print(List&lt;T&gt; list)  // Won&#39;t compile\r\n\r\n&lt;hr /&gt;\r\n\r\n**References:**\r\n\r\n - [Angelika Langer&#39;s Java Generics FAQs][1]\r\n\r\n[1]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#FAQ203","title":"When to use generic methods and when to use wild-card?","body":"<p>There are certain places where wildcards and type parameters do the same thing. But there are also certain places where you have to use type parameters.</p>\n<ol>\n<li>If you want to enforce some relationship on the different types of method arguments, you can't do that with wildcards, you have to use type parameters.</li>\n</ol>\n<p>Taking your method as an example, suppose you want to ensure that the <code>src</code> and <code>dest</code> list passed to the <code>copy()</code> method should be of the same parameterized type, you can do it with type parameters like so:</p>\n<pre><code>public static &lt;T extends Number&gt; void copy(List&lt;T&gt; dest, List&lt;T&gt; src)\n</code></pre>\n<p>Here, you are ensured that both <code>dest</code> and <code>src</code> have the same parameterized type for <code>List</code>. So, it's safe to copy elements from <code>src</code> to <code>dest</code>.</p>\n<p>But, if you go on to change the method to use wildcards:</p>\n<pre><code>public static void copy(List&lt;? extends Number&gt; dest, List&lt;? extends Number&gt; src)\n</code></pre>\n<p>it won't work as expected. In 2nd case, you can pass <code>List&lt;Integer&gt;</code> and <code>List&lt;Float&gt;</code> as <code>dest</code> and <code>src</code>. So, moving elements from <code>src</code> to <code>dest</code> wouldn't be type-safe anymore.\nIf you don't need such kind of relation, then you are free not to use type parameters at all.</p>\n<p>Some other differences between using wildcards and type parameters are:</p>\n<ul>\n<li><p>If you have only one parameterized type argument, you can use a wildcard, although type parameter will also work.</p>\n</li>\n<li><p>Type parameters support multiple bounds, wildcards don't.</p>\n</li>\n<li><p>Wildcards support both upper and lower bounds, type parameters only support upper bounds. So, if you want to define a method that takes a <code>List</code> of type <code>Integer</code> or it's superclass, you can do:</p>\n<pre><code> public void print(List&lt;? super Integer&gt; list)  // OK\n</code></pre>\n</li>\n</ul>\n<p>but you can't use a type parameter:</p>\n<pre><code>     public &lt;T super Integer&gt; void print(List&lt;T&gt; list)  // Won't compile\n</code></pre>\n<hr />\n<p><strong>References:</strong></p>\n<ul>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#FAQ203\" rel=\"nofollow noreferrer\">Angelika Langer's Java Generics FAQs</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1769448,"reputation":522,"user_id":1614580,"accept_rate":83,"display_name":"Arnold Pistorius"},"score":2,"creation_date":1430293933,"post_id":18176807,"comment_id":47996548,"body_markdown":"`List&lt;? extends Fruit&gt; basket = new ArrayList&lt;? extends Fruit&gt;();` Is not a valid syntax. You have to instantiate the ArrayList without bounds.","body":"<code>List&lt;? extends Fruit&gt; basket = new ArrayList&lt;? extends Fruit&gt;();</code> Is not a valid syntax. You have to instantiate the ArrayList without bounds."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1480756612,"post_id":18176807,"comment_id":69102694,"body_markdown":"Cannot add an Apple to the basket in the example above since the basket could be a list of Pears&#39;. Incorrect example AFAIK. And does not compile as well.","body":"Cannot add an Apple to the basket in the example above since the basket could be a list of Pears&#39;. Incorrect example AFAIK. And does not compile as well."},{"owner":{"account_id":2794245,"reputation":579,"user_id":2403791,"display_name":"TomasMolina"},"score":1,"creation_date":1518469966,"post_id":18176807,"comment_id":84512146,"body_markdown":"@ArnoldPistorius That do confused me. I checked the API documentation of ArrayList and it has a constructor signed `ArrayList(Collection&lt;? extends E&gt; c)` . Can you explain me why you have said that?","body":"@ArnoldPistorius That do confused me. I checked the API documentation of ArrayList and it has a constructor signed <code>ArrayList(Collection&lt;? extends E&gt; c)</code> . Can you explain me why you have said that?"},{"owner":{"account_id":1769448,"reputation":522,"user_id":1614580,"accept_rate":83,"display_name":"Arnold Pistorius"},"score":0,"creation_date":1519296200,"post_id":18176807,"comment_id":84856837,"body_markdown":"@Kurapika Could be that I was using an old Java version? Comment was posted almost 3 years ago.","body":"@Kurapika Could be that I was using an old Java version? Comment was posted almost 3 years ago."}],"tags":[],"owner":{"account_id":1735089,"reputation":3355,"user_id":1998098,"accept_rate":59,"display_name":"le-doude"},"comment_count":4,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1486980789,"creation_date":1376256108,"answer_id":18176807,"question_id":18176594,"body_markdown":"In your first question: It means that if there is a relation between the parameter&#39;s type and the method&#39;s return type then use a generic.\r\n\r\nFor example:\r\n\r\n    public &lt;T&gt; T giveMeMaximum(Collection&lt;T&gt; items);\r\n    public &lt;T&gt; Collection&lt;T&gt; applyFilter(Collection&lt;T&gt; items);\r\n\r\nHere you are extracting some of the T following a certain criteria. If T is `Long` your methods will return `Long` and `Collection&lt;Long&gt;`; the actual return type is dependent on the parameter type, thus it is useful, and advised, to use generic types.\r\n\r\nWhen this is not the case you can use wild card types:\r\n\r\n    public int count(Collection&lt;?&gt; items);\r\n    public boolean containsDuplicate(Collection&lt;?&gt; items);\r\n\r\nIn this two example whatever the type of the items in the collections the return types will be `int` and `boolean`.\r\n\r\nIn your examples:\r\n\r\n    interface Collection&lt;E&gt; {\r\n        public boolean containsAll(Collection&lt;?&gt; c);\r\n        public boolean addAll(Collection&lt;? extends E&gt; c);\r\n    }\r\n\r\nthose two functions will return a boolean whatever is the types of the items in the collections. In the second case it is limited to instances of a subclass of E.\r\n\r\nSecond question:\r\n\r\n    class Collections {\r\n        public static &lt;T&gt; void copy(List&lt;T&gt; dest, List&lt;? extends T&gt; src) {\r\n        ...\r\n    }\r\n\r\nThis first code allow you to pass an heterogeneous `List&lt;? extends T&gt; src` as a parameter. This list can contain multiple elements of different classes as long as they all extends the base class T.\r\n\r\nif you had:\r\n\r\n    interface Fruit{}\r\n\r\nand\r\n\r\n    class Apple implements Fruit{}\r\n    class Pear implements Fruit{}\r\n    class Tomato implements Fruit{}\r\n\r\nyou could do\r\n\r\n    List&lt;? extends Fruit&gt; basket = new ArrayList&lt;? extends Fruit&gt;();\r\n    basket.add(new Apple());\r\n    basket.add(new Pear());\r\n    basket.add(new Tomato());\r\n    List&lt;Fruit&gt; fridge = new ArrayList&lt;Fruit&gt;(); \r\n\r\n    Collections.copy(fridge, basket);// works \r\n\r\nOn the other hand\r\n\r\n    class Collections {\r\n        public static &lt;T, S extends T&gt; void copy(List&lt;T&gt; dest, List&lt;S&gt; src) {\r\n        ...\r\n    }\r\n\r\nconstrain `List&lt;S&gt; src` to be of one particular class S that is a subclass of T. The list can only contain elements of one class (in this instance S) and no other class, even if they implement T too. You wouldn&#39;t be able to use my previous example but you could do:\r\n\r\n    List&lt;Apple&gt; basket = new ArrayList&lt;Apple&gt;();\r\n    basket.add(new Apple());\r\n    basket.add(new Apple());\r\n    basket.add(new Apple());\r\n    List&lt;Fruit&gt; fridge = new ArrayList&lt;Fruit&gt;();\r\n\r\n    Collections.copy(fridge, basket); /* works since the basket is defined as a List of apples and not a list of some fruits. */","title":"When to use generic methods and when to use wild-card?","body":"<p>In your first question: It means that if there is a relation between the parameter's type and the method's return type then use a generic.</p>\n\n<p>For example:</p>\n\n<pre><code>public &lt;T&gt; T giveMeMaximum(Collection&lt;T&gt; items);\npublic &lt;T&gt; Collection&lt;T&gt; applyFilter(Collection&lt;T&gt; items);\n</code></pre>\n\n<p>Here you are extracting some of the T following a certain criteria. If T is <code>Long</code> your methods will return <code>Long</code> and <code>Collection&lt;Long&gt;</code>; the actual return type is dependent on the parameter type, thus it is useful, and advised, to use generic types.</p>\n\n<p>When this is not the case you can use wild card types:</p>\n\n<pre><code>public int count(Collection&lt;?&gt; items);\npublic boolean containsDuplicate(Collection&lt;?&gt; items);\n</code></pre>\n\n<p>In this two example whatever the type of the items in the collections the return types will be <code>int</code> and <code>boolean</code>.</p>\n\n<p>In your examples:</p>\n\n<pre><code>interface Collection&lt;E&gt; {\n    public boolean containsAll(Collection&lt;?&gt; c);\n    public boolean addAll(Collection&lt;? extends E&gt; c);\n}\n</code></pre>\n\n<p>those two functions will return a boolean whatever is the types of the items in the collections. In the second case it is limited to instances of a subclass of E.</p>\n\n<p>Second question:</p>\n\n<pre><code>class Collections {\n    public static &lt;T&gt; void copy(List&lt;T&gt; dest, List&lt;? extends T&gt; src) {\n    ...\n}\n</code></pre>\n\n<p>This first code allow you to pass an heterogeneous <code>List&lt;? extends T&gt; src</code> as a parameter. This list can contain multiple elements of different classes as long as they all extends the base class T.</p>\n\n<p>if you had:</p>\n\n<pre><code>interface Fruit{}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Apple implements Fruit{}\nclass Pear implements Fruit{}\nclass Tomato implements Fruit{}\n</code></pre>\n\n<p>you could do</p>\n\n<pre><code>List&lt;? extends Fruit&gt; basket = new ArrayList&lt;? extends Fruit&gt;();\nbasket.add(new Apple());\nbasket.add(new Pear());\nbasket.add(new Tomato());\nList&lt;Fruit&gt; fridge = new ArrayList&lt;Fruit&gt;(); \n\nCollections.copy(fridge, basket);// works \n</code></pre>\n\n<p>On the other hand</p>\n\n<pre><code>class Collections {\n    public static &lt;T, S extends T&gt; void copy(List&lt;T&gt; dest, List&lt;S&gt; src) {\n    ...\n}\n</code></pre>\n\n<p>constrain <code>List&lt;S&gt; src</code> to be of one particular class S that is a subclass of T. The list can only contain elements of one class (in this instance S) and no other class, even if they implement T too. You wouldn't be able to use my previous example but you could do:</p>\n\n<pre><code>List&lt;Apple&gt; basket = new ArrayList&lt;Apple&gt;();\nbasket.add(new Apple());\nbasket.add(new Apple());\nbasket.add(new Apple());\nList&lt;Fruit&gt; fridge = new ArrayList&lt;Fruit&gt;();\n\nCollections.copy(fridge, basket); /* works since the basket is defined as a List of apples and not a list of some fruits. */\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"score":1,"creation_date":1376257420,"post_id":18176855,"comment_id":26632224,"body_markdown":"Can you explain what do you mean in your last paragraph","body":"Can you explain what do you mean in your last paragraph"},{"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"score":1,"creation_date":1376257662,"post_id":18176855,"comment_id":26632284,"body_markdown":"The one that states 2nd option will force you to bind one......can you elaborate over it","body":"The one that states 2nd option will force you to bind one......can you elaborate over it"},{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1376257739,"post_id":18176855,"comment_id":26632307,"body_markdown":"`&lt;S extends T&gt;` states that `S` is a parameterized type that is a subclass of `T`, so it requires a parameterized type (no wildcard) that is a subclass of `T`.","body":"<code>&lt;S extends T&gt;</code> states that <code>S</code> is a parameterized type that is a subclass of <code>T</code>, so it requires a parameterized type (no wildcard) that is a subclass of <code>T</code>."}],"tags":[],"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1376256416,"creation_date":1376256416,"answer_id":18176855,"question_id":18176594,"body_markdown":"I will try and answer your question, one by one.\r\n\r\n&gt; Don&#39;t we think wild card like `(Collection&lt;? extends E&gt; c);` is also\r\n&gt; supporting kind of polymorphism?\r\n\r\nNo. The reason is that the *bounded wildcard* has no defined parameter type. It is an unknown. All it &quot;knows&quot; is that the &quot;containment&quot; is of a type `E` (whatever defined). So, it cannot verify and justify whether the value provided matches the bounded type.\r\n\r\nSo, it&#39;s no sensible to have polymorphic behaviours on wildcards.\r\n\r\n&gt; The document discourages the second declaration and promotes usage of\r\n&gt; first syntax? What&#39;s the difference between the first and second\r\n&gt; declaration? Both seems to be doing the same thing?\r\n\r\nThe first option is better in this case as `T` is always bounded, and `source` will definitely have values (of unknowns) that subclasses `T`.\r\n\r\nSo, suppose that you want to copy all list of numbers, the first option will be\r\n\r\n    Collections.copy(List&lt;Number&gt; dest, List&lt;? extends Number&gt; src);\r\n\r\n`src`, essentially, can accept `List&lt;Double&gt;`, `List&lt;Float&gt;`, etc. as there is an upper bound to the parameterized type found in `dest`.\r\n\r\nThe 2nd option will force you to bind `S` for every type you want to copy, like so\r\n\r\n    //For double \r\n    Collections.copy(List&lt;Number&gt; dest, List&lt;Double&gt; src); //Double extends Number.\r\n    \r\n    //For int\r\n    Collections.copy(List&lt;Number&gt; dest, List&lt;Integer&gt; src); //Integer extends Number.\r\n\r\nAs `S` is a parameterized type that needs binding.\r\n\r\n\r\nI hope this helps.","title":"When to use generic methods and when to use wild-card?","body":"<p>I will try and answer your question, one by one.</p>\n\n<blockquote>\n  <p>Don't we think wild card like <code>(Collection&lt;? extends E&gt; c);</code> is also\n  supporting kind of polymorphism?</p>\n</blockquote>\n\n<p>No. The reason is that the <em>bounded wildcard</em> has no defined parameter type. It is an unknown. All it \"knows\" is that the \"containment\" is of a type <code>E</code> (whatever defined). So, it cannot verify and justify whether the value provided matches the bounded type.</p>\n\n<p>So, it's no sensible to have polymorphic behaviours on wildcards.</p>\n\n<blockquote>\n  <p>The document discourages the second declaration and promotes usage of\n  first syntax? What's the difference between the first and second\n  declaration? Both seems to be doing the same thing?</p>\n</blockquote>\n\n<p>The first option is better in this case as <code>T</code> is always bounded, and <code>source</code> will definitely have values (of unknowns) that subclasses <code>T</code>.</p>\n\n<p>So, suppose that you want to copy all list of numbers, the first option will be</p>\n\n<pre><code>Collections.copy(List&lt;Number&gt; dest, List&lt;? extends Number&gt; src);\n</code></pre>\n\n<p><code>src</code>, essentially, can accept <code>List&lt;Double&gt;</code>, <code>List&lt;Float&gt;</code>, etc. as there is an upper bound to the parameterized type found in <code>dest</code>.</p>\n\n<p>The 2nd option will force you to bind <code>S</code> for every type you want to copy, like so</p>\n\n<pre><code>//For double \nCollections.copy(List&lt;Number&gt; dest, List&lt;Double&gt; src); //Double extends Number.\n\n//For int\nCollections.copy(List&lt;Number&gt; dest, List&lt;Integer&gt; src); //Integer extends Number.\n</code></pre>\n\n<p>As <code>S</code> is a parameterized type that needs binding.</p>\n\n<p>I hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":2794245,"reputation":579,"user_id":2403791,"display_name":"TomasMolina"},"score":2,"creation_date":1518470466,"post_id":31496908,"comment_id":84512370,"body_markdown":"i voted up for the quote of a book,  it is direct and concise","body":"i voted up for the quote of a book,  it is direct and concise"}],"tags":[],"owner":{"account_id":2221746,"reputation":1285,"user_id":1960964,"accept_rate":77,"display_name":"chammu"},"comment_count":1,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1437266265,"creation_date":1437266265,"answer_id":31496908,"question_id":18176594,"body_markdown":"Consider following example from The Java Programming by James Gosling 4th edition below where we want to merge 2 SinglyLinkQueue:\r\n\r\n\tpublic static &lt;T1, T2 extends T1&gt; void merge(SinglyLinkQueue&lt;T1&gt; d, SinglyLinkQueue&lt;T2&gt; s){\r\n\t\t// merge s element into d\r\n\t}\r\n\r\n\tpublic static &lt;T&gt; void merge(SinglyLinkQueue&lt;T&gt; d, SinglyLinkQueue&lt;? extends T&gt; s){\r\n\t\t\t// merge s element into d\r\n\t}\r\n\r\nBoth of the above methods have the same functionality. So which is preferable? Answer is 2nd one. In the author&#39;s own words : \r\n\r\n**&quot;The general rule is to use wildcards when you can because code with wildcards\r\nis generally more readable than code with multiple type parameters. When deciding if you need a type\r\nvariable, ask yourself if that type variable is used to relate two or more parameters, or to relate a parameter\r\ntype with the return type. If the answer is no, then a wildcard should suffice.&quot;** \r\n\r\nNote: In book only second method is given and type parameter name is S instead of &#39;T&#39;. First method is not there in the book.","title":"When to use generic methods and when to use wild-card?","body":"<p>Consider following example from The Java Programming by James Gosling 4th edition below where we want to merge 2 SinglyLinkQueue:</p>\n\n<pre><code>public static &lt;T1, T2 extends T1&gt; void merge(SinglyLinkQueue&lt;T1&gt; d, SinglyLinkQueue&lt;T2&gt; s){\n    // merge s element into d\n}\n\npublic static &lt;T&gt; void merge(SinglyLinkQueue&lt;T&gt; d, SinglyLinkQueue&lt;? extends T&gt; s){\n        // merge s element into d\n}\n</code></pre>\n\n<p>Both of the above methods have the same functionality. So which is preferable? Answer is 2nd one. In the author's own words : </p>\n\n<p><strong>\"The general rule is to use wildcards when you can because code with wildcards\nis generally more readable than code with multiple type parameters. When deciding if you need a type\nvariable, ask yourself if that type variable is used to relate two or more parameters, or to relate a parameter\ntype with the return type. If the answer is no, then a wildcard should suffice.\"</strong> </p>\n\n<p>Note: In book only second method is given and type parameter name is S instead of 'T'. First method is not there in the book.</p>\n"},{"tags":[],"owner":{"account_id":9676463,"reputation":429,"user_id":7179794,"accept_rate":25,"display_name":"Vivek Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501556052,"creation_date":1501555406,"answer_id":45428127,"question_id":18176594,"body_markdown":"One other difference which is not listed here. \r\n\r\n    static &lt;T&gt; void fromArrayToCollection(T[] a, Collection&lt;T&gt; c) {\r\n        for (T o : a) {\r\n            c.add(o); // correct\r\n        }\r\n    }\r\n\r\nBut the following will result in compile time error.\r\n\r\n    static &lt;T&gt; void fromArrayToCollection(T[] a, Collection&lt;?&gt; c) {\r\n        for (T o : a) {\r\n            c.add(o); // compile time error\r\n        }\r\n    }\r\n\r\n ","title":"When to use generic methods and when to use wild-card?","body":"<p>One other difference which is not listed here. </p>\n\n<pre><code>static &lt;T&gt; void fromArrayToCollection(T[] a, Collection&lt;T&gt; c) {\n    for (T o : a) {\n        c.add(o); // correct\n    }\n}\n</code></pre>\n\n<p>But the following will result in compile time error.</p>\n\n<pre><code>static &lt;T&gt; void fromArrayToCollection(T[] a, Collection&lt;?&gt; c) {\n    for (T o : a) {\n        c.add(o); // compile time error\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8049173,"reputation":31,"user_id":6068358,"display_name":"Martin Maletinsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521193200,"creation_date":1521193200,"answer_id":49317401,"question_id":18176594,"body_markdown":"As far as I understand, there is only one use case when wildcard is strictly needed (i.e. can express something that you can not express using explicit type parameters). This is when you need to specify a lower bound.\r\n\r\nApart from that however wildcards serve to write more concise code, as described by the following statements in the document you mention:\r\n\r\n&gt; Generic methods allow type parameters to be used to express\r\n&gt; dependencies among the types of one or more arguments to a method\r\n&gt; and/or its return type. If there isn&#39;t such a dependency, a generic\r\n&gt; method should not be used.\r\n&gt; \r\n&gt; [...]\r\n&gt; \r\n&gt; Using wildcards is clearer and more concise than declaring explicit\r\n&gt; type parameters, and should therefore be preferred whenever possible.\r\n&gt; \r\n&gt; [...]\r\n&gt; \r\n&gt; Wildcards also have the advantage that they can be used outside of\r\n&gt; method signatures, as the types of fields, local variables and arrays.","title":"When to use generic methods and when to use wild-card?","body":"<p>As far as I understand, there is only one use case when wildcard is strictly needed (i.e. can express something that you can not express using explicit type parameters). This is when you need to specify a lower bound.</p>\n\n<p>Apart from that however wildcards serve to write more concise code, as described by the following statements in the document you mention:</p>\n\n<blockquote>\n  <p>Generic methods allow type parameters to be used to express\n  dependencies among the types of one or more arguments to a method\n  and/or its return type. If there isn't such a dependency, a generic\n  method should not be used.</p>\n  \n  <p>[...]</p>\n  \n  <p>Using wildcards is clearer and more concise than declaring explicit\n  type parameters, and should therefore be preferred whenever possible.</p>\n  \n  <p>[...]</p>\n  \n  <p>Wildcards also have the advantage that they can be used outside of\n  method signatures, as the types of fields, local variables and arrays.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12694207,"reputation":148,"user_id":10567048,"display_name":"Arasn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572755934,"creation_date":1572754950,"answer_id":58677406,"question_id":18176594,"body_markdown":"Mainly -&gt; Wildcards enforce generics at the parameter/argument level of a Non-Generic method.\r\nNote. It can also be performed in genericMethod by default, but here instead of ? we can use T itself.\r\n\r\npackage generics;\r\n\r\n    public class DemoWildCard {\r\n    \t\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tDemoWildCard obj = new DemoWildCard();\r\n    \t\t\r\n    \t\tobj.display(new Person&lt;Integer&gt;());\r\n    \t\tobj.display(new Person&lt;String&gt;());\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tvoid display(Person&lt;?&gt; person) {\r\n    \t\t//allows person of Integer,String or anything\r\n    \t\t//This cannnot be done if we use T, because in that case we have to make this method itself generic\r\n    \t\tSystem.out.println(person);\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    class Person&lt;T&gt;{\r\n    \t\r\n    }\r\n\r\nSO wildcard has its specific usecases like this.\r\n\r\n","title":"When to use generic methods and when to use wild-card?","body":"<p>Mainly -> Wildcards enforce generics at the parameter/argument level of a Non-Generic method.\nNote. It can also be performed in genericMethod by default, but here instead of ? we can use T itself.</p>\n\n<p>package generics;</p>\n\n<pre><code>public class DemoWildCard {\n\n\n    public static void main(String[] args) {\n        DemoWildCard obj = new DemoWildCard();\n\n        obj.display(new Person&lt;Integer&gt;());\n        obj.display(new Person&lt;String&gt;());\n\n    }\n\n    void display(Person&lt;?&gt; person) {\n        //allows person of Integer,String or anything\n        //This cannnot be done if we use T, because in that case we have to make this method itself generic\n        System.out.println(person);\n    }\n\n}\n\nclass Person&lt;T&gt;{\n\n}\n</code></pre>\n\n<p>SO wildcard has its specific usecases like this.</p>\n"},{"tags":[],"owner":{"account_id":1913170,"reputation":19646,"user_id":1726413,"accept_rate":50,"display_name":"MagGGG"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598371935,"creation_date":1598371935,"answer_id":63582981,"question_id":18176594,"body_markdown":"**?** means unknown\r\n\r\nThe general rule applies: \r\nYou **can read** from it, but **not write**\r\n\r\n\r\ngiven simple pojo Car\r\n\r\n    class Car {\r\n        void display(){\r\n    \r\n        }\r\n    }\r\n\r\nThis will compile\r\n\r\n    private static &lt;T extends Car&gt; void addExtractedAgain1(List&lt;T&gt; cars) {\r\n        T t = cars.get(1);\r\n        t.display();\r\n        cars.add(t);\r\n    }\r\n    \r\n\r\nThis method won&#39;t compile  \r\n\r\n    private static void addExtractedAgain2(List&lt;? extends Car&gt; cars) {\r\n        Car car = cars.get(1);\r\n        car.display();\r\n        cars.add(car); // will not compile\r\n    }\r\n\r\n\r\nAnother example\r\n\r\n    List&lt;?&gt; hi = Arrays.asList(&quot;Hi&quot;, new Exception(), 0);\r\n\r\n    hi.forEach(o -&gt; {\r\n       o.toString() // it&#39;s ok to call Object methods and methods that don&#39;t need the contained type\r\n    });\r\n    \r\n    hi.add(...) // nothing can be add here won&#39;t compile, we need to tell compiler what the data type is but we do not know\r\n\r\n\r\n\r\n\r\n","title":"When to use generic methods and when to use wild-card?","body":"<p><strong>?</strong> means unknown</p>\n<p>The general rule applies:\nYou <strong>can read</strong> from it, but <strong>not write</strong></p>\n<p>given simple pojo Car</p>\n<pre><code>class Car {\n    void display(){\n\n    }\n}\n</code></pre>\n<p>This will compile</p>\n<pre><code>private static &lt;T extends Car&gt; void addExtractedAgain1(List&lt;T&gt; cars) {\n    T t = cars.get(1);\n    t.display();\n    cars.add(t);\n}\n</code></pre>\n<p>This method won't compile</p>\n<pre><code>private static void addExtractedAgain2(List&lt;? extends Car&gt; cars) {\n    Car car = cars.get(1);\n    car.display();\n    cars.add(car); // will not compile\n}\n</code></pre>\n<p>Another example</p>\n<pre><code>List&lt;?&gt; hi = Arrays.asList(&quot;Hi&quot;, new Exception(), 0);\n\nhi.forEach(o -&gt; {\n   o.toString() // it's ok to call Object methods and methods that don't need the contained type\n});\n\nhi.add(...) // nothing can be add here won't compile, we need to tell compiler what the data type is but we do not know\n</code></pre>\n"}],"owner":{"account_id":1464781,"reputation":4561,"user_id":1377979,"accept_rate":75,"display_name":"benz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80460,"favorite_count":0,"down_vote_count":1,"up_vote_count":161,"accepted_answer_id":18176765,"answer_count":9,"score":160,"last_activity_date":1698024115,"creation_date":1376254533,"question_id":18176594,"body_markdown":"I am reading about generic methods from [OracleDocGenericMethod][1]. I am pretty confused about the comparison when it says when to use wild-card and when to use generic methods.\r\nQuoting from the document.\r\n\r\n&gt;     interface Collection&lt;E&gt; {\r\n&gt;         public boolean containsAll(Collection&lt;?&gt; c);\r\n&gt;         public boolean addAll(Collection&lt;? extends E&gt; c);\r\n&gt;     }\r\n&gt; \r\n&gt; We could have used generic methods here instead:\r\n&gt; \r\n&gt;     interface Collection&lt;E&gt; {\r\n&gt;         public &lt;T&gt; boolean containsAll(Collection&lt;T&gt; c);\r\n&gt;         public &lt;T extends E&gt; boolean addAll(Collection&lt;T&gt; c);\r\n&gt;         // Hey, type variables can have bounds too!\r\n&gt;     }\r\n&gt; […]\r\n&gt; This tells us that the type argument is being used for polymorphism;\r\n&gt; its only effect is to allow a variety of actual argument types to be\r\n&gt; used at different invocation sites. If that is the case, one should\r\n&gt; use wildcards. Wildcards are designed to support flexible subtyping,\r\n&gt; which is what we&#39;re trying to express here.\r\n\r\nDon&#39;t we think wild card like `(Collection&lt;? extends E&gt; c);` is also supporting kind of\r\npolymorphism? Then why generic method usage is considered not good in this?\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/extra/generics/methods.html\r\n\r\nContinuing ahead, it states,\r\n\r\n&gt; Generic methods allow type parameters to be used to express\r\n&gt; dependencies among the types of one or more arguments to a method\r\n&gt; and/or its return type. If there isn&#39;t such a dependency, a generic\r\n&gt; method should not be used.\r\n\r\nWhat does this mean?\r\n\r\nThey have presented the example\r\n\r\n&gt;     class Collections {\r\n&gt;         public static &lt;T&gt; void copy(List&lt;T&gt; dest, List&lt;? extends T&gt; src) {\r\n&gt;         ...\r\n&gt;     }\r\n&gt; \r\n&gt; […]\r\n&gt;\r\n&gt; We could have written the signature for this method another way,\r\n&gt; without using wildcards at all:\r\n&gt; \r\n&gt;     class Collections {\r\n&gt;         public static &lt;T, S extends T&gt; void copy(List&lt;T&gt; dest, List&lt;S&gt; src) {\r\n&gt;         ...\r\n&gt;     }\r\n\r\nThe document discourages the second declaration and promotes usage of first syntax? What&#39;s the difference between the first and second declaration? Both seems to be doing the same thing?\r\n\r\nCan someone put light on this area.\r\n\r\n","title":"When to use generic methods and when to use wild-card?","body":"<p>I am reading about generic methods from <a href=\"http://docs.oracle.com/javase/tutorial/extra/generics/methods.html\">OracleDocGenericMethod</a>. I am pretty confused about the comparison when it says when to use wild-card and when to use generic methods.\nQuoting from the document.</p>\n\n<blockquote>\n<pre><code>interface Collection&lt;E&gt; {\n    public boolean containsAll(Collection&lt;?&gt; c);\n    public boolean addAll(Collection&lt;? extends E&gt; c);\n}\n</code></pre>\n  \n  <p>We could have used generic methods here instead:</p>\n\n<pre><code>interface Collection&lt;E&gt; {\n    public &lt;T&gt; boolean containsAll(Collection&lt;T&gt; c);\n    public &lt;T extends E&gt; boolean addAll(Collection&lt;T&gt; c);\n    // Hey, type variables can have bounds too!\n}\n</code></pre>\n  \n  <p>[…]\n  This tells us that the type argument is being used for polymorphism;\n  its only effect is to allow a variety of actual argument types to be\n  used at different invocation sites. If that is the case, one should\n  use wildcards. Wildcards are designed to support flexible subtyping,\n  which is what we're trying to express here.</p>\n</blockquote>\n\n<p>Don't we think wild card like <code>(Collection&lt;? extends E&gt; c);</code> is also supporting kind of\npolymorphism? Then why generic method usage is considered not good in this?</p>\n\n<p>Continuing ahead, it states,</p>\n\n<blockquote>\n  <p>Generic methods allow type parameters to be used to express\n  dependencies among the types of one or more arguments to a method\n  and/or its return type. If there isn't such a dependency, a generic\n  method should not be used.</p>\n</blockquote>\n\n<p>What does this mean?</p>\n\n<p>They have presented the example</p>\n\n<blockquote>\n<pre><code>class Collections {\n    public static &lt;T&gt; void copy(List&lt;T&gt; dest, List&lt;? extends T&gt; src) {\n    ...\n}\n</code></pre>\n  \n  <p>[…]</p>\n  \n  <p>We could have written the signature for this method another way,\n  without using wildcards at all:</p>\n\n<pre><code>class Collections {\n    public static &lt;T, S extends T&gt; void copy(List&lt;T&gt; dest, List&lt;S&gt; src) {\n    ...\n}\n</code></pre>\n</blockquote>\n\n<p>The document discourages the second declaration and promotes usage of first syntax? What's the difference between the first and second declaration? Both seems to be doing the same thing?</p>\n\n<p>Can someone put light on this area.</p>\n"},{"tags":["java","android","networking","android-vpn-service"],"owner":{"account_id":15704276,"reputation":123,"user_id":11945017,"display_name":"Anton2319"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698020698,"creation_date":1688048807,"question_id":76582003,"body_markdown":"I have an android app which uses VpnService API to establish a connection to a proxy. My intention is to let DNS queries bypass the proxy (because it can only tunnel TCP, and not UDP, which is used by DNS) and route the rest of the device traffic through it. On SDK 33+ I can do it like this: \r\n```\r\nBuilder builder = new VpnService.Builder();\r\n            ParcelFileDescriptor vpnInterface = builder\r\n                    .setMtu(1500)\r\n                    .addAddress(&quot;26.26.26.1&quot;, 24)\r\n                    .addRoute(&quot;0.0.0.0&quot;, 0)\r\n                    .excludeRoute(new IpPrefix(InetAddress.getByName(&quot;8.8.8.8&quot;), 32))\r\n                    .addDnsServer(&quot;8.8.8.8&quot;)\r\n                    .establish();\r\n```\r\nBut the `excludeRoute` method does not seem to exist on API 32 and lower. Is the only option to add routes like this: \r\n`1.0.0.0/8, \r\n2.0.0.0/8, \r\n3.0.0.0/8, \r\n4.0.0.0/6, \r\n8.0.0.0/13\r\n8.8.0.0/16\r\n8.8.8.0...8.8.8.8/32` \r\nor are there more elegant methods?","title":"Android VpnService route exclusion on API prior to 33","body":"<p>I have an android app which uses VpnService API to establish a connection to a proxy. My intention is to let DNS queries bypass the proxy (because it can only tunnel TCP, and not UDP, which is used by DNS) and route the rest of the device traffic through it. On SDK 33+ I can do it like this:</p>\n<pre><code>Builder builder = new VpnService.Builder();\n            ParcelFileDescriptor vpnInterface = builder\n                    .setMtu(1500)\n                    .addAddress(&quot;26.26.26.1&quot;, 24)\n                    .addRoute(&quot;0.0.0.0&quot;, 0)\n                    .excludeRoute(new IpPrefix(InetAddress.getByName(&quot;8.8.8.8&quot;), 32))\n                    .addDnsServer(&quot;8.8.8.8&quot;)\n                    .establish();\n</code></pre>\n<p>But the <code>excludeRoute</code> method does not seem to exist on API 32 and lower. Is the only option to add routes like this:\n<code>1.0.0.0/8,  2.0.0.0/8,  3.0.0.0/8,  4.0.0.0/6,  8.0.0.0/13 8.8.0.0/16 8.8.8.0...8.8.8.8/32</code>\nor are there more elegant methods?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1698021868,"post_id":77342108,"comment_id":136348598,"body_markdown":"`onClick` in XML doesn&#39;t work in Fragments.","body":"<code>onClick</code> in XML doesn&#39;t work in Fragments."}],"owner":{"account_id":29731090,"reputation":1,"user_id":22785682,"display_name":"Ricardo Castillo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698021911,"answer_count":0,"score":0,"last_activity_date":1698019792,"creation_date":1698019792,"question_id":77342108,"body_markdown":"[It shows there and the xml recognizes it](https://i.stack.imgur.com/fLTWp.png)\r\n\r\n[But there it says no use, and when I use the button it crashes I certainly don&#39;t know what is wrong I used an Android Studio template for creating the app, the Navigation Drawe Views Activity and used the presets for it](https://i.stack.imgur.com/EwXXA.png)\r\n[These](https://i.stack.imgur.com/A1CVh.png)","title":"My void is not getting recognized by Android Studio","body":"<p><a href=\"https://i.stack.imgur.com/fLTWp.png\" rel=\"nofollow noreferrer\">It shows there and the xml recognizes it</a></p>\n<p><a href=\"https://i.stack.imgur.com/EwXXA.png\" rel=\"nofollow noreferrer\">But there it says no use, and when I use the button it crashes I certainly don't know what is wrong I used an Android Studio template for creating the app, the Navigation Drawe Views Activity and used the presets for it</a>\n<a href=\"https://i.stack.imgur.com/A1CVh.png\" rel=\"nofollow noreferrer\">These</a></p>\n"},{"tags":["java","jms","jboss7.x","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1698002524,"post_id":77340599,"comment_id":136347086,"body_markdown":"Asking &quot;what is the best way&quot; to do _anything_ is going to lead to opinion-based answers because what is &quot;best&quot; is dependent on the specifics of your use-case. What is considered best in one context is different from what is best in another context even for seemingly simple questions like this. Please reword your post to ask a clear, concrete question rather than an open-ended, opinion-based question.","body":"Asking &quot;what is the best way&quot; to do <i>anything</i> is going to lead to opinion-based answers because what is &quot;best&quot; is dependent on the specifics of your use-case. What is considered best in one context is different from what is best in another context even for seemingly simple questions like this. Please reword your post to ask a clear, concrete question rather than an open-ended, opinion-based question."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1698002584,"post_id":77340599,"comment_id":136347089,"body_markdown":"How is your Camel application currently loading ActiveMQ Artemis libraries? I assume it&#39;s using a module of some kind. Is that correct? Please elaborate. Thanks!","body":"How is your Camel application currently loading ActiveMQ Artemis libraries? I assume it&#39;s using a module of some kind. Is that correct? Please elaborate. Thanks!"},{"owner":{"account_id":1108029,"reputation":93,"user_id":1099013,"accept_rate":0,"display_name":"Surjit Sen"},"score":0,"creation_date":1698019354,"post_id":77340599,"comment_id":136348420,"body_markdown":"I updated the question as per your suggestion. I will add the answer to the second comment after ascertaining the current process of loading ActiveMQ Artemis libraries.","body":"I updated the question as per your suggestion. I will add the answer to the second comment after ascertaining the current process of loading ActiveMQ Artemis libraries."},{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1698047328,"post_id":77340599,"comment_id":136350796,"body_markdown":"Also Artemis JMS client should be compatible with a newest version of the broker. Do you have a specific need to upgrade the client libraries version ?","body":"Also Artemis JMS client should be compatible with a newest version of the broker. Do you have a specific need to upgrade the client libraries version ?"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1698168104,"post_id":77340599,"comment_id":136369980,"body_markdown":"Any feedback here on how your Camel application is currently loading ActiveMQ Artemis libraries?","body":"Any feedback here on how your Camel application is currently loading ActiveMQ Artemis libraries?"}],"owner":{"account_id":1108029,"reputation":93,"user_id":1099013,"accept_rate":0,"display_name":"Surjit Sen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698019175,"creation_date":1697988781,"question_id":77340599,"body_markdown":"**JMS servers:**\r\nActiveMQ Artemis cluster - version 2.28.0\r\n\r\n**JMS clients:**\r\nApache Camel routes embedded in JBoss EAP 7.4 application servers\r\n\r\nWhat is the recommended/appropriate way to update the ActiveMQ Artemis client libraries to version 2.28.0? There is little documentation available for that.","title":"Update ActiveMQ Artemis client libraries in JBoss EAP 7.4","body":"<p><strong>JMS servers:</strong>\nActiveMQ Artemis cluster - version 2.28.0</p>\n<p><strong>JMS clients:</strong>\nApache Camel routes embedded in JBoss EAP 7.4 application servers</p>\n<p>What is the recommended/appropriate way to update the ActiveMQ Artemis client libraries to version 2.28.0? There is little documentation available for that.</p>\n"},{"tags":["java","arraylist","collections","linked-list"],"comments":[{"owner":{"account_id":35235,"reputation":7975,"user_id":99717,"accept_rate":73,"display_name":"Hawkeye Parker"},"score":10,"creation_date":1476244709,"post_id":322715,"comment_id":67258981,"body_markdown":"See also: [Array versus linked-list](http://stackoverflow.com/questions/166884/array-versus-linked-list?rq=1)","body":"See also: <a href=\"http://stackoverflow.com/questions/166884/array-versus-linked-list?rq=1\">Array versus linked-list</a>"},{"owner":{"account_id":2315538,"reputation":3123,"user_id":2032701,"accept_rate":100,"display_name":"Ruslan"},"score":12,"creation_date":1514315879,"post_id":322715,"comment_id":82934143,"body_markdown":"Just see the quote from the author of LinkedList https://stackoverflow.com/a/42529652/2032701 and you&#39;ll get a practical sense of the issue.","body":"Just see the quote from the author of LinkedList <a href=\"https://stackoverflow.com/a/42529652/2032701\">stackoverflow.com/a/42529652/2032701</a> and you&#39;ll get a practical sense of the issue."},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1651235214,"post_id":322715,"comment_id":127321863,"body_markdown":"Bjarne Stroustrup has also discussed this extensively for C++ `std::vector` (like Java `ArrayList`) and `std::list` (like Java `LinkedList`).","body":"Bjarne Stroustrup has also discussed this extensively for C++ <code>std::vector</code> (like Java <code>ArrayList</code>) and <code>std::list</code> (like Java <code>LinkedList</code>)."}],"answers":[{"comments":[{"owner":{"account_id":7812692,"reputation":3085,"user_id":5908433,"accept_rate":100,"display_name":"Dmitriy Fialkovskiy"},"score":10,"creation_date":1607594564,"post_id":322722,"comment_id":115323958,"body_markdown":"worth to mention here, that `LinkedList` is fast for adding/removing only at first and last positions - then complexity will be O(1), but adding in the middle still will be O(n), because we need to run through approx n/2 elements of `LinkedList`.","body":"worth to mention here, that <code>LinkedList</code> is fast for adding/removing only at first and last positions - then complexity will be O(1), but adding in the middle still will be O(n), because we need to run through approx n/2 elements of <code>LinkedList</code>."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1636108370,"post_id":322722,"comment_id":123474333,"body_markdown":"Is it, though?  [Why is an ArrayList always faster than a LinkedList](https://stackoverflow.com/q/69851017) found that adding 10M items to an ArrayList was faster than adding 10M items to a LinkedList.  (i.e. ArrayList is faster when adding at the end, amortized over having to realloc sometimes.)","body":"Is it, though?  <a href=\"https://stackoverflow.com/q/69851017\">Why is an ArrayList always faster than a LinkedList</a> found that adding 10M items to an ArrayList was faster than adding 10M items to a LinkedList.  (i.e. ArrayList is faster when adding at the end, amortized over having to realloc sometimes.)"}],"tags":[],"owner":{"account_id":16011,"reputation":3242,"user_id":34450,"display_name":"dgtized"},"comment_count":2,"down_vote_count":6,"up_vote_count":93,"is_accepted":false,"score":87,"last_activity_date":1687266486,"creation_date":1227749999,"answer_id":322722,"question_id":322715,"body_markdown":"It&#39;s an efficiency question. `LinkedList` is fast for appending or deleting large elements at the ends of a list, but slow to access a specific element. `ArrayList` is fast for accessing a specific element but can be slow to add to either end, and especially slow to delete in the middle.\r\n\r\n[Array vs ArrayList vs LinkedList vs Vector][1] goes more in depth, as does \r\n[Linked List][2].\r\n\r\n  [1]: https://web.archive.org/web/20090204031044/http://www.javafaq.nu/java-article1111.html\r\n  [2]: http://en.wikipedia.org/wiki/Linked_list","title":"When to use LinkedList over ArrayList in Java?","body":"<p>It's an efficiency question. <code>LinkedList</code> is fast for appending or deleting large elements at the ends of a list, but slow to access a specific element. <code>ArrayList</code> is fast for accessing a specific element but can be slow to add to either end, and especially slow to delete in the middle.</p>\n<p><a href=\"https://web.archive.org/web/20090204031044/http://www.javafaq.nu/java-article1111.html\" rel=\"nofollow noreferrer\">Array vs ArrayList vs LinkedList vs Vector</a> goes more in depth, as does\n<a href=\"http://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">Linked List</a>.</p>\n"},{"comments":[{"owner":{"account_id":89757,"reputation":1189,"user_id":247447,"display_name":"Porculus"},"score":19,"creation_date":1284139312,"post_id":322728,"comment_id":3883857,"body_markdown":"LinkedList is not cheap to add elements to.  It is almost always quicker to add a million elements to an ArrayList than to add them to a LinkedList.  And most lists in real-world code are not even a million elements long.","body":"LinkedList is not cheap to add elements to.  It is almost always quicker to add a million elements to an ArrayList than to add them to a LinkedList.  And most lists in real-world code are not even a million elements long."},{"owner":{"account_id":17723,"reputation":89504,"user_id":39975,"accept_rate":71,"display_name":"Dustin"},"score":11,"creation_date":1284159784,"post_id":322728,"comment_id":3886850,"body_markdown":"At any given point, you know the cost of adding an item to your LinkedList.  The ArrayList you do not (in general).  Adding a single item to an ArrayList containing a million items *could* take a very long time -- it&#39;s an O(n) operation plus double the storage unless you preallocated space.  Adding an item to a LinkedList is O(1).  My last statement stands.","body":"At any given point, you know the cost of adding an item to your LinkedList.  The ArrayList you do not (in general).  Adding a single item to an ArrayList containing a million items <i>could</i> take a very long time -- it&#39;s an O(n) operation plus double the storage unless you preallocated space.  Adding an item to a LinkedList is O(1).  My last statement stands."},{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":4,"creation_date":1336919769,"post_id":322728,"comment_id":13688585,"body_markdown":"Adding a single item to an ArrayList is O(1) no matter it is 1 million or 1 billion. Adding an item to a LinkedList is also O(1). &quot;Adding&quot; means ADDING TO THE END.","body":"Adding a single item to an ArrayList is O(1) no matter it is 1 million or 1 billion. Adding an item to a LinkedList is also O(1). &quot;Adding&quot; means ADDING TO THE END."},{"owner":{"account_id":17723,"reputation":89504,"user_id":39975,"accept_rate":71,"display_name":"Dustin"},"score":0,"creation_date":1336975055,"post_id":322728,"comment_id":13697207,"body_markdown":"You must&#39;ve read the implementation differently than I do.  In my experience, copying a 1 billion element array takes longer than copying a 1 million element array.","body":"You must&#39;ve read the implementation differently than I do.  In my experience, copying a 1 billion element array takes longer than copying a 1 million element array."},{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":0,"creation_date":1337005540,"post_id":322728,"comment_id":13708242,"body_markdown":"when you add element you add it at the end of the array. there is no copying at all. Copying (shifting) happens when you INSERT into the array.","body":"when you add element you add it at the end of the array. there is no copying at all. Copying (shifting) happens when you INSERT into the array."},{"owner":{"account_id":41288,"reputation":15857,"user_id":119929,"display_name":"Stan R."},"score":8,"creation_date":1363643499,"post_id":322728,"comment_id":21924222,"body_markdown":"@kachanov you must misunderstand Dustin. Unless you have declared an array of 1 billion items you will eventually need to resize your array in which case you will need to copy all elements into a new bigger array hence sometimes you will get O (N) however with a linked list you will always get O (1)","body":"@kachanov you must misunderstand Dustin. Unless you have declared an array of 1 billion items you will eventually need to resize your array in which case you will need to copy all elements into a new bigger array hence sometimes you will get O (N) however with a linked list you will always get O (1)"},{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":0,"creation_date":1365639828,"post_id":322728,"comment_id":22709173,"body_markdown":"@Stan R, you must have misunderstood me. If I declare an arry of 1 billion items and adding 99999th item at the end, there is no copying to a bigger array and no resizing.","body":"@Stan R, you must have misunderstood me. If I declare an arry of 1 billion items and adding 99999th item at the end, there is no copying to a bigger array and no resizing."},{"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"score":0,"creation_date":1520853451,"post_id":322728,"comment_id":85470836,"body_markdown":"@Dustin:For `LinkedList` class , I see in Oracle JDK-8 that methods with label - **Positional Access Operations** are implemented - `public E get(int index)` , `public E set(int index, E element)` , `public void add(int index, E element)`  &amp; `public E remove(int index)`  so I am confused about your statement that only **ArrayList is randomly accessible**. even though you haven&#39;t specifically said that LinkedList is not randomly accessible but I guess, you meant that.","body":"@Dustin:For <code>LinkedList</code> class , I see in Oracle JDK-8 that methods with label - <b>Positional Access Operations</b> are implemented - <code>public E get(int index)</code> , <code>public E set(int index, E element)</code> , <code>public void add(int index, E element)</code>  &amp; <code>public E remove(int index)</code>  so I am confused about your statement that only <b>ArrayList is randomly accessible</b>. even though you haven&#39;t specifically said that LinkedList is not randomly accessible but I guess, you meant that."},{"owner":{"account_id":1911430,"reputation":2483,"user_id":1725151,"accept_rate":67,"display_name":"Guildenstern"},"score":0,"creation_date":1614111041,"post_id":322728,"comment_id":117284157,"body_markdown":"Dustin is of course correct that adding to the end of an `ArrayList` is O(n) in the worst case.  Most of the other commenters are talking about the O(1) amortized complexity of the same operation.  So adding to the end of an `ArrayList` might be faster on average.","body":"Dustin is of course correct that adding to the end of an <code>ArrayList</code> is O(n) in the worst case.  Most of the other commenters are talking about the O(1) amortized complexity of the same operation.  So adding to the end of an <code>ArrayList</code> might be faster on average."}],"tags":[],"owner":{"account_id":17723,"reputation":89504,"user_id":39975,"accept_rate":71,"display_name":"Dustin"},"comment_count":9,"down_vote_count":5,"up_vote_count":43,"is_accepted":false,"score":38,"last_activity_date":1524204856,"creation_date":1227750107,"answer_id":322728,"question_id":322715,"body_markdown":"`ArrayList` is randomly accessible, while `LinkedList` is really cheap to expand and remove elements from. For most cases, `ArrayList` is fine.\r\n\r\nUnless you&#39;ve created large lists and measured a bottleneck, you&#39;ll probably never need to worry about the difference.","title":"When to use LinkedList over ArrayList in Java?","body":"<p><code>ArrayList</code> is randomly accessible, while <code>LinkedList</code> is really cheap to expand and remove elements from. For most cases, <code>ArrayList</code> is fine.</p>\n\n<p>Unless you've created large lists and measured a bottleneck, you'll probably never need to worry about the difference.</p>\n"},{"comments":[{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":2,"creation_date":1337309616,"post_id":322729,"comment_id":13803600,"body_markdown":"To find out more do not read, just write the code. and you will find out that ArrayList implementation is faster then LinkedList in insertion and deletion.","body":"To find out more do not read, just write the code. and you will find out that ArrayList implementation is faster then LinkedList in insertion and deletion."}],"tags":[],"owner":{"account_id":151,"reputation":35211,"user_id":188,"accept_rate":100,"display_name":"Matthew Schinckel"},"comment_count":1,"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1524204899,"creation_date":1227750123,"answer_id":322729,"question_id":322715,"body_markdown":"It depends upon what operations you will be doing more on the List.\r\n\r\n`ArrayList` is faster to access an indexed value. It is much worse when inserting or deleting objects.\r\n\r\nTo find out more, read any article that talks about the difference between arrays and linked lists.","title":"When to use LinkedList over ArrayList in Java?","body":"<p>It depends upon what operations you will be doing more on the List.</p>\n\n<p><code>ArrayList</code> is faster to access an indexed value. It is much worse when inserting or deleting objects.</p>\n\n<p>To find out more, read any article that talks about the difference between arrays and linked lists.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"comment_count":0,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1524204953,"creation_date":1227750454,"answer_id":322737,"question_id":322715,"body_markdown":"In addition to the other good arguments above, you should notice `ArrayList` implements `RandomAccess` interface, while `LinkedList` implements `Queue`.\r\n\r\nSo, somehow they address slightly different problems, with difference of efficiency and behavior (see their list of methods).","title":"When to use LinkedList over ArrayList in Java?","body":"<p>In addition to the other good arguments above, you should notice <code>ArrayList</code> implements <code>RandomAccess</code> interface, while <code>LinkedList</code> implements <code>Queue</code>.</p>\n\n<p>So, somehow they address slightly different problems, with difference of efficiency and behavior (see their list of methods).</p>\n"},{"comments":[{"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"score":44,"creation_date":1616723571,"post_id":322742,"comment_id":118099111,"body_markdown":"One thing many people forget is that ArrayList is compact in memory which means that it&#39;s more cache friendly than LinkedList. LinkedList could be spread out all over RAM, while ArrayList is always snuggly packed together to take advantage of  spacial locality. This has important real world ramifications.","body":"One thing many people forget is that ArrayList is compact in memory which means that it&#39;s more cache friendly than LinkedList. LinkedList could be spread out all over RAM, while ArrayList is always snuggly packed together to take advantage of  spacial locality. This has important real world ramifications."},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":6,"creation_date":1642881172,"post_id":322742,"comment_id":125192569,"body_markdown":"@AminM Only the object references are compact. The objects themselves can be scattered... Until we get value types.","body":"@AminM Only the object references are compact. The objects themselves can be scattered... Until we get value types."},{"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"score":5,"creation_date":1642983816,"post_id":322742,"comment_id":125212345,"body_markdown":"@swpalmer certainly.\nHowever, in a LinkedList just to FIND the item you&#39;re looking for you&#39;re touring your RAM layout. Whereas with the ArrayList you can scan through it with very few cache misses. \n\nCache misses are a big deal for performance.","body":"@swpalmer certainly. However, in a LinkedList just to FIND the item you&#39;re looking for you&#39;re touring your RAM layout. Whereas with the ArrayList you can scan through it with very few cache misses.   Cache misses are a big deal for performance."},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":5,"creation_date":1642984745,"post_id":322742,"comment_id":125212474,"body_markdown":"@AminM My point is that to find what you are looking for you likely still need to follow that reference and possibly suffer a cache miss.  Unless all you care about is reference identity.  I get that in the linked case you can suffer the cache miss just getting to the references themselves.  I&#39;m just saying Java arrays suffer from cache misses in another way as well... until Valhalla.","body":"@AminM My point is that to find what you are looking for you likely still need to follow that reference and possibly suffer a cache miss.  Unless all you care about is reference identity.  I get that in the linked case you can suffer the cache miss just getting to the references themselves.  I&#39;m just saying Java arrays suffer from cache misses in another way as well... until Valhalla."},{"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"score":4,"creation_date":1642985013,"post_id":322742,"comment_id":125212530,"body_markdown":"@swpalmer my point is that its significantly less cache misses. In the extreme. Others have posted performance comparisons here. You can be sure that you&#39;ll get much worse performance with a LinkedList almost always.","body":"@swpalmer my point is that its significantly less cache misses. In the extreme. Others have posted performance comparisons here. You can be sure that you&#39;ll get much worse performance with a LinkedList almost always."},{"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"score":1,"creation_date":1646196656,"post_id":322742,"comment_id":126061124,"body_markdown":"Yes, this is crucial -- for most usecases ArrayList performs far better than LinkedList due to better cache locality.","body":"Yes, this is crucial -- for most usecases ArrayList performs far better than LinkedList due to better cache locality."},{"owner":{"account_id":2540519,"reputation":471,"user_id":2206417,"display_name":"Ajay Jayavarapu"},"score":0,"creation_date":1666211572,"post_id":322742,"comment_id":130885164,"body_markdown":"@all - For LinkedList is it not 0{1) for adding the element into list?","body":"@all - For LinkedList is it not 0{1) for adding the element into list?"},{"owner":{"account_id":9686576,"reputation":526,"user_id":7186177,"display_name":"Tod Harter"},"score":0,"creation_date":1671492968,"post_id":322742,"comment_id":132107300,"body_markdown":"No, because all the following elements need to be pushed downward in memory. When you add to the END of the array list it is O(1), unless the list needs to be resized.","body":"No, because all the following elements need to be pushed downward in memory. When you add to the END of the array list it is O(1), unless the list needs to be resized."},{"owner":{"account_id":134429,"reputation":3871,"user_id":336557,"accept_rate":78,"display_name":"Mahm00d"},"score":0,"creation_date":1675783961,"post_id":322742,"comment_id":133000858,"body_markdown":"@TodHarter I think Ajay is right, since the LinkedList class in Java is actually [implemented as a Doubly-linked list](https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html).","body":"@TodHarter I think Ajay is right, since the LinkedList class in Java is actually <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html\" rel=\"nofollow noreferrer\">implemented as a Doubly-linked list</a>."},{"owner":{"account_id":9686576,"reputation":526,"user_id":7186177,"display_name":"Tod Harter"},"score":0,"creation_date":1675913650,"post_id":322742,"comment_id":133031632,"body_markdown":"@Mahm00d You have to traverse the list to find the spot where you are inserting, so it is at least proportionate to the insertion point, O(N) where N is the index to insert at. This means it isn&#39;t NECESSARILY scaled to the size of the list, that is true. The way I said it is kind of poor.","body":"@Mahm00d You have to traverse the list to find the spot where you are inserting, so it is at least proportionate to the insertion point, O(N) where N is the index to insert at. This means it isn&#39;t NECESSARILY scaled to the size of the list, that is true. The way I said it is kind of poor."},{"owner":{"account_id":134429,"reputation":3871,"user_id":336557,"accept_rate":78,"display_name":"Mahm00d"},"score":0,"creation_date":1675936758,"post_id":322742,"comment_id":133036409,"body_markdown":"@TodHarter You are right when we are &#39;inserting&#39;. But with &#39;adding&#39; the elements (to the end of the list), doubly-linked list will be O(1).","body":"@TodHarter You are right when we are &#39;inserting&#39;. But with &#39;adding&#39; the elements (to the end of the list), doubly-linked list will be O(1)."},{"owner":{"account_id":9686576,"reputation":526,"user_id":7186177,"display_name":"Tod Harter"},"score":1,"creation_date":1676043122,"post_id":322742,"comment_id":133063898,"body_markdown":"@Mahm00d Yeah, I thought I noted that, this is also true for ArrayList. Basically LinkedList&#39;s only claim to fame is that insert only requires rewriting 4 pointers, but ArrayList is forced to shift some number of elements, plus possibly resize the whole backing array. Thus the few edge cases where it outperforms an ArrayList.","body":"@Mahm00d Yeah, I thought I noted that, this is also true for ArrayList. Basically LinkedList&#39;s only claim to fame is that insert only requires rewriting 4 pointers, but ArrayList is forced to shift some number of elements, plus possibly resize the whole backing array. Thus the few edge cases where it outperforms an ArrayList."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683819565,"post_id":322742,"comment_id":134428207,"body_markdown":"@TodHarter inserting into a `LinkedList` requires more than rewriting 4 pointers. The insertion operation will always allocate a new node object, which has an object header (at least the size of two pointers), a previous and next pointer, and a reference to the actual element. Then, the previous and next pointers of the adjacent nodes have to be updated. So it’s in the order of magnitude of 7 words/pointers. So the amortized costs of adding to an `ArrayList` may involve multiple copy operations and still outperform `LinkedList`.","body":"@TodHarter inserting into a <code>LinkedList</code> requires more than rewriting 4 pointers. The insertion operation will always allocate a new node object, which has an object header (at least the size of two pointers), a previous and next pointer, and a reference to the actual element. Then, the previous and next pointers of the adjacent nodes have to be updated. So it’s in the order of magnitude of 7 words/pointers. So the amortized costs of adding to an <code>ArrayList</code> may involve multiple copy operations and still outperform <code>LinkedList</code>."}],"tags":[],"owner":{"account_id":7419,"reputation":15224,"user_id":12887,"accept_rate":100,"display_name":"Jonathan Tran"},"comment_count":13,"down_vote_count":5,"up_vote_count":3867,"is_accepted":true,"score":3862,"last_activity_date":1659541529,"creation_date":1227750582,"answer_id":322742,"question_id":322715,"body_markdown":"**Summary** `ArrayList` with `ArrayDeque` are preferable in *many* more use-cases than `LinkedList`. If you&#39;re not sure&amp;nbsp;&amp;mdash; just start with `ArrayList`.\r\n\r\n---\r\n\r\nTLDR, in `ArrayList` accessing an element takes constant time [O(1)] and adding an element takes O(n) time [worst case]. In `LinkedList` inserting an element takes O(n) time and accessing also takes O(n) time but `LinkedList` uses more memory than `ArrayList`.\r\n\r\n`LinkedList` and `ArrayList` are two different implementations of the `List` interface. `LinkedList` implements it with a doubly-linked list. `ArrayList` implements it with a dynamically re-sizing array.\r\n\r\nAs with standard linked list and array operations, the various methods will have different algorithmic runtimes.\r\n\r\nFor [`LinkedList&lt;E&gt;`][1]\r\n\r\n* `get(int index)` is *O(n)* (with *n/4* steps on average), but *O(1)* when `index = 0` or `index = list.size() - 1` (in this case, you can also use `getFirst()` and `getLast()`). **One of the main benefits of** `LinkedList&lt;E&gt;`\r\n* `add(int index, E element)` is *O(n)* (with *n/4* steps on average), but *O(1)* when `index = 0` or `index = list.size() - 1` (in this case, you can also use `addFirst()` and `addLast()`/`add()`). **One of the main benefits of** `LinkedList&lt;E&gt;`\r\n* `remove(int index)` is *O(n)* (with *n/4* steps on average), but *O(1)* when `index = 0` or `index = list.size() - 1` (in this case, you can also use `removeFirst()` and `removeLast()`). **One of the main benefits of** `LinkedList&lt;E&gt;`\r\n* `Iterator.remove()` is *O(1)*. **One of the main benefits of** `LinkedList&lt;E&gt;`\r\n* `ListIterator.add(E element)` is *O(1)*. **One of the main benefits of** `LinkedList&lt;E&gt;`\r\n\r\n&lt;sup&gt;Note: Many of the operations need *n/4* steps on average, *constant* number of steps in the best case (e.g. index = 0), and *n/2* steps in worst case (middle of list)&lt;/sup&gt;\r\n\r\nFor [`ArrayList&lt;E&gt;`][2]\r\n\r\n* `get(int index)` is *O(1)*. **Main benefit of** `ArrayList&lt;E&gt;`\r\n* `add(E element)` is *O(1)* amortized, but *O(n)* worst-case since the array must be resized and copied\r\n* `add(int index, E element)` is *O(n)* (with *n/2* steps on average)\r\n* `remove(int index)` is *O(n)* (with *n/2* steps on average)\r\n* `Iterator.remove()` is *O(n)* (with *n/2* steps on average)\r\n* `ListIterator.add(E element)` is *O(n)* (with *n/2* steps on average)\r\n\r\n&lt;sup&gt;Note: Many of the operations need *n/2* steps on average, *constant* number of steps in the best case (end of list), *n* steps in the worst case (start of list)&lt;/sup&gt;\r\n\r\n`LinkedList&lt;E&gt;` allows for constant-time insertions or removals *using iterators*, but only sequential access of elements. In other words, you can walk the list forwards or backwards, but finding a position in the list takes time proportional to the size of the list. Javadoc says *&quot;operations that index into the list will traverse the list from the beginning or the end, whichever is closer&quot;*, so those methods are *O(n)* (*n/4* steps) on average, though *O(1)* for `index = 0`.\r\n\r\n`ArrayList&lt;E&gt;`, on the other hand, allow fast random read access, so you can grab any element in constant time. But adding or removing from anywhere but the end requires shifting all the latter elements over, either to make an opening or fill the gap. Also, if you add more elements than the capacity of the underlying array, a new array (1.5 times the size) is allocated, and the old array is copied to the new one, so adding to an `ArrayList` is *O(n)* in the worst case but constant on average.\r\n\r\nSo depending on the operations you intend to do, you should choose the implementations accordingly. Iterating over either kind of List is practically equally cheap. (Iterating over an `ArrayList` is technically faster, but unless you&#39;re doing something really performance-sensitive, you shouldn&#39;t worry about this -- they&#39;re both constants.)\r\n\r\nThe main benefits of using a `LinkedList` arise when you re-use existing iterators to insert and remove elements. These operations can then be done in *O(1)* by changing the list locally only. In an array list, the remainder of the array needs to be *moved* (i.e. copied). On the other side, seeking in a `LinkedList` means following the links in *O(n)* (*n/2* steps) for worst case, whereas in an `ArrayList` the desired position can be computed mathematically and accessed in *O(1)*.\r\n\r\nAnother benefit of using a `LinkedList` arises when you add or remove from the head of the list, since those operations are *O(1)*, while they are *O(n)* for `ArrayList`. Note that `ArrayDeque` may be a good alternative to `LinkedList` for adding and removing from the head, but it is not a `List`.\r\n\r\nAlso, if you have large lists, keep in mind that memory usage is also different. Each element of a `LinkedList` has more overhead since pointers to the next and previous elements are also stored. `ArrayLists` don&#39;t have this overhead. However, `ArrayLists` take up as much memory as is allocated for the capacity, regardless of whether elements have actually been added.\r\n\r\nThe default initial capacity of an `ArrayList` is pretty small (10 from Java 1.4 - 1.8). But since the underlying implementation is an array, the array must be resized if you add a lot of elements. To avoid the high cost of resizing when you know you&#39;re going to add a lot of elements, construct the `ArrayList` with a higher initial capacity.\r\n\r\n [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html\r\n [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\r\n\r\nIf the data structures perspective is used to understand the two structures, a LinkedList is basically a sequential data structure which contains a head Node. The Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it. So, we can assert it is a recursive data structure (a Node contains another Node which has another Node and so on...). Addition of elements takes linear time in LinkedList as stated above.\r\n\r\nAn ArrayList is a growable array. It is just like a regular array. Under the hood, when an element is added, and the ArrayList is already full to capacity, it creates another array with a size which is greater than previous size. The elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices. \r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p><strong>Summary</strong> <code>ArrayList</code> with <code>ArrayDeque</code> are preferable in <em>many</em> more use-cases than <code>LinkedList</code>. If you're not sure — just start with <code>ArrayList</code>.</p>\n<hr />\n<p>TLDR, in <code>ArrayList</code> accessing an element takes constant time [O(1)] and adding an element takes O(n) time [worst case]. In <code>LinkedList</code> inserting an element takes O(n) time and accessing also takes O(n) time but <code>LinkedList</code> uses more memory than <code>ArrayList</code>.</p>\n<p><code>LinkedList</code> and <code>ArrayList</code> are two different implementations of the <code>List</code> interface. <code>LinkedList</code> implements it with a doubly-linked list. <code>ArrayList</code> implements it with a dynamically re-sizing array.</p>\n<p>As with standard linked list and array operations, the various methods will have different algorithmic runtimes.</p>\n<p>For <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html\" rel=\"noreferrer\"><code>LinkedList&lt;E&gt;</code></a></p>\n<ul>\n<li><code>get(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>getFirst()</code> and <code>getLast()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>add(int index, E element)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>addFirst()</code> and <code>addLast()</code>/<code>add()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>removeFirst()</code> and <code>removeLast()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>Iterator.remove()</code> is <em>O(1)</em>. <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>ListIterator.add(E element)</code> is <em>O(1)</em>. <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n</ul>\n<p><sup>Note: Many of the operations need <em>n/4</em> steps on average, <em>constant</em> number of steps in the best case (e.g. index = 0), and <em>n/2</em> steps in worst case (middle of list)</sup></p>\n<p>For <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList&lt;E&gt;</code></a></p>\n<ul>\n<li><code>get(int index)</code> is <em>O(1)</em>. <strong>Main benefit of</strong> <code>ArrayList&lt;E&gt;</code></li>\n<li><code>add(E element)</code> is <em>O(1)</em> amortized, but <em>O(n)</em> worst-case since the array must be resized and copied</li>\n<li><code>add(int index, E element)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>Iterator.remove()</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>ListIterator.add(E element)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n</ul>\n<p><sup>Note: Many of the operations need <em>n/2</em> steps on average, <em>constant</em> number of steps in the best case (end of list), <em>n</em> steps in the worst case (start of list)</sup></p>\n<p><code>LinkedList&lt;E&gt;</code> allows for constant-time insertions or removals <em>using iterators</em>, but only sequential access of elements. In other words, you can walk the list forwards or backwards, but finding a position in the list takes time proportional to the size of the list. Javadoc says <em>&quot;operations that index into the list will traverse the list from the beginning or the end, whichever is closer&quot;</em>, so those methods are <em>O(n)</em> (<em>n/4</em> steps) on average, though <em>O(1)</em> for <code>index = 0</code>.</p>\n<p><code>ArrayList&lt;E&gt;</code>, on the other hand, allow fast random read access, so you can grab any element in constant time. But adding or removing from anywhere but the end requires shifting all the latter elements over, either to make an opening or fill the gap. Also, if you add more elements than the capacity of the underlying array, a new array (1.5 times the size) is allocated, and the old array is copied to the new one, so adding to an <code>ArrayList</code> is <em>O(n)</em> in the worst case but constant on average.</p>\n<p>So depending on the operations you intend to do, you should choose the implementations accordingly. Iterating over either kind of List is practically equally cheap. (Iterating over an <code>ArrayList</code> is technically faster, but unless you're doing something really performance-sensitive, you shouldn't worry about this -- they're both constants.)</p>\n<p>The main benefits of using a <code>LinkedList</code> arise when you re-use existing iterators to insert and remove elements. These operations can then be done in <em>O(1)</em> by changing the list locally only. In an array list, the remainder of the array needs to be <em>moved</em> (i.e. copied). On the other side, seeking in a <code>LinkedList</code> means following the links in <em>O(n)</em> (<em>n/2</em> steps) for worst case, whereas in an <code>ArrayList</code> the desired position can be computed mathematically and accessed in <em>O(1)</em>.</p>\n<p>Another benefit of using a <code>LinkedList</code> arises when you add or remove from the head of the list, since those operations are <em>O(1)</em>, while they are <em>O(n)</em> for <code>ArrayList</code>. Note that <code>ArrayDeque</code> may be a good alternative to <code>LinkedList</code> for adding and removing from the head, but it is not a <code>List</code>.</p>\n<p>Also, if you have large lists, keep in mind that memory usage is also different. Each element of a <code>LinkedList</code> has more overhead since pointers to the next and previous elements are also stored. <code>ArrayLists</code> don't have this overhead. However, <code>ArrayLists</code> take up as much memory as is allocated for the capacity, regardless of whether elements have actually been added.</p>\n<p>The default initial capacity of an <code>ArrayList</code> is pretty small (10 from Java 1.4 - 1.8). But since the underlying implementation is an array, the array must be resized if you add a lot of elements. To avoid the high cost of resizing when you know you're going to add a lot of elements, construct the <code>ArrayList</code> with a higher initial capacity.</p>\n<p>If the data structures perspective is used to understand the two structures, a LinkedList is basically a sequential data structure which contains a head Node. The Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it. So, we can assert it is a recursive data structure (a Node contains another Node which has another Node and so on...). Addition of elements takes linear time in LinkedList as stated above.</p>\n<p>An ArrayList is a growable array. It is just like a regular array. Under the hood, when an element is added, and the ArrayList is already full to capacity, it creates another array with a size which is greater than previous size. The elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":96,"up_vote_count":405,"is_accepted":false,"score":309,"last_activity_date":1613831177,"creation_date":1227795616,"answer_id":323889,"question_id":322715,"body_markdown":"`ArrayList` is what you want. `LinkedList` is almost always a (performance) bug.\r\n\r\nWhy `LinkedList` sucks:\r\n\r\n  - It uses lots of small memory objects, and therefore impacts performance across the process.\r\n  - Lots of small objects are bad for cache-locality.\r\n  - Any indexed operation requires a traversal, i.e. has O(n) performance. This is not obvious in the source code, leading to algorithms O(n) slower than if `ArrayList` was used.\r\n  - Getting good performance is tricky.\r\n  - Even when big-O performance is the same as `ArrayList`, it is probably going to be significantly slower anyway.\r\n  - It&#39;s jarring to see `LinkedList` in source because it is probably the wrong choice.","title":"When to use LinkedList over ArrayList in Java?","body":"<p><code>ArrayList</code> is what you want. <code>LinkedList</code> is almost always a (performance) bug.</p>\n<p>Why <code>LinkedList</code> sucks:</p>\n<ul>\n<li>It uses lots of small memory objects, and therefore impacts performance across the process.</li>\n<li>Lots of small objects are bad for cache-locality.</li>\n<li>Any indexed operation requires a traversal, i.e. has O(n) performance. This is not obvious in the source code, leading to algorithms O(n) slower than if <code>ArrayList</code> was used.</li>\n<li>Getting good performance is tricky.</li>\n<li>Even when big-O performance is the same as <code>ArrayList</code>, it is probably going to be significantly slower anyway.</li>\n<li>It's jarring to see <code>LinkedList</code> in source because it is probably the wrong choice.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":89757,"reputation":1189,"user_id":247447,"display_name":"Porculus"},"score":4,"creation_date":1284139232,"post_id":324953,"comment_id":3883841,"body_markdown":"For small lists, ArrayList.add(0) is still always going to be faster than LinkedList.addFirst().","body":"For small lists, ArrayList.add(0) is still always going to be faster than LinkedList.addFirst()."},{"owner":{"account_id":3796499,"reputation":5874,"user_id":3151415,"accept_rate":65,"display_name":"garg10may"},"score":1,"creation_date":1474373228,"post_id":324953,"comment_id":66496030,"body_markdown":"@Porculus I am constantly hearing this argument that for small lists ArrayList.add(0) will be faster, this small is how much small? 10 elements, 10 million, ?","body":"@Porculus I am constantly hearing this argument that for small lists ArrayList.add(0) will be faster, this small is how much small? 10 elements, 10 million, ?"},{"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"score":1,"creation_date":1474469592,"post_id":324953,"comment_id":66545763,"body_markdown":"@garg10may small is less than 10.","body":"@garg10may small is less than 10."},{"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"score":1,"creation_date":1583255226,"post_id":324953,"comment_id":107051511,"body_markdown":"@Porculus small means less than the max capacity of the internal array underlying the ArrayList.","body":"@Porculus small means less than the max capacity of the internal array underlying the ArrayList."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1692075379,"post_id":324953,"comment_id":135572440,"body_markdown":"As of JDK 21, all lists (including ArrayList) have addFirst/addLast, getFirst/getLast, and removeFirst/removeLast methods. On ArrayList the implementation of addFirst(e) is essentially add(0, e) but if you&#39;re after prettiness these methods are all on ArrayList now.","body":"As of JDK 21, all lists (including ArrayList) have addFirst/addLast, getFirst/getLast, and removeFirst/removeLast methods. On ArrayList the implementation of addFirst(e) is essentially add(0, e) but if you&#39;re after prettiness these methods are all on ArrayList now."}],"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"comment_count":5,"down_vote_count":5,"up_vote_count":30,"is_accepted":false,"score":25,"last_activity_date":1524205006,"creation_date":1227837855,"answer_id":324953,"question_id":322715,"body_markdown":"If your code has `add(0)` and `remove(0)`, use a `LinkedList` and it&#39;s prettier `addFirst()` and `removeFirst()` methods. Otherwise, use `ArrayList`.\r\n\r\nAnd of course, [Guava][1]&#39;s [ImmutableList][2] is your best friend.\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableList.html","title":"When to use LinkedList over ArrayList in Java?","body":"<p>If your code has <code>add(0)</code> and <code>remove(0)</code>, use a <code>LinkedList</code> and it's prettier <code>addFirst()</code> and <code>removeFirst()</code> methods. Otherwise, use <code>ArrayList</code>.</p>\n\n<p>And of course, <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableList.html\" rel=\"noreferrer\">ImmutableList</a> is your best friend.</p>\n"},{"comments":[{"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"score":41,"creation_date":1325257292,"post_id":882151,"comment_id":10792610,"body_markdown":"From Java 6 you can use `ArrayDeque`. http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html","body":"From Java 6 you can use <code>ArrayDeque</code>. <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html</a>"},{"owner":{"account_id":1341888,"reputation":1756,"user_id":1840613,"display_name":"Jeremy List"},"score":1,"creation_date":1430359947,"post_id":882151,"comment_id":48036368,"body_markdown":"`ArrayDeque` is slower than `LinkedList` unless all operations are at the same end. It&#39;s OK when used as a stack but it doesn&#39;t make a good queue.","body":"<code>ArrayDeque</code> is slower than <code>LinkedList</code> unless all operations are at the same end. It&#39;s OK when used as a stack but it doesn&#39;t make a good queue."},{"owner":{"account_id":291407,"reputation":1525,"user_id":593533,"accept_rate":17,"display_name":"Henno Vermeulen"},"score":4,"creation_date":1432289938,"post_id":882151,"comment_id":48875970,"body_markdown":"Untrue - at least for Oracle&#39;s implementation in jdk1.7.0_60 and in the following test. I created a test where I loop for 10 million times and I have a Deque of 10 million random Integers. Inside the loop I poll one element from and offer a constant element. On my computer, LinkedList is over 10 times slower than ArrayDeque and uses less memory). The reason is that unlike ArrayList, ArrayDeque keeps a pointer to the head of the array so that it doesn&#39;t have to move all elements when the head is removed.","body":"Untrue - at least for Oracle&#39;s implementation in jdk1.7.0_60 and in the following test. I created a test where I loop for 10 million times and I have a Deque of 10 million random Integers. Inside the loop I poll one element from and offer a constant element. On my computer, LinkedList is over 10 times slower than ArrayDeque and uses less memory). The reason is that unlike ArrayList, ArrayDeque keeps a pointer to the head of the array so that it doesn&#39;t have to move all elements when the head is removed."},{"owner":{"account_id":291407,"reputation":1525,"user_id":593533,"accept_rate":17,"display_name":"Henno Vermeulen"},"score":0,"creation_date":1432290518,"post_id":882151,"comment_id":48876313,"body_markdown":"This was in reply to Jeremy. Daniel is right. If I use a List as a queue in the same test, ArrayList is 300 times slower than LinkedList if I reduce both the loop and queue size to 300_000. I&#39;m not even going to try the 10 million times. I guess the mentioned CircularArrayList is similar to ArrayDeque in keeping a pointer to the head instead of shifting elements.","body":"This was in reply to Jeremy. Daniel is right. If I use a List as a queue in the same test, ArrayList is 300 times slower than LinkedList if I reduce both the loop and queue size to 300_000. I&#39;m not even going to try the 10 million times. I guess the mentioned CircularArrayList is similar to ArrayDeque in keeping a pointer to the head instead of shifting elements."},{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":8,"creation_date":1434555887,"post_id":882151,"comment_id":49831707,"body_markdown":"`ArrayDeque` is likely to be faster than `Stack` when used as a stack, and faster than `LinkedList` when used as a queue.","body":"<code>ArrayDeque</code> is likely to be faster than <code>Stack</code> when used as a stack, and faster than <code>LinkedList</code> when used as a queue."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":8,"creation_date":1448750875,"post_id":882151,"comment_id":55711038,"body_markdown":"Note that akhil_mittal&#39;s comment is a quote from the `ArrayDeque` documentation.","body":"Note that akhil_mittal&#39;s comment is a quote from the <code>ArrayDeque</code> documentation."}],"tags":[],"owner":{"account_id":37536,"reputation":23193,"user_id":107331,"accept_rate":80,"display_name":"Daniel Martin"},"comment_count":6,"down_vote_count":4,"up_vote_count":127,"is_accepted":false,"score":123,"last_activity_date":1242732080,"creation_date":1242732080,"answer_id":882151,"question_id":322715,"body_markdown":"Yeah, I know, this is an ancient question, but I&#39;ll throw in my two cents:\r\n\r\nLinkedList is *almost always* the wrong choice, performance-wise.  There are some very specific algorithms where a LinkedList is called for, but those are very, very rare and the algorithm will usually specifically depend on LinkedList&#39;s ability to insert and delete elements in the middle of the list relatively quickly, once you&#39;ve navigated there with a ListIterator.\r\n\r\nThere is one common use case in which LinkedList outperforms ArrayList: that of a queue.  However, if your goal is performance, instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time, and can afford to allocate all the memory up front), or this [CircularArrayList implementation][1].  (Yes, it&#39;s from 2001, so you&#39;ll need to generify it, but I got comparable performance ratios to what&#39;s quoted in the article just now in a recent JVM)\r\n\r\n  [1]: http://www.javaspecialists.eu/archive/Issue027.html\r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Yeah, I know, this is an ancient question, but I'll throw in my two cents:</p>\n\n<p>LinkedList is <em>almost always</em> the wrong choice, performance-wise.  There are some very specific algorithms where a LinkedList is called for, but those are very, very rare and the algorithm will usually specifically depend on LinkedList's ability to insert and delete elements in the middle of the list relatively quickly, once you've navigated there with a ListIterator.</p>\n\n<p>There is one common use case in which LinkedList outperforms ArrayList: that of a queue.  However, if your goal is performance, instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time, and can afford to allocate all the memory up front), or this <a href=\"http://www.javaspecialists.eu/archive/Issue027.html\" rel=\"noreferrer\">CircularArrayList implementation</a>.  (Yes, it's from 2001, so you'll need to generify it, but I got comparable performance ratios to what's quoted in the article just now in a recent JVM)</p>\n"},{"comments":[{"owner":{"account_id":76705,"reputation":8914,"user_id":219394,"display_name":"Kevin Brock"},"score":2,"creation_date":1269304951,"post_id":2496245,"comment_id":2490992,"body_markdown":"How is that? This may be true with linked list data structures but not a Java LinkList object. You can&#39;t just point a `next` from one list to the first node in the second list. The only way is to use `addAll()` which adds elements sequentially, though it is better than looping through and calling `add()` for each element. To do this quickly in O(1) you would need a compositing class (like org.apache.commons.collections.collection.CompositeCollection) but then this would work for any kind of List/Collection.","body":"How is that? This may be true with linked list data structures but not a Java LinkList object. You can&#39;t just point a <code>next</code> from one list to the first node in the second list. The only way is to use <code>addAll()</code> which adds elements sequentially, though it is better than looping through and calling <code>add()</code> for each element. To do this quickly in O(1) you would need a compositing class (like org.apache.commons.collections.collection.CompositeCollectio&zwnj;&#8203;n) but then this would work for any kind of List/Collection."},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":0,"creation_date":1269348466,"post_id":2496245,"comment_id":2494177,"body_markdown":"yes, true. I edited the answer accordingly. but see this answer for &#39;how&#39; to do it with LinkedList: http://stackoverflow.com/questions/2494031/is-there-a-fast-concat-method-for-linked-list-in-java/2494884#2494884","body":"yes, true. I edited the answer accordingly. but see this answer for &#39;how&#39; to do it with LinkedList: <a href=\"http://stackoverflow.com/questions/2494031/is-there-a-fast-concat-method-for-linked-list-in-java/2494884#2494884\" title=\"is there a fast concat method for linked list in java\">stackoverflow.com/questions/2494031/&hellip;</a>"}],"tags":[],"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"comment_count":2,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1454594980,"creation_date":1269297151,"answer_id":2496245,"question_id":322715,"body_markdown":"An important feature of a linked list (which I didn&#39;t read in another answer) is the concatenation of two lists. With an array this is O(n) (+ overhead of some reallocations) with a linked list this is only O(1) or O(2) ;-)\r\n\r\n**Important**: For Java its `LinkedList` this is not true! See https://stackoverflow.com/q/2494031/587642","title":"When to use LinkedList over ArrayList in Java?","body":"<p>An important feature of a linked list (which I didn't read in another answer) is the concatenation of two lists. With an array this is O(n) (+ overhead of some reallocations) with a linked list this is only O(1) or O(2) ;-)</p>\n\n<p><strong>Important</strong>: For Java its <code>LinkedList</code> this is not true! See <a href=\"https://stackoverflow.com/q/2494031/587642\">Is there a fast concat method for linked list in Java?</a></p>\n"},{"comments":[{"owner":{"account_id":89757,"reputation":1189,"user_id":247447,"display_name":"Porculus"},"score":55,"creation_date":1284139395,"post_id":2603253,"comment_id":3883863,"body_markdown":"You can&#39;t compare big-O values directly without thinking about constant factors.  For small lists (and most lists are small), ArrayList&#39;s O(N) is faster than LinkedList&#39;s O(1).","body":"You can&#39;t compare big-O values directly without thinking about constant factors.  For small lists (and most lists are small), ArrayList&#39;s O(N) is faster than LinkedList&#39;s O(1)."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":8,"creation_date":1313685334,"post_id":2603253,"comment_id":8518097,"body_markdown":"I don&#39;t care about small lists performance, and neither does my computer *unless* it is used in a loop somehow.","body":"I don&#39;t care about small lists performance, and neither does my computer <i>unless</i> it is used in a loop somehow."},{"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"score":65,"creation_date":1325257376,"post_id":2603253,"comment_id":10792635,"body_markdown":"LinkedList can&#39;t really insert in the middle in `O(1)`. It has to run through half the list to find the insertion point.","body":"LinkedList can&#39;t really insert in the middle in <code>O(1)</code>. It has to run through half the list to find the insertion point."},{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":11,"creation_date":1336919352,"post_id":2603253,"comment_id":13688504,"body_markdown":"LinkedList: insert in middle O(1) - is WRONG! I found out that even insertion into 1/10th position of the LinkedList size is slower than inserting an element into 1/10th position of an ArrayList. And even worse: the end of collection. inserting into last positions (not the very last) of ArrayList is faster then into last positions (not the very last) of LinkedList","body":"LinkedList: insert in middle O(1) - is WRONG! I found out that even insertion into 1/10th position of the LinkedList size is slower than inserting an element into 1/10th position of an ArrayList. And even worse: the end of collection. inserting into last positions (not the very last) of ArrayList is faster then into last positions (not the very last) of LinkedList"},{"owner":{"account_id":107057,"reputation":3790,"user_id":284830,"accept_rate":20,"display_name":"Michael Munsey"},"score":0,"creation_date":1337640222,"post_id":2603253,"comment_id":13881187,"body_markdown":"See http://stackoverflow.com/questions/840648/why-is-inserting-in-the-middle-of-a-linked-list-o1","body":"See <a href=\"http://stackoverflow.com/questions/840648/why-is-inserting-in-the-middle-of-a-linked-list-o1\" title=\"why is inserting in the middle of a linked list o1\">stackoverflow.com/questions/840648/&hellip;</a>"},{"owner":{"account_id":1058083,"reputation":76416,"user_id":1060350,"accept_rate":76,"display_name":"Has QUIT--Anony-Mousse"},"score":23,"creation_date":1376813587,"post_id":2603253,"comment_id":26845471,"body_markdown":"@kachanov Inserting in a `LinkedList` *is* `O(1)` **if you have an iterator to the insert position**, i.e. `ListIterator.add` is supposedly `O(1)` for a `LinkedList`.","body":"@kachanov Inserting in a <code>LinkedList</code> <i>is</i> <code>O(1)</code> <b>if you have an iterator to the insert position</b>, i.e. <code>ListIterator.add</code> is supposedly <code>O(1)</code> for a <code>LinkedList</code>."},{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":0,"creation_date":1379319696,"post_id":2603253,"comment_id":27765172,"body_markdown":"@Anony-Mousse: right. &quot;If you have an iterator to the insert position&quot;. But if you don&#39;t have it, inseting in a LinkedList is NOT O(1). As you can see the original post, it says: &quot;insert in middle&quot; it does not say &quot;insert in middle where you have a position found by iterator&quot;","body":"@Anony-Mousse: right. &quot;If you have an iterator to the insert position&quot;. But if you don&#39;t have it, inseting in a LinkedList is NOT O(1). As you can see the original post, it says: &quot;insert in middle&quot; it does not say &quot;insert in middle where you have a position found by iterator&quot;"},{"owner":{"account_id":1058083,"reputation":76416,"user_id":1060350,"accept_rate":76,"display_name":"Has QUIT--Anony-Mousse"},"score":0,"creation_date":1379324423,"post_id":2603253,"comment_id":27767510,"body_markdown":"Bad wording by the author. I&#39;ll edit his answer to clarify. Yes, seeking to the arithemetic average of the lists length will take `O(N)`.","body":"Bad wording by the author. I&#39;ll edit his answer to clarify. Yes, seeking to the arithemetic average of the lists length will take <code>O(N)</code>."},{"owner":{"account_id":107057,"reputation":3790,"user_id":284830,"accept_rate":20,"display_name":"Michael Munsey"},"score":0,"creation_date":1380576080,"post_id":2603253,"comment_id":28246480,"body_markdown":"I might would word it as &quot;Insert after a node.&quot; You can insert after a given node whether you have an iterator or not. I still think insert in the middle means the same thing, and is clearer.","body":"I might would word it as &quot;Insert after a node.&quot; You can insert after a given node whether you have an iterator or not. I still think insert in the middle means the same thing, and is clearer."},{"owner":{"account_id":1345,"reputation":20408,"user_id":1796,"accept_rate":92,"display_name":"Andrei R&#238;nea"},"score":2,"creation_date":1422536929,"post_id":2603253,"comment_id":44794362,"body_markdown":"Nice answer. A small thing though : For `ArrayList` inserting at back is not always O(1). Maybe most of the times. But when it needs to reallocate the internal array a full copy will occur and a cost of O(n) will be incurred.","body":"Nice answer. A small thing though : For <code>ArrayList</code> inserting at back is not always O(1). Maybe most of the times. But when it needs to reallocate the internal array a full copy will occur and a cost of O(n) will be incurred."},{"owner":{"account_id":107057,"reputation":3790,"user_id":284830,"accept_rate":20,"display_name":"Michael Munsey"},"score":3,"creation_date":1423008033,"post_id":2603253,"comment_id":44973013,"body_markdown":"True.  This is still considered amortized O(1), ie http://anh.cs.luc.edu/363/notes/06A_Amortizing.html","body":"True.  This is still considered amortized O(1), ie <a href=\"http://anh.cs.luc.edu/363/notes/06A_Amortizing.html\" rel=\"nofollow noreferrer\">anh.cs.luc.edu/363/notes/06A_Amortizing.html</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1557852769,"post_id":2603253,"comment_id":98901315,"body_markdown":"@Anony-Mousse mind that manipulating a `List` via an iterator will invalidate all other potentially existing iterators of that list, so it is impossible to keep multiple iterators to interesting spots in a large list; you can keep at most one iterator for manipulations which has to be moved to the next location sequentially. This makes the scenario where you have an iterator pointing to the desired position, to make a manipulation in `O(1)` an entirely theoretical one. That’s not a deficiency of linked lists in general, it’s just that Java’s Collection API is not really designed for them.","body":"@Anony-Mousse mind that manipulating a <code>List</code> via an iterator will invalidate all other potentially existing iterators of that list, so it is impossible to keep multiple iterators to interesting spots in a large list; you can keep at most one iterator for manipulations which has to be moved to the next location sequentially. This makes the scenario where you have an iterator pointing to the desired position, to make a manipulation in <code>O(1)</code> an entirely theoretical one. That’s not a deficiency of linked lists in general, it’s just that Java’s Collection API is not really designed for them."}],"tags":[],"owner":{"account_id":107057,"reputation":3790,"user_id":284830,"accept_rate":20,"display_name":"Michael Munsey"},"comment_count":12,"down_vote_count":19,"up_vote_count":210,"is_accepted":false,"score":191,"last_activity_date":1612168124,"creation_date":1270758815,"answer_id":2603253,"question_id":322715,"body_markdown":"    Algorithm\t        ArrayList   LinkedList\r\n    seek front            O(1)         O(1)\r\n    seek back\t          O(1)         O(1)\r\n    seek to index         O(1)         O(N)\r\n    insert at front       O(N)         O(1)\r\n    insert at back        O(1)         O(1)\r\n    insert after an item  O(N)         O(1)\r\n\r\n[Algorithms: Big-Oh Notation](https://web.archive.org/web/20180729155145/http://leepoint.net/algorithms/big-oh/bigoh.html) (archived)\r\n\r\nArrayLists are good for write-once-read-many or appenders, but bad at add/remove from the front or middle.","title":"When to use LinkedList over ArrayList in Java?","body":"<pre><code>Algorithm           ArrayList   LinkedList\nseek front            O(1)         O(1)\nseek back             O(1)         O(1)\nseek to index         O(1)         O(N)\ninsert at front       O(N)         O(1)\ninsert at back        O(1)         O(1)\ninsert after an item  O(N)         O(1)\n</code></pre>\n<p><a href=\"https://web.archive.org/web/20180729155145/http://leepoint.net/algorithms/big-oh/bigoh.html\" rel=\"noreferrer\">Algorithms: Big-Oh Notation</a> (archived)</p>\n<p>ArrayLists are good for write-once-read-many or appenders, but bad at add/remove from the front or middle.</p>\n"},{"tags":[],"owner":{"account_id":1456,"reputation":114321,"user_id":1942,"accept_rate":88,"display_name":"kemiller2002"},"comment_count":0,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1271777521,"creation_date":1271777521,"answer_id":2676424,"question_id":322715,"body_markdown":"An array list is essentially an array with methods to add items etc. (and you should use a generic list instead). It is a collection of items which can be accessed through an indexer  (for example [0]). It implies a progression from one item to the next.\r\n\r\nA linked list specifies a progression from one item to the next (Item a -&gt; item b).  You can get the same effect with an array list, but a linked list absolutely says what item is supposed to follow the previous one. ","title":"When to use LinkedList over ArrayList in Java?","body":"<p>An array list is essentially an array with methods to add items etc. (and you should use a generic list instead). It is a collection of items which can be accessed through an indexer  (for example [0]). It implies a progression from one item to the next.</p>\n\n<p>A linked list specifies a progression from one item to the next (Item a -> item b).  You can get the same effect with an array list, but a linked list absolutely says what item is supposed to follow the previous one. </p>\n"},{"comments":[{"owner":{"account_id":127944,"reputation":12148,"user_id":325452,"accept_rate":71,"display_name":"ingyhere"},"score":9,"creation_date":1351575227,"post_id":4575612,"comment_id":17861094,"body_markdown":"Wouldn&#39;t another solution be managing the size of the list programmatically by using the ArrayList&#39;s ensureCapacity() method? My question is why are so many things being stored in a bunch of brittle data structures when they might better be stored in a caching or db mechanism? I had an interview the other day where they swore up and down about the evils of ArrayList, but I come here and I find that the complexity analysis is all-around better! GREAT POINT FOR DISCUSSION, THOUGH. THANKS!","body":"Wouldn&#39;t another solution be managing the size of the list programmatically by using the ArrayList&#39;s ensureCapacity() method? My question is why are so many things being stored in a bunch of brittle data structures when they might better be stored in a caching or db mechanism? I had an interview the other day where they swore up and down about the evils of ArrayList, but I come here and I find that the complexity analysis is all-around better! GREAT POINT FOR DISCUSSION, THOUGH. THANKS!"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":30,"creation_date":1418847347,"post_id":4575612,"comment_id":43496507,"body_markdown":"*once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts* Actually with LinkedList you murder the garbage collector during full GCs, it has to iterate the overly large LinkedList with cache miss on each node.","body":"<i>once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts</i> Actually with LinkedList you murder the garbage collector during full GCs, it has to iterate the overly large LinkedList with cache miss on each node."},{"owner":{"account_id":4187371,"reputation":4966,"user_id":3430807,"accept_rate":60,"display_name":"Andreas"},"score":1,"creation_date":1434492361,"post_id":4575612,"comment_id":49799103,"body_markdown":"@bestsss What he is saying that you will never trigger a full GC cycle with link lists; the list will grow and shrink in increments of one element and the CMS GC will run continually; no hiccups.","body":"@bestsss What he is saying that you will never trigger a full GC cycle with link lists; the list will grow and shrink in increments of one element and the CMS GC will run continually; no hiccups."},{"owner":{"account_id":2488627,"reputation":1169,"user_id":2166594,"display_name":"Philip Devine"},"score":7,"creation_date":1434722594,"post_id":4575612,"comment_id":49915085,"body_markdown":"That&#39;s... a horrible solution.  you&#39;re basically reliant on the GC cleaning up for you, which is incredibly expensive, when you can just call ensureCapacity() on an arraylist instead...","body":"That&#39;s... a horrible solution.  you&#39;re basically reliant on the GC cleaning up for you, which is incredibly expensive, when you can just call ensureCapacity() on an arraylist instead..."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1467627648,"post_id":4575612,"comment_id":63790739,"body_markdown":"@Andreas: when a list grows and shrinks in increments of one element, there is no problem with `ArrayList` at all, as it doesn’t even need additional memory for that. Considering the possibility that the `ArrayList` has to increase its capacity *once* during the entire life time of a web service as a reason to downgrade performance with a `LinkedList`, is quite strange, especially, if you consider the cost of the web service’s I/O in comparison. Expanding the capacity of an `ArrayList`, even with millions of elements, is rather unlikely to be noticed as latency.","body":"@Andreas: when a list grows and shrinks in increments of one element, there is no problem with <code>ArrayList</code> at all, as it doesn’t even need additional memory for that. Considering the possibility that the <code>ArrayList</code> has to increase its capacity <i>once</i> during the entire life time of a web service as a reason to downgrade performance with a <code>LinkedList</code>, is quite strange, especially, if you consider the cost of the web service’s I/O in comparison. Expanding the capacity of an <code>ArrayList</code>, even with millions of elements, is rather unlikely to be noticed as latency."},{"owner":{"account_id":4187371,"reputation":4966,"user_id":3430807,"accept_rate":60,"display_name":"Andreas"},"score":3,"creation_date":1467690407,"post_id":4575612,"comment_id":63814823,"body_markdown":"@Holger An array list that increments over its capacity allocates a new list with 50% more room. For that increment you need 2.5 times the memory (and you likely need full gc cycle afterwards). I&#39;m not concerned about day to day response time, I&#39;m worried about running out of heap memory when a peak hour hits slightly harder than it hit yesterday and a couple big arraylists deciding they need room for 2.5 times their count for a second or two. One instance of that type of behavior during peak usage blows my sla for the whole month.","body":"@Holger An array list that increments over its capacity allocates a new list with 50% more room. For that increment you need 2.5 times the memory (and you likely need full gc cycle afterwards). I&#39;m not concerned about day to day response time, I&#39;m worried about running out of heap memory when a peak hour hits slightly harder than it hit yesterday and a couple big arraylists deciding they need room for 2.5 times their count for a second or two. One instance of that type of behavior during peak usage blows my sla for the whole month."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":9,"creation_date":1467709492,"post_id":4575612,"comment_id":63822896,"body_markdown":"@Andreas: A `LinkedList` *always* allocates five times the memory than a plain array of references, so an `ArrayList` temporarily requiring 2.5 times still consumes far less memory, even while the memory is not reclaimed. Since large array allocation bypasses the Eden space, they don’t have any impact on GC behavior, unless there is really not enough memory, in which case, the `LinkedList` blew up much earlier…","body":"@Andreas: A <code>LinkedList</code> <i>always</i> allocates five times the memory than a plain array of references, so an <code>ArrayList</code> temporarily requiring 2.5 times still consumes far less memory, even while the memory is not reclaimed. Since large array allocation bypasses the Eden space, they don’t have any impact on GC behavior, unless there is really not enough memory, in which case, the <code>LinkedList</code> blew up much earlier…"}],"tags":[],"owner":{"account_id":238187,"reputation":3894,"user_id":506908,"display_name":"lamont"},"comment_count":7,"down_vote_count":13,"up_vote_count":172,"is_accepted":false,"score":159,"last_activity_date":1667911265,"creation_date":1293913432,"answer_id":4575612,"question_id":322715,"body_markdown":"See 2021 update from author below the original answer.\r\n\r\n--- \r\n**Original answer (2011)**\r\n\r\nAs someone who has been doing operational performance engineering on very large scale SOA web services for about a decade, I would prefer the behavior of LinkedList over ArrayList.  While the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage, while under pressure, which is catastrophic behavior.\r\n\r\nSimilarly, you can get better throughput in an app from the default throughput tenured garbage collector, but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.  Even though the CMS collector takes more resources and does not achieve the same raw throughput, it is a much better choice because it has more predictable and smaller latency.\r\n\r\nArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.  In my experience at my job I cannot ignore worst-case latency.\r\n\r\n**Update (Aug 27, 2021 -- 10 years later)**\r\n\r\nThis answer (my most historically upvoted answer on SO as well) is very likely wrong (for reasons outlined in the comments below).  I&#39;d like to add that ArrayList will optimize for sequential reading of memory and minimize cache-line and TLB misses, etc.  The copying overhead when the array grows past the bounds is likely inconsequential by comparison (and can be done by efficient CPU operations).  This answer is also probably getting worse over time given hardware trends.  The only situations where a LinkedList might make sense would be something highly contrived where you had thousands of Lists any one of which might grow to be GB-sized, but where no good guess could be made at allocation-time of the List and setting them all to GB-sized would blow up the heap.  And if you found some problem like that, then it really does call for reengineering whatever your solution is (and I don&#39;t like to lightly suggest reengineering old code because I myself maintain piles and piles of old code, but that&#39;d be a very good case of where the original design has simply run out of runway and does need to be chucked).  I&#39;ll still leave my decades-old poor opinion up there for you to read though.  Simple, logical and pretty wrong.","title":"When to use LinkedList over ArrayList in Java?","body":"<p>See 2021 update from author below the original answer.</p>\n<hr />\n<p><strong>Original answer (2011)</strong></p>\n<p>As someone who has been doing operational performance engineering on very large scale SOA web services for about a decade, I would prefer the behavior of LinkedList over ArrayList.  While the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage, while under pressure, which is catastrophic behavior.</p>\n<p>Similarly, you can get better throughput in an app from the default throughput tenured garbage collector, but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.  Even though the CMS collector takes more resources and does not achieve the same raw throughput, it is a much better choice because it has more predictable and smaller latency.</p>\n<p>ArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.  In my experience at my job I cannot ignore worst-case latency.</p>\n<p><strong>Update (Aug 27, 2021 -- 10 years later)</strong></p>\n<p>This answer (my most historically upvoted answer on SO as well) is very likely wrong (for reasons outlined in the comments below).  I'd like to add that ArrayList will optimize for sequential reading of memory and minimize cache-line and TLB misses, etc.  The copying overhead when the array grows past the bounds is likely inconsequential by comparison (and can be done by efficient CPU operations).  This answer is also probably getting worse over time given hardware trends.  The only situations where a LinkedList might make sense would be something highly contrived where you had thousands of Lists any one of which might grow to be GB-sized, but where no good guess could be made at allocation-time of the List and setting them all to GB-sized would blow up the heap.  And if you found some problem like that, then it really does call for reengineering whatever your solution is (and I don't like to lightly suggest reengineering old code because I myself maintain piles and piles of old code, but that'd be a very good case of where the original design has simply run out of runway and does need to be chucked).  I'll still leave my decades-old poor opinion up there for you to read though.  Simple, logical and pretty wrong.</p>\n"},{"comments":[{"owner":{"display_name":"user8898216"},"score":5,"creation_date":1510639702,"post_id":7304553,"comment_id":81508110,"body_markdown":"Hi @chharvey , Link only answers get 6 Upvotes ? Please add some points that could support the link .What if oracle changes their link?","body":"Hi @chharvey , Link only answers get 6 Upvotes ? Please add some points that could support the link .What if oracle changes their link?"}],"tags":[],"owner":{"account_id":470475,"reputation":8808,"user_id":877703,"accept_rate":71,"display_name":"chharvey"},"comment_count":1,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1315204432,"creation_date":1315204432,"answer_id":7304553,"question_id":322715,"body_markdown":"See [the Java Tutorials - List Implementations][1].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/collections/implementations/list.html","title":"When to use LinkedList over ArrayList in Java?","body":"<p>See <a href=\"http://download.oracle.com/javase/tutorial/collections/implementations/list.html\" rel=\"noreferrer\">the Java Tutorials - List Implementations</a>.</p>\n"},{"comments":[{"owner":{"account_id":253331,"reputation":22640,"user_id":531954,"accept_rate":69,"display_name":"Danubian Sailor"},"score":1,"creation_date":1367851249,"post_id":7507740,"comment_id":23511481,"body_markdown":"ArrayList need not to be doubled, to be precise. Please check the sources first.","body":"ArrayList need not to be doubled, to be precise. Please check the sources first."},{"owner":{"account_id":1062659,"reputation":2558,"user_id":1063961,"accept_rate":82,"display_name":"Centril"},"score":0,"creation_date":1408614010,"post_id":7507740,"comment_id":39659627,"body_markdown":"It should be noted that your example is flawed... You are removing from string of between: 18 + [2, 12] bytes (&quot;true0false&quot;, &quot;true500000false&quot;), on average 25 bytes, which are the sizes of the elements in the middle. It&#39;s known that as element byte size increases linked list performs better, as list size increases, a contiguous array(list) will do better. Most importantly, you are doing .equals() on strings - which is not a cheap operation. If you instead used integers, I think there would be a difference.","body":"It should be noted that your example is flawed... You are removing from string of between: 18 + [2, 12] bytes (&quot;true0false&quot;, &quot;true500000false&quot;), on average 25 bytes, which are the sizes of the elements in the middle. It&#39;s known that as element byte size increases linked list performs better, as list size increases, a contiguous array(list) will do better. Most importantly, you are doing .equals() on strings - which is not a cheap operation. If you instead used integers, I think there would be a difference."},{"owner":{"account_id":1062659,"reputation":2558,"user_id":1063961,"accept_rate":82,"display_name":"Centril"},"score":0,"creation_date":1408614365,"post_id":7507740,"comment_id":39659830,"body_markdown":"- and that&#39;s probably also why there is so little difference for remove/contains.","body":"- and that&#39;s probably also why there is so little difference for remove/contains."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":4,"creation_date":1442310820,"post_id":7507740,"comment_id":53019724,"body_markdown":"&quot;... *is worse in large volume application*&quot;: This is a misunderstanding. `LinkedList` has far more memory overhead because for every element there is a node object with five fields. On many systems that makes 20 bytes overhead. The average memory overhead per element for `ArrayList` is one and a half word, which makes 6 bytes, and 8 bytes in the worst case.","body":"&quot;... <i>is worse in large volume application</i>&quot;: This is a misunderstanding. <code>LinkedList</code> has far more memory overhead because for every element there is a node object with five fields. On many systems that makes 20 bytes overhead. The average memory overhead per element for <code>ArrayList</code> is one and a half word, which makes 6 bytes, and 8 bytes in the worst case."},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":2,"creation_date":1457635734,"post_id":7507740,"comment_id":59507938,"body_markdown":"I&#39;ve done a better version of your benchmark [here, with results](https://gist.github.com/svanoort/4256d1801d97a2b7eef3) - the append-on-end performance for the arraylist is artificially low for yours, because addAll is giving a storage array of EXACTLY initial size, so the first insert always triggers an arraycopy.  Also, this includes warmup cycles to allow for JIT compilation before data is collected.","body":"I&#39;ve done a better version of your benchmark <a href=\"https://gist.github.com/svanoort/4256d1801d97a2b7eef3\" rel=\"nofollow noreferrer\">here, with results</a> - the append-on-end performance for the arraylist is artificially low for yours, because addAll is giving a storage array of EXACTLY initial size, so the first insert always triggers an arraycopy.  Also, this includes warmup cycles to allow for JIT compilation before data is collected."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1527452414,"post_id":7507740,"comment_id":88123134,"body_markdown":"`Edit/Remove is faster in LinkedList than ArrayList.` That&#39;s a bit too simplified. It depends heavily on where the removal is happening, if it is at the end then ArrayList will be faster, because there is no extra object that has to be GCed at some point.","body":"<code>Edit&#47;Remove is faster in LinkedList than ArrayList.</code> That&#39;s a bit too simplified. It depends heavily on where the removal is happening, if it is at the end then ArrayList will be faster, because there is no extra object that has to be GCed at some point."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1527452516,"post_id":7507740,"comment_id":88123173,"body_markdown":"`ArrayList, backed by Array, which needs to be double the size, is worse in large volume application.` The opposite is true. An array has much less overhead than an additional object created for _each element in the list_, which is what linkedList does.","body":"<code>ArrayList, backed by Array, which needs to be double the size, is worse in large volume application.</code> The opposite is true. An array has much less overhead than an additional object created for <i>each element in the list</i>, which is what linkedList does."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1537459882,"post_id":7507740,"comment_id":91801983,"body_markdown":"LinkedList has a specific (if short) set of uses.  Try performance of deleting WHILE you are iterating over a linked list (iterator.remove()).  The performance difference should be immense.  Also create a list of a few million items using only &quot;addFirst&quot; and see what you get. (ArrayList obviously shouldn&#39;t even have an add first because it&#39;s such a dumb thing to do on an arraylist.)","body":"LinkedList has a specific (if short) set of uses.  Try performance of deleting WHILE you are iterating over a linked list (iterator.remove()).  The performance difference should be immense.  Also create a list of a few million items using only &quot;addFirst&quot; and see what you get. (ArrayList obviously shouldn&#39;t even have an add first because it&#39;s such a dumb thing to do on an arraylist.)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1557853554,"post_id":7507740,"comment_id":98901701,"body_markdown":"@BillK since Java&#160;8, you can use `removeIf(element -&gt; condition)` where it fits, which can be significantly faster for an `ArrayList`, compared to looping and removing via iterator, as it is not required to shift the entire remainder for every individual element. Whether this performs better or worse than `LinkedList` depends on the particular scenario, as a `LinkedList` is O(1) in theory, but removing just a single node requires several memory accesses, which can easily exceed the number needed for the `ArrayList` when removing a significant number of elements.","body":"@BillK since Java 8, you can use <code>removeIf(element -&gt; condition)</code> where it fits, which can be significantly faster for an <code>ArrayList</code>, compared to looping and removing via iterator, as it is not required to shift the entire remainder for every individual element. Whether this performs better or worse than <code>LinkedList</code> depends on the particular scenario, as a <code>LinkedList</code> is O(1) in theory, but removing just a single node requires several memory accesses, which can easily exceed the number needed for the <code>ArrayList</code> when removing a significant number of elements."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1636108758,"post_id":7507740,"comment_id":123474478,"body_markdown":"What does `189,64,981` mean?  Is `,` being used as a decimal point?  If so, why are there two of them in one number?  Are these 3 separate times for 3 separate operations, all in nanoseconds?  Also, if you&#39;d picked something where each compare wasn&#39;t so expensive (like string search), you&#39;d probably have found ArrayList faster for searching.","body":"What does <code>189,64,981</code> mean?  Is <code>,</code> being used as a decimal point?  If so, why are there two of them in one number?  Are these 3 separate times for 3 separate operations, all in nanoseconds?  Also, if you&#39;d picked something where each compare wasn&#39;t so expensive (like string search), you&#39;d probably have found ArrayList faster for searching."},{"owner":{"account_id":5169747,"reputation":11586,"user_id":4138801,"accept_rate":97,"display_name":"Clashsoft"},"score":0,"creation_date":1644765921,"post_id":7507740,"comment_id":125687570,"body_markdown":"I agree with @PeterCordes, the timing table is completely meaningless thanks to the confusing commas. I suppose the numbers are whole numbers (no computer measures sub-nanosecond), but there is no obvious pattern in the comma placement.","body":"I agree with @PeterCordes, the timing table is completely meaningless thanks to the confusing commas. I suppose the numbers are whole numbers (no computer measures sub-nanosecond), but there is no obvious pattern in the comma placement."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1644770632,"post_id":7507740,"comment_id":125688811,"body_markdown":"@Clashsoft: nitpick: timing granularity is somewhat finer than 1 ns on modern x86 CPUs. \n A nanosecond is 4 clock cycles for a 4 GHz CPU, and the usual clock-source of choice (RDTSC) ticks at the reference frequency which is usually about the rated non-turbo frequency.  (e.g. my 4.0 GHz i7-6700k has a TSC frequency of 4008 MHz).  Timing overhead is about 20 cycles though, and more with lfence barriers to make sure OoO exec doesn&#39;t distort timing.  But if you time a repeat loop and then find the *average* per iteration, you can get accurate sub-nanosecond times for single insns like InstLatx64","body":"@Clashsoft: nitpick: timing granularity is somewhat finer than 1 ns on modern x86 CPUs.   A nanosecond is 4 clock cycles for a 4 GHz CPU, and the usual clock-source of choice (RDTSC) ticks at the reference frequency which is usually about the rated non-turbo frequency.  (e.g. my 4.0 GHz i7-6700k has a TSC frequency of 4008 MHz).  Timing overhead is about 20 cycles though, and more with lfence barriers to make sure OoO exec doesn&#39;t distort timing.  But if you time a repeat loop and then find the <i>average</i> per iteration, you can get accurate sub-nanosecond times for single insns like InstLatx64"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1644770768,"post_id":7507740,"comment_id":125688851,"body_markdown":"@Clashsoft: But for operations involving several instructions at least, with potential cache misses, at most 1 digit after the decimal place makes sense if you&#39;re doing a per-operation average cost of a few ns.  But it&#39;s not like times add up linearly over such small chunks anyway on OoO exec CPUs; at that scale a realistic cost model has 3 dimensions: front-end cost, critical path latency, and back-end throughput.  [What considerations go into predicting latency for operations on modern superscalar processors and how can I calculate them by hand?](https://stackoverflow.com/q/51607391)","body":"@Clashsoft: But for operations involving several instructions at least, with potential cache misses, at most 1 digit after the decimal place makes sense if you&#39;re doing a per-operation average cost of a few ns.  But it&#39;s not like times add up linearly over such small chunks anyway on OoO exec CPUs; at that scale a realistic cost model has 3 dimensions: front-end cost, critical path latency, and back-end throughput.  <a href=\"https://stackoverflow.com/q/51607391\">What considerations go into predicting latency for operations on modern superscalar processors and how can I calculate them by hand?</a>"}],"tags":[],"owner":{"account_id":478348,"reputation":2095,"user_id":890381,"display_name":"Ash"},"comment_count":13,"down_vote_count":4,"up_vote_count":65,"is_accepted":false,"score":61,"last_activity_date":1524205403,"creation_date":1316645963,"answer_id":7507740,"question_id":322715,"body_markdown":"Correct or Incorrect: Please execute test locally and decide for yourself!\r\n\r\nEdit/Remove is faster in `LinkedList` than `ArrayList`.\r\n\r\n`ArrayList`, backed by `Array`, which needs to be double the size, is worse in large volume application.\r\n\r\nBelow is the unit test result for each operation.Timing is given in Nanoseconds.\r\n \r\n---\r\n\r\n    Operation                       ArrayList                      LinkedList  \r\n\r\n    AddAll   (Insert)               101,16719                      2623,29291 \r\n\r\n    Add      (Insert-Sequentially)  152,46840                      966,62216\r\n\r\n    Add      (insert-randomly)      36527                          29193\r\n\r\n    remove   (Delete)               20,56,9095                     20,45,4904\r\n\r\n    contains (Search)               186,15,704                     189,64,981\r\n\r\n---                \r\n   \r\nHere&#39;s the code:\r\n\r\n    import org.junit.Assert;\r\n    import org.junit.Test;\r\n    \r\n    import java.util.*;\r\n    \r\n    public class ArrayListVsLinkedList {\r\n        private static final int MAX = 500000;\r\n        String[] strings = maxArray();\r\n    \r\n        ////////////// ADD ALL ////////////////////////////////////////\r\n        @Test\r\n        public void arrayListAddAll() {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n            List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\r\n    \r\n            watch.start();\r\n            arrayList.addAll(stringList);\r\n            watch.totalTime(&quot;Array List addAll() = &quot;);//101,16719 Nanoseconds\r\n        }\r\n    \r\n        @Test\r\n        public void linkedListAddAll() throws Exception {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n    \r\n            watch.start();\r\n            List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\r\n            linkedList.addAll(stringList);\r\n            watch.totalTime(&quot;Linked List addAll() = &quot;);  //2623,29291 Nanoseconds\r\n        }\r\n    \r\n        //Note: ArrayList is 26 time faster here than LinkedList for addAll()\r\n    \r\n        ///////////////// INSERT /////////////////////////////////////////////\r\n        @Test\r\n        public void arrayListAdd() {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\r\n    \r\n            watch.start();\r\n            for (String string : strings)\r\n                arrayList.add(string);\r\n            watch.totalTime(&quot;Array List add() = &quot;);//152,46840 Nanoseconds\r\n        }\r\n    \r\n        @Test\r\n        public void linkedListAdd() {\r\n            Watch watch = new Watch();\r\n    \r\n            List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\r\n            watch.start();\r\n            for (String string : strings)\r\n                linkedList.add(string);\r\n            watch.totalTime(&quot;Linked List add() = &quot;);  //966,62216 Nanoseconds\r\n        }\r\n    \r\n        //Note: ArrayList is 9 times faster than LinkedList for add sequentially\r\n    \r\n        /////////////////// INSERT IN BETWEEN ///////////////////////////////////////\r\n    \r\n        @Test\r\n        public void arrayListInsertOne() {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n            List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX + MAX / 10);\r\n            arrayList.addAll(stringList);\r\n    \r\n            String insertString0 = getString(true, MAX / 2 + 10);\r\n            String insertString1 = getString(true, MAX / 2 + 20);\r\n            String insertString2 = getString(true, MAX / 2 + 30);\r\n            String insertString3 = getString(true, MAX / 2 + 40);\r\n    \r\n            watch.start();\r\n    \r\n            arrayList.add(insertString0);\r\n            arrayList.add(insertString1);\r\n            arrayList.add(insertString2);\r\n            arrayList.add(insertString3);\r\n    \r\n            watch.totalTime(&quot;Array List add() = &quot;);//36527\r\n        }\r\n    \r\n        @Test\r\n        public void linkedListInsertOne() {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n            List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\r\n            linkedList.addAll(stringList);\r\n    \r\n            String insertString0 = getString(true, MAX / 2 + 10);\r\n            String insertString1 = getString(true, MAX / 2 + 20);\r\n            String insertString2 = getString(true, MAX / 2 + 30);\r\n            String insertString3 = getString(true, MAX / 2 + 40);\r\n    \r\n            watch.start();\r\n    \r\n            linkedList.add(insertString0);\r\n            linkedList.add(insertString1);\r\n            linkedList.add(insertString2);\r\n            linkedList.add(insertString3);\r\n    \r\n            watch.totalTime(&quot;Linked List add = &quot;);//29193\r\n        }\r\n    \r\n    \r\n        //Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\r\n    \r\n        ////////////////// DELETE //////////////////////////////////////////////////////\r\n        @Test\r\n        public void arrayListRemove() throws Exception {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n            List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\r\n    \r\n            arrayList.addAll(stringList);\r\n            String searchString0 = getString(true, MAX / 2 + 10);\r\n            String searchString1 = getString(true, MAX / 2 + 20);\r\n    \r\n            watch.start();\r\n            arrayList.remove(searchString0);\r\n            arrayList.remove(searchString1);\r\n            watch.totalTime(&quot;Array List remove() = &quot;);//20,56,9095 Nanoseconds\r\n        }\r\n    \r\n        @Test\r\n        public void linkedListRemove() throws Exception {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\r\n            linkedList.addAll(Arrays.asList(strings));\r\n    \r\n            String searchString0 = getString(true, MAX / 2 + 10);\r\n            String searchString1 = getString(true, MAX / 2 + 20);\r\n    \r\n            watch.start();\r\n            linkedList.remove(searchString0);\r\n            linkedList.remove(searchString1);\r\n            watch.totalTime(&quot;Linked List remove = &quot;);//20,45,4904 Nanoseconds\r\n        }\r\n    \r\n        //Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\r\n    \r\n        ///////////////////// SEARCH ///////////////////////////////////////////\r\n        @Test\r\n        public void arrayListSearch() throws Exception {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; stringList = Arrays.asList(strings);\r\n            List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\r\n    \r\n            arrayList.addAll(stringList);\r\n            String searchString0 = getString(true, MAX / 2 + 10);\r\n            String searchString1 = getString(true, MAX / 2 + 20);\r\n    \r\n            watch.start();\r\n            arrayList.contains(searchString0);\r\n            arrayList.contains(searchString1);\r\n            watch.totalTime(&quot;Array List addAll() time = &quot;);//186,15,704\r\n        }\r\n    \r\n        @Test\r\n        public void linkedListSearch() throws Exception {\r\n            Watch watch = new Watch();\r\n            List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\r\n            linkedList.addAll(Arrays.asList(strings));\r\n    \r\n            String searchString0 = getString(true, MAX / 2 + 10);\r\n            String searchString1 = getString(true, MAX / 2 + 20);\r\n    \r\n            watch.start();\r\n            linkedList.contains(searchString0);\r\n            linkedList.contains(searchString1);\r\n            watch.totalTime(&quot;Linked List addAll() time = &quot;);//189,64,981\r\n        }\r\n    \r\n        //Note: Linked List is 500 Milliseconds faster than ArrayList\r\n    \r\n        class Watch {\r\n            private long startTime;\r\n            private long endTime;\r\n    \r\n            public void start() {\r\n                startTime = System.nanoTime();\r\n            }\r\n    \r\n            private void stop() {\r\n                endTime = System.nanoTime();\r\n            }\r\n    \r\n            public void totalTime(String s) {\r\n                stop();\r\n                System.out.println(s + (endTime - startTime));\r\n            }\r\n        }\r\n    \r\n    \r\n        private String[] maxArray() {\r\n            String[] strings = new String[MAX];\r\n            Boolean result = Boolean.TRUE;\r\n            for (int i = 0; i &lt; MAX; i++) {\r\n                strings[i] = getString(result, i);\r\n                result = !result;\r\n            }\r\n            return strings;\r\n        }\r\n    \r\n        private String getString(Boolean result, int i) {\r\n            return String.valueOf(result) + i + String.valueOf(!result);\r\n        }\r\n    }","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Correct or Incorrect: Please execute test locally and decide for yourself!</p>\n\n<p>Edit/Remove is faster in <code>LinkedList</code> than <code>ArrayList</code>.</p>\n\n<p><code>ArrayList</code>, backed by <code>Array</code>, which needs to be double the size, is worse in large volume application.</p>\n\n<p>Below is the unit test result for each operation.Timing is given in Nanoseconds.</p>\n\n<hr>\n\n<pre><code>Operation                       ArrayList                      LinkedList  \n\nAddAll   (Insert)               101,16719                      2623,29291 \n\nAdd      (Insert-Sequentially)  152,46840                      966,62216\n\nAdd      (insert-randomly)      36527                          29193\n\nremove   (Delete)               20,56,9095                     20,45,4904\n\ncontains (Search)               186,15,704                     189,64,981\n</code></pre>\n\n<hr>\n\n<p>Here's the code:</p>\n\n<pre><code>import org.junit.Assert;\nimport org.junit.Test;\n\nimport java.util.*;\n\npublic class ArrayListVsLinkedList {\n    private static final int MAX = 500000;\n    String[] strings = maxArray();\n\n    ////////////// ADD ALL ////////////////////////////////////////\n    @Test\n    public void arrayListAddAll() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        watch.start();\n        arrayList.addAll(stringList);\n        watch.totalTime(\"Array List addAll() = \");//101,16719 Nanoseconds\n    }\n\n    @Test\n    public void linkedListAddAll() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n\n        watch.start();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(stringList);\n        watch.totalTime(\"Linked List addAll() = \");  //2623,29291 Nanoseconds\n    }\n\n    //Note: ArrayList is 26 time faster here than LinkedList for addAll()\n\n    ///////////////// INSERT /////////////////////////////////////////////\n    @Test\n    public void arrayListAdd() {\n        Watch watch = new Watch();\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        watch.start();\n        for (String string : strings)\n            arrayList.add(string);\n        watch.totalTime(\"Array List add() = \");//152,46840 Nanoseconds\n    }\n\n    @Test\n    public void linkedListAdd() {\n        Watch watch = new Watch();\n\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        watch.start();\n        for (String string : strings)\n            linkedList.add(string);\n        watch.totalTime(\"Linked List add() = \");  //966,62216 Nanoseconds\n    }\n\n    //Note: ArrayList is 9 times faster than LinkedList for add sequentially\n\n    /////////////////// INSERT IN BETWEEN ///////////////////////////////////////\n\n    @Test\n    public void arrayListInsertOne() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX + MAX / 10);\n        arrayList.addAll(stringList);\n\n        String insertString0 = getString(true, MAX / 2 + 10);\n        String insertString1 = getString(true, MAX / 2 + 20);\n        String insertString2 = getString(true, MAX / 2 + 30);\n        String insertString3 = getString(true, MAX / 2 + 40);\n\n        watch.start();\n\n        arrayList.add(insertString0);\n        arrayList.add(insertString1);\n        arrayList.add(insertString2);\n        arrayList.add(insertString3);\n\n        watch.totalTime(\"Array List add() = \");//36527\n    }\n\n    @Test\n    public void linkedListInsertOne() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(stringList);\n\n        String insertString0 = getString(true, MAX / 2 + 10);\n        String insertString1 = getString(true, MAX / 2 + 20);\n        String insertString2 = getString(true, MAX / 2 + 30);\n        String insertString3 = getString(true, MAX / 2 + 40);\n\n        watch.start();\n\n        linkedList.add(insertString0);\n        linkedList.add(insertString1);\n        linkedList.add(insertString2);\n        linkedList.add(insertString3);\n\n        watch.totalTime(\"Linked List add = \");//29193\n    }\n\n\n    //Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\n\n    ////////////////// DELETE //////////////////////////////////////////////////////\n    @Test\n    public void arrayListRemove() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        arrayList.addAll(stringList);\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        arrayList.remove(searchString0);\n        arrayList.remove(searchString1);\n        watch.totalTime(\"Array List remove() = \");//20,56,9095 Nanoseconds\n    }\n\n    @Test\n    public void linkedListRemove() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(Arrays.asList(strings));\n\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        linkedList.remove(searchString0);\n        linkedList.remove(searchString1);\n        watch.totalTime(\"Linked List remove = \");//20,45,4904 Nanoseconds\n    }\n\n    //Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\n\n    ///////////////////// SEARCH ///////////////////////////////////////////\n    @Test\n    public void arrayListSearch() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        arrayList.addAll(stringList);\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        arrayList.contains(searchString0);\n        arrayList.contains(searchString1);\n        watch.totalTime(\"Array List addAll() time = \");//186,15,704\n    }\n\n    @Test\n    public void linkedListSearch() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(Arrays.asList(strings));\n\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        linkedList.contains(searchString0);\n        linkedList.contains(searchString1);\n        watch.totalTime(\"Linked List addAll() time = \");//189,64,981\n    }\n\n    //Note: Linked List is 500 Milliseconds faster than ArrayList\n\n    class Watch {\n        private long startTime;\n        private long endTime;\n\n        public void start() {\n            startTime = System.nanoTime();\n        }\n\n        private void stop() {\n            endTime = System.nanoTime();\n        }\n\n        public void totalTime(String s) {\n            stop();\n            System.out.println(s + (endTime - startTime));\n        }\n    }\n\n\n    private String[] maxArray() {\n        String[] strings = new String[MAX];\n        Boolean result = Boolean.TRUE;\n        for (int i = 0; i &lt; MAX; i++) {\n            strings[i] = getString(result, i);\n            result = !result;\n        }\n        return strings;\n    }\n\n    private String getString(Boolean result, int i) {\n        return String.valueOf(result) + i + String.valueOf(!result);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":0,"creation_date":1651143781,"post_id":7641788,"comment_id":127295986,"body_markdown":"`LinkedList` has a much higher overhead per element (3 pointers per element). `ArrayList` has 1 pointer per element. So even if the `ArrayList` is only half filled, it will never have more overhead than `LinkedList`.","body":"<code>LinkedList</code> has a much higher overhead per element (3 pointers per element). <code>ArrayList</code> has 1 pointer per element. So even if the <code>ArrayList</code> is only half filled, it will never have more overhead than <code>LinkedList</code>."}],"tags":[],"owner":{"account_id":226208,"reputation":2146,"user_id":487117,"accept_rate":70,"display_name":"gaijinco"},"comment_count":1,"down_vote_count":4,"up_vote_count":9,"is_accepted":false,"score":5,"last_activity_date":1317684180,"creation_date":1317684180,"answer_id":7641788,"question_id":322715,"body_markdown":"I have read the responses, but there is one scenario where I always use a LinkedList over an ArrayList that I want to share to hear opinions:\r\n\r\nEvery time I had a method that returns a list of data obtained from a DB I always use a LinkedList.\r\n\r\nMy rationale was that because it is impossible to know exactly how many results am I getting, there will be not memory wasted (as in ArrayList with the difference between the capacity and actual number of elements), and there would be no time wasted trying to duplicate the capacity.\r\n\r\nAs far a ArrayList, I agree that at least you should always use the constructor with the initial capacity, to minimize the duplication of the arrays as much as possible.\r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p>I have read the responses, but there is one scenario where I always use a LinkedList over an ArrayList that I want to share to hear opinions:</p>\n\n<p>Every time I had a method that returns a list of data obtained from a DB I always use a LinkedList.</p>\n\n<p>My rationale was that because it is impossible to know exactly how many results am I getting, there will be not memory wasted (as in ArrayList with the difference between the capacity and actual number of elements), and there would be no time wasted trying to duplicate the capacity.</p>\n\n<p>As far a ArrayList, I agree that at least you should always use the constructor with the initial capacity, to minimize the duplication of the arrays as much as possible.</p>\n"},{"comments":[{"owner":{"account_id":63815,"reputation":18827,"user_id":188704,"display_name":"Heath Hunnicutt"},"score":280,"creation_date":1378426693,"post_id":7671021,"comment_id":27458255,"body_markdown":"The problem with your math is that your graph greatly exaggerates the impact.  You are modelling objects which each contain only an ```int```, so 4 or 8 bytes of data.  In the linked list, there are essentially 4 &quot;words&quot; of overhead.  Your graph thus gives the impression that linked lists use &quot;five times&quot; the storage of array lists.  This is wrong.  The overhead is 16 or 32 bytes per object, as an additive adjustment, not a scaling factor.","body":"The problem with your math is that your graph greatly exaggerates the impact.  You are modelling objects which each contain only an <code>int</code>, so 4 or 8 bytes of data.  In the linked list, there are essentially 4 &quot;words&quot; of overhead.  Your graph thus gives the impression that linked lists use &quot;five times&quot; the storage of array lists.  This is wrong.  The overhead is 16 or 32 bytes per object, as an additive adjustment, not a scaling factor."},{"owner":{"account_id":4550422,"reputation":165,"user_id":3695837,"display_name":"snaran"},"score":0,"creation_date":1697345186,"post_id":7671021,"comment_id":136267025,"body_markdown":"In addition, in many cases the object will not be an integer but a big object.  Say you&#39;re implementing undo in your app, so the object is the change that was made, which might be a lot of bytes.  So LinkedList is still more memory than ArrayList, but only negligibly more.","body":"In addition, in many cases the object will not be an integer but a big object.  Say you&#39;re implementing undo in your app, so the object is the change that was made, which might be a lot of bytes.  So LinkedList is still more memory than ArrayList, but only negligibly more."}],"tags":[],"owner":{"account_id":363563,"reputation":8753,"user_id":707399,"accept_rate":91,"display_name":"Numeron"},"comment_count":2,"down_vote_count":7,"up_vote_count":703,"is_accepted":false,"score":696,"last_activity_date":1544566507,"creation_date":1317883605,"answer_id":7671021,"question_id":322715,"body_markdown":"Thus far, nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a `LinkedList` is &quot;lots more&quot; than an `ArrayList` so I did some number crunching to demonstrate exactly how much both lists take up for N null references.\r\n\r\nSince references are either 32 or 64 bits (even when null) on their relative systems, I have included 4 sets of data for 32 and 64 bit `LinkedLists` and `ArrayLists`.\r\n\r\n**Note:** The sizes shown for the `ArrayList` lines are for *trimmed lists* - In practice, the capacity of the backing array in an `ArrayList` is generally larger than its current element count.\r\n\r\n**Note 2:** *(thanks BeeOnRope)* As CompressedOops is default now from mid JDK6 and up, the values below for 64-bit machines will basically match their 32-bit counterparts, unless of course you specifically turn it off.\r\n\r\n\r\n----------\r\n\r\n\r\n\r\n![Graph of LinkedList and ArrayList No. of Elements x Bytes][2]\r\n\r\n\r\n----------\r\n\r\n\r\nThe result clearly shows that `LinkedList` is a whole lot more than `ArrayList`, especially with a very high element count. If memory is a factor, steer clear of `LinkedLists`.\r\n\r\nThe formulas I used follow, let me know if I have done anything wrong and I will fix it up. &#39;b&#39; is either 4 or 8 for 32 or 64 bit systems, and &#39;n&#39; is the number of elements. Note the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.\r\n\r\n**ArrayList:**\r\n\r\n`ArrayList object header + size integer + modCount integer + array reference + (array oject header + b * n) + MOD(array oject, 8) + MOD(ArrayList object, 8) == 8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8) + MOD(8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8), 8)`\r\n\r\n**LinkedList:**\r\n\r\n`LinkedList object header + size integer + modCount integer + reference to header + reference to footer + (node object overhead + reference to previous element + reference to next element + reference to element) * n) + MOD(node object, 8) * n + MOD(LinkedList object, 8) == 8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n + MOD(8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n, 8)`\r\n\r\n\r\n  [1]: http://creativecommons.org/licenses/by-sa/3.0/\r\n  [2]: http://i.stack.imgur.com/Cq5Ph.png","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Thus far, nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a <code>LinkedList</code> is \"lots more\" than an <code>ArrayList</code> so I did some number crunching to demonstrate exactly how much both lists take up for N null references.</p>\n\n<p>Since references are either 32 or 64 bits (even when null) on their relative systems, I have included 4 sets of data for 32 and 64 bit <code>LinkedLists</code> and <code>ArrayLists</code>.</p>\n\n<p><strong>Note:</strong> The sizes shown for the <code>ArrayList</code> lines are for <em>trimmed lists</em> - In practice, the capacity of the backing array in an <code>ArrayList</code> is generally larger than its current element count.</p>\n\n<p><strong>Note 2:</strong> <em>(thanks BeeOnRope)</em> As CompressedOops is default now from mid JDK6 and up, the values below for 64-bit machines will basically match their 32-bit counterparts, unless of course you specifically turn it off.</p>\n\n<hr>\n\n<p><img src=\"https://i.stack.imgur.com/Cq5Ph.png\" alt=\"Graph of LinkedList and ArrayList No. of Elements x Bytes\"></p>\n\n<hr>\n\n<p>The result clearly shows that <code>LinkedList</code> is a whole lot more than <code>ArrayList</code>, especially with a very high element count. If memory is a factor, steer clear of <code>LinkedLists</code>.</p>\n\n<p>The formulas I used follow, let me know if I have done anything wrong and I will fix it up. 'b' is either 4 or 8 for 32 or 64 bit systems, and 'n' is the number of elements. Note the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.</p>\n\n<p><strong>ArrayList:</strong></p>\n\n<p><code>ArrayList object header + size integer + modCount integer + array reference + (array oject header + b * n) + MOD(array oject, 8) + MOD(ArrayList object, 8) == 8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8) + MOD(8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8), 8)</code></p>\n\n<p><strong>LinkedList:</strong></p>\n\n<p><code>LinkedList object header + size integer + modCount integer + reference to header + reference to footer + (node object overhead + reference to previous element + reference to next element + reference to element) * n) + MOD(node object, 8) * n + MOD(LinkedList object, 8) == 8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n + MOD(8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n, 8)</code></p>\n"},{"comments":[{"owner":{"account_id":363563,"reputation":8753,"user_id":707399,"accept_rate":91,"display_name":"Numeron"},"score":4,"creation_date":1375080010,"post_id":10977140,"comment_id":26175539,"body_markdown":"I wish I could give this more than one -1: LinkedList gives O(N) on all of insert, remove and random access because you have to traverse the list to get to the correct point first. Also it might surprise you to learn that hashmap/table use resizing arrays just like ArrayList and given that the most common usage of lists is to just be indexed by a number, using one of those over an ArrayList is the worst idea.","body":"I wish I could give this more than one -1: LinkedList gives O(N) on all of insert, remove and random access because you have to traverse the list to get to the correct point first. Also it might surprise you to learn that hashmap/table use resizing arrays just like ArrayList and given that the most common usage of lists is to just be indexed by a number, using one of those over an ArrayList is the worst idea."},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":1,"creation_date":1380783483,"post_id":10977140,"comment_id":28330123,"body_markdown":"@Numeron you are right, it wasn&#39;t clear what I answered. Indeed when you try accessing linked list by index, it will be O(n), how ever I meant inserting to linked list by items. Then it&#39;s O(1) and also interacting over all the list it&#39;s same as array list.","body":"@Numeron you are right, it wasn&#39;t clear what I answered. Indeed when you try accessing linked list by index, it will be O(n), how ever I meant inserting to linked list by items. Then it&#39;s O(1) and also interacting over all the list it&#39;s same as array list."}],"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"comment_count":2,"down_vote_count":8,"up_vote_count":6,"is_accepted":false,"score":-2,"last_activity_date":1478174744,"creation_date":1339405686,"answer_id":10977140,"question_id":322715,"body_markdown":"When should I use `LinkedList`? When working with stacks mostly, or when working with buffers.\r\nWhen should I use `ArrayList`? Only when working with indexes,  otherwise you can use HashTable with linked list, then you get:\r\n\r\nHash table + linked list\r\n------------------------\r\n\r\n - Access by key **O(1),**\r\n - Insert by key **O(1),**\r\n - Remove by key **O(1)**\r\n - and there is a trick to implement RemoveAll / SetAll with O(1) when using versioning\r\n\r\nIt seems like a good solution, and in most of the cases it is, how ever you should know:\r\nHashTable takes a lot of disc space, so when you need to manage 1,000,000 elements list it can become a thing that matters. This can happen in server implementations, in clients it is rarely the case.\r\n\r\nAlso take a look at [Red-Black-Tree][1]\r\n\r\n - Random access **Log(n),**\r\n - Insert **Log(n),**\r\n - Remove **Log(n)**\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Red%E2%80%93black_tree","title":"When to use LinkedList over ArrayList in Java?","body":"<p>When should I use <code>LinkedList</code>? When working with stacks mostly, or when working with buffers.\nWhen should I use <code>ArrayList</code>? Only when working with indexes,  otherwise you can use HashTable with linked list, then you get:</p>\n\n<h2>Hash table + linked list</h2>\n\n<ul>\n<li>Access by key <strong>O(1),</strong></li>\n<li>Insert by key <strong>O(1),</strong></li>\n<li>Remove by key <strong>O(1)</strong></li>\n<li>and there is a trick to implement RemoveAll / SetAll with O(1) when using versioning</li>\n</ul>\n\n<p>It seems like a good solution, and in most of the cases it is, how ever you should know:\nHashTable takes a lot of disc space, so when you need to manage 1,000,000 elements list it can become a thing that matters. This can happen in server implementations, in clients it is rarely the case.</p>\n\n<p>Also take a look at <a href=\"http://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow noreferrer\">Red-Black-Tree</a></p>\n\n<ul>\n<li>Random access <strong>Log(n),</strong></li>\n<li>Insert <strong>Log(n),</strong></li>\n<li>Remove <strong>Log(n)</strong></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"score":11,"creation_date":1360284845,"post_id":13253191,"comment_id":20665861,"body_markdown":"&gt;&gt;&gt;&gt; ArrayList add --&gt; O(1) &lt;- not tru. In some cases ArrayList will have to grow to add one more element","body":"&gt;&gt;&gt;&gt; ArrayList add --&gt; O(1) &lt;- not tru. In some cases ArrayList will have to grow to add one more element"},{"owner":{"account_id":3796499,"reputation":5874,"user_id":3151415,"accept_rate":65,"display_name":"garg10may"},"score":2,"creation_date":1474373151,"post_id":13253191,"comment_id":66495967,"body_markdown":"LinkedList remove is not O(1), it would need to search for the element to be removed, therefore worst case O(n) and average O(n/2)","body":"LinkedList remove is not O(1), it would need to search for the element to be removed, therefore worst case O(n) and average O(n/2)"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1570651018,"post_id":13253191,"comment_id":102984088,"body_markdown":"Neither is `LinkedList.add()`, although most of the answers here say so.","body":"Neither is <code>LinkedList.add()</code>, although most of the answers here say so."}],"tags":[],"owner":{"account_id":1611856,"reputation":713,"user_id":1490555,"accept_rate":40,"display_name":"Rajith Delantha"},"comment_count":3,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1524205750,"creation_date":1352212328,"answer_id":13253191,"question_id":322715,"body_markdown":"Here is the Big-O notation in both `ArrayList` and `LinkedList` and also `CopyOnWrite-ArrayList`:\r\n\r\n**ArrayList**\r\n\r\n    get                 O(1)\r\n    add                 O(1)\r\n    contains            O(n)\r\n    next                O(1)\r\n    remove              O(n)\r\n    iterator.remove     O(n)\r\n\r\n**LinkedList**\r\n\r\n    get                 O(n)\r\n    add                 O(1)\r\n    contains            O(n)\r\n    next                O(1)\r\n    remove              O(1)\r\n    iterator.remove     O(1)\r\n\r\n**CopyOnWrite-ArrayList**\r\n\r\n    get                 O(1)\r\n    add                 O(n)\r\n    contains            O(n)\r\n    next                O(1)\r\n    remove              O(n)\r\n    iterator.remove     O(n)\r\n\r\nBased on these you have to decide what to choose. :)","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Here is the Big-O notation in both <code>ArrayList</code> and <code>LinkedList</code> and also <code>CopyOnWrite-ArrayList</code>:</p>\n\n<p><strong>ArrayList</strong></p>\n\n<pre><code>get                 O(1)\nadd                 O(1)\ncontains            O(n)\nnext                O(1)\nremove              O(n)\niterator.remove     O(n)\n</code></pre>\n\n<p><strong>LinkedList</strong></p>\n\n<pre><code>get                 O(n)\nadd                 O(1)\ncontains            O(n)\nnext                O(1)\nremove              O(1)\niterator.remove     O(1)\n</code></pre>\n\n<p><strong>CopyOnWrite-ArrayList</strong></p>\n\n<pre><code>get                 O(1)\nadd                 O(n)\ncontains            O(n)\nnext                O(1)\nremove              O(n)\niterator.remove     O(n)\n</code></pre>\n\n<p>Based on these you have to decide what to choose. :)</p>\n"},{"tags":[],"owner":{"account_id":1259218,"reputation":2475,"user_id":1218010,"display_name":"Ajax"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1524205790,"creation_date":1366356408,"answer_id":16099449,"question_id":322715,"body_markdown":"I know this is an old post, but I honestly can&#39;t believe nobody mentioned that `LinkedList` implements `Deque`.  Just look at the methods in `Deque` (and `Queue`); if you want a fair comparison, try running `LinkedList` against `ArrayDeque` and do a feature-for-feature comparison. ","title":"When to use LinkedList over ArrayList in Java?","body":"<p>I know this is an old post, but I honestly can't believe nobody mentioned that <code>LinkedList</code> implements <code>Deque</code>.  Just look at the methods in <code>Deque</code> (and <code>Queue</code>); if you want a fair comparison, try running <code>LinkedList</code> against <code>ArrayDeque</code> and do a feature-for-feature comparison. </p>\n"},{"comments":[{"owner":{"account_id":320407,"reputation":14632,"user_id":638670,"accept_rate":82,"display_name":"Abbas Gadhia"},"score":4,"creation_date":1383645600,"post_id":16126564,"comment_id":29410920,"body_markdown":"&quot;LinkedList is faster than add/remove&quot;. Wrong, check the answer above http://stackoverflow.com/a/7507740/638670","body":"&quot;LinkedList is faster than add/remove&quot;. Wrong, check the answer above <a href=\"http://stackoverflow.com/a/7507740/638670\">stackoverflow.com/a/7507740/638670</a>"}],"tags":[],"owner":{"account_id":43701,"reputation":2835,"user_id":127859,"accept_rate":80,"display_name":"Ryan"},"comment_count":1,"down_vote_count":6,"up_vote_count":63,"is_accepted":false,"score":57,"last_activity_date":1527416989,"creation_date":1366502627,"answer_id":16126564,"question_id":322715,"body_markdown":"`ArrayList` is essentially an array. `LinkedList` is implemented as a double linked list. \r\n\r\nThe `get` is pretty clear. O(1) for `ArrayList`, because `ArrayList` allow random access by using index. O(n) for `LinkedList`, because it needs to find the index first. Note: there are different versions of `add` and `remove`. \r\n\r\n`LinkedList` is faster in add and remove, but slower in get. In brief, `LinkedList` should be preferred if: \r\n\r\n 1. there are no large number of random access of element \r\n 2. there are a large number of add/remove operations\r\n\r\n=== **ArrayList** ===\r\n\r\n* add(E e) \t\t\r\n      - add at the end of ArrayList\r\n      - require memory resizing cost.  \r\n      - O(n) worst, O(1) amortized\r\n* add(int index, E element) \r\n      - add to a specific index position\r\n      - require shifting &amp; possible memory resizing cost\r\n      - O(n)\r\n* remove(int index)\r\n      - remove a specified element\r\n      - require shifting &amp; possible memory resizing cost\r\n      - O(n)\r\n* remove(Object o) \r\n      - remove the first occurrence of the specified element from this list\r\n      - need to search the element first, and then shifting &amp; possible memory resizing cost\r\n      - O(n)\r\n\r\n=== **LinkedList** ===\r\n\r\n* add(E e)\r\n      - add to the end of the list\r\n      - O(1)\r\n\r\n\r\n* add(int index, E element)\r\n      - insert at specified position\r\n      - need to find the position first\r\n      - O(n)\r\n* remove()\r\n      - remove first element of the list\r\n      - O(1)\r\n* remove(int index)\r\n      - remove element with specified index\r\n      - need to find the element first\r\n      - O(n)\r\n* remove(Object o)\r\n      - remove the first occurrence of the specified element\r\n      - need to find the element first\r\n      - O(n)\r\n\r\nHere is a figure from [programcreek.com][1] (`add` and `remove` are the first type, i.e., add an element at the end of the list and remove the element at the specified position in the list.):\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://www.programcreek.com/2013/03/arraylist-vs-linkedlist-vs-vector/\r\n  [2]: http://i.stack.imgur.com/pdKaZ.png","title":"When to use LinkedList over ArrayList in Java?","body":"<p><code>ArrayList</code> is essentially an array. <code>LinkedList</code> is implemented as a double linked list. </p>\n\n<p>The <code>get</code> is pretty clear. O(1) for <code>ArrayList</code>, because <code>ArrayList</code> allow random access by using index. O(n) for <code>LinkedList</code>, because it needs to find the index first. Note: there are different versions of <code>add</code> and <code>remove</code>. </p>\n\n<p><code>LinkedList</code> is faster in add and remove, but slower in get. In brief, <code>LinkedList</code> should be preferred if: </p>\n\n<ol>\n<li>there are no large number of random access of element </li>\n<li>there are a large number of add/remove operations</li>\n</ol>\n\n<p>=== <strong>ArrayList</strong> ===</p>\n\n<ul>\n<li>add(E e)      \n\n<ul>\n<li>add at the end of ArrayList</li>\n<li>require memory resizing cost.  </li>\n<li>O(n) worst, O(1) amortized</li>\n</ul></li>\n<li>add(int index, E element) \n\n<ul>\n<li>add to a specific index position</li>\n<li>require shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(int index)\n\n<ul>\n<li>remove a specified element</li>\n<li>require shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(Object o) \n\n<ul>\n<li>remove the first occurrence of the specified element from this list</li>\n<li>need to search the element first, and then shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n</ul>\n\n<p>=== <strong>LinkedList</strong> ===</p>\n\n<ul>\n<li><p>add(E e)</p>\n\n<ul>\n<li>add to the end of the list</li>\n<li>O(1)</li>\n</ul></li>\n<li><p>add(int index, E element)</p>\n\n<ul>\n<li>insert at specified position</li>\n<li>need to find the position first</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove()\n\n<ul>\n<li>remove first element of the list</li>\n<li>O(1)</li>\n</ul></li>\n<li>remove(int index)\n\n<ul>\n<li>remove element with specified index</li>\n<li>need to find the element first</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(Object o)\n\n<ul>\n<li>remove the first occurrence of the specified element</li>\n<li>need to find the element first</li>\n<li>O(n)</li>\n</ul></li>\n</ul>\n\n<p>Here is a figure from <a href=\"http://www.programcreek.com/2013/03/arraylist-vs-linkedlist-vs-vector/\" rel=\"noreferrer\">programcreek.com</a> (<code>add</code> and <code>remove</code> are the first type, i.e., add an element at the end of the list and remove the element at the specified position in the list.):</p>\n\n<p><img src=\"https://i.stack.imgur.com/pdKaZ.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"comment_count":0,"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1478688514,"creation_date":1366876658,"answer_id":16209317,"question_id":322715,"body_markdown":"Operation get(i) in ArrayList is faster than LinkedList, because:   \r\n**ArrayList:** Resizable-array implementation of the List interface  \r\n**LinkedList:** Doubly-linked list implementation of the List and Deque interfaces\r\n  \r\nOperations that index into the list will traverse the list from the beginning or the end, whichever is closer to the specified index. ","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Operation get(i) in ArrayList is faster than LinkedList, because:<br>\n<strong>ArrayList:</strong> Resizable-array implementation of the List interface<br>\n<strong>LinkedList:</strong> Doubly-linked list implementation of the List and Deque interfaces</p>\n\n<p>Operations that index into the list will traverse the list from the beginning or the end, whichever is closer to the specified index. </p>\n"},{"tags":[],"owner":{"account_id":6745226,"reputation":2203,"user_id":5197034,"accept_rate":78,"display_name":"pietz"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1599242652,"creation_date":1465677629,"answer_id":37768332,"question_id":322715,"body_markdown":"Both `remove()` and `insert()` have a runtime efficiency of O(n) for both ArrayLists and LinkedLists. However, the reason behind the linear processing time comes from two very different reasons:\r\n\r\nIn an ArrayList, you get to the element in O(1), but actually removing or inserting something makes it O(n) because all the following elements need to be changed.\r\n\r\nIn a LinkedList, it takes O(n) to actually get to the desired element, because we have to start at the very beginning until we reach the desired index. Actually removing or inserting is constant, because we only have to change 1 reference for `remove()` and 2 references for `insert()`.\r\n\r\nWhich of the two is faster for inserting and removing depends on where it happens. If we are closer to the beginning the LinkedList will be faster, because we have to go through relatively few elements. If we are closer to the end an ArrayList will be faster, because we get there in constant time and only have to change the few remaining elements that follow it. When done precisely in the middle the LinkedList will be faster because going through n elements is quicker than moving n values.\r\n\r\nBonus: While there is no way of making these two methods O(1) for an ArrayList, there actually is a way to do this in LinkedLists. Let&#39;s say we want to go through the entire List removing and inserting elements on our way. Usually, you would start from the very beginning for each element using the LinkedList, we could also &quot;save&quot; the current element we&#39;re working on with an Iterator. With the help of the Iterator, we get an O(1) efficiency for `remove()` and `insert()` when working in a LinkedList. Making it the only performance benefit I&#39;m aware of where a LinkedList is always better than an ArrayList.","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Both <code>remove()</code> and <code>insert()</code> have a runtime efficiency of O(n) for both ArrayLists and LinkedLists. However, the reason behind the linear processing time comes from two very different reasons:</p>\n<p>In an ArrayList, you get to the element in O(1), but actually removing or inserting something makes it O(n) because all the following elements need to be changed.</p>\n<p>In a LinkedList, it takes O(n) to actually get to the desired element, because we have to start at the very beginning until we reach the desired index. Actually removing or inserting is constant, because we only have to change 1 reference for <code>remove()</code> and 2 references for <code>insert()</code>.</p>\n<p>Which of the two is faster for inserting and removing depends on where it happens. If we are closer to the beginning the LinkedList will be faster, because we have to go through relatively few elements. If we are closer to the end an ArrayList will be faster, because we get there in constant time and only have to change the few remaining elements that follow it. When done precisely in the middle the LinkedList will be faster because going through n elements is quicker than moving n values.</p>\n<p>Bonus: While there is no way of making these two methods O(1) for an ArrayList, there actually is a way to do this in LinkedLists. Let's say we want to go through the entire List removing and inserting elements on our way. Usually, you would start from the very beginning for each element using the LinkedList, we could also &quot;save&quot; the current element we're working on with an Iterator. With the help of the Iterator, we get an O(1) efficiency for <code>remove()</code> and <code>insert()</code> when working in a LinkedList. Making it the only performance benefit I'm aware of where a LinkedList is always better than an ArrayList.</p>\n"},{"tags":[],"owner":{"account_id":8195956,"reputation":490,"user_id":6168802,"display_name":"Real73"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1478077223,"creation_date":1478077223,"answer_id":40375897,"question_id":322715,"body_markdown":"`ArrayList` and `LinkedList` both implements `List interface`  and their methods and results are almost identical. However there are few differences between them which make one better over another depending on the requirement.\r\n\r\n## ArrayList Vs LinkedList ##\r\n\r\n\r\n1) `Search:` `ArrayList` search operation is pretty fast compared to the `LinkedList` search operation. `get(int index)` in `ArrayList` gives the performance of `O(1)` while `LinkedList` performance is `O(n)`.\r\n\r\n`Reason:` `ArrayList` maintains index based system for its elements as it uses array data structure implicitly which makes it faster for searching an element in the list. On the other side `LinkedList` implements doubly linked list which requires the traversal through all the elements for searching an element.\r\n\r\n2) `Deletion:` `LinkedList` remove operation gives `O(1)` performance while `ArrayList` gives variable performance: `O(n)` in worst case (while removing first element) and `O(1)` in best case (While removing last element).\r\n\r\n&gt; Conclusion: LinkedList element deletion is faster compared to\r\n&gt; ArrayList.\r\n\r\nReason: LinkedList’s each element maintains two pointers (addresses) which points to the both neighbor elements in the list. Hence removal only requires change in the pointer location in the two neighbor nodes (elements) of the node which is going to be removed. While In ArrayList all the elements need to be shifted to fill out the space created by removed element.\r\n\r\n3) `Inserts Performance:` `LinkedList` add method gives `O(1)` performance while `ArrayList` gives `O(n)` in worst case. Reason is same as explained for remove.\r\n\r\n4) `Memory Overhead:` `ArrayList` maintains indexes and element data while `LinkedList` maintains element data and two pointers for neighbor nodes \r\n\r\n&gt; hence the memory consumption is high in LinkedList comparatively.\r\n\r\n## There are few similarities between these classes which are as follows: ##\r\n\r\n \r\n\r\n - Both ArrayList and LinkedList are implementation of List interface.\r\n - They both maintain the elements insertion order which means while displaying ArrayList and LinkedList elements the result set would be having the same order in which the elements got inserted into the List.\r\n - Both these classes are non-synchronized and can be made synchronized explicitly by using Collections.synchronizedList method.\r\n - The `iterator` and `listIterator` returned by these classes are `fail-fast` (if list is structurally modified at any time after the iterator is created, in any way except through the `iterator’s` own remove or add methods, the iterator will `throw` a `ConcurrentModificationException`).\r\n\r\n## When to use LinkedList and when to use ArrayList? ##\r\n\r\n - As explained above the insert and remove operations give good performance `(O(1))` in `LinkedList` compared to `ArrayList(O(n))`.\r\n&gt; Hence if there is a requirement of frequent addition and deletion in application then LinkedList is a best choice.\r\n - Search (`get method`) operations are fast in `Arraylist (O(1))` but not in `LinkedList (O(n))` \r\n&gt;so If there are less add and remove operations and more search operations requirement, ArrayList would be your best bet.\r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p><code>ArrayList</code> and <code>LinkedList</code> both implements <code>List interface</code>  and their methods and results are almost identical. However there are few differences between them which make one better over another depending on the requirement.</p>\n\n<h2>ArrayList Vs LinkedList</h2>\n\n<p>1) <code>Search:</code> <code>ArrayList</code> search operation is pretty fast compared to the <code>LinkedList</code> search operation. <code>get(int index)</code> in <code>ArrayList</code> gives the performance of <code>O(1)</code> while <code>LinkedList</code> performance is <code>O(n)</code>.</p>\n\n<p><code>Reason:</code> <code>ArrayList</code> maintains index based system for its elements as it uses array data structure implicitly which makes it faster for searching an element in the list. On the other side <code>LinkedList</code> implements doubly linked list which requires the traversal through all the elements for searching an element.</p>\n\n<p>2) <code>Deletion:</code> <code>LinkedList</code> remove operation gives <code>O(1)</code> performance while <code>ArrayList</code> gives variable performance: <code>O(n)</code> in worst case (while removing first element) and <code>O(1)</code> in best case (While removing last element).</p>\n\n<blockquote>\n  <p>Conclusion: LinkedList element deletion is faster compared to\n  ArrayList.</p>\n</blockquote>\n\n<p>Reason: LinkedList’s each element maintains two pointers (addresses) which points to the both neighbor elements in the list. Hence removal only requires change in the pointer location in the two neighbor nodes (elements) of the node which is going to be removed. While In ArrayList all the elements need to be shifted to fill out the space created by removed element.</p>\n\n<p>3) <code>Inserts Performance:</code> <code>LinkedList</code> add method gives <code>O(1)</code> performance while <code>ArrayList</code> gives <code>O(n)</code> in worst case. Reason is same as explained for remove.</p>\n\n<p>4) <code>Memory Overhead:</code> <code>ArrayList</code> maintains indexes and element data while <code>LinkedList</code> maintains element data and two pointers for neighbor nodes </p>\n\n<blockquote>\n  <p>hence the memory consumption is high in LinkedList comparatively.</p>\n</blockquote>\n\n<h2>There are few similarities between these classes which are as follows:</h2>\n\n<ul>\n<li>Both ArrayList and LinkedList are implementation of List interface.</li>\n<li>They both maintain the elements insertion order which means while displaying ArrayList and LinkedList elements the result set would be having the same order in which the elements got inserted into the List.</li>\n<li>Both these classes are non-synchronized and can be made synchronized explicitly by using Collections.synchronizedList method.</li>\n<li>The <code>iterator</code> and <code>listIterator</code> returned by these classes are <code>fail-fast</code> (if list is structurally modified at any time after the iterator is created, in any way except through the <code>iterator’s</code> own remove or add methods, the iterator will <code>throw</code> a <code>ConcurrentModificationException</code>).</li>\n</ul>\n\n<h2>When to use LinkedList and when to use ArrayList?</h2>\n\n<ul>\n<li>As explained above the insert and remove operations give good performance <code>(O(1))</code> in <code>LinkedList</code> compared to <code>ArrayList(O(n))</code>.\n\n<blockquote>\n  <p>Hence if there is a requirement of frequent addition and deletion in application then LinkedList is a best choice.</p>\n</blockquote></li>\n<li>Search (<code>get method</code>) operations are fast in <code>Arraylist (O(1))</code> but not in <code>LinkedList (O(n))</code> \n\n<blockquote>\n  <p>so If there are less add and remove operations and more search operations requirement, ArrayList would be your best bet.</p>\n</blockquote></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1530819,"reputation":2490,"user_id":1428052,"accept_rate":50,"display_name":"Abhijeet Ashok Muneshwar"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1532447371,"creation_date":1486739642,"answer_id":42162722,"question_id":322715,"body_markdown":"Let&#39;s compare LinkedList and ArrayList w.r.t. below parameters:\r\n\r\n## 1. Implementation ##\r\n&gt; *ArrayList* is the resizable array implementation of list interface , while \r\n&gt; \r\n&gt; *LinkedList* is the Doubly-linked list implementation of the list interface.\r\n\r\n\r\n----------\r\n## 2. Performance ##\r\n\r\n - &lt;h3&gt;get(int index) or search operation&lt;/h3&gt;\r\n\r\n    &gt; *ArrayList* get(int index) operation runs in constant time i.e O(1)  while \r\n    &gt; \r\n    &gt; *LinkedList* get(int index) operation run time is O(n) .\r\n\r\n    The reason behind *ArrayList* being faster than LinkedList is that ArrayList uses an index based system for its elements as it internally uses an array data structure, on the other hand,\r\n\r\n    *LinkedList* does not provide index-based access for its elements as it iterates either from the beginning or end (whichever is closer) to retrieve the node at the specified element index.\r\n\r\n - &lt;h3&gt;insert() or add(Object) operation&lt;/h3&gt;\r\n\r\n    &gt; Insertions in *LinkedList* are generally fast as compare to ArrayList. In LinkedList adding or insertion is O(1) operation . \r\n    &gt; \r\n    &gt; While in *ArrayList*, if the array is the full i.e worst case,  there is an extra cost of resizing array and copying elements to the new array, which makes runtime of add operation in ArrayList O(n), otherwise it is O(1).\r\n\r\n - &lt;h3&gt;remove(int) operation&lt;/h3&gt;\r\n\r\n     Remove operation in LinkedList is generally the same as ArrayList i.e. O(n).\r\n\r\n    &gt; In *LinkedList*, there are two overloaded remove methods. one is remove() without any parameter which removes the head of the list and runs in constant time O(1). The other overloaded remove method in LinkedList is remove(int) or remove(Object) which removes the Object or int passed as a parameter. This method traverses the LinkedList until it found the Object and unlink it from the original list. Hence this method runtime is O(n). \r\n    &gt; \r\n    &gt; While in *ArrayList* remove(int) method involves copying elements from the old array to new updated array, hence its runtime is O(n).\r\n\r\n\r\n\r\n----------\r\n\r\n## 3. Reverse  Iterator ##\r\n&gt; *LinkedList* can be iterated in reverse direction using descendingIterator() while \r\n&gt; \r\n&gt; there is no descendingIterator() in *ArrayList* , so we need to write our own code to iterate over the ArrayList in reverse direction.\r\n\r\n\r\n----------\r\n\r\n\r\n## 4. Initial Capacity  ##\r\n&gt; If the constructor  is not overloaded, then *ArrayList* creates an empty list of initial capacity 10, while \r\n&gt; \r\n&gt; *LinkedList*  only constructs the empty list without any initial capacity.\r\n\r\n\r\n----------\r\n\r\n\r\n## 5. Memory Overhead  ##\r\n&gt; Memory overhead in *LinkedList* is more as compared to ArrayList as a node in LinkedList needs to maintain the addresses of the next and previous node. While \r\n&gt; \r\n&gt; In *ArrayList*  each index only holds the actual object(data).\r\n\r\n\r\n\r\n\r\n\r\n----------\r\n\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: http://javahungry.blogspot.com/2015/04/difference-between-arraylist-and-linkedlist-in-java-example.html","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Let's compare LinkedList and ArrayList w.r.t. below parameters:</p>\n\n<h2>1. Implementation</h2>\n\n<blockquote>\n  <p><em>ArrayList</em> is the resizable array implementation of list interface , while </p>\n  \n  <p><em>LinkedList</em> is the Doubly-linked list implementation of the list interface.</p>\n</blockquote>\n\n<hr>\n\n<h2>2. Performance</h2>\n\n<ul>\n<li><h3>get(int index) or search operation</h3>\n\n<blockquote>\n  <p><em>ArrayList</em> get(int index) operation runs in constant time i.e O(1)  while </p>\n  \n  <p><em>LinkedList</em> get(int index) operation run time is O(n) .</p>\n</blockquote>\n\n<p>The reason behind <em>ArrayList</em> being faster than LinkedList is that ArrayList uses an index based system for its elements as it internally uses an array data structure, on the other hand,</p>\n\n<p><em>LinkedList</em> does not provide index-based access for its elements as it iterates either from the beginning or end (whichever is closer) to retrieve the node at the specified element index.</p></li>\n<li><h3>insert() or add(Object) operation</h3>\n\n<blockquote>\n  <p>Insertions in <em>LinkedList</em> are generally fast as compare to ArrayList. In LinkedList adding or insertion is O(1) operation . </p>\n  \n  <p>While in <em>ArrayList</em>, if the array is the full i.e worst case,  there is an extra cost of resizing array and copying elements to the new array, which makes runtime of add operation in ArrayList O(n), otherwise it is O(1).</p>\n</blockquote></li>\n<li><h3>remove(int) operation</h3>\n\n<p>Remove operation in LinkedList is generally the same as ArrayList i.e. O(n).</p>\n\n<blockquote>\n  <p>In <em>LinkedList</em>, there are two overloaded remove methods. one is remove() without any parameter which removes the head of the list and runs in constant time O(1). The other overloaded remove method in LinkedList is remove(int) or remove(Object) which removes the Object or int passed as a parameter. This method traverses the LinkedList until it found the Object and unlink it from the original list. Hence this method runtime is O(n). </p>\n  \n  <p>While in <em>ArrayList</em> remove(int) method involves copying elements from the old array to new updated array, hence its runtime is O(n).</p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<h2>3. Reverse  Iterator</h2>\n\n<blockquote>\n  <p><em>LinkedList</em> can be iterated in reverse direction using descendingIterator() while </p>\n  \n  <p>there is no descendingIterator() in <em>ArrayList</em> , so we need to write our own code to iterate over the ArrayList in reverse direction.</p>\n</blockquote>\n\n<hr>\n\n<h2>4. Initial Capacity</h2>\n\n<blockquote>\n  <p>If the constructor  is not overloaded, then <em>ArrayList</em> creates an empty list of initial capacity 10, while </p>\n  \n  <p><em>LinkedList</em>  only constructs the empty list without any initial capacity.</p>\n</blockquote>\n\n<hr>\n\n<h2>5. Memory Overhead</h2>\n\n<blockquote>\n  <p>Memory overhead in <em>LinkedList</em> is more as compared to ArrayList as a node in LinkedList needs to maintain the addresses of the next and previous node. While </p>\n  \n  <p>In <em>ArrayList</em>  each index only holds the actual object(data).</p>\n</blockquote>\n\n<hr>\n\n<p><a href=\"http://javahungry.blogspot.com/2015/04/difference-between-arraylist-and-linkedlist-in-java-example.html\" rel=\"noreferrer\">Source</a></p>\n"},{"tags":[],"owner":{"account_id":2315538,"reputation":3123,"user_id":2032701,"accept_rate":100,"display_name":"Ruslan"},"comment_count":0,"down_vote_count":1,"up_vote_count":137,"is_accepted":false,"score":136,"last_activity_date":1641416983,"creation_date":1488365263,"answer_id":42529652,"question_id":322715,"body_markdown":"Joshua Bloch, the author of LinkedList:\r\n\r\n&gt; Does anyone actually use LinkedList?  I wrote it, and I never use it.\r\n\r\nLink: https://twitter.com/joshbloch/status/583813919019573248\r\n\r\nI&#39;m sorry for the answer not being as informative as the other answers, but I thought it would be the most self-explanatory if not revealing.","title":"When to use LinkedList over ArrayList in Java?","body":"<p>Joshua Bloch, the author of LinkedList:</p>\n<blockquote>\n<p>Does anyone actually use LinkedList?  I wrote it, and I never use it.</p>\n</blockquote>\n<p>Link: <a href=\"https://twitter.com/joshbloch/status/583813919019573248\" rel=\"noreferrer\">https://twitter.com/joshbloch/status/583813919019573248</a></p>\n<p>I'm sorry for the answer not being as informative as the other answers, but I thought it would be the most self-explanatory if not revealing.</p>\n"},{"tags":[],"owner":{"account_id":7322626,"reputation":2000,"user_id":5974780,"display_name":"Nesan Mano"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1508551123,"creation_date":1494871590,"answer_id":43986093,"question_id":322715,"body_markdown":"ArrayList and LinkedList have their own pros and cons.\r\n\r\nArrayList uses contiguous memory address compared to LinkedList which uses pointers toward the next node. So when you want to look up an element in an ArrayList is faster than doing n iterations with LinkedList.\r\n\r\nOn the other hand, insertion and deletion in a LinkedList are much easier because you just have to change the pointers whereas an ArrayList implies the use of shift operation for any insertion or deletion.\r\n\r\nIf you have frequent retrieval operations in your app use an ArrayList. If you have frequent insertion and deletion use a LinkedList. ","title":"When to use LinkedList over ArrayList in Java?","body":"<p>ArrayList and LinkedList have their own pros and cons.</p>\n\n<p>ArrayList uses contiguous memory address compared to LinkedList which uses pointers toward the next node. So when you want to look up an element in an ArrayList is faster than doing n iterations with LinkedList.</p>\n\n<p>On the other hand, insertion and deletion in a LinkedList are much easier because you just have to change the pointers whereas an ArrayList implies the use of shift operation for any insertion or deletion.</p>\n\n<p>If you have frequent retrieval operations in your app use an ArrayList. If you have frequent insertion and deletion use a LinkedList. </p>\n"},{"tags":[],"owner":{"account_id":11805796,"reputation":226,"user_id":8638323,"display_name":"Randhawa"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519163479,"creation_date":1519163479,"answer_id":48894817,"question_id":322715,"body_markdown":"ArrayList extends AbstractList and implements the List Interface. ArrayList is dynamic array.&lt;br&gt;It can be said that it was basically created to overcome the drawbacks of arrays&lt;br&gt;&lt;br&gt;\r\nThe LinkedList class extends AbstractSequentialList and implements List,Deque, and Queue interface.\r\n&lt;br&gt;Performance&lt;br&gt;\r\n`arraylist.get()` is  O(1) whereas `linkedlist.get()` is O(n) &lt;br&gt;\r\n`arraylist.add()` is  O(1) and `linkedlist.add()` is 0(1)&lt;br&gt;\r\n`arraylist.contains()` is O(n) and`linkedlist.contains()` is O(n) &lt;br&gt;\r\n`arraylist.next()` is O(1) and `linkedlist.next()` is O(1)&lt;br&gt;\r\n`arraylist.remove()` is O(n) whereas `linkedlist.remove()` is O(1)&lt;br&gt;\r\nIn arraylist&lt;br&gt;`iterator.remove()` is O(n)&lt;br&gt; whereas In linkedlist &lt;br&gt;`iterator.remove()`is O(1) \r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p>ArrayList extends AbstractList and implements the List Interface. ArrayList is dynamic array.<br>It can be said that it was basically created to overcome the drawbacks of arrays<br><br>\nThe LinkedList class extends AbstractSequentialList and implements List,Deque, and Queue interface.\n<br>Performance<br>\n<code>arraylist.get()</code> is  O(1) whereas <code>linkedlist.get()</code> is O(n) <br>\n<code>arraylist.add()</code> is  O(1) and <code>linkedlist.add()</code> is 0(1)<br>\n<code>arraylist.contains()</code> is O(n) and<code>linkedlist.contains()</code> is O(n) <br>\n<code>arraylist.next()</code> is O(1) and <code>linkedlist.next()</code> is O(1)<br>\n<code>arraylist.remove()</code> is O(n) whereas <code>linkedlist.remove()</code> is O(1)<br>\nIn arraylist<br><code>iterator.remove()</code> is O(n)<br> whereas In linkedlist <br><code>iterator.remove()</code>is O(1) </p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":1,"creation_date":1546021984,"post_id":50739053,"comment_id":94763313,"body_markdown":"I think this is the best stated answer of the entire group here.  It&#39;s accurate and informative.  I would suggest changing the last line--at the end add &quot;aside from queues&quot; which are very important structures that really don&#39;t make sense for a linked list at all.","body":"I think this is the best stated answer of the entire group here.  It&#39;s accurate and informative.  I would suggest changing the last line--at the end add &quot;aside from queues&quot; which are very important structures that really don&#39;t make sense for a linked list at all."}],"tags":[],"owner":{"account_id":13723510,"reputation":121,"user_id":9902873,"display_name":"Anjali Suman"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1599238384,"creation_date":1528367621,"answer_id":50739053,"question_id":322715,"body_markdown":"**1) Underlying Data Structure** \r\n\r\nThe first difference between ArrayList and LinkedList comes with the fact that ArrayList is backed by Array while LinkedList is backed by LinkedList. This will lead to further differences in performance.\r\n\r\n**2) LinkedList implements Deque** \r\n\r\nAnother difference between ArrayList and LinkedList is that apart from the List interface, LinkedList also implements Deque interface, which provides first in first out operations for `add()` and `poll()` and several other Deque functions. 3) Adding elements in ArrayList Adding element in ArrayList is O(1) operation if it doesn&#39;t trigger re-size of Array, in which case it becomes O(log(n)), On the other hand, appending an element in LinkedList is O(1) operation, as it doesn&#39;t require any navigation.\r\n\r\n**4) Removing an element from a position** \r\n\r\nIn order to remove an element from a particular index e.g. by calling `remove(index)`, ArrayList performs a copy operation which makes it close to O(n) while LinkedList needs to traverse to that point which also makes it O(n/2), as it can traverse from either direction based upon proximity.\r\n\r\n**5) Iterating over ArrayList or LinkedList** \r\n\r\nIteration is the O(n) operation for both LinkedList and ArrayList where n is a number of an element.\r\n\r\n**6) Retrieving element from a position** \r\n\r\nThe `get(index)` operation is O(1) in ArrayList while its O(n/2) in LinkedList, as it needs to traverse till that entry. Though, in Big O notation O(n/2) is just O(n) because we ignore constants there.\r\n\r\n**7) Memory** \r\n\r\nLinkedList uses a wrapper object, Entry, which is a static nested class for storing data and two nodes next and previous while ArrayList just stores data in Array.\r\n\r\nSo memory requirement seems less in the case of ArrayList than LinkedList except for the case where Array performs the re-size operation when it copies content from one Array to another.\r\n\r\nIf Array is large enough it may take a lot of memory at that point and trigger Garbage collection, which can slow response time.\r\n\r\nFrom all the above differences between ArrayList vs LinkedList, It looks ArrayList is the better choice than LinkedList in almost all cases, except when you do a frequent `add()` operation than `remove()`, or `get()`.\r\n\r\nIt&#39;s easier to modify a linked list than ArrayList, especially if you are adding or removing elements from start or end because linked list internally keeps references of those positions and they are accessible in O(1) time.\r\n\r\nIn other words, you don&#39;t need to traverse through the linked list to reach the position where you want to add elements, in that case, addition becomes O(n) operation. For example, inserting or deleting an element in the middle of a linked list.\r\n\r\nIn my opinion, use ArrayList over LinkedList for most of the practical purpose in Java.","title":"When to use LinkedList over ArrayList in Java?","body":"<p><strong>1) Underlying Data Structure</strong></p>\n<p>The first difference between ArrayList and LinkedList comes with the fact that ArrayList is backed by Array while LinkedList is backed by LinkedList. This will lead to further differences in performance.</p>\n<p><strong>2) LinkedList implements Deque</strong></p>\n<p>Another difference between ArrayList and LinkedList is that apart from the List interface, LinkedList also implements Deque interface, which provides first in first out operations for <code>add()</code> and <code>poll()</code> and several other Deque functions. 3) Adding elements in ArrayList Adding element in ArrayList is O(1) operation if it doesn't trigger re-size of Array, in which case it becomes O(log(n)), On the other hand, appending an element in LinkedList is O(1) operation, as it doesn't require any navigation.</p>\n<p><strong>4) Removing an element from a position</strong></p>\n<p>In order to remove an element from a particular index e.g. by calling <code>remove(index)</code>, ArrayList performs a copy operation which makes it close to O(n) while LinkedList needs to traverse to that point which also makes it O(n/2), as it can traverse from either direction based upon proximity.</p>\n<p><strong>5) Iterating over ArrayList or LinkedList</strong></p>\n<p>Iteration is the O(n) operation for both LinkedList and ArrayList where n is a number of an element.</p>\n<p><strong>6) Retrieving element from a position</strong></p>\n<p>The <code>get(index)</code> operation is O(1) in ArrayList while its O(n/2) in LinkedList, as it needs to traverse till that entry. Though, in Big O notation O(n/2) is just O(n) because we ignore constants there.</p>\n<p><strong>7) Memory</strong></p>\n<p>LinkedList uses a wrapper object, Entry, which is a static nested class for storing data and two nodes next and previous while ArrayList just stores data in Array.</p>\n<p>So memory requirement seems less in the case of ArrayList than LinkedList except for the case where Array performs the re-size operation when it copies content from one Array to another.</p>\n<p>If Array is large enough it may take a lot of memory at that point and trigger Garbage collection, which can slow response time.</p>\n<p>From all the above differences between ArrayList vs LinkedList, It looks ArrayList is the better choice than LinkedList in almost all cases, except when you do a frequent <code>add()</code> operation than <code>remove()</code>, or <code>get()</code>.</p>\n<p>It's easier to modify a linked list than ArrayList, especially if you are adding or removing elements from start or end because linked list internally keeps references of those positions and they are accessible in O(1) time.</p>\n<p>In other words, you don't need to traverse through the linked list to reach the position where you want to add elements, in that case, addition becomes O(n) operation. For example, inserting or deleting an element in the middle of a linked list.</p>\n<p>In my opinion, use ArrayList over LinkedList for most of the practical purpose in Java.</p>\n"},{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1583259060,"creation_date":1533408726,"answer_id":51688647,"question_id":322715,"body_markdown":"One of the tests I saw on here only conducts the test once.  But what I have noticed is that you need to run these tests many times and eventually their times will converge.  Basically the JVM needs to warm up.  For my particular use case I needed to add/remove items to a list that grows to about 500 items.  In my tests `LinkedList` came out faster, with `LinkedList` coming in around 50,000 NS and `ArrayList` coming in at around 90,000 NS... give or take.  See the code below.\r\n\r\n\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Long&gt; times = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 100; i++) {\r\n            times.add(doIt());\r\n        }\r\n        System.out.println(&quot;avg = &quot; + (times.stream().mapToLong(x -&gt; x).average()));\r\n    }\r\n\r\n    static long doIt() {\r\n        long start = System.nanoTime();\r\n        List&lt;Object&gt; list = new LinkedList&lt;&gt;();\r\n        //uncomment line below to test with ArrayList\r\n        //list = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 500; i++) {\r\n            list.add(i);\r\n        }\r\n\r\n        Iterator it = list.iterator();\r\n        while (it.hasNext()) {\r\n            it.next();\r\n            it.remove();\r\n        }\r\n        long end = System.nanoTime();\r\n        long diff = end - start;\r\n        //uncomment to see the JVM warmup and get faster for the first few iterations\r\n        //System.out.println(diff)\r\n        return diff;\r\n    }\r\n\r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p>One of the tests I saw on here only conducts the test once.  But what I have noticed is that you need to run these tests many times and eventually their times will converge.  Basically the JVM needs to warm up.  For my particular use case I needed to add/remove items to a list that grows to about 500 items.  In my tests <code>LinkedList</code> came out faster, with <code>LinkedList</code> coming in around 50,000 NS and <code>ArrayList</code> coming in at around 90,000 NS... give or take.  See the code below.</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Long&gt; times = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 100; i++) {\n        times.add(doIt());\n    }\n    System.out.println(\"avg = \" + (times.stream().mapToLong(x -&gt; x).average()));\n}\n\nstatic long doIt() {\n    long start = System.nanoTime();\n    List&lt;Object&gt; list = new LinkedList&lt;&gt;();\n    //uncomment line below to test with ArrayList\n    //list = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 500; i++) {\n        list.add(i);\n    }\n\n    Iterator it = list.iterator();\n    while (it.hasNext()) {\n        it.next();\n        it.remove();\n    }\n    long end = System.nanoTime();\n    long diff = end - start;\n    //uncomment to see the JVM warmup and get faster for the first few iterations\n    //System.out.println(diff)\n    return diff;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1546021606,"post_id":52885253,"comment_id":94763196,"body_markdown":"I wouldn&#39;t call a queue unique or extreme! A fifo queue is much easier implemented on a LinkedList instead of an ArrayList.  It&#39;s actually a nightmare on an ArrayList as you have to track your own start, stop and do your own reallocating, you might as well use an array, but a Linked List IS a fifo.  I&#39;m not sure about Java&#39;s implementation, but a LinkedList can do O(1) for both queue and dequeue operations (Requires a special pointer to the tail element for the remove, which I assume java has but I haven&#39;t double-checked.)","body":"I wouldn&#39;t call a queue unique or extreme! A fifo queue is much easier implemented on a LinkedList instead of an ArrayList.  It&#39;s actually a nightmare on an ArrayList as you have to track your own start, stop and do your own reallocating, you might as well use an array, but a Linked List IS a fifo.  I&#39;m not sure about Java&#39;s implementation, but a LinkedList can do O(1) for both queue and dequeue operations (Requires a special pointer to the tail element for the remove, which I assume java has but I haven&#39;t double-checked.)"},{"owner":{"account_id":130318,"reputation":6472,"user_id":329496,"accept_rate":66,"display_name":"simbo1905"},"score":2,"creation_date":1613824246,"post_id":52885253,"comment_id":117198406,"body_markdown":"inserting into the middle of a `ArrayList` array uses the native method  `java.lang.System.arraycopy()` which is written in C++ in the OpenJDK. so while in theory a `LinkedList` has less work to do in practice there are so many extra-linguistic mechanisms that make &quot;Big O&quot; largely irrelevant. Particularly how cache friendly things are as per this excellent answer.","body":"inserting into the middle of a <code>ArrayList</code> array uses the native method  <code>java.lang.System.arraycopy()</code> which is written in C++ in the OpenJDK. so while in theory a <code>LinkedList</code> has less work to do in practice there are so many extra-linguistic mechanisms that make &quot;Big O&quot; largely irrelevant. Particularly how cache friendly things are as per this excellent answer."},{"owner":{"account_id":3352991,"reputation":4106,"user_id":2816631,"accept_rate":50,"display_name":"Artem Novikov"},"score":0,"creation_date":1637952624,"post_id":52885253,"comment_id":123967974,"body_markdown":"Thanks, but something isn&#39;t right with the last benchmark. 1) Why &quot;list&quot; duration even grows? If elements are always inserted at the start (0 index), it doesn&#39;t depend on size. And if you meant inserting around the start, then how close this &quot;around&quot; is plays big role - in Java, inserting 1000th element into prebuilt 100_000 array (multiple times) is still faster for LinkedList, and only becomes slower when you get closer to end. 2) So right now around-start-insertion in Java is still faster for LinkedList. Though, I&#39;d advise trick here - just reverse the list before working with it.","body":"Thanks, but something isn&#39;t right with the last benchmark. 1) Why &quot;list&quot; duration even grows? If elements are always inserted at the start (0 index), it doesn&#39;t depend on size. And if you meant inserting around the start, then how close this &quot;around&quot; is plays big role - in Java, inserting 1000th element into prebuilt 100_000 array (multiple times) is still faster for LinkedList, and only becomes slower when you get closer to end. 2) So right now around-start-insertion in Java is still faster for LinkedList. Though, I&#39;d advise trick here - just reverse the list before working with it."}],"tags":[],"owner":{"account_id":4393684,"reputation":10922,"user_id":3834036,"display_name":"Lior Bar-On"},"comment_count":3,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1539918379,"creation_date":1539917596,"answer_id":52885253,"question_id":322715,"body_markdown":"**TL;DR** due to modern computer architecture, `ArrayList` will be significantly more efficient for nearly any possible use-case - and therefore `LinkedList` should be avoided except some very unique and extreme cases.\r\n\r\n-----\r\n\r\n\r\nIn theory, LinkedList has an O(1) for the `add(E element)`\r\n\r\nAlso adding an element in the mid of a list should be very efficient.\r\n\r\n\r\nPractice is very different, as LinkedList is a **Cache Hostile** Data structure. From performance POV - there are very little cases where `LinkedList` could be better performing than the *Cache-friendly* `ArrayList`.\r\n\r\nHere are results of a benchmark testing inserting elements in random locations. As you can see - the array list if much more efficient, although in theory each insert in the middle of the list will require &quot;move&quot; the *n* later elements of the array (lower values are better):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWorking on a later generation hardware (bigger, more efficient caches) - the results are even more conclusive:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nLinkedList takes much more time to accomplish the same job. [source](https://kjellkod.wordpress.com/2012/08/08/java-galore-linkedlist-vs-arraylist-vs-dynamicintarray/) [Source Code](https://ideone.com/JOJ05)\r\n\r\nThere are two main reasons for this:\r\n\r\n 1. **Mainly** - that the nodes of the `LinkedList` are scattered randomly across the memory. RAM (&quot;Random Access Memory&quot;) isn&#39;t really random and blocks of memory need to be fetched to cache. This operation takes time, and when such fetches happen frequently - the memory pages in the cache need to be replaced all the time -&gt; Cache misses -&gt; Cache is not efficient.\r\n`ArrayList` elements are stored on continuous memory - which is exactly what the modern CPU architecture is optimizing for.\r\n\r\n 2. **Secondary** `LinkedList` required to hold back/forward pointers, which means 3 times the memory consumption per value stored compared to `ArrayList`.\r\n\r\n[DynamicIntArray](https://github.com/apache/orc/blob/master/java/core/src/java/org/apache/orc/impl/DynamicIntArray.java), btw, is a custom ArrayList implementation holding `Int` (primitive type) and not Objects - hence all data is really stored adjacently - hence even more efficient.\r\n\r\nA key elements to remember is that the cost of fetching memory block, is more significant than the cost accessing a single memory cell. That&#39;s why reader 1MB of sequential memory is up to x400 times faster than reading this amount of data from different blocks of memory:\r\n\r\n\r\n    Latency Comparison Numbers (~2012)\r\n    ----------------------------------\r\n    L1 cache reference                           0.5 ns\r\n    Branch mispredict                            5   ns\r\n    L2 cache reference                           7   ns                      14x L1 cache\r\n    Mutex lock/unlock                           25   ns\r\n    Main memory reference                      100   ns                      20x L2 cache, 200x L1 cache\r\n    Compress 1K bytes with Zippy             3,000   ns        3 us\r\n    Send 1K bytes over 1 Gbps network       10,000   ns       10 us\r\n    Read 4K randomly from SSD*             150,000   ns      150 us          ~1GB/sec SSD\r\n    Read 1 MB sequentially from memory     250,000   ns      250 us\r\n    Round trip within same datacenter      500,000   ns      500 us\r\n    Read 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory\r\n    Disk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip\r\n    Read 1 MB sequentially from disk    20,000,000   ns   20,000 us   20 ms  80x memory, 20X SSD\r\n    Send packet CA-&gt;Netherlands-&gt;CA    150,000,000   ns  150,000 us  150 ms\r\n\r\nSource: [Latency Numbers Every Programmer Should Know](https://gist.github.com/jboner/2841832)\r\n\r\n\r\nJust to make the point even clearer, please check the benchmark of adding elements to the beginning of the list. This is a use-case where, in-theory, the `LinkedList` should really shine, and `ArrayList` should present poor or even worse-case results:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nNote: this is a benchmark of the C++ Std lib, but my previous experience shown the C++ and Java results are very similar. [Source Code](https://ideone.com/DDEJF)\r\n\r\nCopying a sequential bulk of memory is an operation optimized by the modern CPUs - changing theory and actually making, again, `ArrayList`/`Vector` much more efficient\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/edAd8.png\r\n  [2]: https://i.stack.imgur.com/XtdBP.png\r\n  [3]: https://i.stack.imgur.com/2EygL.png\r\n\r\n----\r\n\r\nCredits: All benchmarks posted here are created by [Kjell Hedstr&#246;m](https://www.linkedin.com/in/kjellkod/). Even more data can be found on [his blog](https://kjellkod.wordpress.com/)","title":"When to use LinkedList over ArrayList in Java?","body":"<p><strong>TL;DR</strong> due to modern computer architecture, <code>ArrayList</code> will be significantly more efficient for nearly any possible use-case - and therefore <code>LinkedList</code> should be avoided except some very unique and extreme cases.</p>\n\n<hr>\n\n<p>In theory, LinkedList has an O(1) for the <code>add(E element)</code></p>\n\n<p>Also adding an element in the mid of a list should be very efficient.</p>\n\n<p>Practice is very different, as LinkedList is a <strong>Cache Hostile</strong> Data structure. From performance POV - there are very little cases where <code>LinkedList</code> could be better performing than the <em>Cache-friendly</em> <code>ArrayList</code>.</p>\n\n<p>Here are results of a benchmark testing inserting elements in random locations. As you can see - the array list if much more efficient, although in theory each insert in the middle of the list will require \"move\" the <em>n</em> later elements of the array (lower values are better):</p>\n\n<p><a href=\"https://i.stack.imgur.com/edAd8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/edAd8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Working on a later generation hardware (bigger, more efficient caches) - the results are even more conclusive:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XtdBP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XtdBP.png\" alt=\"enter image description here\"></a></p>\n\n<p>LinkedList takes much more time to accomplish the same job. <a href=\"https://kjellkod.wordpress.com/2012/08/08/java-galore-linkedlist-vs-arraylist-vs-dynamicintarray/\" rel=\"noreferrer\">source</a> <a href=\"https://ideone.com/JOJ05\" rel=\"noreferrer\">Source Code</a></p>\n\n<p>There are two main reasons for this:</p>\n\n<ol>\n<li><p><strong>Mainly</strong> - that the nodes of the <code>LinkedList</code> are scattered randomly across the memory. RAM (\"Random Access Memory\") isn't really random and blocks of memory need to be fetched to cache. This operation takes time, and when such fetches happen frequently - the memory pages in the cache need to be replaced all the time -> Cache misses -> Cache is not efficient.\n<code>ArrayList</code> elements are stored on continuous memory - which is exactly what the modern CPU architecture is optimizing for.</p></li>\n<li><p><strong>Secondary</strong> <code>LinkedList</code> required to hold back/forward pointers, which means 3 times the memory consumption per value stored compared to <code>ArrayList</code>.</p></li>\n</ol>\n\n<p><a href=\"https://github.com/apache/orc/blob/master/java/core/src/java/org/apache/orc/impl/DynamicIntArray.java\" rel=\"noreferrer\">DynamicIntArray</a>, btw, is a custom ArrayList implementation holding <code>Int</code> (primitive type) and not Objects - hence all data is really stored adjacently - hence even more efficient.</p>\n\n<p>A key elements to remember is that the cost of fetching memory block, is more significant than the cost accessing a single memory cell. That's why reader 1MB of sequential memory is up to x400 times faster than reading this amount of data from different blocks of memory:</p>\n\n<pre><code>Latency Comparison Numbers (~2012)\n----------------------------------\nL1 cache reference                           0.5 ns\nBranch mispredict                            5   ns\nL2 cache reference                           7   ns                      14x L1 cache\nMutex lock/unlock                           25   ns\nMain memory reference                      100   ns                      20x L2 cache, 200x L1 cache\nCompress 1K bytes with Zippy             3,000   ns        3 us\nSend 1K bytes over 1 Gbps network       10,000   ns       10 us\nRead 4K randomly from SSD*             150,000   ns      150 us          ~1GB/sec SSD\nRead 1 MB sequentially from memory     250,000   ns      250 us\nRound trip within same datacenter      500,000   ns      500 us\nRead 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory\nDisk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip\nRead 1 MB sequentially from disk    20,000,000   ns   20,000 us   20 ms  80x memory, 20X SSD\nSend packet CA-&gt;Netherlands-&gt;CA    150,000,000   ns  150,000 us  150 ms\n</code></pre>\n\n<p>Source: <a href=\"https://gist.github.com/jboner/2841832\" rel=\"noreferrer\">Latency Numbers Every Programmer Should Know</a></p>\n\n<p>Just to make the point even clearer, please check the benchmark of adding elements to the beginning of the list. This is a use-case where, in-theory, the <code>LinkedList</code> should really shine, and <code>ArrayList</code> should present poor or even worse-case results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2EygL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2EygL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: this is a benchmark of the C++ Std lib, but my previous experience shown the C++ and Java results are very similar. <a href=\"https://ideone.com/DDEJF\" rel=\"noreferrer\">Source Code</a></p>\n\n<p>Copying a sequential bulk of memory is an operation optimized by the modern CPUs - changing theory and actually making, again, <code>ArrayList</code>/<code>Vector</code> much more efficient</p>\n\n<hr>\n\n<p>Credits: All benchmarks posted here are created by <a href=\"https://www.linkedin.com/in/kjellkod/\" rel=\"noreferrer\">Kjell Hedström</a>. Even more data can be found on <a href=\"https://kjellkod.wordpress.com/\" rel=\"noreferrer\">his blog</a></p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":2,"creation_date":1550773499,"post_id":54181945,"comment_id":96404189,"body_markdown":"The ArrayDeque balances things a bit more towards the arrays since insert/remove front/back are all O(1) the only thing Linked List still wins at is adding/removing while traversing (the Iterator operations).","body":"The ArrayDeque balances things a bit more towards the arrays since insert/remove front/back are all O(1) the only thing Linked List still wins at is adding/removing while traversing (the Iterator operations)."}],"tags":[],"owner":{"account_id":4483663,"reputation":12326,"user_id":3647002,"accept_rate":47,"display_name":"Gayan Weerakutti"},"comment_count":1,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1669248554,"creation_date":1547470452,"answer_id":54181945,"question_id":322715,"body_markdown":"You can use one over the other based on the time complexities of the operations that you&#39;d perform on that particular List.                                                                  \r\n\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |      Operation      |     ArrayList       |     LinkedList     |   Winner   |\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |     get(index)      |       O(1)          |         O(n)       | ArrayList  |\r\n    |                     |                     |  n/4 steps in avg  |            |\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |      add(E)         |       O(1)          |         O(1)       | LinkedList |\r\n    |                     |---------------------|--------------------|            |\r\n    |                     | O(n) in worst case  |                    |            |\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |    add(index, E)    |       O(n)          |         O(n)       | LinkedList |\r\n    |                     |     n/2 steps       |      n/4 steps     |            |\r\n    |                     |---------------------|--------------------|            |\r\n    |                     |                     |  O(1) if index = 0 |            |\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |  remove(index, E)   |       O(n)          |         O(n)       | LinkedList |\r\n    |                     |---------------------|--------------------|            |\r\n    |                     |     n/2 steps       |      n/4 steps     |            |\r\n    |---------------------|---------------------|--------------------|------------|\r\n    |  Iterator.remove()  |       O(n)          |         O(1)       | LinkedList |\r\n    |  ListIterator.add() |                     |                    |            |\r\n    |---------------------|---------------------|--------------------|------------|\r\n\r\n\r\n    |--------------------------------------|-----------------------------------|\r\n    |              ArrayList               |            LinkedList             |\r\n    |--------------------------------------|-----------------------------------|\r\n    |     Allows fast read access          |   Retrieving element takes O(n)   |\r\n    |--------------------------------------|-----------------------------------|\r\n    |   Adding an element require shifting | o(1) [but traversing takes time]  |\r\n    |       all the later elements         |                                   |\r\n    |--------------------------------------|-----------------------------------|\r\n    |   To add more elements than capacity |\r\n    |    new array need to be allocated    |\r\n    |--------------------------------------|\r\n\r\n","title":"When to use LinkedList over ArrayList in Java?","body":"<p>You can use one over the other based on the time complexities of the operations that you'd perform on that particular List.</p>\n<pre><code>|---------------------|---------------------|--------------------|------------|\n|      Operation      |     ArrayList       |     LinkedList     |   Winner   |\n|---------------------|---------------------|--------------------|------------|\n|     get(index)      |       O(1)          |         O(n)       | ArrayList  |\n|                     |                     |  n/4 steps in avg  |            |\n|---------------------|---------------------|--------------------|------------|\n|      add(E)         |       O(1)          |         O(1)       | LinkedList |\n|                     |---------------------|--------------------|            |\n|                     | O(n) in worst case  |                    |            |\n|---------------------|---------------------|--------------------|------------|\n|    add(index, E)    |       O(n)          |         O(n)       | LinkedList |\n|                     |     n/2 steps       |      n/4 steps     |            |\n|                     |---------------------|--------------------|            |\n|                     |                     |  O(1) if index = 0 |            |\n|---------------------|---------------------|--------------------|------------|\n|  remove(index, E)   |       O(n)          |         O(n)       | LinkedList |\n|                     |---------------------|--------------------|            |\n|                     |     n/2 steps       |      n/4 steps     |            |\n|---------------------|---------------------|--------------------|------------|\n|  Iterator.remove()  |       O(n)          |         O(1)       | LinkedList |\n|  ListIterator.add() |                     |                    |            |\n|---------------------|---------------------|--------------------|------------|\n\n\n|--------------------------------------|-----------------------------------|\n|              ArrayList               |            LinkedList             |\n|--------------------------------------|-----------------------------------|\n|     Allows fast read access          |   Retrieving element takes O(n)   |\n|--------------------------------------|-----------------------------------|\n|   Adding an element require shifting | o(1) [but traversing takes time]  |\n|       all the later elements         |                                   |\n|--------------------------------------|-----------------------------------|\n|   To add more elements than capacity |\n|    new array need to be allocated    |\n|--------------------------------------|\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3656281,"reputation":1256,"user_id":5870336,"accept_rate":71,"display_name":"Sina Madani"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1570666736,"creation_date":1570666147,"answer_id":58313753,"question_id":322715,"body_markdown":"My rule of thumb is if I need a `Collection` (i.e. doesn&#39;t need to be a `List`) then use `ArrayList` if you know the size in advance, or can know the size confidently, or know that it won&#39;t vary much. If you need random access (i.e. you use `get(index)`) then avoid `LinkedList`. Basically, use `LinkedList` only if you don&#39;t need index access and don&#39;t know the (approximate) size of the collection you&#39;re allocating. Also if you&#39;re going to be making lots of additions and removals (again through the `Collection` interface) then LinkedList may be preferable.","title":"When to use LinkedList over ArrayList in Java?","body":"<p>My rule of thumb is if I need a <code>Collection</code> (i.e. doesn't need to be a <code>List</code>) then use <code>ArrayList</code> if you know the size in advance, or can know the size confidently, or know that it won't vary much. If you need random access (i.e. you use <code>get(index)</code>) then avoid <code>LinkedList</code>. Basically, use <code>LinkedList</code> only if you don't need index access and don't know the (approximate) size of the collection you're allocating. Also if you're going to be making lots of additions and removals (again through the <code>Collection</code> interface) then LinkedList may be preferable.</p>\n"},{"comments":[{"owner":{"account_id":13081432,"reputation":793,"user_id":9451867,"display_name":"Doga Oruc"},"score":2,"creation_date":1602145790,"post_id":62260383,"comment_id":113629464,"body_markdown":"```Vector``` is slower compared to ```ArrayList``` because ```Vector``` is thread-safe. The best practice is not using a ```Vector``` unless thread safety is needed. ```Vector``` doubles its size by default, ```ArrayList``` multiplies its size by 3/2. See:https://stackoverflow.com/questions/17471913/java-vector-vs-arraylist-performance-test","body":"<code>Vector</code> is slower compared to <code>ArrayList</code> because <code>Vector</code> is thread-safe. The best practice is not using a <code>Vector</code> unless thread safety is needed. <code>Vector</code> doubles its size by default, <code>ArrayList</code> multiplies its size by 3/2. See:<a href=\"https://stackoverflow.com/questions/17471913/java-vector-vs-arraylist-performance-test\" title=\"java vector vs arraylist performance test\">stackoverflow.com/questions/17471913/&hellip;</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1637333199,"post_id":62260383,"comment_id":123805653,"body_markdown":"What are you talking about? `ArrayList` [has a public `ensureCapacity` method](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#ensureCapacity(int)) and always had. So your only reason to use an outdated class does not stand a single reality check.","body":"What are you talking about? <code>ArrayList</code> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#ensureCapacity(int)\" rel=\"nofollow noreferrer\">has a public <code>ensureCapacity</code> method</a> and always had. So your only reason to use an outdated class does not stand a single reality check."},{"owner":{"account_id":1533581,"reputation":169,"user_id":1430173,"display_name":"MichaelRom"},"score":0,"creation_date":1649593031,"post_id":62260383,"comment_id":126909904,"body_markdown":"From the Vector.java documentation via your own link:  &quot;Unlike the new collection implementations, Vector is synchronized. If a thread-safe implementation is not needed, it is recommended to use ArrayList in place of Vector.&quot;","body":"From the Vector.java documentation via your own link:  &quot;Unlike the new collection implementations, Vector is synchronized. If a thread-safe implementation is not needed, it is recommended to use ArrayList in place of Vector.&quot;"},{"owner":{"account_id":6524595,"reputation":11,"user_id":5047682,"display_name":"Boris Fain"},"score":0,"creation_date":1649683003,"post_id":62260383,"comment_id":126931208,"body_markdown":"Could have you checked a performance of Vector ?   Due to my test a few years ago. Vector is faster . I thing because a smaller number of memory allocations. Mutex time is depends of the kernel but it doesn&#39;t take a lot of time  roughly 15msec IMHO .","body":"Could have you checked a performance of Vector ?   Due to my test a few years ago. Vector is faster . I thing because a smaller number of memory allocations. Mutex time is depends of the kernel but it doesn&#39;t take a lot of time  roughly 15msec IMHO ."}],"tags":[],"owner":{"account_id":6524595,"reputation":11,"user_id":5047682,"display_name":"Boris Fain"},"comment_count":4,"down_vote_count":10,"up_vote_count":0,"is_accepted":false,"score":-10,"last_activity_date":1591613469,"creation_date":1591613469,"answer_id":62260383,"question_id":322715,"body_markdown":"First of all use Vector instead ArrayList because you can overrite insureCapasity method ,\r\nin ArrayList is private and add 1.5 size of current array https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-\r\n\r\nin many case it can be better that linkedList, the las has big advantage one you insert data with high freqency so size of you list changes very fast and you can&#39;t allocate size for number elements. \r\nIn the theory you can get error like not &quot;enough memory&quot;  but  in modern computers you have 16G and swaping disk, so if you list is billoins elements you can fail, comparing 15-20 years ago.  ","title":"When to use LinkedList over ArrayList in Java?","body":"<p>First of all use Vector instead ArrayList because you can overrite insureCapasity method ,\nin ArrayList is private and add 1.5 size of current array <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-</a></p>\n\n<p>in many case it can be better that linkedList, the las has big advantage one you insert data with high freqency so size of you list changes very fast and you can't allocate size for number elements. \nIn the theory you can get error like not \"enough memory\"  but  in modern computers you have 16G and swaping disk, so if you list is billoins elements you can fail, comparing 15-20 years ago.  </p>\n"},{"tags":[],"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698018193,"creation_date":1698018193,"answer_id":77342056,"question_id":322715,"body_markdown":"I haven&#39;t seen any mention of this yet (maybe I missed it among the 30+ answers...), but you should ALWAYS prefer an `ArrayList` over a `LinkedList` if you know what the final size of your collection will be. You can take advantage of the `new ArrayList&lt;&gt;(size)` to ensure all insertions are O(1) (as long as you only add up to `size` elements).\r\n\r\nAnd yes, I&#39;m aware `ImmutableCollection`s are technically the correct choice for fixed size collections - but they become quite the pain in the ass if you ever decide to modify your list down the line (`remove()`, `sublist()` modifications, etc.)","title":"When to use LinkedList over ArrayList in Java?","body":"<p>I haven't seen any mention of this yet (maybe I missed it among the 30+ answers...), but you should ALWAYS prefer an <code>ArrayList</code> over a <code>LinkedList</code> if you know what the final size of your collection will be. You can take advantage of the <code>new ArrayList&lt;&gt;(size)</code> to ensure all insertions are O(1) (as long as you only add up to <code>size</code> elements).</p>\n<p>And yes, I'm aware <code>ImmutableCollection</code>s are technically the correct choice for fixed size collections - but they become quite the pain in the ass if you ever decide to modify your list down the line (<code>remove()</code>, <code>sublist()</code> modifications, etc.)</p>\n"}],"owner":{"account_id":18116,"reputation":39298,"user_id":41200,"accept_rate":73,"display_name":"sdellysse"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1370233,"favorite_count":0,"down_vote_count":5,"up_vote_count":3607,"accepted_answer_id":322742,"answer_count":34,"score":3602,"last_activity_date":1698018193,"creation_date":1227749795,"question_id":322715,"body_markdown":"I&#39;ve always been one to simply use:\r\n\r\n    List&lt;String&gt; names = new ArrayList&lt;&gt;();\r\n\r\nI use the interface as the type name for _portability_, so that when I ask questions such as this, I can rework my code.  \r\n  \r\nWhen should [`LinkedList`][1] be used over [`ArrayList`][2] and vice-versa?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/ArrayList.html","title":"When to use LinkedList over ArrayList in Java?","body":"<p>I've always been one to simply use:</p>\n<pre><code>List&lt;String&gt; names = new ArrayList&lt;&gt;();\n</code></pre>\n<p>I use the interface as the type name for <em>portability</em>, so that when I ask questions such as this, I can rework my code.</p>\n<p>When should <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html\" rel=\"noreferrer\"><code>LinkedList</code></a> be used over <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList</code></a> and vice-versa?</p>\n"},{"tags":["java","java-time","duration"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1697629047,"post_id":77315914,"comment_id":136303214,"body_markdown":"Please format your code correctly and in a code block (i.e. enclosed in triple backticks). You should also print the exception stacktrace and include it in your question. Don&#39;t ever just ignore exceptions if you don&#39;t what or why is causing them.","body":"Please format your code correctly and in a code block (i.e. enclosed in triple backticks). You should also print the exception stacktrace and include it in your question. Don&#39;t ever just ignore exceptions if you don&#39;t what or why is causing them."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1697629385,"post_id":77315914,"comment_id":136303282,"body_markdown":"Also, please make sure your code is a [mre].","body":"Also, please make sure your code is a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697631679,"post_id":77315914,"comment_id":136303767,"body_markdown":"If the appointment is in the future, shouldn’t you swap the arguments to `between()`? Like so: `Duration.between(LocalDateTime.now(), listOfAppointment.get(Integer.parseInt(indicator) - 1).getDateTimeOfAppointment())`? (You may also check your assumption that it’s in the future so you don’t happen to check someone in who should have been here yesterday.)","body":"If the appointment is in the future, shouldn’t you swap the arguments to <code>between()</code>? Like so: <code>Duration.between(LocalDateTime.now(), listOfAppointment.get(Integer.parseInt(indicator) - 1).getDateTimeOfAppointment())</code>? (You may also check your assumption that it’s in the future so you don’t happen to check someone in who should have been here yesterday.)"},{"owner":{"account_id":29699608,"reputation":7,"user_id":22762071,"display_name":"Qihang_W"},"score":1,"creation_date":1697755980,"post_id":77315914,"comment_id":136323229,"body_markdown":"Yes, that&#39;s the problem. Already updated my code, thanks!","body":"Yes, that&#39;s the problem. Already updated my code, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":10250466,"reputation":575,"user_id":7576519,"display_name":"Pablo Aragon&#233;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697629189,"creation_date":1697629189,"answer_id":77315965,"question_id":77315914,"body_markdown":"It seems that you&#39;re trying to check if the time of an appointment is within 10 minutes from the current time, and if so, set the check-in flag to `true`, isn&#39;t it?. However, there is an issue in your code. You are using a `try-catch` block unnecessarily and breaking the loop within the `try` block. Here is what I believe to be a corrected version of your code:\r\n\r\n```\r\n// Assuming you have already parsed the indicator as an integer\r\nint index = Integer.parseInt(indicator) - 1;\r\nLocalDateTime appointmentTime = listOfAppointment.get(index).getDateTimeOfAppointment();\r\nLocalDateTime now = LocalDateTime.now();\r\nDuration timeDifference = Duration.between(appointmentTime, now);\r\n\r\nif (timeDifference.compareTo(Duration.ofMinutes(10)) &lt; 0) {\r\n    listOfAppointment.get(index).setCheckIn(true);\r\n    System.out.println(&quot;The check-in has been done! Let&#39;s see your PT!&quot;);\r\n} else {\r\n    System.out.println(&quot;It seems that it&#39;s still too early, please wait until 10 minutes are left!&quot;);\r\n}\r\n```","title":"Java LocalDateTime Duration fundamental","body":"<p>It seems that you're trying to check if the time of an appointment is within 10 minutes from the current time, and if so, set the check-in flag to <code>true</code>, isn't it?. However, there is an issue in your code. You are using a <code>try-catch</code> block unnecessarily and breaking the loop within the <code>try</code> block. Here is what I believe to be a corrected version of your code:</p>\n<pre><code>// Assuming you have already parsed the indicator as an integer\nint index = Integer.parseInt(indicator) - 1;\nLocalDateTime appointmentTime = listOfAppointment.get(index).getDateTimeOfAppointment();\nLocalDateTime now = LocalDateTime.now();\nDuration timeDifference = Duration.between(appointmentTime, now);\n\nif (timeDifference.compareTo(Duration.ofMinutes(10)) &lt; 0) {\n    listOfAppointment.get(index).setCheckIn(true);\n    System.out.println(&quot;The check-in has been done! Let's see your PT!&quot;);\n} else {\n    System.out.println(&quot;It seems that it's still too early, please wait until 10 minutes are left!&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29699608,"reputation":7,"user_id":22762071,"display_name":"Qihang_W"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1698017278,"creation_date":1698017162,"answer_id":77342023,"question_id":77315914,"body_markdown":"updated answer - should swap the index of appointmentTime and now variables as below:\r\n```\r\nint index = Integer.parseInt(indicator) - 1;\r\n\r\nLocalDateTime appointmentTime = listOfAppointment.get(index).getDateTimeOfAppointment();\r\n\r\nLocalDateTime now = LocalDateTime.now();\r\n\r\nDuration timeDifference = Duration.between(now, appointmentTime);\r\n\r\nif (timeDifference.compareTo(Duration.ofMinutes(10)) &lt; 0) {\r\n\r\n    listOfAppointment.get(index).setCheckIn(true);\r\n    System.out.println(&quot;The check-in has been done! Let&#39;s see your PT!&quot;);\r\n} \r\n\r\nelse {\r\n    \r\nSystem.out.println(&quot;It seems that it&#39;s still too early, please wait until 10 minutes are left!&quot;);\r\n\r\n}\r\n```","title":"Java LocalDateTime Duration fundamental","body":"<p>updated answer - should swap the index of appointmentTime and now variables as below:</p>\n<pre><code>int index = Integer.parseInt(indicator) - 1;\n\nLocalDateTime appointmentTime = listOfAppointment.get(index).getDateTimeOfAppointment();\n\nLocalDateTime now = LocalDateTime.now();\n\nDuration timeDifference = Duration.between(now, appointmentTime);\n\nif (timeDifference.compareTo(Duration.ofMinutes(10)) &lt; 0) {\n\n    listOfAppointment.get(index).setCheckIn(true);\n    System.out.println(&quot;The check-in has been done! Let's see your PT!&quot;);\n} \n\nelse {\n    \nSystem.out.println(&quot;It seems that it's still too early, please wait until 10 minutes are left!&quot;);\n\n}\n</code></pre>\n"}],"owner":{"account_id":29699608,"reputation":7,"user_id":22762071,"display_name":"Qihang_W"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77342023,"answer_count":2,"score":-2,"last_activity_date":1698017278,"creation_date":1697628696,"question_id":77315914,"body_markdown":"Here&#39;s my code:\r\n\r\n    // check if the time within 10 mins\r\n    if (Duration.between(listOfAppointment.get(Integer.parseInt(indicator) - 1).getDateTimeOfAppointment(), LocalDateTime.now()).compareTo(Duration.ofMinutes(10)) &lt; 0) { \r\n    \r\n        try {\r\n    \r\n            listOfAppointment.get(Integer.parseInt(indicator) - 1).setCheckIn(true);\r\n            System.out.println(&quot;The check-in has been done! Let&#39;s see your PT!&quot;);\r\n            break;\r\n\r\n        } catch (Exception e) {\r\n    \r\n            System.out.println(&quot;Invalid input, please try again!&quot;);\r\n            indicator = console.nextLine();\r\n        }\r\n\r\n    } else {\r\n        System.out.println(&quot;It seems that it&#39;s still too early, please wait util 10 minutes left!&quot;);\r\n        break;\r\n    }\r\n\r\n\r\nAll related packages imported and I tried with sample date like one day after but still it always printed out the try-block content, please help me resolve it. Thanks!","title":"Java LocalDateTime Duration fundamental","body":"<p>Here's my code:</p>\n<pre><code>// check if the time within 10 mins\nif (Duration.between(listOfAppointment.get(Integer.parseInt(indicator) - 1).getDateTimeOfAppointment(), LocalDateTime.now()).compareTo(Duration.ofMinutes(10)) &lt; 0) { \n\n    try {\n\n        listOfAppointment.get(Integer.parseInt(indicator) - 1).setCheckIn(true);\n        System.out.println(&quot;The check-in has been done! Let's see your PT!&quot;);\n        break;\n\n    } catch (Exception e) {\n\n        System.out.println(&quot;Invalid input, please try again!&quot;);\n        indicator = console.nextLine();\n    }\n\n} else {\n    System.out.println(&quot;It seems that it's still too early, please wait util 10 minutes left!&quot;);\n    break;\n}\n</code></pre>\n<p>All related packages imported and I tried with sample date like one day after but still it always printed out the try-block content, please help me resolve it. Thanks!</p>\n"},{"tags":["java","jdbc","terminal","compiler-errors","jar"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1698017842,"post_id":77342024,"comment_id":136348317,"body_markdown":"The problem is the -cp argument.  You &gt;do&lt; have to have &quot;.&quot; on the path.  You &gt;don&#39;t&lt; have to have to include &quot;ojdbc11.jar&quot; ... unless you are trying to talk to an Oracle DB.   Also ... if you are running on Windows, the classpath separator is &quot;;&quot; not &quot;:&quot;.","body":"The problem is the -cp argument.  You &gt;do&lt; have to have &quot;.&quot; on the path.  You &gt;don&#39;t&lt; have to have to include &quot;ojdbc11.jar&quot; ... unless you are trying to talk to an Oracle DB.   Also ... if you are running on Windows, the classpath separator is &quot;;&quot; not &quot;:&quot;."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1698017972,"post_id":77342024,"comment_id":136348327,"body_markdown":"Hint: rather than looking for random solutions on the internet, find and read the manual entries for the `java` and `javac` command *for your Java &amp; OS platform* and read them, paying close attention to the sections that talk about how to specify the classpath.   If you read (re-read) the documentation, that will increase the probability you will get it right ... and not have to ask this question again for a different problem.","body":"Hint: rather than looking for random solutions on the internet, find and read the manual entries for the <code>java</code> and <code>javac</code> command <i>for your Java &amp; OS platform</i> and read them, paying close attention to the sections that talk about how to specify the classpath.   If you read (re-read) the documentation, that will increase the probability you will get it right ... and not have to ask this question again for a different problem."}],"owner":{"account_id":29730981,"reputation":1,"user_id":22785599,"display_name":"user22785599"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698017176,"creation_date":1698017176,"question_id":77342024,"body_markdown":"I&#39;m working on my project using drivers.\r\n\r\nI compiled this command my java file on the terminal:\r\n```\r\njavac -cp drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar Main.java\r\n```\r\n\r\nran the Main.class file with:\r\n\r\n```\r\njava -cp drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar Main\r\n```\r\n\r\nBut it gives the error like:\r\n```\r\nError: Could not find or load main class Main\r\nCaused by: java.lang.ClassNotFoundException: Main\r\n```\r\n\r\nWhen I run the Main.class without the .jar files like:\r\n```\r\njava Main\r\n```\r\n\r\nit gives:\r\n\r\n```\r\njava.sql.SQLException: No suitable driver found for jdbc:mysql://&lt;databaseURL&gt;\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:708)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:230)\r\n        at Main.main(Main.java:15)\r\n```\r\n\r\nMy code(Main.java) work on the Visual Studio Code.\r\nThe directions on the commands are totally right, and Main is not in any package.\r\nWhat is the problem?\r\n\r\n\r\nI tried what I could found on the internet\r\nsuch as\r\n\r\n```\r\njava -cp .:drivers/mysql-connector-j-8.1.0.jar:drivers/ojdbc11.jar Main\r\njava -cp &quot;drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar&quot; Main\r\n```\r\n","title":"Java compiled with Jar file(external library) and run but gets the error no main class in terminal","body":"<p>I'm working on my project using drivers.</p>\n<p>I compiled this command my java file on the terminal:</p>\n<pre><code>javac -cp drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar Main.java\n</code></pre>\n<p>ran the Main.class file with:</p>\n<pre><code>java -cp drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar Main\n</code></pre>\n<p>But it gives the error like:</p>\n<pre><code>Error: Could not find or load main class Main\nCaused by: java.lang.ClassNotFoundException: Main\n</code></pre>\n<p>When I run the Main.class without the .jar files like:</p>\n<pre><code>java Main\n</code></pre>\n<p>it gives:</p>\n<pre><code>java.sql.SQLException: No suitable driver found for jdbc:mysql://&lt;databaseURL&gt;\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:708)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:230)\n        at Main.main(Main.java:15)\n</code></pre>\n<p>My code(Main.java) work on the Visual Studio Code.\nThe directions on the commands are totally right, and Main is not in any package.\nWhat is the problem?</p>\n<p>I tried what I could found on the internet\nsuch as</p>\n<pre><code>java -cp .:drivers/mysql-connector-j-8.1.0.jar:drivers/ojdbc11.jar Main\njava -cp &quot;drivers\\mysql-connector-j-8.1.0.jar:drivers\\ojdbc11.jar&quot; Main\n</code></pre>\n"},{"tags":["java","maven-2","maven"],"answers":[{"tags":[],"owner":{"account_id":200688,"reputation":584,"user_id":446679,"display_name":"Ryan"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1305585195,"creation_date":1305585195,"answer_id":6024196,"question_id":6024027,"body_markdown":"You can use maven itself to run it, I believe it sets the classpath for you. \r\n\r\n    mvn compile\r\n\r\nwill compile it \r\nthen you run:\r\n\r\n    mvn exec:java -Dexec.mainClass=&quot;com.mycompany.app.App&quot;  \r\n\r\nwhich will execute it. \r\n\r\nYou can see http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/ for some more info on ways to run (including passing command-line args to the thing you want to run)","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>You can use maven itself to run it, I believe it sets the classpath for you. </p>\n\n<pre><code>mvn compile\n</code></pre>\n\n<p>will compile it \nthen you run:</p>\n\n<pre><code>mvn exec:java -Dexec.mainClass=\"com.mycompany.app.App\"  \n</code></pre>\n\n<p>which will execute it. </p>\n\n<p>You can see <a href=\"http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/\" rel=\"noreferrer\">http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/</a> for some more info on ways to run (including passing command-line args to the thing you want to run)</p>\n"},{"tags":[],"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1305585230,"creation_date":1305585230,"answer_id":6024201,"question_id":6024027,"body_markdown":"If you want it simple for you and others, then you can generate a jar with all dependencies in it, using the maven-assembly-plugin. Example is here: http://maven.apache.org/plugins/maven-assembly-plugin/usage.html, section Execution: Building an Assembly","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>If you want it simple for you and others, then you can generate a jar with all dependencies in it, using the maven-assembly-plugin. Example is here: <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/usage.html\" rel=\"nofollow\">http://maven.apache.org/plugins/maven-assembly-plugin/usage.html</a>, section Execution: Building an Assembly</p>\n"},{"comments":[{"owner":{"account_id":394098,"reputation":426,"user_id":756331,"accept_rate":44,"display_name":"mdtsandman"},"score":3,"creation_date":1305592725,"post_id":6024203,"comment_id":6965746,"body_markdown":"To make this solution work I needed to add classpathMavenRepositoryLayout=true and classpathPrefix=/home/.../.m2/repository/ to the manifest section also because default behavior is to just put the name of the jar in the manifest (no reference to it&#39;s location in the filesystem).","body":"To make this solution work I needed to add classpathMavenRepositoryLayout=true and classpathPrefix=/home/.../.m2/repository/ to the manifest section also because default behavior is to just put the name of the jar in the manifest (no reference to it&#39;s location in the filesystem)."},{"owner":{"account_id":219868,"reputation":933,"user_id":476992,"display_name":"iruediger"},"score":0,"creation_date":1305596317,"post_id":6024203,"comment_id":6966128,"body_markdown":"Yes, the default behaviour expects the dependecies to be on the same directory of your main jar. Since you have the dependencies on your local repo, with your solution, the jar can be run from anywhere in your system.","body":"Yes, the default behaviour expects the dependecies to be on the same directory of your main jar. Since you have the dependencies on your local repo, with your solution, the jar can be run from anywhere in your system."}],"tags":[],"owner":{"account_id":219868,"reputation":933,"user_id":476992,"display_name":"iruediger"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1305585242,"creation_date":1305585242,"answer_id":6024203,"question_id":6024027,"body_markdown":"You can make a jar executable by adding the Main-Class attribute to its manifest file. In Maven this is done by the archiver plugin. To add the Main-Class attribute, add this to your pom.xml:\r\n\r\n     &lt;build&gt;\r\n       &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;        \r\n          &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n              &lt;manifest&gt;\r\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                &lt;mainClass&gt;com.mycompany.app.App&lt;/mainClass&gt;\r\n              &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n     &lt;/build&gt;\r\n\r\nYou can now run your jar with the command: `java -jar myjar.jar` or by double clicking on it (not available in all platforms).","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>You can make a jar executable by adding the Main-Class attribute to its manifest file. In Maven this is done by the archiver plugin. To add the Main-Class attribute, add this to your pom.xml:</p>\n\n<pre><code> &lt;build&gt;\n   &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;        \n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n            &lt;mainClass&gt;com.mycompany.app.App&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n &lt;/build&gt;\n</code></pre>\n\n<p>You can now run your jar with the command: <code>java -jar myjar.jar</code> or by double clicking on it (not available in all platforms).</p>\n"},{"comments":[{"owner":{"account_id":394098,"reputation":426,"user_id":756331,"accept_rate":44,"display_name":"mdtsandman"},"score":0,"creation_date":1305590278,"post_id":6024333,"comment_id":6965444,"body_markdown":"I didn&#39;t try the shade plugin, but appassembler works for me.  Thanks!","body":"I didn&#39;t try the shade plugin, but appassembler works for me.  Thanks!"},{"owner":{"account_id":114118,"reputation":4732,"user_id":300236,"accept_rate":67,"display_name":"Brill Pappin"},"score":0,"creation_date":1579721952,"post_id":6024333,"comment_id":105865031,"body_markdown":"The appassembler-plugin ling is dead as of 2020-01-22","body":"The appassembler-plugin ling is dead as of 2020-01-22"},{"owner":{"account_id":222987,"reputation":835,"user_id":481918,"display_name":"jous"},"score":0,"creation_date":1582008675,"post_id":6024333,"comment_id":106617725,"body_markdown":"The new link is probably https://www.mojohaus.org/appassembler/appassembler-maven-plugin/","body":"The new link is probably <a href=\"https://www.mojohaus.org/appassembler/appassembler-maven-plugin/\" rel=\"nofollow noreferrer\">mojohaus.org/appassembler/appassembler-maven-plugin</a>"}],"tags":[],"owner":{"account_id":316159,"reputation":267,"user_id":632168,"accept_rate":50,"display_name":"sul"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1305586548,"creation_date":1305586548,"answer_id":6024333,"question_id":6024027,"body_markdown":"You can use the [maven-shade-plugin][1] which will create an executable uber war with all dependencies.\r\n\r\nOR \r\n\r\nUse the [appassembler-plugin][2] which creates a script that imports all dependencies and lets you execute a main class from the command line.\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-shade-plugin/\r\n  [2]: http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>You can use the <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow\">maven-shade-plugin</a> which will create an executable uber war with all dependencies.</p>\n\n<p>OR </p>\n\n<p>Use the <a href=\"http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/\" rel=\"nofollow\">appassembler-plugin</a> which creates a script that imports all dependencies and lets you execute a main class from the command line.</p>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698016783,"creation_date":1698016783,"answer_id":77342011,"question_id":6024027,"body_markdown":"For completeness, it&#39;s worth mentioning another option.\r\n\r\n[Spring Boot][1] can create an [executable JAR file][2] on UNIX systems.\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-boot\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#deployment.installing","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>For completeness, it's worth mentioning another option.</p>\n<p><a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring Boot</a> can create an <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#deployment.installing\" rel=\"nofollow noreferrer\">executable JAR file</a> on UNIX systems.</p>\n"}],"owner":{"account_id":394098,"reputation":426,"user_id":756331,"accept_rate":44,"display_name":"mdtsandman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21469,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":6024203,"answer_count":5,"score":19,"last_activity_date":1698016783,"creation_date":1305583899,"question_id":6024027,"body_markdown":"I am brand new to both java and to maven, so this is likely very simple.\r\n\r\nIf I follow the maven2 `hello world` instructions here:\r\n\r\nhttp://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\r\n\r\neverything works OK.  If I then alter `pom.xml` to bring in a dependency from a remote repository, the files for this dependency get stored in `~/.m2/repository/new-dependency/`.\r\n\r\nUsing the syntax in the `hello world` instructions to run the application requires that I add the absolute path to the dependency to my classpath (either by setting the environment variable or via the command line switch):\r\n\r\n    java -cp target/my-app-1.0-SNAPSHOT.jar:/.../.m2/.../new-dependency.jar com.mycompany.app.App\r\n\r\nThis will obviously get unwieldy quickly :)\r\n\r\nI suspect that this is not the usual way of running a java program and that I just need to read more about .jar files, but while I am doing so I would appreciate any tips on how to do this properly.\r\n\r\nI am not using an IDE, btw.  vim from the command line.\r\n\r\nThanks!\r\n\r\nMike.\r\n","title":"How do I package and run a simple command-line application with dependencies using maven?","body":"<p>I am brand new to both java and to maven, so this is likely very simple.</p>\n\n<p>If I follow the maven2 <code>hello world</code> instructions here:</p>\n\n<p><a href=\"http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\" rel=\"noreferrer\">http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html</a></p>\n\n<p>everything works OK.  If I then alter <code>pom.xml</code> to bring in a dependency from a remote repository, the files for this dependency get stored in <code>~/.m2/repository/new-dependency/</code>.</p>\n\n<p>Using the syntax in the <code>hello world</code> instructions to run the application requires that I add the absolute path to the dependency to my classpath (either by setting the environment variable or via the command line switch):</p>\n\n<pre><code>java -cp target/my-app-1.0-SNAPSHOT.jar:/.../.m2/.../new-dependency.jar com.mycompany.app.App\n</code></pre>\n\n<p>This will obviously get unwieldy quickly :)</p>\n\n<p>I suspect that this is not the usual way of running a java program and that I just need to read more about .jar files, but while I am doing so I would appreciate any tips on how to do this properly.</p>\n\n<p>I am not using an IDE, btw.  vim from the command line.</p>\n\n<p>Thanks!</p>\n\n<p>Mike.</p>\n"},{"tags":["java","android","android-intent","android-camera-intent"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698008458,"post_id":77341640,"comment_id":136347649,"body_markdown":"&quot;In the onActivityResult method&quot; -- FWIW, [that `Intent` action does not return a result](https://developer.android.com/reference/kotlin/android/provider/MediaStore?hl=en#intent_action_still_image_camera). &quot;with message log like this&quot; -- there is little to go on there. However, please bear in mind that your process might be terminated while your UI is in the background and the camera app is in the foreground. The &quot;Relaunch all activities&quot; line suggests that perhaps this is what happened to you.","body":"&quot;In the onActivityResult method&quot; -- FWIW, <a href=\"https://developer.android.com/reference/kotlin/android/provider/MediaStore?hl=en#intent_action_still_image_camera\" rel=\"nofollow noreferrer\">that <code>Intent</code> action does not return a result</a>. &quot;with message log like this&quot; -- there is little to go on there. However, please bear in mind that your process might be terminated while your UI is in the background and the camera app is in the foreground. The &quot;Relaunch all activities&quot; line suggests that perhaps this is what happened to you."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698008479,"post_id":77341640,"comment_id":136347651,"body_markdown":"&quot;the queries to database all of them return like no data in database&quot; -- that code is not in your question, so it will be difficult for us to help with it. &quot;And after that the apk crash&quot; -- look for a stack trace associated with the crash.","body":"&quot;the queries to database all of them return like no data in database&quot; -- that code is not in your question, so it will be difficult for us to help with it. &quot;And after that the apk crash&quot; -- look for a stack trace associated with the crash."},{"owner":{"account_id":1585736,"reputation":2153,"user_id":1470146,"accept_rate":24,"display_name":"Jorge Infante Osorio"},"score":0,"creation_date":1698012863,"post_id":77341640,"comment_id":136347995,"body_markdown":"On the activityresult I don&#180;t use a result from the camera, I just get the list of photos using a Cursor in another thread: \n\nCursor cursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, selection, selectionArgs, orderBy);\n\n\n\n\nAbout the database code it work if no white screen present, for example:\nString sql = &quot;select * from plazas Where email= &#39;&quot; + GlobalMembers.GM_EMAIL + &quot;&#39;&quot;;\nSQLiteDatabase db = SqliteDB.getInstance(this).getReadableDatabase();\nCursor cursor = db.rawQuery(sql, null);","body":"On the activityresult I don&#180;t use a result from the camera, I just get the list of photos using a Cursor in another thread:   Cursor cursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_&zwnj;&#8203;CONTENT_URI, columns, selection, selectionArgs, orderBy);     About the database code it work if no white screen present, for example: String sql = &quot;select * from plazas Where email= &#39;&quot; + GlobalMembers.GM_EMAIL + &quot;&#39;&quot;; SQLiteDatabase db = SqliteDB.getInstance(this).getReadableDatabase(); Cursor cursor = db.rawQuery(sql, null);"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698014323,"post_id":77341640,"comment_id":136348098,"body_markdown":"&quot;I just get the list of photos using a Cursor in another thread&quot; -- note that there is no requirement for the camera app you are starting to save an image on the device in a publicly available location, and there is no requirement for it to be indexed by `MediaStore` by the time control returns to your app.","body":"&quot;I just get the list of photos using a Cursor in another thread&quot; -- note that there is no requirement for the camera app you are starting to save an image on the device in a publicly available location, and there is no requirement for it to be indexed by <code>MediaStore</code> by the time control returns to your app."},{"owner":{"account_id":1585736,"reputation":2153,"user_id":1470146,"accept_rate":24,"display_name":"Jorge Infante Osorio"},"score":0,"creation_date":1698015919,"post_id":77341640,"comment_id":136348198,"body_markdown":"that&#180;s right, this is why I put a delay about 2s and after that I return to the main activity flow and can pull the images from CDIM folder using the list of paths from the query to MediaStore. It work in many differents phones but I need it work in all. Event if I not take a single picture, just open the camera and close it, I get on those phones a white screen. No in my phone, not in another phones. I will put a log file in my question.","body":"that&#180;s right, this is why I put a delay about 2s and after that I return to the main activity flow and can pull the images from CDIM folder using the list of paths from the query to MediaStore. It work in many differents phones but I need it work in all. Event if I not take a single picture, just open the camera and close it, I get on those phones a white screen. No in my phone, not in another phones. I will put a log file in my question."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698016935,"post_id":77341640,"comment_id":136348267,"body_markdown":"&quot;It work in many differents phones&quot; -- it also depends on the camera app. &quot;It work in many differents phones but I need it work in all&quot; -- then use CameraX or another camera library and take the photo yourself.","body":"&quot;It work in many differents phones&quot; -- it also depends on the camera app. &quot;It work in many differents phones but I need it work in all&quot; -- then use CameraX or another camera library and take the photo yourself."},{"owner":{"account_id":1585736,"reputation":2153,"user_id":1470146,"accept_rate":24,"display_name":"Jorge Infante Osorio"},"score":0,"creation_date":1698018077,"post_id":77341640,"comment_id":136348333,"body_markdown":"Can you take a look to the log file?","body":"Can you take a look to the log file?"}],"owner":{"account_id":1585736,"reputation":2153,"user_id":1470146,"accept_rate":24,"display_name":"Jorge Infante Osorio"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698016259,"creation_date":1698007485,"question_id":77341640,"body_markdown":"In my java apk I use this code to launch the camera:\r\n\r\n       cameraIntent = new Intent(MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA);\r\n       cameraIntent.putExtra(&quot;android.intent.extra.quickCapture&quot;, true);\r\n       //File photoFile = createImageFile();\r\n       //Uri photoURI = FileProvider.getUriForFile(getApplicationContext(),\r\n                                        &quot;com.lo.test.provider&quot;, photoFile);\r\n       //cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);\r\n       startActivityForResult(cameraIntent, REQUEST_CAPTURE_IMAGE);\r\n\r\nIn the onActivityResult method, for many different devices, I can get the return flow and work with the photos I take. But with a few devices I get a white screen with message log like this:\r\n\r\n    2023-10-22 01:45:02.056 13137-13137 System.out              com.lo.test                 I  Fin de openCameraIntent \r\n    2023-10-22 01:45:02.056 13137-13137 Second Activity         com.lo.test                 V  Fin de openCameraIntent \r\n    2023-10-22 01:45:12.449 13137-13150 o.test         com.lo.test                 W  Reducing the number of considered missed Gc histogram windows from 111 to 100\r\n    ---------------------------- PROCESS ENDED (13137) for package com.lo.test ----------------------------\r\n    ---------------------------- PROCESS STARTED (17417) for package com.lo.test ----------------------------\r\n    2023-10-22 01:45:21.991 17417-17417 ActivityThread          com.lo.test                 I  Relaunch all activities: onCoreSettingsChange\r\n    2023-10-22 01:45:22.040 17417-17417 ziparchive              com.lo.test                 W  Unable to open &#39;/data/app/~~w5RdZZDsNzvS9Unhg0IXiw==/com.lo.test-hPTUSB_ZDsOQzoOcVmvj9w==/base.dm&#39;: No such file or directory\r\n    2023-10-22 01:45:22.040 17417-17417 ziparchive              com.lo.test                 W  Unable to open &#39;/data/app/~~w5RdZZDsNzvS9Unhg0IXiw==/com.lo.test-hPTUSB_ZDsOQzoOcVmvj9w==/base.dm&#39;: No such file or directory\r\n\r\nAt this point the queries to database all of them return like no data in database(the database has data)\r\n\r\nAnd after that the apk crash. \r\n\r\nEDIT: \r\nThe log file https://easyupload.io/2wpxve\r\n\r\nAny idea?\r\n","title":"Android java apk with white screen after return from camera intent","body":"<p>In my java apk I use this code to launch the camera:</p>\n<pre><code>   cameraIntent = new Intent(MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA);\n   cameraIntent.putExtra(&quot;android.intent.extra.quickCapture&quot;, true);\n   //File photoFile = createImageFile();\n   //Uri photoURI = FileProvider.getUriForFile(getApplicationContext(),\n                                    &quot;com.lo.test.provider&quot;, photoFile);\n   //cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);\n   startActivityForResult(cameraIntent, REQUEST_CAPTURE_IMAGE);\n</code></pre>\n<p>In the onActivityResult method, for many different devices, I can get the return flow and work with the photos I take. But with a few devices I get a white screen with message log like this:</p>\n<pre><code>2023-10-22 01:45:02.056 13137-13137 System.out              com.lo.test                 I  Fin de openCameraIntent \n2023-10-22 01:45:02.056 13137-13137 Second Activity         com.lo.test                 V  Fin de openCameraIntent \n2023-10-22 01:45:12.449 13137-13150 o.test         com.lo.test                 W  Reducing the number of considered missed Gc histogram windows from 111 to 100\n---------------------------- PROCESS ENDED (13137) for package com.lo.test ----------------------------\n---------------------------- PROCESS STARTED (17417) for package com.lo.test ----------------------------\n2023-10-22 01:45:21.991 17417-17417 ActivityThread          com.lo.test                 I  Relaunch all activities: onCoreSettingsChange\n2023-10-22 01:45:22.040 17417-17417 ziparchive              com.lo.test                 W  Unable to open '/data/app/~~w5RdZZDsNzvS9Unhg0IXiw==/com.lo.test-hPTUSB_ZDsOQzoOcVmvj9w==/base.dm': No such file or directory\n2023-10-22 01:45:22.040 17417-17417 ziparchive              com.lo.test                 W  Unable to open '/data/app/~~w5RdZZDsNzvS9Unhg0IXiw==/com.lo.test-hPTUSB_ZDsOQzoOcVmvj9w==/base.dm': No such file or directory\n</code></pre>\n<p>At this point the queries to database all of them return like no data in database(the database has data)</p>\n<p>And after that the apk crash.</p>\n<p>EDIT:\nThe log file <a href=\"https://easyupload.io/2wpxve\" rel=\"nofollow noreferrer\">https://easyupload.io/2wpxve</a></p>\n<p>Any idea?</p>\n"},{"tags":["java","eclipse","maven","hadoop","kerberos"],"comments":[{"owner":{"account_id":6693666,"reputation":8924,"user_id":5162372,"display_name":"Samson Scharfrichter"},"score":0,"creation_date":1494458419,"post_id":43903262,"comment_id":74842200,"body_markdown":"Is that the *only* error message you get -- e.g. nothing about &quot;native libs&quot; or &quot;AES support&quot;? Do you use the same, exact JDK? And did you enable the debugging trace as explained in https://steveloughran.gitbooks.io/kerberos_and_hadoop/content/sections/secrets.html ?","body":"Is that the <i>only</i> error message you get -- e.g. nothing about &quot;native libs&quot; or &quot;AES support&quot;? Do you use the same, exact JDK? And did you enable the debugging trace as explained in <a href=\"https://steveloughran.gitbooks.io/kerberos_and_hadoop/content/sections/secrets.html\" rel=\"nofollow noreferrer\">steveloughran.gitbooks.io/kerberos_and_hadoop/content/sectio&zwnj;&#8203;ns/&hellip;</a> ?"},{"owner":{"account_id":9744042,"reputation":9944,"user_id":7224597,"accept_rate":60,"display_name":"philantrovert"},"score":0,"creation_date":1494499062,"post_id":43903262,"comment_id":74859243,"body_markdown":"check active keytab by using `klist` see if you find something interesting","body":"check active keytab by using <code>klist</code> see if you find something interesting"},{"owner":{"account_id":7046978,"reputation":69,"user_id":5397509,"display_name":"Fahad Sheikh"},"score":0,"creation_date":1494507261,"post_id":43903262,"comment_id":74865111,"body_markdown":"yes that is the only message I see. java.io.IOException: Login failure for a_rfda1_nd from keytab file:/I:/workspace/POC/target/POC-0.0.1-SNAPSHOT-jar-with-dependencies.jar!/user.keytab: javax.security.auth.login.LoginException: Unable to obtain p\nassword from user\n\nI see its pointing to the correct keytab file in my jar but not able to detect the encrypted password from it. I used version 1.8 in eclipse for JDK and run my jar with C:\\FAST\\JDK64\\1.8.0.102\\bin\\java.exe command before -jar. let me try the debugging trace.","body":"yes that is the only message I see. java.io.IOException: Login failure for a_rfda1_nd from keytab file:/I:/workspace/POC/target/POC-0.0.1-SNAPSHOT-jar-with-de&zwnj;&#8203;pendencies.jar!/user&zwnj;&#8203;.keytab: javax.security.auth.login.LoginException: Unable to obtain p assword from user  I see its pointing to the correct keytab file in my jar but not able to detect the encrypted password from it. I used version 1.8 in eclipse for JDK and run my jar with C:\\FAST\\JDK64\\1.8.0.102\\bin\\java.exe command before -jar. let me try the debugging trace."},{"owner":{"account_id":7046978,"reputation":69,"user_id":5397509,"display_name":"Fahad Sheikh"},"score":0,"creation_date":1494512015,"post_id":43903262,"comment_id":74869029,"body_markdown":"Tried the debugging and this is what I get, its the same principal key its looking for as defined in my keytab.\n`Java config name: krb5.conf\n&gt;&gt;&gt; KdcAccessibility: reset\n&gt;&gt;&gt; KdcAccessibility: reset\nLooking for keys for: user@DOMAIN.COM`","body":"Tried the debugging and this is what I get, its the same principal key its looking for as defined in my keytab. <code>Java config name: krb5.conf &gt;&gt;&gt; KdcAccessibility: reset &gt;&gt;&gt; KdcAccessibility: reset Looking for keys for: user@DOMAIN.COM</code>"},{"owner":{"account_id":7046978,"reputation":69,"user_id":5397509,"display_name":"Fahad Sheikh"},"score":0,"creation_date":1494512764,"post_id":43903262,"comment_id":74869657,"body_markdown":"I did the klist on my keytab and I see 8 differently encrypted profiles, all with the same principal name. That should be fine I believe as the java program could pick any of the 8, unless there is a specific encryption I need to state? When I do klist after running the keytab I get a service principal that is different from my keytab principal.","body":"I did the klist on my keytab and I see 8 differently encrypted profiles, all with the same principal name. That should be fine I believe as the java program could pick any of the 8, unless there is a specific encryption I need to state? When I do klist after running the keytab I get a service principal that is different from my keytab principal."},{"owner":{"account_id":6693666,"reputation":8924,"user_id":5162372,"display_name":"Samson Scharfrichter"},"score":0,"creation_date":1494529159,"post_id":43903262,"comment_id":74880209,"body_markdown":"`klist -e -k &lt;keytab&gt;` will show the actual encryption used on each entry. Kerberos tries each encryption allowed in its configuration, in that order. Also, if you have multiple KVNO, only the last one is used (with a 2nd try on the previous one, just in case the keytab has been updated before the actual password change)","body":"<code>klist -e -k &lt;keytab&gt;</code> will show the actual encryption used on each entry. Kerberos tries each encryption allowed in its configuration, in that order. Also, if you have multiple KVNO, only the last one is used (with a 2nd try on the previous one, just in case the keytab has been updated before the actual password change)"},{"owner":{"account_id":7046978,"reputation":69,"user_id":5397509,"display_name":"Fahad Sheikh"},"score":0,"creation_date":1494532750,"post_id":43903262,"comment_id":74882240,"body_markdown":"So it seems the error is something different. I am bundling my .keytab file in the Jar i create and in my code, i give it the resource path. it seems that when jar get created, the bundled files are treated as streams, not files. The UserGroupInformation.loginUserFromKeytab API takes in the keytab file path and not the content of the file. \n\nI&#39;m saying because when i hardcoded the path, it run perfectly fine on cmd line. Eclipse is very different in this case.","body":"So it seems the error is something different. I am bundling my .keytab file in the Jar i create and in my code, i give it the resource path. it seems that when jar get created, the bundled files are treated as streams, not files. The UserGroupInformation.loginUserFromKeytab API takes in the keytab file path and not the content of the file.   I&#39;m saying because when i hardcoded the path, it run perfectly fine on cmd line. Eclipse is very different in this case."},{"owner":{"account_id":11467258,"reputation":1984,"user_id":8405122,"display_name":"Francesco Clementi"},"score":0,"creation_date":1633353293,"post_id":43903262,"comment_id":122729522,"body_markdown":"Did you fixed the error?","body":"Did you fixed the error?"},{"owner":{"account_id":14237742,"reputation":741,"user_id":10454562,"display_name":"Venkatesh Gotimukul"},"score":0,"creation_date":1648974692,"post_id":43903262,"comment_id":126754828,"body_markdown":"@FahadSheikh I am facing the same issue, I am able to run it in my local when the keytab is in local but facing issues when running it from JAR as it only accepts path and not streams, how did you resolve this issue?","body":"@FahadSheikh I am facing the same issue, I am able to run it in my local when the keytab is in local but facing issues when running it from JAR as it only accepts path and not streams, how did you resolve this issue?"}],"answers":[{"tags":[],"owner":{"account_id":7501711,"reputation":709,"user_id":5699784,"display_name":"Kai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537413552,"creation_date":1537413552,"answer_id":52417069,"question_id":43903262,"body_markdown":"make sure the keytab file is in the current directory, other than classpath.","title":"Kerberos: Login failure for &lt;user&gt; from keytab file javax.security.auth.login.LoginException: Unable to obtain p assword from user","body":"<p>make sure the keytab file is in the current directory, other than classpath.</p>\n"}],"owner":{"account_id":7046978,"reputation":69,"user_id":5397509,"display_name":"Fahad Sheikh"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9765,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698015735,"creation_date":1494452922,"question_id":43903262,"body_markdown":"I have a java program that uses a kerberos keytab file to securely log in to my hadoop server. I have used the below code to configure everything and it works perfectly fine in Eclipse IDE, but when I create an executable jar out of it, via Maven, and run on command line, it doesn&#39;t work. I see that it is able to read the keytab file but not able to retreive the password for the user id specified, thus the error. Any advise?\r\n\r\n    Configuration conf = new Configuration();\r\n    conf.set(&quot;hadoop.security.authentication&quot;, &quot;kerberos&quot;);\r\n    UserGroupInformation.setConfiguration(conf);\r\n    URL file = this.getClass().getClassLoader().getResource(&quot;file.keytab&quot;);\r\n    UserGroupInformation.loginUserFromKeytab(&quot;xyzUser&quot;, file.getPath());\r\n\r\nMy keytab file is saved in the root folder and I have added it to my pom.xml as a resource tag. Below is the command I am testing my jar file with:\r\n\r\n    java -jar myjar-0.0.1-SNAPSHOT-jar-with-dependencies.jar","title":"Kerberos: Login failure for &lt;user&gt; from keytab file javax.security.auth.login.LoginException: Unable to obtain p assword from user","body":"<p>I have a java program that uses a kerberos keytab file to securely log in to my hadoop server. I have used the below code to configure everything and it works perfectly fine in Eclipse IDE, but when I create an executable jar out of it, via Maven, and run on command line, it doesn't work. I see that it is able to read the keytab file but not able to retreive the password for the user id specified, thus the error. Any advise?</p>\n\n<pre><code>Configuration conf = new Configuration();\nconf.set(\"hadoop.security.authentication\", \"kerberos\");\nUserGroupInformation.setConfiguration(conf);\nURL file = this.getClass().getClassLoader().getResource(\"file.keytab\");\nUserGroupInformation.loginUserFromKeytab(\"xyzUser\", file.getPath());\n</code></pre>\n\n<p>My keytab file is saved in the root folder and I have added it to my pom.xml as a resource tag. Below is the command I am testing my jar file with:</p>\n\n<pre><code>java -jar myjar-0.0.1-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":7959023,"reputation":952,"user_id":10323800,"display_name":"Mahmoud Odeh"},"score":0,"creation_date":1614615957,"post_id":66425671,"comment_id":117432809,"body_markdown":"show us the controller method","body":"show us the controller method"},{"owner":{"account_id":14918495,"reputation":29,"user_id":10771586,"display_name":"Que1101"},"score":0,"creation_date":1614632870,"post_id":66425671,"comment_id":117439501,"body_markdown":"I updated the controller method and hope that it helps.","body":"I updated the controller method and hope that it helps."}],"answers":[{"tags":[],"owner":{"account_id":14918495,"reputation":29,"user_id":10771586,"display_name":"Que1101"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698012689,"creation_date":1698012689,"answer_id":77341862,"question_id":66425671,"body_markdown":"The error is due to the fact I added the to the model the new login method instead of creating a new login object then adding the object to the model. So when i attempt to set the parameters to pass with the form it is sending two parameters that the addLogin() is not prepared for and seems that they have not been binded to any object from the previous method. ","title":"Spring form input causes 500 server error","body":"<p>The error is due to the fact I added the to the model the new login method instead of creating a new login object then adding the object to the model. So when i attempt to set the parameters to pass with the form it is sending two parameters that the addLogin() is not prepared for and seems that they have not been binded to any object from the previous method.</p>\n"}],"owner":{"account_id":14918495,"reputation":29,"user_id":10771586,"display_name":"Que1101"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698012689,"creation_date":1614615231,"question_id":66425671,"body_markdown":"**here is the jsp:**\r\n\r\nThe jsp renders without the spring form input tags being used. Don&#39;t know if that will help with identifying the issue.I believe i added the right inport for the form tags.\r\n  \r\n     &lt;!-- add tag lib in order to use form tags --&gt; \r\n     &lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\r\n\r\n\r\n     &lt;form:form action=&quot;addLogin&quot; modelAttribute=&quot;login&quot; &gt;\r\n     &lt;table&gt;\r\n     &lt;tr&gt;\r\n     &lt;td&gt;Username:&lt;/td&gt;\r\n     &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;userName&quot;/&gt;&lt;/td&gt;\r\n     &lt;/tr&gt;\r\n     &lt;tr&gt;\r\n     &lt;td&gt;Password:&lt;/td&gt;\r\n     &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;password&quot;/&gt;&lt;/td&gt;\r\n     &lt;/tr&gt;\r\n     &lt;/table&gt;\r\n     &lt;br&gt;\r\n\r\n     &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\r\n     &lt;/form:form&gt;\r\n   \r\n**Then the error:**\r\n\r\nHTTP Status 500 – Internal Server Error\r\n\r\n\r\nType Exception Report\r\n\r\nMessage An exception occurred processing [/WEB-INF/view/Login.jsp] at line [24]\r\n\r\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\r\nException\r\norg.apache.jasper.JasperException: An exception occurred processing [/WEB-INF/view/Login.jsp] at line [24]\r\n\r\n    21:  \r\n    22: &lt;tr&gt;\r\n    23: &lt;td&gt;Username:&lt;/td&gt;\r\n    24:  &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;userName&quot;/&gt;&lt;/td&gt;\r\n    25: &lt;/tr&gt;\r\n    26: &lt;tr&gt;\r\n    27: &lt;td&gt;Password:&lt;/td&gt;\r\n\r\n\r\nRoot Cause\r\njava.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;login&#39; available as request attribute\r\n\torg.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153)\r\n\r\nCould someone please tell me what is going on with the form tags that i used and why they are not working as expected.I believe this is what is causing me the error. I tried clearing cache of eclipse, re-importing the tags but nothing seemed to be succesful.\r\n\r\n**Here is the controller method**\r\n\r\n    @GetMapping(&quot;/Show&quot;)\r\n\tpublic String show(Model theModel) {\r\n\t\t\r\n\t\ttheModel.addAttribute(&quot;login&quot;,new Login());\r\n\t\treturn &quot;Login&quot;;\r\n\t}\r\n\t\r\n\r\n","title":"Spring form input causes 500 server error","body":"<p><strong>here is the jsp:</strong></p>\n<p>The jsp renders without the spring form input tags being used. Don't know if that will help with identifying the issue.I believe i added the right inport for the form tags.</p>\n<pre><code> &lt;!-- add tag lib in order to use form tags --&gt; \n &lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\n\n\n &lt;form:form action=&quot;addLogin&quot; modelAttribute=&quot;login&quot; &gt;\n &lt;table&gt;\n &lt;tr&gt;\n &lt;td&gt;Username:&lt;/td&gt;\n &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;userName&quot;/&gt;&lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr&gt;\n &lt;td&gt;Password:&lt;/td&gt;\n &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;password&quot;/&gt;&lt;/td&gt;\n &lt;/tr&gt;\n &lt;/table&gt;\n &lt;br&gt;\n\n &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n &lt;/form:form&gt;\n</code></pre>\n<p><strong>Then the error:</strong></p>\n<p>HTTP Status 500 – Internal Server Error</p>\n<p>Type Exception Report</p>\n<p>Message An exception occurred processing [/WEB-INF/view/Login.jsp] at line [24]</p>\n<p>Description The server encountered an unexpected condition that prevented it from fulfilling the request.</p>\n<p>Exception\norg.apache.jasper.JasperException: An exception occurred processing [/WEB-INF/view/Login.jsp] at line [24]</p>\n<pre><code>21:  \n22: &lt;tr&gt;\n23: &lt;td&gt;Username:&lt;/td&gt;\n24:  &lt;td&gt;&lt;form:input type=&quot;text&quot; path=&quot;userName&quot;/&gt;&lt;/td&gt;\n25: &lt;/tr&gt;\n26: &lt;tr&gt;\n27: &lt;td&gt;Password:&lt;/td&gt;\n</code></pre>\n<p>Root Cause\njava.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'login' available as request attribute\norg.springframework.web.servlet.support.BindStatus.(BindStatus.java:153)</p>\n<p>Could someone please tell me what is going on with the form tags that i used and why they are not working as expected.I believe this is what is causing me the error. I tried clearing cache of eclipse, re-importing the tags but nothing seemed to be succesful.</p>\n<p><strong>Here is the controller method</strong></p>\n<pre><code>@GetMapping(&quot;/Show&quot;)\npublic String show(Model theModel) {\n    \n    theModel.addAttribute(&quot;login&quot;,new Login());\n    return &quot;Login&quot;;\n}\n</code></pre>\n"},{"tags":["java","apache","security","shiro"],"comments":[{"owner":{"account_id":94130,"reputation":4483,"user_id":257169,"accept_rate":67,"display_name":"amoe"},"score":2,"creation_date":1505812582,"post_id":45265622,"comment_id":79555246,"body_markdown":"FWIW, it seems that 1.4.0 hasn&#39;t been released officially yet.  At least, the website says that 1.4.0 is still in &quot;early access mode&quot;.  So it&#39;s probably best to stick with 1.3.2, at least until the website is updated.  (`IniSecurityManagerFactory` is not deprecated in 1.3.2.)","body":"FWIW, it seems that 1.4.0 hasn&#39;t been released officially yet.  At least, the website says that 1.4.0 is still in &quot;early access mode&quot;.  So it&#39;s probably best to stick with 1.3.2, at least until the website is updated.  (<code>IniSecurityManagerFactory</code> is not deprecated in 1.3.2.)"},{"owner":{"account_id":4080253,"reputation":430,"user_id":3350921,"display_name":"saygley"},"score":1,"creation_date":1574606272,"post_id":45265622,"comment_id":104283548,"body_markdown":"FWIW, we are in Shiro 1.4.2 as of today, and the documentation is still outdated.","body":"FWIW, we are in Shiro 1.4.2 as of today, and the documentation is still outdated."},{"owner":{"account_id":13677323,"reputation":3369,"user_id":9868445,"display_name":"aderchox"},"score":0,"creation_date":1631412823,"post_id":45265622,"comment_id":122213912,"body_markdown":"FWI still W, the same happens when following the [10 minute tutorial](https://shiro.apache.org/10-minute-tutorial.html) with Shiro 1.7.1.","body":"FWI still W, the same happens when following the <a href=\"https://shiro.apache.org/10-minute-tutorial.html\" rel=\"nofollow noreferrer\">10 minute tutorial</a> with Shiro 1.7.1."}],"answers":[{"tags":[],"owner":{"account_id":1323434,"reputation":678,"user_id":1268759,"display_name":"sebkur"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1698012672,"creation_date":1581273204,"answer_id":60139962,"question_id":45265622,"body_markdown":"As of Shiro 1.5 there is now `BasicIniEnvironment`. Its [Javadoc](https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/env/BasicIniEnvironment.html) suggests to create the `SecurityManager` like this:\r\n\r\n    Environment env = new BasicIniEnvironment(&quot;classpath:shiro.ini&quot;);\r\n    SecurityManager securityManager = env.getSecurityManager();\r\n\r\nYou can then continue:\r\n\r\n    SecurityUtils.setSecurityManager(securityManager);\r\n\r\nThat being said, I think when using Shiro in a standard web application, I think one shouldn&#39;t be doing this on one&#39;s own, but instead configure the `EnvironmentLoaderListener` in the `web.xml` file:\r\n\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.apache.shiro.web.env.EnvironmentLoaderListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\r\nAccording to the [Javadoc](https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/web/env/EnvironmentLoaderListener.html) this will use the [EnvrionmentLoader](https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/web/env/EnvironmentLoader.html) and load the configuration from a `shiro.ini` by looking at the following locations:\r\n\r\n1. /WEB-INF/shiro.ini\r\n2. classpath:shiro.ini\r\n\r\nThus one can simply put the `shiro.ini` on the classpath, add Shiro will pick the config up itself.","title":"Apache Shiro 1.4.0 initialization","body":"<p>As of Shiro 1.5 there is now <code>BasicIniEnvironment</code>. Its <a href=\"https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/env/BasicIniEnvironment.html\" rel=\"nofollow noreferrer\">Javadoc</a> suggests to create the <code>SecurityManager</code> like this:</p>\n<pre><code>Environment env = new BasicIniEnvironment(&quot;classpath:shiro.ini&quot;);\nSecurityManager securityManager = env.getSecurityManager();\n</code></pre>\n<p>You can then continue:</p>\n<pre><code>SecurityUtils.setSecurityManager(securityManager);\n</code></pre>\n<p>That being said, I think when using Shiro in a standard web application, I think one shouldn't be doing this on one's own, but instead configure the <code>EnvironmentLoaderListener</code> in the <code>web.xml</code> file:</p>\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;org.apache.shiro.web.env.EnvironmentLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n<p>According to the <a href=\"https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/web/env/EnvironmentLoaderListener.html\" rel=\"nofollow noreferrer\">Javadoc</a> this will use the <a href=\"https://shiro.apache.org/static/1.12.0/apidocs/org/apache/shiro/web/env/EnvironmentLoader.html\" rel=\"nofollow noreferrer\">EnvrionmentLoader</a> and load the configuration from a <code>shiro.ini</code> by looking at the following locations:</p>\n<ol>\n<li>/WEB-INF/shiro.ini</li>\n<li>classpath:shiro.ini</li>\n</ol>\n<p>Thus one can simply put the <code>shiro.ini</code> on the classpath, add Shiro will pick the config up itself.</p>\n"}],"owner":{"account_id":2869366,"reputation":16311,"user_id":2463035,"accept_rate":84,"display_name":"Vasiliy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1685,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":1,"score":15,"last_activity_date":1698012672,"creation_date":1500816560,"question_id":45265622,"body_markdown":"I installed Apache Shiro 1.4.0 and was following [this official tutorial][1] in order to set it up. \r\n\r\nWhen I tried to initialize `SecurityUtils` with `SecurityManager` using this code from tutorial:\r\n\r\n    Factory&lt;SecurityManager&gt; factory = new IniSecurityManagerFactory(&quot;classpath:shiro.ini&quot;);\r\n    SecurityManager securityManager = factory.getInstance();\r\n    SecurityUtils.setSecurityManager(securityManager);\r\n\r\nI got a message that `IniSecurityManagerFactory` is deprecated now in favor of Shiro&#39;s `Environment`. \r\n\r\nI can&#39;t find any tutorial that shows how to initialize Shiro using `Environment`, and its documentation doesn&#39;t help much:\r\n\r\n&gt; An Environment instance encapsulates all of the objects that Shiro\r\n&gt; requires to function. It is essentially a &#39;meta&#39; object from which all\r\n&gt; Shiro components can be obtained for an application.\r\n&gt; \r\n&gt; An Environment instance is usually created as a result of parsing a\r\n&gt; Shiro configuration file. The environment instance can be stored in\r\n&gt; any place the application deems necessary, and from it, can retrieve\r\n&gt; any of Shiro&#39;s components that might be necessary in implementing\r\n&gt; security behavior.\r\n&gt; \r\n&gt; For example, the most obvious component accessible via an Environment\r\n&gt; instance is the application&#39;s securityManager.\r\n\r\nSo, how do I use this new initialization mechanism?\r\n\r\n[1]: https://shiro.apache.org/tutorial.html","title":"Apache Shiro 1.4.0 initialization","body":"<p>I installed Apache Shiro 1.4.0 and was following <a href=\"https://shiro.apache.org/tutorial.html\" rel=\"noreferrer\">this official tutorial</a> in order to set it up. </p>\n\n<p>When I tried to initialize <code>SecurityUtils</code> with <code>SecurityManager</code> using this code from tutorial:</p>\n\n<pre><code>Factory&lt;SecurityManager&gt; factory = new IniSecurityManagerFactory(\"classpath:shiro.ini\");\nSecurityManager securityManager = factory.getInstance();\nSecurityUtils.setSecurityManager(securityManager);\n</code></pre>\n\n<p>I got a message that <code>IniSecurityManagerFactory</code> is deprecated now in favor of Shiro's <code>Environment</code>. </p>\n\n<p>I can't find any tutorial that shows how to initialize Shiro using <code>Environment</code>, and its documentation doesn't help much:</p>\n\n<blockquote>\n  <p>An Environment instance encapsulates all of the objects that Shiro\n  requires to function. It is essentially a 'meta' object from which all\n  Shiro components can be obtained for an application.</p>\n  \n  <p>An Environment instance is usually created as a result of parsing a\n  Shiro configuration file. The environment instance can be stored in\n  any place the application deems necessary, and from it, can retrieve\n  any of Shiro's components that might be necessary in implementing\n  security behavior.</p>\n  \n  <p>For example, the most obvious component accessible via an Environment\n  instance is the application's securityManager.</p>\n</blockquote>\n\n<p>So, how do I use this new initialization mechanism?</p>\n"},{"tags":["java","cmd","version"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1697999014,"post_id":77341133,"comment_id":136346736,"body_markdown":"Set up your environment so all you need to do is set `JAVA_HOME` at the command line","body":"Set up your environment so all you need to do is set <code>JAVA_HOME</code> at the command line"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1698011870,"post_id":77341133,"comment_id":136347932,"body_markdown":"Wrong reason to close. Specifying a default JDK falls under the category of programming tools. And this is one of the most common problems for newbie programmers. Could be closed instead as a duplicate, so no need to re-open.","body":"Wrong reason to close. Specifying a default JDK falls under the category of programming tools. And this is one of the most common problems for newbie programmers. Could be closed instead as a duplicate, so no need to re-open."}],"answers":[{"tags":[],"owner":{"account_id":8310681,"reputation":133,"user_id":6245929,"display_name":"Luisa Sanchez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698011584,"creation_date":1697998881,"answer_id":77341185,"question_id":77341133,"body_markdown":"[*SDKMAN!*][1] is probably what you&#39;re after. This set of [shell scripts][2] will allow you to install different Java versions and easily switch among them. In the documentation you can find everything you need to start off. You can easily switch from one JDK to another as your default. \r\n\r\nIf you&#39;re using it in a project, you will probably need to set up your IDE to use the right version.\r\n\r\nAlternatively [Homebrew][3] can also do the trick, but it needs further configuration and I personally find SDKMan easier to use.\r\n\r\n\r\n  [1]: https://sdkman.io/usage\r\n  [2]: https://en.wikipedia.org/wiki/Shell_script\r\n  [3]: https://brew.sh/","title":"How can I change default java version?","body":"<p><a href=\"https://sdkman.io/usage\" rel=\"nofollow noreferrer\"><em>SDKMAN!</em></a> is probably what you're after. This set of <a href=\"https://en.wikipedia.org/wiki/Shell_script\" rel=\"nofollow noreferrer\">shell scripts</a> will allow you to install different Java versions and easily switch among them. In the documentation you can find everything you need to start off. You can easily switch from one JDK to another as your default.</p>\n<p>If you're using it in a project, you will probably need to set up your IDE to use the right version.</p>\n<p>Alternatively <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">Homebrew</a> can also do the trick, but it needs further configuration and I personally find SDKMan easier to use.</p>\n"}],"owner":{"account_id":28759434,"reputation":1,"user_id":22025689,"display_name":"Onur Novruzlu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1698001738,"answer_count":1,"score":-1,"last_activity_date":1698011584,"creation_date":1697997842,"question_id":77341133,"body_markdown":"I have jdk17 and I need to use jdk1.8 . But when I try to ask java version from Command Prompt ( with this command -&gt; java -version) it says jdk17 . How can I easily manipulate this, Thanks.\r\n\r\nI tried to delete jdk17 and it changed, but I have to use both (jdk17 and jdk1.8). I need to manage java version easily ","title":"How can I change default java version?","body":"<p>I have jdk17 and I need to use jdk1.8 . But when I try to ask java version from Command Prompt ( with this command -&gt; java -version) it says jdk17 . How can I easily manipulate this, Thanks.</p>\n<p>I tried to delete jdk17 and it changed, but I have to use both (jdk17 and jdk1.8). I need to manage java version easily</p>\n"},{"tags":["java","zipinputstream","mendix"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697816078,"post_id":77331407,"comment_id":136331433,"body_markdown":"It looks like `storeFileDocumentContent()` is closing its input stream. And you don’t need the `ByteArrayInputStream`. This is just a waste of time and space. Read directly from the input file.","body":"It looks like <code>storeFileDocumentContent()</code> is closing its input stream. And you don’t need the <code>ByteArrayInputStream</code>. This is just a waste of time and space. Read directly from the input file."},{"owner":{"account_id":29716575,"reputation":1,"user_id":22774965,"display_name":"Sarah"},"score":0,"creation_date":1698051481,"post_id":77331407,"comment_id":136351471,"body_markdown":"Thank you! By removing this, it now seems to have worked. Thanks for your help.","body":"Thank you! By removing this, it now seems to have worked. Thanks for your help."},{"owner":{"account_id":29716575,"reputation":1,"user_id":22774965,"display_name":"Sarah"},"score":0,"creation_date":1698057017,"post_id":77331407,"comment_id":136352469,"body_markdown":"@user207421, unfortunately although this seems to get the Java to work, it does not seem to be committing the files if i take this out. Where in the code would you recommend I put the &#39;storeFileDocumentContent()&#39; ?","body":"@user207421, unfortunately although this seems to get the Java to work, it does not seem to be committing the files if i take this out. Where in the code would you recommend I put the &#39;storeFileDocumentContent()&#39; ?"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698010561,"post_id":77331776,"comment_id":136347835,"body_markdown":"Available to be read without blocking, but the OP isn’t relying on it.","body":"Available to be read without blocking, but the OP isn’t relying on it."},{"owner":{"account_id":29716575,"reputation":1,"user_id":22774965,"display_name":"Sarah"},"score":0,"creation_date":1698051517,"post_id":77331776,"comment_id":136351479,"body_markdown":"Thanks for your reply however this did not seem to work. The solution given by user207421 has worked for me. Thank you anyway :)","body":"Thanks for your reply however this did not seem to work. The solution given by user207421 has worked for me. Thank you anyway :)"}],"tags":[],"owner":{"account_id":29708203,"reputation":29,"user_id":22768553,"display_name":"Tamires Araujo"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1698010514,"creation_date":1697812320,"answer_id":77331776,"question_id":77331407,"body_markdown":"The `zis.available()` method returns the number of bytes available to read from the current entry. So, using if instead of while only processes the first entry in the zip archive.\r\n\r\nCan you do the example:\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    ZipInputStream zis = new ZipInputStream(clonedStream);\r\n    ZipEntry ze;\r\n\r\n    while ((ze = zis.getNextEntry()) != null) {\r\n        IMendixObject FD = Core.instantiate(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.getType());\r\n        Core.storeFileDocumentContent(getContext(), FD, zis);\r\n        FD.setValue(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.MemberNames.Name.toString(), ze.getName());\r\n        ZipFiles.add(FD);\r\n        \r\n        zis.closeEntry();\r\n    }\r\n\r\n    zis.close();\r\n    clonedStream.close();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nIs that what you need?\r\n","title":"Java error: java.io.IOException: Stream closed when trying to import a zip file into Mendix using Java action","body":"<p>The <code>zis.available()</code> method returns the number of bytes available to read from the current entry. So, using if instead of while only processes the first entry in the zip archive.</p>\n<p>Can you do the example:</p>\n<pre class=\"lang-html prettyprint-override\"><code>ZipInputStream zis = new ZipInputStream(clonedStream);\nZipEntry ze;\n\nwhile ((ze = zis.getNextEntry()) != null) {\n    IMendixObject FD = Core.instantiate(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.getType());\n    Core.storeFileDocumentContent(getContext(), FD, zis);\n    FD.setValue(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.MemberNames.Name.toString(), ze.getName());\n    ZipFiles.add(FD);\n    \n    zis.closeEntry();\n}\n\nzis.close();\nclonedStream.close();\n</code></pre>\n\n<p>Is that what you need?</p>\n"}],"owner":{"account_id":29716575,"reputation":1,"user_id":22774965,"display_name":"Sarah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698010514,"creation_date":1697809305,"question_id":77331407,"body_markdown":"I am trying to use a Mendix Java action to import a zipped file of xml files however I am getting the following errors from the Java code: \r\n\r\n    java.base/java.util.zip.ZipInputStream.ensureOpen(Unknown Source)\r\n    java.base/java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\r\n \r\n```\r\npublic class Zip_Upload extends CustomJavaAction&lt;java.util.List&lt;IMendixObject&gt;&gt;\r\n{\r\n\tprivate IMendixObject __InputZipFile;\r\n\tprivate system.proxies.FileDocument InputZipFile;\r\n\r\n\tpublic Zip_Upload(IContext context, IMendixObject InputZipFile)\r\n\t{\r\n\t\tsuper(context);\r\n\t\tthis.__InputZipFile = InputZipFile;\r\n\t}\r\n\r\n\t@java.lang.Override\r\n\tpublic java.util.List&lt;IMendixObject&gt; executeAction() throws Exception\r\n\t{\r\n\t\tthis.InputZipFile = this.__InputZipFile == null ? null : system.proxies.FileDocument.initialize(getContext(), __InputZipFile);\r\n\r\n\t\t// BEGIN USER CODE\r\n\t\t\r\n\t\t\r\n\t\tList&lt;IMendixObject&gt; ZipFiles = new ArrayList&lt;IMendixObject&gt;();\r\n\t\t\r\n\t\tInputStream fileInputStream = Core.getFileDocumentContent(getContext(), InputZipFile.getMendixObject());\r\n\t\t\r\n\t\t\r\n\t\tbyte[] buffer = IOUtils.toByteArray(fileInputStream);\r\n\t\tfileInputStream.close();\r\n\t\tint bufferlength = buffer.length;\r\n\t\t\r\n\t\t/*String filename = &quot;temp.zip&quot;;\r\n\t\tFile myFile = new File(Core.getConfiguration().getResourcesPath() + File.separator + filename);\r\n\t\tmyFile.createNewFile();\r\n\t\t\r\n\t\tOutputStream outStream = new FileOutputStream(myFile);\r\n\t\toutStream.write(buffer);\r\n\t\toutStream.close();\r\n\t\t*/\r\n\t\tInputStream clonedStream = new ByteArrayInputStream(buffer);\r\n\t\t\r\n\t\tint clonedlength = clonedStream.available();\r\n\t\t\r\n\t\tCore.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Byte Array Length = &quot; + bufferlength);\r\n\t\tCore.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Cloned Input Stream Length = &quot; + clonedlength);\r\n\t\tZipEntry ze;\t\r\n\t\t\r\n\t\tZipInputStream zis = new ZipInputStream(clonedStream);\r\n\t\tint zislength = zis.available();\r\n\t\tCore.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Zip Input Stream availability = &quot; + zislength);\r\n\t\tif ((ze = zis.getNextEntry()) != null) {\r\n\t\t\tIMendixObject FD = Core.instantiate(getContext(),flatfileinterfacecustomizations.proxies.ImportExportDocument.getType());\r\n\t\t\tCore.storeFileDocumentContent(getContext(), FD, zis);\r\n\t\t\tFD.setValue(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.MemberNames.Name.toString(), ze.getName());\r\n\t\t\tZipFiles.add(FD);\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tzis.close();\r\n\t\tclonedStream.close();\r\n\t\treturn ZipFiles;\r\n\t\t\r\n\t\t\r\n\t\t// END USER CODE\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a string representation of this action\r\n\t * @return a string representation of this action\r\n\t */\r\n\t@java.lang.Override\r\n\tpublic java.lang.String toString()\r\n\t{\r\n\t\treturn &quot;Zip_Upload&quot;;\r\n\t}\r\n\r\n\t// BEGIN EXTRA CODE\r\n\t// END EXTRA CODE\r\n}\r\n```\r\n\r\nI tried changing the &#39;while&#39; to &#39;if&#39; and this worked successfully, however this only allowed me to import 1 file, and I have multiple to import, hence needing the &#39;while&#39; loop.","title":"Java error: java.io.IOException: Stream closed when trying to import a zip file into Mendix using Java action","body":"<p>I am trying to use a Mendix Java action to import a zipped file of xml files however I am getting the following errors from the Java code:</p>\n<pre><code>java.base/java.util.zip.ZipInputStream.ensureOpen(Unknown Source)\njava.base/java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n</code></pre>\n<pre><code>public class Zip_Upload extends CustomJavaAction&lt;java.util.List&lt;IMendixObject&gt;&gt;\n{\n    private IMendixObject __InputZipFile;\n    private system.proxies.FileDocument InputZipFile;\n\n    public Zip_Upload(IContext context, IMendixObject InputZipFile)\n    {\n        super(context);\n        this.__InputZipFile = InputZipFile;\n    }\n\n    @java.lang.Override\n    public java.util.List&lt;IMendixObject&gt; executeAction() throws Exception\n    {\n        this.InputZipFile = this.__InputZipFile == null ? null : system.proxies.FileDocument.initialize(getContext(), __InputZipFile);\n\n        // BEGIN USER CODE\n        \n        \n        List&lt;IMendixObject&gt; ZipFiles = new ArrayList&lt;IMendixObject&gt;();\n        \n        InputStream fileInputStream = Core.getFileDocumentContent(getContext(), InputZipFile.getMendixObject());\n        \n        \n        byte[] buffer = IOUtils.toByteArray(fileInputStream);\n        fileInputStream.close();\n        int bufferlength = buffer.length;\n        \n        /*String filename = &quot;temp.zip&quot;;\n        File myFile = new File(Core.getConfiguration().getResourcesPath() + File.separator + filename);\n        myFile.createNewFile();\n        \n        OutputStream outStream = new FileOutputStream(myFile);\n        outStream.write(buffer);\n        outStream.close();\n        */\n        InputStream clonedStream = new ByteArrayInputStream(buffer);\n        \n        int clonedlength = clonedStream.available();\n        \n        Core.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Byte Array Length = &quot; + bufferlength);\n        Core.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Cloned Input Stream Length = &quot; + clonedlength);\n        ZipEntry ze;    \n        \n        ZipInputStream zis = new ZipInputStream(clonedStream);\n        int zislength = zis.available();\n        Core.getLogger(&quot;Zip Import&quot;).log(LogLevel.INFO, &quot;Zip Input Stream availability = &quot; + zislength);\n        if ((ze = zis.getNextEntry()) != null) {\n            IMendixObject FD = Core.instantiate(getContext(),flatfileinterfacecustomizations.proxies.ImportExportDocument.getType());\n            Core.storeFileDocumentContent(getContext(), FD, zis);\n            FD.setValue(getContext(), flatfileinterfacecustomizations.proxies.ImportExportDocument.MemberNames.Name.toString(), ze.getName());\n            ZipFiles.add(FD);                       \n        }\n        \n        \n        zis.close();\n        clonedStream.close();\n        return ZipFiles;\n        \n        \n        // END USER CODE\n        \n    }\n\n    /**\n     * Returns a string representation of this action\n     * @return a string representation of this action\n     */\n    @java.lang.Override\n    public java.lang.String toString()\n    {\n        return &quot;Zip_Upload&quot;;\n    }\n\n    // BEGIN EXTRA CODE\n    // END EXTRA CODE\n}\n</code></pre>\n<p>I tried changing the 'while' to 'if' and this worked successfully, however this only allowed me to import 1 file, and I have multiple to import, hence needing the 'while' loop.</p>\n"},{"tags":["java","xml","jaxb"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1698001864,"post_id":77341295,"comment_id":136347007,"body_markdown":"May be it&#39;s getting confused by the duplicated Data element `/Data/Body/Node1/Data`. Try adding type to the last one `@XmlElement(name = &quot;Data&quot;, type=String.class)`","body":"May be it&#39;s getting confused by the duplicated Data element <code>&#47;Data&#47;Body&#47;Node1&#47;Data</code>. Try adding type to the last one <code>@XmlElement(name = &quot;Data&quot;, type=String.class)</code>"},{"owner":{"account_id":15479575,"reputation":29,"user_id":11167286,"display_name":"Maxim"},"score":0,"creation_date":1698003602,"post_id":77341295,"comment_id":136347204,"body_markdown":"Sorry, but no. these are just examples. Real classes have different names, there are no collisions.","body":"Sorry, but no. these are just examples. Real classes have different names, there are no collisions."}],"answers":[{"comments":[{"owner":{"account_id":15479575,"reputation":29,"user_id":11167286,"display_name":"Maxim"},"score":0,"creation_date":1698013290,"post_id":77341757,"comment_id":136348027,"body_markdown":"Thank you! It helped. I&#39;m using ```JAXBIntrospector.getValue()``` to get the domain model instead of wrapper. And also, setting the lax property to true, helped to get the domain model instance instead of ```ElementNSimpl```. Still I have also some String elements in ```Body.content```, but I think I can iterate over them and get the item I need.","body":"Thank you! It helped. I&#39;m using <code>JAXBIntrospector.getValue()</code> to get the domain model instead of wrapper. And also, setting the lax property to true, helped to get the domain model instance instead of <code>ElementNSimpl</code>. Still I have also some String elements in <code>Body.content</code>, but I think I can iterate over them and get the item I need."}],"tags":[],"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698009864,"creation_date":1698009864,"answer_id":77341757,"question_id":77341295,"body_markdown":"That you get JAXBElement&lt;Data&gt; when you unmarshal, indicates that your schema contains 2 or more global elements of the same complex type. See [this](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html) article for a  deeper explanation.\r\n\r\nWhen I try your example, I do get a Data instance directly. No JAXBElement wrapper.\r\n\r\nTo get mapped class instances in a @Mixed  @XmlAnyElement list property, the mapped Java classes needs to be annotated with @XmlRootElement and the @XmlAnyElement must have its lax property set to true (see javadoc).","title":"Unmarshalling an XML with JAXB","body":"<p>That you get JAXBElement when you unmarshal, indicates that your schema contains 2 or more global elements of the same complex type. See <a href=\"http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html\" rel=\"nofollow noreferrer\">this</a> article for a  deeper explanation.</p>\n<p>When I try your example, I do get a Data instance directly. No JAXBElement wrapper.</p>\n<p>To get mapped class instances in a @Mixed  @XmlAnyElement list property, the mapped Java classes needs to be annotated with @XmlRootElement and the @XmlAnyElement must have its lax property set to true (see javadoc).</p>\n"}],"owner":{"account_id":15479575,"reputation":29,"user_id":11167286,"display_name":"Maxim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77341757,"answer_count":1,"score":0,"last_activity_date":1698009864,"creation_date":1698000811,"question_id":77341295,"body_markdown":"I have some generated classes, which looks something like this:\r\n```java\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;Data&quot;, propOrder = {\r\n    &quot;body&quot;\r\n})\r\n@XmlRootElement(name = &quot;Data&quot;)\r\nclass Data {\r\n    @XmlElement(name = &quot;Body&quot;, required = true)\r\n    protected Body body;\r\n    // getter and setter\r\n}\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;Body&quot;, propOrder = {\r\n    &quot;content&quot;\r\n})\r\nclass Body {\r\n    @XmlMixed\r\n    @XmlAnyElement\r\n    protected List&lt;Object&gt; content; \r\n    // getter\r\n}\r\n```\r\n\r\nand some other classes for XML types:\r\n```java\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;Node1&quot;, propOrder = {\r\n    &quot;data&quot;,\r\n})\r\nclass Node1 {\r\n   @XmlElement(name = &quot;Data&quot;)\r\n   private String data;\r\n}\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;Node2&quot;, propOrder = {\r\n    &quot;int&quot;,\r\n})\r\nclass Node2 {\r\n   @XmlElement(name = &quot;Int&quot;)\r\n   private Integer int;\r\n}\r\n```\r\n\r\nAn XML sample would be:\r\n```xml\r\n&lt;Data&gt;\r\n    &lt;Body&gt;\r\n        &lt;Node1&gt;\r\n           &lt;Data&gt;abc&lt;/Data&gt;\r\n        &lt;/Node1&gt;\r\n        &lt;Node2&gt;\r\n           &lt;Int&gt;abc&lt;/Int&gt;\r\n        &lt;/Node2&gt;\r\n    &lt;/Body&gt;\r\n&lt;/Data&gt;\r\n```\r\n\r\nWhen I&#39;m trying to unmarshall the XML, it returns a ```JAXBElement&lt;Data&gt;```, and some of the elements from ```Body.content``` are of type ```ElementNSimpl```, others are just Strings with a new line in it. \r\n\r\nThis is the way I&#39;m unmarshalling the XML:\r\n```java\r\nprivate Object xmlToObject(String xmlString) throws Exception {\r\n        var context = JAXBContext.newInstance(Data.class, Node1.class, Node2.class);\r\n        var unmarshaller = context.createUnmarshaller();\r\n        return unmarshaller.unmarshal(new StringReader(xmlString));\r\n    }\r\n```\r\n\r\nI expect to receive a ```Data``` object, which will contain the ```Body``` object, and the ```Body``` object will contain two elements, ```Node1``` and ```Node2```, but the elements in ```Body.conent``` are, as I said, ```ElementNSimpl```","title":"Unmarshalling an XML with JAXB","body":"<p>I have some generated classes, which looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Data&quot;, propOrder = {\n    &quot;body&quot;\n})\n@XmlRootElement(name = &quot;Data&quot;)\nclass Data {\n    @XmlElement(name = &quot;Body&quot;, required = true)\n    protected Body body;\n    // getter and setter\n}\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Body&quot;, propOrder = {\n    &quot;content&quot;\n})\nclass Body {\n    @XmlMixed\n    @XmlAnyElement\n    protected List&lt;Object&gt; content; \n    // getter\n}\n</code></pre>\n<p>and some other classes for XML types:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Node1&quot;, propOrder = {\n    &quot;data&quot;,\n})\nclass Node1 {\n   @XmlElement(name = &quot;Data&quot;)\n   private String data;\n}\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Node2&quot;, propOrder = {\n    &quot;int&quot;,\n})\nclass Node2 {\n   @XmlElement(name = &quot;Int&quot;)\n   private Integer int;\n}\n</code></pre>\n<p>An XML sample would be:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Data&gt;\n    &lt;Body&gt;\n        &lt;Node1&gt;\n           &lt;Data&gt;abc&lt;/Data&gt;\n        &lt;/Node1&gt;\n        &lt;Node2&gt;\n           &lt;Int&gt;abc&lt;/Int&gt;\n        &lt;/Node2&gt;\n    &lt;/Body&gt;\n&lt;/Data&gt;\n</code></pre>\n<p>When I'm trying to unmarshall the XML, it returns a <code>JAXBElement&lt;Data&gt;</code>, and some of the elements from <code>Body.content</code> are of type <code>ElementNSimpl</code>, others are just Strings with a new line in it.</p>\n<p>This is the way I'm unmarshalling the XML:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Object xmlToObject(String xmlString) throws Exception {\n        var context = JAXBContext.newInstance(Data.class, Node1.class, Node2.class);\n        var unmarshaller = context.createUnmarshaller();\n        return unmarshaller.unmarshal(new StringReader(xmlString));\n    }\n</code></pre>\n<p>I expect to receive a <code>Data</code> object, which will contain the <code>Body</code> object, and the <code>Body</code> object will contain two elements, <code>Node1</code> and <code>Node2</code>, but the elements in <code>Body.conent</code> are, as I said, <code>ElementNSimpl</code></p>\n"},{"tags":["java","concurrency","scheduling"],"comments":[{"owner":{"account_id":72889,"reputation":4696,"user_id":210216,"display_name":"Jed Wesley-Smith"},"score":0,"creation_date":1296168519,"post_id":4814916,"comment_id":5349293,"body_markdown":"what would it mean if you call isRunning() and it returns true? I mean, there is no guarantee that if I call it again it would be true. What are you trying to achieve? Monitoring?","body":"what would it mean if you call isRunning() and it returns true? I mean, there is no guarantee that if I call it again it would be true. What are you trying to achieve? Monitoring?"}],"answers":[{"comments":[{"owner":{"account_id":72889,"reputation":4696,"user_id":210216,"display_name":"Jed Wesley-Smith"},"score":2,"creation_date":1296168419,"post_id":4816502,"comment_id":5349275,"body_markdown":"running would need to be volatile","body":"running would need to be volatile"},{"owner":{"account_id":54362,"reputation":11938,"user_id":162634,"accept_rate":62,"display_name":"Victor Sorokin"},"score":2,"creation_date":1296576760,"post_id":4816502,"comment_id":5406845,"body_markdown":"small clarification: boolean needs to be volatile to ensure not atomicity but visibility of change. This is part of Java Memory Model, as described by language spec.","body":"small clarification: boolean needs to be volatile to ensure not atomicity but visibility of change. This is part of Java Memory Model, as described by language spec."}],"tags":[],"owner":{"account_id":83369,"reputation":15900,"user_id":233792,"accept_rate":72,"display_name":"Christian Kuetbach"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1296200233,"creation_date":1296132588,"answer_id":4816502,"question_id":4814916,"body_markdown":"You can change you Runnable like this:\r\n     \r\n    class Runner implements Runnable{\r\n        public volatile boolean RUNNING = false;\r\n            public void run(){\r\n    \r\n            RUNNING = true;\r\n            try{\r\n                // Your code\r\n            } finally {\r\n                RUNNING = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n**edit**\r\nThought operations with `boolean` are atomic and don&#39;t need to be volatile.","title":"Checking if periodic ScheduledFuture is running now","body":"<p>You can change you Runnable like this:</p>\n\n<pre><code>class Runner implements Runnable{\n    public volatile boolean RUNNING = false;\n        public void run(){\n\n        RUNNING = true;\n        try{\n            // Your code\n        } finally {\n            RUNNING = false;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>edit</strong>\nThought operations with <code>boolean</code> are atomic and don't need to be volatile.</p>\n"},{"tags":[],"owner":{"account_id":102667,"reputation":8340,"user_id":275457,"accept_rate":88,"display_name":"miah"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1296351309,"creation_date":1296351309,"answer_id":4840622,"question_id":4814916,"body_markdown":"After a bit of testing,\r\n\r\n    public static boolean isRunning(ScheduledFuture future) {\r\n        return future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0;\r\n    }\r\nworks like a charm. Seems the task gets rescheduled only after completion, so `getDelay()` returns negative value.","title":"Checking if periodic ScheduledFuture is running now","body":"<p>After a bit of testing,</p>\n\n<pre><code>public static boolean isRunning(ScheduledFuture future) {\n    return future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0;\n}\n</code></pre>\n\n<p>works like a charm. Seems the task gets rescheduled only after completion, so <code>getDelay()</code> returns negative value.</p>\n"},{"comments":[{"owner":{"account_id":8611590,"reputation":158,"user_id":6449888,"accept_rate":100,"display_name":"Bogdan Samondros"},"score":0,"creation_date":1698009643,"post_id":77341724,"comment_id":136347751,"body_markdown":"for for my use case when I wanted to know if future is scheduled or running `future.toString().startsWith(&quot;[Not completed]&quot;)` was enough","body":"for for my use case when I wanted to know if future is scheduled or running <code>future.toString().startsWith(&quot;[Not completed]&quot;)</code> was enough"}],"tags":[],"owner":{"account_id":8611590,"reputation":158,"user_id":6449888,"accept_rate":100,"display_name":"Bogdan Samondros"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698009761,"creation_date":1698009310,"answer_id":77341724,"question_id":4814916,"body_markdown":"If you need to check non-periodic future (java.util.concurrent.FutureTask) the solution with only\r\n\r\n    future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0\r\n\r\ndoesn&#39;t work. You can&#39;t even combine \r\n\r\n    future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0 &amp;&amp; !future.isDone()\r\nbecause `future.isDone()` returns true for all states except NEW which means &quot;Scheduled&quot;. But if future is just started `future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0 &amp;&amp; !future.isDone()` never return true because not started future (NEW) never has negative delay\r\n\r\nSo I came up with pretty stupid simple solution and it works\r\n\r\n    future.isDone() &amp;&amp; future.toString().startsWith(&quot;[Not completed]&quot;)\r\n\r\nIt&#39;s a bit ugly but does the job","title":"Checking if periodic ScheduledFuture is running now","body":"<p>If you need to check non-periodic future (java.util.concurrent.FutureTask) the solution with only</p>\n<pre><code>future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0\n</code></pre>\n<p>doesn't work. You can't even combine</p>\n<pre><code>future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0 &amp;&amp; !future.isDone()\n</code></pre>\n<p>because <code>future.isDone()</code> returns true for all states except NEW which means &quot;Scheduled&quot;. But if future is just started <code>future.getDelay(TimeUnit.MILLISECONDS) &lt;= 0 &amp;&amp; !future.isDone()</code> never return true because not started future (NEW) never has negative delay</p>\n<p>So I came up with pretty stupid simple solution and it works</p>\n<pre><code>future.isDone() &amp;&amp; future.toString().startsWith(&quot;[Not completed]&quot;)\n</code></pre>\n<p>It's a bit ugly but does the job</p>\n"}],"owner":{"account_id":102667,"reputation":8340,"user_id":275457,"accept_rate":88,"display_name":"miah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6185,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":4816502,"answer_count":3,"score":3,"last_activity_date":1698009761,"creation_date":1296122397,"question_id":4814916,"body_markdown":"I have a periodic task scheduled via Spring `TaskScheduler.schedule(Runnable, Trigger)`.\r\n\r\nGiven the returned `ScheduledFuture`, is there any way to check, if the task is running at current moment?","title":"Checking if periodic ScheduledFuture is running now","body":"<p>I have a periodic task scheduled via Spring <code>TaskScheduler.schedule(Runnable, Trigger)</code>.</p>\n\n<p>Given the returned <code>ScheduledFuture</code>, is there any way to check, if the task is running at current moment?</p>\n"},{"tags":["java","while-loop"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1697995432,"post_id":77340980,"comment_id":136346323,"body_markdown":"&quot;*Is there a way to declare a variable within a while() loop&#39;s condition similar to how it&#39;s done in a for() loop?*&quot; - No.","body":"&quot;<i>Is there a way to declare a variable within a while() loop&#39;s condition similar to how it&#39;s done in a for() loop?</i>&quot; - No."},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1697995460,"post_id":77340980,"comment_id":136346329,"body_markdown":"Why not use a `for` loop then?","body":"Why not use a <code>for</code> loop then?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1697995509,"post_id":77340980,"comment_id":136346333,"body_markdown":"No, it&#39;s not possible with while. Use a for loop. And I sure hope the `false` is only assigned conditionally","body":"No, it&#39;s not possible with while. Use a for loop. And I sure hope the <code>false</code> is only assigned conditionally"},{"owner":{"account_id":10013496,"reputation":23,"user_id":7405623,"display_name":"Modish"},"score":0,"creation_date":1698055141,"post_id":77340980,"comment_id":136352156,"body_markdown":"In my case, the `false` is assigned conditionally.","body":"In my case, the <code>false</code> is assigned conditionally."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697995612,"creation_date":1697995612,"answer_id":77341001,"question_id":77340980,"body_markdown":"No, the syntax of `while` does not allow this. But you can use a `for` loop: expressions can be empty too:\r\n\r\n```\r\nfor (boolean continueProgram = true; continueProgram; /* empty */) {\r\n    // Loop program\r\n    continueProgram = false;\r\n}\r\n```","title":"Java syntax for declaring and initialize variables within a while() loops initialization section?","body":"<p>No, the syntax of <code>while</code> does not allow this. But you can use a <code>for</code> loop: expressions can be empty too:</p>\n<pre><code>for (boolean continueProgram = true; continueProgram; /* empty */) {\n    // Loop program\n    continueProgram = false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698009428,"creation_date":1698009428,"answer_id":77341727,"question_id":77340980,"body_markdown":"&gt; _&quot;... Can you declare a variable in the while() loops initialization section, in the same way as you can in a for() loop? ...&quot;_\r\n\r\nNo.&amp;nbsp; And, I believe the _[for-loop](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)_ is the only _control-flow structure_ that allows for variable declaration.\r\n\r\n&gt; _&quot;... But i wonder if there is a syntax to write the while() loop the same way as you can do in a for() loop? ...&quot;_\r\n\r\nUse the _increment [unary operator](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)_.\r\n\r\n```java\r\nint i = 0;\r\nwhile (i++ &lt; 10){\r\n    // Loop program\r\n}\r\n```\r\n\r\n&gt; _&quot;... Is there a way to declare a variable within a while() loop&#39;s condition similar to how it&#39;s done in a for() loop? ...&quot;_\r\n\r\nNo, you&#39;ll be required to declare each variable before the _loop_.\r\n\r\n```java\r\nboolean continueProgram = true;\r\nwhile (continueProgram){\r\n    // Loop program\r\n    continueProgram = false;\r\n}\r\n```","title":"Java syntax for declaring and initialize variables within a while() loops initialization section?","body":"<blockquote>\n<p><em>&quot;... Can you declare a variable in the while() loops initialization section, in the same way as you can in a for() loop? ...&quot;</em></p>\n</blockquote>\n<p>No.  And, I believe the <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html\" rel=\"nofollow noreferrer\">for-loop</a></em> is the only <em>control-flow structure</em> that allows for variable declaration.</p>\n<blockquote>\n<p><em>&quot;... But i wonder if there is a syntax to write the while() loop the same way as you can do in a for() loop? ...&quot;</em></p>\n</blockquote>\n<p>Use the <em>increment <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"nofollow noreferrer\">unary operator</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int i = 0;\nwhile (i++ &lt; 10){\n    // Loop program\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... Is there a way to declare a variable within a while() loop's condition similar to how it's done in a for() loop? ...&quot;</em></p>\n</blockquote>\n<p>No, you'll be required to declare each variable before the <em>loop</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean continueProgram = true;\nwhile (continueProgram){\n    // Loop program\n    continueProgram = false;\n}\n</code></pre>\n"}],"owner":{"account_id":10013496,"reputation":23,"user_id":7405623,"display_name":"Modish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77341001,"answer_count":2,"score":1,"last_activity_date":1698009428,"creation_date":1697995215,"question_id":77340980,"body_markdown":"Can you declare a variable in the while() loops initialization section, in the same way as you can in a for() loop?\r\n\r\nNormally, you can write something like this:\r\n\r\n```java\r\nboolean continueProgram = true; \r\nwhile (continueProgram){\r\n    // Loop program\r\n    continueProgram = false;\r\n}\r\n```\r\n\r\nBut i wonder if there is a syntax to write the while() loop the same way as you can do in a for() loop?\r\n\r\nA for() loop could look something like this:\r\n\r\n```java\r\nfor (int i = 0; i &lt; 10; i++){\r\n    // Loop program\r\n}\r\n```\r\n\r\nIs there a way to declare a variable within a while() loop&#39;s condition similar to how it&#39;s done in a for() loop?\r\n\r\n```java\r\nwhile (boolean continueProgram = true; continueProgram){\r\n    // Loop program\r\n    continueProgram = false;\r\n}\r\n```\r\n\r\nBy doing this, the variable would be local to the while() loop only.","title":"Java syntax for declaring and initialize variables within a while() loops initialization section?","body":"<p>Can you declare a variable in the while() loops initialization section, in the same way as you can in a for() loop?</p>\n<p>Normally, you can write something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean continueProgram = true; \nwhile (continueProgram){\n    // Loop program\n    continueProgram = false;\n}\n</code></pre>\n<p>But i wonder if there is a syntax to write the while() loop the same way as you can do in a for() loop?</p>\n<p>A for() loop could look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; 10; i++){\n    // Loop program\n}\n</code></pre>\n<p>Is there a way to declare a variable within a while() loop's condition similar to how it's done in a for() loop?</p>\n<pre class=\"lang-java prettyprint-override\"><code>while (boolean continueProgram = true; continueProgram){\n    // Loop program\n    continueProgram = false;\n}\n</code></pre>\n<p>By doing this, the variable would be local to the while() loop only.</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"comments":[{"owner":{"account_id":21124704,"reputation":629,"user_id":15530167,"display_name":"Tran Chien"},"score":1,"creation_date":1676907217,"post_id":74327710,"comment_id":133226956,"body_markdown":"How about MacOS user? I see my IntelliJ IDE install android sdk and related when I first created a new Android project.","body":"How about MacOS user? I see my IntelliJ IDE install android sdk and related when I first created a new Android project."},{"owner":{"account_id":15039873,"reputation":605,"user_id":10854888,"display_name":"Jakub Koralewski"},"score":0,"creation_date":1677077690,"post_id":74327710,"comment_id":133266568,"body_markdown":"@TranChien I did a lot of things so that may not be the thing that did it. But I went to File-&gt;Project structure, Modules, then navigated to My_Application-&gt;app-&gt;main and changed that Module SDK to use the Android API SDK not the Jetbrains one. Still some squiggles in code, but app starts in emulator.","body":"@TranChien I did a lot of things so that may not be the thing that did it. But I went to File-&gt;Project structure, Modules, then navigated to My_Application-&gt;app-&gt;main and changed that Module SDK to use the Android API SDK not the Jetbrains one. Still some squiggles in code, but app starts in emulator."},{"owner":{"account_id":21124704,"reputation":629,"user_id":15530167,"display_name":"Tran Chien"},"score":0,"creation_date":1677078007,"post_id":74327710,"comment_id":133266684,"body_markdown":"@koral I found my solution, I delete my custom android sdk then reopen the project with IntelliJ IDEA, install the SDK from there and install the android platform then everything works, no squiggles.","body":"@koral I found my solution, I delete my custom android sdk then reopen the project with IntelliJ IDEA, install the SDK from there and install the android platform then everything works, no squiggles."}],"tags":[],"owner":{"account_id":19994462,"reputation":72,"user_id":14654835,"display_name":"Oleksandr"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1667651583,"creation_date":1667651553,"answer_id":74327710,"question_id":74320292,"body_markdown":"Close Android Studio. Run it as Administrator. Then create a new project. You probably had an error before the project was created and ignored it\r\n\r\n&gt; (error : Failed to read or create install properties file.).\r\n\r\nThe file &quot;Android SDK Platform 32&quot; (I had platform 30) needs to be installed and so if you ran Android Studio without administrator rights it won&#39;t install. With Administrator rights it&#39;ll install automatically and that&#39;s it.","title":"How to fix &quot;Could not find compile target android-30 for modules :app&quot; error in Andriod Studio while building apps?","body":"<p>Close Android Studio. Run it as Administrator. Then create a new project. You probably had an error before the project was created and ignored it</p>\n<blockquote>\n<p>(error : Failed to read or create install properties file.).</p>\n</blockquote>\n<p>The file &quot;Android SDK Platform 32&quot; (I had platform 30) needs to be installed and so if you ran Android Studio without administrator rights it won't install. With Administrator rights it'll install automatically and that's it.</p>\n"},{"comments":[{"owner":{"account_id":6543038,"reputation":1162,"user_id":5059838,"display_name":"iantonuk"},"score":0,"creation_date":1683007748,"post_id":76109005,"comment_id":134296934,"body_markdown":"This does not really answer the question. If you have a different question, you can ask it by clicking [Ask Question](https://stackoverflow.com/questions/ask). To get notified when this question gets new answers, you can [follow this question](https://meta.stackexchange.com/q/345661). Once you have enough [reputation](https://stackoverflow.com/help/whats-reputation), you can also [add a bounty](https://stackoverflow.com/help/privileges/set-bounties) to draw more attention to this question. - [From Review](/review/late-answers/34286103)","body":"This does not really answer the question. If you have a different question, you can ask it by clicking <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a>. To get notified when this question gets new answers, you can <a href=\"https://meta.stackexchange.com/q/345661\">follow this question</a>. Once you have enough <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a>, you can also <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">add a bounty</a> to draw more attention to this question. - <a href=\"/review/late-answers/34286103\">From Review</a>"}],"tags":[],"owner":{"account_id":28421171,"reputation":21,"user_id":21743227,"display_name":"Alfred M&#252;ller"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682500159,"creation_date":1682500159,"answer_id":76109005,"question_id":74320292,"body_markdown":"On mac I just opened the settings - opened the android sdk - edit - next - next - finish\r\n\r\nAfter this everything worked","title":"How to fix &quot;Could not find compile target android-30 for modules :app&quot; error in Andriod Studio while building apps?","body":"<p>On mac I just opened the settings - opened the android sdk - edit - next - next - finish</p>\n<p>After this everything worked</p>\n"},{"tags":[],"owner":{"account_id":3483822,"reputation":59,"user_id":2915222,"display_name":"orups"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695138249,"creation_date":1695138249,"answer_id":77136078,"question_id":74320292,"body_markdown":"After reading very many suggested solutions online that didn&#39;t work, I resorted to instinct. \r\nI solved my issue on Windows 10, Android studio Giraffe by going to **Android studio menu &gt; Build &gt; Make Module &#39;XYZ.app&#39;** which is below &quot;**Make Project**&quot; option for most android studio versions. Android studio then prompted me to download and install missing intermediaries associated with the new target SDK. After that, I was able to build successfully.\r\n","title":"How to fix &quot;Could not find compile target android-30 for modules :app&quot; error in Andriod Studio while building apps?","body":"<p>After reading very many suggested solutions online that didn't work, I resorted to instinct.\nI solved my issue on Windows 10, Android studio Giraffe by going to <strong>Android studio menu &gt; Build &gt; Make Module 'XYZ.app'</strong> which is below &quot;<strong>Make Project</strong>&quot; option for most android studio versions. Android studio then prompted me to download and install missing intermediaries associated with the new target SDK. After that, I was able to build successfully.</p>\n"},{"tags":[],"owner":{"account_id":15690923,"reputation":135,"user_id":11322051,"display_name":"Sajad Hosseini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698009227,"creation_date":1698009227,"answer_id":77341721,"question_id":74320292,"body_markdown":"If you run on Ubuntu be sure that your **SDK** directory has permission and it&#39;s not lock","title":"How to fix &quot;Could not find compile target android-30 for modules :app&quot; error in Andriod Studio while building apps?","body":"<p>If you run on Ubuntu be sure that your <strong>SDK</strong> directory has permission and it's not lock</p>\n"}],"owner":{"account_id":22824663,"reputation":75,"user_id":16974095,"display_name":"Dongyuan Li"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12730,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":74327710,"answer_count":4,"score":5,"last_activity_date":1698009227,"creation_date":1667579956,"question_id":74320292,"body_markdown":"I am trying to build an application from a GitHub repository [repo](https://github.com/linyiLYi/pose-monitor). It&#39;s my first time using Andriod Studio and what I want is to run this application on my android phone, so I don&#39;t have basic knowledge about Java development or android SDKs.\r\n\r\nWhen I am trying to set up the Studio, when I hit the &quot;run app&quot; button an error occured reading &#39;Could not find compile target android-30 for modules :app&#39;. \r\n\r\n\r\n[![error pic][1]][1]\r\nI have tried to uninstall and reinstall all SDKs needed and every time I click &#39;Sync Project with Gradle Files&#39; this error will pop up.\r\n\r\nAnyone who knows about Andriod Studio could help me with this issue? I appreciate every answer and hope this issue could be resolved very soon.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aK9kK.png","title":"How to fix &quot;Could not find compile target android-30 for modules :app&quot; error in Andriod Studio while building apps?","body":"<p>I am trying to build an application from a GitHub repository <a href=\"https://github.com/linyiLYi/pose-monitor\" rel=\"noreferrer\">repo</a>. It's my first time using Andriod Studio and what I want is to run this application on my android phone, so I don't have basic knowledge about Java development or android SDKs.</p>\n<p>When I am trying to set up the Studio, when I hit the &quot;run app&quot; button an error occured reading 'Could not find compile target android-30 for modules :app'.</p>\n<p><a href=\"https://i.stack.imgur.com/aK9kK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aK9kK.png\" alt=\"error pic\" /></a>\nI have tried to uninstall and reinstall all SDKs needed and every time I click 'Sync Project with Gradle Files' this error will pop up.</p>\n<p>Anyone who knows about Andriod Studio could help me with this issue? I appreciate every answer and hope this issue could be resolved very soon.</p>\n"},{"tags":["java","angular","spring","cors","policy"],"comments":[{"owner":{"account_id":2654026,"reputation":4829,"user_id":2295103,"display_name":"MikeOne"},"score":0,"creation_date":1697912036,"post_id":77337181,"comment_id":136340064,"body_markdown":"What exactly happens in your browser network tab?","body":"What exactly happens in your browser network tab?"},{"owner":{"account_id":29005765,"reputation":11,"user_id":22218350,"display_name":"vinicius.vaga"},"score":0,"creation_date":1697913251,"post_id":77337181,"comment_id":136340168,"body_markdown":"After I trigger the login request, the first response is a CORS error, containing the following information:\nhttps://imgur.com/a/QRpofU4\n\nAnd then another one is fired, which returns 403, with the following information:\nhttps://imgur.com/hWdXRMa","body":"After I trigger the login request, the first response is a CORS error, containing the following information: <a href=\"https://imgur.com/a/QRpofU4\" rel=\"nofollow noreferrer\">imgur.com/a/QRpofU4</a>  And then another one is fired, which returns 403, with the following information: <a href=\"https://imgur.com/hWdXRMa\" rel=\"nofollow noreferrer\">imgur.com/hWdXRMa</a>"},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1697918302,"post_id":77337181,"comment_id":136340597,"body_markdown":"You cannot do `if(token != null){...}`, simply because preflight requests never carry credentials.","body":"You cannot do <code>if(token != null){...}</code>, simply because preflight requests never carry credentials."}],"answers":[{"tags":[],"owner":{"account_id":21795709,"reputation":43,"user_id":16095321,"display_name":"boolean"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697964300,"creation_date":1697960776,"answer_id":77339085,"question_id":77337181,"body_markdown":"In Angular project,\r\n1. Go to `src` folder, create a `proxy.conf.json` file.\r\n2. Add the configurations like shown in the below example &lt;br&gt;\r\n```{\r\n  &quot;/myapi&quot;: {\r\n    &quot;target&quot;: &quot;http://localhost:8080/&quot;,\r\n    &quot;secure&quot;: false,\r\n    &quot;changeOrigin&quot;: true\r\n  }\r\n}\r\n```\r\n[Proxy documentation from Angular][1]\r\n\r\n\r\n  [1]: https://angular.io/guide/build#proxying-to-a-backend-server","title":"CORS Policy with Spring boot and Angular","body":"<p>In Angular project,</p>\n<ol>\n<li>Go to <code>src</code> folder, create a <code>proxy.conf.json</code> file.</li>\n<li>Add the configurations like shown in the below example <br></li>\n</ol>\n<pre><code>  &quot;/myapi&quot;: {\n    &quot;target&quot;: &quot;http://localhost:8080/&quot;,\n    &quot;secure&quot;: false,\n    &quot;changeOrigin&quot;: true\n  }\n}\n</code></pre>\n<p><a href=\"https://angular.io/guide/build#proxying-to-a-backend-server\" rel=\"nofollow noreferrer\">Proxy documentation from Angular</a></p>\n"},{"tags":[],"owner":{"account_id":26463526,"reputation":36,"user_id":20105108,"display_name":"kasmi zoubeir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698008301,"creation_date":1698008301,"answer_id":77341675,"question_id":77337181,"body_markdown":"**TRY THIS**\r\nCreate a class **CorsConfig** \r\n\r\n    package (your package here)\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.CorsRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    public class CorsConfig {\r\n        @Bean\r\n        public WebMvcConfigurer corsConfigurer() {\r\n            return new WebMvcConfigurer() {\r\n                @Override\r\n                public void addCorsMappings(CorsRegistry registry) {\r\n                    registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;).allowedOrigins(&quot;*&quot;)\r\n                            .allowedHeaders(&quot;*&quot;);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n**SecyrutyConfig**\r\n\r\n    import com....;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.authentication.configuration.EnableGlobalAuthentication;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    import org.springframework.security.web.access.intercept.AuthorizationFilter;\r\n    \r\n    @Configuration\r\n    @EnableMethodSecurity(prePostEnabled = false,\r\n            securedEnabled = false,\r\n            jsr250Enabled = true)\r\n    public class webSecurityConfig {\r\n       private JWTRequestFilter jwtRequestFilter;\r\n    \r\n        public webSecurityConfig(JWTRequestFilter jwtRequestFilter) {\r\n            this.jwtRequestFilter = jwtRequestFilter;\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain (HttpSecurity http) throws Exception{\r\n            http.csrf().disable().cors().disable();\r\n            //hello mr Filter chaine please add the filter jwtRequesFilter befor the authorization class\r\n            //we gona run jwtRequestFilter befor the autorization class\r\n    \r\n            http.addFilterBefore(jwtRequestFilter, AuthorizationFilter.class);\r\n          http.authorizeHttpRequests()\r\n                   .requestMatchers(&quot;...&quot;,&quot;your permit all path&quot;).permitAll()\r\n               .requestMatchers(&quot;...**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                 .requestMatchers(&quot;/category/**&quot;,&quot;your admin path here ..**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n    \r\n    \r\n    \r\n    \r\n                .anyRequest().authenticated()**.and().cors();**\r\n    \r\n            return http.build();\r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\n***HOPE THIS WORK FOR YOU***","title":"CORS Policy with Spring boot and Angular","body":"<p><strong>TRY THIS</strong>\nCreate a class <strong>CorsConfig</strong></p>\n<pre><code>package (your package here)\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CorsConfig {\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;).allowedOrigins(&quot;*&quot;)\n                        .allowedHeaders(&quot;*&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p><strong>SecyrutyConfig</strong></p>\n<pre><code>import com....;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.configuration.EnableGlobalAuthentication;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.access.intercept.AuthorizationFilter;\n\n@Configuration\n@EnableMethodSecurity(prePostEnabled = false,\n        securedEnabled = false,\n        jsr250Enabled = true)\npublic class webSecurityConfig {\n   private JWTRequestFilter jwtRequestFilter;\n\n    public webSecurityConfig(JWTRequestFilter jwtRequestFilter) {\n        this.jwtRequestFilter = jwtRequestFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain (HttpSecurity http) throws Exception{\n        http.csrf().disable().cors().disable();\n        //hello mr Filter chaine please add the filter jwtRequesFilter befor the authorization class\n        //we gona run jwtRequestFilter befor the autorization class\n\n        http.addFilterBefore(jwtRequestFilter, AuthorizationFilter.class);\n      http.authorizeHttpRequests()\n               .requestMatchers(&quot;...&quot;,&quot;your permit all path&quot;).permitAll()\n           .requestMatchers(&quot;...**&quot;).hasAuthority(&quot;ADMIN&quot;)\n             .requestMatchers(&quot;/category/**&quot;,&quot;your admin path here ..**&quot;).hasAuthority(&quot;ADMIN&quot;)\n\n\n\n\n            .anyRequest().authenticated()**.and().cors();**\n\n        return http.build();\n\n    }\n\n\n}\n</code></pre>\n<p><em><strong>HOPE THIS WORK FOR YOU</strong></em></p>\n"}],"owner":{"account_id":29005765,"reputation":11,"user_id":22218350,"display_name":"vinicius.vaga"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698008301,"creation_date":1697911017,"question_id":77337181,"body_markdown":"I&#39;m developing an Angular application that must log in to a SpringBoot application. The Backend is structured to perform authentication using username and password and, when authenticated, return a JWT token to the frontend.\r\n\r\n\r\nThis structure works when I use postman, as shown below.\r\n[enter image description here](https://i.stack.imgur.com/bX56B.png)\r\n[enter image description here](https://i.stack.imgur.com/AWqDp.png)\r\n\r\nHowever, when I use my application to make these requests, a CORS Policy error is generated.\r\n[enter image description here](https://i.stack.imgur.com/0liC9.png)\r\nHere is my Angular Component: import { Component } from &#39;@angular/core&#39;;\r\n\r\n```\r\nimport { FormsModule } from &#39;@angular/forms&#39;;\r\nimport { HttpClient } from &#39;@angular/common/http&#39;;\r\n\r\n@Component({\r\n  selector: &#39;app-loginscreen&#39;,\r\n  templateUrl: &#39;./loginscreen.component.html&#39;,\r\n  styleUrls: [&#39;./loginscreen.component.css&#39;]\r\n})\r\nexport class LoginscreenComponent {\r\n  constructor(private httpClient: HttpClient) { }\r\n  public inputUsername: string = &quot;&quot;;\r\n  public inputPassword: string = &quot;&quot;;\r\n\r\n\r\n  login() {\r\n    // preparar requisi&#231;&#227;o http\r\n    // Suponhamos que voc&#234; tenha uma URL e os dados de login\r\n  const url = &#39;http://localhost:8080/auth/login&#39;;\r\n  const dadosDeLogin = {\r\n    username: this.inputUsername,\r\n    password: this.inputPassword\r\n  };\r\n  const headers = { &#39;content-type&#39;: &#39;application/json&#39;}  \r\n\r\n\r\n  this.httpClient.post(url, dadosDeLogin, { headers })\r\n  .subscribe(data =&gt; {\r\n    console.log(data);\r\n  })\r\n \r\n  }\r\n\r\n \r\n\r\n}\r\n```\r\n\r\nHere is my SecurityFilter class: \r\n```\r\n@Component\r\npublic class SecurityFilter extends OncePerRequestFilter {\r\n    @Autowired\r\n    TokenService tokenService;\r\n    @Autowired\r\n    AdministratorRepository administratorRepository;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        var token = this.recoverToken(request);\r\n        if(token != null){\r\n            var login = tokenService.validateToken(token);\r\n            UserDetails user = administratorRepository.findByUsername(login);\r\n\r\n            // Requests CORS\r\n            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:4200&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, PUT, OPTIONS, DELETE, PATCH&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization&quot;);\r\n\r\n\r\n            var authentication = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String recoverToken(HttpServletRequest request) {\r\n        var authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        if(authHeader == null) return null;\r\n        return authHeader.replace(&quot;Bearer &quot;, &quot;&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd here is my SecurityConfig class:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Autowired\r\n    SecurityFilter securityFilter;\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        return httpSecurity\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/auth/login&quot;)).permitAll()\r\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/auth/register&quot;)).permitAll()\r\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/users&quot;)).hasRole(&quot;ADMIN&quot;)\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .addFilterBefore(securityFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve tried a few ways to remove this error by setting CORS policy in my backend, but nothing seems to work. Can you help me?\r\n\r\n\r\nI tried enabling cross origin through my backend","title":"CORS Policy with Spring boot and Angular","body":"<p>I'm developing an Angular application that must log in to a SpringBoot application. The Backend is structured to perform authentication using username and password and, when authenticated, return a JWT token to the frontend.</p>\n<p>This structure works when I use postman, as shown below.\n<a href=\"https://i.stack.imgur.com/bX56B.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/AWqDp.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>However, when I use my application to make these requests, a CORS Policy error is generated.\n<a href=\"https://i.stack.imgur.com/0liC9.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nHere is my Angular Component: import { Component } from '@angular/core';</p>\n<pre><code>import { FormsModule } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-loginscreen',\n  templateUrl: './loginscreen.component.html',\n  styleUrls: ['./loginscreen.component.css']\n})\nexport class LoginscreenComponent {\n  constructor(private httpClient: HttpClient) { }\n  public inputUsername: string = &quot;&quot;;\n  public inputPassword: string = &quot;&quot;;\n\n\n  login() {\n    // preparar requisição http\n    // Suponhamos que você tenha uma URL e os dados de login\n  const url = 'http://localhost:8080/auth/login';\n  const dadosDeLogin = {\n    username: this.inputUsername,\n    password: this.inputPassword\n  };\n  const headers = { 'content-type': 'application/json'}  \n\n\n  this.httpClient.post(url, dadosDeLogin, { headers })\n  .subscribe(data =&gt; {\n    console.log(data);\n  })\n \n  }\n\n \n\n}\n</code></pre>\n<p>Here is my SecurityFilter class:</p>\n<pre><code>@Component\npublic class SecurityFilter extends OncePerRequestFilter {\n    @Autowired\n    TokenService tokenService;\n    @Autowired\n    AdministratorRepository administratorRepository;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        var token = this.recoverToken(request);\n        if(token != null){\n            var login = tokenService.validateToken(token);\n            UserDetails user = administratorRepository.findByUsername(login);\n\n            // Requests CORS\n            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:4200&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, PUT, OPTIONS, DELETE, PATCH&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Authorization&quot;);\n\n\n            var authentication = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    private String recoverToken(HttpServletRequest request) {\n        var authHeader = request.getHeader(&quot;Authorization&quot;);\n        if(authHeader == null) return null;\n        return authHeader.replace(&quot;Bearer &quot;, &quot;&quot;);\n    }\n}\n</code></pre>\n<p>And here is my SecurityConfig class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Autowired\n    SecurityFilter securityFilter;\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        return httpSecurity\n                .csrf(csrf -&gt; csrf.disable())\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/auth/login&quot;)).permitAll()\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/auth/register&quot;)).permitAll()\n                        .requestMatchers(AntPathRequestMatcher.antMatcher(HttpMethod.POST, &quot;/users&quot;)).hasRole(&quot;ADMIN&quot;)\n                        .anyRequest().authenticated()\n                )\n                .addFilterBefore(securityFilter, UsernamePasswordAuthenticationFilter.class)\n                .build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>I've tried a few ways to remove this error by setting CORS policy in my backend, but nothing seems to work. Can you help me?</p>\n<p>I tried enabling cross origin through my backend</p>\n"},{"tags":["java","javadoc"],"comments":[{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":4,"creation_date":1685425518,"post_id":5244048,"comment_id":134653668,"body_markdown":"Ironically found this question while looking for a way to tell javadoc _not_ to warn on missing comments. ;)","body":"Ironically found this question while looking for a way to tell javadoc <i>not</i> to warn on missing comments. ;)"}],"answers":[{"comments":[{"owner":{"account_id":238855,"reputation":2757,"user_id":508035,"accept_rate":87,"display_name":"Dunaril"},"score":0,"creation_date":1299665080,"post_id":5244086,"comment_id":5903209,"body_markdown":"Thanks for making me discover this :)","body":"Thanks for making me discover this :)"},{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1299665110,"post_id":5244086,"comment_id":5903214,"body_markdown":"Yes, checkstyle is the best bet and any violations with severity of error type will fail the build.","body":"Yes, checkstyle is the best bet and any violations with severity of error type will fail the build."},{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1299665115,"post_id":5244086,"comment_id":5903216,"body_markdown":"Thanks, this is well worth pointing out and I may well fall back to using checkstyle to do this. I just wondered if there was a simple Javadoc option I was missing that anyone knew about.","body":"Thanks, this is well worth pointing out and I may well fall back to using checkstyle to do this. I just wondered if there was a simple Javadoc option I was missing that anyone knew about."}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1299664814,"creation_date":1299664814,"answer_id":5244086,"question_id":5244048,"body_markdown":"You might try &lt;a href=&quot;http://checkstyle.sourceforge.net/&quot;&gt;checkstyle&lt;/a&gt; to enforce such conventions.","title":"Javadoc warn on no comment","body":"<p>You might try <a href=\"http://checkstyle.sourceforge.net/\" rel=\"noreferrer\">checkstyle</a> to enforce such conventions.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1299664902,"creation_date":1299664902,"answer_id":5244104,"question_id":5244048,"body_markdown":"This task is best done with a code analysis tool like PMD or FindBug (possibly check style) as these are designed find these sort of issues and much more.\r\n\r\nIntelliJ has a builtin checker which can help populate missing javadoc content as well as sanity check/spell check it.","title":"Javadoc warn on no comment","body":"<p>This task is best done with a code analysis tool like PMD or FindBug (possibly check style) as these are designed find these sort of issues and much more.</p>\n\n<p>IntelliJ has a builtin checker which can help populate missing javadoc content as well as sanity check/spell check it.</p>\n"},{"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1539077529,"post_id":5247465,"comment_id":92360860,"body_markdown":"Is there a newer version without `com.sun` package for java 8? I saw only from Java 9 https://docs.oracle.com/javase/10/docs/api/jdk/javadoc/doclet/Doclet.html","body":"Is there a newer version without <code>com.sun</code> package for java 8? I saw only from Java 9 <a href=\"https://docs.oracle.com/javase/10/docs/api/jdk/javadoc/doclet/Doclet.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/10/docs/api/jdk/javadoc/doclet/&hellip;</a>"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1539185064,"post_id":5247465,"comment_id":92411936,"body_markdown":"I didn&#39;t work with Javadoc recently, so I didn&#39;t try this. The [package summary page](https://docs.oracle.com/javase/10/docs/api/index.html?jdk/javadoc/doclet/package-summary.html) has some kind of migration guide, but I&#39;m not sure how easy it is to apply that in this case.","body":"I didn&#39;t work with Javadoc recently, so I didn&#39;t try this. The <a href=\"https://docs.oracle.com/javase/10/docs/api/index.html?jdk/javadoc/doclet/package-summary.html\" rel=\"nofollow noreferrer\">package summary page</a> has some kind of migration guide, but I&#39;m not sure how easy it is to apply that in this case."}],"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1299682139,"creation_date":1299682139,"answer_id":5247465,"question_id":5244048,"body_markdown":"If you really wanted to use Javadoc, a custom checking doclet would be the way to go.\r\n\r\nHere is an example:\r\n\r\n    package de.fencing_game.paul.examples.doclet;\r\n    \r\n    import com.sun.javadoc.*;\r\n    \r\n    public class CheckingDoclet extends Doclet {\r\n    \r\n        private static void checkElement(ProgramElementDoc ped,\r\n                                         DocErrorReporter err) {\r\n            if(ped.commentText().equals(&quot;&quot;)) {\r\n                err.printError(ped.position(), ped + &quot; has no documentation!&quot;);\r\n            }\r\n        }\r\n    \r\n        private static void checkAll(ProgramElementDoc[] array,\r\n                                     DocErrorReporter err) {\r\n            for(ProgramElementDoc ped : array) {\r\n               checkElement(ped, err);\r\n            }\r\n        }\r\n    \r\n        public static boolean start(RootDoc root) {\r\n            for(ClassDoc clazz : root.classes()) {\r\n               checkElement(clazz, root);\r\n               checkAll(clazz.constructors(), root);\r\n               checkAll(clazz.fields(), root);\r\n               checkAll(clazz.enumConstants(), root);\r\n               checkAll(clazz.methods(), root);\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\nRunning the doclet on itself (with ant) gives this output:\r\n\r\n    doccheck.doclet:\r\n      [javadoc] Generating Javadoc\r\n      [javadoc] Javadoc execution\r\n      [javadoc] Loading source files for package de.fencing_game.paul.examples.doclet...\r\n      [javadoc] Constructing Javadoc information...\r\n      [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:7: error - de.fencing_game.paul.examples.doclet.CheckingDoclet has no documentation!\r\n      [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:7: error - de.fencing_game.paul.examples.doclet.CheckingDoclet() has no documentation!\r\n      [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:9: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.checkElement(com.sun.javadoc.ProgramElementDoc, com.sun.javadoc.DocErrorReporter) has no documentation!\r\n      [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:16: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.checkAll(com.sun.javadoc.ProgramElementDoc[], com.sun.javadoc.DocErrorReporter) has no documentation!\r\n      [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:23: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.start(com.sun.javadoc.RootDoc) has no documentation!\r\n      [javadoc] 5 errors\r\n\r\n    BUILD SUCCESSFUL\r\n    Total time: 2 seconds\r\n\r\nIf we want this to be not successful whenever one error is found, we should return false from the start-method in this case.","title":"Javadoc warn on no comment","body":"<p>If you really wanted to use Javadoc, a custom checking doclet would be the way to go.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>package de.fencing_game.paul.examples.doclet;\n\nimport com.sun.javadoc.*;\n\npublic class CheckingDoclet extends Doclet {\n\n    private static void checkElement(ProgramElementDoc ped,\n                                     DocErrorReporter err) {\n        if(ped.commentText().equals(\"\")) {\n            err.printError(ped.position(), ped + \" has no documentation!\");\n        }\n    }\n\n    private static void checkAll(ProgramElementDoc[] array,\n                                 DocErrorReporter err) {\n        for(ProgramElementDoc ped : array) {\n           checkElement(ped, err);\n        }\n    }\n\n    public static boolean start(RootDoc root) {\n        for(ClassDoc clazz : root.classes()) {\n           checkElement(clazz, root);\n           checkAll(clazz.constructors(), root);\n           checkAll(clazz.fields(), root);\n           checkAll(clazz.enumConstants(), root);\n           checkAll(clazz.methods(), root);\n        }\n        return true;\n    }\n}\n</code></pre>\n\n<p>Running the doclet on itself (with ant) gives this output:</p>\n\n<pre><code>doccheck.doclet:\n  [javadoc] Generating Javadoc\n  [javadoc] Javadoc execution\n  [javadoc] Loading source files for package de.fencing_game.paul.examples.doclet...\n  [javadoc] Constructing Javadoc information...\n  [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:7: error - de.fencing_game.paul.examples.doclet.CheckingDoclet has no documentation!\n  [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:7: error - de.fencing_game.paul.examples.doclet.CheckingDoclet() has no documentation!\n  [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:9: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.checkElement(com.sun.javadoc.ProgramElementDoc, com.sun.javadoc.DocErrorReporter) has no documentation!\n  [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:16: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.checkAll(com.sun.javadoc.ProgramElementDoc[], com.sun.javadoc.DocErrorReporter) has no documentation!\n  [javadoc] de/fencing_game/paul/examples/doclet/CheckingDoclet.java:23: error - de.fencing_game.paul.examples.doclet.CheckingDoclet.start(com.sun.javadoc.RootDoc) has no documentation!\n  [javadoc] 5 errors\n\nBUILD SUCCESSFUL\nTotal time: 2 seconds\n</code></pre>\n\n<p>If we want this to be not successful whenever one error is found, we should return false from the start-method in this case.</p>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698007853,"creation_date":1698007853,"answer_id":77341661,"question_id":5244048,"body_markdown":"Newer JDK&#39;s support an explicit `-Xdoclint:missing` flag for this.\r\n\r\nE.g. in JDK 17:\r\n\r\n```\r\n$ javadoc -X\r\n...\r\n    -Xdoclint:(all|none|[-]&lt;group&gt;)\r\n                  Enable or disable specific checks for problems in javadoc\r\n                  comments, where &lt;group&gt; is one of accessibility, html,\r\n                  missing, reference, or syntax.\r\n```\r\n\r\nNote the `missing` option in there.","title":"Javadoc warn on no comment","body":"<p>Newer JDK's support an explicit <code>-Xdoclint:missing</code> flag for this.</p>\n<p>E.g. in JDK 17:</p>\n<pre><code>$ javadoc -X\n...\n    -Xdoclint:(all|none|[-]&lt;group&gt;)\n                  Enable or disable specific checks for problems in javadoc\n                  comments, where &lt;group&gt; is one of accessibility, html,\n                  missing, reference, or syntax.\n</code></pre>\n<p>Note the <code>missing</code> option in there.</p>\n"}],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8246,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":5247465,"answer_count":4,"score":5,"last_activity_date":1698007853,"creation_date":1299664651,"question_id":5244048,"body_markdown":"Is there a way (preferably via an argument, taglet, doclet or similar) to get Javadoc to generate a warning if there is no javadoc comment provided for a method or class? I&#39;ve had a scout around at the options and Googled but can&#39;t see anything that stands out as being relevant. I&#39;m currently working on a project where everything needs to have some form of Javadoc comment and this would be really useful for that purpose.\r\n\r\nEDIT: I know such things can be enforced via code quality tools such as checkstyle, I was just wondering if there was a way to configure Javadoc to warn about different things such as this.","title":"Javadoc warn on no comment","body":"<p>Is there a way (preferably via an argument, taglet, doclet or similar) to get Javadoc to generate a warning if there is no javadoc comment provided for a method or class? I've had a scout around at the options and Googled but can't see anything that stands out as being relevant. I'm currently working on a project where everything needs to have some form of Javadoc comment and this would be really useful for that purpose.</p>\n\n<p>EDIT: I know such things can be enforced via code quality tools such as checkstyle, I was just wondering if there was a way to configure Javadoc to warn about different things such as this.</p>\n"},{"tags":["java","apache-flink"],"owner":{"account_id":20595972,"reputation":1,"user_id":15118380,"display_name":"dennaresin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698007816,"creation_date":1698007816,"question_id":77341656,"body_markdown":"I&#39;ve been trying to read in some files from a directory with Apache Flink. However, it&#39;s important that I am able to know or control the order in which they&#39;re read in. Is there any way to do that with Flink, or does it have its own method of determining what order to read them in?\r\n\r\nI have been googling all over the internet, and haven&#39;t found a solid answer for how to make sure that FileSource or FileEnumerator read them in in the order that I want. The most recent question about this was in 2018, and I&#39;m just wondering if there have been any improvements, or if I still have to make my own function to do it.","title":"Apache Flink FileSource Directory","body":"<p>I've been trying to read in some files from a directory with Apache Flink. However, it's important that I am able to know or control the order in which they're read in. Is there any way to do that with Flink, or does it have its own method of determining what order to read them in?</p>\n<p>I have been googling all over the internet, and haven't found a solid answer for how to make sure that FileSource or FileEnumerator read them in in the order that I want. The most recent question about this was in 2018, and I'm just wondering if there have been any improvements, or if I still have to make my own function to do it.</p>\n"},{"tags":["java","google-api","google-calendar-api"],"answers":[{"comments":[{"owner":{"account_id":3915903,"reputation":652,"user_id":3239727,"display_name":"Hasam"},"score":0,"creation_date":1650918971,"post_id":70600388,"comment_id":127233016,"body_markdown":"Which one is the event ID in the notification by Google?","body":"Which one is the event ID in the notification by Google?"}],"tags":[],"owner":{"account_id":3998039,"reputation":395,"user_id":3294937,"display_name":"VinnyQ77"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641422042,"creation_date":1641422042,"answer_id":70600388,"question_id":70115780,"body_markdown":"if you have the calendar and event id (e.g. from the notification you get from Google that you receive and parse at your webhookUrl location), you can make calendar api calls to get all the event details:  https://developers.google.com/calendar/api/v3/reference/events/get","title":"Watch Google Calendar event for changes and updating server-side","body":"<p>if you have the calendar and event id (e.g. from the notification you get from Google that you receive and parse at your webhookUrl location), you can make calendar api calls to get all the event details:  <a href=\"https://developers.google.com/calendar/api/v3/reference/events/get\" rel=\"nofollow noreferrer\">https://developers.google.com/calendar/api/v3/reference/events/get</a></p>\n"}],"owner":{"account_id":97313,"reputation":6321,"user_id":264028,"accept_rate":75,"display_name":"Joaqu&#237;n L. Robles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1040,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698007406,"creation_date":1637864697,"question_id":70115780,"body_markdown":"I&#39;m trying to listen to a Google Calendar event I created using a **watch** request but I have no clue how to get the event details once I get the push notification.\r\n\r\nSo this is what I have so far, I create the Calendar event using JavaScript (it prompts the user for authorization):\r\n\r\n```javascript\r\nfunction createEvent(data) {\r\n  var request = gapi.client.calendar.events.insert({\r\n    &#39;calendarId&#39;: &#39;primary&#39;,\r\n    &#39;resource&#39;: data\r\n  });\r\n\r\n  request.execute(function(event) {\r\n    if (!event.code) {\r\n      openToast(&#39;The event was added to your Google Calendar&#39;)\r\n\r\n      watchEvent(data.id);\r\n    }\r\n  });\r\n}\r\n```\r\n\r\nAnd then I create a **watch** request to get the PUSH notifications:\r\n\r\n```javascript\r\nfunction watchEvent(eventId) {\r\n  gapi.client.calendar.events.watch({\r\n    auth: gapi.auth2.getAuthInstance(),\r\n    resource: {\r\n      id: eventId,\r\n      type: &#39;web_hook&#39;,\r\n      address: webhookUrl\r\n    },\r\n    calendarId: &#39;primary&#39;\r\n  }).execute(function onWatchCalendarEvent(event) {\r\n    if (event.error) {\r\n      console.error(&#39;Error creating event watch webhook&#39;, event.error);\r\n    }\r\n  });\r\n}\r\n```\r\n\r\nSo far so good, this is working OK and I receive a PUSH notification with the `channelID` from which I can get my own internal `meetingId`.\r\n\r\n```java\r\n@PostMapping\r\n  public void onCalendarEventUpdate(@RequestHeader(name = &quot;x-goog-channel-id&quot;) String channelId,\r\n      @RequestHeader(name = &quot;x-goog-resource-state&quot;) String resourceState) {\r\n    \r\n    log.info(&quot;Received Google Calendar event update notification: &quot; + resourceState);\r\n\r\n    // only when the event is modified google posts the resource state as &quot;exists&quot;\r\n    // (what kind of name is that anyway?)\r\n    if (resourceState.equals(&quot;exists&quot;)) {\r\n\r\n      // get the meeting ID from the channel ID\r\n      Long meetingId = findMeetingIdFromChannelId(channelId);\r\n  \r\n      calendarService.updateMeeting(meetingsService.findById(meetingId));\r\n    }\r\n  }\r\n```\r\n\r\nI&#39;ve read the docs for [Authorizing Requests][1], [PUSH Notifications][2] and [Java API Getting Started][3] but they all prompt for the user authorization. Since this PUSH notification is happening asynchronously how am I supposed to get the updated event details? Thanks\r\n\r\n\r\n  [1]: https://developers.google.com/calendar/api/guides/auth\r\n  [2]: https://developers.google.com/calendar/api/guides/push\r\n  [3]: https://developers.google.com/calendar/api/quickstart/java","title":"Watch Google Calendar event for changes and updating server-side","body":"<p>I'm trying to listen to a Google Calendar event I created using a <strong>watch</strong> request but I have no clue how to get the event details once I get the push notification.</p>\n<p>So this is what I have so far, I create the Calendar event using JavaScript (it prompts the user for authorization):</p>\n<pre class=\"lang-js prettyprint-override\"><code>function createEvent(data) {\n  var request = gapi.client.calendar.events.insert({\n    'calendarId': 'primary',\n    'resource': data\n  });\n\n  request.execute(function(event) {\n    if (!event.code) {\n      openToast('The event was added to your Google Calendar')\n\n      watchEvent(data.id);\n    }\n  });\n}\n</code></pre>\n<p>And then I create a <strong>watch</strong> request to get the PUSH notifications:</p>\n<pre class=\"lang-js prettyprint-override\"><code>function watchEvent(eventId) {\n  gapi.client.calendar.events.watch({\n    auth: gapi.auth2.getAuthInstance(),\n    resource: {\n      id: eventId,\n      type: 'web_hook',\n      address: webhookUrl\n    },\n    calendarId: 'primary'\n  }).execute(function onWatchCalendarEvent(event) {\n    if (event.error) {\n      console.error('Error creating event watch webhook', event.error);\n    }\n  });\n}\n</code></pre>\n<p>So far so good, this is working OK and I receive a PUSH notification with the <code>channelID</code> from which I can get my own internal <code>meetingId</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping\n  public void onCalendarEventUpdate(@RequestHeader(name = &quot;x-goog-channel-id&quot;) String channelId,\n      @RequestHeader(name = &quot;x-goog-resource-state&quot;) String resourceState) {\n    \n    log.info(&quot;Received Google Calendar event update notification: &quot; + resourceState);\n\n    // only when the event is modified google posts the resource state as &quot;exists&quot;\n    // (what kind of name is that anyway?)\n    if (resourceState.equals(&quot;exists&quot;)) {\n\n      // get the meeting ID from the channel ID\n      Long meetingId = findMeetingIdFromChannelId(channelId);\n  \n      calendarService.updateMeeting(meetingsService.findById(meetingId));\n    }\n  }\n</code></pre>\n<p>I've read the docs for <a href=\"https://developers.google.com/calendar/api/guides/auth\" rel=\"nofollow noreferrer\">Authorizing Requests</a>, <a href=\"https://developers.google.com/calendar/api/guides/push\" rel=\"nofollow noreferrer\">PUSH Notifications</a> and <a href=\"https://developers.google.com/calendar/api/quickstart/java\" rel=\"nofollow noreferrer\">Java API Getting Started</a> but they all prompt for the user authorization. Since this PUSH notification is happening asynchronously how am I supposed to get the updated event details? Thanks</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1377171763,"creation_date":1377171313,"answer_id":18379277,"question_id":18379187,"body_markdown":"The following line : \r\n\r\n    Arrays.sort(dirList);\r\n\r\nsorts your files using the `File#compareTo()` method, which basically sorts your files by pathname.\r\n\r\nYou must create a custom implementation of [Comparator][1] then call :\r\n\r\n    Arrays.sort(dirList, new YourCustomComparator());\r\n\r\n\r\nFor example :\r\n\r\n    Comparator&lt;File&gt; comparator = new Comparator&lt;File&gt;() {\r\n      @Override\r\n      public int compare(File o1, File o2) {\r\n        /*\r\n         * Here, compare your two files with your own algorithm.\r\n         * Here is an example without any check/exception catch\r\n         */\r\n        String from1 = o1.getName().split(&quot;-&quot;)[0]; //For &#39;1-5&#39;, it will return &#39;1&#39; \r\n        String from2 = o2.getName().split(&quot;-&quot;)[0]; //For &#39;11-20&#39;, it will return &#39;11&#39;\r\n\r\n        //Convert to Integer then compare : \r\n        return Integer.parseInt(from2)-Integer.parseInt(from1);\r\n      }\r\n    }\r\n\r\n    //Then use your comparator to sort the files:\r\n    Arrays.sort(dirList, comparator);\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html","title":"How to sort directories based on name which is integer?","body":"<p>The following line : </p>\n\n<pre><code>Arrays.sort(dirList);\n</code></pre>\n\n<p>sorts your files using the <code>File#compareTo()</code> method, which basically sorts your files by pathname.</p>\n\n<p>You must create a custom implementation of <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"nofollow\">Comparator</a> then call :</p>\n\n<pre><code>Arrays.sort(dirList, new YourCustomComparator());\n</code></pre>\n\n<p>For example :</p>\n\n<pre><code>Comparator&lt;File&gt; comparator = new Comparator&lt;File&gt;() {\n  @Override\n  public int compare(File o1, File o2) {\n    /*\n     * Here, compare your two files with your own algorithm.\n     * Here is an example without any check/exception catch\n     */\n    String from1 = o1.getName().split(\"-\")[0]; //For '1-5', it will return '1' \n    String from2 = o2.getName().split(\"-\")[0]; //For '11-20', it will return '11'\n\n    //Convert to Integer then compare : \n    return Integer.parseInt(from2)-Integer.parseInt(from1);\n  }\n}\n\n//Then use your comparator to sort the files:\nArrays.sort(dirList, comparator);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":645027,"reputation":329,"user_id":432031,"display_name":"mnkypete"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1377171453,"creation_date":1377171453,"answer_id":18379317,"question_id":18379187,"body_markdown":"In addition to Arnauds answer, if you only want to have directories, you can use a file filter in addition:\r\n\r\n    FileFilter filter = new FileFilter()\r\n    {\r\n       public boolean accept(File file) {\r\n         return file.isDirectory();\r\n       }\r\n    };\r\n\r\n    File[] dirList = mainDir.listFiles(filter);","title":"How to sort directories based on name which is integer?","body":"<p>In addition to Arnauds answer, if you only want to have directories, you can use a file filter in addition:</p>\n\n<pre><code>FileFilter filter = new FileFilter()\n{\n   public boolean accept(File file) {\n     return file.isDirectory();\n   }\n};\n\nFile[] dirList = mainDir.listFiles(filter);\n</code></pre>\n"}],"owner":{"account_id":202342,"reputation":13496,"user_id":449355,"accept_rate":91,"display_name":"Umesh K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18379277,"answer_count":2,"score":2,"last_activity_date":1698006023,"creation_date":1377171087,"question_id":18379187,"body_markdown":"I would like to sort list of directories based on numbers. I have directories named like `11-20,1-5,6-10,21-30` etc. Now I want to sort them based on numbers in it so that 1 to N directories come in order I mean in order `1-5,6-10,11-20,21-30`. I am using the following code but it&#39;s not working.\r\n\r\n    File[] dirList = mainDir.listFiles();\r\n    Arrays.sort(dirList);\r\n\r\nI am new to file and directory manipulation in Java. What can I try next?\r\n","title":"How to sort directories based on name which is integer?","body":"<p>I would like to sort list of directories based on numbers. I have directories named like <code>11-20,1-5,6-10,21-30</code> etc. Now I want to sort them based on numbers in it so that 1 to N directories come in order I mean in order <code>1-5,6-10,11-20,21-30</code>. I am using the following code but it's not working.</p>\n<pre><code>File[] dirList = mainDir.listFiles();\nArrays.sort(dirList);\n</code></pre>\n<p>I am new to file and directory manipulation in Java. What can I try next?</p>\n"},{"tags":["java","function","kotlin","uuid"],"comments":[{"owner":{"account_id":15513660,"reputation":45,"user_id":11191832,"display_name":"kwas"},"score":0,"creation_date":1697928610,"post_id":77338035,"comment_id":136341401,"body_markdown":"https://github.com/Kotlin/KEEP/issues/348","body":"<a href=\"https://github.com/Kotlin/KEEP/issues/348\" rel=\"nofollow noreferrer\">github.com/Kotlin/KEEP/issues/348</a>"}],"answers":[{"comments":[{"owner":{"account_id":15513660,"reputation":45,"user_id":11191832,"display_name":"kwas"},"score":1,"creation_date":1697929719,"post_id":77338052,"comment_id":136341458,"body_markdown":"Yes, I&#39;ve already discovered that (in edit section), maybe it will be an option in the future: https://github.com/Kotlin/KEEP/issues/348","body":"Yes, I&#39;ve already discovered that (in edit section), maybe it will be an option in the future: <a href=\"https://github.com/Kotlin/KEEP/issues/348\" rel=\"nofollow noreferrer\">github.com/Kotlin/KEEP/issues/348</a>"}],"tags":[],"owner":{"account_id":29520193,"reputation":932,"user_id":22623172,"display_name":"Vlad Guriev"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697928594,"creation_date":1697928594,"answer_id":77338052,"question_id":77338035,"body_markdown":"Your extension is on the UUID instance, that&#39;s why it&#39;s not working when called as a static method (but, for example, `UUID.randomUUID().fromDatabase(...)` would work)\r\n\r\nYou would be able to do this if UUID class was written in Kotlin and had public companion object, so that your extension function would have been on `UUID.Companion`, but in this case it&#39;s impossible.","title":"Kotlin extensions does not work with java.util.UUID","body":"<p>Your extension is on the UUID instance, that's why it's not working when called as a static method (but, for example, <code>UUID.randomUUID().fromDatabase(...)</code> would work)</p>\n<p>You would be able to do this if UUID class was written in Kotlin and had public companion object, so that your extension function would have been on <code>UUID.Companion</code>, but in this case it's impossible.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698005785,"creation_date":1698005785,"answer_id":77341557,"question_id":77338035,"body_markdown":"You are trying to create an extension function on the class UUID, but you use it as a static method. Extension functions in Kotlin are not static methods, they are instance methods. So, you cannot call them on the class itself, you can only call them on an instance of the class. \r\n\r\nIn your case, you can create a top-level function instead of an extension function. Here is how you can do it:\r\n\r\n    import java.nio.ByteBuffer\r\n    import java.util.*\r\n    \r\n    fun fromDatabase(byteArray: ByteArray): UUID {\r\n        val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\r\n        val high: Long = bb.getLong()\r\n        val low: Long = bb.getLong()\r\n    \r\n        return UUID(high, low)\r\n    }\r\n\r\nAnd you can use it like this:\r\n\r\n    val id = fromDatabase(element[&quot;id&quot;] as ByteArray)\r\n\r\n\r\n","title":"Kotlin extensions does not work with java.util.UUID","body":"<p>You are trying to create an extension function on the class UUID, but you use it as a static method. Extension functions in Kotlin are not static methods, they are instance methods. So, you cannot call them on the class itself, you can only call them on an instance of the class.</p>\n<p>In your case, you can create a top-level function instead of an extension function. Here is how you can do it:</p>\n<pre><code>import java.nio.ByteBuffer\nimport java.util.*\n\nfun fromDatabase(byteArray: ByteArray): UUID {\n    val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\n    val high: Long = bb.getLong()\n    val low: Long = bb.getLong()\n\n    return UUID(high, low)\n}\n</code></pre>\n<p>And you can use it like this:</p>\n<pre><code>val id = fromDatabase(element[&quot;id&quot;] as ByteArray)\n</code></pre>\n"}],"owner":{"account_id":15513660,"reputation":45,"user_id":11191832,"display_name":"kwas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77338052,"answer_count":2,"score":0,"last_activity_date":1698005785,"creation_date":1697927969,"question_id":77338035,"body_markdown":"I&#39;ve tried to create extension function in Kotlin, however, compilator does not see it, it does not work, no matter if I import it manually or not, other extensions work well in my code.\r\nIt event does not work if I put this extension in a class where I want to use it.\r\n\r\n```\r\nimport java.nio.ByteBuffer\r\nimport java.util.*\r\n\r\nfun UUID.fromDatabase(byteArray: ByteArray): UUID {\r\n    val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\r\n    val high: Long = bb.getLong()\r\n    val low: Long = bb.getLong()\r\n\r\n    return UUID(high, low)\r\n}\r\n\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uHhfA.png\r\n\r\nEDIT:\r\nI see that is not possible, to add static extension, I had to do something like below:\r\n\r\n```\r\nfun KClass&lt;UUID&gt;.fromDatabase(byteArray: ByteArray): UUID {\r\n    val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\r\n    val high: Long = bb.getLong()\r\n    val low: Long = bb.getLong()\r\n\r\n    return UUID(high, low)\r\n}\r\n\r\n```\r\nand the usage\r\n```\r\nval id = UUID::class.fromDatabase(element[&quot;id&quot;] as ByteArray)\r\n```","title":"Kotlin extensions does not work with java.util.UUID","body":"<p>I've tried to create extension function in Kotlin, however, compilator does not see it, it does not work, no matter if I import it manually or not, other extensions work well in my code.\nIt event does not work if I put this extension in a class where I want to use it.</p>\n<pre><code>import java.nio.ByteBuffer\nimport java.util.*\n\nfun UUID.fromDatabase(byteArray: ByteArray): UUID {\n    val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\n    val high: Long = bb.getLong()\n    val low: Long = bb.getLong()\n\n    return UUID(high, low)\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uHhfA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uHhfA.png\" alt=\"enter image description here\" /></a></p>\n<p>EDIT:\nI see that is not possible, to add static extension, I had to do something like below:</p>\n<pre><code>fun KClass&lt;UUID&gt;.fromDatabase(byteArray: ByteArray): UUID {\n    val bb: ByteBuffer = ByteBuffer.wrap(byteArray)\n    val high: Long = bb.getLong()\n    val low: Long = bb.getLong()\n\n    return UUID(high, low)\n}\n\n</code></pre>\n<p>and the usage</p>\n<pre><code>val id = UUID::class.fromDatabase(element[&quot;id&quot;] as ByteArray)\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":911459,"reputation":2140,"user_id":945214,"display_name":"gargkshitiz"},"score":0,"creation_date":1521101757,"post_id":49293968,"comment_id":85590893,"body_markdown":"See https://stackoverflow.com/questions/37555557/m2e-error-in-mavenarchiver-getmanifest","body":"See <a href=\"https://stackoverflow.com/questions/37555557/m2e-error-in-mavenarchiver-getmanifest\" title=\"m2e error in mavenarchiver getmanifest\">stackoverflow.com/questions/37555557/&hellip;</a>"},{"owner":{"account_id":7131643,"reputation":161,"user_id":5452653,"display_name":"Mamun Kayum"},"score":0,"creation_date":1521102243,"post_id":49293968,"comment_id":85591147,"body_markdown":"Check this one: https://github.com/tesla/m2eclipse-mavenarchiver/issues/8","body":"Check this one: <a href=\"https://github.com/tesla/m2eclipse-mavenarchiver/issues/8\" rel=\"nofollow noreferrer\">github.com/tesla/m2eclipse-mavenarchiver/issues/8</a>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1521103127,"post_id":49293968,"comment_id":85591599,"body_markdown":"The hint of S Sourav is correct. Please update your m2e integeration version in eclise...","body":"The hint of S Sourav is correct. Please update your m2e integeration version in eclise..."},{"owner":{"account_id":2282282,"reputation":1401,"user_id":2007101,"display_name":"Chinmoy"},"score":0,"creation_date":1529939627,"post_id":49293968,"comment_id":89045813,"body_markdown":"Update your m2e plugin.[link] https://otto.takari.io/content/sites/m2e.extras/m2eclipse-mavenarchiver/0.17.2/N/LATEST/","body":"Update your m2e plugin.[link] <a href=\"https://otto.takari.io/content/sites/m2e.extras/m2eclipse-mavenarchiver/0.17.2/N/LATEST/\" rel=\"nofollow noreferrer\">otto.takari.io/content/sites/m2e.extras/m2eclipse-mavenarchi&zwnj;&#8203;ver/&hellip;</a>"},{"owner":{"account_id":4089463,"reputation":381,"user_id":3357884,"accept_rate":100,"display_name":"Mahan"},"score":0,"creation_date":1547635389,"post_id":49293968,"comment_id":95256216,"body_markdown":"See my answer [here](https://stackoverflow.com/a/54215242/3357884). Hope that helps!","body":"See my answer <a href=\"https://stackoverflow.com/a/54215242/3357884\">here</a>. Hope that helps!"},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":0,"creation_date":1614424561,"post_id":49293968,"comment_id":117384733,"body_markdown":"Stop using eclipse. It is junk.","body":"Stop using eclipse. It is junk."}],"answers":[{"comments":[{"owner":{"account_id":3023534,"reputation":5567,"user_id":10532500,"display_name":"Suraj Kumar"},"score":0,"creation_date":1553925182,"post_id":55428496,"comment_id":97575573,"body_markdown":"Please explain how it solved the problem of OP regarding his question.","body":"Please explain how it solved the problem of OP regarding his question."}],"tags":[],"owner":{"account_id":7569713,"reputation":23,"user_id":5747979,"display_name":"Ricardo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553958542,"creation_date":1553923914,"answer_id":55428496,"question_id":49293968,"body_markdown":"I changed 2.0.0.RELEASE to 1.5.19.RELEASE\r\n\r\nI found the solution in: https://stackoverflow.com/a/49313603/5747979","title":"Eclipse POM error - MavenArchiver.getManifest","body":"<p>I changed 2.0.0.RELEASE to 1.5.19.RELEASE</p>\n\n<p>I found the solution in: <a href=\"https://stackoverflow.com/a/49313603/5747979\">https://stackoverflow.com/a/49313603/5747979</a></p>\n"}],"owner":{"account_id":423223,"reputation":5101,"user_id":802482,"accept_rate":67,"display_name":"Black"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9820,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698004960,"creation_date":1521099901,"question_id":49293968,"body_markdown":"I&#39;ve just created a new project, below in my Maven POM\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.company&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;tracking&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;tracking&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n\r\nEclipse (4.5.0) is showing an Error\r\n\r\n&gt; org.apache.maven.archiver.MavenArchiver.getManifest(org.apache.maven.project.MavenProject, org.apache.maven.archiver.MavenArchiveConfiguration)\tpom.xml\t/tracking\tline 1\tMaven Configuration Problem\r\n \r\n\r\nThis message is not very helpful - what could be wrong with the POM?","title":"Eclipse POM error - MavenArchiver.getManifest","body":"<p>I've just created a new project, below in my Maven POM</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0</p>\n\n<pre><code>&lt;groupId&gt;com.company&lt;/groupId&gt;\n&lt;artifactId&gt;tracking&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;tracking&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>Eclipse (4.5.0) is showing an Error</p>\n\n<blockquote>\n  <p>org.apache.maven.archiver.MavenArchiver.getManifest(org.apache.maven.project.MavenProject, org.apache.maven.archiver.MavenArchiveConfiguration)   pom.xml /tracking   line 1  Maven Configuration Problem</p>\n</blockquote>\n\n<p>This message is not very helpful - what could be wrong with the POM?</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1697978710,"post_id":77337754,"comment_id":136344523,"body_markdown":"I suggest not using lenses or any UI tool that would hide deserializer logic. Write a consumer in Java and compare what deserializer works. Otherwise, just use kafka-console-producer rather than write code since that&#39;s still &quot;using Java&quot;","body":"I suggest not using lenses or any UI tool that would hide deserializer logic. Write a consumer in Java and compare what deserializer works. Otherwise, just use kafka-console-producer rather than write code since that&#39;s still &quot;using Java&quot;"},{"owner":{"account_id":10006774,"reputation":168,"user_id":7400965,"display_name":"jkim"},"score":0,"creation_date":1698002584,"post_id":77337754,"comment_id":136347092,"body_markdown":"@OneCricketeer thanks for your response! I know my question was bit tough, especially to those who never used tool like lenses before. With your hint, I was able to figure out lenses configuration. I&#39;ll answer my own question below. Thanks again!","body":"@OneCricketeer thanks for your response! I know my question was bit tough, especially to those who never used tool like lenses before. With your hint, I was able to figure out lenses configuration. I&#39;ll answer my own question below. Thanks again!"}],"answers":[{"tags":[],"owner":{"account_id":10006774,"reputation":168,"user_id":7400965,"display_name":"jkim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698002750,"creation_date":1698002750,"answer_id":77341405,"question_id":77337754,"body_markdown":"So it turns out Lenses had configuration setting where value can either be displayed as `String` or `JSON`, as shown below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWith this change, the value now displays as Json as I wanted it to be.\r\n\r\n  [1]: https://i.stack.imgur.com/l03pQ.png","title":"Send Raw Json to Kafka Topic in Java","body":"<p>So it turns out Lenses had configuration setting where value can either be displayed as <code>String</code> or <code>JSON</code>, as shown below.</p>\n<p><a href=\"https://i.stack.imgur.com/l03pQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l03pQ.png\" alt=\"enter image description here\" /></a></p>\n<p>With this change, the value now displays as Json as I wanted it to be.</p>\n"}],"owner":{"account_id":10006774,"reputation":168,"user_id":7400965,"display_name":"jkim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1698002750,"creation_date":1697921372,"question_id":77337754,"body_markdown":"I&#39;m tring to send json-string to Kafka topic, using Java.\r\nThere are many similar threads out there such as:\r\n- https://stackoverflow.com/questions/53388646/send-a-json-payload-to-apache-kafka-topic-in-spring\r\n- https://stackoverflow.com/questions/54513153/sending-json-object-to-kafka-topic-in-java\r\n\r\nMy Code Snippet\r\n```\r\nString body = &quot;{\\&quot;theKey\\&quot;:\\&quot;theValue\\&quot;}&quot;;\r\n\r\nvar record = new ProducerRecord&lt;&gt;(String, null, new ObjectMapper().readTree(body));\r\n\r\n...\r\n\r\nproperties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, ByteArraySerializer.class.getName());\r\nproperties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class.getName());\r\nvar producer = new KafkaProducer&lt;&gt;(properties);\r\n\r\n...\r\n\r\nproducer.send(record, callback);\r\n```\r\n\r\n\r\nAlternatively,\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_ABSENT)\r\npublic class POJO {\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id= id;\r\n    }\r\n\r\n    String id;\r\n}\r\n\r\n...\r\n\r\nvar pojoBytes = new ObjectMapper().objectMapper.writeValueAsBytes(POJO);\r\n\r\nvar record = new ProducerRecord&lt;&gt;(String, null, pojoBytes); // Given that ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG is now ByteArraySerializer\r\n```\r\n\r\nContext\r\n- I&#39;ve tried JsonSerializer\r\n- I&#39;ve tried Custom Serializer that pretty much mimics what OOB JsonSerializer does\r\n- I&#39;m able to publish successfully to Kafka topic without any issue.\r\n\r\nBut what I&#39;m seeing in the Kafka topic is the following (through lenses):\r\n\r\n    VALUE:&quot;{&quot;theKey&quot;:&quot;theValue&quot;}&quot;\r\n\r\nExpectation is:\r\n\r\n    VALUE:{&quot;theKey&quot;:&quot;theValue&quot;}\r\n\r\nAny thoughts?","title":"Send Raw Json to Kafka Topic in Java","body":"<p>I'm tring to send json-string to Kafka topic, using Java.\nThere are many similar threads out there such as:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/53388646/send-a-json-payload-to-apache-kafka-topic-in-spring\">Send a json payload to Apache Kafka topic in Spring</a></li>\n<li><a href=\"https://stackoverflow.com/questions/54513153/sending-json-object-to-kafka-topic-in-java\">Sending Json Object to kafka topic in java</a></li>\n</ul>\n<p>My Code Snippet</p>\n<pre><code>String body = &quot;{\\&quot;theKey\\&quot;:\\&quot;theValue\\&quot;}&quot;;\n\nvar record = new ProducerRecord&lt;&gt;(String, null, new ObjectMapper().readTree(body));\n\n...\n\nproperties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, ByteArraySerializer.class.getName());\nproperties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class.getName());\nvar producer = new KafkaProducer&lt;&gt;(properties);\n\n...\n\nproducer.send(record, callback);\n</code></pre>\n<p>Alternatively,</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_ABSENT)\npublic class POJO {\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id= id;\n    }\n\n    String id;\n}\n\n...\n\nvar pojoBytes = new ObjectMapper().objectMapper.writeValueAsBytes(POJO);\n\nvar record = new ProducerRecord&lt;&gt;(String, null, pojoBytes); // Given that ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG is now ByteArraySerializer\n</code></pre>\n<p>Context</p>\n<ul>\n<li>I've tried JsonSerializer</li>\n<li>I've tried Custom Serializer that pretty much mimics what OOB JsonSerializer does</li>\n<li>I'm able to publish successfully to Kafka topic without any issue.</li>\n</ul>\n<p>But what I'm seeing in the Kafka topic is the following (through lenses):</p>\n<pre><code>VALUE:&quot;{&quot;theKey&quot;:&quot;theValue&quot;}&quot;\n</code></pre>\n<p>Expectation is:</p>\n<pre><code>VALUE:{&quot;theKey&quot;:&quot;theValue&quot;}\n</code></pre>\n<p>Any thoughts?</p>\n"},{"tags":["java","spring","postgresql","spring-boot","docker"],"comments":[{"owner":{"account_id":5284837,"reputation":40522,"user_id":9401096,"display_name":"Zeitounator"},"score":1,"creation_date":1698002952,"post_id":77341302,"comment_id":136347135,"body_markdown":"Please [edit] your question and add the **code, logs, output, error messages... directly in the question body as [code block]**. Using images for this has [numerous disadvantages](https://meta.stackoverflow.com/questions/285551#285557) and is specifically listed as a bad practice in [ask]. Thanks","body":"Please <a href=\"https://stackoverflow.com/posts/77341302/edit\">edit</a> your question and add the <b>code, logs, output, error messages... directly in the question body as <a href=\"https://stackoverflow.com/editing-help#code\">code block</a></b>. Using images for this has <a href=\"https://meta.stackoverflow.com/questions/285551#285557\">numerous disadvantages</a> and is specifically listed as a bad practice in <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Thanks"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1698003333,"post_id":77341302,"comment_id":136347171,"body_markdown":"The database location is different inside Docker vs. not.  Consider setting `SPRING_DATASOURCE_URL` as an environment variable in your Docker setup to the Docker-specific value.  The linked question has some examples.","body":"The database location is different inside Docker vs. not.  Consider setting <code>SPRING_DATASOURCE_URL</code> as an environment variable in your Docker setup to the Docker-specific value.  The linked question has some examples."}],"owner":{"account_id":16607946,"reputation":1,"user_id":12001816,"display_name":"Omkar Mayekar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698003272,"answer_count":0,"score":0,"last_activity_date":1698001237,"creation_date":1698001012,"question_id":77341302,"body_markdown":"I am trying containerize a spring boot application. For that I have added a Dockerfile in the parent directory of the application. \r\n[Find the Dockerfile image here](https://i.stack.imgur.com/aPxH2.png)\r\n\r\nI did maven clean install with the below configuration. \r\n```\r\n  datasource:  \r\n    url: &quot;jdbc:postgresql://localhost:5432/treefe&quot;\r\n    username: postgres\r\n    password: 12345\r\n    driver-class-name: org.postgresql.Driver\r\n```\r\n\r\nWhen I try to run the container I am getting the error as shown. [check the error here](https://i.stack.imgur.com/FYUEx.png)\r\n\r\nI have pulled the postgres image from dockerhub and ran the container. \r\nThen I inspected the container and found the &quot;IPAddress&quot;: &quot;172.17.0.2&quot; and added that in the configuration as shown.\r\n```\r\n  datasource:  \r\n    url: &quot;jdbc:postgresql://172.17.0.2:5432/treefe&quot;\r\n    username: postgres\r\n    password: 12345\r\n    driver-class-name: org.postgresql.Driver\r\n```\r\nWhen I try to run mvn clean install I am getting the error as shown.[check error here](https://i.stack.imgur.com/Om2Uu.png)\r\n\r\nFrom the error shown while running the container its clear that the jar is having localhost and that is why it is not able to connect. But if I try to change the connection properties details in the spring boot app and try to build the jar that is also failing. Please help me in fixing this. Thanks in advance.\r\n\r\nAlso find the Dockerfile\r\n```\r\nFROM openjdk:17-oracle\r\nCOPY target/*.jar testapp.jar\r\nEXPOSE 8082\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;testapp.jar&quot;]\r\n```","title":"Unable to connect to the postgres DB from dockerized spring application","body":"<p>I am trying containerize a spring boot application. For that I have added a Dockerfile in the parent directory of the application.\n<a href=\"https://i.stack.imgur.com/aPxH2.png\" rel=\"nofollow noreferrer\">Find the Dockerfile image here</a></p>\n<p>I did maven clean install with the below configuration.</p>\n<pre><code>  datasource:  \n    url: &quot;jdbc:postgresql://localhost:5432/treefe&quot;\n    username: postgres\n    password: 12345\n    driver-class-name: org.postgresql.Driver\n</code></pre>\n<p>When I try to run the container I am getting the error as shown. <a href=\"https://i.stack.imgur.com/FYUEx.png\" rel=\"nofollow noreferrer\">check the error here</a></p>\n<p>I have pulled the postgres image from dockerhub and ran the container.\nThen I inspected the container and found the &quot;IPAddress&quot;: &quot;172.17.0.2&quot; and added that in the configuration as shown.</p>\n<pre><code>  datasource:  \n    url: &quot;jdbc:postgresql://172.17.0.2:5432/treefe&quot;\n    username: postgres\n    password: 12345\n    driver-class-name: org.postgresql.Driver\n</code></pre>\n<p>When I try to run mvn clean install I am getting the error as shown.<a href=\"https://i.stack.imgur.com/Om2Uu.png\" rel=\"nofollow noreferrer\">check error here</a></p>\n<p>From the error shown while running the container its clear that the jar is having localhost and that is why it is not able to connect. But if I try to change the connection properties details in the spring boot app and try to build the jar that is also failing. Please help me in fixing this. Thanks in advance.</p>\n<p>Also find the Dockerfile</p>\n<pre><code>FROM openjdk:17-oracle\nCOPY target/*.jar testapp.jar\nEXPOSE 8082\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;testapp.jar&quot;]\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1697996111,"post_id":77341008,"comment_id":136346391,"body_markdown":"Is your code working as expected or do you have any issues? What is your question?","body":"Is your code working as expected or do you have any issues? What is your question?"},{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":0,"creation_date":1697996256,"post_id":77341008,"comment_id":136346411,"body_markdown":"As I said my code does not work. I want to get a list as I wrote based on this example input","body":"As I said my code does not work. I want to get a list as I wrote based on this example input"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1697996620,"post_id":77341008,"comment_id":136346449,"body_markdown":"How does the pair class look like? Is it a custom class or are you using some library? If yes which library?","body":"How does the pair class look like? Is it a custom class or are you using some library? If yes which library?"},{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":0,"creation_date":1697996704,"post_id":77341008,"comment_id":136346459,"body_markdown":"this Pair class comes from androidx.core.util","body":"this Pair class comes from androidx.core.util"}],"answers":[{"comments":[{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":1,"creation_date":1698005987,"post_id":77341218,"comment_id":136347432,"body_markdown":"Tkank you for informations!","body":"Tkank you for informations!"}],"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697999887,"creation_date":1697999437,"answer_id":77341218,"question_id":77341008,"body_markdown":"There are a few problems with this code:\r\n\r\n        for (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; obj : xyOffset) {\r\n            counter++;\r\n            if (oldGid == obj.first) {\r\n\r\n            } else {\r\n                someList.add(counter);\r\n                counter = 0;\r\n            }\r\n            oldGid = obj.first;\r\n        }\r\n\r\n1. The first time through the loop, `oldGid` will not be equal to `obj.first` because it is never initialized and so `oldGid` will have the value of zero. This will result in an entry added to `someList` with the value of 1. The second element added to `someList` have the wrong count as well due to this same problem. To fix this problem you need to skip the `if` statement the first time through the loop and simply set `oldGid = obj.first`. You can remember if it is the first time through the loop by using a `boolean` variable.\r\n2. You increment `counter` at the beginning of the loop. Since you are adding the elements to `someList` when you detect a change in the value of `obj.first`, you need to make sure that you increment the `counter` variable only AFTER you add the element to `someList`.\r\n3. Since you only add an element to `someList` when you detect a change in the value of `obj.first`, you will fail to add the last element to `someList` because the `for` loop will simply complete. So you need to add code to add the last element to `someList` after the `for` loop ends.","title":"Android count occurences in List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; by field","body":"<p>There are a few problems with this code:</p>\n<pre><code>    for (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; obj : xyOffset) {\n        counter++;\n        if (oldGid == obj.first) {\n\n        } else {\n            someList.add(counter);\n            counter = 0;\n        }\n        oldGid = obj.first;\n    }\n</code></pre>\n<ol>\n<li>The first time through the loop, <code>oldGid</code> will not be equal to <code>obj.first</code> because it is never initialized and so <code>oldGid</code> will have the value of zero. This will result in an entry added to <code>someList</code> with the value of 1. The second element added to <code>someList</code> have the wrong count as well due to this same problem. To fix this problem you need to skip the <code>if</code> statement the first time through the loop and simply set <code>oldGid = obj.first</code>. You can remember if it is the first time through the loop by using a <code>boolean</code> variable.</li>\n<li>You increment <code>counter</code> at the beginning of the loop. Since you are adding the elements to <code>someList</code> when you detect a change in the value of <code>obj.first</code>, you need to make sure that you increment the <code>counter</code> variable only AFTER you add the element to <code>someList</code>.</li>\n<li>Since you only add an element to <code>someList</code> when you detect a change in the value of <code>obj.first</code>, you will fail to add the last element to <code>someList</code> because the <code>for</code> loop will simply complete. So you need to add code to add the last element to <code>someList</code> after the <code>for</code> loop ends.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":0,"creation_date":1698006049,"post_id":77341221,"comment_id":136347436,"body_markdown":"Thank you for answer. Tommorow I will test it and if this solution works then I will accept it.","body":"Thank you for answer. Tommorow I will test it and if this solution works then I will accept it."}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697999489,"creation_date":1697999489,"answer_id":77341221,"question_id":77341008,"body_markdown":" - Stream over your list and map each pair to `first`\r\n - create a map by grouping by identity and mapping to frequency \r\n\r\nand finaly get the values of the map\r\n\r\n    public static void main(String[] args) {\r\n\r\n        List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; xyOffset = List.of(\r\n                Pair.create(2L, Pair.create(924, 181)),\r\n                Pair.create(2L, Pair.create(1078, 181)),\r\n                Pair.create(2L, Pair.create(1694, 543)),\r\n                Pair.create(3L, Pair.create(154, 181)),\r\n                Pair.create(4L, Pair.create(770, 543)),\r\n                Pair.create(21L, Pair.create(308, 724)),\r\n                Pair.create(21L, Pair.create(462, 543)));\r\n        \r\n        List&lt;Long&gt; result = new ArrayList&lt;&gt;(xyOffset.stream()\r\n                                                     .map(p -&gt; p.first)\r\n                                                     .collect(Collectors.groupingBy(Function.identity(),Collectors.counting()))\r\n                                                     .values());\r\n\r\n        System.out.println(result);\r\n    }\r\n\r\nIf you want a non stream approach: Create an intermediate map, iterate over your input list and update your map using `first` as key and frequency as value\r\n\r\n    Map&lt;Long,Integer&gt; map = new LinkedHashMap&lt;&gt;();\r\n\r\n    for (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; pair : xyOffset) {\r\n        map.merge(pair.first, 1, (x, y) -&gt; x + y);\r\n    }\r\n\r\n    List&lt;Long&gt; result2 = new ArrayList&lt;&gt;(map.values());","title":"Android count occurences in List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; by field","body":"<ul>\n<li>Stream over your list and map each pair to <code>first</code></li>\n<li>create a map by grouping by identity and mapping to frequency</li>\n</ul>\n<p>and finaly get the values of the map</p>\n<pre><code>public static void main(String[] args) {\n\n    List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; xyOffset = List.of(\n            Pair.create(2L, Pair.create(924, 181)),\n            Pair.create(2L, Pair.create(1078, 181)),\n            Pair.create(2L, Pair.create(1694, 543)),\n            Pair.create(3L, Pair.create(154, 181)),\n            Pair.create(4L, Pair.create(770, 543)),\n            Pair.create(21L, Pair.create(308, 724)),\n            Pair.create(21L, Pair.create(462, 543)));\n    \n    List&lt;Long&gt; result = new ArrayList&lt;&gt;(xyOffset.stream()\n                                                 .map(p -&gt; p.first)\n                                                 .collect(Collectors.groupingBy(Function.identity(),Collectors.counting()))\n                                                 .values());\n\n    System.out.println(result);\n}\n</code></pre>\n<p>If you want a non stream approach: Create an intermediate map, iterate over your input list and update your map using <code>first</code> as key and frequency as value</p>\n<pre><code>Map&lt;Long,Integer&gt; map = new LinkedHashMap&lt;&gt;();\n\nfor (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; pair : xyOffset) {\n    map.merge(pair.first, 1, (x, y) -&gt; x + y);\n}\n\nList&lt;Long&gt; result2 = new ArrayList&lt;&gt;(map.values());\n</code></pre>\n"}],"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77341221,"answer_count":2,"score":-2,"last_activity_date":1697999887,"creation_date":1697995678,"question_id":77341008,"body_markdown":"I want to count into `someList` all repeating longs (obj.first) in list. \r\n\r\nHere are declarations:\r\n\r\n\r\n    private static List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; xyOffset = new ArrayList&lt;&gt;();\r\n    private static List&lt;Integer&gt; someList = new ArrayList&lt;&gt;();\r\n    private static int counter = 0;\r\n    private static long oldGid;\r\n\r\nHere is what I have done regarding this counting, but it does not work because I have no idea how to do that and this is the question of this post how to solve that to have `someList` with output as written at the bottom of this post:\r\n\r\n            for (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; obj : xyOffset) {\r\n                counter++;\r\n                if (oldGid == obj.first) {\r\n\r\n                } else {\r\n                    someList.add(counter);\r\n                    counter = 0;\r\n                }\r\n                oldGid = obj.first;\r\n            }\r\n\r\n`xyOffset` is sorted ascending by .first like that: `Collections.sort(xyOffset, ComparatorCompat.comparing(o -&gt; o.first));`.\r\n\r\n\r\n\r\nHere is  an example of data.\r\n\r\n**Input** of `xyOffset`:\r\n\r\n[Pair{2 Pair{924 181}}, Pair{2 Pair{1078 181}}, Pair{2 Pair{1694 543}}, Pair{3 Pair{154 181}}, Pair{4 Pair{770 543}}, Pair{21 Pair{308 724}}, Pair{21 Pair{462 543}}]\r\n\r\nand as an **output** I want `someList` to have:\r\n\r\n[3, 1, 1, 2]\r\n\r\n\r\nExplanation of expected output: \r\n\r\n- 3 occurrences of 2, \r\n- 1 occurrence of 3,\r\n- 1 occurrence of 4,\r\n- 2 occurrences of 21. \r\n\r\n\r\nPS: I hope my post is understandable.","title":"Android count occurences in List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; by field","body":"<p>I want to count into <code>someList</code> all repeating longs (obj.first) in list.</p>\n<p>Here are declarations:</p>\n<pre><code>private static List&lt;Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt;&gt; xyOffset = new ArrayList&lt;&gt;();\nprivate static List&lt;Integer&gt; someList = new ArrayList&lt;&gt;();\nprivate static int counter = 0;\nprivate static long oldGid;\n</code></pre>\n<p>Here is what I have done regarding this counting, but it does not work because I have no idea how to do that and this is the question of this post how to solve that to have <code>someList</code> with output as written at the bottom of this post:</p>\n<pre><code>        for (Pair&lt;Long, Pair&lt;Integer, Integer&gt;&gt; obj : xyOffset) {\n            counter++;\n            if (oldGid == obj.first) {\n\n            } else {\n                someList.add(counter);\n                counter = 0;\n            }\n            oldGid = obj.first;\n        }\n</code></pre>\n<p><code>xyOffset</code> is sorted ascending by .first like that: <code>Collections.sort(xyOffset, ComparatorCompat.comparing(o -&gt; o.first));</code>.</p>\n<p>Here is  an example of data.</p>\n<p><strong>Input</strong> of <code>xyOffset</code>:</p>\n<p>[Pair{2 Pair{924 181}}, Pair{2 Pair{1078 181}}, Pair{2 Pair{1694 543}}, Pair{3 Pair{154 181}}, Pair{4 Pair{770 543}}, Pair{21 Pair{308 724}}, Pair{21 Pair{462 543}}]</p>\n<p>and as an <strong>output</strong> I want <code>someList</code> to have:</p>\n<p>[3, 1, 1, 2]</p>\n<p>Explanation of expected output:</p>\n<ul>\n<li>3 occurrences of 2,</li>\n<li>1 occurrence of 3,</li>\n<li>1 occurrence of 4,</li>\n<li>2 occurrences of 21.</li>\n</ul>\n<p>PS: I hope my post is understandable.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9808,"page":109,"page_size":100}
